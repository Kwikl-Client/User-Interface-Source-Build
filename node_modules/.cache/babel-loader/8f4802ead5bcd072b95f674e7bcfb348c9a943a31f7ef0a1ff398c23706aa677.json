{"ast":null,"code":"import * as CLS from '../base/classes';\nimport * as events from '../base/constant';\nimport { read, paste, Search, filter, Download, Delete } from '../common/operations';\nimport { getValue, setValue, isNullOrUndefined as isNOU, matches, select, createElement, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { closest, detach } from '@syncfusion/ej2-base';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nimport { createDialog } from '../pop-up/dialog';\n/**\n * Utility file for common actions\n *\n * @param {HTMLLIElement} node - specifies the node.\n * @param {Object} data - specifies the data.\n * @param {IFileManager} instance - specifies the control instance.\n * @returns {void}\n * @private\n */\n// eslint-disable-next-line\nexport function updatePath(node, data, instance) {\n  var text = getValue('name', data);\n  var id = node.getAttribute('data-id');\n  var newText = isNOU(id) ? text : id;\n  instance.setProperties({\n    path: getPath(node, newText, instance.hasId)\n  }, true);\n  instance.pathId = getPathId(node);\n  instance.pathNames = getPathNames(node, text);\n}\n/**\n * Functions for get path in FileManager\n *\n * @param {Element | Node} element - specifies the element.\n * @param {string} text - specifies the text.\n * @param {boolean} hasId - specifies the id.\n * @returns {string} returns the path.\n * @private\n */\nexport function getPath(element, text, hasId) {\n  var matched = getParents(element, text, false, hasId);\n  var path = hasId ? '' : '/';\n  var len = matched.length - (hasId ? 1 : 2);\n  for (var i = len; i >= 0; i--) {\n    path += matched[i] + '/';\n  }\n  return path;\n}\n/**\n * Functions for get path id in FileManager\n *\n * @param {Element} node - specifies the node element.\n * @returns {string[]} returns the path ids.\n * @private\n */\nexport function getPathId(node) {\n  var matched = getParents(node, node.getAttribute('data-uid'), true);\n  var ids = [];\n  for (var i = matched.length - 1; i >= 0; i--) {\n    ids.push(matched[i]);\n  }\n  return ids;\n}\n/**\n * Functions for get path names in FileManager\n *\n * @param {Element} element - specifies the node element.\n * @param {string} text - specifies the text.\n * @returns {string[]} returns the path names.\n * @private\n */\nexport function getPathNames(element, text) {\n  var matched = getParents(element, text, false);\n  var names = [];\n  for (var i = matched.length - 1; i >= 0; i--) {\n    names.push(matched[i]);\n  }\n  return names;\n}\n/**\n * Functions for get path id in FileManager\n *\n * @param {Element} element - specifies the node element.\n * @param {string} text - specifies the text.\n * @param {boolean} isId - specifies the id.\n * @param {boolean} hasId - checks the id exists.\n * @returns {string[]} returns parent element.\n * @private\n */\nexport function getParents(element, text, isId, hasId) {\n  var matched = [text];\n  var el = element.parentNode;\n  while (!isNOU(el)) {\n    if (matches(el, '.' + CLS.LIST_ITEM)) {\n      var parentText = isId ? el.getAttribute('data-uid') : hasId ? el.getAttribute('data-id') : select('.' + CLS.LIST_TEXT, el).textContent;\n      matched.push(parentText);\n    }\n    el = el.parentNode;\n    if (el.classList.contains(CLS.TREE_VIEW)) {\n      break;\n    }\n  }\n  return matched;\n}\n/**\n * Functions for generate path\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @returns {void}\n * @private\n */\nexport function generatePath(parent) {\n  var key = parent.hasId ? 'id' : 'name';\n  var newPath = parent.hasId ? '' : '/';\n  var i = parent.hasId ? 0 : 1;\n  for (i; i < parent.pathId.length; i++) {\n    // eslint-disable-next-line\n    var data = getValue(parent.pathId[i], parent.feParent);\n    newPath += getValue(key, data) + '/';\n  }\n  parent.setProperties({\n    path: newPath\n  }, true);\n}\n/**\n * Functions for remove active element\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @returns {void}\n * @private\n */\nexport function removeActive(parent) {\n  if (parent.isCut) {\n    removeBlur(parent);\n    parent.selectedNodes = [];\n    parent.actionRecords = [];\n    parent.enablePaste = false;\n    parent.notify(events.hidePaste, {});\n  }\n}\n/**\n * Selects active element in File Manager\n *\n * @param {string} action - specifies the action.\n * @param {IFileManager} parent - specifies the parent element.\n * @returns {boolean} - returns active element.\n * @private\n */\nexport function activeElement(action, parent) {\n  parent.isSearchCut = false;\n  parent.actionRecords = [];\n  parent.activeElements = [];\n  parent.notify(events.cutCopyInit, {});\n  if (parent.activeElements.length === 0) {\n    return false;\n  }\n  removeBlur(parent);\n  var blurEle = parent.activeElements;\n  if (parent.activeModule !== 'navigationpane') {\n    parent.targetPath = parent.path;\n  } else {\n    parent.targetPath = getParentPath(parent.path);\n  }\n  var i = 0;\n  if (blurEle) {\n    getModule(parent, blurEle[0]);\n    if (action === 'cut') {\n      while (i < blurEle.length) {\n        addBlur(blurEle[i]);\n        i++;\n      }\n    }\n  }\n  i = 0;\n  parent.selectedNodes = [];\n  parent.enablePaste = true;\n  parent.notify(events.showPaste, {});\n  while (i < parent.activeRecords.length) {\n    parent.actionRecords.push(parent.activeRecords[i]);\n    parent.selectedNodes.push(getValue('name', parent.activeRecords[i]));\n    i++;\n  }\n  if ((parent.breadcrumbbarModule.searchObj.element.value !== '' || parent.isFiltered) && parent.activeModule !== 'navigationpane') {\n    parent.selectedNodes = [];\n    parent.isSearchCut = true;\n    var i_1 = 0;\n    while (i_1 < parent.selectedItems.length) {\n      parent.selectedNodes.push(parent.selectedItems[i_1]);\n      i_1++;\n    }\n  }\n  return true;\n}\n/**\n * Adds blur to the elements\n *\n * @param {Element} nodes - specifies the nodes.\n * @returns {void}\n * @private\n */\nexport function addBlur(nodes) {\n  nodes.classList.add(CLS.BLUR);\n}\n/**\n * Removes blur from elements\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string} hover - specifies the hover string.\n * @returns {void}\n * @private\n */\nexport function removeBlur(parent, hover) {\n  var blurEle = !hover ? parent.element.querySelectorAll('.' + CLS.BLUR) : parent.element.querySelectorAll('.' + CLS.HOVER);\n  var i = 0;\n  while (i < blurEle.length) {\n    blurEle[i].classList.remove(!hover ? CLS.BLUR : CLS.HOVER);\n    i++;\n  }\n}\n/**\n * Gets module name\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {Element} element - specifies the element.\n * @returns {void}\n * @private\n */\nexport function getModule(parent, element) {\n  if (element) {\n    if (element.classList.contains(CLS.ROW)) {\n      parent.activeModule = 'detailsview';\n    } else if (closest(element, '.' + CLS.LARGE_ICON)) {\n      parent.activeModule = 'largeiconsview';\n    } else {\n      parent.activeModule = 'navigationpane';\n    }\n  }\n}\n/**\n * Gets module name\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string} value - specifies the value.\n * @param {boolean} isLayoutChange - specifies the layout change.\n * @returns {void}\n * @private\n */\nexport function searchWordHandler(parent, value, isLayoutChange) {\n  var searchWord;\n  if (value.length === 0 && !parent.isFiltered) {\n    parent.notify(events.pathColumn, {\n      args: parent\n    });\n  }\n  if (parent.searchSettings.filterType === 'startsWith') {\n    searchWord = value + '*';\n  } else if (parent.searchSettings.filterType === 'endsWith') {\n    searchWord = '*' + value;\n  } else {\n    searchWord = '*' + value + '*';\n  }\n  parent.searchWord = searchWord;\n  parent.itemData = [getPathObject(parent)];\n  if (value.length > 0) {\n    var caseSensitive = parent.searchSettings.ignoreCase;\n    var hiddenItems = parent.showHiddenItems;\n    Search(parent, isLayoutChange ? events.layoutChange : events.search, parent.path, searchWord, hiddenItems, !caseSensitive);\n  } else {\n    if (!parent.isFiltered) {\n      if (parent.isSortByClicked) {\n        parent.notify(events.layoutChange, {\n          files: parent.oldView === 'Details' ? parent.detailsviewModule.gridObj.dataSource : parent.largeiconsviewModule.allItems\n        });\n        parent.isSortByClicked = false;\n      } else {\n        read(parent, isLayoutChange ? events.layoutChange : events.search, parent.path);\n      }\n    } else {\n      filter(parent, events.layoutChange);\n    }\n  }\n}\n/**\n * Gets updated layout\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string} view - specifies the view.\n * @returns {void}\n * @private\n */\nexport function updateLayout(parent, view) {\n  parent.oldView = parent.view;\n  parent.setProperties({\n    view: view\n  }, true);\n  if (parent.breadcrumbbarModule.searchObj.element.value !== '' || parent.isFiltered) {\n    parent.layoutSelectedItems = parent.selectedItems;\n  }\n  var searchWord = '';\n  if (parent.breadcrumbbarModule.searchObj.element.value) {\n    searchWord = parent.breadcrumbbarModule.searchObj.element.value;\n  }\n  parent.isLayoutChange = true;\n  searchWordHandler(parent, searchWord, true);\n}\n/* istanbul ignore next */\n/**\n * Gets updated layout\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {Element} element - specifies the element.\n * @returns {void}\n * @private\n */\nexport function getTargetModule(parent, element) {\n  var tartgetModule = '';\n  if (element) {\n    if (closest(element, '.' + CLS.ROOT + '.' + CLS.CONTROL + ' .' + CLS.GRID_CONTENT)) {\n      tartgetModule = 'detailsview';\n    } else if (closest(element, '.' + CLS.LARGE_ICONS)) {\n      tartgetModule = 'largeiconsview';\n    } else if (element.classList.contains('e-fullrow') || element.classList.contains('e-icon-expandable')) {\n      tartgetModule = 'navigationpane';\n    } else if (closest(element, '.e-address-list-item')) {\n      tartgetModule = 'breadcrumbbar';\n    } else {\n      tartgetModule = '';\n    }\n  }\n  parent.targetModule = tartgetModule;\n}\n/* istanbul ignore next */\n/**\n * refresh the layout\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @returns {void}\n * @private\n */\nexport function refresh(parent) {\n  parent.itemData = [getPathObject(parent)];\n  if (!hasReadAccess(parent.itemData[0])) {\n    createDeniedDialog(parent, parent.itemData[0], events.permissionRead);\n  } else {\n    read(parent, events.refreshEnd, parent.path);\n  }\n}\n/**\n * open action in the layout\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @returns {void}\n * @private\n */\nexport function openAction(parent) {\n  read(parent, events.openEnd, parent.path);\n}\n/**\n * open action in the layout\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @returns {Object} - returns the path data.\n * @private\n */\n// eslint-disable-next-line\nexport function getPathObject(parent) {\n  return getValue(parent.pathId[parent.pathId.length - 1], parent.feParent);\n}\n/**\n * Copy files\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @returns {void}\n * @private\n */\nexport function copyFiles(parent) {\n  if (!activeElement('copy', parent)) {\n    return;\n  } else {\n    parent.fileAction = 'copy';\n  }\n}\n/**\n * Cut files\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @returns {void}\n * @private\n */\nexport function cutFiles(parent) {\n  if (!activeElement('cut', parent)) {\n    return;\n  } else {\n    parent.isCut = true;\n    parent.fileAction = 'move';\n  }\n}\n/**\n * To add class for fileType\n *\n * @param {Object} file - specifies the file.\n * @returns {string} - returns the file type.\n * @private\n */\n// eslint-disable-next-line\nexport function fileType(file) {\n  var isFile = getValue('isFile', file);\n  if (!isFile) {\n    return CLS.FOLDER;\n  }\n  var imageFormat = ['bmp', 'dib', 'jpg', 'jpeg', 'jpe', 'jfif', 'gif', 'tif', 'tiff', 'png', 'ico'];\n  var audioFormat = ['mp3', 'wav', 'aac', 'ogg', 'wma', 'aif', 'fla', 'm4a'];\n  var videoFormat = ['webm', 'mkv', 'flv', 'vob', 'ogv', 'ogg', 'avi', 'wmv', 'mp4', '3gp'];\n  var knownFormat = ['css', 'exe', 'html', 'js', 'msi', 'pdf', 'pptx', 'ppt', 'rar', 'zip', 'txt', 'docx', 'doc', 'xlsx', 'xls', 'xml', 'rtf', 'php'];\n  var filetype = getValue('type', file);\n  filetype = filetype.toLowerCase();\n  if (filetype.indexOf('.') !== -1) {\n    filetype = filetype.split('.').join('');\n  }\n  var iconType;\n  if (imageFormat.indexOf(filetype) !== -1) {\n    iconType = CLS.ICON_IMAGE;\n  } else if (audioFormat.indexOf(filetype) !== -1) {\n    iconType = CLS.ICON_MUSIC;\n  } else if (videoFormat.indexOf(filetype) !== -1) {\n    iconType = CLS.ICON_VIDEO;\n  } else if (knownFormat.indexOf(filetype) !== -1) {\n    iconType = 'e-fe-' + filetype;\n  } else {\n    iconType = 'e-fe-unknown e-fe-' + filetype;\n  }\n  return iconType;\n}\n/* istanbul ignore next */\n/**\n * To get the image URL\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {Object} item - specifies the item.\n * @returns {string} - returns the image url.\n * @private\n */\n// eslint-disable-next-line\nexport function getImageUrl(parent, item) {\n  var baseUrl = parent.ajaxSettings.getImageUrl ? parent.ajaxSettings.getImageUrl : parent.ajaxSettings.url;\n  var pathUrl = baseUrl.indexOf('?') !== -1 ? '&path=' : '?path=';\n  var imgUrl;\n  var fileName = encodeURIComponent(getValue('name', item));\n  var fPath = getValue('filterPath', item);\n  if (parent.hasId) {\n    var imgId = getValue('id', item);\n    imgUrl = baseUrl + pathUrl + parent.path + '&id=' + imgId;\n  } else if (!isNOU(fPath)) {\n    imgUrl = baseUrl + pathUrl + encodeURIComponent(fPath.replace(/\\\\/g, '/')) + fileName;\n  } else {\n    imgUrl = baseUrl + pathUrl + parent.path + fileName;\n  }\n  imgUrl = imgUrl + '&time=' + new Date().getTime().toString();\n  var eventArgs = {\n    fileDetails: [item],\n    imageUrl: imgUrl\n  };\n  parent.trigger('beforeImageLoad', eventArgs);\n  return eventArgs.imageUrl;\n}\n/* istanbul ignore next */\n/**\n * Gets the full path\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {Object} data - specifies the data.\n * @param {string} path - specifies the path.\n * @returns {string} - returns the image url.\n * @private\n */\n// eslint-disable-next-line\nexport function getFullPath(parent, data, path) {\n  var filePath = getValue(parent.hasId ? 'id' : 'name', data) + '/';\n  var fPath = getValue(parent.hasId ? 'filterId' : 'filterPath', data);\n  if (!isNOU(fPath)) {\n    return fPath.replace(/\\\\/g, '/') + filePath;\n  } else {\n    return path + filePath;\n  }\n}\n/**\n * Gets the name\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {Object} data - specifies the data.\n * @returns {string} - returns the name.\n * @private\n */\n// eslint-disable-next-line\nexport function getName(parent, data) {\n  var name = getValue('name', data);\n  var fPath = getValue('filterPath', data);\n  if ((parent.breadcrumbbarModule.searchObj.element.value !== '' || parent.isFiltered) && !isNOU(fPath)) {\n    fPath = fPath.replace(/\\\\/g, '/');\n    name = fPath.replace(parent.path, '') + name;\n  }\n  return name;\n}\n/**\n * Gets the name\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {Object[]} items - specifies the item elements.\n * @returns {Object[]} - returns the sorted data.\n * @private\n */\n// eslint-disable-next-line\nexport function getSortedData(parent, items) {\n  if (items.length === 0) {\n    return items;\n  }\n  var query;\n  if (parent.sortOrder !== 'None') {\n    query = new Query().sortBy(parent.sortBy, parent.sortOrder.toLowerCase(), true).group('isFile');\n  } else {\n    query = new Query().group('isFile');\n  }\n  // eslint-disable-next-line\n  var lists = new DataManager(items).executeLocal(query);\n  return getValue('records', lists);\n}\n/**\n * Gets the data object\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string} key - specifies the key.\n * @param {string} value - specifies the value.\n * @returns {Object} - returns the sorted data.\n * @private\n */\n// eslint-disable-next-line\nexport function getObject(parent, key, value) {\n  // eslint-disable-next-line\n  var currFiles = getValue(parent.pathId[parent.pathId.length - 1], parent.feFiles);\n  var query = new Query().where(key, 'equal', value);\n  // eslint-disable-next-line\n  var lists = new DataManager(currFiles).executeLocal(query);\n  return lists[0];\n}\n/**\n * Creates empty element\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {HTMLElement} element - specifies the element.\n * @param {ReadArgs | SearchArgs} args - specifies the args.\n * @returns {void}\n * @private\n */\nexport function createEmptyElement(parent, element, args) {\n  var top;\n  var layoutElement = select('#' + parent.element.id + CLS.LAYOUT_ID, parent.element);\n  var addressBarHeight = select('#' + parent.element.id + CLS.BREADCRUMBBAR_ID, layoutElement).offsetHeight;\n  top = layoutElement.offsetHeight - addressBarHeight;\n  if (parent.view === 'Details') {\n    top = top - select('.' + CLS.GRID_HEADER, layoutElement).offsetHeight;\n  }\n  if (isNOU(element.querySelector('.' + CLS.EMPTY))) {\n    var emptyDiv = createElement('div', {\n      className: CLS.EMPTY\n    });\n    var emptyFolder = createElement('div', {\n      className: CLS.LARGE_EMPTY_FOLDER\n    });\n    var emptyEle = createElement('div', {\n      className: CLS.EMPTY_CONTENT\n    });\n    var dragFile = createElement('div', {\n      className: CLS.EMPTY_INNER_CONTENT\n    });\n    if (parent.view === 'Details') {\n      element.querySelector('.' + CLS.GRID_VIEW).appendChild(emptyDiv);\n    } else {\n      element.appendChild(emptyDiv);\n    }\n    emptyDiv.appendChild(emptyFolder);\n    emptyDiv.appendChild(emptyEle);\n    emptyDiv.appendChild(dragFile);\n  }\n  if (element.querySelector('.' + CLS.EMPTY)) {\n    if (!isNOU(args.error)) {\n      element.querySelector('.' + CLS.EMPTY_CONTENT).innerHTML = getLocaleText(parent, 'Access-Denied');\n      element.querySelector('.' + CLS.EMPTY_INNER_CONTENT).innerHTML = getLocaleText(parent, 'Access-Details');\n    } else if (parent.isFiltered) {\n      element.querySelector('.' + CLS.EMPTY_CONTENT).innerHTML = getLocaleText(parent, 'Filter-Empty');\n      element.querySelector('.' + CLS.EMPTY_INNER_CONTENT).innerHTML = getLocaleText(parent, 'Filter-Key');\n    } else if (parent.breadcrumbbarModule.searchObj.element.value !== '') {\n      element.querySelector('.' + CLS.EMPTY_CONTENT).innerHTML = getLocaleText(parent, 'Search-Empty');\n      element.querySelector('.' + CLS.EMPTY_INNER_CONTENT).innerHTML = getLocaleText(parent, 'Search-Key');\n    } else {\n      element.querySelector('.' + CLS.EMPTY_CONTENT).innerHTML = getLocaleText(parent, 'Folder-Empty');\n      element.querySelector('.' + CLS.EMPTY_INNER_CONTENT).innerHTML = getLocaleText(parent, 'File-Upload');\n    }\n  }\n  var eDiv = select('.' + CLS.EMPTY, element);\n  top = (top - eDiv.offsetHeight) / 2;\n  eDiv.style.marginTop = top + 'px';\n}\n/**\n * Gets the directories\n *\n * @param {Object[]} files - specifies the file object.\n * @returns {Object[]} - returns the sorted data.\n * @private\n */\n// eslint-disable-next-line\nexport function getDirectories(files) {\n  return new DataManager(files).executeLocal(new Query().where(events.isFile, 'equal', false, false));\n}\n/**\n * set the Node ID\n *\n * @param {ReadArgs} result - specifies the result.\n * @param {string} rootId - specifies the rootId.\n * @returns {void}\n * @private\n */\nexport function setNodeId(result, rootId) {\n  // eslint-disable-next-line\n  var dirs = getDirectories(result.files);\n  for (var i = 0, len = dirs.length; i < len; i++) {\n    setValue('_fm_id', rootId + '_' + i, dirs[i]);\n  }\n}\n/**\n * set the date object\n *\n * @param {Object[]} args - specifies the file object.\n * @returns {void}\n * @private\n */\n// eslint-disable-next-line\nexport function setDateObject(args, localeString, dateFormat) {\n  for (var i = 0; i < args.length; i++) {\n    var createdDate = new Date(getValue('dateCreated', args[i]));\n    var modifiedDate = new Date(getValue('dateModified', args[i]));\n    if (isNOU(dateFormat)) {\n      dateFormat = \"MM/dd/yyyy\";\n    }\n    setValue('_fm_created', localeString.formatDate(createdDate, {\n      format: dateFormat\n    }), args[i]);\n    setValue('_fm_modified', localeString.formatDate(modifiedDate, {\n      format: dateFormat\n    }), args[i]);\n  }\n}\n/**\n * get the locale text\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string} text - specifies the text.\n * @returns {string} - returns the locale text.\n * @private\n */\nexport function getLocaleText(parent, text) {\n  var locale = parent.localeObj.getConstant(text);\n  return locale === '' ? text : locale;\n}\n/**\n * get the CSS class\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string} css - specifies the css.\n * @returns {string} - returns the css classes.\n * @private\n */\nexport function getCssClass(parent, css) {\n  var cssClass = parent.cssClass;\n  cssClass = isNOU(cssClass) || cssClass === '' ? css : cssClass + ' ' + css;\n  return cssClass;\n}\n/**\n * sort on click\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {MenuEventArgs} args - specifies the menu event arguements.\n * @returns {void}\n * @private\n */\nexport function sortbyClickHandler(parent, args) {\n  var tick;\n  parent.isSortByClicked = true;\n  if (args.item.id.indexOf('ascending') !== -1 || args.item.id.indexOf('descending') !== -1 || args.item.id.indexOf('none') !== -1) {\n    tick = true;\n  } else {\n    tick = false;\n  }\n  if (!tick) {\n    parent.sortBy = getSortField(args.item.id, parent);\n  } else {\n    parent.sortOrder = getSortField(args.item.id);\n  }\n  parent.itemData = [getPathObject(parent)];\n  if (parent.view === 'Details') {\n    if (parent.isMobile) {\n      updateLayout(parent, 'Details');\n    } else {\n      parent.notify(events.sortColumn, {\n        module: 'detailsview'\n      });\n      parent.isSortByClicked = false;\n    }\n  }\n  if (parent.view === 'LargeIcons') {\n    updateLayout(parent, 'LargeIcons');\n  }\n  parent.notify(events.sortByChange, {});\n}\n/**\n * Gets the sorted fields\n *\n * @param {string} id - specifies the id.\n * @returns {string} - returns the sorted fields\n * @private\n */\nexport function getSortField(id, parent) {\n  var text = id.substring(id.lastIndexOf('_') + 1);\n  var field = text;\n  var column;\n  if (parent) {\n    column = parent.detailsViewSettings.columns;\n  }\n  switch (text) {\n    case 'date':\n      for (var i = 0, len = column.length; i < len; i++) {\n        if (column[i].field === 'dateModified' || column[i].field === 'dateCreated') {\n          field = column[i].field;\n          break;\n        } else {\n          field = '_fm_modified';\n        }\n      }\n      break;\n    case 'ascending':\n      field = 'Ascending';\n      break;\n    case 'descending':\n      field = 'Descending';\n      break;\n    case 'none':\n      field = 'None';\n      break;\n  }\n  return field;\n}\n/**\n * Sets the next path\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string} path - specifies the path.\n * @returns {void}\n * @private\n */\nexport function setNextPath(parent, path) {\n  var currfolders = path.split('/');\n  var folders = parent.originalPath.split('/');\n  // eslint-disable-next-line\n  var root = getValue(parent.pathId[0], parent.feParent);\n  var key = isNOU(getValue('id', root)) ? 'name' : 'id';\n  for (var i = currfolders.length - 1, len = folders.length - 1; i < len; i++) {\n    var eventName = folders[i + 1] === '' ? events.finalizeEnd : events.initialEnd;\n    var newPath = folders[i] === '' ? '/' : parent.path + folders[i] + '/';\n    // eslint-disable-next-line\n    var data = getObject(parent, key, folders[i]);\n    var id = getValue('_fm_id', data);\n    parent.setProperties({\n      path: newPath\n    }, true);\n    parent.pathId.push(id);\n    parent.itemData = [data];\n    parent.pathNames.push(getValue('name', data));\n    read(parent, eventName, parent.path);\n    break;\n  }\n}\n/**\n * Opens the searched folder\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {Object} data - specifies the data\n * @returns {void}\n * @private\n */\n// eslint-disable-next-line\nexport function openSearchFolder(parent, data) {\n  parent.originalPath = getFullPath(parent, data, parent.path);\n  var root = getValue(parent.pathId[0], parent.feParent);\n  var isRoot = getValue('_fm_id', parent.itemData[0]) == 'fe_tree';\n  var key = isNOU(getValue('id', root)) ? 'name' : 'id';\n  var searchData = getObject(parent, key, getValue('name', data));\n  if (isNullOrUndefined(searchData)) {\n    if (!isRoot) {\n      parent.notify(events.clearPathInit, {\n        selectedNode: parent.pathId[parent.pathId.length - 1]\n      });\n    } else {\n      setNextPath(parent, parent.path);\n      return;\n    }\n  } else {\n    var id = getValue('_fm_id', searchData);\n    parent.setProperties({\n      path: parent.originalPath\n    }, true);\n    parent.pathId.push(id);\n    parent.itemData = [searchData];\n    parent.pathNames.push(getValue('name', searchData));\n  }\n  read(parent, parent.path !== parent.originalPath ? events.initialEnd : events.finalizeEnd, parent.path);\n}\n/**\n * Paste handling function\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @returns {void}\n * @private\n */\nexport function pasteHandler(parent) {\n  parent.isDragDrop = false;\n  if (parent.selectedNodes.length !== 0 && parent.enablePaste) {\n    var path = parent.folderPath === '' ? parent.path : parent.folderPath;\n    // eslint-disable-next-line\n    var subFolder = validateSubFolder(parent, parent.actionRecords, path, parent.path);\n    if (!subFolder) {\n      if (parent.fileAction === 'move' && parent.targetPath !== path || parent.fileAction === 'copy') {\n        parent.notify(events.pasteInit, {});\n        paste(parent, parent.targetPath, parent.selectedNodes, path, parent.fileAction, [], parent.actionRecords);\n      } else {\n        parent.enablePaste = false;\n        parent.notify(events.hidePaste, {});\n        removeBlur(parent);\n        var result = {\n          files: null,\n          error: {\n            code: '402',\n            message: getLocaleText(parent, 'Same-Folder-Error'),\n            fileExists: null\n          }\n        };\n        createDialog(parent, 'Error', result);\n      }\n    }\n  }\n}\n/**\n * Validates the sub folders\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {'{ [key: string]: Object; }[]'} data - specifies the data.\n * @param {string} dropPath - specifies the drop path.\n * @param {string} dragPath - specifies the drag path.\n * @returns {boolean} - returns the validated sub folder.\n * @private\n */\n// eslint-disable-next-line\nexport function validateSubFolder(parent, data, dropPath, dragPath) {\n  var subFolder = false;\n  for (var i = 0; i < data.length; i++) {\n    if (!getValue('isFile', data[i])) {\n      var tempTarget = getFullPath(parent, data[i], dragPath);\n      if (dropPath.indexOf(tempTarget) === 0) {\n        var result = {\n          files: null,\n          error: {\n            code: '402',\n            message: getLocaleText(parent, 'Sub-Folder-Error'),\n            fileExists: null\n          }\n        };\n        createDialog(parent, 'Error', result);\n        subFolder = true;\n        break;\n      }\n    } else {\n      var srcData = parent.dragNodes[i];\n      var len = 0;\n      if (srcData) {\n        len = srcData.lastIndexOf('/');\n      }\n      var path = '';\n      if (len > 0) {\n        path = dragPath + srcData.substring(0, len + 1);\n      }\n      if (path === dropPath) {\n        var result = {\n          files: null,\n          error: {\n            code: '402',\n            message: getLocaleText(parent, 'Same-Folder-Error'),\n            fileExists: null\n          }\n        };\n        createDialog(parent, 'Error', result);\n        subFolder = true;\n        break;\n      }\n    }\n  }\n  return subFolder;\n}\n/**\n * Validates the drop handler\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @returns {void}\n * @private\n */\nexport function dropHandler(parent) {\n  parent.isDragDrop = true;\n  if (parent.dragData.length !== 0) {\n    parent.dragPath = parent.dragPath.replace(/\\\\/g, '/');\n    parent.dropPath = parent.dropPath.replace(/\\\\/g, '/');\n    var subFolder = validateSubFolder(parent, parent.dragData, parent.dropPath, parent.dragPath);\n    if (!subFolder && parent.dragPath !== parent.dropPath) {\n      parent.itemData = [parent.dropData];\n      paste(parent, parent.dragPath, parent.dragNodes, parent.dropPath, 'move', [], parent.dragData);\n      parent.notify(events.pasteInit, {});\n    }\n  }\n}\n/**\n * Gets the parent path\n *\n * @param {string} oldPath - specifies the old path.\n * @returns {string} - returns the parent path.\n * @private\n */\nexport function getParentPath(oldPath) {\n  var path = oldPath.split('/');\n  var newPath = path[0] + '/';\n  for (var i = 1; i < path.length - 2; i++) {\n    newPath += path[i] + '/';\n  }\n  return newPath;\n}\n/**\n * Gets the directory path\n *\n * @param {IFileManager} parent - specifies the parent.\n * @param {ReadArgs} args - returns the read arguements.\n * @returns {string} - returns the directory path\n * @private\n */\nexport function getDirectoryPath(parent, args) {\n  var filePath = getValue(parent.hasId ? 'id' : 'name', args.cwd) + '/';\n  var fPath = getValue(parent.hasId ? 'filterId' : 'filterPath', args.cwd);\n  if (!isNOU(fPath)) {\n    if (fPath === '') {\n      return parent.hasId ? filePath : '/';\n    }\n    return fPath.replace(/\\\\/g, '/') + filePath;\n  } else {\n    return parent.path + filePath;\n  }\n}\n/**\n * Gets the do paste path\n *\n * @param {IFileManager} parent - specifies the parent.\n * @param {string} operation - specifies the operations.\n * @param {ReadArgs} result - returns the result.\n * @returns {void}\n * @private\n */\nexport function doPasteUpdate(parent, operation, result) {\n  if (operation === 'move') {\n    if (!parent.isDragDrop) {\n      parent.enablePaste = false;\n      parent.notify(events.hidePaste, {});\n      parent.notify(events.cutEnd, result);\n    } else {\n      parent.notify(events.dragEnd, result);\n    }\n  }\n  if (parent.duplicateItems.length === 0) {\n    parent.pasteNodes = [];\n  }\n  var flag = false;\n  for (var count = 0; count < result.files.length && !flag; count++) {\n    parent.pasteNodes.push(result.files[count][parent.hasId ? 'id' : 'name']);\n    if (parent.isDragDrop) {\n      parent.droppedObjects.push(result.files[count]);\n    }\n  }\n  parent.duplicateItems = [];\n  parent.duplicateRecords = [];\n  if (parent.isDragDrop && !parent.isPasteError) {\n    parent.isDropEnd = true;\n  } else {\n    parent.isDropEnd = false;\n  }\n  if (!parent.isDragDrop || parent.path === parent.dragPath || parent.path === parent.dropPath || parent.isSearchDrag) {\n    parent.isPathDrag = false;\n    read(parent, events.pasteEnd, parent.path);\n  } else {\n    readDropPath(parent);\n  }\n  parent.trigger('success', {\n    action: operation,\n    result: result\n  });\n}\n/**\n * Reads the drop path\n *\n * @param {IFileManager} parent - specifies the parent.\n * @returns {void}\n * @private\n */\nexport function readDropPath(parent) {\n  var pathId = getValue('_fm_id', parent.dropData);\n  parent.expandedId = pathId;\n  parent.itemData = [parent.dropData];\n  if (parent.isPathDrag) {\n    parent.notify(events.pathDrag, parent.itemData);\n  } else {\n    if (parent.navigationpaneModule) {\n      var node = select('[data-uid=\"' + pathId + '\"]', parent.navigationpaneModule.treeObj.element);\n      if (!node) {\n        var liElement = document.querySelector('[data-id = \"' + getValue('id', parent.dropData) + '\"]');\n        pathId = liElement.getAttribute(\"data-uid\");\n        node = select('[data-uid=\"' + pathId + '\"]', parent.navigationpaneModule.treeObj.element);\n      }\n      updatePath(node, parent.dropData, parent);\n    }\n    read(parent, events.dropPath, parent.dropPath);\n  }\n}\n/**\n * Gets the duplicated path\n *\n * @param {IFileManager} parent - specifies the parent.\n * @param {string} name - specifies the name.\n * @returns {object} - returns the duplicated path.\n * @private\n */\n// eslint-disable-next-line\nexport function getDuplicateData(parent, name) {\n  // eslint-disable-next-line\n  var data = null;\n  // eslint-disable-next-line\n  var records = parent.isDragDrop ? parent.dragData : parent.actionRecords;\n  for (var i = 0; i < records.length; i++) {\n    if (getValue('name', records[i]) === name) {\n      data = records[i];\n      break;\n    }\n  }\n  return data;\n}\n/**\n * Gets the create the virtual drag element\n *\n * @param {IFileManager} parent - specifies the parent.\n * @returns {void}\n * @private\n */\nexport function createVirtualDragElement(parent) {\n  parent.isSearchDrag = false;\n  if (parent.breadcrumbbarModule.searchObj.element.value !== '') {\n    parent.isSearchDrag = true;\n  }\n  if (parent.activeModule !== 'navigationpane') {\n    parent.dragNodes = [];\n    var i = 0;\n    while (i < parent.selectedItems.length) {\n      parent.dragNodes.push(parent.selectedItems[i]);\n      i++;\n    }\n    if (parent.selectedItems.length === 0 && parent.dragData && parent.dragData.length === 1) {\n      parent.dragNodes.push(getItemName(parent, parent.dragData[0]));\n    }\n  }\n  var cloneIcon = parent.createElement('div', {\n    className: 'e-fe-icon ' + fileType(parent.dragData[0])\n  });\n  var cloneName = parent.createElement('div', {\n    className: 'e-fe-name',\n    innerHTML: parent.dragData[0].name\n  });\n  var virtualEle = parent.createElement('div', {\n    className: 'e-fe-content'\n  });\n  virtualEle.appendChild(cloneIcon);\n  virtualEle.appendChild(cloneName);\n  var ele = parent.createElement('div', {\n    className: CLS.CLONE\n  });\n  ele.appendChild(virtualEle);\n  if (parent.dragNodes.length > 1) {\n    var badge = parent.createElement('span', {\n      className: 'e-fe-count',\n      innerHTML: parent.dragNodes.length.toString(10)\n    });\n    ele.appendChild(badge);\n  }\n  parent.virtualDragElement = ele;\n  parent.element.appendChild(parent.virtualDragElement);\n}\n/**\n * Drops the stop handler\n *\n * @param {IFileManager} parent - specifies the parent.\n * @param {DragEventArgs} args - specifies the drag event arguements.\n * @returns {void}\n * @private\n */\nexport function dragStopHandler(parent, args) {\n  var dragArgs = args;\n  dragArgs.cancel = false;\n  if (parent.treeExpandTimer != null) {\n    window.clearTimeout(parent.treeExpandTimer);\n    parent.treeExpandTimer = null;\n  }\n  removeDropTarget(parent);\n  parent.element.classList.remove('e-fe-drop', 'e-no-drop');\n  removeBlur(parent);\n  parent.uploadObj.dropArea = select('#' + parent.element.id + CLS.CONTENT_ID, parent.element);\n  var virtualEle = select('.' + CLS.CLONE, parent.element);\n  if (virtualEle) {\n    detach(virtualEle);\n  }\n  getTargetModule(parent, args.target);\n  parent.notify(events.dropInit, args);\n  removeBlur(parent, 'hover');\n  dragArgs.fileDetails = parent.dragData;\n  parent.trigger('fileDragStop', dragArgs, function (dragArgs) {\n    if (!dragArgs.cancel && !isNOU(parent.targetModule) && parent.targetModule !== '' && parent.dragCount > 2) {\n      dropHandler(parent);\n    }\n    parent.dragCount = 0;\n  });\n}\n/**\n * Drag the start handler\n *\n * @param {IFileManager} parent - specifies the parent.\n * @param {'DragEventArgs'} args - specifies the drag event arguements.\n * @param {Draggable} dragObj - specifies the drag event arguements.\n * @returns {void}\n * @private\n */\nexport function dragStartHandler(parent, args, dragObj) {\n  var dragArgs = args;\n  dragArgs.cancel = false;\n  dragArgs.fileDetails = parent.dragData;\n  parent.dragCount = 0;\n  parent.droppedObjects = [];\n  if (!parent.allowDragAndDrop || parent.activeModule === 'navigationpane' && closest(args.element, 'li').getAttribute('data-uid') === parent.pathId[0]) {\n    dragArgs.cancel = true;\n  }\n  if (parent.activeModule === 'navigationpane' && parent.pathId.indexOf(closest(args.element, 'li').getAttribute('data-uid')) !== -1) {\n    parent.isPathDrag = true;\n  } else {\n    parent.isPathDrag = false;\n  }\n  removeBlur(parent);\n  if (dragArgs.cancel) {\n    dragObj.intDestroy(args.event);\n    dragCancel(parent);\n  } else if (!dragArgs.cancel) {\n    var i = 0;\n    while (i < parent.activeElements.length) {\n      addBlur(parent.activeElements[i]);\n      i++;\n    }\n    parent.trigger('fileDragStart', dragArgs, function (dragArgs) {\n      if (dragArgs.cancel) {\n        dragObj.intDestroy(args.event);\n        dragCancel(parent);\n      } else {\n        parent.uploadObj.dropArea = null;\n      }\n    });\n  }\n}\n/**\n * Drag the cancel handler\n *\n * @param {IFileManager} parent - specifies the parent.\n * @returns {void}\n * @private\n */\nexport function dragCancel(parent) {\n  removeBlur(parent);\n  var virtualEle = select('.' + CLS.CLONE, parent.element);\n  if (virtualEle) {\n    detach(virtualEle);\n  }\n}\n/**\n * Remove drop target handler\n *\n * @param {IFileManager} parent - specifies the parent.\n * @returns {void}\n * @private\n */\nexport function removeDropTarget(parent) {\n  removeItemClass(parent, CLS.DROP_FOLDER);\n  removeItemClass(parent, CLS.DROP_FILE);\n}\n/**\n * Remove item class handler\n *\n * @param {IFileManager} parent - specifies the parent.\n * @param {string} value - specifies the value.\n * @returns {void}\n * @private\n */\nexport function removeItemClass(parent, value) {\n  var ele = parent.element.querySelectorAll('.' + value);\n  for (var i = 0; i < ele.length; i++) {\n    ele[i].classList.remove(value);\n  }\n}\n/**\n * Remove item class handler\n *\n * @param {Element} scrollParent - specifies the scrolling target.\n * @param {IFileManager} parent - specifies the parent.\n * @param {string} nodeClass - specifies the node class.\n * @param {number} screenY - specifies the vertical (Y) coordinate of the mouse cursor position relative to the entire screen.\n * @param {number} clientY - specifies the vertical (Y) coordinate of the mouse cursor position relative to the target element.\n * @returns {void}\n * @private\n */\nexport function scrollHandler(scrollParent, parent, nodeClass, screenY, clientY) {\n  var position;\n  var elementData = scrollParent.getBoundingClientRect();\n  var node = select(\".\" + nodeClass, scrollParent);\n  if (screenY >= elementData.top + scrollParent.clientHeight - 30 && !isNullOrUndefined(node)) {\n    position = parent.targetModule === 'navigationpane' || parent.targetModule === 'detailsview' ? node.offsetHeight / 2.5 : node.offsetHeight / 4.5;\n    scrollParent.scrollBy(0, position);\n  }\n  if (!isNullOrUndefined(node) && clientY <= elementData.top + 30) {\n    position = parent.targetModule === 'navigationpane' || parent.targetModule === 'detailsview' ? node.offsetHeight / 2.5 : node.offsetHeight / 4.5;\n    scrollParent.scrollBy(0, -position);\n  }\n}\n/**\n * Dragging handler\n *\n * @param {IFileManager} parent - specifies the parent.\n * @param {DragEventArgs} args - specifies the arguements.\n * @returns {void}\n * @private\n */\nexport function draggingHandler(parent, args) {\n  var dragArgs = args;\n  dragArgs.fileDetails = parent.dragData;\n  var canDrop = false;\n  getTargetModule(parent, args.target);\n  removeDropTarget(parent);\n  if (parent.treeExpandTimer != null) {\n    window.clearTimeout(parent.treeExpandTimer);\n    parent.treeExpandTimer = null;\n  }\n  removeBlur(parent, 'hover');\n  var node = null;\n  var scrollParent;\n  if (parent.targetModule === 'navigationpane') {\n    node = closest(args.target, 'li');\n    node.classList.add(CLS.HOVER, CLS.DROP_FOLDER);\n    canDrop = true;\n    /* istanbul ignore next */\n    parent.treeExpandTimer = window.setTimeout(function () {\n      parent.notify(events.dragging, args);\n    }, 800);\n    scrollParent = parent.navigationpaneModule.treeObj.element.parentElement;\n    scrollHandler(scrollParent, parent, 'e-level-2', args.event.screenY, args.event.y);\n  } else if (parent.targetModule === 'detailsview') {\n    node = closest(args.target, 'tr');\n    if (node && node.querySelector('.' + CLS.FOLDER) && !node.classList.contains(CLS.BLUR)) {\n      node.classList.add(CLS.DROP_FOLDER);\n    } else if (node && !node.querySelector('.' + CLS.FOLDER) && !node.classList.contains(CLS.BLUR)) {\n      node.classList.add(CLS.DROP_FILE);\n    }\n    canDrop = true;\n    scrollParent = parent.detailsviewModule.gridObj.element.querySelector('.e-content');\n    scrollHandler(scrollParent, parent, 'e-row', args.event.screenY, args.event.y);\n  } else if (parent.targetModule === 'largeiconsview') {\n    node = closest(args.target, 'li');\n    if (node && node.querySelector('.' + CLS.FOLDER) && !node.classList.contains(CLS.BLUR)) {\n      node.classList.add(CLS.HOVER, CLS.DROP_FOLDER);\n    }\n    canDrop = true;\n    scrollParent = parent.largeiconsviewModule.element.firstElementChild;\n    scrollHandler(scrollParent, parent, 'e-large-icon', args.event.screenY, args.event.y);\n    /* istanbul ignore next */\n  } else if (parent.targetModule === 'breadcrumbbar') {\n    canDrop = true;\n  }\n  parent.element.classList.remove('e-fe-drop', 'e-no-drop');\n  parent.element.classList.add(canDrop ? 'e-fe-drop' : 'e-no-drop');\n  parent.dragCount = parent.dragCount + 1;\n  parent.trigger('fileDragging', dragArgs);\n}\n/**\n * Object to string handler\n *\n * @param {Object} data - specifies the data.\n * @returns {string} returns string converted from Object.\n * @private\n */\n// Ignored the message key value in permission object\n// eslint-disable-next-line\nexport function objectToString(data) {\n  var str = '';\n  var keys = Object.keys(data);\n  for (var i = 0; i < keys.length; i++) {\n    if (keys[i] !== 'message') {\n      str += (i === 0 ? '' : ', ') + keys[i] + ': ' + getValue(keys[i], data);\n    }\n  }\n  return str;\n}\n/**\n * Get item name handler\n *\n * @param {IFileManager} parent - specifies the parent.\n * @param {Object} data - specifies the data.\n * @returns {string} returns the item name.\n * @private\n */\n// eslint-disable-next-line\nexport function getItemName(parent, data) {\n  if (parent.hasId) {\n    return getValue('id', data);\n  }\n  return getName(parent, data);\n}\n/**\n * Get item name handler\n *\n * @param {IFileManager} parent - specifies the parent.\n * @param {Object} data - specifies the data.\n * @returns {void}\n * @private\n */\n// eslint-disable-next-line\nexport function updateRenamingData(parent, data) {\n  parent.itemData = [data];\n  parent.currentItemText = getValue('name', data);\n  parent.isFile = getValue('isFile', data);\n  parent.filterPath = getValue('filterPath', data);\n}\n/**\n * Get item name handler\n *\n * @param {IFileManager} parent - specifies the parent.\n * @returns {void}\n * @private\n */\nexport function doRename(parent) {\n  if (!hasEditAccess(parent.itemData[0])) {\n    createDeniedDialog(parent, parent.itemData[0], events.permissionEdit);\n  } else {\n    createDialog(parent, 'Rename');\n  }\n}\n/* istanbul ignore next */\n/**\n * Download handler\n *\n * @param {IFileManager} parent - specifies the parent.\n * @returns {void}\n * @private\n */\nexport function doDownload(parent) {\n  // eslint-disable-next-line\n  var items = parent.itemData;\n  for (var i = 0; i < items.length; i++) {\n    if (!hasDownloadAccess(items[i])) {\n      createDeniedDialog(parent, items[i], events.permissionDownload);\n      return;\n    }\n  }\n  if (parent.selectedItems.length > 0) {\n    Download(parent, parent.path, parent.selectedItems);\n  }\n}\n/**\n * Delete Files handler\n *\n * @param {IFileManager} parent - specifies the parent.\n * @param {Object[]} data - specifies the data.\n * @param {string[]} newIds - specifies the new Ids.\n * @returns {void}\n * @private\n */\n// eslint-disable-next-line\nexport function doDeleteFiles(parent, data, newIds) {\n  for (var i = 0; i < data.length; i++) {\n    if (!hasEditAccess(data[i])) {\n      createDeniedDialog(parent, data[i], events.permissionEdit);\n      return;\n    }\n  }\n  parent.itemData = data;\n  Delete(parent, newIds, parent.path, 'delete');\n}\n/* istanbul ignore next */\n/**\n * Download files handler\n *\n * @param {IFileManager} parent - specifies the parent.\n * @param {Object[]} data - specifies the data.\n * @param {string[]} newIds - specifies the new Ids.\n * @returns {void}\n * @private\n */\n// eslint-disable-next-line\nexport function doDownloadFiles(parent, data, newIds) {\n  for (var i = 0; i < data.length; i++) {\n    if (!hasDownloadAccess(data[i])) {\n      createDeniedDialog(parent, data[i], events.permissionDownload);\n      return;\n    }\n  }\n  parent.itemData = data;\n  if (newIds.length > 0) {\n    Download(parent, parent.path, newIds);\n  }\n}\n/**\n * Download files handler\n *\n * @param {IFileManager} parent - specifies the parent.\n * @param {Object} data - specifies the data.\n * @param {string} action - specifies the actions.\n * @returns {void}\n * @private\n */\n// eslint-disable-next-line\nexport function createDeniedDialog(parent, data, action) {\n  var message = getValue('message', getValue('permission', data));\n  if (message === '') {\n    message = getLocaleText(parent, 'Access-Message').replace('{0}', getValue('name', data)).replace('{1}', action);\n  }\n  var response = {\n    error: {\n      code: '401',\n      fileExists: null,\n      message: message\n    }\n  };\n  createDialog(parent, 'Error', response);\n}\n/**\n * Get Access Classes\n *\n * @param {Object} data - specifies the data.\n * @returns {string} - returns accesses classes.\n * @private\n */\n// eslint-disable-next-line\nexport function getAccessClass(data) {\n  return !hasReadAccess(data) ? 'e-fe-locked e-fe-hidden' : 'e-fe-locked';\n}\n/**\n * Check read access handler\n *\n * @param {Object} data - specifies the data.\n * @returns {boolean} - returns read access.\n * @private\n */\n// eslint-disable-next-line\nexport function hasReadAccess(data) {\n  // eslint-disable-next-line\n  var permission = getValue('permission', data);\n  return permission && !getValue('read', permission) ? false : true;\n}\n/**\n * Check edit access handler\n *\n * @param {Object} data - specifies the data.\n * @returns {boolean} - returns edit access.\n * @private\n */\n// eslint-disable-next-line\nexport function hasEditAccess(data) {\n  // eslint-disable-next-line\n  var permission = getValue('permission', data);\n  return permission ? getValue('read', permission) && getValue('write', permission) : true;\n}\n/**\n * Check content access handler\n *\n * @param {Object} data - specifies the data.\n * @returns {boolean} - returns content access.\n * @private\n */\n// eslint-disable-next-line\nexport function hasContentAccess(data) {\n  // eslint-disable-next-line\n  var permission = getValue('permission', data);\n  return permission ? getValue('read', permission) && getValue('writeContents', permission) : true;\n}\n/**\n * Check upload access handler\n *\n * @param {Object} data - specifies the data.\n * @returns {boolean} - returns upload access.\n * @private\n */\n// eslint-disable-next-line\nexport function hasUploadAccess(data) {\n  // eslint-disable-next-line\n  var permission = getValue('permission', data);\n  return permission ? getValue('read', permission) && getValue('upload', permission) : true;\n}\n/**\n * Check download access handler\n *\n * @param {Object} data - specifies the data.\n * @returns {boolean} - returns download access.\n * @private\n */\n// eslint-disable-next-line\nexport function hasDownloadAccess(data) {\n  // eslint-disable-next-line\n  var permission = getValue('permission', data);\n  return permission ? getValue('read', permission) && getValue('download', permission) : true;\n}\n/**\n * Create new folder handler\n *\n * @param {IFileManager} parent - specifies the parent.\n * @returns {void}\n * @private\n */\nexport function createNewFolder(parent) {\n  // eslint-disable-next-line\n  var details = parent.itemData[0];\n  if (!hasContentAccess(details)) {\n    createDeniedDialog(parent, details, events.permissionEditContents);\n  } else {\n    createDialog(parent, 'NewFolder');\n  }\n}\n/**\n * Upload item handler\n *\n * @param {IFileManager} parent - specifies the parent.\n * @returns {void}\n * @private\n */\nexport function uploadItem(parent) {\n  // eslint-disable-next-line\n  var details = parent.itemData[0];\n  if (!hasUploadAccess(details)) {\n    createDeniedDialog(parent, details, events.permissionUpload);\n  } else {\n    var eleId = '#' + parent.element.id + CLS.UPLOAD_ID;\n    var uploadEle = document.querySelector(eleId);\n    uploadEle.click();\n  }\n}","map":{"version":3,"names":["CLS","events","read","paste","Search","filter","Download","Delete","getValue","setValue","isNullOrUndefined","isNOU","matches","select","createElement","closest","detach","DataManager","Query","createDialog","updatePath","node","data","instance","text","id","getAttribute","newText","setProperties","path","getPath","hasId","pathId","getPathId","pathNames","getPathNames","element","matched","getParents","len","length","i","ids","push","names","isId","el","parentNode","LIST_ITEM","parentText","LIST_TEXT","textContent","classList","contains","TREE_VIEW","generatePath","parent","key","newPath","feParent","removeActive","isCut","removeBlur","selectedNodes","actionRecords","enablePaste","notify","hidePaste","activeElement","action","isSearchCut","activeElements","cutCopyInit","blurEle","activeModule","targetPath","getParentPath","getModule","addBlur","showPaste","activeRecords","breadcrumbbarModule","searchObj","value","isFiltered","i_1","selectedItems","nodes","add","BLUR","hover","querySelectorAll","HOVER","remove","ROW","LARGE_ICON","searchWordHandler","isLayoutChange","searchWord","pathColumn","args","searchSettings","filterType","itemData","getPathObject","caseSensitive","ignoreCase","hiddenItems","showHiddenItems","layoutChange","search","isSortByClicked","files","oldView","detailsviewModule","gridObj","dataSource","largeiconsviewModule","allItems","updateLayout","view","layoutSelectedItems","getTargetModule","tartgetModule","ROOT","CONTROL","GRID_CONTENT","LARGE_ICONS","targetModule","refresh","hasReadAccess","createDeniedDialog","permissionRead","refreshEnd","openAction","openEnd","copyFiles","fileAction","cutFiles","fileType","file","isFile","FOLDER","imageFormat","audioFormat","videoFormat","knownFormat","filetype","toLowerCase","indexOf","split","join","iconType","ICON_IMAGE","ICON_MUSIC","ICON_VIDEO","getImageUrl","item","baseUrl","ajaxSettings","url","pathUrl","imgUrl","fileName","encodeURIComponent","fPath","imgId","replace","Date","getTime","toString","eventArgs","fileDetails","imageUrl","trigger","getFullPath","filePath","getName","name","getSortedData","items","query","sortOrder","sortBy","group","lists","executeLocal","getObject","currFiles","feFiles","where","createEmptyElement","top","layoutElement","LAYOUT_ID","addressBarHeight","BREADCRUMBBAR_ID","offsetHeight","GRID_HEADER","querySelector","EMPTY","emptyDiv","className","emptyFolder","LARGE_EMPTY_FOLDER","emptyEle","EMPTY_CONTENT","dragFile","EMPTY_INNER_CONTENT","GRID_VIEW","appendChild","error","innerHTML","getLocaleText","eDiv","style","marginTop","getDirectories","setNodeId","result","rootId","dirs","setDateObject","localeString","dateFormat","createdDate","modifiedDate","formatDate","format","locale","localeObj","getConstant","getCssClass","css","cssClass","sortbyClickHandler","tick","getSortField","isMobile","sortColumn","module","sortByChange","substring","lastIndexOf","field","column","detailsViewSettings","columns","setNextPath","currfolders","folders","originalPath","root","eventName","finalizeEnd","initialEnd","openSearchFolder","isRoot","searchData","clearPathInit","selectedNode","pasteHandler","isDragDrop","folderPath","subFolder","validateSubFolder","pasteInit","code","message","fileExists","dropPath","dragPath","tempTarget","srcData","dragNodes","dropHandler","dragData","dropData","oldPath","getDirectoryPath","cwd","doPasteUpdate","operation","cutEnd","dragEnd","duplicateItems","pasteNodes","flag","count","droppedObjects","duplicateRecords","isPasteError","isDropEnd","isSearchDrag","isPathDrag","pasteEnd","readDropPath","expandedId","pathDrag","navigationpaneModule","treeObj","liElement","document","getDuplicateData","records","createVirtualDragElement","getItemName","cloneIcon","cloneName","virtualEle","ele","CLONE","badge","virtualDragElement","dragStopHandler","dragArgs","cancel","treeExpandTimer","window","clearTimeout","removeDropTarget","uploadObj","dropArea","CONTENT_ID","target","dropInit","dragCount","dragStartHandler","dragObj","allowDragAndDrop","intDestroy","event","dragCancel","removeItemClass","DROP_FOLDER","DROP_FILE","scrollHandler","scrollParent","nodeClass","screenY","clientY","position","elementData","getBoundingClientRect","clientHeight","scrollBy","draggingHandler","canDrop","setTimeout","dragging","parentElement","y","firstElementChild","objectToString","str","keys","Object","updateRenamingData","currentItemText","filterPath","doRename","hasEditAccess","permissionEdit","doDownload","hasDownloadAccess","permissionDownload","doDeleteFiles","newIds","doDownloadFiles","response","getAccessClass","permission","hasContentAccess","hasUploadAccess","createNewFolder","details","permissionEditContents","uploadItem","permissionUpload","eleId","UPLOAD_ID","uploadEle","click"],"sources":["/Users/saleem/Desktop/KClient/Web App/Ver_3.6/User Interface/website_Source files/node_modules/@syncfusion/ej2-filemanager/src/file-manager/common/utility.js"],"sourcesContent":["import * as CLS from '../base/classes';\nimport * as events from '../base/constant';\nimport { read, paste, Search, filter, Download, Delete } from '../common/operations';\nimport { getValue, setValue, isNullOrUndefined as isNOU, matches, select, createElement, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { closest, detach } from '@syncfusion/ej2-base';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nimport { createDialog } from '../pop-up/dialog';\n/**\n * Utility file for common actions\n *\n * @param {HTMLLIElement} node - specifies the node.\n * @param {Object} data - specifies the data.\n * @param {IFileManager} instance - specifies the control instance.\n * @returns {void}\n * @private\n */\n// eslint-disable-next-line\nexport function updatePath(node, data, instance) {\n    var text = getValue('name', data);\n    var id = node.getAttribute('data-id');\n    var newText = isNOU(id) ? text : id;\n    instance.setProperties({ path: getPath(node, newText, instance.hasId) }, true);\n    instance.pathId = getPathId(node);\n    instance.pathNames = getPathNames(node, text);\n}\n/**\n * Functions for get path in FileManager\n *\n * @param {Element | Node} element - specifies the element.\n * @param {string} text - specifies the text.\n * @param {boolean} hasId - specifies the id.\n * @returns {string} returns the path.\n * @private\n */\nexport function getPath(element, text, hasId) {\n    var matched = getParents(element, text, false, hasId);\n    var path = hasId ? '' : '/';\n    var len = matched.length - (hasId ? 1 : 2);\n    for (var i = len; i >= 0; i--) {\n        path += matched[i] + '/';\n    }\n    return path;\n}\n/**\n * Functions for get path id in FileManager\n *\n * @param {Element} node - specifies the node element.\n * @returns {string[]} returns the path ids.\n * @private\n */\nexport function getPathId(node) {\n    var matched = getParents(node, node.getAttribute('data-uid'), true);\n    var ids = [];\n    for (var i = matched.length - 1; i >= 0; i--) {\n        ids.push(matched[i]);\n    }\n    return ids;\n}\n/**\n * Functions for get path names in FileManager\n *\n * @param {Element} element - specifies the node element.\n * @param {string} text - specifies the text.\n * @returns {string[]} returns the path names.\n * @private\n */\nexport function getPathNames(element, text) {\n    var matched = getParents(element, text, false);\n    var names = [];\n    for (var i = matched.length - 1; i >= 0; i--) {\n        names.push(matched[i]);\n    }\n    return names;\n}\n/**\n * Functions for get path id in FileManager\n *\n * @param {Element} element - specifies the node element.\n * @param {string} text - specifies the text.\n * @param {boolean} isId - specifies the id.\n * @param {boolean} hasId - checks the id exists.\n * @returns {string[]} returns parent element.\n * @private\n */\nexport function getParents(element, text, isId, hasId) {\n    var matched = [text];\n    var el = element.parentNode;\n    while (!isNOU(el)) {\n        if (matches(el, '.' + CLS.LIST_ITEM)) {\n            var parentText = isId ? el.getAttribute('data-uid') : (hasId ? el.getAttribute('data-id') :\n                select('.' + CLS.LIST_TEXT, el).textContent);\n            matched.push(parentText);\n        }\n        el = el.parentNode;\n        if (el.classList.contains(CLS.TREE_VIEW)) {\n            break;\n        }\n    }\n    return matched;\n}\n/**\n * Functions for generate path\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @returns {void}\n * @private\n */\nexport function generatePath(parent) {\n    var key = parent.hasId ? 'id' : 'name';\n    var newPath = parent.hasId ? '' : '/';\n    var i = parent.hasId ? 0 : 1;\n    for (i; i < parent.pathId.length; i++) {\n        // eslint-disable-next-line\n        var data = getValue(parent.pathId[i], parent.feParent);\n        newPath += getValue(key, data) + '/';\n    }\n    parent.setProperties({ path: newPath }, true);\n}\n/**\n * Functions for remove active element\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @returns {void}\n * @private\n */\nexport function removeActive(parent) {\n    if (parent.isCut) {\n        removeBlur(parent);\n        parent.selectedNodes = [];\n        parent.actionRecords = [];\n        parent.enablePaste = false;\n        parent.notify(events.hidePaste, {});\n    }\n}\n/**\n * Selects active element in File Manager\n *\n * @param {string} action - specifies the action.\n * @param {IFileManager} parent - specifies the parent element.\n * @returns {boolean} - returns active element.\n * @private\n */\nexport function activeElement(action, parent) {\n    parent.isSearchCut = false;\n    parent.actionRecords = [];\n    parent.activeElements = [];\n    parent.notify(events.cutCopyInit, {});\n    if (parent.activeElements.length === 0) {\n        return false;\n    }\n    removeBlur(parent);\n    var blurEle = parent.activeElements;\n    if (parent.activeModule !== 'navigationpane') {\n        parent.targetPath = parent.path;\n    }\n    else {\n        parent.targetPath = getParentPath(parent.path);\n    }\n    var i = 0;\n    if (blurEle) {\n        getModule(parent, blurEle[0]);\n        if (action === 'cut') {\n            while (i < blurEle.length) {\n                addBlur(blurEle[i]);\n                i++;\n            }\n        }\n    }\n    i = 0;\n    parent.selectedNodes = [];\n    parent.enablePaste = true;\n    parent.notify(events.showPaste, {});\n    while (i < parent.activeRecords.length) {\n        parent.actionRecords.push(parent.activeRecords[i]);\n        parent.selectedNodes.push(getValue('name', parent.activeRecords[i]));\n        i++;\n    }\n    if ((parent.breadcrumbbarModule.searchObj.element.value !== '' || parent.isFiltered) &&\n        parent.activeModule !== 'navigationpane') {\n        parent.selectedNodes = [];\n        parent.isSearchCut = true;\n        var i_1 = 0;\n        while (i_1 < parent.selectedItems.length) {\n            parent.selectedNodes.push(parent.selectedItems[i_1]);\n            i_1++;\n        }\n    }\n    return true;\n}\n/**\n * Adds blur to the elements\n *\n * @param {Element} nodes - specifies the nodes.\n * @returns {void}\n * @private\n */\nexport function addBlur(nodes) {\n    nodes.classList.add(CLS.BLUR);\n}\n/**\n * Removes blur from elements\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string} hover - specifies the hover string.\n * @returns {void}\n * @private\n */\nexport function removeBlur(parent, hover) {\n    var blurEle = (!hover) ? parent.element.querySelectorAll('.' + CLS.BLUR) :\n        parent.element.querySelectorAll('.' + CLS.HOVER);\n    var i = 0;\n    while (i < blurEle.length) {\n        blurEle[i].classList.remove((!hover) ? CLS.BLUR : CLS.HOVER);\n        i++;\n    }\n}\n/**\n * Gets module name\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {Element} element - specifies the element.\n * @returns {void}\n * @private\n */\nexport function getModule(parent, element) {\n    if (element) {\n        if (element.classList.contains(CLS.ROW)) {\n            parent.activeModule = 'detailsview';\n        }\n        else if (closest(element, '.' + CLS.LARGE_ICON)) {\n            parent.activeModule = 'largeiconsview';\n        }\n        else {\n            parent.activeModule = 'navigationpane';\n        }\n    }\n}\n/**\n * Gets module name\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string} value - specifies the value.\n * @param {boolean} isLayoutChange - specifies the layout change.\n * @returns {void}\n * @private\n */\nexport function searchWordHandler(parent, value, isLayoutChange) {\n    var searchWord;\n    if (value.length === 0 && !parent.isFiltered) {\n        parent.notify(events.pathColumn, { args: parent });\n    }\n    if (parent.searchSettings.filterType === 'startsWith') {\n        searchWord = value + '*';\n    }\n    else if (parent.searchSettings.filterType === 'endsWith') {\n        searchWord = '*' + value;\n    }\n    else {\n        searchWord = '*' + value + '*';\n    }\n    parent.searchWord = searchWord;\n    parent.itemData = [getPathObject(parent)];\n    if (value.length > 0) {\n        var caseSensitive = parent.searchSettings.ignoreCase;\n        var hiddenItems = parent.showHiddenItems;\n        Search(parent, isLayoutChange ? events.layoutChange : events.search, parent.path, searchWord, hiddenItems, !caseSensitive);\n    }\n    else {\n        if (!parent.isFiltered) {\n            if (parent.isSortByClicked) {\n                parent.notify(events.layoutChange, { files: (parent.oldView === 'Details') ? parent.detailsviewModule.gridObj.dataSource : parent.largeiconsviewModule.allItems });\n                parent.isSortByClicked = false;\n            }\n            else {\n                read(parent, isLayoutChange ? events.layoutChange : events.search, parent.path);\n            }\n        }\n        else {\n            filter(parent, events.layoutChange);\n        }\n    }\n}\n/**\n * Gets updated layout\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string} view - specifies the view.\n * @returns {void}\n * @private\n */\nexport function updateLayout(parent, view) {\n    parent.oldView = parent.view;\n    parent.setProperties({ view: view }, true);\n    if (parent.breadcrumbbarModule.searchObj.element.value !== '' || parent.isFiltered) {\n        parent.layoutSelectedItems = parent.selectedItems;\n    }\n    var searchWord = '';\n    if (parent.breadcrumbbarModule.searchObj.element.value) {\n        searchWord = parent.breadcrumbbarModule.searchObj.element.value;\n    }\n    parent.isLayoutChange = true;\n    searchWordHandler(parent, searchWord, true);\n}\n/* istanbul ignore next */\n/**\n * Gets updated layout\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {Element} element - specifies the element.\n * @returns {void}\n * @private\n */\nexport function getTargetModule(parent, element) {\n    var tartgetModule = '';\n    if (element) {\n        if (closest(element, '.' + CLS.ROOT + '.' + CLS.CONTROL + ' .' + CLS.GRID_CONTENT)) {\n            tartgetModule = 'detailsview';\n        }\n        else if (closest(element, '.' + CLS.LARGE_ICONS)) {\n            tartgetModule = 'largeiconsview';\n        }\n        else if (element.classList.contains('e-fullrow') ||\n            element.classList.contains('e-icon-expandable')) {\n            tartgetModule = 'navigationpane';\n        }\n        else if (closest(element, '.e-address-list-item')) {\n            tartgetModule = 'breadcrumbbar';\n        }\n        else {\n            tartgetModule = '';\n        }\n    }\n    parent.targetModule = tartgetModule;\n}\n/* istanbul ignore next */\n/**\n * refresh the layout\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @returns {void}\n * @private\n */\nexport function refresh(parent) {\n    parent.itemData = [getPathObject(parent)];\n    if (!hasReadAccess(parent.itemData[0])) {\n        createDeniedDialog(parent, parent.itemData[0], events.permissionRead);\n    }\n    else {\n        read(parent, events.refreshEnd, parent.path);\n    }\n}\n/**\n * open action in the layout\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @returns {void}\n * @private\n */\nexport function openAction(parent) {\n    read(parent, events.openEnd, parent.path);\n}\n/**\n * open action in the layout\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @returns {Object} - returns the path data.\n * @private\n */\n// eslint-disable-next-line\nexport function getPathObject(parent) {\n    return getValue(parent.pathId[parent.pathId.length - 1], parent.feParent);\n}\n/**\n * Copy files\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @returns {void}\n * @private\n */\nexport function copyFiles(parent) {\n    if (!activeElement('copy', parent)) {\n        return;\n    }\n    else {\n        parent.fileAction = 'copy';\n    }\n}\n/**\n * Cut files\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @returns {void}\n * @private\n */\nexport function cutFiles(parent) {\n    if (!activeElement('cut', parent)) {\n        return;\n    }\n    else {\n        parent.isCut = true;\n        parent.fileAction = 'move';\n    }\n}\n/**\n * To add class for fileType\n *\n * @param {Object} file - specifies the file.\n * @returns {string} - returns the file type.\n * @private\n */\n// eslint-disable-next-line\nexport function fileType(file) {\n    var isFile = getValue('isFile', file);\n    if (!isFile) {\n        return CLS.FOLDER;\n    }\n    var imageFormat = ['bmp', 'dib', 'jpg', 'jpeg', 'jpe', 'jfif', 'gif', 'tif', 'tiff', 'png', 'ico'];\n    var audioFormat = ['mp3', 'wav', 'aac', 'ogg', 'wma', 'aif', 'fla', 'm4a'];\n    var videoFormat = ['webm', 'mkv', 'flv', 'vob', 'ogv', 'ogg', 'avi', 'wmv', 'mp4', '3gp'];\n    var knownFormat = ['css', 'exe', 'html', 'js', 'msi', 'pdf', 'pptx', 'ppt', 'rar', 'zip', 'txt', 'docx', 'doc',\n        'xlsx', 'xls', 'xml', 'rtf', 'php'];\n    var filetype = getValue('type', file);\n    filetype = filetype.toLowerCase();\n    if (filetype.indexOf('.') !== -1) {\n        filetype = filetype.split('.').join('');\n    }\n    var iconType;\n    if (imageFormat.indexOf(filetype) !== -1) {\n        iconType = CLS.ICON_IMAGE;\n    }\n    else if (audioFormat.indexOf(filetype) !== -1) {\n        iconType = CLS.ICON_MUSIC;\n    }\n    else if (videoFormat.indexOf(filetype) !== -1) {\n        iconType = CLS.ICON_VIDEO;\n    }\n    else if (knownFormat.indexOf(filetype) !== -1) {\n        iconType = 'e-fe-' + filetype;\n    }\n    else {\n        iconType = 'e-fe-unknown e-fe-' + filetype;\n    }\n    return iconType;\n}\n/* istanbul ignore next */\n/**\n * To get the image URL\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {Object} item - specifies the item.\n * @returns {string} - returns the image url.\n * @private\n */\n// eslint-disable-next-line\nexport function getImageUrl(parent, item) {\n    var baseUrl = parent.ajaxSettings.getImageUrl ? parent.ajaxSettings.getImageUrl : parent.ajaxSettings.url;\n    var pathUrl = (baseUrl.indexOf('?') !== -1) ? '&path=' : '?path=';\n    var imgUrl;\n    var fileName = encodeURIComponent(getValue('name', item));\n    var fPath = getValue('filterPath', item);\n    if (parent.hasId) {\n        var imgId = getValue('id', item);\n        imgUrl = baseUrl + pathUrl + parent.path + '&id=' + imgId;\n    }\n    else if (!isNOU(fPath)) {\n        imgUrl = baseUrl + pathUrl + encodeURIComponent(fPath.replace(/\\\\/g, '/')) + fileName;\n    }\n    else {\n        imgUrl = baseUrl + pathUrl + parent.path + fileName;\n    }\n    imgUrl = imgUrl + '&time=' + (new Date().getTime()).toString();\n    var eventArgs = {\n        fileDetails: [item],\n        imageUrl: imgUrl\n    };\n    parent.trigger('beforeImageLoad', eventArgs);\n    return eventArgs.imageUrl;\n}\n/* istanbul ignore next */\n/**\n * Gets the full path\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {Object} data - specifies the data.\n * @param {string} path - specifies the path.\n * @returns {string} - returns the image url.\n * @private\n */\n// eslint-disable-next-line\nexport function getFullPath(parent, data, path) {\n    var filePath = getValue(parent.hasId ? 'id' : 'name', data) + '/';\n    var fPath = getValue(parent.hasId ? 'filterId' : 'filterPath', data);\n    if (!isNOU(fPath)) {\n        return fPath.replace(/\\\\/g, '/') + filePath;\n    }\n    else {\n        return path + filePath;\n    }\n}\n/**\n * Gets the name\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {Object} data - specifies the data.\n * @returns {string} - returns the name.\n * @private\n */\n// eslint-disable-next-line\nexport function getName(parent, data) {\n    var name = getValue('name', data);\n    var fPath = getValue('filterPath', data);\n    if ((parent.breadcrumbbarModule.searchObj.element.value !== '' || parent.isFiltered) && !isNOU(fPath)) {\n        fPath = fPath.replace(/\\\\/g, '/');\n        name = fPath.replace(parent.path, '') + name;\n    }\n    return name;\n}\n/**\n * Gets the name\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {Object[]} items - specifies the item elements.\n * @returns {Object[]} - returns the sorted data.\n * @private\n */\n// eslint-disable-next-line\nexport function getSortedData(parent, items) {\n    if (items.length === 0) {\n        return items;\n    }\n    var query;\n    if (parent.sortOrder !== 'None') {\n        query = new Query().sortBy(parent.sortBy, parent.sortOrder.toLowerCase(), true).group('isFile');\n    }\n    else {\n        query = new Query().group('isFile');\n    }\n    // eslint-disable-next-line\n    var lists = new DataManager(items).executeLocal(query);\n    return getValue('records', lists);\n}\n/**\n * Gets the data object\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string} key - specifies the key.\n * @param {string} value - specifies the value.\n * @returns {Object} - returns the sorted data.\n * @private\n */\n// eslint-disable-next-line\nexport function getObject(parent, key, value) {\n    // eslint-disable-next-line\n    var currFiles = getValue(parent.pathId[parent.pathId.length - 1], parent.feFiles);\n    var query = new Query().where(key, 'equal', value);\n    // eslint-disable-next-line\n    var lists = new DataManager(currFiles).executeLocal(query);\n    return lists[0];\n}\n/**\n * Creates empty element\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {HTMLElement} element - specifies the element.\n * @param {ReadArgs | SearchArgs} args - specifies the args.\n * @returns {void}\n * @private\n */\nexport function createEmptyElement(parent, element, args) {\n    var top;\n    var layoutElement = select('#' + parent.element.id + CLS.LAYOUT_ID, parent.element);\n    var addressBarHeight = select('#' + parent.element.id + CLS.BREADCRUMBBAR_ID, layoutElement).offsetHeight;\n    top = layoutElement.offsetHeight - addressBarHeight;\n    if (parent.view === 'Details') {\n        top = top - select('.' + CLS.GRID_HEADER, layoutElement).offsetHeight;\n    }\n    if (isNOU(element.querySelector('.' + CLS.EMPTY))) {\n        var emptyDiv = createElement('div', { className: CLS.EMPTY });\n        var emptyFolder = createElement('div', { className: CLS.LARGE_EMPTY_FOLDER });\n        var emptyEle = createElement('div', { className: CLS.EMPTY_CONTENT });\n        var dragFile = createElement('div', { className: CLS.EMPTY_INNER_CONTENT });\n        if (parent.view === 'Details') {\n            element.querySelector('.' + CLS.GRID_VIEW).appendChild(emptyDiv);\n        }\n        else {\n            element.appendChild(emptyDiv);\n        }\n        emptyDiv.appendChild(emptyFolder);\n        emptyDiv.appendChild(emptyEle);\n        emptyDiv.appendChild(dragFile);\n    }\n    if (element.querySelector('.' + CLS.EMPTY)) {\n        if (!isNOU(args.error)) {\n            element.querySelector('.' + CLS.EMPTY_CONTENT).innerHTML = getLocaleText(parent, 'Access-Denied');\n            element.querySelector('.' + CLS.EMPTY_INNER_CONTENT).innerHTML = getLocaleText(parent, 'Access-Details');\n        }\n        else if (parent.isFiltered) {\n            element.querySelector('.' + CLS.EMPTY_CONTENT).innerHTML = getLocaleText(parent, 'Filter-Empty');\n            element.querySelector('.' + CLS.EMPTY_INNER_CONTENT).innerHTML = getLocaleText(parent, 'Filter-Key');\n        }\n        else if (parent.breadcrumbbarModule.searchObj.element.value !== '') {\n            element.querySelector('.' + CLS.EMPTY_CONTENT).innerHTML = getLocaleText(parent, 'Search-Empty');\n            element.querySelector('.' + CLS.EMPTY_INNER_CONTENT).innerHTML = getLocaleText(parent, 'Search-Key');\n        }\n        else {\n            element.querySelector('.' + CLS.EMPTY_CONTENT).innerHTML = getLocaleText(parent, 'Folder-Empty');\n            element.querySelector('.' + CLS.EMPTY_INNER_CONTENT).innerHTML = getLocaleText(parent, 'File-Upload');\n        }\n    }\n    var eDiv = select('.' + CLS.EMPTY, element);\n    top = (top - eDiv.offsetHeight) / 2;\n    eDiv.style.marginTop = top + 'px';\n}\n/**\n * Gets the directories\n *\n * @param {Object[]} files - specifies the file object.\n * @returns {Object[]} - returns the sorted data.\n * @private\n */\n// eslint-disable-next-line\nexport function getDirectories(files) {\n    return new DataManager(files).executeLocal(new Query().where(events.isFile, 'equal', false, false));\n}\n/**\n * set the Node ID\n *\n * @param {ReadArgs} result - specifies the result.\n * @param {string} rootId - specifies the rootId.\n * @returns {void}\n * @private\n */\nexport function setNodeId(result, rootId) {\n    // eslint-disable-next-line\n    var dirs = getDirectories(result.files);\n    for (var i = 0, len = dirs.length; i < len; i++) {\n        setValue('_fm_id', rootId + '_' + i, dirs[i]);\n    }\n}\n/**\n * set the date object\n *\n * @param {Object[]} args - specifies the file object.\n * @returns {void}\n * @private\n */\n// eslint-disable-next-line\nexport function setDateObject(args, localeString, dateFormat) {\n    for (var i = 0; i < args.length; i++) {\n        var createdDate = new Date(getValue('dateCreated', args[i]));\n        var modifiedDate = new Date(getValue('dateModified', args[i]));\n        if (isNOU(dateFormat)) {\n            dateFormat = \"MM/dd/yyyy\";\n        }\n        setValue('_fm_created', localeString.formatDate(createdDate, { format: dateFormat }), args[i]);\n        setValue('_fm_modified', localeString.formatDate(modifiedDate, { format: dateFormat }), args[i]);\n    }\n}\n/**\n * get the locale text\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string} text - specifies the text.\n * @returns {string} - returns the locale text.\n * @private\n */\nexport function getLocaleText(parent, text) {\n    var locale = parent.localeObj.getConstant(text);\n    return (locale === '') ? text : locale;\n}\n/**\n * get the CSS class\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string} css - specifies the css.\n * @returns {string} - returns the css classes.\n * @private\n */\nexport function getCssClass(parent, css) {\n    var cssClass = parent.cssClass;\n    cssClass = (isNOU(cssClass) || cssClass === '') ? css : (cssClass + ' ' + css);\n    return cssClass;\n}\n/**\n * sort on click\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {MenuEventArgs} args - specifies the menu event arguements.\n * @returns {void}\n * @private\n */\nexport function sortbyClickHandler(parent, args) {\n    var tick;\n    parent.isSortByClicked = true;\n    if (args.item.id.indexOf('ascending') !== -1 || args.item.id.indexOf('descending') !== -1 || args.item.id.indexOf('none') !== -1) {\n        tick = true;\n    }\n    else {\n        tick = false;\n    }\n    if (!tick) {\n        parent.sortBy = getSortField(args.item.id, parent);\n    }\n    else {\n        parent.sortOrder = getSortField(args.item.id);\n    }\n    parent.itemData = [getPathObject(parent)];\n    if (parent.view === 'Details') {\n        if (parent.isMobile) {\n            updateLayout(parent, 'Details');\n        }\n        else {\n            parent.notify(events.sortColumn, { module: 'detailsview' });\n            parent.isSortByClicked = false;\n        }\n    }\n    if (parent.view === 'LargeIcons') {\n        updateLayout(parent, 'LargeIcons');\n    }\n    parent.notify(events.sortByChange, {});\n}\n/**\n * Gets the sorted fields\n *\n * @param {string} id - specifies the id.\n * @returns {string} - returns the sorted fields\n * @private\n */\nexport function getSortField(id, parent) {\n    var text = id.substring(id.lastIndexOf('_') + 1);\n    var field = text;\n    var column;\n    if (parent) {\n        column = parent.detailsViewSettings.columns;\n    }\n    switch (text) {\n        case 'date':\n            for (var i = 0, len = column.length; i < len; i++) {\n                if (column[i].field === 'dateModified' || column[i].field === 'dateCreated') {\n                    field = column[i].field;\n                    break;\n                }\n                else {\n                    field = '_fm_modified';\n                }\n            }\n            break;\n        case 'ascending':\n            field = 'Ascending';\n            break;\n        case 'descending':\n            field = 'Descending';\n            break;\n        case 'none':\n            field = 'None';\n            break;\n    }\n    return field;\n}\n/**\n * Sets the next path\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string} path - specifies the path.\n * @returns {void}\n * @private\n */\nexport function setNextPath(parent, path) {\n    var currfolders = path.split('/');\n    var folders = parent.originalPath.split('/');\n    // eslint-disable-next-line\n    var root = getValue(parent.pathId[0], parent.feParent);\n    var key = isNOU(getValue('id', root)) ? 'name' : 'id';\n    for (var i = currfolders.length - 1, len = folders.length - 1; i < len; i++) {\n        var eventName = (folders[i + 1] === '') ? events.finalizeEnd : events.initialEnd;\n        var newPath = (folders[i] === '') ? '/' : (parent.path + folders[i] + '/');\n        // eslint-disable-next-line\n        var data = getObject(parent, key, folders[i]);\n        var id = getValue('_fm_id', data);\n        parent.setProperties({ path: newPath }, true);\n        parent.pathId.push(id);\n        parent.itemData = [data];\n        parent.pathNames.push(getValue('name', data));\n        read(parent, eventName, parent.path);\n        break;\n    }\n}\n/**\n * Opens the searched folder\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {Object} data - specifies the data\n * @returns {void}\n * @private\n */\n// eslint-disable-next-line\nexport function openSearchFolder(parent, data) {\n    parent.originalPath = getFullPath(parent, data, parent.path);\n    var root = getValue(parent.pathId[0], parent.feParent);\n    var isRoot = getValue('_fm_id', parent.itemData[0]) == 'fe_tree';\n    var key = isNOU(getValue('id', root)) ? 'name' : 'id';\n    var searchData = getObject(parent, key, getValue('name', data));\n    if (isNullOrUndefined(searchData)) {\n        if (!isRoot) {\n            parent.notify(events.clearPathInit, { selectedNode: parent.pathId[parent.pathId.length - 1] });\n        }\n        else {\n            setNextPath(parent, parent.path);\n            return;\n        }\n    }\n    else {\n        var id = getValue('_fm_id', searchData);\n        parent.setProperties({ path: parent.originalPath }, true);\n        parent.pathId.push(id);\n        parent.itemData = [searchData];\n        parent.pathNames.push(getValue('name', searchData));\n    }\n    read(parent, (parent.path !== parent.originalPath) ? events.initialEnd : events.finalizeEnd, parent.path);\n}\n/**\n * Paste handling function\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @returns {void}\n * @private\n */\nexport function pasteHandler(parent) {\n    parent.isDragDrop = false;\n    if (parent.selectedNodes.length !== 0 && parent.enablePaste) {\n        var path = (parent.folderPath === '') ? parent.path : parent.folderPath;\n        // eslint-disable-next-line\n        var subFolder = validateSubFolder(parent, parent.actionRecords, path, parent.path);\n        if (!subFolder) {\n            if ((parent.fileAction === 'move' && parent.targetPath !== path) || parent.fileAction === 'copy') {\n                parent.notify(events.pasteInit, {});\n                paste(parent, parent.targetPath, parent.selectedNodes, path, parent.fileAction, [], parent.actionRecords);\n            }\n            else {\n                parent.enablePaste = false;\n                parent.notify(events.hidePaste, {});\n                removeBlur(parent);\n                var result = {\n                    files: null,\n                    error: {\n                        code: '402',\n                        message: getLocaleText(parent, 'Same-Folder-Error'),\n                        fileExists: null\n                    }\n                };\n                createDialog(parent, 'Error', result);\n            }\n        }\n    }\n}\n/**\n * Validates the sub folders\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {'{ [key: string]: Object; }[]'} data - specifies the data.\n * @param {string} dropPath - specifies the drop path.\n * @param {string} dragPath - specifies the drag path.\n * @returns {boolean} - returns the validated sub folder.\n * @private\n */\n// eslint-disable-next-line\nexport function validateSubFolder(parent, data, dropPath, dragPath) {\n    var subFolder = false;\n    for (var i = 0; i < data.length; i++) {\n        if (!getValue('isFile', data[i])) {\n            var tempTarget = getFullPath(parent, data[i], dragPath);\n            if (dropPath.indexOf(tempTarget) === 0) {\n                var result = {\n                    files: null,\n                    error: {\n                        code: '402',\n                        message: getLocaleText(parent, 'Sub-Folder-Error'),\n                        fileExists: null\n                    }\n                };\n                createDialog(parent, 'Error', result);\n                subFolder = true;\n                break;\n            }\n        }\n        else {\n            var srcData = parent.dragNodes[i];\n            var len = 0;\n            if (srcData) {\n                len = srcData.lastIndexOf('/');\n            }\n            var path = '';\n            if (len > 0) {\n                path = dragPath + srcData.substring(0, len + 1);\n            }\n            if (path === dropPath) {\n                var result = {\n                    files: null,\n                    error: {\n                        code: '402',\n                        message: getLocaleText(parent, 'Same-Folder-Error'),\n                        fileExists: null\n                    }\n                };\n                createDialog(parent, 'Error', result);\n                subFolder = true;\n                break;\n            }\n        }\n    }\n    return subFolder;\n}\n/**\n * Validates the drop handler\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @returns {void}\n * @private\n */\nexport function dropHandler(parent) {\n    parent.isDragDrop = true;\n    if (parent.dragData.length !== 0) {\n        parent.dragPath = parent.dragPath.replace(/\\\\/g, '/');\n        parent.dropPath = parent.dropPath.replace(/\\\\/g, '/');\n        var subFolder = validateSubFolder(parent, parent.dragData, parent.dropPath, parent.dragPath);\n        if (!subFolder && (parent.dragPath !== parent.dropPath)) {\n            parent.itemData = [parent.dropData];\n            paste(parent, parent.dragPath, parent.dragNodes, parent.dropPath, 'move', [], parent.dragData);\n            parent.notify(events.pasteInit, {});\n        }\n    }\n}\n/**\n * Gets the parent path\n *\n * @param {string} oldPath - specifies the old path.\n * @returns {string} - returns the parent path.\n * @private\n */\nexport function getParentPath(oldPath) {\n    var path = oldPath.split('/');\n    var newPath = path[0] + '/';\n    for (var i = 1; i < path.length - 2; i++) {\n        newPath += path[i] + '/';\n    }\n    return newPath;\n}\n/**\n * Gets the directory path\n *\n * @param {IFileManager} parent - specifies the parent.\n * @param {ReadArgs} args - returns the read arguements.\n * @returns {string} - returns the directory path\n * @private\n */\nexport function getDirectoryPath(parent, args) {\n    var filePath = getValue(parent.hasId ? 'id' : 'name', args.cwd) + '/';\n    var fPath = getValue(parent.hasId ? 'filterId' : 'filterPath', args.cwd);\n    if (!isNOU(fPath)) {\n        if (fPath === '') {\n            return parent.hasId ? filePath : '/';\n        }\n        return fPath.replace(/\\\\/g, '/') + filePath;\n    }\n    else {\n        return parent.path + filePath;\n    }\n}\n/**\n * Gets the do paste path\n *\n * @param {IFileManager} parent - specifies the parent.\n * @param {string} operation - specifies the operations.\n * @param {ReadArgs} result - returns the result.\n * @returns {void}\n * @private\n */\nexport function doPasteUpdate(parent, operation, result) {\n    if (operation === 'move') {\n        if (!parent.isDragDrop) {\n            parent.enablePaste = false;\n            parent.notify(events.hidePaste, {});\n            parent.notify(events.cutEnd, result);\n        }\n        else {\n            parent.notify(events.dragEnd, result);\n        }\n    }\n    if (parent.duplicateItems.length === 0) {\n        parent.pasteNodes = [];\n    }\n    var flag = false;\n    for (var count = 0; (count < result.files.length) && !flag; count++) {\n        parent.pasteNodes.push(result.files[count][parent.hasId ? 'id' : 'name']);\n        if (parent.isDragDrop) {\n            parent.droppedObjects.push(result.files[count]);\n        }\n    }\n    parent.duplicateItems = [];\n    parent.duplicateRecords = [];\n    if (parent.isDragDrop && !parent.isPasteError) {\n        parent.isDropEnd = true;\n    }\n    else {\n        parent.isDropEnd = false;\n    }\n    if (!parent.isDragDrop || (parent.path === parent.dragPath) || (parent.path === parent.dropPath)\n        || parent.isSearchDrag) {\n        parent.isPathDrag = false;\n        read(parent, events.pasteEnd, parent.path);\n    }\n    else {\n        readDropPath(parent);\n    }\n    parent.trigger('success', { action: operation, result: result });\n}\n/**\n * Reads the drop path\n *\n * @param {IFileManager} parent - specifies the parent.\n * @returns {void}\n * @private\n */\nexport function readDropPath(parent) {\n    var pathId = getValue('_fm_id', parent.dropData);\n    parent.expandedId = pathId;\n    parent.itemData = [parent.dropData];\n    if (parent.isPathDrag) {\n        parent.notify(events.pathDrag, parent.itemData);\n    }\n    else {\n        if (parent.navigationpaneModule) {\n            var node = select('[data-uid=\"' + pathId + '\"]', parent.navigationpaneModule.treeObj.element);\n            if (!node) {\n                var liElement = document.querySelector('[data-id = \"' + getValue('id', parent.dropData) + '\"]');\n                pathId = liElement.getAttribute(\"data-uid\");\n                node = select('[data-uid=\"' + pathId + '\"]', parent.navigationpaneModule.treeObj.element);\n            }\n            updatePath(node, parent.dropData, parent);\n        }\n        read(parent, events.dropPath, parent.dropPath);\n    }\n}\n/**\n * Gets the duplicated path\n *\n * @param {IFileManager} parent - specifies the parent.\n * @param {string} name - specifies the name.\n * @returns {object} - returns the duplicated path.\n * @private\n */\n// eslint-disable-next-line\nexport function getDuplicateData(parent, name) {\n    // eslint-disable-next-line\n    var data = null;\n    // eslint-disable-next-line\n    var records = parent.isDragDrop ? parent.dragData : parent.actionRecords;\n    for (var i = 0; i < records.length; i++) {\n        if (getValue('name', records[i]) === name) {\n            data = records[i];\n            break;\n        }\n    }\n    return data;\n}\n/**\n * Gets the create the virtual drag element\n *\n * @param {IFileManager} parent - specifies the parent.\n * @returns {void}\n * @private\n */\nexport function createVirtualDragElement(parent) {\n    parent.isSearchDrag = false;\n    if (parent.breadcrumbbarModule.searchObj.element.value !== '') {\n        parent.isSearchDrag = true;\n    }\n    if (parent.activeModule !== 'navigationpane') {\n        parent.dragNodes = [];\n        var i = 0;\n        while (i < parent.selectedItems.length) {\n            parent.dragNodes.push(parent.selectedItems[i]);\n            i++;\n        }\n        if (parent.selectedItems.length === 0 && parent.dragData && parent.dragData.length === 1) {\n            parent.dragNodes.push(getItemName(parent, parent.dragData[0]));\n        }\n    }\n    var cloneIcon = parent.createElement('div', {\n        className: 'e-fe-icon ' + fileType(parent.dragData[0])\n    });\n    var cloneName = parent.createElement('div', {\n        className: 'e-fe-name',\n        innerHTML: parent.dragData[0].name\n    });\n    var virtualEle = parent.createElement('div', {\n        className: 'e-fe-content'\n    });\n    virtualEle.appendChild(cloneIcon);\n    virtualEle.appendChild(cloneName);\n    var ele = parent.createElement('div', {\n        className: CLS.CLONE\n    });\n    ele.appendChild(virtualEle);\n    if (parent.dragNodes.length > 1) {\n        var badge = parent.createElement('span', {\n            className: 'e-fe-count',\n            innerHTML: (parent.dragNodes.length).toString(10)\n        });\n        ele.appendChild(badge);\n    }\n    parent.virtualDragElement = ele;\n    parent.element.appendChild(parent.virtualDragElement);\n}\n/**\n * Drops the stop handler\n *\n * @param {IFileManager} parent - specifies the parent.\n * @param {DragEventArgs} args - specifies the drag event arguements.\n * @returns {void}\n * @private\n */\nexport function dragStopHandler(parent, args) {\n    var dragArgs = args;\n    dragArgs.cancel = false;\n    if (parent.treeExpandTimer != null) {\n        window.clearTimeout(parent.treeExpandTimer);\n        parent.treeExpandTimer = null;\n    }\n    removeDropTarget(parent);\n    parent.element.classList.remove('e-fe-drop', 'e-no-drop');\n    removeBlur(parent);\n    parent.uploadObj.dropArea = select('#' + parent.element.id + CLS.CONTENT_ID, parent.element);\n    var virtualEle = select('.' + CLS.CLONE, parent.element);\n    if (virtualEle) {\n        detach(virtualEle);\n    }\n    getTargetModule(parent, args.target);\n    parent.notify(events.dropInit, args);\n    removeBlur(parent, 'hover');\n    dragArgs.fileDetails = parent.dragData;\n    parent.trigger('fileDragStop', dragArgs, function (dragArgs) {\n        if (!dragArgs.cancel && !isNOU(parent.targetModule) && parent.targetModule !== '' && parent.dragCount > 2) {\n            dropHandler(parent);\n        }\n        parent.dragCount = 0;\n    });\n}\n/**\n * Drag the start handler\n *\n * @param {IFileManager} parent - specifies the parent.\n * @param {'DragEventArgs'} args - specifies the drag event arguements.\n * @param {Draggable} dragObj - specifies the drag event arguements.\n * @returns {void}\n * @private\n */\nexport function dragStartHandler(parent, args, dragObj) {\n    var dragArgs = args;\n    dragArgs.cancel = false;\n    dragArgs.fileDetails = parent.dragData;\n    parent.dragCount = 0;\n    parent.droppedObjects = [];\n    if (!parent.allowDragAndDrop || ((parent.activeModule === 'navigationpane') &&\n        (closest(args.element, 'li').getAttribute('data-uid') === parent.pathId[0]))) {\n        dragArgs.cancel = true;\n    }\n    if ((parent.activeModule === 'navigationpane') &&\n        (parent.pathId.indexOf(closest(args.element, 'li').getAttribute('data-uid')) !== -1)) {\n        parent.isPathDrag = true;\n    }\n    else {\n        parent.isPathDrag = false;\n    }\n    removeBlur(parent);\n    if (dragArgs.cancel) {\n        dragObj.intDestroy(args.event);\n        dragCancel(parent);\n    }\n    else if (!dragArgs.cancel) {\n        var i = 0;\n        while (i < parent.activeElements.length) {\n            addBlur(parent.activeElements[i]);\n            i++;\n        }\n        parent.trigger('fileDragStart', dragArgs, function (dragArgs) {\n            if (dragArgs.cancel) {\n                dragObj.intDestroy(args.event);\n                dragCancel(parent);\n            }\n            else {\n                parent.uploadObj.dropArea = null;\n            }\n        });\n    }\n}\n/**\n * Drag the cancel handler\n *\n * @param {IFileManager} parent - specifies the parent.\n * @returns {void}\n * @private\n */\nexport function dragCancel(parent) {\n    removeBlur(parent);\n    var virtualEle = select('.' + CLS.CLONE, parent.element);\n    if (virtualEle) {\n        detach(virtualEle);\n    }\n}\n/**\n * Remove drop target handler\n *\n * @param {IFileManager} parent - specifies the parent.\n * @returns {void}\n * @private\n */\nexport function removeDropTarget(parent) {\n    removeItemClass(parent, CLS.DROP_FOLDER);\n    removeItemClass(parent, CLS.DROP_FILE);\n}\n/**\n * Remove item class handler\n *\n * @param {IFileManager} parent - specifies the parent.\n * @param {string} value - specifies the value.\n * @returns {void}\n * @private\n */\nexport function removeItemClass(parent, value) {\n    var ele = parent.element.querySelectorAll('.' + value);\n    for (var i = 0; i < ele.length; i++) {\n        ele[i].classList.remove(value);\n    }\n}\n/**\n * Remove item class handler\n *\n * @param {Element} scrollParent - specifies the scrolling target.\n * @param {IFileManager} parent - specifies the parent.\n * @param {string} nodeClass - specifies the node class.\n * @param {number} screenY - specifies the vertical (Y) coordinate of the mouse cursor position relative to the entire screen.\n * @param {number} clientY - specifies the vertical (Y) coordinate of the mouse cursor position relative to the target element.\n * @returns {void}\n * @private\n */\nexport function scrollHandler(scrollParent, parent, nodeClass, screenY, clientY) {\n    var position;\n    var elementData = scrollParent.getBoundingClientRect();\n    var node = select(\".\" + nodeClass, scrollParent);\n    if ((screenY >= (elementData.top + scrollParent.clientHeight - 30)) && !isNullOrUndefined(node)) {\n        position = (parent.targetModule === 'navigationpane' || parent.targetModule === 'detailsview') ? node.offsetHeight / 2.5 : node.offsetHeight / 4.5;\n        scrollParent.scrollBy(0, position);\n    }\n    if (!isNullOrUndefined(node) && (clientY <= (elementData.top + 30))) {\n        position = (parent.targetModule === 'navigationpane' || parent.targetModule === 'detailsview') ? node.offsetHeight / 2.5 : node.offsetHeight / 4.5;\n        scrollParent.scrollBy(0, -position);\n    }\n}\n/**\n * Dragging handler\n *\n * @param {IFileManager} parent - specifies the parent.\n * @param {DragEventArgs} args - specifies the arguements.\n * @returns {void}\n * @private\n */\nexport function draggingHandler(parent, args) {\n    var dragArgs = args;\n    dragArgs.fileDetails = parent.dragData;\n    var canDrop = false;\n    getTargetModule(parent, args.target);\n    removeDropTarget(parent);\n    if (parent.treeExpandTimer != null) {\n        window.clearTimeout(parent.treeExpandTimer);\n        parent.treeExpandTimer = null;\n    }\n    removeBlur(parent, 'hover');\n    var node = null;\n    var scrollParent;\n    if (parent.targetModule === 'navigationpane') {\n        node = closest(args.target, 'li');\n        node.classList.add(CLS.HOVER, CLS.DROP_FOLDER);\n        canDrop = true;\n        /* istanbul ignore next */\n        parent.treeExpandTimer = window.setTimeout(function () { parent.notify(events.dragging, args); }, 800);\n        scrollParent = parent.navigationpaneModule.treeObj.element.parentElement;\n        scrollHandler(scrollParent, parent, 'e-level-2', args.event.screenY, args.event.y);\n    }\n    else if (parent.targetModule === 'detailsview') {\n        node = closest(args.target, 'tr');\n        if (node && node.querySelector('.' + CLS.FOLDER) && !node.classList.contains(CLS.BLUR)) {\n            node.classList.add(CLS.DROP_FOLDER);\n        }\n        else if (node && !node.querySelector('.' + CLS.FOLDER) && !node.classList.contains(CLS.BLUR)) {\n            node.classList.add(CLS.DROP_FILE);\n        }\n        canDrop = true;\n        scrollParent = parent.detailsviewModule.gridObj.element.querySelector('.e-content');\n        scrollHandler(scrollParent, parent, 'e-row', args.event.screenY, args.event.y);\n    }\n    else if (parent.targetModule === 'largeiconsview') {\n        node = closest(args.target, 'li');\n        if (node && node.querySelector('.' + CLS.FOLDER) && !node.classList.contains(CLS.BLUR)) {\n            node.classList.add(CLS.HOVER, CLS.DROP_FOLDER);\n        }\n        canDrop = true;\n        scrollParent = parent.largeiconsviewModule.element.firstElementChild;\n        scrollHandler(scrollParent, parent, 'e-large-icon', args.event.screenY, args.event.y);\n        /* istanbul ignore next */\n    }\n    else if (parent.targetModule === 'breadcrumbbar') {\n        canDrop = true;\n    }\n    parent.element.classList.remove('e-fe-drop', 'e-no-drop');\n    parent.element.classList.add(canDrop ? 'e-fe-drop' : 'e-no-drop');\n    parent.dragCount = parent.dragCount + 1;\n    parent.trigger('fileDragging', dragArgs);\n}\n/**\n * Object to string handler\n *\n * @param {Object} data - specifies the data.\n * @returns {string} returns string converted from Object.\n * @private\n */\n// Ignored the message key value in permission object\n// eslint-disable-next-line\nexport function objectToString(data) {\n    var str = '';\n    var keys = Object.keys(data);\n    for (var i = 0; i < keys.length; i++) {\n        if (keys[i] !== 'message') {\n            str += (i === 0 ? '' : ', ') + keys[i] + ': ' + getValue(keys[i], data);\n        }\n    }\n    return str;\n}\n/**\n * Get item name handler\n *\n * @param {IFileManager} parent - specifies the parent.\n * @param {Object} data - specifies the data.\n * @returns {string} returns the item name.\n * @private\n */\n// eslint-disable-next-line\nexport function getItemName(parent, data) {\n    if (parent.hasId) {\n        return getValue('id', data);\n    }\n    return getName(parent, data);\n}\n/**\n * Get item name handler\n *\n * @param {IFileManager} parent - specifies the parent.\n * @param {Object} data - specifies the data.\n * @returns {void}\n * @private\n */\n// eslint-disable-next-line\nexport function updateRenamingData(parent, data) {\n    parent.itemData = [data];\n    parent.currentItemText = getValue('name', data);\n    parent.isFile = getValue('isFile', data);\n    parent.filterPath = getValue('filterPath', data);\n}\n/**\n * Get item name handler\n *\n * @param {IFileManager} parent - specifies the parent.\n * @returns {void}\n * @private\n */\nexport function doRename(parent) {\n    if (!hasEditAccess(parent.itemData[0])) {\n        createDeniedDialog(parent, parent.itemData[0], events.permissionEdit);\n    }\n    else {\n        createDialog(parent, 'Rename');\n    }\n}\n/* istanbul ignore next */\n/**\n * Download handler\n *\n * @param {IFileManager} parent - specifies the parent.\n * @returns {void}\n * @private\n */\nexport function doDownload(parent) {\n    // eslint-disable-next-line\n    var items = parent.itemData;\n    for (var i = 0; i < items.length; i++) {\n        if (!hasDownloadAccess(items[i])) {\n            createDeniedDialog(parent, items[i], events.permissionDownload);\n            return;\n        }\n    }\n    if (parent.selectedItems.length > 0) {\n        Download(parent, parent.path, parent.selectedItems);\n    }\n}\n/**\n * Delete Files handler\n *\n * @param {IFileManager} parent - specifies the parent.\n * @param {Object[]} data - specifies the data.\n * @param {string[]} newIds - specifies the new Ids.\n * @returns {void}\n * @private\n */\n// eslint-disable-next-line\nexport function doDeleteFiles(parent, data, newIds) {\n    for (var i = 0; i < data.length; i++) {\n        if (!hasEditAccess(data[i])) {\n            createDeniedDialog(parent, data[i], events.permissionEdit);\n            return;\n        }\n    }\n    parent.itemData = data;\n    Delete(parent, newIds, parent.path, 'delete');\n}\n/* istanbul ignore next */\n/**\n * Download files handler\n *\n * @param {IFileManager} parent - specifies the parent.\n * @param {Object[]} data - specifies the data.\n * @param {string[]} newIds - specifies the new Ids.\n * @returns {void}\n * @private\n */\n// eslint-disable-next-line\nexport function doDownloadFiles(parent, data, newIds) {\n    for (var i = 0; i < data.length; i++) {\n        if (!hasDownloadAccess(data[i])) {\n            createDeniedDialog(parent, data[i], events.permissionDownload);\n            return;\n        }\n    }\n    parent.itemData = data;\n    if (newIds.length > 0) {\n        Download(parent, parent.path, newIds);\n    }\n}\n/**\n * Download files handler\n *\n * @param {IFileManager} parent - specifies the parent.\n * @param {Object} data - specifies the data.\n * @param {string} action - specifies the actions.\n * @returns {void}\n * @private\n */\n// eslint-disable-next-line\nexport function createDeniedDialog(parent, data, action) {\n    var message = getValue('message', getValue('permission', data));\n    if (message === '') {\n        message = getLocaleText(parent, 'Access-Message').replace('{0}', getValue('name', data)).replace('{1}', action);\n    }\n    var response = {\n        error: {\n            code: '401',\n            fileExists: null,\n            message: message\n        }\n    };\n    createDialog(parent, 'Error', response);\n}\n/**\n * Get Access Classes\n *\n * @param {Object} data - specifies the data.\n * @returns {string} - returns accesses classes.\n * @private\n */\n// eslint-disable-next-line\nexport function getAccessClass(data) {\n    return !hasReadAccess(data) ? 'e-fe-locked e-fe-hidden' : 'e-fe-locked';\n}\n/**\n * Check read access handler\n *\n * @param {Object} data - specifies the data.\n * @returns {boolean} - returns read access.\n * @private\n */\n// eslint-disable-next-line\nexport function hasReadAccess(data) {\n    // eslint-disable-next-line\n    var permission = getValue('permission', data);\n    return (permission && !getValue('read', permission)) ? false : true;\n}\n/**\n * Check edit access handler\n *\n * @param {Object} data - specifies the data.\n * @returns {boolean} - returns edit access.\n * @private\n */\n// eslint-disable-next-line\nexport function hasEditAccess(data) {\n    // eslint-disable-next-line\n    var permission = getValue('permission', data);\n    return permission ? ((getValue('read', permission) && getValue('write', permission))) : true;\n}\n/**\n * Check content access handler\n *\n * @param {Object} data - specifies the data.\n * @returns {boolean} - returns content access.\n * @private\n */\n// eslint-disable-next-line\nexport function hasContentAccess(data) {\n    // eslint-disable-next-line\n    var permission = getValue('permission', data);\n    return permission ? ((getValue('read', permission) && getValue('writeContents', permission))) : true;\n}\n/**\n * Check upload access handler\n *\n * @param {Object} data - specifies the data.\n * @returns {boolean} - returns upload access.\n * @private\n */\n// eslint-disable-next-line\nexport function hasUploadAccess(data) {\n    // eslint-disable-next-line\n    var permission = getValue('permission', data);\n    return permission ? ((getValue('read', permission) && getValue('upload', permission))) : true;\n}\n/**\n * Check download access handler\n *\n * @param {Object} data - specifies the data.\n * @returns {boolean} - returns download access.\n * @private\n */\n// eslint-disable-next-line\nexport function hasDownloadAccess(data) {\n    // eslint-disable-next-line\n    var permission = getValue('permission', data);\n    return permission ? ((getValue('read', permission) && getValue('download', permission))) : true;\n}\n/**\n * Create new folder handler\n *\n * @param {IFileManager} parent - specifies the parent.\n * @returns {void}\n * @private\n */\nexport function createNewFolder(parent) {\n    // eslint-disable-next-line\n    var details = parent.itemData[0];\n    if (!hasContentAccess(details)) {\n        createDeniedDialog(parent, details, events.permissionEditContents);\n    }\n    else {\n        createDialog(parent, 'NewFolder');\n    }\n}\n/**\n * Upload item handler\n *\n * @param {IFileManager} parent - specifies the parent.\n * @returns {void}\n * @private\n */\nexport function uploadItem(parent) {\n    // eslint-disable-next-line\n    var details = parent.itemData[0];\n    if (!hasUploadAccess(details)) {\n        createDeniedDialog(parent, details, events.permissionUpload);\n    }\n    else {\n        var eleId = '#' + parent.element.id + CLS.UPLOAD_ID;\n        var uploadEle = document.querySelector(eleId);\n        uploadEle.click();\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}