{"ast":null,"code":"import * as EVENTS from './../../common/constant';\nimport { InsertHtml } from './inserthtml';\nvar EmojiPickerAction = /** @class */function () {\n  function EmojiPickerAction(parent) {\n    this.parent = parent;\n    this.addEventListener();\n  }\n  EmojiPickerAction.prototype.addEventListener = function () {\n    this.parent.observer.on(EVENTS.EMOJI_PICKER_ACTIONS, this.emojiInsert, this);\n  };\n  EmojiPickerAction.prototype.emojiInsert = function (args) {\n    var node = document.createTextNode(args.value);\n    var selection = this.parent.currentDocument.getSelection();\n    var range = selection.getRangeAt(0);\n    var cursorPos = range.startOffset;\n    for (var i = cursorPos - 1; i >= cursorPos - 15; i--) {\n      var prevChar_1 = selection.focusNode.textContent.substring(i - 1, i);\n      var isPrevSpace_1 = /:$/.test(prevChar_1);\n      if (isPrevSpace_1) {\n        this.beforeApplyFormat(true);\n        break;\n      }\n    }\n    var colon = /:$/.test(selection.focusNode.textContent.charAt(cursorPos - 1));\n    var prevChar = selection.focusNode.textContent.charAt(cursorPos - 2);\n    var isPrevSpace = /\\s/.test(prevChar);\n    if (colon && (isPrevSpace || selection.focusOffset === 1)) {\n      this.beforeApplyFormat(true);\n    }\n    InsertHtml.Insert(this.parent.currentDocument, node, this.parent.editableElement);\n    if (args.callBack) {\n      args.callBack({\n        requestType: args.subCommand,\n        editorMode: 'HTML',\n        event: args.event,\n        range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n        elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n      });\n    }\n  };\n  EmojiPickerAction.prototype.beforeApplyFormat = function (isBlockFormat) {\n    var range1 = this.parent.nodeSelection.getRange(this.parent.currentDocument);\n    var node = this.parent.nodeSelection.getNodeCollection(range1)[0];\n    var blockNewLine = !(node.parentElement.innerHTML.replace(/&nbsp;|<br>/g, '').trim() === ':' || node.textContent.trim().indexOf('/') === 0);\n    var startNode = node;\n    if (blockNewLine && isBlockFormat) {\n      while (startNode !== this.parent.editableElement) {\n        startNode = startNode.parentElement;\n      }\n    }\n    var startPoint = range1.startOffset;\n    while (this.parent.nodeSelection.getRange(document).toString().indexOf(':') === -1) {\n      this.parent.nodeSelection.setSelectionText(document, node, node, startPoint, range1.endOffset);\n      startPoint--;\n    }\n    var range2 = this.parent.nodeSelection.getRange(this.parent.currentDocument);\n    var node2 = this.parent.nodeCutter.GetSpliceNode(range2, node);\n    node2.parentNode.removeChild(node2);\n  };\n  return EmojiPickerAction;\n}();\nexport { EmojiPickerAction };","map":{"version":3,"names":["EVENTS","InsertHtml","EmojiPickerAction","parent","addEventListener","prototype","observer","on","EMOJI_PICKER_ACTIONS","emojiInsert","args","node","document","createTextNode","value","selection","currentDocument","getSelection","range","getRangeAt","cursorPos","startOffset","i","prevChar_1","focusNode","textContent","substring","isPrevSpace_1","test","beforeApplyFormat","colon","charAt","prevChar","isPrevSpace","focusOffset","Insert","editableElement","callBack","requestType","subCommand","editorMode","event","nodeSelection","getRange","elements","getSelectedNodes","isBlockFormat","range1","getNodeCollection","blockNewLine","parentElement","innerHTML","replace","trim","indexOf","startNode","startPoint","toString","setSelectionText","endOffset","range2","node2","nodeCutter","GetSpliceNode","parentNode","removeChild"],"sources":["/Users/saleem/Desktop/KClient/Web App/Ver_3.6/User Interface/website_Source files/node_modules/@syncfusion/ej2-richtexteditor/src/editor-manager/plugin/emoji-picker-action.js"],"sourcesContent":["import * as EVENTS from './../../common/constant';\nimport { InsertHtml } from './inserthtml';\nvar EmojiPickerAction = /** @class */ (function () {\n    function EmojiPickerAction(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    EmojiPickerAction.prototype.addEventListener = function () {\n        this.parent.observer.on(EVENTS.EMOJI_PICKER_ACTIONS, this.emojiInsert, this);\n    };\n    EmojiPickerAction.prototype.emojiInsert = function (args) {\n        var node = document.createTextNode(args.value);\n        var selection = this.parent.currentDocument.getSelection();\n        var range = selection.getRangeAt(0);\n        var cursorPos = range.startOffset;\n        for (var i = cursorPos - 1; i >= cursorPos - 15; i--) {\n            var prevChar_1 = selection.focusNode.textContent.substring(i - 1, i);\n            var isPrevSpace_1 = /:$/.test(prevChar_1);\n            if (isPrevSpace_1) {\n                this.beforeApplyFormat(true);\n                break;\n            }\n        }\n        var colon = /:$/.test(selection.focusNode.textContent.charAt(cursorPos - 1));\n        var prevChar = selection.focusNode.textContent.charAt(cursorPos - 2);\n        var isPrevSpace = /\\s/.test(prevChar);\n        if (colon && (isPrevSpace || selection.focusOffset === 1)) {\n            this.beforeApplyFormat(true);\n        }\n        InsertHtml.Insert(this.parent.currentDocument, node, this.parent.editableElement);\n        if (args.callBack) {\n            args.callBack({\n                requestType: args.subCommand,\n                editorMode: 'HTML',\n                event: args.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    EmojiPickerAction.prototype.beforeApplyFormat = function (isBlockFormat) {\n        var range1 = this.parent.nodeSelection.getRange(this.parent.currentDocument);\n        var node = this.parent.nodeSelection.getNodeCollection(range1)[0];\n        var blockNewLine = !(node.parentElement.innerHTML.replace(/&nbsp;|<br>/g, '').trim() === ':' || node.textContent.trim().indexOf('/') === 0);\n        var startNode = node;\n        if (blockNewLine && isBlockFormat) {\n            while (startNode !== this.parent.editableElement) {\n                startNode = startNode.parentElement;\n            }\n        }\n        var startPoint = range1.startOffset;\n        while (this.parent.nodeSelection.getRange(document).toString().indexOf(':') === -1) {\n            this.parent.nodeSelection.setSelectionText(document, node, node, startPoint, range1.endOffset);\n            startPoint--;\n        }\n        var range2 = this.parent.nodeSelection.getRange(this.parent.currentDocument);\n        var node2 = this.parent.nodeCutter.GetSpliceNode(range2, node);\n        node2.parentNode.removeChild(node2);\n    };\n    return EmojiPickerAction;\n}());\nexport { EmojiPickerAction };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}