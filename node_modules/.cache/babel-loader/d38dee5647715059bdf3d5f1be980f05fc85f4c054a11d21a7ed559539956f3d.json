{"ast":null,"code":"import { Browser, EventHandler } from '@syncfusion/ej2-base';\nimport { addClass, removeClass } from '@syncfusion/ej2-base';\nimport { formatUnit, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { getScrollBarWidth, getUpdateUsingRaf } from '../base/util';\nimport { scroll, contentReady, uiUpdate, onEmpty, headerRefreshed, textWrapRefresh, virtualScrollEdit, infiniteScrollHandler, closeFilterDialog } from '../base/constant';\nimport { lazyLoadScrollHandler, checkScrollReset } from '../base/constant';\nimport { ColumnWidthService } from '../services/width-controller';\nimport * as literals from '../base/string-literals';\nimport * as events from '../base/constant';\n/**\n * The `Scroll` module is used to handle scrolling behaviour.\n */\nvar Scroll = /** @class */function () {\n  /**\n   * Constructor for the Grid scrolling.\n   *\n   * @param {IGrid} parent - specifies the IGrid\n   * @hidden\n   */\n  function Scroll(parent) {\n    //To maintain scroll state on grid actions.\n    this.previousValues = {\n      top: 0,\n      left: 0\n    };\n    this.oneTimeReady = true;\n    this.parent = parent;\n    this.widthService = new ColumnWidthService(parent);\n    this.addEventListener();\n  }\n  /**\n   * For internal use only - Get the module name.\n   *\n   * @returns {string} returns the module name\n   * @private\n   */\n  Scroll.prototype.getModuleName = function () {\n    return 'scroll';\n  };\n  /**\n   * @param {boolean} uiupdate - specifies the uiupdate\n   * @returns {void}\n   * @hidden\n   */\n  Scroll.prototype.setWidth = function (uiupdate) {\n    this.parent.element.style.width = formatUnit(this.parent.width);\n    if (uiupdate) {\n      this.widthService.setWidthToColumns();\n    }\n    if (this.parent.toolbarModule && this.parent.toolbarModule.toolbar && this.parent.toolbarModule.toolbar.element) {\n      var tlbrElement = this.parent.toolbarModule.toolbar.element;\n      var tlbrLeftElement = tlbrElement.querySelector('.e-toolbar-left');\n      var tlbrCenterElement = tlbrElement.querySelector('.e-toolbar-center');\n      var tlbrRightElement = tlbrElement.querySelector('.e-toolbar-right');\n      var tlbrItems = tlbrElement.querySelector('.e-toolbar-items');\n      var tlbrLeftWidth = tlbrLeftElement ? tlbrLeftElement.clientWidth : 0;\n      var tlbrCenterWidth = tlbrCenterElement ? tlbrCenterElement.clientWidth : 0;\n      var tlbrRightWidth = tlbrRightElement ? tlbrRightElement.clientWidth : 0;\n      var tlbrItemsWidth = tlbrItems ? tlbrItems.clientWidth : 0;\n      var tlbrWidth = tlbrElement ? tlbrElement.clientWidth : 0;\n      if (!this.parent.enableAdaptiveUI || tlbrLeftWidth > tlbrWidth || tlbrCenterWidth > tlbrWidth || tlbrRightWidth > tlbrWidth || tlbrItemsWidth > tlbrWidth) {\n        this.parent.toolbarModule.toolbar.refreshOverflow();\n      }\n    }\n  };\n  /**\n   * @returns {void}\n   * @hidden\n   */\n  Scroll.prototype.setHeight = function () {\n    var mHdrHeight = 0;\n    var content = this.parent.getContent().querySelector('.' + literals.content);\n    var height = this.parent.height;\n    if (this.parent.enableColumnVirtualization && this.parent.isFrozenGrid() && this.parent.height !== 'auto' && this.parent.height.toString().indexOf('%') < 0) {\n      height = parseInt(height, 10) - Scroll.getScrollBarWidth();\n    }\n    if (!this.parent.enableVirtualization && this.parent.frozenRows && this.parent.height !== 'auto') {\n      var tbody = this.parent.getHeaderContent().querySelector(literals.tbody + ':not(.e-masked-tbody)');\n      mHdrHeight = tbody ? tbody.offsetHeight : 0;\n      if (tbody && mHdrHeight) {\n        var add = tbody.getElementsByClassName(literals.addedRow).length;\n        var height_1 = add * this.parent.getRowHeight();\n        mHdrHeight -= height_1;\n      } else if (!this.parent.isInitialLoad && this.parent.loadingIndicator.indicatorType === 'Shimmer' && this.parent.getHeaderContent().querySelector('.e-masked-table')) {\n        height = parseInt(height, 10) - this.parent.frozenRows * this.parent.getRowHeight();\n      }\n      content.style.height = formatUnit(height - mHdrHeight);\n    } else {\n      content.style.height = formatUnit(height);\n    }\n    this.ensureOverflow(content);\n    if (this.parent.isFrozenGrid()) {\n      this.refresh();\n    }\n  };\n  /**\n   * @returns {void}\n   * @hidden\n   */\n  Scroll.prototype.setPadding = function () {\n    var content = this.parent.getHeaderContent();\n    var scrollWidth = Scroll.getScrollBarWidth() - this.getThreshold();\n    var cssProps = this.getCssProperties();\n    content.querySelector('.' + literals.headerContent).style[cssProps.border] = scrollWidth > 0 ? '1px' : '0px';\n    content.style[cssProps.padding] = scrollWidth > 0 ? scrollWidth + 'px' : '0px';\n  };\n  /**\n   * @param {boolean} rtl - specifies the rtl\n   * @returns {void}\n   * @hidden\n   */\n  Scroll.prototype.removePadding = function (rtl) {\n    var cssProps = this.getCssProperties(rtl);\n    var hDiv = this.parent.getHeaderContent().querySelector('.' + literals.headerContent);\n    hDiv.style[cssProps.border] = '';\n    hDiv.parentElement.style[cssProps.padding] = '';\n    var footerDiv = this.parent.getFooterContent();\n    if (footerDiv && footerDiv.classList.contains('e-footerpadding')) {\n      footerDiv.classList.remove('e-footerpadding');\n    }\n  };\n  /**\n   * Refresh makes the Grid adoptable with the height of parent container.\n   *\n   * > The [`height`](./#height) must be set to 100%.\n   *\n   * @returns {void}\n   */\n  Scroll.prototype.refresh = function () {\n    if (this.parent.height !== '100%') {\n      return;\n    }\n    var content = this.parent.getContent();\n    this.parent.element.style.height = '100%';\n    var height = this.widthService.getSiblingsHeight(content);\n    content.style.height = 'calc(100% - ' + height + 'px)'; //Set the height to the  '.' + literals.gridContent;\n  };\n  Scroll.prototype.getThreshold = function () {\n    /* Some browsers places the scroller outside the content,\n     * hence the padding should be adjusted.*/\n    var appName = Browser.info.name;\n    if (appName === 'mozilla') {\n      return 0.5;\n    }\n    return 1;\n  };\n  /**\n   * @returns {void}\n   * @hidden\n   */\n  Scroll.prototype.addEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.parent.on(onEmpty, this.wireEvents, this);\n    this.parent.on(contentReady, this.wireEvents, this);\n    this.parent.on(uiUpdate, this.onPropertyChanged, this);\n    this.parent.on(textWrapRefresh, this.wireEvents, this);\n    this.parent.on(headerRefreshed, this.setScrollLeft, this);\n  };\n  /**\n   * @returns {void}\n   * @hidden\n   */\n  Scroll.prototype.removeEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.parent.off(onEmpty, this.wireEvents);\n    this.parent.off(contentReady, this.wireEvents);\n    this.parent.off(uiUpdate, this.onPropertyChanged);\n    this.parent.off(textWrapRefresh, this.wireEvents);\n    this.parent.off(headerRefreshed, this.setScrollLeft);\n    this.unwireEvents();\n  };\n  Scroll.prototype.unwireEvents = function () {\n    if (this.parent.frozenRows && this.header) {\n      EventHandler.remove(this.header, 'touchstart pointerdown', this.setPageXY);\n      EventHandler.remove(this.header, 'touchmove pointermove', this.onTouchScroll);\n    }\n    var mScrollBar = this.parent.getContent() ? this.parent.getContent().querySelector('.e-movablescrollbar') : null;\n    if (this.parent.isFrozenGrid() && this.parent.enableColumnVirtualization) {\n      if (mScrollBar) {\n        EventHandler.remove(mScrollBar, 'scroll', this.onCustomScrollbarScroll);\n      }\n      if (this.content) {\n        EventHandler.remove(this.content, 'scroll', this.onCustomScrollbarScroll);\n        EventHandler.remove(this.content, 'touchstart pointerdown', this.setPageXY);\n        if (!(/macintosh|ipad/.test(Browser.userAgent.toLowerCase()) && Browser.isDevice)) {\n          EventHandler.remove(this.content, 'touchmove pointermove', this.onTouchScroll);\n        }\n      }\n      if (this.header) {\n        EventHandler.remove(this.header, 'scroll', this.onCustomScrollbarScroll);\n        EventHandler.remove(this.header, 'touchstart pointerdown', this.setPageXY);\n        EventHandler.remove(this.header, 'touchmove pointermove', this.onTouchScroll);\n      }\n    }\n    if (this.content) {\n      EventHandler.remove(this.content, 'scroll', this.contentScrollHandler);\n    }\n    if (this.header) {\n      EventHandler.remove(this.header, 'scroll', this.headerScrollHandler);\n    }\n    this.contentScrollHandler = null;\n    this.headerScrollHandler = null;\n    if (this.parent.aggregates.length && this.parent.getFooterContent()) {\n      EventHandler.remove(this.parent.getFooterContent().firstChild, 'scroll', this.onContentScroll);\n    }\n  };\n  Scroll.prototype.setScrollLeft = function () {\n    this.parent.getHeaderContent().querySelector('.' + literals.headerContent).scrollLeft = this.previousValues.left;\n  };\n  Scroll.prototype.onContentScroll = function (scrollTarget) {\n    var _this = this;\n    var element = scrollTarget;\n    var isHeader = element.classList.contains(literals.headerContent);\n    return function (e) {\n      if (_this.content.querySelector(literals.tbody) === null || _this.parent.isPreventScrollEvent) {\n        return;\n      }\n      var target = e.target;\n      if (_this.parent.frozenRows) {\n        if (_this.content.scrollTop > 0 && _this.parent.frozenRows) {\n          addClass([_this.parent.element], 'e-top-shadow');\n        } else {\n          removeClass([_this.parent.element], 'e-top-shadow');\n        }\n      }\n      if (_this.parent.element.querySelectorAll('.e-leftfreeze,.e-fixedfreeze,.e-rightfreeze').length) {\n        var errorFreeze = _this.parent.getContent().querySelectorAll('.e-freezeerror:not([style*=\"display: none\"])');\n        var errorFixed = _this.parent.getContent().querySelectorAll('.e-fixederror:not([style*=\"display: none\"])');\n        if (target.scrollLeft !== 0 && _this.parent.getVisibleFrozenLeftCount()) {\n          addClass([_this.parent.element], 'e-left-shadow');\n        } else {\n          removeClass([_this.parent.element], 'e-left-shadow');\n        }\n        var widthVal = Math.round((_this.parent.enableRtl ? target.scrollWidth + target.scrollLeft : target.scrollWidth - target.scrollLeft) + (_this.parent.height === 'auto' ? 0 : 1));\n        if (widthVal === target.offsetWidth && _this.parent.getVisibleFrozenRightCount()) {\n          removeClass([_this.parent.element], 'e-right-shadow');\n        } else {\n          addClass([_this.parent.element], 'e-right-shadow');\n        }\n        var rows = [].slice.call(_this.parent.getContent().querySelectorAll('.e-row:not(.e-hiddenrow)'));\n        if ((rows.length === 1 && errorFreeze.length || _this.parent.element.querySelector('.e-freeze-autofill:not([style*=\"display: none\"])') || errorFixed.length) && target.scrollLeft !== _this.previousValues.left) {\n          target.scrollLeft = _this.previousValues.left;\n          return;\n        }\n        if (rows.length !== 1 && (errorFreeze.length || errorFixed.length) && target.scrollTop !== _this.previousValues.top) {\n          target.scrollTop = _this.previousValues.top;\n          return;\n        }\n      }\n      var left = target.scrollLeft;\n      if (!isNullOrUndefined(_this.parent.infiniteScrollModule) && _this.parent.enableInfiniteScrolling && !_this.parent.isEdit) {\n        _this.parent.notify(infiniteScrollHandler, {\n          target: e.target,\n          isLeft: _this.previousValues.left !== left\n        });\n      }\n      if (_this.parent.groupSettings.columns.length && _this.parent.groupSettings.enableLazyLoading) {\n        var isDown = _this.previousValues.top < _this.parent.getContent().firstElementChild.scrollTop;\n        _this.parent.notify(lazyLoadScrollHandler, {\n          scrollDown: isDown\n        });\n      }\n      _this.parent.notify(virtualScrollEdit, {});\n      var isFooter = target.classList.contains('e-summarycontent');\n      if (_this.previousValues.left === left) {\n        _this.previousValues.top = !isHeader ? _this.previousValues.top : target.scrollTop;\n        return;\n      }\n      _this.parent.notify(closeFilterDialog, e);\n      element.scrollLeft = left;\n      if (isFooter) {\n        _this.header.scrollLeft = left;\n      }\n      _this.previousValues.left = left;\n      _this.parent.notify(scroll, {\n        left: left\n      });\n    };\n  };\n  Scroll.prototype.onCustomScrollbarScroll = function (cont, hdr) {\n    var _this = this;\n    var content = cont;\n    var header = hdr;\n    return function (e) {\n      if (_this.content.querySelector(literals.tbody) === null) {\n        return;\n      }\n      var target = e.target;\n      var left = target.scrollLeft;\n      if (_this.previousValues.left === left) {\n        return;\n      }\n      content.scrollLeft = left;\n      header.scrollLeft = left;\n      _this.previousValues.left = left;\n      _this.parent.notify(scroll, {\n        left: left\n      });\n      if (_this.parent.isDestroyed) {\n        return;\n      }\n    };\n  };\n  Scroll.prototype.onTouchScroll = function (scrollTarget) {\n    var _this = this;\n    var element = scrollTarget;\n    return function (e) {\n      if (e.pointerType === 'mouse') {\n        return;\n      }\n      var isFrozen = _this.parent.isFrozenGrid();\n      var pageXY = _this.getPointXY(e);\n      var left = element.scrollLeft + (_this.pageXY.x - pageXY.x);\n      var mHdr = _this.parent.getHeaderContent().querySelector('.' + literals.headerContent);\n      var mCont = _this.parent.getContent().querySelector('.' + literals.content);\n      if (_this.previousValues.left === left || left < 0 || mHdr.scrollWidth - mHdr.clientWidth < left) {\n        return;\n      }\n      e.preventDefault();\n      mHdr.scrollLeft = left;\n      mCont.scrollLeft = left;\n      if (isFrozen && _this.parent.enableColumnVirtualization) {\n        var scrollBar = _this.parent.getContent().querySelector('.e-movablescrollbar');\n        scrollBar.scrollLeft = left;\n      }\n      _this.pageXY.x = pageXY.x;\n      _this.previousValues.left = left;\n    };\n  };\n  Scroll.prototype.setPageXY = function () {\n    var _this = this;\n    return function (e) {\n      if (e.pointerType === 'mouse') {\n        return;\n      }\n      _this.pageXY = _this.getPointXY(e);\n    };\n  };\n  Scroll.prototype.getPointXY = function (e) {\n    var pageXY = {\n      x: 0,\n      y: 0\n    };\n    if (e.touches && e.touches.length) {\n      pageXY.x = e.touches[0].pageX;\n      pageXY.y = e.touches[0].pageY;\n    } else {\n      pageXY.x = e.pageX;\n      pageXY.y = e.pageY;\n    }\n    return pageXY;\n  };\n  Scroll.prototype.getScrollbleParent = function (node) {\n    if (node === null) {\n      return null;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var parent = isNullOrUndefined(node.tagName) ? node.scrollingElement : node;\n    var overflowY = document.defaultView.getComputedStyle(parent, null).overflowY;\n    if (parent.scrollHeight > parent.clientHeight && overflowY !== 'hidden' && overflowY !== 'visible' || node.tagName === 'HTML' || node.tagName === 'BODY') {\n      return node;\n    } else {\n      return this.getScrollbleParent(node.parentNode);\n    }\n  };\n  /**\n   * @param {boolean} isAdd - specifies whether adding/removing the event\n   * @returns {void}\n   * @hidden\n   */\n  Scroll.prototype.addStickyListener = function (isAdd) {\n    this.parentElement = this.getScrollbleParent(this.parent.element.parentElement);\n    if (isAdd && this.parentElement) {\n      this.eventElement = this.parentElement.tagName === 'HTML' || this.parentElement.tagName === 'BODY' ? document : this.parentElement;\n      EventHandler.add(this.eventElement, 'scroll', this.makeStickyHeader, this);\n    } else if (this.eventElement) {\n      EventHandler.remove(this.eventElement, 'scroll', this.makeStickyHeader);\n      this.eventElement = null;\n    }\n  };\n  /**\n   * @returns {void}\n   * @hidden\n   */\n  Scroll.prototype.resizeFrozenRowBorder = function () {\n    var div;\n    if (!this.parent.element.querySelector('.e-frozenrow-border')) {\n      div = this.parent.createElement('div', {\n        className: 'e-frozenrow-border'\n      });\n      this.parent.element.insertBefore(div, this.parent.element.querySelector('.e-gridcontent'));\n    } else {\n      div = this.parent.element.querySelector('.e-frozenrow-border');\n    }\n    var scrollWidth = this.parent.height !== 'auto' ? Scroll.getScrollBarWidth() : 0;\n    div.style.width = this.parent.element.offsetWidth - scrollWidth - 0.5 + 'px';\n  };\n  Scroll.prototype.wireEvents = function () {\n    var _this = this;\n    if (this.oneTimeReady) {\n      var frzCols = this.parent.isFrozenGrid();\n      this.content = this.parent.getContent().querySelector('.' + literals.content);\n      this.header = this.parent.getHeaderContent().querySelector('.' + literals.headerContent);\n      var mScrollBar = this.parent.getContent().querySelector('.e-movablescrollbar');\n      if (this.parent.frozenRows && this.header && this.content) {\n        EventHandler.add(this.header, 'touchstart pointerdown', this.setPageXY(), this);\n        EventHandler.add(this.header, 'touchmove pointermove', this.onTouchScroll(this.content), this);\n      }\n      if (frzCols && mScrollBar && this.parent.enableColumnVirtualization) {\n        EventHandler.add(mScrollBar, 'scroll', this.onCustomScrollbarScroll(this.content, this.header), this);\n        EventHandler.add(this.content, 'scroll', this.onCustomScrollbarScroll(mScrollBar, this.header), this);\n        EventHandler.add(this.header, 'scroll', this.onCustomScrollbarScroll(mScrollBar, this.content), this);\n        EventHandler.add(this.header, 'touchstart pointerdown', this.setPageXY(), this);\n        EventHandler.add(this.header, 'touchmove pointermove', this.onTouchScroll(this.content), this);\n        EventHandler.add(this.content, 'touchstart pointerdown', this.setPageXY(), this);\n        if (!(/macintosh|ipad/.test(Browser.userAgent.toLowerCase()) && Browser.isDevice)) {\n          EventHandler.add(this.content, 'touchmove pointermove', this.onTouchScroll(this.header), this);\n        }\n      }\n      this.contentScrollHandler = this.onContentScroll(this.header);\n      this.headerScrollHandler = this.onContentScroll(this.content);\n      EventHandler.add(this.content, 'scroll', this.contentScrollHandler, this);\n      EventHandler.add(this.header, 'scroll', this.headerScrollHandler, this);\n      if (this.parent.aggregates.length) {\n        EventHandler.add(this.parent.getFooterContent().firstChild, 'scroll', this.onContentScroll(this.content), this);\n      }\n      if (this.parent.enableStickyHeader) {\n        this.addStickyListener(true);\n      }\n      this.refresh();\n      this.oneTimeReady = false;\n    }\n    var table = this.parent.getContentTable();\n    var sLeft;\n    var sHeight;\n    var clientHeight;\n    getUpdateUsingRaf(function () {\n      sLeft = _this.header.scrollLeft;\n      sHeight = table.scrollHeight;\n      clientHeight = _this.parent.getContent().clientHeight;\n    }, function () {\n      var args = {\n        cancel: false\n      };\n      _this.parent.notify(checkScrollReset, args);\n      if (sHeight < clientHeight && _this.parent.height !== 'auto') {\n        _this.setLastRowCell();\n      }\n      if (_this.parent.frozenRows) {\n        _this.resizeFrozenRowBorder();\n      }\n      if (!_this.parent.enableVirtualization && !_this.parent.enableInfiniteScrolling) {\n        if (!args.cancel) {\n          _this.header.scrollLeft = _this.previousValues.left;\n          _this.content.scrollLeft = _this.previousValues.left;\n          _this.content.scrollTop = _this.previousValues.top;\n        }\n      }\n      if (!_this.parent.enableColumnVirtualization) {\n        _this.content.scrollLeft = sLeft;\n        if (_this.parent.isFrozenGrid()) {\n          _this.previousValues.left = sLeft;\n        }\n      }\n    });\n    this.parent.isPreventScrollEvent = false;\n  };\n  /**\n   * @returns {void} returns void\n   * @hidden\n   */\n  Scroll.prototype.setLastRowCell = function () {\n    var table = this.parent.getContentTable();\n    if (table.querySelector('tr:nth-last-child(2)')) {\n      removeClass(table.querySelector('tr:nth-last-child(2)').querySelectorAll('td'), 'e-lastrowcell');\n    }\n    addClass(table.querySelectorAll('tr:last-child td'), 'e-lastrowcell');\n  };\n  /**\n   * @param {boolean} rtl - specifies the rtl\n   * @returns {ScrollCss} returns the ScrollCss\n   * @hidden\n   */\n  Scroll.prototype.getCssProperties = function (rtl) {\n    var css = {};\n    var enableRtl = isNullOrUndefined(rtl) ? this.parent.enableRtl : rtl;\n    css.border = enableRtl ? 'borderLeftWidth' : 'borderRightWidth';\n    css.padding = enableRtl ? 'paddingLeft' : 'paddingRight';\n    return css;\n  };\n  Scroll.prototype.ensureOverflow = function (content) {\n    content.style.overflowY = this.parent.height === 'auto' ? 'auto' : 'scroll';\n  };\n  Scroll.prototype.onPropertyChanged = function (e) {\n    if (e.module !== this.getModuleName()) {\n      return;\n    }\n    this.setPadding();\n    this.oneTimeReady = true;\n    if (this.parent.height === 'auto') {\n      this.removePadding();\n    }\n    this.wireEvents();\n    this.setHeight();\n    var width = 'width';\n    this.setWidth(!isNullOrUndefined(e.properties[\"\" + width]));\n  };\n  Scroll.prototype.makeStickyHeader = function () {\n    if (this.parent.enableStickyHeader && this.parent.element && this.parent.getContent()) {\n      var contentRect = this.parent.getContent().getClientRects()[0];\n      if (contentRect) {\n        var headerEle = this.parent.getHeaderContent();\n        var toolbarEle = this.parent.element.querySelector('.e-toolbar');\n        var groupHeaderEle = this.parent.element.querySelector('.e-groupdroparea');\n        var height = headerEle.offsetHeight + (toolbarEle ? toolbarEle.offsetHeight : 0) + (groupHeaderEle ? groupHeaderEle.offsetHeight : 0);\n        var parentTop = this.parentElement.getClientRects()[0].top;\n        var top_1 = contentRect.top - (parentTop < 0 ? 0 : parentTop);\n        var left = contentRect.left;\n        var colMenuEle = document.body.querySelector('#' + this.parent.element.id + '_columnmenu');\n        if (top_1 < height && contentRect.bottom > 0) {\n          headerEle.classList.add('e-sticky');\n          var elemTop = 0;\n          if (groupHeaderEle && this.parent.groupSettings.showDropArea) {\n            this.setSticky(groupHeaderEle, elemTop, contentRect.width, left, true);\n            elemTop += groupHeaderEle.getClientRects()[0].height;\n          }\n          if (toolbarEle) {\n            this.setSticky(toolbarEle, elemTop, contentRect.width, left, true);\n            elemTop += toolbarEle.getClientRects()[0].height;\n          }\n          this.setSticky(headerEle, elemTop, contentRect.width, left, true);\n          if (!isNullOrUndefined(colMenuEle)) {\n            colMenuEle.style.position = 'fixed';\n            colMenuEle.style.top = height + 'px';\n          }\n        } else {\n          if (headerEle.classList.contains('e-sticky')) {\n            this.setSticky(headerEle, null, null, null, false);\n            if (toolbarEle) {\n              this.setSticky(toolbarEle, null, null, null, false);\n            }\n            if (groupHeaderEle) {\n              this.setSticky(groupHeaderEle, null, null, null, false);\n            }\n            var ccDlg = this.parent.element.querySelector('.e-ccdlg');\n            if (ccDlg) {\n              ccDlg.classList.remove('e-sticky');\n            }\n            if (!isNullOrUndefined(colMenuEle)) {\n              colMenuEle.style.position = 'absolute';\n              var topStyle = contentRect.top - parentTop;\n              colMenuEle.style.top = topStyle + 'px';\n            }\n          }\n        }\n        this.parent.notify(events.stickyScrollComplete, {});\n      }\n    }\n  };\n  Scroll.prototype.setSticky = function (ele, top, width, left, isAdd) {\n    if (isAdd) {\n      ele.style.width = width + 'px';\n      ele.classList.add('e-sticky');\n    } else {\n      ele.classList.remove('e-sticky');\n    }\n    ele.style.top = top != null ? top + 'px' : '';\n    ele.style.left = left !== null ? parseInt(ele.style.left, 10) !== left ? left + 'px' : ele.style.left : '';\n  };\n  /**\n   * @returns {void}\n   * @hidden\n   */\n  Scroll.prototype.destroy = function () {\n    var gridElement = this.parent.element;\n    if (!gridElement || !gridElement.querySelector('.' + literals.gridHeader) && !gridElement.querySelector('.' + literals.gridContent)) {\n      return;\n    }\n    this.removeEventListener();\n    //Remove Dom event\n    var cont = this.parent.getContent().querySelector('.' + literals.content);\n    EventHandler.remove(cont, 'scroll', this.onContentScroll);\n    if (this.parent.enableStickyHeader) {\n      this.addStickyListener(false);\n    }\n    //Remove padding\n    this.removePadding();\n    removeClass([this.parent.getHeaderContent().querySelector('.' + literals.headerContent)], literals.headerContent);\n    removeClass([cont], literals.content);\n    //Remove height\n    cont.style.height = '';\n    //Remove width\n    this.parent.element.style.width = '';\n  };\n  /**\n   * Function to get the scrollbar width of the browser.\n   *\n   * @returns {number} return the width\n   * @hidden\n   */\n  Scroll.getScrollBarWidth = function () {\n    return getScrollBarWidth();\n  };\n  return Scroll;\n}();\nexport { Scroll };","map":{"version":3,"names":["Browser","EventHandler","addClass","removeClass","formatUnit","isNullOrUndefined","getScrollBarWidth","getUpdateUsingRaf","scroll","contentReady","uiUpdate","onEmpty","headerRefreshed","textWrapRefresh","virtualScrollEdit","infiniteScrollHandler","closeFilterDialog","lazyLoadScrollHandler","checkScrollReset","ColumnWidthService","literals","events","Scroll","parent","previousValues","top","left","oneTimeReady","widthService","addEventListener","prototype","getModuleName","setWidth","uiupdate","element","style","width","setWidthToColumns","toolbarModule","toolbar","tlbrElement","tlbrLeftElement","querySelector","tlbrCenterElement","tlbrRightElement","tlbrItems","tlbrLeftWidth","clientWidth","tlbrCenterWidth","tlbrRightWidth","tlbrItemsWidth","tlbrWidth","enableAdaptiveUI","refreshOverflow","setHeight","mHdrHeight","content","getContent","height","enableColumnVirtualization","isFrozenGrid","toString","indexOf","parseInt","enableVirtualization","frozenRows","tbody","getHeaderContent","offsetHeight","add","getElementsByClassName","addedRow","length","height_1","getRowHeight","isInitialLoad","loadingIndicator","indicatorType","ensureOverflow","refresh","setPadding","scrollWidth","getThreshold","cssProps","getCssProperties","headerContent","border","padding","removePadding","rtl","hDiv","parentElement","footerDiv","getFooterContent","classList","contains","remove","getSiblingsHeight","appName","info","name","isDestroyed","on","wireEvents","onPropertyChanged","setScrollLeft","removeEventListener","off","unwireEvents","header","setPageXY","onTouchScroll","mScrollBar","onCustomScrollbarScroll","test","userAgent","toLowerCase","isDevice","contentScrollHandler","headerScrollHandler","aggregates","firstChild","onContentScroll","scrollLeft","scrollTarget","_this","isHeader","e","isPreventScrollEvent","target","scrollTop","querySelectorAll","errorFreeze","errorFixed","getVisibleFrozenLeftCount","widthVal","Math","round","enableRtl","offsetWidth","getVisibleFrozenRightCount","rows","slice","call","infiniteScrollModule","enableInfiniteScrolling","isEdit","notify","isLeft","groupSettings","columns","enableLazyLoading","isDown","firstElementChild","scrollDown","isFooter","cont","hdr","pointerType","isFrozen","pageXY","getPointXY","x","mHdr","mCont","preventDefault","scrollBar","y","touches","pageX","pageY","getScrollbleParent","node","tagName","scrollingElement","overflowY","document","defaultView","getComputedStyle","scrollHeight","clientHeight","parentNode","addStickyListener","isAdd","eventElement","makeStickyHeader","resizeFrozenRowBorder","div","createElement","className","insertBefore","frzCols","enableStickyHeader","table","getContentTable","sLeft","sHeight","args","cancel","setLastRowCell","css","module","properties","contentRect","getClientRects","headerEle","toolbarEle","groupHeaderEle","parentTop","top_1","colMenuEle","body","id","bottom","elemTop","showDropArea","setSticky","position","ccDlg","topStyle","stickyScrollComplete","ele","destroy","gridElement","gridHeader","gridContent"],"sources":["/Users/saleem/Desktop/KClient/Web App/Ver_3.6/User Interface/website_Source files/node_modules/@syncfusion/ej2-grids/src/grid/actions/scroll.js"],"sourcesContent":["import { Browser, EventHandler } from '@syncfusion/ej2-base';\nimport { addClass, removeClass } from '@syncfusion/ej2-base';\nimport { formatUnit, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { getScrollBarWidth, getUpdateUsingRaf } from '../base/util';\nimport { scroll, contentReady, uiUpdate, onEmpty, headerRefreshed, textWrapRefresh, virtualScrollEdit, infiniteScrollHandler, closeFilterDialog } from '../base/constant';\nimport { lazyLoadScrollHandler, checkScrollReset } from '../base/constant';\nimport { ColumnWidthService } from '../services/width-controller';\nimport * as literals from '../base/string-literals';\nimport * as events from '../base/constant';\n/**\n * The `Scroll` module is used to handle scrolling behaviour.\n */\nvar Scroll = /** @class */ (function () {\n    /**\n     * Constructor for the Grid scrolling.\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     * @hidden\n     */\n    function Scroll(parent) {\n        //To maintain scroll state on grid actions.\n        this.previousValues = { top: 0, left: 0 };\n        this.oneTimeReady = true;\n        this.parent = parent;\n        this.widthService = new ColumnWidthService(parent);\n        this.addEventListener();\n    }\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} returns the module name\n     * @private\n     */\n    Scroll.prototype.getModuleName = function () {\n        return 'scroll';\n    };\n    /**\n     * @param {boolean} uiupdate - specifies the uiupdate\n     * @returns {void}\n     * @hidden\n     */\n    Scroll.prototype.setWidth = function (uiupdate) {\n        this.parent.element.style.width = formatUnit(this.parent.width);\n        if (uiupdate) {\n            this.widthService.setWidthToColumns();\n        }\n        if (this.parent.toolbarModule && this.parent.toolbarModule.toolbar &&\n            this.parent.toolbarModule.toolbar.element) {\n            var tlbrElement = this.parent.toolbarModule.toolbar.element;\n            var tlbrLeftElement = tlbrElement.querySelector('.e-toolbar-left');\n            var tlbrCenterElement = tlbrElement.querySelector('.e-toolbar-center');\n            var tlbrRightElement = tlbrElement.querySelector('.e-toolbar-right');\n            var tlbrItems = tlbrElement.querySelector('.e-toolbar-items');\n            var tlbrLeftWidth = tlbrLeftElement ? tlbrLeftElement.clientWidth : 0;\n            var tlbrCenterWidth = tlbrCenterElement ? tlbrCenterElement.clientWidth : 0;\n            var tlbrRightWidth = tlbrRightElement ? tlbrRightElement.clientWidth : 0;\n            var tlbrItemsWidth = tlbrItems ? tlbrItems.clientWidth : 0;\n            var tlbrWidth = tlbrElement ? tlbrElement.clientWidth : 0;\n            if (!this.parent.enableAdaptiveUI || tlbrLeftWidth > tlbrWidth || tlbrCenterWidth > tlbrWidth || tlbrRightWidth > tlbrWidth ||\n                tlbrItemsWidth > tlbrWidth) {\n                this.parent.toolbarModule.toolbar.refreshOverflow();\n            }\n        }\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    Scroll.prototype.setHeight = function () {\n        var mHdrHeight = 0;\n        var content = this.parent.getContent().querySelector('.' + literals.content);\n        var height = this.parent.height;\n        if (this.parent.enableColumnVirtualization && this.parent.isFrozenGrid() && this.parent.height !== 'auto'\n            && this.parent.height.toString().indexOf('%') < 0) {\n            height = parseInt(height, 10) - Scroll.getScrollBarWidth();\n        }\n        if (!this.parent.enableVirtualization && this.parent.frozenRows && this.parent.height !== 'auto') {\n            var tbody = this.parent.getHeaderContent()\n                .querySelector(literals.tbody + ':not(.e-masked-tbody)');\n            mHdrHeight = tbody ? tbody.offsetHeight : 0;\n            if (tbody && mHdrHeight) {\n                var add = tbody.getElementsByClassName(literals.addedRow).length;\n                var height_1 = add * this.parent.getRowHeight();\n                mHdrHeight -= height_1;\n            }\n            else if (!this.parent.isInitialLoad && this.parent.loadingIndicator.indicatorType === 'Shimmer'\n                && this.parent.getHeaderContent().querySelector('.e-masked-table')) {\n                height = parseInt(height, 10) - (this.parent.frozenRows * this.parent.getRowHeight());\n            }\n            content.style.height = formatUnit(height - mHdrHeight);\n        }\n        else {\n            content.style.height = formatUnit(height);\n        }\n        this.ensureOverflow(content);\n        if (this.parent.isFrozenGrid()) {\n            this.refresh();\n        }\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    Scroll.prototype.setPadding = function () {\n        var content = this.parent.getHeaderContent();\n        var scrollWidth = Scroll.getScrollBarWidth() - this.getThreshold();\n        var cssProps = this.getCssProperties();\n        content.querySelector('.' + literals.headerContent).style[cssProps.border] = scrollWidth > 0 ? '1px' : '0px';\n        content.style[cssProps.padding] = scrollWidth > 0 ? scrollWidth + 'px' : '0px';\n    };\n    /**\n     * @param {boolean} rtl - specifies the rtl\n     * @returns {void}\n     * @hidden\n     */\n    Scroll.prototype.removePadding = function (rtl) {\n        var cssProps = this.getCssProperties(rtl);\n        var hDiv = this.parent.getHeaderContent().querySelector('.' + literals.headerContent);\n        hDiv.style[cssProps.border] = '';\n        hDiv.parentElement.style[cssProps.padding] = '';\n        var footerDiv = this.parent.getFooterContent();\n        if (footerDiv && footerDiv.classList.contains('e-footerpadding')) {\n            footerDiv.classList.remove('e-footerpadding');\n        }\n    };\n    /**\n     * Refresh makes the Grid adoptable with the height of parent container.\n     *\n     * > The [`height`](./#height) must be set to 100%.\n     *\n     * @returns {void}\n     */\n    Scroll.prototype.refresh = function () {\n        if (this.parent.height !== '100%') {\n            return;\n        }\n        var content = this.parent.getContent();\n        this.parent.element.style.height = '100%';\n        var height = this.widthService.getSiblingsHeight(content);\n        content.style.height = 'calc(100% - ' + height + 'px)'; //Set the height to the  '.' + literals.gridContent;\n    };\n    Scroll.prototype.getThreshold = function () {\n        /* Some browsers places the scroller outside the content,\n         * hence the padding should be adjusted.*/\n        var appName = Browser.info.name;\n        if (appName === 'mozilla') {\n            return 0.5;\n        }\n        return 1;\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    Scroll.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(onEmpty, this.wireEvents, this);\n        this.parent.on(contentReady, this.wireEvents, this);\n        this.parent.on(uiUpdate, this.onPropertyChanged, this);\n        this.parent.on(textWrapRefresh, this.wireEvents, this);\n        this.parent.on(headerRefreshed, this.setScrollLeft, this);\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    Scroll.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(onEmpty, this.wireEvents);\n        this.parent.off(contentReady, this.wireEvents);\n        this.parent.off(uiUpdate, this.onPropertyChanged);\n        this.parent.off(textWrapRefresh, this.wireEvents);\n        this.parent.off(headerRefreshed, this.setScrollLeft);\n        this.unwireEvents();\n    };\n    Scroll.prototype.unwireEvents = function () {\n        if (this.parent.frozenRows && this.header) {\n            EventHandler.remove(this.header, 'touchstart pointerdown', this.setPageXY);\n            EventHandler.remove(this.header, 'touchmove pointermove', this.onTouchScroll);\n        }\n        var mScrollBar = this.parent.getContent() ? this.parent.getContent().querySelector('.e-movablescrollbar') : null;\n        if (this.parent.isFrozenGrid() && this.parent.enableColumnVirtualization) {\n            if (mScrollBar) {\n                EventHandler.remove(mScrollBar, 'scroll', this.onCustomScrollbarScroll);\n            }\n            if (this.content) {\n                EventHandler.remove(this.content, 'scroll', this.onCustomScrollbarScroll);\n                EventHandler.remove(this.content, 'touchstart pointerdown', this.setPageXY);\n                if (!(/macintosh|ipad/.test(Browser.userAgent.toLowerCase()) && Browser.isDevice)) {\n                    EventHandler.remove(this.content, 'touchmove pointermove', this.onTouchScroll);\n                }\n            }\n            if (this.header) {\n                EventHandler.remove(this.header, 'scroll', this.onCustomScrollbarScroll);\n                EventHandler.remove(this.header, 'touchstart pointerdown', this.setPageXY);\n                EventHandler.remove(this.header, 'touchmove pointermove', this.onTouchScroll);\n            }\n        }\n        if (this.content) {\n            EventHandler.remove(this.content, 'scroll', this.contentScrollHandler);\n        }\n        if (this.header) {\n            EventHandler.remove(this.header, 'scroll', this.headerScrollHandler);\n        }\n        this.contentScrollHandler = null;\n        this.headerScrollHandler = null;\n        if (this.parent.aggregates.length && this.parent.getFooterContent()) {\n            EventHandler.remove(this.parent.getFooterContent().firstChild, 'scroll', this.onContentScroll);\n        }\n    };\n    Scroll.prototype.setScrollLeft = function () {\n        this.parent.getHeaderContent().querySelector('.' + literals.headerContent).scrollLeft = this.previousValues.left;\n    };\n    Scroll.prototype.onContentScroll = function (scrollTarget) {\n        var _this = this;\n        var element = scrollTarget;\n        var isHeader = element.classList.contains(literals.headerContent);\n        return function (e) {\n            if (_this.content.querySelector(literals.tbody) === null || _this.parent.isPreventScrollEvent) {\n                return;\n            }\n            var target = e.target;\n            if (_this.parent.frozenRows) {\n                if (_this.content.scrollTop > 0 && _this.parent.frozenRows) {\n                    addClass([_this.parent.element], 'e-top-shadow');\n                }\n                else {\n                    removeClass([_this.parent.element], 'e-top-shadow');\n                }\n            }\n            if (_this.parent.element.querySelectorAll('.e-leftfreeze,.e-fixedfreeze,.e-rightfreeze').length) {\n                var errorFreeze = _this.parent.getContent().querySelectorAll('.e-freezeerror:not([style*=\"display: none\"])');\n                var errorFixed = _this.parent.getContent().querySelectorAll('.e-fixederror:not([style*=\"display: none\"])');\n                if (target.scrollLeft !== 0 && _this.parent.getVisibleFrozenLeftCount()) {\n                    addClass([_this.parent.element], 'e-left-shadow');\n                }\n                else {\n                    removeClass([_this.parent.element], 'e-left-shadow');\n                }\n                var widthVal = Math.round((_this.parent.enableRtl ? target.scrollWidth + target.scrollLeft : target.scrollWidth - target.scrollLeft) +\n                    (_this.parent.height === 'auto' ? 0 : 1));\n                if (widthVal === target.offsetWidth && _this.parent.getVisibleFrozenRightCount()) {\n                    removeClass([_this.parent.element], 'e-right-shadow');\n                }\n                else {\n                    addClass([_this.parent.element], 'e-right-shadow');\n                }\n                var rows = [].slice.call(_this.parent.getContent().querySelectorAll('.e-row:not(.e-hiddenrow)'));\n                if (((rows.length === 1 && errorFreeze.length) ||\n                    (_this.parent.element.querySelector('.e-freeze-autofill:not([style*=\"display: none\"])')) ||\n                    errorFixed.length) && target.scrollLeft !== _this.previousValues.left) {\n                    target.scrollLeft = _this.previousValues.left;\n                    return;\n                }\n                if (rows.length !== 1 && (errorFreeze.length || errorFixed.length) && target.scrollTop !== _this.previousValues.top) {\n                    target.scrollTop = _this.previousValues.top;\n                    return;\n                }\n            }\n            var left = target.scrollLeft;\n            if (!isNullOrUndefined(_this.parent.infiniteScrollModule) && _this.parent.enableInfiniteScrolling && !_this.parent.isEdit) {\n                _this.parent.notify(infiniteScrollHandler, { target: e.target, isLeft: _this.previousValues.left !== left });\n            }\n            if (_this.parent.groupSettings.columns.length && _this.parent.groupSettings.enableLazyLoading) {\n                var isDown = _this.previousValues.top < _this.parent.getContent().firstElementChild.scrollTop;\n                _this.parent.notify(lazyLoadScrollHandler, { scrollDown: isDown });\n            }\n            _this.parent.notify(virtualScrollEdit, {});\n            var isFooter = target.classList.contains('e-summarycontent');\n            if (_this.previousValues.left === left) {\n                _this.previousValues.top = !isHeader ? _this.previousValues.top : target.scrollTop;\n                return;\n            }\n            _this.parent.notify(closeFilterDialog, e);\n            element.scrollLeft = left;\n            if (isFooter) {\n                _this.header.scrollLeft = left;\n            }\n            _this.previousValues.left = left;\n            _this.parent.notify(scroll, { left: left });\n        };\n    };\n    Scroll.prototype.onCustomScrollbarScroll = function (cont, hdr) {\n        var _this = this;\n        var content = cont;\n        var header = hdr;\n        return function (e) {\n            if (_this.content.querySelector(literals.tbody) === null) {\n                return;\n            }\n            var target = e.target;\n            var left = target.scrollLeft;\n            if (_this.previousValues.left === left) {\n                return;\n            }\n            content.scrollLeft = left;\n            header.scrollLeft = left;\n            _this.previousValues.left = left;\n            _this.parent.notify(scroll, { left: left });\n            if (_this.parent.isDestroyed) {\n                return;\n            }\n        };\n    };\n    Scroll.prototype.onTouchScroll = function (scrollTarget) {\n        var _this = this;\n        var element = scrollTarget;\n        return function (e) {\n            if (e.pointerType === 'mouse') {\n                return;\n            }\n            var isFrozen = _this.parent.isFrozenGrid();\n            var pageXY = _this.getPointXY(e);\n            var left = element.scrollLeft + (_this.pageXY.x - pageXY.x);\n            var mHdr = _this.parent.getHeaderContent().querySelector('.' + literals.headerContent);\n            var mCont = _this.parent.getContent().querySelector('.' + literals.content);\n            if (_this.previousValues.left === left || (left < 0 || (mHdr.scrollWidth - mHdr.clientWidth) < left)) {\n                return;\n            }\n            e.preventDefault();\n            mHdr.scrollLeft = left;\n            mCont.scrollLeft = left;\n            if (isFrozen && _this.parent.enableColumnVirtualization) {\n                var scrollBar = _this.parent.getContent().querySelector('.e-movablescrollbar');\n                scrollBar.scrollLeft = left;\n            }\n            _this.pageXY.x = pageXY.x;\n            _this.previousValues.left = left;\n        };\n    };\n    Scroll.prototype.setPageXY = function () {\n        var _this = this;\n        return function (e) {\n            if (e.pointerType === 'mouse') {\n                return;\n            }\n            _this.pageXY = _this.getPointXY(e);\n        };\n    };\n    Scroll.prototype.getPointXY = function (e) {\n        var pageXY = { x: 0, y: 0 };\n        if (e.touches && e.touches.length) {\n            pageXY.x = e.touches[0].pageX;\n            pageXY.y = e.touches[0].pageY;\n        }\n        else {\n            pageXY.x = e.pageX;\n            pageXY.y = e.pageY;\n        }\n        return pageXY;\n    };\n    Scroll.prototype.getScrollbleParent = function (node) {\n        if (node === null) {\n            return null;\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var parent = isNullOrUndefined(node.tagName) ? node.scrollingElement : node;\n        var overflowY = document.defaultView.getComputedStyle(parent, null).overflowY;\n        if (parent.scrollHeight > parent.clientHeight && overflowY !== 'hidden'\n            && overflowY !== 'visible' || node.tagName === 'HTML' || node.tagName === 'BODY') {\n            return node;\n        }\n        else {\n            return this.getScrollbleParent(node.parentNode);\n        }\n    };\n    /**\n     * @param {boolean} isAdd - specifies whether adding/removing the event\n     * @returns {void}\n     * @hidden\n     */\n    Scroll.prototype.addStickyListener = function (isAdd) {\n        this.parentElement = this.getScrollbleParent(this.parent.element.parentElement);\n        if (isAdd && this.parentElement) {\n            this.eventElement = this.parentElement.tagName === 'HTML' || this.parentElement.tagName === 'BODY' ? document :\n                this.parentElement;\n            EventHandler.add(this.eventElement, 'scroll', this.makeStickyHeader, this);\n        }\n        else if (this.eventElement) {\n            EventHandler.remove(this.eventElement, 'scroll', this.makeStickyHeader);\n            this.eventElement = null;\n        }\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    Scroll.prototype.resizeFrozenRowBorder = function () {\n        var div;\n        if (!this.parent.element.querySelector('.e-frozenrow-border')) {\n            div = this.parent.createElement('div', { className: 'e-frozenrow-border' });\n            this.parent.element.insertBefore(div, this.parent.element.querySelector('.e-gridcontent'));\n        }\n        else {\n            div = this.parent.element.querySelector('.e-frozenrow-border');\n        }\n        var scrollWidth = this.parent.height !== 'auto' ? Scroll.getScrollBarWidth() : 0;\n        div.style.width = (this.parent.element.offsetWidth - scrollWidth) - 0.5 + 'px';\n    };\n    Scroll.prototype.wireEvents = function () {\n        var _this = this;\n        if (this.oneTimeReady) {\n            var frzCols = this.parent.isFrozenGrid();\n            this.content = this.parent.getContent().querySelector('.' + literals.content);\n            this.header = this.parent.getHeaderContent().querySelector('.' + literals.headerContent);\n            var mScrollBar = this.parent.getContent().querySelector('.e-movablescrollbar');\n            if (this.parent.frozenRows && this.header && this.content) {\n                EventHandler.add(this.header, 'touchstart pointerdown', this.setPageXY(), this);\n                EventHandler.add(this.header, 'touchmove pointermove', this.onTouchScroll(this.content), this);\n            }\n            if (frzCols && mScrollBar && this.parent.enableColumnVirtualization) {\n                EventHandler.add(mScrollBar, 'scroll', this.onCustomScrollbarScroll(this.content, this.header), this);\n                EventHandler.add(this.content, 'scroll', this.onCustomScrollbarScroll(mScrollBar, this.header), this);\n                EventHandler.add(this.header, 'scroll', this.onCustomScrollbarScroll(mScrollBar, this.content), this);\n                EventHandler.add(this.header, 'touchstart pointerdown', this.setPageXY(), this);\n                EventHandler.add(this.header, 'touchmove pointermove', this.onTouchScroll(this.content), this);\n                EventHandler.add(this.content, 'touchstart pointerdown', this.setPageXY(), this);\n                if (!(/macintosh|ipad/.test(Browser.userAgent.toLowerCase()) && Browser.isDevice)) {\n                    EventHandler.add(this.content, 'touchmove pointermove', this.onTouchScroll(this.header), this);\n                }\n            }\n            this.contentScrollHandler = this.onContentScroll(this.header);\n            this.headerScrollHandler = this.onContentScroll(this.content);\n            EventHandler.add(this.content, 'scroll', this.contentScrollHandler, this);\n            EventHandler.add(this.header, 'scroll', this.headerScrollHandler, this);\n            if (this.parent.aggregates.length) {\n                EventHandler.add(this.parent.getFooterContent().firstChild, 'scroll', this.onContentScroll(this.content), this);\n            }\n            if (this.parent.enableStickyHeader) {\n                this.addStickyListener(true);\n            }\n            this.refresh();\n            this.oneTimeReady = false;\n        }\n        var table = this.parent.getContentTable();\n        var sLeft;\n        var sHeight;\n        var clientHeight;\n        getUpdateUsingRaf(function () {\n            sLeft = _this.header.scrollLeft;\n            sHeight = table.scrollHeight;\n            clientHeight = _this.parent.getContent().clientHeight;\n        }, function () {\n            var args = { cancel: false };\n            _this.parent.notify(checkScrollReset, args);\n            if (sHeight < clientHeight && _this.parent.height !== 'auto') {\n                _this.setLastRowCell();\n            }\n            if (_this.parent.frozenRows) {\n                _this.resizeFrozenRowBorder();\n            }\n            if (!_this.parent.enableVirtualization && !_this.parent.enableInfiniteScrolling) {\n                if (!args.cancel) {\n                    _this.header.scrollLeft = _this.previousValues.left;\n                    _this.content.scrollLeft = _this.previousValues.left;\n                    _this.content.scrollTop = _this.previousValues.top;\n                }\n            }\n            if (!_this.parent.enableColumnVirtualization) {\n                _this.content.scrollLeft = sLeft;\n                if (_this.parent.isFrozenGrid()) {\n                    _this.previousValues.left = sLeft;\n                }\n            }\n        });\n        this.parent.isPreventScrollEvent = false;\n    };\n    /**\n     * @returns {void} returns void\n     * @hidden\n     */\n    Scroll.prototype.setLastRowCell = function () {\n        var table = this.parent.getContentTable();\n        if (table.querySelector('tr:nth-last-child(2)')) {\n            removeClass(table.querySelector('tr:nth-last-child(2)').querySelectorAll('td'), 'e-lastrowcell');\n        }\n        addClass(table.querySelectorAll('tr:last-child td'), 'e-lastrowcell');\n    };\n    /**\n     * @param {boolean} rtl - specifies the rtl\n     * @returns {ScrollCss} returns the ScrollCss\n     * @hidden\n     */\n    Scroll.prototype.getCssProperties = function (rtl) {\n        var css = {};\n        var enableRtl = isNullOrUndefined(rtl) ? this.parent.enableRtl : rtl;\n        css.border = enableRtl ? 'borderLeftWidth' : 'borderRightWidth';\n        css.padding = enableRtl ? 'paddingLeft' : 'paddingRight';\n        return css;\n    };\n    Scroll.prototype.ensureOverflow = function (content) {\n        content.style.overflowY = this.parent.height === 'auto' ? 'auto' : 'scroll';\n    };\n    Scroll.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        this.setPadding();\n        this.oneTimeReady = true;\n        if (this.parent.height === 'auto') {\n            this.removePadding();\n        }\n        this.wireEvents();\n        this.setHeight();\n        var width = 'width';\n        this.setWidth(!isNullOrUndefined(e.properties[\"\" + width]));\n    };\n    Scroll.prototype.makeStickyHeader = function () {\n        if (this.parent.enableStickyHeader && this.parent.element && this.parent.getContent()) {\n            var contentRect = this.parent.getContent().getClientRects()[0];\n            if (contentRect) {\n                var headerEle = this.parent.getHeaderContent();\n                var toolbarEle = this.parent.element.querySelector('.e-toolbar');\n                var groupHeaderEle = this.parent.element.querySelector('.e-groupdroparea');\n                var height = headerEle.offsetHeight + (toolbarEle ? toolbarEle.offsetHeight : 0) +\n                    (groupHeaderEle ? groupHeaderEle.offsetHeight : 0);\n                var parentTop = this.parentElement.getClientRects()[0].top;\n                var top_1 = contentRect.top - (parentTop < 0 ? 0 : parentTop);\n                var left = contentRect.left;\n                var colMenuEle = document.body.querySelector('#' + this.parent.element.id + '_columnmenu');\n                if (top_1 < height && contentRect.bottom > 0) {\n                    headerEle.classList.add('e-sticky');\n                    var elemTop = 0;\n                    if (groupHeaderEle && this.parent.groupSettings.showDropArea) {\n                        this.setSticky(groupHeaderEle, elemTop, contentRect.width, left, true);\n                        elemTop += groupHeaderEle.getClientRects()[0].height;\n                    }\n                    if (toolbarEle) {\n                        this.setSticky(toolbarEle, elemTop, contentRect.width, left, true);\n                        elemTop += toolbarEle.getClientRects()[0].height;\n                    }\n                    this.setSticky(headerEle, elemTop, contentRect.width, left, true);\n                    if (!isNullOrUndefined(colMenuEle)) {\n                        colMenuEle.style.position = 'fixed';\n                        colMenuEle.style.top = height + 'px';\n                    }\n                }\n                else {\n                    if (headerEle.classList.contains('e-sticky')) {\n                        this.setSticky(headerEle, null, null, null, false);\n                        if (toolbarEle) {\n                            this.setSticky(toolbarEle, null, null, null, false);\n                        }\n                        if (groupHeaderEle) {\n                            this.setSticky(groupHeaderEle, null, null, null, false);\n                        }\n                        var ccDlg = this.parent.element.querySelector('.e-ccdlg');\n                        if (ccDlg) {\n                            ccDlg.classList.remove('e-sticky');\n                        }\n                        if (!isNullOrUndefined(colMenuEle)) {\n                            colMenuEle.style.position = 'absolute';\n                            var topStyle = contentRect.top - parentTop;\n                            colMenuEle.style.top = topStyle + 'px';\n                        }\n                    }\n                }\n                this.parent.notify(events.stickyScrollComplete, {});\n            }\n        }\n    };\n    Scroll.prototype.setSticky = function (ele, top, width, left, isAdd) {\n        if (isAdd) {\n            ele.style.width = width + 'px';\n            ele.classList.add('e-sticky');\n        }\n        else {\n            ele.classList.remove('e-sticky');\n        }\n        ele.style.top = top != null ? top + 'px' : '';\n        ele.style.left = left !== null ? parseInt(ele.style.left, 10) !== left ? left + 'px' : ele.style.left : '';\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    Scroll.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.' + literals.gridHeader) && !gridElement.querySelector('.' + literals.gridContent))) {\n            return;\n        }\n        this.removeEventListener();\n        //Remove Dom event\n        var cont = this.parent.getContent().querySelector('.' + literals.content);\n        EventHandler.remove(cont, 'scroll', this.onContentScroll);\n        if (this.parent.enableStickyHeader) {\n            this.addStickyListener(false);\n        }\n        //Remove padding\n        this.removePadding();\n        removeClass([this.parent.getHeaderContent().querySelector('.' + literals.headerContent)], literals.headerContent);\n        removeClass([cont], literals.content);\n        //Remove height\n        cont.style.height = '';\n        //Remove width\n        this.parent.element.style.width = '';\n    };\n    /**\n     * Function to get the scrollbar width of the browser.\n     *\n     * @returns {number} return the width\n     * @hidden\n     */\n    Scroll.getScrollBarWidth = function () {\n        return getScrollBarWidth();\n    };\n    return Scroll;\n}());\nexport { Scroll };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}