{"ast":null,"code":"import { ContextMenu as Menu } from '@syncfusion/ej2-navigations';\nimport { isNullOrUndefined as isNOU, createElement, closest, KeyboardEvents } from '@syncfusion/ej2-base';\nimport { getValue, select } from '@syncfusion/ej2-base';\nimport { Download, GetDetails } from './../common/operations';\nimport { createDialog } from './dialog';\nimport { cutFiles, copyFiles, refresh, getPathObject, getLocaleText, updateLayout, getFullPath } from './../common/utility';\nimport { getCssClass, sortbyClickHandler, pasteHandler } from './../common/utility';\nimport { createDeniedDialog, createNewFolder, uploadItem, hasEditAccess, hasDownloadAccess } from './../common/utility';\nimport * as events from './../base/constant';\nimport * as CLS from '../base/classes';\n/**\n * ContextMenu module\n */\nvar ContextMenu = /** @class */function () {\n  /**\n   * Constructor for the ContextMenu module\n   *\n   * @param {IFileManager} parent - Specifies the parent element.\n   * @hidden\n   */\n  function ContextMenu(parent) {\n    this.isMenuItemClicked = false;\n    this.currentItems = [];\n    this.currentElement = null;\n    this.disabledItems = [];\n    this.parent = parent;\n    this.render();\n  }\n  ContextMenu.prototype.render = function () {\n    this.keyConfigs = {\n      downarrow: 'downarrow',\n      uparrow: 'uparrown'\n    };\n    this.contextMenu = new Menu({\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale,\n      target: '#' + this.parent.element.id,\n      enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n      beforeItemRender: this.onBeforeItemRender.bind(this),\n      select: this.onSelect.bind(this),\n      beforeOpen: this.onBeforeOpen.bind(this),\n      beforeClose: this.onBeforeClose.bind(this),\n      cssClass: getCssClass(this.parent, CLS.ROOT_POPUP)\n    });\n    this.contextMenu.isStringTemplate = true;\n    this.contextMenu.appendTo('#' + this.parent.element.id + CLS.CONTEXT_MENU_ID);\n    this.addEventListener();\n  };\n  /* istanbul ignore next */\n  ContextMenu.prototype.onBeforeItemRender = function (args) {\n    if (args.item.id === this.getMenuId('largeiconsview')) {\n      var iconSpan = createElement('span');\n      var element = args.element;\n      element.insertBefore(iconSpan, this.parent.view === 'LargeIcons' ? element.childNodes[1] : element.childNodes[0]);\n      iconSpan.setAttribute('class', CLS.ICON_LARGE + ' ' + CLS.MENU_ICON);\n    }\n    if (args.item.id === this.getMenuId('detailsview')) {\n      var iconSpan = createElement('span');\n      var element = args.element;\n      element.insertBefore(iconSpan, this.parent.view === 'Details' ? element.childNodes[1] : element.childNodes[0]);\n      iconSpan.setAttribute('class', CLS.ICON_GRID + ' ' + CLS.MENU_ICON);\n    }\n  };\n  ContextMenu.prototype.onBeforeClose = function () {\n    this.menuTarget = null;\n    if (!this.isMenuItemClicked && this.parent.pathId.length > 1 && this.parent.activeModule == 'navigationpane') {\n      this.parent.pathId.pop();\n      var parentKey = [];\n      var itemKeys = Object.keys(this.parent.feParent);\n      for (var _i = 0, itemKeys_1 = itemKeys; _i < itemKeys_1.length; _i++) {\n        var item = itemKeys_1[_i];\n        var itemData = getValue(item, this.parent.feParent);\n        if (this.parent.pathNames.indexOf(itemData.name) !== -1) {\n          parentKey.push(itemData._fm_id);\n        }\n      }\n      this.parent.pathId.push(parentKey[parentKey.length - 1]);\n      this.parent.navigationpaneModule.treeObj.selectedNodes = [this.parent.pathId[this.parent.pathId.length - 1]];\n    }\n    this.isMenuItemClicked = false;\n  };\n  /* istanbul ignore next */\n  ContextMenu.prototype.onBeforeOpen = function (args) {\n    var _this = this;\n    this.disabledItems = [];\n    var selected = false;\n    var uid;\n    // eslint-disable-next-line\n    var data;\n    var treeFolder = false;\n    var target = args.event.target;\n    this.menuTarget = this.targetNodeElement = target;\n    this.currentElement = args.element;\n    if (target.classList.contains('e-spinner-pane')) {\n      target = this.parent.navigationpaneModule.activeNode.getElementsByClassName(CLS.FULLROW)[0];\n      this.menuTarget = this.targetNodeElement = target;\n    }\n    this.targetElement = this.parent.view === 'Details' ? closest(target, 'tr.e-row') : target;\n    if (this.parent.enableVirtualization && (target.classList.contains('e-virtual-bottom') || target.classList.contains('e-virtualtable'))) {\n      target = target.parentElement.closest(\"div\");\n    }\n    var view = this.getTargetView(target);\n    this.updateActiveModule();\n    /* istanbul ignore next */\n    if (target.classList.contains(CLS.TREE_VIEW) || closest(target, 'th') || closest(target, '#' + this.parent.element.id + CLS.BREADCRUMBBAR_ID) || closest(target, '#' + this.parent.element.id + CLS.TOOLBAR_ID)) {\n      args.cancel = true;\n      // eslint:disable-next-line\n    } else if (!(this.parent.view === 'LargeIcons') && this.targetElement && this.targetElement.classList.contains('e-emptyrow')) {\n      this.setLayoutItem(target);\n      /* istanbul ignore next */\n    } else if (closest(target, '.' + CLS.EMPTY)) {\n      this.setLayoutItem(target);\n      // eslint:disable-next-line\n    } else if (!target.classList.contains(CLS.MENU_ITEM) && !target.classList.contains(CLS.MENU_ICON) && !target.classList.contains(CLS.SUBMENU_ICON)) {\n      /* istanbul ignore next */\n      // eslint:disable-next-line\n      if (this.parent.view === 'LargeIcons' && !isNOU(closest(target, 'li')) && !closest(target, '#' + this.parent.element.id + CLS.TREE_ID)) {\n        var eveArgs = {\n          ctrlKey: true,\n          shiftKey: true\n        };\n        if (!closest(target, 'li').classList.contains('e-active')) {\n          this.parent.largeiconsviewModule.doSelection(target, eveArgs);\n        }\n        // eslint-disable-next-line\n        data = this.parent.visitedData;\n        selected = true;\n      } else if (!isNOU(closest(target, 'tr.e-row'))) {\n        uid = this.targetElement.getAttribute('data-uid');\n        // eslint-disable-next-line\n        data = this.parent.detailsviewModule.gridObj.getRowObjectFromUID(uid).data;\n        if (isNOU(this.targetElement.getAttribute('aria-selected'))) {\n          /* istanbul ignore next */\n          this.parent.detailsviewModule.gridObj.selectRows([parseInt(this.targetElement.getAttribute('data-rowindex'), 10)]);\n        }\n        selected = true;\n        /* istanbul ignore next */\n      } else if (closest(target, '#' + this.parent.element.id + CLS.TREE_ID)) {\n        uid = closest(target, 'li').getAttribute('data-uid');\n        treeFolder = true;\n      }\n      /* istanbul ignore next */\n      if (selected) {\n        if (getValue('isFile', data) === true) {\n          this.setFileItem();\n        } else {\n          this.setFolderItem(false);\n        }\n        /* istanbul ignore next */\n      } else if (treeFolder) {\n        this.setFolderItem(true);\n        if (uid === this.parent.pathId[0]) {\n          this.disabledItems.push('Delete', 'Rename', 'Cut', 'Copy');\n        }\n        /* istanbul ignore next */\n        // eslint:disable-next-line\n      } else if (view === 'TreeView' || view === 'GridView' || view === 'LargeIcon') {\n        this.setLayoutItem(target);\n        /* istanbul ignore next */\n      } else {\n        args.cancel = true;\n      }\n    }\n    var pasteEle = select('#' + this.getMenuId('Paste'), this.contextMenu.element);\n    if (!args.cancel && !this.parent.enablePaste && pasteEle && !pasteEle.classList.contains('e-disabled')) {\n      this.disabledItems.push('Paste');\n    }\n    if (args.cancel) {\n      this.menuTarget = this.currentElement = null;\n      return;\n    }\n    this.contextMenu.dataBind();\n    var isSubMenu = false;\n    if (target.classList.contains(CLS.MENU_ITEM) || target.classList.contains(CLS.MENU_ICON) || target.classList.contains(CLS.SUBMENU_ICON)) {\n      isSubMenu = true;\n    }\n    this.menuItemData = isSubMenu ? this.menuItemData : this.getMenuItemData();\n    var eventArgs = {\n      fileDetails: [this.menuItemData],\n      element: args.element,\n      target: target,\n      items: isSubMenu ? args.items : this.contextMenu.items,\n      menuModule: this.contextMenu,\n      cancel: false,\n      menuType: this.menuType,\n      isSubMenu: isSubMenu\n    };\n    this.currentItems = eventArgs.items;\n    this.parent.trigger('menuOpen', eventArgs, function (menuOpenArgs) {\n      if (!isSubMenu) {\n        _this.contextMenu.dataBind();\n        _this.contextMenu.items = menuOpenArgs.items;\n        _this.contextMenu.dataBind();\n      }\n      _this.enableItems(_this.disabledItems, false, true);\n      args.cancel = menuOpenArgs.cancel;\n      if (menuOpenArgs.cancel) {\n        _this.menuTarget = _this.targetNodeElement = _this.currentElement = null;\n      }\n    });\n  };\n  ContextMenu.prototype.updateActiveModule = function () {\n    this.parent.activeModule = closest(this.menuTarget, '#' + this.parent.element.id + CLS.TREE_ID) ? 'navigationpane' : closest(this.menuTarget, '#' + this.parent.element.id + CLS.GRID_ID) ? 'detailsview' : closest(this.menuTarget, '#' + this.parent.element.id + CLS.LARGEICON_ID) ? 'largeiconsview' : this.parent.activeModule;\n  };\n  /* istanbul ignore next */\n  /**\n   *\n   * @param {Element} target - specifies the target element.\n   * @returns {string} -returns the target view.\n   * @hidden\n   */\n  ContextMenu.prototype.getTargetView = function (target) {\n    return target.classList.contains(CLS.TREE_VIEW) ? 'TreeView' : target.classList.contains(CLS.GRID_VIEW) ? 'GridView' : target.classList.contains(CLS.ICON_VIEW) ? 'LargeIcon' : target.classList.contains(CLS.LARGE_ICONS) ? 'LargeIcon' : '';\n  };\n  ContextMenu.prototype.getItemIndex = function (item) {\n    var itemId = this.getMenuId(item);\n    for (var i = 0; i < this.currentItems.length; i++) {\n      if (this.currentItems[i].id === itemId || this.currentItems[i].id === item) {\n        return i;\n      }\n    }\n    return -1;\n  };\n  ContextMenu.prototype.disableItem = function (items) {\n    if (items.length !== 0) {\n      this.disabledItems = this.disabledItems.concat(items);\n    }\n  };\n  ContextMenu.prototype.enableItems = function (items, enable, isUniqueId) {\n    for (var i = 0; i < items.length; i++) {\n      if (this.checkValidItem(items[i]) === 1) {\n        this.contextMenu.enableItems([this.getMenuId(items[i])], enable, isUniqueId);\n      } else if (this.checkValidItem(items[i]) === 2) {\n        this.contextMenu.enableItems([items[i]], enable, isUniqueId);\n      }\n    }\n  };\n  ContextMenu.prototype.setFolderItem = function (isTree) {\n    this.menuType = 'folder';\n    this.contextMenu.items = this.getItemData(this.parent.contextMenuSettings.folder.map(function (item) {\n      return item.trim();\n    }));\n    this.contextMenu.dataBind();\n    if (isTree) {\n      var selectedTreeNode = select('[data-uid=\"' + this.parent.navigationpaneModule.treeObj.selectedNodes[0] + '\"]', this.parent.navigationpaneModule.treeObj.element);\n      if (this.parent.pathNames[this.parent.pathNames.length - 1] === selectedTreeNode.querySelector('.e-list-text').innerHTML && this.parent.activeModule === 'navigationpane') {\n        this.disabledItems.push('Open');\n      }\n    } else if (this.parent.selectedItems.length !== 1 && this.parent.activeModule !== 'navigationpane') {\n      this.disabledItems.push('Rename', 'Paste');\n    }\n  };\n  ContextMenu.prototype.setFileItem = function () {\n    this.menuType = 'file';\n    this.contextMenu.items = this.getItemData(this.parent.contextMenuSettings.file.map(function (item) {\n      return item.trim();\n    }));\n    this.contextMenu.dataBind();\n    if (this.parent.selectedItems.length !== 1) {\n      this.disabledItems.push('Rename');\n    }\n  };\n  ContextMenu.prototype.setLayoutItem = function (target) {\n    this.menuType = 'layout';\n    this.contextMenu.items = this.getItemData(this.parent.contextMenuSettings.layout.map(function (item) {\n      return item.trim();\n    }));\n    this.contextMenu.dataBind();\n    if (!this.parent.allowMultiSelection || this.parent.view === 'LargeIcons' && closest(target, '#' + this.parent.element.id + CLS.LARGEICON_ID).getElementsByClassName(CLS.EMPTY).length !== 0 || this.parent.view === 'Details' && closest(target, '#' + this.parent.element.id + CLS.GRID_ID).getElementsByClassName(CLS.EMPTY).length !== 0) {\n      this.disabledItems.push('SelectAll');\n    }\n    if (this.parent.selectedNodes.length === 0) {\n      this.disabledItems.push('Paste');\n    }\n    this.contextMenu.dataBind();\n  };\n  ContextMenu.prototype.checkValidItem = function (nameEle) {\n    if (!isNOU(select('#' + this.getMenuId(nameEle), this.currentElement))) {\n      return 1;\n    } else if (!isNOU(select('#' + nameEle, this.currentElement))) {\n      return 2;\n    } else {\n      return -1;\n    }\n  };\n  // eslint-disable-next-line\n  ContextMenu.prototype.getMenuItemData = function () {\n    if (this.menuType === 'layout') {\n      return getPathObject(this.parent);\n    } else {\n      // eslint-disable-next-line\n      var args = {\n        target: this.menuTarget\n      };\n      this.parent.notify(events.menuItemData, args);\n      return this.parent.itemData[0];\n    }\n  };\n  /* istanbul ignore next */\n  ContextMenu.prototype.onSelect = function (args) {\n    var _this = this;\n    if (isNOU(args.item) || !args.item.id) {\n      return;\n    }\n    var itemText = args.item.id.substr((this.parent.element.id + '_cm_').length);\n    // eslint-disable-next-line\n    var details;\n    if (itemText === 'refresh' || itemText === 'newfolder' || itemText === 'upload') {\n      details = [getPathObject(this.parent)];\n      this.parent.itemData = details;\n    } else {\n      this.parent.notify(events.selectedData, {});\n      if (this.parent.activeModule === 'navigationpane' && itemText === 'open') {\n        details = [this.menuItemData];\n      } else {\n        details = this.parent.itemData;\n      }\n    }\n    var eventArgs = {\n      cancel: false,\n      element: args.element,\n      fileDetails: details,\n      item: args.item\n    };\n    this.parent.trigger('menuClick', eventArgs, function (menuClickArgs) {\n      var sItems;\n      if (!menuClickArgs.cancel) {\n        _this.isMenuItemClicked = true;\n        // eslint:disable-next-line\n        switch (itemText) {\n          case 'cut':\n            cutFiles(_this.parent);\n            break;\n          case 'copy':\n            copyFiles(_this.parent);\n            break;\n          case 'paste':\n            if (_this.menuType === 'folder') {\n              if (_this.parent.activeModule === 'largeiconsview' || _this.parent.activeModule === 'detailsview') {\n                _this.parent.folderPath = getFullPath(_this.parent, _this.menuItemData, _this.parent.path);\n              } else {\n                _this.parent.folderPath = '';\n              }\n            } else {\n              _this.parent.folderPath = '';\n            }\n            pasteHandler(_this.parent);\n            break;\n          case 'delete':\n            for (var j = 0; j < details.length; j++) {\n              if (!hasEditAccess(details[j])) {\n                createDeniedDialog(_this.parent, details[j], events.permissionEdit);\n                return;\n              }\n            }\n            createDialog(_this.parent, 'Delete');\n            break;\n          /* istanbul ignore next */\n          case 'download':\n            for (var i = 0; i < details.length; i++) {\n              if (!hasDownloadAccess(details[i])) {\n                createDeniedDialog(_this.parent, details[i], events.permissionDownload);\n                return;\n              }\n            }\n            if (_this.parent.activeModule === 'navigationpane') {\n              _this.parent.notify(events.downloadInit, {});\n            } else if (_this.parent.selectedItems.length > 0) {\n              Download(_this.parent, _this.parent.path, _this.parent.selectedItems);\n            }\n            break;\n          case 'rename':\n            if (!hasEditAccess(details[0])) {\n              createDeniedDialog(_this.parent, details[0], events.permissionEdit);\n            } else {\n              _this.parent.notify(events.renameInit, {});\n              createDialog(_this.parent, 'Rename');\n            }\n            break;\n          case 'selectall':\n            /* istanbul ignore next */\n            _this.parent.notify(events.selectAllInit, {});\n            break;\n          case 'refresh':\n            refresh(_this.parent);\n            break;\n          case 'open':\n            if (_this.parent.visitedItem && _this.parent.activeModule !== 'navigationpane') {\n              _this.parent.notify(events.openInit, {\n                target: _this.parent.visitedItem\n              });\n            } else if (_this.parent.activeModule === 'navigationpane') {\n              if (_this.parent.visitedItem) {\n                _this.parent.notify(events.openInit, {\n                  target: _this.parent.visitedItem\n                });\n              }\n              _this.parent.navigationpaneModule.openFileOnContextMenuClick(closest(_this.targetNodeElement, 'li'));\n            }\n            break;\n          case 'details':\n            _this.parent.notify(events.detailsInit, {});\n            sItems = _this.parent.selectedItems;\n            if (_this.parent.activeModule === 'navigationpane') {\n              sItems = [];\n              _this.parent.navigationpaneModule.openFileOnContextMenuClick(closest(_this.targetNodeElement, 'li'));\n            }\n            GetDetails(_this.parent, sItems, _this.parent.path, 'details');\n            break;\n          case 'newfolder':\n            createNewFolder(_this.parent);\n            break;\n          case 'upload':\n            uploadItem(_this.parent);\n            break;\n          /* istanbul ignore next */\n          case 'name':\n          /* istanbul ignore next */\n          // eslint-disable-next-line no-fallthrough\n          case 'size':\n          /* istanbul ignore next */\n          // eslint-disable-next-line no-fallthrough\n          case 'date':\n          /* istanbul ignore next */\n          // eslint-disable-next-line no-fallthrough\n          case 'ascending':\n          /* istanbul ignore next */\n          // eslint-disable-next-line no-fallthrough\n          case 'descending':\n            /* istanbul ignore next */\n            sortbyClickHandler(_this.parent, args);\n            break;\n          /* istanbul ignore next */\n          case 'none':\n            /* istanbul ignore next */\n            sortbyClickHandler(_this.parent, args);\n            break;\n          /* istanbul ignore next */\n          // eslint:disable-next-line\n          case 'largeiconsview':\n            updateLayout(_this.parent, 'LargeIcons');\n            break;\n          /* istanbul ignore next */\n          // eslint:disable-next-line\n          case 'detailsview':\n            updateLayout(_this.parent, 'Details');\n            break;\n        }\n      }\n    });\n  };\n  ContextMenu.prototype.onPropertyChanged = function (e) {\n    if (e.module !== this.getModuleName() && e.module !== 'common') {\n      /* istanbul ignore next */\n      return;\n    }\n    for (var _i = 0, _a = Object.keys(e.newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n      switch (prop) {\n        case 'cssClass':\n          this.contextMenu.cssClass = getCssClass(this.parent, CLS.ROOT_POPUP);\n          break;\n      }\n    }\n  };\n  ContextMenu.prototype.addEventListener = function () {\n    this.parent.on(events.destroy, this.destroy, this);\n    this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n    this.keyboardModule = new KeyboardEvents(this.contextMenu.element, {\n      keyAction: this.keyActionHandler.bind(this),\n      keyConfigs: this.keyConfigs,\n      eventName: 'keydown'\n    });\n  };\n  ContextMenu.prototype.removeEventListener = function () {\n    this.parent.off(events.destroy, this.destroy);\n    this.parent.off(events.modelChanged, this.onPropertyChanged);\n    this.keyboardModule.destroy();\n  };\n  ContextMenu.prototype.keyActionHandler = function (e) {\n    switch (e.action) {\n      case 'uparrow':\n      case 'downarrow':\n        e.preventDefault();\n    }\n  };\n  /**\n   * For internal use only - Get the module name.\n   *\n   * @returns {string} - returns the module name.\n   * @private\n   */\n  ContextMenu.prototype.getModuleName = function () {\n    return 'contextmenu';\n  };\n  ContextMenu.prototype.destroy = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.removeEventListener();\n    this.contextMenu.destroy();\n    this.targetElement = null;\n  };\n  /* istanbul ignore next */\n  ContextMenu.prototype.getItemData = function (data) {\n    var items = [];\n    for (var i = 0; i < data.length; i++) {\n      var item = void 0;\n      var itemId = this.getMenuId(data[i]);\n      var itemText = getLocaleText(this.parent, data[i]);\n      switch (data[i]) {\n        case '|':\n          item = {\n            separator: true\n          };\n          break;\n        case 'Open':\n          item = {\n            id: itemId,\n            text: itemText,\n            iconCss: CLS.ICON_OPEN\n          };\n          break;\n        case 'Upload':\n          item = {\n            id: itemId,\n            text: itemText,\n            iconCss: CLS.ICON_UPLOAD\n          };\n          break;\n        case 'Cut':\n          item = {\n            id: itemId,\n            text: itemText,\n            iconCss: CLS.ICON_CUT\n          };\n          break;\n        case 'Copy':\n          item = {\n            id: itemId,\n            text: itemText,\n            iconCss: CLS.ICON_COPY\n          };\n          break;\n        case 'Paste':\n          item = {\n            id: itemId,\n            text: itemText,\n            iconCss: CLS.ICON_PASTE\n          };\n          break;\n        case 'Delete':\n          item = {\n            id: itemId,\n            text: itemText,\n            iconCss: CLS.ICON_DELETE\n          };\n          break;\n        case 'Rename':\n          item = {\n            id: itemId,\n            text: itemText,\n            iconCss: CLS.ICON_RENAME\n          };\n          break;\n        case 'NewFolder':\n          item = {\n            id: itemId,\n            text: itemText,\n            iconCss: CLS.ICON_NEWFOLDER\n          };\n          break;\n        case 'Details':\n          item = {\n            id: itemId,\n            text: itemText,\n            iconCss: CLS.ICON_DETAILS\n          };\n          break;\n        case 'SortBy':\n          item = {\n            id: itemId,\n            text: itemText,\n            iconCss: CLS.ICON_SHORTBY,\n            items: [{\n              id: this.getMenuId('Name'),\n              text: getLocaleText(this.parent, 'Name'),\n              iconCss: this.parent.sortBy === 'name' ? CLS.TB_OPTION_DOT : null\n            }, {\n              id: this.getMenuId('Size'),\n              text: getLocaleText(this.parent, 'Size'),\n              iconCss: this.parent.sortBy === 'size' ? CLS.TB_OPTION_DOT : null\n            }, {\n              id: this.getMenuId('Date'),\n              text: getLocaleText(this.parent, 'DateModified'),\n              iconCss: this.parent.sortBy === '_fm_modified' ? CLS.TB_OPTION_DOT : null\n            }, {\n              separator: true\n            }, {\n              id: this.getMenuId('Ascending'),\n              text: getLocaleText(this.parent, 'Ascending'),\n              iconCss: this.parent.sortOrder === 'Ascending' ? CLS.TB_OPTION_TICK : null\n            }, {\n              id: this.getMenuId('Descending'),\n              text: getLocaleText(this.parent, 'Descending'),\n              iconCss: this.parent.sortOrder === 'Descending' ? CLS.TB_OPTION_TICK : null\n            }, {\n              id: this.getMenuId('None'),\n              text: getLocaleText(this.parent, 'None'),\n              iconCss: this.parent.sortOrder === 'None' ? CLS.TB_OPTION_TICK : null\n            }]\n          };\n          break;\n        /* istanbul ignore next */\n        case 'View':\n          item = {\n            id: itemId,\n            text: itemText,\n            iconCss: this.parent.view === 'Details' ? CLS.ICON_GRID : CLS.ICON_LARGE,\n            items: [{\n              id: this.getMenuId('largeiconsview'),\n              text: getLocaleText(this.parent, 'View-LargeIcons'),\n              iconCss: this.parent.view === 'Details' ? null : CLS.TB_OPTION_TICK\n            }, {\n              id: this.getMenuId('detailsview'),\n              text: getLocaleText(this.parent, 'View-Details'),\n              iconCss: this.parent.view === 'Details' ? CLS.TB_OPTION_TICK : null\n            }]\n          };\n          break;\n        case 'Refresh':\n          item = {\n            id: itemId,\n            text: itemText,\n            iconCss: CLS.ICON_REFRESH\n          };\n          break;\n        case 'SelectAll':\n          item = {\n            id: itemId,\n            text: itemText,\n            iconCss: CLS.ICON_SELECTALL\n          };\n          break;\n        /* istanbul ignore next */\n        case 'Download':\n          item = {\n            id: itemId,\n            text: itemText,\n            iconCss: CLS.ICON_DOWNLOAD\n          };\n          break;\n        /* istanbul ignore next */\n        default:\n          item = {\n            id: itemId,\n            text: itemText\n          };\n          break;\n      }\n      items.push(item);\n    }\n    return items;\n  };\n  ContextMenu.prototype.getMenuId = function (id) {\n    return this.parent.element.id + '_cm_' + id.toLowerCase();\n  };\n  return ContextMenu;\n}();\nexport { ContextMenu };","map":{"version":3,"names":["ContextMenu","Menu","isNullOrUndefined","isNOU","createElement","closest","KeyboardEvents","getValue","select","Download","GetDetails","createDialog","cutFiles","copyFiles","refresh","getPathObject","getLocaleText","updateLayout","getFullPath","getCssClass","sortbyClickHandler","pasteHandler","createDeniedDialog","createNewFolder","uploadItem","hasEditAccess","hasDownloadAccess","events","CLS","parent","isMenuItemClicked","currentItems","currentElement","disabledItems","render","prototype","keyConfigs","downarrow","uparrow","contextMenu","enableRtl","locale","target","element","id","enableHtmlSanitizer","beforeItemRender","onBeforeItemRender","bind","onSelect","beforeOpen","onBeforeOpen","beforeClose","onBeforeClose","cssClass","ROOT_POPUP","isStringTemplate","appendTo","CONTEXT_MENU_ID","addEventListener","args","item","getMenuId","iconSpan","insertBefore","view","childNodes","setAttribute","ICON_LARGE","MENU_ICON","ICON_GRID","menuTarget","pathId","length","activeModule","pop","parentKey","itemKeys","Object","keys","feParent","_i","itemKeys_1","itemData","pathNames","indexOf","name","push","_fm_id","navigationpaneModule","treeObj","selectedNodes","_this","selected","uid","data","treeFolder","event","targetNodeElement","classList","contains","activeNode","getElementsByClassName","FULLROW","targetElement","enableVirtualization","parentElement","getTargetView","updateActiveModule","TREE_VIEW","BREADCRUMBBAR_ID","TOOLBAR_ID","cancel","setLayoutItem","EMPTY","MENU_ITEM","SUBMENU_ICON","TREE_ID","eveArgs","ctrlKey","shiftKey","largeiconsviewModule","doSelection","visitedData","getAttribute","detailsviewModule","gridObj","getRowObjectFromUID","selectRows","parseInt","setFileItem","setFolderItem","pasteEle","enablePaste","dataBind","isSubMenu","menuItemData","getMenuItemData","eventArgs","fileDetails","items","menuModule","menuType","trigger","menuOpenArgs","enableItems","GRID_ID","LARGEICON_ID","GRID_VIEW","ICON_VIEW","LARGE_ICONS","getItemIndex","itemId","i","disableItem","concat","enable","isUniqueId","checkValidItem","isTree","getItemData","contextMenuSettings","folder","map","trim","selectedTreeNode","querySelector","innerHTML","selectedItems","file","layout","allowMultiSelection","nameEle","notify","itemText","substr","details","selectedData","menuClickArgs","sItems","folderPath","path","j","permissionEdit","permissionDownload","downloadInit","renameInit","selectAllInit","visitedItem","openInit","openFileOnContextMenuClick","detailsInit","onPropertyChanged","e","module","getModuleName","_a","newProp","prop","on","destroy","modelChanged","keyboardModule","keyAction","keyActionHandler","eventName","removeEventListener","off","action","preventDefault","isDestroyed","separator","text","iconCss","ICON_OPEN","ICON_UPLOAD","ICON_CUT","ICON_COPY","ICON_PASTE","ICON_DELETE","ICON_RENAME","ICON_NEWFOLDER","ICON_DETAILS","ICON_SHORTBY","sortBy","TB_OPTION_DOT","sortOrder","TB_OPTION_TICK","ICON_REFRESH","ICON_SELECTALL","ICON_DOWNLOAD","toLowerCase"],"sources":["/Users/saleem/Desktop/KClient/Web App/Ver_3.6/User Interface/website_Source files/node_modules/@syncfusion/ej2-filemanager/src/file-manager/pop-up/context-menu.js"],"sourcesContent":["import { ContextMenu as Menu } from '@syncfusion/ej2-navigations';\nimport { isNullOrUndefined as isNOU, createElement, closest, KeyboardEvents } from '@syncfusion/ej2-base';\nimport { getValue, select } from '@syncfusion/ej2-base';\nimport { Download, GetDetails } from './../common/operations';\nimport { createDialog } from './dialog';\nimport { cutFiles, copyFiles, refresh, getPathObject, getLocaleText, updateLayout, getFullPath } from './../common/utility';\nimport { getCssClass, sortbyClickHandler, pasteHandler } from './../common/utility';\nimport { createDeniedDialog, createNewFolder, uploadItem, hasEditAccess, hasDownloadAccess } from './../common/utility';\nimport * as events from './../base/constant';\nimport * as CLS from '../base/classes';\n/**\n * ContextMenu module\n */\nvar ContextMenu = /** @class */ (function () {\n    /**\n     * Constructor for the ContextMenu module\n     *\n     * @param {IFileManager} parent - Specifies the parent element.\n     * @hidden\n     */\n    function ContextMenu(parent) {\n        this.isMenuItemClicked = false;\n        this.currentItems = [];\n        this.currentElement = null;\n        this.disabledItems = [];\n        this.parent = parent;\n        this.render();\n    }\n    ContextMenu.prototype.render = function () {\n        this.keyConfigs = {\n            downarrow: 'downarrow',\n            uparrow: 'uparrown'\n        };\n        this.contextMenu = new Menu({\n            enableRtl: this.parent.enableRtl,\n            locale: this.parent.locale,\n            target: '#' + this.parent.element.id,\n            enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n            beforeItemRender: this.onBeforeItemRender.bind(this),\n            select: this.onSelect.bind(this),\n            beforeOpen: this.onBeforeOpen.bind(this),\n            beforeClose: this.onBeforeClose.bind(this),\n            cssClass: getCssClass(this.parent, CLS.ROOT_POPUP)\n        });\n        this.contextMenu.isStringTemplate = true;\n        this.contextMenu.appendTo('#' + this.parent.element.id + CLS.CONTEXT_MENU_ID);\n        this.addEventListener();\n    };\n    /* istanbul ignore next */\n    ContextMenu.prototype.onBeforeItemRender = function (args) {\n        if (args.item.id === this.getMenuId('largeiconsview')) {\n            var iconSpan = createElement('span');\n            var element = args.element;\n            element.insertBefore(iconSpan, this.parent.view === 'LargeIcons' ? element.childNodes[1] : element.childNodes[0]);\n            iconSpan.setAttribute('class', CLS.ICON_LARGE + ' ' + CLS.MENU_ICON);\n        }\n        if (args.item.id === this.getMenuId('detailsview')) {\n            var iconSpan = createElement('span');\n            var element = args.element;\n            element.insertBefore(iconSpan, this.parent.view === 'Details' ? element.childNodes[1] : element.childNodes[0]);\n            iconSpan.setAttribute('class', CLS.ICON_GRID + ' ' + CLS.MENU_ICON);\n        }\n    };\n    ContextMenu.prototype.onBeforeClose = function () {\n        this.menuTarget = null;\n        if (!this.isMenuItemClicked && this.parent.pathId.length > 1 && this.parent.activeModule == 'navigationpane') {\n            this.parent.pathId.pop();\n            var parentKey = [];\n            var itemKeys = Object.keys(this.parent.feParent);\n            for (var _i = 0, itemKeys_1 = itemKeys; _i < itemKeys_1.length; _i++) {\n                var item = itemKeys_1[_i];\n                var itemData = getValue(item, this.parent.feParent);\n                if (this.parent.pathNames.indexOf(itemData.name) !== -1) {\n                    parentKey.push(itemData._fm_id);\n                }\n            }\n            this.parent.pathId.push(parentKey[parentKey.length - 1]);\n            this.parent.navigationpaneModule.treeObj.selectedNodes = [this.parent.pathId[this.parent.pathId.length - 1]];\n        }\n        this.isMenuItemClicked = false;\n    };\n    /* istanbul ignore next */\n    ContextMenu.prototype.onBeforeOpen = function (args) {\n        var _this = this;\n        this.disabledItems = [];\n        var selected = false;\n        var uid;\n        // eslint-disable-next-line\n        var data;\n        var treeFolder = false;\n        var target = args.event.target;\n        this.menuTarget = this.targetNodeElement = target;\n        this.currentElement = args.element;\n        if (target.classList.contains('e-spinner-pane')) {\n            target = this.parent.navigationpaneModule.activeNode.getElementsByClassName(CLS.FULLROW)[0];\n            this.menuTarget = this.targetNodeElement = target;\n        }\n        this.targetElement = this.parent.view === 'Details' ? closest(target, 'tr.e-row') : target;\n        if (this.parent.enableVirtualization && (target.classList.contains('e-virtual-bottom') || target.classList.contains('e-virtualtable'))) {\n            target = target.parentElement.closest(\"div\");\n        }\n        var view = this.getTargetView(target);\n        this.updateActiveModule();\n        /* istanbul ignore next */\n        if (target.classList.contains(CLS.TREE_VIEW) || closest(target, 'th') ||\n            (closest(target, '#' + this.parent.element.id + CLS.BREADCRUMBBAR_ID)) ||\n            (closest(target, '#' + this.parent.element.id + CLS.TOOLBAR_ID))) {\n            args.cancel = true;\n            // eslint:disable-next-line\n        }\n        else if (!(this.parent.view === 'LargeIcons') && this.targetElement &&\n            this.targetElement.classList.contains('e-emptyrow')) {\n            this.setLayoutItem(target);\n            /* istanbul ignore next */\n        }\n        else if (closest(target, '.' + CLS.EMPTY)) {\n            this.setLayoutItem(target);\n            // eslint:disable-next-line\n        }\n        else if (!target.classList.contains(CLS.MENU_ITEM) &&\n            !target.classList.contains(CLS.MENU_ICON) && !target.classList.contains(CLS.SUBMENU_ICON)) {\n            /* istanbul ignore next */\n            // eslint:disable-next-line\n            if (this.parent.view === 'LargeIcons' && !isNOU(closest(target, 'li')) && !closest(target, '#' + this.parent.element.id + CLS.TREE_ID)) {\n                var eveArgs = { ctrlKey: true, shiftKey: true };\n                if (!closest(target, 'li').classList.contains('e-active')) {\n                    this.parent.largeiconsviewModule.doSelection(target, eveArgs);\n                }\n                // eslint-disable-next-line\n                data = this.parent.visitedData;\n                selected = true;\n            }\n            else if (!isNOU(closest(target, 'tr.e-row'))) {\n                uid = this.targetElement.getAttribute('data-uid');\n                // eslint-disable-next-line\n                data = this.parent.detailsviewModule.gridObj.getRowObjectFromUID(uid).data;\n                if (isNOU(this.targetElement.getAttribute('aria-selected'))) {\n                    /* istanbul ignore next */\n                    this.parent.detailsviewModule.gridObj.selectRows([parseInt(this.targetElement.getAttribute('data-rowindex'), 10)]);\n                }\n                selected = true;\n                /* istanbul ignore next */\n            }\n            else if (closest(target, '#' + this.parent.element.id + CLS.TREE_ID)) {\n                uid = closest(target, 'li').getAttribute('data-uid');\n                treeFolder = true;\n            }\n            /* istanbul ignore next */\n            if (selected) {\n                if (getValue('isFile', data) === true) {\n                    this.setFileItem();\n                }\n                else {\n                    this.setFolderItem(false);\n                }\n                /* istanbul ignore next */\n            }\n            else if (treeFolder) {\n                this.setFolderItem(true);\n                if (uid === this.parent.pathId[0]) {\n                    this.disabledItems.push('Delete', 'Rename', 'Cut', 'Copy');\n                }\n                /* istanbul ignore next */\n                // eslint:disable-next-line\n            }\n            else if (view === 'TreeView' || view === 'GridView' || view === 'LargeIcon') {\n                this.setLayoutItem(target);\n                /* istanbul ignore next */\n            }\n            else {\n                args.cancel = true;\n            }\n        }\n        var pasteEle = select('#' + this.getMenuId('Paste'), this.contextMenu.element);\n        if (!args.cancel && !this.parent.enablePaste &&\n            pasteEle && !pasteEle.classList.contains('e-disabled')) {\n            this.disabledItems.push('Paste');\n        }\n        if (args.cancel) {\n            this.menuTarget = this.currentElement = null;\n            return;\n        }\n        this.contextMenu.dataBind();\n        var isSubMenu = false;\n        if (target.classList.contains(CLS.MENU_ITEM) ||\n            target.classList.contains(CLS.MENU_ICON) || target.classList.contains(CLS.SUBMENU_ICON)) {\n            isSubMenu = true;\n        }\n        this.menuItemData = isSubMenu ? this.menuItemData : this.getMenuItemData();\n        var eventArgs = {\n            fileDetails: [this.menuItemData],\n            element: args.element,\n            target: target,\n            items: isSubMenu ? args.items : this.contextMenu.items,\n            menuModule: this.contextMenu,\n            cancel: false,\n            menuType: this.menuType,\n            isSubMenu: isSubMenu\n        };\n        this.currentItems = eventArgs.items;\n        this.parent.trigger('menuOpen', eventArgs, function (menuOpenArgs) {\n            if (!isSubMenu) {\n                _this.contextMenu.dataBind();\n                _this.contextMenu.items = menuOpenArgs.items;\n                _this.contextMenu.dataBind();\n            }\n            _this.enableItems(_this.disabledItems, false, true);\n            args.cancel = menuOpenArgs.cancel;\n            if (menuOpenArgs.cancel) {\n                _this.menuTarget = _this.targetNodeElement = _this.currentElement = null;\n            }\n        });\n    };\n    ContextMenu.prototype.updateActiveModule = function () {\n        this.parent.activeModule = closest(this.menuTarget, '#' + this.parent.element.id + CLS.TREE_ID) ?\n            'navigationpane' : closest(this.menuTarget, '#' + this.parent.element.id + CLS.GRID_ID) ?\n            'detailsview' : closest(this.menuTarget, '#' + this.parent.element.id + CLS.LARGEICON_ID) ?\n            'largeiconsview' : this.parent.activeModule;\n    };\n    /* istanbul ignore next */\n    /**\n     *\n     * @param {Element} target - specifies the target element.\n     * @returns {string} -returns the target view.\n     * @hidden\n     */\n    ContextMenu.prototype.getTargetView = function (target) {\n        return target.classList.contains(CLS.TREE_VIEW) ?\n            'TreeView' : target.classList.contains(CLS.GRID_VIEW) ?\n            'GridView' : target.classList.contains(CLS.ICON_VIEW) ?\n            'LargeIcon' : target.classList.contains(CLS.LARGE_ICONS) ?\n            'LargeIcon' : '';\n    };\n    ContextMenu.prototype.getItemIndex = function (item) {\n        var itemId = this.getMenuId(item);\n        for (var i = 0; i < this.currentItems.length; i++) {\n            if ((this.currentItems[i].id === itemId) || (this.currentItems[i].id === item)) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    ContextMenu.prototype.disableItem = function (items) {\n        if (items.length !== 0) {\n            this.disabledItems = this.disabledItems.concat(items);\n        }\n    };\n    ContextMenu.prototype.enableItems = function (items, enable, isUniqueId) {\n        for (var i = 0; i < items.length; i++) {\n            if (this.checkValidItem(items[i]) === 1) {\n                this.contextMenu.enableItems([this.getMenuId(items[i])], enable, isUniqueId);\n            }\n            else if (this.checkValidItem(items[i]) === 2) {\n                this.contextMenu.enableItems([items[i]], enable, isUniqueId);\n            }\n        }\n    };\n    ContextMenu.prototype.setFolderItem = function (isTree) {\n        this.menuType = 'folder';\n        this.contextMenu.items = this.getItemData(this.parent.contextMenuSettings.folder.map(function (item) { return item.trim(); }));\n        this.contextMenu.dataBind();\n        if (isTree) {\n            var selectedTreeNode = select('[data-uid=\"' + this.parent.navigationpaneModule.treeObj.selectedNodes[0] + '\"]', this.parent.navigationpaneModule.treeObj.element);\n            if (this.parent.pathNames[this.parent.pathNames.length - 1] === selectedTreeNode.querySelector('.e-list-text').innerHTML && this.parent.activeModule === 'navigationpane') {\n                this.disabledItems.push('Open');\n            }\n        }\n        else if (this.parent.selectedItems.length !== 1 && this.parent.activeModule !== 'navigationpane') {\n            this.disabledItems.push('Rename', 'Paste');\n        }\n    };\n    ContextMenu.prototype.setFileItem = function () {\n        this.menuType = 'file';\n        this.contextMenu.items = this.getItemData(this.parent.contextMenuSettings.file.map(function (item) { return item.trim(); }));\n        this.contextMenu.dataBind();\n        if (this.parent.selectedItems.length !== 1) {\n            this.disabledItems.push('Rename');\n        }\n    };\n    ContextMenu.prototype.setLayoutItem = function (target) {\n        this.menuType = 'layout';\n        this.contextMenu.items = this.getItemData(this.parent.contextMenuSettings.layout.map(function (item) { return item.trim(); }));\n        this.contextMenu.dataBind();\n        if (!this.parent.allowMultiSelection || ((this.parent.view === 'LargeIcons' &&\n            (closest(target, '#' + this.parent.element.id + CLS.LARGEICON_ID).getElementsByClassName(CLS.EMPTY).length !== 0))\n            || (this.parent.view === 'Details' &&\n                (closest(target, '#' + this.parent.element.id + CLS.GRID_ID).getElementsByClassName(CLS.EMPTY).length !== 0)))) {\n            this.disabledItems.push('SelectAll');\n        }\n        if (this.parent.selectedNodes.length === 0) {\n            this.disabledItems.push('Paste');\n        }\n        this.contextMenu.dataBind();\n    };\n    ContextMenu.prototype.checkValidItem = function (nameEle) {\n        if (!isNOU(select('#' + this.getMenuId(nameEle), this.currentElement))) {\n            return 1;\n        }\n        else if (!isNOU(select('#' + nameEle, this.currentElement))) {\n            return 2;\n        }\n        else {\n            return -1;\n        }\n    };\n    // eslint-disable-next-line\n    ContextMenu.prototype.getMenuItemData = function () {\n        if (this.menuType === 'layout') {\n            return getPathObject(this.parent);\n        }\n        else {\n            // eslint-disable-next-line\n            var args = { target: this.menuTarget };\n            this.parent.notify(events.menuItemData, args);\n            return this.parent.itemData[0];\n        }\n    };\n    /* istanbul ignore next */\n    ContextMenu.prototype.onSelect = function (args) {\n        var _this = this;\n        if (isNOU(args.item) || !args.item.id) {\n            return;\n        }\n        var itemText = args.item.id.substr((this.parent.element.id + '_cm_').length);\n        // eslint-disable-next-line\n        var details;\n        if (itemText === 'refresh' || itemText === 'newfolder' || itemText === 'upload') {\n            details = [getPathObject(this.parent)];\n            this.parent.itemData = details;\n        }\n        else {\n            this.parent.notify(events.selectedData, {});\n            if (this.parent.activeModule === 'navigationpane' && itemText === 'open') {\n                details = [this.menuItemData];\n            }\n            else {\n                details = this.parent.itemData;\n            }\n        }\n        var eventArgs = {\n            cancel: false,\n            element: args.element,\n            fileDetails: details,\n            item: args.item\n        };\n        this.parent.trigger('menuClick', eventArgs, function (menuClickArgs) {\n            var sItems;\n            if (!menuClickArgs.cancel) {\n                _this.isMenuItemClicked = true;\n                // eslint:disable-next-line\n                switch (itemText) {\n                    case 'cut':\n                        cutFiles(_this.parent);\n                        break;\n                    case 'copy':\n                        copyFiles(_this.parent);\n                        break;\n                    case 'paste':\n                        if (_this.menuType === 'folder') {\n                            if ((_this.parent.activeModule === 'largeiconsview') || (_this.parent.activeModule === 'detailsview')) {\n                                _this.parent.folderPath = getFullPath(_this.parent, _this.menuItemData, _this.parent.path);\n                            }\n                            else {\n                                _this.parent.folderPath = '';\n                            }\n                        }\n                        else {\n                            _this.parent.folderPath = '';\n                        }\n                        pasteHandler(_this.parent);\n                        break;\n                    case 'delete':\n                        for (var j = 0; j < details.length; j++) {\n                            if (!hasEditAccess(details[j])) {\n                                createDeniedDialog(_this.parent, details[j], events.permissionEdit);\n                                return;\n                            }\n                        }\n                        createDialog(_this.parent, 'Delete');\n                        break;\n                    /* istanbul ignore next */\n                    case 'download':\n                        for (var i = 0; i < details.length; i++) {\n                            if (!hasDownloadAccess(details[i])) {\n                                createDeniedDialog(_this.parent, details[i], events.permissionDownload);\n                                return;\n                            }\n                        }\n                        if (_this.parent.activeModule === 'navigationpane') {\n                            _this.parent.notify(events.downloadInit, {});\n                        }\n                        else if (_this.parent.selectedItems.length > 0) {\n                            Download(_this.parent, _this.parent.path, _this.parent.selectedItems);\n                        }\n                        break;\n                    case 'rename':\n                        if (!hasEditAccess(details[0])) {\n                            createDeniedDialog(_this.parent, details[0], events.permissionEdit);\n                        }\n                        else {\n                            _this.parent.notify(events.renameInit, {});\n                            createDialog(_this.parent, 'Rename');\n                        }\n                        break;\n                    case 'selectall':\n                        /* istanbul ignore next */\n                        _this.parent.notify(events.selectAllInit, {});\n                        break;\n                    case 'refresh':\n                        refresh(_this.parent);\n                        break;\n                    case 'open':\n                        if (_this.parent.visitedItem && _this.parent.activeModule !== 'navigationpane') {\n                            _this.parent.notify(events.openInit, { target: _this.parent.visitedItem });\n                        }\n                        else if (_this.parent.activeModule === 'navigationpane') {\n                            if (_this.parent.visitedItem) {\n                                _this.parent.notify(events.openInit, { target: _this.parent.visitedItem });\n                            }\n                            _this.parent.navigationpaneModule.openFileOnContextMenuClick(closest(_this.targetNodeElement, 'li'));\n                        }\n                        break;\n                    case 'details':\n                        _this.parent.notify(events.detailsInit, {});\n                        sItems = _this.parent.selectedItems;\n                        if (_this.parent.activeModule === 'navigationpane') {\n                            sItems = [];\n                            _this.parent.navigationpaneModule.openFileOnContextMenuClick(closest(_this.targetNodeElement, 'li'));\n                        }\n                        GetDetails(_this.parent, sItems, _this.parent.path, 'details');\n                        break;\n                    case 'newfolder':\n                        createNewFolder(_this.parent);\n                        break;\n                    case 'upload':\n                        uploadItem(_this.parent);\n                        break;\n                    /* istanbul ignore next */\n                    case 'name':\n                    /* istanbul ignore next */\n                    // eslint-disable-next-line no-fallthrough\n                    case 'size':\n                    /* istanbul ignore next */\n                    // eslint-disable-next-line no-fallthrough\n                    case 'date':\n                    /* istanbul ignore next */\n                    // eslint-disable-next-line no-fallthrough\n                    case 'ascending':\n                    /* istanbul ignore next */\n                    // eslint-disable-next-line no-fallthrough\n                    case 'descending':\n                        /* istanbul ignore next */\n                        sortbyClickHandler(_this.parent, args);\n                        break;\n                    /* istanbul ignore next */\n                    case 'none':\n                        /* istanbul ignore next */\n                        sortbyClickHandler(_this.parent, args);\n                        break;\n                    /* istanbul ignore next */\n                    // eslint:disable-next-line\n                    case 'largeiconsview':\n                        updateLayout(_this.parent, 'LargeIcons');\n                        break;\n                    /* istanbul ignore next */\n                    // eslint:disable-next-line\n                    case 'detailsview':\n                        updateLayout(_this.parent, 'Details');\n                        break;\n                }\n            }\n        });\n    };\n    ContextMenu.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName() && e.module !== 'common') {\n            /* istanbul ignore next */\n            return;\n        }\n        for (var _i = 0, _a = Object.keys(e.newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'cssClass':\n                    this.contextMenu.cssClass = getCssClass(this.parent, CLS.ROOT_POPUP);\n                    break;\n            }\n        }\n    };\n    ContextMenu.prototype.addEventListener = function () {\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n        this.keyboardModule = new KeyboardEvents(this.contextMenu.element, {\n            keyAction: this.keyActionHandler.bind(this),\n            keyConfigs: this.keyConfigs,\n            eventName: 'keydown'\n        });\n    };\n    ContextMenu.prototype.removeEventListener = function () {\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.modelChanged, this.onPropertyChanged);\n        this.keyboardModule.destroy();\n    };\n    ContextMenu.prototype.keyActionHandler = function (e) {\n        switch (e.action) {\n            case 'uparrow':\n            case 'downarrow':\n                e.preventDefault();\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} - returns the module name.\n     * @private\n     */\n    ContextMenu.prototype.getModuleName = function () {\n        return 'contextmenu';\n    };\n    ContextMenu.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n        this.contextMenu.destroy();\n        this.targetElement = null;\n    };\n    /* istanbul ignore next */\n    ContextMenu.prototype.getItemData = function (data) {\n        var items = [];\n        for (var i = 0; i < data.length; i++) {\n            var item = void 0;\n            var itemId = this.getMenuId(data[i]);\n            var itemText = getLocaleText(this.parent, data[i]);\n            switch (data[i]) {\n                case '|':\n                    item = { separator: true };\n                    break;\n                case 'Open':\n                    item = { id: itemId, text: itemText, iconCss: CLS.ICON_OPEN };\n                    break;\n                case 'Upload':\n                    item = { id: itemId, text: itemText, iconCss: CLS.ICON_UPLOAD };\n                    break;\n                case 'Cut':\n                    item = { id: itemId, text: itemText, iconCss: CLS.ICON_CUT };\n                    break;\n                case 'Copy':\n                    item = { id: itemId, text: itemText, iconCss: CLS.ICON_COPY };\n                    break;\n                case 'Paste':\n                    item = { id: itemId, text: itemText, iconCss: CLS.ICON_PASTE };\n                    break;\n                case 'Delete':\n                    item = { id: itemId, text: itemText, iconCss: CLS.ICON_DELETE };\n                    break;\n                case 'Rename':\n                    item = { id: itemId, text: itemText, iconCss: CLS.ICON_RENAME };\n                    break;\n                case 'NewFolder':\n                    item = { id: itemId, text: itemText, iconCss: CLS.ICON_NEWFOLDER };\n                    break;\n                case 'Details':\n                    item = { id: itemId, text: itemText, iconCss: CLS.ICON_DETAILS };\n                    break;\n                case 'SortBy':\n                    item = {\n                        id: itemId, text: itemText, iconCss: CLS.ICON_SHORTBY,\n                        items: [\n                            {\n                                id: this.getMenuId('Name'), text: getLocaleText(this.parent, 'Name'),\n                                iconCss: this.parent.sortBy === 'name' ? CLS.TB_OPTION_DOT : null\n                            },\n                            {\n                                id: this.getMenuId('Size'), text: getLocaleText(this.parent, 'Size'),\n                                iconCss: this.parent.sortBy === 'size' ? CLS.TB_OPTION_DOT : null\n                            },\n                            {\n                                id: this.getMenuId('Date'), text: getLocaleText(this.parent, 'DateModified'),\n                                iconCss: this.parent.sortBy === '_fm_modified' ? CLS.TB_OPTION_DOT : null\n                            },\n                            { separator: true },\n                            {\n                                id: this.getMenuId('Ascending'), text: getLocaleText(this.parent, 'Ascending'),\n                                iconCss: this.parent.sortOrder === 'Ascending' ? CLS.TB_OPTION_TICK : null\n                            },\n                            {\n                                id: this.getMenuId('Descending'), text: getLocaleText(this.parent, 'Descending'),\n                                iconCss: this.parent.sortOrder === 'Descending' ? CLS.TB_OPTION_TICK : null\n                            },\n                            {\n                                id: this.getMenuId('None'), text: getLocaleText(this.parent, 'None'),\n                                iconCss: this.parent.sortOrder === 'None' ? CLS.TB_OPTION_TICK : null\n                            }\n                        ]\n                    };\n                    break;\n                /* istanbul ignore next */\n                case 'View':\n                    item = {\n                        id: itemId, text: itemText, iconCss: this.parent.view === 'Details' ? CLS.ICON_GRID : CLS.ICON_LARGE,\n                        items: [\n                            {\n                                id: this.getMenuId('largeiconsview'), text: getLocaleText(this.parent, 'View-LargeIcons'),\n                                iconCss: this.parent.view === 'Details' ? null : CLS.TB_OPTION_TICK\n                            },\n                            {\n                                id: this.getMenuId('detailsview'), text: getLocaleText(this.parent, 'View-Details'),\n                                iconCss: this.parent.view === 'Details' ? CLS.TB_OPTION_TICK : null\n                            }\n                        ]\n                    };\n                    break;\n                case 'Refresh':\n                    item = { id: itemId, text: itemText, iconCss: CLS.ICON_REFRESH };\n                    break;\n                case 'SelectAll':\n                    item = { id: itemId, text: itemText, iconCss: CLS.ICON_SELECTALL };\n                    break;\n                /* istanbul ignore next */\n                case 'Download':\n                    item = { id: itemId, text: itemText, iconCss: CLS.ICON_DOWNLOAD };\n                    break;\n                /* istanbul ignore next */\n                default:\n                    item = { id: itemId, text: itemText };\n                    break;\n            }\n            items.push(item);\n        }\n        return items;\n    };\n    ContextMenu.prototype.getMenuId = function (id) {\n        return this.parent.element.id + '_cm_' + id.toLowerCase();\n    };\n    return ContextMenu;\n}());\nexport { ContextMenu };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}