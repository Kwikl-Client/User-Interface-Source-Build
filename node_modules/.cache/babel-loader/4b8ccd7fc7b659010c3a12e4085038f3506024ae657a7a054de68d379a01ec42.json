{"ast":null,"code":"import { remove, resetBlazorTemplate, blazorTemplates, getValue } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { DataManager, Query, Deferred, Predicate, DataUtil } from '@syncfusion/ej2-data';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { RenderType, CellType } from '../base/enum';\nimport { Data } from '../actions/data';\nimport { Column } from '../models/column';\nimport { Row } from '../models/row';\nimport { Cell } from '../models/cell';\nimport * as events from '../base/constant';\nimport { prepareColumns, setFormatter, isGroupAdaptive, getDatePredicate, getObject, clearReactVueTemplates } from '../base/util';\nimport { ContentRender } from '../renderer/content-renderer';\nimport { HeaderRender } from '../renderer/header-renderer';\nimport { CellRenderer } from '../renderer/cell-renderer';\nimport { HeaderCellRenderer } from '../renderer/header-cell-renderer';\nimport { StackedHeaderCellRenderer } from '../renderer/stacked-cell-renderer';\nimport { IndentCellRenderer } from '../renderer/indent-cell-renderer';\nimport { GroupCaptionCellRenderer, GroupCaptionEmptyCellRenderer } from '../renderer/caption-cell-renderer';\nimport { ExpandCellRenderer } from '../renderer/expand-cell-renderer';\nimport { HeaderIndentCellRenderer } from '../renderer/header-indent-renderer';\nimport { DetailHeaderIndentCellRenderer } from '../renderer/detail-header-indent-renderer';\nimport { DetailExpandCellRenderer } from '../renderer/detail-expand-cell-renderer';\nimport { RowDragDropRenderer } from './row-drag-drop-renderer';\nimport { RowDragDropHeaderRenderer } from '../renderer/row-drag-header-indent-render';\nimport * as literals from '../base/string-literals';\n/**\n * Content module is used to render grid content\n *\n * @hidden\n */\nvar Render = /** @class */function () {\n  /**\n   * Constructor for render module\n   *\n   * @param {IGrid} parent - specifies the IGrid\n   * @param {ServiceLocator} locator - specifies the serviceLocator\n   */\n  function Render(parent, locator) {\n    this.emptyGrid = false;\n    this.counter = 0;\n    this.parent = parent;\n    this.locator = locator;\n    this.data = new Data(parent, locator);\n    this.l10n = locator.getService('localization');\n    this.ariaService = this.locator.getService('ariaService');\n    this.renderer = this.locator.getService('rendererFactory');\n    this.addEventListener();\n  }\n  /**\n   * To initialize grid header, content and footer rendering\n   *\n   * @returns {void}\n   */\n  Render.prototype.render = function () {\n    var gObj = this.parent;\n    this.headerRenderer = this.renderer.getRenderer(RenderType.Header);\n    this.contentRenderer = this.renderer.getRenderer(RenderType.Content);\n    this.headerRenderer.renderPanel();\n    this.contentRenderer.renderPanel();\n    if (gObj.getColumns().length) {\n      this.isLayoutRendered = true;\n      this.headerRenderer.renderTable();\n      this.contentRenderer.renderTable();\n      this.emptyRow(false);\n    }\n    this.parent.scrollModule.setWidth();\n    this.parent.scrollModule.setHeight();\n    if (this.parent.height !== 'auto') {\n      this.parent.scrollModule.setPadding();\n    }\n    this.refreshDataManager();\n  };\n  /**\n   * Refresh the entire Grid.\n   *\n   * @param {NotifyArgs} e - specifies the NotifyArgs\n   * @returns {void}\n   */\n  Render.prototype.refresh = function (e) {\n    var _this = this;\n    if (e === void 0) {\n      e = {\n        requestType: 'refresh'\n      };\n    }\n    var gObj = this.parent;\n    gObj.notify(e.requestType + \"-begin\", e);\n    gObj.trigger(events.actionBegin, e, function (args) {\n      if (args === void 0) {\n        args = {\n          requestType: 'refresh'\n        };\n      }\n      if (args.cancel) {\n        gObj.notify(events.cancelBegin, args);\n        if (args.action === 'clearFilter' && _this.parent.filterSettings.type === 'Menu') {\n          _this.parent.filterSettings.columns[_this.parent.filterModule.filterObjIndex] = _this.parent.filterModule.prevFilterObject;\n          var iconClass = _this.parent.showColumnMenu && _this.parent.filterModule['column'].showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n          var col = _this.parent.element.querySelector('[e-mappinguid=\"' + _this.parent.filterModule['column'].uid + '\"]').parentElement;\n          var flIcon = col.querySelector(iconClass);\n          if (!isNullOrUndefined(_this.parent.filterModule.prevFilterObject)) {\n            flIcon.classList.add('e-filtered');\n          }\n        }\n        if (args.action === 'clear-filter' && (_this.parent.filterSettings.type === 'CheckBox' || _this.parent.filterSettings.type === 'Excel')) {\n          _this.parent.filterSettings.columns = _this.parent.filterModule.checkboxPrevFilterObject;\n        }\n        return;\n      }\n      if (gObj.allowSelection && (args.action === 'clearFilter' || args.action === 'clear-filter' || args.requestType === 'searching' && args.searchString === '' || args.action === 'add')) {\n        gObj.selectionModule['rmtHdrChkbxClicked'] = false;\n      }\n      if (gObj.allowPaging && gObj.pageSettings.pageSizes && gObj.pagerModule.pagerObj.isAllPage && args.action === 'add' && args.requestType === 'save' && gObj.pagerModule.pagerObj.checkAll) {\n        gObj.setProperties({\n          pageSettings: {\n            pageSize: gObj.pageSettings.pageSize + 1\n          }\n        }, true);\n      }\n      if (args.requestType === 'delete' && gObj.allowPaging) {\n        var dataLength = args.data.length;\n        var count = gObj.pageSettings.totalRecordsCount - dataLength;\n        var currentViewData = gObj.getCurrentViewRecords().length;\n        // eslint-disable-next-line max-len\n        if (!(currentViewData - dataLength) && count && (gObj.pageSettings.currentPage - 1) * gObj.pageSettings.pageSize === count || count && count <= dataLength) {\n          gObj.prevPageMoving = true;\n          gObj.setProperties({\n            pageSettings: {\n              totalRecordsCount: count,\n              currentPage: Math.ceil(count / gObj.pageSettings.pageSize)\n            }\n          }, true);\n          gObj.pagerModule.pagerObj.totalRecordsCount = count;\n        }\n      }\n      if (args.requestType === 'reorder' && _this.parent.dataSource && 'result' in _this.parent.dataSource) {\n        _this.contentRenderer.refreshContentRows(args);\n      } else if ((args.requestType === 'paging' || args.requestType === 'columnstate' || args.requestType === 'reorder') && _this.parent.groupSettings.enableLazyLoading && _this.parent.groupSettings.columns.length && (_this.parent.enableVirtualization ? _this.parent.lazyLoadRender : _this.parent.contentModule).getGroupCache()[_this.parent.pageSettings.currentPage]) {\n        _this.contentRenderer.refreshContentRows(args);\n      } else {\n        _this.refreshDataManager(args);\n      }\n    });\n  };\n  /**\n   * @returns {void}\n   * @hidden\n   */\n  Render.prototype.resetTemplates = function () {\n    var gObj = this.parent;\n    var gridColumns = gObj.getColumns();\n    if (gObj.detailTemplate) {\n      var detailTemplateID = gObj.element.id + 'detailTemplate';\n      blazorTemplates[\"\" + detailTemplateID] = [];\n      resetBlazorTemplate(detailTemplateID, 'DetailTemplate');\n    }\n    if (gObj.groupSettings.captionTemplate) {\n      resetBlazorTemplate(gObj.element.id + 'captionTemplate', 'CaptionTemplate');\n    }\n    if (gObj.rowTemplate) {\n      resetBlazorTemplate(gObj.element.id + 'rowTemplate', 'RowTemplate');\n    }\n    if (gObj.toolbarTemplate) {\n      resetBlazorTemplate(gObj.element.id + 'toolbarTemplate', 'ToolbarTemplate');\n    }\n    if (gObj.pageSettings.template) {\n      resetBlazorTemplate(gObj.element.id + '_template', 'pageSettings');\n    }\n    for (var i = 0; i < gridColumns.length; i++) {\n      if (gridColumns[parseInt(i.toString(), 10)].template) {\n        blazorTemplates[gObj.element.id + gridColumns[parseInt(i.toString(), 10)].uid] = [];\n        resetBlazorTemplate(gObj.element.id + gridColumns[parseInt(i.toString(), 10)].uid, 'Template');\n      }\n      if (gridColumns[parseInt(i.toString(), 10)].headerTemplate) {\n        resetBlazorTemplate(gObj.element.id + gridColumns[parseInt(i.toString(), 10)].uid + 'headerTemplate', 'HeaderTemplate');\n      }\n      if (gridColumns[parseInt(i.toString(), 10)].filterTemplate) {\n        resetBlazorTemplate(gObj.element.id + gridColumns[parseInt(i.toString(), 10)].uid + 'filterTemplate', 'FilterTemplate');\n      }\n    }\n    var guid = 'guid';\n    for (var k = 0; k < gObj.aggregates.length; k++) {\n      for (var j = 0; j < gObj.aggregates[parseInt(k.toString(), 10)].columns.length; j++) {\n        if (gObj.aggregates[parseInt(k.toString(), 10)].columns[parseInt(j.toString(), 10)].footerTemplate) {\n          var tempID = gObj.element.id + gObj.aggregates[parseInt(k.toString(), 10)].columns[parseInt(j.toString(), 10)][\"\" + guid] + 'footerTemplate';\n          resetBlazorTemplate(tempID, 'FooterTemplate');\n        }\n        if (gObj.aggregates[parseInt(k.toString(), 10)].columns[parseInt(j.toString(), 10)].groupFooterTemplate) {\n          var tempID = gObj.element.id + gObj.aggregates[parseInt(k.toString(), 10)].columns[parseInt(j.toString(), 10)][\"\" + guid] + 'groupFooterTemplate';\n          resetBlazorTemplate(tempID, 'GroupFooterTemplate');\n        }\n        if (gObj.aggregates[parseInt(k.toString(), 10)].columns[parseInt(j.toString(), 10)].groupCaptionTemplate) {\n          var tempID = gObj.element.id + gObj.aggregates[parseInt(k.toString(), 10)].columns[parseInt(j.toString(), 10)][\"\" + guid] + 'groupCaptionTemplate';\n          resetBlazorTemplate(tempID, 'GroupCaptionTemplate');\n        }\n      }\n    }\n  };\n  Render.prototype.refreshComplete = function (e) {\n    this.parent.trigger(events.actionComplete, e);\n  };\n  /**\n   * The function is used to refresh the dataManager\n   *\n   * @param {NotifyArgs} args - specifies the args\n   * @returns {void}\n   */\n  Render.prototype.refreshDataManager = function (args) {\n    var _this = this;\n    if (args === void 0) {\n      args = {};\n    }\n    var gObj = this.parent;\n    var maskRow = gObj.loadingIndicator.indicatorType === 'Shimmer' && args.requestType !== 'virtualscroll' && args.requestType !== 'infiniteScroll' || (args.requestType === 'virtualscroll' || args.requestType === 'infiniteScroll') && gObj.enableVirtualMaskRow;\n    if (args.requestType !== 'virtualscroll' && !args.isCaptionCollapse && !maskRow) {\n      this.parent.showSpinner();\n    }\n    if (maskRow) {\n      gObj.showMaskRow(args.requestType === 'virtualscroll' ? args.virtualInfo.sentinelInfo.axis : args.requestType === 'infiniteScroll' ? args.direction : undefined);\n    }\n    this.parent.notify(events.resetInfiniteBlocks, args);\n    this.emptyGrid = false;\n    var dataManager;\n    var isFActon = this.isNeedForeignAction();\n    this.ariaService.setBusy(this.parent.getContent().querySelector('.' + literals.content), true);\n    if (isFActon) {\n      var deffered = new Deferred();\n      dataManager = this.getFData(deffered, args);\n    }\n    if (!dataManager) {\n      if (gObj.allowPaging && !gObj.getDataModule().dataManager.dataSource.offline && gObj.pageSettings && gObj.pageSettings.pageSizes && gObj.pagerModule && gObj.pagerModule.pagerObj && gObj.pagerModule.pagerObj.isAllPage) {\n        gObj.pagerModule.pagerObj.isAllPage = undefined;\n      }\n      dataManager = this.data.getData(args, this.data.generateQuery().requiresCount());\n    } else {\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      dataManager = dataManager.then(function (e) {\n        var query = _this.data.generateQuery().requiresCount();\n        if (_this.emptyGrid) {\n          var def = new Deferred();\n          def.resolve({\n            result: [],\n            count: 0\n          });\n          return def.promise;\n        }\n        return _this.data.getData(args, query);\n      });\n    }\n    if (this.parent.getForeignKeyColumns().length && (!isFActon || this.parent.searchSettings.key.length)) {\n      var deffered_1 = new Deferred();\n      dataManager = dataManager.then(function (e) {\n        _this.parent.notify(events.getForeignKeyData, {\n          dataManager: dataManager,\n          result: e,\n          promise: deffered_1,\n          action: args\n        });\n        return deffered_1.promise;\n      });\n    }\n    if (this.parent.groupSettings.disablePageWiseAggregates && this.parent.groupSettings.columns.length) {\n      dataManager = dataManager.then(function (e) {\n        return _this.validateGroupRecords(e);\n      });\n    }\n    dataManager.then(function (e) {\n      return _this.dataManagerSuccess(e, args);\n    }).catch(function (e) {\n      return _this.dataManagerFailure(e, args);\n    });\n  };\n  Render.prototype.getFData = function (deferred, args) {\n    this.parent.notify(events.getForeignKeyData, {\n      isComplex: true,\n      promise: deferred,\n      action: args\n    });\n    return deferred.promise;\n  };\n  Render.prototype.isNeedForeignAction = function () {\n    var gObj = this.parent;\n    return !!(gObj.allowFiltering && gObj.filterSettings.columns.length || gObj.searchSettings.key.length) && this.foreignKey(this.parent.getForeignKeyColumns());\n  };\n  Render.prototype.foreignKey = function (columns) {\n    var _this = this;\n    return columns.some(function (col) {\n      var fbool = false;\n      fbool = _this.parent.filterSettings.columns.some(function (value) {\n        return col.uid === value.uid;\n      });\n      return !!(fbool || _this.parent.searchSettings.key.length);\n    });\n  };\n  Render.prototype.sendBulkRequest = function (args) {\n    var _this = this;\n    args.requestType = 'batchsave';\n    var gObj = this.parent;\n    if (gObj.allowPaging && gObj.pageSettings.pageSizes && gObj.pagerModule.pagerObj.isAllPage && gObj.pagerModule.pagerObj.checkAll) {\n      var dataLength = args['changes'].addedRecords.length;\n      if (dataLength) {\n        gObj.setProperties({\n          pageSettings: {\n            pageSize: gObj.pageSettings.pageSize + dataLength\n          }\n        }, true);\n      }\n    }\n    if (gObj.allowPaging && (args.changes.addedRecords.length || args.changes.deletedRecords.length || args.changes.changedRecords.length) && gObj.pageSettings && gObj.pageSettings.pageSizes && gObj.pagerModule && gObj.pagerModule.pagerObj && !gObj.getDataModule().dataManager.dataSource.offline && gObj.pagerModule.pagerObj.isAllPage) {\n      gObj.pagerModule.pagerObj.isAllPage = undefined;\n    }\n    var promise = this.data.saveChanges(args.changes, this.parent.getPrimaryKeyFieldNames()[0], args.original);\n    var query = this.data.generateQuery().requiresCount();\n    if (this.data.dataManager.dataSource.offline) {\n      this.refreshDataManager({\n        requestType: 'batchsave'\n      });\n      return;\n    } else {\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      promise.then(function (e) {\n        _this.data.getData(args, query).then(function (e) {\n          return _this.dmSuccess(e, args);\n        }).catch(function (e) {\n          return _this.dmFailure(e, args);\n        });\n      }).catch(function (e) {\n        return _this.dmFailure(e, args);\n      });\n    }\n  };\n  Render.prototype.dmSuccess = function (e, args) {\n    this.dataManagerSuccess(e, args);\n  };\n  Render.prototype.dmFailure = function (e, args) {\n    this.dataManagerFailure(e, args);\n  };\n  /**\n   * Render empty row to Grid which is used at the time to represent to no records.\n   *\n   * @returns {void}\n   * @hidden\n   */\n  Render.prototype.renderEmptyRow = function () {\n    this.emptyRow(true);\n  };\n  Render.prototype.emptyRow = function (isTrigger) {\n    var gObj = this.parent;\n    var tbody = this.contentRenderer.getTable().querySelector(literals.tbody);\n    if (!isNullOrUndefined(tbody)) {\n      remove(tbody);\n    }\n    tbody = this.parent.createElement(literals.tbody, {\n      attrs: {\n        role: 'rowgroup'\n      }\n    });\n    var spanCount = 0;\n    if (gObj.detailTemplate || gObj.childGrid) {\n      ++spanCount;\n    }\n    var tr = this.parent.createElement('tr', {\n      className: 'e-emptyrow',\n      attrs: {\n        role: 'row'\n      }\n    });\n    var td;\n    if (gObj.emptyRecordTemplate) {\n      var emptyRecordTemplateID = gObj.element.id + 'emptyRecordTemplate';\n      td = this.parent.createElement('td', {\n        attrs: {\n          colspan: (gObj.getVisibleColumns().length + spanCount + gObj.groupSettings.columns.length).toString()\n        }\n      });\n      if (gObj.isVue) {\n        td.appendChild(gObj.getEmptyRecordTemplate()(gObj.dataSource, gObj, 'emptyRecordTemplate', emptyRecordTemplateID, undefined, undefined, undefined, this.parent['root'])[1]);\n      } else {\n        td.appendChild(gObj.getEmptyRecordTemplate()(gObj.dataSource, gObj, 'emptyRecordTemplate', emptyRecordTemplateID, undefined, undefined, undefined, this.parent['root'])[0]);\n      }\n      if (gObj.isReact) {\n        this.parent.renderTemplates();\n      }\n    } else {\n      td = this.parent.createElement('td', {\n        innerHTML: this.l10n.getConstant('EmptyRecord'),\n        attrs: {\n          colspan: (gObj.getVisibleColumns().length + spanCount + gObj.groupSettings.columns.length).toString()\n        }\n      });\n    }\n    if (gObj.isFrozenGrid()) {\n      td.classList.add('e-leftfreeze');\n      td.style.left = 0 + 'px';\n    }\n    if (gObj.frozenRows && gObj.element.querySelector('.e-frozenrow-border')) {\n      this.parent.element.querySelector('.e-frozenrow-border').classList.add('e-frozenrow-empty');\n    }\n    tr.appendChild(td);\n    tbody.appendChild(tr);\n    this.contentRenderer.renderEmpty(tbody);\n    if (isTrigger) {\n      this.parent.trigger(events.dataBound, {});\n      this.parent.notify(events.onEmpty, {\n        rows: [new Row({\n          isDataRow: true,\n          cells: [new Cell({\n            isDataCell: true,\n            visible: true\n          })]\n        })]\n      });\n    }\n  };\n  Render.prototype.dynamicColumnChange = function () {\n    if (this.parent.getCurrentViewRecords().length) {\n      this.updateColumnType(this.parent.getCurrentViewRecords()[0]);\n    }\n  };\n  Render.prototype.updateColumnType = function (record) {\n    var columns = this.parent.getColumns();\n    var value;\n    var cFormat = 'customFormat';\n    var equalTo = 'equalTo';\n    var data = record && record.items ? record.items[0] : record;\n    var fmtr = this.locator.getService('valueFormatter');\n    for (var i = 0, len = columns.length; i < len; i++) {\n      value = getObject(columns[parseInt(i.toString(), 10)].field || '', data);\n      if (!isNullOrUndefined(columns[parseInt(i.toString(), 10)][\"\" + cFormat])) {\n        columns[parseInt(i.toString(), 10)].format = columns[parseInt(i.toString(), 10)][\"\" + cFormat];\n      }\n      if (!isNullOrUndefined(columns[parseInt(i.toString(), 10)].validationRules) && !isNullOrUndefined(columns[parseInt(i.toString(), 10)].validationRules[\"\" + equalTo])) {\n        columns[parseInt(i.toString(), 10)].validationRules[\"\" + equalTo][0] = this.parent.element.id + columns[parseInt(i.toString(), 10)].validationRules[\"\" + equalTo][0];\n      }\n      if (columns[parseInt(i.toString(), 10)].isForeignColumn() && columns[parseInt(i.toString(), 10)].columnData) {\n        value = getObject(columns[parseInt(i.toString(), 10)].foreignKeyValue || '', columns[parseInt(i.toString(), 10)].columnData[0]);\n      }\n      if (!isNullOrUndefined(value)) {\n        this.isColTypeDef = true;\n        if (!columns[parseInt(i.toString(), 10)].type) {\n          columns[parseInt(i.toString(), 10)].type = value.getDay ? value.getHours() > 0 || value.getMinutes() > 0 || value.getSeconds() > 0 || value.getMilliseconds() > 0 ? 'datetime' : 'date' : typeof value;\n        }\n      } else {\n        columns[parseInt(i.toString(), 10)].type = columns[parseInt(i.toString(), 10)].type || null;\n      }\n      var valueFormatter = new ValueFormatter();\n      if (columns[parseInt(i.toString(), 10)].format && (columns[parseInt(i.toString(), 10)].format.skeleton || columns[parseInt(i.toString(), 10)].format.format && typeof columns[parseInt(i.toString(), 10)].format.format === 'string')) {\n        columns[parseInt(i.toString(), 10)].setFormatter(valueFormatter.getFormatFunction(extend({}, columns[parseInt(i.toString(), 10)].format)));\n        columns[parseInt(i.toString(), 10)].setParser(valueFormatter.getParserFunction(columns[parseInt(i.toString(), 10)].format));\n      }\n      if (typeof columns[parseInt(i.toString(), 10)].format === 'string') {\n        setFormatter(this.locator, columns[parseInt(i.toString(), 10)]);\n      } else if (!columns[parseInt(i.toString(), 10)].format && columns[parseInt(i.toString(), 10)].type === 'number') {\n        columns[parseInt(i.toString(), 10)].setParser(fmtr.getParserFunction({\n          format: 'n2'\n        }));\n      }\n      if (columns[parseInt(i.toString(), 10)].type === 'dateonly' && !columns[parseInt(i.toString(), 10)].format) {\n        columns[parseInt(i.toString(), 10)].format = 'yMd';\n        setFormatter(this.locator, columns[parseInt(i.toString(), 10)]);\n      }\n    }\n  };\n  /**\n   * @param {ReturnType} e - specifies the return type\n   * @param {NotifyArgs} args - specifies the Notifyargs\n   * @returns {void}\n   * @hidden\n   */\n  // tslint:disable-next-line:max-func-body-length\n  Render.prototype.dataManagerSuccess = function (e, args) {\n    var _this = this;\n    var gObj = this.parent;\n    this.contentRenderer = this.renderer.getRenderer(RenderType.Content);\n    this.headerRenderer = this.renderer.getRenderer(RenderType.Header);\n    e.actionArgs = args;\n    var isInfiniteDelete = this.parent.enableInfiniteScrolling && !this.parent.infiniteScrollSettings.enableCache && !gObj.groupSettings.enableLazyLoading && (args.requestType === 'delete' || args.requestType === 'save' && this.parent.infiniteScrollModule.requestType === 'add' && !(gObj.sortSettings.columns.length || gObj.filterSettings.columns.length || this.parent.groupSettings.columns.length || gObj.searchSettings.key));\n    // tslint:disable-next-line:max-func-body-length\n    gObj.trigger(events.beforeDataBound, e, function (dataArgs) {\n      if (dataArgs.cancel) {\n        return;\n      }\n      dataArgs.result = isNullOrUndefined(dataArgs.result) ? [] : dataArgs.result;\n      var len = Object.keys(dataArgs.result).length;\n      if (_this.parent.isDestroyed) {\n        return;\n      }\n      if (!gObj.getColumns().length && !len && !(gObj.columns.length && gObj.columns[0] instanceof Column)) {\n        gObj.hideSpinner();\n        return;\n      }\n      if (_this.isInfiniteEnd(args) && !len) {\n        _this.parent.notify(events.infiniteEditHandler, {\n          e: args,\n          result: e.result,\n          count: e.count,\n          agg: e.aggregates\n        });\n        return;\n      }\n      _this.parent.isEdit = false;\n      _this.parent.notify(events.editReset, {});\n      _this.parent.notify(events.tooltipDestroy, {});\n      if (args && args.requestType !== 'infiniteScroll') {\n        _this.parent.notify(events.commandColumnDestroy, {\n          type: 'refreshCommandColumn'\n        });\n      }\n      _this.contentRenderer.prevCurrentView = _this.parent.currentViewData.slice();\n      gObj.currentViewData = dataArgs.result;\n      gObj.notify(events.refreshInfiniteCurrentViewData, {\n        args: args,\n        data: dataArgs.result\n      });\n      if (dataArgs.count && !gObj.allowPaging && (gObj.enableVirtualization || gObj.enableInfiniteScrolling)) {\n        gObj.totalDataRecordsCount = dataArgs.count;\n      }\n      if (!len && dataArgs.count && gObj.allowPaging && args && args.requestType !== 'delete') {\n        if (_this.parent.groupSettings.enableLazyLoading && (args.requestType === 'grouping' || args.requestType === 'ungrouping')) {\n          _this.parent.notify(events.groupComplete, args);\n        }\n        gObj.prevPageMoving = true;\n        gObj.pageSettings.totalRecordsCount = dataArgs.count;\n        if (args.requestType !== 'paging') {\n          gObj.pageSettings.currentPage = Math.ceil(dataArgs.count / gObj.pageSettings.pageSize);\n        }\n        gObj.dataBind();\n        return;\n      }\n      if ((!gObj.getColumns().length && len || !_this.isLayoutRendered) && !isGroupAdaptive(gObj)) {\n        gObj.removeMaskRow();\n        _this.updatesOnInitialRender(dataArgs);\n      }\n      if (!_this.isColTypeDef && gObj.getCurrentViewRecords()) {\n        if (_this.data.dataManager.dataSource.offline && gObj.dataSource && gObj.dataSource.length) {\n          _this.updateColumnType(gObj.dataSource[0]);\n        } else {\n          _this.updateColumnType(gObj.getCurrentViewRecords()[0]);\n        }\n      }\n      if (!_this.parent.isInitialLoad && _this.parent.groupSettings.disablePageWiseAggregates && !_this.parent.groupSettings.columns.length) {\n        dataArgs.result = _this.parent.dataSource instanceof Array ? _this.parent.dataSource : _this.parent.currentViewData;\n      }\n      if ((_this.parent.isReact || _this.parent.isVue) && !isNullOrUndefined(args) && args.requestType !== 'infiniteScroll' && !args.isFrozen) {\n        clearReactVueTemplates(_this.parent, ['footerTemplate']);\n      }\n      if (_this.parent.isAngular && _this.parent.allowGrouping && _this.parent.groupSettings.captionTemplate && !(!isNullOrUndefined(args) && args.requestType === 'infiniteScroll')) {\n        _this.parent.destroyTemplate(['groupSettings_captionTemplate']);\n      }\n      _this.parent.notify(events.dataReady, extend({\n        count: dataArgs.count,\n        result: dataArgs.result,\n        aggregates: dataArgs.aggregates\n      }, args));\n      if ((gObj.groupSettings.columns.length || args && args.requestType === 'ungrouping') && args && args.requestType !== 'filtering') {\n        _this.headerRenderer.refreshUI();\n      }\n      if (len) {\n        if (isGroupAdaptive(gObj)) {\n          var content = 'content';\n          args.scrollTop = {\n            top: _this.contentRenderer[\"\" + content].scrollTop\n          };\n        }\n        if (!isInfiniteDelete) {\n          if (_this.parent.enableImmutableMode) {\n            _this.contentRenderer.immutableModeRendering(args);\n          } else {\n            _this.contentRenderer.refreshContentRows(args);\n          }\n        } else {\n          _this.parent.notify(events.infiniteEditHandler, {\n            e: args,\n            result: e.result,\n            count: e.count,\n            agg: e.aggregates\n          });\n        }\n      } else {\n        if (args && args.isCaptionCollapse) {\n          return;\n        }\n        if (!gObj.getColumns().length) {\n          gObj.element.innerHTML = '';\n          alert(_this.l10n.getConstant('EmptyDataSourceError')); //ToDO: change this alert as dialog\n          return;\n        }\n        _this.contentRenderer.setRowElements([]);\n        _this.contentRenderer.setRowObjects([]);\n        _this.ariaService.setBusy(_this.parent.getContent().querySelector('.' + literals.content), false);\n        gObj.removeMaskRow();\n        _this.renderEmptyRow();\n        if (gObj.enableColumnVirtualization && !len) {\n          _this.parent.notify(events.contentReady, {\n            rows: gObj.getRowsObject(),\n            args: {}\n          });\n        }\n        if (args) {\n          var action = (args.requestType || '').toLowerCase() + '-complete';\n          _this.parent.notify(action, args);\n          if (args.requestType === 'batchsave') {\n            args.cancel = false;\n            args.rows = [];\n            args.isFrozen = !args.isFrozen;\n            _this.parent.trigger(events.actionComplete, args);\n          }\n        }\n        if (_this.parent.autoFit) {\n          _this.parent.preventAdjustColumns();\n        }\n        _this.parent.hideSpinner();\n      }\n      _this.parent.notify(events.toolbarRefresh, {});\n      _this.setRowCount(_this.parent.getCurrentViewRecords().length);\n      if ('query' in e) {\n        _this.parent.getDataModule().isQueryInvokedFromData = false;\n      }\n    });\n  };\n  /**\n   * @param {object} e - specifies the object\n   * @param {Object[]} e.result - specifies the result\n   * @param {NotifyArgs} args - specifies the args\n   * @returns {void}\n   * @hidden\n   */\n  Render.prototype.dataManagerFailure = function (e, args) {\n    if (!isNullOrUndefined(this.parent.contentModule)) {\n      this.ariaService.setOptions(this.parent.getContent().querySelector('.' + literals.content), {\n        busy: false,\n        invalid: true\n      });\n      this.setRowCount(1);\n    }\n    this.parent.trigger(events.actionFailure, {\n      error: e\n    });\n    this.parent.hideSpinner();\n    this.parent.removeMaskRow();\n    if (args.requestType === 'save' || args.requestType === 'delete' || args.name === 'bulk-save') {\n      return;\n    }\n    this.parent.currentViewData = [];\n    this.renderEmptyRow();\n    if (!this.parent.isInitialLoad) {\n      this.parent.focusModule.setFirstFocusableTabIndex();\n    }\n    this.parent.log('actionfailure', {\n      error: e\n    });\n  };\n  Render.prototype.setRowCount = function (dataRowCount) {\n    this.ariaService.setOptions(this.parent.element, {\n      rowcount: dataRowCount ? dataRowCount.toString() : '1'\n    });\n  };\n  Render.prototype.isInfiniteEnd = function (args) {\n    return this.parent.enableInfiniteScrolling && !this.parent.infiniteScrollSettings.enableCache && args.requestType === 'delete';\n  };\n  Render.prototype.updatesOnInitialRender = function (e) {\n    this.isLayoutRendered = true;\n    var isEmptyCol = false;\n    if (this.parent.columns.length < 1) {\n      this.buildColumns(e.result[0]);\n      isEmptyCol = true;\n    }\n    prepareColumns(this.parent.columns, null, this.parent);\n    if (isEmptyCol) {\n      this.parent.notify(events.refreshSplitFrozenColumn, {});\n    }\n    this.headerRenderer.renderTable();\n    this.contentRenderer.renderTable();\n    this.parent.isAutoGen = true;\n    this.parent.notify(events.autoCol, {});\n  };\n  Render.prototype.iterateComplexColumns = function (obj, field, split) {\n    var keys = Object.keys(obj);\n    for (var i = 0; i < keys.length; i++) {\n      var childKeys = typeof obj[keys[parseInt(i.toString(), 10)]] === 'object' && obj[keys[parseInt(i.toString(), 10)]] && !(obj[keys[parseInt(i.toString(), 10)]] instanceof Date) ? Object.keys(obj[keys[parseInt(i.toString(), 10)]]) : [];\n      if (childKeys.length) {\n        this.iterateComplexColumns(obj[keys[parseInt(i.toString(), 10)]], field + (keys[parseInt(i.toString(), 10)] + '.'), split);\n      } else {\n        split[this.counter] = field + keys[parseInt(i.toString(), 10)];\n        this.counter++;\n      }\n    }\n  };\n  Render.prototype.buildColumns = function (record) {\n    var cols = [];\n    var complexCols = {};\n    this.iterateComplexColumns(record, '', complexCols);\n    var columns = Object.keys(complexCols).filter(function (e) {\n      return complexCols[\"\" + e] !== 'BlazId';\n    }).map(function (field) {\n      return complexCols[\"\" + field];\n    });\n    for (var i = 0, len = columns.length; i < len; i++) {\n      cols[parseInt(i.toString(), 10)] = {\n        'field': columns[parseInt(i.toString(), 10)]\n      };\n      if (this.parent.enableColumnVirtualization) {\n        cols[parseInt(i.toString(), 10)].width = !isNullOrUndefined(cols[parseInt(i.toString(), 10)].width) ? cols[parseInt(i.toString(), 10)].width : 200;\n      }\n    }\n    this.parent.setProperties({\n      'columns': cols\n    }, true);\n  };\n  Render.prototype.instantiateRenderer = function () {\n    this.renderer.addRenderer(RenderType.Header, new HeaderRender(this.parent, this.locator));\n    this.renderer.addRenderer(RenderType.Content, new ContentRender(this.parent, this.locator));\n    var cellrender = this.locator.getService('cellRendererFactory');\n    cellrender.addCellRenderer(CellType.Header, new HeaderCellRenderer(this.parent, this.locator));\n    cellrender.addCellRenderer(CellType.Data, new CellRenderer(this.parent, this.locator));\n    cellrender.addCellRenderer(CellType.StackedHeader, new StackedHeaderCellRenderer(this.parent, this.locator));\n    cellrender.addCellRenderer(CellType.Indent, new IndentCellRenderer(this.parent, this.locator));\n    cellrender.addCellRenderer(CellType.GroupCaption, new GroupCaptionCellRenderer(this.parent, this.locator));\n    cellrender.addCellRenderer(CellType.GroupCaptionEmpty, new GroupCaptionEmptyCellRenderer(this.parent, this.locator));\n    cellrender.addCellRenderer(CellType.Expand, new ExpandCellRenderer(this.parent, this.locator));\n    cellrender.addCellRenderer(CellType.HeaderIndent, new HeaderIndentCellRenderer(this.parent, this.locator));\n    cellrender.addCellRenderer(CellType.StackedHeader, new StackedHeaderCellRenderer(this.parent, this.locator));\n    cellrender.addCellRenderer(CellType.DetailHeader, new DetailHeaderIndentCellRenderer(this.parent, this.locator));\n    cellrender.addCellRenderer(CellType.RowDragHIcon, new RowDragDropHeaderRenderer(this.parent, this.locator));\n    cellrender.addCellRenderer(CellType.DetailExpand, new DetailExpandCellRenderer(this.parent, this.locator));\n    cellrender.addCellRenderer(CellType.DetailFooterIntent, new IndentCellRenderer(this.parent, this.locator));\n    cellrender.addCellRenderer(CellType.RowDragIcon, new RowDragDropRenderer(this.parent, this.locator));\n  };\n  Render.prototype.addEventListener = function () {\n    var _this = this;\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.parent.on(events.initialLoad, this.instantiateRenderer, this);\n    this.parent.on('refreshdataSource', this.dataManagerSuccess, this);\n    this.parent.on(events.modelChanged, this.refresh, this);\n    this.parent.on(events.refreshComplete, this.refreshComplete, this);\n    this.parent.on(events.bulkSave, this.sendBulkRequest, this);\n    this.parent.on(events.showEmptyGrid, function () {\n      _this.emptyGrid = true;\n    }, this);\n    this.parent.on(events.autoCol, this.dynamicColumnChange, this);\n  };\n  /**\n   * @param {ReturnType} e - specifies the Return type\n   * @returns {Promise<Object>} returns the object\n   * @hidden\n   */\n  Render.prototype.validateGroupRecords = function (e) {\n    var _this = this;\n    var index = e.result.length - 1;\n    if (index < 0) {\n      return Promise.resolve(e);\n    }\n    var group0 = e.result[0];\n    var groupN = e.result[parseInt(index.toString(), 10)];\n    var predicate = [];\n    var addWhere = function (input) {\n      var groups = [group0, groupN];\n      for (var i = 0; i < groups.length; i++) {\n        predicate.push(new Predicate('field', '==', groups[parseInt(i.toString(), 10)].field).and(_this.getPredicate('key', 'equal', groups[parseInt(i.toString(), 10)].key)));\n      }\n      input.where(Predicate.or(predicate));\n    };\n    var query = new Query();\n    addWhere(query);\n    var curDm = new DataManager(e.result);\n    var curFilter = curDm.executeLocal(query);\n    var newQuery = this.data.generateQuery(true);\n    var rPredicate = [];\n    if (this.data.isRemote()) {\n      var groups = [group0, groupN];\n      for (var i = 0; i < groups.length; i++) {\n        rPredicate.push(this.getPredicate(groups[parseInt(i.toString(), 10)].field, 'equal', groups[parseInt(i.toString(), 10)].key));\n      }\n      newQuery.where(Predicate.or(rPredicate));\n    } else {\n      addWhere(newQuery);\n    }\n    var deferred = new Deferred();\n    this.data.getData({}, newQuery).then(function (r) {\n      _this.updateGroupInfo(curFilter, r.result);\n      deferred.resolve(e);\n    }).catch(function (e) {\n      return deferred.reject(e);\n    });\n    return deferred.promise;\n  };\n  Render.prototype.getPredicate = function (key, operator, value) {\n    if (value instanceof Date) {\n      return getDatePredicate({\n        field: key,\n        operator: operator,\n        value: value\n      });\n    }\n    return new Predicate(key, operator, value);\n  };\n  Render.prototype.updateGroupInfo = function (current, untouched) {\n    var dm = new DataManager(untouched);\n    var elements = current;\n    for (var i = 0; i < elements.length; i++) {\n      var uGroup = dm.executeLocal(new Query().where(new Predicate('field', '==', elements[parseInt(i.toString(), 10)].field).and(this.getPredicate('key', 'equal', elements[parseInt(i.toString(), 10)].key))))[0];\n      elements[parseInt(i.toString(), 10)].count = uGroup.count;\n      var itemGroup = elements[parseInt(i.toString(), 10)].items;\n      var uGroupItem = uGroup.items;\n      if (itemGroup.GroupGuid) {\n        elements[parseInt(i.toString(), 10)].items = this.updateGroupInfo(elements[parseInt(i.toString(), 10)].items, uGroup.items);\n      }\n      var rows = this.parent.aggregates;\n      for (var j = 0; j < rows.length; j++) {\n        var row = rows[parseInt(j.toString(), 10)];\n        for (var k = 0; k < row.columns.length; k++) {\n          var types = row.columns[parseInt(k.toString(), 10)].type instanceof Array ? row.columns[parseInt(k.toString(), 10)].type : [row.columns[parseInt(k.toString(), 10)].type];\n          for (var l = 0; l < types.length; l++) {\n            var key = row.columns[parseInt(k.toString(), 10)].field + ' - ' + types[parseInt(l.toString(), 10)].toLowerCase();\n            var data = itemGroup.level ? uGroupItem.records : uGroup.items;\n            var context = this.parent;\n            if (types[parseInt(l.toString(), 10)] === 'Custom') {\n              var data_1 = itemGroup.level ? uGroupItem : uGroup;\n              var temp = row.columns[parseInt(k.toString(), 10)].customAggregate;\n              if (typeof temp === 'string') {\n                temp = getValue(temp, window);\n              }\n              elements[parseInt(i.toString(), 10)].aggregates[\"\" + key] = temp ? temp.call(context, data_1, row.columns[parseInt(k.toString(), 10)]) : '';\n            } else {\n              elements[parseInt(i.toString(), 10)].aggregates[\"\" + key] = DataUtil.aggregates[types[parseInt(l.toString(), 10)].toLowerCase()](data, row.columns[parseInt(k.toString(), 10)].field);\n            }\n          }\n        }\n      }\n    }\n    return current;\n  };\n  return Render;\n}();\nexport { Render };","map":{"version":3,"names":["remove","resetBlazorTemplate","blazorTemplates","getValue","isNullOrUndefined","extend","DataManager","Query","Deferred","Predicate","DataUtil","ValueFormatter","RenderType","CellType","Data","Column","Row","Cell","events","prepareColumns","setFormatter","isGroupAdaptive","getDatePredicate","getObject","clearReactVueTemplates","ContentRender","HeaderRender","CellRenderer","HeaderCellRenderer","StackedHeaderCellRenderer","IndentCellRenderer","GroupCaptionCellRenderer","GroupCaptionEmptyCellRenderer","ExpandCellRenderer","HeaderIndentCellRenderer","DetailHeaderIndentCellRenderer","DetailExpandCellRenderer","RowDragDropRenderer","RowDragDropHeaderRenderer","literals","Render","parent","locator","emptyGrid","counter","data","l10n","getService","ariaService","renderer","addEventListener","prototype","render","gObj","headerRenderer","getRenderer","Header","contentRenderer","Content","renderPanel","getColumns","length","isLayoutRendered","renderTable","emptyRow","scrollModule","setWidth","setHeight","height","setPadding","refreshDataManager","refresh","e","_this","requestType","notify","trigger","actionBegin","args","cancel","cancelBegin","action","filterSettings","type","columns","filterModule","filterObjIndex","prevFilterObject","iconClass","showColumnMenu","col","element","querySelector","uid","parentElement","flIcon","classList","add","checkboxPrevFilterObject","allowSelection","searchString","selectionModule","allowPaging","pageSettings","pageSizes","pagerModule","pagerObj","isAllPage","checkAll","setProperties","pageSize","dataLength","count","totalRecordsCount","currentViewData","getCurrentViewRecords","currentPage","prevPageMoving","Math","ceil","dataSource","refreshContentRows","groupSettings","enableLazyLoading","enableVirtualization","lazyLoadRender","contentModule","getGroupCache","resetTemplates","gridColumns","detailTemplate","detailTemplateID","id","captionTemplate","rowTemplate","toolbarTemplate","template","i","parseInt","toString","headerTemplate","filterTemplate","guid","k","aggregates","j","footerTemplate","tempID","groupFooterTemplate","groupCaptionTemplate","refreshComplete","actionComplete","maskRow","loadingIndicator","indicatorType","enableVirtualMaskRow","isCaptionCollapse","showSpinner","showMaskRow","virtualInfo","sentinelInfo","axis","direction","undefined","resetInfiniteBlocks","dataManager","isFActon","isNeedForeignAction","setBusy","getContent","content","deffered","getFData","getDataModule","offline","getData","generateQuery","requiresCount","then","query","def","resolve","result","promise","getForeignKeyColumns","searchSettings","key","deffered_1","getForeignKeyData","disablePageWiseAggregates","validateGroupRecords","dataManagerSuccess","catch","dataManagerFailure","deferred","isComplex","allowFiltering","foreignKey","some","fbool","value","sendBulkRequest","addedRecords","changes","deletedRecords","changedRecords","saveChanges","getPrimaryKeyFieldNames","original","dmSuccess","dmFailure","renderEmptyRow","isTrigger","tbody","getTable","createElement","attrs","role","spanCount","childGrid","tr","className","td","emptyRecordTemplate","emptyRecordTemplateID","colspan","getVisibleColumns","isVue","appendChild","getEmptyRecordTemplate","isReact","renderTemplates","innerHTML","getConstant","isFrozenGrid","style","left","frozenRows","renderEmpty","dataBound","onEmpty","rows","isDataRow","cells","isDataCell","visible","dynamicColumnChange","updateColumnType","record","cFormat","equalTo","items","fmtr","len","field","format","validationRules","isForeignColumn","columnData","foreignKeyValue","isColTypeDef","getDay","getHours","getMinutes","getSeconds","getMilliseconds","valueFormatter","skeleton","getFormatFunction","setParser","getParserFunction","actionArgs","isInfiniteDelete","enableInfiniteScrolling","infiniteScrollSettings","enableCache","infiniteScrollModule","sortSettings","beforeDataBound","dataArgs","Object","keys","isDestroyed","hideSpinner","isInfiniteEnd","infiniteEditHandler","agg","isEdit","editReset","tooltipDestroy","commandColumnDestroy","prevCurrentView","slice","refreshInfiniteCurrentViewData","totalDataRecordsCount","groupComplete","dataBind","removeMaskRow","updatesOnInitialRender","isInitialLoad","Array","isFrozen","isAngular","allowGrouping","destroyTemplate","dataReady","refreshUI","scrollTop","top","enableImmutableMode","immutableModeRendering","alert","setRowElements","setRowObjects","enableColumnVirtualization","contentReady","getRowsObject","toLowerCase","autoFit","preventAdjustColumns","toolbarRefresh","setRowCount","isQueryInvokedFromData","setOptions","busy","invalid","actionFailure","error","name","focusModule","setFirstFocusableTabIndex","log","dataRowCount","rowcount","isEmptyCol","buildColumns","refreshSplitFrozenColumn","isAutoGen","autoCol","iterateComplexColumns","obj","split","childKeys","Date","cols","complexCols","filter","map","width","instantiateRenderer","addRenderer","cellrender","addCellRenderer","StackedHeader","Indent","GroupCaption","GroupCaptionEmpty","Expand","HeaderIndent","DetailHeader","RowDragHIcon","DetailExpand","DetailFooterIntent","RowDragIcon","on","initialLoad","modelChanged","bulkSave","showEmptyGrid","index","Promise","group0","groupN","predicate","addWhere","input","groups","push","and","getPredicate","where","or","curDm","curFilter","executeLocal","newQuery","rPredicate","isRemote","r","updateGroupInfo","reject","operator","current","untouched","dm","elements","uGroup","itemGroup","uGroupItem","GroupGuid","row","types","l","level","records","context","data_1","temp","customAggregate","window","call"],"sources":["/Users/saleem/Desktop/KClient/Web App/Ver_3.6/User Interface/website_Source files/node_modules/@syncfusion/ej2-grids/src/grid/renderer/render.js"],"sourcesContent":["import { remove, resetBlazorTemplate, blazorTemplates, getValue } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { DataManager, Query, Deferred, Predicate, DataUtil } from '@syncfusion/ej2-data';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { RenderType, CellType } from '../base/enum';\nimport { Data } from '../actions/data';\nimport { Column } from '../models/column';\nimport { Row } from '../models/row';\nimport { Cell } from '../models/cell';\nimport * as events from '../base/constant';\nimport { prepareColumns, setFormatter, isGroupAdaptive, getDatePredicate, getObject, clearReactVueTemplates } from '../base/util';\nimport { ContentRender } from '../renderer/content-renderer';\nimport { HeaderRender } from '../renderer/header-renderer';\nimport { CellRenderer } from '../renderer/cell-renderer';\nimport { HeaderCellRenderer } from '../renderer/header-cell-renderer';\nimport { StackedHeaderCellRenderer } from '../renderer/stacked-cell-renderer';\nimport { IndentCellRenderer } from '../renderer/indent-cell-renderer';\nimport { GroupCaptionCellRenderer, GroupCaptionEmptyCellRenderer } from '../renderer/caption-cell-renderer';\nimport { ExpandCellRenderer } from '../renderer/expand-cell-renderer';\nimport { HeaderIndentCellRenderer } from '../renderer/header-indent-renderer';\nimport { DetailHeaderIndentCellRenderer } from '../renderer/detail-header-indent-renderer';\nimport { DetailExpandCellRenderer } from '../renderer/detail-expand-cell-renderer';\nimport { RowDragDropRenderer } from './row-drag-drop-renderer';\nimport { RowDragDropHeaderRenderer } from '../renderer/row-drag-header-indent-render';\nimport * as literals from '../base/string-literals';\n/**\n * Content module is used to render grid content\n *\n * @hidden\n */\nvar Render = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     * @param {ServiceLocator} locator - specifies the serviceLocator\n     */\n    function Render(parent, locator) {\n        this.emptyGrid = false;\n        this.counter = 0;\n        this.parent = parent;\n        this.locator = locator;\n        this.data = new Data(parent, locator);\n        this.l10n = locator.getService('localization');\n        this.ariaService = this.locator.getService('ariaService');\n        this.renderer = this.locator.getService('rendererFactory');\n        this.addEventListener();\n    }\n    /**\n     * To initialize grid header, content and footer rendering\n     *\n     * @returns {void}\n     */\n    Render.prototype.render = function () {\n        var gObj = this.parent;\n        this.headerRenderer = this.renderer.getRenderer(RenderType.Header);\n        this.contentRenderer = this.renderer.getRenderer(RenderType.Content);\n        this.headerRenderer.renderPanel();\n        this.contentRenderer.renderPanel();\n        if (gObj.getColumns().length) {\n            this.isLayoutRendered = true;\n            this.headerRenderer.renderTable();\n            this.contentRenderer.renderTable();\n            this.emptyRow(false);\n        }\n        this.parent.scrollModule.setWidth();\n        this.parent.scrollModule.setHeight();\n        if (this.parent.height !== 'auto') {\n            this.parent.scrollModule.setPadding();\n        }\n        this.refreshDataManager();\n    };\n    /**\n     * Refresh the entire Grid.\n     *\n     * @param {NotifyArgs} e - specifies the NotifyArgs\n     * @returns {void}\n     */\n    Render.prototype.refresh = function (e) {\n        var _this = this;\n        if (e === void 0) { e = { requestType: 'refresh' }; }\n        var gObj = this.parent;\n        gObj.notify(e.requestType + \"-begin\", e);\n        gObj.trigger(events.actionBegin, e, function (args) {\n            if (args === void 0) { args = { requestType: 'refresh' }; }\n            if (args.cancel) {\n                gObj.notify(events.cancelBegin, args);\n                if (args.action === 'clearFilter' && _this.parent.filterSettings.type === 'Menu') {\n                    _this.parent.filterSettings.columns[_this.parent.filterModule.filterObjIndex] = _this.parent.filterModule.prevFilterObject;\n                    var iconClass = _this.parent.showColumnMenu && _this.parent.filterModule['column'].showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n                    var col = _this.parent.element.querySelector('[e-mappinguid=\"' + _this.parent.filterModule['column'].uid + '\"]').parentElement;\n                    var flIcon = col.querySelector(iconClass);\n                    if (!isNullOrUndefined(_this.parent.filterModule.prevFilterObject)) {\n                        flIcon.classList.add('e-filtered');\n                    }\n                }\n                if (args.action === 'clear-filter' && (_this.parent.filterSettings.type === 'CheckBox' || _this.parent.filterSettings.type === 'Excel')) {\n                    _this.parent.filterSettings.columns = _this.parent.filterModule.checkboxPrevFilterObject;\n                }\n                return;\n            }\n            if (gObj.allowSelection && (args.action === 'clearFilter' || args.action === 'clear-filter' ||\n                (args.requestType === 'searching' && args.searchString === '') || args.action === 'add')) {\n                gObj.selectionModule['rmtHdrChkbxClicked'] = false;\n            }\n            if (gObj.allowPaging && gObj.pageSettings.pageSizes && gObj.pagerModule.pagerObj.isAllPage &&\n                (args.action === 'add' && args.requestType === 'save') && gObj.pagerModule.pagerObj.checkAll) {\n                gObj.setProperties({ pageSettings: { pageSize: gObj.pageSettings.pageSize + 1 } }, true);\n            }\n            if (args.requestType === 'delete' && gObj.allowPaging) {\n                var dataLength = args.data.length;\n                var count = gObj.pageSettings.totalRecordsCount - dataLength;\n                var currentViewData = gObj.getCurrentViewRecords().length;\n                // eslint-disable-next-line max-len\n                if ((!(currentViewData - dataLength) && count && ((gObj.pageSettings.currentPage - 1) * gObj.pageSettings.pageSize) === count) || (count && count <= dataLength)) {\n                    gObj.prevPageMoving = true;\n                    gObj.setProperties({\n                        pageSettings: {\n                            totalRecordsCount: count, currentPage: Math.ceil(count / gObj.pageSettings.pageSize)\n                        }\n                    }, true);\n                    gObj.pagerModule.pagerObj.totalRecordsCount = count;\n                }\n            }\n            if (args.requestType === 'reorder' && _this.parent.dataSource && 'result' in _this.parent.dataSource) {\n                _this.contentRenderer.refreshContentRows(args);\n            }\n            else if ((args.requestType === 'paging' || args.requestType === 'columnstate' || args.requestType === 'reorder')\n                && _this.parent.groupSettings.enableLazyLoading && _this.parent.groupSettings.columns.length\n                && (_this.parent.enableVirtualization ? _this.parent.lazyLoadRender :\n                    _this.parent.contentModule).getGroupCache()[_this.parent.pageSettings.currentPage]) {\n                _this.contentRenderer.refreshContentRows(args);\n            }\n            else {\n                _this.refreshDataManager(args);\n            }\n        });\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    Render.prototype.resetTemplates = function () {\n        var gObj = this.parent;\n        var gridColumns = gObj.getColumns();\n        if (gObj.detailTemplate) {\n            var detailTemplateID = gObj.element.id + 'detailTemplate';\n            blazorTemplates[\"\" + detailTemplateID] = [];\n            resetBlazorTemplate(detailTemplateID, 'DetailTemplate');\n        }\n        if (gObj.groupSettings.captionTemplate) {\n            resetBlazorTemplate(gObj.element.id + 'captionTemplate', 'CaptionTemplate');\n        }\n        if (gObj.rowTemplate) {\n            resetBlazorTemplate(gObj.element.id + 'rowTemplate', 'RowTemplate');\n        }\n        if (gObj.toolbarTemplate) {\n            resetBlazorTemplate(gObj.element.id + 'toolbarTemplate', 'ToolbarTemplate');\n        }\n        if (gObj.pageSettings.template) {\n            resetBlazorTemplate(gObj.element.id + '_template', 'pageSettings');\n        }\n        for (var i = 0; i < gridColumns.length; i++) {\n            if (gridColumns[parseInt(i.toString(), 10)].template) {\n                blazorTemplates[gObj.element.id + gridColumns[parseInt(i.toString(), 10)].uid] = [];\n                resetBlazorTemplate(gObj.element.id + gridColumns[parseInt(i.toString(), 10)].uid, 'Template');\n            }\n            if (gridColumns[parseInt(i.toString(), 10)].headerTemplate) {\n                resetBlazorTemplate(gObj.element.id + gridColumns[parseInt(i.toString(), 10)].uid + 'headerTemplate', 'HeaderTemplate');\n            }\n            if (gridColumns[parseInt(i.toString(), 10)].filterTemplate) {\n                resetBlazorTemplate(gObj.element.id + gridColumns[parseInt(i.toString(), 10)].uid + 'filterTemplate', 'FilterTemplate');\n            }\n        }\n        var guid = 'guid';\n        for (var k = 0; k < gObj.aggregates.length; k++) {\n            for (var j = 0; j < gObj.aggregates[parseInt(k.toString(), 10)].columns.length; j++) {\n                if (gObj.aggregates[parseInt(k.toString(), 10)].columns[parseInt(j.toString(), 10)].footerTemplate) {\n                    var tempID = gObj.element.id + gObj.aggregates[parseInt(k.toString(), 10)].columns[parseInt(j.toString(), 10)][\"\" + guid] + 'footerTemplate';\n                    resetBlazorTemplate(tempID, 'FooterTemplate');\n                }\n                if (gObj.aggregates[parseInt(k.toString(), 10)].columns[parseInt(j.toString(), 10)].groupFooterTemplate) {\n                    var tempID = gObj.element.id + gObj.aggregates[parseInt(k.toString(), 10)].columns[parseInt(j.toString(), 10)][\"\" + guid] + 'groupFooterTemplate';\n                    resetBlazorTemplate(tempID, 'GroupFooterTemplate');\n                }\n                if (gObj.aggregates[parseInt(k.toString(), 10)].columns[parseInt(j.toString(), 10)].groupCaptionTemplate) {\n                    var tempID = gObj.element.id + gObj.aggregates[parseInt(k.toString(), 10)].columns[parseInt(j.toString(), 10)][\"\" + guid] + 'groupCaptionTemplate';\n                    resetBlazorTemplate(tempID, 'GroupCaptionTemplate');\n                }\n            }\n        }\n    };\n    Render.prototype.refreshComplete = function (e) {\n        this.parent.trigger(events.actionComplete, e);\n    };\n    /**\n     * The function is used to refresh the dataManager\n     *\n     * @param {NotifyArgs} args - specifies the args\n     * @returns {void}\n     */\n    Render.prototype.refreshDataManager = function (args) {\n        var _this = this;\n        if (args === void 0) { args = {}; }\n        var gObj = this.parent;\n        var maskRow = (gObj.loadingIndicator.indicatorType === 'Shimmer' && args.requestType !== 'virtualscroll'\n            && args.requestType !== 'infiniteScroll') || ((args.requestType === 'virtualscroll' || args.requestType === 'infiniteScroll')\n            && gObj.enableVirtualMaskRow);\n        if (args.requestType !== 'virtualscroll' && !args.isCaptionCollapse && !maskRow) {\n            this.parent.showSpinner();\n        }\n        if (maskRow) {\n            gObj.showMaskRow(args.requestType === 'virtualscroll' ? args.virtualInfo.sentinelInfo.axis\n                : args.requestType === 'infiniteScroll' ? args.direction : undefined);\n        }\n        this.parent.notify(events.resetInfiniteBlocks, args);\n        this.emptyGrid = false;\n        var dataManager;\n        var isFActon = this.isNeedForeignAction();\n        this.ariaService.setBusy(this.parent.getContent().querySelector('.' + literals.content), true);\n        if (isFActon) {\n            var deffered = new Deferred();\n            dataManager = this.getFData(deffered, args);\n        }\n        if (!dataManager) {\n            if (gObj.allowPaging && !gObj.getDataModule().dataManager.dataSource.offline && gObj.pageSettings\n                && gObj.pageSettings.pageSizes && gObj.pagerModule && gObj.pagerModule.pagerObj && gObj.pagerModule.pagerObj.isAllPage) {\n                gObj.pagerModule.pagerObj.isAllPage = undefined;\n            }\n            dataManager = this.data.getData(args, this.data.generateQuery().requiresCount());\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            dataManager = dataManager.then(function (e) {\n                var query = _this.data.generateQuery().requiresCount();\n                if (_this.emptyGrid) {\n                    var def = new Deferred();\n                    def.resolve({ result: [], count: 0 });\n                    return def.promise;\n                }\n                return _this.data.getData(args, query);\n            });\n        }\n        if (this.parent.getForeignKeyColumns().length && (!isFActon || this.parent.searchSettings.key.length)) {\n            var deffered_1 = new Deferred();\n            dataManager = dataManager.then(function (e) {\n                _this.parent.notify(events.getForeignKeyData, { dataManager: dataManager, result: e, promise: deffered_1, action: args });\n                return deffered_1.promise;\n            });\n        }\n        if (this.parent.groupSettings.disablePageWiseAggregates && this.parent.groupSettings.columns.length) {\n            dataManager = dataManager.then(function (e) { return _this.validateGroupRecords(e); });\n        }\n        dataManager.then(function (e) { return _this.dataManagerSuccess(e, args); })\n            .catch(function (e) { return _this.dataManagerFailure(e, args); });\n    };\n    Render.prototype.getFData = function (deferred, args) {\n        this.parent.notify(events.getForeignKeyData, { isComplex: true, promise: deferred, action: args });\n        return deferred.promise;\n    };\n    Render.prototype.isNeedForeignAction = function () {\n        var gObj = this.parent;\n        return !!((gObj.allowFiltering && gObj.filterSettings.columns.length) ||\n            (gObj.searchSettings.key.length)) && this.foreignKey(this.parent.getForeignKeyColumns());\n    };\n    Render.prototype.foreignKey = function (columns) {\n        var _this = this;\n        return columns.some(function (col) {\n            var fbool = false;\n            fbool = _this.parent.filterSettings.columns.some(function (value) {\n                return col.uid === value.uid;\n            });\n            return !!(fbool || _this.parent.searchSettings.key.length);\n        });\n    };\n    Render.prototype.sendBulkRequest = function (args) {\n        var _this = this;\n        args.requestType = 'batchsave';\n        var gObj = this.parent;\n        if (gObj.allowPaging && gObj.pageSettings.pageSizes && gObj.pagerModule.pagerObj.isAllPage && gObj.pagerModule.pagerObj.checkAll) {\n            var dataLength = args['changes'].addedRecords.length;\n            if (dataLength) {\n                gObj.setProperties({ pageSettings: { pageSize: gObj.pageSettings.pageSize + dataLength } }, true);\n            }\n        }\n        if (gObj.allowPaging && (args.changes.addedRecords.length ||\n            args.changes.deletedRecords.length ||\n            args.changes.changedRecords.length) && gObj.pageSettings\n            && gObj.pageSettings.pageSizes && gObj.pagerModule && gObj.pagerModule.pagerObj\n            && !gObj.getDataModule().dataManager.dataSource.offline && gObj.pagerModule.pagerObj.isAllPage) {\n            gObj.pagerModule.pagerObj.isAllPage = undefined;\n        }\n        var promise = this.data.saveChanges(args.changes, this.parent.getPrimaryKeyFieldNames()[0], args.original);\n        var query = this.data.generateQuery().requiresCount();\n        if (this.data.dataManager.dataSource.offline) {\n            this.refreshDataManager({ requestType: 'batchsave' });\n            return;\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            promise.then(function (e) {\n                _this.data.getData(args, query)\n                    .then(function (e) { return _this.dmSuccess(e, args); })\n                    .catch(function (e) { return _this.dmFailure(e, args); });\n            })\n                .catch(function (e) { return _this.dmFailure(e, args); });\n        }\n    };\n    Render.prototype.dmSuccess = function (e, args) {\n        this.dataManagerSuccess(e, args);\n    };\n    Render.prototype.dmFailure = function (e, args) {\n        this.dataManagerFailure(e, args);\n    };\n    /**\n     * Render empty row to Grid which is used at the time to represent to no records.\n     *\n     * @returns {void}\n     * @hidden\n     */\n    Render.prototype.renderEmptyRow = function () {\n        this.emptyRow(true);\n    };\n    Render.prototype.emptyRow = function (isTrigger) {\n        var gObj = this.parent;\n        var tbody = this.contentRenderer.getTable().querySelector(literals.tbody);\n        if (!isNullOrUndefined(tbody)) {\n            remove(tbody);\n        }\n        tbody = this.parent.createElement(literals.tbody, { attrs: { role: 'rowgroup' } });\n        var spanCount = 0;\n        if (gObj.detailTemplate || gObj.childGrid) {\n            ++spanCount;\n        }\n        var tr = this.parent.createElement('tr', { className: 'e-emptyrow', attrs: { role: 'row' } });\n        var td;\n        if (gObj.emptyRecordTemplate) {\n            var emptyRecordTemplateID = gObj.element.id + 'emptyRecordTemplate';\n            td = this.parent.createElement('td', { attrs: { colspan: (gObj.getVisibleColumns().length + spanCount + gObj.groupSettings.columns.length).toString() } });\n            if (gObj.isVue) {\n                td.appendChild(gObj.getEmptyRecordTemplate()(gObj.dataSource, gObj, 'emptyRecordTemplate', emptyRecordTemplateID, undefined, undefined, undefined, this.parent['root'])[1]);\n            }\n            else {\n                td.appendChild(gObj.getEmptyRecordTemplate()(gObj.dataSource, gObj, 'emptyRecordTemplate', emptyRecordTemplateID, undefined, undefined, undefined, this.parent['root'])[0]);\n            }\n            if (gObj.isReact) {\n                this.parent.renderTemplates();\n            }\n        }\n        else {\n            td = this.parent.createElement('td', {\n                innerHTML: this.l10n.getConstant('EmptyRecord'),\n                attrs: { colspan: (gObj.getVisibleColumns().length + spanCount + gObj.groupSettings.columns.length).toString() }\n            });\n        }\n        if (gObj.isFrozenGrid()) {\n            td.classList.add('e-leftfreeze');\n            td.style.left = 0 + 'px';\n        }\n        if (gObj.frozenRows && gObj.element.querySelector('.e-frozenrow-border')) {\n            this.parent.element.querySelector('.e-frozenrow-border').classList.add('e-frozenrow-empty');\n        }\n        tr.appendChild(td);\n        tbody.appendChild(tr);\n        this.contentRenderer.renderEmpty(tbody);\n        if (isTrigger) {\n            this.parent.trigger(events.dataBound, {});\n            this.parent.notify(events.onEmpty, { rows: [new Row({ isDataRow: true, cells: [new Cell({ isDataCell: true, visible: true })] })] });\n        }\n    };\n    Render.prototype.dynamicColumnChange = function () {\n        if (this.parent.getCurrentViewRecords().length) {\n            this.updateColumnType(this.parent.getCurrentViewRecords()[0]);\n        }\n    };\n    Render.prototype.updateColumnType = function (record) {\n        var columns = this.parent.getColumns();\n        var value;\n        var cFormat = 'customFormat';\n        var equalTo = 'equalTo';\n        var data = record && record.items ? record.items[0] : record;\n        var fmtr = this.locator.getService('valueFormatter');\n        for (var i = 0, len = columns.length; i < len; i++) {\n            value = getObject(columns[parseInt(i.toString(), 10)].field || '', data);\n            if (!isNullOrUndefined(columns[parseInt(i.toString(), 10)][\"\" + cFormat])) {\n                columns[parseInt(i.toString(), 10)].format = columns[parseInt(i.toString(), 10)][\"\" + cFormat];\n            }\n            if (!isNullOrUndefined(columns[parseInt(i.toString(), 10)].validationRules)\n                && !isNullOrUndefined(columns[parseInt(i.toString(), 10)].validationRules[\"\" + equalTo])) {\n                columns[parseInt(i.toString(), 10)].validationRules[\"\" + equalTo][0] = this.parent.element.id + columns[parseInt(i.toString(), 10)].validationRules[\"\" + equalTo][0];\n            }\n            if (columns[parseInt(i.toString(), 10)].isForeignColumn() && columns[parseInt(i.toString(), 10)].columnData) {\n                value = getObject(columns[parseInt(i.toString(), 10)].foreignKeyValue || '', columns[parseInt(i.toString(), 10)].columnData[0]);\n            }\n            if (!isNullOrUndefined(value)) {\n                this.isColTypeDef = true;\n                if (!columns[parseInt(i.toString(), 10)].type) {\n                    columns[parseInt(i.toString(), 10)].type = value.getDay ? (value.getHours() > 0 || value.getMinutes() > 0 ||\n                        value.getSeconds() > 0 || value.getMilliseconds() > 0 ? 'datetime' : 'date') : typeof (value);\n                }\n            }\n            else {\n                columns[parseInt(i.toString(), 10)].type = columns[parseInt(i.toString(), 10)].type || null;\n            }\n            var valueFormatter = new ValueFormatter();\n            if (columns[parseInt(i.toString(), 10)].format && (columns[parseInt(i.toString(), 10)].format.skeleton\n                || (columns[parseInt(i.toString(), 10)].format.format &&\n                    typeof columns[parseInt(i.toString(), 10)].format.format === 'string'))) {\n                columns[parseInt(i.toString(), 10)].setFormatter(valueFormatter.getFormatFunction(extend({}, columns[parseInt(i.toString(), 10)].format)));\n                columns[parseInt(i.toString(), 10)].setParser(valueFormatter.getParserFunction(columns[parseInt(i.toString(), 10)].format));\n            }\n            if (typeof (columns[parseInt(i.toString(), 10)].format) === 'string') {\n                setFormatter(this.locator, columns[parseInt(i.toString(), 10)]);\n            }\n            else if (!columns[parseInt(i.toString(), 10)].format && columns[parseInt(i.toString(), 10)].type === 'number') {\n                columns[parseInt(i.toString(), 10)].setParser(fmtr.getParserFunction({ format: 'n2' }));\n            }\n            if (columns[parseInt(i.toString(), 10)].type === 'dateonly' && !columns[parseInt(i.toString(), 10)].format) {\n                columns[parseInt(i.toString(), 10)].format = 'yMd';\n                setFormatter(this.locator, columns[parseInt(i.toString(), 10)]);\n            }\n        }\n    };\n    /**\n     * @param {ReturnType} e - specifies the return type\n     * @param {NotifyArgs} args - specifies the Notifyargs\n     * @returns {void}\n     * @hidden\n     */\n    // tslint:disable-next-line:max-func-body-length\n    Render.prototype.dataManagerSuccess = function (e, args) {\n        var _this = this;\n        var gObj = this.parent;\n        this.contentRenderer = this.renderer.getRenderer(RenderType.Content);\n        this.headerRenderer = this.renderer.getRenderer(RenderType.Header);\n        e.actionArgs = args;\n        var isInfiniteDelete = this.parent.enableInfiniteScrolling && !this.parent.infiniteScrollSettings.enableCache &&\n            !gObj.groupSettings.enableLazyLoading && (args.requestType === 'delete' || (args.requestType === 'save' &&\n            this.parent.infiniteScrollModule.requestType === 'add' && !(gObj.sortSettings.columns.length ||\n            gObj.filterSettings.columns.length || this.parent.groupSettings.columns.length || gObj.searchSettings.key)));\n        // tslint:disable-next-line:max-func-body-length\n        gObj.trigger(events.beforeDataBound, e, function (dataArgs) {\n            if (dataArgs.cancel) {\n                return;\n            }\n            dataArgs.result = isNullOrUndefined(dataArgs.result) ? [] : dataArgs.result;\n            var len = Object.keys(dataArgs.result).length;\n            if (_this.parent.isDestroyed) {\n                return;\n            }\n            if ((!gObj.getColumns().length && !len) && !(gObj.columns.length && gObj.columns[0] instanceof Column)) {\n                gObj.hideSpinner();\n                return;\n            }\n            if (_this.isInfiniteEnd(args) && !len) {\n                _this.parent.notify(events.infiniteEditHandler, { e: args, result: e.result, count: e.count, agg: e.aggregates });\n                return;\n            }\n            _this.parent.isEdit = false;\n            _this.parent.notify(events.editReset, {});\n            _this.parent.notify(events.tooltipDestroy, {});\n            if (args && args.requestType !== 'infiniteScroll') {\n                _this.parent.notify(events.commandColumnDestroy, { type: 'refreshCommandColumn' });\n            }\n            _this.contentRenderer.prevCurrentView = _this.parent.currentViewData.slice();\n            gObj.currentViewData = dataArgs.result;\n            gObj.notify(events.refreshInfiniteCurrentViewData, { args: args, data: dataArgs.result });\n            if (dataArgs.count && !gObj.allowPaging && (gObj.enableVirtualization || gObj.enableInfiniteScrolling)) {\n                gObj.totalDataRecordsCount = dataArgs.count;\n            }\n            if (!len && dataArgs.count && gObj.allowPaging && args && args.requestType !== 'delete') {\n                if (_this.parent.groupSettings.enableLazyLoading\n                    && (args.requestType === 'grouping' || args.requestType === 'ungrouping')) {\n                    _this.parent.notify(events.groupComplete, args);\n                }\n                gObj.prevPageMoving = true;\n                gObj.pageSettings.totalRecordsCount = dataArgs.count;\n                if (args.requestType !== 'paging') {\n                    gObj.pageSettings.currentPage = Math.ceil(dataArgs.count / gObj.pageSettings.pageSize);\n                }\n                gObj.dataBind();\n                return;\n            }\n            if ((!gObj.getColumns().length && len || !_this.isLayoutRendered) && !isGroupAdaptive(gObj)) {\n                gObj.removeMaskRow();\n                _this.updatesOnInitialRender(dataArgs);\n            }\n            if (!_this.isColTypeDef && gObj.getCurrentViewRecords()) {\n                if (_this.data.dataManager.dataSource.offline && gObj.dataSource && gObj.dataSource.length) {\n                    _this.updateColumnType(gObj.dataSource[0]);\n                }\n                else {\n                    _this.updateColumnType(gObj.getCurrentViewRecords()[0]);\n                }\n            }\n            if (!_this.parent.isInitialLoad && _this.parent.groupSettings.disablePageWiseAggregates &&\n                !_this.parent.groupSettings.columns.length) {\n                dataArgs.result = _this.parent.dataSource instanceof Array ? _this.parent.dataSource : _this.parent.currentViewData;\n            }\n            if ((_this.parent.isReact || _this.parent.isVue) && !isNullOrUndefined(args) && args.requestType !== 'infiniteScroll' && !args.isFrozen) {\n                clearReactVueTemplates(_this.parent, ['footerTemplate']);\n            }\n            if (_this.parent.isAngular && _this.parent.allowGrouping && _this.parent.groupSettings.captionTemplate\n                && !(!isNullOrUndefined(args) && args.requestType === 'infiniteScroll')) {\n                _this.parent.destroyTemplate(['groupSettings_captionTemplate']);\n            }\n            _this.parent.notify(events.dataReady, extend({ count: dataArgs.count, result: dataArgs.result, aggregates: dataArgs.aggregates }, args));\n            if ((gObj.groupSettings.columns.length || (args && args.requestType === 'ungrouping'))\n                && (args && args.requestType !== 'filtering')) {\n                _this.headerRenderer.refreshUI();\n            }\n            if (len) {\n                if (isGroupAdaptive(gObj)) {\n                    var content = 'content';\n                    args.scrollTop = { top: _this.contentRenderer[\"\" + content].scrollTop };\n                }\n                if (!isInfiniteDelete) {\n                    if (_this.parent.enableImmutableMode) {\n                        _this.contentRenderer.immutableModeRendering(args);\n                    }\n                    else {\n                        _this.contentRenderer.refreshContentRows(args);\n                    }\n                }\n                else {\n                    _this.parent.notify(events.infiniteEditHandler, { e: args, result: e.result, count: e.count, agg: e.aggregates });\n                }\n            }\n            else {\n                if (args && args.isCaptionCollapse) {\n                    return;\n                }\n                if (!gObj.getColumns().length) {\n                    gObj.element.innerHTML = '';\n                    alert(_this.l10n.getConstant('EmptyDataSourceError')); //ToDO: change this alert as dialog\n                    return;\n                }\n                _this.contentRenderer.setRowElements([]);\n                _this.contentRenderer.setRowObjects([]);\n                _this.ariaService.setBusy(_this.parent.getContent().querySelector('.' + literals.content), false);\n                gObj.removeMaskRow();\n                _this.renderEmptyRow();\n                if (gObj.enableColumnVirtualization && !len) {\n                    _this.parent.notify(events.contentReady, { rows: gObj.getRowsObject(), args: {} });\n                }\n                if (args) {\n                    var action = (args.requestType || '').toLowerCase() + '-complete';\n                    _this.parent.notify(action, args);\n                    if (args.requestType === 'batchsave') {\n                        args.cancel = false;\n                        args.rows = [];\n                        args.isFrozen = !args.isFrozen;\n                        _this.parent.trigger(events.actionComplete, args);\n                    }\n                }\n                if (_this.parent.autoFit) {\n                    _this.parent.preventAdjustColumns();\n                }\n                _this.parent.hideSpinner();\n            }\n            _this.parent.notify(events.toolbarRefresh, {});\n            _this.setRowCount(_this.parent.getCurrentViewRecords().length);\n            if ('query' in e) {\n                _this.parent.getDataModule().isQueryInvokedFromData = false;\n            }\n        });\n    };\n    /**\n     * @param {object} e - specifies the object\n     * @param {Object[]} e.result - specifies the result\n     * @param {NotifyArgs} args - specifies the args\n     * @returns {void}\n     * @hidden\n     */\n    Render.prototype.dataManagerFailure = function (e, args) {\n        if (!isNullOrUndefined(this.parent.contentModule)) {\n            this.ariaService.setOptions(this.parent.getContent().querySelector('.' + literals.content), { busy: false, invalid: true });\n            this.setRowCount(1);\n        }\n        this.parent.trigger(events.actionFailure, { error: e });\n        this.parent.hideSpinner();\n        this.parent.removeMaskRow();\n        if (args.requestType === 'save' || args.requestType === 'delete'\n            || args.name === 'bulk-save') {\n            return;\n        }\n        this.parent.currentViewData = [];\n        this.renderEmptyRow();\n        if (!this.parent.isInitialLoad) {\n            this.parent.focusModule.setFirstFocusableTabIndex();\n        }\n        this.parent.log('actionfailure', { error: e });\n    };\n    Render.prototype.setRowCount = function (dataRowCount) {\n        this.ariaService.setOptions(this.parent.element, {\n            rowcount: dataRowCount ? dataRowCount.toString() : '1'\n        });\n    };\n    Render.prototype.isInfiniteEnd = function (args) {\n        return this.parent.enableInfiniteScrolling && !this.parent.infiniteScrollSettings.enableCache && args.requestType === 'delete';\n    };\n    Render.prototype.updatesOnInitialRender = function (e) {\n        this.isLayoutRendered = true;\n        var isEmptyCol = false;\n        if (this.parent.columns.length < 1) {\n            this.buildColumns(e.result[0]);\n            isEmptyCol = true;\n        }\n        prepareColumns(this.parent.columns, null, this.parent);\n        if (isEmptyCol) {\n            this.parent.notify(events.refreshSplitFrozenColumn, {});\n        }\n        this.headerRenderer.renderTable();\n        this.contentRenderer.renderTable();\n        this.parent.isAutoGen = true;\n        this.parent.notify(events.autoCol, {});\n    };\n    Render.prototype.iterateComplexColumns = function (obj, field, split) {\n        var keys = Object.keys(obj);\n        for (var i = 0; i < keys.length; i++) {\n            var childKeys = typeof obj[keys[parseInt(i.toString(), 10)]] === 'object'\n                && obj[keys[parseInt(i.toString(), 10)]] && !(obj[keys[parseInt(i.toString(), 10)]] instanceof Date) ?\n                Object.keys(obj[keys[parseInt(i.toString(), 10)]]) : [];\n            if (childKeys.length) {\n                this.iterateComplexColumns(obj[keys[parseInt(i.toString(), 10)]], field + (keys[parseInt(i.toString(), 10)] + '.'), split);\n            }\n            else {\n                split[this.counter] = field + keys[parseInt(i.toString(), 10)];\n                this.counter++;\n            }\n        }\n    };\n    Render.prototype.buildColumns = function (record) {\n        var cols = [];\n        var complexCols = {};\n        this.iterateComplexColumns(record, '', complexCols);\n        var columns = Object.keys(complexCols).filter(function (e) { return complexCols[\"\" + e] !== 'BlazId'; }).\n            map(function (field) { return complexCols[\"\" + field]; });\n        for (var i = 0, len = columns.length; i < len; i++) {\n            cols[parseInt(i.toString(), 10)] = { 'field': columns[parseInt(i.toString(), 10)] };\n            if (this.parent.enableColumnVirtualization) {\n                cols[parseInt(i.toString(), 10)].width = !isNullOrUndefined(cols[parseInt(i.toString(), 10)].width) ?\n                    cols[parseInt(i.toString(), 10)].width : 200;\n            }\n        }\n        this.parent.setProperties({ 'columns': cols }, true);\n    };\n    Render.prototype.instantiateRenderer = function () {\n        this.renderer.addRenderer(RenderType.Header, new HeaderRender(this.parent, this.locator));\n        this.renderer.addRenderer(RenderType.Content, new ContentRender(this.parent, this.locator));\n        var cellrender = this.locator.getService('cellRendererFactory');\n        cellrender.addCellRenderer(CellType.Header, new HeaderCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.Data, new CellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.StackedHeader, new StackedHeaderCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.Indent, new IndentCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.GroupCaption, new GroupCaptionCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.GroupCaptionEmpty, new GroupCaptionEmptyCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.Expand, new ExpandCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.HeaderIndent, new HeaderIndentCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.StackedHeader, new StackedHeaderCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.DetailHeader, new DetailHeaderIndentCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.RowDragHIcon, new RowDragDropHeaderRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.DetailExpand, new DetailExpandCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.DetailFooterIntent, new IndentCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.RowDragIcon, new RowDragDropRenderer(this.parent, this.locator));\n    };\n    Render.prototype.addEventListener = function () {\n        var _this = this;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialLoad, this.instantiateRenderer, this);\n        this.parent.on('refreshdataSource', this.dataManagerSuccess, this);\n        this.parent.on(events.modelChanged, this.refresh, this);\n        this.parent.on(events.refreshComplete, this.refreshComplete, this);\n        this.parent.on(events.bulkSave, this.sendBulkRequest, this);\n        this.parent.on(events.showEmptyGrid, function () { _this.emptyGrid = true; }, this);\n        this.parent.on(events.autoCol, this.dynamicColumnChange, this);\n    };\n    /**\n     * @param {ReturnType} e - specifies the Return type\n     * @returns {Promise<Object>} returns the object\n     * @hidden\n     */\n    Render.prototype.validateGroupRecords = function (e) {\n        var _this = this;\n        var index = e.result.length - 1;\n        if (index < 0) {\n            return Promise.resolve(e);\n        }\n        var group0 = e.result[0];\n        var groupN = e.result[parseInt(index.toString(), 10)];\n        var predicate = [];\n        var addWhere = function (input) {\n            var groups = [group0, groupN];\n            for (var i = 0; i < groups.length; i++) {\n                predicate.push(new Predicate('field', '==', groups[parseInt(i.toString(), 10)].field).and(_this.getPredicate('key', 'equal', groups[parseInt(i.toString(), 10)].key)));\n            }\n            input.where(Predicate.or(predicate));\n        };\n        var query = new Query();\n        addWhere(query);\n        var curDm = new DataManager(e.result);\n        var curFilter = curDm.executeLocal(query);\n        var newQuery = this.data.generateQuery(true);\n        var rPredicate = [];\n        if (this.data.isRemote()) {\n            var groups = [group0, groupN];\n            for (var i = 0; i < groups.length; i++) {\n                rPredicate.push(this.getPredicate(groups[parseInt(i.toString(), 10)].field, 'equal', groups[parseInt(i.toString(), 10)].key));\n            }\n            newQuery.where(Predicate.or(rPredicate));\n        }\n        else {\n            addWhere(newQuery);\n        }\n        var deferred = new Deferred();\n        this.data.getData({}, newQuery).then(function (r) {\n            _this.updateGroupInfo(curFilter, r.result);\n            deferred.resolve(e);\n        }).catch(function (e) { return deferred.reject(e); });\n        return deferred.promise;\n    };\n    Render.prototype.getPredicate = function (key, operator, value) {\n        if (value instanceof Date) {\n            return getDatePredicate({ field: key, operator: operator, value: value });\n        }\n        return new Predicate(key, operator, value);\n    };\n    Render.prototype.updateGroupInfo = function (current, untouched) {\n        var dm = new DataManager(untouched);\n        var elements = current;\n        for (var i = 0; i < elements.length; i++) {\n            var uGroup = dm.executeLocal(new Query()\n                .where(new Predicate('field', '==', elements[parseInt(i.toString(), 10)].field).and(this.getPredicate('key', 'equal', elements[parseInt(i.toString(), 10)].key))))[0];\n            elements[parseInt(i.toString(), 10)].count = uGroup.count;\n            var itemGroup = elements[parseInt(i.toString(), 10)].items;\n            var uGroupItem = uGroup.items;\n            if (itemGroup.GroupGuid) {\n                elements[parseInt(i.toString(), 10)].items =\n                    this.updateGroupInfo(elements[parseInt(i.toString(), 10)].items, uGroup.items);\n            }\n            var rows = this.parent.aggregates;\n            for (var j = 0; j < rows.length; j++) {\n                var row = rows[parseInt(j.toString(), 10)];\n                for (var k = 0; k < row.columns.length; k++) {\n                    var types = row.columns[parseInt(k.toString(), 10)].type instanceof Array ?\n                        (row.columns[parseInt(k.toString(), 10)].type) :\n                        [(row.columns[parseInt(k.toString(), 10)].type)];\n                    for (var l = 0; l < types.length; l++) {\n                        var key = row.columns[parseInt(k.toString(), 10)].field + ' - ' + types[parseInt(l.toString(), 10)].toLowerCase();\n                        var data = itemGroup.level ? uGroupItem.records : uGroup.items;\n                        var context = this.parent;\n                        if (types[parseInt(l.toString(), 10)] === 'Custom') {\n                            var data_1 = itemGroup.level ? uGroupItem : uGroup;\n                            var temp = row.columns[parseInt(k.toString(), 10)]\n                                .customAggregate;\n                            if (typeof temp === 'string') {\n                                temp = getValue(temp, window);\n                            }\n                            elements[parseInt(i.toString(), 10)].aggregates[\"\" + key] = temp ? temp.call(context, data_1, row.columns[parseInt(k.toString(), 10)]) : '';\n                        }\n                        else {\n                            elements[parseInt(i.toString(), 10)].aggregates[\"\" + key] = DataUtil.aggregates[types[parseInt(l.toString(), 10)].toLowerCase()](data, row.columns[parseInt(k.toString(), 10)].field);\n                        }\n                    }\n                }\n            }\n        }\n        return current;\n    };\n    return Render;\n}());\nexport { Render };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}