{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nimport { EventHandler, Browser, select, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { debounce, Touch } from '@syncfusion/ej2-base';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nvar VirtualScroll = /** @class */function () {\n  function VirtualScroll(parent) {\n    var _this = this;\n    this.sentinelInfo = {\n      'up': {\n        check: function (rect, info) {\n          var top = rect.top - _this.containerElementRect.top;\n          info.entered = top >= 0;\n          return top + _this.parent.listItemHeight * _this.parent.virtualItemCount / 2 >= 0;\n        },\n        axis: 'Y'\n      },\n      'down': {\n        check: function (rect, info) {\n          var cHeight = _this.parent.popupContentElement.clientHeight;\n          var top = rect.bottom;\n          info.entered = rect.bottom <= _this.containerElementRect.bottom;\n          return top - _this.parent.listItemHeight * _this.parent.virtualItemCount / 2 <= _this.parent.listItemHeight * _this.parent.virtualItemCount / 2;\n        },\n        axis: 'Y'\n      }\n    };\n    this.parent = parent;\n    this.removeEventListener();\n    this.addEventListener();\n  }\n  VirtualScroll.prototype.addEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.parent.on('observe', this.observe, this);\n    this.parent.on('setGeneratedData', this.setGeneratedData, this);\n    this.parent.on('dataProcessAsync', this.dataProcessAsync, this);\n    this.parent.on('setCurrentViewDataAsync', this.setCurrentViewDataAsync, this);\n    this.parent.on('bindScrollEvent', this.bindScrollEvent, this);\n  };\n  VirtualScroll.prototype.removeEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.parent.off('observe', this.observe);\n    this.parent.off('setGeneratedData', this.setGeneratedData);\n    this.parent.off('dataProcessAsync', this.dataProcessAsync);\n    this.parent.off('setCurrentViewDataAsync', this.setCurrentViewDataAsync);\n    this.parent.off('bindScrollEvent', this.bindScrollEvent);\n  };\n  VirtualScroll.prototype.bindScrollEvent = function (component) {\n    var _this = this;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    this.component = component.component;\n    this.observe(function (scrollArgs) {\n      return _this.scrollListener(scrollArgs);\n    });\n  };\n  VirtualScroll.prototype.observe = function (callback) {\n    this.containerElementRect = this.parent.popupContentElement.getBoundingClientRect();\n    EventHandler.add(this.parent.popupContentElement, 'wheel mousedown', this.popupScrollHandler, this);\n    this.touchModule = new Touch(this.parent.popupContentElement, {\n      scroll: this.popupScrollHandler.bind(this)\n    });\n    EventHandler.add(this.parent.popupContentElement, 'scroll', this.virtualScrollHandler(callback), this);\n  };\n  VirtualScroll.prototype.getModuleName = function () {\n    return 'VirtualScroll';\n  };\n  VirtualScroll.prototype.popupScrollHandler = function (e) {\n    this.parent.isMouseScrollAction = true;\n    this.parent.isPreventScrollAction = false;\n  };\n  VirtualScroll.prototype.getPageQuery = function (query, virtualStartIndex, virtualEndIndex) {\n    if (virtualEndIndex !== 0 && !this.parent.allowFiltering && this.component !== 'autocomplete') {\n      query = query.skip(virtualStartIndex);\n    }\n    return query;\n  };\n  VirtualScroll.prototype.setGeneratedData = function (qStartIndex, recentlyGeneratedData) {\n    var loopIteration = 0;\n    var endIndex = this.parent.listData.length + this.parent.virtualItemStartIndex;\n    for (var i = this.parent.virtualItemStartIndex; i < endIndex; i++) {\n      var alreadyAddedData = this.parent.generatedDataObject[i];\n      if (!alreadyAddedData) {\n        if (recentlyGeneratedData !== null && this.parent.listData.slice(loopIteration, loopIteration + 1).length > 0) {\n          var slicedData = this.parent.listData.slice(loopIteration, loopIteration + 1);\n          if (slicedData.length > 0) {\n            // Safely assign slicedData to this.parent.generatedDataObject[i]\n            this.parent.generatedDataObject[i] = slicedData;\n          }\n        }\n      }\n      loopIteration++;\n    }\n  };\n  VirtualScroll.prototype.generateAndExecuteQueryAsync = function (query, virtualItemStartIndex, virtualItemEndIndex, isQueryGenerated) {\n    if (virtualItemStartIndex === void 0) {\n      virtualItemStartIndex = 0;\n    }\n    if (virtualItemEndIndex === void 0) {\n      virtualItemEndIndex = 0;\n    }\n    if (isQueryGenerated === void 0) {\n      isQueryGenerated = false;\n    }\n    var dataSource = this.parent.dataSource;\n    if (!isQueryGenerated) {\n      if (!isNullOrUndefined(this.parent.query)) {\n        var newQuery = this.removeSkipAndTakeEvents(this.parent.query.clone());\n        query = this.getPageQuery(newQuery, virtualItemStartIndex, virtualItemEndIndex);\n      } else {\n        query = this.getPageQuery(query, virtualItemStartIndex, virtualItemEndIndex);\n      }\n    }\n    var tempCustomFilter = this.parent.isCustomFilter;\n    if (this.component === 'combobox') {\n      var totalData = 0;\n      if (this.parent.dataSource instanceof DataManager) {\n        totalData = this.parent.dataSource.dataSource.json.length;\n      } else if (this.parent.dataSource && this.parent.dataSource.length > 0) {\n        totalData = this.parent.dataSource.length;\n      }\n      if (totalData > 0) {\n        this.parent.isCustomFilter = totalData == this.parent.totalItemCount && this.parent.queryString != this.parent.typedString ? true : this.parent.isCustomFilter;\n      }\n    }\n    this.parent.resetList(dataSource, this.parent.fields, query);\n    this.parent.isCustomFilter = tempCustomFilter;\n  };\n  VirtualScroll.prototype.removeSkipAndTakeEvents = function (query) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    query.queries = query.queries.filter(function (event) {\n      return event.fn !== 'onSkip' && event.fn !== 'onTake';\n    });\n    return query;\n  };\n  VirtualScroll.prototype.setCurrentViewDataAsync = function () {\n    // eslint-disable-next-line\n    var currentData = [];\n    for (var i = this.parent.viewPortInfo.startIndex; i < this.parent.viewPortInfo.endIndex; i++) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      var alreadyAddedData = this.parent.generatedDataObject[i];\n      if (alreadyAddedData) {\n        currentData.push(alreadyAddedData[0]);\n      }\n    }\n    this.parent.renderItems(currentData, this.parent.fields);\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var virtualTrackElement = this.parent.list.getElementsByClassName('e-virtual-ddl')[0];\n    if (virtualTrackElement) {\n      virtualTrackElement.style = this.parent.GetVirtualTrackHeight();\n    }\n    this.parent.UpdateSkeleton();\n    this.parent.liCollections = this.parent.list.querySelectorAll('.e-list-item');\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var virtualContentElement = this.parent.list.getElementsByClassName('e-virtual-ddl-content')[0];\n    if (virtualContentElement) {\n      virtualContentElement.style = this.parent.getTransformValues();\n    }\n    if (this.parent.fields.groupBy) {\n      this.parent.scrollStop();\n    }\n  };\n  VirtualScroll.prototype.generateQueryAndSetQueryIndexAsync = function (query, isPopupOpen) {\n    var isStartIndexInitialised = false;\n    var queryStartIndex = 0;\n    var queryEndIndex = 0;\n    var sortedDataStartIndex = 0;\n    var vEndIndex = this.parent && this.parent.viewPortInfo.endIndex !== 0 ? this.parent.viewPortInfo.endIndex : sortedDataStartIndex + this.parent.getItems().length;\n    if (!isPopupOpen && vEndIndex !== 0) {\n      for (var i = this.parent.viewPortInfo.startIndex; i <= vEndIndex; i++) {\n        if (!(i in this.parent.generatedDataObject)) {\n          if (!isStartIndexInitialised) {\n            isStartIndexInitialised = true;\n            queryStartIndex = queryEndIndex = i;\n          } else {\n            queryEndIndex = i === vEndIndex ? i : i + 1;\n          }\n        }\n      }\n    }\n    if (isStartIndexInitialised && !(this.parent.totalItemCount == queryStartIndex && this.parent.totalItemCount == queryEndIndex)) {\n      this.parent.virtualItemStartIndex = queryStartIndex;\n      this.parent.virtualItemEndIndex = queryEndIndex;\n      this.generateAndExecuteQueryAsync(query, queryStartIndex, queryEndIndex);\n    }\n    this.setCurrentViewDataAsync();\n  };\n  VirtualScroll.prototype.dataProcessAsync = function (isOpenPopup) {\n    this.parent.selectedValueInfo = null;\n    this.parent.virtualItemStartIndex = this.parent.viewPortInfo.startIndex;\n    this.parent.virtualItemEndIndex = this.parent.viewPortInfo.endIndex;\n    this.generateQueryAndSetQueryIndexAsync(new Query(), isOpenPopup);\n  };\n  VirtualScroll.prototype.virtualScrollRefreshAsync = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            this.parent.isCustomFilter = !(this.parent.isTyped || this.component === 'combobox' && this.parent.allowFiltering && this.parent.queryString != this.parent.typedString || !isNullOrUndefined(this.parent.filterInput) && !isNullOrUndefined(this.parent.filterInput.value) && this.parent.filterInput.value !== '' && this.component !== 'combobox') && !(this.component === 'autocomplete' && this.parent.value != null) || this.parent.isCustomFilter;\n            if (this.parent.allowFiltering || this.component === 'autocomplete') {\n              if (!isNullOrUndefined(this.parent.typedString) && !(this.component === 'combobox' && !isNullOrUndefined(this.parent.typedString) && this.parent.allowFiltering)) {\n                if (this.parent.viewPortInfo.endIndex >= this.parent.dataCount) {\n                  this.parent.viewPortInfo.endIndex = this.parent.dataCount;\n                }\n                if (this.parent.viewPortInfo.startIndex >= this.parent.dataCount) {\n                  this.parent.viewPortInfo.startIndex = this.parent.dataCount - this.parent.itemCount;\n                }\n              } else {\n                this.parent.getSkeletonCount(true);\n                if (this.component === 'combobox') {\n                  this.parent.skeletonCount = this.parent.totalItemCount != 0 && this.parent.totalItemCount < this.parent.itemCount * 2 ? 0 : this.parent.skeletonCount;\n                }\n              }\n            }\n            return [4 /*yield*/, this.dataProcessAsync()];\n          case 1:\n            _a.sent();\n            if (this.parent.keyboardEvent != null) {\n              this.parent.handleVirtualKeyboardActions(this.parent.keyboardEvent, this.parent.pageCount);\n            }\n            this.parent.isCustomFilter = false;\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n  VirtualScroll.prototype.scrollListener = function (scrollArgs) {\n    var _this = this;\n    if (!this.parent.isPreventScrollAction) {\n      var info = scrollArgs.sentinel;\n      var pStartIndex = this.parent.previousStartIndex;\n      this.parent.viewPortInfo = this.getInfoFromView(scrollArgs.direction, info, scrollArgs.offset, false);\n      this.parent.isUpwardScrolling = false;\n      if (this.parent.previousStartIndex !== pStartIndex && !this.parent.isKeyBoardAction) {\n        this.parent.isScrollActionTriggered = false;\n        this.parent.currentPageNumber = this.parent.viewPortInfo.currentPageNumber;\n        this.parent.virtualListInfo = __assign({}, this.parent.viewPortInfo);\n        this.parent.isPreventKeyAction = true;\n        this.parent.isVirtualScrolling = true;\n        setTimeout(function () {\n          _this.parent.pageCount = _this.parent.getPageCount();\n          _this.virtualScrollRefreshAsync().then(function () {\n            if (_this.parent.popupObj) {\n              _this.parent.list = _this.parent.popupObj.element.querySelector('.' + 'e-content') || select('.' + 'e-content');\n              _this.parent.updateSelectionList();\n              _this.parent.liCollections = _this.parent.getItems();\n            }\n            _this.parent.isKeyBoardAction = false;\n            _this.parent.isVirtualScrolling = false;\n            _this.parent.isPreventKeyAction = false;\n          });\n        }, 5);\n      } else if (this.parent.isScrollActionTriggered) {\n        this.parent.isPreventKeyAction = false;\n        this.parent.isScrollActionTriggered = false;\n        var virtualListCount = this.parent.list.querySelectorAll('.e-virtual-list').length;\n        var listElement = this.parent.list.querySelector('.' + 'e-list-item');\n        var translateY = scrollArgs.offset.top - listElement.offsetHeight * virtualListCount;\n        this.parent.list.getElementsByClassName('e-virtual-ddl-content')[0].style.transform = \"translate(0px,\" + translateY + \"px)\";\n      }\n      this.parent.previousInfo = this.parent.viewPortInfo;\n    }\n  };\n  VirtualScroll.prototype.getPageCount = function (popupElement, returnExactCount) {\n    if (returnExactCount === void 0) {\n      returnExactCount = false;\n    }\n    var list = popupElement && popupElement.querySelector('.e-content');\n    if (list) {\n      var liHeight = list.classList.contains('e-nodata') ? null : getComputedStyle(list.querySelectorAll('.e-list-item')[0], null).getPropertyValue('height');\n      var pageCount = list.getBoundingClientRect().height / parseInt(liHeight, 10);\n      return returnExactCount ? pageCount : Math.round(pageCount);\n    }\n    return 0;\n  };\n  ;\n  VirtualScroll.prototype.getRowHeight = function () {\n    return isNullOrUndefined(this.parent.liCollections) || this.parent.liCollections.length == 0 ? 0 : Math.ceil(this.parent.liCollections[0].getBoundingClientRect().height);\n  };\n  VirtualScroll.prototype.getInfoFromView = function (direction, info, e, isscrollAction) {\n    var infoType = {\n      direction: direction,\n      sentinelInfo: info,\n      offsets: e,\n      startIndex: this.parent.previousStartIndex,\n      endIndex: this.parent.previousEndIndex\n    };\n    var vHeight = this.parent.popupContentElement.getBoundingClientRect().height;\n    //Row Start and End Index calculation\n    var rowHeight = this.parent.listItemHeight;\n    var exactTopIndex = e.top / rowHeight;\n    var infoViewIndices = vHeight / rowHeight;\n    var exactEndIndex = exactTopIndex + infoViewIndices;\n    var pageSizeBy4 = this.parent.virtualItemCount / 4;\n    var totalItemCount = this.parent.totalItemCount;\n    if (infoType.direction === 'down') {\n      var sIndex = Math.round(exactEndIndex) - Math.round(pageSizeBy4);\n      if (isNullOrUndefined(infoType.startIndex) || exactEndIndex > infoType.startIndex + Math.round(this.parent.virtualItemCount / 2 + pageSizeBy4) && infoType.endIndex !== totalItemCount) {\n        infoType.startIndex = sIndex >= 0 ? Math.round(sIndex) : 0;\n        infoType.startIndex = infoType.startIndex > exactTopIndex ? Math.floor(exactTopIndex) : infoType.startIndex;\n        var eIndex = infoType.startIndex + this.parent.virtualItemCount;\n        infoType.startIndex = eIndex < exactEndIndex ? Math.ceil(exactEndIndex) - this.parent.virtualItemCount : infoType.startIndex;\n        infoType.endIndex = eIndex < totalItemCount ? eIndex : totalItemCount;\n        infoType.startIndex = eIndex >= totalItemCount ? infoType.endIndex - this.parent.virtualItemCount > 0 ? infoType.endIndex - this.parent.virtualItemCount : 0 : infoType.startIndex;\n        infoType.currentPageNumber = Math.ceil(infoType.endIndex / this.parent.virtualItemCount);\n      }\n    } else if (infoType.direction === 'up') {\n      if (infoType.startIndex && infoType.endIndex) {\n        var loadAtIndex = Math.round((infoType.startIndex * rowHeight + pageSizeBy4 * rowHeight) / rowHeight);\n        if (exactTopIndex < loadAtIndex) {\n          var idxAddedToExactTop = pageSizeBy4 > infoViewIndices ? pageSizeBy4 : infoViewIndices + infoViewIndices / 4;\n          var eIndex = Math.round(exactTopIndex + idxAddedToExactTop);\n          infoType.endIndex = eIndex < totalItemCount ? eIndex : totalItemCount;\n          var sIndex = infoType.endIndex - this.parent.virtualItemCount;\n          infoType.startIndex = sIndex > 0 ? sIndex : 0;\n          infoType.endIndex = sIndex < 0 ? this.parent.virtualItemCount : infoType.endIndex;\n          infoType.currentPageNumber = Math.ceil(infoType.startIndex / this.parent.virtualItemCount);\n        }\n      }\n    }\n    if (!isscrollAction) {\n      this.parent.previousStartIndex = infoType.startIndex;\n      this.parent.startIndex = infoType.startIndex;\n      this.parent.previousEndIndex = infoType.endIndex;\n    } else {\n      this.parent.scrollPreStartIndex = infoType.startIndex;\n    }\n    return infoType;\n  };\n  VirtualScroll.prototype.virtualScrollHandler = function (callback) {\n    var _this = this;\n    var delay = Browser.info.name === 'chrome' ? 200 : 100;\n    var prevTop = 0;\n    var debounced100 = debounce(callback, delay);\n    var debounced50 = debounce(callback, 50);\n    return function (e) {\n      var top = e.target.scrollTop;\n      var left = e.target.scrollLeft;\n      var direction = prevTop < top && !_this.parent.isUpwardScrolling ? 'down' : 'up';\n      prevTop = top;\n      var current = _this.sentinelInfo[direction];\n      var pstartIndex = _this.parent.scrollPreStartIndex;\n      var scrollOffsetargs = {\n        top: top,\n        left: left\n      };\n      if (_this.parent.list.querySelectorAll('.e-virtual-list').length > 0) {\n        var infoview = _this.getInfoFromView(direction, current, scrollOffsetargs, true);\n        if (_this.parent.scrollPreStartIndex != pstartIndex && !_this.parent.isPreventScrollAction) {\n          _this.parent.isScrollActionTriggered = true;\n          var virtualPoup = _this.parent.list.querySelector('.e-virtual-ddl-content');\n          virtualPoup.style.transform = \"translate(0px,\" + top + \"px)\";\n        }\n      }\n      var debounceFunction = debounced100;\n      if (current.axis === 'X') {\n        debounceFunction = debounced50;\n      }\n      debounceFunction({\n        direction: direction,\n        sentinel: current,\n        offset: {\n          top: top,\n          left: left\n        },\n        focusElement: document.activeElement\n      });\n    };\n  };\n  VirtualScroll.prototype.destroy = function () {\n    this.removeEventListener();\n  };\n  return VirtualScroll;\n}();\nexport { VirtualScroll };","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","__generator","body","_","label","sent","trys","ops","f","y","g","verb","Symbol","iterator","v","op","TypeError","pop","push","EventHandler","Browser","select","isNullOrUndefined","debounce","Touch","DataManager","Query","VirtualScroll","parent","_this","sentinelInfo","check","rect","info","top","containerElementRect","entered","listItemHeight","virtualItemCount","axis","cHeight","popupContentElement","clientHeight","bottom","removeEventListener","addEventListener","isDestroyed","on","observe","setGeneratedData","dataProcessAsync","setCurrentViewDataAsync","bindScrollEvent","off","component","scrollArgs","scrollListener","callback","getBoundingClientRect","add","popupScrollHandler","touchModule","scroll","bind","virtualScrollHandler","getModuleName","isMouseScrollAction","isPreventScrollAction","getPageQuery","query","virtualStartIndex","virtualEndIndex","allowFiltering","skip","qStartIndex","recentlyGeneratedData","loopIteration","endIndex","listData","virtualItemStartIndex","alreadyAddedData","generatedDataObject","slice","slicedData","generateAndExecuteQueryAsync","virtualItemEndIndex","isQueryGenerated","dataSource","newQuery","removeSkipAndTakeEvents","clone","tempCustomFilter","isCustomFilter","totalData","json","totalItemCount","queryString","typedString","resetList","fields","queries","filter","event","fn","currentData","viewPortInfo","startIndex","renderItems","virtualTrackElement","list","getElementsByClassName","style","GetVirtualTrackHeight","UpdateSkeleton","liCollections","querySelectorAll","virtualContentElement","getTransformValues","groupBy","scrollStop","generateQueryAndSetQueryIndexAsync","isPopupOpen","isStartIndexInitialised","queryStartIndex","queryEndIndex","sortedDataStartIndex","vEndIndex","getItems","isOpenPopup","selectedValueInfo","virtualScrollRefreshAsync","_a","isTyped","filterInput","dataCount","itemCount","getSkeletonCount","skeletonCount","keyboardEvent","handleVirtualKeyboardActions","pageCount","sentinel","pStartIndex","previousStartIndex","getInfoFromView","direction","offset","isUpwardScrolling","isKeyBoardAction","isScrollActionTriggered","currentPageNumber","virtualListInfo","isPreventKeyAction","isVirtualScrolling","setTimeout","getPageCount","popupObj","element","querySelector","updateSelectionList","virtualListCount","listElement","translateY","offsetHeight","transform","previousInfo","popupElement","returnExactCount","liHeight","classList","contains","getComputedStyle","getPropertyValue","height","parseInt","Math","round","getRowHeight","ceil","isscrollAction","infoType","offsets","previousEndIndex","vHeight","rowHeight","exactTopIndex","infoViewIndices","exactEndIndex","pageSizeBy4","sIndex","floor","eIndex","loadAtIndex","idxAddedToExactTop","scrollPreStartIndex","delay","name","prevTop","debounced100","debounced50","target","scrollTop","left","scrollLeft","current","pstartIndex","scrollOffsetargs","infoview","virtualPoup","debounceFunction","focusElement","document","activeElement","destroy"],"sources":["/Users/saleem/Desktop/KClient/Web App/Ver_3.6/User Interface/website_Source files/node_modules/@syncfusion/ej2-dropdowns/src/common/virtual-scroll.js"],"sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { EventHandler, Browser, select, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { debounce, Touch } from '@syncfusion/ej2-base';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nvar VirtualScroll = /** @class */ (function () {\n    function VirtualScroll(parent) {\n        var _this = this;\n        this.sentinelInfo = {\n            'up': {\n                check: function (rect, info) {\n                    var top = rect.top - _this.containerElementRect.top;\n                    info.entered = top >= 0;\n                    return top + (_this.parent.listItemHeight * _this.parent.virtualItemCount / 2) >= 0;\n                },\n                axis: 'Y'\n            },\n            'down': {\n                check: function (rect, info) {\n                    var cHeight = _this.parent.popupContentElement.clientHeight;\n                    var top = rect.bottom;\n                    info.entered = rect.bottom <= _this.containerElementRect.bottom;\n                    return top - (_this.parent.listItemHeight * _this.parent.virtualItemCount / 2) <= _this.parent.listItemHeight * _this.parent.virtualItemCount / 2;\n                }, axis: 'Y'\n            }\n        };\n        this.parent = parent;\n        this.removeEventListener();\n        this.addEventListener();\n    }\n    VirtualScroll.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on('observe', this.observe, this);\n        this.parent.on('setGeneratedData', this.setGeneratedData, this);\n        this.parent.on('dataProcessAsync', this.dataProcessAsync, this);\n        this.parent.on('setCurrentViewDataAsync', this.setCurrentViewDataAsync, this);\n        this.parent.on('bindScrollEvent', this.bindScrollEvent, this);\n    };\n    VirtualScroll.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off('observe', this.observe);\n        this.parent.off('setGeneratedData', this.setGeneratedData);\n        this.parent.off('dataProcessAsync', this.dataProcessAsync);\n        this.parent.off('setCurrentViewDataAsync', this.setCurrentViewDataAsync);\n        this.parent.off('bindScrollEvent', this.bindScrollEvent);\n    };\n    VirtualScroll.prototype.bindScrollEvent = function (component) {\n        var _this = this;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this.component = component.component;\n        this.observe(function (scrollArgs) { return _this.scrollListener(scrollArgs); });\n    };\n    VirtualScroll.prototype.observe = function (callback) {\n        this.containerElementRect = this.parent.popupContentElement.getBoundingClientRect();\n        EventHandler.add(this.parent.popupContentElement, 'wheel mousedown', this.popupScrollHandler, this);\n        this.touchModule = new Touch(this.parent.popupContentElement, {\n            scroll: this.popupScrollHandler.bind(this)\n        });\n        EventHandler.add(this.parent.popupContentElement, 'scroll', this.virtualScrollHandler(callback), this);\n    };\n    VirtualScroll.prototype.getModuleName = function () {\n        return 'VirtualScroll';\n    };\n    VirtualScroll.prototype.popupScrollHandler = function (e) {\n        this.parent.isMouseScrollAction = true;\n        this.parent.isPreventScrollAction = false;\n    };\n    VirtualScroll.prototype.getPageQuery = function (query, virtualStartIndex, virtualEndIndex) {\n        if (virtualEndIndex !== 0 && !this.parent.allowFiltering && this.component !== 'autocomplete') {\n            query = query.skip(virtualStartIndex);\n        }\n        return query;\n    };\n    VirtualScroll.prototype.setGeneratedData = function (qStartIndex, recentlyGeneratedData) {\n        var loopIteration = 0;\n        var endIndex = this.parent.listData.length + this.parent.virtualItemStartIndex;\n        for (var i = this.parent.virtualItemStartIndex; i < endIndex; i++) {\n            var alreadyAddedData = this.parent.generatedDataObject[i];\n            if (!alreadyAddedData) {\n                if (recentlyGeneratedData !== null && this.parent.listData.slice(loopIteration, loopIteration + 1).length > 0) {\n                    var slicedData = this.parent.listData.slice(loopIteration, loopIteration + 1);\n                    if (slicedData.length > 0) {\n                        // Safely assign slicedData to this.parent.generatedDataObject[i]\n                        this.parent.generatedDataObject[i] = slicedData;\n                    }\n                }\n            }\n            loopIteration++;\n        }\n    };\n    VirtualScroll.prototype.generateAndExecuteQueryAsync = function (query, virtualItemStartIndex, virtualItemEndIndex, isQueryGenerated) {\n        if (virtualItemStartIndex === void 0) { virtualItemStartIndex = 0; }\n        if (virtualItemEndIndex === void 0) { virtualItemEndIndex = 0; }\n        if (isQueryGenerated === void 0) { isQueryGenerated = false; }\n        var dataSource = this.parent.dataSource;\n        if (!isQueryGenerated) {\n            if (!isNullOrUndefined(this.parent.query)) {\n                var newQuery = this.removeSkipAndTakeEvents(this.parent.query.clone());\n                query = this.getPageQuery(newQuery, virtualItemStartIndex, virtualItemEndIndex);\n            }\n            else {\n                query = this.getPageQuery(query, virtualItemStartIndex, virtualItemEndIndex);\n            }\n        }\n        var tempCustomFilter = this.parent.isCustomFilter;\n        if (this.component === 'combobox') {\n            var totalData = 0;\n            if (this.parent.dataSource instanceof DataManager) {\n                totalData = this.parent.dataSource.dataSource.json.length;\n            }\n            else if (this.parent.dataSource && this.parent.dataSource.length > 0) {\n                totalData = this.parent.dataSource.length;\n            }\n            if (totalData > 0) {\n                this.parent.isCustomFilter = (totalData == this.parent.totalItemCount && this.parent.queryString != this.parent.typedString) ? true : this.parent.isCustomFilter;\n            }\n        }\n        this.parent.resetList(dataSource, this.parent.fields, query);\n        this.parent.isCustomFilter = tempCustomFilter;\n    };\n    VirtualScroll.prototype.removeSkipAndTakeEvents = function (query) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        query.queries = query.queries.filter(function (event) {\n            return event.fn !== 'onSkip' && event.fn !== 'onTake';\n        });\n        return query;\n    };\n    VirtualScroll.prototype.setCurrentViewDataAsync = function () {\n        // eslint-disable-next-line\n        var currentData = [];\n        for (var i = this.parent.viewPortInfo.startIndex; i < this.parent.viewPortInfo.endIndex; i++) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var alreadyAddedData = this.parent.generatedDataObject[i];\n            if (alreadyAddedData) {\n                currentData.push(alreadyAddedData[0]);\n            }\n        }\n        this.parent.renderItems(currentData, this.parent.fields);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var virtualTrackElement = this.parent.list.getElementsByClassName('e-virtual-ddl')[0];\n        if (virtualTrackElement) {\n            (virtualTrackElement).style = this.parent.GetVirtualTrackHeight();\n        }\n        this.parent.UpdateSkeleton();\n        this.parent.liCollections = this.parent.list.querySelectorAll('.e-list-item');\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var virtualContentElement = this.parent.list.getElementsByClassName('e-virtual-ddl-content')[0];\n        if (virtualContentElement) {\n            (virtualContentElement).style = this.parent.getTransformValues();\n        }\n        if (this.parent.fields.groupBy) {\n            this.parent.scrollStop();\n        }\n    };\n    VirtualScroll.prototype.generateQueryAndSetQueryIndexAsync = function (query, isPopupOpen) {\n        var isStartIndexInitialised = false;\n        var queryStartIndex = 0;\n        var queryEndIndex = 0;\n        var sortedDataStartIndex = 0;\n        var vEndIndex = this.parent && this.parent.viewPortInfo.endIndex !== 0 ? this.parent.viewPortInfo.endIndex : sortedDataStartIndex + this.parent.getItems().length;\n        if (!isPopupOpen && vEndIndex !== 0) {\n            for (var i = this.parent.viewPortInfo.startIndex; i <= vEndIndex; i++) {\n                if (!(i in this.parent.generatedDataObject)) {\n                    if (!isStartIndexInitialised) {\n                        isStartIndexInitialised = true;\n                        queryStartIndex = queryEndIndex = i;\n                    }\n                    else {\n                        queryEndIndex = i === vEndIndex ? i : i + 1;\n                    }\n                }\n            }\n        }\n        if (isStartIndexInitialised && !((this.parent.totalItemCount == queryStartIndex) && (this.parent.totalItemCount == queryEndIndex))) {\n            this.parent.virtualItemStartIndex = queryStartIndex;\n            this.parent.virtualItemEndIndex = queryEndIndex;\n            this.generateAndExecuteQueryAsync(query, queryStartIndex, queryEndIndex);\n        }\n        this.setCurrentViewDataAsync();\n    };\n    VirtualScroll.prototype.dataProcessAsync = function (isOpenPopup) {\n        this.parent.selectedValueInfo = null;\n        this.parent.virtualItemStartIndex = this.parent.viewPortInfo.startIndex;\n        this.parent.virtualItemEndIndex = this.parent.viewPortInfo.endIndex;\n        this.generateQueryAndSetQueryIndexAsync(new Query(), isOpenPopup);\n    };\n    VirtualScroll.prototype.virtualScrollRefreshAsync = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        this.parent.isCustomFilter = (!(this.parent.isTyped || (this.component === 'combobox' && this.parent.allowFiltering && this.parent.queryString != this.parent.typedString) || (!isNullOrUndefined(this.parent.filterInput) && !isNullOrUndefined(this.parent.filterInput.value) && this.parent.filterInput.value !== '') && this.component !== 'combobox') && !(this.component === 'autocomplete' && this.parent.value != null)) || this.parent.isCustomFilter;\n                        if (this.parent.allowFiltering || this.component === 'autocomplete') {\n                            if (!isNullOrUndefined(this.parent.typedString) && !(this.component === 'combobox' && !isNullOrUndefined(this.parent.typedString) && this.parent.allowFiltering)) {\n                                if (this.parent.viewPortInfo.endIndex >= this.parent.dataCount) {\n                                    this.parent.viewPortInfo.endIndex = this.parent.dataCount;\n                                }\n                                if (this.parent.viewPortInfo.startIndex >= this.parent.dataCount) {\n                                    this.parent.viewPortInfo.startIndex = this.parent.dataCount - this.parent.itemCount;\n                                }\n                            }\n                            else {\n                                this.parent.getSkeletonCount(true);\n                                if (this.component === 'combobox') {\n                                    this.parent.skeletonCount = this.parent.totalItemCount != 0 && this.parent.totalItemCount < (this.parent.itemCount * 2) ? 0 : this.parent.skeletonCount;\n                                }\n                            }\n                        }\n                        return [4 /*yield*/, this.dataProcessAsync()];\n                    case 1:\n                        _a.sent();\n                        if (this.parent.keyboardEvent != null) {\n                            this.parent.handleVirtualKeyboardActions(this.parent.keyboardEvent, this.parent.pageCount);\n                        }\n                        this.parent.isCustomFilter = false;\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    VirtualScroll.prototype.scrollListener = function (scrollArgs) {\n        var _this = this;\n        if (!this.parent.isPreventScrollAction) {\n            var info = scrollArgs.sentinel;\n            var pStartIndex = this.parent.previousStartIndex;\n            this.parent.viewPortInfo = this.getInfoFromView(scrollArgs.direction, info, scrollArgs.offset, false);\n            this.parent.isUpwardScrolling = false;\n            if (this.parent.previousStartIndex !== pStartIndex && !this.parent.isKeyBoardAction) {\n                this.parent.isScrollActionTriggered = false;\n                this.parent.currentPageNumber = this.parent.viewPortInfo.currentPageNumber;\n                this.parent.virtualListInfo = __assign({}, this.parent.viewPortInfo);\n                this.parent.isPreventKeyAction = true;\n                this.parent.isVirtualScrolling = true;\n                setTimeout(function () {\n                    _this.parent.pageCount = _this.parent.getPageCount();\n                    _this.virtualScrollRefreshAsync().then(function () {\n                        if (_this.parent.popupObj) {\n                            _this.parent.list = _this.parent.popupObj.element.querySelector('.' + 'e-content') || select('.' + 'e-content');\n                            _this.parent.updateSelectionList();\n                            _this.parent.liCollections = _this.parent.getItems();\n                        }\n                        _this.parent.isKeyBoardAction = false;\n                        _this.parent.isVirtualScrolling = false;\n                        _this.parent.isPreventKeyAction = false;\n                    });\n                }, 5);\n            }\n            else if (this.parent.isScrollActionTriggered) {\n                this.parent.isPreventKeyAction = false;\n                this.parent.isScrollActionTriggered = false;\n                var virtualListCount = this.parent.list.querySelectorAll('.e-virtual-list').length;\n                var listElement = this.parent.list.querySelector('.' + 'e-list-item');\n                var translateY = scrollArgs.offset.top - (listElement.offsetHeight * virtualListCount);\n                this.parent.list.getElementsByClassName('e-virtual-ddl-content')[0].style.transform = \"translate(0px,\" + translateY + \"px)\";\n            }\n            this.parent.previousInfo = this.parent.viewPortInfo;\n        }\n    };\n    VirtualScroll.prototype.getPageCount = function (popupElement, returnExactCount) {\n        if (returnExactCount === void 0) { returnExactCount = false; }\n        var list = popupElement && popupElement.querySelector('.e-content');\n        if (list) {\n            var liHeight = list.classList.contains('e-nodata') ? null : getComputedStyle(list.querySelectorAll('.e-list-item')[0], null).getPropertyValue('height');\n            var pageCount = list.getBoundingClientRect().height / parseInt(liHeight, 10);\n            return returnExactCount ? pageCount : Math.round(pageCount);\n        }\n        return 0;\n    };\n    ;\n    VirtualScroll.prototype.getRowHeight = function () {\n        return (isNullOrUndefined(this.parent.liCollections) || this.parent.liCollections.length == 0) ? 0 : Math.ceil(this.parent.liCollections[0].getBoundingClientRect().height);\n    };\n    VirtualScroll.prototype.getInfoFromView = function (direction, info, e, isscrollAction) {\n        var infoType = {\n            direction: direction, sentinelInfo: info, offsets: e,\n            startIndex: this.parent.previousStartIndex, endIndex: this.parent.previousEndIndex\n        };\n        var vHeight = this.parent.popupContentElement.getBoundingClientRect().height;\n        //Row Start and End Index calculation\n        var rowHeight = this.parent.listItemHeight;\n        var exactTopIndex = e.top / rowHeight;\n        var infoViewIndices = vHeight / rowHeight;\n        var exactEndIndex = exactTopIndex + infoViewIndices;\n        var pageSizeBy4 = this.parent.virtualItemCount / 4;\n        var totalItemCount = this.parent.totalItemCount;\n        if (infoType.direction === 'down') {\n            var sIndex = Math.round(exactEndIndex) - Math.round((pageSizeBy4));\n            if (isNullOrUndefined(infoType.startIndex) || (exactEndIndex >\n                (infoType.startIndex + Math.round((this.parent.virtualItemCount / 2 + pageSizeBy4)))\n                && infoType.endIndex !== totalItemCount)) {\n                infoType.startIndex = sIndex >= 0 ? Math.round(sIndex) : 0;\n                infoType.startIndex = infoType.startIndex > exactTopIndex ? Math.floor(exactTopIndex) : infoType.startIndex;\n                var eIndex = infoType.startIndex + this.parent.virtualItemCount;\n                infoType.startIndex = eIndex < exactEndIndex ? (Math.ceil(exactEndIndex) - this.parent.virtualItemCount)\n                    : infoType.startIndex;\n                infoType.endIndex = eIndex < totalItemCount ? eIndex : totalItemCount;\n                infoType.startIndex = eIndex >= totalItemCount ? (infoType.endIndex - this.parent.virtualItemCount > 0 ? infoType.endIndex - this.parent.virtualItemCount : 0) : infoType.startIndex;\n                infoType.currentPageNumber = Math.ceil(infoType.endIndex / this.parent.virtualItemCount);\n            }\n        }\n        else if (infoType.direction === 'up') {\n            if (infoType.startIndex && infoType.endIndex) {\n                var loadAtIndex = Math.round(((infoType.startIndex * rowHeight) + (pageSizeBy4 * rowHeight)) / rowHeight);\n                if (exactTopIndex < loadAtIndex) {\n                    var idxAddedToExactTop = (pageSizeBy4) > infoViewIndices ? pageSizeBy4 :\n                        (infoViewIndices + infoViewIndices / 4);\n                    var eIndex = Math.round(exactTopIndex + idxAddedToExactTop);\n                    infoType.endIndex = eIndex < totalItemCount ? eIndex : totalItemCount;\n                    var sIndex = infoType.endIndex - this.parent.virtualItemCount;\n                    infoType.startIndex = sIndex > 0 ? sIndex : 0;\n                    infoType.endIndex = sIndex < 0 ? this.parent.virtualItemCount : infoType.endIndex;\n                    infoType.currentPageNumber = Math.ceil(infoType.startIndex / this.parent.virtualItemCount);\n                }\n            }\n        }\n        if (!isscrollAction) {\n            this.parent.previousStartIndex = infoType.startIndex;\n            this.parent.startIndex = infoType.startIndex;\n            this.parent.previousEndIndex = infoType.endIndex;\n        }\n        else {\n            this.parent.scrollPreStartIndex = infoType.startIndex;\n        }\n        return infoType;\n    };\n    VirtualScroll.prototype.virtualScrollHandler = function (callback) {\n        var _this = this;\n        var delay = Browser.info.name === 'chrome' ? 200 : 100;\n        var prevTop = 0;\n        var debounced100 = debounce(callback, delay);\n        var debounced50 = debounce(callback, 50);\n        return function (e) {\n            var top = e.target.scrollTop;\n            var left = e.target.scrollLeft;\n            var direction = prevTop < top && !_this.parent.isUpwardScrolling ? 'down' : 'up';\n            prevTop = top;\n            var current = _this.sentinelInfo[direction];\n            var pstartIndex = _this.parent.scrollPreStartIndex;\n            var scrollOffsetargs = {\n                top: top,\n                left: left\n            };\n            if (_this.parent.list.querySelectorAll('.e-virtual-list').length > 0) {\n                var infoview = _this.getInfoFromView(direction, current, scrollOffsetargs, true);\n                if (_this.parent.scrollPreStartIndex != pstartIndex && !_this.parent.isPreventScrollAction) {\n                    _this.parent.isScrollActionTriggered = true;\n                    var virtualPoup = (_this.parent.list.querySelector('.e-virtual-ddl-content'));\n                    virtualPoup.style.transform = \"translate(0px,\" + top + \"px)\";\n                }\n            }\n            var debounceFunction = debounced100;\n            if (current.axis === 'X') {\n                debounceFunction = debounced50;\n            }\n            debounceFunction({ direction: direction, sentinel: current, offset: { top: top, left: left },\n                focusElement: document.activeElement });\n        };\n    };\n    VirtualScroll.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return VirtualScroll;\n}());\nexport { VirtualScroll };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}