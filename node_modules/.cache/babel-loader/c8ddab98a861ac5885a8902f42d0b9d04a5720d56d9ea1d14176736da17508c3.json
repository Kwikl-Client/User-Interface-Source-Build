{"ast":null,"code":"/* tslint:disable-next-line:max-line-length */\nimport { EventHandler, isNullOrUndefined, extend, classList, addClass, removeClass, Browser, getValue, setValue, createElement } from '@syncfusion/ej2-base';\nimport { parentsUntil, getUid, appendChildren, getDatePredicate, getObject, extendObjWithFn, eventPromise, setChecked, clearReactVueTemplates, padZero, Global } from '../base/util';\nimport { remove, debounce, Internationalization, SanitizeHtmlHelper } from '@syncfusion/ej2-base';\nimport { DataUtil, Query, DataManager, Predicate } from '@syncfusion/ej2-data';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport * as events from '../base/constant';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { getForeignData } from '../base/util';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { createSpinner, hideSpinner, showSpinner } from '@syncfusion/ej2-popups';\nimport { getFilterMenuPostion, toogleCheckbox, createCboxWithWrap, removeAddCboxClasses, getColumnByForeignKeyValue } from '../base/util';\n/**\n * @hidden\n * `CheckBoxFilterBase` module is used to handle filtering action.\n */\nvar CheckBoxFilterBase = /** @class */function () {\n  /**\n   * Constructor for checkbox filtering module\n   *\n   * @param {IXLFilter} parent - specifies the IXLFilter\n   * @hidden\n   */\n  function CheckBoxFilterBase(parent) {\n    this.isExecuteLocal = false;\n    this.existingPredicate = {};\n    this.foreignKeyQuery = new Query();\n    /** @hidden */\n    this.filterState = true;\n    this.values = {};\n    this.renderEmpty = false;\n    this.isCheckboxFilterTemplate = false;\n    this.infiniteRenderMod = false;\n    // for infinite scroll ui\n    this.infiniteInitialLoad = false;\n    this.infiniteSearchValChange = false;\n    this.infinitePermenantLocalData = [];\n    this.infiniteQueryExecutionPending = false;\n    this.infiniteSkipCnt = 0;\n    this.infiniteScrollAppendDiff = 0;\n    this.prevInfiniteScrollDirection = '';\n    this.infiniteLoadedElem = [];\n    this.infiniteDataCount = 0;\n    this.infiniteLocalSelectAll = true;\n    this.localInfiniteSelectAllClicked = false;\n    this.localInfiniteSelectionInteracted = false;\n    this.infiniteManualSelectMaintainPred = [];\n    this.parent = parent;\n    this.id = this.parent.element.id;\n    this.valueFormatter = new ValueFormatter(this.parent.locale);\n    this.cBoxTrue = createCheckBox(this.parent.createElement, false, {\n      checked: true,\n      label: ' '\n    });\n    this.cBoxFalse = createCheckBox(this.parent.createElement, false, {\n      checked: false,\n      label: ' '\n    });\n    this.cBoxTrue.insertBefore(this.parent.createElement('input', {\n      className: 'e-chk-hidden',\n      attrs: {\n        type: 'checkbox'\n      }\n    }), this.cBoxTrue.firstChild);\n    this.cBoxFalse.insertBefore(this.parent.createElement('input', {\n      className: 'e-chk-hidden',\n      attrs: {\n        'type': 'checkbox'\n      }\n    }), this.cBoxFalse.firstChild);\n    this.cBoxFalse.querySelector('.e-frame').classList.add('e-uncheck');\n    if (this.parent.enableRtl) {\n      addClass([this.cBoxTrue, this.cBoxFalse], ['e-rtl']);\n    }\n    if (this.parent.cssClass) {\n      if (this.parent.cssClass.indexOf(' ') !== -1) {\n        addClass([this.cBoxTrue, this.cBoxFalse], this.parent.cssClass.split(' '));\n      } else {\n        addClass([this.cBoxTrue, this.cBoxFalse], [this.parent.cssClass]);\n      }\n    }\n  }\n  /**\n   * @returns {void}\n   * @hidden\n   */\n  CheckBoxFilterBase.prototype.destroy = function () {\n    this.closeDialog();\n  };\n  CheckBoxFilterBase.prototype.wireEvents = function () {\n    EventHandler.add(this.dlg, 'click', this.clickHandler, this);\n    EventHandler.add(this.dlg, 'keyup', this.keyupHandler, this);\n    this.searchHandler = debounce(this.searchBoxKeyUp, 200);\n    var elem = this.dialogObj.element.querySelector('.e-searchinput');\n    if (elem) {\n      EventHandler.add(elem, 'keyup', this.searchHandler, this);\n      EventHandler.add(elem, 'input', this.searchHandler, this);\n    }\n  };\n  CheckBoxFilterBase.prototype.unWireEvents = function () {\n    EventHandler.remove(this.dlg, 'click', this.clickHandler);\n    EventHandler.remove(this.dlg, 'keyup', this.keyupHandler);\n    var elem = this.dialogObj.element.querySelector('.e-searchinput');\n    if (elem) {\n      EventHandler.remove(elem, 'keyup', this.searchHandler);\n      EventHandler.remove(elem, 'input', this.searchHandler);\n    }\n  };\n  CheckBoxFilterBase.prototype.foreignKeyFilter = function (args, fColl, mPredicate) {\n    var _this = this;\n    var fPredicate = {};\n    var filterCollection = [];\n    var query = this.foreignKeyQuery.clone();\n    this.options.column.dataSource.executeQuery(query.where(mPredicate)).then(function (e) {\n      _this.options.column.columnData = e.result;\n      _this.parent.notify(events.generateQuery, {\n        predicate: fPredicate,\n        column: _this.options.column\n      });\n      args.ejpredicate = fPredicate.predicate.predicates;\n      var fpred = fPredicate.predicate.predicates;\n      for (var i = 0; i < fpred.length; i++) {\n        filterCollection.push({\n          field: fpred[parseInt(i.toString(), 10)].field,\n          predicate: 'or',\n          matchCase: fpred[parseInt(i.toString(), 10)].ignoreCase,\n          ignoreAccent: fpred[parseInt(i.toString(), 10)].ignoreAccent,\n          operator: fpred[parseInt(i.toString(), 10)].operator,\n          value: fpred[parseInt(i.toString(), 10)].value,\n          type: _this.options.type\n        });\n      }\n      args.filterCollection = filterCollection.length ? filterCollection : fColl.filter(function (col) {\n        return col.field = _this.options.field;\n      });\n      _this.options.handler(args);\n    });\n  };\n  CheckBoxFilterBase.prototype.foreignFilter = function (args, value) {\n    var operator = this.options.isRemote ? this.options.column.type === 'string' ? 'contains' : 'equal' : this.options.column.type ? 'contains' : 'equal';\n    var initalPredicate = new Predicate(this.options.column.foreignKeyValue, operator, value, true, this.options.ignoreAccent);\n    this.foreignKeyFilter(args, [args.filterCollection], initalPredicate);\n  };\n  CheckBoxFilterBase.prototype.searchBoxClick = function (e) {\n    var target = e.target;\n    if (target.classList.contains('e-searchclear')) {\n      this.sInput.value = target.classList.contains('e-chkcancel-icon') ? '' : this.sInput.value;\n      if (this.isCheckboxFilterTemplate) {\n        this.parent.notify('refreshCheckbox', {\n          event: e\n        });\n      } else {\n        this.refreshCheckboxes();\n      }\n      this.updateSearchIcon();\n      this.sInput.focus();\n    }\n  };\n  CheckBoxFilterBase.prototype.searchBoxKeyUp = function (e) {\n    if (isNullOrUndefined(e) || e.key !== 'ArrowUp' && e.key !== 'ArrowDown' && e.key !== 'Tab' && !(e.key === 'Tab' && e.shiftKey)) {\n      if (!isNullOrUndefined(this.parent.loadingIndicator) && this.parent.loadingIndicator.indicatorType === 'Shimmer') {\n        this.parent.showMaskRow(undefined, this.dialogObj.element);\n      }\n      if (this.isCheckboxFilterTemplate) {\n        this.parent.notify('refreshCheckbox', {\n          event: e\n        });\n      } else {\n        this.refreshCheckboxes();\n      }\n      this.updateSearchIcon();\n    }\n  };\n  CheckBoxFilterBase.prototype.updateSearchIcon = function () {\n    if (this.sInput.value.length) {\n      classList(this.sIcon, ['e-chkcancel-icon'], ['e-search-icon']);\n      if (!isNullOrUndefined(document.body.querySelector('.e-chkcancel-icon'))) {\n        document.body.querySelector('.e-chkcancel-icon').setAttribute('title', this.localeObj.getConstant('Clear'));\n      }\n    } else {\n      classList(this.sIcon, ['e-search-icon'], ['e-chkcancel-icon']);\n      if (!isNullOrUndefined(document.body.querySelector('.e-searchclear.e-search-icon'))) {\n        document.body.querySelector('.e-searchclear.e-search-icon').setAttribute('title', this.localeObj.getConstant('Search'));\n      }\n    }\n  };\n  /**\n   * Gets the localized label by locale keyword.\n   *\n   * @param {string} key - Defines localization key\n   * @returns {string} - returns localization label\n   */\n  CheckBoxFilterBase.prototype.getLocalizedLabel = function (key) {\n    return this.localeObj.getConstant(key);\n  };\n  CheckBoxFilterBase.prototype.updateDataSource = function () {\n    var dataSource = this.options.dataSource;\n    var str = 'object';\n    if (!(dataSource instanceof DataManager)) {\n      for (var i = 0; i < dataSource.length; i++) {\n        // eslint-disable-next-line valid-typeof\n        if (typeof dataSource !== str) {\n          var obj = {};\n          obj[this.options.field] = dataSource[parseInt(i.toString(), 10)];\n          dataSource[parseInt(i.toString(), 10)] = obj;\n        }\n      }\n    }\n  };\n  CheckBoxFilterBase.prototype.updateModel = function (options) {\n    this.options = options;\n    this.existingPredicate = options.actualPredicate || {};\n    this.options.dataSource = options.dataSource;\n    this.options.dataManager = options.dataManager ? options.dataManager : options.dataSource;\n    this.updateDataSource();\n    this.options.type = options.type;\n    this.options.format = options.format || '';\n    this.options.ignoreAccent = options.ignoreAccent || false;\n    this.options.filteredColumns = options.filteredColumns || this.parent.filterSettings.columns;\n    this.options.query = options.query || new Query();\n    this.options.allowCaseSensitive = options.allowCaseSensitive || false;\n    this.options.uid = options.column.uid;\n    this.options.disableHtmlEncode = options.column.disableHtmlEncode || false;\n    this.values = {};\n    this.localeObj = options.localeObj;\n    this.isFiltered = options.filteredColumns.length;\n    this.infiniteRenderMod = this.parent.filterSettings && this.parent.filterSettings.enableInfiniteScrolling ? true : false;\n    this.infiniteUnloadParentExistPred = this.infiniteRenderMod && this.existingPredicate[this.options.column.field] ? this.existingPredicate[this.options.column.field].slice() : [];\n  };\n  CheckBoxFilterBase.prototype.getAndSetChkElem = function (options) {\n    this.dlg = this.parent.createElement('div', {\n      id: this.id + this.options.type + '_excelDlg',\n      attrs: {\n        uid: this.options.column.uid\n      },\n      className: 'e-checkboxfilter e-filter-popup'\n    });\n    this.sBox = this.parent.createElement('div', {\n      className: 'e-searchcontainer'\n    });\n    if (!options.hideSearchbox) {\n      this.sInput = this.parent.createElement('input', {\n        id: this.id + '_SearchBox',\n        className: 'e-searchinput'\n      });\n      this.sIcon = this.parent.createElement('span', {\n        className: 'e-searchclear e-search-icon e-icons e-input-group-icon',\n        attrs: {\n          type: 'text',\n          title: this.getLocalizedLabel('Search')\n        }\n      });\n      this.searchBox = this.parent.createElement('span', {\n        className: 'e-searchbox e-fields'\n      });\n      this.searchBox.appendChild(this.sInput);\n      this.sBox.appendChild(this.searchBox);\n      var inputargs = {\n        element: this.sInput,\n        floatLabelType: 'Never',\n        properties: {\n          placeholder: this.getLocalizedLabel('Search'),\n          cssClass: this.parent.cssClass\n        }\n      };\n      Input.createInput(inputargs, this.parent.createElement);\n      this.searchBox.querySelector('.e-input-group').appendChild(this.sIcon);\n    }\n    this.spinner = this.parent.createElement('div', {\n      className: 'e-spinner'\n    }); //for spinner\n    this.cBox = this.parent.createElement('div', {\n      id: this.id + this.options.type + '_CheckBoxList',\n      className: 'e-checkboxlist e-fields'\n    });\n    this.spinner.appendChild(this.cBox);\n    this.sBox.appendChild(this.spinner);\n    return this.sBox;\n  };\n  CheckBoxFilterBase.prototype.showDialog = function (options) {\n    var args = {\n      requestType: events.filterBeforeOpen,\n      columnName: this.options.field,\n      columnType: this.options.type,\n      cancel: false\n    };\n    var filterModel = 'filterModel';\n    args[\"\" + filterModel] = this;\n    this.parent.notify(events.cBoxFltrBegin, args);\n    if (args.cancel) {\n      options.cancel = args.cancel;\n      return;\n    }\n    this.dialogObj = new Dialog({\n      visible: false,\n      content: this.sBox,\n      close: this.closeDialog.bind(this),\n      enableRtl: this.parent.enableRtl,\n      width: !isNullOrUndefined(parentsUntil(options.target, 'e-bigger')) || this.parent.element.classList.contains('e-device') ? 260 : 255,\n      target: this.parent.element,\n      animationSettings: {\n        effect: 'None'\n      },\n      buttons: [{\n        click: this.btnClick.bind(this),\n        buttonModel: {\n          content: this.getLocalizedLabel(this.isExcel ? 'OKButton' : 'FilterButton'),\n          cssClass: this.parent.cssClass ? 'e-primary' + ' ' + this.parent.cssClass : 'e-primary',\n          isPrimary: true\n        }\n      }, {\n        click: this.btnClick.bind(this),\n        buttonModel: {\n          cssClass: this.parent.cssClass ? 'e-flat' + ' ' + this.parent.cssClass : 'e-flat',\n          content: this.getLocalizedLabel(this.isExcel ? 'CancelButton' : 'ClearButton')\n        }\n      }],\n      created: this.dialogCreated.bind(this),\n      open: this.dialogOpen.bind(this),\n      cssClass: this.parent.cssClass ? this.parent.cssClass : ''\n    });\n    var isStringTemplate = 'isStringTemplate';\n    this.dialogObj[\"\" + isStringTemplate] = true;\n    this.renderResponsiveFilter(options);\n    var dialogLabel = this.parent.filterSettings && this.parent.filterSettings.type === 'CheckBox' ? this.getLocalizedLabel('CheckBoxFilterDialogARIA') : this.getLocalizedLabel('ExcelFilterDialogARIA');\n    this.dlg.setAttribute('aria-label', dialogLabel);\n    if (options.isResponsiveFilter) {\n      var responsiveCnt = document.querySelector('.e-responsive-dialog > .e-dlg-content > .e-mainfilterdiv');\n      responsiveCnt.appendChild(this.dlg);\n    } else {\n      this.parent.element.appendChild(this.dlg);\n    }\n    this.dialogObj.appendTo(this.dlg);\n    this.dialogObj.element.style.maxHeight = options.isResponsiveFilter ? 'none' : this.options.height + 'px';\n    this.dialogObj.show();\n    var content = this.dialogObj.element.querySelector('.e-dlg-content');\n    content.appendChild(this.sBox);\n    this.wireEvents();\n    if (!isNullOrUndefined(this.parent.loadingIndicator) && this.parent.loadingIndicator.indicatorType === 'Shimmer' && !this.infiniteRenderMod) {\n      this.parent.showMaskRow(undefined, this.dialogObj.element);\n    } else if (this.infiniteRenderMod && this.parent.filterSettings && this.parent.filterSettings.loadingIndicator === 'Shimmer') {\n      this.showMask();\n    } else {\n      if (this.infiniteRenderMod) {\n        this.cBox.style.marginTop = this.getListHeight(this.cBox) + 'px';\n      }\n      createSpinner({\n        target: this.spinner,\n        cssClass: this.parent.cssClass ? this.parent.cssClass : null\n      }, this.parent.createElement);\n      showSpinner(this.spinner);\n    }\n    this.getAllData();\n  };\n  CheckBoxFilterBase.prototype.renderResponsiveFilter = function (options) {\n    if (options.isResponsiveFilter) {\n      this.dialogObj.buttons = [{}];\n      this.dialogObj.position = {\n        X: '',\n        Y: ''\n      };\n      this.dialogObj.target = document.querySelector('.e-resfilter > .e-dlg-content > .e-mainfilterdiv');\n      this.dialogObj.width = '100%';\n    }\n  };\n  CheckBoxFilterBase.prototype.dialogCreated = function (e) {\n    if (this.options.isResponsiveFilter) {\n      this.dialogObj.element.style.left = '0px';\n    } else {\n      if (!Browser.isDevice) {\n        getFilterMenuPostion(this.options.target, this.dialogObj);\n      } else {\n        this.dialogObj.position = {\n          X: 'center',\n          Y: 'center'\n        };\n      }\n    }\n    if (this.options.column.showColumnMenu) {\n      this.parent.notify(events.filterDialogCreated, e);\n    }\n  };\n  CheckBoxFilterBase.prototype.openDialog = function (options) {\n    this.updateModel(options);\n    this.getAndSetChkElem(options);\n    this.showDialog(options);\n  };\n  CheckBoxFilterBase.prototype.closeDialog = function () {\n    if (this.infiniteRenderMod && this.infinitePermenantLocalData.length && !this.options.isRemote) {\n      this.options.dataSource.dataSource.json = this.infinitePermenantLocalData;\n    }\n    if (this.dialogObj && !this.dialogObj.isDestroyed) {\n      this.isBlanks = false;\n      var filterTemplateCol = this.options.columns.filter(function (col) {\n        return col.getFilterItemTemplate();\n      });\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      var registeredTemplate = this.parent.registeredTemplate;\n      if (filterTemplateCol.length && !isNullOrUndefined(registeredTemplate) && registeredTemplate.filterItemTemplate) {\n        this.parent.destroyTemplate(['filterItemTemplate']);\n      }\n      if ((this.parent.isReact || this.parent.isVue) && this.parent.destroyTemplate !== undefined) {\n        clearReactVueTemplates(this.parent, ['filterItemTemplate']);\n      }\n      this.parent.notify(events.filterMenuClose, {\n        field: this.options.field\n      });\n      this.dialogObj.destroy();\n      this.unWireEvents();\n      remove(this.dlg);\n      this.dlg = null;\n      this.parent.notify(events.filterDialogClose, {});\n    }\n  };\n  /**\n   * @param {Column} col - Defines column details\n   * @returns {void}\n   * @hidden\n   */\n  CheckBoxFilterBase.prototype.clearFilter = function (col) {\n    // eslint-disable-next-line max-len\n    var args = {\n      instance: this,\n      handler: this.clearFilter,\n      cancel: false\n    };\n    this.parent.notify(events.fltrPrevent, args);\n    if (args.cancel) {\n      return;\n    }\n    this.options.handler({\n      action: 'clear-filter',\n      field: col ? col.field : this.options.field\n    });\n  };\n  CheckBoxFilterBase.prototype.btnClick = function (e) {\n    if (this.filterState) {\n      if (e.target.tagName.toLowerCase() === 'input' && e.target.classList.contains('e-searchinput') || e.keyCode === 13) {\n        if (!this.isCheckboxFilterTemplate) {\n          this.fltrBtnHandler();\n        }\n      } else {\n        var text = e.target.firstChild.textContent.toLowerCase();\n        if (this.getLocalizedLabel(this.isExcel ? 'OKButton' : 'FilterButton').toLowerCase() === text) {\n          if (!this.isCheckboxFilterTemplate) {\n            this.fltrBtnHandler();\n          }\n        } else if (this.getLocalizedLabel('ClearButton').toLowerCase() === text) {\n          this.clearFilter();\n        }\n      }\n      this.closeDialog();\n    } else if (!(e.target.tagName.toLowerCase() === 'input')) {\n      this.clearFilter();\n      this.closeDialog();\n    }\n    if (this.options.column.showColumnMenu) {\n      this.parent.notify(events.afterFilterColumnMenuClose, {});\n    }\n  };\n  /**\n   * @returns {void}\n   * @hidden\n   */\n  CheckBoxFilterBase.prototype.fltrBtnHandler = function () {\n    var _this = this;\n    if (this.infiniteRenderMod) {\n      this.cBox.innerHTML = '';\n      appendChildren(this.cBox, this.infiniteLoadedElem.slice());\n    }\n    var checked = [].slice.call(this.cBox.querySelectorAll('.e-check:not(.e-selectall):not(.e-add-current)'));\n    var check = checked;\n    var optr = 'equal';\n    var ddlValue = this.dialogObj.element.querySelector('.e-dropdownlist');\n    if (ddlValue) {\n      this.options.operator = optr = ddlValue.ej2_instances[0].value;\n    }\n    this.isMenuNotEqual = this.options.operator === 'notequal';\n    var searchInput;\n    if (!this.options.hideSearchbox) {\n      searchInput = this.searchBox.querySelector('.e-searchinput');\n    }\n    var caseSen = this.options.allowCaseSensitive;\n    var defaults = {\n      field: this.options.field,\n      predicate: this.isMenuNotEqual ? 'and' : 'or',\n      uid: this.options.uid,\n      operator: optr,\n      type: this.options.type,\n      matchCase: caseSen,\n      ignoreAccent: this.options.ignoreAccent\n    };\n    var isNotEqual = this.itemsCnt !== checked.length && this.itemsCnt - checked.length < checked.length;\n    if (isNotEqual && searchInput && searchInput.value === '') {\n      optr = this.isMenuNotEqual ? 'equal' : 'notequal';\n      checked = [].slice.call(this.cBox.querySelectorAll('.e-uncheck:not(.e-selectall)'));\n      defaults.predicate = this.isMenuNotEqual ? 'or' : 'and';\n      defaults.operator = optr;\n    }\n    var value;\n    var val;\n    var length;\n    var fObj;\n    var coll = [];\n    if (checked.length !== this.itemsCnt || searchInput && searchInput.value && searchInput.value !== '' || this.infiniteRenderMod) {\n      if (!this.infiniteRenderMod) {\n        for (var i = 0; i < checked.length; i++) {\n          value = this.values[parentsUntil(checked[parseInt(i.toString(), 10)], 'e-ftrchk').getAttribute('uid')];\n          fObj = extend({}, {\n            value: value\n          }, defaults);\n          if (value && !value.toString().length) {\n            fObj.operator = isNotEqual ? 'notequal' : 'equal';\n          }\n          if (value === '' || isNullOrUndefined(value)) {\n            coll = coll.concat(CheckBoxFilterBase.generateNullValuePredicates(defaults));\n          } else {\n            coll.push(fObj);\n          }\n          this.notifyFilterPrevEvent(fObj);\n        }\n      } else if (this.infiniteRenderMod) {\n        this.infiniteFltrBtnHandler(coll);\n      }\n      if ((this.options.type === 'date' || this.options.type === 'datetime') && check.length) {\n        length = check.length - 1;\n        val = this.values[parentsUntil(check[parseInt(length.toString(), 10)], 'e-ftrchk').getAttribute('uid')];\n        if (isNullOrUndefined(val) && isNotEqual) {\n          coll.push({\n            field: defaults.field,\n            matchCase: defaults.matchCase,\n            operator: 'equal',\n            predicate: 'and',\n            value: null\n          });\n        }\n      }\n      var addCurrSelection = this.infiniteRenderMod ? this.sBox.querySelector('.e-add-current') : this.cBox.querySelector('.e-add-current');\n      if (addCurrSelection && addCurrSelection.classList.contains('e-check')) {\n        var existingPredicate_1 = this.existingPredicate[this.options.field];\n        if (existingPredicate_1) {\n          var _loop_1 = function (j) {\n            if (!coll.some(function (data) {\n              return data.value === existingPredicate_1[parseInt(j.toString(), 10)].value;\n            })) {\n              coll.push(existingPredicate_1[parseInt(j.toString(), 10)]);\n            }\n          };\n          for (var j = 0; j < existingPredicate_1.length; j++) {\n            _loop_1(j);\n          }\n        } else {\n          return;\n        }\n      }\n      if (!this.infiniteRenderMod) {\n        this.initiateFilter(coll);\n      } else if (coll.length) {\n        this.initiateFilter(coll);\n      } else if (this.sBox.querySelector('.e-selectall').classList.contains('e-check') && !coll.length) {\n        var isClearFilter = this.options.filteredColumns.some(function (value) {\n          return _this.options.field === value.field;\n        });\n        if (isClearFilter) {\n          this.clearFilter();\n        }\n      }\n    } else {\n      var isClearFilter = this.options.filteredColumns.some(function (value) {\n        return _this.options.field === value.field;\n      });\n      if (isClearFilter) {\n        this.clearFilter();\n      }\n    }\n  };\n  CheckBoxFilterBase.prototype.infiniteFltrBtnHandler = function (coll) {\n    var value;\n    if (this.infiniteManualSelectMaintainPred.length) {\n      for (var i = 0; i < this.infiniteManualSelectMaintainPred.length; i++) {\n        var pred = this.infiniteManualSelectMaintainPred[i];\n        value = pred.value + '';\n        if (value === '' || isNullOrUndefined(value)) {\n          var dummyDefaults = {\n            predicate: pred.predicate,\n            field: pred.field,\n            type: pred.type,\n            uid: pred.uid,\n            operator: pred.operator,\n            matchCase: pred.matchCase,\n            ignoreAccent: pred.ignoreAccent\n          };\n          coll.push.apply(coll, CheckBoxFilterBase.generateNullValuePredicates(dummyDefaults));\n        } else {\n          coll.push(this.infiniteManualSelectMaintainPred[i]);\n        }\n        this.notifyFilterPrevEvent(this.infiniteManualSelectMaintainPred[i]);\n      }\n    }\n    if (!this.localInfiniteSelectAllClicked && this.sInput.value === '' && !(!this.options.parentCurrentViewDataCount && coll.length)) {\n      for (var i = 0; i < this.infiniteUnloadParentExistPred.length; i++) {\n        coll.unshift(this.infiniteUnloadParentExistPred[i]);\n        this.notifyFilterPrevEvent(this.existingPredicate[this.options.field][i]);\n      }\n    }\n    if (this.sInput.value !== '' && (!this.localInfiniteSelectAllClicked || this.infiniteLocalSelectAll)) {\n      this.infiniteSearchPred['predicate'] = 'or';\n      coll.unshift(this.infiniteSearchPred);\n      this.notifyFilterPrevEvent(this.infiniteSearchPred);\n    }\n  };\n  CheckBoxFilterBase.prototype.notifyFilterPrevEvent = function (predicate) {\n    var args = {\n      instance: this,\n      handler: this.fltrBtnHandler,\n      arg1: predicate.field,\n      arg2: predicate.predicate,\n      arg3: predicate.operator,\n      arg4: predicate.matchCase,\n      arg5: predicate.ignoreAccent,\n      arg6: predicate.value,\n      cancel: false\n    };\n    this.parent.notify(events.fltrPrevent, args);\n    if (args.cancel) {\n      return;\n    }\n  };\n  // eslint-disable-next-line\n  /** @hidden */\n  CheckBoxFilterBase.generateNullValuePredicates = function (defaults) {\n    var coll = [];\n    if (defaults.type === 'string') {\n      coll.push({\n        field: defaults.field,\n        ignoreAccent: defaults.ignoreAccent,\n        matchCase: defaults.matchCase,\n        operator: defaults.operator,\n        predicate: defaults.predicate,\n        value: ''\n      });\n    }\n    coll.push({\n      field: defaults.field,\n      matchCase: defaults.matchCase,\n      operator: defaults.operator,\n      predicate: defaults.predicate,\n      value: null\n    });\n    coll.push({\n      field: defaults.field,\n      matchCase: defaults.matchCase,\n      operator: defaults.operator,\n      predicate: defaults.predicate,\n      value: undefined\n    });\n    return coll;\n  };\n  // eslint-disable-next-line\n  /** @hidden */\n  CheckBoxFilterBase.prototype.initiateFilter = function (fColl) {\n    var firstVal = fColl[0];\n    var predicate;\n    if (!isNullOrUndefined(firstVal)) {\n      predicate = firstVal.ejpredicate ? firstVal.ejpredicate : new Predicate(firstVal.field, firstVal.operator, firstVal.value, !firstVal.matchCase, firstVal.ignoreAccent);\n      for (var j = 1; j < fColl.length; j++) {\n        predicate = fColl[parseInt(j.toString(), 10)].ejpredicate !== undefined ? predicate[fColl[parseInt(j.toString(), 10)].predicate](fColl[parseInt(j.toString(), 10)].ejpredicate) : predicate[fColl[parseInt(j.toString(), 10)].predicate](fColl[parseInt(j.toString(), 10)].field, fColl[parseInt(j.toString(), 10)].operator, fColl[parseInt(j.toString(), 10)].value, !fColl[parseInt(j.toString(), 10)].matchCase, fColl[parseInt(j.toString(), 10)].ignoreAccent);\n      }\n      var args = {\n        action: 'filtering',\n        filterCollection: fColl,\n        field: this.options.field,\n        ejpredicate: Predicate.or(predicate)\n      };\n      this.options.handler(args);\n    }\n  };\n  CheckBoxFilterBase.prototype.isForeignColumn = function (col) {\n    return col.isForeignColumn ? col.isForeignColumn() : false;\n  };\n  CheckBoxFilterBase.prototype.refreshCheckboxes = function () {\n    var _this = this;\n    var val = this.sInput.value;\n    var column = this.options.column;\n    var query = this.isForeignColumn(column) ? this.foreignKeyQuery.clone() : this.options.query.clone();\n    var foreignQuery = this.options.query.clone();\n    var pred = query.queries.filter(function (e) {\n      return e && e.fn === 'onWhere';\n    })[0];\n    query.queries = [];\n    foreignQuery.queries = [];\n    var parsed = this.options.type !== 'string' && parseFloat(val) ? parseFloat(val) : val;\n    var operator = this.options.isRemote ? this.options.type === 'string' ? 'contains' : 'equal' : this.options.type ? 'contains' : 'equal';\n    var matchCase = true;\n    var ignoreAccent = this.options.ignoreAccent;\n    var field = this.isForeignColumn(column) ? column.foreignKeyValue : column.field;\n    parsed = parsed === '' || parsed === undefined ? undefined : parsed;\n    var coll = [];\n    var defaults = {\n      field: field,\n      predicate: 'or',\n      uid: this.options.uid,\n      operator: 'equal',\n      type: this.options.type,\n      matchCase: matchCase,\n      ignoreAccent: ignoreAccent\n    };\n    var predicte;\n    var moduleName = this.options.dataManager.adaptor.getModuleName;\n    if (this.options.type === 'boolean') {\n      if (parsed !== undefined && this.getLocalizedLabel('FilterTrue').toLowerCase().indexOf(parsed.toLowerCase()) !== -1) {\n        parsed = 'true';\n      } else if (parsed !== undefined && this.getLocalizedLabel('FilterFalse').toLowerCase().indexOf(parsed.toLowerCase()) !== -1) {\n        parsed = 'false';\n      }\n      if (parsed !== undefined && this.getLocalizedLabel('FilterTrue').toLowerCase().indexOf(parsed.toLowerCase()) !== -1 && moduleName) {\n        // eslint-disable-next-line no-constant-condition\n        parsed = moduleName() === 'ODataAdaptor' || 'ODataV4Adaptor' ? true : 'true';\n      } else if (parsed !== undefined && this.getLocalizedLabel('FilterFalse').toLowerCase().indexOf(parsed.toLowerCase()) !== -1 && moduleName) {\n        // eslint-disable-next-line no-constant-condition\n        parsed = moduleName() === 'ODataAdaptor' || 'ODataV4Adaptor' ? false : 'false';\n      }\n      operator = 'equal';\n    }\n    if ((this.options.type === 'date' || this.options.type === 'datetime' || this.options.type === 'dateonly') && this.options.format) {\n      var intl = new Internationalization();\n      var format = typeof this.options.format === 'string' ? this.options.format : this.options.format.format;\n      if (format) {\n        parsed = intl.parseDate(val, {\n          format: format\n        }) || new Date(val);\n      } else {\n        parsed = new Date(val);\n      }\n      if (this.options.type === 'dateonly') {\n        parsed = parsed.getFullYear() + '-' + padZero(parsed.getMonth() + 1) + '-' + padZero(parsed.getDate());\n      }\n    }\n    this.infiniteSearchValChange = true;\n    this.infiniteLoadedElem = [];\n    this.infiniteLocalSelectAll = true;\n    this.localInfiniteSelectAllClicked = false;\n    this.localInfiniteSelectionInteracted = false;\n    this.infiniteSkipCnt = 0;\n    this.infiniteDataCount = 0;\n    this.infiniteManualSelectMaintainPred = [];\n    if (this.sInput.value === '') {\n      this.infiniteUnloadParentExistPred = this.infiniteRenderMod && this.existingPredicate[this.options.column.field] ? this.existingPredicate[this.options.column.field].slice() : [];\n      this.options.parentTotalDataCount = this.options.parentTotalDataCount;\n    } else {\n      this.infiniteUnloadParentExistPred = [];\n    }\n    this.addDistinct(query);\n    var args = {\n      requestType: events.filterSearchBegin,\n      filterModel: this,\n      columnName: field,\n      column: column,\n      operator: operator,\n      matchCase: matchCase,\n      ignoreAccent: ignoreAccent,\n      filterChoiceCount: null,\n      query: query,\n      value: parsed\n    };\n    if (this.infiniteRenderMod && this.parent.filterSettings.itemsCount) {\n      args.filterChoiceCount = this.parent.filterSettings.itemsCount;\n    }\n    this.parent.trigger(events.actionBegin, args, function (filterargs) {\n      // eslint-disable-next-line no-self-assign\n      filterargs.operator = filterargs.operator;\n      predicte = new Predicate(field, filterargs.operator, args.value, filterargs.matchCase, filterargs.ignoreAccent);\n      if (_this.options.type === 'date' || _this.options.type === 'datetime' || _this.options.type === 'dateonly') {\n        operator = 'equal';\n        var filterObj = {\n          field: field,\n          operator: operator,\n          value: parsed,\n          matchCase: matchCase,\n          ignoreAccent: ignoreAccent\n        };\n        if (!isNullOrUndefined(parsed)) {\n          predicte = getDatePredicate(filterObj, _this.options.type);\n        }\n      }\n      if (val && typeof val === 'string' && _this.isBlanks && _this.getLocalizedLabel('Blanks').toLowerCase().indexOf(val.toLowerCase()) >= 0) {\n        coll = coll.concat(CheckBoxFilterBase.generateNullValuePredicates(defaults));\n        var emptyValPredicte = CheckBoxFilterBase.generatePredicate(coll);\n        emptyValPredicte.predicates.push(predicte);\n        predicte = emptyValPredicte;\n        query.where(emptyValPredicte);\n      } else if (val.length) {\n        predicte = !isNullOrUndefined(pred) ? predicte.and(pred.e) : predicte;\n        query.where(predicte);\n      } else if (!isNullOrUndefined(pred)) {\n        predicte = pred.e;\n        query.where(pred.e);\n      }\n      _this.infiniteSearchPred = predicte;\n      filterargs.filterChoiceCount = !isNullOrUndefined(filterargs.filterChoiceCount) ? filterargs.filterChoiceCount : 1000;\n      if (_this.infiniteRenderMod && _this.parent.filterSettings.itemsCount !== filterargs.filterChoiceCount) {\n        _this.parent.filterSettings.itemsCount = args.filterChoiceCount;\n      }\n      var fPredicate = {};\n      showSpinner(_this.spinner);\n      _this.renderEmpty = false;\n      if (_this.isForeignColumn(column) && val.length) {\n        var colData = 'result' in column.dataSource ? new DataManager(column.dataSource.result) : column.dataSource;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        colData.executeQuery(query).then(function (e) {\n          var columnData = _this.options.column.columnData;\n          _this.options.column.columnData = e.result;\n          _this.parent.notify(events.generateQuery, {\n            predicate: fPredicate,\n            column: column\n          });\n          if (fPredicate.predicate.predicates.length) {\n            foreignQuery.where(fPredicate.predicate);\n          } else {\n            _this.renderEmpty = true;\n          }\n          _this.options.column.columnData = columnData;\n          if (_this.infiniteRenderMod) {\n            _this.infiniteInitialLoad = isNullOrUndefined(_this.fullData) ? true : false;\n            _this.makeInfiniteScrollRequest(foreignQuery);\n            foreignQuery.requiresCount();\n          } else {\n            foreignQuery.take(filterargs.filterChoiceCount);\n          }\n          _this.search(filterargs, foreignQuery);\n        });\n      } else {\n        if (_this.infiniteRenderMod && _this.parent.filterSettings.itemsCount) {\n          _this.infiniteInitialLoad = isNullOrUndefined(_this.fullData) ? true : false;\n          _this.makeInfiniteScrollRequest(query);\n          query.requiresCount();\n        } else {\n          query.take(filterargs.filterChoiceCount);\n        }\n        _this.search(filterargs, query);\n      }\n    });\n  };\n  CheckBoxFilterBase.prototype.search = function (args, query) {\n    if (this.parent.dataSource && 'result' in this.parent.dataSource) {\n      this.filterEvent(args, query);\n    } else {\n      this.processSearch(query);\n    }\n  };\n  CheckBoxFilterBase.prototype.getPredicateFromCols = function (columns, isExecuteLocal) {\n    var predicates = CheckBoxFilterBase.getPredicate(columns, isExecuteLocal);\n    var predicateList = [];\n    var fPredicate = {};\n    var isGrid = this.parent.getForeignKeyColumns !== undefined;\n    var foreignColumn = isGrid ? this.parent.getForeignKeyColumns() : [];\n    for (var _i = 0, _a = Object.keys(predicates); _i < _a.length; _i++) {\n      var prop = _a[_i];\n      var col = void 0;\n      if (isGrid && !this.parent.getColumnByField(prop)) {\n        col = getColumnByForeignKeyValue(prop, foreignColumn);\n      }\n      if (col) {\n        this.parent.notify(events.generateQuery, {\n          predicate: fPredicate,\n          column: col\n        });\n        if (fPredicate.predicate.predicates.length) {\n          predicateList.push(Predicate.or(fPredicate.predicate.predicates));\n        }\n      } else {\n        predicateList.push(predicates[\"\" + prop]);\n      }\n    }\n    return predicateList.length && Predicate.and(predicateList);\n  };\n  CheckBoxFilterBase.prototype.getQuery = function () {\n    return this.parent.getQuery ? this.parent.getQuery().clone() : new Query();\n  };\n  CheckBoxFilterBase.prototype.getAllData = function () {\n    var _this = this;\n    this.customQuery = false;\n    var query = this.getQuery();\n    query.requiresCount(); //consider take query\n    this.addDistinct(query);\n    var args = {\n      requestType: events.filterChoiceRequest,\n      query: query,\n      filterChoiceCount: null\n    };\n    var filterModel = 'filterModel';\n    args[\"\" + filterModel] = this;\n    if (this.infiniteRenderMod && this.parent.filterSettings.itemsCount) {\n      args.filterChoiceCount = this.parent.filterSettings.itemsCount;\n    }\n    this.parent.trigger(events.actionBegin, args, function (args) {\n      args.filterChoiceCount = !isNullOrUndefined(args.filterChoiceCount) ? args.filterChoiceCount : 1000;\n      if (_this.infiniteRenderMod && _this.parent.filterSettings.itemsCount !== args.filterChoiceCount) {\n        _this.parent.filterSettings.itemsCount = args.filterChoiceCount;\n      }\n      if (!_this.infiniteRenderMod) {\n        query.take(args.filterChoiceCount);\n      }\n      if (!args.query.distincts.length || _this.infiniteRenderMod) {\n        _this.customQuery = true;\n        _this.queryGenerate(query);\n      }\n      if (_this.infiniteRenderMod) {\n        _this.infiniteInitialLoad = isNullOrUndefined(_this.fullData) ? true : false;\n        _this.makeInfiniteScrollRequest(query);\n      }\n      if (_this.parent.dataSource && 'result' in _this.parent.dataSource) {\n        _this.filterEvent(args, query);\n      } else {\n        _this.processDataOperation(query, true);\n      }\n    });\n  };\n  CheckBoxFilterBase.prototype.addDistinct = function (query) {\n    var _this = this;\n    var _a;\n    var filteredColumn = DataUtil.distinct(this.options.filteredColumns, 'field');\n    if (filteredColumn.indexOf(this.options.column.field) <= -1) {\n      filteredColumn = filteredColumn.concat(this.options.column.field);\n    }\n    if (!this.infiniteRenderMod) {\n      query.distinct(filteredColumn);\n    }\n    if (this.infiniteRenderMod && !this.options.isRemote && this.sInput.value === '') {\n      this.options.dataSource = this.options.dataSource instanceof DataManager ? this.options.dataSource : new DataManager(this.options.dataSource);\n      this.infinitePermenantLocalData = this.options.dataSource.dataSource.json.slice();\n      this.options.dataSource.dataSource.json = DataUtil.distinct((_a = this.options.parentFilteredLocalRecords).concat.apply(_a, this.infinitePermenantLocalData), this.options.column.field, true);\n      if (this.isForeignColumn(this.options.column)) {\n        this.options.column.dataSource = this.options.column.dataSource instanceof DataManager ? this.options.column.dataSource : new DataManager(this.options.column.dataSource);\n        this.options.dataSource.dataSource.json = this.options.dataSource.dataSource.json.map(function (item, i) {\n          return Object.assign({}, item, _this.options.column.dataSource.dataSource.json[i]);\n        });\n      }\n    } else if (this.infiniteRenderMod && this.options.isRemote) {\n      query.select(this.options.column.field);\n      query.sortBy(this.options.column.field, 'ascending');\n      var moduleName = this.options.dataManager.adaptor.getModuleName;\n      if (moduleName && moduleName() && (moduleName() === 'ODataV4Adaptor' || moduleName() === 'WebApiAdaptor' || moduleName() === 'CustomDataAdaptor' || moduleName() === 'GraphQLAdaptor' || moduleName() === 'ODataAdaptor')) {\n        query.distinct(filteredColumn);\n      }\n    }\n    return query;\n  };\n  CheckBoxFilterBase.prototype.filterEvent = function (args, query) {\n    var _this = this;\n    var defObj = eventPromise(args, query);\n    this.parent.trigger(events.dataStateChange, defObj.state);\n    var def = defObj.deffered;\n    def.promise.then(function (e) {\n      _this.dataSuccess(e);\n    });\n  };\n  CheckBoxFilterBase.prototype.infiniteScrollMouseKeyDownHandler = function () {\n    EventHandler.remove(this.cBox, 'scroll', this.infiniteScrollHandler);\n  };\n  CheckBoxFilterBase.prototype.infiniteScrollMouseKeyUpHandler = function (e) {\n    var _this = this;\n    EventHandler.add(this.cBox, 'scroll', this.infiniteScrollHandler, this);\n    var target = this.cBox;\n    if (target.children.length > 1 && (target.scrollTop >= target.scrollHeight - target.offsetHeight || target.scrollTop <= 0)) {\n      this.infiniteScrollHandler();\n    }\n    Global.timer = setTimeout(function () {\n      _this.clickHandler(e);\n      Global.timer = null;\n    }, 0);\n  };\n  CheckBoxFilterBase.prototype.getListHeight = function (element) {\n    var listDiv = createElement('div', {\n      className: 'e-ftrchk',\n      styles: 'visibility: hidden'\n    });\n    listDiv.innerHTML = '<div class=\"e-checkbox-wrapper\"><span class=\"e-label e-checkboxfiltertext\">A</div></span>';\n    element.appendChild(listDiv);\n    var rect = listDiv.getBoundingClientRect();\n    element.removeChild(listDiv);\n    var listHeight = Math.round(rect.height);\n    return listHeight;\n  };\n  CheckBoxFilterBase.prototype.getShimmerTemplate = function () {\n    return '<span class=\"e-mask e-skeleton e-skeleton-text e-shimmer-wave\"></span>';\n  };\n  CheckBoxFilterBase.prototype.showMask = function () {\n    var maskRowCount = 5;\n    var maskItemHeight;\n    var maskList = this.parent.createElement('div', {\n      id: this.id + this.options.type + '_CheckBoxMaskList',\n      className: 'e-checkboxlist e-fields e-infinite-list e-masklist',\n      styles: 'z-index: 10;'\n    });\n    var wrapperElem = this.cBox;\n    this.removeMask();\n    if (wrapperElem) {\n      var computedStyle = getComputedStyle(wrapperElem);\n      var height = wrapperElem.children.length ? parseInt(computedStyle.height) : Math.floor(parseInt(computedStyle.height.split('px')[0])) - 5;\n      var backgroundColor = this.isExcel && !wrapperElem.children.length && !this.dlg.classList.contains('e-excelfilter') ? '' : getComputedStyle(this.dlg.querySelector('.e-dlg-content')).backgroundColor;\n      maskList.style.cssText = 'width: ' + computedStyle.width + '; min-height: ' + computedStyle.minHeight + '; height: ' + height + 'px; margin: ' + computedStyle.margin + '; border-style: ' + computedStyle.borderStyle + '; border-width: ' + computedStyle.borderWidth + '; border-color: ' + computedStyle.borderColor + '; position: absolute; background-color: ' + backgroundColor + ';';\n      var liHeight = this.getListHeight(wrapperElem);\n      maskRowCount = Math.floor(height / liHeight);\n      maskRowCount = wrapperElem.children.length > maskRowCount ? wrapperElem.children.length : maskRowCount;\n      maskItemHeight = liHeight + 'px';\n    }\n    var maskTemplate = '<div class=\"e-ftrchk e-mask-ftrchk\" style=\"width: 100%; height:' + maskItemHeight + ';\">' + '<div class=\"e-checkbox-wrapper\" style=\"width: 100%;\"><input class=\"e-chk-hidden\">' + this.getShimmerTemplate() + this.getShimmerTemplate() + '</div></div>';\n    maskList.innerHTML = '';\n    if (!wrapperElem.children.length) {\n      this.spinner.insertAdjacentHTML('beforebegin', maskTemplate);\n      var maskSpan = [].slice.call(this.spinner.parentElement.querySelectorAll('.e-mask:not(.e-mask-checkbox-filter-intent):not(.e-mask-checkbox-filter-span-intent)'));\n      maskSpan[0].classList.add('e-mask-checkbox-filter-intent');\n      maskSpan[1].classList.add('e-mask-checkbox-filter-span-intent');\n    }\n    this.spinner.insertBefore(maskList, this.cBox);\n    for (var i = 0; maskRowCount && i < maskRowCount; i++) {\n      maskList.innerHTML += maskTemplate;\n      var maskSpan = [].slice.call(maskList.querySelectorAll('.e-mask:not(.e-mask-checkbox-filter-intent):not(.e-mask-checkbox-filter-span-intent)'));\n      maskSpan[0].classList.add('e-mask-checkbox-filter-intent');\n      maskSpan[1].classList.add('e-mask-checkbox-filter-span-intent');\n    }\n    if (this.cBox) {\n      maskList.scrollTop = this.cBox.scrollTop;\n    }\n  };\n  CheckBoxFilterBase.prototype.removeMask = function () {\n    var maskLists = this.dialogObj.element.querySelectorAll('.e-mask-ftrchk');\n    if (maskLists.length) {\n      for (var i = 0; i < maskLists.length; i++) {\n        remove(maskLists[i]);\n      }\n    }\n    var maskParent = this.dialogObj.element.querySelector('.e-checkboxlist.e-masklist');\n    if (maskParent) {\n      remove(this.dialogObj.element.querySelector('.e-checkboxlist.e-masklist'));\n    }\n  };\n  CheckBoxFilterBase.prototype.infiniteScrollHandler = function () {\n    var target = this.cBox;\n    if (target.scrollTop >= target.scrollHeight - target.offsetHeight && !this.infiniteQueryExecutionPending && this.infiniteLoadedElem.length <= this.infiniteSkipCnt + this.parent.filterSettings.itemsCount && this.cBox.children.length === this.parent.filterSettings.itemsCount * 3 && (!this.infiniteDataCount || this.infiniteDataCount > this.infiniteSkipCnt + this.parent.filterSettings.itemsCount)) {\n      this.makeInfiniteScrollRequest();\n      this.prevInfiniteScrollDirection = 'down';\n    } else if (target.scrollTop >= target.scrollHeight - target.offsetHeight && !this.infiniteQueryExecutionPending && this.infiniteLoadedElem.length > this.infiniteSkipCnt + this.parent.filterSettings.itemsCount && this.cBox.children.length === this.parent.filterSettings.itemsCount * 3) {\n      this.infiniteRemoveElements([].slice.call(this.cBox.children).splice(0, this.parent.filterSettings.itemsCount));\n      this.infiniteSkipCnt += this.prevInfiniteScrollDirection === 'down' ? this.parent.filterSettings.itemsCount : this.parent.filterSettings.itemsCount * 3;\n      appendChildren(this.cBox, this.infiniteLoadedElem.slice(this.infiniteSkipCnt, this.parent.filterSettings.itemsCount + this.infiniteSkipCnt));\n      this.prevInfiniteScrollDirection = 'down';\n    } else if (target.scrollTop === 0 && !this.infiniteInitialLoad && !this.infiniteSearchValChange && this.infiniteSkipCnt && this.infiniteLoadedElem.length && this.infiniteLoadedElem.length > this.parent.filterSettings.itemsCount * 3 && this.cBox.children.length === this.parent.filterSettings.itemsCount * 3) {\n      this.infiniteRemoveElements([].slice.call(this.cBox.children).splice(this.parent.filterSettings.itemsCount * 2, this.parent.filterSettings.itemsCount));\n      this.infiniteSkipCnt -= this.prevInfiniteScrollDirection === 'up' ? this.parent.filterSettings.itemsCount : this.parent.filterSettings.itemsCount * 3;\n      this.infiniteAppendElements([].slice.call(this.infiniteLoadedElem.slice(this.infiniteSkipCnt, this.infiniteSkipCnt + this.parent.filterSettings.itemsCount)));\n      this.cBox.scrollTop = this.infiniteScrollAppendDiff;\n      this.prevInfiniteScrollDirection = 'up';\n    } else if (target.scrollTop === 0 && !this.infiniteInitialLoad && !this.infiniteSearchValChange && this.infiniteSkipCnt && this.infiniteLoadedElem.length && this.cBox.children.length < this.parent.filterSettings.itemsCount * 3) {\n      this.infiniteRemoveElements([].slice.call(this.cBox.children).splice(this.parent.filterSettings.itemsCount * 2, this.infiniteDataCount % this.parent.filterSettings.itemsCount));\n      this.infiniteSkipCnt = (Math.floor(this.infiniteDataCount / this.parent.filterSettings.itemsCount) - 3) * this.parent.filterSettings.itemsCount;\n      this.infiniteAppendElements([].slice.call(this.infiniteLoadedElem.slice(this.infiniteSkipCnt, this.infiniteSkipCnt + this.parent.filterSettings.itemsCount)));\n      this.cBox.scrollTop = this.infiniteScrollAppendDiff;\n      this.prevInfiniteScrollDirection = 'up';\n    }\n  };\n  CheckBoxFilterBase.prototype.infiniteRemoveElements = function (removeElem) {\n    for (var i = 0; i < removeElem.length; i++) {\n      remove(removeElem[i]);\n    }\n  };\n  CheckBoxFilterBase.prototype.infiniteAppendElements = function (appendElem) {\n    for (var i = 0; i < appendElem.length; i++) {\n      this.cBox.insertBefore(appendElem[i], this.cBox.children[i]);\n    }\n  };\n  CheckBoxFilterBase.prototype.makeInfiniteScrollRequest = function (query) {\n    var _this = this;\n    if (!this.infiniteInitialLoad && this.parent.filterSettings && this.parent.filterSettings.loadingIndicator === 'Shimmer') {\n      setTimeout(function () {\n        if (_this.infiniteQueryExecutionPending) {\n          _this.showMask();\n        }\n      }, 500);\n    } else if (!this.infiniteInitialLoad) {\n      createSpinner({\n        target: this.spinner,\n        cssClass: this.parent.cssClass ? this.parent.cssClass : null\n      }, this.parent.createElement);\n      showSpinner(this.spinner);\n    }\n    var fName = 'fn';\n    if (this.infiniteQuery && this.infiniteQuery.queries && this.infiniteQuery.queries.length) {\n      for (var i = 0; i < this.infiniteQuery.queries.length; i++) {\n        if (this.infiniteQuery.queries[i][\"\" + fName] === 'onTake' || this.infiniteQuery.queries[i][\"\" + fName] === 'onSkip') {\n          this.infiniteQuery.queries.splice(i, 1);\n          i--;\n        }\n      }\n    }\n    var existQuery = query ? true : false;\n    query = query ? query : this.infiniteQuery;\n    if (this.infiniteInitialLoad || this.infiniteSearchValChange) {\n      this.infiniteSkipCnt = 0;\n    } else {\n      this.infiniteSkipCnt += this.parent.filterSettings.itemsCount;\n    }\n    query.skip(this.infiniteSkipCnt);\n    if (this.infiniteInitialLoad || this.infiniteSearchValChange) {\n      query.take(this.parent.filterSettings.itemsCount * 3);\n      this.infiniteSkipCnt += this.parent.filterSettings.itemsCount * 2;\n    } else {\n      query.take(this.parent.filterSettings.itemsCount);\n    }\n    if (!existQuery) {\n      this.processDataOperation(query);\n      this.infiniteQueryExecutionPending = true;\n    }\n  };\n  CheckBoxFilterBase.prototype.processDataOperation = function (query, isInitial) {\n    var _this = this;\n    this.options.dataSource = this.options.dataSource instanceof DataManager ? this.options.dataSource : new DataManager(this.options.dataSource);\n    var allPromise = [];\n    var runArray = [];\n    if (this.isForeignColumn(this.options.column) && isInitial) {\n      var colData = 'result' in this.options.column.dataSource ? new DataManager(this.options.column.dataSource.result) : this.options.column.dataSource;\n      this.foreignKeyQuery.params = query.params;\n      allPromise.push(colData.executeQuery(this.foreignKeyQuery));\n      runArray.push(function (data) {\n        return _this.foreignKeyData = data;\n      });\n    }\n    if (this.infiniteRenderMod) {\n      this.infiniteQuery = query.clone();\n      if (this.infiniteInitialLoad) {\n        this.cBox.classList.add('e-checkbox-infinitescroll');\n        EventHandler.add(this.cBox, 'scroll', this.infiniteScrollHandler, this);\n        EventHandler.add(this.cBox, 'mouseup', this.infiniteScrollMouseKeyUpHandler, this);\n        EventHandler.add(this.cBox, 'mousedown', this.infiniteScrollMouseKeyDownHandler, this);\n      } else if (this.infiniteSearchValChange) {\n        this.cBox.innerHTML = '';\n      }\n    }\n    if (this.infiniteRenderMod && this.infiniteInitialLoad && !this.options.isRemote) {\n      var field = this.isForeignColumn(this.options.column) ? this.options.foreignKeyValue : this.options.column.field;\n      this.options.dataSource.executeQuery(new Query().sortBy(field, DataUtil.fnAscending)).then(function (e) {\n        _this.options.dataSource.dataSource.json = e.result;\n        _this.executeQueryOperations(query, allPromise, runArray);\n      });\n    } else {\n      this.executeQueryOperations(query, allPromise, runArray);\n    }\n  };\n  CheckBoxFilterBase.prototype.executeQueryOperations = function (query, allPromise, runArray) {\n    var _this = this;\n    allPromise.push(this.options.dataSource.executeQuery(query));\n    runArray.push(this.dataSuccess.bind(this));\n    var i = 0;\n    Promise.all(allPromise).then(function (e) {\n      _this.infiniteQueryExecutionPending = _this.infiniteRenderMod ? false : _this.infiniteQueryExecutionPending;\n      for (var j = 0; j < e.length; j++) {\n        _this.infiniteDataCount = _this.infiniteRenderMod && !_this.infiniteDataCount ? e[j].count : _this.infiniteDataCount;\n        runArray[i++](e[parseInt(j.toString(), 10)].result);\n      }\n    }).catch(function () {\n      if (_this.infiniteRenderMod && _this.parent.filterSettings && _this.parent.filterSettings.loadingIndicator === 'Shimmer') {\n        _this.parent.showMaskRow(undefined, _this.dialogObj.element);\n      }\n    });\n  };\n  CheckBoxFilterBase.prototype.dataSuccess = function (e) {\n    if (!this.infiniteInitialLoad && this.infiniteDataCount && (this.infiniteSkipCnt >= this.infiniteDataCount && !this.infiniteSearchValChange || e.length === 0)) {\n      return;\n    }\n    this.fullData = e;\n    var args1 = {\n      dataSource: this.fullData,\n      executeQuery: true,\n      field: this.options.field\n    };\n    this.parent.notify(events.beforeCheckboxRenderer, args1);\n    if (args1.executeQuery) {\n      var query = new Query();\n      if (!this.customQuery) {\n        this.isExecuteLocal = true;\n        this.queryGenerate(query);\n        this.isExecuteLocal = false;\n      }\n      // query.select(this.options.field);\n      var result = new DataManager(args1.dataSource).executeLocal(query);\n      var col = this.options.column;\n      this.filteredData = CheckBoxFilterBase.getDistinct(result, this.options.field, col, this.foreignKeyData, this).records || [];\n    }\n    var data = args1.executeQuery ? this.filteredData : args1.dataSource;\n    this.processDataSource(null, true, data, args1);\n    if (this.sInput && (this.infiniteRenderMod && this.infiniteInitialLoad || !this.infiniteRenderMod)) {\n      this.sInput.focus();\n    }\n    if (this.infiniteInitialLoad || this.infiniteSearchValChange) {\n      this.infiniteInitialLoad = false;\n      this.infiniteSearchValChange = false;\n    }\n    var args = {\n      requestType: events.filterAfterOpen,\n      columnName: this.options.field,\n      columnType: this.options.type\n    };\n    var filterModel = 'filterModel';\n    args[\"\" + filterModel] = this;\n    this.parent.notify(events.cBoxFltrComplete, args);\n    if (this.isCheckboxFilterTemplate) {\n      hideSpinner(this.spinner);\n    }\n  };\n  CheckBoxFilterBase.prototype.queryGenerate = function (query) {\n    if (this.parent.searchSettings && this.parent.searchSettings.key.length) {\n      var sSettings = this.parent.searchSettings;\n      var fields = sSettings.fields.length ? sSettings.fields : this.options.columns.map(function (f) {\n        return f.field;\n      });\n      query.search(sSettings.key, fields, sSettings.operator, sSettings.ignoreCase, sSettings.ignoreAccent);\n    }\n    if (this.options.filteredColumns.length) {\n      var cols = [];\n      for (var i = 0; i < this.options.filteredColumns.length; i++) {\n        var filterColumn = this.options.filteredColumns[parseInt(i.toString(), 10)];\n        if (this.options.uid) {\n          filterColumn.uid = filterColumn.uid || this.parent.getColumnByField(filterColumn.field).uid;\n          if (filterColumn.uid !== this.options.uid) {\n            cols.push(this.options.filteredColumns[parseInt(i.toString(), 10)]);\n          }\n        } else {\n          if (filterColumn.field !== this.options.field) {\n            cols.push(this.options.filteredColumns[parseInt(i.toString(), 10)]);\n          }\n        }\n      }\n      var predicate = this.getPredicateFromCols(cols, this.isExecuteLocal);\n      if (predicate) {\n        query.where(predicate);\n      }\n    }\n  };\n  CheckBoxFilterBase.prototype.processDataSource = function (query, isInitial, dataSource, args) {\n    showSpinner(this.spinner);\n    // query = query ? query : this.options.query.clone();\n    // query.requiresCount();\n    // let result: Object = new DataManager(dataSource as JSON[]).executeLocal(query);\n    // let res: { result: Object[] } = result as { result: Object[] };\n    this.isExecuteLocal = true;\n    this.updateResult();\n    this.isExecuteLocal = false;\n    var args1 = {\n      dataSource: this.fullData,\n      isCheckboxFilterTemplate: false,\n      column: this.options.column,\n      element: this.cBox,\n      type: this.options.type,\n      format: this.options.type,\n      btnObj: this.options.isResponsiveFilter ? null : this.dialogObj.btnObj[0],\n      searchBox: this.searchBox\n    };\n    this.parent.notify(events.beforeCheckboxfilterRenderer, args1);\n    this.isCheckboxFilterTemplate = args1.isCheckboxFilterTemplate;\n    if (!this.isCheckboxFilterTemplate) {\n      this.createFilterItems(dataSource, isInitial, args);\n    } else if (this.infiniteRenderMod && this.parent.filterSettings && this.parent.filterSettings.loadingIndicator === 'Shimmer') {\n      this.removeMask();\n    }\n  };\n  CheckBoxFilterBase.prototype.processSearch = function (query) {\n    this.processDataOperation(query);\n  };\n  CheckBoxFilterBase.prototype.updateResult = function () {\n    this.result = {};\n    var predicate = this.infiniteRenderMod && this.existingPredicate[this.options.field] ? this.getPredicateFromCols(this.existingPredicate[this.options.field], this.isExecuteLocal) : this.getPredicateFromCols(this.options.filteredColumns, this.isExecuteLocal);\n    var query = new Query();\n    if (predicate) {\n      query.where(predicate);\n    }\n    this.parent.notify(events.beforeCheckboxRendererQuery, {\n      query: query\n    });\n    var result = new DataManager(this.fullData).executeLocal(query);\n    for (var _i = 0, result_1 = result; _i < result_1.length; _i++) {\n      var res = result_1[_i];\n      this.result[getObject(this.options.field, res)] = true;\n    }\n  };\n  CheckBoxFilterBase.prototype.clickHandler = function (e) {\n    var _a;\n    if (!isNullOrUndefined(Global.timer)) {\n      clearTimeout(Global.timer);\n    }\n    var target = e.target;\n    if (!isNullOrUndefined(this.parent.loadingIndicator) && this.parent.loadingIndicator.indicatorType === 'Shimmer' && parentsUntil(target, 'e-mask-ftrchk')) {\n      return;\n    }\n    var elem = parentsUntil(target, 'e-checkbox-wrapper');\n    if (parentsUntil(target, 'e-searchbox')) {\n      this.searchBoxClick(e);\n    }\n    if (elem && !this.isCheckboxFilterTemplate) {\n      var selectAll = elem.querySelector('.e-selectall');\n      if (selectAll) {\n        this.updateAllCBoxes(!selectAll.classList.contains('e-check'));\n      } else {\n        toogleCheckbox(elem.parentElement);\n        if (this.infiniteRenderMod && !elem.parentElement.querySelector('.e-add-current')) {\n          this.localInfiniteSelectionInteracted = true;\n          var caseSen = this.options.allowCaseSensitive;\n          var span = elem.parentElement.querySelector('.e-frame');\n          var input = span.previousSibling;\n          var optr = input.checked ? 'equal' : 'notequal';\n          var pred = input.checked ? 'or' : 'and';\n          var defaults = {\n            field: this.options.field,\n            predicate: pred,\n            uid: this.options.uid,\n            operator: optr,\n            type: this.options.type,\n            matchCase: caseSen,\n            ignoreAccent: this.options.ignoreAccent\n          };\n          var value = this.values[parentsUntil(input, 'e-ftrchk').getAttribute('uid')];\n          this.updateInfiniteManualSelectPred(defaults, value);\n          if (this.infiniteRenderMod && !this.options.isRemote && this.options.parentTotalDataCount && this.infiniteUnloadParentExistPred.length) {\n            var predicate = this.getPredicateFromCols((_a = this.options.filteredColumns).concat.apply(_a, this.infiniteManualSelectMaintainPred), true);\n            var query = new Query();\n            if (predicate) {\n              query.where(predicate);\n            }\n            var result = new DataManager(this.infinitePermenantLocalData).executeLocal(query);\n            if (this.options.parentTotalDataCount !== result.length) {\n              this.options.parentTotalDataCount = result.length;\n            }\n            if (!this.options.parentTotalDataCount && this.infiniteUnloadParentExistPred.length) {\n              this.infiniteUnloadParentExistPred = [];\n            }\n          }\n          if (this.infiniteUnloadParentExistPred.length && (this.options.parentTotalDataCount === this.infiniteDataCount || !this.options.parentTotalDataCount)) {\n            this.infiniteUnloadParentExistPred = [];\n          }\n        }\n      }\n      this.updateIndeterminatenBtn();\n      elem.querySelector('.e-chk-hidden').focus();\n    }\n    this.setFocus(parentsUntil(elem, 'e-ftrchk'));\n  };\n  CheckBoxFilterBase.prototype.updateInfiniteManualSelectPred = function (defaults, value) {\n    for (var i = 0; i < this.infiniteManualSelectMaintainPred.length; i++) {\n      var predmdl = this.infiniteManualSelectMaintainPred[i];\n      if (predmdl.value + '' === value + '' && (predmdl.operator === 'equal' || predmdl.operator === 'notequal')) {\n        this.infiniteManualSelectMaintainPred.splice(i, 1);\n        break;\n      }\n    }\n    if (defaults.predicate === 'or' && (!this.localInfiniteSelectAllClicked || !this.infiniteLocalSelectAll) || defaults.predicate === 'and' && (!this.localInfiniteSelectAllClicked || this.infiniteLocalSelectAll)) {\n      this.infiniteManualSelectMaintainPred.push(extend({}, {\n        value: value\n      }, defaults));\n      if (defaults.predicate === 'or') {\n        this.options.parentTotalDataCount++;\n      } else {\n        this.options.parentTotalDataCount--;\n      }\n    }\n  };\n  /**\n   * Method to set the next target element on keyboard navigation using arrow keys.\n   *\n   */\n  CheckBoxFilterBase.prototype.focusNextOrPrev = function (e, focusableElements) {\n    var nextIndex = e.key === 'ArrowUp' ? focusableElements.indexOf(document.activeElement) - 1 : focusableElements.indexOf(document.activeElement) + 1;\n    var nextElement = focusableElements[(nextIndex + focusableElements.length) % focusableElements.length];\n    // Set focus on the next / previous element\n    if (nextElement) {\n      nextElement.focus();\n      var target = nextElement.classList.contains('e-chk-hidden') ? parentsUntil(nextElement, 'e-ftrchk') : nextElement;\n      this.setFocus(target);\n    }\n  };\n  CheckBoxFilterBase.prototype.keyupHandler = function (e) {\n    if (e.key === 'Tab' && e.shiftKey || e.key === 'Tab' || (e.key === 'ArrowUp' || e.key === 'ArrowDown') && !e.altKey) {\n      this.setFocus(parentsUntil(e.target, 'e-ftrchk'));\n    }\n    if ((e.key === 'ArrowUp' || e.key === 'ArrowDown') && !e.altKey && this.parent.filterSettings.type === 'CheckBox') {\n      e.preventDefault();\n      var focusableElements = Array.from(this.dlg.querySelectorAll('input, button, [tabindex]:not([tabindex=\"-1\"])'));\n      this.focusNextOrPrev(e, focusableElements);\n    }\n  };\n  CheckBoxFilterBase.prototype.setFocus = function (elem) {\n    var prevElem = this.dlg.querySelector('.e-chkfocus');\n    if (prevElem) {\n      prevElem.classList.remove('e-chkfocus');\n    }\n    if (elem && elem !== prevElem) {\n      elem.classList.add('e-chkfocus');\n    }\n  };\n  CheckBoxFilterBase.prototype.updateAllCBoxes = function (checked) {\n    if (this.infiniteRenderMod) {\n      this.localInfiniteSelectAllClicked = true;\n      this.infiniteLocalSelectAll = checked;\n      this.infiniteUnloadParentExistPred = [];\n      this.infiniteManualSelectMaintainPred = [];\n    }\n    var cBoxes = this.infiniteRenderMod ? this.infiniteLoadedElem.map(function (arr) {\n      return arr.querySelector('.e-frame');\n    }) : [].slice.call(this.cBox.querySelectorAll('.e-frame:not(.e-add-current)'));\n    for (var _i = 0, cBoxes_1 = cBoxes; _i < cBoxes_1.length; _i++) {\n      var cBox = cBoxes_1[_i];\n      removeAddCboxClasses(cBox, checked);\n      setChecked(cBox.previousSibling, checked);\n    }\n  };\n  CheckBoxFilterBase.prototype.dialogOpen = function () {\n    if (this.parent.element.classList.contains('e-device')) {\n      this.dialogObj.element.querySelector('.e-input-group').classList.remove('e-input-focus');\n      if (!this.options.isResponsiveFilter) {\n        this.dialogObj.element.querySelector('.e-btn').focus();\n      }\n    }\n  };\n  CheckBoxFilterBase.prototype.createCheckbox = function (value, checked, data) {\n    var elem = checked ? this.cBoxTrue.cloneNode(true) : this.cBoxFalse.cloneNode(true);\n    setChecked(elem.querySelector('input'), checked);\n    var label = elem.querySelector('.e-label');\n    var dummyData = extendObjWithFn({}, data, {\n      column: this.options.column,\n      parent: this.parent\n    });\n    var innerText = this.options.disableHtmlEncode ? 'textContent' : 'innerHTML';\n    label[\"\" + innerText] = !isNullOrUndefined(value) && value.toString().length ? this.parent.enableHtmlSanitizer ? SanitizeHtmlHelper.sanitize(value) : value : this.getLocalizedLabel('Blanks');\n    var checkboxUid = getUid('cbox');\n    label.setAttribute('id', checkboxUid + 'cboxLabel');\n    elem.querySelector('input').setAttribute('aria-labelledby', label.id);\n    if (label.innerHTML === this.getLocalizedLabel('Blanks')) {\n      this.isBlanks = true;\n    }\n    if (typeof value === 'boolean') {\n      label.innerHTML = value === true ? this.getLocalizedLabel('FilterTrue') : this.getLocalizedLabel('FilterFalse');\n    }\n    addClass([label], ['e-checkboxfiltertext']);\n    if (this.options.template && data[this.options.column.field] !== this.getLocalizedLabel('SelectAll') && data[this.options.column.field] !== this.getLocalizedLabel('AddCurrentSelection')) {\n      label.innerHTML = '';\n      var isReactCompiler = this.parent.isReact && this.options.column.filter && typeof this.options.column.filter.itemTemplate !== 'string';\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      var isReactChild = this.parent.parentDetails && this.parent.parentDetails.parentInstObj &&\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      this.parent.parentDetails.parentInstObj.isReact;\n      if (isReactCompiler || isReactChild) {\n        this.options.template(dummyData, this.parent, 'filterItemTemplate', null, null, null, label);\n        this.parent.renderTemplates();\n      } else {\n        appendChildren(label, this.options.template(dummyData, this.parent, 'filterItemTemplate'));\n      }\n    }\n    return elem;\n  };\n  CheckBoxFilterBase.prototype.updateIndeterminatenBtn = function () {\n    var cnt = this.infiniteRenderMod ? this.infiniteLoadedElem.length : this.cBox.children.length - 1;\n    var className = [];\n    var disabled = false;\n    var elem = this.infiniteRenderMod ? this.sBox.querySelector('.e-selectall') : this.cBox.querySelector('.e-selectall');\n    var selected = this.infiniteRenderMod ? this.infiniteLoadedElem.filter(function (arr) {\n      return arr.querySelector('.e-check');\n    }).length : this.cBox.querySelectorAll('.e-check:not(.e-selectall):not(.e-add-current)').length;\n    if (this.cBox.querySelector('.e-add-current')) {\n      cnt -= 1;\n    }\n    var btn;\n    if (!this.options.isResponsiveFilter) {\n      btn = this.dialogObj.btnObj[0];\n      btn.disabled = false;\n    }\n    var input = elem.previousSibling;\n    setChecked(input, false);\n    input.indeterminate = false;\n    if (this.infiniteRenderMod && this.sInput.value === '' && !this.options.parentCurrentViewDataCount && !this.localInfiniteSelectionInteracted && (!this.localInfiniteSelectAllClicked || !this.infiniteLocalSelectAll && !selected) && (cnt !== selected || cnt === selected)) {\n      selected = 0;\n    } else if (this.infiniteRenderMod && this.infiniteLoadedElem.length < this.infiniteDataCount && this.infiniteUnloadParentExistPred.length && (!selected || cnt === selected) && this.infiniteLocalSelectAll) {\n      if (!selected) {\n        selected += this.infiniteUnloadParentExistPred.length;\n      } else {\n        cnt += this.infiniteUnloadParentExistPred.length;\n      }\n    }\n    if (cnt === selected) {\n      if (this.infiniteRenderMod) {\n        this.infiniteLocalSelectAll = true;\n        this.localInfiniteSelectAllClicked = true;\n        this.infiniteManualSelectMaintainPred = [];\n      }\n      className = ['e-check'];\n      setChecked(input, true);\n    } else if (selected) {\n      className = ['e-stop'];\n      input.indeterminate = true;\n    } else {\n      if (this.infiniteRenderMod) {\n        this.infiniteLocalSelectAll = false;\n        this.localInfiniteSelectAllClicked = true;\n        this.infiniteManualSelectMaintainPred = [];\n      }\n      className = ['e-uncheck'];\n      disabled = true;\n      if (btn) {\n        btn.disabled = true;\n      }\n    }\n    if (btn) {\n      this.filterState = !btn.disabled;\n      btn.dataBind();\n    }\n    removeClass([elem], ['e-check', 'e-stop', 'e-uncheck']);\n    addClass([elem], className);\n    this.parent.notify(events.refreshCustomFilterOkBtn, {\n      disabled: disabled\n    });\n  };\n  CheckBoxFilterBase.prototype.createFilterItems = function (data, isInitial, args1) {\n    var _a, _b, _c;\n    var cBoxes = this.parent.createElement('div');\n    var btn;\n    var disabled = false;\n    if (!this.options.isResponsiveFilter) {\n      btn = this.dialogObj.btnObj[0];\n    }\n    var nullCounter = -1;\n    var key = 'ejValue';\n    if (!args1.executeQuery) {\n      key = args1.field;\n    }\n    for (var i = 0; i < data.length; i++) {\n      var val = getValue(key, data[parseInt(i.toString(), 10)]);\n      if (val === '' || isNullOrUndefined(val)) {\n        nullCounter = nullCounter + 1;\n      }\n    }\n    if (!this.infiniteRenderMod) {\n      this.itemsCnt = nullCounter !== -1 ? data.length - nullCounter : data.length;\n    }\n    if (this.infiniteRenderMod && this.parent.filterSettings && this.parent.filterSettings.loadingIndicator === 'Shimmer') {\n      this.removeMask();\n    }\n    if (data.length && !this.renderEmpty) {\n      var selectAllValue = this.getLocalizedLabel('SelectAll');\n      var innerDiv = this.cBox.querySelector('.e-checkfltrnmdiv');\n      if (innerDiv) {\n        innerDiv.classList.remove('e-checkfltrnmdiv');\n      }\n      var checkBox = this.createCheckbox(selectAllValue, false, (_a = {}, _a[this.options.field] = selectAllValue, _a));\n      if (this.parent.cssClass) {\n        if (this.parent.cssClass.indexOf(' ') !== -1) {\n          addClass([checkBox], this.parent.cssClass.split(' '));\n        } else {\n          addClass([checkBox], [this.parent.cssClass]);\n        }\n      }\n      if (this.infiniteInitialLoad || !this.infiniteRenderMod) {\n        var selectAll = createCboxWithWrap(getUid('cbox'), checkBox, 'e-ftrchk');\n        selectAll.querySelector('.e-frame').classList.add('e-selectall');\n        if (this.infiniteRenderMod) {\n          this.sBox.insertBefore(selectAll, this.spinner);\n        } else {\n          cBoxes.appendChild(selectAll);\n        }\n      } else if (this.sBox.querySelector('.e-ftrchk .e-selectall')) {\n        this.sBox.querySelector('.e-ftrchk .e-selectall').previousSibling.disabled = false;\n        this.sBox.querySelector('.e-ftrchk .e-selectall').parentElement.classList.remove('e-checkbox-disabled');\n      }\n      var predicate = new Predicate('field', 'equal', this.options.field);\n      if (this.options.foreignKeyValue) {\n        predicate = predicate.or('field', 'equal', this.options.foreignKeyValue);\n      }\n      var isColFiltered = new DataManager(this.options.filteredColumns).executeLocal(new Query().where(predicate)).length;\n      if (this.sInput.value) {\n        var predicateCheckBox = this.createCheckbox(this.getLocalizedLabel('AddCurrentSelection'), false, (_b = {}, _b[this.options.field] = this.getLocalizedLabel('AddCurrentSelection'), _b));\n        if (this.parent.cssClass) {\n          if (this.parent.cssClass.indexOf(' ') !== -1) {\n            addClass([predicateCheckBox], this.parent.cssClass.split(' '));\n          } else {\n            addClass([predicateCheckBox], [this.parent.cssClass]);\n          }\n        }\n        if (this.infiniteRenderMod && !isNullOrUndefined(this.sBox.children[2]) && this.sBox.children[2].innerText !== 'Add current selection to filter' || !this.infiniteRenderMod) {\n          var predicateElement = createCboxWithWrap(getUid('cbox'), predicateCheckBox, 'e-ftrchk');\n          predicateElement.querySelector('.e-frame').classList.add('e-add-current');\n          if (this.infiniteRenderMod) {\n            this.sBox.insertBefore(predicateElement, this.spinner);\n            var checkBoxListElem = this.spinner.querySelector('.e-checkboxlist');\n            var reduceHeight = Math.ceil(predicateElement.getBoundingClientRect().height);\n            checkBoxListElem.style.height = parseInt(getComputedStyle(checkBoxListElem).height.split('px')[0]) - reduceHeight + 'px';\n            checkBoxListElem.style.minHeight = checkBoxListElem.style.height;\n          } else {\n            cBoxes.appendChild(predicateElement);\n          }\n        } else if (this.sBox.querySelector('.e-ftrchk .e-add-current')) {\n          this.sBox.querySelector('.e-ftrchk .e-add-current').previousSibling.disabled = false;\n          this.sBox.querySelector('.e-ftrchk .e-add-current').parentElement.classList.remove('e-checkbox-disabled');\n        }\n      } else if (this.infiniteRenderMod && !isNullOrUndefined(this.sBox.children[2]) && this.sBox.children[2].innerText === 'Add current selection to filter') {\n        var checkBoxListElem = this.spinner.querySelector('.e-checkboxlist');\n        var increaseHeight = Math.ceil(this.sBox.children[2].getBoundingClientRect().height);\n        checkBoxListElem.style.height = parseInt(getComputedStyle(checkBoxListElem).height.split('px')[0]) + increaseHeight + 'px';\n        checkBoxListElem.style.minHeight = checkBoxListElem.style.height;\n        remove(this.sBox.children[2]);\n      }\n      var isRndere = void 0;\n      for (var i = 0; i < data.length; i++) {\n        var uid = getUid('cbox');\n        this.values[\"\" + uid] = getValue(key, data[parseInt(i.toString(), 10)]);\n        var value = getValue(this.options.field, data[parseInt(i.toString(), 10)]);\n        if (this.options.formatFn) {\n          value = this.valueFormatter.toView(value, this.options.formatFn);\n        }\n        var args_1 = {\n          value: value,\n          column: this.options.column,\n          data: data[parseInt(i.toString(), 10)]\n        };\n        this.parent.notify(events.filterCboxValue, args_1);\n        value = args_1.value;\n        if (value === '' || isNullOrUndefined(value)) {\n          if (isRndere) {\n            continue;\n          }\n          isRndere = true;\n        }\n        if (this.infiniteRenderMod) {\n          this.updateInfiniteUnLoadedCheckboxExistPred(value, this.infiniteUnloadParentExistPred);\n        }\n        var checkbox = this.localInfiniteSelectAllClicked ? this.createCheckbox(value, this.infiniteLocalSelectAll, getValue('dataObj', data[i])) : this.createCheckbox(value, this.getCheckedState(isColFiltered, this.values[\"\" + uid]), getValue('dataObj', data[i]));\n        cBoxes.appendChild(createCboxWithWrap(uid, checkbox, 'e-ftrchk'));\n        if (this.infiniteRenderMod) {\n          cBoxes.lastChild.style.height = this.getListHeight(this.cBox) + 'px';\n        }\n      }\n      var scrollTop = this.cBox.scrollTop;\n      if (!this.infiniteRenderMod || this.infiniteSearchValChange) {\n        this.cBox.innerHTML = '';\n      } else if (this.infiniteRenderMod && this.cBox.children.length) {\n        this.infiniteRemoveElements([].slice.call(this.cBox.children).splice(0, this.parent.filterSettings.itemsCount));\n      }\n      if (this.infiniteRenderMod) {\n        (_c = this.infiniteLoadedElem).push.apply(_c, [].slice.call(cBoxes.children));\n        this.itemsCnt = nullCounter !== -1 ? this.infiniteLoadedElem.length - nullCounter : this.infiniteLoadedElem.length;\n      }\n      if (this.infiniteUnloadParentExistPred.length && (this.infiniteLoadedElem.length >= this.infiniteDataCount || !this.options.parentCurrentViewDataCount || this.options.parentTotalDataCount === this.infiniteDataCount && this.options.parentCurrentViewDataCount)) {\n        this.infiniteUnloadParentExistPred = [];\n      }\n      appendChildren(this.cBox, [].slice.call(cBoxes.children));\n      if (this.infiniteRenderMod && !this.infiniteScrollAppendDiff) {\n        this.infiniteScrollAppendDiff = Math.round(scrollTop - this.cBox.scrollTop);\n      }\n      this.updateIndeterminatenBtn();\n      if (!this.infiniteRenderMod) {\n        if (btn) {\n          btn.disabled = false;\n        }\n        disabled = false;\n      } else {\n        if (btn.disabled) {\n          disabled = true;\n        } else {\n          disabled = false;\n        }\n      }\n    } else {\n      cBoxes.appendChild(this.parent.createElement('span', {\n        innerHTML: this.getLocalizedLabel('NoResult')\n      }));\n      this.cBox.innerHTML = '';\n      if (this.infiniteRenderMod) {\n        var selectAll = this.sBox.querySelector('.e-ftrchk .e-selectall');\n        if (selectAll) {\n          var selectAllParent = selectAll.parentElement.parentElement;\n          if (selectAll.classList.contains('e-check')) {\n            toogleCheckbox(selectAllParent);\n          } else if (selectAll.classList.contains('e-stop')) {\n            toogleCheckbox(selectAllParent);\n            selectAll.classList.remove('e-stop');\n            toogleCheckbox(selectAllParent);\n          }\n          selectAll.previousSibling.disabled = true;\n          selectAll.parentElement.classList.add('e-checkbox-disabled');\n        }\n        var addCurrSelection = this.sBox.querySelector('.e-ftrchk .e-add-current');\n        if (addCurrSelection) {\n          var addCurrSelectionParent = addCurrSelection.parentElement.parentElement;\n          if (addCurrSelection.classList.contains('e-check')) {\n            toogleCheckbox(addCurrSelectionParent);\n          }\n          addCurrSelection.previousSibling.disabled = true;\n          addCurrSelection.parentElement.classList.add('e-checkbox-disabled');\n        }\n      }\n      this.cBox.appendChild(this.parent.createElement('div', {\n        className: 'e-checkfltrnmdiv'\n      }));\n      appendChildren(this.cBox.children[0], [].slice.call(cBoxes.children));\n      if (btn) {\n        btn.disabled = true;\n      }\n      disabled = true;\n      this.filterState = !disabled;\n    }\n    if (btn && data.length) {\n      this.filterState = !btn.disabled;\n      btn.dataBind();\n    }\n    var args = {\n      requestType: events.filterChoiceRequest,\n      dataSource: this.renderEmpty ? [] : data\n    };\n    var filterModel = 'filterModel';\n    args[\"\" + filterModel] = this;\n    this.parent.notify(events.cBoxFltrComplete, args);\n    this.parent.notify(events.refreshCustomFilterOkBtn, {\n      disabled: disabled\n    });\n    if (this.infiniteRenderMod && this.infiniteInitialLoad) {\n      this.cBox.style.marginTop = '0px';\n    }\n    hideSpinner(this.spinner);\n  };\n  CheckBoxFilterBase.prototype.updateInfiniteUnLoadedCheckboxExistPred = function (value, updatePredArr) {\n    for (var j = 0; j < updatePredArr.length; j++) {\n      var pred = updatePredArr[j];\n      if (value === pred.value && (pred.operator === 'equal' || pred.operator === 'notequal')) {\n        this.infiniteManualSelectMaintainPred.push(updatePredArr[j]);\n        updatePredArr.splice(j, 1);\n        j--;\n      }\n    }\n  };\n  CheckBoxFilterBase.prototype.getCheckedState = function (isColFiltered, value) {\n    if (!this.isFiltered || !isColFiltered) {\n      return true;\n    } else {\n      var checkState = this.sInput.value ? true : this.result[\"\" + value];\n      if (this.infiniteRenderMod) {\n        return checkState;\n      } else {\n        return this.options.operator === 'notequal' ? !checkState : checkState;\n      }\n    }\n  };\n  CheckBoxFilterBase.getDistinct = function (json, field, column, foreignKeyData, checkboxFilter) {\n    var len = json.length;\n    var result = [];\n    var value;\n    var ejValue = 'ejValue';\n    var lookup = {};\n    var isForeignKey = column && column.isForeignColumn ? column.isForeignColumn() : false;\n    while (len--) {\n      value = json[parseInt(len.toString(), 10)];\n      if (column && column.type === 'dateonly' && typeof value[\"\" + field] === 'string' && value[\"\" + field]) {\n        var arr = value[\"\" + field].split(/[^0-9.]/);\n        value[\"\" + field] = new Date(parseInt(arr[0], 10), parseInt(arr[1], 10) - 1, parseInt(arr[2], 10));\n      }\n      value = getObject(field, value); //local remote diff, check with mdu\n      var currentFilterValue = typeof value === 'string' && !isNullOrUndefined(checkboxFilter) &&\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      !isNullOrUndefined(checkboxFilter.parent) && !isNullOrUndefined(checkboxFilter.parent.filterSettings) &&\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      !isNullOrUndefined(checkboxFilter.parent.filterSettings.enableCaseSensitivity) ? value.toLowerCase() : value;\n      if (!(currentFilterValue in lookup)) {\n        var obj = {};\n        obj[\"\" + ejValue] = value;\n        lookup[\"\" + currentFilterValue] = true;\n        if (isForeignKey) {\n          var foreignDataObj = getForeignData(column, {}, value, foreignKeyData)[0];\n          setValue(events.foreignKeyData, foreignDataObj, json[parseInt(len.toString(), 10)]);\n          value = getValue(column.foreignKeyValue, foreignDataObj);\n        }\n        setValue(field, isNullOrUndefined(value) ? null : value, obj);\n        setValue('dataObj', json[parseInt(len.toString(), 10)], obj);\n        result.push(obj);\n      }\n    }\n    return DataUtil.group(DataUtil.sort(result, field, DataUtil.fnAscending), 'ejValue');\n  };\n  CheckBoxFilterBase.getPredicate = function (columns, isExecuteLocal) {\n    var cols = DataUtil.distinct(columns, 'field', true) || [];\n    var collection = [];\n    var pred = {};\n    for (var i = 0; i < cols.length; i++) {\n      collection = new DataManager(columns).executeLocal(new Query().where('field', 'equal', cols[parseInt(i.toString(), 10)].field));\n      if (collection.length !== 0) {\n        pred[cols[parseInt(i.toString(), 10)].field] = CheckBoxFilterBase.generatePredicate(collection, isExecuteLocal);\n      }\n    }\n    return pred;\n  };\n  CheckBoxFilterBase.generatePredicate = function (cols, isExecuteLocal) {\n    var len = cols ? cols.length : 0;\n    var predicate;\n    var operate = 'or';\n    var first = CheckBoxFilterBase.updateDateFilter(cols[0]);\n    first.ignoreAccent = !isNullOrUndefined(first.ignoreAccent) ? first.ignoreAccent : false;\n    if (first.type === 'date' || first.type === 'datetime' || first.type === 'dateonly') {\n      predicate = getDatePredicate(first, first.type, isExecuteLocal);\n    } else {\n      predicate = first.ejpredicate ? first.ejpredicate : new Predicate(first.field, first.operator, first.value, !CheckBoxFilterBase.getCaseValue(first), first.ignoreAccent);\n    }\n    for (var p = 1; p < len; p++) {\n      cols[parseInt(p.toString(), 10)] = CheckBoxFilterBase.updateDateFilter(cols[parseInt(p.toString(), 10)]);\n      if (len > 2 && p > 1 && (cols[p].predicate === 'or' && cols[p - 1].predicate === 'or' || cols[p].predicate === 'and' && cols[p - 1].predicate === 'and')) {\n        if (cols[p].type === 'date' || cols[p].type === 'datetime' || cols[p].type === 'dateonly') {\n          predicate.predicates.push(getDatePredicate(cols[parseInt(p.toString(), 10)], cols[p].type, isExecuteLocal));\n        } else {\n          predicate.predicates.push(new Predicate(cols[p].field, cols[parseInt(p.toString(), 10)].operator, cols[parseInt(p.toString(), 10)].value, !CheckBoxFilterBase.getCaseValue(cols[parseInt(p.toString(), 10)]), cols[parseInt(p.toString(), 10)].ignoreAccent));\n        }\n      } else {\n        if (cols[p].type === 'date' || cols[p].type === 'datetime' || cols[p].type === 'dateonly') {\n          if (cols[parseInt(p.toString(), 10)].predicate === 'and' && cols[parseInt(p.toString(), 10)].operator === 'equal') {\n            predicate = predicate[\"\" + operate](getDatePredicate(cols[parseInt(p.toString(), 10)], cols[parseInt(p.toString(), 10)].type, isExecuteLocal), cols[parseInt(p.toString(), 10)].type, cols[parseInt(p.toString(), 10)].ignoreAccent);\n          } else {\n            predicate = predicate[cols[parseInt(p.toString(), 10)].predicate](getDatePredicate(cols[parseInt(p.toString(), 10)], cols[parseInt(p.toString(), 10)].type, isExecuteLocal), cols[parseInt(p.toString(), 10)].type, cols[parseInt(p.toString(), 10)].ignoreAccent);\n          }\n        } else {\n          predicate = cols[parseInt(p.toString(), 10)].ejpredicate ? predicate[cols[parseInt(p.toString(), 10)].predicate](cols[parseInt(p.toString(), 10)].ejpredicate) : predicate[cols[parseInt(p.toString(), 10)].predicate](cols[parseInt(p.toString(), 10)].field, cols[parseInt(p.toString(), 10)].operator, cols[parseInt(p.toString(), 10)].value, !CheckBoxFilterBase.getCaseValue(cols[parseInt(p.toString(), 10)]), cols[parseInt(p.toString(), 10)].ignoreAccent);\n        }\n      }\n    }\n    return predicate || null;\n  };\n  CheckBoxFilterBase.getCaseValue = function (filter) {\n    if (isNullOrUndefined(filter.matchCase)) {\n      if (filter.type === 'string' || isNullOrUndefined(filter.type) && typeof filter.value === 'string') {\n        return false;\n      } else {\n        return true;\n      }\n    } else {\n      return filter.matchCase;\n    }\n  };\n  CheckBoxFilterBase.updateDateFilter = function (filter) {\n    if (filter.type === 'date' || filter.type === 'datetime' || filter.type === 'dateonly' || filter.value instanceof Date) {\n      filter.type = filter.type || 'date';\n    }\n    return filter;\n  };\n  return CheckBoxFilterBase;\n}();\nexport { CheckBoxFilterBase };","map":{"version":3,"names":["EventHandler","isNullOrUndefined","extend","classList","addClass","removeClass","Browser","getValue","setValue","createElement","parentsUntil","getUid","appendChildren","getDatePredicate","getObject","extendObjWithFn","eventPromise","setChecked","clearReactVueTemplates","padZero","Global","remove","debounce","Internationalization","SanitizeHtmlHelper","DataUtil","Query","DataManager","Predicate","createCheckBox","events","ValueFormatter","getForeignData","Dialog","Input","createSpinner","hideSpinner","showSpinner","getFilterMenuPostion","toogleCheckbox","createCboxWithWrap","removeAddCboxClasses","getColumnByForeignKeyValue","CheckBoxFilterBase","parent","isExecuteLocal","existingPredicate","foreignKeyQuery","filterState","values","renderEmpty","isCheckboxFilterTemplate","infiniteRenderMod","infiniteInitialLoad","infiniteSearchValChange","infinitePermenantLocalData","infiniteQueryExecutionPending","infiniteSkipCnt","infiniteScrollAppendDiff","prevInfiniteScrollDirection","infiniteLoadedElem","infiniteDataCount","infiniteLocalSelectAll","localInfiniteSelectAllClicked","localInfiniteSelectionInteracted","infiniteManualSelectMaintainPred","id","element","valueFormatter","locale","cBoxTrue","checked","label","cBoxFalse","insertBefore","className","attrs","type","firstChild","querySelector","add","enableRtl","cssClass","indexOf","split","prototype","destroy","closeDialog","wireEvents","dlg","clickHandler","keyupHandler","searchHandler","searchBoxKeyUp","elem","dialogObj","unWireEvents","foreignKeyFilter","args","fColl","mPredicate","_this","fPredicate","filterCollection","query","clone","options","column","dataSource","executeQuery","where","then","e","columnData","result","notify","generateQuery","predicate","ejpredicate","predicates","fpred","i","length","push","field","parseInt","toString","matchCase","ignoreCase","ignoreAccent","operator","value","filter","col","handler","foreignFilter","isRemote","initalPredicate","foreignKeyValue","searchBoxClick","target","contains","sInput","event","refreshCheckboxes","updateSearchIcon","focus","key","shiftKey","loadingIndicator","indicatorType","showMaskRow","undefined","sIcon","document","body","setAttribute","localeObj","getConstant","getLocalizedLabel","updateDataSource","str","obj","updateModel","actualPredicate","dataManager","format","filteredColumns","filterSettings","columns","allowCaseSensitive","uid","disableHtmlEncode","isFiltered","enableInfiniteScrolling","infiniteUnloadParentExistPred","slice","getAndSetChkElem","sBox","hideSearchbox","title","searchBox","appendChild","inputargs","floatLabelType","properties","placeholder","createInput","spinner","cBox","showDialog","requestType","filterBeforeOpen","columnName","columnType","cancel","filterModel","cBoxFltrBegin","visible","content","close","bind","width","animationSettings","effect","buttons","click","btnClick","buttonModel","isExcel","isPrimary","created","dialogCreated","open","dialogOpen","isStringTemplate","renderResponsiveFilter","dialogLabel","isResponsiveFilter","responsiveCnt","appendTo","style","maxHeight","height","show","showMask","marginTop","getListHeight","getAllData","position","X","Y","left","isDevice","showColumnMenu","filterDialogCreated","openDialog","json","isDestroyed","isBlanks","filterTemplateCol","getFilterItemTemplate","registeredTemplate","filterItemTemplate","destroyTemplate","isReact","isVue","filterMenuClose","filterDialogClose","clearFilter","instance","fltrPrevent","action","tagName","toLowerCase","keyCode","fltrBtnHandler","text","textContent","afterFilterColumnMenuClose","innerHTML","call","querySelectorAll","check","optr","ddlValue","ej2_instances","isMenuNotEqual","searchInput","caseSen","defaults","isNotEqual","itemsCnt","val","fObj","coll","getAttribute","concat","generateNullValuePredicates","notifyFilterPrevEvent","infiniteFltrBtnHandler","addCurrSelection","existingPredicate_1","_loop_1","j","some","data","initiateFilter","isClearFilter","pred","dummyDefaults","apply","parentCurrentViewDataCount","unshift","infiniteSearchPred","arg1","arg2","arg3","arg4","arg5","arg6","firstVal","or","isForeignColumn","foreignQuery","queries","fn","parsed","parseFloat","predicte","moduleName","adaptor","getModuleName","intl","parseDate","Date","getFullYear","getMonth","getDate","parentTotalDataCount","addDistinct","filterSearchBegin","filterChoiceCount","itemsCount","trigger","actionBegin","filterargs","filterObj","emptyValPredicte","generatePredicate","and","colData","fullData","makeInfiniteScrollRequest","requiresCount","take","search","filterEvent","processSearch","getPredicateFromCols","getPredicate","predicateList","isGrid","getForeignKeyColumns","foreignColumn","_i","_a","Object","keys","prop","getColumnByField","getQuery","customQuery","filterChoiceRequest","distincts","queryGenerate","processDataOperation","filteredColumn","distinct","parentFilteredLocalRecords","map","item","assign","select","sortBy","defObj","dataStateChange","state","def","deffered","promise","dataSuccess","infiniteScrollMouseKeyDownHandler","infiniteScrollHandler","infiniteScrollMouseKeyUpHandler","children","scrollTop","scrollHeight","offsetHeight","timer","setTimeout","listDiv","styles","rect","getBoundingClientRect","removeChild","listHeight","Math","round","getShimmerTemplate","maskRowCount","maskItemHeight","maskList","wrapperElem","removeMask","computedStyle","getComputedStyle","floor","backgroundColor","cssText","minHeight","margin","borderStyle","borderWidth","borderColor","liHeight","maskTemplate","insertAdjacentHTML","maskSpan","parentElement","maskLists","maskParent","infiniteRemoveElements","splice","infiniteAppendElements","removeElem","appendElem","fName","infiniteQuery","existQuery","skip","isInitial","allPromise","runArray","params","foreignKeyData","fnAscending","executeQueryOperations","Promise","all","count","catch","args1","beforeCheckboxRenderer","executeLocal","filteredData","getDistinct","records","processDataSource","filterAfterOpen","cBoxFltrComplete","searchSettings","sSettings","fields","f","cols","filterColumn","updateResult","btnObj","beforeCheckboxfilterRenderer","createFilterItems","beforeCheckboxRendererQuery","result_1","res","clearTimeout","selectAll","updateAllCBoxes","span","input","previousSibling","updateInfiniteManualSelectPred","updateIndeterminatenBtn","setFocus","predmdl","focusNextOrPrev","focusableElements","nextIndex","activeElement","nextElement","altKey","preventDefault","Array","from","prevElem","cBoxes","arr","cBoxes_1","createCheckbox","cloneNode","dummyData","innerText","enableHtmlSanitizer","sanitize","checkboxUid","template","isReactCompiler","itemTemplate","isReactChild","parentDetails","parentInstObj","renderTemplates","cnt","disabled","selected","btn","indeterminate","dataBind","refreshCustomFilterOkBtn","_b","_c","nullCounter","selectAllValue","innerDiv","checkBox","isColFiltered","predicateCheckBox","predicateElement","checkBoxListElem","reduceHeight","ceil","increaseHeight","isRndere","formatFn","toView","args_1","filterCboxValue","updateInfiniteUnLoadedCheckboxExistPred","checkbox","getCheckedState","lastChild","selectAllParent","addCurrSelectionParent","updatePredArr","checkState","checkboxFilter","len","ejValue","lookup","isForeignKey","currentFilterValue","enableCaseSensitivity","foreignDataObj","group","sort","collection","operate","first","updateDateFilter","getCaseValue","p"],"sources":["/Users/saleem/Desktop/KClient/Web App/Ver_3.6/User Interface/website_Source files/node_modules/@syncfusion/ej2-grids/src/grid/common/checkbox-filter-base.js"],"sourcesContent":["/* tslint:disable-next-line:max-line-length */\nimport { EventHandler, isNullOrUndefined, extend, classList, addClass, removeClass, Browser, getValue, setValue, createElement } from '@syncfusion/ej2-base';\nimport { parentsUntil, getUid, appendChildren, getDatePredicate, getObject, extendObjWithFn, eventPromise, setChecked, clearReactVueTemplates, padZero, Global } from '../base/util';\nimport { remove, debounce, Internationalization, SanitizeHtmlHelper } from '@syncfusion/ej2-base';\nimport { DataUtil, Query, DataManager, Predicate } from '@syncfusion/ej2-data';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport * as events from '../base/constant';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { getForeignData } from '../base/util';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { createSpinner, hideSpinner, showSpinner } from '@syncfusion/ej2-popups';\nimport { getFilterMenuPostion, toogleCheckbox, createCboxWithWrap, removeAddCboxClasses, getColumnByForeignKeyValue } from '../base/util';\n/**\n * @hidden\n * `CheckBoxFilterBase` module is used to handle filtering action.\n */\nvar CheckBoxFilterBase = /** @class */ (function () {\n    /**\n     * Constructor for checkbox filtering module\n     *\n     * @param {IXLFilter} parent - specifies the IXLFilter\n     * @hidden\n     */\n    function CheckBoxFilterBase(parent) {\n        this.isExecuteLocal = false;\n        this.existingPredicate = {};\n        this.foreignKeyQuery = new Query();\n        /** @hidden */\n        this.filterState = true;\n        this.values = {};\n        this.renderEmpty = false;\n        this.isCheckboxFilterTemplate = false;\n        this.infiniteRenderMod = false;\n        // for infinite scroll ui\n        this.infiniteInitialLoad = false;\n        this.infiniteSearchValChange = false;\n        this.infinitePermenantLocalData = [];\n        this.infiniteQueryExecutionPending = false;\n        this.infiniteSkipCnt = 0;\n        this.infiniteScrollAppendDiff = 0;\n        this.prevInfiniteScrollDirection = '';\n        this.infiniteLoadedElem = [];\n        this.infiniteDataCount = 0;\n        this.infiniteLocalSelectAll = true;\n        this.localInfiniteSelectAllClicked = false;\n        this.localInfiniteSelectionInteracted = false;\n        this.infiniteManualSelectMaintainPred = [];\n        this.parent = parent;\n        this.id = this.parent.element.id;\n        this.valueFormatter = new ValueFormatter(this.parent.locale);\n        this.cBoxTrue = createCheckBox(this.parent.createElement, false, { checked: true, label: ' ' });\n        this.cBoxFalse = createCheckBox(this.parent.createElement, false, { checked: false, label: ' ' });\n        this.cBoxTrue.insertBefore(this.parent.createElement('input', {\n            className: 'e-chk-hidden', attrs: { type: 'checkbox' }\n        }), this.cBoxTrue.firstChild);\n        this.cBoxFalse.insertBefore(this.parent.createElement('input', {\n            className: 'e-chk-hidden', attrs: { 'type': 'checkbox' }\n        }), this.cBoxFalse.firstChild);\n        this.cBoxFalse.querySelector('.e-frame').classList.add('e-uncheck');\n        if (this.parent.enableRtl) {\n            addClass([this.cBoxTrue, this.cBoxFalse], ['e-rtl']);\n        }\n        if (this.parent.cssClass) {\n            if (this.parent.cssClass.indexOf(' ') !== -1) {\n                addClass([this.cBoxTrue, this.cBoxFalse], this.parent.cssClass.split(' '));\n            }\n            else {\n                addClass([this.cBoxTrue, this.cBoxFalse], [this.parent.cssClass]);\n            }\n        }\n    }\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    CheckBoxFilterBase.prototype.destroy = function () {\n        this.closeDialog();\n    };\n    CheckBoxFilterBase.prototype.wireEvents = function () {\n        EventHandler.add(this.dlg, 'click', this.clickHandler, this);\n        EventHandler.add(this.dlg, 'keyup', this.keyupHandler, this);\n        this.searchHandler = debounce(this.searchBoxKeyUp, 200);\n        var elem = this.dialogObj.element.querySelector('.e-searchinput');\n        if (elem) {\n            EventHandler.add(elem, 'keyup', this.searchHandler, this);\n            EventHandler.add(elem, 'input', this.searchHandler, this);\n        }\n    };\n    CheckBoxFilterBase.prototype.unWireEvents = function () {\n        EventHandler.remove(this.dlg, 'click', this.clickHandler);\n        EventHandler.remove(this.dlg, 'keyup', this.keyupHandler);\n        var elem = this.dialogObj.element.querySelector('.e-searchinput');\n        if (elem) {\n            EventHandler.remove(elem, 'keyup', this.searchHandler);\n            EventHandler.remove(elem, 'input', this.searchHandler);\n        }\n    };\n    CheckBoxFilterBase.prototype.foreignKeyFilter = function (args, fColl, mPredicate) {\n        var _this = this;\n        var fPredicate = {};\n        var filterCollection = [];\n        var query = this.foreignKeyQuery.clone();\n        this.options.column.dataSource.\n            executeQuery(query.where(mPredicate)).then(function (e) {\n            _this.options.column.columnData = e.result;\n            _this.parent.notify(events.generateQuery, { predicate: fPredicate, column: _this.options.column });\n            args.ejpredicate = fPredicate.predicate.predicates;\n            var fpred = fPredicate.predicate.predicates;\n            for (var i = 0; i < fpred.length; i++) {\n                filterCollection.push({\n                    field: fpred[parseInt(i.toString(), 10)].field,\n                    predicate: 'or',\n                    matchCase: fpred[parseInt(i.toString(), 10)].ignoreCase,\n                    ignoreAccent: fpred[parseInt(i.toString(), 10)].ignoreAccent,\n                    operator: fpred[parseInt(i.toString(), 10)].operator,\n                    value: fpred[parseInt(i.toString(), 10)].value,\n                    type: _this.options.type\n                });\n            }\n            args.filterCollection = filterCollection.length ? filterCollection :\n                fColl.filter(function (col) { return col.field = _this.options.field; });\n            _this.options.handler(args);\n        });\n    };\n    CheckBoxFilterBase.prototype.foreignFilter = function (args, value) {\n        var operator = this.options.isRemote ?\n            (this.options.column.type === 'string' ? 'contains' : 'equal') : (this.options.column.type ? 'contains' : 'equal');\n        var initalPredicate = new Predicate(this.options.column.foreignKeyValue, operator, value, true, this.options.ignoreAccent);\n        this.foreignKeyFilter(args, [args.filterCollection], initalPredicate);\n    };\n    CheckBoxFilterBase.prototype.searchBoxClick = function (e) {\n        var target = e.target;\n        if (target.classList.contains('e-searchclear')) {\n            this.sInput.value = target.classList.contains('e-chkcancel-icon') ? '' : this.sInput.value;\n            if (this.isCheckboxFilterTemplate) {\n                this.parent.notify('refreshCheckbox', { event: e });\n            }\n            else {\n                this.refreshCheckboxes();\n            }\n            this.updateSearchIcon();\n            this.sInput.focus();\n        }\n    };\n    CheckBoxFilterBase.prototype.searchBoxKeyUp = function (e) {\n        if (isNullOrUndefined(e) || (e.key !== 'ArrowUp' && e.key !== 'ArrowDown' && e.key !== 'Tab' && !(e.key === 'Tab' && e.shiftKey))) {\n            if (!isNullOrUndefined(this.parent.loadingIndicator) && this.parent.loadingIndicator.indicatorType === 'Shimmer') {\n                this.parent.showMaskRow(undefined, this.dialogObj.element);\n            }\n            if (this.isCheckboxFilterTemplate) {\n                this.parent.notify('refreshCheckbox', { event: e });\n            }\n            else {\n                this.refreshCheckboxes();\n            }\n            this.updateSearchIcon();\n        }\n    };\n    CheckBoxFilterBase.prototype.updateSearchIcon = function () {\n        if (this.sInput.value.length) {\n            classList(this.sIcon, ['e-chkcancel-icon'], ['e-search-icon']);\n            if (!isNullOrUndefined(document.body.querySelector('.e-chkcancel-icon'))) {\n                document.body.querySelector('.e-chkcancel-icon').setAttribute('title', this.localeObj.getConstant('Clear'));\n            }\n        }\n        else {\n            classList(this.sIcon, ['e-search-icon'], ['e-chkcancel-icon']);\n            if (!isNullOrUndefined(document.body.querySelector('.e-searchclear.e-search-icon'))) {\n                document.body.querySelector('.e-searchclear.e-search-icon').setAttribute('title', this.localeObj.getConstant('Search'));\n            }\n        }\n    };\n    /**\n     * Gets the localized label by locale keyword.\n     *\n     * @param {string} key - Defines localization key\n     * @returns {string} - returns localization label\n     */\n    CheckBoxFilterBase.prototype.getLocalizedLabel = function (key) {\n        return this.localeObj.getConstant(key);\n    };\n    CheckBoxFilterBase.prototype.updateDataSource = function () {\n        var dataSource = this.options.dataSource;\n        var str = 'object';\n        if (!(dataSource instanceof DataManager)) {\n            for (var i = 0; i < dataSource.length; i++) {\n                // eslint-disable-next-line valid-typeof\n                if (typeof dataSource !== str) {\n                    var obj = {};\n                    obj[this.options.field] = dataSource[parseInt(i.toString(), 10)];\n                    dataSource[parseInt(i.toString(), 10)] = obj;\n                }\n            }\n        }\n    };\n    CheckBoxFilterBase.prototype.updateModel = function (options) {\n        this.options = options;\n        this.existingPredicate = options.actualPredicate || {};\n        this.options.dataSource = options.dataSource;\n        this.options.dataManager = options.dataManager ? options.dataManager : options.dataSource;\n        this.updateDataSource();\n        this.options.type = options.type;\n        this.options.format = options.format || '';\n        this.options.ignoreAccent = options.ignoreAccent || false;\n        this.options.filteredColumns = options.filteredColumns || this.parent.filterSettings.columns;\n        this.options.query = options.query || new Query();\n        this.options.allowCaseSensitive = options.allowCaseSensitive || false;\n        this.options.uid = options.column.uid;\n        this.options.disableHtmlEncode = options.column.disableHtmlEncode || false;\n        this.values = {};\n        this.localeObj = options.localeObj;\n        this.isFiltered = options.filteredColumns.length;\n        this.infiniteRenderMod = this.parent.filterSettings && this.parent.filterSettings.enableInfiniteScrolling ? true : false;\n        this.infiniteUnloadParentExistPred = this.infiniteRenderMod && this.existingPredicate[this.options.column.field] ? this.existingPredicate[this.options.column.field].slice() : [];\n    };\n    CheckBoxFilterBase.prototype.getAndSetChkElem = function (options) {\n        this.dlg = this.parent.createElement('div', {\n            id: this.id + this.options.type + '_excelDlg',\n            attrs: { uid: this.options.column.uid },\n            className: 'e-checkboxfilter e-filter-popup'\n        });\n        this.sBox = this.parent.createElement('div', { className: 'e-searchcontainer' });\n        if (!options.hideSearchbox) {\n            this.sInput = this.parent.createElement('input', {\n                id: this.id + '_SearchBox',\n                className: 'e-searchinput'\n            });\n            this.sIcon = this.parent.createElement('span', {\n                className: 'e-searchclear e-search-icon e-icons e-input-group-icon', attrs: {\n                    type: 'text', title: this.getLocalizedLabel('Search')\n                }\n            });\n            this.searchBox = this.parent.createElement('span', { className: 'e-searchbox e-fields' });\n            this.searchBox.appendChild(this.sInput);\n            this.sBox.appendChild(this.searchBox);\n            var inputargs = {\n                element: this.sInput, floatLabelType: 'Never', properties: {\n                    placeholder: this.getLocalizedLabel('Search'),\n                    cssClass: this.parent.cssClass\n                }\n            };\n            Input.createInput(inputargs, this.parent.createElement);\n            this.searchBox.querySelector('.e-input-group').appendChild(this.sIcon);\n        }\n        this.spinner = this.parent.createElement('div', { className: 'e-spinner' }); //for spinner\n        this.cBox = this.parent.createElement('div', {\n            id: this.id + this.options.type + '_CheckBoxList',\n            className: 'e-checkboxlist e-fields'\n        });\n        this.spinner.appendChild(this.cBox);\n        this.sBox.appendChild(this.spinner);\n        return this.sBox;\n    };\n    CheckBoxFilterBase.prototype.showDialog = function (options) {\n        var args = {\n            requestType: events.filterBeforeOpen,\n            columnName: this.options.field, columnType: this.options.type, cancel: false\n        };\n        var filterModel = 'filterModel';\n        args[\"\" + filterModel] = this;\n        this.parent.notify(events.cBoxFltrBegin, args);\n        if (args.cancel) {\n            options.cancel = args.cancel;\n            return;\n        }\n        this.dialogObj = new Dialog({\n            visible: false, content: this.sBox,\n            close: this.closeDialog.bind(this),\n            enableRtl: this.parent.enableRtl,\n            width: (!isNullOrUndefined(parentsUntil(options.target, 'e-bigger')))\n                || this.parent.element.classList.contains('e-device') ? 260 : 255,\n            target: this.parent.element, animationSettings: { effect: 'None' },\n            buttons: [{\n                    click: this.btnClick.bind(this),\n                    buttonModel: {\n                        content: this.getLocalizedLabel(this.isExcel ? 'OKButton' : 'FilterButton'),\n                        cssClass: this.parent.cssClass ? 'e-primary' + ' ' + this.parent.cssClass : 'e-primary',\n                        isPrimary: true\n                    }\n                },\n                {\n                    click: this.btnClick.bind(this),\n                    buttonModel: { cssClass: this.parent.cssClass ? 'e-flat' + ' ' + this.parent.cssClass : 'e-flat',\n                        content: this.getLocalizedLabel(this.isExcel ? 'CancelButton' : 'ClearButton') }\n                }],\n            created: this.dialogCreated.bind(this),\n            open: this.dialogOpen.bind(this),\n            cssClass: this.parent.cssClass ? this.parent.cssClass : ''\n        });\n        var isStringTemplate = 'isStringTemplate';\n        this.dialogObj[\"\" + isStringTemplate] = true;\n        this.renderResponsiveFilter(options);\n        var dialogLabel = this.parent.filterSettings && this.parent.filterSettings.type === 'CheckBox' ?\n            this.getLocalizedLabel('CheckBoxFilterDialogARIA') : this.getLocalizedLabel('ExcelFilterDialogARIA');\n        this.dlg.setAttribute('aria-label', dialogLabel);\n        if (options.isResponsiveFilter) {\n            var responsiveCnt = document.querySelector('.e-responsive-dialog > .e-dlg-content > .e-mainfilterdiv');\n            responsiveCnt.appendChild(this.dlg);\n        }\n        else {\n            this.parent.element.appendChild(this.dlg);\n        }\n        this.dialogObj.appendTo(this.dlg);\n        this.dialogObj.element.style.maxHeight = options.isResponsiveFilter ? 'none' : this.options.height + 'px';\n        this.dialogObj.show();\n        var content = this.dialogObj.element.querySelector('.e-dlg-content');\n        content.appendChild(this.sBox);\n        this.wireEvents();\n        if (!isNullOrUndefined(this.parent.loadingIndicator) && this.parent.loadingIndicator.indicatorType === 'Shimmer'\n            && !this.infiniteRenderMod) {\n            this.parent.showMaskRow(undefined, this.dialogObj.element);\n        }\n        else if (this.infiniteRenderMod && this.parent.filterSettings && this.parent.filterSettings.loadingIndicator === 'Shimmer') {\n            this.showMask();\n        }\n        else {\n            if (this.infiniteRenderMod) {\n                this.cBox.style.marginTop = this.getListHeight(this.cBox) + 'px';\n            }\n            createSpinner({ target: this.spinner, cssClass: this.parent.cssClass ? this.parent.cssClass : null }, this.parent.createElement);\n            showSpinner(this.spinner);\n        }\n        this.getAllData();\n    };\n    CheckBoxFilterBase.prototype.renderResponsiveFilter = function (options) {\n        if (options.isResponsiveFilter) {\n            this.dialogObj.buttons = [{}];\n            this.dialogObj.position = { X: '', Y: '' };\n            this.dialogObj.target = document.querySelector('.e-resfilter > .e-dlg-content > .e-mainfilterdiv');\n            this.dialogObj.width = '100%';\n        }\n    };\n    CheckBoxFilterBase.prototype.dialogCreated = function (e) {\n        if (this.options.isResponsiveFilter) {\n            this.dialogObj.element.style.left = '0px';\n        }\n        else {\n            if (!Browser.isDevice) {\n                getFilterMenuPostion(this.options.target, this.dialogObj);\n            }\n            else {\n                this.dialogObj.position = { X: 'center', Y: 'center' };\n            }\n        }\n        if (this.options.column.showColumnMenu) {\n            this.parent.notify(events.filterDialogCreated, e);\n        }\n    };\n    CheckBoxFilterBase.prototype.openDialog = function (options) {\n        this.updateModel(options);\n        this.getAndSetChkElem(options);\n        this.showDialog(options);\n    };\n    CheckBoxFilterBase.prototype.closeDialog = function () {\n        if (this.infiniteRenderMod && this.infinitePermenantLocalData.length && !this.options.isRemote) {\n            this.options.dataSource.dataSource.json = this.infinitePermenantLocalData;\n        }\n        if (this.dialogObj && !this.dialogObj.isDestroyed) {\n            this.isBlanks = false;\n            var filterTemplateCol = this.options.columns.filter(function (col) { return col.getFilterItemTemplate(); });\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var registeredTemplate = this.parent.registeredTemplate;\n            if (filterTemplateCol.length && !isNullOrUndefined(registeredTemplate) && registeredTemplate.filterItemTemplate) {\n                this.parent.destroyTemplate(['filterItemTemplate']);\n            }\n            if ((this.parent.isReact || this.parent.isVue) && this.parent.destroyTemplate !== undefined) {\n                clearReactVueTemplates(this.parent, ['filterItemTemplate']);\n            }\n            this.parent.notify(events.filterMenuClose, { field: this.options.field });\n            this.dialogObj.destroy();\n            this.unWireEvents();\n            remove(this.dlg);\n            this.dlg = null;\n            this.parent.notify(events.filterDialogClose, {});\n        }\n    };\n    /**\n     * @param {Column} col - Defines column details\n     * @returns {void}\n     * @hidden\n     */\n    CheckBoxFilterBase.prototype.clearFilter = function (col) {\n        // eslint-disable-next-line max-len\n        var args = { instance: this, handler: this.clearFilter, cancel: false };\n        this.parent.notify(events.fltrPrevent, args);\n        if (args.cancel) {\n            return;\n        }\n        this.options.handler({ action: 'clear-filter', field: col ? col.field : this.options.field });\n    };\n    CheckBoxFilterBase.prototype.btnClick = function (e) {\n        if (this.filterState) {\n            if ((e.target.tagName.toLowerCase() === 'input' && e.target.classList.contains('e-searchinput')) ||\n                e.keyCode === 13) {\n                if (!this.isCheckboxFilterTemplate) {\n                    this.fltrBtnHandler();\n                }\n            }\n            else {\n                var text = e.target.firstChild.textContent.toLowerCase();\n                if (this.getLocalizedLabel(this.isExcel ? 'OKButton' : 'FilterButton').toLowerCase() === text) {\n                    if (!this.isCheckboxFilterTemplate) {\n                        this.fltrBtnHandler();\n                    }\n                }\n                else if (this.getLocalizedLabel('ClearButton').toLowerCase() === text) {\n                    this.clearFilter();\n                }\n            }\n            this.closeDialog();\n        }\n        else if (!(e.target.tagName.toLowerCase() === 'input')) {\n            this.clearFilter();\n            this.closeDialog();\n        }\n        if (this.options.column.showColumnMenu) {\n            this.parent.notify(events.afterFilterColumnMenuClose, {});\n        }\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    CheckBoxFilterBase.prototype.fltrBtnHandler = function () {\n        var _this = this;\n        if (this.infiniteRenderMod) {\n            this.cBox.innerHTML = '';\n            appendChildren(this.cBox, this.infiniteLoadedElem.slice());\n        }\n        var checked = [].slice.call(this.cBox.querySelectorAll('.e-check:not(.e-selectall):not(.e-add-current)'));\n        var check = checked;\n        var optr = 'equal';\n        var ddlValue = this.dialogObj.element.querySelector('.e-dropdownlist');\n        if (ddlValue) {\n            this.options.operator = optr = ddlValue.ej2_instances[0].value;\n        }\n        this.isMenuNotEqual = this.options.operator === 'notequal';\n        var searchInput;\n        if (!this.options.hideSearchbox) {\n            searchInput = this.searchBox.querySelector('.e-searchinput');\n        }\n        var caseSen = this.options.allowCaseSensitive;\n        var defaults = {\n            field: this.options.field, predicate: this.isMenuNotEqual ? 'and' : 'or', uid: this.options.uid,\n            operator: optr, type: this.options.type, matchCase: caseSen, ignoreAccent: this.options.ignoreAccent\n        };\n        var isNotEqual = this.itemsCnt !== checked.length && this.itemsCnt - checked.length < checked.length;\n        if (isNotEqual && searchInput && searchInput.value === '') {\n            optr = this.isMenuNotEqual ? 'equal' : 'notequal';\n            checked = [].slice.call(this.cBox.querySelectorAll('.e-uncheck:not(.e-selectall)'));\n            defaults.predicate = this.isMenuNotEqual ? 'or' : 'and';\n            defaults.operator = optr;\n        }\n        var value;\n        var val;\n        var length;\n        var fObj;\n        var coll = [];\n        if ((checked.length !== this.itemsCnt || (searchInput && searchInput.value && searchInput.value !== ''))\n            || this.infiniteRenderMod) {\n            if (!this.infiniteRenderMod) {\n                for (var i = 0; i < checked.length; i++) {\n                    value = this.values[parentsUntil(checked[parseInt(i.toString(), 10)], 'e-ftrchk').getAttribute('uid')];\n                    fObj = extend({}, { value: value }, defaults);\n                    if (value && !value.toString().length) {\n                        fObj.operator = isNotEqual ? 'notequal' : 'equal';\n                    }\n                    if (value === '' || isNullOrUndefined(value)) {\n                        coll = coll.concat(CheckBoxFilterBase.generateNullValuePredicates(defaults));\n                    }\n                    else {\n                        coll.push(fObj);\n                    }\n                    this.notifyFilterPrevEvent(fObj);\n                }\n            }\n            else if (this.infiniteRenderMod) {\n                this.infiniteFltrBtnHandler(coll);\n            }\n            if ((this.options.type === 'date' || this.options.type === 'datetime') && check.length) {\n                length = check.length - 1;\n                val = this.values[parentsUntil(check[parseInt(length.toString(), 10)], 'e-ftrchk').getAttribute('uid')];\n                if (isNullOrUndefined(val) && isNotEqual) {\n                    coll.push({\n                        field: defaults.field, matchCase: defaults.matchCase, operator: 'equal',\n                        predicate: 'and', value: null\n                    });\n                }\n            }\n            var addCurrSelection = this.infiniteRenderMod ? this.sBox.querySelector('.e-add-current') :\n                this.cBox.querySelector('.e-add-current');\n            if (addCurrSelection && addCurrSelection.classList.contains('e-check')) {\n                var existingPredicate_1 = this.existingPredicate[this.options.field];\n                if (existingPredicate_1) {\n                    var _loop_1 = function (j) {\n                        if (!coll.some(function (data) {\n                            return data\n                                .value === existingPredicate_1[parseInt(j.toString(), 10)].value;\n                        })) {\n                            coll.push(existingPredicate_1[parseInt(j.toString(), 10)]);\n                        }\n                    };\n                    for (var j = 0; j < existingPredicate_1.length; j++) {\n                        _loop_1(j);\n                    }\n                }\n                else {\n                    return;\n                }\n            }\n            if (!this.infiniteRenderMod) {\n                this.initiateFilter(coll);\n            }\n            else if (coll.length) {\n                this.initiateFilter(coll);\n            }\n            else if (this.sBox.querySelector('.e-selectall').classList.contains('e-check') && !coll.length) {\n                var isClearFilter = this.options.filteredColumns.some(function (value) {\n                    return _this.options.field === value.field;\n                });\n                if (isClearFilter) {\n                    this.clearFilter();\n                }\n            }\n        }\n        else {\n            var isClearFilter = this.options.filteredColumns.some(function (value) {\n                return _this.options.field === value.field;\n            });\n            if (isClearFilter) {\n                this.clearFilter();\n            }\n        }\n    };\n    CheckBoxFilterBase.prototype.infiniteFltrBtnHandler = function (coll) {\n        var value;\n        if (this.infiniteManualSelectMaintainPred.length) {\n            for (var i = 0; i < this.infiniteManualSelectMaintainPred.length; i++) {\n                var pred = this.infiniteManualSelectMaintainPred[i];\n                value = pred.value + '';\n                if (value === '' || isNullOrUndefined(value)) {\n                    var dummyDefaults = { predicate: pred.predicate, field: pred.field, type: pred.type, uid: pred.uid, operator: pred.operator,\n                        matchCase: pred.matchCase, ignoreAccent: pred.ignoreAccent };\n                    coll.push.apply(coll, CheckBoxFilterBase.generateNullValuePredicates(dummyDefaults));\n                }\n                else {\n                    coll.push(this.infiniteManualSelectMaintainPred[i]);\n                }\n                this.notifyFilterPrevEvent(this.infiniteManualSelectMaintainPred[i]);\n            }\n        }\n        if (!this.localInfiniteSelectAllClicked && this.sInput.value === '' && !(!this.options.parentCurrentViewDataCount && coll.length)) {\n            for (var i = 0; i < this.infiniteUnloadParentExistPred.length; i++) {\n                coll.unshift(this.infiniteUnloadParentExistPred[i]);\n                this.notifyFilterPrevEvent(this.existingPredicate[this.options.field][i]);\n            }\n        }\n        if (this.sInput.value !== '' && (!this.localInfiniteSelectAllClicked || this.infiniteLocalSelectAll)) {\n            this.infiniteSearchPred['predicate'] = 'or';\n            coll.unshift(this.infiniteSearchPred);\n            this.notifyFilterPrevEvent(this.infiniteSearchPred);\n        }\n    };\n    CheckBoxFilterBase.prototype.notifyFilterPrevEvent = function (predicate) {\n        var args = {\n            instance: this, handler: this.fltrBtnHandler, arg1: predicate.field, arg2: predicate.predicate, arg3: predicate.operator,\n            arg4: predicate.matchCase, arg5: predicate.ignoreAccent, arg6: predicate.value, cancel: false\n        };\n        this.parent.notify(events.fltrPrevent, args);\n        if (args.cancel) {\n            return;\n        }\n    };\n    // eslint-disable-next-line\n    /** @hidden */\n    CheckBoxFilterBase.generateNullValuePredicates = function (defaults) {\n        var coll = [];\n        if (defaults.type === 'string') {\n            coll.push({\n                field: defaults.field, ignoreAccent: defaults.ignoreAccent, matchCase: defaults.matchCase,\n                operator: defaults.operator, predicate: defaults.predicate, value: ''\n            });\n        }\n        coll.push({\n            field: defaults.field,\n            matchCase: defaults.matchCase, operator: defaults.operator, predicate: defaults.predicate, value: null\n        });\n        coll.push({\n            field: defaults.field, matchCase: defaults.matchCase, operator: defaults.operator,\n            predicate: defaults.predicate, value: undefined\n        });\n        return coll;\n    };\n    // eslint-disable-next-line\n    /** @hidden */\n    CheckBoxFilterBase.prototype.initiateFilter = function (fColl) {\n        var firstVal = fColl[0];\n        var predicate;\n        if (!isNullOrUndefined(firstVal)) {\n            predicate = firstVal.ejpredicate ? firstVal.ejpredicate :\n                new Predicate(firstVal.field, firstVal.operator, firstVal.value, !firstVal.matchCase, firstVal.ignoreAccent);\n            for (var j = 1; j < fColl.length; j++) {\n                predicate = fColl[parseInt(j.toString(), 10)].ejpredicate !== undefined ?\n                    predicate[fColl[parseInt(j.toString(), 10)].predicate](fColl[parseInt(j.toString(), 10)].ejpredicate) :\n                    predicate[fColl[parseInt(j.toString(), 10)].predicate](fColl[parseInt(j.toString(), 10)].field, fColl[parseInt(j.toString(), 10)].operator, fColl[parseInt(j.toString(), 10)].value, !fColl[parseInt(j.toString(), 10)].matchCase, fColl[parseInt(j.toString(), 10)].ignoreAccent);\n            }\n            var args = {\n                action: 'filtering', filterCollection: fColl, field: this.options.field,\n                ejpredicate: Predicate.or(predicate)\n            };\n            this.options.handler(args);\n        }\n    };\n    CheckBoxFilterBase.prototype.isForeignColumn = function (col) {\n        return col.isForeignColumn ? col.isForeignColumn() : false;\n    };\n    CheckBoxFilterBase.prototype.refreshCheckboxes = function () {\n        var _this = this;\n        var val = this.sInput.value;\n        var column = this.options.column;\n        var query = this.isForeignColumn(column) ? this.foreignKeyQuery.clone() : this.options.query.clone();\n        var foreignQuery = this.options.query.clone();\n        var pred = query.queries.filter(function (e) { return e && e.fn === 'onWhere'; })[0];\n        query.queries = [];\n        foreignQuery.queries = [];\n        var parsed = (this.options.type !== 'string' && parseFloat(val)) ? parseFloat(val) : val;\n        var operator = this.options.isRemote ?\n            (this.options.type === 'string' ? 'contains' : 'equal') : (this.options.type ? 'contains' : 'equal');\n        var matchCase = true;\n        var ignoreAccent = this.options.ignoreAccent;\n        var field = this.isForeignColumn(column) ? column.foreignKeyValue : column.field;\n        parsed = (parsed === '' || parsed === undefined) ? undefined : parsed;\n        var coll = [];\n        var defaults = {\n            field: field, predicate: 'or', uid: this.options.uid,\n            operator: 'equal', type: this.options.type, matchCase: matchCase, ignoreAccent: ignoreAccent\n        };\n        var predicte;\n        var moduleName = this.options.dataManager.adaptor.getModuleName;\n        if (this.options.type === 'boolean') {\n            if (parsed !== undefined &&\n                this.getLocalizedLabel('FilterTrue').toLowerCase().indexOf(parsed.toLowerCase()) !== -1) {\n                parsed = 'true';\n            }\n            else if (parsed !== undefined &&\n                this.getLocalizedLabel('FilterFalse').toLowerCase().indexOf(parsed.toLowerCase()) !== -1) {\n                parsed = 'false';\n            }\n            if (parsed !== undefined &&\n                this.getLocalizedLabel('FilterTrue').toLowerCase().indexOf(parsed.toLowerCase()) !== -1 && moduleName) {\n                // eslint-disable-next-line no-constant-condition\n                parsed = (moduleName() === 'ODataAdaptor' || 'ODataV4Adaptor') ? true : 'true';\n            }\n            else if (parsed !== undefined &&\n                this.getLocalizedLabel('FilterFalse').toLowerCase().indexOf(parsed.toLowerCase()) !== -1 && moduleName) {\n                // eslint-disable-next-line no-constant-condition\n                parsed = (moduleName() === 'ODataAdaptor' || 'ODataV4Adaptor') ? false : 'false';\n            }\n            operator = 'equal';\n        }\n        if ((this.options.type === 'date' || this.options.type === 'datetime' || this.options.type === 'dateonly') && this.options.format) {\n            var intl = new Internationalization();\n            var format = typeof (this.options.format) === 'string' ? this.options.format :\n                this.options.format.format;\n            if (format) {\n                parsed = intl.parseDate(val, { format: format }) || new Date(val);\n            }\n            else {\n                parsed = new Date(val);\n            }\n            if (this.options.type === 'dateonly') {\n                parsed = parsed.getFullYear() + '-' + padZero(parsed.getMonth() + 1) + '-' + padZero(parsed.getDate());\n            }\n        }\n        this.infiniteSearchValChange = true;\n        this.infiniteLoadedElem = [];\n        this.infiniteLocalSelectAll = true;\n        this.localInfiniteSelectAllClicked = false;\n        this.localInfiniteSelectionInteracted = false;\n        this.infiniteSkipCnt = 0;\n        this.infiniteDataCount = 0;\n        this.infiniteManualSelectMaintainPred = [];\n        if (this.sInput.value === '') {\n            this.infiniteUnloadParentExistPred = this.infiniteRenderMod && this.existingPredicate[this.options.column.field] ? this.existingPredicate[this.options.column.field].slice() : [];\n            this.options.parentTotalDataCount = this.options.parentTotalDataCount;\n        }\n        else {\n            this.infiniteUnloadParentExistPred = [];\n        }\n        this.addDistinct(query);\n        var args = {\n            requestType: events.filterSearchBegin,\n            filterModel: this, columnName: field, column: column,\n            operator: operator, matchCase: matchCase, ignoreAccent: ignoreAccent, filterChoiceCount: null,\n            query: query, value: parsed\n        };\n        if (this.infiniteRenderMod && this.parent.filterSettings.itemsCount) {\n            args.filterChoiceCount = this.parent.filterSettings.itemsCount;\n        }\n        this.parent.trigger(events.actionBegin, args, function (filterargs) {\n            // eslint-disable-next-line no-self-assign\n            filterargs.operator = filterargs.operator;\n            predicte = new Predicate(field, filterargs.operator, args.value, filterargs.matchCase, filterargs.ignoreAccent);\n            if (_this.options.type === 'date' || _this.options.type === 'datetime' || _this.options.type === 'dateonly') {\n                operator = 'equal';\n                var filterObj = {\n                    field: field, operator: operator, value: parsed, matchCase: matchCase,\n                    ignoreAccent: ignoreAccent\n                };\n                if (!isNullOrUndefined(parsed)) {\n                    predicte = getDatePredicate(filterObj, _this.options.type);\n                }\n            }\n            if (val && typeof val === 'string' && _this.isBlanks &&\n                _this.getLocalizedLabel('Blanks').toLowerCase().indexOf(val.toLowerCase()) >= 0) {\n                coll = coll.concat(CheckBoxFilterBase.generateNullValuePredicates(defaults));\n                var emptyValPredicte = CheckBoxFilterBase.generatePredicate(coll);\n                emptyValPredicte.predicates.push(predicte);\n                predicte = emptyValPredicte;\n                query.where(emptyValPredicte);\n            }\n            else if (val.length) {\n                predicte = !isNullOrUndefined(pred) ? predicte.and(pred.e) : predicte;\n                query.where(predicte);\n            }\n            else if (!isNullOrUndefined(pred)) {\n                predicte = pred.e;\n                query.where(pred.e);\n            }\n            _this.infiniteSearchPred = predicte;\n            filterargs.filterChoiceCount = !isNullOrUndefined(filterargs.filterChoiceCount) ? filterargs.filterChoiceCount : 1000;\n            if (_this.infiniteRenderMod && _this.parent.filterSettings.itemsCount !== filterargs.filterChoiceCount) {\n                _this.parent.filterSettings.itemsCount = args.filterChoiceCount;\n            }\n            var fPredicate = {};\n            showSpinner(_this.spinner);\n            _this.renderEmpty = false;\n            if (_this.isForeignColumn(column) && val.length) {\n                var colData = ('result' in column.dataSource) ? new DataManager(column.dataSource.result) :\n                    column.dataSource;\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                colData.executeQuery(query).then(function (e) {\n                    var columnData = _this.options.column.columnData;\n                    _this.options.column.columnData = e.result;\n                    _this.parent.notify(events.generateQuery, { predicate: fPredicate, column: column });\n                    if (fPredicate.predicate.predicates.length) {\n                        foreignQuery.where(fPredicate.predicate);\n                    }\n                    else {\n                        _this.renderEmpty = true;\n                    }\n                    _this.options.column.columnData = columnData;\n                    if (_this.infiniteRenderMod) {\n                        _this.infiniteInitialLoad = isNullOrUndefined(_this.fullData) ? true : false;\n                        _this.makeInfiniteScrollRequest(foreignQuery);\n                        foreignQuery.requiresCount();\n                    }\n                    else {\n                        foreignQuery.take(filterargs.filterChoiceCount);\n                    }\n                    _this.search(filterargs, foreignQuery);\n                });\n            }\n            else {\n                if (_this.infiniteRenderMod && _this.parent.filterSettings.itemsCount) {\n                    _this.infiniteInitialLoad = isNullOrUndefined(_this.fullData) ? true : false;\n                    _this.makeInfiniteScrollRequest(query);\n                    query.requiresCount();\n                }\n                else {\n                    query.take(filterargs.filterChoiceCount);\n                }\n                _this.search(filterargs, query);\n            }\n        });\n    };\n    CheckBoxFilterBase.prototype.search = function (args, query) {\n        if (this.parent.dataSource && 'result' in this.parent.dataSource) {\n            this.filterEvent(args, query);\n        }\n        else {\n            this.processSearch(query);\n        }\n    };\n    CheckBoxFilterBase.prototype.getPredicateFromCols = function (columns, isExecuteLocal) {\n        var predicates = CheckBoxFilterBase.getPredicate(columns, isExecuteLocal);\n        var predicateList = [];\n        var fPredicate = {};\n        var isGrid = this.parent.getForeignKeyColumns !== undefined;\n        var foreignColumn = isGrid ? this.parent.getForeignKeyColumns() : [];\n        for (var _i = 0, _a = Object.keys(predicates); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            var col = void 0;\n            if (isGrid && !this.parent.getColumnByField(prop)) {\n                col = getColumnByForeignKeyValue(prop, foreignColumn);\n            }\n            if (col) {\n                this.parent.notify(events.generateQuery, { predicate: fPredicate, column: col });\n                if (fPredicate.predicate.predicates.length) {\n                    predicateList.push(Predicate.or(fPredicate.predicate.predicates));\n                }\n            }\n            else {\n                predicateList.push(predicates[\"\" + prop]);\n            }\n        }\n        return predicateList.length && Predicate.and(predicateList);\n    };\n    CheckBoxFilterBase.prototype.getQuery = function () {\n        return this.parent.getQuery ? this.parent.getQuery().clone() : new Query();\n    };\n    CheckBoxFilterBase.prototype.getAllData = function () {\n        var _this = this;\n        this.customQuery = false;\n        var query = this.getQuery();\n        query.requiresCount(); //consider take query\n        this.addDistinct(query);\n        var args = {\n            requestType: events.filterChoiceRequest, query: query, filterChoiceCount: null\n        };\n        var filterModel = 'filterModel';\n        args[\"\" + filterModel] = this;\n        if (this.infiniteRenderMod && this.parent.filterSettings.itemsCount) {\n            args.filterChoiceCount = this.parent.filterSettings.itemsCount;\n        }\n        this.parent.trigger(events.actionBegin, args, function (args) {\n            args.filterChoiceCount = !isNullOrUndefined(args.filterChoiceCount) ? args.filterChoiceCount : 1000;\n            if (_this.infiniteRenderMod && _this.parent.filterSettings.itemsCount !== args.filterChoiceCount) {\n                _this.parent.filterSettings.itemsCount = args.filterChoiceCount;\n            }\n            if (!_this.infiniteRenderMod) {\n                query.take(args.filterChoiceCount);\n            }\n            if (!args.query.distincts.length || _this.infiniteRenderMod) {\n                _this.customQuery = true;\n                _this.queryGenerate(query);\n            }\n            if (_this.infiniteRenderMod) {\n                _this.infiniteInitialLoad = isNullOrUndefined(_this.fullData) ? true : false;\n                _this.makeInfiniteScrollRequest(query);\n            }\n            if (_this.parent.dataSource && 'result' in _this.parent.dataSource) {\n                _this.filterEvent(args, query);\n            }\n            else {\n                _this.processDataOperation(query, true);\n            }\n        });\n    };\n    CheckBoxFilterBase.prototype.addDistinct = function (query) {\n        var _this = this;\n        var _a;\n        var filteredColumn = DataUtil.distinct(this.options.filteredColumns, 'field');\n        if (filteredColumn.indexOf(this.options.column.field) <= -1) {\n            filteredColumn = filteredColumn.concat(this.options.column.field);\n        }\n        if (!this.infiniteRenderMod) {\n            query.distinct(filteredColumn);\n        }\n        if (this.infiniteRenderMod && !this.options.isRemote && this.sInput.value === '') {\n            this.options.dataSource = this.options.dataSource instanceof DataManager ?\n                this.options.dataSource : new DataManager(this.options.dataSource);\n            this.infinitePermenantLocalData = this.options.dataSource.dataSource.json.slice();\n            this.options.dataSource.dataSource.json = DataUtil.distinct((_a = this.options.parentFilteredLocalRecords).concat.apply(_a, this.infinitePermenantLocalData), this.options.column.field, true);\n            if (this.isForeignColumn(this.options.column)) {\n                this.options.column.dataSource = this.options.column.dataSource instanceof DataManager ?\n                    this.options.column.dataSource : new DataManager(this.options.column.dataSource);\n                this.options.dataSource.dataSource.json = this.options.dataSource.dataSource.json.map(function (item, i) {\n                    return Object.assign({}, item, _this.options.column.dataSource.dataSource.json[i]);\n                });\n            }\n        }\n        else if (this.infiniteRenderMod && this.options.isRemote) {\n            query.select(this.options.column.field);\n            query.sortBy(this.options.column.field, 'ascending');\n            var moduleName = this.options.dataManager.adaptor.getModuleName;\n            if (moduleName && moduleName() && (moduleName() === 'ODataV4Adaptor' || moduleName() === 'WebApiAdaptor'\n                || moduleName() === 'CustomDataAdaptor' || moduleName() === 'GraphQLAdaptor' || moduleName() === 'ODataAdaptor')) {\n                query.distinct(filteredColumn);\n            }\n        }\n        return query;\n    };\n    CheckBoxFilterBase.prototype.filterEvent = function (args, query) {\n        var _this = this;\n        var defObj = eventPromise(args, query);\n        this.parent.trigger(events.dataStateChange, defObj.state);\n        var def = defObj.deffered;\n        def.promise.then(function (e) {\n            _this.dataSuccess(e);\n        });\n    };\n    CheckBoxFilterBase.prototype.infiniteScrollMouseKeyDownHandler = function () {\n        EventHandler.remove(this.cBox, 'scroll', this.infiniteScrollHandler);\n    };\n    CheckBoxFilterBase.prototype.infiniteScrollMouseKeyUpHandler = function (e) {\n        var _this = this;\n        EventHandler.add(this.cBox, 'scroll', this.infiniteScrollHandler, this);\n        var target = this.cBox;\n        if (target.children.length > 1 && (target.scrollTop >= target.scrollHeight - target.offsetHeight || target.scrollTop <= 0)) {\n            this.infiniteScrollHandler();\n        }\n        Global.timer = setTimeout(function () { _this.clickHandler(e); Global.timer = null; }, 0);\n    };\n    CheckBoxFilterBase.prototype.getListHeight = function (element) {\n        var listDiv = createElement('div', { className: 'e-ftrchk', styles: 'visibility: hidden' });\n        listDiv.innerHTML = '<div class=\"e-checkbox-wrapper\"><span class=\"e-label e-checkboxfiltertext\">A</div></span>';\n        element.appendChild(listDiv);\n        var rect = listDiv.getBoundingClientRect();\n        element.removeChild(listDiv);\n        var listHeight = Math.round(rect.height);\n        return listHeight;\n    };\n    CheckBoxFilterBase.prototype.getShimmerTemplate = function () {\n        return '<span class=\"e-mask e-skeleton e-skeleton-text e-shimmer-wave\"></span>';\n    };\n    CheckBoxFilterBase.prototype.showMask = function () {\n        var maskRowCount = 5;\n        var maskItemHeight;\n        var maskList = this.parent.createElement('div', { id: this.id + this.options.type + '_CheckBoxMaskList',\n            className: 'e-checkboxlist e-fields e-infinite-list e-masklist', styles: 'z-index: 10;' });\n        var wrapperElem = this.cBox;\n        this.removeMask();\n        if (wrapperElem) {\n            var computedStyle = getComputedStyle(wrapperElem);\n            var height = wrapperElem.children.length ? parseInt(computedStyle.height) :\n                Math.floor(parseInt(computedStyle.height.split('px')[0])) - 5;\n            var backgroundColor = this.isExcel && !wrapperElem.children.length && !this.dlg.classList.contains('e-excelfilter') ?\n                '' : getComputedStyle(this.dlg.querySelector('.e-dlg-content')).backgroundColor;\n            maskList.style.cssText = 'width: ' + computedStyle.width + '; min-height: ' + computedStyle.minHeight + '; height: ' +\n                height + 'px; margin: ' + computedStyle.margin + '; border-style: ' + computedStyle.borderStyle + '; border-width: '\n                + computedStyle.borderWidth + '; border-color: ' + computedStyle.borderColor + '; position: absolute; background-color: ' +\n                backgroundColor + ';';\n            var liHeight = this.getListHeight(wrapperElem);\n            maskRowCount = Math.floor(height / liHeight);\n            maskRowCount = wrapperElem.children.length > maskRowCount ? wrapperElem.children.length : maskRowCount;\n            maskItemHeight = liHeight + 'px';\n        }\n        var maskTemplate = '<div class=\"e-ftrchk e-mask-ftrchk\" style=\"width: 100%; height:' + maskItemHeight + ';\">'\n            + '<div class=\"e-checkbox-wrapper\" style=\"width: 100%;\"><input class=\"e-chk-hidden\">'\n            + this.getShimmerTemplate() + this.getShimmerTemplate() + '</div></div>';\n        maskList.innerHTML = '';\n        if (!wrapperElem.children.length) {\n            this.spinner.insertAdjacentHTML('beforebegin', maskTemplate);\n            var maskSpan = [].slice.call(this.spinner.parentElement\n                .querySelectorAll('.e-mask:not(.e-mask-checkbox-filter-intent):not(.e-mask-checkbox-filter-span-intent)'));\n            maskSpan[0].classList.add('e-mask-checkbox-filter-intent');\n            maskSpan[1].classList.add('e-mask-checkbox-filter-span-intent');\n        }\n        this.spinner.insertBefore(maskList, this.cBox);\n        for (var i = 0; maskRowCount && i < maskRowCount; i++) {\n            maskList.innerHTML += maskTemplate;\n            var maskSpan = [].slice.call(maskList\n                .querySelectorAll('.e-mask:not(.e-mask-checkbox-filter-intent):not(.e-mask-checkbox-filter-span-intent)'));\n            maskSpan[0].classList.add('e-mask-checkbox-filter-intent');\n            maskSpan[1].classList.add('e-mask-checkbox-filter-span-intent');\n        }\n        if (this.cBox) {\n            maskList.scrollTop = this.cBox.scrollTop;\n        }\n    };\n    CheckBoxFilterBase.prototype.removeMask = function () {\n        var maskLists = this.dialogObj.element.querySelectorAll('.e-mask-ftrchk');\n        if (maskLists.length) {\n            for (var i = 0; i < maskLists.length; i++) {\n                remove(maskLists[i]);\n            }\n        }\n        var maskParent = this.dialogObj.element.querySelector('.e-checkboxlist.e-masklist');\n        if (maskParent) {\n            remove(this.dialogObj.element.querySelector('.e-checkboxlist.e-masklist'));\n        }\n    };\n    CheckBoxFilterBase.prototype.infiniteScrollHandler = function () {\n        var target = this.cBox;\n        if (target.scrollTop >= target.scrollHeight - target.offsetHeight && !this.infiniteQueryExecutionPending\n            && this.infiniteLoadedElem.length <= (this.infiniteSkipCnt + this.parent.filterSettings.itemsCount)\n            && this.cBox.children.length === this.parent.filterSettings.itemsCount * 3\n            && (!this.infiniteDataCount || this.infiniteDataCount > (this.infiniteSkipCnt + this.parent.filterSettings.itemsCount))) {\n            this.makeInfiniteScrollRequest();\n            this.prevInfiniteScrollDirection = 'down';\n        }\n        else if (target.scrollTop >= target.scrollHeight - target.offsetHeight && !this.infiniteQueryExecutionPending\n            && this.infiniteLoadedElem.length > (this.infiniteSkipCnt + this.parent.filterSettings.itemsCount)\n            && this.cBox.children.length === this.parent.filterSettings.itemsCount * 3) {\n            this.infiniteRemoveElements(([].slice.call(this.cBox.children)).splice(0, this.parent.filterSettings.itemsCount));\n            this.infiniteSkipCnt += this.prevInfiniteScrollDirection === 'down' ? this.parent.filterSettings.itemsCount :\n                (this.parent.filterSettings.itemsCount * 3);\n            appendChildren(this.cBox, this.infiniteLoadedElem.slice(this.infiniteSkipCnt, this.parent.filterSettings.itemsCount + this.infiniteSkipCnt));\n            this.prevInfiniteScrollDirection = 'down';\n        }\n        else if (target.scrollTop === 0 && !this.infiniteInitialLoad && !this.infiniteSearchValChange && this.infiniteSkipCnt\n            && this.infiniteLoadedElem.length && this.infiniteLoadedElem.length > this.parent.filterSettings.itemsCount * 3\n            && this.cBox.children.length === this.parent.filterSettings.itemsCount * 3) {\n            this.infiniteRemoveElements(([].slice.call(this.cBox.children)).splice((this.parent.filterSettings.itemsCount * 2), this.parent.filterSettings.itemsCount));\n            this.infiniteSkipCnt -= this.prevInfiniteScrollDirection === 'up' ? this.parent.filterSettings.itemsCount :\n                (this.parent.filterSettings.itemsCount * 3);\n            this.infiniteAppendElements([].slice.call(this.infiniteLoadedElem.slice(this.infiniteSkipCnt, this.infiniteSkipCnt + this.parent.filterSettings.itemsCount)));\n            this.cBox.scrollTop = this.infiniteScrollAppendDiff;\n            this.prevInfiniteScrollDirection = 'up';\n        }\n        else if (target.scrollTop === 0 && !this.infiniteInitialLoad && !this.infiniteSearchValChange && this.infiniteSkipCnt\n            && this.infiniteLoadedElem.length && this.cBox.children.length < this.parent.filterSettings.itemsCount * 3) {\n            this.infiniteRemoveElements(([].slice.call(this.cBox.children)).splice((this.parent.filterSettings.itemsCount * 2), this.infiniteDataCount % this.parent.filterSettings.itemsCount));\n            this.infiniteSkipCnt = (Math.floor(this.infiniteDataCount / this.parent.filterSettings.itemsCount) - 3) *\n                this.parent.filterSettings.itemsCount;\n            this.infiniteAppendElements([].slice.call(this.infiniteLoadedElem.slice(this.infiniteSkipCnt, this.infiniteSkipCnt + this.parent.filterSettings.itemsCount)));\n            this.cBox.scrollTop = this.infiniteScrollAppendDiff;\n            this.prevInfiniteScrollDirection = 'up';\n        }\n    };\n    CheckBoxFilterBase.prototype.infiniteRemoveElements = function (removeElem) {\n        for (var i = 0; i < removeElem.length; i++) {\n            remove(removeElem[i]);\n        }\n    };\n    CheckBoxFilterBase.prototype.infiniteAppendElements = function (appendElem) {\n        for (var i = 0; i < appendElem.length; i++) {\n            this.cBox.insertBefore(appendElem[i], this.cBox.children[i]);\n        }\n    };\n    CheckBoxFilterBase.prototype.makeInfiniteScrollRequest = function (query) {\n        var _this = this;\n        if (!this.infiniteInitialLoad && this.parent.filterSettings && this.parent.filterSettings.loadingIndicator === 'Shimmer') {\n            setTimeout(function () {\n                if (_this.infiniteQueryExecutionPending) {\n                    _this.showMask();\n                }\n            }, 500);\n        }\n        else if (!this.infiniteInitialLoad) {\n            createSpinner({ target: this.spinner, cssClass: this.parent.cssClass ? this.parent.cssClass : null }, this.parent.createElement);\n            showSpinner(this.spinner);\n        }\n        var fName = 'fn';\n        if (this.infiniteQuery && this.infiniteQuery.queries && this.infiniteQuery.queries.length) {\n            for (var i = 0; i < this.infiniteQuery.queries.length; i++) {\n                if (this.infiniteQuery.queries[i][\"\" + fName] === 'onTake'\n                    || this.infiniteQuery.queries[i][\"\" + fName] === 'onSkip') {\n                    this.infiniteQuery.queries.splice(i, 1);\n                    i--;\n                }\n            }\n        }\n        var existQuery = query ? true : false;\n        query = query ? query : this.infiniteQuery;\n        if (this.infiniteInitialLoad || this.infiniteSearchValChange) {\n            this.infiniteSkipCnt = 0;\n        }\n        else {\n            this.infiniteSkipCnt += this.parent.filterSettings.itemsCount;\n        }\n        query.skip(this.infiniteSkipCnt);\n        if (this.infiniteInitialLoad || this.infiniteSearchValChange) {\n            query.take(this.parent.filterSettings.itemsCount * 3);\n            this.infiniteSkipCnt += this.parent.filterSettings.itemsCount * 2;\n        }\n        else {\n            query.take(this.parent.filterSettings.itemsCount);\n        }\n        if (!existQuery) {\n            this.processDataOperation(query);\n            this.infiniteQueryExecutionPending = true;\n        }\n    };\n    CheckBoxFilterBase.prototype.processDataOperation = function (query, isInitial) {\n        var _this = this;\n        this.options.dataSource = this.options.dataSource instanceof DataManager ?\n            this.options.dataSource : new DataManager(this.options.dataSource);\n        var allPromise = [];\n        var runArray = [];\n        if (this.isForeignColumn(this.options.column) && isInitial) {\n            var colData = ('result' in this.options.column.dataSource) ?\n                new DataManager(this.options.column.dataSource.result) :\n                this.options.column.dataSource;\n            this.foreignKeyQuery.params = query.params;\n            allPromise.push(colData.executeQuery(this.foreignKeyQuery));\n            runArray.push(function (data) { return _this.foreignKeyData = data; });\n        }\n        if (this.infiniteRenderMod) {\n            this.infiniteQuery = query.clone();\n            if (this.infiniteInitialLoad) {\n                this.cBox.classList.add('e-checkbox-infinitescroll');\n                EventHandler.add(this.cBox, 'scroll', this.infiniteScrollHandler, this);\n                EventHandler.add(this.cBox, 'mouseup', this.infiniteScrollMouseKeyUpHandler, this);\n                EventHandler.add(this.cBox, 'mousedown', this.infiniteScrollMouseKeyDownHandler, this);\n            }\n            else if (this.infiniteSearchValChange) {\n                this.cBox.innerHTML = '';\n            }\n        }\n        if (this.infiniteRenderMod && this.infiniteInitialLoad && !this.options.isRemote) {\n            var field = this.isForeignColumn(this.options.column) ? this.options.foreignKeyValue :\n                this.options.column.field;\n            this.options.dataSource.executeQuery(new Query().sortBy(field, DataUtil.fnAscending)).then(function (e) {\n                _this.options.dataSource.dataSource.json = e.result;\n                _this.executeQueryOperations(query, allPromise, runArray);\n            });\n        }\n        else {\n            this.executeQueryOperations(query, allPromise, runArray);\n        }\n    };\n    CheckBoxFilterBase.prototype.executeQueryOperations = function (query, allPromise, runArray) {\n        var _this = this;\n        allPromise.push(this.options.dataSource.executeQuery(query));\n        runArray.push(this.dataSuccess.bind(this));\n        var i = 0;\n        Promise.all(allPromise).then(function (e) {\n            _this.infiniteQueryExecutionPending = _this.infiniteRenderMod ? false : _this.infiniteQueryExecutionPending;\n            for (var j = 0; j < e.length; j++) {\n                _this.infiniteDataCount = _this.infiniteRenderMod && !_this.infiniteDataCount ? e[j].count : _this.infiniteDataCount;\n                runArray[i++](e[parseInt(j.toString(), 10)].result);\n            }\n        }).catch(function () {\n            if (_this.infiniteRenderMod && _this.parent.filterSettings && _this.parent.filterSettings.loadingIndicator === 'Shimmer') {\n                _this.parent.showMaskRow(undefined, _this.dialogObj.element);\n            }\n        });\n    };\n    CheckBoxFilterBase.prototype.dataSuccess = function (e) {\n        if (!this.infiniteInitialLoad && this.infiniteDataCount && ((this.infiniteSkipCnt >= this.infiniteDataCount\n            && !this.infiniteSearchValChange) || (e.length === 0))) {\n            return;\n        }\n        this.fullData = e;\n        var args1 = { dataSource: this.fullData, executeQuery: true, field: this.options.field };\n        this.parent.notify(events.beforeCheckboxRenderer, args1);\n        if (args1.executeQuery) {\n            var query = new Query();\n            if (!this.customQuery) {\n                this.isExecuteLocal = true;\n                this.queryGenerate(query);\n                this.isExecuteLocal = false;\n            }\n            // query.select(this.options.field);\n            var result = new DataManager(args1.dataSource).executeLocal(query);\n            var col = this.options.column;\n            this.filteredData = CheckBoxFilterBase.getDistinct(result, this.options.field, col, this.foreignKeyData, this).records || [];\n        }\n        var data = args1.executeQuery ? this.filteredData : args1.dataSource;\n        this.processDataSource(null, true, data, args1);\n        if (this.sInput && ((this.infiniteRenderMod && this.infiniteInitialLoad) || !this.infiniteRenderMod)) {\n            this.sInput.focus();\n        }\n        if (this.infiniteInitialLoad || this.infiniteSearchValChange) {\n            this.infiniteInitialLoad = false;\n            this.infiniteSearchValChange = false;\n        }\n        var args = {\n            requestType: events.filterAfterOpen,\n            columnName: this.options.field, columnType: this.options.type\n        };\n        var filterModel = 'filterModel';\n        args[\"\" + filterModel] = this;\n        this.parent.notify(events.cBoxFltrComplete, args);\n        if (this.isCheckboxFilterTemplate) {\n            hideSpinner(this.spinner);\n        }\n    };\n    CheckBoxFilterBase.prototype.queryGenerate = function (query) {\n        if (this.parent.searchSettings && this.parent.searchSettings.key.length) {\n            var sSettings = this.parent.searchSettings;\n            var fields = sSettings.fields.length ? sSettings.fields : this.options.columns.map(function (f) { return f.field; });\n            query.search(sSettings.key, fields, sSettings.operator, sSettings.ignoreCase, sSettings.ignoreAccent);\n        }\n        if ((this.options.filteredColumns.length)) {\n            var cols = [];\n            for (var i = 0; i < this.options.filteredColumns.length; i++) {\n                var filterColumn = this.options.filteredColumns[parseInt(i.toString(), 10)];\n                if (this.options.uid) {\n                    filterColumn.uid = filterColumn.uid || this.parent.getColumnByField(filterColumn.field).uid;\n                    if (filterColumn.uid !== this.options.uid) {\n                        cols.push(this.options.filteredColumns[parseInt(i.toString(), 10)]);\n                    }\n                }\n                else {\n                    if (filterColumn.field !== this.options.field) {\n                        cols.push(this.options.filteredColumns[parseInt(i.toString(), 10)]);\n                    }\n                }\n            }\n            var predicate = this.getPredicateFromCols(cols, this.isExecuteLocal);\n            if (predicate) {\n                query.where(predicate);\n            }\n        }\n    };\n    CheckBoxFilterBase.prototype.processDataSource = function (query, isInitial, dataSource, args) {\n        showSpinner(this.spinner);\n        // query = query ? query : this.options.query.clone();\n        // query.requiresCount();\n        // let result: Object = new DataManager(dataSource as JSON[]).executeLocal(query);\n        // let res: { result: Object[] } = result as { result: Object[] };\n        this.isExecuteLocal = true;\n        this.updateResult();\n        this.isExecuteLocal = false;\n        var args1 = { dataSource: this.fullData, isCheckboxFilterTemplate: false, column: this.options.column,\n            element: this.cBox, type: this.options.type, format: this.options.type, btnObj: this.options.isResponsiveFilter ? null :\n                this.dialogObj.btnObj[0], searchBox: this.searchBox };\n        this.parent.notify(events.beforeCheckboxfilterRenderer, args1);\n        this.isCheckboxFilterTemplate = args1.isCheckboxFilterTemplate;\n        if (!this.isCheckboxFilterTemplate) {\n            this.createFilterItems(dataSource, isInitial, args);\n        }\n        else if (this.infiniteRenderMod && this.parent.filterSettings && this.parent.filterSettings.loadingIndicator === 'Shimmer') {\n            this.removeMask();\n        }\n    };\n    CheckBoxFilterBase.prototype.processSearch = function (query) {\n        this.processDataOperation(query);\n    };\n    CheckBoxFilterBase.prototype.updateResult = function () {\n        this.result = {};\n        var predicate = this.infiniteRenderMod && this.existingPredicate[this.options.field] ?\n            this.getPredicateFromCols(this.existingPredicate[this.options.field], this.isExecuteLocal) :\n            this.getPredicateFromCols(this.options.filteredColumns, this.isExecuteLocal);\n        var query = new Query();\n        if (predicate) {\n            query.where(predicate);\n        }\n        this.parent.notify(events.beforeCheckboxRendererQuery, { query: query });\n        var result = new DataManager(this.fullData).executeLocal(query);\n        for (var _i = 0, result_1 = result; _i < result_1.length; _i++) {\n            var res = result_1[_i];\n            this.result[getObject(this.options.field, res)] = true;\n        }\n    };\n    CheckBoxFilterBase.prototype.clickHandler = function (e) {\n        var _a;\n        if (!isNullOrUndefined(Global.timer)) {\n            clearTimeout(Global.timer);\n        }\n        var target = e.target;\n        if (!isNullOrUndefined(this.parent.loadingIndicator) && this.parent.loadingIndicator.indicatorType === 'Shimmer'\n            && parentsUntil(target, 'e-mask-ftrchk')) {\n            return;\n        }\n        var elem = parentsUntil(target, 'e-checkbox-wrapper');\n        if (parentsUntil(target, 'e-searchbox')) {\n            this.searchBoxClick(e);\n        }\n        if (elem && !this.isCheckboxFilterTemplate) {\n            var selectAll = elem.querySelector('.e-selectall');\n            if (selectAll) {\n                this.updateAllCBoxes(!selectAll.classList.contains('e-check'));\n            }\n            else {\n                toogleCheckbox(elem.parentElement);\n                if (this.infiniteRenderMod && !elem.parentElement.querySelector('.e-add-current')) {\n                    this.localInfiniteSelectionInteracted = true;\n                    var caseSen = this.options.allowCaseSensitive;\n                    var span = elem.parentElement.querySelector('.e-frame');\n                    var input = span.previousSibling;\n                    var optr = input.checked ? 'equal' : 'notequal';\n                    var pred = input.checked ? 'or' : 'and';\n                    var defaults = { field: this.options.field, predicate: pred, uid: this.options.uid,\n                        operator: optr, type: this.options.type, matchCase: caseSen, ignoreAccent: this.options.ignoreAccent\n                    };\n                    var value = this.values[parentsUntil(input, 'e-ftrchk').getAttribute('uid')];\n                    this.updateInfiniteManualSelectPred(defaults, value);\n                    if (this.infiniteRenderMod && !this.options.isRemote && this.options.parentTotalDataCount\n                        && this.infiniteUnloadParentExistPred.length) {\n                        var predicate = this.getPredicateFromCols((_a = this.options.filteredColumns).concat.apply(_a, this.infiniteManualSelectMaintainPred), true);\n                        var query = new Query();\n                        if (predicate) {\n                            query.where(predicate);\n                        }\n                        var result = new DataManager(this.infinitePermenantLocalData).executeLocal(query);\n                        if (this.options.parentTotalDataCount !== result.length) {\n                            this.options.parentTotalDataCount = result.length;\n                        }\n                        if (!this.options.parentTotalDataCount && this.infiniteUnloadParentExistPred.length) {\n                            this.infiniteUnloadParentExistPred = [];\n                        }\n                    }\n                    if (this.infiniteUnloadParentExistPred.length && (this.options.parentTotalDataCount === this.infiniteDataCount\n                        || !this.options.parentTotalDataCount)) {\n                        this.infiniteUnloadParentExistPred = [];\n                    }\n                }\n            }\n            this.updateIndeterminatenBtn();\n            elem.querySelector('.e-chk-hidden').focus();\n        }\n        this.setFocus(parentsUntil(elem, 'e-ftrchk'));\n    };\n    CheckBoxFilterBase.prototype.updateInfiniteManualSelectPred = function (defaults, value) {\n        for (var i = 0; i < this.infiniteManualSelectMaintainPred.length; i++) {\n            var predmdl = this.infiniteManualSelectMaintainPred[i];\n            if (predmdl.value + '' === value + '' && (predmdl.operator === 'equal' || predmdl.operator === 'notequal')) {\n                this.infiniteManualSelectMaintainPred.splice(i, 1);\n                break;\n            }\n        }\n        if ((defaults.predicate === 'or' && (!this.localInfiniteSelectAllClicked || !this.infiniteLocalSelectAll))\n            || (defaults.predicate === 'and' && (!this.localInfiniteSelectAllClicked || this.infiniteLocalSelectAll))) {\n            this.infiniteManualSelectMaintainPred.push(extend({}, { value: value }, defaults));\n            if (defaults.predicate === 'or') {\n                this.options.parentTotalDataCount++;\n            }\n            else {\n                this.options.parentTotalDataCount--;\n            }\n        }\n    };\n    /**\n     * Method to set the next target element on keyboard navigation using arrow keys.\n     *\n     */\n    CheckBoxFilterBase.prototype.focusNextOrPrev = function (e, focusableElements) {\n        var nextIndex = (e.key === 'ArrowUp') ? focusableElements.indexOf(document.activeElement) - 1\n            : focusableElements.indexOf(document.activeElement) + 1;\n        var nextElement = focusableElements[((nextIndex + focusableElements.length) % focusableElements.length)];\n        // Set focus on the next / previous element\n        if (nextElement) {\n            nextElement.focus();\n            var target = nextElement.classList.contains('e-chk-hidden') ? parentsUntil(nextElement, 'e-ftrchk') : nextElement;\n            this.setFocus(target);\n        }\n    };\n    CheckBoxFilterBase.prototype.keyupHandler = function (e) {\n        if ((e.key === 'Tab' && e.shiftKey) || e.key === 'Tab' || ((e.key === 'ArrowUp' || e.key === 'ArrowDown') && !e.altKey)) {\n            this.setFocus(parentsUntil(e.target, 'e-ftrchk'));\n        }\n        if ((e.key === 'ArrowUp' || e.key === 'ArrowDown') && !e.altKey && this.parent.filterSettings.type === 'CheckBox') {\n            e.preventDefault();\n            var focusableElements = Array.from(this.dlg.querySelectorAll('input, button, [tabindex]:not([tabindex=\"-1\"])'));\n            this.focusNextOrPrev(e, focusableElements);\n        }\n    };\n    CheckBoxFilterBase.prototype.setFocus = function (elem) {\n        var prevElem = this.dlg.querySelector('.e-chkfocus');\n        if (prevElem) {\n            prevElem.classList.remove('e-chkfocus');\n        }\n        if (elem && elem !== prevElem) {\n            elem.classList.add('e-chkfocus');\n        }\n    };\n    CheckBoxFilterBase.prototype.updateAllCBoxes = function (checked) {\n        if (this.infiniteRenderMod) {\n            this.localInfiniteSelectAllClicked = true;\n            this.infiniteLocalSelectAll = checked;\n            this.infiniteUnloadParentExistPred = [];\n            this.infiniteManualSelectMaintainPred = [];\n        }\n        var cBoxes = this.infiniteRenderMod ?\n            this.infiniteLoadedElem.map(function (arr) {\n                return arr.querySelector('.e-frame');\n            }) : [].slice.call(this.cBox.querySelectorAll('.e-frame:not(.e-add-current)'));\n        for (var _i = 0, cBoxes_1 = cBoxes; _i < cBoxes_1.length; _i++) {\n            var cBox = cBoxes_1[_i];\n            removeAddCboxClasses(cBox, checked);\n            setChecked(cBox.previousSibling, checked);\n        }\n    };\n    CheckBoxFilterBase.prototype.dialogOpen = function () {\n        if (this.parent.element.classList.contains('e-device')) {\n            this.dialogObj.element.querySelector('.e-input-group').classList.remove('e-input-focus');\n            if (!this.options.isResponsiveFilter) {\n                this.dialogObj.element.querySelector('.e-btn').focus();\n            }\n        }\n    };\n    CheckBoxFilterBase.prototype.createCheckbox = function (value, checked, data) {\n        var elem = checked ? this.cBoxTrue.cloneNode(true) :\n            this.cBoxFalse.cloneNode(true);\n        setChecked(elem.querySelector('input'), checked);\n        var label = elem.querySelector('.e-label');\n        var dummyData = extendObjWithFn({}, data, { column: this.options.column, parent: this.parent });\n        var innerText = this.options.disableHtmlEncode ? 'textContent' : 'innerHTML';\n        label[\"\" + innerText] = !isNullOrUndefined(value) && value.toString().length ?\n            this.parent.enableHtmlSanitizer ? SanitizeHtmlHelper.sanitize(value) : value : this.getLocalizedLabel('Blanks');\n        var checkboxUid = getUid('cbox');\n        label.setAttribute('id', checkboxUid + 'cboxLabel');\n        elem.querySelector('input').setAttribute('aria-labelledby', label.id);\n        if (label.innerHTML === this.getLocalizedLabel('Blanks')) {\n            this.isBlanks = true;\n        }\n        if (typeof value === 'boolean') {\n            label.innerHTML = value === true ? this.getLocalizedLabel('FilterTrue') : this.getLocalizedLabel('FilterFalse');\n        }\n        addClass([label], ['e-checkboxfiltertext']);\n        if (this.options.template && data[this.options.column.field] !== this.getLocalizedLabel('SelectAll')\n            && data[this.options.column.field] !== this.getLocalizedLabel('AddCurrentSelection')) {\n            label.innerHTML = '';\n            var isReactCompiler = this.parent.isReact && this.options.column.filter\n                && typeof (this.options.column.filter.itemTemplate) !== 'string';\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var isReactChild = this.parent.parentDetails && this.parent.parentDetails.parentInstObj &&\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                this.parent.parentDetails.parentInstObj.isReact;\n            if (isReactCompiler || isReactChild) {\n                this.options.template(dummyData, this.parent, 'filterItemTemplate', null, null, null, label);\n                this.parent.renderTemplates();\n            }\n            else {\n                appendChildren(label, this.options.template(dummyData, this.parent, 'filterItemTemplate'));\n            }\n        }\n        return elem;\n    };\n    CheckBoxFilterBase.prototype.updateIndeterminatenBtn = function () {\n        var cnt = this.infiniteRenderMod ? this.infiniteLoadedElem.length : this.cBox.children.length - 1;\n        var className = [];\n        var disabled = false;\n        var elem = this.infiniteRenderMod ? this.sBox.querySelector('.e-selectall') : this.cBox.querySelector('.e-selectall');\n        var selected = this.infiniteRenderMod ? this.infiniteLoadedElem.filter(function (arr) { return arr.querySelector('.e-check'); }).length :\n            this.cBox.querySelectorAll('.e-check:not(.e-selectall):not(.e-add-current)').length;\n        if (this.cBox.querySelector('.e-add-current')) {\n            cnt -= 1;\n        }\n        var btn;\n        if (!this.options.isResponsiveFilter) {\n            btn = this.dialogObj.btnObj[0];\n            btn.disabled = false;\n        }\n        var input = elem.previousSibling;\n        setChecked(input, false);\n        input.indeterminate = false;\n        if (this.infiniteRenderMod && this.sInput.value === '' && !this.options.parentCurrentViewDataCount && !this.localInfiniteSelectionInteracted\n            && (!this.localInfiniteSelectAllClicked || (!this.infiniteLocalSelectAll && !selected)) && (cnt !== selected || cnt === selected)) {\n            selected = 0;\n        }\n        else if (this.infiniteRenderMod && this.infiniteLoadedElem.length < this.infiniteDataCount\n            && this.infiniteUnloadParentExistPred.length && (!selected || cnt === selected) && this.infiniteLocalSelectAll) {\n            if (!selected) {\n                selected += this.infiniteUnloadParentExistPred.length;\n            }\n            else {\n                cnt += this.infiniteUnloadParentExistPred.length;\n            }\n        }\n        if (cnt === selected) {\n            if (this.infiniteRenderMod) {\n                this.infiniteLocalSelectAll = true;\n                this.localInfiniteSelectAllClicked = true;\n                this.infiniteManualSelectMaintainPred = [];\n            }\n            className = ['e-check'];\n            setChecked(input, true);\n        }\n        else if (selected) {\n            className = ['e-stop'];\n            input.indeterminate = true;\n        }\n        else {\n            if (this.infiniteRenderMod) {\n                this.infiniteLocalSelectAll = false;\n                this.localInfiniteSelectAllClicked = true;\n                this.infiniteManualSelectMaintainPred = [];\n            }\n            className = ['e-uncheck'];\n            disabled = true;\n            if (btn) {\n                btn.disabled = true;\n            }\n        }\n        if (btn) {\n            this.filterState = !btn.disabled;\n            btn.dataBind();\n        }\n        removeClass([elem], ['e-check', 'e-stop', 'e-uncheck']);\n        addClass([elem], className);\n        this.parent.notify(events.refreshCustomFilterOkBtn, { disabled: disabled });\n    };\n    CheckBoxFilterBase.prototype.createFilterItems = function (data, isInitial, args1) {\n        var _a, _b, _c;\n        var cBoxes = this.parent.createElement('div');\n        var btn;\n        var disabled = false;\n        if (!this.options.isResponsiveFilter) {\n            btn = this.dialogObj.btnObj[0];\n        }\n        var nullCounter = -1;\n        var key = 'ejValue';\n        if (!args1.executeQuery) {\n            key = args1.field;\n        }\n        for (var i = 0; i < data.length; i++) {\n            var val = getValue(key, data[parseInt(i.toString(), 10)]);\n            if (val === '' || isNullOrUndefined(val)) {\n                nullCounter = nullCounter + 1;\n            }\n        }\n        if (!this.infiniteRenderMod) {\n            this.itemsCnt = nullCounter !== -1 ? data.length - nullCounter : data.length;\n        }\n        if (this.infiniteRenderMod && this.parent.filterSettings && this.parent.filterSettings.loadingIndicator === 'Shimmer') {\n            this.removeMask();\n        }\n        if (data.length && !this.renderEmpty) {\n            var selectAllValue = this.getLocalizedLabel('SelectAll');\n            var innerDiv = this.cBox.querySelector('.e-checkfltrnmdiv');\n            if (innerDiv) {\n                innerDiv.classList.remove('e-checkfltrnmdiv');\n            }\n            var checkBox = this.createCheckbox(selectAllValue, false, (_a = {}, _a[this.options.field] = selectAllValue, _a));\n            if (this.parent.cssClass) {\n                if (this.parent.cssClass.indexOf(' ') !== -1) {\n                    addClass([checkBox], this.parent.cssClass.split(' '));\n                }\n                else {\n                    addClass([checkBox], [this.parent.cssClass]);\n                }\n            }\n            if (this.infiniteInitialLoad || !this.infiniteRenderMod) {\n                var selectAll = createCboxWithWrap(getUid('cbox'), checkBox, 'e-ftrchk');\n                selectAll.querySelector('.e-frame').classList.add('e-selectall');\n                if (this.infiniteRenderMod) {\n                    this.sBox.insertBefore(selectAll, this.spinner);\n                }\n                else {\n                    cBoxes.appendChild(selectAll);\n                }\n            }\n            else if (this.sBox.querySelector('.e-ftrchk .e-selectall')) {\n                this.sBox.querySelector('.e-ftrchk .e-selectall').previousSibling.disabled = false;\n                this.sBox.querySelector('.e-ftrchk .e-selectall').parentElement.classList.remove('e-checkbox-disabled');\n            }\n            var predicate = new Predicate('field', 'equal', this.options.field);\n            if (this.options.foreignKeyValue) {\n                predicate = predicate.or('field', 'equal', this.options.foreignKeyValue);\n            }\n            var isColFiltered = new DataManager(this.options.filteredColumns).executeLocal(new Query().where(predicate)).length;\n            if (this.sInput.value) {\n                var predicateCheckBox = this.createCheckbox(this.getLocalizedLabel('AddCurrentSelection'), false, (_b = {},\n                    _b[this.options.field] = this.getLocalizedLabel('AddCurrentSelection'),\n                    _b));\n                if (this.parent.cssClass) {\n                    if (this.parent.cssClass.indexOf(' ') !== -1) {\n                        addClass([predicateCheckBox], this.parent.cssClass.split(' '));\n                    }\n                    else {\n                        addClass([predicateCheckBox], [this.parent.cssClass]);\n                    }\n                }\n                if ((this.infiniteRenderMod && (!isNullOrUndefined(this.sBox.children[2])\n                    && this.sBox.children[2].innerText !== 'Add current selection to filter')) || !this.infiniteRenderMod) {\n                    var predicateElement = createCboxWithWrap(getUid('cbox'), predicateCheckBox, 'e-ftrchk');\n                    predicateElement.querySelector('.e-frame').classList.add('e-add-current');\n                    if (this.infiniteRenderMod) {\n                        this.sBox.insertBefore(predicateElement, this.spinner);\n                        var checkBoxListElem = this.spinner.querySelector('.e-checkboxlist');\n                        var reduceHeight = Math.ceil(predicateElement.getBoundingClientRect().height);\n                        checkBoxListElem.style.height = (parseInt(getComputedStyle(checkBoxListElem).height.split('px')[0]) - reduceHeight)\n                            + 'px';\n                        checkBoxListElem.style.minHeight = checkBoxListElem.style.height;\n                    }\n                    else {\n                        cBoxes.appendChild(predicateElement);\n                    }\n                }\n                else if (this.sBox.querySelector('.e-ftrchk .e-add-current')) {\n                    this.sBox.querySelector('.e-ftrchk .e-add-current').previousSibling.disabled = false;\n                    this.sBox.querySelector('.e-ftrchk .e-add-current').parentElement.classList.remove('e-checkbox-disabled');\n                }\n            }\n            else if (this.infiniteRenderMod && !isNullOrUndefined(this.sBox.children[2])\n                && this.sBox.children[2].innerText === 'Add current selection to filter') {\n                var checkBoxListElem = this.spinner.querySelector('.e-checkboxlist');\n                var increaseHeight = Math.ceil(this.sBox.children[2].getBoundingClientRect().height);\n                checkBoxListElem.style.height = (parseInt(getComputedStyle(checkBoxListElem).height.split('px')[0]) + increaseHeight)\n                    + 'px';\n                checkBoxListElem.style.minHeight = checkBoxListElem.style.height;\n                remove(this.sBox.children[2]);\n            }\n            var isRndere = void 0;\n            for (var i = 0; i < data.length; i++) {\n                var uid = getUid('cbox');\n                this.values[\"\" + uid] = getValue(key, data[parseInt(i.toString(), 10)]);\n                var value = getValue(this.options.field, data[parseInt(i.toString(), 10)]);\n                if (this.options.formatFn) {\n                    value = this.valueFormatter.toView(value, this.options.formatFn);\n                }\n                var args_1 = { value: value, column: this.options.column, data: data[parseInt(i.toString(), 10)] };\n                this.parent.notify(events.filterCboxValue, args_1);\n                value = args_1.value;\n                if ((value === '' || isNullOrUndefined(value))) {\n                    if (isRndere) {\n                        continue;\n                    }\n                    isRndere = true;\n                }\n                if (this.infiniteRenderMod) {\n                    this.updateInfiniteUnLoadedCheckboxExistPred(value, this.infiniteUnloadParentExistPred);\n                }\n                var checkbox = this.localInfiniteSelectAllClicked ?\n                    this.createCheckbox(value, this.infiniteLocalSelectAll, getValue('dataObj', data[i])) :\n                    this.createCheckbox(value, this.getCheckedState(isColFiltered, this.values[\"\" + uid]), getValue('dataObj', data[i]));\n                cBoxes.appendChild(createCboxWithWrap(uid, checkbox, 'e-ftrchk'));\n                if (this.infiniteRenderMod) {\n                    cBoxes.lastChild.style.height = this.getListHeight(this.cBox) + 'px';\n                }\n            }\n            var scrollTop = this.cBox.scrollTop;\n            if (!this.infiniteRenderMod || this.infiniteSearchValChange) {\n                this.cBox.innerHTML = '';\n            }\n            else if (this.infiniteRenderMod && this.cBox.children.length) {\n                this.infiniteRemoveElements(([].slice.call(this.cBox.children)).splice(0, this.parent.filterSettings.itemsCount));\n            }\n            if (this.infiniteRenderMod) {\n                (_c = this.infiniteLoadedElem).push.apply(_c, [].slice.call(cBoxes.children));\n                this.itemsCnt = nullCounter !== -1 ? this.infiniteLoadedElem.length - nullCounter : this.infiniteLoadedElem.length;\n            }\n            if (this.infiniteUnloadParentExistPred.length && (this.infiniteLoadedElem.length >= this.infiniteDataCount\n                || !this.options.parentCurrentViewDataCount || (this.options.parentTotalDataCount === this.infiniteDataCount\n                && this.options.parentCurrentViewDataCount))) {\n                this.infiniteUnloadParentExistPred = [];\n            }\n            appendChildren(this.cBox, [].slice.call(cBoxes.children));\n            if (this.infiniteRenderMod && !this.infiniteScrollAppendDiff) {\n                this.infiniteScrollAppendDiff = Math.round(scrollTop - this.cBox.scrollTop);\n            }\n            this.updateIndeterminatenBtn();\n            if (!this.infiniteRenderMod) {\n                if (btn) {\n                    btn.disabled = false;\n                }\n                disabled = false;\n            }\n            else {\n                if (btn.disabled) {\n                    disabled = true;\n                }\n                else {\n                    disabled = false;\n                }\n            }\n        }\n        else {\n            cBoxes.appendChild(this.parent.createElement('span', { innerHTML: this.getLocalizedLabel('NoResult') }));\n            this.cBox.innerHTML = '';\n            if (this.infiniteRenderMod) {\n                var selectAll = this.sBox.querySelector('.e-ftrchk .e-selectall');\n                if (selectAll) {\n                    var selectAllParent = selectAll.parentElement.parentElement;\n                    if (selectAll.classList.contains('e-check')) {\n                        toogleCheckbox(selectAllParent);\n                    }\n                    else if (selectAll.classList.contains('e-stop')) {\n                        toogleCheckbox(selectAllParent);\n                        selectAll.classList.remove('e-stop');\n                        toogleCheckbox(selectAllParent);\n                    }\n                    selectAll.previousSibling.disabled = true;\n                    selectAll.parentElement.classList.add('e-checkbox-disabled');\n                }\n                var addCurrSelection = this.sBox.querySelector('.e-ftrchk .e-add-current');\n                if (addCurrSelection) {\n                    var addCurrSelectionParent = addCurrSelection.parentElement.parentElement;\n                    if (addCurrSelection.classList.contains('e-check')) {\n                        toogleCheckbox(addCurrSelectionParent);\n                    }\n                    addCurrSelection.previousSibling.disabled = true;\n                    addCurrSelection.parentElement.classList.add('e-checkbox-disabled');\n                }\n            }\n            this.cBox.appendChild(this.parent.createElement('div', { className: 'e-checkfltrnmdiv' }));\n            appendChildren(this.cBox.children[0], [].slice.call(cBoxes.children));\n            if (btn) {\n                btn.disabled = true;\n            }\n            disabled = true;\n            this.filterState = !disabled;\n        }\n        if (btn && data.length) {\n            this.filterState = !btn.disabled;\n            btn.dataBind();\n        }\n        var args = { requestType: events.filterChoiceRequest, dataSource: this.renderEmpty ? [] : data };\n        var filterModel = 'filterModel';\n        args[\"\" + filterModel] = this;\n        this.parent.notify(events.cBoxFltrComplete, args);\n        this.parent.notify(events.refreshCustomFilterOkBtn, { disabled: disabled });\n        if (this.infiniteRenderMod && this.infiniteInitialLoad) {\n            this.cBox.style.marginTop = '0px';\n        }\n        hideSpinner(this.spinner);\n    };\n    CheckBoxFilterBase.prototype.updateInfiniteUnLoadedCheckboxExistPred = function (value, updatePredArr) {\n        for (var j = 0; j < updatePredArr.length; j++) {\n            var pred = updatePredArr[j];\n            if (value === pred.value && (pred.operator === 'equal' || pred.operator === 'notequal')) {\n                this.infiniteManualSelectMaintainPred.push(updatePredArr[j]);\n                updatePredArr.splice(j, 1);\n                j--;\n            }\n        }\n    };\n    CheckBoxFilterBase.prototype.getCheckedState = function (isColFiltered, value) {\n        if (!this.isFiltered || !isColFiltered) {\n            return true;\n        }\n        else {\n            var checkState = this.sInput.value ? true : this.result[\"\" + value];\n            if (this.infiniteRenderMod) {\n                return checkState;\n            }\n            else {\n                return this.options.operator === 'notequal' ? !checkState : checkState;\n            }\n        }\n    };\n    CheckBoxFilterBase.getDistinct = function (json, field, column, foreignKeyData, checkboxFilter) {\n        var len = json.length;\n        var result = [];\n        var value;\n        var ejValue = 'ejValue';\n        var lookup = {};\n        var isForeignKey = column && column.isForeignColumn ? column.isForeignColumn() : false;\n        while (len--) {\n            value = json[parseInt(len.toString(), 10)];\n            if (column && column.type === 'dateonly' && typeof value[\"\" + field] === 'string' && value[\"\" + field]) {\n                var arr = value[\"\" + field].split(/[^0-9.]/);\n                value[\"\" + field] = new Date(parseInt(arr[0], 10), parseInt(arr[1], 10) - 1, parseInt(arr[2], 10));\n            }\n            value = getObject(field, value); //local remote diff, check with mdu\n            var currentFilterValue = (typeof value === 'string') && !(isNullOrUndefined(checkboxFilter)) &&\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                !(isNullOrUndefined(checkboxFilter.parent)) && !(isNullOrUndefined(checkboxFilter.parent.filterSettings)) &&\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                !(isNullOrUndefined(checkboxFilter.parent.filterSettings.enableCaseSensitivity)) ? value.toLowerCase() : value;\n            if (!(currentFilterValue in lookup)) {\n                var obj = {};\n                obj[\"\" + ejValue] = value;\n                lookup[\"\" + currentFilterValue] = true;\n                if (isForeignKey) {\n                    var foreignDataObj = getForeignData(column, {}, value, foreignKeyData)[0];\n                    setValue(events.foreignKeyData, foreignDataObj, json[parseInt(len.toString(), 10)]);\n                    value = getValue(column.foreignKeyValue, foreignDataObj);\n                }\n                setValue(field, isNullOrUndefined(value) ? null : value, obj);\n                setValue('dataObj', json[parseInt(len.toString(), 10)], obj);\n                result.push(obj);\n            }\n        }\n        return DataUtil.group(DataUtil.sort(result, field, DataUtil.fnAscending), 'ejValue');\n    };\n    CheckBoxFilterBase.getPredicate = function (columns, isExecuteLocal) {\n        var cols = DataUtil.distinct(columns, 'field', true) || [];\n        var collection = [];\n        var pred = {};\n        for (var i = 0; i < cols.length; i++) {\n            collection = new DataManager(columns).executeLocal(new Query().where('field', 'equal', cols[parseInt(i.toString(), 10)].field));\n            if (collection.length !== 0) {\n                pred[cols[parseInt(i.toString(), 10)].field] = CheckBoxFilterBase.generatePredicate(collection, isExecuteLocal);\n            }\n        }\n        return pred;\n    };\n    CheckBoxFilterBase.generatePredicate = function (cols, isExecuteLocal) {\n        var len = cols ? cols.length : 0;\n        var predicate;\n        var operate = 'or';\n        var first = CheckBoxFilterBase.updateDateFilter(cols[0]);\n        first.ignoreAccent = !isNullOrUndefined(first.ignoreAccent) ? first.ignoreAccent : false;\n        if (first.type === 'date' || first.type === 'datetime' || first.type === 'dateonly') {\n            predicate = getDatePredicate(first, first.type, isExecuteLocal);\n        }\n        else {\n            predicate = first.ejpredicate ? first.ejpredicate :\n                new Predicate(first.field, first.operator, first.value, !CheckBoxFilterBase.getCaseValue(first), first.ignoreAccent);\n        }\n        for (var p = 1; p < len; p++) {\n            cols[parseInt(p.toString(), 10)] = CheckBoxFilterBase.updateDateFilter(cols[parseInt(p.toString(), 10)]);\n            if (len > 2 && p > 1 && ((cols[p].predicate === 'or' && cols[p - 1].predicate === 'or')\n                || (cols[p].predicate === 'and' && cols[p - 1].predicate === 'and'))) {\n                if (cols[p].type === 'date' || cols[p].type === 'datetime' || cols[p].type === 'dateonly') {\n                    predicate.predicates.push(getDatePredicate(cols[parseInt(p.toString(), 10)], cols[p].type, isExecuteLocal));\n                }\n                else {\n                    predicate.predicates.push(new Predicate(cols[p].field, cols[parseInt(p.toString(), 10)].operator, cols[parseInt(p.toString(), 10)].value, !CheckBoxFilterBase.getCaseValue(cols[parseInt(p.toString(), 10)]), cols[parseInt(p.toString(), 10)].ignoreAccent));\n                }\n            }\n            else {\n                if (cols[p].type === 'date' || cols[p].type === 'datetime' || cols[p].type === 'dateonly') {\n                    if (cols[parseInt(p.toString(), 10)].predicate === 'and' && cols[parseInt(p.toString(), 10)].operator === 'equal') {\n                        predicate = predicate[\"\" + operate](getDatePredicate(cols[parseInt(p.toString(), 10)], cols[parseInt(p.toString(), 10)].type, isExecuteLocal), cols[parseInt(p.toString(), 10)].type, cols[parseInt(p.toString(), 10)].ignoreAccent);\n                    }\n                    else {\n                        predicate = predicate[(cols[parseInt(p.toString(), 10)].predicate)](getDatePredicate(cols[parseInt(p.toString(), 10)], cols[parseInt(p.toString(), 10)].type, isExecuteLocal), cols[parseInt(p.toString(), 10)].type, cols[parseInt(p.toString(), 10)].ignoreAccent);\n                    }\n                }\n                else {\n                    predicate = cols[parseInt(p.toString(), 10)].ejpredicate ?\n                        predicate[cols[parseInt(p.toString(), 10)]\n                            .predicate](cols[parseInt(p.toString(), 10)].ejpredicate) :\n                        predicate[(cols[parseInt(p.toString(), 10)].predicate)](cols[parseInt(p.toString(), 10)].field, cols[parseInt(p.toString(), 10)].operator, cols[parseInt(p.toString(), 10)].value, !CheckBoxFilterBase.getCaseValue(cols[parseInt(p.toString(), 10)]), cols[parseInt(p.toString(), 10)].ignoreAccent);\n                }\n            }\n        }\n        return predicate || null;\n    };\n    CheckBoxFilterBase.getCaseValue = function (filter) {\n        if (isNullOrUndefined(filter.matchCase)) {\n            if (filter.type === 'string' || isNullOrUndefined(filter.type) && typeof (filter.value) === 'string') {\n                return false;\n            }\n            else {\n                return true;\n            }\n        }\n        else {\n            return filter.matchCase;\n        }\n    };\n    CheckBoxFilterBase.updateDateFilter = function (filter) {\n        if ((filter.type === 'date' || filter.type === 'datetime' || filter.type === 'dateonly' || filter.value instanceof Date)) {\n            filter.type = filter.type || 'date';\n        }\n        return filter;\n    };\n    return CheckBoxFilterBase;\n}());\nexport { CheckBoxFilterBase };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}