{"ast":null,"code":"import { addClass, Browser, removeClass, formatUnit, isNullOrUndefined, isNullOrUndefined as isNOU } from '@syncfusion/ej2-base';\nimport { getInstance, closest, selectAll } from '@syncfusion/ej2-base';\nimport { Toolbar } from '@syncfusion/ej2-navigations';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\nimport { Popup, Tooltip } from '@syncfusion/ej2-popups';\nimport * as classes from '../base/classes';\nimport * as events from '../base/constant';\nimport { CLS_TOOLBAR, CLS_DROPDOWN_BTN, CLS_RTE_ELEMENTS, CLS_TB_BTN, CLS_INLINE_DROPDOWN, CLS_COLOR_CONTENT, CLS_FONT_COLOR_DROPDOWN, CLS_BACKGROUND_COLOR_DROPDOWN, CLS_COLOR_PALETTE, CLS_FONT_COLOR_PICKER, CLS_BACKGROUND_COLOR_PICKER, CLS_CUSTOM_TILE, CLS_NOCOLOR_ITEM, CLS_BULLETFORMATLIST_TB_BTN, CLS_NUMBERFORMATLIST_TB_BTN, CLS_LIST_PRIMARY_CONTENT } from '../base/classes';\nimport { ColorPicker } from '@syncfusion/ej2-inputs';\nimport { hasClass } from '../base/util';\n/**\n * `Toolbar renderer` module is used to render toolbar in RichTextEditor.\n *\n * @hidden\n\n */\nvar ToolbarRenderer = /** @class */function () {\n  /**\n   * Constructor for toolbar renderer module\n   *\n   * @param {IRichTextEditor} parent - specifies the parent element.\n   * @param {ServiceLocator} serviceLocator - specifies the serviceLocator\n   */\n  function ToolbarRenderer(parent, serviceLocator) {\n    this.parent = parent;\n    if (serviceLocator) {\n      this.l10n = serviceLocator.getService('rteLocale');\n    }\n    this.wireEvent();\n  }\n  ToolbarRenderer.prototype.wireEvent = function () {\n    this.parent.on(events.destroy, this.unWireEvent, this);\n    this.parent.on(events.destroyTooltip, this.destroyTooltip, this);\n  };\n  ToolbarRenderer.prototype.destroyTooltip = function () {\n    var currentDocument = this.parent.iframeSettings.enable ? this.parent.contentModule.getPanel().ownerDocument : this.parent.contentModule.getDocument();\n    if (!isNullOrUndefined(currentDocument.querySelector('.e-tooltip-wrap')) && !isNullOrUndefined(currentDocument.querySelector('[data-tooltip-id]'))) {\n      var tooltipTargetEle = currentDocument.querySelector('[data-tooltip-id]');\n      var event_1 = new MouseEvent('mouseleave', {\n        bubbles: true,\n        cancelable: true\n      });\n      tooltipTargetEle.dispatchEvent(event_1);\n    }\n  };\n  ToolbarRenderer.prototype.unWireEvent = function () {\n    this.parent.off(events.destroy, this.unWireEvent);\n  };\n  ToolbarRenderer.prototype.toolbarBeforeCreate = function (e) {\n    if (this.mode === 'Extended') {\n      e.enableCollision = false;\n    }\n  };\n  ToolbarRenderer.prototype.toolbarCreated = function () {\n    this.parent.notify(events.toolbarCreated, this);\n  };\n  ToolbarRenderer.prototype.toolbarClicked = function (args) {\n    if (!this.parent.enabled) {\n      return;\n    }\n    this.parent.trigger('toolbarClick', args);\n    if (!this.parent.readonly || isNullOrUndefined(args.item)) {\n      this.parent.notify(events.toolbarClick, args);\n    }\n  };\n  ToolbarRenderer.prototype.dropDownSelected = function (args) {\n    this.parent.notify(events.dropDownSelect, args);\n    this.destroyTooltip();\n  };\n  ToolbarRenderer.prototype.beforeDropDownItemRender = function (args) {\n    if (this.parent.readonly || !this.parent.enabled) {\n      return;\n    }\n    this.parent.notify(events.beforeDropDownItemRender, args);\n  };\n  ToolbarRenderer.prototype.tooltipBeforeRender = function (args) {\n    if (!isNOU(args.target.getAttribute('title'))) {\n      var tooltipTarget = args.target.getAttribute('title');\n      var tooltipText = void 0;\n      switch (tooltipTarget) {\n        case 'Minimize':\n          tooltipText = this.l10n.getConstant('minimize');\n          args.target.setAttribute('title', tooltipText + ' (Esc)');\n          break;\n        case 'Maximize':\n          tooltipText = this.l10n.getConstant('maximize');\n          args.target.setAttribute('title', tooltipText + ' (Ctrl+Shift+F)');\n          break;\n      }\n    }\n  };\n  ToolbarRenderer.prototype.dropDownOpen = function (args) {\n    if (args.element.parentElement.getAttribute('id').indexOf('TableCell') > -1 && !isNOU(args.element.parentElement.querySelector('.e-cell-merge')) && (!isNOU(args.element.parentElement.querySelector('.e-cell-horizontal-split')) || !isNOU(args.element.parentElement.querySelector('.e-cell-vertical-split')))) {\n      var listEle = args.element.querySelectorAll('li');\n      var selectedEles_1 = this.parent.inputElement.querySelectorAll('.e-cell-select');\n      if (selectedEles_1.length === 1) {\n        addClass([listEle[0]], 'e-disabled');\n        removeClass([listEle[1], listEle[2]], 'e-disabled');\n      } else if (selectedEles_1.length > 1) {\n        if (!Array.from(selectedEles_1).every(function (element) {\n          return element.tagName.toLowerCase() === selectedEles_1[0].tagName.toLowerCase();\n        })) {\n          addClass([listEle[0]], 'e-disabled');\n        } else {\n          removeClass([listEle[0]], 'e-disabled');\n        }\n        addClass([listEle[1], listEle[2]], 'e-disabled');\n      }\n    }\n    this.parent.notify(events.selectionSave, args);\n  };\n  ToolbarRenderer.prototype.dropDownClose = function (args) {\n    this.parent.notify(events.selectionRestore, args);\n  };\n  /**\n   * renderToolbar method\n   *\n   * @param {IToolbarOptions} args - specifies the arguments.\n   * @returns {void}\n   * @hidden\n    */\n  ToolbarRenderer.prototype.renderToolbar = function (args) {\n    this.setPanel(args.target);\n    this.renderPanel();\n    this.mode = args.overflowMode;\n    args.rteToolbarObj.toolbarObj = new Toolbar({\n      items: args.items,\n      width: '100%',\n      overflowMode: args.overflowMode,\n      beforeCreate: this.toolbarBeforeCreate.bind(this),\n      created: this.toolbarCreated.bind(this),\n      clicked: this.toolbarClicked.bind(this),\n      enablePersistence: args.enablePersistence,\n      enableRtl: args.enableRtl,\n      cssClass: args.cssClass\n    });\n    args.rteToolbarObj.toolbarObj.isStringTemplate = true;\n    args.rteToolbarObj.toolbarObj.createElement = this.parent.createElement;\n    args.rteToolbarObj.toolbarObj.appendTo(args.target);\n    if (this.parent.showTooltip) {\n      this.tooltip = new Tooltip({\n        target: '#' + this.parent.getID() + '_toolbar_wrapper [title]',\n        showTipPointer: true,\n        openDelay: 400,\n        opensOn: 'Hover',\n        beforeRender: this.tooltipBeforeRender.bind(this),\n        cssClass: this.parent.getCssClass(),\n        windowCollision: true,\n        position: 'BottomCenter'\n      });\n      this.tooltip.appendTo(args.target);\n    }\n    if (this.parent.showTooltip) {\n      this.dropdownTooltip = new Tooltip({\n        target: '[aria-owns=\"' + this.parent.getID() + '\"].e-rte-elements [title]',\n        showTipPointer: true,\n        openDelay: 400,\n        opensOn: 'Hover',\n        beforeRender: this.tooltipBeforeRender.bind(this),\n        cssClass: this.parent.getCssClass(),\n        windowCollision: true,\n        position: 'BottomCenter'\n      });\n      this.dropdownTooltip.appendTo(document.body);\n    }\n  };\n  /**\n   * renderDropDownButton method\n   *\n   * @param {IDropDownModel} args - specifies the the arguments.\n   * @returns {void}\n   * @hidden\n    */\n  ToolbarRenderer.prototype.renderDropDownButton = function (args) {\n    var _this = this;\n    var css;\n    args.element.classList.add(CLS_DROPDOWN_BTN);\n    css = args.cssClass + ' ' + CLS_RTE_ELEMENTS + ' ' + CLS_TB_BTN;\n    if (this.parent.inlineMode.enable && Browser.isDevice) {\n      css = css + ' ' + CLS_INLINE_DROPDOWN;\n    }\n    // eslint-disable-next-line\n    var proxy = this;\n    var dropDown = new DropDownButton({\n      items: args.items,\n      iconCss: args.iconCss,\n      cssClass: css,\n      content: args.content,\n      enablePersistence: this.parent.enablePersistence,\n      enableRtl: this.parent.enableRtl,\n      select: this.dropDownSelected.bind(this),\n      beforeOpen: function (args) {\n        if (proxy.parent.readonly || !proxy.parent.enabled) {\n          args.cancel = true;\n          return;\n        }\n        // eslint-disable-next-line\n        // Table styles dropdown preselect\n        if (proxy.parent.editorMode !== 'Markdown') {\n          var startNode = proxy.parent.getRange().startContainer.parentElement;\n          var tableEle = startNode.closest('table');\n          var trow = startNode.closest('tr');\n          if (!isNOU(tableEle) && tableEle.classList.contains('e-dashed-border')) {\n            for (var index = 0; index < args.element.childNodes.length; index++) {\n              if (args.element.childNodes[index].classList.contains('e-dashed-borders')) {\n                addClass([args.element.childNodes[index]], 'e-active');\n              }\n            }\n          } else if (!isNOU(tableEle) && !tableEle.classList.contains('e-dashed-border') && tableEle.classList.contains('e-alternate-rows') && window.getComputedStyle(trow).backgroundColor !== '') {\n            for (var index = 0; index < args.element.childNodes.length; index++) {\n              if (args.element.childNodes[index].classList.contains('e-alternate-rows')) {\n                addClass([args.element.childNodes[index]], 'e-active');\n              }\n            }\n          }\n          //Alignments preselect\n          var alignEle = proxy.parent.getRange().startContainer;\n          while (alignEle !== proxy.parent.inputElement && !isNOU(alignEle.parentElement)) {\n            if (alignEle.nodeName === '#text') {\n              alignEle = alignEle.parentElement;\n            }\n            var alignStyle = window.getComputedStyle(alignEle).textAlign;\n            if (args.items[0].command === 'Alignments') {\n              if (args.items[0].text === 'Align Left' && alignStyle === 'left' || alignStyle === 'start') {\n                addClass([args.element.childNodes[0]], 'e-active');\n                break;\n              } else if (args.items[1].text === 'Align Center' && alignStyle === 'center') {\n                addClass([args.element.childNodes[1]], 'e-active');\n                break;\n              } else if (args.items[2].text === 'Align Right' && alignStyle === 'right') {\n                addClass([args.element.childNodes[2]], 'e-active');\n                break;\n              } else if (args.items[3].text === 'Align Justify' && alignStyle === 'justify') {\n                addClass([args.element.childNodes[3]], 'e-active');\n                break;\n              }\n            }\n            alignEle = alignEle.parentElement;\n          }\n          //image preselect\n          var closestNode = startNode.closest('img');\n          var imageEle = closestNode ? closestNode : startNode.querySelector('img');\n          if (args.items[0].command === 'Images') {\n            if (!isNOU(imageEle)) {\n              var index = void 0;\n              if (imageEle.classList.contains('e-imgleft') || imageEle.classList.contains('e-imginline')) {\n                index = 0;\n              } else if (imageEle.classList.contains('e-imgcenter') || imageEle.classList.contains('e-imgbreak')) {\n                index = 1;\n              } else if (imageEle.classList.contains('e-imgright')) {\n                index = 2;\n              }\n              if (!isNOU(args.element.childNodes[index])) {\n                addClass([args.element.childNodes[index]], 'e-active');\n              }\n            }\n          }\n          //Formats preselect\n          if (args.items[0].command === 'Formats' || args.items[0].command === 'Font') {\n            for (var index = 0; index < args.element.childNodes.length; index++) {\n              var divNode = _this.parent.createElement('div');\n              divNode.innerHTML = dropDown.content.trim();\n              if (divNode.textContent.trim() !== '' && args.element.childNodes[index].textContent.trim() === divNode.textContent.trim()) {\n                if (!args.element.childNodes[index].classList.contains('e-active')) {\n                  addClass([args.element.childNodes[index]], 'e-active');\n                }\n              } else {\n                removeClass([args.element.childNodes[index]], 'e-active');\n              }\n            }\n          }\n        }\n        proxy.parent.notify(events.beforeDropDownOpen, args);\n      },\n      close: this.dropDownClose.bind(this),\n      open: this.dropDownOpen.bind(this),\n      beforeItemRender: this.beforeDropDownItemRender.bind(this)\n    });\n    dropDown.isStringTemplate = true;\n    dropDown.createElement = proxy.parent.createElement;\n    dropDown.appendTo(args.element);\n    args.element.tabIndex = -1;\n    var popupElement = document.getElementById(dropDown.element.id + '-popup');\n    popupElement.setAttribute('aria-owns', this.parent.getID());\n    return dropDown;\n  };\n  /**\n   * renderListDropDown method\n   *\n   * @param {IDropDownModel} args - specifies the the arguments.\n   * @returns {void}\n   * @hidden\n    */\n  ToolbarRenderer.prototype.renderListDropDown = function (args) {\n    // eslint-disable-next-line\n    var proxy = this;\n    var css = CLS_RTE_ELEMENTS + ' ' + CLS_TB_BTN + (this.parent.inlineMode ? ' ' + CLS_INLINE_DROPDOWN : '');\n    css += ' ' + (args.itemName === 'NumberFormatList' ? CLS_NUMBERFORMATLIST_TB_BTN : CLS_BULLETFORMATLIST_TB_BTN);\n    var content = proxy.parent.createElement('span', {\n      className: CLS_LIST_PRIMARY_CONTENT\n    });\n    var inlineEle = proxy.parent.createElement('span', {\n      className: args.cssClass\n    });\n    content.appendChild(inlineEle);\n    var dropDown = new DropDownButton({\n      items: args.items,\n      cssClass: css,\n      content: args.content,\n      enablePersistence: this.parent.enablePersistence,\n      enableRtl: this.parent.enableRtl,\n      select: this.dropDownSelected.bind(this),\n      beforeOpen: function (args) {\n        if (proxy.parent.readonly || !proxy.parent.enabled) {\n          args.cancel = true;\n          return;\n        }\n        proxy.parent.notify(events.selectionRestore, {});\n        var element = args.event ? args.event.target : null;\n        proxy.currentElement = dropDown.element;\n        proxy.currentDropdown = dropDown;\n        if (args.event && args.event.type === 'click' && (element.classList.contains(CLS_LIST_PRIMARY_CONTENT) || element.parentElement.classList.contains(CLS_LIST_PRIMARY_CONTENT))) {\n          args.cancel = true;\n          return;\n        }\n        proxy.parent.notify(events.beforeDropDownOpen, args);\n      },\n      close: this.dropDownClose.bind(this),\n      open: this.dropDownOpen.bind(this),\n      beforeItemRender: this.beforeDropDownItemRender.bind(this)\n    });\n    dropDown.isStringTemplate = true;\n    dropDown.createElement = proxy.parent.createElement;\n    dropDown.appendTo(args.element);\n    args.element.tabIndex = -1;\n    args.element.setAttribute('role', 'button');\n    var popupElement = document.getElementById(dropDown.element.id + '-popup');\n    popupElement.setAttribute('aria-owns', this.parent.getID());\n    if (args.element.childElementCount === 1) {\n      dropDown.element.insertBefore(content, dropDown.element.querySelector('.e-caret'));\n    }\n    args.element.tabIndex = -1;\n    dropDown.element.removeAttribute('type');\n    dropDown.element.onmousedown = function () {\n      proxy.parent.notify(events.selectionSave, {});\n    };\n    dropDown.element.onkeydown = function () {\n      proxy.parent.notify(events.selectionSave, {});\n    };\n    return dropDown;\n  };\n  ToolbarRenderer.prototype.paletteSelection = function (dropDownArgs, currentElement) {\n    var ele = dropDownArgs.element.querySelector('.e-control.e-colorpicker');\n    var colorbox = [].slice.call(selectAll('.e-tile', ele.parentElement));\n    removeClass(colorbox, 'e-selected');\n    var style = currentElement.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor;\n    colorbox.filter(function (colorbox) {\n      if (colorbox.style.backgroundColor === style) {\n        addClass([colorbox], 'e-selected');\n      }\n    });\n  };\n  /**\n   * renderColorPickerDropDown method\n   *\n   * @param {IColorPickerModel} args - specifies the arguments.\n   * @param {string} item - specifies the item.\n   * @param {ColorPicker} colorPicker - specifies the colorpicker.\n   * @param {string} defaultColor -specifies the defaultColor.\n   * @returns {void}\n   * @hidden\n    */\n  ToolbarRenderer.prototype.renderColorPickerDropDown = function (args, item, colorPicker, defaultColor) {\n    var _this = this;\n    // eslint-disable-next-line\n    var proxy = this;\n    var css = CLS_RTE_ELEMENTS + ' ' + CLS_TB_BTN + (this.parent.inlineMode ? ' ' + CLS_INLINE_DROPDOWN : '');\n    css += ' ' + (item === 'backgroundcolor' ? CLS_BACKGROUND_COLOR_DROPDOWN : CLS_FONT_COLOR_DROPDOWN);\n    css += this.parent.getCssClass(true);\n    var content = proxy.parent.createElement('span', {\n      className: CLS_COLOR_CONTENT\n    });\n    var inlineEle = proxy.parent.createElement('span', {\n      className: args.cssClass\n    });\n    var range;\n    var initialBackgroundColor = isNullOrUndefined(defaultColor) ? proxy.parent.backgroundColor.default : defaultColor;\n    inlineEle.style.borderBottomColor = item === 'backgroundcolor' ? initialBackgroundColor : proxy.parent.fontColor.default;\n    content.appendChild(inlineEle);\n    var dropDown = new DropDownButton({\n      target: colorPicker.element.parentElement,\n      cssClass: css,\n      enablePersistence: this.parent.enablePersistence,\n      enableRtl: this.parent.enableRtl,\n      beforeOpen: function (dropDownArgs) {\n        colorPicker.inline = true;\n        colorPicker.dataBind();\n        if (proxy.parent.readonly || !proxy.parent.enabled) {\n          dropDownArgs.cancel = true;\n          return;\n        }\n        var element = dropDownArgs.event ? dropDownArgs.event.target : null;\n        proxy.currentElement = dropDown.element;\n        proxy.currentDropdown = dropDown;\n        proxy.paletteSelection(dropDownArgs, proxy.currentElement);\n        if (dropDownArgs.event && dropDownArgs.event.type === 'click' && (element.classList.contains(CLS_COLOR_CONTENT) || element.parentElement.classList.contains(CLS_COLOR_CONTENT))) {\n          dropDownArgs.cancel = true;\n          var colorpickerValue = element.classList.contains(CLS_RTE_ELEMENTS) ? element.style.borderBottomColor : element.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor;\n          proxy.parent.notify(events.selectionRestore, {});\n          range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.parent.contentModule.getDocument());\n          var parentNode = range.startContainer.parentNode;\n          var closestElement = closest(range.startContainer.parentNode, 'table');\n          if ((range.startContainer.nodeName === 'TD' || range.startContainer.nodeName === 'TH' || closest(range.startContainer.parentNode, 'td,th') || proxy.parent.iframeSettings.enable && !hasClass(parentNode.ownerDocument.querySelector('body'), 'e-lib')) && range.collapsed && args.subCommand === 'BackgroundColor' && closest(closestElement, '.' + classes.CLS_RTE)) {\n            proxy.parent.notify(events.tableColorPickerChanged, {\n              item: {\n                command: args.command,\n                subCommand: args.subCommand,\n                value: colorpickerValue\n              }\n            });\n          } else {\n            proxy.parent.notify(events.colorPickerChanged, {\n              item: {\n                command: args.command,\n                subCommand: args.subCommand,\n                value: colorpickerValue\n              }\n            });\n          }\n          return;\n        } else {\n          var ele = dropDownArgs.element.querySelector('.e-control.e-colorpicker');\n          var inst = getInstance(ele, ColorPicker);\n          inst.showButtons = dropDownArgs.element.querySelector('.e-color-palette') ? false : true;\n          inst.dataBind();\n        }\n        dropDownArgs.element.onclick = function (args) {\n          if (args.target.classList.contains('e-cancel')) {\n            dropDown.toggle();\n          }\n        };\n      },\n      open: function (dropDownArgs) {\n        _this.setColorPickerContentWidth(colorPicker);\n        var focusEle;\n        var ele = dropDownArgs.element.querySelector('.e-control.e-colorpicker');\n        if (dropDownArgs.element.querySelector('.e-color-palette')) {\n          focusEle = ele.parentElement.querySelector('.e-palette');\n        } else {\n          focusEle = ele.parentElement.querySelector('e-handler');\n        }\n        if (focusEle) {\n          focusEle.focus();\n        }\n        _this.pickerRefresh(dropDownArgs);\n      },\n      beforeClose: function (dropDownArgs) {\n        var element = dropDownArgs.event ? dropDownArgs.event.target : null;\n        if (dropDownArgs.event && dropDownArgs.event.type === 'click' && (element.classList.contains(CLS_COLOR_CONTENT) || element.parentElement.classList.contains(CLS_COLOR_CONTENT))) {\n          var colorpickerValue = element.classList.contains(CLS_RTE_ELEMENTS) ? element.style.borderBottomColor : element.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor;\n          range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.parent.contentModule.getDocument());\n          if ((range.startContainer.nodeName === 'TD' || range.startContainer.nodeName === 'TH' || closest(range.startContainer.parentNode, 'td,th')) && range.collapsed) {\n            proxy.parent.notify(events.tableColorPickerChanged, {\n              item: {\n                command: args.command,\n                subCommand: args.subCommand,\n                value: colorpickerValue\n              }\n            });\n          } else {\n            proxy.parent.notify(events.colorPickerChanged, {\n              item: {\n                command: args.command,\n                subCommand: args.subCommand,\n                value: colorpickerValue\n              }\n            });\n          }\n          return;\n        }\n      },\n      close: function (dropDownArgs) {\n        proxy.parent.notify(events.selectionRestore, {});\n      }\n    });\n    dropDown.isStringTemplate = true;\n    dropDown.createElement = proxy.parent.createElement;\n    args.element.setAttribute('role', 'button');\n    dropDown.appendTo(args.element);\n    var popupElement = document.getElementById(dropDown.element.id + '-popup');\n    popupElement.setAttribute('aria-owns', this.parent.getID());\n    dropDown.element.insertBefore(content, dropDown.element.querySelector('.e-caret'));\n    args.element.tabIndex = -1;\n    dropDown.element.removeAttribute('type');\n    dropDown.element.onmousedown = function () {\n      proxy.parent.notify(events.selectionSave, {});\n    };\n    dropDown.element.onkeydown = function () {\n      proxy.parent.notify(events.selectionSave, {});\n    };\n    return dropDown;\n  };\n  ToolbarRenderer.prototype.pickerRefresh = function (dropDownArgs) {\n    if (this.parent.backgroundColor.mode === 'Picker') {\n      var popupElem = dropDownArgs.element.parentElement;\n      popupElem.style.width = (popupElem.offsetWidth + 5).toString() + 'px';\n      getInstance(popupElem, Popup).refreshPosition(popupElem);\n      popupElem.style.width = (popupElem.offsetWidth - 5).toString() + 'px';\n    }\n  };\n  ToolbarRenderer.prototype.setColorPickerContentWidth = function (colorPicker) {\n    var colorPickerContent = colorPicker.element.nextSibling;\n    if (colorPickerContent.style.width === '0px') {\n      colorPickerContent.style.width = '';\n      var borderWidth = parseInt(getComputedStyle(colorPickerContent).borderBottomWidth, 10);\n      colorPickerContent.style.width = formatUnit(colorPickerContent.children[0].offsetWidth + borderWidth + borderWidth);\n    }\n  };\n  /**\n   * renderColorPicker method\n   *\n   * @param {IColorPickerModel} args - specifies the arguments\n   * @param {string} item - specifies the string values\n   * @returns {void}\n   * @hidden\n    */\n  ToolbarRenderer.prototype.renderColorPicker = function (args, item) {\n    var _this = this;\n    // eslint-disable-next-line\n    var proxy = this;\n    var value;\n    var colorPicker = new ColorPicker({\n      enablePersistence: this.parent.enablePersistence,\n      enableRtl: this.parent.enableRtl,\n      inline: false,\n      value: '#fff',\n      created: function () {\n        var value = item === 'backgroundcolor' ? proxy.parent.backgroundColor.default : proxy.parent.fontColor.default;\n        colorPicker.setProperties({\n          value: value\n        });\n      },\n      mode: item === 'backgroundcolor' ? proxy.parent.backgroundColor.mode : proxy.parent.fontColor.mode,\n      modeSwitcher: item === 'backgroundcolor' ? proxy.parent.backgroundColor.modeSwitcher : proxy.parent.fontColor.modeSwitcher,\n      beforeTileRender: function (args) {\n        args.element.classList.add(CLS_COLOR_PALETTE);\n        args.element.classList.add(CLS_CUSTOM_TILE);\n        if (!isNullOrUndefined(_this.parent.cssClass)) {\n          var allClassName = _this.parent.getCssClass().split(' ');\n          for (var i = 0; i < allClassName.length; i++) {\n            if (allClassName[i].trim() !== '') {\n              args.element.classList.add(allClassName[i]);\n            }\n          }\n        }\n        if (args.value === '') {\n          args.element.classList.add(CLS_NOCOLOR_ITEM);\n        }\n      },\n      change: function (colorPickerArgs) {\n        var colorpickerValue = colorPickerArgs.currentValue.rgba;\n        colorPickerArgs.item = {\n          command: args.command,\n          subCommand: args.subCommand,\n          value: colorpickerValue\n        };\n        proxy.parent.notify(events.selectionRestore, {});\n        proxy.currentElement.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor = colorpickerValue;\n        var range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.parent.contentModule.getDocument());\n        var closestElement = closest(range.startContainer.parentNode, 'table');\n        if ((range.startContainer.nodeName === 'TD' || range.startContainer.nodeName === 'TH' || range.startContainer.nodeName === 'BODY' || closest(range.startContainer.parentNode, 'td,th')) && range.collapsed && args.subCommand === 'BackgroundColor' && closest(closestElement, '.' + classes.CLS_RTE)) {\n          proxy.parent.notify(events.tableColorPickerChanged, colorPickerArgs);\n        } else {\n          proxy.parent.notify(events.colorPickerChanged, colorPickerArgs);\n        }\n        proxy.currentDropdown.toggle();\n      },\n      beforeModeSwitch: function (args) {\n        value = colorPicker.value;\n        if (value === '') {\n          colorPicker.setProperties({\n            value: args.mode === 'Picker' ? '#008000ff' : ''\n          }, true);\n        }\n        colorPicker.showButtons = args.mode === 'Palette' ? false : true;\n      }\n    });\n    colorPicker.isStringTemplate = true;\n    colorPicker.columns = item === 'backgroundcolor' ? this.parent.backgroundColor.columns : this.parent.fontColor.columns;\n    colorPicker.presetColors = item === 'backgroundcolor' ? this.parent.backgroundColor.colorCode : this.parent.fontColor.colorCode;\n    colorPicker.cssClass = (item === 'backgroundcolor' ? CLS_BACKGROUND_COLOR_PICKER : CLS_FONT_COLOR_PICKER) + ' ' + args.cssClass;\n    colorPicker.createElement = this.parent.createElement;\n    colorPicker.appendTo(document.getElementById(args.target));\n    return colorPicker;\n  };\n  /**\n   * The function is used to render Rich Text Editor toolbar\n   *\n   * @returns {void}\n   * @hidden\n    */\n  ToolbarRenderer.prototype.renderPanel = function () {\n    this.getPanel().classList.add(CLS_TOOLBAR);\n  };\n  /**\n   * Get the toolbar element of RichTextEditor\n   *\n   * @returns {Element} - specifies the element.\n   * @hidden\n    */\n  ToolbarRenderer.prototype.getPanel = function () {\n    return this.toolbarPanel;\n  };\n  /**\n   * Set the toolbar element of RichTextEditor\n   *\n   * @returns {void}\n   * @param  {Element} panel - specifies the element.\n   * @hidden\n    */\n  ToolbarRenderer.prototype.setPanel = function (panel) {\n    this.toolbarPanel = panel;\n  };\n  return ToolbarRenderer;\n}();\nexport { ToolbarRenderer };","map":{"version":3,"names":["addClass","Browser","removeClass","formatUnit","isNullOrUndefined","isNOU","getInstance","closest","selectAll","Toolbar","DropDownButton","Popup","Tooltip","classes","events","CLS_TOOLBAR","CLS_DROPDOWN_BTN","CLS_RTE_ELEMENTS","CLS_TB_BTN","CLS_INLINE_DROPDOWN","CLS_COLOR_CONTENT","CLS_FONT_COLOR_DROPDOWN","CLS_BACKGROUND_COLOR_DROPDOWN","CLS_COLOR_PALETTE","CLS_FONT_COLOR_PICKER","CLS_BACKGROUND_COLOR_PICKER","CLS_CUSTOM_TILE","CLS_NOCOLOR_ITEM","CLS_BULLETFORMATLIST_TB_BTN","CLS_NUMBERFORMATLIST_TB_BTN","CLS_LIST_PRIMARY_CONTENT","ColorPicker","hasClass","ToolbarRenderer","parent","serviceLocator","l10n","getService","wireEvent","prototype","on","destroy","unWireEvent","destroyTooltip","currentDocument","iframeSettings","enable","contentModule","getPanel","ownerDocument","getDocument","querySelector","tooltipTargetEle","event_1","MouseEvent","bubbles","cancelable","dispatchEvent","off","toolbarBeforeCreate","e","mode","enableCollision","toolbarCreated","notify","toolbarClicked","args","enabled","trigger","readonly","item","toolbarClick","dropDownSelected","dropDownSelect","beforeDropDownItemRender","tooltipBeforeRender","target","getAttribute","tooltipTarget","tooltipText","getConstant","setAttribute","dropDownOpen","element","parentElement","indexOf","listEle","querySelectorAll","selectedEles_1","inputElement","length","Array","from","every","tagName","toLowerCase","selectionSave","dropDownClose","selectionRestore","renderToolbar","setPanel","renderPanel","overflowMode","rteToolbarObj","toolbarObj","items","width","beforeCreate","bind","created","clicked","enablePersistence","enableRtl","cssClass","isStringTemplate","createElement","appendTo","showTooltip","tooltip","getID","showTipPointer","openDelay","opensOn","beforeRender","getCssClass","windowCollision","position","dropdownTooltip","document","body","renderDropDownButton","_this","css","classList","add","inlineMode","isDevice","proxy","dropDown","iconCss","content","select","beforeOpen","cancel","editorMode","startNode","getRange","startContainer","tableEle","trow","contains","index","childNodes","window","getComputedStyle","backgroundColor","alignEle","nodeName","alignStyle","textAlign","command","text","closestNode","imageEle","divNode","innerHTML","trim","textContent","beforeDropDownOpen","close","open","beforeItemRender","tabIndex","popupElement","getElementById","id","renderListDropDown","itemName","className","inlineEle","appendChild","event","currentElement","currentDropdown","type","childElementCount","insertBefore","removeAttribute","onmousedown","onkeydown","paletteSelection","dropDownArgs","ele","colorbox","slice","call","style","borderBottomColor","filter","renderColorPickerDropDown","colorPicker","defaultColor","range","initialBackgroundColor","default","fontColor","inline","dataBind","colorpickerValue","formatter","editorManager","nodeSelection","parentNode","closestElement","collapsed","subCommand","CLS_RTE","tableColorPickerChanged","value","colorPickerChanged","inst","showButtons","onclick","toggle","setColorPickerContentWidth","focusEle","focus","pickerRefresh","beforeClose","popupElem","offsetWidth","toString","refreshPosition","colorPickerContent","nextSibling","borderWidth","parseInt","borderBottomWidth","children","renderColorPicker","setProperties","modeSwitcher","beforeTileRender","allClassName","split","i","change","colorPickerArgs","currentValue","rgba","beforeModeSwitch","columns","presetColors","colorCode","toolbarPanel","panel"],"sources":["/Users/saleem/Desktop/KClient/Web App/Ver_3.6/User Interface/website_Source files/node_modules/@syncfusion/ej2-richtexteditor/src/rich-text-editor/renderer/toolbar-renderer.js"],"sourcesContent":["import { addClass, Browser, removeClass, formatUnit, isNullOrUndefined, isNullOrUndefined as isNOU } from '@syncfusion/ej2-base';\nimport { getInstance, closest, selectAll } from '@syncfusion/ej2-base';\nimport { Toolbar } from '@syncfusion/ej2-navigations';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\nimport { Popup, Tooltip } from '@syncfusion/ej2-popups';\nimport * as classes from '../base/classes';\nimport * as events from '../base/constant';\nimport { CLS_TOOLBAR, CLS_DROPDOWN_BTN, CLS_RTE_ELEMENTS, CLS_TB_BTN, CLS_INLINE_DROPDOWN, CLS_COLOR_CONTENT, CLS_FONT_COLOR_DROPDOWN, CLS_BACKGROUND_COLOR_DROPDOWN, CLS_COLOR_PALETTE, CLS_FONT_COLOR_PICKER, CLS_BACKGROUND_COLOR_PICKER, CLS_CUSTOM_TILE, CLS_NOCOLOR_ITEM, CLS_BULLETFORMATLIST_TB_BTN, CLS_NUMBERFORMATLIST_TB_BTN, CLS_LIST_PRIMARY_CONTENT } from '../base/classes';\nimport { ColorPicker } from '@syncfusion/ej2-inputs';\nimport { hasClass } from '../base/util';\n/**\n * `Toolbar renderer` module is used to render toolbar in RichTextEditor.\n *\n * @hidden\n\n */\nvar ToolbarRenderer = /** @class */ (function () {\n    /**\n     * Constructor for toolbar renderer module\n     *\n     * @param {IRichTextEditor} parent - specifies the parent element.\n     * @param {ServiceLocator} serviceLocator - specifies the serviceLocator\n     */\n    function ToolbarRenderer(parent, serviceLocator) {\n        this.parent = parent;\n        if (serviceLocator) {\n            this.l10n = serviceLocator.getService('rteLocale');\n        }\n        this.wireEvent();\n    }\n    ToolbarRenderer.prototype.wireEvent = function () {\n        this.parent.on(events.destroy, this.unWireEvent, this);\n        this.parent.on(events.destroyTooltip, this.destroyTooltip, this);\n    };\n    ToolbarRenderer.prototype.destroyTooltip = function () {\n        var currentDocument = this.parent.iframeSettings.enable ? this.parent.contentModule.getPanel().ownerDocument :\n            this.parent.contentModule.getDocument();\n        if (!isNullOrUndefined(currentDocument.querySelector('.e-tooltip-wrap')) && !isNullOrUndefined(currentDocument.querySelector('[data-tooltip-id]'))) {\n            var tooltipTargetEle = currentDocument.querySelector('[data-tooltip-id]');\n            var event_1 = new MouseEvent('mouseleave', { bubbles: true, cancelable: true });\n            tooltipTargetEle.dispatchEvent(event_1);\n        }\n    };\n    ToolbarRenderer.prototype.unWireEvent = function () {\n        this.parent.off(events.destroy, this.unWireEvent);\n    };\n    ToolbarRenderer.prototype.toolbarBeforeCreate = function (e) {\n        if (this.mode === 'Extended') {\n            e.enableCollision = false;\n        }\n    };\n    ToolbarRenderer.prototype.toolbarCreated = function () {\n        this.parent.notify(events.toolbarCreated, this);\n    };\n    ToolbarRenderer.prototype.toolbarClicked = function (args) {\n        if (!this.parent.enabled) {\n            return;\n        }\n        this.parent.trigger('toolbarClick', args);\n        if (!this.parent.readonly || isNullOrUndefined(args.item)) {\n            this.parent.notify(events.toolbarClick, args);\n        }\n    };\n    ToolbarRenderer.prototype.dropDownSelected = function (args) {\n        this.parent.notify(events.dropDownSelect, args);\n        this.destroyTooltip();\n    };\n    ToolbarRenderer.prototype.beforeDropDownItemRender = function (args) {\n        if (this.parent.readonly || !this.parent.enabled) {\n            return;\n        }\n        this.parent.notify(events.beforeDropDownItemRender, args);\n    };\n    ToolbarRenderer.prototype.tooltipBeforeRender = function (args) {\n        if (!isNOU(args.target.getAttribute('title'))) {\n            var tooltipTarget = args.target.getAttribute('title');\n            var tooltipText = void 0;\n            switch (tooltipTarget) {\n                case 'Minimize':\n                    tooltipText = this.l10n.getConstant('minimize');\n                    args.target.setAttribute('title', tooltipText + ' (Esc)');\n                    break;\n                case 'Maximize':\n                    tooltipText = this.l10n.getConstant('maximize');\n                    args.target.setAttribute('title', tooltipText + ' (Ctrl+Shift+F)');\n                    break;\n            }\n        }\n    };\n    ToolbarRenderer.prototype.dropDownOpen = function (args) {\n        if (args.element.parentElement.getAttribute('id').indexOf('TableCell') > -1 && !isNOU(args.element.parentElement.querySelector('.e-cell-merge')) &&\n            (!isNOU(args.element.parentElement.querySelector('.e-cell-horizontal-split')) || !isNOU(args.element.parentElement.querySelector('.e-cell-vertical-split')))) {\n            var listEle = args.element.querySelectorAll('li');\n            var selectedEles_1 = this.parent.inputElement.querySelectorAll('.e-cell-select');\n            if (selectedEles_1.length === 1) {\n                addClass([listEle[0]], 'e-disabled');\n                removeClass([listEle[1], listEle[2]], 'e-disabled');\n            }\n            else if (selectedEles_1.length > 1) {\n                if (!Array.from(selectedEles_1).every(function (element) {\n                    return element.tagName.toLowerCase() === selectedEles_1[0].tagName.toLowerCase();\n                })) {\n                    addClass([listEle[0]], 'e-disabled');\n                }\n                else {\n                    removeClass([listEle[0]], 'e-disabled');\n                }\n                addClass([listEle[1], listEle[2]], 'e-disabled');\n            }\n        }\n        this.parent.notify(events.selectionSave, args);\n    };\n    ToolbarRenderer.prototype.dropDownClose = function (args) {\n        this.parent.notify(events.selectionRestore, args);\n    };\n    /**\n     * renderToolbar method\n     *\n     * @param {IToolbarOptions} args - specifies the arguments.\n     * @returns {void}\n     * @hidden\n\n     */\n    ToolbarRenderer.prototype.renderToolbar = function (args) {\n        this.setPanel(args.target);\n        this.renderPanel();\n        this.mode = args.overflowMode;\n        args.rteToolbarObj.toolbarObj = new Toolbar({\n            items: args.items,\n            width: '100%',\n            overflowMode: args.overflowMode,\n            beforeCreate: this.toolbarBeforeCreate.bind(this),\n            created: this.toolbarCreated.bind(this),\n            clicked: this.toolbarClicked.bind(this),\n            enablePersistence: args.enablePersistence,\n            enableRtl: args.enableRtl,\n            cssClass: args.cssClass\n        });\n        args.rteToolbarObj.toolbarObj.isStringTemplate = true;\n        args.rteToolbarObj.toolbarObj.createElement = this.parent.createElement;\n        args.rteToolbarObj.toolbarObj.appendTo(args.target);\n        if (this.parent.showTooltip) {\n            this.tooltip = new Tooltip({\n                target: '#' + this.parent.getID() + '_toolbar_wrapper [title]',\n                showTipPointer: true,\n                openDelay: 400,\n                opensOn: 'Hover',\n                beforeRender: this.tooltipBeforeRender.bind(this),\n                cssClass: this.parent.getCssClass(),\n                windowCollision: true,\n                position: 'BottomCenter'\n            });\n            this.tooltip.appendTo(args.target);\n        }\n        if (this.parent.showTooltip) {\n            this.dropdownTooltip = new Tooltip({\n                target: '[aria-owns=\"' + this.parent.getID() + '\"].e-rte-elements [title]',\n                showTipPointer: true,\n                openDelay: 400,\n                opensOn: 'Hover',\n                beforeRender: this.tooltipBeforeRender.bind(this),\n                cssClass: this.parent.getCssClass(),\n                windowCollision: true,\n                position: 'BottomCenter'\n            });\n            this.dropdownTooltip.appendTo(document.body);\n        }\n    };\n    /**\n     * renderDropDownButton method\n     *\n     * @param {IDropDownModel} args - specifies the the arguments.\n     * @returns {void}\n     * @hidden\n\n     */\n    ToolbarRenderer.prototype.renderDropDownButton = function (args) {\n        var _this = this;\n        var css;\n        args.element.classList.add(CLS_DROPDOWN_BTN);\n        css = args.cssClass + ' ' + CLS_RTE_ELEMENTS + ' ' + CLS_TB_BTN;\n        if (this.parent.inlineMode.enable && Browser.isDevice) {\n            css = css + ' ' + CLS_INLINE_DROPDOWN;\n        }\n        // eslint-disable-next-line\n        var proxy = this;\n        var dropDown = new DropDownButton({\n            items: args.items,\n            iconCss: args.iconCss,\n            cssClass: css,\n            content: args.content,\n            enablePersistence: this.parent.enablePersistence,\n            enableRtl: this.parent.enableRtl,\n            select: this.dropDownSelected.bind(this),\n            beforeOpen: function (args) {\n                if (proxy.parent.readonly || !proxy.parent.enabled) {\n                    args.cancel = true;\n                    return;\n                }\n                // eslint-disable-next-line\n                // Table styles dropdown preselect\n                if (proxy.parent.editorMode !== 'Markdown') {\n                    var startNode = proxy.parent.getRange().startContainer.parentElement;\n                    var tableEle = startNode.closest('table');\n                    var trow = startNode.closest('tr');\n                    if (!isNOU(tableEle) && tableEle.classList.contains('e-dashed-border')) {\n                        for (var index = 0; index < args.element.childNodes.length; index++) {\n                            if (args.element.childNodes[index].classList.contains('e-dashed-borders')) {\n                                addClass([args.element.childNodes[index]], 'e-active');\n                            }\n                        }\n                    }\n                    else if (!isNOU(tableEle) && !tableEle.classList.contains('e-dashed-border') && tableEle.classList.contains('e-alternate-rows') && window.getComputedStyle(trow).backgroundColor !== '') {\n                        for (var index = 0; index < args.element.childNodes.length; index++) {\n                            if (args.element.childNodes[index].classList.contains('e-alternate-rows')) {\n                                addClass([args.element.childNodes[index]], 'e-active');\n                            }\n                        }\n                    }\n                    //Alignments preselect\n                    var alignEle = proxy.parent.getRange().startContainer;\n                    while (alignEle !== proxy.parent.inputElement && !isNOU(alignEle.parentElement)) {\n                        if (alignEle.nodeName === '#text') {\n                            alignEle = alignEle.parentElement;\n                        }\n                        var alignStyle = window.getComputedStyle(alignEle).textAlign;\n                        if (args.items[0].command === 'Alignments') {\n                            if ((args.items[0].text === 'Align Left' && (alignStyle === 'left') || alignStyle === 'start')) {\n                                addClass([args.element.childNodes[0]], 'e-active');\n                                break;\n                            }\n                            else if (args.items[1].text === 'Align Center' && alignStyle === 'center') {\n                                addClass([args.element.childNodes[1]], 'e-active');\n                                break;\n                            }\n                            else if (args.items[2].text === 'Align Right' && alignStyle === 'right') {\n                                addClass([args.element.childNodes[2]], 'e-active');\n                                break;\n                            }\n                            else if (args.items[3].text === 'Align Justify' && alignStyle === 'justify') {\n                                addClass([args.element.childNodes[3]], 'e-active');\n                                break;\n                            }\n                        }\n                        alignEle = alignEle.parentElement;\n                    }\n                    //image preselect\n                    var closestNode = startNode.closest('img');\n                    var imageEle = closestNode ? closestNode : startNode.querySelector('img');\n                    if (args.items[0].command === 'Images') {\n                        if (!isNOU(imageEle)) {\n                            var index = void 0;\n                            if (imageEle.classList.contains('e-imgleft') || imageEle.classList.contains('e-imginline')) {\n                                index = 0;\n                            }\n                            else if (imageEle.classList.contains('e-imgcenter') || imageEle.classList.contains('e-imgbreak')) {\n                                index = 1;\n                            }\n                            else if (imageEle.classList.contains('e-imgright')) {\n                                index = 2;\n                            }\n                            if (!isNOU(args.element.childNodes[index])) {\n                                addClass([args.element.childNodes[index]], 'e-active');\n                            }\n                        }\n                    }\n                    //Formats preselect\n                    if (args.items[0].command === 'Formats' || args.items[0].command === 'Font') {\n                        for (var index = 0; index < args.element.childNodes.length; index++) {\n                            var divNode = _this.parent.createElement('div');\n                            divNode.innerHTML = dropDown.content.trim();\n                            if (divNode.textContent.trim() !== ''\n                                && args.element.childNodes[index].textContent.trim() === divNode.textContent.trim()) {\n                                if (!args.element.childNodes[index].classList.contains('e-active')) {\n                                    addClass([args.element.childNodes[index]], 'e-active');\n                                }\n                            }\n                            else {\n                                removeClass([args.element.childNodes[index]], 'e-active');\n                            }\n                        }\n                    }\n                }\n                proxy.parent.notify(events.beforeDropDownOpen, args);\n            },\n            close: this.dropDownClose.bind(this),\n            open: this.dropDownOpen.bind(this),\n            beforeItemRender: this.beforeDropDownItemRender.bind(this)\n        });\n        dropDown.isStringTemplate = true;\n        dropDown.createElement = proxy.parent.createElement;\n        dropDown.appendTo(args.element);\n        args.element.tabIndex = -1;\n        var popupElement = document.getElementById(dropDown.element.id + '-popup');\n        popupElement.setAttribute('aria-owns', this.parent.getID());\n        return dropDown;\n    };\n    /**\n     * renderListDropDown method\n     *\n     * @param {IDropDownModel} args - specifies the the arguments.\n     * @returns {void}\n     * @hidden\n\n     */\n    ToolbarRenderer.prototype.renderListDropDown = function (args) {\n        // eslint-disable-next-line\n        var proxy = this;\n        var css = CLS_RTE_ELEMENTS + ' ' + CLS_TB_BTN + ((this.parent.inlineMode) ? (' ' + CLS_INLINE_DROPDOWN) : '');\n        css += (' ' + ((args.itemName === 'NumberFormatList') ? CLS_NUMBERFORMATLIST_TB_BTN : CLS_BULLETFORMATLIST_TB_BTN));\n        var content = proxy.parent.createElement('span', { className: CLS_LIST_PRIMARY_CONTENT });\n        var inlineEle = proxy.parent.createElement('span', { className: args.cssClass });\n        content.appendChild(inlineEle);\n        var dropDown = new DropDownButton({\n            items: args.items,\n            cssClass: css,\n            content: args.content,\n            enablePersistence: this.parent.enablePersistence,\n            enableRtl: this.parent.enableRtl,\n            select: this.dropDownSelected.bind(this),\n            beforeOpen: function (args) {\n                if (proxy.parent.readonly || !proxy.parent.enabled) {\n                    args.cancel = true;\n                    return;\n                }\n                proxy.parent.notify(events.selectionRestore, {});\n                var element = (args.event) ? args.event.target : null;\n                proxy.currentElement = dropDown.element;\n                proxy.currentDropdown = dropDown;\n                if (args.event && args.event.type === 'click' && (element.classList.contains(CLS_LIST_PRIMARY_CONTENT)\n                    || element.parentElement.classList.contains(CLS_LIST_PRIMARY_CONTENT))) {\n                    args.cancel = true;\n                    return;\n                }\n                proxy.parent.notify(events.beforeDropDownOpen, args);\n            },\n            close: this.dropDownClose.bind(this),\n            open: this.dropDownOpen.bind(this),\n            beforeItemRender: this.beforeDropDownItemRender.bind(this)\n        });\n        dropDown.isStringTemplate = true;\n        dropDown.createElement = proxy.parent.createElement;\n        dropDown.appendTo(args.element);\n        args.element.tabIndex = -1;\n        args.element.setAttribute('role', 'button');\n        var popupElement = document.getElementById(dropDown.element.id + '-popup');\n        popupElement.setAttribute('aria-owns', this.parent.getID());\n        if (args.element.childElementCount === 1) {\n            dropDown.element.insertBefore(content, dropDown.element.querySelector('.e-caret'));\n        }\n        args.element.tabIndex = -1;\n        dropDown.element.removeAttribute('type');\n        dropDown.element.onmousedown = function () {\n            proxy.parent.notify(events.selectionSave, {});\n        };\n        dropDown.element.onkeydown = function () {\n            proxy.parent.notify(events.selectionSave, {});\n        };\n        return dropDown;\n    };\n    ToolbarRenderer.prototype.paletteSelection = function (dropDownArgs, currentElement) {\n        var ele = dropDownArgs.element.querySelector('.e-control.e-colorpicker');\n        var colorbox = [].slice.call(selectAll('.e-tile', ele.parentElement));\n        removeClass(colorbox, 'e-selected');\n        var style = currentElement.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor;\n        (colorbox.filter(function (colorbox) {\n            if (colorbox.style.backgroundColor === style) {\n                addClass([colorbox], 'e-selected');\n            }\n        }));\n    };\n    /**\n     * renderColorPickerDropDown method\n     *\n     * @param {IColorPickerModel} args - specifies the arguments.\n     * @param {string} item - specifies the item.\n     * @param {ColorPicker} colorPicker - specifies the colorpicker.\n     * @param {string} defaultColor -specifies the defaultColor.\n     * @returns {void}\n     * @hidden\n\n     */\n    ToolbarRenderer.prototype.renderColorPickerDropDown = function (args, item, colorPicker, defaultColor) {\n        var _this = this;\n        // eslint-disable-next-line\n        var proxy = this;\n        var css = CLS_RTE_ELEMENTS + ' ' + CLS_TB_BTN + ((this.parent.inlineMode) ? (' ' + CLS_INLINE_DROPDOWN) : '');\n        css += (' ' + ((item === 'backgroundcolor') ? CLS_BACKGROUND_COLOR_DROPDOWN : CLS_FONT_COLOR_DROPDOWN));\n        css += this.parent.getCssClass(true);\n        var content = proxy.parent.createElement('span', { className: CLS_COLOR_CONTENT });\n        var inlineEle = proxy.parent.createElement('span', { className: args.cssClass });\n        var range;\n        var initialBackgroundColor = (isNullOrUndefined(defaultColor)) ? proxy.parent.backgroundColor.default : defaultColor;\n        inlineEle.style.borderBottomColor = (item === 'backgroundcolor') ?\n            initialBackgroundColor : proxy.parent.fontColor.default;\n        content.appendChild(inlineEle);\n        var dropDown = new DropDownButton({\n            target: colorPicker.element.parentElement, cssClass: css,\n            enablePersistence: this.parent.enablePersistence, enableRtl: this.parent.enableRtl,\n            beforeOpen: function (dropDownArgs) {\n                colorPicker.inline = true;\n                colorPicker.dataBind();\n                if (proxy.parent.readonly || !proxy.parent.enabled) {\n                    dropDownArgs.cancel = true;\n                    return;\n                }\n                var element = (dropDownArgs.event) ? dropDownArgs.event.target : null;\n                proxy.currentElement = dropDown.element;\n                proxy.currentDropdown = dropDown;\n                proxy.paletteSelection(dropDownArgs, proxy.currentElement);\n                if (dropDownArgs.event && dropDownArgs.event.type === 'click' && (element.classList.contains(CLS_COLOR_CONTENT)\n                    || element.parentElement.classList.contains(CLS_COLOR_CONTENT))) {\n                    dropDownArgs.cancel = true;\n                    var colorpickerValue = element.classList.contains(CLS_RTE_ELEMENTS) ? element.style.borderBottomColor :\n                        element.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor;\n                    proxy.parent.notify(events.selectionRestore, {});\n                    range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.parent.contentModule.getDocument());\n                    var parentNode = range.startContainer.parentNode;\n                    var closestElement = closest(range.startContainer.parentNode, 'table');\n                    if ((range.startContainer.nodeName === 'TD' || range.startContainer.nodeName === 'TH' ||\n                        (closest(range.startContainer.parentNode, 'td,th')) ||\n                        (proxy.parent.iframeSettings.enable && !hasClass(parentNode.ownerDocument.querySelector('body'), 'e-lib')))\n                        && range.collapsed && args.subCommand === 'BackgroundColor' && closest(closestElement, '.' + classes.CLS_RTE)) {\n                        proxy.parent.notify(events.tableColorPickerChanged, {\n                            item: { command: args.command, subCommand: args.subCommand,\n                                value: colorpickerValue }\n                        });\n                    }\n                    else {\n                        proxy.parent.notify(events.colorPickerChanged, { item: { command: args.command, subCommand: args.subCommand,\n                                value: colorpickerValue }\n                        });\n                    }\n                    return;\n                }\n                else {\n                    var ele = dropDownArgs.element.querySelector('.e-control.e-colorpicker');\n                    var inst = getInstance(ele, ColorPicker);\n                    inst.showButtons = (dropDownArgs.element.querySelector('.e-color-palette')) ? false : true;\n                    inst.dataBind();\n                }\n                dropDownArgs.element.onclick = function (args) {\n                    if (args.target.classList.contains('e-cancel')) {\n                        dropDown.toggle();\n                    }\n                };\n            },\n            open: function (dropDownArgs) {\n                _this.setColorPickerContentWidth(colorPicker);\n                var focusEle;\n                var ele = dropDownArgs.element.querySelector('.e-control.e-colorpicker');\n                if (dropDownArgs.element.querySelector('.e-color-palette')) {\n                    focusEle = ele.parentElement.querySelector('.e-palette');\n                }\n                else {\n                    focusEle = ele.parentElement.querySelector('e-handler');\n                }\n                if (focusEle) {\n                    focusEle.focus();\n                }\n                _this.pickerRefresh(dropDownArgs);\n            },\n            beforeClose: function (dropDownArgs) {\n                var element = (dropDownArgs.event) ? dropDownArgs.event.target : null;\n                if (dropDownArgs.event && dropDownArgs.event.type === 'click' && (element.classList.contains(CLS_COLOR_CONTENT)\n                    || element.parentElement.classList.contains(CLS_COLOR_CONTENT))) {\n                    var colorpickerValue = element.classList.contains(CLS_RTE_ELEMENTS) ? element.style.borderBottomColor :\n                        element.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor;\n                    range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.parent.contentModule.getDocument());\n                    if ((range.startContainer.nodeName === 'TD' || range.startContainer.nodeName === 'TH' ||\n                        closest(range.startContainer.parentNode, 'td,th')) && range.collapsed) {\n                        proxy.parent.notify(events.tableColorPickerChanged, { item: {\n                                command: args.command, subCommand: args.subCommand,\n                                value: colorpickerValue\n                            }\n                        });\n                    }\n                    else {\n                        proxy.parent.notify(events.colorPickerChanged, { item: { command: args.command, subCommand: args.subCommand,\n                                value: colorpickerValue }\n                        });\n                    }\n                    return;\n                }\n            },\n            close: function (dropDownArgs) {\n                proxy.parent.notify(events.selectionRestore, {});\n            }\n        });\n        dropDown.isStringTemplate = true;\n        dropDown.createElement = proxy.parent.createElement;\n        args.element.setAttribute('role', 'button');\n        dropDown.appendTo(args.element);\n        var popupElement = document.getElementById(dropDown.element.id + '-popup');\n        popupElement.setAttribute('aria-owns', this.parent.getID());\n        dropDown.element.insertBefore(content, dropDown.element.querySelector('.e-caret'));\n        args.element.tabIndex = -1;\n        dropDown.element.removeAttribute('type');\n        dropDown.element.onmousedown = function () {\n            proxy.parent.notify(events.selectionSave, {});\n        };\n        dropDown.element.onkeydown = function () {\n            proxy.parent.notify(events.selectionSave, {});\n        };\n        return dropDown;\n    };\n    ToolbarRenderer.prototype.pickerRefresh = function (dropDownArgs) {\n        if (this.parent.backgroundColor.mode === 'Picker') {\n            var popupElem = dropDownArgs.element.parentElement;\n            popupElem.style.width = (popupElem.offsetWidth + 5).toString() + 'px';\n            getInstance(popupElem, Popup).refreshPosition(popupElem);\n            popupElem.style.width = (popupElem.offsetWidth - 5).toString() + 'px';\n        }\n    };\n    ToolbarRenderer.prototype.setColorPickerContentWidth = function (colorPicker) {\n        var colorPickerContent = colorPicker.element.nextSibling;\n        if (colorPickerContent.style.width === '0px') {\n            colorPickerContent.style.width = '';\n            var borderWidth = parseInt(getComputedStyle(colorPickerContent).borderBottomWidth, 10);\n            colorPickerContent.style.width = formatUnit(colorPickerContent.children[0].offsetWidth\n                + borderWidth + borderWidth);\n        }\n    };\n    /**\n     * renderColorPicker method\n     *\n     * @param {IColorPickerModel} args - specifies the arguments\n     * @param {string} item - specifies the string values\n     * @returns {void}\n     * @hidden\n\n     */\n    ToolbarRenderer.prototype.renderColorPicker = function (args, item) {\n        var _this = this;\n        // eslint-disable-next-line\n        var proxy = this;\n        var value;\n        var colorPicker = new ColorPicker({\n            enablePersistence: this.parent.enablePersistence,\n            enableRtl: this.parent.enableRtl,\n            inline: false,\n            value: '#fff',\n            created: function () {\n                var value = (item === 'backgroundcolor') ? proxy.parent.backgroundColor.default : proxy.parent.fontColor.default;\n                colorPicker.setProperties({ value: value });\n            },\n            mode: ((item === 'backgroundcolor') ? proxy.parent.backgroundColor.mode : proxy.parent.fontColor.mode),\n            modeSwitcher: ((item === 'backgroundcolor') ? proxy.parent.backgroundColor.modeSwitcher : proxy.parent.fontColor.modeSwitcher),\n            beforeTileRender: function (args) {\n                args.element.classList.add(CLS_COLOR_PALETTE);\n                args.element.classList.add(CLS_CUSTOM_TILE);\n                if (!isNullOrUndefined(_this.parent.cssClass)) {\n                    var allClassName = _this.parent.getCssClass().split(' ');\n                    for (var i = 0; i < allClassName.length; i++) {\n                        if (allClassName[i].trim() !== '') {\n                            args.element.classList.add(allClassName[i]);\n                        }\n                    }\n                }\n                if (args.value === '') {\n                    args.element.classList.add(CLS_NOCOLOR_ITEM);\n                }\n            },\n            change: function (colorPickerArgs) {\n                var colorpickerValue = colorPickerArgs.currentValue.rgba;\n                colorPickerArgs.item = {\n                    command: args.command,\n                    subCommand: args.subCommand,\n                    value: colorpickerValue\n                };\n                proxy.parent.notify(events.selectionRestore, {});\n                proxy.currentElement.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor = colorpickerValue;\n                var range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.parent.contentModule.getDocument());\n                var closestElement = closest(range.startContainer.parentNode, 'table');\n                if ((range.startContainer.nodeName === 'TD' || range.startContainer.nodeName === 'TH' || range.startContainer.nodeName === 'BODY' ||\n                    closest(range.startContainer.parentNode, 'td,th')) && range.collapsed && args.subCommand === 'BackgroundColor' && closest(closestElement, '.' + classes.CLS_RTE)) {\n                    proxy.parent.notify(events.tableColorPickerChanged, colorPickerArgs);\n                }\n                else {\n                    proxy.parent.notify(events.colorPickerChanged, colorPickerArgs);\n                }\n                proxy.currentDropdown.toggle();\n            },\n            beforeModeSwitch: function (args) {\n                value = colorPicker.value;\n                if (value === '') {\n                    colorPicker.setProperties({ value: ((args.mode === 'Picker') ? '#008000ff' : '') }, true);\n                }\n                colorPicker.showButtons = args.mode === 'Palette' ? false : true;\n            }\n        });\n        colorPicker.isStringTemplate = true;\n        colorPicker.columns = (item === 'backgroundcolor') ? this.parent.backgroundColor.columns : this.parent.fontColor.columns;\n        colorPicker.presetColors = (item === 'backgroundcolor') ? this.parent.backgroundColor.colorCode :\n            this.parent.fontColor.colorCode;\n        colorPicker.cssClass = ((item === 'backgroundcolor') ? CLS_BACKGROUND_COLOR_PICKER : CLS_FONT_COLOR_PICKER) + ' ' + args.cssClass;\n        colorPicker.createElement = this.parent.createElement;\n        colorPicker.appendTo(document.getElementById(args.target));\n        return colorPicker;\n    };\n    /**\n     * The function is used to render Rich Text Editor toolbar\n     *\n     * @returns {void}\n     * @hidden\n\n     */\n    ToolbarRenderer.prototype.renderPanel = function () {\n        this.getPanel().classList.add(CLS_TOOLBAR);\n    };\n    /**\n     * Get the toolbar element of RichTextEditor\n     *\n     * @returns {Element} - specifies the element.\n     * @hidden\n\n     */\n    ToolbarRenderer.prototype.getPanel = function () {\n        return this.toolbarPanel;\n    };\n    /**\n     * Set the toolbar element of RichTextEditor\n     *\n     * @returns {void}\n     * @param  {Element} panel - specifies the element.\n     * @hidden\n\n     */\n    ToolbarRenderer.prototype.setPanel = function (panel) {\n        this.toolbarPanel = panel;\n    };\n    return ToolbarRenderer;\n}());\nexport { ToolbarRenderer };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}