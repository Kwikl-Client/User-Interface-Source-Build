{"ast":null,"code":"import { addClass, Browser, EventHandler, detach, removeClass, select, selectAll, KeyboardEvents } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined as isNOU, closest, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, extend } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport * as classes from '../base/classes';\nimport { RenderType, ToolbarType } from '../base/enum';\nimport { setToolbarStatus, updateUndoRedoStatus, getTBarItemsIndex, getCollection, toObjectLowerCase, isIDevice, getTooltipText } from '../base/util';\nimport { updateDropDownFontFormatLocale } from '../base/util';\nimport * as model from '../models/items';\nimport { ToolbarRenderer } from '../renderer/toolbar-renderer';\nimport { BaseToolbar } from './base-toolbar';\nimport { DropDownButtons } from './dropdown-buttons';\nimport { ToolbarAction } from './toolbar-action';\n/**\n * `Toolbar` module is used to handle Toolbar actions.\n */\nvar Toolbar = /** @class */function () {\n  function Toolbar(parent, serviceLocator) {\n    this.tools = {};\n    this.parent = parent;\n    this.isToolbar = false;\n    this.locator = serviceLocator;\n    this.isTransformChild = false;\n    this.renderFactory = this.locator.getService('rendererFactory');\n    model.updateDropDownLocale(this.parent);\n    updateDropDownFontFormatLocale(this.parent);\n    this.renderFactory.addRenderer(RenderType.Toolbar, new ToolbarRenderer(this.parent, this.locator));\n    this.toolbarRenderer = this.renderFactory.getRenderer(RenderType.Toolbar);\n    this.baseToolbar = new BaseToolbar(this.parent, this.locator);\n    this.addEventListener();\n    if (this.parent.toolbarSettings && Object.keys(this.parent.toolbarSettings.itemConfigs).length > 0) {\n      extend(this.tools, model.tools, toObjectLowerCase(this.parent.toolbarSettings.itemConfigs), true);\n    } else {\n      this.tools = model.tools;\n    }\n  }\n  Toolbar.prototype.initializeInstance = function () {\n    this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n    this.editableElement = this.contentRenderer.getEditPanel();\n    this.editPanel = this.contentRenderer.getPanel();\n  };\n  Toolbar.prototype.toolbarBindEvent = function () {\n    if (!this.parent.inlineMode.enable) {\n      this.keyBoardModule = new KeyboardEvents(this.getToolbarElement(), {\n        keyAction: this.toolBarKeyDown.bind(this),\n        keyConfigs: this.parent.formatter.keyConfig,\n        eventName: 'keydown'\n      });\n    }\n  };\n  Toolbar.prototype.toolBarKeyDown = function (e) {\n    switch (e.action) {\n      case 'escape':\n        this.parent.contentModule.getEditPanel().focus();\n        break;\n      case 'enter':\n        if (e.target.classList.contains('e-hor-nav')) {\n          this.adjustContentHeight(e.target, true);\n        }\n    }\n  };\n  Toolbar.prototype.createToolbarElement = function () {\n    this.tbElement = this.parent.createElement('div', {\n      id: this.parent.getID() + '_toolbar'\n    });\n    if (!Browser.isDevice && this.parent.inlineMode.enable && isIDevice()) {\n      return;\n    } else {\n      if (!this.parent.inlineMode.enable) {\n        this.tbWrapper = this.parent.createElement('div', {\n          id: this.parent.getID() + '_toolbar_wrapper',\n          innerHTML: this.tbElement.outerHTML,\n          className: classes.CLS_TB_WRAP\n        });\n        this.tbElement = this.tbWrapper.firstElementChild;\n        this.parent.element.insertBefore(this.tbWrapper, this.editPanel);\n      } else {\n        this.parent.element.insertBefore(this.tbElement, this.editPanel);\n      }\n    }\n  };\n  Toolbar.prototype.getToolbarMode = function () {\n    var tbMode;\n    switch (this.parent.toolbarSettings.type) {\n      case ToolbarType.Expand:\n        tbMode = 'Extended';\n        break;\n      case ToolbarType.Scrollable:\n        tbMode = 'Scrollable';\n        break;\n      default:\n        tbMode = 'MultiRow';\n    }\n    if (isIDevice() && this.parent.toolbarSettings.type === ToolbarType.Expand) {\n      tbMode = ToolbarType.Scrollable;\n    }\n    return tbMode;\n  };\n  Toolbar.prototype.checkToolbarResponsive = function (ele) {\n    if (!Browser.isDevice || isIDevice()) {\n      return false;\n    }\n    var tBarMode;\n    if (this.parent.toolbarSettings.type === ToolbarType.Expand) {\n      tBarMode = ToolbarType.MultiRow;\n    } else {\n      tBarMode = this.parent.toolbarSettings.type;\n    }\n    this.baseToolbar.render({\n      container: this.parent.inlineMode.enable ? 'quick' : 'toolbar',\n      items: this.parent.toolbarSettings.items,\n      mode: tBarMode,\n      target: ele,\n      cssClass: this.parent.getCssClass()\n    });\n    if (this.parent.toolbarSettings.type === ToolbarType.Expand) {\n      addClass([ele], ['e-rte-tb-mobile']);\n      if (this.parent.inlineMode.enable) {\n        this.addFixedTBarClass();\n      } else {\n        addClass([ele], [classes.CLS_TB_STATIC]);\n      }\n    }\n    this.wireEvents();\n    this.dropDownModule.renderDropDowns({\n      container: ele,\n      containerType: this.parent.inlineMode.enable ? 'quick' : 'toolbar',\n      items: this.parent.toolbarSettings.items\n    });\n    this.parent.notify(events.renderColorPicker, {\n      container: this.tbElement,\n      containerType: this.parent.inlineMode.enable ? 'quick' : 'toolbar',\n      items: this.parent.toolbarSettings.items\n    });\n    return true;\n  };\n  Toolbar.prototype.checkIsTransformChild = function () {\n    this.isTransformChild = false;\n    var transformElements = selectAll('[style*=\"transform\"]', document);\n    for (var i = 0; i < transformElements.length; i++) {\n      // eslint-disable-next-line max-len\n      if (!isNullOrUndefined(transformElements[i].contains) && transformElements[i].contains(this.parent.element)) {\n        this.isTransformChild = true;\n        break;\n      }\n    }\n  };\n  Toolbar.prototype.toggleFloatClass = function (e) {\n    var topValue;\n    var isBody = false;\n    var isFloat = false;\n    var scrollParent;\n    var floatOffset = this.parent.floatingToolbarOffset;\n    if (e && this.parent.iframeSettings.enable && this.parent.inputElement.ownerDocument === e.target) {\n      scrollParent = e.target.body;\n    } else if (e && e.target !== document) {\n      scrollParent = e.target;\n    } else {\n      isBody = true;\n      scrollParent = document.body;\n    }\n    var tbHeight = this.getToolbarHeight() + this.getExpandTBarPopHeight();\n    if (this.isTransformChild) {\n      topValue = 0;\n      var scrollParentRelativeTop = 0;\n      var trgHeight = this.parent.element.offsetHeight;\n      if (isBody) {\n        var bodyStyle = window.getComputedStyle(scrollParent);\n        scrollParentRelativeTop = parseFloat(bodyStyle.marginTop.split('px')[0]) + parseFloat(bodyStyle.paddingTop.split('px')[0]);\n      }\n      var targetTop = this.parent.element.getBoundingClientRect().top;\n      var scrollParentYOffset = Browser.isMSPointer && isBody ? window.pageYOffset : scrollParent.parentElement.scrollTop;\n      var scrollParentRect = scrollParent.getBoundingClientRect();\n      var scrollParentTop = !isBody ? scrollParentRect.top : scrollParentRect.top + scrollParentYOffset;\n      var outOfRange = targetTop - (!isBody ? scrollParentTop : 0) + trgHeight > tbHeight + floatOffset ? false : true;\n      if (targetTop > scrollParentTop + floatOffset || targetTop < -trgHeight || (targetTop < 0 ? outOfRange : false)) {\n        isFloat = false;\n        removeClass([this.tbElement], [classes.CLS_TB_ABS_FLOAT]);\n      } else if (targetTop < scrollParentTop + floatOffset) {\n        if (targetTop < 0) {\n          topValue = -targetTop + scrollParentTop;\n        } else {\n          topValue = scrollParentTop - targetTop;\n        }\n        topValue = isBody ? topValue - scrollParentRelativeTop : topValue;\n        addClass([this.tbElement], [classes.CLS_TB_ABS_FLOAT]);\n        isFloat = true;\n      }\n    } else {\n      var parent_1 = this.parent.element.getBoundingClientRect();\n      if (window.innerHeight < parent_1.top) {\n        return;\n      }\n      topValue = e && e.target !== document ? scrollParent.getBoundingClientRect().top : 0;\n      if (parent_1.bottom < floatOffset + tbHeight + topValue || parent_1.bottom < 0 || parent_1.top > floatOffset + topValue) {\n        isFloat = false;\n      } else if (parent_1.top < floatOffset || parent_1.top < floatOffset + topValue) {\n        isFloat = true;\n      }\n    }\n    if (!isFloat) {\n      removeClass([this.tbElement], [classes.CLS_TB_FLOAT]);\n      setStyleAttribute(this.tbElement, {\n        top: 0 + 'px',\n        width: '100%'\n      });\n    } else {\n      addClass([this.tbElement], [classes.CLS_TB_FLOAT]);\n      setStyleAttribute(this.tbElement, {\n        width: this.parent.element.offsetWidth + 'px',\n        top: floatOffset + topValue + 'px'\n      });\n    }\n  };\n  Toolbar.prototype.renderToolbar = function () {\n    this.initializeInstance();\n    this.createToolbarElement();\n    if (this.checkToolbarResponsive(this.tbElement)) {\n      return;\n    }\n    if (this.parent.inlineMode.enable) {\n      this.parent.notify(events.renderInlineToolbar, {});\n    } else {\n      this.baseToolbar.render({\n        container: 'toolbar',\n        items: this.parent.toolbarSettings.items,\n        mode: this.getToolbarMode(),\n        target: this.tbElement,\n        cssClass: this.parent.getCssClass()\n      });\n      if (!this.parent.inlineMode.enable) {\n        if (this.parent.toolbarSettings.enableFloating) {\n          this.checkIsTransformChild();\n          this.toggleFloatClass();\n        }\n        addClass([this.parent.element], [classes.CLS_RTE_TB_ENABLED]);\n        if (this.parent.toolbarSettings.type === ToolbarType.Expand) {\n          addClass([this.parent.element], [classes.CLS_RTE_EXPAND_TB]);\n        }\n      }\n    }\n    this.wireEvents();\n    if (this.parent.inlineMode.enable && !isIDevice()) {\n      this.addFixedTBarClass();\n    }\n    if (!this.parent.inlineMode.enable) {\n      this.dropDownModule.renderDropDowns({\n        container: this.tbElement,\n        containerType: 'toolbar',\n        items: this.parent.toolbarSettings.items\n      });\n      this.parent.notify(events.renderColorPicker, {\n        container: this.tbElement,\n        containerType: 'toolbar',\n        items: this.parent.toolbarSettings.items\n      });\n      this.refreshToolbarOverflow();\n    }\n    var divEle = this.parent.element.querySelector('.' + classes.CLS_RTE_SOURCE_CODE_TXTAREA);\n    var iframeEle = this.parent.element.querySelector('.e-source-content');\n    if (!this.parent.iframeSettings.enable && !isNOU(divEle) && divEle.style.display === 'block' || this.parent.iframeSettings.enable && !isNOU(iframeEle) && iframeEle.style.display === 'block') {\n      this.parent.notify(events.updateToolbarItem, {\n        targetItem: 'SourceCode',\n        updateItem: 'Preview',\n        baseToolbar: this.parent.getBaseToolbarObject()\n      });\n      this.parent.disableToolbarItem(this.parent.toolbarSettings.items);\n    }\n  };\n  /**\n   * addFixedTBarClass method\n   *\n   * @returns {void}\n   * @hidden\n    */\n  Toolbar.prototype.addFixedTBarClass = function () {\n    addClass([this.tbElement], [classes.CLS_TB_FIXED]);\n  };\n  /**\n   * removeFixedTBarClass method\n   *\n   * @returns {void}\n   * @hidden\n    */\n  Toolbar.prototype.removeFixedTBarClass = function () {\n    removeClass([this.tbElement], [classes.CLS_TB_FIXED]);\n  };\n  Toolbar.prototype.showFixedTBar = function () {\n    addClass([this.tbElement], [classes.CLS_SHOW]);\n    if (Browser.isIos) {\n      addClass([this.tbElement], [classes.CLS_TB_IOS_FIX]);\n    }\n  };\n  Toolbar.prototype.hideFixedTBar = function () {\n    // eslint-disable-next-line\n    !this.isToolbar ? removeClass([this.tbElement], [classes.CLS_SHOW, classes.CLS_TB_IOS_FIX]) : this.isToolbar = false;\n  };\n  /**\n   * updateItem method\n   *\n   * @param {IUpdateItemsModel} args - specifies the arguments.\n   * @returns {void}\n   * @hidden\n    */\n  Toolbar.prototype.updateItem = function (args) {\n    var item = this.tools[args.updateItem.toLocaleLowerCase()];\n    if (this.parent.locale !== 'en-US') {\n      item.tooltip = getTooltipText(args.updateItem.toLocaleLowerCase(), this.locator);\n    }\n    var trgItem = this.tools[args.targetItem.toLocaleLowerCase()];\n    var index = getTBarItemsIndex(getCollection(trgItem.subCommand), args.baseToolbar.toolbarObj.items)[0];\n    if (!isNOU(index)) {\n      var prefixId = this.parent.inlineMode.enable ? '_quick_' : '_toolbar_';\n      args.baseToolbar.toolbarObj.items[index].id = this.parent.getID() + prefixId + item.id;\n      args.baseToolbar.toolbarObj.items[index].prefixIcon = item.icon;\n      args.baseToolbar.toolbarObj.items[index].tooltipText = item.tooltip;\n      args.baseToolbar.toolbarObj.items[index].subCommand = item.subCommand;\n      args.baseToolbar.toolbarObj.dataBind();\n      args.baseToolbar.toolbarObj.refreshOverflow();\n    } else {\n      this.addTBarItem(args, 0);\n    }\n  };\n  Toolbar.prototype.updateToolbarStatus = function (args) {\n    if (!this.tbElement || this.parent.inlineMode.enable && (isIDevice() || !Browser.isDevice)) {\n      return;\n    }\n    var options = {\n      args: args,\n      dropDownModule: this.dropDownModule,\n      parent: this.parent,\n      tbElements: selectAll('.' + classes.CLS_TB_ITEM, this.tbElement),\n      tbItems: this.baseToolbar.toolbarObj.items\n    };\n    setToolbarStatus(options, this.parent.inlineMode.enable ? true : false, this.parent);\n  };\n  Toolbar.prototype.fullScreen = function (e) {\n    this.parent.fullScreenModule.showFullScreen(e);\n  };\n  Toolbar.prototype.hideScreen = function (e) {\n    this.parent.fullScreenModule.hideFullScreen(e);\n  };\n  /**\n   * getBaseToolbar method\n   *\n   * @returns {void}\n   * @hidden\n    */\n  Toolbar.prototype.getBaseToolbar = function () {\n    return this.baseToolbar;\n  };\n  /**\n   * addTBarItem method\n   *\n   * @param {IUpdateItemsModel} args - specifies the arguments.\n   * @param {number} index - specifies the index value.\n   * @returns {void}\n   * @hidden\n    */\n  Toolbar.prototype.addTBarItem = function (args, index) {\n    args.baseToolbar.toolbarObj.addItems([args.baseToolbar.getObject(args.updateItem, 'toolbar')], index);\n  };\n  /**\n   * enableTBarItems method\n   *\n   * @param {BaseToolbar} baseToolbar - specifies the toolbar.\n   * @param {string} items - specifies the string value.\n   * @param {boolean} isEnable - specifies the boolean value.\n   * @param {boolean} muteToolbarUpdate - specifies the toolbar.\n   * @returns {void}\n   * @hidden\n    */\n  Toolbar.prototype.enableTBarItems = function (baseToolbar, items, isEnable, muteToolbarUpdate) {\n    var trgItems = getTBarItemsIndex(getCollection(items), baseToolbar.toolbarObj.items);\n    this.tbItems = selectAll('.' + classes.CLS_TB_ITEM, baseToolbar.toolbarObj.element);\n    for (var i = 0; i < trgItems.length; i++) {\n      var item = this.tbItems[trgItems[i]];\n      if (item) {\n        baseToolbar.toolbarObj.enableItems(item, isEnable);\n      }\n    }\n    if (!select('.' + classes.CLS_RTE_SOURCE_CODE_TXTAREA, this.parent.element) && !muteToolbarUpdate) {\n      updateUndoRedoStatus(baseToolbar, this.parent.formatter.editorManager.undoRedoManager.getUndoStatus());\n    }\n  };\n  /**\n   * removeTBarItems method\n   *\n   * @param {string} items - specifies the string value.\n   * @returns {void}\n   * @hidden\n    */\n  Toolbar.prototype.removeTBarItems = function (items) {\n    if (isNullOrUndefined(this.baseToolbar.toolbarObj)) {\n      this.baseToolbar = this.parent.getBaseToolbarObject();\n    }\n    var trgItems = getTBarItemsIndex(getCollection(items), this.baseToolbar.toolbarObj.items);\n    this.tbItems = this.parent.inlineMode.enable ? selectAll('.' + classes.CLS_TB_ITEM, this.baseToolbar.toolbarObj.element) : selectAll('.' + classes.CLS_TB_ITEM, this.parent.element);\n    for (var i = 0; i < trgItems.length; i++) {\n      this.baseToolbar.toolbarObj.removeItems(this.tbItems[trgItems[i]]);\n    }\n  };\n  /**\n   * getExpandTBarPopHeight method\n   *\n   * @returns {void}\n   * @hidden\n    */\n  Toolbar.prototype.getExpandTBarPopHeight = function () {\n    var popHeight = 0;\n    if (this.parent.toolbarSettings.type === ToolbarType.Expand && this.tbElement.classList.contains('e-extended-toolbar')) {\n      var expandPopup = select('.e-toolbar-extended', this.tbElement);\n      if (expandPopup && this.tbElement.classList.contains('e-expand-open') || expandPopup && expandPopup.classList.contains('e-popup-open')) {\n        addClass([expandPopup], [classes.CLS_VISIBLE]);\n        popHeight = popHeight + expandPopup.offsetHeight;\n        removeClass([expandPopup], [classes.CLS_VISIBLE]);\n      } else {\n        removeClass([this.tbElement], [classes.CLS_EXPAND_OPEN]);\n      }\n    }\n    return popHeight;\n  };\n  /**\n   * getToolbarHeight method\n   *\n   * @returns {void}\n   * @hidden\n    */\n  Toolbar.prototype.getToolbarHeight = function () {\n    return this.tbElement.offsetHeight;\n  };\n  /**\n   * getToolbarElement method\n   *\n   * @returns {void}\n   * @hidden\n    */\n  Toolbar.prototype.getToolbarElement = function () {\n    return select('.' + classes.CLS_TOOLBAR, this.parent.element);\n  };\n  /**\n   * refreshToolbarOverflow method\n   *\n   * @returns {void}\n   * @hidden\n    */\n  Toolbar.prototype.refreshToolbarOverflow = function () {\n    this.parent.element.classList.remove(classes.CLS_RTL);\n    this.baseToolbar.toolbarObj.refreshOverflow();\n    if (this.parent.enableRtl) {\n      this.parent.element.classList.add(classes.CLS_RTL);\n    }\n  };\n  Toolbar.prototype.isToolbarDestroyed = function () {\n    return this.baseToolbar.toolbarObj && !this.baseToolbar.toolbarObj.isDestroyed;\n  };\n  Toolbar.prototype.destroyToolbar = function () {\n    if (this.isToolbarDestroyed()) {\n      this.parent.unWireScrollElementsEvents();\n      this.unWireEvents();\n      this.parent.notify(events.destroyColorPicker, {});\n      this.dropDownModule.destroyDropDowns();\n      this.baseToolbar.toolbarObj.destroy();\n      this.removeEventListener();\n      removeClass([this.parent.element], [classes.CLS_RTE_TB_ENABLED]);\n      removeClass([this.parent.element], [classes.CLS_RTE_EXPAND_TB]);\n      var tbWrapper = select('.' + classes.CLS_TB_WRAP, this.parent.element);\n      var tbElement = select('.' + classes.CLS_TOOLBAR, this.parent.element);\n      if (!isNullOrUndefined(tbWrapper)) {\n        detach(tbWrapper);\n      } else if (!isNullOrUndefined(tbElement)) {\n        detach(tbElement);\n      }\n    }\n  };\n  /**\n   * Destroys the ToolBar.\n   *\n   * @function destroy\n   * @returns {void}\n   * @hidden\n    */\n  Toolbar.prototype.destroy = function () {\n    if (isNOU(this.parent)) {\n      return;\n    }\n    if (this.isToolbarDestroyed()) {\n      this.destroyToolbar();\n      if (this.keyBoardModule) {\n        this.keyBoardModule.destroy();\n      }\n    }\n  };\n  Toolbar.prototype.moduleDestroy = function () {\n    this.parent = null;\n    this.baseToolbar.parent = null;\n    this.toolbarActionModule.parent = null;\n    this.dropDownModule.parent = null;\n  };\n  Toolbar.prototype.scrollHandler = function (e) {\n    if (!this.parent.inlineMode.enable) {\n      if (this.parent.toolbarSettings.enableFloating && this.getDOMVisibility(this.tbElement)) {\n        this.toggleFloatClass(e.args);\n      }\n    }\n  };\n  Toolbar.prototype.getDOMVisibility = function (el) {\n    if (!el.offsetParent && el.offsetWidth === 0 && el.offsetHeight === 0) {\n      return false;\n    }\n    return true;\n  };\n  Toolbar.prototype.mouseDownHandler = function () {\n    if (Browser.isDevice && this.parent.inlineMode.enable && !isIDevice()) {\n      this.showFixedTBar();\n    }\n  };\n  Toolbar.prototype.focusChangeHandler = function () {\n    if (Browser.isDevice && this.parent.inlineMode.enable && !isIDevice()) {\n      this.isToolbar = false;\n      this.hideFixedTBar();\n    }\n  };\n  Toolbar.prototype.dropDownBeforeOpenHandler = function () {\n    this.isToolbar = true;\n  };\n  // eslint-disable-next-line\n  Toolbar.prototype.tbFocusHandler = function (e) {\n    var activeElm = document.activeElement;\n    var isToolbaractive = closest(activeElm, '.e-rte-toolbar');\n    if (activeElm === this.parent.getToolbarElement() || isToolbaractive === this.parent.getToolbarElement()) {\n      var toolbarItem = this.parent.getToolbarElement().querySelectorAll('.e-expended-nav');\n      for (var i = 0; i < toolbarItem.length; i++) {\n        if (isNOU(this.parent.getToolbarElement().querySelector('.e-insert-table-btn'))) {\n          toolbarItem[i].setAttribute('tabindex', '0');\n        } else {\n          toolbarItem[i].setAttribute('tabindex', '1');\n        }\n      }\n    }\n  };\n  Toolbar.prototype.toolbarClickHandler = function (e) {\n    var trg = closest(e.originalEvent.target, '.e-hor-nav');\n    this.adjustContentHeight(trg, false);\n  };\n  Toolbar.prototype.adjustContentHeight = function (trg, isKeyboard) {\n    if (trg && this.parent.toolbarSettings.type === ToolbarType.Expand && !isNOU(trg)) {\n      var extendedTbar = this.tbElement.querySelector('.e-toolbar-extended');\n      if (!isNOU(extendedTbar)) {\n        setStyleAttribute(extendedTbar, {\n          maxHeight: '',\n          display: 'block'\n        });\n        setStyleAttribute(extendedTbar, {\n          maxHeight: extendedTbar.offsetHeight + 'px',\n          display: ''\n        });\n      }\n      var hasActiveClass = trg.classList.contains('e-nav-active');\n      var isExpand = isKeyboard ? hasActiveClass ? false : true : hasActiveClass ? true : false;\n      if (isExpand) {\n        addClass([this.tbElement], [classes.CLS_EXPAND_OPEN]);\n      } else {\n        removeClass([this.tbElement], [classes.CLS_EXPAND_OPEN]);\n      }\n      this.parent.setContentHeight('toolbar', isExpand);\n    } else if (Browser.isDevice || this.parent.inlineMode.enable) {\n      this.isToolbar = true;\n    }\n    if (isNOU(trg) && this.parent.toolbarSettings.type === ToolbarType.Expand) {\n      removeClass([this.tbElement], [classes.CLS_EXPAND_OPEN]);\n    }\n  };\n  Toolbar.prototype.wireEvents = function () {\n    if (this.parent.inlineMode.enable && isIDevice()) {\n      return;\n    }\n    EventHandler.add(this.tbElement, 'focusin', this.tbFocusHandler, this);\n  };\n  Toolbar.prototype.unWireEvents = function () {\n    EventHandler.remove(this.tbElement, 'focusin', this.tbFocusHandler);\n  };\n  Toolbar.prototype.addEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.dropDownModule = new DropDownButtons(this.parent, this.locator);\n    this.toolbarActionModule = new ToolbarAction(this.parent);\n    this.parent.on(events.initialEnd, this.renderToolbar, this);\n    this.parent.on(events.scroll, this.scrollHandler, this);\n    this.parent.on(events.bindOnEnd, this.toolbarBindEvent, this);\n    this.parent.on(events.toolbarUpdated, this.updateToolbarStatus, this);\n    this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n    this.parent.on(events.refreshBegin, this.onRefresh, this);\n    this.parent.on(events.destroy, this.destroy, this);\n    this.parent.on(events.enableFullScreen, this.fullScreen, this);\n    this.parent.on(events.disableFullScreen, this.hideScreen, this);\n    this.parent.on(events.updateToolbarItem, this.updateItem, this);\n    this.parent.on(events.beforeDropDownOpen, this.dropDownBeforeOpenHandler, this);\n    this.parent.on(events.expandPopupClick, this.parent.setContentHeight, this.parent);\n    this.parent.on(events.focusChange, this.focusChangeHandler, this);\n    this.parent.on(events.mouseDown, this.mouseDownHandler, this);\n    this.parent.on(events.sourceCodeMouseDown, this.mouseDownHandler, this);\n    this.parent.on(events.bindCssClass, this.setCssClass, this);\n    this.parent.on(events.moduleDestroy, this.moduleDestroy, this);\n    if (!this.parent.inlineMode.enable && !isIDevice()) {\n      this.parent.on(events.toolbarClick, this.toolbarClickHandler, this);\n    }\n  };\n  Toolbar.prototype.removeEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.parent.off(events.initialEnd, this.renderToolbar);\n    this.parent.off(events.scroll, this.scrollHandler);\n    this.parent.off(events.bindOnEnd, this.toolbarBindEvent);\n    this.parent.off(events.toolbarUpdated, this.updateToolbarStatus);\n    this.parent.off(events.modelChanged, this.onPropertyChanged);\n    this.parent.off(events.refreshBegin, this.onRefresh);\n    this.parent.off(events.destroy, this.destroy);\n    this.parent.off(events.enableFullScreen, this.parent.fullScreenModule.showFullScreen);\n    this.parent.off(events.disableFullScreen, this.parent.fullScreenModule.hideFullScreen);\n    this.parent.off(events.updateToolbarItem, this.updateItem);\n    this.parent.off(events.beforeDropDownOpen, this.dropDownBeforeOpenHandler);\n    this.parent.off(events.expandPopupClick, this.parent.setContentHeight);\n    this.parent.off(events.focusChange, this.focusChangeHandler);\n    this.parent.off(events.mouseDown, this.mouseDownHandler);\n    this.parent.off(events.sourceCodeMouseDown, this.mouseDownHandler);\n    this.parent.off(events.bindCssClass, this.setCssClass);\n    this.parent.off(events.moduleDestroy, this.moduleDestroy);\n    if (!this.parent.inlineMode.enable && !isIDevice()) {\n      this.parent.off(events.toolbarClick, this.toolbarClickHandler);\n    }\n  };\n  // eslint-disable-next-line @typescript-eslint/tslint/config\n  Toolbar.prototype.setCssClass = function (e) {\n    if (this.toolbarObj && e.cssClass) {\n      if (isNullOrUndefined(e.oldCssClass)) {\n        this.toolbarObj.setProperties({\n          cssClass: (this.toolbarObj.cssClass + ' ' + e.cssClass).trim()\n        });\n      } else {\n        this.toolbarObj.setProperties({\n          cssClass: (this.toolbarObj.cssClass.replace(e.oldCssClass, '').trim() + ' ' + e.cssClass).trim()\n        });\n      }\n    }\n  };\n  Toolbar.prototype.onRefresh = function () {\n    if (!this.parent.inlineMode.enable) {\n      this.refreshToolbarOverflow();\n    }\n    this.parent.setContentHeight('', true);\n  };\n  /**\n   * Called internally if any of the property value changed.\n   *\n   * @param {RichTextEditorModel} e - specifies the string value\n   * @returns {void}\n   * @hidden\n    */\n  Toolbar.prototype.onPropertyChanged = function (e) {\n    if (!isNullOrUndefined(e.newProp.inlineMode)) {\n      for (var _i = 0, _a = Object.keys(e.newProp.inlineMode); _i < _a.length; _i++) {\n        var prop = _a[_i];\n        switch (prop) {\n          case 'enable':\n            this.refreshToolbar();\n            break;\n        }\n      }\n    }\n    if (e.module !== this.getModuleName()) {\n      return;\n    }\n    this.refreshToolbar();\n  };\n  Toolbar.prototype.refreshToolbar = function () {\n    if (isNullOrUndefined(this.baseToolbar.toolbarObj)) {\n      this.baseToolbar = this.parent.getBaseToolbarObject();\n    }\n    var tbWrapper = select('.' + classes.CLS_TB_WRAP, this.parent.element);\n    var tbElement = select('.' + classes.CLS_TOOLBAR, this.parent.element);\n    if (tbElement || tbWrapper) {\n      this.destroyToolbar();\n    }\n    if (this.parent.toolbarSettings.enable) {\n      this.addEventListener();\n      this.renderToolbar();\n      this.parent.wireScrollElementsEvents();\n      if (!select('.' + classes.CLS_RTE_SOURCE_CODE_TXTAREA, this.parent.element)) {\n        updateUndoRedoStatus(this.baseToolbar, this.parent.formatter.editorManager.undoRedoManager.getUndoStatus());\n      }\n      this.parent.notify(events.dynamicModule, {});\n    }\n  };\n  /**\n   * For internal use only - Get the module name.\n   *\n   * @returns {void}\n   * @hidden\n   */\n  Toolbar.prototype.getModuleName = function () {\n    return 'toolbar';\n  };\n  return Toolbar;\n}();\nexport { Toolbar };","map":{"version":3,"names":["addClass","Browser","EventHandler","detach","removeClass","select","selectAll","KeyboardEvents","isNullOrUndefined","isNOU","closest","setStyleAttribute","extend","events","classes","RenderType","ToolbarType","setToolbarStatus","updateUndoRedoStatus","getTBarItemsIndex","getCollection","toObjectLowerCase","isIDevice","getTooltipText","updateDropDownFontFormatLocale","model","ToolbarRenderer","BaseToolbar","DropDownButtons","ToolbarAction","Toolbar","parent","serviceLocator","tools","isToolbar","locator","isTransformChild","renderFactory","getService","updateDropDownLocale","addRenderer","toolbarRenderer","getRenderer","baseToolbar","addEventListener","toolbarSettings","Object","keys","itemConfigs","length","prototype","initializeInstance","contentRenderer","Content","editableElement","getEditPanel","editPanel","getPanel","toolbarBindEvent","inlineMode","enable","keyBoardModule","getToolbarElement","keyAction","toolBarKeyDown","bind","keyConfigs","formatter","keyConfig","eventName","e","action","contentModule","focus","target","classList","contains","adjustContentHeight","createToolbarElement","tbElement","createElement","id","getID","isDevice","tbWrapper","innerHTML","outerHTML","className","CLS_TB_WRAP","firstElementChild","element","insertBefore","getToolbarMode","tbMode","type","Expand","Scrollable","checkToolbarResponsive","ele","tBarMode","MultiRow","render","container","items","mode","cssClass","getCssClass","addFixedTBarClass","CLS_TB_STATIC","wireEvents","dropDownModule","renderDropDowns","containerType","notify","renderColorPicker","checkIsTransformChild","transformElements","document","i","toggleFloatClass","topValue","isBody","isFloat","scrollParent","floatOffset","floatingToolbarOffset","iframeSettings","inputElement","ownerDocument","body","tbHeight","getToolbarHeight","getExpandTBarPopHeight","scrollParentRelativeTop","trgHeight","offsetHeight","bodyStyle","window","getComputedStyle","parseFloat","marginTop","split","paddingTop","targetTop","getBoundingClientRect","top","scrollParentYOffset","isMSPointer","pageYOffset","parentElement","scrollTop","scrollParentRect","scrollParentTop","outOfRange","CLS_TB_ABS_FLOAT","parent_1","innerHeight","bottom","CLS_TB_FLOAT","width","offsetWidth","renderToolbar","renderInlineToolbar","enableFloating","CLS_RTE_TB_ENABLED","CLS_RTE_EXPAND_TB","refreshToolbarOverflow","divEle","querySelector","CLS_RTE_SOURCE_CODE_TXTAREA","iframeEle","style","display","updateToolbarItem","targetItem","updateItem","getBaseToolbarObject","disableToolbarItem","CLS_TB_FIXED","removeFixedTBarClass","showFixedTBar","CLS_SHOW","isIos","CLS_TB_IOS_FIX","hideFixedTBar","args","item","toLocaleLowerCase","locale","tooltip","trgItem","index","subCommand","toolbarObj","prefixId","prefixIcon","icon","tooltipText","dataBind","refreshOverflow","addTBarItem","updateToolbarStatus","options","tbElements","CLS_TB_ITEM","tbItems","fullScreen","fullScreenModule","showFullScreen","hideScreen","hideFullScreen","getBaseToolbar","addItems","getObject","enableTBarItems","isEnable","muteToolbarUpdate","trgItems","enableItems","editorManager","undoRedoManager","getUndoStatus","removeTBarItems","removeItems","popHeight","expandPopup","CLS_VISIBLE","CLS_EXPAND_OPEN","CLS_TOOLBAR","remove","CLS_RTL","enableRtl","add","isToolbarDestroyed","isDestroyed","destroyToolbar","unWireScrollElementsEvents","unWireEvents","destroyColorPicker","destroyDropDowns","destroy","removeEventListener","moduleDestroy","toolbarActionModule","scrollHandler","getDOMVisibility","el","offsetParent","mouseDownHandler","focusChangeHandler","dropDownBeforeOpenHandler","tbFocusHandler","activeElm","activeElement","isToolbaractive","toolbarItem","querySelectorAll","setAttribute","toolbarClickHandler","trg","originalEvent","isKeyboard","extendedTbar","maxHeight","hasActiveClass","isExpand","setContentHeight","on","initialEnd","scroll","bindOnEnd","toolbarUpdated","modelChanged","onPropertyChanged","refreshBegin","onRefresh","enableFullScreen","disableFullScreen","beforeDropDownOpen","expandPopupClick","focusChange","mouseDown","sourceCodeMouseDown","bindCssClass","setCssClass","toolbarClick","off","oldCssClass","setProperties","trim","replace","newProp","_i","_a","prop","refreshToolbar","module","getModuleName","wireScrollElementsEvents","dynamicModule"],"sources":["/Users/saleem/Desktop/KClient/Web App/Ver_3.6/User Interface/website_Source files/node_modules/@syncfusion/ej2-richtexteditor/src/rich-text-editor/actions/toolbar.js"],"sourcesContent":["import { addClass, Browser, EventHandler, detach, removeClass, select, selectAll, KeyboardEvents } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined as isNOU, closest, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, extend } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport * as classes from '../base/classes';\nimport { RenderType, ToolbarType } from '../base/enum';\nimport { setToolbarStatus, updateUndoRedoStatus, getTBarItemsIndex, getCollection, toObjectLowerCase, isIDevice, getTooltipText } from '../base/util';\nimport { updateDropDownFontFormatLocale } from '../base/util';\nimport * as model from '../models/items';\nimport { ToolbarRenderer } from '../renderer/toolbar-renderer';\nimport { BaseToolbar } from './base-toolbar';\nimport { DropDownButtons } from './dropdown-buttons';\nimport { ToolbarAction } from './toolbar-action';\n/**\n * `Toolbar` module is used to handle Toolbar actions.\n */\nvar Toolbar = /** @class */ (function () {\n    function Toolbar(parent, serviceLocator) {\n        this.tools = {};\n        this.parent = parent;\n        this.isToolbar = false;\n        this.locator = serviceLocator;\n        this.isTransformChild = false;\n        this.renderFactory = this.locator.getService('rendererFactory');\n        model.updateDropDownLocale(this.parent);\n        updateDropDownFontFormatLocale(this.parent);\n        this.renderFactory.addRenderer(RenderType.Toolbar, new ToolbarRenderer(this.parent, this.locator));\n        this.toolbarRenderer = this.renderFactory.getRenderer(RenderType.Toolbar);\n        this.baseToolbar = new BaseToolbar(this.parent, this.locator);\n        this.addEventListener();\n        if (this.parent.toolbarSettings && Object.keys(this.parent.toolbarSettings.itemConfigs).length > 0) {\n            extend(this.tools, model.tools, toObjectLowerCase(this.parent.toolbarSettings.itemConfigs), true);\n        }\n        else {\n            this.tools = model.tools;\n        }\n    }\n    Toolbar.prototype.initializeInstance = function () {\n        this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n        this.editableElement = this.contentRenderer.getEditPanel();\n        this.editPanel = this.contentRenderer.getPanel();\n    };\n    Toolbar.prototype.toolbarBindEvent = function () {\n        if (!this.parent.inlineMode.enable) {\n            this.keyBoardModule = new KeyboardEvents(this.getToolbarElement(), {\n                keyAction: this.toolBarKeyDown.bind(this), keyConfigs: this.parent.formatter.keyConfig, eventName: 'keydown'\n            });\n        }\n    };\n    Toolbar.prototype.toolBarKeyDown = function (e) {\n        switch (e.action) {\n            case 'escape':\n                this.parent.contentModule.getEditPanel().focus();\n                break;\n            case 'enter':\n                if (e.target.classList.contains('e-hor-nav')) {\n                    this.adjustContentHeight(e.target, true);\n                }\n        }\n    };\n    Toolbar.prototype.createToolbarElement = function () {\n        this.tbElement = this.parent.createElement('div', { id: this.parent.getID() + '_toolbar' });\n        if (!Browser.isDevice && this.parent.inlineMode.enable && isIDevice()) {\n            return;\n        }\n        else {\n            if (!this.parent.inlineMode.enable) {\n                this.tbWrapper = this.parent.createElement('div', {\n                    id: this.parent.getID() + '_toolbar_wrapper',\n                    innerHTML: this.tbElement.outerHTML,\n                    className: classes.CLS_TB_WRAP\n                });\n                this.tbElement = this.tbWrapper.firstElementChild;\n                this.parent.element.insertBefore(this.tbWrapper, this.editPanel);\n            }\n            else {\n                this.parent.element.insertBefore(this.tbElement, this.editPanel);\n            }\n        }\n    };\n    Toolbar.prototype.getToolbarMode = function () {\n        var tbMode;\n        switch (this.parent.toolbarSettings.type) {\n            case ToolbarType.Expand:\n                tbMode = 'Extended';\n                break;\n            case ToolbarType.Scrollable:\n                tbMode = 'Scrollable';\n                break;\n            default:\n                tbMode = 'MultiRow';\n        }\n        if (isIDevice() && this.parent.toolbarSettings.type === ToolbarType.Expand) {\n            tbMode = ToolbarType.Scrollable;\n        }\n        return tbMode;\n    };\n    Toolbar.prototype.checkToolbarResponsive = function (ele) {\n        if (!Browser.isDevice || isIDevice()) {\n            return false;\n        }\n        var tBarMode;\n        if (this.parent.toolbarSettings.type === ToolbarType.Expand) {\n            tBarMode = ToolbarType.MultiRow;\n        }\n        else {\n            tBarMode = this.parent.toolbarSettings.type;\n        }\n        this.baseToolbar.render({\n            container: ((this.parent.inlineMode.enable) ? 'quick' : 'toolbar'),\n            items: this.parent.toolbarSettings.items,\n            mode: tBarMode,\n            target: ele,\n            cssClass: this.parent.getCssClass()\n        });\n        if (this.parent.toolbarSettings.type === ToolbarType.Expand) {\n            addClass([ele], ['e-rte-tb-mobile']);\n            if (this.parent.inlineMode.enable) {\n                this.addFixedTBarClass();\n            }\n            else {\n                addClass([ele], [classes.CLS_TB_STATIC]);\n            }\n        }\n        this.wireEvents();\n        this.dropDownModule.renderDropDowns({\n            container: ele,\n            containerType: ((this.parent.inlineMode.enable) ? 'quick' : 'toolbar'),\n            items: this.parent.toolbarSettings.items\n        });\n        this.parent.notify(events.renderColorPicker, {\n            container: this.tbElement,\n            containerType: ((this.parent.inlineMode.enable) ? 'quick' : 'toolbar'),\n            items: this.parent.toolbarSettings.items\n        });\n        return true;\n    };\n    Toolbar.prototype.checkIsTransformChild = function () {\n        this.isTransformChild = false;\n        var transformElements = selectAll('[style*=\"transform\"]', document);\n        for (var i = 0; i < transformElements.length; i++) {\n            // eslint-disable-next-line max-len\n            if (!isNullOrUndefined(transformElements[i].contains) && transformElements[i].contains(this.parent.element)) {\n                this.isTransformChild = true;\n                break;\n            }\n        }\n    };\n    Toolbar.prototype.toggleFloatClass = function (e) {\n        var topValue;\n        var isBody = false;\n        var isFloat = false;\n        var scrollParent;\n        var floatOffset = this.parent.floatingToolbarOffset;\n        if (e && this.parent.iframeSettings.enable && this.parent.inputElement.ownerDocument === e.target) {\n            scrollParent = e.target.body;\n        }\n        else if (e && e.target !== document) {\n            scrollParent = e.target;\n        }\n        else {\n            isBody = true;\n            scrollParent = document.body;\n        }\n        var tbHeight = this.getToolbarHeight() + this.getExpandTBarPopHeight();\n        if (this.isTransformChild) {\n            topValue = 0;\n            var scrollParentRelativeTop = 0;\n            var trgHeight = this.parent.element.offsetHeight;\n            if (isBody) {\n                var bodyStyle = window.getComputedStyle(scrollParent);\n                scrollParentRelativeTop = parseFloat(bodyStyle.marginTop.split('px')[0]) + parseFloat(bodyStyle.paddingTop.split('px')[0]);\n            }\n            var targetTop = this.parent.element.getBoundingClientRect().top;\n            var scrollParentYOffset = (Browser.isMSPointer && isBody) ? window.pageYOffset : scrollParent.parentElement.scrollTop;\n            var scrollParentRect = scrollParent.getBoundingClientRect();\n            var scrollParentTop = (!isBody) ? scrollParentRect.top : (scrollParentRect.top + scrollParentYOffset);\n            var outOfRange = ((targetTop - ((!isBody) ? scrollParentTop : 0))\n                + trgHeight > tbHeight + floatOffset) ? false : true;\n            if (targetTop > (scrollParentTop + floatOffset) || targetTop < -trgHeight || ((targetTop < 0) ? outOfRange : false)) {\n                isFloat = false;\n                removeClass([this.tbElement], [classes.CLS_TB_ABS_FLOAT]);\n            }\n            else if (targetTop < (scrollParentTop + floatOffset)) {\n                if (targetTop < 0) {\n                    topValue = (-targetTop) + scrollParentTop;\n                }\n                else {\n                    topValue = scrollParentTop - targetTop;\n                }\n                topValue = (isBody) ? topValue - scrollParentRelativeTop : topValue;\n                addClass([this.tbElement], [classes.CLS_TB_ABS_FLOAT]);\n                isFloat = true;\n            }\n        }\n        else {\n            var parent_1 = this.parent.element.getBoundingClientRect();\n            if (window.innerHeight < parent_1.top) {\n                return;\n            }\n            topValue = (e && e.target !== document) ? scrollParent.getBoundingClientRect().top : 0;\n            if ((parent_1.bottom < (floatOffset + tbHeight + topValue)) || parent_1.bottom < 0 || parent_1.top > floatOffset + topValue) {\n                isFloat = false;\n            }\n            else if (parent_1.top < floatOffset || parent_1.top < floatOffset + topValue) {\n                isFloat = true;\n            }\n        }\n        if (!isFloat) {\n            removeClass([this.tbElement], [classes.CLS_TB_FLOAT]);\n            setStyleAttribute(this.tbElement, { top: 0 + 'px', width: '100%' });\n        }\n        else {\n            addClass([this.tbElement], [classes.CLS_TB_FLOAT]);\n            setStyleAttribute(this.tbElement, { width: this.parent.element.offsetWidth + 'px', top: (floatOffset + topValue) + 'px' });\n        }\n    };\n    Toolbar.prototype.renderToolbar = function () {\n        this.initializeInstance();\n        this.createToolbarElement();\n        if (this.checkToolbarResponsive(this.tbElement)) {\n            return;\n        }\n        if (this.parent.inlineMode.enable) {\n            this.parent.notify(events.renderInlineToolbar, {});\n        }\n        else {\n            this.baseToolbar.render({\n                container: 'toolbar',\n                items: this.parent.toolbarSettings.items,\n                mode: this.getToolbarMode(),\n                target: this.tbElement,\n                cssClass: this.parent.getCssClass()\n            });\n            if (!this.parent.inlineMode.enable) {\n                if (this.parent.toolbarSettings.enableFloating) {\n                    this.checkIsTransformChild();\n                    this.toggleFloatClass();\n                }\n                addClass([this.parent.element], [classes.CLS_RTE_TB_ENABLED]);\n                if (this.parent.toolbarSettings.type === ToolbarType.Expand) {\n                    addClass([this.parent.element], [classes.CLS_RTE_EXPAND_TB]);\n                }\n            }\n        }\n        this.wireEvents();\n        if (this.parent.inlineMode.enable && !isIDevice()) {\n            this.addFixedTBarClass();\n        }\n        if (!this.parent.inlineMode.enable) {\n            this.dropDownModule.renderDropDowns({\n                container: this.tbElement,\n                containerType: 'toolbar',\n                items: this.parent.toolbarSettings.items\n            });\n            this.parent.notify(events.renderColorPicker, {\n                container: this.tbElement,\n                containerType: 'toolbar',\n                items: this.parent.toolbarSettings.items\n            });\n            this.refreshToolbarOverflow();\n        }\n        var divEle = this.parent.element.querySelector('.' + classes.CLS_RTE_SOURCE_CODE_TXTAREA);\n        var iframeEle = this.parent.element.querySelector('.e-source-content');\n        if ((!this.parent.iframeSettings.enable && (!isNOU(divEle) && divEle.style.display === 'block')) ||\n            (this.parent.iframeSettings.enable && (!isNOU(iframeEle) && iframeEle.style.display === 'block'))) {\n            this.parent.notify(events.updateToolbarItem, {\n                targetItem: 'SourceCode', updateItem: 'Preview',\n                baseToolbar: this.parent.getBaseToolbarObject()\n            });\n            this.parent.disableToolbarItem(this.parent.toolbarSettings.items);\n        }\n    };\n    /**\n     * addFixedTBarClass method\n     *\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.addFixedTBarClass = function () {\n        addClass([this.tbElement], [classes.CLS_TB_FIXED]);\n    };\n    /**\n     * removeFixedTBarClass method\n     *\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.removeFixedTBarClass = function () {\n        removeClass([this.tbElement], [classes.CLS_TB_FIXED]);\n    };\n    Toolbar.prototype.showFixedTBar = function () {\n        addClass([this.tbElement], [classes.CLS_SHOW]);\n        if (Browser.isIos) {\n            addClass([this.tbElement], [classes.CLS_TB_IOS_FIX]);\n        }\n    };\n    Toolbar.prototype.hideFixedTBar = function () {\n        // eslint-disable-next-line\n        (!this.isToolbar) ? removeClass([this.tbElement], [classes.CLS_SHOW, classes.CLS_TB_IOS_FIX]) : this.isToolbar = false;\n    };\n    /**\n     * updateItem method\n     *\n     * @param {IUpdateItemsModel} args - specifies the arguments.\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.updateItem = function (args) {\n        var item = this.tools[args.updateItem.toLocaleLowerCase()];\n        if (this.parent.locale !== 'en-US') {\n            item.tooltip = getTooltipText(args.updateItem.toLocaleLowerCase(), this.locator);\n        }\n        var trgItem = this.tools[args.targetItem.toLocaleLowerCase()];\n        var index = getTBarItemsIndex(getCollection(trgItem.subCommand), args.baseToolbar.toolbarObj.items)[0];\n        if (!isNOU(index)) {\n            var prefixId = this.parent.inlineMode.enable ? '_quick_' : '_toolbar_';\n            args.baseToolbar.toolbarObj.items[index].id = this.parent.getID() + prefixId + item.id;\n            args.baseToolbar.toolbarObj.items[index].prefixIcon = item.icon;\n            args.baseToolbar.toolbarObj.items[index].tooltipText = item.tooltip;\n            args.baseToolbar.toolbarObj.items[index].subCommand = item.subCommand;\n            args.baseToolbar.toolbarObj.dataBind();\n            args.baseToolbar.toolbarObj.refreshOverflow();\n        }\n        else {\n            this.addTBarItem(args, 0);\n        }\n    };\n    Toolbar.prototype.updateToolbarStatus = function (args) {\n        if (!this.tbElement || (this.parent.inlineMode.enable && (isIDevice() || !Browser.isDevice))) {\n            return;\n        }\n        var options = {\n            args: args,\n            dropDownModule: this.dropDownModule,\n            parent: this.parent,\n            tbElements: selectAll('.' + classes.CLS_TB_ITEM, this.tbElement),\n            tbItems: this.baseToolbar.toolbarObj.items\n        };\n        setToolbarStatus(options, (this.parent.inlineMode.enable ? true : false), this.parent);\n    };\n    Toolbar.prototype.fullScreen = function (e) {\n        this.parent.fullScreenModule.showFullScreen(e);\n    };\n    Toolbar.prototype.hideScreen = function (e) {\n        this.parent.fullScreenModule.hideFullScreen(e);\n    };\n    /**\n     * getBaseToolbar method\n     *\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.getBaseToolbar = function () {\n        return this.baseToolbar;\n    };\n    /**\n     * addTBarItem method\n     *\n     * @param {IUpdateItemsModel} args - specifies the arguments.\n     * @param {number} index - specifies the index value.\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.addTBarItem = function (args, index) {\n        args.baseToolbar.toolbarObj.addItems([args.baseToolbar.getObject(args.updateItem, 'toolbar')], index);\n    };\n    /**\n     * enableTBarItems method\n     *\n     * @param {BaseToolbar} baseToolbar - specifies the toolbar.\n     * @param {string} items - specifies the string value.\n     * @param {boolean} isEnable - specifies the boolean value.\n     * @param {boolean} muteToolbarUpdate - specifies the toolbar.\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.enableTBarItems = function (baseToolbar, items, isEnable, muteToolbarUpdate) {\n        var trgItems = getTBarItemsIndex(getCollection(items), baseToolbar.toolbarObj.items);\n        this.tbItems = selectAll('.' + classes.CLS_TB_ITEM, baseToolbar.toolbarObj.element);\n        for (var i = 0; i < trgItems.length; i++) {\n            var item = this.tbItems[trgItems[i]];\n            if (item) {\n                baseToolbar.toolbarObj.enableItems(item, isEnable);\n            }\n        }\n        if (!select('.' + classes.CLS_RTE_SOURCE_CODE_TXTAREA, this.parent.element) && !muteToolbarUpdate) {\n            updateUndoRedoStatus(baseToolbar, this.parent.formatter.editorManager.undoRedoManager.getUndoStatus());\n        }\n    };\n    /**\n     * removeTBarItems method\n     *\n     * @param {string} items - specifies the string value.\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.removeTBarItems = function (items) {\n        if (isNullOrUndefined(this.baseToolbar.toolbarObj)) {\n            this.baseToolbar = this.parent.getBaseToolbarObject();\n        }\n        var trgItems = getTBarItemsIndex(getCollection(items), this.baseToolbar.toolbarObj.items);\n        this.tbItems = (this.parent.inlineMode.enable) ? selectAll('.' + classes.CLS_TB_ITEM, this.baseToolbar.toolbarObj.element)\n            : selectAll('.' + classes.CLS_TB_ITEM, this.parent.element);\n        for (var i = 0; i < trgItems.length; i++) {\n            this.baseToolbar.toolbarObj.removeItems(this.tbItems[trgItems[i]]);\n        }\n    };\n    /**\n     * getExpandTBarPopHeight method\n     *\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.getExpandTBarPopHeight = function () {\n        var popHeight = 0;\n        if (this.parent.toolbarSettings.type === ToolbarType.Expand && this.tbElement.classList.contains('e-extended-toolbar')) {\n            var expandPopup = select('.e-toolbar-extended', this.tbElement);\n            if (expandPopup && this.tbElement.classList.contains('e-expand-open')\n                || expandPopup && expandPopup.classList.contains('e-popup-open')) {\n                addClass([expandPopup], [classes.CLS_VISIBLE]);\n                popHeight = popHeight + expandPopup.offsetHeight;\n                removeClass([expandPopup], [classes.CLS_VISIBLE]);\n            }\n            else {\n                removeClass([this.tbElement], [classes.CLS_EXPAND_OPEN]);\n            }\n        }\n        return popHeight;\n    };\n    /**\n     * getToolbarHeight method\n     *\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.getToolbarHeight = function () {\n        return this.tbElement.offsetHeight;\n    };\n    /**\n     * getToolbarElement method\n     *\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.getToolbarElement = function () {\n        return select('.' + classes.CLS_TOOLBAR, this.parent.element);\n    };\n    /**\n     * refreshToolbarOverflow method\n     *\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.refreshToolbarOverflow = function () {\n        this.parent.element.classList.remove(classes.CLS_RTL);\n        this.baseToolbar.toolbarObj.refreshOverflow();\n        if (this.parent.enableRtl) {\n            this.parent.element.classList.add(classes.CLS_RTL);\n        }\n    };\n    Toolbar.prototype.isToolbarDestroyed = function () {\n        return this.baseToolbar.toolbarObj && !this.baseToolbar.toolbarObj.isDestroyed;\n    };\n    Toolbar.prototype.destroyToolbar = function () {\n        if (this.isToolbarDestroyed()) {\n            this.parent.unWireScrollElementsEvents();\n            this.unWireEvents();\n            this.parent.notify(events.destroyColorPicker, {});\n            this.dropDownModule.destroyDropDowns();\n            this.baseToolbar.toolbarObj.destroy();\n            this.removeEventListener();\n            removeClass([this.parent.element], [classes.CLS_RTE_TB_ENABLED]);\n            removeClass([this.parent.element], [classes.CLS_RTE_EXPAND_TB]);\n            var tbWrapper = select('.' + classes.CLS_TB_WRAP, this.parent.element);\n            var tbElement = select('.' + classes.CLS_TOOLBAR, this.parent.element);\n            if (!isNullOrUndefined(tbWrapper)) {\n                detach(tbWrapper);\n            }\n            else if (!isNullOrUndefined(tbElement)) {\n                detach(tbElement);\n            }\n        }\n    };\n    /**\n     * Destroys the ToolBar.\n     *\n     * @function destroy\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.destroy = function () {\n        if (isNOU(this.parent)) {\n            return;\n        }\n        if (this.isToolbarDestroyed()) {\n            this.destroyToolbar();\n            if (this.keyBoardModule) {\n                this.keyBoardModule.destroy();\n            }\n        }\n    };\n    Toolbar.prototype.moduleDestroy = function () {\n        this.parent = null;\n        this.baseToolbar.parent = null;\n        this.toolbarActionModule.parent = null;\n        this.dropDownModule.parent = null;\n    };\n    Toolbar.prototype.scrollHandler = function (e) {\n        if (!this.parent.inlineMode.enable) {\n            if (this.parent.toolbarSettings.enableFloating && this.getDOMVisibility(this.tbElement)) {\n                this.toggleFloatClass(e.args);\n            }\n        }\n    };\n    Toolbar.prototype.getDOMVisibility = function (el) {\n        if (!el.offsetParent && el.offsetWidth === 0 && el.offsetHeight === 0) {\n            return false;\n        }\n        return true;\n    };\n    Toolbar.prototype.mouseDownHandler = function () {\n        if (Browser.isDevice && this.parent.inlineMode.enable && !isIDevice()) {\n            this.showFixedTBar();\n        }\n    };\n    Toolbar.prototype.focusChangeHandler = function () {\n        if (Browser.isDevice && this.parent.inlineMode.enable && !isIDevice()) {\n            this.isToolbar = false;\n            this.hideFixedTBar();\n        }\n    };\n    Toolbar.prototype.dropDownBeforeOpenHandler = function () {\n        this.isToolbar = true;\n    };\n    // eslint-disable-next-line\n    Toolbar.prototype.tbFocusHandler = function (e) {\n        var activeElm = document.activeElement;\n        var isToolbaractive = closest(activeElm, '.e-rte-toolbar');\n        if (activeElm === this.parent.getToolbarElement() || isToolbaractive === this.parent.getToolbarElement()) {\n            var toolbarItem = this.parent.getToolbarElement().querySelectorAll('.e-expended-nav');\n            for (var i = 0; i < toolbarItem.length; i++) {\n                if (isNOU(this.parent.getToolbarElement().querySelector('.e-insert-table-btn'))) {\n                    toolbarItem[i].setAttribute('tabindex', '0');\n                }\n                else {\n                    toolbarItem[i].setAttribute('tabindex', '1');\n                }\n            }\n        }\n    };\n    Toolbar.prototype.toolbarClickHandler = function (e) {\n        var trg = closest(e.originalEvent.target, '.e-hor-nav');\n        this.adjustContentHeight(trg, false);\n    };\n    Toolbar.prototype.adjustContentHeight = function (trg, isKeyboard) {\n        if (trg && this.parent.toolbarSettings.type === ToolbarType.Expand && !isNOU(trg)) {\n            var extendedTbar = this.tbElement.querySelector('.e-toolbar-extended');\n            if (!isNOU(extendedTbar)) {\n                setStyleAttribute(extendedTbar, { maxHeight: '', display: 'block' });\n                setStyleAttribute(extendedTbar, { maxHeight: extendedTbar.offsetHeight + 'px', display: '' });\n            }\n            var hasActiveClass = trg.classList.contains('e-nav-active');\n            var isExpand = isKeyboard ? (hasActiveClass ? false : true) : (hasActiveClass ? true : false);\n            if (isExpand) {\n                addClass([this.tbElement], [classes.CLS_EXPAND_OPEN]);\n            }\n            else {\n                removeClass([this.tbElement], [classes.CLS_EXPAND_OPEN]);\n            }\n            this.parent.setContentHeight('toolbar', isExpand);\n        }\n        else if (Browser.isDevice || this.parent.inlineMode.enable) {\n            this.isToolbar = true;\n        }\n        if (isNOU(trg) && this.parent.toolbarSettings.type === ToolbarType.Expand) {\n            removeClass([this.tbElement], [classes.CLS_EXPAND_OPEN]);\n        }\n    };\n    Toolbar.prototype.wireEvents = function () {\n        if (this.parent.inlineMode.enable && isIDevice()) {\n            return;\n        }\n        EventHandler.add(this.tbElement, 'focusin', this.tbFocusHandler, this);\n    };\n    Toolbar.prototype.unWireEvents = function () {\n        EventHandler.remove(this.tbElement, 'focusin', this.tbFocusHandler);\n    };\n    Toolbar.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.dropDownModule = new DropDownButtons(this.parent, this.locator);\n        this.toolbarActionModule = new ToolbarAction(this.parent);\n        this.parent.on(events.initialEnd, this.renderToolbar, this);\n        this.parent.on(events.scroll, this.scrollHandler, this);\n        this.parent.on(events.bindOnEnd, this.toolbarBindEvent, this);\n        this.parent.on(events.toolbarUpdated, this.updateToolbarStatus, this);\n        this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.refreshBegin, this.onRefresh, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.enableFullScreen, this.fullScreen, this);\n        this.parent.on(events.disableFullScreen, this.hideScreen, this);\n        this.parent.on(events.updateToolbarItem, this.updateItem, this);\n        this.parent.on(events.beforeDropDownOpen, this.dropDownBeforeOpenHandler, this);\n        this.parent.on(events.expandPopupClick, this.parent.setContentHeight, this.parent);\n        this.parent.on(events.focusChange, this.focusChangeHandler, this);\n        this.parent.on(events.mouseDown, this.mouseDownHandler, this);\n        this.parent.on(events.sourceCodeMouseDown, this.mouseDownHandler, this);\n        this.parent.on(events.bindCssClass, this.setCssClass, this);\n        this.parent.on(events.moduleDestroy, this.moduleDestroy, this);\n        if (!this.parent.inlineMode.enable && !isIDevice()) {\n            this.parent.on(events.toolbarClick, this.toolbarClickHandler, this);\n        }\n    };\n    Toolbar.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialEnd, this.renderToolbar);\n        this.parent.off(events.scroll, this.scrollHandler);\n        this.parent.off(events.bindOnEnd, this.toolbarBindEvent);\n        this.parent.off(events.toolbarUpdated, this.updateToolbarStatus);\n        this.parent.off(events.modelChanged, this.onPropertyChanged);\n        this.parent.off(events.refreshBegin, this.onRefresh);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.enableFullScreen, this.parent.fullScreenModule.showFullScreen);\n        this.parent.off(events.disableFullScreen, this.parent.fullScreenModule.hideFullScreen);\n        this.parent.off(events.updateToolbarItem, this.updateItem);\n        this.parent.off(events.beforeDropDownOpen, this.dropDownBeforeOpenHandler);\n        this.parent.off(events.expandPopupClick, this.parent.setContentHeight);\n        this.parent.off(events.focusChange, this.focusChangeHandler);\n        this.parent.off(events.mouseDown, this.mouseDownHandler);\n        this.parent.off(events.sourceCodeMouseDown, this.mouseDownHandler);\n        this.parent.off(events.bindCssClass, this.setCssClass);\n        this.parent.off(events.moduleDestroy, this.moduleDestroy);\n        if (!this.parent.inlineMode.enable && !isIDevice()) {\n            this.parent.off(events.toolbarClick, this.toolbarClickHandler);\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/tslint/config\n    Toolbar.prototype.setCssClass = function (e) {\n        if (this.toolbarObj && e.cssClass) {\n            if (isNullOrUndefined(e.oldCssClass)) {\n                this.toolbarObj.setProperties({ cssClass: (this.toolbarObj.cssClass + ' ' + e.cssClass).trim() });\n            }\n            else {\n                this.toolbarObj.setProperties({ cssClass: (this.toolbarObj.cssClass.replace(e.oldCssClass, '').trim() + ' ' + e.cssClass).trim() });\n            }\n        }\n    };\n    Toolbar.prototype.onRefresh = function () {\n        if (!this.parent.inlineMode.enable) {\n            this.refreshToolbarOverflow();\n        }\n        this.parent.setContentHeight('', true);\n    };\n    /**\n     * Called internally if any of the property value changed.\n     *\n     * @param {RichTextEditorModel} e - specifies the string value\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.onPropertyChanged = function (e) {\n        if (!isNullOrUndefined(e.newProp.inlineMode)) {\n            for (var _i = 0, _a = Object.keys(e.newProp.inlineMode); _i < _a.length; _i++) {\n                var prop = _a[_i];\n                switch (prop) {\n                    case 'enable':\n                        this.refreshToolbar();\n                        break;\n                }\n            }\n        }\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        this.refreshToolbar();\n    };\n    Toolbar.prototype.refreshToolbar = function () {\n        if (isNullOrUndefined(this.baseToolbar.toolbarObj)) {\n            this.baseToolbar = this.parent.getBaseToolbarObject();\n        }\n        var tbWrapper = select('.' + classes.CLS_TB_WRAP, this.parent.element);\n        var tbElement = select('.' + classes.CLS_TOOLBAR, this.parent.element);\n        if (tbElement || tbWrapper) {\n            this.destroyToolbar();\n        }\n        if (this.parent.toolbarSettings.enable) {\n            this.addEventListener();\n            this.renderToolbar();\n            this.parent.wireScrollElementsEvents();\n            if (!select('.' + classes.CLS_RTE_SOURCE_CODE_TXTAREA, this.parent.element)) {\n                updateUndoRedoStatus(this.baseToolbar, this.parent.formatter.editorManager.undoRedoManager.getUndoStatus());\n            }\n            this.parent.notify(events.dynamicModule, {});\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {void}\n     * @hidden\n     */\n    Toolbar.prototype.getModuleName = function () {\n        return 'toolbar';\n    };\n    return Toolbar;\n}());\nexport { Toolbar };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}