{"ast":null,"code":"import { AjaxHandler } from '../index';\nimport { createElement, Browser, Internationalization, isBlazor, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Accordion, ContextMenu as Context } from '@syncfusion/ej2-navigations';\nimport { InPlaceEditor } from '@syncfusion/ej2-inplace-editor';\nimport { cloneObject } from '../drawing/drawing-util';\n/**\n * StickyNotes module\n */\nvar StickyNotesAnnotation = /** @class */function () {\n  /**\n   * @param pdfViewer\n   * @param pdfViewerBase\n   * @param pdfViewer\n   * @param pdfViewerBase\n   * @private\n   */\n  function StickyNotesAnnotation(pdfViewer, pdfViewerBase) {\n    this.moreButtonId = '';\n    this.commentsCount = 0;\n    this.commentsreplyCount = 0;\n    this.commentContextMenu = [];\n    this.isAccordionContainer = true;\n    this.isCreateContextMenu = false;\n    this.isCommentsSelected = false;\n    /**\n     * @private\n     */\n    this.isAddAnnotationProgramatically = false;\n    /**\n     * @private\n     */\n    this.isEditableElement = false;\n    this.isPageCommentsRendered = false;\n    this.isCommentsRendered = false;\n    /**\n     * @private\n     */\n    this.isAnnotationRendered = false;\n    /**\n     * @private\n     */\n    this.textFromCommentPanel = false;\n    this.pdfViewer = pdfViewer;\n    this.pdfViewerBase = pdfViewerBase;\n    this.opacity = this.pdfViewer.stickyNotesSettings.opacity ? this.pdfViewer.stickyNotesSettings.opacity : 1;\n  }\n  /**\n   * @param stickyAnnotations\n   * @param pageNumber\n   * @param canvas\n   * @private\n   */\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.renderStickyNotesAnnotations = function (stickyAnnotations, pageNumber, canvas) {\n    if (stickyAnnotations) {\n      if (stickyAnnotations.length > 0) {\n        for (var i = 0; i < stickyAnnotations.length; i++) {\n          // eslint-disable-next-line\n          var annotation = stickyAnnotations[i];\n          var isAdded = false;\n          // eslint-disable-next-line\n          var pageAnnotations = this.getAnnotations(pageNumber, null, 'sticky');\n          if (pageAnnotations !== null) {\n            for (var k = 0; k < pageAnnotations.length; k++) {\n              var annotationName = annotation.annotName ? annotation.annotName : annotation.AnnotName;\n              var pageAnnotationName = pageAnnotations[k].annotName ? pageAnnotations[k].annotName : pageAnnotations[k].AnnotName;\n              if (pageAnnotationName && annotationName && pageAnnotationName === annotationName) {\n                isAdded = true;\n                break;\n              }\n            }\n          }\n          if (!isAdded) {\n            annotation.annotationAddMode = this.pdfViewer.annotationModule.findAnnotationMode(annotation, pageNumber, annotation.AnnotType);\n            var annotationObject = null;\n            // eslint-disable-next-line\n            var position = annotation.Bounds;\n            var author = annotation.Author;\n            // eslint-disable-next-line max-len\n            annotation.AnnotationSettings = annotation.AnnotationSettings ? annotation.AnnotationSettings : this.pdfViewer.annotationModule.updateAnnotationSettings(annotation);\n            annotation.allowedInteractions = annotation.AllowedInteraction ? annotation.AllowedInteraction : this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);\n            var isPrint = true;\n            if (annotation.annotationAddMode === 'Imported Annotation') {\n              isPrint = annotation.IsPrint;\n            } else {\n              isPrint = annotation.AnnotationSettings.isPrint;\n            }\n            if (annotation.IsLock) {\n              annotation.AnnotationSettings.isLock = annotation.IsLock;\n            }\n            annotationObject = {\n              // eslint-disable-next-line max-len\n              shapeAnnotationType: 'sticky',\n              author: author,\n              modifiedDate: annotation.ModifiedDate,\n              subject: annotation.Subject,\n              note: annotation.Note,\n              opacity: annotation.Opacity,\n              state: annotation.State,\n              stateModel: annotation.StateModel,\n              pathData: '',\n              comments: this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments, annotation, author),\n              review: {\n                state: annotation.State,\n                stateModel: annotation.StateModel,\n                modifiedDate: annotation.ModifiedDate,\n                author: author\n              },\n              pageNumber: pageNumber,\n              // eslint-disable-next-line max-len\n              bounds: {\n                left: annotation.Bounds.X,\n                top: annotation.Bounds.Y,\n                width: annotation.Bounds.Width,\n                height: annotation.Bounds.Height,\n                right: annotation.Bounds.Right,\n                bottom: annotation.Bounds.Bottom\n              },\n              annotName: annotation.AnnotName,\n              color: annotation.color,\n              annotationSelectorSettings: this.getSettings(annotation),\n              customData: this.pdfViewer.annotation.getCustomData(annotation),\n              annotationSettings: annotation.AnnotationSettings,\n              allowedInteractions: annotation.allowedInteractions,\n              isPrint: isPrint,\n              isCommentLock: annotation.IsCommentLock\n            };\n            var annot = void 0;\n            // eslint-disable-next-line max-len\n            annotation.AnnotationSelectorSettings = annotation.AnnotationSelectorSettings ? annotation.AnnotationSelectorSettings : this.pdfViewer.annotationSelectorSettings;\n            annot = {\n              // eslint-disable-next-line max-len\n              author: author,\n              modifiedDate: annotationObject.modifiedDate,\n              annotName: annotationObject.annotName,\n              pageIndex: pageNumber,\n              bounds: {\n                x: position.Left,\n                y: position.Top,\n                width: position.Width,\n                height: position.Height\n              },\n              strokeColor: 'transparent',\n              stampStrokeColor: '',\n              data: this.setImageSource(),\n              shapeAnnotationType: 'StickyNotes',\n              subject: annotationObject.subject,\n              notes: annotationObject.note,\n              opacity: annotationObject.opacity,\n              id: annotationObject.annotName,\n              fillColor: annotationObject.color,\n              annotationSelectorSettings: annotation.AnnotationSelectorSettings,\n              annotationSettings: annotationObject.annotationSettings,\n              // eslint-disable-next-line max-len\n              annotationAddMode: annotation.annotationAddMode,\n              isPrint: isPrint,\n              isCommentLock: annotationObject.isCommentLock\n            };\n            if (canvas) {\n              this.drawStickyNotes(position.Left, position.Top, position.Width, position.Height, pageNumber, annot, canvas);\n            } else {\n              this.pdfViewer.add(annot);\n              this.drawStickyNotes(position.Left, position.Top, position.Width, position.Height, pageNumber, annot);\n              this.pdfViewer.annotationModule.storeAnnotations(pageNumber, annotationObject, '_annotations_sticky');\n            }\n            if (this.isAddAnnotationProgramatically) {\n              // eslint-disable-next-line\n              var settings = {\n                opacity: annot.opacity,\n                borderColor: annot.strokeColor,\n                borderWidth: annot.thickness,\n                author: annotation.author,\n                subject: annotation.subject,\n                modifiedDate: annotation.modifiedDate,\n                // eslint-disable-next-line\n                fillColor: annot.fillColor,\n                fontSize: annot.fontSize,\n                width: annot.bounds.width,\n                height: annot.bounds.height,\n                fontColor: annot.fontColor,\n                fontFamily: annot.fontFamily,\n                defaultText: annot.dynamicText,\n                fontStyle: annot.font,\n                textAlignment: annot.textAlign\n              };\n              this.pdfViewer.fireAnnotationAdd(annot.pageIndex, annot.annotName, 'StickyNotes', annot.bounds, settings);\n            }\n          }\n        }\n      }\n    }\n  };\n  /**\n   * @param annotation\n   * @private\n   */\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.getSettings = function (annotation) {\n    var selector = this.pdfViewer.annotationSelectorSettings;\n    if (annotation.AnnotationSelectorSettings) {\n      selector = annotation.AnnotationSelectorSettings;\n    } else if (this.pdfViewer.stickyNotesSettings.annotationSelectorSettings) {\n      selector = this.pdfViewer.stickyNotesSettings.annotationSelectorSettings;\n    }\n    return selector;\n  };\n  /**\n   * @param X\n   * @param Y\n   * @param width\n   * @param height\n   * @param pageIndex\n   * @param annotation\n   * @param canvas\n   * @param X\n   * @param Y\n   * @param width\n   * @param height\n   * @param pageIndex\n   * @param annotation\n   * @param canvas\n   * @param X\n   * @param Y\n   * @param width\n   * @param height\n   * @param pageIndex\n   * @param annotation\n   * @param canvas\n   * @private\n   */\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.drawStickyNotes = function (X, Y, width, height, pageIndex, annotation, canvas) {\n    var _this = this;\n    var annot;\n    var annotationObject = null;\n    var image = new Image();\n    // eslint-disable-next-line\n    var proxy = this;\n    image.onload = function () {\n      var commentsDivid;\n      var annotationName;\n      // eslint-disable-next-line max-len\n      var author = _this.pdfViewer.annotationSettings.author !== 'Guest' ? _this.pdfViewer.annotationSettings.author : _this.pdfViewer.stickyNotesSettings.author;\n      var subject = _this.pdfViewer.annotationSettings.subject !== \"\" && !isNullOrUndefined(_this.pdfViewer.annotationSettings.subject) ? _this.pdfViewer.annotationSettings.subject : _this.pdfViewer.stickyNotesSettings.subject ? _this.pdfViewer.stickyNotesSettings.subject : 'Sticky Note';\n      if (annotation) {\n        annot = {\n          // eslint-disable-next-line max-len\n          author: annotation.author,\n          modifiedDate: annotation.modifiedDate,\n          annotName: annotation.annotName,\n          data: image.src,\n          bounds: {\n            x: X,\n            y: Y,\n            width: width,\n            height: height\n          },\n          subject: annotation.subject,\n          notes: annotation.notes,\n          opacity: annotation.opacity,\n          id: annotation.annotName,\n          shapeAnnotationType: 'StickyNotes',\n          strokeColor: 'transparent',\n          stampStrokeColor: '',\n          pageIndex: annotation.pageIndex,\n          isPrint: annotation.isPrint\n        };\n      } else {\n        annotationName = _this.pdfViewer.annotation.createGUID();\n        commentsDivid = proxy.addComments('sticky', pageIndex + 1);\n        if (commentsDivid) {\n          document.getElementById(commentsDivid).id = annotationName;\n        }\n        // eslint-disable-next-line\n        var annotationSelectorSettings = _this.pdfViewer.stickyNotesSettings.annotationSelectorSettings ? _this.pdfViewer.stickyNotesSettings.annotationSelectorSettings : _this.pdfViewer.annotationSelectorSettings;\n        var isPrint = _this.pdfViewer.stickyNotesSettings.isPrint;\n        annot = {\n          // eslint-disable-next-line max-len\n          bounds: {\n            x: X,\n            y: Y,\n            width: width,\n            height: height\n          },\n          pageIndex: pageIndex,\n          data: image.src,\n          modifiedDate: _this.getDateAndTime(),\n          shapeAnnotationType: 'StickyNotes',\n          strokeColor: 'transparent',\n          stampStrokeColor: '',\n          annotName: annotationName,\n          id: annotationName,\n          opacity: _this.opacity,\n          isPrint: isPrint\n        };\n        // eslint-disable-next-line max-len\n        var isLock = _this.pdfViewer.stickyNotesSettings.isLock ? _this.pdfViewer.stickyNotesSettings.isLock : _this.pdfViewer.annotationSettings.isLock;\n        // eslint-disable-next-line\n        var allowedInteractions = _this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);\n        annotationObject = {\n          // eslint-disable-next-line max-len\n          author: author,\n          allowedInteractions: allowedInteractions,\n          modifiedDate: _this.getDateAndTime(),\n          subject: subject,\n          shapeAnnotationType: 'sticky',\n          pageNumber: pageIndex,\n          // eslint-disable-next-line max-len\n          note: '',\n          opacity: _this.opacity,\n          pathData: '',\n          state: '',\n          stateModel: '',\n          color: 'rgba(255,255,0)',\n          comments: [],\n          annotName: annotationName,\n          // eslint-disable-next-line max-len\n          bounds: {\n            left: X,\n            top: Y,\n            width: width,\n            height: height\n          },\n          review: {\n            state: '',\n            stateModel: '',\n            modifiedDate: '',\n            author: author\n          },\n          annotationSelectorSettings: annotationSelectorSettings,\n          // eslint-disable-next-line max-len\n          customData: _this.pdfViewer.annotationModule.getData('sticky'),\n          annotationSettings: {\n            isLock: isLock\n          },\n          isPrint: isPrint,\n          isCommentLock: false\n        };\n      }\n      if (!annotation) {\n        // eslint-disable-next-line max-len\n        proxy.pdfViewer.annotation.addAction(pageIndex, null, annot, 'Addition', '', annot, annot);\n        proxy.pdfViewer.add(annot);\n        proxy.pdfViewer.annotationModule.storeAnnotations(pageIndex, annotationObject, '_annotations_sticky');\n      }\n      if (proxy.pdfViewerBase.isAddComment) {\n        // eslint-disable-next-line max-len\n        // eslint-disable-next-line\n        var bounds = {\n          left: annot.bounds.x,\n          top: annot.bounds.y,\n          width: annot.bounds.width,\n          height: annot.bounds.height\n        };\n        _this.pdfViewerBase.updateDocumentEditedProperty(true);\n        // eslint-disable-next-line\n        var settings = {\n          opacity: annot.opacity,\n          author: author,\n          modifiedDate: annot.modifiedDate,\n          subject: subject\n        };\n        _this.pdfViewer.fireAnnotationAdd(annot.pageIndex, annot.annotName, 'StickyNotes', bounds, settings);\n      }\n      if (canvas) {\n        // eslint-disable-next-line\n        proxy.pdfViewer.renderDrawing(canvas, pageIndex);\n      } else {\n        // eslint-disable-next-line\n        var canvass = document.getElementById(proxy.pdfViewer.element.id + '_annotationCanvas_' + pageIndex);\n        // eslint-disable-next-line\n        proxy.pdfViewer.renderDrawing(canvass, pageIndex);\n      }\n      if (Browser.isDevice) {\n        proxy.pdfViewer.select([annot.id], annot.annotationSelectorSettings);\n      }\n      proxy.pdfViewerBase.isAddComment = false;\n    };\n    image.src = this.setImageSource();\n  };\n  StickyNotesAnnotation.prototype.setImageSource = function () {\n    // eslint-disable-next-line max-len\n    var imageSource = 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIgogICB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgd2lkdGg9IjE2IgogICBoZWlnaHQ9IjE1IgogICB2aWV3Qm94PSIwIDAgNC4yMzMzMzMxIDMuOTY4NzQ5NyIKICAgdmVyc2lvbj0iMS4xIj4KICA8ZyBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBkPSJNIDMuODM4OSwwLjk0MTY3IEMgMy42NTM5LDAuNzAzNjcgMy40MTU5LDAuNTE3NjcgMy4xMjQ5LDAuMzg1NjcgMi44MDc5LDAuMjUzNjcgMi40ODk5LDAuMTczNjcgMi4xMTk5LDAuMTczNjcgMS43NDg5LDAuMTczNjcgMS40MzE5LDAuMjUzNjcgMS4xMTQyLDAuMzg1NjcgMC44MjMxNiwwLjUxNzY3IDAuNTg1MTYsMC43MDM2NyAwLjQwMDE2LDAuOTQxNjcgMC4yMTUxNiwxLjE3OTcgMC4xMzUxNiwxLjQxNzcgMC4xMzUxNiwxLjcwODcgMC4xMzUxNiwxLjk0NjcgMC4xODgxNiwyLjE1ODcgMC4zMjAxNiwyLjM0MzcgMC40NTMxNiwyLjU1NTcgMC42MTExNiwyLjcxMzcgMC44MjMxNiwyLjg0NjcgMC43OTIxNiwzLjE1NDcgMC42NTAxNiwzLjM4MjcgMC40NzkxNiwzLjU4NzcgMC40MjgxNiwzLjY2NzcgMC41MTcxNiwzLjc0MTcgMC42OTExNiwzLjcxOTcgMS4wODgyLDMuNjM5NyAxLjQwNDksMy40NTQ3IDEuNjQyOSwzLjE2MzcgMS44MDE5LDMuMTkwNyAxLjk2MDksMy4yMTY3IDIuMTE5OSwzLjIxNjcgMi40ODk5LDMuMjE2NyAyLjgwNzksMy4xMzc3IDMuMTI0OSwzLjAwNTcgMy40MTU5LDIuODcyNyAzLjY4MDksMi42ODc3IDMuODM4OSwyLjQ0OTcgNC4wMjQ5LDIuMjExNyA0LjEwMzksMS45NzM3IDQuMTAzOSwxLjY4MjcgNC4xMDM5LDEuNDE3NyA0LjAyNDksMS4xNTI3IDMuODM4OSwwLjk0MTY3IFoiCiAgICAgICBpZD0icGF0aDE1MjQiCiAgICAgICBzdHlsZT0iZmlsbDojZmZmNzAwO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDowLjI2NDU4MztzdHJva2Utb3BhY2l0eToxIiAvPgogICAgPHBhdGgKICAgICAgIGQ9Ik0gMy4wNDI5LDEuNDE2NyBIIDEuMTkxMiBDIDEuMTExMiwxLjQxNjcgMS4wNTkyLDEuMzYzNyAxLjA1OTIsMS4yODM3IDEuMDU5MiwxLjIwNDcgMS4xMTEyLDEuMTUxNyAxLjE5MTIsMS4xNTE3IEggMy4wNDI5IEMgMy4xMjE5LDEuMTUxNyAzLjE3NDksMS4yMDQ3IDMuMTc0OSwxLjI4MzcgMy4xNzQ5LDEuMzYzNyAzLjEyMTksMS40MTY3IDMuMDQyOSwxLjQxNjcgWiIKICAgICAgIGlkPSJwYXRoMTUzNiIKICAgICAgIHN0eWxlPSJzdHJva2Utd2lkdGg6MC4yNjQ1ODMiIC8+CiAgICA8cGF0aAogICAgICAgZD0iTSAzLjA0MjksMS45NDU3IEggMS4xOTEyIEMgMS4xMTEyLDEuOTQ1NyAxLjA1OTIsMS44OTI3IDEuMDU5MiwxLjgxMjcgMS4wNTkyLDEuNzMzNyAxLjExMTIsMS42ODA3IDEuMTkxMiwxLjY4MDcgSCAzLjA0MjkgQyAzLjEyMTksMS42ODA3IDMuMTc0OSwxLjczMzcgMy4xNzQ5LDEuODEyNyAzLjE3NDksMS44OTI3IDMuMTIxOSwxLjk0NTcgMy4wNDI5LDEuOTQ1NyBaIgogICAgICAgaWQ9InBhdGgxNTQwIgogICAgICAgc3R5bGU9InN0cm9rZS13aWR0aDowLjI2NDU4MyIgLz4KICA8L2c+Cjwvc3ZnPgo=';\n    return imageSource;\n  };\n  /**\n   * @private\n   */\n  StickyNotesAnnotation.prototype.createRequestForComments = function () {\n    var jsonObject;\n    var proxy = this;\n    var startIndex = 0;\n    var pageLimit = 20;\n    var pageCount = proxy.pdfViewerBase.pageCount;\n    if (!proxy.isCommentsRendered) {\n      if (pageLimit < pageCount) {\n        pageCount = pageLimit;\n      } else {\n        proxy.isPageCommentsRendered = true;\n      }\n    }\n    if (!this.isCommentsRendered) {\n      // eslint-disable-next-line max-len\n      jsonObject = {\n        pageStartIndex: startIndex.toString(),\n        pageEndIndex: pageCount.toString(),\n        hashId: this.pdfViewerBase.hashId,\n        action: 'RenderAnnotationComments',\n        elementId: this.pdfViewer.element.id,\n        uniqueId: proxy.pdfViewerBase.documentId\n      };\n      proxy.isCommentsRendered = true;\n    } else {\n      // eslint-disable-next-line max-len\n      jsonObject = {\n        pageStartIndex: pageLimit.toString(),\n        pageEndIndex: pageCount.toString(),\n        hashId: this.pdfViewerBase.hashId,\n        action: 'RenderAnnotationComments',\n        elementId: this.pdfViewer.element.id,\n        uniqueId: proxy.pdfViewerBase.documentId\n      };\n    }\n    if (this.pdfViewerBase.jsonDocumentId) {\n      // eslint-disable-next-line\n      jsonObject.documentId = this.pdfViewerBase.jsonDocumentId;\n    }\n    var url = this.pdfViewer.serviceUrl + '/' + this.pdfViewer.serverActionSettings.renderComments;\n    proxy.commentsRequestHandler = new AjaxHandler(proxy.pdfViewer);\n    proxy.commentsRequestHandler.url = url;\n    proxy.commentsRequestHandler.mode = true;\n    proxy.commentsRequestHandler.responseType = 'text';\n    if (this.pdfViewerBase.clientSideRendering) {\n      var data = this.pdfViewer.pdfRendererModule.getAnnotationComments(jsonObject);\n      this.renderCommentsOnSuccess(data, proxy);\n    } else {\n      proxy.commentsRequestHandler.send(jsonObject);\n      // eslint-disable-next-line\n      proxy.commentsRequestHandler.onSuccess = function (result) {\n        // eslint-disable-next-line\n        var data = result.data;\n        var redirect = proxy.pdfViewerBase.checkRedirection(data);\n        if (!redirect) {\n          if (data) {\n            if (typeof data !== 'object') {\n              try {\n                data = JSON.parse(data);\n                if (typeof data !== 'object') {\n                  data = JSON.parse(data);\n                }\n                if (typeof data !== 'object') {\n                  proxy.pdfViewerBase.onControlError(500, data, this.pdfViewer.serverActionSettings.renderComments);\n                  data = null;\n                }\n              } catch (error) {\n                proxy.pdfViewerBase.onControlError(500, data, this.pdfViewer.serverActionSettings.renderComments);\n                data = null;\n              }\n            }\n            proxy.renderCommentsOnSuccess(data, proxy);\n          }\n        }\n      };\n      // eslint-disable-next-line\n      proxy.commentsRequestHandler.onFailure = function (result) {\n        this.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText);\n      };\n      // eslint-disable-next-line\n      proxy.commentsRequestHandler.onError = function (result) {\n        proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.renderComments);\n      };\n    }\n  };\n  StickyNotesAnnotation.prototype.renderCommentsOnSuccess = function (data, proxy) {\n    if (data) {\n      var isInitialRender = false;\n      if (proxy.pdfViewerBase.annotationComments) {\n        // eslint-disable-next-line\n        proxy.pdfViewerBase.annotationComments = data.annotationDetails;\n      } else {\n        proxy.pdfViewerBase.annotationComments = data.annotationDetails;\n        isInitialRender = true;\n      }\n      if (data.annotationDetails && data.uniqueId === proxy.pdfViewerBase.documentId) {\n        proxy.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.renderComments, data);\n        proxy.isAnnotationRendered = true;\n        // eslint-disable-next-line\n        var annotationCollections = void 0;\n        if (proxy.pdfViewerBase.documentAnnotationCollections) {\n          // eslint-disable-next-line max-len\n          annotationCollections = proxy.updateAnnotationsInDocumentCollections(proxy.pdfViewerBase.annotationComments, proxy.pdfViewerBase.documentAnnotationCollections);\n        } else {\n          // eslint-disable-next-line\n          var newCollection = proxy.pdfViewerBase.createAnnotationsCollection();\n          // eslint-disable-next-line max-len\n          annotationCollections = proxy.updateAnnotationsInDocumentCollections(proxy.pdfViewerBase.annotationComments, newCollection);\n        }\n        proxy.pdfViewerBase.annotationComments = annotationCollections;\n        proxy.pdfViewerBase.documentAnnotationCollections = annotationCollections;\n        for (var i = data.startPageIndex; i < data.endPageIndex; i++) {\n          var newData = data.annotationDetails[i];\n          proxy.pdfViewerBase.updateModifiedDateToLocalDate(newData, \"annotationOrder\");\n          proxy.pdfViewerBase.updateModifiedDateToLocalDate(newData, \"freeTextAnnotation\");\n          proxy.pdfViewerBase.updateModifiedDateToLocalDate(newData, \"measureShapeAnnotation\");\n          proxy.pdfViewerBase.updateModifiedDateToLocalDate(newData, \"shapeAnnotation\");\n          proxy.pdfViewerBase.updateModifiedDateToLocalDate(newData, \"signatureAnnotation\");\n          proxy.pdfViewerBase.updateModifiedDateToLocalDate(newData, \"signatureInkAnnotation\");\n          proxy.pdfViewerBase.updateModifiedDateToLocalDate(newData, \"stampAnnotations\");\n          proxy.pdfViewerBase.updateModifiedDateToLocalDate(newData, \"stickyNotesAnnotation\");\n          proxy.pdfViewerBase.updateModifiedDateToLocalDate(newData, \"textMarkupAnnotation\");\n        }\n        for (var j = data.startPageIndex; j < data.endPageIndex; j++) {\n          if (data.annotationDetails[j]) {\n            proxy.renderAnnotationCollections(data.annotationDetails[j], j, isInitialRender);\n          }\n        }\n        if (!proxy.isPageCommentsRendered) {\n          proxy.isPageCommentsRendered = true;\n          proxy.createRequestForComments();\n        }\n      }\n    }\n  };\n  /**\n   * @param excistingAnnotation\n   * @param newAnnotation\n   * @private\n   */\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.updateAnnotationsInDocumentCollections = function (excistingAnnotation, newAnnotation) {\n    for (var i = 0; i < this.pdfViewerBase.pageCount; i++) {\n      if (excistingAnnotation[i] && newAnnotation[i]) {\n        // eslint-disable-next-line max-len\n        if (excistingAnnotation[i].textMarkupAnnotation && excistingAnnotation[i].textMarkupAnnotation.length !== 0 && newAnnotation[i].textMarkupAnnotation) {\n          for (var j = 0; j < excistingAnnotation[i].textMarkupAnnotation.length; j++) {\n            // eslint-disable-next-line max-len\n            this.updateDocumentAnnotationCollections(excistingAnnotation[i].textMarkupAnnotation[j], newAnnotation[i].textMarkupAnnotation);\n          }\n        }\n        // eslint-disable-next-line max-len\n        if (excistingAnnotation[i].shapeAnnotation && excistingAnnotation[i].shapeAnnotation.length !== 0 && newAnnotation[i].shapeAnnotation) {\n          for (var j = 0; j < excistingAnnotation[i].shapeAnnotation.length; j++) {\n            // eslint-disable-next-line max-len\n            this.updateDocumentAnnotationCollections(excistingAnnotation[i].shapeAnnotation[j], newAnnotation[i].shapeAnnotation);\n          }\n        }\n        // eslint-disable-next-line max-len\n        if (excistingAnnotation[i].measureShapeAnnotation && excistingAnnotation[i].measureShapeAnnotation.length !== 0 && newAnnotation[i].measureShapeAnnotation) {\n          for (var j = 0; j < excistingAnnotation[i].measureShapeAnnotation.length; j++) {\n            // eslint-disable-next-line max-len\n            this.updateDocumentAnnotationCollections(excistingAnnotation[i].measureShapeAnnotation[j], newAnnotation[i].measureShapeAnnotation);\n          }\n        }\n        // eslint-disable-next-line max-len\n        if (excistingAnnotation[i].stampAnnotations && excistingAnnotation[i].stampAnnotations.length !== 0 && newAnnotation[i].stampAnnotations) {\n          for (var j = 0; j < excistingAnnotation[i].stampAnnotations.length; j++) {\n            // eslint-disable-next-line max-len\n            this.updateDocumentAnnotationCollections(excistingAnnotation[i].stampAnnotations[j], newAnnotation[i].stampAnnotations);\n          }\n        }\n        // eslint-disable-next-line max-len\n        if (excistingAnnotation[i].stickyNotesAnnotation && excistingAnnotation[i].stickyNotesAnnotation.length !== 0 && newAnnotation[i].stickyNotesAnnotation) {\n          for (var j = 0; j < excistingAnnotation[i].stickyNotesAnnotation.length; j++) {\n            // eslint-disable-next-line max-len\n            this.updateDocumentAnnotationCollections(excistingAnnotation[i].stickyNotesAnnotation[j], newAnnotation[i].stickyNotesAnnotation);\n          }\n        }\n        // eslint-disable-next-line max-len\n        if (excistingAnnotation[i].freeTextAnnotation && excistingAnnotation[i].freeTextAnnotation.length !== 0 && newAnnotation[i].freeTextAnnotation) {\n          for (var j = 0; j < excistingAnnotation[i].freeTextAnnotation.length; j++) {\n            // eslint-disable-next-line max-len\n            this.updateDocumentAnnotationCollections(excistingAnnotation[i].freeTextAnnotation[j], newAnnotation[i].freeTextAnnotation);\n          }\n        }\n        // eslint-disable-next-line max-len\n        if (excistingAnnotation[i].signatureAnnotation && excistingAnnotation[i].signatureAnnotation.length !== 0 && newAnnotation[i].signatureAnnotation) {\n          for (var j = 0; j < excistingAnnotation[i].signatureAnnotation.length; j++) {\n            // eslint-disable-next-line max-len\n            this.updateDocumentAnnotationCollections(excistingAnnotation[i].signatureAnnotation[j], newAnnotation[i].signatureAnnotation);\n          }\n        }\n        // eslint-disable-next-line max-len\n        if (excistingAnnotation[i].signatureInkAnnotation && excistingAnnotation[i].signatureInkAnnotation.length !== 0 && newAnnotation[i].signatureInkAnnotation) {\n          for (var j = 0; j < excistingAnnotation[i].signatureInkAnnotation.length; j++) {\n            // eslint-disable-next-line max-len\n            this.updateDocumentAnnotationCollections(excistingAnnotation[i].signatureInkAnnotation[j], newAnnotation[i].signatureInkAnnotation);\n          }\n        }\n      }\n    }\n    return newAnnotation;\n  };\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.updateDocumentAnnotationCollections = function (excistingAnnotation, newAnnotation) {\n    if (newAnnotation.length === 0) {\n      newAnnotation.push(excistingAnnotation);\n    } else {\n      var isAdded = false;\n      for (var i = 0; i < newAnnotation.length; i++) {\n        // eslint-disable-next-line max-len\n        if (excistingAnnotation.AnnotName && newAnnotation[i].AnnotName && excistingAnnotation.AnnotName === newAnnotation[i].AnnotName) {\n          isAdded = true;\n          break;\n        }\n      }\n      if (!isAdded) {\n        newAnnotation.push(excistingAnnotation);\n      }\n    }\n  };\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.renderAnnotationCollections = function (pageAnnotations, pageNumber, isInitialRender) {\n    // eslint-disable-next-line\n    var pageCollections = [];\n    var collection = pageAnnotations.annotationOrder;\n    if (!isNullOrUndefined(collection)) {\n      for (var l = 0; l < collection.length; l++) {\n        var annotation = collection[parseInt(l.toString(), 10)];\n        var type = annotation.AnnotType ? annotation.AnnotType : annotation.AnnotationType;\n        if (this.pdfViewer.dateTimeFormat) {\n          annotation.ModifiedDate = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(annotation.ModifiedDate);\n        }\n        pageCollections.push(annotation);\n        switch (type) {\n          case \"textMarkup\":\n            if (!isNullOrUndefined(this.pdfViewer.annotationModule) && !isNullOrUndefined(this.pdfViewer.annotationModule.textMarkupAnnotationModule)) {\n              this.updateCollections(this.pdfViewer.annotationModule.textMarkupAnnotationModule.updateTextMarkupAnnotationCollections(annotation, pageNumber));\n            }\n            break;\n          case \"shape_measure\":\n            if (!isNullOrUndefined(this.pdfViewer.annotationModule) && !isNullOrUndefined(this.pdfViewer.annotationModule.measureAnnotationModule)) {\n              this.updateCollections(this.pdfViewer.annotationModule.measureAnnotationModule.updateMeasureAnnotationCollections(annotation, pageNumber));\n            }\n            break;\n          case \"shape\":\n            if (!isNullOrUndefined(this.pdfViewer.annotationModule) && !isNullOrUndefined(this.pdfViewer.annotationModule.shapeAnnotationModule)) {\n              this.updateCollections(this.pdfViewer.annotationModule.shapeAnnotationModule.updateShapeAnnotationCollections(annotation, pageNumber));\n            }\n            break;\n          case \"sticky\":\n            this.updateCollections(this.updateStickyNotesAnnotationCollections(annotation, pageNumber));\n            break;\n          case \"stamp\":\n            if (!isNullOrUndefined(this.pdfViewer.annotationModule) && !isNullOrUndefined(this.pdfViewer.annotationModule.stampAnnotationModule)) {\n              this.updateCollections(this.pdfViewer.annotationModule.stampAnnotationModule.updateStampAnnotationCollections(annotation, pageNumber));\n            }\n            break;\n          case \"Ink\":\n            if (!isNullOrUndefined(this.pdfViewer.annotationModule) && !isNullOrUndefined(this.pdfViewer.annotationModule.inkAnnotationModule)) {\n              this.updateCollections(this.pdfViewer.annotationModule.inkAnnotationModule.updateInkCollections(annotation, pageNumber));\n            }\n            break;\n          case \"Text Box\":\n            if (!isNullOrUndefined(this.pdfViewer.annotationModule) && !isNullOrUndefined(this.pdfViewer.annotationModule.freeTextAnnotationModule)) {\n              this.updateCollections(this.pdfViewer.annotationModule.freeTextAnnotationModule.updateFreeTextAnnotationCollections(annotation, pageNumber));\n            }\n            break;\n          default:\n            break;\n        }\n      }\n    }\n    if (pageAnnotations.signatureAnnotation && pageAnnotations.signatureAnnotation.length !== 0) {\n      for (var i = 0; i < pageAnnotations.signatureAnnotation.length; i++) {\n        if (this.pdfViewer.dateTimeFormat) {\n          // eslint-disable-next-line max-len\n          pageAnnotations.signatureAnnotation[i].ModifiedDate = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(pageAnnotations.signatureAnnotation[i].ModifiedDate);\n        }\n        // eslint-disable-next-line max-len\n        this.updateCollections(this.pdfViewerBase.signatureModule.updateSignatureCollections(pageAnnotations.signatureAnnotation[i], pageNumber), true);\n      }\n    }\n    if (this.pdfViewer.toolbarModule) {\n      this.renderAnnotationComments(pageCollections, pageNumber);\n    }\n    if (isInitialRender) {\n      for (var i = 0; i < this.pdfViewerBase.renderedPagesList.length; i++) {\n        if (this.pdfViewerBase.renderedPagesList[i] === pageNumber) {\n          this.pdfViewerBase.renderAnnotations(pageNumber, pageAnnotations, false);\n        }\n      }\n    }\n  };\n  /**\n   * @param annotation\n   * @param isSignature\n   * @param annotation\n   * @param isSignature\n   * @private\n   */\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.updateCollections = function (annotation, isSignature) {\n    var isAdded = false;\n    // eslint-disable-next-line\n    var collections;\n    if (isSignature) {\n      collections = this.pdfViewer.signatureCollection;\n    } else {\n      collections = this.pdfViewer.annotationCollection;\n    }\n    if (collections && annotation) {\n      for (var i = 0; i < collections.length; i++) {\n        if (isSignature) {\n          if (collections[i].signatureName === annotation.signatureName) {\n            isAdded = true;\n            break;\n          }\n        } else {\n          if (collections[i].annotationId === annotation.annotationId) {\n            isAdded = true;\n            break;\n          }\n        }\n      }\n    }\n    if (!isAdded && annotation) {\n      if (isSignature) {\n        this.pdfViewer.signatureCollection.push(annotation);\n      } else {\n        this.pdfViewer.annotationCollection.push(annotation);\n      }\n    }\n  };\n  /**\n   * @param data\n   * @param pageIndex\n   * @private\n   */\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.renderAnnotationComments = function (data, pageIndex) {\n    pageIndex = pageIndex + 1;\n    if (data) {\n      if (data.length !== 0) {\n        this.createPageAccordion(pageIndex);\n        for (var i = 0; i < data.length; i++) {\n          if (data[i].AnnotName && data[i].AnnotName.split('freeText').length === 1) {\n            this.createCommentControlPanel(data[i], pageIndex);\n          }\n        }\n        // eslint-disable-next-line\n        var newCommentsDiv = document.querySelectorAll('.e-pv-new-comments-div');\n        if (newCommentsDiv) {\n          for (var j = 0; j < newCommentsDiv.length; j++) {\n            newCommentsDiv[j].style.display = 'none';\n          }\n        }\n      }\n    }\n  };\n  /**\n   * @private\n   */\n  StickyNotesAnnotation.prototype.initializeAcccordionContainer = function () {\n    // eslint-disable-next-line max-len\n    var commentPanelText = createElement('div', {\n      id: this.pdfViewer.element.id + '_commentsPanelText',\n      className: 'e-pv-comments-panel-text'\n    });\n    if (isBlazor()) {\n      var promise = this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText', 'PdfViewer_NoCommentsYet');\n      promise.then(function (value) {\n        commentPanelText.textContent = value;\n      });\n    } else {\n      commentPanelText.textContent = this.pdfViewer.localeObj.getConstant('No Comments Yet');\n    }\n    this.updateCommentPanelTextTop();\n    this.pdfViewerBase.navigationPane.commentsContentContainer.appendChild(commentPanelText);\n    // eslint-disable-next-line max-len\n    this.accordionContentContainer = createElement('div', {\n      id: this.pdfViewer.element.id + '_accordionContentContainer',\n      className: 'e-pv-accordion-content-container'\n    });\n    this.pdfViewerBase.navigationPane.commentsContentContainer.appendChild(this.accordionContentContainer);\n    // eslint-disable-next-line max-len\n    this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export Annotations')], false);\n    // eslint-disable-next-line max-len\n    this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export XFDF')], false);\n  };\n  /**\n   * @private\n   */\n  StickyNotesAnnotation.prototype.updateCommentPanelTextTop = function () {\n    var commentPanelText = document.getElementById(this.pdfViewer.element.id + '_commentsPanelText');\n    // eslint-disable-next-line max-len\n    if (this.pdfViewerBase.navigationPane.commentPanelContainer && this.pdfViewerBase.navigationPane.commentPanelContainer.clientHeight && commentPanelText.style.display !== 'none') {\n      commentPanelText.style.paddingTop = this.pdfViewerBase.navigationPane.commentPanelContainer.clientHeight / 2 - 47 + 'px';\n      commentPanelText.style.paddingLeft = this.pdfViewerBase.navigationPane.commentPanelContainer.clientWidth / 3 + 'px';\n    }\n  };\n  /**\n   * @param pageIndex\n   * @private\n   */\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.createPageAccordion = function (pageIndex) {\n    var pageAccordionContainer = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + pageIndex);\n    if (pageAccordionContainer === null) {\n      this.accordionContent = createElement('div', {\n        id: this.pdfViewer.element.id + '_accordioncontent' + pageIndex\n      });\n      this.accordionContent.style.zIndex = '1000';\n      // eslint-disable-next-line max-len\n      this.accordionPageContainer = createElement('div', {\n        id: this.pdfViewer.element.id + '_accordionPageContainer' + pageIndex,\n        className: 'e-pv-accordion-page-container'\n      });\n      this.accordionPageContainer.appendChild(this.accordionContent);\n      this.pdfViewerBase.viewerMainContainer.appendChild(this.accordionPageContainer);\n      // eslint-disable-next-line max-len\n      this.accordionContainer = createElement('div', {\n        id: this.pdfViewer.element.id + '_accordionContainer' + pageIndex,\n        className: 'e-pv-accordion-container'\n      });\n      var pageAccordion = new Accordion({\n        items: [\n        // eslint-disable-next-line max-len\n        {\n          header: this.pdfViewer.localeObj.getConstant('Page') + ' ' + pageIndex,\n          expanded: true,\n          content: '#' + this.pdfViewer.element.id + '_accordioncontent' + pageIndex + ''\n        }]\n      });\n      pageAccordion.appendTo(this.accordionContainer);\n      this.accordionContainer.style.order = 'pageIndex';\n      this.alignAccordionContainer(this.accordionContainer, pageIndex);\n      if (document.getElementById(this.pdfViewer.element.id + '_commentsPanelText')) {\n        // eslint-disable-next-line max-len\n        this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export Annotations')], true);\n        // eslint-disable-next-line max-len\n        this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export XFDF')], true);\n        document.getElementById(this.pdfViewer.element.id + '_commentsPanelText').style.display = 'none';\n      }\n      if (document.getElementById(this.pdfViewer.element.id + '_accordionContentContainer')) {\n        document.getElementById(this.pdfViewer.element.id + '_accordionContentContainer').style.display = 'block';\n      }\n      return this.accordionContainer;\n    }\n  };\n  StickyNotesAnnotation.prototype.alignAccordionContainer = function (accordionDiv, pageIndex) {\n    var isAdded = true;\n    if (this.accordionContentContainer) {\n      if (this.isAccordionContainer) {\n        this.accordionContentContainer.appendChild(accordionDiv);\n        isAdded = false;\n      } else {\n        for (var i = 1; i <= this.pdfViewerBase.pageCount; i++) {\n          var nextElement = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + i);\n          if (nextElement) {\n            if (pageIndex < i) {\n              this.accordionContentContainer.insertBefore(accordionDiv, nextElement);\n              isAdded = false;\n              break;\n            }\n          }\n        }\n      }\n      if (isAdded) {\n        this.accordionContentContainer.appendChild(accordionDiv);\n        isAdded = false;\n      }\n      this.isAccordionContainer = false;\n    }\n  };\n  /**\n   * @param pageNumber\n   * @private\n   */\n  StickyNotesAnnotation.prototype.updateCommentPanelScrollTop = function (pageNumber) {\n    var accordionDiv = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + pageNumber);\n    if (accordionDiv) {\n      var scrollValue = accordionDiv.offsetTop + accordionDiv.clientTop - 35;\n      this.pdfViewerBase.navigationPane.commentsContentContainer.scrollTop = scrollValue;\n    }\n  };\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.getButtonState = function (editObj, commentTextBox) {\n    commentTextBox.addEventListener('keyup', function (event) {\n      if (editObj.element.querySelector('.e-btn-save')) {\n        if ((event.srcElement.value !== '' || event.srcElement.defaultValue != '') && event.srcElement.defaultValue !== event.srcElement.value) {\n          editObj.element.querySelector('.e-btn-save').ej2_instances[0].disabled = false;\n        }\n      }\n    });\n  };\n  /**\n   * @param data\n   * @param pageIndex\n   * @param type\n   * @param annotationSubType\n   * @param data\n   * @param pageIndex\n   * @param type\n   * @param annotationSubType\n   * @param data\n   * @param pageIndex\n   * @param type\n   * @param annotationSubType\n   * @private\n   */\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.createCommentControlPanel = function (data, pageIndex, type, annotationSubType, isReRender) {\n    var accordionContent = document.getElementById(this.pdfViewer.element.id + '_accordioncontent' + pageIndex);\n    if (accordionContent) {\n      // eslint-disable-next-line\n      var accordionExpand = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + pageIndex);\n      if (accordionExpand) {\n        accordionExpand.ej2_instances[0].expandItem(true);\n      }\n      // eslint-disable-next-line max-len\n      this.commentsContainer = createElement('div', {\n        id: this.pdfViewer.element.id + 'commentscontainer_' + pageIndex + '_' + this.commentsCount,\n        className: 'e-pv-comments-container'\n      });\n      this.commentsContainer.accessKey = pageIndex.toString() + '_' + this.commentsCount;\n      var isCommentsAdded = false;\n      if (data) {\n        this.commentsContainer.id = data.AnnotName;\n        if (data.AnnotName) {\n          for (var j = 0; j < accordionContent.childElementCount; j++) {\n            if (accordionContent.children[j].id === data.AnnotName) {\n              isCommentsAdded = true;\n              if (isReRender) {\n                // To remove the existing div element in the comment panel while importing the annotation with the same name. (EJ2-62092)\n                var id = document.getElementById(accordionContent.children[j].id);\n                id.remove();\n                isCommentsAdded = false;\n              }\n              break;\n            }\n          }\n        }\n        if (data.Name && data.Name === 'freeText') {\n          this.commentsContainer.setAttribute('name', 'freeText');\n        } else {\n          this.commentsContainer.setAttribute('name', data.AnnotType);\n        }\n      }\n      if (type) {\n        this.commentsContainer.setAttribute('name', type);\n      }\n      this.commentsContainer.addEventListener('mousedown', this.commentsAnnotationSelect.bind(this));\n      // eslint-disable-next-line max-len\n      var commentDiv = createElement('div', {\n        id: this.pdfViewer.element.id + '_commentdiv_' + pageIndex + '_' + this.commentsCount,\n        className: 'e-pv-comments-div'\n      });\n      this.commentsCount = this.commentsCount + 1;\n      this.commentsContainer.appendChild(commentDiv);\n      this.updateCommentPanelScrollTop(pageIndex);\n      if (!isCommentsAdded) {\n        accordionContent.appendChild(this.commentsContainer);\n      }\n      var title = void 0;\n      if (data) {\n        title = this.commentsContainer.getAttribute('name');\n        if (title === 'null') {\n          title = data.AnnotationType;\n        }\n        this.createTitleContainer(commentDiv, title, pageIndex, data.Subject, data.ModifiedDate, data.Author);\n      } else {\n        title = this.commentsContainer.getAttribute('name');\n        this.createTitleContainer(commentDiv, title, pageIndex, annotationSubType);\n      }\n      // eslint-disable-next-line max-len\n      var commentTextBox = createElement('div', {\n        id: this.pdfViewer.element.id + '_commenttextbox_' + pageIndex + '_' + this.commentsCount,\n        className: 'e-pv-comment-textbox',\n        attrs: {\n          'role': 'textbox',\n          'aria-label': \"comment textbox\"\n        }\n      });\n      // eslint-disable-next-line\n      var editObj_1 = new InPlaceEditor({\n        mode: 'Inline',\n        type: 'Text',\n        model: {\n          placeholder: this.pdfViewer.localeObj.getConstant('Add a comment') + '..'\n        },\n        emptyText: '',\n        editableOn: 'EditIconClick',\n        saveButton: {\n          content: this.pdfViewer.localeObj.getConstant('Post'),\n          cssClass: 'e-outline',\n          disabled: true\n        },\n        cancelButton: {\n          content: this.pdfViewer.localeObj.getConstant('Cancel'),\n          cssClass: 'e-outline'\n        },\n        submitOnEnter: true\n      });\n      if (data && (!isNullOrUndefined(data.Note) || !isNullOrUndefined(data.Text))) {\n        editObj_1.created = function () {\n          setTimeout(function () {\n            editObj_1.element.querySelector('.e-editable-value').innerText = !isNullOrUndefined(data.Note) ? data.Note : !isNullOrUndefined(data.Text) ? data.Text : '';\n          });\n        };\n        editObj_1.beginEdit = function () {\n          editObj_1.value = editObj_1.valueEle.innerText;\n        };\n      }\n      editObj_1.appendTo(commentTextBox);\n      // eslint-disable-next-line\n      var textBox = document.querySelectorAll('.e-editable-inline');\n      for (var j = 0; j < textBox.length; j++) {\n        textBox[j].style.display = 'none';\n      }\n      if (!data && type !== 'freeText') {\n        editObj_1.enableEditMode = true;\n      }\n      this.getButtonState(editObj_1, commentTextBox);\n      editObj_1.actionSuccess = this.createCommentDiv.bind(this, editObj_1);\n      commentDiv.appendChild(commentTextBox);\n      if (data) {\n        editObj_1.value = !isNullOrUndefined(data.Note) ? data.Note : !isNullOrUndefined(data.Text) ? data.Text : '';\n        var isCommentLocked = this.checkIslockProperty(data);\n        if (isCommentLocked && data.Comments == null) {\n          this.createCommentDiv(this.commentsContainer);\n        }\n        if (data.Name === 'freeText') {\n          editObj_1.value = data.MarkupText;\n        }\n        if (data.State) {\n          // eslint-disable-next-line max-len\n          var statusContainer = createElement('div', {\n            id: this.pdfViewer.element.id + 'status' + '_container',\n            className: 'e-pv-status-container'\n          });\n          // eslint-disable-next-line max-len\n          var statusDiv = createElement('div', {\n            id: this.pdfViewer.element.id + 'status' + '_div',\n            className: 'e-pv-status-div'\n          });\n          var statusSpan = createElement('span', {\n            id: this.pdfViewer.element.id + 'status' + '_icon'\n          });\n          statusDiv.appendChild(statusSpan);\n          statusContainer.appendChild(statusDiv);\n          commentDiv.appendChild(statusContainer);\n          this.updateStatusContainer(data.State, statusSpan, statusDiv, statusContainer);\n        }\n        if (data.Comments) {\n          for (var j = 0; j < data.Comments.length; j++) {\n            this.renderComments(data.Comments[j], this.commentsContainer);\n          }\n          if (data.Note !== ' ' && data.Note !== '' && data.Note !== null) {\n            this.createCommentDiv(this.commentsContainer);\n          }\n          if (data.AnnotType === \"Text Box\" && data.Text !== ' ' && data.Text !== '' && data.Text !== null) {\n            this.createCommentDiv(this.commentsContainer);\n          }\n        }\n      }\n      this.isNewcommentAdded = true;\n      commentDiv.addEventListener('click', this.commentsDivClickEvent.bind(this));\n      commentDiv.addEventListener('mouseover', this.commentDivMouseOver.bind(this));\n      commentDiv.addEventListener('mouseleave', this.commentDivMouseLeave.bind(this));\n      commentDiv.addEventListener('mouseout', this.commentDivMouseLeave.bind(this));\n      commentDiv.addEventListener('focusout', this.commentDivMouseLeave.bind(this));\n      commentTextBox.addEventListener('dblclick', this.openEditorElement.bind(this));\n      commentTextBox.addEventListener('focusin', this.commentDivFocus.bind(this));\n      return this.commentsContainer.id;\n    }\n    return '';\n  };\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.commentDivFocus = function (args) {\n    if (isNullOrUndefined(this.pdfViewer.freeTextSettings.defaultText)) {\n      this.pdfViewer.freeTextSettings.defaultText = \"Type here\";\n    }\n    // eslint-disable-next-line\n    if (!isNullOrUndefined(args.target) && !isNullOrUndefined(this.pdfViewer.freeTextSettings.defaultText) && this.pdfViewer.selectedItems && this.pdfViewer.selectedItems.annotations[0] && this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'FreeText' && args.target.value === this.pdfViewer.freeTextSettings.defaultText) {\n      args.target.select();\n    }\n    // eslint-disable-next-line\n    if (!this.isNewcommentAdded) {\n      if (args.relatedTarget !== null && args.relatedTarget.id === this.pdfViewer.element.id + '_viewerContainer') {\n        args.preventDefault();\n        args.target.blur();\n      }\n    } else {\n      var proxy_1 = this;\n      var pageNumber_1 = this.pdfViewerBase.currentPageNumber;\n      setTimeout(function () {\n        proxy_1.updateScrollPosition(pageNumber_1);\n      }, 500);\n    }\n  };\n  StickyNotesAnnotation.prototype.updateScrollPosition = function (pageNumber) {\n    var accordionDiv = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + pageNumber);\n    if (accordionDiv && this.isNewcommentAdded) {\n      var commentHeight = 0;\n      // eslint-disable-next-line\n      var textBox = document.querySelectorAll('.e-editable-inline');\n      if (textBox[0]) {\n        commentHeight = textBox[0].getBoundingClientRect().height;\n      }\n      var scrollValue = accordionDiv.offsetTop + accordionDiv.clientTop + commentHeight;\n      if (this.pdfViewerBase.navigationPane.commentsContentContainer.scrollTop < scrollValue) {\n        this.pdfViewerBase.navigationPane.commentsContentContainer.scrollTop = scrollValue;\n      }\n      this.isNewcommentAdded = false;\n    }\n  };\n  StickyNotesAnnotation.prototype.updateCommentsScrollTop = function (isCommentsAdded) {\n    // eslint-disable-next-line max-len\n    var accordionDiv = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + this.pdfViewerBase.currentPageNumber);\n    // eslint-disable-next-line\n    var commentsContainer = document.querySelector('.e-pv-comments-border');\n    var commentsHeight = 0;\n    if (accordionDiv && commentsContainer) {\n      commentsHeight = commentsContainer.getBoundingClientRect().height;\n      var scrollValue = void 0;\n      if (isCommentsAdded) {\n        scrollValue = accordionDiv.offsetTop + commentsContainer.offsetTop + commentsHeight / 4;\n      } else {\n        scrollValue = accordionDiv.offsetTop + commentsContainer.offsetTop - 70;\n      }\n      this.pdfViewerBase.navigationPane.commentsContentContainer.scrollTop = scrollValue;\n    }\n  };\n  /**\n   * @param args\n   * @private\n   */\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.createCommentDiv = function (args) {\n    var _this = this;\n    var commentsContainer;\n    var titleContainer;\n    // eslint-disable-next-line\n    var newCommentDiv = createElement('div', {\n      id: this.pdfViewer.element.id + '_newcommentdiv_' + this.commentsCount + '_' + this.commentsreplyCount,\n      className: 'e-pv-new-comments-div'\n    });\n    if (args.localName) {\n      commentsContainer = args;\n    } else {\n      commentsContainer = args.valueEle.parentElement.parentElement.parentElement.parentElement;\n      titleContainer = args.valueEle.parentElement.parentElement.previousSibling.childNodes[1];\n    }\n    // eslint-disable-next-line\n    var commentObj = new InPlaceEditor({\n      mode: 'Inline',\n      type: 'Text',\n      value: '',\n      editableOn: 'Click',\n      model: {\n        placeholder: this.pdfViewer.localeObj.getConstant('Add a reply') + '..'\n      },\n      emptyText: this.pdfViewer.localeObj.getConstant('Add a reply'),\n      saveButton: {\n        content: this.pdfViewer.localeObj.getConstant('Post'),\n        cssClass: 'e-outline',\n        disabled: true\n      },\n      cancelButton: {\n        content: this.pdfViewer.localeObj.getConstant('Cancel'),\n        cssClass: 'e-outline'\n      },\n      submitOnEnter: true\n    });\n    commentObj.appendTo(newCommentDiv);\n    newCommentDiv.lastChild.firstChild.click();\n    // eslint-disable-next-line\n    this.getButtonState(commentObj, newCommentDiv);\n    if (args.valueEle) {\n      if (args.value != null && args.value !== \"\") {\n        // eslint-disable-next-line max-len\n        if (this.pdfViewer.selectedItems.annotations[0] && this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'FreeText') {\n          this.modifyTextProperty(args.value, args.prevValue, args.valueEle.parentNode.parentNode.parentNode.parentNode.id);\n        } else {\n          try {\n            this.modifyTextProperty(args.value, args.prevValue, args.valueEle.parentNode.parentNode.parentNode.parentNode.id);\n          } catch (error) {\n            this.modifyTextProperty(args.value, args.prevValue);\n          }\n        }\n        if (args.prevValue != args.value) {\n          this.updateModifiedDate(titleContainer);\n        }\n      }\n      if (args.valueEle.parentElement.parentElement.parentElement.parentElement.childElementCount === 1) {\n        if (args.value != null && args.value !== \"\") {\n          commentsContainer.appendChild(newCommentDiv);\n          setTimeout(function () {\n            _this.updateCommentsScrollTop(true);\n          }, 50);\n        }\n      }\n    } else {\n      commentsContainer.appendChild(newCommentDiv);\n      setTimeout(function () {\n        _this.updateCommentsScrollTop(true);\n      }, 50);\n    }\n    commentObj.actionSuccess = this.saveCommentDiv.bind(this, commentObj);\n  };\n  /**\n   * @param args\n   * @param comment\n   * @private\n   */\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.saveCommentDiv = function (args, comment) {\n    var commentsContainer;\n    var annotationAuthor;\n    // eslint-disable-next-line\n    var lastElement;\n    var commentValue;\n    if (comment.name && args.value !== '') {\n      commentsContainer = args.valueEle.parentElement.parentElement.parentElement;\n      lastElement = args.valueEle.parentElement.parentElement;\n      commentValue = args.value;\n    } else {\n      commentsContainer = args;\n      lastElement = commentsContainer.lastChild;\n      commentValue = comment;\n    }\n    if (commentsContainer && lastElement) {\n      commentsContainer.removeChild(lastElement);\n      var replyTextBox = createElement('div', {\n        id: this.pdfViewer.element.id + '_replytextbox_' + this.commentsCount + '_' + this.commentsreplyCount\n      });\n      this.commentsreplyCount = this.commentsreplyCount + 1;\n      // eslint-disable-next-line\n      var replyCommentDiv = createElement('div', {\n        id: this.pdfViewer.element.id + 'replyDiv_' + this.commentsCount + '_' + this.commentsreplyCount,\n        className: 'e-pv-reply-div'\n      });\n      replyCommentDiv.id = this.pdfViewer.annotation.createGUID();\n      annotationAuthor = this.getAuthorName(this.pdfViewer.selectedItems.annotations[0], commentsContainer);\n      this.createReplyDivTitleContainer(replyCommentDiv, null, annotationAuthor);\n      replyCommentDiv.addEventListener('mouseover', this.commentDivMouseOver.bind(this));\n      replyCommentDiv.addEventListener('mouseleave', this.commentDivMouseLeave.bind(this));\n      replyCommentDiv.addEventListener('click', this.commentDivOnSelect.bind(this));\n      replyTextBox.addEventListener('dblclick', this.openEditorElement.bind(this));\n      replyCommentDiv.style.border = 1 + 'px';\n      replyCommentDiv.style.borderColor = 'black';\n      replyCommentDiv.style.zIndex = 1002;\n      // eslint-disable-next-line\n      var saveObj_1 = new InPlaceEditor({\n        mode: 'Inline',\n        type: 'Text',\n        emptyText: '',\n        editableOn: 'EditIconClick',\n        model: {\n          placeholder: this.pdfViewer.localeObj.getConstant('Add a reply') + '..'\n        },\n        value: commentValue,\n        saveButton: {\n          content: this.pdfViewer.localeObj.getConstant('Post'),\n          cssClass: 'e-outline',\n          disabled: true\n        },\n        cancelButton: {\n          content: this.pdfViewer.localeObj.getConstant('Cancel'),\n          cssClass: 'e-outline'\n        }\n      });\n      saveObj_1.created = function () {\n        setTimeout(function () {\n          saveObj_1.element.querySelector('.e-editable-value').innerText = commentValue;\n        });\n      };\n      saveObj_1.beginEdit = function () {\n        saveObj_1.value = saveObj_1.valueEle.innerText;\n      };\n      saveObj_1.appendTo(replyTextBox);\n      saveObj_1.actionSuccess = this.modifyProperty.bind(this, saveObj_1);\n      replyCommentDiv.appendChild(replyTextBox);\n      replyCommentDiv.style.paddingLeft = 24 + 'px';\n      commentsContainer.appendChild(replyCommentDiv);\n      // eslint-disable-next-line\n      this.getButtonState(saveObj_1, replyTextBox);\n      replyCommentDiv.addEventListener('click', this.commentsDivClickEvent.bind(this));\n      replyCommentDiv.addEventListener('dblclick', this.commentsDivDoubleClickEvent.bind(this));\n      this.createCommentDiv(replyCommentDiv.parentElement);\n      this.modifyCommentsProperty(commentValue, replyCommentDiv.id, commentsContainer.id);\n    }\n  };\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.renderComments = function (data, commentDiv, undoRedoAction, id, isCommentAction) {\n    var annotationAuthor;\n    var replyTextBox = createElement('div', {\n      id: this.pdfViewer.element.id + '_replytextbox_' + this.commentsCount + '_' + this.commentsreplyCount\n    });\n    this.commentsreplyCount = this.commentsreplyCount + 1;\n    var replyDiv = createElement('div', {\n      id: 'replyDiv_' + this.commentsCount + '_' + this.commentsreplyCount,\n      className: 'e-pv-reply-div'\n    });\n    if (undoRedoAction) {\n      replyDiv.id = data.annotName;\n      annotationAuthor = data.author;\n    } else {\n      replyDiv.id = data.AnnotName;\n      annotationAuthor = data.Author;\n    }\n    replyDiv.style.border = 1 + 'px';\n    replyDiv.style.borderColor = 'black';\n    if (!annotationAuthor) {\n      annotationAuthor = commentDiv.getAttribute('author');\n    }\n    if (undoRedoAction) {\n      if (data.modifiedDate !== undefined) {\n        this.createReplyDivTitleContainer(replyDiv, data.modifiedDate, annotationAuthor);\n      } else {\n        this.createReplyDivTitleContainer(replyDiv, null, annotationAuthor);\n      }\n    } else {\n      this.createReplyDivTitleContainer(replyDiv, data.ModifiedDate, annotationAuthor);\n    }\n    replyDiv.addEventListener('mouseover', this.commentDivMouseOver.bind(this));\n    replyDiv.addEventListener('mouseleave', this.commentDivMouseLeave.bind(this));\n    replyDiv.addEventListener('click', this.commentDivOnSelect.bind(this));\n    replyTextBox.addEventListener('dblclick', this.openEditorElement.bind(this));\n    // eslint-disable-next-line\n    var saveObj = new InPlaceEditor({\n      mode: 'Inline',\n      type: 'Text',\n      emptyText: '',\n      editableOn: 'EditIconClick',\n      model: {\n        placeholder: this.pdfViewer.localeObj.getConstant('Add a reply') + '..'\n      },\n      value: '',\n      saveButton: {\n        content: this.pdfViewer.localeObj.getConstant('Post'),\n        cssClass: 'e-outline',\n        disabled: true\n      },\n      cancelButton: {\n        content: this.pdfViewer.localeObj.getConstant('Cancel'),\n        cssClass: 'e-outline'\n      }\n    });\n    if (undoRedoAction) {\n      saveObj.value = data.note;\n    } else {\n      saveObj.value = data.Note;\n    }\n    saveObj.created = function () {\n      setTimeout(function () {\n        saveObj.element.querySelector('.e-editable-value').innerText = undoRedoAction ? data ? data.note : '' : data ? data.Note : '';\n      });\n    };\n    saveObj.beginEdit = function () {\n      saveObj.value = saveObj.valueEle.innerText;\n    };\n    saveObj.appendTo(replyTextBox);\n    replyDiv.appendChild(replyTextBox);\n    if (undoRedoAction) {\n      data.State = data.state;\n    }\n    if (data.State) {\n      // eslint-disable-next-line max-len\n      var statusContainer = createElement('div', {\n        id: this.pdfViewer.element.id + 'status' + '_container',\n        className: 'e-pv-status-container'\n      });\n      // eslint-disable-next-line max-len\n      var statusDiv = createElement('div', {\n        id: this.pdfViewer.element.id + 'status' + '_div',\n        className: 'e-pv-status-div'\n      });\n      var statusSpan = createElement('span', {\n        id: this.pdfViewer.element.id + 'status' + '_icon'\n      });\n      statusDiv.appendChild(statusSpan);\n      statusContainer.appendChild(statusDiv);\n      replyDiv.appendChild(statusContainer);\n      this.updateStatusContainer(data.State, statusSpan, statusDiv, statusContainer);\n    }\n    replyDiv.style.paddingLeft = 24 + 'px';\n    // eslint-disable-next-line\n    this.getButtonState(saveObj, replyTextBox);\n    if (undoRedoAction) {\n      if (isCommentAction) {\n        commentDiv.appendChild(replyDiv);\n      } else {\n        // eslint-disable-next-line\n        var commentsDiv = document.getElementById(id);\n        if (data.position) {\n          commentsDiv.insertBefore(replyDiv, commentsDiv.childNodes[data.position]);\n        } else {\n          // eslint-disable-next-line\n          if (commentsDiv) {\n            if (commentsDiv.childElementCount > 1) {\n              commentsDiv.insertBefore(replyDiv, commentsDiv.childNodes[commentsDiv.childElementCount - 1]);\n            } else {\n              commentDiv.appendChild(replyDiv);\n            }\n          }\n        }\n      }\n    } else {\n      commentDiv.appendChild(replyDiv);\n    }\n    replyDiv.addEventListener('click', this.commentsDivClickEvent.bind(this));\n    replyDiv.addEventListener('dblclick', this.commentsDivDoubleClickEvent.bind(this));\n    saveObj.actionSuccess = this.modifyProperty.bind(this, saveObj);\n  };\n  /**\n   * @param data\n   * @param pageIndex\n   * @param isCopy\n   * @param data\n   * @param pageIndex\n   * @param isCopy\n   * @private\n   */\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.createCommentsContainer = function (data, pageIndex, isCopy) {\n    // eslint-disable-next-line\n    var accordionContentContainer = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + pageIndex);\n    if (!accordionContentContainer) {\n      // eslint-disable-next-line max-len\n      var accordionPageContainer = document.getElementById(this.pdfViewer.element.id + '_accordionPageContainer' + pageIndex);\n      if (accordionPageContainer) {\n        accordionPageContainer.parentElement.removeChild(accordionPageContainer);\n      }\n      accordionContentContainer = this.createPageAccordion(pageIndex);\n      if (accordionContentContainer) {\n        accordionContentContainer.ej2_instances[0].expandItem(true);\n      }\n    }\n    var accordionContent = document.getElementById(this.pdfViewer.element.id + '_accordioncontent' + pageIndex);\n    // eslint-disable-next-line max-len\n    this.commentsContainer = createElement('div', {\n      id: this.pdfViewer.element.id + 'commentscontainer_' + pageIndex + '_' + this.commentsCount,\n      className: 'e-pv-comments-container'\n    });\n    this.commentsContainer.accessKey = pageIndex.toString() + '_' + this.commentsCount;\n    if (data) {\n      this.commentsContainer.id = data.annotName ? data.annotName : data.annotationId;\n    }\n    this.commentsContainer.addEventListener('mousedown', this.commentsAnnotationSelect.bind(this));\n    // eslint-disable-next-line max-len\n    var commentDiv = createElement('div', {\n      id: this.pdfViewer.element.id + '_commentdiv_' + pageIndex + '_' + this.commentsCount,\n      className: 'e-pv-comments-div'\n    });\n    this.commentsCount = this.commentsCount + 1;\n    this.commentsContainer.appendChild(commentDiv);\n    this.updateCommentPanelScrollTop(pageIndex);\n    if (data && accordionContent) {\n      if (data.position || data.position === 0) {\n        accordionContent.insertBefore(this.commentsContainer, accordionContent.children[data.position]);\n      } else {\n        accordionContent.appendChild(this.commentsContainer);\n      }\n    }\n    if (data && accordionContent) {\n      if (data.indent) {\n        this.commentsContainer.setAttribute('name', 'shape_measure');\n        this.createTitleContainer(commentDiv, 'shape_measure', pageIndex, data.subject, data.modifiedDate, data.author);\n      } else if (data.shapeAnnotationType === 'sticky' || data.shapeAnnotationType === 'stamp') {\n        // eslint-disable-next-line max-len\n        var annotType = this.createTitleContainer(commentDiv, data.shapeAnnotationType, pageIndex, null, data.modifiedDate, data.author);\n        this.commentsContainer.setAttribute('name', annotType);\n        if (annotType === 'sticky') {\n          if (!isCopy) {\n            this.addStickyNotesAnnotations(pageIndex - 1, data);\n          }\n        }\n      } else if (data.shapeAnnotationType === 'textMarkup') {\n        this.commentsContainer.setAttribute('name', 'textMarkup');\n        this.createTitleContainer(commentDiv, 'textMarkup', pageIndex, data.subject, data.modifiedDate, data.author);\n      } else if (data.shapeAnnotationType === 'FreeText') {\n        data.note = data.dynamicText;\n        this.commentsContainer.setAttribute('name', 'freetext');\n        this.createTitleContainer(commentDiv, 'freeText', pageIndex, data.subject, data.modifiedDate);\n      } else if (data.shapeAnnotationType === 'Ink') {\n        data.note = data.dynamicText;\n        this.commentsContainer.setAttribute('name', 'ink');\n        this.createTitleContainer(commentDiv, 'ink', pageIndex, data.subject, data.modifiedDate);\n      } else {\n        this.commentsContainer.setAttribute('name', 'shape');\n        if (data.shapeAnnotationType === 'Line') {\n          this.createTitleContainer(commentDiv, 'shape', pageIndex, data.subject, data.modifiedDate, data.author);\n        } else {\n          this.createTitleContainer(commentDiv, 'shape', pageIndex, data.shapeAnnotationType, data.modifiedDate, data.author);\n        }\n      }\n    }\n    // eslint-disable-next-line max-len\n    var commentTextBox = createElement('div', {\n      id: this.pdfViewer.element.id + '_commenttextbox_' + pageIndex + '_' + this.commentsCount,\n      className: 'e-pv-comment-textbox',\n      attrs: {\n        'role': 'textbox',\n        'aria-label': \"comment textbox\"\n      }\n    });\n    // eslint-disable-next-line\n    var editObj = new InPlaceEditor({\n      mode: 'Inline',\n      type: 'Text',\n      model: {\n        placeholder: this.pdfViewer.localeObj.getConstant('Add a comment') + '..'\n      },\n      emptyText: '',\n      editableOn: 'EditIconClick',\n      saveButton: {\n        content: this.pdfViewer.localeObj.getConstant('Post'),\n        cssClass: 'e-outline',\n        disabled: true\n      },\n      cancelButton: {\n        content: this.pdfViewer.localeObj.getConstant('Cancel'),\n        cssClass: 'e-outline'\n      },\n      submitOnEnter: true\n    });\n    editObj.appendTo(commentTextBox);\n    // eslint-disable-next-line\n    var textBox = document.querySelectorAll('.e-editable-inline');\n    for (var j = 0; j < textBox.length; j++) {\n      textBox[j].style.display = 'none';\n    }\n    // eslint-disable-next-line\n    commentTextBox.addEventListener('keydown', function (event) {\n      if (editObj.element.querySelector('.e-btn-save')) {\n        if (event.srcElement.value !== '') {\n          editObj.element.querySelector('.e-btn-save').ej2_instances[0].disabled = false;\n        } else {\n          editObj.element.querySelector('.e-btn-save').ej2_instances[0].disabled = true;\n        }\n      }\n    });\n    editObj.actionSuccess = this.createCommentDiv.bind(this, editObj);\n    commentDiv.appendChild(commentTextBox);\n    if (data) {\n      editObj.value = data.note;\n      if (data.state) {\n        // eslint-disable-next-line max-len\n        var statusContainer = createElement('div', {\n          id: this.pdfViewer.element.id + 'status' + '_container',\n          className: 'e-pv-status-container'\n        });\n        // eslint-disable-next-line max-len\n        var statusDiv = createElement('div', {\n          id: this.pdfViewer.element.id + 'status' + '_div',\n          className: 'e-pv-status-div'\n        });\n        var statusSpan = createElement('span', {\n          id: this.pdfViewer.element.id + 'status' + '_icon'\n        });\n        statusDiv.appendChild(statusSpan);\n        statusContainer.appendChild(statusDiv);\n        commentDiv.appendChild(statusContainer);\n        this.updateStatusContainer(data.state, statusSpan, statusDiv, statusContainer);\n      }\n      if (data.comments) {\n        for (var j = 0; j < data.comments.length; j++) {\n          this.renderComments(data.comments[j], this.commentsContainer, true, null, true);\n        }\n        if (data.comments.length > 0) {\n          this.createCommentDiv(this.commentsContainer);\n        }\n      }\n    }\n    commentDiv.addEventListener('click', this.commentsDivClickEvent.bind(this));\n    commentDiv.addEventListener('mouseover', this.commentDivMouseOver.bind(this));\n    commentDiv.addEventListener('mouseleave', this.commentDivMouseLeave.bind(this));\n    commentDiv.addEventListener('mouseout', this.commentDivMouseLeave.bind(this));\n    commentDiv.addEventListener('focusout', this.commentDivMouseLeave.bind(this));\n    commentTextBox.addEventListener('dblclick', this.openEditorElement.bind(this));\n    return this.commentsContainer.id;\n  };\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.modifyProperty = function (args) {\n    var commentElement = args.element.parentElement.id;\n    var parentElement = args.element.parentElement.parentElement.id;\n    var titleElement = args.element.previousSibling.firstChild;\n    this.updateModifiedDate(titleElement);\n    this.modifyCommentsProperty(args.value, commentElement, parentElement, args.prevValue);\n  };\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.createTitleContainer = function (commentsDivElement, type, pageIndex, subType, modifiedDate, author, note) {\n    var annotationType = this.getAnnotationType(type);\n    // eslint-disable-next-line max-len\n    var commentTitleContainer = createElement('div', {\n      id: this.pdfViewer.element.id + '_commentTitleConatiner_' + pageIndex + '_' + this.commentsCount,\n      className: 'e-pv-comment-title-container'\n    });\n    // eslint-disable-next-line max-len\n    var commentTypeSpan = createElement('span', {\n      id: this.pdfViewer.element.id + '_commenttype' + '_icon' + pageIndex + '_' + this.commentsCount\n    });\n    commentTypeSpan.style.opacity = '0.6';\n    this.updateCommentIcon(commentTypeSpan, annotationType, subType);\n    var annotationAuthor;\n    if (!author) {\n      annotationAuthor = this.pdfViewer.annotationModule.updateAnnotationAuthor(annotationType, subType);\n    } else {\n      annotationAuthor = author;\n    }\n    commentTypeSpan.style.padding = 8 + 'px';\n    commentTypeSpan.style.cssFloat = 'left';\n    commentTitleContainer.appendChild(commentTypeSpan);\n    // eslint-disable-next-line max-len\n    var commentsTitle = createElement('div', {\n      id: this.pdfViewer.element.id + '_commentTitle_' + pageIndex + '_' + this.commentsCount,\n      className: 'e-pv-comment-title'\n    });\n    if (!modifiedDate) {\n      commentsTitle.textContent = annotationAuthor + ' - ' + this.setModifiedDate();\n    } else {\n      commentsTitle.textContent = annotationAuthor + ' - ' + this.convertUTCDateToLocalDate(modifiedDate);\n    }\n    commentTitleContainer.appendChild(commentsTitle);\n    this.moreButtonId = this.pdfViewer.element.id + '_more-options_' + this.commentsCount + '_' + this.commentsreplyCount;\n    // eslint-disable-next-line max-len\n    var moreOptionsButton = createElement('button', {\n      id: this.moreButtonId,\n      className: 'e-pv-more-options-button e-btn',\n      attrs: {\n        'tabindex': '-1'\n      }\n    });\n    moreOptionsButton.style.visibility = 'hidden';\n    moreOptionsButton.style.zIndex = '1001';\n    moreOptionsButton.setAttribute('type', 'button');\n    moreOptionsButton.setAttribute('aria-label', 'more button');\n    // eslint-disable-next-line max-len\n    var moreOptionsButtonSpan = createElement('span', {\n      id: this.pdfViewer.element.id + '_more-options_icon',\n      className: 'e-pv-more-icon e-pv-icon'\n    });\n    moreOptionsButton.appendChild(moreOptionsButtonSpan);\n    moreOptionsButtonSpan.style.opacity = '0.87';\n    commentTitleContainer.appendChild(moreOptionsButton);\n    commentsDivElement.appendChild(commentTitleContainer);\n    // eslint-disable-next-line\n    var commentsContainer = commentsDivElement.parentElement;\n    if (commentsContainer) {\n      var author_1 = this.pdfViewer.annotationModule.updateAnnotationAuthor(annotationType, subType);\n      commentsContainer.setAttribute('author', author_1);\n    }\n    if (!this.isCreateContextMenu) {\n      this.createCommentContextMenu();\n    }\n    this.isCreateContextMenu = true;\n    commentTitleContainer.addEventListener('dblclick', this.openTextEditor.bind(this));\n    moreOptionsButton.addEventListener('mouseup', this.moreOptionsClick.bind(this));\n    return annotationType;\n  };\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.createReplyDivTitleContainer = function (commentsDivElement, modifiedDate, annotationAuthor) {\n    // eslint-disable-next-line max-len\n    var replyTitleContainer = createElement('div', {\n      id: this.pdfViewer.element.id + '_replyTitleConatiner_' + this.commentsCount + '_' + this.commentsreplyCount,\n      className: 'e-pv-reply-title-container'\n    });\n    // eslint-disable-next-line max-len\n    var replyTitle = createElement('div', {\n      id: this.pdfViewer.element.id + '_replyTitle_' + this.commentsCount + '_' + this.commentsreplyCount,\n      className: 'e-pv-reply-title'\n    });\n    if (!modifiedDate) {\n      replyTitle.textContent = annotationAuthor + ' - ' + this.setModifiedDate();\n    } else {\n      replyTitle.textContent = annotationAuthor + ' - ' + this.setExistingAnnotationModifiedDate(modifiedDate);\n    }\n    replyTitleContainer.appendChild(replyTitle);\n    this.moreButtonId = this.pdfViewer.element.id + '_more-options_' + this.commentsCount + '_' + this.commentsreplyCount;\n    // eslint-disable-next-line max-len\n    var moreButton = createElement('button', {\n      id: this.moreButtonId,\n      className: 'e-pv-more-options-button e-btn',\n      attrs: {\n        'tabindex': '-1'\n      }\n    });\n    moreButton.style.visibility = 'hidden';\n    moreButton.style.zIndex = '1001';\n    moreButton.setAttribute('type', 'button');\n    moreButton.setAttribute('aria-label', 'more button');\n    // eslint-disable-next-line max-len\n    var moreButtonSpan = createElement('span', {\n      id: this.pdfViewer.element.id + '_more-options_icon',\n      className: 'e-pv-more-icon e-pv-icon'\n    });\n    moreButton.appendChild(moreButtonSpan);\n    moreButtonSpan.style.opacity = '0.87';\n    replyTitleContainer.appendChild(moreButton);\n    commentsDivElement.appendChild(replyTitleContainer);\n    replyTitleContainer.addEventListener('dblclick', this.openTextEditor.bind(this));\n    moreButton.addEventListener('mouseup', this.moreOptionsClick.bind(this));\n  };\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.updateCommentIcon = function (commentSpan, annotationType, annotationSubType) {\n    if (annotationType === 'sticky') {\n      commentSpan.className = 'e-pv-comment-icon e-pv-icon';\n    } else if (annotationType === 'stamp') {\n      commentSpan.className = 'e-pv-stamp-icon e-pv-icon';\n    } else if (annotationType === 'shape') {\n      if (annotationSubType === 'Line') {\n        commentSpan.className = 'e-pv-shape-line-icon e-pv-icon';\n      } else if (annotationSubType === 'LineWidthArrowHead' || annotationSubType === 'Arrow') {\n        commentSpan.className = 'e-pv-shape-arrow-icon e-pv-icon';\n      } else if (annotationSubType === 'Circle' || annotationSubType === 'Ellipse' || annotationSubType === 'Oval') {\n        commentSpan.className = 'e-pv-shape-circle-icon e-pv-icon';\n      } else if (annotationSubType === 'Rectangle' || annotationSubType === 'Square') {\n        commentSpan.className = 'e-pv-shape-rectangle-icon e-pv-icon';\n      } else if (annotationSubType === 'Polygon') {\n        commentSpan.className = 'e-pv-shape-pentagon-icon e-pv-icon';\n      } else {\n        commentSpan.className = 'e-pv-annotation-shape-icon e-pv-icon';\n      }\n    } else if (annotationType === 'measure') {\n      if (annotationSubType === 'Distance' || annotationSubType === 'Distance calculation') {\n        commentSpan.className = 'e-pv-calibrate-distance-icon e-pv-icon';\n      } else if (annotationSubType === 'Perimeter' || annotationSubType === 'Perimeter calculation') {\n        commentSpan.className = 'e-pv-calibrate-perimeter-icon e-pv-icon';\n      } else if (annotationSubType === 'Radius' || annotationSubType === 'Radius calculation') {\n        commentSpan.className = 'e-pv-calibrate-radius-icon e-pv-icon';\n      } else if (annotationSubType === 'Area' || annotationSubType === 'Area calculation') {\n        commentSpan.className = 'e-pv-calibrate-area-icon e-pv-icon';\n      } else if (annotationSubType === 'Volume' || annotationSubType === 'Volume calculation') {\n        commentSpan.className = 'e-pv-calibrate-volume-icon e-pv-icon';\n      } else {\n        commentSpan.className = 'e-pv-annotation-calibrate-icon e-pv-icon';\n      }\n    } else if (annotationType === 'textMarkup') {\n      if (annotationSubType === 'Highlight') {\n        commentSpan.className = 'e-pv-highlight-icon e-pv-icon';\n      } else if (annotationSubType === 'Underline') {\n        commentSpan.className = 'e-pv-underline-icon e-pv-icon';\n      } else if (annotationSubType === 'Strikethrough') {\n        commentSpan.className = 'e-pv-strikethrough-icon e-pv-icon';\n      } else {\n        commentSpan.className = 'e-pv-annotation-icon e-pv-icon';\n      }\n    } else if (annotationType === 'freeText') {\n      commentSpan.className = 'e-pv-freetext-icon e-pv-icon';\n    } else if (annotationType === 'ink' || annotationSubType === 'Ink') {\n      commentSpan.className = 'e-pv-inkannotation-icon e-pv-icon';\n    }\n  };\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.updateStatusContainer = function (state, statusSpan, statusDiv, statusContainer) {\n    if (state === 'Accepted') {\n      statusDiv.style.backgroundColor = 'rgb(24,169,85)';\n      statusSpan.className = 'e-pv-accepted-icon';\n    } else if (state === 'Completed') {\n      statusDiv.style.backgroundColor = 'rgb(0,122,255)';\n      statusSpan.className = 'e-pv-completed-icon';\n    } else if (state === 'Cancelled') {\n      statusDiv.style.backgroundColor = 'rgb(245,103,0)';\n      statusSpan.className = 'e-pv-cancelled-icon';\n    } else if (state === 'Rejected') {\n      statusDiv.style.backgroundColor = 'rgb(255,59,48)';\n      statusSpan.className = 'e-pv-rejected-icon';\n    } else {\n      statusSpan.className = '';\n      statusContainer.parentElement.removeChild(statusContainer);\n    }\n  };\n  /**\n   * @param removeDiv\n   * @private\n   */\n  StickyNotesAnnotation.prototype.updateAccordionContainer = function (removeDiv) {\n    // eslint-disable-next-line\n    var pageNumber = parseInt(removeDiv.accessKey.split('_')[0]);\n    var accordionContent = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + pageNumber);\n    if (accordionContent) {\n      accordionContent.parentElement.removeChild(accordionContent);\n    }\n    var accordionContentContainer = document.getElementById(this.pdfViewer.element.id + '_accordionContentContainer');\n    if (accordionContentContainer) {\n      if (accordionContentContainer.childElementCount === 0) {\n        accordionContentContainer.style.display = 'none';\n        if (document.getElementById(this.pdfViewer.element.id + '_commentsPanelText')) {\n          // eslint-disable-next-line max-len\n          this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export Annotations')], false);\n          // eslint-disable-next-line max-len\n          this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export XFDF')], false);\n          document.getElementById(this.pdfViewer.element.id + '_commentsPanelText').style.display = 'block';\n          this.updateCommentPanelTextTop();\n        }\n      }\n    }\n  };\n  /**\n   * @private\n   */\n  StickyNotesAnnotation.prototype.createCommentContextMenu = function () {\n    // eslint-disable-next-line max-len\n    this.commentContextMenu = [{\n      text: this.pdfViewer.localeObj.getConstant('Edit')\n    }, {\n      text: this.pdfViewer.localeObj.getConstant('Delete Context')\n    }, {\n      // eslint-disable-next-line max-len\n      text: this.pdfViewer.localeObj.getConstant('Set Status'),\n      items: [{\n        text: this.pdfViewer.localeObj.getConstant('None')\n      }, {\n        text: this.pdfViewer.localeObj.getConstant('Accepted')\n      }, {\n        text: this.pdfViewer.localeObj.getConstant('Cancelled')\n      }, {\n        text: this.pdfViewer.localeObj.getConstant('Completed')\n      }, {\n        text: this.pdfViewer.localeObj.getConstant('Rejected')\n      }]\n    }];\n    var commentMenuElement = createElement('ul', {\n      id: this.pdfViewer.element.id + '_comment_context_menu'\n    });\n    this.pdfViewer.element.appendChild(commentMenuElement);\n    this.commentMenuObj = new Context({\n      target: '#' + this.moreButtonId,\n      items: this.commentContextMenu,\n      beforeOpen: this.contextMenuBeforeOpen.bind(this),\n      select: this.commentMenuItemSelect.bind(this)\n    });\n    if (this.pdfViewer.enableRtl) {\n      this.commentMenuObj.enableRtl = true;\n    }\n    this.commentMenuObj.appendTo(commentMenuElement);\n    if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n      this.commentMenuObj.animationSettings.effect = 'ZoomIn';\n    } else {\n      this.commentMenuObj.animationSettings.effect = 'SlideDown';\n    }\n  };\n  StickyNotesAnnotation.prototype.contextMenuBeforeOpen = function (args) {\n    // eslint-disable-next-line\n    var contextActiveDiv;\n    // eslint-disable-next-line\n    var contextDiv = document.querySelectorAll('.e-pv-more-options-button');\n    if (contextDiv) {\n      for (var i = 0; i < contextDiv.length; i++) {\n        if (contextDiv[i].style.visibility === 'visible') {\n          contextActiveDiv = contextDiv[i].parentElement.nextSibling;\n        }\n      }\n    }\n    var isCommentLocked = this.checkIslockProperty(contextActiveDiv);\n    if (isCommentLocked) {\n      this.commentMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Edit')], false);\n      this.commentMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Delete Context')], false);\n    } else {\n      this.commentMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Edit')], true);\n      this.commentMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Delete Context')], true);\n    }\n  };\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.commentMenuItemSelect = function (args) {\n    // eslint-disable-next-line\n    var contextActiveDiv;\n    // eslint-disable-next-line\n    var contextDiv = document.querySelectorAll('.e-pv-more-options-button');\n    if (contextDiv) {\n      for (var i = 0; i < contextDiv.length; i++) {\n        if (contextDiv[i].style.visibility === 'visible') {\n          contextActiveDiv = contextDiv[i].parentElement.nextSibling;\n        }\n      }\n      if (args.item) {\n        switch (args.item.text) {\n          case this.pdfViewer.localeObj.getConstant('Edit'):\n            // eslint-disable-next-line\n            var commentShow = document.querySelectorAll('.e-pv-new-comments-div');\n            for (var i = 0; i < commentShow.length; i++) {\n              commentShow[i].style.display = 'none';\n            }\n            contextActiveDiv.ej2_instances[0].enableEditMode = true;\n            break;\n          case this.pdfViewer.localeObj.getConstant('Delete Context'):\n            if (contextActiveDiv.parentElement.parentElement.firstChild === contextActiveDiv.parentElement) {\n              this.pdfViewer.annotationModule.deleteAnnotation();\n            } else {\n              // eslint-disable-next-line max-len\n              this.modifyCommentDeleteProperty(contextActiveDiv.parentElement.parentElement, contextActiveDiv.parentElement);\n            }\n            break;\n          case this.pdfViewer.localeObj.getConstant('Set Status'):\n            break;\n          case this.pdfViewer.localeObj.getConstant('Accepted'):\n            if (contextActiveDiv.parentElement.lastChild.id === this.pdfViewer.element.id + 'status_container') {\n              contextActiveDiv.parentElement.lastChild.remove();\n            }\n            // eslint-disable-next-line max-len\n            var acceptedStatusDiv = createElement('div', {\n              id: this.pdfViewer.element.id + 'status' + '_container',\n              className: 'e-pv-status-container'\n            });\n            // eslint-disable-next-line max-len\n            var statusDiv = createElement('div', {\n              id: this.pdfViewer.element.id + 'status' + '_div',\n              className: 'e-pv-status-div'\n            });\n            var statusSpan = createElement('span', {\n              id: this.pdfViewer.element.id + 'status' + '_icon',\n              className: 'e-pv-accepted-icon'\n            });\n            statusDiv.style.backgroundColor = 'rgb(24,169,85)';\n            statusDiv.appendChild(statusSpan);\n            acceptedStatusDiv.appendChild(statusDiv);\n            contextActiveDiv.parentElement.appendChild(acceptedStatusDiv);\n            this.modifyStatusProperty('Accepted', contextActiveDiv.parentElement);\n            break;\n          case this.pdfViewer.localeObj.getConstant('Completed'):\n            if (contextActiveDiv.parentElement.lastChild.id === this.pdfViewer.element.id + 'status_container') {\n              contextActiveDiv.parentElement.lastChild.remove();\n            }\n            // eslint-disable-next-line max-len\n            var completedStatusDiv = createElement('div', {\n              id: this.pdfViewer.element.id + 'status' + '_container',\n              className: 'e-pv-status-container'\n            });\n            // eslint-disable-next-line max-len\n            var statusElement = createElement('div', {\n              id: this.pdfViewer.element.id + 'status' + '_div',\n              className: 'e-pv-status-div'\n            });\n            // eslint-disable-next-line max-len\n            var statusOptionSpan = createElement('span', {\n              id: this.pdfViewer.element.id + 'status' + '_icon',\n              className: 'e-pv-completed-icon'\n            });\n            statusElement.style.backgroundColor = 'rgb(0,122,255)';\n            statusElement.appendChild(statusOptionSpan);\n            completedStatusDiv.appendChild(statusElement);\n            contextActiveDiv.parentElement.appendChild(completedStatusDiv);\n            this.modifyStatusProperty('Completed', contextActiveDiv.parentElement);\n            break;\n          case this.pdfViewer.localeObj.getConstant('Cancelled'):\n            if (contextActiveDiv.parentElement.lastChild.id === this.pdfViewer.element.id + 'status_container') {\n              contextActiveDiv.parentElement.lastChild.remove();\n            }\n            // eslint-disable-next-line max-len\n            var cancelStatusDiv = createElement('div', {\n              id: this.pdfViewer.element.id + 'status' + '_container',\n              className: 'e-pv-status-container'\n            });\n            // eslint-disable-next-line max-len\n            var cancelStatusElement = createElement('div', {\n              id: this.pdfViewer.element.id + 'status' + '_div',\n              className: 'e-pv-status-div'\n            });\n            // eslint-disable-next-line max-len\n            var cancelStatusSpan = createElement('span', {\n              id: this.pdfViewer.element.id + 'status' + '_icon',\n              className: 'e-pv-cancelled-icon'\n            });\n            cancelStatusElement.style.backgroundColor = 'rgb(245,103,0)';\n            cancelStatusElement.appendChild(cancelStatusSpan);\n            cancelStatusDiv.appendChild(cancelStatusElement);\n            contextActiveDiv.parentElement.appendChild(cancelStatusDiv);\n            this.modifyStatusProperty('Cancelled', contextActiveDiv.parentElement);\n            break;\n          case this.pdfViewer.localeObj.getConstant('Rejected'):\n            if (contextActiveDiv.parentElement.lastChild.id === this.pdfViewer.element.id + 'status_container') {\n              contextActiveDiv.parentElement.lastChild.remove();\n            }\n            // eslint-disable-next-line max-len\n            var rejectedStatusDiv = createElement('div', {\n              id: this.pdfViewer.element.id + 'status' + '_container',\n              className: 'e-pv-status-container'\n            });\n            // eslint-disable-next-line max-len\n            var rejectedStatusElement = createElement('div', {\n              id: this.pdfViewer.element.id + 'status' + '_div',\n              className: 'e-pv-status-div'\n            });\n            // eslint-disable-next-line max-len\n            var rejectedStatusSpan = createElement('span', {\n              id: this.pdfViewer.element.id + 'status' + '_icon',\n              className: 'e-pv-rejected-icon'\n            });\n            rejectedStatusElement.style.backgroundColor = 'rgb(255,59,48)';\n            rejectedStatusElement.appendChild(rejectedStatusSpan);\n            rejectedStatusDiv.appendChild(rejectedStatusElement);\n            contextActiveDiv.parentElement.appendChild(rejectedStatusDiv);\n            this.modifyStatusProperty('Rejected', contextActiveDiv.parentElement);\n            break;\n          case this.pdfViewer.localeObj.getConstant('None'):\n            if (contextActiveDiv.parentElement.lastChild.id === this.pdfViewer.element.id + 'status_container') {\n              contextActiveDiv.parentElement.lastChild.remove();\n            }\n            this.modifyStatusProperty('None', contextActiveDiv.parentElement);\n            break;\n          default:\n            break;\n        }\n      }\n    }\n  };\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.moreOptionsClick = function (event, isMoreOptionClick) {\n    if (document.getElementById(this.pdfViewer.element.id + '_comment_context_menu').style.display !== 'block') {\n      this.pdfViewer.annotationModule.checkContextMenuDeleteItem(this.commentMenuObj);\n      this.commentMenuObj.open(event.clientY, event.clientX, event.currentTarget);\n    }\n    if (this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.inkAnnotationModule) {\n      // eslint-disable-next-line\n      var currentPageNumber = parseInt(this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);\n      this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(currentPageNumber);\n    }\n  };\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.openTextEditor = function (event) {\n    // eslint-disable-next-line\n    var commentShow = document.querySelectorAll('.e-pv-new-comments-div');\n    for (var i = 0; i < commentShow.length; i++) {\n      commentShow[i].style.display = 'none';\n    }\n    var isCommentLocked = this.checkIslockProperty(event.currentTarget.nextSibling);\n    if (isCommentLocked) {\n      event.currentTarget.nextSibling.ej2_instances[0].enableEditMode = false;\n    } else if (event.currentTarget && event.target) {\n      var isLocked = this.checkAnnotationSettings(event.target.id);\n      if (!isLocked) {\n        event.currentTarget.nextSibling.ej2_instances[0].enableEditMode = true;\n      }\n    } else {\n      event.currentTarget.nextSibling.ej2_instances[0].enableEditMode = true;\n    }\n  };\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.checkIslockProperty = function (commentEvent) {\n    // eslint-disable-next-line\n    var annotCollection = this.pdfViewer.annotationCollection;\n    // eslint-disable-next-line\n    var annotation;\n    if (commentEvent.IsCommentLock) {\n      return true;\n    }\n    // eslint-disable-next-line max-len\n    if (this.pdfViewer.annotationModule.textMarkupAnnotationModule && this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n      annotation = this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;\n    } else if (this.pdfViewer.selectedItems.annotations[0]) {\n      annotation = this.pdfViewer.selectedItems.annotations[0];\n    }\n    for (var i = 0; i < annotCollection.length; i++) {\n      // eslint-disable-next-line max-len\n      annotCollection[i].annotationSettings = !isNullOrUndefined(annotCollection[i].annotationSettings) ? annotCollection[i].annotationSettings : {};\n      var note = annotCollection[i].note ? annotCollection[i].note : annotCollection[i].notes;\n      if (annotCollection[i].annotationSettings.isLock && (commentEvent.textContent === note || annotCollection[i].dynamicText === commentEvent.textContent)) {\n        return true;\n      }\n      for (var j = 0; j < annotCollection[i].comments.length; j++) {\n        if (annotation && annotCollection[i].annotationId === annotation.annotName) {\n          // eslint-disable-next-line max-len\n          if (annotCollection[i].comments[j].isLock === true && commentEvent.textContent === annotCollection[i].comments[j].note) {\n            return true;\n          }\n        }\n      }\n    }\n    return false;\n  };\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.openEditorElement = function (event) {\n    // eslint-disable-next-line\n    var commentShow = document.querySelectorAll('.e-pv-new-comments-div');\n    for (var i = 0; i < commentShow.length; i++) {\n      commentShow[i].style.display = 'none';\n    }\n    var isCommentLocked = this.checkIslockProperty(event.currentTarget);\n    if (isCommentLocked) {\n      event.currentTarget.ej2_instances[0].enableEditMode = false;\n    } else if (event.currentTarget && event.target) {\n      var isLocked = this.checkAnnotationSettings(event.target.id);\n      if (!isLocked) {\n        if (!isNullOrUndefined(this.pdfViewer.selectedItems) && this.pdfViewer.selectedItems.annotations[0] && this.pdfViewer.selectedItems.annotations[0].isReadonly) {\n          event.currentTarget.ej2_instances[0].enableEditMode = false;\n        } else {\n          event.currentTarget.ej2_instances[0].enableEditMode = true;\n        }\n      }\n    } else {\n      event.currentTarget.ej2_instances[0].enableEditMode = true;\n    }\n  };\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.commentsDivClickEvent = function (event) {\n    // eslint-disable-next-line\n    var annotation = this.findAnnotationObject(event.currentTarget.parentElement.id);\n    var isLocked = annotation.annotationSettings.isLock || annotation.isLock;\n    if (!isLocked) {\n      var isCommentsSelect = false;\n      if (event.clientX === 0 && event.clientY === 0) {\n        this.isSetAnnotationType = true;\n      } else {\n        this.isSetAnnotationType = false;\n      }\n      if (event.target.className === 'e-pv-more-icon e-pv-icon') {\n        return null;\n      }\n      // eslint-disable-next-line\n      var x = document.querySelectorAll('.e-pv-more-options-button');\n      for (var i = 0; i < x.length; i++) {\n        x[i].style.visibility = 'hidden';\n      }\n      if (document.getElementById(this.pdfViewer.element.id + '_commantPanel').style.display === 'none') {\n        this.pdfViewer.annotationModule.showCommentsPanel();\n      }\n      if (event.currentTarget.parentElement.classList.contains('e-pv-comments-border')) {\n        isCommentsSelect = true;\n      }\n      event.currentTarget.firstChild.lastChild.style.visibility = 'visible';\n      // eslint-disable-next-line\n      var commentsContainer = document.querySelectorAll('.e-pv-comments-border');\n      if (commentsContainer) {\n        for (var j = 0; j < commentsContainer.length; j++) {\n          commentsContainer[j].classList.remove('e-pv-comments-border');\n        }\n      }\n      event.currentTarget.parentElement.classList.add('e-pv-comments-border');\n      // eslint-disable-next-line\n      var commentShow = document.querySelectorAll('.e-pv-new-comments-div');\n      for (var i = 0; i < commentShow.length; i++) {\n        commentShow[i].style.display = 'none';\n      }\n      // eslint-disable-next-line\n      var editElement = event.currentTarget.parentElement.lastChild;\n      // eslint-disable-next-line\n      var commentsElement = event.currentTarget.parentElement;\n      if (editElement) {\n        editElement.style.display = 'block';\n        if (editElement.querySelector('.e-editable-inline')) {\n          if (!this.isEditableElement) {\n            editElement.querySelector('.e-editable-inline').style.display = 'block';\n          }\n          for (var i = 0; i < commentsElement.childElementCount; i++) {\n            // eslint-disable-next-line\n            var activeElement = commentsElement.childNodes[i];\n            // eslint-disable-next-line\n            var textElement = activeElement.querySelector('.e-editable-inline');\n            if (textElement) {\n              if (textElement.style.display === '') {\n                editElement.style.display = 'none';\n                editElement.querySelector('.e-editable-inline').style.display = 'none';\n              }\n            }\n          }\n        }\n        if (this.isSetAnnotationType) {\n          if (!isCommentsSelect) {\n            this.updateCommentsScrollTop();\n          }\n        }\n      }\n      if (event.currentTarget.parentElement.childElementCount === 1) {\n        if (!this.pdfViewer.enableShapeLabel) {\n          event.currentTarget.childNodes[1].ej2_instances[0].enableEditMode = true;\n        } else {\n          var type = event.currentTarget.parentElement.getAttribute('name');\n          if (this.isSetAnnotationType && type === 'shape') {\n            event.currentTarget.childNodes[1].ej2_instances[0].enableEditMode = false;\n          } else {\n            event.currentTarget.childNodes[1].ej2_instances[0].enableEditMode = true;\n          }\n        }\n      }\n      var editModule = void 0;\n      if (event && event.currentTarget && event.currentTarget.childNodes[1]) {\n        editModule = event.currentTarget.childNodes[1].ej2_instances[0];\n      }\n      if (event.currentTarget && event.currentTarget.id && editModule) {\n        // eslint-disable-next-line\n        if (annotation && annotation.isCommentLock) {\n          editModule.enableEditMode = false;\n          this.createCommentDiv(event.currentTarget);\n        }\n        this.pdfViewer.fireCommentSelect(event.currentTarget.id, event.currentTarget.childNodes[1].ej2_instances[0].value, annotation);\n      }\n      this.commentDivOnSelect(event);\n      event.preventDefault();\n    }\n  };\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.commentsDivDoubleClickEvent = function (event) {\n    // eslint-disable-next-line\n    var commentShow = document.querySelectorAll('.e-pv-new-comments-div');\n    for (var i = 0; i < commentShow.length; i++) {\n      commentShow[i].style.display = 'none';\n    }\n    var isCommentLocked = this.checkIslockProperty(event.currentTarget.children[1]);\n    if (isCommentLocked) {\n      if (event.currentTarget.childElementCount === 2) {\n        event.currentTarget.lastChild.ej2_instances[0].enableEditMode = false;\n      } else {\n        event.currentTarget.childNodes[1].ej2_instances[0].enableEditMode = false;\n      }\n    } else if (event.currentTarget && event.target) {\n      var isLocked = this.checkAnnotationSettings(event.target.id);\n      if (!isLocked) {\n        if (event.currentTarget.childElementCount === 2) {\n          event.currentTarget.lastChild.ej2_instances[0].enableEditMode = true;\n        } else {\n          event.currentTarget.childNodes[1].ej2_instances[0].enableEditMode = true;\n        }\n      }\n    }\n  };\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.commentDivOnSelect = function (event) {\n    // eslint-disable-next-line\n    var commentSelect = document.querySelectorAll('.e-pv-comments-select');\n    for (var z = 0; z < commentSelect.length; z++) {\n      commentSelect[z].classList.remove('e-pv-comments-select');\n    }\n    var activeElement = document.getElementById(event.currentTarget.id);\n    if (activeElement) {\n      activeElement.classList.remove('e-pv-comments-hover');\n      activeElement.classList.remove('e-pv-comments-leave');\n      activeElement.classList.add('e-pv-comments-select');\n      if (event.currentTarget.nextSibling) {\n        if (event.currentTarget.nextSibling.classList.contains('e-pv-new-comments-div')) {\n          var activeSiblingElement = document.getElementById(event.currentTarget.nextSibling.id);\n          activeSiblingElement.classList.remove('e-pv-comments-hover');\n          activeSiblingElement.classList.remove('e-pv-comments-leave');\n          activeSiblingElement.classList.add('e-pv-comments-select');\n        }\n      }\n    }\n  };\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.commentDivMouseOver = function (event) {\n    var activeElement = document.getElementById(event.currentTarget.id);\n    if (activeElement) {\n      activeElement.classList.remove('e-pv-comments-select');\n      activeElement.classList.remove('e-pv-comments-leave');\n      activeElement.classList.add('e-pv-comments-hover');\n      if (event.currentTarget.nextSibling) {\n        if (event.currentTarget.nextSibling.classList.contains('e-pv-new-comments-div')) {\n          var activeSiblingElement = document.getElementById(event.currentTarget.nextSibling.id);\n          activeSiblingElement.classList.remove('e-pv-comments-select');\n          activeSiblingElement.classList.remove('e-pv-comments-leave');\n          activeSiblingElement.classList.add('e-pv-comments-hover');\n        }\n      }\n    }\n  };\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.commentDivMouseLeave = function (event) {\n    var activeElement = document.getElementById(event.currentTarget.id);\n    if (activeElement) {\n      activeElement.classList.remove('e-pv-comments-hover');\n      activeElement.classList.remove('e-pv-comments-select');\n      activeElement.classList.add('e-pv-comments-leave');\n      if (event.currentTarget.nextSibling) {\n        if (event.currentTarget.nextSibling.classList.contains('e-pv-new-comments-div')) {\n          var activeSiblingElement = document.getElementById(event.currentTarget.nextSibling.id);\n          activeSiblingElement.classList.remove('e-pv-comments-hover');\n          activeSiblingElement.classList.remove('e-pv-comments-select');\n          activeSiblingElement.classList.add('e-pv-comments-leave');\n        }\n      }\n    }\n  };\n  /**\n   * @param event\n   * @private\n   */\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.drawIcons = function (event) {\n    // eslint-disable-next-line\n    if (this.pdfViewerBase.isCommentIconAdded) {\n      var pageIndex = this.pdfViewer.annotation.getEventPageNumber(event);\n      var pageCurrentRect = this.pdfViewerBase.getElement('_pageDiv_' + pageIndex).getBoundingClientRect();\n      var zoomValue = this.pdfViewerBase.getZoomFactor();\n      this.pdfViewer.annotationModule.isFormFieldShape = false;\n      // eslint-disable-next-line max-len\n      this.pdfViewer.annotation.stickyNotesAnnotationModule.drawStickyNotes((event.clientX - pageCurrentRect.left) / zoomValue, (event.clientY - pageCurrentRect.top) / zoomValue, 30, 30, pageIndex, null);\n      this.pdfViewerBase.isCommentIconAdded = false;\n      var commentsButton = document.getElementById(this.pdfViewer.element.id + '_comment');\n      if (isBlazor()) {\n        commentsButton = commentsButton.children[0];\n      }\n      if (commentsButton && commentsButton.classList.contains('e-pv-select')) {\n        commentsButton.classList.remove('e-pv-select');\n      } else {\n        var commentsIcon = document.getElementById(this.pdfViewer.element.id + '_commentIcon');\n        if (commentsIcon) {\n          this.pdfViewer.enableRtl ? commentsIcon.className = 'e-pv-comment-icon e-pv-icon e-icon-left e-right' : commentsIcon.className = 'e-pv-comment-icon e-pv-icon e-icon-left';\n        }\n      }\n    }\n  };\n  /**\n   * @param annotationType\n   * @param pageNumber\n   * @param annotationSubType\n   * @param annotationType\n   * @param pageNumber\n   * @param annotationSubType\n   * @param annotationType\n   * @param pageNumber\n   * @param annotationSubType\n   * @private\n   */\n  StickyNotesAnnotation.prototype.addComments = function (annotationType, pageNumber, annotationSubType) {\n    var commentsDivid;\n    // eslint-disable-next-line max-len\n    var accordion = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + pageNumber);\n    if (accordion) {\n      // eslint-disable-next-line max-len\n      commentsDivid = this.pdfViewer.annotation.stickyNotesAnnotationModule.createCommentControlPanel(null, pageNumber, annotationType, annotationSubType);\n    } else {\n      this.pdfViewer.annotation.stickyNotesAnnotationModule.createPageAccordion(pageNumber);\n      // eslint-disable-next-line max-len\n      commentsDivid = this.pdfViewer.annotation.stickyNotesAnnotationModule.createCommentControlPanel(null, pageNumber, annotationType, annotationSubType);\n    }\n    return commentsDivid;\n  };\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.commentsAnnotationSelect = function (event) {\n    var element = event.currentTarget;\n    var isLocked = this.checkAnnotationSettings(event.target.id);\n    // When the isLock is set to true, it comes and checks whether the allowedInteractions is select and set the isLock to false, In that case if enters the condition and makes the comment panel to editable mode. So, have removed the condition in openEditorElement, commentsDivClickEvent, openTextEditor,commentAnnotationSelect methods. (Task id: 835410)\n    if (!isLocked) {\n      if (element.classList.contains('e-pv-comments-border')) {\n        // eslint-disable-next-line\n        var commentsDiv = document.querySelectorAll('.e-pv-comments-div');\n        for (var j = 0; j < commentsDiv.length; j++) {\n          commentsDiv[j].style.minHeight = 60 + 'px';\n        }\n        if (event.currentTarget.childElementCount === 1) {\n          if (event.currentTarget.childNodes[0].querySelector('.e-editable-inline')) {\n            event.currentTarget.childNodes[0].style.minHeight = event.currentTarget.childNodes[0].clientHeight;\n          }\n        }\n      }\n      if (event.target.className === 'e-pv-more-icon e-pv-icon' || event.target.className === 'e-pv-more-options-button e-btn') {\n        event.preventDefault();\n        return null;\n      }\n      // eslint-disable-next-line\n      var pageNumber = parseInt(element.accessKey.split('_')[0]);\n      if (!element.classList.contains('e-pv-comments-border')) {\n        // eslint-disable-next-line\n        var commentsContainer = document.querySelectorAll('.e-pv-comments-border');\n        if (commentsContainer) {\n          for (var j = 0; j < commentsContainer.length; j++) {\n            commentsContainer[j].classList.remove('e-pv-comments-border');\n          }\n        }\n        var commentsDiv = document.getElementById(element.id);\n        if (commentsDiv) {\n          // eslint-disable-next-line\n          document.querySelectorAll('.e-pv-more-options-button[style*=\"visibility: visible\"]').forEach(function (moreButton) {\n            return moreButton.style.visibility = 'hidden';\n          });\n          if (event.target.className === 'e-editable-value-wrapper') {\n            event.target.parentElement.parentElement.firstChild.lastChild.style.visibility = 'visible';\n          } else if (event.target.className === 'e-pv-reply-title' || event.target.className === 'e-pv-comment-title') {\n            event.target.parentElement.lastChild.style.visibility = 'visible';\n          } else if (event.target.className === 'e-editable-value') {\n            event.target.parentElement.parentElement.parentElement.firstChild.lastChild.style.visibility = 'visible';\n          }\n          commentsDiv.classList.add('e-pv-comments-border');\n        }\n        // eslint-disable-next-line\n        var commentTextBox = document.querySelectorAll('.e-pv-new-comments-div');\n        for (var j = 0; j < commentTextBox.length; j++) {\n          commentTextBox[j].style.display = 'none';\n        }\n        if (commentsDiv) {\n          // eslint-disable-next-line\n          var currentTextBox = commentsDiv.querySelector('.e-pv-new-comments-div');\n          if (currentTextBox) {\n            currentTextBox.style.display = 'block';\n          }\n        }\n        // eslint-disable-next-line\n        var textDiv = element.lastChild;\n        this.isEditableElement = false;\n        if (textDiv.querySelector('.e-editable-inline')) {\n          textDiv.style.display = 'block';\n          textDiv.querySelector('.e-editable-inline').style.display = 'block';\n          for (var i = 0; i < element.childElementCount; i++) {\n            // eslint-disable-next-line\n            var activeElement = element.childNodes[i];\n            // eslint-disable-next-line\n            var textElement = activeElement.querySelector('.e-editable-inline');\n            if (textElement) {\n              if (textElement.style.display === '') {\n                if (textDiv.classList.contains('e-pv-new-comments-div')) {\n                  this.isEditableElement = true;\n                  textDiv.style.display = 'none';\n                  textDiv.querySelector('.e-editable-inline').style.display = 'none';\n                }\n              }\n            }\n          }\n        }\n        this.isSetAnnotationType = false;\n        if (event.currentTarget.childElementCount === 1) {\n          event.currentTarget.childNodes[0].childNodes[1].ej2_instances[0].enableEditMode = true;\n        }\n      } else {\n        this.isSetAnnotationType = true;\n      }\n      if (!this.isSetAnnotationType) {\n        if (this.pdfViewer.navigation) {\n          this.pdfViewer.navigationModule.goToPage(pageNumber);\n        }\n        var annotType = element.getAttribute('name');\n        if (annotType === 'null' || annotType === 'Ink') {\n          annotType = 'ink';\n        }\n        this.isCommentsSelected = false;\n        this.setAnnotationType(element.id, annotType, pageNumber);\n        if (!this.isCommentsSelected) {\n          this.selectAnnotationObj = {\n            id: element.id,\n            annotType: annotType,\n            pageNumber: pageNumber\n          };\n        }\n      }\n    } else {\n      var pageNumber = parseInt(element.accessKey.split('_')[0]);\n      if (this.pdfViewer.navigation) {\n        this.pdfViewer.navigationModule.goToPage(pageNumber);\n      }\n      var annotType = element.getAttribute('name');\n      if (annotType === 'null' || annotType === 'Ink') {\n        annotType = 'ink';\n      }\n      this.isCommentsSelected = false;\n      this.setAnnotationType(element.id, annotType, pageNumber);\n      if (!this.isCommentsSelected) {\n        this.selectAnnotationObj = {\n          id: element.id,\n          annotType: annotType,\n          pageNumber: pageNumber\n        };\n      }\n    }\n    this.isSetAnnotationType = false;\n  };\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.findAnnotationObject = function (id) {\n    // eslint-disable-next-line max-len\n    if (this.pdfViewer.annotationModule.textMarkupAnnotationModule && this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n      return this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;\n    } else if (this.pdfViewer.selectedItems.annotations[0]) {\n      return this.pdfViewer.selectedItems.annotations[0];\n    }\n    // eslint-disable-next-line\n    var annotationCollection = this.pdfViewer.annotationCollection;\n    if (annotationCollection) {\n      for (var i = 0; i < annotationCollection.length; i++) {\n        if (annotationCollection[i].annotationId && annotationCollection[i].annotationId === id) {\n          if (annotationCollection[i].shapeAnnotationType === 'textMarkup') {\n            return annotationCollection[i];\n          } else {\n            annotationCollection = this.pdfViewer.annotations;\n            for (var j = 0; j < annotationCollection.length; j++) {\n              if (annotationCollection[j].annotName && annotationCollection[j].annotName === id) {\n                return annotationCollection[j];\n              }\n            }\n          }\n        }\n      }\n    }\n  };\n  StickyNotesAnnotation.prototype.checkAnnotationSettings = function (id) {\n    // eslint-disable-next-line\n    var annotationCollection = this.pdfViewer.annotationCollection;\n    var parentDivId = this.pdfViewer.element.id;\n    if (annotationCollection) {\n      for (var i = 0; i < annotationCollection.length; i++) {\n        if (id.includes(parentDivId + \"_commenttextbox\") || id.includes(parentDivId + \"_commentTitle\") || id.includes(parentDivId + \"_commentdiv\")) {\n          if (annotationCollection[i].annotationSettings && annotationCollection[i].annotationSettings.isLock) {\n            return true;\n          } else {\n            return false;\n          }\n        }\n      }\n      return false;\n    } else {\n      return false;\n    }\n  };\n  StickyNotesAnnotation.prototype.updateCommentsContainerWidth = function () {\n    var accordionContainer = document.getElementById(this.pdfViewer.element.id + '_accordionContentContainer');\n    var commentsContentContainer = document.getElementById(this.pdfViewer.element.id + '_commentscontentcontainer');\n    accordionContainer.style.width = commentsContentContainer.clientWidth + 'px';\n  };\n  /**\n   * @param pageIndex\n   * @private\n   */\n  StickyNotesAnnotation.prototype.selectCommentsAnnotation = function (pageIndex) {\n    if (this.selectAnnotationObj && !this.isCommentsSelected) {\n      if (this.selectAnnotationObj.pageNumber - 1 === pageIndex) {\n        // eslint-disable-next-line max-len\n        this.setAnnotationType(this.selectAnnotationObj.id, this.selectAnnotationObj.annotType, this.selectAnnotationObj.pageNumber);\n        this.selectAnnotationObj = null;\n        this.isCommentsSelected = true;\n      }\n    }\n  };\n  StickyNotesAnnotation.prototype.setAnnotationType = function (id, type, pageNumber) {\n    var typeString = type === 'measure' ? 'shape_measure' : type;\n    if (typeString === 'freeText') {\n      typeString = 'freetext';\n    }\n    // eslint-disable-next-line\n    var storeCommentObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_' + typeString);\n    if (this.pdfViewerBase.isStorageExceed) {\n      storeCommentObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_' + typeString];\n    }\n    if (storeCommentObject) {\n      var annotationCommentObject = JSON.parse(storeCommentObject);\n      // eslint-disable-next-line\n      var annotation = this.pdfViewer.selectedItems.annotations[0];\n      // eslint-disable-next-line max-len\n      var index = this.pdfViewer.annotationModule.getPageCollection(annotationCommentObject, pageNumber - 1);\n      if (annotationCommentObject[index]) {\n        // eslint-disable-next-line\n        var pageCollections = annotationCommentObject[index].annotations;\n        for (var i = 0; i < pageCollections.length; i++) {\n          var currentSelector = pageCollections[i].annotationSelectorSettings;\n          if (pageCollections[i].annotName === id) {\n            if (annotation) {\n              this.pdfViewer.fireAnnotationUnSelect(annotation.annotName, annotation.pageIndex, annotation);\n            }\n            this.pdfViewer.clearSelection(pageNumber - 1);\n            if (type === 'textMarkup') {\n              // eslint-disable-next-line max-len\n              this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearCurrentAnnotationSelection(pageNumber - 1, true);\n              // eslint-disable-next-line max-len\n              var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + (pageNumber - 1));\n              this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectAnnotation(pageCollections[i], canvas, pageNumber - 1);\n              this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAnnotation = pageCollections[i];\n              this.pdfViewer.annotation.textMarkupAnnotationModule.selectTextMarkupCurrentPage = pageNumber - 1;\n              this.pdfViewer.annotation.textMarkupAnnotationModule.enableAnnotationPropertiesTool(true);\n              if (this.pdfViewer.toolbarModule && this.pdfViewer.enableAnnotationToolbar) {\n                this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden = true;\n                // eslint-disable-next-line max-len\n                this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem);\n              }\n            } else if (type === 'stamp') {\n              this.pdfViewer.select([pageCollections[i].randomId], currentSelector);\n              this.pdfViewer.annotation.onAnnotationMouseDown();\n            } else if (type === 'sticky') {\n              this.pdfViewer.select([pageCollections[i].annotName], currentSelector);\n              this.pdfViewer.annotation.onAnnotationMouseDown();\n            } else if (type === 'ink') {\n              this.pdfViewer.select([pageCollections[i].id], currentSelector);\n              this.pdfViewer.annotation.onAnnotationMouseDown();\n            } else {\n              this.pdfViewer.select([pageCollections[i].id], currentSelector);\n              this.pdfViewer.annotation.onAnnotationMouseDown();\n            }\n            if (type === 'textMarkup') {\n              if (pageCollections[i].rect || pageCollections[i].bounds) {\n                // eslint-disable-next-line max-len\n                var scrollValue = this.pdfViewerBase.pageSize[pageNumber - 1].top * this.pdfViewerBase.getZoomFactor() + this.pdfViewer.annotationModule.getAnnotationTop(pageCollections[i]) * this.pdfViewerBase.getZoomFactor();\n                if (scrollValue) {\n                  var scroll_1 = (scrollValue - 20).toString();\n                  // eslint-disable-next-line radix\n                  this.pdfViewerBase.viewerContainer.scrollTop = parseInt(scroll_1);\n                }\n              }\n            } else {\n              var top_1 = pageCollections[i].bounds.top;\n              if (type === 'ink') {\n                top_1 = pageCollections[i].bounds.y;\n              }\n              // eslint-disable-next-line max-len\n              var scrollValue = this.pdfViewerBase.pageSize[pageNumber - 1].top * this.pdfViewerBase.getZoomFactor() + top_1 * this.pdfViewerBase.getZoomFactor();\n              var scroll_2 = (scrollValue - 20).toString();\n              // eslint-disable-next-line radix\n              this.pdfViewerBase.viewerContainer.scrollTop = parseInt(scroll_2);\n            }\n            this.isCommentsSelected = true;\n          }\n        }\n      }\n    }\n  };\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.modifyTextProperty = function (text, previousValue, annotationName) {\n    // eslint-disable-next-line\n    var currentAnnotation;\n    var module = this.pdfViewer.annotationModule.textMarkupAnnotationModule;\n    if (module && module.currentTextMarkupAnnotation) {\n      currentAnnotation = this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;\n    }\n    if (currentAnnotation) {\n      if (currentAnnotation.annotName !== annotationName) {\n        currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n      }\n    } else {\n      currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n    }\n    if (isNullOrUndefined(currentAnnotation) && annotationName || !isNullOrUndefined(currentAnnotation) && currentAnnotation.annotName !== annotationName) {\n      currentAnnotation = this.pdfViewer.annotationCollection.filter(function (annot) {\n        return annot.annotationId === annotationName;\n      })[0];\n    }\n    if (annotationName && currentAnnotation.annotName !== annotationName) {\n      for (var i = 0; i < this.pdfViewer.annotations.length; i++) {\n        if (annotationName === this.pdfViewer.annotations[i].annotName) {\n          currentAnnotation = this.pdfViewer.annotations[i];\n          break;\n        }\n      }\n    }\n    if (currentAnnotation) {\n      currentAnnotation.annotName = !isNullOrUndefined(currentAnnotation.annotName) ? currentAnnotation.annotName : currentAnnotation.annotationId;\n      // eslint-disable-next-line\n      var commentsDiv = document.getElementById(currentAnnotation.annotName);\n      if (commentsDiv) {\n        // eslint-disable-next-line\n        var pageNumber = void 0;\n        if (commentsDiv.accessKey.split('_')[0]) {\n          // eslint-disable-next-line\n          pageNumber = parseInt(commentsDiv.accessKey.split('_')[0]);\n        } else {\n          pageNumber = this.pdfViewerBase.currentPageNumber;\n        }\n        var type = commentsDiv.getAttribute('name');\n        var pageIndex = pageNumber - 1;\n        // eslint-disable-next-line\n        var pageAnnotations = void 0;\n        var isMeasure = false;\n        // eslint-disable-next-line max-len\n        if (currentAnnotation.shapeAnnotationType === 'FreeText' || this.pdfViewer.enableShapeLabel && (type === 'shape' || type === 'shape_measure')) {\n          var isTextAdded = false;\n          if (annotationName) {\n            if (currentAnnotation.annotName !== annotationName) {\n              this.pdfViewer.annotation.modifyDynamicTextValue(text, annotationName);\n              isTextAdded = true;\n            }\n          }\n          if (!isTextAdded) {\n            if (currentAnnotation.shapeAnnotationType === 'FreeText') {\n              if (currentAnnotation.dynamicText !== text) {\n                this.textFromCommentPanel = true;\n                this.pdfViewer.annotation.modifyDynamicTextValue(text, currentAnnotation.annotName);\n              }\n              currentAnnotation.dynamicText = text;\n            } else {\n              this.pdfViewer.annotation.modifyDynamicTextValue(text, currentAnnotation.annotName);\n              currentAnnotation.labelContent = text;\n              currentAnnotation.notes = text;\n            }\n            this.pdfViewer.nodePropertyChange(currentAnnotation, {});\n          }\n        }\n        if (currentAnnotation.measureType && currentAnnotation.measureType !== '') {\n          pageAnnotations = this.getAnnotations(pageIndex, null, 'shape_measure');\n          isMeasure = true;\n        } else {\n          pageAnnotations = this.getAnnotations(pageIndex, null, currentAnnotation.shapeAnnotationType);\n        }\n        if (pageAnnotations !== null && currentAnnotation.shapeAnnotationType !== 'FreeText') {\n          for (var i = 0; i < pageAnnotations.length; i++) {\n            if (pageAnnotations[i].annotName === currentAnnotation.annotName) {\n              // eslint-disable-next-line\n              var clonedObject = cloneObject(pageAnnotations[i]);\n              if (!isNullOrUndefined(text) && text != \"\") {\n                if (pageAnnotations[i].note !== text) {\n                  // eslint-disable-next-line max-len\n                  this.pdfViewer.annotation.addAction(pageIndex, i, pageAnnotations[i], 'Text Property Added', '', clonedObject, pageAnnotations[i]);\n                  currentAnnotation = pageAnnotations[i];\n                  currentAnnotation.note = text;\n                  if (currentAnnotation.enableShapeLabel) {\n                    currentAnnotation.labelContent = text;\n                  }\n                  // eslint-disable-next-line max-len\n                  currentAnnotation.modifiedDate = this.getDateAndTime();\n                  if (!isMeasure) {\n                    this.updateUndoRedoCollections(currentAnnotation, pageIndex);\n                  } else {\n                    this.updateUndoRedoCollections(currentAnnotation, pageIndex, 'shape_measure');\n                  }\n                  if (!previousValue || previousValue === '') {\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.fireCommentAdd(currentAnnotation.annotName, currentAnnotation.note, currentAnnotation);\n                  } else {\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.fireCommentEdit(currentAnnotation.annotName, currentAnnotation.note, currentAnnotation);\n                  }\n                  return currentAnnotation;\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  };\n  /**\n   * @param date\n   * @private\n   */\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.getDateAndTime = function (date) {\n    if (!date) {\n      date = new Date();\n    }\n    this.globalize = new Internationalization();\n    var dateOptions = {\n      format: this.pdfViewer.dateTimeFormat,\n      type: 'dateTime'\n    };\n    // eslint-disable-next-line\n    var dateTime = this.globalize.formatDate(new Date(date), dateOptions);\n    return dateTime;\n  };\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.modifyCommentsProperty = function (text, annotName, parentElement, previousValue) {\n    // eslint-disable-next-line\n    var currentAnnotation;\n    if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n      currentAnnotation = this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;\n    } else {\n      currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n    }\n    if (currentAnnotation) {\n      // eslint-disable-next-line\n      var commentsDiv = document.getElementById(currentAnnotation.annotName);\n      // eslint-disable-next-line\n      var pageNumber = parseInt(commentsDiv.accessKey.split('_')[0]);\n      var pageIndex = pageNumber - 1;\n      // eslint-disable-next-line\n      var pageAnnotations = void 0;\n      var isMeasure = false;\n      var author = this.getAuthorName(currentAnnotation, commentsDiv);\n      if (currentAnnotation.measureType && currentAnnotation.measureType !== '') {\n        pageAnnotations = this.getAnnotations(pageIndex, null, 'shape_measure');\n        isMeasure = true;\n      } else {\n        pageAnnotations = this.getAnnotations(pageIndex, null, currentAnnotation.shapeAnnotationType);\n      }\n      if (pageAnnotations !== null) {\n        for (var i = 0; i < pageAnnotations.length; i++) {\n          if (pageAnnotations[i].annotName === currentAnnotation.annotName) {\n            currentAnnotation = pageAnnotations[i];\n          }\n        }\n      }\n      // eslint-disable-next-line\n      var clonedObject = cloneObject(currentAnnotation);\n      if (currentAnnotation.comments.length > 0) {\n        var isComment = false;\n        for (var j = 0; j < currentAnnotation.comments.length; j++) {\n          if (currentAnnotation.comments[j].annotName === annotName) {\n            isComment = true;\n            currentAnnotation.comments[j].note = text;\n            // eslint-disable-next-line max-len\n            currentAnnotation.comments[j].modifiedDate = this.getDateAndTime();\n          }\n        }\n        if (currentAnnotation.annotName === parentElement) {\n          // eslint-disable-next-line max-len\n          var newArray = {\n            annotName: annotName,\n            parentId: parentElement,\n            subject: currentAnnotation.subject,\n            comments: [],\n            author: author,\n            note: text,\n            shapeAnnotationType: '',\n            state: '',\n            stateModel: '',\n            modifiedDate: this.getDateAndTime(),\n            review: {\n              state: '',\n              stateModel: '',\n              modifiedDate: this.getDateAndTime(),\n              author: author\n            },\n            isLock: false\n          };\n          if (!isComment) {\n            currentAnnotation.comments[currentAnnotation.comments.length] = newArray;\n          }\n        }\n      } else if (currentAnnotation.annotName === parentElement) {\n        // eslint-disable-next-line max-len\n        var newArray = {\n          annotName: annotName,\n          parentId: parentElement,\n          subject: currentAnnotation.subject,\n          comments: [],\n          author: author,\n          note: text,\n          shapeAnnotationType: '',\n          state: '',\n          stateModel: '',\n          modifiedDate: this.getDateAndTime(),\n          review: {\n            state: '',\n            stateModel: '',\n            modifiedDate: this.getDateAndTime(),\n            author: author\n          },\n          isLock: false\n        };\n        currentAnnotation.comments[currentAnnotation.comments.length] = newArray;\n      }\n      // eslint-disable-next-line max-len\n      this.pdfViewer.annotation.addAction(pageIndex, null, currentAnnotation, 'Comments Property Added', '', clonedObject, currentAnnotation);\n      if (!isMeasure) {\n        this.updateUndoRedoCollections(currentAnnotation, pageIndex);\n      } else {\n        this.updateUndoRedoCollections(currentAnnotation, pageIndex, 'shape_measure');\n      }\n    }\n    if (previousValue !== undefined) {\n      this.pdfViewer.fireCommentEdit(annotName, text, currentAnnotation);\n    } else {\n      this.pdfViewer.fireCommentAdd(annotName, text, currentAnnotation);\n    }\n  };\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.modifyStatusProperty = function (text, statusElement) {\n    // eslint-disable-next-line\n    var currentAnnotation;\n    if (this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n      currentAnnotation = this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAnnotation;\n    } else {\n      currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n    }\n    if (currentAnnotation) {\n      // eslint-disable-next-line\n      var commentsDiv = document.getElementById(currentAnnotation.annotName);\n      // eslint-disable-next-line\n      var pageNumber = parseInt(commentsDiv.accessKey.split('_')[0]);\n      var pageIndex = pageNumber - 1;\n      // eslint-disable-next-line\n      var pageAnnotations = void 0;\n      var isMeasure = false;\n      var author = commentsDiv.getAttribute('author');\n      if (currentAnnotation.measureType && currentAnnotation.measureType !== '') {\n        pageAnnotations = this.getAnnotations(pageIndex, null, 'shape_measure');\n        isMeasure = true;\n      } else {\n        pageAnnotations = this.getAnnotations(pageIndex, null, currentAnnotation.shapeAnnotationType);\n      }\n      if (pageAnnotations !== null) {\n        for (var i = 0; i < pageAnnotations.length; i++) {\n          if (pageAnnotations[i].annotName === currentAnnotation.annotName) {\n            currentAnnotation = pageAnnotations[i];\n          }\n        }\n      }\n      // eslint-disable-next-line\n      var clonedObject = cloneObject(currentAnnotation);\n      if (statusElement.parentElement.firstChild.id === statusElement.id) {\n        // eslint-disable-next-line max-len\n        currentAnnotation.review = {\n          state: text,\n          stateModel: 'Review',\n          author: author,\n          modifiedDate: this.getDateAndTime(),\n          annotId: statusElement.id\n        };\n        currentAnnotation.state = text;\n        currentAnnotation.stateModel = 'Review';\n        // eslint-disable-next-line max-len\n        this.pdfViewer.annotation.addAction(pageIndex, null, currentAnnotation, 'Status Property Added', '', clonedObject, currentAnnotation);\n        this.pdfViewer.fireCommentStatusChanged(statusElement.id, currentAnnotation.note, currentAnnotation, currentAnnotation.state);\n      } else {\n        for (var j = 0; j < currentAnnotation.comments.length; j++) {\n          if (currentAnnotation.comments[j].annotName === statusElement.id) {\n            // eslint-disable-next-line\n            var clonedObj = cloneObject(currentAnnotation.comments[j]);\n            currentAnnotation.comments[j].state = text;\n            currentAnnotation.comments[j].stateModel = 'Review';\n            // eslint-disable-next-line max-len\n            currentAnnotation.comments[j].review = {\n              state: text,\n              stateModel: 'Review',\n              author: author,\n              modifiedDate: this.getDateAndTime(),\n              annotId: statusElement.id\n            };\n            // eslint-disable-next-line max-len\n            this.pdfViewer.annotation.addAction(pageIndex, null, currentAnnotation, 'Status Property Added', '', clonedObj, currentAnnotation.comments[j]);\n            this.pdfViewer.fireCommentStatusChanged(currentAnnotation.comments[j].annotName, currentAnnotation.comments[j].note, currentAnnotation, currentAnnotation.comments[j].state);\n          }\n        }\n      }\n      if (!isMeasure) {\n        this.updateUndoRedoCollections(currentAnnotation, pageIndex);\n      } else {\n        this.updateUndoRedoCollections(currentAnnotation, pageIndex, 'shape_measure');\n      }\n    }\n  };\n  /**\n   * @param commentsElement\n   * @param replyElement\n   * @private\n   */\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.modifyCommentDeleteProperty = function (commentsElement, replyElement) {\n    // eslint-disable-next-line\n    var clonedObject;\n    // eslint-disable-next-line\n    var clonedAnnotation;\n    // eslint-disable-next-line\n    var currentAnnotation;\n    // eslint-disable-next-line\n    var commentsParentElement = document.getElementById(commentsElement.id);\n    if (commentsParentElement) {\n      // eslint-disable-next-line\n      var pageNumber = parseInt(commentsParentElement.accessKey.split('_')[0]);\n      var pageIndex = pageNumber - 1;\n      var annotType = commentsElement.getAttribute('name');\n      // eslint-disable-next-line\n      var pageAnnotations = this.getAnnotations(pageIndex, null, annotType);\n      if (pageAnnotations !== null) {\n        for (var i = 0; i < pageAnnotations.length; i++) {\n          if (pageAnnotations[i].annotName === commentsElement.id) {\n            currentAnnotation = pageAnnotations[i];\n          }\n        }\n      }\n      for (var i = 1; i < commentsParentElement.childElementCount; i++) {\n        if (commentsParentElement.childNodes[i].id === replyElement.id) {\n          clonedAnnotation = cloneObject(currentAnnotation);\n          var positionValue = i - 1;\n          currentAnnotation.comments[positionValue].position = i;\n          clonedObject = cloneObject(currentAnnotation.comments[positionValue]);\n          // eslint-disable-next-line max-len\n          this.pdfViewer.fireCommentDelete(currentAnnotation.comments[positionValue].annotName, currentAnnotation.comments[positionValue].note, currentAnnotation);\n          currentAnnotation.comments.splice(positionValue, 1);\n          replyElement.remove();\n        }\n      }\n      // eslint-disable-next-line max-len\n      this.pdfViewer.annotation.addAction(pageIndex, null, clonedAnnotation, 'Comments Reply Deleted', '', clonedObject, currentAnnotation);\n      this.updateUndoRedoCollections(currentAnnotation, pageIndex);\n    }\n  };\n  /**\n   * @param annotation\n   * @private\n   */\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.updateOpacityValue = function (annotation) {\n    // eslint-disable-next-line\n    var pageAnnotations = this.getAnnotations(annotation.pageIndex, null, annotation.shapeAnnotationType);\n    this.pdfViewer.annotationModule.isFormFieldShape = false;\n    if (pageAnnotations !== null) {\n      for (var i = 0; i < pageAnnotations.length; i++) {\n        if (pageAnnotations[i].annotName === annotation.annotName) {\n          pageAnnotations[i].opacity = annotation.opacity;\n          this.updateUndoRedoCollections(pageAnnotations[i], annotation.pageIndex);\n        }\n      }\n    }\n  };\n  /**\n   * @param annotation\n   * @param isAction\n   * @param undoAnnotation\n   * @param annotation\n   * @param isAction\n   * @param undoAnnotation\n   * @param annotation\n   * @param isAction\n   * @param undoAnnotation\n   * @private\n   */\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.undoAction = function (annotation, isAction, undoAnnotation) {\n    if (isAction === 'Text Property Added') {\n      if (annotation) {\n        // eslint-disable-next-line\n        var commentsMainDiv = document.getElementById(annotation.annotName);\n        if (commentsMainDiv) {\n          // eslint-disable-next-line\n          var pageNumber = parseInt(commentsMainDiv.accessKey.split('_')[0]);\n          var pageIndex = pageNumber - 1;\n          // eslint-disable-next-line\n          var clonedAnnotationObject = cloneObject(annotation);\n          commentsMainDiv.firstChild.firstChild.nextSibling.ej2_instances[0].value = undoAnnotation.note;\n          var value = undoAnnotation.note;\n          annotation.note = value;\n          if (commentsMainDiv.childElementCount === 2) {\n            commentsMainDiv.lastChild.style.display = 'block';\n          }\n          this.updateUndoRedoCollections(annotation, pageIndex);\n          return clonedAnnotationObject;\n        }\n      }\n    } else if (isAction === 'Comments Property Added') {\n      if (annotation.comments.length > 0) {\n        // eslint-disable-next-line\n        var commentsDiv = document.getElementById(annotation.annotName);\n        var pageIndex = this.pdfViewerBase.currentPageNumber - 1;\n        if (commentsDiv) {\n          // eslint-disable-next-line\n          var pageNumber = parseInt(commentsDiv.accessKey.split('_')[0]);\n          pageIndex = pageNumber - 1;\n        }\n        // eslint-disable-next-line\n        var clonedAnnotationObject = cloneObject(annotation);\n        // eslint-disable-next-line\n        var comment = annotation.comments[annotation.comments.length - 1];\n        // eslint-disable-next-line\n        var removeDiv = document.getElementById(comment.annotName);\n        if (removeDiv) {\n          removeDiv.remove();\n        }\n        annotation = undoAnnotation;\n        this.updateUndoRedoCollections(annotation, pageIndex);\n        return clonedAnnotationObject;\n      }\n    } else if (isAction === 'Status Property Added') {\n      if (annotation) {\n        // eslint-disable-next-line\n        var commentsDiv = document.getElementById(annotation.annotName);\n        var pageIndex = this.pdfViewerBase.currentPageNumber - 1;\n        if (commentsDiv) {\n          // eslint-disable-next-line\n          var pageNumber = parseInt(commentsDiv.accessKey.split('_')[0]);\n          pageIndex = pageNumber - 1;\n        }\n        // eslint-disable-next-line\n        var clonedAnnotationObject = cloneObject(annotation);\n        if (annotation.annotName === undoAnnotation.annotName) {\n          annotation.review = undoAnnotation.review;\n          annotation.state = undoAnnotation.state;\n          annotation.stateModel = undoAnnotation.stateModel;\n          this.pdfViewer.annotation.redoCommentsElement.push(annotation);\n        } else {\n          for (var j = 0; j < annotation.comments.length; j++) {\n            if (annotation.comments[j].annotName === undoAnnotation.annotName) {\n              annotation.comments[j].state = undoAnnotation.state;\n              annotation.comments[j].stateModel = undoAnnotation.stateModel;\n              annotation.comments[j].review = undoAnnotation.review;\n              this.pdfViewer.annotation.redoCommentsElement.push(annotation.comments[j]);\n              break;\n            }\n          }\n        }\n        // eslint-disable-next-line\n        var activeDiv = document.getElementById(undoAnnotation.annotName);\n        if (activeDiv.lastChild.id === this.pdfViewer.element.id + 'status' + '_container') {\n          activeDiv.lastChild.remove();\n        } else {\n          if (activeDiv.firstChild.lastChild.id === this.pdfViewer.element.id + 'status' + '_container') {\n            activeDiv.firstChild.lastChild.remove();\n          }\n        }\n        this.updateUndoRedoCollections(annotation, pageIndex);\n        return clonedAnnotationObject;\n      }\n    } else if (isAction === 'Comments Reply Deleted') {\n      // eslint-disable-next-line\n      var commentsDiv = document.getElementById(annotation.annotName);\n      if (commentsDiv) {\n        // eslint-disable-next-line\n        var pageNumber = parseInt(commentsDiv.accessKey.split('_')[0]);\n        var pageIndex = pageNumber - 1;\n        this.renderComments(undoAnnotation, commentsDiv, true, annotation.annotName);\n        this.pdfViewer.annotation.redoCommentsElement.push(undoAnnotation);\n        this.updateUndoRedoCollections(annotation, pageIndex);\n        return annotation;\n      }\n    } else if (isAction === 'dynamicText Change') {\n      if (annotation) {\n        // eslint-disable-next-line\n        var commentsMainDiv = document.getElementById(annotation.annotName);\n        if (commentsMainDiv) {\n          // eslint-disable-next-line\n          commentsMainDiv.firstChild.firstChild.nextSibling.ej2_instances[0].value = undoAnnotation.dynamicText;\n          return annotation;\n        }\n      }\n    }\n  };\n  /**\n   * @param annotation\n   * @param isAction\n   * @param undoAnnotation\n   * @param annotation\n   * @param isAction\n   * @param undoAnnotation\n   * @private\n   */\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.redoAction = function (annotation, isAction, undoAnnotation) {\n    if (isAction === 'Text Property Added') {\n      // eslint-disable-next-line\n      var commentsMainDiv = document.getElementById(annotation.annotName);\n      if (commentsMainDiv) {\n        // eslint-disable-next-line\n        var pageNumber = parseInt(commentsMainDiv.accessKey.split('_')[0]);\n        var pageIndex = pageNumber - 1;\n        commentsMainDiv.firstChild.firstChild.nextSibling.ej2_instances[0].value = annotation.note;\n        commentsMainDiv.lastChild.style.display = 'block';\n        this.updateUndoRedoCollections(annotation, pageIndex);\n        return annotation;\n      }\n    } else if (isAction === 'Comments Property Added') {\n      // eslint-disable-next-line\n      var comment = annotation.comments[annotation.comments.length - 1];\n      var commentsDiv = document.getElementById(annotation.annotName);\n      if (commentsDiv) {\n        // eslint-disable-next-line\n        var pageNumber = parseInt(commentsDiv.accessKey.split('_')[0]);\n        var pageIndex = pageNumber - 1;\n        this.renderComments(comment, commentsDiv, true, annotation.annotName);\n        this.updateUndoRedoCollections(annotation, pageIndex);\n        return annotation;\n      }\n    } else if (isAction === 'Status Property Added') {\n      // eslint-disable-next-line\n      var poppedItem = this.pdfViewer.annotation.redoCommentsElement.pop();\n      var pageIndex = this.pdfViewerBase.currentPageNumber - 1;\n      if (poppedItem) {\n        // eslint-disable-next-line max-len\n        var statusContainer = createElement('div', {\n          id: this.pdfViewer.element.id + 'status' + '_container',\n          className: 'e-pv-status-container'\n        });\n        // eslint-disable-next-line max-len\n        var statusDiv = createElement('div', {\n          id: this.pdfViewer.element.id + 'status' + '_div',\n          className: 'e-pv-status-div'\n        });\n        var statusSpan = createElement('span', {\n          id: this.pdfViewer.element.id + 'status' + '_icon'\n        });\n        statusDiv.appendChild(statusSpan);\n        statusContainer.appendChild(statusDiv);\n        // eslint-disable-next-line\n        var activeDiv = document.getElementById(annotation.annotName);\n        if (activeDiv) {\n          // eslint-disable-next-line\n          var pageNumber = parseInt(activeDiv.accessKey.split('_')[0]);\n          pageIndex = pageNumber - 1;\n        }\n        // eslint-disable-next-line\n        if (annotation.annotName === poppedItem.annotName) {\n          this.updateStatusContainer(annotation.state, statusSpan, statusDiv, statusContainer);\n          for (var i = 0; i < activeDiv.firstChild.children.length; i++) {\n            if (activeDiv.firstChild.children[i].id === this.pdfViewer.element.id + 'status_container') {\n              activeDiv.firstChild.children[i].parentElement.removeChild(activeDiv.firstChild.children[i]);\n            }\n          }\n          activeDiv.firstChild.appendChild(statusContainer);\n        } else {\n          for (var i = 0; i < annotation.comments.length; i++) {\n            if (annotation.comments[i].annotName === poppedItem.annotName) {\n              this.updateStatusContainer(annotation.comments[i].state, statusSpan, statusDiv, statusContainer);\n              var statusElement = document.getElementById(poppedItem.annotName);\n              for (var i_1 = 0; i_1 < statusElement.children.length; i_1++) {\n                if (statusElement.children[i_1].id === this.pdfViewer.element.id + 'status_container') {\n                  statusElement.children[i_1].parentElement.removeChild(statusElement.children[i_1]);\n                }\n              }\n              if (statusElement) {\n                statusElement.appendChild(statusContainer);\n              }\n            }\n          }\n        }\n      }\n      this.updateUndoRedoCollections(annotation, pageIndex);\n      return annotation;\n    } else if (isAction === 'Comments Reply Deleted') {\n      var pageIndex = this.pdfViewerBase.currentPageNumber - 1;\n      // eslint-disable-next-line\n      var activeDiv = document.getElementById(annotation.annotName);\n      if (activeDiv) {\n        // eslint-disable-next-line\n        var pageNumber = parseInt(activeDiv.accessKey.split('_')[0]);\n        pageIndex = pageNumber - 1;\n      }\n      // eslint-disable-next-line\n      var poppedItem = this.pdfViewer.annotation.redoCommentsElement.pop();\n      // eslint-disable-next-line\n      var clonedAnnotationObject = cloneObject(annotation);\n      for (var i = 0; i < annotation.comments.length; i++) {\n        if (annotation.comments[i].annotName === poppedItem.annotName) {\n          // eslint-disable-next-line\n          var replyElement = document.getElementById(poppedItem.annotName);\n          annotation.comments.splice(i, 1);\n          replyElement.remove();\n        }\n      }\n      this.updateUndoRedoCollections(annotation, pageIndex);\n      return clonedAnnotationObject;\n    } else if (isAction === 'dynamicText Change') {\n      if (annotation) {\n        // eslint-disable-next-line\n        var commentsMainDiv = document.getElementById(annotation.annotName);\n        if (commentsMainDiv) {\n          // eslint-disable-next-line\n          commentsMainDiv.firstChild.firstChild.nextSibling.ej2_instances[0].value = annotation.dynamicText;\n          return annotation;\n        }\n      }\n    }\n  };\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.updateUndoRedoCollections = function (annotationBase, pageNumber, shapeType, action) {\n    var annotationType = !shapeType ? annotationBase.shapeAnnotationType : shapeType;\n    if (annotationBase.indent && annotationBase.indent !== '') {\n      annotationType = 'shape_measure';\n    }\n    // eslint-disable-next-line\n    var pageAnnotations = this.getAnnotations(pageNumber, null, annotationType);\n    if (pageAnnotations !== null) {\n      for (var i = 0; i < pageAnnotations.length; i++) {\n        if (annotationBase.annotName === pageAnnotations[i].annotName) {\n          pageAnnotations[i] = annotationBase;\n          this.pdfViewer.annotationModule.storeAnnotationCollections(pageAnnotations[i], pageNumber);\n          if (action) {\n            pageAnnotations.splice(i, 1);\n            this.deleteStickyNotesAnnotations(pageAnnotations, pageNumber);\n          }\n        }\n      }\n      if (annotationType === 'shape_measure') {\n        this.manageAnnotations(pageAnnotations, pageNumber, 'shape_measure');\n      } else {\n        this.manageAnnotations(pageAnnotations, pageNumber, annotationBase.shapeAnnotationType);\n      }\n    }\n  };\n  /**\n   * @param pageIndex\n   * @param type\n   * @private\n   */\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.addAnnotationComments = function (pageIndex, type) {\n    var pageNumber = pageIndex + 1;\n    // eslint-disable-next-line\n    var poppedItem = this.pdfViewer.annotation.undoCommentsElement.pop();\n    if (poppedItem) {\n      this.createCommentsContainer(poppedItem, pageNumber);\n      this.updateUndoRedoCollections(poppedItem, pageIndex, type);\n    }\n  };\n  /**\n   * @param annotation\n   * @param type\n   * @param action\n   * @private\n   */\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.findPosition = function (annotation, type, action) {\n    var index;\n    // eslint-disable-next-line\n    var commentsDiv = document.getElementById(annotation.annotName);\n    if (commentsDiv) {\n      // eslint-disable-next-line\n      var pageNumber = parseInt(commentsDiv.accessKey.split('_')[0]);\n      var pageIndex = pageNumber - 1;\n      // eslint-disable-next-line\n      var parentDiv = commentsDiv.parentElement;\n      for (var i = 0; i < parentDiv.childElementCount; i++) {\n        if (parentDiv.childNodes[i].id === annotation.annotName) {\n          index = i;\n        }\n      }\n      if (type === 'Stamp' || type === 'Image') {\n        type = 'stamp';\n      } else if (type === 'FreeText') {\n        type = 'freetext';\n      } else if (type === 'StickyNotes' || type === 'sticky') {\n        type = 'sticky';\n      } else if (type === 'Ink') {\n        type = 'ink';\n      }\n      // eslint-disable-next-line\n      var pageAnnotations = this.getAnnotations(pageIndex, null, type);\n      if (pageAnnotations !== null) {\n        for (var i = 0; i < pageAnnotations.length; i++) {\n          if (pageAnnotations[i].annotName === annotation.annotName) {\n            // eslint-disable-next-line\n            var clonedObject = cloneObject(pageAnnotations[i]);\n            pageAnnotations[i].position = index;\n            this.pdfViewer.annotation.undoCommentsElement.push(pageAnnotations[i]);\n            if (type === 'sticky') {\n              this.updateUndoRedoCollections(clonedObject, pageIndex, null, action);\n            }\n          }\n        }\n      }\n    }\n  };\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.getAnnotations = function (pageIndex, shapeAnnotations, type) {\n    // eslint-disable-next-line\n    var annotationCollection;\n    if (type === 'Stamp' || type === 'stamp' || type === 'Image') {\n      type = 'stamp';\n    } else if (type === 'StickyNotes' || type === 'sticky') {\n      type = 'sticky';\n    } else if (type === 'textMarkup') {\n      type = 'textMarkup';\n    } else if (type === 'shape' || type === 'Line' || type === 'Radius' || type === 'Rectangle' || type === 'Ellipse' || type === 'Polygon' || type === 'LineWidthArrowHead' || type === 'Square' || type === 'Circle') {\n      type = 'shape';\n    } else if (type === 'FreeText' || type === 'freetext' || type === 'freeText') {\n      type = 'freetext';\n    } else if (type === 'ink' || type === 'Ink') {\n      type = 'ink';\n    } else {\n      type = 'shape_measure';\n    }\n    // eslint-disable-next-line\n    var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_' + type);\n    if (this.pdfViewerBase.isStorageExceed) {\n      storeObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_' + type];\n    }\n    if (storeObject) {\n      var annotObject = JSON.parse(storeObject);\n      var index = this.pdfViewer.annotationModule.getPageCollection(annotObject, pageIndex);\n      if (annotObject[index]) {\n        annotationCollection = annotObject[index].annotations;\n      } else {\n        annotationCollection = shapeAnnotations;\n      }\n    } else {\n      annotationCollection = shapeAnnotations;\n    }\n    return annotationCollection;\n  };\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.manageAnnotations = function (pageAnnotations, pageNumber, type) {\n    if (type === 'Stamp' || type === 'stamp') {\n      type = 'stamp';\n    } else if (type === 'Sticky' || type === 'sticky') {\n      type = 'sticky';\n    } else if (type === 'textMarkup') {\n      type = 'textMarkup';\n    } else if (type === 'shape' || type === 'Line' || type === 'Radius' || type === 'Rectangle' || type === 'Ellipse' || type === 'Polygon' || type === 'LineWidthArrowHead' || type === 'Square' || type === 'Circle') {\n      type = 'shape';\n    } else if (type === 'FreeText') {\n      type = 'freetext';\n    } else if (type === 'ink' || type === 'Ink') {\n      type = 'ink';\n    } else {\n      type = 'shape_measure';\n    }\n    // eslint-disable-next-line\n    var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_' + type);\n    if (this.pdfViewerBase.isStorageExceed) {\n      storeObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_' + type];\n    }\n    if (storeObject) {\n      var annotObject = JSON.parse(storeObject);\n      if (!this.pdfViewerBase.isStorageExceed) {\n        window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_' + type);\n      }\n      var index = this.pdfViewer.annotationModule.getPageCollection(annotObject, pageNumber);\n      if (annotObject[index]) {\n        annotObject[index].annotations = pageAnnotations;\n      }\n      var annotationStringified = JSON.stringify(annotObject);\n      if (this.pdfViewerBase.isStorageExceed) {\n        this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_' + type] = annotationStringified;\n      } else {\n        window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_' + type, annotationStringified);\n      }\n    }\n  };\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.updateStickyNotes = function (annotation, id) {\n    // eslint-disable-next-line\n    var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_sticky');\n    if (this.pdfViewerBase.isStorageExceed) {\n      storeObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_sticky'];\n    }\n    if (storeObject) {\n      // eslint-disable-next-line\n      var bounds = annotation.bounds;\n      var annotObject = JSON.parse(storeObject);\n      for (var k = 0; k < annotObject.length; k++) {\n        // eslint-disable-next-line\n        var currentAnnot = annotObject[k];\n        for (var j = 0; j < currentAnnot.annotations.length; j++) {\n          if (annotObject[k].annotations[j].annotName === annotation.annotName) {\n            if (!this.pdfViewerBase.isStorageExceed) {\n              window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_sticky');\n            }\n            var pageIndex = this.pdfViewer.annotationModule.getPageCollection(annotObject, 0);\n            if (annotObject[pageIndex]) {\n              // eslint-disable-next-line max-len\n              annotObject[k].annotations[j].bounds = {\n                left: bounds.x,\n                top: bounds.y,\n                width: bounds.width,\n                height: bounds.height,\n                right: bounds.right,\n                bottom: bounds.bottom\n              };\n            }\n            var annotationStringified = JSON.stringify(annotObject);\n            if (this.pdfViewerBase.isStorageExceed) {\n              // eslint-disable-next-line max-len\n              this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_sticky'] = annotationStringified;\n            } else {\n              window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_sticky', annotationStringified);\n            }\n            break;\n          }\n        }\n      }\n    }\n  };\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.saveStickyAnnotations = function () {\n    // eslint-disable-next-line\n    var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_sticky');\n    if (this.pdfViewerBase.isStorageExceed) {\n      storeObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_sticky'];\n    }\n    // eslint-disable-next-line\n    var annotations = new Array();\n    for (var j = 0; j < this.pdfViewerBase.pageCount; j++) {\n      annotations[j] = [];\n    }\n    if (storeObject && !this.pdfViewer.annotationSettings.skipDownload) {\n      var annotationCollection = JSON.parse(storeObject);\n      for (var i = 0; i < annotationCollection.length; i++) {\n        var newArray = [];\n        var pageAnnotationObject = annotationCollection[i];\n        if (pageAnnotationObject) {\n          for (var z = 0; pageAnnotationObject.annotations.length > z; z++) {\n            this.pdfViewer.annotationModule.updateModifiedDate(pageAnnotationObject.annotations[z]);\n            // eslint-disable-next-line max-len\n            pageAnnotationObject.annotations[z].bounds = JSON.stringify(this.pdfViewer.annotation.getBounds(pageAnnotationObject.annotations[z].bounds, pageAnnotationObject.pageIndex));\n          }\n          newArray = pageAnnotationObject.annotations;\n        }\n        annotations[pageAnnotationObject.pageIndex] = newArray;\n      }\n    }\n    return JSON.stringify(annotations);\n  };\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.deleteStickyNotesAnnotations = function (pageAnnotations, pageNumber) {\n    // eslint-disable-next-line\n    var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_sticky');\n    if (this.pdfViewerBase.isStorageExceed) {\n      storeObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_sticky'];\n    }\n    if (storeObject) {\n      var annotObject = JSON.parse(storeObject);\n      if (!this.pdfViewerBase.isStorageExceed) {\n        window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_sticky');\n      }\n      var index = this.pdfViewer.annotationModule.getPageCollection(annotObject, pageNumber);\n      if (annotObject[index]) {\n        annotObject[index].annotations = pageAnnotations;\n      }\n      var annotationStringified = JSON.stringify(annotObject);\n      if (this.pdfViewerBase.isStorageExceed) {\n        this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_sticky'] = annotationStringified;\n      } else {\n        window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_sticky', annotationStringified);\n      }\n    }\n  };\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.addStickyNotesAnnotations = function (pageNumber, annotationBase) {\n    var pageAnnotations = this.getAnnotations(pageNumber, null, 'sticky');\n    if (pageAnnotations) {\n      pageAnnotations.push(annotationBase);\n    }\n    this.manageAnnotations(pageAnnotations, pageNumber, 'sticky');\n  };\n  /**\n   * @param annotName\n   * @param text\n   * @private\n   */\n  StickyNotesAnnotation.prototype.addTextToComments = function (annotName, text) {\n    // eslint-disable-next-line\n    var commentsMainDiv = document.getElementById(annotName);\n    if (commentsMainDiv) {\n      commentsMainDiv.firstChild.firstChild.nextSibling.ej2_instances[0].value = text;\n    }\n  };\n  /**\n   * @param newAnnotation\n   * @param annotation\n   * @param isCut\n   * @param newAnnotation\n   * @param annotation\n   * @param isCut\n   * @param newAnnotation\n   * @param annotation\n   * @param isCut\n   * @private\n   */\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.updateAnnotationCollection = function (newAnnotation, annotation, isCut) {\n    var type = this.findAnnotationType(annotation);\n    // eslint-disable-next-line\n    var pageAnnotations = this.getAnnotations(annotation.pageIndex, null, type);\n    if (isCut) {\n      pageAnnotations = this.pdfViewer.annotationModule.removedAnnotationCollection;\n    }\n    if (pageAnnotations !== null) {\n      for (var i = 0; i < pageAnnotations.length; i++) {\n        if (isCut && !pageAnnotations[i].annotName) {\n          pageAnnotations[i].annotName = pageAnnotations[i].annotationId;\n        }\n        if (pageAnnotations[i].annotName === annotation.annotName) {\n          // eslint-disable-next-line\n          var updateAnnotation = cloneObject(pageAnnotations[i]);\n          updateAnnotation.annotName = newAnnotation.annotName;\n          if (type === 'shape' || type === 'shape_measure' || type === 'freetext' || type === 'ink') {\n            updateAnnotation.id = newAnnotation.id;\n          }\n          if (type === 'stamp') {\n            updateAnnotation.randomId = newAnnotation.id;\n          }\n          if (type === 'ink') {\n            updateAnnotation.bounds.x = newAnnotation.bounds.x;\n            updateAnnotation.bounds.y = newAnnotation.bounds.y;\n          } else {\n            updateAnnotation.bounds.left = newAnnotation.bounds.x;\n            updateAnnotation.bounds.top = newAnnotation.bounds.y;\n            updateAnnotation.vertexPoints = newAnnotation.vertexPoints;\n          }\n          updateAnnotation.note = updateAnnotation.note ? updateAnnotation.note : '';\n          updateAnnotation.comments = [];\n          // eslint-disable-next-line max-len\n          updateAnnotation.review = {\n            state: '',\n            stateModel: '',\n            modifiedDate: updateAnnotation.ModifiedDate,\n            author: updateAnnotation.author\n          };\n          updateAnnotation.state = '';\n          updateAnnotation.stateModel = '';\n          updateAnnotation.pageNumber = annotation.pageIndex;\n          this.pdfViewer.annotationModule.storeAnnotations(annotation.pageIndex, updateAnnotation, '_annotations_' + type);\n          this.createCommentsContainer(updateAnnotation, annotation.pageIndex + 1, true);\n          if (isCut) {\n            this.pdfViewer.annotationModule.removedAnnotationCollection = [];\n          }\n          break;\n        }\n      }\n    }\n  };\n  StickyNotesAnnotation.prototype.findAnnotationType = function (annotation) {\n    var annotType;\n    if (annotation.measureType !== '') {\n      annotType = 'shape_measure';\n    } else {\n      if (annotation.shapeAnnotationType === 'StickyNotes') {\n        annotType = 'sticky';\n      } else if (annotation.shapeAnnotationType === 'Stamp' || annotation.shapeAnnotationType === 'Image') {\n        annotType = 'stamp';\n      } else if (annotation.shapeAnnotationType === 'FreeText') {\n        annotType = 'freetext';\n      } else if (annotation.shapeAnnotationType === 'Ink') {\n        annotType = 'ink';\n      } else {\n        annotType = 'shape';\n      }\n    }\n    return annotType;\n  };\n  StickyNotesAnnotation.prototype.setExistingAnnotationModifiedDate = function (date) {\n    var modifiedDateTime;\n    if (date !== '') {\n      modifiedDateTime = this.setModifiedDate(date);\n    } else {\n      modifiedDateTime = this.setModifiedDate();\n    }\n    return modifiedDateTime;\n  };\n  StickyNotesAnnotation.prototype.updateModifiedTime = function (time, minutes) {\n    var modifiedTime;\n    if (time >= 12) {\n      if (time === 12) {\n        modifiedTime = time + ':' + minutes + ' PM';\n      } else {\n        modifiedTime = time - 12 + ':' + minutes + ' PM';\n      }\n    } else {\n      modifiedTime = time + ':' + minutes + ' AM';\n    }\n    return modifiedTime;\n  };\n  StickyNotesAnnotation.prototype.setModifiedDate = function (data) {\n    var dateTime;\n    if (data) {\n      dateTime = this.getDateAndTime(data);\n    } else {\n      dateTime = this.getDateAndTime();\n    }\n    var date = new Date(dateTime);\n    var modifiedTime;\n    var modifiedDate = date.toString().split(' ').splice(1, 2).join(' ');\n    if (date.toLocaleTimeString().split(' ').length === 2) {\n      // eslint-disable-next-line max-len\n      modifiedTime = date.toLocaleTimeString().split(' ')[0].split(':').splice(0, 2).join(':') + ' ' + date.toLocaleTimeString().split(' ')[1];\n    } else {\n      // eslint-disable-next-line\n      var time = parseInt(date.toLocaleTimeString().split(':')[0]);\n      var minutes = date.toLocaleTimeString().split(':')[1];\n      modifiedTime = this.updateModifiedTime(time, minutes);\n    }\n    var modifiedDateTime = modifiedDate + ', ' + modifiedTime;\n    return modifiedDateTime;\n  };\n  StickyNotesAnnotation.prototype.convertUTCDateToLocalDate = function (date) {\n    var dateTime = new Date(Date.parse(date));\n    this.globalize = new Internationalization(this.pdfViewer.locale);\n    var timeValue = dateTime.toLocaleTimeString(this.globalize.culture);\n    var newTime;\n    if (!isNullOrUndefined(timeValue.split(' ')[1])) {\n      newTime = timeValue.split(':').splice(0, 2).join(':') + ' ' + timeValue.split(' ')[1];\n    } else {\n      newTime = timeValue.split(':').splice(0, 2).join(':');\n    }\n    var newDate = dateTime.toString().split(' ').splice(1, 2).join(' ');\n    var dateTimeValue = newDate + ',' + ' ' + newTime;\n    return dateTimeValue;\n  };\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.updateModifiedDate = function (titleContainer) {\n    if (titleContainer.id === this.pdfViewer.element.id + '_commenttype_icon') {\n      titleContainer = titleContainer.nextSibling;\n    }\n    var author = titleContainer.textContent.split('-')[0];\n    titleContainer.textContent = author + ' - ' + this.setModifiedDate();\n  };\n  /**\n   * @param annotation\n   * @param isBounds\n   * @param isUndoRedoAction\n   * @private\n   */\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.updateAnnotationModifiedDate = function (annotation, isBounds, isUndoRedoAction) {\n    // eslint-disable-next-line\n    var titleContainer;\n    if (annotation) {\n      // eslint-disable-next-line\n      var commentsContainer = document.getElementById(annotation.annotName);\n      if (commentsContainer) {\n        if (!isBounds) {\n          titleContainer = commentsContainer.firstChild.firstChild.childNodes[1];\n          var author = titleContainer.textContent.split('-')[0];\n          titleContainer.textContent = author + ' - ' + this.setModifiedDate();\n        } else {\n          var type = this.findAnnotationType(annotation);\n          // eslint-disable-next-line\n          var pageAnnotations = this.getAnnotations(annotation.pageIndex, null, type);\n          if (pageAnnotations != null && annotation) {\n            for (var i = 0; i < pageAnnotations.length; i++) {\n              if (annotation.annotName === pageAnnotations[i].annotName) {\n                // eslint-disable-next-line max-len\n                if (annotation.bounds.x !== pageAnnotations[i].bounds.left || annotation.bounds.y !== pageAnnotations[i].bounds.top || annotation.bounds.height !== pageAnnotations[i].bounds.height || annotation.bounds.width !== pageAnnotations[i].bounds.width) {\n                  titleContainer = commentsContainer.firstChild.firstChild.childNodes[1];\n                  var author = titleContainer.textContent.split('-')[0];\n                  titleContainer.textContent = author + ' - ' + this.setModifiedDate();\n                }\n              }\n              if (pageAnnotations[i].shapeAnnotationType === 'sticky') {\n                this.pdfViewer.annotationModule.storeAnnotationCollections(pageAnnotations[i], annotation.pageIndex);\n              }\n            }\n          }\n        }\n        if (isUndoRedoAction) {\n          titleContainer = commentsContainer.firstChild.firstChild.childNodes[1];\n          if (annotation.modifiedDate !== undefined) {\n            var author = titleContainer.textContent.split('-')[0];\n            titleContainer.textContent = author + ' - ' + this.setExistingAnnotationModifiedDate(annotation.modifiedDate);\n          }\n        }\n      }\n    }\n  };\n  /**\n   * @param annotation\n   * @param pageNumber\n   * @param annotation\n   * @param pageNumber\n   * @private\n   */\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.saveImportedStickyNotesAnnotations = function (annotation, pageNumber) {\n    var annotationObject = null;\n    if (!annotation.Author) {\n      // eslint-disable-next-line max-len\n      annotation.Author = this.pdfViewer.annotationSettings.author !== 'Guest' ? this.pdfViewer.annotationSettings.author : this.pdfViewer.stickyNotesSettings.author;\n    }\n    // eslint-disable-next-line max-len\n    var isLock = this.pdfViewer.stickyNotesSettings.isLock ? this.pdfViewer.stickyNotesSettings.isLock : this.pdfViewer.annotationSettings.isLock;\n    // eslint-disable-next-line\n    var allowedInteractions = this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);\n    annotationObject = {\n      // eslint-disable-next-line max-len\n      shapeAnnotationType: 'sticky',\n      author: annotation.Author,\n      allowedInteractions: allowedInteractions,\n      modifiedDate: annotation.ModifiedDate,\n      subject: annotation.Subject,\n      note: annotation.Note,\n      opacity: annotation.Opacity,\n      state: annotation.State,\n      stateModel: annotation.StateModel,\n      pathData: '',\n      comments: this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments, annotation, annotation.Author),\n      review: {\n        state: annotation.State,\n        stateModel: annotation.StateModel,\n        modifiedDate: annotation.ModifiedDate,\n        author: annotation.Author\n      },\n      pageNumber: pageNumber,\n      // eslint-disable-next-line max-len\n      bounds: {\n        left: annotation.Bounds.X,\n        top: annotation.Bounds.Y,\n        width: annotation.Bounds.Width,\n        height: annotation.Bounds.Height,\n        right: annotation.Bounds.Right,\n        bottom: annotation.Bounds.Bottom\n      },\n      annotName: annotation.AnnotName,\n      color: annotation.color,\n      annotationSelectorSettings: this.getSettings(annotation),\n      customData: this.pdfViewer.annotation.getCustomData(annotation),\n      annotationSettings: {\n        isLock: isLock\n      },\n      isPrint: annotation.IsPrint,\n      isCommentLock: annotation.IsCommentLock\n    };\n    this.pdfViewer.annotationModule.storeAnnotations(pageNumber, annotationObject, '_annotations_sticky');\n  };\n  /**\n   * @param annotation\n   * @param pageNumber\n   * @param annotation\n   * @param pageNumber\n   * @private\n   */\n  // eslint-disable-next-line\n  StickyNotesAnnotation.prototype.updateStickyNotesAnnotationCollections = function (annotation, pageNumber) {\n    // eslint-disable-next-line\n    var annotationObject = null;\n    if (!annotation.Author) {\n      // eslint-disable-next-line max-len\n      annotation.Author = this.pdfViewer.annotationSettings.author !== 'Guest' ? this.pdfViewer.annotationSettings.author : this.pdfViewer.stickyNotesSettings.author;\n    }\n    // eslint-disable-next-line max-len\n    var isLock = this.pdfViewer.stickyNotesSettings.isLock ? this.pdfViewer.stickyNotesSettings.isLock : this.pdfViewer.annotationSettings.isLock;\n    // eslint-disable-next-line\n    var allowedInteractions = annotation.AllowedInteraction ? annotation.AllowedInteraction : this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);\n    if (annotation.IsLock) {\n      isLock = annotation.isLock;\n    }\n    annotationObject = {\n      // eslint-disable-next-line max-len\n      shapeAnnotationType: 'sticky',\n      author: annotation.Author,\n      allowedInteractions: allowedInteractions,\n      modifiedDate: annotation.ModifiedDate,\n      subject: annotation.Subject,\n      note: annotation.Note,\n      opacity: annotation.Opacity,\n      state: annotation.State,\n      stateModel: annotation.StateModel,\n      pathData: '',\n      comments: this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments, annotation, annotation.Author),\n      review: {\n        state: annotation.State,\n        stateModel: annotation.StateModel,\n        modifiedDate: annotation.ModifiedDate,\n        author: annotation.Author\n      },\n      // eslint-disable-next-line max-len\n      bounds: {\n        left: annotation.Bounds.X,\n        top: annotation.Bounds.Y,\n        width: annotation.Bounds.Width,\n        height: annotation.Bounds.Height,\n        right: annotation.Bounds.Right,\n        bottom: annotation.Bounds.Bottom\n      },\n      annotationId: annotation.AnnotName,\n      color: annotation.color,\n      pageNumber: pageNumber,\n      customData: this.pdfViewer.annotation.getCustomData(annotation),\n      annotationSettings: {\n        isLock: isLock\n      },\n      isPrint: annotation.IsPrint,\n      isCommentLock: annotation.IsCommentLock\n    };\n    return annotationObject;\n  };\n  /**\n   * @private\n   */\n  StickyNotesAnnotation.prototype.clear = function () {\n    this.commentsCount = 0;\n    this.commentsreplyCount = 0;\n    this.isAccordionContainer = true;\n    this.isEditableElement = false;\n    this.isCreateContextMenu = false;\n    this.isPageCommentsRendered = false;\n    this.isCommentsRendered = false;\n    this.isAnnotationRendered = false;\n    if (this.commentMenuObj) {\n      this.commentMenuObj.destroy();\n    }\n    // eslint-disable-next-line\n    var accordionPages = document.querySelectorAll('.e-pv-accordion-page-container');\n    if (accordionPages) {\n      for (var j = 0; j < accordionPages.length; j++) {\n        // eslint-disable-next-line\n        accordionPages[j].remove();\n      }\n    }\n    if (this.commentsRequestHandler) {\n      this.commentsRequestHandler.clear();\n    }\n  };\n  /**\n   * @private\n   */\n  StickyNotesAnnotation.prototype.getModuleName = function () {\n    return 'StickyNotesAnnotation';\n  };\n  /**\n   * This method used to add annotations with using program.\n   *\n   * @param annotationObject - It describes type of annotation object\n   * @param offset - It describes about the annotation bounds or location\n   * @returns Object\n   * @private\n   */\n  StickyNotesAnnotation.prototype.updateAddAnnotationDetails = function (annotationObject, offset) {\n    //Creating new object if annotationObject is null\n    if (!annotationObject) {\n      annotationObject = {\n        offset: {\n          x: 1,\n          y: 1\n        },\n        pageNumber: 0\n      };\n      offset = annotationObject.offset;\n    } else if (!annotationObject.offset) offset = {\n      x: 1,\n      y: 1\n    };else offset = annotationObject.offset;\n    //Creating the CurrentDate and Annotation name\n    var currentDateString = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n    var annotationName = this.pdfViewer.annotation.createGUID();\n    //Creating annotation settings\n    var annotationSelectorSettings = this.pdfViewer.stickyNotesSettings.annotationSelectorSettings ? this.pdfViewer.stickyNotesSettings.annotationSelectorSettings : this.pdfViewer.annotationSelectorSettings;\n    var annotationSettings = this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stickyNotesSettings);\n    annotationObject.author = annotationObject.author ? annotationObject.author : this.pdfViewer.annotationModule.updateAnnotationAuthor('sticky', annotationSettings.annotationSubType);\n    var allowedInteractions = this.pdfViewer.stickyNotesSettings.allowedInteractions ? this.pdfViewer.stickyNotesSettings.allowedInteractions : this.pdfViewer.annotationSettings.allowedInteractions;\n    annotationSettings.isLock = annotationObject.isLock ? annotationObject.isLock : annotationSettings.isLock;\n    //Creating Annotation objects with it's proper properties\n    var stickyNotesAnnotation = [];\n    var stickyNotes = {\n      AllowedInteractions: annotationObject.allowedInteractions ? annotationObject.allowedInteractions : allowedInteractions,\n      AnnotName: annotationName,\n      AnnotType: 'sticky',\n      AnnotationFlags: null,\n      AnnotationSelectorSettings: annotationObject.annotationSelectorSettings ? annotationObject.annotationSelectorSettings : annotationSelectorSettings,\n      AnnotationSettings: annotationSettings,\n      Author: annotationObject.author ? annotationObject.author : 'Guest',\n      Bounds: {\n        X: offset.x,\n        Y: offset.y,\n        Width: 30,\n        Height: 30,\n        Left: offset.x,\n        Top: offset.y,\n        Location: {\n          X: offset.x,\n          Y: offset.y\n        },\n        Size: {\n          Height: 30,\n          IsEmpty: false,\n          Width: 30\n        }\n      },\n      Color: {\n        IsEmpty: false,\n        B: 51,\n        Blue: 0.2,\n        C: 0,\n        G: 255\n      },\n      Comments: null,\n      CreatedDate: currentDateString,\n      CustomData: annotationObject.customData ? annotationObject.customData : null,\n      ExistingCustomData: null,\n      Icon: 'Comment',\n      IsCommentLock: false,\n      IsLock: annotationObject.isLock ? annotationObject.isLock : false,\n      IsPrint: annotationObject.isPrint ? annotationObject.isPrint : true,\n      ModifiedDate: '',\n      Note: \"\",\n      Opacity: annotationObject.opacity ? annotationObject.opacity : 1,\n      Reference: null,\n      Size: {\n        IsEmpty: true,\n        Width: 0,\n        Height: 0\n      },\n      State: \"\",\n      StateModel: \"\",\n      StrokeColor: null,\n      SubType: null,\n      Subject: annotationObject.subject ? annotationObject.subject : 'Sticky Note',\n      Type: null\n    };\n    //Adding the annotation object to an array and return it\n    stickyNotesAnnotation[0] = stickyNotes;\n    return {\n      stickyNotesAnnotation: stickyNotesAnnotation\n    };\n  };\n  /**\n   * @private\n  */\n  StickyNotesAnnotation.prototype.getAnnotationType = function (type) {\n    var annotationType;\n    if (type === 'stamp' || type === 'Stamp') {\n      annotationType = 'stamp';\n    } else if (type === 'shape' || type === 'Line' || type === 'Radius' || type === 'Rectangle' || type === 'Ellipse' || type === 'Polygon' || type === 'LineWidthArrowHead' || type === 'Square' || type === 'Circle') {\n      annotationType = 'shape';\n    } else if (type === 'textMarkup') {\n      annotationType = 'textMarkup';\n    } else if (type === 'freeText' || type === 'FreeText') {\n      annotationType = 'freeText';\n    } else if (type === 'sticky' || type === 'StickyNotes') {\n      annotationType = 'sticky';\n    } else if (type === 'measure' || type === 'shape_measure') {\n      annotationType = 'measure';\n    } else if (type === 'ink' || type === 'Ink') {\n      annotationType = 'ink';\n    }\n    return annotationType;\n  };\n  /**\n   * @private\n  */\n  StickyNotesAnnotation.prototype.getAuthorName = function (annotation, commonDiv) {\n    var author;\n    if (annotation) {\n      var type = annotation.shapeAnnotationType;\n      var annotationType = this.getAnnotationType(type);\n      author = this.pdfViewer.annotationModule.updateAnnotationAuthor(annotationType, type);\n    } else {\n      author = commonDiv.getAttribute('author');\n    }\n    return author;\n  };\n  return StickyNotesAnnotation;\n}();\nexport { StickyNotesAnnotation };","map":{"version":3,"names":["AjaxHandler","createElement","Browser","Internationalization","isBlazor","isNullOrUndefined","Accordion","ContextMenu","Context","InPlaceEditor","cloneObject","StickyNotesAnnotation","pdfViewer","pdfViewerBase","moreButtonId","commentsCount","commentsreplyCount","commentContextMenu","isAccordionContainer","isCreateContextMenu","isCommentsSelected","isAddAnnotationProgramatically","isEditableElement","isPageCommentsRendered","isCommentsRendered","isAnnotationRendered","textFromCommentPanel","opacity","stickyNotesSettings","prototype","renderStickyNotesAnnotations","stickyAnnotations","pageNumber","canvas","length","i","annotation","isAdded","pageAnnotations","getAnnotations","k","annotationName","annotName","AnnotName","pageAnnotationName","annotationAddMode","annotationModule","findAnnotationMode","AnnotType","annotationObject","position","Bounds","author","Author","AnnotationSettings","updateAnnotationSettings","allowedInteractions","AllowedInteraction","updateAnnotationAllowedInteractions","isPrint","IsPrint","IsLock","isLock","shapeAnnotationType","modifiedDate","ModifiedDate","subject","Subject","note","Note","Opacity","state","State","stateModel","StateModel","pathData","comments","getAnnotationComments","Comments","review","bounds","left","X","top","Y","width","Width","height","Height","right","Right","bottom","Bottom","color","annotationSelectorSettings","getSettings","customData","getCustomData","annotationSettings","isCommentLock","IsCommentLock","annot","AnnotationSelectorSettings","pageIndex","x","Left","y","Top","strokeColor","stampStrokeColor","data","setImageSource","notes","id","fillColor","drawStickyNotes","add","storeAnnotations","settings","borderColor","borderWidth","thickness","fontSize","fontColor","fontFamily","defaultText","dynamicText","fontStyle","font","textAlignment","textAlign","fireAnnotationAdd","selector","_this","image","Image","proxy","onload","commentsDivid","src","createGUID","addComments","document","getElementById","getDateAndTime","getData","addAction","isAddComment","updateDocumentEditedProperty","renderDrawing","canvass","element","isDevice","select","imageSource","createRequestForComments","jsonObject","startIndex","pageLimit","pageCount","pageStartIndex","toString","pageEndIndex","hashId","action","elementId","uniqueId","documentId","jsonDocumentId","url","serviceUrl","serverActionSettings","renderComments","commentsRequestHandler","mode","responseType","clientSideRendering","pdfRendererModule","renderCommentsOnSuccess","send","onSuccess","result","redirect","checkRedirection","JSON","parse","onControlError","error","onFailure","fireAjaxRequestFailed","status","statusText","onError","isInitialRender","annotationComments","annotationDetails","fireAjaxRequestSuccess","annotationCollections","documentAnnotationCollections","updateAnnotationsInDocumentCollections","newCollection","createAnnotationsCollection","startPageIndex","endPageIndex","newData","updateModifiedDateToLocalDate","j","renderAnnotationCollections","excistingAnnotation","newAnnotation","textMarkupAnnotation","updateDocumentAnnotationCollections","shapeAnnotation","measureShapeAnnotation","stampAnnotations","stickyNotesAnnotation","freeTextAnnotation","signatureAnnotation","signatureInkAnnotation","push","pageCollections","collection","annotationOrder","l","parseInt","type","AnnotationType","dateTimeFormat","stickyNotesAnnotationModule","textMarkupAnnotationModule","updateCollections","updateTextMarkupAnnotationCollections","measureAnnotationModule","updateMeasureAnnotationCollections","shapeAnnotationModule","updateShapeAnnotationCollections","updateStickyNotesAnnotationCollections","stampAnnotationModule","updateStampAnnotationCollections","inkAnnotationModule","updateInkCollections","freeTextAnnotationModule","updateFreeTextAnnotationCollections","signatureModule","updateSignatureCollections","toolbarModule","renderAnnotationComments","renderedPagesList","renderAnnotations","isSignature","collections","signatureCollection","annotationCollection","signatureName","annotationId","createPageAccordion","split","createCommentControlPanel","newCommentsDiv","querySelectorAll","style","display","initializeAcccordionContainer","commentPanelText","className","promise","_dotnetInstance","invokeMethodAsync","then","value","textContent","localeObj","getConstant","updateCommentPanelTextTop","navigationPane","commentsContentContainer","appendChild","accordionContentContainer","annotationMenuObj","enableItems","commentPanelContainer","clientHeight","paddingTop","paddingLeft","clientWidth","pageAccordionContainer","accordionContent","zIndex","accordionPageContainer","viewerMainContainer","accordionContainer","pageAccordion","items","header","expanded","content","appendTo","order","alignAccordionContainer","accordionDiv","nextElement","insertBefore","updateCommentPanelScrollTop","scrollValue","offsetTop","clientTop","scrollTop","getButtonState","editObj","commentTextBox","addEventListener","event","querySelector","srcElement","defaultValue","ej2_instances","disabled","annotationSubType","isReRender","accordionExpand","expandItem","commentsContainer","accessKey","isCommentsAdded","childElementCount","children","remove","Name","setAttribute","commentsAnnotationSelect","bind","commentDiv","title","getAttribute","createTitleContainer","attrs","editObj_1","model","placeholder","emptyText","editableOn","saveButton","cssClass","cancelButton","submitOnEnter","Text","created","setTimeout","innerText","beginEdit","valueEle","textBox","enableEditMode","actionSuccess","createCommentDiv","isCommentLocked","checkIslockProperty","MarkupText","statusContainer","statusDiv","statusSpan","updateStatusContainer","isNewcommentAdded","commentsDivClickEvent","commentDivMouseOver","commentDivMouseLeave","openEditorElement","commentDivFocus","args","freeTextSettings","target","selectedItems","annotations","relatedTarget","preventDefault","blur","proxy_1","pageNumber_1","currentPageNumber","updateScrollPosition","commentHeight","getBoundingClientRect","updateCommentsScrollTop","commentsHeight","titleContainer","newCommentDiv","localName","parentElement","previousSibling","childNodes","commentObj","lastChild","firstChild","click","modifyTextProperty","prevValue","parentNode","updateModifiedDate","saveCommentDiv","comment","annotationAuthor","lastElement","commentValue","name","removeChild","replyTextBox","replyCommentDiv","getAuthorName","createReplyDivTitleContainer","commentDivOnSelect","border","saveObj_1","modifyProperty","commentsDivDoubleClickEvent","modifyCommentsProperty","undoRedoAction","isCommentAction","replyDiv","undefined","saveObj","commentsDiv","createCommentsContainer","isCopy","indent","annotType","addStickyNotesAnnotations","commentElement","titleElement","commentsDivElement","subType","annotationType","getAnnotationType","commentTitleContainer","commentTypeSpan","updateCommentIcon","updateAnnotationAuthor","padding","cssFloat","commentsTitle","setModifiedDate","convertUTCDateToLocalDate","moreOptionsButton","visibility","moreOptionsButtonSpan","author_1","createCommentContextMenu","openTextEditor","moreOptionsClick","replyTitleContainer","replyTitle","setExistingAnnotationModifiedDate","moreButton","moreButtonSpan","commentSpan","backgroundColor","updateAccordionContainer","removeDiv","text","commentMenuElement","commentMenuObj","beforeOpen","contextMenuBeforeOpen","commentMenuItemSelect","enableRtl","enableDesktopMode","animationSettings","effect","contextActiveDiv","contextDiv","nextSibling","item","commentShow","deleteAnnotation","modifyCommentDeleteProperty","acceptedStatusDiv","modifyStatusProperty","completedStatusDiv","statusElement","statusOptionSpan","cancelStatusDiv","cancelStatusElement","cancelStatusSpan","rejectedStatusDiv","rejectedStatusElement","rejectedStatusSpan","isMoreOptionClick","checkContextMenuDeleteItem","open","clientY","clientX","currentTarget","drawInkAnnotation","isLocked","checkAnnotationSettings","commentEvent","annotCollection","currentTextMarkupAnnotation","isReadonly","findAnnotationObject","isCommentsSelect","isSetAnnotationType","showCommentsPanel","classList","contains","editElement","commentsElement","activeElement","textElement","enableShapeLabel","editModule","fireCommentSelect","commentSelect","z","activeSiblingElement","drawIcons","isCommentIconAdded","getEventPageNumber","pageCurrentRect","getElement","zoomValue","getZoomFactor","isFormFieldShape","commentsButton","commentsIcon","accordion","minHeight","forEach","currentTextBox","textDiv","navigation","navigationModule","goToPage","setAnnotationType","selectAnnotationObj","parentDivId","includes","updateCommentsContainerWidth","selectCommentsAnnotation","typeString","storeCommentObject","window","sessionStorage","getItem","isStorageExceed","annotationStorage","annotationCommentObject","index","getPageCollection","currentSelector","fireAnnotationUnSelect","clearSelection","clearCurrentAnnotationSelection","selectAnnotation","selectTextMarkupCurrentPage","enableAnnotationPropertiesTool","enableAnnotationToolbar","annotationToolbarModule","isToolbarHidden","showAnnotationToolbar","annotationItem","randomId","onAnnotationMouseDown","rect","pageSize","getAnnotationTop","scroll_1","viewerContainer","top_1","scroll_2","previousValue","currentAnnotation","module","filter","isMeasure","isTextAdded","modifyDynamicTextValue","labelContent","nodePropertyChange","measureType","clonedObject","updateUndoRedoCollections","fireCommentAdd","fireCommentEdit","date","Date","globalize","dateOptions","format","dateTime","formatDate","isComment","newArray","parentId","annotId","fireCommentStatusChanged","clonedObj","replyElement","clonedAnnotation","commentsParentElement","positionValue","fireCommentDelete","splice","updateOpacityValue","undoAction","isAction","undoAnnotation","commentsMainDiv","clonedAnnotationObject","redoCommentsElement","activeDiv","redoAction","poppedItem","pop","i_1","annotationBase","shapeType","storeAnnotationCollections","deleteStickyNotesAnnotations","manageAnnotations","addAnnotationComments","undoCommentsElement","findPosition","parentDiv","shapeAnnotations","storeObject","annotObject","removeItem","annotationStringified","stringify","setItem","updateStickyNotes","currentAnnot","saveStickyAnnotations","Array","skipDownload","pageAnnotationObject","getBounds","addTextToComments","updateAnnotationCollection","isCut","findAnnotationType","removedAnnotationCollection","updateAnnotation","vertexPoints","modifiedDateTime","updateModifiedTime","time","minutes","modifiedTime","join","toLocaleTimeString","locale","timeValue","culture","newTime","newDate","dateTimeValue","updateAnnotationModifiedDate","isBounds","isUndoRedoAction","saveImportedStickyNotesAnnotations","clear","destroy","accordionPages","getModuleName","updateAddAnnotationDetails","offset","currentDateString","updateSettings","stickyNotes","AllowedInteractions","AnnotationFlags","Location","Size","IsEmpty","Color","B","Blue","C","G","CreatedDate","CustomData","ExistingCustomData","Icon","Reference","StrokeColor","SubType","Type","commonDiv"],"sources":["/Users/saleem/Desktop/KClient/Web App/Ver_3.6/User Interface/website_Source files/node_modules/@syncfusion/ej2-pdfviewer/src/pdfviewer/annotation/sticky-notes-annotation.js"],"sourcesContent":["import { AjaxHandler } from '../index';\nimport { createElement, Browser, Internationalization, isBlazor, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Accordion, ContextMenu as Context } from '@syncfusion/ej2-navigations';\nimport { InPlaceEditor } from '@syncfusion/ej2-inplace-editor';\nimport { cloneObject } from '../drawing/drawing-util';\n/**\n * StickyNotes module\n */\nvar StickyNotesAnnotation = /** @class */ (function () {\n    /**\n     * @param pdfViewer\n     * @param pdfViewerBase\n     * @param pdfViewer\n     * @param pdfViewerBase\n     * @private\n     */\n    function StickyNotesAnnotation(pdfViewer, pdfViewerBase) {\n        this.moreButtonId = '';\n        this.commentsCount = 0;\n        this.commentsreplyCount = 0;\n        this.commentContextMenu = [];\n        this.isAccordionContainer = true;\n        this.isCreateContextMenu = false;\n        this.isCommentsSelected = false;\n        /**\n         * @private\n         */\n        this.isAddAnnotationProgramatically = false;\n        /**\n         * @private\n         */\n        this.isEditableElement = false;\n        this.isPageCommentsRendered = false;\n        this.isCommentsRendered = false;\n        /**\n         * @private\n         */\n        this.isAnnotationRendered = false;\n        /**\n         * @private\n         */\n        this.textFromCommentPanel = false;\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n        this.opacity = this.pdfViewer.stickyNotesSettings.opacity ? this.pdfViewer.stickyNotesSettings.opacity : 1;\n    }\n    /**\n     * @param stickyAnnotations\n     * @param pageNumber\n     * @param canvas\n     * @private\n     */\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.renderStickyNotesAnnotations = function (stickyAnnotations, pageNumber, canvas) {\n        if (stickyAnnotations) {\n            if (stickyAnnotations.length > 0) {\n                for (var i = 0; i < stickyAnnotations.length; i++) {\n                    // eslint-disable-next-line\n                    var annotation = stickyAnnotations[i];\n                    var isAdded = false;\n                    // eslint-disable-next-line\n                    var pageAnnotations = this.getAnnotations(pageNumber, null, 'sticky');\n                    if (pageAnnotations !== null) {\n                        for (var k = 0; k < pageAnnotations.length; k++) {\n                            var annotationName = annotation.annotName ? annotation.annotName : annotation.AnnotName;\n                            var pageAnnotationName = pageAnnotations[k].annotName ? pageAnnotations[k].annotName : pageAnnotations[k].AnnotName;\n                            if (pageAnnotationName && annotationName && pageAnnotationName === annotationName) {\n                                isAdded = true;\n                                break;\n                            }\n                        }\n                    }\n                    if (!isAdded) {\n                        annotation.annotationAddMode = this.pdfViewer.annotationModule.findAnnotationMode(annotation, pageNumber, annotation.AnnotType);\n                        var annotationObject = null;\n                        // eslint-disable-next-line\n                        var position = annotation.Bounds;\n                        var author = annotation.Author;\n                        // eslint-disable-next-line max-len\n                        annotation.AnnotationSettings = annotation.AnnotationSettings ? annotation.AnnotationSettings : this.pdfViewer.annotationModule.updateAnnotationSettings(annotation);\n                        annotation.allowedInteractions = annotation.AllowedInteraction ? annotation.AllowedInteraction : this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);\n                        var isPrint = true;\n                        if (annotation.annotationAddMode === 'Imported Annotation') {\n                            isPrint = annotation.IsPrint;\n                        }\n                        else {\n                            isPrint = annotation.AnnotationSettings.isPrint;\n                        }\n                        if (annotation.IsLock) {\n                            annotation.AnnotationSettings.isLock = annotation.IsLock;\n                        }\n                        annotationObject = {\n                            // eslint-disable-next-line max-len\n                            shapeAnnotationType: 'sticky', author: author, modifiedDate: annotation.ModifiedDate, subject: annotation.Subject, note: annotation.Note, opacity: annotation.Opacity, state: annotation.State, stateModel: annotation.StateModel,\n                            pathData: '', comments: this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments, annotation, author), review: { state: annotation.State, stateModel: annotation.StateModel, modifiedDate: annotation.ModifiedDate, author: author }, pageNumber: pageNumber,\n                            // eslint-disable-next-line max-len\n                            bounds: { left: annotation.Bounds.X, top: annotation.Bounds.Y, width: annotation.Bounds.Width, height: annotation.Bounds.Height, right: annotation.Bounds.Right, bottom: annotation.Bounds.Bottom },\n                            annotName: annotation.AnnotName, color: annotation.color,\n                            annotationSelectorSettings: this.getSettings(annotation),\n                            customData: this.pdfViewer.annotation.getCustomData(annotation),\n                            annotationSettings: annotation.AnnotationSettings, allowedInteractions: annotation.allowedInteractions,\n                            isPrint: isPrint, isCommentLock: annotation.IsCommentLock\n                        };\n                        var annot = void 0;\n                        // eslint-disable-next-line max-len\n                        annotation.AnnotationSelectorSettings = annotation.AnnotationSelectorSettings ? annotation.AnnotationSelectorSettings : this.pdfViewer.annotationSelectorSettings;\n                        annot = {\n                            // eslint-disable-next-line max-len\n                            author: author, modifiedDate: annotationObject.modifiedDate, annotName: annotationObject.annotName, pageIndex: pageNumber, bounds: { x: position.Left, y: position.Top, width: position.Width, height: position.Height }, strokeColor: 'transparent', stampStrokeColor: '', data: this.setImageSource(), shapeAnnotationType: 'StickyNotes',\n                            subject: annotationObject.subject, notes: annotationObject.note, opacity: annotationObject.opacity, id: annotationObject.annotName, fillColor: annotationObject.color,\n                            annotationSelectorSettings: annotation.AnnotationSelectorSettings,\n                            annotationSettings: annotationObject.annotationSettings,\n                            // eslint-disable-next-line max-len\n                            annotationAddMode: annotation.annotationAddMode, isPrint: isPrint, isCommentLock: annotationObject.isCommentLock\n                        };\n                        if (canvas) {\n                            this.drawStickyNotes(position.Left, position.Top, position.Width, position.Height, pageNumber, annot, canvas);\n                        }\n                        else {\n                            this.pdfViewer.add(annot);\n                            this.drawStickyNotes(position.Left, position.Top, position.Width, position.Height, pageNumber, annot);\n                            this.pdfViewer.annotationModule.storeAnnotations(pageNumber, annotationObject, '_annotations_sticky');\n                        }\n                        if (this.isAddAnnotationProgramatically) {\n                            // eslint-disable-next-line\n                            var settings = {\n                                opacity: annot.opacity, borderColor: annot.strokeColor, borderWidth: annot.thickness, author: annotation.author, subject: annotation.subject, modifiedDate: annotation.modifiedDate,\n                                // eslint-disable-next-line\n                                fillColor: annot.fillColor, fontSize: annot.fontSize, width: annot.bounds.width, height: annot.bounds.height, fontColor: annot.fontColor, fontFamily: annot.fontFamily, defaultText: annot.dynamicText, fontStyle: annot.font, textAlignment: annot.textAlign\n                            };\n                            this.pdfViewer.fireAnnotationAdd(annot.pageIndex, annot.annotName, 'StickyNotes', annot.bounds, settings);\n                        }\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @param annotation\n     * @private\n     */\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.getSettings = function (annotation) {\n        var selector = this.pdfViewer.annotationSelectorSettings;\n        if (annotation.AnnotationSelectorSettings) {\n            selector = annotation.AnnotationSelectorSettings;\n        }\n        else if (this.pdfViewer.stickyNotesSettings.annotationSelectorSettings) {\n            selector = this.pdfViewer.stickyNotesSettings.annotationSelectorSettings;\n        }\n        return selector;\n    };\n    /**\n     * @param X\n     * @param Y\n     * @param width\n     * @param height\n     * @param pageIndex\n     * @param annotation\n     * @param canvas\n     * @param X\n     * @param Y\n     * @param width\n     * @param height\n     * @param pageIndex\n     * @param annotation\n     * @param canvas\n     * @param X\n     * @param Y\n     * @param width\n     * @param height\n     * @param pageIndex\n     * @param annotation\n     * @param canvas\n     * @private\n     */\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.drawStickyNotes = function (X, Y, width, height, pageIndex, annotation, canvas) {\n        var _this = this;\n        var annot;\n        var annotationObject = null;\n        var image = new Image();\n        // eslint-disable-next-line\n        var proxy = this;\n        image.onload = function () {\n            var commentsDivid;\n            var annotationName;\n            // eslint-disable-next-line max-len\n            var author = (_this.pdfViewer.annotationSettings.author !== 'Guest') ? _this.pdfViewer.annotationSettings.author : _this.pdfViewer.stickyNotesSettings.author;\n            var subject = (_this.pdfViewer.annotationSettings.subject !== \"\" && !isNullOrUndefined(_this.pdfViewer.annotationSettings.subject)) ? _this.pdfViewer.annotationSettings.subject : _this.pdfViewer.stickyNotesSettings.subject ? _this.pdfViewer.stickyNotesSettings.subject : 'Sticky Note';\n            if (annotation) {\n                annot = {\n                    // eslint-disable-next-line max-len\n                    author: annotation.author, modifiedDate: annotation.modifiedDate, annotName: annotation.annotName, data: image.src, bounds: { x: X, y: Y, width: width, height: height }, subject: annotation.subject,\n                    notes: annotation.notes, opacity: annotation.opacity, id: annotation.annotName, shapeAnnotationType: 'StickyNotes', strokeColor: 'transparent', stampStrokeColor: '', pageIndex: annotation.pageIndex, isPrint: annotation.isPrint\n                };\n            }\n            else {\n                annotationName = _this.pdfViewer.annotation.createGUID();\n                commentsDivid = proxy.addComments('sticky', pageIndex + 1);\n                if (commentsDivid) {\n                    document.getElementById(commentsDivid).id = annotationName;\n                }\n                // eslint-disable-next-line\n                var annotationSelectorSettings = _this.pdfViewer.stickyNotesSettings.annotationSelectorSettings ? _this.pdfViewer.stickyNotesSettings.annotationSelectorSettings : _this.pdfViewer.annotationSelectorSettings;\n                var isPrint = _this.pdfViewer.stickyNotesSettings.isPrint;\n                annot = {\n                    // eslint-disable-next-line max-len\n                    bounds: { x: X, y: Y, width: width, height: height }, pageIndex: pageIndex, data: image.src, modifiedDate: _this.getDateAndTime(),\n                    shapeAnnotationType: 'StickyNotes', strokeColor: 'transparent', stampStrokeColor: '', annotName: annotationName, id: annotationName, opacity: _this.opacity, isPrint: isPrint\n                };\n                // eslint-disable-next-line max-len\n                var isLock = _this.pdfViewer.stickyNotesSettings.isLock ? _this.pdfViewer.stickyNotesSettings.isLock : _this.pdfViewer.annotationSettings.isLock;\n                // eslint-disable-next-line\n                var allowedInteractions = _this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);\n                annotationObject = {\n                    // eslint-disable-next-line max-len\n                    author: author, allowedInteractions: allowedInteractions, modifiedDate: _this.getDateAndTime(), subject: subject, shapeAnnotationType: 'sticky', pageNumber: pageIndex,\n                    // eslint-disable-next-line max-len\n                    note: '', opacity: _this.opacity, pathData: '', state: '', stateModel: '', color: 'rgba(255,255,0)', comments: [], annotName: annotationName,\n                    // eslint-disable-next-line max-len\n                    bounds: { left: X, top: Y, width: width, height: height }, review: { state: '', stateModel: '', modifiedDate: '', author: author },\n                    annotationSelectorSettings: annotationSelectorSettings,\n                    // eslint-disable-next-line max-len\n                    customData: _this.pdfViewer.annotationModule.getData('sticky'), annotationSettings: { isLock: isLock }, isPrint: isPrint, isCommentLock: false\n                };\n            }\n            if (!annotation) {\n                // eslint-disable-next-line max-len\n                proxy.pdfViewer.annotation.addAction(pageIndex, null, annot, 'Addition', '', annot, annot);\n                proxy.pdfViewer.add(annot);\n                proxy.pdfViewer.annotationModule.storeAnnotations(pageIndex, annotationObject, '_annotations_sticky');\n            }\n            if (proxy.pdfViewerBase.isAddComment) {\n                // eslint-disable-next-line max-len\n                // eslint-disable-next-line\n                var bounds = { left: annot.bounds.x, top: annot.bounds.y, width: annot.bounds.width, height: annot.bounds.height };\n                _this.pdfViewerBase.updateDocumentEditedProperty(true);\n                // eslint-disable-next-line\n                var settings = { opacity: annot.opacity, author: author, modifiedDate: annot.modifiedDate, subject: subject };\n                _this.pdfViewer.fireAnnotationAdd(annot.pageIndex, annot.annotName, 'StickyNotes', bounds, settings);\n            }\n            if (canvas) {\n                // eslint-disable-next-line\n                proxy.pdfViewer.renderDrawing(canvas, pageIndex);\n            }\n            else {\n                // eslint-disable-next-line\n                var canvass = document.getElementById(proxy.pdfViewer.element.id + '_annotationCanvas_' + pageIndex);\n                // eslint-disable-next-line\n                proxy.pdfViewer.renderDrawing(canvass, pageIndex);\n            }\n            if (Browser.isDevice) {\n                proxy.pdfViewer.select([annot.id], annot.annotationSelectorSettings);\n            }\n            proxy.pdfViewerBase.isAddComment = false;\n        };\n        image.src = this.setImageSource();\n    };\n    StickyNotesAnnotation.prototype.setImageSource = function () {\n        // eslint-disable-next-line max-len\n        var imageSource = 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIgogICB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgd2lkdGg9IjE2IgogICBoZWlnaHQ9IjE1IgogICB2aWV3Qm94PSIwIDAgNC4yMzMzMzMxIDMuOTY4NzQ5NyIKICAgdmVyc2lvbj0iMS4xIj4KICA8ZyBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBkPSJNIDMuODM4OSwwLjk0MTY3IEMgMy42NTM5LDAuNzAzNjcgMy40MTU5LDAuNTE3NjcgMy4xMjQ5LDAuMzg1NjcgMi44MDc5LDAuMjUzNjcgMi40ODk5LDAuMTczNjcgMi4xMTk5LDAuMTczNjcgMS43NDg5LDAuMTczNjcgMS40MzE5LDAuMjUzNjcgMS4xMTQyLDAuMzg1NjcgMC44MjMxNiwwLjUxNzY3IDAuNTg1MTYsMC43MDM2NyAwLjQwMDE2LDAuOTQxNjcgMC4yMTUxNiwxLjE3OTcgMC4xMzUxNiwxLjQxNzcgMC4xMzUxNiwxLjcwODcgMC4xMzUxNiwxLjk0NjcgMC4xODgxNiwyLjE1ODcgMC4zMjAxNiwyLjM0MzcgMC40NTMxNiwyLjU1NTcgMC42MTExNiwyLjcxMzcgMC44MjMxNiwyLjg0NjcgMC43OTIxNiwzLjE1NDcgMC42NTAxNiwzLjM4MjcgMC40NzkxNiwzLjU4NzcgMC40MjgxNiwzLjY2NzcgMC41MTcxNiwzLjc0MTcgMC42OTExNiwzLjcxOTcgMS4wODgyLDMuNjM5NyAxLjQwNDksMy40NTQ3IDEuNjQyOSwzLjE2MzcgMS44MDE5LDMuMTkwNyAxLjk2MDksMy4yMTY3IDIuMTE5OSwzLjIxNjcgMi40ODk5LDMuMjE2NyAyLjgwNzksMy4xMzc3IDMuMTI0OSwzLjAwNTcgMy40MTU5LDIuODcyNyAzLjY4MDksMi42ODc3IDMuODM4OSwyLjQ0OTcgNC4wMjQ5LDIuMjExNyA0LjEwMzksMS45NzM3IDQuMTAzOSwxLjY4MjcgNC4xMDM5LDEuNDE3NyA0LjAyNDksMS4xNTI3IDMuODM4OSwwLjk0MTY3IFoiCiAgICAgICBpZD0icGF0aDE1MjQiCiAgICAgICBzdHlsZT0iZmlsbDojZmZmNzAwO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDowLjI2NDU4MztzdHJva2Utb3BhY2l0eToxIiAvPgogICAgPHBhdGgKICAgICAgIGQ9Ik0gMy4wNDI5LDEuNDE2NyBIIDEuMTkxMiBDIDEuMTExMiwxLjQxNjcgMS4wNTkyLDEuMzYzNyAxLjA1OTIsMS4yODM3IDEuMDU5MiwxLjIwNDcgMS4xMTEyLDEuMTUxNyAxLjE5MTIsMS4xNTE3IEggMy4wNDI5IEMgMy4xMjE5LDEuMTUxNyAzLjE3NDksMS4yMDQ3IDMuMTc0OSwxLjI4MzcgMy4xNzQ5LDEuMzYzNyAzLjEyMTksMS40MTY3IDMuMDQyOSwxLjQxNjcgWiIKICAgICAgIGlkPSJwYXRoMTUzNiIKICAgICAgIHN0eWxlPSJzdHJva2Utd2lkdGg6MC4yNjQ1ODMiIC8+CiAgICA8cGF0aAogICAgICAgZD0iTSAzLjA0MjksMS45NDU3IEggMS4xOTEyIEMgMS4xMTEyLDEuOTQ1NyAxLjA1OTIsMS44OTI3IDEuMDU5MiwxLjgxMjcgMS4wNTkyLDEuNzMzNyAxLjExMTIsMS42ODA3IDEuMTkxMiwxLjY4MDcgSCAzLjA0MjkgQyAzLjEyMTksMS42ODA3IDMuMTc0OSwxLjczMzcgMy4xNzQ5LDEuODEyNyAzLjE3NDksMS44OTI3IDMuMTIxOSwxLjk0NTcgMy4wNDI5LDEuOTQ1NyBaIgogICAgICAgaWQ9InBhdGgxNTQwIgogICAgICAgc3R5bGU9InN0cm9rZS13aWR0aDowLjI2NDU4MyIgLz4KICA8L2c+Cjwvc3ZnPgo=';\n        return imageSource;\n    };\n    /**\n     * @private\n     */\n    StickyNotesAnnotation.prototype.createRequestForComments = function () {\n        var jsonObject;\n        var proxy = this;\n        var startIndex = 0;\n        var pageLimit = 20;\n        var pageCount = proxy.pdfViewerBase.pageCount;\n        if (!proxy.isCommentsRendered) {\n            if (pageLimit < pageCount) {\n                pageCount = pageLimit;\n            }\n            else {\n                proxy.isPageCommentsRendered = true;\n            }\n        }\n        if (!this.isCommentsRendered) {\n            // eslint-disable-next-line max-len\n            jsonObject = { pageStartIndex: startIndex.toString(), pageEndIndex: pageCount.toString(), hashId: this.pdfViewerBase.hashId, action: 'RenderAnnotationComments', elementId: this.pdfViewer.element.id, uniqueId: proxy.pdfViewerBase.documentId };\n            proxy.isCommentsRendered = true;\n        }\n        else {\n            // eslint-disable-next-line max-len\n            jsonObject = { pageStartIndex: pageLimit.toString(), pageEndIndex: pageCount.toString(), hashId: this.pdfViewerBase.hashId, action: 'RenderAnnotationComments', elementId: this.pdfViewer.element.id, uniqueId: proxy.pdfViewerBase.documentId };\n        }\n        if (this.pdfViewerBase.jsonDocumentId) {\n            // eslint-disable-next-line\n            jsonObject.documentId = this.pdfViewerBase.jsonDocumentId;\n        }\n        var url = this.pdfViewer.serviceUrl + '/' + this.pdfViewer.serverActionSettings.renderComments;\n        proxy.commentsRequestHandler = new AjaxHandler(proxy.pdfViewer);\n        proxy.commentsRequestHandler.url = url;\n        proxy.commentsRequestHandler.mode = true;\n        proxy.commentsRequestHandler.responseType = 'text';\n        if (this.pdfViewerBase.clientSideRendering) {\n            var data = this.pdfViewer.pdfRendererModule.getAnnotationComments(jsonObject);\n            this.renderCommentsOnSuccess(data, proxy);\n        }\n        else {\n            proxy.commentsRequestHandler.send(jsonObject);\n            // eslint-disable-next-line\n            proxy.commentsRequestHandler.onSuccess = function (result) {\n                // eslint-disable-next-line\n                var data = result.data;\n                var redirect = proxy.pdfViewerBase.checkRedirection(data);\n                if (!redirect) {\n                    if (data) {\n                        if (typeof data !== 'object') {\n                            try {\n                                data = JSON.parse(data);\n                                if (typeof data !== 'object') {\n                                    data = JSON.parse(data);\n                                }\n                                if (typeof data !== 'object') {\n                                    proxy.pdfViewerBase.onControlError(500, data, this.pdfViewer.serverActionSettings.renderComments);\n                                    data = null;\n                                }\n                            }\n                            catch (error) {\n                                proxy.pdfViewerBase.onControlError(500, data, this.pdfViewer.serverActionSettings.renderComments);\n                                data = null;\n                            }\n                        }\n                        proxy.renderCommentsOnSuccess(data, proxy);\n                    }\n                }\n            };\n            // eslint-disable-next-line\n            proxy.commentsRequestHandler.onFailure = function (result) {\n                this.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText);\n            };\n            // eslint-disable-next-line\n            proxy.commentsRequestHandler.onError = function (result) {\n                proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.renderComments);\n            };\n        }\n    };\n    StickyNotesAnnotation.prototype.renderCommentsOnSuccess = function (data, proxy) {\n        if (data) {\n            var isInitialRender = false;\n            if (proxy.pdfViewerBase.annotationComments) {\n                // eslint-disable-next-line\n                proxy.pdfViewerBase.annotationComments = data.annotationDetails;\n            }\n            else {\n                proxy.pdfViewerBase.annotationComments = data.annotationDetails;\n                isInitialRender = true;\n            }\n            if (data.annotationDetails && data.uniqueId === proxy.pdfViewerBase.documentId) {\n                proxy.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.renderComments, data);\n                proxy.isAnnotationRendered = true;\n                // eslint-disable-next-line\n                var annotationCollections = void 0;\n                if (proxy.pdfViewerBase.documentAnnotationCollections) {\n                    // eslint-disable-next-line max-len\n                    annotationCollections = proxy.updateAnnotationsInDocumentCollections(proxy.pdfViewerBase.annotationComments, proxy.pdfViewerBase.documentAnnotationCollections);\n                }\n                else {\n                    // eslint-disable-next-line\n                    var newCollection = proxy.pdfViewerBase.createAnnotationsCollection();\n                    // eslint-disable-next-line max-len\n                    annotationCollections = proxy.updateAnnotationsInDocumentCollections(proxy.pdfViewerBase.annotationComments, newCollection);\n                }\n                proxy.pdfViewerBase.annotationComments = annotationCollections;\n                proxy.pdfViewerBase.documentAnnotationCollections = annotationCollections;\n                for (var i = data.startPageIndex; i < data.endPageIndex; i++) {\n                    var newData = data.annotationDetails[i];\n                    proxy.pdfViewerBase.updateModifiedDateToLocalDate(newData, \"annotationOrder\");\n                    proxy.pdfViewerBase.updateModifiedDateToLocalDate(newData, \"freeTextAnnotation\");\n                    proxy.pdfViewerBase.updateModifiedDateToLocalDate(newData, \"measureShapeAnnotation\");\n                    proxy.pdfViewerBase.updateModifiedDateToLocalDate(newData, \"shapeAnnotation\");\n                    proxy.pdfViewerBase.updateModifiedDateToLocalDate(newData, \"signatureAnnotation\");\n                    proxy.pdfViewerBase.updateModifiedDateToLocalDate(newData, \"signatureInkAnnotation\");\n                    proxy.pdfViewerBase.updateModifiedDateToLocalDate(newData, \"stampAnnotations\");\n                    proxy.pdfViewerBase.updateModifiedDateToLocalDate(newData, \"stickyNotesAnnotation\");\n                    proxy.pdfViewerBase.updateModifiedDateToLocalDate(newData, \"textMarkupAnnotation\");\n                }\n                for (var j = data.startPageIndex; j < data.endPageIndex; j++) {\n                    if (data.annotationDetails[j]) {\n                        proxy.renderAnnotationCollections(data.annotationDetails[j], j, isInitialRender);\n                    }\n                }\n                if (!proxy.isPageCommentsRendered) {\n                    proxy.isPageCommentsRendered = true;\n                    proxy.createRequestForComments();\n                }\n            }\n        }\n    };\n    /**\n     * @param excistingAnnotation\n     * @param newAnnotation\n     * @private\n     */\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.updateAnnotationsInDocumentCollections = function (excistingAnnotation, newAnnotation) {\n        for (var i = 0; i < this.pdfViewerBase.pageCount; i++) {\n            if (excistingAnnotation[i] && newAnnotation[i]) {\n                // eslint-disable-next-line max-len\n                if (excistingAnnotation[i].textMarkupAnnotation && excistingAnnotation[i].textMarkupAnnotation.length !== 0 && newAnnotation[i].textMarkupAnnotation) {\n                    for (var j = 0; j < excistingAnnotation[i].textMarkupAnnotation.length; j++) {\n                        // eslint-disable-next-line max-len\n                        this.updateDocumentAnnotationCollections(excistingAnnotation[i].textMarkupAnnotation[j], newAnnotation[i].textMarkupAnnotation);\n                    }\n                }\n                // eslint-disable-next-line max-len\n                if (excistingAnnotation[i].shapeAnnotation && excistingAnnotation[i].shapeAnnotation.length !== 0 && newAnnotation[i].shapeAnnotation) {\n                    for (var j = 0; j < excistingAnnotation[i].shapeAnnotation.length; j++) {\n                        // eslint-disable-next-line max-len\n                        this.updateDocumentAnnotationCollections(excistingAnnotation[i].shapeAnnotation[j], newAnnotation[i].shapeAnnotation);\n                    }\n                }\n                // eslint-disable-next-line max-len\n                if (excistingAnnotation[i].measureShapeAnnotation && excistingAnnotation[i].measureShapeAnnotation.length !== 0 && newAnnotation[i].measureShapeAnnotation) {\n                    for (var j = 0; j < excistingAnnotation[i].measureShapeAnnotation.length; j++) {\n                        // eslint-disable-next-line max-len\n                        this.updateDocumentAnnotationCollections(excistingAnnotation[i].measureShapeAnnotation[j], newAnnotation[i].measureShapeAnnotation);\n                    }\n                }\n                // eslint-disable-next-line max-len\n                if (excistingAnnotation[i].stampAnnotations && excistingAnnotation[i].stampAnnotations.length !== 0 && newAnnotation[i].stampAnnotations) {\n                    for (var j = 0; j < excistingAnnotation[i].stampAnnotations.length; j++) {\n                        // eslint-disable-next-line max-len\n                        this.updateDocumentAnnotationCollections(excistingAnnotation[i].stampAnnotations[j], newAnnotation[i].stampAnnotations);\n                    }\n                }\n                // eslint-disable-next-line max-len\n                if (excistingAnnotation[i].stickyNotesAnnotation && excistingAnnotation[i].stickyNotesAnnotation.length !== 0 && newAnnotation[i].stickyNotesAnnotation) {\n                    for (var j = 0; j < excistingAnnotation[i].stickyNotesAnnotation.length; j++) {\n                        // eslint-disable-next-line max-len\n                        this.updateDocumentAnnotationCollections(excistingAnnotation[i].stickyNotesAnnotation[j], newAnnotation[i].stickyNotesAnnotation);\n                    }\n                }\n                // eslint-disable-next-line max-len\n                if (excistingAnnotation[i].freeTextAnnotation && excistingAnnotation[i].freeTextAnnotation.length !== 0 && newAnnotation[i].freeTextAnnotation) {\n                    for (var j = 0; j < excistingAnnotation[i].freeTextAnnotation.length; j++) {\n                        // eslint-disable-next-line max-len\n                        this.updateDocumentAnnotationCollections(excistingAnnotation[i].freeTextAnnotation[j], newAnnotation[i].freeTextAnnotation);\n                    }\n                }\n                // eslint-disable-next-line max-len\n                if (excistingAnnotation[i].signatureAnnotation && excistingAnnotation[i].signatureAnnotation.length !== 0 && newAnnotation[i].signatureAnnotation) {\n                    for (var j = 0; j < excistingAnnotation[i].signatureAnnotation.length; j++) {\n                        // eslint-disable-next-line max-len\n                        this.updateDocumentAnnotationCollections(excistingAnnotation[i].signatureAnnotation[j], newAnnotation[i].signatureAnnotation);\n                    }\n                }\n                // eslint-disable-next-line max-len\n                if (excistingAnnotation[i].signatureInkAnnotation && excistingAnnotation[i].signatureInkAnnotation.length !== 0 && newAnnotation[i].signatureInkAnnotation) {\n                    for (var j = 0; j < excistingAnnotation[i].signatureInkAnnotation.length; j++) {\n                        // eslint-disable-next-line max-len\n                        this.updateDocumentAnnotationCollections(excistingAnnotation[i].signatureInkAnnotation[j], newAnnotation[i].signatureInkAnnotation);\n                    }\n                }\n            }\n        }\n        return newAnnotation;\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.updateDocumentAnnotationCollections = function (excistingAnnotation, newAnnotation) {\n        if (newAnnotation.length === 0) {\n            newAnnotation.push(excistingAnnotation);\n        }\n        else {\n            var isAdded = false;\n            for (var i = 0; i < newAnnotation.length; i++) {\n                // eslint-disable-next-line max-len\n                if ((excistingAnnotation.AnnotName && newAnnotation[i].AnnotName) && (excistingAnnotation.AnnotName === newAnnotation[i].AnnotName)) {\n                    isAdded = true;\n                    break;\n                }\n            }\n            if (!isAdded) {\n                newAnnotation.push(excistingAnnotation);\n            }\n        }\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.renderAnnotationCollections = function (pageAnnotations, pageNumber, isInitialRender) {\n        // eslint-disable-next-line\n        var pageCollections = [];\n        var collection = pageAnnotations.annotationOrder;\n        if (!isNullOrUndefined(collection)) {\n            for (var l = 0; l < collection.length; l++) {\n                var annotation = collection[parseInt(l.toString(), 10)];\n                var type = annotation.AnnotType ? annotation.AnnotType : annotation.AnnotationType;\n                if (this.pdfViewer.dateTimeFormat) {\n                    annotation.ModifiedDate = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(annotation.ModifiedDate);\n                }\n                pageCollections.push(annotation);\n                switch (type) {\n                    case \"textMarkup\":\n                        if (!isNullOrUndefined(this.pdfViewer.annotationModule) && (!isNullOrUndefined(this.pdfViewer.annotationModule.textMarkupAnnotationModule))) {\n                            this.updateCollections(this.pdfViewer.annotationModule.textMarkupAnnotationModule.updateTextMarkupAnnotationCollections(annotation, pageNumber));\n                        }\n                        break;\n                    case \"shape_measure\":\n                        if (!isNullOrUndefined(this.pdfViewer.annotationModule) && (!isNullOrUndefined(this.pdfViewer.annotationModule.measureAnnotationModule))) {\n                            this.updateCollections(this.pdfViewer.annotationModule.measureAnnotationModule.updateMeasureAnnotationCollections(annotation, pageNumber));\n                        }\n                        break;\n                    case \"shape\":\n                        if (!isNullOrUndefined(this.pdfViewer.annotationModule) && (!isNullOrUndefined(this.pdfViewer.annotationModule.shapeAnnotationModule))) {\n                            this.updateCollections(this.pdfViewer.annotationModule.shapeAnnotationModule.updateShapeAnnotationCollections(annotation, pageNumber));\n                        }\n                        break;\n                    case \"sticky\":\n                        this.updateCollections(this.updateStickyNotesAnnotationCollections(annotation, pageNumber));\n                        break;\n                    case \"stamp\":\n                        if (!isNullOrUndefined(this.pdfViewer.annotationModule) && (!isNullOrUndefined(this.pdfViewer.annotationModule.stampAnnotationModule))) {\n                            this.updateCollections(this.pdfViewer.annotationModule.stampAnnotationModule.updateStampAnnotationCollections(annotation, pageNumber));\n                        }\n                        break;\n                    case \"Ink\":\n                        if (!isNullOrUndefined(this.pdfViewer.annotationModule) && (!isNullOrUndefined(this.pdfViewer.annotationModule.inkAnnotationModule))) {\n                            this.updateCollections(this.pdfViewer.annotationModule.inkAnnotationModule.updateInkCollections(annotation, pageNumber));\n                        }\n                        break;\n                    case \"Text Box\":\n                        if (!isNullOrUndefined(this.pdfViewer.annotationModule) && (!isNullOrUndefined(this.pdfViewer.annotationModule.freeTextAnnotationModule))) {\n                            this.updateCollections(this.pdfViewer.annotationModule.freeTextAnnotationModule.updateFreeTextAnnotationCollections(annotation, pageNumber));\n                        }\n                        break;\n                    default:\n                        break;\n                }\n            }\n        }\n        if (pageAnnotations.signatureAnnotation && pageAnnotations.signatureAnnotation.length !== 0) {\n            for (var i = 0; i < pageAnnotations.signatureAnnotation.length; i++) {\n                if (this.pdfViewer.dateTimeFormat) {\n                    // eslint-disable-next-line max-len\n                    pageAnnotations.signatureAnnotation[i].ModifiedDate = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(pageAnnotations.signatureAnnotation[i].ModifiedDate);\n                }\n                // eslint-disable-next-line max-len\n                this.updateCollections(this.pdfViewerBase.signatureModule.updateSignatureCollections(pageAnnotations.signatureAnnotation[i], pageNumber), true);\n            }\n        }\n        if (this.pdfViewer.toolbarModule) {\n            this.renderAnnotationComments(pageCollections, pageNumber);\n        }\n        if (isInitialRender) {\n            for (var i = 0; i < this.pdfViewerBase.renderedPagesList.length; i++) {\n                if (this.pdfViewerBase.renderedPagesList[i] === pageNumber) {\n                    this.pdfViewerBase.renderAnnotations(pageNumber, pageAnnotations, false);\n                }\n            }\n        }\n    };\n    /**\n     * @param annotation\n     * @param isSignature\n     * @param annotation\n     * @param isSignature\n     * @private\n     */\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.updateCollections = function (annotation, isSignature) {\n        var isAdded = false;\n        // eslint-disable-next-line\n        var collections;\n        if (isSignature) {\n            collections = this.pdfViewer.signatureCollection;\n        }\n        else {\n            collections = this.pdfViewer.annotationCollection;\n        }\n        if (collections && annotation) {\n            for (var i = 0; i < collections.length; i++) {\n                if (isSignature) {\n                    if (collections[i].signatureName === annotation.signatureName) {\n                        isAdded = true;\n                        break;\n                    }\n                }\n                else {\n                    if (collections[i].annotationId === annotation.annotationId) {\n                        isAdded = true;\n                        break;\n                    }\n                }\n            }\n        }\n        if (!isAdded && annotation) {\n            if (isSignature) {\n                this.pdfViewer.signatureCollection.push(annotation);\n            }\n            else {\n                this.pdfViewer.annotationCollection.push(annotation);\n            }\n        }\n    };\n    /**\n     * @param data\n     * @param pageIndex\n     * @private\n     */\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.renderAnnotationComments = function (data, pageIndex) {\n        pageIndex = pageIndex + 1;\n        if (data) {\n            if (data.length !== 0) {\n                this.createPageAccordion(pageIndex);\n                for (var i = 0; i < data.length; i++) {\n                    if (data[i].AnnotName && (data[i].AnnotName.split('freeText').length === 1)) {\n                        this.createCommentControlPanel(data[i], pageIndex);\n                    }\n                }\n                // eslint-disable-next-line\n                var newCommentsDiv = document.querySelectorAll('.e-pv-new-comments-div');\n                if (newCommentsDiv) {\n                    for (var j = 0; j < newCommentsDiv.length; j++) {\n                        newCommentsDiv[j].style.display = 'none';\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    StickyNotesAnnotation.prototype.initializeAcccordionContainer = function () {\n        // eslint-disable-next-line max-len\n        var commentPanelText = createElement('div', { id: this.pdfViewer.element.id + '_commentsPanelText', className: 'e-pv-comments-panel-text' });\n        if (isBlazor()) {\n            var promise = this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText', 'PdfViewer_NoCommentsYet');\n            promise.then(function (value) {\n                commentPanelText.textContent = value;\n            });\n        }\n        else {\n            commentPanelText.textContent = this.pdfViewer.localeObj.getConstant('No Comments Yet');\n        }\n        this.updateCommentPanelTextTop();\n        this.pdfViewerBase.navigationPane.commentsContentContainer.appendChild(commentPanelText);\n        // eslint-disable-next-line max-len\n        this.accordionContentContainer = createElement('div', { id: this.pdfViewer.element.id + '_accordionContentContainer', className: 'e-pv-accordion-content-container' });\n        this.pdfViewerBase.navigationPane.commentsContentContainer.appendChild(this.accordionContentContainer);\n        // eslint-disable-next-line max-len\n        this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export Annotations')], false);\n        // eslint-disable-next-line max-len\n        this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export XFDF')], false);\n    };\n    /**\n     * @private\n     */\n    StickyNotesAnnotation.prototype.updateCommentPanelTextTop = function () {\n        var commentPanelText = document.getElementById(this.pdfViewer.element.id + '_commentsPanelText');\n        // eslint-disable-next-line max-len\n        if (this.pdfViewerBase.navigationPane.commentPanelContainer && this.pdfViewerBase.navigationPane.commentPanelContainer.clientHeight && commentPanelText.style.display !== 'none') {\n            commentPanelText.style.paddingTop = (this.pdfViewerBase.navigationPane.commentPanelContainer.clientHeight / 2) - 47 + 'px';\n            commentPanelText.style.paddingLeft = (this.pdfViewerBase.navigationPane.commentPanelContainer.clientWidth) / 3 + 'px';\n        }\n    };\n    /**\n     * @param pageIndex\n     * @private\n     */\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.createPageAccordion = function (pageIndex) {\n        var pageAccordionContainer = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + pageIndex);\n        if (pageAccordionContainer === null) {\n            this.accordionContent = createElement('div', { id: this.pdfViewer.element.id + '_accordioncontent' + pageIndex });\n            this.accordionContent.style.zIndex = '1000';\n            // eslint-disable-next-line max-len\n            this.accordionPageContainer = createElement('div', { id: this.pdfViewer.element.id + '_accordionPageContainer' + pageIndex, className: 'e-pv-accordion-page-container' });\n            this.accordionPageContainer.appendChild(this.accordionContent);\n            this.pdfViewerBase.viewerMainContainer.appendChild(this.accordionPageContainer);\n            // eslint-disable-next-line max-len\n            this.accordionContainer = createElement('div', { id: this.pdfViewer.element.id + '_accordionContainer' + pageIndex, className: 'e-pv-accordion-container' });\n            var pageAccordion = new Accordion({\n                items: [\n                    // eslint-disable-next-line max-len\n                    { header: this.pdfViewer.localeObj.getConstant('Page') + ' ' + (pageIndex), expanded: true, content: '#' + this.pdfViewer.element.id + '_accordioncontent' + pageIndex + '' }\n                ]\n            });\n            pageAccordion.appendTo(this.accordionContainer);\n            this.accordionContainer.style.order = 'pageIndex';\n            this.alignAccordionContainer(this.accordionContainer, pageIndex);\n            if (document.getElementById(this.pdfViewer.element.id + '_commentsPanelText')) {\n                // eslint-disable-next-line max-len\n                this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export Annotations')], true);\n                // eslint-disable-next-line max-len\n                this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export XFDF')], true);\n                document.getElementById(this.pdfViewer.element.id + '_commentsPanelText').style.display = 'none';\n            }\n            if (document.getElementById(this.pdfViewer.element.id + '_accordionContentContainer')) {\n                document.getElementById(this.pdfViewer.element.id + '_accordionContentContainer').style.display = 'block';\n            }\n            return this.accordionContainer;\n        }\n    };\n    StickyNotesAnnotation.prototype.alignAccordionContainer = function (accordionDiv, pageIndex) {\n        var isAdded = true;\n        if (this.accordionContentContainer) {\n            if (this.isAccordionContainer) {\n                this.accordionContentContainer.appendChild(accordionDiv);\n                isAdded = false;\n            }\n            else {\n                for (var i = 1; i <= this.pdfViewerBase.pageCount; i++) {\n                    var nextElement = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + i);\n                    if (nextElement) {\n                        if (pageIndex < i) {\n                            this.accordionContentContainer.insertBefore(accordionDiv, nextElement);\n                            isAdded = false;\n                            break;\n                        }\n                    }\n                }\n            }\n            if (isAdded) {\n                this.accordionContentContainer.appendChild(accordionDiv);\n                isAdded = false;\n            }\n            this.isAccordionContainer = false;\n        }\n    };\n    /**\n     * @param pageNumber\n     * @private\n     */\n    StickyNotesAnnotation.prototype.updateCommentPanelScrollTop = function (pageNumber) {\n        var accordionDiv = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + pageNumber);\n        if (accordionDiv) {\n            var scrollValue = accordionDiv.offsetTop + accordionDiv.clientTop - 35;\n            this.pdfViewerBase.navigationPane.commentsContentContainer.scrollTop = scrollValue;\n        }\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.getButtonState = function (editObj, commentTextBox) {\n        commentTextBox.addEventListener('keyup', function (event) {\n            if (editObj.element.querySelector('.e-btn-save')) {\n                if ((event.srcElement.value !== '' || event.srcElement.defaultValue != '') && event.srcElement.defaultValue !== event.srcElement.value) {\n                    editObj.element.querySelector('.e-btn-save').ej2_instances[0].disabled = false;\n                }\n            }\n        });\n    };\n    /**\n     * @param data\n     * @param pageIndex\n     * @param type\n     * @param annotationSubType\n     * @param data\n     * @param pageIndex\n     * @param type\n     * @param annotationSubType\n     * @param data\n     * @param pageIndex\n     * @param type\n     * @param annotationSubType\n     * @private\n     */\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.createCommentControlPanel = function (data, pageIndex, type, annotationSubType, isReRender) {\n        var accordionContent = document.getElementById(this.pdfViewer.element.id + '_accordioncontent' + pageIndex);\n        if (accordionContent) {\n            // eslint-disable-next-line\n            var accordionExpand = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + pageIndex);\n            if (accordionExpand) {\n                accordionExpand.ej2_instances[0].expandItem(true);\n            }\n            // eslint-disable-next-line max-len\n            this.commentsContainer = createElement('div', { id: this.pdfViewer.element.id + 'commentscontainer_' + pageIndex + '_' + this.commentsCount, className: 'e-pv-comments-container' });\n            this.commentsContainer.accessKey = pageIndex.toString() + '_' + this.commentsCount;\n            var isCommentsAdded = false;\n            if (data) {\n                this.commentsContainer.id = data.AnnotName;\n                if (data.AnnotName) {\n                    for (var j = 0; j < accordionContent.childElementCount; j++) {\n                        if (accordionContent.children[j].id === data.AnnotName) {\n                            isCommentsAdded = true;\n                            if (isReRender) {\n                                // To remove the existing div element in the comment panel while importing the annotation with the same name. (EJ2-62092)\n                                var id = document.getElementById(accordionContent.children[j].id);\n                                id.remove();\n                                isCommentsAdded = false;\n                            }\n                            break;\n                        }\n                    }\n                }\n                if (data.Name && data.Name === 'freeText') {\n                    this.commentsContainer.setAttribute('name', 'freeText');\n                }\n                else {\n                    this.commentsContainer.setAttribute('name', data.AnnotType);\n                }\n            }\n            if (type) {\n                this.commentsContainer.setAttribute('name', type);\n            }\n            this.commentsContainer.addEventListener('mousedown', this.commentsAnnotationSelect.bind(this));\n            // eslint-disable-next-line max-len\n            var commentDiv = createElement('div', { id: this.pdfViewer.element.id + '_commentdiv_' + pageIndex + '_' + this.commentsCount, className: 'e-pv-comments-div' });\n            this.commentsCount = this.commentsCount + 1;\n            this.commentsContainer.appendChild(commentDiv);\n            this.updateCommentPanelScrollTop(pageIndex);\n            if (!isCommentsAdded) {\n                accordionContent.appendChild(this.commentsContainer);\n            }\n            var title = void 0;\n            if (data) {\n                title = this.commentsContainer.getAttribute('name');\n                if (title === 'null') {\n                    title = data.AnnotationType;\n                }\n                this.createTitleContainer(commentDiv, title, pageIndex, data.Subject, data.ModifiedDate, data.Author);\n            }\n            else {\n                title = this.commentsContainer.getAttribute('name');\n                this.createTitleContainer(commentDiv, title, pageIndex, annotationSubType);\n            }\n            // eslint-disable-next-line max-len\n            var commentTextBox = createElement('div', { id: this.pdfViewer.element.id + '_commenttextbox_' + pageIndex + '_' + this.commentsCount, className: 'e-pv-comment-textbox', attrs: { 'role': 'textbox', 'aria-label': \"comment textbox\" } });\n            // eslint-disable-next-line\n            var editObj_1 = new InPlaceEditor({\n                mode: 'Inline',\n                type: 'Text',\n                model: { placeholder: this.pdfViewer.localeObj.getConstant('Add a comment') + '..' },\n                emptyText: '',\n                editableOn: 'EditIconClick',\n                saveButton: {\n                    content: this.pdfViewer.localeObj.getConstant('Post'),\n                    cssClass: 'e-outline',\n                    disabled: true\n                },\n                cancelButton: {\n                    content: this.pdfViewer.localeObj.getConstant('Cancel'),\n                    cssClass: 'e-outline'\n                },\n                submitOnEnter: true\n            });\n            if (data && (!isNullOrUndefined(data.Note) || !isNullOrUndefined(data.Text))) {\n                editObj_1.created = function () {\n                    setTimeout(function () {\n                        editObj_1.element.querySelector('.e-editable-value').innerText = !isNullOrUndefined(data.Note) ? data.Note : !isNullOrUndefined(data.Text) ? data.Text : '';\n                    });\n                };\n                editObj_1.beginEdit = function () {\n                    editObj_1.value = editObj_1.valueEle.innerText;\n                };\n            }\n            editObj_1.appendTo(commentTextBox);\n            // eslint-disable-next-line\n            var textBox = document.querySelectorAll('.e-editable-inline');\n            for (var j = 0; j < textBox.length; j++) {\n                textBox[j].style.display = 'none';\n            }\n            if (!data && type !== 'freeText') {\n                editObj_1.enableEditMode = true;\n            }\n            this.getButtonState(editObj_1, commentTextBox);\n            editObj_1.actionSuccess = this.createCommentDiv.bind(this, editObj_1);\n            commentDiv.appendChild(commentTextBox);\n            if (data) {\n                editObj_1.value = !isNullOrUndefined(data.Note) ? data.Note : !isNullOrUndefined(data.Text) ? data.Text : '';\n                var isCommentLocked = this.checkIslockProperty(data);\n                if (isCommentLocked && data.Comments == null) {\n                    this.createCommentDiv(this.commentsContainer);\n                }\n                if (data.Name === 'freeText') {\n                    editObj_1.value = data.MarkupText;\n                }\n                if (data.State) {\n                    // eslint-disable-next-line max-len\n                    var statusContainer = createElement('div', { id: this.pdfViewer.element.id + 'status' + '_container', className: 'e-pv-status-container' });\n                    // eslint-disable-next-line max-len\n                    var statusDiv = createElement('div', { id: this.pdfViewer.element.id + 'status' + '_div', className: 'e-pv-status-div' });\n                    var statusSpan = createElement('span', { id: this.pdfViewer.element.id + 'status' + '_icon' });\n                    statusDiv.appendChild(statusSpan);\n                    statusContainer.appendChild(statusDiv);\n                    commentDiv.appendChild(statusContainer);\n                    this.updateStatusContainer(data.State, statusSpan, statusDiv, statusContainer);\n                }\n                if (data.Comments) {\n                    for (var j = 0; j < data.Comments.length; j++) {\n                        this.renderComments(data.Comments[j], this.commentsContainer);\n                    }\n                    if (data.Note !== ' ' && data.Note !== '' && data.Note !== null) {\n                        this.createCommentDiv(this.commentsContainer);\n                    }\n                    if (data.AnnotType === \"Text Box\" && data.Text !== ' ' && data.Text !== '' && data.Text !== null) {\n                        this.createCommentDiv(this.commentsContainer);\n                    }\n                }\n            }\n            this.isNewcommentAdded = true;\n            commentDiv.addEventListener('click', this.commentsDivClickEvent.bind(this));\n            commentDiv.addEventListener('mouseover', this.commentDivMouseOver.bind(this));\n            commentDiv.addEventListener('mouseleave', this.commentDivMouseLeave.bind(this));\n            commentDiv.addEventListener('mouseout', this.commentDivMouseLeave.bind(this));\n            commentDiv.addEventListener('focusout', this.commentDivMouseLeave.bind(this));\n            commentTextBox.addEventListener('dblclick', this.openEditorElement.bind(this));\n            commentTextBox.addEventListener('focusin', this.commentDivFocus.bind(this));\n            return (this.commentsContainer.id);\n        }\n        return '';\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.commentDivFocus = function (args) {\n        if (isNullOrUndefined(this.pdfViewer.freeTextSettings.defaultText)) {\n            this.pdfViewer.freeTextSettings.defaultText = \"Type here\";\n        }\n        // eslint-disable-next-line\n        if (!isNullOrUndefined(args.target) && !isNullOrUndefined(this.pdfViewer.freeTextSettings.defaultText) && this.pdfViewer.selectedItems && this.pdfViewer.selectedItems.annotations[0] && this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'FreeText' && args.target.value === this.pdfViewer.freeTextSettings.defaultText) {\n            args.target.select();\n        }\n        // eslint-disable-next-line\n        if (!this.isNewcommentAdded) {\n            if (args.relatedTarget !== null && args.relatedTarget.id === this.pdfViewer.element.id + '_viewerContainer') {\n                args.preventDefault();\n                args.target.blur();\n            }\n        }\n        else {\n            var proxy_1 = this;\n            var pageNumber_1 = this.pdfViewerBase.currentPageNumber;\n            setTimeout(function () {\n                proxy_1.updateScrollPosition(pageNumber_1);\n            }, 500);\n        }\n    };\n    StickyNotesAnnotation.prototype.updateScrollPosition = function (pageNumber) {\n        var accordionDiv = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + pageNumber);\n        if (accordionDiv && this.isNewcommentAdded) {\n            var commentHeight = 0;\n            // eslint-disable-next-line\n            var textBox = document.querySelectorAll('.e-editable-inline');\n            if (textBox[0]) {\n                commentHeight = textBox[0].getBoundingClientRect().height;\n            }\n            var scrollValue = accordionDiv.offsetTop + accordionDiv.clientTop + commentHeight;\n            if (this.pdfViewerBase.navigationPane.commentsContentContainer.scrollTop < scrollValue) {\n                this.pdfViewerBase.navigationPane.commentsContentContainer.scrollTop = scrollValue;\n            }\n            this.isNewcommentAdded = false;\n        }\n    };\n    StickyNotesAnnotation.prototype.updateCommentsScrollTop = function (isCommentsAdded) {\n        // eslint-disable-next-line max-len\n        var accordionDiv = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + this.pdfViewerBase.currentPageNumber);\n        // eslint-disable-next-line\n        var commentsContainer = document.querySelector('.e-pv-comments-border');\n        var commentsHeight = 0;\n        if (accordionDiv && commentsContainer) {\n            commentsHeight = commentsContainer.getBoundingClientRect().height;\n            var scrollValue = void 0;\n            if (isCommentsAdded) {\n                scrollValue = accordionDiv.offsetTop + commentsContainer.offsetTop + (commentsHeight / 4);\n            }\n            else {\n                scrollValue = accordionDiv.offsetTop + commentsContainer.offsetTop - 70;\n            }\n            this.pdfViewerBase.navigationPane.commentsContentContainer.scrollTop = scrollValue;\n        }\n    };\n    /**\n     * @param args\n     * @private\n     */\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.createCommentDiv = function (args) {\n        var _this = this;\n        var commentsContainer;\n        var titleContainer;\n        // eslint-disable-next-line\n        var newCommentDiv = createElement('div', { id: this.pdfViewer.element.id + '_newcommentdiv_' + this.commentsCount + '_' + this.commentsreplyCount, className: 'e-pv-new-comments-div' });\n        if (args.localName) {\n            commentsContainer = args;\n        }\n        else {\n            commentsContainer = args.valueEle.parentElement.parentElement.parentElement.parentElement;\n            titleContainer = args.valueEle.parentElement.parentElement.previousSibling.childNodes[1];\n        }\n        // eslint-disable-next-line\n        var commentObj = new InPlaceEditor({\n            mode: 'Inline',\n            type: 'Text',\n            value: '',\n            editableOn: 'Click',\n            model: { placeholder: this.pdfViewer.localeObj.getConstant('Add a reply') + '..' },\n            emptyText: this.pdfViewer.localeObj.getConstant('Add a reply'),\n            saveButton: {\n                content: this.pdfViewer.localeObj.getConstant('Post'),\n                cssClass: 'e-outline',\n                disabled: true\n            },\n            cancelButton: {\n                content: this.pdfViewer.localeObj.getConstant('Cancel'),\n                cssClass: 'e-outline'\n            },\n            submitOnEnter: true\n        });\n        commentObj.appendTo(newCommentDiv);\n        newCommentDiv.lastChild.firstChild.click();\n        // eslint-disable-next-line\n        this.getButtonState(commentObj, newCommentDiv);\n        if (args.valueEle) {\n            if (args.value != null && args.value !== \"\") {\n                // eslint-disable-next-line max-len\n                if (this.pdfViewer.selectedItems.annotations[0] && this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'FreeText') {\n                    this.modifyTextProperty(args.value, args.prevValue, args.valueEle.parentNode.parentNode.parentNode.parentNode.id);\n                }\n                else {\n                    try {\n                        this.modifyTextProperty(args.value, args.prevValue, args.valueEle.parentNode.parentNode.parentNode.parentNode.id);\n                    }\n                    catch (error) {\n                        this.modifyTextProperty(args.value, args.prevValue);\n                    }\n                }\n                if (args.prevValue != args.value) {\n                    this.updateModifiedDate(titleContainer);\n                }\n            }\n            if (args.valueEle.parentElement.parentElement.parentElement.parentElement.childElementCount === 1) {\n                if (args.value != null && args.value !== \"\") {\n                    commentsContainer.appendChild(newCommentDiv);\n                    setTimeout(function () {\n                        _this.updateCommentsScrollTop(true);\n                    }, 50);\n                }\n            }\n        }\n        else {\n            commentsContainer.appendChild(newCommentDiv);\n            setTimeout(function () {\n                _this.updateCommentsScrollTop(true);\n            }, 50);\n        }\n        commentObj.actionSuccess = this.saveCommentDiv.bind(this, commentObj);\n    };\n    /**\n     * @param args\n     * @param comment\n     * @private\n     */\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.saveCommentDiv = function (args, comment) {\n        var commentsContainer;\n        var annotationAuthor;\n        // eslint-disable-next-line\n        var lastElement;\n        var commentValue;\n        if (comment.name && args.value !== '') {\n            commentsContainer = args.valueEle.parentElement.parentElement.parentElement;\n            lastElement = args.valueEle.parentElement.parentElement;\n            commentValue = args.value;\n        }\n        else {\n            commentsContainer = args;\n            lastElement = commentsContainer.lastChild;\n            commentValue = comment;\n        }\n        if (commentsContainer && lastElement) {\n            commentsContainer.removeChild(lastElement);\n            var replyTextBox = createElement('div', { id: this.pdfViewer.element.id + '_replytextbox_' + this.commentsCount + '_' + this.commentsreplyCount });\n            this.commentsreplyCount = this.commentsreplyCount + 1;\n            // eslint-disable-next-line\n            var replyCommentDiv = createElement('div', { id: this.pdfViewer.element.id + 'replyDiv_' + this.commentsCount + '_' + this.commentsreplyCount, className: 'e-pv-reply-div' });\n            replyCommentDiv.id = this.pdfViewer.annotation.createGUID();\n            annotationAuthor = this.getAuthorName(this.pdfViewer.selectedItems.annotations[0], commentsContainer);\n            this.createReplyDivTitleContainer(replyCommentDiv, null, annotationAuthor);\n            replyCommentDiv.addEventListener('mouseover', this.commentDivMouseOver.bind(this));\n            replyCommentDiv.addEventListener('mouseleave', this.commentDivMouseLeave.bind(this));\n            replyCommentDiv.addEventListener('click', this.commentDivOnSelect.bind(this));\n            replyTextBox.addEventListener('dblclick', this.openEditorElement.bind(this));\n            replyCommentDiv.style.border = 1 + 'px';\n            replyCommentDiv.style.borderColor = 'black';\n            replyCommentDiv.style.zIndex = 1002;\n            // eslint-disable-next-line\n            var saveObj_1 = new InPlaceEditor({\n                mode: 'Inline',\n                type: 'Text',\n                emptyText: '',\n                editableOn: 'EditIconClick',\n                model: { placeholder: this.pdfViewer.localeObj.getConstant('Add a reply') + '..' },\n                value: commentValue,\n                saveButton: {\n                    content: this.pdfViewer.localeObj.getConstant('Post'),\n                    cssClass: 'e-outline',\n                    disabled: true\n                },\n                cancelButton: {\n                    content: this.pdfViewer.localeObj.getConstant('Cancel'),\n                    cssClass: 'e-outline'\n                }\n            });\n            saveObj_1.created = function () {\n                setTimeout(function () {\n                    saveObj_1.element.querySelector('.e-editable-value').innerText = commentValue;\n                });\n            };\n            saveObj_1.beginEdit = function () {\n                saveObj_1.value = saveObj_1.valueEle.innerText;\n            };\n            saveObj_1.appendTo(replyTextBox);\n            saveObj_1.actionSuccess = this.modifyProperty.bind(this, saveObj_1);\n            replyCommentDiv.appendChild(replyTextBox);\n            replyCommentDiv.style.paddingLeft = 24 + 'px';\n            commentsContainer.appendChild(replyCommentDiv);\n            // eslint-disable-next-line\n            this.getButtonState(saveObj_1, replyTextBox);\n            replyCommentDiv.addEventListener('click', this.commentsDivClickEvent.bind(this));\n            replyCommentDiv.addEventListener('dblclick', this.commentsDivDoubleClickEvent.bind(this));\n            this.createCommentDiv(replyCommentDiv.parentElement);\n            this.modifyCommentsProperty(commentValue, replyCommentDiv.id, commentsContainer.id);\n        }\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.renderComments = function (data, commentDiv, undoRedoAction, id, isCommentAction) {\n        var annotationAuthor;\n        var replyTextBox = createElement('div', { id: this.pdfViewer.element.id + '_replytextbox_' + this.commentsCount + '_' + this.commentsreplyCount });\n        this.commentsreplyCount = this.commentsreplyCount + 1;\n        var replyDiv = createElement('div', { id: 'replyDiv_' + this.commentsCount + '_' + this.commentsreplyCount, className: 'e-pv-reply-div' });\n        if (undoRedoAction) {\n            replyDiv.id = data.annotName;\n            annotationAuthor = data.author;\n        }\n        else {\n            replyDiv.id = data.AnnotName;\n            annotationAuthor = data.Author;\n        }\n        replyDiv.style.border = 1 + 'px';\n        replyDiv.style.borderColor = 'black';\n        if (!annotationAuthor) {\n            annotationAuthor = commentDiv.getAttribute('author');\n        }\n        if (undoRedoAction) {\n            if (data.modifiedDate !== undefined) {\n                this.createReplyDivTitleContainer(replyDiv, data.modifiedDate, annotationAuthor);\n            }\n            else {\n                this.createReplyDivTitleContainer(replyDiv, null, annotationAuthor);\n            }\n        }\n        else {\n            this.createReplyDivTitleContainer(replyDiv, data.ModifiedDate, annotationAuthor);\n        }\n        replyDiv.addEventListener('mouseover', this.commentDivMouseOver.bind(this));\n        replyDiv.addEventListener('mouseleave', this.commentDivMouseLeave.bind(this));\n        replyDiv.addEventListener('click', this.commentDivOnSelect.bind(this));\n        replyTextBox.addEventListener('dblclick', this.openEditorElement.bind(this));\n        // eslint-disable-next-line\n        var saveObj = new InPlaceEditor({\n            mode: 'Inline',\n            type: 'Text',\n            emptyText: '',\n            editableOn: 'EditIconClick',\n            model: { placeholder: this.pdfViewer.localeObj.getConstant('Add a reply') + '..' },\n            value: '',\n            saveButton: {\n                content: this.pdfViewer.localeObj.getConstant('Post'),\n                cssClass: 'e-outline',\n                disabled: true\n            },\n            cancelButton: {\n                content: this.pdfViewer.localeObj.getConstant('Cancel'),\n                cssClass: 'e-outline'\n            }\n        });\n        if (undoRedoAction) {\n            saveObj.value = data.note;\n        }\n        else {\n            saveObj.value = data.Note;\n        }\n        saveObj.created = function () {\n            setTimeout(function () {\n                saveObj.element.querySelector('.e-editable-value').innerText = undoRedoAction ? data ? data.note : '' : data ? data.Note : '';\n            });\n        };\n        saveObj.beginEdit = function () {\n            saveObj.value = saveObj.valueEle.innerText;\n        };\n        saveObj.appendTo(replyTextBox);\n        replyDiv.appendChild(replyTextBox);\n        if (undoRedoAction) {\n            data.State = data.state;\n        }\n        if (data.State) {\n            // eslint-disable-next-line max-len\n            var statusContainer = createElement('div', { id: this.pdfViewer.element.id + 'status' + '_container', className: 'e-pv-status-container' });\n            // eslint-disable-next-line max-len\n            var statusDiv = createElement('div', { id: this.pdfViewer.element.id + 'status' + '_div', className: 'e-pv-status-div' });\n            var statusSpan = createElement('span', { id: this.pdfViewer.element.id + 'status' + '_icon' });\n            statusDiv.appendChild(statusSpan);\n            statusContainer.appendChild(statusDiv);\n            replyDiv.appendChild(statusContainer);\n            this.updateStatusContainer(data.State, statusSpan, statusDiv, statusContainer);\n        }\n        replyDiv.style.paddingLeft = 24 + 'px';\n        // eslint-disable-next-line\n        this.getButtonState(saveObj, replyTextBox);\n        if (undoRedoAction) {\n            if (isCommentAction) {\n                commentDiv.appendChild(replyDiv);\n            }\n            else {\n                // eslint-disable-next-line\n                var commentsDiv = document.getElementById(id);\n                if (data.position) {\n                    commentsDiv.insertBefore(replyDiv, commentsDiv.childNodes[data.position]);\n                }\n                else {\n                    // eslint-disable-next-line\n                    if (commentsDiv) {\n                        if (commentsDiv.childElementCount > 1) {\n                            commentsDiv.insertBefore(replyDiv, commentsDiv.childNodes[commentsDiv.childElementCount - 1]);\n                        }\n                        else {\n                            commentDiv.appendChild(replyDiv);\n                        }\n                    }\n                }\n            }\n        }\n        else {\n            commentDiv.appendChild(replyDiv);\n        }\n        replyDiv.addEventListener('click', this.commentsDivClickEvent.bind(this));\n        replyDiv.addEventListener('dblclick', this.commentsDivDoubleClickEvent.bind(this));\n        saveObj.actionSuccess = this.modifyProperty.bind(this, saveObj);\n    };\n    /**\n     * @param data\n     * @param pageIndex\n     * @param isCopy\n     * @param data\n     * @param pageIndex\n     * @param isCopy\n     * @private\n     */\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.createCommentsContainer = function (data, pageIndex, isCopy) {\n        // eslint-disable-next-line\n        var accordionContentContainer = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + pageIndex);\n        if (!accordionContentContainer) {\n            // eslint-disable-next-line max-len\n            var accordionPageContainer = document.getElementById(this.pdfViewer.element.id + '_accordionPageContainer' + pageIndex);\n            if (accordionPageContainer) {\n                accordionPageContainer.parentElement.removeChild(accordionPageContainer);\n            }\n            accordionContentContainer = this.createPageAccordion(pageIndex);\n            if (accordionContentContainer) {\n                accordionContentContainer.ej2_instances[0].expandItem(true);\n            }\n        }\n        var accordionContent = document.getElementById(this.pdfViewer.element.id + '_accordioncontent' + pageIndex);\n        // eslint-disable-next-line max-len\n        this.commentsContainer = createElement('div', { id: this.pdfViewer.element.id + 'commentscontainer_' + pageIndex + '_' + this.commentsCount, className: 'e-pv-comments-container' });\n        this.commentsContainer.accessKey = pageIndex.toString() + '_' + this.commentsCount;\n        if (data) {\n            this.commentsContainer.id = data.annotName ? data.annotName : data.annotationId;\n        }\n        this.commentsContainer.addEventListener('mousedown', this.commentsAnnotationSelect.bind(this));\n        // eslint-disable-next-line max-len\n        var commentDiv = createElement('div', { id: this.pdfViewer.element.id + '_commentdiv_' + pageIndex + '_' + this.commentsCount, className: 'e-pv-comments-div' });\n        this.commentsCount = this.commentsCount + 1;\n        this.commentsContainer.appendChild(commentDiv);\n        this.updateCommentPanelScrollTop(pageIndex);\n        if (data && accordionContent) {\n            if (data.position || data.position === 0) {\n                accordionContent.insertBefore(this.commentsContainer, accordionContent.children[data.position]);\n            }\n            else {\n                accordionContent.appendChild(this.commentsContainer);\n            }\n        }\n        if (data && accordionContent) {\n            if (data.indent) {\n                this.commentsContainer.setAttribute('name', 'shape_measure');\n                this.createTitleContainer(commentDiv, 'shape_measure', pageIndex, data.subject, data.modifiedDate, data.author);\n            }\n            else if (data.shapeAnnotationType === 'sticky' || data.shapeAnnotationType === 'stamp') {\n                // eslint-disable-next-line max-len\n                var annotType = this.createTitleContainer(commentDiv, data.shapeAnnotationType, pageIndex, null, data.modifiedDate, data.author);\n                this.commentsContainer.setAttribute('name', annotType);\n                if (annotType === 'sticky') {\n                    if (!isCopy) {\n                        this.addStickyNotesAnnotations((pageIndex - 1), data);\n                    }\n                }\n            }\n            else if (data.shapeAnnotationType === 'textMarkup') {\n                this.commentsContainer.setAttribute('name', 'textMarkup');\n                this.createTitleContainer(commentDiv, 'textMarkup', pageIndex, data.subject, data.modifiedDate, data.author);\n            }\n            else if (data.shapeAnnotationType === 'FreeText') {\n                data.note = data.dynamicText;\n                this.commentsContainer.setAttribute('name', 'freetext');\n                this.createTitleContainer(commentDiv, 'freeText', pageIndex, data.subject, data.modifiedDate);\n            }\n            else if (data.shapeAnnotationType === 'Ink') {\n                data.note = data.dynamicText;\n                this.commentsContainer.setAttribute('name', 'ink');\n                this.createTitleContainer(commentDiv, 'ink', pageIndex, data.subject, data.modifiedDate);\n            }\n            else {\n                this.commentsContainer.setAttribute('name', 'shape');\n                if (data.shapeAnnotationType === 'Line') {\n                    this.createTitleContainer(commentDiv, 'shape', pageIndex, data.subject, data.modifiedDate, data.author);\n                }\n                else {\n                    this.createTitleContainer(commentDiv, 'shape', pageIndex, data.shapeAnnotationType, data.modifiedDate, data.author);\n                }\n            }\n        }\n        // eslint-disable-next-line max-len\n        var commentTextBox = createElement('div', { id: this.pdfViewer.element.id + '_commenttextbox_' + pageIndex + '_' + this.commentsCount, className: 'e-pv-comment-textbox', attrs: { 'role': 'textbox', 'aria-label': \"comment textbox\" } });\n        // eslint-disable-next-line\n        var editObj = new InPlaceEditor({\n            mode: 'Inline',\n            type: 'Text',\n            model: { placeholder: this.pdfViewer.localeObj.getConstant('Add a comment') + '..' },\n            emptyText: '',\n            editableOn: 'EditIconClick',\n            saveButton: {\n                content: this.pdfViewer.localeObj.getConstant('Post'),\n                cssClass: 'e-outline',\n                disabled: true\n            },\n            cancelButton: {\n                content: this.pdfViewer.localeObj.getConstant('Cancel'),\n                cssClass: 'e-outline'\n            },\n            submitOnEnter: true\n        });\n        editObj.appendTo(commentTextBox);\n        // eslint-disable-next-line\n        var textBox = document.querySelectorAll('.e-editable-inline');\n        for (var j = 0; j < textBox.length; j++) {\n            textBox[j].style.display = 'none';\n        }\n        // eslint-disable-next-line\n        commentTextBox.addEventListener('keydown', function (event) {\n            if (editObj.element.querySelector('.e-btn-save')) {\n                if (event.srcElement.value !== '') {\n                    editObj.element.querySelector('.e-btn-save').ej2_instances[0].disabled = false;\n                }\n                else {\n                    editObj.element.querySelector('.e-btn-save').ej2_instances[0].disabled = true;\n                }\n            }\n        });\n        editObj.actionSuccess = this.createCommentDiv.bind(this, editObj);\n        commentDiv.appendChild(commentTextBox);\n        if (data) {\n            editObj.value = data.note;\n            if (data.state) {\n                // eslint-disable-next-line max-len\n                var statusContainer = createElement('div', { id: this.pdfViewer.element.id + 'status' + '_container', className: 'e-pv-status-container' });\n                // eslint-disable-next-line max-len\n                var statusDiv = createElement('div', { id: this.pdfViewer.element.id + 'status' + '_div', className: 'e-pv-status-div' });\n                var statusSpan = createElement('span', { id: this.pdfViewer.element.id + 'status' + '_icon' });\n                statusDiv.appendChild(statusSpan);\n                statusContainer.appendChild(statusDiv);\n                commentDiv.appendChild(statusContainer);\n                this.updateStatusContainer(data.state, statusSpan, statusDiv, statusContainer);\n            }\n            if (data.comments) {\n                for (var j = 0; j < data.comments.length; j++) {\n                    this.renderComments(data.comments[j], this.commentsContainer, true, null, true);\n                }\n                if (data.comments.length > 0) {\n                    this.createCommentDiv(this.commentsContainer);\n                }\n            }\n        }\n        commentDiv.addEventListener('click', this.commentsDivClickEvent.bind(this));\n        commentDiv.addEventListener('mouseover', this.commentDivMouseOver.bind(this));\n        commentDiv.addEventListener('mouseleave', this.commentDivMouseLeave.bind(this));\n        commentDiv.addEventListener('mouseout', this.commentDivMouseLeave.bind(this));\n        commentDiv.addEventListener('focusout', this.commentDivMouseLeave.bind(this));\n        commentTextBox.addEventListener('dblclick', this.openEditorElement.bind(this));\n        return (this.commentsContainer.id);\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.modifyProperty = function (args) {\n        var commentElement = args.element.parentElement.id;\n        var parentElement = args.element.parentElement.parentElement.id;\n        var titleElement = args.element.previousSibling.firstChild;\n        this.updateModifiedDate(titleElement);\n        this.modifyCommentsProperty(args.value, commentElement, parentElement, args.prevValue);\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.createTitleContainer = function (commentsDivElement, type, pageIndex, subType, modifiedDate, author, note) {\n        var annotationType = this.getAnnotationType(type);\n        // eslint-disable-next-line max-len\n        var commentTitleContainer = createElement('div', { id: this.pdfViewer.element.id + '_commentTitleConatiner_' + pageIndex + '_' + this.commentsCount, className: 'e-pv-comment-title-container' });\n        // eslint-disable-next-line max-len\n        var commentTypeSpan = createElement('span', { id: this.pdfViewer.element.id + '_commenttype' + '_icon' + pageIndex + '_' + this.commentsCount });\n        commentTypeSpan.style.opacity = '0.6';\n        this.updateCommentIcon(commentTypeSpan, annotationType, subType);\n        var annotationAuthor;\n        if (!author) {\n            annotationAuthor = this.pdfViewer.annotationModule.updateAnnotationAuthor(annotationType, subType);\n        }\n        else {\n            annotationAuthor = author;\n        }\n        commentTypeSpan.style.padding = 8 + 'px';\n        commentTypeSpan.style.cssFloat = 'left';\n        commentTitleContainer.appendChild(commentTypeSpan);\n        // eslint-disable-next-line max-len\n        var commentsTitle = createElement('div', { id: this.pdfViewer.element.id + '_commentTitle_' + pageIndex + '_' + this.commentsCount, className: 'e-pv-comment-title' });\n        if (!modifiedDate) {\n            commentsTitle.textContent = annotationAuthor + ' - ' + this.setModifiedDate();\n        }\n        else {\n            commentsTitle.textContent = annotationAuthor + ' - ' + this.convertUTCDateToLocalDate(modifiedDate);\n        }\n        commentTitleContainer.appendChild(commentsTitle);\n        this.moreButtonId = this.pdfViewer.element.id + '_more-options_' + this.commentsCount + '_' + this.commentsreplyCount;\n        // eslint-disable-next-line max-len\n        var moreOptionsButton = createElement('button', { id: this.moreButtonId, className: 'e-pv-more-options-button e-btn', attrs: { 'tabindex': '-1' } });\n        moreOptionsButton.style.visibility = 'hidden';\n        moreOptionsButton.style.zIndex = '1001';\n        moreOptionsButton.setAttribute('type', 'button');\n        moreOptionsButton.setAttribute('aria-label', 'more button');\n        // eslint-disable-next-line max-len\n        var moreOptionsButtonSpan = createElement('span', { id: this.pdfViewer.element.id + '_more-options_icon', className: 'e-pv-more-icon e-pv-icon' });\n        moreOptionsButton.appendChild(moreOptionsButtonSpan);\n        moreOptionsButtonSpan.style.opacity = '0.87';\n        commentTitleContainer.appendChild(moreOptionsButton);\n        commentsDivElement.appendChild(commentTitleContainer);\n        // eslint-disable-next-line\n        var commentsContainer = commentsDivElement.parentElement;\n        if (commentsContainer) {\n            var author_1 = this.pdfViewer.annotationModule.updateAnnotationAuthor(annotationType, subType);\n            commentsContainer.setAttribute('author', author_1);\n        }\n        if (!this.isCreateContextMenu) {\n            this.createCommentContextMenu();\n        }\n        this.isCreateContextMenu = true;\n        commentTitleContainer.addEventListener('dblclick', this.openTextEditor.bind(this));\n        moreOptionsButton.addEventListener('mouseup', this.moreOptionsClick.bind(this));\n        return annotationType;\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.createReplyDivTitleContainer = function (commentsDivElement, modifiedDate, annotationAuthor) {\n        // eslint-disable-next-line max-len\n        var replyTitleContainer = createElement('div', { id: this.pdfViewer.element.id + '_replyTitleConatiner_' + this.commentsCount + '_' + this.commentsreplyCount, className: 'e-pv-reply-title-container' });\n        // eslint-disable-next-line max-len\n        var replyTitle = createElement('div', { id: this.pdfViewer.element.id + '_replyTitle_' + this.commentsCount + '_' + this.commentsreplyCount, className: 'e-pv-reply-title' });\n        if (!modifiedDate) {\n            replyTitle.textContent = annotationAuthor + ' - ' + this.setModifiedDate();\n        }\n        else {\n            replyTitle.textContent = annotationAuthor + ' - ' + this.setExistingAnnotationModifiedDate(modifiedDate);\n        }\n        replyTitleContainer.appendChild(replyTitle);\n        this.moreButtonId = this.pdfViewer.element.id + '_more-options_' + this.commentsCount + '_' + this.commentsreplyCount;\n        // eslint-disable-next-line max-len\n        var moreButton = createElement('button', { id: this.moreButtonId, className: 'e-pv-more-options-button e-btn', attrs: { 'tabindex': '-1' } });\n        moreButton.style.visibility = 'hidden';\n        moreButton.style.zIndex = '1001';\n        moreButton.setAttribute('type', 'button');\n        moreButton.setAttribute('aria-label', 'more button');\n        // eslint-disable-next-line max-len\n        var moreButtonSpan = createElement('span', { id: this.pdfViewer.element.id + '_more-options_icon', className: 'e-pv-more-icon e-pv-icon' });\n        moreButton.appendChild(moreButtonSpan);\n        moreButtonSpan.style.opacity = '0.87';\n        replyTitleContainer.appendChild(moreButton);\n        commentsDivElement.appendChild(replyTitleContainer);\n        replyTitleContainer.addEventListener('dblclick', this.openTextEditor.bind(this));\n        moreButton.addEventListener('mouseup', this.moreOptionsClick.bind(this));\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.updateCommentIcon = function (commentSpan, annotationType, annotationSubType) {\n        if (annotationType === 'sticky') {\n            commentSpan.className = 'e-pv-comment-icon e-pv-icon';\n        }\n        else if (annotationType === 'stamp') {\n            commentSpan.className = 'e-pv-stamp-icon e-pv-icon';\n        }\n        else if (annotationType === 'shape') {\n            if (annotationSubType === 'Line') {\n                commentSpan.className = 'e-pv-shape-line-icon e-pv-icon';\n            }\n            else if (annotationSubType === 'LineWidthArrowHead' || annotationSubType === 'Arrow') {\n                commentSpan.className = 'e-pv-shape-arrow-icon e-pv-icon';\n            }\n            else if (annotationSubType === 'Circle' || annotationSubType === 'Ellipse' || annotationSubType === 'Oval') {\n                commentSpan.className = 'e-pv-shape-circle-icon e-pv-icon';\n            }\n            else if (annotationSubType === 'Rectangle' || annotationSubType === 'Square') {\n                commentSpan.className = 'e-pv-shape-rectangle-icon e-pv-icon';\n            }\n            else if (annotationSubType === 'Polygon') {\n                commentSpan.className = 'e-pv-shape-pentagon-icon e-pv-icon';\n            }\n            else {\n                commentSpan.className = 'e-pv-annotation-shape-icon e-pv-icon';\n            }\n        }\n        else if (annotationType === 'measure') {\n            if (annotationSubType === 'Distance' || annotationSubType === 'Distance calculation') {\n                commentSpan.className = 'e-pv-calibrate-distance-icon e-pv-icon';\n            }\n            else if (annotationSubType === 'Perimeter' || annotationSubType === 'Perimeter calculation') {\n                commentSpan.className = 'e-pv-calibrate-perimeter-icon e-pv-icon';\n            }\n            else if (annotationSubType === 'Radius' || annotationSubType === 'Radius calculation') {\n                commentSpan.className = 'e-pv-calibrate-radius-icon e-pv-icon';\n            }\n            else if (annotationSubType === 'Area' || annotationSubType === 'Area calculation') {\n                commentSpan.className = 'e-pv-calibrate-area-icon e-pv-icon';\n            }\n            else if (annotationSubType === 'Volume' || annotationSubType === 'Volume calculation') {\n                commentSpan.className = 'e-pv-calibrate-volume-icon e-pv-icon';\n            }\n            else {\n                commentSpan.className = 'e-pv-annotation-calibrate-icon e-pv-icon';\n            }\n        }\n        else if (annotationType === 'textMarkup') {\n            if (annotationSubType === 'Highlight') {\n                commentSpan.className = 'e-pv-highlight-icon e-pv-icon';\n            }\n            else if (annotationSubType === 'Underline') {\n                commentSpan.className = 'e-pv-underline-icon e-pv-icon';\n            }\n            else if (annotationSubType === 'Strikethrough') {\n                commentSpan.className = 'e-pv-strikethrough-icon e-pv-icon';\n            }\n            else {\n                commentSpan.className = 'e-pv-annotation-icon e-pv-icon';\n            }\n        }\n        else if (annotationType === 'freeText') {\n            commentSpan.className = 'e-pv-freetext-icon e-pv-icon';\n        }\n        else if (annotationType === 'ink' || annotationSubType === 'Ink') {\n            commentSpan.className = 'e-pv-inkannotation-icon e-pv-icon';\n        }\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.updateStatusContainer = function (state, statusSpan, statusDiv, statusContainer) {\n        if (state === 'Accepted') {\n            statusDiv.style.backgroundColor = 'rgb(24,169,85)';\n            statusSpan.className = 'e-pv-accepted-icon';\n        }\n        else if (state === 'Completed') {\n            statusDiv.style.backgroundColor = 'rgb(0,122,255)';\n            statusSpan.className = 'e-pv-completed-icon';\n        }\n        else if (state === 'Cancelled') {\n            statusDiv.style.backgroundColor = 'rgb(245,103,0)';\n            statusSpan.className = 'e-pv-cancelled-icon';\n        }\n        else if (state === 'Rejected') {\n            statusDiv.style.backgroundColor = 'rgb(255,59,48)';\n            statusSpan.className = 'e-pv-rejected-icon';\n        }\n        else {\n            statusSpan.className = '';\n            statusContainer.parentElement.removeChild(statusContainer);\n        }\n    };\n    /**\n     * @param removeDiv\n     * @private\n     */\n    StickyNotesAnnotation.prototype.updateAccordionContainer = function (removeDiv) {\n        // eslint-disable-next-line\n        var pageNumber = parseInt(removeDiv.accessKey.split('_')[0]);\n        var accordionContent = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + pageNumber);\n        if (accordionContent) {\n            accordionContent.parentElement.removeChild(accordionContent);\n        }\n        var accordionContentContainer = document.getElementById(this.pdfViewer.element.id + '_accordionContentContainer');\n        if (accordionContentContainer) {\n            if (accordionContentContainer.childElementCount === 0) {\n                accordionContentContainer.style.display = 'none';\n                if (document.getElementById(this.pdfViewer.element.id + '_commentsPanelText')) {\n                    // eslint-disable-next-line max-len\n                    this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export Annotations')], false);\n                    // eslint-disable-next-line max-len\n                    this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export XFDF')], false);\n                    document.getElementById(this.pdfViewer.element.id + '_commentsPanelText').style.display = 'block';\n                    this.updateCommentPanelTextTop();\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    StickyNotesAnnotation.prototype.createCommentContextMenu = function () {\n        // eslint-disable-next-line max-len\n        this.commentContextMenu = [\n            { text: this.pdfViewer.localeObj.getConstant('Edit') },\n            { text: this.pdfViewer.localeObj.getConstant('Delete Context') },\n            {\n                // eslint-disable-next-line max-len\n                text: this.pdfViewer.localeObj.getConstant('Set Status'), items: [{ text: this.pdfViewer.localeObj.getConstant('None') }, { text: this.pdfViewer.localeObj.getConstant('Accepted') }, { text: this.pdfViewer.localeObj.getConstant('Cancelled') }, { text: this.pdfViewer.localeObj.getConstant('Completed') }, { text: this.pdfViewer.localeObj.getConstant('Rejected') }]\n            }\n        ];\n        var commentMenuElement = createElement('ul', { id: this.pdfViewer.element.id + '_comment_context_menu' });\n        this.pdfViewer.element.appendChild(commentMenuElement);\n        this.commentMenuObj = new Context({\n            target: '#' + this.moreButtonId, items: this.commentContextMenu,\n            beforeOpen: this.contextMenuBeforeOpen.bind(this),\n            select: this.commentMenuItemSelect.bind(this)\n        });\n        if (this.pdfViewer.enableRtl) {\n            this.commentMenuObj.enableRtl = true;\n        }\n        this.commentMenuObj.appendTo(commentMenuElement);\n        if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n            this.commentMenuObj.animationSettings.effect = 'ZoomIn';\n        }\n        else {\n            this.commentMenuObj.animationSettings.effect = 'SlideDown';\n        }\n    };\n    StickyNotesAnnotation.prototype.contextMenuBeforeOpen = function (args) {\n        // eslint-disable-next-line\n        var contextActiveDiv;\n        // eslint-disable-next-line\n        var contextDiv = document.querySelectorAll('.e-pv-more-options-button');\n        if (contextDiv) {\n            for (var i = 0; i < contextDiv.length; i++) {\n                if (contextDiv[i].style.visibility === 'visible') {\n                    contextActiveDiv = contextDiv[i].parentElement.nextSibling;\n                }\n            }\n        }\n        var isCommentLocked = this.checkIslockProperty(contextActiveDiv);\n        if (isCommentLocked) {\n            this.commentMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Edit')], false);\n            this.commentMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Delete Context')], false);\n        }\n        else {\n            this.commentMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Edit')], true);\n            this.commentMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Delete Context')], true);\n        }\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.commentMenuItemSelect = function (args) {\n        // eslint-disable-next-line\n        var contextActiveDiv;\n        // eslint-disable-next-line\n        var contextDiv = document.querySelectorAll('.e-pv-more-options-button');\n        if (contextDiv) {\n            for (var i = 0; i < contextDiv.length; i++) {\n                if (contextDiv[i].style.visibility === 'visible') {\n                    contextActiveDiv = contextDiv[i].parentElement.nextSibling;\n                }\n            }\n            if (args.item) {\n                switch (args.item.text) {\n                    case this.pdfViewer.localeObj.getConstant('Edit'):\n                        // eslint-disable-next-line\n                        var commentShow = document.querySelectorAll('.e-pv-new-comments-div');\n                        for (var i = 0; i < commentShow.length; i++) {\n                            commentShow[i].style.display = 'none';\n                        }\n                        contextActiveDiv.ej2_instances[0].enableEditMode = true;\n                        break;\n                    case this.pdfViewer.localeObj.getConstant('Delete Context'):\n                        if (contextActiveDiv.parentElement.parentElement.firstChild === contextActiveDiv.parentElement) {\n                            this.pdfViewer.annotationModule.deleteAnnotation();\n                        }\n                        else {\n                            // eslint-disable-next-line max-len\n                            this.modifyCommentDeleteProperty(contextActiveDiv.parentElement.parentElement, contextActiveDiv.parentElement);\n                        }\n                        break;\n                    case this.pdfViewer.localeObj.getConstant('Set Status'):\n                        break;\n                    case this.pdfViewer.localeObj.getConstant('Accepted'):\n                        if (contextActiveDiv.parentElement.lastChild.id === this.pdfViewer.element.id + 'status_container') {\n                            contextActiveDiv.parentElement.lastChild.remove();\n                        }\n                        // eslint-disable-next-line max-len\n                        var acceptedStatusDiv = createElement('div', { id: this.pdfViewer.element.id + 'status' + '_container', className: 'e-pv-status-container' });\n                        // eslint-disable-next-line max-len\n                        var statusDiv = createElement('div', { id: this.pdfViewer.element.id + 'status' + '_div', className: 'e-pv-status-div' });\n                        var statusSpan = createElement('span', { id: this.pdfViewer.element.id + 'status' + '_icon', className: 'e-pv-accepted-icon' });\n                        statusDiv.style.backgroundColor = 'rgb(24,169,85)';\n                        statusDiv.appendChild(statusSpan);\n                        acceptedStatusDiv.appendChild(statusDiv);\n                        contextActiveDiv.parentElement.appendChild(acceptedStatusDiv);\n                        this.modifyStatusProperty('Accepted', contextActiveDiv.parentElement);\n                        break;\n                    case this.pdfViewer.localeObj.getConstant('Completed'):\n                        if (contextActiveDiv.parentElement.lastChild.id === this.pdfViewer.element.id + 'status_container') {\n                            contextActiveDiv.parentElement.lastChild.remove();\n                        }\n                        // eslint-disable-next-line max-len\n                        var completedStatusDiv = createElement('div', { id: this.pdfViewer.element.id + 'status' + '_container', className: 'e-pv-status-container' });\n                        // eslint-disable-next-line max-len\n                        var statusElement = createElement('div', { id: this.pdfViewer.element.id + 'status' + '_div', className: 'e-pv-status-div' });\n                        // eslint-disable-next-line max-len\n                        var statusOptionSpan = createElement('span', { id: this.pdfViewer.element.id + 'status' + '_icon', className: 'e-pv-completed-icon' });\n                        statusElement.style.backgroundColor = 'rgb(0,122,255)';\n                        statusElement.appendChild(statusOptionSpan);\n                        completedStatusDiv.appendChild(statusElement);\n                        contextActiveDiv.parentElement.appendChild(completedStatusDiv);\n                        this.modifyStatusProperty('Completed', contextActiveDiv.parentElement);\n                        break;\n                    case this.pdfViewer.localeObj.getConstant('Cancelled'):\n                        if (contextActiveDiv.parentElement.lastChild.id === this.pdfViewer.element.id + 'status_container') {\n                            contextActiveDiv.parentElement.lastChild.remove();\n                        }\n                        // eslint-disable-next-line max-len\n                        var cancelStatusDiv = createElement('div', { id: this.pdfViewer.element.id + 'status' + '_container', className: 'e-pv-status-container' });\n                        // eslint-disable-next-line max-len\n                        var cancelStatusElement = createElement('div', { id: this.pdfViewer.element.id + 'status' + '_div', className: 'e-pv-status-div' });\n                        // eslint-disable-next-line max-len\n                        var cancelStatusSpan = createElement('span', { id: this.pdfViewer.element.id + 'status' + '_icon', className: 'e-pv-cancelled-icon' });\n                        cancelStatusElement.style.backgroundColor = 'rgb(245,103,0)';\n                        cancelStatusElement.appendChild(cancelStatusSpan);\n                        cancelStatusDiv.appendChild(cancelStatusElement);\n                        contextActiveDiv.parentElement.appendChild(cancelStatusDiv);\n                        this.modifyStatusProperty('Cancelled', contextActiveDiv.parentElement);\n                        break;\n                    case this.pdfViewer.localeObj.getConstant('Rejected'):\n                        if (contextActiveDiv.parentElement.lastChild.id === this.pdfViewer.element.id + 'status_container') {\n                            contextActiveDiv.parentElement.lastChild.remove();\n                        }\n                        // eslint-disable-next-line max-len\n                        var rejectedStatusDiv = createElement('div', { id: this.pdfViewer.element.id + 'status' + '_container', className: 'e-pv-status-container' });\n                        // eslint-disable-next-line max-len\n                        var rejectedStatusElement = createElement('div', { id: this.pdfViewer.element.id + 'status' + '_div', className: 'e-pv-status-div' });\n                        // eslint-disable-next-line max-len\n                        var rejectedStatusSpan = createElement('span', { id: this.pdfViewer.element.id + 'status' + '_icon', className: 'e-pv-rejected-icon' });\n                        rejectedStatusElement.style.backgroundColor = 'rgb(255,59,48)';\n                        rejectedStatusElement.appendChild(rejectedStatusSpan);\n                        rejectedStatusDiv.appendChild(rejectedStatusElement);\n                        contextActiveDiv.parentElement.appendChild(rejectedStatusDiv);\n                        this.modifyStatusProperty('Rejected', contextActiveDiv.parentElement);\n                        break;\n                    case this.pdfViewer.localeObj.getConstant('None'):\n                        if (contextActiveDiv.parentElement.lastChild.id === this.pdfViewer.element.id + 'status_container') {\n                            contextActiveDiv.parentElement.lastChild.remove();\n                        }\n                        this.modifyStatusProperty('None', contextActiveDiv.parentElement);\n                        break;\n                    default:\n                        break;\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.moreOptionsClick = function (event, isMoreOptionClick) {\n        if (document.getElementById(this.pdfViewer.element.id + '_comment_context_menu').style.display !== 'block') {\n            this.pdfViewer.annotationModule.checkContextMenuDeleteItem(this.commentMenuObj);\n            this.commentMenuObj.open(event.clientY, event.clientX, event.currentTarget);\n        }\n        if (this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.inkAnnotationModule) {\n            // eslint-disable-next-line\n            var currentPageNumber = parseInt(this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);\n            this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(currentPageNumber);\n        }\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.openTextEditor = function (event) {\n        // eslint-disable-next-line\n        var commentShow = document.querySelectorAll('.e-pv-new-comments-div');\n        for (var i = 0; i < commentShow.length; i++) {\n            commentShow[i].style.display = 'none';\n        }\n        var isCommentLocked = this.checkIslockProperty(event.currentTarget.nextSibling);\n        if (isCommentLocked) {\n            event.currentTarget.nextSibling.ej2_instances[0].enableEditMode = false;\n        }\n        else if (event.currentTarget && event.target) {\n            var isLocked = this.checkAnnotationSettings(event.target.id);\n            if (!isLocked) {\n                event.currentTarget.nextSibling.ej2_instances[0].enableEditMode = true;\n            }\n        }\n        else {\n            event.currentTarget.nextSibling.ej2_instances[0].enableEditMode = true;\n        }\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.checkIslockProperty = function (commentEvent) {\n        // eslint-disable-next-line\n        var annotCollection = this.pdfViewer.annotationCollection;\n        // eslint-disable-next-line\n        var annotation;\n        if (commentEvent.IsCommentLock) {\n            return true;\n        }\n        // eslint-disable-next-line max-len\n        if (this.pdfViewer.annotationModule.textMarkupAnnotationModule && this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n            annotation = this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;\n        }\n        else if (this.pdfViewer.selectedItems.annotations[0]) {\n            annotation = this.pdfViewer.selectedItems.annotations[0];\n        }\n        for (var i = 0; i < annotCollection.length; i++) {\n            // eslint-disable-next-line max-len\n            annotCollection[i].annotationSettings = !isNullOrUndefined(annotCollection[i].annotationSettings) ? annotCollection[i].annotationSettings : {};\n            var note = annotCollection[i].note ? annotCollection[i].note : annotCollection[i].notes;\n            if (annotCollection[i].annotationSettings.isLock && (commentEvent.textContent === note || annotCollection[i].dynamicText === commentEvent.textContent)) {\n                return true;\n            }\n            for (var j = 0; j < annotCollection[i].comments.length; j++) {\n                if (annotation && annotCollection[i].annotationId === annotation.annotName) {\n                    // eslint-disable-next-line max-len\n                    if (annotCollection[i].comments[j].isLock === true && commentEvent.textContent === annotCollection[i].comments[j].note) {\n                        return true;\n                    }\n                }\n            }\n        }\n        return false;\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.openEditorElement = function (event) {\n        // eslint-disable-next-line\n        var commentShow = document.querySelectorAll('.e-pv-new-comments-div');\n        for (var i = 0; i < commentShow.length; i++) {\n            commentShow[i].style.display = 'none';\n        }\n        var isCommentLocked = this.checkIslockProperty(event.currentTarget);\n        if (isCommentLocked) {\n            event.currentTarget.ej2_instances[0].enableEditMode = false;\n        }\n        else if (event.currentTarget && event.target) {\n            var isLocked = this.checkAnnotationSettings(event.target.id);\n            if (!isLocked) {\n                if (!isNullOrUndefined(this.pdfViewer.selectedItems) && this.pdfViewer.selectedItems.annotations[0] && this.pdfViewer.selectedItems.annotations[0].isReadonly) {\n                    event.currentTarget.ej2_instances[0].enableEditMode = false;\n                }\n                else {\n                    event.currentTarget.ej2_instances[0].enableEditMode = true;\n                }\n            }\n        }\n        else {\n            event.currentTarget.ej2_instances[0].enableEditMode = true;\n        }\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.commentsDivClickEvent = function (event) {\n        // eslint-disable-next-line\n        var annotation = this.findAnnotationObject(event.currentTarget.parentElement.id);\n        var isLocked = (annotation.annotationSettings.isLock || annotation.isLock);\n        if (!isLocked) {\n            var isCommentsSelect = false;\n            if (event.clientX === 0 && event.clientY === 0) {\n                this.isSetAnnotationType = true;\n            }\n            else {\n                this.isSetAnnotationType = false;\n            }\n            if (event.target.className === 'e-pv-more-icon e-pv-icon') {\n                return null;\n            }\n            // eslint-disable-next-line\n            var x = document.querySelectorAll('.e-pv-more-options-button');\n            for (var i = 0; i < x.length; i++) {\n                x[i].style.visibility = 'hidden';\n            }\n            if (document.getElementById(this.pdfViewer.element.id + '_commantPanel').style.display === 'none') {\n                this.pdfViewer.annotationModule.showCommentsPanel();\n            }\n            if (event.currentTarget.parentElement.classList.contains('e-pv-comments-border')) {\n                isCommentsSelect = true;\n            }\n            event.currentTarget.firstChild.lastChild.style.visibility = 'visible';\n            // eslint-disable-next-line\n            var commentsContainer = document.querySelectorAll('.e-pv-comments-border');\n            if (commentsContainer) {\n                for (var j = 0; j < commentsContainer.length; j++) {\n                    commentsContainer[j].classList.remove('e-pv-comments-border');\n                }\n            }\n            event.currentTarget.parentElement.classList.add('e-pv-comments-border');\n            // eslint-disable-next-line\n            var commentShow = document.querySelectorAll('.e-pv-new-comments-div');\n            for (var i = 0; i < commentShow.length; i++) {\n                commentShow[i].style.display = 'none';\n            }\n            // eslint-disable-next-line\n            var editElement = event.currentTarget.parentElement.lastChild;\n            // eslint-disable-next-line\n            var commentsElement = event.currentTarget.parentElement;\n            if (editElement) {\n                editElement.style.display = 'block';\n                if (editElement.querySelector('.e-editable-inline')) {\n                    if (!this.isEditableElement) {\n                        editElement.querySelector('.e-editable-inline').style.display = 'block';\n                    }\n                    for (var i = 0; i < commentsElement.childElementCount; i++) {\n                        // eslint-disable-next-line\n                        var activeElement = commentsElement.childNodes[i];\n                        // eslint-disable-next-line\n                        var textElement = activeElement.querySelector('.e-editable-inline');\n                        if (textElement) {\n                            if (textElement.style.display === '') {\n                                editElement.style.display = 'none';\n                                editElement.querySelector('.e-editable-inline').style.display = 'none';\n                            }\n                        }\n                    }\n                }\n                if (this.isSetAnnotationType) {\n                    if (!isCommentsSelect) {\n                        this.updateCommentsScrollTop();\n                    }\n                }\n            }\n            if (event.currentTarget.parentElement.childElementCount === 1) {\n                if (!this.pdfViewer.enableShapeLabel) {\n                    event.currentTarget.childNodes[1].ej2_instances[0].enableEditMode = true;\n                }\n                else {\n                    var type = event.currentTarget.parentElement.getAttribute('name');\n                    if (this.isSetAnnotationType && type === 'shape') {\n                        event.currentTarget.childNodes[1].ej2_instances[0].enableEditMode = false;\n                    }\n                    else {\n                        event.currentTarget.childNodes[1].ej2_instances[0].enableEditMode = true;\n                    }\n                }\n            }\n            var editModule = void 0;\n            if (event && event.currentTarget && event.currentTarget.childNodes[1]) {\n                editModule = event.currentTarget.childNodes[1].ej2_instances[0];\n            }\n            if (event.currentTarget && event.currentTarget.id && editModule) {\n                // eslint-disable-next-line\n                if (annotation && annotation.isCommentLock) {\n                    editModule.enableEditMode = false;\n                    this.createCommentDiv(event.currentTarget);\n                }\n                this.pdfViewer.fireCommentSelect(event.currentTarget.id, event.currentTarget.childNodes[1].ej2_instances[0].value, annotation);\n            }\n            this.commentDivOnSelect(event);\n            event.preventDefault();\n        }\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.commentsDivDoubleClickEvent = function (event) {\n        // eslint-disable-next-line\n        var commentShow = document.querySelectorAll('.e-pv-new-comments-div');\n        for (var i = 0; i < commentShow.length; i++) {\n            commentShow[i].style.display = 'none';\n        }\n        var isCommentLocked = this.checkIslockProperty(event.currentTarget.children[1]);\n        if (isCommentLocked) {\n            if (event.currentTarget.childElementCount === 2) {\n                event.currentTarget.lastChild.ej2_instances[0].enableEditMode = false;\n            }\n            else {\n                event.currentTarget.childNodes[1].ej2_instances[0].enableEditMode = false;\n            }\n        }\n        else if (event.currentTarget && event.target) {\n            var isLocked = this.checkAnnotationSettings(event.target.id);\n            if (!isLocked) {\n                if (event.currentTarget.childElementCount === 2) {\n                    event.currentTarget.lastChild.ej2_instances[0].enableEditMode = true;\n                }\n                else {\n                    event.currentTarget.childNodes[1].ej2_instances[0].enableEditMode = true;\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.commentDivOnSelect = function (event) {\n        // eslint-disable-next-line\n        var commentSelect = document.querySelectorAll('.e-pv-comments-select');\n        for (var z = 0; z < commentSelect.length; z++) {\n            commentSelect[z].classList.remove('e-pv-comments-select');\n        }\n        var activeElement = document.getElementById(event.currentTarget.id);\n        if (activeElement) {\n            activeElement.classList.remove('e-pv-comments-hover');\n            activeElement.classList.remove('e-pv-comments-leave');\n            activeElement.classList.add('e-pv-comments-select');\n            if (event.currentTarget.nextSibling) {\n                if (event.currentTarget.nextSibling.classList.contains('e-pv-new-comments-div')) {\n                    var activeSiblingElement = document.getElementById(event.currentTarget.nextSibling.id);\n                    activeSiblingElement.classList.remove('e-pv-comments-hover');\n                    activeSiblingElement.classList.remove('e-pv-comments-leave');\n                    activeSiblingElement.classList.add('e-pv-comments-select');\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.commentDivMouseOver = function (event) {\n        var activeElement = document.getElementById(event.currentTarget.id);\n        if (activeElement) {\n            activeElement.classList.remove('e-pv-comments-select');\n            activeElement.classList.remove('e-pv-comments-leave');\n            activeElement.classList.add('e-pv-comments-hover');\n            if (event.currentTarget.nextSibling) {\n                if (event.currentTarget.nextSibling.classList.contains('e-pv-new-comments-div')) {\n                    var activeSiblingElement = document.getElementById(event.currentTarget.nextSibling.id);\n                    activeSiblingElement.classList.remove('e-pv-comments-select');\n                    activeSiblingElement.classList.remove('e-pv-comments-leave');\n                    activeSiblingElement.classList.add('e-pv-comments-hover');\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.commentDivMouseLeave = function (event) {\n        var activeElement = document.getElementById(event.currentTarget.id);\n        if (activeElement) {\n            activeElement.classList.remove('e-pv-comments-hover');\n            activeElement.classList.remove('e-pv-comments-select');\n            activeElement.classList.add('e-pv-comments-leave');\n            if (event.currentTarget.nextSibling) {\n                if (event.currentTarget.nextSibling.classList.contains('e-pv-new-comments-div')) {\n                    var activeSiblingElement = document.getElementById(event.currentTarget.nextSibling.id);\n                    activeSiblingElement.classList.remove('e-pv-comments-hover');\n                    activeSiblingElement.classList.remove('e-pv-comments-select');\n                    activeSiblingElement.classList.add('e-pv-comments-leave');\n                }\n            }\n        }\n    };\n    /**\n     * @param event\n     * @private\n     */\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.drawIcons = function (event) {\n        // eslint-disable-next-line\n        if (this.pdfViewerBase.isCommentIconAdded) {\n            var pageIndex = this.pdfViewer.annotation.getEventPageNumber(event);\n            var pageCurrentRect = this.pdfViewerBase.getElement('_pageDiv_' + pageIndex).getBoundingClientRect();\n            var zoomValue = this.pdfViewerBase.getZoomFactor();\n            this.pdfViewer.annotationModule.isFormFieldShape = false;\n            // eslint-disable-next-line max-len\n            this.pdfViewer.annotation.stickyNotesAnnotationModule.drawStickyNotes((event.clientX - pageCurrentRect.left) / zoomValue, (event.clientY - pageCurrentRect.top) / zoomValue, 30, 30, pageIndex, null);\n            this.pdfViewerBase.isCommentIconAdded = false;\n            var commentsButton = document.getElementById(this.pdfViewer.element.id + '_comment');\n            if (isBlazor()) {\n                commentsButton = commentsButton.children[0];\n            }\n            if (commentsButton && commentsButton.classList.contains('e-pv-select')) {\n                commentsButton.classList.remove('e-pv-select');\n            }\n            else {\n                var commentsIcon = document.getElementById(this.pdfViewer.element.id + '_commentIcon');\n                if (commentsIcon) {\n                    this.pdfViewer.enableRtl ? commentsIcon.className = 'e-pv-comment-icon e-pv-icon e-icon-left e-right' : commentsIcon.className = 'e-pv-comment-icon e-pv-icon e-icon-left';\n                }\n            }\n        }\n    };\n    /**\n     * @param annotationType\n     * @param pageNumber\n     * @param annotationSubType\n     * @param annotationType\n     * @param pageNumber\n     * @param annotationSubType\n     * @param annotationType\n     * @param pageNumber\n     * @param annotationSubType\n     * @private\n     */\n    StickyNotesAnnotation.prototype.addComments = function (annotationType, pageNumber, annotationSubType) {\n        var commentsDivid;\n        // eslint-disable-next-line max-len\n        var accordion = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + pageNumber);\n        if (accordion) {\n            // eslint-disable-next-line max-len\n            commentsDivid = this.pdfViewer.annotation.stickyNotesAnnotationModule.createCommentControlPanel(null, pageNumber, annotationType, annotationSubType);\n        }\n        else {\n            this.pdfViewer.annotation.stickyNotesAnnotationModule.createPageAccordion(pageNumber);\n            // eslint-disable-next-line max-len\n            commentsDivid = this.pdfViewer.annotation.stickyNotesAnnotationModule.createCommentControlPanel(null, pageNumber, annotationType, annotationSubType);\n        }\n        return commentsDivid;\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.commentsAnnotationSelect = function (event) {\n        var element = event.currentTarget;\n        var isLocked = this.checkAnnotationSettings(event.target.id);\n        // When the isLock is set to true, it comes and checks whether the allowedInteractions is select and set the isLock to false, In that case if enters the condition and makes the comment panel to editable mode. So, have removed the condition in openEditorElement, commentsDivClickEvent, openTextEditor,commentAnnotationSelect methods. (Task id: 835410)\n        if (!isLocked) {\n            if (element.classList.contains('e-pv-comments-border')) {\n                // eslint-disable-next-line\n                var commentsDiv = document.querySelectorAll('.e-pv-comments-div');\n                for (var j = 0; j < commentsDiv.length; j++) {\n                    commentsDiv[j].style.minHeight = 60 + 'px';\n                }\n                if (event.currentTarget.childElementCount === 1) {\n                    if (event.currentTarget.childNodes[0].querySelector('.e-editable-inline')) {\n                        event.currentTarget.childNodes[0].style.minHeight = event.currentTarget.childNodes[0].clientHeight;\n                    }\n                }\n            }\n            if (event.target.className === 'e-pv-more-icon e-pv-icon' || event.target.className === 'e-pv-more-options-button e-btn') {\n                event.preventDefault();\n                return null;\n            }\n            // eslint-disable-next-line\n            var pageNumber = parseInt(element.accessKey.split('_')[0]);\n            if (!element.classList.contains('e-pv-comments-border')) {\n                // eslint-disable-next-line\n                var commentsContainer = document.querySelectorAll('.e-pv-comments-border');\n                if (commentsContainer) {\n                    for (var j = 0; j < commentsContainer.length; j++) {\n                        commentsContainer[j].classList.remove('e-pv-comments-border');\n                    }\n                }\n                var commentsDiv = document.getElementById(element.id);\n                if (commentsDiv) {\n                    // eslint-disable-next-line\n                    document.querySelectorAll('.e-pv-more-options-button[style*=\"visibility: visible\"]').forEach(function (moreButton) { return moreButton.style.visibility = 'hidden'; });\n                    if (event.target.className === 'e-editable-value-wrapper') {\n                        event.target.parentElement.parentElement.firstChild.lastChild.style.visibility = 'visible';\n                    }\n                    else if (event.target.className === 'e-pv-reply-title' || event.target.className === 'e-pv-comment-title') {\n                        event.target.parentElement.lastChild.style.visibility = 'visible';\n                    }\n                    else if (event.target.className === 'e-editable-value') {\n                        event.target.parentElement.parentElement.parentElement.firstChild.lastChild.style.visibility = 'visible';\n                    }\n                    commentsDiv.classList.add('e-pv-comments-border');\n                }\n                // eslint-disable-next-line\n                var commentTextBox = document.querySelectorAll('.e-pv-new-comments-div');\n                for (var j = 0; j < commentTextBox.length; j++) {\n                    commentTextBox[j].style.display = 'none';\n                }\n                if (commentsDiv) {\n                    // eslint-disable-next-line\n                    var currentTextBox = commentsDiv.querySelector('.e-pv-new-comments-div');\n                    if (currentTextBox) {\n                        currentTextBox.style.display = 'block';\n                    }\n                }\n                // eslint-disable-next-line\n                var textDiv = element.lastChild;\n                this.isEditableElement = false;\n                if (textDiv.querySelector('.e-editable-inline')) {\n                    textDiv.style.display = 'block';\n                    textDiv.querySelector('.e-editable-inline').style.display = 'block';\n                    for (var i = 0; i < element.childElementCount; i++) {\n                        // eslint-disable-next-line\n                        var activeElement = element.childNodes[i];\n                        // eslint-disable-next-line\n                        var textElement = activeElement.querySelector('.e-editable-inline');\n                        if (textElement) {\n                            if (textElement.style.display === '') {\n                                if (textDiv.classList.contains('e-pv-new-comments-div')) {\n                                    this.isEditableElement = true;\n                                    textDiv.style.display = 'none';\n                                    textDiv.querySelector('.e-editable-inline').style.display = 'none';\n                                }\n                            }\n                        }\n                    }\n                }\n                this.isSetAnnotationType = false;\n                if (event.currentTarget.childElementCount === 1) {\n                    event.currentTarget.childNodes[0].childNodes[1].ej2_instances[0].enableEditMode = true;\n                }\n            }\n            else {\n                this.isSetAnnotationType = true;\n            }\n            if (!this.isSetAnnotationType) {\n                if (this.pdfViewer.navigation) {\n                    this.pdfViewer.navigationModule.goToPage(pageNumber);\n                }\n                var annotType = element.getAttribute('name');\n                if (annotType === 'null' || annotType === 'Ink') {\n                    annotType = 'ink';\n                }\n                this.isCommentsSelected = false;\n                this.setAnnotationType(element.id, annotType, pageNumber);\n                if (!this.isCommentsSelected) {\n                    this.selectAnnotationObj = { id: element.id, annotType: annotType, pageNumber: pageNumber };\n                }\n            }\n        }\n        else {\n            var pageNumber = parseInt(element.accessKey.split('_')[0]);\n            if (this.pdfViewer.navigation) {\n                this.pdfViewer.navigationModule.goToPage(pageNumber);\n            }\n            var annotType = element.getAttribute('name');\n            if (annotType === 'null' || annotType === 'Ink') {\n                annotType = 'ink';\n            }\n            this.isCommentsSelected = false;\n            this.setAnnotationType(element.id, annotType, pageNumber);\n            if (!this.isCommentsSelected) {\n                this.selectAnnotationObj = { id: element.id, annotType: annotType, pageNumber: pageNumber };\n            }\n        }\n        this.isSetAnnotationType = false;\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.findAnnotationObject = function (id) {\n        // eslint-disable-next-line max-len\n        if (this.pdfViewer.annotationModule.textMarkupAnnotationModule && this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n            return this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;\n        }\n        else if (this.pdfViewer.selectedItems.annotations[0]) {\n            return this.pdfViewer.selectedItems.annotations[0];\n        }\n        // eslint-disable-next-line\n        var annotationCollection = this.pdfViewer.annotationCollection;\n        if (annotationCollection) {\n            for (var i = 0; i < annotationCollection.length; i++) {\n                if (annotationCollection[i].annotationId && (annotationCollection[i].annotationId === id)) {\n                    if (annotationCollection[i].shapeAnnotationType === 'textMarkup') {\n                        return annotationCollection[i];\n                    }\n                    else {\n                        annotationCollection = this.pdfViewer.annotations;\n                        for (var j = 0; j < annotationCollection.length; j++) {\n                            if (annotationCollection[j].annotName && (annotationCollection[j].annotName === id)) {\n                                return annotationCollection[j];\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    };\n    StickyNotesAnnotation.prototype.checkAnnotationSettings = function (id) {\n        // eslint-disable-next-line\n        var annotationCollection = this.pdfViewer.annotationCollection;\n        var parentDivId = this.pdfViewer.element.id;\n        if (annotationCollection) {\n            for (var i = 0; i < annotationCollection.length; i++) {\n                if (id.includes(parentDivId + \"_commenttextbox\") || id.includes(parentDivId + \"_commentTitle\") || id.includes(parentDivId + \"_commentdiv\")) {\n                    if (annotationCollection[i].annotationSettings && annotationCollection[i].annotationSettings.isLock) {\n                        return true;\n                    }\n                    else {\n                        return false;\n                    }\n                }\n            }\n            return false;\n        }\n        else {\n            return false;\n        }\n    };\n    StickyNotesAnnotation.prototype.updateCommentsContainerWidth = function () {\n        var accordionContainer = document.getElementById(this.pdfViewer.element.id + '_accordionContentContainer');\n        var commentsContentContainer = document.getElementById(this.pdfViewer.element.id + '_commentscontentcontainer');\n        accordionContainer.style.width = commentsContentContainer.clientWidth + 'px';\n    };\n    /**\n     * @param pageIndex\n     * @private\n     */\n    StickyNotesAnnotation.prototype.selectCommentsAnnotation = function (pageIndex) {\n        if (this.selectAnnotationObj && !this.isCommentsSelected) {\n            if ((this.selectAnnotationObj.pageNumber - 1) === pageIndex) {\n                // eslint-disable-next-line max-len\n                this.setAnnotationType(this.selectAnnotationObj.id, this.selectAnnotationObj.annotType, this.selectAnnotationObj.pageNumber);\n                this.selectAnnotationObj = null;\n                this.isCommentsSelected = true;\n            }\n        }\n    };\n    StickyNotesAnnotation.prototype.setAnnotationType = function (id, type, pageNumber) {\n        var typeString = (type === 'measure') ? 'shape_measure' : type;\n        if (typeString === 'freeText') {\n            typeString = 'freetext';\n        }\n        // eslint-disable-next-line\n        var storeCommentObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_' + typeString);\n        if (this.pdfViewerBase.isStorageExceed) {\n            storeCommentObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_' + typeString];\n        }\n        if (storeCommentObject) {\n            var annotationCommentObject = JSON.parse(storeCommentObject);\n            // eslint-disable-next-line\n            var annotation = this.pdfViewer.selectedItems.annotations[0];\n            // eslint-disable-next-line max-len\n            var index = this.pdfViewer.annotationModule.\n                getPageCollection(annotationCommentObject, (pageNumber - 1));\n            if (annotationCommentObject[index]) {\n                // eslint-disable-next-line\n                var pageCollections = annotationCommentObject[index].annotations;\n                for (var i = 0; i < pageCollections.length; i++) {\n                    var currentSelector = pageCollections[i].annotationSelectorSettings;\n                    if (pageCollections[i].annotName === id) {\n                        if (annotation) {\n                            this.pdfViewer.fireAnnotationUnSelect(annotation.annotName, annotation.pageIndex, annotation);\n                        }\n                        this.pdfViewer.clearSelection(pageNumber - 1);\n                        if (type === 'textMarkup') {\n                            // eslint-disable-next-line max-len\n                            this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearCurrentAnnotationSelection(pageNumber - 1, true);\n                            // eslint-disable-next-line max-len\n                            var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + (pageNumber - 1));\n                            this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectAnnotation(pageCollections[i], canvas, (pageNumber - 1));\n                            this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAnnotation = pageCollections[i];\n                            this.pdfViewer.annotation.textMarkupAnnotationModule.selectTextMarkupCurrentPage = pageNumber - 1;\n                            this.pdfViewer.annotation.textMarkupAnnotationModule.enableAnnotationPropertiesTool(true);\n                            if (this.pdfViewer.toolbarModule && this.pdfViewer.enableAnnotationToolbar) {\n                                this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden = true;\n                                // eslint-disable-next-line max-len\n                                this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem);\n                            }\n                        }\n                        else if (type === 'stamp') {\n                            this.pdfViewer.select([pageCollections[i].randomId], currentSelector);\n                            this.pdfViewer.annotation.onAnnotationMouseDown();\n                        }\n                        else if (type === 'sticky') {\n                            this.pdfViewer.select([pageCollections[i].annotName], currentSelector);\n                            this.pdfViewer.annotation.onAnnotationMouseDown();\n                        }\n                        else if (type === 'ink') {\n                            this.pdfViewer.select([pageCollections[i].id], currentSelector);\n                            this.pdfViewer.annotation.onAnnotationMouseDown();\n                        }\n                        else {\n                            this.pdfViewer.select([pageCollections[i].id], currentSelector);\n                            this.pdfViewer.annotation.onAnnotationMouseDown();\n                        }\n                        if (type === 'textMarkup') {\n                            if (pageCollections[i].rect || pageCollections[i].bounds) {\n                                // eslint-disable-next-line max-len\n                                var scrollValue = this.pdfViewerBase.pageSize[pageNumber - 1].top * this.pdfViewerBase.getZoomFactor() + (this.pdfViewer.annotationModule.getAnnotationTop(pageCollections[i]) * this.pdfViewerBase.getZoomFactor());\n                                if (scrollValue) {\n                                    var scroll_1 = (scrollValue - 20).toString();\n                                    // eslint-disable-next-line radix\n                                    this.pdfViewerBase.viewerContainer.scrollTop = parseInt(scroll_1);\n                                }\n                            }\n                        }\n                        else {\n                            var top_1 = pageCollections[i].bounds.top;\n                            if (type === 'ink') {\n                                top_1 = pageCollections[i].bounds.y;\n                            }\n                            // eslint-disable-next-line max-len\n                            var scrollValue = this.pdfViewerBase.pageSize[pageNumber - 1].top * this.pdfViewerBase.getZoomFactor() + ((top_1) * this.pdfViewerBase.getZoomFactor());\n                            var scroll_2 = (scrollValue - 20).toString();\n                            // eslint-disable-next-line radix\n                            this.pdfViewerBase.viewerContainer.scrollTop = parseInt(scroll_2);\n                        }\n                        this.isCommentsSelected = true;\n                    }\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.modifyTextProperty = function (text, previousValue, annotationName) {\n        // eslint-disable-next-line\n        var currentAnnotation;\n        var module = this.pdfViewer.annotationModule.textMarkupAnnotationModule;\n        if (module && module.currentTextMarkupAnnotation) {\n            currentAnnotation = this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;\n        }\n        if (currentAnnotation) {\n            if (currentAnnotation.annotName !== annotationName) {\n                currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n            }\n        }\n        else {\n            currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n        }\n        if (isNullOrUndefined(currentAnnotation) && annotationName || (!isNullOrUndefined(currentAnnotation) && currentAnnotation.annotName !== annotationName)) {\n            currentAnnotation = this.pdfViewer.annotationCollection.filter(function (annot) { return annot.annotationId === annotationName; })[0];\n        }\n        if (annotationName && (currentAnnotation.annotName !== annotationName)) {\n            for (var i = 0; i < this.pdfViewer.annotations.length; i++) {\n                if (annotationName === this.pdfViewer.annotations[i].annotName) {\n                    currentAnnotation = this.pdfViewer.annotations[i];\n                    break;\n                }\n            }\n        }\n        if (currentAnnotation) {\n            currentAnnotation.annotName = !isNullOrUndefined(currentAnnotation.annotName) ? currentAnnotation.annotName : currentAnnotation.annotationId;\n            // eslint-disable-next-line\n            var commentsDiv = document.getElementById(currentAnnotation.annotName);\n            if (commentsDiv) {\n                // eslint-disable-next-line\n                var pageNumber = void 0;\n                if (commentsDiv.accessKey.split('_')[0]) {\n                    // eslint-disable-next-line\n                    pageNumber = parseInt(commentsDiv.accessKey.split('_')[0]);\n                }\n                else {\n                    pageNumber = this.pdfViewerBase.currentPageNumber;\n                }\n                var type = commentsDiv.getAttribute('name');\n                var pageIndex = pageNumber - 1;\n                // eslint-disable-next-line\n                var pageAnnotations = void 0;\n                var isMeasure = false;\n                // eslint-disable-next-line max-len\n                if (currentAnnotation.shapeAnnotationType === 'FreeText' || (this.pdfViewer.enableShapeLabel && (type === 'shape' || type === 'shape_measure'))) {\n                    var isTextAdded = false;\n                    if (annotationName) {\n                        if (currentAnnotation.annotName !== annotationName) {\n                            this.pdfViewer.annotation.modifyDynamicTextValue(text, annotationName);\n                            isTextAdded = true;\n                        }\n                    }\n                    if (!isTextAdded) {\n                        if (currentAnnotation.shapeAnnotationType === 'FreeText') {\n                            if (currentAnnotation.dynamicText !== text) {\n                                this.textFromCommentPanel = true;\n                                this.pdfViewer.annotation.modifyDynamicTextValue(text, currentAnnotation.annotName);\n                            }\n                            currentAnnotation.dynamicText = text;\n                        }\n                        else {\n                            this.pdfViewer.annotation.modifyDynamicTextValue(text, currentAnnotation.annotName);\n                            currentAnnotation.labelContent = text;\n                            currentAnnotation.notes = text;\n                        }\n                        this.pdfViewer.nodePropertyChange(currentAnnotation, {});\n                    }\n                }\n                if (currentAnnotation.measureType && currentAnnotation.measureType !== '') {\n                    pageAnnotations = this.getAnnotations(pageIndex, null, 'shape_measure');\n                    isMeasure = true;\n                }\n                else {\n                    pageAnnotations = this.getAnnotations(pageIndex, null, currentAnnotation.shapeAnnotationType);\n                }\n                if (pageAnnotations !== null && currentAnnotation.shapeAnnotationType !== 'FreeText') {\n                    for (var i = 0; i < pageAnnotations.length; i++) {\n                        if (pageAnnotations[i].annotName === currentAnnotation.annotName) {\n                            // eslint-disable-next-line\n                            var clonedObject = cloneObject(pageAnnotations[i]);\n                            if (!isNullOrUndefined(text) && text != \"\") {\n                                if (pageAnnotations[i].note !== text) {\n                                    // eslint-disable-next-line max-len\n                                    this.pdfViewer.annotation.addAction(pageIndex, i, pageAnnotations[i], 'Text Property Added', '', clonedObject, pageAnnotations[i]);\n                                    currentAnnotation = pageAnnotations[i];\n                                    currentAnnotation.note = text;\n                                    if (currentAnnotation.enableShapeLabel) {\n                                        currentAnnotation.labelContent = text;\n                                    }\n                                    // eslint-disable-next-line max-len\n                                    currentAnnotation.modifiedDate = this.getDateAndTime();\n                                    if (!isMeasure) {\n                                        this.updateUndoRedoCollections(currentAnnotation, pageIndex);\n                                    }\n                                    else {\n                                        this.updateUndoRedoCollections(currentAnnotation, pageIndex, 'shape_measure');\n                                    }\n                                    if (!previousValue || previousValue === '') {\n                                        // eslint-disable-next-line max-len\n                                        this.pdfViewer.fireCommentAdd(currentAnnotation.annotName, currentAnnotation.note, currentAnnotation);\n                                    }\n                                    else {\n                                        // eslint-disable-next-line max-len\n                                        this.pdfViewer.fireCommentEdit(currentAnnotation.annotName, currentAnnotation.note, currentAnnotation);\n                                    }\n                                    return currentAnnotation;\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @param date\n     * @private\n     */\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.getDateAndTime = function (date) {\n        if (!date) {\n            date = new Date();\n        }\n        this.globalize = new Internationalization();\n        var dateOptions = { format: this.pdfViewer.dateTimeFormat, type: 'dateTime' };\n        // eslint-disable-next-line\n        var dateTime = this.globalize.formatDate(new Date(date), dateOptions);\n        return dateTime;\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.modifyCommentsProperty = function (text, annotName, parentElement, previousValue) {\n        // eslint-disable-next-line\n        var currentAnnotation;\n        if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n            currentAnnotation = this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;\n        }\n        else {\n            currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n        }\n        if (currentAnnotation) {\n            // eslint-disable-next-line\n            var commentsDiv = document.getElementById(currentAnnotation.annotName);\n            // eslint-disable-next-line\n            var pageNumber = parseInt(commentsDiv.accessKey.split('_')[0]);\n            var pageIndex = pageNumber - 1;\n            // eslint-disable-next-line\n            var pageAnnotations = void 0;\n            var isMeasure = false;\n            var author = this.getAuthorName(currentAnnotation, commentsDiv);\n            if (currentAnnotation.measureType && currentAnnotation.measureType !== '') {\n                pageAnnotations = this.getAnnotations(pageIndex, null, 'shape_measure');\n                isMeasure = true;\n            }\n            else {\n                pageAnnotations = this.getAnnotations(pageIndex, null, currentAnnotation.shapeAnnotationType);\n            }\n            if (pageAnnotations !== null) {\n                for (var i = 0; i < pageAnnotations.length; i++) {\n                    if (pageAnnotations[i].annotName === currentAnnotation.annotName) {\n                        currentAnnotation = pageAnnotations[i];\n                    }\n                }\n            }\n            // eslint-disable-next-line\n            var clonedObject = cloneObject(currentAnnotation);\n            if (currentAnnotation.comments.length > 0) {\n                var isComment = false;\n                for (var j = 0; j < currentAnnotation.comments.length; j++) {\n                    if (currentAnnotation.comments[j].annotName === annotName) {\n                        isComment = true;\n                        currentAnnotation.comments[j].note = text;\n                        // eslint-disable-next-line max-len\n                        currentAnnotation.comments[j].modifiedDate = this.getDateAndTime();\n                    }\n                }\n                if (currentAnnotation.annotName === parentElement) {\n                    // eslint-disable-next-line max-len\n                    var newArray = { annotName: annotName, parentId: parentElement, subject: currentAnnotation.subject, comments: [], author: author, note: text, shapeAnnotationType: '', state: '', stateModel: '', modifiedDate: this.getDateAndTime(), review: { state: '', stateModel: '', modifiedDate: this.getDateAndTime(), author: author }, isLock: false };\n                    if (!isComment) {\n                        currentAnnotation.comments[currentAnnotation.comments.length] = newArray;\n                    }\n                }\n            }\n            else if (currentAnnotation.annotName === parentElement) {\n                // eslint-disable-next-line max-len\n                var newArray = { annotName: annotName, parentId: parentElement, subject: currentAnnotation.subject, comments: [], author: author, note: text, shapeAnnotationType: '', state: '', stateModel: '', modifiedDate: this.getDateAndTime(), review: { state: '', stateModel: '', modifiedDate: this.getDateAndTime(), author: author }, isLock: false };\n                currentAnnotation.comments[currentAnnotation.comments.length] = newArray;\n            }\n            // eslint-disable-next-line max-len\n            this.pdfViewer.annotation.addAction(pageIndex, null, currentAnnotation, 'Comments Property Added', '', clonedObject, currentAnnotation);\n            if (!isMeasure) {\n                this.updateUndoRedoCollections(currentAnnotation, pageIndex);\n            }\n            else {\n                this.updateUndoRedoCollections(currentAnnotation, pageIndex, 'shape_measure');\n            }\n        }\n        if (previousValue !== undefined) {\n            this.pdfViewer.fireCommentEdit(annotName, text, currentAnnotation);\n        }\n        else {\n            this.pdfViewer.fireCommentAdd(annotName, text, currentAnnotation);\n        }\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.modifyStatusProperty = function (text, statusElement) {\n        // eslint-disable-next-line\n        var currentAnnotation;\n        if (this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n            currentAnnotation = this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAnnotation;\n        }\n        else {\n            currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n        }\n        if (currentAnnotation) {\n            // eslint-disable-next-line\n            var commentsDiv = document.getElementById(currentAnnotation.annotName);\n            // eslint-disable-next-line\n            var pageNumber = parseInt(commentsDiv.accessKey.split('_')[0]);\n            var pageIndex = pageNumber - 1;\n            // eslint-disable-next-line\n            var pageAnnotations = void 0;\n            var isMeasure = false;\n            var author = commentsDiv.getAttribute('author');\n            if (currentAnnotation.measureType && currentAnnotation.measureType !== '') {\n                pageAnnotations = this.getAnnotations(pageIndex, null, 'shape_measure');\n                isMeasure = true;\n            }\n            else {\n                pageAnnotations = this.getAnnotations(pageIndex, null, currentAnnotation.shapeAnnotationType);\n            }\n            if (pageAnnotations !== null) {\n                for (var i = 0; i < pageAnnotations.length; i++) {\n                    if (pageAnnotations[i].annotName === currentAnnotation.annotName) {\n                        currentAnnotation = pageAnnotations[i];\n                    }\n                }\n            }\n            // eslint-disable-next-line\n            var clonedObject = cloneObject(currentAnnotation);\n            if (statusElement.parentElement.firstChild.id === statusElement.id) {\n                // eslint-disable-next-line max-len\n                currentAnnotation.review = { state: text, stateModel: 'Review', author: author, modifiedDate: this.getDateAndTime(), annotId: statusElement.id };\n                currentAnnotation.state = text;\n                currentAnnotation.stateModel = 'Review';\n                // eslint-disable-next-line max-len\n                this.pdfViewer.annotation.addAction(pageIndex, null, currentAnnotation, 'Status Property Added', '', clonedObject, currentAnnotation);\n                this.pdfViewer.fireCommentStatusChanged(statusElement.id, currentAnnotation.note, currentAnnotation, currentAnnotation.state);\n            }\n            else {\n                for (var j = 0; j < currentAnnotation.comments.length; j++) {\n                    if (currentAnnotation.comments[j].annotName === statusElement.id) {\n                        // eslint-disable-next-line\n                        var clonedObj = cloneObject(currentAnnotation.comments[j]);\n                        currentAnnotation.comments[j].state = text;\n                        currentAnnotation.comments[j].stateModel = 'Review';\n                        // eslint-disable-next-line max-len\n                        currentAnnotation.comments[j].review = { state: text, stateModel: 'Review', author: author, modifiedDate: this.getDateAndTime(), annotId: statusElement.id };\n                        // eslint-disable-next-line max-len\n                        this.pdfViewer.annotation.addAction(pageIndex, null, currentAnnotation, 'Status Property Added', '', clonedObj, currentAnnotation.comments[j]);\n                        this.pdfViewer.fireCommentStatusChanged(currentAnnotation.comments[j].annotName, currentAnnotation.comments[j].note, currentAnnotation, currentAnnotation.comments[j].state);\n                    }\n                }\n            }\n            if (!isMeasure) {\n                this.updateUndoRedoCollections(currentAnnotation, pageIndex);\n            }\n            else {\n                this.updateUndoRedoCollections(currentAnnotation, pageIndex, 'shape_measure');\n            }\n        }\n    };\n    /**\n     * @param commentsElement\n     * @param replyElement\n     * @private\n     */\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.modifyCommentDeleteProperty = function (commentsElement, replyElement) {\n        // eslint-disable-next-line\n        var clonedObject;\n        // eslint-disable-next-line\n        var clonedAnnotation;\n        // eslint-disable-next-line\n        var currentAnnotation;\n        // eslint-disable-next-line\n        var commentsParentElement = document.getElementById(commentsElement.id);\n        if (commentsParentElement) {\n            // eslint-disable-next-line\n            var pageNumber = parseInt(commentsParentElement.accessKey.split('_')[0]);\n            var pageIndex = pageNumber - 1;\n            var annotType = commentsElement.getAttribute('name');\n            // eslint-disable-next-line\n            var pageAnnotations = this.getAnnotations(pageIndex, null, annotType);\n            if (pageAnnotations !== null) {\n                for (var i = 0; i < pageAnnotations.length; i++) {\n                    if (pageAnnotations[i].annotName === commentsElement.id) {\n                        currentAnnotation = pageAnnotations[i];\n                    }\n                }\n            }\n            for (var i = 1; i < commentsParentElement.childElementCount; i++) {\n                if (commentsParentElement.childNodes[i].id === replyElement.id) {\n                    clonedAnnotation = cloneObject(currentAnnotation);\n                    var positionValue = (i - 1);\n                    currentAnnotation.comments[positionValue].position = i;\n                    clonedObject = cloneObject(currentAnnotation.comments[positionValue]);\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.fireCommentDelete(currentAnnotation.comments[positionValue].annotName, currentAnnotation.comments[positionValue].note, currentAnnotation);\n                    currentAnnotation.comments.splice(positionValue, 1);\n                    replyElement.remove();\n                }\n            }\n            // eslint-disable-next-line max-len\n            this.pdfViewer.annotation.addAction(pageIndex, null, clonedAnnotation, 'Comments Reply Deleted', '', clonedObject, currentAnnotation);\n            this.updateUndoRedoCollections(currentAnnotation, pageIndex);\n        }\n    };\n    /**\n     * @param annotation\n     * @private\n     */\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.updateOpacityValue = function (annotation) {\n        // eslint-disable-next-line\n        var pageAnnotations = this.getAnnotations(annotation.pageIndex, null, annotation.shapeAnnotationType);\n        this.pdfViewer.annotationModule.isFormFieldShape = false;\n        if (pageAnnotations !== null) {\n            for (var i = 0; i < pageAnnotations.length; i++) {\n                if (pageAnnotations[i].annotName === annotation.annotName) {\n                    pageAnnotations[i].opacity = annotation.opacity;\n                    this.updateUndoRedoCollections(pageAnnotations[i], annotation.pageIndex);\n                }\n            }\n        }\n    };\n    /**\n     * @param annotation\n     * @param isAction\n     * @param undoAnnotation\n     * @param annotation\n     * @param isAction\n     * @param undoAnnotation\n     * @param annotation\n     * @param isAction\n     * @param undoAnnotation\n     * @private\n     */\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.undoAction = function (annotation, isAction, undoAnnotation) {\n        if (isAction === 'Text Property Added') {\n            if (annotation) {\n                // eslint-disable-next-line\n                var commentsMainDiv = document.getElementById(annotation.annotName);\n                if (commentsMainDiv) {\n                    // eslint-disable-next-line\n                    var pageNumber = parseInt(commentsMainDiv.accessKey.split('_')[0]);\n                    var pageIndex = pageNumber - 1;\n                    // eslint-disable-next-line\n                    var clonedAnnotationObject = cloneObject(annotation);\n                    commentsMainDiv.firstChild.firstChild.nextSibling.ej2_instances[0].value = undoAnnotation.note;\n                    var value = undoAnnotation.note;\n                    annotation.note = value;\n                    if (commentsMainDiv.childElementCount === 2) {\n                        commentsMainDiv.lastChild.style.display = 'block';\n                    }\n                    this.updateUndoRedoCollections(annotation, pageIndex);\n                    return clonedAnnotationObject;\n                }\n            }\n        }\n        else if (isAction === 'Comments Property Added') {\n            if (annotation.comments.length > 0) {\n                // eslint-disable-next-line\n                var commentsDiv = document.getElementById(annotation.annotName);\n                var pageIndex = this.pdfViewerBase.currentPageNumber - 1;\n                if (commentsDiv) {\n                    // eslint-disable-next-line\n                    var pageNumber = parseInt(commentsDiv.accessKey.split('_')[0]);\n                    pageIndex = pageNumber - 1;\n                }\n                // eslint-disable-next-line\n                var clonedAnnotationObject = cloneObject(annotation);\n                // eslint-disable-next-line\n                var comment = annotation.comments[annotation.comments.length - 1];\n                // eslint-disable-next-line\n                var removeDiv = document.getElementById(comment.annotName);\n                if (removeDiv) {\n                    removeDiv.remove();\n                }\n                annotation = undoAnnotation;\n                this.updateUndoRedoCollections(annotation, pageIndex);\n                return clonedAnnotationObject;\n            }\n        }\n        else if (isAction === 'Status Property Added') {\n            if (annotation) {\n                // eslint-disable-next-line\n                var commentsDiv = document.getElementById(annotation.annotName);\n                var pageIndex = this.pdfViewerBase.currentPageNumber - 1;\n                if (commentsDiv) {\n                    // eslint-disable-next-line\n                    var pageNumber = parseInt(commentsDiv.accessKey.split('_')[0]);\n                    pageIndex = pageNumber - 1;\n                }\n                // eslint-disable-next-line\n                var clonedAnnotationObject = cloneObject(annotation);\n                if (annotation.annotName === undoAnnotation.annotName) {\n                    annotation.review = undoAnnotation.review;\n                    annotation.state = undoAnnotation.state;\n                    annotation.stateModel = undoAnnotation.stateModel;\n                    this.pdfViewer.annotation.redoCommentsElement.push(annotation);\n                }\n                else {\n                    for (var j = 0; j < annotation.comments.length; j++) {\n                        if (annotation.comments[j].annotName === undoAnnotation.annotName) {\n                            annotation.comments[j].state = undoAnnotation.state;\n                            annotation.comments[j].stateModel = undoAnnotation.stateModel;\n                            annotation.comments[j].review = undoAnnotation.review;\n                            this.pdfViewer.annotation.redoCommentsElement.push(annotation.comments[j]);\n                            break;\n                        }\n                    }\n                }\n                // eslint-disable-next-line\n                var activeDiv = document.getElementById(undoAnnotation.annotName);\n                if (activeDiv.lastChild.id === this.pdfViewer.element.id + 'status' + '_container') {\n                    activeDiv.lastChild.remove();\n                }\n                else {\n                    if (activeDiv.firstChild.lastChild.id === this.pdfViewer.element.id + 'status' + '_container') {\n                        activeDiv.firstChild.lastChild.remove();\n                    }\n                }\n                this.updateUndoRedoCollections(annotation, pageIndex);\n                return clonedAnnotationObject;\n            }\n        }\n        else if (isAction === 'Comments Reply Deleted') {\n            // eslint-disable-next-line\n            var commentsDiv = document.getElementById(annotation.annotName);\n            if (commentsDiv) {\n                // eslint-disable-next-line\n                var pageNumber = parseInt(commentsDiv.accessKey.split('_')[0]);\n                var pageIndex = pageNumber - 1;\n                this.renderComments(undoAnnotation, commentsDiv, true, annotation.annotName);\n                this.pdfViewer.annotation.redoCommentsElement.push(undoAnnotation);\n                this.updateUndoRedoCollections(annotation, pageIndex);\n                return annotation;\n            }\n        }\n        else if (isAction === 'dynamicText Change') {\n            if (annotation) {\n                // eslint-disable-next-line\n                var commentsMainDiv = document.getElementById(annotation.annotName);\n                if (commentsMainDiv) {\n                    // eslint-disable-next-line\n                    commentsMainDiv.firstChild.firstChild.nextSibling.ej2_instances[0].value = undoAnnotation.dynamicText;\n                    return annotation;\n                }\n            }\n        }\n    };\n    /**\n     * @param annotation\n     * @param isAction\n     * @param undoAnnotation\n     * @param annotation\n     * @param isAction\n     * @param undoAnnotation\n     * @private\n     */\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.redoAction = function (annotation, isAction, undoAnnotation) {\n        if (isAction === 'Text Property Added') {\n            // eslint-disable-next-line\n            var commentsMainDiv = document.getElementById(annotation.annotName);\n            if (commentsMainDiv) {\n                // eslint-disable-next-line\n                var pageNumber = parseInt(commentsMainDiv.accessKey.split('_')[0]);\n                var pageIndex = pageNumber - 1;\n                commentsMainDiv.firstChild.firstChild.nextSibling.ej2_instances[0].value = annotation.note;\n                commentsMainDiv.lastChild.style.display = 'block';\n                this.updateUndoRedoCollections(annotation, pageIndex);\n                return annotation;\n            }\n        }\n        else if (isAction === 'Comments Property Added') {\n            // eslint-disable-next-line\n            var comment = annotation.comments[annotation.comments.length - 1];\n            var commentsDiv = document.getElementById(annotation.annotName);\n            if (commentsDiv) {\n                // eslint-disable-next-line\n                var pageNumber = parseInt(commentsDiv.accessKey.split('_')[0]);\n                var pageIndex = pageNumber - 1;\n                this.renderComments(comment, commentsDiv, true, annotation.annotName);\n                this.updateUndoRedoCollections(annotation, pageIndex);\n                return annotation;\n            }\n        }\n        else if (isAction === 'Status Property Added') {\n            // eslint-disable-next-line\n            var poppedItem = this.pdfViewer.annotation.redoCommentsElement.pop();\n            var pageIndex = this.pdfViewerBase.currentPageNumber - 1;\n            if (poppedItem) {\n                // eslint-disable-next-line max-len\n                var statusContainer = createElement('div', { id: this.pdfViewer.element.id + 'status' + '_container', className: 'e-pv-status-container' });\n                // eslint-disable-next-line max-len\n                var statusDiv = createElement('div', { id: this.pdfViewer.element.id + 'status' + '_div', className: 'e-pv-status-div' });\n                var statusSpan = createElement('span', { id: this.pdfViewer.element.id + 'status' + '_icon' });\n                statusDiv.appendChild(statusSpan);\n                statusContainer.appendChild(statusDiv);\n                // eslint-disable-next-line\n                var activeDiv = document.getElementById(annotation.annotName);\n                if (activeDiv) {\n                    // eslint-disable-next-line\n                    var pageNumber = parseInt(activeDiv.accessKey.split('_')[0]);\n                    pageIndex = pageNumber - 1;\n                }\n                // eslint-disable-next-line\n                if (annotation.annotName === poppedItem.annotName) {\n                    this.updateStatusContainer(annotation.state, statusSpan, statusDiv, statusContainer);\n                    for (var i = 0; i < activeDiv.firstChild.children.length; i++) {\n                        if (activeDiv.firstChild.children[i].id === this.pdfViewer.element.id + 'status_container') {\n                            activeDiv.firstChild.children[i].parentElement.removeChild(activeDiv.firstChild.children[i]);\n                        }\n                    }\n                    activeDiv.firstChild.appendChild(statusContainer);\n                }\n                else {\n                    for (var i = 0; i < annotation.comments.length; i++) {\n                        if (annotation.comments[i].annotName === poppedItem.annotName) {\n                            this.updateStatusContainer(annotation.comments[i].state, statusSpan, statusDiv, statusContainer);\n                            var statusElement = document.getElementById(poppedItem.annotName);\n                            for (var i_1 = 0; i_1 < statusElement.children.length; i_1++) {\n                                if (statusElement.children[i_1].id === this.pdfViewer.element.id + 'status_container') {\n                                    statusElement.children[i_1].parentElement.removeChild(statusElement.children[i_1]);\n                                }\n                            }\n                            if (statusElement) {\n                                statusElement.appendChild(statusContainer);\n                            }\n                        }\n                    }\n                }\n            }\n            this.updateUndoRedoCollections(annotation, pageIndex);\n            return annotation;\n        }\n        else if (isAction === 'Comments Reply Deleted') {\n            var pageIndex = this.pdfViewerBase.currentPageNumber - 1;\n            // eslint-disable-next-line\n            var activeDiv = document.getElementById(annotation.annotName);\n            if (activeDiv) {\n                // eslint-disable-next-line\n                var pageNumber = parseInt(activeDiv.accessKey.split('_')[0]);\n                pageIndex = pageNumber - 1;\n            }\n            // eslint-disable-next-line\n            var poppedItem = this.pdfViewer.annotation.redoCommentsElement.pop();\n            // eslint-disable-next-line\n            var clonedAnnotationObject = cloneObject(annotation);\n            for (var i = 0; i < annotation.comments.length; i++) {\n                if (annotation.comments[i].annotName === poppedItem.annotName) {\n                    // eslint-disable-next-line\n                    var replyElement = document.getElementById(poppedItem.annotName);\n                    annotation.comments.splice(i, 1);\n                    replyElement.remove();\n                }\n            }\n            this.updateUndoRedoCollections(annotation, pageIndex);\n            return clonedAnnotationObject;\n        }\n        else if (isAction === 'dynamicText Change') {\n            if (annotation) {\n                // eslint-disable-next-line\n                var commentsMainDiv = document.getElementById(annotation.annotName);\n                if (commentsMainDiv) {\n                    // eslint-disable-next-line\n                    commentsMainDiv.firstChild.firstChild.nextSibling.ej2_instances[0].value = annotation.dynamicText;\n                    return annotation;\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.updateUndoRedoCollections = function (annotationBase, pageNumber, shapeType, action) {\n        var annotationType = (!shapeType) ? annotationBase.shapeAnnotationType : shapeType;\n        if (annotationBase.indent && annotationBase.indent !== '') {\n            annotationType = 'shape_measure';\n        }\n        // eslint-disable-next-line\n        var pageAnnotations = this.getAnnotations(pageNumber, null, annotationType);\n        if (pageAnnotations !== null) {\n            for (var i = 0; i < pageAnnotations.length; i++) {\n                if (annotationBase.annotName === pageAnnotations[i].annotName) {\n                    pageAnnotations[i] = annotationBase;\n                    this.pdfViewer.annotationModule.storeAnnotationCollections(pageAnnotations[i], pageNumber);\n                    if (action) {\n                        pageAnnotations.splice(i, 1);\n                        this.deleteStickyNotesAnnotations(pageAnnotations, pageNumber);\n                    }\n                }\n            }\n            if (annotationType === 'shape_measure') {\n                this.manageAnnotations(pageAnnotations, pageNumber, 'shape_measure');\n            }\n            else {\n                this.manageAnnotations(pageAnnotations, pageNumber, annotationBase.shapeAnnotationType);\n            }\n        }\n    };\n    /**\n     * @param pageIndex\n     * @param type\n     * @private\n     */\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.addAnnotationComments = function (pageIndex, type) {\n        var pageNumber = pageIndex + 1;\n        // eslint-disable-next-line\n        var poppedItem = this.pdfViewer.annotation.undoCommentsElement.pop();\n        if (poppedItem) {\n            this.createCommentsContainer(poppedItem, pageNumber);\n            this.updateUndoRedoCollections(poppedItem, pageIndex, type);\n        }\n    };\n    /**\n     * @param annotation\n     * @param type\n     * @param action\n     * @private\n     */\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.findPosition = function (annotation, type, action) {\n        var index;\n        // eslint-disable-next-line\n        var commentsDiv = document.getElementById(annotation.annotName);\n        if (commentsDiv) {\n            // eslint-disable-next-line\n            var pageNumber = parseInt(commentsDiv.accessKey.split('_')[0]);\n            var pageIndex = pageNumber - 1;\n            // eslint-disable-next-line\n            var parentDiv = commentsDiv.parentElement;\n            for (var i = 0; i < parentDiv.childElementCount; i++) {\n                if (parentDiv.childNodes[i].id === annotation.annotName) {\n                    index = i;\n                }\n            }\n            if (type === 'Stamp' || type === 'Image') {\n                type = 'stamp';\n            }\n            else if (type === 'FreeText') {\n                type = 'freetext';\n            }\n            else if (type === 'StickyNotes' || type === 'sticky') {\n                type = 'sticky';\n            }\n            else if (type === 'Ink') {\n                type = 'ink';\n            }\n            // eslint-disable-next-line\n            var pageAnnotations = this.getAnnotations(pageIndex, null, type);\n            if (pageAnnotations !== null) {\n                for (var i = 0; i < pageAnnotations.length; i++) {\n                    if (pageAnnotations[i].annotName === annotation.annotName) {\n                        // eslint-disable-next-line\n                        var clonedObject = cloneObject(pageAnnotations[i]);\n                        pageAnnotations[i].position = index;\n                        this.pdfViewer.annotation.undoCommentsElement.push(pageAnnotations[i]);\n                        if (type === 'sticky') {\n                            this.updateUndoRedoCollections(clonedObject, pageIndex, null, action);\n                        }\n                    }\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.getAnnotations = function (pageIndex, shapeAnnotations, type) {\n        // eslint-disable-next-line\n        var annotationCollection;\n        if (type === 'Stamp' || type === 'stamp' || type === 'Image') {\n            type = 'stamp';\n        }\n        else if (type === 'StickyNotes' || type === 'sticky') {\n            type = 'sticky';\n        }\n        else if (type === 'textMarkup') {\n            type = 'textMarkup';\n        }\n        else if (type === 'shape' || type === 'Line' || type === 'Radius' || type === 'Rectangle' || type === 'Ellipse'\n            || type === 'Polygon' || type === 'LineWidthArrowHead' || type === 'Square' || type === 'Circle') {\n            type = 'shape';\n        }\n        else if (type === 'FreeText' || type === 'freetext' || type === 'freeText') {\n            type = 'freetext';\n        }\n        else if (type === 'ink' || type === 'Ink') {\n            type = 'ink';\n        }\n        else {\n            type = 'shape_measure';\n        }\n        // eslint-disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_' + type);\n        if (this.pdfViewerBase.isStorageExceed) {\n            storeObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_' + type];\n        }\n        if (storeObject) {\n            var annotObject = JSON.parse(storeObject);\n            var index = this.pdfViewer.annotationModule.getPageCollection(annotObject, pageIndex);\n            if (annotObject[index]) {\n                annotationCollection = annotObject[index].annotations;\n            }\n            else {\n                annotationCollection = shapeAnnotations;\n            }\n        }\n        else {\n            annotationCollection = shapeAnnotations;\n        }\n        return annotationCollection;\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.manageAnnotations = function (pageAnnotations, pageNumber, type) {\n        if (type === 'Stamp' || type === 'stamp') {\n            type = 'stamp';\n        }\n        else if (type === 'Sticky' || type === 'sticky') {\n            type = 'sticky';\n        }\n        else if (type === 'textMarkup') {\n            type = 'textMarkup';\n        }\n        else if (type === 'shape' || type === 'Line' || type === 'Radius' || type === 'Rectangle' || type === 'Ellipse'\n            || type === 'Polygon' || type === 'LineWidthArrowHead' || type === 'Square' || type === 'Circle') {\n            type = 'shape';\n        }\n        else if (type === 'FreeText') {\n            type = 'freetext';\n        }\n        else if (type === 'ink' || type === 'Ink') {\n            type = 'ink';\n        }\n        else {\n            type = 'shape_measure';\n        }\n        // eslint-disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_' + type);\n        if (this.pdfViewerBase.isStorageExceed) {\n            storeObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_' + type];\n        }\n        if (storeObject) {\n            var annotObject = JSON.parse(storeObject);\n            if (!this.pdfViewerBase.isStorageExceed) {\n                window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_' + type);\n            }\n            var index = this.pdfViewer.annotationModule.getPageCollection(annotObject, pageNumber);\n            if (annotObject[index]) {\n                annotObject[index].annotations = pageAnnotations;\n            }\n            var annotationStringified = JSON.stringify(annotObject);\n            if (this.pdfViewerBase.isStorageExceed) {\n                this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_' + type] = annotationStringified;\n            }\n            else {\n                window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_' + type, annotationStringified);\n            }\n        }\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.updateStickyNotes = function (annotation, id) {\n        // eslint-disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_sticky');\n        if (this.pdfViewerBase.isStorageExceed) {\n            storeObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_sticky'];\n        }\n        if (storeObject) {\n            // eslint-disable-next-line\n            var bounds = annotation.bounds;\n            var annotObject = JSON.parse(storeObject);\n            for (var k = 0; k < annotObject.length; k++) {\n                // eslint-disable-next-line\n                var currentAnnot = annotObject[k];\n                for (var j = 0; j < currentAnnot.annotations.length; j++) {\n                    if (annotObject[k].annotations[j].annotName === annotation.annotName) {\n                        if (!this.pdfViewerBase.isStorageExceed) {\n                            window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_sticky');\n                        }\n                        var pageIndex = this.pdfViewer.annotationModule.getPageCollection(annotObject, 0);\n                        if (annotObject[pageIndex]) {\n                            // eslint-disable-next-line max-len\n                            annotObject[k].annotations[j].bounds = { left: bounds.x, top: bounds.y, width: bounds.width, height: bounds.height, right: bounds.right, bottom: bounds.bottom };\n                        }\n                        var annotationStringified = JSON.stringify(annotObject);\n                        if (this.pdfViewerBase.isStorageExceed) {\n                            // eslint-disable-next-line max-len\n                            this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_sticky'] = annotationStringified;\n                        }\n                        else {\n                            window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_sticky', annotationStringified);\n                        }\n                        break;\n                    }\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.saveStickyAnnotations = function () {\n        // eslint-disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_sticky');\n        if (this.pdfViewerBase.isStorageExceed) {\n            storeObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_sticky'];\n        }\n        // eslint-disable-next-line\n        var annotations = new Array();\n        for (var j = 0; j < this.pdfViewerBase.pageCount; j++) {\n            annotations[j] = [];\n        }\n        if (storeObject && !this.pdfViewer.annotationSettings.skipDownload) {\n            var annotationCollection = JSON.parse(storeObject);\n            for (var i = 0; i < annotationCollection.length; i++) {\n                var newArray = [];\n                var pageAnnotationObject = annotationCollection[i];\n                if (pageAnnotationObject) {\n                    for (var z = 0; pageAnnotationObject.annotations.length > z; z++) {\n                        this.pdfViewer.annotationModule.updateModifiedDate(pageAnnotationObject.annotations[z]);\n                        // eslint-disable-next-line max-len\n                        pageAnnotationObject.annotations[z].bounds = JSON.stringify(this.pdfViewer.annotation.getBounds(pageAnnotationObject.annotations[z].bounds, pageAnnotationObject.pageIndex));\n                    }\n                    newArray = pageAnnotationObject.annotations;\n                }\n                annotations[pageAnnotationObject.pageIndex] = newArray;\n            }\n        }\n        return JSON.stringify(annotations);\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.deleteStickyNotesAnnotations = function (pageAnnotations, pageNumber) {\n        // eslint-disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_sticky');\n        if (this.pdfViewerBase.isStorageExceed) {\n            storeObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_sticky'];\n        }\n        if (storeObject) {\n            var annotObject = JSON.parse(storeObject);\n            if (!this.pdfViewerBase.isStorageExceed) {\n                window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_sticky');\n            }\n            var index = this.pdfViewer.annotationModule.getPageCollection(annotObject, pageNumber);\n            if (annotObject[index]) {\n                annotObject[index].annotations = pageAnnotations;\n            }\n            var annotationStringified = JSON.stringify(annotObject);\n            if (this.pdfViewerBase.isStorageExceed) {\n                this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_sticky'] = annotationStringified;\n            }\n            else {\n                window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_sticky', annotationStringified);\n            }\n        }\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.addStickyNotesAnnotations = function (pageNumber, annotationBase) {\n        var pageAnnotations = this.getAnnotations(pageNumber, null, 'sticky');\n        if (pageAnnotations) {\n            pageAnnotations.push(annotationBase);\n        }\n        this.manageAnnotations(pageAnnotations, pageNumber, 'sticky');\n    };\n    /**\n     * @param annotName\n     * @param text\n     * @private\n     */\n    StickyNotesAnnotation.prototype.addTextToComments = function (annotName, text) {\n        // eslint-disable-next-line\n        var commentsMainDiv = document.getElementById(annotName);\n        if (commentsMainDiv) {\n            commentsMainDiv.firstChild.firstChild.nextSibling.ej2_instances[0].value = text;\n        }\n    };\n    /**\n     * @param newAnnotation\n     * @param annotation\n     * @param isCut\n     * @param newAnnotation\n     * @param annotation\n     * @param isCut\n     * @param newAnnotation\n     * @param annotation\n     * @param isCut\n     * @private\n     */\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.updateAnnotationCollection = function (newAnnotation, annotation, isCut) {\n        var type = this.findAnnotationType(annotation);\n        // eslint-disable-next-line\n        var pageAnnotations = this.getAnnotations(annotation.pageIndex, null, type);\n        if (isCut) {\n            pageAnnotations = this.pdfViewer.annotationModule.removedAnnotationCollection;\n        }\n        if (pageAnnotations !== null) {\n            for (var i = 0; i < pageAnnotations.length; i++) {\n                if (isCut && !pageAnnotations[i].annotName) {\n                    pageAnnotations[i].annotName = pageAnnotations[i].annotationId;\n                }\n                if (pageAnnotations[i].annotName === annotation.annotName) {\n                    // eslint-disable-next-line\n                    var updateAnnotation = cloneObject(pageAnnotations[i]);\n                    updateAnnotation.annotName = newAnnotation.annotName;\n                    if (type === 'shape' || type === 'shape_measure' || type === 'freetext' || type === 'ink') {\n                        updateAnnotation.id = newAnnotation.id;\n                    }\n                    if (type === 'stamp') {\n                        updateAnnotation.randomId = newAnnotation.id;\n                    }\n                    if (type === 'ink') {\n                        updateAnnotation.bounds.x = newAnnotation.bounds.x;\n                        updateAnnotation.bounds.y = newAnnotation.bounds.y;\n                    }\n                    else {\n                        updateAnnotation.bounds.left = newAnnotation.bounds.x;\n                        updateAnnotation.bounds.top = newAnnotation.bounds.y;\n                        updateAnnotation.vertexPoints = newAnnotation.vertexPoints;\n                    }\n                    updateAnnotation.note = updateAnnotation.note ? updateAnnotation.note : '';\n                    updateAnnotation.comments = [];\n                    // eslint-disable-next-line max-len\n                    updateAnnotation.review = { state: '', stateModel: '', modifiedDate: updateAnnotation.ModifiedDate, author: updateAnnotation.author };\n                    updateAnnotation.state = '';\n                    updateAnnotation.stateModel = '';\n                    updateAnnotation.pageNumber = annotation.pageIndex;\n                    this.pdfViewer.annotationModule.storeAnnotations(annotation.pageIndex, updateAnnotation, '_annotations_' + type);\n                    this.createCommentsContainer(updateAnnotation, annotation.pageIndex + 1, true);\n                    if (isCut) {\n                        this.pdfViewer.annotationModule.removedAnnotationCollection = [];\n                    }\n                    break;\n                }\n            }\n        }\n    };\n    StickyNotesAnnotation.prototype.findAnnotationType = function (annotation) {\n        var annotType;\n        if (annotation.measureType !== '') {\n            annotType = 'shape_measure';\n        }\n        else {\n            if (annotation.shapeAnnotationType === 'StickyNotes') {\n                annotType = 'sticky';\n            }\n            else if (annotation.shapeAnnotationType === 'Stamp' || annotation.shapeAnnotationType === 'Image') {\n                annotType = 'stamp';\n            }\n            else if (annotation.shapeAnnotationType === 'FreeText') {\n                annotType = 'freetext';\n            }\n            else if (annotation.shapeAnnotationType === 'Ink') {\n                annotType = 'ink';\n            }\n            else {\n                annotType = 'shape';\n            }\n        }\n        return annotType;\n    };\n    StickyNotesAnnotation.prototype.setExistingAnnotationModifiedDate = function (date) {\n        var modifiedDateTime;\n        if (date !== '') {\n            modifiedDateTime = this.setModifiedDate(date);\n        }\n        else {\n            modifiedDateTime = this.setModifiedDate();\n        }\n        return modifiedDateTime;\n    };\n    StickyNotesAnnotation.prototype.updateModifiedTime = function (time, minutes) {\n        var modifiedTime;\n        if (time >= 12) {\n            if (time === 12) {\n                modifiedTime = time + ':' + minutes + ' PM';\n            }\n            else {\n                modifiedTime = (time - 12) + ':' + minutes + ' PM';\n            }\n        }\n        else {\n            modifiedTime = time + ':' + minutes + ' AM';\n        }\n        return modifiedTime;\n    };\n    StickyNotesAnnotation.prototype.setModifiedDate = function (data) {\n        var dateTime;\n        if (data) {\n            dateTime = this.getDateAndTime(data);\n        }\n        else {\n            dateTime = this.getDateAndTime();\n        }\n        var date = new Date(dateTime);\n        var modifiedTime;\n        var modifiedDate = date.toString().split(' ').splice(1, 2).join(' ');\n        if (date.toLocaleTimeString().split(' ').length === 2) {\n            // eslint-disable-next-line max-len\n            modifiedTime = date.toLocaleTimeString().split(' ')[0].split(':').splice(0, 2).join(':') + ' ' + date.toLocaleTimeString().split(' ')[1];\n        }\n        else {\n            // eslint-disable-next-line\n            var time = parseInt(date.toLocaleTimeString().split(':')[0]);\n            var minutes = date.toLocaleTimeString().split(':')[1];\n            modifiedTime = this.updateModifiedTime(time, minutes);\n        }\n        var modifiedDateTime = modifiedDate + ', ' + modifiedTime;\n        return modifiedDateTime;\n    };\n    StickyNotesAnnotation.prototype.convertUTCDateToLocalDate = function (date) {\n        var dateTime = new Date(Date.parse(date));\n        this.globalize = new Internationalization(this.pdfViewer.locale);\n        var timeValue = dateTime.toLocaleTimeString(this.globalize.culture);\n        var newTime;\n        if (!isNullOrUndefined(timeValue.split(' ')[1])) {\n            newTime = (timeValue.split(':').splice(0, 2).join(':')) + ' ' + timeValue.split(' ')[1];\n        }\n        else {\n            newTime = (timeValue.split(':').splice(0, 2).join(':'));\n        }\n        var newDate = dateTime.toString().split(' ').splice(1, 2).join(' ');\n        var dateTimeValue = newDate + ',' + ' ' + newTime;\n        return dateTimeValue;\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.updateModifiedDate = function (titleContainer) {\n        if (titleContainer.id === this.pdfViewer.element.id + '_commenttype_icon') {\n            titleContainer = titleContainer.nextSibling;\n        }\n        var author = titleContainer.textContent.split('-')[0];\n        titleContainer.textContent = author + ' - ' + this.setModifiedDate();\n    };\n    /**\n     * @param annotation\n     * @param isBounds\n     * @param isUndoRedoAction\n     * @private\n     */\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.updateAnnotationModifiedDate = function (annotation, isBounds, isUndoRedoAction) {\n        // eslint-disable-next-line\n        var titleContainer;\n        if (annotation) {\n            // eslint-disable-next-line\n            var commentsContainer = document.getElementById(annotation.annotName);\n            if (commentsContainer) {\n                if (!isBounds) {\n                    titleContainer = commentsContainer.firstChild.firstChild.childNodes[1];\n                    var author = titleContainer.textContent.split('-')[0];\n                    titleContainer.textContent = author + ' - ' + this.setModifiedDate();\n                }\n                else {\n                    var type = this.findAnnotationType(annotation);\n                    // eslint-disable-next-line\n                    var pageAnnotations = this.getAnnotations(annotation.pageIndex, null, type);\n                    if (pageAnnotations != null && annotation) {\n                        for (var i = 0; i < pageAnnotations.length; i++) {\n                            if (annotation.annotName === pageAnnotations[i].annotName) {\n                                // eslint-disable-next-line max-len\n                                if (annotation.bounds.x !== pageAnnotations[i].bounds.left || annotation.bounds.y !== pageAnnotations[i].bounds.top || annotation.bounds.height !== pageAnnotations[i].bounds.height || annotation.bounds.width !== pageAnnotations[i].bounds.width) {\n                                    titleContainer = commentsContainer.firstChild.firstChild.childNodes[1];\n                                    var author = titleContainer.textContent.split('-')[0];\n                                    titleContainer.textContent = author + ' - ' + this.setModifiedDate();\n                                }\n                            }\n                            if (pageAnnotations[i].shapeAnnotationType === 'sticky') {\n                                this.pdfViewer.annotationModule.storeAnnotationCollections(pageAnnotations[i], annotation.pageIndex);\n                            }\n                        }\n                    }\n                }\n                if (isUndoRedoAction) {\n                    titleContainer = commentsContainer.firstChild.firstChild.childNodes[1];\n                    if (annotation.modifiedDate !== undefined) {\n                        var author = titleContainer.textContent.split('-')[0];\n                        titleContainer.textContent = author + ' - ' + this.setExistingAnnotationModifiedDate(annotation.modifiedDate);\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @param annotation\n     * @param pageNumber\n     * @param annotation\n     * @param pageNumber\n     * @private\n     */\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.saveImportedStickyNotesAnnotations = function (annotation, pageNumber) {\n        var annotationObject = null;\n        if (!annotation.Author) {\n            // eslint-disable-next-line max-len\n            annotation.Author = (this.pdfViewer.annotationSettings.author !== 'Guest') ? this.pdfViewer.annotationSettings.author : this.pdfViewer.stickyNotesSettings.author;\n        }\n        // eslint-disable-next-line max-len\n        var isLock = this.pdfViewer.stickyNotesSettings.isLock ? this.pdfViewer.stickyNotesSettings.isLock : this.pdfViewer.annotationSettings.isLock;\n        // eslint-disable-next-line\n        var allowedInteractions = this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);\n        annotationObject = {\n            // eslint-disable-next-line max-len\n            shapeAnnotationType: 'sticky', author: annotation.Author, allowedInteractions: allowedInteractions, modifiedDate: annotation.ModifiedDate, subject: annotation.Subject, note: annotation.Note, opacity: annotation.Opacity, state: annotation.State, stateModel: annotation.StateModel,\n            pathData: '', comments: this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments, annotation, annotation.Author), review: { state: annotation.State, stateModel: annotation.StateModel, modifiedDate: annotation.ModifiedDate, author: annotation.Author }, pageNumber: pageNumber,\n            // eslint-disable-next-line max-len\n            bounds: { left: annotation.Bounds.X, top: annotation.Bounds.Y, width: annotation.Bounds.Width, height: annotation.Bounds.Height, right: annotation.Bounds.Right, bottom: annotation.Bounds.Bottom },\n            annotName: annotation.AnnotName, color: annotation.color,\n            annotationSelectorSettings: this.getSettings(annotation),\n            customData: this.pdfViewer.annotation.getCustomData(annotation),\n            annotationSettings: { isLock: isLock }, isPrint: annotation.IsPrint, isCommentLock: annotation.IsCommentLock\n        };\n        this.pdfViewer.annotationModule.storeAnnotations(pageNumber, annotationObject, '_annotations_sticky');\n    };\n    /**\n     * @param annotation\n     * @param pageNumber\n     * @param annotation\n     * @param pageNumber\n     * @private\n     */\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.updateStickyNotesAnnotationCollections = function (annotation, pageNumber) {\n        // eslint-disable-next-line\n        var annotationObject = null;\n        if (!annotation.Author) {\n            // eslint-disable-next-line max-len\n            annotation.Author = (this.pdfViewer.annotationSettings.author !== 'Guest') ? this.pdfViewer.annotationSettings.author : this.pdfViewer.stickyNotesSettings.author;\n        }\n        // eslint-disable-next-line max-len\n        var isLock = this.pdfViewer.stickyNotesSettings.isLock ? this.pdfViewer.stickyNotesSettings.isLock : this.pdfViewer.annotationSettings.isLock;\n        // eslint-disable-next-line\n        var allowedInteractions = annotation.AllowedInteraction ? annotation.AllowedInteraction : this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);\n        if (annotation.IsLock) {\n            isLock = annotation.isLock;\n        }\n        annotationObject = {\n            // eslint-disable-next-line max-len\n            shapeAnnotationType: 'sticky', author: annotation.Author, allowedInteractions: allowedInteractions, modifiedDate: annotation.ModifiedDate, subject: annotation.Subject, note: annotation.Note, opacity: annotation.Opacity, state: annotation.State, stateModel: annotation.StateModel,\n            pathData: '', comments: this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments, annotation, annotation.Author), review: { state: annotation.State, stateModel: annotation.StateModel, modifiedDate: annotation.ModifiedDate, author: annotation.Author },\n            // eslint-disable-next-line max-len\n            bounds: { left: annotation.Bounds.X, top: annotation.Bounds.Y, width: annotation.Bounds.Width, height: annotation.Bounds.Height, right: annotation.Bounds.Right, bottom: annotation.Bounds.Bottom },\n            annotationId: annotation.AnnotName, color: annotation.color, pageNumber: pageNumber,\n            customData: this.pdfViewer.annotation.getCustomData(annotation),\n            annotationSettings: { isLock: isLock }, isPrint: annotation.IsPrint, isCommentLock: annotation.IsCommentLock\n        };\n        return annotationObject;\n    };\n    /**\n     * @private\n     */\n    StickyNotesAnnotation.prototype.clear = function () {\n        this.commentsCount = 0;\n        this.commentsreplyCount = 0;\n        this.isAccordionContainer = true;\n        this.isEditableElement = false;\n        this.isCreateContextMenu = false;\n        this.isPageCommentsRendered = false;\n        this.isCommentsRendered = false;\n        this.isAnnotationRendered = false;\n        if (this.commentMenuObj) {\n            this.commentMenuObj.destroy();\n        }\n        // eslint-disable-next-line\n        var accordionPages = document.querySelectorAll('.e-pv-accordion-page-container');\n        if (accordionPages) {\n            for (var j = 0; j < accordionPages.length; j++) {\n                // eslint-disable-next-line\n                accordionPages[j].remove();\n            }\n        }\n        if (this.commentsRequestHandler) {\n            this.commentsRequestHandler.clear();\n        }\n    };\n    /**\n     * @private\n     */\n    StickyNotesAnnotation.prototype.getModuleName = function () {\n        return 'StickyNotesAnnotation';\n    };\n    /**\n     * This method used to add annotations with using program.\n     *\n     * @param annotationObject - It describes type of annotation object\n     * @param offset - It describes about the annotation bounds or location\n     * @returns Object\n     * @private\n     */\n    StickyNotesAnnotation.prototype.updateAddAnnotationDetails = function (annotationObject, offset) {\n        //Creating new object if annotationObject is null\n        if (!annotationObject) {\n            annotationObject = { offset: { x: 1, y: 1 }, pageNumber: 0 };\n            offset = annotationObject.offset;\n        }\n        else if (!annotationObject.offset)\n            offset = { x: 1, y: 1 };\n        else\n            offset = annotationObject.offset;\n        //Creating the CurrentDate and Annotation name\n        var currentDateString = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n        var annotationName = this.pdfViewer.annotation.createGUID();\n        //Creating annotation settings\n        var annotationSelectorSettings = this.pdfViewer.stickyNotesSettings.annotationSelectorSettings ? this.pdfViewer.stickyNotesSettings.annotationSelectorSettings : this.pdfViewer.annotationSelectorSettings;\n        var annotationSettings = this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stickyNotesSettings);\n        annotationObject.author = annotationObject.author ? annotationObject.author : this.pdfViewer.annotationModule.updateAnnotationAuthor('sticky', annotationSettings.annotationSubType);\n        var allowedInteractions = this.pdfViewer.stickyNotesSettings.allowedInteractions ? this.pdfViewer.stickyNotesSettings.allowedInteractions : this.pdfViewer.annotationSettings.allowedInteractions;\n        annotationSettings.isLock = annotationObject.isLock ? annotationObject.isLock : annotationSettings.isLock;\n        //Creating Annotation objects with it's proper properties\n        var stickyNotesAnnotation = [];\n        var stickyNotes = {\n            AllowedInteractions: annotationObject.allowedInteractions ? annotationObject.allowedInteractions : allowedInteractions,\n            AnnotName: annotationName,\n            AnnotType: 'sticky',\n            AnnotationFlags: null,\n            AnnotationSelectorSettings: annotationObject.annotationSelectorSettings ? annotationObject.annotationSelectorSettings : annotationSelectorSettings,\n            AnnotationSettings: annotationSettings,\n            Author: annotationObject.author ? annotationObject.author : 'Guest',\n            Bounds: { X: offset.x, Y: offset.y, Width: 30, Height: 30, Left: offset.x, Top: offset.y, Location: { X: offset.x, Y: offset.y }, Size: { Height: 30, IsEmpty: false, Width: 30 } },\n            Color: { IsEmpty: false, B: 51, Blue: 0.2, C: 0, G: 255 },\n            Comments: null,\n            CreatedDate: currentDateString,\n            CustomData: annotationObject.customData ? annotationObject.customData : null,\n            ExistingCustomData: null,\n            Icon: 'Comment',\n            IsCommentLock: false,\n            IsLock: annotationObject.isLock ? annotationObject.isLock : false,\n            IsPrint: annotationObject.isPrint ? annotationObject.isPrint : true,\n            ModifiedDate: '',\n            Note: \"\",\n            Opacity: annotationObject.opacity ? annotationObject.opacity : 1,\n            Reference: null,\n            Size: { IsEmpty: true, Width: 0, Height: 0 },\n            State: \"\",\n            StateModel: \"\",\n            StrokeColor: null,\n            SubType: null,\n            Subject: annotationObject.subject ? annotationObject.subject : 'Sticky Note',\n            Type: null\n        };\n        //Adding the annotation object to an array and return it\n        stickyNotesAnnotation[0] = stickyNotes;\n        return { stickyNotesAnnotation: stickyNotesAnnotation };\n    };\n    /**\n     * @private\n    */\n    StickyNotesAnnotation.prototype.getAnnotationType = function (type) {\n        var annotationType;\n        if (type === 'stamp' || type === 'Stamp') {\n            annotationType = 'stamp';\n        }\n        else if (type === 'shape' || type === 'Line' || type === 'Radius' || type === 'Rectangle' || type === 'Ellipse'\n            || type === 'Polygon' || type === 'LineWidthArrowHead' || type === 'Square' || type === 'Circle') {\n            annotationType = 'shape';\n        }\n        else if (type === 'textMarkup') {\n            annotationType = 'textMarkup';\n        }\n        else if (type === 'freeText' || type === 'FreeText') {\n            annotationType = 'freeText';\n        }\n        else if (type === 'sticky' || type === 'StickyNotes') {\n            annotationType = 'sticky';\n        }\n        else if (type === 'measure' || type === 'shape_measure') {\n            annotationType = 'measure';\n        }\n        else if (type === 'ink' || type === 'Ink') {\n            annotationType = 'ink';\n        }\n        return annotationType;\n    };\n    /**\n     * @private\n    */\n    StickyNotesAnnotation.prototype.getAuthorName = function (annotation, commonDiv) {\n        var author;\n        if (annotation) {\n            var type = annotation.shapeAnnotationType;\n            var annotationType = this.getAnnotationType(type);\n            author = this.pdfViewer.annotationModule.updateAnnotationAuthor(annotationType, type);\n        }\n        else {\n            author = commonDiv.getAttribute('author');\n        }\n        return author;\n    };\n    return StickyNotesAnnotation;\n}());\nexport { StickyNotesAnnotation };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}