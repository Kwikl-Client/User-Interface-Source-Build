{"ast":null,"code":"import { splitArrayCollection, processPathData, getPathString } from '@syncfusion/ej2-drawings';\nimport { Browser, isNullOrUndefined } from '@syncfusion/ej2-base';\nvar InkAnnotation = /** @class */function () {\n  function InkAnnotation(pdfViewer, pdfViewerBase) {\n    // eslint-disable-next-line\n    this.newObject = [];\n    /**\n     * @private\n     */\n    this.outputString = '';\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    this.inkAnnotationindex = [];\n    /**\n     * @private\n     */\n    this.isAddAnnotationProgramatically = false;\n    /**\n     * @private\n     */\n    this.currentPageNumber = '';\n    /**\n     * @private\n     */\n    this.inkAnnotationInitialZoom = 1;\n    /**\n     * @private\n     */\n    this.inkPathDataCollection = [];\n    this.pdfViewer = pdfViewer;\n    this.pdfViewerBase = pdfViewerBase;\n  }\n  /**\n   * @private\n   */\n  InkAnnotation.prototype.drawInk = function () {\n    this.pdfViewerBase.disableTextSelectionMode();\n    this.pdfViewer.tool = 'Ink';\n  };\n  InkAnnotation.prototype.drawInkAnnotation = function (pageNumber) {\n    if (this.pdfViewerBase.isToolbarInkClicked) {\n      this.pdfViewerBase.isInkAdded = true;\n      this.pdfViewer.annotationModule.isFormFieldShape = false;\n      var pageIndex = !isNaN(pageNumber) ? pageNumber : this.pdfViewerBase.currentPageNumber - 1;\n      if (this.outputString && this.outputString !== '' || this.inkPathDataCollection.length > 0) {\n        var currentAnnot = this.addInk(pageIndex);\n        this.pdfViewer.renderDrawing(undefined, pageIndex);\n        this.pdfViewer.clearSelection(pageIndex);\n        this.pdfViewer.select([currentAnnot.id], currentAnnot.annotationSelectorSettings);\n        if (this.pdfViewer.toolbar && this.pdfViewer.toolbar.annotationToolbarModule) {\n          this.pdfViewer.toolbar.annotationToolbarModule.enableSignaturePropertiesTools(true);\n        }\n        if (Browser.isDevice && !this.pdfViewer.enableDesktopMode && this.pdfViewer.enableToolbar && this.pdfViewer.enableAnnotationToolbar) {\n          this.pdfViewer.toolbarModule.annotationToolbarModule.createPropertyTools(\"Ink\");\n        }\n      } else {\n        this.outputString = '';\n        this.newObject = [];\n        this.pdfViewerBase.isToolbarInkClicked = false;\n        this.pdfViewer.tool = '';\n        this.inkPathDataCollection = [];\n      }\n      this.pdfViewerBase.isInkAdded = false;\n    }\n  };\n  /**\n   * @private\n   */\n  InkAnnotation.prototype.updateInkDataWithZoom = function () {\n    var updatedPathData = '';\n    if (this.outputString !== '') {\n      this.inkPathDataCollection.push({\n        pathData: this.outputString,\n        zoomFactor: this.inkAnnotationInitialZoom\n      });\n    }\n    if (this.inkPathDataCollection.length > 0) {\n      //for loop to get the path data from the collection with path zoom factor\n      for (var i = 0; i < this.inkPathDataCollection.length; i++) {\n        updatedPathData += this.updatePathDataWithZoom(this.inkPathDataCollection[i].pathData, this.inkPathDataCollection[i].zoomFactor);\n      }\n    } else {\n      updatedPathData += this.updatePathDataWithZoom(this.outputString, this.inkAnnotationInitialZoom);\n    }\n    return updatedPathData;\n  };\n  InkAnnotation.prototype.updatePathDataWithZoom = function (pathData, pathZoomFactor) {\n    var pathString = '';\n    var zoom = this.pdfViewerBase.getZoomFactor();\n    var collectionData = processPathData(pathData);\n    var csData = splitArrayCollection(collectionData);\n    for (var j = 0; j < csData.length; j++) {\n      var pathValue = csData[j];\n      pathString += pathValue.command + pathValue.x * (zoom / pathZoomFactor) + ',' + pathValue.y * (zoom / pathZoomFactor) + ' ';\n    }\n    return pathString;\n  };\n  /**\n   * @private\n   */\n  InkAnnotation.prototype.storePathData = function () {\n    this.convertToPath(this.newObject);\n    this.newObject = [];\n  };\n  /**\n   * @param position\n   * @param pageIndex\n   * @private\n   */\n  // eslint-disable-next-line\n  InkAnnotation.prototype.drawInkInCanvas = function (position, pageIndex) {\n    // eslint-disable-next-line\n    if (this.currentPageNumber !== '' && parseInt(this.currentPageNumber) !== pageIndex) {\n      // eslint-disable-next-line\n      this.drawInkAnnotation(parseInt(this.currentPageNumber));\n      this.pdfViewerBase.isToolbarInkClicked = true;\n      this.pdfViewer.tool = 'Ink';\n    }\n    var zoom = this.pdfViewerBase.getZoomFactor();\n    this.inkAnnotationInitialZoom = zoom;\n    var ratio = this.pdfViewerBase.getWindowDevicePixelRatio();\n    ;\n    // eslint-disable-next-line\n    var canvas = document.getElementById(this.pdfViewer.element.id + '_annotationCanvas_' + pageIndex);\n    // eslint-disable-next-line\n    var context = canvas.getContext('2d');\n    var thickness = this.pdfViewer.inkAnnotationSettings.thickness ? this.pdfViewer.inkAnnotationSettings.thickness : 1;\n    // eslint-disable-next-line max-len\n    var opacity = this.pdfViewer.inkAnnotationSettings.opacity ? this.pdfViewer.inkAnnotationSettings.opacity : 1;\n    // eslint-disable-next-line max-len\n    var strokeColor = this.pdfViewer.inkAnnotationSettings.strokeColor ? this.pdfViewer.inkAnnotationSettings.strokeColor : '#ff0000';\n    if (!Browser.isDevice || Browser.isDevice && zoom <= 0.7) {\n      context.setTransform(ratio, 0, 0, ratio, 0, 0);\n    }\n    context.beginPath();\n    context.lineJoin = 'round';\n    context.lineCap = 'round';\n    context.moveTo(position.prevPosition.x, position.prevPosition.y);\n    context.lineTo(position.currentPosition.x, position.currentPosition.y);\n    context.lineWidth = thickness * zoom > 1 ? thickness * zoom : thickness;\n    context.strokeStyle = strokeColor;\n    context.globalAlpha = opacity;\n    // After the addition of a TextMarkup annotation, a LineDash value was introduced. To eliminate it, the value was cleared.\n    context.setLineDash([]);\n    context.stroke();\n    // context.lineWidth = 2;\n    context.arc(position.prevPosition.x, position.prevPosition.y, 2 / 2, 0, Math.PI * 2, true);\n    context.closePath();\n    this.pdfViewerBase.prevPosition = position.currentPosition;\n    this.newObject.push(position.currentPosition.x, position.currentPosition.y);\n    this.currentPageNumber = pageIndex.toString();\n  };\n  // eslint-disable-next-line\n  InkAnnotation.prototype.convertToPath = function (newObject) {\n    this.movePath(newObject[0], newObject[1]);\n    this.linePath(newObject[0], newObject[1]);\n    for (var n = 2; n < newObject.length; n = n + 2) {\n      this.linePath(newObject[n], newObject[n + 1]);\n    }\n  };\n  InkAnnotation.prototype.linePath = function (x, y) {\n    if (!isNullOrUndefined(x) && !isNullOrUndefined(y)) {\n      this.outputString += 'L' + x + ',' + y + ' ';\n    }\n  };\n  InkAnnotation.prototype.movePath = function (x, y) {\n    if (!isNullOrUndefined(x) && !isNullOrUndefined(y)) {\n      this.outputString += 'M' + x + ',' + y + ' ';\n    }\n  };\n  /**\n   * @param pageNumber\n   * @private\n   */\n  // eslint-disable-next-line\n  InkAnnotation.prototype.addInk = function (pageNumber) {\n    this.outputString = this.updateInkDataWithZoom();\n    // eslint-disable-next-line\n    var currentBounds = this.calculateInkSize();\n    var zoomvalue = this.pdfViewerBase.getZoomFactor();\n    // eslint-disable-next-line\n    var annot;\n    if (this.pdfViewerBase.isToolbarInkClicked) {\n      var annotationName = this.pdfViewer.annotation.createGUID();\n      var modifiedDate = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n      var pageIndex = !isNaN(pageNumber) ? pageNumber : this.pdfViewerBase.currentPageNumber - 1;\n      var thickness = this.pdfViewer.inkAnnotationSettings.thickness ? this.pdfViewer.inkAnnotationSettings.thickness : 1;\n      // eslint-disable-next-line max-len\n      var opacity = this.pdfViewer.inkAnnotationSettings.opacity ? this.pdfViewer.inkAnnotationSettings.opacity : 1;\n      // eslint-disable-next-line max-len\n      var strokeColor = this.pdfViewer.inkAnnotationSettings.strokeColor ? this.pdfViewer.inkAnnotationSettings.strokeColor : '#ff0000';\n      // eslint-disable-next-line\n      var isLock = this.pdfViewer.inkAnnotationSettings.isLock ? this.pdfViewer.inkAnnotationSettings.isLock : this.pdfViewer.annotationSettings.isLock;\n      var author = this.pdfViewer.annotationSettings.author !== 'Guest' ? this.pdfViewer.annotationSettings.author : this.pdfViewer.inkAnnotationSettings.author ? this.pdfViewer.inkAnnotationSettings.author : 'Guest';\n      var subject = this.pdfViewer.annotationSettings.subject !== \"\" && !isNullOrUndefined(this.pdfViewer.annotationSettings.subject) ? this.pdfViewer.annotationSettings.subject : this.pdfViewer.inkAnnotationSettings.subject ? this.pdfViewer.inkAnnotationSettings.subject : 'Ink';\n      var customData = this.pdfViewer.inkAnnotationSettings.customData;\n      var isPrint = this.pdfViewer.inkAnnotationSettings.isPrint;\n      // eslint-disable-next-line\n      var allowedInteractions = this.pdfViewer.inkAnnotationSettings.allowedInteractions ? this.pdfViewer.inkAnnotationSettings.allowedInteractions : this.pdfViewer.annotationSettings.allowedInteractions;\n      // eslint-disable-next-line\n      var annotationSettings = this.pdfViewer.annotationSettings ? this.pdfViewer.annotationSettings : this.pdfViewer.annotationModule.updateAnnotationSettings(this.pdfViewer.inkAnnotationSettings);\n      annot = {\n        // eslint-disable-next-line max-len\n        id: 'ink' + this.pdfViewerBase.inkCount,\n        bounds: {\n          x: currentBounds.x,\n          y: currentBounds.y,\n          width: currentBounds.width,\n          height: currentBounds.height\n        },\n        pageIndex: pageIndex,\n        data: this.outputString,\n        customData: customData,\n        shapeAnnotationType: 'Ink',\n        opacity: opacity,\n        strokeColor: strokeColor,\n        thickness: thickness,\n        annotName: annotationName,\n        comments: [],\n        author: author,\n        subject: subject,\n        notes: '',\n        review: {\n          state: '',\n          stateModel: '',\n          modifiedDate: modifiedDate,\n          author: author\n        },\n        annotationSelectorSettings: this.getSelector('Ink', ''),\n        modifiedDate: modifiedDate,\n        annotationSettings: annotationSettings,\n        isPrint: isPrint,\n        allowedInteractions: allowedInteractions,\n        isCommentLock: false,\n        isLocked: isLock\n      };\n      var annotation = this.pdfViewer.add(annot);\n      // eslint-disable-next-line\n      var bounds = {\n        left: annot.bounds.x,\n        top: annot.bounds.y,\n        width: annot.bounds.width,\n        height: annot.bounds.height\n      };\n      // eslint-disable-next-line\n      var settings = {\n        opacity: annot.opacity,\n        strokeColor: annot.strokeColor,\n        thickness: annot.thickness,\n        modifiedDate: annot.modifiedDate,\n        width: annot.bounds.width,\n        height: annot.bounds.height,\n        data: this.outputString\n      };\n      this.pdfViewerBase.inkCount++;\n      // eslint-disable-next-line max-len\n      var commentsDivid = this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments('ink', annot.pageIndex + 1, annot.shapeAnnotationType);\n      if (commentsDivid) {\n        document.getElementById(commentsDivid).id = annotationName;\n      }\n      annot.annotName = annotationName;\n      // eslint-disable-next-line max-len\n      this.pdfViewer.annotation.addAction(pageIndex, null, annotation, 'Addition', '', annotation, annotation);\n      this.pdfViewer.annotationModule.storeAnnotations(pageIndex, annot, '_annotations_ink');\n      this.pdfViewer.fireAnnotationAdd(annot.pageIndex, annot.annotName, 'Ink', bounds, settings);\n      if (this.pdfViewerBase.isInkAdded) {\n        this.outputString = '';\n        this.newObject = [];\n        this.inkPathDataCollection = [];\n      }\n      this.pdfViewerBase.isToolbarInkClicked = false;\n      this.pdfViewer.tool = '';\n    }\n    return annot;\n  };\n  /**\n   * @private\n   */\n  InkAnnotation.prototype.setAnnotationMode = function () {\n    if (this.pdfViewerBase.isToolbarInkClicked) {\n      this.drawInkAnnotation();\n    } else {\n      this.pdfViewerBase.isToolbarInkClicked = true;\n      this.drawInk();\n    }\n  };\n  InkAnnotation.prototype.saveInkSignature = function () {\n    // eslint-disable-next-line\n    var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_ink');\n    if (this.pdfViewerBase.isStorageExceed) {\n      storeObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_ink'];\n    }\n    // eslint-disable-next-line\n    var annotations = new Array();\n    for (var j = 0; j < this.pdfViewerBase.pageCount; j++) {\n      annotations[j] = [];\n    }\n    if (storeObject && !this.pdfViewer.annotationSettings.skipDownload) {\n      var annotationCollection = JSON.parse(storeObject);\n      for (var i = 0; i < annotationCollection.length; i++) {\n        // eslint-disable-next-line\n        var newArray = [];\n        var pageAnnotationObject = annotationCollection[i];\n        if (pageAnnotationObject) {\n          for (var z = 0; pageAnnotationObject.annotations.length > z; z++) {\n            this.pdfViewer.annotationModule.updateModifiedDate(pageAnnotationObject.annotations[z]);\n            // eslint-disable-next-line max-len\n            var strokeColorString = pageAnnotationObject.annotations[z].strokeColor;\n            pageAnnotationObject.annotations[z].strokeColor = JSON.stringify(this.pdfViewerBase.signatureModule.getRgbCode(strokeColorString));\n            pageAnnotationObject.annotations[z].bounds = JSON.stringify(this.pdfViewer.annotation.getInkBounds(pageAnnotationObject.annotations[z].bounds, pageAnnotationObject.pageIndex));\n            // eslint-disable-next-line\n            var collectionData = processPathData(pageAnnotationObject.annotations[z].data);\n            // eslint-disable-next-line\n            var csData = splitArrayCollection(collectionData);\n            pageAnnotationObject.annotations[z].data = JSON.stringify(csData);\n          }\n          newArray = pageAnnotationObject.annotations;\n        }\n        annotations[pageAnnotationObject.pageIndex] = newArray;\n      }\n    }\n    return JSON.stringify(annotations);\n  };\n  /**\n   * @param pageNumber\n   * @param annotationBase\n   * @param pageNumber\n   * @param annotationBase\n   * @private\n   */\n  // eslint-disable-next-line\n  InkAnnotation.prototype.addInCollection = function (pageNumber, annotationBase) {\n    if (annotationBase) {\n      // eslint-disable-next-line\n      var pageAnnotations = this.getAnnotations(pageNumber, null);\n      if (pageAnnotations) {\n        pageAnnotations.push(annotationBase);\n      }\n      this.manageInkAnnotations(pageAnnotations, pageNumber);\n    }\n  };\n  // eslint-disable-next-line\n  InkAnnotation.prototype.calculateInkSize = function () {\n    var minimumX = -1;\n    var minimumY = -1;\n    var maximumX = -1;\n    var maximumY = -1;\n    // eslint-disable-next-line\n    var collectionData = processPathData(this.outputString);\n    var zoomvalue = this.pdfViewerBase.getZoomFactor();\n    // eslint-disable-next-line\n    for (var k = 0; k < collectionData.length; k++) {\n      // eslint-disable-next-line\n      var val = collectionData[k];\n      if (minimumX === -1) {\n        // eslint-disable-next-line\n        minimumX = val['x'];\n        // eslint-disable-next-line\n        maximumX = val['x'];\n        // eslint-disable-next-line\n        minimumY = val['y'];\n        // eslint-disable-next-line\n        maximumY = val['y'];\n      } else {\n        // eslint-disable-next-line\n        var point1 = val['x'];\n        // eslint-disable-next-line\n        var point2 = val['y'];\n        if (minimumX >= point1) {\n          minimumX = point1;\n        }\n        if (minimumY >= point2) {\n          minimumY = point2;\n        }\n        if (maximumX <= point1) {\n          maximumX = point1;\n        }\n        if (maximumY <= point2) {\n          maximumY = point2;\n        }\n      }\n    }\n    var newdifferenceX = maximumX - minimumX;\n    var newdifferenceY = maximumY - minimumY;\n    // eslint-disable-next-line max-len\n    return {\n      x: minimumX / zoomvalue,\n      y: minimumY / zoomvalue,\n      width: newdifferenceX / zoomvalue,\n      height: newdifferenceY / zoomvalue\n    };\n  };\n  /**\n   * @param annotationCollection\n   * @param pageIndex\n   * @param isImport\n   * @private\n   */\n  // eslint-disable-next-line\n  InkAnnotation.prototype.renderExistingInkSignature = function (annotationCollection, pageIndex, isImport, isAnnotOrderAction) {\n    var annot;\n    var isinkAnnotationAdded = false;\n    if (!isImport) {\n      for (var p = 0; p < this.inkAnnotationindex.length; p++) {\n        if (this.inkAnnotationindex[p] === pageIndex) {\n          isinkAnnotationAdded = true;\n          break;\n        }\n      }\n    }\n    if (annotationCollection && (!isinkAnnotationAdded || isAnnotOrderAction)) {\n      if (annotationCollection.length > 0 && this.inkAnnotationindex.indexOf(pageIndex) === -1) {\n        this.inkAnnotationindex.push(pageIndex);\n      }\n      for (var n = 0; n < annotationCollection.length; n++) {\n        // eslint-disable-next-line\n        var currentAnnotation = annotationCollection[n];\n        if (currentAnnotation) {\n          // eslint-disable-next-line\n          var data = currentAnnotation.PathData;\n          if (isImport && data) {\n            if (typeof data === 'object' && data.length > 1) {\n              data = getPathString(data);\n            } else {\n              if (currentAnnotation.IsPathData || data.split('command').length <= 1) {\n                data = data;\n              } else {\n                data = getPathString(JSON.parse(data));\n              }\n            }\n          }\n          this.outputString = data;\n          // eslint-disable-next-line\n          var calculateInkPosition = this.calculateInkSize();\n          this.outputString = '';\n          var rectDiff = 0;\n          var rectDifference = 1;\n          // eslint-disable-next-line\n          var bounds = currentAnnotation.Bounds;\n          if (calculateInkPosition) {\n            if (calculateInkPosition.height < 1) {\n              rectDiff = bounds.Height ? bounds.Height : bounds.height;\n              rectDifference = bounds.Height ? bounds.Height : bounds.height;\n            } else if (calculateInkPosition.width < 1) {\n              rectDiff = bounds.Width ? bounds.Width : bounds.width;\n              rectDifference = bounds.Width ? bounds.Width : bounds.width;\n            }\n          }\n          var currentLeft = !isNullOrUndefined(bounds.X) ? bounds.X + rectDiff / 2 : bounds.x + rectDiff / 2;\n          var currentTop = !isNullOrUndefined(bounds.Y) ? bounds.Y + rectDiff / 2 : bounds.y + rectDiff / 2;\n          var currentWidth = bounds.Width ? bounds.Width - (rectDifference - 1) : bounds.width - (rectDifference - 1);\n          var currentHeight = bounds.Height ? bounds.Height - (rectDifference - 1) : bounds.height - (rectDifference - 1);\n          var isLock = currentAnnotation.AnnotationSettings ? currentAnnotation.AnnotationSettings.isLock : false;\n          // eslint-disable-next-line\n          var selectorSettings = currentAnnotation.AnnotationSelectorSettings ? currentAnnotation.AnnotationSelectorSettings : this.getSelector(currentAnnotation, 'Ink');\n          var customData = this.pdfViewer.annotation.getCustomData(currentAnnotation);\n          var isPrint = true;\n          if (currentAnnotation.AnnotationSettings) {\n            isPrint = currentAnnotation.AnnotationSettings.isPrint;\n          } else {\n            isPrint = this.pdfViewer.inkAnnotationSettings.isPrint;\n          }\n          if (currentAnnotation.IsLocked) {\n            isLock = currentAnnotation.IsLocked;\n          }\n          if (currentAnnotation.Subject === 'Highlight' && currentAnnotation.Opacity === 1) {\n            currentAnnotation.Opacity = currentAnnotation.Opacity / 2;\n          }\n          // eslint-disable-next-line max-len\n          currentAnnotation.allowedInteractions = currentAnnotation.AllowedInteractions ? currentAnnotation.AllowedInteractions : this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(currentAnnotation);\n          currentAnnotation.AnnotationSettings = currentAnnotation.AnnotationSettings ? currentAnnotation.AnnotationSettings : this.pdfViewer.annotationModule.updateAnnotationSettings(currentAnnotation);\n          annot = {\n            // eslint-disable-next-line max-len\n            id: 'ink' + this.pdfViewerBase.inkCount,\n            bounds: {\n              x: currentLeft,\n              y: currentTop,\n              width: currentWidth,\n              height: currentHeight\n            },\n            pageIndex: pageIndex,\n            data: data,\n            shapeAnnotationType: 'Ink',\n            opacity: currentAnnotation.Opacity,\n            strokeColor: currentAnnotation.StrokeColor,\n            thickness: currentAnnotation.Thickness,\n            annotName: currentAnnotation.AnnotName,\n            // eslint-disable-next-line max-len\n            comments: this.pdfViewer.annotationModule.getAnnotationComments(currentAnnotation.Comments, currentAnnotation, currentAnnotation.Author),\n            author: currentAnnotation.Author,\n            allowedInteractions: currentAnnotation.allowedInteractions,\n            subject: currentAnnotation.Subject,\n            modifiedDate: currentAnnotation.ModifiedDate,\n            // eslint-disable-next-line max-len\n            review: {\n              state: '',\n              stateModel: '',\n              modifiedDate: currentAnnotation.ModifiedDate,\n              author: currentAnnotation.Author\n            },\n            notes: currentAnnotation.Note,\n            annotationSettings: currentAnnotation.AnnotationSettings,\n            annotationSelectorSettings: selectorSettings,\n            customData: customData,\n            isPrint: isPrint,\n            isCommentLock: currentAnnotation.IsCommentLock\n          };\n          this.pdfViewer.add(annot);\n          // eslint-disable-next-line\n          var canvass = document.getElementById(this.pdfViewer.element.id + '_annotationCanvas_' + currentAnnotation.pageIndex);\n          // eslint-disable-next-line\n          this.pdfViewer.renderDrawing(canvass, annot.pageIndex);\n          this.pdfViewer.annotationModule.storeAnnotations(annot.pageIndex, annot, '_annotations_ink');\n          if (this.isAddAnnotationProgramatically) {\n            var settings = {\n              opacity: annot.opacity,\n              strokeColor: annot.strokeColor,\n              thickness: annot.thickness,\n              modifiedDate: annot.modifiedDate,\n              width: annot.bounds.width,\n              height: annot.bounds.height,\n              data: this.outputString\n            };\n            this.pdfViewer.fireAnnotationAdd(annot.pageIndex, annot.annotName, 'Ink', bounds, settings);\n          }\n          this.pdfViewerBase.currentSignatureAnnot = null;\n          this.pdfViewerBase.signatureCount++;\n          this.pdfViewerBase.inkCount++;\n          // eslint-disable-next-line max-len\n          if (this.pdfViewerBase.navigationPane && this.pdfViewerBase.navigationPane.annotationMenuObj && this.pdfViewer.isSignatureEditable) {\n            // eslint-disable-next-line max-len\n            this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export Annotations')], true);\n            // eslint-disable-next-line max-len\n            this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export XFDF')], true);\n          }\n        }\n      }\n    }\n  };\n  // To save the imported annotations while downloading or exporting for the page above 10 without a scroll (EJ2-63924)\n  /**\n   * @private\n   */\n  InkAnnotation.prototype.saveImportedInkAnnotation = function (annotation, pageNumber) {\n    var annotationObject = null;\n    var currentBounds = annotation.Bounds;\n    var bounds = {\n      x: currentBounds.X,\n      y: currentBounds.Y,\n      width: currentBounds.Width,\n      height: currentBounds.Height\n    };\n    var allowedInteractions = this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);\n    var customData = this.pdfViewer.annotation.getCustomData(annotation);\n    var comments = this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments, annotation, annotation.Author);\n    var review = {\n      state: annotation.State,\n      stateModel: annotation.StateModel,\n      modifiedDate: annotation.ModifiedDate,\n      author: annotation.Author\n    };\n    var annotationSettings = annotation.AnnotationSettings ? annotation.AnnotationSettings : this.pdfViewer.annotationModule.updateAnnotationSettings(annotation);\n    var annotationSelectorSettings = this.getSettings(annotation);\n    var data = annotation.PathData;\n    if (typeof data === 'object' && data.length > 1) {\n      data = getPathString(data);\n    } else {\n      if (annotation.IsPathData || data.split('command').length <= 1) {\n        data = data;\n      } else {\n        data = getPathString(JSON.parse(data));\n      }\n    }\n    annotationObject = {\n      allowedInteractions: allowedInteractions,\n      annotName: annotation.AnnotName,\n      annotationSelectorSettings: annotationSelectorSettings,\n      annotationSettings: annotationSettings,\n      author: annotation.Author,\n      bounds: bounds,\n      customData: customData,\n      comments: comments,\n      data: data,\n      id: \"Ink\",\n      isCommentLock: annotation.IsCommentLock,\n      isLocked: annotation.IsLocked,\n      isPrint: annotation.IsPrint,\n      modifiedDate: annotation.ModifiedDate,\n      note: annotation.Note,\n      opacity: annotation.Opacity,\n      pageIndex: pageNumber,\n      review: review,\n      shapeAnnotationType: annotation.AnnotationType,\n      strokeColor: annotation.StrokeColor,\n      subject: annotation.Subject,\n      thickness: annotation.Thickness\n    };\n    this.pdfViewer.annotationModule.storeAnnotations(pageNumber, annotationObject, '_annotations_ink');\n  };\n  // To get the annotation selector settings \n  InkAnnotation.prototype.getSettings = function (annotation) {\n    var selector = this.pdfViewer.annotationSelectorSettings;\n    if (annotation.AnnotationSelectorSettings) {\n      selector = annotation.AnnotationSelectorSettings;\n    } else {\n      selector = this.getSelector(annotation.ShapeAnnotationType, annotation.Subject);\n    }\n    return selector;\n  };\n  /**\n   * @param pageNumber\n   * @param annotations\n   * @private\n   */\n  // eslint-disable-next-line\n  InkAnnotation.prototype.storeInkSignatureData = function (pageNumber, annotations) {\n    // eslint-disable-next-line max-len\n    this.pdfViewer.annotation.addAction(annotations.pageIndex, null, annotations, 'Addition', '', annotations, annotations);\n    // eslint-disable-next-line\n    var annotation = null;\n    var left = annotations.bounds.left ? annotations.bounds.left : annotations.bounds.x;\n    var top = annotations.bounds.top ? annotations.bounds.top : annotations.bounds.y;\n    if (annotations.wrapper && annotations.wrapper.bounds) {\n      left = annotations.wrapper.bounds.left;\n      top = annotations.wrapper.bounds.top;\n    }\n    annotation = {\n      // eslint-disable-next-line max-len\n      id: annotations.id,\n      bounds: {\n        x: left,\n        y: top,\n        width: annotations.bounds.width,\n        height: annotations.bounds.height\n      },\n      // eslint-disable-next-line max-len\n      shapeAnnotationType: 'Ink',\n      opacity: annotations.opacity,\n      thickness: annotations.thickness,\n      strokeColor: annotations.strokeColor,\n      pageIndex: annotations.pageIndex,\n      data: annotations.data,\n      annotName: annotations.annotName,\n      // eslint-disable-next-line max-len\n      comments: annotations.comments,\n      author: annotations.author,\n      subject: annotations.subject,\n      modifiedDate: annotations.modifiedDate,\n      // eslint-disable-next-line max-len\n      review: {\n        state: '',\n        stateModel: '',\n        modifiedDate: annotations.modifiedDate,\n        author: annotations.author\n      },\n      notes: annotations.notes,\n      annotationSelectorSettings: this.getSelector(annotations, 'Ink'),\n      isCommentLock: annotations.isCommentLock\n    };\n    // eslint-disable-next-line\n    var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_ink');\n    var index = 0;\n    if (!storeObject) {\n      var shapeAnnotation = {\n        pageIndex: pageNumber,\n        annotations: []\n      };\n      shapeAnnotation.annotations.push(annotation);\n      index = shapeAnnotation.annotations.indexOf(annotation);\n      var annotationCollection = [];\n      annotationCollection.push(shapeAnnotation);\n      var annotationStringified = JSON.stringify(annotationCollection);\n      window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_ink', annotationStringified);\n    } else {\n      var annotObject = JSON.parse(storeObject);\n      window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_ink');\n      var pageIndex = this.pdfViewer.annotationModule.getPageCollection(annotObject, pageNumber);\n      if (annotObject[pageIndex]) {\n        annotObject[pageIndex].annotations.push(annotation);\n        index = annotObject[pageIndex].annotations.indexOf(annotation);\n      } else {\n        var markupAnnotation = {\n          pageIndex: pageNumber,\n          annotations: []\n        };\n        markupAnnotation.annotations.push(annotation);\n        index = markupAnnotation.annotations.indexOf(annotation);\n        annotObject.push(markupAnnotation);\n      }\n      var annotationStringified = JSON.stringify(annotObject);\n      window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_ink', annotationStringified);\n    }\n  };\n  InkAnnotation.prototype.getSelector = function (type, subject) {\n    var selector = this.pdfViewer.annotationSelectorSettings;\n    if (type === 'Ink' && this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings) {\n      selector = this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings;\n    }\n    return selector;\n  };\n  // eslint-disable-next-line\n  InkAnnotation.prototype.getAnnotations = function (pageIndex, shapeAnnotations) {\n    // eslint-disable-next-line\n    var annotationCollection;\n    // eslint-disable-next-line\n    var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_ink');\n    if (storeObject) {\n      var annotObject = JSON.parse(storeObject);\n      var index = this.pdfViewer.annotationModule.getPageCollection(annotObject, pageIndex);\n      if (annotObject[index]) {\n        annotationCollection = annotObject[index].annotations;\n      } else {\n        annotationCollection = shapeAnnotations;\n      }\n    } else {\n      annotationCollection = shapeAnnotations;\n    }\n    return annotationCollection;\n  };\n  /**\n   * @param property\n   * @param pageNumber\n   * @param annotationBase\n   * @param property\n   * @param pageNumber\n   * @param annotationBase\n   * @private\n   */\n  // eslint-disable-next-line\n  InkAnnotation.prototype.modifySignatureInkCollection = function (property, pageNumber, annotationBase) {\n    if (!isNullOrUndefined(annotationBase.formFieldAnnotationType) && annotationBase.formFieldAnnotationType !== \"\") {\n      this.pdfViewer.annotationModule.isFormFieldShape = true;\n    } else {\n      this.pdfViewer.annotationModule.isFormFieldShape = false;\n    }\n    this.pdfViewerBase.updateDocumentEditedProperty(true);\n    // eslint-disable-next-line\n    var currentAnnotObject = null;\n    // eslint-disable-next-line\n    var pageAnnotations = this.getAnnotations(pageNumber, null);\n    if (pageAnnotations != null && annotationBase) {\n      for (var i = 0; i < pageAnnotations.length; i++) {\n        if (annotationBase.id === pageAnnotations[i].id) {\n          if (property === 'bounds') {\n            // eslint-disable-next-line max-len\n            pageAnnotations[i].bounds = {\n              x: annotationBase.wrapper.bounds.left,\n              y: annotationBase.wrapper.bounds.top,\n              width: annotationBase.bounds.width,\n              height: annotationBase.bounds.height\n            };\n          } else if (property === 'stroke') {\n            pageAnnotations[i].strokeColor = annotationBase.wrapper.children[0].style.strokeColor;\n          } else if (property === 'opacity') {\n            pageAnnotations[i].opacity = annotationBase.wrapper.children[0].style.opacity;\n          } else if (property === 'thickness') {\n            pageAnnotations[i].thickness = annotationBase.wrapper.children[0].style.strokeWidth;\n          } else if (property === 'notes') {\n            pageAnnotations[i].notes = annotationBase.notes;\n          } else if (property === 'delete') {\n            currentAnnotObject = pageAnnotations.splice(i, 1)[0];\n            break;\n          }\n          pageAnnotations[i].modifiedDate = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n          this.pdfViewer.annotationModule.storeAnnotationCollections(pageAnnotations[i], pageNumber);\n        }\n      }\n      this.manageInkAnnotations(pageAnnotations, pageNumber);\n    }\n    return currentAnnotObject;\n  };\n  // eslint-disable-next-line\n  InkAnnotation.prototype.manageInkAnnotations = function (pageAnnotations, pageNumber) {\n    // eslint-disable-next-line\n    var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_ink');\n    if (storeObject) {\n      var annotObject = JSON.parse(storeObject);\n      window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_ink');\n      var index = this.pdfViewer.annotationModule.getPageCollection(annotObject, pageNumber);\n      if (annotObject[index]) {\n        annotObject[index].annotations = pageAnnotations;\n      }\n      var annotationStringified = JSON.stringify(annotObject);\n      window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_ink', annotationStringified);\n    }\n  };\n  /**\n   * @param currentAnnotation\n   * @param pageIndex\n   * @param isImport\n   * @param currentAnnotation\n   * @param pageIndex\n   * @param isImport\n   * @private\n   */\n  // eslint-disable-next-line\n  InkAnnotation.prototype.updateInkCollections = function (currentAnnotation, pageIndex, isImport) {\n    // eslint-disable-next-line\n    var annot;\n    // eslint-disable-next-line\n    if (currentAnnotation) {\n      // eslint-disable-next-line\n      var bounds = currentAnnotation.Bounds;\n      var currentLeft = bounds.X;\n      var currentTop = bounds.Y;\n      var currentWidth = bounds.Width;\n      var currentHeight = bounds.Height;\n      var customData = currentAnnotation.customData;\n      var isPrint = currentAnnotation.isPrint;\n      // eslint-disable-next-line\n      currentAnnotation.AllowedInteractions = currentAnnotation.AllowedInteractions ? currentAnnotation.AllowedInteractions : this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(currentAnnotation);\n      // eslint-disable-next-line\n      currentAnnotation.AnnotationSettings = currentAnnotation.AnnotationSettings ? currentAnnotation.AnnotationSettings : this.pdfViewer.inkAnnotationSettings ? this.pdfViewer.inkAnnotationSettings : this.pdfViewer.annotationSettings;\n      if (currentAnnotation.IsLocked) {\n        currentAnnotation.AnnotationSettings.isLock = currentAnnotation.IsLocked;\n      }\n      // eslint-disable-next-line\n      var data = currentAnnotation.PathData;\n      if (isImport) {\n        data = getPathString(JSON.parse(currentAnnotation.PathData));\n      }\n      annot = {\n        // eslint-disable-next-line max-len\n        id: 'ink' + this.pdfViewerBase.signatureCount,\n        bounds: {\n          x: currentLeft,\n          y: currentTop,\n          width: currentWidth,\n          height: currentHeight\n        },\n        pageIndex: pageIndex,\n        data: data,\n        // eslint-disable-next-line max-len\n        shapeAnnotationType: 'Ink',\n        opacity: currentAnnotation.Opacity,\n        strokeColor: currentAnnotation.StrokeColor,\n        thickness: currentAnnotation.Thickness,\n        annotationId: currentAnnotation.AnnotName,\n        // eslint-disable-next-line max-len\n        customData: customData,\n        comments: this.pdfViewer.annotationModule.getAnnotationComments(currentAnnotation.Comments, currentAnnotation, currentAnnotation.Author),\n        author: currentAnnotation.Author,\n        allowedInteractions: currentAnnotation.AllowedInteractions,\n        subject: currentAnnotation.Subject,\n        modifiedDate: currentAnnotation.ModifiedDate,\n        review: {\n          state: '',\n          stateModel: '',\n          modifiedDate: currentAnnotation.ModifiedDate,\n          author: currentAnnotation.Author\n        },\n        notes: currentAnnotation.Note,\n        isPrint: isPrint,\n        isCommentLock: currentAnnotation.IsCommentLock,\n        annotationSettings: currentAnnotation.AnnotationSettings,\n        isLocked: currentAnnotation.AnnotationSettings.isLock\n      };\n      return annot;\n    }\n  };\n  /**\n   * This method used to add annotations with using program.\n   *\n   * @param annotationObject - It describes type of annotation object\n   * @param offset - It describes about the annotation bounds or location\n   * @param pageNumber - It describes about the annotation page number\n   * @returns Object\n   * @private\n   */\n  InkAnnotation.prototype.updateAddAnnotationDetails = function (annotationObject, offset, pageNumber) {\n    //Creating new object if annotationObject is null\n    if (!annotationObject) {\n      annotationObject = {\n        offset: {\n          x: 10,\n          y: 10\n        },\n        pageNumber: 0,\n        width: undefined,\n        height: undefined\n      };\n      offset = annotationObject.offset;\n    } else if (!annotationObject.offset) offset = {\n      x: 10,\n      y: 10\n    };else offset = annotationObject.offset;\n    //Creating the CurrentDate and Annotation name\n    var currentDateString = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n    var annotationName = this.pdfViewer.annotation.createGUID();\n    //Creating annotation settings\n    var annotationSelectorSettings = this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings ? this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings : this.pdfViewer.annotationSelectorSettings;\n    var annotationSettings = this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.inkAnnotationSettings);\n    annotationObject.author = annotationObject.author ? annotationObject.author : this.pdfViewer.annotationModule.updateAnnotationAuthor('ink', annotationSettings.AnnotationType);\n    var allowedInteractions = this.pdfViewer.inkAnnotationSettings.allowedInteractions ? this.pdfViewer.inkAnnotationSettings.allowedInteractions : this.pdfViewer.annotationSettings.allowedInteractions;\n    annotationSettings.isLock = annotationObject.isLock ? annotationObject.isLock : annotationSettings.isLock;\n    annotationObject.width = annotationObject.width ? annotationObject.width : 150;\n    annotationObject.height = annotationObject.height ? annotationObject.height : 60;\n    var pathData = annotationObject.path ? annotationObject.path : '';\n    if (!isNullOrUndefined(pathData)) {\n      // Check whether the given path of the ink annotation is starts with Move path or Line path. \n      if (pathData[0] === 'M' || pathData[0] === 'L') {\n        var collectionData = processPathData(pathData);\n        var csData = splitArrayCollection(collectionData);\n        pathData = JSON.stringify(csData);\n      } else {\n        pathData = getPathString(JSON.parse(pathData));\n      }\n    }\n    annotationObject.path = pathData;\n    //Creating Annotation objects with it's proper properties\n    var signatureInkAnnotation = [];\n    var ink = {\n      AllowedInteractions: annotationObject.allowedInteractions ? annotationObject.allowedInteractions : allowedInteractions,\n      AnnotName: annotationName,\n      AnnotType: 'ink',\n      AnnotationFlags: null,\n      AnnotationSelectorSettings: annotationObject.annotationSelectorSettings ? annotationObject.annotationSelectorSettings : annotationSelectorSettings,\n      AnnotationSettings: annotationSettings,\n      AnnotationType: 'Ink',\n      Author: annotationObject.author ? annotationObject.author : 'Guest',\n      Bounds: {\n        X: offset.x,\n        Y: offset.y,\n        Width: annotationObject.width,\n        Height: annotationObject.height,\n        Left: offset.x,\n        Top: offset.y,\n        Location: {\n          X: offset.x,\n          Y: offset.y\n        },\n        Size: {\n          Height: annotationObject.height,\n          IsEmpty: false,\n          Width: annotationObject.width\n        }\n      },\n      Comments: null,\n      CreatedDate: currentDateString,\n      CustomData: annotationObject.customData ? annotationObject.customData : null,\n      ExistingCustomData: null,\n      IsCommentLock: false,\n      IsLock: annotationObject.isLock ? annotationObject.isLock : false,\n      IsPrint: annotationObject.isPrint ? annotationObject.isPrint : true,\n      ModifiedDate: '',\n      Note: '',\n      Opacity: annotationObject.opacity ? annotationObject.opacity : 1,\n      PathData: annotationObject.path,\n      PageNumber: pageNumber,\n      State: '',\n      StateModel: '',\n      StrokeColor: annotationObject.strokeColor ? annotationObject.strokeColor : 'rgba(255,0,0,1)',\n      SubType: null,\n      Subject: annotationObject.subject ? annotationObject.subject : 'Ink',\n      Type: null,\n      Thickness: annotationObject.thickness ? annotationObject.thickness : 1\n    };\n    //Adding the annotation object to an array and return it\n    signatureInkAnnotation[0] = ink;\n    return {\n      signatureInkAnnotation: signatureInkAnnotation\n    };\n  };\n  return InkAnnotation;\n}();\nexport { InkAnnotation };","map":{"version":3,"names":["splitArrayCollection","processPathData","getPathString","Browser","isNullOrUndefined","InkAnnotation","pdfViewer","pdfViewerBase","newObject","outputString","inkAnnotationindex","isAddAnnotationProgramatically","currentPageNumber","inkAnnotationInitialZoom","inkPathDataCollection","prototype","drawInk","disableTextSelectionMode","tool","drawInkAnnotation","pageNumber","isToolbarInkClicked","isInkAdded","annotationModule","isFormFieldShape","pageIndex","isNaN","length","currentAnnot","addInk","renderDrawing","undefined","clearSelection","select","id","annotationSelectorSettings","toolbar","annotationToolbarModule","enableSignaturePropertiesTools","isDevice","enableDesktopMode","enableToolbar","enableAnnotationToolbar","toolbarModule","createPropertyTools","updateInkDataWithZoom","updatedPathData","push","pathData","zoomFactor","i","updatePathDataWithZoom","pathZoomFactor","pathString","zoom","getZoomFactor","collectionData","csData","j","pathValue","command","x","y","storePathData","convertToPath","drawInkInCanvas","position","parseInt","ratio","getWindowDevicePixelRatio","canvas","document","getElementById","element","context","getContext","thickness","inkAnnotationSettings","opacity","strokeColor","setTransform","beginPath","lineJoin","lineCap","moveTo","prevPosition","lineTo","currentPosition","lineWidth","strokeStyle","globalAlpha","setLineDash","stroke","arc","Math","PI","closePath","toString","movePath","linePath","n","currentBounds","calculateInkSize","zoomvalue","annot","annotationName","annotation","createGUID","modifiedDate","stickyNotesAnnotationModule","getDateAndTime","isLock","annotationSettings","author","subject","customData","isPrint","allowedInteractions","updateAnnotationSettings","inkCount","bounds","width","height","data","shapeAnnotationType","annotName","comments","notes","review","state","stateModel","getSelector","isCommentLock","isLocked","add","left","top","settings","commentsDivid","addComments","addAction","storeAnnotations","fireAnnotationAdd","setAnnotationMode","saveInkSignature","storeObject","window","sessionStorage","getItem","documentId","isStorageExceed","annotationStorage","annotations","Array","pageCount","skipDownload","annotationCollection","JSON","parse","newArray","pageAnnotationObject","z","updateModifiedDate","strokeColorString","stringify","signatureModule","getRgbCode","getInkBounds","addInCollection","annotationBase","pageAnnotations","getAnnotations","manageInkAnnotations","minimumX","minimumY","maximumX","maximumY","k","val","point1","point2","newdifferenceX","newdifferenceY","renderExistingInkSignature","isImport","isAnnotOrderAction","isinkAnnotationAdded","p","indexOf","currentAnnotation","PathData","IsPathData","split","calculateInkPosition","rectDiff","rectDifference","Bounds","Height","Width","currentLeft","X","currentTop","Y","currentWidth","currentHeight","AnnotationSettings","selectorSettings","AnnotationSelectorSettings","getCustomData","IsLocked","Subject","Opacity","AllowedInteractions","updateAnnotationAllowedInteractions","StrokeColor","Thickness","AnnotName","getAnnotationComments","Comments","Author","ModifiedDate","Note","IsCommentLock","canvass","currentSignatureAnnot","signatureCount","navigationPane","annotationMenuObj","isSignatureEditable","enableItems","localeObj","getConstant","saveImportedInkAnnotation","annotationObject","State","StateModel","getSettings","IsPrint","note","AnnotationType","selector","ShapeAnnotationType","storeInkSignatureData","wrapper","index","shapeAnnotation","annotationStringified","setItem","annotObject","removeItem","getPageCollection","markupAnnotation","type","shapeAnnotations","modifySignatureInkCollection","property","formFieldAnnotationType","updateDocumentEditedProperty","currentAnnotObject","children","style","strokeWidth","splice","storeAnnotationCollections","updateInkCollections","annotationId","updateAddAnnotationDetails","offset","currentDateString","updateSettings","updateAnnotationAuthor","path","signatureInkAnnotation","ink","AnnotType","AnnotationFlags","Left","Top","Location","Size","IsEmpty","CreatedDate","CustomData","ExistingCustomData","IsLock","PageNumber","SubType","Type"],"sources":["/Users/saleem/Desktop/KClient/Web App/Ver_3.6/User Interface/website_Source files/node_modules/@syncfusion/ej2-pdfviewer/src/pdfviewer/annotation/ink-annotation.js"],"sourcesContent":["import { splitArrayCollection, processPathData, getPathString } from '@syncfusion/ej2-drawings';\nimport { Browser, isNullOrUndefined } from '@syncfusion/ej2-base';\nvar InkAnnotation = /** @class */ (function () {\n    function InkAnnotation(pdfViewer, pdfViewerBase) {\n        // eslint-disable-next-line\n        this.newObject = [];\n        /**\n         * @private\n         */\n        this.outputString = '';\n        /**\n         * @private\n         */\n        // eslint-disable-next-line\n        this.inkAnnotationindex = [];\n        /**\n         * @private\n         */\n        this.isAddAnnotationProgramatically = false;\n        /**\n         * @private\n         */\n        this.currentPageNumber = '';\n        /**\n         * @private\n         */\n        this.inkAnnotationInitialZoom = 1;\n        /**\n         * @private\n         */\n        this.inkPathDataCollection = [];\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    InkAnnotation.prototype.drawInk = function () {\n        this.pdfViewerBase.disableTextSelectionMode();\n        this.pdfViewer.tool = 'Ink';\n    };\n    InkAnnotation.prototype.drawInkAnnotation = function (pageNumber) {\n        if (this.pdfViewerBase.isToolbarInkClicked) {\n            this.pdfViewerBase.isInkAdded = true;\n            this.pdfViewer.annotationModule.isFormFieldShape = false;\n            var pageIndex = !isNaN(pageNumber) ? pageNumber : this.pdfViewerBase.currentPageNumber - 1;\n            if ((this.outputString && this.outputString !== '') || this.inkPathDataCollection.length > 0) {\n                var currentAnnot = this.addInk(pageIndex);\n                this.pdfViewer.renderDrawing(undefined, pageIndex);\n                this.pdfViewer.clearSelection(pageIndex);\n                this.pdfViewer.select([currentAnnot.id], currentAnnot.annotationSelectorSettings);\n                if (this.pdfViewer.toolbar && this.pdfViewer.toolbar.annotationToolbarModule) {\n                    this.pdfViewer.toolbar.annotationToolbarModule.enableSignaturePropertiesTools(true);\n                }\n                if (Browser.isDevice && !this.pdfViewer.enableDesktopMode && this.pdfViewer.enableToolbar && this.pdfViewer.enableAnnotationToolbar) {\n                    this.pdfViewer.toolbarModule.annotationToolbarModule.createPropertyTools(\"Ink\");\n                }\n            }\n            else {\n                this.outputString = '';\n                this.newObject = [];\n                this.pdfViewerBase.isToolbarInkClicked = false;\n                this.pdfViewer.tool = '';\n                this.inkPathDataCollection = [];\n            }\n            this.pdfViewerBase.isInkAdded = false;\n        }\n    };\n    /**\n     * @private\n     */\n    InkAnnotation.prototype.updateInkDataWithZoom = function () {\n        var updatedPathData = '';\n        if (this.outputString !== '') {\n            this.inkPathDataCollection.push({ pathData: this.outputString, zoomFactor: this.inkAnnotationInitialZoom });\n        }\n        if (this.inkPathDataCollection.length > 0) {\n            //for loop to get the path data from the collection with path zoom factor\n            for (var i = 0; i < this.inkPathDataCollection.length; i++) {\n                updatedPathData += this.updatePathDataWithZoom(this.inkPathDataCollection[i].pathData, this.inkPathDataCollection[i].zoomFactor);\n            }\n        }\n        else {\n            updatedPathData += this.updatePathDataWithZoom(this.outputString, this.inkAnnotationInitialZoom);\n        }\n        return updatedPathData;\n    };\n    InkAnnotation.prototype.updatePathDataWithZoom = function (pathData, pathZoomFactor) {\n        var pathString = '';\n        var zoom = this.pdfViewerBase.getZoomFactor();\n        var collectionData = processPathData(pathData);\n        var csData = splitArrayCollection(collectionData);\n        for (var j = 0; j < csData.length; j++) {\n            var pathValue = csData[j];\n            pathString += pathValue.command + pathValue.x * (zoom / pathZoomFactor) + ',' + pathValue.y * (zoom / pathZoomFactor) + ' ';\n        }\n        return pathString;\n    };\n    /**\n     * @private\n     */\n    InkAnnotation.prototype.storePathData = function () {\n        this.convertToPath(this.newObject);\n        this.newObject = [];\n    };\n    /**\n     * @param position\n     * @param pageIndex\n     * @private\n     */\n    // eslint-disable-next-line\n    InkAnnotation.prototype.drawInkInCanvas = function (position, pageIndex) {\n        // eslint-disable-next-line\n        if (this.currentPageNumber !== '' && parseInt(this.currentPageNumber) !== pageIndex) {\n            // eslint-disable-next-line\n            this.drawInkAnnotation(parseInt(this.currentPageNumber));\n            this.pdfViewerBase.isToolbarInkClicked = true;\n            this.pdfViewer.tool = 'Ink';\n        }\n        var zoom = this.pdfViewerBase.getZoomFactor();\n        this.inkAnnotationInitialZoom = zoom;\n        var ratio = this.pdfViewerBase.getWindowDevicePixelRatio();\n        ;\n        // eslint-disable-next-line\n        var canvas = document.getElementById(this.pdfViewer.element.id + '_annotationCanvas_' + pageIndex);\n        // eslint-disable-next-line\n        var context = canvas.getContext('2d');\n        var thickness = this.pdfViewer.inkAnnotationSettings.thickness ? this.pdfViewer.inkAnnotationSettings.thickness : 1;\n        // eslint-disable-next-line max-len\n        var opacity = this.pdfViewer.inkAnnotationSettings.opacity ? this.pdfViewer.inkAnnotationSettings.opacity : 1;\n        // eslint-disable-next-line max-len\n        var strokeColor = this.pdfViewer.inkAnnotationSettings.strokeColor ? this.pdfViewer.inkAnnotationSettings.strokeColor : '#ff0000';\n        if (!Browser.isDevice || (Browser.isDevice && zoom <= 0.7)) {\n            context.setTransform(ratio, 0, 0, ratio, 0, 0);\n        }\n        context.beginPath();\n        context.lineJoin = 'round';\n        context.lineCap = 'round';\n        context.moveTo(position.prevPosition.x, position.prevPosition.y);\n        context.lineTo(position.currentPosition.x, position.currentPosition.y);\n        context.lineWidth = thickness * zoom > 1 ? thickness * zoom : thickness;\n        context.strokeStyle = strokeColor;\n        context.globalAlpha = opacity;\n        // After the addition of a TextMarkup annotation, a LineDash value was introduced. To eliminate it, the value was cleared.\n        context.setLineDash([]);\n        context.stroke();\n        // context.lineWidth = 2;\n        context.arc(position.prevPosition.x, position.prevPosition.y, 2 / 2, 0, Math.PI * 2, true);\n        context.closePath();\n        this.pdfViewerBase.prevPosition = position.currentPosition;\n        this.newObject.push(position.currentPosition.x, position.currentPosition.y);\n        this.currentPageNumber = pageIndex.toString();\n    };\n    // eslint-disable-next-line\n    InkAnnotation.prototype.convertToPath = function (newObject) {\n        this.movePath(newObject[0], newObject[1]);\n        this.linePath(newObject[0], newObject[1]);\n        for (var n = 2; n < newObject.length; n = n + 2) {\n            this.linePath(newObject[n], newObject[n + 1]);\n        }\n    };\n    InkAnnotation.prototype.linePath = function (x, y) {\n        if (!isNullOrUndefined(x) && !isNullOrUndefined(y)) {\n            this.outputString += 'L' + x + ',' + y + ' ';\n        }\n    };\n    InkAnnotation.prototype.movePath = function (x, y) {\n        if (!isNullOrUndefined(x) && !isNullOrUndefined(y)) {\n            this.outputString += 'M' + x + ',' + y + ' ';\n        }\n    };\n    /**\n     * @param pageNumber\n     * @private\n     */\n    // eslint-disable-next-line\n    InkAnnotation.prototype.addInk = function (pageNumber) {\n        this.outputString = this.updateInkDataWithZoom();\n        // eslint-disable-next-line\n        var currentBounds = this.calculateInkSize();\n        var zoomvalue = this.pdfViewerBase.getZoomFactor();\n        // eslint-disable-next-line\n        var annot;\n        if (this.pdfViewerBase.isToolbarInkClicked) {\n            var annotationName = this.pdfViewer.annotation.createGUID();\n            var modifiedDate = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n            var pageIndex = !isNaN(pageNumber) ? pageNumber : this.pdfViewerBase.currentPageNumber - 1;\n            var thickness = this.pdfViewer.inkAnnotationSettings.thickness ? this.pdfViewer.inkAnnotationSettings.thickness : 1;\n            // eslint-disable-next-line max-len\n            var opacity = this.pdfViewer.inkAnnotationSettings.opacity ? this.pdfViewer.inkAnnotationSettings.opacity : 1;\n            // eslint-disable-next-line max-len\n            var strokeColor = this.pdfViewer.inkAnnotationSettings.strokeColor ? this.pdfViewer.inkAnnotationSettings.strokeColor : '#ff0000';\n            // eslint-disable-next-line\n            var isLock = this.pdfViewer.inkAnnotationSettings.isLock ? this.pdfViewer.inkAnnotationSettings.isLock : this.pdfViewer.annotationSettings.isLock;\n            var author = (this.pdfViewer.annotationSettings.author !== 'Guest') ? this.pdfViewer.annotationSettings.author : this.pdfViewer.inkAnnotationSettings.author ? this.pdfViewer.inkAnnotationSettings.author : 'Guest';\n            var subject = (this.pdfViewer.annotationSettings.subject !== \"\" && !isNullOrUndefined(this.pdfViewer.annotationSettings.subject)) ? this.pdfViewer.annotationSettings.subject : this.pdfViewer.inkAnnotationSettings.subject ? this.pdfViewer.inkAnnotationSettings.subject : 'Ink';\n            var customData = this.pdfViewer.inkAnnotationSettings.customData;\n            var isPrint = this.pdfViewer.inkAnnotationSettings.isPrint;\n            // eslint-disable-next-line\n            var allowedInteractions = this.pdfViewer.inkAnnotationSettings.allowedInteractions ? this.pdfViewer.inkAnnotationSettings.allowedInteractions : this.pdfViewer.annotationSettings.allowedInteractions;\n            // eslint-disable-next-line\n            var annotationSettings = this.pdfViewer.annotationSettings ? this.pdfViewer.annotationSettings : this.pdfViewer.annotationModule.updateAnnotationSettings(this.pdfViewer.inkAnnotationSettings);\n            annot = {\n                // eslint-disable-next-line max-len\n                id: 'ink' + this.pdfViewerBase.inkCount, bounds: { x: currentBounds.x, y: currentBounds.y, width: currentBounds.width, height: currentBounds.height }, pageIndex: pageIndex, data: this.outputString, customData: customData,\n                shapeAnnotationType: 'Ink', opacity: opacity, strokeColor: strokeColor, thickness: thickness, annotName: annotationName, comments: [],\n                author: author, subject: subject, notes: '',\n                review: { state: '', stateModel: '', modifiedDate: modifiedDate, author: author },\n                annotationSelectorSettings: this.getSelector('Ink', ''), modifiedDate: modifiedDate, annotationSettings: annotationSettings,\n                isPrint: isPrint, allowedInteractions: allowedInteractions, isCommentLock: false, isLocked: isLock\n            };\n            var annotation = this.pdfViewer.add(annot);\n            // eslint-disable-next-line\n            var bounds = { left: annot.bounds.x, top: annot.bounds.y, width: annot.bounds.width, height: annot.bounds.height };\n            // eslint-disable-next-line\n            var settings = {\n                opacity: annot.opacity, strokeColor: annot.strokeColor, thickness: annot.thickness, modifiedDate: annot.modifiedDate,\n                width: annot.bounds.width, height: annot.bounds.height, data: this.outputString\n            };\n            this.pdfViewerBase.inkCount++;\n            // eslint-disable-next-line max-len\n            var commentsDivid = this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments('ink', (annot.pageIndex + 1), annot.shapeAnnotationType);\n            if (commentsDivid) {\n                document.getElementById(commentsDivid).id = annotationName;\n            }\n            annot.annotName = annotationName;\n            // eslint-disable-next-line max-len\n            this.pdfViewer.annotation.addAction(pageIndex, null, annotation, 'Addition', '', annotation, annotation);\n            this.pdfViewer.annotationModule.storeAnnotations(pageIndex, annot, '_annotations_ink');\n            this.pdfViewer.fireAnnotationAdd(annot.pageIndex, annot.annotName, 'Ink', bounds, settings);\n            if (this.pdfViewerBase.isInkAdded) {\n                this.outputString = '';\n                this.newObject = [];\n                this.inkPathDataCollection = [];\n            }\n            this.pdfViewerBase.isToolbarInkClicked = false;\n            this.pdfViewer.tool = '';\n        }\n        return annot;\n    };\n    /**\n     * @private\n     */\n    InkAnnotation.prototype.setAnnotationMode = function () {\n        if (this.pdfViewerBase.isToolbarInkClicked) {\n            this.drawInkAnnotation();\n        }\n        else {\n            this.pdfViewerBase.isToolbarInkClicked = true;\n            this.drawInk();\n        }\n    };\n    InkAnnotation.prototype.saveInkSignature = function () {\n        // eslint-disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_ink');\n        if (this.pdfViewerBase.isStorageExceed) {\n            storeObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_ink'];\n        }\n        // eslint-disable-next-line\n        var annotations = new Array();\n        for (var j = 0; j < this.pdfViewerBase.pageCount; j++) {\n            annotations[j] = [];\n        }\n        if (storeObject && !this.pdfViewer.annotationSettings.skipDownload) {\n            var annotationCollection = JSON.parse(storeObject);\n            for (var i = 0; i < annotationCollection.length; i++) {\n                // eslint-disable-next-line\n                var newArray = [];\n                var pageAnnotationObject = annotationCollection[i];\n                if (pageAnnotationObject) {\n                    for (var z = 0; pageAnnotationObject.annotations.length > z; z++) {\n                        this.pdfViewer.annotationModule.updateModifiedDate(pageAnnotationObject.annotations[z]);\n                        // eslint-disable-next-line max-len\n                        var strokeColorString = pageAnnotationObject.annotations[z].strokeColor;\n                        pageAnnotationObject.annotations[z].strokeColor = JSON.stringify(this.pdfViewerBase.signatureModule.getRgbCode(strokeColorString));\n                        pageAnnotationObject.annotations[z].bounds = JSON.stringify(this.pdfViewer.annotation.getInkBounds(pageAnnotationObject.annotations[z].bounds, pageAnnotationObject.pageIndex));\n                        // eslint-disable-next-line\n                        var collectionData = processPathData(pageAnnotationObject.annotations[z].data);\n                        // eslint-disable-next-line\n                        var csData = splitArrayCollection(collectionData);\n                        pageAnnotationObject.annotations[z].data = JSON.stringify(csData);\n                    }\n                    newArray = pageAnnotationObject.annotations;\n                }\n                annotations[pageAnnotationObject.pageIndex] = newArray;\n            }\n        }\n        return JSON.stringify(annotations);\n    };\n    /**\n     * @param pageNumber\n     * @param annotationBase\n     * @param pageNumber\n     * @param annotationBase\n     * @private\n     */\n    // eslint-disable-next-line\n    InkAnnotation.prototype.addInCollection = function (pageNumber, annotationBase) {\n        if (annotationBase) {\n            // eslint-disable-next-line\n            var pageAnnotations = this.getAnnotations(pageNumber, null);\n            if (pageAnnotations) {\n                pageAnnotations.push(annotationBase);\n            }\n            this.manageInkAnnotations(pageAnnotations, pageNumber);\n        }\n    };\n    // eslint-disable-next-line\n    InkAnnotation.prototype.calculateInkSize = function () {\n        var minimumX = -1;\n        var minimumY = -1;\n        var maximumX = -1;\n        var maximumY = -1;\n        // eslint-disable-next-line\n        var collectionData = processPathData(this.outputString);\n        var zoomvalue = this.pdfViewerBase.getZoomFactor();\n        // eslint-disable-next-line\n        for (var k = 0; k < collectionData.length; k++) {\n            // eslint-disable-next-line\n            var val = collectionData[k];\n            if (minimumX === -1) {\n                // eslint-disable-next-line\n                minimumX = (val['x']);\n                // eslint-disable-next-line\n                maximumX = (val['x']);\n                // eslint-disable-next-line\n                minimumY = (val['y']);\n                // eslint-disable-next-line\n                maximumY = (val['y']);\n            }\n            else {\n                // eslint-disable-next-line\n                var point1 = (val['x']);\n                // eslint-disable-next-line\n                var point2 = (val['y']);\n                if (minimumX >= point1) {\n                    minimumX = point1;\n                }\n                if (minimumY >= point2) {\n                    minimumY = point2;\n                }\n                if (maximumX <= point1) {\n                    maximumX = point1;\n                }\n                if (maximumY <= point2) {\n                    maximumY = point2;\n                }\n            }\n        }\n        var newdifferenceX = maximumX - minimumX;\n        var newdifferenceY = maximumY - minimumY;\n        // eslint-disable-next-line max-len\n        return { x: (minimumX / zoomvalue), y: (minimumY / zoomvalue), width: (newdifferenceX / zoomvalue), height: (newdifferenceY / zoomvalue) };\n    };\n    /**\n     * @param annotationCollection\n     * @param pageIndex\n     * @param isImport\n     * @private\n     */\n    // eslint-disable-next-line\n    InkAnnotation.prototype.renderExistingInkSignature = function (annotationCollection, pageIndex, isImport, isAnnotOrderAction) {\n        var annot;\n        var isinkAnnotationAdded = false;\n        if (!isImport) {\n            for (var p = 0; p < this.inkAnnotationindex.length; p++) {\n                if (this.inkAnnotationindex[p] === pageIndex) {\n                    isinkAnnotationAdded = true;\n                    break;\n                }\n            }\n        }\n        if (annotationCollection && (!isinkAnnotationAdded || isAnnotOrderAction)) {\n            if (annotationCollection.length > 0 && this.inkAnnotationindex.indexOf(pageIndex) === -1) {\n                this.inkAnnotationindex.push(pageIndex);\n            }\n            for (var n = 0; n < annotationCollection.length; n++) {\n                // eslint-disable-next-line\n                var currentAnnotation = annotationCollection[n];\n                if (currentAnnotation) {\n                    // eslint-disable-next-line\n                    var data = currentAnnotation.PathData;\n                    if (isImport && data) {\n                        if (typeof (data) === 'object' && data.length > 1) {\n                            data = getPathString(data);\n                        }\n                        else {\n                            if (currentAnnotation.IsPathData || (data.split('command').length <= 1)) {\n                                data = data;\n                            }\n                            else {\n                                data = getPathString(JSON.parse(data));\n                            }\n                        }\n                    }\n                    this.outputString = data;\n                    // eslint-disable-next-line\n                    var calculateInkPosition = this.calculateInkSize();\n                    this.outputString = '';\n                    var rectDiff = 0;\n                    var rectDifference = 1;\n                    // eslint-disable-next-line\n                    var bounds = currentAnnotation.Bounds;\n                    if (calculateInkPosition) {\n                        if (calculateInkPosition.height < 1) {\n                            rectDiff = bounds.Height ? bounds.Height : bounds.height;\n                            rectDifference = bounds.Height ? bounds.Height : bounds.height;\n                        }\n                        else if (calculateInkPosition.width < 1) {\n                            rectDiff = bounds.Width ? bounds.Width : bounds.width;\n                            rectDifference = bounds.Width ? bounds.Width : bounds.width;\n                        }\n                    }\n                    var currentLeft = !isNullOrUndefined(bounds.X) ? bounds.X + (rectDiff / 2) : bounds.x + (rectDiff / 2);\n                    var currentTop = !isNullOrUndefined(bounds.Y) ? bounds.Y + (rectDiff / 2) : bounds.y + (rectDiff / 2);\n                    var currentWidth = bounds.Width ? bounds.Width - (rectDifference - 1) : bounds.width - (rectDifference - 1);\n                    var currentHeight = bounds.Height ? bounds.Height - (rectDifference - 1) : bounds.height - (rectDifference - 1);\n                    var isLock = currentAnnotation.AnnotationSettings ? currentAnnotation.AnnotationSettings.isLock : false;\n                    // eslint-disable-next-line\n                    var selectorSettings = currentAnnotation.AnnotationSelectorSettings ? currentAnnotation.AnnotationSelectorSettings : this.getSelector(currentAnnotation, 'Ink');\n                    var customData = this.pdfViewer.annotation.getCustomData(currentAnnotation);\n                    var isPrint = true;\n                    if (currentAnnotation.AnnotationSettings) {\n                        isPrint = currentAnnotation.AnnotationSettings.isPrint;\n                    }\n                    else {\n                        isPrint = this.pdfViewer.inkAnnotationSettings.isPrint;\n                    }\n                    if (currentAnnotation.IsLocked) {\n                        isLock = currentAnnotation.IsLocked;\n                    }\n                    if (currentAnnotation.Subject === 'Highlight' && currentAnnotation.Opacity === 1) {\n                        currentAnnotation.Opacity = currentAnnotation.Opacity / 2;\n                    }\n                    // eslint-disable-next-line max-len\n                    currentAnnotation.allowedInteractions = currentAnnotation.AllowedInteractions ? currentAnnotation.AllowedInteractions : this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(currentAnnotation);\n                    currentAnnotation.AnnotationSettings = currentAnnotation.AnnotationSettings ? currentAnnotation.AnnotationSettings : this.pdfViewer.annotationModule.updateAnnotationSettings(currentAnnotation);\n                    annot = {\n                        // eslint-disable-next-line max-len\n                        id: 'ink' + this.pdfViewerBase.inkCount, bounds: { x: currentLeft, y: currentTop, width: currentWidth, height: currentHeight }, pageIndex: pageIndex, data: data,\n                        shapeAnnotationType: 'Ink', opacity: currentAnnotation.Opacity, strokeColor: currentAnnotation.StrokeColor, thickness: currentAnnotation.Thickness, annotName: currentAnnotation.AnnotName,\n                        // eslint-disable-next-line max-len\n                        comments: this.pdfViewer.annotationModule.getAnnotationComments(currentAnnotation.Comments, currentAnnotation, currentAnnotation.Author), author: currentAnnotation.Author, allowedInteractions: currentAnnotation.allowedInteractions, subject: currentAnnotation.Subject, modifiedDate: currentAnnotation.ModifiedDate,\n                        // eslint-disable-next-line max-len\n                        review: { state: '', stateModel: '', modifiedDate: currentAnnotation.ModifiedDate, author: currentAnnotation.Author }, notes: currentAnnotation.Note, annotationSettings: currentAnnotation.AnnotationSettings,\n                        annotationSelectorSettings: selectorSettings, customData: customData, isPrint: isPrint, isCommentLock: currentAnnotation.IsCommentLock\n                    };\n                    this.pdfViewer.add(annot);\n                    // eslint-disable-next-line\n                    var canvass = document.getElementById(this.pdfViewer.element.id + '_annotationCanvas_' + currentAnnotation.pageIndex);\n                    // eslint-disable-next-line\n                    this.pdfViewer.renderDrawing(canvass, annot.pageIndex);\n                    this.pdfViewer.annotationModule.storeAnnotations(annot.pageIndex, annot, '_annotations_ink');\n                    if (this.isAddAnnotationProgramatically) {\n                        var settings = {\n                            opacity: annot.opacity, strokeColor: annot.strokeColor, thickness: annot.thickness, modifiedDate: annot.modifiedDate,\n                            width: annot.bounds.width, height: annot.bounds.height, data: this.outputString\n                        };\n                        this.pdfViewer.fireAnnotationAdd(annot.pageIndex, annot.annotName, 'Ink', bounds, settings);\n                    }\n                    this.pdfViewerBase.currentSignatureAnnot = null;\n                    this.pdfViewerBase.signatureCount++;\n                    this.pdfViewerBase.inkCount++;\n                    // eslint-disable-next-line max-len\n                    if (this.pdfViewerBase.navigationPane && this.pdfViewerBase.navigationPane.annotationMenuObj && this.pdfViewer.isSignatureEditable) {\n                        // eslint-disable-next-line max-len\n                        this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export Annotations')], true);\n                        // eslint-disable-next-line max-len\n                        this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export XFDF')], true);\n                    }\n                }\n            }\n        }\n    };\n    // To save the imported annotations while downloading or exporting for the page above 10 without a scroll (EJ2-63924)\n    /**\n     * @private\n     */\n    InkAnnotation.prototype.saveImportedInkAnnotation = function (annotation, pageNumber) {\n        var annotationObject = null;\n        var currentBounds = annotation.Bounds;\n        var bounds = { x: currentBounds.X, y: currentBounds.Y, width: currentBounds.Width, height: currentBounds.Height };\n        var allowedInteractions = this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);\n        var customData = this.pdfViewer.annotation.getCustomData(annotation);\n        var comments = this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments, annotation, annotation.Author);\n        var review = { state: annotation.State, stateModel: annotation.StateModel, modifiedDate: annotation.ModifiedDate, author: annotation.Author };\n        var annotationSettings = annotation.AnnotationSettings ? annotation.AnnotationSettings : this.pdfViewer.annotationModule.updateAnnotationSettings(annotation);\n        var annotationSelectorSettings = this.getSettings(annotation);\n        var data = annotation.PathData;\n        if (typeof (data) === 'object' && data.length > 1) {\n            data = getPathString(data);\n        }\n        else {\n            if (annotation.IsPathData || (data.split('command').length <= 1)) {\n                data = data;\n            }\n            else {\n                data = getPathString(JSON.parse(data));\n            }\n        }\n        annotationObject = {\n            allowedInteractions: allowedInteractions, annotName: annotation.AnnotName, annotationSelectorSettings: annotationSelectorSettings,\n            annotationSettings: annotationSettings, author: annotation.Author, bounds: bounds, customData: customData, comments: comments, data: data,\n            id: \"Ink\", isCommentLock: annotation.IsCommentLock, isLocked: annotation.IsLocked, isPrint: annotation.IsPrint, modifiedDate: annotation.ModifiedDate,\n            note: annotation.Note, opacity: annotation.Opacity, pageIndex: pageNumber, review: review, shapeAnnotationType: annotation.AnnotationType,\n            strokeColor: annotation.StrokeColor, subject: annotation.Subject, thickness: annotation.Thickness\n        };\n        this.pdfViewer.annotationModule.storeAnnotations(pageNumber, annotationObject, '_annotations_ink');\n    };\n    // To get the annotation selector settings \n    InkAnnotation.prototype.getSettings = function (annotation) {\n        var selector = this.pdfViewer.annotationSelectorSettings;\n        if (annotation.AnnotationSelectorSettings) {\n            selector = annotation.AnnotationSelectorSettings;\n        }\n        else {\n            selector = this.getSelector(annotation.ShapeAnnotationType, annotation.Subject);\n        }\n        return selector;\n    };\n    /**\n     * @param pageNumber\n     * @param annotations\n     * @private\n     */\n    // eslint-disable-next-line\n    InkAnnotation.prototype.storeInkSignatureData = function (pageNumber, annotations) {\n        // eslint-disable-next-line max-len\n        this.pdfViewer.annotation.addAction(annotations.pageIndex, null, annotations, 'Addition', '', annotations, annotations);\n        // eslint-disable-next-line\n        var annotation = null;\n        var left = annotations.bounds.left ? annotations.bounds.left : annotations.bounds.x;\n        var top = annotations.bounds.top ? annotations.bounds.top : annotations.bounds.y;\n        if (annotations.wrapper && annotations.wrapper.bounds) {\n            left = annotations.wrapper.bounds.left;\n            top = annotations.wrapper.bounds.top;\n        }\n        annotation = {\n            // eslint-disable-next-line max-len\n            id: annotations.id, bounds: { x: left, y: top, width: annotations.bounds.width, height: annotations.bounds.height },\n            // eslint-disable-next-line max-len\n            shapeAnnotationType: 'Ink', opacity: annotations.opacity, thickness: annotations.thickness, strokeColor: annotations.strokeColor, pageIndex: annotations.pageIndex, data: annotations.data,\n            annotName: annotations.annotName,\n            // eslint-disable-next-line max-len\n            comments: annotations.comments, author: annotations.author, subject: annotations.subject, modifiedDate: annotations.modifiedDate,\n            // eslint-disable-next-line max-len\n            review: { state: '', stateModel: '', modifiedDate: annotations.modifiedDate, author: annotations.author }, notes: annotations.notes,\n            annotationSelectorSettings: this.getSelector(annotations, 'Ink'), isCommentLock: annotations.isCommentLock\n        };\n        // eslint-disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_ink');\n        var index = 0;\n        if (!storeObject) {\n            var shapeAnnotation = { pageIndex: pageNumber, annotations: [] };\n            shapeAnnotation.annotations.push(annotation);\n            index = shapeAnnotation.annotations.indexOf(annotation);\n            var annotationCollection = [];\n            annotationCollection.push(shapeAnnotation);\n            var annotationStringified = JSON.stringify(annotationCollection);\n            window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_ink', annotationStringified);\n        }\n        else {\n            var annotObject = JSON.parse(storeObject);\n            window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_ink');\n            var pageIndex = this.pdfViewer.annotationModule.getPageCollection(annotObject, pageNumber);\n            if (annotObject[pageIndex]) {\n                annotObject[pageIndex].annotations.push(annotation);\n                index = annotObject[pageIndex].annotations.indexOf(annotation);\n            }\n            else {\n                var markupAnnotation = { pageIndex: pageNumber, annotations: [] };\n                markupAnnotation.annotations.push(annotation);\n                index = markupAnnotation.annotations.indexOf(annotation);\n                annotObject.push(markupAnnotation);\n            }\n            var annotationStringified = JSON.stringify(annotObject);\n            window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_ink', annotationStringified);\n        }\n    };\n    InkAnnotation.prototype.getSelector = function (type, subject) {\n        var selector = this.pdfViewer.annotationSelectorSettings;\n        if (type === 'Ink' && this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings) {\n            selector = this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings;\n        }\n        return selector;\n    };\n    // eslint-disable-next-line\n    InkAnnotation.prototype.getAnnotations = function (pageIndex, shapeAnnotations) {\n        // eslint-disable-next-line\n        var annotationCollection;\n        // eslint-disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_ink');\n        if (storeObject) {\n            var annotObject = JSON.parse(storeObject);\n            var index = this.pdfViewer.annotationModule.getPageCollection(annotObject, pageIndex);\n            if (annotObject[index]) {\n                annotationCollection = annotObject[index].annotations;\n            }\n            else {\n                annotationCollection = shapeAnnotations;\n            }\n        }\n        else {\n            annotationCollection = shapeAnnotations;\n        }\n        return annotationCollection;\n    };\n    /**\n     * @param property\n     * @param pageNumber\n     * @param annotationBase\n     * @param property\n     * @param pageNumber\n     * @param annotationBase\n     * @private\n     */\n    // eslint-disable-next-line\n    InkAnnotation.prototype.modifySignatureInkCollection = function (property, pageNumber, annotationBase) {\n        if (!isNullOrUndefined(annotationBase.formFieldAnnotationType) && annotationBase.formFieldAnnotationType !== \"\") {\n            this.pdfViewer.annotationModule.isFormFieldShape = true;\n        }\n        else {\n            this.pdfViewer.annotationModule.isFormFieldShape = false;\n        }\n        this.pdfViewerBase.updateDocumentEditedProperty(true);\n        // eslint-disable-next-line\n        var currentAnnotObject = null;\n        // eslint-disable-next-line\n        var pageAnnotations = this.getAnnotations(pageNumber, null);\n        if (pageAnnotations != null && annotationBase) {\n            for (var i = 0; i < pageAnnotations.length; i++) {\n                if (annotationBase.id === pageAnnotations[i].id) {\n                    if (property === 'bounds') {\n                        // eslint-disable-next-line max-len\n                        pageAnnotations[i].bounds = { x: annotationBase.wrapper.bounds.left, y: annotationBase.wrapper.bounds.top, width: annotationBase.bounds.width, height: annotationBase.bounds.height };\n                    }\n                    else if (property === 'stroke') {\n                        pageAnnotations[i].strokeColor = annotationBase.wrapper.children[0].style.strokeColor;\n                    }\n                    else if (property === 'opacity') {\n                        pageAnnotations[i].opacity = annotationBase.wrapper.children[0].style.opacity;\n                    }\n                    else if (property === 'thickness') {\n                        pageAnnotations[i].thickness = annotationBase.wrapper.children[0].style.strokeWidth;\n                    }\n                    else if (property === 'notes') {\n                        pageAnnotations[i].notes = annotationBase.notes;\n                    }\n                    else if (property === 'delete') {\n                        currentAnnotObject = pageAnnotations.splice(i, 1)[0];\n                        break;\n                    }\n                    pageAnnotations[i].modifiedDate = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n                    this.pdfViewer.annotationModule.storeAnnotationCollections(pageAnnotations[i], pageNumber);\n                }\n            }\n            this.manageInkAnnotations(pageAnnotations, pageNumber);\n        }\n        return currentAnnotObject;\n    };\n    // eslint-disable-next-line\n    InkAnnotation.prototype.manageInkAnnotations = function (pageAnnotations, pageNumber) {\n        // eslint-disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_ink');\n        if (storeObject) {\n            var annotObject = JSON.parse(storeObject);\n            window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_ink');\n            var index = this.pdfViewer.annotationModule.getPageCollection(annotObject, pageNumber);\n            if (annotObject[index]) {\n                annotObject[index].annotations = pageAnnotations;\n            }\n            var annotationStringified = JSON.stringify(annotObject);\n            window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_ink', annotationStringified);\n        }\n    };\n    /**\n     * @param currentAnnotation\n     * @param pageIndex\n     * @param isImport\n     * @param currentAnnotation\n     * @param pageIndex\n     * @param isImport\n     * @private\n     */\n    // eslint-disable-next-line\n    InkAnnotation.prototype.updateInkCollections = function (currentAnnotation, pageIndex, isImport) {\n        // eslint-disable-next-line\n        var annot;\n        // eslint-disable-next-line\n        if (currentAnnotation) {\n            // eslint-disable-next-line\n            var bounds = currentAnnotation.Bounds;\n            var currentLeft = (bounds.X);\n            var currentTop = (bounds.Y);\n            var currentWidth = (bounds.Width);\n            var currentHeight = (bounds.Height);\n            var customData = currentAnnotation.customData;\n            var isPrint = currentAnnotation.isPrint;\n            // eslint-disable-next-line\n            currentAnnotation.AllowedInteractions = currentAnnotation.AllowedInteractions ? currentAnnotation.AllowedInteractions : this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(currentAnnotation);\n            // eslint-disable-next-line\n            currentAnnotation.AnnotationSettings = currentAnnotation.AnnotationSettings ? currentAnnotation.AnnotationSettings : this.pdfViewer.inkAnnotationSettings ? this.pdfViewer.inkAnnotationSettings : this.pdfViewer.annotationSettings;\n            if (currentAnnotation.IsLocked) {\n                currentAnnotation.AnnotationSettings.isLock = currentAnnotation.IsLocked;\n            }\n            // eslint-disable-next-line\n            var data = currentAnnotation.PathData;\n            if (isImport) {\n                data = getPathString(JSON.parse(currentAnnotation.PathData));\n            }\n            annot = {\n                // eslint-disable-next-line max-len\n                id: 'ink' + this.pdfViewerBase.signatureCount, bounds: { x: currentLeft, y: currentTop, width: currentWidth, height: currentHeight }, pageIndex: pageIndex, data: data,\n                // eslint-disable-next-line max-len\n                shapeAnnotationType: 'Ink', opacity: currentAnnotation.Opacity, strokeColor: currentAnnotation.StrokeColor, thickness: currentAnnotation.Thickness, annotationId: currentAnnotation.AnnotName,\n                // eslint-disable-next-line max-len\n                customData: customData, comments: this.pdfViewer.annotationModule.getAnnotationComments(currentAnnotation.Comments, currentAnnotation, currentAnnotation.Author), author: currentAnnotation.Author, allowedInteractions: currentAnnotation.AllowedInteractions, subject: currentAnnotation.Subject, modifiedDate: currentAnnotation.ModifiedDate,\n                review: { state: '', stateModel: '', modifiedDate: currentAnnotation.ModifiedDate, author: currentAnnotation.Author }, notes: currentAnnotation.Note, isPrint: isPrint, isCommentLock: currentAnnotation.IsCommentLock, annotationSettings: currentAnnotation.AnnotationSettings, isLocked: currentAnnotation.AnnotationSettings.isLock\n            };\n            return annot;\n        }\n    };\n    /**\n     * This method used to add annotations with using program.\n     *\n     * @param annotationObject - It describes type of annotation object\n     * @param offset - It describes about the annotation bounds or location\n     * @param pageNumber - It describes about the annotation page number\n     * @returns Object\n     * @private\n     */\n    InkAnnotation.prototype.updateAddAnnotationDetails = function (annotationObject, offset, pageNumber) {\n        //Creating new object if annotationObject is null\n        if (!annotationObject) {\n            annotationObject = { offset: { x: 10, y: 10 }, pageNumber: 0, width: undefined, height: undefined };\n            offset = annotationObject.offset;\n        }\n        else if (!annotationObject.offset)\n            offset = { x: 10, y: 10 };\n        else\n            offset = annotationObject.offset;\n        //Creating the CurrentDate and Annotation name\n        var currentDateString = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n        var annotationName = this.pdfViewer.annotation.createGUID();\n        //Creating annotation settings\n        var annotationSelectorSettings = this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings ? this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings : this.pdfViewer.annotationSelectorSettings;\n        var annotationSettings = this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.inkAnnotationSettings);\n        annotationObject.author = annotationObject.author ? annotationObject.author : this.pdfViewer.annotationModule.updateAnnotationAuthor('ink', annotationSettings.AnnotationType);\n        var allowedInteractions = this.pdfViewer.inkAnnotationSettings.allowedInteractions ? this.pdfViewer.inkAnnotationSettings.allowedInteractions : this.pdfViewer.annotationSettings.allowedInteractions;\n        annotationSettings.isLock = annotationObject.isLock ? annotationObject.isLock : annotationSettings.isLock;\n        annotationObject.width = annotationObject.width ? annotationObject.width : 150;\n        annotationObject.height = annotationObject.height ? annotationObject.height : 60;\n        var pathData = annotationObject.path ? annotationObject.path : '';\n        if (!isNullOrUndefined(pathData)) {\n            // Check whether the given path of the ink annotation is starts with Move path or Line path. \n            if (pathData[0] === 'M' || pathData[0] === 'L') {\n                var collectionData = processPathData(pathData);\n                var csData = splitArrayCollection(collectionData);\n                pathData = JSON.stringify(csData);\n            }\n            else {\n                pathData = getPathString(JSON.parse(pathData));\n            }\n        }\n        annotationObject.path = pathData;\n        //Creating Annotation objects with it's proper properties\n        var signatureInkAnnotation = [];\n        var ink = {\n            AllowedInteractions: annotationObject.allowedInteractions ? annotationObject.allowedInteractions : allowedInteractions,\n            AnnotName: annotationName,\n            AnnotType: 'ink',\n            AnnotationFlags: null,\n            AnnotationSelectorSettings: annotationObject.annotationSelectorSettings ? annotationObject.annotationSelectorSettings : annotationSelectorSettings,\n            AnnotationSettings: annotationSettings,\n            AnnotationType: 'Ink',\n            Author: annotationObject.author ? annotationObject.author : 'Guest',\n            Bounds: { X: offset.x, Y: offset.y, Width: annotationObject.width, Height: annotationObject.height, Left: offset.x, Top: offset.y, Location: { X: offset.x, Y: offset.y }, Size: { Height: annotationObject.height, IsEmpty: false, Width: annotationObject.width } },\n            Comments: null,\n            CreatedDate: currentDateString,\n            CustomData: annotationObject.customData ? annotationObject.customData : null,\n            ExistingCustomData: null,\n            IsCommentLock: false,\n            IsLock: annotationObject.isLock ? annotationObject.isLock : false,\n            IsPrint: annotationObject.isPrint ? annotationObject.isPrint : true,\n            ModifiedDate: '',\n            Note: '',\n            Opacity: annotationObject.opacity ? annotationObject.opacity : 1,\n            PathData: annotationObject.path,\n            PageNumber: pageNumber,\n            State: '',\n            StateModel: '',\n            StrokeColor: annotationObject.strokeColor ? annotationObject.strokeColor : 'rgba(255,0,0,1)',\n            SubType: null,\n            Subject: annotationObject.subject ? annotationObject.subject : 'Ink',\n            Type: null,\n            Thickness: annotationObject.thickness ? annotationObject.thickness : 1\n        };\n        //Adding the annotation object to an array and return it\n        signatureInkAnnotation[0] = ink;\n        return { signatureInkAnnotation: signatureInkAnnotation };\n    };\n    return InkAnnotation;\n}());\nexport { InkAnnotation };\n"],"mappings":"AAAA,SAASA,oBAAoB,EAAEC,eAAe,EAAEC,aAAa,QAAQ,0BAA0B;AAC/F,SAASC,OAAO,EAAEC,iBAAiB,QAAQ,sBAAsB;AACjE,IAAIC,aAAa,GAAG,aAAe,YAAY;EAC3C,SAASA,aAAaA,CAACC,SAAS,EAAEC,aAAa,EAAE;IAC7C;IACA,IAAI,CAACC,SAAS,GAAG,EAAE;IACnB;AACR;AACA;IACQ,IAAI,CAACC,YAAY,GAAG,EAAE;IACtB;AACR;AACA;IACQ;IACA,IAAI,CAACC,kBAAkB,GAAG,EAAE;IAC5B;AACR;AACA;IACQ,IAAI,CAACC,8BAA8B,GAAG,KAAK;IAC3C;AACR;AACA;IACQ,IAAI,CAACC,iBAAiB,GAAG,EAAE;IAC3B;AACR;AACA;IACQ,IAAI,CAACC,wBAAwB,GAAG,CAAC;IACjC;AACR;AACA;IACQ,IAAI,CAACC,qBAAqB,GAAG,EAAE;IAC/B,IAAI,CAACR,SAAS,GAAGA,SAAS;IAC1B,IAAI,CAACC,aAAa,GAAGA,aAAa;EACtC;EACA;AACJ;AACA;EACIF,aAAa,CAACU,SAAS,CAACC,OAAO,GAAG,YAAY;IAC1C,IAAI,CAACT,aAAa,CAACU,wBAAwB,CAAC,CAAC;IAC7C,IAAI,CAACX,SAAS,CAACY,IAAI,GAAG,KAAK;EAC/B,CAAC;EACDb,aAAa,CAACU,SAAS,CAACI,iBAAiB,GAAG,UAAUC,UAAU,EAAE;IAC9D,IAAI,IAAI,CAACb,aAAa,CAACc,mBAAmB,EAAE;MACxC,IAAI,CAACd,aAAa,CAACe,UAAU,GAAG,IAAI;MACpC,IAAI,CAAChB,SAAS,CAACiB,gBAAgB,CAACC,gBAAgB,GAAG,KAAK;MACxD,IAAIC,SAAS,GAAG,CAACC,KAAK,CAACN,UAAU,CAAC,GAAGA,UAAU,GAAG,IAAI,CAACb,aAAa,CAACK,iBAAiB,GAAG,CAAC;MAC1F,IAAK,IAAI,CAACH,YAAY,IAAI,IAAI,CAACA,YAAY,KAAK,EAAE,IAAK,IAAI,CAACK,qBAAqB,CAACa,MAAM,GAAG,CAAC,EAAE;QAC1F,IAAIC,YAAY,GAAG,IAAI,CAACC,MAAM,CAACJ,SAAS,CAAC;QACzC,IAAI,CAACnB,SAAS,CAACwB,aAAa,CAACC,SAAS,EAAEN,SAAS,CAAC;QAClD,IAAI,CAACnB,SAAS,CAAC0B,cAAc,CAACP,SAAS,CAAC;QACxC,IAAI,CAACnB,SAAS,CAAC2B,MAAM,CAAC,CAACL,YAAY,CAACM,EAAE,CAAC,EAAEN,YAAY,CAACO,0BAA0B,CAAC;QACjF,IAAI,IAAI,CAAC7B,SAAS,CAAC8B,OAAO,IAAI,IAAI,CAAC9B,SAAS,CAAC8B,OAAO,CAACC,uBAAuB,EAAE;UAC1E,IAAI,CAAC/B,SAAS,CAAC8B,OAAO,CAACC,uBAAuB,CAACC,8BAA8B,CAAC,IAAI,CAAC;QACvF;QACA,IAAInC,OAAO,CAACoC,QAAQ,IAAI,CAAC,IAAI,CAACjC,SAAS,CAACkC,iBAAiB,IAAI,IAAI,CAAClC,SAAS,CAACmC,aAAa,IAAI,IAAI,CAACnC,SAAS,CAACoC,uBAAuB,EAAE;UACjI,IAAI,CAACpC,SAAS,CAACqC,aAAa,CAACN,uBAAuB,CAACO,mBAAmB,CAAC,KAAK,CAAC;QACnF;MACJ,CAAC,MACI;QACD,IAAI,CAACnC,YAAY,GAAG,EAAE;QACtB,IAAI,CAACD,SAAS,GAAG,EAAE;QACnB,IAAI,CAACD,aAAa,CAACc,mBAAmB,GAAG,KAAK;QAC9C,IAAI,CAACf,SAAS,CAACY,IAAI,GAAG,EAAE;QACxB,IAAI,CAACJ,qBAAqB,GAAG,EAAE;MACnC;MACA,IAAI,CAACP,aAAa,CAACe,UAAU,GAAG,KAAK;IACzC;EACJ,CAAC;EACD;AACJ;AACA;EACIjB,aAAa,CAACU,SAAS,CAAC8B,qBAAqB,GAAG,YAAY;IACxD,IAAIC,eAAe,GAAG,EAAE;IACxB,IAAI,IAAI,CAACrC,YAAY,KAAK,EAAE,EAAE;MAC1B,IAAI,CAACK,qBAAqB,CAACiC,IAAI,CAAC;QAAEC,QAAQ,EAAE,IAAI,CAACvC,YAAY;QAAEwC,UAAU,EAAE,IAAI,CAACpC;MAAyB,CAAC,CAAC;IAC/G;IACA,IAAI,IAAI,CAACC,qBAAqB,CAACa,MAAM,GAAG,CAAC,EAAE;MACvC;MACA,KAAK,IAAIuB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACpC,qBAAqB,CAACa,MAAM,EAAEuB,CAAC,EAAE,EAAE;QACxDJ,eAAe,IAAI,IAAI,CAACK,sBAAsB,CAAC,IAAI,CAACrC,qBAAqB,CAACoC,CAAC,CAAC,CAACF,QAAQ,EAAE,IAAI,CAAClC,qBAAqB,CAACoC,CAAC,CAAC,CAACD,UAAU,CAAC;MACpI;IACJ,CAAC,MACI;MACDH,eAAe,IAAI,IAAI,CAACK,sBAAsB,CAAC,IAAI,CAAC1C,YAAY,EAAE,IAAI,CAACI,wBAAwB,CAAC;IACpG;IACA,OAAOiC,eAAe;EAC1B,CAAC;EACDzC,aAAa,CAACU,SAAS,CAACoC,sBAAsB,GAAG,UAAUH,QAAQ,EAAEI,cAAc,EAAE;IACjF,IAAIC,UAAU,GAAG,EAAE;IACnB,IAAIC,IAAI,GAAG,IAAI,CAAC/C,aAAa,CAACgD,aAAa,CAAC,CAAC;IAC7C,IAAIC,cAAc,GAAGvD,eAAe,CAAC+C,QAAQ,CAAC;IAC9C,IAAIS,MAAM,GAAGzD,oBAAoB,CAACwD,cAAc,CAAC;IACjD,KAAK,IAAIE,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,MAAM,CAAC9B,MAAM,EAAE+B,CAAC,EAAE,EAAE;MACpC,IAAIC,SAAS,GAAGF,MAAM,CAACC,CAAC,CAAC;MACzBL,UAAU,IAAIM,SAAS,CAACC,OAAO,GAAGD,SAAS,CAACE,CAAC,IAAIP,IAAI,GAAGF,cAAc,CAAC,GAAG,GAAG,GAAGO,SAAS,CAACG,CAAC,IAAIR,IAAI,GAAGF,cAAc,CAAC,GAAG,GAAG;IAC/H;IACA,OAAOC,UAAU;EACrB,CAAC;EACD;AACJ;AACA;EACIhD,aAAa,CAACU,SAAS,CAACgD,aAAa,GAAG,YAAY;IAChD,IAAI,CAACC,aAAa,CAAC,IAAI,CAACxD,SAAS,CAAC;IAClC,IAAI,CAACA,SAAS,GAAG,EAAE;EACvB,CAAC;EACD;AACJ;AACA;AACA;AACA;EACI;EACAH,aAAa,CAACU,SAAS,CAACkD,eAAe,GAAG,UAAUC,QAAQ,EAAEzC,SAAS,EAAE;IACrE;IACA,IAAI,IAAI,CAACb,iBAAiB,KAAK,EAAE,IAAIuD,QAAQ,CAAC,IAAI,CAACvD,iBAAiB,CAAC,KAAKa,SAAS,EAAE;MACjF;MACA,IAAI,CAACN,iBAAiB,CAACgD,QAAQ,CAAC,IAAI,CAACvD,iBAAiB,CAAC,CAAC;MACxD,IAAI,CAACL,aAAa,CAACc,mBAAmB,GAAG,IAAI;MAC7C,IAAI,CAACf,SAAS,CAACY,IAAI,GAAG,KAAK;IAC/B;IACA,IAAIoC,IAAI,GAAG,IAAI,CAAC/C,aAAa,CAACgD,aAAa,CAAC,CAAC;IAC7C,IAAI,CAAC1C,wBAAwB,GAAGyC,IAAI;IACpC,IAAIc,KAAK,GAAG,IAAI,CAAC7D,aAAa,CAAC8D,yBAAyB,CAAC,CAAC;IAC1D;IACA;IACA,IAAIC,MAAM,GAAGC,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClE,SAAS,CAACmE,OAAO,CAACvC,EAAE,GAAG,oBAAoB,GAAGT,SAAS,CAAC;IAClG;IACA,IAAIiD,OAAO,GAAGJ,MAAM,CAACK,UAAU,CAAC,IAAI,CAAC;IACrC,IAAIC,SAAS,GAAG,IAAI,CAACtE,SAAS,CAACuE,qBAAqB,CAACD,SAAS,GAAG,IAAI,CAACtE,SAAS,CAACuE,qBAAqB,CAACD,SAAS,GAAG,CAAC;IACnH;IACA,IAAIE,OAAO,GAAG,IAAI,CAACxE,SAAS,CAACuE,qBAAqB,CAACC,OAAO,GAAG,IAAI,CAACxE,SAAS,CAACuE,qBAAqB,CAACC,OAAO,GAAG,CAAC;IAC7G;IACA,IAAIC,WAAW,GAAG,IAAI,CAACzE,SAAS,CAACuE,qBAAqB,CAACE,WAAW,GAAG,IAAI,CAACzE,SAAS,CAACuE,qBAAqB,CAACE,WAAW,GAAG,SAAS;IACjI,IAAI,CAAC5E,OAAO,CAACoC,QAAQ,IAAKpC,OAAO,CAACoC,QAAQ,IAAIe,IAAI,IAAI,GAAI,EAAE;MACxDoB,OAAO,CAACM,YAAY,CAACZ,KAAK,EAAE,CAAC,EAAE,CAAC,EAAEA,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;IAClD;IACAM,OAAO,CAACO,SAAS,CAAC,CAAC;IACnBP,OAAO,CAACQ,QAAQ,GAAG,OAAO;IAC1BR,OAAO,CAACS,OAAO,GAAG,OAAO;IACzBT,OAAO,CAACU,MAAM,CAAClB,QAAQ,CAACmB,YAAY,CAACxB,CAAC,EAAEK,QAAQ,CAACmB,YAAY,CAACvB,CAAC,CAAC;IAChEY,OAAO,CAACY,MAAM,CAACpB,QAAQ,CAACqB,eAAe,CAAC1B,CAAC,EAAEK,QAAQ,CAACqB,eAAe,CAACzB,CAAC,CAAC;IACtEY,OAAO,CAACc,SAAS,GAAGZ,SAAS,GAAGtB,IAAI,GAAG,CAAC,GAAGsB,SAAS,GAAGtB,IAAI,GAAGsB,SAAS;IACvEF,OAAO,CAACe,WAAW,GAAGV,WAAW;IACjCL,OAAO,CAACgB,WAAW,GAAGZ,OAAO;IAC7B;IACAJ,OAAO,CAACiB,WAAW,CAAC,EAAE,CAAC;IACvBjB,OAAO,CAACkB,MAAM,CAAC,CAAC;IAChB;IACAlB,OAAO,CAACmB,GAAG,CAAC3B,QAAQ,CAACmB,YAAY,CAACxB,CAAC,EAAEK,QAAQ,CAACmB,YAAY,CAACvB,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAEgC,IAAI,CAACC,EAAE,GAAG,CAAC,EAAE,IAAI,CAAC;IAC1FrB,OAAO,CAACsB,SAAS,CAAC,CAAC;IACnB,IAAI,CAACzF,aAAa,CAAC8E,YAAY,GAAGnB,QAAQ,CAACqB,eAAe;IAC1D,IAAI,CAAC/E,SAAS,CAACuC,IAAI,CAACmB,QAAQ,CAACqB,eAAe,CAAC1B,CAAC,EAAEK,QAAQ,CAACqB,eAAe,CAACzB,CAAC,CAAC;IAC3E,IAAI,CAAClD,iBAAiB,GAAGa,SAAS,CAACwE,QAAQ,CAAC,CAAC;EACjD,CAAC;EACD;EACA5F,aAAa,CAACU,SAAS,CAACiD,aAAa,GAAG,UAAUxD,SAAS,EAAE;IACzD,IAAI,CAAC0F,QAAQ,CAAC1F,SAAS,CAAC,CAAC,CAAC,EAAEA,SAAS,CAAC,CAAC,CAAC,CAAC;IACzC,IAAI,CAAC2F,QAAQ,CAAC3F,SAAS,CAAC,CAAC,CAAC,EAAEA,SAAS,CAAC,CAAC,CAAC,CAAC;IACzC,KAAK,IAAI4F,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG5F,SAAS,CAACmB,MAAM,EAAEyE,CAAC,GAAGA,CAAC,GAAG,CAAC,EAAE;MAC7C,IAAI,CAACD,QAAQ,CAAC3F,SAAS,CAAC4F,CAAC,CAAC,EAAE5F,SAAS,CAAC4F,CAAC,GAAG,CAAC,CAAC,CAAC;IACjD;EACJ,CAAC;EACD/F,aAAa,CAACU,SAAS,CAACoF,QAAQ,GAAG,UAAUtC,CAAC,EAAEC,CAAC,EAAE;IAC/C,IAAI,CAAC1D,iBAAiB,CAACyD,CAAC,CAAC,IAAI,CAACzD,iBAAiB,CAAC0D,CAAC,CAAC,EAAE;MAChD,IAAI,CAACrD,YAAY,IAAI,GAAG,GAAGoD,CAAC,GAAG,GAAG,GAAGC,CAAC,GAAG,GAAG;IAChD;EACJ,CAAC;EACDzD,aAAa,CAACU,SAAS,CAACmF,QAAQ,GAAG,UAAUrC,CAAC,EAAEC,CAAC,EAAE;IAC/C,IAAI,CAAC1D,iBAAiB,CAACyD,CAAC,CAAC,IAAI,CAACzD,iBAAiB,CAAC0D,CAAC,CAAC,EAAE;MAChD,IAAI,CAACrD,YAAY,IAAI,GAAG,GAAGoD,CAAC,GAAG,GAAG,GAAGC,CAAC,GAAG,GAAG;IAChD;EACJ,CAAC;EACD;AACJ;AACA;AACA;EACI;EACAzD,aAAa,CAACU,SAAS,CAACc,MAAM,GAAG,UAAUT,UAAU,EAAE;IACnD,IAAI,CAACX,YAAY,GAAG,IAAI,CAACoC,qBAAqB,CAAC,CAAC;IAChD;IACA,IAAIwD,aAAa,GAAG,IAAI,CAACC,gBAAgB,CAAC,CAAC;IAC3C,IAAIC,SAAS,GAAG,IAAI,CAAChG,aAAa,CAACgD,aAAa,CAAC,CAAC;IAClD;IACA,IAAIiD,KAAK;IACT,IAAI,IAAI,CAACjG,aAAa,CAACc,mBAAmB,EAAE;MACxC,IAAIoF,cAAc,GAAG,IAAI,CAACnG,SAAS,CAACoG,UAAU,CAACC,UAAU,CAAC,CAAC;MAC3D,IAAIC,YAAY,GAAG,IAAI,CAACtG,SAAS,CAACoG,UAAU,CAACG,2BAA2B,CAACC,cAAc,CAAC,CAAC;MACzF,IAAIrF,SAAS,GAAG,CAACC,KAAK,CAACN,UAAU,CAAC,GAAGA,UAAU,GAAG,IAAI,CAACb,aAAa,CAACK,iBAAiB,GAAG,CAAC;MAC1F,IAAIgE,SAAS,GAAG,IAAI,CAACtE,SAAS,CAACuE,qBAAqB,CAACD,SAAS,GAAG,IAAI,CAACtE,SAAS,CAACuE,qBAAqB,CAACD,SAAS,GAAG,CAAC;MACnH;MACA,IAAIE,OAAO,GAAG,IAAI,CAACxE,SAAS,CAACuE,qBAAqB,CAACC,OAAO,GAAG,IAAI,CAACxE,SAAS,CAACuE,qBAAqB,CAACC,OAAO,GAAG,CAAC;MAC7G;MACA,IAAIC,WAAW,GAAG,IAAI,CAACzE,SAAS,CAACuE,qBAAqB,CAACE,WAAW,GAAG,IAAI,CAACzE,SAAS,CAACuE,qBAAqB,CAACE,WAAW,GAAG,SAAS;MACjI;MACA,IAAIgC,MAAM,GAAG,IAAI,CAACzG,SAAS,CAACuE,qBAAqB,CAACkC,MAAM,GAAG,IAAI,CAACzG,SAAS,CAACuE,qBAAqB,CAACkC,MAAM,GAAG,IAAI,CAACzG,SAAS,CAAC0G,kBAAkB,CAACD,MAAM;MACjJ,IAAIE,MAAM,GAAI,IAAI,CAAC3G,SAAS,CAAC0G,kBAAkB,CAACC,MAAM,KAAK,OAAO,GAAI,IAAI,CAAC3G,SAAS,CAAC0G,kBAAkB,CAACC,MAAM,GAAG,IAAI,CAAC3G,SAAS,CAACuE,qBAAqB,CAACoC,MAAM,GAAG,IAAI,CAAC3G,SAAS,CAACuE,qBAAqB,CAACoC,MAAM,GAAG,OAAO;MACpN,IAAIC,OAAO,GAAI,IAAI,CAAC5G,SAAS,CAAC0G,kBAAkB,CAACE,OAAO,KAAK,EAAE,IAAI,CAAC9G,iBAAiB,CAAC,IAAI,CAACE,SAAS,CAAC0G,kBAAkB,CAACE,OAAO,CAAC,GAAI,IAAI,CAAC5G,SAAS,CAAC0G,kBAAkB,CAACE,OAAO,GAAG,IAAI,CAAC5G,SAAS,CAACuE,qBAAqB,CAACqC,OAAO,GAAG,IAAI,CAAC5G,SAAS,CAACuE,qBAAqB,CAACqC,OAAO,GAAG,KAAK;MACnR,IAAIC,UAAU,GAAG,IAAI,CAAC7G,SAAS,CAACuE,qBAAqB,CAACsC,UAAU;MAChE,IAAIC,OAAO,GAAG,IAAI,CAAC9G,SAAS,CAACuE,qBAAqB,CAACuC,OAAO;MAC1D;MACA,IAAIC,mBAAmB,GAAG,IAAI,CAAC/G,SAAS,CAACuE,qBAAqB,CAACwC,mBAAmB,GAAG,IAAI,CAAC/G,SAAS,CAACuE,qBAAqB,CAACwC,mBAAmB,GAAG,IAAI,CAAC/G,SAAS,CAAC0G,kBAAkB,CAACK,mBAAmB;MACrM;MACA,IAAIL,kBAAkB,GAAG,IAAI,CAAC1G,SAAS,CAAC0G,kBAAkB,GAAG,IAAI,CAAC1G,SAAS,CAAC0G,kBAAkB,GAAG,IAAI,CAAC1G,SAAS,CAACiB,gBAAgB,CAAC+F,wBAAwB,CAAC,IAAI,CAAChH,SAAS,CAACuE,qBAAqB,CAAC;MAC/L2B,KAAK,GAAG;QACJ;QACAtE,EAAE,EAAE,KAAK,GAAG,IAAI,CAAC3B,aAAa,CAACgH,QAAQ;QAAEC,MAAM,EAAE;UAAE3D,CAAC,EAAEwC,aAAa,CAACxC,CAAC;UAAEC,CAAC,EAAEuC,aAAa,CAACvC,CAAC;UAAE2D,KAAK,EAAEpB,aAAa,CAACoB,KAAK;UAAEC,MAAM,EAAErB,aAAa,CAACqB;QAAO,CAAC;QAAEjG,SAAS,EAAEA,SAAS;QAAEkG,IAAI,EAAE,IAAI,CAAClH,YAAY;QAAE0G,UAAU,EAAEA,UAAU;QAC5NS,mBAAmB,EAAE,KAAK;QAAE9C,OAAO,EAAEA,OAAO;QAAEC,WAAW,EAAEA,WAAW;QAAEH,SAAS,EAAEA,SAAS;QAAEiD,SAAS,EAAEpB,cAAc;QAAEqB,QAAQ,EAAE,EAAE;QACrIb,MAAM,EAAEA,MAAM;QAAEC,OAAO,EAAEA,OAAO;QAAEa,KAAK,EAAE,EAAE;QAC3CC,MAAM,EAAE;UAAEC,KAAK,EAAE,EAAE;UAAEC,UAAU,EAAE,EAAE;UAAEtB,YAAY,EAAEA,YAAY;UAAEK,MAAM,EAAEA;QAAO,CAAC;QACjF9E,0BAA0B,EAAE,IAAI,CAACgG,WAAW,CAAC,KAAK,EAAE,EAAE,CAAC;QAAEvB,YAAY,EAAEA,YAAY;QAAEI,kBAAkB,EAAEA,kBAAkB;QAC3HI,OAAO,EAAEA,OAAO;QAAEC,mBAAmB,EAAEA,mBAAmB;QAAEe,aAAa,EAAE,KAAK;QAAEC,QAAQ,EAAEtB;MAChG,CAAC;MACD,IAAIL,UAAU,GAAG,IAAI,CAACpG,SAAS,CAACgI,GAAG,CAAC9B,KAAK,CAAC;MAC1C;MACA,IAAIgB,MAAM,GAAG;QAAEe,IAAI,EAAE/B,KAAK,CAACgB,MAAM,CAAC3D,CAAC;QAAE2E,GAAG,EAAEhC,KAAK,CAACgB,MAAM,CAAC1D,CAAC;QAAE2D,KAAK,EAAEjB,KAAK,CAACgB,MAAM,CAACC,KAAK;QAAEC,MAAM,EAAElB,KAAK,CAACgB,MAAM,CAACE;MAAO,CAAC;MAClH;MACA,IAAIe,QAAQ,GAAG;QACX3D,OAAO,EAAE0B,KAAK,CAAC1B,OAAO;QAAEC,WAAW,EAAEyB,KAAK,CAACzB,WAAW;QAAEH,SAAS,EAAE4B,KAAK,CAAC5B,SAAS;QAAEgC,YAAY,EAAEJ,KAAK,CAACI,YAAY;QACpHa,KAAK,EAAEjB,KAAK,CAACgB,MAAM,CAACC,KAAK;QAAEC,MAAM,EAAElB,KAAK,CAACgB,MAAM,CAACE,MAAM;QAAEC,IAAI,EAAE,IAAI,CAAClH;MACvE,CAAC;MACD,IAAI,CAACF,aAAa,CAACgH,QAAQ,EAAE;MAC7B;MACA,IAAImB,aAAa,GAAG,IAAI,CAACpI,SAAS,CAACoG,UAAU,CAACG,2BAA2B,CAAC8B,WAAW,CAAC,KAAK,EAAGnC,KAAK,CAAC/E,SAAS,GAAG,CAAC,EAAG+E,KAAK,CAACoB,mBAAmB,CAAC;MAC9I,IAAIc,aAAa,EAAE;QACfnE,QAAQ,CAACC,cAAc,CAACkE,aAAa,CAAC,CAACxG,EAAE,GAAGuE,cAAc;MAC9D;MACAD,KAAK,CAACqB,SAAS,GAAGpB,cAAc;MAChC;MACA,IAAI,CAACnG,SAAS,CAACoG,UAAU,CAACkC,SAAS,CAACnH,SAAS,EAAE,IAAI,EAAEiF,UAAU,EAAE,UAAU,EAAE,EAAE,EAAEA,UAAU,EAAEA,UAAU,CAAC;MACxG,IAAI,CAACpG,SAAS,CAACiB,gBAAgB,CAACsH,gBAAgB,CAACpH,SAAS,EAAE+E,KAAK,EAAE,kBAAkB,CAAC;MACtF,IAAI,CAAClG,SAAS,CAACwI,iBAAiB,CAACtC,KAAK,CAAC/E,SAAS,EAAE+E,KAAK,CAACqB,SAAS,EAAE,KAAK,EAAEL,MAAM,EAAEiB,QAAQ,CAAC;MAC3F,IAAI,IAAI,CAAClI,aAAa,CAACe,UAAU,EAAE;QAC/B,IAAI,CAACb,YAAY,GAAG,EAAE;QACtB,IAAI,CAACD,SAAS,GAAG,EAAE;QACnB,IAAI,CAACM,qBAAqB,GAAG,EAAE;MACnC;MACA,IAAI,CAACP,aAAa,CAACc,mBAAmB,GAAG,KAAK;MAC9C,IAAI,CAACf,SAAS,CAACY,IAAI,GAAG,EAAE;IAC5B;IACA,OAAOsF,KAAK;EAChB,CAAC;EACD;AACJ;AACA;EACInG,aAAa,CAACU,SAAS,CAACgI,iBAAiB,GAAG,YAAY;IACpD,IAAI,IAAI,CAACxI,aAAa,CAACc,mBAAmB,EAAE;MACxC,IAAI,CAACF,iBAAiB,CAAC,CAAC;IAC5B,CAAC,MACI;MACD,IAAI,CAACZ,aAAa,CAACc,mBAAmB,GAAG,IAAI;MAC7C,IAAI,CAACL,OAAO,CAAC,CAAC;IAClB;EACJ,CAAC;EACDX,aAAa,CAACU,SAAS,CAACiI,gBAAgB,GAAG,YAAY;IACnD;IACA,IAAIC,WAAW,GAAGC,MAAM,CAACC,cAAc,CAACC,OAAO,CAAC,IAAI,CAAC7I,aAAa,CAAC8I,UAAU,GAAG,kBAAkB,CAAC;IACnG,IAAI,IAAI,CAAC9I,aAAa,CAAC+I,eAAe,EAAE;MACpCL,WAAW,GAAG,IAAI,CAAC1I,aAAa,CAACgJ,iBAAiB,CAAC,IAAI,CAAChJ,aAAa,CAAC8I,UAAU,GAAG,kBAAkB,CAAC;IAC1G;IACA;IACA,IAAIG,WAAW,GAAG,IAAIC,KAAK,CAAC,CAAC;IAC7B,KAAK,IAAI/F,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACnD,aAAa,CAACmJ,SAAS,EAAEhG,CAAC,EAAE,EAAE;MACnD8F,WAAW,CAAC9F,CAAC,CAAC,GAAG,EAAE;IACvB;IACA,IAAIuF,WAAW,IAAI,CAAC,IAAI,CAAC3I,SAAS,CAAC0G,kBAAkB,CAAC2C,YAAY,EAAE;MAChE,IAAIC,oBAAoB,GAAGC,IAAI,CAACC,KAAK,CAACb,WAAW,CAAC;MAClD,KAAK,IAAI/F,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG0G,oBAAoB,CAACjI,MAAM,EAAEuB,CAAC,EAAE,EAAE;QAClD;QACA,IAAI6G,QAAQ,GAAG,EAAE;QACjB,IAAIC,oBAAoB,GAAGJ,oBAAoB,CAAC1G,CAAC,CAAC;QAClD,IAAI8G,oBAAoB,EAAE;UACtB,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAED,oBAAoB,CAACR,WAAW,CAAC7H,MAAM,GAAGsI,CAAC,EAAEA,CAAC,EAAE,EAAE;YAC9D,IAAI,CAAC3J,SAAS,CAACiB,gBAAgB,CAAC2I,kBAAkB,CAACF,oBAAoB,CAACR,WAAW,CAACS,CAAC,CAAC,CAAC;YACvF;YACA,IAAIE,iBAAiB,GAAGH,oBAAoB,CAACR,WAAW,CAACS,CAAC,CAAC,CAAClF,WAAW;YACvEiF,oBAAoB,CAACR,WAAW,CAACS,CAAC,CAAC,CAAClF,WAAW,GAAG8E,IAAI,CAACO,SAAS,CAAC,IAAI,CAAC7J,aAAa,CAAC8J,eAAe,CAACC,UAAU,CAACH,iBAAiB,CAAC,CAAC;YAClIH,oBAAoB,CAACR,WAAW,CAACS,CAAC,CAAC,CAACzC,MAAM,GAAGqC,IAAI,CAACO,SAAS,CAAC,IAAI,CAAC9J,SAAS,CAACoG,UAAU,CAAC6D,YAAY,CAACP,oBAAoB,CAACR,WAAW,CAACS,CAAC,CAAC,CAACzC,MAAM,EAAEwC,oBAAoB,CAACvI,SAAS,CAAC,CAAC;YAC/K;YACA,IAAI+B,cAAc,GAAGvD,eAAe,CAAC+J,oBAAoB,CAACR,WAAW,CAACS,CAAC,CAAC,CAACtC,IAAI,CAAC;YAC9E;YACA,IAAIlE,MAAM,GAAGzD,oBAAoB,CAACwD,cAAc,CAAC;YACjDwG,oBAAoB,CAACR,WAAW,CAACS,CAAC,CAAC,CAACtC,IAAI,GAAGkC,IAAI,CAACO,SAAS,CAAC3G,MAAM,CAAC;UACrE;UACAsG,QAAQ,GAAGC,oBAAoB,CAACR,WAAW;QAC/C;QACAA,WAAW,CAACQ,oBAAoB,CAACvI,SAAS,CAAC,GAAGsI,QAAQ;MAC1D;IACJ;IACA,OAAOF,IAAI,CAACO,SAAS,CAACZ,WAAW,CAAC;EACtC,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;EACI;EACAnJ,aAAa,CAACU,SAAS,CAACyJ,eAAe,GAAG,UAAUpJ,UAAU,EAAEqJ,cAAc,EAAE;IAC5E,IAAIA,cAAc,EAAE;MAChB;MACA,IAAIC,eAAe,GAAG,IAAI,CAACC,cAAc,CAACvJ,UAAU,EAAE,IAAI,CAAC;MAC3D,IAAIsJ,eAAe,EAAE;QACjBA,eAAe,CAAC3H,IAAI,CAAC0H,cAAc,CAAC;MACxC;MACA,IAAI,CAACG,oBAAoB,CAACF,eAAe,EAAEtJ,UAAU,CAAC;IAC1D;EACJ,CAAC;EACD;EACAf,aAAa,CAACU,SAAS,CAACuF,gBAAgB,GAAG,YAAY;IACnD,IAAIuE,QAAQ,GAAG,CAAC,CAAC;IACjB,IAAIC,QAAQ,GAAG,CAAC,CAAC;IACjB,IAAIC,QAAQ,GAAG,CAAC,CAAC;IACjB,IAAIC,QAAQ,GAAG,CAAC,CAAC;IACjB;IACA,IAAIxH,cAAc,GAAGvD,eAAe,CAAC,IAAI,CAACQ,YAAY,CAAC;IACvD,IAAI8F,SAAS,GAAG,IAAI,CAAChG,aAAa,CAACgD,aAAa,CAAC,CAAC;IAClD;IACA,KAAK,IAAI0H,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGzH,cAAc,CAAC7B,MAAM,EAAEsJ,CAAC,EAAE,EAAE;MAC5C;MACA,IAAIC,GAAG,GAAG1H,cAAc,CAACyH,CAAC,CAAC;MAC3B,IAAIJ,QAAQ,KAAK,CAAC,CAAC,EAAE;QACjB;QACAA,QAAQ,GAAIK,GAAG,CAAC,GAAG,CAAE;QACrB;QACAH,QAAQ,GAAIG,GAAG,CAAC,GAAG,CAAE;QACrB;QACAJ,QAAQ,GAAII,GAAG,CAAC,GAAG,CAAE;QACrB;QACAF,QAAQ,GAAIE,GAAG,CAAC,GAAG,CAAE;MACzB,CAAC,MACI;QACD;QACA,IAAIC,MAAM,GAAID,GAAG,CAAC,GAAG,CAAE;QACvB;QACA,IAAIE,MAAM,GAAIF,GAAG,CAAC,GAAG,CAAE;QACvB,IAAIL,QAAQ,IAAIM,MAAM,EAAE;UACpBN,QAAQ,GAAGM,MAAM;QACrB;QACA,IAAIL,QAAQ,IAAIM,MAAM,EAAE;UACpBN,QAAQ,GAAGM,MAAM;QACrB;QACA,IAAIL,QAAQ,IAAII,MAAM,EAAE;UACpBJ,QAAQ,GAAGI,MAAM;QACrB;QACA,IAAIH,QAAQ,IAAII,MAAM,EAAE;UACpBJ,QAAQ,GAAGI,MAAM;QACrB;MACJ;IACJ;IACA,IAAIC,cAAc,GAAGN,QAAQ,GAAGF,QAAQ;IACxC,IAAIS,cAAc,GAAGN,QAAQ,GAAGF,QAAQ;IACxC;IACA,OAAO;MAAEjH,CAAC,EAAGgH,QAAQ,GAAGtE,SAAU;MAAEzC,CAAC,EAAGgH,QAAQ,GAAGvE,SAAU;MAAEkB,KAAK,EAAG4D,cAAc,GAAG9E,SAAU;MAAEmB,MAAM,EAAG4D,cAAc,GAAG/E;IAAW,CAAC;EAC9I,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;EACI;EACAlG,aAAa,CAACU,SAAS,CAACwK,0BAA0B,GAAG,UAAU3B,oBAAoB,EAAEnI,SAAS,EAAE+J,QAAQ,EAAEC,kBAAkB,EAAE;IAC1H,IAAIjF,KAAK;IACT,IAAIkF,oBAAoB,GAAG,KAAK;IAChC,IAAI,CAACF,QAAQ,EAAE;MACX,KAAK,IAAIG,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACjL,kBAAkB,CAACiB,MAAM,EAAEgK,CAAC,EAAE,EAAE;QACrD,IAAI,IAAI,CAACjL,kBAAkB,CAACiL,CAAC,CAAC,KAAKlK,SAAS,EAAE;UAC1CiK,oBAAoB,GAAG,IAAI;UAC3B;QACJ;MACJ;IACJ;IACA,IAAI9B,oBAAoB,KAAK,CAAC8B,oBAAoB,IAAID,kBAAkB,CAAC,EAAE;MACvE,IAAI7B,oBAAoB,CAACjI,MAAM,GAAG,CAAC,IAAI,IAAI,CAACjB,kBAAkB,CAACkL,OAAO,CAACnK,SAAS,CAAC,KAAK,CAAC,CAAC,EAAE;QACtF,IAAI,CAACf,kBAAkB,CAACqC,IAAI,CAACtB,SAAS,CAAC;MAC3C;MACA,KAAK,IAAI2E,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGwD,oBAAoB,CAACjI,MAAM,EAAEyE,CAAC,EAAE,EAAE;QAClD;QACA,IAAIyF,iBAAiB,GAAGjC,oBAAoB,CAACxD,CAAC,CAAC;QAC/C,IAAIyF,iBAAiB,EAAE;UACnB;UACA,IAAIlE,IAAI,GAAGkE,iBAAiB,CAACC,QAAQ;UACrC,IAAIN,QAAQ,IAAI7D,IAAI,EAAE;YAClB,IAAI,OAAQA,IAAK,KAAK,QAAQ,IAAIA,IAAI,CAAChG,MAAM,GAAG,CAAC,EAAE;cAC/CgG,IAAI,GAAGzH,aAAa,CAACyH,IAAI,CAAC;YAC9B,CAAC,MACI;cACD,IAAIkE,iBAAiB,CAACE,UAAU,IAAKpE,IAAI,CAACqE,KAAK,CAAC,SAAS,CAAC,CAACrK,MAAM,IAAI,CAAE,EAAE;gBACrEgG,IAAI,GAAGA,IAAI;cACf,CAAC,MACI;gBACDA,IAAI,GAAGzH,aAAa,CAAC2J,IAAI,CAACC,KAAK,CAACnC,IAAI,CAAC,CAAC;cAC1C;YACJ;UACJ;UACA,IAAI,CAAClH,YAAY,GAAGkH,IAAI;UACxB;UACA,IAAIsE,oBAAoB,GAAG,IAAI,CAAC3F,gBAAgB,CAAC,CAAC;UAClD,IAAI,CAAC7F,YAAY,GAAG,EAAE;UACtB,IAAIyL,QAAQ,GAAG,CAAC;UAChB,IAAIC,cAAc,GAAG,CAAC;UACtB;UACA,IAAI3E,MAAM,GAAGqE,iBAAiB,CAACO,MAAM;UACrC,IAAIH,oBAAoB,EAAE;YACtB,IAAIA,oBAAoB,CAACvE,MAAM,GAAG,CAAC,EAAE;cACjCwE,QAAQ,GAAG1E,MAAM,CAAC6E,MAAM,GAAG7E,MAAM,CAAC6E,MAAM,GAAG7E,MAAM,CAACE,MAAM;cACxDyE,cAAc,GAAG3E,MAAM,CAAC6E,MAAM,GAAG7E,MAAM,CAAC6E,MAAM,GAAG7E,MAAM,CAACE,MAAM;YAClE,CAAC,MACI,IAAIuE,oBAAoB,CAACxE,KAAK,GAAG,CAAC,EAAE;cACrCyE,QAAQ,GAAG1E,MAAM,CAAC8E,KAAK,GAAG9E,MAAM,CAAC8E,KAAK,GAAG9E,MAAM,CAACC,KAAK;cACrD0E,cAAc,GAAG3E,MAAM,CAAC8E,KAAK,GAAG9E,MAAM,CAAC8E,KAAK,GAAG9E,MAAM,CAACC,KAAK;YAC/D;UACJ;UACA,IAAI8E,WAAW,GAAG,CAACnM,iBAAiB,CAACoH,MAAM,CAACgF,CAAC,CAAC,GAAGhF,MAAM,CAACgF,CAAC,GAAIN,QAAQ,GAAG,CAAE,GAAG1E,MAAM,CAAC3D,CAAC,GAAIqI,QAAQ,GAAG,CAAE;UACtG,IAAIO,UAAU,GAAG,CAACrM,iBAAiB,CAACoH,MAAM,CAACkF,CAAC,CAAC,GAAGlF,MAAM,CAACkF,CAAC,GAAIR,QAAQ,GAAG,CAAE,GAAG1E,MAAM,CAAC1D,CAAC,GAAIoI,QAAQ,GAAG,CAAE;UACrG,IAAIS,YAAY,GAAGnF,MAAM,CAAC8E,KAAK,GAAG9E,MAAM,CAAC8E,KAAK,IAAIH,cAAc,GAAG,CAAC,CAAC,GAAG3E,MAAM,CAACC,KAAK,IAAI0E,cAAc,GAAG,CAAC,CAAC;UAC3G,IAAIS,aAAa,GAAGpF,MAAM,CAAC6E,MAAM,GAAG7E,MAAM,CAAC6E,MAAM,IAAIF,cAAc,GAAG,CAAC,CAAC,GAAG3E,MAAM,CAACE,MAAM,IAAIyE,cAAc,GAAG,CAAC,CAAC;UAC/G,IAAIpF,MAAM,GAAG8E,iBAAiB,CAACgB,kBAAkB,GAAGhB,iBAAiB,CAACgB,kBAAkB,CAAC9F,MAAM,GAAG,KAAK;UACvG;UACA,IAAI+F,gBAAgB,GAAGjB,iBAAiB,CAACkB,0BAA0B,GAAGlB,iBAAiB,CAACkB,0BAA0B,GAAG,IAAI,CAAC5E,WAAW,CAAC0D,iBAAiB,EAAE,KAAK,CAAC;UAC/J,IAAI1E,UAAU,GAAG,IAAI,CAAC7G,SAAS,CAACoG,UAAU,CAACsG,aAAa,CAACnB,iBAAiB,CAAC;UAC3E,IAAIzE,OAAO,GAAG,IAAI;UAClB,IAAIyE,iBAAiB,CAACgB,kBAAkB,EAAE;YACtCzF,OAAO,GAAGyE,iBAAiB,CAACgB,kBAAkB,CAACzF,OAAO;UAC1D,CAAC,MACI;YACDA,OAAO,GAAG,IAAI,CAAC9G,SAAS,CAACuE,qBAAqB,CAACuC,OAAO;UAC1D;UACA,IAAIyE,iBAAiB,CAACoB,QAAQ,EAAE;YAC5BlG,MAAM,GAAG8E,iBAAiB,CAACoB,QAAQ;UACvC;UACA,IAAIpB,iBAAiB,CAACqB,OAAO,KAAK,WAAW,IAAIrB,iBAAiB,CAACsB,OAAO,KAAK,CAAC,EAAE;YAC9EtB,iBAAiB,CAACsB,OAAO,GAAGtB,iBAAiB,CAACsB,OAAO,GAAG,CAAC;UAC7D;UACA;UACAtB,iBAAiB,CAACxE,mBAAmB,GAAGwE,iBAAiB,CAACuB,mBAAmB,GAAGvB,iBAAiB,CAACuB,mBAAmB,GAAG,IAAI,CAAC9M,SAAS,CAACiB,gBAAgB,CAAC8L,mCAAmC,CAACxB,iBAAiB,CAAC;UAC9MA,iBAAiB,CAACgB,kBAAkB,GAAGhB,iBAAiB,CAACgB,kBAAkB,GAAGhB,iBAAiB,CAACgB,kBAAkB,GAAG,IAAI,CAACvM,SAAS,CAACiB,gBAAgB,CAAC+F,wBAAwB,CAACuE,iBAAiB,CAAC;UAChMrF,KAAK,GAAG;YACJ;YACAtE,EAAE,EAAE,KAAK,GAAG,IAAI,CAAC3B,aAAa,CAACgH,QAAQ;YAAEC,MAAM,EAAE;cAAE3D,CAAC,EAAE0I,WAAW;cAAEzI,CAAC,EAAE2I,UAAU;cAAEhF,KAAK,EAAEkF,YAAY;cAAEjF,MAAM,EAAEkF;YAAc,CAAC;YAAEnL,SAAS,EAAEA,SAAS;YAAEkG,IAAI,EAAEA,IAAI;YAChKC,mBAAmB,EAAE,KAAK;YAAE9C,OAAO,EAAE+G,iBAAiB,CAACsB,OAAO;YAAEpI,WAAW,EAAE8G,iBAAiB,CAACyB,WAAW;YAAE1I,SAAS,EAAEiH,iBAAiB,CAAC0B,SAAS;YAAE1F,SAAS,EAAEgE,iBAAiB,CAAC2B,SAAS;YAC1L;YACA1F,QAAQ,EAAE,IAAI,CAACxH,SAAS,CAACiB,gBAAgB,CAACkM,qBAAqB,CAAC5B,iBAAiB,CAAC6B,QAAQ,EAAE7B,iBAAiB,EAAEA,iBAAiB,CAAC8B,MAAM,CAAC;YAAE1G,MAAM,EAAE4E,iBAAiB,CAAC8B,MAAM;YAAEtG,mBAAmB,EAAEwE,iBAAiB,CAACxE,mBAAmB;YAAEH,OAAO,EAAE2E,iBAAiB,CAACqB,OAAO;YAAEtG,YAAY,EAAEiF,iBAAiB,CAAC+B,YAAY;YACxT;YACA5F,MAAM,EAAE;cAAEC,KAAK,EAAE,EAAE;cAAEC,UAAU,EAAE,EAAE;cAAEtB,YAAY,EAAEiF,iBAAiB,CAAC+B,YAAY;cAAE3G,MAAM,EAAE4E,iBAAiB,CAAC8B;YAAO,CAAC;YAAE5F,KAAK,EAAE8D,iBAAiB,CAACgC,IAAI;YAAE7G,kBAAkB,EAAE6E,iBAAiB,CAACgB,kBAAkB;YAC9M1K,0BAA0B,EAAE2K,gBAAgB;YAAE3F,UAAU,EAAEA,UAAU;YAAEC,OAAO,EAAEA,OAAO;YAAEgB,aAAa,EAAEyD,iBAAiB,CAACiC;UAC7H,CAAC;UACD,IAAI,CAACxN,SAAS,CAACgI,GAAG,CAAC9B,KAAK,CAAC;UACzB;UACA,IAAIuH,OAAO,GAAGxJ,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClE,SAAS,CAACmE,OAAO,CAACvC,EAAE,GAAG,oBAAoB,GAAG2J,iBAAiB,CAACpK,SAAS,CAAC;UACrH;UACA,IAAI,CAACnB,SAAS,CAACwB,aAAa,CAACiM,OAAO,EAAEvH,KAAK,CAAC/E,SAAS,CAAC;UACtD,IAAI,CAACnB,SAAS,CAACiB,gBAAgB,CAACsH,gBAAgB,CAACrC,KAAK,CAAC/E,SAAS,EAAE+E,KAAK,EAAE,kBAAkB,CAAC;UAC5F,IAAI,IAAI,CAAC7F,8BAA8B,EAAE;YACrC,IAAI8H,QAAQ,GAAG;cACX3D,OAAO,EAAE0B,KAAK,CAAC1B,OAAO;cAAEC,WAAW,EAAEyB,KAAK,CAACzB,WAAW;cAAEH,SAAS,EAAE4B,KAAK,CAAC5B,SAAS;cAAEgC,YAAY,EAAEJ,KAAK,CAACI,YAAY;cACpHa,KAAK,EAAEjB,KAAK,CAACgB,MAAM,CAACC,KAAK;cAAEC,MAAM,EAAElB,KAAK,CAACgB,MAAM,CAACE,MAAM;cAAEC,IAAI,EAAE,IAAI,CAAClH;YACvE,CAAC;YACD,IAAI,CAACH,SAAS,CAACwI,iBAAiB,CAACtC,KAAK,CAAC/E,SAAS,EAAE+E,KAAK,CAACqB,SAAS,EAAE,KAAK,EAAEL,MAAM,EAAEiB,QAAQ,CAAC;UAC/F;UACA,IAAI,CAAClI,aAAa,CAACyN,qBAAqB,GAAG,IAAI;UAC/C,IAAI,CAACzN,aAAa,CAAC0N,cAAc,EAAE;UACnC,IAAI,CAAC1N,aAAa,CAACgH,QAAQ,EAAE;UAC7B;UACA,IAAI,IAAI,CAAChH,aAAa,CAAC2N,cAAc,IAAI,IAAI,CAAC3N,aAAa,CAAC2N,cAAc,CAACC,iBAAiB,IAAI,IAAI,CAAC7N,SAAS,CAAC8N,mBAAmB,EAAE;YAChI;YACA,IAAI,CAAC7N,aAAa,CAAC2N,cAAc,CAACC,iBAAiB,CAACE,WAAW,CAAC,CAAC,IAAI,CAAC/N,SAAS,CAACgO,SAAS,CAACC,WAAW,CAAC,oBAAoB,CAAC,CAAC,EAAE,IAAI,CAAC;YACnI;YACA,IAAI,CAAChO,aAAa,CAAC2N,cAAc,CAACC,iBAAiB,CAACE,WAAW,CAAC,CAAC,IAAI,CAAC/N,SAAS,CAACgO,SAAS,CAACC,WAAW,CAAC,aAAa,CAAC,CAAC,EAAE,IAAI,CAAC;UAChI;QACJ;MACJ;IACJ;EACJ,CAAC;EACD;EACA;AACJ;AACA;EACIlO,aAAa,CAACU,SAAS,CAACyN,yBAAyB,GAAG,UAAU9H,UAAU,EAAEtF,UAAU,EAAE;IAClF,IAAIqN,gBAAgB,GAAG,IAAI;IAC3B,IAAIpI,aAAa,GAAGK,UAAU,CAAC0F,MAAM;IACrC,IAAI5E,MAAM,GAAG;MAAE3D,CAAC,EAAEwC,aAAa,CAACmG,CAAC;MAAE1I,CAAC,EAAEuC,aAAa,CAACqG,CAAC;MAAEjF,KAAK,EAAEpB,aAAa,CAACiG,KAAK;MAAE5E,MAAM,EAAErB,aAAa,CAACgG;IAAO,CAAC;IACjH,IAAIhF,mBAAmB,GAAG,IAAI,CAAC/G,SAAS,CAACiB,gBAAgB,CAAC8L,mCAAmC,CAAC3G,UAAU,CAAC;IACzG,IAAIS,UAAU,GAAG,IAAI,CAAC7G,SAAS,CAACoG,UAAU,CAACsG,aAAa,CAACtG,UAAU,CAAC;IACpE,IAAIoB,QAAQ,GAAG,IAAI,CAACxH,SAAS,CAACiB,gBAAgB,CAACkM,qBAAqB,CAAC/G,UAAU,CAACgH,QAAQ,EAAEhH,UAAU,EAAEA,UAAU,CAACiH,MAAM,CAAC;IACxH,IAAI3F,MAAM,GAAG;MAAEC,KAAK,EAAEvB,UAAU,CAACgI,KAAK;MAAExG,UAAU,EAAExB,UAAU,CAACiI,UAAU;MAAE/H,YAAY,EAAEF,UAAU,CAACkH,YAAY;MAAE3G,MAAM,EAAEP,UAAU,CAACiH;IAAO,CAAC;IAC7I,IAAI3G,kBAAkB,GAAGN,UAAU,CAACmG,kBAAkB,GAAGnG,UAAU,CAACmG,kBAAkB,GAAG,IAAI,CAACvM,SAAS,CAACiB,gBAAgB,CAAC+F,wBAAwB,CAACZ,UAAU,CAAC;IAC7J,IAAIvE,0BAA0B,GAAG,IAAI,CAACyM,WAAW,CAAClI,UAAU,CAAC;IAC7D,IAAIiB,IAAI,GAAGjB,UAAU,CAACoF,QAAQ;IAC9B,IAAI,OAAQnE,IAAK,KAAK,QAAQ,IAAIA,IAAI,CAAChG,MAAM,GAAG,CAAC,EAAE;MAC/CgG,IAAI,GAAGzH,aAAa,CAACyH,IAAI,CAAC;IAC9B,CAAC,MACI;MACD,IAAIjB,UAAU,CAACqF,UAAU,IAAKpE,IAAI,CAACqE,KAAK,CAAC,SAAS,CAAC,CAACrK,MAAM,IAAI,CAAE,EAAE;QAC9DgG,IAAI,GAAGA,IAAI;MACf,CAAC,MACI;QACDA,IAAI,GAAGzH,aAAa,CAAC2J,IAAI,CAACC,KAAK,CAACnC,IAAI,CAAC,CAAC;MAC1C;IACJ;IACA8G,gBAAgB,GAAG;MACfpH,mBAAmB,EAAEA,mBAAmB;MAAEQ,SAAS,EAAEnB,UAAU,CAAC8G,SAAS;MAAErL,0BAA0B,EAAEA,0BAA0B;MACjI6E,kBAAkB,EAAEA,kBAAkB;MAAEC,MAAM,EAAEP,UAAU,CAACiH,MAAM;MAAEnG,MAAM,EAAEA,MAAM;MAAEL,UAAU,EAAEA,UAAU;MAAEW,QAAQ,EAAEA,QAAQ;MAAEH,IAAI,EAAEA,IAAI;MACzIzF,EAAE,EAAE,KAAK;MAAEkG,aAAa,EAAE1B,UAAU,CAACoH,aAAa;MAAEzF,QAAQ,EAAE3B,UAAU,CAACuG,QAAQ;MAAE7F,OAAO,EAAEV,UAAU,CAACmI,OAAO;MAAEjI,YAAY,EAAEF,UAAU,CAACkH,YAAY;MACrJkB,IAAI,EAAEpI,UAAU,CAACmH,IAAI;MAAE/I,OAAO,EAAE4B,UAAU,CAACyG,OAAO;MAAE1L,SAAS,EAAEL,UAAU;MAAE4G,MAAM,EAAEA,MAAM;MAAEJ,mBAAmB,EAAElB,UAAU,CAACqI,cAAc;MACzIhK,WAAW,EAAE2B,UAAU,CAAC4G,WAAW;MAAEpG,OAAO,EAAER,UAAU,CAACwG,OAAO;MAAEtI,SAAS,EAAE8B,UAAU,CAAC6G;IAC5F,CAAC;IACD,IAAI,CAACjN,SAAS,CAACiB,gBAAgB,CAACsH,gBAAgB,CAACzH,UAAU,EAAEqN,gBAAgB,EAAE,kBAAkB,CAAC;EACtG,CAAC;EACD;EACApO,aAAa,CAACU,SAAS,CAAC6N,WAAW,GAAG,UAAUlI,UAAU,EAAE;IACxD,IAAIsI,QAAQ,GAAG,IAAI,CAAC1O,SAAS,CAAC6B,0BAA0B;IACxD,IAAIuE,UAAU,CAACqG,0BAA0B,EAAE;MACvCiC,QAAQ,GAAGtI,UAAU,CAACqG,0BAA0B;IACpD,CAAC,MACI;MACDiC,QAAQ,GAAG,IAAI,CAAC7G,WAAW,CAACzB,UAAU,CAACuI,mBAAmB,EAAEvI,UAAU,CAACwG,OAAO,CAAC;IACnF;IACA,OAAO8B,QAAQ;EACnB,CAAC;EACD;AACJ;AACA;AACA;AACA;EACI;EACA3O,aAAa,CAACU,SAAS,CAACmO,qBAAqB,GAAG,UAAU9N,UAAU,EAAEoI,WAAW,EAAE;IAC/E;IACA,IAAI,CAAClJ,SAAS,CAACoG,UAAU,CAACkC,SAAS,CAACY,WAAW,CAAC/H,SAAS,EAAE,IAAI,EAAE+H,WAAW,EAAE,UAAU,EAAE,EAAE,EAAEA,WAAW,EAAEA,WAAW,CAAC;IACvH;IACA,IAAI9C,UAAU,GAAG,IAAI;IACrB,IAAI6B,IAAI,GAAGiB,WAAW,CAAChC,MAAM,CAACe,IAAI,GAAGiB,WAAW,CAAChC,MAAM,CAACe,IAAI,GAAGiB,WAAW,CAAChC,MAAM,CAAC3D,CAAC;IACnF,IAAI2E,GAAG,GAAGgB,WAAW,CAAChC,MAAM,CAACgB,GAAG,GAAGgB,WAAW,CAAChC,MAAM,CAACgB,GAAG,GAAGgB,WAAW,CAAChC,MAAM,CAAC1D,CAAC;IAChF,IAAI0F,WAAW,CAAC2F,OAAO,IAAI3F,WAAW,CAAC2F,OAAO,CAAC3H,MAAM,EAAE;MACnDe,IAAI,GAAGiB,WAAW,CAAC2F,OAAO,CAAC3H,MAAM,CAACe,IAAI;MACtCC,GAAG,GAAGgB,WAAW,CAAC2F,OAAO,CAAC3H,MAAM,CAACgB,GAAG;IACxC;IACA9B,UAAU,GAAG;MACT;MACAxE,EAAE,EAAEsH,WAAW,CAACtH,EAAE;MAAEsF,MAAM,EAAE;QAAE3D,CAAC,EAAE0E,IAAI;QAAEzE,CAAC,EAAE0E,GAAG;QAAEf,KAAK,EAAE+B,WAAW,CAAChC,MAAM,CAACC,KAAK;QAAEC,MAAM,EAAE8B,WAAW,CAAChC,MAAM,CAACE;MAAO,CAAC;MACnH;MACAE,mBAAmB,EAAE,KAAK;MAAE9C,OAAO,EAAE0E,WAAW,CAAC1E,OAAO;MAAEF,SAAS,EAAE4E,WAAW,CAAC5E,SAAS;MAAEG,WAAW,EAAEyE,WAAW,CAACzE,WAAW;MAAEtD,SAAS,EAAE+H,WAAW,CAAC/H,SAAS;MAAEkG,IAAI,EAAE6B,WAAW,CAAC7B,IAAI;MAC1LE,SAAS,EAAE2B,WAAW,CAAC3B,SAAS;MAChC;MACAC,QAAQ,EAAE0B,WAAW,CAAC1B,QAAQ;MAAEb,MAAM,EAAEuC,WAAW,CAACvC,MAAM;MAAEC,OAAO,EAAEsC,WAAW,CAACtC,OAAO;MAAEN,YAAY,EAAE4C,WAAW,CAAC5C,YAAY;MAChI;MACAoB,MAAM,EAAE;QAAEC,KAAK,EAAE,EAAE;QAAEC,UAAU,EAAE,EAAE;QAAEtB,YAAY,EAAE4C,WAAW,CAAC5C,YAAY;QAAEK,MAAM,EAAEuC,WAAW,CAACvC;MAAO,CAAC;MAAEc,KAAK,EAAEyB,WAAW,CAACzB,KAAK;MACnI5F,0BAA0B,EAAE,IAAI,CAACgG,WAAW,CAACqB,WAAW,EAAE,KAAK,CAAC;MAAEpB,aAAa,EAAEoB,WAAW,CAACpB;IACjG,CAAC;IACD;IACA,IAAIa,WAAW,GAAGC,MAAM,CAACC,cAAc,CAACC,OAAO,CAAC,IAAI,CAAC7I,aAAa,CAAC8I,UAAU,GAAG,kBAAkB,CAAC;IACnG,IAAI+F,KAAK,GAAG,CAAC;IACb,IAAI,CAACnG,WAAW,EAAE;MACd,IAAIoG,eAAe,GAAG;QAAE5N,SAAS,EAAEL,UAAU;QAAEoI,WAAW,EAAE;MAAG,CAAC;MAChE6F,eAAe,CAAC7F,WAAW,CAACzG,IAAI,CAAC2D,UAAU,CAAC;MAC5C0I,KAAK,GAAGC,eAAe,CAAC7F,WAAW,CAACoC,OAAO,CAAClF,UAAU,CAAC;MACvD,IAAIkD,oBAAoB,GAAG,EAAE;MAC7BA,oBAAoB,CAAC7G,IAAI,CAACsM,eAAe,CAAC;MAC1C,IAAIC,qBAAqB,GAAGzF,IAAI,CAACO,SAAS,CAACR,oBAAoB,CAAC;MAChEV,MAAM,CAACC,cAAc,CAACoG,OAAO,CAAC,IAAI,CAAChP,aAAa,CAAC8I,UAAU,GAAG,kBAAkB,EAAEiG,qBAAqB,CAAC;IAC5G,CAAC,MACI;MACD,IAAIE,WAAW,GAAG3F,IAAI,CAACC,KAAK,CAACb,WAAW,CAAC;MACzCC,MAAM,CAACC,cAAc,CAACsG,UAAU,CAAC,IAAI,CAAClP,aAAa,CAAC8I,UAAU,GAAG,kBAAkB,CAAC;MACpF,IAAI5H,SAAS,GAAG,IAAI,CAACnB,SAAS,CAACiB,gBAAgB,CAACmO,iBAAiB,CAACF,WAAW,EAAEpO,UAAU,CAAC;MAC1F,IAAIoO,WAAW,CAAC/N,SAAS,CAAC,EAAE;QACxB+N,WAAW,CAAC/N,SAAS,CAAC,CAAC+H,WAAW,CAACzG,IAAI,CAAC2D,UAAU,CAAC;QACnD0I,KAAK,GAAGI,WAAW,CAAC/N,SAAS,CAAC,CAAC+H,WAAW,CAACoC,OAAO,CAAClF,UAAU,CAAC;MAClE,CAAC,MACI;QACD,IAAIiJ,gBAAgB,GAAG;UAAElO,SAAS,EAAEL,UAAU;UAAEoI,WAAW,EAAE;QAAG,CAAC;QACjEmG,gBAAgB,CAACnG,WAAW,CAACzG,IAAI,CAAC2D,UAAU,CAAC;QAC7C0I,KAAK,GAAGO,gBAAgB,CAACnG,WAAW,CAACoC,OAAO,CAAClF,UAAU,CAAC;QACxD8I,WAAW,CAACzM,IAAI,CAAC4M,gBAAgB,CAAC;MACtC;MACA,IAAIL,qBAAqB,GAAGzF,IAAI,CAACO,SAAS,CAACoF,WAAW,CAAC;MACvDtG,MAAM,CAACC,cAAc,CAACoG,OAAO,CAAC,IAAI,CAAChP,aAAa,CAAC8I,UAAU,GAAG,kBAAkB,EAAEiG,qBAAqB,CAAC;IAC5G;EACJ,CAAC;EACDjP,aAAa,CAACU,SAAS,CAACoH,WAAW,GAAG,UAAUyH,IAAI,EAAE1I,OAAO,EAAE;IAC3D,IAAI8H,QAAQ,GAAG,IAAI,CAAC1O,SAAS,CAAC6B,0BAA0B;IACxD,IAAIyN,IAAI,KAAK,KAAK,IAAI,IAAI,CAACtP,SAAS,CAACuE,qBAAqB,CAAC1C,0BAA0B,EAAE;MACnF6M,QAAQ,GAAG,IAAI,CAAC1O,SAAS,CAACuE,qBAAqB,CAAC1C,0BAA0B;IAC9E;IACA,OAAO6M,QAAQ;EACnB,CAAC;EACD;EACA3O,aAAa,CAACU,SAAS,CAAC4J,cAAc,GAAG,UAAUlJ,SAAS,EAAEoO,gBAAgB,EAAE;IAC5E;IACA,IAAIjG,oBAAoB;IACxB;IACA,IAAIX,WAAW,GAAGC,MAAM,CAACC,cAAc,CAACC,OAAO,CAAC,IAAI,CAAC7I,aAAa,CAAC8I,UAAU,GAAG,kBAAkB,CAAC;IACnG,IAAIJ,WAAW,EAAE;MACb,IAAIuG,WAAW,GAAG3F,IAAI,CAACC,KAAK,CAACb,WAAW,CAAC;MACzC,IAAImG,KAAK,GAAG,IAAI,CAAC9O,SAAS,CAACiB,gBAAgB,CAACmO,iBAAiB,CAACF,WAAW,EAAE/N,SAAS,CAAC;MACrF,IAAI+N,WAAW,CAACJ,KAAK,CAAC,EAAE;QACpBxF,oBAAoB,GAAG4F,WAAW,CAACJ,KAAK,CAAC,CAAC5F,WAAW;MACzD,CAAC,MACI;QACDI,oBAAoB,GAAGiG,gBAAgB;MAC3C;IACJ,CAAC,MACI;MACDjG,oBAAoB,GAAGiG,gBAAgB;IAC3C;IACA,OAAOjG,oBAAoB;EAC/B,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI;EACAvJ,aAAa,CAACU,SAAS,CAAC+O,4BAA4B,GAAG,UAAUC,QAAQ,EAAE3O,UAAU,EAAEqJ,cAAc,EAAE;IACnG,IAAI,CAACrK,iBAAiB,CAACqK,cAAc,CAACuF,uBAAuB,CAAC,IAAIvF,cAAc,CAACuF,uBAAuB,KAAK,EAAE,EAAE;MAC7G,IAAI,CAAC1P,SAAS,CAACiB,gBAAgB,CAACC,gBAAgB,GAAG,IAAI;IAC3D,CAAC,MACI;MACD,IAAI,CAAClB,SAAS,CAACiB,gBAAgB,CAACC,gBAAgB,GAAG,KAAK;IAC5D;IACA,IAAI,CAACjB,aAAa,CAAC0P,4BAA4B,CAAC,IAAI,CAAC;IACrD;IACA,IAAIC,kBAAkB,GAAG,IAAI;IAC7B;IACA,IAAIxF,eAAe,GAAG,IAAI,CAACC,cAAc,CAACvJ,UAAU,EAAE,IAAI,CAAC;IAC3D,IAAIsJ,eAAe,IAAI,IAAI,IAAID,cAAc,EAAE;MAC3C,KAAK,IAAIvH,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGwH,eAAe,CAAC/I,MAAM,EAAEuB,CAAC,EAAE,EAAE;QAC7C,IAAIuH,cAAc,CAACvI,EAAE,KAAKwI,eAAe,CAACxH,CAAC,CAAC,CAAChB,EAAE,EAAE;UAC7C,IAAI6N,QAAQ,KAAK,QAAQ,EAAE;YACvB;YACArF,eAAe,CAACxH,CAAC,CAAC,CAACsE,MAAM,GAAG;cAAE3D,CAAC,EAAE4G,cAAc,CAAC0E,OAAO,CAAC3H,MAAM,CAACe,IAAI;cAAEzE,CAAC,EAAE2G,cAAc,CAAC0E,OAAO,CAAC3H,MAAM,CAACgB,GAAG;cAAEf,KAAK,EAAEgD,cAAc,CAACjD,MAAM,CAACC,KAAK;cAAEC,MAAM,EAAE+C,cAAc,CAACjD,MAAM,CAACE;YAAO,CAAC;UACzL,CAAC,MACI,IAAIqI,QAAQ,KAAK,QAAQ,EAAE;YAC5BrF,eAAe,CAACxH,CAAC,CAAC,CAAC6B,WAAW,GAAG0F,cAAc,CAAC0E,OAAO,CAACgB,QAAQ,CAAC,CAAC,CAAC,CAACC,KAAK,CAACrL,WAAW;UACzF,CAAC,MACI,IAAIgL,QAAQ,KAAK,SAAS,EAAE;YAC7BrF,eAAe,CAACxH,CAAC,CAAC,CAAC4B,OAAO,GAAG2F,cAAc,CAAC0E,OAAO,CAACgB,QAAQ,CAAC,CAAC,CAAC,CAACC,KAAK,CAACtL,OAAO;UACjF,CAAC,MACI,IAAIiL,QAAQ,KAAK,WAAW,EAAE;YAC/BrF,eAAe,CAACxH,CAAC,CAAC,CAAC0B,SAAS,GAAG6F,cAAc,CAAC0E,OAAO,CAACgB,QAAQ,CAAC,CAAC,CAAC,CAACC,KAAK,CAACC,WAAW;UACvF,CAAC,MACI,IAAIN,QAAQ,KAAK,OAAO,EAAE;YAC3BrF,eAAe,CAACxH,CAAC,CAAC,CAAC6E,KAAK,GAAG0C,cAAc,CAAC1C,KAAK;UACnD,CAAC,MACI,IAAIgI,QAAQ,KAAK,QAAQ,EAAE;YAC5BG,kBAAkB,GAAGxF,eAAe,CAAC4F,MAAM,CAACpN,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;YACpD;UACJ;UACAwH,eAAe,CAACxH,CAAC,CAAC,CAAC0D,YAAY,GAAG,IAAI,CAACtG,SAAS,CAACoG,UAAU,CAACG,2BAA2B,CAACC,cAAc,CAAC,CAAC;UACxG,IAAI,CAACxG,SAAS,CAACiB,gBAAgB,CAACgP,0BAA0B,CAAC7F,eAAe,CAACxH,CAAC,CAAC,EAAE9B,UAAU,CAAC;QAC9F;MACJ;MACA,IAAI,CAACwJ,oBAAoB,CAACF,eAAe,EAAEtJ,UAAU,CAAC;IAC1D;IACA,OAAO8O,kBAAkB;EAC7B,CAAC;EACD;EACA7P,aAAa,CAACU,SAAS,CAAC6J,oBAAoB,GAAG,UAAUF,eAAe,EAAEtJ,UAAU,EAAE;IAClF;IACA,IAAI6H,WAAW,GAAGC,MAAM,CAACC,cAAc,CAACC,OAAO,CAAC,IAAI,CAAC7I,aAAa,CAAC8I,UAAU,GAAG,kBAAkB,CAAC;IACnG,IAAIJ,WAAW,EAAE;MACb,IAAIuG,WAAW,GAAG3F,IAAI,CAACC,KAAK,CAACb,WAAW,CAAC;MACzCC,MAAM,CAACC,cAAc,CAACsG,UAAU,CAAC,IAAI,CAAClP,aAAa,CAAC8I,UAAU,GAAG,kBAAkB,CAAC;MACpF,IAAI+F,KAAK,GAAG,IAAI,CAAC9O,SAAS,CAACiB,gBAAgB,CAACmO,iBAAiB,CAACF,WAAW,EAAEpO,UAAU,CAAC;MACtF,IAAIoO,WAAW,CAACJ,KAAK,CAAC,EAAE;QACpBI,WAAW,CAACJ,KAAK,CAAC,CAAC5F,WAAW,GAAGkB,eAAe;MACpD;MACA,IAAI4E,qBAAqB,GAAGzF,IAAI,CAACO,SAAS,CAACoF,WAAW,CAAC;MACvDtG,MAAM,CAACC,cAAc,CAACoG,OAAO,CAAC,IAAI,CAAChP,aAAa,CAAC8I,UAAU,GAAG,kBAAkB,EAAEiG,qBAAqB,CAAC;IAC5G;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI;EACAjP,aAAa,CAACU,SAAS,CAACyP,oBAAoB,GAAG,UAAU3E,iBAAiB,EAAEpK,SAAS,EAAE+J,QAAQ,EAAE;IAC7F;IACA,IAAIhF,KAAK;IACT;IACA,IAAIqF,iBAAiB,EAAE;MACnB;MACA,IAAIrE,MAAM,GAAGqE,iBAAiB,CAACO,MAAM;MACrC,IAAIG,WAAW,GAAI/E,MAAM,CAACgF,CAAE;MAC5B,IAAIC,UAAU,GAAIjF,MAAM,CAACkF,CAAE;MAC3B,IAAIC,YAAY,GAAInF,MAAM,CAAC8E,KAAM;MACjC,IAAIM,aAAa,GAAIpF,MAAM,CAAC6E,MAAO;MACnC,IAAIlF,UAAU,GAAG0E,iBAAiB,CAAC1E,UAAU;MAC7C,IAAIC,OAAO,GAAGyE,iBAAiB,CAACzE,OAAO;MACvC;MACAyE,iBAAiB,CAACuB,mBAAmB,GAAGvB,iBAAiB,CAACuB,mBAAmB,GAAGvB,iBAAiB,CAACuB,mBAAmB,GAAG,IAAI,CAAC9M,SAAS,CAACiB,gBAAgB,CAAC8L,mCAAmC,CAACxB,iBAAiB,CAAC;MAC9M;MACAA,iBAAiB,CAACgB,kBAAkB,GAAGhB,iBAAiB,CAACgB,kBAAkB,GAAGhB,iBAAiB,CAACgB,kBAAkB,GAAG,IAAI,CAACvM,SAAS,CAACuE,qBAAqB,GAAG,IAAI,CAACvE,SAAS,CAACuE,qBAAqB,GAAG,IAAI,CAACvE,SAAS,CAAC0G,kBAAkB;MACpO,IAAI6E,iBAAiB,CAACoB,QAAQ,EAAE;QAC5BpB,iBAAiB,CAACgB,kBAAkB,CAAC9F,MAAM,GAAG8E,iBAAiB,CAACoB,QAAQ;MAC5E;MACA;MACA,IAAItF,IAAI,GAAGkE,iBAAiB,CAACC,QAAQ;MACrC,IAAIN,QAAQ,EAAE;QACV7D,IAAI,GAAGzH,aAAa,CAAC2J,IAAI,CAACC,KAAK,CAAC+B,iBAAiB,CAACC,QAAQ,CAAC,CAAC;MAChE;MACAtF,KAAK,GAAG;QACJ;QACAtE,EAAE,EAAE,KAAK,GAAG,IAAI,CAAC3B,aAAa,CAAC0N,cAAc;QAAEzG,MAAM,EAAE;UAAE3D,CAAC,EAAE0I,WAAW;UAAEzI,CAAC,EAAE2I,UAAU;UAAEhF,KAAK,EAAEkF,YAAY;UAAEjF,MAAM,EAAEkF;QAAc,CAAC;QAAEnL,SAAS,EAAEA,SAAS;QAAEkG,IAAI,EAAEA,IAAI;QACtK;QACAC,mBAAmB,EAAE,KAAK;QAAE9C,OAAO,EAAE+G,iBAAiB,CAACsB,OAAO;QAAEpI,WAAW,EAAE8G,iBAAiB,CAACyB,WAAW;QAAE1I,SAAS,EAAEiH,iBAAiB,CAAC0B,SAAS;QAAEkD,YAAY,EAAE5E,iBAAiB,CAAC2B,SAAS;QAC7L;QACArG,UAAU,EAAEA,UAAU;QAAEW,QAAQ,EAAE,IAAI,CAACxH,SAAS,CAACiB,gBAAgB,CAACkM,qBAAqB,CAAC5B,iBAAiB,CAAC6B,QAAQ,EAAE7B,iBAAiB,EAAEA,iBAAiB,CAAC8B,MAAM,CAAC;QAAE1G,MAAM,EAAE4E,iBAAiB,CAAC8B,MAAM;QAAEtG,mBAAmB,EAAEwE,iBAAiB,CAACuB,mBAAmB;QAAElG,OAAO,EAAE2E,iBAAiB,CAACqB,OAAO;QAAEtG,YAAY,EAAEiF,iBAAiB,CAAC+B,YAAY;QAChV5F,MAAM,EAAE;UAAEC,KAAK,EAAE,EAAE;UAAEC,UAAU,EAAE,EAAE;UAAEtB,YAAY,EAAEiF,iBAAiB,CAAC+B,YAAY;UAAE3G,MAAM,EAAE4E,iBAAiB,CAAC8B;QAAO,CAAC;QAAE5F,KAAK,EAAE8D,iBAAiB,CAACgC,IAAI;QAAEzG,OAAO,EAAEA,OAAO;QAAEgB,aAAa,EAAEyD,iBAAiB,CAACiC,aAAa;QAAE9G,kBAAkB,EAAE6E,iBAAiB,CAACgB,kBAAkB;QAAExE,QAAQ,EAAEwD,iBAAiB,CAACgB,kBAAkB,CAAC9F;MACrU,CAAC;MACD,OAAOP,KAAK;IAChB;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACInG,aAAa,CAACU,SAAS,CAAC2P,0BAA0B,GAAG,UAAUjC,gBAAgB,EAAEkC,MAAM,EAAEvP,UAAU,EAAE;IACjG;IACA,IAAI,CAACqN,gBAAgB,EAAE;MACnBA,gBAAgB,GAAG;QAAEkC,MAAM,EAAE;UAAE9M,CAAC,EAAE,EAAE;UAAEC,CAAC,EAAE;QAAG,CAAC;QAAE1C,UAAU,EAAE,CAAC;QAAEqG,KAAK,EAAE1F,SAAS;QAAE2F,MAAM,EAAE3F;MAAU,CAAC;MACnG4O,MAAM,GAAGlC,gBAAgB,CAACkC,MAAM;IACpC,CAAC,MACI,IAAI,CAAClC,gBAAgB,CAACkC,MAAM,EAC7BA,MAAM,GAAG;MAAE9M,CAAC,EAAE,EAAE;MAAEC,CAAC,EAAE;IAAG,CAAC,CAAC,KAE1B6M,MAAM,GAAGlC,gBAAgB,CAACkC,MAAM;IACpC;IACA,IAAIC,iBAAiB,GAAG,IAAI,CAACtQ,SAAS,CAACoG,UAAU,CAACG,2BAA2B,CAACC,cAAc,CAAC,CAAC;IAC9F,IAAIL,cAAc,GAAG,IAAI,CAACnG,SAAS,CAACoG,UAAU,CAACC,UAAU,CAAC,CAAC;IAC3D;IACA,IAAIxE,0BAA0B,GAAG,IAAI,CAAC7B,SAAS,CAACuE,qBAAqB,CAAC1C,0BAA0B,GAAG,IAAI,CAAC7B,SAAS,CAACuE,qBAAqB,CAAC1C,0BAA0B,GAAG,IAAI,CAAC7B,SAAS,CAAC6B,0BAA0B;IAC9M,IAAI6E,kBAAkB,GAAG,IAAI,CAAC1G,SAAS,CAACiB,gBAAgB,CAACsP,cAAc,CAAC,IAAI,CAACvQ,SAAS,CAACuE,qBAAqB,CAAC;IAC7G4J,gBAAgB,CAACxH,MAAM,GAAGwH,gBAAgB,CAACxH,MAAM,GAAGwH,gBAAgB,CAACxH,MAAM,GAAG,IAAI,CAAC3G,SAAS,CAACiB,gBAAgB,CAACuP,sBAAsB,CAAC,KAAK,EAAE9J,kBAAkB,CAAC+H,cAAc,CAAC;IAC9K,IAAI1H,mBAAmB,GAAG,IAAI,CAAC/G,SAAS,CAACuE,qBAAqB,CAACwC,mBAAmB,GAAG,IAAI,CAAC/G,SAAS,CAACuE,qBAAqB,CAACwC,mBAAmB,GAAG,IAAI,CAAC/G,SAAS,CAAC0G,kBAAkB,CAACK,mBAAmB;IACrML,kBAAkB,CAACD,MAAM,GAAG0H,gBAAgB,CAAC1H,MAAM,GAAG0H,gBAAgB,CAAC1H,MAAM,GAAGC,kBAAkB,CAACD,MAAM;IACzG0H,gBAAgB,CAAChH,KAAK,GAAGgH,gBAAgB,CAAChH,KAAK,GAAGgH,gBAAgB,CAAChH,KAAK,GAAG,GAAG;IAC9EgH,gBAAgB,CAAC/G,MAAM,GAAG+G,gBAAgB,CAAC/G,MAAM,GAAG+G,gBAAgB,CAAC/G,MAAM,GAAG,EAAE;IAChF,IAAI1E,QAAQ,GAAGyL,gBAAgB,CAACsC,IAAI,GAAGtC,gBAAgB,CAACsC,IAAI,GAAG,EAAE;IACjE,IAAI,CAAC3Q,iBAAiB,CAAC4C,QAAQ,CAAC,EAAE;MAC9B;MACA,IAAIA,QAAQ,CAAC,CAAC,CAAC,KAAK,GAAG,IAAIA,QAAQ,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;QAC5C,IAAIQ,cAAc,GAAGvD,eAAe,CAAC+C,QAAQ,CAAC;QAC9C,IAAIS,MAAM,GAAGzD,oBAAoB,CAACwD,cAAc,CAAC;QACjDR,QAAQ,GAAG6G,IAAI,CAACO,SAAS,CAAC3G,MAAM,CAAC;MACrC,CAAC,MACI;QACDT,QAAQ,GAAG9C,aAAa,CAAC2J,IAAI,CAACC,KAAK,CAAC9G,QAAQ,CAAC,CAAC;MAClD;IACJ;IACAyL,gBAAgB,CAACsC,IAAI,GAAG/N,QAAQ;IAChC;IACA,IAAIgO,sBAAsB,GAAG,EAAE;IAC/B,IAAIC,GAAG,GAAG;MACN7D,mBAAmB,EAAEqB,gBAAgB,CAACpH,mBAAmB,GAAGoH,gBAAgB,CAACpH,mBAAmB,GAAGA,mBAAmB;MACtHmG,SAAS,EAAE/G,cAAc;MACzByK,SAAS,EAAE,KAAK;MAChBC,eAAe,EAAE,IAAI;MACrBpE,0BAA0B,EAAE0B,gBAAgB,CAACtM,0BAA0B,GAAGsM,gBAAgB,CAACtM,0BAA0B,GAAGA,0BAA0B;MAClJ0K,kBAAkB,EAAE7F,kBAAkB;MACtC+H,cAAc,EAAE,KAAK;MACrBpB,MAAM,EAAEc,gBAAgB,CAACxH,MAAM,GAAGwH,gBAAgB,CAACxH,MAAM,GAAG,OAAO;MACnEmF,MAAM,EAAE;QAAEI,CAAC,EAAEmE,MAAM,CAAC9M,CAAC;QAAE6I,CAAC,EAAEiE,MAAM,CAAC7M,CAAC;QAAEwI,KAAK,EAAEmC,gBAAgB,CAAChH,KAAK;QAAE4E,MAAM,EAAEoC,gBAAgB,CAAC/G,MAAM;QAAE0J,IAAI,EAAET,MAAM,CAAC9M,CAAC;QAAEwN,GAAG,EAAEV,MAAM,CAAC7M,CAAC;QAAEwN,QAAQ,EAAE;UAAE9E,CAAC,EAAEmE,MAAM,CAAC9M,CAAC;UAAE6I,CAAC,EAAEiE,MAAM,CAAC7M;QAAE,CAAC;QAAEyN,IAAI,EAAE;UAAElF,MAAM,EAAEoC,gBAAgB,CAAC/G,MAAM;UAAE8J,OAAO,EAAE,KAAK;UAAElF,KAAK,EAAEmC,gBAAgB,CAAChH;QAAM;MAAE,CAAC;MACrQiG,QAAQ,EAAE,IAAI;MACd+D,WAAW,EAAEb,iBAAiB;MAC9Bc,UAAU,EAAEjD,gBAAgB,CAACtH,UAAU,GAAGsH,gBAAgB,CAACtH,UAAU,GAAG,IAAI;MAC5EwK,kBAAkB,EAAE,IAAI;MACxB7D,aAAa,EAAE,KAAK;MACpB8D,MAAM,EAAEnD,gBAAgB,CAAC1H,MAAM,GAAG0H,gBAAgB,CAAC1H,MAAM,GAAG,KAAK;MACjE8H,OAAO,EAAEJ,gBAAgB,CAACrH,OAAO,GAAGqH,gBAAgB,CAACrH,OAAO,GAAG,IAAI;MACnEwG,YAAY,EAAE,EAAE;MAChBC,IAAI,EAAE,EAAE;MACRV,OAAO,EAAEsB,gBAAgB,CAAC3J,OAAO,GAAG2J,gBAAgB,CAAC3J,OAAO,GAAG,CAAC;MAChEgH,QAAQ,EAAE2C,gBAAgB,CAACsC,IAAI;MAC/Bc,UAAU,EAAEzQ,UAAU;MACtBsN,KAAK,EAAE,EAAE;MACTC,UAAU,EAAE,EAAE;MACdrB,WAAW,EAAEmB,gBAAgB,CAAC1J,WAAW,GAAG0J,gBAAgB,CAAC1J,WAAW,GAAG,iBAAiB;MAC5F+M,OAAO,EAAE,IAAI;MACb5E,OAAO,EAAEuB,gBAAgB,CAACvH,OAAO,GAAGuH,gBAAgB,CAACvH,OAAO,GAAG,KAAK;MACpE6K,IAAI,EAAE,IAAI;MACVxE,SAAS,EAAEkB,gBAAgB,CAAC7J,SAAS,GAAG6J,gBAAgB,CAAC7J,SAAS,GAAG;IACzE,CAAC;IACD;IACAoM,sBAAsB,CAAC,CAAC,CAAC,GAAGC,GAAG;IAC/B,OAAO;MAAED,sBAAsB,EAAEA;IAAuB,CAAC;EAC7D,CAAC;EACD,OAAO3Q,aAAa;AACxB,CAAC,CAAC,CAAE;AACJ,SAASA,aAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}