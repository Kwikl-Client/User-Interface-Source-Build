{"ast":null,"code":"/* eslint-disable */\nimport { createElement, Browser, isBlazor, isNullOrUndefined, closest, initializeCSPTemplate } from '@syncfusion/ej2-base';\nimport { Toolbar as Tool, Menu } from '@syncfusion/ej2-navigations';\n// eslint-disable-next-line max-len\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\nimport { ColorPicker, Slider } from '@syncfusion/ej2-inputs';\nimport { cloneObject } from '../drawing/drawing-util';\nimport { ComboBox } from '@syncfusion/ej2-dropdowns';\nimport { Query } from '@syncfusion/ej2-data';\nimport { DynamicStampItem, SignStampItem, StandardBusinessStampItem } from '../base/types';\n/**\n * @hidden\n */\nvar AnnotationToolbar = /** @class */function () {\n  function AnnotationToolbar(viewer, viewerBase, toolbar) {\n    var _this = this;\n    this.toolbarBorderHeight = 1;\n    /**\n     * @private\n     */\n    this.isToolbarHidden = false;\n    /**\n     * @private\n     */\n    this.isMobileAnnotEnabled = false;\n    this.isHighlightEnabled = false;\n    this.isUnderlineEnabled = false;\n    this.isStrikethroughEnabled = false;\n    this.isHighlightBtnVisible = true;\n    this.isCommentBtnVisible = true;\n    this.isUnderlineBtnVisible = true;\n    this.isStrikethroughBtnVisible = true;\n    this.isColorToolVisible = true;\n    this.isOpacityToolVisible = true;\n    this.isDeleteAnnotationToolVisible = true;\n    this.isCurrentAnnotationOpacitySet = false;\n    this.isStampBtnVisible = false;\n    this.isShapeBtnVisible = false;\n    this.isSignatureBtnVisible = false;\n    this.isInkBtnVisible = false;\n    this.isFontFamilyToolVisible = false;\n    this.isFontSizeToolVisible = false;\n    this.isFontAlignToolVisible = false;\n    this.isFontColorToolVisible = false;\n    this.isFontStylesToolVisible = false;\n    this.isCommentPanelBtnVisible = false;\n    this.isFreeTextBtnVisible = false;\n    this.isCalibrateBtnVisible = false;\n    this.isStrokeColorToolVisible = false;\n    this.isThicknessToolVisible = false;\n    this.stampMenu = [];\n    this.stampParentID = '';\n    /**\n     * @private\n     */\n    this.inkAnnotationSelected = false;\n    /**\n     * @private\n     */\n    this.openSignaturePopup = false;\n    this.isSavedSignatureClicked = false;\n    this.saveSignatureCount = 0;\n    this.saveInitialCount = 0;\n    /**\n     * @private\n     */\n    this.isToolbarCreated = false;\n    // eslint-disable-next-line\n    this.addStampImage = function (args) {\n      // eslint-disable-next-line\n      var proxy = _this;\n      // eslint-disable-next-line\n      var upoadedFiles = args.target.files;\n      if (args.target.files[0] !== null) {\n        var uploadedFile = upoadedFiles[0];\n        _this.pdfViewer.annotationModule.stampAnnotationModule.customStampName = uploadedFile.name.split('.')[0];\n        if (uploadedFile.type.split('/')[0] === 'image') {\n          var reader = new FileReader();\n          // eslint-disable-next-line\n          reader.onload = function (e) {\n            var uploadedFileUrl = e.currentTarget.result;\n            proxy.pdfViewer.annotation.stampAnnotationModule.isStampAddMode = true;\n            proxy.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected = true;\n            proxy.pdfViewerBase.stampAdded = true;\n            _this.pdfViewer.annotationModule.stampAnnotationModule.createCustomStampAnnotation(uploadedFileUrl);\n            proxy.pdfViewerBase.stampAdded = false;\n          };\n          reader.readAsDataURL(uploadedFile);\n        }\n      }\n      args.target.value = '';\n      args.currentTarget.value = '';\n    };\n    this.popupPosition = function (colorElement, buttonElement) {\n      if (colorElement && colorElement.element) {\n        var buttonBounds = buttonElement.getBoundingClientRect();\n        var elements = colorElement.element.getElementsByClassName(\"e-container e-color-palette\")[0].getElementsByClassName(\"e-palette\")[0].getBoundingClientRect();\n        var mainContainerBounds = this.pdfViewerBase.mainContainer.getBoundingClientRect();\n        if (elements.left + elements.width > mainContainerBounds.width) {\n          colorElement.element.parentElement.style.left = elements.left - elements.width + buttonBounds.width + 'px';\n        }\n      }\n    };\n    this.onShapeToolbarClicked = function (args) {\n      var elementId = _this.pdfViewer.element.id;\n      var shapeAnnotationModule = _this.pdfViewer.annotation.shapeAnnotationModule;\n      if (!Browser.isDevice) {\n        _this.deselectAllItems();\n        _this.resetFreeTextAnnot();\n      } else {\n        // eslint:disable-next-line\n        var element = args.originalEvent.target;\n        _this.pdfViewer.toolbarModule.selectItem(element.parentElement);\n      }\n      switch (args.originalEvent.target.id) {\n        case elementId + '_shape_line':\n        case elementId + '_shape_lineIcon':\n          shapeAnnotationModule.setAnnotationType('Line');\n          _this.onShapeDrawSelection(true);\n          _this.updateColorInIcon(_this.colorDropDownElement, shapeAnnotationModule.lineFillColor);\n          _this.updateColorInIcon(_this.strokeDropDownElement, shapeAnnotationModule.lineStrokeColor);\n          _this.handleShapeTool(elementId + '_shape_line');\n          break;\n        case elementId + '_shape_arrow':\n        case elementId + '_shape_arrowIcon':\n          shapeAnnotationModule.setAnnotationType('Arrow');\n          _this.onShapeDrawSelection(true);\n          _this.updateColorInIcon(_this.colorDropDownElement, shapeAnnotationModule.arrowFillColor);\n          _this.updateColorInIcon(_this.strokeDropDownElement, shapeAnnotationModule.arrowStrokeColor);\n          _this.handleShapeTool(elementId + '_shape_arrow');\n          break;\n        case elementId + '_shape_rectangle':\n        case elementId + '_shape_rectangleIcon':\n          shapeAnnotationModule.setAnnotationType('Rectangle');\n          _this.onShapeDrawSelection(true);\n          _this.updateColorInIcon(_this.colorDropDownElement, shapeAnnotationModule.rectangleFillColor);\n          _this.updateColorInIcon(_this.strokeDropDownElement, shapeAnnotationModule.rectangleStrokeColor);\n          _this.handleShapeTool(elementId + '_shape_rectangle');\n          break;\n        case elementId + '_shape_circle':\n        case elementId + '_shape_circleIcon':\n          shapeAnnotationModule.setAnnotationType('Circle');\n          _this.onShapeDrawSelection(true);\n          _this.updateColorInIcon(_this.colorDropDownElement, shapeAnnotationModule.circleFillColor);\n          _this.updateColorInIcon(_this.strokeDropDownElement, shapeAnnotationModule.circleStrokeColor);\n          _this.handleShapeTool(elementId + '_shape_circle');\n          break;\n        case elementId + '_shape_pentagon':\n        case elementId + '_shape_pentagonIcon':\n          shapeAnnotationModule.setAnnotationType('Polygon');\n          _this.onShapeDrawSelection(true);\n          _this.updateColorInIcon(_this.colorDropDownElement, shapeAnnotationModule.polygonFillColor);\n          _this.updateColorInIcon(_this.strokeDropDownElement, shapeAnnotationModule.polygonStrokeColor);\n          _this.handleShapeTool(elementId + '_shape_pentagon');\n          break;\n      }\n      // this.pdfViewer.clearSelection();\n    };\n    this.pdfViewer = viewer;\n    this.pdfViewerBase = viewerBase;\n    this.primaryToolbar = toolbar;\n  }\n  /**\n   * @private\n   */\n  AnnotationToolbar.prototype.initializeAnnotationToolbar = function () {\n    var _this = this;\n    // eslint-disable-next-line max-len\n    this.toolbarElement = createElement('div', {\n      id: this.pdfViewer.element.id + '_annotation_toolbar',\n      className: 'e-pv-annotation-toolbar'\n    });\n    this.pdfViewerBase.viewerMainContainer.appendChild(this.toolbarElement);\n    this.toolbar = new Tool({\n      width: '',\n      height: '',\n      overflowMode: 'Popup',\n      cssClass: 'e-pv-toolbar-scroll',\n      items: this.createToolbarItems(),\n      clicked: this.onToolbarClicked.bind(this),\n      created: function () {\n        _this.createDropDowns();\n      }\n    });\n    this.toolbar.isStringTemplate = true;\n    if (this.pdfViewer.enableRtl) {\n      this.toolbar.enableRtl = true;\n    }\n    this.toolbar.appendTo(this.toolbarElement);\n    this.afterToolbarCreation();\n    this.createStampContainer();\n    this.createSignContainer();\n    this.applyAnnotationToolbarSettings();\n    this.updateToolbarItems();\n    this.showAnnotationToolbar(null, true);\n    this.toolbarElement.setAttribute('aria-label', \"Annotation Toolbar\");\n  };\n  AnnotationToolbar.prototype.createMobileAnnotationToolbar = function (isEnable, isPath) {\n    var _this = this;\n    if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n      if (this.toolbarElement == null && isEnable) {\n        this.isMobileAnnotEnabled = true;\n        // eslint-disable-next-line max-len\n        this.toolbarElement = createElement('div', {\n          id: this.pdfViewer.element.id + '_annotation_toolbar',\n          className: 'e-pv-annotation-toolbar'\n        });\n        this.pdfViewerBase.viewerMainContainer.insertBefore(this.toolbarElement, this.pdfViewerBase.viewerContainer);\n        this.toolbar = new Tool({\n          width: '',\n          height: '',\n          overflowMode: 'Popup',\n          items: this.createMobileToolbarItems(isPath),\n          clicked: this.onToolbarClicked.bind(this),\n          created: function () {\n            _this.createDropDowns(isPath);\n          }\n        });\n        this.toolbar.isStringTemplate = true;\n        if (this.pdfViewer.enableRtl) {\n          this.toolbar.enableRtl = true;\n        }\n        this.pdfViewerBase.navigationPane.goBackToToolbar();\n        this.pdfViewer.toolbarModule.showToolbar(false);\n        this.toolbar.appendTo(this.toolbarElement);\n        this.deleteItem = this.pdfViewerBase.getElement('_annotation_delete');\n        this.deleteItem.firstElementChild.id = this.pdfViewer.element.id + '_annotation_delete';\n      } else if (this.toolbarElement != null) {\n        if (isEnable) {\n          this.isMobileAnnotEnabled = true;\n          this.pdfViewerBase.navigationPane.goBackToToolbar();\n          this.pdfViewer.toolbarModule.showToolbar(false);\n          this.toolbarElement.style.display = 'block';\n        } else if (!isEnable) {\n          this.isMobileAnnotEnabled = false;\n          this.pdfViewer.toolbarModule.showToolbar(true);\n          this.hideMobileAnnotationToolbar();\n        }\n      }\n    } else {\n      this.isMobileAnnotEnabled = true;\n    }\n  };\n  AnnotationToolbar.prototype.hideMobileAnnotationToolbar = function () {\n    if (this.toolbarElement != null) {\n      if (this.pdfViewer.selectedItems.annotations.length > 0 || this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n        if (this.propertyToolbar && this.propertyToolbar.element.children.length > 0) {\n          this.propertyToolbar.element.style.display = 'block';\n          this.toolbarCreated = true;\n        }\n      } else {\n        if (this.toolbar.element.children.length > 0) {\n          this.toolbarCreated = true;\n        } else {\n          this.toolbarCreated = false;\n        }\n        if (this.propertyToolbar && this.propertyToolbar.element.style.display !== 'none') {\n          this.propertyToolbar.element.style.display = 'none';\n          if (!this.toolbarCreated) {\n            var editIcon = document.getElementById(this.pdfViewer.element.id + '_annotationIcon');\n            if (editIcon && editIcon.parentElement.classList.contains('e-pv-select')) {\n              this.createAnnotationToolbarForMobile();\n            }\n          }\n        }\n      }\n      if (this.toolbarElement.children.length > 0) {\n        this.toolbarElement.style.display = 'block';\n      }\n      this.adjustMobileViewer();\n    } else if (this.toolbarCreated && this.propertyToolbar && this.propertyToolbar.element.children.length > 0) {\n      this.propertyToolbar.element.style.display = 'none';\n      this.adjustMobileViewer();\n      this.toolbarCreated = false;\n    }\n  };\n  AnnotationToolbar.prototype.FreeTextForMobile = function () {\n    var _this = this;\n    this.hideExistingTool();\n    // eslint-disable-next-line max-len\n    this.freetextToolbarElement = createElement('div', {\n      id: this.pdfViewer.element.id + '_freeTextToolbar',\n      className: 'e-pv-mobile-annotation-toolbar',\n      styles: 'bottom: 0px; position: absolute; width: 100%; float: left'\n    });\n    this.pdfViewerBase.viewerMainContainer.appendChild(this.freetextToolbarElement);\n    // eslint-disable-next-line max-len\n    var colorTemplate = this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate('span', '_annotation_color', 'e-pv-annotation-color-container');\n    // eslint-disable-next-line max-len\n    var strokeTemplate = this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate('span', '_annotation_stroke', 'e-pv-annotation-stroke-container');\n    var thicknessTemplate = this.getTemplate('span', '_annotation_thickness', 'e-pv-annotation-thickness-container');\n    var opacityTemplate = this.getTemplate('span', '_annotation_opacity', 'e-pv-annotation-opacity-container');\n    var fontFamilyTemplate = this.getTemplate('input', '_annotation_fontname', 'e-pv-annotation-fontname-container');\n    var fontSizeTemplate = this.getTemplate('input', '_annotation_fontsize', 'e-pv-annotation-fontsize-container');\n    var textColorTemplate = this.getTemplate('span', '_annotation_textcolor', 'e-pv-annotation-textcolor-container');\n    var alignmentTemplate = this.getTemplate('span', '_annotation_textalign', 'e-pv-annotation-textalign-container');\n    // eslint-disable-next-line max-len\n    var textPropertiesTemplate = this.getTemplate('span', '_annotation_textproperties', 'e-pv-annotation-textprop-container');\n    // eslint:disable-next-line\n    var items;\n    items = [\n    // eslint-disable-next-line max-len\n    {\n      prefixIcon: 'e-pv-backward-icon e-pv-icon',\n      tooltipText: this.pdfViewer.localeObj.getConstant('Go Back'),\n      id: this.pdfViewer.element.id + '_backward',\n      click: this.goBackToToolbar.bind(this)\n    }, {\n      type: 'Separator',\n      align: 'Left',\n      cssClass: 'e-pv-hightlight-separator-container'\n    }, {\n      template: fontFamilyTemplate\n    }, {\n      template: fontSizeTemplate\n    }, {\n      template: textColorTemplate\n    }, {\n      template: alignmentTemplate\n    }, {\n      template: textPropertiesTemplate\n    }, {\n      template: colorTemplate\n    }, {\n      template: strokeTemplate\n    }, {\n      template: thicknessTemplate\n    }, {\n      template: opacityTemplate\n    }];\n    this.toolbar = new Tool({\n      items: items,\n      width: '',\n      height: '',\n      overflowMode: 'Scrollable',\n      created: function () {\n        // eslint-disable-next-line max-len\n        _this.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(_this.pdfViewer.element.id + '_annotation_freeTextEdit');\n      }\n    });\n    this.toolbar.appendTo(this.freetextToolbarElement);\n    this.showFreeTextPropertiesTool();\n  };\n  /**\n   * @private\n   */\n  AnnotationToolbar.prototype.createPropertyTools = function (shapeType) {\n    var _this = this;\n    if (shapeType !== \"\") {\n      if (this.propertyToolbar) {\n        this.propertyToolbar.destroy();\n      }\n      if (this.toolbar) {\n        this.toolbar.destroy();\n      }\n      // eslint-disable-next-line max-len\n      var shapeToolbarElement = void 0;\n      shapeToolbarElement = document.getElementById(this.pdfViewer.element.id + '_propertyToolbar');\n      if (shapeToolbarElement) {\n        shapeToolbarElement.parentElement.removeChild(shapeToolbarElement);\n      }\n      // eslint-disable-next-line max-len\n      shapeToolbarElement = createElement('div', {\n        id: this.pdfViewer.element.id + '_propertyToolbar',\n        className: 'e-pv-mobile-annotation-toolbar',\n        styles: 'bottom: 0px; position: absolute; width: 100%; float: left'\n      });\n      this.pdfViewerBase.viewerMainContainer.appendChild(shapeToolbarElement);\n      var id_1;\n      var propertyToolbar = new Tool({\n        // eslint-disable-next-line max-len\n        items: this.createPropertyToolbarForMobile(shapeType),\n        width: '',\n        height: '',\n        overflowMode: 'Scrollable',\n        created: function () {\n          if (_this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n            id_1 = _this.pdfViewer.element.id + '_underlineIcon';\n          } else if (_this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'FreeText') {\n            id_1 = _this.pdfViewer.element.id + '_annotation_freeTextEdit';\n            // eslint-disable-next-line max-len\n          } else if (_this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Stamp' || _this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'StickyNotes' || _this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Image') {\n            id_1 = _this.pdfViewer.element.id + '_annotation_stamp';\n            // eslint-disable-next-line max-len\n          } else if (_this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'HandWrittenSignature' || _this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureText') {\n            id_1 = _this.pdfViewer.element.id + '_annotation_handwrittenSign';\n          } else if (_this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureImage') {\n            id_1 = _this.pdfViewer.element.id + '_annotation_handwrittenImage';\n          } else if (_this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Ink' || _this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Path') {\n            id_1 = _this.pdfViewer.element.id + '_annotation_inkIcon';\n          } else if (shapeType === 'Highlight' || shapeType === 'Underline' || shapeType === 'Strikethrough') {\n            id_1 = _this.pdfViewer.element.id + '_highlightIcon';\n          } else {\n            id_1 = _this.pdfViewer.element.id + '_annotation_shapesIcon';\n          }\n          _this.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(id_1);\n        }\n      });\n      propertyToolbar.isStringTemplate = true;\n      propertyToolbar.appendTo(shapeToolbarElement);\n      if (!this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n        if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Line') {\n          this.enableItems(this.colorDropDownElement.parentElement, false);\n        }\n        if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'HandWrittenSignature') {\n          var commentIcon = document.getElementById(this.pdfViewer.element.id + '_annotation_commentPanel');\n          this.enableItems(commentIcon.parentElement, false);\n        }\n      }\n      this.showPropertyTool(propertyToolbar, id_1);\n    }\n  };\n  AnnotationToolbar.prototype.showPropertyTool = function (existingTool, id) {\n    if (this.toolbar) {\n      this.toolbar.destroy();\n    }\n    this.propertyToolbar = existingTool;\n    this.applyProperiesToolSettings(id);\n    //this.propertyToolbar.element.style.display = 'block';\n    if (this.pdfViewer.selectedItems.annotations[0]) {\n      // eslint:disable-next-line\n      var selectedAnnotation = this.pdfViewer.selectedItems.annotations[0];\n      // eslint-disable-next-line max-len\n      if (selectedAnnotation.shapeAnnotationType !== 'SignatureText' && selectedAnnotation.shapeAnnotationType !== 'HandWrittenSignature' && selectedAnnotation.shapeAnnotationType !== 'Stamp' && selectedAnnotation.shapeAnnotationType !== 'Image' && selectedAnnotation.shapeAnnotationType !== 'Ink' && selectedAnnotation.shapeAnnotationType !== 'Path' && selectedAnnotation.shapeAnnotationType !== 'StickyNotes') {\n        this.updateColorInIcon(this.colorDropDownElement, this.pdfViewer.selectedItems.annotations[0].fillColor);\n        this.updateColorInIcon(this.strokeDropDownElement, this.pdfViewer.selectedItems.annotations[0].strokeColor);\n        if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'FreeText') {\n          // eslint:disable-next-line\n          var fontFamily = this.fontFamilyElement;\n          fontFamily.ej2_instances[0].value = this.pdfViewer.selectedItems.annotations[0].fontFamily;\n          // eslint:disable-next-line\n          var fontColor = this.fontColorElement;\n          fontColor.children[0].style.borderBottomColor = this.pdfViewer.selectedItems.annotations[0].fontColor;\n          this.pdfViewer.annotation.modifyTextAlignment(this.pdfViewer.selectedItems.annotations[0].textAlign);\n          this.updateTextAlignInIcon(this.pdfViewer.selectedItems.annotations[0].textAlign);\n        }\n      } else {\n        if (this.strokeDropDownElement) {\n          this.updateColorInIcon(this.strokeDropDownElement, this.pdfViewer.selectedItems.annotations[0].strokeColor);\n        }\n      }\n    }\n    this.toolbarCreated = true;\n    this.adjustMobileViewer();\n  };\n  AnnotationToolbar.prototype.stampToolMobileForMobile = function (args) {\n    var _this = this;\n    this.hideExistingTool();\n    if (this.stampToolbarElement) {\n      this.stampToolbarElement.parentElement.removeChild(this.stampToolbarElement);\n    }\n    // eslint-disable-next-line max-len\n    this.stampToolbarElement = createElement('div', {\n      id: this.pdfViewer.element.id + '_stampToolbar',\n      className: 'e-pv-mobile-annotation-toolbar',\n      styles: 'bottom: 0px; position: absolute; width: 100%; float: left'\n    });\n    this.pdfViewerBase.viewerMainContainer.appendChild(this.stampToolbarElement);\n    // eslint-disable-next-line max-len\n    this.toolbar = new Tool({\n      items: this.createStampToolbarItemsForMobile(),\n      width: '',\n      height: '',\n      overflowMode: 'Scrollable',\n      clicked: this.onShapeToolbarClicked.bind(this),\n      created: function () {\n        _this.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(args);\n      }\n    });\n    this.toolbar.isStringTemplate = true;\n    this.toolbar.appendTo(this.stampToolbarElement);\n    this.showStampPropertiesTool();\n    //this.afterShapeToolbarCreationForMobile();\n  };\n  AnnotationToolbar.prototype.shapeToolMobile = function (args) {\n    var _this = this;\n    this.hideExistingTool();\n    if (this.shapeToolbarElement) {\n      this.shapeToolbarElement.parentElement.removeChild(this.shapeToolbarElement);\n    }\n    // eslint-disable-next-line max-len\n    this.shapeToolbarElement = createElement('div', {\n      id: this.pdfViewer.element.id + '_shapeToolbar',\n      className: 'e-pv-mobile-annotation-toolbar',\n      styles: 'bottom: 0px; position: absolute; width: 100%; float: left'\n    });\n    this.pdfViewerBase.viewerMainContainer.appendChild(this.shapeToolbarElement);\n    // eslint-disable-next-line max-len\n    this.toolbar = new Tool({\n      items: this.createShapeToolbarItemsForMobile(),\n      width: '',\n      height: '',\n      overflowMode: 'Scrollable',\n      clicked: this.onShapeToolbarClicked.bind(this),\n      created: function () {\n        _this.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(args.originalEvent.target.id);\n      }\n    });\n    this.toolbar.isStringTemplate = true;\n    this.toolbar.appendTo(this.shapeToolbarElement);\n    this.afterShapeToolbarCreationForMobile();\n    this.showShapeTool();\n  };\n  AnnotationToolbar.prototype.calibrateToolMobile = function (args) {\n    var _this = this;\n    this.hideExistingTool();\n    if (this.calibrateToolbarElement) {\n      this.calibrateToolbarElement.parentElement.removeChild(this.calibrateToolbarElement);\n    }\n    // eslint-disable-next-line max-len\n    this.calibrateToolbarElement = createElement('div', {\n      id: this.pdfViewer.element.id + '_calibrateToolbar',\n      className: 'e-pv-mobile-annotation-toolbar',\n      styles: 'bottom: 0px; position: absolute; width: 100%; float: left'\n    });\n    this.pdfViewerBase.viewerMainContainer.appendChild(this.calibrateToolbarElement);\n    // eslint-disable-next-line max-len\n    this.toolbar = new Tool({\n      items: this.createCalibrateToolbarItemsForMobile(),\n      width: '',\n      height: '',\n      overflowMode: 'Scrollable',\n      clicked: this.onCalibrateToolbarClicked.bind(this),\n      created: function () {\n        _this.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(args.originalEvent.target.id);\n      }\n    });\n    this.toolbar.isStringTemplate = true;\n    this.toolbar.appendTo(this.calibrateToolbarElement);\n    this.afterCalibrateToolbarCreationForMobile();\n    this.showShapeTool();\n  };\n  AnnotationToolbar.prototype.textMarkupForMobile = function (args) {\n    var _this = this;\n    this.hideExistingTool();\n    if (this.textMarkupToolbarElement) {\n      this.textMarkupToolbarElement.parentElement.removeChild(this.textMarkupToolbarElement);\n    }\n    // eslint-disable-next-line max-len\n    this.textMarkupToolbarElement = createElement('div', {\n      id: this.pdfViewer.element.id + '_mobileAnnotationToolbar',\n      className: 'e-pv-mobile-annotation-toolbar',\n      styles: 'bottom: 0px; position: absolute; width: 100%; float: left'\n    });\n    this.pdfViewerBase.viewerMainContainer.appendChild(this.textMarkupToolbarElement);\n    // eslint-disable-next-line max-len\n    var colorTemplate = this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate('span', '_annotation_color', 'e-pv-annotation-color-container');\n    var opacityTemplate = this.getTemplate('span', '_annotation_opacity', 'e-pv-annotation-opacity-container');\n    // eslint:disable-next-line\n    var items;\n    items = [\n    // eslint-disable-next-line max-len\n    {\n      prefixIcon: 'e-pv-backward-icon e-pv-icon',\n      tooltipText: this.pdfViewer.localeObj.getConstant('Go Back'),\n      id: this.pdfViewer.element.id + '_backward',\n      click: this.goBackToToolbar.bind(this)\n    }, {\n      type: 'Separator',\n      align: 'Left',\n      cssClass: 'e-pv-hightlight-separator-container'\n    }, {\n      template: colorTemplate,\n      align: 'left'\n    }, {\n      template: opacityTemplate,\n      align: 'left'\n    }];\n    this.propertyToolbar = new Tool({\n      items: items,\n      width: '',\n      height: '',\n      overflowMode: 'Scrollable',\n      created: function () {\n        _this.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(args.originalEvent.target.id);\n      }\n    });\n    this.propertyToolbar.isStringTemplate = true;\n    this.propertyToolbar.appendTo(this.textMarkupToolbarElement);\n    this.showTextMarkupPropertiesTool();\n  };\n  AnnotationToolbar.prototype.showShapeTool = function () {\n    // eslint-disable-next-line\n    var annotationToolbarItems = this.pdfViewer.toolbarSettings.annotationToolbarItems;\n    if (annotationToolbarItems) {\n      if (annotationToolbarItems.indexOf('ColorEditTool') !== -1) {\n        this.showColorEditTool(true, 7, 7);\n      } else {\n        this.showColorEditTool(false, 7, 7);\n      }\n      if (annotationToolbarItems.indexOf('StrokeColorEditTool') !== -1) {\n        this.showStrokeColorEditTool(true, 8, 8);\n      } else {\n        this.showStrokeColorEditTool(false, 8, 8);\n      }\n      if (annotationToolbarItems.indexOf('ThicknessEditTool') !== -1) {\n        this.showThicknessEditTool(true, 9, 9);\n      } else {\n        this.showThicknessEditTool(false, 9, 9);\n      }\n      if (annotationToolbarItems.indexOf('OpacityEditTool') !== -1) {\n        this.showOpacityEditTool(true, 10, 10);\n      } else {\n        this.showOpacityEditTool(false, 10, 10);\n      }\n    }\n  };\n  AnnotationToolbar.prototype.signatureInkForMobile = function () {\n    var _this = this;\n    this.hideExistingTool();\n    if (this.signatureInkToolbarElement) {\n      this.signatureInkToolbarElement.parentElement.removeChild(this.signatureInkToolbarElement);\n    }\n    // eslint-disable-next-line max-len\n    this.signatureInkToolbarElement = createElement('div', {\n      id: this.pdfViewer.element.id + '_mobileAnnotationToolbar',\n      className: 'e-pv-mobile-annotation-toolbar',\n      styles: 'bottom: 0px; position: absolute; width: 100%; float: left'\n    });\n    this.pdfViewerBase.viewerMainContainer.appendChild(this.signatureInkToolbarElement);\n    var opacityTemplate = this.getTemplate('span', '_annotation_opacity', 'e-pv-annotation-opacity-container');\n    // eslint-disable-next-line max-len\n    var strokeTemplate = this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate('span', '_annotation_stroke', 'e-pv-annotation-stroke-container');\n    var thicknessTemplate = this.getTemplate('span', '_annotation_thickness', 'e-pv-annotation-thickness-container');\n    // eslint:disable-next-line\n    var items;\n    items = [\n    // eslint-disable-next-line max-len\n    {\n      prefixIcon: 'e-pv-backward-icon e-pv-icon',\n      tooltipText: this.pdfViewer.localeObj.getConstant('Go Back'),\n      id: this.pdfViewer.element.id + '_backward',\n      click: this.goBackToToolbar.bind(this)\n    }, {\n      template: opacityTemplate,\n      align: 'left'\n    }, {\n      template: strokeTemplate,\n      aign: 'left'\n    }, {\n      template: thicknessTemplate,\n      align: 'left'\n    }];\n    this.toolbar = new Tool({\n      items: items,\n      width: '',\n      height: '',\n      overflowMode: 'Scrollable',\n      created: function () {\n        _this.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(_this.pdfViewer.element.id + '_annotation_inkIcon');\n      }\n    });\n    this.toolbar.isStringTemplate = true;\n    this.toolbar.appendTo(this.signatureInkToolbarElement);\n  };\n  AnnotationToolbar.prototype.hideExistingTool = function () {\n    if (this.toolbar && !this.pdfViewer.enableDesktopMode) {\n      this.toolbar.destroy();\n    }\n    if (this.propertyToolbar && !this.pdfViewer.enableDesktopMode) {\n      this.propertyToolbar.destroy();\n    }\n    var mobileAnnotationToolbar = document.getElementById(this.pdfViewer.element.id + '_mobileAnnotationToolbar');\n    if (mobileAnnotationToolbar) {\n      mobileAnnotationToolbar.style.display = 'none';\n    }\n  };\n  AnnotationToolbar.prototype.applyProperiesToolSettings = function (type) {\n    switch (type) {\n      case this.pdfViewer.element.id + '_underlineIcon':\n      case this.pdfViewer.element.id + '_highlightIcon':\n        this.showTextMarkupPropertiesTool();\n        break;\n      case this.pdfViewer.element.id + '_annotation_freeTextEdit':\n        this.showFreeTextPropertiesTool();\n        break;\n      case this.pdfViewer.element.id + '_annotation_shapesIcon':\n        this.shapePropertiesTool();\n        break;\n      case 'stampTool':\n      case this.pdfViewer.element.id + '_annotation_stamp':\n        this.showStampPropertiesTool();\n        break;\n      case this.pdfViewer.element.id + '_annotation_handwrittenSign':\n      case this.pdfViewer.element.id + '_annotation_inkIcon':\n        this.showInkPropertiesTool();\n        break;\n      case this.pdfViewer.element.id + '_annotation_handwrittenImage':\n        this.showImagePropertyTool();\n        break;\n    }\n  };\n  AnnotationToolbar.prototype.showImagePropertyTool = function () {\n    // eslint-disable-next-line\n    var annotationToolbarItems = this.pdfViewer.toolbarSettings.annotationToolbarItems;\n    if (annotationToolbarItems) {\n      if (annotationToolbarItems.indexOf('OpacityEditTool') !== -1) {\n        this.showOpacityEditTool(true, 0, 0);\n      } else {\n        this.showOpacityEditTool(false, 0, 0);\n      }\n      if (annotationToolbarItems.indexOf('CommentPanelTool') !== -1) {\n        this.showCommentPanelTool(true, 1, 1);\n      } else {\n        this.showCommentPanelTool(false, 1, 1);\n      }\n      if (annotationToolbarItems.indexOf('AnnotationDeleteTool') !== -1) {\n        this.showAnnotationDeleteTool(true, 2, 2);\n      } else {\n        this.showAnnotationDeleteTool(false, 2, 2);\n      }\n    }\n  };\n  AnnotationToolbar.prototype.showFreeTextPropertiesTool = function () {\n    // eslint-disable-next-line\n    var annotationToolbarItems = this.pdfViewer.toolbarSettings.annotationToolbarItems;\n    if (annotationToolbarItems) {\n      if (annotationToolbarItems.indexOf('FontFamilyAnnotationTool') !== -1) {\n        this.showFontFamilyAnnotationTool(true, 2, 2);\n      } else {\n        this.showFontFamilyAnnotationTool(false, 2, 2);\n      }\n      if (annotationToolbarItems.indexOf('FontSizeAnnotationTool') !== -1) {\n        this.showFontSizeAnnotationTool(true, 3, 3);\n      } else {\n        this.showFontSizeAnnotationTool(false, 3, 3);\n      }\n      if (annotationToolbarItems.indexOf('FontColorAnnotationTool') !== -1) {\n        this.showFontColorAnnotationTool(true, 4, 4);\n      } else {\n        this.showFontColorAnnotationTool(false, 4, 4);\n      }\n      if (annotationToolbarItems.indexOf('FontAlignAnnotationTool') !== -1) {\n        this.showFontAlignAnnotationTool(true, 5, 5);\n      } else {\n        this.showFontAlignAnnotationTool(false, 5, 5);\n      }\n      if (annotationToolbarItems.indexOf('FontStylesAnnotationTool') !== -1) {\n        this.showFontStylesAnnotationTool(true, 6, 6);\n      } else {\n        this.showFontStylesAnnotationTool(false, 6, 6);\n      }\n      if (annotationToolbarItems.indexOf('ColorEditTool') !== -1) {\n        this.showColorEditTool(true, 7, 7);\n      } else {\n        this.showColorEditTool(false, 7, 7);\n      }\n      if (annotationToolbarItems.indexOf('StrokeColorEditTool') !== -1) {\n        this.showStrokeColorEditTool(true, 8, 8);\n      } else {\n        this.showStrokeColorEditTool(false, 8, 8);\n      }\n      if (annotationToolbarItems.indexOf('ThicknessEditTool') !== -1) {\n        this.showThicknessEditTool(true, 9, 9);\n      } else {\n        this.showThicknessEditTool(false, 9, 9);\n      }\n      if (annotationToolbarItems.indexOf('OpacityEditTool') !== -1) {\n        this.showOpacityEditTool(true, 10, 10);\n      } else {\n        this.showOpacityEditTool(false, 10, 10);\n      }\n      if (annotationToolbarItems.indexOf('CommentPanelTool') !== -1) {\n        this.showCommentPanelTool(true, 11, 11);\n      } else {\n        this.showCommentPanelTool(false, 11, 11);\n      }\n      if (annotationToolbarItems.indexOf('AnnotationDeleteTool') !== -1) {\n        this.showAnnotationDeleteTool(true, 12, 12);\n      } else {\n        this.showAnnotationDeleteTool(false, 12, 12);\n      }\n      if (annotationToolbarItems.indexOf('FreeTextAnnotationTool') !== -1) {\n        this.showFreeTextAnnotationTool(true, 0, 0);\n      } else {\n        this.showFreeTextAnnotationTool(false, 0, 0);\n        this.applyHideToToolbar(false, 1, 1);\n      }\n    }\n  };\n  AnnotationToolbar.prototype.shapePropertiesTool = function () {\n    // eslint-disable-next-line\n    var annotationToolbarItems = this.pdfViewer.toolbarSettings.annotationToolbarItems;\n    if (annotationToolbarItems) {\n      if (annotationToolbarItems.indexOf('ColorEditTool') !== -1) {\n        this.showColorEditTool(true, 2, 2);\n      } else {\n        this.showColorEditTool(false, 2, 2);\n      }\n      if (annotationToolbarItems.indexOf('StrokeColorEditTool') !== -1) {\n        this.showStrokeColorEditTool(true, 3, 3);\n      } else {\n        this.showStrokeColorEditTool(false, 3, 3);\n      }\n      if (annotationToolbarItems.indexOf('ThicknessEditTool') !== -1) {\n        this.showThicknessEditTool(true, 4, 4);\n      } else {\n        this.showThicknessEditTool(false, 4, 4);\n      }\n      if (annotationToolbarItems.indexOf('OpacityEditTool') !== -1) {\n        this.showOpacityEditTool(true, 5, 5);\n      } else {\n        this.showOpacityEditTool(false, 5, 5);\n      }\n      if (annotationToolbarItems.indexOf('CommentPanelTool') !== -1) {\n        this.showCommentPanelTool(true, 6, 6);\n      } else {\n        this.showCommentPanelTool(false, 6, 6);\n      }\n      if (annotationToolbarItems.indexOf('AnnotationDeleteTool') !== -1) {\n        this.showAnnotationDeleteTool(true, 7, 7);\n      } else {\n        this.showAnnotationDeleteTool(false, 7, 7);\n      }\n      if (annotationToolbarItems.indexOf('ShapeTool') !== -1) {\n        this.showShapeAnnotationTool(true, 0, 0);\n      } else {\n        this.showShapeAnnotationTool(false, 0, 0);\n        this.applyHideToToolbar(false, 1, 1);\n      }\n    }\n  };\n  AnnotationToolbar.prototype.showStampPropertiesTool = function () {\n    // eslint-disable-next-line\n    var annotationToolbarItems = this.pdfViewer.toolbarSettings.annotationToolbarItems;\n    if (annotationToolbarItems) {\n      if (annotationToolbarItems.indexOf('OpacityEditTool') !== -1) {\n        this.showOpacityEditTool(true, 2, 2);\n      } else {\n        this.showOpacityEditTool(false, 2, 2);\n      }\n      if (annotationToolbarItems.indexOf('CommentPanelTool') !== -1) {\n        this.showCommentPanelTool(true, 3, 3);\n      } else {\n        this.showCommentPanelTool(false, 3, 3);\n      }\n      if (annotationToolbarItems.indexOf('AnnotationDeleteTool') !== -1) {\n        this.showAnnotationDeleteTool(true, 4, 4);\n      } else {\n        this.showAnnotationDeleteTool(false, 4, 4);\n      }\n      if (annotationToolbarItems.indexOf('StampAnnotationTool') !== -1) {\n        this.showStampAnnotationTool(true, 0, 0);\n      } else {\n        this.showStampAnnotationTool(false, 0, 0);\n        this.applyHideToToolbar(false, 1, 1);\n      }\n    }\n  };\n  AnnotationToolbar.prototype.showTextMarkupPropertiesTool = function () {\n    // eslint-disable-next-line\n    var annotationToolbarItems = this.pdfViewer.toolbarSettings.annotationToolbarItems;\n    if (annotationToolbarItems) {\n      if (annotationToolbarItems.indexOf('ColorEditTool') !== -1) {\n        this.showColorEditTool(true, 2, 2);\n      } else {\n        this.showColorEditTool(false, 2, 2);\n      }\n      if (annotationToolbarItems.indexOf('OpacityEditTool') !== -1) {\n        this.showOpacityEditTool(true, 3, 3);\n      } else {\n        this.showOpacityEditTool(false, 3, 3);\n      }\n      if (annotationToolbarItems.indexOf('CommentPanelTool') !== -1) {\n        this.showCommentPanelTool(true, 4, 4);\n      } else {\n        this.showCommentPanelTool(false, 4, 4);\n      }\n      if (annotationToolbarItems.indexOf('AnnotationDeleteTool') !== -1) {\n        this.showAnnotationDeleteTool(true, 5, 5);\n      } else {\n        this.showAnnotationDeleteTool(false, 5, 5);\n      }\n      if (annotationToolbarItems.includes(\"HighlightTool\") || annotationToolbarItems.includes(\"UnderlineTool\") || annotationToolbarItems.includes(\"StrikethroughTool\")) {\n        this.applyHideToToolbar(true, 0, 0);\n      } else {\n        this.applyHideToToolbar(false, 0, 0);\n        this.applyHideToToolbar(false, 1, 1);\n      }\n    }\n  };\n  AnnotationToolbar.prototype.showInkPropertiesTool = function () {\n    // eslint-disable-next-line\n    var annotationToolbarItems = this.pdfViewer.toolbarSettings.annotationToolbarItems;\n    if (annotationToolbarItems) {\n      if (annotationToolbarItems.indexOf('StrokeColorEditTool') !== -1) {\n        this.showStrokeColorEditTool(true, 2, 2);\n      } else {\n        this.showStrokeColorEditTool(false, 2, 2);\n      }\n      if (annotationToolbarItems.indexOf('ThicknessEditTool') !== -1) {\n        this.showThicknessEditTool(true, 3, 3);\n      } else {\n        this.showThicknessEditTool(false, 3, 3);\n      }\n      if (annotationToolbarItems.indexOf('OpacityEditTool') !== -1) {\n        this.showOpacityEditTool(true, 4, 4);\n      } else {\n        this.showOpacityEditTool(false, 4, 4);\n      }\n      if (annotationToolbarItems.indexOf('CommentPanelTool') !== -1) {\n        this.showCommentPanelTool(true, 5, 5);\n      } else {\n        this.showCommentPanelTool(false, 5, 5);\n      }\n      if (annotationToolbarItems.indexOf('AnnotationDeleteTool') !== -1) {\n        this.showAnnotationDeleteTool(true, 6, 6);\n      } else {\n        this.showAnnotationDeleteTool(false, 6, 6);\n      }\n      if (annotationToolbarItems.indexOf('HandWrittenSignatureTool') !== -1) {\n        this.showSignatureTool(true, 0, 0);\n      } else {\n        this.showSignatureTool(false, 0, 0);\n        this.applyHideToToolbar(false, 1, 1);\n      }\n    }\n  };\n  /**\n   * @private\n   */\n  // eslint:disable-next-line\n  AnnotationToolbar.prototype.createAnnotationToolbarForMobile = function (id) {\n    var hideToolbar;\n    if (id) {\n      var editIcon = document.getElementById(id);\n      if (editIcon.parentElement.classList.contains('e-pv-select')) {\n        hideToolbar = true;\n        editIcon.parentElement.classList.remove('e-pv-select');\n      } else {\n        hideToolbar = false;\n        this.pdfViewer.toolbarModule.selectItem(editIcon.parentElement);\n      }\n    }\n    if (hideToolbar) {\n      this.toolbarCreated = false;\n      this.adjustMobileViewer();\n      if (this.toolbar) {\n        this.toolbar.destroy();\n      }\n      if (this.propertyToolbar) {\n        this.propertyToolbar.destroy();\n      }\n      var mobileAnnotationToolbar = document.getElementById(this.pdfViewer.element.id + '_mobileAnnotationToolbar');\n      if (mobileAnnotationToolbar) {\n        mobileAnnotationToolbar.style.display = 'none';\n      }\n      return [];\n    } else {\n      this.isToolbarCreated = true;\n      if (this.propertyToolbar) {\n        this.propertyToolbar.destroy();\n      }\n      if (this.toolbarElement) {\n        this.toolbarElement.parentElement.removeChild(this.toolbarElement);\n      }\n      // eslint-disable-next-line max-len\n      this.toolbarElement = createElement('div', {\n        id: this.pdfViewer.element.id + '_mobileAnnotationToolbar',\n        className: 'e-pv-mobile-annotation-toolbar',\n        styles: 'bottom: 0px; position: absolute; width: 100%; float: left;'\n      });\n      //this.toolbarElement.append(this.pdfViewerBase.viewerContainer);\n      this.pdfViewerBase.viewerMainContainer.appendChild(this.toolbarElement);\n      var stampTemplate = this.getTemplate('span', '_annotation_stamp', 'e-pv-annotation-stamp-container');\n      var signTemplate = this.getTemplate('span', '_annotation_signature', 'e-pv-annotation-handwritten-container');\n      // eslint:disable-next-line\n      var items = void 0;\n      items = [\n      // eslint-disable-next-line max-len\n      {\n        prefixIcon: 'e-pv-comment-icon e-pv-icon',\n        className: 'e-pv-comment-container',\n        id: this.pdfViewer.element.id + '_comment'\n      }, {\n        type: 'Separator',\n        align: 'Left'\n      },\n      // eslint-disable-next-line max-len\n      {\n        prefixIcon: 'e-pv-highlight-icon e-pv-icon',\n        className: 'e-pv-highlight-container',\n        id: this.pdfViewer.element.id + '_highlight'\n      },\n      // eslint-disable-next-line max-len\n      {\n        prefixIcon: 'e-pv-underline-icon e-pv-icon',\n        className: 'e-pv-underline-container',\n        id: this.pdfViewer.element.id + '_underline'\n      },\n      // eslint-disable-next-line max-len\n      {\n        prefixIcon: 'e-pv-strikethrough-icon e-pv-icon',\n        className: 'e-pv-strikethrough-container',\n        id: this.pdfViewer.element.id + '_strikethrough'\n      }, {\n        type: 'Separator',\n        align: 'Left'\n      },\n      // eslint-disable-next-line max-len\n      {\n        prefixIcon: 'e-pv-annotation-shape-icon e-pv-icon',\n        className: 'e-pv-annotation-shapes-container',\n        id: this.pdfViewer.element.id + '_annotation_shapes'\n      }, {\n        type: 'Separator',\n        align: 'Left'\n      },\n      // eslint-disable-next-line max-len\n      {\n        prefixIcon: 'e-pv-annotation-calibrate-icon e-pv-icon',\n        className: 'e-pv-annotation-calibrate-container',\n        id: this.pdfViewer.element.id + '_annotation_calibrate'\n      }, {\n        type: 'Separator',\n        align: 'Left'\n      },\n      // eslint-disable-next-line max-len\n      {\n        prefixIcon: 'e-pv-freetext-icon e-pv-icon',\n        className: 'e-pv-annotation-freetextedit-container',\n        id: this.pdfViewer.element.id + '_annotation_freeTextEdit'\n      }, {\n        type: 'Separator',\n        align: 'Left'\n      }, {\n        template: stampTemplate\n      }, {\n        type: 'Separator',\n        align: 'Left'\n      }, {\n        template: signTemplate,\n        align: 'Left'\n      }, {\n        type: 'Separator',\n        align: 'Left'\n      },\n      // eslint-disable-next-line max-len\n      {\n        prefixIcon: 'e-pv-inkannotation-icon e-pv-icon',\n        className: 'e-pv-annotation-ink-container',\n        id: this.pdfViewer.element.id + '_annotation_ink',\n        align: 'Left'\n      }, {\n        type: 'Separator',\n        align: 'Left'\n      },\n      // eslint-disable-next-line max-len\n      {\n        prefixIcon: 'e-pv-comment-panel-icon e-pv-icon',\n        className: 'e-pv-comment-panel-icon-container',\n        id: this.pdfViewer.element.id + '_annotation_commentPanel',\n        align: 'Right'\n      }];\n      if (this.toolbarCreated && this.toolbar) {\n        this.toolbar.destroy();\n        this.toolbarCreated = false;\n        this.adjustMobileViewer();\n      } else {\n        // eslint-disable-next-line max-len\n        this.toolbar = new Tool({\n          items: items,\n          width: '',\n          height: '',\n          overflowMode: 'Scrollable',\n          clicked: this.onToolbarClicked.bind(this)\n        });\n        if (this.pdfViewer.enableRtl) {\n          this.toolbar.enableRtl = true;\n        }\n        this.toolbar.isStringTemplate = true;\n        this.toolbar.appendTo(this.toolbarElement);\n        this.afterMobileToolbarCreation();\n        this.createStampContainer();\n        this.createSignContainer();\n        this.applyMobileAnnotationToolbarSettings();\n        this.toolbarCreated = true;\n        this.adjustMobileViewer();\n      }\n      return items;\n    }\n  };\n  /**\n   * @private\n   */\n  AnnotationToolbar.prototype.adjustMobileViewer = function () {\n    var toolbarHeight;\n    if (this.toolbarElement) {\n      toolbarHeight = this.toolbarElement.clientHeight;\n    }\n    var isPrimaryTool = false;\n    if (this.toolbarElement && this.toolbarElement.children.length === 0 && this.propertyToolbar && this.propertyToolbar.element.children.length > 0) {\n      toolbarHeight = this.propertyToolbar.element.clientHeight;\n      if (this.pdfViewer.toolbarModule.toolbarElement.style.display === 'none') {\n        this.pdfViewer.toolbarModule.toolbarElement.style.display = 'block';\n      }\n    } else if (this.freetextToolbarElement && this.freetextToolbarElement.children.length > 0) {\n      toolbarHeight = this.freetextToolbarElement.clientHeight;\n    } else if (toolbarHeight === 0 && this.pdfViewer.toolbarModule.toolbar) {\n      toolbarHeight = this.pdfViewer.toolbarModule.toolbarElement.clientHeight;\n      isPrimaryTool = true;\n    } else if (!toolbarHeight && this.propertyToolbar && this.propertyToolbar.element.children.length > 0) {\n      toolbarHeight = this.propertyToolbar.element.clientHeight;\n    }\n    if (this.pdfViewer.enableToolbar && this.toolbarCreated) {\n      // eslint-disable-next-line max-len\n      this.pdfViewerBase.viewerContainer.style.height = this.updateViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer), toolbarHeight + toolbarHeight) + 'px';\n    } else {\n      if (!isPrimaryTool) {\n        if (this.pdfViewerBase.viewerContainer.style.height.split('%').length > 1) {\n          this.pdfViewerBase.viewerContainer.style.height = this.resetViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer), -toolbarHeight) + 'px';\n        } else {\n          this.pdfViewerBase.viewerContainer.style.height = this.resetViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer), toolbarHeight) + 'px';\n        }\n      }\n    }\n  };\n  /**\n   * Shows /hides the toolbar in the PdfViewer\n   * @param  {boolean} enableToolbar - If set true , its show the Toolbar\n   * @returns void\n   */\n  AnnotationToolbar.prototype.showToolbar = function (enable) {\n    var toolbar = this.toolbarElement;\n    if (enable) {\n      toolbar.style.display = 'block';\n      if (Browser.isDevice && this.pdfViewer.toolbarModule && this.pdfViewer.toolbarModule.annotationToolbarModule) {\n        this.pdfViewer.toolbarModule.annotationToolbarModule.hideMobileAnnotationToolbar();\n      }\n    } else {\n      toolbar.style.display = 'none';\n    }\n  };\n  // eslint-disable-next-line\n  AnnotationToolbar.prototype.createMobileToolbarItems = function (isPath) {\n    var colorTemplate = this.getTemplate('span', '_annotation_color', 'e-pv-annotation-color-container');\n    var opacityTemplate = this.getTemplate('span', '_annotation_opacity', 'e-pv-annotation-opacity-container');\n    // eslint-disable-next-line\n    var items = [];\n    items.push({\n      prefixIcon: 'e-pv-backward-icon e-pv-icon',\n      tooltipText: this.pdfViewer.localeObj.getConstant('Go Back'),\n      id: this.pdfViewer.element.id + '_backward',\n      click: this.goBackToToolbar.bind(this)\n    });\n    // eslint-disable-next-line max-len\n    if (!isPath) {\n      items.push({\n        template: colorTemplate,\n        align: 'right'\n      });\n      items.push({\n        template: opacityTemplate,\n        align: 'right'\n      });\n      items.push({\n        type: 'Separator',\n        align: 'right'\n      });\n    }\n    // eslint-disable-next-line max-len\n    items.push({\n      prefixIcon: 'e-pv-annotation-delete-icon e-pv-icon',\n      className: 'e-pv-annotation-delete-container',\n      id: this.pdfViewer.element.id + '_annotation_delete',\n      align: 'right'\n    });\n    return items;\n  };\n  AnnotationToolbar.prototype.goBackToToolbar = function () {\n    this.isMobileAnnotEnabled = false;\n    if (this.toolbarElement.children.length > 0) {\n      this.toolbarElement.style.display = 'block';\n    } else {\n      this.toolbarCreated = false;\n      this.toolbar.destroy();\n      this.createAnnotationToolbarForMobile();\n    }\n    var page = this.pdfViewerBase.getSelectTextMarkupCurrentPage();\n    if (page) {\n      this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage = null;\n      this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearAnnotationSelection(page);\n    }\n  };\n  // eslint-disable-next-line\n  AnnotationToolbar.prototype.createToolbarItems = function () {\n    var colorTemplate = this.getTemplate('button', '_annotation_color', 'e-pv-annotation-color-container');\n    var strokeTemplate = this.getTemplate('button', '_annotation_stroke', 'e-pv-annotation-stroke-container');\n    var thicknessTemplate = this.getTemplate('button', '_annotation_thickness', 'e-pv-annotation-thickness-container');\n    var opacityTemplate = this.getTemplate('button', '_annotation_opacity', 'e-pv-annotation-opacity-container');\n    var shapesTemplate = this.getTemplate('button', '_annotation_shapes', 'e-pv-annotation-shapes-container');\n    var calibrateTemplate = this.getTemplate('button', '_annotation_calibrate', 'e-pv-annotation-calibrate-container');\n    var stampTemplate = this.getTemplate('span', '_annotation_stamp', 'e-pv-annotation-stamp-container');\n    var fontFamilyTemplate = this.getTemplate('button', '_annotation_fontname', 'e-pv-annotation-fontname-container');\n    var fontSizeTemplate = this.getTemplate('button', '_annotation_fontsize', 'e-pv-annotation-fontsize-container');\n    var textColorTemplate = this.getTemplate('button', '_annotation_textcolor', 'e-pv-annotation-textcolor-container');\n    var alignmentTemplate = this.getTemplate('button', '_annotation_textalign', 'e-pv-annotation-textalign-container');\n    var textPropertiesTemplate = this.getTemplate('button', '_annotation_textproperties', 'e-pv-annotation-textprop-container');\n    var signTemplate = this.getTemplate('button', '_annotation_signature', 'e-pv-annotation-handwritten-container');\n    // eslint-disable-next-line\n    var items = [];\n    // eslint-disable-next-line max-len\n    items.push({\n      prefixIcon: 'e-pv-highlight-icon e-pv-icon',\n      className: 'e-pv-highlight-container',\n      id: this.pdfViewer.element.id + '_highlight',\n      align: 'Left'\n    });\n    items.push({\n      prefixIcon: 'e-pv-underline-icon e-pv-icon',\n      className: 'e-pv-underline-container',\n      id: this.pdfViewer.element.id + '_underline',\n      align: 'Left'\n    });\n    // eslint-disable-next-line max-len\n    items.push({\n      prefixIcon: 'e-pv-strikethrough-icon e-pv-icon',\n      className: 'e-pv-strikethrough-container',\n      id: this.pdfViewer.element.id + '_strikethrough',\n      align: 'Left'\n    });\n    items.push({\n      type: 'Separator',\n      align: 'Left',\n      cssClass: 'e-pv-hightlight-separator-container'\n    });\n    items.push({\n      template: shapesTemplate,\n      align: 'Left',\n      cssClass: 'e-pv-shape-template-container'\n    });\n    items.push({\n      type: 'Separator',\n      align: 'Left',\n      cssClass: 'e-pv-shape-separator-container'\n    });\n    items.push({\n      template: calibrateTemplate,\n      align: 'Left',\n      cssClass: 'e-pv-calibrate-template-container'\n    });\n    items.push({\n      type: 'Separator',\n      align: 'Left',\n      cssClass: 'e-pv-calibrate-separator-container'\n    });\n    // eslint-disable-next-line max-len\n    items.push({\n      prefixIcon: 'e-pv-freetext-icon e-pv-icon',\n      className: 'e-pv-annotation-freetextedit-container',\n      id: this.pdfViewer.element.id + '_annotation_freeTextEdit',\n      align: 'Left'\n    });\n    items.push({\n      type: 'Separator',\n      align: 'Left',\n      cssClass: 'e-pv-freetext-separator-container'\n    });\n    items.push({\n      template: stampTemplate,\n      align: 'Left',\n      cssClass: 'e-pv-stamp-template-container'\n    });\n    items.push({\n      type: 'Separator',\n      align: 'Left',\n      cssClass: 'e-pv-stamp-separator-container'\n    });\n    // eslint-disable-next-line max-len\n    items.push({\n      template: signTemplate,\n      align: 'Left',\n      cssClass: 'e-pv-sign-template-container'\n    });\n    items.push({\n      type: 'Separator',\n      align: 'Left',\n      cssClass: 'e-pv-sign-separator-container'\n    });\n    // eslint-disable-next-line max-len\n    items.push({\n      prefixIcon: 'e-pv-inkannotation-icon e-pv-icon',\n      className: 'e-pv-annotation-ink-container',\n      id: this.pdfViewer.element.id + '_annotation_ink',\n      align: 'Left'\n    });\n    items.push({\n      type: 'Separator',\n      align: 'Left',\n      cssClass: 'e-pv-ink-separator-container'\n    });\n    items.push({\n      template: fontFamilyTemplate,\n      align: 'Left',\n      cssClass: 'e-pv-fontfamily-container'\n    });\n    items.push({\n      template: fontSizeTemplate,\n      align: 'Left',\n      cssClass: 'e-pv-fontsize-container'\n    });\n    items.push({\n      template: textColorTemplate,\n      align: 'Left',\n      cssClass: 'e-pv-text-color-container'\n    });\n    items.push({\n      template: alignmentTemplate,\n      align: 'Left',\n      cssClass: 'e-pv-alignment-container'\n    });\n    items.push({\n      template: textPropertiesTemplate,\n      align: 'Left',\n      cssClass: 'e-pv-text-properties-container'\n    });\n    items.push({\n      type: 'Separator',\n      align: 'Left',\n      cssClass: 'e-pv-text-separator-container'\n    });\n    items.push({\n      template: colorTemplate,\n      align: 'Left',\n      cssClass: 'e-pv-color-template-container'\n    });\n    items.push({\n      template: strokeTemplate,\n      align: 'Left',\n      cssClass: 'e-pv-stroke-template-container'\n    });\n    items.push({\n      template: thicknessTemplate,\n      align: 'Left',\n      cssClass: 'e-pv-thickness-template-container'\n    });\n    items.push({\n      template: opacityTemplate,\n      align: 'Left',\n      cssClass: 'e-pv-opacity-template-container'\n    });\n    items.push({\n      type: 'Separator',\n      align: 'Left',\n      cssClass: 'e-pv-opacity-separator-container'\n    });\n    // eslint-disable-next-line max-len\n    items.push({\n      prefixIcon: 'e-pv-annotation-delete-icon e-pv-icon',\n      className: 'e-pv-annotation-delete-container',\n      id: this.pdfViewer.element.id + '_annotation_delete',\n      align: 'Left'\n    });\n    // eslint-disable-next-line max-len\n    items.push({\n      prefixIcon: 'e-pv-comment-panel-icon e-pv-icon',\n      className: 'e-pv-comment-panel-icon-container',\n      id: this.pdfViewer.element.id + '_annotation_commentPanel',\n      align: 'Right'\n    });\n    // eslint-disable-next-line max-len\n    items.push({\n      prefixIcon: 'e-pv-annotation-tools-close-icon e-pv-icon',\n      className: 'e-pv-annotation-tools-close-container',\n      id: this.pdfViewer.element.id + '_annotation_close',\n      align: 'Right'\n    });\n    return items;\n  };\n  AnnotationToolbar.prototype.createSignContainer = function () {\n    var _this = this;\n    this.handWrittenSignatureItem = this.pdfViewerBase.getElement('_annotation_signature');\n    // eslint-disable-next-line max-len\n    this.primaryToolbar.createTooltip(this.pdfViewerBase.getElement('_annotation_signature'), this.pdfViewer.localeObj.getConstant('SignatureFieldDialogHeaderText'));\n    this.handWrittenSignatureItem.setAttribute('aria-label', this.pdfViewer.localeObj.getConstant('SignatureFieldDialogHeaderText'));\n    // eslint-disable-next-line\n    var proxy = this;\n    var items = [];\n    if (this.pdfViewer.handWrittenSignatureSettings.signatureItem.length === 0 || this.pdfViewer.handWrittenSignatureSettings.signatureItem.length == 2) {\n      items = [{\n        text: 'ADD SIGNATURE'\n      }, {\n        separator: true\n      }, {\n        text: 'ADD INITIAL'\n      }];\n    } else {\n      if (this.pdfViewer.handWrittenSignatureSettings.signatureItem[0] === 'Signature') {\n        items = [{\n          text: 'ADD SIGNATURE'\n        }];\n      } else {\n        items = [{\n          text: 'ADD INITIAL'\n        }];\n      }\n    }\n    var saveOptions = {\n      items: items,\n      iconCss: 'e-pv-handwritten-icon e-pv-icon',\n      cssClass: 'e-pv-handwritten-popup',\n      open: function (args) {\n        proxy.openSignature();\n      },\n      beforeItemRender: function (args) {\n        _this.pdfViewer.clearSelection(_this.pdfViewerBase.currentPageNumber - 1);\n        if (args.element && args.element.className.indexOf(\"e-separator\") !== -1) {\n          args.element.style.margin = \"8px 0\";\n          args.element.setAttribute('role', 'menuitem');\n          args.element.setAttribute('aria-label', 'separator');\n        }\n        if (args.item.text === 'ADD SIGNATURE') {\n          args.element.innerHTML = '';\n          _this.saveSignatureCount = 0;\n          for (var collection = _this.pdfViewerBase.signatureModule.signaturecollection.length; collection > 0; collection--) {\n            if (_this.saveSignatureCount < _this.pdfViewerBase.signatureModule.getSaveLimit(_this.pdfViewer.handWrittenSignatureSettings.saveSignatureLimit)) {\n              args.element.style.display = 'block';\n              // eslint-disable-next-line\n              var signatureCollection = _this.pdfViewerBase.signatureModule.signaturecollection[collection - 1];\n              // eslint-disable-next-line\n              var collectionKey = signatureCollection.image[0].imageData;\n              var signatureID = signatureCollection.image[0].id.split('_')[1];\n              if (!signatureCollection.isInitial && collectionKey !== '') {\n                // eslint-disable-next-line max-len\n                var signatureContainer = createElement('div');\n                signatureContainer.id = 's' + signatureID;\n                signatureContainer.style.display = 'block';\n                signatureContainer.style.paddingBottom = '10px';\n                var signatureSpan = createElement('span');\n                signatureSpan.id = 'sign_border_' + signatureID;\n                signatureSpan.classList.add('e-pv-align-border');\n                var signatureImage = void 0;\n                if (signatureCollection.image[0].signatureType === 'SignatureText') {\n                  signatureImage = createElement('div');\n                  signatureImage.classList.add('e-pv-align-border-div');\n                  signatureImage.innerText = collectionKey;\n                  signatureImage.style.fontFamily = signatureCollection.image[0].fontFamily;\n                  signatureImage.style.fontSize = '15px';\n                  signatureImage.style.display = 'inline-flex';\n                  signatureImage.style.alignItems = 'center';\n                  signatureImage.style.position = 'relative';\n                  signatureImage.id = 'sign_' + signatureID;\n                  signatureImage.style.width = '80px';\n                  signatureImage.style.height = '53px';\n                  signatureImage.style.overflow = 'hidden';\n                  signatureImage.style.textOverflow = 'ellipsis';\n                  signatureImage.style.paddingLeft = '11px';\n                } else {\n                  signatureImage = createElement('img');\n                  signatureImage.id = 'sign_' + signatureID;\n                  signatureImage.src = collectionKey;\n                  signatureImage.width = 80;\n                  signatureImage.height = 32;\n                  signatureImage.classList.add('e-pv-signatureimage');\n                  signatureImage.style.paddingLeft = '20px';\n                  signatureImage.style.paddingRight = '18px';\n                  signatureImage.style.paddingTop = '12px';\n                  signatureImage.style.paddingBottom = '12px';\n                  signatureImage.style.boxSizing = 'content-box';\n                  signatureImage.setAttribute('alt', 'Saved Signature');\n                }\n                signatureImage.addEventListener('mouseover', _this.hoverSignatureImage.bind(_this));\n                signatureImage.addEventListener('mouseleave', _this.leaveSignatureImage.bind(_this));\n                var signatureDeleteSpan = createElement('span');\n                signatureDeleteSpan.id = 'delete_' + signatureID;\n                signatureDeleteSpan.classList.add('e-pv-delete');\n                signatureDeleteSpan.classList.add('e-pv-align');\n                signatureSpan.append(signatureImage);\n                signatureSpan.append(signatureDeleteSpan);\n                signatureContainer.append(signatureSpan);\n                args.element.appendChild(signatureContainer);\n                args.element.style.pointerEvents = 'auto';\n                args.element.style.background = 'none';\n                _this.pdfViewerBase.getElement('_annotation_signature-popup').style.width = '206px';\n                _this.saveSignatureCount++;\n              }\n            }\n          }\n          var addInitialSpan = createElement('button');\n          addInitialSpan.classList.add(\"e-control\", \"e-btn\", \"e-lib\", \"e-outline\", \"e-primary\");\n          addInitialSpan.textContent = _this.pdfViewer.localeObj.getConstant('HandwrittenSignatureDialogHeaderText');\n          _this.pdfViewer.locale === 'en-US' ? addInitialSpan.style.width = \"130px\" : addInitialSpan.style.width = \"auto\";\n          addInitialSpan.style.height = \"36px\";\n          addInitialSpan.addEventListener('click', _this.clickSignature.bind(_this));\n          args.element.appendChild(addInitialSpan);\n          args.element.addEventListener('mouseover', _this.hoverInitialBtn.bind(_this));\n          args.element.style.width = '206px';\n          args.element.style.display = 'flex';\n          args.element.style.flexDirection = 'column';\n          args.element.style.height = 'auto';\n          args.element.style.alignItems = 'center';\n          args.element.setAttribute('role', 'menuitem');\n        }\n        if (args.item.text === 'ADD INITIAL') {\n          _this.saveInitialCount = 0;\n          args.element.innerHTML = '';\n          for (var collection = _this.pdfViewerBase.signatureModule.signaturecollection.length; collection > 0; collection--) {\n            if (_this.saveInitialCount < _this.pdfViewerBase.signatureModule.getSaveLimit(_this.pdfViewer.handWrittenSignatureSettings.saveInitialLimit)) {\n              // eslint-disable-next-line\n              var signatureCollection = _this.pdfViewerBase.signatureModule.signaturecollection[collection - 1];\n              // eslint-disable-next-line\n              var collectionKey = signatureCollection.image[0].imageData;\n              var signatureID = signatureCollection.image[0].id.split('_')[1];\n              if (signatureCollection.isInitial && collectionKey !== '') {\n                var signatureContainer = createElement('div');\n                signatureContainer.id = 's' + signatureID;\n                signatureContainer.style.display = 'block';\n                signatureContainer.style.paddingBottom = '10px';\n                var signatureSpan = createElement('span');\n                signatureSpan.id = 'sign_border_' + signatureID;\n                signatureSpan.classList.add('e-pv-align-border');\n                var signatureImage = void 0;\n                if (signatureCollection.image[0].signatureType === 'SignatureText') {\n                  signatureImage = createElement('div');\n                  signatureImage.classList.add('e-pv-align-border-div');\n                  signatureImage.innerText = collectionKey;\n                  signatureImage.style.fontFamily = signatureCollection.image[0].fontFamily;\n                  signatureImage.style.fontSize = '15px';\n                  signatureImage.style.display = 'inline-flex';\n                  signatureImage.style.alignItems = 'center';\n                  signatureImage.style.position = 'relative';\n                  signatureImage.id = 'sign_' + signatureID;\n                  signatureImage.style.width = '80px';\n                  signatureImage.style.height = '53px';\n                  signatureImage.style.overflow = 'hidden';\n                  signatureImage.style.textOverflow = 'ellipsis';\n                  signatureImage.style.paddingLeft = '11px';\n                } else {\n                  signatureImage = createElement('img');\n                  signatureImage.id = 'sign_' + signatureID;\n                  signatureImage.src = collectionKey;\n                  signatureImage.width = 80;\n                  signatureImage.height = 32;\n                  signatureImage.classList.add('e-pv-signatureimage');\n                  signatureImage.style.paddingLeft = '20px';\n                  signatureImage.style.paddingRight = '18px';\n                  signatureImage.style.paddingTop = '12px';\n                  signatureImage.style.paddingBottom = '12px';\n                  signatureImage.style.boxSizing = 'content-box';\n                  signatureImage.setAttribute('alt', 'Saved Initial');\n                }\n                signatureImage.addEventListener('mouseover', _this.hoverSignatureImage.bind(_this));\n                signatureImage.addEventListener('mouseleave', _this.leaveSignatureImage.bind(_this));\n                signatureImage.width = 80;\n                signatureImage.height = 32;\n                var signatureDeleteSpan = createElement('span');\n                signatureDeleteSpan.id = 'delete_' + signatureID;\n                signatureDeleteSpan.classList.add('e-pv-delete');\n                signatureDeleteSpan.classList.add('e-pv-align');\n                signatureSpan.append(signatureImage);\n                signatureSpan.append(signatureDeleteSpan);\n                signatureContainer.append(signatureSpan);\n                args.element.appendChild(signatureContainer);\n                // eslint-disable-next-line max-len\n                args.element.style.pointerEvents = 'auto';\n                args.element.style.background = 'none';\n                _this.pdfViewerBase.getElement('_annotation_signature-popup').style.width = '206px';\n                _this.saveInitialCount++;\n              }\n            }\n          }\n          _this.isSignatureIteam = false;\n          var addInitialSpan = createElement('button');\n          addInitialSpan.classList.add(\"e-control\", \"e-btn\", \"e-lib\", \"e-outline\", \"e-primary\");\n          addInitialSpan.textContent = _this.pdfViewer.localeObj.getConstant('HandwrittenInitialDialogHeaderText');\n          _this.pdfViewer.locale === 'en-US' ? addInitialSpan.style.width = \"130px\" : addInitialSpan.style.width = \"auto\";\n          addInitialSpan.style.height = \"36px\";\n          addInitialSpan.addEventListener('click', _this.clickInitial.bind(_this));\n          args.element.appendChild(addInitialSpan);\n          args.element.addEventListener('mouseover', _this.hoverInitialBtn.bind(_this));\n          args.element.style.width = '206px';\n          args.element.style.display = 'flex';\n          args.element.style.flexDirection = 'column';\n          args.element.style.height = 'auto';\n          args.element.style.alignItems = 'center';\n          args.element.setAttribute('role', 'menuitem');\n        }\n      },\n      select: function (args) {\n        _this.pdfViewer.clearSelection(_this.pdfViewerBase.currentPageNumber - 1);\n      }\n    };\n    var drpDownBtn = new DropDownButton(saveOptions);\n    if (this.pdfViewer.enableRtl) {\n      drpDownBtn.enableRtl = this.pdfViewer.enableRtl;\n    }\n    drpDownBtn.appendTo(this.handWrittenSignatureItem);\n  };\n  AnnotationToolbar.prototype.updateSignatureCount = function () {\n    var count = 0;\n    this.openSignaturePopup = false;\n    // eslint-disable-next-line\n    var signatureCollection = this.pdfViewerBase.signatureModule.signaturecollection;\n    for (var collection = 0; collection < signatureCollection.length; collection++) {\n      // eslint-disable-next-line\n      var colletionList = signatureCollection[collection];\n      if (colletionList.image[0].imageData === '') {\n        count++;\n      }\n    }\n  };\n  AnnotationToolbar.prototype.openSignature = function () {\n    this.saveInitialCount = 0;\n    this.saveSignatureCount = 0;\n    for (var collection = this.pdfViewerBase.signatureModule.signaturecollection.length; collection > 0; collection--) {\n      if (this.saveSignatureCount < this.pdfViewerBase.signatureModule.getSaveLimit(this.pdfViewer.handWrittenSignatureSettings.saveSignatureLimit)) {\n        // eslint-disable-next-line\n        var signatureCollection = this.pdfViewerBase.signatureModule.signaturecollection[collection - 1];\n        if (signatureCollection.image[0].imageData !== '') {\n          if (!signatureCollection.isInitial) {\n            this.saveSignatureCount++;\n            // eslint-disable-next-line\n            var addedSignature = document.getElementById('sign_border_' + signatureCollection.image[0].id.split('_')[1] + '');\n            // eslint-disable-next-line\n            var deleteSignature = document.getElementById('delete_' + signatureCollection.image[0].id.split('_')[1] + '');\n            deleteSignature.style.backgroundClip = 'content-box';\n            addedSignature.addEventListener('click', this.renderAddedSignature.bind(this));\n            deleteSignature.addEventListener('click', this.deleteSavedSign.bind(this));\n            deleteSignature.addEventListener('mouseover', this.hoverSignatureDelete.bind(this));\n            deleteSignature.addEventListener('mouseleave', this.leaveSignatureDelete.bind(this));\n            addedSignature.addEventListener('mouseover', this.hoverSignatureDelete.bind(this));\n            addedSignature.addEventListener('mouseleave', this.leaveSignatureDelete.bind(this));\n          }\n        }\n      }\n    }\n    for (var collection = this.pdfViewerBase.signatureModule.signaturecollection.length; collection > 0; collection--) {\n      if (this.saveInitialCount < this.pdfViewerBase.signatureModule.getSaveLimit(this.pdfViewer.handWrittenSignatureSettings.saveInitialLimit)) {\n        // eslint-disable-next-line\n        var signatureCollection = this.pdfViewerBase.signatureModule.signaturecollection[collection - 1];\n        if (signatureCollection.image[0].imageData !== '') {\n          if (signatureCollection.isInitial) {\n            this.saveInitialCount++;\n            // eslint-disable-next-line\n            var addedSignature = document.getElementById('sign_border_' + signatureCollection.image[0].id.split('_')[1] + '');\n            // eslint-disable-next-line\n            var deleteSignature = document.getElementById('delete_' + signatureCollection.image[0].id.split('_')[1] + '');\n            deleteSignature.style.backgroundClip = 'content-box';\n            addedSignature.addEventListener('click', this.renderAddedSignature.bind(this));\n            deleteSignature.addEventListener('click', this.deleteSavedSign.bind(this));\n            deleteSignature.addEventListener('mouseover', this.hoverSignatureDelete.bind(this));\n            deleteSignature.addEventListener('mouseleave', this.leaveSignatureDelete.bind(this));\n            addedSignature.addEventListener('mouseover', this.hoverSignatureDelete.bind(this));\n            addedSignature.addEventListener('mouseleave', this.leaveSignatureDelete.bind(this));\n          }\n        }\n      }\n    }\n  };\n  AnnotationToolbar.prototype.hoverSignatureDelete = function () {\n    var eventTarget = event.target;\n    if (eventTarget.id === 'sign_' + eventTarget.id.split('_')[1] || eventTarget.classList.contains('e-pv-delete')) {\n      eventTarget.classList.add('e-pv-signaturehover');\n      eventTarget.style.cursor = 'pointer';\n    }\n  };\n  AnnotationToolbar.prototype.hoverInitialBtn = function (event) {\n    var eventTarget = event.target;\n    var currentFieldID = '';\n    if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.userAgent.indexOf('Trident') !== -1) {\n      currentFieldID = eventTarget.id;\n    } else {\n      currentFieldID = isNullOrUndefined(event.path) ? event.composedPath()[0].id : event.path[0].id;\n    }\n    if (currentFieldID !== 'sign_' + currentFieldID.split(\"_\")[1] && currentFieldID !== 'delete_' + currentFieldID.split(\"_\")[1]) {\n      var liElement = document.getElementById(eventTarget.id);\n      if (isNullOrUndefined(liElement)) {\n        liElement = document.getElementById(eventTarget.parentElement.id);\n      }\n      if (liElement != null && (eventTarget.id !== 'sign_' + eventTarget.id.split('_')[1] || eventTarget.id !== 'sign_border_' + eventTarget.id.split('_')[2])) {\n        liElement.style.background = 'transparent';\n        liElement.style.cursor = 'default';\n      } else if (liElement.parentElement != null && (eventTarget.id !== 'sign_' + eventTarget.id.split('_')[1] || eventTarget.id !== 'sign_border_' + eventTarget.id.split('_')[2])) {\n        liElement.parentElement.style.background = 'transparent';\n        liElement.parentElement.style.cursor = 'default';\n      }\n    }\n  };\n  AnnotationToolbar.prototype.hoverSignatureImage = function () {\n    var eventTarget = event.target;\n    if (eventTarget.id === 'sign_' + eventTarget.id.split('_')[1] || eventTarget.classList.contains('e-pv-delete')) {\n      eventTarget.classList.add('e-pv-signaturehover');\n      eventTarget.classList.remove('e-pv-signatureimage');\n      eventTarget.style.cursor = 'pointer';\n    }\n  };\n  AnnotationToolbar.prototype.leaveSignatureDelete = function () {\n    var eventTarget = event.target;\n    if (eventTarget.id === 'sign_' + eventTarget.id.split('_')[1] || eventTarget.classList.contains('e-pv-delete')) {\n      eventTarget.classList.remove('e-pv-signaturehover');\n      if (eventTarget.children[0] && eventTarget.children[0].tagName === 'IMG') {\n        eventTarget.children[0].classList.remove('e-pv-signaturehover');\n      }\n      eventTarget.style.cursor = 'default';\n    }\n  };\n  AnnotationToolbar.prototype.clickSignature = function () {\n    this.pdfViewerBase.isInitialField = false;\n    this.addSignature();\n  };\n  AnnotationToolbar.prototype.clickInitial = function () {\n    this.pdfViewerBase.isInitialField = true;\n    this.addSignature();\n  };\n  AnnotationToolbar.prototype.leaveSignatureImage = function () {\n    var eventTarget = event.target;\n    if (eventTarget.id === 'sign_' + eventTarget.id.split('_')[1] || eventTarget.classList.contains('e-pv-delete')) {\n      eventTarget.classList.remove('e-pv-signaturehover');\n      if (eventTarget.tagName === 'IMG') eventTarget.classList.add('e-pv-signatureimage');\n      if (eventTarget.children[0] && eventTarget.children[0].tagName === 'IMG') {\n        eventTarget.children[0].classList.remove('e-pv-signaturehover');\n        eventTarget.children[0].classList.add('e-pv-signatureimage');\n      }\n      eventTarget.style.cursor = 'default';\n    }\n  };\n  AnnotationToolbar.prototype.addSignature = function () {\n    this.deselectAllItems();\n    this.showSignaturepanel();\n  };\n  AnnotationToolbar.prototype.renderAddedSignature = function () {\n    this.pdfViewerBase.isAddedSignClicked = true;\n    this.isSavedSignatureClicked = true;\n    this.pdfViewerBase.signatureModule.RenderSavedSignature();\n  };\n  // eslint-disable-next-line\n  AnnotationToolbar.prototype.deleteSavedSign = function (event) {\n    event.stopPropagation();\n    // eslint-disable-next-line\n    var signaturecollection = this.pdfViewerBase.signatureModule.signaturecollection;\n    for (var collection = signaturecollection.length; collection > 0; collection--) {\n      if (event.target.parentElement.children[0].id === 'sign_' + signaturecollection[collection - 1].image[0].id.split('_')[1]) {\n        // eslint-disable-next-line\n        var RemoveSignature = signaturecollection[collection - 1];\n        RemoveSignature.image[0].imageData = '';\n        this.pdfViewerBase.signatureModule.signaturecollection.splice(collection - 1, 1);\n        break;\n      }\n    }\n    event.target.parentElement.remove();\n  };\n  AnnotationToolbar.prototype.getTemplate = function (elementName, id, className) {\n    var element = createElement(elementName, {\n      id: this.pdfViewer.element.id + id\n    });\n    if (className) {\n      element.className = className;\n    }\n    return element.outerHTML;\n  };\n  // eslint-disable-next-line\n  AnnotationToolbar.prototype.createStampContainer = function () {\n    var _this = this;\n    this.stampElement = this.pdfViewerBase.getElement('_annotation_stamp');\n    // eslint-disable-next-line max-len\n    this.primaryToolbar.createTooltip(this.pdfViewerBase.getElement('_annotation_stamp'), this.pdfViewer.localeObj.getConstant('Add Stamp'));\n    this.stampElement.setAttribute('aria-label', this.pdfViewer.localeObj.getConstant('Add Stamp'));\n    var contextMenuElement = createElement('ul', {\n      id: this.pdfViewer.element.id + 'contextMenuElement'\n    });\n    this.pdfViewerBase.getElement('_annotation_stamp').appendChild(contextMenuElement);\n    var items = [];\n    if (this.pdfViewer.stampSettings.dynamicStamps && this.pdfViewer.stampSettings.dynamicStamps.length > 0) {\n      var dynamicStamps_1 = [];\n      items.push({\n        text: this.pdfViewer.localeObj.getConstant('Dynamic'),\n        label: 'Dynamic',\n        items: dynamicStamps_1\n      });\n      this.pdfViewer.stampSettings.dynamicStamps.forEach(function (stampItem, index) {\n        var name = DynamicStampItem[stampItem];\n        switch (name) {\n          case 'NotApproved':\n            name = 'Not Approved';\n            break;\n        }\n        dynamicStamps_1.push({\n          text: _this.pdfViewer.localeObj.getConstant(name),\n          label: name\n        });\n      });\n    }\n    if (this.pdfViewer.stampSettings.signStamps && this.pdfViewer.stampSettings.signStamps.length > 0) {\n      var signStamps_1 = [];\n      items.push({\n        text: this.pdfViewer.localeObj.getConstant('Sign Here'),\n        label: 'Sign Here',\n        items: signStamps_1\n      });\n      this.pdfViewer.stampSettings.signStamps.forEach(function (stampItem, index) {\n        var name = SignStampItem[stampItem];\n        switch (name) {\n          case 'InitialHere':\n            name = 'Initial Here';\n            break;\n          case 'SignHere':\n            name = 'Sign Here';\n            break;\n        }\n        signStamps_1.push({\n          text: _this.pdfViewer.localeObj.getConstant(name),\n          label: name\n        });\n      });\n    }\n    if (this.pdfViewer.stampSettings.standardBusinessStamps && this.pdfViewer.stampSettings.standardBusinessStamps.length > 0) {\n      var standardsBusinessStamps_1 = [];\n      items.push({\n        text: this.pdfViewer.localeObj.getConstant('Standard Business'),\n        label: 'Standard Business',\n        items: standardsBusinessStamps_1\n      });\n      this.pdfViewer.stampSettings.standardBusinessStamps.forEach(function (stampItem, index) {\n        var name = StandardBusinessStampItem[stampItem];\n        switch (name) {\n          case 'NotApproved':\n            name = 'Not Approved';\n            break;\n          case 'ForPublicRelease':\n            name = 'For Public Release';\n            break;\n          case 'NotForPublicRelease':\n            name = 'Not For Public Release';\n            break;\n          case 'ForComment':\n            name = 'For Comment';\n            break;\n          case 'PreliminaryResults':\n            name = 'Preliminary Results';\n            break;\n          case 'InformationOnly':\n            name = 'Information Only';\n            break;\n        }\n        standardsBusinessStamps_1.push({\n          text: _this.pdfViewer.localeObj.getConstant(name),\n          label: name\n        });\n      });\n    }\n    if (this.pdfViewer.customStampSettings.enableCustomStamp && !Browser.isDevice) {\n      if (items.length > 0) {\n        items.push({\n          separator: true\n        });\n      }\n      items.push({\n        text: this.pdfViewer.localeObj.getConstant('Custom Stamp'),\n        label: 'Custom Stamp',\n        items: []\n      });\n      this.pdfViewerBase.customStampCollection = this.pdfViewer.customStampSettings.customStamps ? this.pdfViewer.customStampSettings.customStamps : [];\n    }\n    this.stampMenu = [{\n      iconCss: 'e-pv-stamp-icon e-pv-icon',\n      items: items\n    }];\n    var menuOptions = {\n      items: this.stampMenu,\n      cssClass: 'e-custom-scroll',\n      showItemOnClick: true,\n      enableScrolling: true,\n      beforeOpen: function (args) {\n        _this.resetFreeTextAnnot();\n        if (args.parentItem.text === '' && _this.pdfViewer.customStampSettings.isAddToMenu && args.items.length > 0) {\n          // eslint-disable-next-line\n          var currentElements = null;\n          for (var i = 0; i < args.items.length; i++) {\n            if (args.items[i].text === _this.pdfViewer.localeObj.getConstant('Custom Stamp')) {\n              args.items[i].items = [];\n              currentElements = args.items[i];\n              break;\n            }\n          }\n          // eslint-disable-next-line\n          var elements = _this.pdfViewerBase.customStampCollection;\n          // eslint-disable-next-line\n          var stampElements = _this.pdfViewer.customStampSettings.customStamps;\n          if (elements.length === 0 && stampElements && stampElements.length > 0) {\n            for (var n = 0; n < stampElements.length; n++) {\n              // eslint-disable-next-line max-len\n              elements.push({\n                customStampName: stampElements[n].customStampName,\n                customStampImageSource: stampElements[n].customStampImageSource\n              });\n            }\n          }\n          for (var m = 0; m < elements.length; m++) {\n            if (currentElements != null) {\n              currentElements.items.push({\n                text: elements[m].customStampName\n              });\n              for (var i = 0; i < args.items.length; i++) {\n                if (args.items[i].text === _this.pdfViewer.localeObj.getConstant('Custom Stamp')) {\n                  var liElem = args.element.children[i];\n                  if (liElem && !liElem.childElementCount) {\n                    var span = document.createElement('span');\n                    span.className = 'e-icons e-caret e-menu-caret-icon';\n                    liElem.appendChild(span);\n                    liElem.setAttribute('aria-haspopup', 'true');\n                    liElem.setAttribute('aria-expanded', 'false');\n                  }\n                }\n              }\n            }\n          }\n        }\n        if (args.parentItem.text === _this.pdfViewer.localeObj.getConstant('Custom Stamp')) {\n          // eslint-disable-next-line\n          var stampElements = _this.pdfViewer.customStampSettings.customStamps;\n          if (stampElements && stampElements.length > 10) {\n            closest(args.element, '.e-menu-wrapper').style.height = '350px';\n          }\n        }\n        _this.stampParentID = args.parentItem.text;\n        _this.menuItems.showItemOnClick = false;\n      },\n      beforeClose: function (args) {\n        // eslint-disable-next-line max-len\n        if (args.parentItem && args.parentItem.text !== _this.pdfViewer.localeObj.getConstant('Custom Stamp') && args.parentItem.text !== 'Standard Business' && args.parentItem.text !== 'Dynamic' && args.parentItem.text !== 'Sign Here' || !args.parentItem) {\n          _this.menuItems.showItemOnClick = true;\n        }\n      },\n      select: function (args) {\n        _this.pdfViewerBase.isAlreadyAdded = false;\n        if (args.item.text === _this.pdfViewer.localeObj.getConstant('Custom Stamp')) {\n          _this.updateInteractionTools();\n          _this.checkStampAnnotations();\n          _this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode = true;\n          // eslint-disable-next-line\n          var stampImage = document.getElementById(_this.pdfViewer.element.id + '_stampElement');\n          if (stampImage) {\n            stampImage.click();\n          }\n          _this.pdfViewer.annotation.triggerAnnotationUnselectEvent();\n          // eslint-disable-next-line max-len\n        } else if (_this.stampParentID === _this.pdfViewer.localeObj.getConstant('Custom Stamp') && args.item.text !== '') {\n          // eslint-disable-next-line\n          var elements = _this.pdfViewerBase.customStampCollection;\n          for (var n = 0; n < elements.length; n++) {\n            if (elements[n].customStampName === args.item.text) {\n              _this.pdfViewer.annotationModule.stampAnnotationModule.customStampName = args.item.text;\n              _this.checkStampAnnotations();\n              _this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode = true;\n              _this.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected = true;\n              _this.pdfViewerBase.stampAdded = true;\n              _this.pdfViewerBase.isAlreadyAdded = true;\n              // eslint-disable-next-line max-len\n              _this.pdfViewer.annotationModule.stampAnnotationModule.createCustomStampAnnotation(elements[n].customStampImageSource);\n              _this.pdfViewerBase.stampAdded = false;\n            }\n          }\n          // eslint-disable-next-line max-len\n        } else if (args.item.text !== _this.pdfViewer.localeObj.getConstant('Dynamic') && args.item.text !== '' && args.item.text !== 'Standard Business' && (_this.stampParentID === 'Sign Here' || args.item.text !== 'Sign Here')) {\n          _this.updateInteractionTools();\n          _this.checkStampAnnotations();\n          _this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode = true;\n          _this.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected = true;\n          _this.pdfViewerBase.stampAdded = true;\n          _this.pdfViewer.annotation.triggerAnnotationUnselectEvent();\n          if (_this.stampParentID === _this.pdfViewer.localeObj.getConstant('Dynamic')) {\n            _this.pdfViewerBase.isDynamicStamp = true;\n            _this.pdfViewer.annotationModule.stampAnnotationModule.retrieveDynamicStampAnnotation(args.item.label);\n          } else {\n            _this.pdfViewerBase.isDynamicStamp = false;\n            _this.pdfViewer.annotationModule.stampAnnotationModule.retrievestampAnnotation(args.item.label);\n          }\n          if (Browser.isDevice) {\n            _this.stampToolMobileForMobile(_this.pdfViewer.element.id + '_annotation_stamp');\n          }\n        }\n      }\n    };\n    this.menuItems = new Menu(menuOptions, '#' + this.pdfViewer.element.id + 'contextMenuElement');\n    contextMenuElement.parentElement.classList.add('e-pv-stamp');\n    if (this.pdfViewer.enableRtl) {\n      this.menuItems.enableRtl = true;\n    }\n    return contextMenuElement;\n  };\n  /**\n   * @private\n   */\n  AnnotationToolbar.prototype.createCustomStampElement = function () {\n    // eslint-disable-next-line\n    var stampImage = createElement('input', {\n      id: this.pdfViewer.element.id + '_stampElement',\n      attrs: {\n        'type': 'file'\n      }\n    });\n    stampImage.setAttribute('accept', '.jpg,.jpeg,.png');\n    stampImage.style.position = 'absolute';\n    stampImage.style.left = '0px';\n    stampImage.style.top = '0px';\n    stampImage.style.visibility = 'hidden';\n    document.body.appendChild(stampImage);\n    stampImage.addEventListener('change', this.addStampImage);\n  };\n  AnnotationToolbar.prototype.checkStampAnnotations = function () {\n    // eslint-disable-next-line max-len\n    if (this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode && this.pdfViewer.selectedItems && this.pdfViewer.selectedItems.annotations) {\n      for (var i = 0; i < this.pdfViewer.selectedItems.annotations.length; i++) {\n        // eslint-disable-next-line\n        var annotation = this.pdfViewer.selectedItems.annotations[i];\n        // eslint-disable-next-line\n        if (annotation && !annotation.annotName && !annotation.author && (annotation.shapeAnnotationType !== 'Shape' || annotation.shapeAnnotationType !== 'Image')) {\n          this.pdfViewer.remove(annotation);\n          this.pdfViewer.annotation.renderAnnotations(annotation.pageIndex, null, null, null);\n          this.pdfViewer.clearSelection(annotation.pageIndex);\n        }\n      }\n    }\n  };\n  AnnotationToolbar.prototype.createDropDowns = function (isPath) {\n    var _this = this;\n    if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n      this.shapeElement = this.pdfViewerBase.getElement('_annotation_shapes');\n      var shapeToolbar = this.createShapeOptions(this.shapeElement.id, true);\n      // eslint-disable-next-line max-len\n      this.shapeDropDown = this.createDropDownButton(this.shapeElement, 'e-pv-annotation-shape-icon', shapeToolbar.element, this.pdfViewer.localeObj.getConstant('Add Shapes'));\n      this.calibrateElement = this.pdfViewerBase.getElement('_annotation_calibrate');\n      var calibrateToolbar = this.createShapeOptions(this.calibrateElement.id, false);\n      // eslint-disable-next-line max-len\n      this.calibrateDropDown = this.createDropDownButton(this.calibrateElement, 'e-pv-annotation-calibrate-icon', calibrateToolbar.element, this.pdfViewer.localeObj.getConstant('Calibrate'));\n    }\n    if (!isPath) {\n      this.colorDropDownElement = this.pdfViewerBase.getElement('_annotation_color');\n      this.colorPalette = this.createColorPicker(this.colorDropDownElement.id);\n      this.colorPalette.change = this.onColorPickerChange.bind(this);\n      // eslint-disable-next-line max-len\n      this.colorDropDown = this.createDropDownButton(this.colorDropDownElement, 'e-pv-annotation-color-icon', this.colorPalette.element.parentElement, this.pdfViewer.localeObj.getConstant('Color edit'));\n      this.colorDropDown.beforeOpen = this.colorDropDownBeforeOpen.bind(this);\n      this.colorDropDown.open = this.colorDropDownOpen.bind(this);\n      this.pdfViewerBase.getElement('_annotation_color-popup').addEventListener('click', this.onColorPickerCancelClick.bind(this));\n    }\n    if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n      this.strokeDropDownElement = this.pdfViewerBase.getElement('_annotation_stroke');\n      this.strokeColorPicker = this.createColorPicker(this.strokeDropDownElement.id);\n      this.strokeColorPicker.change = this.onStrokePickerChange.bind(this);\n      // eslint-disable-next-line max-len\n      this.strokeDropDown = this.createDropDownButton(this.strokeDropDownElement, 'e-pv-annotation-stroke-icon', this.strokeColorPicker.element.parentElement, this.pdfViewer.localeObj.getConstant('Stroke edit'));\n      this.strokeDropDown.beforeOpen = this.strokeDropDownBeforeOpen.bind(this);\n      this.strokeDropDown.open = this.strokeDropDownOpen.bind(this);\n      this.pdfViewerBase.getElement('_annotation_stroke-popup').addEventListener('click', this.onStrokePickerCancelClick.bind(this));\n      this.thicknessElement = this.pdfViewerBase.getElement('_annotation_thickness');\n      var thicknessContainer = this.createThicknessSlider(this.thicknessElement.id);\n      // eslint-disable-next-line max-len\n      this.thicknessDropDown = this.createDropDownButton(this.thicknessElement, 'e-pv-annotation-thickness-icon', thicknessContainer, this.pdfViewer.localeObj.getConstant('Change thickness'));\n      this.thicknessDropDown.beforeOpen = this.thicknessDropDownBeforeOpen.bind(this);\n      this.thicknessSlider.change = this.thicknessChange.bind(this);\n      this.thicknessSlider.changed = this.thicknessChange.bind(this);\n      if (!this.pdfViewer.enableRtl) {\n        this.thicknessDropDown.open = this.thicknessDropDownOpen.bind(this);\n      }\n    }\n    if (!isPath) {\n      this.opacityDropDownElement = this.pdfViewerBase.getElement('_annotation_opacity');\n      var sliderContainer = this.createSlider(this.opacityDropDownElement.id);\n      // eslint-disable-next-line max-len\n      this.opacityDropDown = this.createDropDownButton(this.opacityDropDownElement, 'e-pv-annotation-opacity-icon', sliderContainer, this.pdfViewer.localeObj.getConstant('Opacity edit'));\n      this.opacityDropDown.beforeOpen = this.opacityDropDownBeforeOpen.bind(this);\n      this.opacitySlider.change = this.opacityChange.bind(this);\n      this.opacitySlider.changed = this.opacityChange.bind(this);\n      if (!this.pdfViewer.enableRtl) {\n        this.opacityDropDown.open = this.opacityDropDownOpen.bind(this);\n      }\n    }\n    if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n      this.fontFamilyElement = this.pdfViewerBase.getElement('_annotation_fontname');\n      this.createDropDownListForFamily(this.fontFamilyElement);\n      //this.fontFamilyElement.style.textAlign = 'left';\n      this.fontFamilyElement.addEventListener('change', function () {\n        _this.onFontFamilyChange.bind(_this);\n      });\n      this.fontSizeElement = this.pdfViewerBase.getElement('_annotation_fontsize');\n      this.createDropDownListForSize(this.fontSizeElement);\n      this.fontColorElement = this.pdfViewerBase.getElement('_annotation_textcolor');\n      this.fontColorPalette = this.createColorPicker(this.fontColorElement.id);\n      this.fontColorPalette.change = this.onFontColorChange.bind(this);\n      // eslint-disable-next-line max-len\n      this.fontColorDropDown = this.createDropDownButton(this.fontColorElement, 'e-pv-annotation-textcolor-icon', this.fontColorPalette.element.parentElement, this.pdfViewer.localeObj.getConstant('Font color'));\n      this.textAlignElement = this.pdfViewerBase.getElement('_annotation_textalign');\n      this.alignmentToolbar = this.createShapeOptions(this.textAlignElement.id, undefined, true);\n      // eslint-disable-next-line max-len\n      this.textAlignDropDown = this.createDropDownButton(this.textAlignElement, 'e-pv-annotation-textalign-icon', this.alignmentToolbar.element, this.pdfViewer.localeObj.getConstant('Text Align'));\n      this.textAlignDropDown.beforeOpen = this.textAlignDropDownBeforeOpen.bind(this);\n      this.textPropElement = this.pdfViewerBase.getElement('_annotation_textproperties');\n      this.propertiesToolbar = this.createShapeOptions(this.textPropElement.id, undefined, false, true);\n      // eslint-disable-next-line max-len\n      this.textPropertiesDropDown = this.createPropDropDownButton(this.textPropElement, 'e-pv-annotation-textprop-icon', this.propertiesToolbar.element, this.pdfViewer.localeObj.getConstant('Text Properties'));\n      this.textPropertiesDropDown.beforeOpen = this.textPropertiesDropDownBeforeOpen.bind(this);\n    }\n  };\n  AnnotationToolbar.prototype.mobileColorpicker = function (id) {\n    var _this = this;\n    this.opacityDropDownElement = this.pdfViewerBase.getElement('_annotation_opacity');\n    var sliderContainer = this.createSlider(this.opacityDropDownElement.id);\n    // eslint-disable-next-line max-len\n    this.opacityDropDown = this.createDropDownButton(this.opacityDropDownElement, 'e-pv-annotation-opacity-icon', sliderContainer, this.pdfViewer.localeObj.getConstant('Opacity edit'));\n    this.opacityDropDown.beforeOpen = this.opacityDropDownBeforeOpen.bind(this);\n    this.opacitySlider.change = this.opacityChange.bind(this);\n    this.opacitySlider.changed = this.opacityChange.bind(this);\n    if (!this.pdfViewer.enableRtl) {\n      this.opacityDropDown.open = this.opacityDropDownOpen.bind(this);\n    }\n    if (id === this.pdfViewer.element.id + '_annotation_shapes') {\n      id = this.pdfViewer.element.id + '_annotation_shapesIcon';\n    } else if (id === this.pdfViewer.element.id + '_annotation_calibrate') {\n      id = this.pdfViewer.element.id + '_annotation_calibrateIcon';\n    } else if (id === this.pdfViewer.element.id + '_highlight') {\n      id = this.pdfViewer.element.id + '_highlightIcon';\n    } else if (id === this.pdfViewer.element.id + '_underline') {\n      id = this.pdfViewer.element.id + '_underlineIcon';\n    } else if (id === this.pdfViewer.element.id + '_strikethrough') {\n      id = this.pdfViewer.element.id + '_strikethroughIcon';\n    }\n    // eslint-disable-next-line max-len\n    if (id === this.pdfViewer.element.id + '_annotation_shapesIcon' || id === this.pdfViewer.element.id + '_annotation_calibrateIcon' || id === this.pdfViewer.element.id + '_annotation_freeTextEdit' ||\n    // eslint-disable-next-line max-len\n    id === this.pdfViewer.element.id + '_highlightIcon' || id === this.pdfViewer.element.id + '_underlineIcon' || id === this.pdfViewer.element.id + '_strikethroughIcon' || id === this.pdfViewer.element.id + '_annotation_inkIcon' || id === this.pdfViewer.element.id + '_annotation_handwrittenSign') {\n      if (id !== this.pdfViewer.element.id + '_annotation_handwrittenSign' && id !== this.pdfViewer.element.id + '_annotation_inkIcon') {\n        this.colorDropDownElement = this.pdfViewerBase.getElement('_annotation_color');\n        this.colorPalette = this.createColorPicker(this.colorDropDownElement.id);\n        this.colorPalette.change = this.onColorPickerChange.bind(this);\n        // eslint-disable-next-line max-len\n        this.colorDropDown = this.createDropDownButton(this.colorDropDownElement, 'e-pv-annotation-color-icon', this.colorPalette.element.parentElement, this.pdfViewer.localeObj.getConstant('Color edit'));\n        this.colorDropDown.beforeOpen = this.colorDropDownBeforeOpen.bind(this);\n        this.colorDropDown.open = this.colorDropDownOpen.bind(this);\n        // eslint-disable-next-line max-len\n        this.pdfViewerBase.getElement('_annotation_color-popup').addEventListener('click', this.onColorPickerCancelClick.bind(this));\n      }\n      if (id === this.pdfViewer.element.id + '_annotation_freeTextEdit') {\n        this.fontFamilyElement = this.pdfViewerBase.getElement('_annotation_fontname');\n        this.createDropDownListForFamily(this.fontFamilyElement);\n        this.fontFamilyElement.style.textAlign = 'left';\n        this.fontFamilyElement.addEventListener('change', function () {\n          _this.onFontFamilyChange.bind(_this);\n        });\n        this.fontSizeElement = this.pdfViewerBase.getElement('_annotation_fontsize');\n        this.createDropDownListForSize(this.fontSizeElement);\n        this.fontColorElement = this.pdfViewerBase.getElement('_annotation_textcolor');\n        this.fontColorPalette = this.createColorPicker(this.fontColorElement.id);\n        this.fontColorPalette.change = this.onFontColorChange.bind(this);\n        // eslint-disable-next-line max-len\n        this.fontColorDropDown = this.createDropDownButton(this.fontColorElement, 'e-pv-annotation-textcolor-icon', this.fontColorPalette.element.parentElement, this.pdfViewer.localeObj.getConstant('Font color'));\n        this.textAlignElement = this.pdfViewerBase.getElement('_annotation_textalign');\n        this.alignmentToolbar = this.createShapeOptions(this.textAlignElement.id, undefined, true);\n        // eslint-disable-next-line max-len\n        this.textAlignDropDown = this.createDropDownButton(this.textAlignElement, 'e-pv-annotation-textalign-icon', this.alignmentToolbar.element, this.pdfViewer.localeObj.getConstant('Text Align'));\n        this.textAlignDropDown.beforeOpen = this.textAlignDropDownBeforeOpen.bind(this);\n        this.textPropElement = this.pdfViewerBase.getElement('_annotation_textproperties');\n        this.propertiesToolbar = this.createShapeOptions(this.textPropElement.id, undefined, false, true);\n        // eslint-disable-next-line max-len\n        this.textPropertiesDropDown = this.createPropDropDownButton(this.textPropElement, 'e-pv-annotation-textprop-icon', this.propertiesToolbar.element, this.pdfViewer.localeObj.getConstant('Text Properties'));\n        this.textPropertiesDropDown.beforeOpen = this.textPropertiesDropDownBeforeOpen.bind(this);\n      }\n      // eslint-disable-next-line max-len\n      if (id === this.pdfViewer.element.id + '_annotation_shapesIcon' || id === this.pdfViewer.element.id + '_annotation_calibrateIcon' || id === this.pdfViewer.element.id + '_annotation_freeTextEdit' || id === this.pdfViewer.element.id + '_annotation_inkIcon' || id === this.pdfViewer.element.id + '_annotation_handwrittenSign') {\n        this.thicknessElement = this.pdfViewerBase.getElement('_annotation_thickness');\n        var thicknessContainer = this.createThicknessSlider(this.thicknessElement.id);\n        // eslint-disable-next-line max-len\n        this.thicknessDropDown = this.createDropDownButton(this.thicknessElement, 'e-pv-annotation-thickness-icon', thicknessContainer, this.pdfViewer.localeObj.getConstant('Change thickness'));\n        this.thicknessDropDown.beforeOpen = this.thicknessDropDownBeforeOpen.bind(this);\n        this.thicknessSlider.change = this.thicknessChange.bind(this);\n        this.thicknessSlider.changed = this.thicknessChange.bind(this);\n        if (!this.pdfViewer.enableRtl) {\n          this.thicknessDropDown.open = this.thicknessDropDownOpen.bind(this);\n        }\n        this.strokeDropDownElement = this.pdfViewerBase.getElement('_annotation_stroke');\n        this.strokeColorPicker = this.createColorPicker(this.strokeDropDownElement.id);\n        this.strokeColorPicker.change = this.onStrokePickerChange.bind(this);\n        // eslint-disable-next-line max-len\n        this.strokeDropDown = this.createDropDownButton(this.strokeDropDownElement, 'e-pv-annotation-stroke-icon', this.strokeColorPicker.element.parentElement, this.pdfViewer.localeObj.getConstant('Stroke edit'));\n        this.strokeDropDown.beforeOpen = this.strokeDropDownBeforeOpen.bind(this);\n        this.strokeDropDown.open = this.strokeDropDownOpen.bind(this);\n        // eslint-disable-next-line max-len\n        this.pdfViewerBase.getElement('_annotation_stroke-popup').addEventListener('click', this.onStrokePickerCancelClick.bind(this));\n      }\n    }\n  };\n  AnnotationToolbar.prototype.opacityDropDownOpen = function (args) {\n    if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n      args.element.parentElement.style.left = '0px';\n      args.element.parentElement.style.top = this.pdfViewerBase.viewerContainer.clientHeight + 'px';\n    } else {\n      this.calculateToolbarPosition(args);\n    }\n  };\n  AnnotationToolbar.prototype.onColorPickerCancelClick = function (event) {\n    if (event.target.classList.contains('e-cancel')) {\n      this.colorDropDown.toggle();\n    }\n  };\n  AnnotationToolbar.prototype.onStrokePickerCancelClick = function (event) {\n    if (event.target.classList.contains('e-cancel')) {\n      this.strokeDropDown.toggle();\n    }\n  };\n  AnnotationToolbar.prototype.colorDropDownBeforeOpen = function (args) {\n    this.colorPalette.noColor = false;\n    if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n      if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n        this.colorPalette.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation.color;\n      } else {\n        this.setCurrentColorInPicker();\n      }\n    }\n    if (this.pdfViewer.selectedItems.annotations.length === 1) {\n      this.colorPalette.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill;\n      this.colorPalette.noColor = true;\n    } else {\n      this.setCurrentColorInPicker();\n    }\n    this.colorPalette.refresh();\n    this.updateColorInIcon(this.colorDropDownElement, this.colorPalette.value);\n  };\n  /**\n   * @private\n   */\n  AnnotationToolbar.prototype.setCurrentColorInPicker = function () {\n    if (!isBlazor()) {\n      if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n        switch (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode) {\n          case 'Highlight':\n            // eslint-disable-next-line max-len\n            this.setColorInPicker(this.colorPalette, this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor);\n            break;\n          case 'Underline':\n            // eslint-disable-next-line max-len\n            this.setColorInPicker(this.colorPalette, this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor);\n            break;\n          case 'Strikethrough':\n            // eslint-disable-next-line max-len\n            this.setColorInPicker(this.colorPalette, this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor);\n            break;\n        }\n      }\n      if (this.pdfViewer.annotation.shapeAnnotationModule) {\n        switch (this.pdfViewer.annotationModule.shapeAnnotationModule.currentAnnotationMode) {\n          case 'Line':\n            // eslint-disable-next-line max-len\n            this.setColorInPicker(this.colorPalette, this.pdfViewer.annotationModule.shapeAnnotationModule.lineFillColor);\n            break;\n          case 'Arrow':\n            // eslint-disable-next-line max-len\n            this.setColorInPicker(this.colorPalette, this.pdfViewer.annotationModule.shapeAnnotationModule.arrowFillColor);\n            break;\n          case 'Rectangle':\n            // eslint-disable-next-line max-len\n            this.setColorInPicker(this.colorPalette, this.pdfViewer.annotationModule.shapeAnnotationModule.rectangleFillColor);\n            break;\n          case 'Circle':\n            // eslint-disable-next-line max-len\n            this.setColorInPicker(this.colorPalette, this.pdfViewer.annotationModule.shapeAnnotationModule.circleFillColor);\n            break;\n          case 'Polygon':\n            // eslint-disable-next-line max-len\n            this.setColorInPicker(this.colorPalette, this.pdfViewer.annotationModule.shapeAnnotationModule.polygonFillColor);\n            break;\n        }\n      }\n      if (this.colorDropDownElement) {\n        this.updateColorInIcon(this.colorDropDownElement, this.colorPalette.value);\n      }\n    }\n  };\n  AnnotationToolbar.prototype.colorDropDownOpen = function (args) {\n    if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n      // eslint-disable-next-line max-len\n      args.element.parentElement.style.top = this.pdfViewerBase.viewerContainer.clientHeight / 2 + 'px';\n    }\n    this.popupPosition(args, this.colorDropDownElement);\n    this.colorPalette.refresh();\n  };\n  AnnotationToolbar.prototype.strokeDropDownBeforeOpen = function (args) {\n    if (this.pdfViewer.selectedItems.annotations.length === 1) {\n      this.strokeColorPicker.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor;\n    } else {\n      this.setCurrentStrokeColorInPicker();\n    }\n    this.strokeColorPicker.refresh();\n    this.updateColorInIcon(this.strokeDropDownElement, this.strokeColorPicker.value);\n    this.updateInkannotationItems();\n  };\n  AnnotationToolbar.prototype.setCurrentStrokeColorInPicker = function () {\n    if (!isBlazor()) {\n      if (this.pdfViewer.annotation.shapeAnnotationModule) {\n        switch (this.pdfViewer.annotationModule.shapeAnnotationModule.currentAnnotationMode) {\n          case 'Line':\n            // eslint-disable-next-line max-len\n            this.setColorInPicker(this.strokeColorPicker, this.pdfViewer.annotationModule.shapeAnnotationModule.lineStrokeColor);\n            break;\n          case 'Arrow':\n            // eslint-disable-next-line max-len\n            this.setColorInPicker(this.strokeColorPicker, this.pdfViewer.annotationModule.shapeAnnotationModule.arrowStrokeColor);\n            break;\n          case 'Rectangle':\n            // eslint-disable-next-line max-len\n            this.setColorInPicker(this.strokeColorPicker, this.pdfViewer.annotationModule.shapeAnnotationModule.rectangleStrokeColor);\n            break;\n          case 'Circle':\n            // eslint-disable-next-line max-len\n            this.setColorInPicker(this.strokeColorPicker, this.pdfViewer.annotationModule.shapeAnnotationModule.circleStrokeColor);\n            break;\n          case 'Polygon':\n            // eslint-disable-next-line max-len\n            this.setColorInPicker(this.strokeColorPicker, this.pdfViewer.annotationModule.shapeAnnotationModule.polygonStrokeColor);\n            break;\n        }\n      }\n    }\n  };\n  AnnotationToolbar.prototype.strokeDropDownOpen = function (args) {\n    if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n      args.element.parentElement.style.top = this.pdfViewerBase.viewerContainer.clientHeight / 2 + 'px';\n    }\n    this.popupPosition(args, this.strokeDropDownElement);\n    this.strokeColorPicker.refresh();\n  };\n  // eslint-disable-next-line\n  AnnotationToolbar.prototype.onFontColorChange = function (args) {\n    // eslint-disable-next-line\n    var currentColor;\n    if (!isBlazor()) {\n      currentColor = args.currentValue.hex === '' ? '#ffffff00' : args.currentValue.hex;\n    } else {\n      currentColor = args[0];\n    }\n    if (this.pdfViewer.selectedItems.annotations.length === 1) {\n      this.pdfViewer.annotation.modifyFontColor(currentColor);\n    } else {\n      this.pdfViewer.freeTextSettings.fontColor = currentColor;\n      this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();\n    }\n    if (isBlazor()) {\n      this.fontColorElementInBlazor = this.pdfViewer.element.querySelector('.e-pv-annotation-textcolor-container');\n      this.updateColorInIcon(this.fontColorElementInBlazor, currentColor);\n    } else {\n      this.updateColorInIcon(this.fontColorElement, currentColor);\n      this.fontColorDropDown.toggle();\n    }\n  };\n  // eslint-disable-next-line\n  AnnotationToolbar.prototype.onFontFamilyChange = function (args) {\n    var currentValue;\n    if (!isBlazor()) {\n      currentValue = args && args.fontFamily && args.fontFamily.value ? args.fontFamily.value : '';\n    } else {\n      currentValue = args;\n    }\n    if (this.pdfViewer.selectedItems.annotations.length === 1 && currentValue) {\n      this.pdfViewer.annotation.modifyFontFamily(currentValue);\n    } else {\n      this.pdfViewer.freeTextSettings.fontFamily = currentValue;\n      this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();\n    }\n  };\n  // eslint-disable-next-line\n  AnnotationToolbar.prototype.onFontSizeChange = function (args, isInteracted) {\n    var currentValue;\n    if (!isBlazor()) {\n      currentValue = args && args.fontSize && args.fontSize.value ? args.fontSize.value : '';\n    } else {\n      currentValue = args;\n    }\n    var fontSize = parseFloat(currentValue);\n    if (this.pdfViewer.selectedItems.annotations.length === 1 && currentValue) {\n      this.pdfViewer.annotation.modifyFontSize(fontSize, isInteracted);\n    } else {\n      this.pdfViewer.freeTextSettings.fontSize = fontSize;\n      this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();\n    }\n  };\n  AnnotationToolbar.prototype.textAlignDropDownBeforeOpen = function (args) {\n    if (this.pdfViewer.selectedItems.annotations.length === 1) {\n      if (args.element.getElementsByTagName('button') && args.element.getElementsByTagName('button').length > 0) {\n        // eslint-disable-next-line\n        var dropDownOptions = args.element.getElementsByTagName('button');\n        // eslint-disable-next-line\n        var selectedAnnotation = this.pdfViewer.selectedItems.annotations[0];\n        for (var n = 0; n < dropDownOptions.length; n++) {\n          if (dropDownOptions[n]) {\n            dropDownOptions[n].classList.remove('textprop-option-active');\n            // eslint-disable-next-line max-len\n            if (dropDownOptions[n].id === this.pdfViewer.element.id + '_left_align' && selectedAnnotation.textAlign === 'Left') {\n              dropDownOptions[n].classList.add('textprop-option-active');\n            }\n            // eslint-disable-next-line max-len\n            if (dropDownOptions[n].id === this.pdfViewer.element.id + '_right_align' && selectedAnnotation.textAlign === 'Right') {\n              dropDownOptions[n].classList.add('textprop-option-active');\n            }\n            // eslint-disable-next-line max-len\n            if (dropDownOptions[n].id === this.pdfViewer.element.id + '_center_align' && selectedAnnotation.textAlign === 'Center') {\n              dropDownOptions[n].classList.add('textprop-option-active');\n            }\n            // eslint-disable-next-line max-len\n            if (dropDownOptions[n].id === this.pdfViewer.element.id + '_justify_align' && selectedAnnotation.textAlign === 'Justify') {\n              dropDownOptions[n].classList.add('textprop-option-active');\n            }\n          }\n        }\n      }\n    }\n  };\n  AnnotationToolbar.prototype.textPropertiesDropDownBeforeOpen = function (args) {\n    if (this.pdfViewer.selectedItems.annotations.length === 1) {\n      if (args.element.getElementsByTagName('button') && args.element.getElementsByTagName('button').length > 0) {\n        // eslint-disable-next-line\n        var dropDownOptions = args.element.getElementsByTagName('button');\n        // eslint-disable-next-line\n        var selectedAnnotation = this.pdfViewer.selectedItems.annotations[0];\n        for (var n = 0; n < dropDownOptions.length; n++) {\n          if (dropDownOptions[n]) {\n            dropDownOptions[n].classList.remove('textprop-option-active');\n            if (dropDownOptions[n].id === this.pdfViewer.element.id + '_bold' && selectedAnnotation.font.isBold) {\n              dropDownOptions[n].classList.add('textprop-option-active');\n            }\n            if (dropDownOptions[n].id === this.pdfViewer.element.id + '_italic' && selectedAnnotation.font.isItalic) {\n              dropDownOptions[n].classList.add('textprop-option-active');\n            }\n            if (dropDownOptions[n].id === this.pdfViewer.element.id + '_strikeout' && selectedAnnotation.font.isStrikeout) {\n              dropDownOptions[n].classList.add('textprop-option-active');\n            }\n            // eslint-disable-next-line max-len\n            if (dropDownOptions[n].id === this.pdfViewer.element.id + '_underline_textinput' && selectedAnnotation.font.isUnderline) {\n              dropDownOptions[n].classList.add('textprop-option-active');\n            }\n          }\n        }\n      }\n    }\n  };\n  // eslint-disable-next-line\n  AnnotationToolbar.prototype.onClickTextAlignment = function (args) {\n    var currentValue;\n    if (isBlazor()) {\n      currentValue = args[0];\n    } else {\n      currentValue = args && args.item && args.item.value ? args.item.value : '';\n    }\n    if (this.pdfViewer.selectedItems.annotations.length === 1 && currentValue) {\n      this.pdfViewer.annotation.modifyTextAlignment(currentValue);\n    } else {\n      this.pdfViewer.freeTextSettings.textAlignment = args.item.value;\n      this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();\n    }\n    this.updateTextAlignInIcon(currentValue);\n  };\n  // eslint-disable-next-line\n  AnnotationToolbar.prototype.onClickTextProperties = function (args) {\n    var currentValue;\n    if (isBlazor()) {\n      currentValue = args[0];\n    } else {\n      currentValue = args && args.item && args.item.value ? args.item.value : '';\n    }\n    if (this.pdfViewer.selectedItems.annotations.length === 1 && currentValue) {\n      var fontInfo = {\n        isBold: undefined,\n        isItalic: undefined,\n        isStrikeout: undefined,\n        isUnderline: undefined\n      };\n      if (currentValue === 'bold') {\n        fontInfo.isBold = !this.pdfViewer.selectedItems.annotations[0].font.isBold;\n      } else if (currentValue === 'italic') {\n        fontInfo.isItalic = !this.pdfViewer.selectedItems.annotations[0].font.isItalic;\n      } else if (currentValue === 'underline') {\n        fontInfo.isUnderline = !this.pdfViewer.selectedItems.annotations[0].font.isUnderline;\n      } else if (currentValue === 'strikeout') {\n        fontInfo.isStrikeout = !this.pdfViewer.selectedItems.annotations[0].font.isStrikeout;\n      }\n      this.pdfViewer.annotation.modifyTextProperties(fontInfo, currentValue);\n    } else {\n      if (currentValue === 'bold') {\n        if (this.pdfViewer.annotationModule.freeTextAnnotationModule.isBold) {\n          this.pdfViewer.annotationModule.freeTextAnnotationModule.isBold = false;\n        } else {\n          this.pdfViewer.freeTextSettings.fontStyle = 1;\n          this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();\n        }\n      } else if (currentValue === 'italic') {\n        if (this.pdfViewer.annotationModule.freeTextAnnotationModule.isItalic) {\n          this.pdfViewer.annotationModule.freeTextAnnotationModule.isItalic = false;\n        } else {\n          this.pdfViewer.freeTextSettings.fontStyle = 2;\n          this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();\n        }\n      } else if (currentValue === 'underline') {\n        if (this.pdfViewer.annotationModule.freeTextAnnotationModule.isUnderline) {\n          this.pdfViewer.annotationModule.freeTextAnnotationModule.isUnderline = false;\n        } else {\n          this.pdfViewer.freeTextSettings.fontStyle = 4;\n          this.pdfViewer.annotationModule.freeTextAnnotationModule.isStrikethrough = false;\n          this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();\n        }\n      } else if (currentValue === 'strikeout') {\n        if (this.pdfViewer.annotationModule.freeTextAnnotationModule.isStrikethrough) {\n          this.pdfViewer.annotationModule.freeTextAnnotationModule.isStrikethrough = false;\n        } else {\n          this.pdfViewer.freeTextSettings.fontStyle = 8;\n          this.pdfViewer.annotationModule.freeTextAnnotationModule.isUnderline = false;\n          this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();\n        }\n      }\n    }\n    this.updateTextPropertySelection(currentValue);\n  };\n  // eslint-disable-next-line\n  AnnotationToolbar.prototype.opacityChange = function (args) {\n    var opacityValue = 1;\n    if (args && args.length === 1) {\n      opacityValue = args[0];\n    } else {\n      opacityValue = args.value;\n    }\n    if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n      if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n        if (!isBlazor()) {\n          if (this.isCurrentAnnotationOpacitySet && args.name === 'changed') {\n            this.isCurrentAnnotationOpacitySet = false;\n          } else {\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyOpacityProperty(args);\n          }\n        } else {\n          this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyOpacityProperty(null, opacityValue);\n        }\n      } else {\n        switch (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode) {\n          case 'Highlight':\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightOpacity = opacityValue / 100;\n            break;\n          case 'Underline':\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineOpacity = opacityValue / 100;\n            break;\n          case 'Strikethrough':\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughOpacity = opacityValue / 100;\n            break;\n        }\n      }\n    }\n    if (this.pdfViewer.selectedItems.annotations.length === 1) {\n      // eslint-disable-next-line\n      var currentAnnotations = this.pdfViewer.selectedItems.annotations[0];\n      // eslint-disable-next-line max-len\n      if (currentAnnotations != null && (currentAnnotations.shapeAnnotationType === 'Stamp' || currentAnnotations.shapeAnnotationType === 'Image')) {\n        var clonedObject = cloneObject(currentAnnotations);\n        var redoClonedObject = cloneObject(currentAnnotations);\n        redoClonedObject.opacity = opacityValue / 100;\n        this.pdfViewer.nodePropertyChange(currentAnnotations, {\n          opacity: opacityValue / 100\n        });\n        this.pdfViewer.annotation.triggerAnnotationPropChange(currentAnnotations, false, false, false, true);\n        // eslint-disable-next-line max-len\n        this.pdfViewer.annotation.addAction(this.pdfViewer.selectedItems.annotations[0].pageIndex, null, this.pdfViewer.selectedItems.annotations[0], 'stampOpacity', '', clonedObject, redoClonedObject);\n        // eslint-disable-next-line max-len\n        this.pdfViewer.annotation.stampAnnotationModule.updateSessionStorage(this.pdfViewer.selectedItems.annotations[0], null, 'opacity');\n      } else {\n        if (isBlazor()) {\n          this.pdfViewer.annotation.modifyOpacity(opacityValue, true);\n        } else {\n          if (args.name === 'changed') {\n            if (args.value !== args.previousValue) {\n              this.pdfViewer.annotation.modifyOpacity(args);\n            }\n          }\n        }\n      }\n    } else {\n      if (this.pdfViewer.annotation.shapeAnnotationModule) {\n        switch (this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode) {\n          case 'Line':\n            this.pdfViewer.annotation.shapeAnnotationModule.lineOpacity = opacityValue / 100;\n            break;\n          case 'Arrow':\n            this.pdfViewer.annotation.shapeAnnotationModule.arrowOpacity = opacityValue / 100;\n            break;\n          case 'Rectangle':\n            this.pdfViewer.annotation.shapeAnnotationModule.rectangleOpacity = opacityValue / 100;\n            break;\n          case 'Circle':\n            this.pdfViewer.annotation.shapeAnnotationModule.circleOpacity = opacityValue / 100;\n            break;\n          case 'Polygon':\n            this.pdfViewer.annotation.shapeAnnotationModule.polygonOpacity = opacityValue / 100;\n            break;\n        }\n      }\n      // eslint-disable-next-line\n      var annotationModule = this.pdfViewer.annotation;\n      if (annotationModule && annotationModule.inkAnnotationModule) {\n        this.pdfViewer.inkAnnotationSettings.opacity = opacityValue / 100;\n      }\n      if (this.pdfViewer.drawingObject) {\n        this.pdfViewer.drawingObject.opacity = opacityValue / 100;\n        if (this.pdfViewer.drawingObject.shapeAnnotationType === 'FreeText') {\n          this.pdfViewer.annotation.freeTextAnnotationModule.opacity = opacityValue / 100;\n        }\n      }\n    }\n    if (!isBlazor()) {\n      this.updateOpacityIndicator();\n    }\n  };\n  AnnotationToolbar.prototype.opacityDropDownBeforeOpen = function (args) {\n    if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n      if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n        this.isCurrentAnnotationOpacitySet = true;\n        // eslint-disable-next-line max-len\n        this.opacitySlider.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation.opacity * 100;\n      } else {\n        switch (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode) {\n          case 'Highlight':\n            this.opacitySlider.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightOpacity * 100;\n            break;\n          case 'Underline':\n            this.opacitySlider.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineOpacity * 100;\n            break;\n          case 'Strikethrough':\n            this.opacitySlider.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughOpacity * 100;\n            break;\n        }\n      }\n    }\n    if (this.pdfViewer.selectedItems.annotations.length === 1) {\n      this.opacitySlider.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.opacity * 100;\n    } else {\n      if (this.pdfViewer.annotation.shapeAnnotationModule) {\n        switch (this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode) {\n          case 'Line':\n            this.opacitySlider.value = this.pdfViewer.annotation.shapeAnnotationModule.lineOpacity * 100;\n            break;\n          case 'Arrow':\n            this.opacitySlider.value = this.pdfViewer.annotation.shapeAnnotationModule.arrowOpacity * 100;\n            break;\n          case 'Rectangle':\n            this.opacitySlider.value = this.pdfViewer.annotation.shapeAnnotationModule.rectangleOpacity * 100;\n            break;\n          case 'Circle':\n            this.opacitySlider.value = this.pdfViewer.annotation.shapeAnnotationModule.circleOpacity * 100;\n            break;\n          case 'Polygon':\n            this.opacitySlider.value = this.pdfViewer.annotation.shapeAnnotationModule.polygonOpacity * 100;\n            break;\n        }\n      }\n    }\n    this.updateOpacityIndicator();\n    this.updateInkannotationItems();\n  };\n  AnnotationToolbar.prototype.thicknessDropDownBeforeOpen = function () {\n    if (this.pdfViewer.selectedItems.annotations.length === 1) {\n      this.thicknessSlider.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeWidth;\n    } else {\n      if (this.pdfViewer.annotation.shapeAnnotationModule) {\n        switch (this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode) {\n          case 'Line':\n            this.thicknessSlider.value = this.pdfViewer.annotation.shapeAnnotationModule.lineThickness;\n            break;\n          case 'Arrow':\n            this.thicknessSlider.value = this.pdfViewer.annotation.shapeAnnotationModule.arrowThickness;\n            break;\n          case 'Rectangle':\n            this.thicknessSlider.value = this.pdfViewer.annotation.shapeAnnotationModule.rectangleThickness;\n            break;\n          case 'Circle':\n            this.thicknessSlider.value = this.pdfViewer.annotation.shapeAnnotationModule.circleThickness;\n            break;\n          case 'Polygon':\n            this.thicknessSlider.value = this.pdfViewer.annotation.shapeAnnotationModule.polygonThickness;\n            break;\n        }\n      }\n    }\n    this.updateThicknessIndicator();\n    this.updateInkannotationItems();\n  };\n  // eslint-disable-next-line\n  AnnotationToolbar.prototype.thicknessDropDownOpen = function (args) {\n    if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n      args.element.parentElement.style.left = '0px';\n      args.element.parentElement.style.top = this.pdfViewerBase.viewerContainer.clientHeight + 'px';\n    } else {\n      this.calculateToolbarPosition(args);\n    }\n  };\n  AnnotationToolbar.prototype.calculateToolbarPosition = function (args) {\n    if (args.element && args.element.parentElement) {\n      var leftValue = parseFloat(args.element.parentElement.style.left);\n      var width = args.element.parentElement.offsetWidth;\n      if (leftValue + width < this.pdfViewer.element.offsetWidth + 10) {\n        args.element.parentElement.style.left = leftValue - width + 'px';\n      }\n    }\n  };\n  // eslint-disable-next-line\n  AnnotationToolbar.prototype.thicknessChangeInBlazor = function (args) {\n    if (this.pdfViewer.selectedItems.annotations.length === 1) {\n      this.pdfViewer.annotation.modifyThickness(args[0]);\n    } else {\n      this.ShapeThickness(args[0]);\n    }\n  };\n  AnnotationToolbar.prototype.thicknessChange = function (args) {\n    if (this.pdfViewer.selectedItems.annotations.length === 1) {\n      if (args.name === 'changed') {\n        this.pdfViewer.annotation.modifyThickness(args.value);\n        if (!isBlazor()) {\n          this.updateThicknessIndicator();\n        }\n        var annotationModule = this.pdfViewer.annotation;\n        var selectedItems = this.pdfViewer.selectedItems.annotations[0];\n        if (annotationModule && annotationModule.inkAnnotationModule && selectedItems && selectedItems.shapeAnnotationType === \"Ink\") {\n          this.pdfViewer.inkAnnotationSettings.thickness = args.value;\n        }\n      }\n    } else {\n      this.ShapeThickness(args.value);\n    }\n  };\n  // eslint-disable-next-line\n  AnnotationToolbar.prototype.ShapeThickness = function (args) {\n    if (this.pdfViewer.annotation.shapeAnnotationModule) {\n      switch (this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode) {\n        case 'Line':\n          this.pdfViewer.annotation.shapeAnnotationModule.lineThickness = args;\n          break;\n        case 'Arrow':\n          this.pdfViewer.annotation.shapeAnnotationModule.arrowThickness = args;\n          break;\n        case 'Rectangle':\n          this.pdfViewer.annotation.shapeAnnotationModule.rectangleThickness = args;\n          break;\n        case 'Circle':\n          this.pdfViewer.annotation.shapeAnnotationModule.circleThickness = args;\n          break;\n        case 'Polygon':\n          this.pdfViewer.annotation.shapeAnnotationModule.polygonThickness = args;\n          break;\n      }\n      // eslint-disable-next-line\n      var annotationModule_1 = this.pdfViewer.annotation;\n      if (annotationModule_1 && annotationModule_1.inkAnnotationModule) {\n        this.pdfViewer.inkAnnotationSettings.thickness = args.value;\n      }\n      if (this.pdfViewer.drawingObject) {\n        this.pdfViewer.drawingObject.thickness = args.value;\n      }\n      if (this.pdfViewer.drawingObject && this.pdfViewer.drawingObject.shapeAnnotationType === 'FreeText') {\n        this.pdfViewer.annotation.freeTextAnnotationModule.borderWidth = args.value;\n      }\n    }\n    // eslint-disable-next-line\n    var annotationModule = this.pdfViewer.annotation;\n    if (annotationModule && annotationModule.inkAnnotationModule) {\n      this.pdfViewer.inkAnnotationSettings.thickness = args;\n    }\n    if (this.pdfViewer.drawingObject) {\n      this.pdfViewer.drawingObject.thickness = args;\n    }\n    if (this.pdfViewer.drawingObject && this.pdfViewer.drawingObject.shapeAnnotationType === 'FreeText') {\n      this.pdfViewer.annotation.freeTextAnnotationModule.borderWidth = args;\n    }\n    if (!isBlazor()) {\n      this.updateThicknessIndicator();\n    }\n  };\n  AnnotationToolbar.prototype.createDropDownButton = function (element, iconClass, target, tooltipText) {\n    // eslint-disable-next-line max-len\n    var dropDownButton = new DropDownButton({\n      iconCss: iconClass + ' e-pv-icon',\n      target: target\n    });\n    if (this.pdfViewer.enableRtl) {\n      dropDownButton.enableRtl = true;\n    }\n    dropDownButton.appendTo(element);\n    this.primaryToolbar.createTooltip(element, tooltipText);\n    element.setAttribute('aria-label', tooltipText);\n    return dropDownButton;\n  };\n  AnnotationToolbar.prototype.createShapeOptions = function (idString, isShape, isAlign, isTextProp) {\n    var toolbarElement = createElement('div', {\n      id: idString + '_target',\n      className: 'e-pv-shapes-toolbar'\n    });\n    document.body.appendChild(toolbarElement);\n    var toolbar;\n    if (isAlign) {\n      toolbar = new Tool({\n        items: this.textAlignmentToolbarItems(),\n        overflowMode: 'MultiRow'\n      }, toolbarElement);\n      toolbar.isStringTemplate = true;\n      this.afterAlignmentToolbarCreation();\n    } else if (isTextProp) {\n      toolbar = new Tool({\n        items: this.textPropertiesToolbarItems(),\n        overflowMode: 'MultiRow'\n      }, toolbarElement);\n      toolbar.isStringTemplate = true;\n      this.afterPropertiesToolbarCreation();\n    } else {\n      if (isShape) {\n        if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n          // eslint-disable-next-line max-len\n          toolbar = new Tool({\n            items: this.createShapeToolbarItems(),\n            overflowMode: 'MultiRow',\n            clicked: this.onShapeToolbarClicked.bind(this)\n          }, toolbarElement);\n          toolbar.isStringTemplate = true;\n          this.afterShapeToolbarCreation();\n        } else {\n          // eslint-disable-next-line max-len\n          this.toolbarElement = createElement('div', {\n            id: idString + '_target',\n            className: 'e-pv-mobile-annotation-toolbar',\n            styles: 'bottom: 0px; position: absolute; width: 100%; float: left'\n          });\n          this.pdfViewerBase.viewerMainContainer.appendChild(this.toolbarElement);\n          // eslint-disable-next-line max-len\n          toolbar = new Tool({\n            items: this.createShapeToolbarItemsForMobile(),\n            overflowMode: 'Scrollable',\n            clicked: this.onShapeToolbarClicked.bind(this)\n          }, this.toolbarElement);\n          toolbar.isStringTemplate = true;\n          this.afterShapeToolbarCreationForMobile();\n        }\n      } else {\n        // eslint-disable-next-line max-len\n        toolbar = new Tool({\n          items: this.createCalibrateToolbarItems(),\n          overflowMode: 'MultiRow',\n          clicked: this.onCalibrateToolbarClicked.bind(this)\n        }, toolbarElement);\n        toolbar.isStringTemplate = true;\n        this.afterCalibrateToolbarCreation();\n      }\n    }\n    return toolbar;\n  };\n  // eslint:disable-next-line\n  AnnotationToolbar.prototype.createPropertyToolbarForMobile = function (shapeType) {\n    var _this = this;\n    var colorTemplate = this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate('span', '_annotation_color', 'e-pv-annotation-color-container');\n    // eslint-disable-next-line max-len\n    var strokeTemplate = this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate('span', '_annotation_stroke', 'e-pv-annotation-stroke-container');\n    var thicknessTemplate = this.getTemplate('span', '_annotation_thickness', 'e-pv-annotation-thickness-container');\n    var opacityTemplate = this.getTemplate('span', '_annotation_opacity', 'e-pv-annotation-opacity-container');\n    var fontFamilyTemplate = this.getTemplate('input', '_annotation_fontname', 'e-pv-annotation-fontname-container');\n    var fontSizeTemplate = this.getTemplate('input', '_annotation_fontsize', 'e-pv-annotation-fontsize-container');\n    var textColorTemplate = this.getTemplate('span', '_annotation_textcolor', 'e-pv-annotation-textcolor-container');\n    var alignmentTemplate = this.getTemplate('span', '_annotation_textalign', 'e-pv-annotation-textalign-container');\n    // eslint-disable-next-line max-len\n    var textPropertiesTemplate = this.getTemplate('span', '_annotation_textproperties', 'e-pv-annotation-textprop-container');\n    // eslint:disable-next-line\n    var items = [];\n    // eslint-disable-next-line max-len\n    if (shapeType === 'Polygon' || shapeType === 'Rectangle' || shapeType === 'Ellipse' || shapeType === 'Line' || shapeType === 'LineWidthArrowHead' || shapeType === 'Distance' || shapeType === 'Perimeter' || shapeType === 'Radius' || shapeType === 'FreeText') {\n      if (shapeType === 'FreeText') {\n        // eslint-disable-next-line max-len\n        items.push({\n          prefixIcon: 'e-pv-freetext-icon e-pv-icon',\n          className: 'e-pv-annotation-freetextedit-container'\n        });\n        items.push({\n          type: 'Separator',\n          align: 'Left'\n        });\n        items.push({\n          template: fontFamilyTemplate\n        });\n        items.push({\n          template: fontSizeTemplate\n        });\n        items.push({\n          template: textColorTemplate\n        });\n        items.push({\n          template: alignmentTemplate\n        });\n        items.push({\n          template: textPropertiesTemplate\n        });\n      }\n      if (shapeType === 'Polygon') {\n        if (this.pdfViewer.selectedItems.annotations[0].measureType === 'Area') {\n          items.push({\n            prefixIcon: 'e-pv-calibrate-area-icon e-pv-icon'\n          });\n          items.push({\n            type: 'Separator',\n            align: 'Left'\n          });\n        } else if (this.pdfViewer.selectedItems.annotations[0].measureType === 'Volume') {\n          items.push({\n            prefixIcon: 'e-pv-calibrate-volume-icon e-pv-icon'\n          });\n          items.push({\n            type: 'Separator',\n            align: 'Left'\n          });\n        } else {\n          items.push({\n            prefixIcon: 'e-pv-shape-pentagon-icon e-pv-icon'\n          });\n          items.push({\n            type: 'Separator',\n            align: 'Left'\n          });\n        }\n      } else if (shapeType === 'Rectangle') {\n        items.push({\n          prefixIcon: 'e-pv-shape-rectangle-icon e-pv-icon'\n        });\n        items.push({\n          type: 'Separator',\n          align: 'Left'\n        });\n      } else if (shapeType === 'Ellipse') {\n        items.push({\n          prefixIcon: 'e-pv-shape-circle-icon e-pv-icon'\n        });\n        items.push({\n          type: 'Separator',\n          align: 'Left'\n        });\n      } else if (shapeType === 'Line') {\n        if (this.pdfViewer.selectedItems.annotations[0].measureType === 'Perimeter') {\n          items.push({\n            prefixIcon: 'e-pv-calibrate-perimeter-icon e-pv-icon'\n          });\n          items.push({\n            type: 'Separator',\n            align: 'Left'\n          });\n        } else {\n          items.push({\n            prefixIcon: 'e-pv-shape-line-icon e-pv-icon'\n          });\n          items.push({\n            type: 'Separator',\n            align: 'Left'\n          });\n        }\n      } else if (shapeType === 'LineWidthArrowHead') {\n        items.push({\n          prefixIcon: 'e-pv-shape-arrow-icon e-pv-icon'\n        });\n        items.push({\n          type: 'Separator',\n          align: 'Left'\n        });\n      } else if (shapeType === 'Distance') {\n        items.push({\n          prefixIcon: 'e-pv-calibrate-distance-icon e-pv-icon'\n        });\n        items.push({\n          type: 'Separator',\n          align: 'Left'\n        });\n      } else if (shapeType === 'Perimeter') {\n        items.push({\n          prefixIcon: 'e-pv-calibrate-perimeter-icon e-pv-icon'\n        });\n        items.push({\n          type: 'Separator',\n          align: 'Left'\n        });\n      } else if (shapeType === 'Radius') {\n        items.push({\n          prefixIcon: 'e-pv-calibrate-radius-icon e-pv-icon'\n        });\n        items.push({\n          type: 'Separator',\n          align: 'Left'\n        });\n      }\n      items.push({\n        template: colorTemplate\n      });\n      items.push({\n        template: strokeTemplate\n      });\n      items.push({\n        template: thicknessTemplate\n      });\n    } else if (shapeType === 'Path' || shapeType === 'Ink' || shapeType === 'HandWrittenSignature' || shapeType === 'SignatureText') {\n      if (shapeType === 'Path' || shapeType === 'Ink') {\n        items.push({\n          prefixIcon: 'e-pv-inkannotation-icon e-pv-icon'\n        });\n        items.push({\n          type: 'Separator',\n          align: 'Left'\n        });\n      } else if (shapeType === 'HandWrittenSignature' || shapeType === 'SignatureText') {\n        items.push({\n          prefixIcon: 'e-pv-handwritten-icon e-pv-icon'\n        });\n        items.push({\n          type: 'Separator',\n          align: 'Left'\n        });\n      }\n      items.push({\n        template: strokeTemplate\n      });\n      items.push({\n        template: thicknessTemplate\n      });\n    } else if (shapeType === 'Underline' || shapeType === 'Highlight' || shapeType === 'Strikethrough') {\n      if (shapeType === 'Highlight') {\n        items.push({\n          prefixIcon: 'e-pv-highlight-icon e-pv-icon'\n        });\n        items.push({\n          type: 'Separator',\n          align: 'Left'\n        });\n      } else if (shapeType === 'Underline') {\n        items.push({\n          prefixIcon: 'e-pv-underline-icon e-pv-icon'\n        });\n        items.push({\n          type: 'Separator',\n          align: 'Left'\n        });\n      } else if (shapeType === 'Strikethrough') {\n        items.push({\n          prefixIcon: 'e-pv-strikethrough-icon e-pv-icon'\n        });\n        items.push({\n          type: 'Separator',\n          align: 'Left'\n        });\n      }\n      items.push({\n        template: colorTemplate\n      });\n    } else if (shapeType === 'Stamp' || shapeType === 'Image') {\n      items.push({\n        prefixIcon: 'e-pv-stamp-icon e-pv-icon'\n      });\n      items.push({\n        type: 'Separator',\n        align: 'Left'\n      });\n    } else if (shapeType === 'StickyNotes') {\n      items.push({\n        prefixIcon: 'e-pv-comment-icon e-pv-icon'\n      });\n      items.push({\n        type: 'Separator',\n        align: 'Left'\n      });\n    }\n    items.push({\n      template: opacityTemplate\n    });\n    // eslint-disable-next-line max-len\n    items.push({\n      prefixIcon: 'e-pv-comment-panel-icon e-pv-icon',\n      className: 'e-pv-comment-panel-icon-container',\n      id: this.pdfViewer.element.id + '_annotation_commentPanel',\n      align: 'Right',\n      click: function (args) {\n        _this.pdfViewer.annotationModule.showCommentsPanel();\n      }\n    });\n    // eslint-disable-next-line max-len\n    items.push({\n      prefixIcon: 'e-pv-annotation-delete-icon e-pv-icon',\n      className: 'e-pv-annotation-delete-container',\n      id: this.pdfViewer.element.id + '_annotation_delete',\n      align: 'Right',\n      click: function (args) {\n        _this.pdfViewer.annotationModule.deleteAnnotation();\n        _this.propertyToolbar.destroy();\n        _this.toolbarCreated = false;\n        _this.createAnnotationToolbarForMobile();\n        _this.adjustMobileViewer();\n      }\n    });\n    return items;\n  };\n  // eslint:disable-next-line\n  AnnotationToolbar.prototype.createStampToolbarItemsForMobile = function () {\n    var opacityTemplate = this.getTemplate('span', '_annotation_opacity', 'e-pv-annotation-opacity-container');\n    // eslint:disable-next-line\n    var items = [];\n    items.push({\n      prefixIcon: 'e-pv-backward-icon e-pv-icon',\n      tooltipText: this.pdfViewer.localeObj.getConstant('Go Back'),\n      id: this.pdfViewer.element.id + '_backward',\n      click: this.goBackToToolbar.bind(this)\n    });\n    items.push({\n      type: 'Separator',\n      align: 'Left'\n    });\n    items.push({\n      template: opacityTemplate\n    });\n    return items;\n  };\n  // eslint:disable-next-line\n  AnnotationToolbar.prototype.createShapeToolbarItemsForMobile = function () {\n    var colorTemplate = this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate('span', '_annotation_color', 'e-pv-annotation-color-container');\n    // eslint-disable-next-line max-len\n    var strokeTemplate = this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate('span', '_annotation_stroke', 'e-pv-annotation-stroke-container');\n    var thicknessTemplate = this.getTemplate('span', '_annotation_thickness', 'e-pv-annotation-thickness-container');\n    var opacityTemplate = this.getTemplate('span', '_annotation_opacity', 'e-pv-annotation-opacity-container');\n    // eslint:disable-next-line\n    var items = [];\n    // eslint-disable-next-line max-len\n    items.push({\n      prefixIcon: 'e-pv-backward-icon e-pv-icon',\n      tooltipText: this.pdfViewer.localeObj.getConstant('Go Back'),\n      id: this.pdfViewer.element.id + '_backward',\n      click: this.goBackToToolbar.bind(this)\n    });\n    items.push({\n      prefixIcon: 'e-pv-shape-line-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_shape_line',\n      text: this.pdfViewer.localeObj.getConstant('Line Shape'),\n      align: 'Left'\n    });\n    // eslint-disable-next-line max-len\n    items.push({\n      prefixIcon: 'e-pv-shape-arrow-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_shape_arrow',\n      text: this.pdfViewer.localeObj.getConstant('Arrow Shape'),\n      align: 'Left'\n    });\n    // eslint-disable-next-line max-len\n    items.push({\n      prefixIcon: 'e-pv-shape-rectangle-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_shape_rectangle',\n      text: this.pdfViewer.localeObj.getConstant('Rectangle Shape'),\n      align: 'Left'\n    });\n    // eslint-disable-next-line max-len\n    items.push({\n      prefixIcon: 'e-pv-shape-circle-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_shape_circle',\n      text: this.pdfViewer.localeObj.getConstant('Circle Shape'),\n      align: 'Left'\n    });\n    // eslint-disable-next-line max-len\n    items.push({\n      prefixIcon: 'e-pv-shape-pentagon-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_shape_pentagon',\n      text: this.pdfViewer.localeObj.getConstant('Pentagon Shape'),\n      align: 'Left'\n    });\n    items.push({\n      type: 'Separator',\n      align: 'Left'\n    });\n    items.push({\n      template: colorTemplate\n    });\n    items.push({\n      template: strokeTemplate\n    });\n    items.push({\n      template: thicknessTemplate\n    });\n    items.push({\n      template: opacityTemplate\n    });\n    return items;\n  };\n  // eslint:disable-next-line\n  AnnotationToolbar.prototype.createCalibrateToolbarItemsForMobile = function () {\n    var colorTemplate = this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate('span', '_annotation_color', 'e-pv-annotation-color-container');\n    // eslint-disable-next-line max-len\n    var strokeTemplate = this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate('span', '_annotation_stroke', 'e-pv-annotation-stroke-container');\n    var thicknessTemplate = this.getTemplate('span', '_annotation_thickness', 'e-pv-annotation-thickness-container');\n    var opacityTemplate = this.getTemplate('span', '_annotation_opacity', 'e-pv-annotation-opacity-container');\n    // eslint:disable-next-line\n    var items = [];\n    // eslint-disable-next-line max-len\n    items.push({\n      prefixIcon: 'e-pv-backward-icon e-pv-icon',\n      tooltipText: this.pdfViewer.localeObj.getConstant('Go Back'),\n      id: this.pdfViewer.element.id + '_backward',\n      click: this.goBackToToolbar.bind(this)\n    });\n    items.push({\n      prefixIcon: 'e-pv-calibrate-distance-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_calibrate_distance',\n      text: this.pdfViewer.localeObj.getConstant(''),\n      align: 'Left'\n    });\n    // eslint-disable-next-line max-len\n    items.push({\n      prefixIcon: 'e-pv-calibrate-perimeter-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_calibrate_perimeter',\n      text: this.pdfViewer.localeObj.getConstant(''),\n      align: 'Left'\n    });\n    // eslint-disable-next-line max-len\n    items.push({\n      prefixIcon: 'e-pv-calibrate-area-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_calibrate_area',\n      text: this.pdfViewer.localeObj.getConstant(''),\n      align: 'Left'\n    });\n    // eslint-disable-next-line max-len\n    items.push({\n      prefixIcon: 'e-pv-calibrate-radius-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_calibrate_radius',\n      text: this.pdfViewer.localeObj.getConstant(''),\n      align: 'Left'\n    });\n    // eslint-disable-next-line max-len\n    items.push({\n      prefixIcon: 'e-pv-calibrate-volume-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_calibrate_volume',\n      text: this.pdfViewer.localeObj.getConstant(''),\n      align: 'Left'\n    });\n    items.push({\n      type: 'Separator',\n      align: 'Left'\n    });\n    items.push({\n      template: colorTemplate\n    });\n    items.push({\n      template: strokeTemplate\n    });\n    items.push({\n      template: thicknessTemplate\n    });\n    items.push({\n      template: opacityTemplate\n    });\n    return items;\n  };\n  AnnotationToolbar.prototype.handleShapeTool = function (type) {\n    if (!isBlazor() && Browser.isDevice) {\n      // eslint:disable-next-line\n      var selectedItems = document.querySelectorAll('.e-pv-select');\n      for (var i = 0; i < selectedItems.length; i++) {\n        if (selectedItems[i].id !== type && selectedItems[i].id !== this.pdfViewer.element.id + '_annotation') {\n          selectedItems[i].classList.remove('e-pv-select');\n        }\n      }\n    }\n  };\n  AnnotationToolbar.prototype.createPropDropDownButton = function (element, iconClass, target, tooltipText) {\n    // eslint-disable-next-line max-len\n    var dropDownButton = new DropDownButton({\n      iconCss: iconClass + ' e-pv-icon',\n      target: target,\n      cssClass: 'e-caret-hide'\n    });\n    if (this.pdfViewer.enableRtl) {\n      dropDownButton.enableRtl = true;\n    }\n    dropDownButton.appendTo(element);\n    this.primaryToolbar.createTooltip(element, tooltipText);\n    element.setAttribute('aria-label', tooltipText);\n    return dropDownButton;\n  };\n  // eslint-disable-next-line\n  AnnotationToolbar.prototype.textAlignmentToolbarItems = function () {\n    // eslint-disable-next-line\n    var items = [];\n    items.push({\n      prefixIcon: 'e-pv-left-align-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_left_align',\n      align: 'Left',\n      value: 'Left',\n      click: this.onClickTextAlignment.bind(this)\n    });\n    // eslint-disable-next-line max-len\n    items.push({\n      prefixIcon: 'e-pv-center-align-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_center_align',\n      align: 'Left',\n      value: 'Center',\n      click: this.onClickTextAlignment.bind(this)\n    });\n    // eslint-disable-next-line max-len\n    items.push({\n      prefixIcon: 'e-pv-right-align-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_right_align',\n      align: 'Left',\n      value: 'Right',\n      click: this.onClickTextAlignment.bind(this)\n    });\n    // eslint-disable-next-line max-len\n    items.push({\n      prefixIcon: 'e-pv-justfiy-align-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_justify_align',\n      align: 'Left',\n      value: 'Justify',\n      click: this.onClickTextAlignment.bind(this)\n    });\n    // eslint-disable-next-line max-len\n    return items;\n  };\n  AnnotationToolbar.prototype.afterAlignmentToolbarCreation = function () {\n    // eslint-disable-next-line max-len\n    this.alignLeftElement = this.primaryToolbar.addClassToolbarItem('_left_align', 'e-pv-left-align', this.pdfViewer.localeObj.getConstant('Align left'));\n    this.alignRightElement = this.primaryToolbar.addClassToolbarItem('_right_align', 'e-pv-right-align', this.pdfViewer.localeObj.getConstant('Align right'));\n    // eslint-disable-next-line max-len\n    this.alignCenterElement = this.primaryToolbar.addClassToolbarItem('_center_align', 'e-pv-center-align', this.pdfViewer.localeObj.getConstant('Center'));\n    this.alignJustifyElement = this.primaryToolbar.addClassToolbarItem('_justify_align', 'e-pv-justfiy-align', this.pdfViewer.localeObj.getConstant('Justify'));\n  };\n  AnnotationToolbar.prototype.afterPropertiesToolbarCreation = function () {\n    // eslint-disable-next-line max-len\n    this.boldElement = this.primaryToolbar.addClassToolbarItem('_bold', 'e-pv-bold', this.pdfViewer.localeObj.getConstant('Bold'));\n    this.italicElement = this.primaryToolbar.addClassToolbarItem('_italic', 'e-pv-italic', this.pdfViewer.localeObj.getConstant('Italic'));\n    // eslint-disable-next-line max-len\n    this.fontStyleStrikethroughItem = this.primaryToolbar.addClassToolbarItem('_strikeout', 'e-pv-strikeout', this.pdfViewer.localeObj.getConstant('Strikethroughs'));\n    this.fontStyleUnderlineItem = this.primaryToolbar.addClassToolbarItem('_underline_textinput', 'e-pv-underlinetext', this.pdfViewer.localeObj.getConstant('Underlines'));\n  };\n  AnnotationToolbar.prototype.createDropDownListForSize = function (fontSelectElement) {\n    // eslint-disable-next-line max-len\n    var proxy = this;\n    var fontSize = ['8px', '9px', '10px', '11px', '12px', '14px', '16px', '18px', '20px', '22px', '24px', '26px', '28px', '36px', '48px', '72px', '96px'];\n    if (!this.pdfViewer.enableRtl) {\n      this.fontSize = new ComboBox({\n        dataSource: fontSize,\n        cssClass: 'e-pv-prop-dropdown',\n        allowCustom: true,\n        showClearButton: false,\n        width: '80px',\n        popupWidth: '100px'\n      });\n    } else {\n      this.fontSize = new ComboBox({\n        dataSource: fontSize,\n        cssClass: 'e-pv-prop-dropdown-rtl',\n        allowCustom: true,\n        showClearButton: false,\n        width: '80px',\n        popupWidth: '100px',\n        enableRtl: true\n      });\n    }\n    this.fontSize.value = '16px';\n    this.fontSize.appendTo(fontSelectElement);\n    this.primaryToolbar.createTooltip(fontSelectElement, this.pdfViewer.localeObj.getConstant('Font size'));\n    fontSelectElement.setAttribute('aria-label', this.pdfViewer.localeObj.getConstant('Font size'));\n    this.fontSize.addEventListener('change', function (args) {\n      var isUserInteracted = args.isInteracted;\n      proxy.onFontSizeChange(proxy, isUserInteracted);\n    });\n  };\n  AnnotationToolbar.prototype.createDropDownListForFamily = function (fontSelectElement) {\n    var _this = this;\n    var fontStyle = [{\n      FontName: 'Helvetica'\n    }, {\n      FontName: 'Courier'\n    }, {\n      FontName: 'Symbol'\n    }, {\n      FontName: 'Times New Roman'\n    }];\n    if (!this.pdfViewer.enableRtl) {\n      this.fontFamily = new ComboBox({\n        dataSource: fontStyle,\n        query: new Query().select(['FontName']),\n        fields: {\n          text: 'FontName',\n          value: 'FontName'\n        },\n        cssClass: 'e-pv-prop-dropdown',\n        itemTemplate: initializeCSPTemplate(function (data) {\n          return \"<span style=\\\"font-family: \" + data.FontName + \";\\\">\" + data.FontName + \"</span>\";\n        }),\n        allowCustom: true,\n        showClearButton: false,\n        width: '110px',\n        popupWidth: '190px'\n      });\n    } else {\n      this.fontFamily = new ComboBox({\n        dataSource: fontStyle,\n        query: new Query().select(['FontName']),\n        fields: {\n          text: 'FontName',\n          value: 'FontName'\n        },\n        cssClass: 'e-pv-prop-dropdown-rtl',\n        itemTemplate: initializeCSPTemplate(function (data) {\n          return \"<span style=\\\"font-family: \" + data.FontName + \";\\\">\" + data.FontName + \"</span>\";\n        }),\n        allowCustom: true,\n        showClearButton: false,\n        width: '110px',\n        popupWidth: '190px',\n        enableRtl: true\n      });\n    }\n    this.fontFamily.isStringTemplate = true;\n    this.fontFamily.value = 'Helvetica';\n    this.fontFamily.appendTo(fontSelectElement);\n    this.primaryToolbar.createTooltip(fontSelectElement, this.pdfViewer.localeObj.getConstant('Font family'));\n    fontSelectElement.setAttribute('aria-label', this.pdfViewer.localeObj.getConstant('Font family'));\n    this.fontFamily.addEventListener('change', function () {\n      _this.onFontFamilyChange(_this);\n    });\n  };\n  // eslint-disable-next-line\n  AnnotationToolbar.prototype.textPropertiesToolbarItems = function () {\n    // eslint-disable-next-line\n    var items = [];\n    items.push({\n      prefixIcon: 'e-pv-bold-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_bold',\n      align: 'Left',\n      value: 'bold',\n      click: this.onClickTextProperties.bind(this)\n    });\n    // eslint-disable-next-line max-len\n    items.push({\n      prefixIcon: 'e-pv-italic-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_italic',\n      align: 'Left',\n      value: 'italic',\n      click: this.onClickTextProperties.bind(this)\n    });\n    // eslint-disable-next-line max-len\n    items.push({\n      prefixIcon: 'e-pv-strikeout-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_strikeout',\n      align: 'Left',\n      value: 'strikeout',\n      click: this.onClickTextProperties.bind(this)\n    });\n    // eslint-disable-next-line max-len\n    items.push({\n      prefixIcon: 'e-pv-underlinetext-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_underline_textinput',\n      align: 'Left',\n      value: 'underline',\n      click: this.onClickTextProperties.bind(this)\n    });\n    return items;\n  };\n  // eslint-disable-next-line\n  AnnotationToolbar.prototype.createShapeToolbarItems = function () {\n    // eslint-disable-next-line\n    var items = [];\n    items.push({\n      prefixIcon: 'e-pv-shape-line-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_shape_line',\n      text: this.pdfViewer.localeObj.getConstant('Line Shape'),\n      align: 'Left'\n    });\n    // eslint-disable-next-line max-len\n    items.push({\n      prefixIcon: 'e-pv-shape-arrow-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_shape_arrow',\n      text: this.pdfViewer.localeObj.getConstant('Arrow Shape'),\n      align: 'Left'\n    });\n    // eslint-disable-next-line max-len\n    items.push({\n      prefixIcon: 'e-pv-shape-rectangle-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_shape_rectangle',\n      text: this.pdfViewer.localeObj.getConstant('Rectangle Shape'),\n      align: 'Left'\n    });\n    // eslint-disable-next-line max-len\n    items.push({\n      prefixIcon: 'e-pv-shape-circle-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_shape_circle',\n      text: this.pdfViewer.localeObj.getConstant('Circle Shape'),\n      align: 'Left'\n    });\n    // eslint-disable-next-line max-len\n    items.push({\n      prefixIcon: 'e-pv-shape-pentagon-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_shape_pentagon',\n      text: this.pdfViewer.localeObj.getConstant('Pentagon Shape'),\n      align: 'Left'\n    });\n    return items;\n  };\n  // eslint-disable-next-line\n  AnnotationToolbar.prototype.createCalibrateToolbarItems = function () {\n    // eslint-disable-next-line\n    var items = [];\n    items.push({\n      prefixIcon: 'e-pv-calibrate-distance-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_calibrate_distance',\n      text: this.pdfViewer.localeObj.getConstant(''),\n      align: 'Left'\n    });\n    // eslint-disable-next-line max-len\n    items.push({\n      prefixIcon: 'e-pv-calibrate-perimeter-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_calibrate_perimeter',\n      text: this.pdfViewer.localeObj.getConstant(''),\n      align: 'Left'\n    });\n    // eslint-disable-next-line max-len\n    items.push({\n      prefixIcon: 'e-pv-calibrate-area-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_calibrate_area',\n      text: this.pdfViewer.localeObj.getConstant(''),\n      align: 'Left'\n    });\n    // eslint-disable-next-line max-len\n    items.push({\n      prefixIcon: 'e-pv-calibrate-radius-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_calibrate_radius',\n      text: this.pdfViewer.localeObj.getConstant(''),\n      align: 'Left'\n    });\n    // eslint-disable-next-line max-len\n    items.push({\n      prefixIcon: 'e-pv-calibrate-volume-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_calibrate_volume',\n      text: this.pdfViewer.localeObj.getConstant(''),\n      align: 'Left'\n    });\n    return items;\n  };\n  AnnotationToolbar.prototype.onCalibrateToolbarClicked = function (args) {\n    var elementId = this.pdfViewer.element.id;\n    var measureModule = this.pdfViewer.annotation.measureAnnotationModule;\n    this.deselectAllItems();\n    this.resetFreeTextAnnot();\n    if (Browser.isDevice && !isBlazor()) {\n      // tslint:disable-next-line\n      var element = args.originalEvent.target;\n      this.pdfViewer.toolbarModule.selectItem(element.parentElement);\n    }\n    switch (args.originalEvent.target.id) {\n      case elementId + '_calibrate_distance':\n      case elementId + '_calibrate_distanceIcon':\n        measureModule.setAnnotationType('Distance');\n        this.onShapeDrawSelection(false);\n        this.updateColorInIcon(this.colorDropDownElement, measureModule.distanceFillColor);\n        this.updateColorInIcon(this.strokeDropDownElement, measureModule.distanceStrokeColor);\n        this.handleShapeTool(elementId + '_calibrate_distance');\n        break;\n      case elementId + '_calibrate_perimeter':\n      case elementId + '_calibrate_perimeterIcon':\n        measureModule.setAnnotationType('Perimeter');\n        this.onShapeDrawSelection(false);\n        this.updateColorInIcon(this.colorDropDownElement, measureModule.perimeterFillColor);\n        this.updateColorInIcon(this.strokeDropDownElement, measureModule.perimeterStrokeColor);\n        this.handleShapeTool(elementId + '_calibrate_perimeter');\n        break;\n      case elementId + '_calibrate_area':\n      case elementId + '_calibrate_areaIcon':\n        measureModule.setAnnotationType('Area');\n        this.onShapeDrawSelection(false);\n        this.updateColorInIcon(this.colorDropDownElement, measureModule.areaFillColor);\n        this.updateColorInIcon(this.strokeDropDownElement, measureModule.areaStrokeColor);\n        this.handleShapeTool(elementId + '_calibrate_area');\n        break;\n      case elementId + '_calibrate_radius':\n      case elementId + '_calibrate_radiusIcon':\n        measureModule.setAnnotationType('Radius');\n        this.onShapeDrawSelection(false);\n        this.updateColorInIcon(this.colorDropDownElement, measureModule.radiusFillColor);\n        this.updateColorInIcon(this.strokeDropDownElement, measureModule.radiusStrokeColor);\n        this.handleShapeTool(elementId + '_calibrate_radius');\n        break;\n      case elementId + '_calibrate_volume':\n      case elementId + '_calibrate_volumeIcon':\n        measureModule.setAnnotationType('Volume');\n        this.onShapeDrawSelection(false);\n        this.updateColorInIcon(this.colorDropDownElement, measureModule.volumeFillColor);\n        this.updateColorInIcon(this.strokeDropDownElement, measureModule.volumeStrokeColor);\n        this.handleShapeTool(elementId + '_calibrate_volume');\n        break;\n    }\n  };\n  AnnotationToolbar.prototype.onShapeDrawSelection = function (isShape) {\n    // eslint-disable-next-line\n    var annotation = this.pdfViewer.selectedItems.annotations[0];\n    if (!Browser.isDevice) {\n      this.updateInteractionTools();\n      this.enableAnnotationPropertiesTools(true);\n      if (isShape) {\n        this.shapeDropDown.toggle();\n      } else {\n        this.calibrateDropDown.toggle();\n      }\n    }\n    this.pdfViewer.annotation.triggerAnnotationUnselectEvent();\n  };\n  AnnotationToolbar.prototype.afterCalibrateToolbarCreationForMobile = function () {\n    // eslint-disable-next-line max-len\n    this.primaryToolbar.addClassToolbarItem('_calibrate_distance', 'e-pv-calibrate-distance', this.pdfViewer.localeObj.getConstant('Calibrate Distance'));\n    this.primaryToolbar.addClassToolbarItem('_calibrate_perimeter', 'e-pv-calibrate-perimeter', this.pdfViewer.localeObj.getConstant('Calibrate Perimeter'));\n    // eslint-disable-next-line max-len\n    this.primaryToolbar.addClassToolbarItem('_calibrate_area', 'e-pv-calibrate-area', this.pdfViewer.localeObj.getConstant('Calibrate Area'));\n    this.primaryToolbar.addClassToolbarItem('_calibrate_radius', 'e-pv-calibrate-radius', this.pdfViewer.localeObj.getConstant('Calibrate Radius'));\n    // eslint-disable-next-line max-len\n    this.primaryToolbar.addClassToolbarItem('_calibrate_volume', 'e-pv-calibrate-volume', this.pdfViewer.localeObj.getConstant('Calibrate Volume'));\n  };\n  AnnotationToolbar.prototype.afterShapeToolbarCreationForMobile = function () {\n    // eslint-disable-next-line max-len\n    this.primaryToolbar.addClassToolbarItem('_annotation_color', 'e-pv-annotation-color-container', this.pdfViewer.localeObj.getConstant('Change Color'));\n    // eslint-disable-next-line max-len\n    this.primaryToolbar.addClassToolbarItem('_annotation_stroke', 'e-pv-annotation-stroke-container', this.pdfViewer.localeObj.getConstant('Change Stroke Color'));\n    // eslint-disable-next-line max-len\n    this.primaryToolbar.addClassToolbarItem('_annotation_thickness', 'e-pv-annotation-thickness-container', this.pdfViewer.localeObj.getConstant('Chnage Border Thickness'));\n    // eslint-disable-next-line max-len\n    this.primaryToolbar.addClassToolbarItem('_annotation_opacity', 'e-annotation-opacity-container', this.pdfViewer.localeObj.getConstant('Change Opacity'));\n    this.primaryToolbar.addClassToolbarItem('_shape_line', 'e-pv-shape-line', this.pdfViewer.localeObj.getConstant('Add line'));\n    this.primaryToolbar.addClassToolbarItem('_shape_arrow', 'e-pv-shape-arrow', this.pdfViewer.localeObj.getConstant('Add arrow'));\n    // eslint-disable-next-line max-len\n    this.primaryToolbar.addClassToolbarItem('_shape_rectangle', 'e-pv-shape-rectangle', this.pdfViewer.localeObj.getConstant('Add rectangle'));\n    // eslint-disable-next-line max-len\n    this.primaryToolbar.addClassToolbarItem('_shape_circle', 'e-pv-shape-circle', this.pdfViewer.localeObj.getConstant('Add circle'));\n    this.primaryToolbar.addClassToolbarItem('_shape_pentagon', 'e-pv-shape-pentagon', this.pdfViewer.localeObj.getConstant('Add polygon'));\n  };\n  AnnotationToolbar.prototype.afterShapeToolbarCreation = function () {\n    this.lineElement = this.primaryToolbar.addClassToolbarItem('_shape_line', 'e-pv-shape-line', this.pdfViewer.localeObj.getConstant('Add line'));\n    this.arrowElement = this.primaryToolbar.addClassToolbarItem('_shape_arrow', 'e-pv-shape-arrow', this.pdfViewer.localeObj.getConstant('Add arrow'));\n    // eslint-disable-next-line max-len\n    this.rectangleElement = this.primaryToolbar.addClassToolbarItem('_shape_rectangle', 'e-pv-shape-rectangle', this.pdfViewer.localeObj.getConstant('Add rectangle'));\n    // eslint-disable-next-line max-len\n    this.circleElement = this.primaryToolbar.addClassToolbarItem('_shape_circle', 'e-pv-shape-circle', this.pdfViewer.localeObj.getConstant('Add circle'));\n    this.polygonElement = this.primaryToolbar.addClassToolbarItem('_shape_pentagon', 'e-pv-shape-pentagon', this.pdfViewer.localeObj.getConstant('Add polygon'));\n  };\n  AnnotationToolbar.prototype.afterCalibrateToolbarCreation = function () {\n    // eslint-disable-next-line max-len\n    this.calibrateDistance = this.primaryToolbar.addClassToolbarItem('_calibrate_distance', 'e-pv-calibrate-distance', this.pdfViewer.localeObj.getConstant('Calibrate Distance'));\n    this.calibratePerimeter = this.primaryToolbar.addClassToolbarItem('_calibrate_perimeter', 'e-pv-calibrate-perimeter', this.pdfViewer.localeObj.getConstant('Calibrate Perimeter'));\n    // eslint-disable-next-line max-len\n    this.calibrateArea = this.primaryToolbar.addClassToolbarItem('_calibrate_area', 'e-pv-calibrate-area', this.pdfViewer.localeObj.getConstant('Calibrate Area'));\n    this.calibrateRadius = this.primaryToolbar.addClassToolbarItem('_calibrate_radius', 'e-pv-calibrate-radius', this.pdfViewer.localeObj.getConstant('Calibrate Radius'));\n    // eslint-disable-next-line max-len\n    this.calibrateVolume = this.primaryToolbar.addClassToolbarItem('_calibrate_volume', 'e-pv-calibrate-volume', this.pdfViewer.localeObj.getConstant('Calibrate Volume'));\n  };\n  AnnotationToolbar.prototype.afterMobileToolbarCreation = function () {\n    // eslint-disable-next-line max-len\n    this.highlightItem = this.primaryToolbar.addClassToolbarItem('_highlight', 'e-pv-highlight', this.pdfViewer.localeObj.getConstant('Highlight'));\n    this.underlineItem = this.primaryToolbar.addClassToolbarItem('_underline', 'e-pv-underline', this.pdfViewer.localeObj.getConstant('Underline'));\n    // eslint-disable-next-line max-len\n    this.strikethroughItem = this.primaryToolbar.addClassToolbarItem('_strikethrough', 'e-pv-strikethrough', this.pdfViewer.localeObj.getConstant('Strikethrough'));\n    // eslint-disable-next-line max-len\n    this.shapesItem = this.primaryToolbar.addClassToolbarItem('_annotation_shapes', 'e-pv-annotation-shapes', this.pdfViewer.localeObj.getConstant('Add Shapes'));\n    this.calibrateItem = this.primaryToolbar.addClassToolbarItem('_annotation_calibrate', 'e-pv-annotation-calibrate', this.pdfViewer.localeObj.getConstant('Calibrate'));\n    // eslint-disable-next-line max-len\n    this.freeTextEditItem = this.primaryToolbar.addClassToolbarItem('_annotation_freeTextEdit', 'e-pv-annotation-freeTextEdit', this.pdfViewer.localeObj.getConstant('Free Text'));\n    // eslint-disable-next-line max-len\n    this.commentItem = this.primaryToolbar.addClassToolbarItem('_comment', 'e-pv-comment', this.pdfViewer.localeObj.getConstant('Add Comments'));\n    // eslint-disable-next-line max-len\n    this.commentItem = this.primaryToolbar.addClassToolbarItem('_annotation_commentPanel', 'e-pv-annotation-comment-panel', this.pdfViewer.localeObj.getConstant('Comment Panel'));\n    // eslint-disable-next-line max-len\n    this.inkAnnotationItem = this.primaryToolbar.addClassToolbarItem('_annotation_ink', 'e-pv-annotation-ink', this.pdfViewer.localeObj.getConstant('Draw Ink'));\n    this.selectAnnotationDeleteItem(false);\n    this.enableCommentPanelTool(this.pdfViewer.enableCommentPanel);\n  };\n  AnnotationToolbar.prototype.createColorPicker = function (idString) {\n    var inputElement;\n    var existingInput = document.getElementById(idString + '_target');\n    if (existingInput) {\n      inputElement = existingInput;\n    } else {\n      inputElement = createElement('input', {\n        id: idString + '_target'\n      });\n    }\n    document.body.appendChild(inputElement);\n    var colorPicker = new ColorPicker({\n      inline: true,\n      mode: 'Palette',\n      cssClass: 'e-show-value',\n      enableOpacity: false,\n      value: '#000000',\n      showButtons: false,\n      modeSwitcher: false\n    });\n    if (this.pdfViewer.enableRtl) {\n      colorPicker.enableRtl = true;\n    }\n    colorPicker.appendTo(inputElement);\n    return colorPicker;\n  };\n  // eslint-disable-next-line\n  AnnotationToolbar.prototype.onColorPickerChange = function (args) {\n    // eslint-disable-next-line\n    var currentColor;\n    if (!isBlazor()) {\n      currentColor = args.currentValue.hex === '' ? '#ffffff00' : args.currentValue.hex;\n    } else {\n      currentColor = args[0];\n    }\n    if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n      if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n        this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyColorProperty(currentColor);\n      } else {\n        switch (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode) {\n          case 'Highlight':\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor = currentColor;\n            break;\n          case 'Underline':\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor = currentColor;\n            break;\n          case 'Strikethrough':\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor = currentColor;\n            break;\n        }\n      }\n    }\n    if (this.pdfViewer.selectedItems.annotations.length === 1) {\n      if (isBlazor()) {\n        if (args[0] !== args[1]) {\n          this.pdfViewer.annotation.modifyFillColor(currentColor);\n        }\n      } else {\n        if (args.currentValue.hex !== args.previousValue.hex) {\n          this.pdfViewer.annotation.modifyFillColor(currentColor);\n        }\n      }\n    } else {\n      if (this.pdfViewer.annotation.shapeAnnotationModule) {\n        switch (this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode) {\n          case 'Line':\n            this.pdfViewer.annotation.shapeAnnotationModule.lineFillColor = currentColor;\n            break;\n          case 'Arrow':\n            this.pdfViewer.annotation.shapeAnnotationModule.arrowFillColor = currentColor;\n            break;\n          case 'Rectangle':\n            this.pdfViewer.annotation.shapeAnnotationModule.rectangleFillColor = currentColor;\n            break;\n          case 'Circle':\n            this.pdfViewer.annotation.shapeAnnotationModule.circleFillColor = currentColor;\n            break;\n          case 'Polygon':\n            this.pdfViewer.annotation.shapeAnnotationModule.polygonFillColor = currentColor;\n            break;\n        }\n      }\n      if (this.pdfViewer.drawingObject) {\n        this.pdfViewer.drawingObject.fillColor = currentColor;\n        if (this.pdfViewer.drawingObject.shapeAnnotationType === 'FreeText') {\n          this.pdfViewer.annotation.freeTextAnnotationModule.fillColor = currentColor;\n        }\n      }\n    }\n    if (isBlazor()) {\n      this.colorDropDownElementInBlazor = this.pdfViewer.element.querySelector('.e-pv-annotation-color-container');\n      this.updateColorInIcon(this.colorDropDownElementInBlazor, currentColor);\n    } else {\n      this.updateColorInIcon(this.colorDropDownElement, currentColor);\n      this.colorDropDown.toggle();\n    }\n  };\n  // eslint-disable-next-line\n  AnnotationToolbar.prototype.onStrokePickerChange = function (args) {\n    // eslint-disable-next-line\n    var currentColor;\n    if (!isBlazor()) {\n      currentColor = args.currentValue.hex === '' ? '#ffffff00' : args.currentValue.hex;\n    } else {\n      currentColor = args[0];\n    }\n    if (this.pdfViewer.selectedItems.annotations.length === 1) {\n      if (isBlazor()) {\n        if (args[0] !== args[1]) {\n          this.pdfViewer.annotation.modifyStrokeColor(currentColor);\n        }\n      } else {\n        if (args.currentValue.hex !== args.previousValue.hex) {\n          this.pdfViewer.annotation.modifyStrokeColor(currentColor);\n        }\n      }\n    } else {\n      if (this.pdfViewer.annotation.shapeAnnotationModule) {\n        switch (this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode) {\n          case 'Line':\n            this.pdfViewer.annotation.shapeAnnotationModule.lineStrokeColor = currentColor;\n            break;\n          case 'Arrow':\n            this.pdfViewer.annotation.shapeAnnotationModule.arrowStrokeColor = currentColor;\n            break;\n          case 'Rectangle':\n            this.pdfViewer.annotation.shapeAnnotationModule.rectangleStrokeColor = currentColor;\n            break;\n          case 'Circle':\n            this.pdfViewer.annotation.shapeAnnotationModule.circleStrokeColor = currentColor;\n            break;\n          case 'Polygon':\n            this.pdfViewer.annotation.shapeAnnotationModule.polygonStrokeColor = currentColor;\n            break;\n        }\n      }\n      // eslint-disable-next-line\n      var annotationModule = this.pdfViewer.annotation;\n      if (annotationModule && annotationModule.inkAnnotationModule) {\n        this.pdfViewer.inkAnnotationSettings.strokeColor = currentColor;\n      }\n      if (this.pdfViewer.drawingObject) {\n        this.pdfViewer.drawingObject.strokeColor = currentColor;\n      }\n      if (this.pdfViewer.drawingObject && this.pdfViewer.drawingObject.shapeAnnotationType === 'FreeText') {\n        this.pdfViewer.annotation.freeTextAnnotationModule.borderColor = currentColor;\n      }\n    }\n    if (isBlazor()) {\n      this.strokeDropDownElementInBlazor = this.pdfViewer.element.querySelector('.e-pv-annotation-stroke-container');\n      this.updateColorInIcon(this.strokeDropDownElementInBlazor, currentColor);\n    } else {\n      this.updateColorInIcon(this.strokeDropDownElement, currentColor);\n      this.strokeDropDown.toggle();\n    }\n  };\n  /**\n   * @param element\n   * @param color\n   * @param element\n   * @param color\n   * @private\n   */\n  AnnotationToolbar.prototype.updateColorInIcon = function (element, color) {\n    if (isBlazor()) {\n      if (element) {\n        element.children[0].style.borderBottomColor = color;\n      }\n    } else {\n      if (element) {\n        element.childNodes[0] ? element.childNodes[0].style.borderBottomColor = color : element.childNodes[0];\n      }\n    }\n  };\n  /**\n   * @param currentOption\n   * @private\n   */\n  AnnotationToolbar.prototype.updateTextPropertySelection = function (currentOption) {\n    if (currentOption === 'bold') {\n      document.getElementById(this.pdfViewer.element.id + '_bold').classList.toggle('textprop-option-active');\n    } else if (currentOption === 'italic') {\n      document.getElementById(this.pdfViewer.element.id + '_italic').classList.toggle('textprop-option-active');\n    } else if (currentOption === 'underline') {\n      document.getElementById(this.pdfViewer.element.id + '_underline_textinput').classList.toggle('textprop-option-active');\n      document.getElementById(this.pdfViewer.element.id + '_strikeout').classList.remove('textprop-option-active');\n    } else if (currentOption === 'strikeout') {\n      document.getElementById(this.pdfViewer.element.id + '_strikeout').classList.toggle('textprop-option-active');\n      document.getElementById(this.pdfViewer.element.id + '_underline_textinput').classList.remove('textprop-option-active');\n    }\n  };\n  /**\n   * @param family\n   * @private\n   */\n  AnnotationToolbar.prototype.updateFontFamilyInIcon = function (family) {\n    this.fontFamily.value = family;\n  };\n  /**\n   * @param align\n   * @private\n   */\n  AnnotationToolbar.prototype.updateTextAlignInIcon = function (align) {\n    var className = 'e-btn-icon e-pv-left-align-icon e-pv-icon';\n    var leftAlign = document.getElementById(this.pdfViewer.element.id + '_left_align');\n    var rightAlign = document.getElementById(this.pdfViewer.element.id + '_right_align');\n    var centerAlign = document.getElementById(this.pdfViewer.element.id + '_center_align');\n    var justifyAlign = document.getElementById(this.pdfViewer.element.id + '_justify_align');\n    if (!isBlazor()) {\n      leftAlign.classList.remove('textprop-option-active');\n      rightAlign.classList.remove('textprop-option-active');\n      centerAlign.classList.remove('textprop-option-active');\n      justifyAlign.classList.remove('textprop-option-active');\n    }\n    if (align === 'Left') {\n      leftAlign.classList.add('textprop-option-active');\n    } else if (align === 'Right') {\n      className = 'e-btn-icon e-pv-right-align-icon e-pv-icon';\n      rightAlign.classList.add('textprop-option-active');\n    } else if (align === 'Center') {\n      className = 'e-btn-icon e-pv-center-align-icon e-pv-icon';\n      centerAlign.classList.add('textprop-option-active');\n    } else if (align === 'Justify') {\n      className = 'e-btn-icon e-pv-justfiy-align-icon e-pv-icon';\n      justifyAlign.classList.add('textprop-option-active');\n    }\n    document.getElementById(this.pdfViewer.element.id + '_annotation_textalign').children[0].className = className;\n  };\n  /**\n   * @param size\n   * @private\n   */\n  AnnotationToolbar.prototype.updateFontSizeInIcon = function (size) {\n    this.fontSize.value = size + 'px';\n  };\n  AnnotationToolbar.prototype.updateOpacityIndicator = function () {\n    // eslint-disable-next-line\n    this.opacityIndicator.textContent = parseInt(Math.round(this.opacitySlider.value).toString()) + '%';\n  };\n  AnnotationToolbar.prototype.updateThicknessIndicator = function () {\n    this.thicknessIndicator.textContent = this.thicknessSlider.value + ' pt';\n  };\n  AnnotationToolbar.prototype.createSlider = function (idString) {\n    var outerContainer = createElement('div', {\n      className: 'e-pv-annotation-opacity-popup-container'\n    });\n    document.body.appendChild(outerContainer);\n    var label = createElement('span', {\n      id: idString + '_label',\n      className: 'e-pv-annotation-opacity-label'\n    });\n    label.textContent = this.pdfViewer.localeObj.getConstant('Opacity');\n    var sliderElement = createElement('div', {\n      id: idString + '_slider'\n    });\n    this.opacitySlider = new Slider({\n      type: 'MinRange',\n      cssClass: 'e-pv-annotation-opacity-slider',\n      max: 100,\n      min: 0\n    });\n    // eslint-disable-next-line max-len\n    this.opacityIndicator = createElement('div', {\n      id: idString + '_opacity_indicator',\n      className: 'e-pv-annotation-opacity-indicator'\n    });\n    this.opacityIndicator.textContent = '100%';\n    if (!this.pdfViewer.enableRtl) {\n      outerContainer.appendChild(label);\n      outerContainer.appendChild(sliderElement);\n      this.opacitySlider.appendTo(sliderElement);\n      this.opacitySlider.element.parentElement.classList.add('e-pv-annotation-opacity-slider-container');\n      outerContainer.appendChild(this.opacityIndicator);\n    } else {\n      outerContainer.appendChild(this.opacityIndicator);\n      outerContainer.appendChild(sliderElement);\n      this.opacitySlider.enableRtl = true;\n      this.opacitySlider.appendTo(sliderElement);\n      this.opacitySlider.element.parentElement.classList.add('e-pv-annotation-opacity-slider-container');\n      outerContainer.appendChild(label);\n    }\n    return outerContainer;\n  };\n  AnnotationToolbar.prototype.createThicknessSlider = function (idString) {\n    var outerContainer = createElement('div', {\n      className: 'e-pv-annotation-thickness-popup-container'\n    });\n    document.body.appendChild(outerContainer);\n    var label = createElement('span', {\n      id: idString + '_label',\n      className: 'e-pv-annotation-thickness-label'\n    });\n    label.textContent = this.pdfViewer.localeObj.getConstant('Line Thickness');\n    var sliderElement = createElement('div', {\n      id: idString + '_slider'\n    });\n    this.thicknessSlider = new Slider({\n      type: 'MinRange',\n      cssClass: 'e-pv-annotation-thickness-slider',\n      max: 12,\n      min: 0\n    });\n    // eslint-disable-next-line max-len\n    this.thicknessIndicator = createElement('div', {\n      id: idString + '_thickness_indicator',\n      className: 'e-pv-annotation-thickness-indicator'\n    });\n    this.thicknessIndicator.textContent = '0 pt';\n    if (!this.pdfViewer.enableRtl) {\n      outerContainer.appendChild(label);\n      outerContainer.appendChild(sliderElement);\n      this.thicknessSlider.appendTo(sliderElement);\n      outerContainer.appendChild(this.thicknessIndicator);\n    } else {\n      outerContainer.appendChild(this.thicknessIndicator);\n      outerContainer.appendChild(sliderElement);\n      this.thicknessSlider.enableRtl = true;\n      this.thicknessSlider.appendTo(sliderElement);\n      outerContainer.appendChild(label);\n    }\n    this.thicknessSlider.element.parentElement.classList.add('e-pv-annotation-thickness-slider-container');\n    return outerContainer;\n  };\n  AnnotationToolbar.prototype.afterToolbarCreation = function () {\n    // eslint-disable-next-line max-len\n    this.highlightItem = this.primaryToolbar.addClassToolbarItem('_highlight', 'e-pv-highlight', this.pdfViewer.localeObj.getConstant('Highlight'));\n    this.underlineItem = this.primaryToolbar.addClassToolbarItem('_underline', 'e-pv-underline', this.pdfViewer.localeObj.getConstant('Underline'));\n    // eslint-disable-next-line max-len\n    this.strikethroughItem = this.primaryToolbar.addClassToolbarItem('_strikethrough', 'e-pv-strikethrough', this.pdfViewer.localeObj.getConstant('Strikethrough'));\n    this.deleteItem = this.primaryToolbar.addClassToolbarItem('_annotation_delete', 'e-pv-annotation-delete', this.pdfViewer.localeObj.getConstant('Delete'));\n    // eslint-disable-next-line max-len\n    this.freeTextEditItem = this.primaryToolbar.addClassToolbarItem('_annotation_freeTextEdit', 'e-pv-annotation-freeTextEdit', this.pdfViewer.localeObj.getConstant('Free Text'));\n    // eslint-disable-next-line max-len\n    this.inkAnnotationItem = this.primaryToolbar.addClassToolbarItem('_annotation_ink', 'e-pv-annotation-ink', this.pdfViewer.localeObj.getConstant('Draw Ink'));\n    // eslint-disable-next-line max-len\n    this.pdfViewerBase.getElement('_annotation_shapes').setAttribute('aria-label', this.pdfViewer.localeObj.getConstant('Add Shapes'));\n    // eslint-disable-next-line max-len\n    this.pdfViewerBase.getElement('_annotation_calibrate').setAttribute('aria-label', this.pdfViewer.localeObj.getConstant('Calibrate'));\n    // eslint-disable-next-line max-len\n    this.pdfViewerBase.getElement('_comment').setAttribute('aria-label', this.pdfViewer.localeObj.getConstant('Add Comments'));\n    // eslint-disable-next-line max-len\n    this.commentItem = this.primaryToolbar.addClassToolbarItem('_annotation_commentPanel', 'e-pv-annotation-comment-panel', this.pdfViewer.localeObj.getConstant('Comment Panel'));\n    this.closeItem = this.primaryToolbar.addClassToolbarItem('_annotation_close', 'e-pv-annotation-tools-close', null);\n    this.pdfViewerBase.getElement('_annotation_close').setAttribute('aria-label', \"Close Annotation Toolbar\");\n    this.selectAnnotationDeleteItem(false);\n    this.enableTextMarkupAnnotationPropertiesTools(false);\n    this.enableCommentPanelTool(this.pdfViewer.enableCommentPanel);\n  };\n  AnnotationToolbar.prototype.onToolbarClicked = function (args) {\n    // eslint-disable-next-line\n    var annotation = this.pdfViewer.selectedItems.annotations[0];\n    if (args.originalEvent.target.id) {\n      this.pdfViewer.toolbarModule.updateStampItems();\n    }\n    // eslint-disable-next-line max-len\n    var isKeyBoardEvent = args.originalEvent && args.originalEvent.pointerType !== 'mouse' && args.originalEvent.pointerType !== 'touch';\n    this.pdfViewer.toolbarModule.deSelectCommentAnnotation();\n    switch (args.originalEvent.target.id) {\n      case this.pdfViewer.element.id + '_highlight':\n      case this.pdfViewer.element.id + '_highlightIcon':\n        this.pdfViewer.tool = '';\n        if (!Browser.isDevice) {\n          this.pdfViewer.tool = '';\n          this.resetFreeTextAnnot();\n          this.handleHighlight();\n        } else {\n          this.pdfViewer.annotationModule.setAnnotationMode('Highlight');\n          this.textMarkupForMobile(args);\n        }\n        this.pdfViewer.annotation.triggerAnnotationUnselectEvent();\n        break;\n      case this.pdfViewer.element.id + '_underline':\n      case this.pdfViewer.element.id + '_underlineIcon':\n        this.pdfViewer.tool = '';\n        if (!Browser.isDevice) {\n          this.pdfViewer.tool = '';\n          this.resetFreeTextAnnot();\n          this.handleUnderline();\n        } else {\n          this.pdfViewer.annotationModule.setAnnotationMode('Underline');\n          this.textMarkupForMobile(args);\n        }\n        this.pdfViewer.annotation.triggerAnnotationUnselectEvent();\n        break;\n      case this.pdfViewer.element.id + '_strikethrough':\n      case this.pdfViewer.element.id + '_strikethroughIcon':\n        this.pdfViewer.tool = '';\n        if (!Browser.isDevice) {\n          this.pdfViewer.tool = '';\n          this.resetFreeTextAnnot();\n          this.handleStrikethrough();\n        } else {\n          this.pdfViewer.annotationModule.setAnnotationMode('Strikethrough');\n          this.textMarkupForMobile(args);\n        }\n        this.pdfViewer.annotation.triggerAnnotationUnselectEvent();\n        break;\n      case this.pdfViewer.element.id + '_annotation_delete':\n      case this.pdfViewer.element.id + '_annotation_deleteIcon':\n        this.pdfViewer.annotationModule.deleteAnnotation();\n        this.resetFreeTextAnnot();\n        break;\n      case this.pdfViewer.element.id + '_annotation_commentPanel':\n      case this.pdfViewer.element.id + '_annotation_commentPanelIcon':\n        this.inkAnnotationSelected = false;\n        var commentPanel = document.getElementById(this.pdfViewer.element.id + '_commantPanel');\n        if (this.pdfViewer.annotation && this.pdfViewer.annotation.textMarkupAnnotationModule) {\n          this.pdfViewer.annotation.textMarkupAnnotationModule.showHideDropletDiv(true);\n        }\n        if (commentPanel.style.display === 'block') {\n          this.pdfViewerBase.navigationPane.closeCommentPanelContainer();\n        } else {\n          this.pdfViewer.annotationModule.showCommentsPanel();\n          // eslint-disable-next-line max-len\n          if (isKeyBoardEvent && !isNullOrUndefined(commentPanel.firstElementChild) && !isNullOrUndefined(commentPanel.firstElementChild.lastElementChild) && commentPanel.firstElementChild.lastElementChild instanceof HTMLButtonElement) {\n            commentPanel.firstElementChild.lastElementChild.focus();\n          }\n        }\n        break;\n      case this.pdfViewer.element.id + '_annotation_close':\n      case this.pdfViewer.element.id + '_annotation_closeIcon':\n        this.inkAnnotationSelected = false;\n        var commentsPanel = document.getElementById(this.pdfViewer.element.id + '_commantPanel');\n        if (commentsPanel.style.display === 'block') {\n          this.pdfViewerBase.navigationPane.closeCommentPanelContainer();\n        }\n        this.showAnnotationToolbar(this.primaryToolbar.annotationItem);\n        break;\n      case this.pdfViewer.element.id + '_annotation_freeTextEdit':\n      case this.pdfViewer.element.id + '_annotation_freeTextEditIcon':\n        if (!Browser.isDevice) {\n          this.resetFreeTextAnnot();\n          this.handleFreeTextEditor();\n        } else {\n          this.pdfViewer.annotationModule.setAnnotationMode('FreeText');\n          this.FreeTextForMobile();\n        }\n        break;\n      case this.pdfViewer.element.id + '_annotation_signature':\n      case this.pdfViewer.element.id + '_annotation_signatureIcon':\n        this.inkAnnotationSelected = false;\n        this.updateSignatureCount();\n        break;\n      case this.pdfViewer.element.id + '_annotation_ink':\n      case this.pdfViewer.element.id + '_annotation_inkIcon':\n        if (annotation) {\n          this.pdfViewer.annotation.triggerAnnotationUnselectEvent();\n        }\n        this.pdfViewer.clearSelection(this.pdfViewer.currentPageNumber - 1);\n        if (this.pdfViewer.annotationModule.inkAnnotationModule) {\n          // eslint-disable-next-line\n          var currentPageNumber = this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber;\n          if (currentPageNumber && currentPageNumber !== '') {\n            // eslint-disable-next-line\n            this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(parseInt(currentPageNumber));\n            this.primaryToolbar.deSelectItem(this.inkAnnotationItem);\n          }\n        }\n        if (!this.inkAnnotationSelected) {\n          this.deselectAllItems();\n          this.drawInkAnnotation();\n        } else {\n          this.inkAnnotationSelected = false;\n        }\n        break;\n      case this.pdfViewer.element.id + '_annotation_shapesIcon':\n      case this.pdfViewer.element.id + '_annotation_shapes':\n        if (Browser.isDevice) {\n          this.shapeToolMobile(args);\n        }\n        break;\n      case this.pdfViewer.element.id + '_annotation_calibrateIcon':\n      case this.pdfViewer.element.id + '_annotation_calibrate':\n        if (Browser.isDevice) {\n          this.calibrateToolMobile(args);\n        }\n        break;\n      case this.pdfViewer.element.id + '_commentIcon':\n      case this.pdfViewer.element.id + '_comment':\n        this.pdfViewerBase.isAddComment = true;\n        this.pdfViewerBase.isCommentIconAdded = true;\n        var commentsButton = document.getElementById(this.pdfViewer.element.id + '_comment');\n        commentsButton.classList.add('e-pv-select');\n        this.pdfViewer.toolbarModule.addComments(args);\n        break;\n    }\n  };\n  AnnotationToolbar.prototype.addInkAnnotation = function () {\n    this.pdfViewer.clearSelection(this.pdfViewer.currentPageNumber - 1);\n    if (this.pdfViewer.annotationModule.inkAnnotationModule) {\n      // eslint-disable-next-line\n      var currentPageNumber = this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber;\n      if (currentPageNumber && currentPageNumber !== '') {\n        // eslint-disable-next-line\n        this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(parseInt(currentPageNumber));\n        if (!isBlazor()) {\n          this.primaryToolbar.deSelectItem(this.inkAnnotationItem);\n        } else {\n          this.primaryToolbar.deSelectItem(this.InkAnnotationElement);\n          this.pdfViewerBase.focusViewerContainer();\n        }\n      }\n    }\n    if (!this.inkAnnotationSelected) {\n      this.deselectAllItemsInBlazor();\n      this.drawInkAnnotation();\n    } else {\n      this.inkAnnotationSelected = false;\n    }\n  };\n  /**\n   * @private\n   */\n  AnnotationToolbar.prototype.deselectInkAnnotation = function () {\n    if (!isBlazor()) {\n      this.primaryToolbar.deSelectItem(this.inkAnnotationItem);\n    } else {\n      this.primaryToolbar.deSelectItem(this.InkAnnotationElement);\n      this.pdfViewerBase.focusViewerContainer();\n    }\n  };\n  AnnotationToolbar.prototype.drawInkAnnotation = function () {\n    this.inkAnnotationSelected = true;\n    if (!isBlazor()) {\n      this.primaryToolbar.selectItem(this.inkAnnotationItem);\n    } else {\n      this.primaryToolbar.selectItem(this.InkAnnotationElement);\n    }\n    this.enableSignaturePropertiesTools(true);\n    this.pdfViewerBase.isToolbarInkClicked = true;\n    this.pdfViewer.annotationModule.inkAnnotationModule.drawInk();\n  };\n  AnnotationToolbar.prototype.resetFreeTextAnnot = function () {\n    if (this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.freeTextAnnotationModule) {\n      this.pdfViewer.annotation.freeTextAnnotationModule.isNewFreeTextAnnot = false;\n      this.pdfViewer.annotation.freeTextAnnotationModule.isNewAddedAnnot = false;\n      if (!Browser.isDevice) {\n        if (this.freeTextEditItem && !isBlazor()) {\n          this.primaryToolbar.deSelectItem(this.freeTextEditItem);\n        } else if (isBlazor()) {\n          this.primaryToolbar.deSelectItem(this.FreeTextElement);\n        }\n        this.enableFreeTextAnnotationPropertiesTools(false);\n      }\n    }\n    if (this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.inkAnnotationModule) {\n      // eslint-disable-next-line\n      var currentPageNumber = this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber;\n      if (currentPageNumber && currentPageNumber !== '') {\n        // eslint-disable-next-line\n        this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(parseInt(currentPageNumber));\n        if (!isBlazor()) {\n          this.primaryToolbar.deSelectItem(this.inkAnnotationItem);\n        } else {\n          this.primaryToolbar.deSelectItem(this.InkAnnotationElement);\n        }\n      }\n    }\n    this.inkAnnotationSelected = false;\n  };\n  AnnotationToolbar.prototype.updateInkannotationItems = function () {\n    if (this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.inkAnnotationModule && this.inkAnnotationSelected) {\n      // eslint-disable-next-line\n      var currentPageNumber = this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber;\n      if (currentPageNumber && currentPageNumber !== '') {\n        // eslint-disable-next-line\n        this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(parseInt(currentPageNumber));\n        this.pdfViewerBase.isToolbarInkClicked = true;\n        this.pdfViewer.tool = 'Ink';\n        this.pdfViewer.clearSelection(currentPageNumber);\n      }\n    }\n  };\n  AnnotationToolbar.prototype.showSignaturepanel = function () {\n    this.pdfViewerBase.isToolbarSignClicked = true;\n    this.pdfViewerBase.signatureModule.showSignatureDialog(true);\n  };\n  AnnotationToolbar.prototype.handleFreeTextEditor = function () {\n    // eslint-disable-next-line\n    var annotation = this.pdfViewer.selectedItems.annotations[0];\n    this.enableFreeTextAnnotationPropertiesTools(true);\n    if (annotation) {\n      this.pdfViewer.fireAnnotationUnSelect(annotation.annotName, annotation.pageIndex, annotation);\n    }\n    this.pdfViewer.clearSelection(this.pdfViewer.currentPageNumber - 1);\n    if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n      this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n    }\n    this.isStrikethroughEnabled = false;\n    this.isHighlightEnabled = false;\n    this.isUnderlineEnabled = false;\n    var freeTextAnnotationModule = this.pdfViewer.annotation.freeTextAnnotationModule;\n    freeTextAnnotationModule.setAnnotationType('FreeText');\n    freeTextAnnotationModule.isNewFreeTextAnnot = true;\n    freeTextAnnotationModule.isNewAddedAnnot = true;\n    this.updateInteractionTools();\n    this.primaryToolbar.deSelectItem(this.highlightItem);\n    this.primaryToolbar.deSelectItem(this.underlineItem);\n    this.primaryToolbar.deSelectItem(this.strikethroughItem);\n    this.primaryToolbar.selectItem(this.freeTextEditItem);\n    this.updateColorInIcon(this.colorDropDownElement, this.pdfViewer.annotationModule.freeTextAnnotationModule.fillColor);\n    this.updateColorInIcon(this.strokeDropDownElement, this.pdfViewer.annotationModule.freeTextAnnotationModule.borderColor);\n    this.updateColorInIcon(this.fontColorElement, this.pdfViewer.annotationModule.freeTextAnnotationModule.fontColor);\n    this.updateFontFamilyInIcon(this.pdfViewer.annotationModule.freeTextAnnotationModule.fontFamily);\n    this.updateFontSizeInIcon(this.pdfViewer.annotationModule.freeTextAnnotationModule.fontSize);\n    this.updateTextAlignInIcon(this.pdfViewer.annotationModule.freeTextAnnotationModule.textAlign);\n    this.updateFontFamily();\n  };\n  AnnotationToolbar.prototype.updateFontFamily = function () {\n    // eslint-disable-next-line max-len\n    this.pdfViewer.annotationModule.freeTextAnnotationModule.isBold ? this.updateFontFamilyIcon('_bold', true) : this.updateFontFamilyIcon('_bold', false);\n    // eslint-disable-next-line max-len\n    this.pdfViewer.annotationModule.freeTextAnnotationModule.isItalic ? this.updateFontFamilyIcon('_italic', true) : this.updateFontFamilyIcon('_italic', false);\n    if (this.pdfViewer.annotationModule.freeTextAnnotationModule.isUnderline) {\n      this.updateFontFamilyIcon('_underline_textinput', true);\n      this.updateFontFamilyIcon('_strikeout', false);\n    } else {\n      this.updateFontFamilyIcon('_underline_textinput', false);\n    }\n    if (this.pdfViewer.annotationModule.freeTextAnnotationModule.isStrikethrough) {\n      this.updateFontFamilyIcon('_strikeout', true);\n      this.updateFontFamilyIcon('_underline_textinput', false);\n    } else {\n      this.updateFontFamilyIcon('_strikeout', false);\n    }\n  };\n  AnnotationToolbar.prototype.updateFontFamilyIcon = function (fontFamily, isActive) {\n    var fontFamilyElement = document.getElementById(this.pdfViewer.element.id + fontFamily);\n    isActive ? fontFamilyElement.classList.add('textprop-option-active') : fontFamilyElement.classList.remove('textprop-option-active');\n  };\n  /**\n   * @param element\n   * @param isInitialLoading\n   * @param element\n   * @param isInitialLoading\n   * @private\n   */\n  AnnotationToolbar.prototype.showAnnotationToolbar = function (element, isInitialLoading) {\n    if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n      if (!this.isToolbarHidden) {\n        // eslint-disable-next-line\n        var annotationModule = this.pdfViewer.annotationModule;\n        if (element) {\n          this.primaryToolbar.deSelectItem(element);\n        } else {\n          if (this.pdfViewer.enableToolbar) {\n            this.primaryToolbar.deSelectItem(this.primaryToolbar.annotationItem);\n          }\n        }\n        this.adjustViewer(false);\n        // eslint-disable-next-line max-len\n        if (annotationModule && annotationModule.textMarkupAnnotationModule && annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n          this.enablePropertiesTool(annotationModule);\n        } else {\n          this.deselectAllItems();\n        }\n        this.toolbarElement.style.display = 'none';\n        if (!isInitialLoading) {\n          this.pdfViewer.isAnnotationToolbarVisible = false;\n        }\n        if (this.pdfViewerBase.isPanMode) {\n          this.primaryToolbar.updateInteractionTools(false);\n        } else {\n          this.primaryToolbar.updateInteractionTools(true);\n        }\n      } else {\n        var toolBarInitialStatus = void 0;\n        if (this.toolbarElement) {\n          toolBarInitialStatus = this.toolbarElement.style.display;\n          this.toolbarElement.style.display = 'block';\n        }\n        if (!isInitialLoading) {\n          this.pdfViewer.isAnnotationToolbarVisible = true;\n        }\n        if (element) {\n          this.primaryToolbar.selectItem(element);\n        } else {\n          if (this.pdfViewer.enableToolbar) {\n            this.primaryToolbar.selectItem(this.primaryToolbar.annotationItem);\n          }\n        }\n        if (toolBarInitialStatus === 'none') {\n          this.adjustViewer(true);\n        }\n      }\n      // eslint-disable-next-line max-len\n      if (this.pdfViewer.magnification && this.pdfViewer.magnification.fitType === 'fitToPage') {\n        this.pdfViewer.magnification.fitToPage();\n      }\n      this.enableAnnotationAddTools(true);\n      this.isToolbarHidden = !this.isToolbarHidden;\n    }\n  };\n  // eslint-disable-next-line\n  AnnotationToolbar.prototype.enablePropertiesTool = function (annotationModule) {\n    this.isHighlightEnabled = false;\n    this.isUnderlineEnabled = false;\n    this.isStrikethroughEnabled = false;\n    if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n      annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n    }\n    this.primaryToolbar.deSelectItem(this.highlightItem);\n    this.primaryToolbar.deSelectItem(this.underlineItem);\n    this.primaryToolbar.deSelectItem(this.strikethroughItem);\n    this.enableTextMarkupAnnotationPropertiesTools(true);\n    // eslint-disable-next-line max-len\n    this.updateColorInIcon(this.colorDropDownElement, annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation.color);\n    this.selectAnnotationDeleteItem(true);\n  };\n  /**\n   * @private\n   */\n  AnnotationToolbar.prototype.applyAnnotationToolbarSettings = function () {\n    // eslint-disable-next-line\n    var annotationToolbarItems = this.pdfViewer.toolbarSettings.annotationToolbarItems;\n    if (annotationToolbarItems) {\n      if (annotationToolbarItems.indexOf('HighlightTool') !== -1) {\n        this.showHighlightTool(true, 0, 0);\n      } else {\n        this.showHighlightTool(false, 0, 0);\n      }\n      if (annotationToolbarItems.indexOf('UnderlineTool') !== -1) {\n        this.showUnderlineTool(true, 1, 1);\n      } else {\n        this.showUnderlineTool(false, 1, 1);\n      }\n      if (annotationToolbarItems.indexOf('StrikethroughTool') !== -1) {\n        this.showStrikethroughTool(true, 2, 2);\n      } else {\n        this.showStrikethroughTool(false, 2, 2);\n      }\n      if (annotationToolbarItems.indexOf('ShapeTool') !== -1) {\n        this.showShapeAnnotationTool(true, 4, 4);\n      } else {\n        this.showShapeAnnotationTool(false, 4, 4);\n      }\n      if (annotationToolbarItems.indexOf('CalibrateTool') !== -1) {\n        this.showCalibrateAnnotationTool(true, 6, 6);\n      } else {\n        this.showCalibrateAnnotationTool(false, 6, 6);\n      }\n      if (annotationToolbarItems.indexOf('ColorEditTool') !== -1) {\n        this.showColorEditTool(true, 22, 22);\n      } else {\n        this.showColorEditTool(false, 22, 22);\n      }\n      if (annotationToolbarItems.indexOf('StrokeColorEditTool') !== -1) {\n        this.showStrokeColorEditTool(true, 23, 23);\n      } else {\n        this.showStrokeColorEditTool(false, 23, 23);\n      }\n      if (annotationToolbarItems.indexOf('ThicknessEditTool') !== -1) {\n        this.showThicknessEditTool(true, 24, 24);\n      } else {\n        this.showThicknessEditTool(false, 24, 24);\n      }\n      if (annotationToolbarItems.indexOf('OpacityEditTool') !== -1) {\n        this.showOpacityEditTool(true, 25, 25);\n      } else {\n        this.showOpacityEditTool(false, 25, 25);\n      }\n      if (annotationToolbarItems.indexOf('AnnotationDeleteTool') !== -1) {\n        this.showAnnotationDeleteTool(true, 27, 27);\n      } else {\n        this.showAnnotationDeleteTool(false, 27, 27);\n      }\n      if (annotationToolbarItems.indexOf('StampAnnotationTool') !== -1) {\n        this.showStampAnnotationTool(true, 10, 10);\n      } else {\n        this.showStampAnnotationTool(false, 10, 10);\n      }\n      if (annotationToolbarItems.indexOf('HandWrittenSignatureTool') !== -1) {\n        this.showSignatureTool(true, 12, 12);\n      } else {\n        this.showSignatureTool(false, 12, 12);\n      }\n      if (annotationToolbarItems.indexOf('FreeTextAnnotationTool') !== -1) {\n        this.showFreeTextAnnotationTool(true, 8, 8);\n      } else {\n        this.showFreeTextAnnotationTool(false, 8, 8);\n      }\n      if (annotationToolbarItems.indexOf('FontFamilyAnnotationTool') !== -1) {\n        this.showFontFamilyAnnotationTool(true, 16, 16);\n      } else {\n        this.showFontFamilyAnnotationTool(false, 16, 16);\n      }\n      if (annotationToolbarItems.indexOf('FontSizeAnnotationTool') !== -1) {\n        this.showFontSizeAnnotationTool(true, 17, 17);\n      } else {\n        this.showFontSizeAnnotationTool(false, 17, 17);\n      }\n      if (annotationToolbarItems.indexOf('FontStylesAnnotationTool') !== -1) {\n        this.showFontStylesAnnotationTool(true, 20, 20);\n      } else {\n        this.showFontStylesAnnotationTool(false, 20, 20);\n      }\n      if (annotationToolbarItems.indexOf('FontAlignAnnotationTool') !== -1) {\n        this.showFontAlignAnnotationTool(true, 18, 18);\n      } else {\n        this.showFontAlignAnnotationTool(false, 18, 18);\n      }\n      if (annotationToolbarItems.indexOf('FontColorAnnotationTool') !== -1) {\n        this.showFontColorAnnotationTool(true, 19, 19);\n      } else {\n        this.showFontColorAnnotationTool(false, 19, 19);\n      }\n      if (annotationToolbarItems.indexOf('CommentPanelTool') !== -1) {\n        this.showCommentPanelTool(true, 28, 28);\n      } else {\n        this.showCommentPanelTool(false, 28, 28);\n      }\n      this.showInkAnnotationTool();\n      this.showSeparator();\n    }\n  };\n  /**\n   * @private\n   */\n  AnnotationToolbar.prototype.applyMobileAnnotationToolbarSettings = function () {\n    // eslint-disable-next-line\n    var annotationToolbarItems = this.pdfViewer.toolbarSettings.annotationToolbarItems;\n    if (annotationToolbarItems) {\n      if (annotationToolbarItems.indexOf('HighlightTool') !== -1) {\n        this.showHighlightTool(true, 2, 2);\n      } else {\n        this.showHighlightTool(false, 2, 2);\n      }\n      if (annotationToolbarItems.indexOf('UnderlineTool') !== -1) {\n        this.showUnderlineTool(true, 3, 3);\n      } else {\n        this.showUnderlineTool(false, 3, 3);\n      }\n      if (annotationToolbarItems.indexOf('StrikethroughTool') !== -1) {\n        this.showStrikethroughTool(true, 4, 4);\n      } else {\n        this.showStrikethroughTool(false, 4, 4);\n      }\n      if (annotationToolbarItems.indexOf('ShapeTool') !== -1) {\n        this.showShapeAnnotationTool(true, 6, 6);\n      } else {\n        this.showShapeAnnotationTool(false, 6, 6);\n      }\n      if (annotationToolbarItems.indexOf('CalibrateTool') !== -1) {\n        this.showCalibrateAnnotationTool(true, 8, 8);\n      } else {\n        this.showCalibrateAnnotationTool(false, 8, 8);\n      }\n      var toolbarItems = this.pdfViewer.toolbarSettings.toolbarItems;\n      if (toolbarItems && toolbarItems.indexOf('CommentTool') !== -1) {\n        this.showStickyNoteToolInMobile(true);\n      } else {\n        this.showStickyNoteToolInMobile(false);\n      }\n      if (annotationToolbarItems.indexOf('StampAnnotationTool') !== -1) {\n        this.showStampAnnotationTool(true, 12, 12);\n      } else {\n        this.showStampAnnotationTool(false, 12, 12);\n      }\n      if (annotationToolbarItems.indexOf('HandWrittenSignatureTool') !== -1) {\n        this.showSignatureTool(true, 14, 14);\n      } else {\n        this.showSignatureTool(false, 14, 14);\n      }\n      if (annotationToolbarItems.indexOf('FreeTextAnnotationTool') !== -1) {\n        this.showFreeTextAnnotationTool(true, 10, 10);\n      } else {\n        this.showFreeTextAnnotationTool(false, 10, 10);\n      }\n      if (annotationToolbarItems.indexOf('CommentPanelTool') !== -1) {\n        this.showCommentPanelTool(true, 18, 18);\n      } else {\n        this.showCommentPanelTool(false, 18, 18);\n      }\n      if (annotationToolbarItems.indexOf('InkAnnotationTool') !== -1) {\n        this.showInkTool(true, 16, 16);\n      } else {\n        this.showInkTool(false, 16, 16);\n      }\n      this.showSeparatorInMobile();\n    }\n  };\n  AnnotationToolbar.prototype.showStickyNoteToolInMobile = function (isShow) {\n    this.isCommentBtnVisible = isShow;\n    this.applyHideToToolbar(isShow, 0, 0);\n  };\n  AnnotationToolbar.prototype.showSeparatorInMobile = function () {\n    if (!this.isCommentBtnVisible) {\n      this.applyHideToToolbar(false, 1, 1);\n    }\n    if (!this.isHighlightBtnVisible && !this.isUnderlineBtnVisible && !this.isStrikethroughBtnVisible) {\n      this.applyHideToToolbar(false, 5, 5);\n    }\n    if (!this.isShapeBtnVisible) {\n      this.applyHideToToolbar(false, 7, 7);\n    }\n    if (!this.isCalibrateBtnVisible) {\n      this.applyHideToToolbar(false, 9, 9);\n    }\n    if (!this.isFreeTextBtnVisible) {\n      this.applyHideToToolbar(false, 11, 11);\n    }\n    if (!this.isStampBtnVisible) {\n      this.applyHideToToolbar(false, 13, 13);\n    }\n    if (!this.isSignatureBtnVisible) {\n      this.applyHideToToolbar(false, 15, 15);\n    }\n    if (!this.isInkBtnVisible) {\n      this.applyHideToToolbar(false, 17, 17);\n    }\n  };\n  AnnotationToolbar.prototype.showInkAnnotationTool = function () {\n    if (this.pdfViewer.toolbarSettings.annotationToolbarItems.indexOf('InkAnnotationTool') !== -1) {\n      this.showInkTool(true, 14, 14);\n    } else {\n      this.showInkTool(false, 14, 14);\n    }\n  };\n  AnnotationToolbar.prototype.showSeparator = function () {\n    if (!this.isHighlightBtnVisible && !this.isUnderlineBtnVisible && !this.isStrikethroughBtnVisible) {\n      this.applyHideToToolbar(false, 3, 3);\n    }\n    if (!this.isShapeBtnVisible) {\n      this.applyHideToToolbar(false, 5, 5);\n    }\n    if (!this.isCalibrateBtnVisible) {\n      this.applyHideToToolbar(false, 7, 7);\n    }\n    if (!this.isFreeTextBtnVisible) {\n      this.applyHideToToolbar(false, 9, 9);\n    }\n    if (!this.isStampBtnVisible) {\n      this.applyHideToToolbar(false, 11, 11);\n    }\n    if (!this.isSignatureBtnVisible) {\n      this.applyHideToToolbar(false, 13, 13);\n    }\n    if (!this.isInkBtnVisible) {\n      this.applyHideToToolbar(false, 15, 15);\n    }\n    // eslint-disable-next-line max-len\n    if (!this.isFontFamilyToolVisible && !this.isFontSizeToolVisible && !this.isFontColorToolVisible && !this.isFontAlignToolVisible && !this.isFontStylesToolVisible) {\n      this.applyHideToToolbar(false, 21, 21);\n    }\n    // eslint-disable-next-line max-len\n    if (!this.isColorToolVisible && !this.isStrokeColorToolVisible && !this.isThicknessToolVisible && !this.isOpacityToolVisible || !this.isDeleteAnnotationToolVisible) {\n      this.applyHideToToolbar(false, 26, 26);\n    }\n  };\n  AnnotationToolbar.prototype.showHighlightTool = function (isShow, startIndex, endIndex) {\n    this.isHighlightBtnVisible = isShow;\n    this.applyHideToToolbar(isShow, startIndex, endIndex);\n  };\n  AnnotationToolbar.prototype.showUnderlineTool = function (isShow, startIndex, endIndex) {\n    this.isUnderlineBtnVisible = isShow;\n    this.applyHideToToolbar(isShow, startIndex, endIndex);\n  };\n  AnnotationToolbar.prototype.showStrikethroughTool = function (isShow, startIndex, endIndex) {\n    this.isStrikethroughBtnVisible = isShow;\n    this.applyHideToToolbar(isShow, startIndex, endIndex);\n  };\n  AnnotationToolbar.prototype.showShapeAnnotationTool = function (isShow, startIndex, endIndex) {\n    this.isShapeBtnVisible = isShow;\n    this.applyHideToToolbar(isShow, startIndex, endIndex);\n  };\n  AnnotationToolbar.prototype.showCalibrateAnnotationTool = function (isShow, startIndex, endIndex) {\n    this.isCalibrateBtnVisible = isShow;\n    this.applyHideToToolbar(isShow, startIndex, endIndex);\n  };\n  AnnotationToolbar.prototype.showFreeTextAnnotationTool = function (isShow, startIndex, endIndex) {\n    this.isFreeTextBtnVisible = isShow;\n    this.applyHideToToolbar(isShow, startIndex, endIndex);\n  };\n  AnnotationToolbar.prototype.showStampAnnotationTool = function (isShow, startIndex, endIndex) {\n    this.isStampBtnVisible = isShow;\n    this.applyHideToToolbar(isShow, startIndex, endIndex);\n  };\n  AnnotationToolbar.prototype.showSignatureTool = function (isShow, startIndex, endIndex) {\n    this.isSignatureBtnVisible = isShow;\n    this.applyHideToToolbar(isShow, startIndex, endIndex);\n  };\n  AnnotationToolbar.prototype.showInkTool = function (isShow, startIndex, endIndex) {\n    this.isInkBtnVisible = isShow;\n    this.applyHideToToolbar(isShow, startIndex, endIndex);\n  };\n  AnnotationToolbar.prototype.showFontFamilyAnnotationTool = function (isShow, startIndex, endIndex) {\n    this.isFontFamilyToolVisible = isShow;\n    this.applyHideToToolbar(isShow, startIndex, endIndex);\n  };\n  AnnotationToolbar.prototype.showFontSizeAnnotationTool = function (isShow, startIndex, endIndex) {\n    this.isFontSizeToolVisible = isShow;\n    this.applyHideToToolbar(isShow, startIndex, endIndex);\n  };\n  AnnotationToolbar.prototype.showFontAlignAnnotationTool = function (isShow, startIndex, endIndex) {\n    this.isFontAlignToolVisible = isShow;\n    this.applyHideToToolbar(isShow, startIndex, endIndex);\n  };\n  AnnotationToolbar.prototype.showFontColorAnnotationTool = function (isShow, startIndex, endIndex) {\n    this.isFontColorToolVisible = isShow;\n    this.applyHideToToolbar(isShow, startIndex, endIndex);\n  };\n  AnnotationToolbar.prototype.showFontStylesAnnotationTool = function (isShow, startIndex, endIndex) {\n    this.isFontStylesToolVisible = isShow;\n    this.applyHideToToolbar(isShow, startIndex, endIndex);\n  };\n  AnnotationToolbar.prototype.showColorEditTool = function (isShow, startIndex, endIndex) {\n    this.isColorToolVisible = isShow;\n    this.applyHideToToolbar(isShow, startIndex, endIndex);\n  };\n  AnnotationToolbar.prototype.showStrokeColorEditTool = function (isShow, startIndex, endIndex) {\n    this.isStrokeColorToolVisible = isShow;\n    this.applyHideToToolbar(isShow, startIndex, endIndex);\n  };\n  AnnotationToolbar.prototype.showThicknessEditTool = function (isShow, startIndex, endIndex) {\n    this.isThicknessToolVisible = isShow;\n    this.applyHideToToolbar(isShow, startIndex, endIndex);\n  };\n  AnnotationToolbar.prototype.showOpacityEditTool = function (isShow, startIndex, endIndex) {\n    this.isOpacityToolVisible = isShow;\n    this.applyHideToToolbar(isShow, startIndex, endIndex);\n  };\n  AnnotationToolbar.prototype.showAnnotationDeleteTool = function (isShow, startIndex, endIndex) {\n    this.isDeleteAnnotationToolVisible = isShow;\n    this.applyHideToToolbar(isShow, startIndex, endIndex);\n  };\n  AnnotationToolbar.prototype.showCommentPanelTool = function (isShow, startIndex, endIndex) {\n    this.isCommentPanelBtnVisible = isShow;\n    this.applyHideToToolbar(isShow, startIndex, endIndex);\n  };\n  AnnotationToolbar.prototype.applyHideToToolbar = function (show, startIndex, endIndex) {\n    var isHide = !show;\n    for (var index = startIndex; index <= endIndex; index++) {\n      var toolbar_1 = void 0;\n      var propertyToolbarElement = this.propertyToolbar && this.propertyToolbar.element ? this.propertyToolbar.element : null;\n      var toolbarElement = this.toolbar && this.toolbar.element ? this.toolbar.element : null;\n      if (toolbarElement && toolbarElement.children && toolbarElement.children.length > 0) {\n        toolbar_1 = this.toolbar;\n      } else if (Browser.isDevice && propertyToolbarElement && propertyToolbarElement.children && propertyToolbarElement.children.length > 0) {\n        toolbar_1 = this.propertyToolbar;\n      }\n      if (toolbar_1 && toolbar_1.items[index]) {\n        var className = toolbar_1.items[index].cssClass;\n        if (className && className !== '') {\n          // Querying the toolbar item\n          var element = toolbar_1.element.querySelector('.' + className);\n          if (element) {\n            this.toolbar.hideItem(element, isHide);\n          }\n        } else {\n          toolbar_1.hideItem(index, isHide);\n        }\n      }\n    }\n  };\n  /**\n   * @param isAdjust\n   * @private\n   */\n  AnnotationToolbar.prototype.adjustViewer = function (isAdjust) {\n    var splitterElement;\n    var toolbarContainer;\n    var annotationToolbarHeight;\n    if (isBlazor()) {\n      splitterElement = this.pdfViewer.element.querySelector('.e-pv-sidebar-toolbar-splitter');\n      toolbarContainer = this.pdfViewer.element.querySelector('.e-pv-toolbar');\n      var annotationToolbarContainer = this.pdfViewer.element.querySelector('.e-pv-annotation-toolbar');\n      annotationToolbarHeight = this.getToolbarHeight(annotationToolbarContainer);\n    } else {\n      splitterElement = this.pdfViewerBase.getElement('_sideBarToolbarSplitter');\n      toolbarContainer = this.pdfViewerBase.getElement('_toolbarContainer');\n      annotationToolbarHeight = this.getToolbarHeight(this.toolbarElement);\n    }\n    var toolbarHeight = this.getToolbarHeight(toolbarContainer);\n    var sideBarToolbar = this.pdfViewerBase.navigationPane.sideBarToolbar;\n    var sideBarContentContainer = this.pdfViewerBase.navigationPane.sideBarContentContainer;\n    var commentsContainer = this.pdfViewerBase.navigationPane.commentPanelContainer;\n    var commentPanelResizer = this.pdfViewerBase.navigationPane.commentPanelResizer;\n    var newToolbarHeight = '';\n    if (isAdjust) {\n      if (this.pdfViewer.enableToolbar) {\n        sideBarToolbar.style.top = toolbarHeight + annotationToolbarHeight + 'px';\n        sideBarContentContainer.style.top = toolbarHeight + annotationToolbarHeight + 'px';\n        splitterElement.style.top = toolbarHeight + annotationToolbarHeight + 'px';\n        commentsContainer.style.top = toolbarHeight + annotationToolbarHeight + 'px';\n        commentPanelResizer.style.top = toolbarHeight + annotationToolbarHeight + 'px';\n      } else {\n        sideBarToolbar.style.top = annotationToolbarHeight + 'px';\n        sideBarContentContainer.style.top = annotationToolbarHeight + 'px';\n        splitterElement.style.top = annotationToolbarHeight + 'px';\n        commentsContainer.style.top = annotationToolbarHeight + 'px';\n        commentPanelResizer.style.top = toolbarHeight + annotationToolbarHeight + 'px';\n      }\n      if (!this.pdfViewer.enableToolbar) {\n        toolbarHeight = 0;\n      }\n      // eslint-disable-next-line max-len\n      this.pdfViewerBase.viewerContainer.style.height = this.updateViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer), annotationToolbarHeight + toolbarHeight) + 'px';\n      newToolbarHeight = this.getNavigationToolbarHeight(annotationToolbarHeight + toolbarHeight);\n      sideBarToolbar.style.height = newToolbarHeight;\n      splitterElement.style.height = newToolbarHeight;\n      commentPanelResizer.style.height = newToolbarHeight;\n      sideBarContentContainer.style.height = newToolbarHeight;\n    } else {\n      if (this.pdfViewer.enableToolbar) {\n        // eslint-disable-next-line max-len\n        sideBarToolbar.style.top = toolbarHeight + 'px';\n        sideBarContentContainer.style.top = toolbarHeight + 'px';\n        splitterElement.style.top = toolbarHeight + 'px';\n        commentsContainer.style.top = toolbarHeight + 'px';\n        commentPanelResizer.style.top = toolbarHeight + 'px';\n      } else {\n        sideBarToolbar.style.top = 1 + 'px';\n        sideBarToolbar.style.height = '100%';\n        sideBarContentContainer.style.top = 1 + 'px';\n        sideBarContentContainer.style.height = '100%';\n        splitterElement.style.top = 1 + 'px';\n        splitterElement.style.height = '100%';\n        commentsContainer.style.top = 1 + 'px';\n        commentsContainer.style.height = '100%';\n        commentPanelResizer.style.top = 1 + 'px';\n        commentPanelResizer.style.height = '100%';\n      }\n      if (!this.pdfViewer.enableToolbar) {\n        toolbarHeight = 0;\n      }\n      // eslint-disable-next-line max-len\n      this.pdfViewerBase.viewerContainer.style.height = this.updateViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer), annotationToolbarHeight) + 'px';\n      newToolbarHeight = this.getNavigationToolbarHeight(toolbarHeight);\n      sideBarToolbar.style.height = newToolbarHeight;\n      splitterElement.style.height = newToolbarHeight;\n      commentPanelResizer.style.height = newToolbarHeight;\n      sideBarContentContainer.style.height = newToolbarHeight;\n      if (this.pdfViewerBase.viewerContainer.style.height === '0px') {\n        // eslint-disable-next-line\n        this.pdfViewerBase.viewerContainer.style.height = parseInt(this.pdfViewer.element.style.height) - parseInt(sideBarToolbar.style.top) + 'px';\n      }\n    }\n  };\n  AnnotationToolbar.prototype.updateContentContainerHeight = function (isAdjust, isBlazor) {\n    var annotationToolbarHeight;\n    if (isBlazor) {\n      var annotationToolbarContainer = this.pdfViewer.element.querySelector('.e-pv-annotation-toolbar');\n      annotationToolbarHeight = this.getToolbarHeight(annotationToolbarContainer);\n    } else {\n      annotationToolbarHeight = this.getToolbarHeight(this.toolbarElement);\n    }\n    var sideBarClientRect = this.pdfViewerBase.navigationPane.sideBarContentContainer.getBoundingClientRect();\n    if (sideBarClientRect.height !== 0) {\n      if (isAdjust) {\n        // eslint-disable-next-line max-len\n        this.pdfViewerBase.navigationPane.sideBarContentContainer.style.height = sideBarClientRect.height - annotationToolbarHeight + 'px';\n      } else {\n        // eslint-disable-next-line max-len\n        this.pdfViewerBase.navigationPane.sideBarContentContainer.style.height = sideBarClientRect.height + annotationToolbarHeight + 'px';\n      }\n    }\n  };\n  AnnotationToolbar.prototype.getToolbarHeight = function (element) {\n    var toolbarHeight = element.getBoundingClientRect().height;\n    if (toolbarHeight === 0 && element === this.pdfViewerBase.getElement('_toolbarContainer')) {\n      // getComputedStyle gets the value from style and toolbar border height is added to it.\n      // eslint-disable-next-line\n      toolbarHeight = parseFloat(window.getComputedStyle(element)['height']) + this.toolbarBorderHeight;\n    }\n    return toolbarHeight;\n  };\n  AnnotationToolbar.prototype.getNavigationToolbarHeight = function (toolbarHeight) {\n    var height = this.pdfViewer.element.getBoundingClientRect().height;\n    return height !== 0 ? height - toolbarHeight + 'px' : '';\n  };\n  AnnotationToolbar.prototype.handleHighlight = function () {\n    if (!this.isHighlightEnabled) {\n      this.updateInteractionTools();\n      this.clearShapeMode();\n      this.clearMeasureMode();\n      this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations('Highlight');\n      this.primaryToolbar.selectItem(this.highlightItem);\n      this.primaryToolbar.deSelectItem(this.underlineItem);\n      this.primaryToolbar.deSelectItem(this.strikethroughItem);\n      this.primaryToolbar.deSelectItem(this.freeTextEditItem);\n      this.primaryToolbar.deSelectItem(this.inkAnnotationItem);\n      this.enableTextMarkupAnnotationPropertiesTools(true);\n      this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor = null;\n      this.setCurrentColorInPicker();\n      this.updateColorInIcon(this.colorDropDownElement, this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor);\n      this.isHighlightEnabled = true;\n      this.isUnderlineEnabled = false;\n      this.isStrikethroughEnabled = false;\n    } else {\n      this.deselectAllItems();\n    }\n  };\n  AnnotationToolbar.prototype.handleUnderline = function () {\n    if (!this.isUnderlineEnabled) {\n      this.updateInteractionTools();\n      this.clearShapeMode();\n      this.clearMeasureMode();\n      this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations('Underline');\n      this.primaryToolbar.selectItem(this.underlineItem);\n      this.primaryToolbar.deSelectItem(this.highlightItem);\n      this.primaryToolbar.deSelectItem(this.strikethroughItem);\n      this.primaryToolbar.deSelectItem(this.freeTextEditItem);\n      this.primaryToolbar.deSelectItem(this.inkAnnotationItem);\n      this.enableTextMarkupAnnotationPropertiesTools(true);\n      this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor = null;\n      this.setCurrentColorInPicker();\n      this.updateColorInIcon(this.colorDropDownElement, this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor);\n      this.isUnderlineEnabled = true;\n      this.isHighlightEnabled = false;\n      this.isStrikethroughEnabled = false;\n    } else {\n      this.deselectAllItems();\n    }\n  };\n  AnnotationToolbar.prototype.handleStrikethrough = function () {\n    if (!this.isStrikethroughEnabled) {\n      this.updateInteractionTools();\n      this.clearShapeMode();\n      this.clearMeasureMode();\n      this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations('Strikethrough');\n      this.primaryToolbar.selectItem(this.strikethroughItem);\n      this.primaryToolbar.deSelectItem(this.highlightItem);\n      this.primaryToolbar.deSelectItem(this.underlineItem);\n      this.primaryToolbar.deSelectItem(this.freeTextEditItem);\n      this.primaryToolbar.deSelectItem(this.inkAnnotationItem);\n      this.enableTextMarkupAnnotationPropertiesTools(true);\n      this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor = null;\n      this.setCurrentColorInPicker();\n      // eslint-disable-next-line max-len\n      this.updateColorInIcon(this.colorDropDownElement, this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor);\n      this.isStrikethroughEnabled = true;\n      this.isHighlightEnabled = false;\n      this.isUnderlineEnabled = false;\n    } else {\n      this.deselectAllItems();\n    }\n  };\n  /**\n   * @private\n   */\n  AnnotationToolbar.prototype.deselectAllItemsInBlazor = function () {\n    if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n      this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n      this.pdfViewer.annotationModule.textMarkupAnnotationModule.showHideDropletDiv(true);\n    }\n    if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n      this.primaryToolbar.deSelectItem(this.HighlightElement);\n      this.primaryToolbar.deSelectItem(this.UnderlineElement);\n      this.primaryToolbar.deSelectItem(this.StrikethroughElement);\n      this.primaryToolbar.deSelectItem(this.FreeTextElement);\n      this.primaryToolbar.deSelectItem(this.InkAnnotationElement);\n      this.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateTextMarkupButtons', false, false, false);\n    }\n    this.resetFreeTextAnnot();\n    this.clearTextMarkupMode();\n    this.clearShapeMode();\n    this.clearMeasureMode();\n    this.pdfViewer.tool = '';\n    if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n      this.enableTextMarkupAnnotationPropertiesTools(false);\n      this.enableFreeTextAnnotationPropertiesTools(false);\n      this.updateColorInIcon(this.colorDropDownElement, '#000000');\n      this.updateColorInIcon(this.strokeDropDownElement, '#000000');\n      this.updateColorInIcon(this.fontColorElement, '#000000');\n      this.selectAnnotationDeleteItem(false);\n    }\n    if (this.pdfViewer.annotationModule) {\n      this.pdfViewer.annotationModule.freeTextAnnotationModule.isNewFreeTextAnnot = false;\n    }\n  };\n  /**\n   * @private\n   */\n  AnnotationToolbar.prototype.deselectAllItems = function () {\n    var isBlazorPlatform = isBlazor();\n    this.isHighlightEnabled = false;\n    this.isUnderlineEnabled = false;\n    this.isStrikethroughEnabled = false;\n    if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n      this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n      this.pdfViewer.annotationModule.textMarkupAnnotationModule.showHideDropletDiv(true);\n    }\n    if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n      if (isBlazorPlatform) {\n        this.primaryToolbar.deSelectItem(this.pdfViewer.toolbar.SelectToolElement);\n        this.primaryToolbar.selectItem(this.pdfViewer.toolbar.PanElement);\n        this.primaryToolbar.deSelectItem(this.HighlightElement);\n        this.primaryToolbar.deSelectItem(this.UnderlineElement);\n        this.primaryToolbar.deSelectItem(this.StrikethroughElement);\n        this.primaryToolbar.deSelectItem(this.FreeTextElement);\n        this.primaryToolbar.deSelectItem(this.InkAnnotationElement);\n      } else {\n        this.primaryToolbar.deSelectItem(this.highlightItem);\n        this.primaryToolbar.deSelectItem(this.underlineItem);\n        this.primaryToolbar.deSelectItem(this.strikethroughItem);\n        this.primaryToolbar.deSelectItem(this.freeTextEditItem);\n        this.primaryToolbar.deSelectItem(this.inkAnnotationItem);\n      }\n    }\n    this.resetFreeTextAnnot();\n    this.clearTextMarkupMode();\n    this.clearShapeMode();\n    this.clearMeasureMode();\n    this.pdfViewer.tool = '';\n    if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n      this.enableTextMarkupAnnotationPropertiesTools(false);\n      this.enableFreeTextAnnotationPropertiesTools(false);\n      this.updateColorInIcon(this.colorDropDownElement, '#000000');\n      this.updateColorInIcon(this.strokeDropDownElement, '#000000');\n      this.updateColorInIcon(this.fontColorElement, '#000000');\n      this.selectAnnotationDeleteItem(false);\n    }\n    if (this.pdfViewer.annotationModule) {\n      this.pdfViewer.annotationModule.freeTextAnnotationModule.isNewFreeTextAnnot = false;\n    }\n  };\n  AnnotationToolbar.prototype.updateInteractionTools = function () {\n    if (this.pdfViewer.enableTextSelection) {\n      this.pdfViewerBase.initiateTextSelectMode();\n      if (!Browser.isDevice) {\n        this.pdfViewer.toolbar.updateInteractionTools(true);\n      }\n    } else if (!Browser.isDevice) {\n      this.pdfViewer.toolbar.updateInteractionTools(false);\n    }\n  };\n  /**\n   * @param isEnable\n   * @private\n   */\n  AnnotationToolbar.prototype.selectAnnotationDeleteItem = function (isEnable, deleteIconCicked) {\n    if (!isBlazor() && !Browser.isDevice) {\n      if (this.toolbar) {\n        if (isEnable) {\n          // eslint-disable-next-line\n          var annotation = this.pdfViewer.annotationModule.findCurrentAnnotation();\n          if (annotation) {\n            // eslint-disable-next-line\n            if (annotation.annotationSettings && annotation.annotationSettings.isLock) {\n              if (this.pdfViewer.annotationModule.checkAllowedInteractions('Delete', annotation)) {\n                this.enableItems(this.deleteItem.parentElement, isEnable);\n              } else {\n                this.enableItems(this.deleteItem.parentElement, false);\n              }\n            } else {\n              this.enableItems(this.deleteItem.parentElement, isEnable);\n            }\n          }\n        } else {\n          this.enableItems(this.deleteItem.parentElement, isEnable);\n        }\n      }\n    } else {\n      if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n        if (isEnable) {\n          // eslint-disable-next-line\n          var annotation = this.pdfViewer.annotationModule.findCurrentAnnotation();\n          if (annotation) {\n            // eslint-disable-next-line\n            if (annotation.annotationSettings && annotation.annotationSettings.isLock) {\n              if (this.pdfViewer.annotationModule.checkAllowedInteractions('Delete', annotation)) {\n                this.pdfViewerBase.blazorUIAdaptor.EnableDeleteOption(isEnable);\n              } else {\n                this.pdfViewerBase.blazorUIAdaptor.EnableDeleteOption(false);\n              }\n            } else if (this.pdfViewerBase.blazorUIAdaptor) {\n              this.pdfViewerBase.blazorUIAdaptor.EnableDeleteOption(isEnable);\n            }\n          }\n        } else if (this.pdfViewerBase.blazorUIAdaptor) {\n          this.pdfViewerBase.blazorUIAdaptor.EnableDeleteOption(isEnable);\n        }\n        if (deleteIconCicked) {\n          this.pdfViewerBase.focusViewerContainer();\n        }\n      }\n    }\n  };\n  /**\n   * @param isEnable\n   * @private\n   */\n  AnnotationToolbar.prototype.enableTextMarkupAnnotationPropertiesTools = function (isEnable) {\n    if (!Browser.isDevice) {\n      if (!isBlazor()) {\n        this.enableItems(this.colorDropDownElement.parentElement, isEnable);\n        this.enableItems(this.opacityDropDownElement.parentElement, isEnable);\n        if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n          this.enableItems(this.strokeDropDownElement.parentElement, false);\n          this.enableItems(this.thicknessElement.parentElement, false);\n          this.enableItems(this.fontFamilyElement.parentElement, false);\n          this.enableItems(this.fontSizeElement.parentElement, false);\n          this.enableItems(this.fontColorElement.parentElement, false);\n          this.enableItems(this.textAlignElement.parentElement, false);\n          this.enableItems(this.textPropElement.parentElement, false);\n        }\n      } else {\n        // this.pdfViewer._dotnetInstance.invokeMethodAsync('AnnotationSelect', 'TextMarkup');\n        this.pdfViewerBase.blazorUIAdaptor.enableTextMarkupAnnotationPropertiesTools(isEnable);\n      }\n    }\n  };\n  AnnotationToolbar.prototype.checkAnnotationPropertiesChange = function () {\n    // eslint-disable-next-line\n    var annotation = this.pdfViewer.selectedItems.annotations[0];\n    if (annotation && annotation.annotationSettings) {\n      // eslint-disable-next-line\n      var isLock = annotation.annotationSettings.isLock;\n      if (isLock) {\n        if (this.pdfViewer.annotationModule.checkAllowedInteractions('PropertyChange', annotation)) {\n          return true;\n        } else {\n          return false;\n        }\n      }\n    }\n    return true;\n  };\n  /**\n   * @param isEnable\n   * @private\n   */\n  AnnotationToolbar.prototype.enableAnnotationPropertiesTools = function (isEnable) {\n    if (!Browser.isDevice) {\n      var isPropertiesChanges = this.checkAnnotationPropertiesChange();\n      if (!isEnable) {\n        isPropertiesChanges = true;\n      }\n      if (!isBlazor()) {\n        if (isPropertiesChanges) {\n          // eslint-disable-next-line max-len\n          if (this.pdfViewer.selectedItems.annotations[0] && this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Line') {\n            this.enableItems(this.colorDropDownElement.parentElement, false);\n          } else {\n            this.enableItems(this.colorDropDownElement.parentElement, isEnable);\n          }\n          this.enableItems(this.opacityDropDownElement.parentElement, isEnable);\n          this.enableItems(this.strokeDropDownElement.parentElement, isEnable);\n          this.enableItems(this.thicknessElement.parentElement, isEnable);\n          if (this.pdfViewer.enableShapeLabel) {\n            this.enableItems(this.fontFamilyElement.parentElement, isEnable);\n            this.enableItems(this.fontSizeElement.parentElement, isEnable);\n            this.enableItems(this.fontColorElement.parentElement, isEnable);\n          }\n          this.enableItems(this.textAlignElement.parentElement, false);\n          this.enableItems(this.textPropElement.parentElement, false);\n        }\n      } else {\n        // this.pdfViewer._dotnetInstance.invokeMethodAsync('EnableAnnotationPropertiesTools', isEnable, isPropertiesChanges);\n        this.pdfViewerBase.blazorUIAdaptor.enableAnnotationPropertiesTool(isEnable, isPropertiesChanges);\n      }\n    }\n  };\n  /**\n   * @param isEnable\n   * @private\n   */\n  AnnotationToolbar.prototype.enableSignaturePropertiesTools = function (isEnable) {\n    if (!Browser.isDevice) {\n      var isPropertiesChanges = this.checkAnnotationPropertiesChange();\n      if (!isEnable) {\n        isPropertiesChanges = true;\n      }\n      if (!isBlazor()) {\n        if (isPropertiesChanges) {\n          this.enableItems(this.colorDropDownElement.parentElement, false);\n          this.enableItems(this.opacityDropDownElement.parentElement, isEnable);\n          this.enableItems(this.strokeDropDownElement.parentElement, isEnable);\n          this.enableItems(this.thicknessElement.parentElement, isEnable);\n          this.enableItems(this.textAlignElement.parentElement, false);\n          this.enableItems(this.textPropElement.parentElement, false);\n          this.enableItems(this.fontFamilyElement.parentElement, false);\n          this.enableItems(this.fontSizeElement.parentElement, false);\n          this.enableItems(this.fontColorElement.parentElement, false);\n          this.enableItems(this.textAlignElement.parentElement, false);\n        }\n      } else {\n        //this.pdfViewer._dotnetInstance.invokeMethodAsync('EnableSignaturePropertiesTools', isEnable, isPropertiesChanges);\n        this.pdfViewerBase.blazorUIAdaptor.enableSignaturePropertiesTools(isEnable, isPropertiesChanges);\n      }\n    }\n  };\n  /**\n   * @param isEnable\n   * @private\n   */\n  AnnotationToolbar.prototype.enableStampAnnotationPropertiesTools = function (isEnable) {\n    var isPropertiesChanges = this.checkAnnotationPropertiesChange();\n    if (!isEnable) {\n      isPropertiesChanges = true;\n    }\n    if (!isBlazor()) {\n      if (isPropertiesChanges) {\n        this.enableItems(this.opacityDropDownElement.parentElement, isEnable);\n        this.enableItems(this.colorDropDownElement.parentElement, false);\n        this.enableItems(this.strokeDropDownElement.parentElement, false);\n        this.enableItems(this.thicknessElement.parentElement, false);\n        this.enableItems(this.fontFamilyElement.parentElement, false);\n        this.enableItems(this.fontSizeElement.parentElement, false);\n        this.enableItems(this.fontColorElement.parentElement, false);\n        this.enableItems(this.textAlignElement.parentElement, false);\n        this.enableItems(this.textPropElement.parentElement, false);\n      }\n    } else {\n      // this.pdfViewer._dotnetInstance.invokeMethodAsync('EnableStampAnnotationPropertiesTools', isEnable, isPropertiesChanges);\n      this.pdfViewerBase.blazorUIAdaptor.enableStampAnnotationPropertiesTools(isEnable, isPropertiesChanges);\n    }\n  };\n  /**\n   * @param isEnable\n   * @private\n   */\n  AnnotationToolbar.prototype.enableFreeTextAnnotationPropertiesTools = function (isEnable) {\n    var isPropertiesChanges = this.checkAnnotationPropertiesChange();\n    if (!isEnable) {\n      isPropertiesChanges = true;\n    }\n    if (!isBlazor()) {\n      if (isPropertiesChanges) {\n        this.enableItems(this.opacityDropDownElement.parentElement, isEnable);\n        this.enableItems(this.colorDropDownElement.parentElement, isEnable);\n        this.enableItems(this.strokeDropDownElement.parentElement, isEnable);\n        this.enableItems(this.thicknessElement.parentElement, isEnable);\n        this.enableItems(this.fontFamilyElement.parentElement, isEnable);\n        this.enableItems(this.fontSizeElement.parentElement, isEnable);\n        this.enableItems(this.fontColorElement.parentElement, isEnable);\n        this.enableItems(this.textAlignElement.parentElement, isEnable);\n        this.enableItems(this.textPropElement.parentElement, isEnable);\n      }\n    } else {\n      //this.pdfViewer._dotnetInstance.invokeMethodAsync('EnableFreeTextAnnotationPropertiesTools', isEnable, isPropertiesChanges);\n      this.pdfViewerBase.blazorUIAdaptor.enableFreeTextAnnotationPropertiesTools(isEnable, isPropertiesChanges);\n    }\n  };\n  /**\n   * @param isEnable\n   * @private\n   */\n  AnnotationToolbar.prototype.enableAnnotationAddTools = function (isEnable) {\n    if (this.toolbar && !Browser.isDevice) {\n      if (this.pdfViewer.enableTextMarkupAnnotation) {\n        this.enableItems(this.highlightItem.parentElement, isEnable);\n        this.enableItems(this.underlineItem.parentElement, isEnable);\n        this.enableItems(this.strikethroughItem.parentElement, isEnable);\n      }\n      if (this.pdfViewer.enableShapeAnnotation) {\n        this.enableItems(this.shapeElement.parentElement, isEnable);\n      }\n      if (this.pdfViewer.enableStampAnnotations) {\n        this.toolbar.enableItems(this.stampElement.parentElement, isEnable);\n      }\n      if (this.pdfViewer.enableMeasureAnnotation && this.pdfViewerBase.isCalibrateAnnotationModule()) {\n        this.enableItems(this.calibrateElement.parentElement, isEnable);\n      }\n      if (this.pdfViewer.enableFreeText) {\n        this.enableItems(this.freeTextEditItem.parentElement, isEnable);\n      }\n      if (this.pdfViewer.enableHandwrittenSignature) {\n        this.enableItems(this.handWrittenSignatureItem.parentElement, isEnable);\n      }\n      if (this.pdfViewer.enableInkAnnotation) {\n        this.enableItems(this.inkAnnotationItem.parentElement, isEnable);\n      }\n      if (this.pdfViewer.enableCommentPanel) {\n        this.enableCommentPanelTool(isEnable);\n      }\n    }\n  };\n  /**\n   * @private\n   */\n  AnnotationToolbar.prototype.isAnnotationButtonsEnabled = function () {\n    var isButtonsEnabled = false;\n    if (this.isHighlightEnabled || this.isUnderlineEnabled || this.isStrikethroughEnabled) {\n      isButtonsEnabled = true;\n    }\n    return isButtonsEnabled;\n  };\n  /**\n   * @param isEnable\n   * @private\n   */\n  AnnotationToolbar.prototype.enableCommentPanelTool = function (isEnable) {\n    if (this.toolbar) {\n      this.enableItems(this.commentItem.parentElement, isEnable);\n    }\n  };\n  AnnotationToolbar.prototype.updateToolbarItems = function () {\n    if (this.pdfViewer.enableTextMarkupAnnotation) {\n      this.enableTextMarkupAddTools(true);\n    } else {\n      this.enableTextMarkupAddTools(false);\n    }\n    this.enableItems(this.shapeElement.parentElement, this.pdfViewer.enableShapeAnnotation);\n    this.toolbar.enableItems(this.stampElement.parentElement, this.pdfViewer.enableStampAnnotations);\n    this.enableItems(this.calibrateElement.parentElement, this.pdfViewer.enableMeasureAnnotation);\n    this.enableItems(this.freeTextEditItem.parentElement, this.pdfViewer.enableFreeText);\n    this.enableItems(this.handWrittenSignatureItem.parentElement, this.pdfViewer.enableHandwrittenSignature);\n    this.enableItems(this.inkAnnotationItem.parentElement, this.pdfViewer.enableInkAnnotation);\n    this.closeItem.setAttribute('tabindex', '0');\n  };\n  AnnotationToolbar.prototype.enableTextMarkupAddTools = function (isEnable) {\n    this.enableItems(this.highlightItem.parentElement, isEnable);\n    this.enableItems(this.underlineItem.parentElement, isEnable);\n    this.enableItems(this.strikethroughItem.parentElement, isEnable);\n  };\n  /**\n   * @private\n   */\n  // for shapes added by drawing package\n  AnnotationToolbar.prototype.updateAnnnotationPropertyItems = function () {\n    if (!isBlazor()) {\n      if (this.pdfViewer.selectedItems.annotations.length === 1) {\n        // eslint-disable-next-line max-len\n        this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.colorDropDownElement, this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill, 'fillColor'));\n        this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.strokeDropDownElement, this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor, 'strokeColor'));\n        if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'FreeText' && !this.pdfViewer.selectedItems.annotations[0].isLock) {\n          // eslint-disable-next-line\n          this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.fontColorElement, this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].fontColor, 'fontColor'));\n          this.pdfViewer.toolbar.annotationToolbarModule.updateFontFamilyInIcon(this.pdfViewer.selectedItems.annotations[0].fontFamily);\n          // eslint-disable-next-line max-len\n          this.pdfViewer.toolbar.annotationToolbarModule.updateFontSizeInIcon(this.pdfViewer.selectedItems.annotations[0].fontSize);\n          this.pdfViewer.toolbar.annotationToolbarModule.updateTextAlignInIcon(this.pdfViewer.selectedItems.annotations[0].textAlign);\n        }\n      } else {\n        this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.colorDropDownElement, '#000000');\n        this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.strokeDropDownElement, '#000000');\n        this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.fontColorElement, '#000000');\n      }\n    } else {\n      this.colorDropDownElementInBlazor = this.pdfViewer.element.querySelector('.e-pv-annotation-color-container');\n      this.strokeDropDownElementInBlazor = this.pdfViewer.element.querySelector('.e-pv-annotation-stroke-container');\n      this.fontColorElementInBlazor = this.pdfViewer.element.querySelector('.e-pv-annotation-textcolor-container');\n      if (this.pdfViewer.selectedItems.annotations.length === 1) {\n        // eslint-disable-next-line max-len\n        this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.colorDropDownElementInBlazor, this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill, 'fillColor'));\n        this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.strokeDropDownElementInBlazor, this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor, 'strokeColor'));\n        if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'FreeText') {\n          // eslint-disable-next-line\n          this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.fontColorElementInBlazor, this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].fontColor, 'fontColor'));\n          //this.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateFontFamilyInIcon', this.pdfViewer.selectedItems.annotations[0].fontFamily);\n          // eslint-disable-next-line max-len\n          this.pdfViewerBase.blazorUIAdaptor.updateFontFamilyInIcon(this.pdfViewer.selectedItems.annotations[0].fontFamily);\n          // this.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateFontSizeInIcon', this.pdfViewer.selectedItems.annotations[0].fontSize);\n          this.pdfViewerBase.blazorUIAdaptor.updateFontSizeInIcon(this.pdfViewer.selectedItems.annotations[0].fontSize);\n          //this.pdfViewer.toolbar.annotationtoolbar.updateTextAlignInIcon(this.pdfViewer.selectedItems.annotations[0].textAlign);\n        }\n      } else {\n        this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.colorDropDownElementInBlazor, '#000000');\n        this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.strokeDropDownElementInBlazor, '#000000');\n        this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.fontColorElementInBlazor, '#000000');\n      }\n    }\n  };\n  AnnotationToolbar.prototype.getColorHexValue = function (colorString, type) {\n    if (colorString === '#ffffff00') {\n      colorString = '#ffffff';\n    }\n    if (colorString.toLowerCase() === 'red') {\n      colorString = '#FF0000';\n    }\n    if (colorString !== 'transparent') {\n      if (!isBlazor()) {\n        return this.colorPalette.getValue(colorString, 'hex');\n      } else {\n        return colorString;\n      }\n    } else {\n      if (type === 'fontColor' || type === 'strokeColor') {\n        return '#000000';\n      } else {\n        return '#ffffff';\n      }\n    }\n  };\n  AnnotationToolbar.prototype.setColorInPicker = function (colorpick, colorString) {\n    if (colorpick) {\n      colorpick.setProperties({\n        'value': colorString\n      }, true);\n    }\n  };\n  /**\n   * @private\n   */\n  AnnotationToolbar.prototype.resetToolbar = function () {\n    this.updateToolbarItems();\n    // eslint-disable-next-line max-len\n    if ((this.pdfViewer.isAnnotationToolbarOpen || this.pdfViewer.isAnnotationToolbarVisible) && this.pdfViewer.enableAnnotationToolbar) {\n      this.adjustViewer(false);\n      this.toolbarElement.style.display = '';\n      this.isToolbarHidden = false;\n      this.adjustViewer(true);\n      this.primaryToolbar.selectItem(this.primaryToolbar.annotationItem);\n      if (this.pdfViewer.toolbarModule && this.pdfViewer.toolbarModule.annotationToolbarModule) {\n        this.pdfViewer.toolbarModule.annotationToolbarModule.toolbar.refreshOverflow();\n      }\n      this.pdfViewer.isAnnotationToolbarVisible = true;\n    } else {\n      this.toolbarElement.style.display = 'none';\n      this.isToolbarHidden = true;\n      this.pdfViewer.isAnnotationToolbarVisible = false;\n    }\n  };\n  /**\n   * @private\n   */\n  AnnotationToolbar.prototype.clearTextMarkupMode = function () {\n    if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n      if (isBlazor()) {\n        this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n      }\n      this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAddMode = '';\n    }\n  };\n  /**\n   * @private\n   */\n  AnnotationToolbar.prototype.clearShapeMode = function () {\n    if (this.pdfViewerBase.isShapeAnnotationModule()) {\n      this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode = '';\n    }\n  };\n  /**\n   * @private\n   */\n  AnnotationToolbar.prototype.clearMeasureMode = function () {\n    if (this.pdfViewerBase.isCalibrateAnnotationModule()) {\n      this.pdfViewer.annotation.measureAnnotationModule.currentAnnotationMode = '';\n    }\n  };\n  /**\n   * @private\n   */\n  AnnotationToolbar.prototype.clear = function () {\n    this.deselectAllItems();\n  };\n  /**\n   * @private\n   */\n  AnnotationToolbar.prototype.destroy = function () {\n    this.destroyComponent();\n    this.shapeDropDown ? this.shapeDropDown.destroy() : null;\n    this.calibrateDropDown ? this.calibrateDropDown.destroy() : null;\n    this.fontColorDropDown ? this.fontColorDropDown.destroy() : null;\n    this.textAlignDropDown ? this.textAlignDropDown.destroy() : null;\n    this.colorDropDown ? this.colorDropDown.destroy() : null;\n    this.strokeDropDown ? this.strokeDropDown.destroy() : null;\n    this.thicknessDropDown ? this.thicknessDropDown.destroy() : null;\n    this.opacityDropDown ? this.opacityDropDown.destroy() : null;\n    this.textPropertiesDropDown ? this.textPropertiesDropDown.destroy() : null;\n    this.toolbar ? this.toolbar.destroy() : null;\n    // eslint-disable-next-line\n    var stampImage = document.getElementById(this.pdfViewer.element.id + '_stampElement');\n    if (stampImage) {\n      stampImage.parentElement.removeChild(stampImage);\n    }\n  };\n  AnnotationToolbar.prototype.destroyComponent = function () {\n    // eslint-disable-next-line\n    var componentElement = [this.highlightItem, this.underlineItem, this.strikethroughItem, this.lineElement, this.arrowElement, this.rectangleElement, this.circleElement, this.polygonElement, this.calibrateDistance, this.calibrateArea, this.calibrateRadius, this.calibrateVolume, this.calibratePerimeter, this.freeTextEditItem, this.stampElement, this.handWrittenSignatureItem, this.inkAnnotationItem, this.fontFamilyElement, this.fontSizeElement, this.alignLeftElement, this.alignRightElement, this.alignCenterElement, this.alignJustifyElement, this.boldElement, this.italicElement, this.fontStyleStrikethroughItem, this.fontStyleUnderlineItem, this.deleteItem, this.commentItem, this.shapeDropDown ? this.shapeDropDown.activeElem[0] : null, this.calibrateDropDown ? this.calibrateDropDown.activeElem[0] : null, this.fontColorDropDown ? this.fontColorDropDown.activeElem[0] : null, this.textAlignDropDown ? this.textAlignDropDown.activeElem[0] : null, this.colorDropDown ? this.colorDropDown.activeElem[0] : null, this.strokeDropDown ? this.strokeDropDown.activeElem[0] : null, this.thicknessDropDown ? this.thicknessDropDown.activeElem[0] : null, this.opacityDropDown ? this.opacityDropDown.activeElem[0] : null, this.textPropertiesDropDown ? this.textPropertiesDropDown.activeElem[0] : null];\n    for (var i = 0; i < componentElement.length; i++) {\n      if (componentElement[i]) {\n        this.destroyDependentComponent(componentElement[i]);\n      }\n    }\n  };\n  AnnotationToolbar.prototype.destroyDependentComponent = function (component) {\n    if (component.ej2_instances) {\n      for (var i = component.ej2_instances.length - 1; i >= 0; i--) {\n        component.ej2_instances[i].destroy();\n      }\n    }\n  };\n  AnnotationToolbar.prototype.getElementHeight = function (element) {\n    try {\n      return element.getBoundingClientRect().height;\n    } catch (error) {\n      return 0;\n    }\n  };\n  AnnotationToolbar.prototype.updateViewerHeight = function (viewerHeight, toolbarHeight) {\n    return this.getElementHeight(this.pdfViewer.element) - toolbarHeight;\n  };\n  AnnotationToolbar.prototype.resetViewerHeight = function (viewerHeight, toolbarHeight) {\n    return viewerHeight + toolbarHeight;\n  };\n  /**\n   * @private\n   */\n  AnnotationToolbar.prototype.afterAnnotationToolbarCreationInBlazor = function () {\n    this.HighlightElement = document.getElementById(this.pdfViewer.element.id + '_highLight').children[0];\n    this.UnderlineElement = document.getElementById(this.pdfViewer.element.id + '_underline').children[0];\n    this.StrikethroughElement = document.getElementById(this.pdfViewer.element.id + '_strikethrough').children[0];\n    this.InkAnnotationElement = document.getElementById(this.pdfViewer.element.id + '_annotation_ink').children[0];\n    this.InkAnnotationElement.classList.add('e-pv-tbar-btn');\n    this.FreeTextElement = document.getElementById(this.pdfViewer.element.id + '_annotation_freeTextEdit').children[0];\n    this.HighlightElement = this.addClassToToolbarInBlazor(this.HighlightElement, 'e-pv-highlight', '_highLight');\n    this.UnderlineElement = this.addClassToToolbarInBlazor(this.UnderlineElement, 'e-pv-underline', '_underline');\n    this.StrikethroughElement = this.addClassToToolbarInBlazor(this.StrikethroughElement, 'e-pv-strikethrough', '_strikethrough');\n  };\n  // eslint-disable-next-line\n  AnnotationToolbar.prototype.addClassToToolbarInBlazor = function (element, className, idString) {\n    element.classList.add(className);\n    element.classList.add('e-pv-tbar-btn');\n    if (element.childNodes.length > 0) {\n      var spanElement = element.childNodes[0];\n      if (spanElement && spanElement.classList) {\n        spanElement.id = this.pdfViewer.element.id + idString + 'Icon';\n        spanElement.classList.remove('e-icons');\n        spanElement.classList.remove('e-btn-icon');\n        if (this.pdfViewer.enableRtl) {\n          spanElement.classList.add('e-right');\n        }\n      }\n    }\n    return element;\n  };\n  AnnotationToolbar.prototype.handleHighlightInBlazor = function () {\n    if (this.HighlightElement.classList.contains('e-pv-select')) {\n      this.primaryToolbar.deSelectItem(this.HighlightElement);\n    } else if (!this.HighlightElement.classList.contains('e-pv-select')) {\n      this.primaryToolbar.selectItem(this.HighlightElement);\n    }\n    if (this.StrikethroughElement.classList.contains('e-pv-select')) {\n      this.primaryToolbar.deSelectItem(this.StrikethroughElement);\n    }\n    if (this.UnderlineElement.classList.contains('e-pv-select')) {\n      this.primaryToolbar.deSelectItem(this.UnderlineElement);\n    }\n  };\n  AnnotationToolbar.prototype.handleUnderlineInBlazor = function () {\n    if (this.UnderlineElement.classList.contains('e-pv-select')) {\n      this.primaryToolbar.deSelectItem(this.UnderlineElement);\n    } else if (!this.UnderlineElement.classList.contains('e-pv-select')) {\n      this.primaryToolbar.selectItem(this.UnderlineElement);\n    }\n    if (this.StrikethroughElement.classList.contains('e-pv-select')) {\n      this.primaryToolbar.deSelectItem(this.StrikethroughElement);\n    }\n    if (this.HighlightElement.classList.contains('e-pv-select')) {\n      this.primaryToolbar.deSelectItem(this.HighlightElement);\n    }\n  };\n  AnnotationToolbar.prototype.handleStrikethroughInBlazor = function () {\n    if (this.StrikethroughElement.classList.contains('e-pv-select')) {\n      this.primaryToolbar.deSelectItem(this.StrikethroughElement);\n    } else if (!this.StrikethroughElement.classList.contains('e-pv-select')) {\n      this.primaryToolbar.selectItem(this.StrikethroughElement);\n    }\n    if (this.HighlightElement.classList.contains('e-pv-select')) {\n      this.primaryToolbar.deSelectItem(this.HighlightElement);\n    }\n    if (this.UnderlineElement.classList.contains('e-pv-select')) {\n      this.primaryToolbar.deSelectItem(this.UnderlineElement);\n    }\n  };\n  AnnotationToolbar.prototype.AnnotationSliderOpened = function () {\n    if (this.pdfViewer.selectedItems.annotations && this.pdfViewer.selectedItems.annotations.length > 0 && this.pdfViewer.selectedItems.annotations[0]) {\n      if (this.pdfViewer.selectedItems.annotations[0].wrapper && this.pdfViewer.selectedItems.annotations[0].wrapper.children[0]) {\n        var opacity = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.opacity * 100;\n        var thickness = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeWidth;\n        this.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateAnnotationSlider', opacity, thickness);\n      }\n    }\n  };\n  AnnotationToolbar.prototype.DropDownOpened = function (colorElement) {\n    if (colorElement && colorElement[0].element) {\n      var colorElementBounds = colorElement[0].element.getBoundingClientRect();\n      var sidebarElement = this.pdfViewerBase.navigationPane.sideBarToolbar;\n      var sideBarElementWidth = sidebarElement ? sidebarElement.getBoundingClientRect().width : 0;\n      if (colorElementBounds.left > this.pdfViewerBase.viewerContainer.clientWidth + colorElementBounds.width + sideBarElementWidth) {\n        colorElement[0].element.style.left = colorElementBounds.left - this.pdfViewerBase.viewerContainer.clientHeight / 2 + 'px';\n      }\n    }\n  };\n  AnnotationToolbar.prototype.enableItems = function (element, isEnable) {\n    this.toolbar.enableItems(element, isEnable);\n    if (element.firstElementChild) {\n      element.firstElementChild.setAttribute('tabindex', isEnable ? '0' : '-1');\n      element.firstElementChild.setAttribute('data-tabindex', isEnable ? '0' : '-1');\n    }\n  };\n  return AnnotationToolbar;\n}();\nexport { AnnotationToolbar };","map":{"version":3,"names":["createElement","Browser","isBlazor","isNullOrUndefined","closest","initializeCSPTemplate","Toolbar","Tool","Menu","DropDownButton","ColorPicker","Slider","cloneObject","ComboBox","Query","DynamicStampItem","SignStampItem","StandardBusinessStampItem","AnnotationToolbar","viewer","viewerBase","toolbar","_this","toolbarBorderHeight","isToolbarHidden","isMobileAnnotEnabled","isHighlightEnabled","isUnderlineEnabled","isStrikethroughEnabled","isHighlightBtnVisible","isCommentBtnVisible","isUnderlineBtnVisible","isStrikethroughBtnVisible","isColorToolVisible","isOpacityToolVisible","isDeleteAnnotationToolVisible","isCurrentAnnotationOpacitySet","isStampBtnVisible","isShapeBtnVisible","isSignatureBtnVisible","isInkBtnVisible","isFontFamilyToolVisible","isFontSizeToolVisible","isFontAlignToolVisible","isFontColorToolVisible","isFontStylesToolVisible","isCommentPanelBtnVisible","isFreeTextBtnVisible","isCalibrateBtnVisible","isStrokeColorToolVisible","isThicknessToolVisible","stampMenu","stampParentID","inkAnnotationSelected","openSignaturePopup","isSavedSignatureClicked","saveSignatureCount","saveInitialCount","isToolbarCreated","addStampImage","args","proxy","upoadedFiles","target","files","uploadedFile","pdfViewer","annotationModule","stampAnnotationModule","customStampName","name","split","type","reader","FileReader","onload","e","uploadedFileUrl","currentTarget","result","annotation","isStampAddMode","isStampAnnotSelected","pdfViewerBase","stampAdded","createCustomStampAnnotation","readAsDataURL","value","popupPosition","colorElement","buttonElement","element","buttonBounds","getBoundingClientRect","elements","getElementsByClassName","mainContainerBounds","mainContainer","left","width","parentElement","style","onShapeToolbarClicked","elementId","id","shapeAnnotationModule","isDevice","deselectAllItems","resetFreeTextAnnot","originalEvent","toolbarModule","selectItem","setAnnotationType","onShapeDrawSelection","updateColorInIcon","colorDropDownElement","lineFillColor","strokeDropDownElement","lineStrokeColor","handleShapeTool","arrowFillColor","arrowStrokeColor","rectangleFillColor","rectangleStrokeColor","circleFillColor","circleStrokeColor","polygonFillColor","polygonStrokeColor","primaryToolbar","prototype","initializeAnnotationToolbar","toolbarElement","className","viewerMainContainer","appendChild","height","overflowMode","cssClass","items","createToolbarItems","clicked","onToolbarClicked","bind","created","createDropDowns","isStringTemplate","enableRtl","appendTo","afterToolbarCreation","createStampContainer","createSignContainer","applyAnnotationToolbarSettings","updateToolbarItems","showAnnotationToolbar","setAttribute","createMobileAnnotationToolbar","isEnable","isPath","enableDesktopMode","insertBefore","viewerContainer","createMobileToolbarItems","navigationPane","goBackToToolbar","showToolbar","deleteItem","getElement","firstElementChild","display","hideMobileAnnotationToolbar","selectedItems","annotations","length","textMarkupAnnotationModule","currentTextMarkupAnnotation","propertyToolbar","children","toolbarCreated","editIcon","document","getElementById","classList","contains","createAnnotationToolbarForMobile","adjustMobileViewer","FreeTextForMobile","hideExistingTool","freetextToolbarElement","styles","colorTemplate","annotationToolbarModule","getTemplate","strokeTemplate","thicknessTemplate","opacityTemplate","fontFamilyTemplate","fontSizeTemplate","textColorTemplate","alignmentTemplate","textPropertiesTemplate","prefixIcon","tooltipText","localeObj","getConstant","click","align","template","mobileColorpicker","showFreeTextPropertiesTool","createPropertyTools","shapeType","destroy","shapeToolbarElement","removeChild","id_1","createPropertyToolbarForMobile","shapeAnnotationType","enableItems","commentIcon","showPropertyTool","existingTool","applyProperiesToolSettings","selectedAnnotation","fillColor","strokeColor","fontFamily","fontFamilyElement","ej2_instances","fontColor","fontColorElement","borderBottomColor","modifyTextAlignment","textAlign","updateTextAlignInIcon","stampToolMobileForMobile","stampToolbarElement","createStampToolbarItemsForMobile","showStampPropertiesTool","shapeToolMobile","createShapeToolbarItemsForMobile","afterShapeToolbarCreationForMobile","showShapeTool","calibrateToolMobile","calibrateToolbarElement","createCalibrateToolbarItemsForMobile","onCalibrateToolbarClicked","afterCalibrateToolbarCreationForMobile","textMarkupForMobile","textMarkupToolbarElement","showTextMarkupPropertiesTool","annotationToolbarItems","toolbarSettings","indexOf","showColorEditTool","showStrokeColorEditTool","showThicknessEditTool","showOpacityEditTool","signatureInkForMobile","signatureInkToolbarElement","aign","mobileAnnotationToolbar","shapePropertiesTool","showInkPropertiesTool","showImagePropertyTool","showCommentPanelTool","showAnnotationDeleteTool","showFontFamilyAnnotationTool","showFontSizeAnnotationTool","showFontColorAnnotationTool","showFontAlignAnnotationTool","showFontStylesAnnotationTool","showFreeTextAnnotationTool","applyHideToToolbar","showShapeAnnotationTool","showStampAnnotationTool","includes","showSignatureTool","hideToolbar","remove","stampTemplate","signTemplate","afterMobileToolbarCreation","applyMobileAnnotationToolbarSettings","toolbarHeight","clientHeight","isPrimaryTool","enableToolbar","updateViewerHeight","getElementHeight","resetViewerHeight","enable","push","page","getSelectTextMarkupCurrentPage","selectTextMarkupCurrentPage","clearAnnotationSelection","shapesTemplate","calibrateTemplate","handWrittenSignatureItem","createTooltip","handWrittenSignatureSettings","signatureItem","text","separator","saveOptions","iconCss","open","openSignature","beforeItemRender","clearSelection","currentPageNumber","margin","item","innerHTML","collection","signatureModule","signaturecollection","getSaveLimit","saveSignatureLimit","signatureCollection","collectionKey","image","imageData","signatureID","isInitial","signatureContainer","paddingBottom","signatureSpan","add","signatureImage","signatureType","innerText","fontSize","alignItems","position","overflow","textOverflow","paddingLeft","src","paddingRight","paddingTop","boxSizing","addEventListener","hoverSignatureImage","leaveSignatureImage","signatureDeleteSpan","append","pointerEvents","background","addInitialSpan","textContent","locale","clickSignature","hoverInitialBtn","flexDirection","saveInitialLimit","isSignatureIteam","clickInitial","select","drpDownBtn","updateSignatureCount","count","colletionList","addedSignature","deleteSignature","backgroundClip","renderAddedSignature","deleteSavedSign","hoverSignatureDelete","leaveSignatureDelete","eventTarget","event","cursor","currentFieldID","navigator","userAgent","path","composedPath","liElement","tagName","isInitialField","addSignature","showSignaturepanel","isAddedSignClicked","RenderSavedSignature","stopPropagation","RemoveSignature","splice","elementName","outerHTML","stampElement","contextMenuElement","stampSettings","dynamicStamps","dynamicStamps_1","label","forEach","stampItem","index","signStamps","signStamps_1","standardBusinessStamps","standardsBusinessStamps_1","customStampSettings","enableCustomStamp","customStampCollection","customStamps","menuOptions","showItemOnClick","enableScrolling","beforeOpen","parentItem","isAddToMenu","currentElements","i","stampElements","n","customStampImageSource","m","liElem","childElementCount","span","menuItems","beforeClose","isAlreadyAdded","updateInteractionTools","checkStampAnnotations","stampImage","triggerAnnotationUnselectEvent","isDynamicStamp","retrieveDynamicStampAnnotation","retrievestampAnnotation","createCustomStampElement","attrs","top","visibility","body","annotName","author","renderAnnotations","pageIndex","shapeElement","shapeToolbar","createShapeOptions","shapeDropDown","createDropDownButton","calibrateElement","calibrateToolbar","calibrateDropDown","colorPalette","createColorPicker","change","onColorPickerChange","colorDropDown","colorDropDownBeforeOpen","colorDropDownOpen","onColorPickerCancelClick","strokeColorPicker","onStrokePickerChange","strokeDropDown","strokeDropDownBeforeOpen","strokeDropDownOpen","onStrokePickerCancelClick","thicknessElement","thicknessContainer","createThicknessSlider","thicknessDropDown","thicknessDropDownBeforeOpen","thicknessSlider","thicknessChange","changed","thicknessDropDownOpen","opacityDropDownElement","sliderContainer","createSlider","opacityDropDown","opacityDropDownBeforeOpen","opacitySlider","opacityChange","opacityDropDownOpen","createDropDownListForFamily","onFontFamilyChange","fontSizeElement","createDropDownListForSize","fontColorPalette","onFontColorChange","fontColorDropDown","textAlignElement","alignmentToolbar","undefined","textAlignDropDown","textAlignDropDownBeforeOpen","textPropElement","propertiesToolbar","textPropertiesDropDown","createPropDropDownButton","textPropertiesDropDownBeforeOpen","calculateToolbarPosition","toggle","noColor","color","setCurrentColorInPicker","wrapper","fill","refresh","currentTextMarkupAddMode","setColorInPicker","highlightColor","underlineColor","strikethroughColor","currentAnnotationMode","setCurrentStrokeColorInPicker","updateInkannotationItems","currentColor","currentValue","hex","modifyFontColor","freeTextSettings","freeTextAnnotationModule","updateTextProperties","fontColorElementInBlazor","querySelector","modifyFontFamily","onFontSizeChange","isInteracted","parseFloat","modifyFontSize","getElementsByTagName","dropDownOptions","font","isBold","isItalic","isStrikeout","isUnderline","onClickTextAlignment","textAlignment","onClickTextProperties","fontInfo","modifyTextProperties","fontStyle","isStrikethrough","updateTextPropertySelection","opacityValue","modifyOpacityProperty","highlightOpacity","underlineOpacity","strikethroughOpacity","currentAnnotations","clonedObject","redoClonedObject","opacity","nodePropertyChange","triggerAnnotationPropChange","addAction","updateSessionStorage","modifyOpacity","previousValue","lineOpacity","arrowOpacity","rectangleOpacity","circleOpacity","polygonOpacity","inkAnnotationModule","inkAnnotationSettings","drawingObject","updateOpacityIndicator","strokeWidth","lineThickness","arrowThickness","rectangleThickness","circleThickness","polygonThickness","updateThicknessIndicator","leftValue","offsetWidth","thicknessChangeInBlazor","modifyThickness","ShapeThickness","thickness","annotationModule_1","borderWidth","iconClass","dropDownButton","idString","isShape","isAlign","isTextProp","textAlignmentToolbarItems","afterAlignmentToolbarCreation","textPropertiesToolbarItems","afterPropertiesToolbarCreation","createShapeToolbarItems","afterShapeToolbarCreation","createCalibrateToolbarItems","afterCalibrateToolbarCreation","measureType","showCommentsPanel","deleteAnnotation","querySelectorAll","alignLeftElement","addClassToolbarItem","alignRightElement","alignCenterElement","alignJustifyElement","boldElement","italicElement","fontStyleStrikethroughItem","fontStyleUnderlineItem","fontSelectElement","dataSource","allowCustom","showClearButton","popupWidth","isUserInteracted","FontName","query","fields","itemTemplate","data","measureModule","measureAnnotationModule","distanceFillColor","distanceStrokeColor","perimeterFillColor","perimeterStrokeColor","areaFillColor","areaStrokeColor","radiusFillColor","radiusStrokeColor","volumeFillColor","volumeStrokeColor","enableAnnotationPropertiesTools","lineElement","arrowElement","rectangleElement","circleElement","polygonElement","calibrateDistance","calibratePerimeter","calibrateArea","calibrateRadius","calibrateVolume","highlightItem","underlineItem","strikethroughItem","shapesItem","calibrateItem","freeTextEditItem","commentItem","inkAnnotationItem","selectAnnotationDeleteItem","enableCommentPanelTool","enableCommentPanel","inputElement","existingInput","colorPicker","inline","mode","enableOpacity","showButtons","modeSwitcher","modifyColorProperty","modifyFillColor","colorDropDownElementInBlazor","modifyStrokeColor","borderColor","strokeDropDownElementInBlazor","childNodes","currentOption","updateFontFamilyInIcon","family","leftAlign","rightAlign","centerAlign","justifyAlign","updateFontSizeInIcon","size","opacityIndicator","parseInt","Math","round","toString","thicknessIndicator","outerContainer","sliderElement","max","min","closeItem","enableTextMarkupAnnotationPropertiesTools","updateStampItems","isKeyBoardEvent","pointerType","deSelectCommentAnnotation","tool","handleHighlight","setAnnotationMode","handleUnderline","handleStrikethrough","commentPanel","showHideDropletDiv","closeCommentPanelContainer","lastElementChild","HTMLButtonElement","focus","commentsPanel","annotationItem","handleFreeTextEditor","drawInkAnnotation","deSelectItem","isAddComment","isCommentIconAdded","commentsButton","addComments","addInkAnnotation","InkAnnotationElement","focusViewerContainer","deselectAllItemsInBlazor","deselectInkAnnotation","enableSignaturePropertiesTools","isToolbarInkClicked","drawInk","isNewFreeTextAnnot","isNewAddedAnnot","FreeTextElement","enableFreeTextAnnotationPropertiesTools","isToolbarSignClicked","showSignatureDialog","fireAnnotationUnSelect","isTextMarkupAnnotationMode","updateFontFamily","updateFontFamilyIcon","isActive","isInitialLoading","adjustViewer","enablePropertiesTool","isAnnotationToolbarVisible","isPanMode","toolBarInitialStatus","magnification","fitType","fitToPage","enableAnnotationAddTools","isTextMarkupAnnotationModule","showHighlightTool","showUnderlineTool","showStrikethroughTool","showCalibrateAnnotationTool","showInkAnnotationTool","showSeparator","toolbarItems","showStickyNoteToolInMobile","showInkTool","showSeparatorInMobile","isShow","startIndex","endIndex","show","isHide","toolbar_1","propertyToolbarElement","hideItem","isAdjust","splitterElement","toolbarContainer","annotationToolbarHeight","annotationToolbarContainer","getToolbarHeight","sideBarToolbar","sideBarContentContainer","commentsContainer","commentPanelContainer","commentPanelResizer","newToolbarHeight","getNavigationToolbarHeight","updateContentContainerHeight","sideBarClientRect","window","getComputedStyle","clearShapeMode","clearMeasureMode","drawTextMarkupAnnotations","HighlightElement","UnderlineElement","StrikethroughElement","_dotnetInstance","invokeMethodAsync","clearTextMarkupMode","isBlazorPlatform","SelectToolElement","PanElement","enableTextSelection","initiateTextSelectMode","deleteIconCicked","findCurrentAnnotation","annotationSettings","isLock","checkAllowedInteractions","blazorUIAdaptor","EnableDeleteOption","checkAnnotationPropertiesChange","isPropertiesChanges","enableShapeLabel","enableAnnotationPropertiesTool","enableStampAnnotationPropertiesTools","enableTextMarkupAnnotation","enableShapeAnnotation","enableStampAnnotations","enableMeasureAnnotation","isCalibrateAnnotationModule","enableFreeText","enableHandwrittenSignature","enableInkAnnotation","isAnnotationButtonsEnabled","isButtonsEnabled","enableTextMarkupAddTools","updateAnnnotationPropertyItems","getColorHexValue","colorString","toLowerCase","getValue","colorpick","setProperties","resetToolbar","isAnnotationToolbarOpen","enableAnnotationToolbar","refreshOverflow","isShapeAnnotationModule","clear","destroyComponent","componentElement","activeElem","destroyDependentComponent","component","error","viewerHeight","afterAnnotationToolbarCreationInBlazor","addClassToToolbarInBlazor","spanElement","handleHighlightInBlazor","handleUnderlineInBlazor","handleStrikethroughInBlazor","AnnotationSliderOpened","DropDownOpened","colorElementBounds","sidebarElement","sideBarElementWidth","clientWidth"],"sources":["/Users/saleem/Desktop/KClient/Web App/Ver_3.6/User Interface/website_Source files/node_modules/@syncfusion/ej2-pdfviewer/src/pdfviewer/toolbar/annotation-toolbar.js"],"sourcesContent":["/* eslint-disable */\nimport { createElement, Browser, isBlazor, isNullOrUndefined, closest, initializeCSPTemplate } from '@syncfusion/ej2-base';\nimport { Toolbar as Tool, Menu } from '@syncfusion/ej2-navigations';\n// eslint-disable-next-line max-len\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\nimport { ColorPicker, Slider } from '@syncfusion/ej2-inputs';\nimport { cloneObject } from '../drawing/drawing-util';\nimport { ComboBox } from '@syncfusion/ej2-dropdowns';\nimport { Query } from '@syncfusion/ej2-data';\nimport { DynamicStampItem, SignStampItem, StandardBusinessStampItem } from '../base/types';\n/**\n * @hidden\n */\nvar AnnotationToolbar = /** @class */ (function () {\n    function AnnotationToolbar(viewer, viewerBase, toolbar) {\n        var _this = this;\n        this.toolbarBorderHeight = 1;\n        /**\n         * @private\n         */\n        this.isToolbarHidden = false;\n        /**\n         * @private\n         */\n        this.isMobileAnnotEnabled = false;\n        this.isHighlightEnabled = false;\n        this.isUnderlineEnabled = false;\n        this.isStrikethroughEnabled = false;\n        this.isHighlightBtnVisible = true;\n        this.isCommentBtnVisible = true;\n        this.isUnderlineBtnVisible = true;\n        this.isStrikethroughBtnVisible = true;\n        this.isColorToolVisible = true;\n        this.isOpacityToolVisible = true;\n        this.isDeleteAnnotationToolVisible = true;\n        this.isCurrentAnnotationOpacitySet = false;\n        this.isStampBtnVisible = false;\n        this.isShapeBtnVisible = false;\n        this.isSignatureBtnVisible = false;\n        this.isInkBtnVisible = false;\n        this.isFontFamilyToolVisible = false;\n        this.isFontSizeToolVisible = false;\n        this.isFontAlignToolVisible = false;\n        this.isFontColorToolVisible = false;\n        this.isFontStylesToolVisible = false;\n        this.isCommentPanelBtnVisible = false;\n        this.isFreeTextBtnVisible = false;\n        this.isCalibrateBtnVisible = false;\n        this.isStrokeColorToolVisible = false;\n        this.isThicknessToolVisible = false;\n        this.stampMenu = [];\n        this.stampParentID = '';\n        /**\n         * @private\n         */\n        this.inkAnnotationSelected = false;\n        /**\n         * @private\n         */\n        this.openSignaturePopup = false;\n        this.isSavedSignatureClicked = false;\n        this.saveSignatureCount = 0;\n        this.saveInitialCount = 0;\n        /**\n         * @private\n         */\n        this.isToolbarCreated = false;\n        // eslint-disable-next-line\n        this.addStampImage = function (args) {\n            // eslint-disable-next-line\n            var proxy = _this;\n            // eslint-disable-next-line\n            var upoadedFiles = args.target.files;\n            if (args.target.files[0] !== null) {\n                var uploadedFile = upoadedFiles[0];\n                _this.pdfViewer.annotationModule.stampAnnotationModule.customStampName = uploadedFile.name.split('.')[0];\n                if (uploadedFile.type.split('/')[0] === 'image') {\n                    var reader = new FileReader();\n                    // eslint-disable-next-line\n                    reader.onload = function (e) {\n                        var uploadedFileUrl = e.currentTarget.result;\n                        proxy.pdfViewer.annotation.stampAnnotationModule.isStampAddMode = true;\n                        proxy.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected = true;\n                        proxy.pdfViewerBase.stampAdded = true;\n                        _this.pdfViewer.annotationModule.stampAnnotationModule.createCustomStampAnnotation(uploadedFileUrl);\n                        proxy.pdfViewerBase.stampAdded = false;\n                    };\n                    reader.readAsDataURL(uploadedFile);\n                }\n            }\n            args.target.value = '';\n            args.currentTarget.value = '';\n        };\n        this.popupPosition = function (colorElement, buttonElement) {\n            if (colorElement && colorElement.element) {\n                var buttonBounds = buttonElement.getBoundingClientRect();\n                var elements = colorElement.element.getElementsByClassName(\"e-container e-color-palette\")[0].getElementsByClassName(\"e-palette\")[0].getBoundingClientRect();\n                var mainContainerBounds = this.pdfViewerBase.mainContainer.getBoundingClientRect();\n                if (elements.left + elements.width > mainContainerBounds.width) {\n                    colorElement.element.parentElement.style.left = (elements.left - elements.width) + buttonBounds.width + 'px';\n                }\n            }\n        };\n        this.onShapeToolbarClicked = function (args) {\n            var elementId = _this.pdfViewer.element.id;\n            var shapeAnnotationModule = _this.pdfViewer.annotation.shapeAnnotationModule;\n            if (!Browser.isDevice) {\n                _this.deselectAllItems();\n                _this.resetFreeTextAnnot();\n            }\n            else {\n                // eslint:disable-next-line\n                var element = args.originalEvent.target;\n                _this.pdfViewer.toolbarModule.selectItem(element.parentElement);\n            }\n            switch (args.originalEvent.target.id) {\n                case elementId + '_shape_line':\n                case elementId + '_shape_lineIcon':\n                    shapeAnnotationModule.setAnnotationType('Line');\n                    _this.onShapeDrawSelection(true);\n                    _this.updateColorInIcon(_this.colorDropDownElement, shapeAnnotationModule.lineFillColor);\n                    _this.updateColorInIcon(_this.strokeDropDownElement, shapeAnnotationModule.lineStrokeColor);\n                    _this.handleShapeTool(elementId + '_shape_line');\n                    break;\n                case elementId + '_shape_arrow':\n                case elementId + '_shape_arrowIcon':\n                    shapeAnnotationModule.setAnnotationType('Arrow');\n                    _this.onShapeDrawSelection(true);\n                    _this.updateColorInIcon(_this.colorDropDownElement, shapeAnnotationModule.arrowFillColor);\n                    _this.updateColorInIcon(_this.strokeDropDownElement, shapeAnnotationModule.arrowStrokeColor);\n                    _this.handleShapeTool(elementId + '_shape_arrow');\n                    break;\n                case elementId + '_shape_rectangle':\n                case elementId + '_shape_rectangleIcon':\n                    shapeAnnotationModule.setAnnotationType('Rectangle');\n                    _this.onShapeDrawSelection(true);\n                    _this.updateColorInIcon(_this.colorDropDownElement, shapeAnnotationModule.rectangleFillColor);\n                    _this.updateColorInIcon(_this.strokeDropDownElement, shapeAnnotationModule.rectangleStrokeColor);\n                    _this.handleShapeTool(elementId + '_shape_rectangle');\n                    break;\n                case elementId + '_shape_circle':\n                case elementId + '_shape_circleIcon':\n                    shapeAnnotationModule.setAnnotationType('Circle');\n                    _this.onShapeDrawSelection(true);\n                    _this.updateColorInIcon(_this.colorDropDownElement, shapeAnnotationModule.circleFillColor);\n                    _this.updateColorInIcon(_this.strokeDropDownElement, shapeAnnotationModule.circleStrokeColor);\n                    _this.handleShapeTool(elementId + '_shape_circle');\n                    break;\n                case elementId + '_shape_pentagon':\n                case elementId + '_shape_pentagonIcon':\n                    shapeAnnotationModule.setAnnotationType('Polygon');\n                    _this.onShapeDrawSelection(true);\n                    _this.updateColorInIcon(_this.colorDropDownElement, shapeAnnotationModule.polygonFillColor);\n                    _this.updateColorInIcon(_this.strokeDropDownElement, shapeAnnotationModule.polygonStrokeColor);\n                    _this.handleShapeTool(elementId + '_shape_pentagon');\n                    break;\n            }\n            // this.pdfViewer.clearSelection();\n        };\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = viewerBase;\n        this.primaryToolbar = toolbar;\n    }\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.initializeAnnotationToolbar = function () {\n        var _this = this;\n        // eslint-disable-next-line max-len\n        this.toolbarElement = createElement('div', { id: this.pdfViewer.element.id + '_annotation_toolbar', className: 'e-pv-annotation-toolbar' });\n        this.pdfViewerBase.viewerMainContainer.appendChild(this.toolbarElement);\n        this.toolbar = new Tool({\n            width: '', height: '', overflowMode: 'Popup', cssClass: 'e-pv-toolbar-scroll',\n            items: this.createToolbarItems(), clicked: this.onToolbarClicked.bind(this),\n            created: function () {\n                _this.createDropDowns();\n            }\n        });\n        this.toolbar.isStringTemplate = true;\n        if (this.pdfViewer.enableRtl) {\n            this.toolbar.enableRtl = true;\n        }\n        this.toolbar.appendTo(this.toolbarElement);\n        this.afterToolbarCreation();\n        this.createStampContainer();\n        this.createSignContainer();\n        this.applyAnnotationToolbarSettings();\n        this.updateToolbarItems();\n        this.showAnnotationToolbar(null, true);\n        this.toolbarElement.setAttribute('aria-label', \"Annotation Toolbar\");\n    };\n    AnnotationToolbar.prototype.createMobileAnnotationToolbar = function (isEnable, isPath) {\n        var _this = this;\n        if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n            if (this.toolbarElement == null && isEnable) {\n                this.isMobileAnnotEnabled = true;\n                // eslint-disable-next-line max-len\n                this.toolbarElement = createElement('div', { id: this.pdfViewer.element.id + '_annotation_toolbar', className: 'e-pv-annotation-toolbar' });\n                this.pdfViewerBase.viewerMainContainer.insertBefore(this.toolbarElement, this.pdfViewerBase.viewerContainer);\n                this.toolbar = new Tool({\n                    width: '', height: '', overflowMode: 'Popup',\n                    items: this.createMobileToolbarItems(isPath), clicked: this.onToolbarClicked.bind(this),\n                    created: function () {\n                        _this.createDropDowns(isPath);\n                    }\n                });\n                this.toolbar.isStringTemplate = true;\n                if (this.pdfViewer.enableRtl) {\n                    this.toolbar.enableRtl = true;\n                }\n                this.pdfViewerBase.navigationPane.goBackToToolbar();\n                this.pdfViewer.toolbarModule.showToolbar(false);\n                this.toolbar.appendTo(this.toolbarElement);\n                this.deleteItem = this.pdfViewerBase.getElement('_annotation_delete');\n                this.deleteItem.firstElementChild.id = this.pdfViewer.element.id + '_annotation_delete';\n            }\n            else if (this.toolbarElement != null) {\n                if (isEnable) {\n                    this.isMobileAnnotEnabled = true;\n                    this.pdfViewerBase.navigationPane.goBackToToolbar();\n                    this.pdfViewer.toolbarModule.showToolbar(false);\n                    this.toolbarElement.style.display = 'block';\n                }\n                else if (!isEnable) {\n                    this.isMobileAnnotEnabled = false;\n                    this.pdfViewer.toolbarModule.showToolbar(true);\n                    this.hideMobileAnnotationToolbar();\n                }\n            }\n        }\n        else {\n            this.isMobileAnnotEnabled = true;\n        }\n    };\n    AnnotationToolbar.prototype.hideMobileAnnotationToolbar = function () {\n        if (this.toolbarElement != null) {\n            if (this.pdfViewer.selectedItems.annotations.length > 0 || this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                if (this.propertyToolbar && this.propertyToolbar.element.children.length > 0) {\n                    this.propertyToolbar.element.style.display = 'block';\n                    this.toolbarCreated = true;\n                }\n            }\n            else {\n                if (this.toolbar.element.children.length > 0) {\n                    this.toolbarCreated = true;\n                }\n                else {\n                    this.toolbarCreated = false;\n                }\n                if (this.propertyToolbar && this.propertyToolbar.element.style.display !== 'none') {\n                    this.propertyToolbar.element.style.display = 'none';\n                    if (!this.toolbarCreated) {\n                        var editIcon = document.getElementById(this.pdfViewer.element.id + '_annotationIcon');\n                        if (editIcon && editIcon.parentElement.classList.contains('e-pv-select')) {\n                            this.createAnnotationToolbarForMobile();\n                        }\n                    }\n                }\n            }\n            if (this.toolbarElement.children.length > 0) {\n                this.toolbarElement.style.display = 'block';\n            }\n            this.adjustMobileViewer();\n        }\n        else if (this.toolbarCreated && this.propertyToolbar && this.propertyToolbar.element.children.length > 0) {\n            this.propertyToolbar.element.style.display = 'none';\n            this.adjustMobileViewer();\n            this.toolbarCreated = false;\n        }\n    };\n    AnnotationToolbar.prototype.FreeTextForMobile = function () {\n        var _this = this;\n        this.hideExistingTool();\n        // eslint-disable-next-line max-len\n        this.freetextToolbarElement = createElement('div', { id: this.pdfViewer.element.id + '_freeTextToolbar', className: 'e-pv-mobile-annotation-toolbar', styles: 'bottom: 0px; position: absolute; width: 100%; float: left' });\n        this.pdfViewerBase.viewerMainContainer.appendChild(this.freetextToolbarElement);\n        // eslint-disable-next-line max-len\n        var colorTemplate = this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate('span', '_annotation_color', 'e-pv-annotation-color-container');\n        // eslint-disable-next-line max-len\n        var strokeTemplate = this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate('span', '_annotation_stroke', 'e-pv-annotation-stroke-container');\n        var thicknessTemplate = this.getTemplate('span', '_annotation_thickness', 'e-pv-annotation-thickness-container');\n        var opacityTemplate = this.getTemplate('span', '_annotation_opacity', 'e-pv-annotation-opacity-container');\n        var fontFamilyTemplate = this.getTemplate('input', '_annotation_fontname', 'e-pv-annotation-fontname-container');\n        var fontSizeTemplate = this.getTemplate('input', '_annotation_fontsize', 'e-pv-annotation-fontsize-container');\n        var textColorTemplate = this.getTemplate('span', '_annotation_textcolor', 'e-pv-annotation-textcolor-container');\n        var alignmentTemplate = this.getTemplate('span', '_annotation_textalign', 'e-pv-annotation-textalign-container');\n        // eslint-disable-next-line max-len\n        var textPropertiesTemplate = this.getTemplate('span', '_annotation_textproperties', 'e-pv-annotation-textprop-container');\n        // eslint:disable-next-line\n        var items;\n        items = [\n            // eslint-disable-next-line max-len\n            { prefixIcon: 'e-pv-backward-icon e-pv-icon', tooltipText: this.pdfViewer.localeObj.getConstant('Go Back'), id: this.pdfViewer.element.id + '_backward', click: this.goBackToToolbar.bind(this) },\n            { type: 'Separator', align: 'Left', cssClass: 'e-pv-hightlight-separator-container' },\n            { template: fontFamilyTemplate },\n            { template: fontSizeTemplate },\n            { template: textColorTemplate },\n            { template: alignmentTemplate },\n            { template: textPropertiesTemplate },\n            { template: colorTemplate },\n            { template: strokeTemplate },\n            { template: thicknessTemplate },\n            { template: opacityTemplate },\n        ];\n        this.toolbar = new Tool({\n            items: items, width: '', height: '', overflowMode: 'Scrollable', created: function () {\n                // eslint-disable-next-line max-len\n                _this.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(_this.pdfViewer.element.id + '_annotation_freeTextEdit');\n            }\n        });\n        this.toolbar.appendTo(this.freetextToolbarElement);\n        this.showFreeTextPropertiesTool();\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.createPropertyTools = function (shapeType) {\n        var _this = this;\n        if (shapeType !== \"\") {\n            if (this.propertyToolbar) {\n                this.propertyToolbar.destroy();\n            }\n            if (this.toolbar) {\n                this.toolbar.destroy();\n            }\n            // eslint-disable-next-line max-len\n            var shapeToolbarElement = void 0;\n            shapeToolbarElement = document.getElementById(this.pdfViewer.element.id + '_propertyToolbar');\n            if (shapeToolbarElement) {\n                shapeToolbarElement.parentElement.removeChild(shapeToolbarElement);\n            }\n            // eslint-disable-next-line max-len\n            shapeToolbarElement = createElement('div', { id: this.pdfViewer.element.id + '_propertyToolbar', className: 'e-pv-mobile-annotation-toolbar', styles: 'bottom: 0px; position: absolute; width: 100%; float: left' });\n            this.pdfViewerBase.viewerMainContainer.appendChild(shapeToolbarElement);\n            var id_1;\n            var propertyToolbar = new Tool({\n                // eslint-disable-next-line max-len\n                items: this.createPropertyToolbarForMobile(shapeType), width: '', height: '', overflowMode: 'Scrollable',\n                created: function () {\n                    if (_this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                        id_1 = _this.pdfViewer.element.id + '_underlineIcon';\n                    }\n                    else if (_this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'FreeText') {\n                        id_1 = _this.pdfViewer.element.id + '_annotation_freeTextEdit';\n                        // eslint-disable-next-line max-len\n                    }\n                    else if (_this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Stamp' || _this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'StickyNotes' || _this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Image') {\n                        id_1 = _this.pdfViewer.element.id + '_annotation_stamp';\n                        // eslint-disable-next-line max-len\n                    }\n                    else if (_this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'HandWrittenSignature' || _this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureText') {\n                        id_1 = _this.pdfViewer.element.id + '_annotation_handwrittenSign';\n                    }\n                    else if (_this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureImage') {\n                        id_1 = _this.pdfViewer.element.id + '_annotation_handwrittenImage';\n                    }\n                    else if (_this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Ink' || _this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Path') {\n                        id_1 = _this.pdfViewer.element.id + '_annotation_inkIcon';\n                    }\n                    else if (shapeType === 'Highlight' || shapeType === 'Underline' || shapeType === 'Strikethrough') {\n                        id_1 = _this.pdfViewer.element.id + '_highlightIcon';\n                    }\n                    else {\n                        id_1 = _this.pdfViewer.element.id + '_annotation_shapesIcon';\n                    }\n                    _this.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(id_1);\n                }\n            });\n            propertyToolbar.isStringTemplate = true;\n            propertyToolbar.appendTo(shapeToolbarElement);\n            if (!this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Line') {\n                    this.enableItems(this.colorDropDownElement.parentElement, false);\n                }\n                if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'HandWrittenSignature') {\n                    var commentIcon = document.getElementById(this.pdfViewer.element.id + '_annotation_commentPanel');\n                    this.enableItems(commentIcon.parentElement, false);\n                }\n            }\n            this.showPropertyTool(propertyToolbar, id_1);\n        }\n    };\n    AnnotationToolbar.prototype.showPropertyTool = function (existingTool, id) {\n        if (this.toolbar) {\n            this.toolbar.destroy();\n        }\n        this.propertyToolbar = existingTool;\n        this.applyProperiesToolSettings(id);\n        //this.propertyToolbar.element.style.display = 'block';\n        if (this.pdfViewer.selectedItems.annotations[0]) {\n            // eslint:disable-next-line\n            var selectedAnnotation = this.pdfViewer.selectedItems.annotations[0];\n            // eslint-disable-next-line max-len\n            if (selectedAnnotation.shapeAnnotationType !== 'SignatureText' && selectedAnnotation.shapeAnnotationType !== 'HandWrittenSignature' && selectedAnnotation.shapeAnnotationType !== 'Stamp' && selectedAnnotation.shapeAnnotationType !== 'Image' && selectedAnnotation.shapeAnnotationType !== 'Ink' && selectedAnnotation.shapeAnnotationType !== 'Path' && selectedAnnotation.shapeAnnotationType !== 'StickyNotes') {\n                this.updateColorInIcon(this.colorDropDownElement, this.pdfViewer.selectedItems.annotations[0].fillColor);\n                this.updateColorInIcon(this.strokeDropDownElement, this.pdfViewer.selectedItems.annotations[0].strokeColor);\n                if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'FreeText') {\n                    // eslint:disable-next-line\n                    var fontFamily = this.fontFamilyElement;\n                    fontFamily.ej2_instances[0].value = this.pdfViewer.selectedItems.annotations[0].fontFamily;\n                    // eslint:disable-next-line\n                    var fontColor = this.fontColorElement;\n                    fontColor.children[0].style.borderBottomColor = this.pdfViewer.selectedItems.annotations[0].fontColor;\n                    this.pdfViewer.annotation.modifyTextAlignment(this.pdfViewer.selectedItems.annotations[0].textAlign);\n                    this.updateTextAlignInIcon(this.pdfViewer.selectedItems.annotations[0].textAlign);\n                }\n            }\n            else {\n                if (this.strokeDropDownElement) {\n                    this.updateColorInIcon(this.strokeDropDownElement, this.pdfViewer.selectedItems.annotations[0].strokeColor);\n                }\n            }\n        }\n        this.toolbarCreated = true;\n        this.adjustMobileViewer();\n    };\n    AnnotationToolbar.prototype.stampToolMobileForMobile = function (args) {\n        var _this = this;\n        this.hideExistingTool();\n        if (this.stampToolbarElement) {\n            this.stampToolbarElement.parentElement.removeChild(this.stampToolbarElement);\n        }\n        // eslint-disable-next-line max-len\n        this.stampToolbarElement = createElement('div', { id: this.pdfViewer.element.id + '_stampToolbar', className: 'e-pv-mobile-annotation-toolbar', styles: 'bottom: 0px; position: absolute; width: 100%; float: left' });\n        this.pdfViewerBase.viewerMainContainer.appendChild(this.stampToolbarElement);\n        // eslint-disable-next-line max-len\n        this.toolbar = new Tool({\n            items: this.createStampToolbarItemsForMobile(), width: '', height: '', overflowMode: 'Scrollable', clicked: this.onShapeToolbarClicked.bind(this),\n            created: function () {\n                _this.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(args);\n            }\n        });\n        this.toolbar.isStringTemplate = true;\n        this.toolbar.appendTo(this.stampToolbarElement);\n        this.showStampPropertiesTool();\n        //this.afterShapeToolbarCreationForMobile();\n    };\n    AnnotationToolbar.prototype.shapeToolMobile = function (args) {\n        var _this = this;\n        this.hideExistingTool();\n        if (this.shapeToolbarElement) {\n            this.shapeToolbarElement.parentElement.removeChild(this.shapeToolbarElement);\n        }\n        // eslint-disable-next-line max-len\n        this.shapeToolbarElement = createElement('div', { id: this.pdfViewer.element.id + '_shapeToolbar', className: 'e-pv-mobile-annotation-toolbar', styles: 'bottom: 0px; position: absolute; width: 100%; float: left' });\n        this.pdfViewerBase.viewerMainContainer.appendChild(this.shapeToolbarElement);\n        // eslint-disable-next-line max-len\n        this.toolbar = new Tool({\n            items: this.createShapeToolbarItemsForMobile(), width: '', height: '', overflowMode: 'Scrollable', clicked: this.onShapeToolbarClicked.bind(this),\n            created: function () {\n                _this.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(args.originalEvent.target.id);\n            }\n        });\n        this.toolbar.isStringTemplate = true;\n        this.toolbar.appendTo(this.shapeToolbarElement);\n        this.afterShapeToolbarCreationForMobile();\n        this.showShapeTool();\n    };\n    AnnotationToolbar.prototype.calibrateToolMobile = function (args) {\n        var _this = this;\n        this.hideExistingTool();\n        if (this.calibrateToolbarElement) {\n            this.calibrateToolbarElement.parentElement.removeChild(this.calibrateToolbarElement);\n        }\n        // eslint-disable-next-line max-len\n        this.calibrateToolbarElement = createElement('div', { id: this.pdfViewer.element.id + '_calibrateToolbar', className: 'e-pv-mobile-annotation-toolbar', styles: 'bottom: 0px; position: absolute; width: 100%; float: left' });\n        this.pdfViewerBase.viewerMainContainer.appendChild(this.calibrateToolbarElement);\n        // eslint-disable-next-line max-len\n        this.toolbar = new Tool({\n            items: this.createCalibrateToolbarItemsForMobile(), width: '', height: '', overflowMode: 'Scrollable', clicked: this.onCalibrateToolbarClicked.bind(this),\n            created: function () {\n                _this.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(args.originalEvent.target.id);\n            }\n        });\n        this.toolbar.isStringTemplate = true;\n        this.toolbar.appendTo(this.calibrateToolbarElement);\n        this.afterCalibrateToolbarCreationForMobile();\n        this.showShapeTool();\n    };\n    AnnotationToolbar.prototype.textMarkupForMobile = function (args) {\n        var _this = this;\n        this.hideExistingTool();\n        if (this.textMarkupToolbarElement) {\n            this.textMarkupToolbarElement.parentElement.removeChild(this.textMarkupToolbarElement);\n        }\n        // eslint-disable-next-line max-len\n        this.textMarkupToolbarElement = createElement('div', { id: this.pdfViewer.element.id + '_mobileAnnotationToolbar', className: 'e-pv-mobile-annotation-toolbar', styles: 'bottom: 0px; position: absolute; width: 100%; float: left' });\n        this.pdfViewerBase.viewerMainContainer.appendChild(this.textMarkupToolbarElement);\n        // eslint-disable-next-line max-len\n        var colorTemplate = this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate('span', '_annotation_color', 'e-pv-annotation-color-container');\n        var opacityTemplate = this.getTemplate('span', '_annotation_opacity', 'e-pv-annotation-opacity-container');\n        // eslint:disable-next-line\n        var items;\n        items = [\n            // eslint-disable-next-line max-len\n            { prefixIcon: 'e-pv-backward-icon e-pv-icon', tooltipText: this.pdfViewer.localeObj.getConstant('Go Back'), id: this.pdfViewer.element.id + '_backward', click: this.goBackToToolbar.bind(this) },\n            { type: 'Separator', align: 'Left', cssClass: 'e-pv-hightlight-separator-container' },\n            { template: colorTemplate, align: 'left' },\n            { template: opacityTemplate, align: 'left' }\n        ];\n        this.propertyToolbar = new Tool({\n            items: items, width: '', height: '', overflowMode: 'Scrollable',\n            created: function () {\n                _this.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(args.originalEvent.target.id);\n            }\n        });\n        this.propertyToolbar.isStringTemplate = true;\n        this.propertyToolbar.appendTo(this.textMarkupToolbarElement);\n        this.showTextMarkupPropertiesTool();\n    };\n    AnnotationToolbar.prototype.showShapeTool = function () {\n        // eslint-disable-next-line\n        var annotationToolbarItems = this.pdfViewer.toolbarSettings.annotationToolbarItems;\n        if (annotationToolbarItems) {\n            if (annotationToolbarItems.indexOf('ColorEditTool') !== -1) {\n                this.showColorEditTool(true, 7, 7);\n            }\n            else {\n                this.showColorEditTool(false, 7, 7);\n            }\n            if (annotationToolbarItems.indexOf('StrokeColorEditTool') !== -1) {\n                this.showStrokeColorEditTool(true, 8, 8);\n            }\n            else {\n                this.showStrokeColorEditTool(false, 8, 8);\n            }\n            if (annotationToolbarItems.indexOf('ThicknessEditTool') !== -1) {\n                this.showThicknessEditTool(true, 9, 9);\n            }\n            else {\n                this.showThicknessEditTool(false, 9, 9);\n            }\n            if (annotationToolbarItems.indexOf('OpacityEditTool') !== -1) {\n                this.showOpacityEditTool(true, 10, 10);\n            }\n            else {\n                this.showOpacityEditTool(false, 10, 10);\n            }\n        }\n    };\n    AnnotationToolbar.prototype.signatureInkForMobile = function () {\n        var _this = this;\n        this.hideExistingTool();\n        if (this.signatureInkToolbarElement) {\n            this.signatureInkToolbarElement.parentElement.removeChild(this.signatureInkToolbarElement);\n        }\n        // eslint-disable-next-line max-len\n        this.signatureInkToolbarElement = createElement('div', { id: this.pdfViewer.element.id + '_mobileAnnotationToolbar', className: 'e-pv-mobile-annotation-toolbar', styles: 'bottom: 0px; position: absolute; width: 100%; float: left' });\n        this.pdfViewerBase.viewerMainContainer.appendChild(this.signatureInkToolbarElement);\n        var opacityTemplate = this.getTemplate('span', '_annotation_opacity', 'e-pv-annotation-opacity-container');\n        // eslint-disable-next-line max-len\n        var strokeTemplate = this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate('span', '_annotation_stroke', 'e-pv-annotation-stroke-container');\n        var thicknessTemplate = this.getTemplate('span', '_annotation_thickness', 'e-pv-annotation-thickness-container');\n        // eslint:disable-next-line\n        var items;\n        items = [\n            // eslint-disable-next-line max-len\n            { prefixIcon: 'e-pv-backward-icon e-pv-icon', tooltipText: this.pdfViewer.localeObj.getConstant('Go Back'), id: this.pdfViewer.element.id + '_backward', click: this.goBackToToolbar.bind(this) },\n            { template: opacityTemplate, align: 'left' },\n            { template: strokeTemplate, aign: 'left' },\n            { template: thicknessTemplate, align: 'left' }\n        ];\n        this.toolbar = new Tool({\n            items: items, width: '', height: '', overflowMode: 'Scrollable',\n            created: function () {\n                _this.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(_this.pdfViewer.element.id + '_annotation_inkIcon');\n            }\n        });\n        this.toolbar.isStringTemplate = true;\n        this.toolbar.appendTo(this.signatureInkToolbarElement);\n    };\n    AnnotationToolbar.prototype.hideExistingTool = function () {\n        if (this.toolbar && !this.pdfViewer.enableDesktopMode) {\n            this.toolbar.destroy();\n        }\n        if (this.propertyToolbar && !this.pdfViewer.enableDesktopMode) {\n            this.propertyToolbar.destroy();\n        }\n        var mobileAnnotationToolbar = document.getElementById(this.pdfViewer.element.id + '_mobileAnnotationToolbar');\n        if (mobileAnnotationToolbar) {\n            mobileAnnotationToolbar.style.display = 'none';\n        }\n    };\n    AnnotationToolbar.prototype.applyProperiesToolSettings = function (type) {\n        switch (type) {\n            case this.pdfViewer.element.id + '_underlineIcon':\n            case this.pdfViewer.element.id + '_highlightIcon':\n                this.showTextMarkupPropertiesTool();\n                break;\n            case this.pdfViewer.element.id + '_annotation_freeTextEdit':\n                this.showFreeTextPropertiesTool();\n                break;\n            case this.pdfViewer.element.id + '_annotation_shapesIcon':\n                this.shapePropertiesTool();\n                break;\n            case 'stampTool':\n            case this.pdfViewer.element.id + '_annotation_stamp':\n                this.showStampPropertiesTool();\n                break;\n            case this.pdfViewer.element.id + '_annotation_handwrittenSign':\n            case this.pdfViewer.element.id + '_annotation_inkIcon':\n                this.showInkPropertiesTool();\n                break;\n            case this.pdfViewer.element.id + '_annotation_handwrittenImage':\n                this.showImagePropertyTool();\n                break;\n        }\n    };\n    AnnotationToolbar.prototype.showImagePropertyTool = function () {\n        // eslint-disable-next-line\n        var annotationToolbarItems = this.pdfViewer.toolbarSettings.annotationToolbarItems;\n        if (annotationToolbarItems) {\n            if (annotationToolbarItems.indexOf('OpacityEditTool') !== -1) {\n                this.showOpacityEditTool(true, 0, 0);\n            }\n            else {\n                this.showOpacityEditTool(false, 0, 0);\n            }\n            if (annotationToolbarItems.indexOf('CommentPanelTool') !== -1) {\n                this.showCommentPanelTool(true, 1, 1);\n            }\n            else {\n                this.showCommentPanelTool(false, 1, 1);\n            }\n            if (annotationToolbarItems.indexOf('AnnotationDeleteTool') !== -1) {\n                this.showAnnotationDeleteTool(true, 2, 2);\n            }\n            else {\n                this.showAnnotationDeleteTool(false, 2, 2);\n            }\n        }\n    };\n    AnnotationToolbar.prototype.showFreeTextPropertiesTool = function () {\n        // eslint-disable-next-line\n        var annotationToolbarItems = this.pdfViewer.toolbarSettings.annotationToolbarItems;\n        if (annotationToolbarItems) {\n            if (annotationToolbarItems.indexOf('FontFamilyAnnotationTool') !== -1) {\n                this.showFontFamilyAnnotationTool(true, 2, 2);\n            }\n            else {\n                this.showFontFamilyAnnotationTool(false, 2, 2);\n            }\n            if (annotationToolbarItems.indexOf('FontSizeAnnotationTool') !== -1) {\n                this.showFontSizeAnnotationTool(true, 3, 3);\n            }\n            else {\n                this.showFontSizeAnnotationTool(false, 3, 3);\n            }\n            if (annotationToolbarItems.indexOf('FontColorAnnotationTool') !== -1) {\n                this.showFontColorAnnotationTool(true, 4, 4);\n            }\n            else {\n                this.showFontColorAnnotationTool(false, 4, 4);\n            }\n            if (annotationToolbarItems.indexOf('FontAlignAnnotationTool') !== -1) {\n                this.showFontAlignAnnotationTool(true, 5, 5);\n            }\n            else {\n                this.showFontAlignAnnotationTool(false, 5, 5);\n            }\n            if (annotationToolbarItems.indexOf('FontStylesAnnotationTool') !== -1) {\n                this.showFontStylesAnnotationTool(true, 6, 6);\n            }\n            else {\n                this.showFontStylesAnnotationTool(false, 6, 6);\n            }\n            if (annotationToolbarItems.indexOf('ColorEditTool') !== -1) {\n                this.showColorEditTool(true, 7, 7);\n            }\n            else {\n                this.showColorEditTool(false, 7, 7);\n            }\n            if (annotationToolbarItems.indexOf('StrokeColorEditTool') !== -1) {\n                this.showStrokeColorEditTool(true, 8, 8);\n            }\n            else {\n                this.showStrokeColorEditTool(false, 8, 8);\n            }\n            if (annotationToolbarItems.indexOf('ThicknessEditTool') !== -1) {\n                this.showThicknessEditTool(true, 9, 9);\n            }\n            else {\n                this.showThicknessEditTool(false, 9, 9);\n            }\n            if (annotationToolbarItems.indexOf('OpacityEditTool') !== -1) {\n                this.showOpacityEditTool(true, 10, 10);\n            }\n            else {\n                this.showOpacityEditTool(false, 10, 10);\n            }\n            if (annotationToolbarItems.indexOf('CommentPanelTool') !== -1) {\n                this.showCommentPanelTool(true, 11, 11);\n            }\n            else {\n                this.showCommentPanelTool(false, 11, 11);\n            }\n            if (annotationToolbarItems.indexOf('AnnotationDeleteTool') !== -1) {\n                this.showAnnotationDeleteTool(true, 12, 12);\n            }\n            else {\n                this.showAnnotationDeleteTool(false, 12, 12);\n            }\n            if (annotationToolbarItems.indexOf('FreeTextAnnotationTool') !== -1) {\n                this.showFreeTextAnnotationTool(true, 0, 0);\n            }\n            else {\n                this.showFreeTextAnnotationTool(false, 0, 0);\n                this.applyHideToToolbar(false, 1, 1);\n            }\n        }\n    };\n    AnnotationToolbar.prototype.shapePropertiesTool = function () {\n        // eslint-disable-next-line\n        var annotationToolbarItems = this.pdfViewer.toolbarSettings.annotationToolbarItems;\n        if (annotationToolbarItems) {\n            if (annotationToolbarItems.indexOf('ColorEditTool') !== -1) {\n                this.showColorEditTool(true, 2, 2);\n            }\n            else {\n                this.showColorEditTool(false, 2, 2);\n            }\n            if (annotationToolbarItems.indexOf('StrokeColorEditTool') !== -1) {\n                this.showStrokeColorEditTool(true, 3, 3);\n            }\n            else {\n                this.showStrokeColorEditTool(false, 3, 3);\n            }\n            if (annotationToolbarItems.indexOf('ThicknessEditTool') !== -1) {\n                this.showThicknessEditTool(true, 4, 4);\n            }\n            else {\n                this.showThicknessEditTool(false, 4, 4);\n            }\n            if (annotationToolbarItems.indexOf('OpacityEditTool') !== -1) {\n                this.showOpacityEditTool(true, 5, 5);\n            }\n            else {\n                this.showOpacityEditTool(false, 5, 5);\n            }\n            if (annotationToolbarItems.indexOf('CommentPanelTool') !== -1) {\n                this.showCommentPanelTool(true, 6, 6);\n            }\n            else {\n                this.showCommentPanelTool(false, 6, 6);\n            }\n            if (annotationToolbarItems.indexOf('AnnotationDeleteTool') !== -1) {\n                this.showAnnotationDeleteTool(true, 7, 7);\n            }\n            else {\n                this.showAnnotationDeleteTool(false, 7, 7);\n            }\n            if (annotationToolbarItems.indexOf('ShapeTool') !== -1) {\n                this.showShapeAnnotationTool(true, 0, 0);\n            }\n            else {\n                this.showShapeAnnotationTool(false, 0, 0);\n                this.applyHideToToolbar(false, 1, 1);\n            }\n        }\n    };\n    AnnotationToolbar.prototype.showStampPropertiesTool = function () {\n        // eslint-disable-next-line\n        var annotationToolbarItems = this.pdfViewer.toolbarSettings.annotationToolbarItems;\n        if (annotationToolbarItems) {\n            if (annotationToolbarItems.indexOf('OpacityEditTool') !== -1) {\n                this.showOpacityEditTool(true, 2, 2);\n            }\n            else {\n                this.showOpacityEditTool(false, 2, 2);\n            }\n            if (annotationToolbarItems.indexOf('CommentPanelTool') !== -1) {\n                this.showCommentPanelTool(true, 3, 3);\n            }\n            else {\n                this.showCommentPanelTool(false, 3, 3);\n            }\n            if (annotationToolbarItems.indexOf('AnnotationDeleteTool') !== -1) {\n                this.showAnnotationDeleteTool(true, 4, 4);\n            }\n            else {\n                this.showAnnotationDeleteTool(false, 4, 4);\n            }\n            if (annotationToolbarItems.indexOf('StampAnnotationTool') !== -1) {\n                this.showStampAnnotationTool(true, 0, 0);\n            }\n            else {\n                this.showStampAnnotationTool(false, 0, 0);\n                this.applyHideToToolbar(false, 1, 1);\n            }\n        }\n    };\n    AnnotationToolbar.prototype.showTextMarkupPropertiesTool = function () {\n        // eslint-disable-next-line\n        var annotationToolbarItems = this.pdfViewer.toolbarSettings.annotationToolbarItems;\n        if (annotationToolbarItems) {\n            if (annotationToolbarItems.indexOf('ColorEditTool') !== -1) {\n                this.showColorEditTool(true, 2, 2);\n            }\n            else {\n                this.showColorEditTool(false, 2, 2);\n            }\n            if (annotationToolbarItems.indexOf('OpacityEditTool') !== -1) {\n                this.showOpacityEditTool(true, 3, 3);\n            }\n            else {\n                this.showOpacityEditTool(false, 3, 3);\n            }\n            if (annotationToolbarItems.indexOf('CommentPanelTool') !== -1) {\n                this.showCommentPanelTool(true, 4, 4);\n            }\n            else {\n                this.showCommentPanelTool(false, 4, 4);\n            }\n            if (annotationToolbarItems.indexOf('AnnotationDeleteTool') !== -1) {\n                this.showAnnotationDeleteTool(true, 5, 5);\n            }\n            else {\n                this.showAnnotationDeleteTool(false, 5, 5);\n            }\n            if (annotationToolbarItems.includes(\"HighlightTool\") || annotationToolbarItems.includes(\"UnderlineTool\") || annotationToolbarItems.includes(\"StrikethroughTool\")) {\n                this.applyHideToToolbar(true, 0, 0);\n            }\n            else {\n                this.applyHideToToolbar(false, 0, 0);\n                this.applyHideToToolbar(false, 1, 1);\n            }\n        }\n    };\n    AnnotationToolbar.prototype.showInkPropertiesTool = function () {\n        // eslint-disable-next-line\n        var annotationToolbarItems = this.pdfViewer.toolbarSettings.annotationToolbarItems;\n        if (annotationToolbarItems) {\n            if (annotationToolbarItems.indexOf('StrokeColorEditTool') !== -1) {\n                this.showStrokeColorEditTool(true, 2, 2);\n            }\n            else {\n                this.showStrokeColorEditTool(false, 2, 2);\n            }\n            if (annotationToolbarItems.indexOf('ThicknessEditTool') !== -1) {\n                this.showThicknessEditTool(true, 3, 3);\n            }\n            else {\n                this.showThicknessEditTool(false, 3, 3);\n            }\n            if (annotationToolbarItems.indexOf('OpacityEditTool') !== -1) {\n                this.showOpacityEditTool(true, 4, 4);\n            }\n            else {\n                this.showOpacityEditTool(false, 4, 4);\n            }\n            if (annotationToolbarItems.indexOf('CommentPanelTool') !== -1) {\n                this.showCommentPanelTool(true, 5, 5);\n            }\n            else {\n                this.showCommentPanelTool(false, 5, 5);\n            }\n            if (annotationToolbarItems.indexOf('AnnotationDeleteTool') !== -1) {\n                this.showAnnotationDeleteTool(true, 6, 6);\n            }\n            else {\n                this.showAnnotationDeleteTool(false, 6, 6);\n            }\n            if (annotationToolbarItems.indexOf('HandWrittenSignatureTool') !== -1) {\n                this.showSignatureTool(true, 0, 0);\n            }\n            else {\n                this.showSignatureTool(false, 0, 0);\n                this.applyHideToToolbar(false, 1, 1);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    // eslint:disable-next-line\n    AnnotationToolbar.prototype.createAnnotationToolbarForMobile = function (id) {\n        var hideToolbar;\n        if (id) {\n            var editIcon = document.getElementById(id);\n            if (editIcon.parentElement.classList.contains('e-pv-select')) {\n                hideToolbar = true;\n                editIcon.parentElement.classList.remove('e-pv-select');\n            }\n            else {\n                hideToolbar = false;\n                this.pdfViewer.toolbarModule.selectItem(editIcon.parentElement);\n            }\n        }\n        if (hideToolbar) {\n            this.toolbarCreated = false;\n            this.adjustMobileViewer();\n            if (this.toolbar) {\n                this.toolbar.destroy();\n            }\n            if (this.propertyToolbar) {\n                this.propertyToolbar.destroy();\n            }\n            var mobileAnnotationToolbar = document.getElementById(this.pdfViewer.element.id + '_mobileAnnotationToolbar');\n            if (mobileAnnotationToolbar) {\n                mobileAnnotationToolbar.style.display = 'none';\n            }\n            return [];\n        }\n        else {\n            this.isToolbarCreated = true;\n            if (this.propertyToolbar) {\n                this.propertyToolbar.destroy();\n            }\n            if (this.toolbarElement) {\n                this.toolbarElement.parentElement.removeChild(this.toolbarElement);\n            }\n            // eslint-disable-next-line max-len\n            this.toolbarElement = createElement('div', { id: this.pdfViewer.element.id + '_mobileAnnotationToolbar', className: 'e-pv-mobile-annotation-toolbar', styles: 'bottom: 0px; position: absolute; width: 100%; float: left;' });\n            //this.toolbarElement.append(this.pdfViewerBase.viewerContainer);\n            this.pdfViewerBase.viewerMainContainer.appendChild(this.toolbarElement);\n            var stampTemplate = this.getTemplate('span', '_annotation_stamp', 'e-pv-annotation-stamp-container');\n            var signTemplate = this.getTemplate('span', '_annotation_signature', 'e-pv-annotation-handwritten-container');\n            // eslint:disable-next-line\n            var items = void 0;\n            items = [\n                // eslint-disable-next-line max-len\n                { prefixIcon: 'e-pv-comment-icon e-pv-icon', className: 'e-pv-comment-container', id: this.pdfViewer.element.id + '_comment' },\n                { type: 'Separator', align: 'Left' },\n                // eslint-disable-next-line max-len\n                { prefixIcon: 'e-pv-highlight-icon e-pv-icon', className: 'e-pv-highlight-container', id: this.pdfViewer.element.id + '_highlight' },\n                // eslint-disable-next-line max-len\n                { prefixIcon: 'e-pv-underline-icon e-pv-icon', className: 'e-pv-underline-container', id: this.pdfViewer.element.id + '_underline' },\n                // eslint-disable-next-line max-len\n                { prefixIcon: 'e-pv-strikethrough-icon e-pv-icon', className: 'e-pv-strikethrough-container', id: this.pdfViewer.element.id + '_strikethrough' },\n                { type: 'Separator', align: 'Left' },\n                // eslint-disable-next-line max-len\n                { prefixIcon: 'e-pv-annotation-shape-icon e-pv-icon', className: 'e-pv-annotation-shapes-container', id: this.pdfViewer.element.id + '_annotation_shapes' },\n                { type: 'Separator', align: 'Left' },\n                // eslint-disable-next-line max-len\n                { prefixIcon: 'e-pv-annotation-calibrate-icon e-pv-icon', className: 'e-pv-annotation-calibrate-container', id: this.pdfViewer.element.id + '_annotation_calibrate' },\n                { type: 'Separator', align: 'Left' },\n                // eslint-disable-next-line max-len\n                { prefixIcon: 'e-pv-freetext-icon e-pv-icon', className: 'e-pv-annotation-freetextedit-container', id: this.pdfViewer.element.id + '_annotation_freeTextEdit' },\n                { type: 'Separator', align: 'Left' },\n                { template: stampTemplate },\n                { type: 'Separator', align: 'Left' },\n                { template: signTemplate, align: 'Left', },\n                { type: 'Separator', align: 'Left' },\n                // eslint-disable-next-line max-len\n                { prefixIcon: 'e-pv-inkannotation-icon e-pv-icon', className: 'e-pv-annotation-ink-container', id: this.pdfViewer.element.id + '_annotation_ink', align: 'Left', },\n                { type: 'Separator', align: 'Left' },\n                // eslint-disable-next-line max-len\n                { prefixIcon: 'e-pv-comment-panel-icon e-pv-icon', className: 'e-pv-comment-panel-icon-container', id: this.pdfViewer.element.id + '_annotation_commentPanel', align: 'Right' }\n            ];\n            if (this.toolbarCreated && this.toolbar) {\n                this.toolbar.destroy();\n                this.toolbarCreated = false;\n                this.adjustMobileViewer();\n            }\n            else {\n                // eslint-disable-next-line max-len\n                this.toolbar = new Tool({ items: items, width: '', height: '', overflowMode: 'Scrollable', clicked: this.onToolbarClicked.bind(this) });\n                if (this.pdfViewer.enableRtl) {\n                    this.toolbar.enableRtl = true;\n                }\n                this.toolbar.isStringTemplate = true;\n                this.toolbar.appendTo(this.toolbarElement);\n                this.afterMobileToolbarCreation();\n                this.createStampContainer();\n                this.createSignContainer();\n                this.applyMobileAnnotationToolbarSettings();\n                this.toolbarCreated = true;\n                this.adjustMobileViewer();\n            }\n            return items;\n        }\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.adjustMobileViewer = function () {\n        var toolbarHeight;\n        if (this.toolbarElement) {\n            toolbarHeight = this.toolbarElement.clientHeight;\n        }\n        var isPrimaryTool = false;\n        if (this.toolbarElement && this.toolbarElement.children.length === 0 && this.propertyToolbar && this.propertyToolbar.element.children.length > 0) {\n            toolbarHeight = this.propertyToolbar.element.clientHeight;\n            if (this.pdfViewer.toolbarModule.toolbarElement.style.display === 'none') {\n                this.pdfViewer.toolbarModule.toolbarElement.style.display = 'block';\n            }\n        }\n        else if (this.freetextToolbarElement && this.freetextToolbarElement.children.length > 0) {\n            toolbarHeight = this.freetextToolbarElement.clientHeight;\n        }\n        else if (toolbarHeight === 0 && this.pdfViewer.toolbarModule.toolbar) {\n            toolbarHeight = this.pdfViewer.toolbarModule.toolbarElement.clientHeight;\n            isPrimaryTool = true;\n        }\n        else if (!toolbarHeight && this.propertyToolbar && this.propertyToolbar.element.children.length > 0) {\n            toolbarHeight = this.propertyToolbar.element.clientHeight;\n        }\n        if (this.pdfViewer.enableToolbar && this.toolbarCreated) {\n            // eslint-disable-next-line max-len\n            this.pdfViewerBase.viewerContainer.style.height = this.updateViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer), (toolbarHeight + toolbarHeight)) + 'px';\n        }\n        else {\n            if (!isPrimaryTool) {\n                if (this.pdfViewerBase.viewerContainer.style.height.split('%').length > 1) {\n                    this.pdfViewerBase.viewerContainer.style.height = this.resetViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer), (-toolbarHeight)) + 'px';\n                }\n                else {\n                    this.pdfViewerBase.viewerContainer.style.height = this.resetViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer), (toolbarHeight)) + 'px';\n                }\n            }\n        }\n    };\n    /**\n     * Shows /hides the toolbar in the PdfViewer\n     * @param  {boolean} enableToolbar - If set true , its show the Toolbar\n     * @returns void\n     */\n    AnnotationToolbar.prototype.showToolbar = function (enable) {\n        var toolbar = this.toolbarElement;\n        if (enable) {\n            toolbar.style.display = 'block';\n            if (Browser.isDevice && this.pdfViewer.toolbarModule && this.pdfViewer.toolbarModule.annotationToolbarModule) {\n                this.pdfViewer.toolbarModule.annotationToolbarModule.hideMobileAnnotationToolbar();\n            }\n        }\n        else {\n            toolbar.style.display = 'none';\n        }\n    };\n    // eslint-disable-next-line\n    AnnotationToolbar.prototype.createMobileToolbarItems = function (isPath) {\n        var colorTemplate = this.getTemplate('span', '_annotation_color', 'e-pv-annotation-color-container');\n        var opacityTemplate = this.getTemplate('span', '_annotation_opacity', 'e-pv-annotation-opacity-container');\n        // eslint-disable-next-line\n        var items = [];\n        items.push({ prefixIcon: 'e-pv-backward-icon e-pv-icon', tooltipText: this.pdfViewer.localeObj.getConstant('Go Back'), id: this.pdfViewer.element.id + '_backward', click: this.goBackToToolbar.bind(this) });\n        // eslint-disable-next-line max-len\n        if (!isPath) {\n            items.push({ template: colorTemplate, align: 'right' });\n            items.push({ template: opacityTemplate, align: 'right' });\n            items.push({ type: 'Separator', align: 'right' });\n        }\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-annotation-delete-icon e-pv-icon', className: 'e-pv-annotation-delete-container', id: this.pdfViewer.element.id + '_annotation_delete', align: 'right' });\n        return items;\n    };\n    AnnotationToolbar.prototype.goBackToToolbar = function () {\n        this.isMobileAnnotEnabled = false;\n        if (this.toolbarElement.children.length > 0) {\n            this.toolbarElement.style.display = 'block';\n        }\n        else {\n            this.toolbarCreated = false;\n            this.toolbar.destroy();\n            this.createAnnotationToolbarForMobile();\n        }\n        var page = this.pdfViewerBase.getSelectTextMarkupCurrentPage();\n        if (page) {\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage = null;\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearAnnotationSelection(page);\n        }\n    };\n    // eslint-disable-next-line\n    AnnotationToolbar.prototype.createToolbarItems = function () {\n        var colorTemplate = this.getTemplate('button', '_annotation_color', 'e-pv-annotation-color-container');\n        var strokeTemplate = this.getTemplate('button', '_annotation_stroke', 'e-pv-annotation-stroke-container');\n        var thicknessTemplate = this.getTemplate('button', '_annotation_thickness', 'e-pv-annotation-thickness-container');\n        var opacityTemplate = this.getTemplate('button', '_annotation_opacity', 'e-pv-annotation-opacity-container');\n        var shapesTemplate = this.getTemplate('button', '_annotation_shapes', 'e-pv-annotation-shapes-container');\n        var calibrateTemplate = this.getTemplate('button', '_annotation_calibrate', 'e-pv-annotation-calibrate-container');\n        var stampTemplate = this.getTemplate('span', '_annotation_stamp', 'e-pv-annotation-stamp-container');\n        var fontFamilyTemplate = this.getTemplate('button', '_annotation_fontname', 'e-pv-annotation-fontname-container');\n        var fontSizeTemplate = this.getTemplate('button', '_annotation_fontsize', 'e-pv-annotation-fontsize-container');\n        var textColorTemplate = this.getTemplate('button', '_annotation_textcolor', 'e-pv-annotation-textcolor-container');\n        var alignmentTemplate = this.getTemplate('button', '_annotation_textalign', 'e-pv-annotation-textalign-container');\n        var textPropertiesTemplate = this.getTemplate('button', '_annotation_textproperties', 'e-pv-annotation-textprop-container');\n        var signTemplate = this.getTemplate('button', '_annotation_signature', 'e-pv-annotation-handwritten-container');\n        // eslint-disable-next-line\n        var items = [];\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-highlight-icon e-pv-icon', className: 'e-pv-highlight-container', id: this.pdfViewer.element.id + '_highlight', align: 'Left' });\n        items.push({ prefixIcon: 'e-pv-underline-icon e-pv-icon', className: 'e-pv-underline-container', id: this.pdfViewer.element.id + '_underline', align: 'Left' });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-strikethrough-icon e-pv-icon', className: 'e-pv-strikethrough-container', id: this.pdfViewer.element.id + '_strikethrough', align: 'Left' });\n        items.push({ type: 'Separator', align: 'Left', cssClass: 'e-pv-hightlight-separator-container' });\n        items.push({ template: shapesTemplate, align: 'Left', cssClass: 'e-pv-shape-template-container' });\n        items.push({ type: 'Separator', align: 'Left', cssClass: 'e-pv-shape-separator-container' });\n        items.push({ template: calibrateTemplate, align: 'Left', cssClass: 'e-pv-calibrate-template-container' });\n        items.push({ type: 'Separator', align: 'Left', cssClass: 'e-pv-calibrate-separator-container' });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-freetext-icon e-pv-icon', className: 'e-pv-annotation-freetextedit-container', id: this.pdfViewer.element.id + '_annotation_freeTextEdit', align: 'Left' });\n        items.push({ type: 'Separator', align: 'Left', cssClass: 'e-pv-freetext-separator-container' });\n        items.push({ template: stampTemplate, align: 'Left', cssClass: 'e-pv-stamp-template-container' });\n        items.push({ type: 'Separator', align: 'Left', cssClass: 'e-pv-stamp-separator-container' });\n        // eslint-disable-next-line max-len\n        items.push({ template: signTemplate, align: 'Left', cssClass: 'e-pv-sign-template-container' });\n        items.push({ type: 'Separator', align: 'Left', cssClass: 'e-pv-sign-separator-container' });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-inkannotation-icon e-pv-icon', className: 'e-pv-annotation-ink-container', id: this.pdfViewer.element.id + '_annotation_ink', align: 'Left' });\n        items.push({ type: 'Separator', align: 'Left', cssClass: 'e-pv-ink-separator-container' });\n        items.push({ template: fontFamilyTemplate, align: 'Left', cssClass: 'e-pv-fontfamily-container' });\n        items.push({ template: fontSizeTemplate, align: 'Left', cssClass: 'e-pv-fontsize-container' });\n        items.push({ template: textColorTemplate, align: 'Left', cssClass: 'e-pv-text-color-container' });\n        items.push({ template: alignmentTemplate, align: 'Left', cssClass: 'e-pv-alignment-container' });\n        items.push({ template: textPropertiesTemplate, align: 'Left', cssClass: 'e-pv-text-properties-container' });\n        items.push({ type: 'Separator', align: 'Left', cssClass: 'e-pv-text-separator-container' });\n        items.push({ template: colorTemplate, align: 'Left', cssClass: 'e-pv-color-template-container' });\n        items.push({ template: strokeTemplate, align: 'Left', cssClass: 'e-pv-stroke-template-container' });\n        items.push({ template: thicknessTemplate, align: 'Left', cssClass: 'e-pv-thickness-template-container' });\n        items.push({ template: opacityTemplate, align: 'Left', cssClass: 'e-pv-opacity-template-container' });\n        items.push({ type: 'Separator', align: 'Left', cssClass: 'e-pv-opacity-separator-container' });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-annotation-delete-icon e-pv-icon', className: 'e-pv-annotation-delete-container', id: this.pdfViewer.element.id + '_annotation_delete', align: 'Left' });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-comment-panel-icon e-pv-icon', className: 'e-pv-comment-panel-icon-container', id: this.pdfViewer.element.id + '_annotation_commentPanel', align: 'Right' });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-annotation-tools-close-icon e-pv-icon', className: 'e-pv-annotation-tools-close-container', id: this.pdfViewer.element.id + '_annotation_close', align: 'Right' });\n        return items;\n    };\n    AnnotationToolbar.prototype.createSignContainer = function () {\n        var _this = this;\n        this.handWrittenSignatureItem = this.pdfViewerBase.getElement('_annotation_signature');\n        // eslint-disable-next-line max-len\n        this.primaryToolbar.createTooltip(this.pdfViewerBase.getElement('_annotation_signature'), this.pdfViewer.localeObj.getConstant('SignatureFieldDialogHeaderText'));\n        this.handWrittenSignatureItem.setAttribute('aria-label', this.pdfViewer.localeObj.getConstant('SignatureFieldDialogHeaderText'));\n        // eslint-disable-next-line\n        var proxy = this;\n        var items = [];\n        if (this.pdfViewer.handWrittenSignatureSettings.signatureItem.length === 0 || this.pdfViewer.handWrittenSignatureSettings.signatureItem.length == 2) {\n            items = [\n                {\n                    text: 'ADD SIGNATURE'\n                },\n                {\n                    separator: true\n                },\n                {\n                    text: 'ADD INITIAL'\n                }\n            ];\n        }\n        else {\n            if (this.pdfViewer.handWrittenSignatureSettings.signatureItem[0] === 'Signature') {\n                items = [\n                    {\n                        text: 'ADD SIGNATURE'\n                    }\n                ];\n            }\n            else {\n                items = [\n                    {\n                        text: 'ADD INITIAL'\n                    }\n                ];\n            }\n        }\n        var saveOptions = {\n            items: items,\n            iconCss: 'e-pv-handwritten-icon e-pv-icon',\n            cssClass: 'e-pv-handwritten-popup',\n            open: function (args) {\n                proxy.openSignature();\n            },\n            beforeItemRender: function (args) {\n                _this.pdfViewer.clearSelection(_this.pdfViewerBase.currentPageNumber - 1);\n                if (args.element && args.element.className.indexOf(\"e-separator\") !== -1) {\n                    args.element.style.margin = \"8px 0\";\n                    args.element.setAttribute('role', 'menuitem');\n                    args.element.setAttribute('aria-label', 'separator');\n                }\n                if (args.item.text === 'ADD SIGNATURE') {\n                    args.element.innerHTML = '';\n                    _this.saveSignatureCount = 0;\n                    for (var collection = _this.pdfViewerBase.signatureModule.signaturecollection.length; collection > 0; collection--) {\n                        if (_this.saveSignatureCount < _this.pdfViewerBase.signatureModule.getSaveLimit(_this.pdfViewer.handWrittenSignatureSettings.saveSignatureLimit)) {\n                            args.element.style.display = 'block';\n                            // eslint-disable-next-line\n                            var signatureCollection = _this.pdfViewerBase.signatureModule.signaturecollection[collection - 1];\n                            // eslint-disable-next-line\n                            var collectionKey = signatureCollection.image[0].imageData;\n                            var signatureID = signatureCollection.image[0].id.split('_')[1];\n                            if (!signatureCollection.isInitial && collectionKey !== '') {\n                                // eslint-disable-next-line max-len\n                                var signatureContainer = createElement('div');\n                                signatureContainer.id = 's' + signatureID;\n                                signatureContainer.style.display = 'block';\n                                signatureContainer.style.paddingBottom = '10px';\n                                var signatureSpan = createElement('span');\n                                signatureSpan.id = 'sign_border_' + signatureID;\n                                signatureSpan.classList.add('e-pv-align-border');\n                                var signatureImage = void 0;\n                                if (signatureCollection.image[0].signatureType === 'SignatureText') {\n                                    signatureImage = createElement('div');\n                                    signatureImage.classList.add('e-pv-align-border-div');\n                                    signatureImage.innerText = collectionKey;\n                                    signatureImage.style.fontFamily = signatureCollection.image[0].fontFamily;\n                                    signatureImage.style.fontSize = '15px';\n                                    signatureImage.style.display = 'inline-flex';\n                                    signatureImage.style.alignItems = 'center';\n                                    signatureImage.style.position = 'relative';\n                                    signatureImage.id = 'sign_' + signatureID;\n                                    signatureImage.style.width = '80px';\n                                    signatureImage.style.height = '53px';\n                                    signatureImage.style.overflow = 'hidden';\n                                    signatureImage.style.textOverflow = 'ellipsis';\n                                    signatureImage.style.paddingLeft = '11px';\n                                }\n                                else {\n                                    signatureImage = createElement('img');\n                                    signatureImage.id = 'sign_' + signatureID;\n                                    signatureImage.src = collectionKey;\n                                    signatureImage.width = 80;\n                                    signatureImage.height = 32;\n                                    signatureImage.classList.add('e-pv-signatureimage');\n                                    signatureImage.style.paddingLeft = '20px';\n                                    signatureImage.style.paddingRight = '18px';\n                                    signatureImage.style.paddingTop = '12px';\n                                    signatureImage.style.paddingBottom = '12px';\n                                    signatureImage.style.boxSizing = 'content-box';\n                                    signatureImage.setAttribute('alt', 'Saved Signature');\n                                }\n                                signatureImage.addEventListener('mouseover', _this.hoverSignatureImage.bind(_this));\n                                signatureImage.addEventListener('mouseleave', _this.leaveSignatureImage.bind(_this));\n                                var signatureDeleteSpan = createElement('span');\n                                signatureDeleteSpan.id = 'delete_' + signatureID;\n                                signatureDeleteSpan.classList.add('e-pv-delete');\n                                signatureDeleteSpan.classList.add('e-pv-align');\n                                signatureSpan.append(signatureImage);\n                                signatureSpan.append(signatureDeleteSpan);\n                                signatureContainer.append(signatureSpan);\n                                args.element.appendChild(signatureContainer);\n                                args.element.style.pointerEvents = 'auto';\n                                args.element.style.background = 'none';\n                                _this.pdfViewerBase.getElement('_annotation_signature-popup').style.width = '206px';\n                                _this.saveSignatureCount++;\n                            }\n                        }\n                    }\n                    var addInitialSpan = createElement('button');\n                    addInitialSpan.classList.add(\"e-control\", \"e-btn\", \"e-lib\", \"e-outline\", \"e-primary\");\n                    addInitialSpan.textContent = _this.pdfViewer.localeObj.getConstant('HandwrittenSignatureDialogHeaderText');\n                    _this.pdfViewer.locale === 'en-US' ? addInitialSpan.style.width = \"130px\" : addInitialSpan.style.width = \"auto\";\n                    addInitialSpan.style.height = \"36px\";\n                    addInitialSpan.addEventListener('click', _this.clickSignature.bind(_this));\n                    args.element.appendChild(addInitialSpan);\n                    args.element.addEventListener('mouseover', _this.hoverInitialBtn.bind(_this));\n                    args.element.style.width = '206px';\n                    args.element.style.display = 'flex';\n                    args.element.style.flexDirection = 'column';\n                    args.element.style.height = 'auto';\n                    args.element.style.alignItems = 'center';\n                    args.element.setAttribute('role', 'menuitem');\n                }\n                if (args.item.text === 'ADD INITIAL') {\n                    _this.saveInitialCount = 0;\n                    args.element.innerHTML = '';\n                    for (var collection = _this.pdfViewerBase.signatureModule.signaturecollection.length; collection > 0; collection--) {\n                        if (_this.saveInitialCount < _this.pdfViewerBase.signatureModule.getSaveLimit(_this.pdfViewer.handWrittenSignatureSettings.saveInitialLimit)) {\n                            // eslint-disable-next-line\n                            var signatureCollection = _this.pdfViewerBase.signatureModule.signaturecollection[collection - 1];\n                            // eslint-disable-next-line\n                            var collectionKey = signatureCollection.image[0].imageData;\n                            var signatureID = signatureCollection.image[0].id.split('_')[1];\n                            if (signatureCollection.isInitial && collectionKey !== '') {\n                                var signatureContainer = createElement('div');\n                                signatureContainer.id = 's' + signatureID;\n                                signatureContainer.style.display = 'block';\n                                signatureContainer.style.paddingBottom = '10px';\n                                var signatureSpan = createElement('span');\n                                signatureSpan.id = 'sign_border_' + signatureID;\n                                signatureSpan.classList.add('e-pv-align-border');\n                                var signatureImage = void 0;\n                                if (signatureCollection.image[0].signatureType === 'SignatureText') {\n                                    signatureImage = createElement('div');\n                                    signatureImage.classList.add('e-pv-align-border-div');\n                                    signatureImage.innerText = collectionKey;\n                                    signatureImage.style.fontFamily = signatureCollection.image[0].fontFamily;\n                                    signatureImage.style.fontSize = '15px';\n                                    signatureImage.style.display = 'inline-flex';\n                                    signatureImage.style.alignItems = 'center';\n                                    signatureImage.style.position = 'relative';\n                                    signatureImage.id = 'sign_' + signatureID;\n                                    signatureImage.style.width = '80px';\n                                    signatureImage.style.height = '53px';\n                                    signatureImage.style.overflow = 'hidden';\n                                    signatureImage.style.textOverflow = 'ellipsis';\n                                    signatureImage.style.paddingLeft = '11px';\n                                }\n                                else {\n                                    signatureImage = createElement('img');\n                                    signatureImage.id = 'sign_' + signatureID;\n                                    signatureImage.src = collectionKey;\n                                    signatureImage.width = 80;\n                                    signatureImage.height = 32;\n                                    signatureImage.classList.add('e-pv-signatureimage');\n                                    signatureImage.style.paddingLeft = '20px';\n                                    signatureImage.style.paddingRight = '18px';\n                                    signatureImage.style.paddingTop = '12px';\n                                    signatureImage.style.paddingBottom = '12px';\n                                    signatureImage.style.boxSizing = 'content-box';\n                                    signatureImage.setAttribute('alt', 'Saved Initial');\n                                }\n                                signatureImage.addEventListener('mouseover', _this.hoverSignatureImage.bind(_this));\n                                signatureImage.addEventListener('mouseleave', _this.leaveSignatureImage.bind(_this));\n                                signatureImage.width = 80;\n                                signatureImage.height = 32;\n                                var signatureDeleteSpan = createElement('span');\n                                signatureDeleteSpan.id = 'delete_' + signatureID;\n                                signatureDeleteSpan.classList.add('e-pv-delete');\n                                signatureDeleteSpan.classList.add('e-pv-align');\n                                signatureSpan.append(signatureImage);\n                                signatureSpan.append(signatureDeleteSpan);\n                                signatureContainer.append(signatureSpan);\n                                args.element.appendChild(signatureContainer);\n                                // eslint-disable-next-line max-len\n                                args.element.style.pointerEvents = 'auto';\n                                args.element.style.background = 'none';\n                                _this.pdfViewerBase.getElement('_annotation_signature-popup').style.width = '206px';\n                                _this.saveInitialCount++;\n                            }\n                        }\n                    }\n                    _this.isSignatureIteam = false;\n                    var addInitialSpan = createElement('button');\n                    addInitialSpan.classList.add(\"e-control\", \"e-btn\", \"e-lib\", \"e-outline\", \"e-primary\");\n                    addInitialSpan.textContent = _this.pdfViewer.localeObj.getConstant('HandwrittenInitialDialogHeaderText');\n                    _this.pdfViewer.locale === 'en-US' ? addInitialSpan.style.width = \"130px\" : addInitialSpan.style.width = \"auto\";\n                    addInitialSpan.style.height = \"36px\";\n                    addInitialSpan.addEventListener('click', _this.clickInitial.bind(_this));\n                    args.element.appendChild(addInitialSpan);\n                    args.element.addEventListener('mouseover', _this.hoverInitialBtn.bind(_this));\n                    args.element.style.width = '206px';\n                    args.element.style.display = 'flex';\n                    args.element.style.flexDirection = 'column';\n                    args.element.style.height = 'auto';\n                    args.element.style.alignItems = 'center';\n                    args.element.setAttribute('role', 'menuitem');\n                }\n            },\n            select: function (args) {\n                _this.pdfViewer.clearSelection(_this.pdfViewerBase.currentPageNumber - 1);\n            }\n        };\n        var drpDownBtn = new DropDownButton(saveOptions);\n        if (this.pdfViewer.enableRtl) {\n            drpDownBtn.enableRtl = this.pdfViewer.enableRtl;\n        }\n        drpDownBtn.appendTo(this.handWrittenSignatureItem);\n    };\n    AnnotationToolbar.prototype.updateSignatureCount = function () {\n        var count = 0;\n        this.openSignaturePopup = false;\n        // eslint-disable-next-line\n        var signatureCollection = this.pdfViewerBase.signatureModule.signaturecollection;\n        for (var collection = 0; collection < signatureCollection.length; collection++) {\n            // eslint-disable-next-line\n            var colletionList = signatureCollection[collection];\n            if (colletionList.image[0].imageData === '') {\n                count++;\n            }\n        }\n    };\n    AnnotationToolbar.prototype.openSignature = function () {\n        this.saveInitialCount = 0;\n        this.saveSignatureCount = 0;\n        for (var collection = this.pdfViewerBase.signatureModule.signaturecollection.length; collection > 0; collection--) {\n            if (this.saveSignatureCount < this.pdfViewerBase.signatureModule.getSaveLimit(this.pdfViewer.handWrittenSignatureSettings.saveSignatureLimit)) {\n                // eslint-disable-next-line\n                var signatureCollection = this.pdfViewerBase.signatureModule.signaturecollection[collection - 1];\n                if (signatureCollection.image[0].imageData !== '') {\n                    if (!signatureCollection.isInitial) {\n                        this.saveSignatureCount++;\n                        // eslint-disable-next-line\n                        var addedSignature = document.getElementById('sign_border_' + signatureCollection.image[0].id.split('_')[1] + '');\n                        // eslint-disable-next-line\n                        var deleteSignature = document.getElementById('delete_' + signatureCollection.image[0].id.split('_')[1] + '');\n                        deleteSignature.style.backgroundClip = 'content-box';\n                        addedSignature.addEventListener('click', this.renderAddedSignature.bind(this));\n                        deleteSignature.addEventListener('click', this.deleteSavedSign.bind(this));\n                        deleteSignature.addEventListener('mouseover', this.hoverSignatureDelete.bind(this));\n                        deleteSignature.addEventListener('mouseleave', this.leaveSignatureDelete.bind(this));\n                        addedSignature.addEventListener('mouseover', this.hoverSignatureDelete.bind(this));\n                        addedSignature.addEventListener('mouseleave', this.leaveSignatureDelete.bind(this));\n                    }\n                }\n            }\n        }\n        for (var collection = this.pdfViewerBase.signatureModule.signaturecollection.length; collection > 0; collection--) {\n            if (this.saveInitialCount < this.pdfViewerBase.signatureModule.getSaveLimit(this.pdfViewer.handWrittenSignatureSettings.saveInitialLimit)) {\n                // eslint-disable-next-line\n                var signatureCollection = this.pdfViewerBase.signatureModule.signaturecollection[collection - 1];\n                if (signatureCollection.image[0].imageData !== '') {\n                    if (signatureCollection.isInitial) {\n                        this.saveInitialCount++;\n                        // eslint-disable-next-line\n                        var addedSignature = document.getElementById('sign_border_' + signatureCollection.image[0].id.split('_')[1] + '');\n                        // eslint-disable-next-line\n                        var deleteSignature = document.getElementById('delete_' + signatureCollection.image[0].id.split('_')[1] + '');\n                        deleteSignature.style.backgroundClip = 'content-box';\n                        addedSignature.addEventListener('click', this.renderAddedSignature.bind(this));\n                        deleteSignature.addEventListener('click', this.deleteSavedSign.bind(this));\n                        deleteSignature.addEventListener('mouseover', this.hoverSignatureDelete.bind(this));\n                        deleteSignature.addEventListener('mouseleave', this.leaveSignatureDelete.bind(this));\n                        addedSignature.addEventListener('mouseover', this.hoverSignatureDelete.bind(this));\n                        addedSignature.addEventListener('mouseleave', this.leaveSignatureDelete.bind(this));\n                    }\n                }\n            }\n        }\n    };\n    AnnotationToolbar.prototype.hoverSignatureDelete = function () {\n        var eventTarget = event.target;\n        if (eventTarget.id === 'sign_' + eventTarget.id.split('_')[1] || eventTarget.classList.contains('e-pv-delete')) {\n            eventTarget.classList.add('e-pv-signaturehover');\n            eventTarget.style.cursor = 'pointer';\n        }\n    };\n    AnnotationToolbar.prototype.hoverInitialBtn = function (event) {\n        var eventTarget = event.target;\n        var currentFieldID = '';\n        if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.userAgent.indexOf('Trident') !== -1) {\n            currentFieldID = eventTarget.id;\n        }\n        else {\n            currentFieldID = isNullOrUndefined(event.path) ? event.composedPath()[0].id : event.path[0].id;\n        }\n        if (currentFieldID !== 'sign_' + currentFieldID.split(\"_\")[1] && currentFieldID !== 'delete_' + currentFieldID.split(\"_\")[1]) {\n            var liElement = document.getElementById(eventTarget.id);\n            if (isNullOrUndefined(liElement)) {\n                liElement = document.getElementById(eventTarget.parentElement.id);\n            }\n            if (liElement != null && (eventTarget.id !== 'sign_' + eventTarget.id.split('_')[1] || eventTarget.id !== 'sign_border_' + eventTarget.id.split('_')[2])) {\n                liElement.style.background = 'transparent';\n                liElement.style.cursor = 'default';\n            }\n            else if (liElement.parentElement != null && (eventTarget.id !== 'sign_' + eventTarget.id.split('_')[1] || eventTarget.id !== 'sign_border_' + eventTarget.id.split('_')[2])) {\n                liElement.parentElement.style.background = 'transparent';\n                liElement.parentElement.style.cursor = 'default';\n            }\n        }\n    };\n    AnnotationToolbar.prototype.hoverSignatureImage = function () {\n        var eventTarget = event.target;\n        if (eventTarget.id === 'sign_' + eventTarget.id.split('_')[1] || eventTarget.classList.contains('e-pv-delete')) {\n            eventTarget.classList.add('e-pv-signaturehover');\n            eventTarget.classList.remove('e-pv-signatureimage');\n            eventTarget.style.cursor = 'pointer';\n        }\n    };\n    AnnotationToolbar.prototype.leaveSignatureDelete = function () {\n        var eventTarget = event.target;\n        if (eventTarget.id === 'sign_' + eventTarget.id.split('_')[1] || eventTarget.classList.contains('e-pv-delete')) {\n            eventTarget.classList.remove('e-pv-signaturehover');\n            if (eventTarget.children[0] && eventTarget.children[0].tagName === 'IMG') {\n                eventTarget.children[0].classList.remove('e-pv-signaturehover');\n            }\n            eventTarget.style.cursor = 'default';\n        }\n    };\n    AnnotationToolbar.prototype.clickSignature = function () {\n        this.pdfViewerBase.isInitialField = false;\n        this.addSignature();\n    };\n    AnnotationToolbar.prototype.clickInitial = function () {\n        this.pdfViewerBase.isInitialField = true;\n        this.addSignature();\n    };\n    AnnotationToolbar.prototype.leaveSignatureImage = function () {\n        var eventTarget = event.target;\n        if (eventTarget.id === 'sign_' + eventTarget.id.split('_')[1] || eventTarget.classList.contains('e-pv-delete')) {\n            eventTarget.classList.remove('e-pv-signaturehover');\n            if (eventTarget.tagName === 'IMG')\n                eventTarget.classList.add('e-pv-signatureimage');\n            if (eventTarget.children[0] && eventTarget.children[0].tagName === 'IMG') {\n                eventTarget.children[0].classList.remove('e-pv-signaturehover');\n                eventTarget.children[0].classList.add('e-pv-signatureimage');\n            }\n            eventTarget.style.cursor = 'default';\n        }\n    };\n    AnnotationToolbar.prototype.addSignature = function () {\n        this.deselectAllItems();\n        this.showSignaturepanel();\n    };\n    AnnotationToolbar.prototype.renderAddedSignature = function () {\n        this.pdfViewerBase.isAddedSignClicked = true;\n        this.isSavedSignatureClicked = true;\n        this.pdfViewerBase.signatureModule.RenderSavedSignature();\n    };\n    // eslint-disable-next-line\n    AnnotationToolbar.prototype.deleteSavedSign = function (event) {\n        event.stopPropagation();\n        // eslint-disable-next-line\n        var signaturecollection = this.pdfViewerBase.signatureModule.signaturecollection;\n        for (var collection = signaturecollection.length; collection > 0; collection--) {\n            if (event.target.parentElement.children[0].id === 'sign_' + signaturecollection[collection - 1].image[0].id.split('_')[1]) {\n                // eslint-disable-next-line\n                var RemoveSignature = signaturecollection[collection - 1];\n                RemoveSignature.image[0].imageData = '';\n                this.pdfViewerBase.signatureModule.signaturecollection.splice(collection - 1, 1);\n                break;\n            }\n        }\n        event.target.parentElement.remove();\n    };\n    AnnotationToolbar.prototype.getTemplate = function (elementName, id, className) {\n        var element = createElement(elementName, { id: this.pdfViewer.element.id + id });\n        if (className) {\n            element.className = className;\n        }\n        return element.outerHTML;\n    };\n    // eslint-disable-next-line\n    AnnotationToolbar.prototype.createStampContainer = function () {\n        var _this = this;\n        this.stampElement = this.pdfViewerBase.getElement('_annotation_stamp');\n        // eslint-disable-next-line max-len\n        this.primaryToolbar.createTooltip(this.pdfViewerBase.getElement('_annotation_stamp'), this.pdfViewer.localeObj.getConstant('Add Stamp'));\n        this.stampElement.setAttribute('aria-label', this.pdfViewer.localeObj.getConstant('Add Stamp'));\n        var contextMenuElement = createElement('ul', { id: this.pdfViewer.element.id + 'contextMenuElement' });\n        this.pdfViewerBase.getElement('_annotation_stamp').appendChild(contextMenuElement);\n        var items = [];\n        if (this.pdfViewer.stampSettings.dynamicStamps && this.pdfViewer.stampSettings.dynamicStamps.length > 0) {\n            var dynamicStamps_1 = [];\n            items.push({ text: this.pdfViewer.localeObj.getConstant('Dynamic'), label: 'Dynamic', items: dynamicStamps_1 });\n            this.pdfViewer.stampSettings.dynamicStamps.forEach(function (stampItem, index) {\n                var name = DynamicStampItem[stampItem];\n                switch (name) {\n                    case 'NotApproved':\n                        name = 'Not Approved';\n                        break;\n                }\n                dynamicStamps_1.push({ text: _this.pdfViewer.localeObj.getConstant(name), label: name });\n            });\n        }\n        if (this.pdfViewer.stampSettings.signStamps && this.pdfViewer.stampSettings.signStamps.length > 0) {\n            var signStamps_1 = [];\n            items.push({ text: this.pdfViewer.localeObj.getConstant('Sign Here'), label: 'Sign Here', items: signStamps_1 });\n            this.pdfViewer.stampSettings.signStamps.forEach(function (stampItem, index) {\n                var name = SignStampItem[stampItem];\n                switch (name) {\n                    case 'InitialHere':\n                        name = 'Initial Here';\n                        break;\n                    case 'SignHere':\n                        name = 'Sign Here';\n                        break;\n                }\n                signStamps_1.push({ text: _this.pdfViewer.localeObj.getConstant(name), label: name });\n            });\n        }\n        if (this.pdfViewer.stampSettings.standardBusinessStamps && this.pdfViewer.stampSettings.standardBusinessStamps.length > 0) {\n            var standardsBusinessStamps_1 = [];\n            items.push({ text: this.pdfViewer.localeObj.getConstant('Standard Business'), label: 'Standard Business', items: standardsBusinessStamps_1 });\n            this.pdfViewer.stampSettings.standardBusinessStamps.forEach(function (stampItem, index) {\n                var name = StandardBusinessStampItem[stampItem];\n                switch (name) {\n                    case 'NotApproved':\n                        name = 'Not Approved';\n                        break;\n                    case 'ForPublicRelease':\n                        name = 'For Public Release';\n                        break;\n                    case 'NotForPublicRelease':\n                        name = 'Not For Public Release';\n                        break;\n                    case 'ForComment':\n                        name = 'For Comment';\n                        break;\n                    case 'PreliminaryResults':\n                        name = 'Preliminary Results';\n                        break;\n                    case 'InformationOnly':\n                        name = 'Information Only';\n                        break;\n                }\n                standardsBusinessStamps_1.push({ text: _this.pdfViewer.localeObj.getConstant(name), label: name });\n            });\n        }\n        if (this.pdfViewer.customStampSettings.enableCustomStamp && !Browser.isDevice) {\n            if (items.length > 0) {\n                items.push({ separator: true });\n            }\n            items.push({ text: this.pdfViewer.localeObj.getConstant('Custom Stamp'), label: 'Custom Stamp', items: [] });\n            this.pdfViewerBase.customStampCollection = this.pdfViewer.customStampSettings.customStamps ? this.pdfViewer.customStampSettings.customStamps : [];\n        }\n        this.stampMenu = [\n            {\n                iconCss: 'e-pv-stamp-icon e-pv-icon',\n                items: items\n            }\n        ];\n        var menuOptions = {\n            items: this.stampMenu,\n            cssClass: 'e-custom-scroll',\n            showItemOnClick: true,\n            enableScrolling: true,\n            beforeOpen: function (args) {\n                _this.resetFreeTextAnnot();\n                if (args.parentItem.text === '' && _this.pdfViewer.customStampSettings.isAddToMenu && args.items.length > 0) {\n                    // eslint-disable-next-line\n                    var currentElements = null;\n                    for (var i = 0; i < args.items.length; i++) {\n                        if (args.items[i].text === _this.pdfViewer.localeObj.getConstant('Custom Stamp')) {\n                            args.items[i].items = [];\n                            currentElements = args.items[i];\n                            break;\n                        }\n                    }\n                    // eslint-disable-next-line\n                    var elements = _this.pdfViewerBase.customStampCollection;\n                    // eslint-disable-next-line\n                    var stampElements = _this.pdfViewer.customStampSettings.customStamps;\n                    if (elements.length === 0 && stampElements && stampElements.length > 0) {\n                        for (var n = 0; n < stampElements.length; n++) {\n                            // eslint-disable-next-line max-len\n                            elements.push({ customStampName: stampElements[n].customStampName, customStampImageSource: stampElements[n].customStampImageSource });\n                        }\n                    }\n                    for (var m = 0; m < elements.length; m++) {\n                        if (currentElements != null) {\n                            currentElements.items.push({ text: elements[m].customStampName });\n                            for (var i = 0; i < args.items.length; i++) {\n                                if (args.items[i].text === _this.pdfViewer.localeObj.getConstant('Custom Stamp')) {\n                                    var liElem = args.element.children[i];\n                                    if (liElem && !liElem.childElementCount) {\n                                        var span = document.createElement('span');\n                                        span.className = 'e-icons e-caret e-menu-caret-icon';\n                                        liElem.appendChild(span);\n                                        liElem.setAttribute('aria-haspopup', 'true');\n                                        liElem.setAttribute('aria-expanded', 'false');\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n                if (args.parentItem.text === _this.pdfViewer.localeObj.getConstant('Custom Stamp')) {\n                    // eslint-disable-next-line\n                    var stampElements = _this.pdfViewer.customStampSettings.customStamps;\n                    if (stampElements && stampElements.length > 10) {\n                        closest(args.element, '.e-menu-wrapper').style.height = '350px';\n                    }\n                }\n                _this.stampParentID = args.parentItem.text;\n                _this.menuItems.showItemOnClick = false;\n            },\n            beforeClose: function (args) {\n                // eslint-disable-next-line max-len\n                if ((args.parentItem && args.parentItem.text !== _this.pdfViewer.localeObj.getConstant('Custom Stamp') && args.parentItem.text !== 'Standard Business' && args.parentItem.text !== 'Dynamic' && args.parentItem.text !== 'Sign Here') || !args.parentItem) {\n                    _this.menuItems.showItemOnClick = true;\n                }\n            },\n            select: function (args) {\n                _this.pdfViewerBase.isAlreadyAdded = false;\n                if (args.item.text === _this.pdfViewer.localeObj.getConstant('Custom Stamp')) {\n                    _this.updateInteractionTools();\n                    _this.checkStampAnnotations();\n                    _this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode = true;\n                    // eslint-disable-next-line\n                    var stampImage = document.getElementById(_this.pdfViewer.element.id + '_stampElement');\n                    if (stampImage) {\n                        stampImage.click();\n                    }\n                    _this.pdfViewer.annotation.triggerAnnotationUnselectEvent();\n                    // eslint-disable-next-line max-len\n                }\n                else if (_this.stampParentID === _this.pdfViewer.localeObj.getConstant('Custom Stamp') && args.item.text !== '') {\n                    // eslint-disable-next-line\n                    var elements = _this.pdfViewerBase.customStampCollection;\n                    for (var n = 0; n < elements.length; n++) {\n                        if (elements[n].customStampName === args.item.text) {\n                            _this.pdfViewer.annotationModule.stampAnnotationModule.customStampName = args.item.text;\n                            _this.checkStampAnnotations();\n                            _this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode = true;\n                            _this.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected = true;\n                            _this.pdfViewerBase.stampAdded = true;\n                            _this.pdfViewerBase.isAlreadyAdded = true;\n                            // eslint-disable-next-line max-len\n                            _this.pdfViewer.annotationModule.stampAnnotationModule.createCustomStampAnnotation(elements[n].customStampImageSource);\n                            _this.pdfViewerBase.stampAdded = false;\n                        }\n                    }\n                    // eslint-disable-next-line max-len\n                }\n                else if (args.item.text !== _this.pdfViewer.localeObj.getConstant('Dynamic') && args.item.text !== '' && args.item.text !== 'Standard Business' && (_this.stampParentID === 'Sign Here' || args.item.text !== 'Sign Here')) {\n                    _this.updateInteractionTools();\n                    _this.checkStampAnnotations();\n                    _this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode = true;\n                    _this.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected = true;\n                    _this.pdfViewerBase.stampAdded = true;\n                    _this.pdfViewer.annotation.triggerAnnotationUnselectEvent();\n                    if (_this.stampParentID === _this.pdfViewer.localeObj.getConstant('Dynamic')) {\n                        _this.pdfViewerBase.isDynamicStamp = true;\n                        _this.pdfViewer.annotationModule.stampAnnotationModule.retrieveDynamicStampAnnotation(args.item.label);\n                    }\n                    else {\n                        _this.pdfViewerBase.isDynamicStamp = false;\n                        _this.pdfViewer.annotationModule.stampAnnotationModule.retrievestampAnnotation(args.item.label);\n                    }\n                    if (Browser.isDevice) {\n                        _this.stampToolMobileForMobile(_this.pdfViewer.element.id + '_annotation_stamp');\n                    }\n                }\n            }\n        };\n        this.menuItems = new Menu(menuOptions, '#' + this.pdfViewer.element.id + 'contextMenuElement');\n        contextMenuElement.parentElement.classList.add('e-pv-stamp');\n        if (this.pdfViewer.enableRtl) {\n            this.menuItems.enableRtl = true;\n        }\n        return contextMenuElement;\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.createCustomStampElement = function () {\n        // eslint-disable-next-line\n        var stampImage = createElement('input', { id: this.pdfViewer.element.id + '_stampElement', attrs: { 'type': 'file' } });\n        stampImage.setAttribute('accept', '.jpg,.jpeg,.png');\n        stampImage.style.position = 'absolute';\n        stampImage.style.left = '0px';\n        stampImage.style.top = '0px';\n        stampImage.style.visibility = 'hidden';\n        document.body.appendChild(stampImage);\n        stampImage.addEventListener('change', this.addStampImage);\n    };\n    AnnotationToolbar.prototype.checkStampAnnotations = function () {\n        // eslint-disable-next-line max-len\n        if (this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode && this.pdfViewer.selectedItems && this.pdfViewer.selectedItems.annotations) {\n            for (var i = 0; i < this.pdfViewer.selectedItems.annotations.length; i++) {\n                // eslint-disable-next-line\n                var annotation = this.pdfViewer.selectedItems.annotations[i];\n                // eslint-disable-next-line\n                if (annotation && !annotation.annotName && !annotation.author && (annotation.shapeAnnotationType !== 'Shape' || annotation.shapeAnnotationType !== 'Image')) {\n                    this.pdfViewer.remove(annotation);\n                    this.pdfViewer.annotation.renderAnnotations(annotation.pageIndex, null, null, null);\n                    this.pdfViewer.clearSelection(annotation.pageIndex);\n                }\n            }\n        }\n    };\n    AnnotationToolbar.prototype.createDropDowns = function (isPath) {\n        var _this = this;\n        if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n            this.shapeElement = this.pdfViewerBase.getElement('_annotation_shapes');\n            var shapeToolbar = this.createShapeOptions(this.shapeElement.id, true);\n            // eslint-disable-next-line max-len\n            this.shapeDropDown = this.createDropDownButton(this.shapeElement, 'e-pv-annotation-shape-icon', shapeToolbar.element, this.pdfViewer.localeObj.getConstant('Add Shapes'));\n            this.calibrateElement = this.pdfViewerBase.getElement('_annotation_calibrate');\n            var calibrateToolbar = this.createShapeOptions(this.calibrateElement.id, false);\n            // eslint-disable-next-line max-len\n            this.calibrateDropDown = this.createDropDownButton(this.calibrateElement, 'e-pv-annotation-calibrate-icon', calibrateToolbar.element, this.pdfViewer.localeObj.getConstant('Calibrate'));\n        }\n        if (!isPath) {\n            this.colorDropDownElement = this.pdfViewerBase.getElement('_annotation_color');\n            this.colorPalette = this.createColorPicker(this.colorDropDownElement.id);\n            this.colorPalette.change = this.onColorPickerChange.bind(this);\n            // eslint-disable-next-line max-len\n            this.colorDropDown = this.createDropDownButton(this.colorDropDownElement, 'e-pv-annotation-color-icon', this.colorPalette.element.parentElement, this.pdfViewer.localeObj.getConstant('Color edit'));\n            this.colorDropDown.beforeOpen = this.colorDropDownBeforeOpen.bind(this);\n            this.colorDropDown.open = this.colorDropDownOpen.bind(this);\n            this.pdfViewerBase.getElement('_annotation_color-popup').addEventListener('click', this.onColorPickerCancelClick.bind(this));\n        }\n        if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n            this.strokeDropDownElement = this.pdfViewerBase.getElement('_annotation_stroke');\n            this.strokeColorPicker = this.createColorPicker(this.strokeDropDownElement.id);\n            this.strokeColorPicker.change = this.onStrokePickerChange.bind(this);\n            // eslint-disable-next-line max-len\n            this.strokeDropDown = this.createDropDownButton(this.strokeDropDownElement, 'e-pv-annotation-stroke-icon', this.strokeColorPicker.element.parentElement, this.pdfViewer.localeObj.getConstant('Stroke edit'));\n            this.strokeDropDown.beforeOpen = this.strokeDropDownBeforeOpen.bind(this);\n            this.strokeDropDown.open = this.strokeDropDownOpen.bind(this);\n            this.pdfViewerBase.getElement('_annotation_stroke-popup').addEventListener('click', this.onStrokePickerCancelClick.bind(this));\n            this.thicknessElement = this.pdfViewerBase.getElement('_annotation_thickness');\n            var thicknessContainer = this.createThicknessSlider(this.thicknessElement.id);\n            // eslint-disable-next-line max-len\n            this.thicknessDropDown = this.createDropDownButton(this.thicknessElement, 'e-pv-annotation-thickness-icon', thicknessContainer, this.pdfViewer.localeObj.getConstant('Change thickness'));\n            this.thicknessDropDown.beforeOpen = this.thicknessDropDownBeforeOpen.bind(this);\n            this.thicknessSlider.change = this.thicknessChange.bind(this);\n            this.thicknessSlider.changed = this.thicknessChange.bind(this);\n            if (!this.pdfViewer.enableRtl) {\n                this.thicknessDropDown.open = this.thicknessDropDownOpen.bind(this);\n            }\n        }\n        if (!isPath) {\n            this.opacityDropDownElement = this.pdfViewerBase.getElement('_annotation_opacity');\n            var sliderContainer = this.createSlider(this.opacityDropDownElement.id);\n            // eslint-disable-next-line max-len\n            this.opacityDropDown = this.createDropDownButton(this.opacityDropDownElement, 'e-pv-annotation-opacity-icon', sliderContainer, this.pdfViewer.localeObj.getConstant('Opacity edit'));\n            this.opacityDropDown.beforeOpen = this.opacityDropDownBeforeOpen.bind(this);\n            this.opacitySlider.change = this.opacityChange.bind(this);\n            this.opacitySlider.changed = this.opacityChange.bind(this);\n            if (!this.pdfViewer.enableRtl) {\n                this.opacityDropDown.open = this.opacityDropDownOpen.bind(this);\n            }\n        }\n        if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n            this.fontFamilyElement = this.pdfViewerBase.getElement('_annotation_fontname');\n            this.createDropDownListForFamily(this.fontFamilyElement);\n            //this.fontFamilyElement.style.textAlign = 'left';\n            this.fontFamilyElement.addEventListener('change', function () {\n                _this.onFontFamilyChange.bind(_this);\n            });\n            this.fontSizeElement = this.pdfViewerBase.getElement('_annotation_fontsize');\n            this.createDropDownListForSize(this.fontSizeElement);\n            this.fontColorElement = this.pdfViewerBase.getElement('_annotation_textcolor');\n            this.fontColorPalette = this.createColorPicker(this.fontColorElement.id);\n            this.fontColorPalette.change = this.onFontColorChange.bind(this);\n            // eslint-disable-next-line max-len\n            this.fontColorDropDown = this.createDropDownButton(this.fontColorElement, 'e-pv-annotation-textcolor-icon', this.fontColorPalette.element.parentElement, this.pdfViewer.localeObj.getConstant('Font color'));\n            this.textAlignElement = this.pdfViewerBase.getElement('_annotation_textalign');\n            this.alignmentToolbar = this.createShapeOptions(this.textAlignElement.id, undefined, true);\n            // eslint-disable-next-line max-len\n            this.textAlignDropDown = this.createDropDownButton(this.textAlignElement, 'e-pv-annotation-textalign-icon', this.alignmentToolbar.element, this.pdfViewer.localeObj.getConstant('Text Align'));\n            this.textAlignDropDown.beforeOpen = this.textAlignDropDownBeforeOpen.bind(this);\n            this.textPropElement = this.pdfViewerBase.getElement('_annotation_textproperties');\n            this.propertiesToolbar = this.createShapeOptions(this.textPropElement.id, undefined, false, true);\n            // eslint-disable-next-line max-len\n            this.textPropertiesDropDown = this.createPropDropDownButton(this.textPropElement, 'e-pv-annotation-textprop-icon', this.propertiesToolbar.element, this.pdfViewer.localeObj.getConstant('Text Properties'));\n            this.textPropertiesDropDown.beforeOpen = this.textPropertiesDropDownBeforeOpen.bind(this);\n        }\n    };\n    AnnotationToolbar.prototype.mobileColorpicker = function (id) {\n        var _this = this;\n        this.opacityDropDownElement = this.pdfViewerBase.getElement('_annotation_opacity');\n        var sliderContainer = this.createSlider(this.opacityDropDownElement.id);\n        // eslint-disable-next-line max-len\n        this.opacityDropDown = this.createDropDownButton(this.opacityDropDownElement, 'e-pv-annotation-opacity-icon', sliderContainer, this.pdfViewer.localeObj.getConstant('Opacity edit'));\n        this.opacityDropDown.beforeOpen = this.opacityDropDownBeforeOpen.bind(this);\n        this.opacitySlider.change = this.opacityChange.bind(this);\n        this.opacitySlider.changed = this.opacityChange.bind(this);\n        if (!this.pdfViewer.enableRtl) {\n            this.opacityDropDown.open = this.opacityDropDownOpen.bind(this);\n        }\n        if (id === this.pdfViewer.element.id + '_annotation_shapes') {\n            id = this.pdfViewer.element.id + '_annotation_shapesIcon';\n        }\n        else if (id === this.pdfViewer.element.id + '_annotation_calibrate') {\n            id = this.pdfViewer.element.id + '_annotation_calibrateIcon';\n        }\n        else if (id === this.pdfViewer.element.id + '_highlight') {\n            id = this.pdfViewer.element.id + '_highlightIcon';\n        }\n        else if (id === this.pdfViewer.element.id + '_underline') {\n            id = this.pdfViewer.element.id + '_underlineIcon';\n        }\n        else if (id === this.pdfViewer.element.id + '_strikethrough') {\n            id = this.pdfViewer.element.id + '_strikethroughIcon';\n        }\n        // eslint-disable-next-line max-len\n        if (id === this.pdfViewer.element.id + '_annotation_shapesIcon' || id === this.pdfViewer.element.id + '_annotation_calibrateIcon' || id === this.pdfViewer.element.id + '_annotation_freeTextEdit' ||\n            // eslint-disable-next-line max-len\n            id === this.pdfViewer.element.id + '_highlightIcon' || id === this.pdfViewer.element.id + '_underlineIcon' || id === this.pdfViewer.element.id + '_strikethroughIcon' || id === this.pdfViewer.element.id + '_annotation_inkIcon' || id === this.pdfViewer.element.id + '_annotation_handwrittenSign') {\n            if (id !== this.pdfViewer.element.id + '_annotation_handwrittenSign' && id !== this.pdfViewer.element.id + '_annotation_inkIcon') {\n                this.colorDropDownElement = this.pdfViewerBase.getElement('_annotation_color');\n                this.colorPalette = this.createColorPicker(this.colorDropDownElement.id);\n                this.colorPalette.change = this.onColorPickerChange.bind(this);\n                // eslint-disable-next-line max-len\n                this.colorDropDown = this.createDropDownButton(this.colorDropDownElement, 'e-pv-annotation-color-icon', this.colorPalette.element.parentElement, this.pdfViewer.localeObj.getConstant('Color edit'));\n                this.colorDropDown.beforeOpen = this.colorDropDownBeforeOpen.bind(this);\n                this.colorDropDown.open = this.colorDropDownOpen.bind(this);\n                // eslint-disable-next-line max-len\n                this.pdfViewerBase.getElement('_annotation_color-popup').addEventListener('click', this.onColorPickerCancelClick.bind(this));\n            }\n            if (id === this.pdfViewer.element.id + '_annotation_freeTextEdit') {\n                this.fontFamilyElement = this.pdfViewerBase.getElement('_annotation_fontname');\n                this.createDropDownListForFamily(this.fontFamilyElement);\n                this.fontFamilyElement.style.textAlign = 'left';\n                this.fontFamilyElement.addEventListener('change', function () { _this.onFontFamilyChange.bind(_this); });\n                this.fontSizeElement = this.pdfViewerBase.getElement('_annotation_fontsize');\n                this.createDropDownListForSize(this.fontSizeElement);\n                this.fontColorElement = this.pdfViewerBase.getElement('_annotation_textcolor');\n                this.fontColorPalette = this.createColorPicker(this.fontColorElement.id);\n                this.fontColorPalette.change = this.onFontColorChange.bind(this);\n                // eslint-disable-next-line max-len\n                this.fontColorDropDown = this.createDropDownButton(this.fontColorElement, 'e-pv-annotation-textcolor-icon', this.fontColorPalette.element.parentElement, this.pdfViewer.localeObj.getConstant('Font color'));\n                this.textAlignElement = this.pdfViewerBase.getElement('_annotation_textalign');\n                this.alignmentToolbar = this.createShapeOptions(this.textAlignElement.id, undefined, true);\n                // eslint-disable-next-line max-len\n                this.textAlignDropDown = this.createDropDownButton(this.textAlignElement, 'e-pv-annotation-textalign-icon', this.alignmentToolbar.element, this.pdfViewer.localeObj.getConstant('Text Align'));\n                this.textAlignDropDown.beforeOpen = this.textAlignDropDownBeforeOpen.bind(this);\n                this.textPropElement = this.pdfViewerBase.getElement('_annotation_textproperties');\n                this.propertiesToolbar = this.createShapeOptions(this.textPropElement.id, undefined, false, true);\n                // eslint-disable-next-line max-len\n                this.textPropertiesDropDown = this.createPropDropDownButton(this.textPropElement, 'e-pv-annotation-textprop-icon', this.propertiesToolbar.element, this.pdfViewer.localeObj.getConstant('Text Properties'));\n                this.textPropertiesDropDown.beforeOpen = this.textPropertiesDropDownBeforeOpen.bind(this);\n            }\n            // eslint-disable-next-line max-len\n            if (id === this.pdfViewer.element.id + '_annotation_shapesIcon' || id === this.pdfViewer.element.id + '_annotation_calibrateIcon' || id === this.pdfViewer.element.id + '_annotation_freeTextEdit' ||\n                id === this.pdfViewer.element.id + '_annotation_inkIcon' || id === this.pdfViewer.element.id + '_annotation_handwrittenSign') {\n                this.thicknessElement = this.pdfViewerBase.getElement('_annotation_thickness');\n                var thicknessContainer = this.createThicknessSlider(this.thicknessElement.id);\n                // eslint-disable-next-line max-len\n                this.thicknessDropDown = this.createDropDownButton(this.thicknessElement, 'e-pv-annotation-thickness-icon', thicknessContainer, this.pdfViewer.localeObj.getConstant('Change thickness'));\n                this.thicknessDropDown.beforeOpen = this.thicknessDropDownBeforeOpen.bind(this);\n                this.thicknessSlider.change = this.thicknessChange.bind(this);\n                this.thicknessSlider.changed = this.thicknessChange.bind(this);\n                if (!this.pdfViewer.enableRtl) {\n                    this.thicknessDropDown.open = this.thicknessDropDownOpen.bind(this);\n                }\n                this.strokeDropDownElement = this.pdfViewerBase.getElement('_annotation_stroke');\n                this.strokeColorPicker = this.createColorPicker(this.strokeDropDownElement.id);\n                this.strokeColorPicker.change = this.onStrokePickerChange.bind(this);\n                // eslint-disable-next-line max-len\n                this.strokeDropDown = this.createDropDownButton(this.strokeDropDownElement, 'e-pv-annotation-stroke-icon', this.strokeColorPicker.element.parentElement, this.pdfViewer.localeObj.getConstant('Stroke edit'));\n                this.strokeDropDown.beforeOpen = this.strokeDropDownBeforeOpen.bind(this);\n                this.strokeDropDown.open = this.strokeDropDownOpen.bind(this);\n                // eslint-disable-next-line max-len\n                this.pdfViewerBase.getElement('_annotation_stroke-popup').addEventListener('click', this.onStrokePickerCancelClick.bind(this));\n            }\n        }\n    };\n    AnnotationToolbar.prototype.opacityDropDownOpen = function (args) {\n        if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n            args.element.parentElement.style.left = '0px';\n            args.element.parentElement.style.top = (this.pdfViewerBase.viewerContainer.clientHeight) + 'px';\n        }\n        else {\n            this.calculateToolbarPosition(args);\n        }\n    };\n    AnnotationToolbar.prototype.onColorPickerCancelClick = function (event) {\n        if (event.target.classList.contains('e-cancel')) {\n            this.colorDropDown.toggle();\n        }\n    };\n    AnnotationToolbar.prototype.onStrokePickerCancelClick = function (event) {\n        if (event.target.classList.contains('e-cancel')) {\n            this.strokeDropDown.toggle();\n        }\n    };\n    AnnotationToolbar.prototype.colorDropDownBeforeOpen = function (args) {\n        this.colorPalette.noColor = false;\n        if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n            if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                this.colorPalette.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation.color;\n            }\n            else {\n                this.setCurrentColorInPicker();\n            }\n        }\n        if (this.pdfViewer.selectedItems.annotations.length === 1) {\n            this.colorPalette.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill;\n            this.colorPalette.noColor = true;\n        }\n        else {\n            this.setCurrentColorInPicker();\n        }\n        this.colorPalette.refresh();\n        this.updateColorInIcon(this.colorDropDownElement, this.colorPalette.value);\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.setCurrentColorInPicker = function () {\n        if (!isBlazor()) {\n            if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n                switch (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode) {\n                    case 'Highlight':\n                        // eslint-disable-next-line max-len\n                        this.setColorInPicker(this.colorPalette, this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor);\n                        break;\n                    case 'Underline':\n                        // eslint-disable-next-line max-len\n                        this.setColorInPicker(this.colorPalette, this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor);\n                        break;\n                    case 'Strikethrough':\n                        // eslint-disable-next-line max-len\n                        this.setColorInPicker(this.colorPalette, this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor);\n                        break;\n                }\n            }\n            if (this.pdfViewer.annotation.shapeAnnotationModule) {\n                switch (this.pdfViewer.annotationModule.shapeAnnotationModule.currentAnnotationMode) {\n                    case 'Line':\n                        // eslint-disable-next-line max-len\n                        this.setColorInPicker(this.colorPalette, this.pdfViewer.annotationModule.shapeAnnotationModule.lineFillColor);\n                        break;\n                    case 'Arrow':\n                        // eslint-disable-next-line max-len\n                        this.setColorInPicker(this.colorPalette, this.pdfViewer.annotationModule.shapeAnnotationModule.arrowFillColor);\n                        break;\n                    case 'Rectangle':\n                        // eslint-disable-next-line max-len\n                        this.setColorInPicker(this.colorPalette, this.pdfViewer.annotationModule.shapeAnnotationModule.rectangleFillColor);\n                        break;\n                    case 'Circle':\n                        // eslint-disable-next-line max-len\n                        this.setColorInPicker(this.colorPalette, this.pdfViewer.annotationModule.shapeAnnotationModule.circleFillColor);\n                        break;\n                    case 'Polygon':\n                        // eslint-disable-next-line max-len\n                        this.setColorInPicker(this.colorPalette, this.pdfViewer.annotationModule.shapeAnnotationModule.polygonFillColor);\n                        break;\n                }\n            }\n            if (this.colorDropDownElement) {\n                this.updateColorInIcon(this.colorDropDownElement, this.colorPalette.value);\n            }\n        }\n    };\n    AnnotationToolbar.prototype.colorDropDownOpen = function (args) {\n        if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n            // eslint-disable-next-line max-len\n            args.element.parentElement.style.top = (this.pdfViewerBase.viewerContainer.clientHeight / 2) + 'px';\n        }\n        this.popupPosition(args, this.colorDropDownElement);\n        this.colorPalette.refresh();\n    };\n    AnnotationToolbar.prototype.strokeDropDownBeforeOpen = function (args) {\n        if (this.pdfViewer.selectedItems.annotations.length === 1) {\n            this.strokeColorPicker.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor;\n        }\n        else {\n            this.setCurrentStrokeColorInPicker();\n        }\n        this.strokeColorPicker.refresh();\n        this.updateColorInIcon(this.strokeDropDownElement, this.strokeColorPicker.value);\n        this.updateInkannotationItems();\n    };\n    AnnotationToolbar.prototype.setCurrentStrokeColorInPicker = function () {\n        if (!isBlazor()) {\n            if (this.pdfViewer.annotation.shapeAnnotationModule) {\n                switch (this.pdfViewer.annotationModule.shapeAnnotationModule.currentAnnotationMode) {\n                    case 'Line':\n                        // eslint-disable-next-line max-len\n                        this.setColorInPicker(this.strokeColorPicker, this.pdfViewer.annotationModule.shapeAnnotationModule.lineStrokeColor);\n                        break;\n                    case 'Arrow':\n                        // eslint-disable-next-line max-len\n                        this.setColorInPicker(this.strokeColorPicker, this.pdfViewer.annotationModule.shapeAnnotationModule.arrowStrokeColor);\n                        break;\n                    case 'Rectangle':\n                        // eslint-disable-next-line max-len\n                        this.setColorInPicker(this.strokeColorPicker, this.pdfViewer.annotationModule.shapeAnnotationModule.rectangleStrokeColor);\n                        break;\n                    case 'Circle':\n                        // eslint-disable-next-line max-len\n                        this.setColorInPicker(this.strokeColorPicker, this.pdfViewer.annotationModule.shapeAnnotationModule.circleStrokeColor);\n                        break;\n                    case 'Polygon':\n                        // eslint-disable-next-line max-len\n                        this.setColorInPicker(this.strokeColorPicker, this.pdfViewer.annotationModule.shapeAnnotationModule.polygonStrokeColor);\n                        break;\n                }\n            }\n        }\n    };\n    AnnotationToolbar.prototype.strokeDropDownOpen = function (args) {\n        if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n            args.element.parentElement.style.top = (this.pdfViewerBase.viewerContainer.clientHeight / 2) + 'px';\n        }\n        this.popupPosition(args, this.strokeDropDownElement);\n        this.strokeColorPicker.refresh();\n    };\n    // eslint-disable-next-line\n    AnnotationToolbar.prototype.onFontColorChange = function (args) {\n        // eslint-disable-next-line\n        var currentColor;\n        if (!isBlazor()) {\n            currentColor = (args.currentValue.hex === '') ? '#ffffff00' : args.currentValue.hex;\n        }\n        else {\n            currentColor = args[0];\n        }\n        if (this.pdfViewer.selectedItems.annotations.length === 1) {\n            this.pdfViewer.annotation.modifyFontColor(currentColor);\n        }\n        else {\n            this.pdfViewer.freeTextSettings.fontColor = currentColor;\n            this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();\n        }\n        if (isBlazor()) {\n            this.fontColorElementInBlazor = this.pdfViewer.element.querySelector('.e-pv-annotation-textcolor-container');\n            this.updateColorInIcon(this.fontColorElementInBlazor, currentColor);\n        }\n        else {\n            this.updateColorInIcon(this.fontColorElement, currentColor);\n            this.fontColorDropDown.toggle();\n        }\n    };\n    // eslint-disable-next-line\n    AnnotationToolbar.prototype.onFontFamilyChange = function (args) {\n        var currentValue;\n        if (!isBlazor()) {\n            currentValue = (args && args.fontFamily && args.fontFamily.value) ? args.fontFamily.value : '';\n        }\n        else {\n            currentValue = args;\n        }\n        if (this.pdfViewer.selectedItems.annotations.length === 1 && currentValue) {\n            this.pdfViewer.annotation.modifyFontFamily(currentValue);\n        }\n        else {\n            this.pdfViewer.freeTextSettings.fontFamily = currentValue;\n            this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();\n        }\n    };\n    // eslint-disable-next-line\n    AnnotationToolbar.prototype.onFontSizeChange = function (args, isInteracted) {\n        var currentValue;\n        if (!isBlazor()) {\n            currentValue = (args && args.fontSize && args.fontSize.value) ? args.fontSize.value : '';\n        }\n        else {\n            currentValue = args;\n        }\n        var fontSize = parseFloat(currentValue);\n        if (this.pdfViewer.selectedItems.annotations.length === 1 && currentValue) {\n            this.pdfViewer.annotation.modifyFontSize(fontSize, isInteracted);\n        }\n        else {\n            this.pdfViewer.freeTextSettings.fontSize = fontSize;\n            this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();\n        }\n    };\n    AnnotationToolbar.prototype.textAlignDropDownBeforeOpen = function (args) {\n        if (this.pdfViewer.selectedItems.annotations.length === 1) {\n            if (args.element.getElementsByTagName('button') && args.element.getElementsByTagName('button').length > 0) {\n                // eslint-disable-next-line\n                var dropDownOptions = args.element.getElementsByTagName('button');\n                // eslint-disable-next-line\n                var selectedAnnotation = this.pdfViewer.selectedItems.annotations[0];\n                for (var n = 0; n < dropDownOptions.length; n++) {\n                    if (dropDownOptions[n]) {\n                        dropDownOptions[n].classList.remove('textprop-option-active');\n                        // eslint-disable-next-line max-len\n                        if (dropDownOptions[n].id === (this.pdfViewer.element.id + '_left_align') && selectedAnnotation.textAlign === 'Left') {\n                            dropDownOptions[n].classList.add('textprop-option-active');\n                        }\n                        // eslint-disable-next-line max-len\n                        if (dropDownOptions[n].id === (this.pdfViewer.element.id + '_right_align') && selectedAnnotation.textAlign === 'Right') {\n                            dropDownOptions[n].classList.add('textprop-option-active');\n                        }\n                        // eslint-disable-next-line max-len\n                        if (dropDownOptions[n].id === (this.pdfViewer.element.id + '_center_align') && selectedAnnotation.textAlign === 'Center') {\n                            dropDownOptions[n].classList.add('textprop-option-active');\n                        }\n                        // eslint-disable-next-line max-len\n                        if (dropDownOptions[n].id === (this.pdfViewer.element.id + '_justify_align') && selectedAnnotation.textAlign === 'Justify') {\n                            dropDownOptions[n].classList.add('textprop-option-active');\n                        }\n                    }\n                }\n            }\n        }\n    };\n    AnnotationToolbar.prototype.textPropertiesDropDownBeforeOpen = function (args) {\n        if (this.pdfViewer.selectedItems.annotations.length === 1) {\n            if (args.element.getElementsByTagName('button') && args.element.getElementsByTagName('button').length > 0) {\n                // eslint-disable-next-line\n                var dropDownOptions = args.element.getElementsByTagName('button');\n                // eslint-disable-next-line\n                var selectedAnnotation = this.pdfViewer.selectedItems.annotations[0];\n                for (var n = 0; n < dropDownOptions.length; n++) {\n                    if (dropDownOptions[n]) {\n                        dropDownOptions[n].classList.remove('textprop-option-active');\n                        if (dropDownOptions[n].id === (this.pdfViewer.element.id + '_bold') && selectedAnnotation.font.isBold) {\n                            dropDownOptions[n].classList.add('textprop-option-active');\n                        }\n                        if (dropDownOptions[n].id === (this.pdfViewer.element.id + '_italic') && selectedAnnotation.font.isItalic) {\n                            dropDownOptions[n].classList.add('textprop-option-active');\n                        }\n                        if (dropDownOptions[n].id === (this.pdfViewer.element.id + '_strikeout') && selectedAnnotation.font.isStrikeout) {\n                            dropDownOptions[n].classList.add('textprop-option-active');\n                        }\n                        // eslint-disable-next-line max-len\n                        if (dropDownOptions[n].id === (this.pdfViewer.element.id + '_underline_textinput') && selectedAnnotation.font.isUnderline) {\n                            dropDownOptions[n].classList.add('textprop-option-active');\n                        }\n                    }\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line\n    AnnotationToolbar.prototype.onClickTextAlignment = function (args) {\n        var currentValue;\n        if (isBlazor()) {\n            currentValue = args[0];\n        }\n        else {\n            currentValue = (args && args.item && args.item.value) ? args.item.value : '';\n        }\n        if (this.pdfViewer.selectedItems.annotations.length === 1 && currentValue) {\n            this.pdfViewer.annotation.modifyTextAlignment(currentValue);\n        }\n        else {\n            this.pdfViewer.freeTextSettings.textAlignment = args.item.value;\n            this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();\n        }\n        this.updateTextAlignInIcon(currentValue);\n    };\n    // eslint-disable-next-line\n    AnnotationToolbar.prototype.onClickTextProperties = function (args) {\n        var currentValue;\n        if (isBlazor()) {\n            currentValue = args[0];\n        }\n        else {\n            currentValue = (args && args.item && args.item.value) ? args.item.value : '';\n        }\n        if (this.pdfViewer.selectedItems.annotations.length === 1 && currentValue) {\n            var fontInfo = { isBold: undefined, isItalic: undefined, isStrikeout: undefined, isUnderline: undefined };\n            if (currentValue === 'bold') {\n                fontInfo.isBold = !(this.pdfViewer.selectedItems.annotations[0].font.isBold);\n            }\n            else if (currentValue === 'italic') {\n                fontInfo.isItalic = !(this.pdfViewer.selectedItems.annotations[0].font.isItalic);\n            }\n            else if (currentValue === 'underline') {\n                fontInfo.isUnderline = !(this.pdfViewer.selectedItems.annotations[0].font.isUnderline);\n            }\n            else if (currentValue === 'strikeout') {\n                fontInfo.isStrikeout = !(this.pdfViewer.selectedItems.annotations[0].font.isStrikeout);\n            }\n            this.pdfViewer.annotation.modifyTextProperties(fontInfo, currentValue);\n        }\n        else {\n            if (currentValue === 'bold') {\n                if (this.pdfViewer.annotationModule.freeTextAnnotationModule.isBold) {\n                    this.pdfViewer.annotationModule.freeTextAnnotationModule.isBold = false;\n                }\n                else {\n                    this.pdfViewer.freeTextSettings.fontStyle = 1;\n                    this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();\n                }\n            }\n            else if (currentValue === 'italic') {\n                if (this.pdfViewer.annotationModule.freeTextAnnotationModule.isItalic) {\n                    this.pdfViewer.annotationModule.freeTextAnnotationModule.isItalic = false;\n                }\n                else {\n                    this.pdfViewer.freeTextSettings.fontStyle = 2;\n                    this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();\n                }\n            }\n            else if (currentValue === 'underline') {\n                if (this.pdfViewer.annotationModule.freeTextAnnotationModule.isUnderline) {\n                    this.pdfViewer.annotationModule.freeTextAnnotationModule.isUnderline = false;\n                }\n                else {\n                    this.pdfViewer.freeTextSettings.fontStyle = 4;\n                    this.pdfViewer.annotationModule.freeTextAnnotationModule.isStrikethrough = false;\n                    this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();\n                }\n            }\n            else if (currentValue === 'strikeout') {\n                if (this.pdfViewer.annotationModule.freeTextAnnotationModule.isStrikethrough) {\n                    this.pdfViewer.annotationModule.freeTextAnnotationModule.isStrikethrough = false;\n                }\n                else {\n                    this.pdfViewer.freeTextSettings.fontStyle = 8;\n                    this.pdfViewer.annotationModule.freeTextAnnotationModule.isUnderline = false;\n                    this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();\n                }\n            }\n        }\n        this.updateTextPropertySelection(currentValue);\n    };\n    // eslint-disable-next-line\n    AnnotationToolbar.prototype.opacityChange = function (args) {\n        var opacityValue = 1;\n        if (args && args.length === 1) {\n            opacityValue = args[0];\n        }\n        else {\n            opacityValue = args.value;\n        }\n        if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n            if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                if (!isBlazor()) {\n                    if (this.isCurrentAnnotationOpacitySet && args.name === 'changed') {\n                        this.isCurrentAnnotationOpacitySet = false;\n                    }\n                    else {\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyOpacityProperty(args);\n                    }\n                }\n                else {\n                    this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyOpacityProperty(null, opacityValue);\n                }\n            }\n            else {\n                switch (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode) {\n                    case 'Highlight':\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightOpacity = opacityValue / 100;\n                        break;\n                    case 'Underline':\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineOpacity = opacityValue / 100;\n                        break;\n                    case 'Strikethrough':\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughOpacity = opacityValue / 100;\n                        break;\n                }\n            }\n        }\n        if (this.pdfViewer.selectedItems.annotations.length === 1) {\n            // eslint-disable-next-line\n            var currentAnnotations = this.pdfViewer.selectedItems.annotations[0];\n            // eslint-disable-next-line max-len\n            if (currentAnnotations != null && (currentAnnotations.shapeAnnotationType === 'Stamp' || currentAnnotations.shapeAnnotationType === 'Image')) {\n                var clonedObject = cloneObject(currentAnnotations);\n                var redoClonedObject = cloneObject(currentAnnotations);\n                redoClonedObject.opacity = opacityValue / 100;\n                this.pdfViewer.nodePropertyChange(currentAnnotations, { opacity: opacityValue / 100 });\n                this.pdfViewer.annotation.triggerAnnotationPropChange(currentAnnotations, false, false, false, true);\n                // eslint-disable-next-line max-len\n                this.pdfViewer.annotation.addAction(this.pdfViewer.selectedItems.annotations[0].pageIndex, null, this.pdfViewer.selectedItems.annotations[0], 'stampOpacity', '', clonedObject, redoClonedObject);\n                // eslint-disable-next-line max-len\n                this.pdfViewer.annotation.stampAnnotationModule.updateSessionStorage(this.pdfViewer.selectedItems.annotations[0], null, 'opacity');\n            }\n            else {\n                if (isBlazor()) {\n                    this.pdfViewer.annotation.modifyOpacity(opacityValue, true);\n                }\n                else {\n                    if (args.name === 'changed') {\n                        if (args.value !== args.previousValue) {\n                            this.pdfViewer.annotation.modifyOpacity(args);\n                        }\n                    }\n                }\n            }\n        }\n        else {\n            if (this.pdfViewer.annotation.shapeAnnotationModule) {\n                switch (this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode) {\n                    case 'Line':\n                        this.pdfViewer.annotation.shapeAnnotationModule.lineOpacity = opacityValue / 100;\n                        break;\n                    case 'Arrow':\n                        this.pdfViewer.annotation.shapeAnnotationModule.arrowOpacity = opacityValue / 100;\n                        break;\n                    case 'Rectangle':\n                        this.pdfViewer.annotation.shapeAnnotationModule.rectangleOpacity = opacityValue / 100;\n                        break;\n                    case 'Circle':\n                        this.pdfViewer.annotation.shapeAnnotationModule.circleOpacity = opacityValue / 100;\n                        break;\n                    case 'Polygon':\n                        this.pdfViewer.annotation.shapeAnnotationModule.polygonOpacity = opacityValue / 100;\n                        break;\n                }\n            }\n            // eslint-disable-next-line\n            var annotationModule = this.pdfViewer.annotation;\n            if (annotationModule && annotationModule.inkAnnotationModule) {\n                this.pdfViewer.inkAnnotationSettings.opacity = opacityValue / 100;\n            }\n            if (this.pdfViewer.drawingObject) {\n                this.pdfViewer.drawingObject.opacity = opacityValue / 100;\n                if (this.pdfViewer.drawingObject.shapeAnnotationType === 'FreeText') {\n                    this.pdfViewer.annotation.freeTextAnnotationModule.opacity = opacityValue / 100;\n                }\n            }\n        }\n        if (!isBlazor()) {\n            this.updateOpacityIndicator();\n        }\n    };\n    AnnotationToolbar.prototype.opacityDropDownBeforeOpen = function (args) {\n        if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n            if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                this.isCurrentAnnotationOpacitySet = true;\n                // eslint-disable-next-line max-len\n                this.opacitySlider.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation.opacity * 100;\n            }\n            else {\n                switch (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode) {\n                    case 'Highlight':\n                        this.opacitySlider.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightOpacity * 100;\n                        break;\n                    case 'Underline':\n                        this.opacitySlider.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineOpacity * 100;\n                        break;\n                    case 'Strikethrough':\n                        this.opacitySlider.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughOpacity * 100;\n                        break;\n                }\n            }\n        }\n        if (this.pdfViewer.selectedItems.annotations.length === 1) {\n            this.opacitySlider.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.opacity * 100;\n        }\n        else {\n            if (this.pdfViewer.annotation.shapeAnnotationModule) {\n                switch (this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode) {\n                    case 'Line':\n                        this.opacitySlider.value = this.pdfViewer.annotation.shapeAnnotationModule.lineOpacity * 100;\n                        break;\n                    case 'Arrow':\n                        this.opacitySlider.value = this.pdfViewer.annotation.shapeAnnotationModule.arrowOpacity * 100;\n                        break;\n                    case 'Rectangle':\n                        this.opacitySlider.value = this.pdfViewer.annotation.shapeAnnotationModule.rectangleOpacity * 100;\n                        break;\n                    case 'Circle':\n                        this.opacitySlider.value = this.pdfViewer.annotation.shapeAnnotationModule.circleOpacity * 100;\n                        break;\n                    case 'Polygon':\n                        this.opacitySlider.value = this.pdfViewer.annotation.shapeAnnotationModule.polygonOpacity * 100;\n                        break;\n                }\n            }\n        }\n        this.updateOpacityIndicator();\n        this.updateInkannotationItems();\n    };\n    AnnotationToolbar.prototype.thicknessDropDownBeforeOpen = function () {\n        if (this.pdfViewer.selectedItems.annotations.length === 1) {\n            this.thicknessSlider.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeWidth;\n        }\n        else {\n            if (this.pdfViewer.annotation.shapeAnnotationModule) {\n                switch (this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode) {\n                    case 'Line':\n                        this.thicknessSlider.value = this.pdfViewer.annotation.shapeAnnotationModule.lineThickness;\n                        break;\n                    case 'Arrow':\n                        this.thicknessSlider.value = this.pdfViewer.annotation.shapeAnnotationModule.arrowThickness;\n                        break;\n                    case 'Rectangle':\n                        this.thicknessSlider.value = this.pdfViewer.annotation.shapeAnnotationModule.rectangleThickness;\n                        break;\n                    case 'Circle':\n                        this.thicknessSlider.value = this.pdfViewer.annotation.shapeAnnotationModule.circleThickness;\n                        break;\n                    case 'Polygon':\n                        this.thicknessSlider.value = this.pdfViewer.annotation.shapeAnnotationModule.polygonThickness;\n                        break;\n                }\n            }\n        }\n        this.updateThicknessIndicator();\n        this.updateInkannotationItems();\n    };\n    // eslint-disable-next-line\n    AnnotationToolbar.prototype.thicknessDropDownOpen = function (args) {\n        if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n            args.element.parentElement.style.left = '0px';\n            args.element.parentElement.style.top = (this.pdfViewerBase.viewerContainer.clientHeight) + 'px';\n        }\n        else {\n            this.calculateToolbarPosition(args);\n        }\n    };\n    AnnotationToolbar.prototype.calculateToolbarPosition = function (args) {\n        if (args.element && args.element.parentElement) {\n            var leftValue = parseFloat(args.element.parentElement.style.left);\n            var width = args.element.parentElement.offsetWidth;\n            if ((leftValue + width) < (this.pdfViewer.element.offsetWidth + 10)) {\n                args.element.parentElement.style.left = (leftValue - width) + 'px';\n            }\n        }\n    };\n    // eslint-disable-next-line\n    AnnotationToolbar.prototype.thicknessChangeInBlazor = function (args) {\n        if (this.pdfViewer.selectedItems.annotations.length === 1) {\n            this.pdfViewer.annotation.modifyThickness(args[0]);\n        }\n        else {\n            this.ShapeThickness(args[0]);\n        }\n    };\n    AnnotationToolbar.prototype.thicknessChange = function (args) {\n        if (this.pdfViewer.selectedItems.annotations.length === 1) {\n            if (args.name === 'changed') {\n                this.pdfViewer.annotation.modifyThickness(args.value);\n                if (!isBlazor()) {\n                    this.updateThicknessIndicator();\n                }\n                var annotationModule = this.pdfViewer.annotation;\n                var selectedItems = this.pdfViewer.selectedItems.annotations[0];\n                if (annotationModule && annotationModule.inkAnnotationModule && selectedItems && selectedItems.shapeAnnotationType === \"Ink\") {\n                    this.pdfViewer.inkAnnotationSettings.thickness = args.value;\n                }\n            }\n        }\n        else {\n            this.ShapeThickness(args.value);\n        }\n    };\n    // eslint-disable-next-line\n    AnnotationToolbar.prototype.ShapeThickness = function (args) {\n        if (this.pdfViewer.annotation.shapeAnnotationModule) {\n            switch (this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode) {\n                case 'Line':\n                    this.pdfViewer.annotation.shapeAnnotationModule.lineThickness = args;\n                    break;\n                case 'Arrow':\n                    this.pdfViewer.annotation.shapeAnnotationModule.arrowThickness = args;\n                    break;\n                case 'Rectangle':\n                    this.pdfViewer.annotation.shapeAnnotationModule.rectangleThickness = args;\n                    break;\n                case 'Circle':\n                    this.pdfViewer.annotation.shapeAnnotationModule.circleThickness = args;\n                    break;\n                case 'Polygon':\n                    this.pdfViewer.annotation.shapeAnnotationModule.polygonThickness = args;\n                    break;\n            }\n            // eslint-disable-next-line\n            var annotationModule_1 = this.pdfViewer.annotation;\n            if (annotationModule_1 && annotationModule_1.inkAnnotationModule) {\n                this.pdfViewer.inkAnnotationSettings.thickness = args.value;\n            }\n            if (this.pdfViewer.drawingObject) {\n                this.pdfViewer.drawingObject.thickness = args.value;\n            }\n            if (this.pdfViewer.drawingObject && this.pdfViewer.drawingObject.shapeAnnotationType === 'FreeText') {\n                this.pdfViewer.annotation.freeTextAnnotationModule.borderWidth = args.value;\n            }\n        }\n        // eslint-disable-next-line\n        var annotationModule = this.pdfViewer.annotation;\n        if (annotationModule && annotationModule.inkAnnotationModule) {\n            this.pdfViewer.inkAnnotationSettings.thickness = args;\n        }\n        if (this.pdfViewer.drawingObject) {\n            this.pdfViewer.drawingObject.thickness = args;\n        }\n        if (this.pdfViewer.drawingObject && this.pdfViewer.drawingObject.shapeAnnotationType === 'FreeText') {\n            this.pdfViewer.annotation.freeTextAnnotationModule.borderWidth = args;\n        }\n        if (!isBlazor()) {\n            this.updateThicknessIndicator();\n        }\n    };\n    AnnotationToolbar.prototype.createDropDownButton = function (element, iconClass, target, tooltipText) {\n        // eslint-disable-next-line max-len\n        var dropDownButton = new DropDownButton({ iconCss: iconClass + ' e-pv-icon', target: target });\n        if (this.pdfViewer.enableRtl) {\n            dropDownButton.enableRtl = true;\n        }\n        dropDownButton.appendTo(element);\n        this.primaryToolbar.createTooltip(element, tooltipText);\n        element.setAttribute('aria-label', tooltipText);\n        return dropDownButton;\n    };\n    AnnotationToolbar.prototype.createShapeOptions = function (idString, isShape, isAlign, isTextProp) {\n        var toolbarElement = createElement('div', { id: idString + '_target', className: 'e-pv-shapes-toolbar' });\n        document.body.appendChild(toolbarElement);\n        var toolbar;\n        if (isAlign) {\n            toolbar = new Tool({ items: this.textAlignmentToolbarItems(), overflowMode: 'MultiRow' }, toolbarElement);\n            toolbar.isStringTemplate = true;\n            this.afterAlignmentToolbarCreation();\n        }\n        else if (isTextProp) {\n            toolbar = new Tool({ items: this.textPropertiesToolbarItems(), overflowMode: 'MultiRow' }, toolbarElement);\n            toolbar.isStringTemplate = true;\n            this.afterPropertiesToolbarCreation();\n        }\n        else {\n            if (isShape) {\n                if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n                    // eslint-disable-next-line max-len\n                    toolbar = new Tool({ items: this.createShapeToolbarItems(), overflowMode: 'MultiRow', clicked: this.onShapeToolbarClicked.bind(this) }, toolbarElement);\n                    toolbar.isStringTemplate = true;\n                    this.afterShapeToolbarCreation();\n                }\n                else {\n                    // eslint-disable-next-line max-len\n                    this.toolbarElement = createElement('div', { id: idString + '_target', className: 'e-pv-mobile-annotation-toolbar', styles: 'bottom: 0px; position: absolute; width: 100%; float: left' });\n                    this.pdfViewerBase.viewerMainContainer.appendChild(this.toolbarElement);\n                    // eslint-disable-next-line max-len\n                    toolbar = new Tool({ items: this.createShapeToolbarItemsForMobile(), overflowMode: 'Scrollable', clicked: this.onShapeToolbarClicked.bind(this) }, this.toolbarElement);\n                    toolbar.isStringTemplate = true;\n                    this.afterShapeToolbarCreationForMobile();\n                }\n            }\n            else {\n                // eslint-disable-next-line max-len\n                toolbar = new Tool({ items: this.createCalibrateToolbarItems(), overflowMode: 'MultiRow', clicked: this.onCalibrateToolbarClicked.bind(this) }, toolbarElement);\n                toolbar.isStringTemplate = true;\n                this.afterCalibrateToolbarCreation();\n            }\n        }\n        return toolbar;\n    };\n    // eslint:disable-next-line\n    AnnotationToolbar.prototype.createPropertyToolbarForMobile = function (shapeType) {\n        var _this = this;\n        var colorTemplate = this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate('span', '_annotation_color', 'e-pv-annotation-color-container');\n        // eslint-disable-next-line max-len\n        var strokeTemplate = this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate('span', '_annotation_stroke', 'e-pv-annotation-stroke-container');\n        var thicknessTemplate = this.getTemplate('span', '_annotation_thickness', 'e-pv-annotation-thickness-container');\n        var opacityTemplate = this.getTemplate('span', '_annotation_opacity', 'e-pv-annotation-opacity-container');\n        var fontFamilyTemplate = this.getTemplate('input', '_annotation_fontname', 'e-pv-annotation-fontname-container');\n        var fontSizeTemplate = this.getTemplate('input', '_annotation_fontsize', 'e-pv-annotation-fontsize-container');\n        var textColorTemplate = this.getTemplate('span', '_annotation_textcolor', 'e-pv-annotation-textcolor-container');\n        var alignmentTemplate = this.getTemplate('span', '_annotation_textalign', 'e-pv-annotation-textalign-container');\n        // eslint-disable-next-line max-len\n        var textPropertiesTemplate = this.getTemplate('span', '_annotation_textproperties', 'e-pv-annotation-textprop-container');\n        // eslint:disable-next-line\n        var items = [];\n        // eslint-disable-next-line max-len\n        if (shapeType === 'Polygon' || shapeType === 'Rectangle' || shapeType === 'Ellipse' || shapeType === 'Line' || shapeType === 'LineWidthArrowHead' || shapeType === 'Distance' || shapeType === 'Perimeter' || shapeType === 'Radius' || shapeType === 'FreeText') {\n            if (shapeType === 'FreeText') {\n                // eslint-disable-next-line max-len\n                items.push({ prefixIcon: 'e-pv-freetext-icon e-pv-icon', className: 'e-pv-annotation-freetextedit-container' });\n                items.push({ type: 'Separator', align: 'Left' });\n                items.push({ template: fontFamilyTemplate });\n                items.push({ template: fontSizeTemplate });\n                items.push({ template: textColorTemplate });\n                items.push({ template: alignmentTemplate });\n                items.push({ template: textPropertiesTemplate });\n            }\n            if (shapeType === 'Polygon') {\n                if (this.pdfViewer.selectedItems.annotations[0].measureType === 'Area') {\n                    items.push({ prefixIcon: 'e-pv-calibrate-area-icon e-pv-icon' });\n                    items.push({ type: 'Separator', align: 'Left' });\n                }\n                else if (this.pdfViewer.selectedItems.annotations[0].measureType === 'Volume') {\n                    items.push({ prefixIcon: 'e-pv-calibrate-volume-icon e-pv-icon' });\n                    items.push({ type: 'Separator', align: 'Left' });\n                }\n                else {\n                    items.push({ prefixIcon: 'e-pv-shape-pentagon-icon e-pv-icon' });\n                    items.push({ type: 'Separator', align: 'Left' });\n                }\n            }\n            else if (shapeType === 'Rectangle') {\n                items.push({ prefixIcon: 'e-pv-shape-rectangle-icon e-pv-icon' });\n                items.push({ type: 'Separator', align: 'Left' });\n            }\n            else if (shapeType === 'Ellipse') {\n                items.push({ prefixIcon: 'e-pv-shape-circle-icon e-pv-icon' });\n                items.push({ type: 'Separator', align: 'Left' });\n            }\n            else if (shapeType === 'Line') {\n                if (this.pdfViewer.selectedItems.annotations[0].measureType === 'Perimeter') {\n                    items.push({ prefixIcon: 'e-pv-calibrate-perimeter-icon e-pv-icon' });\n                    items.push({ type: 'Separator', align: 'Left' });\n                }\n                else {\n                    items.push({ prefixIcon: 'e-pv-shape-line-icon e-pv-icon' });\n                    items.push({ type: 'Separator', align: 'Left' });\n                }\n            }\n            else if (shapeType === 'LineWidthArrowHead') {\n                items.push({ prefixIcon: 'e-pv-shape-arrow-icon e-pv-icon' });\n                items.push({ type: 'Separator', align: 'Left' });\n            }\n            else if (shapeType === 'Distance') {\n                items.push({ prefixIcon: 'e-pv-calibrate-distance-icon e-pv-icon' });\n                items.push({ type: 'Separator', align: 'Left' });\n            }\n            else if (shapeType === 'Perimeter') {\n                items.push({ prefixIcon: 'e-pv-calibrate-perimeter-icon e-pv-icon' });\n                items.push({ type: 'Separator', align: 'Left' });\n            }\n            else if (shapeType === 'Radius') {\n                items.push({ prefixIcon: 'e-pv-calibrate-radius-icon e-pv-icon' });\n                items.push({ type: 'Separator', align: 'Left' });\n            }\n            items.push({ template: colorTemplate });\n            items.push({ template: strokeTemplate });\n            items.push({ template: thicknessTemplate });\n        }\n        else if (shapeType === 'Path' || shapeType === 'Ink' || shapeType === 'HandWrittenSignature' || shapeType === 'SignatureText') {\n            if (shapeType === 'Path' || shapeType === 'Ink') {\n                items.push({ prefixIcon: 'e-pv-inkannotation-icon e-pv-icon' });\n                items.push({ type: 'Separator', align: 'Left' });\n            }\n            else if (shapeType === 'HandWrittenSignature' || shapeType === 'SignatureText') {\n                items.push({ prefixIcon: 'e-pv-handwritten-icon e-pv-icon' });\n                items.push({ type: 'Separator', align: 'Left' });\n            }\n            items.push({ template: strokeTemplate });\n            items.push({ template: thicknessTemplate });\n        }\n        else if (shapeType === 'Underline' || shapeType === 'Highlight' || shapeType === 'Strikethrough') {\n            if (shapeType === 'Highlight') {\n                items.push({ prefixIcon: 'e-pv-highlight-icon e-pv-icon' });\n                items.push({ type: 'Separator', align: 'Left' });\n            }\n            else if (shapeType === 'Underline') {\n                items.push({ prefixIcon: 'e-pv-underline-icon e-pv-icon' });\n                items.push({ type: 'Separator', align: 'Left' });\n            }\n            else if (shapeType === 'Strikethrough') {\n                items.push({ prefixIcon: 'e-pv-strikethrough-icon e-pv-icon' });\n                items.push({ type: 'Separator', align: 'Left' });\n            }\n            items.push({ template: colorTemplate });\n        }\n        else if (shapeType === 'Stamp' || shapeType === 'Image') {\n            items.push({ prefixIcon: 'e-pv-stamp-icon e-pv-icon' });\n            items.push({ type: 'Separator', align: 'Left' });\n        }\n        else if (shapeType === 'StickyNotes') {\n            items.push({ prefixIcon: 'e-pv-comment-icon e-pv-icon' });\n            items.push({ type: 'Separator', align: 'Left' });\n        }\n        items.push({ template: opacityTemplate });\n        // eslint-disable-next-line max-len\n        items.push({\n            prefixIcon: 'e-pv-comment-panel-icon e-pv-icon', className: 'e-pv-comment-panel-icon-container', id: this.pdfViewer.element.id + '_annotation_commentPanel', align: 'Right', click: function (args) {\n                _this.pdfViewer.annotationModule.showCommentsPanel();\n            }\n        });\n        // eslint-disable-next-line max-len\n        items.push({\n            prefixIcon: 'e-pv-annotation-delete-icon e-pv-icon', className: 'e-pv-annotation-delete-container', id: this.pdfViewer.element.id + '_annotation_delete', align: 'Right', click: function (args) {\n                _this.pdfViewer.annotationModule.deleteAnnotation();\n                _this.propertyToolbar.destroy();\n                _this.toolbarCreated = false;\n                _this.createAnnotationToolbarForMobile();\n                _this.adjustMobileViewer();\n            }\n        });\n        return items;\n    };\n    // eslint:disable-next-line\n    AnnotationToolbar.prototype.createStampToolbarItemsForMobile = function () {\n        var opacityTemplate = this.getTemplate('span', '_annotation_opacity', 'e-pv-annotation-opacity-container');\n        // eslint:disable-next-line\n        var items = [];\n        items.push({ prefixIcon: 'e-pv-backward-icon e-pv-icon', tooltipText: this.pdfViewer.localeObj.getConstant('Go Back'), id: this.pdfViewer.element.id + '_backward', click: this.goBackToToolbar.bind(this) });\n        items.push({ type: 'Separator', align: 'Left' });\n        items.push({ template: opacityTemplate });\n        return items;\n    };\n    // eslint:disable-next-line\n    AnnotationToolbar.prototype.createShapeToolbarItemsForMobile = function () {\n        var colorTemplate = this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate('span', '_annotation_color', 'e-pv-annotation-color-container');\n        // eslint-disable-next-line max-len\n        var strokeTemplate = this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate('span', '_annotation_stroke', 'e-pv-annotation-stroke-container');\n        var thicknessTemplate = this.getTemplate('span', '_annotation_thickness', 'e-pv-annotation-thickness-container');\n        var opacityTemplate = this.getTemplate('span', '_annotation_opacity', 'e-pv-annotation-opacity-container');\n        // eslint:disable-next-line\n        var items = [];\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-backward-icon e-pv-icon', tooltipText: this.pdfViewer.localeObj.getConstant('Go Back'), id: this.pdfViewer.element.id + '_backward', click: this.goBackToToolbar.bind(this) });\n        items.push({ prefixIcon: 'e-pv-shape-line-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_shape_line', text: this.pdfViewer.localeObj.getConstant('Line Shape'), align: 'Left' });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-shape-arrow-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_shape_arrow', text: this.pdfViewer.localeObj.getConstant('Arrow Shape'), align: 'Left' });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-shape-rectangle-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_shape_rectangle', text: this.pdfViewer.localeObj.getConstant('Rectangle Shape'), align: 'Left' });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-shape-circle-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_shape_circle', text: this.pdfViewer.localeObj.getConstant('Circle Shape'), align: 'Left' });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-shape-pentagon-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_shape_pentagon', text: this.pdfViewer.localeObj.getConstant('Pentagon Shape'), align: 'Left' });\n        items.push({ type: 'Separator', align: 'Left' });\n        items.push({ template: colorTemplate });\n        items.push({ template: strokeTemplate });\n        items.push({ template: thicknessTemplate });\n        items.push({ template: opacityTemplate });\n        return items;\n    };\n    // eslint:disable-next-line\n    AnnotationToolbar.prototype.createCalibrateToolbarItemsForMobile = function () {\n        var colorTemplate = this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate('span', '_annotation_color', 'e-pv-annotation-color-container');\n        // eslint-disable-next-line max-len\n        var strokeTemplate = this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate('span', '_annotation_stroke', 'e-pv-annotation-stroke-container');\n        var thicknessTemplate = this.getTemplate('span', '_annotation_thickness', 'e-pv-annotation-thickness-container');\n        var opacityTemplate = this.getTemplate('span', '_annotation_opacity', 'e-pv-annotation-opacity-container');\n        // eslint:disable-next-line\n        var items = [];\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-backward-icon e-pv-icon', tooltipText: this.pdfViewer.localeObj.getConstant('Go Back'), id: this.pdfViewer.element.id + '_backward', click: this.goBackToToolbar.bind(this) });\n        items.push({ prefixIcon: 'e-pv-calibrate-distance-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_calibrate_distance', text: this.pdfViewer.localeObj.getConstant(''), align: 'Left' });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-calibrate-perimeter-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_calibrate_perimeter', text: this.pdfViewer.localeObj.getConstant(''), align: 'Left' });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-calibrate-area-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_calibrate_area', text: this.pdfViewer.localeObj.getConstant(''), align: 'Left' });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-calibrate-radius-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_calibrate_radius', text: this.pdfViewer.localeObj.getConstant(''), align: 'Left' });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-calibrate-volume-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_calibrate_volume', text: this.pdfViewer.localeObj.getConstant(''), align: 'Left' });\n        items.push({ type: 'Separator', align: 'Left' });\n        items.push({ template: colorTemplate });\n        items.push({ template: strokeTemplate });\n        items.push({ template: thicknessTemplate });\n        items.push({ template: opacityTemplate });\n        return items;\n    };\n    AnnotationToolbar.prototype.handleShapeTool = function (type) {\n        if (!isBlazor() && Browser.isDevice) {\n            // eslint:disable-next-line\n            var selectedItems = document.querySelectorAll('.e-pv-select');\n            for (var i = 0; i < selectedItems.length; i++) {\n                if (selectedItems[i].id !== type && selectedItems[i].id !== this.pdfViewer.element.id + '_annotation') {\n                    selectedItems[i].classList.remove('e-pv-select');\n                }\n            }\n        }\n    };\n    AnnotationToolbar.prototype.createPropDropDownButton = function (element, iconClass, target, tooltipText) {\n        // eslint-disable-next-line max-len\n        var dropDownButton = new DropDownButton({ iconCss: iconClass + ' e-pv-icon', target: target, cssClass: 'e-caret-hide' });\n        if (this.pdfViewer.enableRtl) {\n            dropDownButton.enableRtl = true;\n        }\n        dropDownButton.appendTo(element);\n        this.primaryToolbar.createTooltip(element, tooltipText);\n        element.setAttribute('aria-label', tooltipText);\n        return dropDownButton;\n    };\n    // eslint-disable-next-line\n    AnnotationToolbar.prototype.textAlignmentToolbarItems = function () {\n        // eslint-disable-next-line\n        var items = [];\n        items.push({ prefixIcon: 'e-pv-left-align-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_left_align', align: 'Left', value: 'Left', click: this.onClickTextAlignment.bind(this) });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-center-align-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_center_align', align: 'Left', value: 'Center', click: this.onClickTextAlignment.bind(this) });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-right-align-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_right_align', align: 'Left', value: 'Right', click: this.onClickTextAlignment.bind(this) });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-justfiy-align-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_justify_align', align: 'Left', value: 'Justify', click: this.onClickTextAlignment.bind(this) });\n        // eslint-disable-next-line max-len\n        return items;\n    };\n    AnnotationToolbar.prototype.afterAlignmentToolbarCreation = function () {\n        // eslint-disable-next-line max-len\n        this.alignLeftElement = this.primaryToolbar.addClassToolbarItem('_left_align', 'e-pv-left-align', this.pdfViewer.localeObj.getConstant('Align left'));\n        this.alignRightElement = this.primaryToolbar.addClassToolbarItem('_right_align', 'e-pv-right-align', this.pdfViewer.localeObj.getConstant('Align right'));\n        // eslint-disable-next-line max-len\n        this.alignCenterElement = this.primaryToolbar.addClassToolbarItem('_center_align', 'e-pv-center-align', this.pdfViewer.localeObj.getConstant('Center'));\n        this.alignJustifyElement = this.primaryToolbar.addClassToolbarItem('_justify_align', 'e-pv-justfiy-align', this.pdfViewer.localeObj.getConstant('Justify'));\n    };\n    AnnotationToolbar.prototype.afterPropertiesToolbarCreation = function () {\n        // eslint-disable-next-line max-len\n        this.boldElement = this.primaryToolbar.addClassToolbarItem('_bold', 'e-pv-bold', this.pdfViewer.localeObj.getConstant('Bold'));\n        this.italicElement = this.primaryToolbar.addClassToolbarItem('_italic', 'e-pv-italic', this.pdfViewer.localeObj.getConstant('Italic'));\n        // eslint-disable-next-line max-len\n        this.fontStyleStrikethroughItem = this.primaryToolbar.addClassToolbarItem('_strikeout', 'e-pv-strikeout', this.pdfViewer.localeObj.getConstant('Strikethroughs'));\n        this.fontStyleUnderlineItem = this.primaryToolbar.addClassToolbarItem('_underline_textinput', 'e-pv-underlinetext', this.pdfViewer.localeObj.getConstant('Underlines'));\n    };\n    AnnotationToolbar.prototype.createDropDownListForSize = function (fontSelectElement) {\n        // eslint-disable-next-line max-len\n        var proxy = this;\n        var fontSize = ['8px', '9px', '10px', '11px', '12px', '14px', '16px', '18px', '20px', '22px', '24px', '26px', '28px', '36px', '48px', '72px', '96px'];\n        if (!this.pdfViewer.enableRtl) {\n            this.fontSize = new ComboBox({\n                dataSource: fontSize,\n                cssClass: 'e-pv-prop-dropdown',\n                allowCustom: true,\n                showClearButton: false,\n                width: '80px',\n                popupWidth: '100px'\n            });\n        }\n        else {\n            this.fontSize = new ComboBox({\n                dataSource: fontSize,\n                cssClass: 'e-pv-prop-dropdown-rtl',\n                allowCustom: true,\n                showClearButton: false,\n                width: '80px',\n                popupWidth: '100px',\n                enableRtl: true\n            });\n        }\n        this.fontSize.value = '16px';\n        this.fontSize.appendTo(fontSelectElement);\n        this.primaryToolbar.createTooltip(fontSelectElement, this.pdfViewer.localeObj.getConstant('Font size'));\n        fontSelectElement.setAttribute('aria-label', this.pdfViewer.localeObj.getConstant('Font size'));\n        this.fontSize.addEventListener('change', function (args) {\n            var isUserInteracted = args.isInteracted;\n            proxy.onFontSizeChange(proxy, isUserInteracted);\n        });\n    };\n    AnnotationToolbar.prototype.createDropDownListForFamily = function (fontSelectElement) {\n        var _this = this;\n        var fontStyle = [{ FontName: 'Helvetica' },\n            { FontName: 'Courier' }, { FontName: 'Symbol' }, { FontName: 'Times New Roman' }];\n        if (!this.pdfViewer.enableRtl) {\n            this.fontFamily = new ComboBox({\n                dataSource: fontStyle,\n                query: new Query().select(['FontName']),\n                fields: { text: 'FontName', value: 'FontName' },\n                cssClass: 'e-pv-prop-dropdown',\n                itemTemplate: initializeCSPTemplate(function (data) { return \"<span style=\\\"font-family: \" + data.FontName + \";\\\">\" + data.FontName + \"</span>\"; }),\n                allowCustom: true,\n                showClearButton: false,\n                width: '110px',\n                popupWidth: '190px'\n            });\n        }\n        else {\n            this.fontFamily = new ComboBox({\n                dataSource: fontStyle,\n                query: new Query().select(['FontName']),\n                fields: { text: 'FontName', value: 'FontName' },\n                cssClass: 'e-pv-prop-dropdown-rtl',\n                itemTemplate: initializeCSPTemplate(function (data) { return \"<span style=\\\"font-family: \" + data.FontName + \";\\\">\" + data.FontName + \"</span>\"; }),\n                allowCustom: true,\n                showClearButton: false,\n                width: '110px',\n                popupWidth: '190px',\n                enableRtl: true\n            });\n        }\n        this.fontFamily.isStringTemplate = true;\n        this.fontFamily.value = 'Helvetica';\n        this.fontFamily.appendTo(fontSelectElement);\n        this.primaryToolbar.createTooltip(fontSelectElement, this.pdfViewer.localeObj.getConstant('Font family'));\n        fontSelectElement.setAttribute('aria-label', this.pdfViewer.localeObj.getConstant('Font family'));\n        this.fontFamily.addEventListener('change', function () {\n            _this.onFontFamilyChange(_this);\n        });\n    };\n    // eslint-disable-next-line\n    AnnotationToolbar.prototype.textPropertiesToolbarItems = function () {\n        // eslint-disable-next-line\n        var items = [];\n        items.push({ prefixIcon: 'e-pv-bold-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_bold', align: 'Left', value: 'bold', click: this.onClickTextProperties.bind(this) });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-italic-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_italic', align: 'Left', value: 'italic', click: this.onClickTextProperties.bind(this) });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-strikeout-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_strikeout', align: 'Left', value: 'strikeout', click: this.onClickTextProperties.bind(this) });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-underlinetext-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_underline_textinput', align: 'Left', value: 'underline', click: this.onClickTextProperties.bind(this) });\n        return items;\n    };\n    // eslint-disable-next-line\n    AnnotationToolbar.prototype.createShapeToolbarItems = function () {\n        // eslint-disable-next-line\n        var items = [];\n        items.push({ prefixIcon: 'e-pv-shape-line-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_shape_line', text: this.pdfViewer.localeObj.getConstant('Line Shape'), align: 'Left' });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-shape-arrow-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_shape_arrow', text: this.pdfViewer.localeObj.getConstant('Arrow Shape'), align: 'Left' });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-shape-rectangle-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_shape_rectangle', text: this.pdfViewer.localeObj.getConstant('Rectangle Shape'), align: 'Left' });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-shape-circle-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_shape_circle', text: this.pdfViewer.localeObj.getConstant('Circle Shape'), align: 'Left' });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-shape-pentagon-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_shape_pentagon', text: this.pdfViewer.localeObj.getConstant('Pentagon Shape'), align: 'Left' });\n        return items;\n    };\n    // eslint-disable-next-line\n    AnnotationToolbar.prototype.createCalibrateToolbarItems = function () {\n        // eslint-disable-next-line\n        var items = [];\n        items.push({ prefixIcon: 'e-pv-calibrate-distance-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_calibrate_distance', text: this.pdfViewer.localeObj.getConstant(''), align: 'Left' });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-calibrate-perimeter-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_calibrate_perimeter', text: this.pdfViewer.localeObj.getConstant(''), align: 'Left' });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-calibrate-area-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_calibrate_area', text: this.pdfViewer.localeObj.getConstant(''), align: 'Left' });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-calibrate-radius-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_calibrate_radius', text: this.pdfViewer.localeObj.getConstant(''), align: 'Left' });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-calibrate-volume-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_calibrate_volume', text: this.pdfViewer.localeObj.getConstant(''), align: 'Left' });\n        return items;\n    };\n    AnnotationToolbar.prototype.onCalibrateToolbarClicked = function (args) {\n        var elementId = this.pdfViewer.element.id;\n        var measureModule = this.pdfViewer.annotation.measureAnnotationModule;\n        this.deselectAllItems();\n        this.resetFreeTextAnnot();\n        if (Browser.isDevice && !isBlazor()) {\n            // tslint:disable-next-line\n            var element = args.originalEvent.target;\n            this.pdfViewer.toolbarModule.selectItem(element.parentElement);\n        }\n        switch (args.originalEvent.target.id) {\n            case elementId + '_calibrate_distance':\n            case elementId + '_calibrate_distanceIcon':\n                measureModule.setAnnotationType('Distance');\n                this.onShapeDrawSelection(false);\n                this.updateColorInIcon(this.colorDropDownElement, measureModule.distanceFillColor);\n                this.updateColorInIcon(this.strokeDropDownElement, measureModule.distanceStrokeColor);\n                this.handleShapeTool(elementId + '_calibrate_distance');\n                break;\n            case elementId + '_calibrate_perimeter':\n            case elementId + '_calibrate_perimeterIcon':\n                measureModule.setAnnotationType('Perimeter');\n                this.onShapeDrawSelection(false);\n                this.updateColorInIcon(this.colorDropDownElement, measureModule.perimeterFillColor);\n                this.updateColorInIcon(this.strokeDropDownElement, measureModule.perimeterStrokeColor);\n                this.handleShapeTool(elementId + '_calibrate_perimeter');\n                break;\n            case elementId + '_calibrate_area':\n            case elementId + '_calibrate_areaIcon':\n                measureModule.setAnnotationType('Area');\n                this.onShapeDrawSelection(false);\n                this.updateColorInIcon(this.colorDropDownElement, measureModule.areaFillColor);\n                this.updateColorInIcon(this.strokeDropDownElement, measureModule.areaStrokeColor);\n                this.handleShapeTool(elementId + '_calibrate_area');\n                break;\n            case elementId + '_calibrate_radius':\n            case elementId + '_calibrate_radiusIcon':\n                measureModule.setAnnotationType('Radius');\n                this.onShapeDrawSelection(false);\n                this.updateColorInIcon(this.colorDropDownElement, measureModule.radiusFillColor);\n                this.updateColorInIcon(this.strokeDropDownElement, measureModule.radiusStrokeColor);\n                this.handleShapeTool(elementId + '_calibrate_radius');\n                break;\n            case elementId + '_calibrate_volume':\n            case elementId + '_calibrate_volumeIcon':\n                measureModule.setAnnotationType('Volume');\n                this.onShapeDrawSelection(false);\n                this.updateColorInIcon(this.colorDropDownElement, measureModule.volumeFillColor);\n                this.updateColorInIcon(this.strokeDropDownElement, measureModule.volumeStrokeColor);\n                this.handleShapeTool(elementId + '_calibrate_volume');\n                break;\n        }\n    };\n    AnnotationToolbar.prototype.onShapeDrawSelection = function (isShape) {\n        // eslint-disable-next-line\n        var annotation = this.pdfViewer.selectedItems.annotations[0];\n        if (!Browser.isDevice) {\n            this.updateInteractionTools();\n            this.enableAnnotationPropertiesTools(true);\n            if (isShape) {\n                this.shapeDropDown.toggle();\n            }\n            else {\n                this.calibrateDropDown.toggle();\n            }\n        }\n        this.pdfViewer.annotation.triggerAnnotationUnselectEvent();\n    };\n    AnnotationToolbar.prototype.afterCalibrateToolbarCreationForMobile = function () {\n        // eslint-disable-next-line max-len\n        this.primaryToolbar.addClassToolbarItem('_calibrate_distance', 'e-pv-calibrate-distance', this.pdfViewer.localeObj.getConstant('Calibrate Distance'));\n        this.primaryToolbar.addClassToolbarItem('_calibrate_perimeter', 'e-pv-calibrate-perimeter', this.pdfViewer.localeObj.getConstant('Calibrate Perimeter'));\n        // eslint-disable-next-line max-len\n        this.primaryToolbar.addClassToolbarItem('_calibrate_area', 'e-pv-calibrate-area', this.pdfViewer.localeObj.getConstant('Calibrate Area'));\n        this.primaryToolbar.addClassToolbarItem('_calibrate_radius', 'e-pv-calibrate-radius', this.pdfViewer.localeObj.getConstant('Calibrate Radius'));\n        // eslint-disable-next-line max-len\n        this.primaryToolbar.addClassToolbarItem('_calibrate_volume', 'e-pv-calibrate-volume', this.pdfViewer.localeObj.getConstant('Calibrate Volume'));\n    };\n    AnnotationToolbar.prototype.afterShapeToolbarCreationForMobile = function () {\n        // eslint-disable-next-line max-len\n        this.primaryToolbar.addClassToolbarItem('_annotation_color', 'e-pv-annotation-color-container', this.pdfViewer.localeObj.getConstant('Change Color'));\n        // eslint-disable-next-line max-len\n        this.primaryToolbar.addClassToolbarItem('_annotation_stroke', 'e-pv-annotation-stroke-container', this.pdfViewer.localeObj.getConstant('Change Stroke Color'));\n        // eslint-disable-next-line max-len\n        this.primaryToolbar.addClassToolbarItem('_annotation_thickness', 'e-pv-annotation-thickness-container', this.pdfViewer.localeObj.getConstant('Chnage Border Thickness'));\n        // eslint-disable-next-line max-len\n        this.primaryToolbar.addClassToolbarItem('_annotation_opacity', 'e-annotation-opacity-container', this.pdfViewer.localeObj.getConstant('Change Opacity'));\n        this.primaryToolbar.addClassToolbarItem('_shape_line', 'e-pv-shape-line', this.pdfViewer.localeObj.getConstant('Add line'));\n        this.primaryToolbar.addClassToolbarItem('_shape_arrow', 'e-pv-shape-arrow', this.pdfViewer.localeObj.getConstant('Add arrow'));\n        // eslint-disable-next-line max-len\n        this.primaryToolbar.addClassToolbarItem('_shape_rectangle', 'e-pv-shape-rectangle', this.pdfViewer.localeObj.getConstant('Add rectangle'));\n        // eslint-disable-next-line max-len\n        this.primaryToolbar.addClassToolbarItem('_shape_circle', 'e-pv-shape-circle', this.pdfViewer.localeObj.getConstant('Add circle'));\n        this.primaryToolbar.addClassToolbarItem('_shape_pentagon', 'e-pv-shape-pentagon', this.pdfViewer.localeObj.getConstant('Add polygon'));\n    };\n    AnnotationToolbar.prototype.afterShapeToolbarCreation = function () {\n        this.lineElement = this.primaryToolbar.addClassToolbarItem('_shape_line', 'e-pv-shape-line', this.pdfViewer.localeObj.getConstant('Add line'));\n        this.arrowElement = this.primaryToolbar.addClassToolbarItem('_shape_arrow', 'e-pv-shape-arrow', this.pdfViewer.localeObj.getConstant('Add arrow'));\n        // eslint-disable-next-line max-len\n        this.rectangleElement = this.primaryToolbar.addClassToolbarItem('_shape_rectangle', 'e-pv-shape-rectangle', this.pdfViewer.localeObj.getConstant('Add rectangle'));\n        // eslint-disable-next-line max-len\n        this.circleElement = this.primaryToolbar.addClassToolbarItem('_shape_circle', 'e-pv-shape-circle', this.pdfViewer.localeObj.getConstant('Add circle'));\n        this.polygonElement = this.primaryToolbar.addClassToolbarItem('_shape_pentagon', 'e-pv-shape-pentagon', this.pdfViewer.localeObj.getConstant('Add polygon'));\n    };\n    AnnotationToolbar.prototype.afterCalibrateToolbarCreation = function () {\n        // eslint-disable-next-line max-len\n        this.calibrateDistance = this.primaryToolbar.addClassToolbarItem('_calibrate_distance', 'e-pv-calibrate-distance', this.pdfViewer.localeObj.getConstant('Calibrate Distance'));\n        this.calibratePerimeter = this.primaryToolbar.addClassToolbarItem('_calibrate_perimeter', 'e-pv-calibrate-perimeter', this.pdfViewer.localeObj.getConstant('Calibrate Perimeter'));\n        // eslint-disable-next-line max-len\n        this.calibrateArea = this.primaryToolbar.addClassToolbarItem('_calibrate_area', 'e-pv-calibrate-area', this.pdfViewer.localeObj.getConstant('Calibrate Area'));\n        this.calibrateRadius = this.primaryToolbar.addClassToolbarItem('_calibrate_radius', 'e-pv-calibrate-radius', this.pdfViewer.localeObj.getConstant('Calibrate Radius'));\n        // eslint-disable-next-line max-len\n        this.calibrateVolume = this.primaryToolbar.addClassToolbarItem('_calibrate_volume', 'e-pv-calibrate-volume', this.pdfViewer.localeObj.getConstant('Calibrate Volume'));\n    };\n    AnnotationToolbar.prototype.afterMobileToolbarCreation = function () {\n        // eslint-disable-next-line max-len\n        this.highlightItem = this.primaryToolbar.addClassToolbarItem('_highlight', 'e-pv-highlight', this.pdfViewer.localeObj.getConstant('Highlight'));\n        this.underlineItem = this.primaryToolbar.addClassToolbarItem('_underline', 'e-pv-underline', this.pdfViewer.localeObj.getConstant('Underline'));\n        // eslint-disable-next-line max-len\n        this.strikethroughItem = this.primaryToolbar.addClassToolbarItem('_strikethrough', 'e-pv-strikethrough', this.pdfViewer.localeObj.getConstant('Strikethrough'));\n        // eslint-disable-next-line max-len\n        this.shapesItem = this.primaryToolbar.addClassToolbarItem('_annotation_shapes', 'e-pv-annotation-shapes', this.pdfViewer.localeObj.getConstant('Add Shapes'));\n        this.calibrateItem = this.primaryToolbar.addClassToolbarItem('_annotation_calibrate', 'e-pv-annotation-calibrate', this.pdfViewer.localeObj.getConstant('Calibrate'));\n        // eslint-disable-next-line max-len\n        this.freeTextEditItem = this.primaryToolbar.addClassToolbarItem('_annotation_freeTextEdit', 'e-pv-annotation-freeTextEdit', this.pdfViewer.localeObj.getConstant('Free Text'));\n        // eslint-disable-next-line max-len\n        this.commentItem = this.primaryToolbar.addClassToolbarItem('_comment', 'e-pv-comment', this.pdfViewer.localeObj.getConstant('Add Comments'));\n        // eslint-disable-next-line max-len\n        this.commentItem = this.primaryToolbar.addClassToolbarItem('_annotation_commentPanel', 'e-pv-annotation-comment-panel', this.pdfViewer.localeObj.getConstant('Comment Panel'));\n        // eslint-disable-next-line max-len\n        this.inkAnnotationItem = this.primaryToolbar.addClassToolbarItem('_annotation_ink', 'e-pv-annotation-ink', this.pdfViewer.localeObj.getConstant('Draw Ink'));\n        this.selectAnnotationDeleteItem(false);\n        this.enableCommentPanelTool(this.pdfViewer.enableCommentPanel);\n    };\n    AnnotationToolbar.prototype.createColorPicker = function (idString) {\n        var inputElement;\n        var existingInput = document.getElementById(idString + '_target');\n        if (existingInput) {\n            inputElement = existingInput;\n        }\n        else {\n            inputElement = createElement('input', { id: idString + '_target' });\n        }\n        document.body.appendChild(inputElement);\n        var colorPicker = new ColorPicker({\n            inline: true, mode: 'Palette', cssClass: 'e-show-value', enableOpacity: false,\n            value: '#000000', showButtons: false, modeSwitcher: false\n        });\n        if (this.pdfViewer.enableRtl) {\n            colorPicker.enableRtl = true;\n        }\n        colorPicker.appendTo(inputElement);\n        return colorPicker;\n    };\n    // eslint-disable-next-line\n    AnnotationToolbar.prototype.onColorPickerChange = function (args) {\n        // eslint-disable-next-line\n        var currentColor;\n        if (!isBlazor()) {\n            currentColor = (args.currentValue.hex === '') ? '#ffffff00' : args.currentValue.hex;\n        }\n        else {\n            currentColor = args[0];\n        }\n        if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n            if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyColorProperty(currentColor);\n            }\n            else {\n                switch (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode) {\n                    case 'Highlight':\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor = currentColor;\n                        break;\n                    case 'Underline':\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor = currentColor;\n                        break;\n                    case 'Strikethrough':\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor = currentColor;\n                        break;\n                }\n            }\n        }\n        if (this.pdfViewer.selectedItems.annotations.length === 1) {\n            if (isBlazor()) {\n                if (args[0] !== args[1]) {\n                    this.pdfViewer.annotation.modifyFillColor(currentColor);\n                }\n            }\n            else {\n                if (args.currentValue.hex !== args.previousValue.hex) {\n                    this.pdfViewer.annotation.modifyFillColor(currentColor);\n                }\n            }\n        }\n        else {\n            if (this.pdfViewer.annotation.shapeAnnotationModule) {\n                switch (this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode) {\n                    case 'Line':\n                        this.pdfViewer.annotation.shapeAnnotationModule.lineFillColor = currentColor;\n                        break;\n                    case 'Arrow':\n                        this.pdfViewer.annotation.shapeAnnotationModule.arrowFillColor = currentColor;\n                        break;\n                    case 'Rectangle':\n                        this.pdfViewer.annotation.shapeAnnotationModule.rectangleFillColor = currentColor;\n                        break;\n                    case 'Circle':\n                        this.pdfViewer.annotation.shapeAnnotationModule.circleFillColor = currentColor;\n                        break;\n                    case 'Polygon':\n                        this.pdfViewer.annotation.shapeAnnotationModule.polygonFillColor = currentColor;\n                        break;\n                }\n            }\n            if (this.pdfViewer.drawingObject) {\n                this.pdfViewer.drawingObject.fillColor = currentColor;\n                if (this.pdfViewer.drawingObject.shapeAnnotationType === 'FreeText') {\n                    this.pdfViewer.annotation.freeTextAnnotationModule.fillColor = currentColor;\n                }\n            }\n        }\n        if (isBlazor()) {\n            this.colorDropDownElementInBlazor = this.pdfViewer.element.querySelector('.e-pv-annotation-color-container');\n            this.updateColorInIcon(this.colorDropDownElementInBlazor, currentColor);\n        }\n        else {\n            this.updateColorInIcon(this.colorDropDownElement, currentColor);\n            this.colorDropDown.toggle();\n        }\n    };\n    // eslint-disable-next-line\n    AnnotationToolbar.prototype.onStrokePickerChange = function (args) {\n        // eslint-disable-next-line\n        var currentColor;\n        if (!isBlazor()) {\n            currentColor = (args.currentValue.hex === '') ? '#ffffff00' : args.currentValue.hex;\n        }\n        else {\n            currentColor = args[0];\n        }\n        if (this.pdfViewer.selectedItems.annotations.length === 1) {\n            if (isBlazor()) {\n                if (args[0] !== args[1]) {\n                    this.pdfViewer.annotation.modifyStrokeColor(currentColor);\n                }\n            }\n            else {\n                if (args.currentValue.hex !== args.previousValue.hex) {\n                    this.pdfViewer.annotation.modifyStrokeColor(currentColor);\n                }\n            }\n        }\n        else {\n            if (this.pdfViewer.annotation.shapeAnnotationModule) {\n                switch (this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode) {\n                    case 'Line':\n                        this.pdfViewer.annotation.shapeAnnotationModule.lineStrokeColor = currentColor;\n                        break;\n                    case 'Arrow':\n                        this.pdfViewer.annotation.shapeAnnotationModule.arrowStrokeColor = currentColor;\n                        break;\n                    case 'Rectangle':\n                        this.pdfViewer.annotation.shapeAnnotationModule.rectangleStrokeColor = currentColor;\n                        break;\n                    case 'Circle':\n                        this.pdfViewer.annotation.shapeAnnotationModule.circleStrokeColor = currentColor;\n                        break;\n                    case 'Polygon':\n                        this.pdfViewer.annotation.shapeAnnotationModule.polygonStrokeColor = currentColor;\n                        break;\n                }\n            }\n            // eslint-disable-next-line\n            var annotationModule = this.pdfViewer.annotation;\n            if (annotationModule && annotationModule.inkAnnotationModule) {\n                this.pdfViewer.inkAnnotationSettings.strokeColor = currentColor;\n            }\n            if (this.pdfViewer.drawingObject) {\n                this.pdfViewer.drawingObject.strokeColor = currentColor;\n            }\n            if (this.pdfViewer.drawingObject && this.pdfViewer.drawingObject.shapeAnnotationType === 'FreeText') {\n                this.pdfViewer.annotation.freeTextAnnotationModule.borderColor = currentColor;\n            }\n        }\n        if (isBlazor()) {\n            this.strokeDropDownElementInBlazor = this.pdfViewer.element.querySelector('.e-pv-annotation-stroke-container');\n            this.updateColorInIcon(this.strokeDropDownElementInBlazor, currentColor);\n        }\n        else {\n            this.updateColorInIcon(this.strokeDropDownElement, currentColor);\n            this.strokeDropDown.toggle();\n        }\n    };\n    /**\n     * @param element\n     * @param color\n     * @param element\n     * @param color\n     * @private\n     */\n    AnnotationToolbar.prototype.updateColorInIcon = function (element, color) {\n        if (isBlazor()) {\n            if (element) {\n                element.children[0].style.borderBottomColor = color;\n            }\n        }\n        else {\n            if (element) {\n                element.childNodes[0] ? element.childNodes[0].style.borderBottomColor = color : element.childNodes[0];\n            }\n        }\n    };\n    /**\n     * @param currentOption\n     * @private\n     */\n    AnnotationToolbar.prototype.updateTextPropertySelection = function (currentOption) {\n        if (currentOption === 'bold') {\n            document.getElementById(this.pdfViewer.element.id + '_bold').classList.toggle('textprop-option-active');\n        }\n        else if (currentOption === 'italic') {\n            document.getElementById(this.pdfViewer.element.id + '_italic').classList.toggle('textprop-option-active');\n        }\n        else if (currentOption === 'underline') {\n            document.getElementById(this.pdfViewer.element.id + '_underline_textinput').classList.toggle('textprop-option-active');\n            document.getElementById(this.pdfViewer.element.id + '_strikeout').classList.remove('textprop-option-active');\n        }\n        else if (currentOption === 'strikeout') {\n            document.getElementById(this.pdfViewer.element.id + '_strikeout').classList.toggle('textprop-option-active');\n            document.getElementById(this.pdfViewer.element.id + '_underline_textinput').classList.remove('textprop-option-active');\n        }\n    };\n    /**\n     * @param family\n     * @private\n     */\n    AnnotationToolbar.prototype.updateFontFamilyInIcon = function (family) {\n        this.fontFamily.value = family;\n    };\n    /**\n     * @param align\n     * @private\n     */\n    AnnotationToolbar.prototype.updateTextAlignInIcon = function (align) {\n        var className = 'e-btn-icon e-pv-left-align-icon e-pv-icon';\n        var leftAlign = document.getElementById(this.pdfViewer.element.id + '_left_align');\n        var rightAlign = document.getElementById(this.pdfViewer.element.id + '_right_align');\n        var centerAlign = document.getElementById(this.pdfViewer.element.id + '_center_align');\n        var justifyAlign = document.getElementById(this.pdfViewer.element.id + '_justify_align');\n        if (!isBlazor()) {\n            leftAlign.classList.remove('textprop-option-active');\n            rightAlign.classList.remove('textprop-option-active');\n            centerAlign.classList.remove('textprop-option-active');\n            justifyAlign.classList.remove('textprop-option-active');\n        }\n        if (align === 'Left') {\n            leftAlign.classList.add('textprop-option-active');\n        }\n        else if (align === 'Right') {\n            className = 'e-btn-icon e-pv-right-align-icon e-pv-icon';\n            rightAlign.classList.add('textprop-option-active');\n        }\n        else if (align === 'Center') {\n            className = 'e-btn-icon e-pv-center-align-icon e-pv-icon';\n            centerAlign.classList.add('textprop-option-active');\n        }\n        else if (align === 'Justify') {\n            className = 'e-btn-icon e-pv-justfiy-align-icon e-pv-icon';\n            justifyAlign.classList.add('textprop-option-active');\n        }\n        document.getElementById(this.pdfViewer.element.id + '_annotation_textalign').children[0].className = className;\n    };\n    /**\n     * @param size\n     * @private\n     */\n    AnnotationToolbar.prototype.updateFontSizeInIcon = function (size) {\n        this.fontSize.value = size + 'px';\n    };\n    AnnotationToolbar.prototype.updateOpacityIndicator = function () {\n        // eslint-disable-next-line\n        this.opacityIndicator.textContent = parseInt(Math.round(this.opacitySlider.value).toString()) + '%';\n    };\n    AnnotationToolbar.prototype.updateThicknessIndicator = function () {\n        this.thicknessIndicator.textContent = this.thicknessSlider.value + ' pt';\n    };\n    AnnotationToolbar.prototype.createSlider = function (idString) {\n        var outerContainer = createElement('div', { className: 'e-pv-annotation-opacity-popup-container' });\n        document.body.appendChild(outerContainer);\n        var label = createElement('span', { id: idString + '_label', className: 'e-pv-annotation-opacity-label' });\n        label.textContent = this.pdfViewer.localeObj.getConstant('Opacity');\n        var sliderElement = createElement('div', { id: idString + '_slider' });\n        this.opacitySlider = new Slider({ type: 'MinRange', cssClass: 'e-pv-annotation-opacity-slider', max: 100, min: 0 });\n        // eslint-disable-next-line max-len\n        this.opacityIndicator = createElement('div', { id: idString + '_opacity_indicator', className: 'e-pv-annotation-opacity-indicator' });\n        this.opacityIndicator.textContent = '100%';\n        if (!this.pdfViewer.enableRtl) {\n            outerContainer.appendChild(label);\n            outerContainer.appendChild(sliderElement);\n            this.opacitySlider.appendTo(sliderElement);\n            this.opacitySlider.element.parentElement.classList.add('e-pv-annotation-opacity-slider-container');\n            outerContainer.appendChild(this.opacityIndicator);\n        }\n        else {\n            outerContainer.appendChild(this.opacityIndicator);\n            outerContainer.appendChild(sliderElement);\n            this.opacitySlider.enableRtl = true;\n            this.opacitySlider.appendTo(sliderElement);\n            this.opacitySlider.element.parentElement.classList.add('e-pv-annotation-opacity-slider-container');\n            outerContainer.appendChild(label);\n        }\n        return outerContainer;\n    };\n    AnnotationToolbar.prototype.createThicknessSlider = function (idString) {\n        var outerContainer = createElement('div', { className: 'e-pv-annotation-thickness-popup-container' });\n        document.body.appendChild(outerContainer);\n        var label = createElement('span', { id: idString + '_label', className: 'e-pv-annotation-thickness-label' });\n        label.textContent = this.pdfViewer.localeObj.getConstant('Line Thickness');\n        var sliderElement = createElement('div', { id: idString + '_slider' });\n        this.thicknessSlider = new Slider({ type: 'MinRange', cssClass: 'e-pv-annotation-thickness-slider', max: 12, min: 0 });\n        // eslint-disable-next-line max-len\n        this.thicknessIndicator = createElement('div', { id: idString + '_thickness_indicator', className: 'e-pv-annotation-thickness-indicator' });\n        this.thicknessIndicator.textContent = '0 pt';\n        if (!this.pdfViewer.enableRtl) {\n            outerContainer.appendChild(label);\n            outerContainer.appendChild(sliderElement);\n            this.thicknessSlider.appendTo(sliderElement);\n            outerContainer.appendChild(this.thicknessIndicator);\n        }\n        else {\n            outerContainer.appendChild(this.thicknessIndicator);\n            outerContainer.appendChild(sliderElement);\n            this.thicknessSlider.enableRtl = true;\n            this.thicknessSlider.appendTo(sliderElement);\n            outerContainer.appendChild(label);\n        }\n        this.thicknessSlider.element.parentElement.classList.add('e-pv-annotation-thickness-slider-container');\n        return outerContainer;\n    };\n    AnnotationToolbar.prototype.afterToolbarCreation = function () {\n        // eslint-disable-next-line max-len\n        this.highlightItem = this.primaryToolbar.addClassToolbarItem('_highlight', 'e-pv-highlight', this.pdfViewer.localeObj.getConstant('Highlight'));\n        this.underlineItem = this.primaryToolbar.addClassToolbarItem('_underline', 'e-pv-underline', this.pdfViewer.localeObj.getConstant('Underline'));\n        // eslint-disable-next-line max-len\n        this.strikethroughItem = this.primaryToolbar.addClassToolbarItem('_strikethrough', 'e-pv-strikethrough', this.pdfViewer.localeObj.getConstant('Strikethrough'));\n        this.deleteItem = this.primaryToolbar.addClassToolbarItem('_annotation_delete', 'e-pv-annotation-delete', this.pdfViewer.localeObj.getConstant('Delete'));\n        // eslint-disable-next-line max-len\n        this.freeTextEditItem = this.primaryToolbar.addClassToolbarItem('_annotation_freeTextEdit', 'e-pv-annotation-freeTextEdit', this.pdfViewer.localeObj.getConstant('Free Text'));\n        // eslint-disable-next-line max-len\n        this.inkAnnotationItem = this.primaryToolbar.addClassToolbarItem('_annotation_ink', 'e-pv-annotation-ink', this.pdfViewer.localeObj.getConstant('Draw Ink'));\n        // eslint-disable-next-line max-len\n        this.pdfViewerBase.getElement('_annotation_shapes').setAttribute('aria-label', this.pdfViewer.localeObj.getConstant('Add Shapes'));\n        // eslint-disable-next-line max-len\n        this.pdfViewerBase.getElement('_annotation_calibrate').setAttribute('aria-label', this.pdfViewer.localeObj.getConstant('Calibrate'));\n        // eslint-disable-next-line max-len\n        this.pdfViewerBase.getElement('_comment').setAttribute('aria-label', this.pdfViewer.localeObj.getConstant('Add Comments'));\n        // eslint-disable-next-line max-len\n        this.commentItem = this.primaryToolbar.addClassToolbarItem('_annotation_commentPanel', 'e-pv-annotation-comment-panel', this.pdfViewer.localeObj.getConstant('Comment Panel'));\n        this.closeItem = this.primaryToolbar.addClassToolbarItem('_annotation_close', 'e-pv-annotation-tools-close', null);\n        this.pdfViewerBase.getElement('_annotation_close').setAttribute('aria-label', \"Close Annotation Toolbar\");\n        this.selectAnnotationDeleteItem(false);\n        this.enableTextMarkupAnnotationPropertiesTools(false);\n        this.enableCommentPanelTool(this.pdfViewer.enableCommentPanel);\n    };\n    AnnotationToolbar.prototype.onToolbarClicked = function (args) {\n        // eslint-disable-next-line\n        var annotation = this.pdfViewer.selectedItems.annotations[0];\n        if (args.originalEvent.target.id) {\n            this.pdfViewer.toolbarModule.updateStampItems();\n        }\n        // eslint-disable-next-line max-len\n        var isKeyBoardEvent = args.originalEvent && args.originalEvent.pointerType !== 'mouse' && args.originalEvent.pointerType !== 'touch';\n        this.pdfViewer.toolbarModule.deSelectCommentAnnotation();\n        switch (args.originalEvent.target.id) {\n            case this.pdfViewer.element.id + '_highlight':\n            case this.pdfViewer.element.id + '_highlightIcon':\n                this.pdfViewer.tool = '';\n                if (!Browser.isDevice) {\n                    this.pdfViewer.tool = '';\n                    this.resetFreeTextAnnot();\n                    this.handleHighlight();\n                }\n                else {\n                    this.pdfViewer.annotationModule.setAnnotationMode('Highlight');\n                    this.textMarkupForMobile(args);\n                }\n                this.pdfViewer.annotation.triggerAnnotationUnselectEvent();\n                break;\n            case this.pdfViewer.element.id + '_underline':\n            case this.pdfViewer.element.id + '_underlineIcon':\n                this.pdfViewer.tool = '';\n                if (!Browser.isDevice) {\n                    this.pdfViewer.tool = '';\n                    this.resetFreeTextAnnot();\n                    this.handleUnderline();\n                }\n                else {\n                    this.pdfViewer.annotationModule.setAnnotationMode('Underline');\n                    this.textMarkupForMobile(args);\n                }\n                this.pdfViewer.annotation.triggerAnnotationUnselectEvent();\n                break;\n            case this.pdfViewer.element.id + '_strikethrough':\n            case this.pdfViewer.element.id + '_strikethroughIcon':\n                this.pdfViewer.tool = '';\n                if (!Browser.isDevice) {\n                    this.pdfViewer.tool = '';\n                    this.resetFreeTextAnnot();\n                    this.handleStrikethrough();\n                }\n                else {\n                    this.pdfViewer.annotationModule.setAnnotationMode('Strikethrough');\n                    this.textMarkupForMobile(args);\n                }\n                this.pdfViewer.annotation.triggerAnnotationUnselectEvent();\n                break;\n            case this.pdfViewer.element.id + '_annotation_delete':\n            case this.pdfViewer.element.id + '_annotation_deleteIcon':\n                this.pdfViewer.annotationModule.deleteAnnotation();\n                this.resetFreeTextAnnot();\n                break;\n            case this.pdfViewer.element.id + '_annotation_commentPanel':\n            case this.pdfViewer.element.id + '_annotation_commentPanelIcon':\n                this.inkAnnotationSelected = false;\n                var commentPanel = document.getElementById(this.pdfViewer.element.id + '_commantPanel');\n                if (this.pdfViewer.annotation && this.pdfViewer.annotation.textMarkupAnnotationModule) {\n                    this.pdfViewer.annotation.textMarkupAnnotationModule.showHideDropletDiv(true);\n                }\n                if (commentPanel.style.display === 'block') {\n                    this.pdfViewerBase.navigationPane.closeCommentPanelContainer();\n                }\n                else {\n                    this.pdfViewer.annotationModule.showCommentsPanel();\n                    // eslint-disable-next-line max-len\n                    if (isKeyBoardEvent && !isNullOrUndefined(commentPanel.firstElementChild) && !isNullOrUndefined(commentPanel.firstElementChild.lastElementChild) && commentPanel.firstElementChild.lastElementChild instanceof HTMLButtonElement) {\n                        commentPanel.firstElementChild.lastElementChild.focus();\n                    }\n                }\n                break;\n            case this.pdfViewer.element.id + '_annotation_close':\n            case this.pdfViewer.element.id + '_annotation_closeIcon':\n                this.inkAnnotationSelected = false;\n                var commentsPanel = document.getElementById(this.pdfViewer.element.id + '_commantPanel');\n                if (commentsPanel.style.display === 'block') {\n                    this.pdfViewerBase.navigationPane.closeCommentPanelContainer();\n                }\n                this.showAnnotationToolbar(this.primaryToolbar.annotationItem);\n                break;\n            case this.pdfViewer.element.id + '_annotation_freeTextEdit':\n            case this.pdfViewer.element.id + '_annotation_freeTextEditIcon':\n                if (!Browser.isDevice) {\n                    this.resetFreeTextAnnot();\n                    this.handleFreeTextEditor();\n                }\n                else {\n                    this.pdfViewer.annotationModule.setAnnotationMode('FreeText');\n                    this.FreeTextForMobile();\n                }\n                break;\n            case this.pdfViewer.element.id + '_annotation_signature':\n            case this.pdfViewer.element.id + '_annotation_signatureIcon':\n                this.inkAnnotationSelected = false;\n                this.updateSignatureCount();\n                break;\n            case this.pdfViewer.element.id + '_annotation_ink':\n            case this.pdfViewer.element.id + '_annotation_inkIcon':\n                if (annotation) {\n                    this.pdfViewer.annotation.triggerAnnotationUnselectEvent();\n                }\n                this.pdfViewer.clearSelection(this.pdfViewer.currentPageNumber - 1);\n                if (this.pdfViewer.annotationModule.inkAnnotationModule) {\n                    // eslint-disable-next-line\n                    var currentPageNumber = this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber;\n                    if (currentPageNumber && currentPageNumber !== '') {\n                        // eslint-disable-next-line\n                        this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(parseInt(currentPageNumber));\n                        this.primaryToolbar.deSelectItem(this.inkAnnotationItem);\n                    }\n                }\n                if (!this.inkAnnotationSelected) {\n                    this.deselectAllItems();\n                    this.drawInkAnnotation();\n                }\n                else {\n                    this.inkAnnotationSelected = false;\n                }\n                break;\n            case this.pdfViewer.element.id + '_annotation_shapesIcon':\n            case this.pdfViewer.element.id + '_annotation_shapes':\n                if (Browser.isDevice) {\n                    this.shapeToolMobile(args);\n                }\n                break;\n            case this.pdfViewer.element.id + '_annotation_calibrateIcon':\n            case this.pdfViewer.element.id + '_annotation_calibrate':\n                if (Browser.isDevice) {\n                    this.calibrateToolMobile(args);\n                }\n                break;\n            case this.pdfViewer.element.id + '_commentIcon':\n            case this.pdfViewer.element.id + '_comment':\n                this.pdfViewerBase.isAddComment = true;\n                this.pdfViewerBase.isCommentIconAdded = true;\n                var commentsButton = document.getElementById(this.pdfViewer.element.id + '_comment');\n                commentsButton.classList.add('e-pv-select');\n                this.pdfViewer.toolbarModule.addComments(args);\n                break;\n        }\n    };\n    AnnotationToolbar.prototype.addInkAnnotation = function () {\n        this.pdfViewer.clearSelection(this.pdfViewer.currentPageNumber - 1);\n        if (this.pdfViewer.annotationModule.inkAnnotationModule) {\n            // eslint-disable-next-line\n            var currentPageNumber = this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber;\n            if (currentPageNumber && currentPageNumber !== '') {\n                // eslint-disable-next-line\n                this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(parseInt(currentPageNumber));\n                if (!isBlazor()) {\n                    this.primaryToolbar.deSelectItem(this.inkAnnotationItem);\n                }\n                else {\n                    this.primaryToolbar.deSelectItem(this.InkAnnotationElement);\n                    this.pdfViewerBase.focusViewerContainer();\n                }\n            }\n        }\n        if (!this.inkAnnotationSelected) {\n            this.deselectAllItemsInBlazor();\n            this.drawInkAnnotation();\n        }\n        else {\n            this.inkAnnotationSelected = false;\n        }\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.deselectInkAnnotation = function () {\n        if (!isBlazor()) {\n            this.primaryToolbar.deSelectItem(this.inkAnnotationItem);\n        }\n        else {\n            this.primaryToolbar.deSelectItem(this.InkAnnotationElement);\n            this.pdfViewerBase.focusViewerContainer();\n        }\n    };\n    AnnotationToolbar.prototype.drawInkAnnotation = function () {\n        this.inkAnnotationSelected = true;\n        if (!isBlazor()) {\n            this.primaryToolbar.selectItem(this.inkAnnotationItem);\n        }\n        else {\n            this.primaryToolbar.selectItem(this.InkAnnotationElement);\n        }\n        this.enableSignaturePropertiesTools(true);\n        this.pdfViewerBase.isToolbarInkClicked = true;\n        this.pdfViewer.annotationModule.inkAnnotationModule.drawInk();\n    };\n    AnnotationToolbar.prototype.resetFreeTextAnnot = function () {\n        if (this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.freeTextAnnotationModule) {\n            this.pdfViewer.annotation.freeTextAnnotationModule.isNewFreeTextAnnot = false;\n            this.pdfViewer.annotation.freeTextAnnotationModule.isNewAddedAnnot = false;\n            if (!Browser.isDevice) {\n                if (this.freeTextEditItem && !isBlazor()) {\n                    this.primaryToolbar.deSelectItem(this.freeTextEditItem);\n                }\n                else if (isBlazor()) {\n                    this.primaryToolbar.deSelectItem(this.FreeTextElement);\n                }\n                this.enableFreeTextAnnotationPropertiesTools(false);\n            }\n        }\n        if (this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.inkAnnotationModule) { // eslint-disable-next-line\n            var currentPageNumber = this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber;\n            if (currentPageNumber && currentPageNumber !== '') {\n                // eslint-disable-next-line\n                this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(parseInt(currentPageNumber));\n                if (!isBlazor()) {\n                    this.primaryToolbar.deSelectItem(this.inkAnnotationItem);\n                }\n                else {\n                    this.primaryToolbar.deSelectItem(this.InkAnnotationElement);\n                }\n            }\n        }\n        this.inkAnnotationSelected = false;\n    };\n    AnnotationToolbar.prototype.updateInkannotationItems = function () {\n        if (this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.inkAnnotationModule && this.inkAnnotationSelected) {\n            // eslint-disable-next-line\n            var currentPageNumber = this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber;\n            if (currentPageNumber && currentPageNumber !== '') {\n                // eslint-disable-next-line\n                this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(parseInt(currentPageNumber));\n                this.pdfViewerBase.isToolbarInkClicked = true;\n                this.pdfViewer.tool = 'Ink';\n                this.pdfViewer.clearSelection(currentPageNumber);\n            }\n        }\n    };\n    AnnotationToolbar.prototype.showSignaturepanel = function () {\n        this.pdfViewerBase.isToolbarSignClicked = true;\n        this.pdfViewerBase.signatureModule.showSignatureDialog(true);\n    };\n    AnnotationToolbar.prototype.handleFreeTextEditor = function () {\n        // eslint-disable-next-line\n        var annotation = this.pdfViewer.selectedItems.annotations[0];\n        this.enableFreeTextAnnotationPropertiesTools(true);\n        if (annotation) {\n            this.pdfViewer.fireAnnotationUnSelect(annotation.annotName, annotation.pageIndex, annotation);\n        }\n        this.pdfViewer.clearSelection(this.pdfViewer.currentPageNumber - 1);\n        if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n        }\n        this.isStrikethroughEnabled = false;\n        this.isHighlightEnabled = false;\n        this.isUnderlineEnabled = false;\n        var freeTextAnnotationModule = this.pdfViewer.annotation.freeTextAnnotationModule;\n        freeTextAnnotationModule.setAnnotationType('FreeText');\n        freeTextAnnotationModule.isNewFreeTextAnnot = true;\n        freeTextAnnotationModule.isNewAddedAnnot = true;\n        this.updateInteractionTools();\n        this.primaryToolbar.deSelectItem(this.highlightItem);\n        this.primaryToolbar.deSelectItem(this.underlineItem);\n        this.primaryToolbar.deSelectItem(this.strikethroughItem);\n        this.primaryToolbar.selectItem(this.freeTextEditItem);\n        this.updateColorInIcon(this.colorDropDownElement, this.pdfViewer.annotationModule.freeTextAnnotationModule.fillColor);\n        this.updateColorInIcon(this.strokeDropDownElement, this.pdfViewer.annotationModule.freeTextAnnotationModule.borderColor);\n        this.updateColorInIcon(this.fontColorElement, this.pdfViewer.annotationModule.freeTextAnnotationModule.fontColor);\n        this.updateFontFamilyInIcon(this.pdfViewer.annotationModule.freeTextAnnotationModule.fontFamily);\n        this.updateFontSizeInIcon(this.pdfViewer.annotationModule.freeTextAnnotationModule.fontSize);\n        this.updateTextAlignInIcon(this.pdfViewer.annotationModule.freeTextAnnotationModule.textAlign);\n        this.updateFontFamily();\n    };\n    AnnotationToolbar.prototype.updateFontFamily = function () {\n        // eslint-disable-next-line max-len\n        this.pdfViewer.annotationModule.freeTextAnnotationModule.isBold ? this.updateFontFamilyIcon('_bold', true) : this.updateFontFamilyIcon('_bold', false);\n        // eslint-disable-next-line max-len\n        this.pdfViewer.annotationModule.freeTextAnnotationModule.isItalic ? this.updateFontFamilyIcon('_italic', true) : this.updateFontFamilyIcon('_italic', false);\n        if (this.pdfViewer.annotationModule.freeTextAnnotationModule.isUnderline) {\n            this.updateFontFamilyIcon('_underline_textinput', true);\n            this.updateFontFamilyIcon('_strikeout', false);\n        }\n        else {\n            this.updateFontFamilyIcon('_underline_textinput', false);\n        }\n        if (this.pdfViewer.annotationModule.freeTextAnnotationModule.isStrikethrough) {\n            this.updateFontFamilyIcon('_strikeout', true);\n            this.updateFontFamilyIcon('_underline_textinput', false);\n        }\n        else {\n            this.updateFontFamilyIcon('_strikeout', false);\n        }\n    };\n    AnnotationToolbar.prototype.updateFontFamilyIcon = function (fontFamily, isActive) {\n        var fontFamilyElement = document.getElementById(this.pdfViewer.element.id + fontFamily);\n        isActive ? fontFamilyElement.classList.add('textprop-option-active') : fontFamilyElement.classList.remove('textprop-option-active');\n    };\n    /**\n     * @param element\n     * @param isInitialLoading\n     * @param element\n     * @param isInitialLoading\n     * @private\n     */\n    AnnotationToolbar.prototype.showAnnotationToolbar = function (element, isInitialLoading) {\n        if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n            if (!this.isToolbarHidden) {\n                // eslint-disable-next-line\n                var annotationModule = this.pdfViewer.annotationModule;\n                if (element) {\n                    this.primaryToolbar.deSelectItem(element);\n                }\n                else {\n                    if (this.pdfViewer.enableToolbar) {\n                        this.primaryToolbar.deSelectItem(this.primaryToolbar.annotationItem);\n                    }\n                }\n                this.adjustViewer(false);\n                // eslint-disable-next-line max-len\n                if (annotationModule && annotationModule.textMarkupAnnotationModule && annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                    this.enablePropertiesTool(annotationModule);\n                }\n                else {\n                    this.deselectAllItems();\n                }\n                this.toolbarElement.style.display = 'none';\n                if (!isInitialLoading) {\n                    this.pdfViewer.isAnnotationToolbarVisible = false;\n                }\n                if (this.pdfViewerBase.isPanMode) {\n                    this.primaryToolbar.updateInteractionTools(false);\n                }\n                else {\n                    this.primaryToolbar.updateInteractionTools(true);\n                }\n            }\n            else {\n                var toolBarInitialStatus = void 0;\n                if (this.toolbarElement) {\n                    toolBarInitialStatus = this.toolbarElement.style.display;\n                    this.toolbarElement.style.display = 'block';\n                }\n                if (!isInitialLoading) {\n                    this.pdfViewer.isAnnotationToolbarVisible = true;\n                }\n                if (element) {\n                    this.primaryToolbar.selectItem(element);\n                }\n                else {\n                    if (this.pdfViewer.enableToolbar) {\n                        this.primaryToolbar.selectItem(this.primaryToolbar.annotationItem);\n                    }\n                }\n                if (toolBarInitialStatus === 'none') {\n                    this.adjustViewer(true);\n                }\n            }\n            // eslint-disable-next-line max-len\n            if (this.pdfViewer.magnification && this.pdfViewer.magnification.fitType === 'fitToPage') {\n                this.pdfViewer.magnification.fitToPage();\n            }\n            this.enableAnnotationAddTools(true);\n            this.isToolbarHidden = !this.isToolbarHidden;\n        }\n    };\n    // eslint-disable-next-line\n    AnnotationToolbar.prototype.enablePropertiesTool = function (annotationModule) {\n        this.isHighlightEnabled = false;\n        this.isUnderlineEnabled = false;\n        this.isStrikethroughEnabled = false;\n        if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n            annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n        }\n        this.primaryToolbar.deSelectItem(this.highlightItem);\n        this.primaryToolbar.deSelectItem(this.underlineItem);\n        this.primaryToolbar.deSelectItem(this.strikethroughItem);\n        this.enableTextMarkupAnnotationPropertiesTools(true);\n        // eslint-disable-next-line max-len\n        this.updateColorInIcon(this.colorDropDownElement, annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation.color);\n        this.selectAnnotationDeleteItem(true);\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.applyAnnotationToolbarSettings = function () {\n        // eslint-disable-next-line\n        var annotationToolbarItems = this.pdfViewer.toolbarSettings.annotationToolbarItems;\n        if (annotationToolbarItems) {\n            if (annotationToolbarItems.indexOf('HighlightTool') !== -1) {\n                this.showHighlightTool(true, 0, 0);\n            }\n            else {\n                this.showHighlightTool(false, 0, 0);\n            }\n            if (annotationToolbarItems.indexOf('UnderlineTool') !== -1) {\n                this.showUnderlineTool(true, 1, 1);\n            }\n            else {\n                this.showUnderlineTool(false, 1, 1);\n            }\n            if (annotationToolbarItems.indexOf('StrikethroughTool') !== -1) {\n                this.showStrikethroughTool(true, 2, 2);\n            }\n            else {\n                this.showStrikethroughTool(false, 2, 2);\n            }\n            if (annotationToolbarItems.indexOf('ShapeTool') !== -1) {\n                this.showShapeAnnotationTool(true, 4, 4);\n            }\n            else {\n                this.showShapeAnnotationTool(false, 4, 4);\n            }\n            if (annotationToolbarItems.indexOf('CalibrateTool') !== -1) {\n                this.showCalibrateAnnotationTool(true, 6, 6);\n            }\n            else {\n                this.showCalibrateAnnotationTool(false, 6, 6);\n            }\n            if (annotationToolbarItems.indexOf('ColorEditTool') !== -1) {\n                this.showColorEditTool(true, 22, 22);\n            }\n            else {\n                this.showColorEditTool(false, 22, 22);\n            }\n            if (annotationToolbarItems.indexOf('StrokeColorEditTool') !== -1) {\n                this.showStrokeColorEditTool(true, 23, 23);\n            }\n            else {\n                this.showStrokeColorEditTool(false, 23, 23);\n            }\n            if (annotationToolbarItems.indexOf('ThicknessEditTool') !== -1) {\n                this.showThicknessEditTool(true, 24, 24);\n            }\n            else {\n                this.showThicknessEditTool(false, 24, 24);\n            }\n            if (annotationToolbarItems.indexOf('OpacityEditTool') !== -1) {\n                this.showOpacityEditTool(true, 25, 25);\n            }\n            else {\n                this.showOpacityEditTool(false, 25, 25);\n            }\n            if (annotationToolbarItems.indexOf('AnnotationDeleteTool') !== -1) {\n                this.showAnnotationDeleteTool(true, 27, 27);\n            }\n            else {\n                this.showAnnotationDeleteTool(false, 27, 27);\n            }\n            if (annotationToolbarItems.indexOf('StampAnnotationTool') !== -1) {\n                this.showStampAnnotationTool(true, 10, 10);\n            }\n            else {\n                this.showStampAnnotationTool(false, 10, 10);\n            }\n            if (annotationToolbarItems.indexOf('HandWrittenSignatureTool') !== -1) {\n                this.showSignatureTool(true, 12, 12);\n            }\n            else {\n                this.showSignatureTool(false, 12, 12);\n            }\n            if (annotationToolbarItems.indexOf('FreeTextAnnotationTool') !== -1) {\n                this.showFreeTextAnnotationTool(true, 8, 8);\n            }\n            else {\n                this.showFreeTextAnnotationTool(false, 8, 8);\n            }\n            if (annotationToolbarItems.indexOf('FontFamilyAnnotationTool') !== -1) {\n                this.showFontFamilyAnnotationTool(true, 16, 16);\n            }\n            else {\n                this.showFontFamilyAnnotationTool(false, 16, 16);\n            }\n            if (annotationToolbarItems.indexOf('FontSizeAnnotationTool') !== -1) {\n                this.showFontSizeAnnotationTool(true, 17, 17);\n            }\n            else {\n                this.showFontSizeAnnotationTool(false, 17, 17);\n            }\n            if (annotationToolbarItems.indexOf('FontStylesAnnotationTool') !== -1) {\n                this.showFontStylesAnnotationTool(true, 20, 20);\n            }\n            else {\n                this.showFontStylesAnnotationTool(false, 20, 20);\n            }\n            if (annotationToolbarItems.indexOf('FontAlignAnnotationTool') !== -1) {\n                this.showFontAlignAnnotationTool(true, 18, 18);\n            }\n            else {\n                this.showFontAlignAnnotationTool(false, 18, 18);\n            }\n            if (annotationToolbarItems.indexOf('FontColorAnnotationTool') !== -1) {\n                this.showFontColorAnnotationTool(true, 19, 19);\n            }\n            else {\n                this.showFontColorAnnotationTool(false, 19, 19);\n            }\n            if (annotationToolbarItems.indexOf('CommentPanelTool') !== -1) {\n                this.showCommentPanelTool(true, 28, 28);\n            }\n            else {\n                this.showCommentPanelTool(false, 28, 28);\n            }\n            this.showInkAnnotationTool();\n            this.showSeparator();\n        }\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.applyMobileAnnotationToolbarSettings = function () {\n        // eslint-disable-next-line\n        var annotationToolbarItems = this.pdfViewer.toolbarSettings.annotationToolbarItems;\n        if (annotationToolbarItems) {\n            if (annotationToolbarItems.indexOf('HighlightTool') !== -1) {\n                this.showHighlightTool(true, 2, 2);\n            }\n            else {\n                this.showHighlightTool(false, 2, 2);\n            }\n            if (annotationToolbarItems.indexOf('UnderlineTool') !== -1) {\n                this.showUnderlineTool(true, 3, 3);\n            }\n            else {\n                this.showUnderlineTool(false, 3, 3);\n            }\n            if (annotationToolbarItems.indexOf('StrikethroughTool') !== -1) {\n                this.showStrikethroughTool(true, 4, 4);\n            }\n            else {\n                this.showStrikethroughTool(false, 4, 4);\n            }\n            if (annotationToolbarItems.indexOf('ShapeTool') !== -1) {\n                this.showShapeAnnotationTool(true, 6, 6);\n            }\n            else {\n                this.showShapeAnnotationTool(false, 6, 6);\n            }\n            if (annotationToolbarItems.indexOf('CalibrateTool') !== -1) {\n                this.showCalibrateAnnotationTool(true, 8, 8);\n            }\n            else {\n                this.showCalibrateAnnotationTool(false, 8, 8);\n            }\n            var toolbarItems = this.pdfViewer.toolbarSettings.toolbarItems;\n            if (toolbarItems && toolbarItems.indexOf('CommentTool') !== -1) {\n                this.showStickyNoteToolInMobile(true);\n            }\n            else {\n                this.showStickyNoteToolInMobile(false);\n            }\n            if (annotationToolbarItems.indexOf('StampAnnotationTool') !== -1) {\n                this.showStampAnnotationTool(true, 12, 12);\n            }\n            else {\n                this.showStampAnnotationTool(false, 12, 12);\n            }\n            if (annotationToolbarItems.indexOf('HandWrittenSignatureTool') !== -1) {\n                this.showSignatureTool(true, 14, 14);\n            }\n            else {\n                this.showSignatureTool(false, 14, 14);\n            }\n            if (annotationToolbarItems.indexOf('FreeTextAnnotationTool') !== -1) {\n                this.showFreeTextAnnotationTool(true, 10, 10);\n            }\n            else {\n                this.showFreeTextAnnotationTool(false, 10, 10);\n            }\n            if (annotationToolbarItems.indexOf('CommentPanelTool') !== -1) {\n                this.showCommentPanelTool(true, 18, 18);\n            }\n            else {\n                this.showCommentPanelTool(false, 18, 18);\n            }\n            if (annotationToolbarItems.indexOf('InkAnnotationTool') !== -1) {\n                this.showInkTool(true, 16, 16);\n            }\n            else {\n                this.showInkTool(false, 16, 16);\n            }\n            this.showSeparatorInMobile();\n        }\n    };\n    AnnotationToolbar.prototype.showStickyNoteToolInMobile = function (isShow) {\n        this.isCommentBtnVisible = isShow;\n        this.applyHideToToolbar(isShow, 0, 0);\n    };\n    AnnotationToolbar.prototype.showSeparatorInMobile = function () {\n        if (!this.isCommentBtnVisible) {\n            this.applyHideToToolbar(false, 1, 1);\n        }\n        if ((!this.isHighlightBtnVisible && !this.isUnderlineBtnVisible && !this.isStrikethroughBtnVisible)) {\n            this.applyHideToToolbar(false, 5, 5);\n        }\n        if (!this.isShapeBtnVisible) {\n            this.applyHideToToolbar(false, 7, 7);\n        }\n        if (!this.isCalibrateBtnVisible) {\n            this.applyHideToToolbar(false, 9, 9);\n        }\n        if (!this.isFreeTextBtnVisible) {\n            this.applyHideToToolbar(false, 11, 11);\n        }\n        if (!this.isStampBtnVisible) {\n            this.applyHideToToolbar(false, 13, 13);\n        }\n        if (!this.isSignatureBtnVisible) {\n            this.applyHideToToolbar(false, 15, 15);\n        }\n        if (!this.isInkBtnVisible) {\n            this.applyHideToToolbar(false, 17, 17);\n        }\n    };\n    AnnotationToolbar.prototype.showInkAnnotationTool = function () {\n        if (this.pdfViewer.toolbarSettings.annotationToolbarItems.indexOf('InkAnnotationTool') !== -1) {\n            this.showInkTool(true, 14, 14);\n        }\n        else {\n            this.showInkTool(false, 14, 14);\n        }\n    };\n    AnnotationToolbar.prototype.showSeparator = function () {\n        if ((!this.isHighlightBtnVisible && !this.isUnderlineBtnVisible && !this.isStrikethroughBtnVisible)) {\n            this.applyHideToToolbar(false, 3, 3);\n        }\n        if (!this.isShapeBtnVisible) {\n            this.applyHideToToolbar(false, 5, 5);\n        }\n        if (!this.isCalibrateBtnVisible) {\n            this.applyHideToToolbar(false, 7, 7);\n        }\n        if (!this.isFreeTextBtnVisible) {\n            this.applyHideToToolbar(false, 9, 9);\n        }\n        if (!this.isStampBtnVisible) {\n            this.applyHideToToolbar(false, 11, 11);\n        }\n        if (!this.isSignatureBtnVisible) {\n            this.applyHideToToolbar(false, 13, 13);\n        }\n        if (!this.isInkBtnVisible) {\n            this.applyHideToToolbar(false, 15, 15);\n        }\n        // eslint-disable-next-line max-len\n        if (!this.isFontFamilyToolVisible && !this.isFontSizeToolVisible && !this.isFontColorToolVisible && !this.isFontAlignToolVisible && !this.isFontStylesToolVisible) {\n            this.applyHideToToolbar(false, 21, 21);\n        }\n        // eslint-disable-next-line max-len\n        if ((!this.isColorToolVisible && !this.isStrokeColorToolVisible && !this.isThicknessToolVisible && !this.isOpacityToolVisible) || !this.isDeleteAnnotationToolVisible) {\n            this.applyHideToToolbar(false, 26, 26);\n        }\n    };\n    AnnotationToolbar.prototype.showHighlightTool = function (isShow, startIndex, endIndex) {\n        this.isHighlightBtnVisible = isShow;\n        this.applyHideToToolbar(isShow, startIndex, endIndex);\n    };\n    AnnotationToolbar.prototype.showUnderlineTool = function (isShow, startIndex, endIndex) {\n        this.isUnderlineBtnVisible = isShow;\n        this.applyHideToToolbar(isShow, startIndex, endIndex);\n    };\n    AnnotationToolbar.prototype.showStrikethroughTool = function (isShow, startIndex, endIndex) {\n        this.isStrikethroughBtnVisible = isShow;\n        this.applyHideToToolbar(isShow, startIndex, endIndex);\n    };\n    AnnotationToolbar.prototype.showShapeAnnotationTool = function (isShow, startIndex, endIndex) {\n        this.isShapeBtnVisible = isShow;\n        this.applyHideToToolbar(isShow, startIndex, endIndex);\n    };\n    AnnotationToolbar.prototype.showCalibrateAnnotationTool = function (isShow, startIndex, endIndex) {\n        this.isCalibrateBtnVisible = isShow;\n        this.applyHideToToolbar(isShow, startIndex, endIndex);\n    };\n    AnnotationToolbar.prototype.showFreeTextAnnotationTool = function (isShow, startIndex, endIndex) {\n        this.isFreeTextBtnVisible = isShow;\n        this.applyHideToToolbar(isShow, startIndex, endIndex);\n    };\n    AnnotationToolbar.prototype.showStampAnnotationTool = function (isShow, startIndex, endIndex) {\n        this.isStampBtnVisible = isShow;\n        this.applyHideToToolbar(isShow, startIndex, endIndex);\n    };\n    AnnotationToolbar.prototype.showSignatureTool = function (isShow, startIndex, endIndex) {\n        this.isSignatureBtnVisible = isShow;\n        this.applyHideToToolbar(isShow, startIndex, endIndex);\n    };\n    AnnotationToolbar.prototype.showInkTool = function (isShow, startIndex, endIndex) {\n        this.isInkBtnVisible = isShow;\n        this.applyHideToToolbar(isShow, startIndex, endIndex);\n    };\n    AnnotationToolbar.prototype.showFontFamilyAnnotationTool = function (isShow, startIndex, endIndex) {\n        this.isFontFamilyToolVisible = isShow;\n        this.applyHideToToolbar(isShow, startIndex, endIndex);\n    };\n    AnnotationToolbar.prototype.showFontSizeAnnotationTool = function (isShow, startIndex, endIndex) {\n        this.isFontSizeToolVisible = isShow;\n        this.applyHideToToolbar(isShow, startIndex, endIndex);\n    };\n    AnnotationToolbar.prototype.showFontAlignAnnotationTool = function (isShow, startIndex, endIndex) {\n        this.isFontAlignToolVisible = isShow;\n        this.applyHideToToolbar(isShow, startIndex, endIndex);\n    };\n    AnnotationToolbar.prototype.showFontColorAnnotationTool = function (isShow, startIndex, endIndex) {\n        this.isFontColorToolVisible = isShow;\n        this.applyHideToToolbar(isShow, startIndex, endIndex);\n    };\n    AnnotationToolbar.prototype.showFontStylesAnnotationTool = function (isShow, startIndex, endIndex) {\n        this.isFontStylesToolVisible = isShow;\n        this.applyHideToToolbar(isShow, startIndex, endIndex);\n    };\n    AnnotationToolbar.prototype.showColorEditTool = function (isShow, startIndex, endIndex) {\n        this.isColorToolVisible = isShow;\n        this.applyHideToToolbar(isShow, startIndex, endIndex);\n    };\n    AnnotationToolbar.prototype.showStrokeColorEditTool = function (isShow, startIndex, endIndex) {\n        this.isStrokeColorToolVisible = isShow;\n        this.applyHideToToolbar(isShow, startIndex, endIndex);\n    };\n    AnnotationToolbar.prototype.showThicknessEditTool = function (isShow, startIndex, endIndex) {\n        this.isThicknessToolVisible = isShow;\n        this.applyHideToToolbar(isShow, startIndex, endIndex);\n    };\n    AnnotationToolbar.prototype.showOpacityEditTool = function (isShow, startIndex, endIndex) {\n        this.isOpacityToolVisible = isShow;\n        this.applyHideToToolbar(isShow, startIndex, endIndex);\n    };\n    AnnotationToolbar.prototype.showAnnotationDeleteTool = function (isShow, startIndex, endIndex) {\n        this.isDeleteAnnotationToolVisible = isShow;\n        this.applyHideToToolbar(isShow, startIndex, endIndex);\n    };\n    AnnotationToolbar.prototype.showCommentPanelTool = function (isShow, startIndex, endIndex) {\n        this.isCommentPanelBtnVisible = isShow;\n        this.applyHideToToolbar(isShow, startIndex, endIndex);\n    };\n    AnnotationToolbar.prototype.applyHideToToolbar = function (show, startIndex, endIndex) {\n        var isHide = !show;\n        for (var index = startIndex; index <= endIndex; index++) {\n            var toolbar_1 = void 0;\n            var propertyToolbarElement = (this.propertyToolbar && this.propertyToolbar.element) ? this.propertyToolbar.element : null;\n            var toolbarElement = (this.toolbar && this.toolbar.element) ? this.toolbar.element : null;\n            if (toolbarElement && toolbarElement.children && toolbarElement.children.length > 0) {\n                toolbar_1 = this.toolbar;\n            }\n            else if (Browser.isDevice && propertyToolbarElement && propertyToolbarElement.children && propertyToolbarElement.children.length > 0) {\n                toolbar_1 = this.propertyToolbar;\n            }\n            if (toolbar_1 && toolbar_1.items[index]) {\n                var className = toolbar_1.items[index].cssClass;\n                if (className && className !== '') {\n                    // Querying the toolbar item\n                    var element = toolbar_1.element.querySelector('.' + className);\n                    if (element) {\n                        this.toolbar.hideItem(element, isHide);\n                    }\n                }\n                else {\n                    toolbar_1.hideItem(index, isHide);\n                }\n            }\n        }\n    };\n    /**\n     * @param isAdjust\n     * @private\n     */\n    AnnotationToolbar.prototype.adjustViewer = function (isAdjust) {\n        var splitterElement;\n        var toolbarContainer;\n        var annotationToolbarHeight;\n        if (isBlazor()) {\n            splitterElement = this.pdfViewer.element.querySelector('.e-pv-sidebar-toolbar-splitter');\n            toolbarContainer = this.pdfViewer.element.querySelector('.e-pv-toolbar');\n            var annotationToolbarContainer = this.pdfViewer.element.querySelector('.e-pv-annotation-toolbar');\n            annotationToolbarHeight = this.getToolbarHeight(annotationToolbarContainer);\n        }\n        else {\n            splitterElement = this.pdfViewerBase.getElement('_sideBarToolbarSplitter');\n            toolbarContainer = this.pdfViewerBase.getElement('_toolbarContainer');\n            annotationToolbarHeight = this.getToolbarHeight(this.toolbarElement);\n        }\n        var toolbarHeight = this.getToolbarHeight(toolbarContainer);\n        var sideBarToolbar = this.pdfViewerBase.navigationPane.sideBarToolbar;\n        var sideBarContentContainer = this.pdfViewerBase.navigationPane.sideBarContentContainer;\n        var commentsContainer = this.pdfViewerBase.navigationPane.commentPanelContainer;\n        var commentPanelResizer = this.pdfViewerBase.navigationPane.commentPanelResizer;\n        var newToolbarHeight = '';\n        if (isAdjust) {\n            if (this.pdfViewer.enableToolbar) {\n                sideBarToolbar.style.top = (toolbarHeight + annotationToolbarHeight) + 'px';\n                sideBarContentContainer.style.top = (toolbarHeight + annotationToolbarHeight) + 'px';\n                splitterElement.style.top = (toolbarHeight + annotationToolbarHeight) + 'px';\n                commentsContainer.style.top = (toolbarHeight + annotationToolbarHeight) + 'px';\n                commentPanelResizer.style.top = (toolbarHeight + annotationToolbarHeight) + 'px';\n            }\n            else {\n                sideBarToolbar.style.top = (annotationToolbarHeight) + 'px';\n                sideBarContentContainer.style.top = (annotationToolbarHeight) + 'px';\n                splitterElement.style.top = (annotationToolbarHeight) + 'px';\n                commentsContainer.style.top = (annotationToolbarHeight) + 'px';\n                commentPanelResizer.style.top = (toolbarHeight + annotationToolbarHeight) + 'px';\n            }\n            if (!this.pdfViewer.enableToolbar) {\n                toolbarHeight = 0;\n            }\n            // eslint-disable-next-line max-len\n            this.pdfViewerBase.viewerContainer.style.height = this.updateViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer), (annotationToolbarHeight + toolbarHeight)) + 'px';\n            newToolbarHeight = this.getNavigationToolbarHeight(annotationToolbarHeight + toolbarHeight);\n            sideBarToolbar.style.height = newToolbarHeight;\n            splitterElement.style.height = newToolbarHeight;\n            commentPanelResizer.style.height = newToolbarHeight;\n            sideBarContentContainer.style.height = newToolbarHeight;\n        }\n        else {\n            if (this.pdfViewer.enableToolbar) {\n                // eslint-disable-next-line max-len\n                sideBarToolbar.style.top = toolbarHeight + 'px';\n                sideBarContentContainer.style.top = toolbarHeight + 'px';\n                splitterElement.style.top = toolbarHeight + 'px';\n                commentsContainer.style.top = toolbarHeight + 'px';\n                commentPanelResizer.style.top = toolbarHeight + 'px';\n            }\n            else {\n                sideBarToolbar.style.top = 1 + 'px';\n                sideBarToolbar.style.height = '100%';\n                sideBarContentContainer.style.top = 1 + 'px';\n                sideBarContentContainer.style.height = '100%';\n                splitterElement.style.top = 1 + 'px';\n                splitterElement.style.height = '100%';\n                commentsContainer.style.top = 1 + 'px';\n                commentsContainer.style.height = '100%';\n                commentPanelResizer.style.top = 1 + 'px';\n                commentPanelResizer.style.height = '100%';\n            }\n            if (!this.pdfViewer.enableToolbar) {\n                toolbarHeight = 0;\n            }\n            // eslint-disable-next-line max-len\n            this.pdfViewerBase.viewerContainer.style.height = this.updateViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer), annotationToolbarHeight) + 'px';\n            newToolbarHeight = this.getNavigationToolbarHeight(toolbarHeight);\n            sideBarToolbar.style.height = newToolbarHeight;\n            splitterElement.style.height = newToolbarHeight;\n            commentPanelResizer.style.height = newToolbarHeight;\n            sideBarContentContainer.style.height = newToolbarHeight;\n            if (this.pdfViewerBase.viewerContainer.style.height === '0px') {\n                // eslint-disable-next-line\n                this.pdfViewerBase.viewerContainer.style.height = (parseInt(this.pdfViewer.element.style.height) - parseInt(sideBarToolbar.style.top)) + 'px';\n            }\n        }\n    };\n    AnnotationToolbar.prototype.updateContentContainerHeight = function (isAdjust, isBlazor) {\n        var annotationToolbarHeight;\n        if (isBlazor) {\n            var annotationToolbarContainer = this.pdfViewer.element.querySelector('.e-pv-annotation-toolbar');\n            annotationToolbarHeight = this.getToolbarHeight(annotationToolbarContainer);\n        }\n        else {\n            annotationToolbarHeight = this.getToolbarHeight(this.toolbarElement);\n        }\n        var sideBarClientRect = this.pdfViewerBase.navigationPane.sideBarContentContainer.getBoundingClientRect();\n        if (sideBarClientRect.height !== 0) {\n            if (isAdjust) {\n                // eslint-disable-next-line max-len\n                this.pdfViewerBase.navigationPane.sideBarContentContainer.style.height = sideBarClientRect.height - annotationToolbarHeight + 'px';\n            }\n            else {\n                // eslint-disable-next-line max-len\n                this.pdfViewerBase.navigationPane.sideBarContentContainer.style.height = sideBarClientRect.height + annotationToolbarHeight + 'px';\n            }\n        }\n    };\n    AnnotationToolbar.prototype.getToolbarHeight = function (element) {\n        var toolbarHeight = element.getBoundingClientRect().height;\n        if (toolbarHeight === 0 && element === this.pdfViewerBase.getElement('_toolbarContainer')) {\n            // getComputedStyle gets the value from style and toolbar border height is added to it.\n            // eslint-disable-next-line\n            toolbarHeight = parseFloat(window.getComputedStyle(element)['height']) + this.toolbarBorderHeight;\n        }\n        return toolbarHeight;\n    };\n    AnnotationToolbar.prototype.getNavigationToolbarHeight = function (toolbarHeight) {\n        var height = this.pdfViewer.element.getBoundingClientRect().height;\n        return (height !== 0) ? height - toolbarHeight + 'px' : '';\n    };\n    AnnotationToolbar.prototype.handleHighlight = function () {\n        if (!this.isHighlightEnabled) {\n            this.updateInteractionTools();\n            this.clearShapeMode();\n            this.clearMeasureMode();\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations('Highlight');\n            this.primaryToolbar.selectItem(this.highlightItem);\n            this.primaryToolbar.deSelectItem(this.underlineItem);\n            this.primaryToolbar.deSelectItem(this.strikethroughItem);\n            this.primaryToolbar.deSelectItem(this.freeTextEditItem);\n            this.primaryToolbar.deSelectItem(this.inkAnnotationItem);\n            this.enableTextMarkupAnnotationPropertiesTools(true);\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor = null;\n            this.setCurrentColorInPicker();\n            this.updateColorInIcon(this.colorDropDownElement, this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor);\n            this.isHighlightEnabled = true;\n            this.isUnderlineEnabled = false;\n            this.isStrikethroughEnabled = false;\n        }\n        else {\n            this.deselectAllItems();\n        }\n    };\n    AnnotationToolbar.prototype.handleUnderline = function () {\n        if (!this.isUnderlineEnabled) {\n            this.updateInteractionTools();\n            this.clearShapeMode();\n            this.clearMeasureMode();\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations('Underline');\n            this.primaryToolbar.selectItem(this.underlineItem);\n            this.primaryToolbar.deSelectItem(this.highlightItem);\n            this.primaryToolbar.deSelectItem(this.strikethroughItem);\n            this.primaryToolbar.deSelectItem(this.freeTextEditItem);\n            this.primaryToolbar.deSelectItem(this.inkAnnotationItem);\n            this.enableTextMarkupAnnotationPropertiesTools(true);\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor = null;\n            this.setCurrentColorInPicker();\n            this.updateColorInIcon(this.colorDropDownElement, this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor);\n            this.isUnderlineEnabled = true;\n            this.isHighlightEnabled = false;\n            this.isStrikethroughEnabled = false;\n        }\n        else {\n            this.deselectAllItems();\n        }\n    };\n    AnnotationToolbar.prototype.handleStrikethrough = function () {\n        if (!this.isStrikethroughEnabled) {\n            this.updateInteractionTools();\n            this.clearShapeMode();\n            this.clearMeasureMode();\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations('Strikethrough');\n            this.primaryToolbar.selectItem(this.strikethroughItem);\n            this.primaryToolbar.deSelectItem(this.highlightItem);\n            this.primaryToolbar.deSelectItem(this.underlineItem);\n            this.primaryToolbar.deSelectItem(this.freeTextEditItem);\n            this.primaryToolbar.deSelectItem(this.inkAnnotationItem);\n            this.enableTextMarkupAnnotationPropertiesTools(true);\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor = null;\n            this.setCurrentColorInPicker();\n            // eslint-disable-next-line max-len\n            this.updateColorInIcon(this.colorDropDownElement, this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor);\n            this.isStrikethroughEnabled = true;\n            this.isHighlightEnabled = false;\n            this.isUnderlineEnabled = false;\n        }\n        else {\n            this.deselectAllItems();\n        }\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.deselectAllItemsInBlazor = function () {\n        if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.showHideDropletDiv(true);\n        }\n        if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n            this.primaryToolbar.deSelectItem(this.HighlightElement);\n            this.primaryToolbar.deSelectItem(this.UnderlineElement);\n            this.primaryToolbar.deSelectItem(this.StrikethroughElement);\n            this.primaryToolbar.deSelectItem(this.FreeTextElement);\n            this.primaryToolbar.deSelectItem(this.InkAnnotationElement);\n            this.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateTextMarkupButtons', false, false, false);\n        }\n        this.resetFreeTextAnnot();\n        this.clearTextMarkupMode();\n        this.clearShapeMode();\n        this.clearMeasureMode();\n        this.pdfViewer.tool = '';\n        if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n            this.enableTextMarkupAnnotationPropertiesTools(false);\n            this.enableFreeTextAnnotationPropertiesTools(false);\n            this.updateColorInIcon(this.colorDropDownElement, '#000000');\n            this.updateColorInIcon(this.strokeDropDownElement, '#000000');\n            this.updateColorInIcon(this.fontColorElement, '#000000');\n            this.selectAnnotationDeleteItem(false);\n        }\n        if (this.pdfViewer.annotationModule) {\n            this.pdfViewer.annotationModule.freeTextAnnotationModule.isNewFreeTextAnnot = false;\n        }\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.deselectAllItems = function () {\n        var isBlazorPlatform = isBlazor();\n        this.isHighlightEnabled = false;\n        this.isUnderlineEnabled = false;\n        this.isStrikethroughEnabled = false;\n        if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.showHideDropletDiv(true);\n        }\n        if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n            if (isBlazorPlatform) {\n                this.primaryToolbar.deSelectItem(this.pdfViewer.toolbar.SelectToolElement);\n                this.primaryToolbar.selectItem(this.pdfViewer.toolbar.PanElement);\n                this.primaryToolbar.deSelectItem(this.HighlightElement);\n                this.primaryToolbar.deSelectItem(this.UnderlineElement);\n                this.primaryToolbar.deSelectItem(this.StrikethroughElement);\n                this.primaryToolbar.deSelectItem(this.FreeTextElement);\n                this.primaryToolbar.deSelectItem(this.InkAnnotationElement);\n            }\n            else {\n                this.primaryToolbar.deSelectItem(this.highlightItem);\n                this.primaryToolbar.deSelectItem(this.underlineItem);\n                this.primaryToolbar.deSelectItem(this.strikethroughItem);\n                this.primaryToolbar.deSelectItem(this.freeTextEditItem);\n                this.primaryToolbar.deSelectItem(this.inkAnnotationItem);\n            }\n        }\n        this.resetFreeTextAnnot();\n        this.clearTextMarkupMode();\n        this.clearShapeMode();\n        this.clearMeasureMode();\n        this.pdfViewer.tool = '';\n        if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n            this.enableTextMarkupAnnotationPropertiesTools(false);\n            this.enableFreeTextAnnotationPropertiesTools(false);\n            this.updateColorInIcon(this.colorDropDownElement, '#000000');\n            this.updateColorInIcon(this.strokeDropDownElement, '#000000');\n            this.updateColorInIcon(this.fontColorElement, '#000000');\n            this.selectAnnotationDeleteItem(false);\n        }\n        if (this.pdfViewer.annotationModule) {\n            this.pdfViewer.annotationModule.freeTextAnnotationModule.isNewFreeTextAnnot = false;\n        }\n    };\n    AnnotationToolbar.prototype.updateInteractionTools = function () {\n        if (this.pdfViewer.enableTextSelection) {\n            this.pdfViewerBase.initiateTextSelectMode();\n            if (!Browser.isDevice) {\n                this.pdfViewer.toolbar.updateInteractionTools(true);\n            }\n        }\n        else if (!Browser.isDevice) {\n            this.pdfViewer.toolbar.updateInteractionTools(false);\n        }\n    };\n    /**\n     * @param isEnable\n     * @private\n     */\n    AnnotationToolbar.prototype.selectAnnotationDeleteItem = function (isEnable, deleteIconCicked) {\n        if (!isBlazor() && !Browser.isDevice) {\n            if (this.toolbar) {\n                if (isEnable) {\n                    // eslint-disable-next-line\n                    var annotation = this.pdfViewer.annotationModule.findCurrentAnnotation();\n                    if (annotation) {\n                        // eslint-disable-next-line\n                        if (annotation.annotationSettings && annotation.annotationSettings.isLock) {\n                            if (this.pdfViewer.annotationModule.checkAllowedInteractions('Delete', annotation)) {\n                                this.enableItems(this.deleteItem.parentElement, isEnable);\n                            }\n                            else {\n                                this.enableItems(this.deleteItem.parentElement, false);\n                            }\n                        }\n                        else {\n                            this.enableItems(this.deleteItem.parentElement, isEnable);\n                        }\n                    }\n                }\n                else {\n                    this.enableItems(this.deleteItem.parentElement, isEnable);\n                }\n            }\n        }\n        else {\n            if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n                if (isEnable) {\n                    // eslint-disable-next-line\n                    var annotation = this.pdfViewer.annotationModule.findCurrentAnnotation();\n                    if (annotation) {\n                        // eslint-disable-next-line\n                        if (annotation.annotationSettings && annotation.annotationSettings.isLock) {\n                            if (this.pdfViewer.annotationModule.checkAllowedInteractions('Delete', annotation)) {\n                                this.pdfViewerBase.blazorUIAdaptor.EnableDeleteOption(isEnable);\n                            }\n                            else {\n                                this.pdfViewerBase.blazorUIAdaptor.EnableDeleteOption(false);\n                            }\n                        }\n                        else if (this.pdfViewerBase.blazorUIAdaptor) {\n                            this.pdfViewerBase.blazorUIAdaptor.EnableDeleteOption(isEnable);\n                        }\n                    }\n                }\n                else if (this.pdfViewerBase.blazorUIAdaptor) {\n                    this.pdfViewerBase.blazorUIAdaptor.EnableDeleteOption(isEnable);\n                }\n                if (deleteIconCicked) {\n                    this.pdfViewerBase.focusViewerContainer();\n                }\n            }\n        }\n    };\n    /**\n     * @param isEnable\n     * @private\n     */\n    AnnotationToolbar.prototype.enableTextMarkupAnnotationPropertiesTools = function (isEnable) {\n        if (!Browser.isDevice) {\n            if (!isBlazor()) {\n                this.enableItems(this.colorDropDownElement.parentElement, isEnable);\n                this.enableItems(this.opacityDropDownElement.parentElement, isEnable);\n                if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n                    this.enableItems(this.strokeDropDownElement.parentElement, false);\n                    this.enableItems(this.thicknessElement.parentElement, false);\n                    this.enableItems(this.fontFamilyElement.parentElement, false);\n                    this.enableItems(this.fontSizeElement.parentElement, false);\n                    this.enableItems(this.fontColorElement.parentElement, false);\n                    this.enableItems(this.textAlignElement.parentElement, false);\n                    this.enableItems(this.textPropElement.parentElement, false);\n                }\n            }\n            else {\n                // this.pdfViewer._dotnetInstance.invokeMethodAsync('AnnotationSelect', 'TextMarkup');\n                this.pdfViewerBase.blazorUIAdaptor.enableTextMarkupAnnotationPropertiesTools(isEnable);\n            }\n        }\n    };\n    AnnotationToolbar.prototype.checkAnnotationPropertiesChange = function () {\n        // eslint-disable-next-line\n        var annotation = this.pdfViewer.selectedItems.annotations[0];\n        if (annotation && annotation.annotationSettings) {\n            // eslint-disable-next-line\n            var isLock = annotation.annotationSettings.isLock;\n            if (isLock) {\n                if (this.pdfViewer.annotationModule.checkAllowedInteractions('PropertyChange', annotation)) {\n                    return true;\n                }\n                else {\n                    return false;\n                }\n            }\n        }\n        return true;\n    };\n    /**\n     * @param isEnable\n     * @private\n     */\n    AnnotationToolbar.prototype.enableAnnotationPropertiesTools = function (isEnable) {\n        if (!Browser.isDevice) {\n            var isPropertiesChanges = this.checkAnnotationPropertiesChange();\n            if (!isEnable) {\n                isPropertiesChanges = true;\n            }\n            if (!isBlazor()) {\n                if (isPropertiesChanges) {\n                    // eslint-disable-next-line max-len\n                    if (this.pdfViewer.selectedItems.annotations[0] && (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Line')) {\n                        this.enableItems(this.colorDropDownElement.parentElement, false);\n                    }\n                    else {\n                        this.enableItems(this.colorDropDownElement.parentElement, isEnable);\n                    }\n                    this.enableItems(this.opacityDropDownElement.parentElement, isEnable);\n                    this.enableItems(this.strokeDropDownElement.parentElement, isEnable);\n                    this.enableItems(this.thicknessElement.parentElement, isEnable);\n                    if (this.pdfViewer.enableShapeLabel) {\n                        this.enableItems(this.fontFamilyElement.parentElement, isEnable);\n                        this.enableItems(this.fontSizeElement.parentElement, isEnable);\n                        this.enableItems(this.fontColorElement.parentElement, isEnable);\n                    }\n                    this.enableItems(this.textAlignElement.parentElement, false);\n                    this.enableItems(this.textPropElement.parentElement, false);\n                }\n            }\n            else {\n                // this.pdfViewer._dotnetInstance.invokeMethodAsync('EnableAnnotationPropertiesTools', isEnable, isPropertiesChanges);\n                this.pdfViewerBase.blazorUIAdaptor.enableAnnotationPropertiesTool(isEnable, isPropertiesChanges);\n            }\n        }\n    };\n    /**\n     * @param isEnable\n     * @private\n     */\n    AnnotationToolbar.prototype.enableSignaturePropertiesTools = function (isEnable) {\n        if (!Browser.isDevice) {\n            var isPropertiesChanges = this.checkAnnotationPropertiesChange();\n            if (!isEnable) {\n                isPropertiesChanges = true;\n            }\n            if (!isBlazor()) {\n                if (isPropertiesChanges) {\n                    this.enableItems(this.colorDropDownElement.parentElement, false);\n                    this.enableItems(this.opacityDropDownElement.parentElement, isEnable);\n                    this.enableItems(this.strokeDropDownElement.parentElement, isEnable);\n                    this.enableItems(this.thicknessElement.parentElement, isEnable);\n                    this.enableItems(this.textAlignElement.parentElement, false);\n                    this.enableItems(this.textPropElement.parentElement, false);\n                    this.enableItems(this.fontFamilyElement.parentElement, false);\n                    this.enableItems(this.fontSizeElement.parentElement, false);\n                    this.enableItems(this.fontColorElement.parentElement, false);\n                    this.enableItems(this.textAlignElement.parentElement, false);\n                }\n            }\n            else {\n                //this.pdfViewer._dotnetInstance.invokeMethodAsync('EnableSignaturePropertiesTools', isEnable, isPropertiesChanges);\n                this.pdfViewerBase.blazorUIAdaptor.enableSignaturePropertiesTools(isEnable, isPropertiesChanges);\n            }\n        }\n    };\n    /**\n     * @param isEnable\n     * @private\n     */\n    AnnotationToolbar.prototype.enableStampAnnotationPropertiesTools = function (isEnable) {\n        var isPropertiesChanges = this.checkAnnotationPropertiesChange();\n        if (!isEnable) {\n            isPropertiesChanges = true;\n        }\n        if (!isBlazor()) {\n            if (isPropertiesChanges) {\n                this.enableItems(this.opacityDropDownElement.parentElement, isEnable);\n                this.enableItems(this.colorDropDownElement.parentElement, false);\n                this.enableItems(this.strokeDropDownElement.parentElement, false);\n                this.enableItems(this.thicknessElement.parentElement, false);\n                this.enableItems(this.fontFamilyElement.parentElement, false);\n                this.enableItems(this.fontSizeElement.parentElement, false);\n                this.enableItems(this.fontColorElement.parentElement, false);\n                this.enableItems(this.textAlignElement.parentElement, false);\n                this.enableItems(this.textPropElement.parentElement, false);\n            }\n        }\n        else {\n            // this.pdfViewer._dotnetInstance.invokeMethodAsync('EnableStampAnnotationPropertiesTools', isEnable, isPropertiesChanges);\n            this.pdfViewerBase.blazorUIAdaptor.enableStampAnnotationPropertiesTools(isEnable, isPropertiesChanges);\n        }\n    };\n    /**\n     * @param isEnable\n     * @private\n     */\n    AnnotationToolbar.prototype.enableFreeTextAnnotationPropertiesTools = function (isEnable) {\n        var isPropertiesChanges = this.checkAnnotationPropertiesChange();\n        if (!isEnable) {\n            isPropertiesChanges = true;\n        }\n        if (!isBlazor()) {\n            if (isPropertiesChanges) {\n                this.enableItems(this.opacityDropDownElement.parentElement, isEnable);\n                this.enableItems(this.colorDropDownElement.parentElement, isEnable);\n                this.enableItems(this.strokeDropDownElement.parentElement, isEnable);\n                this.enableItems(this.thicknessElement.parentElement, isEnable);\n                this.enableItems(this.fontFamilyElement.parentElement, isEnable);\n                this.enableItems(this.fontSizeElement.parentElement, isEnable);\n                this.enableItems(this.fontColorElement.parentElement, isEnable);\n                this.enableItems(this.textAlignElement.parentElement, isEnable);\n                this.enableItems(this.textPropElement.parentElement, isEnable);\n            }\n        }\n        else {\n            //this.pdfViewer._dotnetInstance.invokeMethodAsync('EnableFreeTextAnnotationPropertiesTools', isEnable, isPropertiesChanges);\n            this.pdfViewerBase.blazorUIAdaptor.enableFreeTextAnnotationPropertiesTools(isEnable, isPropertiesChanges);\n        }\n    };\n    /**\n     * @param isEnable\n     * @private\n     */\n    AnnotationToolbar.prototype.enableAnnotationAddTools = function (isEnable) {\n        if (this.toolbar && !Browser.isDevice) {\n            if (this.pdfViewer.enableTextMarkupAnnotation) {\n                this.enableItems(this.highlightItem.parentElement, isEnable);\n                this.enableItems(this.underlineItem.parentElement, isEnable);\n                this.enableItems(this.strikethroughItem.parentElement, isEnable);\n            }\n            if (this.pdfViewer.enableShapeAnnotation) {\n                this.enableItems(this.shapeElement.parentElement, isEnable);\n            }\n            if (this.pdfViewer.enableStampAnnotations) {\n                this.toolbar.enableItems(this.stampElement.parentElement, isEnable);\n            }\n            if (this.pdfViewer.enableMeasureAnnotation && this.pdfViewerBase.isCalibrateAnnotationModule()) {\n                this.enableItems(this.calibrateElement.parentElement, isEnable);\n            }\n            if (this.pdfViewer.enableFreeText) {\n                this.enableItems(this.freeTextEditItem.parentElement, isEnable);\n            }\n            if (this.pdfViewer.enableHandwrittenSignature) {\n                this.enableItems(this.handWrittenSignatureItem.parentElement, isEnable);\n            }\n            if (this.pdfViewer.enableInkAnnotation) {\n                this.enableItems(this.inkAnnotationItem.parentElement, isEnable);\n            }\n            if (this.pdfViewer.enableCommentPanel) {\n                this.enableCommentPanelTool(isEnable);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.isAnnotationButtonsEnabled = function () {\n        var isButtonsEnabled = false;\n        if (this.isHighlightEnabled || this.isUnderlineEnabled || this.isStrikethroughEnabled) {\n            isButtonsEnabled = true;\n        }\n        return isButtonsEnabled;\n    };\n    /**\n     * @param isEnable\n     * @private\n     */\n    AnnotationToolbar.prototype.enableCommentPanelTool = function (isEnable) {\n        if (this.toolbar) {\n            this.enableItems(this.commentItem.parentElement, isEnable);\n        }\n    };\n    AnnotationToolbar.prototype.updateToolbarItems = function () {\n        if (this.pdfViewer.enableTextMarkupAnnotation) {\n            this.enableTextMarkupAddTools(true);\n        }\n        else {\n            this.enableTextMarkupAddTools(false);\n        }\n        this.enableItems(this.shapeElement.parentElement, this.pdfViewer.enableShapeAnnotation);\n        this.toolbar.enableItems(this.stampElement.parentElement, this.pdfViewer.enableStampAnnotations);\n        this.enableItems(this.calibrateElement.parentElement, this.pdfViewer.enableMeasureAnnotation);\n        this.enableItems(this.freeTextEditItem.parentElement, this.pdfViewer.enableFreeText);\n        this.enableItems(this.handWrittenSignatureItem.parentElement, this.pdfViewer.enableHandwrittenSignature);\n        this.enableItems(this.inkAnnotationItem.parentElement, this.pdfViewer.enableInkAnnotation);\n        this.closeItem.setAttribute('tabindex', '0');\n    };\n    AnnotationToolbar.prototype.enableTextMarkupAddTools = function (isEnable) {\n        this.enableItems(this.highlightItem.parentElement, isEnable);\n        this.enableItems(this.underlineItem.parentElement, isEnable);\n        this.enableItems(this.strikethroughItem.parentElement, isEnable);\n    };\n    /**\n     * @private\n     */\n    // for shapes added by drawing package\n    AnnotationToolbar.prototype.updateAnnnotationPropertyItems = function () {\n        if (!isBlazor()) {\n            if (this.pdfViewer.selectedItems.annotations.length === 1) {\n                // eslint-disable-next-line max-len\n                this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.colorDropDownElement, this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill, 'fillColor'));\n                this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.strokeDropDownElement, this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor, 'strokeColor'));\n                if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'FreeText' && !this.pdfViewer.selectedItems.annotations[0].isLock) {\n                    // eslint-disable-next-line\n                    this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.fontColorElement, this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].fontColor, 'fontColor'));\n                    this.pdfViewer.toolbar.annotationToolbarModule.updateFontFamilyInIcon(this.pdfViewer.selectedItems.annotations[0].fontFamily);\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.toolbar.annotationToolbarModule.updateFontSizeInIcon(this.pdfViewer.selectedItems.annotations[0].fontSize);\n                    this.pdfViewer.toolbar.annotationToolbarModule.updateTextAlignInIcon(this.pdfViewer.selectedItems.annotations[0].textAlign);\n                }\n            }\n            else {\n                this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.colorDropDownElement, '#000000');\n                this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.strokeDropDownElement, '#000000');\n                this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.fontColorElement, '#000000');\n            }\n        }\n        else {\n            this.colorDropDownElementInBlazor = this.pdfViewer.element.querySelector('.e-pv-annotation-color-container');\n            this.strokeDropDownElementInBlazor = this.pdfViewer.element.querySelector('.e-pv-annotation-stroke-container');\n            this.fontColorElementInBlazor = this.pdfViewer.element.querySelector('.e-pv-annotation-textcolor-container');\n            if (this.pdfViewer.selectedItems.annotations.length === 1) {\n                // eslint-disable-next-line max-len\n                this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.colorDropDownElementInBlazor, this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill, 'fillColor'));\n                this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.strokeDropDownElementInBlazor, this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor, 'strokeColor'));\n                if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'FreeText') {\n                    // eslint-disable-next-line\n                    this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.fontColorElementInBlazor, this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].fontColor, 'fontColor'));\n                    //this.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateFontFamilyInIcon', this.pdfViewer.selectedItems.annotations[0].fontFamily);\n                    // eslint-disable-next-line max-len\n                    this.pdfViewerBase.blazorUIAdaptor.updateFontFamilyInIcon(this.pdfViewer.selectedItems.annotations[0].fontFamily);\n                    // this.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateFontSizeInIcon', this.pdfViewer.selectedItems.annotations[0].fontSize);\n                    this.pdfViewerBase.blazorUIAdaptor.updateFontSizeInIcon(this.pdfViewer.selectedItems.annotations[0].fontSize);\n                    //this.pdfViewer.toolbar.annotationtoolbar.updateTextAlignInIcon(this.pdfViewer.selectedItems.annotations[0].textAlign);\n                }\n            }\n            else {\n                this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.colorDropDownElementInBlazor, '#000000');\n                this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.strokeDropDownElementInBlazor, '#000000');\n                this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.fontColorElementInBlazor, '#000000');\n            }\n        }\n    };\n    AnnotationToolbar.prototype.getColorHexValue = function (colorString, type) {\n        if (colorString === '#ffffff00') {\n            colorString = '#ffffff';\n        }\n        if (colorString.toLowerCase() === 'red') {\n            colorString = '#FF0000';\n        }\n        if (colorString !== 'transparent') {\n            if (!isBlazor()) {\n                return this.colorPalette.getValue(colorString, 'hex');\n            }\n            else {\n                return colorString;\n            }\n        }\n        else {\n            if (type === 'fontColor' || type === 'strokeColor') {\n                return '#000000';\n            }\n            else {\n                return '#ffffff';\n            }\n        }\n    };\n    AnnotationToolbar.prototype.setColorInPicker = function (colorpick, colorString) {\n        if (colorpick) {\n            colorpick.setProperties({ 'value': colorString }, true);\n        }\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.resetToolbar = function () {\n        this.updateToolbarItems();\n        // eslint-disable-next-line max-len\n        if ((this.pdfViewer.isAnnotationToolbarOpen || this.pdfViewer.isAnnotationToolbarVisible) && this.pdfViewer.enableAnnotationToolbar) {\n            this.adjustViewer(false);\n            this.toolbarElement.style.display = '';\n            this.isToolbarHidden = false;\n            this.adjustViewer(true);\n            this.primaryToolbar.selectItem(this.primaryToolbar.annotationItem);\n            if (this.pdfViewer.toolbarModule && this.pdfViewer.toolbarModule.annotationToolbarModule) {\n                this.pdfViewer.toolbarModule.annotationToolbarModule.toolbar.refreshOverflow();\n            }\n            this.pdfViewer.isAnnotationToolbarVisible = true;\n        }\n        else {\n            this.toolbarElement.style.display = 'none';\n            this.isToolbarHidden = true;\n            this.pdfViewer.isAnnotationToolbarVisible = false;\n        }\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.clearTextMarkupMode = function () {\n        if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n            if (isBlazor()) {\n                this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n            }\n            this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAddMode = '';\n        }\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.clearShapeMode = function () {\n        if (this.pdfViewerBase.isShapeAnnotationModule()) {\n            this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode = '';\n        }\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.clearMeasureMode = function () {\n        if (this.pdfViewerBase.isCalibrateAnnotationModule()) {\n            this.pdfViewer.annotation.measureAnnotationModule.currentAnnotationMode = '';\n        }\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.clear = function () {\n        this.deselectAllItems();\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.destroy = function () {\n        this.destroyComponent();\n        this.shapeDropDown ? this.shapeDropDown.destroy() : null;\n        this.calibrateDropDown ? this.calibrateDropDown.destroy() : null;\n        this.fontColorDropDown ? this.fontColorDropDown.destroy() : null;\n        this.textAlignDropDown ? this.textAlignDropDown.destroy() : null;\n        this.colorDropDown ? this.colorDropDown.destroy() : null;\n        this.strokeDropDown ? this.strokeDropDown.destroy() : null;\n        this.thicknessDropDown ? this.thicknessDropDown.destroy() : null;\n        this.opacityDropDown ? this.opacityDropDown.destroy() : null;\n        this.textPropertiesDropDown ? this.textPropertiesDropDown.destroy() : null;\n        this.toolbar ? this.toolbar.destroy() : null;\n        // eslint-disable-next-line\n        var stampImage = document.getElementById(this.pdfViewer.element.id + '_stampElement');\n        if (stampImage) {\n            stampImage.parentElement.removeChild(stampImage);\n        }\n    };\n    AnnotationToolbar.prototype.destroyComponent = function () {\n        // eslint-disable-next-line\n        var componentElement = [this.highlightItem, this.underlineItem, this.strikethroughItem, this.lineElement, this.arrowElement,\n            this.rectangleElement, this.circleElement, this.polygonElement, this.calibrateDistance, this.calibrateArea, this.calibrateRadius,\n            this.calibrateVolume, this.calibratePerimeter, this.freeTextEditItem, this.stampElement, this.handWrittenSignatureItem, this.inkAnnotationItem,\n            this.fontFamilyElement, this.fontSizeElement, this.alignLeftElement, this.alignRightElement, this.alignCenterElement, this.alignJustifyElement,\n            this.boldElement, this.italicElement, this.fontStyleStrikethroughItem, this.fontStyleUnderlineItem, this.deleteItem, this.commentItem,\n            this.shapeDropDown ? this.shapeDropDown.activeElem[0] : null, this.calibrateDropDown ? this.calibrateDropDown.activeElem[0] : null, this.fontColorDropDown ? this.fontColorDropDown.activeElem[0] : null, this.textAlignDropDown ? this.textAlignDropDown.activeElem[0] : null,\n            this.colorDropDown ? this.colorDropDown.activeElem[0] : null, this.strokeDropDown ? this.strokeDropDown.activeElem[0] : null, this.thicknessDropDown ? this.thicknessDropDown.activeElem[0] : null, this.opacityDropDown ? this.opacityDropDown.activeElem[0] : null, this.textPropertiesDropDown ? this.textPropertiesDropDown.activeElem[0] : null\n        ];\n        for (var i = 0; i < componentElement.length; i++) {\n            if (componentElement[i]) {\n                this.destroyDependentComponent(componentElement[i]);\n            }\n        }\n    };\n    AnnotationToolbar.prototype.destroyDependentComponent = function (component) {\n        if (component.ej2_instances) {\n            for (var i = component.ej2_instances.length - 1; i >= 0; i--) {\n                component.ej2_instances[i].destroy();\n            }\n        }\n    };\n    AnnotationToolbar.prototype.getElementHeight = function (element) {\n        try {\n            return element.getBoundingClientRect().height;\n        }\n        catch (error) {\n            return 0;\n        }\n    };\n    AnnotationToolbar.prototype.updateViewerHeight = function (viewerHeight, toolbarHeight) {\n        return this.getElementHeight(this.pdfViewer.element) - toolbarHeight;\n    };\n    AnnotationToolbar.prototype.resetViewerHeight = function (viewerHeight, toolbarHeight) {\n        return viewerHeight + toolbarHeight;\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.afterAnnotationToolbarCreationInBlazor = function () {\n        this.HighlightElement = document.getElementById(this.pdfViewer.element.id + '_highLight').children[0];\n        this.UnderlineElement = document.getElementById(this.pdfViewer.element.id + '_underline').children[0];\n        this.StrikethroughElement = document.getElementById(this.pdfViewer.element.id + '_strikethrough').children[0];\n        this.InkAnnotationElement = document.getElementById(this.pdfViewer.element.id + '_annotation_ink').children[0];\n        this.InkAnnotationElement.classList.add('e-pv-tbar-btn');\n        this.FreeTextElement = document.getElementById(this.pdfViewer.element.id + '_annotation_freeTextEdit').children[0];\n        this.HighlightElement = this.addClassToToolbarInBlazor(this.HighlightElement, 'e-pv-highlight', '_highLight');\n        this.UnderlineElement = this.addClassToToolbarInBlazor(this.UnderlineElement, 'e-pv-underline', '_underline');\n        this.StrikethroughElement = this.addClassToToolbarInBlazor(this.StrikethroughElement, 'e-pv-strikethrough', '_strikethrough');\n    };\n    // eslint-disable-next-line\n    AnnotationToolbar.prototype.addClassToToolbarInBlazor = function (element, className, idString) {\n        element.classList.add(className);\n        element.classList.add('e-pv-tbar-btn');\n        if (element.childNodes.length > 0) {\n            var spanElement = element.childNodes[0];\n            if (spanElement && spanElement.classList) {\n                spanElement.id = this.pdfViewer.element.id + idString + 'Icon';\n                spanElement.classList.remove('e-icons');\n                spanElement.classList.remove('e-btn-icon');\n                if (this.pdfViewer.enableRtl) {\n                    spanElement.classList.add('e-right');\n                }\n            }\n        }\n        return element;\n    };\n    AnnotationToolbar.prototype.handleHighlightInBlazor = function () {\n        if (this.HighlightElement.classList.contains('e-pv-select')) {\n            this.primaryToolbar.deSelectItem(this.HighlightElement);\n        }\n        else if (!this.HighlightElement.classList.contains('e-pv-select')) {\n            this.primaryToolbar.selectItem(this.HighlightElement);\n        }\n        if (this.StrikethroughElement.classList.contains('e-pv-select')) {\n            this.primaryToolbar.deSelectItem(this.StrikethroughElement);\n        }\n        if (this.UnderlineElement.classList.contains('e-pv-select')) {\n            this.primaryToolbar.deSelectItem(this.UnderlineElement);\n        }\n    };\n    AnnotationToolbar.prototype.handleUnderlineInBlazor = function () {\n        if (this.UnderlineElement.classList.contains('e-pv-select')) {\n            this.primaryToolbar.deSelectItem(this.UnderlineElement);\n        }\n        else if (!this.UnderlineElement.classList.contains('e-pv-select')) {\n            this.primaryToolbar.selectItem(this.UnderlineElement);\n        }\n        if (this.StrikethroughElement.classList.contains('e-pv-select')) {\n            this.primaryToolbar.deSelectItem(this.StrikethroughElement);\n        }\n        if (this.HighlightElement.classList.contains('e-pv-select')) {\n            this.primaryToolbar.deSelectItem(this.HighlightElement);\n        }\n    };\n    AnnotationToolbar.prototype.handleStrikethroughInBlazor = function () {\n        if (this.StrikethroughElement.classList.contains('e-pv-select')) {\n            this.primaryToolbar.deSelectItem(this.StrikethroughElement);\n        }\n        else if (!this.StrikethroughElement.classList.contains('e-pv-select')) {\n            this.primaryToolbar.selectItem(this.StrikethroughElement);\n        }\n        if (this.HighlightElement.classList.contains('e-pv-select')) {\n            this.primaryToolbar.deSelectItem(this.HighlightElement);\n        }\n        if (this.UnderlineElement.classList.contains('e-pv-select')) {\n            this.primaryToolbar.deSelectItem(this.UnderlineElement);\n        }\n    };\n    AnnotationToolbar.prototype.AnnotationSliderOpened = function () {\n        if (this.pdfViewer.selectedItems.annotations && this.pdfViewer.selectedItems.annotations.length > 0 && this.pdfViewer.selectedItems.annotations[0]) {\n            if (this.pdfViewer.selectedItems.annotations[0].wrapper && this.pdfViewer.selectedItems.annotations[0].wrapper.children[0]) {\n                var opacity = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.opacity * 100;\n                var thickness = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeWidth;\n                this.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateAnnotationSlider', opacity, thickness);\n            }\n        }\n    };\n    AnnotationToolbar.prototype.DropDownOpened = function (colorElement) {\n        if (colorElement && colorElement[0].element) {\n            var colorElementBounds = colorElement[0].element.getBoundingClientRect();\n            var sidebarElement = this.pdfViewerBase.navigationPane.sideBarToolbar;\n            var sideBarElementWidth = (sidebarElement) ? sidebarElement.getBoundingClientRect().width : 0;\n            if (colorElementBounds.left > this.pdfViewerBase.viewerContainer.clientWidth + colorElementBounds.width + sideBarElementWidth) {\n                colorElement[0].element.style.left = (colorElementBounds.left - (this.pdfViewerBase.viewerContainer.clientHeight / 2)) + 'px';\n            }\n        }\n    };\n    AnnotationToolbar.prototype.enableItems = function (element, isEnable) {\n        this.toolbar.enableItems(element, isEnable);\n        if (element.firstElementChild) {\n            element.firstElementChild.setAttribute('tabindex', isEnable ? '0' : '-1');\n            element.firstElementChild.setAttribute('data-tabindex', isEnable ? '0' : '-1');\n        }\n    };\n    return AnnotationToolbar;\n}());\nexport { AnnotationToolbar };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}