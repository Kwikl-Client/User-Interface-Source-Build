{"ast":null,"code":"/* eslint-disable */\nimport { createElement, Browser, isNullOrUndefined, isBlazor } from '@syncfusion/ej2-base';\nimport { CheckBox } from '@syncfusion/ej2-buttons';\nimport { AjaxHandler } from '../index';\nimport { createSpinner, showSpinner, hideSpinner } from '../index';\nvar searchTextCollection = [];\n/**\n * TextSearch module\n */\nvar TextSearch = /** @class */function () {\n  /**\n   * @param pdfViewer\n   * @param pdfViewerBase\n   * @param pdfViewer\n   * @param pdfViewerBase\n   * @private\n   */\n  function TextSearch(pdfViewer, pdfViewerBase) {\n    var _this = this;\n    /**\n     * @private\n     */\n    this.isTextSearch = false;\n    /**\n     * @private\n     */\n    this.searchCount = 0;\n    this.searchIndex = 0;\n    this.currentSearchIndex = 0;\n    this.startIndex = null;\n    this.searchPageIndex = null;\n    this.searchString = null;\n    this.isMatchCase = false;\n    this.searchRequestHandler = null;\n    // eslint-disable-next-line\n    this.textContents = new Array();\n    // eslint-disable-next-line\n    this.searchMatches = new Array();\n    // eslint-disable-next-line\n    this.searchCollection = new Array();\n    this.searchedPages = [];\n    this.isPrevSearch = false;\n    /**\n     * @private\n     */\n    this.searchTextDivzIndex = \"-1\";\n    // eslint-disable-next-line\n    this.tempElementStorage = new Array();\n    /**\n     * @private\n     */\n    this.isMessagePopupOpened = false;\n    /**\n     * @private\n     */\n    this.isTextRetrieved = false;\n    this.isTextSearched = false;\n    this.isTextSearchEventTriggered = false;\n    this.isSearchText = false;\n    // eslint-disable-next-line\n    this.checkBoxOnChange = function (event) {\n      if (isBlazor()) {\n        if (event.currentTarget && event.currentTarget.checked) {\n          _this.isMatchCase = true;\n        } else {\n          _this.isMatchCase = false;\n        }\n      } else {\n        if (event.checked) {\n          _this.isMatchCase = true;\n        } else {\n          _this.isMatchCase = false;\n        }\n      }\n      if (_this.isTextSearch) {\n        _this.resetVariables();\n        _this.clearAllOccurrences();\n        var inputString = _this.searchInput.value;\n        _this.searchIndex = 0;\n        _this.textSearch(inputString);\n      }\n    };\n    this.searchKeypressHandler = function (event) {\n      _this.enableNextButton(true);\n      _this.enablePrevButton(true);\n      if (event.which === 13) {\n        _this.initiateTextSearch(_this.searchInput);\n        _this.updateSearchInputIcon(false);\n      } else {\n        _this.resetVariables();\n      }\n    };\n    this.searchClickHandler = function (event) {\n      _this.searchButtonClick(_this.searchBtn, _this.searchInput);\n    };\n    this.nextButtonOnClick = function (event) {\n      _this.nextSearch();\n    };\n    this.prevButtonOnClick = function (event) {\n      _this.prevSearch();\n    };\n    this.pdfViewer = pdfViewer;\n    this.pdfViewerBase = pdfViewerBase;\n  }\n  /**\n   * @private\n   */\n  TextSearch.prototype.createTextSearchBox = function () {\n    var _this = this;\n    // eslint-disable-next-line max-len\n    this.searchBox = createElement('div', {\n      id: this.pdfViewer.element.id + '_search_box',\n      className: 'e-pv-search-bar'\n    });\n    var toolbarElement;\n    if (isBlazor()) {\n      toolbarElement = document.getElementById('toolbarContainer');\n    } else {\n      toolbarElement = this.pdfViewerBase.getElement('_toolbarContainer');\n    }\n    if (toolbarElement) {\n      if (isBlazor()) {\n        this.searchBox.style.top = toolbarElement.clientHeight + 'px';\n      } else {\n        this.searchBox.style.top = toolbarElement.clientHeight + 'px';\n      }\n    }\n    var searchElementsContainer = createElement('div', {\n      id: this.pdfViewer.element.id + '_search_box_elements',\n      className: 'e-pv-search-bar-elements'\n    });\n    // eslint-disable-next-line max-len\n    var searchInputContainer = createElement('div', {\n      id: this.pdfViewer.element.id + '_search_input_container',\n      className: 'e-input-group e-pv-search-input'\n    });\n    this.searchInput = createElement('input', {\n      id: this.pdfViewer.element.id + '_search_input',\n      className: 'e-input'\n    });\n    this.searchInput.type = 'text';\n    if (isBlazor()) {\n      var promise = this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText', 'PdfViewer_Findindocument');\n      promise.then(function (value) {\n        _this.searchInput.placeholder = value;\n      });\n    } else {\n      this.searchInput.placeholder = this.pdfViewer.localeObj.getConstant('Find in document');\n    }\n    // eslint-disable-next-line max-len\n    this.searchBtn = createElement('span', {\n      id: this.pdfViewer.element.id + '_search_box-icon',\n      className: 'e-input-group-icon e-input-search-group-icon e-pv-search-icon'\n    });\n    this.searchBtn.setAttribute('tabindex', '0');\n    searchInputContainer.appendChild(this.searchInput);\n    searchInputContainer.appendChild(this.searchBtn);\n    searchElementsContainer.appendChild(searchInputContainer);\n    if (this.pdfViewer.enableRtl) {\n      this.prevSearchBtn = this.createSearchBoxButtons('prev_occurrence', 'e-pv-next-search');\n    } else {\n      this.prevSearchBtn = this.createSearchBoxButtons('prev_occurrence', 'e-pv-prev-search');\n    }\n    this.prevSearchBtn.setAttribute('aria-label', 'Previous Search text');\n    searchElementsContainer.appendChild(this.prevSearchBtn);\n    if (this.pdfViewer.enableRtl) {\n      this.nextSearchBtn = this.createSearchBoxButtons('next_occurrence', 'e-pv-prev-search');\n    } else {\n      this.nextSearchBtn = this.createSearchBoxButtons('next_occurrence', 'e-pv-next-search');\n    }\n    this.nextSearchBtn.setAttribute('aria-label', 'Next Search text');\n    searchElementsContainer.appendChild(this.nextSearchBtn);\n    // eslint-disable-next-line max-len\n    var matchCaseContainer = createElement('div', {\n      id: this.pdfViewer.element.id + '_match_case_container',\n      className: 'e-pv-match-case-container'\n    });\n    var matchCaseInput = createElement('input', {\n      id: this.pdfViewer.element.id + '_match_case'\n    });\n    matchCaseInput.type = 'checkbox';\n    if (isBlazor()) {\n      matchCaseInput.style.height = '17px';\n      matchCaseInput.style.width = '17px';\n      matchCaseInput.addEventListener('change', this.checkBoxOnChange.bind(this));\n    }\n    matchCaseContainer.appendChild(matchCaseInput);\n    this.searchBox.appendChild(searchElementsContainer);\n    this.searchBox.appendChild(matchCaseContainer);\n    this.pdfViewerBase.mainContainer.appendChild(this.searchBox);\n    if (isBlazor()) {\n      // eslint-disable-next-line max-len\n      var matchCaseText_1 = createElement('span', {\n        id: this.pdfViewer.element.id + '_search_box_text',\n        styles: 'position: absolute; padding-top: 3px; padding-left: 8px; padding-right: 8px; font-size: 13px'\n      });\n      var promise = this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText', 'PdfViewer_Matchcase');\n      promise.then(function (value) {\n        matchCaseText_1.textContent = value;\n      });\n      matchCaseContainer.appendChild(matchCaseText_1);\n    } else {\n      // eslint-disable-next-line max-len\n      var checkBox = new CheckBox({\n        cssClass: 'e-pv-match-case',\n        label: this.pdfViewer.localeObj.getConstant('Match case'),\n        htmlAttributes: {\n          'tabindex': '0'\n        },\n        change: this.checkBoxOnChange.bind(this)\n      });\n      checkBox.appendTo(matchCaseInput);\n    }\n    matchCaseContainer.firstElementChild.addEventListener('keydown', function (event) {\n      if (event.key === \"Enter\" || event.key === \" \") {\n        event.target.click();\n        event.preventDefault();\n        event.stopPropagation();\n      }\n    });\n    var waitingPopup = createElement('div', {\n      id: this.pdfViewer.element.id + '_textSearchLoadingIndicator'\n    });\n    searchInputContainer.appendChild(waitingPopup);\n    waitingPopup.style.position = 'absolute';\n    waitingPopup.style.top = '15px';\n    waitingPopup.style.left = searchInputContainer.clientWidth - 46 + 'px';\n    createSpinner({\n      target: waitingPopup,\n      cssClass: 'e-spin-center'\n    });\n    this.setLoaderProperties(waitingPopup);\n    this.showSearchBox(false);\n    if (this.pdfViewer.enableRtl) {\n      this.searchBox.classList.add('e-rtl');\n      this.searchBox.style.left = '88.3px';\n    } else {\n      this.searchBox.classList.remove('e-rtl');\n      this.searchBox.style.right = '88.3px';\n    }\n    this.searchInput.addEventListener('focus', function () {\n      _this.searchInput.parentElement.classList.add('e-input-focus');\n    });\n    this.searchInput.addEventListener('blur', function () {\n      _this.searchInput.parentElement.classList.remove('e-input-focus');\n    });\n    this.searchInput.addEventListener('keydown', this.searchKeypressHandler.bind(this));\n    this.searchBtn.addEventListener('click', this.searchClickHandler.bind(this));\n    this.searchBtn.addEventListener('keydown', function (event) {\n      if (event.key === \"Enter\" || event.key === \" \") {\n        _this.searchClickHandler(event);\n        event.preventDefault();\n        event.stopPropagation();\n      }\n    });\n    this.nextSearchBtn.addEventListener('click', this.nextButtonOnClick.bind(this));\n    this.prevSearchBtn.addEventListener('click', this.prevButtonOnClick.bind(this));\n  };\n  TextSearch.prototype.setLoaderProperties = function (element) {\n    var spinnerElement = element.firstChild.firstChild.firstChild;\n    if (spinnerElement) {\n      spinnerElement.style.height = '18px';\n      spinnerElement.style.width = '18px';\n      spinnerElement.style.transformOrigin = '9px 9px 9px';\n    }\n  };\n  TextSearch.prototype.showLoadingIndicator = function (isShow) {\n    var waitingPopup = document.getElementById(this.pdfViewer.element.id + '_textSearchLoadingIndicator');\n    if (waitingPopup) {\n      if (isShow) {\n        showSpinner(waitingPopup);\n      } else {\n        hideSpinner(waitingPopup);\n      }\n    }\n  };\n  /**\n   * @private\n   */\n  TextSearch.prototype.textSearchBoxOnResize = function () {\n    if (this.pdfViewer.toolbarModule && this.pdfViewer.enableToolbar) {\n      var secondaryToolbar = this.pdfViewerBase.getElement('_toolbarContainer_popup');\n      if (secondaryToolbar) {\n        if (secondaryToolbar.contains(this.pdfViewerBase.getElement('_search').parentElement)) {\n          this.searchBox.style.right = '0px';\n        }\n      }\n    } else {\n      // eslint-disable-next-line max-len\n      if (this.pdfViewerBase.viewerContainer.clientWidth + this.pdfViewerBase.viewerContainer.offsetLeft < this.searchBox.offsetLeft + this.searchBox.clientWidth) {\n        this.searchBox.style.right = '0px';\n        // eslint-disable-next-line\n        this.searchBox.style.width = parseInt(this.searchBox.style.width) - (this.searchBox.offsetLeft + this.searchBox.clientWidth - this.pdfViewerBase.viewerContainer.clientWidth) + 'px';\n        // eslint-disable-next-line\n        this.searchInput.style.width = parseInt(this.searchInput.style.width) - (this.searchBox.offsetLeft + this.searchBox.clientWidth - this.pdfViewerBase.viewerContainer.clientWidth) + 'px';\n      } else {\n        this.searchBox.style.right = '88.3px';\n        this.searchBox.style.width = '';\n        this.searchInput.style.width = '';\n      }\n    }\n  };\n  /**\n   * @param isShow\n   * @private\n   */\n  TextSearch.prototype.showSearchBox = function (isShow) {\n    if (isShow) {\n      this.searchBox.style.display = 'block';\n    } else {\n      this.searchBox.style.display = 'none';\n      this.searchInput.value = '';\n    }\n    this.onTextSearchClose();\n  };\n  /**\n   * @private\n   */\n  TextSearch.prototype.searchAfterSelection = function () {\n    if (this.isTextSearch) {\n      this.initSearch(this.searchPageIndex, true);\n      this.highlightOthers();\n    }\n  };\n  TextSearch.prototype.initiateTextSearch = function (searchElement) {\n    var inputString = searchElement.value;\n    if (inputString && inputString.length > 0 && inputString[inputString.length - 1] === ' ') {\n      inputString = inputString.slice(0, inputString.length - 1);\n    }\n    this.initiateSearch(inputString);\n  };\n  /**\n   * @param inputString\n   * @private\n   */\n  TextSearch.prototype.initiateSearch = function (inputString) {\n    if (inputString !== this.searchString) {\n      this.isTextSearch = false;\n      this.searchPageIndex = this.pdfViewerBase.currentPageNumber - 1;\n    }\n    this.clearAllOccurrences();\n    if (inputString !== '') {\n      // eslint-disable-next-line\n      if (this.searchMatches[this.searchPageIndex] && inputString === this.searchString) {\n        if (this.searchMatches[this.searchPageIndex].length === 0) {\n          this.initSearch(this.searchPageIndex, false);\n        } else {\n          this.nextSearch();\n        }\n      } else if (isNullOrUndefined(this.searchMatches[this.searchPageIndex]) && inputString === this.searchString) {\n        this.initSearch(this.searchPageIndex, false);\n      } else {\n        this.resetVariables();\n        this.searchIndex = 0;\n        this.textSearch(inputString);\n      }\n    }\n  };\n  TextSearch.prototype.textSearch = function (inputString) {\n    if (inputString !== '' || inputString) {\n      this.searchString = inputString;\n      this.isTextSearch = true;\n      this.isSearchText = true;\n      this.searchPageIndex = this.pdfViewerBase.currentPageNumber - 1;\n      this.searchCount = 0;\n      this.isTextSearchEventTriggered = false;\n      this.showLoadingIndicator(true);\n      this.pdfViewer.fireTextSearchStart(inputString, this.isMatchCase);\n      if (this.pdfViewer.isExtractText) {\n        if (this.isTextRetrieved) {\n          for (var i = 0; i < this.pdfViewerBase.pageCount; i++) {\n            this.initSearch(i, false, true);\n          }\n        } else {\n          this.isTextSearched = true;\n          for (var i = 0; i < this.documentTextCollection.length; i++) {\n            this.initSearch(i, false, true);\n          }\n        }\n      }\n      this.initSearch(this.searchPageIndex, false);\n      this.highlightOthers();\n    }\n  };\n  TextSearch.prototype.nextSearch = function () {\n    this.isPrevSearch = false;\n    this.isTextSearch = true;\n    this.isSearchText = false;\n    if (this.searchString) {\n      this.clearAllOccurrences();\n      this.searchIndex = this.searchIndex + 1;\n      if (this.searchMatches[this.searchPageIndex]) {\n        if (this.searchIndex >= this.searchMatches[this.searchPageIndex].length) {\n          this.searchIndex = 0;\n          this.searchPageIndex = this.searchPageIndex + 1 < this.pdfViewerBase.pageCount ? this.searchPageIndex + 1 : 0;\n          if (this.pdfViewerBase.pageCount > 1) {\n            this.initSearch(this.searchPageIndex, false);\n          } else {\n            this.initSearch(this.searchPageIndex, true);\n            if (!this.isMessagePopupOpened) {\n              this.onMessageBoxOpen();\n            }\n            this.pdfViewerBase.updateScrollTop(this.searchPageIndex);\n          }\n          this.showLoadingIndicator(true);\n        } else {\n          this.highlightSearchedTexts(this.searchPageIndex, false, undefined);\n          this.showLoadingIndicator(false);\n        }\n        this.highlightOthers(true);\n      } else if (!this.searchMatches[this.searchPageIndex]) {\n        if (this.pdfViewerBase.pageCount > 1) {\n          this.initSearch(this.searchPageIndex, false);\n        }\n      } else {\n        this.initiateTextSearch(this.searchInput);\n      }\n    } else {\n      this.initiateTextSearch(this.searchInput);\n    }\n  };\n  TextSearch.prototype.prevSearch = function () {\n    searchTextCollection.push(this.searchPageIndex);\n    this.isPrevSearch = true;\n    this.isTextSearch = true;\n    this.isSearchText = false;\n    if (this.searchString) {\n      this.clearAllOccurrences();\n      this.searchIndex = this.searchIndex - 1;\n      if (this.searchIndex < 0) {\n        this.searchPageIndex = this.findPreviousPageWithText();\n        this.initSearch(this.searchPageIndex, false);\n        this.showLoadingIndicator(true);\n      } else {\n        this.highlightSearchedTexts(this.searchPageIndex, false, undefined);\n        this.showLoadingIndicator(false);\n      }\n      this.highlightOthers(true);\n    } else {\n      this.searchIndex = this.searchIndex - 1;\n      this.searchPageIndex = this.searchPageIndex - 1 < 0 ? this.pdfViewerBase.pageCount - 1 : this.searchPageIndex - 1;\n      var inputString = this.searchInput.value;\n      this.textSearch(inputString);\n    }\n  };\n  TextSearch.prototype.findPreviousPageWithText = function () {\n    var currentPageIndex = this.searchPageIndex;\n    for (var i = 1; i < this.pdfViewerBase.pageCount; i++) {\n      var prevPageIndex = (currentPageIndex - i + this.pdfViewerBase.pageCount) % this.pdfViewerBase.pageCount;\n      if (this.searchMatches[prevPageIndex] && this.searchMatches[prevPageIndex].length > 0) {\n        return prevPageIndex;\n      }\n    }\n    return currentPageIndex;\n  };\n  ;\n  TextSearch.prototype.initSearch = function (pageIndex, isSinglePageSearch, isCount) {\n    // eslint-disable-next-line\n    var storedData = this.pdfViewerBase.getStoredData(pageIndex, true);\n    var pageText = null;\n    var textContents = null;\n    // eslint-disable-next-line\n    var characterBounds = null;\n    if (isCount) {\n      if (this.documentTextCollection.length !== 0) {\n        // eslint-disable-next-line\n        var documentIndex = this.documentTextCollection[pageIndex][pageIndex];\n        var pageTextData = documentIndex.pageText ? documentIndex.pageText : documentIndex.PageText;\n        if (this.documentTextCollection[pageIndex] && documentIndex) {\n          // eslint-disable-next-line max-len\n          this.getSearchTextContent(pageIndex, this.searchString, pageTextData, textContents, isSinglePageSearch, this.documentTextCollection[pageIndex]);\n        }\n      }\n    } else {\n      if (storedData) {\n        // eslint-disable-next-line\n        pageText = storedData['pageText'];\n        // eslint-disable-next-line\n        textContents = storedData['textContent'];\n        characterBounds = this.pdfViewerBase.textLayer.characterBound[pageIndex];\n        this.textContents[pageIndex] = textContents;\n        this.getPossibleMatches(pageIndex, this.searchString, pageText, textContents, isSinglePageSearch, characterBounds);\n      } else {\n        if (!isSinglePageSearch) {\n          this.createRequestForSearch(pageIndex);\n        }\n      }\n    }\n    if (this.pdfViewerBase.pageCount === (this.searchedPages && this.searchedPages.length)) {\n      if (!this.isTextSearchEventTriggered) {\n        this.isTextSearchEventTriggered = true;\n        this.pdfViewer.fireTextSearchComplete(this.searchString, this.isMatchCase);\n      }\n    }\n  };\n  // eslint-disable-next-line\n  TextSearch.prototype.getPossibleMatches = function (pageIndex, searchString, pageString, textContents, isSinglePageSearch, characterBounds) {\n    var arrayReturns;\n    if (this.searchMatches && !this.searchMatches[pageIndex]) {\n      var pageText = pageString;\n      var searchText = searchString;\n      var multiSearch = pageText.replace(/(\\s\\r\\n)/gm, ' ').replace(/(\\r\\n)/gm, \" \");\n      var Multiline = pageString.replace(/(\\s\\r\\n)/gm, '  ').replace(/(\\r\\n)/gm, \" \");\n      var specialCharcterSearch = multiSearch.replace(/[^a-zA-z0-9\" \"]/g, \"\");\n      var queryLength = searchString.length;\n      if (!this.isMatchCase) {\n        searchText = searchString.toLowerCase();\n        pageText = pageString.toLowerCase();\n        multiSearch = multiSearch.toLowerCase();\n        Multiline = Multiline.toLowerCase();\n        specialCharcterSearch = specialCharcterSearch.toLowerCase();\n      }\n      var matches = [];\n      var matchedArray = [];\n      var matchIndex = -queryLength;\n      var newIndex = -queryLength;\n      var multiSearchIndex = -queryLength;\n      var MultilineIndex = -queryLength;\n      var specialcharcterIndex = -queryLength;\n      while (matchIndex !== 0 || matchIndex === 0) {\n        if (searchText === '' || searchText === ' ' || !searchText) {\n          break;\n        }\n        matchIndex = pageText.indexOf(searchText, matchIndex + queryLength);\n        if (searchText.indexOf(' ') !== -1) {\n          var newString = searchString.replace(' ', '\\r\\n');\n          newIndex = pageText.indexOf(newString, newIndex + queryLength);\n          newIndex = -1;\n          if (!(newIndex <= -1)) {\n            if (newIndex < matchIndex) {\n              matches.push(newIndex);\n            }\n          }\n        }\n        if (matchIndex <= -1 && newIndex <= -1) {\n          break;\n        }\n        if (!(matchIndex <= -1)) {\n          matches.push(matchIndex);\n        }\n        if (newIndex > matchIndex && !(newIndex <= -1)) {\n          matches.push(newIndex);\n        }\n      }\n      if (matches.length == 0) {\n        multiSearchIndex = multiSearch.indexOf(searchText, multiSearchIndex + queryLength);\n        MultilineIndex = Multiline.indexOf(searchText, MultilineIndex + queryLength);\n        specialcharcterIndex = specialCharcterSearch.indexOf(searchText, specialcharcterIndex + queryLength);\n        if (multiSearchIndex !== -1) {\n          arrayReturns = this.correctLinetext(searchString, matchIndex, pageText);\n          matchIndex = -arrayReturns[0].length;\n          for (var i = 0; i < arrayReturns.length; i++) {\n            matchIndex = pageText.indexOf(arrayReturns[i].trim(), matchIndex + (arrayReturns[i - 1] === undefined || null ? arrayReturns[0].length : arrayReturns[i - 1].length));\n            matchedArray.push(matchIndex);\n            if (matchedArray.length > 1) {\n              if (matchedArray[1] - (matchedArray[0] + arrayReturns[0].length) <= 3) {\n                matches.push(matchedArray);\n                this.searchMatches[pageIndex] = matches;\n              } else {\n                i = -1;\n                matchIndex = matchedArray[0] + arrayReturns[0].length;\n                matchedArray.splice(0, matchedArray.length);\n              }\n            }\n          }\n        } else if (specialcharcterIndex !== -1) {\n          arrayReturns = this.correctLinetext(searchString, matchIndex, pageText);\n          matchIndex = -arrayReturns[0].length;\n          for (var i = 0; i < arrayReturns.length; i++) {\n            matchIndex = pageText.indexOf(arrayReturns[i].trim(), matchIndex + (arrayReturns[i - 1] === undefined || null ? arrayReturns[0].length : arrayReturns[i - 1].length));\n            matchedArray.push(matchIndex);\n            if (matchedArray.length > 1) {\n              if (matchedArray[1] - (matchedArray[0] + arrayReturns[0].length) <= 3) {\n                matches.push(matchedArray);\n                this.searchMatches[pageIndex] = matches;\n              } else {\n                i = -1;\n                matchIndex = matchedArray[0] + arrayReturns[0].length;\n                matchedArray.splice(0, matchedArray.length);\n              }\n            }\n          }\n        } else if (MultilineIndex !== -1) {\n          arrayReturns = this.correctLinetext(searchString, matchIndex, pageText);\n          matchIndex = -arrayReturns[0].length;\n          for (var i = 0; i < arrayReturns.length; i++) {\n            matchIndex = pageText.indexOf(arrayReturns[i].trim(), matchIndex + (arrayReturns[i - 1] === undefined || null ? arrayReturns[0].length : arrayReturns[i - 1].length));\n            matchedArray.push(matchIndex);\n            if (matchedArray.length > 1) {\n              if (matchedArray[1] - (matchedArray[0] + arrayReturns[0].length) <= 3) {\n                matches.push(matchedArray);\n                this.searchMatches[pageIndex] = matches;\n              } else {\n                i = -1;\n                matchIndex = matchedArray[0] + arrayReturns[0].length;\n                matchedArray.splice(0, matchedArray.length);\n              }\n            }\n          }\n        }\n        if (matches.length > 1) {\n          matches.splice(1, matches.length);\n        }\n      }\n      if (this.searchMatches && matches.length > 0) {\n        this.searchMatches[pageIndex] = matches;\n      }\n    }\n    if (!isSinglePageSearch) {\n      if (this.searchedPages.indexOf(pageIndex) === -1) {\n        this.searchedPages.push(pageIndex);\n        this.startIndex = this.searchedPages[0];\n      }\n      this.updateSearchInputIcon(false);\n    }\n    if (this.searchMatches && this.searchMatches[pageIndex] && this.searchMatches[pageIndex].length !== 0) {\n      if (!isSinglePageSearch) {\n        if (this.isPrevSearch) {\n          this.searchIndex = this.searchMatches[pageIndex].length - 1;\n        }\n        if (this.pdfViewerBase.currentPageNumber - 1 !== this.searchPageIndex) {\n          // eslint-disable-next-line max-len\n          if (this.searchMatches.length > 0 && (this.searchIndex === 0 || this.searchIndex === -1) && this.searchPageIndex === this.currentSearchIndex) {\n            if (!this.isMessagePopupOpened && !this.isSearchText) {\n              this.onMessageBoxOpen();\n            }\n            this.searchPageIndex = this.getSearchPage(this.pdfViewerBase.currentPageNumber - 1);\n            this.searchedPages = [this.searchPageIndex];\n          }\n          // eslint-disable-next-line max-len\n          else if (this.isPrevSearch && this.searchMatches && this.searchMatches.length > 0 && this.searchMatches[this.searchPageIndex] && this.searchMatches[this.searchPageIndex].length > 0 && this.searchedPages.length === this.pdfViewerBase.pageCount && this.startIndex - 1 === this.searchPageIndex) {\n            if (!this.isMessagePopupOpened) {\n              this.onMessageBoxOpen();\n            }\n            this.searchedPages = [this.startIndex];\n          } else if (searchTextCollection[0] == this.searchPageIndex) {\n            if (!this.isMessagePopupOpened) {\n              this.onMessageBoxOpen();\n            }\n          }\n          this.pdfViewerBase.updateScrollTop(this.searchPageIndex);\n        } else if (this.searchMatches && this.searchMatches[this.searchPageIndex] && this.searchMatches[this.searchPageIndex].length > 0 && this.searchedPages.length === this.pdfViewerBase.pageCount && this.startIndex === this.searchPageIndex && this.pdfViewerBase.pageCount > 1) {\n          if (!this.isMessagePopupOpened) {\n            this.onMessageBoxOpen();\n          }\n          this.searchedPages = [this.startIndex];\n        }\n      }\n      this.highlightSearchedTexts(pageIndex, isSinglePageSearch, arrayReturns);\n    } else {\n      if (!isSinglePageSearch) {\n        if (this.isPrevSearch) {\n          this.searchPageIndex = this.searchPageIndex - 1 < 0 ? this.pdfViewerBase.pageCount - 1 : this.searchPageIndex - 1;\n        } else {\n          this.searchPageIndex = this.searchPageIndex + 1 < this.pdfViewerBase.pageCount ? this.searchPageIndex + 1 : 0;\n        }\n        if (this.searchedPages.indexOf(this.searchPageIndex) === -1 && this.searchedPages.length !== this.pdfViewerBase.pageCount) {\n          this.showLoadingIndicator(true);\n          this.initSearch(this.searchPageIndex, false);\n        } else {\n          var searchPageIndex = this.getSearchPage(pageIndex);\n          // eslint-disable-next-line max-len\n          if (this.searchMatches && isNullOrUndefined(this.searchMatches[this.searchPageIndex]) && this.searchedPages.length === this.pdfViewerBase.pageCount) {\n            // eslint-disable-next-line max-len\n            if (!this.isMessagePopupOpened) {\n              this.onMessageBoxOpen();\n            }\n            this.pdfViewerBase.updateScrollTop(this.startIndex);\n            // eslint-disable-next-line max-len\n          } else if (this.searchMatches && this.searchMatches.length > 0 && (this.searchIndex === 0 || this.searchIndex === -1) && searchPageIndex === this.currentSearchIndex) {\n            if (this.isPrevSearch) {\n              // eslint-disable-next-line max-len\n              if (!this.isMessagePopupOpened) {\n                this.onMessageBoxOpen();\n              }\n              this.searchPageIndex = searchPageIndex;\n              this.searchedPages = [searchPageIndex];\n              this.searchIndex = -1;\n            } else {\n              if (!this.isMessagePopupOpened && this.pdfViewerBase.currentPageNumber !== 1 && !this.isSearchText) {\n                this.onMessageBoxOpen();\n              }\n              this.searchPageIndex = searchPageIndex;\n              this.searchedPages = [searchPageIndex];\n              this.searchIndex = 0;\n            }\n            this.highlightSearchedTexts(this.searchPageIndex, isSinglePageSearch, undefined);\n          } else if (this.searchMatches && this.searchMatches[this.searchPageIndex] && this.searchMatches[this.searchPageIndex].length > 0 && this.searchedPages.length === this.pdfViewerBase.pageCount) {\n            if (!this.isMessagePopupOpened) {\n              this.onMessageBoxOpen();\n            }\n            this.searchPageIndex = this.startIndex;\n            this.searchedPages = [this.searchPageIndex];\n            this.searchIndex = 0;\n            this.pdfViewerBase.updateScrollTop(this.startIndex);\n            this.highlightSearchedTexts(this.searchPageIndex, isSinglePageSearch, undefined);\n          }\n        }\n      }\n    }\n  };\n  TextSearch.prototype.correctLinetext = function (searchString, matchIndex, pageText) {\n    var indiuvalLineArray = [];\n    var searchArray = searchString.split(/[\" \"]+/);\n    if (!this.isMatchCase) {\n      searchArray = searchString.toLowerCase().split(/[\" \"]+/);\n    }\n    matchIndex = 0;\n    var linestring = \"\";\n    var mergedText = pageText.replace(/ \\r\\n/g, \" \");\n    mergedText = mergedText.replace(/\\r\\n/g, \" \");\n    mergedText = mergedText.replace(/[^a-zA-Z0-9 ]/g, '');\n    searchString = searchString.replace(/[^a-zA-Z0-9 ]/g, '');\n    var result = mergedText.match(searchString);\n    if (!this.isMatchCase) {\n      result = mergedText.match(searchString.toLowerCase());\n    }\n    if (isNullOrUndefined(result)) {\n      return indiuvalLineArray;\n    } else {\n      result = pageText.slice(result.index, pageText.length);\n    }\n    var pageCheck = result;\n    for (var i = 0; i < searchArray.length; i++) {\n      var searchArrayText = linestring + searchArray[i];\n      matchIndex = pageText.indexOf(searchArrayText, matchIndex);\n      pageCheck = pageCheck ? pageCheck.replace(searchArray[i - 1], \"\") : pageText.replace(searchArray[i - 1], \"\");\n      if (pageCheck[pageCheck.indexOf(searchArray[i]) - 1] === \"\\n\" && pageCheck[pageCheck.indexOf(searchArray[i + 1]) - 1] === \"\\n\" || pageCheck[pageCheck.indexOf(searchArray[i]) - 1] === \"\\n\" && isNullOrUndefined(pageCheck[pageCheck.indexOf(searchArray[i + 1]) - 1])) {\n        matchIndex = -1;\n        if (linestring === \"\") {\n          linestring = searchArray[i];\n          i = i + 1;\n        }\n      }\n      if (matchIndex !== -1) {\n        linestring += searchArray[i] + \" \";\n        if (i == searchArray.length - 1) {\n          indiuvalLineArray.push(linestring);\n        }\n      } else {\n        indiuvalLineArray.push(linestring);\n        linestring = searchArray[i] + \" \";\n        if (pageCheck[pageCheck.indexOf(searchArray[i]) - 1] == \"\\n\" && pageCheck[pageCheck.indexOf(searchArray[i + 1]) - 1] == \"\\n\") {\n          indiuvalLineArray.push(linestring);\n          linestring = searchArray[i + 1] + \" \";\n          pageCheck = pageCheck ? pageCheck.replace(searchArray[i - 1], \"\") : pageText.replace(searchArray[i - 1], \"\");\n          i = i + 1;\n        }\n        if (i == searchArray.length - 1) {\n          indiuvalLineArray.push(linestring);\n        }\n      }\n    }\n    return indiuvalLineArray;\n  };\n  // eslint-disable-next-line\n  TextSearch.prototype.getSearchTextContent = function (pageIndex, searchString, pageString, textContents, isSinglePageSearch, characterBounds) {\n    var pageText = pageString;\n    var searchText = searchString;\n    var queryLength = searchString.length;\n    if (!this.isMatchCase) {\n      searchText = searchString.toLowerCase();\n      pageText = pageString.toLowerCase();\n    }\n    var matches = [];\n    var matchIndex = -queryLength;\n    var newIndex = -queryLength;\n    while (matchIndex !== 0) {\n      if (searchText === '' || searchText === ' ' || !searchText) {\n        break;\n      }\n      matchIndex = pageText.indexOf(searchText, matchIndex + queryLength);\n      if (searchText.indexOf(' ') !== -1) {\n        var newString = searchString.replace(' ', '\\r\\n');\n        newIndex = pageText.indexOf(newString, newIndex + queryLength);\n        if (!(newIndex <= -1)) {\n          if (newIndex < matchIndex) {\n            matches.push(newIndex);\n          }\n        }\n      }\n      if (matchIndex <= -1 && newIndex <= -1) {\n        break;\n      }\n      if (!(matchIndex <= -1)) {\n        matches.push(matchIndex);\n      }\n      if (newIndex > matchIndex && !(newIndex <= -1)) {\n        matches.push(newIndex);\n      }\n    }\n    if (matches.length !== 0) {\n      this.searchCount = this.searchCount + matches.length;\n    }\n    this.searchMatches[pageIndex] = matches;\n  };\n  TextSearch.prototype.getSearchPage = function (pageIndex) {\n    var pageNumber = null;\n    if (this.isPrevSearch) {\n      for (var i = pageIndex; i >= 0; i--) {\n        if (i !== pageIndex && this.searchMatches[i]) {\n          pageNumber = i;\n          break;\n        }\n      }\n      if (!pageNumber) {\n        for (var j = this.pdfViewerBase.pageCount - 1; j > pageIndex; j--) {\n          if (this.searchMatches[j]) {\n            pageNumber = j;\n            break;\n          }\n        }\n      }\n    } else {\n      for (var i = pageIndex; i < this.pdfViewerBase.pageCount; i++) {\n        if (i !== pageIndex && this.searchMatches[i]) {\n          pageNumber = i;\n          break;\n        }\n      }\n      if (!pageNumber) {\n        if (pageIndex === 0) {\n          pageNumber = pageIndex;\n        } else {\n          for (var j = 0; j < pageIndex; j++) {\n            if (this.searchMatches[j]) {\n              pageNumber = j;\n              break;\n            }\n          }\n        }\n      }\n    }\n    return pageNumber;\n  };\n  TextSearch.prototype.highlightSearchedTexts = function (pageIndex, isSinglePageSearch, ArrayReturns) {\n    // eslint-disable-next-line\n    var matches = this.searchMatches[pageIndex];\n    var prevEnd = null;\n    // eslint-disable-next-line\n    var scrollPoint = {\n      y: -100,\n      x: -100\n    };\n    var startId;\n    var className;\n    var searchingText = this.searchString;\n    // eslint-disable-next-line\n    var characterBounds = this.pdfViewerBase.textLayer.characterBound[pageIndex];\n    var isHighlight = false;\n    if (isSinglePageSearch && this.pdfViewerBase.currentPageNumber - 1 !== this.searchPageIndex) {\n      if (this.searchMatches.length > 0) {\n        if (pageIndex === this.getSearchPage(this.pdfViewerBase.currentPageNumber - 1)) {\n          isHighlight = true;\n        }\n      }\n    }\n    if (characterBounds && matches !== undefined) {\n      for (var i = 0; i < matches.length; i++) {\n        if (matches[i].length !== undefined && ArrayReturns !== undefined) {\n          if (i === this.searchIndex && pageIndex === this.searchPageIndex) {\n            for (var j = 0; j < ArrayReturns.length; j++) {\n              className = 'e-pv-search-text-highlight';\n              this.searchString = ArrayReturns[j].trim();\n              this.addDivForSearch(i, pageIndex, characterBounds, this.searchString.length, className, j);\n            }\n          } else {\n            for (var j = 0; j < ArrayReturns.length; j++) {\n              className = 'e-pv-search-text-highlightother';\n              this.searchString = ArrayReturns[j].trim();\n              this.addDivForSearch(i, pageIndex, characterBounds, this.searchString.length, className, j);\n            }\n          }\n        } else if (i === this.searchIndex && pageIndex === this.searchPageIndex) {\n          className = 'e-pv-search-text-highlight';\n        } else {\n          className = 'e-pv-search-text-highlightother';\n        }\n        if (matches[i].length == undefined) {\n          this.addDivForSearch(i, pageIndex, characterBounds, this.searchString.length, className, undefined);\n        }\n      }\n      this.searchString = searchingText;\n      if (pageIndex === this.searchPageIndex && !isSinglePageSearch) {\n        var element = this.pdfViewerBase.getElement('_searchtext_' + pageIndex + '_' + this.searchIndex);\n        if (element) {\n          var targetScrollElement = this.getScrollElement(element);\n          this.scrollToSearchStr(targetScrollElement, scrollPoint);\n        } else {\n          this.pdfViewerBase.updateScrollTop(pageIndex);\n          var element_1 = this.pdfViewerBase.getElement('_searchtext_' + pageIndex + '_' + this.searchIndex);\n          if (element_1) {\n            var targetScrollElement = this.getScrollElement(element_1);\n            this.scrollToSearchStr(targetScrollElement, scrollPoint);\n          }\n        }\n      }\n    }\n  };\n  // eslint-disable-next-line\n  TextSearch.prototype.addDivForSearch = function (index, pageIndex, characterBounds, queryLength, className, nestedIndex) {\n    var textLayer = this.pdfViewerBase.getElement('_textLayer_' + pageIndex);\n    if (isNullOrUndefined(textLayer) && className === 'e-pv-search-text-highlight') {\n      if (this.pdfViewer.navigation) {\n        this.pdfViewer.navigation.goToPage(pageIndex + 1);\n      }\n    }\n    var count;\n    if (this.searchMatches[pageIndex][index].length !== undefined) {\n      count = this.searchMatches[pageIndex][index][nestedIndex];\n    } else {\n      count = this.searchMatches[pageIndex][index];\n    }\n    var initial = count;\n    var divCount = 0;\n    while (count < initial + queryLength) {\n      count = this.addDivElement(count, characterBounds, queryLength, className, index, pageIndex, initial, divCount, nestedIndex);\n      divCount++;\n    }\n    if (className === 'e-pv-search-text-highlight') {\n      this.showLoadingIndicator(false);\n    }\n  };\n  // eslint-disable-next-line\n  TextSearch.prototype.addDivElement = function (count, characterBounds, queryLength, className, index, pageIndex, initial, divCount, nestedIndex) {\n    var height = 0;\n    var width = 0;\n    var top = 0;\n    var left = 0;\n    var isRTL = false;\n    if (characterBounds[count]) {\n      left = characterBounds[count].X;\n      top = characterBounds[count].Y;\n    }\n    var v = 0;\n    if (count - initial !== 0) {\n      v = count - initial;\n      queryLength += 1;\n    }\n    for (v = v; v < queryLength; v++) {\n      if (characterBounds[count]) {\n        // eslint-disable-next-line\n        var charBound = characterBounds[count];\n        if (left > charBound.X + charBound.Width) {\n          isRTL = true;\n        }\n        top = top < charBound.Y ? top : charBound.Y;\n        var topDifference = top < charBound.Y ? charBound.Y - top : top - charBound.Y;\n        height = height > topDifference + charBound.Height ? height : topDifference + charBound.Height;\n        count++;\n      }\n    }\n    var isContinuation = false;\n    if (!isRTL) {\n      if (initial + queryLength !== count) {\n        isContinuation = true;\n        if (characterBounds[count - 1]) {\n          width = characterBounds[count - 1].X - left;\n        }\n      } else {\n        isContinuation = false;\n        // eslint-disable-next-line\n        var storedData = this.pdfViewerBase.clientSideRendering ? this.pdfViewerBase.getLinkInformation(pageIndex, true) : this.pdfViewerBase.getStoredData(pageIndex, true);\n        var pageText = null;\n        if (storedData) {\n          pageText = storedData['pageText'];\n        } else if (this.pdfViewer.isExtractText && this.documentTextCollection.length !== 0) {\n          // eslint-disable-next-line\n          var documentIndex = this.documentTextCollection[pageIndex][pageIndex];\n          pageText = documentIndex.pageText ? documentIndex.pageText : documentIndex.PageText;\n        }\n        if (characterBounds[count]) {\n          if (pageText && (pageText[count] === '' || pageText[count] === ' ' || pageText[count] === '\\r' || pageText[count] === '\\n') && characterBounds[count].Width === 0) {\n            width = characterBounds[count - 1].X - left + characterBounds[count - 1].Width;\n          } else {\n            width = characterBounds[count].X - left;\n          }\n        } else {\n          if (characterBounds[count - 1]) {\n            width = characterBounds[count - 1].X - left;\n          }\n        }\n      }\n    } else {\n      var charBound = characterBounds[initial + queryLength - 1];\n      left = charBound.X;\n      width = characterBounds[initial].X - characterBounds[initial + queryLength - 1].X;\n      top = top < charBound.Y ? top : charBound.Y;\n      var topDifference = top < charBound.Y ? charBound.Y - top : top - charBound.Y;\n      height = height > topDifference + charBound.Height ? height : topDifference + charBound.Height;\n      //some RTL character calculated width is zero and width difference value calculated from Y possition difference in the same line.\n      var widthDifference = characterBounds[initial - 1].Y - characterBounds[initial].Y;\n      for (var j = initial + queryLength - 1; j >= initial; j--) {\n        charBound = characterBounds[j];\n        if (charBound.Width === 0) {\n          widthDifference = charBound.Y - characterBounds[j - 1].Y;\n        }\n      }\n      width = width + widthDifference;\n    }\n    this.createSearchTextDiv(index, pageIndex, height, width, top, left, className, isContinuation, divCount, nestedIndex);\n    return count;\n  };\n  // eslint-disable-next-line\n  TextSearch.prototype.createSearchTextDiv = function (index, pageIndex, height, width, top, left, className, isContinuation, divCount, nestedIndex) {\n    var idString = '_searchtext_' + pageIndex + '_' + index;\n    if (isContinuation) {\n      idString += '_' + divCount;\n    }\n    if (nestedIndex !== undefined && this.pdfViewerBase.getElement(idString)) {\n      var textDiv = createElement('div', {\n        id: this.pdfViewer.element.id + idString + \"_\" + nestedIndex\n      });\n      // eslint-disable-next-line\n      var pageDetails = this.pdfViewerBase.pageSize[pageIndex];\n      this.calculateBounds(textDiv, height, width, top, left, pageDetails);\n      textDiv.classList.add(className);\n      if (className === 'e-pv-search-text-highlight') {\n        // eslint-disable-next-line max-len\n        textDiv.style.backgroundColor = this.pdfViewer.textSearchColorSettings.searchHighlightColor === '' ? '#fdd835' : this.pdfViewer.textSearchColorSettings.searchHighlightColor;\n        var bounds = {\n          left: left,\n          top: top,\n          width: width,\n          height: height\n        };\n        this.pdfViewer.fireTextSearchHighlight(this.searchString, this.isMatchCase, bounds, pageIndex + 1);\n      } else if (className === 'e-pv-search-text-highlightother') {\n        // eslint-disable-next-line max-len\n        textDiv.style.backgroundColor = this.pdfViewer.textSearchColorSettings.searchColor === '' ? '#8b4c12' : this.pdfViewer.textSearchColorSettings.searchColor;\n      }\n      var textLayer = this.pdfViewerBase.getElement('_textLayer_' + pageIndex);\n      textDiv.style.zIndex = this.searchTextDivzIndex;\n      if (textLayer) {\n        textLayer.appendChild(textDiv);\n      }\n    }\n    if (!this.pdfViewerBase.getElement(idString)) {\n      var textDiv = createElement('div', {\n        id: this.pdfViewer.element.id + idString\n      });\n      // eslint-disable-next-line\n      var pageDetails = this.pdfViewerBase.pageSize[pageIndex];\n      this.calculateBounds(textDiv, height, width, top, left, pageDetails);\n      textDiv.classList.add(className);\n      if (className === 'e-pv-search-text-highlight') {\n        // eslint-disable-next-line max-len\n        textDiv.style.backgroundColor = this.pdfViewer.textSearchColorSettings.searchHighlightColor === '' ? '#fdd835' : this.pdfViewer.textSearchColorSettings.searchHighlightColor;\n        var bounds = {\n          left: left,\n          top: top,\n          width: width,\n          height: height\n        };\n        this.pdfViewer.fireTextSearchHighlight(this.searchString, this.isMatchCase, bounds, pageIndex + 1);\n      } else if (className === 'e-pv-search-text-highlightother') {\n        // eslint-disable-next-line max-len\n        textDiv.style.backgroundColor = this.pdfViewer.textSearchColorSettings.searchColor === '' ? '#8b4c12' : this.pdfViewer.textSearchColorSettings.searchColor;\n      }\n      var textLayer = this.pdfViewerBase.getElement('_textLayer_' + pageIndex);\n      textDiv.style.zIndex = this.searchTextDivzIndex;\n      if (textLayer) {\n        textLayer.appendChild(textDiv);\n      }\n    }\n  };\n  // eslint-disable-next-line\n  TextSearch.prototype.calculateBounds = function (textDiv, height, width, top, left, pageDetails) {\n    if (pageDetails.rotation === 0 || pageDetails.rotation === 2) {\n      textDiv.style.height = Math.ceil(height) * this.pdfViewerBase.getZoomFactor() + 'px';\n      textDiv.style.width = width * this.pdfViewerBase.getZoomFactor() + 'px';\n      if (pageDetails.rotation === 2) {\n        textDiv.style.top = (pageDetails.height - top - height) * this.pdfViewerBase.getZoomFactor() + 'px';\n        textDiv.style.left = Math.ceil(pageDetails.width - left - width) * this.pdfViewerBase.getZoomFactor() + 'px';\n      } else {\n        textDiv.style.top = top * this.pdfViewerBase.getZoomFactor() + 'px';\n        textDiv.style.left = left * this.pdfViewerBase.getZoomFactor() + 'px';\n      }\n    } else if (pageDetails.rotation === 1) {\n      textDiv.style.height = width * this.pdfViewerBase.getZoomFactor() + 'px';\n      textDiv.style.width = height * this.pdfViewerBase.getZoomFactor() + 'px';\n      textDiv.style.top = left * this.pdfViewerBase.getZoomFactor() + 'px';\n      textDiv.style.left = (pageDetails.height - top - height) * this.pdfViewerBase.getZoomFactor() + 'px';\n    } else if (pageDetails.rotation === 3) {\n      textDiv.style.height = width * this.pdfViewerBase.getZoomFactor() + 'px';\n      textDiv.style.width = height * this.pdfViewerBase.getZoomFactor() + 'px';\n      textDiv.style.left = (pageDetails.width - pageDetails.height + top) * this.pdfViewerBase.getZoomFactor() + 'px';\n      textDiv.style.top = (pageDetails.height - left - width) * this.pdfViewerBase.getZoomFactor() + 'px';\n    }\n  };\n  TextSearch.prototype.isClassAvailable = function () {\n    var isClass = false;\n    for (var j = 0; j < this.tempElementStorage.length; j++) {\n      if (this.tempElementStorage[j].classString) {\n        // eslint-disable-next-line max-len\n        if (this.tempElementStorage[j].classString === 'e-pv-search-text-highlight' || this.tempElementStorage[j].classString === 'e-pv-search-text-highlightother') {\n          isClass = true;\n          break;\n        }\n      }\n    }\n    return isClass;\n  };\n  TextSearch.prototype.getScrollElement = function (element) {\n    var targetElement = element;\n    if (element.childNodes.length > 0) {\n      for (var i = 0; i < element.childNodes.length; i++) {\n        if (element.childNodes[i].classList) {\n          if (element.childNodes[i].classList.contains('e-pv-search-text-highlight')) {\n            targetElement = element.childNodes[i];\n          }\n        }\n      }\n    }\n    return targetElement;\n  };\n  // eslint-disable-next-line\n  TextSearch.prototype.scrollToSearchStr = function (element, scrollPoint) {\n    var parent = element.offsetParent;\n    var offsetY = element.offsetTop + element.clientTop;\n    var offsetX = element.offsetLeft + element.clientLeft;\n    while (parent.id !== this.pdfViewerBase.viewerContainer.id) {\n      offsetY += parent.offsetTop;\n      offsetX += parent.offsetLeft;\n      parent = parent.offsetParent;\n    }\n    if (scrollPoint) {\n      offsetY += scrollPoint.y;\n      offsetX += scrollPoint.x;\n      if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n        parent.scrollLeft = offsetX;\n      } else {\n        if (this.pdfViewerBase.getZoomFactor() > 1.5) {\n          parent.scrollLeft = offsetX;\n        }\n      }\n    }\n    parent.scrollTop = offsetY;\n    this.pdfViewerBase.updateMobileScrollerPosition();\n  };\n  /**\n   * @param pageIndex\n   * @private\n   */\n  TextSearch.prototype.resizeSearchElements = function (pageIndex) {\n    var searchDivs = document.querySelectorAll('div[id*=\"' + this.pdfViewer.element.id + '_searchtext_' + pageIndex + '\"]');\n    for (var i = 0; i < searchDivs.length; i++) {\n      var textDiv = searchDivs[i];\n      var previousZoomFactor = 1;\n      if (this.pdfViewer.magnificationModule) {\n        previousZoomFactor = this.pdfViewer.magnificationModule.previousZoomFactor;\n      }\n      // eslint-disable-next-line max-len\n      var outputdata = pageIndex + '_' + previousZoomFactor + '_' + this.pdfViewerBase.getZoomFactor();\n      if (textDiv.getAttribute('name') !== outputdata) {\n        // eslint-disable-next-line\n        textDiv.style.width = parseFloat(textDiv.style.width) / previousZoomFactor * this.pdfViewerBase.getZoomFactor() + 'px';\n        // eslint-disable-next-line\n        textDiv.style.height = parseFloat(textDiv.style.height) / previousZoomFactor * this.pdfViewerBase.getZoomFactor() + 'px';\n        // eslint-disable-next-line\n        textDiv.style.top = parseFloat(textDiv.style.top) / previousZoomFactor * this.pdfViewerBase.getZoomFactor() + 'px';\n        // eslint-disable-next-line\n        textDiv.style.left = parseFloat(textDiv.style.left) / previousZoomFactor * this.pdfViewerBase.getZoomFactor() + 'px';\n        textDiv.setAttribute('name', outputdata);\n      }\n    }\n  };\n  /**\n   * @param pageNumber\n   * @private\n   */\n  TextSearch.prototype.highlightOtherOccurrences = function (pageNumber) {\n    this.initSearch(pageNumber, true);\n  };\n  TextSearch.prototype.highlightOthers = function (isSearched) {\n    var indexes = this.getIndexes();\n    var lowerPageValue = parseFloat(indexes.lowerPageValue.toString());\n    var higherPageValue = parseFloat(indexes.higherPageValue.toString());\n    for (var i = lowerPageValue; i <= higherPageValue; i++) {\n      this.highlightOtherOccurrences(i);\n    }\n    if (isSearched) {\n      this.showLoadingIndicator(false);\n    }\n  };\n  /**\n   * @private\n   */\n  TextSearch.prototype.clearAllOccurrences = function () {\n    var searchTextDivs = document.querySelectorAll('div[id*=\"' + this.pdfViewer.element.id + '_searchtext_\"]');\n    for (var i = 0; i < searchTextDivs.length; i++) {\n      searchTextDivs[i].parentElement.removeChild(searchTextDivs[i]);\n    }\n  };\n  /**\n   * @private\n   */\n  // eslint-disable-next-line\n  TextSearch.prototype.getIndexes = function () {\n    var lowerPageValue = this.pdfViewerBase.currentPageNumber - 3;\n    lowerPageValue = lowerPageValue > 0 ? lowerPageValue : 0;\n    var higherPageValue = this.pdfViewerBase.currentPageNumber + 1;\n    higherPageValue = higherPageValue < this.pdfViewerBase.pageCount ? higherPageValue : this.pdfViewerBase.pageCount - 1;\n    return {\n      lowerPageValue: lowerPageValue,\n      higherPageValue: higherPageValue\n    };\n  };\n  TextSearch.prototype.applyTextSelection = function () {\n    if (this.pdfViewer.textSelectionModule && !this.pdfViewerBase.isTextSelectionDisabled) {\n      var indexes = this.getIndexes();\n      var lowerPageValue = parseFloat(indexes.lowerPageValue.toString());\n      var higherPageValue = parseFloat(indexes.higherPageValue.toString());\n      for (var i = lowerPageValue; i <= higherPageValue; i++) {\n        this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(i);\n      }\n    }\n  };\n  /**\n   * @private\n   */\n  TextSearch.prototype.resetTextSearch = function () {\n    this.resetVariables();\n    this.onTextSearchClose();\n    this.searchPageIndex = null;\n    this.searchIndex = 0;\n    this.updateSearchInputIcon(true);\n    this.enableNextButton(false);\n    this.enablePrevButton(false);\n    this.documentTextCollection = [];\n    this.isTextRetrieved = false;\n    this.isTextSearched = false;\n    this.isSearchText = false;\n    if (this.searchRequestHandler) {\n      this.searchRequestHandler.clear();\n    }\n  };\n  TextSearch.prototype.onTextSearchClose = function () {\n    this.isPrevSearch = false;\n    this.isTextSearch = false;\n    if (this.pdfViewerBase.pageCount > 0) {\n      this.clearAllOccurrences();\n    }\n  };\n  TextSearch.prototype.createRequestForSearch = function (pageIndex) {\n    var proxy = this;\n    var viewPortWidth = 816;\n    var viewPortHeight = this.pdfViewer.element.clientHeight;\n    var pageWidth = this.pdfViewerBase.pageSize[pageIndex].width;\n    var pageHeight = this.pdfViewerBase.pageSize[pageIndex].height;\n    var tileCount = this.pdfViewerBase.getTileCount(pageWidth);\n    var noTileX = viewPortWidth >= pageWidth ? 1 : tileCount;\n    var noTileY = viewPortWidth >= pageWidth ? 1 : tileCount;\n    var isTileRendering = false;\n    var tileSettings = this.pdfViewer.tileRenderingSettings;\n    if (tileSettings.enableTileRendering && tileSettings.x > 0 && tileSettings.y > 0) {\n      noTileX = viewPortWidth >= pageWidth ? 1 : tileSettings.x;\n      noTileY = viewPortWidth >= pageWidth ? 1 : tileSettings.y;\n    }\n    if (noTileX > 1 && noTileY > 1) {\n      isTileRendering = true;\n    }\n    var _loop_1 = function (x) {\n      var _loop_2 = function (y) {\n        var jsonObject = void 0;\n        // eslint-disable-next-line max-len\n        jsonObject = {\n          xCoordinate: x,\n          yCoordinate: y,\n          pageNumber: pageIndex,\n          viewPortWidth: viewPortWidth,\n          viewPortHeight: viewPortHeight,\n          documentId: proxy.pdfViewerBase.getDocumentId(),\n          hashId: proxy.pdfViewerBase.hashId,\n          zoomFactor: proxy.pdfViewerBase.getZoomFactor(),\n          tilecount: tileCount,\n          action: 'Search',\n          elementId: proxy.pdfViewer.element.id,\n          uniqueId: proxy.pdfViewerBase.documentId,\n          tileXCount: noTileX,\n          tileYCount: noTileY\n        };\n        if (this_1.pdfViewerBase.jsonDocumentId) {\n          // eslint-disable-next-line\n          jsonObject.documentId = this_1.pdfViewerBase.jsonDocumentId;\n        }\n        var zoomFactor = this_1.pdfViewerBase.retrieveCurrentZoomFactor();\n        this_1.searchRequestHandler = new AjaxHandler(this_1.pdfViewer);\n        this_1.searchRequestHandler.url = this_1.pdfViewer.serviceUrl + '/' + this_1.pdfViewer.serverActionSettings.renderPages;\n        this_1.searchRequestHandler.responseType = 'json';\n        if (!this_1.pdfViewerBase.clientSideRendering) {\n          this_1.searchRequestHandler.send(jsonObject);\n        }\n        // eslint-disable-next-line\n        this_1.searchRequestHandler.onSuccess = function (result) {\n          // eslint-disable-next-line\n          var data = result.data;\n          if (data) {\n            if (typeof data !== 'object') {\n              try {\n                data = JSON.parse(data);\n              } catch (error) {\n                proxy.pdfViewerBase.onControlError(500, data, this.pdfViewer.serverActionSettings.renderPages);\n                data = null;\n              }\n            }\n            if (data) {\n              proxy.searchRequestOnSuccess(data, proxy, viewPortWidth, pageWidth, isTileRendering, pageIndex, x, y, noTileX, noTileY);\n            }\n          }\n        };\n        // eslint-disable-next-line\n        this_1.searchRequestHandler.onFailure = function (result) {\n          proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, this.pdfViewer.serverActionSettings.renderPages);\n        };\n        // eslint-disable-next-line\n        this_1.searchRequestHandler.onError = function (result) {\n          proxy.pdfViewerBase.openNotificationPopup();\n          // eslint-disable-next-line max-len\n          proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, this.pdfViewer.serverActionSettings.renderPages);\n        };\n        if (this_1.pdfViewerBase.clientSideRendering) {\n          var textDetailsId = this_1.pdfViewerBase.documentId + '_' + pageIndex + '_textDetails';\n          var isTextNeed = this_1.pdfViewerBase.pageTextDetails ? this_1.pdfViewerBase.pageTextDetails[textDetailsId] ? false : true : true;\n          if (viewPortWidth >= pageWidth || !this_1.pdfViewer.tileRenderingSettings.enableTileRendering) {\n            this_1.pdfViewerBase.pdfViewerRunner.postMessage({\n              pageIndex: pageIndex,\n              message: 'renderPageSearch',\n              zoomFactor: proxy.pdfViewer.magnificationModule.zoomFactor,\n              isTextNeed: isTextNeed,\n              textDetailsId: textDetailsId\n            });\n          } else {\n            this_1.pdfViewerBase.pdfViewerRunner.postMessage({\n              pageIndex: pageIndex,\n              message: 'renderImageAsTileSearch',\n              zoomFactor: zoomFactor,\n              tileX: x,\n              tileY: y,\n              tileXCount: noTileX,\n              tileYCount: noTileY,\n              isTextNeed: isTextNeed,\n              textDetailsId: textDetailsId\n            });\n          }\n          this_1.pdfViewerBase.pdfViewerRunner.onmessage = function (event) {\n            switch (event.data.message) {\n              case 'imageRenderedSearch':\n                if (event.data.message === 'imageRenderedSearch') {\n                  var canvas = document.createElement('canvas');\n                  var _a = event.data,\n                    value = _a.value,\n                    width = _a.width,\n                    height = _a.height,\n                    pageIndex_1 = _a.pageIndex;\n                  canvas.width = width;\n                  canvas.height = height;\n                  var canvasContext = canvas.getContext('2d');\n                  var imageData = canvasContext.createImageData(width, height);\n                  imageData.data.set(value);\n                  canvasContext.putImageData(imageData, 0, 0);\n                  var imageUrl = canvas.toDataURL();\n                  var textBounds = event.data.textBounds;\n                  var textContent = event.data.textContent;\n                  var pageText = event.data.pageText;\n                  var rotation = event.data.rotation;\n                  var characterBounds = event.data.characterBounds;\n                  var hyperlinksDetails = proxy.pdfViewer.pdfRendererModule.getHyperlinks(pageIndex_1);\n                  var data = {\n                    image: imageUrl,\n                    pageNumber: pageIndex_1,\n                    uniqueId: proxy.pdfViewerBase.documentId,\n                    pageWidth: width,\n                    zoomFactor: event.data.zoomFactor,\n                    hyperlinks: hyperlinksDetails.hyperlinks,\n                    hyperlinkBounds: hyperlinksDetails.hyperlinkBounds,\n                    linkAnnotation: hyperlinksDetails.linkAnnotation,\n                    linkPage: hyperlinksDetails.linkPage,\n                    annotationLocation: hyperlinksDetails.annotationLocation,\n                    characterBounds: characterBounds\n                  };\n                  if (event.data.isTextNeed) {\n                    data.textBounds = textBounds;\n                    data.textContent = textContent;\n                    data.rotation = rotation;\n                    data.pageText = pageText;\n                    proxy.pdfViewerBase.storeTextDetails(pageIndex_1, textBounds, textContent, pageText, rotation, characterBounds);\n                  } else {\n                    var textDetails = JSON.parse(proxy.pdfViewerBase.pageTextDetails[\"\" + event.data.textDetailsId]);\n                    data.textBounds = textDetails.textBounds;\n                    data.textContent = textDetails.textContent;\n                    data.rotation = textDetails.rotation;\n                    data.pageText = textDetails.pageText;\n                    data.characterBounds = textDetails.characterBounds;\n                  }\n                  if (data && data.image && data.uniqueId === proxy.pdfViewerBase.documentId) {\n                    var currentPageWidth = data.pageWidth && data.pageWidth > 0 ? data.pageWidth : pageWidth;\n                    proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.renderPages, data);\n                    var pageNumber = data.pageNumber !== undefined ? data.pageNumber : pageIndex_1;\n                    var blobObj = proxy.pdfViewerBase.createBlobUrl(data.image.split('base64,')[1], 'image/png');\n                    var Url = URL || webkitURL;\n                    var blobUrl = Url.createObjectURL(blobObj);\n                    var storeObject = {\n                      // eslint-disable-next-line\n                      image: blobUrl,\n                      width: data.pageWidth,\n                      uniqueId: data.uniqueId,\n                      zoomFactor: data.zoomFactor\n                    };\n                    proxy.pdfViewerBase.storeImageData(pageNumber, storeObject);\n                    proxy.searchRequestOnSuccess(data, proxy, viewPortWidth, pageWidth, isTileRendering, pageIndex_1, x, y, noTileX, noTileY);\n                  }\n                }\n                break;\n              case 'renderTileImageSearch':\n                if (event.data.message === 'renderTileImageSearch') {\n                  var canvas = document.createElement('canvas');\n                  var _b = event.data,\n                    value = _b.value,\n                    w = _b.w,\n                    h = _b.h,\n                    noTileX_1 = _b.noTileX,\n                    noTileY_1 = _b.noTileY,\n                    x_1 = _b.x,\n                    y_1 = _b.y,\n                    pageIndex_2 = _b.pageIndex;\n                  canvas.setAttribute('height', h);\n                  canvas.setAttribute('width', w);\n                  canvas.width = w;\n                  canvas.height = h;\n                  var canvasContext = canvas.getContext('2d');\n                  var imageData = canvasContext.createImageData(w, h);\n                  imageData.data.set(value);\n                  canvasContext.putImageData(imageData, 0, 0);\n                  var imageUrl = canvas.toDataURL();\n                  var tileWidth = w;\n                  var tileHeight = h;\n                  var textBounds = event.data.textBounds;\n                  var textContent = event.data.textContent;\n                  var pageText = event.data.pageText;\n                  var rotation = event.data.rotation;\n                  var characterBounds = event.data.characterBounds;\n                  var tileData = {\n                    image: imageUrl,\n                    noTileX: noTileX_1,\n                    noTileY: noTileY_1,\n                    pageNumber: pageIndex_2,\n                    tileX: x_1,\n                    tileY: y_1,\n                    uniqueId: proxy.pdfViewerBase.documentId,\n                    pageWidth: pageWidth,\n                    width: tileWidth,\n                    transformationMatrix: {\n                      Values: [1, 0, 0, 1, tileWidth * x_1, tileHeight * y_1, 0, 0, 0]\n                    },\n                    zoomFactor: event.data.zoomFactor,\n                    characterBounds: characterBounds,\n                    isTextNeed: event.data.isTextNeed,\n                    textDetailsId: event.data.textDetailsId\n                  };\n                  if (tileData && tileData.image && tileData.uniqueId === proxy.pdfViewerBase.documentId) {\n                    var currentPageWidth = tileData.pageWidth && tileData.pageWidth > 0 ? tileData.pageWidth : pageWidth;\n                    proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.renderPages, tileData);\n                    var pageNumber = tileData.pageNumber !== undefined ? tileData.pageNumber : pageIndex_2;\n                    if (x_1 == 0 && y_1 == 0) {\n                      var blobObj = proxy.pdfViewerBase.createBlobUrl(tileData.image.split('base64,')[1], 'image/png');\n                      var Url = URL || webkitURL;\n                      var blobUrl = Url.createObjectURL(blobObj);\n                      var storeObject = {\n                        // eslint-disable-next-line\n                        image: blobUrl,\n                        width: tileData.pageWidth,\n                        uniqueId: tileData.uniqueId,\n                        tileX: tileData.tileX,\n                        tileY: tileData.tileY,\n                        zoomFactor: tileData.zoomFactor\n                      };\n                      if (tileData.isTextNeed) {\n                        tileData.textBounds = textBounds;\n                        tileData.textContent = textContent;\n                        tileData.rotation = rotation;\n                        tileData.pageText = pageText;\n                        proxy.pdfViewerBase.storeTextDetails(pageIndex_2, textBounds, textContent, pageText, rotation, characterBounds);\n                      } else {\n                        var textDetails = JSON.parse(proxy.pdfViewerBase.pageTextDetails[\"\" + tileData.textDetailsId]);\n                        tileData.textBounds = textDetails.textBounds;\n                        tileData.textContent = textDetails.textContent;\n                        tileData.rotation = textDetails.rotation;\n                        tileData.pageText = textDetails.pageText;\n                        tileData.characterBounds = textDetails.characterBounds;\n                      }\n                      proxy.pdfViewerBase.storeImageData(pageNumber, storeObject, tileData.tileX, tileData.tileY);\n                    } else {\n                      var blobObj = proxy.pdfViewerBase.createBlobUrl(tileData.image.split('base64,')[1], 'image/png');\n                      var Url = URL || webkitURL;\n                      var blobUrl = Url.createObjectURL(blobObj);\n                      var storeObject = {\n                        // eslint-disable-next-line\n                        image: blobUrl,\n                        width: tileData.pageWidth,\n                        uniqueId: tileData.uniqueId,\n                        tileX: tileData.tileX,\n                        tileY: tileData.tileY,\n                        zoomFactor: tileData.zoomFactor\n                      };\n                      proxy.pdfViewerBase.storeImageData(pageNumber, storeObject, tileData.tileX, tileData.tileY);\n                    }\n                    proxy.searchRequestOnSuccess(tileData, proxy, viewPortWidth, pageWidth, isTileRendering, pageIndex_2, x_1, y_1, noTileX_1, noTileY_1);\n                  }\n                }\n                break;\n            }\n          };\n        }\n      };\n      for (var y = 0; y < noTileY; y++) {\n        _loop_2(y);\n      }\n    };\n    var this_1 = this;\n    for (var x = 0; x < noTileX; x++) {\n      _loop_1(x);\n    }\n  };\n  TextSearch.prototype.searchRequestOnSuccess = function (data, proxy, viewPortWidth, pageWidth, isTileRendering, pageIndex, x, y, noTileX, noTileY) {\n    if (!isNullOrUndefined(data.pageText) && data.uniqueId === proxy.pdfViewerBase.documentId) {\n      proxy.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.renderPages, data);\n      var pageNumber = data.pageNumber !== undefined ? data.pageNumber : pageIndex;\n      if (viewPortWidth >= pageWidth) {\n        proxy.pdfViewerBase.storeWinData(data, pageNumber);\n      } else {\n        proxy.pdfViewerBase.storeWinData(data, pageNumber, data.tileX, data.tileY);\n      }\n      if (!isTileRendering) {\n        proxy.initSearch(pageIndex, false);\n      } else {\n        if (x === noTileX - 1 && y === noTileY - 1) {\n          proxy.initSearch(pageIndex, false);\n        }\n      }\n    } else if (isTileRendering && data.uniqueId === proxy.pdfViewerBase.documentId) {\n      proxy.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.renderPages, data);\n      var pageNumber = data.pageNumber !== undefined ? data.pageNumber : pageIndex;\n      proxy.pdfViewerBase.storeWinData(data, pageNumber, data.tileX, data.tileY);\n      if (x === noTileX - 1 && y === noTileY - 1) {\n        proxy.initSearch(pageIndex, false);\n      }\n    }\n  };\n  /**\n   * @private\n   */\n  TextSearch.prototype.getPDFDocumentTexts = function () {\n    var startIndex = 0;\n    var endIndex = 50;\n    var pageCount = this.pdfViewerBase.pageCount;\n    if (endIndex >= pageCount) {\n      endIndex = pageCount;\n    }\n    this.createRequestForGetPdfTexts(startIndex, endIndex);\n  };\n  /**\n   * @param startIndex\n   * @param endIndex\n   * @private\n   */\n  TextSearch.prototype.createRequestForGetPdfTexts = function (startIndex, endIndex) {\n    var proxy = this;\n    var jsonObject;\n    // eslint-disable-next-line max-len\n    jsonObject = {\n      pageStartIndex: startIndex,\n      pageEndIndex: endIndex,\n      documentId: proxy.pdfViewerBase.getDocumentId(),\n      hashId: proxy.pdfViewerBase.hashId,\n      action: 'RenderPdfTexts',\n      elementId: proxy.pdfViewer.element.id,\n      uniqueId: proxy.pdfViewerBase.documentId\n    };\n    if (this.pdfViewerBase.jsonDocumentId) {\n      // eslint-disable-next-line\n      jsonObject.documentId = this.pdfViewerBase.jsonDocumentId;\n    }\n    this.searchRequestHandler = new AjaxHandler(this.pdfViewer);\n    this.searchRequestHandler.url = this.pdfViewer.serviceUrl + '/' + this.pdfViewer.serverActionSettings.renderTexts;\n    this.searchRequestHandler.responseType = 'json';\n    if (!this.pdfViewerBase.clientSideRendering) {\n      this.searchRequestHandler.send(jsonObject);\n    }\n    // eslint-disable-next-line\n    this.searchRequestHandler.onSuccess = function (result) {\n      // eslint-disable-next-line\n      var data = result.data;\n      if (data) {\n        if (typeof data !== 'object') {\n          try {\n            data = JSON.parse(data);\n          } catch (error) {\n            proxy.pdfViewerBase.onControlError(500, data, this.pdfViewer.serverActionSettings.renderTexts);\n            data = null;\n          }\n        }\n        if (data) {\n          proxy.pdfTextSearchRequestOnSuccess(data, proxy, startIndex, endIndex);\n        }\n      }\n    };\n    // eslint-disable-next-line\n    this.searchRequestHandler.onFailure = function (result) {\n      proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, this.pdfViewer.serverActionSettings.renderTexts);\n    };\n    // eslint-disable-next-line\n    this.searchRequestHandler.onError = function (result) {\n      proxy.pdfViewerBase.openNotificationPopup();\n      proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, this.pdfViewer.serverActionSettings.renderTexts);\n    };\n    if (this.pdfViewerBase.clientSideRendering) {\n      this.pdfViewer.pdfRendererModule.getDocumentText(jsonObject).then(function (data) {\n        proxy.pdfTextSearchRequestOnSuccess(data, proxy, startIndex, endIndex);\n      });\n    }\n  };\n  TextSearch.prototype.pdfTextSearchRequestOnSuccess = function (data, proxy, startIndex, endIndex) {\n    if (data.documentTextCollection && data.uniqueId === proxy.pdfViewerBase.documentId) {\n      proxy.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.renderTexts, data);\n      if (proxy.documentTextCollection.length > 0) {\n        proxy.documentTextCollection = data.documentTextCollection.concat(proxy.documentTextCollection);\n        proxy.documentTextCollection = proxy.orderPdfTextCollections(proxy.documentTextCollection);\n      } else {\n        proxy.documentTextCollection = data.documentTextCollection;\n      }\n      var pageCount = proxy.pdfViewerBase.pageCount;\n      if (endIndex !== pageCount) {\n        startIndex = endIndex;\n        endIndex = endIndex + 50;\n        if (endIndex >= pageCount) {\n          endIndex = pageCount;\n        }\n        proxy.createRequestForGetPdfTexts(startIndex, endIndex);\n      } else {\n        proxy.isTextRetrieved = true;\n        proxy.pdfViewer.fireTextExtractionCompleted(proxy.documentTextCollection);\n        if (proxy.isTextSearched && proxy.searchString.length > 0) {\n          proxy.textSearch(proxy.searchString);\n          proxy.isTextSearched = false;\n        }\n      }\n    }\n  };\n  // eslint-disable-next-line\n  TextSearch.prototype.orderPdfTextCollections = function (oldCollection) {\n    // eslint-disable-next-line\n    var annotationCollectionList = [];\n    for (var i = 0; i < oldCollection.length; i++) {\n      if (annotationCollectionList.length === 0) {\n        annotationCollectionList.push(oldCollection[i]);\n      } else {\n        // eslint-disable-next-line\n        if (parseInt(Object.keys(oldCollection[i])[0]) > parseInt(Object.keys(annotationCollectionList[annotationCollectionList.length - 1])[0])) {\n          annotationCollectionList.push(oldCollection[i]);\n        } else {\n          for (var j = 0; j < annotationCollectionList.length; j++) {\n            // eslint-disable-next-line\n            if (parseInt(Object.keys(oldCollection[i])[0]) < parseInt(Object.keys(annotationCollectionList[j])[0])) {\n              annotationCollectionList.splice(j, 0, oldCollection[i]);\n              break;\n            }\n          }\n        }\n      }\n    }\n    return annotationCollectionList;\n  };\n  TextSearch.prototype.createSearchBoxButtons = function (id, className) {\n    // eslint-disable-next-line max-len\n    var button = createElement('button', {\n      id: this.pdfViewer.element.id + '_' + id,\n      className: 'e-btn e-icon-btn e-pv-search-btn ' + className\n    });\n    button.setAttribute('type', 'button');\n    // eslint-disable-next-line max-len\n    var iconSpan = createElement('span', {\n      id: this.pdfViewer.element.id + '_' + id + 'Icon',\n      className: 'e-pv-icon-search ' + className + '-icon'\n    });\n    button.disabled = true;\n    button.appendChild(iconSpan);\n    return button;\n  };\n  TextSearch.prototype.enablePrevButton = function (isEnable) {\n    if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n      if (isEnable) {\n        this.prevSearchBtn.removeAttribute('disabled');\n      } else {\n        if (this.prevSearchBtn) {\n          this.prevSearchBtn.disabled = true;\n        }\n      }\n    }\n  };\n  TextSearch.prototype.enableNextButton = function (isEnable) {\n    if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n      if (isEnable) {\n        this.nextSearchBtn.removeAttribute('disabled');\n      } else {\n        if (this.nextSearchBtn) {\n          this.nextSearchBtn.disabled = true;\n        }\n      }\n    }\n  };\n  /**\n   * @private\n   */\n  TextSearch.prototype.resetVariables = function () {\n    this.searchedPages = [];\n    // eslint-disable-next-line\n    this.searchMatches = new Array();\n  };\n  /**\n   * @param element\n   * @param inputElement\n   * @private\n   */\n  TextSearch.prototype.searchButtonClick = function (element, inputElement) {\n    this.isMessagePopupOpened = false;\n    if (isBlazor() && Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n      var searchElement = this.pdfViewerBase.getElement('_search_box-icon');\n      element = searchElement.children[0].children[0];\n      inputElement = this.pdfViewerBase.getElement('_search_input');\n    }\n    if (element.classList.contains('e-pv-search-icon')) {\n      this.initiateTextSearch(inputElement);\n    } else if (element.classList.contains('e-pv-search-close')) {\n      this.showLoadingIndicator(false);\n      inputElement.value = '';\n      this.resetTextSearch();\n      inputElement.focus();\n    }\n  };\n  TextSearch.prototype.updateSearchInputIcon = function (isEnable) {\n    if (isBlazor()) {\n      if (this.searchBtn && Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n        this.searchBtn = this.pdfViewerBase.getElement('_search_box-icon').children[0].children[0];\n      }\n    }\n    if (this.searchBtn) {\n      if (isEnable) {\n        this.searchBtn.classList.remove('e-pv-search-close');\n        this.searchBtn.classList.add('e-pv-search-icon');\n      } else {\n        this.searchBtn.classList.remove('e-pv-search-icon');\n        this.searchBtn.classList.add('e-pv-search-close');\n      }\n    }\n  };\n  TextSearch.prototype.onMessageBoxOpen = function () {\n    var _this = this;\n    this.showLoadingIndicator(false);\n    this.pdfViewerBase.getElement('_search_input').blur();\n    this.isMessagePopupOpened = true;\n    if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n      if (isBlazor()) {\n        var promise = this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText', 'PdfViewer_Nomatches');\n        promise.then(function (value) {\n          _this.pdfViewerBase.textLayer.createNotificationPopup(value);\n        });\n      } else {\n        this.pdfViewerBase.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant('No matches'));\n      }\n    } else {\n      if (isBlazor()) {\n        var promise = this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText', 'PdfViewer_NoTextFound');\n        promise.then(function (value) {\n          _this.pdfViewerBase.navigationPane.createTooltipMobile(value);\n        });\n      } else {\n        this.pdfViewerBase.navigationPane.createTooltipMobile(this.pdfViewer.localeObj.getConstant('No Text Found'));\n      }\n    }\n  };\n  /**\n   * Searches the target text in the PDF document and highlights the occurrences in the pages\n   *\n   * @param  {string} searchText - Specifies the searchText content\n   * @param  {boolean} isMatchCase - If set true , its highlights the MatchCase content\n   * @returns void\n   */\n  TextSearch.prototype.searchText = function (searchText, isMatchCase) {\n    if (searchText && searchText.length > 0 && searchText[searchText.length - 1] === ' ') {\n      searchText = searchText.slice(0, searchText.length - 1);\n    }\n    this.searchString = searchText;\n    this.isMatchCase = isMatchCase;\n    this.searchIndex = 0;\n    this.textSearch(searchText);\n  };\n  /**\n   * Searches the next occurrence of the searched text from the current occurrence of the PdfViewer.\n   *\n   * @returns void\n   */\n  TextSearch.prototype.searchNext = function () {\n    this.nextSearch();\n  };\n  /**\n   * Searches the previous occurrence of the searched text from the current occurrence of the PdfViewer.\n   *\n   * @returns void\n   */\n  TextSearch.prototype.searchPrevious = function () {\n    this.prevSearch();\n  };\n  /**\n   * Cancels the text search of the PdfViewer.\n   *\n   * @returns void\n   */\n  TextSearch.prototype.cancelTextSearch = function () {\n    this.resetTextSearch();\n  };\n  /**\n   * @private\n   */\n  TextSearch.prototype.destroy = function () {\n    this.searchMatches = undefined;\n  };\n  /**\n   * @private\n   */\n  TextSearch.prototype.getModuleName = function () {\n    return 'TextSearch';\n  };\n  return TextSearch;\n}();\nexport { TextSearch };","map":{"version":3,"names":["createElement","Browser","isNullOrUndefined","isBlazor","CheckBox","AjaxHandler","createSpinner","showSpinner","hideSpinner","searchTextCollection","TextSearch","pdfViewer","pdfViewerBase","_this","isTextSearch","searchCount","searchIndex","currentSearchIndex","startIndex","searchPageIndex","searchString","isMatchCase","searchRequestHandler","textContents","Array","searchMatches","searchCollection","searchedPages","isPrevSearch","searchTextDivzIndex","tempElementStorage","isMessagePopupOpened","isTextRetrieved","isTextSearched","isTextSearchEventTriggered","isSearchText","checkBoxOnChange","event","currentTarget","checked","resetVariables","clearAllOccurrences","inputString","searchInput","value","textSearch","searchKeypressHandler","enableNextButton","enablePrevButton","which","initiateTextSearch","updateSearchInputIcon","searchClickHandler","searchButtonClick","searchBtn","nextButtonOnClick","nextSearch","prevButtonOnClick","prevSearch","prototype","createTextSearchBox","searchBox","id","element","className","toolbarElement","document","getElementById","getElement","style","top","clientHeight","searchElementsContainer","searchInputContainer","type","promise","_dotnetInstance","invokeMethodAsync","then","placeholder","localeObj","getConstant","setAttribute","appendChild","enableRtl","prevSearchBtn","createSearchBoxButtons","nextSearchBtn","matchCaseContainer","matchCaseInput","height","width","addEventListener","bind","mainContainer","matchCaseText_1","styles","textContent","checkBox","cssClass","label","htmlAttributes","change","appendTo","firstElementChild","key","target","click","preventDefault","stopPropagation","waitingPopup","position","left","clientWidth","setLoaderProperties","showSearchBox","classList","add","remove","right","parentElement","spinnerElement","firstChild","transformOrigin","showLoadingIndicator","isShow","textSearchBoxOnResize","toolbarModule","enableToolbar","secondaryToolbar","contains","viewerContainer","offsetLeft","parseInt","display","onTextSearchClose","searchAfterSelection","initSearch","highlightOthers","searchElement","length","slice","initiateSearch","currentPageNumber","fireTextSearchStart","isExtractText","i","pageCount","documentTextCollection","onMessageBoxOpen","updateScrollTop","highlightSearchedTexts","undefined","push","findPreviousPageWithText","currentPageIndex","prevPageIndex","pageIndex","isSinglePageSearch","isCount","storedData","getStoredData","pageText","characterBounds","documentIndex","pageTextData","PageText","getSearchTextContent","textLayer","characterBound","getPossibleMatches","createRequestForSearch","fireTextSearchComplete","pageString","arrayReturns","searchText","multiSearch","replace","Multiline","specialCharcterSearch","queryLength","toLowerCase","matches","matchedArray","matchIndex","newIndex","multiSearchIndex","MultilineIndex","specialcharcterIndex","indexOf","newString","correctLinetext","trim","splice","getSearchPage","indiuvalLineArray","searchArray","split","linestring","mergedText","result","match","index","pageCheck","searchArrayText","pageNumber","j","ArrayReturns","prevEnd","scrollPoint","y","x","startId","searchingText","isHighlight","addDivForSearch","targetScrollElement","getScrollElement","scrollToSearchStr","element_1","nestedIndex","navigation","goToPage","count","initial","divCount","addDivElement","isRTL","X","Y","v","charBound","Width","topDifference","Height","isContinuation","clientSideRendering","getLinkInformation","widthDifference","createSearchTextDiv","idString","textDiv","pageDetails","pageSize","calculateBounds","backgroundColor","textSearchColorSettings","searchHighlightColor","bounds","fireTextSearchHighlight","searchColor","zIndex","rotation","Math","ceil","getZoomFactor","isClassAvailable","isClass","classString","targetElement","childNodes","parent","offsetParent","offsetY","offsetTop","clientTop","offsetX","clientLeft","isDevice","enableDesktopMode","scrollLeft","scrollTop","updateMobileScrollerPosition","resizeSearchElements","searchDivs","querySelectorAll","previousZoomFactor","magnificationModule","outputdata","getAttribute","parseFloat","highlightOtherOccurrences","isSearched","indexes","getIndexes","lowerPageValue","toString","higherPageValue","searchTextDivs","removeChild","applyTextSelection","textSelectionModule","isTextSelectionDisabled","applySelectionRangeOnScroll","resetTextSearch","clear","proxy","viewPortWidth","viewPortHeight","pageWidth","pageHeight","tileCount","getTileCount","noTileX","noTileY","isTileRendering","tileSettings","tileRenderingSettings","enableTileRendering","_loop_1","_loop_2","jsonObject","xCoordinate","yCoordinate","documentId","getDocumentId","hashId","zoomFactor","tilecount","action","elementId","uniqueId","tileXCount","tileYCount","this_1","jsonDocumentId","retrieveCurrentZoomFactor","url","serviceUrl","serverActionSettings","renderPages","responseType","send","onSuccess","data","JSON","parse","error","onControlError","searchRequestOnSuccess","onFailure","fireAjaxRequestFailed","status","statusText","onError","openNotificationPopup","textDetailsId","isTextNeed","pageTextDetails","pdfViewerRunner","postMessage","message","tileX","tileY","onmessage","canvas","_a","pageIndex_1","canvasContext","getContext","imageData","createImageData","set","putImageData","imageUrl","toDataURL","textBounds","hyperlinksDetails","pdfRendererModule","getHyperlinks","image","hyperlinks","hyperlinkBounds","linkAnnotation","linkPage","annotationLocation","storeTextDetails","textDetails","currentPageWidth","fireAjaxRequestSuccess","blobObj","createBlobUrl","Url","URL","webkitURL","blobUrl","createObjectURL","storeObject","storeImageData","_b","w","h","noTileX_1","noTileY_1","x_1","y_1","pageIndex_2","tileWidth","tileHeight","tileData","transformationMatrix","Values","storeWinData","getPDFDocumentTexts","endIndex","createRequestForGetPdfTexts","pageStartIndex","pageEndIndex","renderTexts","pdfTextSearchRequestOnSuccess","getDocumentText","concat","orderPdfTextCollections","fireTextExtractionCompleted","oldCollection","annotationCollectionList","Object","keys","button","iconSpan","disabled","isEnable","removeAttribute","inputElement","children","focus","blur","createNotificationPopup","navigationPane","createTooltipMobile","searchNext","searchPrevious","cancelTextSearch","destroy","getModuleName"],"sources":["/Users/saleem/Desktop/KClient/Web App/Ver_3.6/User Interface/website_Source files/node_modules/@syncfusion/ej2-pdfviewer/src/pdfviewer/text-search/text-search.js"],"sourcesContent":["/* eslint-disable */\nimport { createElement, Browser, isNullOrUndefined, isBlazor } from '@syncfusion/ej2-base';\nimport { CheckBox } from '@syncfusion/ej2-buttons';\nimport { AjaxHandler } from '../index';\nimport { createSpinner, showSpinner, hideSpinner } from '../index';\nvar searchTextCollection = [];\n/**\n * TextSearch module\n */\nvar TextSearch = /** @class */ (function () {\n    /**\n     * @param pdfViewer\n     * @param pdfViewerBase\n     * @param pdfViewer\n     * @param pdfViewerBase\n     * @private\n     */\n    function TextSearch(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        /**\n         * @private\n         */\n        this.isTextSearch = false;\n        /**\n         * @private\n         */\n        this.searchCount = 0;\n        this.searchIndex = 0;\n        this.currentSearchIndex = 0;\n        this.startIndex = null;\n        this.searchPageIndex = null;\n        this.searchString = null;\n        this.isMatchCase = false;\n        this.searchRequestHandler = null;\n        // eslint-disable-next-line\n        this.textContents = new Array();\n        // eslint-disable-next-line\n        this.searchMatches = new Array();\n        // eslint-disable-next-line\n        this.searchCollection = new Array();\n        this.searchedPages = [];\n        this.isPrevSearch = false;\n        /**\n         * @private\n         */\n        this.searchTextDivzIndex = \"-1\";\n        // eslint-disable-next-line\n        this.tempElementStorage = new Array();\n        /**\n         * @private\n         */\n        this.isMessagePopupOpened = false;\n        /**\n         * @private\n         */\n        this.isTextRetrieved = false;\n        this.isTextSearched = false;\n        this.isTextSearchEventTriggered = false;\n        this.isSearchText = false;\n        // eslint-disable-next-line\n        this.checkBoxOnChange = function (event) {\n            if (isBlazor()) {\n                if (event.currentTarget && event.currentTarget.checked) {\n                    _this.isMatchCase = true;\n                }\n                else {\n                    _this.isMatchCase = false;\n                }\n            }\n            else {\n                if (event.checked) {\n                    _this.isMatchCase = true;\n                }\n                else {\n                    _this.isMatchCase = false;\n                }\n            }\n            if (_this.isTextSearch) {\n                _this.resetVariables();\n                _this.clearAllOccurrences();\n                var inputString = _this.searchInput.value;\n                _this.searchIndex = 0;\n                _this.textSearch(inputString);\n            }\n        };\n        this.searchKeypressHandler = function (event) {\n            _this.enableNextButton(true);\n            _this.enablePrevButton(true);\n            if (event.which === 13) {\n                _this.initiateTextSearch(_this.searchInput);\n                _this.updateSearchInputIcon(false);\n            }\n            else {\n                _this.resetVariables();\n            }\n        };\n        this.searchClickHandler = function (event) {\n            _this.searchButtonClick(_this.searchBtn, _this.searchInput);\n        };\n        this.nextButtonOnClick = function (event) {\n            _this.nextSearch();\n        };\n        this.prevButtonOnClick = function (event) {\n            _this.prevSearch();\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    TextSearch.prototype.createTextSearchBox = function () {\n        var _this = this;\n        // eslint-disable-next-line max-len\n        this.searchBox = createElement('div', { id: this.pdfViewer.element.id + '_search_box', className: 'e-pv-search-bar' });\n        var toolbarElement;\n        if (isBlazor()) {\n            toolbarElement = document.getElementById('toolbarContainer');\n        }\n        else {\n            toolbarElement = this.pdfViewerBase.getElement('_toolbarContainer');\n        }\n        if (toolbarElement) {\n            if (isBlazor()) {\n                this.searchBox.style.top = toolbarElement.clientHeight + 'px';\n            }\n            else {\n                this.searchBox.style.top = toolbarElement.clientHeight + 'px';\n            }\n        }\n        var searchElementsContainer = createElement('div', { id: this.pdfViewer.element.id + '_search_box_elements', className: 'e-pv-search-bar-elements' });\n        // eslint-disable-next-line max-len\n        var searchInputContainer = createElement('div', { id: this.pdfViewer.element.id + '_search_input_container', className: 'e-input-group e-pv-search-input' });\n        this.searchInput = createElement('input', { id: this.pdfViewer.element.id + '_search_input', className: 'e-input' });\n        this.searchInput.type = 'text';\n        if (isBlazor()) {\n            var promise = this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText', 'PdfViewer_Findindocument');\n            promise.then(function (value) {\n                _this.searchInput.placeholder = value;\n            });\n        }\n        else {\n            this.searchInput.placeholder = this.pdfViewer.localeObj.getConstant('Find in document');\n        }\n        // eslint-disable-next-line max-len\n        this.searchBtn = createElement('span', { id: this.pdfViewer.element.id + '_search_box-icon', className: 'e-input-group-icon e-input-search-group-icon e-pv-search-icon' });\n        this.searchBtn.setAttribute('tabindex', '0');\n        searchInputContainer.appendChild(this.searchInput);\n        searchInputContainer.appendChild(this.searchBtn);\n        searchElementsContainer.appendChild(searchInputContainer);\n        if (this.pdfViewer.enableRtl) {\n            this.prevSearchBtn = this.createSearchBoxButtons('prev_occurrence', 'e-pv-next-search');\n        }\n        else {\n            this.prevSearchBtn = this.createSearchBoxButtons('prev_occurrence', 'e-pv-prev-search');\n        }\n        this.prevSearchBtn.setAttribute('aria-label', 'Previous Search text');\n        searchElementsContainer.appendChild(this.prevSearchBtn);\n        if (this.pdfViewer.enableRtl) {\n            this.nextSearchBtn = this.createSearchBoxButtons('next_occurrence', 'e-pv-prev-search');\n        }\n        else {\n            this.nextSearchBtn = this.createSearchBoxButtons('next_occurrence', 'e-pv-next-search');\n        }\n        this.nextSearchBtn.setAttribute('aria-label', 'Next Search text');\n        searchElementsContainer.appendChild(this.nextSearchBtn);\n        // eslint-disable-next-line max-len\n        var matchCaseContainer = createElement('div', { id: this.pdfViewer.element.id + '_match_case_container', className: 'e-pv-match-case-container' });\n        var matchCaseInput = createElement('input', { id: this.pdfViewer.element.id + '_match_case' });\n        matchCaseInput.type = 'checkbox';\n        if (isBlazor()) {\n            matchCaseInput.style.height = '17px';\n            matchCaseInput.style.width = '17px';\n            matchCaseInput.addEventListener('change', this.checkBoxOnChange.bind(this));\n        }\n        matchCaseContainer.appendChild(matchCaseInput);\n        this.searchBox.appendChild(searchElementsContainer);\n        this.searchBox.appendChild(matchCaseContainer);\n        this.pdfViewerBase.mainContainer.appendChild(this.searchBox);\n        if (isBlazor()) {\n            // eslint-disable-next-line max-len\n            var matchCaseText_1 = createElement('span', { id: this.pdfViewer.element.id + '_search_box_text', styles: 'position: absolute; padding-top: 3px; padding-left: 8px; padding-right: 8px; font-size: 13px' });\n            var promise = this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText', 'PdfViewer_Matchcase');\n            promise.then(function (value) {\n                matchCaseText_1.textContent = value;\n            });\n            matchCaseContainer.appendChild(matchCaseText_1);\n        }\n        else {\n            // eslint-disable-next-line max-len\n            var checkBox = new CheckBox({ cssClass: 'e-pv-match-case', label: this.pdfViewer.localeObj.getConstant('Match case'), htmlAttributes: { 'tabindex': '0' }, change: this.checkBoxOnChange.bind(this) });\n            checkBox.appendTo(matchCaseInput);\n        }\n        matchCaseContainer.firstElementChild.addEventListener('keydown', function (event) {\n            if (event.key === \"Enter\" || event.key === \" \") {\n                event.target.click();\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        });\n        var waitingPopup = createElement('div', { id: this.pdfViewer.element.id + '_textSearchLoadingIndicator' });\n        searchInputContainer.appendChild(waitingPopup);\n        waitingPopup.style.position = 'absolute';\n        waitingPopup.style.top = '15px';\n        waitingPopup.style.left = searchInputContainer.clientWidth - 46 + 'px';\n        createSpinner({ target: waitingPopup, cssClass: 'e-spin-center' });\n        this.setLoaderProperties(waitingPopup);\n        this.showSearchBox(false);\n        if (this.pdfViewer.enableRtl) {\n            this.searchBox.classList.add('e-rtl');\n            this.searchBox.style.left = '88.3px';\n        }\n        else {\n            this.searchBox.classList.remove('e-rtl');\n            this.searchBox.style.right = '88.3px';\n        }\n        this.searchInput.addEventListener('focus', function () {\n            _this.searchInput.parentElement.classList.add('e-input-focus');\n        });\n        this.searchInput.addEventListener('blur', function () {\n            _this.searchInput.parentElement.classList.remove('e-input-focus');\n        });\n        this.searchInput.addEventListener('keydown', this.searchKeypressHandler.bind(this));\n        this.searchBtn.addEventListener('click', this.searchClickHandler.bind(this));\n        this.searchBtn.addEventListener('keydown', function (event) {\n            if (event.key === \"Enter\" || event.key === \" \") {\n                _this.searchClickHandler(event);\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        });\n        this.nextSearchBtn.addEventListener('click', this.nextButtonOnClick.bind(this));\n        this.prevSearchBtn.addEventListener('click', this.prevButtonOnClick.bind(this));\n    };\n    TextSearch.prototype.setLoaderProperties = function (element) {\n        var spinnerElement = element.firstChild.firstChild.firstChild;\n        if (spinnerElement) {\n            spinnerElement.style.height = '18px';\n            spinnerElement.style.width = '18px';\n            spinnerElement.style.transformOrigin = '9px 9px 9px';\n        }\n    };\n    TextSearch.prototype.showLoadingIndicator = function (isShow) {\n        var waitingPopup = document.getElementById(this.pdfViewer.element.id + '_textSearchLoadingIndicator');\n        if (waitingPopup) {\n            if (isShow) {\n                showSpinner(waitingPopup);\n            }\n            else {\n                hideSpinner(waitingPopup);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.textSearchBoxOnResize = function () {\n        if (this.pdfViewer.toolbarModule && this.pdfViewer.enableToolbar) {\n            var secondaryToolbar = this.pdfViewerBase.getElement('_toolbarContainer_popup');\n            if (secondaryToolbar) {\n                if (secondaryToolbar.contains(this.pdfViewerBase.getElement('_search').parentElement)) {\n                    this.searchBox.style.right = '0px';\n                }\n            }\n        }\n        else {\n            // eslint-disable-next-line max-len\n            if (this.pdfViewerBase.viewerContainer.clientWidth + this.pdfViewerBase.viewerContainer.offsetLeft < this.searchBox.offsetLeft + this.searchBox.clientWidth) {\n                this.searchBox.style.right = '0px';\n                // eslint-disable-next-line\n                this.searchBox.style.width = parseInt(this.searchBox.style.width) - ((this.searchBox.offsetLeft + this.searchBox.clientWidth) - (this.pdfViewerBase.viewerContainer.clientWidth)) + 'px';\n                // eslint-disable-next-line\n                this.searchInput.style.width = parseInt(this.searchInput.style.width) - ((this.searchBox.offsetLeft + this.searchBox.clientWidth) - (this.pdfViewerBase.viewerContainer.clientWidth)) + 'px';\n            }\n            else {\n                this.searchBox.style.right = '88.3px';\n                this.searchBox.style.width = '';\n                this.searchInput.style.width = '';\n            }\n        }\n    };\n    /**\n     * @param isShow\n     * @private\n     */\n    TextSearch.prototype.showSearchBox = function (isShow) {\n        if (isShow) {\n            this.searchBox.style.display = 'block';\n        }\n        else {\n            this.searchBox.style.display = 'none';\n            this.searchInput.value = '';\n        }\n        this.onTextSearchClose();\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.searchAfterSelection = function () {\n        if (this.isTextSearch) {\n            this.initSearch(this.searchPageIndex, true);\n            this.highlightOthers();\n        }\n    };\n    TextSearch.prototype.initiateTextSearch = function (searchElement) {\n        var inputString = searchElement.value;\n        if (inputString && inputString.length > 0 && inputString[inputString.length - 1] === ' ') {\n            inputString = inputString.slice(0, inputString.length - 1);\n        }\n        this.initiateSearch(inputString);\n    };\n    /**\n     * @param inputString\n     * @private\n     */\n    TextSearch.prototype.initiateSearch = function (inputString) {\n        if (inputString !== this.searchString) {\n            this.isTextSearch = false;\n            this.searchPageIndex = this.pdfViewerBase.currentPageNumber - 1;\n        }\n        this.clearAllOccurrences();\n        if (inputString !== '') {\n            // eslint-disable-next-line\n            if (this.searchMatches[this.searchPageIndex] && inputString === this.searchString) {\n                if (this.searchMatches[this.searchPageIndex].length === 0) {\n                    this.initSearch(this.searchPageIndex, false);\n                }\n                else {\n                    this.nextSearch();\n                }\n            }\n            else if (isNullOrUndefined(this.searchMatches[this.searchPageIndex]) && inputString === this.searchString) {\n                this.initSearch(this.searchPageIndex, false);\n            }\n            else {\n                this.resetVariables();\n                this.searchIndex = 0;\n                this.textSearch(inputString);\n            }\n        }\n    };\n    TextSearch.prototype.textSearch = function (inputString) {\n        if (inputString !== '' || inputString) {\n            this.searchString = inputString;\n            this.isTextSearch = true;\n            this.isSearchText = true;\n            this.searchPageIndex = this.pdfViewerBase.currentPageNumber - 1;\n            this.searchCount = 0;\n            this.isTextSearchEventTriggered = false;\n            this.showLoadingIndicator(true);\n            this.pdfViewer.fireTextSearchStart(inputString, this.isMatchCase);\n            if (this.pdfViewer.isExtractText) {\n                if (this.isTextRetrieved) {\n                    for (var i = 0; i < this.pdfViewerBase.pageCount; i++) {\n                        this.initSearch(i, false, true);\n                    }\n                }\n                else {\n                    this.isTextSearched = true;\n                    for (var i = 0; i < this.documentTextCollection.length; i++) {\n                        this.initSearch(i, false, true);\n                    }\n                }\n            }\n            this.initSearch(this.searchPageIndex, false);\n            this.highlightOthers();\n        }\n    };\n    TextSearch.prototype.nextSearch = function () {\n        this.isPrevSearch = false;\n        this.isTextSearch = true;\n        this.isSearchText = false;\n        if (this.searchString) {\n            this.clearAllOccurrences();\n            this.searchIndex = this.searchIndex + 1;\n            if (this.searchMatches[this.searchPageIndex]) {\n                if (this.searchIndex >= this.searchMatches[this.searchPageIndex].length) {\n                    this.searchIndex = 0;\n                    this.searchPageIndex = ((this.searchPageIndex + 1) < this.pdfViewerBase.pageCount) ? (this.searchPageIndex + 1) : 0;\n                    if (this.pdfViewerBase.pageCount > 1) {\n                        this.initSearch(this.searchPageIndex, false);\n                    }\n                    else {\n                        this.initSearch(this.searchPageIndex, true);\n                        if (!this.isMessagePopupOpened) {\n                            this.onMessageBoxOpen();\n                        }\n                        this.pdfViewerBase.updateScrollTop(this.searchPageIndex);\n                    }\n                    this.showLoadingIndicator(true);\n                }\n                else {\n                    this.highlightSearchedTexts(this.searchPageIndex, false, undefined);\n                    this.showLoadingIndicator(false);\n                }\n                this.highlightOthers(true);\n            }\n            else if (!this.searchMatches[this.searchPageIndex]) {\n                if (this.pdfViewerBase.pageCount > 1) {\n                    this.initSearch(this.searchPageIndex, false);\n                }\n            }\n            else {\n                this.initiateTextSearch(this.searchInput);\n            }\n        }\n        else {\n            this.initiateTextSearch(this.searchInput);\n        }\n    };\n    TextSearch.prototype.prevSearch = function () {\n        searchTextCollection.push(this.searchPageIndex);\n        this.isPrevSearch = true;\n        this.isTextSearch = true;\n        this.isSearchText = false;\n        if (this.searchString) {\n            this.clearAllOccurrences();\n            this.searchIndex = this.searchIndex - 1;\n            if (this.searchIndex < 0) {\n                this.searchPageIndex = this.findPreviousPageWithText();\n                this.initSearch(this.searchPageIndex, false);\n                this.showLoadingIndicator(true);\n            }\n            else {\n                this.highlightSearchedTexts(this.searchPageIndex, false, undefined);\n                this.showLoadingIndicator(false);\n            }\n            this.highlightOthers(true);\n        }\n        else {\n            this.searchIndex = this.searchIndex - 1;\n            this.searchPageIndex = ((this.searchPageIndex - 1) < 0) ? (this.pdfViewerBase.pageCount - 1) : this.searchPageIndex - 1;\n            var inputString = this.searchInput.value;\n            this.textSearch(inputString);\n        }\n    };\n    TextSearch.prototype.findPreviousPageWithText = function () {\n        var currentPageIndex = this.searchPageIndex;\n        for (var i = 1; i < this.pdfViewerBase.pageCount; i++) {\n            var prevPageIndex = (currentPageIndex - i + this.pdfViewerBase.pageCount) % this.pdfViewerBase.pageCount;\n            if (this.searchMatches[prevPageIndex] && this.searchMatches[prevPageIndex].length > 0) {\n                return prevPageIndex;\n            }\n        }\n        return currentPageIndex;\n    };\n    ;\n    TextSearch.prototype.initSearch = function (pageIndex, isSinglePageSearch, isCount) {\n        // eslint-disable-next-line\n        var storedData = this.pdfViewerBase.getStoredData(pageIndex, true);\n        var pageText = null;\n        var textContents = null;\n        // eslint-disable-next-line\n        var characterBounds = null;\n        if (isCount) {\n            if (this.documentTextCollection.length !== 0) {\n                // eslint-disable-next-line\n                var documentIndex = this.documentTextCollection[pageIndex][pageIndex];\n                var pageTextData = documentIndex.pageText ? documentIndex.pageText : documentIndex.PageText;\n                if (this.documentTextCollection[pageIndex] && documentIndex) {\n                    // eslint-disable-next-line max-len\n                    this.getSearchTextContent(pageIndex, this.searchString, pageTextData, textContents, isSinglePageSearch, this.documentTextCollection[pageIndex]);\n                }\n            }\n        }\n        else {\n            if (storedData) {\n                // eslint-disable-next-line\n                pageText = storedData['pageText'];\n                // eslint-disable-next-line\n                textContents = storedData['textContent'];\n                characterBounds = this.pdfViewerBase.textLayer.characterBound[pageIndex];\n                this.textContents[pageIndex] = textContents;\n                this.getPossibleMatches(pageIndex, this.searchString, pageText, textContents, isSinglePageSearch, characterBounds);\n            }\n            else {\n                if (!isSinglePageSearch) {\n                    this.createRequestForSearch(pageIndex);\n                }\n            }\n        }\n        if (this.pdfViewerBase.pageCount === (this.searchedPages && this.searchedPages.length)) {\n            if (!this.isTextSearchEventTriggered) {\n                this.isTextSearchEventTriggered = true;\n                this.pdfViewer.fireTextSearchComplete(this.searchString, this.isMatchCase);\n            }\n        }\n    };\n    // eslint-disable-next-line\n    TextSearch.prototype.getPossibleMatches = function (pageIndex, searchString, pageString, textContents, isSinglePageSearch, characterBounds) {\n        var arrayReturns;\n        if (this.searchMatches && !this.searchMatches[pageIndex]) {\n            var pageText = pageString;\n            var searchText = searchString;\n            var multiSearch = (pageText.replace((/(\\s\\r\\n)/gm), ' ')).replace((/(\\r\\n)/gm), \" \");\n            var Multiline = (pageString.replace((/(\\s\\r\\n)/gm), '  ')).replace((/(\\r\\n)/gm), \" \");\n            var specialCharcterSearch = multiSearch.replace(/[^a-zA-z0-9\" \"]/g, \"\");\n            var queryLength = searchString.length;\n            if (!this.isMatchCase) {\n                searchText = searchString.toLowerCase();\n                pageText = pageString.toLowerCase();\n                multiSearch = multiSearch.toLowerCase();\n                Multiline = Multiline.toLowerCase();\n                specialCharcterSearch = specialCharcterSearch.toLowerCase();\n            }\n            var matches = [];\n            var matchedArray = [];\n            var matchIndex = -queryLength;\n            var newIndex = -queryLength;\n            var multiSearchIndex = -queryLength;\n            var MultilineIndex = -queryLength;\n            var specialcharcterIndex = -queryLength;\n            while (matchIndex !== 0 || matchIndex === 0) {\n                if (searchText === '' || searchText === ' ' || !searchText) {\n                    break;\n                }\n                matchIndex = pageText.indexOf(searchText, matchIndex + queryLength);\n                if (searchText.indexOf(' ') !== -1) {\n                    var newString = searchString.replace(' ', '\\r\\n');\n                    newIndex = pageText.indexOf(newString, newIndex + queryLength);\n                    newIndex = -1;\n                    if (!(newIndex <= -1)) {\n                        if (newIndex < matchIndex) {\n                            matches.push(newIndex);\n                        }\n                    }\n                }\n                if (matchIndex <= -1 && newIndex <= -1) {\n                    break;\n                }\n                if (!(matchIndex <= -1)) {\n                    matches.push(matchIndex);\n                }\n                if (newIndex > matchIndex && !(newIndex <= -1)) {\n                    matches.push(newIndex);\n                }\n            }\n            if (matches.length == 0) {\n                multiSearchIndex = multiSearch.indexOf(searchText, multiSearchIndex + queryLength);\n                MultilineIndex = Multiline.indexOf(searchText, MultilineIndex + queryLength);\n                specialcharcterIndex = specialCharcterSearch.indexOf(searchText, specialcharcterIndex + queryLength);\n                if (multiSearchIndex !== -1) {\n                    arrayReturns = this.correctLinetext(searchString, matchIndex, pageText);\n                    matchIndex = -arrayReturns[0].length;\n                    for (var i = 0; i < arrayReturns.length; i++) {\n                        matchIndex = pageText.indexOf(arrayReturns[i].trim(), matchIndex + (arrayReturns[i - 1] === undefined || null ? arrayReturns[0].length : arrayReturns[i - 1].length));\n                        matchedArray.push(matchIndex);\n                        if (matchedArray.length > 1) {\n                            if ((matchedArray[1] - (matchedArray[0] + arrayReturns[0].length)) <= 3) {\n                                matches.push(matchedArray);\n                                this.searchMatches[pageIndex] = matches;\n                            }\n                            else {\n                                i = -1;\n                                matchIndex = matchedArray[0] + arrayReturns[0].length;\n                                matchedArray.splice(0, matchedArray.length);\n                            }\n                        }\n                    }\n                }\n                else if (specialcharcterIndex !== -1) {\n                    arrayReturns = this.correctLinetext(searchString, matchIndex, pageText);\n                    matchIndex = -arrayReturns[0].length;\n                    for (var i = 0; i < arrayReturns.length; i++) {\n                        matchIndex = pageText.indexOf(arrayReturns[i].trim(), matchIndex + (arrayReturns[i - 1] === undefined || null ? arrayReturns[0].length : arrayReturns[i - 1].length));\n                        matchedArray.push(matchIndex);\n                        if (matchedArray.length > 1) {\n                            if ((matchedArray[1] - (matchedArray[0] + arrayReturns[0].length)) <= 3) {\n                                matches.push(matchedArray);\n                                this.searchMatches[pageIndex] = matches;\n                            }\n                            else {\n                                i = -1;\n                                matchIndex = matchedArray[0] + arrayReturns[0].length;\n                                matchedArray.splice(0, matchedArray.length);\n                            }\n                        }\n                    }\n                }\n                else if (MultilineIndex !== -1) {\n                    arrayReturns = this.correctLinetext(searchString, matchIndex, pageText);\n                    matchIndex = -arrayReturns[0].length;\n                    for (var i = 0; i < arrayReturns.length; i++) {\n                        matchIndex = pageText.indexOf(arrayReturns[i].trim(), matchIndex + (arrayReturns[i - 1] === undefined || null ? arrayReturns[0].length : arrayReturns[i - 1].length));\n                        matchedArray.push(matchIndex);\n                        if (matchedArray.length > 1) {\n                            if ((matchedArray[1] - (matchedArray[0] + arrayReturns[0].length)) <= 3) {\n                                matches.push(matchedArray);\n                                this.searchMatches[pageIndex] = matches;\n                            }\n                            else {\n                                i = -1;\n                                matchIndex = matchedArray[0] + arrayReturns[0].length;\n                                matchedArray.splice(0, matchedArray.length);\n                            }\n                        }\n                    }\n                }\n                if (matches.length > 1) {\n                    matches.splice(1, matches.length);\n                }\n            }\n            if (this.searchMatches && matches.length > 0) {\n                this.searchMatches[pageIndex] = matches;\n            }\n        }\n        if (!isSinglePageSearch) {\n            if (this.searchedPages.indexOf(pageIndex) === -1) {\n                this.searchedPages.push(pageIndex);\n                this.startIndex = this.searchedPages[0];\n            }\n            this.updateSearchInputIcon(false);\n        }\n        if (this.searchMatches && this.searchMatches[pageIndex] && this.searchMatches[pageIndex].length !== 0) {\n            if (!isSinglePageSearch) {\n                if (this.isPrevSearch) {\n                    this.searchIndex = this.searchMatches[pageIndex].length - 1;\n                }\n                if ((this.pdfViewerBase.currentPageNumber - 1) !== this.searchPageIndex) {\n                    // eslint-disable-next-line max-len\n                    if (this.searchMatches.length > 0 && (this.searchIndex === 0 || this.searchIndex === -1) && (this.searchPageIndex) === this.currentSearchIndex) {\n                        if (!this.isMessagePopupOpened && !this.isSearchText) {\n                            this.onMessageBoxOpen();\n                        }\n                        this.searchPageIndex = this.getSearchPage(this.pdfViewerBase.currentPageNumber - 1);\n                        this.searchedPages = [this.searchPageIndex];\n                    }\n                    // eslint-disable-next-line max-len\n                    else if (this.isPrevSearch && this.searchMatches && this.searchMatches.length > 0 && (this.searchMatches[this.searchPageIndex] && this.searchMatches[this.searchPageIndex].length > 0) && this.searchedPages.length === this.pdfViewerBase.pageCount && this.startIndex - 1 === this.searchPageIndex) {\n                        if (!this.isMessagePopupOpened) {\n                            this.onMessageBoxOpen();\n                        }\n                        this.searchedPages = [this.startIndex];\n                    }\n                    else if (searchTextCollection[0] == this.searchPageIndex) {\n                        if (!this.isMessagePopupOpened) {\n                            this.onMessageBoxOpen();\n                        }\n                    }\n                    this.pdfViewerBase.updateScrollTop(this.searchPageIndex);\n                }\n                else if (this.searchMatches && (this.searchMatches[this.searchPageIndex] && this.searchMatches[this.searchPageIndex].length > 0) && this.searchedPages.length === this.pdfViewerBase.pageCount && this.startIndex === this.searchPageIndex && this.pdfViewerBase.pageCount > 1) {\n                    if (!this.isMessagePopupOpened) {\n                        this.onMessageBoxOpen();\n                    }\n                    this.searchedPages = [this.startIndex];\n                }\n            }\n            this.highlightSearchedTexts(pageIndex, isSinglePageSearch, arrayReturns);\n        }\n        else {\n            if (!isSinglePageSearch) {\n                if (this.isPrevSearch) {\n                    this.searchPageIndex = ((this.searchPageIndex - 1) < 0) ? (this.pdfViewerBase.pageCount - 1) : this.searchPageIndex - 1;\n                }\n                else {\n                    this.searchPageIndex = ((this.searchPageIndex + 1) < this.pdfViewerBase.pageCount) ? (this.searchPageIndex + 1) : 0;\n                }\n                if (this.searchedPages.indexOf(this.searchPageIndex) === -1 && this.searchedPages.length !== this.pdfViewerBase.pageCount) {\n                    this.showLoadingIndicator(true);\n                    this.initSearch(this.searchPageIndex, false);\n                }\n                else {\n                    var searchPageIndex = this.getSearchPage(pageIndex);\n                    // eslint-disable-next-line max-len\n                    if (this.searchMatches && isNullOrUndefined(this.searchMatches[this.searchPageIndex]) && this.searchedPages.length === this.pdfViewerBase.pageCount) {\n                        // eslint-disable-next-line max-len\n                        if (!this.isMessagePopupOpened) {\n                            this.onMessageBoxOpen();\n                        }\n                        this.pdfViewerBase.updateScrollTop(this.startIndex);\n                        // eslint-disable-next-line max-len\n                    }\n                    else if (this.searchMatches && this.searchMatches.length > 0 && (this.searchIndex === 0 || this.searchIndex === -1) && (searchPageIndex) === this.currentSearchIndex) {\n                        if (this.isPrevSearch) {\n                            // eslint-disable-next-line max-len\n                            if (!this.isMessagePopupOpened) {\n                                this.onMessageBoxOpen();\n                            }\n                            this.searchPageIndex = searchPageIndex;\n                            this.searchedPages = [searchPageIndex];\n                            this.searchIndex = -1;\n                        }\n                        else {\n                            if (!this.isMessagePopupOpened && this.pdfViewerBase.currentPageNumber !== 1 && !this.isSearchText) {\n                                this.onMessageBoxOpen();\n                            }\n                            this.searchPageIndex = searchPageIndex;\n                            this.searchedPages = [searchPageIndex];\n                            this.searchIndex = 0;\n                        }\n                        this.highlightSearchedTexts(this.searchPageIndex, isSinglePageSearch, undefined);\n                    }\n                    else if (this.searchMatches && (this.searchMatches[this.searchPageIndex] && this.searchMatches[this.searchPageIndex].length > 0) && this.searchedPages.length === this.pdfViewerBase.pageCount) {\n                        if (!this.isMessagePopupOpened) {\n                            this.onMessageBoxOpen();\n                        }\n                        this.searchPageIndex = this.startIndex;\n                        this.searchedPages = [this.searchPageIndex];\n                        this.searchIndex = 0;\n                        this.pdfViewerBase.updateScrollTop(this.startIndex);\n                        this.highlightSearchedTexts(this.searchPageIndex, isSinglePageSearch, undefined);\n                    }\n                }\n            }\n        }\n    };\n    TextSearch.prototype.correctLinetext = function (searchString, matchIndex, pageText) {\n        var indiuvalLineArray = [];\n        var searchArray = searchString.split(/[\" \"]+/);\n        if (!this.isMatchCase) {\n            searchArray = searchString.toLowerCase().split(/[\" \"]+/);\n        }\n        matchIndex = 0;\n        var linestring = \"\";\n        var mergedText = pageText.replace(/ \\r\\n/g, \" \");\n        mergedText = mergedText.replace(/\\r\\n/g, \" \");\n        mergedText = mergedText.replace(/[^a-zA-Z0-9 ]/g, '');\n        searchString = searchString.replace(/[^a-zA-Z0-9 ]/g, '');\n        var result = mergedText.match(searchString);\n        if (!this.isMatchCase) {\n            result = mergedText.match(searchString.toLowerCase());\n        }\n        if (isNullOrUndefined(result)) {\n            return indiuvalLineArray;\n        }\n        else {\n            result = pageText.slice(result.index, pageText.length);\n        }\n        var pageCheck = result;\n        for (var i = 0; i < searchArray.length; i++) {\n            var searchArrayText = linestring + searchArray[i];\n            matchIndex = pageText.indexOf(searchArrayText, matchIndex);\n            pageCheck = pageCheck ? pageCheck.replace(searchArray[i - 1], \"\") : pageText.replace(searchArray[i - 1], \"\");\n            if ((pageCheck[pageCheck.indexOf(searchArray[i]) - 1] === \"\\n\" && (pageCheck[pageCheck.indexOf(searchArray[i + 1]) - 1]) === \"\\n\") || (pageCheck[pageCheck.indexOf(searchArray[i]) - 1] === \"\\n\" && isNullOrUndefined((pageCheck[pageCheck.indexOf(searchArray[i + 1]) - 1])))) {\n                matchIndex = -1;\n                if (linestring === \"\") {\n                    linestring = searchArray[i];\n                    i = i + 1;\n                }\n            }\n            if (matchIndex !== -1) {\n                linestring += searchArray[i] + \" \";\n                if (i == (searchArray.length - 1)) {\n                    indiuvalLineArray.push(linestring);\n                }\n            }\n            else {\n                indiuvalLineArray.push(linestring);\n                linestring = searchArray[i] + \" \";\n                if (pageCheck[pageCheck.indexOf(searchArray[i]) - 1] == \"\\n\" && pageCheck[pageCheck.indexOf(searchArray[i + 1]) - 1] == \"\\n\") {\n                    indiuvalLineArray.push(linestring);\n                    linestring = searchArray[i + 1] + \" \";\n                    pageCheck = pageCheck ? pageCheck.replace(searchArray[i - 1], \"\") : pageText.replace(searchArray[i - 1], \"\");\n                    i = i + 1;\n                }\n                if (i == (searchArray.length - 1)) {\n                    indiuvalLineArray.push(linestring);\n                }\n            }\n        }\n        return indiuvalLineArray;\n    };\n    // eslint-disable-next-line\n    TextSearch.prototype.getSearchTextContent = function (pageIndex, searchString, pageString, textContents, isSinglePageSearch, characterBounds) {\n        var pageText = pageString;\n        var searchText = searchString;\n        var queryLength = searchString.length;\n        if (!this.isMatchCase) {\n            searchText = searchString.toLowerCase();\n            pageText = pageString.toLowerCase();\n        }\n        var matches = [];\n        var matchIndex = -queryLength;\n        var newIndex = -queryLength;\n        while (matchIndex !== 0) {\n            if (searchText === '' || searchText === ' ' || !searchText) {\n                break;\n            }\n            matchIndex = pageText.indexOf(searchText, matchIndex + queryLength);\n            if (searchText.indexOf(' ') !== -1) {\n                var newString = searchString.replace(' ', '\\r\\n');\n                newIndex = pageText.indexOf(newString, newIndex + queryLength);\n                if (!(newIndex <= -1)) {\n                    if (newIndex < matchIndex) {\n                        matches.push(newIndex);\n                    }\n                }\n            }\n            if (matchIndex <= -1 && newIndex <= -1) {\n                break;\n            }\n            if (!(matchIndex <= -1)) {\n                matches.push(matchIndex);\n            }\n            if (newIndex > matchIndex && !(newIndex <= -1)) {\n                matches.push(newIndex);\n            }\n        }\n        if (matches.length !== 0) {\n            this.searchCount = this.searchCount + matches.length;\n        }\n        this.searchMatches[pageIndex] = matches;\n    };\n    TextSearch.prototype.getSearchPage = function (pageIndex) {\n        var pageNumber = null;\n        if (this.isPrevSearch) {\n            for (var i = pageIndex; i >= 0; i--) {\n                if (i !== pageIndex && this.searchMatches[i]) {\n                    pageNumber = i;\n                    break;\n                }\n            }\n            if (!pageNumber) {\n                for (var j = this.pdfViewerBase.pageCount - 1; j > pageIndex; j--) {\n                    if (this.searchMatches[j]) {\n                        pageNumber = j;\n                        break;\n                    }\n                }\n            }\n        }\n        else {\n            for (var i = pageIndex; i < this.pdfViewerBase.pageCount; i++) {\n                if (i !== pageIndex && this.searchMatches[i]) {\n                    pageNumber = i;\n                    break;\n                }\n            }\n            if (!pageNumber) {\n                if (pageIndex === 0) {\n                    pageNumber = pageIndex;\n                }\n                else {\n                    for (var j = 0; j < pageIndex; j++) {\n                        if (this.searchMatches[j]) {\n                            pageNumber = j;\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n        return pageNumber;\n    };\n    TextSearch.prototype.highlightSearchedTexts = function (pageIndex, isSinglePageSearch, ArrayReturns) {\n        // eslint-disable-next-line\n        var matches = this.searchMatches[pageIndex];\n        var prevEnd = null;\n        // eslint-disable-next-line\n        var scrollPoint = { y: -100, x: -100 };\n        var startId;\n        var className;\n        var searchingText = this.searchString;\n        // eslint-disable-next-line\n        var characterBounds = this.pdfViewerBase.textLayer.characterBound[pageIndex];\n        var isHighlight = false;\n        if (isSinglePageSearch && (this.pdfViewerBase.currentPageNumber - 1) !== this.searchPageIndex) {\n            if (this.searchMatches.length > 0) {\n                if (pageIndex === this.getSearchPage(this.pdfViewerBase.currentPageNumber - 1)) {\n                    isHighlight = true;\n                }\n            }\n        }\n        if (characterBounds && matches !== undefined) {\n            for (var i = 0; i < matches.length; i++) {\n                if (matches[i].length !== undefined && ArrayReturns !== undefined) {\n                    if (i === this.searchIndex && pageIndex === this.searchPageIndex) {\n                        for (var j = 0; j < ArrayReturns.length; j++) {\n                            className = 'e-pv-search-text-highlight';\n                            this.searchString = ArrayReturns[j].trim();\n                            this.addDivForSearch(i, pageIndex, characterBounds, this.searchString.length, className, j);\n                        }\n                    }\n                    else {\n                        for (var j = 0; j < ArrayReturns.length; j++) {\n                            className = 'e-pv-search-text-highlightother';\n                            this.searchString = ArrayReturns[j].trim();\n                            this.addDivForSearch(i, pageIndex, characterBounds, this.searchString.length, className, j);\n                        }\n                    }\n                }\n                else if (i === this.searchIndex && pageIndex === this.searchPageIndex) {\n                    className = 'e-pv-search-text-highlight';\n                }\n                else {\n                    className = 'e-pv-search-text-highlightother';\n                }\n                if (matches[i].length == undefined) {\n                    this.addDivForSearch(i, pageIndex, characterBounds, this.searchString.length, className, undefined);\n                }\n            }\n            this.searchString = searchingText;\n            if (pageIndex === this.searchPageIndex && !isSinglePageSearch) {\n                var element = this.pdfViewerBase.getElement('_searchtext_' + pageIndex + '_' + this.searchIndex);\n                if (element) {\n                    var targetScrollElement = this.getScrollElement(element);\n                    this.scrollToSearchStr(targetScrollElement, scrollPoint);\n                }\n                else {\n                    this.pdfViewerBase.updateScrollTop(pageIndex);\n                    var element_1 = this.pdfViewerBase.getElement('_searchtext_' + pageIndex + '_' + this.searchIndex);\n                    if (element_1) {\n                        var targetScrollElement = this.getScrollElement(element_1);\n                        this.scrollToSearchStr(targetScrollElement, scrollPoint);\n                    }\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line\n    TextSearch.prototype.addDivForSearch = function (index, pageIndex, characterBounds, queryLength, className, nestedIndex) {\n        var textLayer = this.pdfViewerBase.getElement('_textLayer_' + pageIndex);\n        if (isNullOrUndefined(textLayer) && className === 'e-pv-search-text-highlight') {\n            if (this.pdfViewer.navigation) {\n                this.pdfViewer.navigation.goToPage(pageIndex + 1);\n            }\n        }\n        var count;\n        if (this.searchMatches[pageIndex][index].length !== undefined) {\n            count = this.searchMatches[pageIndex][index][nestedIndex];\n        }\n        else {\n            count = this.searchMatches[pageIndex][index];\n        }\n        var initial = count;\n        var divCount = 0;\n        while (count < initial + queryLength) {\n            count = this.addDivElement(count, characterBounds, queryLength, className, index, pageIndex, initial, divCount, nestedIndex);\n            divCount++;\n        }\n        if (className === 'e-pv-search-text-highlight') {\n            this.showLoadingIndicator(false);\n        }\n    };\n    // eslint-disable-next-line\n    TextSearch.prototype.addDivElement = function (count, characterBounds, queryLength, className, index, pageIndex, initial, divCount, nestedIndex) {\n        var height = 0;\n        var width = 0;\n        var top = 0;\n        var left = 0;\n        var isRTL = false;\n        if (characterBounds[count]) {\n            left = characterBounds[count].X;\n            top = characterBounds[count].Y;\n        }\n        var v = 0;\n        if ((count - initial) !== 0) {\n            v = count - initial;\n            queryLength += 1;\n        }\n        for (v = v; v < queryLength; v++) {\n            if (characterBounds[count]) {\n                // eslint-disable-next-line\n                var charBound = characterBounds[count];\n                if (left > charBound.X + charBound.Width) {\n                    isRTL = true;\n                }\n                top = (top < charBound.Y) ? top : charBound.Y;\n                var topDifference = (top < charBound.Y) ? (charBound.Y - top) : (top - charBound.Y);\n                height = (height > (topDifference + charBound.Height)) ? height : (topDifference + charBound.Height);\n                count++;\n            }\n        }\n        var isContinuation = false;\n        if (!isRTL) {\n            if (initial + queryLength !== count) {\n                isContinuation = true;\n                if (characterBounds[count - 1]) {\n                    width = (characterBounds[count - 1].X - left);\n                }\n            }\n            else {\n                isContinuation = false;\n                // eslint-disable-next-line\n                var storedData = this.pdfViewerBase.clientSideRendering ? this.pdfViewerBase.getLinkInformation(pageIndex, true) : this.pdfViewerBase.getStoredData(pageIndex, true);\n                var pageText = null;\n                if (storedData) {\n                    pageText = storedData['pageText'];\n                }\n                else if (this.pdfViewer.isExtractText && this.documentTextCollection.length !== 0) {\n                    // eslint-disable-next-line\n                    var documentIndex = this.documentTextCollection[pageIndex][pageIndex];\n                    pageText = documentIndex.pageText ? documentIndex.pageText : documentIndex.PageText;\n                }\n                if (characterBounds[count]) {\n                    if (pageText && (pageText[count] === '' || pageText[count] === ' ' || pageText[count] === '\\r' || pageText[count] === '\\n') && (characterBounds[count].Width) === 0) {\n                        width = (characterBounds[count - 1].X - left) + characterBounds[count - 1].Width;\n                    }\n                    else {\n                        width = (characterBounds[count].X - left);\n                    }\n                }\n                else {\n                    if (characterBounds[count - 1]) {\n                        width = (characterBounds[count - 1].X - left);\n                    }\n                }\n            }\n        }\n        else {\n            var charBound = characterBounds[(initial + queryLength) - 1];\n            left = charBound.X;\n            width = characterBounds[initial].X - characterBounds[(initial + queryLength) - 1].X;\n            top = (top < charBound.Y) ? top : charBound.Y;\n            var topDifference = (top < charBound.Y) ? (charBound.Y - top) : (top - charBound.Y);\n            height = (height > (topDifference + charBound.Height)) ? height : (topDifference + charBound.Height);\n            //some RTL character calculated width is zero and width difference value calculated from Y possition difference in the same line.\n            var widthDifference = characterBounds[initial - 1].Y - characterBounds[initial].Y;\n            for (var j = (initial + queryLength) - 1; j >= initial; j--) {\n                charBound = characterBounds[j];\n                if (charBound.Width === 0) {\n                    widthDifference = charBound.Y - characterBounds[j - 1].Y;\n                }\n            }\n            width = width + widthDifference;\n        }\n        this.createSearchTextDiv(index, pageIndex, height, width, top, left, className, isContinuation, divCount, nestedIndex);\n        return count;\n    };\n    // eslint-disable-next-line\n    TextSearch.prototype.createSearchTextDiv = function (index, pageIndex, height, width, top, left, className, isContinuation, divCount, nestedIndex) {\n        var idString = '_searchtext_' + pageIndex + '_' + index;\n        if (isContinuation) {\n            idString += '_' + divCount;\n        }\n        if (nestedIndex !== undefined && this.pdfViewerBase.getElement(idString)) {\n            var textDiv = createElement('div', { id: this.pdfViewer.element.id + idString + \"_\" + nestedIndex });\n            // eslint-disable-next-line\n            var pageDetails = this.pdfViewerBase.pageSize[pageIndex];\n            this.calculateBounds(textDiv, height, width, top, left, pageDetails);\n            textDiv.classList.add(className);\n            if (className === 'e-pv-search-text-highlight') {\n                // eslint-disable-next-line max-len\n                textDiv.style.backgroundColor = (this.pdfViewer.textSearchColorSettings.searchHighlightColor === '') ? '#fdd835' : this.pdfViewer.textSearchColorSettings.searchHighlightColor;\n                var bounds = { left: left, top: top, width: width, height: height };\n                this.pdfViewer.fireTextSearchHighlight(this.searchString, this.isMatchCase, bounds, (pageIndex + 1));\n            }\n            else if (className === 'e-pv-search-text-highlightother') {\n                // eslint-disable-next-line max-len\n                textDiv.style.backgroundColor = (this.pdfViewer.textSearchColorSettings.searchColor === '') ? '#8b4c12' : this.pdfViewer.textSearchColorSettings.searchColor;\n            }\n            var textLayer = this.pdfViewerBase.getElement('_textLayer_' + pageIndex);\n            textDiv.style.zIndex = this.searchTextDivzIndex;\n            if (textLayer) {\n                textLayer.appendChild(textDiv);\n            }\n        }\n        if (!this.pdfViewerBase.getElement(idString)) {\n            var textDiv = createElement('div', { id: this.pdfViewer.element.id + idString });\n            // eslint-disable-next-line\n            var pageDetails = this.pdfViewerBase.pageSize[pageIndex];\n            this.calculateBounds(textDiv, height, width, top, left, pageDetails);\n            textDiv.classList.add(className);\n            if (className === 'e-pv-search-text-highlight') {\n                // eslint-disable-next-line max-len\n                textDiv.style.backgroundColor = (this.pdfViewer.textSearchColorSettings.searchHighlightColor === '') ? '#fdd835' : this.pdfViewer.textSearchColorSettings.searchHighlightColor;\n                var bounds = { left: left, top: top, width: width, height: height };\n                this.pdfViewer.fireTextSearchHighlight(this.searchString, this.isMatchCase, bounds, (pageIndex + 1));\n            }\n            else if (className === 'e-pv-search-text-highlightother') {\n                // eslint-disable-next-line max-len\n                textDiv.style.backgroundColor = (this.pdfViewer.textSearchColorSettings.searchColor === '') ? '#8b4c12' : this.pdfViewer.textSearchColorSettings.searchColor;\n            }\n            var textLayer = this.pdfViewerBase.getElement('_textLayer_' + pageIndex);\n            textDiv.style.zIndex = this.searchTextDivzIndex;\n            if (textLayer) {\n                textLayer.appendChild(textDiv);\n            }\n        }\n    };\n    // eslint-disable-next-line\n    TextSearch.prototype.calculateBounds = function (textDiv, height, width, top, left, pageDetails) {\n        if (pageDetails.rotation === 0 || pageDetails.rotation === 2) {\n            textDiv.style.height = Math.ceil(height) * this.pdfViewerBase.getZoomFactor() + 'px';\n            textDiv.style.width = width * this.pdfViewerBase.getZoomFactor() + 'px';\n            if (pageDetails.rotation === 2) {\n                textDiv.style.top = (pageDetails.height - top - height) * this.pdfViewerBase.getZoomFactor() + 'px';\n                textDiv.style.left = Math.ceil(pageDetails.width - left - width) * this.pdfViewerBase.getZoomFactor() + 'px';\n            }\n            else {\n                textDiv.style.top = top * this.pdfViewerBase.getZoomFactor() + 'px';\n                textDiv.style.left = left * this.pdfViewerBase.getZoomFactor() + 'px';\n            }\n        }\n        else if (pageDetails.rotation === 1) {\n            textDiv.style.height = width * this.pdfViewerBase.getZoomFactor() + 'px';\n            textDiv.style.width = height * this.pdfViewerBase.getZoomFactor() + 'px';\n            textDiv.style.top = left * this.pdfViewerBase.getZoomFactor() + 'px';\n            textDiv.style.left = (pageDetails.height - top - height) * this.pdfViewerBase.getZoomFactor() + 'px';\n        }\n        else if (pageDetails.rotation === 3) {\n            textDiv.style.height = width * this.pdfViewerBase.getZoomFactor() + 'px';\n            textDiv.style.width = height * this.pdfViewerBase.getZoomFactor() + 'px';\n            textDiv.style.left = ((pageDetails.width - pageDetails.height) + top) * this.pdfViewerBase.getZoomFactor() + 'px';\n            textDiv.style.top = (pageDetails.height - left - width) * this.pdfViewerBase.getZoomFactor() + 'px';\n        }\n    };\n    TextSearch.prototype.isClassAvailable = function () {\n        var isClass = false;\n        for (var j = 0; j < this.tempElementStorage.length; j++) {\n            if (this.tempElementStorage[j].classString) {\n                // eslint-disable-next-line max-len\n                if (this.tempElementStorage[j].classString === 'e-pv-search-text-highlight' || this.tempElementStorage[j].classString === 'e-pv-search-text-highlightother') {\n                    isClass = true;\n                    break;\n                }\n            }\n        }\n        return isClass;\n    };\n    TextSearch.prototype.getScrollElement = function (element) {\n        var targetElement = element;\n        if (element.childNodes.length > 0) {\n            for (var i = 0; i < element.childNodes.length; i++) {\n                if (element.childNodes[i].classList) {\n                    if (element.childNodes[i].classList.contains('e-pv-search-text-highlight')) {\n                        targetElement = element.childNodes[i];\n                    }\n                }\n            }\n        }\n        return targetElement;\n    };\n    // eslint-disable-next-line\n    TextSearch.prototype.scrollToSearchStr = function (element, scrollPoint) {\n        var parent = element.offsetParent;\n        var offsetY = element.offsetTop + element.clientTop;\n        var offsetX = element.offsetLeft + element.clientLeft;\n        while (parent.id !== this.pdfViewerBase.viewerContainer.id) {\n            offsetY += parent.offsetTop;\n            offsetX += parent.offsetLeft;\n            parent = parent.offsetParent;\n        }\n        if (scrollPoint) {\n            offsetY += scrollPoint.y;\n            offsetX += scrollPoint.x;\n            if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n                parent.scrollLeft = offsetX;\n            }\n            else {\n                if (this.pdfViewerBase.getZoomFactor() > 1.5) {\n                    parent.scrollLeft = offsetX;\n                }\n            }\n        }\n        parent.scrollTop = offsetY;\n        this.pdfViewerBase.updateMobileScrollerPosition();\n    };\n    /**\n     * @param pageIndex\n     * @private\n     */\n    TextSearch.prototype.resizeSearchElements = function (pageIndex) {\n        var searchDivs = document.querySelectorAll('div[id*=\"' + this.pdfViewer.element.id + '_searchtext_' + pageIndex + '\"]');\n        for (var i = 0; i < searchDivs.length; i++) {\n            var textDiv = searchDivs[i];\n            var previousZoomFactor = 1;\n            if (this.pdfViewer.magnificationModule) {\n                previousZoomFactor = this.pdfViewer.magnificationModule.previousZoomFactor;\n            }\n            // eslint-disable-next-line max-len\n            var outputdata = pageIndex + '_' + previousZoomFactor + '_' + this.pdfViewerBase.getZoomFactor();\n            if (textDiv.getAttribute('name') !== outputdata) {\n                // eslint-disable-next-line\n                textDiv.style.width = (parseFloat(textDiv.style.width) / previousZoomFactor) * this.pdfViewerBase.getZoomFactor() + 'px';\n                // eslint-disable-next-line\n                textDiv.style.height = (parseFloat(textDiv.style.height) / previousZoomFactor) * this.pdfViewerBase.getZoomFactor() + 'px';\n                // eslint-disable-next-line\n                textDiv.style.top = (parseFloat(textDiv.style.top) / previousZoomFactor) * this.pdfViewerBase.getZoomFactor() + 'px';\n                // eslint-disable-next-line\n                textDiv.style.left = (parseFloat(textDiv.style.left) / previousZoomFactor) * this.pdfViewerBase.getZoomFactor() + 'px';\n                textDiv.setAttribute('name', outputdata);\n            }\n        }\n    };\n    /**\n     * @param pageNumber\n     * @private\n     */\n    TextSearch.prototype.highlightOtherOccurrences = function (pageNumber) {\n        this.initSearch(pageNumber, true);\n    };\n    TextSearch.prototype.highlightOthers = function (isSearched) {\n        var indexes = this.getIndexes();\n        var lowerPageValue = parseFloat(indexes.lowerPageValue.toString());\n        var higherPageValue = parseFloat(indexes.higherPageValue.toString());\n        for (var i = lowerPageValue; i <= higherPageValue; i++) {\n            this.highlightOtherOccurrences(i);\n        }\n        if (isSearched) {\n            this.showLoadingIndicator(false);\n        }\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.clearAllOccurrences = function () {\n        var searchTextDivs = document.querySelectorAll('div[id*=\"' + this.pdfViewer.element.id + '_searchtext_\"]');\n        for (var i = 0; i < searchTextDivs.length; i++) {\n            searchTextDivs[i].parentElement.removeChild(searchTextDivs[i]);\n        }\n    };\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    TextSearch.prototype.getIndexes = function () {\n        var lowerPageValue = this.pdfViewerBase.currentPageNumber - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = this.pdfViewerBase.currentPageNumber + 1;\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        return { lowerPageValue: lowerPageValue, higherPageValue: higherPageValue };\n    };\n    TextSearch.prototype.applyTextSelection = function () {\n        if (this.pdfViewer.textSelectionModule && !this.pdfViewerBase.isTextSelectionDisabled) {\n            var indexes = this.getIndexes();\n            var lowerPageValue = parseFloat(indexes.lowerPageValue.toString());\n            var higherPageValue = parseFloat(indexes.higherPageValue.toString());\n            for (var i = lowerPageValue; i <= higherPageValue; i++) {\n                this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(i);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.resetTextSearch = function () {\n        this.resetVariables();\n        this.onTextSearchClose();\n        this.searchPageIndex = null;\n        this.searchIndex = 0;\n        this.updateSearchInputIcon(true);\n        this.enableNextButton(false);\n        this.enablePrevButton(false);\n        this.documentTextCollection = [];\n        this.isTextRetrieved = false;\n        this.isTextSearched = false;\n        this.isSearchText = false;\n        if (this.searchRequestHandler) {\n            this.searchRequestHandler.clear();\n        }\n    };\n    TextSearch.prototype.onTextSearchClose = function () {\n        this.isPrevSearch = false;\n        this.isTextSearch = false;\n        if (this.pdfViewerBase.pageCount > 0) {\n            this.clearAllOccurrences();\n        }\n    };\n    TextSearch.prototype.createRequestForSearch = function (pageIndex) {\n        var proxy = this;\n        var viewPortWidth = 816;\n        var viewPortHeight = this.pdfViewer.element.clientHeight;\n        var pageWidth = this.pdfViewerBase.pageSize[pageIndex].width;\n        var pageHeight = this.pdfViewerBase.pageSize[pageIndex].height;\n        var tileCount = this.pdfViewerBase.getTileCount(pageWidth);\n        var noTileX = viewPortWidth >= pageWidth ? 1 : tileCount;\n        var noTileY = viewPortWidth >= pageWidth ? 1 : tileCount;\n        var isTileRendering = false;\n        var tileSettings = this.pdfViewer.tileRenderingSettings;\n        if (tileSettings.enableTileRendering && tileSettings.x > 0 && tileSettings.y > 0) {\n            noTileX = viewPortWidth >= pageWidth ? 1 : tileSettings.x;\n            noTileY = viewPortWidth >= pageWidth ? 1 : tileSettings.y;\n        }\n        if (noTileX > 1 && noTileY > 1) {\n            isTileRendering = true;\n        }\n        var _loop_1 = function (x) {\n            var _loop_2 = function (y) {\n                var jsonObject = void 0;\n                // eslint-disable-next-line max-len\n                jsonObject = { xCoordinate: x, yCoordinate: y, pageNumber: pageIndex, viewPortWidth: viewPortWidth, viewPortHeight: viewPortHeight, documentId: proxy.pdfViewerBase.getDocumentId(), hashId: proxy.pdfViewerBase.hashId, zoomFactor: proxy.pdfViewerBase.getZoomFactor(), tilecount: tileCount, action: 'Search', elementId: proxy.pdfViewer.element.id, uniqueId: proxy.pdfViewerBase.documentId,\n                    tileXCount: noTileX, tileYCount: noTileY };\n                if (this_1.pdfViewerBase.jsonDocumentId) {\n                    // eslint-disable-next-line\n                    jsonObject.documentId = this_1.pdfViewerBase.jsonDocumentId;\n                }\n                var zoomFactor = this_1.pdfViewerBase.retrieveCurrentZoomFactor();\n                this_1.searchRequestHandler = new AjaxHandler(this_1.pdfViewer);\n                this_1.searchRequestHandler.url = this_1.pdfViewer.serviceUrl + '/' + this_1.pdfViewer.serverActionSettings.renderPages;\n                this_1.searchRequestHandler.responseType = 'json';\n                if (!this_1.pdfViewerBase.clientSideRendering) {\n                    this_1.searchRequestHandler.send(jsonObject);\n                }\n                // eslint-disable-next-line\n                this_1.searchRequestHandler.onSuccess = function (result) {\n                    // eslint-disable-next-line\n                    var data = result.data;\n                    if (data) {\n                        if (typeof data !== 'object') {\n                            try {\n                                data = JSON.parse(data);\n                            }\n                            catch (error) {\n                                proxy.pdfViewerBase.onControlError(500, data, this.pdfViewer.serverActionSettings.renderPages);\n                                data = null;\n                            }\n                        }\n                        if (data) {\n                            proxy.searchRequestOnSuccess(data, proxy, viewPortWidth, pageWidth, isTileRendering, pageIndex, x, y, noTileX, noTileY);\n                        }\n                    }\n                };\n                // eslint-disable-next-line\n                this_1.searchRequestHandler.onFailure = function (result) {\n                    proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, this.pdfViewer.serverActionSettings.renderPages);\n                };\n                // eslint-disable-next-line\n                this_1.searchRequestHandler.onError = function (result) {\n                    proxy.pdfViewerBase.openNotificationPopup();\n                    // eslint-disable-next-line max-len\n                    proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, this.pdfViewer.serverActionSettings.renderPages);\n                };\n                if (this_1.pdfViewerBase.clientSideRendering) {\n                    var textDetailsId = this_1.pdfViewerBase.documentId + '_' + pageIndex + '_textDetails';\n                    var isTextNeed = this_1.pdfViewerBase.pageTextDetails ? this_1.pdfViewerBase.pageTextDetails[textDetailsId] ? false : true : true;\n                    if (viewPortWidth >= pageWidth || !this_1.pdfViewer.tileRenderingSettings.enableTileRendering) {\n                        this_1.pdfViewerBase.pdfViewerRunner.postMessage({\n                            pageIndex: pageIndex,\n                            message: 'renderPageSearch',\n                            zoomFactor: proxy.pdfViewer.magnificationModule.zoomFactor,\n                            isTextNeed: isTextNeed,\n                            textDetailsId: textDetailsId\n                        });\n                    }\n                    else {\n                        this_1.pdfViewerBase.pdfViewerRunner.postMessage({\n                            pageIndex: pageIndex,\n                            message: 'renderImageAsTileSearch',\n                            zoomFactor: zoomFactor,\n                            tileX: x,\n                            tileY: y,\n                            tileXCount: noTileX,\n                            tileYCount: noTileY,\n                            isTextNeed: isTextNeed,\n                            textDetailsId: textDetailsId\n                        });\n                    }\n                    this_1.pdfViewerBase.pdfViewerRunner.onmessage = function (event) {\n                        switch (event.data.message) {\n                            case 'imageRenderedSearch':\n                                if (event.data.message === 'imageRenderedSearch') {\n                                    var canvas = document.createElement('canvas');\n                                    var _a = event.data, value = _a.value, width = _a.width, height = _a.height, pageIndex_1 = _a.pageIndex;\n                                    canvas.width = width;\n                                    canvas.height = height;\n                                    var canvasContext = canvas.getContext('2d');\n                                    var imageData = canvasContext.createImageData(width, height);\n                                    imageData.data.set(value);\n                                    canvasContext.putImageData(imageData, 0, 0);\n                                    var imageUrl = canvas.toDataURL();\n                                    var textBounds = event.data.textBounds;\n                                    var textContent = event.data.textContent;\n                                    var pageText = event.data.pageText;\n                                    var rotation = event.data.rotation;\n                                    var characterBounds = event.data.characterBounds;\n                                    var hyperlinksDetails = proxy.pdfViewer.pdfRendererModule.getHyperlinks(pageIndex_1);\n                                    var data = ({ image: imageUrl, pageNumber: pageIndex_1, uniqueId: proxy.pdfViewerBase.documentId, pageWidth: width, zoomFactor: event.data.zoomFactor, hyperlinks: hyperlinksDetails.hyperlinks, hyperlinkBounds: hyperlinksDetails.hyperlinkBounds, linkAnnotation: hyperlinksDetails.linkAnnotation, linkPage: hyperlinksDetails.linkPage, annotationLocation: hyperlinksDetails.annotationLocation, characterBounds: characterBounds });\n                                    if (event.data.isTextNeed) {\n                                        data.textBounds = textBounds;\n                                        data.textContent = textContent;\n                                        data.rotation = rotation;\n                                        data.pageText = pageText;\n                                        proxy.pdfViewerBase.storeTextDetails(pageIndex_1, textBounds, textContent, pageText, rotation, characterBounds);\n                                    }\n                                    else {\n                                        var textDetails = JSON.parse(proxy.pdfViewerBase.pageTextDetails[\"\" + event.data.textDetailsId]);\n                                        data.textBounds = textDetails.textBounds;\n                                        data.textContent = textDetails.textContent;\n                                        data.rotation = textDetails.rotation;\n                                        data.pageText = textDetails.pageText;\n                                        data.characterBounds = textDetails.characterBounds;\n                                    }\n                                    if (data && data.image && data.uniqueId === proxy.pdfViewerBase.documentId) {\n                                        var currentPageWidth = (data.pageWidth && data.pageWidth > 0) ? data.pageWidth : pageWidth;\n                                        proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.renderPages, data);\n                                        var pageNumber = (data.pageNumber !== undefined) ? data.pageNumber : pageIndex_1;\n                                        var blobObj = proxy.pdfViewerBase.createBlobUrl(data.image.split('base64,')[1], 'image/png');\n                                        var Url = URL || webkitURL;\n                                        var blobUrl = Url.createObjectURL(blobObj);\n                                        var storeObject = {\n                                            // eslint-disable-next-line\n                                            image: blobUrl, width: data.pageWidth, uniqueId: data.uniqueId, zoomFactor: data.zoomFactor\n                                        };\n                                        proxy.pdfViewerBase.storeImageData(pageNumber, storeObject);\n                                        proxy.searchRequestOnSuccess(data, proxy, viewPortWidth, pageWidth, isTileRendering, pageIndex_1, x, y, noTileX, noTileY);\n                                    }\n                                }\n                                break;\n                            case 'renderTileImageSearch':\n                                if (event.data.message === 'renderTileImageSearch') {\n                                    var canvas = document.createElement('canvas');\n                                    var _b = event.data, value = _b.value, w = _b.w, h = _b.h, noTileX_1 = _b.noTileX, noTileY_1 = _b.noTileY, x_1 = _b.x, y_1 = _b.y, pageIndex_2 = _b.pageIndex;\n                                    canvas.setAttribute('height', h);\n                                    canvas.setAttribute('width', w);\n                                    canvas.width = w;\n                                    canvas.height = h;\n                                    var canvasContext = canvas.getContext('2d');\n                                    var imageData = canvasContext.createImageData(w, h);\n                                    imageData.data.set(value);\n                                    canvasContext.putImageData(imageData, 0, 0);\n                                    var imageUrl = canvas.toDataURL();\n                                    var tileWidth = w;\n                                    var tileHeight = h;\n                                    var textBounds = event.data.textBounds;\n                                    var textContent = event.data.textContent;\n                                    var pageText = event.data.pageText;\n                                    var rotation = event.data.rotation;\n                                    var characterBounds = event.data.characterBounds;\n                                    var tileData = {\n                                        image: imageUrl,\n                                        noTileX: noTileX_1,\n                                        noTileY: noTileY_1,\n                                        pageNumber: pageIndex_2,\n                                        tileX: x_1,\n                                        tileY: y_1,\n                                        uniqueId: proxy.pdfViewerBase.documentId,\n                                        pageWidth: pageWidth,\n                                        width: tileWidth,\n                                        transformationMatrix: {\n                                            Values: [1, 0, 0, 1, tileWidth * x_1, tileHeight * y_1, 0, 0, 0]\n                                        },\n                                        zoomFactor: event.data.zoomFactor,\n                                        characterBounds: characterBounds,\n                                        isTextNeed: event.data.isTextNeed,\n                                        textDetailsId: event.data.textDetailsId\n                                    };\n                                    if (tileData && tileData.image && tileData.uniqueId === proxy.pdfViewerBase.documentId) {\n                                        var currentPageWidth = (tileData.pageWidth && tileData.pageWidth > 0) ? tileData.pageWidth : pageWidth;\n                                        proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.renderPages, tileData);\n                                        var pageNumber = (tileData.pageNumber !== undefined) ? tileData.pageNumber : pageIndex_2;\n                                        if (x_1 == 0 && y_1 == 0) {\n                                            var blobObj = proxy.pdfViewerBase.createBlobUrl(tileData.image.split('base64,')[1], 'image/png');\n                                            var Url = URL || webkitURL;\n                                            var blobUrl = Url.createObjectURL(blobObj);\n                                            var storeObject = {\n                                                // eslint-disable-next-line\n                                                image: blobUrl, width: tileData.pageWidth, uniqueId: tileData.uniqueId, tileX: tileData.tileX, tileY: tileData.tileY,\n                                                zoomFactor: tileData.zoomFactor\n                                            };\n                                            if (tileData.isTextNeed) {\n                                                tileData.textBounds = textBounds;\n                                                tileData.textContent = textContent;\n                                                tileData.rotation = rotation;\n                                                tileData.pageText = pageText;\n                                                proxy.pdfViewerBase.storeTextDetails(pageIndex_2, textBounds, textContent, pageText, rotation, characterBounds);\n                                            }\n                                            else {\n                                                var textDetails = JSON.parse(proxy.pdfViewerBase.pageTextDetails[\"\" + tileData.textDetailsId]);\n                                                tileData.textBounds = textDetails.textBounds;\n                                                tileData.textContent = textDetails.textContent;\n                                                tileData.rotation = textDetails.rotation;\n                                                tileData.pageText = textDetails.pageText;\n                                                tileData.characterBounds = textDetails.characterBounds;\n                                            }\n                                            proxy.pdfViewerBase.storeImageData(pageNumber, storeObject, tileData.tileX, tileData.tileY);\n                                        }\n                                        else {\n                                            var blobObj = proxy.pdfViewerBase.createBlobUrl(tileData.image.split('base64,')[1], 'image/png');\n                                            var Url = URL || webkitURL;\n                                            var blobUrl = Url.createObjectURL(blobObj);\n                                            var storeObject = {\n                                                // eslint-disable-next-line\n                                                image: blobUrl, width: tileData.pageWidth, uniqueId: tileData.uniqueId, tileX: tileData.tileX, tileY: tileData.tileY, zoomFactor: tileData.zoomFactor\n                                            };\n                                            proxy.pdfViewerBase.storeImageData(pageNumber, storeObject, tileData.tileX, tileData.tileY);\n                                        }\n                                        proxy.searchRequestOnSuccess(tileData, proxy, viewPortWidth, pageWidth, isTileRendering, pageIndex_2, x_1, y_1, noTileX_1, noTileY_1);\n                                    }\n                                }\n                                break;\n                        }\n                    };\n                }\n            };\n            for (var y = 0; y < noTileY; y++) {\n                _loop_2(y);\n            }\n        };\n        var this_1 = this;\n        for (var x = 0; x < noTileX; x++) {\n            _loop_1(x);\n        }\n    };\n    TextSearch.prototype.searchRequestOnSuccess = function (data, proxy, viewPortWidth, pageWidth, isTileRendering, pageIndex, x, y, noTileX, noTileY) {\n        if (!isNullOrUndefined(data.pageText) && data.uniqueId === proxy.pdfViewerBase.documentId) {\n            proxy.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.renderPages, data);\n            var pageNumber = (data.pageNumber !== undefined) ? data.pageNumber : pageIndex;\n            if (viewPortWidth >= pageWidth) {\n                proxy.pdfViewerBase.storeWinData(data, pageNumber);\n            }\n            else {\n                proxy.pdfViewerBase.storeWinData(data, pageNumber, data.tileX, data.tileY);\n            }\n            if (!isTileRendering) {\n                proxy.initSearch(pageIndex, false);\n            }\n            else {\n                if (x === (noTileX - 1) && y === (noTileY - 1)) {\n                    proxy.initSearch(pageIndex, false);\n                }\n            }\n        }\n        else if (isTileRendering && data.uniqueId === proxy.pdfViewerBase.documentId) {\n            proxy.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.renderPages, data);\n            var pageNumber = (data.pageNumber !== undefined) ? data.pageNumber : pageIndex;\n            proxy.pdfViewerBase.storeWinData(data, pageNumber, data.tileX, data.tileY);\n            if (x === (noTileX - 1) && y === (noTileY - 1)) {\n                proxy.initSearch(pageIndex, false);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.getPDFDocumentTexts = function () {\n        var startIndex = 0;\n        var endIndex = 50;\n        var pageCount = this.pdfViewerBase.pageCount;\n        if (endIndex >= pageCount) {\n            endIndex = pageCount;\n        }\n        this.createRequestForGetPdfTexts(startIndex, endIndex);\n    };\n    /**\n     * @param startIndex\n     * @param endIndex\n     * @private\n     */\n    TextSearch.prototype.createRequestForGetPdfTexts = function (startIndex, endIndex) {\n        var proxy = this;\n        var jsonObject;\n        // eslint-disable-next-line max-len\n        jsonObject = { pageStartIndex: startIndex, pageEndIndex: endIndex, documentId: proxy.pdfViewerBase.getDocumentId(), hashId: proxy.pdfViewerBase.hashId, action: 'RenderPdfTexts', elementId: proxy.pdfViewer.element.id, uniqueId: proxy.pdfViewerBase.documentId };\n        if (this.pdfViewerBase.jsonDocumentId) {\n            // eslint-disable-next-line\n            jsonObject.documentId = this.pdfViewerBase.jsonDocumentId;\n        }\n        this.searchRequestHandler = new AjaxHandler(this.pdfViewer);\n        this.searchRequestHandler.url = this.pdfViewer.serviceUrl + '/' + this.pdfViewer.serverActionSettings.renderTexts;\n        this.searchRequestHandler.responseType = 'json';\n        if (!this.pdfViewerBase.clientSideRendering) {\n            this.searchRequestHandler.send(jsonObject);\n        }\n        // eslint-disable-next-line\n        this.searchRequestHandler.onSuccess = function (result) {\n            // eslint-disable-next-line\n            var data = result.data;\n            if (data) {\n                if (typeof data !== 'object') {\n                    try {\n                        data = JSON.parse(data);\n                    }\n                    catch (error) {\n                        proxy.pdfViewerBase.onControlError(500, data, this.pdfViewer.serverActionSettings.renderTexts);\n                        data = null;\n                    }\n                }\n                if (data) {\n                    proxy.pdfTextSearchRequestOnSuccess(data, proxy, startIndex, endIndex);\n                }\n            }\n        };\n        // eslint-disable-next-line\n        this.searchRequestHandler.onFailure = function (result) {\n            proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, this.pdfViewer.serverActionSettings.renderTexts);\n        };\n        // eslint-disable-next-line\n        this.searchRequestHandler.onError = function (result) {\n            proxy.pdfViewerBase.openNotificationPopup();\n            proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, this.pdfViewer.serverActionSettings.renderTexts);\n        };\n        if (this.pdfViewerBase.clientSideRendering) {\n            this.pdfViewer.pdfRendererModule.getDocumentText(jsonObject).then(function (data) {\n                proxy.pdfTextSearchRequestOnSuccess(data, proxy, startIndex, endIndex);\n            });\n        }\n    };\n    TextSearch.prototype.pdfTextSearchRequestOnSuccess = function (data, proxy, startIndex, endIndex) {\n        if (data.documentTextCollection && data.uniqueId === proxy.pdfViewerBase.documentId) {\n            proxy.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.renderTexts, data);\n            if (proxy.documentTextCollection.length > 0) {\n                proxy.documentTextCollection = data.documentTextCollection.concat(proxy.documentTextCollection);\n                proxy.documentTextCollection = proxy.orderPdfTextCollections(proxy.documentTextCollection);\n            }\n            else {\n                proxy.documentTextCollection = data.documentTextCollection;\n            }\n            var pageCount = proxy.pdfViewerBase.pageCount;\n            if (endIndex !== pageCount) {\n                startIndex = endIndex;\n                endIndex = endIndex + 50;\n                if (endIndex >= pageCount) {\n                    endIndex = pageCount;\n                }\n                proxy.createRequestForGetPdfTexts(startIndex, endIndex);\n            }\n            else {\n                proxy.isTextRetrieved = true;\n                proxy.pdfViewer.fireTextExtractionCompleted(proxy.documentTextCollection);\n                if (proxy.isTextSearched && proxy.searchString.length > 0) {\n                    proxy.textSearch(proxy.searchString);\n                    proxy.isTextSearched = false;\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line\n    TextSearch.prototype.orderPdfTextCollections = function (oldCollection) {\n        // eslint-disable-next-line\n        var annotationCollectionList = [];\n        for (var i = 0; i < oldCollection.length; i++) {\n            if (annotationCollectionList.length === 0) {\n                annotationCollectionList.push(oldCollection[i]);\n            }\n            else {\n                // eslint-disable-next-line\n                if (parseInt(Object.keys(oldCollection[i])[0]) > parseInt(Object.keys(annotationCollectionList[annotationCollectionList.length - 1])[0])) {\n                    annotationCollectionList.push(oldCollection[i]);\n                }\n                else {\n                    for (var j = 0; j < annotationCollectionList.length; j++) {\n                        // eslint-disable-next-line\n                        if ((parseInt(Object.keys(oldCollection[i])[0]) < parseInt(Object.keys(annotationCollectionList[j])[0]))) {\n                            annotationCollectionList.splice(j, 0, oldCollection[i]);\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n        return annotationCollectionList;\n    };\n    TextSearch.prototype.createSearchBoxButtons = function (id, className) {\n        // eslint-disable-next-line max-len\n        var button = createElement('button', { id: this.pdfViewer.element.id + '_' + id, className: 'e-btn e-icon-btn e-pv-search-btn ' + className });\n        button.setAttribute('type', 'button');\n        // eslint-disable-next-line max-len\n        var iconSpan = createElement('span', { id: this.pdfViewer.element.id + '_' + id + 'Icon', className: 'e-pv-icon-search ' + className + '-icon' });\n        button.disabled = true;\n        button.appendChild(iconSpan);\n        return button;\n    };\n    TextSearch.prototype.enablePrevButton = function (isEnable) {\n        if ((!Browser.isDevice || this.pdfViewer.enableDesktopMode)) {\n            if (isEnable) {\n                this.prevSearchBtn.removeAttribute('disabled');\n            }\n            else {\n                if (this.prevSearchBtn) {\n                    this.prevSearchBtn.disabled = true;\n                }\n            }\n        }\n    };\n    TextSearch.prototype.enableNextButton = function (isEnable) {\n        if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n            if (isEnable) {\n                this.nextSearchBtn.removeAttribute('disabled');\n            }\n            else {\n                if (this.nextSearchBtn) {\n                    this.nextSearchBtn.disabled = true;\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.resetVariables = function () {\n        this.searchedPages = [];\n        // eslint-disable-next-line\n        this.searchMatches = new Array();\n    };\n    /**\n     * @param element\n     * @param inputElement\n     * @private\n     */\n    TextSearch.prototype.searchButtonClick = function (element, inputElement) {\n        this.isMessagePopupOpened = false;\n        if (isBlazor() && (Browser.isDevice && !this.pdfViewer.enableDesktopMode)) {\n            var searchElement = this.pdfViewerBase.getElement('_search_box-icon');\n            element = searchElement.children[0].children[0];\n            inputElement = this.pdfViewerBase.getElement('_search_input');\n        }\n        if (element.classList.contains('e-pv-search-icon')) {\n            this.initiateTextSearch(inputElement);\n        }\n        else if (element.classList.contains('e-pv-search-close')) {\n            this.showLoadingIndicator(false);\n            inputElement.value = '';\n            this.resetTextSearch();\n            inputElement.focus();\n        }\n    };\n    TextSearch.prototype.updateSearchInputIcon = function (isEnable) {\n        if (isBlazor()) {\n            if (this.searchBtn && (Browser.isDevice && !this.pdfViewer.enableDesktopMode)) {\n                this.searchBtn = this.pdfViewerBase.getElement('_search_box-icon').children[0].children[0];\n            }\n        }\n        if (this.searchBtn) {\n            if (isEnable) {\n                this.searchBtn.classList.remove('e-pv-search-close');\n                this.searchBtn.classList.add('e-pv-search-icon');\n            }\n            else {\n                this.searchBtn.classList.remove('e-pv-search-icon');\n                this.searchBtn.classList.add('e-pv-search-close');\n            }\n        }\n    };\n    TextSearch.prototype.onMessageBoxOpen = function () {\n        var _this = this;\n        this.showLoadingIndicator(false);\n        this.pdfViewerBase.getElement('_search_input').blur();\n        this.isMessagePopupOpened = true;\n        if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n            if (isBlazor()) {\n                var promise = this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText', 'PdfViewer_Nomatches');\n                promise.then(function (value) {\n                    _this.pdfViewerBase.textLayer.createNotificationPopup(value);\n                });\n            }\n            else {\n                this.pdfViewerBase.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant('No matches'));\n            }\n        }\n        else {\n            if (isBlazor()) {\n                var promise = this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText', 'PdfViewer_NoTextFound');\n                promise.then(function (value) {\n                    _this.pdfViewerBase.navigationPane.createTooltipMobile(value);\n                });\n            }\n            else {\n                this.pdfViewerBase.navigationPane.createTooltipMobile(this.pdfViewer.localeObj.getConstant('No Text Found'));\n            }\n        }\n    };\n    /**\n     * Searches the target text in the PDF document and highlights the occurrences in the pages\n     *\n     * @param  {string} searchText - Specifies the searchText content\n     * @param  {boolean} isMatchCase - If set true , its highlights the MatchCase content\n     * @returns void\n     */\n    TextSearch.prototype.searchText = function (searchText, isMatchCase) {\n        if (searchText && searchText.length > 0 && searchText[searchText.length - 1] === ' ') {\n            searchText = searchText.slice(0, searchText.length - 1);\n        }\n        this.searchString = searchText;\n        this.isMatchCase = isMatchCase;\n        this.searchIndex = 0;\n        this.textSearch(searchText);\n    };\n    /**\n     * Searches the next occurrence of the searched text from the current occurrence of the PdfViewer.\n     *\n     * @returns void\n     */\n    TextSearch.prototype.searchNext = function () {\n        this.nextSearch();\n    };\n    /**\n     * Searches the previous occurrence of the searched text from the current occurrence of the PdfViewer.\n     *\n     * @returns void\n     */\n    TextSearch.prototype.searchPrevious = function () {\n        this.prevSearch();\n    };\n    /**\n     * Cancels the text search of the PdfViewer.\n     *\n     * @returns void\n     */\n    TextSearch.prototype.cancelTextSearch = function () {\n        this.resetTextSearch();\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.destroy = function () {\n        this.searchMatches = undefined;\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.getModuleName = function () {\n        return 'TextSearch';\n    };\n    return TextSearch;\n}());\nexport { TextSearch };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}