{"ast":null,"code":"import { detach, closest, Browser, isNullOrUndefined as isNOU } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, EventHandler, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport * as events from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport * as classes from '../base/classes';\nimport { dispatchEvent, parseHtml, hasClass } from '../base/util';\n/**\n * `Table` module is used to handle table actions.\n */\nvar Table = /** @class */function () {\n  function Table(parent, serviceLocator) {\n    this.ensureInsideTableList = true;\n    this.pageX = null;\n    this.pageY = null;\n    this.moveEle = null;\n    this.currentColumnResize = '';\n    this.currentMarginLeft = 0;\n    this.parent = parent;\n    this.rteID = parent.element.id;\n    this.l10n = serviceLocator.getService('rteLocale');\n    this.rendererFactory = serviceLocator.getService('rendererFactory');\n    this.dialogRenderObj = serviceLocator.getService('dialogRenderObject');\n    this.addEventListener();\n  }\n  Table.prototype.addEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.parent.on(events.createTable, this.renderDlgContent, this);\n    this.parent.on(events.initialEnd, this.afterRender, this);\n    this.parent.on(events.dynamicModule, this.afterRender, this);\n    this.parent.on(events.showTableDialog, this.showDialog, this);\n    this.parent.on(events.closeTableDialog, this.closeDialog, this);\n    this.parent.on(events.docClick, this.docClick, this);\n    this.parent.on(events.iframeMouseDown, this.onIframeMouseDown, this);\n    this.parent.on(events.editAreaClick, this.editAreaClickHandler, this);\n    this.parent.on(events.clearDialogObj, this.clearDialogObj, this);\n    this.parent.on(events.tableToolbarAction, this.onToolbarAction, this);\n    this.parent.on(events.dropDownSelect, this.dropdownSelect, this);\n    this.parent.on(events.keyDown, this.keyDown, this);\n    this.parent.on(events.keyUp, this.keyUp, this);\n    this.parent.on(events.mouseUp, this.selectionTable, this);\n    this.parent.on(events.tableModulekeyUp, this.tableModulekeyUp, this);\n    this.parent.on(events.bindCssClass, this.setCssClass, this);\n    this.parent.on(events.destroy, this.destroy, this);\n    this.parent.on(events.moduleDestroy, this.moduleDestroy, this);\n    this.parent.on(events.afterKeyDown, this.afterKeyDown, this);\n  };\n  Table.prototype.removeEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.parent.off(events.createTable, this.renderDlgContent);\n    this.parent.off(events.initialEnd, this.afterRender);\n    this.parent.off(events.dynamicModule, this.afterRender);\n    this.parent.off(events.docClick, this.docClick);\n    this.parent.off(events.iframeMouseDown, this.onIframeMouseDown);\n    this.parent.off(events.showTableDialog, this.showDialog);\n    this.parent.off(events.closeTableDialog, this.closeDialog);\n    this.parent.off(events.editAreaClick, this.editAreaClickHandler);\n    this.parent.off(events.clearDialogObj, this.clearDialogObj);\n    this.parent.off(events.tableToolbarAction, this.onToolbarAction);\n    this.parent.off(events.dropDownSelect, this.dropdownSelect);\n    this.parent.off(events.mouseDown, this.cellSelect);\n    this.parent.off(events.tableColorPickerChanged, this.setBGColor);\n    this.parent.off(events.keyDown, this.keyDown);\n    this.parent.off(events.keyUp, this.keyUp);\n    this.parent.off(events.mouseUp, this.selectionTable);\n    this.parent.off(events.tableModulekeyUp, this.tableModulekeyUp);\n    this.parent.off(events.bindCssClass, this.setCssClass);\n    this.parent.off(events.destroy, this.destroy);\n    this.parent.off(events.moduleDestroy, this.moduleDestroy);\n    this.parent.off(events.afterKeyDown, this.afterKeyDown);\n    if (!Browser.isDevice && this.parent.tableSettings.resize) {\n      EventHandler.remove(this.contentModule.getEditPanel(), 'mouseover', this.resizeHelper);\n    }\n  };\n  Table.prototype.updateCss = function (currentObj, e) {\n    if (currentObj && e.cssClass) {\n      if (isNullOrUndefined(e.oldCssClass)) {\n        currentObj.setProperties({\n          cssClass: (currentObj.cssClass + ' ' + e.cssClass).trim()\n        });\n      } else {\n        currentObj.setProperties({\n          cssClass: (currentObj.cssClass.replace(e.oldCssClass, '').trim() + ' ' + e.cssClass).trim()\n        });\n      }\n    }\n  };\n  // eslint-disable-next-line @typescript-eslint/tslint/config\n  Table.prototype.setCssClass = function (e) {\n    if (this.popupObj && e.cssClass) {\n      if (isNullOrUndefined(e.oldCssClass)) {\n        addClass([this.popupObj.element], e.cssClass);\n      } else {\n        removeClass([this.popupObj.element], e.oldCssClass);\n        addClass([this.popupObj.element], e.cssClass);\n      }\n    }\n    this.updateCss(this.createTableButton, e);\n    this.updateCss(this.editdlgObj, e);\n    var numericTextBoxObj = [this.columnTextBox, this.rowTextBox, this.tableWidthNum, this.tableCellPadding, this.tableCellSpacing];\n    for (var i = 0; i < numericTextBoxObj.length; i++) {\n      this.updateCss(numericTextBoxObj[i], e);\n    }\n  };\n  Table.prototype.selectionTable = function (e) {\n    var target = e.args.target;\n    if (Browser.info.name === 'mozilla' && !isNOU(closest(target, 'table')) && closest(target, 'table').tagName === 'TABLE') {\n      this.parent.contentModule.getEditPanel().setAttribute('contenteditable', 'true');\n    }\n  };\n  Table.prototype.afterRender = function () {\n    if (isNullOrUndefined(this.contentModule)) {\n      this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n      this.parent.on(events.tableColorPickerChanged, this.setBGColor, this);\n      this.parent.on(events.mouseDown, this.cellSelect, this);\n      if (this.parent.tableSettings.resize) {\n        EventHandler.add(this.parent.contentModule.getEditPanel(), Browser.touchStartEvent, this.resizeStart, this);\n      }\n      if (!Browser.isDevice && this.parent.tableSettings.resize) {\n        EventHandler.add(this.contentModule.getEditPanel(), 'mouseover', this.resizeHelper, this);\n      }\n    }\n  };\n  Table.prototype.dropdownSelect = function (e) {\n    var item = e.item;\n    if (!document.body.contains(document.body.querySelector('.e-rte-quick-toolbar')) || item.command !== 'Table') {\n      return;\n    }\n    var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n    var args = {\n      args: e,\n      selection: this.parent.formatter.editorManager.nodeSelection.save(range, this.contentModule.getDocument()),\n      selectParent: this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range)\n    };\n    switch (item.subCommand) {\n      case 'InsertRowBefore':\n      case 'InsertRowAfter':\n        this.addRow(args.selection, e);\n        break;\n      case 'InsertColumnLeft':\n      case 'InsertColumnRight':\n        this.addColumn(args.selection, e);\n        break;\n      case 'DeleteColumn':\n      case 'DeleteRow':\n        this.removeRowColumn(args.selection, e);\n        break;\n      case 'AlignTop':\n      case 'AlignMiddle':\n      case 'AlignBottom':\n        this.verticalAlign(args, e);\n        break;\n      case 'Dashed':\n      case 'Alternate':\n      case 'Custom':\n        this.tableStyles(args, item.subCommand);\n        break;\n      case 'Merge':\n      case 'VerticalSplit':\n      case 'HorizontalSplit':\n        this.UpdateCells(args.selection, e);\n        break;\n    }\n  };\n  Table.prototype.UpdateCells = function (selectCell, e) {\n    this.parent.formatter.process(this.parent, e, e, {\n      selection: selectCell,\n      subCommand: e.item.subCommand\n    });\n    this.hideTableQuickToolbar();\n  };\n  Table.prototype.keyUp = function (e) {\n    var target = e.args.target;\n    if (e.args.key.toLocaleLowerCase() === 'escape' && target && target.classList && this.popupObj && !closest(target, '[id=' + \"'\" + this.popupObj.element.id + \"'\" + ']') && this.popupObj) {\n      this.popupObj.hide();\n    }\n  };\n  Table.prototype.keyDown = function (e) {\n    var event = e.args;\n    // eslint-disable-next-line\n    var proxy = this;\n    switch (event.action) {\n      case 'escape':\n        break;\n      case 'insert-table':\n        this.openDialog(true, e);\n        event.preventDefault();\n        break;\n    }\n    if (!isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection) && this.contentModule && event.code !== 'KeyK') {\n      var selection = void 0;\n      var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n      var ele = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range)[0];\n      ele = ele && ele.tagName !== 'TD' && ele.tagName !== 'TH' ? ele.parentElement : ele;\n      if (event.keyCode === 8 || event.keyCode === 46 || event.ctrlKey && event.keyCode === 88) {\n        if (ele && ele.tagName === 'TBODY') {\n          if (!isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection) && this.contentModule) {\n            selection = this.parent.formatter.editorManager.nodeSelection.save(range, this.contentModule.getDocument());\n          }\n          event.preventDefault();\n          proxy.removeTable(selection, event, true);\n        } else if (ele && ele.querySelectorAll('table').length > 0) {\n          this.removeResizeElement();\n          this.hideTableQuickToolbar();\n        }\n      }\n      if (ele && ele.tagName !== 'TD' && ele.tagName !== 'TH') {\n        var closestTd = closest(ele, 'td');\n        ele = !isNullOrUndefined(closestTd) && this.parent.inputElement.contains(closestTd) ? closestTd : ele;\n      }\n      if (ele && (ele.tagName === 'TD' || ele.tagName === 'TH')) {\n        if (!isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection) && this.contentModule) {\n          selection = this.parent.formatter.editorManager.nodeSelection.save(range, this.contentModule.getDocument());\n        }\n        switch (event.keyCode) {\n          case 9:\n          case 37:\n          case 39:\n            proxy.tabSelection(event, selection, ele);\n            break;\n          case 40:\n          case 38:\n            proxy.tableArrowNavigation(event, selection, ele);\n            break;\n        }\n      }\n    }\n    if (event.ctrlKey && event.key === 'a') {\n      this.handleSelectAll();\n    }\n  };\n  Table.prototype.handleSelectAll = function () {\n    this.cancelResizeAction();\n    var selectedCells = this.parent.inputElement.querySelectorAll('.' + classes.CLS_TABLE_SEL);\n    removeClass(selectedCells, classes.CLS_TABLE_SEL);\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  Table.prototype.tableModulekeyUp = function (e) {\n    if (!isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection) && this.contentModule) {\n      var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n      var ele = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range)[0];\n      ele = ele && ele.tagName !== 'TD' && ele.tagName !== 'TH' ? ele.parentElement : ele;\n      if (ele && ele.tagName !== 'TD' && ele.tagName !== 'TH') {\n        var closestTd = closest(ele, 'td');\n        ele = !isNullOrUndefined(closestTd) && this.parent.inputElement.contains(closestTd) ? closestTd : ele;\n      }\n      if (this.previousTableElement !== ele && !isNullOrUndefined(this.previousTableElement)) {\n        this.previousTableElement.classList.remove(classes.CLS_TABLE_SEL);\n      }\n    }\n  };\n  Table.prototype.openDialog = function (isInternal, e) {\n    if (!isInternal) {\n      this.parent.contentModule.getEditPanel().focus();\n    }\n    if (this.parent.editorMode === 'HTML') {\n      var docElement = this.parent.contentModule.getDocument();\n      var range = this.parent.formatter.editorManager.nodeSelection.getRange(docElement);\n      var selection = this.parent.formatter.editorManager.nodeSelection.save(range, docElement);\n      var args = {\n        originalEvent: e ? e.args : {\n          action: 'insert-table'\n        },\n        item: {\n          command: 'Table',\n          subCommand: 'CreateTable'\n        },\n        name: !isInternal ? 'showDialog' : null\n      };\n      this.insertTableDialog({\n        self: this,\n        args: args,\n        selection: selection\n      });\n    }\n  };\n  Table.prototype.showDialog = function () {\n    this.openDialog(false);\n    this.setCssClass({\n      cssClass: this.parent.getCssClass()\n    });\n  };\n  Table.prototype.closeDialog = function () {\n    if (this.editdlgObj) {\n      this.editdlgObj.hide({\n        returnValue: true\n      });\n    }\n  };\n  Table.prototype.onToolbarAction = function (args) {\n    var item = args.args.item;\n    switch (item.subCommand) {\n      case 'TableHeader':\n        this.tableHeader(args.selection, args.args);\n        break;\n      case 'TableRemove':\n        this.removeTable(args.selection, args.args);\n        break;\n      case 'TableEditProperties':\n        this.editTable(args);\n        break;\n    }\n  };\n  Table.prototype.verticalAlign = function (args, e) {\n    var tdEle = closest(args.selectParent[0], 'td') || closest(args.selectParent[0], 'th');\n    if (tdEle) {\n      this.parent.formatter.process(this.parent, e, e, {\n        tableCell: tdEle,\n        subCommand: e.item.subCommand\n      });\n    }\n  };\n  Table.prototype.tableStyles = function (args, command) {\n    var table = closest(args.selectParent[0], 'table');\n    if (command === 'Dashed') {\n      /* eslint-disable */\n      this.parent.element.classList.contains(classes.CLS_TB_DASH_BOR) ? this.parent.element.classList.remove(classes.CLS_TB_DASH_BOR) : this.parent.element.classList.add(classes.CLS_TB_DASH_BOR);\n      table.classList.contains(classes.CLS_TB_DASH_BOR) ? table.classList.remove(classes.CLS_TB_DASH_BOR) : table.classList.add(classes.CLS_TB_DASH_BOR);\n    }\n    if (command === 'Alternate') {\n      this.parent.element.classList.contains(classes.CLS_TB_ALT_BOR) ? this.parent.element.classList.remove(classes.CLS_TB_ALT_BOR) : this.parent.element.classList.add(classes.CLS_TB_ALT_BOR);\n      table.classList.contains(classes.CLS_TB_ALT_BOR) ? table.classList.remove(classes.CLS_TB_ALT_BOR) : table.classList.add(classes.CLS_TB_ALT_BOR);\n      /* eslint-enable */\n    }\n    if (args.args && args.args.item.cssClass) {\n      var classList = args.args.item.cssClass.split(' ');\n      for (var i = 0; i < classList.length; i++) {\n        if (table.classList.contains(classList[i])) {\n          table.classList.remove(classList[i]);\n        } else {\n          table.classList.add(classList[i]);\n        }\n      }\n    }\n    this.parent.formatter.saveData();\n    this.parent.formatter.editorManager.nodeSelection.restore();\n  };\n  Table.prototype.insideList = function (range) {\n    var blockNodes = this.parent.formatter.editorManager.domNode.blockNodes();\n    var nodes = [];\n    for (var i = 0; i < blockNodes.length; i++) {\n      if (blockNodes[i].parentNode.tagName === 'LI') {\n        nodes.push(blockNodes[i].parentNode);\n      } else if (blockNodes[i].tagName === 'LI' && blockNodes[i].childNodes[0].tagName !== 'P' && blockNodes[i].childNodes[0].tagName !== 'OL' && blockNodes[i].childNodes[0].tagName !== 'UL') {\n        nodes.push(blockNodes[i]);\n      }\n    }\n    if (nodes.length > 1 || nodes.length && range.startOffset === 0 && range.endOffset === 0) {\n      this.ensureInsideTableList = true;\n      return true;\n    } else {\n      this.ensureInsideTableList = false;\n      return false;\n    }\n  };\n  Table.prototype.tabSelection = function (event, selection, ele) {\n    this.previousTableElement = ele;\n    var insideList = this.insideList(selection.range);\n    if ((event.keyCode === 37 || event.keyCode === 39) && selection.range.startContainer.nodeType === 3 || insideList) {\n      return;\n    }\n    event.preventDefault();\n    ele.classList.remove(classes.CLS_TABLE_SEL);\n    if (!event.shiftKey && event.keyCode !== 37) {\n      var nextElement = !isNullOrUndefined(ele.nextSibling) ? ele.nextSibling : !isNullOrUndefined(closest(ele, 'tr').nextSibling) ? closest(ele, 'tr').nextSibling.childNodes[0] : !isNullOrUndefined(closest(ele, 'table').nextSibling) ? closest(ele, 'table').nextSibling.nodeName.toLowerCase() === 'td' ? closest(ele, 'table').nextSibling : ele : ele;\n      if (ele === nextElement && ele.nodeName === 'TH') {\n        nextElement = closest(ele, 'table').rows[1].cells[0];\n      }\n      if (event.keyCode === 39 && ele === nextElement) {\n        nextElement = closest(ele, 'table').nextSibling;\n      }\n      if (nextElement) {\n        // eslint-disable-next-line\n        nextElement.textContent.trim() !== '' && closest(nextElement, 'td') ? selection.setSelectionNode(this.contentModule.getDocument(), nextElement) : selection.setSelectionText(this.contentModule.getDocument(), nextElement, nextElement, 0, 0);\n      }\n      if (ele === nextElement && event.keyCode !== 39 && nextElement) {\n        ele.classList.add(classes.CLS_TABLE_SEL);\n        this.addRow(selection, event, true);\n        ele.classList.remove(classes.CLS_TABLE_SEL);\n        nextElement = nextElement.parentElement.nextSibling ? nextElement.parentElement.nextSibling.firstChild : nextElement.parentElement.firstChild;\n        // eslint-disable-next-line\n        nextElement.textContent.trim() !== '' && closest(nextElement, 'td') ? selection.setSelectionNode(this.contentModule.getDocument(), nextElement) : selection.setSelectionText(this.contentModule.getDocument(), nextElement, nextElement, 0, 0);\n      }\n    } else {\n      var prevElement = !isNullOrUndefined(ele.previousSibling) ? ele.previousSibling : !isNullOrUndefined(closest(ele, 'tr').previousSibling) ? closest(ele, 'tr').previousSibling.childNodes[closest(ele, 'tr').previousSibling.childNodes.length - 1] : !isNullOrUndefined(closest(ele, 'table').previousSibling) ? closest(ele, 'table').previousSibling.nodeName.toLowerCase() === 'td' ? closest(ele, 'table').previousSibling : ele : ele;\n      if (ele === prevElement && ele.cellIndex === 0 && closest(ele, 'table').tHead) {\n        var clsTble = closest(ele, 'table');\n        prevElement = clsTble.rows[0].cells[clsTble.rows[0].cells.length - 1];\n      }\n      if (event.keyCode === 37 && ele === prevElement) {\n        prevElement = closest(ele, 'table').previousSibling;\n      }\n      if (prevElement) {\n        // eslint-disable-next-line\n        prevElement.textContent.trim() !== '' && closest(prevElement, 'td') ? selection.setSelectionNode(this.contentModule.getDocument(), prevElement) : selection.setSelectionText(this.contentModule.getDocument(), prevElement, prevElement, 0, 0);\n      }\n    }\n  };\n  Table.prototype.tableArrowNavigation = function (event, selection, ele) {\n    var selText = selection.range.startContainer;\n    if (event.keyCode === 40 && selText.nodeType === 3 && (selText.nextSibling && selText.nextSibling.nodeName === 'BR' || selText.parentNode && selText.parentNode.nodeName !== 'TD') || event.keyCode === 38 && selText.nodeType === 3 && (selText.previousSibling && selText.previousSibling.nodeName === 'BR' || selText.parentNode && selText.parentNode.nodeName !== 'TD')) {\n      return;\n    }\n    event.preventDefault();\n    ele.classList.remove(classes.CLS_TABLE_SEL);\n    if (event.keyCode === 40) {\n      ele = !isNullOrUndefined(closest(ele, 'tr').nextElementSibling) ? closest(ele, 'tr').nextElementSibling.children[ele.cellIndex] : closest(ele, 'table').tHead && ele.nodeName === 'TH' ? closest(ele, 'table').rows[1].cells[ele.cellIndex] : !isNullOrUndefined(closest(ele, 'table').nextSibling) ? closest(ele, 'table').nextSibling : ele;\n    } else {\n      ele = !isNullOrUndefined(closest(ele, 'tr').previousElementSibling) ? closest(ele, 'tr').previousElementSibling.children[ele.cellIndex] : closest(ele, 'table').tHead && ele.nodeName !== 'TH' ? closest(ele, 'table').tHead.rows[0].cells[ele.cellIndex] : !isNullOrUndefined(closest(ele, 'table').previousSibling) ? closest(ele, 'table').previousSibling : ele;\n    }\n    if (ele) {\n      selection.setSelectionText(this.contentModule.getDocument(), ele, ele, 0, 0);\n    }\n  };\n  Table.prototype.setBGColor = function (args) {\n    var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument());\n    // eslint-disable-next-line\n    var selection = this.parent.formatter.editorManager.nodeSelection.save(range, this.contentModule.getDocument());\n    // eslint-disable-next-line\n    var selectedCells = this.curTable.querySelectorAll('.e-cell-select');\n    for (var i = 0; i < selectedCells.length; i++) {\n      selectedCells[i].style.backgroundColor = args.item.value;\n    }\n    this.parent.formatter.saveData();\n  };\n  Table.prototype.hideTableQuickToolbar = function () {\n    if (this.quickToolObj && this.quickToolObj.tableQTBar && document.body.contains(this.quickToolObj.tableQTBar.element)) {\n      this.quickToolObj.tableQTBar.hidePopup();\n    }\n  };\n  Table.prototype.tableHeader = function (selection, e) {\n    this.parent.formatter.process(this.parent, e, e.originalEvent, {\n      selection: selection,\n      subCommand: e.item.subCommand\n    });\n  };\n  Table.prototype.getAnchorNode = function (element) {\n    var selectParent = closest(element, 'a');\n    return selectParent ? selectParent : element;\n  };\n  Table.prototype.editAreaClickHandler = function (e) {\n    if (this.parent.readonly || !isNOU(closest(e.args.target, '.e-img-caption'))) {\n      return;\n    }\n    var args = e.args;\n    var showOnRightClick = this.parent.quickToolbarSettings.showOnRightClick;\n    if (args.which === 2 || showOnRightClick && args.which === 1 || !showOnRightClick && args.which === 3) {\n      return;\n    }\n    if (this.parent.editorMode === 'HTML' && this.parent.quickToolbarModule && this.parent.quickToolbarModule.tableQTBar) {\n      this.quickToolObj = this.parent.quickToolbarModule;\n      var target = args.target;\n      this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n      var isPopupOpen = this.quickToolObj.tableQTBar.element.classList.contains('e-rte-pop');\n      if (isPopupOpen) {\n        return;\n      }\n      var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument());\n      var closestTable = closest(target, 'table');\n      var startNode = this.parent.getRange().startContainer.parentElement;\n      var endNode = this.parent.getRange().endContainer.parentElement;\n      var isAnchorEle = this.getAnchorNode(target);\n      if (target && target.nodeName !== 'A' && isAnchorEle.nodeName !== 'A' && target.nodeName !== 'IMG' && target.nodeName !== 'VIDEO' && !target.classList.contains(classes.CLS_CLICKELEM) && target.nodeName !== 'AUDIO' && startNode === endNode && (target.nodeName === 'TD' || target.nodeName === 'TH' || target.nodeName === 'TABLE' || closestTable && this.parent.contentModule.getEditPanel().contains(closestTable)) && !(range.startContainer.nodeType === 3 && !range.collapsed)) {\n        var range_1 = this.parent.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument());\n        this.parent.formatter.editorManager.nodeSelection.save(range_1, this.contentModule.getDocument());\n        this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument());\n        var pageX = void 0;\n        var pageY = void 0;\n        if (Browser.isDevice && e.args.touches) {\n          pageX = this.parent.iframeSettings.enable ? window.pageXOffset + this.parent.element.getBoundingClientRect().left + e.args.changedTouches[0].clientX : e.args.changedTouches[0].pageX;\n          pageY = this.parent.iframeSettings.enable ? window.pageYOffset + this.parent.element.getBoundingClientRect().top + (!this.parent.inlineMode.enable ? this.parent.toolbarModule.getToolbarHeight() : 0) + e.args.changedTouches[0].clientY : e.args.changedTouches[0].pageY;\n        } else {\n          pageX = this.parent.iframeSettings.enable ? window.pageXOffset + this.parent.element.getBoundingClientRect().left + args.clientX : args.pageX;\n          pageY = this.parent.iframeSettings.enable ? window.pageYOffset + this.parent.element.getBoundingClientRect().top + this.parent.toolbarModule.getToolbarHeight() + args.clientY : args.pageY;\n        }\n        this.quickToolObj.tableQTBar.showPopup(pageX, pageY, target);\n        this.parent.formatter.editorManager.nodeSelection.restore();\n      } else {\n        this.hideTableQuickToolbar();\n      }\n    }\n  };\n  Table.prototype.tableCellSelect = function (e) {\n    var target = e.target;\n    var row = Array.prototype.slice.call(target.parentElement.parentElement.children).indexOf(target.parentElement);\n    var col = Array.prototype.slice.call(target.parentElement.children).indexOf(target);\n    var list = this.dlgDiv.querySelectorAll('.e-rte-tablecell');\n    Array.prototype.forEach.call(list, function (item) {\n      var parentIndex = Array.prototype.slice.call(item.parentElement.parentElement.children).indexOf(item.parentElement);\n      var cellIndex = Array.prototype.slice.call(item.parentElement.children).indexOf(item);\n      removeClass([item], 'e-active');\n      if (parentIndex <= row && cellIndex <= col) {\n        addClass([item], 'e-active');\n      }\n    });\n    this.tblHeader.innerHTML = col + 1 + 'x' + (row + 1);\n  };\n  // eslint-disable-next-line\n  Table.prototype.tableMouseUp = function (e) {\n    EventHandler.remove(this.curTable, 'mousemove', this.tableMove);\n  };\n  // eslint-disable-next-line\n  Table.prototype.tableCellLeave = function (e) {\n    removeClass(this.dlgDiv.querySelectorAll('.e-rte-tablecell'), 'e-active');\n    addClass([this.dlgDiv.querySelector('.e-rte-tablecell')], 'e-active');\n    this.tblHeader.innerHTML = 1 + 'x' + 1;\n  };\n  Table.prototype.tableCellClick = function (e) {\n    var target = e.target;\n    var row = Array.prototype.slice.call(target.parentElement.parentElement.children).indexOf(target.parentElement) + 1;\n    var col = Array.prototype.slice.call(target.parentElement.children).indexOf(target) + 1;\n    this.self.tableInsert(row, col, e, this);\n  };\n  Table.prototype.tableInsert = function (row, col, e, selectionObj) {\n    var proxy = selectionObj.self ? selectionObj.self : this;\n    var startContainer = selectionObj.selection.range.startContainer;\n    if (startContainer.nodeName === 'P' && startContainer.textContent.trim() === '' && !(startContainer.childNodes.length > 0)) {\n      startContainer.innerHTML = '<br />';\n    }\n    var parentNode = startContainer.parentNode;\n    if (proxy.parent.editorMode === 'HTML' && (proxy.parent.iframeSettings.enable && !hasClass(parentNode.ownerDocument.querySelector('body'), 'e-lib') ||\n    // eslint-disable-next-line\n    !proxy.parent.iframeSettings.enable && isNOU(closest(parentNode, '[id=' + \"'\" + proxy.contentModule.getPanel().id + \"'\" + ']')))) {\n      proxy.contentModule.getEditPanel().focus();\n      var range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.contentModule.getDocument());\n      selectionObj.selection = proxy.parent.formatter.editorManager.nodeSelection.save(range, proxy.contentModule.getDocument());\n    }\n    var value = {\n      rows: row,\n      columns: col,\n      width: {\n        minWidth: proxy.parent.tableSettings.minWidth,\n        maxWidth: proxy.parent.tableSettings.maxWidth,\n        width: proxy.parent.tableSettings.width\n      },\n      selection: selectionObj.selection\n    };\n    if (proxy.popupObj) {\n      proxy.popupObj.hide();\n    }\n    if (proxy.editdlgObj) {\n      proxy.editdlgObj.hide();\n    }\n    proxy.parent.formatter.process(proxy.parent, selectionObj.args, selectionObj.args.originalEvent, value);\n    proxy.contentModule.getEditPanel().focus();\n    proxy.parent.on(events.mouseDown, proxy.cellSelect, proxy);\n  };\n  Table.prototype.cellSelect = function (e) {\n    var target = e.args.target;\n    var tdNode = closest(target, 'td,th');\n    target = target.nodeName !== 'TD' && tdNode && this.parent.contentModule.getEditPanel().contains(tdNode) ? tdNode : target;\n    removeClass(this.contentModule.getEditPanel().querySelectorAll('table td, table th'), classes.CLS_TABLE_SEL);\n    if (target && (target.tagName === 'TD' || target.tagName === 'TH')) {\n      addClass([target], classes.CLS_TABLE_SEL);\n      this.activeCell = target;\n      this.curTable = this.curTable ? this.curTable : closest(target, 'table');\n      EventHandler.add(this.curTable, 'mousemove', this.tableMove, this);\n      EventHandler.add(this.curTable, 'mouseup', this.tableMouseUp, this);\n      this.removeResizeElement();\n      if (this.helper && this.contentModule.getEditPanel().contains(this.helper)) {\n        detach(this.helper);\n      }\n    }\n    if (Browser.info.name === 'mozilla' && !isNOU(closest(target, 'table')) && closest(target, 'table').tagName === 'TABLE') {\n      this.parent.contentModule.getEditPanel().setAttribute('contenteditable', 'false');\n    }\n  };\n  Table.prototype.tableMove = function (event) {\n    this.parent.formatter.editorManager.observer.notify('TABLE_MOVE', {\n      event: event,\n      selectNode: [this.activeCell]\n    });\n  };\n  Table.prototype.resizeHelper = function (e) {\n    if (this.parent.readonly) {\n      return;\n    }\n    var target = e.target || e.targetTouches[0].target;\n    var closestTable = closest(target, 'table.e-rte-table, table.e-rte-paste-table');\n    if (!isNOU(this.curTable) && !isNOU(closestTable) && closestTable !== this.curTable && this.parent.contentModule.getEditPanel().contains(closestTable)) {\n      this.removeResizeElement();\n      this.removeHelper(e);\n      this.cancelResizeAction();\n    }\n    if (target.nodeName === 'TABLE' || target.nodeName === 'TD' || target.nodeName === 'TH') {\n      this.curTable = closestTable && this.parent.contentModule.getEditPanel().contains(closestTable) && (target.nodeName === 'TD' || target.nodeName === 'TH') ? closestTable : target;\n      this.removeResizeElement();\n      this.tableResizeEleCreation(this.curTable, e);\n    }\n  };\n  Table.prototype.tableResizeEleCreation = function (table, e) {\n    this.parent.preventDefaultResize(e);\n    var columns = table.rows[this.calMaxCol(table)].cells;\n    var rows = [];\n    for (var i = 0; i < table.rows.length; i++) {\n      for (var j = 0; j < table.rows[i].cells.length; j++) {\n        if (!table.rows[i].cells[j].hasAttribute('rowspan')) {\n          rows.push(Array.prototype.slice.call(table.rows[i].cells, 0, table.rows[i].cells.length)[j]);\n          break;\n        }\n      }\n    }\n    var height = parseInt(getComputedStyle(table).height, 10);\n    var width = parseInt(getComputedStyle(table).width, 10);\n    var pos = this.calcPos(table);\n    for (var i = 0; columns.length >= i; i++) {\n      var colReEle = this.parent.createElement('span', {\n        attrs: {\n          'data-col': i.toString(),\n          'unselectable': 'on',\n          'contenteditable': 'false'\n        }\n      });\n      colReEle.classList.add(classes.CLS_RTE_TABLE_RESIZE, classes.CLS_TB_COL_RES);\n      if (columns.length === i) {\n        colReEle.style.cssText = 'height: ' + height + 'px; width: 4px; top: ' + pos.top + 'px; left:' + (pos.left + this.calcPos(columns[i - 1]).left + columns[i - 1].offsetWidth) + 'px;';\n      } else {\n        colReEle.style.cssText = 'height: ' + height + 'px; width: 4px; top: ' + pos.top + 'px; left:' + (pos.left + this.calcPos(columns[i]).left) + 'px;';\n      }\n      this.contentModule.getEditPanel().appendChild(colReEle);\n    }\n    for (var i = 0; rows.length > i; i++) {\n      var rowReEle = this.parent.createElement('span', {\n        attrs: {\n          'data-row': i.toString(),\n          'unselectable': 'on',\n          'contenteditable': 'false'\n        }\n      });\n      rowReEle.classList.add(classes.CLS_RTE_TABLE_RESIZE, classes.CLS_TB_ROW_RES);\n      var rowPosLeft = !isNOU(table.getAttribute('cellspacing')) || table.getAttribute('cellspacing') !== '' ? 0 : this.calcPos(rows[i]).left;\n      rowReEle.style.cssText = 'width: ' + width + 'px; height: 4px; top: ' + (this.calcPos(rows[i]).top + pos.top + rows[i].offsetHeight - 2) + 'px; left:' + (rowPosLeft + pos.left) + 'px;';\n      this.contentModule.getEditPanel().appendChild(rowReEle);\n    }\n    var tableReBox = this.parent.createElement('span', {\n      className: classes.CLS_TB_BOX_RES + this.parent.getCssClass(true),\n      attrs: {\n        'data-col': columns.length.toString(),\n        'unselectable': 'on',\n        'contenteditable': 'false'\n      }\n    });\n    tableReBox.style.cssText = 'top: ' + (pos.top + height - 4) + 'px; left:' + (pos.left + width - 4) + 'px;';\n    if (Browser.isDevice) {\n      tableReBox.classList.add('e-rmob');\n    }\n    this.contentModule.getEditPanel().appendChild(tableReBox);\n  };\n  Table.prototype.removeResizeElement = function () {\n    var item = this.parent.contentModule.getEditPanel().querySelectorAll('.e-column-resize, .e-row-resize, .e-table-box, .e-table-rhelper');\n    if (item.length > 0) {\n      for (var i = 0; i < item.length; i++) {\n        detach(item[i]);\n      }\n    }\n  };\n  Table.prototype.calcPos = function (elem) {\n    var parentOffset = {\n      top: 0,\n      left: 0\n    };\n    var offset = elem.getBoundingClientRect();\n    var doc = elem.ownerDocument;\n    var offsetParent = elem.offsetParent || doc.documentElement;\n    var isNestedTable = false;\n    while (offsetParent && (offsetParent === doc.body || offsetParent === doc.documentElement) && offsetParent.style.position === 'static') {\n      offsetParent = offsetParent.parentNode;\n    }\n    if (offsetParent.nodeName === 'TD' && elem.nodeName === 'TABLE') {\n      offsetParent = closest(offsetParent, '.e-rte-content');\n      isNestedTable = true;\n    }\n    if (offsetParent && offsetParent !== elem && offsetParent.nodeType === 1) {\n      parentOffset = offsetParent.getBoundingClientRect();\n    }\n    if (isNestedTable) {\n      isNestedTable = false;\n      var topValue = this.parent.inputElement && this.parent.inputElement.scrollTop > 0 ? this.parent.inputElement.scrollTop + offset.top - parentOffset.top : offset.top - parentOffset.top;\n      var leftValue = this.parent.inputElement && this.parent.inputElement.scrollLeft > 0 ? this.parent.inputElement.scrollLeft + offset.left - parentOffset.left : offset.left - parentOffset.left;\n      return {\n        top: topValue,\n        left: leftValue\n      };\n    } else {\n      return {\n        top: elem.offsetTop,\n        left: elem.offsetLeft\n      };\n    }\n  };\n  Table.prototype.getPointX = function (e) {\n    if (e.touches && e.touches.length) {\n      return e.touches[0].pageX;\n    } else {\n      return e.pageX;\n    }\n  };\n  Table.prototype.getPointY = function (e) {\n    if (e.touches && e.touches.length) {\n      return e.touches[0].pageY;\n    } else {\n      return e.pageY;\n    }\n  };\n  Table.prototype.resizeStart = function (e) {\n    var _this = this;\n    if (this.parent.readonly) {\n      return;\n    }\n    if (Browser.isDevice) {\n      this.resizeHelper(e);\n    }\n    var target = e.target;\n    if (target.classList.contains(classes.CLS_TB_COL_RES) || target.classList.contains(classes.CLS_TB_ROW_RES) || target.classList.contains(classes.CLS_TB_BOX_RES)) {\n      e.preventDefault();\n      this.parent.preventDefaultResize(e);\n      removeClass(this.curTable.querySelectorAll('td,th'), classes.CLS_TABLE_SEL);\n      this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument());\n      this.pageX = this.getPointX(e);\n      this.pageY = this.getPointY(e);\n      this.resizeBtnInit();\n      this.hideTableQuickToolbar();\n      if (target.classList.contains(classes.CLS_TB_COL_RES)) {\n        this.resizeBtnStat.column = true;\n        if (parseInt(target.getAttribute('data-col'), 10) === this.curTable.rows[this.calMaxCol(this.curTable)].cells.length) {\n          this.currentColumnResize = 'last';\n          this.columnEle = this.curTable.rows[this.calMaxCol(this.curTable)].cells[parseInt(target.getAttribute('data-col'), 10) - 1];\n        } else {\n          if (parseInt(target.getAttribute('data-col'), 10) === 0) {\n            this.currentColumnResize = 'first';\n          } else {\n            this.currentColumnResize = 'middle';\n          }\n          this.columnEle = this.curTable.rows[this.calMaxCol(this.curTable)].cells[parseInt(target.getAttribute('data-col'), 10)];\n        }\n        this.colIndex = this.columnEle.cellIndex;\n        this.moveEle = e.target;\n        this.appendHelper();\n      }\n      if (target.classList.contains(classes.CLS_TB_ROW_RES)) {\n        this.rowEle = this.curTable.rows[parseInt(target.getAttribute('data-row'), 10)];\n        this.resizeBtnStat.row = true;\n        this.appendHelper();\n      }\n      if (target.classList.contains(classes.CLS_TB_BOX_RES)) {\n        this.resizeBtnStat.tableBox = true;\n      }\n      if (Browser.isDevice && this.helper && !this.helper.classList.contains('e-reicon')) {\n        this.helper.classList.add('e-reicon');\n        EventHandler.add(document, Browser.touchStartEvent, this.removeHelper, this);\n        EventHandler.add(this.helper, Browser.touchStartEvent, this.resizeStart, this);\n      } else {\n        var args = {\n          event: e,\n          requestType: 'Table'\n        };\n        this.parent.trigger(events.resizeStart, args, function (resizeStartArgs) {\n          if (resizeStartArgs.cancel) {\n            _this.cancelResizeAction();\n          }\n        });\n      }\n      EventHandler.add(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing, this);\n      EventHandler.add(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd, this);\n    }\n  };\n  Table.prototype.removeHelper = function (e) {\n    var cls = e.target.classList;\n    if (!cls.contains('e-reicon') && this.helper) {\n      EventHandler.remove(document, Browser.touchStartEvent, this.removeHelper);\n      EventHandler.remove(this.helper, Browser.touchStartEvent, this.resizeStart);\n      if (this.helper && this.contentModule.getEditPanel().contains(this.helper)) {\n        detach(this.helper);\n      }\n      this.pageX = null;\n      this.helper = null;\n    }\n  };\n  Table.prototype.appendHelper = function () {\n    this.helper = this.parent.createElement('div', {\n      className: 'e-table-rhelper' + this.parent.getCssClass(true)\n    });\n    if (Browser.isDevice) {\n      this.helper.classList.add('e-reicon');\n    }\n    this.contentModule.getEditPanel().appendChild(this.helper);\n    this.setHelperHeight();\n  };\n  Table.prototype.setHelperHeight = function () {\n    var pos = this.calcPos(this.curTable);\n    if (this.resizeBtnStat.column) {\n      this.helper.classList.add('e-column-helper');\n      this.helper.style.cssText = 'height: ' + getComputedStyle(this.curTable).height + '; top: ' + pos.top + 'px; left:' + (pos.left + this.calcPos(this.columnEle).left + (this.currentColumnResize === 'last' ? this.columnEle.offsetWidth + 2 : 0) - 1) + 'px;';\n    } else {\n      this.helper.classList.add('e-row-helper');\n      this.helper.style.cssText = 'width: ' + getComputedStyle(this.curTable).width + '; top: ' + (this.calcPos(this.rowEle).top + pos.top + this.rowEle.offsetHeight) + 'px; left:' + (this.calcPos(this.rowEle).left + pos.left) + 'px;';\n    }\n  };\n  Table.prototype.updateHelper = function () {\n    var pos = this.calcPos(this.curTable);\n    if (this.resizeBtnStat.column) {\n      var left = pos.left + this.calcPos(this.columnEle).left + (this.currentColumnResize === 'last' ? this.columnEle.offsetWidth + 2 : 0) - 1;\n      this.helper.style.left = left + 'px';\n    } else {\n      var top_1 = this.calcPos(this.rowEle).top + pos.top + this.rowEle.offsetHeight;\n      this.helper.style.top = top_1 + 'px';\n    }\n  };\n  Table.prototype.calMaxCol = function (element) {\n    var max = 0;\n    var maxRowIndex;\n    for (var i = 0; i < element.rows.length; i++) {\n      if (max < element.rows[i].cells.length) {\n        maxRowIndex = i;\n        max = element.rows[i].cells.length;\n      }\n    }\n    return maxRowIndex;\n  };\n  Table.prototype.resizing = function (e) {\n    var _this = this;\n    var pageX = this.getPointX(e);\n    var pageY = this.getPointY(e);\n    var mouseX = this.parent.enableRtl ? -(pageX - this.pageX) : pageX - this.pageX;\n    var mouseY = this.parent.enableRtl ? -(pageY - this.pageY) : pageY - this.pageY;\n    this.pageX = pageX;\n    this.pageY = pageY;\n    var maxiumWidth;\n    var currentTdElement = this.curTable.closest('td');\n    var args = {\n      event: e,\n      requestType: 'table'\n    };\n    var isRowCellsMerged = false;\n    var isColCellsMerged = false;\n    var mergedCellIndex;\n    var mergedElement;\n    this.parent.trigger(events.onResize, args, function (resizingArgs) {\n      if (resizingArgs.cancel) {\n        _this.cancelResizeAction();\n      } else {\n        var tableReBox = _this.contentModule.getEditPanel().querySelector('.e-table-box');\n        var tableWidth = parseInt(getComputedStyle(_this.curTable).width, 10);\n        var tableHeight = parseInt(getComputedStyle(_this.curTable).height, 10);\n        var paddingSize = +getComputedStyle(_this.contentModule.getEditPanel()).paddingRight.match(/\\d/g).join('');\n        var rteWidth = _this.contentModule.getEditPanel().offsetWidth - (_this.contentModule.getEditPanel().offsetWidth - _this.contentModule.getEditPanel().clientWidth) - paddingSize * 2;\n        var widthCompare = void 0;\n        if (!isNOU(_this.curTable.parentElement.closest('table')) && !isNOU(_this.curTable.closest('td')) && _this.contentModule.getEditPanel().contains(_this.curTable.closest('td'))) {\n          var currentTd = _this.curTable.closest('td');\n          var currentTDPad = +getComputedStyle(currentTd).paddingRight.match(/\\d/g).join('');\n          // Padding of the current table with the parent element multiply with 2.\n          widthCompare = currentTd.offsetWidth - (currentTd.offsetWidth - currentTd.clientWidth) - currentTDPad * 2;\n        } else {\n          widthCompare = rteWidth;\n        }\n        if (_this.resizeBtnStat.column) {\n          var width = parseFloat(_this.columnEle.offsetWidth.toString());\n          var cellRow = _this.curTable.rows[0].cells[0].nodeName === 'TH' ? 1 : 0;\n          var currentTableWidth = void 0;\n          if (_this.curTable.style.width !== '' && _this.curTable.style.width.includes('%')) {\n            currentTableWidth = parseFloat(_this.curTable.style.width.split('%')[0]);\n          } else {\n            currentTableWidth = _this.getCurrentTableWidth(_this.curTable.offsetWidth, _this.parent.inputElement.offsetWidth);\n          }\n          var currentColumnCellWidth = parseFloat(_this.curTable.rows[cellRow].cells[_this.colIndex >= _this.curTable.rows[cellRow].cells.length ? _this.curTable.rows[cellRow].cells.length - 1 : _this.colIndex].style.width.split('%')[0]);\n          if (_this.currentColumnResize === 'first') {\n            mouseX = mouseX - 0.75; //This was done for to make the gripper and the table first/last column will be close.\n            _this.removeResizeElement();\n            if (currentTdElement) {\n              maxiumWidth = _this.curTable.getBoundingClientRect().right - _this.calcPos(currentTdElement).left;\n              _this.curTable.style.maxWidth = maxiumWidth + 'px';\n            }\n            // Below the value '100' is the 100% width of the parent element.\n            if ((mouseX !== 0 && 5 < currentColumnCellWidth || mouseX < 0) && currentTableWidth <= 100 && _this.convertPixelToPercentage(tableWidth - mouseX, widthCompare) <= 100) {\n              var firstColumnsCell = _this.findFirstLastColCells(_this.curTable, true);\n              _this.curTable.style.width = _this.convertPixelToPercentage(tableWidth - mouseX, widthCompare) > 100 ? 100 + '%' : _this.convertPixelToPercentage(tableWidth - mouseX, widthCompare) + '%';\n              var differenceWidth = currentTableWidth - _this.convertPixelToPercentage(tableWidth - mouseX, widthCompare);\n              _this.currentMarginLeft = _this.currentMarginLeft + differenceWidth;\n              _this.curTable.style.marginLeft = 'calc(' + (_this.curTable.style.width === '100%' ? 0 : _this.currentMarginLeft) + '%)';\n              for (var i = 0; i < firstColumnsCell.length; i++) {\n                _this.curTable.rows[i].cells[_this.colIndex].style.width = currentColumnCellWidth - differenceWidth + '%';\n              }\n            }\n          } else if (_this.currentColumnResize === 'last') {\n            mouseX = mouseX + 0.75; //This was done for to make the gripper and the table first/last column will be close.\n            _this.removeResizeElement();\n            if (currentTdElement) {\n              maxiumWidth = currentTdElement.getBoundingClientRect().right - _this.curTable.getBoundingClientRect().left;\n              _this.curTable.style.maxWidth = maxiumWidth + 'px';\n            }\n            // Below the value '100' is the 100% width of the parent element.\n            if ((mouseX !== 0 && 5 < currentColumnCellWidth || mouseX > 0) && currentTableWidth <= 100 && _this.convertPixelToPercentage(tableWidth + mouseX, widthCompare) <= 100) {\n              var lastColumnsCell = _this.findFirstLastColCells(_this.curTable, false);\n              _this.curTable.style.width = _this.convertPixelToPercentage(tableWidth + mouseX, widthCompare) > 100 ? 100 + '%' : _this.convertPixelToPercentage(tableWidth + mouseX, widthCompare) + '%';\n              var differenceWidth = currentTableWidth - _this.convertPixelToPercentage(tableWidth + mouseX, widthCompare);\n              for (var i = 0; i < lastColumnsCell.length; i++) {\n                if (_this.curTable.rows[i].cells[_this.colIndex]) {\n                  _this.curTable.rows[i].cells[_this.curTable.rows[i].cells.length === _this.colIndex ? _this.colIndex - 1 : _this.colIndex].style.width = currentColumnCellWidth - differenceWidth + '%';\n                }\n              }\n            }\n          } else {\n            var cellColl = _this.curTable.rows[_this.calMaxCol(_this.curTable)].cells;\n            var actualwid = width - mouseX;\n            var totalwid = parseFloat(_this.columnEle.offsetWidth.toString()) + parseFloat(cellColl[_this.colIndex - 1].offsetWidth.toString());\n            for (var i = 0; i < _this.curTable.rows.length; i++) {\n              var currentRow = _this.curTable.rows[i];\n              if (totalwid - actualwid > 20 && actualwid > 20) {\n                var leftColumnWidth = totalwid - actualwid;\n                var rightColWidth = actualwid;\n                var index = void 0;\n                var isMergedEleResize = false;\n                var leftTableCell = void 0;\n                var rightTableCell = void 0;\n                isColCellsMerged = false;\n                isRowCellsMerged = false;\n                /* eslint-disable */\n                for (var j = 0; j < currentRow.cells.length; j++) {\n                  if (currentRow.cells[j].hasAttribute('rowspan') && j <= _this.colIndex) {\n                    isRowCellsMerged = true;\n                    mergedCellIndex = i;\n                    mergedElement = currentRow.cells[j];\n                  } else if (currentRow.cells[j].hasAttribute('colspan') && j <= currentRow.cells.length) {\n                    isColCellsMerged = true;\n                    mergedCellIndex = i;\n                    mergedElement = currentRow.cells[j];\n                  }\n                }\n                if (!isNOU(currentRow.cells[i]) && currentRow.cells[i].hasAttribute('colspan')) {\n                  index = parseInt(currentRow.cells[i].getAttribute('colspan'), 10) - 1;\n                } else {\n                  index = _this.colIndex;\n                }\n                if (isRowCellsMerged || isColCellsMerged) {\n                  var currentResizeRow = void 0;\n                  if (currentRow.cells.length < cellColl.length) {\n                    index = currentRow.cells.length === _this.colIndex || currentRow === _this.curTable.rows[_this.curTable.rows.length - 1] ? _this.colIndex - 1 : _this.colIndex;\n                    currentResizeRow = _this.curTable.rows[!isNullOrUndefined(mergedCellIndex) ? mergedCellIndex : _this.colIndex - 1];\n                    if (currentResizeRow && currentResizeRow !== currentRow && (currentResizeRow.cells[_this.colIndex - 1] === mergedElement || currentResizeRow.cells[currentResizeRow.cells.length - 1] === mergedElement)) {\n                      isMergedEleResize = true;\n                    } else {\n                      isMergedEleResize = false;\n                    }\n                  } else {\n                    index = _this.colIndex;\n                  }\n                  leftTableCell = !isMergedEleResize ? currentRow.cells[index - 1] : currentResizeRow && currentResizeRow.cells[currentResizeRow.cells.length - 1] !== mergedElement ? currentResizeRow.cells[_this.colIndex - 1] : currentRow.cells[currentRow.cells.length - 1];\n                  rightTableCell = !isMergedEleResize ? currentRow.cells[index] : rightTableCell && rightTableCell.hasAttribute('rowspan') ? currentResizeRow.cells[_this.colIndex] : currentResizeRow && currentResizeRow.cells[currentResizeRow.cells.length - 1] !== mergedElement ? currentRow.cells[index - 1] : currentResizeRow.cells[currentResizeRow.cells.length - 1];\n                }\n                if (!isNOU(currentRow.cells[index - 1]) && !isRowCellsMerged && !isColCellsMerged) {\n                  currentRow.cells[index - 1].style.width = _this.convertPixelToPercentage(leftColumnWidth, tableWidth) + '%';\n                } else {\n                  if (leftTableCell) {\n                    leftTableCell.style.width = _this.convertPixelToPercentage(leftColumnWidth, tableWidth) + '%';\n                  }\n                }\n                if (!isNOU(currentRow.cells[index]) && !isRowCellsMerged && !isColCellsMerged) {\n                  currentRow.cells[index].style.width = _this.convertPixelToPercentage(rightColWidth, tableWidth) + '%';\n                } else {\n                  if (rightTableCell) {\n                    rightTableCell.style.width = _this.convertPixelToPercentage(rightColWidth, tableWidth) + '%';\n                  }\n                }\n                /* eslint-enable */\n              }\n            }\n          }\n          _this.updateHelper();\n        } else if (_this.resizeBtnStat.row) {\n          _this.parent.preventDefaultResize(e);\n          var height = parseFloat(_this.rowEle.clientHeight.toString()) + mouseY;\n          if (height > 20) {\n            _this.rowEle.style.height = height + 'px';\n          }\n          _this.curTable.style.height = '';\n          if (!isNOU(tableReBox)) {\n            tableReBox.style.cssText = 'top: ' + (_this.calcPos(_this.curTable).top + tableHeight - 4) + 'px; left:' + (_this.calcPos(_this.curTable).left + tableWidth - 4) + 'px;';\n          }\n          _this.updateHelper();\n        } else if (_this.resizeBtnStat.tableBox) {\n          if (currentTdElement) {\n            var tableBoxPosition = _this.curTable.getBoundingClientRect().left - currentTdElement.getBoundingClientRect().left;\n            maxiumWidth = Math.abs(tableBoxPosition - currentTdElement.getBoundingClientRect().width) - 5;\n            _this.curTable.style.maxWidth = maxiumWidth + 'px';\n          }\n          var widthType = _this.curTable.style.width.indexOf('%') > -1;\n          _this.curTable.style.width = widthType ? _this.convertPixelToPercentage(tableWidth + mouseX, widthCompare) + '%' : tableWidth + mouseX + 'px';\n          _this.curTable.style.height = tableHeight + mouseY + 'px';\n          if (!isNOU(tableReBox)) {\n            tableReBox.classList.add('e-rbox-select');\n            tableReBox.style.cssText = 'top: ' + (_this.calcPos(_this.curTable).top + tableHeight - 4) + 'px; left:' + (_this.calcPos(_this.curTable).left + tableWidth - 4) + 'px;';\n          }\n        }\n      }\n    });\n  };\n  Table.prototype.getCurrentTableWidth = function (tableWidth, parentWidth) {\n    var currentTableWidth = 0;\n    currentTableWidth = tableWidth / parentWidth * 100;\n    return currentTableWidth;\n  };\n  Table.prototype.findFirstLastColCells = function (table, isFirst) {\n    var resultColumns = [];\n    var rows = table.querySelectorAll('tr');\n    for (var i = 0; i < rows.length; i++) {\n      if (rows[i].closest('table') === table) {\n        var columns = rows[i].querySelectorAll('th, td');\n        resultColumns.push(isFirst ? columns[0] : columns[columns.length - 1]);\n      }\n    }\n    return resultColumns;\n  };\n  Table.prototype.convertPixelToPercentage = function (value, offsetValue) {\n    return value / offsetValue * 100;\n  };\n  Table.prototype.cancelResizeAction = function () {\n    EventHandler.remove(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing);\n    EventHandler.remove(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd);\n    this.removeResizeElement();\n  };\n  Table.prototype.resizeEnd = function (e) {\n    this.resizeBtnInit();\n    EventHandler.remove(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing);\n    EventHandler.remove(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd);\n    if (this.contentModule.getEditPanel().querySelector('.e-table-box') && this.contentModule.getEditPanel().contains(this.contentModule.getEditPanel().querySelector('.e-table-box'))) {\n      this.removeResizeElement();\n    }\n    if (this.helper && this.contentModule.getEditPanel().contains(this.helper)) {\n      detach(this.helper);\n      this.helper = null;\n    }\n    this.pageX = null;\n    this.pageY = null;\n    this.moveEle = null;\n    var args = {\n      event: e,\n      requestType: 'table'\n    };\n    this.parent.trigger(events.resizeStop, args);\n    this.parent.formatter.saveData();\n  };\n  Table.prototype.resizeBtnInit = function () {\n    return this.resizeBtnStat = {\n      column: false,\n      row: false,\n      tableBox: false\n    };\n  };\n  Table.prototype.addRow = function (selectCell, e, tabkey) {\n    var cmd;\n    if (tabkey) {\n      cmd = {\n        item: {\n          command: 'Table',\n          subCommand: 'InsertRowAfter'\n        }\n      };\n    }\n    var value = {\n      selection: selectCell,\n      subCommand: tabkey ? cmd.item.subCommand : e.item.subCommand\n    };\n    this.parent.formatter.process(this.parent, tabkey ? cmd : e, e, value);\n  };\n  Table.prototype.addColumn = function (selectCell, e) {\n    this.parent.formatter.process(this.parent, e, e, {\n      selection: selectCell,\n      width: this.parent.tableSettings.width,\n      subCommand: e.item.subCommand\n    });\n  };\n  Table.prototype.removeRowColumn = function (selectCell, e) {\n    this.parent.formatter.process(this.parent, e, e, {\n      selection: selectCell,\n      subCommand: e.item.subCommand\n    });\n    this.hideTableQuickToolbar();\n  };\n  Table.prototype.removeTable = function (selection, args, delKey) {\n    var cmd;\n    if (delKey) {\n      cmd = {\n        item: {\n          command: 'Table',\n          subCommand: 'TableRemove'\n        }\n      };\n    }\n    var value = {\n      selection: selection,\n      subCommand: delKey ? cmd.item.subCommand : args.item.subCommand\n    };\n    this.parent.formatter.process(this.parent, delKey ? cmd : args, args.originalEvent, value);\n    this.contentModule.getEditPanel().focus();\n    if (this.parent.inputElement.innerHTML === null || this.parent.inputElement.innerHTML === '') {\n      if (this.parent.enterKey === 'DIV') {\n        this.contentModule.getEditPanel().innerHTML = '<div><br/></div>';\n      } else if (this.parent.enterKey === 'BR') {\n        this.contentModule.getEditPanel().innerHTML = '<br/>';\n      } else {\n        this.contentModule.getEditPanel().innerHTML = '<p><br/></p>';\n      }\n    }\n    this.removeResizeElement();\n    this.hideTableQuickToolbar();\n  };\n  Table.prototype.renderDlgContent = function (args) {\n    var _this = this;\n    var argsTarget = args.args.originalEvent.target;\n    if (Browser.isDevice || this.parent.inlineMode.enable || !isNullOrUndefined(closest(argsTarget, '.e-rte-text-popup'))) {\n      this.insertTableDialog(args);\n      return;\n    }\n    if (this.popupObj) {\n      this.popupObj.hide();\n      return;\n    }\n    this.hideTableQuickToolbar();\n    var header = '1X1';\n    var insertbtn = this.l10n.getConstant('inserttablebtn');\n    this.dlgDiv = this.parent.createElement('div', {\n      className: 'e-rte-table-popup' + this.parent.getCssClass(true),\n      id: this.rteID + '_table'\n    });\n    this.tblHeader = this.parent.createElement('div', {\n      className: 'e-rte-popup-header' + this.parent.getCssClass(true)\n    });\n    this.tblHeader.innerHTML = header;\n    this.dlgDiv.appendChild(this.tblHeader);\n    var tableDiv = this.parent.createElement('div', {\n      className: 'e-rte-table-span' + this.parent.getCssClass(true)\n    });\n    this.drawTable(tableDiv, args);\n    this.dlgDiv.appendChild(tableDiv);\n    this.dlgDiv.appendChild(this.parent.createElement('span', {\n      className: 'e-span-border' + this.parent.getCssClass(true)\n    }));\n    var btnEle = this.parent.createElement('button', {\n      className: 'e-insert-table-btn' + this.parent.getCssClass(true),\n      id: this.rteID + '_insertTable',\n      attrs: {\n        type: 'button',\n        tabindex: '0'\n      }\n    });\n    if (!isNOU(this.parent.getToolbarElement().querySelector('.e-expended-nav'))) {\n      this.parent.getToolbarElement().querySelector('.e-expended-nav').setAttribute('tabindex', '1');\n    }\n    this.dlgDiv.appendChild(btnEle);\n    this.createTableButton = new Button({\n      iconCss: 'e-icons e-create-table',\n      content: insertbtn,\n      cssClass: 'e-flat' + this.parent.getCssClass(true),\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale\n    });\n    this.createTableButton.isStringTemplate = true;\n    this.createTableButton.appendTo(btnEle);\n    EventHandler.add(btnEle, 'click', this.insertTableDialog, {\n      self: this,\n      args: args.args,\n      selection: args.selection\n    });\n    this.parent.getToolbar().appendChild(this.dlgDiv);\n    var target = args.args.originalEvent.target;\n    target = target.classList.contains('e-toolbar-item') ? target.firstChild : target.parentElement;\n    this.popupObj = new Popup(this.dlgDiv, {\n      targetType: 'relative',\n      relateTo: target,\n      collision: {\n        X: 'fit',\n        Y: 'none'\n      },\n      offsetY: 8,\n      viewPortElement: this.parent.element,\n      position: {\n        X: 'left',\n        Y: 'bottom'\n      },\n      enableRtl: this.parent.enableRtl,\n      zIndex: 10001,\n      // eslint-disable-next-line\n      close: function (event) {\n        _this.parent.isBlur = false;\n        _this.popupObj.destroy();\n        detach(_this.popupObj.element);\n        _this.popupObj = null;\n      }\n    });\n    addClass([this.popupObj.element], 'e-popup-open');\n    if (!isNOU(this.parent.cssClass)) {\n      addClass([this.popupObj.element], this.parent.getCssClass());\n    }\n    this.popupObj.refreshPosition(target);\n  };\n  Table.prototype.onIframeMouseDown = function () {\n    if (this.popupObj) {\n      this.popupObj.hide();\n    }\n  };\n  Table.prototype.docClick = function (e) {\n    var target = e.args.target;\n    // eslint-disable-next-line\n    if (target && target.classList && (this.popupObj && !closest(target, '[id=' + \"'\" + this.popupObj.element.id + \"'\" + ']') || this.editdlgObj && !closest(target, '#' + this.editdlgObj.element.id)) && !target.classList.contains('e-create-table') && target.offsetParent && !target.offsetParent.classList.contains('e-rte-backgroundcolor-dropdown')) {\n      if (this.popupObj) {\n        this.popupObj.hide();\n      }\n      if (this.editdlgObj) {\n        this.parent.notify(events.documentClickClosedBy, {\n          closedBy: \"outside click\"\n        });\n        this.editdlgObj.hide();\n      }\n      this.parent.isBlur = true;\n      dispatchEvent(this.parent.element, 'focusout');\n    }\n    var closestEle = closest(target, 'td');\n    var isExist = closestEle && this.parent.contentModule.getEditPanel().contains(closestEle) ? true : false;\n    if (target && target.tagName !== 'TD' && target.tagName !== 'TH' && !isExist && closest(target, '.e-rte-quick-popup') === null && target.offsetParent && !target.offsetParent.classList.contains('e-quick-dropdown') && !target.offsetParent.classList.contains('e-rte-backgroundcolor-dropdown') && !closest(target, '.e-rte-dropdown-popup') && !closest(target, '.e-rte-elements')) {\n      removeClass(this.parent.inputElement.querySelectorAll('table td'), classes.CLS_TABLE_SEL);\n      if (!Browser.isIE) {\n        this.hideTableQuickToolbar();\n      }\n    }\n    if (target && target.classList && !target.classList.contains(classes.CLS_TB_COL_RES) && !target.classList.contains(classes.CLS_TB_ROW_RES) && !target.classList.contains(classes.CLS_TB_BOX_RES)) {\n      this.removeResizeElement();\n    }\n  };\n  Table.prototype.drawTable = function (tableDiv, args) {\n    var rowDiv;\n    var tableCell;\n    for (var row = 0; row < 3; row++) {\n      rowDiv = this.parent.createElement('div', {\n        className: 'e-rte-table-row' + this.parent.getCssClass(true),\n        attrs: {\n          'data-column': '' + row\n        }\n      });\n      for (var col = 0; col < 10; col++) {\n        var display = row > 2 ? 'none' : 'inline-block';\n        tableCell = this.parent.createElement('div', {\n          className: 'e-rte-tablecell e-default' + this.parent.getCssClass(true),\n          attrs: {\n            'data-cell': '' + col\n          }\n        });\n        rowDiv.appendChild(tableCell);\n        tableCell.style.display = display;\n        if (col === 0 && row === 0) {\n          addClass([tableCell], 'e-active');\n        }\n        EventHandler.add(tableCell, 'mousemove', this.tableCellSelect, this);\n        EventHandler.add(rowDiv, 'mouseleave', this.tableCellLeave, this);\n        EventHandler.add(tableCell, 'mouseup', this.tableCellClick, {\n          self: this,\n          args: args.args,\n          selection: args.selection\n        });\n      }\n      tableDiv.appendChild(rowDiv);\n    }\n  };\n  Table.prototype.editTable = function (args) {\n    var _this = this;\n    this.createDialog(args);\n    var editContent = this.tableDlgContent(args);\n    var update = this.l10n.getConstant('dialogUpdate');\n    var cancel = this.l10n.getConstant('dialogCancel');\n    var editHeader = this.l10n.getConstant('tableEditHeader');\n    this.editdlgObj.setProperties({\n      height: 'initial',\n      width: '290px',\n      content: editContent,\n      header: editHeader,\n      buttons: [{\n        click: this.applyProperties.bind(this, args),\n        buttonModel: {\n          content: update,\n          cssClass: 'e-flat e-size-update' + this.parent.getCssClass(true),\n          isPrimary: true\n        }\n      }, {\n        click: function (e) {\n          _this.cancelDialog(e);\n        },\n        buttonModel: {\n          cssClass: 'e-flat e-cancel' + this.parent.getCssClass(true),\n          content: cancel\n        }\n      }],\n      cssClass: this.editdlgObj.cssClass + ' e-rte-edit-table-prop-dialog'\n    });\n    this.editdlgObj.element.style.maxHeight = 'none';\n    this.editdlgObj.content.querySelector('input').focus();\n    this.hideTableQuickToolbar();\n  };\n  Table.prototype.insertTableDialog = function (args) {\n    var proxy = this.self ? this.self : this;\n    if (proxy.popupObj) {\n      proxy.popupObj.hide();\n    }\n    proxy.createDialog(args);\n    var dlgContent = proxy.tableCellDlgContent();\n    var insert = proxy.l10n.getConstant('dialogInsert');\n    var cancel = proxy.l10n.getConstant('dialogCancel');\n    if (isNullOrUndefined(proxy.editdlgObj)) {\n      return;\n    }\n    proxy.editdlgObj.setProperties({\n      height: 'initial',\n      width: '290px',\n      content: dlgContent,\n      buttons: [{\n        click: proxy.customTable.bind(this, args),\n        buttonModel: {\n          content: insert,\n          cssClass: 'e-flat e-insert-table' + ' ' + proxy.parent.cssClass,\n          isPrimary: true\n        }\n      }, {\n        click: function (e) {\n          proxy.cancelDialog(e);\n        },\n        buttonModel: {\n          cssClass: 'e-flat e-cancel' + ' ' + proxy.parent.cssClass,\n          content: cancel\n        }\n      }]\n    });\n    if (!isNOU(proxy.parent.cssClass)) {\n      proxy.editdlgObj.setProperties({\n        cssClass: proxy.parent.cssClass\n      });\n    }\n    proxy.editdlgObj.element.style.maxHeight = 'none';\n    proxy.editdlgObj.content.querySelector('input').focus();\n  };\n  Table.prototype.tableCellDlgContent = function () {\n    var tableColumn = this.l10n.getConstant('columns');\n    var tableRow = this.l10n.getConstant('rows');\n    var tableWrap = this.parent.createElement('div', {\n      className: 'e-cell-wrap' + this.parent.getCssClass(true)\n    });\n    var content = '<div class=\"e-rte-field' + this.parent.getCssClass(true) + '\"><input type=\"text\" ' + ' data-role =\"none\" id=\"tableColumn\" class=\"e-table-column' + this.parent.getCssClass(true) + '\"/></div>' + '<div class=\"e-rte-field' + this.parent.getCssClass(true) + '\"><input type=\"text\" data-role =\"none\" id=\"tableRow\" class=\"e-table-row' + this.parent.getCssClass(true) + '\" /></div>';\n    var contentElem = parseHtml(content);\n    tableWrap.appendChild(contentElem);\n    this.columnTextBox = new NumericTextBox({\n      format: 'n0',\n      min: 1,\n      value: 3,\n      placeholder: tableColumn,\n      floatLabelType: 'Auto',\n      max: 50,\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale,\n      cssClass: this.parent.getCssClass()\n    });\n    this.columnTextBox.isStringTemplate = true;\n    this.columnTextBox.appendTo(tableWrap.querySelector('#tableColumn'));\n    this.rowTextBox = new NumericTextBox({\n      format: 'n0',\n      min: 1,\n      value: 3,\n      placeholder: tableRow,\n      floatLabelType: 'Auto',\n      max: 1000,\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale,\n      cssClass: this.parent.getCssClass()\n    });\n    this.rowTextBox.isStringTemplate = true;\n    this.rowTextBox.appendTo(tableWrap.querySelector('#tableRow'));\n    return tableWrap;\n  };\n  Table.prototype.clearDialogObj = function () {\n    if (this.editdlgObj) {\n      this.editdlgObj.destroy();\n      detach(this.editdlgObj.element);\n      this.editdlgObj = null;\n    }\n  };\n  // eslint-disable-next-line\n  Table.prototype.createDialog = function (args) {\n    var _this = this;\n    if (this.editdlgObj) {\n      this.editdlgObj.hide({\n        returnValue: true\n      });\n      return;\n    }\n    var tableDialog = this.parent.createElement('div', {\n      className: 'e-rte-edit-table' + this.parent.getCssClass(true),\n      id: this.rteID + '_tabledialog'\n    });\n    this.parent.element.appendChild(tableDialog);\n    var insert = this.l10n.getConstant('dialogInsert');\n    var cancel = this.l10n.getConstant('dialogCancel');\n    var header = this.l10n.getConstant('tabledialogHeader');\n    var dialogModel = {\n      header: header,\n      cssClass: classes.CLS_RTE_ELEMENTS + this.parent.getCssClass(true),\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale,\n      showCloseIcon: true,\n      closeOnEscape: true,\n      width: Browser.isDevice ? '290px' : '340px',\n      height: 'initial',\n      position: {\n        X: 'center',\n        Y: Browser.isDevice ? 'center' : 'top'\n      },\n      isModal: Browser.isDevice,\n      buttons: [{\n        buttonModel: {\n          content: insert,\n          cssClass: 'e-flat e-insert-table' + this.parent.getCssClass(true),\n          isPrimary: true\n        }\n      }, {\n        click: function (e) {\n          _this.cancelDialog(e);\n        },\n        buttonModel: {\n          cssClass: 'e-flat e-cancel' + this.parent.getCssClass(true),\n          content: cancel\n        }\n      }],\n      target: Browser.isDevice ? document.body : this.parent.element,\n      animationSettings: {\n        effect: 'None'\n      },\n      close: function (event) {\n        _this.parent.isBlur = false;\n        _this.editdlgObj.destroy();\n        detach(_this.editdlgObj.element);\n        _this.dialogRenderObj.close(event);\n        _this.editdlgObj = null;\n      }\n    };\n    this.editdlgObj = this.dialogRenderObj.render(dialogModel);\n    this.editdlgObj.appendTo(tableDialog);\n    if (this.quickToolObj && this.quickToolObj.inlineQTBar && document.body.contains(this.quickToolObj.inlineQTBar.element)) {\n      this.quickToolObj.inlineQTBar.hidePopup();\n    }\n    if (this.quickToolObj && this.quickToolObj.textQTBar && this.parent.element.ownerDocument.body.contains(this.quickToolObj.textQTBar.element)) {\n      this.quickToolObj.textQTBar.hidePopup();\n    }\n  };\n  Table.prototype.customTable = function (args, e) {\n    var proxy = this.self ? this.self : this;\n    if (proxy.rowTextBox.value && proxy.columnTextBox.value) {\n      var argument = Browser.isDevice || !isNullOrUndefined(args.args) && !isNullOrUndefined(args.args.originalEvent) && args.args.originalEvent.action === 'insert-table' || proxy.parent.inlineMode.enable || !isNullOrUndefined(proxy.parent.quickToolbarSettings.text) ? args : this;\n      proxy.tableInsert(proxy.rowTextBox.value, proxy.columnTextBox.value, e, argument);\n    }\n  };\n  // eslint-disable-next-line\n  Table.prototype.cancelDialog = function (e) {\n    this.parent.isBlur = false;\n    this.editdlgObj.hide({\n      returnValue: true\n    });\n  };\n  // eslint-disable-next-line\n  Table.prototype.applyProperties = function (args, e) {\n    var dialogEle = this.editdlgObj.element;\n    var table = closest(args.selectNode[0], 'table');\n    table.style.width = dialogEle.querySelector('.e-table-width').value + 'px';\n    if (dialogEle.querySelector('.e-cell-padding').value !== '') {\n      var tdElm = table.querySelectorAll('td');\n      for (var i = 0; i < tdElm.length; i++) {\n        var padVal = '';\n        if (tdElm[i].style.padding === '') {\n          padVal = tdElm[i].getAttribute('style') + ' padding:' + dialogEle.querySelector('.e-cell-padding').value + 'px;';\n        } else {\n          tdElm[i].style.padding = dialogEle.querySelector('.e-cell-padding').value + 'px';\n          padVal = tdElm[i].getAttribute('style');\n        }\n        tdElm[i].setAttribute('style', padVal);\n      }\n    }\n    table.cellSpacing = dialogEle.querySelector('.e-cell-spacing').value;\n    if (!isNOU(table.cellSpacing) || table.cellSpacing !== '0') {\n      addClass([table], classes.CLS_TABLE_BORDER);\n    } else {\n      removeClass([table], classes.CLS_TABLE_BORDER);\n    }\n    this.parent.formatter.saveData();\n    this.editdlgObj.hide({\n      returnValue: true\n    });\n  };\n  Table.prototype.tableDlgContent = function (e) {\n    var selectNode = e.selectParent[0];\n    var tableWidth = this.l10n.getConstant('tableWidth');\n    var cellPadding = this.l10n.getConstant('cellpadding');\n    var cellSpacing = this.l10n.getConstant('cellspacing');\n    var tableWrap = this.parent.createElement('div', {\n      className: 'e-table-sizewrap' + this.parent.getCssClass(true)\n    });\n    var widthVal = closest(selectNode, 'table').getClientRects()[0].width;\n    var padVal = closest(selectNode, 'td').style.padding;\n    var brdSpcVal = closest(selectNode, 'table').getAttribute('cellspacing');\n    var content = '<div class=\"e-rte-field' + this.parent.getCssClass(true) + '\"><input type=\"text\" data-role =\"none\" id=\"tableWidth\" class=\"e-table-width' + this.parent.getCssClass(true) + '\" ' + ' /></div>' + '<div class=\"e-rte-field' + this.parent.getCssClass(true) + '\"><input type=\"text\" data-role =\"none\" id=\"cellPadding\" class=\"e-cell-padding' + this.parent.getCssClass(true) + '\" />' + ' </div><div class=\"e-rte-field' + this.parent.getCssClass(true) + '\"><input type=\"text\" data-role =\"none\" id=\"cellSpacing\" class=\"e-cell-spacing' + this.parent.getCssClass(true) + '\" /></div>';\n    var contentElem = parseHtml(content);\n    tableWrap.appendChild(contentElem);\n    this.tableWidthNum = new NumericTextBox({\n      format: 'n0',\n      min: 0,\n      value: widthVal,\n      placeholder: tableWidth,\n      floatLabelType: 'Auto',\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale\n    });\n    this.tableWidthNum.isStringTemplate = true;\n    this.tableWidthNum.appendTo(tableWrap.querySelector('#tableWidth'));\n    this.tableCellPadding = new NumericTextBox({\n      format: 'n0',\n      min: 0,\n      // eslint-disable-next-line\n      value: padVal !== '' ? parseInt(padVal, null) : 0,\n      placeholder: cellPadding,\n      floatLabelType: 'Auto',\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale\n    });\n    this.tableCellPadding.isStringTemplate = true;\n    this.tableCellPadding.appendTo(tableWrap.querySelector('#cellPadding'));\n    this.tableCellSpacing = new NumericTextBox({\n      format: 'n0',\n      min: 0,\n      // eslint-disable-next-line\n      value: brdSpcVal !== '' && !isNOU(brdSpcVal) ? parseInt(brdSpcVal, null) : 0,\n      placeholder: cellSpacing,\n      floatLabelType: 'Auto',\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale\n    });\n    this.tableCellSpacing.isStringTemplate = true;\n    this.tableCellSpacing.appendTo(tableWrap.querySelector('#cellSpacing'));\n    return tableWrap;\n  };\n  /**\n   * Destroys the ToolBar.\n   *\n   * @function destroy\n   * @returns {void}\n   * @hidden\n    */\n  Table.prototype.destroy = function () {\n    if (isNOU(this.parent)) {\n      return;\n    }\n    this.removeEventListener();\n  };\n  Table.prototype.moduleDestroy = function () {\n    this.parent = null;\n  };\n  /**\n   * For internal use only - Get the module name.\n   *\n   * @returns {void}\n   */\n  Table.prototype.getModuleName = function () {\n    return 'table';\n  };\n  Table.prototype.afterKeyDown = function (e) {\n    var _this = this;\n    if (this.curTable) {\n      setTimeout(function () {\n        var mouseOverEvent = document.createEvent('MouseEvents');\n        mouseOverEvent.initEvent('mouseover', true, true);\n        _this.curTable.dispatchEvent(mouseOverEvent);\n      }, 1);\n    }\n  };\n  return Table;\n}();\nexport { Table };","map":{"version":3,"names":["detach","closest","Browser","isNullOrUndefined","isNOU","EventHandler","addClass","removeClass","Popup","Button","events","RenderType","NumericTextBox","classes","dispatchEvent","parseHtml","hasClass","Table","parent","serviceLocator","ensureInsideTableList","pageX","pageY","moveEle","currentColumnResize","currentMarginLeft","rteID","element","id","l10n","getService","rendererFactory","dialogRenderObj","addEventListener","prototype","isDestroyed","on","createTable","renderDlgContent","initialEnd","afterRender","dynamicModule","showTableDialog","showDialog","closeTableDialog","closeDialog","docClick","iframeMouseDown","onIframeMouseDown","editAreaClick","editAreaClickHandler","clearDialogObj","tableToolbarAction","onToolbarAction","dropDownSelect","dropdownSelect","keyDown","keyUp","mouseUp","selectionTable","tableModulekeyUp","bindCssClass","setCssClass","destroy","moduleDestroy","afterKeyDown","removeEventListener","off","mouseDown","cellSelect","tableColorPickerChanged","setBGColor","isDevice","tableSettings","resize","remove","contentModule","getEditPanel","resizeHelper","updateCss","currentObj","e","cssClass","oldCssClass","setProperties","trim","replace","popupObj","createTableButton","editdlgObj","numericTextBoxObj","columnTextBox","rowTextBox","tableWidthNum","tableCellPadding","tableCellSpacing","i","length","target","args","info","name","tagName","setAttribute","getRenderer","Content","add","touchStartEvent","resizeStart","item","document","body","contains","querySelector","command","range","formatter","editorManager","nodeSelection","getRange","getDocument","selection","save","selectParent","getParentNodeCollection","subCommand","addRow","addColumn","removeRowColumn","verticalAlign","tableStyles","UpdateCells","selectCell","process","hideTableQuickToolbar","key","toLocaleLowerCase","classList","hide","event","proxy","action","openDialog","preventDefault","code","ele","parentElement","keyCode","ctrlKey","removeTable","querySelectorAll","removeResizeElement","closestTd","inputElement","tabSelection","tableArrowNavigation","handleSelectAll","cancelResizeAction","selectedCells","CLS_TABLE_SEL","previousTableElement","isInternal","focus","editorMode","docElement","originalEvent","insertTableDialog","self","getCssClass","returnValue","tableHeader","editTable","tdEle","tableCell","table","CLS_TB_DASH_BOR","CLS_TB_ALT_BOR","split","saveData","restore","insideList","blockNodes","domNode","nodes","parentNode","push","childNodes","startOffset","endOffset","startContainer","nodeType","shiftKey","nextElement","nextSibling","nodeName","toLowerCase","rows","cells","textContent","setSelectionNode","setSelectionText","firstChild","prevElement","previousSibling","cellIndex","tHead","clsTble","selText","nextElementSibling","children","previousElementSibling","curTable","style","backgroundColor","value","quickToolObj","tableQTBar","hidePopup","getAnchorNode","readonly","showOnRightClick","quickToolbarSettings","which","quickToolbarModule","isPopupOpen","closestTable","startNode","endNode","endContainer","isAnchorEle","CLS_CLICKELEM","collapsed","range_1","Clear","touches","iframeSettings","enable","window","pageXOffset","getBoundingClientRect","left","changedTouches","clientX","pageYOffset","top","inlineMode","toolbarModule","getToolbarHeight","clientY","showPopup","tableCellSelect","row","Array","slice","call","indexOf","col","list","dlgDiv","forEach","parentIndex","tblHeader","innerHTML","tableMouseUp","tableMove","tableCellLeave","tableCellClick","tableInsert","selectionObj","ownerDocument","getPanel","columns","width","minWidth","maxWidth","tdNode","activeCell","helper","observer","notify","selectNode","targetTouches","removeHelper","tableResizeEleCreation","preventDefaultResize","calMaxCol","j","hasAttribute","height","parseInt","getComputedStyle","pos","calcPos","colReEle","createElement","attrs","toString","CLS_RTE_TABLE_RESIZE","CLS_TB_COL_RES","cssText","offsetWidth","appendChild","rowReEle","CLS_TB_ROW_RES","rowPosLeft","getAttribute","offsetHeight","tableReBox","className","CLS_TB_BOX_RES","elem","parentOffset","offset","doc","offsetParent","documentElement","isNestedTable","position","topValue","scrollTop","leftValue","scrollLeft","offsetTop","offsetLeft","getPointX","getPointY","_this","resizeBtnInit","resizeBtnStat","column","columnEle","colIndex","appendHelper","rowEle","tableBox","requestType","trigger","resizeStartArgs","cancel","touchMoveEvent","resizing","touchEndEvent","resizeEnd","cls","setHelperHeight","updateHelper","top_1","max","maxRowIndex","mouseX","enableRtl","mouseY","maxiumWidth","currentTdElement","isRowCellsMerged","isColCellsMerged","mergedCellIndex","mergedElement","onResize","resizingArgs","tableWidth","tableHeight","paddingSize","paddingRight","match","join","rteWidth","clientWidth","widthCompare","currentTd","currentTDPad","parseFloat","cellRow","currentTableWidth","includes","getCurrentTableWidth","currentColumnCellWidth","right","convertPixelToPercentage","firstColumnsCell","findFirstLastColCells","differenceWidth","marginLeft","lastColumnsCell","cellColl","actualwid","totalwid","currentRow","leftColumnWidth","rightColWidth","index","isMergedEleResize","leftTableCell","rightTableCell","currentResizeRow","clientHeight","tableBoxPosition","Math","abs","widthType","parentWidth","isFirst","resultColumns","offsetValue","resizeStop","tabkey","cmd","delKey","enterKey","argsTarget","header","insertbtn","getConstant","tableDiv","drawTable","btnEle","type","tabindex","getToolbarElement","iconCss","content","locale","isStringTemplate","appendTo","getToolbar","targetType","relateTo","collision","X","Y","offsetY","viewPortElement","zIndex","close","isBlur","refreshPosition","documentClickClosedBy","closedBy","closestEle","isExist","isIE","rowDiv","display","createDialog","editContent","tableDlgContent","update","editHeader","buttons","click","applyProperties","bind","buttonModel","isPrimary","cancelDialog","maxHeight","dlgContent","tableCellDlgContent","insert","customTable","tableColumn","tableRow","tableWrap","contentElem","format","min","placeholder","floatLabelType","tableDialog","dialogModel","CLS_RTE_ELEMENTS","showCloseIcon","closeOnEscape","isModal","animationSettings","effect","render","inlineQTBar","textQTBar","argument","text","dialogEle","tdElm","padVal","padding","cellSpacing","CLS_TABLE_BORDER","cellPadding","widthVal","getClientRects","brdSpcVal","getModuleName","setTimeout","mouseOverEvent","createEvent","initEvent"],"sources":["/Users/saleem/Desktop/KClient/Web App/Ver_3.6/User Interface/website_Source files/node_modules/@syncfusion/ej2-richtexteditor/src/rich-text-editor/renderer/table-module.js"],"sourcesContent":["import { detach, closest, Browser, isNullOrUndefined as isNOU } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, EventHandler, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport * as events from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport * as classes from '../base/classes';\nimport { dispatchEvent, parseHtml, hasClass } from '../base/util';\n/**\n * `Table` module is used to handle table actions.\n */\nvar Table = /** @class */ (function () {\n    function Table(parent, serviceLocator) {\n        this.ensureInsideTableList = true;\n        this.pageX = null;\n        this.pageY = null;\n        this.moveEle = null;\n        this.currentColumnResize = '';\n        this.currentMarginLeft = 0;\n        this.parent = parent;\n        this.rteID = parent.element.id;\n        this.l10n = serviceLocator.getService('rteLocale');\n        this.rendererFactory = serviceLocator.getService('rendererFactory');\n        this.dialogRenderObj = serviceLocator.getService('dialogRenderObject');\n        this.addEventListener();\n    }\n    Table.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.createTable, this.renderDlgContent, this);\n        this.parent.on(events.initialEnd, this.afterRender, this);\n        this.parent.on(events.dynamicModule, this.afterRender, this);\n        this.parent.on(events.showTableDialog, this.showDialog, this);\n        this.parent.on(events.closeTableDialog, this.closeDialog, this);\n        this.parent.on(events.docClick, this.docClick, this);\n        this.parent.on(events.iframeMouseDown, this.onIframeMouseDown, this);\n        this.parent.on(events.editAreaClick, this.editAreaClickHandler, this);\n        this.parent.on(events.clearDialogObj, this.clearDialogObj, this);\n        this.parent.on(events.tableToolbarAction, this.onToolbarAction, this);\n        this.parent.on(events.dropDownSelect, this.dropdownSelect, this);\n        this.parent.on(events.keyDown, this.keyDown, this);\n        this.parent.on(events.keyUp, this.keyUp, this);\n        this.parent.on(events.mouseUp, this.selectionTable, this);\n        this.parent.on(events.tableModulekeyUp, this.tableModulekeyUp, this);\n        this.parent.on(events.bindCssClass, this.setCssClass, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.moduleDestroy, this.moduleDestroy, this);\n        this.parent.on(events.afterKeyDown, this.afterKeyDown, this);\n    };\n    Table.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.createTable, this.renderDlgContent);\n        this.parent.off(events.initialEnd, this.afterRender);\n        this.parent.off(events.dynamicModule, this.afterRender);\n        this.parent.off(events.docClick, this.docClick);\n        this.parent.off(events.iframeMouseDown, this.onIframeMouseDown);\n        this.parent.off(events.showTableDialog, this.showDialog);\n        this.parent.off(events.closeTableDialog, this.closeDialog);\n        this.parent.off(events.editAreaClick, this.editAreaClickHandler);\n        this.parent.off(events.clearDialogObj, this.clearDialogObj);\n        this.parent.off(events.tableToolbarAction, this.onToolbarAction);\n        this.parent.off(events.dropDownSelect, this.dropdownSelect);\n        this.parent.off(events.mouseDown, this.cellSelect);\n        this.parent.off(events.tableColorPickerChanged, this.setBGColor);\n        this.parent.off(events.keyDown, this.keyDown);\n        this.parent.off(events.keyUp, this.keyUp);\n        this.parent.off(events.mouseUp, this.selectionTable);\n        this.parent.off(events.tableModulekeyUp, this.tableModulekeyUp);\n        this.parent.off(events.bindCssClass, this.setCssClass);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.moduleDestroy, this.moduleDestroy);\n        this.parent.off(events.afterKeyDown, this.afterKeyDown);\n        if (!Browser.isDevice && this.parent.tableSettings.resize) {\n            EventHandler.remove(this.contentModule.getEditPanel(), 'mouseover', this.resizeHelper);\n        }\n    };\n    Table.prototype.updateCss = function (currentObj, e) {\n        if (currentObj && e.cssClass) {\n            if (isNullOrUndefined(e.oldCssClass)) {\n                currentObj.setProperties({ cssClass: (currentObj.cssClass + ' ' + e.cssClass).trim() });\n            }\n            else {\n                currentObj.setProperties({ cssClass: (currentObj.cssClass.replace(e.oldCssClass, '').trim() + ' ' + e.cssClass).trim() });\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/tslint/config\n    Table.prototype.setCssClass = function (e) {\n        if (this.popupObj && e.cssClass) {\n            if (isNullOrUndefined(e.oldCssClass)) {\n                addClass([this.popupObj.element], e.cssClass);\n            }\n            else {\n                removeClass([this.popupObj.element], e.oldCssClass);\n                addClass([this.popupObj.element], e.cssClass);\n            }\n        }\n        this.updateCss(this.createTableButton, e);\n        this.updateCss(this.editdlgObj, e);\n        var numericTextBoxObj = [\n            this.columnTextBox, this.rowTextBox, this.tableWidthNum, this.tableCellPadding, this.tableCellSpacing\n        ];\n        for (var i = 0; i < numericTextBoxObj.length; i++) {\n            this.updateCss(numericTextBoxObj[i], e);\n        }\n    };\n    Table.prototype.selectionTable = function (e) {\n        var target = e.args.target;\n        if (Browser.info.name === 'mozilla' && !isNOU(closest(target, 'table')) && closest(target, 'table').tagName === 'TABLE') {\n            this.parent.contentModule.getEditPanel().setAttribute('contenteditable', 'true');\n        }\n    };\n    Table.prototype.afterRender = function () {\n        if (isNullOrUndefined(this.contentModule)) {\n            this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n            this.parent.on(events.tableColorPickerChanged, this.setBGColor, this);\n            this.parent.on(events.mouseDown, this.cellSelect, this);\n            if (this.parent.tableSettings.resize) {\n                EventHandler.add(this.parent.contentModule.getEditPanel(), Browser.touchStartEvent, this.resizeStart, this);\n            }\n            if (!Browser.isDevice && this.parent.tableSettings.resize) {\n                EventHandler.add(this.contentModule.getEditPanel(), 'mouseover', this.resizeHelper, this);\n            }\n        }\n    };\n    Table.prototype.dropdownSelect = function (e) {\n        var item = e.item;\n        if (!document.body.contains(document.body.querySelector('.e-rte-quick-toolbar')) || item.command !== 'Table') {\n            return;\n        }\n        var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n        var args = {\n            args: e,\n            selection: this.parent.formatter.editorManager.nodeSelection.save(range, this.contentModule.getDocument()),\n            selectParent: this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range)\n        };\n        switch (item.subCommand) {\n            case 'InsertRowBefore':\n            case 'InsertRowAfter':\n                this.addRow(args.selection, e);\n                break;\n            case 'InsertColumnLeft':\n            case 'InsertColumnRight':\n                this.addColumn(args.selection, e);\n                break;\n            case 'DeleteColumn':\n            case 'DeleteRow':\n                this.removeRowColumn(args.selection, e);\n                break;\n            case 'AlignTop':\n            case 'AlignMiddle':\n            case 'AlignBottom':\n                this.verticalAlign(args, e);\n                break;\n            case 'Dashed':\n            case 'Alternate':\n            case 'Custom':\n                this.tableStyles(args, item.subCommand);\n                break;\n            case 'Merge':\n            case 'VerticalSplit':\n            case 'HorizontalSplit':\n                this.UpdateCells(args.selection, e);\n                break;\n        }\n    };\n    Table.prototype.UpdateCells = function (selectCell, e) {\n        this.parent.formatter.process(this.parent, e, e, { selection: selectCell, subCommand: e.item.subCommand });\n        this.hideTableQuickToolbar();\n    };\n    Table.prototype.keyUp = function (e) {\n        var target = e.args.target;\n        if (e.args.key.toLocaleLowerCase() === 'escape' && target && target.classList && (this.popupObj && !closest(target, '[id=' + \"'\" + this.popupObj.element.id + \"'\" + ']')) && this.popupObj) {\n            this.popupObj.hide();\n        }\n    };\n    Table.prototype.keyDown = function (e) {\n        var event = e.args;\n        // eslint-disable-next-line\n        var proxy = this;\n        switch (event.action) {\n            case 'escape':\n                break;\n            case 'insert-table':\n                this.openDialog(true, e);\n                event.preventDefault();\n                break;\n        }\n        if (!isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection) && this.contentModule\n            && event.code !== 'KeyK') {\n            var selection = void 0;\n            var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n            var ele = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range)[0];\n            ele = (ele && ele.tagName !== 'TD' && ele.tagName !== 'TH') ? ele.parentElement : ele;\n            if ((event.keyCode === 8 || event.keyCode === 46) ||\n                (event.ctrlKey && event.keyCode === 88)) {\n                if (ele && ele.tagName === 'TBODY') {\n                    if (!isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection) && this.contentModule) {\n                        selection = this.parent.formatter.editorManager.nodeSelection.save(range, this.contentModule.getDocument());\n                    }\n                    event.preventDefault();\n                    proxy.removeTable(selection, event, true);\n                }\n                else if (ele && ele.querySelectorAll('table').length > 0) {\n                    this.removeResizeElement();\n                    this.hideTableQuickToolbar();\n                }\n            }\n            if (ele && ele.tagName !== 'TD' && ele.tagName !== 'TH') {\n                var closestTd = closest(ele, 'td');\n                ele = !isNullOrUndefined(closestTd) && this.parent.inputElement.contains(closestTd) ? closestTd : ele;\n            }\n            if (ele && (ele.tagName === 'TD' || ele.tagName === 'TH')) {\n                if (!isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection) && this.contentModule) {\n                    selection = this.parent.formatter.editorManager.nodeSelection.save(range, this.contentModule.getDocument());\n                }\n                switch (event.keyCode) {\n                    case 9:\n                    case 37:\n                    case 39:\n                        proxy.tabSelection(event, selection, ele);\n                        break;\n                    case 40:\n                    case 38:\n                        proxy.tableArrowNavigation(event, selection, ele);\n                        break;\n                }\n            }\n        }\n        if (event.ctrlKey && event.key === 'a') {\n            this.handleSelectAll();\n        }\n    };\n    Table.prototype.handleSelectAll = function () {\n        this.cancelResizeAction();\n        var selectedCells = this.parent.inputElement.querySelectorAll('.' + classes.CLS_TABLE_SEL);\n        removeClass(selectedCells, classes.CLS_TABLE_SEL);\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Table.prototype.tableModulekeyUp = function (e) {\n        if (!isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection) && this.contentModule) {\n            var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n            var ele = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range)[0];\n            ele = (ele && ele.tagName !== 'TD' && ele.tagName !== 'TH') ? ele.parentElement : ele;\n            if (ele && ele.tagName !== 'TD' && ele.tagName !== 'TH') {\n                var closestTd = closest(ele, 'td');\n                ele = !isNullOrUndefined(closestTd) && this.parent.inputElement.contains(closestTd) ? closestTd : ele;\n            }\n            if (this.previousTableElement !== ele && !isNullOrUndefined(this.previousTableElement)) {\n                this.previousTableElement.classList.remove(classes.CLS_TABLE_SEL);\n            }\n        }\n    };\n    Table.prototype.openDialog = function (isInternal, e) {\n        if (!isInternal) {\n            this.parent.contentModule.getEditPanel().focus();\n        }\n        if (this.parent.editorMode === 'HTML') {\n            var docElement = this.parent.contentModule.getDocument();\n            var range = this.parent.formatter.editorManager.nodeSelection.getRange(docElement);\n            var selection = this.parent.formatter.editorManager.nodeSelection.save(range, docElement);\n            var args = {\n                originalEvent: e ? e.args : { action: 'insert-table' },\n                item: {\n                    command: 'Table',\n                    subCommand: 'CreateTable'\n                },\n                name: !isInternal ? 'showDialog' : null\n            };\n            this.insertTableDialog({ self: this, args: args, selection: selection });\n        }\n    };\n    Table.prototype.showDialog = function () {\n        this.openDialog(false);\n        this.setCssClass({ cssClass: this.parent.getCssClass() });\n    };\n    Table.prototype.closeDialog = function () {\n        if (this.editdlgObj) {\n            this.editdlgObj.hide({ returnValue: true });\n        }\n    };\n    Table.prototype.onToolbarAction = function (args) {\n        var item = args.args.item;\n        switch (item.subCommand) {\n            case 'TableHeader':\n                this.tableHeader(args.selection, args.args);\n                break;\n            case 'TableRemove':\n                this.removeTable(args.selection, args.args);\n                break;\n            case 'TableEditProperties':\n                this.editTable(args);\n                break;\n        }\n    };\n    Table.prototype.verticalAlign = function (args, e) {\n        var tdEle = closest(args.selectParent[0], 'td') || closest(args.selectParent[0], 'th');\n        if (tdEle) {\n            this.parent.formatter.process(this.parent, e, e, { tableCell: tdEle, subCommand: e.item.subCommand });\n        }\n    };\n    Table.prototype.tableStyles = function (args, command) {\n        var table = closest(args.selectParent[0], 'table');\n        if (command === 'Dashed') {\n            /* eslint-disable */\n            (this.parent.element.classList.contains(classes.CLS_TB_DASH_BOR)) ?\n                this.parent.element.classList.remove(classes.CLS_TB_DASH_BOR) : this.parent.element.classList.add(classes.CLS_TB_DASH_BOR);\n            (table.classList.contains(classes.CLS_TB_DASH_BOR)) ? table.classList.remove(classes.CLS_TB_DASH_BOR) :\n                table.classList.add(classes.CLS_TB_DASH_BOR);\n        }\n        if (command === 'Alternate') {\n            (this.parent.element.classList.contains(classes.CLS_TB_ALT_BOR)) ?\n                this.parent.element.classList.remove(classes.CLS_TB_ALT_BOR) : this.parent.element.classList.add(classes.CLS_TB_ALT_BOR);\n            (table.classList.contains(classes.CLS_TB_ALT_BOR)) ? table.classList.remove(classes.CLS_TB_ALT_BOR) :\n                table.classList.add(classes.CLS_TB_ALT_BOR);\n            /* eslint-enable */\n        }\n        if (args.args && args.args.item.cssClass) {\n            var classList = args.args.item.cssClass.split(' ');\n            for (var i = 0; i < classList.length; i++) {\n                if (table.classList.contains(classList[i])) {\n                    table.classList.remove(classList[i]);\n                }\n                else {\n                    table.classList.add(classList[i]);\n                }\n            }\n        }\n        this.parent.formatter.saveData();\n        this.parent.formatter.editorManager.nodeSelection.restore();\n    };\n    Table.prototype.insideList = function (range) {\n        var blockNodes = this.parent.formatter.editorManager.domNode.blockNodes();\n        var nodes = [];\n        for (var i = 0; i < blockNodes.length; i++) {\n            if (blockNodes[i].parentNode.tagName === 'LI') {\n                nodes.push(blockNodes[i].parentNode);\n            }\n            else if (blockNodes[i].tagName === 'LI' && blockNodes[i].childNodes[0].tagName !== 'P' &&\n                (blockNodes[i].childNodes[0].tagName !== 'OL' &&\n                    blockNodes[i].childNodes[0].tagName !== 'UL')) {\n                nodes.push(blockNodes[i]);\n            }\n        }\n        if (nodes.length > 1 || nodes.length && ((range.startOffset === 0 && range.endOffset === 0))) {\n            this.ensureInsideTableList = true;\n            return true;\n        }\n        else {\n            this.ensureInsideTableList = false;\n            return false;\n        }\n    };\n    Table.prototype.tabSelection = function (event, selection, ele) {\n        this.previousTableElement = ele;\n        var insideList = this.insideList(selection.range);\n        if ((event.keyCode === 37 || event.keyCode === 39) && selection.range.startContainer.nodeType === 3 ||\n            insideList) {\n            return;\n        }\n        event.preventDefault();\n        ele.classList.remove(classes.CLS_TABLE_SEL);\n        if (!event.shiftKey && event.keyCode !== 37) {\n            var nextElement = (!isNullOrUndefined(ele.nextSibling)) ? ele.nextSibling :\n                (!isNullOrUndefined(closest(ele, 'tr').nextSibling) ? closest(ele, 'tr').nextSibling.childNodes[0] :\n                    (!isNullOrUndefined(closest(ele, 'table').nextSibling)) ?\n                        (closest(ele, 'table').nextSibling.nodeName.toLowerCase() === 'td') ?\n                            closest(ele, 'table').nextSibling : ele : ele);\n            if (ele === nextElement && ele.nodeName === 'TH') {\n                nextElement = closest(ele, 'table').rows[1].cells[0];\n            }\n            if (event.keyCode === 39 && ele === nextElement) {\n                nextElement = closest(ele, 'table').nextSibling;\n            }\n            if (nextElement) {\n                // eslint-disable-next-line\n                (nextElement.textContent.trim() !== '' && closest(nextElement, 'td')) ?\n                    selection.setSelectionNode(this.contentModule.getDocument(), nextElement) :\n                    selection.setSelectionText(this.contentModule.getDocument(), nextElement, nextElement, 0, 0);\n            }\n            if (ele === nextElement && event.keyCode !== 39 && nextElement) {\n                ele.classList.add(classes.CLS_TABLE_SEL);\n                this.addRow(selection, event, true);\n                ele.classList.remove(classes.CLS_TABLE_SEL);\n                nextElement = nextElement.parentElement.nextSibling ? nextElement.parentElement.nextSibling.firstChild :\n                    nextElement.parentElement.firstChild;\n                // eslint-disable-next-line\n                (nextElement.textContent.trim() !== '' && closest(nextElement, 'td')) ?\n                    selection.setSelectionNode(this.contentModule.getDocument(), nextElement) :\n                    selection.setSelectionText(this.contentModule.getDocument(), nextElement, nextElement, 0, 0);\n            }\n        }\n        else {\n            var prevElement = (!isNullOrUndefined(ele.previousSibling)) ? ele.previousSibling :\n                (!isNullOrUndefined(closest(ele, 'tr').previousSibling) ?\n                    closest(ele, 'tr').previousSibling.childNodes[closest(ele, 'tr').previousSibling.childNodes.length - 1] :\n                    (!isNullOrUndefined(closest(ele, 'table').previousSibling)) ?\n                        (closest(ele, 'table').previousSibling.nodeName.toLowerCase() === 'td') ? closest(ele, 'table').previousSibling :\n                            ele : ele);\n            if (ele === prevElement && ele.cellIndex === 0 &&\n                closest(ele, 'table').tHead) {\n                var clsTble = closest(ele, 'table');\n                prevElement = clsTble.rows[0].cells[clsTble.rows[0].cells.length - 1];\n            }\n            if (event.keyCode === 37 && ele === prevElement) {\n                prevElement = closest(ele, 'table').previousSibling;\n            }\n            if (prevElement) {\n                // eslint-disable-next-line\n                (prevElement.textContent.trim() !== '' && closest(prevElement, 'td')) ?\n                    selection.setSelectionNode(this.contentModule.getDocument(), prevElement) :\n                    selection.setSelectionText(this.contentModule.getDocument(), prevElement, prevElement, 0, 0);\n            }\n        }\n    };\n    Table.prototype.tableArrowNavigation = function (event, selection, ele) {\n        var selText = selection.range.startContainer;\n        if ((event.keyCode === 40 && selText.nodeType === 3 && (selText.nextSibling && selText.nextSibling.nodeName === 'BR' ||\n            selText.parentNode && selText.parentNode.nodeName !== 'TD')) ||\n            (event.keyCode === 38 && selText.nodeType === 3 && (selText.previousSibling && selText.previousSibling.nodeName === 'BR' ||\n                selText.parentNode && selText.parentNode.nodeName !== 'TD'))) {\n            return;\n        }\n        event.preventDefault();\n        ele.classList.remove(classes.CLS_TABLE_SEL);\n        if (event.keyCode === 40) {\n            ele = (!isNullOrUndefined(closest(ele, 'tr').nextElementSibling)) ?\n                closest(ele, 'tr').nextElementSibling.children[ele.cellIndex] :\n                (closest(ele, 'table').tHead && ele.nodeName === 'TH') ?\n                    closest(ele, 'table').rows[1].cells[ele.cellIndex] :\n                    (!isNullOrUndefined(closest(ele, 'table').nextSibling)) ? closest(ele, 'table').nextSibling :\n                        ele;\n        }\n        else {\n            ele = (!isNullOrUndefined(closest(ele, 'tr').previousElementSibling)) ?\n                closest(ele, 'tr').previousElementSibling.children[ele.cellIndex] :\n                (closest(ele, 'table').tHead && ele.nodeName !== 'TH') ?\n                    closest(ele, 'table').tHead.rows[0].cells[ele.cellIndex] :\n                    (!isNullOrUndefined(closest(ele, 'table').previousSibling)) ? closest(ele, 'table').previousSibling :\n                        ele;\n        }\n        if (ele) {\n            selection.setSelectionText(this.contentModule.getDocument(), ele, ele, 0, 0);\n        }\n    };\n    Table.prototype.setBGColor = function (args) {\n        var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument());\n        // eslint-disable-next-line\n        var selection = this.parent.formatter.editorManager.nodeSelection.save(range, this.contentModule.getDocument());\n        // eslint-disable-next-line\n        var selectedCells = this.curTable.querySelectorAll('.e-cell-select');\n        for (var i = 0; i < selectedCells.length; i++) {\n            selectedCells[i].style.backgroundColor = args.item.value;\n        }\n        this.parent.formatter.saveData();\n    };\n    Table.prototype.hideTableQuickToolbar = function () {\n        if (this.quickToolObj && this.quickToolObj.tableQTBar && document.body.contains(this.quickToolObj.tableQTBar.element)) {\n            this.quickToolObj.tableQTBar.hidePopup();\n        }\n    };\n    Table.prototype.tableHeader = function (selection, e) {\n        this.parent.formatter.process(this.parent, e, e.originalEvent, { selection: selection, subCommand: e.item.subCommand });\n    };\n    Table.prototype.getAnchorNode = function (element) {\n        var selectParent = closest(element, 'a');\n        return (selectParent ? selectParent : element);\n    };\n    Table.prototype.editAreaClickHandler = function (e) {\n        if (this.parent.readonly || !isNOU(closest(e.args.target, '.e-img-caption'))) {\n            return;\n        }\n        var args = e.args;\n        var showOnRightClick = this.parent.quickToolbarSettings.showOnRightClick;\n        if (args.which === 2 || (showOnRightClick && args.which === 1) || (!showOnRightClick && args.which === 3)) {\n            return;\n        }\n        if (this.parent.editorMode === 'HTML' && this.parent.quickToolbarModule && this.parent.quickToolbarModule.tableQTBar) {\n            this.quickToolObj = this.parent.quickToolbarModule;\n            var target = args.target;\n            this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n            var isPopupOpen = this.quickToolObj.tableQTBar.element.classList.contains('e-rte-pop');\n            if (isPopupOpen) {\n                return;\n            }\n            var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument());\n            var closestTable = closest(target, 'table');\n            var startNode = this.parent.getRange().startContainer.parentElement;\n            var endNode = this.parent.getRange().endContainer.parentElement;\n            var isAnchorEle = this.getAnchorNode(target);\n            if (target && target.nodeName !== 'A' && isAnchorEle.nodeName !== 'A' && target.nodeName !== 'IMG' && target.nodeName !== 'VIDEO' && !target.classList.contains(classes.CLS_CLICKELEM) &&\n                target.nodeName !== 'AUDIO' && startNode === endNode && (target.nodeName === 'TD' || target.nodeName === 'TH' ||\n                target.nodeName === 'TABLE' || (closestTable && this.parent.contentModule.getEditPanel().contains(closestTable)))\n                && !(range.startContainer.nodeType === 3 && !range.collapsed)) {\n                var range_1 = this.parent.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument());\n                this.parent.formatter.editorManager.nodeSelection.save(range_1, this.contentModule.getDocument());\n                this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument());\n                var pageX = void 0;\n                var pageY = void 0;\n                if (Browser.isDevice && e.args.touches) {\n                    pageX = (this.parent.iframeSettings.enable) ? window.pageXOffset + this.parent.element.getBoundingClientRect().left +\n                        e.args.changedTouches[0].clientX : e.args.changedTouches[0].pageX;\n                    pageY = (this.parent.iframeSettings.enable) ? window.pageYOffset + this.parent.element.getBoundingClientRect().top +\n                        (!this.parent.inlineMode.enable ? this.parent.toolbarModule.getToolbarHeight() : 0)\n                        + e.args.changedTouches[0].clientY : e.args.changedTouches[0].pageY;\n                }\n                else {\n                    pageX = (this.parent.iframeSettings.enable) ? window.pageXOffset\n                        + this.parent.element.getBoundingClientRect().left + args.clientX : args.pageX;\n                    pageY = (this.parent.iframeSettings.enable) ? window.pageYOffset + this.parent.element.getBoundingClientRect().top +\n                        this.parent.toolbarModule.getToolbarHeight() + args.clientY : args.pageY;\n                }\n                this.quickToolObj.tableQTBar.showPopup(pageX, pageY, target);\n                this.parent.formatter.editorManager.nodeSelection.restore();\n            }\n            else {\n                this.hideTableQuickToolbar();\n            }\n        }\n    };\n    Table.prototype.tableCellSelect = function (e) {\n        var target = e.target;\n        var row = Array.prototype.slice.call(target.parentElement.parentElement.children).indexOf(target.parentElement);\n        var col = Array.prototype.slice.call(target.parentElement.children).indexOf(target);\n        var list = this.dlgDiv.querySelectorAll('.e-rte-tablecell');\n        Array.prototype.forEach.call(list, function (item) {\n            var parentIndex = Array.prototype.slice.call(item.parentElement.parentElement.children).indexOf(item.parentElement);\n            var cellIndex = Array.prototype.slice.call(item.parentElement.children).indexOf(item);\n            removeClass([item], 'e-active');\n            if (parentIndex <= row && cellIndex <= col) {\n                addClass([item], 'e-active');\n            }\n        });\n        this.tblHeader.innerHTML = (col + 1) + 'x' + (row + 1);\n    };\n    // eslint-disable-next-line\n    Table.prototype.tableMouseUp = function (e) {\n        EventHandler.remove(this.curTable, 'mousemove', this.tableMove);\n    };\n    // eslint-disable-next-line\n    Table.prototype.tableCellLeave = function (e) {\n        removeClass(this.dlgDiv.querySelectorAll('.e-rte-tablecell'), 'e-active');\n        addClass([this.dlgDiv.querySelector('.e-rte-tablecell')], 'e-active');\n        this.tblHeader.innerHTML = 1 + 'x' + 1;\n    };\n    Table.prototype.tableCellClick = function (e) {\n        var target = e.target;\n        var row = Array.prototype.slice.call(target.parentElement.parentElement.children).indexOf(target.parentElement) + 1;\n        var col = Array.prototype.slice.call(target.parentElement.children).indexOf(target) + 1;\n        this.self.tableInsert(row, col, e, this);\n    };\n    Table.prototype.tableInsert = function (row, col, e, selectionObj) {\n        var proxy = (selectionObj.self) ? selectionObj.self : this;\n        var startContainer = selectionObj.selection.range.startContainer;\n        if (startContainer.nodeName === 'P' && startContainer.textContent.trim() === '' && !(startContainer.childNodes.length > 0)) {\n            startContainer.innerHTML = '<br />';\n        }\n        var parentNode = startContainer.parentNode;\n        if (proxy.parent.editorMode === 'HTML' &&\n            ((proxy.parent.iframeSettings.enable && !hasClass(parentNode.ownerDocument.querySelector('body'), 'e-lib')) ||\n                // eslint-disable-next-line\n                (!proxy.parent.iframeSettings.enable && isNOU(closest(parentNode, '[id=' + \"'\" + proxy.contentModule.getPanel().id + \"'\" + ']'))))) {\n            proxy.contentModule.getEditPanel().focus();\n            var range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.contentModule.getDocument());\n            selectionObj.selection = proxy.parent.formatter.editorManager.nodeSelection.save(range, proxy.contentModule.getDocument());\n        }\n        var value = {\n            rows: row, columns: col, width: {\n                minWidth: proxy.parent.tableSettings.minWidth,\n                maxWidth: proxy.parent.tableSettings.maxWidth,\n                width: proxy.parent.tableSettings.width\n            },\n            selection: selectionObj.selection\n        };\n        if (proxy.popupObj) {\n            proxy.popupObj.hide();\n        }\n        if (proxy.editdlgObj) {\n            proxy.editdlgObj.hide();\n        }\n        proxy.parent.formatter.process(proxy.parent, selectionObj.args, selectionObj.args.originalEvent, value);\n        proxy.contentModule.getEditPanel().focus();\n        proxy.parent.on(events.mouseDown, proxy.cellSelect, proxy);\n    };\n    Table.prototype.cellSelect = function (e) {\n        var target = e.args.target;\n        var tdNode = closest(target, 'td,th');\n        target = (target.nodeName !== 'TD' && tdNode && this.parent.contentModule.getEditPanel().contains(tdNode)) ?\n            tdNode : target;\n        removeClass(this.contentModule.getEditPanel().querySelectorAll('table td, table th'), classes.CLS_TABLE_SEL);\n        if (target && (target.tagName === 'TD' || target.tagName === 'TH')) {\n            addClass([target], classes.CLS_TABLE_SEL);\n            this.activeCell = target;\n            this.curTable = (this.curTable) ? this.curTable : closest(target, 'table');\n            EventHandler.add(this.curTable, 'mousemove', this.tableMove, this);\n            EventHandler.add(this.curTable, 'mouseup', this.tableMouseUp, this);\n            this.removeResizeElement();\n            if (this.helper && this.contentModule.getEditPanel().contains(this.helper)) {\n                detach(this.helper);\n            }\n        }\n        if (Browser.info.name === 'mozilla' && !isNOU(closest(target, 'table')) &&\n            closest(target, 'table').tagName === 'TABLE') {\n            this.parent.contentModule.getEditPanel().setAttribute('contenteditable', 'false');\n        }\n    };\n    Table.prototype.tableMove = function (event) {\n        this.parent.formatter.editorManager.observer.notify('TABLE_MOVE', { event: event, selectNode: [this.activeCell] });\n    };\n    Table.prototype.resizeHelper = function (e) {\n        if (this.parent.readonly) {\n            return;\n        }\n        var target = e.target || e.targetTouches[0].target;\n        var closestTable = closest(target, 'table.e-rte-table, table.e-rte-paste-table');\n        if (!isNOU(this.curTable) && !isNOU(closestTable) && closestTable !== this.curTable &&\n            this.parent.contentModule.getEditPanel().contains(closestTable)) {\n            this.removeResizeElement();\n            this.removeHelper(e);\n            this.cancelResizeAction();\n        }\n        if (target.nodeName === 'TABLE' || target.nodeName === 'TD' || target.nodeName === 'TH') {\n            this.curTable = (closestTable && this.parent.contentModule.getEditPanel().contains(closestTable))\n                && (target.nodeName === 'TD' || target.nodeName === 'TH') ?\n                closestTable : target;\n            this.removeResizeElement();\n            this.tableResizeEleCreation(this.curTable, e);\n        }\n    };\n    Table.prototype.tableResizeEleCreation = function (table, e) {\n        this.parent.preventDefaultResize(e);\n        var columns = table.rows[this.calMaxCol(table)].cells;\n        var rows = [];\n        for (var i = 0; i < table.rows.length; i++) {\n            for (var j = 0; j < table.rows[i].cells.length; j++) {\n                if (!table.rows[i].cells[j].hasAttribute('rowspan')) {\n                    rows.push(Array.prototype.slice.call(table.rows[i].cells, 0, table.rows[i].cells.length)[j]);\n                    break;\n                }\n            }\n        }\n        var height = parseInt(getComputedStyle(table).height, 10);\n        var width = parseInt(getComputedStyle(table).width, 10);\n        var pos = this.calcPos(table);\n        for (var i = 0; columns.length >= i; i++) {\n            var colReEle = this.parent.createElement('span', {\n                attrs: {\n                    'data-col': (i).toString(), 'unselectable': 'on', 'contenteditable': 'false'\n                }\n            });\n            colReEle.classList.add(classes.CLS_RTE_TABLE_RESIZE, classes.CLS_TB_COL_RES);\n            if (columns.length === i) {\n                colReEle.style.cssText = 'height: ' + height + 'px; width: 4px; top: ' + pos.top +\n                    'px; left:' + (pos.left + this.calcPos(columns[i - 1]).left + columns[i - 1].offsetWidth) + 'px;';\n            }\n            else {\n                colReEle.style.cssText = 'height: ' + height + 'px; width: 4px; top: ' + pos.top +\n                    'px; left:' + (pos.left + this.calcPos(columns[i]).left) + 'px;';\n            }\n            this.contentModule.getEditPanel().appendChild(colReEle);\n        }\n        for (var i = 0; rows.length > i; i++) {\n            var rowReEle = this.parent.createElement('span', {\n                attrs: {\n                    'data-row': (i).toString(), 'unselectable': 'on', 'contenteditable': 'false'\n                }\n            });\n            rowReEle.classList.add(classes.CLS_RTE_TABLE_RESIZE, classes.CLS_TB_ROW_RES);\n            var rowPosLeft = !isNOU(table.getAttribute('cellspacing')) || table.getAttribute('cellspacing') !== '' ?\n                0 : this.calcPos(rows[i]).left;\n            rowReEle.style.cssText = 'width: ' + width + 'px; height: 4px; top: ' +\n                (this.calcPos(rows[i]).top + pos.top + rows[i].offsetHeight - 2) +\n                'px; left:' + (rowPosLeft + pos.left) + 'px;';\n            this.contentModule.getEditPanel().appendChild(rowReEle);\n        }\n        var tableReBox = this.parent.createElement('span', {\n            className: classes.CLS_TB_BOX_RES + this.parent.getCssClass(true), attrs: {\n                'data-col': columns.length.toString(), 'unselectable': 'on', 'contenteditable': 'false'\n            }\n        });\n        tableReBox.style.cssText = 'top: ' + (pos.top + height - 4) +\n            'px; left:' + (pos.left + width - 4) + 'px;';\n        if (Browser.isDevice) {\n            tableReBox.classList.add('e-rmob');\n        }\n        this.contentModule.getEditPanel().appendChild(tableReBox);\n    };\n    Table.prototype.removeResizeElement = function () {\n        var item = this.parent.contentModule.getEditPanel().\n            querySelectorAll('.e-column-resize, .e-row-resize, .e-table-box, .e-table-rhelper');\n        if (item.length > 0) {\n            for (var i = 0; i < item.length; i++) {\n                detach(item[i]);\n            }\n        }\n    };\n    Table.prototype.calcPos = function (elem) {\n        var parentOffset = {\n            top: 0,\n            left: 0\n        };\n        var offset = elem.getBoundingClientRect();\n        var doc = elem.ownerDocument;\n        var offsetParent = elem.offsetParent || doc.documentElement;\n        var isNestedTable = false;\n        while (offsetParent &&\n            (offsetParent === doc.body || offsetParent === doc.documentElement) &&\n            offsetParent.style.position === 'static') {\n            offsetParent = offsetParent.parentNode;\n        }\n        if (offsetParent.nodeName === 'TD' && elem.nodeName === 'TABLE') {\n            offsetParent = closest(offsetParent, '.e-rte-content');\n            isNestedTable = true;\n        }\n        if (offsetParent && offsetParent !== elem && offsetParent.nodeType === 1) {\n            parentOffset = offsetParent.getBoundingClientRect();\n        }\n        if (isNestedTable) {\n            isNestedTable = false;\n            var topValue = this.parent.inputElement && this.parent.inputElement.scrollTop > 0 ?\n                (this.parent.inputElement.scrollTop + offset.top) - parentOffset.top : offset.top - parentOffset.top;\n            var leftValue = this.parent.inputElement && this.parent.inputElement.scrollLeft > 0 ?\n                (this.parent.inputElement.scrollLeft + offset.left) - parentOffset.left : offset.left - parentOffset.left;\n            return {\n                top: topValue,\n                left: leftValue\n            };\n        }\n        else {\n            return {\n                top: elem.offsetTop,\n                left: elem.offsetLeft\n            };\n        }\n    };\n    Table.prototype.getPointX = function (e) {\n        if (e.touches && e.touches.length) {\n            return e.touches[0].pageX;\n        }\n        else {\n            return e.pageX;\n        }\n    };\n    Table.prototype.getPointY = function (e) {\n        if (e.touches && e.touches.length) {\n            return e.touches[0].pageY;\n        }\n        else {\n            return e.pageY;\n        }\n    };\n    Table.prototype.resizeStart = function (e) {\n        var _this = this;\n        if (this.parent.readonly) {\n            return;\n        }\n        if (Browser.isDevice) {\n            this.resizeHelper(e);\n        }\n        var target = e.target;\n        if (target.classList.contains(classes.CLS_TB_COL_RES) ||\n            target.classList.contains(classes.CLS_TB_ROW_RES) ||\n            target.classList.contains(classes.CLS_TB_BOX_RES)) {\n            e.preventDefault();\n            this.parent.preventDefaultResize(e);\n            removeClass(this.curTable.querySelectorAll('td,th'), classes.CLS_TABLE_SEL);\n            this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument());\n            this.pageX = this.getPointX(e);\n            this.pageY = this.getPointY(e);\n            this.resizeBtnInit();\n            this.hideTableQuickToolbar();\n            if (target.classList.contains(classes.CLS_TB_COL_RES)) {\n                this.resizeBtnStat.column = true;\n                if (parseInt(target.getAttribute('data-col'), 10) === this.curTable.rows[this.calMaxCol(this.curTable)].cells.length) {\n                    this.currentColumnResize = 'last';\n                    this.columnEle = this.curTable.rows[this.calMaxCol(this.curTable)].cells[parseInt(target.getAttribute('data-col'), 10) - 1];\n                }\n                else {\n                    if (parseInt(target.getAttribute('data-col'), 10) === 0) {\n                        this.currentColumnResize = 'first';\n                    }\n                    else {\n                        this.currentColumnResize = 'middle';\n                    }\n                    this.columnEle = this.curTable.rows[this.calMaxCol(this.curTable)].cells[parseInt(target.getAttribute('data-col'), 10)];\n                }\n                this.colIndex = this.columnEle.cellIndex;\n                this.moveEle = e.target;\n                this.appendHelper();\n            }\n            if (target.classList.contains(classes.CLS_TB_ROW_RES)) {\n                this.rowEle = this.curTable.rows[parseInt(target.getAttribute('data-row'), 10)];\n                this.resizeBtnStat.row = true;\n                this.appendHelper();\n            }\n            if (target.classList.contains(classes.CLS_TB_BOX_RES)) {\n                this.resizeBtnStat.tableBox = true;\n            }\n            if (Browser.isDevice && this.helper && !this.helper.classList.contains('e-reicon')) {\n                this.helper.classList.add('e-reicon');\n                EventHandler.add(document, Browser.touchStartEvent, this.removeHelper, this);\n                EventHandler.add(this.helper, Browser.touchStartEvent, this.resizeStart, this);\n            }\n            else {\n                var args = { event: e, requestType: 'Table' };\n                this.parent.trigger(events.resizeStart, args, function (resizeStartArgs) {\n                    if (resizeStartArgs.cancel) {\n                        _this.cancelResizeAction();\n                    }\n                });\n            }\n            EventHandler.add(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing, this);\n            EventHandler.add(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd, this);\n        }\n    };\n    Table.prototype.removeHelper = function (e) {\n        var cls = e.target.classList;\n        if (!(cls.contains('e-reicon')) && this.helper) {\n            EventHandler.remove(document, Browser.touchStartEvent, this.removeHelper);\n            EventHandler.remove(this.helper, Browser.touchStartEvent, this.resizeStart);\n            if (this.helper && this.contentModule.getEditPanel().contains(this.helper)) {\n                detach(this.helper);\n            }\n            this.pageX = null;\n            this.helper = null;\n        }\n    };\n    Table.prototype.appendHelper = function () {\n        this.helper = this.parent.createElement('div', {\n            className: 'e-table-rhelper' + this.parent.getCssClass(true)\n        });\n        if (Browser.isDevice) {\n            this.helper.classList.add('e-reicon');\n        }\n        this.contentModule.getEditPanel().appendChild(this.helper);\n        this.setHelperHeight();\n    };\n    Table.prototype.setHelperHeight = function () {\n        var pos = this.calcPos(this.curTable);\n        if (this.resizeBtnStat.column) {\n            this.helper.classList.add('e-column-helper');\n            this.helper.style.cssText = 'height: ' + getComputedStyle(this.curTable).height + '; top: ' +\n                pos.top + 'px; left:' + ((pos.left + this.calcPos(this.columnEle).left) +\n                (this.currentColumnResize === 'last' ? this.columnEle.offsetWidth + 2 : 0) - 1) + 'px;';\n        }\n        else {\n            this.helper.classList.add('e-row-helper');\n            this.helper.style.cssText = 'width: ' + getComputedStyle(this.curTable).width + '; top: ' +\n                (this.calcPos(this.rowEle).top + pos.top + this.rowEle.offsetHeight) +\n                'px; left:' + (this.calcPos(this.rowEle).left + pos.left) + 'px;';\n        }\n    };\n    Table.prototype.updateHelper = function () {\n        var pos = this.calcPos(this.curTable);\n        if (this.resizeBtnStat.column) {\n            var left = (pos.left + this.calcPos(this.columnEle).left) +\n                (this.currentColumnResize === 'last' ? this.columnEle.offsetWidth + 2 : 0) - 1;\n            this.helper.style.left = left + 'px';\n        }\n        else {\n            var top_1 = this.calcPos(this.rowEle).top + pos.top + this.rowEle.offsetHeight;\n            this.helper.style.top = top_1 + 'px';\n        }\n    };\n    Table.prototype.calMaxCol = function (element) {\n        var max = 0;\n        var maxRowIndex;\n        for (var i = 0; i < element.rows.length; i++) {\n            if (max < element.rows[i].cells.length) {\n                maxRowIndex = i;\n                max = element.rows[i].cells.length;\n            }\n        }\n        return maxRowIndex;\n    };\n    Table.prototype.resizing = function (e) {\n        var _this = this;\n        var pageX = this.getPointX(e);\n        var pageY = this.getPointY(e);\n        var mouseX = (this.parent.enableRtl) ? -(pageX - this.pageX) : (pageX - this.pageX);\n        var mouseY = (this.parent.enableRtl) ? -(pageY - this.pageY) : (pageY - this.pageY);\n        this.pageX = pageX;\n        this.pageY = pageY;\n        var maxiumWidth;\n        var currentTdElement = this.curTable.closest('td');\n        var args = { event: e, requestType: 'table' };\n        var isRowCellsMerged = false;\n        var isColCellsMerged = false;\n        var mergedCellIndex;\n        var mergedElement;\n        this.parent.trigger(events.onResize, args, function (resizingArgs) {\n            if (resizingArgs.cancel) {\n                _this.cancelResizeAction();\n            }\n            else {\n                var tableReBox = _this.contentModule.getEditPanel().querySelector('.e-table-box');\n                var tableWidth = parseInt(getComputedStyle(_this.curTable).width, 10);\n                var tableHeight = parseInt(getComputedStyle(_this.curTable).height, 10);\n                var paddingSize = +getComputedStyle(_this.contentModule.getEditPanel()).paddingRight.match(/\\d/g).join('');\n                var rteWidth = _this.contentModule.getEditPanel().offsetWidth -\n                    (_this.contentModule.getEditPanel().offsetWidth -\n                        _this.contentModule.getEditPanel().clientWidth) - paddingSize * 2;\n                var widthCompare = void 0;\n                if (!isNOU(_this.curTable.parentElement.closest('table')) && !isNOU(_this.curTable.closest('td')) &&\n                    _this.contentModule.getEditPanel().contains(_this.curTable.closest('td'))) {\n                    var currentTd = _this.curTable.closest('td');\n                    var currentTDPad = +getComputedStyle(currentTd).paddingRight.match(/\\d/g).join('');\n                    // Padding of the current table with the parent element multiply with 2.\n                    widthCompare = currentTd.offsetWidth - (currentTd.offsetWidth - currentTd.clientWidth) - currentTDPad * 2;\n                }\n                else {\n                    widthCompare = rteWidth;\n                }\n                if (_this.resizeBtnStat.column) {\n                    var width = parseFloat(_this.columnEle.offsetWidth.toString());\n                    var cellRow = _this.curTable.rows[0].cells[0].nodeName === 'TH' ? 1 : 0;\n                    var currentTableWidth = void 0;\n                    if (_this.curTable.style.width !== '' && _this.curTable.style.width.includes('%')) {\n                        currentTableWidth = parseFloat(_this.curTable.style.width.split('%')[0]);\n                    }\n                    else {\n                        currentTableWidth = _this.getCurrentTableWidth(_this.curTable.offsetWidth, _this.parent.inputElement.offsetWidth);\n                    }\n                    var currentColumnCellWidth = parseFloat(_this.curTable.rows[cellRow].cells[_this.colIndex >= _this.curTable.rows[cellRow].cells.length ? _this.curTable.rows[cellRow].cells.length - 1 : _this.colIndex].style.width.split('%')[0]);\n                    if (_this.currentColumnResize === 'first') {\n                        mouseX = mouseX - 0.75; //This was done for to make the gripper and the table first/last column will be close.\n                        _this.removeResizeElement();\n                        if (currentTdElement) {\n                            maxiumWidth = _this.curTable.getBoundingClientRect().right - _this.calcPos(currentTdElement).left;\n                            _this.curTable.style.maxWidth = maxiumWidth + 'px';\n                        }\n                        // Below the value '100' is the 100% width of the parent element.\n                        if (((mouseX !== 0 && 5 < currentColumnCellWidth) || mouseX < 0) && currentTableWidth <= 100 &&\n                            _this.convertPixelToPercentage(tableWidth - mouseX, widthCompare) <= 100) {\n                            var firstColumnsCell = _this.findFirstLastColCells(_this.curTable, true);\n                            _this.curTable.style.width = _this.convertPixelToPercentage(tableWidth - mouseX, widthCompare) > 100 ? (100 + '%') :\n                                (_this.convertPixelToPercentage(tableWidth - mouseX, widthCompare) + '%');\n                            var differenceWidth = currentTableWidth - _this.convertPixelToPercentage(tableWidth - mouseX, widthCompare);\n                            _this.currentMarginLeft = _this.currentMarginLeft + differenceWidth;\n                            _this.curTable.style.marginLeft = 'calc(' + (_this.curTable.style.width === '100%' ? 0 : _this.currentMarginLeft) + '%)';\n                            for (var i = 0; i < firstColumnsCell.length; i++) {\n                                _this.curTable.rows[i].cells[_this.colIndex].style.width = (currentColumnCellWidth - differenceWidth) + '%';\n                            }\n                        }\n                    }\n                    else if (_this.currentColumnResize === 'last') {\n                        mouseX = mouseX + 0.75; //This was done for to make the gripper and the table first/last column will be close.\n                        _this.removeResizeElement();\n                        if (currentTdElement) {\n                            maxiumWidth = currentTdElement.getBoundingClientRect().right - _this.curTable.getBoundingClientRect().left;\n                            _this.curTable.style.maxWidth = maxiumWidth + 'px';\n                        }\n                        // Below the value '100' is the 100% width of the parent element.\n                        if (((mouseX !== 0 && 5 < currentColumnCellWidth) || mouseX > 0) &&\n                            currentTableWidth <= 100 && _this.convertPixelToPercentage(tableWidth + mouseX, widthCompare) <= 100) {\n                            var lastColumnsCell = _this.findFirstLastColCells(_this.curTable, false);\n                            _this.curTable.style.width = _this.convertPixelToPercentage(tableWidth + mouseX, widthCompare) > 100 ? (100 + '%') : (_this.convertPixelToPercentage(tableWidth + mouseX, widthCompare) + '%');\n                            var differenceWidth = currentTableWidth - _this.convertPixelToPercentage(tableWidth + mouseX, widthCompare);\n                            for (var i = 0; i < lastColumnsCell.length; i++) {\n                                if (_this.curTable.rows[i].cells[_this.colIndex]) {\n                                    _this.curTable.rows[i].cells[_this.curTable.rows[i].cells.length === _this.colIndex ?\n                                        _this.colIndex - 1 : _this.colIndex].style.width = (currentColumnCellWidth - differenceWidth) + '%';\n                                }\n                            }\n                        }\n                    }\n                    else {\n                        var cellColl = _this.curTable.rows[_this.calMaxCol(_this.curTable)].cells;\n                        var actualwid = width - mouseX;\n                        var totalwid = parseFloat(_this.columnEle.offsetWidth.toString()) +\n                            parseFloat(cellColl[_this.colIndex - 1].offsetWidth.toString());\n                        for (var i = 0; i < _this.curTable.rows.length; i++) {\n                            var currentRow = _this.curTable.rows[i];\n                            if ((totalwid - actualwid) > 20 && actualwid > 20) {\n                                var leftColumnWidth = totalwid - actualwid;\n                                var rightColWidth = actualwid;\n                                var index = void 0;\n                                var isMergedEleResize = false;\n                                var leftTableCell = void 0;\n                                var rightTableCell = void 0;\n                                isColCellsMerged = false;\n                                isRowCellsMerged = false;\n                                /* eslint-disable */\n                                for (var j = 0; j < currentRow.cells.length; j++) {\n                                    if (currentRow.cells[j].hasAttribute('rowspan') && j <= _this.colIndex) {\n                                        isRowCellsMerged = true;\n                                        mergedCellIndex = i;\n                                        mergedElement = currentRow.cells[j];\n                                    }\n                                    else if (currentRow.cells[j].hasAttribute('colspan') && j <= currentRow.cells.length) {\n                                        isColCellsMerged = true;\n                                        mergedCellIndex = i;\n                                        mergedElement = currentRow.cells[j];\n                                    }\n                                }\n                                if (!isNOU(currentRow.cells[i]) && currentRow.cells[i].hasAttribute('colspan')) {\n                                    index = parseInt(currentRow.cells[i].getAttribute('colspan'), 10) - 1;\n                                }\n                                else {\n                                    index = _this.colIndex;\n                                }\n                                if (isRowCellsMerged || isColCellsMerged) {\n                                    var currentResizeRow = void 0;\n                                    if (currentRow.cells.length < cellColl.length) {\n                                        index = currentRow.cells.length === _this.colIndex || currentRow === _this.curTable.rows[_this.curTable.rows.length - 1] ?\n                                            _this.colIndex - 1 : _this.colIndex;\n                                        currentResizeRow = _this.curTable.rows[!isNullOrUndefined(mergedCellIndex) ?\n                                            mergedCellIndex : _this.colIndex - 1];\n                                        if (currentResizeRow && currentResizeRow !== currentRow && (currentResizeRow.cells[_this.colIndex - 1] === mergedElement ||\n                                            currentResizeRow.cells[currentResizeRow.cells.length - 1] === mergedElement)) {\n                                            isMergedEleResize = true;\n                                        }\n                                        else {\n                                            isMergedEleResize = false;\n                                        }\n                                    }\n                                    else {\n                                        index = _this.colIndex;\n                                    }\n                                    leftTableCell = !isMergedEleResize ? currentRow.cells[index - 1] : (currentResizeRow &&\n                                        currentResizeRow.cells[currentResizeRow.cells.length - 1] !== mergedElement) ?\n                                        currentResizeRow.cells[_this.colIndex - 1] : currentRow.cells[currentRow.cells.length - 1];\n                                    rightTableCell = !isMergedEleResize ? currentRow.cells[index] : rightTableCell && rightTableCell.hasAttribute('rowspan') ?\n                                        currentResizeRow.cells[_this.colIndex] : currentResizeRow && currentResizeRow.cells[currentResizeRow.cells.length - 1] !== mergedElement ?\n                                        currentRow.cells[index - 1] : currentResizeRow.cells[currentResizeRow.cells.length - 1];\n                                }\n                                if (!isNOU(currentRow.cells[index - 1]) && !isRowCellsMerged && !isColCellsMerged) {\n                                    currentRow.cells[index - 1].style.width =\n                                        _this.convertPixelToPercentage(leftColumnWidth, tableWidth) + '%';\n                                }\n                                else {\n                                    if (leftTableCell) {\n                                        leftTableCell.style.width =\n                                            _this.convertPixelToPercentage(leftColumnWidth, tableWidth) + '%';\n                                    }\n                                }\n                                if (!isNOU(currentRow.cells[index]) && !isRowCellsMerged && !isColCellsMerged) {\n                                    currentRow.cells[index].style.width =\n                                        _this.convertPixelToPercentage(rightColWidth, tableWidth) + '%';\n                                }\n                                else {\n                                    if (rightTableCell) {\n                                        rightTableCell.style.width =\n                                            _this.convertPixelToPercentage(rightColWidth, tableWidth) + '%';\n                                    }\n                                }\n                                /* eslint-enable */\n                            }\n                        }\n                    }\n                    _this.updateHelper();\n                }\n                else if (_this.resizeBtnStat.row) {\n                    _this.parent.preventDefaultResize(e);\n                    var height = parseFloat(_this.rowEle.clientHeight.toString()) + mouseY;\n                    if (height > 20) {\n                        _this.rowEle.style.height = height + 'px';\n                    }\n                    _this.curTable.style.height = '';\n                    if (!isNOU(tableReBox)) {\n                        tableReBox.style.cssText = 'top: ' + (_this.calcPos(_this.curTable).top + tableHeight - 4) +\n                            'px; left:' + (_this.calcPos(_this.curTable).left + tableWidth - 4) + 'px;';\n                    }\n                    _this.updateHelper();\n                }\n                else if (_this.resizeBtnStat.tableBox) {\n                    if (currentTdElement) {\n                        var tableBoxPosition = _this.curTable.getBoundingClientRect().left\n                            - currentTdElement.getBoundingClientRect().left;\n                        maxiumWidth = Math.abs(tableBoxPosition - currentTdElement.getBoundingClientRect().width) - 5;\n                        _this.curTable.style.maxWidth = maxiumWidth + 'px';\n                    }\n                    var widthType = _this.curTable.style.width.indexOf('%') > -1;\n                    _this.curTable.style.width = widthType ? _this.convertPixelToPercentage(tableWidth + mouseX, widthCompare) + '%'\n                        : tableWidth + mouseX + 'px';\n                    _this.curTable.style.height = tableHeight + mouseY + 'px';\n                    if (!isNOU(tableReBox)) {\n                        tableReBox.classList.add('e-rbox-select');\n                        tableReBox.style.cssText = 'top: ' + (_this.calcPos(_this.curTable).top + tableHeight - 4) +\n                            'px; left:' + (_this.calcPos(_this.curTable).left + tableWidth - 4) + 'px;';\n                    }\n                }\n            }\n        });\n    };\n    Table.prototype.getCurrentTableWidth = function (tableWidth, parentWidth) {\n        var currentTableWidth = 0;\n        currentTableWidth = tableWidth / parentWidth * 100;\n        return currentTableWidth;\n    };\n    Table.prototype.findFirstLastColCells = function (table, isFirst) {\n        var resultColumns = [];\n        var rows = table.querySelectorAll('tr');\n        for (var i = 0; i < rows.length; i++) {\n            if (rows[i].closest('table') === table) {\n                var columns = rows[i].querySelectorAll('th, td');\n                resultColumns.push(isFirst ? columns[0] : columns[columns.length - 1]);\n            }\n        }\n        return resultColumns;\n    };\n    Table.prototype.convertPixelToPercentage = function (value, offsetValue) {\n        return (value / offsetValue) * 100;\n    };\n    Table.prototype.cancelResizeAction = function () {\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing);\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd);\n        this.removeResizeElement();\n    };\n    Table.prototype.resizeEnd = function (e) {\n        this.resizeBtnInit();\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing);\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd);\n        if (this.contentModule.getEditPanel().querySelector('.e-table-box') &&\n            this.contentModule.getEditPanel().contains(this.contentModule.getEditPanel().querySelector('.e-table-box'))) {\n            this.removeResizeElement();\n        }\n        if (this.helper && this.contentModule.getEditPanel().contains(this.helper)) {\n            detach(this.helper);\n            this.helper = null;\n        }\n        this.pageX = null;\n        this.pageY = null;\n        this.moveEle = null;\n        var args = { event: e, requestType: 'table' };\n        this.parent.trigger(events.resizeStop, args);\n        this.parent.formatter.saveData();\n    };\n    Table.prototype.resizeBtnInit = function () {\n        return this.resizeBtnStat = { column: false, row: false, tableBox: false };\n    };\n    Table.prototype.addRow = function (selectCell, e, tabkey) {\n        var cmd;\n        if (tabkey) {\n            cmd = {\n                item: { command: 'Table', subCommand: 'InsertRowAfter' }\n            };\n        }\n        var value = {\n            selection: selectCell,\n            subCommand: (tabkey) ? cmd.item.subCommand : e.item.subCommand\n        };\n        this.parent.formatter.process(this.parent, (tabkey) ? cmd : e, e, value);\n    };\n    Table.prototype.addColumn = function (selectCell, e) {\n        this.parent.formatter.process(this.parent, e, e, { selection: selectCell, width: this.parent.tableSettings.width, subCommand: e.item.subCommand });\n    };\n    Table.prototype.removeRowColumn = function (selectCell, e) {\n        this.parent.formatter.process(this.parent, e, e, { selection: selectCell, subCommand: e.item.subCommand });\n        this.hideTableQuickToolbar();\n    };\n    Table.prototype.removeTable = function (selection, args, delKey) {\n        var cmd;\n        if (delKey) {\n            cmd = { item: { command: 'Table', subCommand: 'TableRemove' } };\n        }\n        var value = {\n            selection: selection,\n            subCommand: (delKey) ? cmd.item.subCommand : args.item.subCommand\n        };\n        this.parent.formatter.process(this.parent, (delKey) ? cmd : args, args.originalEvent, value);\n        this.contentModule.getEditPanel().focus();\n        if (this.parent.inputElement.innerHTML === null || this.parent.inputElement.innerHTML === '') {\n            if (this.parent.enterKey === 'DIV') {\n                this.contentModule.getEditPanel().innerHTML = '<div><br/></div>';\n            }\n            else if (this.parent.enterKey === 'BR') {\n                this.contentModule.getEditPanel().innerHTML = '<br/>';\n            }\n            else {\n                this.contentModule.getEditPanel().innerHTML = '<p><br/></p>';\n            }\n        }\n        this.removeResizeElement();\n        this.hideTableQuickToolbar();\n    };\n    Table.prototype.renderDlgContent = function (args) {\n        var _this = this;\n        var argsTarget = args.args.originalEvent.target;\n        if (Browser.isDevice || this.parent.inlineMode.enable || !isNullOrUndefined(closest(argsTarget, '.e-rte-text-popup'))) {\n            this.insertTableDialog(args);\n            return;\n        }\n        if (this.popupObj) {\n            this.popupObj.hide();\n            return;\n        }\n        this.hideTableQuickToolbar();\n        var header = '1X1';\n        var insertbtn = this.l10n.getConstant('inserttablebtn');\n        this.dlgDiv = this.parent.createElement('div', { className: 'e-rte-table-popup' + this.parent.getCssClass(true), id: this.rteID + '_table' });\n        this.tblHeader = this.parent.createElement('div', { className: 'e-rte-popup-header' + this.parent.getCssClass(true) });\n        this.tblHeader.innerHTML = header;\n        this.dlgDiv.appendChild(this.tblHeader);\n        var tableDiv = this.parent.createElement('div', { className: 'e-rte-table-span' + this.parent.getCssClass(true) });\n        this.drawTable(tableDiv, args);\n        this.dlgDiv.appendChild(tableDiv);\n        this.dlgDiv.appendChild(this.parent.createElement('span', { className: 'e-span-border' + this.parent.getCssClass(true) }));\n        var btnEle = this.parent.createElement('button', {\n            className: 'e-insert-table-btn' + this.parent.getCssClass(true), id: this.rteID + '_insertTable',\n            attrs: { type: 'button', tabindex: '0' }\n        });\n        if (!isNOU(this.parent.getToolbarElement().querySelector('.e-expended-nav'))) {\n            this.parent.getToolbarElement().querySelector('.e-expended-nav').setAttribute('tabindex', '1');\n        }\n        this.dlgDiv.appendChild(btnEle);\n        this.createTableButton = new Button({\n            iconCss: 'e-icons e-create-table', content: insertbtn, cssClass: 'e-flat' + this.parent.getCssClass(true),\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale\n        });\n        this.createTableButton.isStringTemplate = true;\n        this.createTableButton.appendTo(btnEle);\n        EventHandler.add(btnEle, 'click', this.insertTableDialog, { self: this, args: args.args, selection: args.selection });\n        this.parent.getToolbar().appendChild(this.dlgDiv);\n        var target = args.args.originalEvent.target;\n        target = target.classList.contains('e-toolbar-item') ? target.firstChild : target.parentElement;\n        this.popupObj = new Popup(this.dlgDiv, {\n            targetType: 'relative',\n            relateTo: target,\n            collision: { X: 'fit', Y: 'none' },\n            offsetY: 8,\n            viewPortElement: this.parent.element,\n            position: { X: 'left', Y: 'bottom' },\n            enableRtl: this.parent.enableRtl,\n            zIndex: 10001,\n            // eslint-disable-next-line\n            close: function (event) {\n                _this.parent.isBlur = false;\n                _this.popupObj.destroy();\n                detach(_this.popupObj.element);\n                _this.popupObj = null;\n            }\n        });\n        addClass([this.popupObj.element], 'e-popup-open');\n        if (!isNOU(this.parent.cssClass)) {\n            addClass([this.popupObj.element], this.parent.getCssClass());\n        }\n        this.popupObj.refreshPosition(target);\n    };\n    Table.prototype.onIframeMouseDown = function () {\n        if (this.popupObj) {\n            this.popupObj.hide();\n        }\n    };\n    Table.prototype.docClick = function (e) {\n        var target = e.args.target;\n        // eslint-disable-next-line\n        if (target && target.classList && ((this.popupObj && !closest(target, '[id=' + \"'\" + this.popupObj.element.id + \"'\" + ']') ||\n            (this.editdlgObj && !closest(target, '#' + this.editdlgObj.element.id)))) && !target.classList.contains('e-create-table') &&\n            target.offsetParent && !target.offsetParent.classList.contains('e-rte-backgroundcolor-dropdown')) {\n            if (this.popupObj) {\n                this.popupObj.hide();\n            }\n            if (this.editdlgObj) {\n                this.parent.notify(events.documentClickClosedBy, { closedBy: \"outside click\" });\n                this.editdlgObj.hide();\n            }\n            this.parent.isBlur = true;\n            dispatchEvent(this.parent.element, 'focusout');\n        }\n        var closestEle = closest(target, 'td');\n        var isExist = closestEle && this.parent.contentModule.getEditPanel().contains(closestEle) ? true : false;\n        if (target && target.tagName !== 'TD' && target.tagName !== 'TH' && !isExist &&\n            closest(target, '.e-rte-quick-popup') === null && target.offsetParent &&\n            !target.offsetParent.classList.contains('e-quick-dropdown') &&\n            !target.offsetParent.classList.contains('e-rte-backgroundcolor-dropdown') && !closest(target, '.e-rte-dropdown-popup')\n            && !closest(target, '.e-rte-elements')) {\n            removeClass(this.parent.inputElement.querySelectorAll('table td'), classes.CLS_TABLE_SEL);\n            if (!Browser.isIE) {\n                this.hideTableQuickToolbar();\n            }\n        }\n        if (target && target.classList && !target.classList.contains(classes.CLS_TB_COL_RES) &&\n            !target.classList.contains(classes.CLS_TB_ROW_RES) && !target.classList.contains(classes.CLS_TB_BOX_RES)) {\n            this.removeResizeElement();\n        }\n    };\n    Table.prototype.drawTable = function (tableDiv, args) {\n        var rowDiv;\n        var tableCell;\n        for (var row = 0; row < 3; row++) {\n            rowDiv = this.parent.createElement('div', { className: 'e-rte-table-row' + this.parent.getCssClass(true), attrs: { 'data-column': '' + row } });\n            for (var col = 0; col < 10; col++) {\n                var display = (row > 2) ? 'none' : 'inline-block';\n                tableCell = this.parent.createElement('div', { className: 'e-rte-tablecell e-default' + this.parent.getCssClass(true), attrs: { 'data-cell': '' + col } });\n                rowDiv.appendChild(tableCell);\n                tableCell.style.display = display;\n                if (col === 0 && row === 0) {\n                    addClass([tableCell], 'e-active');\n                }\n                EventHandler.add(tableCell, 'mousemove', this.tableCellSelect, this);\n                EventHandler.add(rowDiv, 'mouseleave', this.tableCellLeave, this);\n                EventHandler.add(tableCell, 'mouseup', this.tableCellClick, { self: this, args: args.args, selection: args.selection });\n            }\n            tableDiv.appendChild(rowDiv);\n        }\n    };\n    Table.prototype.editTable = function (args) {\n        var _this = this;\n        this.createDialog(args);\n        var editContent = this.tableDlgContent(args);\n        var update = this.l10n.getConstant('dialogUpdate');\n        var cancel = this.l10n.getConstant('dialogCancel');\n        var editHeader = this.l10n.getConstant('tableEditHeader');\n        this.editdlgObj.setProperties({\n            height: 'initial', width: '290px', content: editContent, header: editHeader,\n            buttons: [{\n                    click: this.applyProperties.bind(this, args),\n                    buttonModel: { content: update, cssClass: 'e-flat e-size-update' + this.parent.getCssClass(true), isPrimary: true }\n                },\n                {\n                    click: function (e) {\n                        _this.cancelDialog(e);\n                    },\n                    buttonModel: { cssClass: 'e-flat e-cancel' + this.parent.getCssClass(true), content: cancel }\n                }],\n            cssClass: this.editdlgObj.cssClass + ' e-rte-edit-table-prop-dialog'\n        });\n        this.editdlgObj.element.style.maxHeight = 'none';\n        this.editdlgObj.content.querySelector('input').focus();\n        this.hideTableQuickToolbar();\n    };\n    Table.prototype.insertTableDialog = function (args) {\n        var proxy = (this.self) ? this.self : this;\n        if (proxy.popupObj) {\n            proxy.popupObj.hide();\n        }\n        proxy.createDialog(args);\n        var dlgContent = proxy.tableCellDlgContent();\n        var insert = proxy.l10n.getConstant('dialogInsert');\n        var cancel = proxy.l10n.getConstant('dialogCancel');\n        if (isNullOrUndefined(proxy.editdlgObj)) {\n            return;\n        }\n        proxy.editdlgObj.setProperties({\n            height: 'initial', width: '290px', content: dlgContent,\n            buttons: [{\n                    click: proxy.customTable.bind(this, args),\n                    buttonModel: { content: insert, cssClass: 'e-flat e-insert-table' + ' ' + proxy.parent.cssClass, isPrimary: true }\n                },\n                {\n                    click: function (e) {\n                        proxy.cancelDialog(e);\n                    },\n                    buttonModel: { cssClass: 'e-flat e-cancel' + ' ' + proxy.parent.cssClass, content: cancel }\n                }]\n        });\n        if (!isNOU(proxy.parent.cssClass)) {\n            proxy.editdlgObj.setProperties({ cssClass: proxy.parent.cssClass });\n        }\n        proxy.editdlgObj.element.style.maxHeight = 'none';\n        proxy.editdlgObj.content.querySelector('input').focus();\n    };\n    Table.prototype.tableCellDlgContent = function () {\n        var tableColumn = this.l10n.getConstant('columns');\n        var tableRow = this.l10n.getConstant('rows');\n        var tableWrap = this.parent.createElement('div', { className: 'e-cell-wrap' + this.parent.getCssClass(true) });\n        var content = '<div class=\"e-rte-field' + this.parent.getCssClass(true) + '\"><input type=\"text\" '\n            + ' data-role =\"none\" id=\"tableColumn\" class=\"e-table-column' + this.parent.getCssClass(true) + '\"/></div>'\n            + '<div class=\"e-rte-field' + this.parent.getCssClass(true) + '\"><input type=\"text\" data-role =\"none\" id=\"tableRow\" class=\"e-table-row' + this.parent.getCssClass(true) + '\" /></div>';\n        var contentElem = parseHtml(content);\n        tableWrap.appendChild(contentElem);\n        this.columnTextBox = new NumericTextBox({\n            format: 'n0',\n            min: 1,\n            value: 3,\n            placeholder: tableColumn,\n            floatLabelType: 'Auto',\n            max: 50,\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale,\n            cssClass: this.parent.getCssClass()\n        });\n        this.columnTextBox.isStringTemplate = true;\n        this.columnTextBox.appendTo(tableWrap.querySelector('#tableColumn'));\n        this.rowTextBox = new NumericTextBox({\n            format: 'n0',\n            min: 1,\n            value: 3,\n            placeholder: tableRow,\n            floatLabelType: 'Auto',\n            max: 1000,\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale,\n            cssClass: this.parent.getCssClass()\n        });\n        this.rowTextBox.isStringTemplate = true;\n        this.rowTextBox.appendTo(tableWrap.querySelector('#tableRow'));\n        return tableWrap;\n    };\n    Table.prototype.clearDialogObj = function () {\n        if (this.editdlgObj) {\n            this.editdlgObj.destroy();\n            detach(this.editdlgObj.element);\n            this.editdlgObj = null;\n        }\n    };\n    // eslint-disable-next-line\n    Table.prototype.createDialog = function (args) {\n        var _this = this;\n        if (this.editdlgObj) {\n            this.editdlgObj.hide({ returnValue: true });\n            return;\n        }\n        var tableDialog = this.parent.createElement('div', {\n            className: 'e-rte-edit-table' + this.parent.getCssClass(true), id: this.rteID + '_tabledialog'\n        });\n        this.parent.element.appendChild(tableDialog);\n        var insert = this.l10n.getConstant('dialogInsert');\n        var cancel = this.l10n.getConstant('dialogCancel');\n        var header = this.l10n.getConstant('tabledialogHeader');\n        var dialogModel = {\n            header: header,\n            cssClass: classes.CLS_RTE_ELEMENTS + this.parent.getCssClass(true),\n            enableRtl: this.parent.enableRtl,\n            locale: this.parent.locale,\n            showCloseIcon: true, closeOnEscape: true, width: (Browser.isDevice) ? '290px' : '340px', height: 'initial',\n            position: { X: 'center', Y: (Browser.isDevice) ? 'center' : 'top' },\n            isModal: Browser.isDevice,\n            buttons: [{\n                    buttonModel: { content: insert, cssClass: 'e-flat e-insert-table' + this.parent.getCssClass(true), isPrimary: true }\n                },\n                {\n                    click: function (e) {\n                        _this.cancelDialog(e);\n                    },\n                    buttonModel: { cssClass: 'e-flat e-cancel' + this.parent.getCssClass(true), content: cancel }\n                }],\n            target: (Browser.isDevice) ? document.body : this.parent.element,\n            animationSettings: { effect: 'None' },\n            close: function (event) {\n                _this.parent.isBlur = false;\n                _this.editdlgObj.destroy();\n                detach(_this.editdlgObj.element);\n                _this.dialogRenderObj.close(event);\n                _this.editdlgObj = null;\n            }\n        };\n        this.editdlgObj = this.dialogRenderObj.render(dialogModel);\n        this.editdlgObj.appendTo(tableDialog);\n        if (this.quickToolObj && this.quickToolObj.inlineQTBar && document.body.contains(this.quickToolObj.inlineQTBar.element)) {\n            this.quickToolObj.inlineQTBar.hidePopup();\n        }\n        if (this.quickToolObj && this.quickToolObj.textQTBar &&\n            this.parent.element.ownerDocument.body.contains(this.quickToolObj.textQTBar.element)) {\n            this.quickToolObj.textQTBar.hidePopup();\n        }\n    };\n    Table.prototype.customTable = function (args, e) {\n        var proxy = (this.self) ? this.self : this;\n        if (proxy.rowTextBox.value && proxy.columnTextBox.value) {\n            var argument = ((Browser.isDevice || (!isNullOrUndefined(args.args)\n                && !isNullOrUndefined(args.args.originalEvent) &&\n                args.args.originalEvent.action === 'insert-table')\n                || proxy.parent.inlineMode.enable || !isNullOrUndefined(proxy.parent.quickToolbarSettings.text)) ? args :\n                this);\n            proxy.tableInsert(proxy.rowTextBox.value, proxy.columnTextBox.value, e, argument);\n        }\n    };\n    // eslint-disable-next-line\n    Table.prototype.cancelDialog = function (e) {\n        this.parent.isBlur = false;\n        this.editdlgObj.hide({ returnValue: true });\n    };\n    // eslint-disable-next-line\n    Table.prototype.applyProperties = function (args, e) {\n        var dialogEle = this.editdlgObj.element;\n        var table = closest(args.selectNode[0], 'table');\n        table.style.width = dialogEle.querySelector('.e-table-width').value + 'px';\n        if (dialogEle.querySelector('.e-cell-padding').value !== '') {\n            var tdElm = table.querySelectorAll('td');\n            for (var i = 0; i < tdElm.length; i++) {\n                var padVal = '';\n                if (tdElm[i].style.padding === '') {\n                    padVal = tdElm[i].getAttribute('style') + ' padding:' +\n                        dialogEle.querySelector('.e-cell-padding').value + 'px;';\n                }\n                else {\n                    tdElm[i].style.padding = dialogEle.querySelector('.e-cell-padding').value + 'px';\n                    padVal = tdElm[i].getAttribute('style');\n                }\n                tdElm[i].setAttribute('style', padVal);\n            }\n        }\n        table.cellSpacing = dialogEle.querySelector('.e-cell-spacing').value;\n        if (!isNOU(table.cellSpacing) || table.cellSpacing !== '0') {\n            addClass([table], classes.CLS_TABLE_BORDER);\n        }\n        else {\n            removeClass([table], classes.CLS_TABLE_BORDER);\n        }\n        this.parent.formatter.saveData();\n        this.editdlgObj.hide({ returnValue: true });\n    };\n    Table.prototype.tableDlgContent = function (e) {\n        var selectNode = e.selectParent[0];\n        var tableWidth = this.l10n.getConstant('tableWidth');\n        var cellPadding = this.l10n.getConstant('cellpadding');\n        var cellSpacing = this.l10n.getConstant('cellspacing');\n        var tableWrap = this.parent.createElement('div', { className: 'e-table-sizewrap' + this.parent.getCssClass(true) });\n        var widthVal = closest(selectNode, 'table').getClientRects()[0].width;\n        var padVal = closest(selectNode, 'td').style.padding;\n        var brdSpcVal = closest(selectNode, 'table').getAttribute('cellspacing');\n        var content = '<div class=\"e-rte-field' + this.parent.getCssClass(true) + '\"><input type=\"text\" data-role =\"none\" id=\"tableWidth\" class=\"e-table-width' + this.parent.getCssClass(true) + '\" '\n            + ' /></div>' + '<div class=\"e-rte-field' + this.parent.getCssClass(true) + '\"><input type=\"text\" data-role =\"none\" id=\"cellPadding\" class=\"e-cell-padding' + this.parent.getCssClass(true) + '\" />'\n            + ' </div><div class=\"e-rte-field' + this.parent.getCssClass(true) + '\"><input type=\"text\" data-role =\"none\" id=\"cellSpacing\" class=\"e-cell-spacing' + this.parent.getCssClass(true) + '\" /></div>';\n        var contentElem = parseHtml(content);\n        tableWrap.appendChild(contentElem);\n        this.tableWidthNum = new NumericTextBox({\n            format: 'n0',\n            min: 0,\n            value: widthVal,\n            placeholder: tableWidth,\n            floatLabelType: 'Auto',\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale\n        });\n        this.tableWidthNum.isStringTemplate = true;\n        this.tableWidthNum.appendTo(tableWrap.querySelector('#tableWidth'));\n        this.tableCellPadding = new NumericTextBox({\n            format: 'n0',\n            min: 0,\n            // eslint-disable-next-line\n            value: padVal !== '' ? parseInt(padVal, null) : 0,\n            placeholder: cellPadding,\n            floatLabelType: 'Auto',\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale\n        });\n        this.tableCellPadding.isStringTemplate = true;\n        this.tableCellPadding.appendTo(tableWrap.querySelector('#cellPadding'));\n        this.tableCellSpacing = new NumericTextBox({\n            format: 'n0',\n            min: 0,\n            // eslint-disable-next-line\n            value: brdSpcVal !== '' && !isNOU(brdSpcVal) ? parseInt(brdSpcVal, null) : 0,\n            placeholder: cellSpacing,\n            floatLabelType: 'Auto',\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale\n        });\n        this.tableCellSpacing.isStringTemplate = true;\n        this.tableCellSpacing.appendTo(tableWrap.querySelector('#cellSpacing'));\n        return tableWrap;\n    };\n    /**\n     * Destroys the ToolBar.\n     *\n     * @function destroy\n     * @returns {void}\n     * @hidden\n\n     */\n    Table.prototype.destroy = function () {\n        if (isNOU(this.parent)) {\n            return;\n        }\n        this.removeEventListener();\n    };\n    Table.prototype.moduleDestroy = function () {\n        this.parent = null;\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {void}\n     */\n    Table.prototype.getModuleName = function () {\n        return 'table';\n    };\n    Table.prototype.afterKeyDown = function (e) {\n        var _this = this;\n        if (this.curTable) {\n            setTimeout(function () {\n                var mouseOverEvent = document.createEvent('MouseEvents');\n                mouseOverEvent.initEvent('mouseover', true, true);\n                _this.curTable.dispatchEvent(mouseOverEvent);\n            }, 1);\n        }\n    };\n    return Table;\n}());\nexport { Table };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}