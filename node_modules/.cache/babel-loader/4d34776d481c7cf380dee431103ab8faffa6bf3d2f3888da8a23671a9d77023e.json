{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nimport { extend, remove, isNullOrUndefined, setStyleAttribute, removeClass, addClass } from '@syncfusion/ej2-base';\nimport { ContentRender } from './content-renderer';\nimport * as events from '../base/constant';\nimport { isRowEnteredInGrid, parentsUntil, setDisplayValue, generateExpandPredicates, getPredicates, getGroupKeysAndFields } from '../base/util';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { GroupModelGenerator } from '../services/group-model-generator';\nimport { GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\nimport * as literals from '../base/string-literals';\n/**\n * GroupLazyLoadRenderer is used to perform lazy load grouping\n *\n * @hidden\n */\nvar GroupLazyLoadRenderer = /** @class */function (_super) {\n  __extends(GroupLazyLoadRenderer, _super);\n  function GroupLazyLoadRenderer(parent, locator) {\n    var _this = _super.call(this, parent, locator) || this;\n    _this.childCount = 0;\n    _this.scrollData = [];\n    _this.isFirstChildRow = false;\n    _this.isScrollDown = false;\n    _this.isScrollUp = false;\n    _this.groupCache = {};\n    _this.cacheRowsObj = {};\n    _this.startIndexes = {};\n    _this.captionCounts = {};\n    _this.rowsByUid = {};\n    _this.objIdxByUid = {};\n    _this.initialGroupCaptions = {};\n    _this.requestType = ['paging', 'columnstate', 'reorder', 'cancel', 'save', 'beginEdit', 'add', 'delete', 'filterBeforeOpen', 'filterchoicerequest', 'infiniteScroll', 'virtualscroll'];\n    _this.scrollTopCache = undefined;\n    /** @hidden */\n    _this.refRowsObj = {};\n    /** @hidden */\n    _this.cacheMode = false;\n    /** @hidden */\n    _this.cacheBlockSize = 5;\n    /** @hidden */\n    _this.ignoreAccent = _this.parent.allowFiltering ? _this.parent.filterSettings.ignoreAccent : false;\n    /** @hidden */\n    _this.allowCaseSensitive = false;\n    /** @hidden */\n    _this.lazyLoadQuery = [];\n    _this.locator = locator;\n    _this.groupGenerator = new GroupModelGenerator(_this.parent);\n    _this.summaryModelGen = new GroupSummaryModelGenerator(_this.parent);\n    _this.captionModelGen = new CaptionSummaryModelGenerator(_this.parent);\n    _this.rowRenderer = new RowRenderer(_this.locator, null, _this.parent);\n    _this.eventListener();\n    return _this;\n  }\n  GroupLazyLoadRenderer.prototype.eventListener = function () {\n    this.parent.addEventListener(events.actionBegin, this.actionBegin.bind(this));\n    this.parent.addEventListener(events.actionComplete, this.actionComplete.bind(this));\n    this.parent.on(events.initialEnd, this.setLazyLoadPageSize, this);\n    this.parent.on(events.setGroupCache, this.setCache, this);\n    this.parent.on(events.lazyLoadScrollHandler, this.scrollHandler, this);\n    this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n    this.parent.on(events.groupCollapse, this.collapseShortcut, this);\n  };\n  /**\n   * @param {HTMLTableRowElement} tr - specifies the table row element\n   * @returns {void}\n   * @hidden\n   */\n  GroupLazyLoadRenderer.prototype.captionExpand = function (tr) {\n    var _this = this;\n    var page = this.parent.pageSettings.currentPage;\n    var rowsObject = this.groupCache[parseInt(page.toString(), 10)];\n    var uid = tr.getAttribute('data-uid');\n    this.refreshCaches();\n    if ((!this.scrollTopCache || this.parent.scrollModule['content'].scrollTop > this.scrollTopCache) && !this.parent.enableVirtualization) {\n      this.scrollTopCache = this.parent.scrollModule['content'].scrollTop;\n    }\n    var oriIndex = this.getRowObjectIndexByUid(uid);\n    var isRowExist = rowsObject[oriIndex + 1] ? rowsObject[parseInt(oriIndex.toString(), 10)].indent < rowsObject[oriIndex + 1].indent : false;\n    if (this.parent.enableVirtualization) {\n      isRowExist = this.cacheRowsObj[\"\" + uid] ? true : false;\n    }\n    var data = rowsObject[parseInt(oriIndex.toString(), 10)];\n    var key = getGroupKeysAndFields(oriIndex, rowsObject);\n    var e = {\n      captionRowElement: tr,\n      groupInfo: data,\n      enableCaching: true,\n      cancel: false\n    };\n    this.parent.trigger(events.lazyLoadGroupExpand, e, function (args) {\n      if (args.cancel) {\n        return;\n      }\n      args.keys = key.keys;\n      args.fields = key.fields;\n      args.rowIndex = tr.rowIndex;\n      args.makeRequest = !args.enableCaching || !isRowExist;\n      if (!args.enableCaching && isRowExist) {\n        _this.clearCache([uid]);\n      }\n      args.skip = 0;\n      args.take = _this.pageSize;\n      data.isExpand = true;\n      if (_this.rowsByUid[parseInt(page.toString(), 10)][data.uid]) {\n        _this.rowsByUid[parseInt(page.toString(), 10)][data.uid].isExpand = true;\n      }\n      _this.captionRowExpand(args);\n    });\n  };\n  /**\n   * @param {HTMLTableRowElement} tr - specifies the table row element\n   * @returns {void}\n   * @hidden\n   */\n  GroupLazyLoadRenderer.prototype.captionCollapse = function (tr) {\n    var _this = this;\n    var cache = this.groupCache[this.parent.pageSettings.currentPage];\n    var rowIdx = tr.rowIndex;\n    var uid = tr.getAttribute('data-uid');\n    this.refreshCaches();\n    var captionIndex = this.getRowObjectIndexByUid(uid);\n    var e = {\n      captionRowElement: tr,\n      groupInfo: cache[parseInt(captionIndex.toString(), 10)],\n      cancel: false\n    };\n    this.parent.trigger(events.lazyLoadGroupCollapse, e, function (args) {\n      if (args.cancel) {\n        return;\n      }\n      args.isExpand = false;\n      for (var i = 0; i < _this.lazyLoadQuery.length; i++) {\n        var query = _this.lazyLoadQuery[parseInt(i.toString(), 10)];\n        var where = query[0];\n        var removeCollapse = args.groupInfo.data;\n        if (removeCollapse['key'] === where['value']) {\n          _this.lazyLoadQuery.splice(i, 1);\n        }\n      }\n      _this.removeRows(captionIndex, rowIdx, uid);\n      if (_this.parent.enableInfiniteScrolling || _this.parent.enableVirtualization) {\n        _this.groupCache[_this.parent.pageSettings.currentPage] = extend([], _this.refRowsObj[_this.parent.pageSettings.currentPage]);\n        _this.refreshRowObjects([], captionIndex);\n      }\n    });\n  };\n  /**\n   * @returns {void}\n   * @hidden */\n  GroupLazyLoadRenderer.prototype.setLazyLoadPageSize = function () {\n    var scrollEle = this.parent.getContent().firstElementChild;\n    var blockSize = Math.floor(scrollEle.offsetHeight / this.parent.getRowHeight()) - 1;\n    this.pageSize = this.pageSize ? this.pageSize : blockSize * 3;\n    this.blockSize = Math.ceil(this.pageSize / 2);\n  };\n  /**\n   * @returns {void}\n   * @hidden */\n  GroupLazyLoadRenderer.prototype.clearLazyGroupCache = function () {\n    this.clearCache();\n  };\n  GroupLazyLoadRenderer.prototype.clearCache = function (uids) {\n    uids = uids ? uids : this.getInitialCaptionIndexes();\n    var cache = this.groupCache[this.parent.pageSettings.currentPage];\n    if (uids.length) {\n      for (var i = 0; i < uids.length; i++) {\n        var capIdx = this.getRowObjectIndexByUid(uids[parseInt(i.toString(), 10)]);\n        var capRow = cache[parseInt(capIdx.toString(), 10)];\n        if (!capRow) {\n          continue;\n        }\n        if (this.captionCounts[this.parent.pageSettings.currentPage][capRow.uid]) {\n          for (var i_1 = capIdx + 1; i_1 < cache.length; i_1++) {\n            if (cache[parseInt(i_1.toString(), 10)].indent === capRow.indent || cache[parseInt(i_1.toString(), 10)].indent < capRow.indent) {\n              delete this.captionCounts[this.parent.pageSettings.currentPage][capRow.uid];\n              break;\n            }\n            if (cache[parseInt(i_1.toString(), 10)].isCaptionRow) {\n              delete this.captionCounts[this.parent.pageSettings.currentPage][cache[parseInt(i_1.toString(), 10)].uid];\n            }\n          }\n        }\n        if (capRow.isExpand) {\n          var tr = this.parent.getRowElementByUID(capRow.uid);\n          if (!tr) {\n            return;\n          }\n          this.parent.groupModule.expandCollapseRows(tr.querySelector('.e-recordplusexpand'));\n        }\n        var child = this.getNextChilds(capIdx);\n        if (!child.length) {\n          continue;\n        }\n        var subChild = [];\n        if (child[child.length - 1].isCaptionRow) {\n          subChild = this.getChildRowsByParentIndex(cache.indexOf(child[child.length - 1]), false, false, null, true, true);\n        }\n        var start = cache.indexOf(child[0]);\n        var end = subChild.length ? cache.indexOf(subChild[subChild.length - 1]) : cache.indexOf(child[child.length - 1]);\n        cache.splice(start, end - (start - 1));\n        this.refreshCaches();\n      }\n    }\n  };\n  GroupLazyLoadRenderer.prototype.refreshCaches = function () {\n    var page = this.parent.pageSettings.currentPage;\n    var cache = this.groupCache[parseInt(page.toString(), 10)];\n    if (this.parent.enableInfiniteScrolling) {\n      this.rowsByUid[parseInt(page.toString(), 10)] = [];\n      this.objIdxByUid[parseInt(page.toString(), 10)] = [];\n    } else {\n      this.rowsByUid = {};\n      this.objIdxByUid = {};\n    }\n    for (var i = 0; i < cache.length; i++) {\n      this.maintainRows(cache[parseInt(i.toString(), 10)], i);\n    }\n  };\n  GroupLazyLoadRenderer.prototype.getInitialCaptionIndexes = function () {\n    var page = this.parent.pageSettings.currentPage;\n    var uids = [];\n    for (var i = 0; i < this.initialGroupCaptions[parseInt(page.toString(), 10)].length; i++) {\n      uids.push(this.initialGroupCaptions[parseInt(page.toString(), 10)][parseInt(i.toString(), 10)].uid);\n    }\n    return uids;\n  };\n  /**\n   * @param {string} uid - specifies the uid\n   * @returns {number} returns the row object uid\n   * @hidden\n   */\n  GroupLazyLoadRenderer.prototype.getRowObjectIndexByUid = function (uid) {\n    return this.objIdxByUid[this.parent.pageSettings.currentPage][\"\" + uid];\n  };\n  GroupLazyLoadRenderer.prototype.collapseShortcut = function (args) {\n    if (this.parent.groupSettings.columns.length && args.target && parentsUntil(args.target, literals.content) && args.target.parentElement.tagName === 'TR') {\n      if (!args.collapse && parentsUntil(args.target, literals.row)) {\n        return;\n      }\n      var row = args.target.parentElement;\n      var uid = row.getAttribute('data-uid');\n      if (args.collapse) {\n        var rowObj = this.getRowByUid(uid);\n        var capRow = this.getRowByUid(rowObj.parentUid);\n        if (capRow.isCaptionRow && capRow.isExpand) {\n          var capEle = this.getRowElementByUid(rowObj.parentUid);\n          this.parent.groupModule.expandCollapseRows(capEle.cells[rowObj.indent - 1]);\n        }\n      } else {\n        var capRow = this.getRowByUid(uid);\n        if (capRow.isCaptionRow && !capRow.isExpand) {\n          var capEle = this.getRowElementByUid(uid);\n          this.parent.groupModule.expandCollapseRows(capEle.cells[capRow.indent]);\n        }\n      }\n    }\n  };\n  GroupLazyLoadRenderer.prototype.getRowByUid = function (uid) {\n    return this.rowsByUid[this.parent.pageSettings.currentPage][\"\" + uid];\n  };\n  GroupLazyLoadRenderer.prototype.actionBegin = function (args) {\n    if (!args.cancel) {\n      if (!this.requestType.some(function (value) {\n        return value === args.requestType;\n      })) {\n        this.groupCache = {};\n        this.resetRowMaintenance();\n        if (this.parent.enableVirtualization) {\n          this.parent.contentModule.currentInfo = {};\n        }\n      }\n      if (args.requestType === 'reorder' && this.parent.groupSettings.columns.length) {\n        var keys = Object.keys(this.groupCache);\n        for (var j = 0; j < keys.length; j++) {\n          var cache = this.groupCache[keys[parseInt(j.toString(), 10)]];\n          for (var i = 0; i < cache.length; i++) {\n            if (cache[parseInt(i.toString(), 10)].isCaptionRow && !this.captionModelGen.isEmpty()) {\n              this.changeCaptionRow(cache[parseInt(i.toString(), 10)], null, keys[parseInt(j.toString(), 10)]);\n            }\n            if (cache[parseInt(i.toString(), 10)].isDataRow) {\n              var from = args.fromIndex + cache[parseInt(i.toString(), 10)].indent;\n              var to = args.toIndex + cache[parseInt(i.toString(), 10)].indent;\n              this.moveCells(cache[parseInt(i.toString(), 10)].cells, from, to);\n            }\n          }\n        }\n      }\n      if (args.requestType === 'delete' || args.action === 'add' && args.requestType === 'save') {\n        this.groupCache = {};\n        this.resetRowMaintenance();\n        if (this.parent.enableVirtualization) {\n          this.parent.contentModule.currentInfo = {};\n        }\n      }\n    }\n  };\n  GroupLazyLoadRenderer.prototype.actionComplete = function (args) {\n    if (!args.cancel && args.requestType !== 'columnstate' && args.requestType !== 'beginEdit' && args.requestType !== 'delete' && args.requestType !== 'save' && args.requestType !== 'reorder') {\n      this.scrollReset();\n    }\n  };\n  GroupLazyLoadRenderer.prototype.resetRowMaintenance = function () {\n    this.startIndexes = {};\n    this.captionCounts = {};\n    this.rowsByUid = {};\n    this.objIdxByUid = {};\n    this.initialGroupCaptions = {};\n  };\n  GroupLazyLoadRenderer.prototype.moveCells = function (arr, from, to) {\n    if (from >= arr.length) {\n      var k = from - arr.length;\n      while (k-- + 1) {\n        arr.push(undefined);\n      }\n    }\n    arr.splice(from, 0, arr.splice(to, 1)[0]);\n  };\n  GroupLazyLoadRenderer.prototype.removeRows = function (idx, trIdx, uid) {\n    var page = this.parent.pageSettings.currentPage;\n    var rows = this.groupCache[parseInt(page.toString(), 10)];\n    var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n    var aggUid;\n    var count = 0;\n    if (this.parent.aggregates.length) {\n      var agg = this.getAggregateByCaptionIndex(idx);\n      aggUid = agg.length ? agg[agg.length - 1].uid : undefined;\n    }\n    var indent = rows[parseInt(idx.toString(), 10)].indent;\n    this.addClass(this.getNextChilds(parseInt(idx.toString(), 10)));\n    rows[parseInt(idx.toString(), 10)].isExpand = false;\n    if (this.rowsByUid[parseInt(page.toString(), 10)][rows[parseInt(idx.toString(), 10)].uid]) {\n      this.rowsByUid[parseInt(page.toString(), 10)][rows[parseInt(idx.toString(), 10)].uid].isExpand = false;\n    }\n    var capUid;\n    for (var i = idx + 1; i < rows.length; i++) {\n      if (rows[parseInt(i.toString(), 10)].indent === indent || rows[parseInt(i.toString(), 10)].indent < indent) {\n        capUid = rows[parseInt(i.toString(), 10)].uid;\n        break;\n      }\n      if (rows[parseInt(i.toString(), 10)].isCaptionRow && rows[parseInt(i.toString(), 10)].isExpand) {\n        this.addClass(this.getNextChilds(i));\n      }\n    }\n    for (var i = trIdx + 1; i < trs.length; i++) {\n      if (trs[parseInt(i.toString(), 10)].getAttribute('data-uid') === capUid) {\n        break;\n      } else if (trs[parseInt(i.toString(), 10)].getAttribute('data-uid') === aggUid) {\n        remove(trs[parseInt(i.toString(), 10)]);\n        break;\n      } else {\n        remove(trs[parseInt(i.toString(), 10)]);\n        this.refRowsObj[parseInt(page.toString(), 10)].splice(trIdx + 1, 1);\n        count = count + 1;\n      }\n    }\n    if (this.parent.enableVirtualization) {\n      this.cacheRowsObj[\"\" + uid] = this.groupCache[parseInt(page.toString(), 10)].slice(idx + 1, idx + 1 + count);\n      this.groupCache[parseInt(page.toString(), 10)].splice(idx + 1, count);\n      this.parent.notify(events.refreshVirtualLazyLoadCache, {\n        rows: [],\n        uid: rows[parseInt(idx.toString(), 10)].uid,\n        count: count\n      });\n      this.parent.contentModule.setVirtualHeight();\n      this.parent.islazyloadRequest = false;\n    }\n    if (this.parent.scrollModule['content'].scrollTop > this.scrollTopCache && !this.parent.enableVirtualization) {\n      this.parent.scrollModule['content'].scrollTop = this.scrollTopCache;\n    }\n    if (this.parent.getContentTable().scrollHeight < this.parent.getContent().clientHeight && this.parent.height !== 'auto') {\n      this.parent.scrollModule.setLastRowCell();\n    }\n    this.parent.notify(events.refreshExpandandCollapse, {\n      rows: this.refRowsObj[parseInt(page.toString(), 10)]\n    });\n  };\n  GroupLazyLoadRenderer.prototype.addClass = function (rows) {\n    var last = rows[this.blockSize];\n    if (last) {\n      last.lazyLoadCssClass = 'e-lazyload-middle-down';\n    }\n  };\n  GroupLazyLoadRenderer.prototype.getNextChilds = function (index, rowObjects) {\n    var group = this.groupCache[this.parent.pageSettings.currentPage];\n    var rows = rowObjects ? rowObjects : group;\n    var indent = group[parseInt(index.toString(), 10)].indent + 1;\n    var childRows = [];\n    for (var i = rowObjects ? 0 : index + 1; i < rows.length; i++) {\n      if (rows[parseInt(i.toString(), 10)].indent < indent) {\n        break;\n      }\n      if (rows[parseInt(i.toString(), 10)].indent === indent) {\n        childRows.push(rows[parseInt(i.toString(), 10)]);\n      }\n    }\n    return childRows;\n  };\n  GroupLazyLoadRenderer.prototype.lazyLoadHandler = function (args) {\n    this.setStartIndexes();\n    var tr = this.parent.getContent().querySelectorAll('tr')[args.index];\n    var uid = tr.getAttribute('data-uid');\n    var captionIndex = this.getRowObjectIndexByUid(uid);\n    var captionRow = this.groupCache[this.parent.pageSettings.currentPage][parseInt(captionIndex.toString(), 10)];\n    var rows = args.isRowExist ? args.isScroll ? this.scrollData : this.parent.enableVirtualization ? this.cacheRowsObj[\"\" + uid] : this.getChildRowsByParentIndex(captionIndex, true, true, null, true) : [];\n    this.scrollData = [];\n    if (!args.isRowExist) {\n      this.setRowIndexes(captionIndex, captionRow);\n      this.refreshCaptionRowCount(this.groupCache[this.parent.pageSettings.currentPage][parseInt(captionIndex.toString(), 10)], args.count);\n      if (Object.keys(args.data).indexOf('GroupGuid') !== -1) {\n        for (var i = 0; i < args.data.length; i++) {\n          var data = this.groupGenerator.generateCaptionRow(args.data[parseInt(i.toString(), 10)], args.level, captionRow.parentGid, undefined, 0, captionRow.uid);\n          rows.push(data);\n          if (this.parent.aggregates.length) {\n            rows = rows.concat(this.summaryModelGen.generateRows(args.data[parseInt(i.toString(), 10)], {\n              level: args.level + 1,\n              parentUid: data.uid\n            }));\n          }\n        }\n      } else {\n        this.groupGenerator.index = this.getStartIndex(captionIndex, args.isScroll);\n        rows = this.groupGenerator.generateDataRows(args.data, args.level, captionRow.parentGid, 0, captionRow.uid);\n      }\n    }\n    var trIdx = args.isScroll ? this.rowIndex : args.index;\n    var nxtChild = this.getNextChilds(captionIndex, rows);\n    var lastRow = !args.up ? this.hasLastChildRow(args.isScroll, args.count, nxtChild.length) : true;\n    if (!args.isRowExist && !lastRow) {\n      nxtChild[this.blockSize].lazyLoadCssClass = 'e-lazyload-middle-down';\n    }\n    if (!lastRow) {\n      nxtChild[nxtChild.length - 1].lazyLoadCssClass = 'e-not-lazyload-end';\n    }\n    var aggregates = !args.isScroll && !args.isRowExist ? this.getAggregateByCaptionIndex(captionIndex) : [];\n    if (!args.up) {\n      if (!args.isRowExist || this.parent.enableVirtualization && args.isRowExist && this.cacheRowsObj[\"\" + uid]) {\n        this.refreshRowObjects(rows, args.isScroll ? this.rowObjectIndex : captionIndex);\n      }\n    }\n    if (this.parent.enableVirtualization) {\n      var uid_1 = args.isScroll ? this.groupCache[this.parent.pageSettings.currentPage][this.rowIndex].uid : captionRow.uid;\n      this.parent.notify(events.refreshVirtualLazyLoadCache, {\n        rows: rows,\n        uid: uid_1\n      });\n      this.parent.contentModule.setVirtualHeight();\n      this.parent.contentModule.isTop = false;\n    }\n    this.render(trIdx, rows, lastRow, aggregates);\n    if (this.isFirstChildRow && !args.up) {\n      this.parent.getContent().firstElementChild.scrollTop = rows.length * this.parent.getRowHeight();\n    }\n    this.isFirstChildRow = false;\n    this.rowIndex = undefined;\n    this.rowObjectIndex = undefined;\n    this.childCount = 0;\n    for (var i = 0; i < rows.length; i++) {\n      this.refRowsObj[this.parent.pageSettings.currentPage].splice(captionIndex + i + 1, 0, rows[parseInt(i.toString(), 10)]);\n    }\n    if (lastRow && tr.querySelector('.e-lastrowcell')) {\n      this.parent.groupModule.lastCaptionRowBorder();\n    }\n    this.parent.notify(events.refreshExpandandCollapse, {\n      rows: this.refRowsObj[this.parent.pageSettings.currentPage]\n    });\n    if (this.parent.enableVirtualMaskRow) {\n      this.parent.removeMaskRow();\n    }\n  };\n  GroupLazyLoadRenderer.prototype.setRowIndexes = function (capIdx, row) {\n    if (!this.captionCounts[this.parent.pageSettings.currentPage]) {\n      this.captionCounts[this.parent.pageSettings.currentPage] = {};\n    }\n    if (row.isCaptionRow) {\n      this.captionCounts[this.parent.pageSettings.currentPage][row.uid] = row.data.count;\n    }\n  };\n  GroupLazyLoadRenderer.prototype.getStartIndex = function (capIdx, isScroll) {\n    var page = this.parent.pageSettings.currentPage;\n    var cache = this.groupCache[parseInt(page.toString(), 10)];\n    if (isScroll) {\n      return cache[this.rowObjectIndex].index + 1;\n    }\n    var count = 0;\n    var idx = 0;\n    var prevCapRow = this.getRowByUid(cache[parseInt(capIdx.toString(), 10)].parentUid);\n    if (prevCapRow) {\n      idx = this.prevCaptionCount(prevCapRow);\n    }\n    if (cache[parseInt(capIdx.toString(), 10)].indent > 0) {\n      for (var i = capIdx - 1; i >= 0; i--) {\n        if (cache[parseInt(i.toString(), 10)].indent < cache[parseInt(capIdx.toString(), 10)].indent) {\n          break;\n        }\n        if (cache[parseInt(i.toString(), 10)].isCaptionRow && cache[parseInt(i.toString(), 10)].indent === cache[parseInt(capIdx.toString(), 10)].indent) {\n          count = count + cache[parseInt(i.toString(), 10)].data.count;\n        }\n      }\n    }\n    var index = count + idx + this.startIndexes[parseInt(page.toString(), 10)][cache[parseInt(capIdx.toString(), 10)].parentGid];\n    return index;\n  };\n  GroupLazyLoadRenderer.prototype.prevCaptionCount = function (prevCapRow) {\n    var page = this.parent.pageSettings.currentPage;\n    var cache = this.groupCache[parseInt(page.toString(), 10)];\n    var idx = 0;\n    for (var i = cache.indexOf(prevCapRow) - 1; i >= 0; i--) {\n      if (cache[parseInt(i.toString(), 10)].indent === 0) {\n        break;\n      }\n      if (cache[parseInt(i.toString(), 10)].indent < prevCapRow.indent) {\n        break;\n      }\n      if (cache[parseInt(i.toString(), 10)].isCaptionRow && cache[parseInt(i.toString(), 10)].indent === prevCapRow.indent) {\n        var count = this.captionCounts[parseInt(page.toString(), 10)][cache[parseInt(i.toString(), 10)].uid];\n        idx = idx + (count ? count : cache[parseInt(i.toString(), 10)].data.count);\n      }\n    }\n    var capRow = this.getRowByUid(prevCapRow.parentUid);\n    if (capRow) {\n      idx = idx + this.prevCaptionCount(capRow);\n    }\n    return idx;\n  };\n  GroupLazyLoadRenderer.prototype.setStartIndexes = function () {\n    var cache = this.groupCache[this.parent.pageSettings.currentPage];\n    if (!this.startIndexes[this.parent.pageSettings.currentPage]) {\n      var indexes = [];\n      var idx = void 0;\n      for (var i = 0; i < cache.length; i++) {\n        if (cache[parseInt(i.toString(), 10)].isCaptionRow) {\n          if (!indexes.length) {\n            indexes.push(0);\n          } else {\n            indexes.push(cache[parseInt(idx.toString(), 10)].data.count + indexes[indexes.length - 1]);\n          }\n          idx = i;\n        }\n      }\n      this.startIndexes[this.parent.pageSettings.currentPage] = indexes;\n    }\n  };\n  GroupLazyLoadRenderer.prototype.hasLastChildRow = function (isScroll, captionCount, rowCount) {\n    return isScroll ? captionCount === this.childCount + rowCount : captionCount === rowCount;\n  };\n  GroupLazyLoadRenderer.prototype.refreshCaptionRowCount = function (row, count) {\n    row.data.count = count;\n  };\n  GroupLazyLoadRenderer.prototype.render = function (trIdx, rows, hasLastChildRow, aggregates) {\n    var tr = this.parent.getContent().querySelectorAll('tr')[parseInt(trIdx.toString(), 10)];\n    var scrollEle = this.parent.getContent().firstElementChild;\n    var rowHeight = this.parent.getRowHeight();\n    if (tr && aggregates.length) {\n      for (var i = aggregates.length - 1; i >= 0; i--) {\n        tr.insertAdjacentElement('afterend', this.rowRenderer.render(aggregates[parseInt(i.toString(), 10)], this.parent.getColumns()));\n      }\n    }\n    if (tr && rows.length) {\n      for (var i = rows.length - 1; i >= 0; i--) {\n        if (this.confirmRowRendering(rows[parseInt(i.toString(), 10)])) {\n          tr.insertAdjacentElement('afterend', this.rowRenderer.render(rows[parseInt(i.toString(), 10)], this.parent.getColumns()));\n          if (this.isScrollDown) {\n            scrollEle.scrollTop = scrollEle.scrollTop - rowHeight;\n          }\n          if (this.isScrollUp) {\n            scrollEle.scrollTop = scrollEle.scrollTop + rowHeight;\n          }\n        }\n      }\n    }\n    this.isScrollDown = false;\n    this.isScrollUp = false;\n  };\n  /**\n   * @param {Row<Column>} row - specifies the row\n   * @param {number} index - specifies the index\n   * @returns {void}\n   * @hidden\n   */\n  GroupLazyLoadRenderer.prototype.maintainRows = function (row, index) {\n    var page = this.parent.pageSettings.currentPage;\n    if (!this.rowsByUid[parseInt(page.toString(), 10)]) {\n      this.rowsByUid[parseInt(page.toString(), 10)] = {};\n      this.objIdxByUid[parseInt(page.toString(), 10)] = {};\n    }\n    if (row.uid) {\n      this.rowsByUid[parseInt(page.toString(), 10)][row.uid] = row;\n    }\n    this.objIdxByUid[parseInt(page.toString(), 10)][row.uid] = index;\n  };\n  GroupLazyLoadRenderer.prototype.confirmRowRendering = function (row) {\n    var check = true;\n    if (isNullOrUndefined(row.indent) && !row.isDataRow && !row.isCaptionRow) {\n      var cap = this.getRowByUid(row.parentUid);\n      if (cap.isCaptionRow && !cap.isExpand) {\n        check = false;\n      }\n    }\n    return check;\n  };\n  GroupLazyLoadRenderer.prototype.refreshRowObjects = function (newRows, index) {\n    var page = this.parent.pageSettings.currentPage;\n    var rowsObject = this.groupCache[parseInt(page.toString(), 10)];\n    this.rowsByUid[parseInt(page.toString(), 10)] = {};\n    this.objIdxByUid[parseInt(page.toString(), 10)] = {};\n    var newRowsObject = [];\n    var k = 0;\n    for (var i = 0; i < rowsObject.length; i++) {\n      if (i === index) {\n        this.maintainRows(rowsObject[parseInt(i.toString(), 10)], k);\n        newRowsObject.push(rowsObject[parseInt(i.toString(), 10)]);\n        k++;\n        for (var j = 0; j < newRows.length; j++) {\n          this.maintainRows(newRows[parseInt(j.toString(), 10)], k);\n          newRowsObject.push(newRows[parseInt(j.toString(), 10)]);\n          k++;\n        }\n      } else {\n        this.maintainRows(rowsObject[parseInt(i.toString(), 10)], k);\n        newRowsObject.push(rowsObject[parseInt(i.toString(), 10)]);\n        k++;\n      }\n    }\n    this.groupCache[this.parent.pageSettings.currentPage] = extend([], newRowsObject);\n    this.updateCurrentViewData();\n  };\n  GroupLazyLoadRenderer.prototype.getAggregateByCaptionIndex = function (index) {\n    var cache = this.groupCache[this.parent.pageSettings.currentPage];\n    var parent = cache[parseInt(index.toString(), 10)];\n    var indent = parent.indent;\n    var uid = parent.uid;\n    var agg = [];\n    for (var i = index + 1; i < cache.length; i++) {\n      if (cache[parseInt(i.toString(), 10)].indent === indent) {\n        break;\n      }\n      if (isNullOrUndefined(cache[parseInt(i.toString(), 10)].indent) && cache[parseInt(i.toString(), 10)].parentUid === uid) {\n        agg.push(cache[parseInt(i.toString(), 10)]);\n      }\n    }\n    return agg;\n  };\n  GroupLazyLoadRenderer.prototype.getChildRowsByParentIndex = function (index, deep, block, data, includeAgg, includeCollapseAgg) {\n    var cache = data ? data : this.groupCache[this.parent.pageSettings.currentPage];\n    var parentRow = cache[parseInt(index.toString(), 10)];\n    var agg = [];\n    if (!parentRow.isCaptionRow || parentRow.isCaptionRow && !parentRow.isExpand && !includeCollapseAgg) {\n      return [];\n    }\n    if (includeAgg && this.parent.aggregates.length) {\n      agg = this.getAggregateByCaptionIndex(index);\n    }\n    var indent = parentRow.indent;\n    var uid = parentRow.uid;\n    var rows = [];\n    var count = 0;\n    for (var i = index + 1; i < cache.length; i++) {\n      if (cache[parseInt(i.toString(), 10)].parentUid === uid) {\n        if (isNullOrUndefined(cache[parseInt(i.toString(), 10)].indent)) {\n          continue;\n        }\n        count++;\n        rows.push(cache[parseInt(i.toString(), 10)]);\n        if (deep && cache[parseInt(i.toString(), 10)].isCaptionRow) {\n          rows = rows.concat(this.getChildRowsByParentIndex(i, deep, block, data, includeAgg));\n        }\n        if (block && count === this.pageSize) {\n          break;\n        }\n      }\n      if (cache[parseInt(i.toString(), 10)].indent === indent) {\n        break;\n      }\n    }\n    return rows.concat(agg);\n  };\n  /**\n   * @param {boolean} isReorder - specifies the isreorder\n   * @returns {Row<Column>[]} returns the row\n   * @hidden\n   */\n  GroupLazyLoadRenderer.prototype.initialGroupRows = function (isReorder) {\n    var rows = [];\n    var cache = this.groupCache[this.parent.pageSettings.currentPage];\n    if (isReorder) {\n      return this.getRenderedRowsObject();\n    }\n    for (var i = 0; i < cache.length; i++) {\n      if (cache[parseInt(i.toString(), 10)].indent === 0) {\n        rows.push(cache[parseInt(i.toString(), 10)]);\n        rows = rows.concat(this.getChildRowsByParentIndex(i, true, true, cache, true));\n      }\n    }\n    return rows;\n  };\n  /**\n   * @returns {Row<Column>[]} retruns the row\n   * @hidden */\n  GroupLazyLoadRenderer.prototype.getRenderedRowsObject = function () {\n    var rows = [];\n    var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n    for (var i = 0; i < trs.length; i++) {\n      rows.push(this.getRowByUid(trs[parseInt(i.toString(), 10)].getAttribute('data-uid')));\n    }\n    return rows;\n  };\n  GroupLazyLoadRenderer.prototype.getCacheRowsOnDownScroll = function (index) {\n    var rows = [];\n    var rowsObject = this.groupCache[this.parent.pageSettings.currentPage];\n    var k = index;\n    for (var i = 0; i < this.pageSize; i++) {\n      if (!rowsObject[parseInt(k.toString(), 10)] || rowsObject[parseInt(k.toString(), 10)].indent < rowsObject[parseInt(index.toString(), 10)].indent) {\n        break;\n      }\n      if (rowsObject[parseInt(k.toString(), 10)].indent === rowsObject[parseInt(index.toString(), 10)].indent) {\n        rows.push(rowsObject[parseInt(k.toString(), 10)]);\n        if (rowsObject[parseInt(k.toString(), 10)].isCaptionRow && rowsObject[parseInt(k.toString(), 10)].isExpand) {\n          rows = rows.concat(this.getChildRowsByParentIndex(k, true, true, null, true));\n        }\n      }\n      if (rowsObject[parseInt(k.toString(), 10)].indent > rowsObject[parseInt(index.toString(), 10)].indent || isNullOrUndefined(rowsObject[parseInt(k.toString(), 10)].indent)) {\n        i--;\n      }\n      k++;\n    }\n    return rows;\n  };\n  GroupLazyLoadRenderer.prototype.getCacheRowsOnUpScroll = function (start, end, index) {\n    var rows = [];\n    var rowsObject = this.groupCache[this.parent.pageSettings.currentPage];\n    var str = false;\n    for (var i = 0; i < rowsObject.length; i++) {\n      if (str && (!rowsObject[parseInt(i.toString(), 10)] || rowsObject[parseInt(i.toString(), 10)].indent < rowsObject[parseInt(index.toString(), 10)].indent || rowsObject[parseInt(i.toString(), 10)].uid === end)) {\n        break;\n      }\n      if (!str && rowsObject[parseInt(i.toString(), 10)].uid === start) {\n        str = true;\n      }\n      if (str && rowsObject[parseInt(i.toString(), 10)].indent === rowsObject[parseInt(index.toString(), 10)].indent) {\n        rows.push(rowsObject[parseInt(i.toString(), 10)]);\n        if (rowsObject[parseInt(i.toString(), 10)].isCaptionRow && rowsObject[parseInt(i.toString(), 10)].isExpand) {\n          rows = rows.concat(this.getChildRowsByParentIndex(i, true, true, null, true));\n        }\n      }\n    }\n    return rows;\n  };\n  GroupLazyLoadRenderer.prototype.scrollHandler = function (e) {\n    if (this.parent.isDestroyed || this.childCount) {\n      return;\n    }\n    var downTrs = [].slice.call(this.parent.getContent().getElementsByClassName('e-lazyload-middle-down'));\n    var upTrs = [].slice.call(this.parent.getContent().getElementsByClassName('e-lazyload-middle-up'));\n    var endTrs = [].slice.call(this.parent.getContent().getElementsByClassName('e-not-lazyload-end'));\n    var tr;\n    var lazyLoadDown = false;\n    var lazyLoadUp = false;\n    var lazyLoadEnd = false;\n    if (e.scrollDown && downTrs.length) {\n      var result = this.findRowElements(downTrs);\n      tr = result.tr;\n      lazyLoadDown = result.entered;\n    }\n    if (!e.scrollDown && endTrs) {\n      for (var i = 0; i < endTrs.length; i++) {\n        var top_1 = endTrs[parseInt(i.toString(), 10)].getBoundingClientRect().top;\n        var scrollHeight = this.parent.getContent().scrollHeight;\n        if (top_1 > 0 && top_1 < scrollHeight) {\n          tr = endTrs[parseInt(i.toString(), 10)];\n          lazyLoadEnd = true;\n          this.rowIndex = tr.rowIndex;\n          break;\n        }\n      }\n    }\n    if (!e.scrollDown && upTrs.length && !lazyLoadEnd) {\n      var result = this.findRowElements(upTrs);\n      tr = result.tr;\n      lazyLoadUp = result.entered;\n    }\n    if (tr && !tr.classList.contains('e-masked-row')) {\n      if (lazyLoadDown && e.scrollDown && lazyLoadDown && tr) {\n        this.scrollDownHandler(tr);\n      }\n      if (!e.scrollDown && lazyLoadEnd && tr) {\n        this.scrollUpEndRowHandler(tr);\n      }\n      if (this.cacheMode && !e.scrollDown && !lazyLoadEnd && lazyLoadUp && tr) {\n        this.scrollUpHandler(tr);\n      }\n    }\n  };\n  GroupLazyLoadRenderer.prototype.scrollUpEndRowHandler = function (tr) {\n    var page = this.parent.pageSettings.currentPage;\n    var rows = this.groupCache[parseInt(page.toString(), 10)];\n    var uid = tr.getAttribute('data-uid');\n    var index = this.rowObjectIndex = this.getRowObjectIndexByUid(uid);\n    var idx = index;\n    var childRow = rows[parseInt(index.toString(), 10)];\n    var parentCapRow = this.getRowByUid(childRow.parentUid);\n    var capRowObjIdx = this.getRowObjectIndexByUid(parentCapRow.uid);\n    var captionRowEle = this.parent.getContent().querySelector('tr[data-uid=' + parentCapRow.uid + ']');\n    var capRowEleIndex = captionRowEle.rowIndex;\n    var child = this.getChildRowsByParentIndex(capRowObjIdx);\n    var childIdx = child.indexOf(childRow);\n    var currentPage = Math.ceil(childIdx / this.pageSize);\n    if (currentPage === 1) {\n      return;\n    }\n    this.childCount = currentPage * this.pageSize;\n    index = this.getCurrentBlockEndIndex(childRow, index);\n    if (this.childCount < parentCapRow.data.count) {\n      tr.classList.remove('e-not-lazyload-end');\n      childRow.lazyLoadCssClass = '';\n      var isRowExist = rows[index + 1] ? childRow.indent === rows[index + 1].indent : false;\n      this.scrollData = isRowExist ? this.getCacheRowsOnDownScroll(index + 1) : [];\n      var key = getGroupKeysAndFields(capRowObjIdx, rows);\n      var args = {\n        rowIndex: capRowEleIndex,\n        makeRequest: !isRowExist,\n        groupInfo: parentCapRow,\n        fields: key.fields,\n        keys: key.keys,\n        skip: this.childCount,\n        take: this.pageSize,\n        isScroll: true\n      };\n      if (this.cacheMode && this.childCount >= this.pageSize * this.cacheBlockSize) {\n        var child_1 = this.getChildRowsByParentIndex(capRowObjIdx);\n        var currenBlock = Math.ceil(child_1.indexOf(rows[parseInt(idx.toString(), 10)]) / this.pageSize);\n        var removeBlock = currenBlock - (this.cacheBlockSize - 1);\n        this.removeBlock(uid, isRowExist, removeBlock, child_1);\n        args.cachedRowIndex = removeBlock * this.pageSize;\n      }\n      this.captionRowExpand(args);\n    } else {\n      this.childCount = 0;\n    }\n  };\n  GroupLazyLoadRenderer.prototype.scrollDownHandler = function (tr) {\n    var page = this.parent.pageSettings.currentPage;\n    var rows = this.groupCache[parseInt(page.toString(), 10)];\n    var uid = tr.getAttribute('data-uid');\n    var index = this.getRowObjectIndexByUid(uid);\n    var idx = index;\n    var childRow = rows[parseInt(index.toString(), 10)];\n    var parentCapRow = this.getRowByUid(childRow.parentUid);\n    var capRowObjIdx = this.getRowObjectIndexByUid(parentCapRow.uid);\n    var captionRowEle = this.getRowElementByUid(parentCapRow.uid);\n    var capRowEleIndex = captionRowEle.rowIndex;\n    var child = this.getChildRowsByParentIndex(capRowObjIdx);\n    if (child.length === 0) {\n      return;\n    }\n    var childIdx = child.indexOf(childRow);\n    var currentPage = Math.ceil(childIdx / this.pageSize);\n    this.childCount = currentPage * this.pageSize;\n    if (isNullOrUndefined(child[this.childCount - 1])) {\n      return;\n    }\n    if (this.parent.enableVirtualization) {\n      this.parent.islazyloadRequest = true;\n    }\n    index = this.rowObjectIndex = this.getRowObjectIndexByUid(child[this.childCount - 1].uid);\n    var lastchild = rows[parseInt(index.toString(), 10)];\n    var lastRow = this.getRowElementByUid(lastchild.uid);\n    this.rowIndex = lastRow.rowIndex;\n    index = this.getCurrentBlockEndIndex(lastchild, index);\n    if (this.childCount === parentCapRow.data.count) {\n      this.parent.islazyloadRequest = false;\n    }\n    if (this.childCount < parentCapRow.data.count) {\n      var isRowExist = rows[index + 1] ? childRow.indent === rows[index + 1].indent : false;\n      if (isRowExist && !isNullOrUndefined(this.getRowElementByUid(rows[index + 1].uid))) {\n        this.parent.islazyloadRequest = false;\n        this.childCount = 0;\n        return;\n      }\n      if (currentPage > 1 || !this.cacheMode) {\n        tr.classList.remove('e-lazyload-middle-down');\n        lastRow.classList.remove('e-not-lazyload-end');\n        lastchild.lazyLoadCssClass = '';\n      }\n      this.scrollData = isRowExist ? this.getCacheRowsOnDownScroll(this.rowObjectIndex + 1) : [];\n      var query = getGroupKeysAndFields(capRowObjIdx, rows);\n      var args = {\n        rowIndex: capRowEleIndex,\n        makeRequest: !isRowExist,\n        groupInfo: parentCapRow,\n        fields: query.fields,\n        keys: query.keys,\n        skip: this.childCount,\n        take: this.pageSize,\n        isScroll: true\n      };\n      if (this.cacheMode && this.childCount - this.pageSize >= this.pageSize * this.cacheBlockSize) {\n        this.isScrollDown = true;\n        var child_2 = this.getChildRowsByParentIndex(capRowObjIdx);\n        var currenBlock = Math.ceil(child_2.indexOf(rows[parseInt(idx.toString(), 10)]) / this.pageSize) - 1;\n        var removeBlock = currenBlock - (this.cacheBlockSize - 1) + 1;\n        this.removeBlock(uid, isRowExist, removeBlock, child_2, lastchild);\n        args.cachedRowIndex = removeBlock * this.pageSize;\n      }\n      this.captionRowExpand(args);\n    } else {\n      this.childCount = 0;\n      this.parent.islazyloadRequest = false;\n    }\n  };\n  GroupLazyLoadRenderer.prototype.getCurrentBlockEndIndex = function (row, index) {\n    var page = this.parent.pageSettings.currentPage;\n    var rows = this.groupCache[parseInt(page.toString(), 10)];\n    if (row.isCaptionRow) {\n      if (row.isExpand) {\n        var childCount = this.getChildRowsByParentIndex(index, true).length;\n        this.rowIndex = this.rowIndex + childCount;\n      }\n      var agg = this.getAggregateByCaptionIndex(index);\n      this.rowObjectIndex = this.rowObjectIndex + agg.length;\n      var idx = index;\n      for (var i = idx + 1; i < rows.length; i++) {\n        if (rows[parseInt(i.toString(), 10)].indent === rows[parseInt(index.toString(), 10)].indent || rows[parseInt(i.toString(), 10)].indent < rows[parseInt(index.toString(), 10)].indent) {\n          index = idx;\n          break;\n        } else {\n          idx++;\n        }\n      }\n    }\n    return index;\n  };\n  GroupLazyLoadRenderer.prototype.removeBlock = function (uid, isRowExist, removeBlock, child, lastchild) {\n    var page = this.parent.pageSettings.currentPage;\n    var rows = this.groupCache[parseInt(page.toString(), 10)];\n    var uid1 = child[(removeBlock + 1) * this.pageSize - 1 - this.blockSize].uid;\n    var uid2 = child[removeBlock * this.pageSize - this.pageSize].uid;\n    var uid3 = child[removeBlock * this.pageSize].uid;\n    var firstIdx = this.getRowObjectIndexByUid(uid1);\n    rows[parseInt(firstIdx.toString(), 10)].lazyLoadCssClass = 'e-lazyload-middle-up';\n    this.getRowElementByUid(uid1).classList.add('e-lazyload-middle-up');\n    if (lastchild) {\n      this.getRowElementByUid(uid3).classList.add('e-not-lazyload-first');\n      this.getRowByUid(uid3).lazyLoadCssClass = 'e-not-lazyload-first';\n      this.getRowByUid(uid2).lazyLoadCssClass = '';\n    }\n    if (isRowExist) {\n      this.removeTopRows(lastchild ? lastchild.uid : uid, uid2, uid3);\n    } else {\n      this.uid1 = uid2;\n      this.uid2 = uid3;\n      this.uid3 = lastchild ? lastchild.uid : uid;\n    }\n  };\n  GroupLazyLoadRenderer.prototype.scrollUpHandler = function (tr) {\n    var page = this.parent.pageSettings.currentPage;\n    var rows = this.groupCache[parseInt(page.toString(), 10)];\n    var uid = tr.getAttribute('data-uid');\n    var row = this.getRowByUid(uid);\n    var index = this.rowObjectIndex = this.getRowObjectIndexByUid(uid);\n    var parentCapRow = this.getRowByUid(row.parentUid);\n    var capRowObjIdx = this.rowIndex = this.getRowObjectIndexByUid(parentCapRow.uid);\n    var captionRowEle = this.parent.getRowElementByUID(parentCapRow.uid);\n    var capRowEleIndex = captionRowEle.rowIndex;\n    var child = this.getChildRowsByParentIndex(capRowObjIdx);\n    var childIdx = child.indexOf(rows[parseInt(index.toString(), 10)]);\n    var currenBlock = Math.floor(childIdx / this.pageSize);\n    var idx = this.blockSize;\n    if (this.blockSize * 2 > this.pageSize) {\n      idx = this.blockSize * 2 - this.pageSize;\n      idx = this.blockSize - idx;\n    }\n    var start = child[childIdx - (idx - 1) - this.pageSize].uid;\n    var end = child[childIdx - (idx - 1)].uid;\n    this.scrollData = this.getCacheRowsOnUpScroll(start, end, index - (idx - 1));\n    this.isFirstChildRow = currenBlock > 1;\n    if (this.isFirstChildRow) {\n      this.scrollData[0].lazyLoadCssClass = 'e-not-lazyload-first';\n    }\n    this.getRowByUid(end).lazyLoadCssClass = '';\n    this.getRowElementByUid(end).classList.remove('e-not-lazyload-first');\n    var removeBlock = currenBlock + this.cacheBlockSize;\n    if (child.length !== parentCapRow.data.count && removeBlock * this.pageSize > child.length) {\n      this.isFirstChildRow = false;\n      this.scrollData[0].lazyLoadCssClass = '';\n      this.getRowElementByUid(end).classList.add('e-not-lazyload-first');\n      return;\n    }\n    var count = removeBlock * this.pageSize > parentCapRow.data.count ? parentCapRow.data.count : removeBlock * this.pageSize;\n    var size = removeBlock * this.pageSize > parentCapRow.data.count ? this.pageSize - (this.pageSize * removeBlock - parentCapRow.data.count) : this.pageSize;\n    var childRows = this.getChildRowsByParentIndex(rows.indexOf(child[count - 1]), true, false, null, true);\n    var uid1 = childRows.length ? childRows[childRows.length - 1].uid : child[count - 1].uid;\n    var uid2 = child[count - size].uid;\n    var uid3 = child[count - size - 1].uid;\n    var lastIdx = this.objIdxByUid[parseInt(page.toString(), 10)][\"\" + uid2] - idx;\n    if (rows[parseInt(lastIdx.toString(), 10)].lazyLoadCssClass === 'e-lazyload-middle-down') {\n      var trEle = this.getRowElementByUid(rows[parseInt(lastIdx.toString(), 10)].uid);\n      if (trEle) {\n        trEle.classList.add('e-lazyload-middle-down');\n      }\n    }\n    this.getRowByUid(uid1).lazyLoadCssClass = '';\n    this.getRowByUid(uid3).lazyLoadCssClass = 'e-not-lazyload-end';\n    this.getRowElementByUid(uid3).classList.add('e-not-lazyload-end');\n    this.removeBottomRows(uid1, uid2, uid3);\n    this.rowIndex = tr.rowIndex - idx;\n    if (tr.classList.length > 1) {\n      tr.classList.remove('e-lazyload-middle-up');\n    } else {\n      tr.removeAttribute('class');\n    }\n    if (!isNullOrUndefined(this.getRowElementByUid(start))) {\n      this.childCount = 0;\n      this.scrollData = [];\n      return;\n    }\n    var key = getGroupKeysAndFields(this.getRowObjectIndexByUid(parentCapRow.uid), rows);\n    var args = {\n      rowIndex: capRowEleIndex,\n      makeRequest: false,\n      groupInfo: parentCapRow,\n      fields: key.fields,\n      keys: key.keys,\n      skip: this.childCount,\n      take: this.pageSize,\n      isScroll: true,\n      scrollUp: true\n    };\n    this.isScrollUp = true;\n    this.captionRowExpand(args);\n  };\n  GroupLazyLoadRenderer.prototype.findRowElements = function (rows) {\n    var entered = false;\n    var tr;\n    for (var i = 0; i < rows.length; i++) {\n      var rowIdx = rows[parseInt(i.toString(), 10)].rowIndex;\n      if (this.parent.enableVirtualization) {\n        var currentInfo = this.parent.contentModule.currentInfo;\n        if (currentInfo && currentInfo.blockIndexes && currentInfo.blockIndexes[0] > 1) {\n          rowIdx = rowIdx + this.parent.contentModule.offsets[currentInfo.blockIndexes[0] - 1] / this.parent.getRowHeight();\n        }\n      }\n      if (isRowEnteredInGrid(rowIdx, this.parent)) {\n        entered = true;\n        this.rowIndex = rowIdx;\n        tr = rows[parseInt(i.toString(), 10)];\n        break;\n      }\n    }\n    return {\n      entered: entered,\n      tr: tr\n    };\n  };\n  GroupLazyLoadRenderer.prototype.getRowElementByUid = function (uid) {\n    return this.parent.getContent().querySelector('tr[data-uid=' + uid + ']');\n  };\n  GroupLazyLoadRenderer.prototype.removeTopRows = function (uid1, uid2, uid3) {\n    var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n    var start = false;\n    for (var i = 0; i < trs.length; i++) {\n      if (trs[parseInt(i.toString(), 10)].getAttribute('data-uid') === uid3) {\n        var tr = this.parent.getContent().querySelector('tr[data-uid=' + uid1 + ']');\n        if (tr) {\n          this.rowIndex = tr.rowIndex;\n        }\n        break;\n      }\n      if (trs[parseInt(i.toString(), 10)].getAttribute('data-uid') === uid2) {\n        start = true;\n      }\n      if (start) {\n        remove(trs[parseInt(i.toString(), 10)]);\n      }\n    }\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  GroupLazyLoadRenderer.prototype.removeBottomRows = function (uid1, uid2, uid3) {\n    var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n    var trigger = false;\n    for (var i = 0; i < trs.length; i++) {\n      if (trs[parseInt(i.toString(), 10)].getAttribute('data-uid') === uid2) {\n        trigger = true;\n      }\n      if (trigger) {\n        remove(trs[parseInt(i.toString(), 10)]);\n        if (trs[parseInt(i.toString(), 10)].getAttribute('data-uid') === uid1) {\n          break;\n        }\n      }\n    }\n  };\n  GroupLazyLoadRenderer.prototype.setCache = function (e) {\n    var page = this.parent.pageSettings.currentPage;\n    if (this.parent.enableVirtualization) {\n      this.parent.lazyLoadRender = this;\n    }\n    if (this.parent.enableInfiniteScrolling && e.args.requestType === 'infiniteScroll' && e.args['prevPage'] !== e.args['currentPage']) {\n      this.groupCache[parseInt(page.toString(), 10)] = this.initialGroupCaptions[parseInt(page.toString(), 10)] = this.groupCache[e.args['prevPage']].concat(extend([], e.data));\n    } else {\n      this.groupCache[parseInt(page.toString(), 10)] = this.initialGroupCaptions[parseInt(page.toString(), 10)] = extend([], e.data);\n    }\n  };\n  GroupLazyLoadRenderer.prototype.captionRowExpand = function (args) {\n    var _this = this;\n    var captionRow = args.groupInfo;\n    var level = this.parent.groupSettings.columns.indexOf(captionRow.data.field) + 1;\n    var pred = generateExpandPredicates(args.fields, args.keys, this);\n    var predicateList = getPredicates(pred);\n    var lazyLoad = {\n      level: level,\n      skip: args.skip,\n      take: args.take,\n      where: predicateList\n    };\n    args.lazyLoadQuery = lazyLoad;\n    args.requestType = 'onDemandGroupInfo';\n    if (args.makeRequest) {\n      var query = this.parent.renderModule.data.generateQuery(true);\n      if (!query.isCountRequired) {\n        query.isCountRequired = true;\n      }\n      query.lazyLoad.push({\n        key: 'onDemandGroupInfo',\n        value: lazyLoad\n      });\n      this.lazyLoadQuery.push(lazyLoad['where']);\n      if (args.isScroll && this.parent.enableVirtualMaskRow) {\n        this.parent.showMaskRow();\n      } else {\n        this.parent.showSpinner();\n      }\n      this.parent.renderModule.data.getData(args, query).then(function (e) {\n        if (_this.parent.enableVirtualization) {\n          _this.parent.islazyloadRequest = true;\n        }\n        _this.parent.hideSpinner();\n        _this.parent.removeMaskRow();\n        if (e.result.length === 0) {\n          return;\n        }\n        if (_this.cacheMode && _this.uid1 && _this.uid2) {\n          _this.removeTopRows(_this.uid3, _this.uid1, _this.uid2);\n          _this.uid1 = _this.uid2 = _this.uid3 = undefined;\n        }\n        _this.lazyLoadHandler({\n          data: e.result,\n          count: e.count,\n          level: level,\n          index: args.rowIndex,\n          isRowExist: false,\n          isScroll: args.isScroll,\n          up: false,\n          rowIndex: args.cachedRowIndex\n        });\n      }).catch(function (e) {\n        return _this.parent.renderModule.dataManagerFailure(e, {\n          requestType: 'grouping'\n        });\n      });\n    } else {\n      this.lazyLoadHandler({\n        data: null,\n        count: args.groupInfo.data.count,\n        level: level,\n        index: args.rowIndex,\n        isRowExist: true,\n        isScroll: args.isScroll,\n        up: args.scrollUp,\n        rowIndex: args.cachedRowIndex\n      });\n    }\n  };\n  GroupLazyLoadRenderer.prototype.scrollReset = function (top) {\n    this.parent.getContent().firstElementChild.scrollTop = top ? this.parent.getContent().firstElementChild.scrollTop + top : 0;\n  };\n  GroupLazyLoadRenderer.prototype.updateCurrentViewData = function () {\n    var records = [];\n    this.getRows().filter(function (row) {\n      if (row.isDataRow) {\n        records[row.index] = row.data;\n      }\n    });\n    this.parent.currentViewData = records.length ? records : this.parent.currentViewData;\n  };\n  /**\n   * @returns {Row<Column>[]} returns the row\n   * @hidden */\n  GroupLazyLoadRenderer.prototype.getGroupCache = function () {\n    return this.groupCache;\n  };\n  /**\n   * @returns {Row<Column>[]} returns the row\n   * @hidden */\n  GroupLazyLoadRenderer.prototype.getRows = function () {\n    return this.groupCache[this.parent.pageSettings.currentPage] || [];\n  };\n  /**\n   * @returns {Element} returns the element\n   * @hidden */\n  GroupLazyLoadRenderer.prototype.getRowElements = function () {\n    return [].slice.call(this.parent.getContent().getElementsByClassName(literals.row));\n  };\n  /**\n   * @param {number} index - specifies the index\n   * @returns {Element} returns the element\n   * @hidden\n   */\n  GroupLazyLoadRenderer.prototype.getRowByIndex = function (index) {\n    var tr = [].slice.call(this.parent.getContent().getElementsByClassName(literals.row));\n    var row;\n    for (var i = 0; !isNullOrUndefined(index) && i < tr.length; i++) {\n      if (tr[parseInt(i.toString(), 10)].getAttribute(literals.dataRowIndex) === index.toString()) {\n        row = tr[parseInt(i.toString(), 10)];\n        break;\n      }\n    }\n    return row;\n  };\n  /**\n   * Tucntion to set the column visibility\n   *\n   * @param {Column[]} columns - specifies the column\n   * @returns {void}\n   * @hidden\n   */\n  GroupLazyLoadRenderer.prototype.setVisible = function (columns) {\n    var gObj = this.parent;\n    var rows = this.getRows();\n    var testRow;\n    rows.some(function (r) {\n      if (r.isDataRow) {\n        testRow = r;\n      }\n      return r.isDataRow;\n    });\n    var contentrows = this.getRows().filter(function (row) {\n      return !row.isDetailRow;\n    });\n    for (var i = 0; i < columns.length; i++) {\n      var column = columns[parseInt(i.toString(), 10)];\n      var idx = this.parent.getNormalizedColumnIndex(column.uid);\n      var colIdx = this.parent.getColumnIndexByUid(column.uid);\n      var displayVal = column.visible === true ? '' : 'none';\n      if (idx !== -1 && testRow && idx < testRow.cells.length) {\n        setStyleAttribute(this.getColGroup().childNodes[parseInt(idx.toString(), 10)], {\n          'display': displayVal\n        });\n      }\n      this.setDisplayNone(gObj.getDataRows(), colIdx, displayVal, contentrows, idx);\n      if (!this.parent.invokedFromMedia && column.hideAtMedia) {\n        this.parent.updateMediaColumns(column);\n      }\n      this.parent.invokedFromMedia = false;\n    }\n  };\n  /**\n   * Function to set display.\n   *\n   * @param {Object} tr - specifies the row object\n   * @param {number} idx - specifies the index\n   * @param {string} displayVal - specifies the display value\n   * @param {Row<Column>[]} rows - specifies the array of rows\n   * @param {number} oriIdx - specifies the index\n   * @returns {void}\n   * @hidden\n   */\n  GroupLazyLoadRenderer.prototype.setDisplayNone = function (tr, idx, displayVal, rows, oriIdx) {\n    if (!this.parent.groupSettings.columns.length) {\n      setDisplayValue(tr, idx, displayVal, rows);\n    } else {\n      var keys = Object.keys(this.groupCache);\n      for (var j = 0; j < keys.length; j++) {\n        var uids = this.rowsByUid[keys[parseInt(j.toString(), 10)]];\n        var idxs = Object.keys(uids);\n        for (var i = 0; i < idxs.length; i++) {\n          var tr_1 = this.parent.getContent().querySelector('tr[data-uid=' + idxs[parseInt(i.toString(), 10)] + ']');\n          var row = uids[idxs[parseInt(i.toString(), 10)]];\n          if (row.isCaptionRow) {\n            if (!this.captionModelGen.isEmpty()) {\n              this.changeCaptionRow(row, tr_1, keys[parseInt(j.toString(), 10)]);\n            } else {\n              row.cells[row.indent + 1].colSpan = displayVal === '' ? row.cells[row.indent + 1].colSpan + 1 : row.cells[row.indent + 1].colSpan - 1;\n              if (tr_1) {\n                tr_1.cells[row.indent + 1].colSpan = row.cells[row.indent + 1].colSpan;\n              }\n            }\n          }\n          if (row.isDataRow) {\n            this.showAndHideCells(tr_1, idx, displayVal, false);\n            row.cells[parseInt(oriIdx.toString(), 10)].visible = displayVal === '' ? true : false;\n          }\n          if (!row.isCaptionRow && !row.isDataRow && isNullOrUndefined(row.indent)) {\n            row.cells[parseInt(oriIdx.toString(), 10)].visible = displayVal === '' ? true : false;\n            row.visible = row.cells.some(function (cell) {\n              return cell.isDataCell && cell.visible;\n            });\n            this.showAndHideCells(tr_1, idx, displayVal, true, row);\n          }\n        }\n      }\n    }\n  };\n  GroupLazyLoadRenderer.prototype.changeCaptionRow = function (row, tr, index) {\n    var capRow = row;\n    var captionData = row.data;\n    var data = this.groupGenerator.generateCaptionRow(captionData, capRow.indent, capRow.parentGid, undefined, capRow.tIndex, capRow.parentUid);\n    data.uid = row.uid;\n    data.isExpand = row.isExpand;\n    data.lazyLoadCssClass = row.lazyLoadCssClass;\n    this.rowsByUid[parseInt(index.toString(), 10)][row.uid] = data;\n    this.groupCache[parseInt(index.toString(), 10)][this.objIdxByUid[parseInt(index.toString(), 10)][row.uid]] = data;\n    if (tr) {\n      var tbody = this.parent.getContentTable().querySelector(literals.tbody);\n      tbody.replaceChild(this.rowRenderer.render(data, this.parent.getColumns()), tr);\n    }\n  };\n  GroupLazyLoadRenderer.prototype.showAndHideCells = function (tr, idx, displayVal, isSummary, row) {\n    if (tr) {\n      var cls = isSummary ? 'td.e-summarycell' : 'td.e-rowcell';\n      setStyleAttribute(tr.querySelectorAll(cls)[parseInt(idx.toString(), 10)], {\n        'display': displayVal\n      });\n      if (tr.querySelectorAll(cls)[parseInt(idx.toString(), 10)].classList.contains('e-hide')) {\n        removeClass([tr.querySelectorAll(cls)[parseInt(idx.toString(), 10)]], ['e-hide']);\n      }\n      if (isSummary) {\n        if (row.visible && tr.classList.contains('e-hide')) {\n          removeClass([tr], ['e-hide']);\n        } else if (!row.visible) {\n          addClass([tr], ['e-hide']);\n        }\n      }\n    }\n  };\n  return GroupLazyLoadRenderer;\n}(ContentRender);\nexport { GroupLazyLoadRenderer };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","extend","remove","isNullOrUndefined","setStyleAttribute","removeClass","addClass","ContentRender","events","isRowEnteredInGrid","parentsUntil","setDisplayValue","generateExpandPredicates","getPredicates","getGroupKeysAndFields","RowRenderer","GroupModelGenerator","GroupSummaryModelGenerator","CaptionSummaryModelGenerator","literals","GroupLazyLoadRenderer","_super","parent","locator","_this","call","childCount","scrollData","isFirstChildRow","isScrollDown","isScrollUp","groupCache","cacheRowsObj","startIndexes","captionCounts","rowsByUid","objIdxByUid","initialGroupCaptions","requestType","scrollTopCache","undefined","refRowsObj","cacheMode","cacheBlockSize","ignoreAccent","allowFiltering","filterSettings","allowCaseSensitive","lazyLoadQuery","groupGenerator","summaryModelGen","captionModelGen","rowRenderer","eventListener","addEventListener","actionBegin","bind","actionComplete","on","initialEnd","setLazyLoadPageSize","setGroupCache","setCache","lazyLoadScrollHandler","scrollHandler","columnVisibilityChanged","setVisible","groupCollapse","collapseShortcut","captionExpand","tr","page","pageSettings","currentPage","rowsObject","parseInt","toString","uid","getAttribute","refreshCaches","scrollModule","scrollTop","enableVirtualization","oriIndex","getRowObjectIndexByUid","isRowExist","indent","data","key","e","captionRowElement","groupInfo","enableCaching","cancel","trigger","lazyLoadGroupExpand","args","keys","fields","rowIndex","makeRequest","clearCache","skip","take","pageSize","isExpand","captionRowExpand","captionCollapse","cache","rowIdx","captionIndex","lazyLoadGroupCollapse","i","length","query","where","removeCollapse","splice","removeRows","enableInfiniteScrolling","refreshRowObjects","scrollEle","getContent","firstElementChild","blockSize","Math","floor","offsetHeight","getRowHeight","ceil","clearLazyGroupCache","uids","getInitialCaptionIndexes","capIdx","capRow","i_1","isCaptionRow","getRowElementByUID","groupModule","expandCollapseRows","querySelector","child","getNextChilds","subChild","getChildRowsByParentIndex","indexOf","start","end","maintainRows","push","groupSettings","columns","target","content","parentElement","tagName","collapse","row","rowObj","getRowByUid","parentUid","capEle","getRowElementByUid","cells","some","value","resetRowMaintenance","contentModule","currentInfo","j","isEmpty","changeCaptionRow","isDataRow","from","fromIndex","to","toIndex","moveCells","action","scrollReset","arr","k","idx","trIdx","rows","trs","slice","querySelectorAll","aggUid","count","aggregates","agg","getAggregateByCaptionIndex","capUid","notify","refreshVirtualLazyLoadCache","setVirtualHeight","islazyloadRequest","getContentTable","scrollHeight","clientHeight","height","setLastRowCell","refreshExpandandCollapse","last","lazyLoadCssClass","index","rowObjects","group","childRows","lazyLoadHandler","setStartIndexes","captionRow","isScroll","setRowIndexes","refreshCaptionRowCount","generateCaptionRow","level","parentGid","concat","generateRows","getStartIndex","generateDataRows","nxtChild","lastRow","up","hasLastChildRow","rowObjectIndex","uid_1","isTop","render","lastCaptionRowBorder","enableVirtualMaskRow","removeMaskRow","prevCapRow","prevCaptionCount","indexes","captionCount","rowCount","rowHeight","insertAdjacentElement","getColumns","confirmRowRendering","check","cap","newRows","newRowsObject","updateCurrentViewData","deep","block","includeAgg","includeCollapseAgg","parentRow","initialGroupRows","isReorder","getRenderedRowsObject","getCacheRowsOnDownScroll","getCacheRowsOnUpScroll","str","isDestroyed","downTrs","getElementsByClassName","upTrs","endTrs","lazyLoadDown","lazyLoadUp","lazyLoadEnd","scrollDown","result","findRowElements","entered","top_1","getBoundingClientRect","top","classList","contains","scrollDownHandler","scrollUpEndRowHandler","scrollUpHandler","childRow","parentCapRow","capRowObjIdx","captionRowEle","capRowEleIndex","childIdx","getCurrentBlockEndIndex","child_1","currenBlock","removeBlock","cachedRowIndex","lastchild","child_2","uid1","uid2","uid3","firstIdx","add","removeTopRows","size","lastIdx","trEle","removeBottomRows","removeAttribute","scrollUp","blockIndexes","offsets","lazyLoadRender","field","pred","predicateList","lazyLoad","renderModule","generateQuery","isCountRequired","showMaskRow","showSpinner","getData","then","hideSpinner","catch","dataManagerFailure","records","getRows","filter","currentViewData","getGroupCache","getRowElements","getRowByIndex","dataRowIndex","gObj","testRow","r","contentrows","isDetailRow","column","getNormalizedColumnIndex","colIdx","getColumnIndexByUid","displayVal","visible","getColGroup","childNodes","setDisplayNone","getDataRows","invokedFromMedia","hideAtMedia","updateMediaColumns","oriIdx","idxs","tr_1","colSpan","showAndHideCells","cell","isDataCell","captionData","tIndex","tbody","replaceChild","isSummary","cls"],"sources":["/Users/saleem/Desktop/KClient/Web App/Ver_3.6/User Interface/website_Source files/node_modules/@syncfusion/ej2-grids/src/grid/renderer/group-lazy-load-renderer.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { extend, remove, isNullOrUndefined, setStyleAttribute, removeClass, addClass } from '@syncfusion/ej2-base';\nimport { ContentRender } from './content-renderer';\nimport * as events from '../base/constant';\nimport { isRowEnteredInGrid, parentsUntil, setDisplayValue, generateExpandPredicates, getPredicates, getGroupKeysAndFields } from '../base/util';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { GroupModelGenerator } from '../services/group-model-generator';\nimport { GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\nimport * as literals from '../base/string-literals';\n/**\n * GroupLazyLoadRenderer is used to perform lazy load grouping\n *\n * @hidden\n */\nvar GroupLazyLoadRenderer = /** @class */ (function (_super) {\n    __extends(GroupLazyLoadRenderer, _super);\n    function GroupLazyLoadRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.childCount = 0;\n        _this.scrollData = [];\n        _this.isFirstChildRow = false;\n        _this.isScrollDown = false;\n        _this.isScrollUp = false;\n        _this.groupCache = {};\n        _this.cacheRowsObj = {};\n        _this.startIndexes = {};\n        _this.captionCounts = {};\n        _this.rowsByUid = {};\n        _this.objIdxByUid = {};\n        _this.initialGroupCaptions = {};\n        _this.requestType = ['paging', 'columnstate', 'reorder', 'cancel', 'save', 'beginEdit', 'add', 'delete',\n            'filterBeforeOpen', 'filterchoicerequest', 'infiniteScroll', 'virtualscroll'];\n        _this.scrollTopCache = undefined;\n        /** @hidden */\n        _this.refRowsObj = {};\n        /** @hidden */\n        _this.cacheMode = false;\n        /** @hidden */\n        _this.cacheBlockSize = 5;\n        /** @hidden */\n        _this.ignoreAccent = _this.parent.allowFiltering ? _this.parent.filterSettings.ignoreAccent : false;\n        /** @hidden */\n        _this.allowCaseSensitive = false;\n        /** @hidden */\n        _this.lazyLoadQuery = [];\n        _this.locator = locator;\n        _this.groupGenerator = new GroupModelGenerator(_this.parent);\n        _this.summaryModelGen = new GroupSummaryModelGenerator(_this.parent);\n        _this.captionModelGen = new CaptionSummaryModelGenerator(_this.parent);\n        _this.rowRenderer = new RowRenderer(_this.locator, null, _this.parent);\n        _this.eventListener();\n        return _this;\n    }\n    GroupLazyLoadRenderer.prototype.eventListener = function () {\n        this.parent.addEventListener(events.actionBegin, this.actionBegin.bind(this));\n        this.parent.addEventListener(events.actionComplete, this.actionComplete.bind(this));\n        this.parent.on(events.initialEnd, this.setLazyLoadPageSize, this);\n        this.parent.on(events.setGroupCache, this.setCache, this);\n        this.parent.on(events.lazyLoadScrollHandler, this.scrollHandler, this);\n        this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n        this.parent.on(events.groupCollapse, this.collapseShortcut, this);\n    };\n    /**\n     * @param {HTMLTableRowElement} tr - specifies the table row element\n     * @returns {void}\n     * @hidden\n     */\n    GroupLazyLoadRenderer.prototype.captionExpand = function (tr) {\n        var _this = this;\n        var page = this.parent.pageSettings.currentPage;\n        var rowsObject = this.groupCache[parseInt(page.toString(), 10)];\n        var uid = tr.getAttribute('data-uid');\n        this.refreshCaches();\n        if ((!this.scrollTopCache || this.parent.scrollModule['content'].scrollTop > this.scrollTopCache) &&\n            !this.parent.enableVirtualization) {\n            this.scrollTopCache = this.parent.scrollModule['content'].scrollTop;\n        }\n        var oriIndex = this.getRowObjectIndexByUid(uid);\n        var isRowExist = rowsObject[oriIndex + 1] ?\n            rowsObject[parseInt(oriIndex.toString(), 10)].indent < rowsObject[oriIndex + 1].indent : false;\n        if (this.parent.enableVirtualization) {\n            isRowExist = this.cacheRowsObj[\"\" + uid] ? true : false;\n        }\n        var data = rowsObject[parseInt(oriIndex.toString(), 10)];\n        var key = getGroupKeysAndFields(oriIndex, rowsObject);\n        var e = { captionRowElement: tr, groupInfo: data, enableCaching: true, cancel: false };\n        this.parent.trigger(events.lazyLoadGroupExpand, e, function (args) {\n            if (args.cancel) {\n                return;\n            }\n            args.keys = key.keys;\n            args.fields = key.fields;\n            args.rowIndex = tr.rowIndex;\n            args.makeRequest = !args.enableCaching || !isRowExist;\n            if (!args.enableCaching && isRowExist) {\n                _this.clearCache([uid]);\n            }\n            args.skip = 0;\n            args.take = _this.pageSize;\n            data.isExpand = true;\n            if (_this.rowsByUid[parseInt(page.toString(), 10)][data.uid]) {\n                _this.rowsByUid[parseInt(page.toString(), 10)][data.uid].isExpand = true;\n            }\n            _this.captionRowExpand(args);\n        });\n    };\n    /**\n     * @param {HTMLTableRowElement} tr - specifies the table row element\n     * @returns {void}\n     * @hidden\n     */\n    GroupLazyLoadRenderer.prototype.captionCollapse = function (tr) {\n        var _this = this;\n        var cache = this.groupCache[this.parent.pageSettings.currentPage];\n        var rowIdx = tr.rowIndex;\n        var uid = tr.getAttribute('data-uid');\n        this.refreshCaches();\n        var captionIndex = this.getRowObjectIndexByUid(uid);\n        var e = {\n            captionRowElement: tr, groupInfo: cache[parseInt(captionIndex.toString(), 10)], cancel: false\n        };\n        this.parent.trigger(events.lazyLoadGroupCollapse, e, function (args) {\n            if (args.cancel) {\n                return;\n            }\n            args.isExpand = false;\n            for (var i = 0; i < _this.lazyLoadQuery.length; i++) {\n                var query = _this.lazyLoadQuery[parseInt(i.toString(), 10)];\n                var where = query[0];\n                var removeCollapse = args.groupInfo.data;\n                if (removeCollapse['key'] === where['value']) {\n                    _this.lazyLoadQuery.splice(i, 1);\n                }\n            }\n            _this.removeRows(captionIndex, rowIdx, uid);\n            if (_this.parent.enableInfiniteScrolling || _this.parent.enableVirtualization) {\n                _this.groupCache[_this.parent.pageSettings.currentPage] = extend([], _this.refRowsObj[_this.parent.pageSettings.currentPage]);\n                _this.refreshRowObjects([], captionIndex);\n            }\n        });\n    };\n    /**\n     * @returns {void}\n     * @hidden */\n    GroupLazyLoadRenderer.prototype.setLazyLoadPageSize = function () {\n        var scrollEle = this.parent.getContent().firstElementChild;\n        var blockSize = Math.floor(scrollEle.offsetHeight / this.parent.getRowHeight()) - 1;\n        this.pageSize = this.pageSize ? this.pageSize : blockSize * 3;\n        this.blockSize = Math.ceil(this.pageSize / 2);\n    };\n    /**\n     * @returns {void}\n     * @hidden */\n    GroupLazyLoadRenderer.prototype.clearLazyGroupCache = function () {\n        this.clearCache();\n    };\n    GroupLazyLoadRenderer.prototype.clearCache = function (uids) {\n        uids = uids ? uids : this.getInitialCaptionIndexes();\n        var cache = this.groupCache[this.parent.pageSettings.currentPage];\n        if (uids.length) {\n            for (var i = 0; i < uids.length; i++) {\n                var capIdx = this.getRowObjectIndexByUid(uids[parseInt(i.toString(), 10)]);\n                var capRow = cache[parseInt(capIdx.toString(), 10)];\n                if (!capRow) {\n                    continue;\n                }\n                if (this.captionCounts[this.parent.pageSettings.currentPage][capRow.uid]) {\n                    for (var i_1 = capIdx + 1; i_1 < cache.length; i_1++) {\n                        if (cache[parseInt(i_1.toString(), 10)].indent === capRow.indent\n                            || cache[parseInt(i_1.toString(), 10)].indent < capRow.indent) {\n                            delete this.captionCounts[this.parent.pageSettings.currentPage][capRow.uid];\n                            break;\n                        }\n                        if (cache[parseInt(i_1.toString(), 10)].isCaptionRow) {\n                            delete this.captionCounts[this.parent.pageSettings.currentPage][cache[parseInt(i_1.toString(), 10)].uid];\n                        }\n                    }\n                }\n                if (capRow.isExpand) {\n                    var tr = this.parent.getRowElementByUID(capRow.uid);\n                    if (!tr) {\n                        return;\n                    }\n                    this.parent.groupModule.expandCollapseRows(tr.querySelector('.e-recordplusexpand'));\n                }\n                var child = this.getNextChilds(capIdx);\n                if (!child.length) {\n                    continue;\n                }\n                var subChild = [];\n                if (child[child.length - 1].isCaptionRow) {\n                    subChild = this.getChildRowsByParentIndex(cache.indexOf(child[child.length - 1]), false, false, null, true, true);\n                }\n                var start = cache.indexOf(child[0]);\n                var end = subChild.length ? cache.indexOf(subChild[subChild.length - 1]) : cache.indexOf(child[child.length - 1]);\n                cache.splice(start, end - (start - 1));\n                this.refreshCaches();\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.refreshCaches = function () {\n        var page = this.parent.pageSettings.currentPage;\n        var cache = this.groupCache[parseInt(page.toString(), 10)];\n        if (this.parent.enableInfiniteScrolling) {\n            this.rowsByUid[parseInt(page.toString(), 10)] = [];\n            this.objIdxByUid[parseInt(page.toString(), 10)] = [];\n        }\n        else {\n            this.rowsByUid = {};\n            this.objIdxByUid = {};\n        }\n        for (var i = 0; i < cache.length; i++) {\n            this.maintainRows(cache[parseInt(i.toString(), 10)], i);\n        }\n    };\n    GroupLazyLoadRenderer.prototype.getInitialCaptionIndexes = function () {\n        var page = this.parent.pageSettings.currentPage;\n        var uids = [];\n        for (var i = 0; i < this.initialGroupCaptions[parseInt(page.toString(), 10)].length; i++) {\n            uids.push(this.initialGroupCaptions[parseInt(page.toString(), 10)][parseInt(i.toString(), 10)].uid);\n        }\n        return uids;\n    };\n    /**\n     * @param {string} uid - specifies the uid\n     * @returns {number} returns the row object uid\n     * @hidden\n     */\n    GroupLazyLoadRenderer.prototype.getRowObjectIndexByUid = function (uid) {\n        return this.objIdxByUid[this.parent.pageSettings.currentPage][\"\" + uid];\n    };\n    GroupLazyLoadRenderer.prototype.collapseShortcut = function (args) {\n        if (this.parent.groupSettings.columns.length &&\n            args.target && parentsUntil(args.target, literals.content) && args.target.parentElement.tagName === 'TR') {\n            if (!args.collapse && parentsUntil(args.target, literals.row)) {\n                return;\n            }\n            var row = args.target.parentElement;\n            var uid = row.getAttribute('data-uid');\n            if (args.collapse) {\n                var rowObj = this.getRowByUid(uid);\n                var capRow = this.getRowByUid(rowObj.parentUid);\n                if (capRow.isCaptionRow && capRow.isExpand) {\n                    var capEle = this.getRowElementByUid(rowObj.parentUid);\n                    this.parent.groupModule.expandCollapseRows(capEle.cells[rowObj.indent - 1]);\n                }\n            }\n            else {\n                var capRow = this.getRowByUid(uid);\n                if (capRow.isCaptionRow && !capRow.isExpand) {\n                    var capEle = this.getRowElementByUid(uid);\n                    this.parent.groupModule.expandCollapseRows(capEle.cells[capRow.indent]);\n                }\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.getRowByUid = function (uid) {\n        return this.rowsByUid[this.parent.pageSettings.currentPage][\"\" + uid];\n    };\n    GroupLazyLoadRenderer.prototype.actionBegin = function (args) {\n        if (!args.cancel) {\n            if (!this.requestType.some(function (value) { return value === args.requestType; })) {\n                this.groupCache = {};\n                this.resetRowMaintenance();\n                if (this.parent.enableVirtualization) {\n                    this.parent.contentModule.currentInfo = {};\n                }\n            }\n            if (args.requestType === 'reorder' && this.parent.groupSettings.columns.length) {\n                var keys = Object.keys(this.groupCache);\n                for (var j = 0; j < keys.length; j++) {\n                    var cache = this.groupCache[keys[parseInt(j.toString(), 10)]];\n                    for (var i = 0; i < cache.length; i++) {\n                        if (cache[parseInt(i.toString(), 10)].isCaptionRow && !this.captionModelGen.isEmpty()) {\n                            this.changeCaptionRow(cache[parseInt(i.toString(), 10)], null, keys[parseInt(j.toString(), 10)]);\n                        }\n                        if (cache[parseInt(i.toString(), 10)].isDataRow) {\n                            var from = args.fromIndex + cache[parseInt(i.toString(), 10)].indent;\n                            var to = args.toIndex + cache[parseInt(i.toString(), 10)].indent;\n                            this.moveCells(cache[parseInt(i.toString(), 10)].cells, from, to);\n                        }\n                    }\n                }\n            }\n            if (args.requestType === 'delete'\n                || (args.action === 'add' && args.requestType === 'save')) {\n                this.groupCache = {};\n                this.resetRowMaintenance();\n                if (this.parent.enableVirtualization) {\n                    this.parent.contentModule.currentInfo = {};\n                }\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.actionComplete = function (args) {\n        if (!args.cancel && args.requestType !== 'columnstate' && args.requestType !== 'beginEdit'\n            && args.requestType !== 'delete' && args.requestType !== 'save' && args.requestType !== 'reorder') {\n            this.scrollReset();\n        }\n    };\n    GroupLazyLoadRenderer.prototype.resetRowMaintenance = function () {\n        this.startIndexes = {};\n        this.captionCounts = {};\n        this.rowsByUid = {};\n        this.objIdxByUid = {};\n        this.initialGroupCaptions = {};\n    };\n    GroupLazyLoadRenderer.prototype.moveCells = function (arr, from, to) {\n        if (from >= arr.length) {\n            var k = from - arr.length;\n            while ((k--) + 1) {\n                arr.push(undefined);\n            }\n        }\n        arr.splice(from, 0, arr.splice(to, 1)[0]);\n    };\n    GroupLazyLoadRenderer.prototype.removeRows = function (idx, trIdx, uid) {\n        var page = this.parent.pageSettings.currentPage;\n        var rows = this.groupCache[parseInt(page.toString(), 10)];\n        var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n        var aggUid;\n        var count = 0;\n        if (this.parent.aggregates.length) {\n            var agg = this.getAggregateByCaptionIndex(idx);\n            aggUid = agg.length ? agg[agg.length - 1].uid : undefined;\n        }\n        var indent = rows[parseInt(idx.toString(), 10)].indent;\n        this.addClass(this.getNextChilds(parseInt(idx.toString(), 10)));\n        rows[parseInt(idx.toString(), 10)].isExpand = false;\n        if (this.rowsByUid[parseInt(page.toString(), 10)][rows[parseInt(idx.toString(), 10)].uid]) {\n            this.rowsByUid[parseInt(page.toString(), 10)][rows[parseInt(idx.toString(), 10)].uid].isExpand = false;\n        }\n        var capUid;\n        for (var i = idx + 1; i < rows.length; i++) {\n            if (rows[parseInt(i.toString(), 10)].indent === indent || rows[parseInt(i.toString(), 10)].indent < indent) {\n                capUid = rows[parseInt(i.toString(), 10)].uid;\n                break;\n            }\n            if (rows[parseInt(i.toString(), 10)].isCaptionRow && rows[parseInt(i.toString(), 10)].isExpand) {\n                this.addClass(this.getNextChilds(i));\n            }\n        }\n        for (var i = trIdx + 1; i < trs.length; i++) {\n            if (trs[parseInt(i.toString(), 10)].getAttribute('data-uid') === capUid) {\n                break;\n            }\n            else if (trs[parseInt(i.toString(), 10)].getAttribute('data-uid') === aggUid) {\n                remove(trs[parseInt(i.toString(), 10)]);\n                break;\n            }\n            else {\n                remove(trs[parseInt(i.toString(), 10)]);\n                this.refRowsObj[parseInt(page.toString(), 10)].splice(trIdx + 1, 1);\n                count = count + 1;\n            }\n        }\n        if (this.parent.enableVirtualization) {\n            this.cacheRowsObj[\"\" + uid] = this.groupCache[parseInt(page.toString(), 10)].slice(idx + 1, idx + 1 + count);\n            this.groupCache[parseInt(page.toString(), 10)].splice(idx + 1, count);\n            this.parent.notify(events.refreshVirtualLazyLoadCache, { rows: [], uid: rows[parseInt(idx.toString(), 10)].uid, count: count });\n            this.parent.contentModule.setVirtualHeight();\n            this.parent.islazyloadRequest = false;\n        }\n        if (this.parent.scrollModule['content'].scrollTop > this.scrollTopCache && !this.parent.enableVirtualization) {\n            this.parent.scrollModule['content'].scrollTop = this.scrollTopCache;\n        }\n        if (this.parent.getContentTable().scrollHeight < this.parent.getContent().clientHeight && this.parent.height !== 'auto') {\n            this.parent.scrollModule.setLastRowCell();\n        }\n        this.parent.notify(events.refreshExpandandCollapse, { rows: this.refRowsObj[parseInt(page.toString(), 10)] });\n    };\n    GroupLazyLoadRenderer.prototype.addClass = function (rows) {\n        var last = rows[this.blockSize];\n        if (last) {\n            last.lazyLoadCssClass = 'e-lazyload-middle-down';\n        }\n    };\n    GroupLazyLoadRenderer.prototype.getNextChilds = function (index, rowObjects) {\n        var group = this.groupCache[this.parent.pageSettings.currentPage];\n        var rows = rowObjects ? rowObjects : group;\n        var indent = group[parseInt(index.toString(), 10)].indent + 1;\n        var childRows = [];\n        for (var i = rowObjects ? 0 : index + 1; i < rows.length; i++) {\n            if (rows[parseInt(i.toString(), 10)].indent < indent) {\n                break;\n            }\n            if (rows[parseInt(i.toString(), 10)].indent === indent) {\n                childRows.push(rows[parseInt(i.toString(), 10)]);\n            }\n        }\n        return childRows;\n    };\n    GroupLazyLoadRenderer.prototype.lazyLoadHandler = function (args) {\n        this.setStartIndexes();\n        var tr = this.parent.getContent().querySelectorAll('tr')[args.index];\n        var uid = tr.getAttribute('data-uid');\n        var captionIndex = this.getRowObjectIndexByUid(uid);\n        var captionRow = this.groupCache[this.parent.pageSettings.currentPage][parseInt(captionIndex.toString(), 10)];\n        var rows = args.isRowExist ? args.isScroll ? this.scrollData\n            : this.parent.enableVirtualization ? this.cacheRowsObj[\"\" + uid] :\n                this.getChildRowsByParentIndex(captionIndex, true, true, null, true) : [];\n        this.scrollData = [];\n        if (!args.isRowExist) {\n            this.setRowIndexes(captionIndex, captionRow);\n            this.refreshCaptionRowCount(this.groupCache[this.parent.pageSettings.currentPage][parseInt(captionIndex.toString(), 10)], args.count);\n            if (Object.keys(args.data).indexOf('GroupGuid') !== -1) {\n                for (var i = 0; i < args.data.length; i++) {\n                    var data = this.groupGenerator.generateCaptionRow(args.data[parseInt(i.toString(), 10)], args.level, captionRow.parentGid, undefined, 0, captionRow.uid);\n                    rows.push(data);\n                    if (this.parent.aggregates.length) {\n                        rows = rows.concat((this.summaryModelGen.generateRows(args.data[parseInt(i.toString(), 10)], { level: args.level + 1, parentUid: data.uid })));\n                    }\n                }\n            }\n            else {\n                this.groupGenerator.index = this.getStartIndex(captionIndex, args.isScroll);\n                rows = this.groupGenerator.generateDataRows(args.data, args.level, captionRow.parentGid, 0, captionRow.uid);\n            }\n        }\n        var trIdx = args.isScroll ? this.rowIndex : args.index;\n        var nxtChild = this.getNextChilds(captionIndex, rows);\n        var lastRow = !args.up ? this.hasLastChildRow(args.isScroll, args.count, nxtChild.length) : true;\n        if (!args.isRowExist && !lastRow) {\n            nxtChild[this.blockSize].lazyLoadCssClass = 'e-lazyload-middle-down';\n        }\n        if (!lastRow) {\n            nxtChild[nxtChild.length - 1].lazyLoadCssClass = 'e-not-lazyload-end';\n        }\n        var aggregates = !args.isScroll && !args.isRowExist ? this.getAggregateByCaptionIndex(captionIndex) : [];\n        if (!args.up) {\n            if (!args.isRowExist || (this.parent.enableVirtualization && args.isRowExist && this.cacheRowsObj[\"\" + uid])) {\n                this.refreshRowObjects(rows, args.isScroll ? this.rowObjectIndex : captionIndex);\n            }\n        }\n        if (this.parent.enableVirtualization) {\n            var uid_1 = args.isScroll ? this.groupCache[this.parent.pageSettings.currentPage][this.rowIndex].uid : captionRow.uid;\n            this.parent.notify(events.refreshVirtualLazyLoadCache, { rows: rows, uid: uid_1 });\n            this.parent.contentModule.setVirtualHeight();\n            this.parent.contentModule.isTop = false;\n        }\n        this.render(trIdx, rows, lastRow, aggregates);\n        if (this.isFirstChildRow && !args.up) {\n            this.parent.getContent().firstElementChild.scrollTop = rows.length * this.parent.getRowHeight();\n        }\n        this.isFirstChildRow = false;\n        this.rowIndex = undefined;\n        this.rowObjectIndex = undefined;\n        this.childCount = 0;\n        for (var i = 0; i < rows.length; i++) {\n            this.refRowsObj[this.parent.pageSettings.currentPage].splice(captionIndex + i + 1, 0, rows[parseInt(i.toString(), 10)]);\n        }\n        if (lastRow && tr.querySelector('.e-lastrowcell')) {\n            this.parent.groupModule.lastCaptionRowBorder();\n        }\n        this.parent.notify(events.refreshExpandandCollapse, { rows: this.refRowsObj[this.parent.pageSettings.currentPage] });\n        if (this.parent.enableVirtualMaskRow) {\n            this.parent.removeMaskRow();\n        }\n    };\n    GroupLazyLoadRenderer.prototype.setRowIndexes = function (capIdx, row) {\n        if (!this.captionCounts[this.parent.pageSettings.currentPage]) {\n            this.captionCounts[this.parent.pageSettings.currentPage] = {};\n        }\n        if (row.isCaptionRow) {\n            this.captionCounts[this.parent.pageSettings.currentPage][row.uid] = row.data.count;\n        }\n    };\n    GroupLazyLoadRenderer.prototype.getStartIndex = function (capIdx, isScroll) {\n        var page = this.parent.pageSettings.currentPage;\n        var cache = this.groupCache[parseInt(page.toString(), 10)];\n        if (isScroll) {\n            return cache[this.rowObjectIndex].index + 1;\n        }\n        var count = 0;\n        var idx = 0;\n        var prevCapRow = this.getRowByUid(cache[parseInt(capIdx.toString(), 10)].parentUid);\n        if (prevCapRow) {\n            idx = this.prevCaptionCount(prevCapRow);\n        }\n        if (cache[parseInt(capIdx.toString(), 10)].indent > 0) {\n            for (var i = capIdx - 1; i >= 0; i--) {\n                if (cache[parseInt(i.toString(), 10)].indent < cache[parseInt(capIdx.toString(), 10)].indent) {\n                    break;\n                }\n                if (cache[parseInt(i.toString(), 10)].isCaptionRow && cache[parseInt(i.toString(), 10)]\n                    .indent === cache[parseInt(capIdx.toString(), 10)].indent) {\n                    count = count + cache[parseInt(i.toString(), 10)].data.count;\n                }\n            }\n        }\n        var index = count + idx\n            + this.startIndexes[parseInt(page.toString(), 10)][cache[parseInt(capIdx.toString(), 10)].parentGid];\n        return index;\n    };\n    GroupLazyLoadRenderer.prototype.prevCaptionCount = function (prevCapRow) {\n        var page = this.parent.pageSettings.currentPage;\n        var cache = this.groupCache[parseInt(page.toString(), 10)];\n        var idx = 0;\n        for (var i = cache.indexOf(prevCapRow) - 1; i >= 0; i--) {\n            if (cache[parseInt(i.toString(), 10)].indent === 0) {\n                break;\n            }\n            if (cache[parseInt(i.toString(), 10)].indent < prevCapRow.indent) {\n                break;\n            }\n            if (cache[parseInt(i.toString(), 10)].isCaptionRow && cache[parseInt(i.toString(), 10)].indent === prevCapRow.indent) {\n                var count = this.captionCounts[parseInt(page.toString(), 10)][cache[parseInt(i.toString(), 10)].uid];\n                idx = idx + (count ? count : cache[parseInt(i.toString(), 10)].data.count);\n            }\n        }\n        var capRow = this.getRowByUid(prevCapRow.parentUid);\n        if (capRow) {\n            idx = idx + this.prevCaptionCount(capRow);\n        }\n        return idx;\n    };\n    GroupLazyLoadRenderer.prototype.setStartIndexes = function () {\n        var cache = this.groupCache[this.parent.pageSettings.currentPage];\n        if (!this.startIndexes[this.parent.pageSettings.currentPage]) {\n            var indexes = [];\n            var idx = void 0;\n            for (var i = 0; i < cache.length; i++) {\n                if (cache[parseInt(i.toString(), 10)].isCaptionRow) {\n                    if (!indexes.length) {\n                        indexes.push(0);\n                    }\n                    else {\n                        indexes.push(cache[parseInt(idx.toString(), 10)].data.count + indexes[indexes.length - 1]);\n                    }\n                    idx = i;\n                }\n            }\n            this.startIndexes[this.parent.pageSettings.currentPage] = indexes;\n        }\n    };\n    GroupLazyLoadRenderer.prototype.hasLastChildRow = function (isScroll, captionCount, rowCount) {\n        return isScroll ? captionCount === this.childCount + rowCount : captionCount === rowCount;\n    };\n    GroupLazyLoadRenderer.prototype.refreshCaptionRowCount = function (row, count) {\n        row.data.count = count;\n    };\n    GroupLazyLoadRenderer.prototype.render = function (trIdx, rows, hasLastChildRow, aggregates) {\n        var tr = this.parent.getContent().querySelectorAll('tr')[parseInt(trIdx.toString(), 10)];\n        var scrollEle = this.parent.getContent().firstElementChild;\n        var rowHeight = this.parent.getRowHeight();\n        if (tr && aggregates.length) {\n            for (var i = aggregates.length - 1; i >= 0; i--) {\n                tr.insertAdjacentElement('afterend', this.rowRenderer.render(aggregates[parseInt(i.toString(), 10)], this.parent.getColumns()));\n            }\n        }\n        if (tr && rows.length) {\n            for (var i = rows.length - 1; i >= 0; i--) {\n                if (this.confirmRowRendering(rows[parseInt(i.toString(), 10)])) {\n                    tr.insertAdjacentElement('afterend', this.rowRenderer.render(rows[parseInt(i.toString(), 10)], this.parent.getColumns()));\n                    if (this.isScrollDown) {\n                        scrollEle.scrollTop = scrollEle.scrollTop - rowHeight;\n                    }\n                    if (this.isScrollUp) {\n                        scrollEle.scrollTop = scrollEle.scrollTop + rowHeight;\n                    }\n                }\n            }\n        }\n        this.isScrollDown = false;\n        this.isScrollUp = false;\n    };\n    /**\n     * @param {Row<Column>} row - specifies the row\n     * @param {number} index - specifies the index\n     * @returns {void}\n     * @hidden\n     */\n    GroupLazyLoadRenderer.prototype.maintainRows = function (row, index) {\n        var page = this.parent.pageSettings.currentPage;\n        if (!this.rowsByUid[parseInt(page.toString(), 10)]) {\n            this.rowsByUid[parseInt(page.toString(), 10)] = {};\n            this.objIdxByUid[parseInt(page.toString(), 10)] = {};\n        }\n        if (row.uid) {\n            this.rowsByUid[parseInt(page.toString(), 10)][row.uid] = row;\n        }\n        this.objIdxByUid[parseInt(page.toString(), 10)][row.uid] = index;\n    };\n    GroupLazyLoadRenderer.prototype.confirmRowRendering = function (row) {\n        var check = true;\n        if (isNullOrUndefined(row.indent) && !row.isDataRow && !row.isCaptionRow) {\n            var cap = this.getRowByUid(row.parentUid);\n            if (cap.isCaptionRow && !cap.isExpand) {\n                check = false;\n            }\n        }\n        return check;\n    };\n    GroupLazyLoadRenderer.prototype.refreshRowObjects = function (newRows, index) {\n        var page = this.parent.pageSettings.currentPage;\n        var rowsObject = this.groupCache[parseInt(page.toString(), 10)];\n        this.rowsByUid[parseInt(page.toString(), 10)] = {};\n        this.objIdxByUid[parseInt(page.toString(), 10)] = {};\n        var newRowsObject = [];\n        var k = 0;\n        for (var i = 0; i < rowsObject.length; i++) {\n            if (i === index) {\n                this.maintainRows(rowsObject[parseInt(i.toString(), 10)], k);\n                newRowsObject.push(rowsObject[parseInt(i.toString(), 10)]);\n                k++;\n                for (var j = 0; j < newRows.length; j++) {\n                    this.maintainRows(newRows[parseInt(j.toString(), 10)], k);\n                    newRowsObject.push(newRows[parseInt(j.toString(), 10)]);\n                    k++;\n                }\n            }\n            else {\n                this.maintainRows(rowsObject[parseInt(i.toString(), 10)], k);\n                newRowsObject.push(rowsObject[parseInt(i.toString(), 10)]);\n                k++;\n            }\n        }\n        this.groupCache[this.parent.pageSettings.currentPage] = extend([], newRowsObject);\n        this.updateCurrentViewData();\n    };\n    GroupLazyLoadRenderer.prototype.getAggregateByCaptionIndex = function (index) {\n        var cache = this.groupCache[this.parent.pageSettings.currentPage];\n        var parent = cache[parseInt(index.toString(), 10)];\n        var indent = parent.indent;\n        var uid = parent.uid;\n        var agg = [];\n        for (var i = index + 1; i < cache.length; i++) {\n            if (cache[parseInt(i.toString(), 10)].indent === indent) {\n                break;\n            }\n            if (isNullOrUndefined(cache[parseInt(i.toString(), 10)].indent) && cache[parseInt(i.toString(), 10)].parentUid === uid) {\n                agg.push(cache[parseInt(i.toString(), 10)]);\n            }\n        }\n        return agg;\n    };\n    GroupLazyLoadRenderer.prototype.getChildRowsByParentIndex = function (index, deep, block, data, includeAgg, includeCollapseAgg) {\n        var cache = data ? data : this.groupCache[this.parent.pageSettings.currentPage];\n        var parentRow = cache[parseInt(index.toString(), 10)];\n        var agg = [];\n        if (!parentRow.isCaptionRow || (parentRow.isCaptionRow && !parentRow.isExpand && !includeCollapseAgg)) {\n            return [];\n        }\n        if (includeAgg && this.parent.aggregates.length) {\n            agg = this.getAggregateByCaptionIndex(index);\n        }\n        var indent = parentRow.indent;\n        var uid = parentRow.uid;\n        var rows = [];\n        var count = 0;\n        for (var i = index + 1; i < cache.length; i++) {\n            if (cache[parseInt(i.toString(), 10)].parentUid === uid) {\n                if (isNullOrUndefined(cache[parseInt(i.toString(), 10)].indent)) {\n                    continue;\n                }\n                count++;\n                rows.push(cache[parseInt(i.toString(), 10)]);\n                if (deep && cache[parseInt(i.toString(), 10)].isCaptionRow) {\n                    rows = rows.concat(this.getChildRowsByParentIndex(i, deep, block, data, includeAgg));\n                }\n                if (block && count === this.pageSize) {\n                    break;\n                }\n            }\n            if (cache[parseInt(i.toString(), 10)].indent === indent) {\n                break;\n            }\n        }\n        return rows.concat(agg);\n    };\n    /**\n     * @param {boolean} isReorder - specifies the isreorder\n     * @returns {Row<Column>[]} returns the row\n     * @hidden\n     */\n    GroupLazyLoadRenderer.prototype.initialGroupRows = function (isReorder) {\n        var rows = [];\n        var cache = this.groupCache[this.parent.pageSettings.currentPage];\n        if (isReorder) {\n            return this.getRenderedRowsObject();\n        }\n        for (var i = 0; i < cache.length; i++) {\n            if (cache[parseInt(i.toString(), 10)].indent === 0) {\n                rows.push(cache[parseInt(i.toString(), 10)]);\n                rows = rows.concat(this.getChildRowsByParentIndex(i, true, true, cache, true));\n            }\n        }\n        return rows;\n    };\n    /**\n     * @returns {Row<Column>[]} retruns the row\n     * @hidden */\n    GroupLazyLoadRenderer.prototype.getRenderedRowsObject = function () {\n        var rows = [];\n        var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n        for (var i = 0; i < trs.length; i++) {\n            rows.push(this.getRowByUid(trs[parseInt(i.toString(), 10)].getAttribute('data-uid')));\n        }\n        return rows;\n    };\n    GroupLazyLoadRenderer.prototype.getCacheRowsOnDownScroll = function (index) {\n        var rows = [];\n        var rowsObject = this.groupCache[this.parent.pageSettings.currentPage];\n        var k = index;\n        for (var i = 0; i < this.pageSize; i++) {\n            if (!rowsObject[parseInt(k.toString(), 10)] || rowsObject[parseInt(k.toString(), 10)]\n                .indent < rowsObject[parseInt(index.toString(), 10)].indent) {\n                break;\n            }\n            if (rowsObject[parseInt(k.toString(), 10)].indent === rowsObject[parseInt(index.toString(), 10)].indent) {\n                rows.push(rowsObject[parseInt(k.toString(), 10)]);\n                if (rowsObject[parseInt(k.toString(), 10)].isCaptionRow && rowsObject[parseInt(k.toString(), 10)].isExpand) {\n                    rows = rows.concat(this.getChildRowsByParentIndex(k, true, true, null, true));\n                }\n            }\n            if (rowsObject[parseInt(k.toString(), 10)].indent > rowsObject[parseInt(index.toString(), 10)].indent\n                || isNullOrUndefined(rowsObject[parseInt(k.toString(), 10)].indent)) {\n                i--;\n            }\n            k++;\n        }\n        return rows;\n    };\n    GroupLazyLoadRenderer.prototype.getCacheRowsOnUpScroll = function (start, end, index) {\n        var rows = [];\n        var rowsObject = this.groupCache[this.parent.pageSettings.currentPage];\n        var str = false;\n        for (var i = 0; i < rowsObject.length; i++) {\n            if (str && (!rowsObject[parseInt(i.toString(), 10)] || rowsObject[parseInt(i.toString(), 10)]\n                .indent < rowsObject[parseInt(index.toString(), 10)].indent || rowsObject[parseInt(i.toString(), 10)].uid === end)) {\n                break;\n            }\n            if (!str && rowsObject[parseInt(i.toString(), 10)].uid === start) {\n                str = true;\n            }\n            if (str && rowsObject[parseInt(i.toString(), 10)].indent === rowsObject[parseInt(index.toString(), 10)].indent) {\n                rows.push(rowsObject[parseInt(i.toString(), 10)]);\n                if (rowsObject[parseInt(i.toString(), 10)].isCaptionRow && rowsObject[parseInt(i.toString(), 10)].isExpand) {\n                    rows = rows.concat(this.getChildRowsByParentIndex(i, true, true, null, true));\n                }\n            }\n        }\n        return rows;\n    };\n    GroupLazyLoadRenderer.prototype.scrollHandler = function (e) {\n        if (this.parent.isDestroyed || this.childCount) {\n            return;\n        }\n        var downTrs = [].slice.call(this.parent.getContent().getElementsByClassName('e-lazyload-middle-down'));\n        var upTrs = [].slice.call(this.parent.getContent().getElementsByClassName('e-lazyload-middle-up'));\n        var endTrs = [].slice.call(this.parent.getContent().getElementsByClassName('e-not-lazyload-end'));\n        var tr;\n        var lazyLoadDown = false;\n        var lazyLoadUp = false;\n        var lazyLoadEnd = false;\n        if (e.scrollDown && downTrs.length) {\n            var result = this.findRowElements(downTrs);\n            tr = result.tr;\n            lazyLoadDown = result.entered;\n        }\n        if (!e.scrollDown && endTrs) {\n            for (var i = 0; i < endTrs.length; i++) {\n                var top_1 = endTrs[parseInt(i.toString(), 10)].getBoundingClientRect().top;\n                var scrollHeight = this.parent.getContent().scrollHeight;\n                if (top_1 > 0 && top_1 < scrollHeight) {\n                    tr = endTrs[parseInt(i.toString(), 10)];\n                    lazyLoadEnd = true;\n                    this.rowIndex = tr.rowIndex;\n                    break;\n                }\n            }\n        }\n        if (!e.scrollDown && upTrs.length && !lazyLoadEnd) {\n            var result = this.findRowElements(upTrs);\n            tr = result.tr;\n            lazyLoadUp = result.entered;\n        }\n        if (tr && !tr.classList.contains('e-masked-row')) {\n            if (lazyLoadDown && e.scrollDown && lazyLoadDown && tr) {\n                this.scrollDownHandler(tr);\n            }\n            if (!e.scrollDown && lazyLoadEnd && tr) {\n                this.scrollUpEndRowHandler(tr);\n            }\n            if (this.cacheMode && !e.scrollDown && !lazyLoadEnd && lazyLoadUp && tr) {\n                this.scrollUpHandler(tr);\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.scrollUpEndRowHandler = function (tr) {\n        var page = this.parent.pageSettings.currentPage;\n        var rows = this.groupCache[parseInt(page.toString(), 10)];\n        var uid = tr.getAttribute('data-uid');\n        var index = this.rowObjectIndex = this.getRowObjectIndexByUid(uid);\n        var idx = index;\n        var childRow = rows[parseInt(index.toString(), 10)];\n        var parentCapRow = this.getRowByUid(childRow.parentUid);\n        var capRowObjIdx = this.getRowObjectIndexByUid(parentCapRow.uid);\n        var captionRowEle = this.parent.getContent().querySelector('tr[data-uid=' + parentCapRow.uid + ']');\n        var capRowEleIndex = captionRowEle.rowIndex;\n        var child = this.getChildRowsByParentIndex(capRowObjIdx);\n        var childIdx = child.indexOf(childRow);\n        var currentPage = Math.ceil(childIdx / this.pageSize);\n        if (currentPage === 1) {\n            return;\n        }\n        this.childCount = currentPage * this.pageSize;\n        index = this.getCurrentBlockEndIndex(childRow, index);\n        if (this.childCount < parentCapRow.data.count) {\n            tr.classList.remove('e-not-lazyload-end');\n            childRow.lazyLoadCssClass = '';\n            var isRowExist = rows[index + 1] ? childRow.indent === rows[index + 1].indent : false;\n            this.scrollData = isRowExist ? this.getCacheRowsOnDownScroll(index + 1) : [];\n            var key = getGroupKeysAndFields(capRowObjIdx, rows);\n            var args = {\n                rowIndex: capRowEleIndex, makeRequest: !isRowExist, groupInfo: parentCapRow, fields: key.fields,\n                keys: key.keys, skip: this.childCount, take: this.pageSize, isScroll: true\n            };\n            if (this.cacheMode && this.childCount >= (this.pageSize * this.cacheBlockSize)) {\n                var child_1 = this.getChildRowsByParentIndex(capRowObjIdx);\n                var currenBlock = Math.ceil((child_1.indexOf(rows[parseInt(idx.toString(), 10)]) / this.pageSize));\n                var removeBlock = currenBlock - (this.cacheBlockSize - 1);\n                this.removeBlock(uid, isRowExist, removeBlock, child_1);\n                args.cachedRowIndex = (removeBlock * this.pageSize);\n            }\n            this.captionRowExpand(args);\n        }\n        else {\n            this.childCount = 0;\n        }\n    };\n    GroupLazyLoadRenderer.prototype.scrollDownHandler = function (tr) {\n        var page = this.parent.pageSettings.currentPage;\n        var rows = this.groupCache[parseInt(page.toString(), 10)];\n        var uid = tr.getAttribute('data-uid');\n        var index = this.getRowObjectIndexByUid(uid);\n        var idx = index;\n        var childRow = rows[parseInt(index.toString(), 10)];\n        var parentCapRow = this.getRowByUid(childRow.parentUid);\n        var capRowObjIdx = this.getRowObjectIndexByUid(parentCapRow.uid);\n        var captionRowEle = this.getRowElementByUid(parentCapRow.uid);\n        var capRowEleIndex = captionRowEle.rowIndex;\n        var child = this.getChildRowsByParentIndex(capRowObjIdx);\n        if (child.length === 0) {\n            return;\n        }\n        var childIdx = child.indexOf(childRow);\n        var currentPage = Math.ceil(childIdx / this.pageSize);\n        this.childCount = currentPage * this.pageSize;\n        if (isNullOrUndefined(child[this.childCount - 1])) {\n            return;\n        }\n        if (this.parent.enableVirtualization) {\n            this.parent.islazyloadRequest = true;\n        }\n        index = this.rowObjectIndex = this.getRowObjectIndexByUid(child[this.childCount - 1].uid);\n        var lastchild = rows[parseInt(index.toString(), 10)];\n        var lastRow = this.getRowElementByUid(lastchild.uid);\n        this.rowIndex = lastRow.rowIndex;\n        index = this.getCurrentBlockEndIndex(lastchild, index);\n        if (this.childCount === parentCapRow.data.count) {\n            this.parent.islazyloadRequest = false;\n        }\n        if (this.childCount < parentCapRow.data.count) {\n            var isRowExist = rows[index + 1] ? childRow.indent === rows[index + 1].indent : false;\n            if (isRowExist && !isNullOrUndefined(this.getRowElementByUid(rows[index + 1].uid))) {\n                this.parent.islazyloadRequest = false;\n                this.childCount = 0;\n                return;\n            }\n            if (currentPage > 1 || !this.cacheMode) {\n                tr.classList.remove('e-lazyload-middle-down');\n                lastRow.classList.remove('e-not-lazyload-end');\n                lastchild.lazyLoadCssClass = '';\n            }\n            this.scrollData = isRowExist ? this.getCacheRowsOnDownScroll(this.rowObjectIndex + 1) : [];\n            var query = getGroupKeysAndFields(capRowObjIdx, rows);\n            var args = {\n                rowIndex: capRowEleIndex, makeRequest: !isRowExist, groupInfo: parentCapRow, fields: query.fields,\n                keys: query.keys, skip: this.childCount, take: this.pageSize, isScroll: true\n            };\n            if (this.cacheMode && (this.childCount - this.pageSize) >= (this.pageSize * this.cacheBlockSize)) {\n                this.isScrollDown = true;\n                var child_2 = this.getChildRowsByParentIndex(capRowObjIdx);\n                var currenBlock = Math.ceil((child_2.indexOf(rows[parseInt(idx.toString(), 10)]) / this.pageSize)) - 1;\n                var removeBlock = (currenBlock - (this.cacheBlockSize - 1)) + 1;\n                this.removeBlock(uid, isRowExist, removeBlock, child_2, lastchild);\n                args.cachedRowIndex = (removeBlock * this.pageSize);\n            }\n            this.captionRowExpand(args);\n        }\n        else {\n            this.childCount = 0;\n            this.parent.islazyloadRequest = false;\n        }\n    };\n    GroupLazyLoadRenderer.prototype.getCurrentBlockEndIndex = function (row, index) {\n        var page = this.parent.pageSettings.currentPage;\n        var rows = this.groupCache[parseInt(page.toString(), 10)];\n        if (row.isCaptionRow) {\n            if (row.isExpand) {\n                var childCount = this.getChildRowsByParentIndex(index, true).length;\n                this.rowIndex = this.rowIndex + childCount;\n            }\n            var agg = this.getAggregateByCaptionIndex(index);\n            this.rowObjectIndex = this.rowObjectIndex + agg.length;\n            var idx = index;\n            for (var i = idx + 1; i < rows.length; i++) {\n                if (rows[parseInt(i.toString(), 10)].indent === rows[parseInt(index.toString(), 10)].indent\n                    || rows[parseInt(i.toString(), 10)].indent < rows[parseInt(index.toString(), 10)].indent) {\n                    index = idx;\n                    break;\n                }\n                else {\n                    idx++;\n                }\n            }\n        }\n        return index;\n    };\n    GroupLazyLoadRenderer.prototype.removeBlock = function (uid, isRowExist, removeBlock, child, lastchild) {\n        var page = this.parent.pageSettings.currentPage;\n        var rows = this.groupCache[parseInt(page.toString(), 10)];\n        var uid1 = child[(((removeBlock + 1) * this.pageSize) - 1) - this.blockSize].uid;\n        var uid2 = child[(removeBlock * this.pageSize) - this.pageSize].uid;\n        var uid3 = child[(removeBlock * this.pageSize)].uid;\n        var firstIdx = this.getRowObjectIndexByUid(uid1);\n        rows[parseInt(firstIdx.toString(), 10)].lazyLoadCssClass = 'e-lazyload-middle-up';\n        this.getRowElementByUid(uid1).classList.add('e-lazyload-middle-up');\n        if (lastchild) {\n            this.getRowElementByUid(uid3).classList.add('e-not-lazyload-first');\n            this.getRowByUid(uid3).lazyLoadCssClass = 'e-not-lazyload-first';\n            this.getRowByUid(uid2).lazyLoadCssClass = '';\n        }\n        if (isRowExist) {\n            this.removeTopRows(lastchild ? lastchild.uid : uid, uid2, uid3);\n        }\n        else {\n            this.uid1 = uid2;\n            this.uid2 = uid3;\n            this.uid3 = lastchild ? lastchild.uid : uid;\n        }\n    };\n    GroupLazyLoadRenderer.prototype.scrollUpHandler = function (tr) {\n        var page = this.parent.pageSettings.currentPage;\n        var rows = this.groupCache[parseInt(page.toString(), 10)];\n        var uid = tr.getAttribute('data-uid');\n        var row = this.getRowByUid(uid);\n        var index = this.rowObjectIndex = this.getRowObjectIndexByUid(uid);\n        var parentCapRow = this.getRowByUid(row.parentUid);\n        var capRowObjIdx = this.rowIndex = this.getRowObjectIndexByUid(parentCapRow.uid);\n        var captionRowEle = this.parent.getRowElementByUID(parentCapRow.uid);\n        var capRowEleIndex = captionRowEle.rowIndex;\n        var child = this.getChildRowsByParentIndex(capRowObjIdx);\n        var childIdx = child.indexOf(rows[parseInt(index.toString(), 10)]);\n        var currenBlock = Math.floor((childIdx / this.pageSize));\n        var idx = this.blockSize;\n        if ((this.blockSize * 2) > this.pageSize) {\n            idx = (this.blockSize * 2) - this.pageSize;\n            idx = this.blockSize - idx;\n        }\n        var start = child[(childIdx - (idx - 1)) - this.pageSize].uid;\n        var end = child[childIdx - (idx - 1)].uid;\n        this.scrollData = this.getCacheRowsOnUpScroll(start, end, index - (idx - 1));\n        this.isFirstChildRow = currenBlock > 1;\n        if (this.isFirstChildRow) {\n            this.scrollData[0].lazyLoadCssClass = 'e-not-lazyload-first';\n        }\n        this.getRowByUid(end).lazyLoadCssClass = '';\n        this.getRowElementByUid(end).classList.remove('e-not-lazyload-first');\n        var removeBlock = currenBlock + this.cacheBlockSize;\n        if (child.length !== parentCapRow.data.count && (removeBlock * this.pageSize > child.length)) {\n            this.isFirstChildRow = false;\n            this.scrollData[0].lazyLoadCssClass = '';\n            this.getRowElementByUid(end).classList.add('e-not-lazyload-first');\n            return;\n        }\n        var count = removeBlock * this.pageSize > parentCapRow.data.count\n            ? parentCapRow.data.count : removeBlock * this.pageSize;\n        var size = removeBlock * this.pageSize > parentCapRow.data.count\n            ? (this.pageSize - ((this.pageSize * removeBlock) - parentCapRow.data.count)) : this.pageSize;\n        var childRows = this.getChildRowsByParentIndex(rows.indexOf(child[count - 1]), true, false, null, true);\n        var uid1 = childRows.length ? childRows[childRows.length - 1].uid : child[(count - 1)].uid;\n        var uid2 = child[count - size].uid;\n        var uid3 = child[(count - size) - 1].uid;\n        var lastIdx = this.objIdxByUid[parseInt(page.toString(), 10)][\"\" + uid2] - idx;\n        if (rows[parseInt(lastIdx.toString(), 10)].lazyLoadCssClass === 'e-lazyload-middle-down') {\n            var trEle = this.getRowElementByUid(rows[parseInt(lastIdx.toString(), 10)].uid);\n            if (trEle) {\n                trEle.classList.add('e-lazyload-middle-down');\n            }\n        }\n        this.getRowByUid(uid1).lazyLoadCssClass = '';\n        this.getRowByUid(uid3).lazyLoadCssClass = 'e-not-lazyload-end';\n        this.getRowElementByUid(uid3).classList.add('e-not-lazyload-end');\n        this.removeBottomRows(uid1, uid2, uid3);\n        this.rowIndex = tr.rowIndex - idx;\n        if (tr.classList.length > 1) {\n            tr.classList.remove('e-lazyload-middle-up');\n        }\n        else {\n            tr.removeAttribute('class');\n        }\n        if (!isNullOrUndefined(this.getRowElementByUid(start))) {\n            this.childCount = 0;\n            this.scrollData = [];\n            return;\n        }\n        var key = getGroupKeysAndFields(this.getRowObjectIndexByUid(parentCapRow.uid), rows);\n        var args = {\n            rowIndex: capRowEleIndex, makeRequest: false, groupInfo: parentCapRow, fields: key.fields,\n            keys: key.keys, skip: this.childCount, take: this.pageSize, isScroll: true, scrollUp: true\n        };\n        this.isScrollUp = true;\n        this.captionRowExpand(args);\n    };\n    GroupLazyLoadRenderer.prototype.findRowElements = function (rows) {\n        var entered = false;\n        var tr;\n        for (var i = 0; i < rows.length; i++) {\n            var rowIdx = rows[parseInt(i.toString(), 10)].rowIndex;\n            if (this.parent.enableVirtualization) {\n                var currentInfo = this.parent.contentModule.currentInfo;\n                if (currentInfo && currentInfo.blockIndexes && currentInfo.blockIndexes[0] > 1) {\n                    rowIdx = rowIdx + (this.parent.contentModule.offsets[currentInfo.blockIndexes[0] - 1] /\n                        this.parent.getRowHeight());\n                }\n            }\n            if (isRowEnteredInGrid(rowIdx, this.parent)) {\n                entered = true;\n                this.rowIndex = rowIdx;\n                tr = rows[parseInt(i.toString(), 10)];\n                break;\n            }\n        }\n        return { entered: entered, tr: tr };\n    };\n    GroupLazyLoadRenderer.prototype.getRowElementByUid = function (uid) {\n        return this.parent.getContent().querySelector('tr[data-uid=' + uid + ']');\n    };\n    GroupLazyLoadRenderer.prototype.removeTopRows = function (uid1, uid2, uid3) {\n        var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n        var start = false;\n        for (var i = 0; i < trs.length; i++) {\n            if (trs[parseInt(i.toString(), 10)].getAttribute('data-uid') === uid3) {\n                var tr = this.parent.getContent().querySelector('tr[data-uid=' + uid1 + ']');\n                if (tr) {\n                    this.rowIndex = tr.rowIndex;\n                }\n                break;\n            }\n            if (trs[parseInt(i.toString(), 10)].getAttribute('data-uid') === uid2) {\n                start = true;\n            }\n            if (start) {\n                remove(trs[parseInt(i.toString(), 10)]);\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    GroupLazyLoadRenderer.prototype.removeBottomRows = function (uid1, uid2, uid3) {\n        var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n        var trigger = false;\n        for (var i = 0; i < trs.length; i++) {\n            if (trs[parseInt(i.toString(), 10)].getAttribute('data-uid') === uid2) {\n                trigger = true;\n            }\n            if (trigger) {\n                remove(trs[parseInt(i.toString(), 10)]);\n                if (trs[parseInt(i.toString(), 10)].getAttribute('data-uid') === uid1) {\n                    break;\n                }\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.setCache = function (e) {\n        var page = this.parent.pageSettings.currentPage;\n        if (this.parent.enableVirtualization) {\n            this.parent.lazyLoadRender = this;\n        }\n        if (this.parent.enableInfiniteScrolling && e.args.requestType === 'infiniteScroll' &&\n            e.args['prevPage'] !== e.args['currentPage']) {\n            this.groupCache[parseInt(page.toString(), 10)] = this.initialGroupCaptions[parseInt(page.toString(), 10)] = this.groupCache[e.args['prevPage']]\n                .concat(extend([], e.data));\n        }\n        else {\n            this.groupCache[parseInt(page.toString(), 10)] =\n                this.initialGroupCaptions[parseInt(page.toString(), 10)] = extend([], e.data);\n        }\n    };\n    GroupLazyLoadRenderer.prototype.captionRowExpand = function (args) {\n        var _this = this;\n        var captionRow = args.groupInfo;\n        var level = this.parent.groupSettings.columns.indexOf(captionRow.data.field) + 1;\n        var pred = generateExpandPredicates(args.fields, args.keys, this);\n        var predicateList = getPredicates(pred);\n        var lazyLoad = { level: level, skip: args.skip, take: args.take, where: predicateList };\n        args.lazyLoadQuery = lazyLoad;\n        args.requestType = 'onDemandGroupInfo';\n        if (args.makeRequest) {\n            var query = this.parent.renderModule.data.generateQuery(true);\n            if (!query.isCountRequired) {\n                query.isCountRequired = true;\n            }\n            query.lazyLoad.push({ key: 'onDemandGroupInfo', value: lazyLoad });\n            this.lazyLoadQuery.push(lazyLoad['where']);\n            if (args.isScroll && this.parent.enableVirtualMaskRow) {\n                this.parent.showMaskRow();\n            }\n            else {\n                this.parent.showSpinner();\n            }\n            this.parent.renderModule.data.getData(args, query).then(function (e) {\n                if (_this.parent.enableVirtualization) {\n                    _this.parent.islazyloadRequest = true;\n                }\n                _this.parent.hideSpinner();\n                _this.parent.removeMaskRow();\n                if (e.result.length === 0) {\n                    return;\n                }\n                if (_this.cacheMode && _this.uid1 && _this.uid2) {\n                    _this.removeTopRows(_this.uid3, _this.uid1, _this.uid2);\n                    _this.uid1 = _this.uid2 = _this.uid3 = undefined;\n                }\n                _this.lazyLoadHandler({\n                    data: e.result, count: e.count, level: level, index: args.rowIndex,\n                    isRowExist: false, isScroll: args.isScroll, up: false, rowIndex: args.cachedRowIndex\n                });\n            })\n                .catch(function (e) { return _this.parent.renderModule.dataManagerFailure(e, { requestType: 'grouping' }); });\n        }\n        else {\n            this.lazyLoadHandler({\n                data: null, count: args.groupInfo.data.count, level: level, index: args.rowIndex,\n                isRowExist: true, isScroll: args.isScroll, up: args.scrollUp, rowIndex: args.cachedRowIndex\n            });\n        }\n    };\n    GroupLazyLoadRenderer.prototype.scrollReset = function (top) {\n        this.parent.getContent().firstElementChild.scrollTop = top ? this.parent.getContent().firstElementChild.scrollTop + top : 0;\n    };\n    GroupLazyLoadRenderer.prototype.updateCurrentViewData = function () {\n        var records = [];\n        this.getRows().filter(function (row) {\n            if (row.isDataRow) {\n                records[row.index] = row.data;\n            }\n        });\n        this.parent.currentViewData = records.length ? records : this.parent.currentViewData;\n    };\n    /**\n     * @returns {Row<Column>[]} returns the row\n     * @hidden */\n    GroupLazyLoadRenderer.prototype.getGroupCache = function () {\n        return this.groupCache;\n    };\n    /**\n     * @returns {Row<Column>[]} returns the row\n     * @hidden */\n    GroupLazyLoadRenderer.prototype.getRows = function () {\n        return this.groupCache[this.parent.pageSettings.currentPage] || [];\n    };\n    /**\n     * @returns {Element} returns the element\n     * @hidden */\n    GroupLazyLoadRenderer.prototype.getRowElements = function () {\n        return [].slice.call(this.parent.getContent().getElementsByClassName(literals.row));\n    };\n    /**\n     * @param {number} index - specifies the index\n     * @returns {Element} returns the element\n     * @hidden\n     */\n    GroupLazyLoadRenderer.prototype.getRowByIndex = function (index) {\n        var tr = [].slice.call(this.parent.getContent().getElementsByClassName(literals.row));\n        var row;\n        for (var i = 0; !isNullOrUndefined(index) && i < tr.length; i++) {\n            if (tr[parseInt(i.toString(), 10)].getAttribute(literals.dataRowIndex) === index.toString()) {\n                row = tr[parseInt(i.toString(), 10)];\n                break;\n            }\n        }\n        return row;\n    };\n    /**\n     * Tucntion to set the column visibility\n     *\n     * @param {Column[]} columns - specifies the column\n     * @returns {void}\n     * @hidden\n     */\n    GroupLazyLoadRenderer.prototype.setVisible = function (columns) {\n        var gObj = this.parent;\n        var rows = this.getRows();\n        var testRow;\n        rows.some(function (r) { if (r.isDataRow) {\n            testRow = r;\n        } return r.isDataRow; });\n        var contentrows = this.getRows().filter(function (row) { return !row.isDetailRow; });\n        for (var i = 0; i < columns.length; i++) {\n            var column = columns[parseInt(i.toString(), 10)];\n            var idx = this.parent.getNormalizedColumnIndex(column.uid);\n            var colIdx = this.parent.getColumnIndexByUid(column.uid);\n            var displayVal = column.visible === true ? '' : 'none';\n            if (idx !== -1 && testRow && idx < testRow.cells.length) {\n                setStyleAttribute(this.getColGroup().childNodes[parseInt(idx.toString(), 10)], { 'display': displayVal });\n            }\n            this.setDisplayNone(gObj.getDataRows(), colIdx, displayVal, contentrows, idx);\n            if (!this.parent.invokedFromMedia && column.hideAtMedia) {\n                this.parent.updateMediaColumns(column);\n            }\n            this.parent.invokedFromMedia = false;\n        }\n    };\n    /**\n     * Function to set display.\n     *\n     * @param {Object} tr - specifies the row object\n     * @param {number} idx - specifies the index\n     * @param {string} displayVal - specifies the display value\n     * @param {Row<Column>[]} rows - specifies the array of rows\n     * @param {number} oriIdx - specifies the index\n     * @returns {void}\n     * @hidden\n     */\n    GroupLazyLoadRenderer.prototype.setDisplayNone = function (tr, idx, displayVal, rows, oriIdx) {\n        if (!this.parent.groupSettings.columns.length) {\n            setDisplayValue(tr, idx, displayVal, rows);\n        }\n        else {\n            var keys = Object.keys(this.groupCache);\n            for (var j = 0; j < keys.length; j++) {\n                var uids = this.rowsByUid[keys[parseInt(j.toString(), 10)]];\n                var idxs = Object.keys(uids);\n                for (var i = 0; i < idxs.length; i++) {\n                    var tr_1 = this.parent.getContent()\n                        .querySelector('tr[data-uid=' + idxs[parseInt(i.toString(), 10)] + ']');\n                    var row = uids[idxs[parseInt(i.toString(), 10)]];\n                    if (row.isCaptionRow) {\n                        if (!this.captionModelGen.isEmpty()) {\n                            this.changeCaptionRow(row, tr_1, keys[parseInt(j.toString(), 10)]);\n                        }\n                        else {\n                            row.cells[row.indent + 1].colSpan = displayVal === '' ? row.cells[row.indent + 1].colSpan + 1\n                                : row.cells[row.indent + 1].colSpan - 1;\n                            if (tr_1) {\n                                tr_1.cells[row.indent + 1].colSpan = row.cells[row.indent + 1].colSpan;\n                            }\n                        }\n                    }\n                    if (row.isDataRow) {\n                        this.showAndHideCells(tr_1, idx, displayVal, false);\n                        row.cells[parseInt(oriIdx.toString(), 10)].visible = displayVal === '' ? true : false;\n                    }\n                    if (!row.isCaptionRow && !row.isDataRow && isNullOrUndefined(row.indent)) {\n                        row.cells[parseInt(oriIdx.toString(), 10)].visible = displayVal === '' ? true : false;\n                        row.visible = row.cells.some(function (cell) { return cell.isDataCell && cell.visible; });\n                        this.showAndHideCells(tr_1, idx, displayVal, true, row);\n                    }\n                }\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.changeCaptionRow = function (row, tr, index) {\n        var capRow = row;\n        var captionData = row.data;\n        var data = this.groupGenerator.generateCaptionRow(captionData, capRow.indent, capRow.parentGid, undefined, capRow.tIndex, capRow.parentUid);\n        data.uid = row.uid;\n        data.isExpand = row.isExpand;\n        data.lazyLoadCssClass = row.lazyLoadCssClass;\n        this.rowsByUid[parseInt(index.toString(), 10)][row.uid] = data;\n        this.groupCache[parseInt(index.toString(), 10)][this.objIdxByUid[parseInt(index.toString(), 10)][row.uid]] = data;\n        if (tr) {\n            var tbody = this.parent.getContentTable().querySelector(literals.tbody);\n            tbody.replaceChild(this.rowRenderer.render(data, this.parent.getColumns()), tr);\n        }\n    };\n    GroupLazyLoadRenderer.prototype.showAndHideCells = function (tr, idx, displayVal, isSummary, row) {\n        if (tr) {\n            var cls = isSummary ? 'td.e-summarycell' : 'td.e-rowcell';\n            setStyleAttribute(tr.querySelectorAll(cls)[parseInt(idx.toString(), 10)], { 'display': displayVal });\n            if (tr.querySelectorAll(cls)[parseInt(idx.toString(), 10)].classList.contains('e-hide')) {\n                removeClass([tr.querySelectorAll(cls)[parseInt(idx.toString(), 10)]], ['e-hide']);\n            }\n            if (isSummary) {\n                if (row.visible && tr.classList.contains('e-hide')) {\n                    removeClass([tr], ['e-hide']);\n                }\n                else if (!row.visible) {\n                    addClass([tr], ['e-hide']);\n                }\n            }\n        }\n    };\n    return GroupLazyLoadRenderer;\n}(ContentRender));\nexport { GroupLazyLoadRenderer };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}