{"ast":null,"code":"import { TextMarkupAnnotation, ShapeAnnotation, StampAnnotation, StickyNotesAnnotation, MeasureAnnotation, InkAnnotation, AllowedInteraction, DynamicStampItem, SignStampItem, StandardBusinessStampItem } from '../index';\nimport { createElement, Browser, isNullOrUndefined, isBlazor } from '@syncfusion/ej2-base';\nimport { NumericTextBox, Slider, ColorPicker } from '@syncfusion/ej2-inputs';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\nimport { processPathData, splitArrayCollection } from '@syncfusion/ej2-drawings';\nimport { isLineShapes, cloneObject } from '../drawing/drawing-util';\nimport { NodeDrawingTool, LineTool, MoveTool, ResizeTool, ConnectTool } from '../drawing/tools';\nimport { updateDistanceLabel, updateRadiusLabel, updatePerimeterLabel, updateCalibrateLabel } from '../drawing/connector-util';\nimport { FreeTextAnnotation } from './free-text-annotation';\nimport { InputElement } from './input-element';\nimport { InPlaceEditor } from '@syncfusion/ej2-inplace-editor';\n/**\n * The `Annotation` module is used to handle annotation actions of PDF viewer.\n */\nvar Annotation = /** @class */function () {\n  /**\n   * @param pdfViewer\n   * @param viewerBase\n   * @param pdfViewer\n   * @param viewerBase\n   * @private\n   */\n  function Annotation(pdfViewer, viewerBase) {\n    this.isUndoRedoAction = false;\n    this.isUndoAction = false;\n    this.annotationSelected = true;\n    this.isAnnotDeletionApiCall = false;\n    this.removedDocumentAnnotationCollection = [];\n    /**\n     * @private\n     */\n    this.isShapeCopied = false;\n    /**\n     * @private\n     */\n    this.actionCollection = [];\n    /**\n     * @private\n     */\n    this.redoCollection = [];\n    /**\n     * @private\n     */\n    this.isPopupNoteVisible = false;\n    /**\n     * @private\n     */\n    this.undoCommentsElement = [];\n    /**\n     * @private\n     */\n    this.redoCommentsElement = [];\n    /**\n     * @private\n     */\n    this.selectAnnotationId = null;\n    /**\n     * @private\n     */\n    this.isAnnotationSelected = false;\n    /**\n     * @private\n     */\n    this.annotationPageIndex = null;\n    this.previousIndex = null;\n    // eslint-disable-next-line\n    this.overlappedAnnotations = [];\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    this.overlappedCollections = [];\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    this.isFormFieldShape = false;\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    this.removedAnnotationCollection = [];\n    this.pdfViewer = pdfViewer;\n    this.pdfViewerBase = viewerBase;\n    if (this.pdfViewer.enableTextMarkupAnnotation) {\n      this.textMarkupAnnotationModule = new TextMarkupAnnotation(this.pdfViewer, this.pdfViewerBase);\n    }\n    if (this.pdfViewer.enableShapeAnnotation) {\n      this.shapeAnnotationModule = new ShapeAnnotation(this.pdfViewer, this.pdfViewerBase);\n    }\n    if (this.pdfViewer.enableMeasureAnnotation) {\n      this.measureAnnotationModule = new MeasureAnnotation(this.pdfViewer, this.pdfViewerBase);\n    }\n    this.stampAnnotationModule = new StampAnnotation(this.pdfViewer, this.pdfViewerBase);\n    this.stickyNotesAnnotationModule = new StickyNotesAnnotation(this.pdfViewer, this.pdfViewerBase);\n    this.freeTextAnnotationModule = new FreeTextAnnotation(this.pdfViewer, this.pdfViewerBase);\n    this.inputElementModule = new InputElement(this.pdfViewer, this.pdfViewerBase);\n    this.inkAnnotationModule = new InkAnnotation(this.pdfViewer, this.pdfViewerBase);\n  }\n  /**\n   * Set annotation type to be added in next user interaction in PDF Document.\n   *\n   * @param type\n   * @param dynamicStampItem\n   * @param signStampItem\n   * @param standardBusinessStampItem\n   * @returns void\n   */\n  // eslint-disable-next-line max-len\n  Annotation.prototype.setAnnotationMode = function (type, dynamicStampItem, signStampItem, standardBusinessStampItem) {\n    var allowServerDataBind = this.pdfViewer.allowServerDataBinding;\n    this.pdfViewer.enableServerDataBinding(false);\n    if (this.pdfViewer.tool === \"Stamp\" && this.pdfViewer.toolbarModule) {\n      this.pdfViewer.toolbarModule.updateStampItems();\n    }\n    if (this.pdfViewer.toolbarModule && this.pdfViewer.toolbarModule.annotationToolbarModule) {\n      this.pdfViewer.toolbarModule.annotationToolbarModule.resetFreeTextAnnot();\n    }\n    type !== 'None' ? this.triggerAnnotationUnselectEvent() : null;\n    this.pdfViewer.tool = \"\";\n    if (this.pdfViewer.toolbarModule) {\n      this.pdfViewer.toolbarModule.deSelectCommentAnnotation();\n    }\n    if (type === 'None') {\n      this.clearAnnotationMode();\n    } else if (type === 'Highlight' || type === 'Strikethrough' || type === 'Underline') {\n      if (this.textMarkupAnnotationModule) {\n        this.textMarkupAnnotationModule.isSelectionMaintained = false;\n        this.textMarkupAnnotationModule.drawTextMarkupAnnotations(type.toString());\n      }\n    } else if (type === 'Line' || type === 'Arrow' || type === 'Rectangle' || type === 'Circle' || type === 'Polygon') {\n      if (this.shapeAnnotationModule) {\n        this.shapeAnnotationModule.setAnnotationType(type);\n      }\n    } else if (type === 'Distance' || type === 'Perimeter' || type === 'Area' || type === 'Radius' || type === 'Volume') {\n      if (this.measureAnnotationModule) {\n        this.measureAnnotationModule.setAnnotationType(type);\n      }\n    } else if (type === 'FreeText' && this.freeTextAnnotationModule) {\n      this.freeTextAnnotationModule.setAnnotationType('FreeText');\n      this.freeTextAnnotationModule.isNewFreeTextAnnot = true;\n      this.freeTextAnnotationModule.isNewAddedAnnot = true;\n    } else if (type === 'HandWrittenSignature') {\n      this.pdfViewerBase.signatureModule.setAnnotationMode();\n    } else if (type === 'Initial') {\n      this.pdfViewerBase.signatureModule.setInitialMode();\n    } else if (type === 'Ink') {\n      this.inkAnnotationModule.setAnnotationMode();\n    } else if (type === 'StickyNotes') {\n      this.pdfViewerBase.isCommentIconAdded = true;\n      this.pdfViewerBase.isAddComment = true;\n      // eslint-disable-next-line max-len\n      var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1));\n      if (pageDiv) {\n        pageDiv.addEventListener('mousedown', this.pdfViewer.annotationModule.stickyNotesAnnotationModule.drawIcons.bind(this));\n      }\n    } else if (type === 'Stamp') {\n      this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode = true;\n      this.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected = true;\n      this.pdfViewerBase.stampAdded = true;\n      if (dynamicStampItem) {\n        // eslint-disable-next-line\n        var stampName = DynamicStampItem[dynamicStampItem];\n        this.pdfViewerBase.isDynamicStamp = true;\n        this.stampAnnotationModule.retrieveDynamicStampAnnotation(stampName);\n      } else if (signStampItem) {\n        // eslint-disable-next-line\n        var stampName = SignStampItem[signStampItem];\n        this.pdfViewerBase.isDynamicStamp = false;\n        this.stampAnnotationModule.retrievestampAnnotation(stampName);\n      } else if (standardBusinessStampItem) {\n        // eslint-disable-next-line\n        var stampName = StandardBusinessStampItem[standardBusinessStampItem];\n        this.pdfViewerBase.isDynamicStamp = false;\n        this.stampAnnotationModule.retrievestampAnnotation(stampName);\n      }\n    }\n    this.pdfViewer.enableServerDataBinding(allowServerDataBind, true);\n    this.pdfViewerBase.initiateTextSelection();\n  };\n  Annotation.prototype.deleteAnnotationById = function (annotationId) {\n    if (annotationId) {\n      this.isAnnotDeletionApiCall = true;\n      this.annotationSelected = false;\n      this.selectAnnotation(annotationId);\n      this.deleteAnnotation();\n      this.isAnnotDeletionApiCall = false;\n    }\n  };\n  Annotation.prototype.clearAnnotationMode = function () {\n    if (this.textMarkupAnnotationModule) {\n      this.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n    }\n    if (this.freeTextAnnotationModule) {\n      this.freeTextAnnotationModule.isNewFreeTextAnnot = false;\n      this.freeTextAnnotationModule.isNewAddedAnnot = false;\n    }\n    if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n      this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAddMode = '';\n    }\n    if (this.pdfViewerBase.isShapeAnnotationModule()) {\n      this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode = '';\n    }\n    if (this.pdfViewerBase.isCalibrateAnnotationModule()) {\n      this.pdfViewer.annotation.measureAnnotationModule.currentAnnotationMode = '';\n    }\n    if (this.pdfViewer.annotationModule.inkAnnotationModule) {\n      // eslint-disable-next-line\n      var currentPageNumber = parseInt(this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);\n      this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(currentPageNumber);\n    }\n  };\n  Annotation.prototype.deleteAnnotation = function () {\n    if (this.textMarkupAnnotationModule) {\n      this.textMarkupAnnotationModule.deleteTextMarkupAnnotation();\n    }\n    var selectedAnnotation = this.pdfViewer.selectedItems.annotations[0];\n    if (selectedAnnotation) {\n      var data = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_formfields');\n      var formFieldsData = JSON.parse(data);\n      var newFormFieldsData = [];\n      if (formFieldsData) {\n        for (var x = 0; x < formFieldsData.length; x++) {\n          if (formFieldsData[x].uniqueID == selectedAnnotation.id) {\n            formFieldsData[x].Value = '';\n            for (var y = 0; y < formFieldsData.length; y++) {\n              if (formFieldsData[y].Name === 'ink') {\n                formFieldsData[y].Value = '';\n              }\n              if (formFieldsData[x].FieldName === formFieldsData[y].FieldName && formFieldsData[y].Name === 'ink') {\n                formFieldsData.splice(y, 1);\n              }\n            }\n            newFormFieldsData.push(formFieldsData[x]);\n          } else {\n            newFormFieldsData.push(formFieldsData[x]);\n          }\n        }\n        window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_formfields', JSON.stringify(newFormFieldsData));\n      }\n    }\n    var isLock = false;\n    var isReadOnly = false;\n    if (this.pdfViewer.selectedItems.annotations.length > 0) {\n      // eslint-disable-next-line\n      var annotation_1 = this.pdfViewer.selectedItems.annotations[0];\n      var type = annotation_1.shapeAnnotationType;\n      if (type === 'Path' || annotation_1.formFieldAnnotationType === 'SignatureField' || annotation_1.formFieldAnnotationType === 'InitialField' || type === 'HandWrittenSignature' || type === 'SignatureText' || type === 'SignatureImage') {\n        var inputFields = document.getElementById(annotation_1.id);\n        if (inputFields && inputFields.disabled) {\n          isReadOnly = true;\n        }\n      }\n      if (annotation_1.annotationSettings) {\n        isLock = annotation_1.annotationSettings.isLock;\n        if (isLock && this.checkAllowedInteractions('Delete', annotation_1)) {\n          isLock = false;\n        }\n      }\n      if (!isLock && !isReadOnly) {\n        var pageNumber = annotation_1.pageIndex;\n        // eslint-disable-next-line\n        var shapeType = annotation_1.shapeAnnotationType;\n        // eslint-disable-next-line\n        var undoElement = void 0;\n        if (shapeType === 'Line' || shapeType === 'LineWidthArrowHead' || shapeType === 'Polygon' || shapeType === 'Ellipse' || shapeType === 'Rectangle' || shapeType === 'Radius' || shapeType === 'Distance') {\n          // eslint-disable-next-line max-len\n          if (isNullOrUndefined(annotation_1.measureType) || annotation_1.measureType === '') {\n            this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(annotation_1, 'shape');\n            this.updateImportAnnotationCollection(annotation_1, pageNumber, 'shapeAnnotation');\n          } else {\n            // eslint-disable-next-line max-len\n            this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(annotation_1, 'measure');\n            // eslint-disable-next-line max-len\n            this.updateImportAnnotationCollection(annotation_1, pageNumber, 'measureShapeAnnotation');\n          }\n          undoElement = this.modifyInCollections(annotation_1, 'delete');\n        } else if (shapeType === 'FreeText') {\n          // eslint-disable-next-line max-len\n          this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(annotation_1, 'FreeText', 'delete');\n          undoElement = this.modifyInCollections(annotation_1, 'delete');\n          this.updateImportAnnotationCollection(annotation_1, pageNumber, 'freeTextAnnotation');\n        } else if (shapeType === 'HandWrittenSignature' || shapeType === 'SignatureImage' || shapeType === 'SignatureText') {\n          undoElement = this.modifyInCollections(annotation_1, 'delete');\n        } else if (shapeType === 'Ink') {\n          // eslint-disable-next-line max-len\n          this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(annotation_1, 'Ink', 'delete');\n          undoElement = this.modifyInCollections(annotation_1, 'delete');\n          this.updateImportAnnotationCollection(annotation_1, pageNumber, 'signatureInkAnnotation');\n        } else {\n          undoElement = this.pdfViewer.selectedItems.annotations[0];\n          // eslint-disable-next-line max-len\n          this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(undoElement, undoElement.shapeAnnotationType, 'delete');\n          // eslint-disable-next-line max-len\n          this.pdfViewer.annotation.stampAnnotationModule.updateSessionStorage(annotation_1, null, 'delete');\n        }\n        if (shapeType === 'StickyNotes') {\n          this.updateImportAnnotationCollection(annotation_1, pageNumber, 'stickyNotesAnnotation');\n        }\n        if (shapeType === 'Stamp' || 'Image') {\n          this.updateImportAnnotationCollection(annotation_1, pageNumber, 'stampAnnotations');\n        }\n        // eslint-disable-next-line max-len\n        this.pdfViewer.annotation.addAction(pageNumber, null, annotation_1, 'Delete', '', undoElement, annotation_1);\n        // eslint-disable-next-line\n        var removeDiv = void 0;\n        if (annotation_1.annotName !== '') {\n          removeDiv = document.getElementById(annotation_1.annotName);\n        } else {\n          if (undoElement) {\n            if (undoElement.annotName !== '') {\n              removeDiv = document.getElementById(undoElement.annotName);\n            }\n          }\n        }\n        this.removeCommentPanelDiv(removeDiv);\n        var selectedAnnot = this.pdfViewer.selectedItems.annotations[0];\n        var annotationId = selectedAnnot.annotName;\n        var annotType = this.getAnnotationType(selectedAnnot.shapeAnnotationType, selectedAnnot.measureType);\n        if (shapeType === 'Path' || selectedAnnot.formFieldAnnotationType === 'SignatureField' || selectedAnnot.formFieldAnnotationType === 'InitialField' || shapeType === 'HandWrittenSignature' || shapeType === 'SignatureText' || shapeType === 'SignatureImage') {\n          // eslint-disable-next-line\n          var formFieldCollection = this.pdfViewer.retrieveFormFields();\n          var index = formFieldCollection.findIndex(function (el) {\n            return el.id === annotation_1.id;\n          });\n          var formFieldName = void 0;\n          if (index > -1) {\n            formFieldName = formFieldCollection[index].name;\n          }\n          for (var m = 0; m < formFieldCollection.length; m++) {\n            if (selectedAnnot.id === formFieldCollection[m].id || isNullOrUndefined(formFieldName) && formFieldName === formFieldCollection[m].name) {\n              formFieldCollection[m].value = '';\n              formFieldCollection[m].signatureType = '';\n              var annotation_2 = this.getAnnotationsFromCollections(formFieldCollection[m].id);\n              this.updateInputFieldDivElement(annotation_2);\n              undoElement = this.modifyInCollections(annotation_2, 'delete');\n              // eslint-disable-next-line max-len\n              this.pdfViewer.annotation.addAction(annotation_2.pageIndex, null, annotation_2, 'Delete', '', undoElement, annotation_2);\n              if (this.pdfViewer.formDesignerModule && selectedAnnot.formFieldAnnotationType) this.updateFormFieldCollection(annotation_2);else this.updateAnnotationCollection(annotation_2);\n              this.pdfViewer.remove(annotation_2);\n            }\n          }\n          if (this.pdfViewer.formDesignerModule && selectedAnnot.formFieldAnnotationType) this.updateFormFieldCollection(annotation_1);else this.updateAnnotationCollection(annotation_1);\n        }\n        if (this.pdfViewer.formDesignerModule && selectedAnnot.formFieldAnnotationType) this.updateFormFieldCollection(annotation_1);else this.updateAnnotationCollection(annotation_1);\n        var formFieldObj = this.pdfViewer.nameTable[annotation_1.id.split(\"_\")[0]];\n        if (formFieldObj != null && (formFieldObj.formFieldAnnotationType === 'SignatureField' || formFieldObj.formFieldAnnotationType === 'InitialField')) {\n          var index = this.pdfViewer.formFieldCollections.findIndex(function (el) {\n            return el.id === annotation_1.id.split(\"_\")[0];\n          });\n          var formFieldName = void 0;\n          if (index > -1) {\n            formFieldName = this.pdfViewer.formFieldCollections[index].name;\n          }\n          for (var i = 0; i < this.pdfViewer.formFieldCollections.length; i++) {\n            if (formFieldName === this.pdfViewer.formFieldCollections[i].name) {\n              var formFieldsIndex = this.pdfViewer.formFieldCollections[i];\n              this.pdfViewer.fireFormFieldPropertiesChangeEvent(\"formFieldPropertiesChange\", formFieldsIndex, formFieldsIndex.pageIndex, true, false, false, false, false, false, false, false, false, false, false, false, false, false, false, formFieldsIndex.value, \"\");\n              formFieldsIndex.value = \"\";\n              formFieldsIndex.signatureType = \"\";\n              this.pdfViewer.formDesignerModule.updateFormFieldCollections(formFieldsIndex);\n              var annotation_3 = this.getAnnotationsFromCollections(formFieldsIndex.id + '_content');\n              if (!isNullOrUndefined(annotation_3)) {\n                undoElement = this.modifyInCollections(annotation_3, 'delete');\n                // eslint-disable-next-line max-len\n                this.pdfViewer.annotation.addAction(annotation_3.pageIndex, null, annotation_3, 'Delete', '', undoElement, annotation_3);\n                this.updateInputFieldDivElement(annotation_3);\n                var formFieldObject = this.pdfViewer.nameTable[annotation_3.id.split(\"_\")[0]];\n                formFieldObject.wrapper.children.splice(formFieldObject.wrapper.children.indexOf(annotation_3.wrapper.children[0]), 1);\n                this.pdfViewer.remove(annotation_3);\n              }\n            }\n          }\n        }\n        this.pdfViewer.remove(annotation_1);\n        this.pdfViewer.renderDrawing();\n        this.pdfViewer.clearSelection(pageNumber);\n        this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection, '_formDesigner');\n        this.pdfViewerBase.updateDocumentEditedProperty(true);\n        this.pdfViewerBase.tool = null;\n        this.pdfViewer.tool = null;\n        if (selectedAnnot.shapeAnnotationType === 'HandWrittenSignature' || selectedAnnot.shapeAnnotationType === 'SignatureText' || selectedAnnot.shapeAnnotationType === 'SignatureImage' || selectedAnnot.shapeAnnotationType === 'Path') {\n          // eslint-disable-next-line max-len\n          var bounds = {\n            left: selectedAnnot.bounds.x,\n            top: selectedAnnot.bounds.y,\n            width: selectedAnnot.bounds.width,\n            height: selectedAnnot.bounds.height\n          };\n          // eslint-disable-next-line max-len\n          this.pdfViewer.fireSignatureRemove(pageNumber, selectedAnnot.id, selectedAnnot.shapeAnnotationType, bounds);\n        } else if (this.pdfViewer.annotationModule) {\n          // eslint-disable-next-line max-len\n          this.pdfViewer.fireAnnotationRemove(pageNumber, annotationId, annotType, selectedAnnot.bounds);\n        }\n        if (this.pdfViewer.textSelectionModule) {\n          this.pdfViewer.textSelectionModule.enableTextSelectionMode();\n        }\n      }\n    }\n    this.updateToolbar(true);\n    if (this.pdfViewer.toolbarModule) {\n      if (this.pdfViewer.toolbarModule.annotationToolbarModule && !isLock) {\n        this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(false, true);\n        this.pdfViewer.toolbarModule.annotationToolbarModule.enableTextMarkupAnnotationPropertiesTools(false);\n      }\n    }\n  };\n  /**\n   * @param annotationId\n  */\n  // eslint-disable-next-line max-len\n  Annotation.prototype.getAnnotationsFromCollections = function (annotationId) {\n    var collections = this.pdfViewer.annotations;\n    if (collections && annotationId) {\n      for (var i = 0; i < collections.length; i++) {\n        if (collections[i].id === annotationId) {\n          return collections[i];\n        }\n      }\n    }\n  };\n  ;\n  /**\n   * @param annotation\n  */\n  Annotation.prototype.updateInputFieldDivElement = function (annotation) {\n    var inputFields = document.getElementById(annotation.id);\n    var signatureFieldElement = document.getElementById(annotation.id + \"_html_element\");\n    if (inputFields === null && !isNullOrUndefined(signatureFieldElement)) {\n      inputFields = signatureFieldElement.children[0].children[0];\n    }\n    if (inputFields && inputFields.classList.contains('e-pdfviewer-signatureformfields-signature')) {\n      inputFields.className = 'e-pdfviewer-signatureformfields';\n      inputFields.style.pointerEvents = '';\n      inputFields.parentElement.style.pointerEvents = '';\n    }\n    if (this.pdfViewer.formDesignerModule) {\n      this.pdfViewer.formDesignerModule.updateSignatureValue(annotation.id);\n    } else {\n      this.pdfViewer.formFieldsModule.updateDataInSession(inputFields, '');\n    }\n  };\n  /**\n   * @param annotation\n   * @param pageNumber\n   * @param annotation\n   * @param pageNumber\n   * @private\n   */\n  // eslint-disable-next-line\n  Annotation.prototype.storeAnnotationCollections = function (annotation, pageNumber) {\n    if (this.isFormFieldShape) {\n      var collectionDetails = this.checkFormDesignCollection(annotation);\n      var selectAnnotation = cloneObject(annotation);\n      selectAnnotation.formFieldId = annotation.annotName;\n      selectAnnotation.pageNumber = pageNumber;\n      delete selectAnnotation.annotName;\n      if (annotation.id) {\n        selectAnnotation.uniqueKey = annotation.id;\n        delete selectAnnotation.id;\n      }\n      if (collectionDetails.isExisting) {\n        this.pdfViewer.formFieldCollection.splice(collectionDetails.position, 0, selectAnnotation);\n      } else {\n        this.pdfViewer.formFieldCollection.push(selectAnnotation);\n      }\n    } else {\n      // eslint-disable-next-line\n      var collectionDetails = this.checkAnnotationCollection(annotation);\n      // eslint-disable-next-line\n      var selectAnnotation = cloneObject(annotation);\n      selectAnnotation.annotationId = annotation.annotName;\n      selectAnnotation.pageNumber = pageNumber;\n      delete selectAnnotation.annotName;\n      if (annotation.shapeAnnotationType === 'stamp') {\n        selectAnnotation.uniqueKey = annotation.randomId;\n        delete selectAnnotation.randomId;\n      }\n      if (annotation.shapeAnnotationType === 'sticky') {\n        selectAnnotation.uniqueKey = annotation.annotName;\n      }\n      if (annotation.id) {\n        selectAnnotation.uniqueKey = annotation.id;\n        delete selectAnnotation.id;\n      }\n      // eslint-disable-next-line\n      if (selectAnnotation.customData && annotation.customData && JSON.stringify(selectAnnotation.customData) !== JSON.stringify(annotation.customData)) {\n        selectAnnotation.customData = annotation.customData;\n      }\n      if (collectionDetails.isExisting) {\n        this.pdfViewer.annotationCollection.splice(collectionDetails.position, 0, selectAnnotation);\n      } else {\n        this.pdfViewer.annotationCollection.push(selectAnnotation);\n      }\n    }\n  };\n  Annotation.prototype.checkFormDesignCollection = function (annotation) {\n    // eslint-disable-next-line\n    var collections = this.pdfViewer.formFieldCollection;\n    if (collections && annotation) {\n      for (var i = 0; i < collections.length; i++) {\n        if (collections[i].formFieldId === annotation.annotName) {\n          this.pdfViewer.formFieldCollection.splice(i, 1);\n          return {\n            isExisting: true,\n            position: i\n          };\n        }\n      }\n    }\n    return {\n      isExisting: false,\n      position: null\n    };\n  };\n  Annotation.prototype.updateFormFieldCollection = function (annotation) {\n    // eslint-disable-next-line\n    var collections = this.pdfViewer.formFieldCollection;\n    if (collections && annotation) {\n      for (var i = 0; i < collections.length; i++) {\n        if (collections[i].formFieldId === annotation.annotName) {\n          this.removedAnnotationCollection.push(collections[i]);\n          this.pdfViewer.formFieldCollection.splice(i, 1);\n          break;\n        }\n      }\n    }\n  };\n  /**\n   * @param annotation\n   * @private\n   */\n  // eslint-disable-next-line\n  Annotation.prototype.getCustomData = function (annotation) {\n    var customData;\n    if (annotation.ExistingCustomData && !annotation.CustomData) {\n      customData = JSON.parse(annotation.ExistingCustomData);\n    } else if (annotation.CustomData === null) {\n      if (annotation.shapeAnnotationType === 'sticky') {\n        customData = this.pdfViewer.stickyNotesSettings.customData;\n      }\n      if (annotation.shapeAnnotationType === 'Stamp') {\n        customData = this.pdfViewer.stampSettings.customData;\n      }\n      if (annotation.shapeAnnotationType === 'FreeText') {\n        customData = this.pdfViewer.freeTextSettings.customData;\n      }\n      if (annotation.id === 'shape') {\n        customData = this.getShapeData(annotation.ShapeAnnotationType, annotation.subject);\n      }\n      if (annotation.id === 'measure') {\n        customData = this.getMeasureData(annotation.Subject);\n      }\n      if (annotation.shapeAnnotationType === 'textMarkup') {\n        customData = this.getTextMarkupData(annotation.subject);\n      }\n      if (annotation.shapeAnnotationType === 'Ink') {\n        customData = this.pdfViewer.inkAnnotationSettings.customData;\n      }\n    } else {\n      customData = annotation.CustomData;\n    }\n    return customData;\n  };\n  /**\n   * @param type\n   * @param subject\n   * @private\n   */\n  // eslint-disable-next-line\n  Annotation.prototype.getShapeData = function (type, subject) {\n    var customData;\n    if (type === 'Line' && subject !== 'Arrow' && this.pdfViewer.lineSettings.customData) {\n      customData = this.pdfViewer.lineSettings.customData;\n    } else if ((type === 'LineWidthArrowHead' || subject === 'Arrow') && this.pdfViewer.arrowSettings.customData) {\n      customData = this.pdfViewer.arrowSettings.customData;\n    } else if ((type === 'Rectangle' || type === 'Square') && this.pdfViewer.rectangleSettings.customData) {\n      customData = this.pdfViewer.rectangleSettings.customData;\n    } else if ((type === 'Ellipse' || type === 'Circle') && this.pdfViewer.circleSettings.customData) {\n      customData = this.pdfViewer.circleSettings.customData;\n    } else if (type === 'Polygon' && this.pdfViewer.polygonSettings.customData) {\n      customData = this.pdfViewer.polygonSettings.customData;\n    } else if (this.pdfViewer.annotationSettings.customData) {\n      customData = this.pdfViewer.annotationSettings.customData;\n    }\n    return customData;\n  };\n  /**\n   * @param type\n   * @private\n   */\n  // eslint-disable-next-line\n  Annotation.prototype.getMeasureData = function (type) {\n    var customData;\n    if ((type === 'Distance' || type === 'Distance calculation') && this.pdfViewer.distanceSettings.customData) {\n      customData = this.pdfViewer.distanceSettings.customData;\n    } else if ((type === 'Line' || type === 'Perimeter calculation') && this.pdfViewer.lineSettings.customData) {\n      customData = this.pdfViewer.lineSettings.customData;\n      // eslint-disable-next-line max-len\n    } else if ((type === 'Polygon' || type === 'Area calculation' || type === 'Volume calculation') && this.pdfViewer.polygonSettings.customData) {\n      customData = this.pdfViewer.polygonSettings.customData;\n    } else if ((type === 'Radius' || type === 'Radius calculation') && this.pdfViewer.radiusSettings.customData) {\n      customData = this.pdfViewer.radiusSettings.customData;\n    } else if (this.pdfViewer.annotationSettings.customData) {\n      customData = this.pdfViewer.annotationSettings.customData;\n    }\n    return customData;\n  };\n  /**\n   * @param type\n   * @private\n   */\n  // eslint-disable-next-line\n  Annotation.prototype.getTextMarkupData = function (type) {\n    var customData;\n    if (type === 'Highlight' && this.pdfViewer.highlightSettings.customData) {\n      customData = this.pdfViewer.highlightSettings.customData;\n    } else if (type === 'Underline' && this.pdfViewer.underlineSettings.customData) {\n      customData = this.pdfViewer.underlineSettings.customData;\n    } else if (type === 'Strikethrough' && this.pdfViewer.strikethroughSettings.customData) {\n      customData = this.pdfViewer.strikethroughSettings.customData;\n    } else if (this.pdfViewer.annotationSettings.customData) {\n      customData = this.pdfViewer.annotationSettings.customData;\n    }\n    return customData;\n  };\n  /**\n   * @param type\n   * @private\n   */\n  // eslint-disable-next-line\n  Annotation.prototype.getData = function (type) {\n    var customData;\n    if (type === 'FreeText' && this.pdfViewer.freeTextSettings.customData) {\n      customData = this.pdfViewer.freeTextSettings.customData;\n    } else if ((type === 'image' || type === 'Stamp') && this.pdfViewer.stampSettings.customData) {\n      customData = this.pdfViewer.stampSettings.customData;\n    } else if (type === 'sticky' && this.pdfViewer.stickyNotesSettings.customData) {\n      customData = this.pdfViewer.stickyNotesSettings.customData;\n    } else if (this.pdfViewer.annotationSettings.customData) {\n      customData = this.pdfViewer.annotationSettings.customData;\n    }\n    return customData;\n  };\n  /**\n   * @private\n   */\n  // eslint-disable-next-line\n  Annotation.prototype.clearAnnotationStorage = function () {\n    // eslint-disable-next-line\n    var sessionSize = Math.round(JSON.stringify(window.sessionStorage).length / 1024);\n    var maxSessionSize = 4500;\n    if (sessionSize > maxSessionSize) {\n      var storageLength = window.sessionStorage.length;\n      // eslint-disable-next-line\n      var annotationList = [];\n      for (var i = 0; i < storageLength; i++) {\n        if (window.sessionStorage.key(i) && window.sessionStorage.key(i).split('_')[3]) {\n          if (window.sessionStorage.key(i).split('_')[3] === 'annotations') {\n            // eslint-disable-next-line max-len\n            this.pdfViewerBase.annotationStorage[window.sessionStorage.key(i)] = window.sessionStorage.getItem(window.sessionStorage.key(i));\n            annotationList.push(window.sessionStorage.key(i));\n          }\n        }\n      }\n      if (annotationList) {\n        for (var i = 0; i < annotationList.length; i++) {\n          window.sessionStorage.removeItem(annotationList[i]);\n        }\n      }\n    }\n  };\n  /**\n   * @param annotation\n   * @private\n   */\n  // eslint-disable-next-line\n  Annotation.prototype.checkAnnotationCollection = function (annotation) {\n    // eslint-disable-next-line\n    var collections = this.pdfViewer.annotationCollection;\n    if (collections && annotation) {\n      for (var i = 0; i < collections.length; i++) {\n        if (collections[i].annotationId === annotation.annotName) {\n          this.pdfViewer.annotationCollection.splice(i, 1);\n          return {\n            isExisting: true,\n            position: i\n          };\n        }\n      }\n    }\n    return {\n      isExisting: false,\n      position: null\n    };\n  };\n  /**\n   * @param annotation\n   * @private\n   */\n  // eslint-disable-next-line\n  Annotation.prototype.updateAnnotationCollection = function (annotation) {\n    // eslint-disable-next-line\n    var collections = this.pdfViewer.annotationCollection;\n    if (collections && annotation) {\n      for (var i = 0; i < collections.length; i++) {\n        if (collections[i].annotationId === annotation.annotName || collections[i].annotationId === annotation.annotationId) {\n          this.removedAnnotationCollection.push(collections[i]);\n          this.pdfViewer.annotationCollection.splice(i, 1);\n          break;\n        }\n      }\n    }\n  };\n  /**\n   * @param annotation\n   * @param pageNumber\n   * @param annotationType\n   * @private\n   */\n  // eslint-disable-next-line\n  Annotation.prototype.updateImportAnnotationCollection = function (annotation, pageNumber, annotationType) {\n    if (this.pdfViewerBase.isImportAction) {\n      if (this.pdfViewerBase.importedAnnotation && this.pdfViewerBase.importedAnnotation[pageNumber]) {\n        // eslint-disable-next-line\n        var currentPageAnnotations = this.pdfViewerBase.importedAnnotation[pageNumber];\n        if (currentPageAnnotations[annotationType] && !isNullOrUndefined(this.pdfViewerBase.importedAnnotation[pageNumber].annotationOrder)) {\n          this.pdfViewerBase.importedAnnotation[pageNumber].annotationOrder = this.pdfViewerBase.importedAnnotation[pageNumber].annotationOrder.filter(function (currentAnnotation) {\n            return !(annotation.annotName === currentAnnotation.AnnotName || annotation.annotName === currentAnnotation.annotName);\n          });\n        }\n        if (!isNullOrUndefined(this.pdfViewerBase.importedAnnotation) && !isNullOrUndefined(this.pdfViewerBase.importedAnnotation[pageNumber]) && !isNullOrUndefined(this.pdfViewerBase.importedAnnotation[pageNumber][annotationType])) {\n          this.pdfViewerBase.importedAnnotation[pageNumber][annotationType] = this.pdfViewerBase.importedAnnotation[pageNumber][annotationType].filter(function (currentAnnotation) {\n            return annotation.annotName !== currentAnnotation.AnnotName;\n          });\n        }\n      }\n    }\n    // eslint-disable-next-line\n    var documentcollections = this.pdfViewerBase.documentAnnotationCollections;\n    if (documentcollections && documentcollections[pageNumber]) {\n      // eslint-disable-next-line\n      var documentPageCollections = documentcollections[pageNumber];\n      if (documentPageCollections && documentPageCollections[annotationType]) {\n        for (var i = 0; i < documentPageCollections[annotationType].length; i++) {\n          // eslint-disable-next-line max-len\n          if (annotation.annotName === documentPageCollections[annotationType][i].AnnotName) {\n            this.pdfViewerBase.documentAnnotationCollections[pageNumber][annotationType].splice(i, 1);\n            break;\n          }\n        }\n      }\n    }\n  };\n  /**\n   * Select the annotations using annotation object or annotation Id.\n   *\n   * @param annotationId\n   * @returns void\n   */\n  Annotation.prototype.selectAnnotation = function (annotationId) {\n    // eslint-disable-next-line\n    var annotation;\n    var id;\n    if (typeof annotationId === 'object') {\n      annotation = annotationId;\n      id = annotation.annotationId;\n      annotation = this.getAnnotationsFromAnnotationCollections(id);\n    }\n    if (typeof annotationId === 'string') {\n      annotation = this.getAnnotationsFromAnnotationCollections(annotationId);\n      id = annotationId;\n    }\n    if (annotation) {\n      var pageIndex = isNullOrUndefined(annotation.pageNumber) ? annotation.pageIndex : annotation.pageNumber;\n      var isRender = false;\n      isRender = this.findRenderPageList(pageIndex);\n      var currentSelector = this.pdfViewer.annotationSelectorSettings;\n      //let pageIndex: number = this.getPageNumberFromAnnotationCollections(annotation);\n      if (annotation && pageIndex >= 0) {\n        if (annotation.shapeAnnotationType === 'textMarkup') {\n          if (annotation.rect || annotation.bounds) {\n            // eslint-disable-next-line max-len\n            var scrollValue = this.pdfViewerBase.pageSize[pageIndex].top * this.pdfViewerBase.getZoomFactor() + this.getAnnotationTop(annotation) * this.pdfViewerBase.getZoomFactor();\n            if (!this.isAnnotDeletionApiCall) {\n              var scroll_1 = (scrollValue - 20).toString();\n              // eslint-disable-next-line radix\n              this.pdfViewerBase.viewerContainer.scrollTop = parseInt(scroll_1);\n              this.pdfViewerBase.viewerContainer.scrollLeft = this.getAnnotationLeft(annotation) * this.pdfViewerBase.getZoomFactor();\n            }\n          } else {\n            if (this.pdfViewer.navigation) {\n              this.pdfViewer.navigation.goToPage(pageIndex + 1);\n            }\n          }\n        } else {\n          if (annotation.bounds) {\n            // eslint-disable-next-line max-len\n            var scrollValue = this.pdfViewerBase.pageSize[pageIndex].top * this.pdfViewerBase.getZoomFactor() + annotation.bounds.top * this.pdfViewerBase.getZoomFactor();\n            var scrollLeft = annotation.bounds.left * this.pdfViewerBase.getZoomFactor();\n            if (annotation.shapeAnnotationType === 'Ink') {\n              // eslint-disable-next-line max-len\n              scrollValue = this.pdfViewerBase.pageSize[pageIndex].top * this.pdfViewerBase.getZoomFactor() + annotation.bounds.y * this.pdfViewerBase.getZoomFactor();\n              scrollLeft = annotation.bounds.x * this.pdfViewerBase.getZoomFactor();\n            }\n            if (!this.isAnnotDeletionApiCall) {\n              var scroll_2 = (scrollValue - 20).toString();\n              // eslint-disable-next-line radix\n              this.pdfViewerBase.viewerContainer.scrollTop = parseInt(scroll_2);\n              this.pdfViewerBase.viewerContainer.scrollLeft = scrollLeft;\n            }\n          } else {\n            if (this.pdfViewer.navigation) {\n              this.pdfViewer.navigation.goToPage(pageIndex + 1);\n            }\n          }\n        }\n        if (isRender) {\n          if (this.previousIndex) {\n            this.pdfViewer.clearSelection(this.previousIndex);\n          }\n          this.pdfViewer.clearSelection(pageIndex);\n          this.previousIndex = pageIndex;\n          if (annotation.shapeAnnotationType === 'textMarkup') {\n            // eslint-disable-next-line max-len\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearCurrentAnnotationSelection(pageIndex, true);\n            // eslint-disable-next-line max-len\n            var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageIndex);\n            // eslint-disable-next-line\n            var textMarkupAnnotation = this.getTextMarkupAnnotations(pageIndex, annotation);\n            if (textMarkupAnnotation) {\n              this.textMarkupAnnotationModule.currentTextMarkupAnnotation = null;\n              this.textMarkupAnnotationModule.isSelectedAnnotation = true;\n              this.textMarkupAnnotationModule.showHideDropletDiv(true);\n              this.textMarkupAnnotationModule.annotationClickPosition = null;\n              this.textMarkupAnnotationModule.selectAnnotation(textMarkupAnnotation, canvas, pageIndex, null, true);\n              this.textMarkupAnnotationModule.currentTextMarkupAnnotation = textMarkupAnnotation;\n              this.textMarkupAnnotationModule.selectTextMarkupCurrentPage = pageIndex;\n              this.textMarkupAnnotationModule.enableAnnotationPropertiesTool(true);\n              this.textMarkupAnnotationModule.isSelectedAnnotation = false;\n              if (this.pdfViewer.toolbarModule && this.pdfViewer.enableAnnotationToolbar) {\n                this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden = true;\n                // eslint-disable-next-line max-len\n                this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem);\n              }\n            }\n          } else if (annotation.shapeAnnotationType === 'stamp' || annotation.ShapeAnnotationType === 'stamp') {\n            this.pdfViewer.select([annotation.uniqueKey], currentSelector);\n            this.pdfViewer.annotation.onAnnotationMouseDown();\n          } else if (annotation.shapeAnnotationType === 'sticky' || annotation.ShapeAnnotationType === 'sticky') {\n            this.pdfViewer.select([annotation.annotationId], currentSelector);\n            this.pdfViewer.annotation.onAnnotationMouseDown();\n          } else {\n            this.pdfViewer.select([annotation.uniqueKey], currentSelector);\n            this.pdfViewer.annotation.onAnnotationMouseDown();\n          }\n          // eslint-disable-next-line max-len\n          var commentElement = document.getElementById(this.pdfViewer.element.id + '_commantPanel');\n          if (commentElement && commentElement.style.display === 'block') {\n            // eslint-disable-next-line\n            var accordionExpand = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + this.pdfViewer.currentPageNumber);\n            if (accordionExpand) {\n              accordionExpand.ej2_instances[0].expandItem(true);\n            }\n            // eslint-disable-next-line\n            var commentsDiv = document.getElementById(id);\n            if (commentsDiv) {\n              if (!commentsDiv.classList.contains('e-pv-comments-border')) {\n                commentsDiv.firstChild.click();\n              }\n            }\n          }\n        } else if (annotation.uniqueKey || annotation.shapeAnnotationType === \"textMarkup\" && annotation.annotationAddMode === \"Imported Annotation\") {\n          this.selectAnnotationId = id;\n          this.isAnnotationSelected = true;\n          this.annotationPageIndex = pageIndex;\n          this.selectAnnotationFromCodeBehind();\n        }\n      }\n      if (!isRender && !annotation.uniqueKey) {\n        var collections = this.updateCollectionForNonRenderedPages(annotation, id, pageIndex);\n        collections.pageIndex = pageIndex;\n        this.pdfViewer.annotation.addAction(pageIndex, null, collections, 'Delete', '', collections, collections);\n        this.undoCommentsElement.push(collections);\n        var removeDiv = document.getElementById(annotation.annotationId);\n        this.removeCommentPanelDiv(removeDiv);\n      }\n    }\n  };\n  // To update the collections for the non-rendered pages.\n  Annotation.prototype.updateCollectionForNonRenderedPages = function (annotation, id, pageIndex) {\n    var collections;\n    var annotationCollection = this.pdfViewer.annotationCollection;\n    if (annotationCollection.length) {\n      var collectionDetails = annotationCollection.filter(function (annotCollection) {\n        return annotCollection.annotationId === id;\n      });\n      collections = collectionDetails[0];\n      this.updateAnnotationCollection(collectionDetails[0]);\n    }\n    var annotationType = this.getTypeOfAnnotation(annotation);\n    var collection = this.pdfViewerBase.documentAnnotationCollections[pageIndex];\n    if (collection[annotationType].length) {\n      for (var x = 0; x < collection[annotationType].length; x++) {\n        if (collection[annotationType][x].AnnotName === annotation.annotationId) {\n          var type = collection[annotationType][x];\n          this.removedDocumentAnnotationCollection.push(type);\n          collection[annotationType].splice(x, 1);\n          break;\n        }\n      }\n    }\n    return collections;\n  };\n  // To get the annotation type to update the document Annotation collections\n  Annotation.prototype.getTypeOfAnnotation = function (annotation) {\n    var annotationType;\n    if (annotation.id && annotation.id.toLowerCase() === \"shape\") {\n      annotationType = \"shapeAnnotation\";\n    } else if (annotation.id && annotation.id.toLowerCase() === \"measure\") {\n      annotationType = \"measureShapeAnnotation\";\n    } else if (annotation.id && annotation.id.toLowerCase() === \"freetext\") {\n      annotationType = \"freeTextAnnotation\";\n    } else if (annotation.shapeAnnotationType && annotation.shapeAnnotationType.toLowerCase() === \"textmarkup\") {\n      annotationType = \"textMarkupAnnotation\";\n    } else if (annotation.shapeAnnotationType && annotation.shapeAnnotationType.toLowerCase() === \"stamp\") {\n      annotationType = \"stampAnnotations\";\n    } else if (annotation.shapeAnnotationType && annotation.shapeAnnotationType.toLowerCase() === \"ink\") {\n      annotationType = \"signatureInkAnnotation\";\n    } else if (annotation.shapeAnnotationType && annotation.shapeAnnotationType.toLowerCase() === \"sticky\") {\n      annotationType = \"stickyNotesAnnotation\";\n    }\n    return annotationType;\n  };\n  // To remove the commnet panel div\n  Annotation.prototype.removeCommentPanelDiv = function (removeDiv) {\n    if (removeDiv) {\n      if (removeDiv.parentElement.childElementCount === 1) {\n        this.stickyNotesAnnotationModule.updateAccordionContainer(removeDiv);\n      } else {\n        removeDiv.remove();\n      }\n    }\n  };\n  /**\n   * Clear the annotation selection.\n   *\n   * @returns void\n   */\n  Annotation.prototype.clearSelection = function () {\n    if (this.textMarkupAnnotationModule && this.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n      this.textMarkupAnnotationModule.clearCurrentSelectedAnnotation();\n      this.textMarkupAnnotationModule.clearCurrentAnnotationSelection(this.textMarkupAnnotationModule.selectTextMarkupCurrentPage);\n    } else {\n      if (this.pdfViewer.selectedItems && this.pdfViewer.selectedItems.annotations[0]) {\n        // eslint-disable-next-line\n        var currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n        this.pdfViewer.clearSelection(currentAnnotation.pageIndex);\n      } else {\n        this.pdfViewer.clearSelection(this.pdfViewer.currentPageNumber - 1);\n      }\n    }\n  };\n  /**\n   * @param annotation\n   * @private\n   */\n  // eslint-disable-next-line\n  Annotation.prototype.getAnnotationTop = function (annotation) {\n    if (annotation.rect && (annotation.rect.Top || annotation.rect.top)) {\n      return annotation.rect.Top || annotation.rect.top;\n    } else {\n      return annotation.bounds[0].Top || annotation.bounds[0].top;\n    }\n  };\n  /**\n    * @param annotation\n    */\n  // eslint-disable-next-line\n  Annotation.prototype.getAnnotationLeft = function (annotation) {\n    if (annotation.rect) {\n      if (annotation.rect.Left) {\n        return annotation.rect.Left;\n      } else {\n        return annotation.rect.left;\n      }\n    } else {\n      if (annotation.bounds[0].Left) {\n        return annotation.bounds[0].Left;\n      } else {\n        return annotation.bounds[0].left;\n      }\n    }\n  };\n  /**\n   * @private\n   */\n  Annotation.prototype.selectAnnotationFromCodeBehind = function () {\n    if (this.isAnnotationSelected && this.selectAnnotationId) {\n      // eslint-disable-next-line\n      var annotation = this.getAnnotationsFromAnnotationCollections(this.selectAnnotationId);\n      var id = this.selectAnnotationId;\n      var pageIndex = annotation.pageNumber;\n      var currentSelector = this.pdfViewer.annotationSelectorSettings;\n      if (annotation && this.annotationPageIndex >= 0 && this.annotationPageIndex === pageIndex) {\n        if (this.previousIndex) {\n          this.pdfViewer.clearSelection(this.previousIndex);\n        }\n        this.pdfViewer.clearSelection(pageIndex);\n        this.previousIndex = pageIndex;\n        if (annotation.shapeAnnotationType === 'textMarkup') {\n          // eslint-disable-next-line max-len\n          this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearCurrentAnnotationSelection(pageIndex, true);\n          // eslint-disable-next-line max-len\n          var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageIndex);\n          // eslint-disable-next-line\n          var textMarkupAnnotation = this.getTextMarkupAnnotations(pageIndex, annotation);\n          if (textMarkupAnnotation) {\n            this.textMarkupAnnotationModule.currentTextMarkupAnnotation = null;\n            this.textMarkupAnnotationModule.isSelectedAnnotation = true;\n            this.textMarkupAnnotationModule.showHideDropletDiv(true);\n            this.textMarkupAnnotationModule.annotationClickPosition = null;\n            this.textMarkupAnnotationModule.selectAnnotation(textMarkupAnnotation, canvas, pageIndex);\n            this.textMarkupAnnotationModule.currentTextMarkupAnnotation = textMarkupAnnotation;\n            this.textMarkupAnnotationModule.selectTextMarkupCurrentPage = pageIndex;\n            this.textMarkupAnnotationModule.enableAnnotationPropertiesTool(true);\n            this.textMarkupAnnotationModule.isSelectedAnnotation = false;\n            if (this.pdfViewer.toolbarModule && this.pdfViewer.enableAnnotationToolbar) {\n              this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden = true;\n              // eslint-disable-next-line max-len\n              this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem);\n            }\n          }\n        } else if (annotation.shapeAnnotationType === 'stamp' || annotation.ShapeAnnotationType === 'stamp') {\n          this.pdfViewer.select([annotation.uniqueKey], currentSelector);\n          this.pdfViewer.annotation.onAnnotationMouseDown();\n        } else if (annotation.shapeAnnotationType === 'sticky' || annotation.ShapeAnnotationType === 'sticky') {\n          this.pdfViewer.select([annotation.annotationId], currentSelector);\n          this.pdfViewer.annotation.onAnnotationMouseDown();\n        } else if (annotation.uniqueKey) {\n          this.pdfViewer.select([annotation.uniqueKey], currentSelector);\n          this.pdfViewer.annotation.onAnnotationMouseDown();\n        } else {\n          this.pdfViewer.select([annotation.annotationId], currentSelector);\n          this.pdfViewer.annotation.onAnnotationMouseDown();\n        }\n        // eslint-disable-next-line max-len\n        var commentElement = document.getElementById(this.pdfViewer.element.id + '_commantPanel');\n        if (commentElement && commentElement.style.display === 'block') {\n          // eslint-disable-next-line\n          var accordionExpand = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + this.pdfViewer.currentPageNumber);\n          if (accordionExpand) {\n            accordionExpand.ej2_instances[0].expandItem(true);\n          }\n          // eslint-disable-next-line\n          var commentsDiv = document.getElementById(id);\n          if (commentsDiv) {\n            if (!commentsDiv.classList.contains('e-pv-comments-border')) {\n              commentsDiv.firstChild.click();\n            }\n          }\n        }\n      }\n      this.isAnnotationSelected = false;\n      this.selectAnnotationId = null;\n      this.annotationPageIndex = null;\n    }\n  };\n  /**\n   * @param pageIndex\n   * @private\n   */\n  Annotation.prototype.findRenderPageList = function (pageIndex) {\n    var isRender = false;\n    // eslint-disable-next-line\n    var pageList = this.pdfViewerBase.renderedPagesList;\n    if (pageList) {\n      for (var i = 0; i < pageList.length; i++) {\n        if (pageList[i] === pageIndex) {\n          isRender = true;\n          return isRender;\n        }\n      }\n    }\n    return isRender;\n  };\n  // eslint-disable-next-line\n  Annotation.prototype.getPageNumberFromAnnotationCollections = function (annotation) {\n    // eslint-disable-next-line\n    var collections = this.pdfViewer.annotations;\n    if (annotation) {\n      if (annotation.shapeAnnotationType === 'textMarkup') {\n        return annotation.pageNumber;\n      } else {\n        if (collections) {\n          for (var i = 0; i < collections.length; i++) {\n            if (collections[i].annotName === annotation.annotationId) {\n              return collections[i].pageIndex;\n            }\n          }\n        }\n      }\n    }\n  };\n  // eslint-disable-next-line\n  Annotation.prototype.getAnnotationsFromAnnotationCollections = function (annotationId) {\n    // eslint-disable-next-line\n    var collections = this.pdfViewer.annotationCollection;\n    if (collections && annotationId) {\n      for (var i = 0; i < collections.length; i++) {\n        if (collections[i].annotationId === annotationId) {\n          return collections[i];\n        }\n      }\n    }\n    if (this.pdfViewer.selectedItems.annotations.length === 0) this.pdfViewer.selectedItems.annotations.push(this.pdfViewer.nameTable[annotationId]);\n  };\n  // eslint-disable-next-line\n  Annotation.prototype.getTextMarkupAnnotations = function (pageIndex, annotation) {\n    // eslint-disable-next-line\n    var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');\n    if (this.pdfViewerBase.isStorageExceed) {\n      storeObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_textMarkup'];\n    }\n    if (storeObject) {\n      // eslint-disable-next-line\n      var annotObject = JSON.parse(storeObject);\n      var index = this.getPageCollection(annotObject, pageIndex);\n      if (annotObject[index]) {\n        for (var i = 0; i < annotObject[index].annotations.length; i++) {\n          if (annotObject[index].annotations[i].annotName === annotation.annotationId) {\n            return annotObject[index].annotations[i];\n          }\n        }\n        return null;\n      }\n    } else {\n      return null;\n    }\n  };\n  /**\n   * @param type\n   * @param measureType\n   * @param type\n   * @param measureType\n   * @private\n   */\n  Annotation.prototype.getAnnotationType = function (type, measureType) {\n    var annotType;\n    if (measureType === '' || isNullOrUndefined(measureType)) {\n      switch (type) {\n        case 'Line':\n          annotType = 'Line';\n          break;\n        case 'LineWidthArrowHead':\n          annotType = 'Arrow';\n          break;\n        case 'Rectangle':\n          annotType = 'Rectangle';\n          break;\n        case 'Ellipse':\n          annotType = 'Circle';\n          break;\n        case 'Polygon':\n          annotType = 'Polygon';\n          break;\n        case 'Stamp':\n          annotType = 'Stamp';\n          break;\n        case 'Image':\n          annotType = 'Image';\n          break;\n        case 'FreeText':\n          annotType = 'FreeText';\n          break;\n        case 'Ink':\n          annotType = 'Ink';\n          break;\n        case 'StickyNotes':\n          annotType = 'StickyNotes';\n          break;\n      }\n    } else {\n      switch (measureType) {\n        case 'Distance':\n          annotType = 'Distance';\n          break;\n        case 'Perimeter':\n          annotType = 'Perimeter';\n          break;\n        case 'Area':\n          annotType = 'Area';\n          break;\n        case 'Radius':\n          annotType = 'Radius';\n          break;\n        case 'Volume':\n          annotType = 'Volume';\n          break;\n      }\n    }\n    return annotType;\n  };\n  /**\n   * @param pageNumber\n   * @param annotationId\n   * @private\n   */\n  Annotation.prototype.getAnnotationIndex = function (pageNumber, annotationId) {\n    var pageAnnotationBases = this.pdfViewer.drawing.getPageObjects(pageNumber);\n    var index = null;\n    for (var i = 0; i < pageAnnotationBases.length; i++) {\n      if (pageAnnotationBases[i].id === annotationId) {\n        index = i;\n        break;\n      }\n    }\n    return index;\n  };\n  /**\n   * @private\n   */\n  Annotation.prototype.initializeCollection = function () {\n    this.actionCollection = [];\n    this.redoCollection = [];\n    if (!this.popupNote) {\n      this.createNote();\n    }\n  };\n  /**\n   * @private\n   */\n  Annotation.prototype.showCommentsPanel = function () {\n    if (this.pdfViewer.enableCommentPanel) {\n      var commentPanel = document.getElementById(this.pdfViewer.element.id + '_commantPanel');\n      if (commentPanel) {\n        if (commentPanel.style.display === 'none') {\n          commentPanel.style.display = 'block';\n          if (Browser.isDevice && !isBlazor()) {\n            // eslint:disable-next-line\n            var viewer = document.getElementById(this.pdfViewer.element.id + '_viewerMainContainer');\n            // eslint:disable-next-line\n            viewer.insertBefore(this.pdfViewerBase.navigationPane.commentPanelContainer, this.pdfViewer.toolbarModule.toolbarElement);\n          }\n          if (this.pdfViewerBase.navigationPane.commentPanelResizer) {\n            this.pdfViewerBase.navigationPane.commentPanelResizer.style.display = 'block';\n          }\n          this.pdfViewerBase.navigationPane.setCommentPanelResizeIconTop();\n          this.pdfViewer.annotation.stickyNotesAnnotationModule.updateCommentPanelTextTop();\n          var viewerContainer = document.getElementById(this.pdfViewer.element.id + '_viewerContainer');\n          var pageContainer = document.getElementById(this.pdfViewer.element.id + '_pageViewContainer');\n          if (viewerContainer) {\n            if (this.pdfViewer.enableRtl) {\n              viewerContainer.style.left = this.pdfViewerBase.navigationPane.getViewerContainerRight() + 'px';\n            } else {\n              viewerContainer.style.right = this.pdfViewerBase.navigationPane.getViewerContainerRight() + 'px';\n            }\n            // eslint-disable-next-line max-len\n            viewerContainer.style.width = this.pdfViewer.element.clientWidth - this.pdfViewerBase.navigationPane.getViewerContainerLeft() - this.pdfViewerBase.navigationPane.getViewerContainerRight() + 'px';\n            pageContainer.style.width = viewerContainer.offsetWidth - this.pdfViewerBase.navigationPane.getViewerContainerScrollbarWidth() + 'px';\n          }\n          this.pdfViewerBase.updateZoomValue();\n          if (this.pdfViewer.annotation && this.pdfViewer.annotation.textMarkupAnnotationModule) {\n            this.pdfViewer.annotation.textMarkupAnnotationModule.showHideDropletDiv(true);\n          }\n          if (Browser.isDevice && !this.pdfViewer.enableDesktopMode && !isBlazor()) {\n            commentPanel.style.height = this.pdfViewerBase.viewerMainContainer.clientHeight + 'px';\n            if (this.pdfViewer.selectedItems.annotations.length > 0) {\n              // eslint:disable-next-line\n              var commentDiv = document.getElementById(this.pdfViewer.selectedItems.annotations[0].annotName);\n              if (commentDiv && commentDiv.lastElementChild.children[1] && commentDiv.lastElementChild.children[1].ej2_instances) {\n                commentDiv.lastElementChild.children[1].ej2_instances[0].enableEditMode = true;\n              } else if (commentDiv && commentDiv.lastElementChild.ej2_instances) {\n                commentDiv.lastElementChild.ej2_instances[0].enableEditMode = true;\n                commentDiv.lastElementChild.style.display = 'block';\n                commentDiv.lastElementChild.children[1] ? commentDiv.lastElementChild.children[1].style.display = 'block' : null;\n              }\n            }\n            if (this.pdfViewer.toolbarModule.annotationToolbarModule.toolbar) {\n              this.pdfViewer.toolbarModule.annotationToolbarModule.toolbar.element.style.display = 'none';\n              if (this.pdfViewer.toolbarModule.annotationToolbarModule.propertyToolbar) {\n                this.pdfViewer.toolbarModule.annotationToolbarModule.propertyToolbar.element.style.display = 'none';\n              }\n            }\n          }\n        }\n      }\n    }\n  };\n  /**\n   * @param pageNumber\n   * @param index\n   * @param annotation\n   * @param actionString\n   * @param property\n   * @param node\n   * @param redo\n   * @param pageNumber\n   * @param index\n   * @param annotation\n   * @param actionString\n   * @param property\n   * @param node\n   * @param redo\n   * @private\n   */\n  // eslint-disable-next-line\n  Annotation.prototype.addAction = function (\n  // eslint-disable-next-line\n  pageNumber, index, annotation, actionString, property, node, redo) {\n    var action = {\n      pageIndex: pageNumber,\n      index: index,\n      annotation: annotation,\n      action: actionString,\n      modifiedProperty: property,\n      undoElement: node,\n      redoElement: redo\n    };\n    this.actionCollection.push(action);\n    this.updateToolbar();\n  };\n  /**\n   * @private\n   */\n  Annotation.prototype.undo = function () {\n    var actionObject = this.actionCollection.pop();\n    if (actionObject) {\n      // eslint-disable-next-line\n      var shapeType = actionObject.annotation.shapeAnnotationType;\n      this.isUndoRedoAction = true;\n      this.isUndoAction = true;\n      switch (actionObject.action) {\n        case 'Text Markup Added':\n        case 'Text Markup Deleted':\n          if (this.textMarkupAnnotationModule) {\n            // eslint-disable-next-line max-len\n            this.textMarkupAnnotationModule.undoTextMarkupAction(actionObject.annotation, actionObject.pageIndex, actionObject.index, actionObject.action);\n          }\n          break;\n        case 'Text Markup Property modified':\n          if (this.textMarkupAnnotationModule) {\n            // eslint-disable-next-line max-len\n            actionObject.annotation = this.textMarkupAnnotationModule.undoRedoPropertyChange(actionObject.annotation, actionObject.pageIndex, actionObject.index, actionObject.modifiedProperty, true);\n          }\n          break;\n        case 'Drag':\n        case 'Resize':\n          if (isLineShapes(actionObject.annotation)) {\n            // eslint-disable-next-line max-len\n            this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n              bounds: actionObject.undoElement.bounds,\n              vertexPoints: actionObject.undoElement.vertexPoints,\n              leaderHeight: actionObject.undoElement.leaderHeight\n            });\n          } else {\n            this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n              bounds: actionObject.undoElement.bounds\n            });\n          }\n          // eslint-disable-next-line max-len\n          if (actionObject.annotation.measureType === 'Distance' || actionObject.annotation.measureType === 'Perimeter' || actionObject.annotation.measureType === 'Area' || actionObject.annotation.measureType === 'Radius' || actionObject.annotation.measureType === 'Volume') {\n            this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n              notes: actionObject.undoElement.notes\n            });\n            this.updateCalibrateValues(actionObject.annotation);\n          }\n          if (actionObject.annotation.formFieldAnnotationType) {\n            this.pdfViewer.formDesigner.updateHTMLElement(actionObject.annotation);\n          }\n          this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID);\n          this.pdfViewer.select([actionObject.annotation.id]);\n          // eslint-disable-next-line max-len\n          if (actionObject.annotation.shapeAnnotationType === 'Line' || actionObject.annotation.shapeAnnotationType === 'Rectangle' || actionObject.annotation.shapeAnnotationType === 'Ellipse' || actionObject.annotation.shapeAnnotationType === 'Polygon' || actionObject.annotation.shapeAnnotationType === 'LineWidthArrowHead' || actionObject.annotation.shapeAnnotationType === 'Radius' || actionObject.annotation.shapeAnnotationType === 'FreeText' || actionObject.annotation.shapeAnnotationType === 'HandWrittenSignature' || actionObject.annotation.shapeAnnotationType === 'SignatureText' || actionObject.annotation.shapeAnnotationType === 'SignatureImage' || actionObject.annotation.shapeAnnotationType === 'Ink') {\n            this.modifyInCollections(actionObject.annotation, 'bounds');\n          }\n          break;\n        case 'Addition':\n          if (this.pdfViewer.formDesigner && actionObject.annotation.formFieldAnnotationType) {\n            this.pdfViewer.formDesigner.deleteFormField(actionObject.undoElement.id, false);\n          } else {\n            var isAnnotationUpdate = false;\n            // eslint-disable-next-line max-len\n            if (shapeType === 'Line' || shapeType === 'LineWidthArrowHead' || shapeType === 'Polygon' || shapeType === 'Ellipse' || shapeType === 'Rectangle' || shapeType === 'Radius' || shapeType === 'Distance') {\n              if (actionObject.annotation.measureType === '' || isNullOrUndefined(actionObject.annotation.measureType)) {\n                this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation, 'shape');\n              } else {\n                this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation, 'measure');\n              }\n              isAnnotationUpdate = true;\n              // eslint-disable-next-line\n              var annotationObject = actionObject.annotation;\n              // eslint-disable-next-line\n              var wrapper = annotationObject.wrapper ? annotationObject.wrapper : null;\n              if (wrapper && wrapper.bounds) {\n                actionObject.annotation.bounds = wrapper.bounds;\n              }\n              actionObject.duplicate = this.modifyInCollections(actionObject.annotation, 'delete');\n            }\n            if (shapeType === 'Stamp' || shapeType === 'Image') {\n              // eslint-disable-next-line max-len\n              this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation, actionObject.annotation.shapeAnnotationType, 'delete');\n              // eslint-disable-next-line max-len\n              this.stampAnnotationModule.updateSessionStorage(actionObject.annotation, null, 'delete');\n              isAnnotationUpdate = true;\n            }\n            if (shapeType === 'FreeText' || shapeType === 'HandWrittenSignature' || shapeType === 'SignatureImage' || shapeType === 'SignatureText' || shapeType === 'Ink') {\n              isAnnotationUpdate = true;\n              // eslint-disable-next-line max-len\n              this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation, actionObject.annotation.shapeAnnotationType, 'delete');\n              actionObject.duplicate = this.modifyInCollections(actionObject.annotation, 'delete');\n            }\n            if (!isAnnotationUpdate) {\n              // eslint-disable-next-line max-len\n              this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation, actionObject.annotation.shapeAnnotationType, 'delete');\n            }\n            this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID);\n            this.pdfViewer.remove(actionObject.annotation);\n            this.pdfViewer.renderDrawing(null, actionObject.annotation.pageIndex);\n            // eslint-disable-next-line\n            var removeDiv = document.getElementById(actionObject.annotation.annotName);\n            if (removeDiv) {\n              if (removeDiv.parentElement.childElementCount === 1) {\n                this.stickyNotesAnnotationModule.updateAccordionContainer(removeDiv);\n              } else {\n                removeDiv.parentElement.removeChild(removeDiv);\n              }\n            }\n            if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n              var mobileAnnotationToolbar = document.getElementById(this.pdfViewer.element.id + '_propertyToolbar');\n              if (mobileAnnotationToolbar && mobileAnnotationToolbar.children.length > 0) {\n                this.pdfViewer.toolbarModule.annotationToolbarModule.toolbarCreated = false;\n                this.pdfViewer.toolbarModule.annotationToolbarModule.createAnnotationToolbarForMobile();\n              }\n            }\n          }\n          break;\n        case 'Delete':\n          if (this.pdfViewer.formDesigner && actionObject.annotation.formFieldAnnotationType) {\n            actionObject.undoElement.bounds.x = actionObject.undoElement.wrapper.bounds.x;\n            actionObject.undoElement.bounds.y = actionObject.undoElement.wrapper.bounds.y;\n            this.pdfViewer.formDesigner.drawFormField(actionObject.undoElement);\n          } else {\n            // eslint-disable-next-line max-len\n            if (shapeType === 'Line' || shapeType === 'LineWidthArrowHead' || shapeType === 'Polygon' || shapeType === 'Ellipse' || shapeType === 'Rectangle' || shapeType === 'Radius' || shapeType === 'Distance') {\n              if (actionObject.annotation.measureType === '' || isNullOrUndefined(actionObject.annotation.measureType)) {\n                shapeType = 'shape';\n                this.shapeAnnotationModule.addInCollection(actionObject.annotation.pageIndex, actionObject.undoElement);\n              } else {\n                shapeType = 'shape_measure';\n                this.measureAnnotationModule.addInCollection(actionObject.annotation.pageIndex, actionObject.undoElement);\n              }\n            }\n            if (shapeType === 'Stamp' || shapeType === 'Image') {\n              this.stampAnnotationModule.updateDeleteItems(actionObject.annotation.pageIndex, actionObject.annotation);\n            } else if (shapeType === 'FreeText') {\n              this.freeTextAnnotationModule.addInCollection(actionObject.annotation.pageIndex, actionObject.undoElement);\n            } else if (shapeType === 'Ink') {\n              this.inkAnnotationModule.addInCollection(actionObject.annotation.pageIndex, actionObject.undoElement);\n            } else if (shapeType === 'HandWrittenSignature' || shapeType === 'SignatureText' || shapeType === 'SignatureImage') {\n              this.pdfViewerBase.signatureModule.addInCollection(actionObject.annotation.pageIndex, actionObject.undoElement);\n            }\n            if (!actionObject.annotation.annotationId) {\n              var addedAnnot = this.pdfViewer.add(actionObject.annotation);\n              if ((shapeType === 'FreeText' || addedAnnot.enableShapeLabel) && addedAnnot) {\n                this.pdfViewer.nodePropertyChange(addedAnnot, {});\n              }\n            }\n            var formFieldObj = void 0;\n            if (actionObject.annotation.id) {\n              formFieldObj = this.pdfViewer.nameTable[actionObject.annotation.id.split(\"_\")[0]];\n            }\n            if (formFieldObj != null && (formFieldObj.formFieldAnnotationType === 'SignatureField' || formFieldObj.formFieldAnnotationType === 'InitialField')) {\n              formFieldObj.wrapper.children.push(actionObject.annotation.wrapper.children[0]);\n              if (actionObject.annotation.shapeAnnotationType === \"SignatureText\") formFieldObj.wrapper.children.push(actionObject.annotation.wrapper.children[1]);\n              var key = actionObject.annotation.id.split('_')[0] + '_content';\n              var data = null;\n              if (this.pdfViewer.formDesignerModule) {\n                data = this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');\n              }\n              if (data) {\n                var formFieldsData = JSON.parse(data);\n                for (var i = 0; i < formFieldsData.length; i++) {\n                  if (formFieldsData[i].Key === key) {\n                    if (actionObject.annotation.shapeAnnotationType === \"SignatureText\") {\n                      formFieldsData[i].FormField.signatureType = \"Text\";\n                      formFieldsData[i].FormField.value = actionObject.annotation.data;\n                      this.pdfViewerBase.formFieldCollection[i].FormField.value = actionObject.annotation.data;\n                      this.pdfViewerBase.formFieldCollection[i].FormField.signatureType = \"Text\";\n                    } else if (actionObject.annotation.shapeAnnotationType === \"SignatureImage\") {\n                      formFieldsData[i].FormField.signatureType = \"Image\";\n                      formFieldsData[i].FormField.value = actionObject.annotation.data;\n                      this.pdfViewerBase.formFieldCollection[i].FormField.value = actionObject.annotation.data;\n                      this.pdfViewerBase.formFieldCollection[i].FormField.signatureType = \"Image\";\n                    } else {\n                      formFieldsData[i].FormField.signatureType = \"Path\";\n                      this.pdfViewerBase.formFieldCollection[i].FormField.signatureType = \"Path\";\n                      var collectionData = processPathData(actionObject.annotation.data);\n                      var csData = splitArrayCollection(collectionData);\n                      formFieldsData[i].FormField.value = JSON.stringify(csData);\n                      this.pdfViewerBase.formFieldCollection[i].FormField.value = JSON.stringify(csData);\n                    }\n                  }\n                }\n                this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection, '_formDesigner');\n              }\n            }\n            this.pdfViewer.renderDrawing(null, actionObject.annotation.pageIndex);\n            // eslint-disable-next-line max-len\n            this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addAnnotationComments(actionObject.annotation.pageIndex, shapeType);\n            if (actionObject.annotation.annotationId) {\n              var removedAnnotationCollection = this.removedAnnotationCollection[this.removedAnnotationCollection.length - 1];\n              var annotationType = this.getTypeOfAnnotation(removedAnnotationCollection);\n              this.pdfViewer.annotationCollection.push(removedAnnotationCollection);\n              this.removedAnnotationCollection.splice(this.removedAnnotationCollection.length - 1);\n              var pageNumber = actionObject.annotation.pageNumber >= 0 ? actionObject.annotation.pageNumber : actionObject.annotation.pageIndex;\n              this.pdfViewerBase.documentAnnotationCollections[pageNumber][annotationType].push(this.removedDocumentAnnotationCollection[this.removedDocumentAnnotationCollection.length - 1]);\n              this.removedDocumentAnnotationCollection.splice(this.removedDocumentAnnotationCollection.length - 1);\n            }\n          }\n          break;\n        case 'stampOpacity':\n          this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n            opacity: actionObject.undoElement.opacity\n          });\n          this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(actionObject.annotation, null, true);\n          actionObject.annotation.modifiedDate = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n          break;\n        case 'Shape Stroke':\n          this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n            strokeColor: actionObject.undoElement.strokeColor\n          });\n          this.modifyInCollections(actionObject.annotation, 'stroke');\n          this.pdfViewer.renderDrawing();\n          break;\n        case 'Shape Fill':\n          this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n            fillColor: actionObject.undoElement.fillColor\n          });\n          this.modifyInCollections(actionObject.annotation, 'fill');\n          this.pdfViewer.renderDrawing();\n          break;\n        case 'Shape Opacity':\n          this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n            opacity: actionObject.undoElement.opacity\n          });\n          if (actionObject.annotation.shapeAnnotationType === 'StickyNotes') {\n            this.stickyNotesAnnotationModule.updateOpacityValue(actionObject.annotation);\n            this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(actionObject.annotation, null, true);\n            actionObject.annotation.modifiedDate = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n          } else {\n            this.modifyInCollections(actionObject.annotation, 'opacity');\n          }\n          this.pdfViewer.renderDrawing();\n          break;\n        case 'Shape Thickness':\n          this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n            thickness: actionObject.undoElement.thickness\n          });\n          this.modifyInCollections(actionObject.annotation, 'thickness');\n          this.pdfViewer.renderDrawing();\n          break;\n        case 'Line properties change':\n          this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n            // eslint-disable-next-line max-len\n            fillColor: actionObject.undoElement.fillColor,\n            borderDashArray: actionObject.undoElement.borderDashArray,\n            borderStyle: actionObject.undoElement.borderStyle,\n            // eslint-disable-next-line max-len\n            strokeColor: actionObject.undoElement.strokeColor,\n            opacity: actionObject.undoElement.opacity,\n            thickness: actionObject.undoElement.thickness,\n            sourceDecoraterShapes: this.getArrowType(actionObject.undoElement.lineHeadStart),\n            taregetDecoraterShapes: this.getArrowType(actionObject.undoElement.lineHeadEnd)\n          });\n          this.updateCollectionForLineProperty(actionObject.annotation);\n          this.pdfViewer.renderDrawing();\n          break;\n        case 'Text Property Added':\n          // eslint-disable-next-line max-len\n          actionObject.annotation = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.undoAction(actionObject.annotation, actionObject.action, actionObject.undoElement);\n          this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(actionObject.annotation, null, true);\n          actionObject.annotation.modifiedDate = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n          break;\n        case 'Comments Property Added':\n          // eslint-disable-next-line max-len\n          actionObject.annotation = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.undoAction(actionObject.annotation, actionObject.action, actionObject.undoElement);\n          break;\n        case 'Status Property Added':\n          // eslint-disable-next-line max-len\n          actionObject.annotation = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.undoAction(actionObject.annotation, actionObject.action, actionObject.undoElement);\n          break;\n        case 'Comments Reply Deleted':\n          // eslint-disable-next-line max-len\n          actionObject.annotation = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.undoAction(actionObject.annotation, actionObject.action, actionObject.undoElement);\n          break;\n        case 'dynamicText Change':\n          this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange = true;\n          actionObject.annotation.dynamicText = actionObject.undoElement.dynamicText;\n          if (this.pdfViewer.selectedItems.annotations[0]) {\n            this.pdfViewer.selectedItems.annotations[0].dynamicText = actionObject.undoElement.dynamicText;\n          }\n          // eslint-disable-next-line\n          this.pdfViewer.annotationModule.stickyNotesAnnotationModule.undoAction(actionObject.annotation, actionObject.action, actionObject.undoElement);\n          this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(actionObject.annotation, null, true);\n          this.modifyInCollections(actionObject.annotation, 'dynamicText');\n          if (this.pdfViewer.selectedItems.annotations[0]) {\n            this.pdfViewer.nodePropertyChange(this.pdfViewer.selectedItems.annotations[0], {});\n          } else {\n            this.pdfViewer.nodePropertyChange(actionObject.annotation, {});\n          }\n          this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange = false;\n          this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID);\n          break;\n        case 'fontColor':\n          this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n            fontColor: actionObject.undoElement.fontColor\n          });\n          this.modifyInCollections(actionObject.annotation, 'fontColor');\n          this.pdfViewer.renderDrawing();\n          break;\n        case 'fontSize':\n          this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n            fontSize: actionObject.undoElement.fontSize\n          });\n          this.modifyInCollections(actionObject.annotation, 'fontSize');\n          this.pdfViewer.renderDrawing();\n          break;\n        case 'fontFamily':\n          this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n            fontFamily: actionObject.undoElement.fontFamily\n          });\n          this.modifyInCollections(actionObject.annotation, 'fontFamily');\n          this.pdfViewer.renderDrawing();\n          break;\n        case 'textAlign':\n          this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n            textAlign: actionObject.undoElement.textAlign\n          });\n          this.modifyInCollections(actionObject.annotation, 'textAlign');\n          this.pdfViewer.renderDrawing();\n          break;\n        case 'textPropertiesChange':\n          this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n            font: actionObject.undoElement.font\n          });\n          this.modifyInCollections(actionObject.annotation, 'textPropertiesChange');\n          this.pdfViewer.renderDrawing();\n          break;\n        case 'Rotate':\n          // eslint-disable-next-line max-len\n          this.pdfViewer.nodePropertyChange(actionObject.annotation.annotations[0], {\n            bounds: actionObject.undoElement.bounds,\n            rotateAngle: actionObject.undoElement.rotateAngle\n          });\n          this.modifyInCollections(actionObject.annotation.annotations[0], 'bounds');\n          this.pdfViewer.renderDrawing();\n          break;\n        case 'FormDesigner Properties Change':\n          if (actionObject.undoElement && actionObject.undoElement.isMultiline !== actionObject.redoElement.isMultiline) {\n            this.undoRedoMultiline(actionObject.undoElement);\n          }\n          this.updateFormFieldPropertiesChanges(actionObject.undoElement.formFieldAnnotationType, actionObject.undoElement);\n          break;\n        case 'FormField Value Change':\n          if (actionObject.annotation.formFieldAnnotationType) {\n            if (actionObject.annotation.formFieldAnnotationType == \"RadioButton\") {\n              this.updateFormFieldValueChange(actionObject.annotation.formFieldAnnotationType, actionObject.undoElement, false);\n              this.updateFormFieldValueChange(actionObject.annotation.formFieldAnnotationType, actionObject.redoElement, true);\n            } else {\n              this.updateFormFieldValueChange(actionObject.annotation.formFieldAnnotationType, actionObject.annotation, actionObject.undoElement);\n            }\n          } else {\n            var spanElement = document.getElementById(actionObject.annotation.id + \"_html_element\").children[0].children[0];\n            spanElement.className = 'e-pdfviewer-signatureformfields';\n            var formFieldObj = this.pdfViewer.nameTable[actionObject.annotation.id.split(\"_\")[0]];\n            var annotationObj = this.pdfViewer.nameTable[actionObject.annotation.id];\n            formFieldObj.wrapper.children.splice(formFieldObj.wrapper.children.indexOf(annotationObj.wrapper.children[0]), 1);\n            if (actionObject.annotation.shapeAnnotationType === \"SignatureText\") formFieldObj.wrapper.children.splice(formFieldObj.wrapper.children.indexOf(annotationObj.wrapper.children[1]), 1);\n            var key = actionObject.annotation.id.split('_')[0] + '_content';\n            var data = null;\n            if (this.pdfViewer.formDesignerModule) {\n              data = this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');\n            }\n            if (data) {\n              var formFieldsData = JSON.parse(data);\n              for (var i = 0; i < formFieldsData.length; i++) {\n                if (formFieldsData[i].Key === key) {\n                  formFieldsData[i].FormField.value = '';\n                  formFieldsData[i].FormField.signatureType = '';\n                  this.pdfViewerBase.formFieldCollection[i].FormField.value = '';\n                  this.pdfViewerBase.formFieldCollection[i].FormField.signatureType = '';\n                }\n              }\n              this.pdfViewer.remove(actionObject.annotation);\n              this.pdfViewer.renderDrawing();\n              this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection, '_formDesigner');\n            }\n          }\n      }\n      this.redoCollection.push(actionObject);\n      this.updateToolbar();\n      this.isUndoRedoAction = false;\n      this.isUndoAction = false;\n    }\n  };\n  /**\n   * @private\n   */\n  Annotation.prototype.redo = function () {\n    var actionObject = this.redoCollection.pop();\n    if (actionObject) {\n      // eslint-disable-next-line\n      var shapeType = actionObject.annotation.shapeAnnotationType;\n      this.isUndoRedoAction = true;\n      switch (actionObject.action) {\n        case 'Text Markup Property modified':\n          if (this.textMarkupAnnotationModule) {\n            // eslint-disable-next-line max-len\n            actionObject.annotation = this.textMarkupAnnotationModule.undoRedoPropertyChange(actionObject.annotation, actionObject.pageIndex, actionObject.index, actionObject.modifiedProperty);\n          }\n          break;\n        case 'Text Markup Added':\n        case 'Text Markup Deleted':\n          if (this.textMarkupAnnotationModule) {\n            // eslint-disable-next-line max-len\n            this.textMarkupAnnotationModule.redoTextMarkupAction(actionObject.annotation, actionObject.pageIndex, actionObject.index, actionObject.action);\n          }\n          break;\n        case 'Drag':\n        case 'Resize':\n          if (isLineShapes(actionObject.annotation)) {\n            this.pdfViewer.nodePropertyChange(\n            // eslint-disable-next-line max-len\n            actionObject.annotation, {\n              bounds: actionObject.redoElement.bounds,\n              vertexPoints: actionObject.redoElement.vertexPoints,\n              leaderHeight: actionObject.redoElement.leaderHeight\n            });\n          } else {\n            this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n              bounds: actionObject.redoElement.bounds\n            });\n          }\n          // eslint-disable-next-line max-len\n          if (actionObject.annotation.measureType === 'Distance' || actionObject.annotation.measureType === 'Perimeter' || actionObject.annotation.measureType === 'Area' || actionObject.annotation.measureType === 'Radius' || actionObject.annotation.measureType === 'Volume') {\n            this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n              notes: actionObject.redoElement.notes\n            });\n            this.updateCalibrateValues(actionObject.annotation);\n          }\n          if (actionObject.annotation.formFieldAnnotationType) {\n            this.pdfViewer.formDesigner.updateHTMLElement(actionObject.annotation);\n          }\n          this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID);\n          this.pdfViewer.select([actionObject.annotation.id]);\n          // eslint-disable-next-line max-len\n          if (actionObject.annotation.shapeAnnotationType === 'Line' || actionObject.annotation.shapeAnnotationType === 'Rectangle' || actionObject.annotation.shapeAnnotationType === 'Ellipse' || actionObject.annotation.shapeAnnotationType === 'Polygon' || actionObject.annotation.shapeAnnotationType === 'LineWidthArrowHead' || actionObject.annotation.shapeAnnotationType === 'Radius' || actionObject.annotation.shapeAnnotationType === 'FreeText' || actionObject.annotation.shapeAnnotationType === 'HandWrittenSignature' || actionObject.annotation.shapeAnnotationType === 'SignatureText' || actionObject.annotation.shapeAnnotationType === 'SignatureImage' || actionObject.annotation.shapeAnnotationType === 'Ink') {\n            this.modifyInCollections(actionObject.annotation, 'bounds');\n          }\n          break;\n        case 'Addition':\n          if (this.pdfViewer.formDesigner && actionObject.annotation.formFieldAnnotationType) {\n            actionObject.redoElement.bounds.x = actionObject.redoElement.wrapper.bounds.x;\n            actionObject.redoElement.bounds.y = actionObject.redoElement.wrapper.bounds.y;\n            this.pdfViewer.formDesigner.drawFormField(actionObject.redoElement);\n          } else {\n            // eslint-disable-next-line max-len\n            if (shapeType === 'Line' || shapeType === 'LineWidthArrowHead' || shapeType === 'Polygon' || shapeType === 'Ellipse' || shapeType === 'Rectangle' || shapeType === 'Radius' || shapeType === 'Distance') {\n              if (actionObject.annotation.measureType === '' || isNullOrUndefined(actionObject.annotation.measureType)) {\n                shapeType = 'shape';\n                this.shapeAnnotationModule.addInCollection(actionObject.annotation.pageIndex, actionObject.duplicate);\n              } else {\n                shapeType = 'shape_measure';\n                this.measureAnnotationModule.addInCollection(actionObject.annotation.pageIndex, actionObject.duplicate);\n              }\n            }\n            if (shapeType === 'FreeText') {\n              this.freeTextAnnotationModule.addInCollection(actionObject.annotation.pageIndex, actionObject.duplicate);\n            }\n            if (shapeType === 'Stamp' || shapeType === 'Image') {\n              this.stampAnnotationModule.updateDeleteItems(actionObject.annotation.pageIndex, actionObject.redoElement);\n            }\n            if (shapeType === 'HandWrittenSignature' || shapeType === 'SignatureText' || shapeType === 'SignatureImage') {\n              this.pdfViewerBase.signatureModule.addInCollection(actionObject.annotation.pageIndex, actionObject.duplicate);\n            }\n            if (shapeType === 'Ink') {\n              this.inkAnnotationModule.addInCollection(actionObject.annotation.pageIndex, actionObject.duplicate);\n            }\n            var addedAnnot = this.pdfViewer.add(actionObject.annotation);\n            this.pdfViewer.select([actionObject.annotation.id]);\n            if ((shapeType === 'FreeText' || addedAnnot.enableShapeLabel) && addedAnnot) {\n              this.pdfViewer.nodePropertyChange(addedAnnot, {});\n            }\n            this.pdfViewer.renderDrawing(null, actionObject.annotation.pageIndex);\n            // eslint-disable-next-line max-len\n            this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addAnnotationComments(actionObject.annotation.pageIndex, shapeType);\n            if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n              var mobileAnnotationToolbar = document.getElementById(this.pdfViewer.element.id + '_propertyToolbar');\n              if (mobileAnnotationToolbar && mobileAnnotationToolbar.children.length > 0) {\n                this.pdfViewer.toolbarModule.annotationToolbarModule.toolbarCreated = false;\n                this.pdfViewer.toolbarModule.annotationToolbarModule.createAnnotationToolbarForMobile();\n              }\n            }\n          }\n          break;\n        case 'Delete':\n          if (this.pdfViewer.formDesigner && actionObject.annotation.formFieldAnnotationType) {\n            this.pdfViewer.formDesigner.deleteFormField(actionObject.redoElement.id, false);\n          } else {\n            var isUpdate = false;\n            var sType = actionObject.annotation.shapeAnnotationType;\n            // eslint-disable-next-line max-len\n            if (shapeType === 'Line' || shapeType === 'LineWidthArrowHead' || shapeType === 'Polygon' || shapeType === 'Ellipse' || shapeType === 'Rectangle' || shapeType === 'Radius' || shapeType === 'Distance') {\n              if (actionObject.annotation.measureType === '' || isNullOrUndefined(actionObject.annotation.measureType)) {\n                sType = 'shape';\n              } else {\n                sType = 'measure';\n              }\n              // eslint-disable-next-line max-len\n              this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation, sType, 'delete');\n              this.modifyInCollections(actionObject.annotation, 'delete');\n              isUpdate = true;\n            }\n            if (shapeType === 'Stamp' || shapeType === 'Image') {\n              // eslint-disable-next-line max-len\n              this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation, sType, 'delete');\n              this.stampAnnotationModule.updateSessionStorage(actionObject.annotation, null, 'delete');\n              isUpdate = true;\n            }\n            if (shapeType === 'FreeText' || shapeType === 'HandWrittenSignature' || shapeType === 'SignatureText' || shapeType === 'SignatureImage') {\n              // eslint-disable-next-line max-len\n              this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation, sType, 'delete');\n              this.modifyInCollections(actionObject.annotation, 'delete');\n            }\n            if (!isUpdate) {\n              // eslint-disable-next-line max-len\n              this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation, sType, 'delete');\n            }\n            var formFieldObj = void 0;\n            if (actionObject.annotation.id) {\n              formFieldObj = this.pdfViewer.nameTable[actionObject.annotation.id.split(\"_\")[0]];\n            }\n            if (formFieldObj != null && (formFieldObj.formFieldAnnotationType === 'SignatureField' || formFieldObj.formFieldAnnotationType === 'InitialField')) {\n              formFieldObj.wrapper.children.splice(formFieldObj.wrapper.children.indexOf(actionObject.annotation.wrapper.children[0]), 1);\n              if (actionObject.annotation.shapeAnnotationType === \"SignatureText\") formFieldObj.wrapper.children.splice(formFieldObj.wrapper.children.indexOf(actionObject.annotation.wrapper.children[1]), 1);\n              var key = actionObject.annotation.id.split('_')[0] + '_content';\n              var data = null;\n              if (this.pdfViewer.formDesignerModule) {\n                data = this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');\n              }\n              if (data) {\n                var formFieldsData = JSON.parse(data);\n                for (var i = 0; i < formFieldsData.length; i++) {\n                  if (formFieldsData[i].Key === key) {\n                    formFieldsData[i].FormField.value = '';\n                    formFieldsData[i].FormField.signatureType = '';\n                    this.pdfViewerBase.formFieldCollection[i].FormField.value = '';\n                    this.pdfViewerBase.formFieldCollection[i].FormField.signatureType = '';\n                  }\n                }\n                this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection, '_formDesigner');\n              }\n            }\n            this.pdfViewer.clearSelection(actionObject.annotation.pageIndex);\n            this.pdfViewer.remove(actionObject.annotation);\n            this.pdfViewer.renderDrawing(null, actionObject.annotation.pageIndex);\n            // eslint-disable-next-line\n            var id = actionObject.annotation.annotName ? actionObject.annotation.annotName : actionObject.annotation.annotationId;\n            var removeDiv = document.getElementById(id);\n            this.removeCommentPanelDiv(removeDiv);\n            if (actionObject.annotation.annotationId) {\n              var collections = this.updateCollectionForNonRenderedPages(actionObject.annotation, id, actionObject.annotation.pageIndex);\n              this.undoCommentsElement.push(collections);\n            }\n          }\n          break;\n        case 'stampOpacity':\n          this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n            opacity: actionObject.redoElement.opacity\n          });\n          this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(actionObject.annotation, null, true);\n          break;\n        case 'Shape Stroke':\n          this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n            strokeColor: actionObject.redoElement.strokeColor\n          });\n          this.modifyInCollections(actionObject.annotation, 'stroke');\n          this.pdfViewer.renderDrawing();\n          break;\n        case 'Shape Fill':\n          this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n            fillColor: actionObject.redoElement.fillColor\n          });\n          this.modifyInCollections(actionObject.annotation, 'fill');\n          this.pdfViewer.renderDrawing();\n          break;\n        case 'Shape Opacity':\n          this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n            opacity: actionObject.redoElement.opacity\n          });\n          if (actionObject.annotation.shapeAnnotationType === 'StickyNotes') {\n            this.stickyNotesAnnotationModule.updateOpacityValue(actionObject.annotation);\n            this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(actionObject.annotation, null, true);\n          } else {\n            this.modifyInCollections(actionObject.annotation, 'opacity');\n          }\n          this.pdfViewer.renderDrawing();\n          break;\n        case 'Shape Thickness':\n          this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n            thickness: actionObject.redoElement.thickness\n          });\n          this.modifyInCollections(actionObject.annotation, 'thickness');\n          this.pdfViewer.renderDrawing();\n          break;\n        case 'Line properties change':\n          this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n            // eslint-disable-next-line max-len\n            fillColor: actionObject.redoElement.fillColor,\n            strokeColor: actionObject.redoElement.strokeColor,\n            opacity: actionObject.redoElement.opacity,\n            thickness: actionObject.redoElement.thickness,\n            sourceDecoraterShapes: this.getArrowType(actionObject.redoElement.lineHeadStart),\n            taregetDecoraterShapes: this.getArrowType(actionObject.redoElement.lineHeadEnd),\n            borderDashArray: actionObject.redoElement.borderDashArray,\n            borderStyle: actionObject.redoElement.borderStyle\n          });\n          this.updateCollectionForLineProperty(actionObject.annotation);\n          this.pdfViewer.renderDrawing();\n          break;\n        case 'Text Property Added':\n          // eslint-disable-next-line max-len\n          actionObject.annotation = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.redoAction(actionObject.annotation, actionObject.action, actionObject.undoElement);\n          this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(actionObject.annotation, null, true);\n          break;\n        case 'Comments Property Added':\n          // eslint-disable-next-line max-len\n          actionObject.annotation = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.redoAction(actionObject.annotation, actionObject.action, actionObject.undoElement);\n          break;\n        case 'Status Property Added':\n          // eslint-disable-next-line max-len\n          actionObject.annotation = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.redoAction(actionObject.annotation, actionObject.action);\n          break;\n        case 'Comments Reply Deleted':\n          // eslint-disable-next-line max-len\n          actionObject.annotation = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.redoAction(actionObject.annotation, actionObject.action);\n          break;\n        case 'dynamicText Change':\n          this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange = true;\n          actionObject.annotation.dynamicText = actionObject.redoElement.dynamicText;\n          // eslint-disable-next-line\n          var annotation = this.pdfViewer.selectedItems.annotations[0];\n          if (annotation) {\n            annotation.dynamicText = actionObject.redoElement.dynamicText;\n            annotation.bounds.height = actionObject.redoElement.bounds.height;\n          }\n          // eslint-disable-next-line max-len\n          this.pdfViewer.annotationModule.stickyNotesAnnotationModule.redoAction(actionObject.annotation, actionObject.action, actionObject.undoElement);\n          this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(actionObject.annotation, null, true);\n          this.modifyInCollections(actionObject.annotation, 'dynamicText');\n          if (annotation) {\n            this.pdfViewer.nodePropertyChange(annotation, {});\n          } else {\n            this.pdfViewer.nodePropertyChange(actionObject.annotation, {});\n          }\n          this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange = false;\n          this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID);\n          this.pdfViewer.select([actionObject.annotation.id]);\n          break;\n        case 'fontColor':\n          this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n            fontColor: actionObject.redoElement.fontColor\n          });\n          this.modifyInCollections(actionObject.annotation, 'fontColor');\n          this.pdfViewer.renderDrawing();\n          break;\n        case 'fontSize':\n          this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n            fontSize: actionObject.redoElement.fontSize\n          });\n          this.modifyInCollections(actionObject.annotation, 'fontSize');\n          this.pdfViewer.renderDrawing();\n          break;\n        case 'textAlign':\n          this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n            textAlign: actionObject.redoElement.textAlign\n          });\n          this.modifyInCollections(actionObject.annotation, 'textAlign');\n          this.pdfViewer.renderDrawing();\n          break;\n        case 'textPropertiesChange':\n          this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n            font: actionObject.redoElement.font\n          });\n          this.modifyInCollections(actionObject.annotation, 'textPropertiesChange');\n          this.pdfViewer.renderDrawing();\n          break;\n        case 'Rotate':\n          // eslint-disable-next-line max-len\n          this.pdfViewer.nodePropertyChange(actionObject.annotation.annotations[0], {\n            bounds: actionObject.redoElement.bounds,\n            rotateAngle: actionObject.redoElement.rotateAngle\n          });\n          this.modifyInCollections(actionObject.annotation.annotations[0], 'bounds');\n          this.pdfViewer.renderDrawing();\n          break;\n        case 'FormDesigner Properties Change':\n          if (actionObject.redoElement && actionObject.undoElement.isMultiline !== actionObject.redoElement.isMultiline) {\n            this.undoRedoMultiline(actionObject.redoElement);\n          }\n          this.updateFormFieldPropertiesChanges(actionObject.redoElement.formFieldAnnotationType, actionObject.redoElement);\n          break;\n        case 'FormField Value Change':\n          if (actionObject.annotation.formFieldAnnotationType) {\n            if (actionObject.annotation.formFieldAnnotationType == \"RadioButton\") {\n              this.updateFormFieldValueChange(actionObject.annotation.formFieldAnnotationType, actionObject.undoElement, true);\n              this.updateFormFieldValueChange(actionObject.annotation.formFieldAnnotationType, actionObject.redoElement, false);\n            } else {\n              this.updateFormFieldValueChange(actionObject.annotation.formFieldAnnotationType, actionObject.annotation, actionObject.redoElement);\n            }\n          } else {\n            var spanElement = document.getElementById(actionObject.annotation.id + \"_html_element\").children[0].children[0];\n            spanElement.className = 'e-pdfviewer-signatureformfields-signature';\n            var formFieldObj = this.pdfViewer.nameTable[actionObject.annotation.id.split(\"_\")[0]];\n            var annotationObj = this.pdfViewer.nameTable[actionObject.annotation.id];\n            formFieldObj.wrapper.children.push(annotationObj.wrapper.children[0]);\n            if (actionObject.annotation.shapeAnnotationType === \"SignatureText\") formFieldObj.wrapper.children.push(annotationObj.wrapper.children[1]);\n            var key = actionObject.annotation.id.split('_')[0] + '_content';\n            var data = null;\n            if (this.pdfViewer.formDesignerModule) {\n              data = this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');\n            }\n            if (data) {\n              var formFieldsData = JSON.parse(data);\n              for (var i = 0; i < formFieldsData.length; i++) {\n                if (formFieldsData[i].Key === key) {\n                  if (actionObject.annotation.shapeAnnotationType === \"SignatureText\") {\n                    formFieldsData[i].FormField.signatureType = \"Text\";\n                    formFieldsData[i].FormField.value = actionObject.annotation.data;\n                    this.pdfViewerBase.formFieldCollection[i].FormField.value = actionObject.annotation.data;\n                    this.pdfViewerBase.formFieldCollection[i].FormField.signatureType = \"Text\";\n                  } else if (actionObject.annotation.shapeAnnotationType === \"SignatureImage\") {\n                    formFieldsData[i].FormField.signatureType = \"Image\";\n                    formFieldsData[i].FormField.value = actionObject.annotation.data;\n                    this.pdfViewerBase.formFieldCollection[i].FormField.value = actionObject.annotation.data;\n                    this.pdfViewerBase.formFieldCollection[i].FormField.signatureType = \"Image\";\n                  } else {\n                    formFieldsData[i].FormField.signatureType = \"Path\";\n                    this.pdfViewerBase.formFieldCollection[i].FormField.signatureType = \"Path\";\n                    var collectionData = processPathData(actionObject.annotation.data);\n                    var csData = splitArrayCollection(collectionData);\n                    formFieldsData[i].FormField.value = JSON.stringify(csData);\n                    this.pdfViewerBase.formFieldCollection[i].FormField.value = JSON.stringify(csData);\n                  }\n                }\n              }\n              this.pdfViewer.add(actionObject.annotation);\n              var canvass = document.getElementById(this.pdfViewer.element.id + '_annotationCanvas_' + actionObject.pageIndex);\n              this.pdfViewer.renderDrawing(canvass, actionObject.pageIndex);\n              this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection, '_formDesigner');\n            }\n          }\n      }\n      if (actionObject.redoElement && actionObject.redoElement.modifiedDate !== undefined) {\n        actionObject.annotation.modifiedDate = actionObject.redoElement.modifiedDate;\n      }\n      this.actionCollection.push(actionObject);\n      this.updateToolbar();\n      this.isUndoRedoAction = false;\n    }\n  };\n  Annotation.prototype.undoRedoMultiline = function (element) {\n    if (element.isMultiline && element.formFieldAnnotationType === 'Textbox') {\n      this.pdfViewer.formDesignerModule.renderMultilineText(element, true);\n    } else if (element.formFieldAnnotationType === 'Textbox') {\n      this.pdfViewer.formDesignerModule.renderTextbox(element, true);\n    }\n  };\n  Annotation.prototype.updateFormFieldValueChange = function (formFieldAnnotationType, annotation, value) {\n    if (annotation) {\n      var formFieldModel = this.pdfViewer.formDesigner.getFormField(annotation.id.split(\"_\")[0]);\n      var data = null;\n      if (this.pdfViewer.formDesignerModule) {\n        data = this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');\n      }\n      if (data) {\n        var formFieldsData = JSON.parse(data);\n        var index = this.pdfViewer.formDesigner.getFormFiledIndex(annotation.id.split('_')[0]);\n        switch (formFieldAnnotationType) {\n          case 'Textbox':\n          case 'PasswordField':\n          case 'RadioButton':\n          case 'DropdownList':\n          case 'ListBox':\n            var inputElement = document.getElementById(annotation.id.split(\"_\")[0] + \"_content_html_element\").firstElementChild.firstElementChild;\n            if (formFieldAnnotationType == 'Textbox' || formFieldAnnotationType == 'PasswordField') {\n              formFieldModel.value = value;\n              this.pdfViewer.formDesigner.updateValuePropertyChange(formFieldModel, inputElement, true, index, formFieldsData);\n            } else if (formFieldAnnotationType == 'RadioButton') {\n              formFieldModel.isSelected = value;\n              this.pdfViewer.formDesigner.updateIsSelectedPropertyChange(formFieldModel, inputElement.firstElementChild, true, index, formFieldsData);\n            } else if (formFieldAnnotationType == 'DropdownList' || formFieldAnnotationType == 'ListBox') {\n              formFieldModel.selectedIndex = value;\n              formFieldsData[index].FormField.selectedIndex = value;\n              this.pdfViewerBase.formFieldCollection[index].FormField.selectedIndex = value;\n              this.pdfViewer.nameTable[formFieldsData[index].Key.split(\"_\")[0]].selectedIndex = value;\n              if (formFieldAnnotationType == 'ListBox') {\n                for (var k = 0; k < inputElement.options.length; k++) {\n                  inputElement.options[k].selected = value.includes(k) ? true : false;\n                }\n              } else {\n                inputElement.selectedIndex = value;\n              }\n            }\n            break;\n          case 'Checkbox':\n            var checkboxDivElement = document.getElementById(annotation.id.split(\"_\")[0] + \"_content_html_element\").firstElementChild.firstElementChild.lastElementChild;\n            formFieldModel.isChecked = value;\n            this.pdfViewer.formDesigner.updateIsCheckedPropertyChange(formFieldModel, checkboxDivElement, true, index, formFieldsData);\n            break;\n        }\n        this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection, '_formDesigner');\n      }\n    }\n  };\n  Annotation.prototype.updateFormFieldPropertiesChanges = function (formFieldAnnotationType, element) {\n    switch (formFieldAnnotationType) {\n      case 'Textbox':\n      case 'PasswordField':\n        this.pdfViewer.formDesigner.updateTextboxFormDesignerProperties(element, true);\n        break;\n      case 'Checkbox':\n        this.pdfViewer.formDesigner.updateCheckboxFormDesignerProperties(element, true);\n        break;\n      case 'RadioButton':\n        this.pdfViewer.formDesigner.updateRadioButtonDesignerProperties(element, true);\n        break;\n      case 'DropdownList':\n        this.pdfViewer.formDesigner.updateDropdownFormDesignerProperties(element, true);\n        break;\n      case 'ListBox':\n        this.pdfViewer.formDesigner.updateListBoxFormDesignerProperties(element, true);\n        break;\n      case 'SignatureField':\n      case 'InitialField':\n        this.pdfViewer.formDesigner.updateSignatureTextboxProperties(element, true);\n    }\n  };\n  Annotation.prototype.updateCollectionForLineProperty = function (pdfAnnotationBase) {\n    this.modifyInCollections(pdfAnnotationBase, 'fill');\n    this.modifyInCollections(pdfAnnotationBase, 'stroke');\n    this.modifyInCollections(pdfAnnotationBase, 'opacity');\n    this.modifyInCollections(pdfAnnotationBase, 'thickness');\n    this.modifyInCollections(pdfAnnotationBase, 'dashArray');\n    this.modifyInCollections(pdfAnnotationBase, 'startArrow');\n    this.modifyInCollections(pdfAnnotationBase, 'endArrow');\n  };\n  Annotation.prototype.updateToolbar = function (isAnnotationDelete) {\n    if (this.pdfViewer.toolbarModule) {\n      this.pdfViewer.toolbarModule.updateUndoRedoButtons();\n    }\n    if (this.actionCollection && this.actionCollection.length == 0) {\n      this.pdfViewerBase.updateDocumentEditedProperty(false);\n    } else {\n      this.pdfViewerBase.updateDocumentEditedProperty(true);\n    }\n    if (isAnnotationDelete) {\n      //This below lines are commented for the below task -EJ2-61754-IsDocumentEdited API is not Properly working for delete annotations\n      //Also refer EJ2-55205-The isDocumentEdited property is False on adding handwritten signature\n      // let isEdited: boolean = false;\n      // if (this.pdfViewer.annotationCollection && this.pdfViewer.annotationCollection.length > 0 && this.pdfViewer.signatureCollection && this.pdfViewer.signatureCollection.length > 0) {\n      //     isEdited = true;\n      // }\n      // if (!isEdited && this.pdfViewer.isDocumentEdited) {\n      this.pdfViewerBase.updateDocumentEditedProperty(true);\n      // }\n    }\n  };\n  Annotation.prototype.createNote = function () {\n    // eslint-disable-next-line max-len\n    this.popupNote = createElement('div', {\n      id: this.pdfViewer.element.id + '_annotation_note',\n      className: 'e-pv-annotation-note',\n      styles: 'display:none'\n    });\n    this.popupNoteAuthor = createElement('div', {\n      id: this.pdfViewer.element.id + '_annotation_note_author',\n      className: 'e-pv-annotation-note-author'\n    });\n    this.popupNote.appendChild(this.popupNoteAuthor);\n    // eslint-disable-next-line max-len\n    this.popupNoteContent = createElement('div', {\n      id: this.pdfViewer.element.id + '_annotation_note_content',\n      className: 'e-pv-annotation-note-content'\n    });\n    this.popupNote.appendChild(this.popupNoteContent);\n    if (this.pdfViewerBase.mainContainer) {\n      this.pdfViewerBase.mainContainer.appendChild(this.popupNote);\n    }\n  };\n  /**\n   * @param event\n   * @param color\n   * @param author\n   * @param note\n   * @param type\n   * @param event\n   * @param color\n   * @param author\n   * @param note\n   * @param type\n   * @private\n   */\n  // eslint-disable-next-line\n  Annotation.prototype.showPopupNote = function (event, color, author, note, type) {\n    var mainContainerPosition = this.pdfViewerBase.mainContainer.getBoundingClientRect();\n    var popupNoteClientRect = this.popupNote.getBoundingClientRect();\n    if (author) {\n      this.popupNoteAuthor.textContent = author;\n    }\n    this.popupNoteContent.textContent = note;\n    if (type === 'Highlight') {\n      this.popupNote.style.backgroundColor = 'rgb(237, 232, 177)';\n    } else if (type === 'Underline') {\n      this.popupNote.style.backgroundColor = 'rgb(187, 241, 191)';\n    } else if (type === 'Strikethrough') {\n      this.popupNote.style.backgroundColor = 'rgb(242, 188, 207)';\n    }\n    this.popupNote.style.display = 'block';\n    var topPosition = event.pageY - mainContainerPosition.top + 5;\n    var leftPosition = event.pageX - mainContainerPosition.left + 5;\n    if (leftPosition + popupNoteClientRect.width > mainContainerPosition.width) {\n      leftPosition = leftPosition - popupNoteClientRect.width;\n    }\n    if (topPosition + popupNoteClientRect.height > mainContainerPosition.height) {\n      topPosition = topPosition - popupNoteClientRect.height;\n    }\n    this.popupNote.style.top = topPosition + 'px';\n    this.popupNote.style.left = leftPosition + 'px';\n  };\n  /**\n   * @private\n   */\n  Annotation.prototype.hidePopupNote = function () {\n    if (this.popupNote) {\n      this.popupNote.style.display = 'none';\n    }\n  };\n  Annotation.prototype.createTextMarkupPopup = function () {\n    var _this = this;\n    var elementId = this.pdfViewer.element.id;\n    // eslint-disable-next-line max-len\n    this.popupElement = createElement('div', {\n      id: elementId + '_popup_annotation_note',\n      className: 'e-pv-annotation-popup-menu',\n      styles: 'display:none'\n    });\n    var headerElement = createElement('div', {\n      id: elementId + '_popup_header',\n      className: 'e-pv-annotation-popup-header'\n    });\n    // eslint-disable-next-line max-len\n    this.authorPopupElement = createElement('div', {\n      id: elementId + '_popup_author',\n      className: 'e-pv-annotation-popup-author'\n    });\n    headerElement.appendChild(this.authorPopupElement);\n    // eslint-disable-next-line max-len\n    var closeBtn = createElement('span', {\n      id: elementId + '_popup_close',\n      className: 'e-pv-annotation-popup-close e-pv-icon'\n    });\n    headerElement.appendChild(closeBtn);\n    this.popupElement.appendChild(headerElement);\n    // eslint-disable-next-line max-len\n    this.modifiedDateElement = createElement('div', {\n      id: elementId + '_popup_modified_time',\n      className: 'e-pv-annotation-modified-time'\n    });\n    this.popupElement.appendChild(this.modifiedDateElement);\n    // eslint-disable-next-line max-len\n    var contentContainer = createElement('div', {\n      id: elementId + '_popup_content_container',\n      className: 'e-pv-annotation-popup-note-container'\n    });\n    this.noteContentElement = createElement('div', {\n      id: elementId + '_popup_content',\n      className: 'e-pv-annotation-popup-content'\n    });\n    this.noteContentElement.contentEditable = 'true';\n    contentContainer.appendChild(this.noteContentElement);\n    this.popupElement.appendChild(contentContainer);\n    this.pdfViewerBase.viewerContainer.appendChild(this.popupElement);\n    closeBtn.addEventListener('click', this.saveClosePopupMenu.bind(this));\n    closeBtn.addEventListener('touchend', this.saveClosePopupMenu.bind(this));\n    this.popupElement.addEventListener('mousedown', this.onPopupElementMoveStart.bind(this));\n    this.popupElement.addEventListener('mousemove', this.onPopupElementMove.bind(this));\n    window.addEventListener('mouseup', this.onPopupElementMoveEnd.bind(this));\n    this.popupElement.addEventListener('touchstart', this.onPopupElementMoveStart.bind(this));\n    this.popupElement.addEventListener('touchmove', this.onPopupElementMove.bind(this));\n    window.addEventListener('touchend', this.onPopupElementMoveEnd.bind(this));\n    this.noteContentElement.addEventListener('mousedown', function () {\n      _this.noteContentElement.focus();\n    });\n  };\n  // eslint-disable-next-line\n  Annotation.prototype.onPopupElementMoveStart = function (event) {\n    if (event.type === 'touchstart') {\n      event = event.changedTouches[0];\n    }\n    if (event.target.id !== this.noteContentElement.id || !event.target.contains(this.noteContentElement.childNodes[0])) {\n      this.isPopupMenuMoved = true;\n      var popupElementClientRect = this.popupElement.getBoundingClientRect();\n      this.clientX = event.clientX - popupElementClientRect.left;\n      // eslint-disable-next-line max-len\n      this.clientY = event.clientY - popupElementClientRect.top + this.pdfViewerBase.pageSize[this.currentAnnotPageNumber].top * this.pdfViewerBase.getZoomFactor();\n    }\n  };\n  // eslint-disable-next-line\n  Annotation.prototype.onPopupElementMove = function (event) {\n    if (event.type === 'touchmove') {\n      event = event.changedTouches[0];\n    }\n    // eslint-disable-next-line max-len\n    if (this.isPopupMenuMoved && (event.target.id !== this.noteContentElement.id || !event.target.contains(this.noteContentElement.childNodes[0]))) {\n      var left = event.clientX - this.clientX + parseFloat(this.popupElement.style.left);\n      var top_1 = event.clientY - this.clientY + parseFloat(this.popupElement.style.top);\n      this.clientX = event.clientX;\n      this.clientY = event.clientY;\n      var clientPosition = this.popupElement.getBoundingClientRect();\n      var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + this.currentAnnotPageNumber);\n      // eslint-disable-next-line max-len\n      if (left > parseFloat(pageDiv.style.left) && left + clientPosition.width < parseFloat(pageDiv.style.left) + parseFloat(pageDiv.style.width)) {\n        this.popupElement.style.left = left + 'px';\n      } else {\n        this.popupElement.style.left = parseFloat(this.popupElement.style.left) + 'px';\n      }\n      // eslint-disable-next-line max-len\n      if (top_1 > parseFloat(pageDiv.style.top) && top_1 + clientPosition.height < parseFloat(pageDiv.style.top) + parseFloat(pageDiv.style.height)) {\n        this.popupElement.style.top = top_1 + 'px';\n      } else {\n        this.popupElement.style.top = parseFloat(this.popupElement.style.top) + 'px';\n      }\n    }\n  };\n  Annotation.prototype.onPopupElementMoveEnd = function () {\n    this.isPopupMenuMoved = false;\n  };\n  Annotation.prototype.saveClosePopupMenu = function () {\n    if (this.textMarkupAnnotationModule) {\n      this.textMarkupAnnotationModule.saveNoteContent(this.currentAnnotPageNumber, this.noteContentElement.innerText);\n    }\n    this.closePopupMenu();\n  };\n  /**\n   * @private\n   */\n  Annotation.prototype.closePopupMenu = function () {\n    if (this.popupElement) {\n      this.popupElement.parentElement.removeChild(this.popupElement);\n      this.popupElement = null;\n      this.isPopupNoteVisible = false;\n    }\n  };\n  /**\n   * @param event\n   * @private\n   */\n  // eslint-disable-next-line\n  Annotation.prototype.showAnnotationPopup = function (event) {\n    if (this.textMarkupAnnotationModule) {\n      this.currentAnnotPageNumber = this.getEventPageNumber(event);\n      // eslint-disable-next-line max-len\n      if (this.textMarkupAnnotationModule && (event.target !== this.noteContentElement || event.target.contains(this.noteContentElement.childNodes[0]))) {\n        this.hidePopupNote();\n        if (!this.popupElement) {\n          this.createTextMarkupPopup();\n          this.popupElement.style.display = 'block';\n          this.authorPopupElement.textContent = this.textMarkupAnnotationModule.currentTextMarkupAnnotation.author;\n          // eslint-disable-next-line max-len\n          this.modifiedDateElement.textContent = this.getProperDate(this.textMarkupAnnotationModule.currentTextMarkupAnnotation.modifiedDate);\n          this.noteContentElement.textContent = this.textMarkupAnnotationModule.currentTextMarkupAnnotation.note;\n          var clientPosition = this.popupElement.getBoundingClientRect();\n          // eslint-disable-next-line max-len\n          var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + this.currentAnnotPageNumber);\n          var canvasPosition = pageDiv.getBoundingClientRect();\n          var topPosition = event.clientY - canvasPosition.top + parseFloat(pageDiv.style.top);\n          var leftPosition = event.clientX;\n          if (leftPosition + clientPosition.width > parseFloat(pageDiv.style.left) + parseFloat(pageDiv.style.width)) {\n            this.popupElement.style.left = leftPosition - clientPosition.width + 'px';\n          } else {\n            this.popupElement.style.left = leftPosition + 'px';\n          }\n          if (topPosition + clientPosition.height > parseFloat(pageDiv.style.top) + parseFloat(pageDiv.style.height)) {\n            this.popupElement.style.top = topPosition - clientPosition.height + 'px';\n          } else {\n            this.popupElement.style.top = topPosition + 'px';\n          }\n          this.isPopupNoteVisible = true;\n        }\n      }\n    }\n  };\n  /**\n   * @param args\n   * @param isOpacity\n   * @param args\n   * @param isOpacity\n   * @private\n   */\n  // eslint-disable-next-line\n  Annotation.prototype.modifyOpacity = function (args, isOpacity) {\n    var currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n    var clonedObject = cloneObject(currentAnnotation);\n    var redoClonedObject = cloneObject(currentAnnotation);\n    var opacityValue = 1;\n    if (isOpacity) {\n      opacityValue = args / 100;\n    } else {\n      opacityValue = args.value / 100;\n    }\n    if (currentAnnotation.opacity !== opacityValue) {\n      redoClonedObject.opacity = opacityValue;\n      this.pdfViewer.nodePropertyChange(currentAnnotation, {\n        opacity: opacityValue\n      });\n      if (currentAnnotation.shapeAnnotationType === 'StickyNotes') {\n        this.stickyNotesAnnotationModule.updateOpacityValue(currentAnnotation);\n      } else {\n        this.modifyInCollections(currentAnnotation, 'opacity');\n      }\n      if (currentAnnotation.shapeAnnotationType === 'HandWrittenSignature' || currentAnnotation.shapeAnnotationType === 'SignatureImage' || currentAnnotation.shapeAnnotationType === 'SignatureText') {\n        // eslint-disable-next-line max-len\n        this.pdfViewer.fireSignaturePropertiesChange(currentAnnotation.pageIndex, currentAnnotation.signatureName, currentAnnotation.shapeAnnotationType, false, true, false, clonedObject.opacity, redoClonedObject.opacity);\n      } else {\n        this.triggerAnnotationPropChange(currentAnnotation, false, false, false, true);\n      }\n      // eslint-disable-next-line max-len\n      this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Shape Opacity', '', clonedObject, redoClonedObject);\n      this.pdfViewer.renderDrawing();\n    }\n  };\n  /**\n   * @param currentColor\n   * @private\n   */\n  Annotation.prototype.modifyFontColor = function (currentColor) {\n    var currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n    var clonedObject = cloneObject(currentAnnotation);\n    var redoClonedObject = cloneObject(currentAnnotation);\n    redoClonedObject.fontColor = currentColor;\n    this.pdfViewer.nodePropertyChange(currentAnnotation, {\n      fontColor: currentColor\n    });\n    this.modifyInCollections(currentAnnotation, 'fontColor');\n    this.triggerAnnotationPropChange(currentAnnotation, false, false, false, true);\n    // eslint-disable-next-line max-len\n    this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'fontColor', '', clonedObject, redoClonedObject);\n    this.pdfViewer.renderDrawing();\n  };\n  /**\n   * @param currentValue\n   * @private\n   */\n  Annotation.prototype.modifyFontFamily = function (currentValue) {\n    var currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n    var clonedObject = cloneObject(currentAnnotation);\n    var redoClonedObject = cloneObject(currentAnnotation);\n    redoClonedObject.fontFamily = currentValue;\n    if (this.pdfViewer.freeTextSettings.enableAutoFit) {\n      this.updateFontFamilyRenderSize(currentAnnotation, currentValue);\n    } else {\n      this.pdfViewer.nodePropertyChange(currentAnnotation, {\n        fontFamily: currentValue\n      });\n    }\n    this.modifyInCollections(currentAnnotation, 'fontFamily');\n    this.triggerAnnotationPropChange(currentAnnotation, false, false, false, true);\n    // eslint-disable-next-line max-len\n    this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'fontFamily', '', clonedObject, redoClonedObject);\n    this.pdfViewer.renderDrawing();\n  };\n  /**\n   * @param currentValue\n   * @private\n   */\n  Annotation.prototype.modifyFontSize = function (currentValue, isInteracted) {\n    var currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n    var clonedObject = cloneObject(currentAnnotation);\n    var redoClonedObject = cloneObject(currentAnnotation);\n    redoClonedObject.fontSize = currentValue;\n    var freeTextAnnotation = this.freeTextAnnotationModule;\n    var x = currentAnnotation.bounds.x;\n    var y = currentAnnotation.bounds.y;\n    currentAnnotation.fontSize = currentValue;\n    if (freeTextAnnotation && !freeTextAnnotation.isNewFreeTextAnnot && currentAnnotation.dynamicText !== '') {\n      freeTextAnnotation.addInuptElemet({\n        x: x,\n        y: y\n      }, currentAnnotation);\n      if (currentAnnotation) {\n        if (currentAnnotation.previousFontSize != currentValue) {\n          freeTextAnnotation.inputBoxElement.style.height = 'auto';\n          if (isInteracted) {\n            freeTextAnnotation.inputBoxElement.style.height = freeTextAnnotation.inputBoxElement.scrollHeight + 5 + 'px';\n          } else {\n            if (freeTextAnnotation.inputBoxElement.scrollHeight + 5 > currentAnnotation.bounds.height) {\n              freeTextAnnotation.inputBoxElement.style.height = freeTextAnnotation.inputBoxElement.scrollHeight + 5 + 'px';\n            } else {\n              freeTextAnnotation.inputBoxElement.style.height = currentAnnotation.bounds.height + 'px';\n            }\n          }\n        }\n        var inputEleHeight = parseFloat(freeTextAnnotation.inputBoxElement.style.height);\n        var inputEleWidth = parseFloat(freeTextAnnotation.inputBoxElement.style.width);\n        var zoomFactor = this.pdfViewerBase.getZoomFactor();\n        inputEleWidth = inputEleWidth / zoomFactor;\n        inputEleHeight = inputEleHeight / zoomFactor;\n        var heightDiff = inputEleHeight - currentAnnotation.bounds.height;\n        var y_1 = undefined;\n        if (heightDiff > 0) {\n          y_1 = currentAnnotation.wrapper.offsetY + heightDiff / 2;\n          y_1 = y_1 > 0 ? y_1 : undefined;\n        } else {\n          heightDiff = Math.abs(heightDiff);\n          y_1 = currentAnnotation.wrapper.offsetY - heightDiff / 2;\n          y_1 = y_1 > 0 ? y_1 : undefined;\n        }\n        var widthDiff = inputEleWidth - currentAnnotation.bounds.width;\n        var x_1 = undefined;\n        if (widthDiff > 0) {\n          x_1 = currentAnnotation.wrapper.offsetX + widthDiff / 2;\n          x_1 = x_1 > 0 ? x_1 : undefined;\n        } else {\n          widthDiff = Math.abs(widthDiff);\n          x_1 = currentAnnotation.wrapper.offsetX - widthDiff / 2;\n        }\n        currentAnnotation.bounds.width = inputEleWidth;\n        currentAnnotation.bounds.height = inputEleHeight;\n        // eslint-disable-next-line max-len\n        this.pdfViewer.nodePropertyChange(currentAnnotation, {\n          fontSize: currentValue,\n          bounds: {\n            width: currentAnnotation.bounds.width,\n            height: currentAnnotation.bounds.height,\n            y: y_1,\n            x: x_1\n          }\n        });\n        this.pdfViewer.renderSelector(currentAnnotation.pageIndex, this.pdfViewer.annotationSelectorSettings);\n        currentAnnotation.previousFontSize = currentValue;\n      }\n      this.modifyInCollections(currentAnnotation, 'fontSize');\n      this.modifyInCollections(currentAnnotation, 'bounds');\n      this.triggerAnnotationPropChange(currentAnnotation, false, false, false, true);\n      // eslint-disable-next-line max-len\n      this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'fontSize', '', clonedObject, redoClonedObject);\n      this.pdfViewer.renderDrawing();\n    }\n  };\n  /**\n   * @param currentValue\n   * @private\n   */\n  Annotation.prototype.modifyTextAlignment = function (currentValue) {\n    var currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n    var clonedObject = cloneObject(currentAnnotation);\n    var redoClonedObject = cloneObject(currentAnnotation);\n    redoClonedObject.textAlign = currentValue;\n    this.pdfViewer.nodePropertyChange(currentAnnotation, {\n      textAlign: currentValue\n    });\n    this.modifyInCollections(currentAnnotation, 'textAlign');\n    this.triggerAnnotationPropChange(currentAnnotation, false, false, false, true);\n    // eslint-disable-next-line max-len\n    this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'textAlign', '', clonedObject, redoClonedObject);\n    this.pdfViewer.renderDrawing();\n  };\n  /**\n   * @param fontInfo\n   * @param action\n   * @private\n   */\n  Annotation.prototype.modifyTextProperties = function (fontInfo, action) {\n    var currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n    var clonedObject = cloneObject(currentAnnotation);\n    var redoClonedObject = cloneObject(currentAnnotation);\n    if (action === 'bold') {\n      redoClonedObject.font.isBold = fontInfo.isBold;\n    } else if (action === 'italic') {\n      redoClonedObject.font.isItalic = fontInfo.isItalic;\n    } else if (action === 'underline') {\n      redoClonedObject.font.isUnderline = fontInfo.isUnderline;\n      if (redoClonedObject.font.isUnderline && redoClonedObject.font.isStrikeout) {\n        redoClonedObject.font.isStrikeout = false;\n      }\n    } else if (action === 'strikeout') {\n      redoClonedObject.font.isStrikeout = fontInfo.isStrikeout;\n      if (redoClonedObject.font.isUnderline && redoClonedObject.font.isStrikeout) {\n        redoClonedObject.font.isUnderline = false;\n      }\n    }\n    this.pdfViewer.nodePropertyChange(currentAnnotation, {\n      font: fontInfo\n    });\n    this.modifyInCollections(currentAnnotation, 'textPropertiesChange');\n    this.triggerAnnotationPropChange(currentAnnotation, false, false, false, true);\n    // eslint-disable-next-line max-len\n    this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'textPropertiesChange', '', clonedObject, redoClonedObject);\n    this.pdfViewer.renderDrawing();\n  };\n  /**\n   * @param thicknessValue\n   * @private\n   */\n  Annotation.prototype.modifyThickness = function (thicknessValue) {\n    var currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n    if (currentAnnotation.thickness !== thicknessValue) {\n      var clonedObject = cloneObject(currentAnnotation);\n      var redoClonedObject = cloneObject(currentAnnotation);\n      redoClonedObject.thickness = thicknessValue;\n      this.pdfViewer.nodePropertyChange(currentAnnotation, {\n        thickness: thicknessValue\n      });\n      this.modifyInCollections(currentAnnotation, 'thickness');\n      if (currentAnnotation.shapeAnnotationType === 'HandWrittenSignature' || currentAnnotation.shapeAnnotationType === 'SignatureText' || currentAnnotation.shapeAnnotationType === 'SignatureImage') {\n        // eslint-disable-next-line max-len\n        this.pdfViewer.fireSignaturePropertiesChange(currentAnnotation.pageIndex, currentAnnotation.signatureName, currentAnnotation.shapeAnnotationType, false, false, true, clonedObject.thickness, redoClonedObject.thickness);\n      } else {\n        this.triggerAnnotationPropChange(currentAnnotation, false, false, true, false);\n      }\n      // eslint-disable-next-line max-len\n      this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Shape Thickness', '', clonedObject, redoClonedObject);\n      this.pdfViewer.renderDrawing();\n    }\n  };\n  /**\n   * @param color\n   * @private\n   */\n  Annotation.prototype.modifyStrokeColor = function (color) {\n    var currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n    var clonedObject = cloneObject(currentAnnotation);\n    var redoClonedObject = cloneObject(currentAnnotation);\n    redoClonedObject.strokeColor = color;\n    this.pdfViewer.nodePropertyChange(currentAnnotation, {\n      strokeColor: color\n    });\n    this.modifyInCollections(currentAnnotation, 'stroke');\n    if (currentAnnotation.shapeAnnotationType === 'HandWrittenSignature' || currentAnnotation.shapeAnnotationType === 'SignatureText' || currentAnnotation.shapeAnnotationType === 'SignatureImage') {\n      // eslint-disable-next-line max-len\n      this.pdfViewer.fireSignaturePropertiesChange(currentAnnotation.pageIndex, currentAnnotation.signatureName, currentAnnotation.shapeAnnotationType, true, false, false, clonedObject.strokeColor, redoClonedObject.strokeColor);\n    } else {\n      this.triggerAnnotationPropChange(currentAnnotation, false, true, false, false);\n    }\n    // eslint-disable-next-line max-len\n    this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Shape Stroke', '', clonedObject, redoClonedObject);\n    this.pdfViewer.renderDrawing();\n  };\n  /**\n   * @param color\n   * @private\n   */\n  Annotation.prototype.modifyFillColor = function (color) {\n    var currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n    var clonedObject = cloneObject(currentAnnotation);\n    var redoClonedObject = cloneObject(currentAnnotation);\n    redoClonedObject.fillColor = color;\n    this.pdfViewer.nodePropertyChange(this.pdfViewer.selectedItems.annotations[0], {\n      fillColor: color\n    });\n    this.modifyInCollections(currentAnnotation, 'fill');\n    this.triggerAnnotationPropChange(currentAnnotation, true, false, false, false);\n    // eslint-disable-next-line max-len\n    this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Shape Fill', '', clonedObject, redoClonedObject);\n    this.pdfViewer.renderDrawing();\n  };\n  /**\n   * @param dynamicText\n   * @param annotName\n   * @private\n   */\n  Annotation.prototype.modifyDynamicTextValue = function (dynamicText, annotName) {\n    var currentAnnotation = null;\n    currentAnnotation = this.pdfViewer.annotations.filter(function (s) {\n      return s.annotName === annotName;\n    })[0];\n    if (currentAnnotation) {\n      var clonedObject = cloneObject(currentAnnotation);\n      var redoClonedObject = cloneObject(currentAnnotation);\n      currentAnnotation.dynamicText = dynamicText;\n      redoClonedObject.dynamicText = dynamicText;\n      if (clonedObject.dynamicText === '') {\n        clonedObject.dynamicText = this.freeTextAnnotationModule.previousText;\n      }\n      this.pdfViewer.nodePropertyChange(currentAnnotation, {\n        dynamicText: dynamicText\n      });\n      this.pdfViewer.renderSelector(currentAnnotation.pageIndex, currentAnnotation.annotationSelectorSettings);\n      if (clonedObject.dynamicText !== redoClonedObject.dynamicText) {\n        // eslint-disable-next-line max-len\n        this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'dynamicText Change', '', clonedObject, redoClonedObject);\n        this.modifyInCollections(currentAnnotation, 'dynamicText');\n      }\n      if (!isNullOrUndefined(this.freeTextAnnotationModule) && this.freeTextAnnotationModule.previousText !== 'Type Here' && this.freeTextAnnotationModule.previousText !== currentAnnotation.dynamicText) {\n        this.triggerAnnotationPropChange(currentAnnotation, false, false, false, false, false, false, false, true, this.freeTextAnnotationModule.previousText, currentAnnotation.dynamicText);\n      }\n      this.pdfViewer.renderDrawing();\n    }\n  };\n  // eslint-disable-next-line\n  Annotation.prototype.modifyInCollections = function (annotationBase, property) {\n    // eslint-disable-next-line\n    var returnObj;\n    if (annotationBase.measureType === '' || isNullOrUndefined(annotationBase.measureType)) {\n      if (annotationBase.shapeAnnotationType === 'FreeText') {\n        returnObj = this.freeTextAnnotationModule.modifyInCollection(property, annotationBase.pageIndex, annotationBase);\n      } else if (annotationBase.shapeAnnotationType === 'HandWrittenSignature' || annotationBase.shapeAnnotationType === 'SignatureText' || annotationBase.shapeAnnotationType === 'SignatureImage') {\n        // eslint-disable-next-line max-len\n        returnObj = this.pdfViewerBase.signatureModule.modifySignatureCollection(property, annotationBase.pageIndex, annotationBase);\n      } else if (annotationBase.shapeAnnotationType === 'Stamp') {\n        returnObj = this.stampAnnotationModule.modifyInCollection(property, annotationBase.pageIndex, annotationBase, null);\n      } else if (annotationBase.shapeAnnotationType === 'Ink') {\n        // eslint-disable-next-line max-len\n        returnObj = this.inkAnnotationModule.modifySignatureInkCollection(property, annotationBase.pageIndex, annotationBase);\n      } else {\n        returnObj = this.shapeAnnotationModule.modifyInCollection(property, annotationBase.pageIndex, annotationBase, null);\n      }\n    } else if (annotationBase.measureType === 'Distance' || annotationBase.measureType === 'Perimeter' || annotationBase.measureType === 'Radius' || annotationBase.measureType === 'Area' || annotationBase.measureType === 'Volume') {\n      returnObj = this.measureAnnotationModule.modifyInCollection(property, annotationBase.pageIndex, annotationBase);\n    }\n    if (this.isUndoRedoAction) {\n      this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(annotationBase, null, true);\n      if (this.isUndoAction) {\n        annotationBase.modifiedDate = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n      }\n    } else {\n      if (property !== 'bounds') {\n        this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(annotationBase);\n      }\n    }\n    return returnObj;\n  };\n  /**\n   * @private\n   */\n  Annotation.prototype.createPropertiesWindow = function () {\n    var _this = this;\n    if (!isBlazor()) {\n      var elementID = this.pdfViewer.element.id;\n      // eslint-disable-next-line max-len\n      var dialogDiv = createElement('div', {\n        id: elementID + '_properties_window',\n        className: 'e-pv-properties-window'\n      });\n      var appearanceTab = this.createAppearanceTab();\n      this.pdfViewerBase.pageContainer.appendChild(dialogDiv);\n      this.propertiesDialog = new Dialog({\n        showCloseIcon: true,\n        closeOnEscape: false,\n        isModal: true,\n        header: this.pdfViewer.localeObj.getConstant('Line Properties'),\n        target: this.pdfViewer.element,\n        content: appearanceTab,\n        close: function () {\n          _this.destroyPropertiesWindow();\n        }\n      });\n      if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n        this.propertiesDialog.buttons = [\n        // eslint-disable-next-line max-len\n        {\n          buttonModel: {\n            content: this.pdfViewer.localeObj.getConstant('OK'),\n            isPrimary: true\n          },\n          click: this.onOkClicked.bind(this)\n        }, {\n          buttonModel: {\n            content: this.pdfViewer.localeObj.getConstant('Cancel')\n          },\n          click: this.onCancelClicked.bind(this)\n        }];\n      } else {\n        this.propertiesDialog.buttons = [{\n          buttonModel: {\n            content: this.pdfViewer.localeObj.getConstant('Cancel')\n          },\n          click: this.onCancelClicked.bind(this)\n        },\n        // eslint-disable-next-line max-len\n        {\n          buttonModel: {\n            content: this.pdfViewer.localeObj.getConstant('OK'),\n            isPrimary: true\n          },\n          click: this.onOkClicked.bind(this)\n        }];\n      }\n      if (this.pdfViewer.enableRtl) {\n        this.propertiesDialog.enableRtl = true;\n      }\n      this.propertiesDialog.appendTo(dialogDiv);\n      if (this.pdfViewer.selectedItems.annotations[0] && this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Line') {\n        // eslint-disable-next-line\n        var fillColor = document.getElementById(this.pdfViewer.element.id + '_properties_fill_color');\n        fillColor.disabled = true;\n      }\n      // eslint-disable-next-line max-len\n      this.startArrowDropDown.content = this.createContent(this.getArrowString(this.pdfViewer.selectedItems.annotations[0].sourceDecoraterShapes)).outerHTML;\n      this.endArrowDropDown.content = this.createContent(this.getArrowString(this.pdfViewer.selectedItems.annotations[0].taregetDecoraterShapes)).outerHTML;\n      this.thicknessBox.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeWidth;\n      this.fillColorPicker.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill;\n      this.refreshColorPicker(this.fillColorPicker);\n      this.strokeColorPicker.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor;\n      this.refreshColorPicker(this.strokeColorPicker);\n      this.updateColorInIcon(this.fillDropDown.element, this.fillColorPicker.value);\n      this.updateColorInIcon(this.strokeDropDown.element, this.strokeColorPicker.value);\n      this.opacitySlider.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.opacity * 100;\n      this.updateOpacityIndicator();\n      // eslint-disable-next-line\n      if (parseInt(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray) >= 3) {\n        this.lineStyleDropDown.content = this.createDropDownContent('dashed').outerHTML;\n      } else if (this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray === '2') {\n        this.lineStyleDropDown.content = this.createDropDownContent('dotted').outerHTML;\n      } else if (this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray === '0') {\n        this.lineStyleDropDown.content = this.createDropDownContent('solid').outerHTML;\n      }\n      this.selectedLineStyle = this.pdfViewer.selectedItems.annotations[0].borderStyle;\n      this.selectedLineDashArray = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray;\n      if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Distance') {\n        this.leaderLengthBox.value = this.pdfViewer.selectedItems.annotations[0].leaderHeight;\n      }\n    } else {\n      var opacityValue = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.opacity * 100;\n      var lineStartElement = this.getArrowString(this.pdfViewer.selectedItems.annotations[0].sourceDecoraterShapes);\n      var lineEndElement = this.getArrowString(this.pdfViewer.selectedItems.annotations[0].taregetDecoraterShapes);\n      var lineStyleElement = void 0;\n      // eslint-disable-next-line\n      if (parseInt(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray) >= 3) {\n        lineStyleElement = 'Dashed';\n      } else if (this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray === '2') {\n        lineStyleElement = 'Dotted';\n      } else if (this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray === '0') {\n        lineStyleElement = 'Solid';\n      }\n      this.pdfViewer._dotnetInstance.invokeMethodAsync('OpenPropertiesDialog', opacityValue, lineStartElement, lineEndElement, lineStyleElement);\n    }\n  };\n  Annotation.prototype.updatePropertiesWindowInBlazor = function () {\n    // eslint-disable-next-line\n    var thicknessElement = document.querySelector('#' + this.pdfViewer.element.id + '_line_thickness');\n    // eslint-disable-next-line\n    var fillColorElement = document.querySelector('#' + this.pdfViewer.element.id + '_properties_fill_color_button');\n    // eslint-disable-next-line\n    var strokeColorElement = document.querySelector('#' + this.pdfViewer.element.id + '_properties_stroke_color_button');\n    // eslint-disable-next-line\n    var leaderLengthElement = document.querySelector('#' + this.pdfViewer.element.id + '_properties_leader_length');\n    thicknessElement.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeWidth;\n    fillColorElement.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill;\n    strokeColorElement.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor;\n    this.onStrokeColorChange(strokeColorElement.value);\n    this.onFillColorChange(fillColorElement.value);\n    if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Distance') {\n      // eslint-disable-next-line\n      leaderLengthElement.value = parseInt(this.pdfViewer.selectedItems.annotations[0].leaderHeight.toString());\n    }\n  };\n  Annotation.prototype.destroyPropertiesWindow = function () {\n    if (this.strokeColorPicker) {\n      this.strokeColorPicker.destroy();\n      this.strokeColorPicker = null;\n    }\n    if (this.fillColorPicker) {\n      this.fillColorPicker.destroy();\n      this.fillColorPicker = null;\n    }\n    if (this.endArrowDropDown) {\n      this.endArrowDropDown.destroy();\n      this.endArrowDropDown = null;\n    }\n    if (this.startArrowDropDown) {\n      this.startArrowDropDown.destroy();\n      this.startArrowDropDown = null;\n    }\n    if (this.opacitySlider) {\n      this.opacitySlider.destroy();\n      this.opacitySlider = null;\n    }\n    if (this.thicknessBox) {\n      this.thicknessBox.destroy();\n      this.thicknessBox = null;\n    }\n    if (this.lineStyleDropDown) {\n      this.lineStyleDropDown.destroy();\n      this.lineStyleDropDown = null;\n    }\n    if (this.leaderLengthBox) {\n      this.leaderLengthBox.destroy();\n      this.leaderLengthBox = null;\n    }\n    if (this.propertiesDialog) {\n      this.propertiesDialog.destroy();\n      this.propertiesDialog = null;\n    }\n    var dialogElement = this.pdfViewerBase.getElement('_properties_window');\n    if (dialogElement) {\n      dialogElement.parentElement.removeChild(dialogElement);\n    }\n  };\n  Annotation.prototype.refreshColorPicker = function (colorPick) {\n    colorPick.setProperties({\n      'value': colorPick.value\n    }, true);\n    colorPick.refresh();\n  };\n  Annotation.prototype.createAppearanceTab = function () {\n    var _this = this;\n    var elementID = this.pdfViewer.element.id;\n    // eslint-disable-next-line max-len\n    var items = [{\n      text: this.pdfViewer.localeObj.getConstant('None')\n    }, {\n      text: this.pdfViewer.localeObj.getConstant('Open Arrow')\n    }, {\n      text: this.pdfViewer.localeObj.getConstant('Closed Arrow')\n    }, {\n      text: this.pdfViewer.localeObj.getConstant('Round Arrow')\n    }, {\n      text: this.pdfViewer.localeObj.getConstant('Square Arrow')\n    }, {\n      text: this.pdfViewer.localeObj.getConstant('Diamond Arrow')\n    }];\n    // eslint-disable-next-line max-len\n    var appearanceDiv = createElement('div', {\n      id: elementID + '_properties_appearance'\n    });\n    var lineStyleContainer = createElement('div', {\n      className: 'e-pv-properties-line-style-prop'\n    });\n    appearanceDiv.appendChild(lineStyleContainer);\n    // eslint-disable-next-line max-len\n    var lineHeadStartElement = this.createInputElement(this.pdfViewer.localeObj.getConstant('Start Arrow'), lineStyleContainer, 'text', 'button', true, 'e-pv-properties-line-start', elementID + '_properties_line_start');\n    // eslint-disable-next-line max-len\n    this.startArrowDropDown = new DropDownButton({\n      items: items,\n      cssClass: 'e-pv-properties-line-start',\n      select: this.onStartArrowHeadStyleSelect.bind(this)\n    }, lineHeadStartElement);\n    var lineHeadEndElement = this.createInputElement(this.pdfViewer.localeObj.getConstant('End Arrow'), lineStyleContainer, 'text', 'button', true, 'e-pv-properties-line-end', elementID + '_properties_line_end');\n    // eslint-disable-next-line max-len\n    var borderStyleContainer = createElement('div', {\n      className: 'e-pv-properties-border-style'\n    });\n    appearanceDiv.appendChild(borderStyleContainer);\n    // eslint-disable-next-line max-len\n    this.endArrowDropDown = new DropDownButton({\n      items: items,\n      cssClass: 'e-pv-properties-line-end',\n      select: this.onEndArrowHeadStyleSelect.bind(this)\n    }, lineHeadEndElement);\n    var lineStyleElement = this.createInputElement(this.pdfViewer.localeObj.getConstant('Line Style'), borderStyleContainer, 'text', 'button', true, 'e-pv-properties-line-style', elementID + '_properties_line_style');\n    var dropDownTarget = this.createStyleList();\n    // eslint-disable-next-line max-len\n    this.lineStyleDropDown = new DropDownButton({\n      cssClass: 'e-pv-properties-line-style',\n      target: dropDownTarget\n    }, lineStyleElement);\n    // eslint-disable-next-line max-len\n    var thicknessElement = this.createInputElement(this.pdfViewer.localeObj.getConstant('Line Thickness'), borderStyleContainer, 'text', 'input', true, 'e-pv-properties-line-thickness', elementID + '_properties_thickness');\n    this.thicknessBox = new NumericTextBox({\n      value: 0,\n      format: '## pt',\n      cssClass: 'e-pv-properties-line-thickness',\n      min: 0,\n      max: 12\n    }, thicknessElement);\n    var colorStyleContainer = createElement('div', {\n      className: 'e-pv-properties-color-style'\n    });\n    appearanceDiv.appendChild(colorStyleContainer);\n    // eslint-disable-next-line max-len\n    var fillColorElement = this.createInputElement(this.pdfViewer.localeObj.getConstant('Fill Color'), colorStyleContainer, 'color', 'button', true, 'e-pv-properties-line-fill-color', elementID + '_properties_fill_color');\n    this.fillColorPicker = this.createColorPicker(elementID + '_properties_fill_color', true);\n    this.fillColorPicker.change = function (args) {\n      var currentColor = args.currentValue.hex === '' ? '#ffffff00' : args.currentValue.hex;\n      _this.fillDropDown.toggle();\n      _this.updateColorInIcon(_this.fillDropDown.element, currentColor);\n    };\n    // eslint-disable-next-line max-len\n    this.fillDropDown = this.createDropDownButton(fillColorElement, 'e-pv-properties-fill-color-icon', this.fillColorPicker.element.parentElement);\n    this.fillDropDown.beforeOpen = this.onFillDropDownBeforeOpen.bind(this);\n    this.fillDropDown.open = function () {\n      _this.fillColorPicker.refresh();\n    };\n    // eslint-disable-next-line max-len\n    var strokeColorElement = this.createInputElement(this.pdfViewer.localeObj.getConstant('Line Color'), colorStyleContainer, 'color', 'button', true, 'e-pv-properties-line-stroke-color', elementID + '_properties_stroke_color');\n    this.strokeColorPicker = this.createColorPicker(elementID + '_properties_stroke_color', false);\n    this.strokeColorPicker.change = function (args) {\n      var currentColor = args.currentValue.hex === '' ? '#ffffff00' : args.currentValue.hex;\n      _this.strokeDropDown.toggle();\n      _this.updateColorInIcon(_this.strokeDropDown.element, currentColor);\n    };\n    // eslint-disable-next-line max-len\n    this.strokeDropDown = this.createDropDownButton(strokeColorElement, 'e-pv-properties-stroke-color-icon', this.strokeColorPicker.element.parentElement);\n    this.strokeDropDown.beforeOpen = this.onStrokeDropDownBeforeOpen.bind(this);\n    this.strokeDropDown.open = function () {\n      _this.strokeColorPicker.refresh();\n    };\n    var opacityContainer = createElement('div', {\n      className: 'e-pv-properties-opacity-style'\n    });\n    appearanceDiv.appendChild(opacityContainer);\n    // eslint-disable-next-line max-len\n    var opacityElement = this.createInputElement(this.pdfViewer.localeObj.getConstant('Opacity'), opacityContainer, '', 'div', true, 'e-pv-properties-line-opacity', elementID + '_properties_opacity');\n    this.opacitySlider = new Slider({\n      type: 'MinRange',\n      max: 100,\n      min: 0,\n      cssClass: 'e-pv-properties-line-opacity',\n      change: function () {\n        _this.updateOpacityIndicator();\n      }\n    }, opacityElement);\n    if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Distance') {\n      // eslint-disable-next-line max-len\n      var lineLengthElement = this.createInputElement(this.pdfViewer.localeObj.getConstant('Leader Length'), opacityContainer, 'text', 'input', true, 'e-pv-properties-line-leader-length', elementID + '_properties_leader_length');\n      this.leaderLengthBox = new NumericTextBox({\n        value: 0,\n        format: '## pt',\n        cssClass: 'e-pv-properties-line-leader-length',\n        min: 0,\n        max: 100\n      }, lineLengthElement);\n    }\n    return appearanceDiv;\n  };\n  Annotation.prototype.createContent = function (text) {\n    var divElement = createElement('div', {\n      className: 'e-pv-properties-line-style-content'\n    });\n    divElement.textContent = text;\n    return divElement;\n  };\n  Annotation.prototype.onStrokeDropDownBeforeOpen = function () {\n    if (this.pdfViewer.selectedItems.annotations.length === 1) {\n      this.strokeColorPicker.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor;\n    }\n    this.strokeColorPicker.refresh();\n  };\n  Annotation.prototype.onFillDropDownBeforeOpen = function () {\n    if (this.pdfViewer.selectedItems.annotations.length === 1) {\n      this.fillColorPicker.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor;\n    }\n    this.fillColorPicker.refresh();\n  };\n  Annotation.prototype.createStyleList = function () {\n    var _this = this;\n    var ulElement = createElement('ul');\n    document.body.appendChild(ulElement);\n    var solidLi = this.createListForStyle('solid');\n    solidLi.addEventListener('click', function () {\n      _this.setThickness('0', 'solid');\n    });\n    ulElement.appendChild(solidLi);\n    var dottedLi = this.createListForStyle('dotted');\n    dottedLi.addEventListener('click', function () {\n      _this.setThickness('2', 'dotted');\n    });\n    ulElement.appendChild(dottedLi);\n    var dashedLi = this.createListForStyle('dashed');\n    dashedLi.addEventListener('click', function () {\n      _this.setThickness('3', 'dashed');\n    });\n    ulElement.appendChild(dashedLi);\n    return ulElement;\n  };\n  Annotation.prototype.createColorPicker = function (idString, isNoColor) {\n    var inputElement = createElement('input', {\n      id: idString + '_target'\n    });\n    document.body.appendChild(inputElement);\n    var colorPicker = new ColorPicker({\n      inline: true,\n      mode: 'Palette',\n      enableOpacity: false,\n      value: '#000000',\n      showButtons: false,\n      modeSwitcher: false,\n      noColor: isNoColor\n    });\n    if (this.pdfViewer.enableRtl) {\n      colorPicker.enableRtl = true;\n    }\n    colorPicker.appendTo(inputElement);\n    return colorPicker;\n  };\n  Annotation.prototype.createDropDownButton = function (element, iconClass, target) {\n    // eslint-disable-next-line max-len\n    var dropDownButton = new DropDownButton({\n      iconCss: iconClass + ' e-pv-icon',\n      target: target\n    });\n    if (this.pdfViewer.enableRtl) {\n      dropDownButton.enableRtl = true;\n    }\n    dropDownButton.appendTo(element);\n    return dropDownButton;\n  };\n  Annotation.prototype.updateColorInIcon = function (element, color) {\n    element.childNodes[0].style.borderBottomColor = color;\n  };\n  /**\n   * @param color\n   * @private\n   */\n  Annotation.prototype.onFillColorChange = function (color) {\n    // eslint-disable-next-line\n    var colorElement = document.querySelector('#' + this.pdfViewer.element.id + '_properties_fill_color_button');\n    if (color !== 'transparent') {\n      colorElement.children[0].style.borderBottomColor = color;\n    }\n  };\n  /**\n   * @param color\n   * @private\n   */\n  Annotation.prototype.onStrokeColorChange = function (color) {\n    // eslint-disable-next-line\n    var colorElement = document.querySelector('#' + this.pdfViewer.element.id + '_properties_stroke_color_button');\n    if (color !== 'transparent') {\n      colorElement.children[0].style.borderBottomColor = color;\n    }\n  };\n  Annotation.prototype.setThickness = function (value, style, isBlazor) {\n    if (!isBlazor) {\n      this.lineStyleDropDown.content = this.createDropDownContent(style).outerHTML;\n    }\n    this.selectedLineDashArray = value;\n    if (value === '0') {\n      this.selectedLineStyle = 'Solid';\n    } else if (value === '2' || value === '3') {\n      this.selectedLineStyle = 'Dashed';\n    }\n  };\n  Annotation.prototype.createDropDownContent = function (style) {\n    var divElement = createElement('div', {\n      className: 'e-pv-line-styles-content-container'\n    });\n    // eslint-disable-next-line max-len\n    var spanElement = createElement('span', {\n      className: 'e-pv-line-styles-content',\n      styles: 'border-bottom-style:' + style\n    });\n    divElement.appendChild(spanElement);\n    return divElement;\n  };\n  Annotation.prototype.createListForStyle = function (style) {\n    var liElement = createElement('li', {\n      className: 'e-menu-item'\n    });\n    var divElement = createElement('div', {\n      className: 'e-pv-line-styles-container'\n    });\n    // eslint-disable-next-line max-len\n    var spanElement = createElement('span', {\n      className: 'e-pv-line-styles-item',\n      styles: 'border-bottom-style:' + style\n    });\n    divElement.appendChild(spanElement);\n    liElement.appendChild(divElement);\n    return liElement;\n  };\n  Annotation.prototype.onStartArrowHeadStyleSelect = function (args) {\n    this.startArrowDropDown.content = this.createContent(args.item.text).outerHTML;\n  };\n  Annotation.prototype.onEndArrowHeadStyleSelect = function (args) {\n    this.endArrowDropDown.content = this.createContent(args.item.text).outerHTML;\n  };\n  // eslint-disable-next-line max-len\n  Annotation.prototype.createInputElement = function (labelText, parentElement, inputType, input, isLabelNeeded, className, idString) {\n    var container = createElement('div', {\n      id: idString + '_container',\n      className: className + '-container'\n    });\n    if (isLabelNeeded) {\n      var label = createElement('div', {\n        id: idString + '_label',\n        className: className + '-label'\n      });\n      label.textContent = labelText;\n      container.appendChild(label);\n    }\n    if (this.pdfViewer.localeObj.getConstant('Opacity') === labelText) {\n      this.opacityIndicator = createElement('span', {\n        className: 'e-pv-properties-opacity-indicator'\n      });\n      container.appendChild(this.opacityIndicator);\n    }\n    var textBoxInput = createElement(input, {\n      id: idString\n    });\n    if (input === 'input') {\n      textBoxInput.type = inputType;\n    }\n    container.appendChild(textBoxInput);\n    parentElement.appendChild(container);\n    return textBoxInput;\n  };\n  Annotation.prototype.updateOpacityIndicator = function () {\n    this.opacityIndicator.textContent = this.opacitySlider.value + '%';\n  };\n  /**\n   * @private\n   */\n  Annotation.prototype.onOkClicked = function (opacityValue) {\n    var startArrow;\n    var endArrow;\n    var thickness;\n    var strokeColor;\n    var fillColor;\n    var opacity;\n    if (!isBlazor()) {\n      startArrow = this.getArrowTypeFromDropDown(this.startArrowDropDown.content);\n      endArrow = this.getArrowTypeFromDropDown(this.endArrowDropDown.content);\n      thickness = this.thicknessBox.value;\n      strokeColor = this.strokeColorPicker.getValue(this.strokeColorPicker.value, 'hex');\n      strokeColor = strokeColor === '' ? '#ffffff00' : strokeColor;\n      fillColor = this.fillColorPicker.getValue(this.fillColorPicker.value, 'hex');\n      // eslint-disable-next-line max-len\n      fillColor = fillColor === '' || fillColor === '#transp' || this.fillColorPicker.value === '#ffffff00' ? '#ffffff00' : fillColor;\n      opacity = this.opacitySlider.value / 100;\n    } else {\n      // eslint-disable-next-line\n      var lineStartElement = document.querySelector('#' + this.pdfViewer.element.id + '_properties_line_start');\n      // eslint-disable-next-line\n      var lineEndElement = document.querySelector('#' + this.pdfViewer.element.id + '_properties_line_end');\n      // eslint-disable-next-line\n      var thicknessElement = document.querySelector('#' + this.pdfViewer.element.id + '_line_thickness');\n      // eslint-disable-next-line\n      var lineStyleElement = document.querySelector('#' + this.pdfViewer.element.id + '_properties_style');\n      // eslint-disable-next-line\n      var fillColorElement = document.querySelector('#' + this.pdfViewer.element.id + '_properties_fill_color_button');\n      // eslint-disable-next-line\n      var strokeColorElement = document.querySelector('#' + this.pdfViewer.element.id + '_properties_stroke_color_button');\n      // eslint-disable-next-line\n      var opacityElement = document.querySelector('#' + this.pdfViewer.element.id + '_properties_opacity');\n      startArrow = this.getArrowTypeFromDropDown(lineStartElement.value, true);\n      endArrow = this.getArrowTypeFromDropDown(lineEndElement.value, true);\n      // eslint-disable-next-line\n      thickness = parseInt(thicknessElement.value);\n      strokeColor = this.getValue(strokeColorElement.children[0].style.borderBottomColor, 'hex');\n      strokeColor = strokeColor === '' ? '#ffffff00' : strokeColor;\n      fillColor = this.getValue(fillColorElement.children[0].style.borderBottomColor, 'hex');\n      fillColor = fillColor === '' ? '#ffffff00' : fillColor;\n      if (opacityValue) {\n        opacity = opacityValue / 100;\n      } else {\n        opacity = opacityElement.value / 100;\n      }\n      if (lineStyleElement.value) {\n        if (lineStyleElement.value === 'Solid') {\n          this.setThickness('0', 'solid', true);\n        } else if (lineStyleElement.value === 'Dotted') {\n          this.setThickness('2', 'dotted', true);\n        } else if (lineStyleElement.value === 'Dashed') {\n          this.setThickness('3', 'dashed', true);\n        }\n      }\n    }\n    var currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n    var clonedObject = cloneObject(currentAnnotation);\n    var redoClonedObject = cloneObject(currentAnnotation);\n    var newNode = {};\n    var isColorChanged = false;\n    var isStrokeColorChanged = false;\n    var isThicknessChanged = false;\n    var isOpacityChanged = false;\n    var isLineHeadStartStyleChanged = false;\n    var isLineHeadEndStyleChanged = false;\n    var isBorderDashArrayChanged = false;\n    if (startArrow !== currentAnnotation.sourceDecoraterShapes) {\n      newNode.sourceDecoraterShapes = startArrow;\n      redoClonedObject.lineHeadStart = this.getArrowString(startArrow);\n      isLineHeadStartStyleChanged = true;\n    }\n    if (endArrow !== currentAnnotation.taregetDecoraterShapes) {\n      newNode.taregetDecoraterShapes = endArrow;\n      redoClonedObject.lineHeadEnd = this.getArrowString(endArrow);\n      isLineHeadEndStyleChanged = true;\n    }\n    if (thickness !== currentAnnotation.wrapper.children[0].style.strokeWidth) {\n      newNode.thickness = thickness;\n      redoClonedObject.thickness = thickness;\n      isThicknessChanged = true;\n    }\n    if (strokeColor !== currentAnnotation.wrapper.children[0].style.strokeColor) {\n      newNode.strokeColor = strokeColor;\n      redoClonedObject.strokeColor = strokeColor;\n      isStrokeColorChanged = true;\n    }\n    if (fillColor !== currentAnnotation.wrapper.children[0].style.fill) {\n      newNode.fillColor = fillColor;\n      redoClonedObject.fillColor = fillColor;\n      isColorChanged = true;\n    }\n    if (opacity !== currentAnnotation.wrapper.children[0].style.opacity) {\n      newNode.opacity = opacity;\n      redoClonedObject.opacity = opacity;\n      isOpacityChanged = true;\n    }\n    if (this.selectedLineDashArray !== currentAnnotation.wrapper.children[0].style.strokeDashArray) {\n      newNode.borderDashArray = this.selectedLineDashArray;\n      newNode.borderStyle = this.selectedLineStyle;\n      redoClonedObject.borderDashArray = newNode.borderDashArray;\n      redoClonedObject.borderStyle = newNode.borderStyle;\n      isBorderDashArrayChanged = true;\n    }\n    if (!isBlazor()) {\n      // eslint-disable-next-line max-len\n      if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Distance' && this.leaderLengthBox.value !== this.pdfViewer.selectedItems.annotations[0].leaderHeight) {\n        newNode.leaderHeight = this.leaderLengthBox.value;\n      }\n    } else {\n      // eslint-disable-next-line\n      var leaderLengthElement = document.querySelector('#' + this.pdfViewer.element.id + '_properties_leader_length');\n      // eslint-disable-next-line\n      if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Distance' && parseInt(leaderLengthElement.value) !== this.pdfViewer.selectedItems.annotations[0].leaderHeight) {\n        // eslint-disable-next-line\n        newNode.leaderHeight = parseInt(leaderLengthElement.value);\n      }\n    }\n    this.pdfViewer.nodePropertyChange(this.pdfViewer.selectedItems.annotations[0], newNode);\n    this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill = fillColor;\n    // eslint-disable-next-line max-len\n    this.triggerAnnotationPropChange(this.pdfViewer.selectedItems.annotations[0], isColorChanged, isStrokeColorChanged, isThicknessChanged, isOpacityChanged, isLineHeadStartStyleChanged, isLineHeadEndStyleChanged, isBorderDashArrayChanged);\n    this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0], 'thickness');\n    this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0], 'stroke');\n    this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0], 'fill');\n    this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0], 'opacity');\n    this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0], 'dashArray');\n    this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0], 'startArrow');\n    this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0], 'endArrow');\n    // eslint-disable-next-line max-len\n    if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Distance') {\n      this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0], 'leaderLength');\n    }\n    // eslint-disable-next-line max-len\n    this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Line properties change', '', clonedObject, redoClonedObject);\n    this.renderAnnotations(currentAnnotation.pageIndex, null, null, null);\n    if (!isBlazor()) {\n      this.propertiesDialog.hide();\n    }\n  };\n  Annotation.prototype.onCancelClicked = function () {\n    this.propertiesDialog.hide();\n  };\n  Annotation.prototype.getArrowTypeFromDropDown = function (arrowType, isBlazor) {\n    if (!isBlazor) {\n      arrowType = arrowType.split('</div>')[0].split('\">')[1];\n    }\n    var arrow = 'None';\n    switch (arrowType) {\n      case this.pdfViewer.localeObj.getConstant('None'):\n        arrow = 'None';\n        break;\n      case this.pdfViewer.localeObj.getConstant('Open Arrow'):\n        arrow = 'OpenArrow';\n        break;\n      case this.pdfViewer.localeObj.getConstant('Closed Arrow'):\n        arrow = 'Arrow';\n        break;\n      case this.pdfViewer.localeObj.getConstant('Round Arrow'):\n        arrow = 'Circle';\n        break;\n      case this.pdfViewer.localeObj.getConstant('Square Arrow'):\n        arrow = 'Square';\n        break;\n      case this.pdfViewer.localeObj.getConstant('Diamond Arrow'):\n        arrow = 'Diamond';\n        break;\n      case this.pdfViewer.localeObj.getConstant('Butt'):\n        arrow = 'Butt';\n        break;\n    }\n    return arrow;\n  };\n  /**\n   * @param arrow\n   * @private\n   */\n  Annotation.prototype.getArrowString = function (arrow) {\n    var arrowType = this.pdfViewer.localeObj.getConstant('None');\n    switch (arrow) {\n      case 'Arrow':\n        arrowType = this.pdfViewer.localeObj.getConstant('Closed');\n        break;\n      case 'OpenArrow':\n        arrowType = this.pdfViewer.localeObj.getConstant('Open Arrow');\n        break;\n      case 'Circle':\n        arrowType = this.pdfViewer.localeObj.getConstant('Round');\n        break;\n      case 'None':\n      case 'Square':\n      case 'Diamond':\n        arrowType = this.pdfViewer.localeObj.getConstant(arrow);\n        break;\n      case 'Butt':\n        arrowType = this.pdfViewer.localeObj.getConstant('Butt');\n        break;\n    }\n    return arrowType;\n  };\n  /**\n   * @private\n   */\n  Annotation.prototype.onAnnotationMouseUp = function () {\n    if (this.pdfViewer.selectedItems.annotations.length !== 0) {\n      if (this.pdfViewer.toolbar && this.pdfViewer.toolbar.annotationToolbarModule) {\n        this.enableBasedOnType();\n        this.pdfViewer.toolbar.annotationToolbarModule.selectAnnotationDeleteItem(true);\n        if (!Browser.isDevice) {\n          this.pdfViewer.toolbar.annotationToolbarModule.updateAnnnotationPropertyItems();\n        }\n      }\n      this.pdfViewerBase.disableTextSelectionMode();\n    } else {\n      if (this.pdfViewer.textSelectionModule && !this.pdfViewerBase.isPanMode && !this.pdfViewer.designerMode) {\n        this.pdfViewer.textSelectionModule.enableTextSelectionMode();\n      }\n      // eslint-disable-next-line max-len\n      if (this.pdfViewer.toolbar && this.pdfViewer.toolbar.annotationToolbarModule && (!Browser.isDevice || this.pdfViewer.enableDesktopMode)) {\n        // eslint-disable-next-line max-len\n        var isSkip = this.pdfViewer.toolbar.annotationToolbarModule.inkAnnotationSelected;\n        if (this.pdfViewer.annotation.freeTextAnnotationModule && !this.pdfViewer.annotation.freeTextAnnotationModule.isInuptBoxInFocus && !isSkip) {\n          this.pdfViewer.toolbar.annotationToolbarModule.enableAnnotationPropertiesTools(false);\n          this.pdfViewer.toolbar.annotationToolbarModule.enableFreeTextAnnotationPropertiesTools(false);\n        }\n        this.pdfViewer.toolbar.annotationToolbarModule.updateAnnnotationPropertyItems();\n        this.pdfViewer.toolbar.annotationToolbarModule.selectAnnotationDeleteItem(false);\n      }\n    }\n  };\n  /**\n   * @param pdfAnnotationBase\n   * @param event\n   * @param pdfAnnotationBase\n   * @param event\n   * @private\n   */\n  // eslint-disable-next-line\n  Annotation.prototype.onShapesMouseup = function (pdfAnnotationBase, event) {\n    // eslint-disable-next-line max-len\n    pdfAnnotationBase = !isNullOrUndefined(this.pdfViewer.selectedItems.annotations[0]) ? this.pdfViewer.selectedItems.annotations[0] : pdfAnnotationBase;\n    var isToolMoved = false;\n    if (this.pdfViewerBase.prevPosition.x !== this.pdfViewerBase.currentPosition.x || this.pdfViewerBase.prevPosition.y !== this.pdfViewerBase.currentPosition.y) {\n      isToolMoved = true;\n    }\n    if (pdfAnnotationBase) {\n      if (this.textMarkupAnnotationModule && this.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n        this.textMarkupAnnotationModule.currentTextMarkupAnnotation = null;\n        this.textMarkupAnnotationModule.selectTextMarkupCurrentPage = null;\n      }\n      // eslint-disable-next-line max-len\n      if ((this.pdfViewerBase.tool instanceof NodeDrawingTool || this.pdfViewerBase.tool instanceof LineTool) && !this.pdfViewerBase.tool.dragging) {\n        // eslint-disable-next-line\n        var setting = {\n          opacity: pdfAnnotationBase.opacity,\n          fillColor: pdfAnnotationBase.fillColor,\n          strokeColor: pdfAnnotationBase.strokeColor,\n          thickness: pdfAnnotationBase.thickness,\n          author: pdfAnnotationBase.author,\n          subject: pdfAnnotationBase.subject,\n          modifiedDate: pdfAnnotationBase.modifiedDate\n        };\n        var index = this.getAnnotationIndex(pdfAnnotationBase.pageIndex, pdfAnnotationBase.id);\n        // eslint-disable-next-line\n        var bounds = {\n          left: pdfAnnotationBase.bounds.x,\n          top: pdfAnnotationBase.bounds.y,\n          width: pdfAnnotationBase.bounds.width,\n          height: pdfAnnotationBase.bounds.height\n        };\n        if (this.pdfViewerBase.tool instanceof LineTool) {\n          setting.lineHeadStartStyle = this.getArrowString(pdfAnnotationBase.sourceDecoraterShapes);\n          setting.lineHeadEndStyle = this.getArrowString(pdfAnnotationBase.taregetDecoraterShapes);\n          setting.borderDashArray = pdfAnnotationBase.borderDashArray;\n        }\n        if (!this.pdfViewerBase.isAnnotationAdded || pdfAnnotationBase.measureType === 'Distance') {\n          if (pdfAnnotationBase.measureType === '' || isNullOrUndefined(pdfAnnotationBase.measureType)) {\n            // eslint-disable-next-line max-len\n            this.shapeAnnotationModule.renderShapeAnnotations(pdfAnnotationBase, this.pdfViewer.annotation.getEventPageNumber(event));\n          } else if (pdfAnnotationBase.measureType === 'Distance' || pdfAnnotationBase.measureType === 'Perimeter' || pdfAnnotationBase.measureType === 'Radius') {\n            // eslint-disable-next-line max-len\n            this.measureAnnotationModule.renderMeasureShapeAnnotations(pdfAnnotationBase, this.pdfViewer.annotation.getEventPageNumber(event));\n          }\n        }\n        this.pdfViewerBase.updateDocumentEditedProperty(true);\n      } else if (this.pdfViewerBase.tool instanceof MoveTool || this.pdfViewerBase.tool instanceof ResizeTool) {\n        if (isToolMoved) {\n          this.pdfViewerBase.updateDocumentEditedProperty(true);\n        }\n        if (pdfAnnotationBase.measureType === '' || isNullOrUndefined(pdfAnnotationBase.measureType)) {\n          if (pdfAnnotationBase.shapeAnnotationType === 'FreeText') {\n            // eslint-disable-next-line max-len\n            this.pdfViewer.annotation.freeTextAnnotationModule.modifyInCollection('bounds', this.pdfViewer.annotation.getEventPageNumber(event), pdfAnnotationBase);\n          } else if (pdfAnnotationBase.shapeAnnotationType === 'HandWrittenSignature' || pdfAnnotationBase.shapeAnnotationType === 'SignatureImage' || pdfAnnotationBase.shapeAnnotationType === 'SignatureText') {\n            // eslint-disable-next-line max-len\n            this.pdfViewerBase.signatureModule.modifySignatureCollection('bounds', this.pdfViewer.annotation.getEventPageNumber(event), pdfAnnotationBase);\n          } else if (pdfAnnotationBase.shapeAnnotationType === 'Ink') {\n            // eslint-disable-next-line max-len\n            this.inkAnnotationModule.modifySignatureInkCollection('bounds', this.pdfViewer.annotation.getEventPageNumber(event), pdfAnnotationBase);\n          } else if (pdfAnnotationBase.shapeAnnotationType === 'Stamp' || pdfAnnotationBase.shapeAnnotationType === 'Image') {\n            // eslint-disable-next-line max-len\n            this.stampAnnotationModule.modifyInCollection('bounds', this.pdfViewer.annotation.getEventPageNumber(event), pdfAnnotationBase, isToolMoved);\n          } else {\n            // eslint-disable-next-line max-len\n            this.pdfViewer.annotation.shapeAnnotationModule.modifyInCollection('bounds', this.pdfViewer.annotation.getEventPageNumber(event), pdfAnnotationBase, isToolMoved);\n          }\n          // eslint-disable-next-line max-len\n        } else if (pdfAnnotationBase.measureType === 'Distance' || pdfAnnotationBase.measureType === 'Perimeter' || pdfAnnotationBase.measureType === 'Radius' || pdfAnnotationBase.measureType === 'Area' || pdfAnnotationBase.measureType === 'Volume') {\n          this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection('bounds', this.pdfViewer.annotation.getEventPageNumber(event), pdfAnnotationBase);\n        }\n        if (this.pdfViewerBase.tool instanceof ResizeTool) {\n          if (!pdfAnnotationBase.formFieldAnnotationType) {\n            this.triggerAnnotationResize(pdfAnnotationBase);\n          }\n        }\n        if (this.pdfViewerBase.tool instanceof MoveTool) {\n          if (this.pdfViewerBase.action !== 'Select') {\n            if (!pdfAnnotationBase.formFieldAnnotationType) {\n              this.triggerAnnotationMove(pdfAnnotationBase);\n            }\n          }\n        }\n      } else if (this.pdfViewerBase.tool instanceof ConnectTool) {\n        if (isToolMoved) {\n          this.pdfViewerBase.updateDocumentEditedProperty(true);\n        }\n        if (pdfAnnotationBase.measureType === '' || isNullOrUndefined(pdfAnnotationBase.measureType)) {\n          // eslint-disable-next-line max-len\n          if (pdfAnnotationBase.shapeAnnotationType === 'Line' || pdfAnnotationBase.shapeAnnotationType === 'LineWidthArrowHead' || pdfAnnotationBase.shapeAnnotationType === 'Polygon') {\n            this.pdfViewer.annotation.shapeAnnotationModule.modifyInCollection('bounds', this.pdfViewer.annotation.getEventPageNumber(event), pdfAnnotationBase, isToolMoved);\n          }\n          // eslint-disable-next-line max-len\n        } else if (pdfAnnotationBase.measureType === 'Distance' || pdfAnnotationBase.measureType === 'Perimeter' || pdfAnnotationBase.measureType === 'Area' || pdfAnnotationBase.measureType === 'Volume') {\n          if (pdfAnnotationBase.measureType === 'Distance') {\n            // eslint-disable-next-line max-len\n            this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection('leaderLength', this.pdfViewer.annotation.getEventPageNumber(event), pdfAnnotationBase);\n          }\n          // eslint-disable-next-line max-len\n          this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection('bounds', this.pdfViewer.annotation.getEventPageNumber(event), pdfAnnotationBase);\n        }\n        this.triggerAnnotationResize(pdfAnnotationBase);\n      }\n      // eslint-disable-next-line max-len\n      if (this.pdfViewerBase.navigationPane && this.pdfViewerBase.navigationPane.annotationMenuObj && this.pdfViewer.isSignatureEditable && (pdfAnnotationBase.shapeAnnotationType === 'HandWrittenSignature' || pdfAnnotationBase.shapeAnnotationType === 'SignatureText' || pdfAnnotationBase.shapeAnnotationType === 'SignatureImage')) {\n        // eslint-disable-next-line max-len\n        this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export Annotations')], true);\n        // eslint-disable-next-line max-len\n        this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export XFDF')], true);\n      }\n      if (this.pdfViewer.toolbarModule) {\n        if (this.pdfViewer.toolbarModule.annotationToolbarModule && this.pdfViewer.enableAnnotationToolbar) {\n          this.pdfViewer.toolbarModule.annotationToolbarModule.clearTextMarkupMode();\n          if (pdfAnnotationBase.measureType === '' || isNullOrUndefined(pdfAnnotationBase.measureType)) {\n            // eslint-disable-next-line max-len\n            this.pdfViewer.toolbarModule.annotationToolbarModule.clearMeasureMode();\n          } else if (pdfAnnotationBase.measureType === 'Distance' || pdfAnnotationBase.measureType === 'Perimeter' || pdfAnnotationBase.measureType === 'Area' || pdfAnnotationBase.measureType === 'Volume' || pdfAnnotationBase.measureType === 'Radius') {\n            this.pdfViewer.toolbarModule.annotationToolbarModule.clearShapeMode();\n          }\n          if (this.pdfViewer.selectedItems.annotations.length === 1 && this.pdfViewer.selectedItems.annotations[0].formFieldAnnotationType === null) {\n            this.pdfViewer.toolbarModule.annotationToolbarModule.enableAnnotationPropertiesTools(true);\n          }\n          if (!isBlazor()) {\n            if (this.pdfViewer.selectedItems.annotations.length === 1 && !this.pdfViewer.designerMode) {\n              this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(true);\n              this.pdfViewer.toolbarModule.annotationToolbarModule.setCurrentColorInPicker();\n              this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden = true;\n              // eslint-disable-next-line max-len\n              if (!this.pdfViewer.formDesignerModule && pdfAnnotationBase.properties.id != '' && pdfAnnotationBase.properties.id != null && pdfAnnotationBase.properties.id.slice(0, 4) != 'sign') {\n                var id = document.getElementById(pdfAnnotationBase.properties.id);\n                var isFieldReadOnly = id && id.disabled;\n                if (!isFieldReadOnly) {\n                  this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem);\n                } else if (this.pdfViewer.annotation && isFieldReadOnly) {\n                  this.pdfViewer.annotation.clearSelection();\n                }\n              } else {\n                this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem);\n              }\n              if (this.pdfViewer.isAnnotationToolbarVisible && this.pdfViewer.isFormDesignerToolbarVisible) {\n                var formDesignerMainDiv = document.getElementById(this.pdfViewer.element.id + \"_formdesigner_toolbar\");\n                formDesignerMainDiv.style.display = \"none\";\n                if (this.pdfViewer.toolbarModule) {\n                  this.pdfViewer.toolbarModule.formDesignerToolbarModule.isToolbarHidden = false;\n                  this.pdfViewer.toolbarModule.formDesignerToolbarModule.showFormDesignerToolbar(this.pdfViewer.toolbarModule.formDesignerItem);\n                  this.pdfViewer.toolbarModule.annotationToolbarModule.adjustViewer(true);\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  };\n  /**\n   * @param pdfAnnotationBase\n   * @param isNewlyAdded\n   * @param pdfAnnotationBase\n   * @param isNewlyAdded\n   * @private\n   */\n  Annotation.prototype.updateCalibrateValues = function (pdfAnnotationBase, isNewlyAdded) {\n    if (pdfAnnotationBase.measureType === 'Distance') {\n      pdfAnnotationBase.notes = updateDistanceLabel(pdfAnnotationBase, pdfAnnotationBase.vertexPoints, this.measureAnnotationModule);\n      if (pdfAnnotationBase.enableShapeLabel === true) {\n        pdfAnnotationBase.labelContent = pdfAnnotationBase.notes;\n      }\n      // eslint-disable-next-line max-len\n      this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection('notes', pdfAnnotationBase.pageIndex, pdfAnnotationBase, isNewlyAdded);\n      this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(pdfAnnotationBase.annotName, pdfAnnotationBase.notes);\n      this.renderAnnotations(pdfAnnotationBase.pageIndex, null, null, null, null);\n    } else if (pdfAnnotationBase.measureType === 'Radius') {\n      pdfAnnotationBase.notes = updateRadiusLabel(pdfAnnotationBase, this.measureAnnotationModule);\n      if (pdfAnnotationBase.enableShapeLabel === true) {\n        pdfAnnotationBase.labelContent = pdfAnnotationBase.notes;\n      }\n      // eslint-disable-next-line max-len\n      this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection('notes', pdfAnnotationBase.pageIndex, pdfAnnotationBase, isNewlyAdded);\n      this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(pdfAnnotationBase.annotName, pdfAnnotationBase.notes);\n      this.renderAnnotations(pdfAnnotationBase.pageIndex, null, null, null, null);\n    } else if (pdfAnnotationBase.measureType === 'Perimeter') {\n      pdfAnnotationBase.notes = updatePerimeterLabel(pdfAnnotationBase, pdfAnnotationBase.vertexPoints, this.measureAnnotationModule);\n      if (pdfAnnotationBase.enableShapeLabel === true) {\n        pdfAnnotationBase.labelContent = pdfAnnotationBase.notes;\n      }\n      // eslint-disable-next-line max-len\n      this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection('notes', pdfAnnotationBase.pageIndex, pdfAnnotationBase, isNewlyAdded);\n      this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(pdfAnnotationBase.annotName, pdfAnnotationBase.notes);\n      this.renderAnnotations(pdfAnnotationBase.pageIndex, null, null, null, null);\n    } else if (pdfAnnotationBase.measureType === 'Area') {\n      // eslint-disable-next-line max-len\n      pdfAnnotationBase.notes = this.measureAnnotationModule.calculateArea(pdfAnnotationBase.vertexPoints, pdfAnnotationBase.id, pdfAnnotationBase.pageIndex);\n      if (pdfAnnotationBase.enableShapeLabel === true) {\n        pdfAnnotationBase.labelContent = pdfAnnotationBase.notes;\n        updateCalibrateLabel(pdfAnnotationBase);\n      }\n      // eslint-disable-next-line max-len\n      this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection('notes', pdfAnnotationBase.pageIndex, pdfAnnotationBase, isNewlyAdded);\n      this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(pdfAnnotationBase.annotName, pdfAnnotationBase.notes);\n      this.renderAnnotations(pdfAnnotationBase.pageIndex, null, null, null, null);\n    } else if (pdfAnnotationBase.measureType === 'Volume') {\n      // eslint-disable-next-line max-len\n      pdfAnnotationBase.notes = this.measureAnnotationModule.calculateVolume(pdfAnnotationBase.vertexPoints, pdfAnnotationBase.id, pdfAnnotationBase.pageIndex);\n      if (pdfAnnotationBase.enableShapeLabel === true) {\n        pdfAnnotationBase.labelContent = pdfAnnotationBase.notes;\n        updateCalibrateLabel(pdfAnnotationBase);\n      }\n      // eslint-disable-next-line max-len\n      this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection('notes', pdfAnnotationBase.pageIndex, pdfAnnotationBase, isNewlyAdded);\n      this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(pdfAnnotationBase.annotName, pdfAnnotationBase.notes);\n      this.renderAnnotations(pdfAnnotationBase.pageIndex, null, null, null, null);\n    }\n  };\n  /**\n   * @private\n   */\n  Annotation.prototype.onAnnotationMouseDown = function () {\n    if (this.pdfViewer.selectedItems.annotations.length === 1 && this.pdfViewer.selectedItems.annotations[0].formFieldAnnotationType === null) {\n      if (this.pdfViewer.toolbar && this.pdfViewer.toolbar.annotationToolbarModule) {\n        if (!isBlazor() && Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n          var commentPanel = document.getElementById(this.pdfViewer.element.id + '_commantPanel');\n          if (commentPanel.style.display === 'none') {\n            if (this.pdfViewer.enableToolbar && this.pdfViewer.enableAnnotationToolbar && this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n              // eslint-disable-next-line max-len\n              this.pdfViewer.toolbarModule.annotationToolbarModule.createPropertyTools(\"\");\n            } else {\n              if (this.pdfViewer.enableToolbar && this.pdfViewer.enableAnnotationToolbar) {\n                // eslint-disable-next-line max-len\n                this.pdfViewer.toolbarModule.annotationToolbarModule.createAnnotationToolbarForMobile();\n                this.pdfViewer.toolbarModule.annotationToolbarModule.createPropertyTools(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType);\n                var editIcon = document.getElementById(this.pdfViewer.element.id + '_annotationIcon');\n                if (editIcon && !editIcon.parentElement.classList.contains('e-pv-select')) {\n                  editIcon.parentElement.classList.add('e-pv-select');\n                }\n              }\n            }\n          }\n        }\n        this.enableBasedOnType();\n        this.pdfViewer.toolbar.annotationToolbarModule.selectAnnotationDeleteItem(true);\n      }\n    }\n  };\n  Annotation.prototype.enableBasedOnType = function () {\n    var isLock = false;\n    // eslint-disable-next-line\n    var annotation = this.pdfViewer.selectedItems.annotations[0];\n    if (annotation && annotation.annotationSettings) {\n      // eslint-disable-next-line\n      isLock = annotation.annotationSettings.isLock;\n      if (isLock && this.checkAllowedInteractions('PropertyChange', annotation)) {\n        isLock = false;\n      }\n    }\n    if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n      if (!isLock) {\n        if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Stamp' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Image') {\n          this.pdfViewer.toolbar.annotationToolbarModule.enableStampAnnotationPropertiesTools(true);\n        } else if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'StickyNotes') {\n          this.pdfViewer.toolbar.annotationToolbarModule.enableStampAnnotationPropertiesTools(true);\n        } else if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Path' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureImage' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureText') {\n          this.pdfViewer.toolbar.annotationToolbarModule.enableAnnotationPropertiesTools(false);\n        } else if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'FreeText') {\n          this.pdfViewer.toolbar.annotationToolbarModule.enableFreeTextAnnotationPropertiesTools(true);\n        } else if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'HandWrittenSignature') {\n          this.pdfViewer.toolbar.annotationToolbarModule.enableSignaturePropertiesTools(true);\n        } else if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Ink') {\n          this.pdfViewer.toolbar.annotationToolbarModule.enableSignaturePropertiesTools(true);\n        } else {\n          if (this.pdfViewer.selectedItems.annotations.length === 1 && this.pdfViewer.selectedItems.annotations[0].formFieldAnnotationType === null) {\n            this.pdfViewer.toolbar.annotationToolbarModule.enableAnnotationPropertiesTools(true);\n          }\n        }\n      }\n      // eslint-disable-next-line max-len\n    } else if (!this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation && !(this.pdfViewer.selectedItems.annotations[0].propName === 'annotations') && Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n      this.pdfViewer.toolbarModule.annotationToolbarModule.createMobileAnnotationToolbar(true, true);\n    }\n  };\n  Annotation.prototype.getProperDate = function (date) {\n    var dateObject = new Date(date.toString());\n    if (isNaN(dateObject.getFullYear())) {\n      var dateString = date.slice(2, 16);\n      // eslint-disable-next-line max-len\n      dateString = dateString.slice(0, 4) + '/' + dateString.slice(4, 6) + '/' + dateString.slice(6, 8) + ' ' + dateString.slice(8, 10) + ':' + dateString.slice(10, 12) + ':' + dateString.slice(12, 14);\n      dateObject = new Date(dateString);\n    }\n    // eslint-disable-next-line max-len\n    return dateObject.getMonth() + 1 + '/' + dateObject.getDate() + '/' + dateObject.getFullYear() + ' ' + dateObject.getHours() + ':' + dateObject.getMinutes() + ':' + dateObject.getSeconds();\n  };\n  /**\n   * @param pageAnnotations\n   * @param pageNumber\n   * @private\n   */\n  Annotation.prototype.getPageCollection = function (pageAnnotations, pageNumber) {\n    var index = null;\n    for (var i = 0; i < pageAnnotations.length; i++) {\n      if (pageAnnotations[i].pageIndex === pageNumber) {\n        index = i;\n        break;\n      }\n    }\n    return index;\n  };\n  /**\n   * @param annotations\n   * @param id\n   * @param annotations\n   * @param id\n   * @private\n   */\n  // eslint-disable-next-line\n  Annotation.prototype.getAnnotationWithId = function (annotations, id) {\n    // eslint-disable-next-line\n    var annotation;\n    for (var i = 0; i < annotations.length; i++) {\n      if (id === annotations[i].id) {\n        annotation = annotations[i];\n      }\n    }\n    return annotation;\n  };\n  /**\n   * @param event\n   * @private\n   */\n  // eslint-disable-next-line\n  Annotation.prototype.getEventPageNumber = function (event) {\n    var eventTarget = event.target;\n    var eventParentElement = event.target.parentElement;\n    if (eventTarget.classList.contains('e-pv-hyperlink')) {\n      eventTarget = eventParentElement;\n    } else if (eventParentElement && eventParentElement.classList.contains('foreign-object') && eventParentElement.parentElement && eventParentElement.parentElement.parentElement && eventParentElement.parentElement.parentElement.parentElement) {\n      eventTarget = eventParentElement.parentElement.parentElement.parentElement;\n    } else if (eventTarget.classList.contains('e-pdfviewer-formFields')) {\n      eventTarget = eventParentElement;\n    }\n    var pageString;\n    if (eventTarget) {\n      // eslint-disable-next-line\n      pageString = eventTarget.id.split('_text_')[1] || eventTarget.id.split('_textLayer_')[1] || eventTarget.id.split('_annotationCanvas_')[1] || eventTarget.id.split('_pageDiv_')[1];\n    }\n    if (isNaN(pageString)) {\n      event = this.pdfViewerBase.annotationEvent;\n      if (event) {\n        eventTarget = event.target;\n        // eslint-disable-next-line\n        pageString = eventTarget.id.split('_text_')[1] || eventTarget.id.split('_textLayer_')[1] || eventTarget.id.split('_annotationCanvas_')[1] || eventTarget.id.split('_pageDiv_')[1];\n      }\n    }\n    // eslint-disable-next-line\n    return parseInt(pageString);\n  };\n  /**\n   * @param commentsAnnotations\n   * @param parentAnnotation\n   * @param author\n   * @param commentsAnnotations\n   * @param parentAnnotation\n   * @param author\n   * @param commentsAnnotations\n   * @param parentAnnotation\n   * @param author\n   * @private\n   */\n  // eslint-disable-next-line\n  Annotation.prototype.getAnnotationComments = function (commentsAnnotations, parentAnnotation, author) {\n    var newArray = [];\n    var annotationObject = null;\n    if (commentsAnnotations) {\n      if (commentsAnnotations.length > 0) {\n        for (var i = 0; i < commentsAnnotations.length; i++) {\n          // eslint-disable-next-line\n          var annotation = commentsAnnotations[i];\n          annotationObject = {\n            // eslint-disable-next-line max-len\n            shapeAnnotationType: 'sticky',\n            author: annotation.Author,\n            modifiedDate: annotation.ModifiedDate,\n            note: annotation.Note,\n            state: annotation.state,\n            stateModel: annotation.stateModel,\n            comments: [],\n            review: {\n              state: annotation.State,\n              stateModel: annotation.StateModel,\n              modifiedDate: annotation.ModifiedDate,\n              author: annotation.Author\n            },\n            annotName: annotation.AnnotName,\n            parentId: parentAnnotation.AnnotName,\n            subject: annotation.Subject,\n            isLock: annotation.IsLock\n          };\n          newArray[newArray.length] = annotationObject;\n        }\n      }\n    }\n    return newArray;\n  };\n  Annotation.prototype.getRandomNumber = function () {\n    // eslint-disable-next-line\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n      // eslint-disable-next-line\n      var random = Math.random() * 16 | 0,\n        v = c == 'x' ? random : random & 0x3 | 0x8;\n      return random.toString(16);\n    });\n  };\n  /**\n   * @private\n   */\n  Annotation.prototype.createGUID = function () {\n    // eslint-disable-next-line max-len\n    return this.getRandomNumber();\n  };\n  /**\n   * @param pageDiv\n   * @param pageWidth\n   * @param pageHeight\n   * @param pageNumber\n   * @param displayMode\n   * @param pageDiv\n   * @param pageWidth\n   * @param pageHeight\n   * @param pageNumber\n   * @param displayMode\n   * @private\n   */\n  // eslint-disable-next-line max-len\n  Annotation.prototype.createAnnotationLayer = function (pageDiv, pageWidth, pageHeight, pageNumber, displayMode) {\n    var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n    if (canvas) {\n      this.updateCanvas(canvas, pageWidth, pageHeight, pageNumber);\n      return canvas;\n    } else {\n      // eslint-disable-next-line max-len\n      var annotationCanvas = createElement('canvas', {\n        id: this.pdfViewer.element.id + '_annotationCanvas_' + pageNumber,\n        className: 'e-pv-annotation-canvas'\n      });\n      this.updateCanvas(annotationCanvas, pageWidth, pageHeight, pageNumber);\n      pageDiv.appendChild(annotationCanvas);\n      return annotationCanvas;\n    }\n  };\n  /**\n   * @param width\n   * @param height\n   * @param pageNumber\n   * @private\n   */\n  Annotation.prototype.resizeAnnotations = function (width, height, pageNumber) {\n    var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n    if (canvas) {\n      canvas.style.width = width + 'px';\n      canvas.style.height = height + 'px';\n      this.pdfViewerBase.applyElementStyles(canvas, pageNumber);\n    }\n  };\n  /**\n   * @param pageNumber\n   * @private\n   */\n  Annotation.prototype.clearAnnotationCanvas = function (pageNumber) {\n    var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n    var zoom = this.pdfViewerBase.getZoomFactor();\n    var ratio = this.pdfViewerBase.getZoomRatio(zoom);\n    if (canvas) {\n      var width = this.pdfViewerBase.pageSize[pageNumber].width;\n      var height = this.pdfViewerBase.pageSize[pageNumber].height;\n      canvas.width = width * ratio;\n      canvas.height = height * ratio;\n      canvas.style.width = width * zoom + 'px';\n      canvas.style.height = height * zoom + 'px';\n    }\n  };\n  /**\n   * @param pageNumber\n   * @param shapeAnnotation\n   * @param measureShapeAnnotation\n   * @param textMarkupAnnotation\n   * @param canvas\n   * @param isImportAnnotations\n   * @param pageNumber\n   * @param shapeAnnotation\n   * @param measureShapeAnnotation\n   * @param textMarkupAnnotation\n   * @param canvas\n   * @param isImportAnnotations\n   * @param pageNumber\n   * @param shapeAnnotation\n   * @param measureShapeAnnotation\n   * @param textMarkupAnnotation\n   * @param canvas\n   * @param isImportAnnotations\n   * @private\n   */\n  // eslint-disable-next-line\n  Annotation.prototype.renderAnnotations = function (pageNumber, shapeAnnotation, measureShapeAnnotation, textMarkupAnnotation, canvas, isImportAnnotations, isAnnotOrderAction, freeTextAnnotation) {\n    this.clearAnnotationCanvas(pageNumber);\n    if (this.shapeAnnotationModule) {\n      if (isImportAnnotations) {\n        this.shapeAnnotationModule.renderShapeAnnotations(shapeAnnotation, pageNumber, true);\n      } else {\n        this.shapeAnnotationModule.renderShapeAnnotations(shapeAnnotation, pageNumber, null, isAnnotOrderAction);\n      }\n    }\n    if (this.measureAnnotationModule) {\n      if (isImportAnnotations) {\n        this.measureAnnotationModule.renderMeasureShapeAnnotations(measureShapeAnnotation, pageNumber, true);\n      } else {\n        this.measureAnnotationModule.renderMeasureShapeAnnotations(measureShapeAnnotation, pageNumber, null, isAnnotOrderAction);\n      }\n    }\n    if (this.freeTextAnnotationModule) {\n      if (isImportAnnotations) {\n        this.freeTextAnnotationModule.renderFreeTextAnnotations(freeTextAnnotation, pageNumber, true);\n      } else {\n        this.freeTextAnnotationModule.renderFreeTextAnnotations(freeTextAnnotation, pageNumber, null, isAnnotOrderAction);\n      }\n    }\n    if (canvas !== null && canvas !== undefined) {\n      canvas = canvas;\n    } else {\n      canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n    }\n    this.pdfViewer.drawing.refreshCanvasDiagramLayer(canvas, pageNumber);\n    if (!this.pdfViewerBase.isInkAdded && this.pdfViewer.tool === 'Ink' && this.pdfViewer.currentPageNumber - 1 === pageNumber) {\n      var currentcanvas = document.getElementById(this.pdfViewer.element.id + '_annotationCanvas_' + (this.pdfViewer.currentPageNumber - 1));\n      var zoom = this.pdfViewerBase.getZoomFactor();\n      var ratio = this.pdfViewerBase.getWindowDevicePixelRatio();\n      var context = currentcanvas.getContext('2d');\n      var thickness = this.pdfViewer.inkAnnotationSettings.thickness ? this.pdfViewer.inkAnnotationSettings.thickness : 1;\n      var opacity = this.pdfViewer.inkAnnotationSettings.opacity ? this.pdfViewer.inkAnnotationSettings.opacity : 1;\n      var strokeColor = this.pdfViewer.inkAnnotationSettings.strokeColor ? this.pdfViewer.inkAnnotationSettings.strokeColor : '#ff0000';\n      if (!Browser.isDevice || Browser.isDevice && zoom <= 0.7) {\n        context.setTransform(ratio, 0, 0, ratio, 0, 0);\n      }\n      context.beginPath();\n      context.lineJoin = 'round';\n      context.lineCap = 'round';\n      context.lineWidth = thickness * zoom > 1 ? thickness * zoom : thickness;\n      context.strokeStyle = strokeColor;\n      context.globalAlpha = opacity;\n      var collectionData = processPathData(this.pdfViewer.annotationModule.inkAnnotationModule.updateInkDataWithZoom());\n      var csData = splitArrayCollection(collectionData);\n      for (var j = 0; j < csData.length; j++) {\n        var pathValue = csData[j];\n        switch (pathValue.command) {\n          case 'M':\n            context.moveTo(pathValue.x, pathValue.y);\n            break;\n          case 'L':\n            context.lineTo(pathValue.x, pathValue.y);\n            break;\n          default:\n            break;\n        }\n      }\n      context.stroke();\n      context.closePath();\n      if (!isNullOrUndefined(this.pdfViewer.toolbarModule) && !isNullOrUndefined(this.pdfViewer.toolbarModule.annotationToolbarModule)) {\n        this.pdfViewer.toolbar.annotationToolbarModule.inkAnnotationSelected = true;\n      }\n    }\n    if (this.textMarkupAnnotationModule) {\n      if (isImportAnnotations) {\n        // eslint-disable-next-line\n        this.textMarkupAnnotationModule.renderTextMarkupAnnotationsInPage(textMarkupAnnotation, pageNumber, true);\n      } else {\n        // eslint-disable-next-line\n        this.textMarkupAnnotationModule.renderTextMarkupAnnotationsInPage(textMarkupAnnotation, pageNumber);\n      }\n    }\n  };\n  /**\n   * @param pageNumber\n   * @param annotation\n   * @param annotationId\n   * @param pageNumber\n   * @param annotation\n   * @param annotationId\n   * @param pageNumber\n   * @param annotation\n   * @param annotationId\n   * @private\n   */\n  // eslint-disable-next-line\n  Annotation.prototype.storeAnnotations = function (pageNumber, annotation, annotationId) {\n    // let annotationId: string = '_annotations_textMarkup';\n    // if (annotation is ITextMarkupAnnotation) {\n    //     annotationId = '_annotations_textMarkup';\n    // } else if (annotation as IShapeAnnotation) {\n    //     annotationId = '_annotations_shape';\n    // } else {\n    //     annotationId = '_annotations_stamp';\n    // }\n    // eslint-disable-next-line\n    var sessionSize = Math.round(JSON.stringify(window.sessionStorage).length / 1024);\n    if (sessionSize > 4500) {\n      this.clearAnnotationStorage();\n      this.pdfViewerBase.isStorageExceed = true;\n      if (!this.pdfViewerBase.isFormStorageExceed) {\n        this.pdfViewer.formFieldsModule.clearFormFieldStorage();\n      }\n    }\n    // eslint-disable-next-line\n    var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + annotationId);\n    if (this.pdfViewerBase.isStorageExceed) {\n      storeObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + annotationId];\n    }\n    var index = 0;\n    if (!storeObject) {\n      this.storeAnnotationCollections(annotation, pageNumber);\n      var pageAnnotation = {\n        pageIndex: pageNumber,\n        annotations: []\n      };\n      pageAnnotation.annotations.push(annotation);\n      index = pageAnnotation.annotations.indexOf(annotation);\n      var annotationCollection = [];\n      annotationCollection.push(pageAnnotation);\n      var annotationStringified = JSON.stringify(annotationCollection);\n      if (this.pdfViewerBase.isStorageExceed) {\n        this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + annotationId] = annotationStringified;\n      } else {\n        window.sessionStorage.setItem(this.pdfViewerBase.documentId + annotationId, annotationStringified);\n      }\n    } else {\n      this.storeAnnotationCollections(annotation, pageNumber);\n      var annotObject_1 = JSON.parse(storeObject);\n      if (!this.pdfViewerBase.isStorageExceed) {\n        window.sessionStorage.removeItem(this.pdfViewerBase.documentId + annotationId);\n      }\n      var pageIndex_1 = this.pdfViewer.annotationModule.getPageCollection(annotObject_1, pageNumber);\n      if (annotObject_1[pageIndex_1]) {\n        annotObject_1[pageIndex_1].annotations.filter(function (item, index) {\n          if (item.annotName === annotation.annotName) {\n            annotObject_1[pageIndex_1].annotations.splice(index, 1);\n          }\n        });\n        annotObject_1[pageIndex_1].annotations.push(annotation);\n        index = annotObject_1[pageIndex_1].annotations.indexOf(annotation);\n      } else {\n        var markupAnnotation = {\n          pageIndex: pageNumber,\n          annotations: []\n        };\n        markupAnnotation.annotations.push(annotation);\n        index = markupAnnotation.annotations.indexOf(annotation);\n        annotObject_1.push(markupAnnotation);\n      }\n      var annotationStringified = JSON.stringify(annotObject_1);\n      if (this.pdfViewerBase.isStorageExceed) {\n        this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + annotationId] = annotationStringified;\n      } else {\n        window.sessionStorage.setItem(this.pdfViewerBase.documentId + annotationId, annotationStringified);\n      }\n    }\n    return index;\n  };\n  /**\n   * @param type\n   * @private\n   */\n  Annotation.prototype.getArrowType = function (type) {\n    var decoratorShapes = 'None';\n    switch (type) {\n      case 'ClosedArrow':\n      case 'Closed':\n        decoratorShapes = 'Arrow';\n        break;\n      case 'OpenArrow':\n      case 'Open':\n        decoratorShapes = 'OpenArrow';\n        break;\n      case 'Square':\n        decoratorShapes = 'Square';\n        break;\n      case 'Circle':\n      case 'Round':\n        decoratorShapes = 'Circle';\n        break;\n      case 'Diamond':\n        decoratorShapes = 'Diamond';\n        break;\n      case 'Butt':\n        decoratorShapes = 'Butt';\n        break;\n      case 'Slash':\n        // decoratorShapes = 'Slash';\n        break;\n    }\n    return decoratorShapes;\n  };\n  /**\n   * @param arrow\n   * @private\n   */\n  Annotation.prototype.getArrowTypeForCollection = function (arrow) {\n    var arrowType;\n    switch (arrow) {\n      case 'Arrow':\n        arrowType = 'ClosedArrow';\n        break;\n      case 'OpenArrow':\n      case 'Square':\n      case 'Circle':\n      case 'Diamond':\n      case 'None':\n        arrowType = arrow.toString();\n        break;\n      case 'Butt':\n        arrowType = 'Butt';\n        break;\n    }\n    return arrowType;\n  };\n  /**\n   * @param bound\n   * @param pageIndex\n   * @private\n   */\n  // eslint-disable-next-line\n  Annotation.prototype.getBounds = function (bound, pageIndex) {\n    var pageDetails = this.pdfViewerBase.pageSize[pageIndex];\n    if (pageDetails) {\n      if (pageDetails.rotation === 1) {\n        return {\n          left: bound.top,\n          top: pageDetails.width - (bound.left + bound.width),\n          width: bound.height,\n          height: bound.width\n        };\n      } else if (pageDetails.rotation === 2) {\n        // eslint-disable-next-line max-len\n        return {\n          left: pageDetails.width - bound.left - bound.width,\n          top: pageDetails.height - bound.top - bound.height,\n          width: bound.width,\n          height: bound.height\n        };\n      } else if (pageDetails.rotation === 3) {\n        return {\n          left: pageDetails.height - bound.top - bound.height,\n          top: bound.left,\n          width: bound.height,\n          height: bound.width\n        };\n      } else {\n        return bound;\n      }\n    } else {\n      return bound;\n    }\n  };\n  /**\n   * @param bound\n   * @param pageIndex\n   * @private\n   */\n  // eslint-disable-next-line\n  Annotation.prototype.getInkBounds = function (bound, pageIndex) {\n    var pageDetails = this.pdfViewerBase.pageSize[pageIndex];\n    if (pageDetails) {\n      if (pageDetails.rotation === 1) {\n        return {\n          x: bound.y,\n          y: pageDetails.width - (bound.x + bound.width),\n          width: bound.height,\n          height: bound.width\n        };\n      } else if (pageDetails.rotation === 2) {\n        // eslint-disable-next-line max-len\n        return {\n          x: pageDetails.width - bound.x - bound.width,\n          y: pageDetails.height - bound.y - bound.height,\n          width: bound.width,\n          height: bound.height\n        };\n      } else if (pageDetails.rotation === 3) {\n        return {\n          x: pageDetails.height - bound.y - bound.height,\n          y: bound.x,\n          width: bound.height,\n          height: bound.width\n        };\n      } else {\n        return bound;\n      }\n    } else {\n      return bound;\n    }\n  };\n  /**\n   * @param points\n   * @param pageIndex\n   * @param points\n   * @param pageIndex\n   * @private\n   */\n  // eslint-disable-next-line\n  Annotation.prototype.getVertexPoints = function (points, pageIndex) {\n    if (points) {\n      var pageDetails = this.pdfViewerBase.pageSize[pageIndex];\n      if (pageDetails.rotation === 1) {\n        var points1 = [];\n        for (var i = 0; i < points.length; i++) {\n          var point = {\n            x: points[i].y,\n            y: pageDetails.width - points[i].x\n          };\n          points1.push(point);\n        }\n        return points1;\n      } else if (pageDetails.rotation === 2) {\n        var points2 = [];\n        for (var i = 0; i < points.length; i++) {\n          var point = {\n            x: pageDetails.width - points[i].x,\n            y: pageDetails.height - points[i].y\n          };\n          points2.push(point);\n        }\n        return points2;\n      } else if (pageDetails.rotation === 3) {\n        var points3 = [];\n        for (var i = 0; i < points.length; i++) {\n          var point = {\n            x: pageDetails.height - points[i].y,\n            y: points[i].x\n          };\n          points3.push(point);\n        }\n        return points3;\n      } else {\n        return points;\n      }\n    }\n  };\n  /**\n   * @param pageIndex\n   * @param shapeAnnotations\n   * @param idString\n   * @param pageIndex\n   * @param shapeAnnotations\n   * @param idString\n   * @private\n   */\n  // eslint-disable-next-line\n  Annotation.prototype.getStoredAnnotations = function (pageIndex, shapeAnnotations, idString) {\n    // eslint-disable-next-line\n    var annotationCollection;\n    // eslint-disable-next-line\n    var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + idString);\n    if (this.pdfViewerBase.isStorageExceed) {\n      storeObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + idString];\n    }\n    if (storeObject) {\n      var annotObject = JSON.parse(storeObject);\n      var index = this.pdfViewer.annotationModule.getPageCollection(annotObject, pageIndex);\n      if (annotObject[index]) {\n        annotationCollection = annotObject[index].annotations;\n      } else {\n        annotationCollection = null;\n      }\n    } else {\n      annotationCollection = null;\n    }\n    return annotationCollection;\n  };\n  /**\n   * @param pdfAnnotationBase\n   * @param isColor\n   * @param isStroke\n   * @param isThickness\n   * @param isOpacity\n   * @param isLineStart\n   * @param isLineEnd\n   * @param isDashArray\n   * @param isFreeText\n   * @param previousText\n   * @param currentText\n   * @param pdfAnnotationBase\n   * @param isColor\n   * @param isStroke\n   * @param isThickness\n   * @param isOpacity\n   * @param isLineStart\n   * @param isLineEnd\n   * @param isDashArray\n   * @param isFreeText\n   * @param previousText\n   * @param currentText\n   * @param pdfAnnotationBase\n   * @param isColor\n   * @param isStroke\n   * @param isThickness\n   * @param isOpacity\n   * @param isLineStart\n   * @param isLineEnd\n   * @param isDashArray\n   * @param isFreeText\n   * @param previousText\n   * @param currentText\n   * @param pdfAnnotationBase\n   * @param isColor\n   * @param isStroke\n   * @param isThickness\n   * @param isOpacity\n   * @param isLineStart\n   * @param isLineEnd\n   * @param isDashArray\n   * @param isFreeText\n   * @param previousText\n   * @param currentText\n   * @param pdfAnnotationBase\n   * @param isColor\n   * @param isStroke\n   * @param isThickness\n   * @param isOpacity\n   * @param isLineStart\n   * @param isLineEnd\n   * @param isDashArray\n   * @param isFreeText\n   * @param previousText\n   * @param currentText\n   * @param pdfAnnotationBase\n   * @param isColor\n   * @param isStroke\n   * @param isThickness\n   * @param isOpacity\n   * @param isLineStart\n   * @param isLineEnd\n   * @param isDashArray\n   * @param isFreeText\n   * @param previousText\n   * @param currentText\n   * @param pdfAnnotationBase\n   * @param isColor\n   * @param isStroke\n   * @param isThickness\n   * @param isOpacity\n   * @param isLineStart\n   * @param isLineEnd\n   * @param isDashArray\n   * @param isFreeText\n   * @param previousText\n   * @param currentText\n   * @param pdfAnnotationBase\n   * @param isColor\n   * @param isStroke\n   * @param isThickness\n   * @param isOpacity\n   * @param isLineStart\n   * @param isLineEnd\n   * @param isDashArray\n   * @param isFreeText\n   * @param previousText\n   * @param currentText\n   * @param pdfAnnotationBase\n   * @param isColor\n   * @param isStroke\n   * @param isThickness\n   * @param isOpacity\n   * @param isLineStart\n   * @param isLineEnd\n   * @param isDashArray\n   * @param isFreeText\n   * @param previousText\n   * @param currentText\n   * @param pdfAnnotationBase\n   * @param isColor\n   * @param isStroke\n   * @param isThickness\n   * @param isOpacity\n   * @param isLineStart\n   * @param isLineEnd\n   * @param isDashArray\n   * @param isFreeText\n   * @param previousText\n   * @param currentText\n   * @private\n   */\n  // eslint-disable-next-line max-len\n  Annotation.prototype.triggerAnnotationPropChange = function (pdfAnnotationBase, isColor, isStroke, isThickness, isOpacity, isLineStart, isLineEnd, isDashArray, isFreeText, previousText, currentText) {\n    var index = this.getAnnotationIndex(pdfAnnotationBase.pageIndex, pdfAnnotationBase.id);\n    var type = this.getAnnotationType(pdfAnnotationBase.shapeAnnotationType, pdfAnnotationBase.measureType);\n    // eslint-disable-next-line max-len\n    var eventArgs = {\n      name: 'annotationPropertiesChange',\n      pageIndex: pdfAnnotationBase.pageIndex,\n      annotationId: pdfAnnotationBase.annotName,\n      annotationType: type,\n      isColorChanged: isColor,\n      isOpacityChanged: isOpacity,\n      isThicknessChanged: isThickness,\n      isStrokeColorChanged: isStroke\n    };\n    if (isFreeText) {\n      eventArgs.isFreeTextChanged = isFreeText;\n      eventArgs.previousText = previousText;\n      eventArgs.currentText = currentText;\n    }\n    if (isLineStart) {\n      eventArgs.isLineHeadStartStyleChanged = isLineStart;\n    }\n    if (isLineEnd) {\n      eventArgs.isLineHeadEndStyleChanged = isLineEnd;\n    }\n    if (isDashArray) {\n      eventArgs.isBorderDashArrayChanged = isDashArray;\n    }\n    this.pdfViewer.trigger('annotationPropertiesChange', eventArgs);\n  };\n  /**\n   * @param pdfAnnotationBase\n   * @private\n   */\n  Annotation.prototype.triggerAnnotationAdd = function (pdfAnnotationBase) {\n    // eslint-disable-next-line\n    var setting = {\n      opacity: pdfAnnotationBase.opacity,\n      fillColor: pdfAnnotationBase.fillColor,\n      strokeColor: pdfAnnotationBase.strokeColor,\n      thickness: pdfAnnotationBase.thickness,\n      author: pdfAnnotationBase.author,\n      subject: pdfAnnotationBase.subject,\n      modifiedDate: pdfAnnotationBase.modifiedDate\n    };\n    // eslint-disable-next-line\n    var bounds = {\n      left: pdfAnnotationBase.wrapper.bounds.x,\n      top: pdfAnnotationBase.wrapper.bounds.y,\n      width: pdfAnnotationBase.wrapper.bounds.width,\n      height: pdfAnnotationBase.wrapper.bounds.height\n    };\n    var type = this.getAnnotationType(pdfAnnotationBase.shapeAnnotationType, pdfAnnotationBase.measureType);\n    if (type === 'Line' || type === 'Arrow' || type === 'Distance' || type === 'Perimeter') {\n      setting.lineHeadStartStyle = this.getArrowString(pdfAnnotationBase.sourceDecoraterShapes);\n      setting.lineHeadEndStyle = this.getArrowString(pdfAnnotationBase.taregetDecoraterShapes);\n      setting.borderDashArray = pdfAnnotationBase.borderDashArray;\n    }\n    var labelSettings;\n    if (this.pdfViewer.enableShapeLabel) {\n      labelSettings = {\n        // eslint-disable-next-line max-len\n        fontColor: pdfAnnotationBase.fontColor,\n        fontSize: pdfAnnotationBase.fontSize,\n        fontFamily: pdfAnnotationBase.fontFamily,\n        opacity: pdfAnnotationBase.labelOpacity,\n        labelContent: pdfAnnotationBase.labelContent,\n        fillColor: pdfAnnotationBase.labelFillColor\n      };\n      // eslint-disable-next-line max-len\n      this.pdfViewer.fireAnnotationAdd(pdfAnnotationBase.pageIndex, pdfAnnotationBase.annotName, type, bounds, setting, null, null, null, labelSettings);\n    } else {\n      // eslint-disable-next-line max-len\n      this.pdfViewer.fireAnnotationAdd(pdfAnnotationBase.pageIndex, pdfAnnotationBase.annotName, type, bounds, setting);\n    }\n  };\n  /**\n   * @param pdfAnnotationBase\n   * @private\n   */\n  Annotation.prototype.triggerAnnotationResize = function (pdfAnnotationBase) {\n    // eslint-disable-next-line\n    var setting = {\n      opacity: pdfAnnotationBase.opacity,\n      fillColor: pdfAnnotationBase.fillColor,\n      strokeColor: pdfAnnotationBase.strokeColor,\n      thickness: pdfAnnotationBase.thickness,\n      author: pdfAnnotationBase.author,\n      subject: pdfAnnotationBase.subject,\n      modifiedDate: pdfAnnotationBase.modifiedDate\n    };\n    var index = this.getAnnotationIndex(pdfAnnotationBase.pageIndex, pdfAnnotationBase.id);\n    // eslint-disable-next-line\n    var annotationBounds = pdfAnnotationBase.bounds;\n    var currentPosition = {\n      left: annotationBounds.x,\n      top: annotationBounds.y,\n      x: annotationBounds.x,\n      y: annotationBounds.y,\n      width: annotationBounds.width,\n      height: annotationBounds.height\n    };\n    // eslint-disable-next-line max-len\n    var previousPosition = {\n      left: annotationBounds.oldProperties.x,\n      top: annotationBounds.oldProperties.y,\n      width: annotationBounds.oldProperties.width,\n      height: annotationBounds.oldProperties.height\n    };\n    var type = this.getAnnotationType(pdfAnnotationBase.shapeAnnotationType, pdfAnnotationBase.measureType);\n    if (type === 'Line' || type === 'Arrow' || type === 'Distance' || type === 'Perimeter') {\n      setting.lineHeadStartStyle = this.getArrowString(pdfAnnotationBase.sourceDecoraterShapes);\n      setting.lineHeadEndStyle = this.getArrowString(pdfAnnotationBase.taregetDecoraterShapes);\n      setting.borderDashArray = pdfAnnotationBase.borderDashArray;\n    }\n    var labelSettings;\n    if (this.pdfViewer.enableShapeLabel && pdfAnnotationBase.shapeAnnotationType !== 'HandWrittenSignature') {\n      labelSettings = {\n        // eslint-disable-next-line max-len\n        fontColor: pdfAnnotationBase.fontColor,\n        fontSize: pdfAnnotationBase.fontSize,\n        fontFamily: pdfAnnotationBase.fontFamily,\n        opacity: pdfAnnotationBase.labelOpacity,\n        labelContent: pdfAnnotationBase.labelContent,\n        fillColor: pdfAnnotationBase.labelFillColor,\n        notes: pdfAnnotationBase.notes\n      };\n      // eslint-disable-next-line max-len\n      this.pdfViewer.fireAnnotationResize(pdfAnnotationBase.pageIndex, pdfAnnotationBase.annotName, type, currentPosition, setting, null, null, null, labelSettings);\n    } else {\n      if (pdfAnnotationBase.shapeAnnotationType === 'HandWrittenSignature' || pdfAnnotationBase.shapeAnnotationType === 'SignatureText' || pdfAnnotationBase.shapeAnnotationType === 'SignatureImage') {\n        // eslint-disable-next-line max-len\n        this.pdfViewer.fireSignatureResize(pdfAnnotationBase.pageIndex, pdfAnnotationBase.signatureName, pdfAnnotationBase.shapeAnnotationType, pdfAnnotationBase.opacity, pdfAnnotationBase.strokeColor, pdfAnnotationBase.thickness, currentPosition, previousPosition);\n      } else {\n        // eslint-disable-next-line max-len\n        this.pdfViewer.fireAnnotationResize(pdfAnnotationBase.pageIndex, pdfAnnotationBase.annotName, type, currentPosition, setting);\n      }\n    }\n  };\n  /**\n   * @param pdfAnnotationBase\n   * @private\n   */\n  // eslint-disable-next-line\n  Annotation.prototype.triggerAnnotationMove = function (pdfAnnotationBase, isMoving) {\n    // eslint-disable-next-line\n    var setting = {\n      opacity: pdfAnnotationBase.opacity,\n      fillColor: pdfAnnotationBase.fillColor,\n      strokeColor: pdfAnnotationBase.strokeColor,\n      thickness: pdfAnnotationBase.thickness,\n      author: pdfAnnotationBase.author,\n      subject: pdfAnnotationBase.subject,\n      modifiedDate: pdfAnnotationBase.modifiedDate\n    };\n    // eslint-disable-next-line\n    var annotationBounds = pdfAnnotationBase.bounds;\n    var currentPosition = {\n      left: annotationBounds.x,\n      top: annotationBounds.y,\n      x: annotationBounds.x,\n      y: annotationBounds.y,\n      width: annotationBounds.width,\n      height: annotationBounds.height\n    };\n    // eslint-disable-next-line max-len\n    var previousPosition = {\n      left: annotationBounds.oldProperties.x ? annotationBounds.oldProperties.x : annotationBounds.x,\n      top: annotationBounds.oldProperties.y ? annotationBounds.oldProperties.y : annotationBounds.y,\n      width: annotationBounds.width,\n      height: annotationBounds.height\n    };\n    var type = this.getAnnotationType(pdfAnnotationBase.shapeAnnotationType, pdfAnnotationBase.measureType);\n    if (type === 'Line' || type === 'Arrow' || type === 'Distance' || type === 'Perimeter') {\n      setting.lineHeadStartStyle = this.getArrowString(pdfAnnotationBase.sourceDecoraterShapes);\n      setting.lineHeadEndStyle = this.getArrowString(pdfAnnotationBase.taregetDecoraterShapes);\n      setting.borderDashArray = pdfAnnotationBase.borderDashArray;\n    }\n    if (pdfAnnotationBase.shapeAnnotationType === 'HandWrittenSignature' || pdfAnnotationBase.shapeAnnotationType === 'SignatureText' || pdfAnnotationBase.shapeAnnotationType === 'SignatureImage') {\n      // eslint-disable-next-line max-len\n      this.pdfViewer.fireSignatureMove(pdfAnnotationBase.pageIndex, pdfAnnotationBase.signatureName, pdfAnnotationBase.shapeAnnotationType, pdfAnnotationBase.opacity, pdfAnnotationBase.strokeColor, pdfAnnotationBase.thickness, previousPosition, currentPosition);\n    } else {\n      // eslint-disable-next-line max-len\n      isMoving ? this.pdfViewer.fireAnnotationMoving(pdfAnnotationBase.pageIndex, pdfAnnotationBase.annotName, type, setting, previousPosition, currentPosition) : this.pdfViewer.fireAnnotationMove(pdfAnnotationBase.pageIndex, pdfAnnotationBase.annotName, type, setting, previousPosition, currentPosition);\n    }\n  };\n  /**\n   * @param annotationId\n   * @param pageNumber\n   * @param annotation\n   * @param annotationCollection\n   * @param isDblClick\n   * @param isSelected\n   * @private\n   */\n  // eslint-disable-next-line\n  Annotation.prototype.annotationSelect = function (annotationId, pageNumber, annotation, annotationCollection, isDblClick, isSelected) {\n    // eslint-disable-next-line\n    var annotSettings;\n    if (annotation.shapeAnnotationType === 'textMarkup') {\n      // eslint-disable-next-line max-len\n      annotSettings = {\n        type: 'TextMarkup',\n        subType: annotation.subject,\n        opacity: annotation.opacity,\n        color: annotation.color,\n        textMarkupContent: annotation.textMarkupContent,\n        textMarkupStartIndex: annotation.textMarkupStartIndex,\n        textMarkupEndIndex: annotation.textMarkupEndIndex,\n        customData: annotation.customData\n      };\n    } else if (annotation.shapeAnnotationType === 'StickyNotes') {\n      annotSettings = {\n        type: 'StickyNotes',\n        opacity: annotation.opacity,\n        customData: annotation.customData\n      };\n    } else if (annotation.shapeAnnotationType === 'Stamp' || annotation.shapeAnnotationType === 'Image') {\n      annotSettings = {\n        type: 'Stamp',\n        opacity: annotation.opacity,\n        customData: annotation.customData\n      };\n    } else if (annotation.shapeAnnotationType === 'Ink') {\n      annotSettings = {\n        // eslint-disable-next-line max-len\n        type: 'Ink',\n        opacity: annotation.opacity,\n        strokeColor: annotation.strokeColor,\n        thickness: annotation.thickness,\n        modifiedDate: annotation.modifiedDate,\n        width: annotation.bounds.width,\n        height: annotation.bounds.height,\n        left: annotation.bounds.x,\n        top: annotation.bounds.y,\n        data: annotation.data,\n        customData: annotation.customData\n      };\n    } else if (annotation.shapeAnnotationType === 'FreeText') {\n      annotSettings = {\n        type: 'FreeText',\n        opacity: annotation.opacity,\n        fillColor: annotation.fillColor,\n        // eslint-disable-next-line max-len\n        strokeColor: annotation.strokeColor,\n        thickness: annotation.thickness,\n        content: annotation.dynamicText,\n        // eslint-disable-next-line max-len\n        fontFamily: annotation.fontFamily,\n        fontSize: annotation.fontSize,\n        fontColor: annotation.fontColor,\n        textAlign: annotation.textAlign,\n        fontStyle: this.updateFreeTextFontStyle(annotation.font),\n        customData: annotation.customData\n      };\n    } else if (annotation.measureType === '') {\n      if (annotation.shapeAnnotationType === 'Line') {\n        // eslint-disable-next-line max-len\n        annotSettings = {\n          type: 'Shape',\n          subType: 'Line',\n          opacity: annotation.opacity,\n          fillColor: annotation.fillColor,\n          strokeColor: annotation.strokeColor,\n          thickness: annotation.thickness,\n          borderDashArray: annotation.borderDashArray,\n          lineHeadStartStyle: annotation.sourceDecoraterShapes,\n          lineHeadEndStyle: annotation.taregetDecoraterShapes,\n          customData: annotation.customData\n        };\n      } else if (annotation.shapeAnnotationType === 'Arrow' || annotation.shapeAnnotationType === 'LineWidthArrowHead') {\n        // eslint-disable-next-line max-len\n        annotSettings = {\n          type: 'Shape',\n          subType: 'Arrow',\n          opacity: annotation.opacity,\n          fillColor: annotation.fillColor,\n          strokeColor: annotation.strokeColor,\n          thickness: annotation.thickness,\n          borderDashArray: annotation.borderDashArray,\n          lineHeadStartStyle: annotation.sourceDecoraterShapes,\n          lineHeadEndStyle: annotation.taregetDecoraterShapes,\n          customData: annotation.customData\n        };\n      } else if (annotation.shapeAnnotationType === 'Rectangle') {\n        annotSettings = {\n          type: 'Shape',\n          subType: 'Rectangle',\n          opacity: annotation.opacity,\n          fillColor: annotation.fillColor,\n          strokeColor: annotation.strokeColor,\n          thickness: annotation.thickness,\n          customData: annotation.customData\n        };\n      } else if (annotation.shapeAnnotationType === 'Circle' || annotation.shapeAnnotationType === 'Ellipse') {\n        annotSettings = {\n          type: 'Shape',\n          subType: 'Circle',\n          opacity: annotation.opacity,\n          fillColor: annotation.fillColor,\n          strokeColor: annotation.strokeColor,\n          thickness: annotation.thickness,\n          customData: annotation.customData\n        };\n      } else if (annotation.shapeAnnotationType === 'Polygon') {\n        annotSettings = {\n          type: 'Shape',\n          subType: 'Polygon',\n          opacity: annotation.opacity,\n          fillColor: annotation.fillColor,\n          strokeColor: annotation.strokeColor,\n          thickness: annotation.thickness,\n          customData: annotation.customData\n        };\n      }\n    } else if (annotation.measureType !== '') {\n      if (annotation.measureType === 'Distance') {\n        // eslint-disable-next-line max-len\n        annotSettings = {\n          type: 'Measure',\n          subType: 'Distance',\n          opacity: annotation.opacity,\n          fillColor: annotation.fillColor,\n          strokeColor: annotation.strokeColor,\n          thickness: annotation.thickness,\n          borderDashArray: annotation.borderDashArray,\n          lineHeadStartStyle: annotation.sourceDecoraterShapes,\n          lineHeadEndStyle: annotation.taregetDecoraterShapes,\n          customData: annotation.customData\n        };\n      } else if (annotation.measureType === 'Perimeter') {\n        // eslint-disable-next-line max-len\n        annotSettings = {\n          type: 'Measure',\n          subType: 'Perimeter',\n          opacity: annotation.opacity,\n          fillColor: annotation.fillColor,\n          strokeColor: annotation.strokeColor,\n          thickness: annotation.thickness,\n          borderDashArray: annotation.borderDashArray,\n          lineHeadStartStyle: annotation.sourceDecoraterShapes,\n          lineHeadEndStyle: annotation.taregetDecoraterShapes,\n          customData: annotation.customData\n        };\n      } else if (annotation.measureType === 'Area') {\n        annotSettings = {\n          type: 'Measure',\n          subType: 'Area',\n          opacity: annotation.opacity,\n          fillColor: annotation.fillColor,\n          strokeColor: annotation.strokeColor,\n          thickness: annotation.thickness,\n          customData: annotation.customData\n        };\n      } else if (annotation.measureType === 'Radius') {\n        annotSettings = {\n          type: 'Measure',\n          subType: 'Radius',\n          opacity: annotation.opacity,\n          fillColor: annotation.fillColor,\n          strokeColor: annotation.strokeColor,\n          thickness: annotation.thickness,\n          customData: annotation.customData\n        };\n      } else if (annotation.measureType === 'Volume') {\n        annotSettings = {\n          type: 'Measure',\n          subType: 'Volume',\n          opacity: annotation.opacity,\n          fillColor: annotation.fillColor,\n          strokeColor: annotation.strokeColor,\n          thickness: annotation.thickness,\n          calibrate: annotation.calibrate,\n          annotationId: annotation.annotName,\n          customData: annotation.customData\n        };\n      }\n    }\n    // eslint-disable-next-line\n    var overlappedCollection = [];\n    // eslint-disable-next-line\n    var overlappedAnnotations = this.getOverlappedAnnotations(annotation, pageNumber);\n    if (overlappedAnnotations && this.overlappedCollections) {\n      // eslint-disable-next-line\n      var overlappedCollections = [];\n      // eslint-disable-next-line\n      for (var i = 0; i < overlappedAnnotations.length; i++) {\n        if (overlappedAnnotations[i].shapeAnnotationType !== 'textMarkup' && this.overlappedCollections || isSelected) {\n          for (var j = 0; j < this.overlappedCollections.length; j++) {\n            if (overlappedAnnotations[i].annotName === this.overlappedCollections[j].annotName) {\n              overlappedCollections.push(overlappedAnnotations[i]);\n              break;\n            }\n          }\n        } else {\n          overlappedCollections.push(overlappedAnnotations[i]);\n        }\n      }\n      overlappedAnnotations = overlappedCollections;\n    }\n    if (this.pdfViewer.enableMultiLineOverlap) {\n      // eslint-disable-next-line\n      for (var i = 0; i < overlappedAnnotations.length; i++) {\n        if (overlappedAnnotations[i].shapeAnnotationType === 'textMarkup') {\n          var isOverlapped = false;\n          for (var j = 0; j < overlappedAnnotations[i].bounds.length; j++) {\n            // eslint-disable-next-line\n            var bounds = this.orderTextMarkupBounds(overlappedAnnotations[i].bounds[j]);\n            // eslint-disable-next-line\n            var clickedPosition = this.textMarkupAnnotationModule.annotationClickPosition;\n            if (clickedPosition && (clickedPosition.x || clickedPosition.y)) {\n              if (bounds.left <= clickedPosition.x && bounds.left + bounds.width >= clickedPosition.x) {\n                if (bounds.top <= clickedPosition.y && bounds.top + bounds.height >= clickedPosition.y) {\n                  isOverlapped = true;\n                }\n              }\n            } else {\n              isOverlapped = true;\n            }\n          }\n          if (!isOverlapped) {\n            overlappedAnnotations.splice(i, 1);\n          }\n        }\n      }\n    }\n    if (overlappedAnnotations && overlappedAnnotations.length > 0) {\n      annotationCollection = overlappedAnnotations;\n      // eslint-disable-next-line\n      for (var i = 0; i < annotationCollection.length; i++) {\n        // eslint-disable-next-line\n        var overlappedObject = cloneObject(annotationCollection[i]);\n        overlappedObject.annotationId = annotationCollection[i].annotName;\n        if (annotationId === annotationCollection[i].annotName && annotation.measureType && annotation.measureType === 'Volume') {\n          annotSettings.calibrate = annotationCollection[i].calibrate;\n        }\n        delete overlappedObject.annotName;\n        overlappedCollection.push(overlappedObject);\n      }\n    } else {\n      overlappedCollection = null;\n    }\n    this.addFreeTextProperties(annotation, annotSettings);\n    var annotationAddMode = annotation.annotationAddMode;\n    if (!isDblClick) {\n      if (annotation.shapeAnnotationType === 'Stamp' || annotation.shapeAnnotationType === 'Image') {\n        if (!this.pdfViewerBase.isNewStamp && this.annotationSelected) {\n          if (overlappedCollection) {\n            // eslint-disable-next-line max-len\n            this.pdfViewer.fireAnnotationSelect(annotationId, pageNumber, annotSettings, overlappedCollection, null, null, annotationAddMode);\n          } else {\n            this.pdfViewer.fireAnnotationSelect(annotationId, pageNumber, annotSettings, null, null, null, annotationAddMode);\n          }\n        }\n      } else {\n        var module = this.textMarkupAnnotationModule;\n        var multiPageCollection = module && module.multiPageCollectionList(annotation);\n        if (multiPageCollection && multiPageCollection.length === 0) {\n          multiPageCollection = null;\n        }\n        if (this.annotationSelected) {\n          if (overlappedCollection) {\n            isSelected = false;\n            // eslint-disable-next-line max-len\n            this.pdfViewer.fireAnnotationSelect(annotationId, pageNumber, annotSettings, overlappedCollection, multiPageCollection, isSelected, annotationAddMode);\n          } else {\n            isSelected = true;\n            // eslint-disable-next-line max-len\n            this.pdfViewer.fireAnnotationSelect(annotationId, pageNumber, annotSettings, null, multiPageCollection, isSelected, annotationAddMode);\n          }\n        }\n      }\n    } else {\n      if (annotation.shapeAnnotationType === 'Stamp' || annotation.shapeAnnotationType === 'Image') {\n        if (!this.pdfViewerBase.isNewStamp) {\n          this.pdfViewer.fireAnnotationDoubleClick(annotationId, pageNumber, annotSettings);\n        }\n      } else {\n        this.pdfViewer.fireAnnotationDoubleClick(annotationId, pageNumber, annotSettings);\n      }\n    }\n    this.annotationSelected = true;\n  };\n  // eslint-disable-next-line\n  Annotation.prototype.selectSignature = function (signatureId, pageNumber, signatureModule) {\n    // eslint-disable-next-line\n    var annotBounds = signatureModule.bounds;\n    // eslint-disable-next-line\n    var bounds = {\n      height: annotBounds.height,\n      width: annotBounds.width,\n      x: annotBounds.x,\n      y: annotBounds.y\n    };\n    if (!this.pdfViewerBase.signatureAdded) {\n      // eslint-disable-next-line max-len\n      var signature = {\n        bounds: bounds,\n        opacity: signatureModule.opacity,\n        thickness: signatureModule.thickness,\n        strokeColor: signatureModule.strokeColor\n      };\n      this.pdfViewer.fireSignatureSelect(signatureId, pageNumber, signature);\n    }\n  };\n  // eslint-disable-next-line\n  Annotation.prototype.editSignature = function (signature) {\n    // eslint-disable-next-line\n    var currentAnnotation;\n    if (signature.uniqueKey) {\n      // eslint-disable-next-line\n      currentAnnotation = this.pdfViewer.nameTable[signature.uniqueKey];\n    } else {\n      currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n    }\n    var pageNumber = currentAnnotation.pageIndex;\n    if (currentAnnotation.shapeAnnotationType === 'HandWrittenSignature' || currentAnnotation.shapeAnnotationType === 'SignatureText' || currentAnnotation.shapeAnnotationType === 'SignatureImage') {\n      // eslint-disable-next-line\n      var clonedObject = cloneObject(currentAnnotation);\n      // eslint-disable-next-line\n      var redoClonedObject = cloneObject(currentAnnotation);\n      if (!isNullOrUndefined(signature.opacity) || currentAnnotation.opacity !== signature.opacity) {\n        redoClonedObject.opacity = signature.opacity;\n        this.pdfViewer.nodePropertyChange(currentAnnotation, {\n          opacity: signature.opacity\n        });\n        // eslint-disable-next-line max-len\n        this.pdfViewer.fireSignaturePropertiesChange(currentAnnotation.pageIndex, currentAnnotation.signatureName, currentAnnotation.shapeAnnotationType, false, true, false, clonedObject.opacity, redoClonedObject.opacity);\n        // eslint-disable-next-line max-len\n        this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Shape Opacity', '', clonedObject, redoClonedObject);\n      }\n      if (currentAnnotation.strokeColor !== signature.strokeColor) {\n        redoClonedObject.strokeColor = signature.strokeColor;\n        this.pdfViewer.nodePropertyChange(currentAnnotation, {\n          strokeColor: signature.strokeColor\n        });\n        // eslint-disable-next-line max-len\n        this.pdfViewer.fireSignaturePropertiesChange(currentAnnotation.pageIndex, currentAnnotation.signatureName, currentAnnotation.shapeAnnotationType, true, false, false, clonedObject.strokeColor, redoClonedObject.strokeColor);\n        // eslint-disable-next-line max-len\n        this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Shape Stroke', '', clonedObject, redoClonedObject);\n      }\n      if (currentAnnotation.thickness !== signature.thickness) {\n        redoClonedObject.thickness = signature.thickness;\n        this.pdfViewer.nodePropertyChange(currentAnnotation, {\n          thickness: signature.thickness\n        });\n        // eslint-disable-next-line max-len\n        this.pdfViewer.fireSignaturePropertiesChange(currentAnnotation.pageIndex, currentAnnotation.signatureName, currentAnnotation.shapeAnnotationType, false, false, true, clonedObject.thickness, redoClonedObject.thickness);\n        // eslint-disable-next-line max-len\n        this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Shape Thickness', '', clonedObject, redoClonedObject);\n      }\n      currentAnnotation.modifiedDate = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n      this.pdfViewer.renderDrawing();\n      this.pdfViewerBase.signatureModule.modifySignatureCollection(null, pageNumber, currentAnnotation, true);\n    }\n  };\n  // eslint-disable-next-line\n  Annotation.prototype.deletComment = function (commentDiv) {\n    if (commentDiv.parentElement.firstChild === commentDiv) {\n      this.deleteAnnotation();\n    } else {\n      this.pdfViewer.annotationModule.stickyNotesAnnotationModule.modifyCommentDeleteProperty(commentDiv.parentElement, commentDiv);\n    }\n  };\n  // eslint-disable-next-line\n  Annotation.prototype.addReplyComments = function (currentAnnotation, replyComment, commentType) {\n    if (commentType === 'add') {\n      // eslint-disable-next-line\n      var commentsMainDiv = document.getElementById(currentAnnotation.annotName);\n      this.pdfViewer.annotationModule.stickyNotesAnnotationModule.createCommentDiv(commentsMainDiv);\n      for (var j = 0; j < replyComment.length; j++) {\n        this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveCommentDiv(commentsMainDiv, replyComment[j]);\n      }\n    } else if (commentType === 'next') {\n      // eslint-disable-next-line\n      var commentsMainDiv = document.getElementById(currentAnnotation.annotationId);\n      this.selectAnnotation(currentAnnotation);\n      this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveCommentDiv(commentsMainDiv, replyComment);\n    }\n  };\n  Annotation.prototype.editComments = function (commentId, editComment) {\n    // eslint-disable-next-line\n    var commentDiv = document.getElementById(commentId);\n    commentDiv.childNodes[1].ej2_instances[0].value = editComment;\n  };\n  // eslint-disable-next-line\n  Annotation.prototype.editAnnotation = function (annotation) {\n    // eslint-disable-next-line\n    var currentAnnotation;\n    var annotationId;\n    var annotationType;\n    var pageNumber;\n    var isTextMarkupUpdate = false;\n    var textMarkupAnnotation = this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;\n    if (textMarkupAnnotation && (!annotation.annotationId || !annotation.uniqueKey) && annotation.annotationId == textMarkupAnnotation.annotName) {\n      currentAnnotation = this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;\n      annotationId = currentAnnotation.annotName;\n      pageNumber = this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage;\n    } else {\n      if (this.pdfViewer.selectedItems.annotations[0]) {\n        currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n        annotationId = currentAnnotation.annotName;\n        pageNumber = currentAnnotation.pageIndex;\n      }\n    }\n    if (annotation.uniqueKey !== undefined) {\n      // eslint-disable-next-line\n      currentAnnotation = this.pdfViewer.nameTable[annotation.uniqueKey];\n      currentAnnotation.annotationSettings.isLock = annotation.annotationSettings.isLock;\n      annotationId = currentAnnotation.annotName;\n      pageNumber = currentAnnotation.pageIndex;\n      if (isBlazor()) {\n        if (annotation.allowedInteractions) {\n          var allowedInteractionsCount = annotation.allowedInteractions.length;\n          for (var i = 0; i < allowedInteractionsCount; i++) {\n            if (annotation.allowedInteractions[i] === 0) {\n              annotation.allowedInteractions[i] = AllowedInteraction.Select;\n            }\n            if (annotation.allowedInteractions[i] === 1) {\n              annotation.allowedInteractions[i] = AllowedInteraction.Move;\n            }\n            if (annotation.allowedInteractions[i] === 2) {\n              annotation.allowedInteractions[i] = AllowedInteraction.Resize;\n            }\n            if (annotation.allowedInteractions[i] === 3) {\n              annotation.allowedInteractions[i] = AllowedInteraction.Delete;\n            }\n            if (annotation.allowedInteractions[i] === 4) {\n              annotation.allowedInteractions[i] = AllowedInteraction.PropertyChange;\n            }\n            if (annotation.allowedInteractions[i] === 5) {\n              annotation.allowedInteractions[i] = AllowedInteraction.None;\n            }\n          }\n        }\n      }\n      // eslint-disable-next-line\n      currentAnnotation.allowedInteractions = annotation.allowedInteractions ? annotation.allowedInteractions : this.updateAnnotationAllowedInteractions(annotation);\n    }\n    if (!currentAnnotation) {\n      if (annotation.shapeAnnotationType === 'sticky' && annotation.annotationId !== undefined) {\n        // eslint-disable-next-line\n        currentAnnotation = this.pdfViewer.nameTable[annotation.annotationId];\n        currentAnnotation.annotationSettings.isLock = annotation.annotationSettings.isLock;\n        annotationId = currentAnnotation.annotName;\n        pageNumber = currentAnnotation.pageIndex;\n      }\n    }\n    if (annotation.shapeAnnotationType === 'textMarkup') {\n      // eslint-disable-next-line max-len\n      currentAnnotation = this.pdfViewer.annotationModule.textMarkupAnnotationModule.getAnnotations(annotation.pageNumber, annotation);\n      for (var i = 0; i < currentAnnotation.length; i++) {\n        if (annotation.annotationId === currentAnnotation[i].annotName) {\n          isTextMarkupUpdate = true;\n          currentAnnotation = currentAnnotation[i];\n          currentAnnotation.isPrint = annotation.isPrint;\n          this.textMarkupAnnotationModule.currentTextMarkupAnnotation = currentAnnotation;\n          this.textMarkupAnnotationModule.selectTextMarkupCurrentPage = currentAnnotation.pageNumber;\n          currentAnnotation.allowedInteractions = annotation.allowedInteractions;\n          pageNumber = currentAnnotation.pageNumber;\n          annotationId = annotation.annotationId;\n          break;\n        }\n      }\n    }\n    if (currentAnnotation) {\n      // eslint-disable-next-line\n      var clonedObject = cloneObject(currentAnnotation);\n      // eslint-disable-next-line\n      var redoClonedObject = cloneObject(currentAnnotation);\n      if (annotation.shapeAnnotationType === 'textMarkup') {\n        annotationType = 'textMarkup';\n      }\n      if (annotation && annotation.isCommentLock === true) {\n        currentAnnotation.isCommentLock = annotation.isCommentLock;\n      }\n      if (annotation.comments) {\n        for (var j_1 = 0; j_1 < annotation.comments.length; j_1++) {\n          if (annotation.comments[j_1].isLock === true) {\n            if (annotationType) {\n              currentAnnotation.comments = annotation.comments;\n              currentAnnotation.comments[j_1].isLock = annotation.comments[j_1].isLock;\n            } else {\n              currentAnnotation.properties.comments = annotation.comments;\n              currentAnnotation.properties.comments[j_1].isLock = annotation.comments[j_1].isLock;\n            }\n          }\n        }\n      }\n      if (annotation && annotation.note !== '' && annotation.note !== undefined) {\n        if (annotationType) {\n          currentAnnotation.note = annotation.note;\n          // eslint-disable-next-line max-len\n          this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addTextToComments(currentAnnotation.annotName, currentAnnotation.note);\n        } else {\n          currentAnnotation.notes = annotation.note;\n          // eslint-disable-next-line max-len\n          this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addTextToComments(currentAnnotation.annotName, currentAnnotation.notes);\n        }\n      } else {\n        if (annotation && annotation.isCommentLock && (annotation.type && annotation.type !== 'FreeText' || annotation.shapeAnnotationType !== 'FreeText')) {\n          this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addTextToComments(currentAnnotation.annotName, '  ');\n        }\n      }\n      if (annotation.commentId && annotation.editComment && annotation.commentType === 'edit') {\n        this.editComments(annotation.commentId, annotation.editComment);\n      }\n      if (annotation.replyComment && annotation.commentType === 'add') {\n        this.addReplyComments(currentAnnotation, annotation.replyComment, annotation.commentType);\n        this.pdfViewer.annotationCollection[0].note = annotation.note;\n      }\n      if (annotation.nextComment && annotation.commentType === 'next') {\n        this.addReplyComments(annotation, annotation.nextComment, annotation.commentType);\n      }\n      if (annotation.note === '' && annotation.commentType === 'delete') {\n        // eslint-disable-next-line\n        var commentDiv = document.getElementById(annotation.annotationId);\n        this.deletComment(commentDiv);\n      }\n      if (annotation.comments) {\n        for (var j_2 = 0; j_2 < annotation.comments.length; j_2++) {\n          if (annotation.comments[j_2].note === '' && annotation.commentType === 'delete') {\n            // eslint-disable-next-line\n            var commentDiv = document.getElementById(annotation.comments[j_2].annotName);\n            this.deletComment(commentDiv);\n          }\n        }\n      }\n      if (annotation.type === 'TextMarkup' || annotation.shapeAnnotationType === 'textMarkup') {\n        if (currentAnnotation.annotationSettings && annotation.annotationSettings) {\n          if (currentAnnotation.annotationSettings.isLock !== annotation.annotationSettings.isLock) {\n            // eslint-disable-next-line max-len\n            var pageAnnotations = this.textMarkupAnnotationModule.modifyAnnotationProperty('AnnotationSettings', annotation.annotationSettings.isLock, null);\n            // eslint-disable-next-line max-len\n            this.textMarkupAnnotationModule.manageAnnotations(pageAnnotations, this.textMarkupAnnotationModule.selectTextMarkupCurrentPage);\n          }\n        }\n        if (currentAnnotation.opacity !== annotation.opacity) {\n          this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyOpacityProperty(null, annotation.opacity);\n        }\n        if (currentAnnotation.color !== annotation.color) {\n          this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyColorProperty(annotation.color);\n        }\n        annotationType = 'textMarkup';\n        if (isTextMarkupUpdate) {\n          this.textMarkupAnnotationModule.currentTextMarkupAnnotation = null;\n          this.textMarkupAnnotationModule.selectTextMarkupCurrentPage = null;\n        }\n        // eslint-disable-next-line max-len\n      } else if (annotation && annotation.stampAnnotationType === 'image' && annotation.shapeAnnotationType === 'stamp' && annotation.stampAnnotationPath) {\n        annotationType = 'stamp';\n        if (currentAnnotation.data !== annotation.stampAnnotationPath) {\n          currentAnnotation.data = annotation.stampAnnotationPath;\n          currentAnnotation.wrapper.children[0].imageSource = annotation.stampAnnotationPath;\n        }\n        if (!isNullOrUndefined(annotation.opacity) && currentAnnotation.opacity !== annotation.opacity) {\n          this.annotationPropertyChange(currentAnnotation, annotation.opacity, 'Shape Opacity', clonedObject, redoClonedObject);\n        }\n        this.calculateAnnotationBounds(currentAnnotation, annotation);\n        // eslint-disable-next-line max-len\n      } else if (annotation.type === 'StickyNotes' || annotation.type === 'Stamp' || annotation.shapeAnnotationType === 'sticky' || annotation.shapeAnnotationType === 'stamp') {\n        if (!isNullOrUndefined(annotation.opacity) && currentAnnotation.opacity !== annotation.opacity) {\n          this.annotationPropertyChange(currentAnnotation, annotation.opacity, 'Shape Opacity', clonedObject, redoClonedObject);\n        }\n        this.calculateAnnotationBounds(currentAnnotation, annotation);\n        if (annotation.type === 'StickyNotes' || annotation.shapeAnnotationType === 'sticky') {\n          annotationType = 'sticky';\n        } else {\n          annotationType = 'stamp';\n        }\n        // eslint-disable-next-line max-len\n      } else if (annotation.type === 'Ink' || annotation.type === 'Shape' || annotation.type === 'Measure' || annotation.shapeAnnotationType === 'Line' || annotation.shapeAnnotationType === 'Square' || annotation.shapeAnnotationType === 'Circle' || annotation.shapeAnnotationType === 'Polygon' || annotation.shapeAnnotationType === 'Polyline' || annotation.shapeAnnotationType === 'Ink') {\n        this.calculateAnnotationBounds(currentAnnotation, annotation);\n        if (!isNullOrUndefined(annotation.opacity) && currentAnnotation.opacity !== annotation.opacity) {\n          this.annotationPropertyChange(currentAnnotation, annotation.opacity, 'Shape Opacity', clonedObject, redoClonedObject);\n        }\n        if (annotation.fillColor && currentAnnotation.fillColor !== annotation.fillColor) {\n          redoClonedObject.fillColor = annotation.fillColor;\n          if (annotation.labelSettings && annotation.labelSettings.fillColor) {\n            annotation.labelSettings.fillColor = annotation.fillColor;\n          }\n          this.pdfViewer.nodePropertyChange(currentAnnotation, {\n            fillColor: annotation.fillColor\n          });\n          this.triggerAnnotationPropChange(currentAnnotation, true, false, false, false);\n          // eslint-disable-next-line max-len\n          this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Shape Fill', '', clonedObject, redoClonedObject);\n        }\n        if (annotation.strokeColor && currentAnnotation.strokeColor !== annotation.strokeColor) {\n          redoClonedObject.strokeColor = annotation.strokeColor;\n          this.pdfViewer.nodePropertyChange(currentAnnotation, {\n            strokeColor: annotation.strokeColor\n          });\n          this.triggerAnnotationPropChange(currentAnnotation, false, true, false, false);\n          // eslint-disable-next-line max-len\n          this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Shape Stroke', '', clonedObject, redoClonedObject);\n        }\n        if (annotation.thickness && currentAnnotation.thickness !== annotation.thickness) {\n          redoClonedObject.thickness = annotation.thickness;\n          this.pdfViewer.nodePropertyChange(currentAnnotation, {\n            thickness: annotation.thickness\n          });\n          this.triggerAnnotationPropChange(currentAnnotation, false, false, true, false);\n          // eslint-disable-next-line max-len\n          this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Shape Thickness', '', clonedObject, redoClonedObject);\n        }\n        if (currentAnnotation.author !== annotation.author) {\n          redoClonedObject.author = annotation.author;\n          this.pdfViewer.nodePropertyChange(currentAnnotation, {\n            author: annotation.author\n          });\n          this.triggerAnnotationPropChange(currentAnnotation, false, true, false, false);\n        }\n        if (currentAnnotation.subject !== annotation.subject) {\n          redoClonedObject.subject = annotation.subject;\n          this.pdfViewer.nodePropertyChange(currentAnnotation, {\n            subject: annotation.subject\n          });\n          this.triggerAnnotationPropChange(currentAnnotation, false, true, false, false);\n        }\n        if (currentAnnotation.modifiedDate !== annotation.modifiedDate) {\n          redoClonedObject.modifiedDate = annotation.modifiedDate;\n          this.pdfViewer.nodePropertyChange(currentAnnotation, {\n            modifiedDate: annotation.modifiedDate\n          });\n        }\n        if (currentAnnotation.subject !== annotation.subject) {\n          redoClonedObject.subject = annotation.subject;\n          this.pdfViewer.nodePropertyChange(currentAnnotation, {\n            subject: annotation.subject\n          });\n          this.triggerAnnotationPropChange(currentAnnotation, false, true, false, false);\n          // eslint-disable-next-line max-len\n          this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Shape Stroke', '', clonedObject, redoClonedObject);\n        }\n        if (this.pdfViewer.enableShapeLabel && currentAnnotation.fontColor !== annotation.fontColor) {\n          redoClonedObject.fontColor = annotation.fontColor;\n          this.pdfViewer.nodePropertyChange(currentAnnotation, {\n            fontColor: annotation.fontColor\n          });\n        }\n        if (this.pdfViewer.enableShapeLabel && annotation.labelSettings && annotation.labelSettings.fillColor) {\n          if (currentAnnotation.labelFillColor !== annotation.labelSettings.fillColor) {\n            redoClonedObject.labelFillColor = annotation.labelSettings.fillColor;\n            this.pdfViewer.nodePropertyChange(currentAnnotation, {\n              labelFillColor: annotation.labelSettings.fillColor\n            });\n          }\n        }\n        // eslint-disable-next-line max-len\n        if (annotation.shapeAnnotationType === 'Line' || annotation.shapeAnnotationType === 'Polyline' || annotation.shapeAnnotationType === 'Polygon') {\n          if (JSON.stringify(currentAnnotation.vertexPoints) !== JSON.stringify(annotation.vertexPoints)) {\n            currentAnnotation.vertexPoints = annotation.vertexPoints;\n            this.pdfViewer.nodePropertyChange(currentAnnotation, {\n              vertexPoints: annotation.vertexPoints\n            });\n          }\n        }\n        // eslint-disable-next-line max-len\n        if (annotation.subType === 'Line' || annotation.subType === 'Arrow' || annotation.subType === 'Distance' || annotation.subType === 'Perimeter') {\n          var isSourceDecoraterShapesChanged = false;\n          var isTargetDecoraterShapesChanged = false;\n          var isBorderDashArrayChanged = false;\n          clonedObject.lineHeadStart = currentAnnotation.sourceDecoraterShapes;\n          clonedObject.lineHeadEnd = currentAnnotation.taregetDecoraterShapes;\n          redoClonedObject.lineHeadStart = annotation.lineHeadStartStyle;\n          redoClonedObject.lineHeadEnd = annotation.lineHeadEndStyle;\n          redoClonedObject.borderDashArray = annotation.borderDashArray;\n          if (currentAnnotation.taregetDecoraterShapes !== annotation.lineHeadEndStyle) {\n            isTargetDecoraterShapesChanged = true;\n          }\n          if (currentAnnotation.sourceDecoraterShapes !== annotation.lineHeadStartStyle) {\n            isSourceDecoraterShapesChanged = true;\n          }\n          if (currentAnnotation.borderDashArray !== annotation.borderDashArray) {\n            isBorderDashArrayChanged = true;\n          }\n          // eslint-disable-next-line max-len\n          this.pdfViewer.nodePropertyChange(currentAnnotation, {\n            sourceDecoraterShapes: annotation.lineHeadStartStyle,\n            taregetDecoraterShapes: annotation.lineHeadEndStyle,\n            borderDashArray: annotation.borderDashArray\n          });\n          // eslint-disable-next-line max-len\n          this.triggerAnnotationPropChange(currentAnnotation, false, false, false, false, isSourceDecoraterShapesChanged, isTargetDecoraterShapesChanged, isBorderDashArrayChanged);\n          // eslint-disable-next-line max-len\n          this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Line properties change', '', clonedObject, redoClonedObject);\n        }\n        // eslint-disable-next-line max-len\n        if (annotation.type === 'Shape' || annotation.shapeAnnotationType === 'Line' || annotation.shapeAnnotationType === 'Square' || annotation.shapeAnnotationType === 'Circle' || annotation.shapeAnnotationType === 'Polygon') {\n          annotationType = 'shape';\n        }\n        if (annotation.type === 'Ink' || annotation.shapeAnnotationType === 'Ink') {\n          annotationType = 'ink';\n        }\n        // eslint-disable-next-line max-len\n        if (annotation.type === 'Measure' || annotation.indent === 'LineDimension' || annotation.indent === 'PolyLineDimension' || annotation.indent === 'PolygonDimension' || annotation.indent === 'PolygonRadius' || annotation.indent === 'PolygonVolume') {\n          annotationType = 'shape_measure';\n        }\n        if (annotation.labelSettings && this.pdfViewer.enableShapeLabel) {\n          this.updateFreeTextProperties(currentAnnotation);\n          this.pdfViewer.nodePropertyChange(currentAnnotation, {\n            // eslint-disable-next-line max-len\n            labelOpacity: annotation.labelSettings.opacity,\n            fontColor: annotation.labelSettings.fontColor,\n            fontSize: annotation.labelSettings.fontSize,\n            fontFamily: annotation.labelSettings.fontFamily,\n            labelContent: currentAnnotation.notes,\n            labelFillColor: annotation.labelSettings.fillColor\n          });\n        }\n        if (this.pdfViewer.enableShapeLabel && annotation.calibrate && annotation.calibrate.depth) {\n          if (this.pdfViewer.annotationModule.measureAnnotationModule.volumeDepth !== annotation.calibrate.depth) {\n            this.pdfViewer.annotationModule.measureAnnotationModule.volumeDepth = annotation.calibrate.depth;\n            // eslint-disable-next-line max-len\n            currentAnnotation.notes = this.pdfViewer.annotationModule.measureAnnotationModule.calculateVolume(currentAnnotation.vertexPoints, currentAnnotation.id, currentAnnotation.pageIndex);\n            currentAnnotation.labelContent = currentAnnotation.notes;\n            if (annotation.labelSettings && annotation.labelSettings.labelContent) {\n              annotation.labelSettings.labelContent = currentAnnotation.notes;\n            }\n            this.pdfViewer.nodePropertyChange(currentAnnotation, {\n              labelContent: currentAnnotation.labelContent\n            });\n            // eslint-disable-next-line max-len\n            this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addTextToComments(currentAnnotation.annotName, currentAnnotation.notes);\n          }\n        }\n      } else if (annotation.type === 'FreeText' || annotation.shapeAnnotationType === 'FreeText') {\n        annotationType = 'freetext';\n        if (this.pdfViewer.freeTextSettings.enableAutoFit && currentAnnotation.dynamicText !== annotation.content) {\n          // eslint-disable-next-line\n          var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + currentAnnotation.pageIndex);\n          var context = canvas.getContext(\"2d\");\n          var fontSize = annotation.fontSize;\n          var font = void 0;\n          var fontFamily = annotation.fontFamily;\n          var zoomFactor = this.pdfViewerBase.getZoomFactor();\n          // eslint-disable-next-line\n          annotation.font.isBold ? font = 'bold' + ' ' + fontSize + 'px' + ' ' + fontFamily : font = fontSize + 'px' + ' ' + fontFamily;\n          context.font = font;\n          var characterLength = 8;\n          var highestTextNode = \"\";\n          // eslint-disable-next-line\n          var textNodes = [];\n          var textboxValue = annotation.content ? annotation.content : annotation.dynamicText;\n          if (textboxValue.indexOf('\\n') > -1) {\n            textNodes = textboxValue.split('\\n');\n            for (var j = 0; j < textNodes.length; j++) {\n              // eslint-disable-next-line\n              var textNodeData = context.measureText(textNodes[j]);\n              // eslint-disable-next-line\n              var highestTextNodeData = context.measureText(highestTextNode);\n              if (textNodeData.width > highestTextNodeData.width) {\n                highestTextNode = textNodes[j];\n              }\n            }\n          } else {\n            highestTextNode = textboxValue;\n          }\n          // eslint-disable-next-line\n          var textwidth = context.measureText(highestTextNode);\n          annotation.bounds.width = Math.ceil(textwidth.width + (characterLength + 1) * 2);\n          var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + annotation.pageIndex);\n          var maxWidth = pageDiv.clientWidth - annotation.bounds.left * zoomFactor;\n          if (annotation.bounds.width > maxWidth) {\n            annotation.bounds.width = maxWidth / zoomFactor;\n          }\n          var height = annotation.bounds.height;\n          annotation.bounds.height = height >= currentAnnotation.bounds.height ? height : currentAnnotation.bounds.height;\n        }\n        this.calculateAnnotationBounds(currentAnnotation, annotation);\n        if (annotation.opacity && currentAnnotation.opacity !== annotation.opacity) {\n          this.triggerAnnotationPropChange(currentAnnotation, false, false, false, true);\n        }\n        if (annotation.fillColor && currentAnnotation.fillColor !== annotation.fillColor) {\n          this.triggerAnnotationPropChange(currentAnnotation, true, false, false, false);\n        }\n        if (annotation.strokeColor && currentAnnotation.strokeColor !== annotation.strokeColor) {\n          this.triggerAnnotationPropChange(currentAnnotation, false, true, false, false);\n        }\n        if (annotation.thickness && currentAnnotation.thickness !== annotation.thickness) {\n          this.triggerAnnotationPropChange(currentAnnotation, false, false, true, false);\n        }\n        var isCurrentAnnotationLock = currentAnnotation.isLock;\n        if (!isNullOrUndefined(annotation.isLock)) {\n          isCurrentAnnotationLock = annotation.isLock;\n        } else if (!isNullOrUndefined(annotation.annotationSettings.isLock)) {\n          isCurrentAnnotationLock = annotation.annotationSettings.isLock;\n        }\n        currentAnnotation.annotationSettings.isLock = isCurrentAnnotationLock;\n        currentAnnotation.isLock = isCurrentAnnotationLock;\n        annotation.content = annotation.content && annotation.content === annotation.dynamicText ? annotation.content : annotation.dynamicText;\n        if (annotation.content && currentAnnotation.dynamicText !== annotation.content) {\n          this.triggerAnnotationPropChange(currentAnnotation, false, false, false, false, false, false, false, true, currentAnnotation.dynamicText, annotation.content);\n        }\n        this.pdfViewer.nodePropertyChange(currentAnnotation, {\n          // eslint-disable-next-line max-len\n          opacity: annotation.opacity,\n          fontColor: annotation.fontColor,\n          fontSize: annotation.fontSize,\n          fontFamily: annotation.fontFamily,\n          // eslint-disable-next-line max-len\n          dynamicText: annotation.content,\n          fillColor: annotation.fillColor,\n          textAlign: annotation.textAlign,\n          strokeColor: annotation.strokeColor,\n          thickness: annotation.thickness,\n          font: annotation.fontStyle ? this.setFreeTextFontStyle(annotation.fontStyle) : this.setFreeTextFontStyle(annotation.font),\n          isReadonly: annotation.isReadonly\n        });\n        if (annotation.content && currentAnnotation) {\n          this.updateAnnotationComments(currentAnnotation.annotName, annotation.content);\n        }\n        // eslint-disable-next-line\n        var newCommentDiv = document.getElementById(this.pdfViewer.element.id + '_commenttextbox_editor');\n        // eslint-disable-next-line\n        var commentObj = new InPlaceEditor({\n          value: annotation.content\n        });\n        commentObj.appendTo(newCommentDiv);\n      }\n      currentAnnotation.modifiedDate = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n      if (currentAnnotation.customData !== annotation.customData) {\n        currentAnnotation.customData = annotation.customData;\n      }\n      currentAnnotation.isPrint = annotation.isPrint;\n      if (annotation.type !== 'TextMarkup') {\n        this.pdfViewer.renderDrawing();\n        this.updateCollection(annotationId, pageNumber, annotation, annotationType);\n      }\n    }\n  };\n  // eslint-disable-next-line\n  Annotation.prototype.annotationPropertyChange = function (currentAnnotation, opacity, actionString, clonedObject, redoClonedObject) {\n    this.pdfViewer.nodePropertyChange(currentAnnotation, {\n      opacity: opacity\n    });\n    this.triggerAnnotationPropChange(currentAnnotation, false, false, false, true);\n    // eslint-disable-next-line max-len\n    this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, actionString, '', clonedObject, redoClonedObject);\n  };\n  // eslint-disable-next-line\n  Annotation.prototype.calculateAnnotationBounds = function (currentAnnotation, annotation) {\n    // eslint-disable-next-line\n    var bounds = this.pdfViewerBase.convertBounds(currentAnnotation.wrapper.bounds);\n    // eslint-disable-next-line\n    var annotBounds = this.pdfViewerBase.convertBounds(annotation.bounds);\n    if (bounds && annotBounds) {\n      // eslint-disable-next-line\n      if (JSON.stringify(bounds) !== JSON.stringify(annotBounds) && Math.abs(bounds.Y - annotBounds.Y) > 2 || Math.abs(bounds.X - annotBounds.X) > 2 || Math.abs(bounds.Width - annotBounds.Width) > 2 || Math.abs(bounds.Height - annotBounds.Height) > 2) {\n        // eslint-disable-next-line\n        var annotationBounds = {\n          x: annotBounds.X + annotBounds.Width / 2,\n          y: annotBounds.Y + annotBounds.Height / 2,\n          width: annotBounds.Width,\n          height: annotBounds.Height\n        };\n        this.pdfViewer.nodePropertyChange(currentAnnotation, {\n          bounds: annotationBounds\n        });\n        this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID);\n        this.triggerAnnotationPropChange(currentAnnotation, false, false, false, false);\n      }\n    }\n  };\n  /**\n   * @param annotation\n   * @private\n   */\n  // eslint-disable-next-line\n  Annotation.prototype.updateFreeTextProperties = function (annotation) {\n    if (annotation.labelSettings) {\n      if (annotation.labelSettings.fillColor) {\n        annotation.labelFillColor = annotation.labelSettings.fillColor;\n      }\n      if (annotation.labelSettings.fontColor) {\n        annotation.fontColor = annotation.labelSettings.fontColor;\n      }\n      if (annotation.labelSettings.fontSize) {\n        annotation.fontSize = annotation.labelSettings.fontSize;\n      }\n      if (annotation.labelSettings.fontFamily) {\n        annotation.fontFamily = annotation.labelSettings.fontFamily;\n      }\n      if (annotation.labelSettings.opacity) {\n        annotation.labelOpacity = annotation.labelSettings.opacity;\n      }\n      if (annotation.labelSettings.labelContent) {\n        annotation.labelContent = annotation.labelSettings.labelContent;\n      }\n    }\n  };\n  Annotation.prototype.updateAnnotationComments = function (annotationId, noteContent) {\n    // eslint-disable-next-line\n    var commentsDiv = document.getElementById(annotationId);\n    if (commentsDiv && commentsDiv.childNodes) {\n      if (commentsDiv.childNodes[0].ej2_instances) {\n        commentsDiv.childNodes[0].ej2_instances[0].value = noteContent;\n      } else if (commentsDiv.childNodes[0].childNodes && commentsDiv.childNodes[0].childNodes[1].ej2_instances) {\n        commentsDiv.childNodes[0].childNodes[1].ej2_instances[0].value = noteContent;\n      }\n    }\n  };\n  /**\n   * @param annotation\n   * @param currentAnnotation\n   * @private\n   */\n  // eslint-disable-next-line\n  Annotation.prototype.addFreeTextProperties = function (annotation, currentAnnotation) {\n    if (this.pdfViewer.enableShapeLabel && annotation && currentAnnotation) {\n      currentAnnotation.labelSettings = {\n        fontColor: annotation.fontColor,\n        fontSize: annotation.fontSize,\n        fontFamily: annotation.fontFamily,\n        opacity: annotation.labelOpacity,\n        labelContent: annotation.labelContent,\n        fillColor: annotation.labelFillColor\n      };\n    }\n  };\n  Annotation.prototype.updateMeasurementSettings = function () {\n    if (this.pdfViewer.enableAnnotation && this.pdfViewer.enableMeasureAnnotation) {\n      // eslint-disable-next-line max-len\n      var ratioString = '1 ' + this.pdfViewer.measurementSettings.conversionUnit + ' = ' + this.pdfViewer.measurementSettings.scaleRatio + ' ' + this.pdfViewer.measurementSettings.displayUnit;\n      this.measureAnnotationModule.updateMeasureValues(ratioString, this.pdfViewer.measurementSettings.displayUnit, this.pdfViewer.measurementSettings.conversionUnit, this.pdfViewer.measurementSettings.depth);\n    }\n  };\n  // eslint-disable-next-line\n  Annotation.prototype.updateCollection = function (annotationId, pageNumber, annotation, annotationType) {\n    // eslint-disable-next-line\n    var annotationCollection;\n    // eslint-disable-next-line\n    var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_' + annotationType);\n    if (this.pdfViewerBase.isStorageExceed) {\n      storeObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_' + annotationType];\n    }\n    if (storeObject) {\n      var annotObject = JSON.parse(storeObject);\n      var index = this.getPageCollection(annotObject, pageNumber);\n      if (annotObject[index]) {\n        annotationCollection = annotObject[index].annotations;\n        if (annotationCollection !== null) {\n          for (var i = 0; i < annotationCollection.length; i++) {\n            if (annotationCollection[i].annotName === annotationId) {\n              // eslint-disable-next-line\n              var newAnnot = this.modifyAnnotationProperties(annotationCollection[i], annotation, annotationType);\n              annotationCollection[i] = newAnnot;\n            }\n          }\n          if (!this.pdfViewerBase.isStorageExceed) {\n            window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_' + annotationType);\n          }\n          if (annotObject[index]) {\n            annotObject[index].annotations = annotationCollection;\n          }\n          var annotationStringified = JSON.stringify(annotObject);\n          if (this.pdfViewerBase.isStorageExceed) {\n            // eslint-disable-next-line max-len\n            this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_' + annotationType] = annotationStringified;\n          } else {\n            // eslint-disable-next-line max-len\n            window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_' + annotationType, annotationStringified);\n          }\n        }\n      }\n    }\n  };\n  // eslint-disable-next-line\n  Annotation.prototype.modifyAnnotationProperties = function (newAnnotation, annotation, annotationType) {\n    if (annotation && annotation.isCommentLock === true) {\n      newAnnotation.isCommentLock = annotation.isCommentLock;\n    }\n    if (annotation.comments) {\n      for (var j = 0; j < annotation.comments.length; j++) {\n        if (!isNullOrUndefined(annotation.comments[j].isLock)) {\n          newAnnotation.comments[j].isLock = annotation.comments[j].isLock;\n        }\n      }\n    }\n    if (annotation && annotation.note !== '' && annotation.note !== undefined) {\n      newAnnotation.note = annotation.note;\n    }\n    if (annotation.commentId && annotation.editComment && annotation.commentType === 'edit') {\n      // eslint-disable-next-line\n      var commentDiv = document.getElementById(annotation.commentId);\n      if (annotation.annotationId === annotation.commentId) {\n        newAnnotation.note = commentDiv.childNodes[1].ej2_instances[0].value;\n      }\n      for (var j = 0; j < annotation.comments.length; j++) {\n        if (annotation.comments[j].annotName === annotation.commentId) {\n          newAnnotation.comments[j].note = commentDiv.childNodes[1].ej2_instances[0].value;\n        }\n      }\n    }\n    if (annotationType === 'textMarkup') {\n      newAnnotation.opacity = annotation.opacity;\n      newAnnotation.color = annotation.color;\n      newAnnotation.allowedInteractions = annotation.allowedInteractions;\n    } else if (annotationType === 'sticky' || annotationType === 'stamp') {\n      if (annotation.bounds) {\n        newAnnotation.bounds = annotation.bounds;\n      }\n      newAnnotation.opacity = annotation.opacity;\n      newAnnotation.annotationSettings = annotation.annotationSettings;\n      newAnnotation.allowedInteractions = annotation.allowedInteractions;\n      if (annotation.stampAnnotationPath) {\n        newAnnotation.stampAnnotationPath = annotation.stampAnnotationPath;\n      }\n    } else if (annotationType === 'ink') {\n      if (annotation.bounds) {\n        newAnnotation.bounds = annotation.bounds;\n      }\n      newAnnotation.opacity = annotation.opacity;\n      newAnnotation.strokeColor = annotation.strokeColor;\n      newAnnotation.thickness = annotation.thickness;\n      newAnnotation.annotationSettings = annotation.annotationSettings;\n      newAnnotation.allowedInteractions = annotation.allowedInteractions;\n    } else if (annotationType === 'shape' || annotationType === 'shape_measure') {\n      if (annotation.subType === 'Line' || annotation.subType === 'Arrow' || annotation.subType === 'Distance' || annotation.subType === 'Perimeter') {\n        if (annotation.bounds) {\n          newAnnotation.bounds = annotation.bounds;\n        }\n        if (annotation.vertexPoints) {\n          newAnnotation.vertexPoints = annotation.vertexPoints;\n        }\n        newAnnotation.opacity = annotation.opacity;\n        newAnnotation.fillColor = annotation.fillColor;\n        newAnnotation.strokeColor = annotation.strokeColor;\n        newAnnotation.thickness = annotation.thickness;\n        newAnnotation.borderDashArray = annotation.borderDashArray;\n        newAnnotation.lineHeadStart = this.getArrowTypeForCollection(annotation.lineHeadStartStyle);\n        newAnnotation.lineHeadEnd = this.getArrowTypeForCollection(annotation.lineHeadEndStyle);\n        newAnnotation.annotationSettings = annotation.annotationSettings;\n        newAnnotation.allowedInteractions = annotation.allowedInteractions;\n      } else {\n        if (annotation.bounds) {\n          newAnnotation.bounds = annotation.bounds;\n        }\n        if (annotation.vertexPoints) {\n          newAnnotation.vertexPoints = annotation.vertexPoints;\n        }\n        newAnnotation.opacity = annotation.opacity;\n        newAnnotation.fillColor = annotation.fillColor;\n        newAnnotation.strokeColor = annotation.strokeColor;\n        newAnnotation.thickness = annotation.thickness;\n        newAnnotation.annotationSettings = annotation.annotationSettings;\n        newAnnotation.allowedInteractions = annotation.allowedInteractions;\n        if (annotation.calibrate) {\n          if (newAnnotation.annotName === annotation.annotationId) {\n            if (newAnnotation.calibrate.depth !== annotation.calibrate.depth) {\n              newAnnotation.calibrate.depth = annotation.calibrate.depth;\n              this.pdfViewer.annotationModule.measureAnnotationModule.volumeDepth = annotation.calibrate.depth;\n              // eslint-disable-next-line max-len\n              newAnnotation.note = this.pdfViewer.annotationModule.measureAnnotationModule.calculateVolume(newAnnotation.vertexPoints);\n            }\n          }\n        }\n      }\n      if (this.pdfViewer.enableShapeLabel && annotation.labelSettings) {\n        var text = annotation.labelSettings.labelContent;\n        newAnnotation.note = text;\n        newAnnotation.fontSize = annotation.labelSettings.fontSize;\n        newAnnotation.labelFillColor = annotation.labelSettings.fillColor;\n        if (newAnnotation.labelContent) {\n          newAnnotation.labelContent = text;\n        }\n        if (newAnnotation.labelSettings) {\n          newAnnotation.labelSettings = annotation.labelSettings;\n        }\n        this.updateAnnotationComments(newAnnotation.annotName, text);\n      }\n    } else if (annotationType === 'freetext') {\n      if (annotation.bounds) {\n        newAnnotation.bounds = annotation.bounds;\n      }\n      newAnnotation.opacity = annotation.opacity;\n      newAnnotation.strokeColor = annotation.strokeColor;\n      newAnnotation.thickness = annotation.thickness;\n      if (annotation.content) {\n        newAnnotation.dynamicText = annotation.content;\n      }\n      newAnnotation.fontFamily = annotation.fontFamily;\n      newAnnotation.fontSize = annotation.fontSize;\n      newAnnotation.fontColor = annotation.fontColor;\n      newAnnotation.fillColor = annotation.fillColor;\n      newAnnotation.font = annotation.font ? annotation.font : annotation.fontStyle;\n      newAnnotation.textAlign = annotation.textAlign;\n      newAnnotation.annotationSettings = annotation.annotationSettings;\n      newAnnotation.allowedInteractions = annotation.allowedInteractions;\n      newAnnotation.isReadonly = annotation.isReadonly;\n    }\n    newAnnotation.customData = annotation.customData;\n    newAnnotation.subject = annotation.subject;\n    newAnnotation.modifiedDate = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n    newAnnotation.isPrint = annotation.isPrint;\n    if (annotation.annotationSettings && !isNullOrUndefined(annotation.annotationSettings.isLock)) {\n      newAnnotation.isLocked = annotation.annotationSettings.isLock;\n    }\n    return newAnnotation;\n  };\n  /**\n   * @param annotationType\n   * @param annotationSubType\n   * @param annotationType\n   * @param annotationSubType\n   * @private\n   */\n  Annotation.prototype.updateAnnotationAuthor = function (annotationType, annotationSubType) {\n    var annotationAuthor;\n    if (annotationType === 'sticky') {\n      // eslint-disable-next-line max-len\n      annotationAuthor = this.pdfViewer.stickyNotesSettings.author !== 'Guest' ? this.pdfViewer.stickyNotesSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n    } else if (annotationType === 'stamp') {\n      // eslint-disable-next-line max-len\n      annotationAuthor = this.pdfViewer.stampSettings.author !== 'Guest' ? this.pdfViewer.stampSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n    } else if (annotationType === 'shape') {\n      if (annotationSubType === 'Line') {\n        // eslint-disable-next-line max-len\n        annotationAuthor = this.pdfViewer.lineSettings.author !== 'Guest' ? this.pdfViewer.lineSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n      } else if (annotationSubType === 'LineWidthArrowHead' || annotationSubType === 'Arrow') {\n        // eslint-disable-next-line max-len\n        annotationAuthor = this.pdfViewer.arrowSettings.author !== 'Guest' ? this.pdfViewer.arrowSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n      } else if (annotationSubType === 'Circle' || annotationSubType === 'Ellipse' || annotationSubType === 'Oval') {\n        // eslint-disable-next-line max-len\n        annotationAuthor = this.pdfViewer.circleSettings.author !== 'Guest' ? this.pdfViewer.circleSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n      } else if (annotationSubType === 'Rectangle' || annotationSubType === 'Square') {\n        // eslint-disable-next-line max-len\n        annotationAuthor = this.pdfViewer.rectangleSettings.author !== 'Guest' ? this.pdfViewer.rectangleSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n      } else if (annotationSubType === 'Polygon') {\n        // eslint-disable-next-line max-len\n        annotationAuthor = this.pdfViewer.polygonSettings.author !== 'Guest' ? this.pdfViewer.polygonSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n      }\n    } else if (annotationType === 'measure') {\n      if (annotationSubType === 'Distance' || annotationSubType === 'Distance calculation') {\n        // eslint-disable-next-line max-len\n        annotationAuthor = this.pdfViewer.distanceSettings.author !== 'Guest' ? this.pdfViewer.distanceSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n      } else if (annotationSubType === 'Perimeter' || annotationSubType === 'Perimeter calculation') {\n        // eslint-disable-next-line max-len\n        annotationAuthor = this.pdfViewer.perimeterSettings.author !== 'Guest' ? this.pdfViewer.perimeterSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n      } else if (annotationSubType === 'Radius' || annotationSubType === 'Radius calculation') {\n        // eslint-disable-next-line max-len\n        annotationAuthor = this.pdfViewer.radiusSettings.author !== 'Guest' ? this.pdfViewer.radiusSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n      } else if (annotationSubType === 'Area' || annotationSubType === 'Area calculation') {\n        // eslint-disable-next-line max-len\n        annotationAuthor = this.pdfViewer.areaSettings.author !== 'Guest' ? this.pdfViewer.areaSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n      } else if (annotationSubType === 'Volume' || annotationSubType === 'Volume calculation') {\n        // eslint-disable-next-line max-len\n        annotationAuthor = this.pdfViewer.volumeSettings.author !== 'Guest' ? this.pdfViewer.volumeSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n      }\n    } else if (annotationType === 'textMarkup') {\n      if (annotationSubType === 'Highlight') {\n        // eslint-disable-next-line max-len\n        annotationAuthor = this.pdfViewer.highlightSettings.author !== 'Guest' ? this.pdfViewer.highlightSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n      } else if (annotationSubType === 'Underline') {\n        // eslint-disable-next-line max-len\n        annotationAuthor = this.pdfViewer.underlineSettings.author !== 'Guest' ? this.pdfViewer.underlineSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n      } else if (annotationSubType === 'Strikethrough') {\n        // eslint-disable-next-line max-len\n        annotationAuthor = this.pdfViewer.strikethroughSettings.author !== 'Guest' ? this.pdfViewer.strikethroughSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n      } else {\n        // eslint-disable-next-line max-len\n        annotationAuthor = this.pdfViewer.annotationSettings.author;\n      }\n    } else if (annotationType === 'freeText') {\n      // eslint-disable-next-line max-len\n      annotationAuthor = this.pdfViewer.freeTextSettings.author !== 'Guest' ? this.pdfViewer.freeTextSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n    } else if (annotationType === 'ink') {\n      // eslint-disable-next-line max-len\n      annotationAuthor = this.pdfViewer.inkAnnotationSettings.author !== 'Guest' ? this.pdfViewer.inkAnnotationSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n    }\n    if (!annotationAuthor) {\n      // eslint-disable-next-line max-len\n      annotationAuthor = this.pdfViewer.annotationSettings.author;\n    }\n    return annotationAuthor;\n  };\n  /**\n   * @param colour\n   * @private\n   */\n  // eslint-disable-next-line\n  Annotation.prototype.nameToHash = function (colour) {\n    // eslint-disable-next-line\n    var colours = {\n      'aliceblue': '#f0f8ff',\n      'antiquewhite': '#faebd7',\n      'aqua': '#00ffff',\n      'aquamarine': '#7fffd4',\n      'azure': '#f0ffff',\n      'beige': '#f5f5dc',\n      'bisque': '#ffe4c4',\n      'black': '#000000',\n      'blanchedalmond': '#ffebcd',\n      'blue': '#0000ff',\n      'blueviolet': '#8a2be2',\n      'brown': '#a52a2a',\n      'burlywood': '#deb887',\n      'yellow': '#ffff00',\n      'yellowgreen': '#9acd32',\n      'cadetblue': '#5f9ea0',\n      'chartreuse': '#7fff00',\n      'chocolate': '#d2691e',\n      'coral': '#ff7f50',\n      'cornflowerblue': '#6495ed',\n      'cornsilk': '#fff8dc',\n      'crimson': '#dc143c',\n      'cyan': '#00ffff',\n      'darkblue': '#00008b',\n      'darkcyan': '#008b8b',\n      'darkgoldenrod': '#b8860b',\n      'darkgray': '#a9a9a9',\n      'darkred': '#8b0000',\n      'darksalmon': '#e9967a',\n      'darkgreen': '#006400',\n      'darkkhaki': '#bdb76b',\n      'darkmagenta': '#8b008b',\n      'darkolivegreen': '#556b2f',\n      'darkorange': '#ff8c00',\n      'darkorchid': '#9932cc',\n      'darkseagreen': '#8fbc8f',\n      'darkslateblue': '#483d8b',\n      'darkslategray': '#2f4f4f',\n      'darkturquoise': '#00ced1',\n      'darkviolet': '#9400d3',\n      'deeppink': '#ff1493',\n      'deepskyblue': '#00bfff',\n      'dimgray': '#696969',\n      'dodgerblue': '#1e90ff',\n      'firebrick': '#b22222',\n      'floralwhite': '#fffaf0',\n      'forestgreen': '#228b22',\n      'fuchsia': '#ff00ff',\n      'gainsboro': '#dcdcdc',\n      'ghostwhite': '#f8f8ff',\n      'gold': '#ffd700',\n      'goldenrod': '#daa520',\n      'gray': '#808080',\n      'green': '#008000',\n      'greenyellow': '#adff2f',\n      'honeydew': '#f0fff0',\n      'hotpink': '#ff69b4',\n      'indianred ': '#cd5c5c',\n      'mediumorchid': '#ba55d3',\n      'mediumpurple': '#9370d8',\n      'indigo': '#4b0082',\n      'ivory': '#fffff0',\n      'navy': '#000080',\n      'oldlace': '#fdf5e6',\n      'olive': '#808000',\n      'khaki': '#f0e68c',\n      'lavender': '#e6e6fa',\n      'lavenderblush': '#fff0f5',\n      'lawngreen': '#7cfc00',\n      'lemonchiffon': '#fffacd',\n      'lightblue': '#add8e6',\n      'lightcoral': '#f08080',\n      'lightcyan': '#e0ffff',\n      'lightgoldenrodyellow': '#fafad2',\n      'lightgrey': '#d3d3d3',\n      'lightgreen': '#90ee90',\n      'lightpink': '#ffb6c1',\n      'lightsalmon': '#ffa07a',\n      'lightseagreen': '#20b2aa',\n      'lightskyblue': '#87cefa',\n      'lightslategray': '#778899',\n      'lightsteelblue': '#b0c4de',\n      'lightyellow': '#ffffe0',\n      'lime': '#00ff00',\n      'limegreen': '#32cd32',\n      'linen': '#faf0e6',\n      'magenta': '#ff00ff',\n      'maroon': '#800000',\n      'mediumaquamarine': '#66cdaa',\n      'mediumblue': '#0000cd',\n      'mediumseagreen': '#3cb371',\n      'mediumslateblue': '#7b68ee',\n      'mediumspringgreen': '#00fa9a',\n      'mediumturquoise': '#48d1cc',\n      'mediumvioletred': '#c71585',\n      'midnightblue': '#191970',\n      'mintcream': '#f5fffa',\n      'mistyrose': '#ffe4e1',\n      'moccasin': '#ffe4b5',\n      'navajowhite': '#ffdead',\n      'rebeccapurple': '#663399',\n      'red': '#ff0000',\n      'rosybrown': '#bc8f8f',\n      'royalblue': '#4169e1',\n      'olivedrab': '#6b8e23',\n      'orange': '#ffa500',\n      'orangered': '#ff4500',\n      'orchid': '#da70d6',\n      'palegoldenrod': '#eee8aa',\n      'palegreen': '#98fb98',\n      'paleturquoise': '#afeeee',\n      'palevioletred': '#d87093',\n      'papayawhip': '#ffefd5',\n      'peachpuff': '#ffdab9',\n      'peru': '#cd853f',\n      'wheat': '#f5deb3',\n      'white': '#ffffff',\n      'whitesmoke': '#f5f5f5',\n      'pink': '#ffc0cb',\n      'plum': '#dda0dd',\n      'steelblue': '#4682b4',\n      'violet': '#ee82ee',\n      'powderblue': '#b0e0e6',\n      'purple': '#800080',\n      'saddlebrown': '#8b4513',\n      'salmon': '#fa8072',\n      'sandybrown': '#f4a460',\n      'seagreen': '#2e8b57',\n      'seashell': '#fff5ee',\n      'sienna': '#a0522d',\n      'silver': '#c0c0c0',\n      'skyblue': '#87ceeb',\n      'slateblue': '#6a5acd',\n      'slategray': '#708090',\n      'snow': '#fffafa',\n      'springgreen': '#00ff7f',\n      'tan': '#d2b48c',\n      'teal': '#008080',\n      'thistle': '#d8bfd8',\n      'tomato': '#ff6347',\n      'turquoise': '#40e0d0'\n    };\n    if (typeof colours[colour.toLowerCase()] !== 'undefined') {\n      return colours[colour.toLowerCase()];\n    }\n    return '';\n  };\n  // eslint-disable-next-line\n  Annotation.prototype.updateFreeTextFontStyle = function (font) {\n    // eslint-disable-next-line\n    var fontStyle = 0;\n    if (font.isBold === 1) {\n      fontStyle = 1;\n    } else if (font.isItalic === 2) {\n      fontStyle = 2;\n    } else if (font.isUnderline === 4) {\n      fontStyle = 4;\n    } else if (font.isStrikeout === 8) {\n      fontStyle = 8;\n    } else {\n      fontStyle = {\n        isBold: font.isBold,\n        isItalic: font.isItalic,\n        isUnderline: font.isUnderline,\n        isStrikeout: font.isStrikeout\n      };\n    }\n    return fontStyle;\n  };\n  // eslint-disable-next-line\n  Annotation.prototype.setFreeTextFontStyle = function (fontStyle) {\n    if (fontStyle === 1) {\n      return {\n        isBold: true\n      };\n    } else if (fontStyle === 2) {\n      return {\n        isItalic: true\n      };\n    } else if (fontStyle === 4) {\n      return {\n        isUnderline: true\n      };\n    } else if (fontStyle === 8) {\n      return {\n        isStrikeout: true\n      };\n    } else {\n      return {\n        isBold: fontStyle.isBold,\n        isItalic: fontStyle.isItalic,\n        isUnderline: fontStyle.isUnderline,\n        isStrikeout: fontStyle.isStrikeout\n      };\n    }\n  };\n  /**\n   * @param annotation\n   * @param isSettings\n   * @private\n   */\n  // eslint-disable-next-line\n  Annotation.prototype.findAnnotationSettings = function (annotation, isSettings) {\n    // eslint-disable-next-line\n    var annotSettings = this.pdfViewer.annotationSettings;\n    if (annotation) {\n      // eslint-disable-next-line\n      var shapeType = annotation.shapeAnnotationType;\n      if (shapeType === 'StickyNotes' && this.pdfViewer.stickyNotesSettings) {\n        annotSettings = this.pdfViewer.stickyNotesSettings;\n      } else if (shapeType === 'Stamp' || shapeType === 'Image') {\n        annotSettings = this.pdfViewer.stampSettings;\n        // eslint-disable-next-line max-len\n        if (shapeType === 'image' || shapeType === 'Image') {\n          annotSettings = this.pdfViewer.customStampSettings;\n        }\n      } else if (shapeType === 'FreeText') {\n        annotSettings = this.pdfViewer.freeTextSettings;\n      } else if (annotation.measureType === '') {\n        if (shapeType === 'Line') {\n          annotSettings = this.pdfViewer.lineSettings;\n          // eslint-disable-next-line max-len\n        } else if (shapeType === 'Arrow' || shapeType === 'LineWidthArrowHead') {\n          annotSettings = this.pdfViewer.arrowSettings;\n        } else if (shapeType === 'Rectangle') {\n          annotSettings = this.pdfViewer.rectangleSettings;\n          // eslint-disable-next-line max-len\n        } else if (shapeType === 'Circle' || shapeType === 'Ellipse') {\n          annotSettings = this.pdfViewer.circleSettings;\n        } else if (shapeType === 'Polygon' && this.pdfViewer.polygonSettings) {\n          annotSettings = this.pdfViewer.polygonSettings;\n        }\n      } else if (annotation.measureType !== '') {\n        if (annotation.measureType === 'Distance') {\n          annotSettings = this.pdfViewer.distanceSettings;\n        } else if (annotation.measureType === 'Perimeter') {\n          annotSettings = this.pdfViewer.perimeterSettings;\n        } else if (annotation.measureType === 'Area') {\n          annotSettings = this.pdfViewer.areaSettings;\n        } else if (annotation.measureType === 'Radius') {\n          annotSettings = this.pdfViewer.radiusSettings;\n        } else if (annotation.measureType === 'Volume') {\n          annotSettings = this.pdfViewer.volumeSettings;\n        }\n      }\n    }\n    var settings = annotation ? annotation.annotationSettings : {};\n    if (settings && (settings.minWidth || settings.maxWidth || settings.minHeight || settings.maxHeight)) {\n      return this.updateSettings(settings);\n    } else if (isSettings) {\n      return this.updateSettings(annotSettings);\n    } else {\n      return annotSettings;\n    }\n  };\n  /**\n   * @param annotation\n   * @private\n   */\n  // eslint-disable-next-line\n  Annotation.prototype.updateAnnotationSettings = function (annotation) {\n    // eslint-disable-next-line\n    var annotSettings = this.pdfViewer.annotationSettings;\n    if (annotation.AnnotType === 'sticky') {\n      annotSettings = this.pdfViewer.stickyNotesSettings;\n    } else if (annotation.AnnotType === 'stamp' || annotation.AnnotType === 'image' || annotation.AnnotType === 'Image') {\n      annotSettings = this.pdfViewer.stampSettings;\n      // eslint-disable-next-line max-len\n      if (annotation.Subject === 'image' || annotation.Subject === 'Image') {\n        annotSettings = this.pdfViewer.customStampSettings;\n      }\n    } else if (annotation.AnnotType === 'freeText') {\n      annotSettings = this.pdfViewer.freeTextSettings;\n    } else if (annotation.AnnotType === 'ink' || annotation.AnnotationType === 'Ink') {\n      annotSettings = this.pdfViewer.inkAnnotationSettings;\n    } else if (annotation.AnnotType === 'shape') {\n      if (annotation.Subject === 'Line') {\n        annotSettings = this.pdfViewer.lineSettings;\n        // eslint-disable-next-line max-len\n      } else if (annotation.Subject === 'Arrow' || annotation.Subject === 'LineWidthArrowHead') {\n        annotSettings = this.pdfViewer.arrowSettings;\n        // eslint-disable-next-line max-len\n      } else if (annotation.Subject === 'Rectangle' || annotation.Subject === 'Square') {\n        annotSettings = this.pdfViewer.rectangleSettings;\n        // eslint-disable-next-line max-len\n      } else if (annotation.Subject === 'Circle' || annotation.Subject === 'Ellipse' || annotation.Subject === 'Oval') {\n        annotSettings = this.pdfViewer.circleSettings;\n      } else if (annotation.Subject === 'Polygon') {\n        annotSettings = this.pdfViewer.polygonSettings;\n      }\n    } else if (annotation.AnnotType === 'shape_measure') {\n      // eslint-disable-next-line max-len\n      if (annotation.Subject === 'Distance' || annotation.Subject === 'Distance calculation') {\n        annotSettings = this.pdfViewer.distanceSettings;\n        // eslint-disable-next-line max-len\n      } else if (annotation.Subject === 'Perimeter' || annotation.Subject === 'Perimeter calculation') {\n        annotSettings = this.pdfViewer.perimeterSettings;\n        // eslint-disable-next-line max-len\n      } else if (annotation.Subject === 'Area' || annotation.Subject === 'Area calculation') {\n        annotSettings = this.pdfViewer.areaSettings;\n        // eslint-disable-next-line max-len\n      } else if (annotation.Subject === 'Radius' || annotation.Subject === 'Radius calculation') {\n        annotSettings = this.pdfViewer.radiusSettings;\n        // eslint-disable-next-line max-len\n      } else if (annotation.Subject === 'Volume' || annotation.Subject === 'Volume calculation') {\n        annotSettings = this.pdfViewer.volumeSettings;\n      }\n    }\n    return this.updateSettings(annotSettings);\n  };\n  /**\n   * @param annotationSettings\n   * @private\n   */\n  // eslint-disable-next-line\n  Annotation.prototype.updateSettings = function (annotationSettings) {\n    var maxHeight = 0;\n    var maxWidth = 0;\n    var minHeight = 0;\n    var minWidth = 0;\n    var isLock = false;\n    var isPrint = true;\n    // eslint-disable-next-line\n    var settings = this.pdfViewer.annotationSettings;\n    if (annotationSettings.minWidth || annotationSettings.maxWidth || annotationSettings.minHeight || annotationSettings.maxHeight) {\n      maxHeight = annotationSettings.maxHeight ? annotationSettings.maxHeight : 2000;\n      maxWidth = annotationSettings.maxWidth ? annotationSettings.maxWidth : 2000;\n      minHeight = annotationSettings.minHeight ? annotationSettings.minHeight : 0;\n      minWidth = annotationSettings.minWidth ? annotationSettings.minWidth : 0;\n    } else if (settings.minWidth || settings.maxWidth || settings.minHeight || settings.maxHeight) {\n      maxHeight = settings.maxHeight ? settings.maxHeight : 2000;\n      maxWidth = settings.maxWidth ? settings.maxWidth : 2000;\n      minHeight = settings.minHeight ? settings.minHeight : 0;\n      minWidth = settings.minWidth ? settings.minWidth : 0;\n    }\n    isLock = annotationSettings.isLock ? annotationSettings.isLock : settings.isLock ? settings.isLock : false;\n    isPrint = annotationSettings.isPrint;\n    return {\n      minWidth: minWidth,\n      maxWidth: maxWidth,\n      minHeight: minHeight,\n      maxHeight: maxHeight,\n      isLock: isLock,\n      isPrint: isPrint\n    };\n  };\n  // eslint-disable-next-line\n  Annotation.prototype.getOverlappedAnnotations = function (annotation, pageNumber) {\n    // eslint-disable-next-line\n    var pageCollections = this.getPageShapeAnnotations(pageNumber);\n    // eslint-disable-next-line\n    var selectedAnnotation;\n    for (var i = 0; i < pageCollections.length; i++) {\n      if (annotation.annotName === pageCollections[i].annotName) {\n        selectedAnnotation = pageCollections[i];\n        break;\n      }\n    }\n    // eslint-disable-next-line\n    var annotationCollection = this.findOverlappedAnnotations(selectedAnnotation, pageCollections);\n    return annotationCollection;\n  };\n  // eslint-disable-next-line\n  Annotation.prototype.getPageShapeAnnotations = function (pageNumber) {\n    // eslint-disable-next-line\n    var pageCollections = [];\n    // eslint-disable-next-line\n    var inkObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_ink');\n    if (inkObject) {\n      var inkAnnotObject = JSON.parse(inkObject);\n      if (inkAnnotObject) {\n        var index = this.getPageCollection(inkAnnotObject, pageNumber);\n        if (inkAnnotObject[index]) {\n          // eslint-disable-next-line\n          var inkAnnotations = inkAnnotObject[index].annotations;\n          if (inkAnnotations && inkAnnotations.length > 0) {\n            for (var i = 0; i < inkAnnotations.length; i++) {\n              pageCollections.push(inkAnnotations[i]);\n            }\n          }\n        }\n      }\n    }\n    // eslint-disable-next-line\n    var shapeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_shape');\n    if (shapeObject) {\n      var shapeAnnotObject = JSON.parse(shapeObject);\n      if (shapeAnnotObject) {\n        var index = this.getPageCollection(shapeAnnotObject, pageNumber);\n        if (shapeAnnotObject[index]) {\n          // eslint-disable-next-line\n          var shapeAnnotations = shapeAnnotObject[index].annotations;\n          if (shapeAnnotations && shapeAnnotations.length > 0) {\n            for (var i = 0; i < shapeAnnotations.length; i++) {\n              pageCollections.push(shapeAnnotations[i]);\n            }\n          }\n        }\n      }\n    }\n    // eslint-disable-next-line\n    var measureObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_shape_measure');\n    if (measureObject) {\n      var measureAnnotationObject = JSON.parse(measureObject);\n      if (measureAnnotationObject) {\n        var index = this.getPageCollection(measureAnnotationObject, pageNumber);\n        if (measureAnnotationObject[index]) {\n          // eslint-disable-next-line\n          var measureAnnotations = measureAnnotationObject[index].annotations;\n          if (measureAnnotations && measureAnnotations.length > 0) {\n            for (var i = 0; i < measureAnnotations.length; i++) {\n              pageCollections.push(measureAnnotations[i]);\n            }\n          }\n        }\n      }\n    }\n    // eslint-disable-next-line\n    var stampObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_stamp');\n    if (stampObject) {\n      var stampAnnotationObject = JSON.parse(stampObject);\n      if (stampAnnotationObject) {\n        var index = this.getPageCollection(stampAnnotationObject, pageNumber);\n        if (stampAnnotationObject[index]) {\n          // eslint-disable-next-line\n          var stampAnnotations = stampAnnotationObject[index].annotations;\n          if (stampAnnotations && stampAnnotations.length > 0) {\n            for (var i = 0; i < stampAnnotations.length; i++) {\n              pageCollections.push(stampAnnotations[i]);\n            }\n          }\n        }\n      }\n    }\n    // eslint-disable-next-line\n    var freeTextObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_freetext');\n    if (freeTextObject) {\n      var freeTextAnnotationObject = JSON.parse(freeTextObject);\n      if (freeTextAnnotationObject) {\n        var index = this.getPageCollection(freeTextAnnotationObject, pageNumber);\n        if (freeTextAnnotationObject[index]) {\n          // eslint-disable-next-line\n          var freeTextAnnotations = freeTextAnnotationObject[index].annotations;\n          if (freeTextAnnotations && freeTextAnnotations.length > 0) {\n            for (var i = 0; i < freeTextAnnotations.length; i++) {\n              pageCollections.push(freeTextAnnotations[i]);\n            }\n          }\n        }\n      }\n    }\n    // eslint-disable-next-line\n    var stickyObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_sticky');\n    if (stickyObject) {\n      var stickyNotesAnnotationObject = JSON.parse(stickyObject);\n      if (stickyNotesAnnotationObject) {\n        var index = this.getPageCollection(stickyNotesAnnotationObject, pageNumber);\n        if (stickyNotesAnnotationObject[index]) {\n          // eslint-disable-next-line\n          var stickyNotesAnnotations = stickyNotesAnnotationObject[index].annotations;\n          if (stickyNotesAnnotations && stickyNotesAnnotations.length > 0) {\n            for (var i = 0; i < stickyNotesAnnotations.length; i++) {\n              pageCollections.push(stickyNotesAnnotations[i]);\n            }\n          }\n        }\n      }\n    }\n    // eslint-disable-next-line\n    var textMarkupObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');\n    if (textMarkupObject) {\n      var textMarkupAnnotationObject = JSON.parse(textMarkupObject);\n      if (textMarkupAnnotationObject) {\n        var index = this.getPageCollection(textMarkupAnnotationObject, pageNumber);\n        if (textMarkupAnnotationObject[index]) {\n          // eslint-disable-next-line\n          var textMarkupAnnotations = textMarkupAnnotationObject[index].annotations;\n          if (textMarkupAnnotations && textMarkupAnnotations.length > 0) {\n            for (var i = 0; i < textMarkupAnnotations.length; i++) {\n              pageCollections.push(textMarkupAnnotations[i]);\n            }\n          }\n        }\n      }\n    }\n    return pageCollections;\n  };\n  // eslint-disable-next-line\n  Annotation.prototype.findOverlappedAnnotations = function (annotation, pageCollections) {\n    this.overlappedAnnotations = [];\n    if (annotation && annotation.bounds) {\n      if (annotation.shapeAnnotationType === 'textMarkup') {\n        for (var i = 0; i < annotation.bounds.length; i++) {\n          // eslint-disable-next-line\n          var bounds = this.orderTextMarkupBounds(annotation.bounds[i]);\n          this.calculateOverlappedAnnotationBounds(annotation, bounds, pageCollections);\n        }\n      } else {\n        this.calculateOverlappedAnnotationBounds(annotation, annotation.bounds, pageCollections);\n      }\n    }\n    return this.overlappedAnnotations;\n  };\n  // eslint-disable-next-line\n  Annotation.prototype.calculateOverlappedAnnotationBounds = function (annotation, bounds, pageCollections) {\n    // eslint-disable-next-line\n    var selectBounds = bounds;\n    if (annotation.shapeAnnotationType === 'Ink') {\n      selectBounds = {\n        left: bounds.x,\n        top: bounds.y,\n        height: bounds.height,\n        width: bounds.width\n      };\n    }\n    // eslint-disable-next-line\n    var left = parseInt(selectBounds.left);\n    // eslint-disable-next-line\n    var top = parseInt(selectBounds.top);\n    // eslint-disable-next-line\n    var totalHeight = parseInt(selectBounds.top + selectBounds.height);\n    // eslint-disable-next-line\n    var totalWidth = parseInt(selectBounds.left + selectBounds.width);\n    for (var i = 0; i < pageCollections.length; i++) {\n      if (annotation.annotName === pageCollections[i].annotName) {\n        this.checkOverlappedCollections(pageCollections[i], this.overlappedAnnotations);\n      } else {\n        var boundsCount = 1;\n        if (pageCollections[i].shapeAnnotationType === 'textMarkup') {\n          boundsCount = pageCollections[i].bounds.length;\n        }\n        for (var j = 0; j < boundsCount; j++) {\n          // eslint-disable-next-line\n          var annotationBounds = void 0;\n          // eslint-disable-next-line\n          var annotationBoundsCollection = pageCollections[i].bounds;\n          if (pageCollections[i].shapeAnnotationType === 'Ink') {\n            // eslint-disable-next-line\n            annotationBoundsCollection = {\n              left: annotationBoundsCollection.x,\n              top: annotationBoundsCollection.y,\n              height: annotationBoundsCollection.height,\n              width: annotationBoundsCollection.width\n            };\n          }\n          if (pageCollections[i].shapeAnnotationType !== 'textMarkup' && boundsCount === 1) {\n            annotationBounds = annotationBoundsCollection;\n          } else {\n            // eslint-disable-next-line\n            annotationBounds = this.orderTextMarkupBounds(annotationBoundsCollection[j]);\n          }\n          if (annotationBounds) {\n            var isOverlapped = false;\n            // eslint-disable-next-line\n            if (left <= parseInt(annotationBounds.left) && totalWidth >= parseInt(annotationBounds.left) || left <= parseInt(annotationBounds.left + annotationBounds.width) && totalWidth >= parseInt(annotationBounds.left + annotationBounds.width)) {\n              isOverlapped = true;\n            }\n            if (isOverlapped) {\n              // eslint-disable-next-line\n              if (top <= parseInt(annotationBounds.top) && totalHeight >= parseInt(annotationBounds.top) || top <= parseInt(annotationBounds.top + annotationBounds.height) && totalHeight >= parseInt(annotationBounds.top + annotationBounds.height)) {\n                isOverlapped = true;\n              } else {\n                isOverlapped = false;\n              }\n            }\n            if (isOverlapped) {\n              this.checkOverlappedCollections(pageCollections[i], this.overlappedAnnotations);\n            } else {\n              // eslint-disable-next-line\n              if (parseInt(annotationBounds.left) <= left && parseInt(annotationBounds.left + annotationBounds.width) >= left || totalWidth >= parseInt(annotationBounds.left) && totalWidth <= parseInt(annotationBounds.left + annotationBounds.width)) {\n                isOverlapped = true;\n              }\n              if (isOverlapped) {\n                // eslint-disable-next-line\n                if (parseInt(annotationBounds.top) <= top && parseInt(annotationBounds.top + annotationBounds.height) >= top || totalHeight >= parseInt(annotationBounds.top) && totalHeight <= parseInt(annotationBounds.top + annotationBounds.height)) {\n                  isOverlapped = true;\n                } else {\n                  isOverlapped = false;\n                }\n              }\n              if (isOverlapped) {\n                this.checkOverlappedCollections(pageCollections[i], this.overlappedAnnotations);\n              } else {\n                // eslint-disable-next-line\n                if (left <= parseInt(annotationBounds.left) && totalWidth >= parseInt(annotationBounds.left) || left <= parseInt(annotationBounds.left + annotationBounds.width) && totalWidth >= parseInt(annotationBounds.left + annotationBounds.width)) {\n                  isOverlapped = true;\n                }\n                if (isOverlapped) {\n                  // eslint-disable-next-line\n                  if (parseInt(annotationBounds.top) <= top && parseInt(annotationBounds.top + annotationBounds.height) >= top || totalHeight >= parseInt(annotationBounds.top) && totalHeight <= parseInt(annotationBounds.top + annotationBounds.height)) {\n                    isOverlapped = true;\n                  } else {\n                    isOverlapped = false;\n                  }\n                }\n                if (isOverlapped) {\n                  this.checkOverlappedCollections(pageCollections[i], this.overlappedAnnotations);\n                } else {\n                  // eslint-disable-next-line\n                  if (parseInt(annotationBounds.left) <= left && parseInt(annotationBounds.left + annotationBounds.width) >= left || totalWidth >= parseInt(annotationBounds.left) && totalWidth <= parseInt(annotationBounds.left + annotationBounds.width)) {\n                    isOverlapped = true;\n                  }\n                  if (isOverlapped) {\n                    // eslint-disable-next-line\n                    if (top <= parseInt(annotationBounds.top) && totalHeight >= parseInt(annotationBounds.top) || top <= parseInt(annotationBounds.top + annotationBounds.height) && totalHeight >= parseInt(annotationBounds.top + annotationBounds.height)) {\n                      isOverlapped = true;\n                    } else {\n                      isOverlapped = false;\n                    }\n                  }\n                  if (isOverlapped) {\n                    this.checkOverlappedCollections(pageCollections[i], this.overlappedAnnotations);\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  };\n  /**\n   * @param annotation\n   * @param pageNumber\n   * @param type\n   * @param annotation\n   * @param pageNumber\n   * @param type\n   * @private\n   */\n  // eslint-disable-next-line\n  Annotation.prototype.findAnnotationMode = function (annotation, pageNumber, type) {\n    // eslint-disable-next-line\n    var importCollection = this.pdfViewer.viewerBase.importedAnnotation[pageNumber];\n    if (importCollection) {\n      // eslint-disable-next-line\n      var collection = void 0;\n      if (type === 'shape') {\n        collection = importCollection.shapeAnnotation;\n      } else if (type === 'shape_measure') {\n        collection = importCollection.measureShapeAnnotation;\n      } else if (type === 'freeText') {\n        collection = importCollection.freeTextAnnotation;\n      } else if (type === 'stamp') {\n        collection = importCollection.stampAnnotations;\n      } else if (type === 'sticky') {\n        collection = importCollection.stickyNotesAnnotation;\n      } else if (type === 'textMarkup') {\n        collection = importCollection.textMarkupAnnotation;\n      }\n      if (collection) {\n        for (var i = 0; i < collection.length; i++) {\n          if (collection[i].AnnotName === annotation.AnnotName) {\n            return 'Imported Annotation';\n          }\n        }\n      }\n    }\n    return 'Existing Annotation';\n  };\n  // eslint-disable-next-line\n  Annotation.prototype.checkOverlappedCollections = function (annotation, overlappedCollections) {\n    if (overlappedCollections.length > 0) {\n      var isAdded = false;\n      for (var i = 0; i < overlappedCollections.length; i++) {\n        if (annotation.annotName === overlappedCollections[i].annotName && annotation.bounds === overlappedCollections[i].bounds) {\n          isAdded = true;\n          break;\n        }\n      }\n      if (!isAdded) {\n        overlappedCollections.push(annotation);\n      }\n    } else {\n      overlappedCollections.push(annotation);\n    }\n  };\n  // eslint-disable-next-line\n  Annotation.prototype.orderTextMarkupBounds = function (bounds) {\n    if (bounds.Left || bounds.Width) {\n      return {\n        left: bounds.Left,\n        top: bounds.Top,\n        height: bounds.Height,\n        width: bounds.Width\n      };\n    } else {\n      return {\n        left: bounds.left,\n        top: bounds.top,\n        height: bounds.height,\n        width: bounds.width\n      };\n    }\n  };\n  /**\n   * @param annotation\n   * @private\n   */\n  // eslint-disable-next-line\n  Annotation.prototype.updateModifiedDate = function (annotation) {\n    if (annotation.modifiedDate) {\n      annotation.modifiedDate = this.setAnnotationModifiedDate(annotation.modifiedDate);\n    }\n    if (annotation.comments && annotation.comments.length > 0) {\n      for (var i = 0; i < annotation.comments.length; i++) {\n        if (annotation.comments[i].modifiedDate) {\n          annotation.comments[i].modifiedDate = this.setAnnotationModifiedDate(annotation.comments[i].modifiedDate);\n          if (annotation.comments[i].review && annotation.comments[i].review.modifiedDate) {\n            // eslint-disable-next-line max-len\n            annotation.comments[i].review.modifiedDate = this.setAnnotationModifiedDate(annotation.comments[i].review.modifiedDate);\n          }\n        }\n      }\n    }\n    if (annotation.review && annotation.review.modifiedDate) {\n      annotation.review.modifiedDate = this.setAnnotationModifiedDate(annotation.review.modifiedDate);\n    }\n  };\n  Annotation.prototype.setAnnotationModifiedDate = function (date) {\n    var modifiedTime;\n    var modifiedDateTime;\n    if (date !== '') {\n      // eslint-disable-next-line\n      var time = parseInt(date.split(' ')[1].split(':')[0]);\n      if (date.split(' ').length === 3) {\n        // eslint-disable-next-line max-len\n        modifiedTime = time + ':' + date.split(' ')[1].split(':')[1] + ':' + date.split(' ')[1].split(':')[2] + ' ' + date.split(' ')[2];\n      } else {\n        if (time >= 12) {\n          if (time === 12) {\n            modifiedTime = time + ':' + date.split(' ')[1].split(':')[1] + ':' + date.split(' ')[1].split(':')[2] + ' PM';\n          } else {\n            // eslint-disable-next-line max-len\n            modifiedTime = time - 12 + ':' + date.split(' ')[1].split(':')[1] + ':' + date.split(' ')[1].split(':')[2] + ' PM';\n          }\n        } else {\n          modifiedTime = time + ':' + date.split(' ')[1].split(':')[1] + ':' + date.split(' ')[1].split(':')[2] + ' AM';\n        }\n      }\n      // eslint-disable-next-line\n      var dateString = date.split(' ')[0];\n      // eslint-disable-next-line\n      var dateStringSpilt = date.split(',');\n      if (dateStringSpilt.length > 1) {\n        modifiedDateTime = dateString + ' ' + modifiedTime;\n      } else {\n        modifiedDateTime = dateString + ', ' + modifiedTime;\n      }\n    } else {\n      return date;\n    }\n    var modifiedDateToUTC = new Date(modifiedDateTime);\n    modifiedDateTime = modifiedDateToUTC.toISOString();\n    return modifiedDateTime;\n  };\n  /**\n   * @private\n   */\n  Annotation.prototype.clear = function () {\n    if (this.shapeAnnotationModule) {\n      this.shapeAnnotationModule.shapeCount = 0;\n    }\n    if (this.measureAnnotationModule) {\n      this.measureAnnotationModule.measureShapeCount = 0;\n    }\n    if (this.textMarkupAnnotationModule) {\n      this.textMarkupAnnotationModule.clear();\n    }\n    if (this.stickyNotesAnnotationModule) {\n      this.stickyNotesAnnotationModule.clear();\n    }\n    this.pdfViewer.refresh();\n    this.undoCommentsElement = [];\n    this.redoCommentsElement = [];\n    this.overlappedAnnotations = [];\n    this.previousIndex = null;\n    // eslint-disable-next-line max-len\n    if (this.pdfViewer.annotation && this.pdfViewer.annotation.stampAnnotationModule) {\n      this.pdfViewer.annotation.stampAnnotationModule.stampPageNumber = [];\n    }\n    if (this.pdfViewer.annotation && this.pdfViewer.annotation.freeTextAnnotationModule) {\n      this.pdfViewer.annotation.freeTextAnnotationModule.freeTextPageNumbers = [];\n      this.freeTextAnnotationModule.previousText = 'Type Here';\n    }\n    if (this.pdfViewer.annotation && this.pdfViewer.annotation.inkAnnotationModule) {\n      this.pdfViewer.annotation.inkAnnotationModule.inkAnnotationindex = [];\n    }\n    window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_shape');\n    window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_shape_measure');\n    window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_stamp');\n    window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_sticky');\n  };\n  // eslint-disable-next-line\n  Annotation.prototype.retrieveAnnotationCollection = function () {\n    return this.pdfViewer.annotationCollection;\n  };\n  /**\n   * @param interaction\n   * @param annotation\n   * @param interaction\n   * @param annotation\n   * @private\n   */\n  // eslint-disable-next-line\n  Annotation.prototype.checkAllowedInteractions = function (interaction, annotation) {\n    // eslint-disable-next-line\n    var annotationInteraction = this.updateAnnotationAllowedInteractions(annotation);\n    if (annotationInteraction && annotationInteraction.length > 0) {\n      for (var i = 0; i < annotationInteraction.length; i++) {\n        if (interaction === 'Select') {\n          // eslint-disable-next-line max-len\n          if (annotationInteraction[i] === 'Move' || annotationInteraction[i] === 'Resize' || annotationInteraction[i] === 'Delete' || annotationInteraction[i] === 'PropertyChange' || annotationInteraction[i] === 'Select') {\n            return true;\n          }\n        } else {\n          if (annotationInteraction[i] === interaction) {\n            return true;\n          }\n        }\n      }\n    }\n    return false;\n  };\n  /**\n   * @param menuObj\n   * @private\n   */\n  // eslint-disable-next-line\n  Annotation.prototype.checkContextMenuDeleteItem = function (menuObj) {\n    // eslint-disable-next-line\n    var annotation = this.findCurrentAnnotation();\n    if (annotation && annotation.annotationSettings) {\n      // eslint-disable-next-line\n      if (annotation.annotationSettings.isLock) {\n        if (this.checkAllowedInteractions('Delete', annotation)) {\n          menuObj.enableItems([this.pdfViewer.localeObj.getConstant('Delete Context')], true);\n        } else {\n          menuObj.enableItems([this.pdfViewer.localeObj.getConstant('Delete Context')], false);\n        }\n      } else {\n        menuObj.enableItems([this.pdfViewer.localeObj.getConstant('Delete Context')], true);\n      }\n    }\n  };\n  /**\n   * @private\n   */\n  // eslint-disable-next-line\n  Annotation.prototype.isEnableDelete = function () {\n    // eslint-disable-next-line\n    var annotation = this.findCurrentAnnotation();\n    if (annotation && annotation.annotationSettings) {\n      // eslint-disable-next-line\n      if (annotation.annotationSettings.isLock) {\n        if (this.checkAllowedInteractions('Delete', annotation)) {\n          return true;\n        } else {\n          return false;\n        }\n      } else {\n        return true;\n      }\n    }\n    return false;\n  };\n  /**\n   * @private\n   */\n  // eslint-disable-next-line\n  Annotation.prototype.findCurrentAnnotation = function () {\n    if (this.textMarkupAnnotationModule && this.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n      return this.textMarkupAnnotationModule.currentTextMarkupAnnotation;\n    }\n    if (this.pdfViewer.selectedItems.annotations && this.pdfViewer.selectedItems.annotations[0]) {\n      return this.pdfViewer.selectedItems.annotations[0];\n    }\n  };\n  /**\n   * @param annotation\n   * @private\n   */\n  // eslint-disable-next-line\n  Annotation.prototype.updateAnnotationAllowedInteractions = function (annotation) {\n    // eslint-disable-next-line\n    var annotationInteraction = ['None'];\n    if (annotation) {\n      if (annotation.shapeAnnotationType === 'FreeText' && this.pdfViewer.freeTextSettings.allowedInteractions) {\n        // eslint-disable-next-line max-len\n        annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.freeTextSettings.allowedInteractions, annotation.allowedInteractions);\n      } else if (annotation.shapeAnnotationType === 'Ink' && this.pdfViewer.inkAnnotationSettings.allowedInteractions) {\n        // eslint-disable-next-line max-len\n        annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.inkAnnotationSettings.allowedInteractions, annotation.allowedInteractions);\n      } else if (annotation.shapeAnnotationType === 'StickyNotes' && this.pdfViewer.stickyNotesSettings.allowedInteractions) {\n        // eslint-disable-next-line max-len\n        annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.stickyNotesSettings.allowedInteractions, annotation.allowedInteractions);\n      } else if (annotation.shapeAnnotationType === 'Stamp' && this.pdfViewer.stampSettings.allowedInteractions) {\n        // eslint-disable-next-line max-len\n        annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.stampSettings.allowedInteractions, annotation.allowedInteractions);\n      } else if (annotation.shapeAnnotationType === 'Image' && this.pdfViewer.customStampSettings.allowedInteractions) {\n        // eslint-disable-next-line max-len\n        annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.customStampSettings.allowedInteractions, annotation.allowedInteractions);\n      } else if (annotation.shapeAnnotationType === 'textMarkup') {\n        if (annotation.textMarkupAnnotationType === 'Highlight' && this.pdfViewer.highlightSettings.allowedInteractions) {\n          // eslint-disable-next-line max-len\n          annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.highlightSettings.allowedInteractions, annotation.allowedInteractions);\n        } else if (annotation.textMarkupAnnotationType === 'Underline' && this.pdfViewer.underlineSettings.allowedInteractions) {\n          // eslint-disable-next-line max-len\n          annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.underlineSettings.allowedInteractions, annotation.allowedInteractions);\n        } else if (annotation.textMarkupAnnotationType === 'Strikethrough' && this.pdfViewer.strikethroughSettings.allowedInteractions) {\n          // eslint-disable-next-line max-len\n          annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.strikethroughSettings.allowedInteractions, annotation.allowedInteractions);\n        }\n      } else {\n        if (annotation.measureType !== '') {\n          if (annotation.measureType === 'Distance' && this.pdfViewer.distanceSettings.allowedInteractions) {\n            // eslint-disable-next-line max-len\n            annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.distanceSettings.allowedInteractions, annotation.allowedInteractions);\n          } else if (annotation.measureType === 'Perimeter' && this.pdfViewer.perimeterSettings.allowedInteractions) {\n            // eslint-disable-next-line max-len\n            annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.perimeterSettings.allowedInteractions, annotation.allowedInteractions);\n          } else if (annotation.measureType === 'Radius' && this.pdfViewer.radiusSettings.allowedInteractions) {\n            // eslint-disable-next-line max-len\n            annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.radiusSettings.allowedInteractions, annotation.allowedInteractions);\n          } else if (annotation.measureType === 'Area' && this.pdfViewer.areaSettings.allowedInteractions) {\n            // eslint-disable-next-line max-len\n            annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.areaSettings.allowedInteractions, annotation.allowedInteractions);\n          } else if (annotation.measureType === 'Volume' && this.pdfViewer.volumeSettings.allowedInteractions) {\n            // eslint-disable-next-line max-len\n            annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.volumeSettings.allowedInteractions, annotation.allowedInteractions);\n          }\n        } else {\n          if (annotation.shapeAnnotationType === 'Line' && this.pdfViewer.lineSettings.allowedInteractions) {\n            // eslint-disable-next-line max-len\n            annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.lineSettings.allowedInteractions, annotation.allowedInteractions);\n            // eslint-disable-next-line max-len\n          } else if ((annotation.shapeAnnotationType === 'Arrow' || annotation.shapeAnnotationType === 'LineWidthArrowHead') && this.pdfViewer.arrowSettings.allowedInteractions) {\n            // eslint-disable-next-line max-len\n            annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.arrowSettings.allowedInteractions, annotation.allowedInteractions);\n            // eslint-disable-next-line max-len\n          } else if ((annotation.shapeAnnotationType === 'Circle' || annotation.shapeAnnotationType === 'Ellipse' || annotation.shapeAnnotationType === 'Oval') && this.pdfViewer.circleSettings.allowedInteractions) {\n            // eslint-disable-next-line max-len\n            annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.circleSettings.allowedInteractions, annotation.allowedInteractions);\n          } else if ((annotation.shapeAnnotationType === 'Rectangle' || annotation.shapeAnnotationType === 'Square') && this.pdfViewer.rectangleSettings.allowedInteractions) {\n            // eslint-disable-next-line max-len\n            annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.rectangleSettings.allowedInteractions, annotation.allowedInteractions);\n          } else if (annotation.shapeAnnotationType === 'Polygon' && this.pdfViewer.polygonSettings.allowedInteractions) {\n            // eslint-disable-next-line max-len\n            annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.polygonSettings.allowedInteractions, annotation.allowedInteractions);\n          }\n        }\n      }\n    }\n    return annotationInteraction;\n  };\n  /**\n   * @param annotation\n   * @private\n   */\n  // eslint-disable-next-line\n  Annotation.prototype.checkIsLockSettings = function (annotation) {\n    // eslint-disable-next-line\n    var isLocked = false;\n    if (annotation) {\n      if (annotation.shapeAnnotationType === 'FreeText') {\n        isLocked = this.checkLockSettings(this.pdfViewer.freeTextSettings.isLock);\n      } else if (annotation.shapeAnnotationType === 'Ink') {\n        // eslint-disable-next-line max-len\n        isLocked = this.checkLockSettings(this.pdfViewer.inkAnnotationSettings.isLock);\n      } else if (annotation.shapeAnnotationType === 'StickyNotes') {\n        isLocked = this.checkLockSettings(this.pdfViewer.stickyNotesSettings.isLock);\n      } else if (annotation.shapeAnnotationType === 'Stamp') {\n        isLocked = this.checkLockSettings(this.pdfViewer.stampSettings.isLock);\n      } else if (annotation.shapeAnnotationType === 'Image') {\n        isLocked = this.checkLockSettings(this.pdfViewer.customStampSettings.isLock);\n      } else if (annotation.shapeAnnotationType === 'textMarkup') {\n        if (annotation.textMarkupAnnotationType === 'Highlight') {\n          // eslint-disable-next-line max-len\n          isLocked = this.checkLockSettings(this.pdfViewer.highlightSettings.isLock);\n        } else if (annotation.textMarkupAnnotationType === 'Underline') {\n          // eslint-disable-next-line max-len\n          isLocked = this.checkLockSettings(this.pdfViewer.underlineSettings.isLock);\n        } else if (annotation.textMarkupAnnotationType === 'Strikethrough') {\n          // eslint-disable-next-line max-len\n          isLocked = this.checkLockSettings(this.pdfViewer.strikethroughSettings.isLock);\n        }\n      } else {\n        if (annotation.measureType !== '') {\n          if (annotation.measureType === 'Distance') {\n            // eslint-disable-next-line max-len\n            isLocked = this.checkLockSettings(this.pdfViewer.distanceSettings.isLock);\n          } else if (annotation.measureType === 'Perimeter') {\n            // eslint-disable-next-line max-len\n            isLocked = this.checkLockSettings(this.pdfViewer.perimeterSettings.isLock);\n          } else if (annotation.measureType === 'Radius') {\n            // eslint-disable-next-line max-len\n            isLocked = this.checkLockSettings(this.pdfViewer.radiusSettings.isLock);\n          } else if (annotation.measureType === 'Area') {\n            // eslint-disable-next-line max-len\n            isLocked = this.checkLockSettings(this.pdfViewer.areaSettings.isLock);\n          } else if (annotation.measureType === 'Volume') {\n            // eslint-disable-next-line max-len\n            isLocked = this.checkLockSettings(this.pdfViewer.volumeSettings.isLock);\n          }\n        } else {\n          if (annotation.shapeAnnotationType === 'Line') {\n            // eslint-disable-next-line max-len\n            isLocked = this.checkLockSettings(this.pdfViewer.lineSettings.isLock);\n            // eslint-disable-next-line max-len\n          } else if (annotation.shapeAnnotationType === 'Arrow' || annotation.shapeAnnotationType === 'LineWidthArrowHead') {\n            // eslint-disable-next-line max-len\n            isLocked = this.checkLockSettings(this.pdfViewer.arrowSettings.isLock);\n            // eslint-disable-next-line max-len\n          } else if (annotation.shapeAnnotationType === 'Circle' || annotation.shapeAnnotationType === 'Ellipse' || annotation.shapeAnnotationType === 'Oval') {\n            // eslint-disable-next-line max-len\n            isLocked = this.checkLockSettings(this.pdfViewer.circleSettings.isLock);\n          } else if (annotation.shapeAnnotationType === 'Rectangle' || annotation.shapeAnnotationType === 'Square') {\n            // eslint-disable-next-line max-len\n            isLocked = this.checkLockSettings(this.pdfViewer.rectangleSettings.isLock);\n          } else if (annotation.shapeAnnotationType === 'Polygon') {\n            // eslint-disable-next-line max-len\n            isLocked = this.checkLockSettings(this.pdfViewer.polygonSettings.isLock);\n          }\n        }\n      }\n    }\n    return isLocked;\n  };\n  // eslint-disable-next-line\n  Annotation.prototype.checkLockSettings = function (locked) {\n    var islock = false;\n    if (locked || this.pdfViewer.annotationSettings.isLock) {\n      islock = true;\n    }\n    return islock;\n  };\n  /**\n   * @private\n   */\n  // eslint-disable-next-line\n  Annotation.prototype.restrictContextMenu = function () {\n    // eslint-disable-next-line\n    var isRestrict = false;\n    // eslint-disable-next-line\n    var annotation = this.findCurrentAnnotation();\n    if (annotation && this.checkIsLockSettings(annotation) && this.checkAllowedInteractions('Select', annotation)) {\n      isRestrict = true;\n    }\n    return isRestrict;\n  };\n  // eslint-disable-next-line\n  Annotation.prototype.checkAllowedInteractionSettings = function (annotationInteraction, annotationAllowedInteraction) {\n    if (annotationAllowedInteraction) {\n      if (annotationAllowedInteraction.length === 1) {\n        if (annotationAllowedInteraction[0] !== 'None') {\n          return annotationAllowedInteraction;\n        }\n      } else {\n        return annotationAllowedInteraction;\n      }\n    }\n    if (annotationInteraction) {\n      if (annotationInteraction.length === 1) {\n        if (annotationInteraction[0] !== 'None') {\n          return annotationInteraction;\n        }\n      } else {\n        return annotationInteraction;\n      }\n    }\n    if (this.pdfViewer.annotationSettings.allowedInteractions) {\n      return this.pdfViewer.annotationSettings.allowedInteractions;\n    }\n    return ['None'];\n  };\n  /**\n   * @param value\n   * @param type\n   * @param value\n   * @param type\n   * @private\n   */\n  Annotation.prototype.getValue = function (value, type) {\n    type = !type ? 'hex' : type.toLowerCase();\n    if (value[0] === 'r') {\n      var cValue = this.convertRgbToNumberArray(value);\n      if (type === 'hex' || type === 'hexa') {\n        var hex = this.rgbToHex(cValue);\n        return type === 'hex' ? hex.slice(0, 7) : hex;\n      } else {\n        if (type === 'hsv') {\n          return this.convertToHsvString(this.rgbToHsv.apply(this, cValue.slice(0, 3)));\n        } else {\n          if (type === 'hsva') {\n            return this.convertToHsvString(this.rgbToHsv.apply(this, cValue));\n          } else {\n            return 'null';\n          }\n        }\n      }\n    } else {\n      if (value[0] === 'h') {\n        var cValue = this.hsvToRgb.apply(this, this.convertRgbToNumberArray(value));\n        if (type === 'rgba') {\n          return this.convertToRgbString(cValue);\n        } else {\n          if (type === 'hex' || type === 'hexa') {\n            var hex = this.rgbToHex(cValue);\n            return type === 'hex' ? hex.slice(0, 7) : hex;\n          } else {\n            if (type === 'rgb') {\n              return this.convertToRgbString(cValue.slice(0, 3));\n            } else {\n              return 'null';\n            }\n          }\n        }\n      } else {\n        value = this.roundValue(value);\n        var rgb = this.hexToRgb(value);\n        if (type === 'rgb' || type === 'hsv') {\n          rgb = rgb.slice(0, 3);\n        }\n        if (type === 'rgba' || type === 'rgb') {\n          return this.convertToRgbString(rgb);\n        } else {\n          if (type === 'hsva' || type === 'hsv') {\n            return this.convertToHsvString(this.rgbToHsv.apply(this, rgb));\n          } else {\n            if (type === 'hex') {\n              return value.slice(0, 7);\n            } else {\n              if (type === 'a') {\n                return rgb[3].toString();\n              } else {\n                return 'null';\n              }\n            }\n          }\n        }\n      }\n    }\n  };\n  Annotation.prototype.convertRgbToNumberArray = function (value) {\n    // eslint-disable-next-line max-len\n    return value.slice(value.indexOf('(') + 1, value.indexOf(')')).split(',').map(function (n, i) {\n      return i !== 3 ? parseInt(n, 10) : parseFloat(n);\n    });\n  };\n  Annotation.prototype.convertToRgbString = function (rgb) {\n    return rgb.length ? rgb.length === 4 ? 'rgba(' + rgb.join() + ')' : 'rgb(' + rgb.join() + ')' : '';\n  };\n  Annotation.prototype.convertToHsvString = function (hsv) {\n    return hsv.length === 4 ? 'hsva(' + hsv.join() + ')' : 'hsv(' + hsv.join() + ')';\n  };\n  Annotation.prototype.roundValue = function (value) {\n    if (!value) {\n      return '';\n    }\n    if (value[0] !== '#') {\n      value = '#' + value;\n    }\n    var len = value.length;\n    if (len === 4) {\n      value += 'f';\n      len = 5;\n    }\n    if (len === 5) {\n      var tempValue = '';\n      for (var i = 1, len_1 = value.length; i < len_1; i++) {\n        tempValue += value.charAt(i) + value.charAt(i);\n      }\n      value = '#' + tempValue;\n      len = 9;\n    }\n    if (len === 7) {\n      value += 'ff';\n    }\n    return value;\n  };\n  Annotation.prototype.hexToRgb = function (hex) {\n    if (!hex) {\n      return [];\n    }\n    hex = hex.trim();\n    if (hex.length !== 9) {\n      hex = this.roundValue(hex);\n    }\n    var opacity = Number((parseInt(hex.slice(-2), 16) / 255).toFixed(2));\n    hex = hex.slice(1, 7);\n    var bigInt = parseInt(hex, 16);\n    var h = [];\n    h.push(bigInt >> 16 & 255);\n    h.push(bigInt >> 8 & 255);\n    h.push(bigInt & 255);\n    h.push(opacity);\n    return h;\n  };\n  Annotation.prototype.rgbToHsv = function (r, g, b, opacity) {\n    r /= 255;\n    g /= 255;\n    b /= 255;\n    var max = Math.max(r, g, b);\n    var min = Math.min(r, g, b);\n    var h;\n    var s;\n    var v = max;\n    var d = max - min;\n    s = max === 0 ? 0 : d / max;\n    if (max === min) {\n      h = 0;\n    } else {\n      switch (max) {\n        case r:\n          h = (g - b) / d + (g < b ? 6 : 0);\n          break;\n        case g:\n          h = (b - r) / d + 2;\n          break;\n        case b:\n          h = (r - g) / d + 4;\n          break;\n      }\n      h /= 6;\n    }\n    var hsv = [Math.round(h * 360), Math.round(s * 1000) / 10, Math.round(v * 1000) / 10];\n    if (!isNullOrUndefined(opacity)) {\n      hsv.push(opacity);\n    }\n    return hsv;\n  };\n  Annotation.prototype.hsvToRgb = function (h, s, v, opacity) {\n    var r;\n    var g;\n    var b;\n    var i;\n    var f;\n    var p;\n    var q;\n    var t;\n    s /= 100;\n    v /= 100;\n    if (s === 0) {\n      r = g = b = v;\n      return [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255), opacity];\n    }\n    h /= 60;\n    i = Math.floor(h);\n    f = h - i;\n    p = v * (1 - s);\n    q = v * (1 - s * f);\n    t = v * (1 - s * (1 - f));\n    switch (i) {\n      case 0:\n        r = v;\n        g = t;\n        b = p;\n        break;\n      case 1:\n        r = q;\n        g = v;\n        b = p;\n        break;\n      case 2:\n        r = p;\n        g = v;\n        b = t;\n        break;\n      case 3:\n        r = p;\n        g = q;\n        b = v;\n        break;\n      case 4:\n        r = t;\n        g = p;\n        b = v;\n        break;\n      default:\n        r = v;\n        g = p;\n        b = q;\n    }\n    var rgb = [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)];\n    if (!isNullOrUndefined(opacity)) {\n      rgb.push(opacity);\n    }\n    return rgb;\n  };\n  Annotation.prototype.rgbToHex = function (rgb) {\n    // eslint-disable-next-line max-len\n    return rgb.length ? '#' + this.hex(rgb[0]) + this.hex(rgb[1]) + this.hex(rgb[2]) + (!isNullOrUndefined(rgb[3]) ? rgb[3] !== 0 ? (Math.round(rgb[3] * 255) + 0x10000).toString(16).substr(-2) : '00' : '') : '';\n  };\n  /**\n   * @param dataFormat\n   * @private\n   */\n  Annotation.prototype.exportAnnotationsAsStream = function (dataFormat) {\n    var _this = this;\n    if (this.pdfViewer.annotationModule) {\n      var isAnnotations = this.pdfViewer.viewerBase.updateExportItem();\n      if (isAnnotations) {\n        return new Promise(function (resolve, reject) {\n          _this.pdfViewer.viewerBase.createRequestForExportAnnotations(true, dataFormat, true).then(function (value) {\n            resolve(value);\n          });\n        });\n      }\n    }\n    return null;\n  };\n  Annotation.prototype.hex = function (x) {\n    if (!isNullOrUndefined(x)) {\n      return ('0' + x.toString(16)).slice(-2);\n    } else {\n      return '0';\n    }\n  };\n  /**\n   * @param obj\n   * @private\n   */\n  // eslint-disable-next-line\n  Annotation.prototype.cloneObject = function (obj) {\n    return JSON.parse(JSON.stringify(obj));\n  };\n  /**\n   * @private\n   */\n  Annotation.prototype.destroy = function () {\n    this.destroyPropertiesWindow();\n    this.textMarkupAnnotationModule.clear();\n  };\n  /**\n   * @private\n   */\n  Annotation.prototype.getModuleName = function () {\n    return 'Annotation';\n  };\n  /**\n   * Get vertex points properties\n   * @private\n   */\n  Annotation.prototype.getVertexPointsXY = function (points) {\n    var vertexPoints = [];\n    //Converting points model into vertex property\n    for (var j = 0; j < points.length; j++) {\n      vertexPoints[j] = {\n        X: points[j].x,\n        Y: points[j].y\n      };\n    }\n    return vertexPoints;\n  };\n  /**\n   * Method used to add annotations using program.\n   *\n   * @param annotationType - It describes type of annotation object.\n   * @param options -  It describes about the annotation objects and it's property.\n   * @param dynamicStampItem - It describe which type of dynamic stamp.\n   * @param signStampItem - It describe which type of sign stamp.\n   * @param standardBusinessStampItem - It describe which type of standard business stamp.\n   * @returns void\n   */\n  Annotation.prototype.addAnnotation = function (annotationType, options, dynamicStampItem, signStampItem, standardBusinessStampItem) {\n    //Initialize the bounds and pageNumber\n    var offset = {\n      x: 1,\n      y: 1\n    };\n    var pageNumber = 0;\n    if (options) {\n      if (options.pageNumber && options.pageNumber > 0) pageNumber = options.pageNumber ? options.pageNumber - 1 : 0;\n    }\n    //Initialize the pdf annotation object array\n    var annotationObject = null;\n    var pdfAnnotation = [];\n    this.pdfViewer.annotation.triggerAnnotationUnselectEvent();\n    //Seperate the annotation type with it's method\n    if (annotationType == 'FreeText') {\n      pdfAnnotation[pageNumber] = this.pdfViewer.annotation.freeTextAnnotationModule.updateAddAnnotationDetails(options, offset);\n      this.pdfViewer.annotation.freeTextAnnotationModule.isAddAnnotationProgramatically = true;\n    } else if (annotationType == 'StickyNotes') {\n      pdfAnnotation[pageNumber] = this.pdfViewer.annotation.stickyNotesAnnotationModule.updateAddAnnotationDetails(options, offset);\n      this.pdfViewer.annotation.stickyNotesAnnotationModule.isAddAnnotationProgramatically = true;\n    } else if (annotationType == 'Highlight' || annotationType == 'Underline' || annotationType == 'Strikethrough') {\n      if (annotationType == 'Highlight') annotationObject = options;else if (annotationType == 'Underline') annotationObject = options;else if (annotationType == 'Strikethrough') annotationObject = options;\n      pdfAnnotation[pageNumber] = this.pdfViewer.annotation.textMarkupAnnotationModule.updateAddAnnotationDetails(annotationType, annotationObject);\n      this.pdfViewer.annotation.textMarkupAnnotationModule.isAddAnnotationProgramatically = true;\n    } else if (annotationType === 'Line' || annotationType === 'Arrow' || annotationType === 'Rectangle' || annotationType === 'Circle' || annotationType === 'Polygon') {\n      if (annotationType == 'Line') annotationObject = options;else if (annotationType == 'Arrow') annotationObject = options;else if (annotationType == 'Rectangle') annotationObject = options;else if (annotationType == 'Circle') annotationObject = options;else if (annotationType == 'Polygon') annotationObject = options;\n      pdfAnnotation[pageNumber] = this.pdfViewer.annotation.shapeAnnotationModule.updateAddAnnotationDetails(annotationType, annotationObject, offset);\n      this.pdfViewer.annotation.shapeAnnotationModule.isAddAnnotationProgramatically = true;\n    } else if (annotationType === 'Distance' || annotationType === 'Perimeter' || annotationType === 'Area' || annotationType === 'Radius' || annotationType === 'Volume') {\n      if (annotationType == 'Distance') annotationObject = options;else if (annotationType == 'Perimeter') annotationObject = options;else if (annotationType == 'Area') annotationObject = options;else if (annotationType == 'Radius') annotationObject = options;else if (annotationType == 'Volume') annotationObject = options;\n      pdfAnnotation[pageNumber] = this.pdfViewer.annotation.measureAnnotationModule.updateAddAnnotationDetails(annotationType, annotationObject, offset);\n      this.pdfViewer.annotation.measureAnnotationModule.isAddAnnotationProgramatically = true;\n    } else if (annotationType === 'Stamp') {\n      if (options && options.customStamps) {\n        pdfAnnotation[pageNumber] = this.pdfViewer.annotation.stampAnnotationModule.updateAddAnnotationDetails(options, offset, pageNumber, dynamicStampItem, signStampItem, standardBusinessStampItem);\n      } else {\n        pdfAnnotation[pageNumber] = this.pdfViewer.annotation.stampAnnotationModule.updateAddAnnotationDetails(options, offset, pageNumber, dynamicStampItem, signStampItem, standardBusinessStampItem);\n      }\n      this.pdfViewer.annotation.stampAnnotationModule.isAddAnnotationProgramatically = true;\n    } else if (annotationType === 'Ink') {\n      pdfAnnotation[pageNumber] = this.pdfViewer.annotation.inkAnnotationModule.updateAddAnnotationDetails(options, offset, pageNumber);\n      this.pdfViewer.annotation.inkAnnotationModule.isAddAnnotationProgramatically = true;\n    }\n    //Annotation rendering can be done with the import annotation method.\n    var pdf = {\n      pdfAnnotation: pdfAnnotation\n    };\n    this.pdfViewerBase.isAddAnnotation = true;\n    this.pdfViewerBase.importAnnotations(pdf);\n    this.pdfViewerBase.isAddAnnotation = false;\n  };\n  /**\n   * @param annotation\n   * @private\n   */\n  Annotation.prototype.triggerAnnotationAddEvent = function (annotation) {\n    var annotationType = annotation.shapeAnnotationType;\n    if (annotationType === 'Stamp' || annotationType === 'Image' || annotationType === 'Path' || annotationType === 'FreeText' || annotationType === 'StickyNotes' || annotationType === 'Ink') {\n      var settings = void 0;\n      if (annotationType === 'FreeText') {\n        settings = {\n          opacity: annotation.opacity,\n          borderColor: annotation.strokeColor,\n          borderWidth: annotation.thickness,\n          author: annotation.author,\n          subject: annotation.subject,\n          modifiedDate: annotation.modifiedDate,\n          fillColor: annotation.fillColor,\n          fontSize: annotation.fontSize,\n          width: annotation.bounds.width,\n          height: annotation.bounds.height,\n          fontColor: annotation.fontColor,\n          fontFamily: annotation.fontFamily,\n          defaultText: annotation.dynamicText,\n          fontStyle: annotation.font,\n          textAlignment: annotation.textAlign\n        };\n      } else {\n        settings = {\n          opacity: annotation.opacity,\n          fillColor: annotation.fillColor,\n          strokeColor: annotation.strokeColor,\n          thickness: annotation.thickness,\n          author: annotation.author,\n          subject: annotation.subject,\n          modifiedDate: annotation.modifiedDate,\n          data: annotation.data\n        };\n      }\n      // eslint-disable-next-line\n      var bounds = {\n        left: annotation.bounds.x,\n        top: annotation.bounds.y,\n        width: annotation.bounds.width,\n        height: annotation.bounds.height\n      };\n      var type = this.getAnnotationType(annotation.shapeAnnotationType, annotation.measureType);\n      // eslint-disable-next-line max-len\n      this.pdfViewer.fireAnnotationAdd(annotation.pageIndex, annotation.annotName, type, bounds, settings);\n    } else if (annotationType === 'SignatureText' || annotationType === 'SignatureImage' || annotationType === 'HandWrittenSignature') {\n      // eslint-disable-next-line\n      var bounds = {\n        left: annotation.bounds.x,\n        top: annotation.bounds.y,\n        width: annotation.bounds.width,\n        height: annotation.bounds.height\n      };\n      // eslint-disable-next-line max-len\n      this.pdfViewer.fireSignatureAdd(annotation.pageIndex, annotation.signatureName, annotation.shapeAnnotationType, bounds, annotation.opacity, annotation.strokeColor, annotation.thickness, annotation.data);\n    } else {\n      // eslint-disable-next-line\n      var setting = {\n        opacity: annotation.opacity,\n        fillColor: annotation.fillColor,\n        strokeColor: annotation.strokeColor,\n        thickness: annotation.thickness,\n        author: annotation.author,\n        subject: annotation.subject,\n        modifiedDate: annotation.modifiedDate\n      };\n      var bounds = {\n        left: annotation.bounds.x,\n        top: annotation.bounds.y,\n        width: annotation.bounds.width,\n        height: annotation.bounds.height\n      };\n      var type = this.getAnnotationType(annotation.shapeAnnotationType, annotation.measureType);\n      if (type === 'Line' || type === 'Arrow' || type === 'Distance' || type === 'Perimeter') {\n        setting.lineHeadStartStyle = this.getArrowString(annotation.sourceDecoraterShapes);\n        setting.lineHeadEndStyle = this.getArrowString(annotation.taregetDecoraterShapes);\n        setting.borderDashArray = annotation.borderDashArray;\n      }\n      var labelSettings = void 0;\n      if (this.pdfViewer.enableShapeLabel) {\n        labelSettings = {\n          // eslint-disable-next-line max-len\n          fontColor: annotation.fontColor,\n          fontSize: annotation.fontSize,\n          fontFamily: annotation.fontFamily,\n          opacity: annotation.labelOpacity,\n          labelContent: annotation.labelContent,\n          fillColor: annotation.labelFillColor\n        };\n        // eslint-disable-next-line max-len\n        this.pdfViewer.fireAnnotationAdd(annotation.pageIndex, annotation.annotName, type, bounds, setting, null, null, null, labelSettings);\n      } else {\n        // eslint-disable-next-line max-len\n        this.pdfViewer.fireAnnotationAdd(annotation.pageIndex, annotation.annotName, type, bounds, setting);\n      }\n    }\n  };\n  /**\n   * @private\n   */\n  Annotation.prototype.triggerAnnotationUnselectEvent = function () {\n    if (this.pdfViewer.selectedItems.annotations && this.pdfViewer.selectedItems.annotations[0]) {\n      var annotation = this.pdfViewer.selectedItems.annotations[0];\n      if (annotation.shapeAnnotationType !== 'HandWrittenSignature' && annotation.shapeAnnotationType !== 'SignatureText' && annotation.shapeAnnotationType !== 'SignatureImage' && annotation.shapeAnnotationType !== 'Path') {\n        this.pdfViewer.fireAnnotationUnSelect(annotation.annotName, annotation.pageIndex, annotation);\n        this.pdfViewer.clearSelection(annotation.pageIndex);\n      }\n    }\n  };\n  /**\n   * @private\n  */\n  Annotation.prototype.updateFontFamilyRenderSize = function (currentAnnotation, currentValue) {\n    var freeTextAnnotation = this.freeTextAnnotationModule;\n    freeTextAnnotation.inputBoxElement.style.fontFamily = currentValue;\n    freeTextAnnotation.autoFitFreeText();\n    var zoomFactor = this.pdfViewerBase.getZoomFactor();\n    var padding = parseFloat(freeTextAnnotation.inputBoxElement.style.paddingLeft);\n    var inputEleHeight = currentAnnotation.bounds.height * zoomFactor;\n    var characterLength = 8;\n    var inputEleWidth = parseFloat(freeTextAnnotation.inputBoxElement.style.width) - characterLength;\n    inputEleWidth = inputEleWidth / zoomFactor;\n    inputEleHeight = inputEleHeight / zoomFactor;\n    var heightDiff = inputEleHeight - currentAnnotation.bounds.height;\n    var y = undefined;\n    if (heightDiff > 0) {\n      y = currentAnnotation.wrapper.offsetY + heightDiff / 2;\n      y = y > 0 ? y : undefined;\n    } else {\n      heightDiff = Math.abs(heightDiff);\n      y = currentAnnotation.wrapper.offsetY - heightDiff / 2;\n      y = y > 0 ? y : undefined;\n    }\n    var widthDiff = inputEleWidth - currentAnnotation.bounds.width;\n    var x = undefined;\n    if (widthDiff > 0) {\n      x = currentAnnotation.wrapper.offsetX + widthDiff / 2;\n      x = x > 0 ? x : undefined;\n    } else {\n      widthDiff = Math.abs(widthDiff);\n      x = currentAnnotation.wrapper.offsetX - widthDiff / 2;\n    }\n    currentAnnotation.bounds.width = inputEleWidth;\n    currentAnnotation.bounds.height = inputEleHeight;\n    this.pdfViewer.nodePropertyChange(currentAnnotation, {\n      fontFamily: currentValue,\n      bounds: {\n        width: currentAnnotation.bounds.width,\n        height: currentAnnotation.bounds.height,\n        y: y,\n        x: x\n      }\n    });\n    this.pdfViewer.renderSelector(currentAnnotation.pageIndex, this.pdfViewer.annotationSelectorSettings);\n    this.modifyInCollections(currentAnnotation, 'bounds');\n  };\n  Annotation.prototype.updateCanvas = function (canvas, pageWidth, pageHeight, pageNumber) {\n    var ratio = this.pdfViewerBase.getZoomRatio();\n    canvas.width = pageWidth * ratio;\n    canvas.height = pageHeight * ratio;\n    canvas.style.width = pageWidth + 'px';\n    canvas.style.height = pageHeight + 'px';\n    canvas.style.position = 'absolute';\n    canvas.style.zIndex = '1';\n    this.pdfViewerBase.applyElementStyles(canvas, pageNumber);\n  };\n  return Annotation;\n}();\nexport { Annotation };","map":{"version":3,"names":["TextMarkupAnnotation","ShapeAnnotation","StampAnnotation","StickyNotesAnnotation","MeasureAnnotation","InkAnnotation","AllowedInteraction","DynamicStampItem","SignStampItem","StandardBusinessStampItem","createElement","Browser","isNullOrUndefined","isBlazor","NumericTextBox","Slider","ColorPicker","Dialog","DropDownButton","processPathData","splitArrayCollection","isLineShapes","cloneObject","NodeDrawingTool","LineTool","MoveTool","ResizeTool","ConnectTool","updateDistanceLabel","updateRadiusLabel","updatePerimeterLabel","updateCalibrateLabel","FreeTextAnnotation","InputElement","InPlaceEditor","Annotation","pdfViewer","viewerBase","isUndoRedoAction","isUndoAction","annotationSelected","isAnnotDeletionApiCall","removedDocumentAnnotationCollection","isShapeCopied","actionCollection","redoCollection","isPopupNoteVisible","undoCommentsElement","redoCommentsElement","selectAnnotationId","isAnnotationSelected","annotationPageIndex","previousIndex","overlappedAnnotations","overlappedCollections","isFormFieldShape","removedAnnotationCollection","pdfViewerBase","enableTextMarkupAnnotation","textMarkupAnnotationModule","enableShapeAnnotation","shapeAnnotationModule","enableMeasureAnnotation","measureAnnotationModule","stampAnnotationModule","stickyNotesAnnotationModule","freeTextAnnotationModule","inputElementModule","inkAnnotationModule","prototype","setAnnotationMode","type","dynamicStampItem","signStampItem","standardBusinessStampItem","allowServerDataBind","allowServerDataBinding","enableServerDataBinding","tool","toolbarModule","updateStampItems","annotationToolbarModule","resetFreeTextAnnot","triggerAnnotationUnselectEvent","deSelectCommentAnnotation","clearAnnotationMode","isSelectionMaintained","drawTextMarkupAnnotations","toString","setAnnotationType","isNewFreeTextAnnot","isNewAddedAnnot","signatureModule","setInitialMode","isCommentIconAdded","isAddComment","pageDiv","document","getElementById","element","id","currentPageNumber","addEventListener","annotationModule","drawIcons","bind","annotation","isStampAddMode","isStampAnnotSelected","stampAdded","stampName","isDynamicStamp","retrieveDynamicStampAnnotation","retrievestampAnnotation","initiateTextSelection","deleteAnnotationById","annotationId","selectAnnotation","deleteAnnotation","isTextMarkupAnnotationMode","isTextMarkupAnnotationModule","currentTextMarkupAddMode","isShapeAnnotationModule","currentAnnotationMode","isCalibrateAnnotationModule","parseInt","drawInkAnnotation","deleteTextMarkupAnnotation","selectedAnnotation","selectedItems","annotations","data","window","sessionStorage","getItem","documentId","formFieldsData","JSON","parse","newFormFieldsData","x","length","uniqueID","Value","y","Name","FieldName","splice","push","setItem","stringify","isLock","isReadOnly","annotation_1","shapeAnnotationType","formFieldAnnotationType","inputFields","disabled","annotationSettings","checkAllowedInteractions","pageNumber","pageIndex","shapeType","undoElement","measureType","findPosition","updateImportAnnotationCollection","modifyInCollections","updateSessionStorage","addAction","removeDiv","annotName","removeCommentPanelDiv","selectedAnnot","annotType","getAnnotationType","formFieldCollection","retrieveFormFields","index","findIndex","el","formFieldName","name","m","value","signatureType","annotation_2","getAnnotationsFromCollections","updateInputFieldDivElement","formDesignerModule","updateFormFieldCollection","updateAnnotationCollection","remove","formFieldObj","nameTable","split","formFieldCollections","i","formFieldsIndex","fireFormFieldPropertiesChangeEvent","updateFormFieldCollections","annotation_3","formFieldObject","wrapper","children","indexOf","renderDrawing","clearSelection","setItemInSessionStorage","updateDocumentEditedProperty","bounds","left","top","width","height","fireSignatureRemove","fireAnnotationRemove","textSelectionModule","enableTextSelectionMode","updateToolbar","selectAnnotationDeleteItem","enableTextMarkupAnnotationPropertiesTools","collections","signatureFieldElement","classList","contains","className","style","pointerEvents","parentElement","updateSignatureValue","formFieldsModule","updateDataInSession","storeAnnotationCollections","collectionDetails","checkFormDesignCollection","formFieldId","uniqueKey","isExisting","position","checkAnnotationCollection","randomId","customData","annotationCollection","getCustomData","ExistingCustomData","CustomData","stickyNotesSettings","stampSettings","freeTextSettings","getShapeData","ShapeAnnotationType","subject","getMeasureData","Subject","getTextMarkupData","inkAnnotationSettings","lineSettings","arrowSettings","rectangleSettings","circleSettings","polygonSettings","distanceSettings","radiusSettings","highlightSettings","underlineSettings","strikethroughSettings","getData","clearAnnotationStorage","sessionSize","Math","round","maxSessionSize","storageLength","annotationList","key","annotationStorage","removeItem","annotationType","isImportAction","importedAnnotation","currentPageAnnotations","annotationOrder","filter","currentAnnotation","AnnotName","documentcollections","documentAnnotationCollections","documentPageCollections","getAnnotationsFromAnnotationCollections","isRender","findRenderPageList","currentSelector","annotationSelectorSettings","rect","scrollValue","pageSize","getZoomFactor","getAnnotationTop","scroll_1","viewerContainer","scrollTop","scrollLeft","getAnnotationLeft","navigation","goToPage","scroll_2","clearCurrentAnnotationSelection","canvas","getElement","textMarkupAnnotation","getTextMarkupAnnotations","currentTextMarkupAnnotation","isSelectedAnnotation","showHideDropletDiv","annotationClickPosition","selectTextMarkupCurrentPage","enableAnnotationPropertiesTool","enableAnnotationToolbar","isToolbarHidden","showAnnotationToolbar","annotationItem","select","onAnnotationMouseDown","commentElement","display","accordionExpand","ej2_instances","expandItem","commentsDiv","firstChild","click","annotationAddMode","selectAnnotationFromCodeBehind","updateCollectionForNonRenderedPages","annotCollection","getTypeOfAnnotation","collection","toLowerCase","childElementCount","updateAccordionContainer","clearCurrentSelectedAnnotation","Top","Left","pageList","renderedPagesList","getPageNumberFromAnnotationCollections","storeObject","isStorageExceed","annotObject","getPageCollection","getAnnotationIndex","pageAnnotationBases","drawing","getPageObjects","initializeCollection","popupNote","createNote","showCommentsPanel","enableCommentPanel","commentPanel","isDevice","viewer","insertBefore","navigationPane","commentPanelContainer","toolbarElement","commentPanelResizer","setCommentPanelResizeIconTop","updateCommentPanelTextTop","pageContainer","enableRtl","getViewerContainerRight","right","clientWidth","getViewerContainerLeft","offsetWidth","getViewerContainerScrollbarWidth","updateZoomValue","enableDesktopMode","viewerMainContainer","clientHeight","commentDiv","lastElementChild","enableEditMode","toolbar","propertyToolbar","actionString","property","node","redo","action","modifiedProperty","redoElement","undo","actionObject","pop","undoTextMarkupAction","undoRedoPropertyChange","nodePropertyChange","vertexPoints","leaderHeight","notes","updateCalibrateValues","formDesigner","updateHTMLElement","activeElements","activePageID","deleteFormField","isAnnotationUpdate","annotationObject","duplicate","removeChild","mobileAnnotationToolbar","toolbarCreated","createAnnotationToolbarForMobile","drawFormField","addInCollection","updateDeleteItems","addedAnnot","add","enableShapeLabel","getItemFromSessionStorage","Key","FormField","collectionData","csData","addAnnotationComments","opacity","updateAnnotationModifiedDate","modifiedDate","getDateAndTime","strokeColor","fillColor","updateOpacityValue","thickness","borderDashArray","borderStyle","sourceDecoraterShapes","getArrowType","lineHeadStart","taregetDecoraterShapes","lineHeadEnd","updateCollectionForLineProperty","undoAction","isFreeTextValueChange","dynamicText","fontColor","fontSize","fontFamily","textAlign","font","rotateAngle","isMultiline","undoRedoMultiline","updateFormFieldPropertiesChanges","updateFormFieldValueChange","spanElement","annotationObj","redoTextMarkupAction","isUpdate","sType","redoAction","canvass","undefined","renderMultilineText","renderTextbox","formFieldModel","getFormField","getFormFiledIndex","inputElement","firstElementChild","updateValuePropertyChange","isSelected","updateIsSelectedPropertyChange","selectedIndex","k","options","selected","includes","checkboxDivElement","isChecked","updateIsCheckedPropertyChange","updateTextboxFormDesignerProperties","updateCheckboxFormDesignerProperties","updateRadioButtonDesignerProperties","updateDropdownFormDesignerProperties","updateListBoxFormDesignerProperties","updateSignatureTextboxProperties","pdfAnnotationBase","isAnnotationDelete","updateUndoRedoButtons","styles","popupNoteAuthor","appendChild","popupNoteContent","mainContainer","showPopupNote","event","color","author","note","mainContainerPosition","getBoundingClientRect","popupNoteClientRect","textContent","backgroundColor","topPosition","pageY","leftPosition","pageX","hidePopupNote","createTextMarkupPopup","_this","elementId","popupElement","headerElement","authorPopupElement","closeBtn","modifiedDateElement","contentContainer","noteContentElement","contentEditable","saveClosePopupMenu","onPopupElementMoveStart","onPopupElementMove","onPopupElementMoveEnd","focus","changedTouches","target","childNodes","isPopupMenuMoved","popupElementClientRect","clientX","clientY","currentAnnotPageNumber","parseFloat","top_1","clientPosition","saveNoteContent","innerText","closePopupMenu","showAnnotationPopup","getEventPageNumber","getProperDate","canvasPosition","modifyOpacity","args","isOpacity","clonedObject","redoClonedObject","opacityValue","fireSignaturePropertiesChange","signatureName","triggerAnnotationPropChange","modifyFontColor","currentColor","modifyFontFamily","currentValue","enableAutoFit","updateFontFamilyRenderSize","modifyFontSize","isInteracted","freeTextAnnotation","addInuptElemet","previousFontSize","inputBoxElement","scrollHeight","inputEleHeight","inputEleWidth","zoomFactor","heightDiff","y_1","offsetY","abs","widthDiff","x_1","offsetX","renderSelector","modifyTextAlignment","modifyTextProperties","fontInfo","isBold","isItalic","isUnderline","isStrikeout","modifyThickness","thicknessValue","modifyStrokeColor","modifyFillColor","modifyDynamicTextValue","s","previousText","annotationBase","returnObj","modifyInCollection","modifySignatureCollection","modifySignatureInkCollection","createPropertiesWindow","elementID","dialogDiv","appearanceTab","createAppearanceTab","propertiesDialog","showCloseIcon","closeOnEscape","isModal","header","localeObj","getConstant","content","close","destroyPropertiesWindow","buttons","buttonModel","isPrimary","onOkClicked","onCancelClicked","appendTo","startArrowDropDown","createContent","getArrowString","outerHTML","endArrowDropDown","thicknessBox","strokeWidth","fillColorPicker","fill","refreshColorPicker","strokeColorPicker","updateColorInIcon","fillDropDown","strokeDropDown","opacitySlider","updateOpacityIndicator","strokeDashArray","lineStyleDropDown","createDropDownContent","selectedLineStyle","selectedLineDashArray","leaderLengthBox","lineStartElement","lineEndElement","lineStyleElement","_dotnetInstance","invokeMethodAsync","updatePropertiesWindowInBlazor","thicknessElement","querySelector","fillColorElement","strokeColorElement","leaderLengthElement","onStrokeColorChange","onFillColorChange","destroy","dialogElement","colorPick","setProperties","refresh","items","text","appearanceDiv","lineStyleContainer","lineHeadStartElement","createInputElement","cssClass","onStartArrowHeadStyleSelect","lineHeadEndElement","borderStyleContainer","onEndArrowHeadStyleSelect","dropDownTarget","createStyleList","format","min","max","colorStyleContainer","createColorPicker","change","hex","toggle","createDropDownButton","beforeOpen","onFillDropDownBeforeOpen","open","onStrokeDropDownBeforeOpen","opacityContainer","opacityElement","lineLengthElement","divElement","ulElement","body","solidLi","createListForStyle","setThickness","dottedLi","dashedLi","idString","isNoColor","colorPicker","inline","mode","enableOpacity","showButtons","modeSwitcher","noColor","iconClass","dropDownButton","iconCss","borderBottomColor","colorElement","liElement","item","labelText","inputType","input","isLabelNeeded","container","label","opacityIndicator","textBoxInput","startArrow","endArrow","getArrowTypeFromDropDown","getValue","newNode","isColorChanged","isStrokeColorChanged","isThicknessChanged","isOpacityChanged","isLineHeadStartStyleChanged","isLineHeadEndStyleChanged","isBorderDashArrayChanged","renderAnnotations","hide","arrowType","arrow","onAnnotationMouseUp","enableBasedOnType","updateAnnnotationPropertyItems","disableTextSelectionMode","isPanMode","designerMode","isSkip","inkAnnotationSelected","isInuptBoxInFocus","enableAnnotationPropertiesTools","enableFreeTextAnnotationPropertiesTools","onShapesMouseup","isToolMoved","prevPosition","currentPosition","dragging","setting","lineHeadStartStyle","lineHeadEndStyle","isAnnotationAdded","renderShapeAnnotations","renderMeasureShapeAnnotations","triggerAnnotationResize","triggerAnnotationMove","annotationMenuObj","isSignatureEditable","enableItems","clearTextMarkupMode","clearMeasureMode","clearShapeMode","setCurrentColorInPicker","properties","slice","isFieldReadOnly","isAnnotationToolbarVisible","isFormDesignerToolbarVisible","formDesignerMainDiv","formDesignerToolbarModule","showFormDesignerToolbar","formDesignerItem","adjustViewer","isNewlyAdded","labelContent","addTextToComments","calculateArea","calculateVolume","enableToolbar","createPropertyTools","editIcon","enableStampAnnotationPropertiesTools","enableSignaturePropertiesTools","propName","createMobileAnnotationToolbar","date","dateObject","Date","isNaN","getFullYear","dateString","getMonth","getDate","getHours","getMinutes","getSeconds","pageAnnotations","getAnnotationWithId","eventTarget","eventParentElement","pageString","annotationEvent","getAnnotationComments","commentsAnnotations","parentAnnotation","newArray","Author","ModifiedDate","Note","state","stateModel","comments","review","State","StateModel","parentId","IsLock","getRandomNumber","replace","c","random","v","createGUID","createAnnotationLayer","pageWidth","pageHeight","displayMode","updateCanvas","annotationCanvas","resizeAnnotations","applyElementStyles","clearAnnotationCanvas","zoom","ratio","getZoomRatio","shapeAnnotation","measureShapeAnnotation","isImportAnnotations","isAnnotOrderAction","renderFreeTextAnnotations","refreshCanvasDiagramLayer","isInkAdded","currentcanvas","getWindowDevicePixelRatio","context","getContext","setTransform","beginPath","lineJoin","lineCap","lineWidth","strokeStyle","globalAlpha","updateInkDataWithZoom","j","pathValue","command","moveTo","lineTo","stroke","closePath","renderTextMarkupAnnotationsInPage","storeAnnotations","isFormStorageExceed","clearFormFieldStorage","pageAnnotation","annotationStringified","annotObject_1","pageIndex_1","markupAnnotation","decoratorShapes","getArrowTypeForCollection","getBounds","bound","pageDetails","rotation","getInkBounds","getVertexPoints","points","points1","point","points2","points3","getStoredAnnotations","shapeAnnotations","isColor","isStroke","isThickness","isLineStart","isLineEnd","isDashArray","isFreeText","currentText","eventArgs","isFreeTextChanged","trigger","triggerAnnotationAdd","labelSettings","labelOpacity","labelFillColor","fireAnnotationAdd","annotationBounds","previousPosition","oldProperties","fireAnnotationResize","fireSignatureResize","isMoving","fireSignatureMove","fireAnnotationMoving","fireAnnotationMove","annotationSelect","isDblClick","annotSettings","subType","textMarkupContent","textMarkupStartIndex","textMarkupEndIndex","fontStyle","updateFreeTextFontStyle","calibrate","overlappedCollection","getOverlappedAnnotations","enableMultiLineOverlap","isOverlapped","orderTextMarkupBounds","clickedPosition","overlappedObject","addFreeTextProperties","isNewStamp","fireAnnotationSelect","module","multiPageCollection","multiPageCollectionList","fireAnnotationDoubleClick","selectSignature","signatureId","annotBounds","signatureAdded","signature","fireSignatureSelect","editSignature","deletComment","modifyCommentDeleteProperty","addReplyComments","replyComment","commentType","commentsMainDiv","createCommentDiv","saveCommentDiv","editComments","commentId","editComment","editAnnotation","isTextMarkupUpdate","allowedInteractions","allowedInteractionsCount","Select","Move","Resize","Delete","PropertyChange","None","updateAnnotationAllowedInteractions","getAnnotations","isPrint","isCommentLock","j_1","nextComment","j_2","modifyAnnotationProperty","manageAnnotations","modifyOpacityProperty","modifyColorProperty","stampAnnotationType","stampAnnotationPath","imageSource","annotationPropertyChange","calculateAnnotationBounds","isSourceDecoraterShapesChanged","isTargetDecoraterShapesChanged","indent","updateFreeTextProperties","depth","volumeDepth","characterLength","highestTextNode","textNodes","textboxValue","textNodeData","measureText","highestTextNodeData","textwidth","ceil","maxWidth","isCurrentAnnotationLock","setFreeTextFontStyle","isReadonly","updateAnnotationComments","newCommentDiv","commentObj","updateCollection","convertBounds","Y","X","Width","Height","noteContent","updateMeasurementSettings","enableAnnotation","ratioString","measurementSettings","conversionUnit","scaleRatio","displayUnit","updateMeasureValues","newAnnot","modifyAnnotationProperties","newAnnotation","isLocked","updateAnnotationAuthor","annotationSubType","annotationAuthor","perimeterSettings","areaSettings","volumeSettings","nameToHash","colour","colours","findAnnotationSettings","isSettings","customStampSettings","settings","minWidth","minHeight","maxHeight","updateSettings","updateAnnotationSettings","AnnotType","AnnotationType","pageCollections","getPageShapeAnnotations","findOverlappedAnnotations","inkObject","inkAnnotObject","inkAnnotations","shapeObject","shapeAnnotObject","measureObject","measureAnnotationObject","measureAnnotations","stampObject","stampAnnotationObject","stampAnnotations","freeTextObject","freeTextAnnotationObject","freeTextAnnotations","stickyObject","stickyNotesAnnotationObject","stickyNotesAnnotations","textMarkupObject","textMarkupAnnotationObject","textMarkupAnnotations","calculateOverlappedAnnotationBounds","selectBounds","totalHeight","totalWidth","checkOverlappedCollections","boundsCount","annotationBoundsCollection","findAnnotationMode","importCollection","stickyNotesAnnotation","isAdded","updateModifiedDate","setAnnotationModifiedDate","modifiedTime","modifiedDateTime","time","dateStringSpilt","modifiedDateToUTC","toISOString","clear","shapeCount","measureShapeCount","stampPageNumber","freeTextPageNumbers","inkAnnotationindex","retrieveAnnotationCollection","interaction","annotationInteraction","checkContextMenuDeleteItem","menuObj","findCurrentAnnotation","isEnableDelete","checkAllowedInteractionSettings","textMarkupAnnotationType","checkIsLockSettings","checkLockSettings","locked","islock","restrictContextMenu","isRestrict","annotationAllowedInteraction","cValue","convertRgbToNumberArray","rgbToHex","convertToHsvString","rgbToHsv","apply","hsvToRgb","convertToRgbString","roundValue","rgb","hexToRgb","map","n","join","hsv","len","tempValue","len_1","charAt","trim","Number","toFixed","bigInt","h","r","g","b","d","f","p","q","t","floor","substr","exportAnnotationsAsStream","dataFormat","isAnnotations","updateExportItem","Promise","resolve","reject","createRequestForExportAnnotations","then","obj","getModuleName","getVertexPointsXY","addAnnotation","offset","pdfAnnotation","updateAddAnnotationDetails","isAddAnnotationProgramatically","customStamps","pdf","isAddAnnotation","importAnnotations","triggerAnnotationAddEvent","borderColor","borderWidth","defaultText","textAlignment","fireSignatureAdd","fireAnnotationUnSelect","autoFitFreeText","padding","paddingLeft","zIndex"],"sources":["/Users/saleem/Desktop/KClient/Web App/Ver_3.6/User Interface/website_Source files/node_modules/@syncfusion/ej2-pdfviewer/src/pdfviewer/annotation/annotation.js"],"sourcesContent":["import { TextMarkupAnnotation, ShapeAnnotation, StampAnnotation, StickyNotesAnnotation, MeasureAnnotation, InkAnnotation, AllowedInteraction, DynamicStampItem, SignStampItem, StandardBusinessStampItem } from '../index';\nimport { createElement, Browser, isNullOrUndefined, isBlazor } from '@syncfusion/ej2-base';\nimport { NumericTextBox, Slider, ColorPicker } from '@syncfusion/ej2-inputs';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\nimport { processPathData, splitArrayCollection } from '@syncfusion/ej2-drawings';\nimport { isLineShapes, cloneObject } from '../drawing/drawing-util';\nimport { NodeDrawingTool, LineTool, MoveTool, ResizeTool, ConnectTool } from '../drawing/tools';\nimport { updateDistanceLabel, updateRadiusLabel, updatePerimeterLabel, updateCalibrateLabel } from '../drawing/connector-util';\nimport { FreeTextAnnotation } from './free-text-annotation';\nimport { InputElement } from './input-element';\nimport { InPlaceEditor } from '@syncfusion/ej2-inplace-editor';\n/**\n * The `Annotation` module is used to handle annotation actions of PDF viewer.\n */\nvar Annotation = /** @class */ (function () {\n    /**\n     * @param pdfViewer\n     * @param viewerBase\n     * @param pdfViewer\n     * @param viewerBase\n     * @private\n     */\n    function Annotation(pdfViewer, viewerBase) {\n        this.isUndoRedoAction = false;\n        this.isUndoAction = false;\n        this.annotationSelected = true;\n        this.isAnnotDeletionApiCall = false;\n        this.removedDocumentAnnotationCollection = [];\n        /**\n         * @private\n         */\n        this.isShapeCopied = false;\n        /**\n         * @private\n         */\n        this.actionCollection = [];\n        /**\n         * @private\n         */\n        this.redoCollection = [];\n        /**\n         * @private\n         */\n        this.isPopupNoteVisible = false;\n        /**\n         * @private\n         */\n        this.undoCommentsElement = [];\n        /**\n         * @private\n         */\n        this.redoCommentsElement = [];\n        /**\n         * @private\n         */\n        this.selectAnnotationId = null;\n        /**\n         * @private\n         */\n        this.isAnnotationSelected = false;\n        /**\n         * @private\n         */\n        this.annotationPageIndex = null;\n        this.previousIndex = null;\n        // eslint-disable-next-line\n        this.overlappedAnnotations = [];\n        /**\n         * @private\n         */\n        // eslint-disable-next-line\n        this.overlappedCollections = [];\n        /**\n         * @private\n         */\n        // eslint-disable-next-line\n        this.isFormFieldShape = false;\n        /**\n         * @private\n         */\n        // eslint-disable-next-line\n        this.removedAnnotationCollection = [];\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = viewerBase;\n        if (this.pdfViewer.enableTextMarkupAnnotation) {\n            this.textMarkupAnnotationModule = new TextMarkupAnnotation(this.pdfViewer, this.pdfViewerBase);\n        }\n        if (this.pdfViewer.enableShapeAnnotation) {\n            this.shapeAnnotationModule = new ShapeAnnotation(this.pdfViewer, this.pdfViewerBase);\n        }\n        if (this.pdfViewer.enableMeasureAnnotation) {\n            this.measureAnnotationModule = new MeasureAnnotation(this.pdfViewer, this.pdfViewerBase);\n        }\n        this.stampAnnotationModule = new StampAnnotation(this.pdfViewer, this.pdfViewerBase);\n        this.stickyNotesAnnotationModule = new StickyNotesAnnotation(this.pdfViewer, this.pdfViewerBase);\n        this.freeTextAnnotationModule = new FreeTextAnnotation(this.pdfViewer, this.pdfViewerBase);\n        this.inputElementModule = new InputElement(this.pdfViewer, this.pdfViewerBase);\n        this.inkAnnotationModule = new InkAnnotation(this.pdfViewer, this.pdfViewerBase);\n    }\n    /**\n     * Set annotation type to be added in next user interaction in PDF Document.\n     *\n     * @param type\n     * @param dynamicStampItem\n     * @param signStampItem\n     * @param standardBusinessStampItem\n     * @returns void\n     */\n    // eslint-disable-next-line max-len\n    Annotation.prototype.setAnnotationMode = function (type, dynamicStampItem, signStampItem, standardBusinessStampItem) {\n        var allowServerDataBind = this.pdfViewer.allowServerDataBinding;\n        this.pdfViewer.enableServerDataBinding(false);\n        if (this.pdfViewer.tool === \"Stamp\" && this.pdfViewer.toolbarModule) {\n            this.pdfViewer.toolbarModule.updateStampItems();\n        }\n        if (this.pdfViewer.toolbarModule && this.pdfViewer.toolbarModule.annotationToolbarModule) {\n            this.pdfViewer.toolbarModule.annotationToolbarModule.resetFreeTextAnnot();\n        }\n        type !== 'None' ? this.triggerAnnotationUnselectEvent() : null;\n        this.pdfViewer.tool = \"\";\n        if (this.pdfViewer.toolbarModule) {\n            this.pdfViewer.toolbarModule.deSelectCommentAnnotation();\n        }\n        if (type === 'None') {\n            this.clearAnnotationMode();\n        }\n        else if (type === 'Highlight' || type === 'Strikethrough' || type === 'Underline') {\n            if (this.textMarkupAnnotationModule) {\n                this.textMarkupAnnotationModule.isSelectionMaintained = false;\n                this.textMarkupAnnotationModule.drawTextMarkupAnnotations(type.toString());\n            }\n        }\n        else if (type === 'Line' || type === 'Arrow' || type === 'Rectangle' || type === 'Circle' || type === 'Polygon') {\n            if (this.shapeAnnotationModule) {\n                this.shapeAnnotationModule.setAnnotationType(type);\n            }\n        }\n        else if (type === 'Distance' || type === 'Perimeter' || type === 'Area' || type === 'Radius' || type === 'Volume') {\n            if (this.measureAnnotationModule) {\n                this.measureAnnotationModule.setAnnotationType(type);\n            }\n        }\n        else if (type === 'FreeText' && this.freeTextAnnotationModule) {\n            this.freeTextAnnotationModule.setAnnotationType('FreeText');\n            this.freeTextAnnotationModule.isNewFreeTextAnnot = true;\n            this.freeTextAnnotationModule.isNewAddedAnnot = true;\n        }\n        else if (type === 'HandWrittenSignature') {\n            this.pdfViewerBase.signatureModule.setAnnotationMode();\n        }\n        else if (type === 'Initial') {\n            this.pdfViewerBase.signatureModule.setInitialMode();\n        }\n        else if (type === 'Ink') {\n            this.inkAnnotationModule.setAnnotationMode();\n        }\n        else if (type === 'StickyNotes') {\n            this.pdfViewerBase.isCommentIconAdded = true;\n            this.pdfViewerBase.isAddComment = true;\n            // eslint-disable-next-line max-len\n            var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1));\n            if (pageDiv) {\n                pageDiv.addEventListener('mousedown', this.pdfViewer.annotationModule.stickyNotesAnnotationModule.drawIcons.bind(this));\n            }\n        }\n        else if (type === 'Stamp') {\n            this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode = true;\n            this.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected = true;\n            this.pdfViewerBase.stampAdded = true;\n            if (dynamicStampItem) {\n                // eslint-disable-next-line\n                var stampName = DynamicStampItem[dynamicStampItem];\n                this.pdfViewerBase.isDynamicStamp = true;\n                this.stampAnnotationModule.retrieveDynamicStampAnnotation(stampName);\n            }\n            else if (signStampItem) {\n                // eslint-disable-next-line\n                var stampName = SignStampItem[signStampItem];\n                this.pdfViewerBase.isDynamicStamp = false;\n                this.stampAnnotationModule.retrievestampAnnotation(stampName);\n            }\n            else if (standardBusinessStampItem) {\n                // eslint-disable-next-line\n                var stampName = StandardBusinessStampItem[standardBusinessStampItem];\n                this.pdfViewerBase.isDynamicStamp = false;\n                this.stampAnnotationModule.retrievestampAnnotation(stampName);\n            }\n        }\n        this.pdfViewer.enableServerDataBinding(allowServerDataBind, true);\n        this.pdfViewerBase.initiateTextSelection();\n    };\n    Annotation.prototype.deleteAnnotationById = function (annotationId) {\n        if (annotationId) {\n            this.isAnnotDeletionApiCall = true;\n            this.annotationSelected = false;\n            this.selectAnnotation(annotationId);\n            this.deleteAnnotation();\n            this.isAnnotDeletionApiCall = false;\n        }\n    };\n    Annotation.prototype.clearAnnotationMode = function () {\n        if (this.textMarkupAnnotationModule) {\n            this.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n        }\n        if (this.freeTextAnnotationModule) {\n            this.freeTextAnnotationModule.isNewFreeTextAnnot = false;\n            this.freeTextAnnotationModule.isNewAddedAnnot = false;\n        }\n        if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n            this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAddMode = '';\n        }\n        if (this.pdfViewerBase.isShapeAnnotationModule()) {\n            this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode = '';\n        }\n        if (this.pdfViewerBase.isCalibrateAnnotationModule()) {\n            this.pdfViewer.annotation.measureAnnotationModule.currentAnnotationMode = '';\n        }\n        if (this.pdfViewer.annotationModule.inkAnnotationModule) {\n            // eslint-disable-next-line\n            var currentPageNumber = parseInt(this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);\n            this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(currentPageNumber);\n        }\n    };\n    Annotation.prototype.deleteAnnotation = function () {\n        if (this.textMarkupAnnotationModule) {\n            this.textMarkupAnnotationModule.deleteTextMarkupAnnotation();\n        }\n        var selectedAnnotation = this.pdfViewer.selectedItems.annotations[0];\n        if (selectedAnnotation) {\n            var data = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_formfields');\n            var formFieldsData = JSON.parse(data);\n            var newFormFieldsData = [];\n            if (formFieldsData) {\n                for (var x = 0; x < formFieldsData.length; x++) {\n                    if (formFieldsData[x].uniqueID == selectedAnnotation.id) {\n                        formFieldsData[x].Value = '';\n                        for (var y = 0; y < formFieldsData.length; y++) {\n                            if (formFieldsData[y].Name === 'ink') {\n                                formFieldsData[y].Value = '';\n                            }\n                            if (formFieldsData[x].FieldName === formFieldsData[y].FieldName && formFieldsData[y].Name === 'ink') {\n                                formFieldsData.splice(y, 1);\n                            }\n                        }\n                        newFormFieldsData.push(formFieldsData[x]);\n                    }\n                    else {\n                        newFormFieldsData.push(formFieldsData[x]);\n                    }\n                }\n                window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_formfields', JSON.stringify(newFormFieldsData));\n            }\n        }\n        var isLock = false;\n        var isReadOnly = false;\n        if (this.pdfViewer.selectedItems.annotations.length > 0) {\n            // eslint-disable-next-line\n            var annotation_1 = this.pdfViewer.selectedItems.annotations[0];\n            var type = annotation_1.shapeAnnotationType;\n            if (type === 'Path' || annotation_1.formFieldAnnotationType === 'SignatureField' || annotation_1.formFieldAnnotationType === 'InitialField' || type === 'HandWrittenSignature' || type === 'SignatureText' || type === 'SignatureImage') {\n                var inputFields = document.getElementById(annotation_1.id);\n                if (inputFields && inputFields.disabled) {\n                    isReadOnly = true;\n                }\n            }\n            if (annotation_1.annotationSettings) {\n                isLock = annotation_1.annotationSettings.isLock;\n                if (isLock && this.checkAllowedInteractions('Delete', annotation_1)) {\n                    isLock = false;\n                }\n            }\n            if (!isLock && !isReadOnly) {\n                var pageNumber = annotation_1.pageIndex;\n                // eslint-disable-next-line\n                var shapeType = annotation_1.shapeAnnotationType;\n                // eslint-disable-next-line\n                var undoElement = void 0;\n                if (shapeType === 'Line' || shapeType === 'LineWidthArrowHead' || shapeType === 'Polygon' || shapeType === 'Ellipse' || shapeType === 'Rectangle' || shapeType === 'Radius' || shapeType === 'Distance') {\n                    // eslint-disable-next-line max-len\n                    if (isNullOrUndefined(annotation_1.measureType) || annotation_1.measureType === '') {\n                        this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(annotation_1, 'shape');\n                        this.updateImportAnnotationCollection(annotation_1, pageNumber, 'shapeAnnotation');\n                    }\n                    else {\n                        // eslint-disable-next-line max-len\n                        this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(annotation_1, 'measure');\n                        // eslint-disable-next-line max-len\n                        this.updateImportAnnotationCollection(annotation_1, pageNumber, 'measureShapeAnnotation');\n                    }\n                    undoElement = this.modifyInCollections(annotation_1, 'delete');\n                }\n                else if (shapeType === 'FreeText') {\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(annotation_1, 'FreeText', 'delete');\n                    undoElement = this.modifyInCollections(annotation_1, 'delete');\n                    this.updateImportAnnotationCollection(annotation_1, pageNumber, 'freeTextAnnotation');\n                }\n                else if (shapeType === 'HandWrittenSignature' || shapeType === 'SignatureImage' || shapeType === 'SignatureText') {\n                    undoElement = this.modifyInCollections(annotation_1, 'delete');\n                }\n                else if (shapeType === 'Ink') {\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(annotation_1, 'Ink', 'delete');\n                    undoElement = this.modifyInCollections(annotation_1, 'delete');\n                    this.updateImportAnnotationCollection(annotation_1, pageNumber, 'signatureInkAnnotation');\n                }\n                else {\n                    undoElement = this.pdfViewer.selectedItems.annotations[0];\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(undoElement, undoElement.shapeAnnotationType, 'delete');\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.annotation.stampAnnotationModule.updateSessionStorage(annotation_1, null, 'delete');\n                }\n                if (shapeType === 'StickyNotes') {\n                    this.updateImportAnnotationCollection(annotation_1, pageNumber, 'stickyNotesAnnotation');\n                }\n                if (shapeType === 'Stamp' || 'Image') {\n                    this.updateImportAnnotationCollection(annotation_1, pageNumber, 'stampAnnotations');\n                }\n                // eslint-disable-next-line max-len\n                this.pdfViewer.annotation.addAction(pageNumber, null, annotation_1, 'Delete', '', undoElement, annotation_1);\n                // eslint-disable-next-line\n                var removeDiv = void 0;\n                if (annotation_1.annotName !== '') {\n                    removeDiv = document.getElementById(annotation_1.annotName);\n                }\n                else {\n                    if (undoElement) {\n                        if (undoElement.annotName !== '') {\n                            removeDiv = document.getElementById(undoElement.annotName);\n                        }\n                    }\n                }\n                this.removeCommentPanelDiv(removeDiv);\n                var selectedAnnot = this.pdfViewer.selectedItems.annotations[0];\n                var annotationId = selectedAnnot.annotName;\n                var annotType = this.getAnnotationType(selectedAnnot.shapeAnnotationType, selectedAnnot.measureType);\n                if (shapeType === 'Path' || selectedAnnot.formFieldAnnotationType === 'SignatureField' || selectedAnnot.formFieldAnnotationType === 'InitialField' || shapeType === 'HandWrittenSignature' || shapeType === 'SignatureText' || shapeType === 'SignatureImage') { // eslint-disable-next-line\n                    var formFieldCollection = this.pdfViewer.retrieveFormFields();\n                    var index = formFieldCollection.findIndex(function (el) { return el.id === annotation_1.id; });\n                    var formFieldName = void 0;\n                    if (index > -1) {\n                        formFieldName = formFieldCollection[index].name;\n                    }\n                    for (var m = 0; m < formFieldCollection.length; m++) {\n                        if (selectedAnnot.id === formFieldCollection[m].id || (isNullOrUndefined(formFieldName) && formFieldName === formFieldCollection[m].name)) {\n                            formFieldCollection[m].value = '';\n                            formFieldCollection[m].signatureType = '';\n                            var annotation_2 = this.getAnnotationsFromCollections(formFieldCollection[m].id);\n                            this.updateInputFieldDivElement(annotation_2);\n                            undoElement = this.modifyInCollections(annotation_2, 'delete');\n                            // eslint-disable-next-line max-len\n                            this.pdfViewer.annotation.addAction(annotation_2.pageIndex, null, annotation_2, 'Delete', '', undoElement, annotation_2);\n                            if (this.pdfViewer.formDesignerModule && selectedAnnot.formFieldAnnotationType)\n                                this.updateFormFieldCollection(annotation_2);\n                            else\n                                this.updateAnnotationCollection(annotation_2);\n                            this.pdfViewer.remove(annotation_2);\n                        }\n                    }\n                    if (this.pdfViewer.formDesignerModule && selectedAnnot.formFieldAnnotationType)\n                        this.updateFormFieldCollection(annotation_1);\n                    else\n                        this.updateAnnotationCollection(annotation_1);\n                }\n                if (this.pdfViewer.formDesignerModule && selectedAnnot.formFieldAnnotationType)\n                    this.updateFormFieldCollection(annotation_1);\n                else\n                    this.updateAnnotationCollection(annotation_1);\n                var formFieldObj = this.pdfViewer.nameTable[annotation_1.id.split(\"_\")[0]];\n                if (formFieldObj != null && (formFieldObj.formFieldAnnotationType === 'SignatureField' || formFieldObj.formFieldAnnotationType === 'InitialField')) {\n                    var index = this.pdfViewer.formFieldCollections.findIndex(function (el) { return el.id === annotation_1.id.split(\"_\")[0]; });\n                    var formFieldName = void 0;\n                    if (index > -1) {\n                        formFieldName = this.pdfViewer.formFieldCollections[index].name;\n                    }\n                    for (var i = 0; i < this.pdfViewer.formFieldCollections.length; i++) {\n                        if (formFieldName === this.pdfViewer.formFieldCollections[i].name) {\n                            var formFieldsIndex = this.pdfViewer.formFieldCollections[i];\n                            this.pdfViewer.fireFormFieldPropertiesChangeEvent(\"formFieldPropertiesChange\", formFieldsIndex, formFieldsIndex.pageIndex, true, false, false, false, false, false, false, false, false, false, false, false, false, false, false, formFieldsIndex.value, \"\");\n                            formFieldsIndex.value = \"\";\n                            formFieldsIndex.signatureType = \"\";\n                            this.pdfViewer.formDesignerModule.updateFormFieldCollections(formFieldsIndex);\n                            var annotation_3 = this.getAnnotationsFromCollections(formFieldsIndex.id + '_content');\n                            if (!isNullOrUndefined(annotation_3)) {\n                                undoElement = this.modifyInCollections(annotation_3, 'delete');\n                                // eslint-disable-next-line max-len\n                                this.pdfViewer.annotation.addAction(annotation_3.pageIndex, null, annotation_3, 'Delete', '', undoElement, annotation_3);\n                                this.updateInputFieldDivElement(annotation_3);\n                                var formFieldObject = this.pdfViewer.nameTable[annotation_3.id.split(\"_\")[0]];\n                                formFieldObject.wrapper.children.splice(formFieldObject.wrapper.children.indexOf(annotation_3.wrapper.children[0]), 1);\n                                this.pdfViewer.remove(annotation_3);\n                            }\n                        }\n                    }\n                }\n                this.pdfViewer.remove(annotation_1);\n                this.pdfViewer.renderDrawing();\n                this.pdfViewer.clearSelection(pageNumber);\n                this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection, '_formDesigner');\n                this.pdfViewerBase.updateDocumentEditedProperty(true);\n                this.pdfViewerBase.tool = null;\n                this.pdfViewer.tool = null;\n                if (selectedAnnot.shapeAnnotationType === 'HandWrittenSignature' || selectedAnnot.shapeAnnotationType === 'SignatureText' || selectedAnnot.shapeAnnotationType === 'SignatureImage' || selectedAnnot.shapeAnnotationType === 'Path') {\n                    // eslint-disable-next-line max-len\n                    var bounds = { left: selectedAnnot.bounds.x, top: selectedAnnot.bounds.y, width: selectedAnnot.bounds.width, height: selectedAnnot.bounds.height };\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.fireSignatureRemove(pageNumber, selectedAnnot.id, selectedAnnot.shapeAnnotationType, bounds);\n                }\n                else if (this.pdfViewer.annotationModule) {\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.fireAnnotationRemove(pageNumber, annotationId, annotType, selectedAnnot.bounds);\n                }\n                if (this.pdfViewer.textSelectionModule) {\n                    this.pdfViewer.textSelectionModule.enableTextSelectionMode();\n                }\n            }\n        }\n        this.updateToolbar(true);\n        if (this.pdfViewer.toolbarModule) {\n            if (this.pdfViewer.toolbarModule.annotationToolbarModule && !isLock) {\n                this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(false, true);\n                this.pdfViewer.toolbarModule.annotationToolbarModule.enableTextMarkupAnnotationPropertiesTools(false);\n            }\n        }\n    };\n    /**\n     * @param annotationId\n    */\n    // eslint-disable-next-line max-len\n    Annotation.prototype.getAnnotationsFromCollections = function (annotationId) {\n        var collections = this.pdfViewer.annotations;\n        if (collections && annotationId) {\n            for (var i = 0; i < collections.length; i++) {\n                if (collections[i].id === annotationId) {\n                    return collections[i];\n                }\n            }\n        }\n    };\n    ;\n    /**\n     * @param annotation\n    */\n    Annotation.prototype.updateInputFieldDivElement = function (annotation) {\n        var inputFields = document.getElementById(annotation.id);\n        var signatureFieldElement = document.getElementById(annotation.id + \"_html_element\");\n        if (inputFields === null && !isNullOrUndefined(signatureFieldElement)) {\n            inputFields = signatureFieldElement.children[0].children[0];\n        }\n        if (inputFields && inputFields.classList.contains('e-pdfviewer-signatureformfields-signature')) {\n            inputFields.className = 'e-pdfviewer-signatureformfields';\n            inputFields.style.pointerEvents = '';\n            inputFields.parentElement.style.pointerEvents = '';\n        }\n        if (this.pdfViewer.formDesignerModule) {\n            this.pdfViewer.formDesignerModule.updateSignatureValue(annotation.id);\n        }\n        else {\n            this.pdfViewer.formFieldsModule.updateDataInSession(inputFields, '');\n        }\n    };\n    /**\n     * @param annotation\n     * @param pageNumber\n     * @param annotation\n     * @param pageNumber\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.storeAnnotationCollections = function (annotation, pageNumber) {\n        if (this.isFormFieldShape) {\n            var collectionDetails = this.checkFormDesignCollection(annotation);\n            var selectAnnotation = cloneObject(annotation);\n            selectAnnotation.formFieldId = annotation.annotName;\n            selectAnnotation.pageNumber = pageNumber;\n            delete selectAnnotation.annotName;\n            if (annotation.id) {\n                selectAnnotation.uniqueKey = annotation.id;\n                delete selectAnnotation.id;\n            }\n            if (collectionDetails.isExisting) {\n                this.pdfViewer.formFieldCollection.splice(collectionDetails.position, 0, selectAnnotation);\n            }\n            else {\n                this.pdfViewer.formFieldCollection.push(selectAnnotation);\n            }\n        }\n        else {\n            // eslint-disable-next-line\n            var collectionDetails = this.checkAnnotationCollection(annotation);\n            // eslint-disable-next-line\n            var selectAnnotation = cloneObject(annotation);\n            selectAnnotation.annotationId = annotation.annotName;\n            selectAnnotation.pageNumber = pageNumber;\n            delete selectAnnotation.annotName;\n            if (annotation.shapeAnnotationType === 'stamp') {\n                selectAnnotation.uniqueKey = annotation.randomId;\n                delete selectAnnotation.randomId;\n            }\n            if (annotation.shapeAnnotationType === 'sticky') {\n                selectAnnotation.uniqueKey = annotation.annotName;\n            }\n            if (annotation.id) {\n                selectAnnotation.uniqueKey = annotation.id;\n                delete selectAnnotation.id;\n            }\n            // eslint-disable-next-line\n            if (selectAnnotation.customData && annotation.customData && JSON.stringify(selectAnnotation.customData) !== JSON.stringify(annotation.customData)) {\n                selectAnnotation.customData = annotation.customData;\n            }\n            if (collectionDetails.isExisting) {\n                this.pdfViewer.annotationCollection.splice(collectionDetails.position, 0, selectAnnotation);\n            }\n            else {\n                this.pdfViewer.annotationCollection.push(selectAnnotation);\n            }\n        }\n    };\n    Annotation.prototype.checkFormDesignCollection = function (annotation) {\n        // eslint-disable-next-line\n        var collections = this.pdfViewer.formFieldCollection;\n        if (collections && annotation) {\n            for (var i = 0; i < collections.length; i++) {\n                if (collections[i].formFieldId === annotation.annotName) {\n                    this.pdfViewer.formFieldCollection.splice(i, 1);\n                    return { isExisting: true, position: i };\n                }\n            }\n        }\n        return { isExisting: false, position: null };\n    };\n    Annotation.prototype.updateFormFieldCollection = function (annotation) {\n        // eslint-disable-next-line\n        var collections = this.pdfViewer.formFieldCollection;\n        if (collections && annotation) {\n            for (var i = 0; i < collections.length; i++) {\n                if (collections[i].formFieldId === annotation.annotName) {\n                    this.removedAnnotationCollection.push(collections[i]);\n                    this.pdfViewer.formFieldCollection.splice(i, 1);\n                    break;\n                }\n            }\n        }\n    };\n    /**\n     * @param annotation\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.getCustomData = function (annotation) {\n        var customData;\n        if (annotation.ExistingCustomData && !annotation.CustomData) {\n            customData = JSON.parse(annotation.ExistingCustomData);\n        }\n        else if (annotation.CustomData === null) {\n            if (annotation.shapeAnnotationType === 'sticky') {\n                customData = this.pdfViewer.stickyNotesSettings.customData;\n            }\n            if (annotation.shapeAnnotationType === 'Stamp') {\n                customData = this.pdfViewer.stampSettings.customData;\n            }\n            if (annotation.shapeAnnotationType === 'FreeText') {\n                customData = this.pdfViewer.freeTextSettings.customData;\n            }\n            if (annotation.id === 'shape') {\n                customData = this.getShapeData(annotation.ShapeAnnotationType, annotation.subject);\n            }\n            if (annotation.id === 'measure') {\n                customData = this.getMeasureData(annotation.Subject);\n            }\n            if (annotation.shapeAnnotationType === 'textMarkup') {\n                customData = this.getTextMarkupData(annotation.subject);\n            }\n            if (annotation.shapeAnnotationType === 'Ink') {\n                customData = this.pdfViewer.inkAnnotationSettings.customData;\n            }\n        }\n        else {\n            customData = annotation.CustomData;\n        }\n        return customData;\n    };\n    /**\n     * @param type\n     * @param subject\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.getShapeData = function (type, subject) {\n        var customData;\n        if (type === 'Line' && subject !== 'Arrow' && this.pdfViewer.lineSettings.customData) {\n            customData = this.pdfViewer.lineSettings.customData;\n        }\n        else if ((type === 'LineWidthArrowHead' || subject === 'Arrow') && this.pdfViewer.arrowSettings.customData) {\n            customData = this.pdfViewer.arrowSettings.customData;\n        }\n        else if ((type === 'Rectangle' || type === 'Square') && this.pdfViewer.rectangleSettings.customData) {\n            customData = this.pdfViewer.rectangleSettings.customData;\n        }\n        else if ((type === 'Ellipse' || type === 'Circle') && this.pdfViewer.circleSettings.customData) {\n            customData = this.pdfViewer.circleSettings.customData;\n        }\n        else if (type === 'Polygon' && this.pdfViewer.polygonSettings.customData) {\n            customData = this.pdfViewer.polygonSettings.customData;\n        }\n        else if (this.pdfViewer.annotationSettings.customData) {\n            customData = this.pdfViewer.annotationSettings.customData;\n        }\n        return customData;\n    };\n    /**\n     * @param type\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.getMeasureData = function (type) {\n        var customData;\n        if ((type === 'Distance' || type === 'Distance calculation') && this.pdfViewer.distanceSettings.customData) {\n            customData = this.pdfViewer.distanceSettings.customData;\n        }\n        else if ((type === 'Line' || type === 'Perimeter calculation') && this.pdfViewer.lineSettings.customData) {\n            customData = this.pdfViewer.lineSettings.customData;\n            // eslint-disable-next-line max-len\n        }\n        else if ((type === 'Polygon' || type === 'Area calculation' || type === 'Volume calculation') && this.pdfViewer.polygonSettings.customData) {\n            customData = this.pdfViewer.polygonSettings.customData;\n        }\n        else if ((type === 'Radius' || type === 'Radius calculation') && this.pdfViewer.radiusSettings.customData) {\n            customData = this.pdfViewer.radiusSettings.customData;\n        }\n        else if (this.pdfViewer.annotationSettings.customData) {\n            customData = this.pdfViewer.annotationSettings.customData;\n        }\n        return customData;\n    };\n    /**\n     * @param type\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.getTextMarkupData = function (type) {\n        var customData;\n        if (type === 'Highlight' && this.pdfViewer.highlightSettings.customData) {\n            customData = this.pdfViewer.highlightSettings.customData;\n        }\n        else if (type === 'Underline' && this.pdfViewer.underlineSettings.customData) {\n            customData = this.pdfViewer.underlineSettings.customData;\n        }\n        else if (type === 'Strikethrough' && this.pdfViewer.strikethroughSettings.customData) {\n            customData = this.pdfViewer.strikethroughSettings.customData;\n        }\n        else if (this.pdfViewer.annotationSettings.customData) {\n            customData = this.pdfViewer.annotationSettings.customData;\n        }\n        return customData;\n    };\n    /**\n     * @param type\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.getData = function (type) {\n        var customData;\n        if (type === 'FreeText' && this.pdfViewer.freeTextSettings.customData) {\n            customData = this.pdfViewer.freeTextSettings.customData;\n        }\n        else if ((type === 'image' || type === 'Stamp') && this.pdfViewer.stampSettings.customData) {\n            customData = this.pdfViewer.stampSettings.customData;\n        }\n        else if (type === 'sticky' && this.pdfViewer.stickyNotesSettings.customData) {\n            customData = this.pdfViewer.stickyNotesSettings.customData;\n        }\n        else if (this.pdfViewer.annotationSettings.customData) {\n            customData = this.pdfViewer.annotationSettings.customData;\n        }\n        return customData;\n    };\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.clearAnnotationStorage = function () {\n        // eslint-disable-next-line\n        var sessionSize = Math.round(JSON.stringify(window.sessionStorage).length / 1024);\n        var maxSessionSize = 4500;\n        if (sessionSize > maxSessionSize) {\n            var storageLength = window.sessionStorage.length;\n            // eslint-disable-next-line\n            var annotationList = [];\n            for (var i = 0; i < storageLength; i++) {\n                if (window.sessionStorage.key(i) && window.sessionStorage.key(i).split('_')[3]) {\n                    if (window.sessionStorage.key(i).split('_')[3] === 'annotations') {\n                        // eslint-disable-next-line max-len\n                        this.pdfViewerBase.annotationStorage[window.sessionStorage.key(i)] = window.sessionStorage.getItem(window.sessionStorage.key(i));\n                        annotationList.push(window.sessionStorage.key(i));\n                    }\n                }\n            }\n            if (annotationList) {\n                for (var i = 0; i < annotationList.length; i++) {\n                    window.sessionStorage.removeItem(annotationList[i]);\n                }\n            }\n        }\n    };\n    /**\n     * @param annotation\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.checkAnnotationCollection = function (annotation) {\n        // eslint-disable-next-line\n        var collections = this.pdfViewer.annotationCollection;\n        if (collections && annotation) {\n            for (var i = 0; i < collections.length; i++) {\n                if (collections[i].annotationId === annotation.annotName) {\n                    this.pdfViewer.annotationCollection.splice(i, 1);\n                    return { isExisting: true, position: i };\n                }\n            }\n        }\n        return { isExisting: false, position: null };\n    };\n    /**\n     * @param annotation\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.updateAnnotationCollection = function (annotation) {\n        // eslint-disable-next-line\n        var collections = this.pdfViewer.annotationCollection;\n        if (collections && annotation) {\n            for (var i = 0; i < collections.length; i++) {\n                if (collections[i].annotationId === annotation.annotName || collections[i].annotationId === annotation.annotationId) {\n                    this.removedAnnotationCollection.push(collections[i]);\n                    this.pdfViewer.annotationCollection.splice(i, 1);\n                    break;\n                }\n            }\n        }\n    };\n    /**\n     * @param annotation\n     * @param pageNumber\n     * @param annotationType\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.updateImportAnnotationCollection = function (annotation, pageNumber, annotationType) {\n        if (this.pdfViewerBase.isImportAction) {\n            if (this.pdfViewerBase.importedAnnotation && this.pdfViewerBase.importedAnnotation[pageNumber]) {\n                // eslint-disable-next-line\n                var currentPageAnnotations = this.pdfViewerBase.importedAnnotation[pageNumber];\n                if (currentPageAnnotations[annotationType] && !isNullOrUndefined(this.pdfViewerBase.importedAnnotation[pageNumber].annotationOrder)) {\n                    this.pdfViewerBase.importedAnnotation[pageNumber].annotationOrder = this.pdfViewerBase.importedAnnotation[pageNumber].annotationOrder.filter(function (currentAnnotation) {\n                        return !(annotation.annotName === currentAnnotation.AnnotName || annotation.annotName === currentAnnotation.annotName);\n                    });\n                }\n                if (!isNullOrUndefined(this.pdfViewerBase.importedAnnotation) && !isNullOrUndefined(this.pdfViewerBase.importedAnnotation[pageNumber]) && !isNullOrUndefined(this.pdfViewerBase.importedAnnotation[pageNumber][annotationType])) {\n                    this.pdfViewerBase.importedAnnotation[pageNumber][annotationType] = this.pdfViewerBase.importedAnnotation[pageNumber][annotationType].filter(function (currentAnnotation) {\n                        return annotation.annotName !== currentAnnotation.AnnotName;\n                    });\n                }\n            }\n        }\n        // eslint-disable-next-line\n        var documentcollections = this.pdfViewerBase.documentAnnotationCollections;\n        if (documentcollections && documentcollections[pageNumber]) {\n            // eslint-disable-next-line\n            var documentPageCollections = documentcollections[pageNumber];\n            if (documentPageCollections && documentPageCollections[annotationType]) {\n                for (var i = 0; i < documentPageCollections[annotationType].length; i++) {\n                    // eslint-disable-next-line max-len\n                    if (annotation.annotName === documentPageCollections[annotationType][i].AnnotName) {\n                        this.pdfViewerBase.documentAnnotationCollections[pageNumber][annotationType].splice(i, 1);\n                        break;\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * Select the annotations using annotation object or annotation Id.\n     *\n     * @param annotationId\n     * @returns void\n     */\n    Annotation.prototype.selectAnnotation = function (annotationId) {\n        // eslint-disable-next-line\n        var annotation;\n        var id;\n        if (typeof annotationId === 'object') {\n            annotation = annotationId;\n            id = annotation.annotationId;\n            annotation = this.getAnnotationsFromAnnotationCollections(id);\n        }\n        if (typeof annotationId === 'string') {\n            annotation = this.getAnnotationsFromAnnotationCollections(annotationId);\n            id = annotationId;\n        }\n        if (annotation) {\n            var pageIndex = isNullOrUndefined(annotation.pageNumber) ? annotation.pageIndex : annotation.pageNumber;\n            var isRender = false;\n            isRender = this.findRenderPageList(pageIndex);\n            var currentSelector = this.pdfViewer.annotationSelectorSettings;\n            //let pageIndex: number = this.getPageNumberFromAnnotationCollections(annotation);\n            if (annotation && pageIndex >= 0) {\n                if (annotation.shapeAnnotationType === 'textMarkup') {\n                    if (annotation.rect || annotation.bounds) {\n                        // eslint-disable-next-line max-len\n                        var scrollValue = this.pdfViewerBase.pageSize[pageIndex].top * this.pdfViewerBase.getZoomFactor() + (this.getAnnotationTop(annotation)) * this.pdfViewerBase.getZoomFactor();\n                        if (!this.isAnnotDeletionApiCall) {\n                            var scroll_1 = (scrollValue - 20).toString();\n                            // eslint-disable-next-line radix\n                            this.pdfViewerBase.viewerContainer.scrollTop = parseInt(scroll_1);\n                            this.pdfViewerBase.viewerContainer.scrollLeft = this.getAnnotationLeft(annotation) * this.pdfViewerBase.getZoomFactor();\n                        }\n                    }\n                    else {\n                        if (this.pdfViewer.navigation) {\n                            this.pdfViewer.navigation.goToPage(pageIndex + 1);\n                        }\n                    }\n                }\n                else {\n                    if (annotation.bounds) {\n                        // eslint-disable-next-line max-len\n                        var scrollValue = this.pdfViewerBase.pageSize[pageIndex].top * this.pdfViewerBase.getZoomFactor() + (annotation.bounds.top) * this.pdfViewerBase.getZoomFactor();\n                        var scrollLeft = annotation.bounds.left * this.pdfViewerBase.getZoomFactor();\n                        if (annotation.shapeAnnotationType === 'Ink') {\n                            // eslint-disable-next-line max-len\n                            scrollValue = this.pdfViewerBase.pageSize[pageIndex].top * this.pdfViewerBase.getZoomFactor() + (annotation.bounds.y) * this.pdfViewerBase.getZoomFactor();\n                            scrollLeft = annotation.bounds.x * this.pdfViewerBase.getZoomFactor();\n                        }\n                        if (!this.isAnnotDeletionApiCall) {\n                            var scroll_2 = (scrollValue - 20).toString();\n                            // eslint-disable-next-line radix\n                            this.pdfViewerBase.viewerContainer.scrollTop = parseInt(scroll_2);\n                            this.pdfViewerBase.viewerContainer.scrollLeft = scrollLeft;\n                        }\n                    }\n                    else {\n                        if (this.pdfViewer.navigation) {\n                            this.pdfViewer.navigation.goToPage(pageIndex + 1);\n                        }\n                    }\n                }\n                if (isRender) {\n                    if (this.previousIndex) {\n                        this.pdfViewer.clearSelection(this.previousIndex);\n                    }\n                    this.pdfViewer.clearSelection(pageIndex);\n                    this.previousIndex = pageIndex;\n                    if (annotation.shapeAnnotationType === 'textMarkup') {\n                        // eslint-disable-next-line max-len\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearCurrentAnnotationSelection(pageIndex, true);\n                        // eslint-disable-next-line max-len\n                        var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageIndex);\n                        // eslint-disable-next-line\n                        var textMarkupAnnotation = this.getTextMarkupAnnotations(pageIndex, annotation);\n                        if (textMarkupAnnotation) {\n                            this.textMarkupAnnotationModule.currentTextMarkupAnnotation = null;\n                            this.textMarkupAnnotationModule.isSelectedAnnotation = true;\n                            this.textMarkupAnnotationModule.showHideDropletDiv(true);\n                            this.textMarkupAnnotationModule.annotationClickPosition = null;\n                            this.textMarkupAnnotationModule.selectAnnotation(textMarkupAnnotation, canvas, pageIndex, null, true);\n                            this.textMarkupAnnotationModule.currentTextMarkupAnnotation = textMarkupAnnotation;\n                            this.textMarkupAnnotationModule.selectTextMarkupCurrentPage = pageIndex;\n                            this.textMarkupAnnotationModule.enableAnnotationPropertiesTool(true);\n                            this.textMarkupAnnotationModule.isSelectedAnnotation = false;\n                            if (this.pdfViewer.toolbarModule && this.pdfViewer.enableAnnotationToolbar) {\n                                this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden = true;\n                                // eslint-disable-next-line max-len\n                                this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem);\n                            }\n                        }\n                    }\n                    else if (annotation.shapeAnnotationType === 'stamp' || annotation.ShapeAnnotationType === 'stamp') {\n                        this.pdfViewer.select([annotation.uniqueKey], currentSelector);\n                        this.pdfViewer.annotation.onAnnotationMouseDown();\n                    }\n                    else if (annotation.shapeAnnotationType === 'sticky' || annotation.ShapeAnnotationType === 'sticky') {\n                        this.pdfViewer.select([annotation.annotationId], currentSelector);\n                        this.pdfViewer.annotation.onAnnotationMouseDown();\n                    }\n                    else {\n                        this.pdfViewer.select([annotation.uniqueKey], currentSelector);\n                        this.pdfViewer.annotation.onAnnotationMouseDown();\n                    }\n                    // eslint-disable-next-line max-len\n                    var commentElement = document.getElementById(this.pdfViewer.element.id + '_commantPanel');\n                    if (commentElement && commentElement.style.display === 'block') {\n                        // eslint-disable-next-line\n                        var accordionExpand = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + this.pdfViewer.currentPageNumber);\n                        if (accordionExpand) {\n                            accordionExpand.ej2_instances[0].expandItem(true);\n                        }\n                        // eslint-disable-next-line\n                        var commentsDiv = document.getElementById(id);\n                        if (commentsDiv) {\n                            if (!commentsDiv.classList.contains('e-pv-comments-border')) {\n                                commentsDiv.firstChild.click();\n                            }\n                        }\n                    }\n                }\n                else if (annotation.uniqueKey || (annotation.shapeAnnotationType === \"textMarkup\" && annotation.annotationAddMode === \"Imported Annotation\")) {\n                    this.selectAnnotationId = id;\n                    this.isAnnotationSelected = true;\n                    this.annotationPageIndex = pageIndex;\n                    this.selectAnnotationFromCodeBehind();\n                }\n            }\n            if (!isRender && !annotation.uniqueKey) {\n                var collections = this.updateCollectionForNonRenderedPages(annotation, id, pageIndex);\n                collections.pageIndex = pageIndex;\n                this.pdfViewer.annotation.addAction(pageIndex, null, collections, 'Delete', '', collections, collections);\n                this.undoCommentsElement.push(collections);\n                var removeDiv = document.getElementById(annotation.annotationId);\n                this.removeCommentPanelDiv(removeDiv);\n            }\n        }\n    };\n    // To update the collections for the non-rendered pages.\n    Annotation.prototype.updateCollectionForNonRenderedPages = function (annotation, id, pageIndex) {\n        var collections;\n        var annotationCollection = this.pdfViewer.annotationCollection;\n        if (annotationCollection.length) {\n            var collectionDetails = annotationCollection.filter(function (annotCollection) {\n                return annotCollection.annotationId === id;\n            });\n            collections = collectionDetails[0];\n            this.updateAnnotationCollection(collectionDetails[0]);\n        }\n        var annotationType = this.getTypeOfAnnotation(annotation);\n        var collection = this.pdfViewerBase.documentAnnotationCollections[pageIndex];\n        if (collection[annotationType].length) {\n            for (var x = 0; x < collection[annotationType].length; x++) {\n                if (collection[annotationType][x].AnnotName === annotation.annotationId) {\n                    var type = collection[annotationType][x];\n                    this.removedDocumentAnnotationCollection.push(type);\n                    collection[annotationType].splice(x, 1);\n                    break;\n                }\n            }\n        }\n        return collections;\n    };\n    // To get the annotation type to update the document Annotation collections\n    Annotation.prototype.getTypeOfAnnotation = function (annotation) {\n        var annotationType;\n        if (annotation.id && annotation.id.toLowerCase() === \"shape\") {\n            annotationType = \"shapeAnnotation\";\n        }\n        else if (annotation.id && annotation.id.toLowerCase() === \"measure\") {\n            annotationType = \"measureShapeAnnotation\";\n        }\n        else if (annotation.id && annotation.id.toLowerCase() === \"freetext\") {\n            annotationType = \"freeTextAnnotation\";\n        }\n        else if (annotation.shapeAnnotationType && annotation.shapeAnnotationType.toLowerCase() === \"textmarkup\") {\n            annotationType = \"textMarkupAnnotation\";\n        }\n        else if (annotation.shapeAnnotationType && annotation.shapeAnnotationType.toLowerCase() === \"stamp\") {\n            annotationType = \"stampAnnotations\";\n        }\n        else if (annotation.shapeAnnotationType && annotation.shapeAnnotationType.toLowerCase() === \"ink\") {\n            annotationType = \"signatureInkAnnotation\";\n        }\n        else if (annotation.shapeAnnotationType && annotation.shapeAnnotationType.toLowerCase() === \"sticky\") {\n            annotationType = \"stickyNotesAnnotation\";\n        }\n        return annotationType;\n    };\n    // To remove the commnet panel div\n    Annotation.prototype.removeCommentPanelDiv = function (removeDiv) {\n        if (removeDiv) {\n            if (removeDiv.parentElement.childElementCount === 1) {\n                this.stickyNotesAnnotationModule.updateAccordionContainer(removeDiv);\n            }\n            else {\n                removeDiv.remove();\n            }\n        }\n    };\n    /**\n     * Clear the annotation selection.\n     *\n     * @returns void\n     */\n    Annotation.prototype.clearSelection = function () {\n        if (this.textMarkupAnnotationModule && this.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n            this.textMarkupAnnotationModule.clearCurrentSelectedAnnotation();\n            this.textMarkupAnnotationModule.clearCurrentAnnotationSelection(this.textMarkupAnnotationModule.selectTextMarkupCurrentPage);\n        }\n        else {\n            if (this.pdfViewer.selectedItems && this.pdfViewer.selectedItems.annotations[0]) {\n                // eslint-disable-next-line\n                var currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n                this.pdfViewer.clearSelection(currentAnnotation.pageIndex);\n            }\n            else {\n                this.pdfViewer.clearSelection(this.pdfViewer.currentPageNumber - 1);\n            }\n        }\n    };\n    /**\n     * @param annotation\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.getAnnotationTop = function (annotation) {\n        if (annotation.rect && (annotation.rect.Top || annotation.rect.top)) {\n            return annotation.rect.Top || annotation.rect.top;\n        }\n        else {\n            return annotation.bounds[0].Top || annotation.bounds[0].top;\n        }\n    };\n    /**\n      * @param annotation\n      */\n    // eslint-disable-next-line\n    Annotation.prototype.getAnnotationLeft = function (annotation) {\n        if (annotation.rect) {\n            if (annotation.rect.Left) {\n                return annotation.rect.Left;\n            }\n            else {\n                return annotation.rect.left;\n            }\n        }\n        else {\n            if (annotation.bounds[0].Left) {\n                return annotation.bounds[0].Left;\n            }\n            else {\n                return annotation.bounds[0].left;\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.selectAnnotationFromCodeBehind = function () {\n        if (this.isAnnotationSelected && this.selectAnnotationId) {\n            // eslint-disable-next-line\n            var annotation = this.getAnnotationsFromAnnotationCollections(this.selectAnnotationId);\n            var id = this.selectAnnotationId;\n            var pageIndex = annotation.pageNumber;\n            var currentSelector = this.pdfViewer.annotationSelectorSettings;\n            if (annotation && (this.annotationPageIndex >= 0) && this.annotationPageIndex === pageIndex) {\n                if (this.previousIndex) {\n                    this.pdfViewer.clearSelection(this.previousIndex);\n                }\n                this.pdfViewer.clearSelection(pageIndex);\n                this.previousIndex = pageIndex;\n                if (annotation.shapeAnnotationType === 'textMarkup') {\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearCurrentAnnotationSelection(pageIndex, true);\n                    // eslint-disable-next-line max-len\n                    var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageIndex);\n                    // eslint-disable-next-line\n                    var textMarkupAnnotation = this.getTextMarkupAnnotations(pageIndex, annotation);\n                    if (textMarkupAnnotation) {\n                        this.textMarkupAnnotationModule.currentTextMarkupAnnotation = null;\n                        this.textMarkupAnnotationModule.isSelectedAnnotation = true;\n                        this.textMarkupAnnotationModule.showHideDropletDiv(true);\n                        this.textMarkupAnnotationModule.annotationClickPosition = null;\n                        this.textMarkupAnnotationModule.selectAnnotation(textMarkupAnnotation, canvas, pageIndex);\n                        this.textMarkupAnnotationModule.currentTextMarkupAnnotation = textMarkupAnnotation;\n                        this.textMarkupAnnotationModule.selectTextMarkupCurrentPage = pageIndex;\n                        this.textMarkupAnnotationModule.enableAnnotationPropertiesTool(true);\n                        this.textMarkupAnnotationModule.isSelectedAnnotation = false;\n                        if (this.pdfViewer.toolbarModule && this.pdfViewer.enableAnnotationToolbar) {\n                            this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden = true;\n                            // eslint-disable-next-line max-len\n                            this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem);\n                        }\n                    }\n                }\n                else if (annotation.shapeAnnotationType === 'stamp' || annotation.ShapeAnnotationType === 'stamp') {\n                    this.pdfViewer.select([annotation.uniqueKey], currentSelector);\n                    this.pdfViewer.annotation.onAnnotationMouseDown();\n                }\n                else if (annotation.shapeAnnotationType === 'sticky' || annotation.ShapeAnnotationType === 'sticky') {\n                    this.pdfViewer.select([annotation.annotationId], currentSelector);\n                    this.pdfViewer.annotation.onAnnotationMouseDown();\n                }\n                else if (annotation.uniqueKey) {\n                    this.pdfViewer.select([annotation.uniqueKey], currentSelector);\n                    this.pdfViewer.annotation.onAnnotationMouseDown();\n                }\n                else {\n                    this.pdfViewer.select([annotation.annotationId], currentSelector);\n                    this.pdfViewer.annotation.onAnnotationMouseDown();\n                }\n                // eslint-disable-next-line max-len\n                var commentElement = document.getElementById(this.pdfViewer.element.id + '_commantPanel');\n                if (commentElement && commentElement.style.display === 'block') {\n                    // eslint-disable-next-line\n                    var accordionExpand = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + this.pdfViewer.currentPageNumber);\n                    if (accordionExpand) {\n                        accordionExpand.ej2_instances[0].expandItem(true);\n                    }\n                    // eslint-disable-next-line\n                    var commentsDiv = document.getElementById(id);\n                    if (commentsDiv) {\n                        if (!commentsDiv.classList.contains('e-pv-comments-border')) {\n                            commentsDiv.firstChild.click();\n                        }\n                    }\n                }\n            }\n            this.isAnnotationSelected = false;\n            this.selectAnnotationId = null;\n            this.annotationPageIndex = null;\n        }\n    };\n    /**\n     * @param pageIndex\n     * @private\n     */\n    Annotation.prototype.findRenderPageList = function (pageIndex) {\n        var isRender = false;\n        // eslint-disable-next-line\n        var pageList = this.pdfViewerBase.renderedPagesList;\n        if (pageList) {\n            for (var i = 0; i < pageList.length; i++) {\n                if (pageList[i] === pageIndex) {\n                    isRender = true;\n                    return isRender;\n                }\n            }\n        }\n        return isRender;\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.getPageNumberFromAnnotationCollections = function (annotation) {\n        // eslint-disable-next-line\n        var collections = this.pdfViewer.annotations;\n        if (annotation) {\n            if (annotation.shapeAnnotationType === 'textMarkup') {\n                return annotation.pageNumber;\n            }\n            else {\n                if (collections) {\n                    for (var i = 0; i < collections.length; i++) {\n                        if (collections[i].annotName === annotation.annotationId) {\n                            return collections[i].pageIndex;\n                        }\n                    }\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.getAnnotationsFromAnnotationCollections = function (annotationId) {\n        // eslint-disable-next-line\n        var collections = this.pdfViewer.annotationCollection;\n        if (collections && annotationId) {\n            for (var i = 0; i < collections.length; i++) {\n                if (collections[i].annotationId === annotationId) {\n                    return collections[i];\n                }\n            }\n        }\n        if (this.pdfViewer.selectedItems.annotations.length === 0)\n            this.pdfViewer.selectedItems.annotations.push(this.pdfViewer.nameTable[annotationId]);\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.getTextMarkupAnnotations = function (pageIndex, annotation) {\n        // eslint-disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');\n        if (this.pdfViewerBase.isStorageExceed) {\n            storeObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_textMarkup'];\n        }\n        if (storeObject) {\n            // eslint-disable-next-line\n            var annotObject = JSON.parse(storeObject);\n            var index = this.getPageCollection(annotObject, pageIndex);\n            if (annotObject[index]) {\n                for (var i = 0; i < annotObject[index].annotations.length; i++) {\n                    if (annotObject[index].annotations[i].annotName === annotation.annotationId) {\n                        return annotObject[index].annotations[i];\n                    }\n                }\n                return null;\n            }\n        }\n        else {\n            return null;\n        }\n    };\n    /**\n     * @param type\n     * @param measureType\n     * @param type\n     * @param measureType\n     * @private\n     */\n    Annotation.prototype.getAnnotationType = function (type, measureType) {\n        var annotType;\n        if (measureType === '' || isNullOrUndefined(measureType)) {\n            switch (type) {\n                case 'Line':\n                    annotType = 'Line';\n                    break;\n                case 'LineWidthArrowHead':\n                    annotType = 'Arrow';\n                    break;\n                case 'Rectangle':\n                    annotType = 'Rectangle';\n                    break;\n                case 'Ellipse':\n                    annotType = 'Circle';\n                    break;\n                case 'Polygon':\n                    annotType = 'Polygon';\n                    break;\n                case 'Stamp':\n                    annotType = 'Stamp';\n                    break;\n                case 'Image':\n                    annotType = 'Image';\n                    break;\n                case 'FreeText':\n                    annotType = 'FreeText';\n                    break;\n                case 'Ink':\n                    annotType = 'Ink';\n                    break;\n                case 'StickyNotes':\n                    annotType = 'StickyNotes';\n                    break;\n            }\n        }\n        else {\n            switch (measureType) {\n                case 'Distance':\n                    annotType = 'Distance';\n                    break;\n                case 'Perimeter':\n                    annotType = 'Perimeter';\n                    break;\n                case 'Area':\n                    annotType = 'Area';\n                    break;\n                case 'Radius':\n                    annotType = 'Radius';\n                    break;\n                case 'Volume':\n                    annotType = 'Volume';\n                    break;\n            }\n        }\n        return annotType;\n    };\n    /**\n     * @param pageNumber\n     * @param annotationId\n     * @private\n     */\n    Annotation.prototype.getAnnotationIndex = function (pageNumber, annotationId) {\n        var pageAnnotationBases = this.pdfViewer.drawing.getPageObjects(pageNumber);\n        var index = null;\n        for (var i = 0; i < pageAnnotationBases.length; i++) {\n            if (pageAnnotationBases[i].id === annotationId) {\n                index = i;\n                break;\n            }\n        }\n        return index;\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.initializeCollection = function () {\n        this.actionCollection = [];\n        this.redoCollection = [];\n        if (!this.popupNote) {\n            this.createNote();\n        }\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.showCommentsPanel = function () {\n        if (this.pdfViewer.enableCommentPanel) {\n            var commentPanel = document.getElementById(this.pdfViewer.element.id + '_commantPanel');\n            if (commentPanel) {\n                if (commentPanel.style.display === 'none') {\n                    commentPanel.style.display = 'block';\n                    if (Browser.isDevice && !isBlazor()) {\n                        // eslint:disable-next-line\n                        var viewer = document.getElementById(this.pdfViewer.element.id + '_viewerMainContainer');\n                        // eslint:disable-next-line\n                        viewer.insertBefore(this.pdfViewerBase.navigationPane.commentPanelContainer, this.pdfViewer.toolbarModule.toolbarElement);\n                    }\n                    if (this.pdfViewerBase.navigationPane.commentPanelResizer) {\n                        this.pdfViewerBase.navigationPane.commentPanelResizer.style.display = 'block';\n                    }\n                    this.pdfViewerBase.navigationPane.setCommentPanelResizeIconTop();\n                    this.pdfViewer.annotation.stickyNotesAnnotationModule.updateCommentPanelTextTop();\n                    var viewerContainer = document.getElementById(this.pdfViewer.element.id + '_viewerContainer');\n                    var pageContainer = document.getElementById(this.pdfViewer.element.id + '_pageViewContainer');\n                    if (viewerContainer) {\n                        if (this.pdfViewer.enableRtl) {\n                            viewerContainer.style.left = this.pdfViewerBase.navigationPane.getViewerContainerRight() + 'px';\n                        }\n                        else {\n                            viewerContainer.style.right = this.pdfViewerBase.navigationPane.getViewerContainerRight() + 'px';\n                        }\n                        // eslint-disable-next-line max-len\n                        viewerContainer.style.width = (this.pdfViewer.element.clientWidth - this.pdfViewerBase.navigationPane.getViewerContainerLeft() - this.pdfViewerBase.navigationPane.getViewerContainerRight()) + 'px';\n                        pageContainer.style.width = (viewerContainer.offsetWidth - this.pdfViewerBase.navigationPane.getViewerContainerScrollbarWidth()) + 'px';\n                    }\n                    this.pdfViewerBase.updateZoomValue();\n                    if (this.pdfViewer.annotation && this.pdfViewer.annotation.textMarkupAnnotationModule) {\n                        this.pdfViewer.annotation.textMarkupAnnotationModule.showHideDropletDiv(true);\n                    }\n                    if (Browser.isDevice && !this.pdfViewer.enableDesktopMode && !isBlazor()) {\n                        commentPanel.style.height = this.pdfViewerBase.viewerMainContainer.clientHeight + 'px';\n                        if (this.pdfViewer.selectedItems.annotations.length > 0) {\n                            // eslint:disable-next-line\n                            var commentDiv = document.getElementById(this.pdfViewer.selectedItems.annotations[0].annotName);\n                            if (commentDiv && commentDiv.lastElementChild.children[1] && commentDiv.lastElementChild.children[1].ej2_instances) {\n                                commentDiv.lastElementChild.children[1].ej2_instances[0].enableEditMode = true;\n                            }\n                            else if (commentDiv && commentDiv.lastElementChild.ej2_instances) {\n                                commentDiv.lastElementChild.ej2_instances[0].enableEditMode = true;\n                                commentDiv.lastElementChild.style.display = 'block';\n                                commentDiv.lastElementChild.children[1] ? commentDiv.lastElementChild.children[1].style.display = 'block' : null;\n                            }\n                        }\n                        if (this.pdfViewer.toolbarModule.annotationToolbarModule.toolbar) {\n                            this.pdfViewer.toolbarModule.annotationToolbarModule.toolbar.element.style.display = 'none';\n                            if (this.pdfViewer.toolbarModule.annotationToolbarModule.propertyToolbar) {\n                                this.pdfViewer.toolbarModule.annotationToolbarModule.propertyToolbar.element.style.display = 'none';\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @param pageNumber\n     * @param index\n     * @param annotation\n     * @param actionString\n     * @param property\n     * @param node\n     * @param redo\n     * @param pageNumber\n     * @param index\n     * @param annotation\n     * @param actionString\n     * @param property\n     * @param node\n     * @param redo\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.addAction = function (\n    // eslint-disable-next-line\n    pageNumber, index, annotation, actionString, property, node, redo) {\n        var action = {\n            pageIndex: pageNumber, index: index, annotation: annotation,\n            action: actionString, modifiedProperty: property, undoElement: node, redoElement: redo\n        };\n        this.actionCollection.push(action);\n        this.updateToolbar();\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.undo = function () {\n        var actionObject = this.actionCollection.pop();\n        if (actionObject) {\n            // eslint-disable-next-line\n            var shapeType = actionObject.annotation.shapeAnnotationType;\n            this.isUndoRedoAction = true;\n            this.isUndoAction = true;\n            switch (actionObject.action) {\n                case 'Text Markup Added':\n                case 'Text Markup Deleted':\n                    if (this.textMarkupAnnotationModule) {\n                        // eslint-disable-next-line max-len\n                        this.textMarkupAnnotationModule.undoTextMarkupAction(actionObject.annotation, actionObject.pageIndex, actionObject.index, actionObject.action);\n                    }\n                    break;\n                case 'Text Markup Property modified':\n                    if (this.textMarkupAnnotationModule) {\n                        // eslint-disable-next-line max-len\n                        actionObject.annotation = this.textMarkupAnnotationModule.undoRedoPropertyChange(actionObject.annotation, actionObject.pageIndex, actionObject.index, actionObject.modifiedProperty, true);\n                    }\n                    break;\n                case 'Drag':\n                case 'Resize':\n                    if (isLineShapes(actionObject.annotation)) {\n                        // eslint-disable-next-line max-len\n                        this.pdfViewer.nodePropertyChange(actionObject.annotation, { bounds: actionObject.undoElement.bounds, vertexPoints: actionObject.undoElement.vertexPoints, leaderHeight: actionObject.undoElement.leaderHeight });\n                    }\n                    else {\n                        this.pdfViewer.nodePropertyChange(actionObject.annotation, { bounds: actionObject.undoElement.bounds });\n                    }\n                    // eslint-disable-next-line max-len\n                    if (actionObject.annotation.measureType === 'Distance' || actionObject.annotation.measureType === 'Perimeter' || actionObject.annotation.measureType === 'Area' ||\n                        actionObject.annotation.measureType === 'Radius' || actionObject.annotation.measureType === 'Volume') {\n                        this.pdfViewer.nodePropertyChange(actionObject.annotation, { notes: actionObject.undoElement.notes });\n                        this.updateCalibrateValues(actionObject.annotation);\n                    }\n                    if (actionObject.annotation.formFieldAnnotationType) {\n                        this.pdfViewer.formDesigner.updateHTMLElement(actionObject.annotation);\n                    }\n                    this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID);\n                    this.pdfViewer.select([actionObject.annotation.id]);\n                    // eslint-disable-next-line max-len\n                    if (actionObject.annotation.shapeAnnotationType === 'Line' || actionObject.annotation.shapeAnnotationType === 'Rectangle' || actionObject.annotation.shapeAnnotationType === 'Ellipse' || actionObject.annotation.shapeAnnotationType === 'Polygon' || actionObject.annotation.shapeAnnotationType === 'LineWidthArrowHead' ||\n                        actionObject.annotation.shapeAnnotationType === 'Radius' || actionObject.annotation.shapeAnnotationType === 'FreeText' || actionObject.annotation.shapeAnnotationType === 'HandWrittenSignature' || actionObject.annotation.shapeAnnotationType === 'SignatureText' || actionObject.annotation.shapeAnnotationType === 'SignatureImage' || actionObject.annotation.shapeAnnotationType === 'Ink') {\n                        this.modifyInCollections(actionObject.annotation, 'bounds');\n                    }\n                    break;\n                case 'Addition':\n                    if (this.pdfViewer.formDesigner && actionObject.annotation.formFieldAnnotationType) {\n                        this.pdfViewer.formDesigner.deleteFormField(actionObject.undoElement.id, false);\n                    }\n                    else {\n                        var isAnnotationUpdate = false;\n                        // eslint-disable-next-line max-len\n                        if (shapeType === 'Line' || shapeType === 'LineWidthArrowHead' || shapeType === 'Polygon' || shapeType === 'Ellipse' || shapeType === 'Rectangle' || shapeType === 'Radius' || shapeType === 'Distance') {\n                            if (actionObject.annotation.measureType === '' || isNullOrUndefined(actionObject.annotation.measureType)) {\n                                this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation, 'shape');\n                            }\n                            else {\n                                this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation, 'measure');\n                            }\n                            isAnnotationUpdate = true;\n                            // eslint-disable-next-line\n                            var annotationObject = actionObject.annotation;\n                            // eslint-disable-next-line\n                            var wrapper = annotationObject.wrapper ? annotationObject.wrapper : null;\n                            if (wrapper && wrapper.bounds) {\n                                actionObject.annotation.bounds = wrapper.bounds;\n                            }\n                            actionObject.duplicate = this.modifyInCollections(actionObject.annotation, 'delete');\n                        }\n                        if (shapeType === 'Stamp' || shapeType === 'Image') {\n                            // eslint-disable-next-line max-len\n                            this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation, actionObject.annotation.shapeAnnotationType, 'delete');\n                            // eslint-disable-next-line max-len\n                            this.stampAnnotationModule.updateSessionStorage(actionObject.annotation, null, 'delete');\n                            isAnnotationUpdate = true;\n                        }\n                        if (shapeType === 'FreeText' || shapeType === 'HandWrittenSignature' || shapeType === 'SignatureImage' || shapeType === 'SignatureText' || shapeType === 'Ink') {\n                            isAnnotationUpdate = true;\n                            // eslint-disable-next-line max-len\n                            this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation, actionObject.annotation.shapeAnnotationType, 'delete');\n                            actionObject.duplicate = this.modifyInCollections(actionObject.annotation, 'delete');\n                        }\n                        if (!isAnnotationUpdate) {\n                            // eslint-disable-next-line max-len\n                            this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation, actionObject.annotation.shapeAnnotationType, 'delete');\n                        }\n                        this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID);\n                        this.pdfViewer.remove(actionObject.annotation);\n                        this.pdfViewer.renderDrawing(null, actionObject.annotation.pageIndex);\n                        // eslint-disable-next-line\n                        var removeDiv = document.getElementById(actionObject.annotation.annotName);\n                        if (removeDiv) {\n                            if (removeDiv.parentElement.childElementCount === 1) {\n                                this.stickyNotesAnnotationModule.updateAccordionContainer(removeDiv);\n                            }\n                            else {\n                                removeDiv.parentElement.removeChild(removeDiv);\n                            }\n                        }\n                        if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n                            var mobileAnnotationToolbar = document.getElementById(this.pdfViewer.element.id + '_propertyToolbar');\n                            if (mobileAnnotationToolbar && mobileAnnotationToolbar.children.length > 0) {\n                                this.pdfViewer.toolbarModule.annotationToolbarModule.toolbarCreated = false;\n                                this.pdfViewer.toolbarModule.annotationToolbarModule.createAnnotationToolbarForMobile();\n                            }\n                        }\n                    }\n                    break;\n                case 'Delete':\n                    if (this.pdfViewer.formDesigner && actionObject.annotation.formFieldAnnotationType) {\n                        actionObject.undoElement.bounds.x = actionObject.undoElement.wrapper.bounds.x;\n                        actionObject.undoElement.bounds.y = actionObject.undoElement.wrapper.bounds.y;\n                        this.pdfViewer.formDesigner.drawFormField(actionObject.undoElement);\n                    }\n                    else {\n                        // eslint-disable-next-line max-len\n                        if (shapeType === 'Line' || shapeType === 'LineWidthArrowHead' || shapeType === 'Polygon' || shapeType === 'Ellipse' || shapeType === 'Rectangle' || shapeType === 'Radius' || shapeType === 'Distance') {\n                            if (actionObject.annotation.measureType === '' || isNullOrUndefined(actionObject.annotation.measureType)) {\n                                shapeType = 'shape';\n                                this.shapeAnnotationModule.addInCollection(actionObject.annotation.pageIndex, actionObject.undoElement);\n                            }\n                            else {\n                                shapeType = 'shape_measure';\n                                this.measureAnnotationModule.addInCollection(actionObject.annotation.pageIndex, actionObject.undoElement);\n                            }\n                        }\n                        if (shapeType === 'Stamp' || shapeType === 'Image') {\n                            this.stampAnnotationModule.updateDeleteItems(actionObject.annotation.pageIndex, actionObject.annotation);\n                        }\n                        else if (shapeType === 'FreeText') {\n                            this.freeTextAnnotationModule.addInCollection(actionObject.annotation.pageIndex, actionObject.undoElement);\n                        }\n                        else if (shapeType === 'Ink') {\n                            this.inkAnnotationModule.addInCollection(actionObject.annotation.pageIndex, actionObject.undoElement);\n                        }\n                        else if (shapeType === 'HandWrittenSignature' || shapeType === 'SignatureText' || shapeType === 'SignatureImage') {\n                            this.pdfViewerBase.signatureModule.addInCollection(actionObject.annotation.pageIndex, actionObject.undoElement);\n                        }\n                        if (!actionObject.annotation.annotationId) {\n                            var addedAnnot = this.pdfViewer.add(actionObject.annotation);\n                            if ((shapeType === 'FreeText' || addedAnnot.enableShapeLabel) && addedAnnot) {\n                                this.pdfViewer.nodePropertyChange(addedAnnot, {});\n                            }\n                        }\n                        var formFieldObj = void 0;\n                        if (actionObject.annotation.id) {\n                            formFieldObj = this.pdfViewer.nameTable[actionObject.annotation.id.split(\"_\")[0]];\n                        }\n                        if (formFieldObj != null && (formFieldObj.formFieldAnnotationType === 'SignatureField' || formFieldObj.formFieldAnnotationType === 'InitialField')) {\n                            formFieldObj.wrapper.children.push(actionObject.annotation.wrapper.children[0]);\n                            if (actionObject.annotation.shapeAnnotationType === \"SignatureText\")\n                                formFieldObj.wrapper.children.push(actionObject.annotation.wrapper.children[1]);\n                            var key = actionObject.annotation.id.split('_')[0] + '_content';\n                            var data = null;\n                            if (this.pdfViewer.formDesignerModule) {\n                                data = this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');\n                            }\n                            if (data) {\n                                var formFieldsData = JSON.parse(data);\n                                for (var i = 0; i < formFieldsData.length; i++) {\n                                    if (formFieldsData[i].Key === key) {\n                                        if (actionObject.annotation.shapeAnnotationType === \"SignatureText\") {\n                                            formFieldsData[i].FormField.signatureType = \"Text\";\n                                            formFieldsData[i].FormField.value = actionObject.annotation.data;\n                                            this.pdfViewerBase.formFieldCollection[i].FormField.value = actionObject.annotation.data;\n                                            this.pdfViewerBase.formFieldCollection[i].FormField.signatureType = \"Text\";\n                                        }\n                                        else if (actionObject.annotation.shapeAnnotationType === \"SignatureImage\") {\n                                            formFieldsData[i].FormField.signatureType = \"Image\";\n                                            formFieldsData[i].FormField.value = actionObject.annotation.data;\n                                            this.pdfViewerBase.formFieldCollection[i].FormField.value = actionObject.annotation.data;\n                                            this.pdfViewerBase.formFieldCollection[i].FormField.signatureType = \"Image\";\n                                        }\n                                        else {\n                                            formFieldsData[i].FormField.signatureType = \"Path\";\n                                            this.pdfViewerBase.formFieldCollection[i].FormField.signatureType = \"Path\";\n                                            var collectionData = processPathData(actionObject.annotation.data);\n                                            var csData = splitArrayCollection(collectionData);\n                                            formFieldsData[i].FormField.value = JSON.stringify(csData);\n                                            this.pdfViewerBase.formFieldCollection[i].FormField.value = JSON.stringify(csData);\n                                        }\n                                    }\n                                }\n                                this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection, '_formDesigner');\n                            }\n                        }\n                        this.pdfViewer.renderDrawing(null, actionObject.annotation.pageIndex);\n                        // eslint-disable-next-line max-len\n                        this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addAnnotationComments(actionObject.annotation.pageIndex, shapeType);\n                        if (actionObject.annotation.annotationId) {\n                            var removedAnnotationCollection = this.removedAnnotationCollection[this.removedAnnotationCollection.length - 1];\n                            var annotationType = this.getTypeOfAnnotation(removedAnnotationCollection);\n                            this.pdfViewer.annotationCollection.push(removedAnnotationCollection);\n                            this.removedAnnotationCollection.splice(this.removedAnnotationCollection.length - 1);\n                            var pageNumber = actionObject.annotation.pageNumber >= 0 ? actionObject.annotation.pageNumber : actionObject.annotation.pageIndex;\n                            this.pdfViewerBase.documentAnnotationCollections[pageNumber][annotationType].push(this.removedDocumentAnnotationCollection[this.removedDocumentAnnotationCollection.length - 1]);\n                            this.removedDocumentAnnotationCollection.splice(this.removedDocumentAnnotationCollection.length - 1);\n                        }\n                    }\n                    break;\n                case 'stampOpacity':\n                    this.pdfViewer.nodePropertyChange(actionObject.annotation, { opacity: actionObject.undoElement.opacity });\n                    this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(actionObject.annotation, null, true);\n                    actionObject.annotation.modifiedDate = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n                    break;\n                case 'Shape Stroke':\n                    this.pdfViewer.nodePropertyChange(actionObject.annotation, { strokeColor: actionObject.undoElement.strokeColor });\n                    this.modifyInCollections(actionObject.annotation, 'stroke');\n                    this.pdfViewer.renderDrawing();\n                    break;\n                case 'Shape Fill':\n                    this.pdfViewer.nodePropertyChange(actionObject.annotation, { fillColor: actionObject.undoElement.fillColor });\n                    this.modifyInCollections(actionObject.annotation, 'fill');\n                    this.pdfViewer.renderDrawing();\n                    break;\n                case 'Shape Opacity':\n                    this.pdfViewer.nodePropertyChange(actionObject.annotation, { opacity: actionObject.undoElement.opacity });\n                    if (actionObject.annotation.shapeAnnotationType === 'StickyNotes') {\n                        this.stickyNotesAnnotationModule.updateOpacityValue(actionObject.annotation);\n                        this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(actionObject.annotation, null, true);\n                        actionObject.annotation.modifiedDate = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n                    }\n                    else {\n                        this.modifyInCollections(actionObject.annotation, 'opacity');\n                    }\n                    this.pdfViewer.renderDrawing();\n                    break;\n                case 'Shape Thickness':\n                    this.pdfViewer.nodePropertyChange(actionObject.annotation, { thickness: actionObject.undoElement.thickness });\n                    this.modifyInCollections(actionObject.annotation, 'thickness');\n                    this.pdfViewer.renderDrawing();\n                    break;\n                case 'Line properties change':\n                    this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n                        // eslint-disable-next-line max-len\n                        fillColor: actionObject.undoElement.fillColor, borderDashArray: actionObject.undoElement.borderDashArray, borderStyle: actionObject.undoElement.borderStyle,\n                        // eslint-disable-next-line max-len\n                        strokeColor: actionObject.undoElement.strokeColor, opacity: actionObject.undoElement.opacity, thickness: actionObject.undoElement.thickness,\n                        sourceDecoraterShapes: this.getArrowType(actionObject.undoElement.lineHeadStart), taregetDecoraterShapes: this.getArrowType(actionObject.undoElement.lineHeadEnd)\n                    });\n                    this.updateCollectionForLineProperty(actionObject.annotation);\n                    this.pdfViewer.renderDrawing();\n                    break;\n                case 'Text Property Added':\n                    // eslint-disable-next-line max-len\n                    actionObject.annotation = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.undoAction(actionObject.annotation, actionObject.action, actionObject.undoElement);\n                    this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(actionObject.annotation, null, true);\n                    actionObject.annotation.modifiedDate = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n                    break;\n                case 'Comments Property Added':\n                    // eslint-disable-next-line max-len\n                    actionObject.annotation = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.undoAction(actionObject.annotation, actionObject.action, actionObject.undoElement);\n                    break;\n                case 'Status Property Added':\n                    // eslint-disable-next-line max-len\n                    actionObject.annotation = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.undoAction(actionObject.annotation, actionObject.action, actionObject.undoElement);\n                    break;\n                case 'Comments Reply Deleted':\n                    // eslint-disable-next-line max-len\n                    actionObject.annotation = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.undoAction(actionObject.annotation, actionObject.action, actionObject.undoElement);\n                    break;\n                case 'dynamicText Change':\n                    this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange = true;\n                    actionObject.annotation.dynamicText = actionObject.undoElement.dynamicText;\n                    if (this.pdfViewer.selectedItems.annotations[0]) {\n                        this.pdfViewer.selectedItems.annotations[0].dynamicText = actionObject.undoElement.dynamicText;\n                    }\n                    // eslint-disable-next-line\n                    this.pdfViewer.annotationModule.stickyNotesAnnotationModule.undoAction(actionObject.annotation, actionObject.action, actionObject.undoElement);\n                    this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(actionObject.annotation, null, true);\n                    this.modifyInCollections(actionObject.annotation, 'dynamicText');\n                    if (this.pdfViewer.selectedItems.annotations[0]) {\n                        this.pdfViewer.nodePropertyChange(this.pdfViewer.selectedItems.annotations[0], {});\n                    }\n                    else {\n                        this.pdfViewer.nodePropertyChange(actionObject.annotation, {});\n                    }\n                    this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange = false;\n                    this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID);\n                    break;\n                case 'fontColor':\n                    this.pdfViewer.nodePropertyChange(actionObject.annotation, { fontColor: actionObject.undoElement.fontColor });\n                    this.modifyInCollections(actionObject.annotation, 'fontColor');\n                    this.pdfViewer.renderDrawing();\n                    break;\n                case 'fontSize':\n                    this.pdfViewer.nodePropertyChange(actionObject.annotation, { fontSize: actionObject.undoElement.fontSize });\n                    this.modifyInCollections(actionObject.annotation, 'fontSize');\n                    this.pdfViewer.renderDrawing();\n                    break;\n                case 'fontFamily':\n                    this.pdfViewer.nodePropertyChange(actionObject.annotation, { fontFamily: actionObject.undoElement.fontFamily });\n                    this.modifyInCollections(actionObject.annotation, 'fontFamily');\n                    this.pdfViewer.renderDrawing();\n                    break;\n                case 'textAlign':\n                    this.pdfViewer.nodePropertyChange(actionObject.annotation, { textAlign: actionObject.undoElement.textAlign });\n                    this.modifyInCollections(actionObject.annotation, 'textAlign');\n                    this.pdfViewer.renderDrawing();\n                    break;\n                case 'textPropertiesChange':\n                    this.pdfViewer.nodePropertyChange(actionObject.annotation, { font: actionObject.undoElement.font });\n                    this.modifyInCollections(actionObject.annotation, 'textPropertiesChange');\n                    this.pdfViewer.renderDrawing();\n                    break;\n                case 'Rotate':\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.nodePropertyChange(actionObject.annotation.annotations[0], { bounds: actionObject.undoElement.bounds, rotateAngle: actionObject.undoElement.rotateAngle });\n                    this.modifyInCollections(actionObject.annotation.annotations[0], 'bounds');\n                    this.pdfViewer.renderDrawing();\n                    break;\n                case 'FormDesigner Properties Change':\n                    if (actionObject.undoElement && actionObject.undoElement.isMultiline !== actionObject.redoElement.isMultiline) {\n                        this.undoRedoMultiline(actionObject.undoElement);\n                    }\n                    this.updateFormFieldPropertiesChanges(actionObject.undoElement.formFieldAnnotationType, actionObject.undoElement);\n                    break;\n                case 'FormField Value Change':\n                    if (actionObject.annotation.formFieldAnnotationType) {\n                        if (actionObject.annotation.formFieldAnnotationType == \"RadioButton\") {\n                            this.updateFormFieldValueChange(actionObject.annotation.formFieldAnnotationType, actionObject.undoElement, false);\n                            this.updateFormFieldValueChange(actionObject.annotation.formFieldAnnotationType, actionObject.redoElement, true);\n                        }\n                        else {\n                            this.updateFormFieldValueChange(actionObject.annotation.formFieldAnnotationType, actionObject.annotation, actionObject.undoElement);\n                        }\n                    }\n                    else {\n                        var spanElement = document.getElementById(actionObject.annotation.id + \"_html_element\").children[0].children[0];\n                        spanElement.className = 'e-pdfviewer-signatureformfields';\n                        var formFieldObj = this.pdfViewer.nameTable[actionObject.annotation.id.split(\"_\")[0]];\n                        var annotationObj = this.pdfViewer.nameTable[actionObject.annotation.id];\n                        formFieldObj.wrapper.children.splice(formFieldObj.wrapper.children.indexOf(annotationObj.wrapper.children[0]), 1);\n                        if (actionObject.annotation.shapeAnnotationType === \"SignatureText\")\n                            formFieldObj.wrapper.children.splice(formFieldObj.wrapper.children.indexOf(annotationObj.wrapper.children[1]), 1);\n                        var key = actionObject.annotation.id.split('_')[0] + '_content';\n                        var data = null;\n                        if (this.pdfViewer.formDesignerModule) {\n                            data = this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');\n                        }\n                        if (data) {\n                            var formFieldsData = JSON.parse(data);\n                            for (var i = 0; i < formFieldsData.length; i++) {\n                                if (formFieldsData[i].Key === key) {\n                                    formFieldsData[i].FormField.value = '';\n                                    formFieldsData[i].FormField.signatureType = '';\n                                    this.pdfViewerBase.formFieldCollection[i].FormField.value = '';\n                                    this.pdfViewerBase.formFieldCollection[i].FormField.signatureType = '';\n                                }\n                            }\n                            this.pdfViewer.remove(actionObject.annotation);\n                            this.pdfViewer.renderDrawing();\n                            this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection, '_formDesigner');\n                        }\n                    }\n            }\n            this.redoCollection.push(actionObject);\n            this.updateToolbar();\n            this.isUndoRedoAction = false;\n            this.isUndoAction = false;\n        }\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.redo = function () {\n        var actionObject = this.redoCollection.pop();\n        if (actionObject) {\n            // eslint-disable-next-line\n            var shapeType = actionObject.annotation.shapeAnnotationType;\n            this.isUndoRedoAction = true;\n            switch (actionObject.action) {\n                case 'Text Markup Property modified':\n                    if (this.textMarkupAnnotationModule) {\n                        // eslint-disable-next-line max-len\n                        actionObject.annotation = this.textMarkupAnnotationModule.undoRedoPropertyChange(actionObject.annotation, actionObject.pageIndex, actionObject.index, actionObject.modifiedProperty);\n                    }\n                    break;\n                case 'Text Markup Added':\n                case 'Text Markup Deleted':\n                    if (this.textMarkupAnnotationModule) {\n                        // eslint-disable-next-line max-len\n                        this.textMarkupAnnotationModule.redoTextMarkupAction(actionObject.annotation, actionObject.pageIndex, actionObject.index, actionObject.action);\n                    }\n                    break;\n                case 'Drag':\n                case 'Resize':\n                    if (isLineShapes(actionObject.annotation)) {\n                        this.pdfViewer.nodePropertyChange(\n                        // eslint-disable-next-line max-len\n                        actionObject.annotation, { bounds: actionObject.redoElement.bounds, vertexPoints: actionObject.redoElement.vertexPoints, leaderHeight: actionObject.redoElement.leaderHeight });\n                    }\n                    else {\n                        this.pdfViewer.nodePropertyChange(actionObject.annotation, { bounds: actionObject.redoElement.bounds });\n                    }\n                    // eslint-disable-next-line max-len\n                    if (actionObject.annotation.measureType === 'Distance' || actionObject.annotation.measureType === 'Perimeter' || actionObject.annotation.measureType === 'Area' ||\n                        actionObject.annotation.measureType === 'Radius' || actionObject.annotation.measureType === 'Volume') {\n                        this.pdfViewer.nodePropertyChange(actionObject.annotation, { notes: actionObject.redoElement.notes });\n                        this.updateCalibrateValues(actionObject.annotation);\n                    }\n                    if (actionObject.annotation.formFieldAnnotationType) {\n                        this.pdfViewer.formDesigner.updateHTMLElement(actionObject.annotation);\n                    }\n                    this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID);\n                    this.pdfViewer.select([actionObject.annotation.id]);\n                    // eslint-disable-next-line max-len\n                    if (actionObject.annotation.shapeAnnotationType === 'Line' || actionObject.annotation.shapeAnnotationType === 'Rectangle' || actionObject.annotation.shapeAnnotationType === 'Ellipse' || actionObject.annotation.shapeAnnotationType === 'Polygon' || actionObject.annotation.shapeAnnotationType === 'LineWidthArrowHead'\n                        || actionObject.annotation.shapeAnnotationType === 'Radius' || actionObject.annotation.shapeAnnotationType === 'FreeText' || actionObject.annotation.shapeAnnotationType === 'HandWrittenSignature' || actionObject.annotation.shapeAnnotationType === 'SignatureText' || actionObject.annotation.shapeAnnotationType === 'SignatureImage' || actionObject.annotation.shapeAnnotationType === 'Ink') {\n                        this.modifyInCollections(actionObject.annotation, 'bounds');\n                    }\n                    break;\n                case 'Addition':\n                    if (this.pdfViewer.formDesigner && actionObject.annotation.formFieldAnnotationType) {\n                        actionObject.redoElement.bounds.x = actionObject.redoElement.wrapper.bounds.x;\n                        actionObject.redoElement.bounds.y = actionObject.redoElement.wrapper.bounds.y;\n                        this.pdfViewer.formDesigner.drawFormField(actionObject.redoElement);\n                    }\n                    else {\n                        // eslint-disable-next-line max-len\n                        if (shapeType === 'Line' || shapeType === 'LineWidthArrowHead' || shapeType === 'Polygon' || shapeType === 'Ellipse' || shapeType === 'Rectangle' || shapeType === 'Radius' || shapeType === 'Distance') {\n                            if (actionObject.annotation.measureType === '' || isNullOrUndefined(actionObject.annotation.measureType)) {\n                                shapeType = 'shape';\n                                this.shapeAnnotationModule.addInCollection(actionObject.annotation.pageIndex, actionObject.duplicate);\n                            }\n                            else {\n                                shapeType = 'shape_measure';\n                                this.measureAnnotationModule.addInCollection(actionObject.annotation.pageIndex, actionObject.duplicate);\n                            }\n                        }\n                        if (shapeType === 'FreeText') {\n                            this.freeTextAnnotationModule.addInCollection(actionObject.annotation.pageIndex, actionObject.duplicate);\n                        }\n                        if (shapeType === 'Stamp' || shapeType === 'Image') {\n                            this.stampAnnotationModule.updateDeleteItems(actionObject.annotation.pageIndex, actionObject.redoElement);\n                        }\n                        if (shapeType === 'HandWrittenSignature' || shapeType === 'SignatureText' || shapeType === 'SignatureImage') {\n                            this.pdfViewerBase.signatureModule.addInCollection(actionObject.annotation.pageIndex, actionObject.duplicate);\n                        }\n                        if (shapeType === 'Ink') {\n                            this.inkAnnotationModule.addInCollection(actionObject.annotation.pageIndex, actionObject.duplicate);\n                        }\n                        var addedAnnot = this.pdfViewer.add(actionObject.annotation);\n                        this.pdfViewer.select([actionObject.annotation.id]);\n                        if ((shapeType === 'FreeText' || addedAnnot.enableShapeLabel) && addedAnnot) {\n                            this.pdfViewer.nodePropertyChange(addedAnnot, {});\n                        }\n                        this.pdfViewer.renderDrawing(null, actionObject.annotation.pageIndex);\n                        // eslint-disable-next-line max-len\n                        this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addAnnotationComments(actionObject.annotation.pageIndex, shapeType);\n                        if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n                            var mobileAnnotationToolbar = document.getElementById(this.pdfViewer.element.id + '_propertyToolbar');\n                            if (mobileAnnotationToolbar && mobileAnnotationToolbar.children.length > 0) {\n                                this.pdfViewer.toolbarModule.annotationToolbarModule.toolbarCreated = false;\n                                this.pdfViewer.toolbarModule.annotationToolbarModule.createAnnotationToolbarForMobile();\n                            }\n                        }\n                    }\n                    break;\n                case 'Delete':\n                    if (this.pdfViewer.formDesigner && actionObject.annotation.formFieldAnnotationType) {\n                        this.pdfViewer.formDesigner.deleteFormField(actionObject.redoElement.id, false);\n                    }\n                    else {\n                        var isUpdate = false;\n                        var sType = actionObject.annotation.shapeAnnotationType;\n                        // eslint-disable-next-line max-len\n                        if (shapeType === 'Line' || shapeType === 'LineWidthArrowHead' || shapeType === 'Polygon' || shapeType === 'Ellipse' || shapeType === 'Rectangle' || shapeType === 'Radius' || shapeType === 'Distance') {\n                            if (actionObject.annotation.measureType === '' || isNullOrUndefined(actionObject.annotation.measureType)) {\n                                sType = 'shape';\n                            }\n                            else {\n                                sType = 'measure';\n                            }\n                            // eslint-disable-next-line max-len\n                            this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation, sType, 'delete');\n                            this.modifyInCollections(actionObject.annotation, 'delete');\n                            isUpdate = true;\n                        }\n                        if (shapeType === 'Stamp' || shapeType === 'Image') {\n                            // eslint-disable-next-line max-len\n                            this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation, sType, 'delete');\n                            this.stampAnnotationModule.updateSessionStorage(actionObject.annotation, null, 'delete');\n                            isUpdate = true;\n                        }\n                        if (shapeType === 'FreeText' || shapeType === 'HandWrittenSignature' || shapeType === 'SignatureText' || shapeType === 'SignatureImage') {\n                            // eslint-disable-next-line max-len\n                            this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation, sType, 'delete');\n                            this.modifyInCollections(actionObject.annotation, 'delete');\n                        }\n                        if (!isUpdate) {\n                            // eslint-disable-next-line max-len\n                            this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation, sType, 'delete');\n                        }\n                        var formFieldObj = void 0;\n                        if (actionObject.annotation.id) {\n                            formFieldObj = this.pdfViewer.nameTable[actionObject.annotation.id.split(\"_\")[0]];\n                        }\n                        if (formFieldObj != null && (formFieldObj.formFieldAnnotationType === 'SignatureField' || formFieldObj.formFieldAnnotationType === 'InitialField')) {\n                            formFieldObj.wrapper.children.splice(formFieldObj.wrapper.children.indexOf(actionObject.annotation.wrapper.children[0]), 1);\n                            if (actionObject.annotation.shapeAnnotationType === \"SignatureText\")\n                                formFieldObj.wrapper.children.splice(formFieldObj.wrapper.children.indexOf(actionObject.annotation.wrapper.children[1]), 1);\n                            var key = actionObject.annotation.id.split('_')[0] + '_content';\n                            var data = null;\n                            if (this.pdfViewer.formDesignerModule) {\n                                data = this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');\n                            }\n                            if (data) {\n                                var formFieldsData = JSON.parse(data);\n                                for (var i = 0; i < formFieldsData.length; i++) {\n                                    if (formFieldsData[i].Key === key) {\n                                        formFieldsData[i].FormField.value = '';\n                                        formFieldsData[i].FormField.signatureType = '';\n                                        this.pdfViewerBase.formFieldCollection[i].FormField.value = '';\n                                        this.pdfViewerBase.formFieldCollection[i].FormField.signatureType = '';\n                                    }\n                                }\n                                this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection, '_formDesigner');\n                            }\n                        }\n                        this.pdfViewer.clearSelection(actionObject.annotation.pageIndex);\n                        this.pdfViewer.remove(actionObject.annotation);\n                        this.pdfViewer.renderDrawing(null, actionObject.annotation.pageIndex);\n                        // eslint-disable-next-line\n                        var id = actionObject.annotation.annotName ? actionObject.annotation.annotName : actionObject.annotation.annotationId;\n                        var removeDiv = document.getElementById(id);\n                        this.removeCommentPanelDiv(removeDiv);\n                        if (actionObject.annotation.annotationId) {\n                            var collections = this.updateCollectionForNonRenderedPages(actionObject.annotation, id, actionObject.annotation.pageIndex);\n                            this.undoCommentsElement.push(collections);\n                        }\n                    }\n                    break;\n                case 'stampOpacity':\n                    this.pdfViewer.nodePropertyChange(actionObject.annotation, { opacity: actionObject.redoElement.opacity });\n                    this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(actionObject.annotation, null, true);\n                    break;\n                case 'Shape Stroke':\n                    this.pdfViewer.nodePropertyChange(actionObject.annotation, { strokeColor: actionObject.redoElement.strokeColor });\n                    this.modifyInCollections(actionObject.annotation, 'stroke');\n                    this.pdfViewer.renderDrawing();\n                    break;\n                case 'Shape Fill':\n                    this.pdfViewer.nodePropertyChange(actionObject.annotation, { fillColor: actionObject.redoElement.fillColor });\n                    this.modifyInCollections(actionObject.annotation, 'fill');\n                    this.pdfViewer.renderDrawing();\n                    break;\n                case 'Shape Opacity':\n                    this.pdfViewer.nodePropertyChange(actionObject.annotation, { opacity: actionObject.redoElement.opacity });\n                    if (actionObject.annotation.shapeAnnotationType === 'StickyNotes') {\n                        this.stickyNotesAnnotationModule.updateOpacityValue(actionObject.annotation);\n                        this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(actionObject.annotation, null, true);\n                    }\n                    else {\n                        this.modifyInCollections(actionObject.annotation, 'opacity');\n                    }\n                    this.pdfViewer.renderDrawing();\n                    break;\n                case 'Shape Thickness':\n                    this.pdfViewer.nodePropertyChange(actionObject.annotation, { thickness: actionObject.redoElement.thickness });\n                    this.modifyInCollections(actionObject.annotation, 'thickness');\n                    this.pdfViewer.renderDrawing();\n                    break;\n                case 'Line properties change':\n                    this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n                        // eslint-disable-next-line max-len\n                        fillColor: actionObject.redoElement.fillColor, strokeColor: actionObject.redoElement.strokeColor, opacity: actionObject.redoElement.opacity, thickness: actionObject.redoElement.thickness,\n                        sourceDecoraterShapes: this.getArrowType(actionObject.redoElement.lineHeadStart), taregetDecoraterShapes: this.getArrowType(actionObject.redoElement.lineHeadEnd),\n                        borderDashArray: actionObject.redoElement.borderDashArray, borderStyle: actionObject.redoElement.borderStyle\n                    });\n                    this.updateCollectionForLineProperty(actionObject.annotation);\n                    this.pdfViewer.renderDrawing();\n                    break;\n                case 'Text Property Added':\n                    // eslint-disable-next-line max-len\n                    actionObject.annotation = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.redoAction(actionObject.annotation, actionObject.action, actionObject.undoElement);\n                    this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(actionObject.annotation, null, true);\n                    break;\n                case 'Comments Property Added':\n                    // eslint-disable-next-line max-len\n                    actionObject.annotation = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.redoAction(actionObject.annotation, actionObject.action, actionObject.undoElement);\n                    break;\n                case 'Status Property Added':\n                    // eslint-disable-next-line max-len\n                    actionObject.annotation = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.redoAction(actionObject.annotation, actionObject.action);\n                    break;\n                case 'Comments Reply Deleted':\n                    // eslint-disable-next-line max-len\n                    actionObject.annotation = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.redoAction(actionObject.annotation, actionObject.action);\n                    break;\n                case 'dynamicText Change':\n                    this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange = true;\n                    actionObject.annotation.dynamicText = actionObject.redoElement.dynamicText;\n                    // eslint-disable-next-line\n                    var annotation = this.pdfViewer.selectedItems.annotations[0];\n                    if (annotation) {\n                        annotation.dynamicText = actionObject.redoElement.dynamicText;\n                        annotation.bounds.height = actionObject.redoElement.bounds.height;\n                    }\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.annotationModule.stickyNotesAnnotationModule.redoAction(actionObject.annotation, actionObject.action, actionObject.undoElement);\n                    this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(actionObject.annotation, null, true);\n                    this.modifyInCollections(actionObject.annotation, 'dynamicText');\n                    if (annotation) {\n                        this.pdfViewer.nodePropertyChange(annotation, {});\n                    }\n                    else {\n                        this.pdfViewer.nodePropertyChange(actionObject.annotation, {});\n                    }\n                    this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange = false;\n                    this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID);\n                    this.pdfViewer.select([actionObject.annotation.id]);\n                    break;\n                case 'fontColor':\n                    this.pdfViewer.nodePropertyChange(actionObject.annotation, { fontColor: actionObject.redoElement.fontColor });\n                    this.modifyInCollections(actionObject.annotation, 'fontColor');\n                    this.pdfViewer.renderDrawing();\n                    break;\n                case 'fontSize':\n                    this.pdfViewer.nodePropertyChange(actionObject.annotation, { fontSize: actionObject.redoElement.fontSize });\n                    this.modifyInCollections(actionObject.annotation, 'fontSize');\n                    this.pdfViewer.renderDrawing();\n                    break;\n                case 'textAlign':\n                    this.pdfViewer.nodePropertyChange(actionObject.annotation, { textAlign: actionObject.redoElement.textAlign });\n                    this.modifyInCollections(actionObject.annotation, 'textAlign');\n                    this.pdfViewer.renderDrawing();\n                    break;\n                case 'textPropertiesChange':\n                    this.pdfViewer.nodePropertyChange(actionObject.annotation, { font: actionObject.redoElement.font });\n                    this.modifyInCollections(actionObject.annotation, 'textPropertiesChange');\n                    this.pdfViewer.renderDrawing();\n                    break;\n                case 'Rotate':\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.nodePropertyChange(actionObject.annotation.annotations[0], { bounds: actionObject.redoElement.bounds, rotateAngle: actionObject.redoElement.rotateAngle });\n                    this.modifyInCollections(actionObject.annotation.annotations[0], 'bounds');\n                    this.pdfViewer.renderDrawing();\n                    break;\n                case 'FormDesigner Properties Change':\n                    if (actionObject.redoElement && actionObject.undoElement.isMultiline !== actionObject.redoElement.isMultiline) {\n                        this.undoRedoMultiline(actionObject.redoElement);\n                    }\n                    this.updateFormFieldPropertiesChanges(actionObject.redoElement.formFieldAnnotationType, actionObject.redoElement);\n                    break;\n                case 'FormField Value Change':\n                    if (actionObject.annotation.formFieldAnnotationType) {\n                        if (actionObject.annotation.formFieldAnnotationType == \"RadioButton\") {\n                            this.updateFormFieldValueChange(actionObject.annotation.formFieldAnnotationType, actionObject.undoElement, true);\n                            this.updateFormFieldValueChange(actionObject.annotation.formFieldAnnotationType, actionObject.redoElement, false);\n                        }\n                        else {\n                            this.updateFormFieldValueChange(actionObject.annotation.formFieldAnnotationType, actionObject.annotation, actionObject.redoElement);\n                        }\n                    }\n                    else {\n                        var spanElement = document.getElementById(actionObject.annotation.id + \"_html_element\").children[0].children[0];\n                        spanElement.className = 'e-pdfviewer-signatureformfields-signature';\n                        var formFieldObj = this.pdfViewer.nameTable[actionObject.annotation.id.split(\"_\")[0]];\n                        var annotationObj = this.pdfViewer.nameTable[actionObject.annotation.id];\n                        formFieldObj.wrapper.children.push(annotationObj.wrapper.children[0]);\n                        if (actionObject.annotation.shapeAnnotationType === \"SignatureText\")\n                            formFieldObj.wrapper.children.push(annotationObj.wrapper.children[1]);\n                        var key = actionObject.annotation.id.split('_')[0] + '_content';\n                        var data = null;\n                        if (this.pdfViewer.formDesignerModule) {\n                            data = this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');\n                        }\n                        if (data) {\n                            var formFieldsData = JSON.parse(data);\n                            for (var i = 0; i < formFieldsData.length; i++) {\n                                if (formFieldsData[i].Key === key) {\n                                    if (actionObject.annotation.shapeAnnotationType === \"SignatureText\") {\n                                        formFieldsData[i].FormField.signatureType = \"Text\";\n                                        formFieldsData[i].FormField.value = actionObject.annotation.data;\n                                        this.pdfViewerBase.formFieldCollection[i].FormField.value = actionObject.annotation.data;\n                                        this.pdfViewerBase.formFieldCollection[i].FormField.signatureType = \"Text\";\n                                    }\n                                    else if (actionObject.annotation.shapeAnnotationType === \"SignatureImage\") {\n                                        formFieldsData[i].FormField.signatureType = \"Image\";\n                                        formFieldsData[i].FormField.value = actionObject.annotation.data;\n                                        this.pdfViewerBase.formFieldCollection[i].FormField.value = actionObject.annotation.data;\n                                        this.pdfViewerBase.formFieldCollection[i].FormField.signatureType = \"Image\";\n                                    }\n                                    else {\n                                        formFieldsData[i].FormField.signatureType = \"Path\";\n                                        this.pdfViewerBase.formFieldCollection[i].FormField.signatureType = \"Path\";\n                                        var collectionData = processPathData(actionObject.annotation.data);\n                                        var csData = splitArrayCollection(collectionData);\n                                        formFieldsData[i].FormField.value = JSON.stringify(csData);\n                                        this.pdfViewerBase.formFieldCollection[i].FormField.value = JSON.stringify(csData);\n                                    }\n                                }\n                            }\n                            this.pdfViewer.add(actionObject.annotation);\n                            var canvass = document.getElementById(this.pdfViewer.element.id + '_annotationCanvas_' + actionObject.pageIndex);\n                            this.pdfViewer.renderDrawing(canvass, actionObject.pageIndex);\n                            this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection, '_formDesigner');\n                        }\n                    }\n            }\n            if (actionObject.redoElement && actionObject.redoElement.modifiedDate !== undefined) {\n                actionObject.annotation.modifiedDate = actionObject.redoElement.modifiedDate;\n            }\n            this.actionCollection.push(actionObject);\n            this.updateToolbar();\n            this.isUndoRedoAction = false;\n        }\n    };\n    Annotation.prototype.undoRedoMultiline = function (element) {\n        if (element.isMultiline && element.formFieldAnnotationType === 'Textbox') {\n            this.pdfViewer.formDesignerModule.renderMultilineText(element, true);\n        }\n        else if (element.formFieldAnnotationType === 'Textbox') {\n            this.pdfViewer.formDesignerModule.renderTextbox(element, true);\n        }\n    };\n    Annotation.prototype.updateFormFieldValueChange = function (formFieldAnnotationType, annotation, value) {\n        if (annotation) {\n            var formFieldModel = this.pdfViewer.formDesigner.getFormField(annotation.id.split(\"_\")[0]);\n            var data = null;\n            if (this.pdfViewer.formDesignerModule) {\n                data = this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');\n            }\n            if (data) {\n                var formFieldsData = JSON.parse(data);\n                var index = this.pdfViewer.formDesigner.getFormFiledIndex(annotation.id.split('_')[0]);\n                switch (formFieldAnnotationType) {\n                    case 'Textbox':\n                    case 'PasswordField':\n                    case 'RadioButton':\n                    case 'DropdownList':\n                    case 'ListBox':\n                        var inputElement = document.getElementById(annotation.id.split(\"_\")[0] + \"_content_html_element\").firstElementChild.firstElementChild;\n                        if (formFieldAnnotationType == 'Textbox' || formFieldAnnotationType == 'PasswordField') {\n                            formFieldModel.value = value;\n                            this.pdfViewer.formDesigner.updateValuePropertyChange(formFieldModel, inputElement, true, index, formFieldsData);\n                        }\n                        else if (formFieldAnnotationType == 'RadioButton') {\n                            formFieldModel.isSelected = value;\n                            this.pdfViewer.formDesigner.updateIsSelectedPropertyChange(formFieldModel, inputElement.firstElementChild, true, index, formFieldsData);\n                        }\n                        else if (formFieldAnnotationType == 'DropdownList' || formFieldAnnotationType == 'ListBox') {\n                            formFieldModel.selectedIndex = value;\n                            formFieldsData[index].FormField.selectedIndex = value;\n                            this.pdfViewerBase.formFieldCollection[index].FormField.selectedIndex = value;\n                            this.pdfViewer.nameTable[formFieldsData[index].Key.split(\"_\")[0]].selectedIndex = value;\n                            if (formFieldAnnotationType == 'ListBox') {\n                                for (var k = 0; k < inputElement.options.length; k++) {\n                                    inputElement.options[k].selected = value.includes(k) ? true : false;\n                                }\n                            }\n                            else {\n                                inputElement.selectedIndex = value;\n                            }\n                        }\n                        break;\n                    case 'Checkbox':\n                        var checkboxDivElement = document.getElementById(annotation.id.split(\"_\")[0] + \"_content_html_element\").firstElementChild.firstElementChild.lastElementChild;\n                        formFieldModel.isChecked = value;\n                        this.pdfViewer.formDesigner.updateIsCheckedPropertyChange(formFieldModel, checkboxDivElement, true, index, formFieldsData);\n                        break;\n                }\n                this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection, '_formDesigner');\n            }\n        }\n    };\n    Annotation.prototype.updateFormFieldPropertiesChanges = function (formFieldAnnotationType, element) {\n        switch (formFieldAnnotationType) {\n            case 'Textbox':\n            case 'PasswordField':\n                this.pdfViewer.formDesigner.updateTextboxFormDesignerProperties(element, true);\n                break;\n            case 'Checkbox':\n                this.pdfViewer.formDesigner.updateCheckboxFormDesignerProperties(element, true);\n                break;\n            case 'RadioButton':\n                this.pdfViewer.formDesigner.updateRadioButtonDesignerProperties(element, true);\n                break;\n            case 'DropdownList':\n                this.pdfViewer.formDesigner.updateDropdownFormDesignerProperties(element, true);\n                break;\n            case 'ListBox':\n                this.pdfViewer.formDesigner.updateListBoxFormDesignerProperties(element, true);\n                break;\n            case 'SignatureField':\n            case 'InitialField':\n                this.pdfViewer.formDesigner.updateSignatureTextboxProperties(element, true);\n        }\n    };\n    Annotation.prototype.updateCollectionForLineProperty = function (pdfAnnotationBase) {\n        this.modifyInCollections(pdfAnnotationBase, 'fill');\n        this.modifyInCollections(pdfAnnotationBase, 'stroke');\n        this.modifyInCollections(pdfAnnotationBase, 'opacity');\n        this.modifyInCollections(pdfAnnotationBase, 'thickness');\n        this.modifyInCollections(pdfAnnotationBase, 'dashArray');\n        this.modifyInCollections(pdfAnnotationBase, 'startArrow');\n        this.modifyInCollections(pdfAnnotationBase, 'endArrow');\n    };\n    Annotation.prototype.updateToolbar = function (isAnnotationDelete) {\n        if (this.pdfViewer.toolbarModule) {\n            this.pdfViewer.toolbarModule.updateUndoRedoButtons();\n        }\n        if (this.actionCollection && this.actionCollection.length == 0) {\n            this.pdfViewerBase.updateDocumentEditedProperty(false);\n        }\n        else {\n            this.pdfViewerBase.updateDocumentEditedProperty(true);\n        }\n        if (isAnnotationDelete) {\n            //This below lines are commented for the below task -EJ2-61754-IsDocumentEdited API is not Properly working for delete annotations\n            //Also refer EJ2-55205-The isDocumentEdited property is False on adding handwritten signature\n            // let isEdited: boolean = false;\n            // if (this.pdfViewer.annotationCollection && this.pdfViewer.annotationCollection.length > 0 && this.pdfViewer.signatureCollection && this.pdfViewer.signatureCollection.length > 0) {\n            //     isEdited = true;\n            // }\n            // if (!isEdited && this.pdfViewer.isDocumentEdited) {\n            this.pdfViewerBase.updateDocumentEditedProperty(true);\n            // }\n        }\n    };\n    Annotation.prototype.createNote = function () {\n        // eslint-disable-next-line max-len\n        this.popupNote = createElement('div', { id: this.pdfViewer.element.id + '_annotation_note', className: 'e-pv-annotation-note', styles: 'display:none' });\n        this.popupNoteAuthor = createElement('div', { id: this.pdfViewer.element.id + '_annotation_note_author', className: 'e-pv-annotation-note-author' });\n        this.popupNote.appendChild(this.popupNoteAuthor);\n        // eslint-disable-next-line max-len\n        this.popupNoteContent = createElement('div', { id: this.pdfViewer.element.id + '_annotation_note_content', className: 'e-pv-annotation-note-content' });\n        this.popupNote.appendChild(this.popupNoteContent);\n        if (this.pdfViewerBase.mainContainer) {\n            this.pdfViewerBase.mainContainer.appendChild(this.popupNote);\n        }\n    };\n    /**\n     * @param event\n     * @param color\n     * @param author\n     * @param note\n     * @param type\n     * @param event\n     * @param color\n     * @param author\n     * @param note\n     * @param type\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.showPopupNote = function (event, color, author, note, type) {\n        var mainContainerPosition = this.pdfViewerBase.mainContainer.getBoundingClientRect();\n        var popupNoteClientRect = this.popupNote.getBoundingClientRect();\n        if (author) {\n            this.popupNoteAuthor.textContent = author;\n        }\n        this.popupNoteContent.textContent = note;\n        if (type === 'Highlight') {\n            this.popupNote.style.backgroundColor = 'rgb(237, 232, 177)';\n        }\n        else if (type === 'Underline') {\n            this.popupNote.style.backgroundColor = 'rgb(187, 241, 191)';\n        }\n        else if (type === 'Strikethrough') {\n            this.popupNote.style.backgroundColor = 'rgb(242, 188, 207)';\n        }\n        this.popupNote.style.display = 'block';\n        var topPosition = (event.pageY - mainContainerPosition.top + 5);\n        var leftPosition = (event.pageX - mainContainerPosition.left + 5);\n        if (leftPosition + popupNoteClientRect.width > mainContainerPosition.width) {\n            leftPosition = leftPosition - popupNoteClientRect.width;\n        }\n        if (topPosition + popupNoteClientRect.height > mainContainerPosition.height) {\n            topPosition = topPosition - popupNoteClientRect.height;\n        }\n        this.popupNote.style.top = topPosition + 'px';\n        this.popupNote.style.left = leftPosition + 'px';\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.hidePopupNote = function () {\n        if (this.popupNote) {\n            this.popupNote.style.display = 'none';\n        }\n    };\n    Annotation.prototype.createTextMarkupPopup = function () {\n        var _this = this;\n        var elementId = this.pdfViewer.element.id;\n        // eslint-disable-next-line max-len\n        this.popupElement = createElement('div', { id: elementId + '_popup_annotation_note', className: 'e-pv-annotation-popup-menu', styles: 'display:none' });\n        var headerElement = createElement('div', { id: elementId + '_popup_header', className: 'e-pv-annotation-popup-header' });\n        // eslint-disable-next-line max-len\n        this.authorPopupElement = createElement('div', { id: elementId + '_popup_author', className: 'e-pv-annotation-popup-author' });\n        headerElement.appendChild(this.authorPopupElement);\n        // eslint-disable-next-line max-len\n        var closeBtn = createElement('span', { id: elementId + '_popup_close', className: 'e-pv-annotation-popup-close e-pv-icon' });\n        headerElement.appendChild(closeBtn);\n        this.popupElement.appendChild(headerElement);\n        // eslint-disable-next-line max-len\n        this.modifiedDateElement = createElement('div', { id: elementId + '_popup_modified_time', className: 'e-pv-annotation-modified-time' });\n        this.popupElement.appendChild(this.modifiedDateElement);\n        // eslint-disable-next-line max-len\n        var contentContainer = createElement('div', { id: elementId + '_popup_content_container', className: 'e-pv-annotation-popup-note-container' });\n        this.noteContentElement = createElement('div', { id: elementId + '_popup_content', className: 'e-pv-annotation-popup-content' });\n        this.noteContentElement.contentEditable = 'true';\n        contentContainer.appendChild(this.noteContentElement);\n        this.popupElement.appendChild(contentContainer);\n        this.pdfViewerBase.viewerContainer.appendChild(this.popupElement);\n        closeBtn.addEventListener('click', this.saveClosePopupMenu.bind(this));\n        closeBtn.addEventListener('touchend', this.saveClosePopupMenu.bind(this));\n        this.popupElement.addEventListener('mousedown', this.onPopupElementMoveStart.bind(this));\n        this.popupElement.addEventListener('mousemove', this.onPopupElementMove.bind(this));\n        window.addEventListener('mouseup', this.onPopupElementMoveEnd.bind(this));\n        this.popupElement.addEventListener('touchstart', this.onPopupElementMoveStart.bind(this));\n        this.popupElement.addEventListener('touchmove', this.onPopupElementMove.bind(this));\n        window.addEventListener('touchend', this.onPopupElementMoveEnd.bind(this));\n        this.noteContentElement.addEventListener('mousedown', function () {\n            _this.noteContentElement.focus();\n        });\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.onPopupElementMoveStart = function (event) {\n        if (event.type === 'touchstart') {\n            event = event.changedTouches[0];\n        }\n        if ((event.target.id !== (this.noteContentElement.id) || !(event.target.contains(this.noteContentElement.childNodes[0])))) {\n            this.isPopupMenuMoved = true;\n            var popupElementClientRect = this.popupElement.getBoundingClientRect();\n            this.clientX = event.clientX - popupElementClientRect.left;\n            // eslint-disable-next-line max-len\n            this.clientY = (event.clientY - popupElementClientRect.top) + (this.pdfViewerBase.pageSize[this.currentAnnotPageNumber].top * this.pdfViewerBase.getZoomFactor());\n        }\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.onPopupElementMove = function (event) {\n        if (event.type === 'touchmove') {\n            event = event.changedTouches[0];\n        }\n        // eslint-disable-next-line max-len\n        if (this.isPopupMenuMoved && (event.target.id !== (this.noteContentElement.id) || !(event.target.contains(this.noteContentElement.childNodes[0])))) {\n            var left = (event.clientX - this.clientX) + parseFloat(this.popupElement.style.left);\n            var top_1 = ((event.clientY - this.clientY) + parseFloat(this.popupElement.style.top));\n            this.clientX = event.clientX;\n            this.clientY = event.clientY;\n            var clientPosition = this.popupElement.getBoundingClientRect();\n            var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + this.currentAnnotPageNumber);\n            // eslint-disable-next-line max-len\n            if (left > parseFloat(pageDiv.style.left) && (left + clientPosition.width) < (parseFloat(pageDiv.style.left) + parseFloat(pageDiv.style.width))) {\n                this.popupElement.style.left = (left) + 'px';\n            }\n            else {\n                this.popupElement.style.left = parseFloat(this.popupElement.style.left) + 'px';\n            }\n            // eslint-disable-next-line max-len\n            if (top_1 > parseFloat(pageDiv.style.top) && (top_1 + clientPosition.height) < (parseFloat(pageDiv.style.top) + parseFloat(pageDiv.style.height))) {\n                this.popupElement.style.top = (top_1) + 'px';\n            }\n            else {\n                this.popupElement.style.top = parseFloat(this.popupElement.style.top) + 'px';\n            }\n        }\n    };\n    Annotation.prototype.onPopupElementMoveEnd = function () {\n        this.isPopupMenuMoved = false;\n    };\n    Annotation.prototype.saveClosePopupMenu = function () {\n        if (this.textMarkupAnnotationModule) {\n            this.textMarkupAnnotationModule.saveNoteContent(this.currentAnnotPageNumber, this.noteContentElement.innerText);\n        }\n        this.closePopupMenu();\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.closePopupMenu = function () {\n        if (this.popupElement) {\n            this.popupElement.parentElement.removeChild(this.popupElement);\n            this.popupElement = null;\n            this.isPopupNoteVisible = false;\n        }\n    };\n    /**\n     * @param event\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.showAnnotationPopup = function (event) {\n        if (this.textMarkupAnnotationModule) {\n            this.currentAnnotPageNumber = this.getEventPageNumber(event);\n            // eslint-disable-next-line max-len\n            if (this.textMarkupAnnotationModule && (event.target !== (this.noteContentElement) || (event.target.contains(this.noteContentElement.childNodes[0])))) {\n                this.hidePopupNote();\n                if (!this.popupElement) {\n                    this.createTextMarkupPopup();\n                    this.popupElement.style.display = 'block';\n                    this.authorPopupElement.textContent = this.textMarkupAnnotationModule.currentTextMarkupAnnotation.author;\n                    // eslint-disable-next-line max-len\n                    this.modifiedDateElement.textContent = this.getProperDate(this.textMarkupAnnotationModule.currentTextMarkupAnnotation.modifiedDate);\n                    this.noteContentElement.textContent = this.textMarkupAnnotationModule.currentTextMarkupAnnotation.note;\n                    var clientPosition = this.popupElement.getBoundingClientRect();\n                    // eslint-disable-next-line max-len\n                    var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + this.currentAnnotPageNumber);\n                    var canvasPosition = pageDiv.getBoundingClientRect();\n                    var topPosition = ((event.clientY) - canvasPosition.top) + parseFloat(pageDiv.style.top);\n                    var leftPosition = (event.clientX);\n                    if ((leftPosition + clientPosition.width) > (parseFloat(pageDiv.style.left) + parseFloat(pageDiv.style.width))) {\n                        this.popupElement.style.left = (leftPosition - clientPosition.width) + 'px';\n                    }\n                    else {\n                        this.popupElement.style.left = leftPosition + 'px';\n                    }\n                    if ((topPosition + clientPosition.height) > (parseFloat(pageDiv.style.top) + parseFloat(pageDiv.style.height))) {\n                        this.popupElement.style.top = (topPosition - clientPosition.height) + 'px';\n                    }\n                    else {\n                        this.popupElement.style.top = topPosition + 'px';\n                    }\n                    this.isPopupNoteVisible = true;\n                }\n            }\n        }\n    };\n    /**\n     * @param args\n     * @param isOpacity\n     * @param args\n     * @param isOpacity\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.modifyOpacity = function (args, isOpacity) {\n        var currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n        var clonedObject = cloneObject(currentAnnotation);\n        var redoClonedObject = cloneObject(currentAnnotation);\n        var opacityValue = 1;\n        if (isOpacity) {\n            opacityValue = args / 100;\n        }\n        else {\n            opacityValue = args.value / 100;\n        }\n        if (currentAnnotation.opacity !== opacityValue) {\n            redoClonedObject.opacity = opacityValue;\n            this.pdfViewer.nodePropertyChange(currentAnnotation, { opacity: opacityValue });\n            if (currentAnnotation.shapeAnnotationType === 'StickyNotes') {\n                this.stickyNotesAnnotationModule.updateOpacityValue(currentAnnotation);\n            }\n            else {\n                this.modifyInCollections(currentAnnotation, 'opacity');\n            }\n            if (currentAnnotation.shapeAnnotationType === 'HandWrittenSignature' || currentAnnotation.shapeAnnotationType === 'SignatureImage' || currentAnnotation.shapeAnnotationType === 'SignatureText') {\n                // eslint-disable-next-line max-len\n                this.pdfViewer.fireSignaturePropertiesChange(currentAnnotation.pageIndex, currentAnnotation.signatureName, currentAnnotation.shapeAnnotationType, false, true, false, clonedObject.opacity, redoClonedObject.opacity);\n            }\n            else {\n                this.triggerAnnotationPropChange(currentAnnotation, false, false, false, true);\n            }\n            // eslint-disable-next-line max-len\n            this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Shape Opacity', '', clonedObject, redoClonedObject);\n            this.pdfViewer.renderDrawing();\n        }\n    };\n    /**\n     * @param currentColor\n     * @private\n     */\n    Annotation.prototype.modifyFontColor = function (currentColor) {\n        var currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n        var clonedObject = cloneObject(currentAnnotation);\n        var redoClonedObject = cloneObject(currentAnnotation);\n        redoClonedObject.fontColor = currentColor;\n        this.pdfViewer.nodePropertyChange(currentAnnotation, { fontColor: currentColor });\n        this.modifyInCollections(currentAnnotation, 'fontColor');\n        this.triggerAnnotationPropChange(currentAnnotation, false, false, false, true);\n        // eslint-disable-next-line max-len\n        this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'fontColor', '', clonedObject, redoClonedObject);\n        this.pdfViewer.renderDrawing();\n    };\n    /**\n     * @param currentValue\n     * @private\n     */\n    Annotation.prototype.modifyFontFamily = function (currentValue) {\n        var currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n        var clonedObject = cloneObject(currentAnnotation);\n        var redoClonedObject = cloneObject(currentAnnotation);\n        redoClonedObject.fontFamily = currentValue;\n        if (this.pdfViewer.freeTextSettings.enableAutoFit) {\n            this.updateFontFamilyRenderSize(currentAnnotation, currentValue);\n        }\n        else {\n            this.pdfViewer.nodePropertyChange(currentAnnotation, { fontFamily: currentValue });\n        }\n        this.modifyInCollections(currentAnnotation, 'fontFamily');\n        this.triggerAnnotationPropChange(currentAnnotation, false, false, false, true);\n        // eslint-disable-next-line max-len\n        this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'fontFamily', '', clonedObject, redoClonedObject);\n        this.pdfViewer.renderDrawing();\n    };\n    /**\n     * @param currentValue\n     * @private\n     */\n    Annotation.prototype.modifyFontSize = function (currentValue, isInteracted) {\n        var currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n        var clonedObject = cloneObject(currentAnnotation);\n        var redoClonedObject = cloneObject(currentAnnotation);\n        redoClonedObject.fontSize = currentValue;\n        var freeTextAnnotation = this.freeTextAnnotationModule;\n        var x = currentAnnotation.bounds.x;\n        var y = currentAnnotation.bounds.y;\n        currentAnnotation.fontSize = currentValue;\n        if (freeTextAnnotation && !freeTextAnnotation.isNewFreeTextAnnot && currentAnnotation.dynamicText !== '') {\n            freeTextAnnotation.addInuptElemet({ x: x, y: y }, currentAnnotation);\n            if (currentAnnotation) {\n                if (currentAnnotation.previousFontSize != currentValue) {\n                    freeTextAnnotation.inputBoxElement.style.height = 'auto';\n                    if (isInteracted) {\n                        freeTextAnnotation.inputBoxElement.style.height = freeTextAnnotation.inputBoxElement.scrollHeight + 5 + 'px';\n                    }\n                    else {\n                        if (freeTextAnnotation.inputBoxElement.scrollHeight + 5 > currentAnnotation.bounds.height) {\n                            freeTextAnnotation.inputBoxElement.style.height = freeTextAnnotation.inputBoxElement.scrollHeight + 5 + 'px';\n                        }\n                        else {\n                            freeTextAnnotation.inputBoxElement.style.height = currentAnnotation.bounds.height + 'px';\n                        }\n                    }\n                }\n                var inputEleHeight = parseFloat(freeTextAnnotation.inputBoxElement.style.height);\n                var inputEleWidth = parseFloat(freeTextAnnotation.inputBoxElement.style.width);\n                var zoomFactor = this.pdfViewerBase.getZoomFactor();\n                inputEleWidth = ((inputEleWidth) / zoomFactor);\n                inputEleHeight = ((inputEleHeight) / zoomFactor);\n                var heightDiff = (inputEleHeight - currentAnnotation.bounds.height);\n                var y_1 = undefined;\n                if (heightDiff > 0) {\n                    y_1 = currentAnnotation.wrapper.offsetY + (heightDiff / 2);\n                    y_1 = y_1 > 0 ? y_1 : undefined;\n                }\n                else {\n                    heightDiff = Math.abs(heightDiff);\n                    y_1 = currentAnnotation.wrapper.offsetY - (heightDiff / 2);\n                    y_1 = y_1 > 0 ? y_1 : undefined;\n                }\n                var widthDiff = (inputEleWidth - currentAnnotation.bounds.width);\n                var x_1 = undefined;\n                if (widthDiff > 0) {\n                    x_1 = currentAnnotation.wrapper.offsetX + (widthDiff / 2);\n                    x_1 = x_1 > 0 ? x_1 : undefined;\n                }\n                else {\n                    widthDiff = Math.abs(widthDiff);\n                    x_1 = currentAnnotation.wrapper.offsetX - (widthDiff / 2);\n                }\n                currentAnnotation.bounds.width = inputEleWidth;\n                currentAnnotation.bounds.height = inputEleHeight;\n                // eslint-disable-next-line max-len\n                this.pdfViewer.nodePropertyChange(currentAnnotation, { fontSize: currentValue, bounds: { width: currentAnnotation.bounds.width, height: currentAnnotation.bounds.height, y: y_1, x: x_1 } });\n                this.pdfViewer.renderSelector(currentAnnotation.pageIndex, this.pdfViewer.annotationSelectorSettings);\n                currentAnnotation.previousFontSize = currentValue;\n            }\n            this.modifyInCollections(currentAnnotation, 'fontSize');\n            this.modifyInCollections(currentAnnotation, 'bounds');\n            this.triggerAnnotationPropChange(currentAnnotation, false, false, false, true);\n            // eslint-disable-next-line max-len\n            this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'fontSize', '', clonedObject, redoClonedObject);\n            this.pdfViewer.renderDrawing();\n        }\n    };\n    /**\n     * @param currentValue\n     * @private\n     */\n    Annotation.prototype.modifyTextAlignment = function (currentValue) {\n        var currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n        var clonedObject = cloneObject(currentAnnotation);\n        var redoClonedObject = cloneObject(currentAnnotation);\n        redoClonedObject.textAlign = currentValue;\n        this.pdfViewer.nodePropertyChange(currentAnnotation, { textAlign: currentValue });\n        this.modifyInCollections(currentAnnotation, 'textAlign');\n        this.triggerAnnotationPropChange(currentAnnotation, false, false, false, true);\n        // eslint-disable-next-line max-len\n        this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'textAlign', '', clonedObject, redoClonedObject);\n        this.pdfViewer.renderDrawing();\n    };\n    /**\n     * @param fontInfo\n     * @param action\n     * @private\n     */\n    Annotation.prototype.modifyTextProperties = function (fontInfo, action) {\n        var currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n        var clonedObject = cloneObject(currentAnnotation);\n        var redoClonedObject = cloneObject(currentAnnotation);\n        if (action === 'bold') {\n            redoClonedObject.font.isBold = fontInfo.isBold;\n        }\n        else if (action === 'italic') {\n            redoClonedObject.font.isItalic = fontInfo.isItalic;\n        }\n        else if (action === 'underline') {\n            redoClonedObject.font.isUnderline = fontInfo.isUnderline;\n            if (redoClonedObject.font.isUnderline && redoClonedObject.font.isStrikeout) {\n                redoClonedObject.font.isStrikeout = false;\n            }\n        }\n        else if (action === 'strikeout') {\n            redoClonedObject.font.isStrikeout = fontInfo.isStrikeout;\n            if (redoClonedObject.font.isUnderline && redoClonedObject.font.isStrikeout) {\n                redoClonedObject.font.isUnderline = false;\n            }\n        }\n        this.pdfViewer.nodePropertyChange(currentAnnotation, { font: fontInfo });\n        this.modifyInCollections(currentAnnotation, 'textPropertiesChange');\n        this.triggerAnnotationPropChange(currentAnnotation, false, false, false, true);\n        // eslint-disable-next-line max-len\n        this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'textPropertiesChange', '', clonedObject, redoClonedObject);\n        this.pdfViewer.renderDrawing();\n    };\n    /**\n     * @param thicknessValue\n     * @private\n     */\n    Annotation.prototype.modifyThickness = function (thicknessValue) {\n        var currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n        if (currentAnnotation.thickness !== thicknessValue) {\n            var clonedObject = cloneObject(currentAnnotation);\n            var redoClonedObject = cloneObject(currentAnnotation);\n            redoClonedObject.thickness = thicknessValue;\n            this.pdfViewer.nodePropertyChange(currentAnnotation, { thickness: thicknessValue });\n            this.modifyInCollections(currentAnnotation, 'thickness');\n            if (currentAnnotation.shapeAnnotationType === 'HandWrittenSignature' || currentAnnotation.shapeAnnotationType === 'SignatureText' || currentAnnotation.shapeAnnotationType === 'SignatureImage') {\n                // eslint-disable-next-line max-len\n                this.pdfViewer.fireSignaturePropertiesChange(currentAnnotation.pageIndex, currentAnnotation.signatureName, currentAnnotation.shapeAnnotationType, false, false, true, clonedObject.thickness, redoClonedObject.thickness);\n            }\n            else {\n                this.triggerAnnotationPropChange(currentAnnotation, false, false, true, false);\n            }\n            // eslint-disable-next-line max-len\n            this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Shape Thickness', '', clonedObject, redoClonedObject);\n            this.pdfViewer.renderDrawing();\n        }\n    };\n    /**\n     * @param color\n     * @private\n     */\n    Annotation.prototype.modifyStrokeColor = function (color) {\n        var currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n        var clonedObject = cloneObject(currentAnnotation);\n        var redoClonedObject = cloneObject(currentAnnotation);\n        redoClonedObject.strokeColor = color;\n        this.pdfViewer.nodePropertyChange(currentAnnotation, { strokeColor: color });\n        this.modifyInCollections(currentAnnotation, 'stroke');\n        if (currentAnnotation.shapeAnnotationType === 'HandWrittenSignature' || currentAnnotation.shapeAnnotationType === 'SignatureText' || currentAnnotation.shapeAnnotationType === 'SignatureImage') {\n            // eslint-disable-next-line max-len\n            this.pdfViewer.fireSignaturePropertiesChange(currentAnnotation.pageIndex, currentAnnotation.signatureName, currentAnnotation.shapeAnnotationType, true, false, false, clonedObject.strokeColor, redoClonedObject.strokeColor);\n        }\n        else {\n            this.triggerAnnotationPropChange(currentAnnotation, false, true, false, false);\n        }\n        // eslint-disable-next-line max-len\n        this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Shape Stroke', '', clonedObject, redoClonedObject);\n        this.pdfViewer.renderDrawing();\n    };\n    /**\n     * @param color\n     * @private\n     */\n    Annotation.prototype.modifyFillColor = function (color) {\n        var currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n        var clonedObject = cloneObject(currentAnnotation);\n        var redoClonedObject = cloneObject(currentAnnotation);\n        redoClonedObject.fillColor = color;\n        this.pdfViewer.nodePropertyChange(this.pdfViewer.selectedItems.annotations[0], { fillColor: color });\n        this.modifyInCollections(currentAnnotation, 'fill');\n        this.triggerAnnotationPropChange(currentAnnotation, true, false, false, false);\n        // eslint-disable-next-line max-len\n        this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Shape Fill', '', clonedObject, redoClonedObject);\n        this.pdfViewer.renderDrawing();\n    };\n    /**\n     * @param dynamicText\n     * @param annotName\n     * @private\n     */\n    Annotation.prototype.modifyDynamicTextValue = function (dynamicText, annotName) {\n        var currentAnnotation = null;\n        currentAnnotation = this.pdfViewer.annotations.filter(function (s) { return s.annotName === annotName; })[0];\n        if (currentAnnotation) {\n            var clonedObject = cloneObject(currentAnnotation);\n            var redoClonedObject = cloneObject(currentAnnotation);\n            currentAnnotation.dynamicText = dynamicText;\n            redoClonedObject.dynamicText = dynamicText;\n            if (clonedObject.dynamicText === '') {\n                clonedObject.dynamicText = this.freeTextAnnotationModule.previousText;\n            }\n            this.pdfViewer.nodePropertyChange(currentAnnotation, { dynamicText: dynamicText });\n            this.pdfViewer.renderSelector(currentAnnotation.pageIndex, currentAnnotation.annotationSelectorSettings);\n            if (clonedObject.dynamicText !== redoClonedObject.dynamicText) {\n                // eslint-disable-next-line max-len\n                this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'dynamicText Change', '', clonedObject, redoClonedObject);\n                this.modifyInCollections(currentAnnotation, 'dynamicText');\n            }\n            if (!isNullOrUndefined(this.freeTextAnnotationModule) && this.freeTextAnnotationModule.previousText !== 'Type Here' && this.freeTextAnnotationModule.previousText !== currentAnnotation.dynamicText) {\n                this.triggerAnnotationPropChange(currentAnnotation, false, false, false, false, false, false, false, true, this.freeTextAnnotationModule.previousText, currentAnnotation.dynamicText);\n            }\n            this.pdfViewer.renderDrawing();\n        }\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.modifyInCollections = function (annotationBase, property) {\n        // eslint-disable-next-line\n        var returnObj;\n        if (annotationBase.measureType === '' || isNullOrUndefined(annotationBase.measureType)) {\n            if (annotationBase.shapeAnnotationType === 'FreeText') {\n                returnObj = this.freeTextAnnotationModule.modifyInCollection(property, annotationBase.pageIndex, annotationBase);\n            }\n            else if (annotationBase.shapeAnnotationType === 'HandWrittenSignature' || annotationBase.shapeAnnotationType === 'SignatureText' || annotationBase.shapeAnnotationType === 'SignatureImage') {\n                // eslint-disable-next-line max-len\n                returnObj = this.pdfViewerBase.signatureModule.modifySignatureCollection(property, annotationBase.pageIndex, annotationBase);\n            }\n            else if (annotationBase.shapeAnnotationType === 'Stamp') {\n                returnObj = this.stampAnnotationModule.modifyInCollection(property, annotationBase.pageIndex, annotationBase, null);\n            }\n            else if (annotationBase.shapeAnnotationType === 'Ink') {\n                // eslint-disable-next-line max-len\n                returnObj = this.inkAnnotationModule.modifySignatureInkCollection(property, annotationBase.pageIndex, annotationBase);\n            }\n            else {\n                returnObj = this.shapeAnnotationModule.modifyInCollection(property, annotationBase.pageIndex, annotationBase, null);\n            }\n        }\n        else if (annotationBase.measureType === 'Distance' || annotationBase.measureType === 'Perimeter' ||\n            annotationBase.measureType === 'Radius' || annotationBase.measureType === 'Area' || annotationBase.measureType === 'Volume') {\n            returnObj = this.measureAnnotationModule.modifyInCollection(property, annotationBase.pageIndex, annotationBase);\n        }\n        if (this.isUndoRedoAction) {\n            this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(annotationBase, null, true);\n            if (this.isUndoAction) {\n                annotationBase.modifiedDate = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n            }\n        }\n        else {\n            if (property !== 'bounds') {\n                this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(annotationBase);\n            }\n        }\n        return returnObj;\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.createPropertiesWindow = function () {\n        var _this = this;\n        if (!isBlazor()) {\n            var elementID = this.pdfViewer.element.id;\n            // eslint-disable-next-line max-len\n            var dialogDiv = createElement('div', { id: elementID + '_properties_window', className: 'e-pv-properties-window' });\n            var appearanceTab = this.createAppearanceTab();\n            this.pdfViewerBase.pageContainer.appendChild(dialogDiv);\n            this.propertiesDialog = new Dialog({\n                showCloseIcon: true, closeOnEscape: false, isModal: true, header: this.pdfViewer.localeObj.getConstant('Line Properties'),\n                target: this.pdfViewer.element, content: appearanceTab, close: function () {\n                    _this.destroyPropertiesWindow();\n                }\n            });\n            if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n                this.propertiesDialog.buttons = [\n                    // eslint-disable-next-line max-len\n                    { buttonModel: { content: this.pdfViewer.localeObj.getConstant('OK'), isPrimary: true }, click: this.onOkClicked.bind(this) },\n                    { buttonModel: { content: this.pdfViewer.localeObj.getConstant('Cancel') }, click: this.onCancelClicked.bind(this) }\n                ];\n            }\n            else {\n                this.propertiesDialog.buttons = [\n                    { buttonModel: { content: this.pdfViewer.localeObj.getConstant('Cancel') }, click: this.onCancelClicked.bind(this) },\n                    // eslint-disable-next-line max-len\n                    { buttonModel: { content: this.pdfViewer.localeObj.getConstant('OK'), isPrimary: true }, click: this.onOkClicked.bind(this) }\n                ];\n            }\n            if (this.pdfViewer.enableRtl) {\n                this.propertiesDialog.enableRtl = true;\n            }\n            this.propertiesDialog.appendTo(dialogDiv);\n            if (this.pdfViewer.selectedItems.annotations[0] && this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Line') {\n                // eslint-disable-next-line\n                var fillColor = document.getElementById(this.pdfViewer.element.id + '_properties_fill_color');\n                fillColor.disabled = true;\n            }\n            // eslint-disable-next-line max-len\n            this.startArrowDropDown.content = this.createContent(this.getArrowString(this.pdfViewer.selectedItems.annotations[0].sourceDecoraterShapes)).outerHTML;\n            this.endArrowDropDown.content = this.createContent(this.getArrowString(this.pdfViewer.selectedItems.annotations[0].taregetDecoraterShapes)).outerHTML;\n            this.thicknessBox.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeWidth;\n            this.fillColorPicker.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill;\n            this.refreshColorPicker(this.fillColorPicker);\n            this.strokeColorPicker.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor;\n            this.refreshColorPicker(this.strokeColorPicker);\n            this.updateColorInIcon(this.fillDropDown.element, this.fillColorPicker.value);\n            this.updateColorInIcon(this.strokeDropDown.element, this.strokeColorPicker.value);\n            this.opacitySlider.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.opacity * 100;\n            this.updateOpacityIndicator();\n            // eslint-disable-next-line\n            if (parseInt(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray) >= 3) {\n                this.lineStyleDropDown.content = this.createDropDownContent('dashed').outerHTML;\n            }\n            else if (this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray === '2') {\n                this.lineStyleDropDown.content = this.createDropDownContent('dotted').outerHTML;\n            }\n            else if (this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray === '0') {\n                this.lineStyleDropDown.content = this.createDropDownContent('solid').outerHTML;\n            }\n            this.selectedLineStyle = this.pdfViewer.selectedItems.annotations[0].borderStyle;\n            this.selectedLineDashArray = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray;\n            if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Distance') {\n                this.leaderLengthBox.value = this.pdfViewer.selectedItems.annotations[0].leaderHeight;\n            }\n        }\n        else {\n            var opacityValue = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.opacity * 100;\n            var lineStartElement = this.getArrowString(this.pdfViewer.selectedItems.annotations[0].sourceDecoraterShapes);\n            var lineEndElement = this.getArrowString(this.pdfViewer.selectedItems.annotations[0].taregetDecoraterShapes);\n            var lineStyleElement = void 0;\n            // eslint-disable-next-line\n            if (parseInt(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray) >= 3) {\n                lineStyleElement = 'Dashed';\n            }\n            else if (this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray === '2') {\n                lineStyleElement = 'Dotted';\n            }\n            else if (this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray === '0') {\n                lineStyleElement = 'Solid';\n            }\n            this.pdfViewer._dotnetInstance.invokeMethodAsync('OpenPropertiesDialog', opacityValue, lineStartElement, lineEndElement, lineStyleElement);\n        }\n    };\n    Annotation.prototype.updatePropertiesWindowInBlazor = function () {\n        // eslint-disable-next-line\n        var thicknessElement = document.querySelector('#' + this.pdfViewer.element.id + '_line_thickness');\n        // eslint-disable-next-line\n        var fillColorElement = document.querySelector('#' + this.pdfViewer.element.id + '_properties_fill_color_button');\n        // eslint-disable-next-line\n        var strokeColorElement = document.querySelector('#' + this.pdfViewer.element.id + '_properties_stroke_color_button');\n        // eslint-disable-next-line\n        var leaderLengthElement = document.querySelector('#' + this.pdfViewer.element.id + '_properties_leader_length');\n        thicknessElement.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeWidth;\n        fillColorElement.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill;\n        strokeColorElement.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor;\n        this.onStrokeColorChange(strokeColorElement.value);\n        this.onFillColorChange(fillColorElement.value);\n        if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Distance') {\n            // eslint-disable-next-line\n            leaderLengthElement.value = parseInt(this.pdfViewer.selectedItems.annotations[0].leaderHeight.toString());\n        }\n    };\n    Annotation.prototype.destroyPropertiesWindow = function () {\n        if (this.strokeColorPicker) {\n            this.strokeColorPicker.destroy();\n            this.strokeColorPicker = null;\n        }\n        if (this.fillColorPicker) {\n            this.fillColorPicker.destroy();\n            this.fillColorPicker = null;\n        }\n        if (this.endArrowDropDown) {\n            this.endArrowDropDown.destroy();\n            this.endArrowDropDown = null;\n        }\n        if (this.startArrowDropDown) {\n            this.startArrowDropDown.destroy();\n            this.startArrowDropDown = null;\n        }\n        if (this.opacitySlider) {\n            this.opacitySlider.destroy();\n            this.opacitySlider = null;\n        }\n        if (this.thicknessBox) {\n            this.thicknessBox.destroy();\n            this.thicknessBox = null;\n        }\n        if (this.lineStyleDropDown) {\n            this.lineStyleDropDown.destroy();\n            this.lineStyleDropDown = null;\n        }\n        if (this.leaderLengthBox) {\n            this.leaderLengthBox.destroy();\n            this.leaderLengthBox = null;\n        }\n        if (this.propertiesDialog) {\n            this.propertiesDialog.destroy();\n            this.propertiesDialog = null;\n        }\n        var dialogElement = this.pdfViewerBase.getElement('_properties_window');\n        if (dialogElement) {\n            dialogElement.parentElement.removeChild(dialogElement);\n        }\n    };\n    Annotation.prototype.refreshColorPicker = function (colorPick) {\n        colorPick.setProperties({ 'value': colorPick.value }, true);\n        colorPick.refresh();\n    };\n    Annotation.prototype.createAppearanceTab = function () {\n        var _this = this;\n        var elementID = this.pdfViewer.element.id;\n        // eslint-disable-next-line max-len\n        var items = [{ text: this.pdfViewer.localeObj.getConstant('None') }, { text: this.pdfViewer.localeObj.getConstant('Open Arrow') }, { text: this.pdfViewer.localeObj.getConstant('Closed Arrow') },\n            { text: this.pdfViewer.localeObj.getConstant('Round Arrow') }, { text: this.pdfViewer.localeObj.getConstant('Square Arrow') }, { text: this.pdfViewer.localeObj.getConstant('Diamond Arrow') }];\n        // eslint-disable-next-line max-len\n        var appearanceDiv = createElement('div', { id: elementID + '_properties_appearance' });\n        var lineStyleContainer = createElement('div', { className: 'e-pv-properties-line-style-prop' });\n        appearanceDiv.appendChild(lineStyleContainer);\n        // eslint-disable-next-line max-len\n        var lineHeadStartElement = this.createInputElement(this.pdfViewer.localeObj.getConstant('Start Arrow'), lineStyleContainer, 'text', 'button', true, 'e-pv-properties-line-start', elementID + '_properties_line_start');\n        // eslint-disable-next-line max-len\n        this.startArrowDropDown = new DropDownButton({ items: items, cssClass: 'e-pv-properties-line-start', select: this.onStartArrowHeadStyleSelect.bind(this) }, lineHeadStartElement);\n        var lineHeadEndElement = this.createInputElement(this.pdfViewer.localeObj.getConstant('End Arrow'), lineStyleContainer, 'text', 'button', true, 'e-pv-properties-line-end', elementID + '_properties_line_end');\n        // eslint-disable-next-line max-len\n        var borderStyleContainer = createElement('div', { className: 'e-pv-properties-border-style' });\n        appearanceDiv.appendChild(borderStyleContainer);\n        // eslint-disable-next-line max-len\n        this.endArrowDropDown = new DropDownButton({ items: items, cssClass: 'e-pv-properties-line-end', select: this.onEndArrowHeadStyleSelect.bind(this) }, lineHeadEndElement);\n        var lineStyleElement = this.createInputElement(this.pdfViewer.localeObj.getConstant('Line Style'), borderStyleContainer, 'text', 'button', true, 'e-pv-properties-line-style', elementID + '_properties_line_style');\n        var dropDownTarget = this.createStyleList();\n        // eslint-disable-next-line max-len\n        this.lineStyleDropDown = new DropDownButton({ cssClass: 'e-pv-properties-line-style', target: dropDownTarget }, lineStyleElement);\n        // eslint-disable-next-line max-len\n        var thicknessElement = this.createInputElement(this.pdfViewer.localeObj.getConstant('Line Thickness'), borderStyleContainer, 'text', 'input', true, 'e-pv-properties-line-thickness', elementID + '_properties_thickness');\n        this.thicknessBox = new NumericTextBox({ value: 0, format: '## pt', cssClass: 'e-pv-properties-line-thickness', min: 0, max: 12 }, thicknessElement);\n        var colorStyleContainer = createElement('div', { className: 'e-pv-properties-color-style' });\n        appearanceDiv.appendChild(colorStyleContainer);\n        // eslint-disable-next-line max-len\n        var fillColorElement = this.createInputElement(this.pdfViewer.localeObj.getConstant('Fill Color'), colorStyleContainer, 'color', 'button', true, 'e-pv-properties-line-fill-color', elementID + '_properties_fill_color');\n        this.fillColorPicker = this.createColorPicker(elementID + '_properties_fill_color', true);\n        this.fillColorPicker.change = function (args) {\n            var currentColor = (args.currentValue.hex === '') ? '#ffffff00' : args.currentValue.hex;\n            _this.fillDropDown.toggle();\n            _this.updateColorInIcon(_this.fillDropDown.element, currentColor);\n        };\n        // eslint-disable-next-line max-len\n        this.fillDropDown = this.createDropDownButton(fillColorElement, 'e-pv-properties-fill-color-icon', this.fillColorPicker.element.parentElement);\n        this.fillDropDown.beforeOpen = this.onFillDropDownBeforeOpen.bind(this);\n        this.fillDropDown.open = function () {\n            _this.fillColorPicker.refresh();\n        };\n        // eslint-disable-next-line max-len\n        var strokeColorElement = this.createInputElement(this.pdfViewer.localeObj.getConstant('Line Color'), colorStyleContainer, 'color', 'button', true, 'e-pv-properties-line-stroke-color', elementID + '_properties_stroke_color');\n        this.strokeColorPicker = this.createColorPicker(elementID + '_properties_stroke_color', false);\n        this.strokeColorPicker.change = function (args) {\n            var currentColor = (args.currentValue.hex === '') ? '#ffffff00' : args.currentValue.hex;\n            _this.strokeDropDown.toggle();\n            _this.updateColorInIcon(_this.strokeDropDown.element, currentColor);\n        };\n        // eslint-disable-next-line max-len\n        this.strokeDropDown = this.createDropDownButton(strokeColorElement, 'e-pv-properties-stroke-color-icon', this.strokeColorPicker.element.parentElement);\n        this.strokeDropDown.beforeOpen = this.onStrokeDropDownBeforeOpen.bind(this);\n        this.strokeDropDown.open = function () {\n            _this.strokeColorPicker.refresh();\n        };\n        var opacityContainer = createElement('div', { className: 'e-pv-properties-opacity-style' });\n        appearanceDiv.appendChild(opacityContainer);\n        // eslint-disable-next-line max-len\n        var opacityElement = this.createInputElement(this.pdfViewer.localeObj.getConstant('Opacity'), opacityContainer, '', 'div', true, 'e-pv-properties-line-opacity', elementID + '_properties_opacity');\n        this.opacitySlider = new Slider({\n            type: 'MinRange', max: 100, min: 0, cssClass: 'e-pv-properties-line-opacity', change: function () {\n                _this.updateOpacityIndicator();\n            }\n        }, opacityElement);\n        if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Distance') {\n            // eslint-disable-next-line max-len\n            var lineLengthElement = this.createInputElement(this.pdfViewer.localeObj.getConstant('Leader Length'), opacityContainer, 'text', 'input', true, 'e-pv-properties-line-leader-length', elementID + '_properties_leader_length');\n            this.leaderLengthBox = new NumericTextBox({ value: 0, format: '## pt', cssClass: 'e-pv-properties-line-leader-length', min: 0, max: 100 }, lineLengthElement);\n        }\n        return appearanceDiv;\n    };\n    Annotation.prototype.createContent = function (text) {\n        var divElement = createElement('div', { className: 'e-pv-properties-line-style-content' });\n        divElement.textContent = text;\n        return divElement;\n    };\n    Annotation.prototype.onStrokeDropDownBeforeOpen = function () {\n        if (this.pdfViewer.selectedItems.annotations.length === 1) {\n            this.strokeColorPicker.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor;\n        }\n        this.strokeColorPicker.refresh();\n    };\n    Annotation.prototype.onFillDropDownBeforeOpen = function () {\n        if (this.pdfViewer.selectedItems.annotations.length === 1) {\n            this.fillColorPicker.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor;\n        }\n        this.fillColorPicker.refresh();\n    };\n    Annotation.prototype.createStyleList = function () {\n        var _this = this;\n        var ulElement = createElement('ul');\n        document.body.appendChild(ulElement);\n        var solidLi = this.createListForStyle('solid');\n        solidLi.addEventListener('click', function () {\n            _this.setThickness('0', 'solid');\n        });\n        ulElement.appendChild(solidLi);\n        var dottedLi = this.createListForStyle('dotted');\n        dottedLi.addEventListener('click', function () {\n            _this.setThickness('2', 'dotted');\n        });\n        ulElement.appendChild(dottedLi);\n        var dashedLi = this.createListForStyle('dashed');\n        dashedLi.addEventListener('click', function () {\n            _this.setThickness('3', 'dashed');\n        });\n        ulElement.appendChild(dashedLi);\n        return ulElement;\n    };\n    Annotation.prototype.createColorPicker = function (idString, isNoColor) {\n        var inputElement = createElement('input', { id: idString + '_target' });\n        document.body.appendChild(inputElement);\n        var colorPicker = new ColorPicker({\n            inline: true, mode: 'Palette', enableOpacity: false, value: '#000000', showButtons: false, modeSwitcher: false,\n            noColor: isNoColor\n        });\n        if (this.pdfViewer.enableRtl) {\n            colorPicker.enableRtl = true;\n        }\n        colorPicker.appendTo(inputElement);\n        return colorPicker;\n    };\n    Annotation.prototype.createDropDownButton = function (element, iconClass, target) {\n        // eslint-disable-next-line max-len\n        var dropDownButton = new DropDownButton({ iconCss: iconClass + ' e-pv-icon', target: target });\n        if (this.pdfViewer.enableRtl) {\n            dropDownButton.enableRtl = true;\n        }\n        dropDownButton.appendTo(element);\n        return dropDownButton;\n    };\n    Annotation.prototype.updateColorInIcon = function (element, color) {\n        element.childNodes[0].style.borderBottomColor = color;\n    };\n    /**\n     * @param color\n     * @private\n     */\n    Annotation.prototype.onFillColorChange = function (color) {\n        // eslint-disable-next-line\n        var colorElement = document.querySelector('#' + this.pdfViewer.element.id + '_properties_fill_color_button');\n        if (color !== 'transparent') {\n            colorElement.children[0].style.borderBottomColor = color;\n        }\n    };\n    /**\n     * @param color\n     * @private\n     */\n    Annotation.prototype.onStrokeColorChange = function (color) {\n        // eslint-disable-next-line\n        var colorElement = document.querySelector('#' + this.pdfViewer.element.id + '_properties_stroke_color_button');\n        if (color !== 'transparent') {\n            colorElement.children[0].style.borderBottomColor = color;\n        }\n    };\n    Annotation.prototype.setThickness = function (value, style, isBlazor) {\n        if (!isBlazor) {\n            this.lineStyleDropDown.content = this.createDropDownContent(style).outerHTML;\n        }\n        this.selectedLineDashArray = value;\n        if (value === '0') {\n            this.selectedLineStyle = 'Solid';\n        }\n        else if (value === '2' || value === '3') {\n            this.selectedLineStyle = 'Dashed';\n        }\n    };\n    Annotation.prototype.createDropDownContent = function (style) {\n        var divElement = createElement('div', { className: 'e-pv-line-styles-content-container' });\n        // eslint-disable-next-line max-len\n        var spanElement = createElement('span', { className: 'e-pv-line-styles-content', styles: 'border-bottom-style:' + style });\n        divElement.appendChild(spanElement);\n        return divElement;\n    };\n    Annotation.prototype.createListForStyle = function (style) {\n        var liElement = createElement('li', { className: 'e-menu-item' });\n        var divElement = createElement('div', { className: 'e-pv-line-styles-container' });\n        // eslint-disable-next-line max-len\n        var spanElement = createElement('span', { className: 'e-pv-line-styles-item', styles: 'border-bottom-style:' + style });\n        divElement.appendChild(spanElement);\n        liElement.appendChild(divElement);\n        return liElement;\n    };\n    Annotation.prototype.onStartArrowHeadStyleSelect = function (args) {\n        this.startArrowDropDown.content = this.createContent(args.item.text).outerHTML;\n    };\n    Annotation.prototype.onEndArrowHeadStyleSelect = function (args) {\n        this.endArrowDropDown.content = this.createContent(args.item.text).outerHTML;\n    };\n    // eslint-disable-next-line max-len\n    Annotation.prototype.createInputElement = function (labelText, parentElement, inputType, input, isLabelNeeded, className, idString) {\n        var container = createElement('div', { id: idString + '_container', className: className + '-container' });\n        if (isLabelNeeded) {\n            var label = createElement('div', { id: idString + '_label', className: className + '-label' });\n            label.textContent = labelText;\n            container.appendChild(label);\n        }\n        if (this.pdfViewer.localeObj.getConstant('Opacity') === labelText) {\n            this.opacityIndicator = createElement('span', { className: 'e-pv-properties-opacity-indicator' });\n            container.appendChild(this.opacityIndicator);\n        }\n        var textBoxInput = createElement(input, { id: idString });\n        if (input === 'input') {\n            textBoxInput.type = inputType;\n        }\n        container.appendChild(textBoxInput);\n        parentElement.appendChild(container);\n        return textBoxInput;\n    };\n    Annotation.prototype.updateOpacityIndicator = function () {\n        this.opacityIndicator.textContent = this.opacitySlider.value + '%';\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.onOkClicked = function (opacityValue) {\n        var startArrow;\n        var endArrow;\n        var thickness;\n        var strokeColor;\n        var fillColor;\n        var opacity;\n        if (!isBlazor()) {\n            startArrow = this.getArrowTypeFromDropDown(this.startArrowDropDown.content);\n            endArrow = this.getArrowTypeFromDropDown(this.endArrowDropDown.content);\n            thickness = this.thicknessBox.value;\n            strokeColor = this.strokeColorPicker.getValue(this.strokeColorPicker.value, 'hex');\n            strokeColor = (strokeColor === '') ? '#ffffff00' : strokeColor;\n            fillColor = this.fillColorPicker.getValue(this.fillColorPicker.value, 'hex');\n            // eslint-disable-next-line max-len\n            fillColor = (fillColor === '' || fillColor === '#transp' || this.fillColorPicker.value === '#ffffff00') ? '#ffffff00' : fillColor;\n            opacity = this.opacitySlider.value / 100;\n        }\n        else {\n            // eslint-disable-next-line\n            var lineStartElement = document.querySelector('#' + this.pdfViewer.element.id + '_properties_line_start');\n            // eslint-disable-next-line\n            var lineEndElement = document.querySelector('#' + this.pdfViewer.element.id + '_properties_line_end');\n            // eslint-disable-next-line\n            var thicknessElement = document.querySelector('#' + this.pdfViewer.element.id + '_line_thickness');\n            // eslint-disable-next-line\n            var lineStyleElement = document.querySelector('#' + this.pdfViewer.element.id + '_properties_style');\n            // eslint-disable-next-line\n            var fillColorElement = document.querySelector('#' + this.pdfViewer.element.id + '_properties_fill_color_button');\n            // eslint-disable-next-line\n            var strokeColorElement = document.querySelector('#' + this.pdfViewer.element.id + '_properties_stroke_color_button');\n            // eslint-disable-next-line\n            var opacityElement = document.querySelector('#' + this.pdfViewer.element.id + '_properties_opacity');\n            startArrow = this.getArrowTypeFromDropDown(lineStartElement.value, true);\n            endArrow = this.getArrowTypeFromDropDown(lineEndElement.value, true);\n            // eslint-disable-next-line\n            thickness = parseInt(thicknessElement.value);\n            strokeColor = this.getValue(strokeColorElement.children[0].style.borderBottomColor, 'hex');\n            strokeColor = (strokeColor === '') ? '#ffffff00' : strokeColor;\n            fillColor = this.getValue(fillColorElement.children[0].style.borderBottomColor, 'hex');\n            fillColor = (fillColor === '') ? '#ffffff00' : fillColor;\n            if (opacityValue) {\n                opacity = (opacityValue) / 100;\n            }\n            else {\n                opacity = opacityElement.value / 100;\n            }\n            if (lineStyleElement.value) {\n                if (lineStyleElement.value === 'Solid') {\n                    this.setThickness('0', 'solid', true);\n                }\n                else if (lineStyleElement.value === 'Dotted') {\n                    this.setThickness('2', 'dotted', true);\n                }\n                else if (lineStyleElement.value === 'Dashed') {\n                    this.setThickness('3', 'dashed', true);\n                }\n            }\n        }\n        var currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n        var clonedObject = cloneObject(currentAnnotation);\n        var redoClonedObject = cloneObject(currentAnnotation);\n        var newNode = {};\n        var isColorChanged = false;\n        var isStrokeColorChanged = false;\n        var isThicknessChanged = false;\n        var isOpacityChanged = false;\n        var isLineHeadStartStyleChanged = false;\n        var isLineHeadEndStyleChanged = false;\n        var isBorderDashArrayChanged = false;\n        if (startArrow !== currentAnnotation.sourceDecoraterShapes) {\n            newNode.sourceDecoraterShapes = startArrow;\n            redoClonedObject.lineHeadStart = this.getArrowString(startArrow);\n            isLineHeadStartStyleChanged = true;\n        }\n        if (endArrow !== currentAnnotation.taregetDecoraterShapes) {\n            newNode.taregetDecoraterShapes = endArrow;\n            redoClonedObject.lineHeadEnd = this.getArrowString(endArrow);\n            isLineHeadEndStyleChanged = true;\n        }\n        if (thickness !== currentAnnotation.wrapper.children[0].style.strokeWidth) {\n            newNode.thickness = thickness;\n            redoClonedObject.thickness = thickness;\n            isThicknessChanged = true;\n        }\n        if (strokeColor !== currentAnnotation.wrapper.children[0].style.strokeColor) {\n            newNode.strokeColor = strokeColor;\n            redoClonedObject.strokeColor = strokeColor;\n            isStrokeColorChanged = true;\n        }\n        if (fillColor !== currentAnnotation.wrapper.children[0].style.fill) {\n            newNode.fillColor = fillColor;\n            redoClonedObject.fillColor = fillColor;\n            isColorChanged = true;\n        }\n        if (opacity !== currentAnnotation.wrapper.children[0].style.opacity) {\n            newNode.opacity = opacity;\n            redoClonedObject.opacity = opacity;\n            isOpacityChanged = true;\n        }\n        if (this.selectedLineDashArray !== currentAnnotation.wrapper.children[0].style.strokeDashArray) {\n            newNode.borderDashArray = this.selectedLineDashArray;\n            newNode.borderStyle = this.selectedLineStyle;\n            redoClonedObject.borderDashArray = newNode.borderDashArray;\n            redoClonedObject.borderStyle = newNode.borderStyle;\n            isBorderDashArrayChanged = true;\n        }\n        if (!isBlazor()) {\n            // eslint-disable-next-line max-len\n            if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Distance' && this.leaderLengthBox.value !== this.pdfViewer.selectedItems.annotations[0].leaderHeight) {\n                newNode.leaderHeight = this.leaderLengthBox.value;\n            }\n        }\n        else {\n            // eslint-disable-next-line\n            var leaderLengthElement = document.querySelector('#' + this.pdfViewer.element.id + '_properties_leader_length');\n            // eslint-disable-next-line\n            if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Distance' && parseInt(leaderLengthElement.value) !== this.pdfViewer.selectedItems.annotations[0].leaderHeight) {\n                // eslint-disable-next-line\n                newNode.leaderHeight = parseInt(leaderLengthElement.value);\n            }\n        }\n        this.pdfViewer.nodePropertyChange(this.pdfViewer.selectedItems.annotations[0], newNode);\n        this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill = fillColor;\n        // eslint-disable-next-line max-len\n        this.triggerAnnotationPropChange(this.pdfViewer.selectedItems.annotations[0], isColorChanged, isStrokeColorChanged, isThicknessChanged, isOpacityChanged, isLineHeadStartStyleChanged, isLineHeadEndStyleChanged, isBorderDashArrayChanged);\n        this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0], 'thickness');\n        this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0], 'stroke');\n        this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0], 'fill');\n        this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0], 'opacity');\n        this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0], 'dashArray');\n        this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0], 'startArrow');\n        this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0], 'endArrow');\n        // eslint-disable-next-line max-len\n        if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Distance') {\n            this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0], 'leaderLength');\n        }\n        // eslint-disable-next-line max-len\n        this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Line properties change', '', clonedObject, redoClonedObject);\n        this.renderAnnotations(currentAnnotation.pageIndex, null, null, null);\n        if (!isBlazor()) {\n            this.propertiesDialog.hide();\n        }\n    };\n    Annotation.prototype.onCancelClicked = function () {\n        this.propertiesDialog.hide();\n    };\n    Annotation.prototype.getArrowTypeFromDropDown = function (arrowType, isBlazor) {\n        if (!isBlazor) {\n            arrowType = arrowType.split('</div>')[0].split('\">')[1];\n        }\n        var arrow = 'None';\n        switch (arrowType) {\n            case this.pdfViewer.localeObj.getConstant('None'):\n                arrow = 'None';\n                break;\n            case this.pdfViewer.localeObj.getConstant('Open Arrow'):\n                arrow = 'OpenArrow';\n                break;\n            case this.pdfViewer.localeObj.getConstant('Closed Arrow'):\n                arrow = 'Arrow';\n                break;\n            case this.pdfViewer.localeObj.getConstant('Round Arrow'):\n                arrow = 'Circle';\n                break;\n            case this.pdfViewer.localeObj.getConstant('Square Arrow'):\n                arrow = 'Square';\n                break;\n            case this.pdfViewer.localeObj.getConstant('Diamond Arrow'):\n                arrow = 'Diamond';\n                break;\n            case this.pdfViewer.localeObj.getConstant('Butt'):\n                arrow = 'Butt';\n                break;\n        }\n        return arrow;\n    };\n    /**\n     * @param arrow\n     * @private\n     */\n    Annotation.prototype.getArrowString = function (arrow) {\n        var arrowType = this.pdfViewer.localeObj.getConstant('None');\n        switch (arrow) {\n            case 'Arrow':\n                arrowType = this.pdfViewer.localeObj.getConstant('Closed');\n                break;\n            case 'OpenArrow':\n                arrowType = this.pdfViewer.localeObj.getConstant('Open Arrow');\n                break;\n            case 'Circle':\n                arrowType = this.pdfViewer.localeObj.getConstant('Round');\n                break;\n            case 'None':\n            case 'Square':\n            case 'Diamond':\n                arrowType = this.pdfViewer.localeObj.getConstant(arrow);\n                break;\n            case 'Butt':\n                arrowType = this.pdfViewer.localeObj.getConstant('Butt');\n                break;\n        }\n        return arrowType;\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.onAnnotationMouseUp = function () {\n        if (this.pdfViewer.selectedItems.annotations.length !== 0) {\n            if (this.pdfViewer.toolbar && this.pdfViewer.toolbar.annotationToolbarModule) {\n                this.enableBasedOnType();\n                this.pdfViewer.toolbar.annotationToolbarModule.selectAnnotationDeleteItem(true);\n                if (!Browser.isDevice) {\n                    this.pdfViewer.toolbar.annotationToolbarModule.updateAnnnotationPropertyItems();\n                }\n            }\n            this.pdfViewerBase.disableTextSelectionMode();\n        }\n        else {\n            if (this.pdfViewer.textSelectionModule && !this.pdfViewerBase.isPanMode && !this.pdfViewer.designerMode) {\n                this.pdfViewer.textSelectionModule.enableTextSelectionMode();\n            }\n            // eslint-disable-next-line max-len\n            if (this.pdfViewer.toolbar && this.pdfViewer.toolbar.annotationToolbarModule && (!Browser.isDevice || this.pdfViewer.enableDesktopMode)) {\n                // eslint-disable-next-line max-len\n                var isSkip = this.pdfViewer.toolbar.annotationToolbarModule.inkAnnotationSelected;\n                if (this.pdfViewer.annotation.freeTextAnnotationModule && !this.pdfViewer.annotation.freeTextAnnotationModule.isInuptBoxInFocus && !isSkip) {\n                    this.pdfViewer.toolbar.annotationToolbarModule.enableAnnotationPropertiesTools(false);\n                    this.pdfViewer.toolbar.annotationToolbarModule.enableFreeTextAnnotationPropertiesTools(false);\n                }\n                this.pdfViewer.toolbar.annotationToolbarModule.updateAnnnotationPropertyItems();\n                this.pdfViewer.toolbar.annotationToolbarModule.selectAnnotationDeleteItem(false);\n            }\n        }\n    };\n    /**\n     * @param pdfAnnotationBase\n     * @param event\n     * @param pdfAnnotationBase\n     * @param event\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.onShapesMouseup = function (pdfAnnotationBase, event) {\n        // eslint-disable-next-line max-len\n        pdfAnnotationBase = !isNullOrUndefined(this.pdfViewer.selectedItems.annotations[0]) ? this.pdfViewer.selectedItems.annotations[0] : pdfAnnotationBase;\n        var isToolMoved = false;\n        if (this.pdfViewerBase.prevPosition.x !== this.pdfViewerBase.currentPosition.x || this.pdfViewerBase.prevPosition.y !== this.pdfViewerBase.currentPosition.y) {\n            isToolMoved = true;\n        }\n        if (pdfAnnotationBase) {\n            if (this.textMarkupAnnotationModule && this.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                this.textMarkupAnnotationModule.currentTextMarkupAnnotation = null;\n                this.textMarkupAnnotationModule.selectTextMarkupCurrentPage = null;\n            }\n            // eslint-disable-next-line max-len\n            if ((this.pdfViewerBase.tool instanceof NodeDrawingTool || this.pdfViewerBase.tool instanceof LineTool) && !this.pdfViewerBase.tool.dragging) {\n                // eslint-disable-next-line\n                var setting = {\n                    opacity: pdfAnnotationBase.opacity, fillColor: pdfAnnotationBase.fillColor, strokeColor: pdfAnnotationBase.strokeColor,\n                    thickness: pdfAnnotationBase.thickness, author: pdfAnnotationBase.author, subject: pdfAnnotationBase.subject,\n                    modifiedDate: pdfAnnotationBase.modifiedDate\n                };\n                var index = this.getAnnotationIndex(pdfAnnotationBase.pageIndex, pdfAnnotationBase.id);\n                // eslint-disable-next-line\n                var bounds = { left: pdfAnnotationBase.bounds.x, top: pdfAnnotationBase.bounds.y, width: pdfAnnotationBase.bounds.width, height: pdfAnnotationBase.bounds.height };\n                if (this.pdfViewerBase.tool instanceof LineTool) {\n                    setting.lineHeadStartStyle = this.getArrowString(pdfAnnotationBase.sourceDecoraterShapes);\n                    setting.lineHeadEndStyle = this.getArrowString(pdfAnnotationBase.taregetDecoraterShapes);\n                    setting.borderDashArray = pdfAnnotationBase.borderDashArray;\n                }\n                if (!this.pdfViewerBase.isAnnotationAdded || pdfAnnotationBase.measureType === 'Distance') {\n                    if (pdfAnnotationBase.measureType === '' || isNullOrUndefined(pdfAnnotationBase.measureType)) {\n                        // eslint-disable-next-line max-len\n                        this.shapeAnnotationModule.renderShapeAnnotations(pdfAnnotationBase, this.pdfViewer.annotation.getEventPageNumber(event));\n                    }\n                    else if (pdfAnnotationBase.measureType === 'Distance' || pdfAnnotationBase.measureType === 'Perimeter' ||\n                        pdfAnnotationBase.measureType === 'Radius') {\n                        // eslint-disable-next-line max-len\n                        this.measureAnnotationModule.renderMeasureShapeAnnotations(pdfAnnotationBase, this.pdfViewer.annotation.getEventPageNumber(event));\n                    }\n                }\n                this.pdfViewerBase.updateDocumentEditedProperty(true);\n            }\n            else if (this.pdfViewerBase.tool instanceof MoveTool || this.pdfViewerBase.tool instanceof ResizeTool) {\n                if (isToolMoved) {\n                    this.pdfViewerBase.updateDocumentEditedProperty(true);\n                }\n                if (pdfAnnotationBase.measureType === '' || isNullOrUndefined(pdfAnnotationBase.measureType)) {\n                    if (pdfAnnotationBase.shapeAnnotationType === 'FreeText') {\n                        // eslint-disable-next-line max-len\n                        this.pdfViewer.annotation.freeTextAnnotationModule.modifyInCollection('bounds', this.pdfViewer.annotation.getEventPageNumber(event), pdfAnnotationBase);\n                    }\n                    else if (pdfAnnotationBase.shapeAnnotationType === 'HandWrittenSignature' || pdfAnnotationBase.shapeAnnotationType === 'SignatureImage' || pdfAnnotationBase.shapeAnnotationType === 'SignatureText') {\n                        // eslint-disable-next-line max-len\n                        this.pdfViewerBase.signatureModule.modifySignatureCollection('bounds', this.pdfViewer.annotation.getEventPageNumber(event), pdfAnnotationBase);\n                    }\n                    else if (pdfAnnotationBase.shapeAnnotationType === 'Ink') {\n                        // eslint-disable-next-line max-len\n                        this.inkAnnotationModule.modifySignatureInkCollection('bounds', this.pdfViewer.annotation.getEventPageNumber(event), pdfAnnotationBase);\n                    }\n                    else if (pdfAnnotationBase.shapeAnnotationType === 'Stamp' || pdfAnnotationBase.shapeAnnotationType === 'Image') {\n                        // eslint-disable-next-line max-len\n                        this.stampAnnotationModule.modifyInCollection('bounds', this.pdfViewer.annotation.getEventPageNumber(event), pdfAnnotationBase, isToolMoved);\n                    }\n                    else {\n                        // eslint-disable-next-line max-len\n                        this.pdfViewer.annotation.shapeAnnotationModule.modifyInCollection('bounds', this.pdfViewer.annotation.getEventPageNumber(event), pdfAnnotationBase, isToolMoved);\n                    }\n                    // eslint-disable-next-line max-len\n                }\n                else if (pdfAnnotationBase.measureType === 'Distance' || pdfAnnotationBase.measureType === 'Perimeter' || pdfAnnotationBase.measureType === 'Radius' || pdfAnnotationBase.measureType === 'Area' || pdfAnnotationBase.measureType === 'Volume') {\n                    this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection('bounds', this.pdfViewer.annotation.getEventPageNumber(event), pdfAnnotationBase);\n                }\n                if (this.pdfViewerBase.tool instanceof ResizeTool) {\n                    if (!pdfAnnotationBase.formFieldAnnotationType) {\n                        this.triggerAnnotationResize(pdfAnnotationBase);\n                    }\n                }\n                if (this.pdfViewerBase.tool instanceof MoveTool) {\n                    if (this.pdfViewerBase.action !== 'Select') {\n                        if (!pdfAnnotationBase.formFieldAnnotationType) {\n                            this.triggerAnnotationMove(pdfAnnotationBase);\n                        }\n                    }\n                }\n            }\n            else if (this.pdfViewerBase.tool instanceof ConnectTool) {\n                if (isToolMoved) {\n                    this.pdfViewerBase.updateDocumentEditedProperty(true);\n                }\n                if (pdfAnnotationBase.measureType === '' || isNullOrUndefined(pdfAnnotationBase.measureType)) {\n                    // eslint-disable-next-line max-len\n                    if ((pdfAnnotationBase.shapeAnnotationType === 'Line' || pdfAnnotationBase.shapeAnnotationType === 'LineWidthArrowHead' || pdfAnnotationBase.shapeAnnotationType === 'Polygon')) {\n                        this.pdfViewer.annotation.shapeAnnotationModule.modifyInCollection('bounds', this.pdfViewer.annotation.getEventPageNumber(event), pdfAnnotationBase, isToolMoved);\n                    }\n                    // eslint-disable-next-line max-len\n                }\n                else if (pdfAnnotationBase.measureType === 'Distance' || pdfAnnotationBase.measureType === 'Perimeter' || pdfAnnotationBase.measureType === 'Area' || pdfAnnotationBase.measureType === 'Volume') {\n                    if (pdfAnnotationBase.measureType === 'Distance') {\n                        // eslint-disable-next-line max-len\n                        this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection('leaderLength', this.pdfViewer.annotation.getEventPageNumber(event), pdfAnnotationBase);\n                    }\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection('bounds', this.pdfViewer.annotation.getEventPageNumber(event), pdfAnnotationBase);\n                }\n                this.triggerAnnotationResize(pdfAnnotationBase);\n            }\n            // eslint-disable-next-line max-len\n            if (this.pdfViewerBase.navigationPane && this.pdfViewerBase.navigationPane.annotationMenuObj && this.pdfViewer.isSignatureEditable && (pdfAnnotationBase.shapeAnnotationType === 'HandWrittenSignature' || pdfAnnotationBase.shapeAnnotationType === 'SignatureText' || pdfAnnotationBase.shapeAnnotationType === 'SignatureImage')) {\n                // eslint-disable-next-line max-len\n                this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export Annotations')], true);\n                // eslint-disable-next-line max-len\n                this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export XFDF')], true);\n            }\n            if (this.pdfViewer.toolbarModule) {\n                if (this.pdfViewer.toolbarModule.annotationToolbarModule && this.pdfViewer.enableAnnotationToolbar) {\n                    this.pdfViewer.toolbarModule.annotationToolbarModule.clearTextMarkupMode();\n                    if (pdfAnnotationBase.measureType === '' || isNullOrUndefined(pdfAnnotationBase.measureType)) {\n                        // eslint-disable-next-line max-len\n                        this.pdfViewer.toolbarModule.annotationToolbarModule.clearMeasureMode();\n                    }\n                    else if (pdfAnnotationBase.measureType === 'Distance' || pdfAnnotationBase.measureType === 'Perimeter' || pdfAnnotationBase.measureType === 'Area' || pdfAnnotationBase.measureType === 'Volume' || pdfAnnotationBase.measureType === 'Radius') {\n                        this.pdfViewer.toolbarModule.annotationToolbarModule.clearShapeMode();\n                    }\n                    if (this.pdfViewer.selectedItems.annotations.length === 1 && this.pdfViewer.selectedItems.annotations[0].formFieldAnnotationType === null) {\n                        this.pdfViewer.toolbarModule.annotationToolbarModule.enableAnnotationPropertiesTools(true);\n                    }\n                    if (!isBlazor()) {\n                        if (this.pdfViewer.selectedItems.annotations.length === 1 && !this.pdfViewer.designerMode) {\n                            this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(true);\n                            this.pdfViewer.toolbarModule.annotationToolbarModule.setCurrentColorInPicker();\n                            this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden = true;\n                            // eslint-disable-next-line max-len\n                            if (!this.pdfViewer.formDesignerModule && pdfAnnotationBase.properties.id != '' && pdfAnnotationBase.properties.id != null && pdfAnnotationBase.properties.id.slice(0, 4) != 'sign') {\n                                var id = document.getElementById(pdfAnnotationBase.properties.id);\n                                var isFieldReadOnly = id && id.disabled;\n                                if (!isFieldReadOnly) {\n                                    this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem);\n                                }\n                                else if (this.pdfViewer.annotation && isFieldReadOnly) {\n                                    this.pdfViewer.annotation.clearSelection();\n                                }\n                            }\n                            else {\n                                this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem);\n                            }\n                            if (this.pdfViewer.isAnnotationToolbarVisible && this.pdfViewer.isFormDesignerToolbarVisible) {\n                                var formDesignerMainDiv = document.getElementById(this.pdfViewer.element.id + \"_formdesigner_toolbar\");\n                                formDesignerMainDiv.style.display = \"none\";\n                                if (this.pdfViewer.toolbarModule) {\n                                    this.pdfViewer.toolbarModule.formDesignerToolbarModule.isToolbarHidden = false;\n                                    this.pdfViewer.toolbarModule.formDesignerToolbarModule.showFormDesignerToolbar(this.pdfViewer.toolbarModule.formDesignerItem);\n                                    this.pdfViewer.toolbarModule.annotationToolbarModule.adjustViewer(true);\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @param pdfAnnotationBase\n     * @param isNewlyAdded\n     * @param pdfAnnotationBase\n     * @param isNewlyAdded\n     * @private\n     */\n    Annotation.prototype.updateCalibrateValues = function (pdfAnnotationBase, isNewlyAdded) {\n        if (pdfAnnotationBase.measureType === 'Distance') {\n            pdfAnnotationBase.notes = updateDistanceLabel(pdfAnnotationBase, pdfAnnotationBase.vertexPoints, this.measureAnnotationModule);\n            if (pdfAnnotationBase.enableShapeLabel === true) {\n                pdfAnnotationBase.labelContent = pdfAnnotationBase.notes;\n            }\n            // eslint-disable-next-line max-len\n            this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection('notes', pdfAnnotationBase.pageIndex, pdfAnnotationBase, isNewlyAdded);\n            this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(pdfAnnotationBase.annotName, pdfAnnotationBase.notes);\n            this.renderAnnotations(pdfAnnotationBase.pageIndex, null, null, null, null);\n        }\n        else if (pdfAnnotationBase.measureType === 'Radius') {\n            pdfAnnotationBase.notes = updateRadiusLabel(pdfAnnotationBase, this.measureAnnotationModule);\n            if (pdfAnnotationBase.enableShapeLabel === true) {\n                pdfAnnotationBase.labelContent = pdfAnnotationBase.notes;\n            }\n            // eslint-disable-next-line max-len\n            this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection('notes', pdfAnnotationBase.pageIndex, pdfAnnotationBase, isNewlyAdded);\n            this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(pdfAnnotationBase.annotName, pdfAnnotationBase.notes);\n            this.renderAnnotations(pdfAnnotationBase.pageIndex, null, null, null, null);\n        }\n        else if (pdfAnnotationBase.measureType === 'Perimeter') {\n            pdfAnnotationBase.notes = updatePerimeterLabel(pdfAnnotationBase, pdfAnnotationBase.vertexPoints, this.measureAnnotationModule);\n            if (pdfAnnotationBase.enableShapeLabel === true) {\n                pdfAnnotationBase.labelContent = pdfAnnotationBase.notes;\n            }\n            // eslint-disable-next-line max-len\n            this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection('notes', pdfAnnotationBase.pageIndex, pdfAnnotationBase, isNewlyAdded);\n            this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(pdfAnnotationBase.annotName, pdfAnnotationBase.notes);\n            this.renderAnnotations(pdfAnnotationBase.pageIndex, null, null, null, null);\n        }\n        else if (pdfAnnotationBase.measureType === 'Area') {\n            // eslint-disable-next-line max-len\n            pdfAnnotationBase.notes = this.measureAnnotationModule.calculateArea(pdfAnnotationBase.vertexPoints, pdfAnnotationBase.id, pdfAnnotationBase.pageIndex);\n            if (pdfAnnotationBase.enableShapeLabel === true) {\n                pdfAnnotationBase.labelContent = pdfAnnotationBase.notes;\n                updateCalibrateLabel(pdfAnnotationBase);\n            }\n            // eslint-disable-next-line max-len\n            this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection('notes', pdfAnnotationBase.pageIndex, pdfAnnotationBase, isNewlyAdded);\n            this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(pdfAnnotationBase.annotName, pdfAnnotationBase.notes);\n            this.renderAnnotations(pdfAnnotationBase.pageIndex, null, null, null, null);\n        }\n        else if (pdfAnnotationBase.measureType === 'Volume') {\n            // eslint-disable-next-line max-len\n            pdfAnnotationBase.notes = this.measureAnnotationModule.calculateVolume(pdfAnnotationBase.vertexPoints, pdfAnnotationBase.id, pdfAnnotationBase.pageIndex);\n            if (pdfAnnotationBase.enableShapeLabel === true) {\n                pdfAnnotationBase.labelContent = pdfAnnotationBase.notes;\n                updateCalibrateLabel(pdfAnnotationBase);\n            }\n            // eslint-disable-next-line max-len\n            this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection('notes', pdfAnnotationBase.pageIndex, pdfAnnotationBase, isNewlyAdded);\n            this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(pdfAnnotationBase.annotName, pdfAnnotationBase.notes);\n            this.renderAnnotations(pdfAnnotationBase.pageIndex, null, null, null, null);\n        }\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.onAnnotationMouseDown = function () {\n        if (this.pdfViewer.selectedItems.annotations.length === 1 && this.pdfViewer.selectedItems.annotations[0].formFieldAnnotationType === null) {\n            if (this.pdfViewer.toolbar && this.pdfViewer.toolbar.annotationToolbarModule) {\n                if (!isBlazor() && Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n                    var commentPanel = document.getElementById(this.pdfViewer.element.id + '_commantPanel');\n                    if (commentPanel.style.display === 'none') {\n                        if (this.pdfViewer.enableToolbar && this.pdfViewer.enableAnnotationToolbar && this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                            // eslint-disable-next-line max-len\n                            this.pdfViewer.toolbarModule.annotationToolbarModule.createPropertyTools(\"\");\n                        }\n                        else {\n                            if (this.pdfViewer.enableToolbar && this.pdfViewer.enableAnnotationToolbar) {\n                                // eslint-disable-next-line max-len\n                                this.pdfViewer.toolbarModule.annotationToolbarModule.createAnnotationToolbarForMobile();\n                                this.pdfViewer.toolbarModule.annotationToolbarModule.createPropertyTools(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType);\n                                var editIcon = document.getElementById(this.pdfViewer.element.id + '_annotationIcon');\n                                if (editIcon && !editIcon.parentElement.classList.contains('e-pv-select')) {\n                                    editIcon.parentElement.classList.add('e-pv-select');\n                                }\n                            }\n                        }\n                    }\n                }\n                this.enableBasedOnType();\n                this.pdfViewer.toolbar.annotationToolbarModule.selectAnnotationDeleteItem(true);\n            }\n        }\n    };\n    Annotation.prototype.enableBasedOnType = function () {\n        var isLock = false;\n        // eslint-disable-next-line\n        var annotation = this.pdfViewer.selectedItems.annotations[0];\n        if (annotation && annotation.annotationSettings) {\n            // eslint-disable-next-line\n            isLock = annotation.annotationSettings.isLock;\n            if (isLock && this.checkAllowedInteractions('PropertyChange', annotation)) {\n                isLock = false;\n            }\n        }\n        if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n            if (!isLock) {\n                if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Stamp' ||\n                    this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Image') {\n                    this.pdfViewer.toolbar.annotationToolbarModule.enableStampAnnotationPropertiesTools(true);\n                }\n                else if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'StickyNotes') {\n                    this.pdfViewer.toolbar.annotationToolbarModule.enableStampAnnotationPropertiesTools(true);\n                }\n                else if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Path' ||\n                    this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureImage' ||\n                    this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureText') {\n                    this.pdfViewer.toolbar.annotationToolbarModule.enableAnnotationPropertiesTools(false);\n                }\n                else if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'FreeText') {\n                    this.pdfViewer.toolbar.annotationToolbarModule.enableFreeTextAnnotationPropertiesTools(true);\n                }\n                else if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'HandWrittenSignature') {\n                    this.pdfViewer.toolbar.annotationToolbarModule.enableSignaturePropertiesTools(true);\n                }\n                else if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Ink') {\n                    this.pdfViewer.toolbar.annotationToolbarModule.enableSignaturePropertiesTools(true);\n                }\n                else {\n                    if (this.pdfViewer.selectedItems.annotations.length === 1 && this.pdfViewer.selectedItems.annotations[0].formFieldAnnotationType === null) {\n                        this.pdfViewer.toolbar.annotationToolbarModule.enableAnnotationPropertiesTools(true);\n                    }\n                }\n            }\n            // eslint-disable-next-line max-len\n        }\n        else if (!this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation && !(this.pdfViewer.selectedItems.annotations[0].propName === 'annotations') && (Browser.isDevice && !this.pdfViewer.enableDesktopMode)) {\n            this.pdfViewer.toolbarModule.annotationToolbarModule.createMobileAnnotationToolbar(true, true);\n        }\n    };\n    Annotation.prototype.getProperDate = function (date) {\n        var dateObject = new Date(date.toString());\n        if (isNaN(dateObject.getFullYear())) {\n            var dateString = date.slice(2, 16);\n            // eslint-disable-next-line max-len\n            dateString = dateString.slice(0, 4) + '/' + dateString.slice(4, 6) + '/' + dateString.slice(6, 8) + ' ' + dateString.slice(8, 10) + ':' + dateString.slice(10, 12) + ':' + dateString.slice(12, 14);\n            dateObject = new Date(dateString);\n        }\n        // eslint-disable-next-line max-len\n        return (dateObject.getMonth() + 1) + '/' + dateObject.getDate() + '/' + dateObject.getFullYear() + ' ' + dateObject.getHours() + ':' + dateObject.getMinutes() + ':' + dateObject.getSeconds();\n    };\n    /**\n     * @param pageAnnotations\n     * @param pageNumber\n     * @private\n     */\n    Annotation.prototype.getPageCollection = function (pageAnnotations, pageNumber) {\n        var index = null;\n        for (var i = 0; i < pageAnnotations.length; i++) {\n            if (pageAnnotations[i].pageIndex === pageNumber) {\n                index = i;\n                break;\n            }\n        }\n        return index;\n    };\n    /**\n     * @param annotations\n     * @param id\n     * @param annotations\n     * @param id\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.getAnnotationWithId = function (annotations, id) {\n        // eslint-disable-next-line\n        var annotation;\n        for (var i = 0; i < annotations.length; i++) {\n            if (id === annotations[i].id) {\n                annotation = annotations[i];\n            }\n        }\n        return annotation;\n    };\n    /**\n     * @param event\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.getEventPageNumber = function (event) {\n        var eventTarget = event.target;\n        var eventParentElement = event.target.parentElement;\n        if (eventTarget.classList.contains('e-pv-hyperlink')) {\n            eventTarget = eventParentElement;\n        }\n        else if (eventParentElement && eventParentElement.classList.contains('foreign-object') && eventParentElement.parentElement && eventParentElement.parentElement.parentElement && eventParentElement.parentElement.parentElement.parentElement) {\n            eventTarget = eventParentElement.parentElement.parentElement.parentElement;\n        }\n        else if (eventTarget.classList.contains('e-pdfviewer-formFields')) {\n            eventTarget = eventParentElement;\n        }\n        var pageString;\n        if (eventTarget) {\n            // eslint-disable-next-line\n            pageString = eventTarget.id.split('_text_')[1] || eventTarget.id.split('_textLayer_')[1] || eventTarget.id.split('_annotationCanvas_')[1] || eventTarget.id.split('_pageDiv_')[1];\n        }\n        if (isNaN(pageString)) {\n            event = this.pdfViewerBase.annotationEvent;\n            if (event) {\n                eventTarget = event.target;\n                // eslint-disable-next-line\n                pageString = eventTarget.id.split('_text_')[1] || eventTarget.id.split('_textLayer_')[1] || eventTarget.id.split('_annotationCanvas_')[1] || eventTarget.id.split('_pageDiv_')[1];\n            }\n        }\n        // eslint-disable-next-line\n        return parseInt(pageString);\n    };\n    /**\n     * @param commentsAnnotations\n     * @param parentAnnotation\n     * @param author\n     * @param commentsAnnotations\n     * @param parentAnnotation\n     * @param author\n     * @param commentsAnnotations\n     * @param parentAnnotation\n     * @param author\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.getAnnotationComments = function (commentsAnnotations, parentAnnotation, author) {\n        var newArray = [];\n        var annotationObject = null;\n        if (commentsAnnotations) {\n            if (commentsAnnotations.length > 0) {\n                for (var i = 0; i < commentsAnnotations.length; i++) {\n                    // eslint-disable-next-line\n                    var annotation = commentsAnnotations[i];\n                    annotationObject = {\n                        // eslint-disable-next-line max-len\n                        shapeAnnotationType: 'sticky', author: annotation.Author, modifiedDate: annotation.ModifiedDate, note: annotation.Note, state: annotation.state, stateModel: annotation.stateModel,\n                        comments: [], review: { state: annotation.State, stateModel: annotation.StateModel, modifiedDate: annotation.ModifiedDate, author: annotation.Author },\n                        annotName: annotation.AnnotName, parentId: parentAnnotation.AnnotName, subject: annotation.Subject,\n                        isLock: annotation.IsLock\n                    };\n                    newArray[newArray.length] = annotationObject;\n                }\n            }\n        }\n        return newArray;\n    };\n    Annotation.prototype.getRandomNumber = function () {\n        // eslint-disable-next-line\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n            // eslint-disable-next-line\n            var random = Math.random() * 16 | 0, v = c == 'x' ? random : (random & 0x3 | 0x8);\n            return random.toString(16);\n        });\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.createGUID = function () {\n        // eslint-disable-next-line max-len\n        return this.getRandomNumber();\n    };\n    /**\n     * @param pageDiv\n     * @param pageWidth\n     * @param pageHeight\n     * @param pageNumber\n     * @param displayMode\n     * @param pageDiv\n     * @param pageWidth\n     * @param pageHeight\n     * @param pageNumber\n     * @param displayMode\n     * @private\n     */\n    // eslint-disable-next-line max-len\n    Annotation.prototype.createAnnotationLayer = function (pageDiv, pageWidth, pageHeight, pageNumber, displayMode) {\n        var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n        if (canvas) {\n            this.updateCanvas(canvas, pageWidth, pageHeight, pageNumber);\n            return canvas;\n        }\n        else {\n            // eslint-disable-next-line max-len\n            var annotationCanvas = createElement('canvas', { id: this.pdfViewer.element.id + '_annotationCanvas_' + pageNumber, className: 'e-pv-annotation-canvas' });\n            this.updateCanvas(annotationCanvas, pageWidth, pageHeight, pageNumber);\n            pageDiv.appendChild(annotationCanvas);\n            return annotationCanvas;\n        }\n    };\n    /**\n     * @param width\n     * @param height\n     * @param pageNumber\n     * @private\n     */\n    Annotation.prototype.resizeAnnotations = function (width, height, pageNumber) {\n        var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n        if (canvas) {\n            canvas.style.width = width + 'px';\n            canvas.style.height = height + 'px';\n            this.pdfViewerBase.applyElementStyles(canvas, pageNumber);\n        }\n    };\n    /**\n     * @param pageNumber\n     * @private\n     */\n    Annotation.prototype.clearAnnotationCanvas = function (pageNumber) {\n        var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n        var zoom = this.pdfViewerBase.getZoomFactor();\n        var ratio = this.pdfViewerBase.getZoomRatio(zoom);\n        if (canvas) {\n            var width = this.pdfViewerBase.pageSize[pageNumber].width;\n            var height = this.pdfViewerBase.pageSize[pageNumber].height;\n            canvas.width = width * ratio;\n            canvas.height = height * ratio;\n            canvas.style.width = width * zoom + 'px';\n            canvas.style.height = height * zoom + 'px';\n        }\n    };\n    /**\n     * @param pageNumber\n     * @param shapeAnnotation\n     * @param measureShapeAnnotation\n     * @param textMarkupAnnotation\n     * @param canvas\n     * @param isImportAnnotations\n     * @param pageNumber\n     * @param shapeAnnotation\n     * @param measureShapeAnnotation\n     * @param textMarkupAnnotation\n     * @param canvas\n     * @param isImportAnnotations\n     * @param pageNumber\n     * @param shapeAnnotation\n     * @param measureShapeAnnotation\n     * @param textMarkupAnnotation\n     * @param canvas\n     * @param isImportAnnotations\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.renderAnnotations = function (pageNumber, shapeAnnotation, measureShapeAnnotation, textMarkupAnnotation, canvas, isImportAnnotations, isAnnotOrderAction, freeTextAnnotation) {\n        this.clearAnnotationCanvas(pageNumber);\n        if (this.shapeAnnotationModule) {\n            if (isImportAnnotations) {\n                this.shapeAnnotationModule.renderShapeAnnotations(shapeAnnotation, pageNumber, true);\n            }\n            else {\n                this.shapeAnnotationModule.renderShapeAnnotations(shapeAnnotation, pageNumber, null, isAnnotOrderAction);\n            }\n        }\n        if (this.measureAnnotationModule) {\n            if (isImportAnnotations) {\n                this.measureAnnotationModule.renderMeasureShapeAnnotations(measureShapeAnnotation, pageNumber, true);\n            }\n            else {\n                this.measureAnnotationModule.renderMeasureShapeAnnotations(measureShapeAnnotation, pageNumber, null, isAnnotOrderAction);\n            }\n        }\n        if (this.freeTextAnnotationModule) {\n            if (isImportAnnotations) {\n                this.freeTextAnnotationModule.renderFreeTextAnnotations(freeTextAnnotation, pageNumber, true);\n            }\n            else {\n                this.freeTextAnnotationModule.renderFreeTextAnnotations(freeTextAnnotation, pageNumber, null, isAnnotOrderAction);\n            }\n        }\n        if (canvas !== null && canvas !== undefined) {\n            canvas = canvas;\n        }\n        else {\n            canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n        }\n        this.pdfViewer.drawing.refreshCanvasDiagramLayer(canvas, pageNumber);\n        if (!this.pdfViewerBase.isInkAdded && this.pdfViewer.tool === 'Ink' && this.pdfViewer.currentPageNumber - 1 === pageNumber) {\n            var currentcanvas = document.getElementById(this.pdfViewer.element.id + '_annotationCanvas_' + (this.pdfViewer.currentPageNumber - 1));\n            var zoom = this.pdfViewerBase.getZoomFactor();\n            var ratio = this.pdfViewerBase.getWindowDevicePixelRatio();\n            var context = currentcanvas.getContext('2d');\n            var thickness = this.pdfViewer.inkAnnotationSettings.thickness ? this.pdfViewer.inkAnnotationSettings.thickness : 1;\n            var opacity = this.pdfViewer.inkAnnotationSettings.opacity ? this.pdfViewer.inkAnnotationSettings.opacity : 1;\n            var strokeColor = this.pdfViewer.inkAnnotationSettings.strokeColor ? this.pdfViewer.inkAnnotationSettings.strokeColor : '#ff0000';\n            if (!Browser.isDevice || (Browser.isDevice && zoom <= 0.7)) {\n                context.setTransform(ratio, 0, 0, ratio, 0, 0);\n            }\n            context.beginPath();\n            context.lineJoin = 'round';\n            context.lineCap = 'round';\n            context.lineWidth = thickness * zoom > 1 ? thickness * zoom : thickness;\n            context.strokeStyle = strokeColor;\n            context.globalAlpha = opacity;\n            var collectionData = processPathData(this.pdfViewer.annotationModule.inkAnnotationModule.updateInkDataWithZoom());\n            var csData = splitArrayCollection(collectionData);\n            for (var j = 0; j < csData.length; j++) {\n                var pathValue = csData[j];\n                switch (pathValue.command) {\n                    case 'M':\n                        context.moveTo(pathValue.x, pathValue.y);\n                        break;\n                    case 'L':\n                        context.lineTo(pathValue.x, pathValue.y);\n                        break;\n                    default:\n                        break;\n                }\n            }\n            context.stroke();\n            context.closePath();\n            if (!isNullOrUndefined(this.pdfViewer.toolbarModule) && !isNullOrUndefined(this.pdfViewer.toolbarModule.annotationToolbarModule)) {\n                this.pdfViewer.toolbar.annotationToolbarModule.inkAnnotationSelected = true;\n            }\n        }\n        if (this.textMarkupAnnotationModule) {\n            if (isImportAnnotations) {\n                // eslint-disable-next-line\n                this.textMarkupAnnotationModule.renderTextMarkupAnnotationsInPage(textMarkupAnnotation, pageNumber, true);\n            }\n            else {\n                // eslint-disable-next-line\n                this.textMarkupAnnotationModule.renderTextMarkupAnnotationsInPage(textMarkupAnnotation, pageNumber);\n            }\n        }\n    };\n    /**\n     * @param pageNumber\n     * @param annotation\n     * @param annotationId\n     * @param pageNumber\n     * @param annotation\n     * @param annotationId\n     * @param pageNumber\n     * @param annotation\n     * @param annotationId\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.storeAnnotations = function (pageNumber, annotation, annotationId) {\n        // let annotationId: string = '_annotations_textMarkup';\n        // if (annotation is ITextMarkupAnnotation) {\n        //     annotationId = '_annotations_textMarkup';\n        // } else if (annotation as IShapeAnnotation) {\n        //     annotationId = '_annotations_shape';\n        // } else {\n        //     annotationId = '_annotations_stamp';\n        // }\n        // eslint-disable-next-line\n        var sessionSize = Math.round(JSON.stringify(window.sessionStorage).length / 1024);\n        if (sessionSize > 4500) {\n            this.clearAnnotationStorage();\n            this.pdfViewerBase.isStorageExceed = true;\n            if (!(this.pdfViewerBase.isFormStorageExceed)) {\n                this.pdfViewer.formFieldsModule.clearFormFieldStorage();\n            }\n        }\n        // eslint-disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + annotationId);\n        if (this.pdfViewerBase.isStorageExceed) {\n            storeObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + annotationId];\n        }\n        var index = 0;\n        if (!storeObject) {\n            this.storeAnnotationCollections(annotation, pageNumber);\n            var pageAnnotation = { pageIndex: pageNumber, annotations: [] };\n            pageAnnotation.annotations.push(annotation);\n            index = pageAnnotation.annotations.indexOf(annotation);\n            var annotationCollection = [];\n            annotationCollection.push(pageAnnotation);\n            var annotationStringified = JSON.stringify(annotationCollection);\n            if (this.pdfViewerBase.isStorageExceed) {\n                this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + annotationId] = annotationStringified;\n            }\n            else {\n                window.sessionStorage.setItem(this.pdfViewerBase.documentId + annotationId, annotationStringified);\n            }\n        }\n        else {\n            this.storeAnnotationCollections(annotation, pageNumber);\n            var annotObject_1 = JSON.parse(storeObject);\n            if (!this.pdfViewerBase.isStorageExceed) {\n                window.sessionStorage.removeItem(this.pdfViewerBase.documentId + annotationId);\n            }\n            var pageIndex_1 = this.pdfViewer.annotationModule.getPageCollection(annotObject_1, pageNumber);\n            if (annotObject_1[pageIndex_1]) {\n                annotObject_1[pageIndex_1].annotations.filter(function (item, index) {\n                    if (item.annotName === annotation.annotName) {\n                        annotObject_1[pageIndex_1].annotations.splice(index, 1);\n                    }\n                });\n                annotObject_1[pageIndex_1].annotations.push(annotation);\n                index = annotObject_1[pageIndex_1].annotations.indexOf(annotation);\n            }\n            else {\n                var markupAnnotation = { pageIndex: pageNumber, annotations: [] };\n                markupAnnotation.annotations.push(annotation);\n                index = markupAnnotation.annotations.indexOf(annotation);\n                annotObject_1.push(markupAnnotation);\n            }\n            var annotationStringified = JSON.stringify(annotObject_1);\n            if (this.pdfViewerBase.isStorageExceed) {\n                this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + annotationId] = annotationStringified;\n            }\n            else {\n                window.sessionStorage.setItem(this.pdfViewerBase.documentId + annotationId, annotationStringified);\n            }\n        }\n        return index;\n    };\n    /**\n     * @param type\n     * @private\n     */\n    Annotation.prototype.getArrowType = function (type) {\n        var decoratorShapes = 'None';\n        switch (type) {\n            case 'ClosedArrow':\n            case 'Closed':\n                decoratorShapes = 'Arrow';\n                break;\n            case 'OpenArrow':\n            case 'Open':\n                decoratorShapes = 'OpenArrow';\n                break;\n            case 'Square':\n                decoratorShapes = 'Square';\n                break;\n            case 'Circle':\n            case 'Round':\n                decoratorShapes = 'Circle';\n                break;\n            case 'Diamond':\n                decoratorShapes = 'Diamond';\n                break;\n            case 'Butt':\n                decoratorShapes = 'Butt';\n                break;\n            case 'Slash':\n                // decoratorShapes = 'Slash';\n                break;\n        }\n        return decoratorShapes;\n    };\n    /**\n     * @param arrow\n     * @private\n     */\n    Annotation.prototype.getArrowTypeForCollection = function (arrow) {\n        var arrowType;\n        switch (arrow) {\n            case 'Arrow':\n                arrowType = 'ClosedArrow';\n                break;\n            case 'OpenArrow':\n            case 'Square':\n            case 'Circle':\n            case 'Diamond':\n            case 'None':\n                arrowType = arrow.toString();\n                break;\n            case 'Butt':\n                arrowType = 'Butt';\n                break;\n        }\n        return arrowType;\n    };\n    /**\n     * @param bound\n     * @param pageIndex\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.getBounds = function (bound, pageIndex) {\n        var pageDetails = this.pdfViewerBase.pageSize[pageIndex];\n        if (pageDetails) {\n            if (pageDetails.rotation === 1) {\n                return { left: bound.top, top: pageDetails.width - (bound.left + bound.width), width: bound.height, height: bound.width };\n            }\n            else if (pageDetails.rotation === 2) {\n                // eslint-disable-next-line max-len\n                return { left: pageDetails.width - bound.left - bound.width, top: pageDetails.height - bound.top - bound.height, width: bound.width, height: bound.height };\n            }\n            else if (pageDetails.rotation === 3) {\n                return { left: pageDetails.height - bound.top - bound.height, top: bound.left, width: bound.height, height: bound.width };\n            }\n            else {\n                return bound;\n            }\n        }\n        else {\n            return bound;\n        }\n    };\n    /**\n     * @param bound\n     * @param pageIndex\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.getInkBounds = function (bound, pageIndex) {\n        var pageDetails = this.pdfViewerBase.pageSize[pageIndex];\n        if (pageDetails) {\n            if (pageDetails.rotation === 1) {\n                return { x: bound.y, y: pageDetails.width - (bound.x + bound.width), width: bound.height, height: bound.width };\n            }\n            else if (pageDetails.rotation === 2) {\n                // eslint-disable-next-line max-len\n                return { x: pageDetails.width - bound.x - bound.width, y: pageDetails.height - bound.y - bound.height, width: bound.width, height: bound.height };\n            }\n            else if (pageDetails.rotation === 3) {\n                return { x: pageDetails.height - bound.y - bound.height, y: bound.x, width: bound.height, height: bound.width };\n            }\n            else {\n                return bound;\n            }\n        }\n        else {\n            return bound;\n        }\n    };\n    /**\n     * @param points\n     * @param pageIndex\n     * @param points\n     * @param pageIndex\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.getVertexPoints = function (points, pageIndex) {\n        if (points) {\n            var pageDetails = this.pdfViewerBase.pageSize[pageIndex];\n            if (pageDetails.rotation === 1) {\n                var points1 = [];\n                for (var i = 0; i < points.length; i++) {\n                    var point = { x: points[i].y, y: pageDetails.width - points[i].x };\n                    points1.push(point);\n                }\n                return points1;\n            }\n            else if (pageDetails.rotation === 2) {\n                var points2 = [];\n                for (var i = 0; i < points.length; i++) {\n                    var point = { x: pageDetails.width - points[i].x, y: pageDetails.height - points[i].y };\n                    points2.push(point);\n                }\n                return points2;\n            }\n            else if (pageDetails.rotation === 3) {\n                var points3 = [];\n                for (var i = 0; i < points.length; i++) {\n                    var point = { x: pageDetails.height - points[i].y, y: points[i].x };\n                    points3.push(point);\n                }\n                return points3;\n            }\n            else {\n                return points;\n            }\n        }\n    };\n    /**\n     * @param pageIndex\n     * @param shapeAnnotations\n     * @param idString\n     * @param pageIndex\n     * @param shapeAnnotations\n     * @param idString\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.getStoredAnnotations = function (pageIndex, shapeAnnotations, idString) {\n        // eslint-disable-next-line\n        var annotationCollection;\n        // eslint-disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + idString);\n        if (this.pdfViewerBase.isStorageExceed) {\n            storeObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + idString];\n        }\n        if (storeObject) {\n            var annotObject = JSON.parse(storeObject);\n            var index = this.pdfViewer.annotationModule.getPageCollection(annotObject, pageIndex);\n            if (annotObject[index]) {\n                annotationCollection = annotObject[index].annotations;\n            }\n            else {\n                annotationCollection = null;\n            }\n        }\n        else {\n            annotationCollection = null;\n        }\n        return annotationCollection;\n    };\n    /**\n     * @param pdfAnnotationBase\n     * @param isColor\n     * @param isStroke\n     * @param isThickness\n     * @param isOpacity\n     * @param isLineStart\n     * @param isLineEnd\n     * @param isDashArray\n     * @param isFreeText\n     * @param previousText\n     * @param currentText\n     * @param pdfAnnotationBase\n     * @param isColor\n     * @param isStroke\n     * @param isThickness\n     * @param isOpacity\n     * @param isLineStart\n     * @param isLineEnd\n     * @param isDashArray\n     * @param isFreeText\n     * @param previousText\n     * @param currentText\n     * @param pdfAnnotationBase\n     * @param isColor\n     * @param isStroke\n     * @param isThickness\n     * @param isOpacity\n     * @param isLineStart\n     * @param isLineEnd\n     * @param isDashArray\n     * @param isFreeText\n     * @param previousText\n     * @param currentText\n     * @param pdfAnnotationBase\n     * @param isColor\n     * @param isStroke\n     * @param isThickness\n     * @param isOpacity\n     * @param isLineStart\n     * @param isLineEnd\n     * @param isDashArray\n     * @param isFreeText\n     * @param previousText\n     * @param currentText\n     * @param pdfAnnotationBase\n     * @param isColor\n     * @param isStroke\n     * @param isThickness\n     * @param isOpacity\n     * @param isLineStart\n     * @param isLineEnd\n     * @param isDashArray\n     * @param isFreeText\n     * @param previousText\n     * @param currentText\n     * @param pdfAnnotationBase\n     * @param isColor\n     * @param isStroke\n     * @param isThickness\n     * @param isOpacity\n     * @param isLineStart\n     * @param isLineEnd\n     * @param isDashArray\n     * @param isFreeText\n     * @param previousText\n     * @param currentText\n     * @param pdfAnnotationBase\n     * @param isColor\n     * @param isStroke\n     * @param isThickness\n     * @param isOpacity\n     * @param isLineStart\n     * @param isLineEnd\n     * @param isDashArray\n     * @param isFreeText\n     * @param previousText\n     * @param currentText\n     * @param pdfAnnotationBase\n     * @param isColor\n     * @param isStroke\n     * @param isThickness\n     * @param isOpacity\n     * @param isLineStart\n     * @param isLineEnd\n     * @param isDashArray\n     * @param isFreeText\n     * @param previousText\n     * @param currentText\n     * @param pdfAnnotationBase\n     * @param isColor\n     * @param isStroke\n     * @param isThickness\n     * @param isOpacity\n     * @param isLineStart\n     * @param isLineEnd\n     * @param isDashArray\n     * @param isFreeText\n     * @param previousText\n     * @param currentText\n     * @param pdfAnnotationBase\n     * @param isColor\n     * @param isStroke\n     * @param isThickness\n     * @param isOpacity\n     * @param isLineStart\n     * @param isLineEnd\n     * @param isDashArray\n     * @param isFreeText\n     * @param previousText\n     * @param currentText\n     * @private\n     */\n    // eslint-disable-next-line max-len\n    Annotation.prototype.triggerAnnotationPropChange = function (pdfAnnotationBase, isColor, isStroke, isThickness, isOpacity, isLineStart, isLineEnd, isDashArray, isFreeText, previousText, currentText) {\n        var index = this.getAnnotationIndex(pdfAnnotationBase.pageIndex, pdfAnnotationBase.id);\n        var type = this.getAnnotationType(pdfAnnotationBase.shapeAnnotationType, pdfAnnotationBase.measureType);\n        // eslint-disable-next-line max-len\n        var eventArgs = { name: 'annotationPropertiesChange', pageIndex: pdfAnnotationBase.pageIndex, annotationId: pdfAnnotationBase.annotName, annotationType: type, isColorChanged: isColor, isOpacityChanged: isOpacity, isThicknessChanged: isThickness, isStrokeColorChanged: isStroke };\n        if (isFreeText) {\n            eventArgs.isFreeTextChanged = isFreeText;\n            eventArgs.previousText = previousText;\n            eventArgs.currentText = currentText;\n        }\n        if (isLineStart) {\n            eventArgs.isLineHeadStartStyleChanged = isLineStart;\n        }\n        if (isLineEnd) {\n            eventArgs.isLineHeadEndStyleChanged = isLineEnd;\n        }\n        if (isDashArray) {\n            eventArgs.isBorderDashArrayChanged = isDashArray;\n        }\n        this.pdfViewer.trigger('annotationPropertiesChange', eventArgs);\n    };\n    /**\n     * @param pdfAnnotationBase\n     * @private\n     */\n    Annotation.prototype.triggerAnnotationAdd = function (pdfAnnotationBase) {\n        // eslint-disable-next-line\n        var setting = {\n            opacity: pdfAnnotationBase.opacity, fillColor: pdfAnnotationBase.fillColor, strokeColor: pdfAnnotationBase.strokeColor,\n            thickness: pdfAnnotationBase.thickness, author: pdfAnnotationBase.author, subject: pdfAnnotationBase.subject,\n            modifiedDate: pdfAnnotationBase.modifiedDate\n        };\n        // eslint-disable-next-line\n        var bounds = { left: pdfAnnotationBase.wrapper.bounds.x, top: pdfAnnotationBase.wrapper.bounds.y, width: pdfAnnotationBase.wrapper.bounds.width, height: pdfAnnotationBase.wrapper.bounds.height };\n        var type = this.getAnnotationType(pdfAnnotationBase.shapeAnnotationType, pdfAnnotationBase.measureType);\n        if (type === 'Line' || type === 'Arrow' || type === 'Distance' || type === 'Perimeter') {\n            setting.lineHeadStartStyle = this.getArrowString(pdfAnnotationBase.sourceDecoraterShapes);\n            setting.lineHeadEndStyle = this.getArrowString(pdfAnnotationBase.taregetDecoraterShapes);\n            setting.borderDashArray = pdfAnnotationBase.borderDashArray;\n        }\n        var labelSettings;\n        if (this.pdfViewer.enableShapeLabel) {\n            labelSettings = {\n                // eslint-disable-next-line max-len\n                fontColor: pdfAnnotationBase.fontColor, fontSize: pdfAnnotationBase.fontSize, fontFamily: pdfAnnotationBase.fontFamily,\n                opacity: pdfAnnotationBase.labelOpacity, labelContent: pdfAnnotationBase.labelContent, fillColor: pdfAnnotationBase.labelFillColor\n            };\n            // eslint-disable-next-line max-len\n            this.pdfViewer.fireAnnotationAdd(pdfAnnotationBase.pageIndex, pdfAnnotationBase.annotName, type, bounds, setting, null, null, null, labelSettings);\n        }\n        else {\n            // eslint-disable-next-line max-len\n            this.pdfViewer.fireAnnotationAdd(pdfAnnotationBase.pageIndex, pdfAnnotationBase.annotName, type, bounds, setting);\n        }\n    };\n    /**\n     * @param pdfAnnotationBase\n     * @private\n     */\n    Annotation.prototype.triggerAnnotationResize = function (pdfAnnotationBase) {\n        // eslint-disable-next-line\n        var setting = {\n            opacity: pdfAnnotationBase.opacity, fillColor: pdfAnnotationBase.fillColor, strokeColor: pdfAnnotationBase.strokeColor,\n            thickness: pdfAnnotationBase.thickness, author: pdfAnnotationBase.author, subject: pdfAnnotationBase.subject,\n            modifiedDate: pdfAnnotationBase.modifiedDate\n        };\n        var index = this.getAnnotationIndex(pdfAnnotationBase.pageIndex, pdfAnnotationBase.id);\n        // eslint-disable-next-line\n        var annotationBounds = pdfAnnotationBase.bounds;\n        var currentPosition = { left: annotationBounds.x, top: annotationBounds.y, x: annotationBounds.x, y: annotationBounds.y, width: annotationBounds.width, height: annotationBounds.height };\n        // eslint-disable-next-line max-len\n        var previousPosition = { left: annotationBounds.oldProperties.x, top: annotationBounds.oldProperties.y, width: annotationBounds.oldProperties.width, height: annotationBounds.oldProperties.height };\n        var type = this.getAnnotationType(pdfAnnotationBase.shapeAnnotationType, pdfAnnotationBase.measureType);\n        if (type === 'Line' || type === 'Arrow' || type === 'Distance' || type === 'Perimeter') {\n            setting.lineHeadStartStyle = this.getArrowString(pdfAnnotationBase.sourceDecoraterShapes);\n            setting.lineHeadEndStyle = this.getArrowString(pdfAnnotationBase.taregetDecoraterShapes);\n            setting.borderDashArray = pdfAnnotationBase.borderDashArray;\n        }\n        var labelSettings;\n        if (this.pdfViewer.enableShapeLabel && (pdfAnnotationBase.shapeAnnotationType !== 'HandWrittenSignature')) {\n            labelSettings = {\n                // eslint-disable-next-line max-len\n                fontColor: pdfAnnotationBase.fontColor, fontSize: pdfAnnotationBase.fontSize, fontFamily: pdfAnnotationBase.fontFamily,\n                opacity: pdfAnnotationBase.labelOpacity, labelContent: pdfAnnotationBase.labelContent, fillColor: pdfAnnotationBase.labelFillColor, notes: pdfAnnotationBase.notes\n            };\n            // eslint-disable-next-line max-len\n            this.pdfViewer.fireAnnotationResize(pdfAnnotationBase.pageIndex, pdfAnnotationBase.annotName, type, currentPosition, setting, null, null, null, labelSettings);\n        }\n        else {\n            if (pdfAnnotationBase.shapeAnnotationType === 'HandWrittenSignature' || pdfAnnotationBase.shapeAnnotationType === 'SignatureText' || pdfAnnotationBase.shapeAnnotationType === 'SignatureImage') {\n                // eslint-disable-next-line max-len\n                this.pdfViewer.fireSignatureResize(pdfAnnotationBase.pageIndex, pdfAnnotationBase.signatureName, pdfAnnotationBase.shapeAnnotationType, pdfAnnotationBase.opacity, pdfAnnotationBase.strokeColor, pdfAnnotationBase.thickness, currentPosition, previousPosition);\n            }\n            else {\n                // eslint-disable-next-line max-len\n                this.pdfViewer.fireAnnotationResize(pdfAnnotationBase.pageIndex, pdfAnnotationBase.annotName, type, currentPosition, setting);\n            }\n        }\n    };\n    /**\n     * @param pdfAnnotationBase\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.triggerAnnotationMove = function (pdfAnnotationBase, isMoving) {\n        // eslint-disable-next-line\n        var setting = {\n            opacity: pdfAnnotationBase.opacity, fillColor: pdfAnnotationBase.fillColor, strokeColor: pdfAnnotationBase.strokeColor,\n            thickness: pdfAnnotationBase.thickness, author: pdfAnnotationBase.author, subject: pdfAnnotationBase.subject,\n            modifiedDate: pdfAnnotationBase.modifiedDate\n        };\n        // eslint-disable-next-line\n        var annotationBounds = pdfAnnotationBase.bounds;\n        var currentPosition = { left: annotationBounds.x, top: annotationBounds.y, x: annotationBounds.x, y: annotationBounds.y, width: annotationBounds.width, height: annotationBounds.height };\n        // eslint-disable-next-line max-len\n        var previousPosition = { left: annotationBounds.oldProperties.x ? annotationBounds.oldProperties.x : annotationBounds.x, top: annotationBounds.oldProperties.y ? annotationBounds.oldProperties.y : annotationBounds.y, width: annotationBounds.width, height: annotationBounds.height };\n        var type = this.getAnnotationType(pdfAnnotationBase.shapeAnnotationType, pdfAnnotationBase.measureType);\n        if (type === 'Line' || type === 'Arrow' || type === 'Distance' || type === 'Perimeter') {\n            setting.lineHeadStartStyle = this.getArrowString(pdfAnnotationBase.sourceDecoraterShapes);\n            setting.lineHeadEndStyle = this.getArrowString(pdfAnnotationBase.taregetDecoraterShapes);\n            setting.borderDashArray = pdfAnnotationBase.borderDashArray;\n        }\n        if (pdfAnnotationBase.shapeAnnotationType === 'HandWrittenSignature' || pdfAnnotationBase.shapeAnnotationType === 'SignatureText' || pdfAnnotationBase.shapeAnnotationType === 'SignatureImage') {\n            // eslint-disable-next-line max-len\n            this.pdfViewer.fireSignatureMove(pdfAnnotationBase.pageIndex, pdfAnnotationBase.signatureName, pdfAnnotationBase.shapeAnnotationType, pdfAnnotationBase.opacity, pdfAnnotationBase.strokeColor, pdfAnnotationBase.thickness, previousPosition, currentPosition);\n        }\n        else {\n            // eslint-disable-next-line max-len\n            isMoving ? this.pdfViewer.fireAnnotationMoving(pdfAnnotationBase.pageIndex, pdfAnnotationBase.annotName, type, setting, previousPosition, currentPosition) : this.pdfViewer.fireAnnotationMove(pdfAnnotationBase.pageIndex, pdfAnnotationBase.annotName, type, setting, previousPosition, currentPosition);\n        }\n    };\n    /**\n     * @param annotationId\n     * @param pageNumber\n     * @param annotation\n     * @param annotationCollection\n     * @param isDblClick\n     * @param isSelected\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.annotationSelect = function (annotationId, pageNumber, annotation, annotationCollection, isDblClick, isSelected) {\n        // eslint-disable-next-line\n        var annotSettings;\n        if (annotation.shapeAnnotationType === 'textMarkup') {\n            // eslint-disable-next-line max-len\n            annotSettings = { type: 'TextMarkup', subType: annotation.subject, opacity: annotation.opacity, color: annotation.color, textMarkupContent: annotation.textMarkupContent, textMarkupStartIndex: annotation.textMarkupStartIndex, textMarkupEndIndex: annotation.textMarkupEndIndex, customData: annotation.customData };\n        }\n        else if (annotation.shapeAnnotationType === 'StickyNotes') {\n            annotSettings = { type: 'StickyNotes', opacity: annotation.opacity, customData: annotation.customData };\n        }\n        else if (annotation.shapeAnnotationType === 'Stamp' || annotation.shapeAnnotationType === 'Image') {\n            annotSettings = { type: 'Stamp', opacity: annotation.opacity, customData: annotation.customData };\n        }\n        else if (annotation.shapeAnnotationType === 'Ink') {\n            annotSettings = {\n                // eslint-disable-next-line max-len\n                type: 'Ink', opacity: annotation.opacity, strokeColor: annotation.strokeColor, thickness: annotation.thickness, modifiedDate: annotation.modifiedDate,\n                width: annotation.bounds.width, height: annotation.bounds.height, left: annotation.bounds.x, top: annotation.bounds.y, data: annotation.data, customData: annotation.customData\n            };\n        }\n        else if (annotation.shapeAnnotationType === 'FreeText') {\n            annotSettings = {\n                type: 'FreeText', opacity: annotation.opacity, fillColor: annotation.fillColor,\n                // eslint-disable-next-line max-len\n                strokeColor: annotation.strokeColor, thickness: annotation.thickness, content: annotation.dynamicText,\n                // eslint-disable-next-line max-len\n                fontFamily: annotation.fontFamily, fontSize: annotation.fontSize, fontColor: annotation.fontColor, textAlign: annotation.textAlign, fontStyle: this.updateFreeTextFontStyle(annotation.font), customData: annotation.customData\n            };\n        }\n        else if (annotation.measureType === '') {\n            if (annotation.shapeAnnotationType === 'Line') {\n                // eslint-disable-next-line max-len\n                annotSettings = { type: 'Shape', subType: 'Line', opacity: annotation.opacity, fillColor: annotation.fillColor, strokeColor: annotation.strokeColor, thickness: annotation.thickness, borderDashArray: annotation.borderDashArray, lineHeadStartStyle: annotation.sourceDecoraterShapes, lineHeadEndStyle: annotation.taregetDecoraterShapes, customData: annotation.customData };\n            }\n            else if (annotation.shapeAnnotationType === 'Arrow' || annotation.shapeAnnotationType === 'LineWidthArrowHead') {\n                // eslint-disable-next-line max-len\n                annotSettings = { type: 'Shape', subType: 'Arrow', opacity: annotation.opacity, fillColor: annotation.fillColor, strokeColor: annotation.strokeColor, thickness: annotation.thickness, borderDashArray: annotation.borderDashArray, lineHeadStartStyle: annotation.sourceDecoraterShapes, lineHeadEndStyle: annotation.taregetDecoraterShapes, customData: annotation.customData };\n            }\n            else if (annotation.shapeAnnotationType === 'Rectangle') {\n                annotSettings = {\n                    type: 'Shape', subType: 'Rectangle', opacity: annotation.opacity, fillColor: annotation.fillColor,\n                    strokeColor: annotation.strokeColor, thickness: annotation.thickness, customData: annotation.customData\n                };\n            }\n            else if (annotation.shapeAnnotationType === 'Circle' || annotation.shapeAnnotationType === 'Ellipse') {\n                annotSettings = {\n                    type: 'Shape', subType: 'Circle', opacity: annotation.opacity, fillColor: annotation.fillColor,\n                    strokeColor: annotation.strokeColor, thickness: annotation.thickness, customData: annotation.customData\n                };\n            }\n            else if (annotation.shapeAnnotationType === 'Polygon') {\n                annotSettings = {\n                    type: 'Shape', subType: 'Polygon', opacity: annotation.opacity, fillColor: annotation.fillColor,\n                    strokeColor: annotation.strokeColor, thickness: annotation.thickness, customData: annotation.customData\n                };\n            }\n        }\n        else if (annotation.measureType !== '') {\n            if (annotation.measureType === 'Distance') {\n                // eslint-disable-next-line max-len\n                annotSettings = { type: 'Measure', subType: 'Distance', opacity: annotation.opacity, fillColor: annotation.fillColor, strokeColor: annotation.strokeColor, thickness: annotation.thickness, borderDashArray: annotation.borderDashArray, lineHeadStartStyle: annotation.sourceDecoraterShapes, lineHeadEndStyle: annotation.taregetDecoraterShapes, customData: annotation.customData };\n            }\n            else if (annotation.measureType === 'Perimeter') {\n                // eslint-disable-next-line max-len\n                annotSettings = { type: 'Measure', subType: 'Perimeter', opacity: annotation.opacity, fillColor: annotation.fillColor, strokeColor: annotation.strokeColor, thickness: annotation.thickness, borderDashArray: annotation.borderDashArray, lineHeadStartStyle: annotation.sourceDecoraterShapes, lineHeadEndStyle: annotation.taregetDecoraterShapes, customData: annotation.customData };\n            }\n            else if (annotation.measureType === 'Area') {\n                annotSettings = {\n                    type: 'Measure', subType: 'Area', opacity: annotation.opacity, fillColor: annotation.fillColor,\n                    strokeColor: annotation.strokeColor, thickness: annotation.thickness, customData: annotation.customData\n                };\n            }\n            else if (annotation.measureType === 'Radius') {\n                annotSettings = {\n                    type: 'Measure', subType: 'Radius', opacity: annotation.opacity, fillColor: annotation.fillColor,\n                    strokeColor: annotation.strokeColor, thickness: annotation.thickness, customData: annotation.customData\n                };\n            }\n            else if (annotation.measureType === 'Volume') {\n                annotSettings = {\n                    type: 'Measure', subType: 'Volume', opacity: annotation.opacity, fillColor: annotation.fillColor,\n                    strokeColor: annotation.strokeColor, thickness: annotation.thickness, calibrate: annotation.calibrate,\n                    annotationId: annotation.annotName, customData: annotation.customData\n                };\n            }\n        }\n        // eslint-disable-next-line\n        var overlappedCollection = [];\n        // eslint-disable-next-line\n        var overlappedAnnotations = this.getOverlappedAnnotations(annotation, pageNumber);\n        if (overlappedAnnotations && this.overlappedCollections) {\n            // eslint-disable-next-line\n            var overlappedCollections = [];\n            // eslint-disable-next-line\n            for (var i = 0; i < overlappedAnnotations.length; i++) {\n                if (overlappedAnnotations[i].shapeAnnotationType !== 'textMarkup' && this.overlappedCollections || isSelected) {\n                    for (var j = 0; j < this.overlappedCollections.length; j++) {\n                        if (overlappedAnnotations[i].annotName === this.overlappedCollections[j].annotName) {\n                            overlappedCollections.push(overlappedAnnotations[i]);\n                            break;\n                        }\n                    }\n                }\n                else {\n                    overlappedCollections.push(overlappedAnnotations[i]);\n                }\n            }\n            overlappedAnnotations = overlappedCollections;\n        }\n        if (this.pdfViewer.enableMultiLineOverlap) {\n            // eslint-disable-next-line\n            for (var i = 0; i < overlappedAnnotations.length; i++) {\n                if (overlappedAnnotations[i].shapeAnnotationType === 'textMarkup') {\n                    var isOverlapped = false;\n                    for (var j = 0; j < overlappedAnnotations[i].bounds.length; j++) {\n                        // eslint-disable-next-line\n                        var bounds = this.orderTextMarkupBounds(overlappedAnnotations[i].bounds[j]);\n                        // eslint-disable-next-line\n                        var clickedPosition = this.textMarkupAnnotationModule.annotationClickPosition;\n                        if (clickedPosition && (clickedPosition.x || clickedPosition.y)) {\n                            if (bounds.left <= clickedPosition.x && (bounds.left + bounds.width) >= clickedPosition.x) {\n                                if (bounds.top <= clickedPosition.y && (bounds.top + bounds.height) >= clickedPosition.y) {\n                                    isOverlapped = true;\n                                }\n                            }\n                        }\n                        else {\n                            isOverlapped = true;\n                        }\n                    }\n                    if (!isOverlapped) {\n                        overlappedAnnotations.splice(i, 1);\n                    }\n                }\n            }\n        }\n        if (overlappedAnnotations && overlappedAnnotations.length > 0) {\n            annotationCollection = overlappedAnnotations;\n            // eslint-disable-next-line\n            for (var i = 0; i < annotationCollection.length; i++) {\n                // eslint-disable-next-line\n                var overlappedObject = cloneObject(annotationCollection[i]);\n                overlappedObject.annotationId = annotationCollection[i].annotName;\n                if (annotationId === annotationCollection[i].annotName && annotation.measureType && annotation.measureType === 'Volume') {\n                    annotSettings.calibrate = annotationCollection[i].calibrate;\n                }\n                delete overlappedObject.annotName;\n                overlappedCollection.push(overlappedObject);\n            }\n        }\n        else {\n            overlappedCollection = null;\n        }\n        this.addFreeTextProperties(annotation, annotSettings);\n        var annotationAddMode = annotation.annotationAddMode;\n        if (!isDblClick) {\n            if (annotation.shapeAnnotationType === 'Stamp' || annotation.shapeAnnotationType === 'Image') {\n                if (!this.pdfViewerBase.isNewStamp && this.annotationSelected) {\n                    if (overlappedCollection) {\n                        // eslint-disable-next-line max-len\n                        this.pdfViewer.fireAnnotationSelect(annotationId, pageNumber, annotSettings, overlappedCollection, null, null, annotationAddMode);\n                    }\n                    else {\n                        this.pdfViewer.fireAnnotationSelect(annotationId, pageNumber, annotSettings, null, null, null, annotationAddMode);\n                    }\n                }\n            }\n            else {\n                var module = this.textMarkupAnnotationModule;\n                var multiPageCollection = module && module.multiPageCollectionList(annotation);\n                if (multiPageCollection && multiPageCollection.length === 0) {\n                    multiPageCollection = null;\n                }\n                if (this.annotationSelected) {\n                    if (overlappedCollection) {\n                        isSelected = false;\n                        // eslint-disable-next-line max-len\n                        this.pdfViewer.fireAnnotationSelect(annotationId, pageNumber, annotSettings, overlappedCollection, multiPageCollection, isSelected, annotationAddMode);\n                    }\n                    else {\n                        isSelected = true;\n                        // eslint-disable-next-line max-len\n                        this.pdfViewer.fireAnnotationSelect(annotationId, pageNumber, annotSettings, null, multiPageCollection, isSelected, annotationAddMode);\n                    }\n                }\n            }\n        }\n        else {\n            if (annotation.shapeAnnotationType === 'Stamp' || annotation.shapeAnnotationType === 'Image') {\n                if (!this.pdfViewerBase.isNewStamp) {\n                    this.pdfViewer.fireAnnotationDoubleClick(annotationId, pageNumber, annotSettings);\n                }\n            }\n            else {\n                this.pdfViewer.fireAnnotationDoubleClick(annotationId, pageNumber, annotSettings);\n            }\n        }\n        this.annotationSelected = true;\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.selectSignature = function (signatureId, pageNumber, signatureModule) {\n        // eslint-disable-next-line\n        var annotBounds = signatureModule.bounds;\n        // eslint-disable-next-line\n        var bounds = { height: annotBounds.height, width: annotBounds.width, x: annotBounds.x, y: annotBounds.y };\n        if (!this.pdfViewerBase.signatureAdded) {\n            // eslint-disable-next-line max-len\n            var signature = { bounds: bounds, opacity: signatureModule.opacity, thickness: signatureModule.thickness, strokeColor: signatureModule.strokeColor };\n            this.pdfViewer.fireSignatureSelect(signatureId, pageNumber, signature);\n        }\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.editSignature = function (signature) {\n        // eslint-disable-next-line\n        var currentAnnotation;\n        if (signature.uniqueKey) {\n            // eslint-disable-next-line\n            currentAnnotation = this.pdfViewer.nameTable[signature.uniqueKey];\n        }\n        else {\n            currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n        }\n        var pageNumber = currentAnnotation.pageIndex;\n        if (currentAnnotation.shapeAnnotationType === 'HandWrittenSignature' || currentAnnotation.shapeAnnotationType === 'SignatureText' || currentAnnotation.shapeAnnotationType === 'SignatureImage') {\n            // eslint-disable-next-line\n            var clonedObject = cloneObject(currentAnnotation);\n            // eslint-disable-next-line\n            var redoClonedObject = cloneObject(currentAnnotation);\n            if (!(isNullOrUndefined(signature.opacity)) || currentAnnotation.opacity !== signature.opacity) {\n                redoClonedObject.opacity = signature.opacity;\n                this.pdfViewer.nodePropertyChange(currentAnnotation, { opacity: signature.opacity });\n                // eslint-disable-next-line max-len\n                this.pdfViewer.fireSignaturePropertiesChange(currentAnnotation.pageIndex, currentAnnotation.signatureName, currentAnnotation.shapeAnnotationType, false, true, false, clonedObject.opacity, redoClonedObject.opacity);\n                // eslint-disable-next-line max-len\n                this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Shape Opacity', '', clonedObject, redoClonedObject);\n            }\n            if (currentAnnotation.strokeColor !== signature.strokeColor) {\n                redoClonedObject.strokeColor = signature.strokeColor;\n                this.pdfViewer.nodePropertyChange(currentAnnotation, { strokeColor: signature.strokeColor });\n                // eslint-disable-next-line max-len\n                this.pdfViewer.fireSignaturePropertiesChange(currentAnnotation.pageIndex, currentAnnotation.signatureName, currentAnnotation.shapeAnnotationType, true, false, false, clonedObject.strokeColor, redoClonedObject.strokeColor);\n                // eslint-disable-next-line max-len\n                this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Shape Stroke', '', clonedObject, redoClonedObject);\n            }\n            if (currentAnnotation.thickness !== signature.thickness) {\n                redoClonedObject.thickness = signature.thickness;\n                this.pdfViewer.nodePropertyChange(currentAnnotation, { thickness: signature.thickness });\n                // eslint-disable-next-line max-len\n                this.pdfViewer.fireSignaturePropertiesChange(currentAnnotation.pageIndex, currentAnnotation.signatureName, currentAnnotation.shapeAnnotationType, false, false, true, clonedObject.thickness, redoClonedObject.thickness);\n                // eslint-disable-next-line max-len\n                this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Shape Thickness', '', clonedObject, redoClonedObject);\n            }\n            currentAnnotation.modifiedDate = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n            this.pdfViewer.renderDrawing();\n            this.pdfViewerBase.signatureModule.modifySignatureCollection(null, pageNumber, currentAnnotation, true);\n        }\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.deletComment = function (commentDiv) {\n        if (commentDiv.parentElement.firstChild === commentDiv) {\n            this.deleteAnnotation();\n        }\n        else {\n            this.pdfViewer.annotationModule.stickyNotesAnnotationModule.modifyCommentDeleteProperty(commentDiv.parentElement, commentDiv);\n        }\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.addReplyComments = function (currentAnnotation, replyComment, commentType) {\n        if (commentType === 'add') {\n            // eslint-disable-next-line\n            var commentsMainDiv = document.getElementById(currentAnnotation.annotName);\n            this.pdfViewer.annotationModule.stickyNotesAnnotationModule.createCommentDiv(commentsMainDiv);\n            for (var j = 0; j < replyComment.length; j++) {\n                this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveCommentDiv(commentsMainDiv, replyComment[j]);\n            }\n        }\n        else if (commentType === 'next') {\n            // eslint-disable-next-line\n            var commentsMainDiv = document.getElementById(currentAnnotation.annotationId);\n            this.selectAnnotation(currentAnnotation);\n            this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveCommentDiv(commentsMainDiv, replyComment);\n        }\n    };\n    Annotation.prototype.editComments = function (commentId, editComment) {\n        // eslint-disable-next-line\n        var commentDiv = document.getElementById(commentId);\n        commentDiv.childNodes[1].ej2_instances[0].value = editComment;\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.editAnnotation = function (annotation) {\n        // eslint-disable-next-line\n        var currentAnnotation;\n        var annotationId;\n        var annotationType;\n        var pageNumber;\n        var isTextMarkupUpdate = false;\n        var textMarkupAnnotation = this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;\n        if ((textMarkupAnnotation && (!annotation.annotationId || !annotation.uniqueKey) && (annotation.annotationId == textMarkupAnnotation.annotName))) {\n            currentAnnotation = this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;\n            annotationId = currentAnnotation.annotName;\n            pageNumber = this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage;\n        }\n        else {\n            if (this.pdfViewer.selectedItems.annotations[0]) {\n                currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n                annotationId = currentAnnotation.annotName;\n                pageNumber = currentAnnotation.pageIndex;\n            }\n        }\n        if (annotation.uniqueKey !== undefined) {\n            // eslint-disable-next-line\n            currentAnnotation = this.pdfViewer.nameTable[annotation.uniqueKey];\n            currentAnnotation.annotationSettings.isLock = annotation.annotationSettings.isLock;\n            annotationId = currentAnnotation.annotName;\n            pageNumber = currentAnnotation.pageIndex;\n            if (isBlazor()) {\n                if (annotation.allowedInteractions) {\n                    var allowedInteractionsCount = annotation.allowedInteractions.length;\n                    for (var i = 0; i < allowedInteractionsCount; i++) {\n                        if (annotation.allowedInteractions[i] === 0) {\n                            annotation.allowedInteractions[i] = AllowedInteraction.Select;\n                        }\n                        if (annotation.allowedInteractions[i] === 1) {\n                            annotation.allowedInteractions[i] = AllowedInteraction.Move;\n                        }\n                        if (annotation.allowedInteractions[i] === 2) {\n                            annotation.allowedInteractions[i] = AllowedInteraction.Resize;\n                        }\n                        if (annotation.allowedInteractions[i] === 3) {\n                            annotation.allowedInteractions[i] = AllowedInteraction.Delete;\n                        }\n                        if (annotation.allowedInteractions[i] === 4) {\n                            annotation.allowedInteractions[i] = AllowedInteraction.PropertyChange;\n                        }\n                        if (annotation.allowedInteractions[i] === 5) {\n                            annotation.allowedInteractions[i] = AllowedInteraction.None;\n                        }\n                    }\n                }\n            }\n            // eslint-disable-next-line\n            currentAnnotation.allowedInteractions = annotation.allowedInteractions ? annotation.allowedInteractions : this.updateAnnotationAllowedInteractions(annotation);\n        }\n        if (!currentAnnotation) {\n            if (annotation.shapeAnnotationType === 'sticky' && annotation.annotationId !== undefined) {\n                // eslint-disable-next-line\n                currentAnnotation = this.pdfViewer.nameTable[annotation.annotationId];\n                currentAnnotation.annotationSettings.isLock = annotation.annotationSettings.isLock;\n                annotationId = currentAnnotation.annotName;\n                pageNumber = currentAnnotation.pageIndex;\n            }\n        }\n        if (annotation.shapeAnnotationType === 'textMarkup') {\n            // eslint-disable-next-line max-len\n            currentAnnotation = this.pdfViewer.annotationModule.textMarkupAnnotationModule.getAnnotations(annotation.pageNumber, annotation);\n            for (var i = 0; i < currentAnnotation.length; i++) {\n                if (annotation.annotationId === currentAnnotation[i].annotName) {\n                    isTextMarkupUpdate = true;\n                    currentAnnotation = currentAnnotation[i];\n                    currentAnnotation.isPrint = annotation.isPrint;\n                    this.textMarkupAnnotationModule.currentTextMarkupAnnotation = currentAnnotation;\n                    this.textMarkupAnnotationModule.selectTextMarkupCurrentPage = currentAnnotation.pageNumber;\n                    currentAnnotation.allowedInteractions = annotation.allowedInteractions;\n                    pageNumber = currentAnnotation.pageNumber;\n                    annotationId = annotation.annotationId;\n                    break;\n                }\n            }\n        }\n        if (currentAnnotation) {\n            // eslint-disable-next-line\n            var clonedObject = cloneObject(currentAnnotation);\n            // eslint-disable-next-line\n            var redoClonedObject = cloneObject(currentAnnotation);\n            if (annotation.shapeAnnotationType === 'textMarkup') {\n                annotationType = 'textMarkup';\n            }\n            if (annotation && annotation.isCommentLock === true) {\n                currentAnnotation.isCommentLock = annotation.isCommentLock;\n            }\n            if (annotation.comments) {\n                for (var j_1 = 0; j_1 < annotation.comments.length; j_1++) {\n                    if (annotation.comments[j_1].isLock === true) {\n                        if (annotationType) {\n                            currentAnnotation.comments = annotation.comments;\n                            currentAnnotation.comments[j_1].isLock = annotation.comments[j_1].isLock;\n                        }\n                        else {\n                            currentAnnotation.properties.comments = annotation.comments;\n                            currentAnnotation.properties.comments[j_1].isLock = annotation.comments[j_1].isLock;\n                        }\n                    }\n                }\n            }\n            if (annotation && annotation.note !== '' && annotation.note !== undefined) {\n                if (annotationType) {\n                    currentAnnotation.note = annotation.note;\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addTextToComments(currentAnnotation.annotName, currentAnnotation.note);\n                }\n                else {\n                    currentAnnotation.notes = annotation.note;\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addTextToComments(currentAnnotation.annotName, currentAnnotation.notes);\n                }\n            }\n            else {\n                if (annotation && annotation.isCommentLock && ((annotation.type && annotation.type !== 'FreeText') || annotation.shapeAnnotationType !== 'FreeText')) {\n                    this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addTextToComments(currentAnnotation.annotName, '  ');\n                }\n            }\n            if (annotation.commentId && annotation.editComment && annotation.commentType === 'edit') {\n                this.editComments(annotation.commentId, annotation.editComment);\n            }\n            if (annotation.replyComment && annotation.commentType === 'add') {\n                this.addReplyComments(currentAnnotation, annotation.replyComment, annotation.commentType);\n                this.pdfViewer.annotationCollection[0].note = annotation.note;\n            }\n            if (annotation.nextComment && annotation.commentType === 'next') {\n                this.addReplyComments(annotation, annotation.nextComment, annotation.commentType);\n            }\n            if (annotation.note === '' && annotation.commentType === 'delete') {\n                // eslint-disable-next-line\n                var commentDiv = document.getElementById(annotation.annotationId);\n                this.deletComment(commentDiv);\n            }\n            if (annotation.comments) {\n                for (var j_2 = 0; j_2 < annotation.comments.length; j_2++) {\n                    if (annotation.comments[j_2].note === '' && annotation.commentType === 'delete') {\n                        // eslint-disable-next-line\n                        var commentDiv = document.getElementById(annotation.comments[j_2].annotName);\n                        this.deletComment(commentDiv);\n                    }\n                }\n            }\n            if (annotation.type === 'TextMarkup' || annotation.shapeAnnotationType === 'textMarkup') {\n                if (currentAnnotation.annotationSettings && annotation.annotationSettings) {\n                    if (currentAnnotation.annotationSettings.isLock !== annotation.annotationSettings.isLock) {\n                        // eslint-disable-next-line max-len\n                        var pageAnnotations = this.textMarkupAnnotationModule.modifyAnnotationProperty('AnnotationSettings', annotation.annotationSettings.isLock, null);\n                        // eslint-disable-next-line max-len\n                        this.textMarkupAnnotationModule.manageAnnotations(pageAnnotations, this.textMarkupAnnotationModule.selectTextMarkupCurrentPage);\n                    }\n                }\n                if (currentAnnotation.opacity !== annotation.opacity) {\n                    this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyOpacityProperty(null, annotation.opacity);\n                }\n                if (currentAnnotation.color !== annotation.color) {\n                    this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyColorProperty(annotation.color);\n                }\n                annotationType = 'textMarkup';\n                if (isTextMarkupUpdate) {\n                    this.textMarkupAnnotationModule.currentTextMarkupAnnotation = null;\n                    this.textMarkupAnnotationModule.selectTextMarkupCurrentPage = null;\n                }\n                // eslint-disable-next-line max-len\n            }\n            else if (annotation && annotation.stampAnnotationType === 'image' && annotation.shapeAnnotationType === 'stamp' && annotation.stampAnnotationPath) {\n                annotationType = 'stamp';\n                if (currentAnnotation.data !== annotation.stampAnnotationPath) {\n                    currentAnnotation.data = annotation.stampAnnotationPath;\n                    currentAnnotation.wrapper.children[0].imageSource = annotation.stampAnnotationPath;\n                }\n                if (!(isNullOrUndefined(annotation.opacity)) && currentAnnotation.opacity !== annotation.opacity) {\n                    this.annotationPropertyChange(currentAnnotation, annotation.opacity, 'Shape Opacity', clonedObject, redoClonedObject);\n                }\n                this.calculateAnnotationBounds(currentAnnotation, annotation);\n                // eslint-disable-next-line max-len\n            }\n            else if (annotation.type === 'StickyNotes' || annotation.type === 'Stamp' || annotation.shapeAnnotationType === 'sticky' || annotation.shapeAnnotationType === 'stamp') {\n                if (!(isNullOrUndefined(annotation.opacity)) && currentAnnotation.opacity !== annotation.opacity) {\n                    this.annotationPropertyChange(currentAnnotation, annotation.opacity, 'Shape Opacity', clonedObject, redoClonedObject);\n                }\n                this.calculateAnnotationBounds(currentAnnotation, annotation);\n                if (annotation.type === 'StickyNotes' || annotation.shapeAnnotationType === 'sticky') {\n                    annotationType = 'sticky';\n                }\n                else {\n                    annotationType = 'stamp';\n                }\n                // eslint-disable-next-line max-len\n            }\n            else if (annotation.type === 'Ink' || annotation.type === 'Shape' || annotation.type === 'Measure' || annotation.shapeAnnotationType === 'Line' || annotation.shapeAnnotationType === 'Square' || annotation.shapeAnnotationType === 'Circle' || annotation.shapeAnnotationType === 'Polygon' || annotation.shapeAnnotationType === 'Polyline' || annotation.shapeAnnotationType === 'Ink') {\n                this.calculateAnnotationBounds(currentAnnotation, annotation);\n                if (!(isNullOrUndefined(annotation.opacity)) && currentAnnotation.opacity !== annotation.opacity) {\n                    this.annotationPropertyChange(currentAnnotation, annotation.opacity, 'Shape Opacity', clonedObject, redoClonedObject);\n                }\n                if (annotation.fillColor && currentAnnotation.fillColor !== annotation.fillColor) {\n                    redoClonedObject.fillColor = annotation.fillColor;\n                    if (annotation.labelSettings && annotation.labelSettings.fillColor) {\n                        annotation.labelSettings.fillColor = annotation.fillColor;\n                    }\n                    this.pdfViewer.nodePropertyChange(currentAnnotation, { fillColor: annotation.fillColor });\n                    this.triggerAnnotationPropChange(currentAnnotation, true, false, false, false);\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Shape Fill', '', clonedObject, redoClonedObject);\n                }\n                if (annotation.strokeColor && currentAnnotation.strokeColor !== annotation.strokeColor) {\n                    redoClonedObject.strokeColor = annotation.strokeColor;\n                    this.pdfViewer.nodePropertyChange(currentAnnotation, { strokeColor: annotation.strokeColor });\n                    this.triggerAnnotationPropChange(currentAnnotation, false, true, false, false);\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Shape Stroke', '', clonedObject, redoClonedObject);\n                }\n                if (annotation.thickness && currentAnnotation.thickness !== annotation.thickness) {\n                    redoClonedObject.thickness = annotation.thickness;\n                    this.pdfViewer.nodePropertyChange(currentAnnotation, { thickness: annotation.thickness });\n                    this.triggerAnnotationPropChange(currentAnnotation, false, false, true, false);\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Shape Thickness', '', clonedObject, redoClonedObject);\n                }\n                if (currentAnnotation.author !== annotation.author) {\n                    redoClonedObject.author = annotation.author;\n                    this.pdfViewer.nodePropertyChange(currentAnnotation, { author: annotation.author });\n                    this.triggerAnnotationPropChange(currentAnnotation, false, true, false, false);\n                }\n                if (currentAnnotation.subject !== annotation.subject) {\n                    redoClonedObject.subject = annotation.subject;\n                    this.pdfViewer.nodePropertyChange(currentAnnotation, { subject: annotation.subject });\n                    this.triggerAnnotationPropChange(currentAnnotation, false, true, false, false);\n                }\n                if (currentAnnotation.modifiedDate !== annotation.modifiedDate) {\n                    redoClonedObject.modifiedDate = annotation.modifiedDate;\n                    this.pdfViewer.nodePropertyChange(currentAnnotation, { modifiedDate: annotation.modifiedDate });\n                }\n                if (currentAnnotation.subject !== annotation.subject) {\n                    redoClonedObject.subject = annotation.subject;\n                    this.pdfViewer.nodePropertyChange(currentAnnotation, { subject: annotation.subject });\n                    this.triggerAnnotationPropChange(currentAnnotation, false, true, false, false);\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Shape Stroke', '', clonedObject, redoClonedObject);\n                }\n                if (this.pdfViewer.enableShapeLabel && currentAnnotation.fontColor !== annotation.fontColor) {\n                    redoClonedObject.fontColor = annotation.fontColor;\n                    this.pdfViewer.nodePropertyChange(currentAnnotation, { fontColor: annotation.fontColor });\n                }\n                if (this.pdfViewer.enableShapeLabel && annotation.labelSettings && annotation.labelSettings.fillColor) {\n                    if (currentAnnotation.labelFillColor !== annotation.labelSettings.fillColor) {\n                        redoClonedObject.labelFillColor = annotation.labelSettings.fillColor;\n                        this.pdfViewer.nodePropertyChange(currentAnnotation, { labelFillColor: annotation.labelSettings.fillColor });\n                    }\n                }\n                // eslint-disable-next-line max-len\n                if (annotation.shapeAnnotationType === 'Line' || annotation.shapeAnnotationType === 'Polyline' || annotation.shapeAnnotationType === 'Polygon') {\n                    if (JSON.stringify(currentAnnotation.vertexPoints) !== JSON.stringify(annotation.vertexPoints)) {\n                        currentAnnotation.vertexPoints = annotation.vertexPoints;\n                        this.pdfViewer.nodePropertyChange(currentAnnotation, { vertexPoints: annotation.vertexPoints });\n                    }\n                }\n                // eslint-disable-next-line max-len\n                if (annotation.subType === 'Line' || annotation.subType === 'Arrow' || annotation.subType === 'Distance' || annotation.subType === 'Perimeter') {\n                    var isSourceDecoraterShapesChanged = false;\n                    var isTargetDecoraterShapesChanged = false;\n                    var isBorderDashArrayChanged = false;\n                    clonedObject.lineHeadStart = currentAnnotation.sourceDecoraterShapes;\n                    clonedObject.lineHeadEnd = currentAnnotation.taregetDecoraterShapes;\n                    redoClonedObject.lineHeadStart = annotation.lineHeadStartStyle;\n                    redoClonedObject.lineHeadEnd = annotation.lineHeadEndStyle;\n                    redoClonedObject.borderDashArray = annotation.borderDashArray;\n                    if (currentAnnotation.taregetDecoraterShapes !== annotation.lineHeadEndStyle) {\n                        isTargetDecoraterShapesChanged = true;\n                    }\n                    if (currentAnnotation.sourceDecoraterShapes !== annotation.lineHeadStartStyle) {\n                        isSourceDecoraterShapesChanged = true;\n                    }\n                    if (currentAnnotation.borderDashArray !== annotation.borderDashArray) {\n                        isBorderDashArrayChanged = true;\n                    }\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.nodePropertyChange(currentAnnotation, { sourceDecoraterShapes: annotation.lineHeadStartStyle, taregetDecoraterShapes: annotation.lineHeadEndStyle, borderDashArray: annotation.borderDashArray });\n                    // eslint-disable-next-line max-len\n                    this.triggerAnnotationPropChange(currentAnnotation, false, false, false, false, isSourceDecoraterShapesChanged, isTargetDecoraterShapesChanged, isBorderDashArrayChanged);\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Line properties change', '', clonedObject, redoClonedObject);\n                }\n                // eslint-disable-next-line max-len\n                if (annotation.type === 'Shape' || annotation.shapeAnnotationType === 'Line' || annotation.shapeAnnotationType === 'Square' || annotation.shapeAnnotationType === 'Circle' || annotation.shapeAnnotationType === 'Polygon') {\n                    annotationType = 'shape';\n                }\n                if (annotation.type === 'Ink' || annotation.shapeAnnotationType === 'Ink') {\n                    annotationType = 'ink';\n                }\n                // eslint-disable-next-line max-len\n                if (annotation.type === 'Measure' || annotation.indent === 'LineDimension' || annotation.indent === 'PolyLineDimension' || annotation.indent === 'PolygonDimension' || annotation.indent === 'PolygonRadius' || annotation.indent === 'PolygonVolume') {\n                    annotationType = 'shape_measure';\n                }\n                if (annotation.labelSettings && this.pdfViewer.enableShapeLabel) {\n                    this.updateFreeTextProperties(currentAnnotation);\n                    this.pdfViewer.nodePropertyChange(currentAnnotation, {\n                        // eslint-disable-next-line max-len\n                        labelOpacity: annotation.labelSettings.opacity, fontColor: annotation.labelSettings.fontColor, fontSize: annotation.labelSettings.fontSize, fontFamily: annotation.labelSettings.fontFamily,\n                        labelContent: currentAnnotation.notes, labelFillColor: annotation.labelSettings.fillColor\n                    });\n                }\n                if (this.pdfViewer.enableShapeLabel && annotation.calibrate && annotation.calibrate.depth) {\n                    if (this.pdfViewer.annotationModule.measureAnnotationModule.volumeDepth !== annotation.calibrate.depth) {\n                        this.pdfViewer.annotationModule.measureAnnotationModule.volumeDepth = annotation.calibrate.depth;\n                        // eslint-disable-next-line max-len\n                        currentAnnotation.notes = this.pdfViewer.annotationModule.measureAnnotationModule.calculateVolume(currentAnnotation.vertexPoints, currentAnnotation.id, currentAnnotation.pageIndex);\n                        currentAnnotation.labelContent = currentAnnotation.notes;\n                        if (annotation.labelSettings && annotation.labelSettings.labelContent) {\n                            annotation.labelSettings.labelContent = currentAnnotation.notes;\n                        }\n                        this.pdfViewer.nodePropertyChange(currentAnnotation, { labelContent: currentAnnotation.labelContent });\n                        // eslint-disable-next-line max-len\n                        this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addTextToComments(currentAnnotation.annotName, currentAnnotation.notes);\n                    }\n                }\n            }\n            else if (annotation.type === 'FreeText' || annotation.shapeAnnotationType === 'FreeText') {\n                annotationType = 'freetext';\n                if (this.pdfViewer.freeTextSettings.enableAutoFit && currentAnnotation.dynamicText !== annotation.content) {\n                    // eslint-disable-next-line\n                    var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + currentAnnotation.pageIndex);\n                    var context = canvas.getContext(\"2d\");\n                    var fontSize = annotation.fontSize;\n                    var font = void 0;\n                    var fontFamily = annotation.fontFamily;\n                    var zoomFactor = this.pdfViewerBase.getZoomFactor();\n                    // eslint-disable-next-line\n                    annotation.font.isBold ? font = 'bold' + ' ' + fontSize + 'px' + ' ' + fontFamily : font = fontSize + 'px' + ' ' + fontFamily;\n                    context.font = font;\n                    var characterLength = 8;\n                    var highestTextNode = \"\";\n                    // eslint-disable-next-line\n                    var textNodes = [];\n                    var textboxValue = annotation.content ? annotation.content : annotation.dynamicText;\n                    if (textboxValue.indexOf('\\n') > -1) {\n                        textNodes = textboxValue.split('\\n');\n                        for (var j = 0; j < textNodes.length; j++) {\n                            // eslint-disable-next-line\n                            var textNodeData = context.measureText(textNodes[j]);\n                            // eslint-disable-next-line\n                            var highestTextNodeData = context.measureText(highestTextNode);\n                            if (textNodeData.width > highestTextNodeData.width) {\n                                highestTextNode = textNodes[j];\n                            }\n                        }\n                    }\n                    else {\n                        highestTextNode = textboxValue;\n                    }\n                    // eslint-disable-next-line\n                    var textwidth = context.measureText(highestTextNode);\n                    annotation.bounds.width = Math.ceil(textwidth.width + ((characterLength + 1) * 2));\n                    var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + (annotation.pageIndex));\n                    var maxWidth = pageDiv.clientWidth - (annotation.bounds.left * zoomFactor);\n                    if (annotation.bounds.width > maxWidth) {\n                        annotation.bounds.width = maxWidth / zoomFactor;\n                    }\n                    var height = annotation.bounds.height;\n                    annotation.bounds.height = height >= currentAnnotation.bounds.height ? height : currentAnnotation.bounds.height;\n                }\n                this.calculateAnnotationBounds(currentAnnotation, annotation);\n                if (annotation.opacity && currentAnnotation.opacity !== annotation.opacity) {\n                    this.triggerAnnotationPropChange(currentAnnotation, false, false, false, true);\n                }\n                if (annotation.fillColor && currentAnnotation.fillColor !== annotation.fillColor) {\n                    this.triggerAnnotationPropChange(currentAnnotation, true, false, false, false);\n                }\n                if (annotation.strokeColor && currentAnnotation.strokeColor !== annotation.strokeColor) {\n                    this.triggerAnnotationPropChange(currentAnnotation, false, true, false, false);\n                }\n                if (annotation.thickness && currentAnnotation.thickness !== annotation.thickness) {\n                    this.triggerAnnotationPropChange(currentAnnotation, false, false, true, false);\n                }\n                var isCurrentAnnotationLock = currentAnnotation.isLock;\n                if (!isNullOrUndefined(annotation.isLock)) {\n                    isCurrentAnnotationLock = annotation.isLock;\n                }\n                else if (!isNullOrUndefined(annotation.annotationSettings.isLock)) {\n                    isCurrentAnnotationLock = annotation.annotationSettings.isLock;\n                }\n                currentAnnotation.annotationSettings.isLock = isCurrentAnnotationLock;\n                currentAnnotation.isLock = isCurrentAnnotationLock;\n                annotation.content = (annotation.content && annotation.content === annotation.dynamicText) ? annotation.content : annotation.dynamicText;\n                if (annotation.content && currentAnnotation.dynamicText !== annotation.content) {\n                    this.triggerAnnotationPropChange(currentAnnotation, false, false, false, false, false, false, false, true, currentAnnotation.dynamicText, annotation.content);\n                }\n                this.pdfViewer.nodePropertyChange(currentAnnotation, {\n                    // eslint-disable-next-line max-len\n                    opacity: annotation.opacity, fontColor: annotation.fontColor, fontSize: annotation.fontSize, fontFamily: annotation.fontFamily,\n                    // eslint-disable-next-line max-len\n                    dynamicText: annotation.content, fillColor: annotation.fillColor, textAlign: annotation.textAlign, strokeColor: annotation.strokeColor, thickness: annotation.thickness, font: annotation.fontStyle ? this.setFreeTextFontStyle(annotation.fontStyle) : this.setFreeTextFontStyle(annotation.font),\n                    isReadonly: annotation.isReadonly\n                });\n                if (annotation.content && currentAnnotation) {\n                    this.updateAnnotationComments(currentAnnotation.annotName, annotation.content);\n                }\n                // eslint-disable-next-line\n                var newCommentDiv = document.getElementById(this.pdfViewer.element.id + '_commenttextbox_editor');\n                // eslint-disable-next-line\n                var commentObj = new InPlaceEditor({\n                    value: annotation.content\n                });\n                commentObj.appendTo(newCommentDiv);\n            }\n            currentAnnotation.modifiedDate = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n            if (currentAnnotation.customData !== annotation.customData) {\n                currentAnnotation.customData = annotation.customData;\n            }\n            currentAnnotation.isPrint = annotation.isPrint;\n            if (annotation.type !== 'TextMarkup') {\n                this.pdfViewer.renderDrawing();\n                this.updateCollection(annotationId, pageNumber, annotation, annotationType);\n            }\n        }\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.annotationPropertyChange = function (currentAnnotation, opacity, actionString, clonedObject, redoClonedObject) {\n        this.pdfViewer.nodePropertyChange(currentAnnotation, { opacity: opacity });\n        this.triggerAnnotationPropChange(currentAnnotation, false, false, false, true);\n        // eslint-disable-next-line max-len\n        this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, actionString, '', clonedObject, redoClonedObject);\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.calculateAnnotationBounds = function (currentAnnotation, annotation) {\n        // eslint-disable-next-line\n        var bounds = this.pdfViewerBase.convertBounds(currentAnnotation.wrapper.bounds);\n        // eslint-disable-next-line\n        var annotBounds = this.pdfViewerBase.convertBounds(annotation.bounds);\n        if (bounds && annotBounds) {\n            // eslint-disable-next-line\n            if (JSON.stringify(bounds) !== JSON.stringify(annotBounds) && (Math.abs(bounds.Y - annotBounds.Y) > 2) || (Math.abs(bounds.X - annotBounds.X) > 2) || (Math.abs(bounds.Width - annotBounds.Width) > 2) || (Math.abs(bounds.Height - annotBounds.Height) > 2)) {\n                // eslint-disable-next-line\n                var annotationBounds = { x: annotBounds.X + (annotBounds.Width / 2), y: annotBounds.Y + (annotBounds.Height / 2), width: annotBounds.Width, height: annotBounds.Height };\n                this.pdfViewer.nodePropertyChange(currentAnnotation, { bounds: annotationBounds });\n                this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID);\n                this.triggerAnnotationPropChange(currentAnnotation, false, false, false, false);\n            }\n        }\n    };\n    /**\n     * @param annotation\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.updateFreeTextProperties = function (annotation) {\n        if (annotation.labelSettings) {\n            if (annotation.labelSettings.fillColor) {\n                annotation.labelFillColor = annotation.labelSettings.fillColor;\n            }\n            if (annotation.labelSettings.fontColor) {\n                annotation.fontColor = annotation.labelSettings.fontColor;\n            }\n            if (annotation.labelSettings.fontSize) {\n                annotation.fontSize = annotation.labelSettings.fontSize;\n            }\n            if (annotation.labelSettings.fontFamily) {\n                annotation.fontFamily = annotation.labelSettings.fontFamily;\n            }\n            if (annotation.labelSettings.opacity) {\n                annotation.labelOpacity = annotation.labelSettings.opacity;\n            }\n            if (annotation.labelSettings.labelContent) {\n                annotation.labelContent = annotation.labelSettings.labelContent;\n            }\n        }\n    };\n    Annotation.prototype.updateAnnotationComments = function (annotationId, noteContent) {\n        // eslint-disable-next-line\n        var commentsDiv = document.getElementById(annotationId);\n        if (commentsDiv && commentsDiv.childNodes) {\n            if (commentsDiv.childNodes[0].ej2_instances) {\n                commentsDiv.childNodes[0].ej2_instances[0].value = noteContent;\n            }\n            else if (commentsDiv.childNodes[0].childNodes && commentsDiv.childNodes[0].childNodes[1].ej2_instances) {\n                commentsDiv.childNodes[0].childNodes[1].ej2_instances[0].value = noteContent;\n            }\n        }\n    };\n    /**\n     * @param annotation\n     * @param currentAnnotation\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.addFreeTextProperties = function (annotation, currentAnnotation) {\n        if (this.pdfViewer.enableShapeLabel && annotation && currentAnnotation) {\n            currentAnnotation.labelSettings = {\n                fontColor: annotation.fontColor, fontSize: annotation.fontSize, fontFamily: annotation.fontFamily,\n                opacity: annotation.labelOpacity, labelContent: annotation.labelContent, fillColor: annotation.labelFillColor\n            };\n        }\n    };\n    Annotation.prototype.updateMeasurementSettings = function () {\n        if (this.pdfViewer.enableAnnotation && this.pdfViewer.enableMeasureAnnotation) {\n            // eslint-disable-next-line max-len\n            var ratioString = '1 ' + this.pdfViewer.measurementSettings.conversionUnit + ' = ' + this.pdfViewer.measurementSettings.scaleRatio + ' ' + this.pdfViewer.measurementSettings.displayUnit;\n            this.measureAnnotationModule.updateMeasureValues(ratioString, this.pdfViewer.measurementSettings.displayUnit, this.pdfViewer.measurementSettings.conversionUnit, this.pdfViewer.measurementSettings.depth);\n        }\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.updateCollection = function (annotationId, pageNumber, annotation, annotationType) {\n        // eslint-disable-next-line\n        var annotationCollection;\n        // eslint-disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_' + annotationType);\n        if (this.pdfViewerBase.isStorageExceed) {\n            storeObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_' + annotationType];\n        }\n        if (storeObject) {\n            var annotObject = JSON.parse(storeObject);\n            var index = this.getPageCollection(annotObject, pageNumber);\n            if (annotObject[index]) {\n                annotationCollection = annotObject[index].annotations;\n                if (annotationCollection !== null) {\n                    for (var i = 0; i < annotationCollection.length; i++) {\n                        if (annotationCollection[i].annotName === annotationId) {\n                            // eslint-disable-next-line\n                            var newAnnot = this.modifyAnnotationProperties(annotationCollection[i], annotation, annotationType);\n                            annotationCollection[i] = newAnnot;\n                        }\n                    }\n                    if (!this.pdfViewerBase.isStorageExceed) {\n                        window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_' + annotationType);\n                    }\n                    if (annotObject[index]) {\n                        annotObject[index].annotations = annotationCollection;\n                    }\n                    var annotationStringified = JSON.stringify(annotObject);\n                    if (this.pdfViewerBase.isStorageExceed) {\n                        // eslint-disable-next-line max-len\n                        this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_' + annotationType] = annotationStringified;\n                    }\n                    else {\n                        // eslint-disable-next-line max-len\n                        window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_' + annotationType, annotationStringified);\n                    }\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.modifyAnnotationProperties = function (newAnnotation, annotation, annotationType) {\n        if (annotation && annotation.isCommentLock === true) {\n            newAnnotation.isCommentLock = annotation.isCommentLock;\n        }\n        if (annotation.comments) {\n            for (var j = 0; j < annotation.comments.length; j++) {\n                if (!isNullOrUndefined(annotation.comments[j].isLock)) {\n                    newAnnotation.comments[j].isLock = annotation.comments[j].isLock;\n                }\n            }\n        }\n        if (annotation && annotation.note !== '' && annotation.note !== undefined) {\n            newAnnotation.note = annotation.note;\n        }\n        if (annotation.commentId && annotation.editComment && annotation.commentType === 'edit') {\n            // eslint-disable-next-line\n            var commentDiv = document.getElementById(annotation.commentId);\n            if (annotation.annotationId === annotation.commentId) {\n                newAnnotation.note = commentDiv.childNodes[1].ej2_instances[0].value;\n            }\n            for (var j = 0; j < annotation.comments.length; j++) {\n                if (annotation.comments[j].annotName === annotation.commentId) {\n                    newAnnotation.comments[j].note = commentDiv.childNodes[1].ej2_instances[0].value;\n                }\n            }\n        }\n        if (annotationType === 'textMarkup') {\n            newAnnotation.opacity = annotation.opacity;\n            newAnnotation.color = annotation.color;\n            newAnnotation.allowedInteractions = annotation.allowedInteractions;\n        }\n        else if (annotationType === 'sticky' || annotationType === 'stamp') {\n            if (annotation.bounds) {\n                newAnnotation.bounds = annotation.bounds;\n            }\n            newAnnotation.opacity = annotation.opacity;\n            newAnnotation.annotationSettings = annotation.annotationSettings;\n            newAnnotation.allowedInteractions = annotation.allowedInteractions;\n            if (annotation.stampAnnotationPath) {\n                newAnnotation.stampAnnotationPath = annotation.stampAnnotationPath;\n            }\n        }\n        else if (annotationType === 'ink') {\n            if (annotation.bounds) {\n                newAnnotation.bounds = annotation.bounds;\n            }\n            newAnnotation.opacity = annotation.opacity;\n            newAnnotation.strokeColor = annotation.strokeColor;\n            newAnnotation.thickness = annotation.thickness;\n            newAnnotation.annotationSettings = annotation.annotationSettings;\n            newAnnotation.allowedInteractions = annotation.allowedInteractions;\n        }\n        else if (annotationType === 'shape' || annotationType === 'shape_measure') {\n            if (annotation.subType === 'Line' || annotation.subType === 'Arrow' || annotation.subType === 'Distance' ||\n                annotation.subType === 'Perimeter') {\n                if (annotation.bounds) {\n                    newAnnotation.bounds = annotation.bounds;\n                }\n                if (annotation.vertexPoints) {\n                    newAnnotation.vertexPoints = annotation.vertexPoints;\n                }\n                newAnnotation.opacity = annotation.opacity;\n                newAnnotation.fillColor = annotation.fillColor;\n                newAnnotation.strokeColor = annotation.strokeColor;\n                newAnnotation.thickness = annotation.thickness;\n                newAnnotation.borderDashArray = annotation.borderDashArray;\n                newAnnotation.lineHeadStart = this.getArrowTypeForCollection(annotation.lineHeadStartStyle);\n                newAnnotation.lineHeadEnd = this.getArrowTypeForCollection(annotation.lineHeadEndStyle);\n                newAnnotation.annotationSettings = annotation.annotationSettings;\n                newAnnotation.allowedInteractions = annotation.allowedInteractions;\n            }\n            else {\n                if (annotation.bounds) {\n                    newAnnotation.bounds = annotation.bounds;\n                }\n                if (annotation.vertexPoints) {\n                    newAnnotation.vertexPoints = annotation.vertexPoints;\n                }\n                newAnnotation.opacity = annotation.opacity;\n                newAnnotation.fillColor = annotation.fillColor;\n                newAnnotation.strokeColor = annotation.strokeColor;\n                newAnnotation.thickness = annotation.thickness;\n                newAnnotation.annotationSettings = annotation.annotationSettings;\n                newAnnotation.allowedInteractions = annotation.allowedInteractions;\n                if (annotation.calibrate) {\n                    if (newAnnotation.annotName === annotation.annotationId) {\n                        if (newAnnotation.calibrate.depth !== annotation.calibrate.depth) {\n                            newAnnotation.calibrate.depth = annotation.calibrate.depth;\n                            this.pdfViewer.annotationModule.measureAnnotationModule.volumeDepth = annotation.calibrate.depth;\n                            // eslint-disable-next-line max-len\n                            newAnnotation.note = this.pdfViewer.annotationModule.measureAnnotationModule.calculateVolume(newAnnotation.vertexPoints);\n                        }\n                    }\n                }\n            }\n            if (this.pdfViewer.enableShapeLabel && annotation.labelSettings) {\n                var text = annotation.labelSettings.labelContent;\n                newAnnotation.note = text;\n                newAnnotation.fontSize = annotation.labelSettings.fontSize;\n                newAnnotation.labelFillColor = annotation.labelSettings.fillColor;\n                if (newAnnotation.labelContent) {\n                    newAnnotation.labelContent = text;\n                }\n                if (newAnnotation.labelSettings) {\n                    newAnnotation.labelSettings = annotation.labelSettings;\n                }\n                this.updateAnnotationComments(newAnnotation.annotName, text);\n            }\n        }\n        else if (annotationType === 'freetext') {\n            if (annotation.bounds) {\n                newAnnotation.bounds = annotation.bounds;\n            }\n            newAnnotation.opacity = annotation.opacity;\n            newAnnotation.strokeColor = annotation.strokeColor;\n            newAnnotation.thickness = annotation.thickness;\n            if (annotation.content) {\n                newAnnotation.dynamicText = annotation.content;\n            }\n            newAnnotation.fontFamily = annotation.fontFamily;\n            newAnnotation.fontSize = annotation.fontSize;\n            newAnnotation.fontColor = annotation.fontColor;\n            newAnnotation.fillColor = annotation.fillColor;\n            newAnnotation.font = annotation.font ? annotation.font : annotation.fontStyle;\n            newAnnotation.textAlign = annotation.textAlign;\n            newAnnotation.annotationSettings = annotation.annotationSettings;\n            newAnnotation.allowedInteractions = annotation.allowedInteractions;\n            newAnnotation.isReadonly = annotation.isReadonly;\n        }\n        newAnnotation.customData = annotation.customData;\n        newAnnotation.subject = annotation.subject;\n        newAnnotation.modifiedDate = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n        newAnnotation.isPrint = annotation.isPrint;\n        if (annotation.annotationSettings && !isNullOrUndefined(annotation.annotationSettings.isLock)) {\n            newAnnotation.isLocked = annotation.annotationSettings.isLock;\n        }\n        return newAnnotation;\n    };\n    /**\n     * @param annotationType\n     * @param annotationSubType\n     * @param annotationType\n     * @param annotationSubType\n     * @private\n     */\n    Annotation.prototype.updateAnnotationAuthor = function (annotationType, annotationSubType) {\n        var annotationAuthor;\n        if (annotationType === 'sticky') {\n            // eslint-disable-next-line max-len\n            annotationAuthor = (this.pdfViewer.stickyNotesSettings.author !== 'Guest') ? this.pdfViewer.stickyNotesSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n        }\n        else if (annotationType === 'stamp') {\n            // eslint-disable-next-line max-len\n            annotationAuthor = (this.pdfViewer.stampSettings.author !== 'Guest') ? this.pdfViewer.stampSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n        }\n        else if (annotationType === 'shape') {\n            if (annotationSubType === 'Line') {\n                // eslint-disable-next-line max-len\n                annotationAuthor = (this.pdfViewer.lineSettings.author !== 'Guest') ? this.pdfViewer.lineSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n            }\n            else if (annotationSubType === 'LineWidthArrowHead' || annotationSubType === 'Arrow') {\n                // eslint-disable-next-line max-len\n                annotationAuthor = (this.pdfViewer.arrowSettings.author !== 'Guest') ? this.pdfViewer.arrowSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n            }\n            else if (annotationSubType === 'Circle' || annotationSubType === 'Ellipse' || annotationSubType === 'Oval') {\n                // eslint-disable-next-line max-len\n                annotationAuthor = (this.pdfViewer.circleSettings.author !== 'Guest') ? this.pdfViewer.circleSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n            }\n            else if (annotationSubType === 'Rectangle' || annotationSubType === 'Square') {\n                // eslint-disable-next-line max-len\n                annotationAuthor = (this.pdfViewer.rectangleSettings.author !== 'Guest') ? this.pdfViewer.rectangleSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n            }\n            else if (annotationSubType === 'Polygon') {\n                // eslint-disable-next-line max-len\n                annotationAuthor = (this.pdfViewer.polygonSettings.author !== 'Guest') ? this.pdfViewer.polygonSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n            }\n        }\n        else if (annotationType === 'measure') {\n            if (annotationSubType === 'Distance' || annotationSubType === 'Distance calculation') {\n                // eslint-disable-next-line max-len\n                annotationAuthor = (this.pdfViewer.distanceSettings.author !== 'Guest') ? this.pdfViewer.distanceSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n            }\n            else if (annotationSubType === 'Perimeter' || annotationSubType === 'Perimeter calculation') {\n                // eslint-disable-next-line max-len\n                annotationAuthor = (this.pdfViewer.perimeterSettings.author !== 'Guest') ? this.pdfViewer.perimeterSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n            }\n            else if (annotationSubType === 'Radius' || annotationSubType === 'Radius calculation') {\n                // eslint-disable-next-line max-len\n                annotationAuthor = (this.pdfViewer.radiusSettings.author !== 'Guest') ? this.pdfViewer.radiusSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n            }\n            else if (annotationSubType === 'Area' || annotationSubType === 'Area calculation') {\n                // eslint-disable-next-line max-len\n                annotationAuthor = (this.pdfViewer.areaSettings.author !== 'Guest') ? this.pdfViewer.areaSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n            }\n            else if (annotationSubType === 'Volume' || annotationSubType === 'Volume calculation') {\n                // eslint-disable-next-line max-len\n                annotationAuthor = (this.pdfViewer.volumeSettings.author !== 'Guest') ? this.pdfViewer.volumeSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n            }\n        }\n        else if (annotationType === 'textMarkup') {\n            if (annotationSubType === 'Highlight') {\n                // eslint-disable-next-line max-len\n                annotationAuthor = (this.pdfViewer.highlightSettings.author !== 'Guest') ? this.pdfViewer.highlightSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n            }\n            else if (annotationSubType === 'Underline') {\n                // eslint-disable-next-line max-len\n                annotationAuthor = (this.pdfViewer.underlineSettings.author !== 'Guest') ? this.pdfViewer.underlineSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n            }\n            else if (annotationSubType === 'Strikethrough') {\n                // eslint-disable-next-line max-len\n                annotationAuthor = (this.pdfViewer.strikethroughSettings.author !== 'Guest') ? this.pdfViewer.strikethroughSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n            }\n            else {\n                // eslint-disable-next-line max-len\n                annotationAuthor = this.pdfViewer.annotationSettings.author;\n            }\n        }\n        else if (annotationType === 'freeText') {\n            // eslint-disable-next-line max-len\n            annotationAuthor = (this.pdfViewer.freeTextSettings.author !== 'Guest') ? this.pdfViewer.freeTextSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n        }\n        else if (annotationType === 'ink') {\n            // eslint-disable-next-line max-len\n            annotationAuthor = (this.pdfViewer.inkAnnotationSettings.author !== 'Guest') ? this.pdfViewer.inkAnnotationSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n        }\n        if (!annotationAuthor) {\n            // eslint-disable-next-line max-len\n            annotationAuthor = this.pdfViewer.annotationSettings.author;\n        }\n        return annotationAuthor;\n    };\n    /**\n     * @param colour\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.nameToHash = function (colour) {\n        // eslint-disable-next-line\n        var colours = {\n            'aliceblue': '#f0f8ff', 'antiquewhite': '#faebd7', 'aqua': '#00ffff', 'aquamarine': '#7fffd4', 'azure': '#f0ffff',\n            'beige': '#f5f5dc', 'bisque': '#ffe4c4', 'black': '#000000', 'blanchedalmond': '#ffebcd', 'blue': '#0000ff',\n            'blueviolet': '#8a2be2', 'brown': '#a52a2a', 'burlywood': '#deb887', 'yellow': '#ffff00', 'yellowgreen': '#9acd32',\n            'cadetblue': '#5f9ea0', 'chartreuse': '#7fff00', 'chocolate': '#d2691e', 'coral': '#ff7f50',\n            'cornflowerblue': '#6495ed', 'cornsilk': '#fff8dc', 'crimson': '#dc143c',\n            'cyan': '#00ffff', 'darkblue': '#00008b', 'darkcyan': '#008b8b', 'darkgoldenrod': '#b8860b', 'darkgray': '#a9a9a9',\n            'darkred': '#8b0000', 'darksalmon': '#e9967a', 'darkgreen': '#006400', 'darkkhaki': '#bdb76b',\n            'darkmagenta': '#8b008b', 'darkolivegreen': '#556b2f', 'darkorange': '#ff8c00', 'darkorchid': '#9932cc',\n            'darkseagreen': '#8fbc8f', 'darkslateblue': '#483d8b', 'darkslategray': '#2f4f4f', 'darkturquoise': '#00ced1',\n            'darkviolet': '#9400d3', 'deeppink': '#ff1493', 'deepskyblue': '#00bfff', 'dimgray': '#696969',\n            'dodgerblue': '#1e90ff', 'firebrick': '#b22222', 'floralwhite': '#fffaf0',\n            'forestgreen': '#228b22', 'fuchsia': '#ff00ff', 'gainsboro': '#dcdcdc', 'ghostwhite': '#f8f8ff',\n            'gold': '#ffd700', 'goldenrod': '#daa520', 'gray': '#808080', 'green': '#008000',\n            'greenyellow': '#adff2f', 'honeydew': '#f0fff0', 'hotpink': '#ff69b4', 'indianred ': '#cd5c5c',\n            'mediumorchid': '#ba55d3', 'mediumpurple': '#9370d8', 'indigo': '#4b0082', 'ivory': '#fffff0',\n            'navy': '#000080', 'oldlace': '#fdf5e6', 'olive': '#808000', 'khaki': '#f0e68c',\n            'lavender': '#e6e6fa', 'lavenderblush': '#fff0f5', 'lawngreen': '#7cfc00', 'lemonchiffon': '#fffacd',\n            'lightblue': '#add8e6', 'lightcoral': '#f08080', 'lightcyan': '#e0ffff',\n            'lightgoldenrodyellow': '#fafad2', 'lightgrey': '#d3d3d3', 'lightgreen': '#90ee90',\n            'lightpink': '#ffb6c1', 'lightsalmon': '#ffa07a', 'lightseagreen': '#20b2aa',\n            'lightskyblue': '#87cefa', 'lightslategray': '#778899', 'lightsteelblue': '#b0c4de',\n            'lightyellow': '#ffffe0', 'lime': '#00ff00', 'limegreen': '#32cd32', 'linen': '#faf0e6',\n            'magenta': '#ff00ff', 'maroon': '#800000', 'mediumaquamarine': '#66cdaa', 'mediumblue': '#0000cd',\n            'mediumseagreen': '#3cb371', 'mediumslateblue': '#7b68ee', 'mediumspringgreen': '#00fa9a',\n            'mediumturquoise': '#48d1cc', 'mediumvioletred': '#c71585', 'midnightblue': '#191970',\n            'mintcream': '#f5fffa', 'mistyrose': '#ffe4e1', 'moccasin': '#ffe4b5', 'navajowhite': '#ffdead',\n            'rebeccapurple': '#663399', 'red': '#ff0000', 'rosybrown': '#bc8f8f', 'royalblue': '#4169e1',\n            'olivedrab': '#6b8e23', 'orange': '#ffa500', 'orangered': '#ff4500', 'orchid': '#da70d6',\n            'palegoldenrod': '#eee8aa', 'palegreen': '#98fb98', 'paleturquoise': '#afeeee',\n            'palevioletred': '#d87093', 'papayawhip': '#ffefd5', 'peachpuff': '#ffdab9', 'peru': '#cd853f',\n            'wheat': '#f5deb3', 'white': '#ffffff', 'whitesmoke': '#f5f5f5', 'pink': '#ffc0cb', 'plum': '#dda0dd',\n            'steelblue': '#4682b4', 'violet': '#ee82ee', 'powderblue': '#b0e0e6', 'purple': '#800080',\n            'saddlebrown': '#8b4513', 'salmon': '#fa8072', 'sandybrown': '#f4a460', 'seagreen': '#2e8b57',\n            'seashell': '#fff5ee', 'sienna': '#a0522d', 'silver': '#c0c0c0', 'skyblue': '#87ceeb',\n            'slateblue': '#6a5acd', 'slategray': '#708090', 'snow': '#fffafa', 'springgreen': '#00ff7f',\n            'tan': '#d2b48c', 'teal': '#008080', 'thistle': '#d8bfd8', 'tomato': '#ff6347', 'turquoise': '#40e0d0'\n        };\n        if (typeof colours[colour.toLowerCase()] !== 'undefined') {\n            return colours[colour.toLowerCase()];\n        }\n        return '';\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.updateFreeTextFontStyle = function (font) {\n        // eslint-disable-next-line\n        var fontStyle = 0;\n        if (font.isBold === 1) {\n            fontStyle = 1;\n        }\n        else if (font.isItalic === 2) {\n            fontStyle = 2;\n        }\n        else if (font.isUnderline === 4) {\n            fontStyle = 4;\n        }\n        else if (font.isStrikeout === 8) {\n            fontStyle = 8;\n        }\n        else {\n            fontStyle = { isBold: font.isBold, isItalic: font.isItalic, isUnderline: font.isUnderline, isStrikeout: font.isStrikeout };\n        }\n        return fontStyle;\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.setFreeTextFontStyle = function (fontStyle) {\n        if (fontStyle === 1) {\n            return { isBold: true };\n        }\n        else if (fontStyle === 2) {\n            return { isItalic: true };\n        }\n        else if (fontStyle === 4) {\n            return { isUnderline: true };\n        }\n        else if (fontStyle === 8) {\n            return { isStrikeout: true };\n        }\n        else {\n            return { isBold: fontStyle.isBold, isItalic: fontStyle.isItalic, isUnderline: fontStyle.isUnderline, isStrikeout: fontStyle.isStrikeout };\n        }\n    };\n    /**\n     * @param annotation\n     * @param isSettings\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.findAnnotationSettings = function (annotation, isSettings) {\n        // eslint-disable-next-line\n        var annotSettings = this.pdfViewer.annotationSettings;\n        if (annotation) {\n            // eslint-disable-next-line\n            var shapeType = annotation.shapeAnnotationType;\n            if (shapeType === 'StickyNotes' && this.pdfViewer.stickyNotesSettings) {\n                annotSettings = this.pdfViewer.stickyNotesSettings;\n            }\n            else if (shapeType === 'Stamp' || shapeType === 'Image') {\n                annotSettings = this.pdfViewer.stampSettings;\n                // eslint-disable-next-line max-len\n                if ((shapeType === 'image' || shapeType === 'Image')) {\n                    annotSettings = this.pdfViewer.customStampSettings;\n                }\n            }\n            else if (shapeType === 'FreeText') {\n                annotSettings = this.pdfViewer.freeTextSettings;\n            }\n            else if (annotation.measureType === '') {\n                if (shapeType === 'Line') {\n                    annotSettings = this.pdfViewer.lineSettings;\n                    // eslint-disable-next-line max-len\n                }\n                else if ((shapeType === 'Arrow' || shapeType === 'LineWidthArrowHead')) {\n                    annotSettings = this.pdfViewer.arrowSettings;\n                }\n                else if (shapeType === 'Rectangle') {\n                    annotSettings = this.pdfViewer.rectangleSettings;\n                    // eslint-disable-next-line max-len\n                }\n                else if ((shapeType === 'Circle' || shapeType === 'Ellipse')) {\n                    annotSettings = this.pdfViewer.circleSettings;\n                }\n                else if (shapeType === 'Polygon' && this.pdfViewer.polygonSettings) {\n                    annotSettings = this.pdfViewer.polygonSettings;\n                }\n            }\n            else if (annotation.measureType !== '') {\n                if (annotation.measureType === 'Distance') {\n                    annotSettings = this.pdfViewer.distanceSettings;\n                }\n                else if (annotation.measureType === 'Perimeter') {\n                    annotSettings = this.pdfViewer.perimeterSettings;\n                }\n                else if (annotation.measureType === 'Area') {\n                    annotSettings = this.pdfViewer.areaSettings;\n                }\n                else if (annotation.measureType === 'Radius') {\n                    annotSettings = this.pdfViewer.radiusSettings;\n                }\n                else if (annotation.measureType === 'Volume') {\n                    annotSettings = this.pdfViewer.volumeSettings;\n                }\n            }\n        }\n        var settings = annotation ? annotation.annotationSettings : {};\n        if (settings && (settings.minWidth || settings.maxWidth || settings.minHeight || settings.maxHeight)) {\n            return this.updateSettings(settings);\n        }\n        else if (isSettings) {\n            return this.updateSettings(annotSettings);\n        }\n        else {\n            return annotSettings;\n        }\n    };\n    /**\n     * @param annotation\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.updateAnnotationSettings = function (annotation) {\n        // eslint-disable-next-line\n        var annotSettings = this.pdfViewer.annotationSettings;\n        if (annotation.AnnotType === 'sticky') {\n            annotSettings = this.pdfViewer.stickyNotesSettings;\n        }\n        else if (annotation.AnnotType === 'stamp' || annotation.AnnotType === 'image' || annotation.AnnotType === 'Image') {\n            annotSettings = this.pdfViewer.stampSettings;\n            // eslint-disable-next-line max-len\n            if ((annotation.Subject === 'image' || annotation.Subject === 'Image')) {\n                annotSettings = this.pdfViewer.customStampSettings;\n            }\n        }\n        else if (annotation.AnnotType === 'freeText') {\n            annotSettings = this.pdfViewer.freeTextSettings;\n        }\n        else if (annotation.AnnotType === 'ink' || annotation.AnnotationType === 'Ink') {\n            annotSettings = this.pdfViewer.inkAnnotationSettings;\n        }\n        else if (annotation.AnnotType === 'shape') {\n            if (annotation.Subject === 'Line') {\n                annotSettings = this.pdfViewer.lineSettings;\n                // eslint-disable-next-line max-len\n            }\n            else if ((annotation.Subject === 'Arrow' || annotation.Subject === 'LineWidthArrowHead')) {\n                annotSettings = this.pdfViewer.arrowSettings;\n                // eslint-disable-next-line max-len\n            }\n            else if ((annotation.Subject === 'Rectangle' || annotation.Subject === 'Square')) {\n                annotSettings = this.pdfViewer.rectangleSettings;\n                // eslint-disable-next-line max-len\n            }\n            else if ((annotation.Subject === 'Circle' || annotation.Subject === 'Ellipse' || annotation.Subject === 'Oval')) {\n                annotSettings = this.pdfViewer.circleSettings;\n            }\n            else if (annotation.Subject === 'Polygon') {\n                annotSettings = this.pdfViewer.polygonSettings;\n            }\n        }\n        else if (annotation.AnnotType === 'shape_measure') {\n            // eslint-disable-next-line max-len\n            if ((annotation.Subject === 'Distance' || annotation.Subject === 'Distance calculation')) {\n                annotSettings = this.pdfViewer.distanceSettings;\n                // eslint-disable-next-line max-len\n            }\n            else if ((annotation.Subject === 'Perimeter' || annotation.Subject === 'Perimeter calculation')) {\n                annotSettings = this.pdfViewer.perimeterSettings;\n                // eslint-disable-next-line max-len\n            }\n            else if ((annotation.Subject === 'Area' || annotation.Subject === 'Area calculation')) {\n                annotSettings = this.pdfViewer.areaSettings;\n                // eslint-disable-next-line max-len\n            }\n            else if ((annotation.Subject === 'Radius' || annotation.Subject === 'Radius calculation')) {\n                annotSettings = this.pdfViewer.radiusSettings;\n                // eslint-disable-next-line max-len\n            }\n            else if ((annotation.Subject === 'Volume' || annotation.Subject === 'Volume calculation')) {\n                annotSettings = this.pdfViewer.volumeSettings;\n            }\n        }\n        return this.updateSettings(annotSettings);\n    };\n    /**\n     * @param annotationSettings\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.updateSettings = function (annotationSettings) {\n        var maxHeight = 0;\n        var maxWidth = 0;\n        var minHeight = 0;\n        var minWidth = 0;\n        var isLock = false;\n        var isPrint = true;\n        // eslint-disable-next-line\n        var settings = this.pdfViewer.annotationSettings;\n        if (annotationSettings.minWidth || annotationSettings.maxWidth || annotationSettings.minHeight || annotationSettings.maxHeight) {\n            maxHeight = annotationSettings.maxHeight ? annotationSettings.maxHeight : 2000;\n            maxWidth = annotationSettings.maxWidth ? annotationSettings.maxWidth : 2000;\n            minHeight = annotationSettings.minHeight ? annotationSettings.minHeight : 0;\n            minWidth = annotationSettings.minWidth ? annotationSettings.minWidth : 0;\n        }\n        else if (settings.minWidth || settings.maxWidth || settings.minHeight || settings.maxHeight) {\n            maxHeight = settings.maxHeight ? settings.maxHeight : 2000;\n            maxWidth = settings.maxWidth ? settings.maxWidth : 2000;\n            minHeight = settings.minHeight ? settings.minHeight : 0;\n            minWidth = settings.minWidth ? settings.minWidth : 0;\n        }\n        isLock = annotationSettings.isLock ? annotationSettings.isLock : settings.isLock ? settings.isLock : false;\n        isPrint = annotationSettings.isPrint;\n        return { minWidth: minWidth, maxWidth: maxWidth, minHeight: minHeight, maxHeight: maxHeight, isLock: isLock, isPrint: isPrint };\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.getOverlappedAnnotations = function (annotation, pageNumber) {\n        // eslint-disable-next-line\n        var pageCollections = this.getPageShapeAnnotations(pageNumber);\n        // eslint-disable-next-line\n        var selectedAnnotation;\n        for (var i = 0; i < pageCollections.length; i++) {\n            if (annotation.annotName === pageCollections[i].annotName) {\n                selectedAnnotation = pageCollections[i];\n                break;\n            }\n        }\n        // eslint-disable-next-line\n        var annotationCollection = this.findOverlappedAnnotations(selectedAnnotation, pageCollections);\n        return annotationCollection;\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.getPageShapeAnnotations = function (pageNumber) {\n        // eslint-disable-next-line\n        var pageCollections = [];\n        // eslint-disable-next-line\n        var inkObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_ink');\n        if (inkObject) {\n            var inkAnnotObject = JSON.parse(inkObject);\n            if (inkAnnotObject) {\n                var index = this.getPageCollection(inkAnnotObject, pageNumber);\n                if (inkAnnotObject[index]) {\n                    // eslint-disable-next-line\n                    var inkAnnotations = inkAnnotObject[index].annotations;\n                    if (inkAnnotations && inkAnnotations.length > 0) {\n                        for (var i = 0; i < inkAnnotations.length; i++) {\n                            pageCollections.push(inkAnnotations[i]);\n                        }\n                    }\n                }\n            }\n        }\n        // eslint-disable-next-line\n        var shapeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_shape');\n        if (shapeObject) {\n            var shapeAnnotObject = JSON.parse(shapeObject);\n            if (shapeAnnotObject) {\n                var index = this.getPageCollection(shapeAnnotObject, pageNumber);\n                if (shapeAnnotObject[index]) {\n                    // eslint-disable-next-line\n                    var shapeAnnotations = shapeAnnotObject[index].annotations;\n                    if (shapeAnnotations && shapeAnnotations.length > 0) {\n                        for (var i = 0; i < shapeAnnotations.length; i++) {\n                            pageCollections.push(shapeAnnotations[i]);\n                        }\n                    }\n                }\n            }\n        }\n        // eslint-disable-next-line\n        var measureObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_shape_measure');\n        if (measureObject) {\n            var measureAnnotationObject = JSON.parse(measureObject);\n            if (measureAnnotationObject) {\n                var index = this.getPageCollection(measureAnnotationObject, pageNumber);\n                if (measureAnnotationObject[index]) {\n                    // eslint-disable-next-line\n                    var measureAnnotations = measureAnnotationObject[index].annotations;\n                    if (measureAnnotations && measureAnnotations.length > 0) {\n                        for (var i = 0; i < measureAnnotations.length; i++) {\n                            pageCollections.push(measureAnnotations[i]);\n                        }\n                    }\n                }\n            }\n        }\n        // eslint-disable-next-line\n        var stampObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_stamp');\n        if (stampObject) {\n            var stampAnnotationObject = JSON.parse(stampObject);\n            if (stampAnnotationObject) {\n                var index = this.getPageCollection(stampAnnotationObject, pageNumber);\n                if (stampAnnotationObject[index]) {\n                    // eslint-disable-next-line\n                    var stampAnnotations = stampAnnotationObject[index].annotations;\n                    if (stampAnnotations && stampAnnotations.length > 0) {\n                        for (var i = 0; i < stampAnnotations.length; i++) {\n                            pageCollections.push(stampAnnotations[i]);\n                        }\n                    }\n                }\n            }\n        }\n        // eslint-disable-next-line\n        var freeTextObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_freetext');\n        if (freeTextObject) {\n            var freeTextAnnotationObject = JSON.parse(freeTextObject);\n            if (freeTextAnnotationObject) {\n                var index = this.getPageCollection(freeTextAnnotationObject, pageNumber);\n                if (freeTextAnnotationObject[index]) {\n                    // eslint-disable-next-line\n                    var freeTextAnnotations = freeTextAnnotationObject[index].annotations;\n                    if (freeTextAnnotations && freeTextAnnotations.length > 0) {\n                        for (var i = 0; i < freeTextAnnotations.length; i++) {\n                            pageCollections.push(freeTextAnnotations[i]);\n                        }\n                    }\n                }\n            }\n        }\n        // eslint-disable-next-line\n        var stickyObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_sticky');\n        if (stickyObject) {\n            var stickyNotesAnnotationObject = JSON.parse(stickyObject);\n            if (stickyNotesAnnotationObject) {\n                var index = this.getPageCollection(stickyNotesAnnotationObject, pageNumber);\n                if (stickyNotesAnnotationObject[index]) {\n                    // eslint-disable-next-line\n                    var stickyNotesAnnotations = stickyNotesAnnotationObject[index].annotations;\n                    if (stickyNotesAnnotations && stickyNotesAnnotations.length > 0) {\n                        for (var i = 0; i < stickyNotesAnnotations.length; i++) {\n                            pageCollections.push(stickyNotesAnnotations[i]);\n                        }\n                    }\n                }\n            }\n        }\n        // eslint-disable-next-line\n        var textMarkupObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');\n        if (textMarkupObject) {\n            var textMarkupAnnotationObject = JSON.parse(textMarkupObject);\n            if (textMarkupAnnotationObject) {\n                var index = this.getPageCollection(textMarkupAnnotationObject, pageNumber);\n                if (textMarkupAnnotationObject[index]) {\n                    // eslint-disable-next-line\n                    var textMarkupAnnotations = textMarkupAnnotationObject[index].annotations;\n                    if (textMarkupAnnotations && textMarkupAnnotations.length > 0) {\n                        for (var i = 0; i < textMarkupAnnotations.length; i++) {\n                            pageCollections.push(textMarkupAnnotations[i]);\n                        }\n                    }\n                }\n            }\n        }\n        return pageCollections;\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.findOverlappedAnnotations = function (annotation, pageCollections) {\n        this.overlappedAnnotations = [];\n        if (annotation && annotation.bounds) {\n            if (annotation.shapeAnnotationType === 'textMarkup') {\n                for (var i = 0; i < annotation.bounds.length; i++) {\n                    // eslint-disable-next-line\n                    var bounds = this.orderTextMarkupBounds(annotation.bounds[i]);\n                    this.calculateOverlappedAnnotationBounds(annotation, bounds, pageCollections);\n                }\n            }\n            else {\n                this.calculateOverlappedAnnotationBounds(annotation, annotation.bounds, pageCollections);\n            }\n        }\n        return this.overlappedAnnotations;\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.calculateOverlappedAnnotationBounds = function (annotation, bounds, pageCollections) {\n        // eslint-disable-next-line\n        var selectBounds = bounds;\n        if (annotation.shapeAnnotationType === 'Ink') {\n            selectBounds = { left: bounds.x, top: bounds.y, height: bounds.height, width: bounds.width };\n        }\n        // eslint-disable-next-line\n        var left = parseInt(selectBounds.left);\n        // eslint-disable-next-line\n        var top = parseInt(selectBounds.top);\n        // eslint-disable-next-line\n        var totalHeight = parseInt(selectBounds.top + selectBounds.height);\n        // eslint-disable-next-line\n        var totalWidth = parseInt(selectBounds.left + selectBounds.width);\n        for (var i = 0; i < pageCollections.length; i++) {\n            if (annotation.annotName === pageCollections[i].annotName) {\n                this.checkOverlappedCollections(pageCollections[i], this.overlappedAnnotations);\n            }\n            else {\n                var boundsCount = 1;\n                if (pageCollections[i].shapeAnnotationType === 'textMarkup') {\n                    boundsCount = pageCollections[i].bounds.length;\n                }\n                for (var j = 0; j < boundsCount; j++) {\n                    // eslint-disable-next-line\n                    var annotationBounds = void 0;\n                    // eslint-disable-next-line\n                    var annotationBoundsCollection = pageCollections[i].bounds;\n                    if (pageCollections[i].shapeAnnotationType === 'Ink') {\n                        // eslint-disable-next-line\n                        annotationBoundsCollection = { left: annotationBoundsCollection.x, top: annotationBoundsCollection.y, height: annotationBoundsCollection.height, width: annotationBoundsCollection.width };\n                    }\n                    if (pageCollections[i].shapeAnnotationType !== 'textMarkup' && boundsCount === 1) {\n                        annotationBounds = annotationBoundsCollection;\n                    }\n                    else {\n                        // eslint-disable-next-line\n                        annotationBounds = this.orderTextMarkupBounds(annotationBoundsCollection[j]);\n                    }\n                    if (annotationBounds) {\n                        var isOverlapped = false;\n                        // eslint-disable-next-line\n                        if (((left <= parseInt(annotationBounds.left)) && (totalWidth >= parseInt(annotationBounds.left))) || ((left <= parseInt(annotationBounds.left + annotationBounds.width)) && (totalWidth >= parseInt(annotationBounds.left + annotationBounds.width)))) {\n                            isOverlapped = true;\n                        }\n                        if (isOverlapped) {\n                            // eslint-disable-next-line\n                            if (((top <= parseInt(annotationBounds.top)) && (totalHeight >= parseInt(annotationBounds.top))) || ((top <= parseInt(annotationBounds.top + annotationBounds.height)) && (totalHeight >= parseInt(annotationBounds.top + annotationBounds.height)))) {\n                                isOverlapped = true;\n                            }\n                            else {\n                                isOverlapped = false;\n                            }\n                        }\n                        if (isOverlapped) {\n                            this.checkOverlappedCollections(pageCollections[i], this.overlappedAnnotations);\n                        }\n                        else {\n                            // eslint-disable-next-line\n                            if (((parseInt(annotationBounds.left) <= left) && (parseInt(annotationBounds.left + annotationBounds.width) >= left)) || ((totalWidth >= parseInt(annotationBounds.left)) && (totalWidth <= parseInt(annotationBounds.left + annotationBounds.width)))) {\n                                isOverlapped = true;\n                            }\n                            if (isOverlapped) {\n                                // eslint-disable-next-line\n                                if (((parseInt(annotationBounds.top) <= top) && parseInt(annotationBounds.top + annotationBounds.height) >= top) || ((totalHeight >= parseInt(annotationBounds.top)) && (totalHeight <= parseInt(annotationBounds.top + annotationBounds.height)))) {\n                                    isOverlapped = true;\n                                }\n                                else {\n                                    isOverlapped = false;\n                                }\n                            }\n                            if (isOverlapped) {\n                                this.checkOverlappedCollections(pageCollections[i], this.overlappedAnnotations);\n                            }\n                            else {\n                                // eslint-disable-next-line\n                                if (((left <= parseInt(annotationBounds.left)) && (totalWidth >= parseInt(annotationBounds.left))) || ((left <= parseInt(annotationBounds.left + annotationBounds.width)) && (totalWidth >= parseInt(annotationBounds.left + annotationBounds.width)))) {\n                                    isOverlapped = true;\n                                }\n                                if (isOverlapped) {\n                                    // eslint-disable-next-line\n                                    if (((parseInt(annotationBounds.top) <= top) && parseInt(annotationBounds.top + annotationBounds.height) >= top) || ((totalHeight >= parseInt(annotationBounds.top)) && (totalHeight <= parseInt(annotationBounds.top + annotationBounds.height)))) {\n                                        isOverlapped = true;\n                                    }\n                                    else {\n                                        isOverlapped = false;\n                                    }\n                                }\n                                if (isOverlapped) {\n                                    this.checkOverlappedCollections(pageCollections[i], this.overlappedAnnotations);\n                                }\n                                else {\n                                    // eslint-disable-next-line\n                                    if (((parseInt(annotationBounds.left) <= left) && (parseInt(annotationBounds.left + annotationBounds.width) >= left)) || ((totalWidth >= parseInt(annotationBounds.left)) && (totalWidth <= parseInt(annotationBounds.left + annotationBounds.width)))) {\n                                        isOverlapped = true;\n                                    }\n                                    if (isOverlapped) {\n                                        // eslint-disable-next-line\n                                        if (((top <= parseInt(annotationBounds.top)) && (totalHeight >= parseInt(annotationBounds.top))) || ((top <= parseInt(annotationBounds.top + annotationBounds.height)) && (totalHeight >= parseInt(annotationBounds.top + annotationBounds.height)))) {\n                                            isOverlapped = true;\n                                        }\n                                        else {\n                                            isOverlapped = false;\n                                        }\n                                    }\n                                    if (isOverlapped) {\n                                        this.checkOverlappedCollections(pageCollections[i], this.overlappedAnnotations);\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @param annotation\n     * @param pageNumber\n     * @param type\n     * @param annotation\n     * @param pageNumber\n     * @param type\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.findAnnotationMode = function (annotation, pageNumber, type) {\n        // eslint-disable-next-line\n        var importCollection = this.pdfViewer.viewerBase.importedAnnotation[pageNumber];\n        if (importCollection) {\n            // eslint-disable-next-line\n            var collection = void 0;\n            if (type === 'shape') {\n                collection = importCollection.shapeAnnotation;\n            }\n            else if (type === 'shape_measure') {\n                collection = importCollection.measureShapeAnnotation;\n            }\n            else if (type === 'freeText') {\n                collection = importCollection.freeTextAnnotation;\n            }\n            else if (type === 'stamp') {\n                collection = importCollection.stampAnnotations;\n            }\n            else if (type === 'sticky') {\n                collection = importCollection.stickyNotesAnnotation;\n            }\n            else if (type === 'textMarkup') {\n                collection = importCollection.textMarkupAnnotation;\n            }\n            if (collection) {\n                for (var i = 0; i < collection.length; i++) {\n                    if (collection[i].AnnotName === annotation.AnnotName) {\n                        return 'Imported Annotation';\n                    }\n                }\n            }\n        }\n        return 'Existing Annotation';\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.checkOverlappedCollections = function (annotation, overlappedCollections) {\n        if (overlappedCollections.length > 0) {\n            var isAdded = false;\n            for (var i = 0; i < overlappedCollections.length; i++) {\n                if (annotation.annotName === overlappedCollections[i].annotName && annotation.bounds === overlappedCollections[i].bounds) {\n                    isAdded = true;\n                    break;\n                }\n            }\n            if (!isAdded) {\n                overlappedCollections.push(annotation);\n            }\n        }\n        else {\n            overlappedCollections.push(annotation);\n        }\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.orderTextMarkupBounds = function (bounds) {\n        if (bounds.Left || bounds.Width) {\n            return { left: bounds.Left, top: bounds.Top, height: bounds.Height, width: bounds.Width };\n        }\n        else {\n            return { left: bounds.left, top: bounds.top, height: bounds.height, width: bounds.width };\n        }\n    };\n    /**\n     * @param annotation\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.updateModifiedDate = function (annotation) {\n        if (annotation.modifiedDate) {\n            annotation.modifiedDate = this.setAnnotationModifiedDate(annotation.modifiedDate);\n        }\n        if (annotation.comments && annotation.comments.length > 0) {\n            for (var i = 0; i < annotation.comments.length; i++) {\n                if (annotation.comments[i].modifiedDate) {\n                    annotation.comments[i].modifiedDate = this.setAnnotationModifiedDate(annotation.comments[i].modifiedDate);\n                    if (annotation.comments[i].review && annotation.comments[i].review.modifiedDate) {\n                        // eslint-disable-next-line max-len\n                        annotation.comments[i].review.modifiedDate = this.setAnnotationModifiedDate(annotation.comments[i].review.modifiedDate);\n                    }\n                }\n            }\n        }\n        if (annotation.review && annotation.review.modifiedDate) {\n            annotation.review.modifiedDate = this.setAnnotationModifiedDate(annotation.review.modifiedDate);\n        }\n    };\n    Annotation.prototype.setAnnotationModifiedDate = function (date) {\n        var modifiedTime;\n        var modifiedDateTime;\n        if (date !== '') {\n            // eslint-disable-next-line\n            var time = parseInt(date.split(' ')[1].split(':')[0]);\n            if (date.split(' ').length === 3) {\n                // eslint-disable-next-line max-len\n                modifiedTime = time + ':' + date.split(' ')[1].split(':')[1] + ':' + date.split(' ')[1].split(':')[2] + ' ' + date.split(' ')[2];\n            }\n            else {\n                if (time >= 12) {\n                    if (time === 12) {\n                        modifiedTime = time + ':' + date.split(' ')[1].split(':')[1] + ':' + date.split(' ')[1].split(':')[2] + ' PM';\n                    }\n                    else {\n                        // eslint-disable-next-line max-len\n                        modifiedTime = (time - 12) + ':' + date.split(' ')[1].split(':')[1] + ':' + date.split(' ')[1].split(':')[2] + ' PM';\n                    }\n                }\n                else {\n                    modifiedTime = time + ':' + date.split(' ')[1].split(':')[1] + ':' + date.split(' ')[1].split(':')[2] + ' AM';\n                }\n            }\n            // eslint-disable-next-line\n            var dateString = date.split(' ')[0];\n            // eslint-disable-next-line\n            var dateStringSpilt = date.split(',');\n            if (dateStringSpilt.length > 1) {\n                modifiedDateTime = dateString + (' ') + modifiedTime;\n            }\n            else {\n                modifiedDateTime = dateString + (', ') + modifiedTime;\n            }\n        }\n        else {\n            return date;\n        }\n        var modifiedDateToUTC = new Date(modifiedDateTime);\n        modifiedDateTime = modifiedDateToUTC.toISOString();\n        return modifiedDateTime;\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.clear = function () {\n        if (this.shapeAnnotationModule) {\n            this.shapeAnnotationModule.shapeCount = 0;\n        }\n        if (this.measureAnnotationModule) {\n            this.measureAnnotationModule.measureShapeCount = 0;\n        }\n        if (this.textMarkupAnnotationModule) {\n            this.textMarkupAnnotationModule.clear();\n        }\n        if (this.stickyNotesAnnotationModule) {\n            this.stickyNotesAnnotationModule.clear();\n        }\n        this.pdfViewer.refresh();\n        this.undoCommentsElement = [];\n        this.redoCommentsElement = [];\n        this.overlappedAnnotations = [];\n        this.previousIndex = null;\n        // eslint-disable-next-line max-len\n        if (this.pdfViewer.annotation && this.pdfViewer.annotation.stampAnnotationModule) {\n            this.pdfViewer.annotation.stampAnnotationModule.stampPageNumber = [];\n        }\n        if (this.pdfViewer.annotation && this.pdfViewer.annotation.freeTextAnnotationModule) {\n            this.pdfViewer.annotation.freeTextAnnotationModule.freeTextPageNumbers = [];\n            this.freeTextAnnotationModule.previousText = 'Type Here';\n        }\n        if (this.pdfViewer.annotation && this.pdfViewer.annotation.inkAnnotationModule) {\n            this.pdfViewer.annotation.inkAnnotationModule.inkAnnotationindex = [];\n        }\n        window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_shape');\n        window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_shape_measure');\n        window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_stamp');\n        window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_sticky');\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.retrieveAnnotationCollection = function () {\n        return this.pdfViewer.annotationCollection;\n    };\n    /**\n     * @param interaction\n     * @param annotation\n     * @param interaction\n     * @param annotation\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.checkAllowedInteractions = function (interaction, annotation) {\n        // eslint-disable-next-line\n        var annotationInteraction = this.updateAnnotationAllowedInteractions(annotation);\n        if (annotationInteraction && annotationInteraction.length > 0) {\n            for (var i = 0; i < annotationInteraction.length; i++) {\n                if (interaction === 'Select') {\n                    // eslint-disable-next-line max-len\n                    if (annotationInteraction[i] === 'Move' || annotationInteraction[i] === 'Resize' || annotationInteraction[i] === 'Delete' || annotationInteraction[i] === 'PropertyChange' || annotationInteraction[i] === 'Select') {\n                        return true;\n                    }\n                }\n                else {\n                    if (annotationInteraction[i] === interaction) {\n                        return true;\n                    }\n                }\n            }\n        }\n        return false;\n    };\n    /**\n     * @param menuObj\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.checkContextMenuDeleteItem = function (menuObj) {\n        // eslint-disable-next-line\n        var annotation = this.findCurrentAnnotation();\n        if (annotation && annotation.annotationSettings) {\n            // eslint-disable-next-line\n            if (annotation.annotationSettings.isLock) {\n                if (this.checkAllowedInteractions('Delete', annotation)) {\n                    menuObj.enableItems([this.pdfViewer.localeObj.getConstant('Delete Context')], true);\n                }\n                else {\n                    menuObj.enableItems([this.pdfViewer.localeObj.getConstant('Delete Context')], false);\n                }\n            }\n            else {\n                menuObj.enableItems([this.pdfViewer.localeObj.getConstant('Delete Context')], true);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.isEnableDelete = function () {\n        // eslint-disable-next-line\n        var annotation = this.findCurrentAnnotation();\n        if (annotation && annotation.annotationSettings) {\n            // eslint-disable-next-line\n            if (annotation.annotationSettings.isLock) {\n                if (this.checkAllowedInteractions('Delete', annotation)) {\n                    return true;\n                }\n                else {\n                    return false;\n                }\n            }\n            else {\n                return true;\n            }\n        }\n        return false;\n    };\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.findCurrentAnnotation = function () {\n        if (this.textMarkupAnnotationModule && this.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n            return this.textMarkupAnnotationModule.currentTextMarkupAnnotation;\n        }\n        if (this.pdfViewer.selectedItems.annotations && this.pdfViewer.selectedItems.annotations[0]) {\n            return this.pdfViewer.selectedItems.annotations[0];\n        }\n    };\n    /**\n     * @param annotation\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.updateAnnotationAllowedInteractions = function (annotation) {\n        // eslint-disable-next-line\n        var annotationInteraction = ['None'];\n        if (annotation) {\n            if (annotation.shapeAnnotationType === 'FreeText' && this.pdfViewer.freeTextSettings.allowedInteractions) {\n                // eslint-disable-next-line max-len\n                annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.freeTextSettings.allowedInteractions, annotation.allowedInteractions);\n            }\n            else if (annotation.shapeAnnotationType === 'Ink' && this.pdfViewer.inkAnnotationSettings.allowedInteractions) {\n                // eslint-disable-next-line max-len\n                annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.inkAnnotationSettings.allowedInteractions, annotation.allowedInteractions);\n            }\n            else if (annotation.shapeAnnotationType === 'StickyNotes' && this.pdfViewer.stickyNotesSettings.allowedInteractions) {\n                // eslint-disable-next-line max-len\n                annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.stickyNotesSettings.allowedInteractions, annotation.allowedInteractions);\n            }\n            else if (annotation.shapeAnnotationType === 'Stamp' && this.pdfViewer.stampSettings.allowedInteractions) {\n                // eslint-disable-next-line max-len\n                annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.stampSettings.allowedInteractions, annotation.allowedInteractions);\n            }\n            else if (annotation.shapeAnnotationType === 'Image' && this.pdfViewer.customStampSettings.allowedInteractions) {\n                // eslint-disable-next-line max-len\n                annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.customStampSettings.allowedInteractions, annotation.allowedInteractions);\n            }\n            else if (annotation.shapeAnnotationType === 'textMarkup') {\n                if (annotation.textMarkupAnnotationType === 'Highlight' && this.pdfViewer.highlightSettings.allowedInteractions) {\n                    // eslint-disable-next-line max-len\n                    annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.highlightSettings.allowedInteractions, annotation.allowedInteractions);\n                }\n                else if (annotation.textMarkupAnnotationType === 'Underline' && this.pdfViewer.underlineSettings.allowedInteractions) {\n                    // eslint-disable-next-line max-len\n                    annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.underlineSettings.allowedInteractions, annotation.allowedInteractions);\n                }\n                else if (annotation.textMarkupAnnotationType === 'Strikethrough' && this.pdfViewer.strikethroughSettings.allowedInteractions) {\n                    // eslint-disable-next-line max-len\n                    annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.strikethroughSettings.allowedInteractions, annotation.allowedInteractions);\n                }\n            }\n            else {\n                if (annotation.measureType !== '') {\n                    if (annotation.measureType === 'Distance' && this.pdfViewer.distanceSettings.allowedInteractions) {\n                        // eslint-disable-next-line max-len\n                        annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.distanceSettings.allowedInteractions, annotation.allowedInteractions);\n                    }\n                    else if (annotation.measureType === 'Perimeter' && this.pdfViewer.perimeterSettings.allowedInteractions) {\n                        // eslint-disable-next-line max-len\n                        annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.perimeterSettings.allowedInteractions, annotation.allowedInteractions);\n                    }\n                    else if (annotation.measureType === 'Radius' && this.pdfViewer.radiusSettings.allowedInteractions) {\n                        // eslint-disable-next-line max-len\n                        annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.radiusSettings.allowedInteractions, annotation.allowedInteractions);\n                    }\n                    else if (annotation.measureType === 'Area' && this.pdfViewer.areaSettings.allowedInteractions) {\n                        // eslint-disable-next-line max-len\n                        annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.areaSettings.allowedInteractions, annotation.allowedInteractions);\n                    }\n                    else if (annotation.measureType === 'Volume' && this.pdfViewer.volumeSettings.allowedInteractions) {\n                        // eslint-disable-next-line max-len\n                        annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.volumeSettings.allowedInteractions, annotation.allowedInteractions);\n                    }\n                }\n                else {\n                    if (annotation.shapeAnnotationType === 'Line' && this.pdfViewer.lineSettings.allowedInteractions) {\n                        // eslint-disable-next-line max-len\n                        annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.lineSettings.allowedInteractions, annotation.allowedInteractions);\n                        // eslint-disable-next-line max-len\n                    }\n                    else if ((annotation.shapeAnnotationType === 'Arrow' || annotation.shapeAnnotationType === 'LineWidthArrowHead') && this.pdfViewer.arrowSettings.allowedInteractions) {\n                        // eslint-disable-next-line max-len\n                        annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.arrowSettings.allowedInteractions, annotation.allowedInteractions);\n                        // eslint-disable-next-line max-len\n                    }\n                    else if ((annotation.shapeAnnotationType === 'Circle' || annotation.shapeAnnotationType === 'Ellipse' || annotation.shapeAnnotationType === 'Oval') && this.pdfViewer.circleSettings.allowedInteractions) {\n                        // eslint-disable-next-line max-len\n                        annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.circleSettings.allowedInteractions, annotation.allowedInteractions);\n                    }\n                    else if ((annotation.shapeAnnotationType === 'Rectangle' || annotation.shapeAnnotationType === 'Square') && this.pdfViewer.rectangleSettings.allowedInteractions) {\n                        // eslint-disable-next-line max-len\n                        annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.rectangleSettings.allowedInteractions, annotation.allowedInteractions);\n                    }\n                    else if (annotation.shapeAnnotationType === 'Polygon' && this.pdfViewer.polygonSettings.allowedInteractions) {\n                        // eslint-disable-next-line max-len\n                        annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.polygonSettings.allowedInteractions, annotation.allowedInteractions);\n                    }\n                }\n            }\n        }\n        return annotationInteraction;\n    };\n    /**\n     * @param annotation\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.checkIsLockSettings = function (annotation) {\n        // eslint-disable-next-line\n        var isLocked = false;\n        if (annotation) {\n            if (annotation.shapeAnnotationType === 'FreeText') {\n                isLocked = this.checkLockSettings(this.pdfViewer.freeTextSettings.isLock);\n            }\n            else if (annotation.shapeAnnotationType === 'Ink') {\n                // eslint-disable-next-line max-len\n                isLocked = this.checkLockSettings(this.pdfViewer.inkAnnotationSettings.isLock);\n            }\n            else if (annotation.shapeAnnotationType === 'StickyNotes') {\n                isLocked = this.checkLockSettings(this.pdfViewer.stickyNotesSettings.isLock);\n            }\n            else if (annotation.shapeAnnotationType === 'Stamp') {\n                isLocked = this.checkLockSettings(this.pdfViewer.stampSettings.isLock);\n            }\n            else if (annotation.shapeAnnotationType === 'Image') {\n                isLocked = this.checkLockSettings(this.pdfViewer.customStampSettings.isLock);\n            }\n            else if (annotation.shapeAnnotationType === 'textMarkup') {\n                if (annotation.textMarkupAnnotationType === 'Highlight') {\n                    // eslint-disable-next-line max-len\n                    isLocked = this.checkLockSettings(this.pdfViewer.highlightSettings.isLock);\n                }\n                else if (annotation.textMarkupAnnotationType === 'Underline') {\n                    // eslint-disable-next-line max-len\n                    isLocked = this.checkLockSettings(this.pdfViewer.underlineSettings.isLock);\n                }\n                else if (annotation.textMarkupAnnotationType === 'Strikethrough') {\n                    // eslint-disable-next-line max-len\n                    isLocked = this.checkLockSettings(this.pdfViewer.strikethroughSettings.isLock);\n                }\n            }\n            else {\n                if (annotation.measureType !== '') {\n                    if (annotation.measureType === 'Distance') {\n                        // eslint-disable-next-line max-len\n                        isLocked = this.checkLockSettings(this.pdfViewer.distanceSettings.isLock);\n                    }\n                    else if (annotation.measureType === 'Perimeter') {\n                        // eslint-disable-next-line max-len\n                        isLocked = this.checkLockSettings(this.pdfViewer.perimeterSettings.isLock);\n                    }\n                    else if (annotation.measureType === 'Radius') {\n                        // eslint-disable-next-line max-len\n                        isLocked = this.checkLockSettings(this.pdfViewer.radiusSettings.isLock);\n                    }\n                    else if (annotation.measureType === 'Area') {\n                        // eslint-disable-next-line max-len\n                        isLocked = this.checkLockSettings(this.pdfViewer.areaSettings.isLock);\n                    }\n                    else if (annotation.measureType === 'Volume') {\n                        // eslint-disable-next-line max-len\n                        isLocked = this.checkLockSettings(this.pdfViewer.volumeSettings.isLock);\n                    }\n                }\n                else {\n                    if (annotation.shapeAnnotationType === 'Line') {\n                        // eslint-disable-next-line max-len\n                        isLocked = this.checkLockSettings(this.pdfViewer.lineSettings.isLock);\n                        // eslint-disable-next-line max-len\n                    }\n                    else if ((annotation.shapeAnnotationType === 'Arrow' || annotation.shapeAnnotationType === 'LineWidthArrowHead')) {\n                        // eslint-disable-next-line max-len\n                        isLocked = this.checkLockSettings(this.pdfViewer.arrowSettings.isLock);\n                        // eslint-disable-next-line max-len\n                    }\n                    else if ((annotation.shapeAnnotationType === 'Circle' || annotation.shapeAnnotationType === 'Ellipse' || annotation.shapeAnnotationType === 'Oval')) {\n                        // eslint-disable-next-line max-len\n                        isLocked = this.checkLockSettings(this.pdfViewer.circleSettings.isLock);\n                    }\n                    else if ((annotation.shapeAnnotationType === 'Rectangle' || annotation.shapeAnnotationType === 'Square')) {\n                        // eslint-disable-next-line max-len\n                        isLocked = this.checkLockSettings(this.pdfViewer.rectangleSettings.isLock);\n                    }\n                    else if (annotation.shapeAnnotationType === 'Polygon') {\n                        // eslint-disable-next-line max-len\n                        isLocked = this.checkLockSettings(this.pdfViewer.polygonSettings.isLock);\n                    }\n                }\n            }\n        }\n        return isLocked;\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.checkLockSettings = function (locked) {\n        var islock = false;\n        if (locked || this.pdfViewer.annotationSettings.isLock) {\n            islock = true;\n        }\n        return islock;\n    };\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.restrictContextMenu = function () {\n        // eslint-disable-next-line\n        var isRestrict = false;\n        // eslint-disable-next-line\n        var annotation = this.findCurrentAnnotation();\n        if (annotation && this.checkIsLockSettings(annotation) && this.checkAllowedInteractions('Select', annotation)) {\n            isRestrict = true;\n        }\n        return isRestrict;\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.checkAllowedInteractionSettings = function (annotationInteraction, annotationAllowedInteraction) {\n        if (annotationAllowedInteraction) {\n            if (annotationAllowedInteraction.length === 1) {\n                if (annotationAllowedInteraction[0] !== 'None') {\n                    return annotationAllowedInteraction;\n                }\n            }\n            else {\n                return annotationAllowedInteraction;\n            }\n        }\n        if (annotationInteraction) {\n            if (annotationInteraction.length === 1) {\n                if (annotationInteraction[0] !== 'None') {\n                    return annotationInteraction;\n                }\n            }\n            else {\n                return annotationInteraction;\n            }\n        }\n        if (this.pdfViewer.annotationSettings.allowedInteractions) {\n            return this.pdfViewer.annotationSettings.allowedInteractions;\n        }\n        return ['None'];\n    };\n    /**\n     * @param value\n     * @param type\n     * @param value\n     * @param type\n     * @private\n     */\n    Annotation.prototype.getValue = function (value, type) {\n        type = !type ? 'hex' : type.toLowerCase();\n        if (value[0] === 'r') {\n            var cValue = this.convertRgbToNumberArray(value);\n            if (type === 'hex' || type === 'hexa') {\n                var hex = this.rgbToHex(cValue);\n                return type === 'hex' ? hex.slice(0, 7) : hex;\n            }\n            else {\n                if (type === 'hsv') {\n                    return this.convertToHsvString(this.rgbToHsv.apply(this, cValue.slice(0, 3)));\n                }\n                else {\n                    if (type === 'hsva') {\n                        return this.convertToHsvString(this.rgbToHsv.apply(this, cValue));\n                    }\n                    else {\n                        return 'null';\n                    }\n                }\n            }\n        }\n        else {\n            if (value[0] === 'h') {\n                var cValue = this.hsvToRgb.apply(this, this.convertRgbToNumberArray(value));\n                if (type === 'rgba') {\n                    return this.convertToRgbString(cValue);\n                }\n                else {\n                    if (type === 'hex' || type === 'hexa') {\n                        var hex = this.rgbToHex(cValue);\n                        return type === 'hex' ? hex.slice(0, 7) : hex;\n                    }\n                    else {\n                        if (type === 'rgb') {\n                            return this.convertToRgbString(cValue.slice(0, 3));\n                        }\n                        else {\n                            return 'null';\n                        }\n                    }\n                }\n            }\n            else {\n                value = this.roundValue(value);\n                var rgb = this.hexToRgb(value);\n                if (type === 'rgb' || type === 'hsv') {\n                    rgb = rgb.slice(0, 3);\n                }\n                if (type === 'rgba' || type === 'rgb') {\n                    return this.convertToRgbString(rgb);\n                }\n                else {\n                    if (type === 'hsva' || type === 'hsv') {\n                        return this.convertToHsvString(this.rgbToHsv.apply(this, rgb));\n                    }\n                    else {\n                        if (type === 'hex') {\n                            return value.slice(0, 7);\n                        }\n                        else {\n                            if (type === 'a') {\n                                return rgb[3].toString();\n                            }\n                            else {\n                                return 'null';\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    };\n    Annotation.prototype.convertRgbToNumberArray = function (value) {\n        // eslint-disable-next-line max-len\n        return (value.slice(value.indexOf('(') + 1, value.indexOf(')'))).split(',').map(function (n, i) {\n            return (i !== 3) ? parseInt(n, 10) : parseFloat(n);\n        });\n    };\n    Annotation.prototype.convertToRgbString = function (rgb) {\n        return rgb.length ? rgb.length === 4 ? 'rgba(' + rgb.join() + ')' : 'rgb(' + rgb.join() + ')' : '';\n    };\n    Annotation.prototype.convertToHsvString = function (hsv) {\n        return hsv.length === 4 ? 'hsva(' + hsv.join() + ')' : 'hsv(' + hsv.join() + ')';\n    };\n    Annotation.prototype.roundValue = function (value) {\n        if (!value) {\n            return '';\n        }\n        if (value[0] !== '#') {\n            value = '#' + value;\n        }\n        var len = value.length;\n        if (len === 4) {\n            value += 'f';\n            len = 5;\n        }\n        if (len === 5) {\n            var tempValue = '';\n            for (var i = 1, len_1 = value.length; i < len_1; i++) {\n                tempValue += (value.charAt(i) + value.charAt(i));\n            }\n            value = '#' + tempValue;\n            len = 9;\n        }\n        if (len === 7) {\n            value += 'ff';\n        }\n        return value;\n    };\n    Annotation.prototype.hexToRgb = function (hex) {\n        if (!hex) {\n            return [];\n        }\n        hex = hex.trim();\n        if (hex.length !== 9) {\n            hex = this.roundValue(hex);\n        }\n        var opacity = Number((parseInt(hex.slice(-2), 16) / 255).toFixed(2));\n        hex = hex.slice(1, 7);\n        var bigInt = parseInt(hex, 16);\n        var h = [];\n        h.push((bigInt >> 16) & 255);\n        h.push((bigInt >> 8) & 255);\n        h.push(bigInt & 255);\n        h.push(opacity);\n        return h;\n    };\n    Annotation.prototype.rgbToHsv = function (r, g, b, opacity) {\n        r /= 255;\n        g /= 255;\n        b /= 255;\n        var max = Math.max(r, g, b);\n        var min = Math.min(r, g, b);\n        var h;\n        var s;\n        var v = max;\n        var d = max - min;\n        s = max === 0 ? 0 : d / max;\n        if (max === min) {\n            h = 0;\n        }\n        else {\n            switch (max) {\n                case r:\n                    h = (g - b) / d + (g < b ? 6 : 0);\n                    break;\n                case g:\n                    h = (b - r) / d + 2;\n                    break;\n                case b:\n                    h = (r - g) / d + 4;\n                    break;\n            }\n            h /= 6;\n        }\n        var hsv = [Math.round(h * 360), Math.round(s * 1000) / 10, Math.round(v * 1000) / 10];\n        if (!isNullOrUndefined(opacity)) {\n            hsv.push(opacity);\n        }\n        return hsv;\n    };\n    Annotation.prototype.hsvToRgb = function (h, s, v, opacity) {\n        var r;\n        var g;\n        var b;\n        var i;\n        var f;\n        var p;\n        var q;\n        var t;\n        s /= 100;\n        v /= 100;\n        if (s === 0) {\n            r = g = b = v;\n            return [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255), opacity];\n        }\n        h /= 60;\n        i = Math.floor(h);\n        f = h - i;\n        p = v * (1 - s);\n        q = v * (1 - s * f);\n        t = v * (1 - s * (1 - f));\n        switch (i) {\n            case 0:\n                r = v;\n                g = t;\n                b = p;\n                break;\n            case 1:\n                r = q;\n                g = v;\n                b = p;\n                break;\n            case 2:\n                r = p;\n                g = v;\n                b = t;\n                break;\n            case 3:\n                r = p;\n                g = q;\n                b = v;\n                break;\n            case 4:\n                r = t;\n                g = p;\n                b = v;\n                break;\n            default:\n                r = v;\n                g = p;\n                b = q;\n        }\n        var rgb = [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)];\n        if (!isNullOrUndefined(opacity)) {\n            rgb.push(opacity);\n        }\n        return rgb;\n    };\n    Annotation.prototype.rgbToHex = function (rgb) {\n        // eslint-disable-next-line max-len\n        return rgb.length ? ('#' + this.hex(rgb[0]) + this.hex(rgb[1]) + this.hex(rgb[2]) +\n            (!isNullOrUndefined(rgb[3]) ? (rgb[3] !== 0 ? (Math.round(rgb[3] * 255) + 0x10000).toString(16).substr(-2) : '00') : '')) : '';\n    };\n    /**\n     * @param dataFormat\n     * @private\n     */\n    Annotation.prototype.exportAnnotationsAsStream = function (dataFormat) {\n        var _this = this;\n        if (this.pdfViewer.annotationModule) {\n            var isAnnotations = this.pdfViewer.viewerBase.updateExportItem();\n            if (isAnnotations) {\n                return new Promise(function (resolve, reject) {\n                    _this.pdfViewer.viewerBase.createRequestForExportAnnotations(true, dataFormat, true).then(function (value) {\n                        resolve(value);\n                    });\n                });\n            }\n        }\n        return null;\n    };\n    Annotation.prototype.hex = function (x) {\n        if (!isNullOrUndefined(x)) {\n            return ('0' + x.toString(16)).slice(-2);\n        }\n        else {\n            return '0';\n        }\n    };\n    /**\n     * @param obj\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.cloneObject = function (obj) {\n        return JSON.parse(JSON.stringify(obj));\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.destroy = function () {\n        this.destroyPropertiesWindow();\n        this.textMarkupAnnotationModule.clear();\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.getModuleName = function () {\n        return 'Annotation';\n    };\n    /**\n     * Get vertex points properties\n     * @private\n     */\n    Annotation.prototype.getVertexPointsXY = function (points) {\n        var vertexPoints = [];\n        //Converting points model into vertex property\n        for (var j = 0; j < points.length; j++) {\n            vertexPoints[j] = { X: points[j].x, Y: points[j].y };\n        }\n        return vertexPoints;\n    };\n    /**\n     * Method used to add annotations using program.\n     *\n     * @param annotationType - It describes type of annotation object.\n     * @param options -  It describes about the annotation objects and it's property.\n     * @param dynamicStampItem - It describe which type of dynamic stamp.\n     * @param signStampItem - It describe which type of sign stamp.\n     * @param standardBusinessStampItem - It describe which type of standard business stamp.\n     * @returns void\n     */\n    Annotation.prototype.addAnnotation = function (annotationType, options, dynamicStampItem, signStampItem, standardBusinessStampItem) {\n        //Initialize the bounds and pageNumber\n        var offset = { x: 1, y: 1 };\n        var pageNumber = 0;\n        if (options) {\n            if (options.pageNumber && options.pageNumber > 0)\n                pageNumber = options.pageNumber ? options.pageNumber - 1 : 0;\n        }\n        //Initialize the pdf annotation object array\n        var annotationObject = null;\n        var pdfAnnotation = [];\n        this.pdfViewer.annotation.triggerAnnotationUnselectEvent();\n        //Seperate the annotation type with it's method\n        if (annotationType == 'FreeText') {\n            pdfAnnotation[pageNumber] = this.pdfViewer.annotation.freeTextAnnotationModule.updateAddAnnotationDetails(options, offset);\n            this.pdfViewer.annotation.freeTextAnnotationModule.isAddAnnotationProgramatically = true;\n        }\n        else if (annotationType == 'StickyNotes') {\n            pdfAnnotation[pageNumber] = this.pdfViewer.annotation.stickyNotesAnnotationModule.updateAddAnnotationDetails(options, offset);\n            this.pdfViewer.annotation.stickyNotesAnnotationModule.isAddAnnotationProgramatically = true;\n        }\n        else if (annotationType == 'Highlight' || annotationType == 'Underline' || annotationType == 'Strikethrough') {\n            if (annotationType == 'Highlight')\n                annotationObject = options;\n            else if (annotationType == 'Underline')\n                annotationObject = options;\n            else if (annotationType == 'Strikethrough')\n                annotationObject = options;\n            pdfAnnotation[pageNumber] = this.pdfViewer.annotation.textMarkupAnnotationModule.updateAddAnnotationDetails(annotationType, annotationObject);\n            this.pdfViewer.annotation.textMarkupAnnotationModule.isAddAnnotationProgramatically = true;\n        }\n        else if (annotationType === 'Line' || annotationType === 'Arrow' || annotationType === 'Rectangle' || annotationType === 'Circle' || annotationType === 'Polygon') {\n            if (annotationType == 'Line')\n                annotationObject = options;\n            else if (annotationType == 'Arrow')\n                annotationObject = options;\n            else if (annotationType == 'Rectangle')\n                annotationObject = options;\n            else if (annotationType == 'Circle')\n                annotationObject = options;\n            else if (annotationType == 'Polygon')\n                annotationObject = options;\n            pdfAnnotation[pageNumber] = this.pdfViewer.annotation.shapeAnnotationModule.updateAddAnnotationDetails(annotationType, annotationObject, offset);\n            this.pdfViewer.annotation.shapeAnnotationModule.isAddAnnotationProgramatically = true;\n        }\n        else if (annotationType === 'Distance' || annotationType === 'Perimeter' || annotationType === 'Area' || annotationType === 'Radius' || annotationType === 'Volume') {\n            if (annotationType == 'Distance')\n                annotationObject = options;\n            else if (annotationType == 'Perimeter')\n                annotationObject = options;\n            else if (annotationType == 'Area')\n                annotationObject = options;\n            else if (annotationType == 'Radius')\n                annotationObject = options;\n            else if (annotationType == 'Volume')\n                annotationObject = options;\n            pdfAnnotation[pageNumber] = this.pdfViewer.annotation.measureAnnotationModule.updateAddAnnotationDetails(annotationType, annotationObject, offset);\n            this.pdfViewer.annotation.measureAnnotationModule.isAddAnnotationProgramatically = true;\n        }\n        else if (annotationType === 'Stamp') {\n            if (options && options.customStamps) {\n                pdfAnnotation[pageNumber] = this.pdfViewer.annotation.stampAnnotationModule.updateAddAnnotationDetails(options, offset, pageNumber, dynamicStampItem, signStampItem, standardBusinessStampItem);\n            }\n            else {\n                pdfAnnotation[pageNumber] = this.pdfViewer.annotation.stampAnnotationModule.updateAddAnnotationDetails(options, offset, pageNumber, dynamicStampItem, signStampItem, standardBusinessStampItem);\n            }\n            this.pdfViewer.annotation.stampAnnotationModule.isAddAnnotationProgramatically = true;\n        }\n        else if (annotationType === 'Ink') {\n            pdfAnnotation[pageNumber] = this.pdfViewer.annotation.inkAnnotationModule.updateAddAnnotationDetails(options, offset, pageNumber);\n            this.pdfViewer.annotation.inkAnnotationModule.isAddAnnotationProgramatically = true;\n        }\n        //Annotation rendering can be done with the import annotation method.\n        var pdf = { pdfAnnotation: pdfAnnotation };\n        this.pdfViewerBase.isAddAnnotation = true;\n        this.pdfViewerBase.importAnnotations(pdf);\n        this.pdfViewerBase.isAddAnnotation = false;\n    };\n    /**\n     * @param annotation\n     * @private\n     */\n    Annotation.prototype.triggerAnnotationAddEvent = function (annotation) {\n        var annotationType = annotation.shapeAnnotationType;\n        if (annotationType === 'Stamp' || annotationType === 'Image' || annotationType === 'Path' || annotationType === 'FreeText' || annotationType === 'StickyNotes' || annotationType === 'Ink') {\n            var settings = void 0;\n            if (annotationType === 'FreeText') {\n                settings = {\n                    opacity: annotation.opacity, borderColor: annotation.strokeColor, borderWidth: annotation.thickness, author: annotation.author, subject: annotation.subject, modifiedDate: annotation.modifiedDate,\n                    fillColor: annotation.fillColor, fontSize: annotation.fontSize, width: annotation.bounds.width, height: annotation.bounds.height, fontColor: annotation.fontColor, fontFamily: annotation.fontFamily, defaultText: annotation.dynamicText, fontStyle: annotation.font, textAlignment: annotation.textAlign\n                };\n            }\n            else {\n                settings = {\n                    opacity: annotation.opacity, fillColor: annotation.fillColor, strokeColor: annotation.strokeColor,\n                    thickness: annotation.thickness, author: annotation.author, subject: annotation.subject,\n                    modifiedDate: annotation.modifiedDate, data: annotation.data\n                };\n            }\n            // eslint-disable-next-line\n            var bounds = { left: annotation.bounds.x, top: annotation.bounds.y, width: annotation.bounds.width, height: annotation.bounds.height };\n            var type = this.getAnnotationType(annotation.shapeAnnotationType, annotation.measureType);\n            // eslint-disable-next-line max-len\n            this.pdfViewer.fireAnnotationAdd(annotation.pageIndex, annotation.annotName, type, bounds, settings);\n        }\n        else if (annotationType === 'SignatureText' || annotationType === 'SignatureImage' || annotationType === 'HandWrittenSignature') {\n            // eslint-disable-next-line\n            var bounds = { left: annotation.bounds.x, top: annotation.bounds.y, width: annotation.bounds.width, height: annotation.bounds.height };\n            // eslint-disable-next-line max-len\n            this.pdfViewer.fireSignatureAdd(annotation.pageIndex, annotation.signatureName, annotation.shapeAnnotationType, bounds, annotation.opacity, annotation.strokeColor, annotation.thickness, annotation.data);\n        }\n        else {\n            // eslint-disable-next-line\n            var setting = {\n                opacity: annotation.opacity, fillColor: annotation.fillColor, strokeColor: annotation.strokeColor,\n                thickness: annotation.thickness, author: annotation.author, subject: annotation.subject,\n                modifiedDate: annotation.modifiedDate\n            };\n            var bounds = { left: annotation.bounds.x, top: annotation.bounds.y, width: annotation.bounds.width, height: annotation.bounds.height };\n            var type = this.getAnnotationType(annotation.shapeAnnotationType, annotation.measureType);\n            if (type === 'Line' || type === 'Arrow' || type === 'Distance' || type === 'Perimeter') {\n                setting.lineHeadStartStyle = this.getArrowString(annotation.sourceDecoraterShapes);\n                setting.lineHeadEndStyle = this.getArrowString(annotation.taregetDecoraterShapes);\n                setting.borderDashArray = annotation.borderDashArray;\n            }\n            var labelSettings = void 0;\n            if (this.pdfViewer.enableShapeLabel) {\n                labelSettings = {\n                    // eslint-disable-next-line max-len\n                    fontColor: annotation.fontColor, fontSize: annotation.fontSize, fontFamily: annotation.fontFamily,\n                    opacity: annotation.labelOpacity, labelContent: annotation.labelContent, fillColor: annotation.labelFillColor\n                };\n                // eslint-disable-next-line max-len\n                this.pdfViewer.fireAnnotationAdd(annotation.pageIndex, annotation.annotName, type, bounds, setting, null, null, null, labelSettings);\n            }\n            else {\n                // eslint-disable-next-line max-len\n                this.pdfViewer.fireAnnotationAdd(annotation.pageIndex, annotation.annotName, type, bounds, setting);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.triggerAnnotationUnselectEvent = function () {\n        if (this.pdfViewer.selectedItems.annotations && this.pdfViewer.selectedItems.annotations[0]) {\n            var annotation = this.pdfViewer.selectedItems.annotations[0];\n            if (annotation.shapeAnnotationType !== 'HandWrittenSignature' && annotation.shapeAnnotationType !== 'SignatureText' && annotation.shapeAnnotationType !== 'SignatureImage' && annotation.shapeAnnotationType !== 'Path') {\n                this.pdfViewer.fireAnnotationUnSelect(annotation.annotName, annotation.pageIndex, annotation);\n                this.pdfViewer.clearSelection(annotation.pageIndex);\n            }\n        }\n    };\n    /**\n     * @private\n    */\n    Annotation.prototype.updateFontFamilyRenderSize = function (currentAnnotation, currentValue) {\n        var freeTextAnnotation = this.freeTextAnnotationModule;\n        freeTextAnnotation.inputBoxElement.style.fontFamily = currentValue;\n        freeTextAnnotation.autoFitFreeText();\n        var zoomFactor = this.pdfViewerBase.getZoomFactor();\n        var padding = parseFloat(freeTextAnnotation.inputBoxElement.style.paddingLeft);\n        var inputEleHeight = currentAnnotation.bounds.height * zoomFactor;\n        var characterLength = 8;\n        var inputEleWidth = parseFloat(freeTextAnnotation.inputBoxElement.style.width) - characterLength;\n        inputEleWidth = ((inputEleWidth) / zoomFactor);\n        inputEleHeight = ((inputEleHeight) / zoomFactor);\n        var heightDiff = (inputEleHeight - currentAnnotation.bounds.height);\n        var y = undefined;\n        if (heightDiff > 0) {\n            y = currentAnnotation.wrapper.offsetY + (heightDiff / 2);\n            y = y > 0 ? y : undefined;\n        }\n        else {\n            heightDiff = Math.abs(heightDiff);\n            y = currentAnnotation.wrapper.offsetY - (heightDiff / 2);\n            y = y > 0 ? y : undefined;\n        }\n        var widthDiff = (inputEleWidth - currentAnnotation.bounds.width);\n        var x = undefined;\n        if (widthDiff > 0) {\n            x = currentAnnotation.wrapper.offsetX + (widthDiff / 2);\n            x = x > 0 ? x : undefined;\n        }\n        else {\n            widthDiff = Math.abs(widthDiff);\n            x = currentAnnotation.wrapper.offsetX - (widthDiff / 2);\n        }\n        currentAnnotation.bounds.width = inputEleWidth;\n        currentAnnotation.bounds.height = inputEleHeight;\n        this.pdfViewer.nodePropertyChange(currentAnnotation, { fontFamily: currentValue, bounds: { width: currentAnnotation.bounds.width, height: currentAnnotation.bounds.height, y: y, x: x } });\n        this.pdfViewer.renderSelector(currentAnnotation.pageIndex, this.pdfViewer.annotationSelectorSettings);\n        this.modifyInCollections(currentAnnotation, 'bounds');\n    };\n    Annotation.prototype.updateCanvas = function (canvas, pageWidth, pageHeight, pageNumber) {\n        var ratio = this.pdfViewerBase.getZoomRatio();\n        canvas.width = pageWidth * ratio;\n        canvas.height = pageHeight * ratio;\n        canvas.style.width = pageWidth + 'px';\n        canvas.style.height = pageHeight + 'px';\n        canvas.style.position = 'absolute';\n        canvas.style.zIndex = '1';\n        this.pdfViewerBase.applyElementStyles(canvas, pageNumber);\n    };\n    return Annotation;\n}());\nexport { Annotation };\n"],"mappings":"AAAA,SAASA,oBAAoB,EAAEC,eAAe,EAAEC,eAAe,EAAEC,qBAAqB,EAAEC,iBAAiB,EAAEC,aAAa,EAAEC,kBAAkB,EAAEC,gBAAgB,EAAEC,aAAa,EAAEC,yBAAyB,QAAQ,UAAU;AAC1N,SAASC,aAAa,EAAEC,OAAO,EAAEC,iBAAiB,EAAEC,QAAQ,QAAQ,sBAAsB;AAC1F,SAASC,cAAc,EAAEC,MAAM,EAAEC,WAAW,QAAQ,wBAAwB;AAC5E,SAASC,MAAM,QAAQ,wBAAwB;AAC/C,SAASC,cAAc,QAAQ,8BAA8B;AAC7D,SAASC,eAAe,EAAEC,oBAAoB,QAAQ,0BAA0B;AAChF,SAASC,YAAY,EAAEC,WAAW,QAAQ,yBAAyB;AACnE,SAASC,eAAe,EAAEC,QAAQ,EAAEC,QAAQ,EAAEC,UAAU,EAAEC,WAAW,QAAQ,kBAAkB;AAC/F,SAASC,mBAAmB,EAAEC,iBAAiB,EAAEC,oBAAoB,EAAEC,oBAAoB,QAAQ,2BAA2B;AAC9H,SAASC,kBAAkB,QAAQ,wBAAwB;AAC3D,SAASC,YAAY,QAAQ,iBAAiB;AAC9C,SAASC,aAAa,QAAQ,gCAAgC;AAC9D;AACA;AACA;AACA,IAAIC,UAAU,GAAG,aAAe,YAAY;EACxC;AACJ;AACA;AACA;AACA;AACA;AACA;EACI,SAASA,UAAUA,CAACC,SAAS,EAAEC,UAAU,EAAE;IACvC,IAAI,CAACC,gBAAgB,GAAG,KAAK;IAC7B,IAAI,CAACC,YAAY,GAAG,KAAK;IACzB,IAAI,CAACC,kBAAkB,GAAG,IAAI;IAC9B,IAAI,CAACC,sBAAsB,GAAG,KAAK;IACnC,IAAI,CAACC,mCAAmC,GAAG,EAAE;IAC7C;AACR;AACA;IACQ,IAAI,CAACC,aAAa,GAAG,KAAK;IAC1B;AACR;AACA;IACQ,IAAI,CAACC,gBAAgB,GAAG,EAAE;IAC1B;AACR;AACA;IACQ,IAAI,CAACC,cAAc,GAAG,EAAE;IACxB;AACR;AACA;IACQ,IAAI,CAACC,kBAAkB,GAAG,KAAK;IAC/B;AACR;AACA;IACQ,IAAI,CAACC,mBAAmB,GAAG,EAAE;IAC7B;AACR;AACA;IACQ,IAAI,CAACC,mBAAmB,GAAG,EAAE;IAC7B;AACR;AACA;IACQ,IAAI,CAACC,kBAAkB,GAAG,IAAI;IAC9B;AACR;AACA;IACQ,IAAI,CAACC,oBAAoB,GAAG,KAAK;IACjC;AACR;AACA;IACQ,IAAI,CAACC,mBAAmB,GAAG,IAAI;IAC/B,IAAI,CAACC,aAAa,GAAG,IAAI;IACzB;IACA,IAAI,CAACC,qBAAqB,GAAG,EAAE;IAC/B;AACR;AACA;IACQ;IACA,IAAI,CAACC,qBAAqB,GAAG,EAAE;IAC/B;AACR;AACA;IACQ;IACA,IAAI,CAACC,gBAAgB,GAAG,KAAK;IAC7B;AACR;AACA;IACQ;IACA,IAAI,CAACC,2BAA2B,GAAG,EAAE;IACrC,IAAI,CAACpB,SAAS,GAAGA,SAAS;IAC1B,IAAI,CAACqB,aAAa,GAAGpB,UAAU;IAC/B,IAAI,IAAI,CAACD,SAAS,CAACsB,0BAA0B,EAAE;MAC3C,IAAI,CAACC,0BAA0B,GAAG,IAAI3D,oBAAoB,CAAC,IAAI,CAACoC,SAAS,EAAE,IAAI,CAACqB,aAAa,CAAC;IAClG;IACA,IAAI,IAAI,CAACrB,SAAS,CAACwB,qBAAqB,EAAE;MACtC,IAAI,CAACC,qBAAqB,GAAG,IAAI5D,eAAe,CAAC,IAAI,CAACmC,SAAS,EAAE,IAAI,CAACqB,aAAa,CAAC;IACxF;IACA,IAAI,IAAI,CAACrB,SAAS,CAAC0B,uBAAuB,EAAE;MACxC,IAAI,CAACC,uBAAuB,GAAG,IAAI3D,iBAAiB,CAAC,IAAI,CAACgC,SAAS,EAAE,IAAI,CAACqB,aAAa,CAAC;IAC5F;IACA,IAAI,CAACO,qBAAqB,GAAG,IAAI9D,eAAe,CAAC,IAAI,CAACkC,SAAS,EAAE,IAAI,CAACqB,aAAa,CAAC;IACpF,IAAI,CAACQ,2BAA2B,GAAG,IAAI9D,qBAAqB,CAAC,IAAI,CAACiC,SAAS,EAAE,IAAI,CAACqB,aAAa,CAAC;IAChG,IAAI,CAACS,wBAAwB,GAAG,IAAIlC,kBAAkB,CAAC,IAAI,CAACI,SAAS,EAAE,IAAI,CAACqB,aAAa,CAAC;IAC1F,IAAI,CAACU,kBAAkB,GAAG,IAAIlC,YAAY,CAAC,IAAI,CAACG,SAAS,EAAE,IAAI,CAACqB,aAAa,CAAC;IAC9E,IAAI,CAACW,mBAAmB,GAAG,IAAI/D,aAAa,CAAC,IAAI,CAAC+B,SAAS,EAAE,IAAI,CAACqB,aAAa,CAAC;EACpF;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI;EACAtB,UAAU,CAACkC,SAAS,CAACC,iBAAiB,GAAG,UAAUC,IAAI,EAAEC,gBAAgB,EAAEC,aAAa,EAAEC,yBAAyB,EAAE;IACjH,IAAIC,mBAAmB,GAAG,IAAI,CAACvC,SAAS,CAACwC,sBAAsB;IAC/D,IAAI,CAACxC,SAAS,CAACyC,uBAAuB,CAAC,KAAK,CAAC;IAC7C,IAAI,IAAI,CAACzC,SAAS,CAAC0C,IAAI,KAAK,OAAO,IAAI,IAAI,CAAC1C,SAAS,CAAC2C,aAAa,EAAE;MACjE,IAAI,CAAC3C,SAAS,CAAC2C,aAAa,CAACC,gBAAgB,CAAC,CAAC;IACnD;IACA,IAAI,IAAI,CAAC5C,SAAS,CAAC2C,aAAa,IAAI,IAAI,CAAC3C,SAAS,CAAC2C,aAAa,CAACE,uBAAuB,EAAE;MACtF,IAAI,CAAC7C,SAAS,CAAC2C,aAAa,CAACE,uBAAuB,CAACC,kBAAkB,CAAC,CAAC;IAC7E;IACAX,IAAI,KAAK,MAAM,GAAG,IAAI,CAACY,8BAA8B,CAAC,CAAC,GAAG,IAAI;IAC9D,IAAI,CAAC/C,SAAS,CAAC0C,IAAI,GAAG,EAAE;IACxB,IAAI,IAAI,CAAC1C,SAAS,CAAC2C,aAAa,EAAE;MAC9B,IAAI,CAAC3C,SAAS,CAAC2C,aAAa,CAACK,yBAAyB,CAAC,CAAC;IAC5D;IACA,IAAIb,IAAI,KAAK,MAAM,EAAE;MACjB,IAAI,CAACc,mBAAmB,CAAC,CAAC;IAC9B,CAAC,MACI,IAAId,IAAI,KAAK,WAAW,IAAIA,IAAI,KAAK,eAAe,IAAIA,IAAI,KAAK,WAAW,EAAE;MAC/E,IAAI,IAAI,CAACZ,0BAA0B,EAAE;QACjC,IAAI,CAACA,0BAA0B,CAAC2B,qBAAqB,GAAG,KAAK;QAC7D,IAAI,CAAC3B,0BAA0B,CAAC4B,yBAAyB,CAAChB,IAAI,CAACiB,QAAQ,CAAC,CAAC,CAAC;MAC9E;IACJ,CAAC,MACI,IAAIjB,IAAI,KAAK,MAAM,IAAIA,IAAI,KAAK,OAAO,IAAIA,IAAI,KAAK,WAAW,IAAIA,IAAI,KAAK,QAAQ,IAAIA,IAAI,KAAK,SAAS,EAAE;MAC7G,IAAI,IAAI,CAACV,qBAAqB,EAAE;QAC5B,IAAI,CAACA,qBAAqB,CAAC4B,iBAAiB,CAAClB,IAAI,CAAC;MACtD;IACJ,CAAC,MACI,IAAIA,IAAI,KAAK,UAAU,IAAIA,IAAI,KAAK,WAAW,IAAIA,IAAI,KAAK,MAAM,IAAIA,IAAI,KAAK,QAAQ,IAAIA,IAAI,KAAK,QAAQ,EAAE;MAC/G,IAAI,IAAI,CAACR,uBAAuB,EAAE;QAC9B,IAAI,CAACA,uBAAuB,CAAC0B,iBAAiB,CAAClB,IAAI,CAAC;MACxD;IACJ,CAAC,MACI,IAAIA,IAAI,KAAK,UAAU,IAAI,IAAI,CAACL,wBAAwB,EAAE;MAC3D,IAAI,CAACA,wBAAwB,CAACuB,iBAAiB,CAAC,UAAU,CAAC;MAC3D,IAAI,CAACvB,wBAAwB,CAACwB,kBAAkB,GAAG,IAAI;MACvD,IAAI,CAACxB,wBAAwB,CAACyB,eAAe,GAAG,IAAI;IACxD,CAAC,MACI,IAAIpB,IAAI,KAAK,sBAAsB,EAAE;MACtC,IAAI,CAACd,aAAa,CAACmC,eAAe,CAACtB,iBAAiB,CAAC,CAAC;IAC1D,CAAC,MACI,IAAIC,IAAI,KAAK,SAAS,EAAE;MACzB,IAAI,CAACd,aAAa,CAACmC,eAAe,CAACC,cAAc,CAAC,CAAC;IACvD,CAAC,MACI,IAAItB,IAAI,KAAK,KAAK,EAAE;MACrB,IAAI,CAACH,mBAAmB,CAACE,iBAAiB,CAAC,CAAC;IAChD,CAAC,MACI,IAAIC,IAAI,KAAK,aAAa,EAAE;MAC7B,IAAI,CAACd,aAAa,CAACqC,kBAAkB,GAAG,IAAI;MAC5C,IAAI,CAACrC,aAAa,CAACsC,YAAY,GAAG,IAAI;MACtC;MACA,IAAIC,OAAO,GAAGC,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAC9D,SAAS,CAAC+D,OAAO,CAACC,EAAE,GAAG,WAAW,IAAI,IAAI,CAAC3C,aAAa,CAAC4C,iBAAiB,GAAG,CAAC,CAAC,CAAC;MAC3H,IAAIL,OAAO,EAAE;QACTA,OAAO,CAACM,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAAClE,SAAS,CAACmE,gBAAgB,CAACtC,2BAA2B,CAACuC,SAAS,CAACC,IAAI,CAAC,IAAI,CAAC,CAAC;MAC3H;IACJ,CAAC,MACI,IAAIlC,IAAI,KAAK,OAAO,EAAE;MACvB,IAAI,CAACnC,SAAS,CAACsE,UAAU,CAAC1C,qBAAqB,CAAC2C,cAAc,GAAG,IAAI;MACrE,IAAI,CAACvE,SAAS,CAACmE,gBAAgB,CAACvC,qBAAqB,CAAC4C,oBAAoB,GAAG,IAAI;MACjF,IAAI,CAACnD,aAAa,CAACoD,UAAU,GAAG,IAAI;MACpC,IAAIrC,gBAAgB,EAAE;QAClB;QACA,IAAIsC,SAAS,GAAGvG,gBAAgB,CAACiE,gBAAgB,CAAC;QAClD,IAAI,CAACf,aAAa,CAACsD,cAAc,GAAG,IAAI;QACxC,IAAI,CAAC/C,qBAAqB,CAACgD,8BAA8B,CAACF,SAAS,CAAC;MACxE,CAAC,MACI,IAAIrC,aAAa,EAAE;QACpB;QACA,IAAIqC,SAAS,GAAGtG,aAAa,CAACiE,aAAa,CAAC;QAC5C,IAAI,CAAChB,aAAa,CAACsD,cAAc,GAAG,KAAK;QACzC,IAAI,CAAC/C,qBAAqB,CAACiD,uBAAuB,CAACH,SAAS,CAAC;MACjE,CAAC,MACI,IAAIpC,yBAAyB,EAAE;QAChC;QACA,IAAIoC,SAAS,GAAGrG,yBAAyB,CAACiE,yBAAyB,CAAC;QACpE,IAAI,CAACjB,aAAa,CAACsD,cAAc,GAAG,KAAK;QACzC,IAAI,CAAC/C,qBAAqB,CAACiD,uBAAuB,CAACH,SAAS,CAAC;MACjE;IACJ;IACA,IAAI,CAAC1E,SAAS,CAACyC,uBAAuB,CAACF,mBAAmB,EAAE,IAAI,CAAC;IACjE,IAAI,CAAClB,aAAa,CAACyD,qBAAqB,CAAC,CAAC;EAC9C,CAAC;EACD/E,UAAU,CAACkC,SAAS,CAAC8C,oBAAoB,GAAG,UAAUC,YAAY,EAAE;IAChE,IAAIA,YAAY,EAAE;MACd,IAAI,CAAC3E,sBAAsB,GAAG,IAAI;MAClC,IAAI,CAACD,kBAAkB,GAAG,KAAK;MAC/B,IAAI,CAAC6E,gBAAgB,CAACD,YAAY,CAAC;MACnC,IAAI,CAACE,gBAAgB,CAAC,CAAC;MACvB,IAAI,CAAC7E,sBAAsB,GAAG,KAAK;IACvC;EACJ,CAAC;EACDN,UAAU,CAACkC,SAAS,CAACgB,mBAAmB,GAAG,YAAY;IACnD,IAAI,IAAI,CAAC1B,0BAA0B,EAAE;MACjC,IAAI,CAACA,0BAA0B,CAAC4D,0BAA0B,GAAG,KAAK;IACtE;IACA,IAAI,IAAI,CAACrD,wBAAwB,EAAE;MAC/B,IAAI,CAACA,wBAAwB,CAACwB,kBAAkB,GAAG,KAAK;MACxD,IAAI,CAACxB,wBAAwB,CAACyB,eAAe,GAAG,KAAK;IACzD;IACA,IAAI,IAAI,CAAClC,aAAa,CAAC+D,4BAA4B,CAAC,CAAC,EAAE;MACnD,IAAI,CAACpF,SAAS,CAACsE,UAAU,CAAC/C,0BAA0B,CAAC8D,wBAAwB,GAAG,EAAE;IACtF;IACA,IAAI,IAAI,CAAChE,aAAa,CAACiE,uBAAuB,CAAC,CAAC,EAAE;MAC9C,IAAI,CAACtF,SAAS,CAACsE,UAAU,CAAC7C,qBAAqB,CAAC8D,qBAAqB,GAAG,EAAE;IAC9E;IACA,IAAI,IAAI,CAAClE,aAAa,CAACmE,2BAA2B,CAAC,CAAC,EAAE;MAClD,IAAI,CAACxF,SAAS,CAACsE,UAAU,CAAC3C,uBAAuB,CAAC4D,qBAAqB,GAAG,EAAE;IAChF;IACA,IAAI,IAAI,CAACvF,SAAS,CAACmE,gBAAgB,CAACnC,mBAAmB,EAAE;MACrD;MACA,IAAIiC,iBAAiB,GAAGwB,QAAQ,CAAC,IAAI,CAACzF,SAAS,CAACmE,gBAAgB,CAACnC,mBAAmB,CAACiC,iBAAiB,CAAC;MACvG,IAAI,CAACjE,SAAS,CAACmE,gBAAgB,CAACnC,mBAAmB,CAAC0D,iBAAiB,CAACzB,iBAAiB,CAAC;IAC5F;EACJ,CAAC;EACDlE,UAAU,CAACkC,SAAS,CAACiD,gBAAgB,GAAG,YAAY;IAChD,IAAI,IAAI,CAAC3D,0BAA0B,EAAE;MACjC,IAAI,CAACA,0BAA0B,CAACoE,0BAA0B,CAAC,CAAC;IAChE;IACA,IAAIC,kBAAkB,GAAG,IAAI,CAAC5F,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC;IACpE,IAAIF,kBAAkB,EAAE;MACpB,IAAIG,IAAI,GAAGC,MAAM,CAACC,cAAc,CAACC,OAAO,CAAC,IAAI,CAAC7E,aAAa,CAAC8E,UAAU,GAAG,aAAa,CAAC;MACvF,IAAIC,cAAc,GAAGC,IAAI,CAACC,KAAK,CAACP,IAAI,CAAC;MACrC,IAAIQ,iBAAiB,GAAG,EAAE;MAC1B,IAAIH,cAAc,EAAE;QAChB,KAAK,IAAII,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGJ,cAAc,CAACK,MAAM,EAAED,CAAC,EAAE,EAAE;UAC5C,IAAIJ,cAAc,CAACI,CAAC,CAAC,CAACE,QAAQ,IAAId,kBAAkB,CAAC5B,EAAE,EAAE;YACrDoC,cAAc,CAACI,CAAC,CAAC,CAACG,KAAK,GAAG,EAAE;YAC5B,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGR,cAAc,CAACK,MAAM,EAAEG,CAAC,EAAE,EAAE;cAC5C,IAAIR,cAAc,CAACQ,CAAC,CAAC,CAACC,IAAI,KAAK,KAAK,EAAE;gBAClCT,cAAc,CAACQ,CAAC,CAAC,CAACD,KAAK,GAAG,EAAE;cAChC;cACA,IAAIP,cAAc,CAACI,CAAC,CAAC,CAACM,SAAS,KAAKV,cAAc,CAACQ,CAAC,CAAC,CAACE,SAAS,IAAIV,cAAc,CAACQ,CAAC,CAAC,CAACC,IAAI,KAAK,KAAK,EAAE;gBACjGT,cAAc,CAACW,MAAM,CAACH,CAAC,EAAE,CAAC,CAAC;cAC/B;YACJ;YACAL,iBAAiB,CAACS,IAAI,CAACZ,cAAc,CAACI,CAAC,CAAC,CAAC;UAC7C,CAAC,MACI;YACDD,iBAAiB,CAACS,IAAI,CAACZ,cAAc,CAACI,CAAC,CAAC,CAAC;UAC7C;QACJ;QACAR,MAAM,CAACC,cAAc,CAACgB,OAAO,CAAC,IAAI,CAAC5F,aAAa,CAAC8E,UAAU,GAAG,aAAa,EAAEE,IAAI,CAACa,SAAS,CAACX,iBAAiB,CAAC,CAAC;MACnH;IACJ;IACA,IAAIY,MAAM,GAAG,KAAK;IAClB,IAAIC,UAAU,GAAG,KAAK;IACtB,IAAI,IAAI,CAACpH,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAACW,MAAM,GAAG,CAAC,EAAE;MACrD;MACA,IAAIY,YAAY,GAAG,IAAI,CAACrH,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC;MAC9D,IAAI3D,IAAI,GAAGkF,YAAY,CAACC,mBAAmB;MAC3C,IAAInF,IAAI,KAAK,MAAM,IAAIkF,YAAY,CAACE,uBAAuB,KAAK,gBAAgB,IAAIF,YAAY,CAACE,uBAAuB,KAAK,cAAc,IAAIpF,IAAI,KAAK,sBAAsB,IAAIA,IAAI,KAAK,eAAe,IAAIA,IAAI,KAAK,gBAAgB,EAAE;QACrO,IAAIqF,WAAW,GAAG3D,QAAQ,CAACC,cAAc,CAACuD,YAAY,CAACrD,EAAE,CAAC;QAC1D,IAAIwD,WAAW,IAAIA,WAAW,CAACC,QAAQ,EAAE;UACrCL,UAAU,GAAG,IAAI;QACrB;MACJ;MACA,IAAIC,YAAY,CAACK,kBAAkB,EAAE;QACjCP,MAAM,GAAGE,YAAY,CAACK,kBAAkB,CAACP,MAAM;QAC/C,IAAIA,MAAM,IAAI,IAAI,CAACQ,wBAAwB,CAAC,QAAQ,EAAEN,YAAY,CAAC,EAAE;UACjEF,MAAM,GAAG,KAAK;QAClB;MACJ;MACA,IAAI,CAACA,MAAM,IAAI,CAACC,UAAU,EAAE;QACxB,IAAIQ,UAAU,GAAGP,YAAY,CAACQ,SAAS;QACvC;QACA,IAAIC,SAAS,GAAGT,YAAY,CAACC,mBAAmB;QAChD;QACA,IAAIS,WAAW,GAAG,KAAK,CAAC;QACxB,IAAID,SAAS,KAAK,MAAM,IAAIA,SAAS,KAAK,oBAAoB,IAAIA,SAAS,KAAK,SAAS,IAAIA,SAAS,KAAK,SAAS,IAAIA,SAAS,KAAK,WAAW,IAAIA,SAAS,KAAK,QAAQ,IAAIA,SAAS,KAAK,UAAU,EAAE;UACrM;UACA,IAAItJ,iBAAiB,CAAC6I,YAAY,CAACW,WAAW,CAAC,IAAIX,YAAY,CAACW,WAAW,KAAK,EAAE,EAAE;YAChF,IAAI,CAAChI,SAAS,CAACsE,UAAU,CAACzC,2BAA2B,CAACoG,YAAY,CAACZ,YAAY,EAAE,OAAO,CAAC;YACzF,IAAI,CAACa,gCAAgC,CAACb,YAAY,EAAEO,UAAU,EAAE,iBAAiB,CAAC;UACtF,CAAC,MACI;YACD;YACA,IAAI,CAAC5H,SAAS,CAACsE,UAAU,CAACzC,2BAA2B,CAACoG,YAAY,CAACZ,YAAY,EAAE,SAAS,CAAC;YAC3F;YACA,IAAI,CAACa,gCAAgC,CAACb,YAAY,EAAEO,UAAU,EAAE,wBAAwB,CAAC;UAC7F;UACAG,WAAW,GAAG,IAAI,CAACI,mBAAmB,CAACd,YAAY,EAAE,QAAQ,CAAC;QAClE,CAAC,MACI,IAAIS,SAAS,KAAK,UAAU,EAAE;UAC/B;UACA,IAAI,CAAC9H,SAAS,CAACsE,UAAU,CAACzC,2BAA2B,CAACoG,YAAY,CAACZ,YAAY,EAAE,UAAU,EAAE,QAAQ,CAAC;UACtGU,WAAW,GAAG,IAAI,CAACI,mBAAmB,CAACd,YAAY,EAAE,QAAQ,CAAC;UAC9D,IAAI,CAACa,gCAAgC,CAACb,YAAY,EAAEO,UAAU,EAAE,oBAAoB,CAAC;QACzF,CAAC,MACI,IAAIE,SAAS,KAAK,sBAAsB,IAAIA,SAAS,KAAK,gBAAgB,IAAIA,SAAS,KAAK,eAAe,EAAE;UAC9GC,WAAW,GAAG,IAAI,CAACI,mBAAmB,CAACd,YAAY,EAAE,QAAQ,CAAC;QAClE,CAAC,MACI,IAAIS,SAAS,KAAK,KAAK,EAAE;UAC1B;UACA,IAAI,CAAC9H,SAAS,CAACsE,UAAU,CAACzC,2BAA2B,CAACoG,YAAY,CAACZ,YAAY,EAAE,KAAK,EAAE,QAAQ,CAAC;UACjGU,WAAW,GAAG,IAAI,CAACI,mBAAmB,CAACd,YAAY,EAAE,QAAQ,CAAC;UAC9D,IAAI,CAACa,gCAAgC,CAACb,YAAY,EAAEO,UAAU,EAAE,wBAAwB,CAAC;QAC7F,CAAC,MACI;UACDG,WAAW,GAAG,IAAI,CAAC/H,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC;UACzD;UACA,IAAI,CAAC9F,SAAS,CAACsE,UAAU,CAACzC,2BAA2B,CAACoG,YAAY,CAACF,WAAW,EAAEA,WAAW,CAACT,mBAAmB,EAAE,QAAQ,CAAC;UAC1H;UACA,IAAI,CAACtH,SAAS,CAACsE,UAAU,CAAC1C,qBAAqB,CAACwG,oBAAoB,CAACf,YAAY,EAAE,IAAI,EAAE,QAAQ,CAAC;QACtG;QACA,IAAIS,SAAS,KAAK,aAAa,EAAE;UAC7B,IAAI,CAACI,gCAAgC,CAACb,YAAY,EAAEO,UAAU,EAAE,uBAAuB,CAAC;QAC5F;QACA,IAAIE,SAAS,KAAK,OAAO,IAAI,OAAO,EAAE;UAClC,IAAI,CAACI,gCAAgC,CAACb,YAAY,EAAEO,UAAU,EAAE,kBAAkB,CAAC;QACvF;QACA;QACA,IAAI,CAAC5H,SAAS,CAACsE,UAAU,CAAC+D,SAAS,CAACT,UAAU,EAAE,IAAI,EAAEP,YAAY,EAAE,QAAQ,EAAE,EAAE,EAAEU,WAAW,EAAEV,YAAY,CAAC;QAC5G;QACA,IAAIiB,SAAS,GAAG,KAAK,CAAC;QACtB,IAAIjB,YAAY,CAACkB,SAAS,KAAK,EAAE,EAAE;UAC/BD,SAAS,GAAGzE,QAAQ,CAACC,cAAc,CAACuD,YAAY,CAACkB,SAAS,CAAC;QAC/D,CAAC,MACI;UACD,IAAIR,WAAW,EAAE;YACb,IAAIA,WAAW,CAACQ,SAAS,KAAK,EAAE,EAAE;cAC9BD,SAAS,GAAGzE,QAAQ,CAACC,cAAc,CAACiE,WAAW,CAACQ,SAAS,CAAC;YAC9D;UACJ;QACJ;QACA,IAAI,CAACC,qBAAqB,CAACF,SAAS,CAAC;QACrC,IAAIG,aAAa,GAAG,IAAI,CAACzI,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC;QAC/D,IAAId,YAAY,GAAGyD,aAAa,CAACF,SAAS;QAC1C,IAAIG,SAAS,GAAG,IAAI,CAACC,iBAAiB,CAACF,aAAa,CAACnB,mBAAmB,EAAEmB,aAAa,CAACT,WAAW,CAAC;QACpG,IAAIF,SAAS,KAAK,MAAM,IAAIW,aAAa,CAAClB,uBAAuB,KAAK,gBAAgB,IAAIkB,aAAa,CAAClB,uBAAuB,KAAK,cAAc,IAAIO,SAAS,KAAK,sBAAsB,IAAIA,SAAS,KAAK,eAAe,IAAIA,SAAS,KAAK,gBAAgB,EAAE;UAAE;UAC7P,IAAIc,mBAAmB,GAAG,IAAI,CAAC5I,SAAS,CAAC6I,kBAAkB,CAAC,CAAC;UAC7D,IAAIC,KAAK,GAAGF,mBAAmB,CAACG,SAAS,CAAC,UAAUC,EAAE,EAAE;YAAE,OAAOA,EAAE,CAAChF,EAAE,KAAKqD,YAAY,CAACrD,EAAE;UAAE,CAAC,CAAC;UAC9F,IAAIiF,aAAa,GAAG,KAAK,CAAC;UAC1B,IAAIH,KAAK,GAAG,CAAC,CAAC,EAAE;YACZG,aAAa,GAAGL,mBAAmB,CAACE,KAAK,CAAC,CAACI,IAAI;UACnD;UACA,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGP,mBAAmB,CAACnC,MAAM,EAAE0C,CAAC,EAAE,EAAE;YACjD,IAAIV,aAAa,CAACzE,EAAE,KAAK4E,mBAAmB,CAACO,CAAC,CAAC,CAACnF,EAAE,IAAKxF,iBAAiB,CAACyK,aAAa,CAAC,IAAIA,aAAa,KAAKL,mBAAmB,CAACO,CAAC,CAAC,CAACD,IAAK,EAAE;cACvIN,mBAAmB,CAACO,CAAC,CAAC,CAACC,KAAK,GAAG,EAAE;cACjCR,mBAAmB,CAACO,CAAC,CAAC,CAACE,aAAa,GAAG,EAAE;cACzC,IAAIC,YAAY,GAAG,IAAI,CAACC,6BAA6B,CAACX,mBAAmB,CAACO,CAAC,CAAC,CAACnF,EAAE,CAAC;cAChF,IAAI,CAACwF,0BAA0B,CAACF,YAAY,CAAC;cAC7CvB,WAAW,GAAG,IAAI,CAACI,mBAAmB,CAACmB,YAAY,EAAE,QAAQ,CAAC;cAC9D;cACA,IAAI,CAACtJ,SAAS,CAACsE,UAAU,CAAC+D,SAAS,CAACiB,YAAY,CAACzB,SAAS,EAAE,IAAI,EAAEyB,YAAY,EAAE,QAAQ,EAAE,EAAE,EAAEvB,WAAW,EAAEuB,YAAY,CAAC;cACxH,IAAI,IAAI,CAACtJ,SAAS,CAACyJ,kBAAkB,IAAIhB,aAAa,CAAClB,uBAAuB,EAC1E,IAAI,CAACmC,yBAAyB,CAACJ,YAAY,CAAC,CAAC,KAE7C,IAAI,CAACK,0BAA0B,CAACL,YAAY,CAAC;cACjD,IAAI,CAACtJ,SAAS,CAAC4J,MAAM,CAACN,YAAY,CAAC;YACvC;UACJ;UACA,IAAI,IAAI,CAACtJ,SAAS,CAACyJ,kBAAkB,IAAIhB,aAAa,CAAClB,uBAAuB,EAC1E,IAAI,CAACmC,yBAAyB,CAACrC,YAAY,CAAC,CAAC,KAE7C,IAAI,CAACsC,0BAA0B,CAACtC,YAAY,CAAC;QACrD;QACA,IAAI,IAAI,CAACrH,SAAS,CAACyJ,kBAAkB,IAAIhB,aAAa,CAAClB,uBAAuB,EAC1E,IAAI,CAACmC,yBAAyB,CAACrC,YAAY,CAAC,CAAC,KAE7C,IAAI,CAACsC,0BAA0B,CAACtC,YAAY,CAAC;QACjD,IAAIwC,YAAY,GAAG,IAAI,CAAC7J,SAAS,CAAC8J,SAAS,CAACzC,YAAY,CAACrD,EAAE,CAAC+F,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QAC1E,IAAIF,YAAY,IAAI,IAAI,KAAKA,YAAY,CAACtC,uBAAuB,KAAK,gBAAgB,IAAIsC,YAAY,CAACtC,uBAAuB,KAAK,cAAc,CAAC,EAAE;UAChJ,IAAIuB,KAAK,GAAG,IAAI,CAAC9I,SAAS,CAACgK,oBAAoB,CAACjB,SAAS,CAAC,UAAUC,EAAE,EAAE;YAAE,OAAOA,EAAE,CAAChF,EAAE,KAAKqD,YAAY,CAACrD,EAAE,CAAC+F,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;UAAE,CAAC,CAAC;UAC5H,IAAId,aAAa,GAAG,KAAK,CAAC;UAC1B,IAAIH,KAAK,GAAG,CAAC,CAAC,EAAE;YACZG,aAAa,GAAG,IAAI,CAACjJ,SAAS,CAACgK,oBAAoB,CAAClB,KAAK,CAAC,CAACI,IAAI;UACnE;UACA,KAAK,IAAIe,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACjK,SAAS,CAACgK,oBAAoB,CAACvD,MAAM,EAAEwD,CAAC,EAAE,EAAE;YACjE,IAAIhB,aAAa,KAAK,IAAI,CAACjJ,SAAS,CAACgK,oBAAoB,CAACC,CAAC,CAAC,CAACf,IAAI,EAAE;cAC/D,IAAIgB,eAAe,GAAG,IAAI,CAAClK,SAAS,CAACgK,oBAAoB,CAACC,CAAC,CAAC;cAC5D,IAAI,CAACjK,SAAS,CAACmK,kCAAkC,CAAC,2BAA2B,EAAED,eAAe,EAAEA,eAAe,CAACrC,SAAS,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAEqC,eAAe,CAACd,KAAK,EAAE,EAAE,CAAC;cAC7Pc,eAAe,CAACd,KAAK,GAAG,EAAE;cAC1Bc,eAAe,CAACb,aAAa,GAAG,EAAE;cAClC,IAAI,CAACrJ,SAAS,CAACyJ,kBAAkB,CAACW,0BAA0B,CAACF,eAAe,CAAC;cAC7E,IAAIG,YAAY,GAAG,IAAI,CAACd,6BAA6B,CAACW,eAAe,CAAClG,EAAE,GAAG,UAAU,CAAC;cACtF,IAAI,CAACxF,iBAAiB,CAAC6L,YAAY,CAAC,EAAE;gBAClCtC,WAAW,GAAG,IAAI,CAACI,mBAAmB,CAACkC,YAAY,EAAE,QAAQ,CAAC;gBAC9D;gBACA,IAAI,CAACrK,SAAS,CAACsE,UAAU,CAAC+D,SAAS,CAACgC,YAAY,CAACxC,SAAS,EAAE,IAAI,EAAEwC,YAAY,EAAE,QAAQ,EAAE,EAAE,EAAEtC,WAAW,EAAEsC,YAAY,CAAC;gBACxH,IAAI,CAACb,0BAA0B,CAACa,YAAY,CAAC;gBAC7C,IAAIC,eAAe,GAAG,IAAI,CAACtK,SAAS,CAAC8J,SAAS,CAACO,YAAY,CAACrG,EAAE,CAAC+F,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC7EO,eAAe,CAACC,OAAO,CAACC,QAAQ,CAACzD,MAAM,CAACuD,eAAe,CAACC,OAAO,CAACC,QAAQ,CAACC,OAAO,CAACJ,YAAY,CAACE,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;gBACtH,IAAI,CAACxK,SAAS,CAAC4J,MAAM,CAACS,YAAY,CAAC;cACvC;YACJ;UACJ;QACJ;QACA,IAAI,CAACrK,SAAS,CAAC4J,MAAM,CAACvC,YAAY,CAAC;QACnC,IAAI,CAACrH,SAAS,CAAC0K,aAAa,CAAC,CAAC;QAC9B,IAAI,CAAC1K,SAAS,CAAC2K,cAAc,CAAC/C,UAAU,CAAC;QACzC,IAAI,CAACvG,aAAa,CAACuJ,uBAAuB,CAAC,IAAI,CAACvJ,aAAa,CAACuH,mBAAmB,EAAE,eAAe,CAAC;QACnG,IAAI,CAACvH,aAAa,CAACwJ,4BAA4B,CAAC,IAAI,CAAC;QACrD,IAAI,CAACxJ,aAAa,CAACqB,IAAI,GAAG,IAAI;QAC9B,IAAI,CAAC1C,SAAS,CAAC0C,IAAI,GAAG,IAAI;QAC1B,IAAI+F,aAAa,CAACnB,mBAAmB,KAAK,sBAAsB,IAAImB,aAAa,CAACnB,mBAAmB,KAAK,eAAe,IAAImB,aAAa,CAACnB,mBAAmB,KAAK,gBAAgB,IAAImB,aAAa,CAACnB,mBAAmB,KAAK,MAAM,EAAE;UACjO;UACA,IAAIwD,MAAM,GAAG;YAAEC,IAAI,EAAEtC,aAAa,CAACqC,MAAM,CAACtE,CAAC;YAAEwE,GAAG,EAAEvC,aAAa,CAACqC,MAAM,CAAClE,CAAC;YAAEqE,KAAK,EAAExC,aAAa,CAACqC,MAAM,CAACG,KAAK;YAAEC,MAAM,EAAEzC,aAAa,CAACqC,MAAM,CAACI;UAAO,CAAC;UAClJ;UACA,IAAI,CAAClL,SAAS,CAACmL,mBAAmB,CAACvD,UAAU,EAAEa,aAAa,CAACzE,EAAE,EAAEyE,aAAa,CAACnB,mBAAmB,EAAEwD,MAAM,CAAC;QAC/G,CAAC,MACI,IAAI,IAAI,CAAC9K,SAAS,CAACmE,gBAAgB,EAAE;UACtC;UACA,IAAI,CAACnE,SAAS,CAACoL,oBAAoB,CAACxD,UAAU,EAAE5C,YAAY,EAAE0D,SAAS,EAAED,aAAa,CAACqC,MAAM,CAAC;QAClG;QACA,IAAI,IAAI,CAAC9K,SAAS,CAACqL,mBAAmB,EAAE;UACpC,IAAI,CAACrL,SAAS,CAACqL,mBAAmB,CAACC,uBAAuB,CAAC,CAAC;QAChE;MACJ;IACJ;IACA,IAAI,CAACC,aAAa,CAAC,IAAI,CAAC;IACxB,IAAI,IAAI,CAACvL,SAAS,CAAC2C,aAAa,EAAE;MAC9B,IAAI,IAAI,CAAC3C,SAAS,CAAC2C,aAAa,CAACE,uBAAuB,IAAI,CAACsE,MAAM,EAAE;QACjE,IAAI,CAACnH,SAAS,CAAC2C,aAAa,CAACE,uBAAuB,CAAC2I,0BAA0B,CAAC,KAAK,EAAE,IAAI,CAAC;QAC5F,IAAI,CAACxL,SAAS,CAAC2C,aAAa,CAACE,uBAAuB,CAAC4I,yCAAyC,CAAC,KAAK,CAAC;MACzG;IACJ;EACJ,CAAC;EACD;AACJ;AACA;EACI;EACA1L,UAAU,CAACkC,SAAS,CAACsH,6BAA6B,GAAG,UAAUvE,YAAY,EAAE;IACzE,IAAI0G,WAAW,GAAG,IAAI,CAAC1L,SAAS,CAAC8F,WAAW;IAC5C,IAAI4F,WAAW,IAAI1G,YAAY,EAAE;MAC7B,KAAK,IAAIiF,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGyB,WAAW,CAACjF,MAAM,EAAEwD,CAAC,EAAE,EAAE;QACzC,IAAIyB,WAAW,CAACzB,CAAC,CAAC,CAACjG,EAAE,KAAKgB,YAAY,EAAE;UACpC,OAAO0G,WAAW,CAACzB,CAAC,CAAC;QACzB;MACJ;IACJ;EACJ,CAAC;EACD;EACA;AACJ;AACA;EACIlK,UAAU,CAACkC,SAAS,CAACuH,0BAA0B,GAAG,UAAUlF,UAAU,EAAE;IACpE,IAAIkD,WAAW,GAAG3D,QAAQ,CAACC,cAAc,CAACQ,UAAU,CAACN,EAAE,CAAC;IACxD,IAAI2H,qBAAqB,GAAG9H,QAAQ,CAACC,cAAc,CAACQ,UAAU,CAACN,EAAE,GAAG,eAAe,CAAC;IACpF,IAAIwD,WAAW,KAAK,IAAI,IAAI,CAAChJ,iBAAiB,CAACmN,qBAAqB,CAAC,EAAE;MACnEnE,WAAW,GAAGmE,qBAAqB,CAACnB,QAAQ,CAAC,CAAC,CAAC,CAACA,QAAQ,CAAC,CAAC,CAAC;IAC/D;IACA,IAAIhD,WAAW,IAAIA,WAAW,CAACoE,SAAS,CAACC,QAAQ,CAAC,2CAA2C,CAAC,EAAE;MAC5FrE,WAAW,CAACsE,SAAS,GAAG,iCAAiC;MACzDtE,WAAW,CAACuE,KAAK,CAACC,aAAa,GAAG,EAAE;MACpCxE,WAAW,CAACyE,aAAa,CAACF,KAAK,CAACC,aAAa,GAAG,EAAE;IACtD;IACA,IAAI,IAAI,CAAChM,SAAS,CAACyJ,kBAAkB,EAAE;MACnC,IAAI,CAACzJ,SAAS,CAACyJ,kBAAkB,CAACyC,oBAAoB,CAAC5H,UAAU,CAACN,EAAE,CAAC;IACzE,CAAC,MACI;MACD,IAAI,CAAChE,SAAS,CAACmM,gBAAgB,CAACC,mBAAmB,CAAC5E,WAAW,EAAE,EAAE,CAAC;IACxE;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;EACI;EACAzH,UAAU,CAACkC,SAAS,CAACoK,0BAA0B,GAAG,UAAU/H,UAAU,EAAEsD,UAAU,EAAE;IAChF,IAAI,IAAI,CAACzG,gBAAgB,EAAE;MACvB,IAAImL,iBAAiB,GAAG,IAAI,CAACC,yBAAyB,CAACjI,UAAU,CAAC;MAClE,IAAIW,gBAAgB,GAAG/F,WAAW,CAACoF,UAAU,CAAC;MAC9CW,gBAAgB,CAACuH,WAAW,GAAGlI,UAAU,CAACiE,SAAS;MACnDtD,gBAAgB,CAAC2C,UAAU,GAAGA,UAAU;MACxC,OAAO3C,gBAAgB,CAACsD,SAAS;MACjC,IAAIjE,UAAU,CAACN,EAAE,EAAE;QACfiB,gBAAgB,CAACwH,SAAS,GAAGnI,UAAU,CAACN,EAAE;QAC1C,OAAOiB,gBAAgB,CAACjB,EAAE;MAC9B;MACA,IAAIsI,iBAAiB,CAACI,UAAU,EAAE;QAC9B,IAAI,CAAC1M,SAAS,CAAC4I,mBAAmB,CAAC7B,MAAM,CAACuF,iBAAiB,CAACK,QAAQ,EAAE,CAAC,EAAE1H,gBAAgB,CAAC;MAC9F,CAAC,MACI;QACD,IAAI,CAACjF,SAAS,CAAC4I,mBAAmB,CAAC5B,IAAI,CAAC/B,gBAAgB,CAAC;MAC7D;IACJ,CAAC,MACI;MACD;MACA,IAAIqH,iBAAiB,GAAG,IAAI,CAACM,yBAAyB,CAACtI,UAAU,CAAC;MAClE;MACA,IAAIW,gBAAgB,GAAG/F,WAAW,CAACoF,UAAU,CAAC;MAC9CW,gBAAgB,CAACD,YAAY,GAAGV,UAAU,CAACiE,SAAS;MACpDtD,gBAAgB,CAAC2C,UAAU,GAAGA,UAAU;MACxC,OAAO3C,gBAAgB,CAACsD,SAAS;MACjC,IAAIjE,UAAU,CAACgD,mBAAmB,KAAK,OAAO,EAAE;QAC5CrC,gBAAgB,CAACwH,SAAS,GAAGnI,UAAU,CAACuI,QAAQ;QAChD,OAAO5H,gBAAgB,CAAC4H,QAAQ;MACpC;MACA,IAAIvI,UAAU,CAACgD,mBAAmB,KAAK,QAAQ,EAAE;QAC7CrC,gBAAgB,CAACwH,SAAS,GAAGnI,UAAU,CAACiE,SAAS;MACrD;MACA,IAAIjE,UAAU,CAACN,EAAE,EAAE;QACfiB,gBAAgB,CAACwH,SAAS,GAAGnI,UAAU,CAACN,EAAE;QAC1C,OAAOiB,gBAAgB,CAACjB,EAAE;MAC9B;MACA;MACA,IAAIiB,gBAAgB,CAAC6H,UAAU,IAAIxI,UAAU,CAACwI,UAAU,IAAIzG,IAAI,CAACa,SAAS,CAACjC,gBAAgB,CAAC6H,UAAU,CAAC,KAAKzG,IAAI,CAACa,SAAS,CAAC5C,UAAU,CAACwI,UAAU,CAAC,EAAE;QAC/I7H,gBAAgB,CAAC6H,UAAU,GAAGxI,UAAU,CAACwI,UAAU;MACvD;MACA,IAAIR,iBAAiB,CAACI,UAAU,EAAE;QAC9B,IAAI,CAAC1M,SAAS,CAAC+M,oBAAoB,CAAChG,MAAM,CAACuF,iBAAiB,CAACK,QAAQ,EAAE,CAAC,EAAE1H,gBAAgB,CAAC;MAC/F,CAAC,MACI;QACD,IAAI,CAACjF,SAAS,CAAC+M,oBAAoB,CAAC/F,IAAI,CAAC/B,gBAAgB,CAAC;MAC9D;IACJ;EACJ,CAAC;EACDlF,UAAU,CAACkC,SAAS,CAACsK,yBAAyB,GAAG,UAAUjI,UAAU,EAAE;IACnE;IACA,IAAIoH,WAAW,GAAG,IAAI,CAAC1L,SAAS,CAAC4I,mBAAmB;IACpD,IAAI8C,WAAW,IAAIpH,UAAU,EAAE;MAC3B,KAAK,IAAI2F,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGyB,WAAW,CAACjF,MAAM,EAAEwD,CAAC,EAAE,EAAE;QACzC,IAAIyB,WAAW,CAACzB,CAAC,CAAC,CAACuC,WAAW,KAAKlI,UAAU,CAACiE,SAAS,EAAE;UACrD,IAAI,CAACvI,SAAS,CAAC4I,mBAAmB,CAAC7B,MAAM,CAACkD,CAAC,EAAE,CAAC,CAAC;UAC/C,OAAO;YAAEyC,UAAU,EAAE,IAAI;YAAEC,QAAQ,EAAE1C;UAAE,CAAC;QAC5C;MACJ;IACJ;IACA,OAAO;MAAEyC,UAAU,EAAE,KAAK;MAAEC,QAAQ,EAAE;IAAK,CAAC;EAChD,CAAC;EACD5M,UAAU,CAACkC,SAAS,CAACyH,yBAAyB,GAAG,UAAUpF,UAAU,EAAE;IACnE;IACA,IAAIoH,WAAW,GAAG,IAAI,CAAC1L,SAAS,CAAC4I,mBAAmB;IACpD,IAAI8C,WAAW,IAAIpH,UAAU,EAAE;MAC3B,KAAK,IAAI2F,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGyB,WAAW,CAACjF,MAAM,EAAEwD,CAAC,EAAE,EAAE;QACzC,IAAIyB,WAAW,CAACzB,CAAC,CAAC,CAACuC,WAAW,KAAKlI,UAAU,CAACiE,SAAS,EAAE;UACrD,IAAI,CAACnH,2BAA2B,CAAC4F,IAAI,CAAC0E,WAAW,CAACzB,CAAC,CAAC,CAAC;UACrD,IAAI,CAACjK,SAAS,CAAC4I,mBAAmB,CAAC7B,MAAM,CAACkD,CAAC,EAAE,CAAC,CAAC;UAC/C;QACJ;MACJ;IACJ;EACJ,CAAC;EACD;AACJ;AACA;AACA;EACI;EACAlK,UAAU,CAACkC,SAAS,CAAC+K,aAAa,GAAG,UAAU1I,UAAU,EAAE;IACvD,IAAIwI,UAAU;IACd,IAAIxI,UAAU,CAAC2I,kBAAkB,IAAI,CAAC3I,UAAU,CAAC4I,UAAU,EAAE;MACzDJ,UAAU,GAAGzG,IAAI,CAACC,KAAK,CAAChC,UAAU,CAAC2I,kBAAkB,CAAC;IAC1D,CAAC,MACI,IAAI3I,UAAU,CAAC4I,UAAU,KAAK,IAAI,EAAE;MACrC,IAAI5I,UAAU,CAACgD,mBAAmB,KAAK,QAAQ,EAAE;QAC7CwF,UAAU,GAAG,IAAI,CAAC9M,SAAS,CAACmN,mBAAmB,CAACL,UAAU;MAC9D;MACA,IAAIxI,UAAU,CAACgD,mBAAmB,KAAK,OAAO,EAAE;QAC5CwF,UAAU,GAAG,IAAI,CAAC9M,SAAS,CAACoN,aAAa,CAACN,UAAU;MACxD;MACA,IAAIxI,UAAU,CAACgD,mBAAmB,KAAK,UAAU,EAAE;QAC/CwF,UAAU,GAAG,IAAI,CAAC9M,SAAS,CAACqN,gBAAgB,CAACP,UAAU;MAC3D;MACA,IAAIxI,UAAU,CAACN,EAAE,KAAK,OAAO,EAAE;QAC3B8I,UAAU,GAAG,IAAI,CAACQ,YAAY,CAAChJ,UAAU,CAACiJ,mBAAmB,EAAEjJ,UAAU,CAACkJ,OAAO,CAAC;MACtF;MACA,IAAIlJ,UAAU,CAACN,EAAE,KAAK,SAAS,EAAE;QAC7B8I,UAAU,GAAG,IAAI,CAACW,cAAc,CAACnJ,UAAU,CAACoJ,OAAO,CAAC;MACxD;MACA,IAAIpJ,UAAU,CAACgD,mBAAmB,KAAK,YAAY,EAAE;QACjDwF,UAAU,GAAG,IAAI,CAACa,iBAAiB,CAACrJ,UAAU,CAACkJ,OAAO,CAAC;MAC3D;MACA,IAAIlJ,UAAU,CAACgD,mBAAmB,KAAK,KAAK,EAAE;QAC1CwF,UAAU,GAAG,IAAI,CAAC9M,SAAS,CAAC4N,qBAAqB,CAACd,UAAU;MAChE;IACJ,CAAC,MACI;MACDA,UAAU,GAAGxI,UAAU,CAAC4I,UAAU;IACtC;IACA,OAAOJ,UAAU;EACrB,CAAC;EACD;AACJ;AACA;AACA;AACA;EACI;EACA/M,UAAU,CAACkC,SAAS,CAACqL,YAAY,GAAG,UAAUnL,IAAI,EAAEqL,OAAO,EAAE;IACzD,IAAIV,UAAU;IACd,IAAI3K,IAAI,KAAK,MAAM,IAAIqL,OAAO,KAAK,OAAO,IAAI,IAAI,CAACxN,SAAS,CAAC6N,YAAY,CAACf,UAAU,EAAE;MAClFA,UAAU,GAAG,IAAI,CAAC9M,SAAS,CAAC6N,YAAY,CAACf,UAAU;IACvD,CAAC,MACI,IAAI,CAAC3K,IAAI,KAAK,oBAAoB,IAAIqL,OAAO,KAAK,OAAO,KAAK,IAAI,CAACxN,SAAS,CAAC8N,aAAa,CAAChB,UAAU,EAAE;MACxGA,UAAU,GAAG,IAAI,CAAC9M,SAAS,CAAC8N,aAAa,CAAChB,UAAU;IACxD,CAAC,MACI,IAAI,CAAC3K,IAAI,KAAK,WAAW,IAAIA,IAAI,KAAK,QAAQ,KAAK,IAAI,CAACnC,SAAS,CAAC+N,iBAAiB,CAACjB,UAAU,EAAE;MACjGA,UAAU,GAAG,IAAI,CAAC9M,SAAS,CAAC+N,iBAAiB,CAACjB,UAAU;IAC5D,CAAC,MACI,IAAI,CAAC3K,IAAI,KAAK,SAAS,IAAIA,IAAI,KAAK,QAAQ,KAAK,IAAI,CAACnC,SAAS,CAACgO,cAAc,CAAClB,UAAU,EAAE;MAC5FA,UAAU,GAAG,IAAI,CAAC9M,SAAS,CAACgO,cAAc,CAAClB,UAAU;IACzD,CAAC,MACI,IAAI3K,IAAI,KAAK,SAAS,IAAI,IAAI,CAACnC,SAAS,CAACiO,eAAe,CAACnB,UAAU,EAAE;MACtEA,UAAU,GAAG,IAAI,CAAC9M,SAAS,CAACiO,eAAe,CAACnB,UAAU;IAC1D,CAAC,MACI,IAAI,IAAI,CAAC9M,SAAS,CAAC0H,kBAAkB,CAACoF,UAAU,EAAE;MACnDA,UAAU,GAAG,IAAI,CAAC9M,SAAS,CAAC0H,kBAAkB,CAACoF,UAAU;IAC7D;IACA,OAAOA,UAAU;EACrB,CAAC;EACD;AACJ;AACA;AACA;EACI;EACA/M,UAAU,CAACkC,SAAS,CAACwL,cAAc,GAAG,UAAUtL,IAAI,EAAE;IAClD,IAAI2K,UAAU;IACd,IAAI,CAAC3K,IAAI,KAAK,UAAU,IAAIA,IAAI,KAAK,sBAAsB,KAAK,IAAI,CAACnC,SAAS,CAACkO,gBAAgB,CAACpB,UAAU,EAAE;MACxGA,UAAU,GAAG,IAAI,CAAC9M,SAAS,CAACkO,gBAAgB,CAACpB,UAAU;IAC3D,CAAC,MACI,IAAI,CAAC3K,IAAI,KAAK,MAAM,IAAIA,IAAI,KAAK,uBAAuB,KAAK,IAAI,CAACnC,SAAS,CAAC6N,YAAY,CAACf,UAAU,EAAE;MACtGA,UAAU,GAAG,IAAI,CAAC9M,SAAS,CAAC6N,YAAY,CAACf,UAAU;MACnD;IACJ,CAAC,MACI,IAAI,CAAC3K,IAAI,KAAK,SAAS,IAAIA,IAAI,KAAK,kBAAkB,IAAIA,IAAI,KAAK,oBAAoB,KAAK,IAAI,CAACnC,SAAS,CAACiO,eAAe,CAACnB,UAAU,EAAE;MACxIA,UAAU,GAAG,IAAI,CAAC9M,SAAS,CAACiO,eAAe,CAACnB,UAAU;IAC1D,CAAC,MACI,IAAI,CAAC3K,IAAI,KAAK,QAAQ,IAAIA,IAAI,KAAK,oBAAoB,KAAK,IAAI,CAACnC,SAAS,CAACmO,cAAc,CAACrB,UAAU,EAAE;MACvGA,UAAU,GAAG,IAAI,CAAC9M,SAAS,CAACmO,cAAc,CAACrB,UAAU;IACzD,CAAC,MACI,IAAI,IAAI,CAAC9M,SAAS,CAAC0H,kBAAkB,CAACoF,UAAU,EAAE;MACnDA,UAAU,GAAG,IAAI,CAAC9M,SAAS,CAAC0H,kBAAkB,CAACoF,UAAU;IAC7D;IACA,OAAOA,UAAU;EACrB,CAAC;EACD;AACJ;AACA;AACA;EACI;EACA/M,UAAU,CAACkC,SAAS,CAAC0L,iBAAiB,GAAG,UAAUxL,IAAI,EAAE;IACrD,IAAI2K,UAAU;IACd,IAAI3K,IAAI,KAAK,WAAW,IAAI,IAAI,CAACnC,SAAS,CAACoO,iBAAiB,CAACtB,UAAU,EAAE;MACrEA,UAAU,GAAG,IAAI,CAAC9M,SAAS,CAACoO,iBAAiB,CAACtB,UAAU;IAC5D,CAAC,MACI,IAAI3K,IAAI,KAAK,WAAW,IAAI,IAAI,CAACnC,SAAS,CAACqO,iBAAiB,CAACvB,UAAU,EAAE;MAC1EA,UAAU,GAAG,IAAI,CAAC9M,SAAS,CAACqO,iBAAiB,CAACvB,UAAU;IAC5D,CAAC,MACI,IAAI3K,IAAI,KAAK,eAAe,IAAI,IAAI,CAACnC,SAAS,CAACsO,qBAAqB,CAACxB,UAAU,EAAE;MAClFA,UAAU,GAAG,IAAI,CAAC9M,SAAS,CAACsO,qBAAqB,CAACxB,UAAU;IAChE,CAAC,MACI,IAAI,IAAI,CAAC9M,SAAS,CAAC0H,kBAAkB,CAACoF,UAAU,EAAE;MACnDA,UAAU,GAAG,IAAI,CAAC9M,SAAS,CAAC0H,kBAAkB,CAACoF,UAAU;IAC7D;IACA,OAAOA,UAAU;EACrB,CAAC;EACD;AACJ;AACA;AACA;EACI;EACA/M,UAAU,CAACkC,SAAS,CAACsM,OAAO,GAAG,UAAUpM,IAAI,EAAE;IAC3C,IAAI2K,UAAU;IACd,IAAI3K,IAAI,KAAK,UAAU,IAAI,IAAI,CAACnC,SAAS,CAACqN,gBAAgB,CAACP,UAAU,EAAE;MACnEA,UAAU,GAAG,IAAI,CAAC9M,SAAS,CAACqN,gBAAgB,CAACP,UAAU;IAC3D,CAAC,MACI,IAAI,CAAC3K,IAAI,KAAK,OAAO,IAAIA,IAAI,KAAK,OAAO,KAAK,IAAI,CAACnC,SAAS,CAACoN,aAAa,CAACN,UAAU,EAAE;MACxFA,UAAU,GAAG,IAAI,CAAC9M,SAAS,CAACoN,aAAa,CAACN,UAAU;IACxD,CAAC,MACI,IAAI3K,IAAI,KAAK,QAAQ,IAAI,IAAI,CAACnC,SAAS,CAACmN,mBAAmB,CAACL,UAAU,EAAE;MACzEA,UAAU,GAAG,IAAI,CAAC9M,SAAS,CAACmN,mBAAmB,CAACL,UAAU;IAC9D,CAAC,MACI,IAAI,IAAI,CAAC9M,SAAS,CAAC0H,kBAAkB,CAACoF,UAAU,EAAE;MACnDA,UAAU,GAAG,IAAI,CAAC9M,SAAS,CAAC0H,kBAAkB,CAACoF,UAAU;IAC7D;IACA,OAAOA,UAAU;EACrB,CAAC;EACD;AACJ;AACA;EACI;EACA/M,UAAU,CAACkC,SAAS,CAACuM,sBAAsB,GAAG,YAAY;IACtD;IACA,IAAIC,WAAW,GAAGC,IAAI,CAACC,KAAK,CAACtI,IAAI,CAACa,SAAS,CAAClB,MAAM,CAACC,cAAc,CAAC,CAACQ,MAAM,GAAG,IAAI,CAAC;IACjF,IAAImI,cAAc,GAAG,IAAI;IACzB,IAAIH,WAAW,GAAGG,cAAc,EAAE;MAC9B,IAAIC,aAAa,GAAG7I,MAAM,CAACC,cAAc,CAACQ,MAAM;MAChD;MACA,IAAIqI,cAAc,GAAG,EAAE;MACvB,KAAK,IAAI7E,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG4E,aAAa,EAAE5E,CAAC,EAAE,EAAE;QACpC,IAAIjE,MAAM,CAACC,cAAc,CAAC8I,GAAG,CAAC9E,CAAC,CAAC,IAAIjE,MAAM,CAACC,cAAc,CAAC8I,GAAG,CAAC9E,CAAC,CAAC,CAACF,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE;UAC5E,IAAI/D,MAAM,CAACC,cAAc,CAAC8I,GAAG,CAAC9E,CAAC,CAAC,CAACF,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,aAAa,EAAE;YAC9D;YACA,IAAI,CAAC1I,aAAa,CAAC2N,iBAAiB,CAAChJ,MAAM,CAACC,cAAc,CAAC8I,GAAG,CAAC9E,CAAC,CAAC,CAAC,GAAGjE,MAAM,CAACC,cAAc,CAACC,OAAO,CAACF,MAAM,CAACC,cAAc,CAAC8I,GAAG,CAAC9E,CAAC,CAAC,CAAC;YAChI6E,cAAc,CAAC9H,IAAI,CAAChB,MAAM,CAACC,cAAc,CAAC8I,GAAG,CAAC9E,CAAC,CAAC,CAAC;UACrD;QACJ;MACJ;MACA,IAAI6E,cAAc,EAAE;QAChB,KAAK,IAAI7E,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG6E,cAAc,CAACrI,MAAM,EAAEwD,CAAC,EAAE,EAAE;UAC5CjE,MAAM,CAACC,cAAc,CAACgJ,UAAU,CAACH,cAAc,CAAC7E,CAAC,CAAC,CAAC;QACvD;MACJ;IACJ;EACJ,CAAC;EACD;AACJ;AACA;AACA;EACI;EACAlK,UAAU,CAACkC,SAAS,CAAC2K,yBAAyB,GAAG,UAAUtI,UAAU,EAAE;IACnE;IACA,IAAIoH,WAAW,GAAG,IAAI,CAAC1L,SAAS,CAAC+M,oBAAoB;IACrD,IAAIrB,WAAW,IAAIpH,UAAU,EAAE;MAC3B,KAAK,IAAI2F,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGyB,WAAW,CAACjF,MAAM,EAAEwD,CAAC,EAAE,EAAE;QACzC,IAAIyB,WAAW,CAACzB,CAAC,CAAC,CAACjF,YAAY,KAAKV,UAAU,CAACiE,SAAS,EAAE;UACtD,IAAI,CAACvI,SAAS,CAAC+M,oBAAoB,CAAChG,MAAM,CAACkD,CAAC,EAAE,CAAC,CAAC;UAChD,OAAO;YAAEyC,UAAU,EAAE,IAAI;YAAEC,QAAQ,EAAE1C;UAAE,CAAC;QAC5C;MACJ;IACJ;IACA,OAAO;MAAEyC,UAAU,EAAE,KAAK;MAAEC,QAAQ,EAAE;IAAK,CAAC;EAChD,CAAC;EACD;AACJ;AACA;AACA;EACI;EACA5M,UAAU,CAACkC,SAAS,CAAC0H,0BAA0B,GAAG,UAAUrF,UAAU,EAAE;IACpE;IACA,IAAIoH,WAAW,GAAG,IAAI,CAAC1L,SAAS,CAAC+M,oBAAoB;IACrD,IAAIrB,WAAW,IAAIpH,UAAU,EAAE;MAC3B,KAAK,IAAI2F,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGyB,WAAW,CAACjF,MAAM,EAAEwD,CAAC,EAAE,EAAE;QACzC,IAAIyB,WAAW,CAACzB,CAAC,CAAC,CAACjF,YAAY,KAAKV,UAAU,CAACiE,SAAS,IAAImD,WAAW,CAACzB,CAAC,CAAC,CAACjF,YAAY,KAAKV,UAAU,CAACU,YAAY,EAAE;UACjH,IAAI,CAAC5D,2BAA2B,CAAC4F,IAAI,CAAC0E,WAAW,CAACzB,CAAC,CAAC,CAAC;UACrD,IAAI,CAACjK,SAAS,CAAC+M,oBAAoB,CAAChG,MAAM,CAACkD,CAAC,EAAE,CAAC,CAAC;UAChD;QACJ;MACJ;IACJ;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;EACI;EACAlK,UAAU,CAACkC,SAAS,CAACiG,gCAAgC,GAAG,UAAU5D,UAAU,EAAEsD,UAAU,EAAEsH,cAAc,EAAE;IACtG,IAAI,IAAI,CAAC7N,aAAa,CAAC8N,cAAc,EAAE;MACnC,IAAI,IAAI,CAAC9N,aAAa,CAAC+N,kBAAkB,IAAI,IAAI,CAAC/N,aAAa,CAAC+N,kBAAkB,CAACxH,UAAU,CAAC,EAAE;QAC5F;QACA,IAAIyH,sBAAsB,GAAG,IAAI,CAAChO,aAAa,CAAC+N,kBAAkB,CAACxH,UAAU,CAAC;QAC9E,IAAIyH,sBAAsB,CAACH,cAAc,CAAC,IAAI,CAAC1Q,iBAAiB,CAAC,IAAI,CAAC6C,aAAa,CAAC+N,kBAAkB,CAACxH,UAAU,CAAC,CAAC0H,eAAe,CAAC,EAAE;UACjI,IAAI,CAACjO,aAAa,CAAC+N,kBAAkB,CAACxH,UAAU,CAAC,CAAC0H,eAAe,GAAG,IAAI,CAACjO,aAAa,CAAC+N,kBAAkB,CAACxH,UAAU,CAAC,CAAC0H,eAAe,CAACC,MAAM,CAAC,UAAUC,iBAAiB,EAAE;YACtK,OAAO,EAAElL,UAAU,CAACiE,SAAS,KAAKiH,iBAAiB,CAACC,SAAS,IAAInL,UAAU,CAACiE,SAAS,KAAKiH,iBAAiB,CAACjH,SAAS,CAAC;UAC1H,CAAC,CAAC;QACN;QACA,IAAI,CAAC/J,iBAAiB,CAAC,IAAI,CAAC6C,aAAa,CAAC+N,kBAAkB,CAAC,IAAI,CAAC5Q,iBAAiB,CAAC,IAAI,CAAC6C,aAAa,CAAC+N,kBAAkB,CAACxH,UAAU,CAAC,CAAC,IAAI,CAACpJ,iBAAiB,CAAC,IAAI,CAAC6C,aAAa,CAAC+N,kBAAkB,CAACxH,UAAU,CAAC,CAACsH,cAAc,CAAC,CAAC,EAAE;UAC7N,IAAI,CAAC7N,aAAa,CAAC+N,kBAAkB,CAACxH,UAAU,CAAC,CAACsH,cAAc,CAAC,GAAG,IAAI,CAAC7N,aAAa,CAAC+N,kBAAkB,CAACxH,UAAU,CAAC,CAACsH,cAAc,CAAC,CAACK,MAAM,CAAC,UAAUC,iBAAiB,EAAE;YACtK,OAAOlL,UAAU,CAACiE,SAAS,KAAKiH,iBAAiB,CAACC,SAAS;UAC/D,CAAC,CAAC;QACN;MACJ;IACJ;IACA;IACA,IAAIC,mBAAmB,GAAG,IAAI,CAACrO,aAAa,CAACsO,6BAA6B;IAC1E,IAAID,mBAAmB,IAAIA,mBAAmB,CAAC9H,UAAU,CAAC,EAAE;MACxD;MACA,IAAIgI,uBAAuB,GAAGF,mBAAmB,CAAC9H,UAAU,CAAC;MAC7D,IAAIgI,uBAAuB,IAAIA,uBAAuB,CAACV,cAAc,CAAC,EAAE;QACpE,KAAK,IAAIjF,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG2F,uBAAuB,CAACV,cAAc,CAAC,CAACzI,MAAM,EAAEwD,CAAC,EAAE,EAAE;UACrE;UACA,IAAI3F,UAAU,CAACiE,SAAS,KAAKqH,uBAAuB,CAACV,cAAc,CAAC,CAACjF,CAAC,CAAC,CAACwF,SAAS,EAAE;YAC/E,IAAI,CAACpO,aAAa,CAACsO,6BAA6B,CAAC/H,UAAU,CAAC,CAACsH,cAAc,CAAC,CAACnI,MAAM,CAACkD,CAAC,EAAE,CAAC,CAAC;YACzF;UACJ;QACJ;MACJ;IACJ;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;EACIlK,UAAU,CAACkC,SAAS,CAACgD,gBAAgB,GAAG,UAAUD,YAAY,EAAE;IAC5D;IACA,IAAIV,UAAU;IACd,IAAIN,EAAE;IACN,IAAI,OAAOgB,YAAY,KAAK,QAAQ,EAAE;MAClCV,UAAU,GAAGU,YAAY;MACzBhB,EAAE,GAAGM,UAAU,CAACU,YAAY;MAC5BV,UAAU,GAAG,IAAI,CAACuL,uCAAuC,CAAC7L,EAAE,CAAC;IACjE;IACA,IAAI,OAAOgB,YAAY,KAAK,QAAQ,EAAE;MAClCV,UAAU,GAAG,IAAI,CAACuL,uCAAuC,CAAC7K,YAAY,CAAC;MACvEhB,EAAE,GAAGgB,YAAY;IACrB;IACA,IAAIV,UAAU,EAAE;MACZ,IAAIuD,SAAS,GAAGrJ,iBAAiB,CAAC8F,UAAU,CAACsD,UAAU,CAAC,GAAGtD,UAAU,CAACuD,SAAS,GAAGvD,UAAU,CAACsD,UAAU;MACvG,IAAIkI,QAAQ,GAAG,KAAK;MACpBA,QAAQ,GAAG,IAAI,CAACC,kBAAkB,CAAClI,SAAS,CAAC;MAC7C,IAAImI,eAAe,GAAG,IAAI,CAAChQ,SAAS,CAACiQ,0BAA0B;MAC/D;MACA,IAAI3L,UAAU,IAAIuD,SAAS,IAAI,CAAC,EAAE;QAC9B,IAAIvD,UAAU,CAACgD,mBAAmB,KAAK,YAAY,EAAE;UACjD,IAAIhD,UAAU,CAAC4L,IAAI,IAAI5L,UAAU,CAACwG,MAAM,EAAE;YACtC;YACA,IAAIqF,WAAW,GAAG,IAAI,CAAC9O,aAAa,CAAC+O,QAAQ,CAACvI,SAAS,CAAC,CAACmD,GAAG,GAAG,IAAI,CAAC3J,aAAa,CAACgP,aAAa,CAAC,CAAC,GAAI,IAAI,CAACC,gBAAgB,CAAChM,UAAU,CAAC,GAAI,IAAI,CAACjD,aAAa,CAACgP,aAAa,CAAC,CAAC;YAC5K,IAAI,CAAC,IAAI,CAAChQ,sBAAsB,EAAE;cAC9B,IAAIkQ,QAAQ,GAAG,CAACJ,WAAW,GAAG,EAAE,EAAE/M,QAAQ,CAAC,CAAC;cAC5C;cACA,IAAI,CAAC/B,aAAa,CAACmP,eAAe,CAACC,SAAS,GAAGhL,QAAQ,CAAC8K,QAAQ,CAAC;cACjE,IAAI,CAAClP,aAAa,CAACmP,eAAe,CAACE,UAAU,GAAG,IAAI,CAACC,iBAAiB,CAACrM,UAAU,CAAC,GAAG,IAAI,CAACjD,aAAa,CAACgP,aAAa,CAAC,CAAC;YAC3H;UACJ,CAAC,MACI;YACD,IAAI,IAAI,CAACrQ,SAAS,CAAC4Q,UAAU,EAAE;cAC3B,IAAI,CAAC5Q,SAAS,CAAC4Q,UAAU,CAACC,QAAQ,CAAChJ,SAAS,GAAG,CAAC,CAAC;YACrD;UACJ;QACJ,CAAC,MACI;UACD,IAAIvD,UAAU,CAACwG,MAAM,EAAE;YACnB;YACA,IAAIqF,WAAW,GAAG,IAAI,CAAC9O,aAAa,CAAC+O,QAAQ,CAACvI,SAAS,CAAC,CAACmD,GAAG,GAAG,IAAI,CAAC3J,aAAa,CAACgP,aAAa,CAAC,CAAC,GAAI/L,UAAU,CAACwG,MAAM,CAACE,GAAG,GAAI,IAAI,CAAC3J,aAAa,CAACgP,aAAa,CAAC,CAAC;YAChK,IAAIK,UAAU,GAAGpM,UAAU,CAACwG,MAAM,CAACC,IAAI,GAAG,IAAI,CAAC1J,aAAa,CAACgP,aAAa,CAAC,CAAC;YAC5E,IAAI/L,UAAU,CAACgD,mBAAmB,KAAK,KAAK,EAAE;cAC1C;cACA6I,WAAW,GAAG,IAAI,CAAC9O,aAAa,CAAC+O,QAAQ,CAACvI,SAAS,CAAC,CAACmD,GAAG,GAAG,IAAI,CAAC3J,aAAa,CAACgP,aAAa,CAAC,CAAC,GAAI/L,UAAU,CAACwG,MAAM,CAAClE,CAAC,GAAI,IAAI,CAACvF,aAAa,CAACgP,aAAa,CAAC,CAAC;cAC1JK,UAAU,GAAGpM,UAAU,CAACwG,MAAM,CAACtE,CAAC,GAAG,IAAI,CAACnF,aAAa,CAACgP,aAAa,CAAC,CAAC;YACzE;YACA,IAAI,CAAC,IAAI,CAAChQ,sBAAsB,EAAE;cAC9B,IAAIyQ,QAAQ,GAAG,CAACX,WAAW,GAAG,EAAE,EAAE/M,QAAQ,CAAC,CAAC;cAC5C;cACA,IAAI,CAAC/B,aAAa,CAACmP,eAAe,CAACC,SAAS,GAAGhL,QAAQ,CAACqL,QAAQ,CAAC;cACjE,IAAI,CAACzP,aAAa,CAACmP,eAAe,CAACE,UAAU,GAAGA,UAAU;YAC9D;UACJ,CAAC,MACI;YACD,IAAI,IAAI,CAAC1Q,SAAS,CAAC4Q,UAAU,EAAE;cAC3B,IAAI,CAAC5Q,SAAS,CAAC4Q,UAAU,CAACC,QAAQ,CAAChJ,SAAS,GAAG,CAAC,CAAC;YACrD;UACJ;QACJ;QACA,IAAIiI,QAAQ,EAAE;UACV,IAAI,IAAI,CAAC9O,aAAa,EAAE;YACpB,IAAI,CAAChB,SAAS,CAAC2K,cAAc,CAAC,IAAI,CAAC3J,aAAa,CAAC;UACrD;UACA,IAAI,CAAChB,SAAS,CAAC2K,cAAc,CAAC9C,SAAS,CAAC;UACxC,IAAI,CAAC7G,aAAa,GAAG6G,SAAS;UAC9B,IAAIvD,UAAU,CAACgD,mBAAmB,KAAK,YAAY,EAAE;YACjD;YACA,IAAI,CAACtH,SAAS,CAACmE,gBAAgB,CAAC5C,0BAA0B,CAACwP,+BAA+B,CAAClJ,SAAS,EAAE,IAAI,CAAC;YAC3G;YACA,IAAImJ,MAAM,GAAG,IAAI,CAAC3P,aAAa,CAAC4P,UAAU,CAAC,oBAAoB,GAAGpJ,SAAS,CAAC;YAC5E;YACA,IAAIqJ,oBAAoB,GAAG,IAAI,CAACC,wBAAwB,CAACtJ,SAAS,EAAEvD,UAAU,CAAC;YAC/E,IAAI4M,oBAAoB,EAAE;cACtB,IAAI,CAAC3P,0BAA0B,CAAC6P,2BAA2B,GAAG,IAAI;cAClE,IAAI,CAAC7P,0BAA0B,CAAC8P,oBAAoB,GAAG,IAAI;cAC3D,IAAI,CAAC9P,0BAA0B,CAAC+P,kBAAkB,CAAC,IAAI,CAAC;cACxD,IAAI,CAAC/P,0BAA0B,CAACgQ,uBAAuB,GAAG,IAAI;cAC9D,IAAI,CAAChQ,0BAA0B,CAAC0D,gBAAgB,CAACiM,oBAAoB,EAAEF,MAAM,EAAEnJ,SAAS,EAAE,IAAI,EAAE,IAAI,CAAC;cACrG,IAAI,CAACtG,0BAA0B,CAAC6P,2BAA2B,GAAGF,oBAAoB;cAClF,IAAI,CAAC3P,0BAA0B,CAACiQ,2BAA2B,GAAG3J,SAAS;cACvE,IAAI,CAACtG,0BAA0B,CAACkQ,8BAA8B,CAAC,IAAI,CAAC;cACpE,IAAI,CAAClQ,0BAA0B,CAAC8P,oBAAoB,GAAG,KAAK;cAC5D,IAAI,IAAI,CAACrR,SAAS,CAAC2C,aAAa,IAAI,IAAI,CAAC3C,SAAS,CAAC0R,uBAAuB,EAAE;gBACxE,IAAI,CAAC1R,SAAS,CAAC2C,aAAa,CAACE,uBAAuB,CAAC8O,eAAe,GAAG,IAAI;gBAC3E;gBACA,IAAI,CAAC3R,SAAS,CAAC2C,aAAa,CAACE,uBAAuB,CAAC+O,qBAAqB,CAAC,IAAI,CAAC5R,SAAS,CAAC2C,aAAa,CAACkP,cAAc,CAAC;cAC3H;YACJ;UACJ,CAAC,MACI,IAAIvN,UAAU,CAACgD,mBAAmB,KAAK,OAAO,IAAIhD,UAAU,CAACiJ,mBAAmB,KAAK,OAAO,EAAE;YAC/F,IAAI,CAACvN,SAAS,CAAC8R,MAAM,CAAC,CAACxN,UAAU,CAACmI,SAAS,CAAC,EAAEuD,eAAe,CAAC;YAC9D,IAAI,CAAChQ,SAAS,CAACsE,UAAU,CAACyN,qBAAqB,CAAC,CAAC;UACrD,CAAC,MACI,IAAIzN,UAAU,CAACgD,mBAAmB,KAAK,QAAQ,IAAIhD,UAAU,CAACiJ,mBAAmB,KAAK,QAAQ,EAAE;YACjG,IAAI,CAACvN,SAAS,CAAC8R,MAAM,CAAC,CAACxN,UAAU,CAACU,YAAY,CAAC,EAAEgL,eAAe,CAAC;YACjE,IAAI,CAAChQ,SAAS,CAACsE,UAAU,CAACyN,qBAAqB,CAAC,CAAC;UACrD,CAAC,MACI;YACD,IAAI,CAAC/R,SAAS,CAAC8R,MAAM,CAAC,CAACxN,UAAU,CAACmI,SAAS,CAAC,EAAEuD,eAAe,CAAC;YAC9D,IAAI,CAAChQ,SAAS,CAACsE,UAAU,CAACyN,qBAAqB,CAAC,CAAC;UACrD;UACA;UACA,IAAIC,cAAc,GAAGnO,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAC9D,SAAS,CAAC+D,OAAO,CAACC,EAAE,GAAG,eAAe,CAAC;UACzF,IAAIgO,cAAc,IAAIA,cAAc,CAACjG,KAAK,CAACkG,OAAO,KAAK,OAAO,EAAE;YAC5D;YACA,IAAIC,eAAe,GAAGrO,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAC9D,SAAS,CAAC+D,OAAO,CAACC,EAAE,GAAG,qBAAqB,GAAG,IAAI,CAAChE,SAAS,CAACiE,iBAAiB,CAAC;YACnI,IAAIiO,eAAe,EAAE;cACjBA,eAAe,CAACC,aAAa,CAAC,CAAC,CAAC,CAACC,UAAU,CAAC,IAAI,CAAC;YACrD;YACA;YACA,IAAIC,WAAW,GAAGxO,QAAQ,CAACC,cAAc,CAACE,EAAE,CAAC;YAC7C,IAAIqO,WAAW,EAAE;cACb,IAAI,CAACA,WAAW,CAACzG,SAAS,CAACC,QAAQ,CAAC,sBAAsB,CAAC,EAAE;gBACzDwG,WAAW,CAACC,UAAU,CAACC,KAAK,CAAC,CAAC;cAClC;YACJ;UACJ;QACJ,CAAC,MACI,IAAIjO,UAAU,CAACmI,SAAS,IAAKnI,UAAU,CAACgD,mBAAmB,KAAK,YAAY,IAAIhD,UAAU,CAACkO,iBAAiB,KAAK,qBAAsB,EAAE;UAC1I,IAAI,CAAC3R,kBAAkB,GAAGmD,EAAE;UAC5B,IAAI,CAAClD,oBAAoB,GAAG,IAAI;UAChC,IAAI,CAACC,mBAAmB,GAAG8G,SAAS;UACpC,IAAI,CAAC4K,8BAA8B,CAAC,CAAC;QACzC;MACJ;MACA,IAAI,CAAC3C,QAAQ,IAAI,CAACxL,UAAU,CAACmI,SAAS,EAAE;QACpC,IAAIf,WAAW,GAAG,IAAI,CAACgH,mCAAmC,CAACpO,UAAU,EAAEN,EAAE,EAAE6D,SAAS,CAAC;QACrF6D,WAAW,CAAC7D,SAAS,GAAGA,SAAS;QACjC,IAAI,CAAC7H,SAAS,CAACsE,UAAU,CAAC+D,SAAS,CAACR,SAAS,EAAE,IAAI,EAAE6D,WAAW,EAAE,QAAQ,EAAE,EAAE,EAAEA,WAAW,EAAEA,WAAW,CAAC;QACzG,IAAI,CAAC/K,mBAAmB,CAACqG,IAAI,CAAC0E,WAAW,CAAC;QAC1C,IAAIpD,SAAS,GAAGzE,QAAQ,CAACC,cAAc,CAACQ,UAAU,CAACU,YAAY,CAAC;QAChE,IAAI,CAACwD,qBAAqB,CAACF,SAAS,CAAC;MACzC;IACJ;EACJ,CAAC;EACD;EACAvI,UAAU,CAACkC,SAAS,CAACyQ,mCAAmC,GAAG,UAAUpO,UAAU,EAAEN,EAAE,EAAE6D,SAAS,EAAE;IAC5F,IAAI6D,WAAW;IACf,IAAIqB,oBAAoB,GAAG,IAAI,CAAC/M,SAAS,CAAC+M,oBAAoB;IAC9D,IAAIA,oBAAoB,CAACtG,MAAM,EAAE;MAC7B,IAAI6F,iBAAiB,GAAGS,oBAAoB,CAACwC,MAAM,CAAC,UAAUoD,eAAe,EAAE;QAC3E,OAAOA,eAAe,CAAC3N,YAAY,KAAKhB,EAAE;MAC9C,CAAC,CAAC;MACF0H,WAAW,GAAGY,iBAAiB,CAAC,CAAC,CAAC;MAClC,IAAI,CAAC3C,0BAA0B,CAAC2C,iBAAiB,CAAC,CAAC,CAAC,CAAC;IACzD;IACA,IAAI4C,cAAc,GAAG,IAAI,CAAC0D,mBAAmB,CAACtO,UAAU,CAAC;IACzD,IAAIuO,UAAU,GAAG,IAAI,CAACxR,aAAa,CAACsO,6BAA6B,CAAC9H,SAAS,CAAC;IAC5E,IAAIgL,UAAU,CAAC3D,cAAc,CAAC,CAACzI,MAAM,EAAE;MACnC,KAAK,IAAID,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGqM,UAAU,CAAC3D,cAAc,CAAC,CAACzI,MAAM,EAAED,CAAC,EAAE,EAAE;QACxD,IAAIqM,UAAU,CAAC3D,cAAc,CAAC,CAAC1I,CAAC,CAAC,CAACiJ,SAAS,KAAKnL,UAAU,CAACU,YAAY,EAAE;UACrE,IAAI7C,IAAI,GAAG0Q,UAAU,CAAC3D,cAAc,CAAC,CAAC1I,CAAC,CAAC;UACxC,IAAI,CAAClG,mCAAmC,CAAC0G,IAAI,CAAC7E,IAAI,CAAC;UACnD0Q,UAAU,CAAC3D,cAAc,CAAC,CAACnI,MAAM,CAACP,CAAC,EAAE,CAAC,CAAC;UACvC;QACJ;MACJ;IACJ;IACA,OAAOkF,WAAW;EACtB,CAAC;EACD;EACA3L,UAAU,CAACkC,SAAS,CAAC2Q,mBAAmB,GAAG,UAAUtO,UAAU,EAAE;IAC7D,IAAI4K,cAAc;IAClB,IAAI5K,UAAU,CAACN,EAAE,IAAIM,UAAU,CAACN,EAAE,CAAC8O,WAAW,CAAC,CAAC,KAAK,OAAO,EAAE;MAC1D5D,cAAc,GAAG,iBAAiB;IACtC,CAAC,MACI,IAAI5K,UAAU,CAACN,EAAE,IAAIM,UAAU,CAACN,EAAE,CAAC8O,WAAW,CAAC,CAAC,KAAK,SAAS,EAAE;MACjE5D,cAAc,GAAG,wBAAwB;IAC7C,CAAC,MACI,IAAI5K,UAAU,CAACN,EAAE,IAAIM,UAAU,CAACN,EAAE,CAAC8O,WAAW,CAAC,CAAC,KAAK,UAAU,EAAE;MAClE5D,cAAc,GAAG,oBAAoB;IACzC,CAAC,MACI,IAAI5K,UAAU,CAACgD,mBAAmB,IAAIhD,UAAU,CAACgD,mBAAmB,CAACwL,WAAW,CAAC,CAAC,KAAK,YAAY,EAAE;MACtG5D,cAAc,GAAG,sBAAsB;IAC3C,CAAC,MACI,IAAI5K,UAAU,CAACgD,mBAAmB,IAAIhD,UAAU,CAACgD,mBAAmB,CAACwL,WAAW,CAAC,CAAC,KAAK,OAAO,EAAE;MACjG5D,cAAc,GAAG,kBAAkB;IACvC,CAAC,MACI,IAAI5K,UAAU,CAACgD,mBAAmB,IAAIhD,UAAU,CAACgD,mBAAmB,CAACwL,WAAW,CAAC,CAAC,KAAK,KAAK,EAAE;MAC/F5D,cAAc,GAAG,wBAAwB;IAC7C,CAAC,MACI,IAAI5K,UAAU,CAACgD,mBAAmB,IAAIhD,UAAU,CAACgD,mBAAmB,CAACwL,WAAW,CAAC,CAAC,KAAK,QAAQ,EAAE;MAClG5D,cAAc,GAAG,uBAAuB;IAC5C;IACA,OAAOA,cAAc;EACzB,CAAC;EACD;EACAnP,UAAU,CAACkC,SAAS,CAACuG,qBAAqB,GAAG,UAAUF,SAAS,EAAE;IAC9D,IAAIA,SAAS,EAAE;MACX,IAAIA,SAAS,CAAC2D,aAAa,CAAC8G,iBAAiB,KAAK,CAAC,EAAE;QACjD,IAAI,CAAClR,2BAA2B,CAACmR,wBAAwB,CAAC1K,SAAS,CAAC;MACxE,CAAC,MACI;QACDA,SAAS,CAACsB,MAAM,CAAC,CAAC;MACtB;IACJ;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;EACI7J,UAAU,CAACkC,SAAS,CAAC0I,cAAc,GAAG,YAAY;IAC9C,IAAI,IAAI,CAACpJ,0BAA0B,IAAI,IAAI,CAACA,0BAA0B,CAAC6P,2BAA2B,EAAE;MAChG,IAAI,CAAC7P,0BAA0B,CAAC0R,8BAA8B,CAAC,CAAC;MAChE,IAAI,CAAC1R,0BAA0B,CAACwP,+BAA+B,CAAC,IAAI,CAACxP,0BAA0B,CAACiQ,2BAA2B,CAAC;IAChI,CAAC,MACI;MACD,IAAI,IAAI,CAACxR,SAAS,CAAC6F,aAAa,IAAI,IAAI,CAAC7F,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,EAAE;QAC7E;QACA,IAAI0J,iBAAiB,GAAG,IAAI,CAACxP,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC;QACnE,IAAI,CAAC9F,SAAS,CAAC2K,cAAc,CAAC6E,iBAAiB,CAAC3H,SAAS,CAAC;MAC9D,CAAC,MACI;QACD,IAAI,CAAC7H,SAAS,CAAC2K,cAAc,CAAC,IAAI,CAAC3K,SAAS,CAACiE,iBAAiB,GAAG,CAAC,CAAC;MACvE;IACJ;EACJ,CAAC;EACD;AACJ;AACA;AACA;EACI;EACAlE,UAAU,CAACkC,SAAS,CAACqO,gBAAgB,GAAG,UAAUhM,UAAU,EAAE;IAC1D,IAAIA,UAAU,CAAC4L,IAAI,KAAK5L,UAAU,CAAC4L,IAAI,CAACgD,GAAG,IAAI5O,UAAU,CAAC4L,IAAI,CAAClF,GAAG,CAAC,EAAE;MACjE,OAAO1G,UAAU,CAAC4L,IAAI,CAACgD,GAAG,IAAI5O,UAAU,CAAC4L,IAAI,CAAClF,GAAG;IACrD,CAAC,MACI;MACD,OAAO1G,UAAU,CAACwG,MAAM,CAAC,CAAC,CAAC,CAACoI,GAAG,IAAI5O,UAAU,CAACwG,MAAM,CAAC,CAAC,CAAC,CAACE,GAAG;IAC/D;EACJ,CAAC;EACD;AACJ;AACA;EACI;EACAjL,UAAU,CAACkC,SAAS,CAAC0O,iBAAiB,GAAG,UAAUrM,UAAU,EAAE;IAC3D,IAAIA,UAAU,CAAC4L,IAAI,EAAE;MACjB,IAAI5L,UAAU,CAAC4L,IAAI,CAACiD,IAAI,EAAE;QACtB,OAAO7O,UAAU,CAAC4L,IAAI,CAACiD,IAAI;MAC/B,CAAC,MACI;QACD,OAAO7O,UAAU,CAAC4L,IAAI,CAACnF,IAAI;MAC/B;IACJ,CAAC,MACI;MACD,IAAIzG,UAAU,CAACwG,MAAM,CAAC,CAAC,CAAC,CAACqI,IAAI,EAAE;QAC3B,OAAO7O,UAAU,CAACwG,MAAM,CAAC,CAAC,CAAC,CAACqI,IAAI;MACpC,CAAC,MACI;QACD,OAAO7O,UAAU,CAACwG,MAAM,CAAC,CAAC,CAAC,CAACC,IAAI;MACpC;IACJ;EACJ,CAAC;EACD;AACJ;AACA;EACIhL,UAAU,CAACkC,SAAS,CAACwQ,8BAA8B,GAAG,YAAY;IAC9D,IAAI,IAAI,CAAC3R,oBAAoB,IAAI,IAAI,CAACD,kBAAkB,EAAE;MACtD;MACA,IAAIyD,UAAU,GAAG,IAAI,CAACuL,uCAAuC,CAAC,IAAI,CAAChP,kBAAkB,CAAC;MACtF,IAAImD,EAAE,GAAG,IAAI,CAACnD,kBAAkB;MAChC,IAAIgH,SAAS,GAAGvD,UAAU,CAACsD,UAAU;MACrC,IAAIoI,eAAe,GAAG,IAAI,CAAChQ,SAAS,CAACiQ,0BAA0B;MAC/D,IAAI3L,UAAU,IAAK,IAAI,CAACvD,mBAAmB,IAAI,CAAE,IAAI,IAAI,CAACA,mBAAmB,KAAK8G,SAAS,EAAE;QACzF,IAAI,IAAI,CAAC7G,aAAa,EAAE;UACpB,IAAI,CAAChB,SAAS,CAAC2K,cAAc,CAAC,IAAI,CAAC3J,aAAa,CAAC;QACrD;QACA,IAAI,CAAChB,SAAS,CAAC2K,cAAc,CAAC9C,SAAS,CAAC;QACxC,IAAI,CAAC7G,aAAa,GAAG6G,SAAS;QAC9B,IAAIvD,UAAU,CAACgD,mBAAmB,KAAK,YAAY,EAAE;UACjD;UACA,IAAI,CAACtH,SAAS,CAACmE,gBAAgB,CAAC5C,0BAA0B,CAACwP,+BAA+B,CAAClJ,SAAS,EAAE,IAAI,CAAC;UAC3G;UACA,IAAImJ,MAAM,GAAG,IAAI,CAAC3P,aAAa,CAAC4P,UAAU,CAAC,oBAAoB,GAAGpJ,SAAS,CAAC;UAC5E;UACA,IAAIqJ,oBAAoB,GAAG,IAAI,CAACC,wBAAwB,CAACtJ,SAAS,EAAEvD,UAAU,CAAC;UAC/E,IAAI4M,oBAAoB,EAAE;YACtB,IAAI,CAAC3P,0BAA0B,CAAC6P,2BAA2B,GAAG,IAAI;YAClE,IAAI,CAAC7P,0BAA0B,CAAC8P,oBAAoB,GAAG,IAAI;YAC3D,IAAI,CAAC9P,0BAA0B,CAAC+P,kBAAkB,CAAC,IAAI,CAAC;YACxD,IAAI,CAAC/P,0BAA0B,CAACgQ,uBAAuB,GAAG,IAAI;YAC9D,IAAI,CAAChQ,0BAA0B,CAAC0D,gBAAgB,CAACiM,oBAAoB,EAAEF,MAAM,EAAEnJ,SAAS,CAAC;YACzF,IAAI,CAACtG,0BAA0B,CAAC6P,2BAA2B,GAAGF,oBAAoB;YAClF,IAAI,CAAC3P,0BAA0B,CAACiQ,2BAA2B,GAAG3J,SAAS;YACvE,IAAI,CAACtG,0BAA0B,CAACkQ,8BAA8B,CAAC,IAAI,CAAC;YACpE,IAAI,CAAClQ,0BAA0B,CAAC8P,oBAAoB,GAAG,KAAK;YAC5D,IAAI,IAAI,CAACrR,SAAS,CAAC2C,aAAa,IAAI,IAAI,CAAC3C,SAAS,CAAC0R,uBAAuB,EAAE;cACxE,IAAI,CAAC1R,SAAS,CAAC2C,aAAa,CAACE,uBAAuB,CAAC8O,eAAe,GAAG,IAAI;cAC3E;cACA,IAAI,CAAC3R,SAAS,CAAC2C,aAAa,CAACE,uBAAuB,CAAC+O,qBAAqB,CAAC,IAAI,CAAC5R,SAAS,CAAC2C,aAAa,CAACkP,cAAc,CAAC;YAC3H;UACJ;QACJ,CAAC,MACI,IAAIvN,UAAU,CAACgD,mBAAmB,KAAK,OAAO,IAAIhD,UAAU,CAACiJ,mBAAmB,KAAK,OAAO,EAAE;UAC/F,IAAI,CAACvN,SAAS,CAAC8R,MAAM,CAAC,CAACxN,UAAU,CAACmI,SAAS,CAAC,EAAEuD,eAAe,CAAC;UAC9D,IAAI,CAAChQ,SAAS,CAACsE,UAAU,CAACyN,qBAAqB,CAAC,CAAC;QACrD,CAAC,MACI,IAAIzN,UAAU,CAACgD,mBAAmB,KAAK,QAAQ,IAAIhD,UAAU,CAACiJ,mBAAmB,KAAK,QAAQ,EAAE;UACjG,IAAI,CAACvN,SAAS,CAAC8R,MAAM,CAAC,CAACxN,UAAU,CAACU,YAAY,CAAC,EAAEgL,eAAe,CAAC;UACjE,IAAI,CAAChQ,SAAS,CAACsE,UAAU,CAACyN,qBAAqB,CAAC,CAAC;QACrD,CAAC,MACI,IAAIzN,UAAU,CAACmI,SAAS,EAAE;UAC3B,IAAI,CAACzM,SAAS,CAAC8R,MAAM,CAAC,CAACxN,UAAU,CAACmI,SAAS,CAAC,EAAEuD,eAAe,CAAC;UAC9D,IAAI,CAAChQ,SAAS,CAACsE,UAAU,CAACyN,qBAAqB,CAAC,CAAC;QACrD,CAAC,MACI;UACD,IAAI,CAAC/R,SAAS,CAAC8R,MAAM,CAAC,CAACxN,UAAU,CAACU,YAAY,CAAC,EAAEgL,eAAe,CAAC;UACjE,IAAI,CAAChQ,SAAS,CAACsE,UAAU,CAACyN,qBAAqB,CAAC,CAAC;QACrD;QACA;QACA,IAAIC,cAAc,GAAGnO,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAC9D,SAAS,CAAC+D,OAAO,CAACC,EAAE,GAAG,eAAe,CAAC;QACzF,IAAIgO,cAAc,IAAIA,cAAc,CAACjG,KAAK,CAACkG,OAAO,KAAK,OAAO,EAAE;UAC5D;UACA,IAAIC,eAAe,GAAGrO,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAC9D,SAAS,CAAC+D,OAAO,CAACC,EAAE,GAAG,qBAAqB,GAAG,IAAI,CAAChE,SAAS,CAACiE,iBAAiB,CAAC;UACnI,IAAIiO,eAAe,EAAE;YACjBA,eAAe,CAACC,aAAa,CAAC,CAAC,CAAC,CAACC,UAAU,CAAC,IAAI,CAAC;UACrD;UACA;UACA,IAAIC,WAAW,GAAGxO,QAAQ,CAACC,cAAc,CAACE,EAAE,CAAC;UAC7C,IAAIqO,WAAW,EAAE;YACb,IAAI,CAACA,WAAW,CAACzG,SAAS,CAACC,QAAQ,CAAC,sBAAsB,CAAC,EAAE;cACzDwG,WAAW,CAACC,UAAU,CAACC,KAAK,CAAC,CAAC;YAClC;UACJ;QACJ;MACJ;MACA,IAAI,CAACzR,oBAAoB,GAAG,KAAK;MACjC,IAAI,CAACD,kBAAkB,GAAG,IAAI;MAC9B,IAAI,CAACE,mBAAmB,GAAG,IAAI;IACnC;EACJ,CAAC;EACD;AACJ;AACA;AACA;EACIhB,UAAU,CAACkC,SAAS,CAAC8N,kBAAkB,GAAG,UAAUlI,SAAS,EAAE;IAC3D,IAAIiI,QAAQ,GAAG,KAAK;IACpB;IACA,IAAIsD,QAAQ,GAAG,IAAI,CAAC/R,aAAa,CAACgS,iBAAiB;IACnD,IAAID,QAAQ,EAAE;MACV,KAAK,IAAInJ,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGmJ,QAAQ,CAAC3M,MAAM,EAAEwD,CAAC,EAAE,EAAE;QACtC,IAAImJ,QAAQ,CAACnJ,CAAC,CAAC,KAAKpC,SAAS,EAAE;UAC3BiI,QAAQ,GAAG,IAAI;UACf,OAAOA,QAAQ;QACnB;MACJ;IACJ;IACA,OAAOA,QAAQ;EACnB,CAAC;EACD;EACA/P,UAAU,CAACkC,SAAS,CAACqR,sCAAsC,GAAG,UAAUhP,UAAU,EAAE;IAChF;IACA,IAAIoH,WAAW,GAAG,IAAI,CAAC1L,SAAS,CAAC8F,WAAW;IAC5C,IAAIxB,UAAU,EAAE;MACZ,IAAIA,UAAU,CAACgD,mBAAmB,KAAK,YAAY,EAAE;QACjD,OAAOhD,UAAU,CAACsD,UAAU;MAChC,CAAC,MACI;QACD,IAAI8D,WAAW,EAAE;UACb,KAAK,IAAIzB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGyB,WAAW,CAACjF,MAAM,EAAEwD,CAAC,EAAE,EAAE;YACzC,IAAIyB,WAAW,CAACzB,CAAC,CAAC,CAAC1B,SAAS,KAAKjE,UAAU,CAACU,YAAY,EAAE;cACtD,OAAO0G,WAAW,CAACzB,CAAC,CAAC,CAACpC,SAAS;YACnC;UACJ;QACJ;MACJ;IACJ;EACJ,CAAC;EACD;EACA9H,UAAU,CAACkC,SAAS,CAAC4N,uCAAuC,GAAG,UAAU7K,YAAY,EAAE;IACnF;IACA,IAAI0G,WAAW,GAAG,IAAI,CAAC1L,SAAS,CAAC+M,oBAAoB;IACrD,IAAIrB,WAAW,IAAI1G,YAAY,EAAE;MAC7B,KAAK,IAAIiF,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGyB,WAAW,CAACjF,MAAM,EAAEwD,CAAC,EAAE,EAAE;QACzC,IAAIyB,WAAW,CAACzB,CAAC,CAAC,CAACjF,YAAY,KAAKA,YAAY,EAAE;UAC9C,OAAO0G,WAAW,CAACzB,CAAC,CAAC;QACzB;MACJ;IACJ;IACA,IAAI,IAAI,CAACjK,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAACW,MAAM,KAAK,CAAC,EACrD,IAAI,CAACzG,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAACkB,IAAI,CAAC,IAAI,CAAChH,SAAS,CAAC8J,SAAS,CAAC9E,YAAY,CAAC,CAAC;EAC7F,CAAC;EACD;EACAjF,UAAU,CAACkC,SAAS,CAACkP,wBAAwB,GAAG,UAAUtJ,SAAS,EAAEvD,UAAU,EAAE;IAC7E;IACA,IAAIiP,WAAW,GAAGvN,MAAM,CAACC,cAAc,CAACC,OAAO,CAAC,IAAI,CAAC7E,aAAa,CAAC8E,UAAU,GAAG,yBAAyB,CAAC;IAC1G,IAAI,IAAI,CAAC9E,aAAa,CAACmS,eAAe,EAAE;MACpCD,WAAW,GAAG,IAAI,CAAClS,aAAa,CAAC2N,iBAAiB,CAAC,IAAI,CAAC3N,aAAa,CAAC8E,UAAU,GAAG,yBAAyB,CAAC;IACjH;IACA,IAAIoN,WAAW,EAAE;MACb;MACA,IAAIE,WAAW,GAAGpN,IAAI,CAACC,KAAK,CAACiN,WAAW,CAAC;MACzC,IAAIzK,KAAK,GAAG,IAAI,CAAC4K,iBAAiB,CAACD,WAAW,EAAE5L,SAAS,CAAC;MAC1D,IAAI4L,WAAW,CAAC3K,KAAK,CAAC,EAAE;QACpB,KAAK,IAAImB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGwJ,WAAW,CAAC3K,KAAK,CAAC,CAAChD,WAAW,CAACW,MAAM,EAAEwD,CAAC,EAAE,EAAE;UAC5D,IAAIwJ,WAAW,CAAC3K,KAAK,CAAC,CAAChD,WAAW,CAACmE,CAAC,CAAC,CAAC1B,SAAS,KAAKjE,UAAU,CAACU,YAAY,EAAE;YACzE,OAAOyO,WAAW,CAAC3K,KAAK,CAAC,CAAChD,WAAW,CAACmE,CAAC,CAAC;UAC5C;QACJ;QACA,OAAO,IAAI;MACf;IACJ,CAAC,MACI;MACD,OAAO,IAAI;IACf;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;EACIlK,UAAU,CAACkC,SAAS,CAAC0G,iBAAiB,GAAG,UAAUxG,IAAI,EAAE6F,WAAW,EAAE;IAClE,IAAIU,SAAS;IACb,IAAIV,WAAW,KAAK,EAAE,IAAIxJ,iBAAiB,CAACwJ,WAAW,CAAC,EAAE;MACtD,QAAQ7F,IAAI;QACR,KAAK,MAAM;UACPuG,SAAS,GAAG,MAAM;UAClB;QACJ,KAAK,oBAAoB;UACrBA,SAAS,GAAG,OAAO;UACnB;QACJ,KAAK,WAAW;UACZA,SAAS,GAAG,WAAW;UACvB;QACJ,KAAK,SAAS;UACVA,SAAS,GAAG,QAAQ;UACpB;QACJ,KAAK,SAAS;UACVA,SAAS,GAAG,SAAS;UACrB;QACJ,KAAK,OAAO;UACRA,SAAS,GAAG,OAAO;UACnB;QACJ,KAAK,OAAO;UACRA,SAAS,GAAG,OAAO;UACnB;QACJ,KAAK,UAAU;UACXA,SAAS,GAAG,UAAU;UACtB;QACJ,KAAK,KAAK;UACNA,SAAS,GAAG,KAAK;UACjB;QACJ,KAAK,aAAa;UACdA,SAAS,GAAG,aAAa;UACzB;MACR;IACJ,CAAC,MACI;MACD,QAAQV,WAAW;QACf,KAAK,UAAU;UACXU,SAAS,GAAG,UAAU;UACtB;QACJ,KAAK,WAAW;UACZA,SAAS,GAAG,WAAW;UACvB;QACJ,KAAK,MAAM;UACPA,SAAS,GAAG,MAAM;UAClB;QACJ,KAAK,QAAQ;UACTA,SAAS,GAAG,QAAQ;UACpB;QACJ,KAAK,QAAQ;UACTA,SAAS,GAAG,QAAQ;UACpB;MACR;IACJ;IACA,OAAOA,SAAS;EACpB,CAAC;EACD;AACJ;AACA;AACA;AACA;EACI3I,UAAU,CAACkC,SAAS,CAAC0R,kBAAkB,GAAG,UAAU/L,UAAU,EAAE5C,YAAY,EAAE;IAC1E,IAAI4O,mBAAmB,GAAG,IAAI,CAAC5T,SAAS,CAAC6T,OAAO,CAACC,cAAc,CAAClM,UAAU,CAAC;IAC3E,IAAIkB,KAAK,GAAG,IAAI;IAChB,KAAK,IAAImB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG2J,mBAAmB,CAACnN,MAAM,EAAEwD,CAAC,EAAE,EAAE;MACjD,IAAI2J,mBAAmB,CAAC3J,CAAC,CAAC,CAACjG,EAAE,KAAKgB,YAAY,EAAE;QAC5C8D,KAAK,GAAGmB,CAAC;QACT;MACJ;IACJ;IACA,OAAOnB,KAAK;EAChB,CAAC;EACD;AACJ;AACA;EACI/I,UAAU,CAACkC,SAAS,CAAC8R,oBAAoB,GAAG,YAAY;IACpD,IAAI,CAACvT,gBAAgB,GAAG,EAAE;IAC1B,IAAI,CAACC,cAAc,GAAG,EAAE;IACxB,IAAI,CAAC,IAAI,CAACuT,SAAS,EAAE;MACjB,IAAI,CAACC,UAAU,CAAC,CAAC;IACrB;EACJ,CAAC;EACD;AACJ;AACA;EACIlU,UAAU,CAACkC,SAAS,CAACiS,iBAAiB,GAAG,YAAY;IACjD,IAAI,IAAI,CAAClU,SAAS,CAACmU,kBAAkB,EAAE;MACnC,IAAIC,YAAY,GAAGvQ,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAC9D,SAAS,CAAC+D,OAAO,CAACC,EAAE,GAAG,eAAe,CAAC;MACvF,IAAIoQ,YAAY,EAAE;QACd,IAAIA,YAAY,CAACrI,KAAK,CAACkG,OAAO,KAAK,MAAM,EAAE;UACvCmC,YAAY,CAACrI,KAAK,CAACkG,OAAO,GAAG,OAAO;UACpC,IAAI1T,OAAO,CAAC8V,QAAQ,IAAI,CAAC5V,QAAQ,CAAC,CAAC,EAAE;YACjC;YACA,IAAI6V,MAAM,GAAGzQ,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAC9D,SAAS,CAAC+D,OAAO,CAACC,EAAE,GAAG,sBAAsB,CAAC;YACxF;YACAsQ,MAAM,CAACC,YAAY,CAAC,IAAI,CAAClT,aAAa,CAACmT,cAAc,CAACC,qBAAqB,EAAE,IAAI,CAACzU,SAAS,CAAC2C,aAAa,CAAC+R,cAAc,CAAC;UAC7H;UACA,IAAI,IAAI,CAACrT,aAAa,CAACmT,cAAc,CAACG,mBAAmB,EAAE;YACvD,IAAI,CAACtT,aAAa,CAACmT,cAAc,CAACG,mBAAmB,CAAC5I,KAAK,CAACkG,OAAO,GAAG,OAAO;UACjF;UACA,IAAI,CAAC5Q,aAAa,CAACmT,cAAc,CAACI,4BAA4B,CAAC,CAAC;UAChE,IAAI,CAAC5U,SAAS,CAACsE,UAAU,CAACzC,2BAA2B,CAACgT,yBAAyB,CAAC,CAAC;UACjF,IAAIrE,eAAe,GAAG3M,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAC9D,SAAS,CAAC+D,OAAO,CAACC,EAAE,GAAG,kBAAkB,CAAC;UAC7F,IAAI8Q,aAAa,GAAGjR,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAC9D,SAAS,CAAC+D,OAAO,CAACC,EAAE,GAAG,oBAAoB,CAAC;UAC7F,IAAIwM,eAAe,EAAE;YACjB,IAAI,IAAI,CAACxQ,SAAS,CAAC+U,SAAS,EAAE;cAC1BvE,eAAe,CAACzE,KAAK,CAAChB,IAAI,GAAG,IAAI,CAAC1J,aAAa,CAACmT,cAAc,CAACQ,uBAAuB,CAAC,CAAC,GAAG,IAAI;YACnG,CAAC,MACI;cACDxE,eAAe,CAACzE,KAAK,CAACkJ,KAAK,GAAG,IAAI,CAAC5T,aAAa,CAACmT,cAAc,CAACQ,uBAAuB,CAAC,CAAC,GAAG,IAAI;YACpG;YACA;YACAxE,eAAe,CAACzE,KAAK,CAACd,KAAK,GAAI,IAAI,CAACjL,SAAS,CAAC+D,OAAO,CAACmR,WAAW,GAAG,IAAI,CAAC7T,aAAa,CAACmT,cAAc,CAACW,sBAAsB,CAAC,CAAC,GAAG,IAAI,CAAC9T,aAAa,CAACmT,cAAc,CAACQ,uBAAuB,CAAC,CAAC,GAAI,IAAI;YACpMF,aAAa,CAAC/I,KAAK,CAACd,KAAK,GAAIuF,eAAe,CAAC4E,WAAW,GAAG,IAAI,CAAC/T,aAAa,CAACmT,cAAc,CAACa,gCAAgC,CAAC,CAAC,GAAI,IAAI;UAC3I;UACA,IAAI,CAAChU,aAAa,CAACiU,eAAe,CAAC,CAAC;UACpC,IAAI,IAAI,CAACtV,SAAS,CAACsE,UAAU,IAAI,IAAI,CAACtE,SAAS,CAACsE,UAAU,CAAC/C,0BAA0B,EAAE;YACnF,IAAI,CAACvB,SAAS,CAACsE,UAAU,CAAC/C,0BAA0B,CAAC+P,kBAAkB,CAAC,IAAI,CAAC;UACjF;UACA,IAAI/S,OAAO,CAAC8V,QAAQ,IAAI,CAAC,IAAI,CAACrU,SAAS,CAACuV,iBAAiB,IAAI,CAAC9W,QAAQ,CAAC,CAAC,EAAE;YACtE2V,YAAY,CAACrI,KAAK,CAACb,MAAM,GAAG,IAAI,CAAC7J,aAAa,CAACmU,mBAAmB,CAACC,YAAY,GAAG,IAAI;YACtF,IAAI,IAAI,CAACzV,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAACW,MAAM,GAAG,CAAC,EAAE;cACrD;cACA,IAAIiP,UAAU,GAAG7R,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAC9D,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,CAACyC,SAAS,CAAC;cAC/F,IAAImN,UAAU,IAAIA,UAAU,CAACC,gBAAgB,CAACnL,QAAQ,CAAC,CAAC,CAAC,IAAIkL,UAAU,CAACC,gBAAgB,CAACnL,QAAQ,CAAC,CAAC,CAAC,CAAC2H,aAAa,EAAE;gBAChHuD,UAAU,CAACC,gBAAgB,CAACnL,QAAQ,CAAC,CAAC,CAAC,CAAC2H,aAAa,CAAC,CAAC,CAAC,CAACyD,cAAc,GAAG,IAAI;cAClF,CAAC,MACI,IAAIF,UAAU,IAAIA,UAAU,CAACC,gBAAgB,CAACxD,aAAa,EAAE;gBAC9DuD,UAAU,CAACC,gBAAgB,CAACxD,aAAa,CAAC,CAAC,CAAC,CAACyD,cAAc,GAAG,IAAI;gBAClEF,UAAU,CAACC,gBAAgB,CAAC5J,KAAK,CAACkG,OAAO,GAAG,OAAO;gBACnDyD,UAAU,CAACC,gBAAgB,CAACnL,QAAQ,CAAC,CAAC,CAAC,GAAGkL,UAAU,CAACC,gBAAgB,CAACnL,QAAQ,CAAC,CAAC,CAAC,CAACuB,KAAK,CAACkG,OAAO,GAAG,OAAO,GAAG,IAAI;cACpH;YACJ;YACA,IAAI,IAAI,CAACjS,SAAS,CAAC2C,aAAa,CAACE,uBAAuB,CAACgT,OAAO,EAAE;cAC9D,IAAI,CAAC7V,SAAS,CAAC2C,aAAa,CAACE,uBAAuB,CAACgT,OAAO,CAAC9R,OAAO,CAACgI,KAAK,CAACkG,OAAO,GAAG,MAAM;cAC3F,IAAI,IAAI,CAACjS,SAAS,CAAC2C,aAAa,CAACE,uBAAuB,CAACiT,eAAe,EAAE;gBACtE,IAAI,CAAC9V,SAAS,CAAC2C,aAAa,CAACE,uBAAuB,CAACiT,eAAe,CAAC/R,OAAO,CAACgI,KAAK,CAACkG,OAAO,GAAG,MAAM;cACvG;YACJ;UACJ;QACJ;MACJ;IACJ;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI;EACAlS,UAAU,CAACkC,SAAS,CAACoG,SAAS,GAAG;EACjC;EACAT,UAAU,EAAEkB,KAAK,EAAExE,UAAU,EAAEyR,YAAY,EAAEC,QAAQ,EAAEC,IAAI,EAAEC,IAAI,EAAE;IAC/D,IAAIC,MAAM,GAAG;MACTtO,SAAS,EAAED,UAAU;MAAEkB,KAAK,EAAEA,KAAK;MAAExE,UAAU,EAAEA,UAAU;MAC3D6R,MAAM,EAAEJ,YAAY;MAAEK,gBAAgB,EAAEJ,QAAQ;MAAEjO,WAAW,EAAEkO,IAAI;MAAEI,WAAW,EAAEH;IACtF,CAAC;IACD,IAAI,CAAC1V,gBAAgB,CAACwG,IAAI,CAACmP,MAAM,CAAC;IAClC,IAAI,CAAC5K,aAAa,CAAC,CAAC;EACxB,CAAC;EACD;AACJ;AACA;EACIxL,UAAU,CAACkC,SAAS,CAACqU,IAAI,GAAG,YAAY;IACpC,IAAIC,YAAY,GAAG,IAAI,CAAC/V,gBAAgB,CAACgW,GAAG,CAAC,CAAC;IAC9C,IAAID,YAAY,EAAE;MACd;MACA,IAAIzO,SAAS,GAAGyO,YAAY,CAACjS,UAAU,CAACgD,mBAAmB;MAC3D,IAAI,CAACpH,gBAAgB,GAAG,IAAI;MAC5B,IAAI,CAACC,YAAY,GAAG,IAAI;MACxB,QAAQoW,YAAY,CAACJ,MAAM;QACvB,KAAK,mBAAmB;QACxB,KAAK,qBAAqB;UACtB,IAAI,IAAI,CAAC5U,0BAA0B,EAAE;YACjC;YACA,IAAI,CAACA,0BAA0B,CAACkV,oBAAoB,CAACF,YAAY,CAACjS,UAAU,EAAEiS,YAAY,CAAC1O,SAAS,EAAE0O,YAAY,CAACzN,KAAK,EAAEyN,YAAY,CAACJ,MAAM,CAAC;UAClJ;UACA;QACJ,KAAK,+BAA+B;UAChC,IAAI,IAAI,CAAC5U,0BAA0B,EAAE;YACjC;YACAgV,YAAY,CAACjS,UAAU,GAAG,IAAI,CAAC/C,0BAA0B,CAACmV,sBAAsB,CAACH,YAAY,CAACjS,UAAU,EAAEiS,YAAY,CAAC1O,SAAS,EAAE0O,YAAY,CAACzN,KAAK,EAAEyN,YAAY,CAACH,gBAAgB,EAAE,IAAI,CAAC;UAC9L;UACA;QACJ,KAAK,MAAM;QACX,KAAK,QAAQ;UACT,IAAInX,YAAY,CAACsX,YAAY,CAACjS,UAAU,CAAC,EAAE;YACvC;YACA,IAAI,CAACtE,SAAS,CAAC2W,kBAAkB,CAACJ,YAAY,CAACjS,UAAU,EAAE;cAAEwG,MAAM,EAAEyL,YAAY,CAACxO,WAAW,CAAC+C,MAAM;cAAE8L,YAAY,EAAEL,YAAY,CAACxO,WAAW,CAAC6O,YAAY;cAAEC,YAAY,EAAEN,YAAY,CAACxO,WAAW,CAAC8O;YAAa,CAAC,CAAC;UACrN,CAAC,MACI;YACD,IAAI,CAAC7W,SAAS,CAAC2W,kBAAkB,CAACJ,YAAY,CAACjS,UAAU,EAAE;cAAEwG,MAAM,EAAEyL,YAAY,CAACxO,WAAW,CAAC+C;YAAO,CAAC,CAAC;UAC3G;UACA;UACA,IAAIyL,YAAY,CAACjS,UAAU,CAAC0D,WAAW,KAAK,UAAU,IAAIuO,YAAY,CAACjS,UAAU,CAAC0D,WAAW,KAAK,WAAW,IAAIuO,YAAY,CAACjS,UAAU,CAAC0D,WAAW,KAAK,MAAM,IAC3JuO,YAAY,CAACjS,UAAU,CAAC0D,WAAW,KAAK,QAAQ,IAAIuO,YAAY,CAACjS,UAAU,CAAC0D,WAAW,KAAK,QAAQ,EAAE;YACtG,IAAI,CAAChI,SAAS,CAAC2W,kBAAkB,CAACJ,YAAY,CAACjS,UAAU,EAAE;cAAEwS,KAAK,EAAEP,YAAY,CAACxO,WAAW,CAAC+O;YAAM,CAAC,CAAC;YACrG,IAAI,CAACC,qBAAqB,CAACR,YAAY,CAACjS,UAAU,CAAC;UACvD;UACA,IAAIiS,YAAY,CAACjS,UAAU,CAACiD,uBAAuB,EAAE;YACjD,IAAI,CAACvH,SAAS,CAACgX,YAAY,CAACC,iBAAiB,CAACV,YAAY,CAACjS,UAAU,CAAC;UAC1E;UACA,IAAI,CAACtE,SAAS,CAAC2K,cAAc,CAAC,IAAI,CAACtJ,aAAa,CAAC6V,cAAc,CAACC,YAAY,CAAC;UAC7E,IAAI,CAACnX,SAAS,CAAC8R,MAAM,CAAC,CAACyE,YAAY,CAACjS,UAAU,CAACN,EAAE,CAAC,CAAC;UACnD;UACA,IAAIuS,YAAY,CAACjS,UAAU,CAACgD,mBAAmB,KAAK,MAAM,IAAIiP,YAAY,CAACjS,UAAU,CAACgD,mBAAmB,KAAK,WAAW,IAAIiP,YAAY,CAACjS,UAAU,CAACgD,mBAAmB,KAAK,SAAS,IAAIiP,YAAY,CAACjS,UAAU,CAACgD,mBAAmB,KAAK,SAAS,IAAIiP,YAAY,CAACjS,UAAU,CAACgD,mBAAmB,KAAK,oBAAoB,IACvTiP,YAAY,CAACjS,UAAU,CAACgD,mBAAmB,KAAK,QAAQ,IAAIiP,YAAY,CAACjS,UAAU,CAACgD,mBAAmB,KAAK,UAAU,IAAIiP,YAAY,CAACjS,UAAU,CAACgD,mBAAmB,KAAK,sBAAsB,IAAIiP,YAAY,CAACjS,UAAU,CAACgD,mBAAmB,KAAK,eAAe,IAAIiP,YAAY,CAACjS,UAAU,CAACgD,mBAAmB,KAAK,gBAAgB,IAAIiP,YAAY,CAACjS,UAAU,CAACgD,mBAAmB,KAAK,KAAK,EAAE;YAClY,IAAI,CAACa,mBAAmB,CAACoO,YAAY,CAACjS,UAAU,EAAE,QAAQ,CAAC;UAC/D;UACA;QACJ,KAAK,UAAU;UACX,IAAI,IAAI,CAACtE,SAAS,CAACgX,YAAY,IAAIT,YAAY,CAACjS,UAAU,CAACiD,uBAAuB,EAAE;YAChF,IAAI,CAACvH,SAAS,CAACgX,YAAY,CAACI,eAAe,CAACb,YAAY,CAACxO,WAAW,CAAC/D,EAAE,EAAE,KAAK,CAAC;UACnF,CAAC,MACI;YACD,IAAIqT,kBAAkB,GAAG,KAAK;YAC9B;YACA,IAAIvP,SAAS,KAAK,MAAM,IAAIA,SAAS,KAAK,oBAAoB,IAAIA,SAAS,KAAK,SAAS,IAAIA,SAAS,KAAK,SAAS,IAAIA,SAAS,KAAK,WAAW,IAAIA,SAAS,KAAK,QAAQ,IAAIA,SAAS,KAAK,UAAU,EAAE;cACrM,IAAIyO,YAAY,CAACjS,UAAU,CAAC0D,WAAW,KAAK,EAAE,IAAIxJ,iBAAiB,CAAC+X,YAAY,CAACjS,UAAU,CAAC0D,WAAW,CAAC,EAAE;gBACtG,IAAI,CAAChI,SAAS,CAACsE,UAAU,CAACzC,2BAA2B,CAACoG,YAAY,CAACsO,YAAY,CAACjS,UAAU,EAAE,OAAO,CAAC;cACxG,CAAC,MACI;gBACD,IAAI,CAACtE,SAAS,CAACsE,UAAU,CAACzC,2BAA2B,CAACoG,YAAY,CAACsO,YAAY,CAACjS,UAAU,EAAE,SAAS,CAAC;cAC1G;cACA+S,kBAAkB,GAAG,IAAI;cACzB;cACA,IAAIC,gBAAgB,GAAGf,YAAY,CAACjS,UAAU;cAC9C;cACA,IAAIiG,OAAO,GAAG+M,gBAAgB,CAAC/M,OAAO,GAAG+M,gBAAgB,CAAC/M,OAAO,GAAG,IAAI;cACxE,IAAIA,OAAO,IAAIA,OAAO,CAACO,MAAM,EAAE;gBAC3ByL,YAAY,CAACjS,UAAU,CAACwG,MAAM,GAAGP,OAAO,CAACO,MAAM;cACnD;cACAyL,YAAY,CAACgB,SAAS,GAAG,IAAI,CAACpP,mBAAmB,CAACoO,YAAY,CAACjS,UAAU,EAAE,QAAQ,CAAC;YACxF;YACA,IAAIwD,SAAS,KAAK,OAAO,IAAIA,SAAS,KAAK,OAAO,EAAE;cAChD;cACA,IAAI,CAAC9H,SAAS,CAACsE,UAAU,CAACzC,2BAA2B,CAACoG,YAAY,CAACsO,YAAY,CAACjS,UAAU,EAAEiS,YAAY,CAACjS,UAAU,CAACgD,mBAAmB,EAAE,QAAQ,CAAC;cAClJ;cACA,IAAI,CAAC1F,qBAAqB,CAACwG,oBAAoB,CAACmO,YAAY,CAACjS,UAAU,EAAE,IAAI,EAAE,QAAQ,CAAC;cACxF+S,kBAAkB,GAAG,IAAI;YAC7B;YACA,IAAIvP,SAAS,KAAK,UAAU,IAAIA,SAAS,KAAK,sBAAsB,IAAIA,SAAS,KAAK,gBAAgB,IAAIA,SAAS,KAAK,eAAe,IAAIA,SAAS,KAAK,KAAK,EAAE;cAC5JuP,kBAAkB,GAAG,IAAI;cACzB;cACA,IAAI,CAACrX,SAAS,CAACsE,UAAU,CAACzC,2BAA2B,CAACoG,YAAY,CAACsO,YAAY,CAACjS,UAAU,EAAEiS,YAAY,CAACjS,UAAU,CAACgD,mBAAmB,EAAE,QAAQ,CAAC;cAClJiP,YAAY,CAACgB,SAAS,GAAG,IAAI,CAACpP,mBAAmB,CAACoO,YAAY,CAACjS,UAAU,EAAE,QAAQ,CAAC;YACxF;YACA,IAAI,CAAC+S,kBAAkB,EAAE;cACrB;cACA,IAAI,CAACrX,SAAS,CAACsE,UAAU,CAACzC,2BAA2B,CAACoG,YAAY,CAACsO,YAAY,CAACjS,UAAU,EAAEiS,YAAY,CAACjS,UAAU,CAACgD,mBAAmB,EAAE,QAAQ,CAAC;YACtJ;YACA,IAAI,CAACtH,SAAS,CAAC2K,cAAc,CAAC,IAAI,CAACtJ,aAAa,CAAC6V,cAAc,CAACC,YAAY,CAAC;YAC7E,IAAI,CAACnX,SAAS,CAAC4J,MAAM,CAAC2M,YAAY,CAACjS,UAAU,CAAC;YAC9C,IAAI,CAACtE,SAAS,CAAC0K,aAAa,CAAC,IAAI,EAAE6L,YAAY,CAACjS,UAAU,CAACuD,SAAS,CAAC;YACrE;YACA,IAAIS,SAAS,GAAGzE,QAAQ,CAACC,cAAc,CAACyS,YAAY,CAACjS,UAAU,CAACiE,SAAS,CAAC;YAC1E,IAAID,SAAS,EAAE;cACX,IAAIA,SAAS,CAAC2D,aAAa,CAAC8G,iBAAiB,KAAK,CAAC,EAAE;gBACjD,IAAI,CAAClR,2BAA2B,CAACmR,wBAAwB,CAAC1K,SAAS,CAAC;cACxE,CAAC,MACI;gBACDA,SAAS,CAAC2D,aAAa,CAACuL,WAAW,CAAClP,SAAS,CAAC;cAClD;YACJ;YACA,IAAI/J,OAAO,CAAC8V,QAAQ,IAAI,CAAC,IAAI,CAACrU,SAAS,CAACuV,iBAAiB,EAAE;cACvD,IAAIkC,uBAAuB,GAAG5T,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAC9D,SAAS,CAAC+D,OAAO,CAACC,EAAE,GAAG,kBAAkB,CAAC;cACrG,IAAIyT,uBAAuB,IAAIA,uBAAuB,CAACjN,QAAQ,CAAC/D,MAAM,GAAG,CAAC,EAAE;gBACxE,IAAI,CAACzG,SAAS,CAAC2C,aAAa,CAACE,uBAAuB,CAAC6U,cAAc,GAAG,KAAK;gBAC3E,IAAI,CAAC1X,SAAS,CAAC2C,aAAa,CAACE,uBAAuB,CAAC8U,gCAAgC,CAAC,CAAC;cAC3F;YACJ;UACJ;UACA;QACJ,KAAK,QAAQ;UACT,IAAI,IAAI,CAAC3X,SAAS,CAACgX,YAAY,IAAIT,YAAY,CAACjS,UAAU,CAACiD,uBAAuB,EAAE;YAChFgP,YAAY,CAACxO,WAAW,CAAC+C,MAAM,CAACtE,CAAC,GAAG+P,YAAY,CAACxO,WAAW,CAACwC,OAAO,CAACO,MAAM,CAACtE,CAAC;YAC7E+P,YAAY,CAACxO,WAAW,CAAC+C,MAAM,CAAClE,CAAC,GAAG2P,YAAY,CAACxO,WAAW,CAACwC,OAAO,CAACO,MAAM,CAAClE,CAAC;YAC7E,IAAI,CAAC5G,SAAS,CAACgX,YAAY,CAACY,aAAa,CAACrB,YAAY,CAACxO,WAAW,CAAC;UACvE,CAAC,MACI;YACD;YACA,IAAID,SAAS,KAAK,MAAM,IAAIA,SAAS,KAAK,oBAAoB,IAAIA,SAAS,KAAK,SAAS,IAAIA,SAAS,KAAK,SAAS,IAAIA,SAAS,KAAK,WAAW,IAAIA,SAAS,KAAK,QAAQ,IAAIA,SAAS,KAAK,UAAU,EAAE;cACrM,IAAIyO,YAAY,CAACjS,UAAU,CAAC0D,WAAW,KAAK,EAAE,IAAIxJ,iBAAiB,CAAC+X,YAAY,CAACjS,UAAU,CAAC0D,WAAW,CAAC,EAAE;gBACtGF,SAAS,GAAG,OAAO;gBACnB,IAAI,CAACrG,qBAAqB,CAACoW,eAAe,CAACtB,YAAY,CAACjS,UAAU,CAACuD,SAAS,EAAE0O,YAAY,CAACxO,WAAW,CAAC;cAC3G,CAAC,MACI;gBACDD,SAAS,GAAG,eAAe;gBAC3B,IAAI,CAACnG,uBAAuB,CAACkW,eAAe,CAACtB,YAAY,CAACjS,UAAU,CAACuD,SAAS,EAAE0O,YAAY,CAACxO,WAAW,CAAC;cAC7G;YACJ;YACA,IAAID,SAAS,KAAK,OAAO,IAAIA,SAAS,KAAK,OAAO,EAAE;cAChD,IAAI,CAAClG,qBAAqB,CAACkW,iBAAiB,CAACvB,YAAY,CAACjS,UAAU,CAACuD,SAAS,EAAE0O,YAAY,CAACjS,UAAU,CAAC;YAC5G,CAAC,MACI,IAAIwD,SAAS,KAAK,UAAU,EAAE;cAC/B,IAAI,CAAChG,wBAAwB,CAAC+V,eAAe,CAACtB,YAAY,CAACjS,UAAU,CAACuD,SAAS,EAAE0O,YAAY,CAACxO,WAAW,CAAC;YAC9G,CAAC,MACI,IAAID,SAAS,KAAK,KAAK,EAAE;cAC1B,IAAI,CAAC9F,mBAAmB,CAAC6V,eAAe,CAACtB,YAAY,CAACjS,UAAU,CAACuD,SAAS,EAAE0O,YAAY,CAACxO,WAAW,CAAC;YACzG,CAAC,MACI,IAAID,SAAS,KAAK,sBAAsB,IAAIA,SAAS,KAAK,eAAe,IAAIA,SAAS,KAAK,gBAAgB,EAAE;cAC9G,IAAI,CAACzG,aAAa,CAACmC,eAAe,CAACqU,eAAe,CAACtB,YAAY,CAACjS,UAAU,CAACuD,SAAS,EAAE0O,YAAY,CAACxO,WAAW,CAAC;YACnH;YACA,IAAI,CAACwO,YAAY,CAACjS,UAAU,CAACU,YAAY,EAAE;cACvC,IAAI+S,UAAU,GAAG,IAAI,CAAC/X,SAAS,CAACgY,GAAG,CAACzB,YAAY,CAACjS,UAAU,CAAC;cAC5D,IAAI,CAACwD,SAAS,KAAK,UAAU,IAAIiQ,UAAU,CAACE,gBAAgB,KAAKF,UAAU,EAAE;gBACzE,IAAI,CAAC/X,SAAS,CAAC2W,kBAAkB,CAACoB,UAAU,EAAE,CAAC,CAAC,CAAC;cACrD;YACJ;YACA,IAAIlO,YAAY,GAAG,KAAK,CAAC;YACzB,IAAI0M,YAAY,CAACjS,UAAU,CAACN,EAAE,EAAE;cAC5B6F,YAAY,GAAG,IAAI,CAAC7J,SAAS,CAAC8J,SAAS,CAACyM,YAAY,CAACjS,UAAU,CAACN,EAAE,CAAC+F,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;YACrF;YACA,IAAIF,YAAY,IAAI,IAAI,KAAKA,YAAY,CAACtC,uBAAuB,KAAK,gBAAgB,IAAIsC,YAAY,CAACtC,uBAAuB,KAAK,cAAc,CAAC,EAAE;cAChJsC,YAAY,CAACU,OAAO,CAACC,QAAQ,CAACxD,IAAI,CAACuP,YAAY,CAACjS,UAAU,CAACiG,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,CAAC;cAC/E,IAAI+L,YAAY,CAACjS,UAAU,CAACgD,mBAAmB,KAAK,eAAe,EAC/DuC,YAAY,CAACU,OAAO,CAACC,QAAQ,CAACxD,IAAI,CAACuP,YAAY,CAACjS,UAAU,CAACiG,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,CAAC;cACnF,IAAIuE,GAAG,GAAGwH,YAAY,CAACjS,UAAU,CAACN,EAAE,CAAC+F,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,UAAU;cAC/D,IAAIhE,IAAI,GAAG,IAAI;cACf,IAAI,IAAI,CAAC/F,SAAS,CAACyJ,kBAAkB,EAAE;gBACnC1D,IAAI,GAAG,IAAI,CAAC1E,aAAa,CAAC6W,yBAAyB,CAAC,eAAe,CAAC;cACxE;cACA,IAAInS,IAAI,EAAE;gBACN,IAAIK,cAAc,GAAGC,IAAI,CAACC,KAAK,CAACP,IAAI,CAAC;gBACrC,KAAK,IAAIkE,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG7D,cAAc,CAACK,MAAM,EAAEwD,CAAC,EAAE,EAAE;kBAC5C,IAAI7D,cAAc,CAAC6D,CAAC,CAAC,CAACkO,GAAG,KAAKpJ,GAAG,EAAE;oBAC/B,IAAIwH,YAAY,CAACjS,UAAU,CAACgD,mBAAmB,KAAK,eAAe,EAAE;sBACjElB,cAAc,CAAC6D,CAAC,CAAC,CAACmO,SAAS,CAAC/O,aAAa,GAAG,MAAM;sBAClDjD,cAAc,CAAC6D,CAAC,CAAC,CAACmO,SAAS,CAAChP,KAAK,GAAGmN,YAAY,CAACjS,UAAU,CAACyB,IAAI;sBAChE,IAAI,CAAC1E,aAAa,CAACuH,mBAAmB,CAACqB,CAAC,CAAC,CAACmO,SAAS,CAAChP,KAAK,GAAGmN,YAAY,CAACjS,UAAU,CAACyB,IAAI;sBACxF,IAAI,CAAC1E,aAAa,CAACuH,mBAAmB,CAACqB,CAAC,CAAC,CAACmO,SAAS,CAAC/O,aAAa,GAAG,MAAM;oBAC9E,CAAC,MACI,IAAIkN,YAAY,CAACjS,UAAU,CAACgD,mBAAmB,KAAK,gBAAgB,EAAE;sBACvElB,cAAc,CAAC6D,CAAC,CAAC,CAACmO,SAAS,CAAC/O,aAAa,GAAG,OAAO;sBACnDjD,cAAc,CAAC6D,CAAC,CAAC,CAACmO,SAAS,CAAChP,KAAK,GAAGmN,YAAY,CAACjS,UAAU,CAACyB,IAAI;sBAChE,IAAI,CAAC1E,aAAa,CAACuH,mBAAmB,CAACqB,CAAC,CAAC,CAACmO,SAAS,CAAChP,KAAK,GAAGmN,YAAY,CAACjS,UAAU,CAACyB,IAAI;sBACxF,IAAI,CAAC1E,aAAa,CAACuH,mBAAmB,CAACqB,CAAC,CAAC,CAACmO,SAAS,CAAC/O,aAAa,GAAG,OAAO;oBAC/E,CAAC,MACI;sBACDjD,cAAc,CAAC6D,CAAC,CAAC,CAACmO,SAAS,CAAC/O,aAAa,GAAG,MAAM;sBAClD,IAAI,CAAChI,aAAa,CAACuH,mBAAmB,CAACqB,CAAC,CAAC,CAACmO,SAAS,CAAC/O,aAAa,GAAG,MAAM;sBAC1E,IAAIgP,cAAc,GAAGtZ,eAAe,CAACwX,YAAY,CAACjS,UAAU,CAACyB,IAAI,CAAC;sBAClE,IAAIuS,MAAM,GAAGtZ,oBAAoB,CAACqZ,cAAc,CAAC;sBACjDjS,cAAc,CAAC6D,CAAC,CAAC,CAACmO,SAAS,CAAChP,KAAK,GAAG/C,IAAI,CAACa,SAAS,CAACoR,MAAM,CAAC;sBAC1D,IAAI,CAACjX,aAAa,CAACuH,mBAAmB,CAACqB,CAAC,CAAC,CAACmO,SAAS,CAAChP,KAAK,GAAG/C,IAAI,CAACa,SAAS,CAACoR,MAAM,CAAC;oBACtF;kBACJ;gBACJ;gBACA,IAAI,CAACjX,aAAa,CAACuJ,uBAAuB,CAAC,IAAI,CAACvJ,aAAa,CAACuH,mBAAmB,EAAE,eAAe,CAAC;cACvG;YACJ;YACA,IAAI,CAAC5I,SAAS,CAAC0K,aAAa,CAAC,IAAI,EAAE6L,YAAY,CAACjS,UAAU,CAACuD,SAAS,CAAC;YACrE;YACA,IAAI,CAAC7H,SAAS,CAACmE,gBAAgB,CAACtC,2BAA2B,CAAC0W,qBAAqB,CAAChC,YAAY,CAACjS,UAAU,CAACuD,SAAS,EAAEC,SAAS,CAAC;YAC/H,IAAIyO,YAAY,CAACjS,UAAU,CAACU,YAAY,EAAE;cACtC,IAAI5D,2BAA2B,GAAG,IAAI,CAACA,2BAA2B,CAAC,IAAI,CAACA,2BAA2B,CAACqF,MAAM,GAAG,CAAC,CAAC;cAC/G,IAAIyI,cAAc,GAAG,IAAI,CAAC0D,mBAAmB,CAACxR,2BAA2B,CAAC;cAC1E,IAAI,CAACpB,SAAS,CAAC+M,oBAAoB,CAAC/F,IAAI,CAAC5F,2BAA2B,CAAC;cACrE,IAAI,CAACA,2BAA2B,CAAC2F,MAAM,CAAC,IAAI,CAAC3F,2BAA2B,CAACqF,MAAM,GAAG,CAAC,CAAC;cACpF,IAAImB,UAAU,GAAG2O,YAAY,CAACjS,UAAU,CAACsD,UAAU,IAAI,CAAC,GAAG2O,YAAY,CAACjS,UAAU,CAACsD,UAAU,GAAG2O,YAAY,CAACjS,UAAU,CAACuD,SAAS;cACjI,IAAI,CAACxG,aAAa,CAACsO,6BAA6B,CAAC/H,UAAU,CAAC,CAACsH,cAAc,CAAC,CAAClI,IAAI,CAAC,IAAI,CAAC1G,mCAAmC,CAAC,IAAI,CAACA,mCAAmC,CAACmG,MAAM,GAAG,CAAC,CAAC,CAAC;cAChL,IAAI,CAACnG,mCAAmC,CAACyG,MAAM,CAAC,IAAI,CAACzG,mCAAmC,CAACmG,MAAM,GAAG,CAAC,CAAC;YACxG;UACJ;UACA;QACJ,KAAK,cAAc;UACf,IAAI,CAACzG,SAAS,CAAC2W,kBAAkB,CAACJ,YAAY,CAACjS,UAAU,EAAE;YAAEkU,OAAO,EAAEjC,YAAY,CAACxO,WAAW,CAACyQ;UAAQ,CAAC,CAAC;UACzG,IAAI,CAAC3W,2BAA2B,CAAC4W,4BAA4B,CAAClC,YAAY,CAACjS,UAAU,EAAE,IAAI,EAAE,IAAI,CAAC;UAClGiS,YAAY,CAACjS,UAAU,CAACoU,YAAY,GAAG,IAAI,CAAC1Y,SAAS,CAACsE,UAAU,CAACzC,2BAA2B,CAAC8W,cAAc,CAAC,CAAC;UAC7G;QACJ,KAAK,cAAc;UACf,IAAI,CAAC3Y,SAAS,CAAC2W,kBAAkB,CAACJ,YAAY,CAACjS,UAAU,EAAE;YAAEsU,WAAW,EAAErC,YAAY,CAACxO,WAAW,CAAC6Q;UAAY,CAAC,CAAC;UACjH,IAAI,CAACzQ,mBAAmB,CAACoO,YAAY,CAACjS,UAAU,EAAE,QAAQ,CAAC;UAC3D,IAAI,CAACtE,SAAS,CAAC0K,aAAa,CAAC,CAAC;UAC9B;QACJ,KAAK,YAAY;UACb,IAAI,CAAC1K,SAAS,CAAC2W,kBAAkB,CAACJ,YAAY,CAACjS,UAAU,EAAE;YAAEuU,SAAS,EAAEtC,YAAY,CAACxO,WAAW,CAAC8Q;UAAU,CAAC,CAAC;UAC7G,IAAI,CAAC1Q,mBAAmB,CAACoO,YAAY,CAACjS,UAAU,EAAE,MAAM,CAAC;UACzD,IAAI,CAACtE,SAAS,CAAC0K,aAAa,CAAC,CAAC;UAC9B;QACJ,KAAK,eAAe;UAChB,IAAI,CAAC1K,SAAS,CAAC2W,kBAAkB,CAACJ,YAAY,CAACjS,UAAU,EAAE;YAAEkU,OAAO,EAAEjC,YAAY,CAACxO,WAAW,CAACyQ;UAAQ,CAAC,CAAC;UACzG,IAAIjC,YAAY,CAACjS,UAAU,CAACgD,mBAAmB,KAAK,aAAa,EAAE;YAC/D,IAAI,CAACzF,2BAA2B,CAACiX,kBAAkB,CAACvC,YAAY,CAACjS,UAAU,CAAC;YAC5E,IAAI,CAACzC,2BAA2B,CAAC4W,4BAA4B,CAAClC,YAAY,CAACjS,UAAU,EAAE,IAAI,EAAE,IAAI,CAAC;YAClGiS,YAAY,CAACjS,UAAU,CAACoU,YAAY,GAAG,IAAI,CAAC1Y,SAAS,CAACsE,UAAU,CAACzC,2BAA2B,CAAC8W,cAAc,CAAC,CAAC;UACjH,CAAC,MACI;YACD,IAAI,CAACxQ,mBAAmB,CAACoO,YAAY,CAACjS,UAAU,EAAE,SAAS,CAAC;UAChE;UACA,IAAI,CAACtE,SAAS,CAAC0K,aAAa,CAAC,CAAC;UAC9B;QACJ,KAAK,iBAAiB;UAClB,IAAI,CAAC1K,SAAS,CAAC2W,kBAAkB,CAACJ,YAAY,CAACjS,UAAU,EAAE;YAAEyU,SAAS,EAAExC,YAAY,CAACxO,WAAW,CAACgR;UAAU,CAAC,CAAC;UAC7G,IAAI,CAAC5Q,mBAAmB,CAACoO,YAAY,CAACjS,UAAU,EAAE,WAAW,CAAC;UAC9D,IAAI,CAACtE,SAAS,CAAC0K,aAAa,CAAC,CAAC;UAC9B;QACJ,KAAK,wBAAwB;UACzB,IAAI,CAAC1K,SAAS,CAAC2W,kBAAkB,CAACJ,YAAY,CAACjS,UAAU,EAAE;YACvD;YACAuU,SAAS,EAAEtC,YAAY,CAACxO,WAAW,CAAC8Q,SAAS;YAAEG,eAAe,EAAEzC,YAAY,CAACxO,WAAW,CAACiR,eAAe;YAAEC,WAAW,EAAE1C,YAAY,CAACxO,WAAW,CAACkR,WAAW;YAC3J;YACAL,WAAW,EAAErC,YAAY,CAACxO,WAAW,CAAC6Q,WAAW;YAAEJ,OAAO,EAAEjC,YAAY,CAACxO,WAAW,CAACyQ,OAAO;YAAEO,SAAS,EAAExC,YAAY,CAACxO,WAAW,CAACgR,SAAS;YAC3IG,qBAAqB,EAAE,IAAI,CAACC,YAAY,CAAC5C,YAAY,CAACxO,WAAW,CAACqR,aAAa,CAAC;YAAEC,sBAAsB,EAAE,IAAI,CAACF,YAAY,CAAC5C,YAAY,CAACxO,WAAW,CAACuR,WAAW;UACpK,CAAC,CAAC;UACF,IAAI,CAACC,+BAA+B,CAAChD,YAAY,CAACjS,UAAU,CAAC;UAC7D,IAAI,CAACtE,SAAS,CAAC0K,aAAa,CAAC,CAAC;UAC9B;QACJ,KAAK,qBAAqB;UACtB;UACA6L,YAAY,CAACjS,UAAU,GAAG,IAAI,CAACtE,SAAS,CAACmE,gBAAgB,CAACtC,2BAA2B,CAAC2X,UAAU,CAACjD,YAAY,CAACjS,UAAU,EAAEiS,YAAY,CAACJ,MAAM,EAAEI,YAAY,CAACxO,WAAW,CAAC;UACxK,IAAI,CAAClG,2BAA2B,CAAC4W,4BAA4B,CAAClC,YAAY,CAACjS,UAAU,EAAE,IAAI,EAAE,IAAI,CAAC;UAClGiS,YAAY,CAACjS,UAAU,CAACoU,YAAY,GAAG,IAAI,CAAC1Y,SAAS,CAACsE,UAAU,CAACzC,2BAA2B,CAAC8W,cAAc,CAAC,CAAC;UAC7G;QACJ,KAAK,yBAAyB;UAC1B;UACApC,YAAY,CAACjS,UAAU,GAAG,IAAI,CAACtE,SAAS,CAACmE,gBAAgB,CAACtC,2BAA2B,CAAC2X,UAAU,CAACjD,YAAY,CAACjS,UAAU,EAAEiS,YAAY,CAACJ,MAAM,EAAEI,YAAY,CAACxO,WAAW,CAAC;UACxK;QACJ,KAAK,uBAAuB;UACxB;UACAwO,YAAY,CAACjS,UAAU,GAAG,IAAI,CAACtE,SAAS,CAACmE,gBAAgB,CAACtC,2BAA2B,CAAC2X,UAAU,CAACjD,YAAY,CAACjS,UAAU,EAAEiS,YAAY,CAACJ,MAAM,EAAEI,YAAY,CAACxO,WAAW,CAAC;UACxK;QACJ,KAAK,wBAAwB;UACzB;UACAwO,YAAY,CAACjS,UAAU,GAAG,IAAI,CAACtE,SAAS,CAACmE,gBAAgB,CAACtC,2BAA2B,CAAC2X,UAAU,CAACjD,YAAY,CAACjS,UAAU,EAAEiS,YAAY,CAACJ,MAAM,EAAEI,YAAY,CAACxO,WAAW,CAAC;UACxK;QACJ,KAAK,oBAAoB;UACrB,IAAI,CAAC/H,SAAS,CAACsE,UAAU,CAACxC,wBAAwB,CAAC2X,qBAAqB,GAAG,IAAI;UAC/ElD,YAAY,CAACjS,UAAU,CAACoV,WAAW,GAAGnD,YAAY,CAACxO,WAAW,CAAC2R,WAAW;UAC1E,IAAI,IAAI,CAAC1Z,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,EAAE;YAC7C,IAAI,CAAC9F,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,CAAC4T,WAAW,GAAGnD,YAAY,CAACxO,WAAW,CAAC2R,WAAW;UAClG;UACA;UACA,IAAI,CAAC1Z,SAAS,CAACmE,gBAAgB,CAACtC,2BAA2B,CAAC2X,UAAU,CAACjD,YAAY,CAACjS,UAAU,EAAEiS,YAAY,CAACJ,MAAM,EAAEI,YAAY,CAACxO,WAAW,CAAC;UAC9I,IAAI,CAAClG,2BAA2B,CAAC4W,4BAA4B,CAAClC,YAAY,CAACjS,UAAU,EAAE,IAAI,EAAE,IAAI,CAAC;UAClG,IAAI,CAAC6D,mBAAmB,CAACoO,YAAY,CAACjS,UAAU,EAAE,aAAa,CAAC;UAChE,IAAI,IAAI,CAACtE,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,EAAE;YAC7C,IAAI,CAAC9F,SAAS,CAAC2W,kBAAkB,CAAC,IAAI,CAAC3W,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;UACtF,CAAC,MACI;YACD,IAAI,CAAC9F,SAAS,CAAC2W,kBAAkB,CAACJ,YAAY,CAACjS,UAAU,EAAE,CAAC,CAAC,CAAC;UAClE;UACA,IAAI,CAACtE,SAAS,CAACsE,UAAU,CAACxC,wBAAwB,CAAC2X,qBAAqB,GAAG,KAAK;UAChF,IAAI,CAACzZ,SAAS,CAAC2K,cAAc,CAAC,IAAI,CAACtJ,aAAa,CAAC6V,cAAc,CAACC,YAAY,CAAC;UAC7E;QACJ,KAAK,WAAW;UACZ,IAAI,CAACnX,SAAS,CAAC2W,kBAAkB,CAACJ,YAAY,CAACjS,UAAU,EAAE;YAAEqV,SAAS,EAAEpD,YAAY,CAACxO,WAAW,CAAC4R;UAAU,CAAC,CAAC;UAC7G,IAAI,CAACxR,mBAAmB,CAACoO,YAAY,CAACjS,UAAU,EAAE,WAAW,CAAC;UAC9D,IAAI,CAACtE,SAAS,CAAC0K,aAAa,CAAC,CAAC;UAC9B;QACJ,KAAK,UAAU;UACX,IAAI,CAAC1K,SAAS,CAAC2W,kBAAkB,CAACJ,YAAY,CAACjS,UAAU,EAAE;YAAEsV,QAAQ,EAAErD,YAAY,CAACxO,WAAW,CAAC6R;UAAS,CAAC,CAAC;UAC3G,IAAI,CAACzR,mBAAmB,CAACoO,YAAY,CAACjS,UAAU,EAAE,UAAU,CAAC;UAC7D,IAAI,CAACtE,SAAS,CAAC0K,aAAa,CAAC,CAAC;UAC9B;QACJ,KAAK,YAAY;UACb,IAAI,CAAC1K,SAAS,CAAC2W,kBAAkB,CAACJ,YAAY,CAACjS,UAAU,EAAE;YAAEuV,UAAU,EAAEtD,YAAY,CAACxO,WAAW,CAAC8R;UAAW,CAAC,CAAC;UAC/G,IAAI,CAAC1R,mBAAmB,CAACoO,YAAY,CAACjS,UAAU,EAAE,YAAY,CAAC;UAC/D,IAAI,CAACtE,SAAS,CAAC0K,aAAa,CAAC,CAAC;UAC9B;QACJ,KAAK,WAAW;UACZ,IAAI,CAAC1K,SAAS,CAAC2W,kBAAkB,CAACJ,YAAY,CAACjS,UAAU,EAAE;YAAEwV,SAAS,EAAEvD,YAAY,CAACxO,WAAW,CAAC+R;UAAU,CAAC,CAAC;UAC7G,IAAI,CAAC3R,mBAAmB,CAACoO,YAAY,CAACjS,UAAU,EAAE,WAAW,CAAC;UAC9D,IAAI,CAACtE,SAAS,CAAC0K,aAAa,CAAC,CAAC;UAC9B;QACJ,KAAK,sBAAsB;UACvB,IAAI,CAAC1K,SAAS,CAAC2W,kBAAkB,CAACJ,YAAY,CAACjS,UAAU,EAAE;YAAEyV,IAAI,EAAExD,YAAY,CAACxO,WAAW,CAACgS;UAAK,CAAC,CAAC;UACnG,IAAI,CAAC5R,mBAAmB,CAACoO,YAAY,CAACjS,UAAU,EAAE,sBAAsB,CAAC;UACzE,IAAI,CAACtE,SAAS,CAAC0K,aAAa,CAAC,CAAC;UAC9B;QACJ,KAAK,QAAQ;UACT;UACA,IAAI,CAAC1K,SAAS,CAAC2W,kBAAkB,CAACJ,YAAY,CAACjS,UAAU,CAACwB,WAAW,CAAC,CAAC,CAAC,EAAE;YAAEgF,MAAM,EAAEyL,YAAY,CAACxO,WAAW,CAAC+C,MAAM;YAAEkP,WAAW,EAAEzD,YAAY,CAACxO,WAAW,CAACiS;UAAY,CAAC,CAAC;UACzK,IAAI,CAAC7R,mBAAmB,CAACoO,YAAY,CAACjS,UAAU,CAACwB,WAAW,CAAC,CAAC,CAAC,EAAE,QAAQ,CAAC;UAC1E,IAAI,CAAC9F,SAAS,CAAC0K,aAAa,CAAC,CAAC;UAC9B;QACJ,KAAK,gCAAgC;UACjC,IAAI6L,YAAY,CAACxO,WAAW,IAAIwO,YAAY,CAACxO,WAAW,CAACkS,WAAW,KAAK1D,YAAY,CAACF,WAAW,CAAC4D,WAAW,EAAE;YAC3G,IAAI,CAACC,iBAAiB,CAAC3D,YAAY,CAACxO,WAAW,CAAC;UACpD;UACA,IAAI,CAACoS,gCAAgC,CAAC5D,YAAY,CAACxO,WAAW,CAACR,uBAAuB,EAAEgP,YAAY,CAACxO,WAAW,CAAC;UACjH;QACJ,KAAK,wBAAwB;UACzB,IAAIwO,YAAY,CAACjS,UAAU,CAACiD,uBAAuB,EAAE;YACjD,IAAIgP,YAAY,CAACjS,UAAU,CAACiD,uBAAuB,IAAI,aAAa,EAAE;cAClE,IAAI,CAAC6S,0BAA0B,CAAC7D,YAAY,CAACjS,UAAU,CAACiD,uBAAuB,EAAEgP,YAAY,CAACxO,WAAW,EAAE,KAAK,CAAC;cACjH,IAAI,CAACqS,0BAA0B,CAAC7D,YAAY,CAACjS,UAAU,CAACiD,uBAAuB,EAAEgP,YAAY,CAACF,WAAW,EAAE,IAAI,CAAC;YACpH,CAAC,MACI;cACD,IAAI,CAAC+D,0BAA0B,CAAC7D,YAAY,CAACjS,UAAU,CAACiD,uBAAuB,EAAEgP,YAAY,CAACjS,UAAU,EAAEiS,YAAY,CAACxO,WAAW,CAAC;YACvI;UACJ,CAAC,MACI;YACD,IAAIsS,WAAW,GAAGxW,QAAQ,CAACC,cAAc,CAACyS,YAAY,CAACjS,UAAU,CAACN,EAAE,GAAG,eAAe,CAAC,CAACwG,QAAQ,CAAC,CAAC,CAAC,CAACA,QAAQ,CAAC,CAAC,CAAC;YAC/G6P,WAAW,CAACvO,SAAS,GAAG,iCAAiC;YACzD,IAAIjC,YAAY,GAAG,IAAI,CAAC7J,SAAS,CAAC8J,SAAS,CAACyM,YAAY,CAACjS,UAAU,CAACN,EAAE,CAAC+F,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;YACrF,IAAIuQ,aAAa,GAAG,IAAI,CAACta,SAAS,CAAC8J,SAAS,CAACyM,YAAY,CAACjS,UAAU,CAACN,EAAE,CAAC;YACxE6F,YAAY,CAACU,OAAO,CAACC,QAAQ,CAACzD,MAAM,CAAC8C,YAAY,CAACU,OAAO,CAACC,QAAQ,CAACC,OAAO,CAAC6P,aAAa,CAAC/P,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;YACjH,IAAI+L,YAAY,CAACjS,UAAU,CAACgD,mBAAmB,KAAK,eAAe,EAC/DuC,YAAY,CAACU,OAAO,CAACC,QAAQ,CAACzD,MAAM,CAAC8C,YAAY,CAACU,OAAO,CAACC,QAAQ,CAACC,OAAO,CAAC6P,aAAa,CAAC/P,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;YACrH,IAAIuE,GAAG,GAAGwH,YAAY,CAACjS,UAAU,CAACN,EAAE,CAAC+F,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,UAAU;YAC/D,IAAIhE,IAAI,GAAG,IAAI;YACf,IAAI,IAAI,CAAC/F,SAAS,CAACyJ,kBAAkB,EAAE;cACnC1D,IAAI,GAAG,IAAI,CAAC1E,aAAa,CAAC6W,yBAAyB,CAAC,eAAe,CAAC;YACxE;YACA,IAAInS,IAAI,EAAE;cACN,IAAIK,cAAc,GAAGC,IAAI,CAACC,KAAK,CAACP,IAAI,CAAC;cACrC,KAAK,IAAIkE,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG7D,cAAc,CAACK,MAAM,EAAEwD,CAAC,EAAE,EAAE;gBAC5C,IAAI7D,cAAc,CAAC6D,CAAC,CAAC,CAACkO,GAAG,KAAKpJ,GAAG,EAAE;kBAC/B3I,cAAc,CAAC6D,CAAC,CAAC,CAACmO,SAAS,CAAChP,KAAK,GAAG,EAAE;kBACtChD,cAAc,CAAC6D,CAAC,CAAC,CAACmO,SAAS,CAAC/O,aAAa,GAAG,EAAE;kBAC9C,IAAI,CAAChI,aAAa,CAACuH,mBAAmB,CAACqB,CAAC,CAAC,CAACmO,SAAS,CAAChP,KAAK,GAAG,EAAE;kBAC9D,IAAI,CAAC/H,aAAa,CAACuH,mBAAmB,CAACqB,CAAC,CAAC,CAACmO,SAAS,CAAC/O,aAAa,GAAG,EAAE;gBAC1E;cACJ;cACA,IAAI,CAACrJ,SAAS,CAAC4J,MAAM,CAAC2M,YAAY,CAACjS,UAAU,CAAC;cAC9C,IAAI,CAACtE,SAAS,CAAC0K,aAAa,CAAC,CAAC;cAC9B,IAAI,CAACrJ,aAAa,CAACuJ,uBAAuB,CAAC,IAAI,CAACvJ,aAAa,CAACuH,mBAAmB,EAAE,eAAe,CAAC;YACvG;UACJ;MACR;MACA,IAAI,CAACnI,cAAc,CAACuG,IAAI,CAACuP,YAAY,CAAC;MACtC,IAAI,CAAChL,aAAa,CAAC,CAAC;MACpB,IAAI,CAACrL,gBAAgB,GAAG,KAAK;MAC7B,IAAI,CAACC,YAAY,GAAG,KAAK;IAC7B;EACJ,CAAC;EACD;AACJ;AACA;EACIJ,UAAU,CAACkC,SAAS,CAACiU,IAAI,GAAG,YAAY;IACpC,IAAIK,YAAY,GAAG,IAAI,CAAC9V,cAAc,CAAC+V,GAAG,CAAC,CAAC;IAC5C,IAAID,YAAY,EAAE;MACd;MACA,IAAIzO,SAAS,GAAGyO,YAAY,CAACjS,UAAU,CAACgD,mBAAmB;MAC3D,IAAI,CAACpH,gBAAgB,GAAG,IAAI;MAC5B,QAAQqW,YAAY,CAACJ,MAAM;QACvB,KAAK,+BAA+B;UAChC,IAAI,IAAI,CAAC5U,0BAA0B,EAAE;YACjC;YACAgV,YAAY,CAACjS,UAAU,GAAG,IAAI,CAAC/C,0BAA0B,CAACmV,sBAAsB,CAACH,YAAY,CAACjS,UAAU,EAAEiS,YAAY,CAAC1O,SAAS,EAAE0O,YAAY,CAACzN,KAAK,EAAEyN,YAAY,CAACH,gBAAgB,CAAC;UACxL;UACA;QACJ,KAAK,mBAAmB;QACxB,KAAK,qBAAqB;UACtB,IAAI,IAAI,CAAC7U,0BAA0B,EAAE;YACjC;YACA,IAAI,CAACA,0BAA0B,CAACgZ,oBAAoB,CAAChE,YAAY,CAACjS,UAAU,EAAEiS,YAAY,CAAC1O,SAAS,EAAE0O,YAAY,CAACzN,KAAK,EAAEyN,YAAY,CAACJ,MAAM,CAAC;UAClJ;UACA;QACJ,KAAK,MAAM;QACX,KAAK,QAAQ;UACT,IAAIlX,YAAY,CAACsX,YAAY,CAACjS,UAAU,CAAC,EAAE;YACvC,IAAI,CAACtE,SAAS,CAAC2W,kBAAkB;YACjC;YACAJ,YAAY,CAACjS,UAAU,EAAE;cAAEwG,MAAM,EAAEyL,YAAY,CAACF,WAAW,CAACvL,MAAM;cAAE8L,YAAY,EAAEL,YAAY,CAACF,WAAW,CAACO,YAAY;cAAEC,YAAY,EAAEN,YAAY,CAACF,WAAW,CAACQ;YAAa,CAAC,CAAC;UACnL,CAAC,MACI;YACD,IAAI,CAAC7W,SAAS,CAAC2W,kBAAkB,CAACJ,YAAY,CAACjS,UAAU,EAAE;cAAEwG,MAAM,EAAEyL,YAAY,CAACF,WAAW,CAACvL;YAAO,CAAC,CAAC;UAC3G;UACA;UACA,IAAIyL,YAAY,CAACjS,UAAU,CAAC0D,WAAW,KAAK,UAAU,IAAIuO,YAAY,CAACjS,UAAU,CAAC0D,WAAW,KAAK,WAAW,IAAIuO,YAAY,CAACjS,UAAU,CAAC0D,WAAW,KAAK,MAAM,IAC3JuO,YAAY,CAACjS,UAAU,CAAC0D,WAAW,KAAK,QAAQ,IAAIuO,YAAY,CAACjS,UAAU,CAAC0D,WAAW,KAAK,QAAQ,EAAE;YACtG,IAAI,CAAChI,SAAS,CAAC2W,kBAAkB,CAACJ,YAAY,CAACjS,UAAU,EAAE;cAAEwS,KAAK,EAAEP,YAAY,CAACF,WAAW,CAACS;YAAM,CAAC,CAAC;YACrG,IAAI,CAACC,qBAAqB,CAACR,YAAY,CAACjS,UAAU,CAAC;UACvD;UACA,IAAIiS,YAAY,CAACjS,UAAU,CAACiD,uBAAuB,EAAE;YACjD,IAAI,CAACvH,SAAS,CAACgX,YAAY,CAACC,iBAAiB,CAACV,YAAY,CAACjS,UAAU,CAAC;UAC1E;UACA,IAAI,CAACtE,SAAS,CAAC2K,cAAc,CAAC,IAAI,CAACtJ,aAAa,CAAC6V,cAAc,CAACC,YAAY,CAAC;UAC7E,IAAI,CAACnX,SAAS,CAAC8R,MAAM,CAAC,CAACyE,YAAY,CAACjS,UAAU,CAACN,EAAE,CAAC,CAAC;UACnD;UACA,IAAIuS,YAAY,CAACjS,UAAU,CAACgD,mBAAmB,KAAK,MAAM,IAAIiP,YAAY,CAACjS,UAAU,CAACgD,mBAAmB,KAAK,WAAW,IAAIiP,YAAY,CAACjS,UAAU,CAACgD,mBAAmB,KAAK,SAAS,IAAIiP,YAAY,CAACjS,UAAU,CAACgD,mBAAmB,KAAK,SAAS,IAAIiP,YAAY,CAACjS,UAAU,CAACgD,mBAAmB,KAAK,oBAAoB,IACpTiP,YAAY,CAACjS,UAAU,CAACgD,mBAAmB,KAAK,QAAQ,IAAIiP,YAAY,CAACjS,UAAU,CAACgD,mBAAmB,KAAK,UAAU,IAAIiP,YAAY,CAACjS,UAAU,CAACgD,mBAAmB,KAAK,sBAAsB,IAAIiP,YAAY,CAACjS,UAAU,CAACgD,mBAAmB,KAAK,eAAe,IAAIiP,YAAY,CAACjS,UAAU,CAACgD,mBAAmB,KAAK,gBAAgB,IAAIiP,YAAY,CAACjS,UAAU,CAACgD,mBAAmB,KAAK,KAAK,EAAE;YACrY,IAAI,CAACa,mBAAmB,CAACoO,YAAY,CAACjS,UAAU,EAAE,QAAQ,CAAC;UAC/D;UACA;QACJ,KAAK,UAAU;UACX,IAAI,IAAI,CAACtE,SAAS,CAACgX,YAAY,IAAIT,YAAY,CAACjS,UAAU,CAACiD,uBAAuB,EAAE;YAChFgP,YAAY,CAACF,WAAW,CAACvL,MAAM,CAACtE,CAAC,GAAG+P,YAAY,CAACF,WAAW,CAAC9L,OAAO,CAACO,MAAM,CAACtE,CAAC;YAC7E+P,YAAY,CAACF,WAAW,CAACvL,MAAM,CAAClE,CAAC,GAAG2P,YAAY,CAACF,WAAW,CAAC9L,OAAO,CAACO,MAAM,CAAClE,CAAC;YAC7E,IAAI,CAAC5G,SAAS,CAACgX,YAAY,CAACY,aAAa,CAACrB,YAAY,CAACF,WAAW,CAAC;UACvE,CAAC,MACI;YACD;YACA,IAAIvO,SAAS,KAAK,MAAM,IAAIA,SAAS,KAAK,oBAAoB,IAAIA,SAAS,KAAK,SAAS,IAAIA,SAAS,KAAK,SAAS,IAAIA,SAAS,KAAK,WAAW,IAAIA,SAAS,KAAK,QAAQ,IAAIA,SAAS,KAAK,UAAU,EAAE;cACrM,IAAIyO,YAAY,CAACjS,UAAU,CAAC0D,WAAW,KAAK,EAAE,IAAIxJ,iBAAiB,CAAC+X,YAAY,CAACjS,UAAU,CAAC0D,WAAW,CAAC,EAAE;gBACtGF,SAAS,GAAG,OAAO;gBACnB,IAAI,CAACrG,qBAAqB,CAACoW,eAAe,CAACtB,YAAY,CAACjS,UAAU,CAACuD,SAAS,EAAE0O,YAAY,CAACgB,SAAS,CAAC;cACzG,CAAC,MACI;gBACDzP,SAAS,GAAG,eAAe;gBAC3B,IAAI,CAACnG,uBAAuB,CAACkW,eAAe,CAACtB,YAAY,CAACjS,UAAU,CAACuD,SAAS,EAAE0O,YAAY,CAACgB,SAAS,CAAC;cAC3G;YACJ;YACA,IAAIzP,SAAS,KAAK,UAAU,EAAE;cAC1B,IAAI,CAAChG,wBAAwB,CAAC+V,eAAe,CAACtB,YAAY,CAACjS,UAAU,CAACuD,SAAS,EAAE0O,YAAY,CAACgB,SAAS,CAAC;YAC5G;YACA,IAAIzP,SAAS,KAAK,OAAO,IAAIA,SAAS,KAAK,OAAO,EAAE;cAChD,IAAI,CAAClG,qBAAqB,CAACkW,iBAAiB,CAACvB,YAAY,CAACjS,UAAU,CAACuD,SAAS,EAAE0O,YAAY,CAACF,WAAW,CAAC;YAC7G;YACA,IAAIvO,SAAS,KAAK,sBAAsB,IAAIA,SAAS,KAAK,eAAe,IAAIA,SAAS,KAAK,gBAAgB,EAAE;cACzG,IAAI,CAACzG,aAAa,CAACmC,eAAe,CAACqU,eAAe,CAACtB,YAAY,CAACjS,UAAU,CAACuD,SAAS,EAAE0O,YAAY,CAACgB,SAAS,CAAC;YACjH;YACA,IAAIzP,SAAS,KAAK,KAAK,EAAE;cACrB,IAAI,CAAC9F,mBAAmB,CAAC6V,eAAe,CAACtB,YAAY,CAACjS,UAAU,CAACuD,SAAS,EAAE0O,YAAY,CAACgB,SAAS,CAAC;YACvG;YACA,IAAIQ,UAAU,GAAG,IAAI,CAAC/X,SAAS,CAACgY,GAAG,CAACzB,YAAY,CAACjS,UAAU,CAAC;YAC5D,IAAI,CAACtE,SAAS,CAAC8R,MAAM,CAAC,CAACyE,YAAY,CAACjS,UAAU,CAACN,EAAE,CAAC,CAAC;YACnD,IAAI,CAAC8D,SAAS,KAAK,UAAU,IAAIiQ,UAAU,CAACE,gBAAgB,KAAKF,UAAU,EAAE;cACzE,IAAI,CAAC/X,SAAS,CAAC2W,kBAAkB,CAACoB,UAAU,EAAE,CAAC,CAAC,CAAC;YACrD;YACA,IAAI,CAAC/X,SAAS,CAAC0K,aAAa,CAAC,IAAI,EAAE6L,YAAY,CAACjS,UAAU,CAACuD,SAAS,CAAC;YACrE;YACA,IAAI,CAAC7H,SAAS,CAACmE,gBAAgB,CAACtC,2BAA2B,CAAC0W,qBAAqB,CAAChC,YAAY,CAACjS,UAAU,CAACuD,SAAS,EAAEC,SAAS,CAAC;YAC/H,IAAIvJ,OAAO,CAAC8V,QAAQ,IAAI,CAAC,IAAI,CAACrU,SAAS,CAACuV,iBAAiB,EAAE;cACvD,IAAIkC,uBAAuB,GAAG5T,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAC9D,SAAS,CAAC+D,OAAO,CAACC,EAAE,GAAG,kBAAkB,CAAC;cACrG,IAAIyT,uBAAuB,IAAIA,uBAAuB,CAACjN,QAAQ,CAAC/D,MAAM,GAAG,CAAC,EAAE;gBACxE,IAAI,CAACzG,SAAS,CAAC2C,aAAa,CAACE,uBAAuB,CAAC6U,cAAc,GAAG,KAAK;gBAC3E,IAAI,CAAC1X,SAAS,CAAC2C,aAAa,CAACE,uBAAuB,CAAC8U,gCAAgC,CAAC,CAAC;cAC3F;YACJ;UACJ;UACA;QACJ,KAAK,QAAQ;UACT,IAAI,IAAI,CAAC3X,SAAS,CAACgX,YAAY,IAAIT,YAAY,CAACjS,UAAU,CAACiD,uBAAuB,EAAE;YAChF,IAAI,CAACvH,SAAS,CAACgX,YAAY,CAACI,eAAe,CAACb,YAAY,CAACF,WAAW,CAACrS,EAAE,EAAE,KAAK,CAAC;UACnF,CAAC,MACI;YACD,IAAIwW,QAAQ,GAAG,KAAK;YACpB,IAAIC,KAAK,GAAGlE,YAAY,CAACjS,UAAU,CAACgD,mBAAmB;YACvD;YACA,IAAIQ,SAAS,KAAK,MAAM,IAAIA,SAAS,KAAK,oBAAoB,IAAIA,SAAS,KAAK,SAAS,IAAIA,SAAS,KAAK,SAAS,IAAIA,SAAS,KAAK,WAAW,IAAIA,SAAS,KAAK,QAAQ,IAAIA,SAAS,KAAK,UAAU,EAAE;cACrM,IAAIyO,YAAY,CAACjS,UAAU,CAAC0D,WAAW,KAAK,EAAE,IAAIxJ,iBAAiB,CAAC+X,YAAY,CAACjS,UAAU,CAAC0D,WAAW,CAAC,EAAE;gBACtGyS,KAAK,GAAG,OAAO;cACnB,CAAC,MACI;gBACDA,KAAK,GAAG,SAAS;cACrB;cACA;cACA,IAAI,CAACza,SAAS,CAACsE,UAAU,CAACzC,2BAA2B,CAACoG,YAAY,CAACsO,YAAY,CAACjS,UAAU,EAAEmW,KAAK,EAAE,QAAQ,CAAC;cAC5G,IAAI,CAACtS,mBAAmB,CAACoO,YAAY,CAACjS,UAAU,EAAE,QAAQ,CAAC;cAC3DkW,QAAQ,GAAG,IAAI;YACnB;YACA,IAAI1S,SAAS,KAAK,OAAO,IAAIA,SAAS,KAAK,OAAO,EAAE;cAChD;cACA,IAAI,CAAC9H,SAAS,CAACsE,UAAU,CAACzC,2BAA2B,CAACoG,YAAY,CAACsO,YAAY,CAACjS,UAAU,EAAEmW,KAAK,EAAE,QAAQ,CAAC;cAC5G,IAAI,CAAC7Y,qBAAqB,CAACwG,oBAAoB,CAACmO,YAAY,CAACjS,UAAU,EAAE,IAAI,EAAE,QAAQ,CAAC;cACxFkW,QAAQ,GAAG,IAAI;YACnB;YACA,IAAI1S,SAAS,KAAK,UAAU,IAAIA,SAAS,KAAK,sBAAsB,IAAIA,SAAS,KAAK,eAAe,IAAIA,SAAS,KAAK,gBAAgB,EAAE;cACrI;cACA,IAAI,CAAC9H,SAAS,CAACsE,UAAU,CAACzC,2BAA2B,CAACoG,YAAY,CAACsO,YAAY,CAACjS,UAAU,EAAEmW,KAAK,EAAE,QAAQ,CAAC;cAC5G,IAAI,CAACtS,mBAAmB,CAACoO,YAAY,CAACjS,UAAU,EAAE,QAAQ,CAAC;YAC/D;YACA,IAAI,CAACkW,QAAQ,EAAE;cACX;cACA,IAAI,CAACxa,SAAS,CAACsE,UAAU,CAACzC,2BAA2B,CAACoG,YAAY,CAACsO,YAAY,CAACjS,UAAU,EAAEmW,KAAK,EAAE,QAAQ,CAAC;YAChH;YACA,IAAI5Q,YAAY,GAAG,KAAK,CAAC;YACzB,IAAI0M,YAAY,CAACjS,UAAU,CAACN,EAAE,EAAE;cAC5B6F,YAAY,GAAG,IAAI,CAAC7J,SAAS,CAAC8J,SAAS,CAACyM,YAAY,CAACjS,UAAU,CAACN,EAAE,CAAC+F,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;YACrF;YACA,IAAIF,YAAY,IAAI,IAAI,KAAKA,YAAY,CAACtC,uBAAuB,KAAK,gBAAgB,IAAIsC,YAAY,CAACtC,uBAAuB,KAAK,cAAc,CAAC,EAAE;cAChJsC,YAAY,CAACU,OAAO,CAACC,QAAQ,CAACzD,MAAM,CAAC8C,YAAY,CAACU,OAAO,CAACC,QAAQ,CAACC,OAAO,CAAC8L,YAAY,CAACjS,UAAU,CAACiG,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;cAC3H,IAAI+L,YAAY,CAACjS,UAAU,CAACgD,mBAAmB,KAAK,eAAe,EAC/DuC,YAAY,CAACU,OAAO,CAACC,QAAQ,CAACzD,MAAM,CAAC8C,YAAY,CAACU,OAAO,CAACC,QAAQ,CAACC,OAAO,CAAC8L,YAAY,CAACjS,UAAU,CAACiG,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;cAC/H,IAAIuE,GAAG,GAAGwH,YAAY,CAACjS,UAAU,CAACN,EAAE,CAAC+F,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,UAAU;cAC/D,IAAIhE,IAAI,GAAG,IAAI;cACf,IAAI,IAAI,CAAC/F,SAAS,CAACyJ,kBAAkB,EAAE;gBACnC1D,IAAI,GAAG,IAAI,CAAC1E,aAAa,CAAC6W,yBAAyB,CAAC,eAAe,CAAC;cACxE;cACA,IAAInS,IAAI,EAAE;gBACN,IAAIK,cAAc,GAAGC,IAAI,CAACC,KAAK,CAACP,IAAI,CAAC;gBACrC,KAAK,IAAIkE,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG7D,cAAc,CAACK,MAAM,EAAEwD,CAAC,EAAE,EAAE;kBAC5C,IAAI7D,cAAc,CAAC6D,CAAC,CAAC,CAACkO,GAAG,KAAKpJ,GAAG,EAAE;oBAC/B3I,cAAc,CAAC6D,CAAC,CAAC,CAACmO,SAAS,CAAChP,KAAK,GAAG,EAAE;oBACtChD,cAAc,CAAC6D,CAAC,CAAC,CAACmO,SAAS,CAAC/O,aAAa,GAAG,EAAE;oBAC9C,IAAI,CAAChI,aAAa,CAACuH,mBAAmB,CAACqB,CAAC,CAAC,CAACmO,SAAS,CAAChP,KAAK,GAAG,EAAE;oBAC9D,IAAI,CAAC/H,aAAa,CAACuH,mBAAmB,CAACqB,CAAC,CAAC,CAACmO,SAAS,CAAC/O,aAAa,GAAG,EAAE;kBAC1E;gBACJ;gBACA,IAAI,CAAChI,aAAa,CAACuJ,uBAAuB,CAAC,IAAI,CAACvJ,aAAa,CAACuH,mBAAmB,EAAE,eAAe,CAAC;cACvG;YACJ;YACA,IAAI,CAAC5I,SAAS,CAAC2K,cAAc,CAAC4L,YAAY,CAACjS,UAAU,CAACuD,SAAS,CAAC;YAChE,IAAI,CAAC7H,SAAS,CAAC4J,MAAM,CAAC2M,YAAY,CAACjS,UAAU,CAAC;YAC9C,IAAI,CAACtE,SAAS,CAAC0K,aAAa,CAAC,IAAI,EAAE6L,YAAY,CAACjS,UAAU,CAACuD,SAAS,CAAC;YACrE;YACA,IAAI7D,EAAE,GAAGuS,YAAY,CAACjS,UAAU,CAACiE,SAAS,GAAGgO,YAAY,CAACjS,UAAU,CAACiE,SAAS,GAAGgO,YAAY,CAACjS,UAAU,CAACU,YAAY;YACrH,IAAIsD,SAAS,GAAGzE,QAAQ,CAACC,cAAc,CAACE,EAAE,CAAC;YAC3C,IAAI,CAACwE,qBAAqB,CAACF,SAAS,CAAC;YACrC,IAAIiO,YAAY,CAACjS,UAAU,CAACU,YAAY,EAAE;cACtC,IAAI0G,WAAW,GAAG,IAAI,CAACgH,mCAAmC,CAAC6D,YAAY,CAACjS,UAAU,EAAEN,EAAE,EAAEuS,YAAY,CAACjS,UAAU,CAACuD,SAAS,CAAC;cAC1H,IAAI,CAAClH,mBAAmB,CAACqG,IAAI,CAAC0E,WAAW,CAAC;YAC9C;UACJ;UACA;QACJ,KAAK,cAAc;UACf,IAAI,CAAC1L,SAAS,CAAC2W,kBAAkB,CAACJ,YAAY,CAACjS,UAAU,EAAE;YAAEkU,OAAO,EAAEjC,YAAY,CAACF,WAAW,CAACmC;UAAQ,CAAC,CAAC;UACzG,IAAI,CAAC3W,2BAA2B,CAAC4W,4BAA4B,CAAClC,YAAY,CAACjS,UAAU,EAAE,IAAI,EAAE,IAAI,CAAC;UAClG;QACJ,KAAK,cAAc;UACf,IAAI,CAACtE,SAAS,CAAC2W,kBAAkB,CAACJ,YAAY,CAACjS,UAAU,EAAE;YAAEsU,WAAW,EAAErC,YAAY,CAACF,WAAW,CAACuC;UAAY,CAAC,CAAC;UACjH,IAAI,CAACzQ,mBAAmB,CAACoO,YAAY,CAACjS,UAAU,EAAE,QAAQ,CAAC;UAC3D,IAAI,CAACtE,SAAS,CAAC0K,aAAa,CAAC,CAAC;UAC9B;QACJ,KAAK,YAAY;UACb,IAAI,CAAC1K,SAAS,CAAC2W,kBAAkB,CAACJ,YAAY,CAACjS,UAAU,EAAE;YAAEuU,SAAS,EAAEtC,YAAY,CAACF,WAAW,CAACwC;UAAU,CAAC,CAAC;UAC7G,IAAI,CAAC1Q,mBAAmB,CAACoO,YAAY,CAACjS,UAAU,EAAE,MAAM,CAAC;UACzD,IAAI,CAACtE,SAAS,CAAC0K,aAAa,CAAC,CAAC;UAC9B;QACJ,KAAK,eAAe;UAChB,IAAI,CAAC1K,SAAS,CAAC2W,kBAAkB,CAACJ,YAAY,CAACjS,UAAU,EAAE;YAAEkU,OAAO,EAAEjC,YAAY,CAACF,WAAW,CAACmC;UAAQ,CAAC,CAAC;UACzG,IAAIjC,YAAY,CAACjS,UAAU,CAACgD,mBAAmB,KAAK,aAAa,EAAE;YAC/D,IAAI,CAACzF,2BAA2B,CAACiX,kBAAkB,CAACvC,YAAY,CAACjS,UAAU,CAAC;YAC5E,IAAI,CAACzC,2BAA2B,CAAC4W,4BAA4B,CAAClC,YAAY,CAACjS,UAAU,EAAE,IAAI,EAAE,IAAI,CAAC;UACtG,CAAC,MACI;YACD,IAAI,CAAC6D,mBAAmB,CAACoO,YAAY,CAACjS,UAAU,EAAE,SAAS,CAAC;UAChE;UACA,IAAI,CAACtE,SAAS,CAAC0K,aAAa,CAAC,CAAC;UAC9B;QACJ,KAAK,iBAAiB;UAClB,IAAI,CAAC1K,SAAS,CAAC2W,kBAAkB,CAACJ,YAAY,CAACjS,UAAU,EAAE;YAAEyU,SAAS,EAAExC,YAAY,CAACF,WAAW,CAAC0C;UAAU,CAAC,CAAC;UAC7G,IAAI,CAAC5Q,mBAAmB,CAACoO,YAAY,CAACjS,UAAU,EAAE,WAAW,CAAC;UAC9D,IAAI,CAACtE,SAAS,CAAC0K,aAAa,CAAC,CAAC;UAC9B;QACJ,KAAK,wBAAwB;UACzB,IAAI,CAAC1K,SAAS,CAAC2W,kBAAkB,CAACJ,YAAY,CAACjS,UAAU,EAAE;YACvD;YACAuU,SAAS,EAAEtC,YAAY,CAACF,WAAW,CAACwC,SAAS;YAAED,WAAW,EAAErC,YAAY,CAACF,WAAW,CAACuC,WAAW;YAAEJ,OAAO,EAAEjC,YAAY,CAACF,WAAW,CAACmC,OAAO;YAAEO,SAAS,EAAExC,YAAY,CAACF,WAAW,CAAC0C,SAAS;YAC1LG,qBAAqB,EAAE,IAAI,CAACC,YAAY,CAAC5C,YAAY,CAACF,WAAW,CAAC+C,aAAa,CAAC;YAAEC,sBAAsB,EAAE,IAAI,CAACF,YAAY,CAAC5C,YAAY,CAACF,WAAW,CAACiD,WAAW,CAAC;YACjKN,eAAe,EAAEzC,YAAY,CAACF,WAAW,CAAC2C,eAAe;YAAEC,WAAW,EAAE1C,YAAY,CAACF,WAAW,CAAC4C;UACrG,CAAC,CAAC;UACF,IAAI,CAACM,+BAA+B,CAAChD,YAAY,CAACjS,UAAU,CAAC;UAC7D,IAAI,CAACtE,SAAS,CAAC0K,aAAa,CAAC,CAAC;UAC9B;QACJ,KAAK,qBAAqB;UACtB;UACA6L,YAAY,CAACjS,UAAU,GAAG,IAAI,CAACtE,SAAS,CAACmE,gBAAgB,CAACtC,2BAA2B,CAAC6Y,UAAU,CAACnE,YAAY,CAACjS,UAAU,EAAEiS,YAAY,CAACJ,MAAM,EAAEI,YAAY,CAACxO,WAAW,CAAC;UACxK,IAAI,CAAClG,2BAA2B,CAAC4W,4BAA4B,CAAClC,YAAY,CAACjS,UAAU,EAAE,IAAI,EAAE,IAAI,CAAC;UAClG;QACJ,KAAK,yBAAyB;UAC1B;UACAiS,YAAY,CAACjS,UAAU,GAAG,IAAI,CAACtE,SAAS,CAACmE,gBAAgB,CAACtC,2BAA2B,CAAC6Y,UAAU,CAACnE,YAAY,CAACjS,UAAU,EAAEiS,YAAY,CAACJ,MAAM,EAAEI,YAAY,CAACxO,WAAW,CAAC;UACxK;QACJ,KAAK,uBAAuB;UACxB;UACAwO,YAAY,CAACjS,UAAU,GAAG,IAAI,CAACtE,SAAS,CAACmE,gBAAgB,CAACtC,2BAA2B,CAAC6Y,UAAU,CAACnE,YAAY,CAACjS,UAAU,EAAEiS,YAAY,CAACJ,MAAM,CAAC;UAC9I;QACJ,KAAK,wBAAwB;UACzB;UACAI,YAAY,CAACjS,UAAU,GAAG,IAAI,CAACtE,SAAS,CAACmE,gBAAgB,CAACtC,2BAA2B,CAAC6Y,UAAU,CAACnE,YAAY,CAACjS,UAAU,EAAEiS,YAAY,CAACJ,MAAM,CAAC;UAC9I;QACJ,KAAK,oBAAoB;UACrB,IAAI,CAACnW,SAAS,CAACsE,UAAU,CAACxC,wBAAwB,CAAC2X,qBAAqB,GAAG,IAAI;UAC/ElD,YAAY,CAACjS,UAAU,CAACoV,WAAW,GAAGnD,YAAY,CAACF,WAAW,CAACqD,WAAW;UAC1E;UACA,IAAIpV,UAAU,GAAG,IAAI,CAACtE,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC;UAC5D,IAAIxB,UAAU,EAAE;YACZA,UAAU,CAACoV,WAAW,GAAGnD,YAAY,CAACF,WAAW,CAACqD,WAAW;YAC7DpV,UAAU,CAACwG,MAAM,CAACI,MAAM,GAAGqL,YAAY,CAACF,WAAW,CAACvL,MAAM,CAACI,MAAM;UACrE;UACA;UACA,IAAI,CAAClL,SAAS,CAACmE,gBAAgB,CAACtC,2BAA2B,CAAC6Y,UAAU,CAACnE,YAAY,CAACjS,UAAU,EAAEiS,YAAY,CAACJ,MAAM,EAAEI,YAAY,CAACxO,WAAW,CAAC;UAC9I,IAAI,CAAClG,2BAA2B,CAAC4W,4BAA4B,CAAClC,YAAY,CAACjS,UAAU,EAAE,IAAI,EAAE,IAAI,CAAC;UAClG,IAAI,CAAC6D,mBAAmB,CAACoO,YAAY,CAACjS,UAAU,EAAE,aAAa,CAAC;UAChE,IAAIA,UAAU,EAAE;YACZ,IAAI,CAACtE,SAAS,CAAC2W,kBAAkB,CAACrS,UAAU,EAAE,CAAC,CAAC,CAAC;UACrD,CAAC,MACI;YACD,IAAI,CAACtE,SAAS,CAAC2W,kBAAkB,CAACJ,YAAY,CAACjS,UAAU,EAAE,CAAC,CAAC,CAAC;UAClE;UACA,IAAI,CAACtE,SAAS,CAACsE,UAAU,CAACxC,wBAAwB,CAAC2X,qBAAqB,GAAG,KAAK;UAChF,IAAI,CAACzZ,SAAS,CAAC2K,cAAc,CAAC,IAAI,CAACtJ,aAAa,CAAC6V,cAAc,CAACC,YAAY,CAAC;UAC7E,IAAI,CAACnX,SAAS,CAAC8R,MAAM,CAAC,CAACyE,YAAY,CAACjS,UAAU,CAACN,EAAE,CAAC,CAAC;UACnD;QACJ,KAAK,WAAW;UACZ,IAAI,CAAChE,SAAS,CAAC2W,kBAAkB,CAACJ,YAAY,CAACjS,UAAU,EAAE;YAAEqV,SAAS,EAAEpD,YAAY,CAACF,WAAW,CAACsD;UAAU,CAAC,CAAC;UAC7G,IAAI,CAACxR,mBAAmB,CAACoO,YAAY,CAACjS,UAAU,EAAE,WAAW,CAAC;UAC9D,IAAI,CAACtE,SAAS,CAAC0K,aAAa,CAAC,CAAC;UAC9B;QACJ,KAAK,UAAU;UACX,IAAI,CAAC1K,SAAS,CAAC2W,kBAAkB,CAACJ,YAAY,CAACjS,UAAU,EAAE;YAAEsV,QAAQ,EAAErD,YAAY,CAACF,WAAW,CAACuD;UAAS,CAAC,CAAC;UAC3G,IAAI,CAACzR,mBAAmB,CAACoO,YAAY,CAACjS,UAAU,EAAE,UAAU,CAAC;UAC7D,IAAI,CAACtE,SAAS,CAAC0K,aAAa,CAAC,CAAC;UAC9B;QACJ,KAAK,WAAW;UACZ,IAAI,CAAC1K,SAAS,CAAC2W,kBAAkB,CAACJ,YAAY,CAACjS,UAAU,EAAE;YAAEwV,SAAS,EAAEvD,YAAY,CAACF,WAAW,CAACyD;UAAU,CAAC,CAAC;UAC7G,IAAI,CAAC3R,mBAAmB,CAACoO,YAAY,CAACjS,UAAU,EAAE,WAAW,CAAC;UAC9D,IAAI,CAACtE,SAAS,CAAC0K,aAAa,CAAC,CAAC;UAC9B;QACJ,KAAK,sBAAsB;UACvB,IAAI,CAAC1K,SAAS,CAAC2W,kBAAkB,CAACJ,YAAY,CAACjS,UAAU,EAAE;YAAEyV,IAAI,EAAExD,YAAY,CAACF,WAAW,CAAC0D;UAAK,CAAC,CAAC;UACnG,IAAI,CAAC5R,mBAAmB,CAACoO,YAAY,CAACjS,UAAU,EAAE,sBAAsB,CAAC;UACzE,IAAI,CAACtE,SAAS,CAAC0K,aAAa,CAAC,CAAC;UAC9B;QACJ,KAAK,QAAQ;UACT;UACA,IAAI,CAAC1K,SAAS,CAAC2W,kBAAkB,CAACJ,YAAY,CAACjS,UAAU,CAACwB,WAAW,CAAC,CAAC,CAAC,EAAE;YAAEgF,MAAM,EAAEyL,YAAY,CAACF,WAAW,CAACvL,MAAM;YAAEkP,WAAW,EAAEzD,YAAY,CAACF,WAAW,CAAC2D;UAAY,CAAC,CAAC;UACzK,IAAI,CAAC7R,mBAAmB,CAACoO,YAAY,CAACjS,UAAU,CAACwB,WAAW,CAAC,CAAC,CAAC,EAAE,QAAQ,CAAC;UAC1E,IAAI,CAAC9F,SAAS,CAAC0K,aAAa,CAAC,CAAC;UAC9B;QACJ,KAAK,gCAAgC;UACjC,IAAI6L,YAAY,CAACF,WAAW,IAAIE,YAAY,CAACxO,WAAW,CAACkS,WAAW,KAAK1D,YAAY,CAACF,WAAW,CAAC4D,WAAW,EAAE;YAC3G,IAAI,CAACC,iBAAiB,CAAC3D,YAAY,CAACF,WAAW,CAAC;UACpD;UACA,IAAI,CAAC8D,gCAAgC,CAAC5D,YAAY,CAACF,WAAW,CAAC9O,uBAAuB,EAAEgP,YAAY,CAACF,WAAW,CAAC;UACjH;QACJ,KAAK,wBAAwB;UACzB,IAAIE,YAAY,CAACjS,UAAU,CAACiD,uBAAuB,EAAE;YACjD,IAAIgP,YAAY,CAACjS,UAAU,CAACiD,uBAAuB,IAAI,aAAa,EAAE;cAClE,IAAI,CAAC6S,0BAA0B,CAAC7D,YAAY,CAACjS,UAAU,CAACiD,uBAAuB,EAAEgP,YAAY,CAACxO,WAAW,EAAE,IAAI,CAAC;cAChH,IAAI,CAACqS,0BAA0B,CAAC7D,YAAY,CAACjS,UAAU,CAACiD,uBAAuB,EAAEgP,YAAY,CAACF,WAAW,EAAE,KAAK,CAAC;YACrH,CAAC,MACI;cACD,IAAI,CAAC+D,0BAA0B,CAAC7D,YAAY,CAACjS,UAAU,CAACiD,uBAAuB,EAAEgP,YAAY,CAACjS,UAAU,EAAEiS,YAAY,CAACF,WAAW,CAAC;YACvI;UACJ,CAAC,MACI;YACD,IAAIgE,WAAW,GAAGxW,QAAQ,CAACC,cAAc,CAACyS,YAAY,CAACjS,UAAU,CAACN,EAAE,GAAG,eAAe,CAAC,CAACwG,QAAQ,CAAC,CAAC,CAAC,CAACA,QAAQ,CAAC,CAAC,CAAC;YAC/G6P,WAAW,CAACvO,SAAS,GAAG,2CAA2C;YACnE,IAAIjC,YAAY,GAAG,IAAI,CAAC7J,SAAS,CAAC8J,SAAS,CAACyM,YAAY,CAACjS,UAAU,CAACN,EAAE,CAAC+F,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;YACrF,IAAIuQ,aAAa,GAAG,IAAI,CAACta,SAAS,CAAC8J,SAAS,CAACyM,YAAY,CAACjS,UAAU,CAACN,EAAE,CAAC;YACxE6F,YAAY,CAACU,OAAO,CAACC,QAAQ,CAACxD,IAAI,CAACsT,aAAa,CAAC/P,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,CAAC;YACrE,IAAI+L,YAAY,CAACjS,UAAU,CAACgD,mBAAmB,KAAK,eAAe,EAC/DuC,YAAY,CAACU,OAAO,CAACC,QAAQ,CAACxD,IAAI,CAACsT,aAAa,CAAC/P,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,CAAC;YACzE,IAAIuE,GAAG,GAAGwH,YAAY,CAACjS,UAAU,CAACN,EAAE,CAAC+F,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,UAAU;YAC/D,IAAIhE,IAAI,GAAG,IAAI;YACf,IAAI,IAAI,CAAC/F,SAAS,CAACyJ,kBAAkB,EAAE;cACnC1D,IAAI,GAAG,IAAI,CAAC1E,aAAa,CAAC6W,yBAAyB,CAAC,eAAe,CAAC;YACxE;YACA,IAAInS,IAAI,EAAE;cACN,IAAIK,cAAc,GAAGC,IAAI,CAACC,KAAK,CAACP,IAAI,CAAC;cACrC,KAAK,IAAIkE,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG7D,cAAc,CAACK,MAAM,EAAEwD,CAAC,EAAE,EAAE;gBAC5C,IAAI7D,cAAc,CAAC6D,CAAC,CAAC,CAACkO,GAAG,KAAKpJ,GAAG,EAAE;kBAC/B,IAAIwH,YAAY,CAACjS,UAAU,CAACgD,mBAAmB,KAAK,eAAe,EAAE;oBACjElB,cAAc,CAAC6D,CAAC,CAAC,CAACmO,SAAS,CAAC/O,aAAa,GAAG,MAAM;oBAClDjD,cAAc,CAAC6D,CAAC,CAAC,CAACmO,SAAS,CAAChP,KAAK,GAAGmN,YAAY,CAACjS,UAAU,CAACyB,IAAI;oBAChE,IAAI,CAAC1E,aAAa,CAACuH,mBAAmB,CAACqB,CAAC,CAAC,CAACmO,SAAS,CAAChP,KAAK,GAAGmN,YAAY,CAACjS,UAAU,CAACyB,IAAI;oBACxF,IAAI,CAAC1E,aAAa,CAACuH,mBAAmB,CAACqB,CAAC,CAAC,CAACmO,SAAS,CAAC/O,aAAa,GAAG,MAAM;kBAC9E,CAAC,MACI,IAAIkN,YAAY,CAACjS,UAAU,CAACgD,mBAAmB,KAAK,gBAAgB,EAAE;oBACvElB,cAAc,CAAC6D,CAAC,CAAC,CAACmO,SAAS,CAAC/O,aAAa,GAAG,OAAO;oBACnDjD,cAAc,CAAC6D,CAAC,CAAC,CAACmO,SAAS,CAAChP,KAAK,GAAGmN,YAAY,CAACjS,UAAU,CAACyB,IAAI;oBAChE,IAAI,CAAC1E,aAAa,CAACuH,mBAAmB,CAACqB,CAAC,CAAC,CAACmO,SAAS,CAAChP,KAAK,GAAGmN,YAAY,CAACjS,UAAU,CAACyB,IAAI;oBACxF,IAAI,CAAC1E,aAAa,CAACuH,mBAAmB,CAACqB,CAAC,CAAC,CAACmO,SAAS,CAAC/O,aAAa,GAAG,OAAO;kBAC/E,CAAC,MACI;oBACDjD,cAAc,CAAC6D,CAAC,CAAC,CAACmO,SAAS,CAAC/O,aAAa,GAAG,MAAM;oBAClD,IAAI,CAAChI,aAAa,CAACuH,mBAAmB,CAACqB,CAAC,CAAC,CAACmO,SAAS,CAAC/O,aAAa,GAAG,MAAM;oBAC1E,IAAIgP,cAAc,GAAGtZ,eAAe,CAACwX,YAAY,CAACjS,UAAU,CAACyB,IAAI,CAAC;oBAClE,IAAIuS,MAAM,GAAGtZ,oBAAoB,CAACqZ,cAAc,CAAC;oBACjDjS,cAAc,CAAC6D,CAAC,CAAC,CAACmO,SAAS,CAAChP,KAAK,GAAG/C,IAAI,CAACa,SAAS,CAACoR,MAAM,CAAC;oBAC1D,IAAI,CAACjX,aAAa,CAACuH,mBAAmB,CAACqB,CAAC,CAAC,CAACmO,SAAS,CAAChP,KAAK,GAAG/C,IAAI,CAACa,SAAS,CAACoR,MAAM,CAAC;kBACtF;gBACJ;cACJ;cACA,IAAI,CAACtY,SAAS,CAACgY,GAAG,CAACzB,YAAY,CAACjS,UAAU,CAAC;cAC3C,IAAIqW,OAAO,GAAG9W,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAC9D,SAAS,CAAC+D,OAAO,CAACC,EAAE,GAAG,oBAAoB,GAAGuS,YAAY,CAAC1O,SAAS,CAAC;cAChH,IAAI,CAAC7H,SAAS,CAAC0K,aAAa,CAACiQ,OAAO,EAAEpE,YAAY,CAAC1O,SAAS,CAAC;cAC7D,IAAI,CAACxG,aAAa,CAACuJ,uBAAuB,CAAC,IAAI,CAACvJ,aAAa,CAACuH,mBAAmB,EAAE,eAAe,CAAC;YACvG;UACJ;MACR;MACA,IAAI2N,YAAY,CAACF,WAAW,IAAIE,YAAY,CAACF,WAAW,CAACqC,YAAY,KAAKkC,SAAS,EAAE;QACjFrE,YAAY,CAACjS,UAAU,CAACoU,YAAY,GAAGnC,YAAY,CAACF,WAAW,CAACqC,YAAY;MAChF;MACA,IAAI,CAAClY,gBAAgB,CAACwG,IAAI,CAACuP,YAAY,CAAC;MACxC,IAAI,CAAChL,aAAa,CAAC,CAAC;MACpB,IAAI,CAACrL,gBAAgB,GAAG,KAAK;IACjC;EACJ,CAAC;EACDH,UAAU,CAACkC,SAAS,CAACiY,iBAAiB,GAAG,UAAUnW,OAAO,EAAE;IACxD,IAAIA,OAAO,CAACkW,WAAW,IAAIlW,OAAO,CAACwD,uBAAuB,KAAK,SAAS,EAAE;MACtE,IAAI,CAACvH,SAAS,CAACyJ,kBAAkB,CAACoR,mBAAmB,CAAC9W,OAAO,EAAE,IAAI,CAAC;IACxE,CAAC,MACI,IAAIA,OAAO,CAACwD,uBAAuB,KAAK,SAAS,EAAE;MACpD,IAAI,CAACvH,SAAS,CAACyJ,kBAAkB,CAACqR,aAAa,CAAC/W,OAAO,EAAE,IAAI,CAAC;IAClE;EACJ,CAAC;EACDhE,UAAU,CAACkC,SAAS,CAACmY,0BAA0B,GAAG,UAAU7S,uBAAuB,EAAEjD,UAAU,EAAE8E,KAAK,EAAE;IACpG,IAAI9E,UAAU,EAAE;MACZ,IAAIyW,cAAc,GAAG,IAAI,CAAC/a,SAAS,CAACgX,YAAY,CAACgE,YAAY,CAAC1W,UAAU,CAACN,EAAE,CAAC+F,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;MAC1F,IAAIhE,IAAI,GAAG,IAAI;MACf,IAAI,IAAI,CAAC/F,SAAS,CAACyJ,kBAAkB,EAAE;QACnC1D,IAAI,GAAG,IAAI,CAAC1E,aAAa,CAAC6W,yBAAyB,CAAC,eAAe,CAAC;MACxE;MACA,IAAInS,IAAI,EAAE;QACN,IAAIK,cAAc,GAAGC,IAAI,CAACC,KAAK,CAACP,IAAI,CAAC;QACrC,IAAI+C,KAAK,GAAG,IAAI,CAAC9I,SAAS,CAACgX,YAAY,CAACiE,iBAAiB,CAAC3W,UAAU,CAACN,EAAE,CAAC+F,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QACtF,QAAQxC,uBAAuB;UAC3B,KAAK,SAAS;UACd,KAAK,eAAe;UACpB,KAAK,aAAa;UAClB,KAAK,cAAc;UACnB,KAAK,SAAS;YACV,IAAI2T,YAAY,GAAGrX,QAAQ,CAACC,cAAc,CAACQ,UAAU,CAACN,EAAE,CAAC+F,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,uBAAuB,CAAC,CAACoR,iBAAiB,CAACA,iBAAiB;YACrI,IAAI5T,uBAAuB,IAAI,SAAS,IAAIA,uBAAuB,IAAI,eAAe,EAAE;cACpFwT,cAAc,CAAC3R,KAAK,GAAGA,KAAK;cAC5B,IAAI,CAACpJ,SAAS,CAACgX,YAAY,CAACoE,yBAAyB,CAACL,cAAc,EAAEG,YAAY,EAAE,IAAI,EAAEpS,KAAK,EAAE1C,cAAc,CAAC;YACpH,CAAC,MACI,IAAImB,uBAAuB,IAAI,aAAa,EAAE;cAC/CwT,cAAc,CAACM,UAAU,GAAGjS,KAAK;cACjC,IAAI,CAACpJ,SAAS,CAACgX,YAAY,CAACsE,8BAA8B,CAACP,cAAc,EAAEG,YAAY,CAACC,iBAAiB,EAAE,IAAI,EAAErS,KAAK,EAAE1C,cAAc,CAAC;YAC3I,CAAC,MACI,IAAImB,uBAAuB,IAAI,cAAc,IAAIA,uBAAuB,IAAI,SAAS,EAAE;cACxFwT,cAAc,CAACQ,aAAa,GAAGnS,KAAK;cACpChD,cAAc,CAAC0C,KAAK,CAAC,CAACsP,SAAS,CAACmD,aAAa,GAAGnS,KAAK;cACrD,IAAI,CAAC/H,aAAa,CAACuH,mBAAmB,CAACE,KAAK,CAAC,CAACsP,SAAS,CAACmD,aAAa,GAAGnS,KAAK;cAC7E,IAAI,CAACpJ,SAAS,CAAC8J,SAAS,CAAC1D,cAAc,CAAC0C,KAAK,CAAC,CAACqP,GAAG,CAACpO,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAACwR,aAAa,GAAGnS,KAAK;cACvF,IAAI7B,uBAAuB,IAAI,SAAS,EAAE;gBACtC,KAAK,IAAIiU,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGN,YAAY,CAACO,OAAO,CAAChV,MAAM,EAAE+U,CAAC,EAAE,EAAE;kBAClDN,YAAY,CAACO,OAAO,CAACD,CAAC,CAAC,CAACE,QAAQ,GAAGtS,KAAK,CAACuS,QAAQ,CAACH,CAAC,CAAC,GAAG,IAAI,GAAG,KAAK;gBACvE;cACJ,CAAC,MACI;gBACDN,YAAY,CAACK,aAAa,GAAGnS,KAAK;cACtC;YACJ;YACA;UACJ,KAAK,UAAU;YACX,IAAIwS,kBAAkB,GAAG/X,QAAQ,CAACC,cAAc,CAACQ,UAAU,CAACN,EAAE,CAAC+F,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,uBAAuB,CAAC,CAACoR,iBAAiB,CAACA,iBAAiB,CAACxF,gBAAgB;YAC5JoF,cAAc,CAACc,SAAS,GAAGzS,KAAK;YAChC,IAAI,CAACpJ,SAAS,CAACgX,YAAY,CAAC8E,6BAA6B,CAACf,cAAc,EAAEa,kBAAkB,EAAE,IAAI,EAAE9S,KAAK,EAAE1C,cAAc,CAAC;YAC1H;QACR;QACA,IAAI,CAAC/E,aAAa,CAACuJ,uBAAuB,CAAC,IAAI,CAACvJ,aAAa,CAACuH,mBAAmB,EAAE,eAAe,CAAC;MACvG;IACJ;EACJ,CAAC;EACD7I,UAAU,CAACkC,SAAS,CAACkY,gCAAgC,GAAG,UAAU5S,uBAAuB,EAAExD,OAAO,EAAE;IAChG,QAAQwD,uBAAuB;MAC3B,KAAK,SAAS;MACd,KAAK,eAAe;QAChB,IAAI,CAACvH,SAAS,CAACgX,YAAY,CAAC+E,mCAAmC,CAAChY,OAAO,EAAE,IAAI,CAAC;QAC9E;MACJ,KAAK,UAAU;QACX,IAAI,CAAC/D,SAAS,CAACgX,YAAY,CAACgF,oCAAoC,CAACjY,OAAO,EAAE,IAAI,CAAC;QAC/E;MACJ,KAAK,aAAa;QACd,IAAI,CAAC/D,SAAS,CAACgX,YAAY,CAACiF,mCAAmC,CAAClY,OAAO,EAAE,IAAI,CAAC;QAC9E;MACJ,KAAK,cAAc;QACf,IAAI,CAAC/D,SAAS,CAACgX,YAAY,CAACkF,oCAAoC,CAACnY,OAAO,EAAE,IAAI,CAAC;QAC/E;MACJ,KAAK,SAAS;QACV,IAAI,CAAC/D,SAAS,CAACgX,YAAY,CAACmF,mCAAmC,CAACpY,OAAO,EAAE,IAAI,CAAC;QAC9E;MACJ,KAAK,gBAAgB;MACrB,KAAK,cAAc;QACf,IAAI,CAAC/D,SAAS,CAACgX,YAAY,CAACoF,gCAAgC,CAACrY,OAAO,EAAE,IAAI,CAAC;IACnF;EACJ,CAAC;EACDhE,UAAU,CAACkC,SAAS,CAACsX,+BAA+B,GAAG,UAAU8C,iBAAiB,EAAE;IAChF,IAAI,CAAClU,mBAAmB,CAACkU,iBAAiB,EAAE,MAAM,CAAC;IACnD,IAAI,CAAClU,mBAAmB,CAACkU,iBAAiB,EAAE,QAAQ,CAAC;IACrD,IAAI,CAAClU,mBAAmB,CAACkU,iBAAiB,EAAE,SAAS,CAAC;IACtD,IAAI,CAAClU,mBAAmB,CAACkU,iBAAiB,EAAE,WAAW,CAAC;IACxD,IAAI,CAAClU,mBAAmB,CAACkU,iBAAiB,EAAE,WAAW,CAAC;IACxD,IAAI,CAAClU,mBAAmB,CAACkU,iBAAiB,EAAE,YAAY,CAAC;IACzD,IAAI,CAAClU,mBAAmB,CAACkU,iBAAiB,EAAE,UAAU,CAAC;EAC3D,CAAC;EACDtc,UAAU,CAACkC,SAAS,CAACsJ,aAAa,GAAG,UAAU+Q,kBAAkB,EAAE;IAC/D,IAAI,IAAI,CAACtc,SAAS,CAAC2C,aAAa,EAAE;MAC9B,IAAI,CAAC3C,SAAS,CAAC2C,aAAa,CAAC4Z,qBAAqB,CAAC,CAAC;IACxD;IACA,IAAI,IAAI,CAAC/b,gBAAgB,IAAI,IAAI,CAACA,gBAAgB,CAACiG,MAAM,IAAI,CAAC,EAAE;MAC5D,IAAI,CAACpF,aAAa,CAACwJ,4BAA4B,CAAC,KAAK,CAAC;IAC1D,CAAC,MACI;MACD,IAAI,CAACxJ,aAAa,CAACwJ,4BAA4B,CAAC,IAAI,CAAC;IACzD;IACA,IAAIyR,kBAAkB,EAAE;MACpB;MACA;MACA;MACA;MACA;MACA;MACA;MACA,IAAI,CAACjb,aAAa,CAACwJ,4BAA4B,CAAC,IAAI,CAAC;MACrD;IACJ;EACJ,CAAC;EACD9K,UAAU,CAACkC,SAAS,CAACgS,UAAU,GAAG,YAAY;IAC1C;IACA,IAAI,CAACD,SAAS,GAAG1V,aAAa,CAAC,KAAK,EAAE;MAAE0F,EAAE,EAAE,IAAI,CAAChE,SAAS,CAAC+D,OAAO,CAACC,EAAE,GAAG,kBAAkB;MAAE8H,SAAS,EAAE,sBAAsB;MAAE0Q,MAAM,EAAE;IAAe,CAAC,CAAC;IACxJ,IAAI,CAACC,eAAe,GAAGne,aAAa,CAAC,KAAK,EAAE;MAAE0F,EAAE,EAAE,IAAI,CAAChE,SAAS,CAAC+D,OAAO,CAACC,EAAE,GAAG,yBAAyB;MAAE8H,SAAS,EAAE;IAA8B,CAAC,CAAC;IACpJ,IAAI,CAACkI,SAAS,CAAC0I,WAAW,CAAC,IAAI,CAACD,eAAe,CAAC;IAChD;IACA,IAAI,CAACE,gBAAgB,GAAGre,aAAa,CAAC,KAAK,EAAE;MAAE0F,EAAE,EAAE,IAAI,CAAChE,SAAS,CAAC+D,OAAO,CAACC,EAAE,GAAG,0BAA0B;MAAE8H,SAAS,EAAE;IAA+B,CAAC,CAAC;IACvJ,IAAI,CAACkI,SAAS,CAAC0I,WAAW,CAAC,IAAI,CAACC,gBAAgB,CAAC;IACjD,IAAI,IAAI,CAACtb,aAAa,CAACub,aAAa,EAAE;MAClC,IAAI,CAACvb,aAAa,CAACub,aAAa,CAACF,WAAW,CAAC,IAAI,CAAC1I,SAAS,CAAC;IAChE;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI;EACAjU,UAAU,CAACkC,SAAS,CAAC4a,aAAa,GAAG,UAAUC,KAAK,EAAEC,KAAK,EAAEC,MAAM,EAAEC,IAAI,EAAE9a,IAAI,EAAE;IAC7E,IAAI+a,qBAAqB,GAAG,IAAI,CAAC7b,aAAa,CAACub,aAAa,CAACO,qBAAqB,CAAC,CAAC;IACpF,IAAIC,mBAAmB,GAAG,IAAI,CAACpJ,SAAS,CAACmJ,qBAAqB,CAAC,CAAC;IAChE,IAAIH,MAAM,EAAE;MACR,IAAI,CAACP,eAAe,CAACY,WAAW,GAAGL,MAAM;IAC7C;IACA,IAAI,CAACL,gBAAgB,CAACU,WAAW,GAAGJ,IAAI;IACxC,IAAI9a,IAAI,KAAK,WAAW,EAAE;MACtB,IAAI,CAAC6R,SAAS,CAACjI,KAAK,CAACuR,eAAe,GAAG,oBAAoB;IAC/D,CAAC,MACI,IAAInb,IAAI,KAAK,WAAW,EAAE;MAC3B,IAAI,CAAC6R,SAAS,CAACjI,KAAK,CAACuR,eAAe,GAAG,oBAAoB;IAC/D,CAAC,MACI,IAAInb,IAAI,KAAK,eAAe,EAAE;MAC/B,IAAI,CAAC6R,SAAS,CAACjI,KAAK,CAACuR,eAAe,GAAG,oBAAoB;IAC/D;IACA,IAAI,CAACtJ,SAAS,CAACjI,KAAK,CAACkG,OAAO,GAAG,OAAO;IACtC,IAAIsL,WAAW,GAAIT,KAAK,CAACU,KAAK,GAAGN,qBAAqB,CAAClS,GAAG,GAAG,CAAE;IAC/D,IAAIyS,YAAY,GAAIX,KAAK,CAACY,KAAK,GAAGR,qBAAqB,CAACnS,IAAI,GAAG,CAAE;IACjE,IAAI0S,YAAY,GAAGL,mBAAmB,CAACnS,KAAK,GAAGiS,qBAAqB,CAACjS,KAAK,EAAE;MACxEwS,YAAY,GAAGA,YAAY,GAAGL,mBAAmB,CAACnS,KAAK;IAC3D;IACA,IAAIsS,WAAW,GAAGH,mBAAmB,CAAClS,MAAM,GAAGgS,qBAAqB,CAAChS,MAAM,EAAE;MACzEqS,WAAW,GAAGA,WAAW,GAAGH,mBAAmB,CAAClS,MAAM;IAC1D;IACA,IAAI,CAAC8I,SAAS,CAACjI,KAAK,CAACf,GAAG,GAAGuS,WAAW,GAAG,IAAI;IAC7C,IAAI,CAACvJ,SAAS,CAACjI,KAAK,CAAChB,IAAI,GAAG0S,YAAY,GAAG,IAAI;EACnD,CAAC;EACD;AACJ;AACA;EACI1d,UAAU,CAACkC,SAAS,CAAC0b,aAAa,GAAG,YAAY;IAC7C,IAAI,IAAI,CAAC3J,SAAS,EAAE;MAChB,IAAI,CAACA,SAAS,CAACjI,KAAK,CAACkG,OAAO,GAAG,MAAM;IACzC;EACJ,CAAC;EACDlS,UAAU,CAACkC,SAAS,CAAC2b,qBAAqB,GAAG,YAAY;IACrD,IAAIC,KAAK,GAAG,IAAI;IAChB,IAAIC,SAAS,GAAG,IAAI,CAAC9d,SAAS,CAAC+D,OAAO,CAACC,EAAE;IACzC;IACA,IAAI,CAAC+Z,YAAY,GAAGzf,aAAa,CAAC,KAAK,EAAE;MAAE0F,EAAE,EAAE8Z,SAAS,GAAG,wBAAwB;MAAEhS,SAAS,EAAE,4BAA4B;MAAE0Q,MAAM,EAAE;IAAe,CAAC,CAAC;IACvJ,IAAIwB,aAAa,GAAG1f,aAAa,CAAC,KAAK,EAAE;MAAE0F,EAAE,EAAE8Z,SAAS,GAAG,eAAe;MAAEhS,SAAS,EAAE;IAA+B,CAAC,CAAC;IACxH;IACA,IAAI,CAACmS,kBAAkB,GAAG3f,aAAa,CAAC,KAAK,EAAE;MAAE0F,EAAE,EAAE8Z,SAAS,GAAG,eAAe;MAAEhS,SAAS,EAAE;IAA+B,CAAC,CAAC;IAC9HkS,aAAa,CAACtB,WAAW,CAAC,IAAI,CAACuB,kBAAkB,CAAC;IAClD;IACA,IAAIC,QAAQ,GAAG5f,aAAa,CAAC,MAAM,EAAE;MAAE0F,EAAE,EAAE8Z,SAAS,GAAG,cAAc;MAAEhS,SAAS,EAAE;IAAwC,CAAC,CAAC;IAC5HkS,aAAa,CAACtB,WAAW,CAACwB,QAAQ,CAAC;IACnC,IAAI,CAACH,YAAY,CAACrB,WAAW,CAACsB,aAAa,CAAC;IAC5C;IACA,IAAI,CAACG,mBAAmB,GAAG7f,aAAa,CAAC,KAAK,EAAE;MAAE0F,EAAE,EAAE8Z,SAAS,GAAG,sBAAsB;MAAEhS,SAAS,EAAE;IAAgC,CAAC,CAAC;IACvI,IAAI,CAACiS,YAAY,CAACrB,WAAW,CAAC,IAAI,CAACyB,mBAAmB,CAAC;IACvD;IACA,IAAIC,gBAAgB,GAAG9f,aAAa,CAAC,KAAK,EAAE;MAAE0F,EAAE,EAAE8Z,SAAS,GAAG,0BAA0B;MAAEhS,SAAS,EAAE;IAAuC,CAAC,CAAC;IAC9I,IAAI,CAACuS,kBAAkB,GAAG/f,aAAa,CAAC,KAAK,EAAE;MAAE0F,EAAE,EAAE8Z,SAAS,GAAG,gBAAgB;MAAEhS,SAAS,EAAE;IAAgC,CAAC,CAAC;IAChI,IAAI,CAACuS,kBAAkB,CAACC,eAAe,GAAG,MAAM;IAChDF,gBAAgB,CAAC1B,WAAW,CAAC,IAAI,CAAC2B,kBAAkB,CAAC;IACrD,IAAI,CAACN,YAAY,CAACrB,WAAW,CAAC0B,gBAAgB,CAAC;IAC/C,IAAI,CAAC/c,aAAa,CAACmP,eAAe,CAACkM,WAAW,CAAC,IAAI,CAACqB,YAAY,CAAC;IACjEG,QAAQ,CAACha,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAACqa,kBAAkB,CAACla,IAAI,CAAC,IAAI,CAAC,CAAC;IACtE6Z,QAAQ,CAACha,gBAAgB,CAAC,UAAU,EAAE,IAAI,CAACqa,kBAAkB,CAACla,IAAI,CAAC,IAAI,CAAC,CAAC;IACzE,IAAI,CAAC0Z,YAAY,CAAC7Z,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAACsa,uBAAuB,CAACna,IAAI,CAAC,IAAI,CAAC,CAAC;IACxF,IAAI,CAAC0Z,YAAY,CAAC7Z,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAACua,kBAAkB,CAACpa,IAAI,CAAC,IAAI,CAAC,CAAC;IACnF2B,MAAM,CAAC9B,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAACwa,qBAAqB,CAACra,IAAI,CAAC,IAAI,CAAC,CAAC;IACzE,IAAI,CAAC0Z,YAAY,CAAC7Z,gBAAgB,CAAC,YAAY,EAAE,IAAI,CAACsa,uBAAuB,CAACna,IAAI,CAAC,IAAI,CAAC,CAAC;IACzF,IAAI,CAAC0Z,YAAY,CAAC7Z,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAACua,kBAAkB,CAACpa,IAAI,CAAC,IAAI,CAAC,CAAC;IACnF2B,MAAM,CAAC9B,gBAAgB,CAAC,UAAU,EAAE,IAAI,CAACwa,qBAAqB,CAACra,IAAI,CAAC,IAAI,CAAC,CAAC;IAC1E,IAAI,CAACga,kBAAkB,CAACna,gBAAgB,CAAC,WAAW,EAAE,YAAY;MAC9D2Z,KAAK,CAACQ,kBAAkB,CAACM,KAAK,CAAC,CAAC;IACpC,CAAC,CAAC;EACN,CAAC;EACD;EACA5e,UAAU,CAACkC,SAAS,CAACuc,uBAAuB,GAAG,UAAU1B,KAAK,EAAE;IAC5D,IAAIA,KAAK,CAAC3a,IAAI,KAAK,YAAY,EAAE;MAC7B2a,KAAK,GAAGA,KAAK,CAAC8B,cAAc,CAAC,CAAC,CAAC;IACnC;IACA,IAAK9B,KAAK,CAAC+B,MAAM,CAAC7a,EAAE,KAAM,IAAI,CAACqa,kBAAkB,CAACra,EAAG,IAAI,CAAE8Y,KAAK,CAAC+B,MAAM,CAAChT,QAAQ,CAAC,IAAI,CAACwS,kBAAkB,CAACS,UAAU,CAAC,CAAC,CAAC,CAAE,EAAG;MACvH,IAAI,CAACC,gBAAgB,GAAG,IAAI;MAC5B,IAAIC,sBAAsB,GAAG,IAAI,CAACjB,YAAY,CAACZ,qBAAqB,CAAC,CAAC;MACtE,IAAI,CAAC8B,OAAO,GAAGnC,KAAK,CAACmC,OAAO,GAAGD,sBAAsB,CAACjU,IAAI;MAC1D;MACA,IAAI,CAACmU,OAAO,GAAIpC,KAAK,CAACoC,OAAO,GAAGF,sBAAsB,CAAChU,GAAG,GAAK,IAAI,CAAC3J,aAAa,CAAC+O,QAAQ,CAAC,IAAI,CAAC+O,sBAAsB,CAAC,CAACnU,GAAG,GAAG,IAAI,CAAC3J,aAAa,CAACgP,aAAa,CAAC,CAAE;IACrK;EACJ,CAAC;EACD;EACAtQ,UAAU,CAACkC,SAAS,CAACwc,kBAAkB,GAAG,UAAU3B,KAAK,EAAE;IACvD,IAAIA,KAAK,CAAC3a,IAAI,KAAK,WAAW,EAAE;MAC5B2a,KAAK,GAAGA,KAAK,CAAC8B,cAAc,CAAC,CAAC,CAAC;IACnC;IACA;IACA,IAAI,IAAI,CAACG,gBAAgB,KAAKjC,KAAK,CAAC+B,MAAM,CAAC7a,EAAE,KAAM,IAAI,CAACqa,kBAAkB,CAACra,EAAG,IAAI,CAAE8Y,KAAK,CAAC+B,MAAM,CAAChT,QAAQ,CAAC,IAAI,CAACwS,kBAAkB,CAACS,UAAU,CAAC,CAAC,CAAC,CAAE,CAAC,EAAE;MAChJ,IAAI/T,IAAI,GAAI+R,KAAK,CAACmC,OAAO,GAAG,IAAI,CAACA,OAAO,GAAIG,UAAU,CAAC,IAAI,CAACrB,YAAY,CAAChS,KAAK,CAAChB,IAAI,CAAC;MACpF,IAAIsU,KAAK,GAAKvC,KAAK,CAACoC,OAAO,GAAG,IAAI,CAACA,OAAO,GAAIE,UAAU,CAAC,IAAI,CAACrB,YAAY,CAAChS,KAAK,CAACf,GAAG,CAAE;MACtF,IAAI,CAACiU,OAAO,GAAGnC,KAAK,CAACmC,OAAO;MAC5B,IAAI,CAACC,OAAO,GAAGpC,KAAK,CAACoC,OAAO;MAC5B,IAAII,cAAc,GAAG,IAAI,CAACvB,YAAY,CAACZ,qBAAqB,CAAC,CAAC;MAC9D,IAAIvZ,OAAO,GAAGC,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAC9D,SAAS,CAAC+D,OAAO,CAACC,EAAE,GAAG,WAAW,GAAG,IAAI,CAACmb,sBAAsB,CAAC;MAC5G;MACA,IAAIpU,IAAI,GAAGqU,UAAU,CAACxb,OAAO,CAACmI,KAAK,CAAChB,IAAI,CAAC,IAAKA,IAAI,GAAGuU,cAAc,CAACrU,KAAK,GAAKmU,UAAU,CAACxb,OAAO,CAACmI,KAAK,CAAChB,IAAI,CAAC,GAAGqU,UAAU,CAACxb,OAAO,CAACmI,KAAK,CAACd,KAAK,CAAE,EAAE;QAC7I,IAAI,CAAC8S,YAAY,CAAChS,KAAK,CAAChB,IAAI,GAAIA,IAAI,GAAI,IAAI;MAChD,CAAC,MACI;QACD,IAAI,CAACgT,YAAY,CAAChS,KAAK,CAAChB,IAAI,GAAGqU,UAAU,CAAC,IAAI,CAACrB,YAAY,CAAChS,KAAK,CAAChB,IAAI,CAAC,GAAG,IAAI;MAClF;MACA;MACA,IAAIsU,KAAK,GAAGD,UAAU,CAACxb,OAAO,CAACmI,KAAK,CAACf,GAAG,CAAC,IAAKqU,KAAK,GAAGC,cAAc,CAACpU,MAAM,GAAKkU,UAAU,CAACxb,OAAO,CAACmI,KAAK,CAACf,GAAG,CAAC,GAAGoU,UAAU,CAACxb,OAAO,CAACmI,KAAK,CAACb,MAAM,CAAE,EAAE;QAC/I,IAAI,CAAC6S,YAAY,CAAChS,KAAK,CAACf,GAAG,GAAIqU,KAAK,GAAI,IAAI;MAChD,CAAC,MACI;QACD,IAAI,CAACtB,YAAY,CAAChS,KAAK,CAACf,GAAG,GAAGoU,UAAU,CAAC,IAAI,CAACrB,YAAY,CAAChS,KAAK,CAACf,GAAG,CAAC,GAAG,IAAI;MAChF;IACJ;EACJ,CAAC;EACDjL,UAAU,CAACkC,SAAS,CAACyc,qBAAqB,GAAG,YAAY;IACrD,IAAI,CAACK,gBAAgB,GAAG,KAAK;EACjC,CAAC;EACDhf,UAAU,CAACkC,SAAS,CAACsc,kBAAkB,GAAG,YAAY;IAClD,IAAI,IAAI,CAAChd,0BAA0B,EAAE;MACjC,IAAI,CAACA,0BAA0B,CAACge,eAAe,CAAC,IAAI,CAACJ,sBAAsB,EAAE,IAAI,CAACd,kBAAkB,CAACmB,SAAS,CAAC;IACnH;IACA,IAAI,CAACC,cAAc,CAAC,CAAC;EACzB,CAAC;EACD;AACJ;AACA;EACI1f,UAAU,CAACkC,SAAS,CAACwd,cAAc,GAAG,YAAY;IAC9C,IAAI,IAAI,CAAC1B,YAAY,EAAE;MACnB,IAAI,CAACA,YAAY,CAAC9R,aAAa,CAACuL,WAAW,CAAC,IAAI,CAACuG,YAAY,CAAC;MAC9D,IAAI,CAACA,YAAY,GAAG,IAAI;MACxB,IAAI,CAACrd,kBAAkB,GAAG,KAAK;IACnC;EACJ,CAAC;EACD;AACJ;AACA;AACA;EACI;EACAX,UAAU,CAACkC,SAAS,CAACyd,mBAAmB,GAAG,UAAU5C,KAAK,EAAE;IACxD,IAAI,IAAI,CAACvb,0BAA0B,EAAE;MACjC,IAAI,CAAC4d,sBAAsB,GAAG,IAAI,CAACQ,kBAAkB,CAAC7C,KAAK,CAAC;MAC5D;MACA,IAAI,IAAI,CAACvb,0BAA0B,KAAKub,KAAK,CAAC+B,MAAM,KAAM,IAAI,CAACR,kBAAmB,IAAKvB,KAAK,CAAC+B,MAAM,CAAChT,QAAQ,CAAC,IAAI,CAACwS,kBAAkB,CAACS,UAAU,CAAC,CAAC,CAAC,CAAE,CAAC,EAAE;QACnJ,IAAI,CAACnB,aAAa,CAAC,CAAC;QACpB,IAAI,CAAC,IAAI,CAACI,YAAY,EAAE;UACpB,IAAI,CAACH,qBAAqB,CAAC,CAAC;UAC5B,IAAI,CAACG,YAAY,CAAChS,KAAK,CAACkG,OAAO,GAAG,OAAO;UACzC,IAAI,CAACgM,kBAAkB,CAACZ,WAAW,GAAG,IAAI,CAAC9b,0BAA0B,CAAC6P,2BAA2B,CAAC4L,MAAM;UACxG;UACA,IAAI,CAACmB,mBAAmB,CAACd,WAAW,GAAG,IAAI,CAACuC,aAAa,CAAC,IAAI,CAACre,0BAA0B,CAAC6P,2BAA2B,CAACsH,YAAY,CAAC;UACnI,IAAI,CAAC2F,kBAAkB,CAAChB,WAAW,GAAG,IAAI,CAAC9b,0BAA0B,CAAC6P,2BAA2B,CAAC6L,IAAI;UACtG,IAAIqC,cAAc,GAAG,IAAI,CAACvB,YAAY,CAACZ,qBAAqB,CAAC,CAAC;UAC9D;UACA,IAAIvZ,OAAO,GAAGC,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAC9D,SAAS,CAAC+D,OAAO,CAACC,EAAE,GAAG,WAAW,GAAG,IAAI,CAACmb,sBAAsB,CAAC;UAC5G,IAAIU,cAAc,GAAGjc,OAAO,CAACuZ,qBAAqB,CAAC,CAAC;UACpD,IAAII,WAAW,GAAKT,KAAK,CAACoC,OAAO,GAAIW,cAAc,CAAC7U,GAAG,GAAIoU,UAAU,CAACxb,OAAO,CAACmI,KAAK,CAACf,GAAG,CAAC;UACxF,IAAIyS,YAAY,GAAIX,KAAK,CAACmC,OAAQ;UAClC,IAAKxB,YAAY,GAAG6B,cAAc,CAACrU,KAAK,GAAKmU,UAAU,CAACxb,OAAO,CAACmI,KAAK,CAAChB,IAAI,CAAC,GAAGqU,UAAU,CAACxb,OAAO,CAACmI,KAAK,CAACd,KAAK,CAAE,EAAE;YAC5G,IAAI,CAAC8S,YAAY,CAAChS,KAAK,CAAChB,IAAI,GAAI0S,YAAY,GAAG6B,cAAc,CAACrU,KAAK,GAAI,IAAI;UAC/E,CAAC,MACI;YACD,IAAI,CAAC8S,YAAY,CAAChS,KAAK,CAAChB,IAAI,GAAG0S,YAAY,GAAG,IAAI;UACtD;UACA,IAAKF,WAAW,GAAG+B,cAAc,CAACpU,MAAM,GAAKkU,UAAU,CAACxb,OAAO,CAACmI,KAAK,CAACf,GAAG,CAAC,GAAGoU,UAAU,CAACxb,OAAO,CAACmI,KAAK,CAACb,MAAM,CAAE,EAAE;YAC5G,IAAI,CAAC6S,YAAY,CAAChS,KAAK,CAACf,GAAG,GAAIuS,WAAW,GAAG+B,cAAc,CAACpU,MAAM,GAAI,IAAI;UAC9E,CAAC,MACI;YACD,IAAI,CAAC6S,YAAY,CAAChS,KAAK,CAACf,GAAG,GAAGuS,WAAW,GAAG,IAAI;UACpD;UACA,IAAI,CAAC7c,kBAAkB,GAAG,IAAI;QAClC;MACJ;IACJ;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;EACI;EACAX,UAAU,CAACkC,SAAS,CAAC6d,aAAa,GAAG,UAAUC,IAAI,EAAEC,SAAS,EAAE;IAC5D,IAAIxQ,iBAAiB,GAAG,IAAI,CAACxP,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC;IACnE,IAAIma,YAAY,GAAG/gB,WAAW,CAACsQ,iBAAiB,CAAC;IACjD,IAAI0Q,gBAAgB,GAAGhhB,WAAW,CAACsQ,iBAAiB,CAAC;IACrD,IAAI2Q,YAAY,GAAG,CAAC;IACpB,IAAIH,SAAS,EAAE;MACXG,YAAY,GAAGJ,IAAI,GAAG,GAAG;IAC7B,CAAC,MACI;MACDI,YAAY,GAAGJ,IAAI,CAAC3W,KAAK,GAAG,GAAG;IACnC;IACA,IAAIoG,iBAAiB,CAACgJ,OAAO,KAAK2H,YAAY,EAAE;MAC5CD,gBAAgB,CAAC1H,OAAO,GAAG2H,YAAY;MACvC,IAAI,CAACngB,SAAS,CAAC2W,kBAAkB,CAACnH,iBAAiB,EAAE;QAAEgJ,OAAO,EAAE2H;MAAa,CAAC,CAAC;MAC/E,IAAI3Q,iBAAiB,CAAClI,mBAAmB,KAAK,aAAa,EAAE;QACzD,IAAI,CAACzF,2BAA2B,CAACiX,kBAAkB,CAACtJ,iBAAiB,CAAC;MAC1E,CAAC,MACI;QACD,IAAI,CAACrH,mBAAmB,CAACqH,iBAAiB,EAAE,SAAS,CAAC;MAC1D;MACA,IAAIA,iBAAiB,CAAClI,mBAAmB,KAAK,sBAAsB,IAAIkI,iBAAiB,CAAClI,mBAAmB,KAAK,gBAAgB,IAAIkI,iBAAiB,CAAClI,mBAAmB,KAAK,eAAe,EAAE;QAC7L;QACA,IAAI,CAACtH,SAAS,CAACogB,6BAA6B,CAAC5Q,iBAAiB,CAAC3H,SAAS,EAAE2H,iBAAiB,CAAC6Q,aAAa,EAAE7Q,iBAAiB,CAAClI,mBAAmB,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE2Y,YAAY,CAACzH,OAAO,EAAE0H,gBAAgB,CAAC1H,OAAO,CAAC;MACzN,CAAC,MACI;QACD,IAAI,CAAC8H,2BAA2B,CAAC9Q,iBAAiB,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,CAAC;MAClF;MACA;MACA,IAAI,CAACxP,SAAS,CAACsE,UAAU,CAAC+D,SAAS,CAACmH,iBAAiB,CAAC3H,SAAS,EAAE,IAAI,EAAE2H,iBAAiB,EAAE,eAAe,EAAE,EAAE,EAAEyQ,YAAY,EAAEC,gBAAgB,CAAC;MAC9I,IAAI,CAAClgB,SAAS,CAAC0K,aAAa,CAAC,CAAC;IAClC;EACJ,CAAC;EACD;AACJ;AACA;AACA;EACI3K,UAAU,CAACkC,SAAS,CAACse,eAAe,GAAG,UAAUC,YAAY,EAAE;IAC3D,IAAIhR,iBAAiB,GAAG,IAAI,CAACxP,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC;IACnE,IAAIma,YAAY,GAAG/gB,WAAW,CAACsQ,iBAAiB,CAAC;IACjD,IAAI0Q,gBAAgB,GAAGhhB,WAAW,CAACsQ,iBAAiB,CAAC;IACrD0Q,gBAAgB,CAACvG,SAAS,GAAG6G,YAAY;IACzC,IAAI,CAACxgB,SAAS,CAAC2W,kBAAkB,CAACnH,iBAAiB,EAAE;MAAEmK,SAAS,EAAE6G;IAAa,CAAC,CAAC;IACjF,IAAI,CAACrY,mBAAmB,CAACqH,iBAAiB,EAAE,WAAW,CAAC;IACxD,IAAI,CAAC8Q,2BAA2B,CAAC9Q,iBAAiB,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,CAAC;IAC9E;IACA,IAAI,CAACxP,SAAS,CAACsE,UAAU,CAAC+D,SAAS,CAACmH,iBAAiB,CAAC3H,SAAS,EAAE,IAAI,EAAE2H,iBAAiB,EAAE,WAAW,EAAE,EAAE,EAAEyQ,YAAY,EAAEC,gBAAgB,CAAC;IAC1I,IAAI,CAAClgB,SAAS,CAAC0K,aAAa,CAAC,CAAC;EAClC,CAAC;EACD;AACJ;AACA;AACA;EACI3K,UAAU,CAACkC,SAAS,CAACwe,gBAAgB,GAAG,UAAUC,YAAY,EAAE;IAC5D,IAAIlR,iBAAiB,GAAG,IAAI,CAACxP,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC;IACnE,IAAIma,YAAY,GAAG/gB,WAAW,CAACsQ,iBAAiB,CAAC;IACjD,IAAI0Q,gBAAgB,GAAGhhB,WAAW,CAACsQ,iBAAiB,CAAC;IACrD0Q,gBAAgB,CAACrG,UAAU,GAAG6G,YAAY;IAC1C,IAAI,IAAI,CAAC1gB,SAAS,CAACqN,gBAAgB,CAACsT,aAAa,EAAE;MAC/C,IAAI,CAACC,0BAA0B,CAACpR,iBAAiB,EAAEkR,YAAY,CAAC;IACpE,CAAC,MACI;MACD,IAAI,CAAC1gB,SAAS,CAAC2W,kBAAkB,CAACnH,iBAAiB,EAAE;QAAEqK,UAAU,EAAE6G;MAAa,CAAC,CAAC;IACtF;IACA,IAAI,CAACvY,mBAAmB,CAACqH,iBAAiB,EAAE,YAAY,CAAC;IACzD,IAAI,CAAC8Q,2BAA2B,CAAC9Q,iBAAiB,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,CAAC;IAC9E;IACA,IAAI,CAACxP,SAAS,CAACsE,UAAU,CAAC+D,SAAS,CAACmH,iBAAiB,CAAC3H,SAAS,EAAE,IAAI,EAAE2H,iBAAiB,EAAE,YAAY,EAAE,EAAE,EAAEyQ,YAAY,EAAEC,gBAAgB,CAAC;IAC3I,IAAI,CAAClgB,SAAS,CAAC0K,aAAa,CAAC,CAAC;EAClC,CAAC;EACD;AACJ;AACA;AACA;EACI3K,UAAU,CAACkC,SAAS,CAAC4e,cAAc,GAAG,UAAUH,YAAY,EAAEI,YAAY,EAAE;IACxE,IAAItR,iBAAiB,GAAG,IAAI,CAACxP,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC;IACnE,IAAIma,YAAY,GAAG/gB,WAAW,CAACsQ,iBAAiB,CAAC;IACjD,IAAI0Q,gBAAgB,GAAGhhB,WAAW,CAACsQ,iBAAiB,CAAC;IACrD0Q,gBAAgB,CAACtG,QAAQ,GAAG8G,YAAY;IACxC,IAAIK,kBAAkB,GAAG,IAAI,CAACjf,wBAAwB;IACtD,IAAI0E,CAAC,GAAGgJ,iBAAiB,CAAC1E,MAAM,CAACtE,CAAC;IAClC,IAAII,CAAC,GAAG4I,iBAAiB,CAAC1E,MAAM,CAAClE,CAAC;IAClC4I,iBAAiB,CAACoK,QAAQ,GAAG8G,YAAY;IACzC,IAAIK,kBAAkB,IAAI,CAACA,kBAAkB,CAACzd,kBAAkB,IAAIkM,iBAAiB,CAACkK,WAAW,KAAK,EAAE,EAAE;MACtGqH,kBAAkB,CAACC,cAAc,CAAC;QAAExa,CAAC,EAAEA,CAAC;QAAEI,CAAC,EAAEA;MAAE,CAAC,EAAE4I,iBAAiB,CAAC;MACpE,IAAIA,iBAAiB,EAAE;QACnB,IAAIA,iBAAiB,CAACyR,gBAAgB,IAAIP,YAAY,EAAE;UACpDK,kBAAkB,CAACG,eAAe,CAACnV,KAAK,CAACb,MAAM,GAAG,MAAM;UACxD,IAAI4V,YAAY,EAAE;YACdC,kBAAkB,CAACG,eAAe,CAACnV,KAAK,CAACb,MAAM,GAAG6V,kBAAkB,CAACG,eAAe,CAACC,YAAY,GAAG,CAAC,GAAG,IAAI;UAChH,CAAC,MACI;YACD,IAAIJ,kBAAkB,CAACG,eAAe,CAACC,YAAY,GAAG,CAAC,GAAG3R,iBAAiB,CAAC1E,MAAM,CAACI,MAAM,EAAE;cACvF6V,kBAAkB,CAACG,eAAe,CAACnV,KAAK,CAACb,MAAM,GAAG6V,kBAAkB,CAACG,eAAe,CAACC,YAAY,GAAG,CAAC,GAAG,IAAI;YAChH,CAAC,MACI;cACDJ,kBAAkB,CAACG,eAAe,CAACnV,KAAK,CAACb,MAAM,GAAGsE,iBAAiB,CAAC1E,MAAM,CAACI,MAAM,GAAG,IAAI;YAC5F;UACJ;QACJ;QACA,IAAIkW,cAAc,GAAGhC,UAAU,CAAC2B,kBAAkB,CAACG,eAAe,CAACnV,KAAK,CAACb,MAAM,CAAC;QAChF,IAAImW,aAAa,GAAGjC,UAAU,CAAC2B,kBAAkB,CAACG,eAAe,CAACnV,KAAK,CAACd,KAAK,CAAC;QAC9E,IAAIqW,UAAU,GAAG,IAAI,CAACjgB,aAAa,CAACgP,aAAa,CAAC,CAAC;QACnDgR,aAAa,GAAKA,aAAa,GAAIC,UAAW;QAC9CF,cAAc,GAAKA,cAAc,GAAIE,UAAW;QAChD,IAAIC,UAAU,GAAIH,cAAc,GAAG5R,iBAAiB,CAAC1E,MAAM,CAACI,MAAO;QACnE,IAAIsW,GAAG,GAAG5G,SAAS;QACnB,IAAI2G,UAAU,GAAG,CAAC,EAAE;UAChBC,GAAG,GAAGhS,iBAAiB,CAACjF,OAAO,CAACkX,OAAO,GAAIF,UAAU,GAAG,CAAE;UAC1DC,GAAG,GAAGA,GAAG,GAAG,CAAC,GAAGA,GAAG,GAAG5G,SAAS;QACnC,CAAC,MACI;UACD2G,UAAU,GAAG7S,IAAI,CAACgT,GAAG,CAACH,UAAU,CAAC;UACjCC,GAAG,GAAGhS,iBAAiB,CAACjF,OAAO,CAACkX,OAAO,GAAIF,UAAU,GAAG,CAAE;UAC1DC,GAAG,GAAGA,GAAG,GAAG,CAAC,GAAGA,GAAG,GAAG5G,SAAS;QACnC;QACA,IAAI+G,SAAS,GAAIN,aAAa,GAAG7R,iBAAiB,CAAC1E,MAAM,CAACG,KAAM;QAChE,IAAI2W,GAAG,GAAGhH,SAAS;QACnB,IAAI+G,SAAS,GAAG,CAAC,EAAE;UACfC,GAAG,GAAGpS,iBAAiB,CAACjF,OAAO,CAACsX,OAAO,GAAIF,SAAS,GAAG,CAAE;UACzDC,GAAG,GAAGA,GAAG,GAAG,CAAC,GAAGA,GAAG,GAAGhH,SAAS;QACnC,CAAC,MACI;UACD+G,SAAS,GAAGjT,IAAI,CAACgT,GAAG,CAACC,SAAS,CAAC;UAC/BC,GAAG,GAAGpS,iBAAiB,CAACjF,OAAO,CAACsX,OAAO,GAAIF,SAAS,GAAG,CAAE;QAC7D;QACAnS,iBAAiB,CAAC1E,MAAM,CAACG,KAAK,GAAGoW,aAAa;QAC9C7R,iBAAiB,CAAC1E,MAAM,CAACI,MAAM,GAAGkW,cAAc;QAChD;QACA,IAAI,CAACphB,SAAS,CAAC2W,kBAAkB,CAACnH,iBAAiB,EAAE;UAAEoK,QAAQ,EAAE8G,YAAY;UAAE5V,MAAM,EAAE;YAAEG,KAAK,EAAEuE,iBAAiB,CAAC1E,MAAM,CAACG,KAAK;YAAEC,MAAM,EAAEsE,iBAAiB,CAAC1E,MAAM,CAACI,MAAM;YAAEtE,CAAC,EAAE4a,GAAG;YAAEhb,CAAC,EAAEob;UAAI;QAAE,CAAC,CAAC;QAC5L,IAAI,CAAC5hB,SAAS,CAAC8hB,cAAc,CAACtS,iBAAiB,CAAC3H,SAAS,EAAE,IAAI,CAAC7H,SAAS,CAACiQ,0BAA0B,CAAC;QACrGT,iBAAiB,CAACyR,gBAAgB,GAAGP,YAAY;MACrD;MACA,IAAI,CAACvY,mBAAmB,CAACqH,iBAAiB,EAAE,UAAU,CAAC;MACvD,IAAI,CAACrH,mBAAmB,CAACqH,iBAAiB,EAAE,QAAQ,CAAC;MACrD,IAAI,CAAC8Q,2BAA2B,CAAC9Q,iBAAiB,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,CAAC;MAC9E;MACA,IAAI,CAACxP,SAAS,CAACsE,UAAU,CAAC+D,SAAS,CAACmH,iBAAiB,CAAC3H,SAAS,EAAE,IAAI,EAAE2H,iBAAiB,EAAE,UAAU,EAAE,EAAE,EAAEyQ,YAAY,EAAEC,gBAAgB,CAAC;MACzI,IAAI,CAAClgB,SAAS,CAAC0K,aAAa,CAAC,CAAC;IAClC;EACJ,CAAC;EACD;AACJ;AACA;AACA;EACI3K,UAAU,CAACkC,SAAS,CAAC8f,mBAAmB,GAAG,UAAUrB,YAAY,EAAE;IAC/D,IAAIlR,iBAAiB,GAAG,IAAI,CAACxP,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC;IACnE,IAAIma,YAAY,GAAG/gB,WAAW,CAACsQ,iBAAiB,CAAC;IACjD,IAAI0Q,gBAAgB,GAAGhhB,WAAW,CAACsQ,iBAAiB,CAAC;IACrD0Q,gBAAgB,CAACpG,SAAS,GAAG4G,YAAY;IACzC,IAAI,CAAC1gB,SAAS,CAAC2W,kBAAkB,CAACnH,iBAAiB,EAAE;MAAEsK,SAAS,EAAE4G;IAAa,CAAC,CAAC;IACjF,IAAI,CAACvY,mBAAmB,CAACqH,iBAAiB,EAAE,WAAW,CAAC;IACxD,IAAI,CAAC8Q,2BAA2B,CAAC9Q,iBAAiB,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,CAAC;IAC9E;IACA,IAAI,CAACxP,SAAS,CAACsE,UAAU,CAAC+D,SAAS,CAACmH,iBAAiB,CAAC3H,SAAS,EAAE,IAAI,EAAE2H,iBAAiB,EAAE,WAAW,EAAE,EAAE,EAAEyQ,YAAY,EAAEC,gBAAgB,CAAC;IAC1I,IAAI,CAAClgB,SAAS,CAAC0K,aAAa,CAAC,CAAC;EAClC,CAAC;EACD;AACJ;AACA;AACA;AACA;EACI3K,UAAU,CAACkC,SAAS,CAAC+f,oBAAoB,GAAG,UAAUC,QAAQ,EAAE9L,MAAM,EAAE;IACpE,IAAI3G,iBAAiB,GAAG,IAAI,CAACxP,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC;IACnE,IAAIma,YAAY,GAAG/gB,WAAW,CAACsQ,iBAAiB,CAAC;IACjD,IAAI0Q,gBAAgB,GAAGhhB,WAAW,CAACsQ,iBAAiB,CAAC;IACrD,IAAI2G,MAAM,KAAK,MAAM,EAAE;MACnB+J,gBAAgB,CAACnG,IAAI,CAACmI,MAAM,GAAGD,QAAQ,CAACC,MAAM;IAClD,CAAC,MACI,IAAI/L,MAAM,KAAK,QAAQ,EAAE;MAC1B+J,gBAAgB,CAACnG,IAAI,CAACoI,QAAQ,GAAGF,QAAQ,CAACE,QAAQ;IACtD,CAAC,MACI,IAAIhM,MAAM,KAAK,WAAW,EAAE;MAC7B+J,gBAAgB,CAACnG,IAAI,CAACqI,WAAW,GAAGH,QAAQ,CAACG,WAAW;MACxD,IAAIlC,gBAAgB,CAACnG,IAAI,CAACqI,WAAW,IAAIlC,gBAAgB,CAACnG,IAAI,CAACsI,WAAW,EAAE;QACxEnC,gBAAgB,CAACnG,IAAI,CAACsI,WAAW,GAAG,KAAK;MAC7C;IACJ,CAAC,MACI,IAAIlM,MAAM,KAAK,WAAW,EAAE;MAC7B+J,gBAAgB,CAACnG,IAAI,CAACsI,WAAW,GAAGJ,QAAQ,CAACI,WAAW;MACxD,IAAInC,gBAAgB,CAACnG,IAAI,CAACqI,WAAW,IAAIlC,gBAAgB,CAACnG,IAAI,CAACsI,WAAW,EAAE;QACxEnC,gBAAgB,CAACnG,IAAI,CAACqI,WAAW,GAAG,KAAK;MAC7C;IACJ;IACA,IAAI,CAACpiB,SAAS,CAAC2W,kBAAkB,CAACnH,iBAAiB,EAAE;MAAEuK,IAAI,EAAEkI;IAAS,CAAC,CAAC;IACxE,IAAI,CAAC9Z,mBAAmB,CAACqH,iBAAiB,EAAE,sBAAsB,CAAC;IACnE,IAAI,CAAC8Q,2BAA2B,CAAC9Q,iBAAiB,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,CAAC;IAC9E;IACA,IAAI,CAACxP,SAAS,CAACsE,UAAU,CAAC+D,SAAS,CAACmH,iBAAiB,CAAC3H,SAAS,EAAE,IAAI,EAAE2H,iBAAiB,EAAE,sBAAsB,EAAE,EAAE,EAAEyQ,YAAY,EAAEC,gBAAgB,CAAC;IACrJ,IAAI,CAAClgB,SAAS,CAAC0K,aAAa,CAAC,CAAC;EAClC,CAAC;EACD;AACJ;AACA;AACA;EACI3K,UAAU,CAACkC,SAAS,CAACqgB,eAAe,GAAG,UAAUC,cAAc,EAAE;IAC7D,IAAI/S,iBAAiB,GAAG,IAAI,CAACxP,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC;IACnE,IAAI0J,iBAAiB,CAACuJ,SAAS,KAAKwJ,cAAc,EAAE;MAChD,IAAItC,YAAY,GAAG/gB,WAAW,CAACsQ,iBAAiB,CAAC;MACjD,IAAI0Q,gBAAgB,GAAGhhB,WAAW,CAACsQ,iBAAiB,CAAC;MACrD0Q,gBAAgB,CAACnH,SAAS,GAAGwJ,cAAc;MAC3C,IAAI,CAACviB,SAAS,CAAC2W,kBAAkB,CAACnH,iBAAiB,EAAE;QAAEuJ,SAAS,EAAEwJ;MAAe,CAAC,CAAC;MACnF,IAAI,CAACpa,mBAAmB,CAACqH,iBAAiB,EAAE,WAAW,CAAC;MACxD,IAAIA,iBAAiB,CAAClI,mBAAmB,KAAK,sBAAsB,IAAIkI,iBAAiB,CAAClI,mBAAmB,KAAK,eAAe,IAAIkI,iBAAiB,CAAClI,mBAAmB,KAAK,gBAAgB,EAAE;QAC7L;QACA,IAAI,CAACtH,SAAS,CAACogB,6BAA6B,CAAC5Q,iBAAiB,CAAC3H,SAAS,EAAE2H,iBAAiB,CAAC6Q,aAAa,EAAE7Q,iBAAiB,CAAClI,mBAAmB,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE2Y,YAAY,CAAClH,SAAS,EAAEmH,gBAAgB,CAACnH,SAAS,CAAC;MAC7N,CAAC,MACI;QACD,IAAI,CAACuH,2BAA2B,CAAC9Q,iBAAiB,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,CAAC;MAClF;MACA;MACA,IAAI,CAACxP,SAAS,CAACsE,UAAU,CAAC+D,SAAS,CAACmH,iBAAiB,CAAC3H,SAAS,EAAE,IAAI,EAAE2H,iBAAiB,EAAE,iBAAiB,EAAE,EAAE,EAAEyQ,YAAY,EAAEC,gBAAgB,CAAC;MAChJ,IAAI,CAAClgB,SAAS,CAAC0K,aAAa,CAAC,CAAC;IAClC;EACJ,CAAC;EACD;AACJ;AACA;AACA;EACI3K,UAAU,CAACkC,SAAS,CAACugB,iBAAiB,GAAG,UAAUzF,KAAK,EAAE;IACtD,IAAIvN,iBAAiB,GAAG,IAAI,CAACxP,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC;IACnE,IAAIma,YAAY,GAAG/gB,WAAW,CAACsQ,iBAAiB,CAAC;IACjD,IAAI0Q,gBAAgB,GAAGhhB,WAAW,CAACsQ,iBAAiB,CAAC;IACrD0Q,gBAAgB,CAACtH,WAAW,GAAGmE,KAAK;IACpC,IAAI,CAAC/c,SAAS,CAAC2W,kBAAkB,CAACnH,iBAAiB,EAAE;MAAEoJ,WAAW,EAAEmE;IAAM,CAAC,CAAC;IAC5E,IAAI,CAAC5U,mBAAmB,CAACqH,iBAAiB,EAAE,QAAQ,CAAC;IACrD,IAAIA,iBAAiB,CAAClI,mBAAmB,KAAK,sBAAsB,IAAIkI,iBAAiB,CAAClI,mBAAmB,KAAK,eAAe,IAAIkI,iBAAiB,CAAClI,mBAAmB,KAAK,gBAAgB,EAAE;MAC7L;MACA,IAAI,CAACtH,SAAS,CAACogB,6BAA6B,CAAC5Q,iBAAiB,CAAC3H,SAAS,EAAE2H,iBAAiB,CAAC6Q,aAAa,EAAE7Q,iBAAiB,CAAClI,mBAAmB,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE2Y,YAAY,CAACrH,WAAW,EAAEsH,gBAAgB,CAACtH,WAAW,CAAC;IACjO,CAAC,MACI;MACD,IAAI,CAAC0H,2BAA2B,CAAC9Q,iBAAiB,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC;IAClF;IACA;IACA,IAAI,CAACxP,SAAS,CAACsE,UAAU,CAAC+D,SAAS,CAACmH,iBAAiB,CAAC3H,SAAS,EAAE,IAAI,EAAE2H,iBAAiB,EAAE,cAAc,EAAE,EAAE,EAAEyQ,YAAY,EAAEC,gBAAgB,CAAC;IAC7I,IAAI,CAAClgB,SAAS,CAAC0K,aAAa,CAAC,CAAC;EAClC,CAAC;EACD;AACJ;AACA;AACA;EACI3K,UAAU,CAACkC,SAAS,CAACwgB,eAAe,GAAG,UAAU1F,KAAK,EAAE;IACpD,IAAIvN,iBAAiB,GAAG,IAAI,CAACxP,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC;IACnE,IAAIma,YAAY,GAAG/gB,WAAW,CAACsQ,iBAAiB,CAAC;IACjD,IAAI0Q,gBAAgB,GAAGhhB,WAAW,CAACsQ,iBAAiB,CAAC;IACrD0Q,gBAAgB,CAACrH,SAAS,GAAGkE,KAAK;IAClC,IAAI,CAAC/c,SAAS,CAAC2W,kBAAkB,CAAC,IAAI,CAAC3W,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,EAAE;MAAE+S,SAAS,EAAEkE;IAAM,CAAC,CAAC;IACpG,IAAI,CAAC5U,mBAAmB,CAACqH,iBAAiB,EAAE,MAAM,CAAC;IACnD,IAAI,CAAC8Q,2BAA2B,CAAC9Q,iBAAiB,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC;IAC9E;IACA,IAAI,CAACxP,SAAS,CAACsE,UAAU,CAAC+D,SAAS,CAACmH,iBAAiB,CAAC3H,SAAS,EAAE,IAAI,EAAE2H,iBAAiB,EAAE,YAAY,EAAE,EAAE,EAAEyQ,YAAY,EAAEC,gBAAgB,CAAC;IAC3I,IAAI,CAAClgB,SAAS,CAAC0K,aAAa,CAAC,CAAC;EAClC,CAAC;EACD;AACJ;AACA;AACA;AACA;EACI3K,UAAU,CAACkC,SAAS,CAACygB,sBAAsB,GAAG,UAAUhJ,WAAW,EAAEnR,SAAS,EAAE;IAC5E,IAAIiH,iBAAiB,GAAG,IAAI;IAC5BA,iBAAiB,GAAG,IAAI,CAACxP,SAAS,CAAC8F,WAAW,CAACyJ,MAAM,CAAC,UAAUoT,CAAC,EAAE;MAAE,OAAOA,CAAC,CAACpa,SAAS,KAAKA,SAAS;IAAE,CAAC,CAAC,CAAC,CAAC,CAAC;IAC5G,IAAIiH,iBAAiB,EAAE;MACnB,IAAIyQ,YAAY,GAAG/gB,WAAW,CAACsQ,iBAAiB,CAAC;MACjD,IAAI0Q,gBAAgB,GAAGhhB,WAAW,CAACsQ,iBAAiB,CAAC;MACrDA,iBAAiB,CAACkK,WAAW,GAAGA,WAAW;MAC3CwG,gBAAgB,CAACxG,WAAW,GAAGA,WAAW;MAC1C,IAAIuG,YAAY,CAACvG,WAAW,KAAK,EAAE,EAAE;QACjCuG,YAAY,CAACvG,WAAW,GAAG,IAAI,CAAC5X,wBAAwB,CAAC8gB,YAAY;MACzE;MACA,IAAI,CAAC5iB,SAAS,CAAC2W,kBAAkB,CAACnH,iBAAiB,EAAE;QAAEkK,WAAW,EAAEA;MAAY,CAAC,CAAC;MAClF,IAAI,CAAC1Z,SAAS,CAAC8hB,cAAc,CAACtS,iBAAiB,CAAC3H,SAAS,EAAE2H,iBAAiB,CAACS,0BAA0B,CAAC;MACxG,IAAIgQ,YAAY,CAACvG,WAAW,KAAKwG,gBAAgB,CAACxG,WAAW,EAAE;QAC3D;QACA,IAAI,CAAC1Z,SAAS,CAACsE,UAAU,CAAC+D,SAAS,CAACmH,iBAAiB,CAAC3H,SAAS,EAAE,IAAI,EAAE2H,iBAAiB,EAAE,oBAAoB,EAAE,EAAE,EAAEyQ,YAAY,EAAEC,gBAAgB,CAAC;QACnJ,IAAI,CAAC/X,mBAAmB,CAACqH,iBAAiB,EAAE,aAAa,CAAC;MAC9D;MACA,IAAI,CAAChR,iBAAiB,CAAC,IAAI,CAACsD,wBAAwB,CAAC,IAAI,IAAI,CAACA,wBAAwB,CAAC8gB,YAAY,KAAK,WAAW,IAAI,IAAI,CAAC9gB,wBAAwB,CAAC8gB,YAAY,KAAKpT,iBAAiB,CAACkK,WAAW,EAAE;QACjM,IAAI,CAAC4G,2BAA2B,CAAC9Q,iBAAiB,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,CAAC1N,wBAAwB,CAAC8gB,YAAY,EAAEpT,iBAAiB,CAACkK,WAAW,CAAC;MACzL;MACA,IAAI,CAAC1Z,SAAS,CAAC0K,aAAa,CAAC,CAAC;IAClC;EACJ,CAAC;EACD;EACA3K,UAAU,CAACkC,SAAS,CAACkG,mBAAmB,GAAG,UAAU0a,cAAc,EAAE7M,QAAQ,EAAE;IAC3E;IACA,IAAI8M,SAAS;IACb,IAAID,cAAc,CAAC7a,WAAW,KAAK,EAAE,IAAIxJ,iBAAiB,CAACqkB,cAAc,CAAC7a,WAAW,CAAC,EAAE;MACpF,IAAI6a,cAAc,CAACvb,mBAAmB,KAAK,UAAU,EAAE;QACnDwb,SAAS,GAAG,IAAI,CAAChhB,wBAAwB,CAACihB,kBAAkB,CAAC/M,QAAQ,EAAE6M,cAAc,CAAChb,SAAS,EAAEgb,cAAc,CAAC;MACpH,CAAC,MACI,IAAIA,cAAc,CAACvb,mBAAmB,KAAK,sBAAsB,IAAIub,cAAc,CAACvb,mBAAmB,KAAK,eAAe,IAAIub,cAAc,CAACvb,mBAAmB,KAAK,gBAAgB,EAAE;QACzL;QACAwb,SAAS,GAAG,IAAI,CAACzhB,aAAa,CAACmC,eAAe,CAACwf,yBAAyB,CAAChN,QAAQ,EAAE6M,cAAc,CAAChb,SAAS,EAAEgb,cAAc,CAAC;MAChI,CAAC,MACI,IAAIA,cAAc,CAACvb,mBAAmB,KAAK,OAAO,EAAE;QACrDwb,SAAS,GAAG,IAAI,CAAClhB,qBAAqB,CAACmhB,kBAAkB,CAAC/M,QAAQ,EAAE6M,cAAc,CAAChb,SAAS,EAAEgb,cAAc,EAAE,IAAI,CAAC;MACvH,CAAC,MACI,IAAIA,cAAc,CAACvb,mBAAmB,KAAK,KAAK,EAAE;QACnD;QACAwb,SAAS,GAAG,IAAI,CAAC9gB,mBAAmB,CAACihB,4BAA4B,CAACjN,QAAQ,EAAE6M,cAAc,CAAChb,SAAS,EAAEgb,cAAc,CAAC;MACzH,CAAC,MACI;QACDC,SAAS,GAAG,IAAI,CAACrhB,qBAAqB,CAACshB,kBAAkB,CAAC/M,QAAQ,EAAE6M,cAAc,CAAChb,SAAS,EAAEgb,cAAc,EAAE,IAAI,CAAC;MACvH;IACJ,CAAC,MACI,IAAIA,cAAc,CAAC7a,WAAW,KAAK,UAAU,IAAI6a,cAAc,CAAC7a,WAAW,KAAK,WAAW,IAC5F6a,cAAc,CAAC7a,WAAW,KAAK,QAAQ,IAAI6a,cAAc,CAAC7a,WAAW,KAAK,MAAM,IAAI6a,cAAc,CAAC7a,WAAW,KAAK,QAAQ,EAAE;MAC7H8a,SAAS,GAAG,IAAI,CAACnhB,uBAAuB,CAACohB,kBAAkB,CAAC/M,QAAQ,EAAE6M,cAAc,CAAChb,SAAS,EAAEgb,cAAc,CAAC;IACnH;IACA,IAAI,IAAI,CAAC3iB,gBAAgB,EAAE;MACvB,IAAI,CAAC2B,2BAA2B,CAAC4W,4BAA4B,CAACoK,cAAc,EAAE,IAAI,EAAE,IAAI,CAAC;MACzF,IAAI,IAAI,CAAC1iB,YAAY,EAAE;QACnB0iB,cAAc,CAACnK,YAAY,GAAG,IAAI,CAAC1Y,SAAS,CAACsE,UAAU,CAACzC,2BAA2B,CAAC8W,cAAc,CAAC,CAAC;MACxG;IACJ,CAAC,MACI;MACD,IAAI3C,QAAQ,KAAK,QAAQ,EAAE;QACvB,IAAI,CAACnU,2BAA2B,CAAC4W,4BAA4B,CAACoK,cAAc,CAAC;MACjF;IACJ;IACA,OAAOC,SAAS;EACpB,CAAC;EACD;AACJ;AACA;EACI/iB,UAAU,CAACkC,SAAS,CAACihB,sBAAsB,GAAG,YAAY;IACtD,IAAIrF,KAAK,GAAG,IAAI;IAChB,IAAI,CAACpf,QAAQ,CAAC,CAAC,EAAE;MACb,IAAI0kB,SAAS,GAAG,IAAI,CAACnjB,SAAS,CAAC+D,OAAO,CAACC,EAAE;MACzC;MACA,IAAIof,SAAS,GAAG9kB,aAAa,CAAC,KAAK,EAAE;QAAE0F,EAAE,EAAEmf,SAAS,GAAG,oBAAoB;QAAErX,SAAS,EAAE;MAAyB,CAAC,CAAC;MACnH,IAAIuX,aAAa,GAAG,IAAI,CAACC,mBAAmB,CAAC,CAAC;MAC9C,IAAI,CAACjiB,aAAa,CAACyT,aAAa,CAAC4H,WAAW,CAAC0G,SAAS,CAAC;MACvD,IAAI,CAACG,gBAAgB,GAAG,IAAI1kB,MAAM,CAAC;QAC/B2kB,aAAa,EAAE,IAAI;QAAEC,aAAa,EAAE,KAAK;QAAEC,OAAO,EAAE,IAAI;QAAEC,MAAM,EAAE,IAAI,CAAC3jB,SAAS,CAAC4jB,SAAS,CAACC,WAAW,CAAC,iBAAiB,CAAC;QACzHhF,MAAM,EAAE,IAAI,CAAC7e,SAAS,CAAC+D,OAAO;QAAE+f,OAAO,EAAET,aAAa;QAAEU,KAAK,EAAE,SAAAA,CAAA,EAAY;UACvElG,KAAK,CAACmG,uBAAuB,CAAC,CAAC;QACnC;MACJ,CAAC,CAAC;MACF,IAAI,CAACzlB,OAAO,CAAC8V,QAAQ,IAAI,IAAI,CAACrU,SAAS,CAACuV,iBAAiB,EAAE;QACvD,IAAI,CAACgO,gBAAgB,CAACU,OAAO,GAAG;QAC5B;QACA;UAAEC,WAAW,EAAE;YAAEJ,OAAO,EAAE,IAAI,CAAC9jB,SAAS,CAAC4jB,SAAS,CAACC,WAAW,CAAC,IAAI,CAAC;YAAEM,SAAS,EAAE;UAAK,CAAC;UAAE5R,KAAK,EAAE,IAAI,CAAC6R,WAAW,CAAC/f,IAAI,CAAC,IAAI;QAAE,CAAC,EAC7H;UAAE6f,WAAW,EAAE;YAAEJ,OAAO,EAAE,IAAI,CAAC9jB,SAAS,CAAC4jB,SAAS,CAACC,WAAW,CAAC,QAAQ;UAAE,CAAC;UAAEtR,KAAK,EAAE,IAAI,CAAC8R,eAAe,CAAChgB,IAAI,CAAC,IAAI;QAAE,CAAC,CACvH;MACL,CAAC,MACI;QACD,IAAI,CAACkf,gBAAgB,CAACU,OAAO,GAAG,CAC5B;UAAEC,WAAW,EAAE;YAAEJ,OAAO,EAAE,IAAI,CAAC9jB,SAAS,CAAC4jB,SAAS,CAACC,WAAW,CAAC,QAAQ;UAAE,CAAC;UAAEtR,KAAK,EAAE,IAAI,CAAC8R,eAAe,CAAChgB,IAAI,CAAC,IAAI;QAAE,CAAC;QACpH;QACA;UAAE6f,WAAW,EAAE;YAAEJ,OAAO,EAAE,IAAI,CAAC9jB,SAAS,CAAC4jB,SAAS,CAACC,WAAW,CAAC,IAAI,CAAC;YAAEM,SAAS,EAAE;UAAK,CAAC;UAAE5R,KAAK,EAAE,IAAI,CAAC6R,WAAW,CAAC/f,IAAI,CAAC,IAAI;QAAE,CAAC,CAChI;MACL;MACA,IAAI,IAAI,CAACrE,SAAS,CAAC+U,SAAS,EAAE;QAC1B,IAAI,CAACwO,gBAAgB,CAACxO,SAAS,GAAG,IAAI;MAC1C;MACA,IAAI,CAACwO,gBAAgB,CAACe,QAAQ,CAAClB,SAAS,CAAC;MACzC,IAAI,IAAI,CAACpjB,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC9F,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,CAACwB,mBAAmB,KAAK,MAAM,EAAE;QAC3H;QACA,IAAIuR,SAAS,GAAGhV,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAC9D,SAAS,CAAC+D,OAAO,CAACC,EAAE,GAAG,wBAAwB,CAAC;QAC7F6U,SAAS,CAACpR,QAAQ,GAAG,IAAI;MAC7B;MACA;MACA,IAAI,CAAC8c,kBAAkB,CAACT,OAAO,GAAG,IAAI,CAACU,aAAa,CAAC,IAAI,CAACC,cAAc,CAAC,IAAI,CAACzkB,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,CAACoT,qBAAqB,CAAC,CAAC,CAACwL,SAAS;MACtJ,IAAI,CAACC,gBAAgB,CAACb,OAAO,GAAG,IAAI,CAACU,aAAa,CAAC,IAAI,CAACC,cAAc,CAAC,IAAI,CAACzkB,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,CAACuT,sBAAsB,CAAC,CAAC,CAACqL,SAAS;MACrJ,IAAI,CAACE,YAAY,CAACxb,KAAK,GAAG,IAAI,CAACpJ,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,CAACyE,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACuB,KAAK,CAAC8Y,WAAW;MAC3G,IAAI,CAACC,eAAe,CAAC1b,KAAK,GAAG,IAAI,CAACpJ,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,CAACyE,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACuB,KAAK,CAACgZ,IAAI;MACvG,IAAI,CAACC,kBAAkB,CAAC,IAAI,CAACF,eAAe,CAAC;MAC7C,IAAI,CAACG,iBAAiB,CAAC7b,KAAK,GAAG,IAAI,CAACpJ,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,CAACyE,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACuB,KAAK,CAAC6M,WAAW;MAChH,IAAI,CAACoM,kBAAkB,CAAC,IAAI,CAACC,iBAAiB,CAAC;MAC/C,IAAI,CAACC,iBAAiB,CAAC,IAAI,CAACC,YAAY,CAACphB,OAAO,EAAE,IAAI,CAAC+gB,eAAe,CAAC1b,KAAK,CAAC;MAC7E,IAAI,CAAC8b,iBAAiB,CAAC,IAAI,CAACE,cAAc,CAACrhB,OAAO,EAAE,IAAI,CAACkhB,iBAAiB,CAAC7b,KAAK,CAAC;MACjF,IAAI,CAACic,aAAa,CAACjc,KAAK,GAAG,IAAI,CAACpJ,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,CAACyE,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACuB,KAAK,CAACyM,OAAO,GAAG,GAAG;MAC9G,IAAI,CAAC8M,sBAAsB,CAAC,CAAC;MAC7B;MACA,IAAI7f,QAAQ,CAAC,IAAI,CAACzF,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,CAACyE,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACuB,KAAK,CAACwZ,eAAe,CAAC,IAAI,CAAC,EAAE;QACtG,IAAI,CAACC,iBAAiB,CAAC1B,OAAO,GAAG,IAAI,CAAC2B,qBAAqB,CAAC,QAAQ,CAAC,CAACf,SAAS;MACnF,CAAC,MACI,IAAI,IAAI,CAAC1kB,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,CAACyE,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACuB,KAAK,CAACwZ,eAAe,KAAK,GAAG,EAAE;QACpG,IAAI,CAACC,iBAAiB,CAAC1B,OAAO,GAAG,IAAI,CAAC2B,qBAAqB,CAAC,QAAQ,CAAC,CAACf,SAAS;MACnF,CAAC,MACI,IAAI,IAAI,CAAC1kB,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,CAACyE,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACuB,KAAK,CAACwZ,eAAe,KAAK,GAAG,EAAE;QACpG,IAAI,CAACC,iBAAiB,CAAC1B,OAAO,GAAG,IAAI,CAAC2B,qBAAqB,CAAC,OAAO,CAAC,CAACf,SAAS;MAClF;MACA,IAAI,CAACgB,iBAAiB,GAAG,IAAI,CAAC1lB,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,CAACmT,WAAW;MAChF,IAAI,CAAC0M,qBAAqB,GAAG,IAAI,CAAC3lB,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,CAACyE,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACuB,KAAK,CAACwZ,eAAe;MAClH,IAAI,IAAI,CAACvlB,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,CAACwB,mBAAmB,KAAK,UAAU,EAAE;QAChF,IAAI,CAACse,eAAe,CAACxc,KAAK,GAAG,IAAI,CAACpJ,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,CAAC+Q,YAAY;MACzF;IACJ,CAAC,MACI;MACD,IAAIsJ,YAAY,GAAG,IAAI,CAACngB,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,CAACyE,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACuB,KAAK,CAACyM,OAAO,GAAG,GAAG;MACtG,IAAIqN,gBAAgB,GAAG,IAAI,CAACpB,cAAc,CAAC,IAAI,CAACzkB,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,CAACoT,qBAAqB,CAAC;MAC7G,IAAI4M,cAAc,GAAG,IAAI,CAACrB,cAAc,CAAC,IAAI,CAACzkB,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,CAACuT,sBAAsB,CAAC;MAC5G,IAAI0M,gBAAgB,GAAG,KAAK,CAAC;MAC7B;MACA,IAAItgB,QAAQ,CAAC,IAAI,CAACzF,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,CAACyE,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACuB,KAAK,CAACwZ,eAAe,CAAC,IAAI,CAAC,EAAE;QACtGQ,gBAAgB,GAAG,QAAQ;MAC/B,CAAC,MACI,IAAI,IAAI,CAAC/lB,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,CAACyE,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACuB,KAAK,CAACwZ,eAAe,KAAK,GAAG,EAAE;QACpGQ,gBAAgB,GAAG,QAAQ;MAC/B,CAAC,MACI,IAAI,IAAI,CAAC/lB,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,CAACyE,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACuB,KAAK,CAACwZ,eAAe,KAAK,GAAG,EAAE;QACpGQ,gBAAgB,GAAG,OAAO;MAC9B;MACA,IAAI,CAAC/lB,SAAS,CAACgmB,eAAe,CAACC,iBAAiB,CAAC,sBAAsB,EAAE9F,YAAY,EAAE0F,gBAAgB,EAAEC,cAAc,EAAEC,gBAAgB,CAAC;IAC9I;EACJ,CAAC;EACDhmB,UAAU,CAACkC,SAAS,CAACikB,8BAA8B,GAAG,YAAY;IAC9D;IACA,IAAIC,gBAAgB,GAAGtiB,QAAQ,CAACuiB,aAAa,CAAC,GAAG,GAAG,IAAI,CAACpmB,SAAS,CAAC+D,OAAO,CAACC,EAAE,GAAG,iBAAiB,CAAC;IAClG;IACA,IAAIqiB,gBAAgB,GAAGxiB,QAAQ,CAACuiB,aAAa,CAAC,GAAG,GAAG,IAAI,CAACpmB,SAAS,CAAC+D,OAAO,CAACC,EAAE,GAAG,+BAA+B,CAAC;IAChH;IACA,IAAIsiB,kBAAkB,GAAGziB,QAAQ,CAACuiB,aAAa,CAAC,GAAG,GAAG,IAAI,CAACpmB,SAAS,CAAC+D,OAAO,CAACC,EAAE,GAAG,iCAAiC,CAAC;IACpH;IACA,IAAIuiB,mBAAmB,GAAG1iB,QAAQ,CAACuiB,aAAa,CAAC,GAAG,GAAG,IAAI,CAACpmB,SAAS,CAAC+D,OAAO,CAACC,EAAE,GAAG,2BAA2B,CAAC;IAC/GmiB,gBAAgB,CAAC/c,KAAK,GAAG,IAAI,CAACpJ,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,CAACyE,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACuB,KAAK,CAAC8Y,WAAW;IAC1GwB,gBAAgB,CAACjd,KAAK,GAAG,IAAI,CAACpJ,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,CAACyE,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACuB,KAAK,CAACgZ,IAAI;IACnGuB,kBAAkB,CAACld,KAAK,GAAG,IAAI,CAACpJ,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,CAACyE,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACuB,KAAK,CAAC6M,WAAW;IAC5G,IAAI,CAAC4N,mBAAmB,CAACF,kBAAkB,CAACld,KAAK,CAAC;IAClD,IAAI,CAACqd,iBAAiB,CAACJ,gBAAgB,CAACjd,KAAK,CAAC;IAC9C,IAAI,IAAI,CAACpJ,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,CAACwB,mBAAmB,KAAK,UAAU,EAAE;MAChF;MACAif,mBAAmB,CAACnd,KAAK,GAAG3D,QAAQ,CAAC,IAAI,CAACzF,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,CAAC+Q,YAAY,CAACzT,QAAQ,CAAC,CAAC,CAAC;IAC7G;EACJ,CAAC;EACDrD,UAAU,CAACkC,SAAS,CAAC+hB,uBAAuB,GAAG,YAAY;IACvD,IAAI,IAAI,CAACiB,iBAAiB,EAAE;MACxB,IAAI,CAACA,iBAAiB,CAACyB,OAAO,CAAC,CAAC;MAChC,IAAI,CAACzB,iBAAiB,GAAG,IAAI;IACjC;IACA,IAAI,IAAI,CAACH,eAAe,EAAE;MACtB,IAAI,CAACA,eAAe,CAAC4B,OAAO,CAAC,CAAC;MAC9B,IAAI,CAAC5B,eAAe,GAAG,IAAI;IAC/B;IACA,IAAI,IAAI,CAACH,gBAAgB,EAAE;MACvB,IAAI,CAACA,gBAAgB,CAAC+B,OAAO,CAAC,CAAC;MAC/B,IAAI,CAAC/B,gBAAgB,GAAG,IAAI;IAChC;IACA,IAAI,IAAI,CAACJ,kBAAkB,EAAE;MACzB,IAAI,CAACA,kBAAkB,CAACmC,OAAO,CAAC,CAAC;MACjC,IAAI,CAACnC,kBAAkB,GAAG,IAAI;IAClC;IACA,IAAI,IAAI,CAACc,aAAa,EAAE;MACpB,IAAI,CAACA,aAAa,CAACqB,OAAO,CAAC,CAAC;MAC5B,IAAI,CAACrB,aAAa,GAAG,IAAI;IAC7B;IACA,IAAI,IAAI,CAACT,YAAY,EAAE;MACnB,IAAI,CAACA,YAAY,CAAC8B,OAAO,CAAC,CAAC;MAC3B,IAAI,CAAC9B,YAAY,GAAG,IAAI;IAC5B;IACA,IAAI,IAAI,CAACY,iBAAiB,EAAE;MACxB,IAAI,CAACA,iBAAiB,CAACkB,OAAO,CAAC,CAAC;MAChC,IAAI,CAAClB,iBAAiB,GAAG,IAAI;IACjC;IACA,IAAI,IAAI,CAACI,eAAe,EAAE;MACtB,IAAI,CAACA,eAAe,CAACc,OAAO,CAAC,CAAC;MAC9B,IAAI,CAACd,eAAe,GAAG,IAAI;IAC/B;IACA,IAAI,IAAI,CAACrC,gBAAgB,EAAE;MACvB,IAAI,CAACA,gBAAgB,CAACmD,OAAO,CAAC,CAAC;MAC/B,IAAI,CAACnD,gBAAgB,GAAG,IAAI;IAChC;IACA,IAAIoD,aAAa,GAAG,IAAI,CAACtlB,aAAa,CAAC4P,UAAU,CAAC,oBAAoB,CAAC;IACvE,IAAI0V,aAAa,EAAE;MACfA,aAAa,CAAC1a,aAAa,CAACuL,WAAW,CAACmP,aAAa,CAAC;IAC1D;EACJ,CAAC;EACD5mB,UAAU,CAACkC,SAAS,CAAC+iB,kBAAkB,GAAG,UAAU4B,SAAS,EAAE;IAC3DA,SAAS,CAACC,aAAa,CAAC;MAAE,OAAO,EAAED,SAAS,CAACxd;IAAM,CAAC,EAAE,IAAI,CAAC;IAC3Dwd,SAAS,CAACE,OAAO,CAAC,CAAC;EACvB,CAAC;EACD/mB,UAAU,CAACkC,SAAS,CAACqhB,mBAAmB,GAAG,YAAY;IACnD,IAAIzF,KAAK,GAAG,IAAI;IAChB,IAAIsF,SAAS,GAAG,IAAI,CAACnjB,SAAS,CAAC+D,OAAO,CAACC,EAAE;IACzC;IACA,IAAI+iB,KAAK,GAAG,CAAC;MAAEC,IAAI,EAAE,IAAI,CAAChnB,SAAS,CAAC4jB,SAAS,CAACC,WAAW,CAAC,MAAM;IAAE,CAAC,EAAE;MAAEmD,IAAI,EAAE,IAAI,CAAChnB,SAAS,CAAC4jB,SAAS,CAACC,WAAW,CAAC,YAAY;IAAE,CAAC,EAAE;MAAEmD,IAAI,EAAE,IAAI,CAAChnB,SAAS,CAAC4jB,SAAS,CAACC,WAAW,CAAC,cAAc;IAAE,CAAC,EAC7L;MAAEmD,IAAI,EAAE,IAAI,CAAChnB,SAAS,CAAC4jB,SAAS,CAACC,WAAW,CAAC,aAAa;IAAE,CAAC,EAAE;MAAEmD,IAAI,EAAE,IAAI,CAAChnB,SAAS,CAAC4jB,SAAS,CAACC,WAAW,CAAC,cAAc;IAAE,CAAC,EAAE;MAAEmD,IAAI,EAAE,IAAI,CAAChnB,SAAS,CAAC4jB,SAAS,CAACC,WAAW,CAAC,eAAe;IAAE,CAAC,CAAC;IACnM;IACA,IAAIoD,aAAa,GAAG3oB,aAAa,CAAC,KAAK,EAAE;MAAE0F,EAAE,EAAEmf,SAAS,GAAG;IAAyB,CAAC,CAAC;IACtF,IAAI+D,kBAAkB,GAAG5oB,aAAa,CAAC,KAAK,EAAE;MAAEwN,SAAS,EAAE;IAAkC,CAAC,CAAC;IAC/Fmb,aAAa,CAACvK,WAAW,CAACwK,kBAAkB,CAAC;IAC7C;IACA,IAAIC,oBAAoB,GAAG,IAAI,CAACC,kBAAkB,CAAC,IAAI,CAACpnB,SAAS,CAAC4jB,SAAS,CAACC,WAAW,CAAC,aAAa,CAAC,EAAEqD,kBAAkB,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,4BAA4B,EAAE/D,SAAS,GAAG,wBAAwB,CAAC;IACvN;IACA,IAAI,CAACoB,kBAAkB,GAAG,IAAIzlB,cAAc,CAAC;MAAEioB,KAAK,EAAEA,KAAK;MAAEM,QAAQ,EAAE,4BAA4B;MAAEvV,MAAM,EAAE,IAAI,CAACwV,2BAA2B,CAACjjB,IAAI,CAAC,IAAI;IAAE,CAAC,EAAE8iB,oBAAoB,CAAC;IACjL,IAAII,kBAAkB,GAAG,IAAI,CAACH,kBAAkB,CAAC,IAAI,CAACpnB,SAAS,CAAC4jB,SAAS,CAACC,WAAW,CAAC,WAAW,CAAC,EAAEqD,kBAAkB,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,0BAA0B,EAAE/D,SAAS,GAAG,sBAAsB,CAAC;IAC/M;IACA,IAAIqE,oBAAoB,GAAGlpB,aAAa,CAAC,KAAK,EAAE;MAAEwN,SAAS,EAAE;IAA+B,CAAC,CAAC;IAC9Fmb,aAAa,CAACvK,WAAW,CAAC8K,oBAAoB,CAAC;IAC/C;IACA,IAAI,CAAC7C,gBAAgB,GAAG,IAAI7lB,cAAc,CAAC;MAAEioB,KAAK,EAAEA,KAAK;MAAEM,QAAQ,EAAE,0BAA0B;MAAEvV,MAAM,EAAE,IAAI,CAAC2V,yBAAyB,CAACpjB,IAAI,CAAC,IAAI;IAAE,CAAC,EAAEkjB,kBAAkB,CAAC;IACzK,IAAIxB,gBAAgB,GAAG,IAAI,CAACqB,kBAAkB,CAAC,IAAI,CAACpnB,SAAS,CAAC4jB,SAAS,CAACC,WAAW,CAAC,YAAY,CAAC,EAAE2D,oBAAoB,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,4BAA4B,EAAErE,SAAS,GAAG,wBAAwB,CAAC;IACpN,IAAIuE,cAAc,GAAG,IAAI,CAACC,eAAe,CAAC,CAAC;IAC3C;IACA,IAAI,CAACnC,iBAAiB,GAAG,IAAI1mB,cAAc,CAAC;MAAEuoB,QAAQ,EAAE,4BAA4B;MAAExI,MAAM,EAAE6I;IAAe,CAAC,EAAE3B,gBAAgB,CAAC;IACjI;IACA,IAAII,gBAAgB,GAAG,IAAI,CAACiB,kBAAkB,CAAC,IAAI,CAACpnB,SAAS,CAAC4jB,SAAS,CAACC,WAAW,CAAC,gBAAgB,CAAC,EAAE2D,oBAAoB,EAAE,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,gCAAgC,EAAErE,SAAS,GAAG,uBAAuB,CAAC;IAC1N,IAAI,CAACyB,YAAY,GAAG,IAAIlmB,cAAc,CAAC;MAAE0K,KAAK,EAAE,CAAC;MAAEwe,MAAM,EAAE,OAAO;MAAEP,QAAQ,EAAE,gCAAgC;MAAEQ,GAAG,EAAE,CAAC;MAAEC,GAAG,EAAE;IAAG,CAAC,EAAE3B,gBAAgB,CAAC;IACpJ,IAAI4B,mBAAmB,GAAGzpB,aAAa,CAAC,KAAK,EAAE;MAAEwN,SAAS,EAAE;IAA8B,CAAC,CAAC;IAC5Fmb,aAAa,CAACvK,WAAW,CAACqL,mBAAmB,CAAC;IAC9C;IACA,IAAI1B,gBAAgB,GAAG,IAAI,CAACe,kBAAkB,CAAC,IAAI,CAACpnB,SAAS,CAAC4jB,SAAS,CAACC,WAAW,CAAC,YAAY,CAAC,EAAEkE,mBAAmB,EAAE,OAAO,EAAE,QAAQ,EAAE,IAAI,EAAE,iCAAiC,EAAE5E,SAAS,GAAG,wBAAwB,CAAC;IACzN,IAAI,CAAC2B,eAAe,GAAG,IAAI,CAACkD,iBAAiB,CAAC7E,SAAS,GAAG,wBAAwB,EAAE,IAAI,CAAC;IACzF,IAAI,CAAC2B,eAAe,CAACmD,MAAM,GAAG,UAAUlI,IAAI,EAAE;MAC1C,IAAIS,YAAY,GAAIT,IAAI,CAACW,YAAY,CAACwH,GAAG,KAAK,EAAE,GAAI,WAAW,GAAGnI,IAAI,CAACW,YAAY,CAACwH,GAAG;MACvFrK,KAAK,CAACsH,YAAY,CAACgD,MAAM,CAAC,CAAC;MAC3BtK,KAAK,CAACqH,iBAAiB,CAACrH,KAAK,CAACsH,YAAY,CAACphB,OAAO,EAAEyc,YAAY,CAAC;IACrE,CAAC;IACD;IACA,IAAI,CAAC2E,YAAY,GAAG,IAAI,CAACiD,oBAAoB,CAAC/B,gBAAgB,EAAE,iCAAiC,EAAE,IAAI,CAACvB,eAAe,CAAC/gB,OAAO,CAACkI,aAAa,CAAC;IAC9I,IAAI,CAACkZ,YAAY,CAACkD,UAAU,GAAG,IAAI,CAACC,wBAAwB,CAACjkB,IAAI,CAAC,IAAI,CAAC;IACvE,IAAI,CAAC8gB,YAAY,CAACoD,IAAI,GAAG,YAAY;MACjC1K,KAAK,CAACiH,eAAe,CAACgC,OAAO,CAAC,CAAC;IACnC,CAAC;IACD;IACA,IAAIR,kBAAkB,GAAG,IAAI,CAACc,kBAAkB,CAAC,IAAI,CAACpnB,SAAS,CAAC4jB,SAAS,CAACC,WAAW,CAAC,YAAY,CAAC,EAAEkE,mBAAmB,EAAE,OAAO,EAAE,QAAQ,EAAE,IAAI,EAAE,mCAAmC,EAAE5E,SAAS,GAAG,0BAA0B,CAAC;IAC/N,IAAI,CAAC8B,iBAAiB,GAAG,IAAI,CAAC+C,iBAAiB,CAAC7E,SAAS,GAAG,0BAA0B,EAAE,KAAK,CAAC;IAC9F,IAAI,CAAC8B,iBAAiB,CAACgD,MAAM,GAAG,UAAUlI,IAAI,EAAE;MAC5C,IAAIS,YAAY,GAAIT,IAAI,CAACW,YAAY,CAACwH,GAAG,KAAK,EAAE,GAAI,WAAW,GAAGnI,IAAI,CAACW,YAAY,CAACwH,GAAG;MACvFrK,KAAK,CAACuH,cAAc,CAAC+C,MAAM,CAAC,CAAC;MAC7BtK,KAAK,CAACqH,iBAAiB,CAACrH,KAAK,CAACuH,cAAc,CAACrhB,OAAO,EAAEyc,YAAY,CAAC;IACvE,CAAC;IACD;IACA,IAAI,CAAC4E,cAAc,GAAG,IAAI,CAACgD,oBAAoB,CAAC9B,kBAAkB,EAAE,mCAAmC,EAAE,IAAI,CAACrB,iBAAiB,CAAClhB,OAAO,CAACkI,aAAa,CAAC;IACtJ,IAAI,CAACmZ,cAAc,CAACiD,UAAU,GAAG,IAAI,CAACG,0BAA0B,CAACnkB,IAAI,CAAC,IAAI,CAAC;IAC3E,IAAI,CAAC+gB,cAAc,CAACmD,IAAI,GAAG,YAAY;MACnC1K,KAAK,CAACoH,iBAAiB,CAAC6B,OAAO,CAAC,CAAC;IACrC,CAAC;IACD,IAAI2B,gBAAgB,GAAGnqB,aAAa,CAAC,KAAK,EAAE;MAAEwN,SAAS,EAAE;IAAgC,CAAC,CAAC;IAC3Fmb,aAAa,CAACvK,WAAW,CAAC+L,gBAAgB,CAAC;IAC3C;IACA,IAAIC,cAAc,GAAG,IAAI,CAACtB,kBAAkB,CAAC,IAAI,CAACpnB,SAAS,CAAC4jB,SAAS,CAACC,WAAW,CAAC,SAAS,CAAC,EAAE4E,gBAAgB,EAAE,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,8BAA8B,EAAEtF,SAAS,GAAG,qBAAqB,CAAC;IACnM,IAAI,CAACkC,aAAa,GAAG,IAAI1mB,MAAM,CAAC;MAC5BwD,IAAI,EAAE,UAAU;MAAE2lB,GAAG,EAAE,GAAG;MAAED,GAAG,EAAE,CAAC;MAAER,QAAQ,EAAE,8BAA8B;MAAEY,MAAM,EAAE,SAAAA,CAAA,EAAY;QAC9FpK,KAAK,CAACyH,sBAAsB,CAAC,CAAC;MAClC;IACJ,CAAC,EAAEoD,cAAc,CAAC;IAClB,IAAI,IAAI,CAAC1oB,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,CAACwB,mBAAmB,KAAK,UAAU,EAAE;MAChF;MACA,IAAIqhB,iBAAiB,GAAG,IAAI,CAACvB,kBAAkB,CAAC,IAAI,CAACpnB,SAAS,CAAC4jB,SAAS,CAACC,WAAW,CAAC,eAAe,CAAC,EAAE4E,gBAAgB,EAAE,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,oCAAoC,EAAEtF,SAAS,GAAG,2BAA2B,CAAC;MAC9N,IAAI,CAACyC,eAAe,GAAG,IAAIlnB,cAAc,CAAC;QAAE0K,KAAK,EAAE,CAAC;QAAEwe,MAAM,EAAE,OAAO;QAAEP,QAAQ,EAAE,oCAAoC;QAAEQ,GAAG,EAAE,CAAC;QAAEC,GAAG,EAAE;MAAI,CAAC,EAAEa,iBAAiB,CAAC;IACjK;IACA,OAAO1B,aAAa;EACxB,CAAC;EACDlnB,UAAU,CAACkC,SAAS,CAACuiB,aAAa,GAAG,UAAUwC,IAAI,EAAE;IACjD,IAAI4B,UAAU,GAAGtqB,aAAa,CAAC,KAAK,EAAE;MAAEwN,SAAS,EAAE;IAAqC,CAAC,CAAC;IAC1F8c,UAAU,CAACvL,WAAW,GAAG2J,IAAI;IAC7B,OAAO4B,UAAU;EACrB,CAAC;EACD7oB,UAAU,CAACkC,SAAS,CAACumB,0BAA0B,GAAG,YAAY;IAC1D,IAAI,IAAI,CAACxoB,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAACW,MAAM,KAAK,CAAC,EAAE;MACvD,IAAI,CAACwe,iBAAiB,CAAC7b,KAAK,GAAG,IAAI,CAACpJ,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,CAACyE,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACuB,KAAK,CAAC6M,WAAW;IACpH;IACA,IAAI,CAACqM,iBAAiB,CAAC6B,OAAO,CAAC,CAAC;EACpC,CAAC;EACD/mB,UAAU,CAACkC,SAAS,CAACqmB,wBAAwB,GAAG,YAAY;IACxD,IAAI,IAAI,CAACtoB,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAACW,MAAM,KAAK,CAAC,EAAE;MACvD,IAAI,CAACqe,eAAe,CAAC1b,KAAK,GAAG,IAAI,CAACpJ,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,CAACyE,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACuB,KAAK,CAAC6M,WAAW;IAClH;IACA,IAAI,CAACkM,eAAe,CAACgC,OAAO,CAAC,CAAC;EAClC,CAAC;EACD/mB,UAAU,CAACkC,SAAS,CAAC0lB,eAAe,GAAG,YAAY;IAC/C,IAAI9J,KAAK,GAAG,IAAI;IAChB,IAAIgL,SAAS,GAAGvqB,aAAa,CAAC,IAAI,CAAC;IACnCuF,QAAQ,CAACilB,IAAI,CAACpM,WAAW,CAACmM,SAAS,CAAC;IACpC,IAAIE,OAAO,GAAG,IAAI,CAACC,kBAAkB,CAAC,OAAO,CAAC;IAC9CD,OAAO,CAAC7kB,gBAAgB,CAAC,OAAO,EAAE,YAAY;MAC1C2Z,KAAK,CAACoL,YAAY,CAAC,GAAG,EAAE,OAAO,CAAC;IACpC,CAAC,CAAC;IACFJ,SAAS,CAACnM,WAAW,CAACqM,OAAO,CAAC;IAC9B,IAAIG,QAAQ,GAAG,IAAI,CAACF,kBAAkB,CAAC,QAAQ,CAAC;IAChDE,QAAQ,CAAChlB,gBAAgB,CAAC,OAAO,EAAE,YAAY;MAC3C2Z,KAAK,CAACoL,YAAY,CAAC,GAAG,EAAE,QAAQ,CAAC;IACrC,CAAC,CAAC;IACFJ,SAAS,CAACnM,WAAW,CAACwM,QAAQ,CAAC;IAC/B,IAAIC,QAAQ,GAAG,IAAI,CAACH,kBAAkB,CAAC,QAAQ,CAAC;IAChDG,QAAQ,CAACjlB,gBAAgB,CAAC,OAAO,EAAE,YAAY;MAC3C2Z,KAAK,CAACoL,YAAY,CAAC,GAAG,EAAE,QAAQ,CAAC;IACrC,CAAC,CAAC;IACFJ,SAAS,CAACnM,WAAW,CAACyM,QAAQ,CAAC;IAC/B,OAAON,SAAS;EACpB,CAAC;EACD9oB,UAAU,CAACkC,SAAS,CAAC+lB,iBAAiB,GAAG,UAAUoB,QAAQ,EAAEC,SAAS,EAAE;IACpE,IAAInO,YAAY,GAAG5c,aAAa,CAAC,OAAO,EAAE;MAAE0F,EAAE,EAAEolB,QAAQ,GAAG;IAAU,CAAC,CAAC;IACvEvlB,QAAQ,CAACilB,IAAI,CAACpM,WAAW,CAACxB,YAAY,CAAC;IACvC,IAAIoO,WAAW,GAAG,IAAI1qB,WAAW,CAAC;MAC9B2qB,MAAM,EAAE,IAAI;MAAEC,IAAI,EAAE,SAAS;MAAEC,aAAa,EAAE,KAAK;MAAErgB,KAAK,EAAE,SAAS;MAAEsgB,WAAW,EAAE,KAAK;MAAEC,YAAY,EAAE,KAAK;MAC9GC,OAAO,EAAEP;IACb,CAAC,CAAC;IACF,IAAI,IAAI,CAACrpB,SAAS,CAAC+U,SAAS,EAAE;MAC1BuU,WAAW,CAACvU,SAAS,GAAG,IAAI;IAChC;IACAuU,WAAW,CAAChF,QAAQ,CAACpJ,YAAY,CAAC;IAClC,OAAOoO,WAAW;EACtB,CAAC;EACDvpB,UAAU,CAACkC,SAAS,CAACmmB,oBAAoB,GAAG,UAAUrkB,OAAO,EAAE8lB,SAAS,EAAEhL,MAAM,EAAE;IAC9E;IACA,IAAIiL,cAAc,GAAG,IAAIhrB,cAAc,CAAC;MAAEirB,OAAO,EAAEF,SAAS,GAAG,YAAY;MAAEhL,MAAM,EAAEA;IAAO,CAAC,CAAC;IAC9F,IAAI,IAAI,CAAC7e,SAAS,CAAC+U,SAAS,EAAE;MAC1B+U,cAAc,CAAC/U,SAAS,GAAG,IAAI;IACnC;IACA+U,cAAc,CAACxF,QAAQ,CAACvgB,OAAO,CAAC;IAChC,OAAO+lB,cAAc;EACzB,CAAC;EACD/pB,UAAU,CAACkC,SAAS,CAACijB,iBAAiB,GAAG,UAAUnhB,OAAO,EAAEgZ,KAAK,EAAE;IAC/DhZ,OAAO,CAAC+a,UAAU,CAAC,CAAC,CAAC,CAAC/S,KAAK,CAACie,iBAAiB,GAAGjN,KAAK;EACzD,CAAC;EACD;AACJ;AACA;AACA;EACIhd,UAAU,CAACkC,SAAS,CAACwkB,iBAAiB,GAAG,UAAU1J,KAAK,EAAE;IACtD;IACA,IAAIkN,YAAY,GAAGpmB,QAAQ,CAACuiB,aAAa,CAAC,GAAG,GAAG,IAAI,CAACpmB,SAAS,CAAC+D,OAAO,CAACC,EAAE,GAAG,+BAA+B,CAAC;IAC5G,IAAI+Y,KAAK,KAAK,aAAa,EAAE;MACzBkN,YAAY,CAACzf,QAAQ,CAAC,CAAC,CAAC,CAACuB,KAAK,CAACie,iBAAiB,GAAGjN,KAAK;IAC5D;EACJ,CAAC;EACD;AACJ;AACA;AACA;EACIhd,UAAU,CAACkC,SAAS,CAACukB,mBAAmB,GAAG,UAAUzJ,KAAK,EAAE;IACxD;IACA,IAAIkN,YAAY,GAAGpmB,QAAQ,CAACuiB,aAAa,CAAC,GAAG,GAAG,IAAI,CAACpmB,SAAS,CAAC+D,OAAO,CAACC,EAAE,GAAG,iCAAiC,CAAC;IAC9G,IAAI+Y,KAAK,KAAK,aAAa,EAAE;MACzBkN,YAAY,CAACzf,QAAQ,CAAC,CAAC,CAAC,CAACuB,KAAK,CAACie,iBAAiB,GAAGjN,KAAK;IAC5D;EACJ,CAAC;EACDhd,UAAU,CAACkC,SAAS,CAACgnB,YAAY,GAAG,UAAU7f,KAAK,EAAE2C,KAAK,EAAEtN,QAAQ,EAAE;IAClE,IAAI,CAACA,QAAQ,EAAE;MACX,IAAI,CAAC+mB,iBAAiB,CAAC1B,OAAO,GAAG,IAAI,CAAC2B,qBAAqB,CAAC1Z,KAAK,CAAC,CAAC2Y,SAAS;IAChF;IACA,IAAI,CAACiB,qBAAqB,GAAGvc,KAAK;IAClC,IAAIA,KAAK,KAAK,GAAG,EAAE;MACf,IAAI,CAACsc,iBAAiB,GAAG,OAAO;IACpC,CAAC,MACI,IAAItc,KAAK,KAAK,GAAG,IAAIA,KAAK,KAAK,GAAG,EAAE;MACrC,IAAI,CAACsc,iBAAiB,GAAG,QAAQ;IACrC;EACJ,CAAC;EACD3lB,UAAU,CAACkC,SAAS,CAACwjB,qBAAqB,GAAG,UAAU1Z,KAAK,EAAE;IAC1D,IAAI6c,UAAU,GAAGtqB,aAAa,CAAC,KAAK,EAAE;MAAEwN,SAAS,EAAE;IAAqC,CAAC,CAAC;IAC1F;IACA,IAAIuO,WAAW,GAAG/b,aAAa,CAAC,MAAM,EAAE;MAAEwN,SAAS,EAAE,0BAA0B;MAAE0Q,MAAM,EAAE,sBAAsB,GAAGzQ;IAAM,CAAC,CAAC;IAC1H6c,UAAU,CAAClM,WAAW,CAACrC,WAAW,CAAC;IACnC,OAAOuO,UAAU;EACrB,CAAC;EACD7oB,UAAU,CAACkC,SAAS,CAAC+mB,kBAAkB,GAAG,UAAUjd,KAAK,EAAE;IACvD,IAAIme,SAAS,GAAG5rB,aAAa,CAAC,IAAI,EAAE;MAAEwN,SAAS,EAAE;IAAc,CAAC,CAAC;IACjE,IAAI8c,UAAU,GAAGtqB,aAAa,CAAC,KAAK,EAAE;MAAEwN,SAAS,EAAE;IAA6B,CAAC,CAAC;IAClF;IACA,IAAIuO,WAAW,GAAG/b,aAAa,CAAC,MAAM,EAAE;MAAEwN,SAAS,EAAE,uBAAuB;MAAE0Q,MAAM,EAAE,sBAAsB,GAAGzQ;IAAM,CAAC,CAAC;IACvH6c,UAAU,CAAClM,WAAW,CAACrC,WAAW,CAAC;IACnC6P,SAAS,CAACxN,WAAW,CAACkM,UAAU,CAAC;IACjC,OAAOsB,SAAS;EACpB,CAAC;EACDnqB,UAAU,CAACkC,SAAS,CAACqlB,2BAA2B,GAAG,UAAUvH,IAAI,EAAE;IAC/D,IAAI,CAACwE,kBAAkB,CAACT,OAAO,GAAG,IAAI,CAACU,aAAa,CAACzE,IAAI,CAACoK,IAAI,CAACnD,IAAI,CAAC,CAACtC,SAAS;EAClF,CAAC;EACD3kB,UAAU,CAACkC,SAAS,CAACwlB,yBAAyB,GAAG,UAAU1H,IAAI,EAAE;IAC7D,IAAI,CAAC4E,gBAAgB,CAACb,OAAO,GAAG,IAAI,CAACU,aAAa,CAACzE,IAAI,CAACoK,IAAI,CAACnD,IAAI,CAAC,CAACtC,SAAS;EAChF,CAAC;EACD;EACA3kB,UAAU,CAACkC,SAAS,CAACmlB,kBAAkB,GAAG,UAAUgD,SAAS,EAAEne,aAAa,EAAEoe,SAAS,EAAEC,KAAK,EAAEC,aAAa,EAAEze,SAAS,EAAEsd,QAAQ,EAAE;IAChI,IAAIoB,SAAS,GAAGlsB,aAAa,CAAC,KAAK,EAAE;MAAE0F,EAAE,EAAEolB,QAAQ,GAAG,YAAY;MAAEtd,SAAS,EAAEA,SAAS,GAAG;IAAa,CAAC,CAAC;IAC1G,IAAIye,aAAa,EAAE;MACf,IAAIE,KAAK,GAAGnsB,aAAa,CAAC,KAAK,EAAE;QAAE0F,EAAE,EAAEolB,QAAQ,GAAG,QAAQ;QAAEtd,SAAS,EAAEA,SAAS,GAAG;MAAS,CAAC,CAAC;MAC9F2e,KAAK,CAACpN,WAAW,GAAG+M,SAAS;MAC7BI,SAAS,CAAC9N,WAAW,CAAC+N,KAAK,CAAC;IAChC;IACA,IAAI,IAAI,CAACzqB,SAAS,CAAC4jB,SAAS,CAACC,WAAW,CAAC,SAAS,CAAC,KAAKuG,SAAS,EAAE;MAC/D,IAAI,CAACM,gBAAgB,GAAGpsB,aAAa,CAAC,MAAM,EAAE;QAAEwN,SAAS,EAAE;MAAoC,CAAC,CAAC;MACjG0e,SAAS,CAAC9N,WAAW,CAAC,IAAI,CAACgO,gBAAgB,CAAC;IAChD;IACA,IAAIC,YAAY,GAAGrsB,aAAa,CAACgsB,KAAK,EAAE;MAAEtmB,EAAE,EAAEolB;IAAS,CAAC,CAAC;IACzD,IAAIkB,KAAK,KAAK,OAAO,EAAE;MACnBK,YAAY,CAACxoB,IAAI,GAAGkoB,SAAS;IACjC;IACAG,SAAS,CAAC9N,WAAW,CAACiO,YAAY,CAAC;IACnC1e,aAAa,CAACyQ,WAAW,CAAC8N,SAAS,CAAC;IACpC,OAAOG,YAAY;EACvB,CAAC;EACD5qB,UAAU,CAACkC,SAAS,CAACqjB,sBAAsB,GAAG,YAAY;IACtD,IAAI,CAACoF,gBAAgB,CAACrN,WAAW,GAAG,IAAI,CAACgI,aAAa,CAACjc,KAAK,GAAG,GAAG;EACtE,CAAC;EACD;AACJ;AACA;EACIrJ,UAAU,CAACkC,SAAS,CAACmiB,WAAW,GAAG,UAAUjE,YAAY,EAAE;IACvD,IAAIyK,UAAU;IACd,IAAIC,QAAQ;IACZ,IAAI9R,SAAS;IACb,IAAIH,WAAW;IACf,IAAIC,SAAS;IACb,IAAIL,OAAO;IACX,IAAI,CAAC/Z,QAAQ,CAAC,CAAC,EAAE;MACbmsB,UAAU,GAAG,IAAI,CAACE,wBAAwB,CAAC,IAAI,CAACvG,kBAAkB,CAACT,OAAO,CAAC;MAC3E+G,QAAQ,GAAG,IAAI,CAACC,wBAAwB,CAAC,IAAI,CAACnG,gBAAgB,CAACb,OAAO,CAAC;MACvE/K,SAAS,GAAG,IAAI,CAAC6L,YAAY,CAACxb,KAAK;MACnCwP,WAAW,GAAG,IAAI,CAACqM,iBAAiB,CAAC8F,QAAQ,CAAC,IAAI,CAAC9F,iBAAiB,CAAC7b,KAAK,EAAE,KAAK,CAAC;MAClFwP,WAAW,GAAIA,WAAW,KAAK,EAAE,GAAI,WAAW,GAAGA,WAAW;MAC9DC,SAAS,GAAG,IAAI,CAACiM,eAAe,CAACiG,QAAQ,CAAC,IAAI,CAACjG,eAAe,CAAC1b,KAAK,EAAE,KAAK,CAAC;MAC5E;MACAyP,SAAS,GAAIA,SAAS,KAAK,EAAE,IAAIA,SAAS,KAAK,SAAS,IAAI,IAAI,CAACiM,eAAe,CAAC1b,KAAK,KAAK,WAAW,GAAI,WAAW,GAAGyP,SAAS;MACjIL,OAAO,GAAG,IAAI,CAAC6M,aAAa,CAACjc,KAAK,GAAG,GAAG;IAC5C,CAAC,MACI;MACD;MACA,IAAIyc,gBAAgB,GAAGhiB,QAAQ,CAACuiB,aAAa,CAAC,GAAG,GAAG,IAAI,CAACpmB,SAAS,CAAC+D,OAAO,CAACC,EAAE,GAAG,wBAAwB,CAAC;MACzG;MACA,IAAI8hB,cAAc,GAAGjiB,QAAQ,CAACuiB,aAAa,CAAC,GAAG,GAAG,IAAI,CAACpmB,SAAS,CAAC+D,OAAO,CAACC,EAAE,GAAG,sBAAsB,CAAC;MACrG;MACA,IAAImiB,gBAAgB,GAAGtiB,QAAQ,CAACuiB,aAAa,CAAC,GAAG,GAAG,IAAI,CAACpmB,SAAS,CAAC+D,OAAO,CAACC,EAAE,GAAG,iBAAiB,CAAC;MAClG;MACA,IAAI+hB,gBAAgB,GAAGliB,QAAQ,CAACuiB,aAAa,CAAC,GAAG,GAAG,IAAI,CAACpmB,SAAS,CAAC+D,OAAO,CAACC,EAAE,GAAG,mBAAmB,CAAC;MACpG;MACA,IAAIqiB,gBAAgB,GAAGxiB,QAAQ,CAACuiB,aAAa,CAAC,GAAG,GAAG,IAAI,CAACpmB,SAAS,CAAC+D,OAAO,CAACC,EAAE,GAAG,+BAA+B,CAAC;MAChH;MACA,IAAIsiB,kBAAkB,GAAGziB,QAAQ,CAACuiB,aAAa,CAAC,GAAG,GAAG,IAAI,CAACpmB,SAAS,CAAC+D,OAAO,CAACC,EAAE,GAAG,iCAAiC,CAAC;MACpH;MACA,IAAI0kB,cAAc,GAAG7kB,QAAQ,CAACuiB,aAAa,CAAC,GAAG,GAAG,IAAI,CAACpmB,SAAS,CAAC+D,OAAO,CAACC,EAAE,GAAG,qBAAqB,CAAC;MACpG4mB,UAAU,GAAG,IAAI,CAACE,wBAAwB,CAACjF,gBAAgB,CAACzc,KAAK,EAAE,IAAI,CAAC;MACxEyhB,QAAQ,GAAG,IAAI,CAACC,wBAAwB,CAAChF,cAAc,CAAC1c,KAAK,EAAE,IAAI,CAAC;MACpE;MACA2P,SAAS,GAAGtT,QAAQ,CAAC0gB,gBAAgB,CAAC/c,KAAK,CAAC;MAC5CwP,WAAW,GAAG,IAAI,CAACmS,QAAQ,CAACzE,kBAAkB,CAAC9b,QAAQ,CAAC,CAAC,CAAC,CAACuB,KAAK,CAACie,iBAAiB,EAAE,KAAK,CAAC;MAC1FpR,WAAW,GAAIA,WAAW,KAAK,EAAE,GAAI,WAAW,GAAGA,WAAW;MAC9DC,SAAS,GAAG,IAAI,CAACkS,QAAQ,CAAC1E,gBAAgB,CAAC7b,QAAQ,CAAC,CAAC,CAAC,CAACuB,KAAK,CAACie,iBAAiB,EAAE,KAAK,CAAC;MACtFnR,SAAS,GAAIA,SAAS,KAAK,EAAE,GAAI,WAAW,GAAGA,SAAS;MACxD,IAAIsH,YAAY,EAAE;QACd3H,OAAO,GAAI2H,YAAY,GAAI,GAAG;MAClC,CAAC,MACI;QACD3H,OAAO,GAAGkQ,cAAc,CAACtf,KAAK,GAAG,GAAG;MACxC;MACA,IAAI2c,gBAAgB,CAAC3c,KAAK,EAAE;QACxB,IAAI2c,gBAAgB,CAAC3c,KAAK,KAAK,OAAO,EAAE;UACpC,IAAI,CAAC6f,YAAY,CAAC,GAAG,EAAE,OAAO,EAAE,IAAI,CAAC;QACzC,CAAC,MACI,IAAIlD,gBAAgB,CAAC3c,KAAK,KAAK,QAAQ,EAAE;UAC1C,IAAI,CAAC6f,YAAY,CAAC,GAAG,EAAE,QAAQ,EAAE,IAAI,CAAC;QAC1C,CAAC,MACI,IAAIlD,gBAAgB,CAAC3c,KAAK,KAAK,QAAQ,EAAE;UAC1C,IAAI,CAAC6f,YAAY,CAAC,GAAG,EAAE,QAAQ,EAAE,IAAI,CAAC;QAC1C;MACJ;IACJ;IACA,IAAIzZ,iBAAiB,GAAG,IAAI,CAACxP,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC;IACnE,IAAIma,YAAY,GAAG/gB,WAAW,CAACsQ,iBAAiB,CAAC;IACjD,IAAI0Q,gBAAgB,GAAGhhB,WAAW,CAACsQ,iBAAiB,CAAC;IACrD,IAAIwb,OAAO,GAAG,CAAC,CAAC;IAChB,IAAIC,cAAc,GAAG,KAAK;IAC1B,IAAIC,oBAAoB,GAAG,KAAK;IAChC,IAAIC,kBAAkB,GAAG,KAAK;IAC9B,IAAIC,gBAAgB,GAAG,KAAK;IAC5B,IAAIC,2BAA2B,GAAG,KAAK;IACvC,IAAIC,yBAAyB,GAAG,KAAK;IACrC,IAAIC,wBAAwB,GAAG,KAAK;IACpC,IAAIX,UAAU,KAAKpb,iBAAiB,CAAC0J,qBAAqB,EAAE;MACxD8R,OAAO,CAAC9R,qBAAqB,GAAG0R,UAAU;MAC1C1K,gBAAgB,CAAC9G,aAAa,GAAG,IAAI,CAACqL,cAAc,CAACmG,UAAU,CAAC;MAChES,2BAA2B,GAAG,IAAI;IACtC;IACA,IAAIR,QAAQ,KAAKrb,iBAAiB,CAAC6J,sBAAsB,EAAE;MACvD2R,OAAO,CAAC3R,sBAAsB,GAAGwR,QAAQ;MACzC3K,gBAAgB,CAAC5G,WAAW,GAAG,IAAI,CAACmL,cAAc,CAACoG,QAAQ,CAAC;MAC5DS,yBAAyB,GAAG,IAAI;IACpC;IACA,IAAIvS,SAAS,KAAKvJ,iBAAiB,CAACjF,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACuB,KAAK,CAAC8Y,WAAW,EAAE;MACvEmG,OAAO,CAACjS,SAAS,GAAGA,SAAS;MAC7BmH,gBAAgB,CAACnH,SAAS,GAAGA,SAAS;MACtCoS,kBAAkB,GAAG,IAAI;IAC7B;IACA,IAAIvS,WAAW,KAAKpJ,iBAAiB,CAACjF,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACuB,KAAK,CAAC6M,WAAW,EAAE;MACzEoS,OAAO,CAACpS,WAAW,GAAGA,WAAW;MACjCsH,gBAAgB,CAACtH,WAAW,GAAGA,WAAW;MAC1CsS,oBAAoB,GAAG,IAAI;IAC/B;IACA,IAAIrS,SAAS,KAAKrJ,iBAAiB,CAACjF,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACuB,KAAK,CAACgZ,IAAI,EAAE;MAChEiG,OAAO,CAACnS,SAAS,GAAGA,SAAS;MAC7BqH,gBAAgB,CAACrH,SAAS,GAAGA,SAAS;MACtCoS,cAAc,GAAG,IAAI;IACzB;IACA,IAAIzS,OAAO,KAAKhJ,iBAAiB,CAACjF,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACuB,KAAK,CAACyM,OAAO,EAAE;MACjEwS,OAAO,CAACxS,OAAO,GAAGA,OAAO;MACzB0H,gBAAgB,CAAC1H,OAAO,GAAGA,OAAO;MAClC4S,gBAAgB,GAAG,IAAI;IAC3B;IACA,IAAI,IAAI,CAACzF,qBAAqB,KAAKnW,iBAAiB,CAACjF,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACuB,KAAK,CAACwZ,eAAe,EAAE;MAC5FyF,OAAO,CAAChS,eAAe,GAAG,IAAI,CAAC2M,qBAAqB;MACpDqF,OAAO,CAAC/R,WAAW,GAAG,IAAI,CAACyM,iBAAiB;MAC5CxF,gBAAgB,CAAClH,eAAe,GAAGgS,OAAO,CAAChS,eAAe;MAC1DkH,gBAAgB,CAACjH,WAAW,GAAG+R,OAAO,CAAC/R,WAAW;MAClDsS,wBAAwB,GAAG,IAAI;IACnC;IACA,IAAI,CAAC9sB,QAAQ,CAAC,CAAC,EAAE;MACb;MACA,IAAI,IAAI,CAACuB,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,CAACwB,mBAAmB,KAAK,UAAU,IAAI,IAAI,CAACse,eAAe,CAACxc,KAAK,KAAK,IAAI,CAACpJ,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,CAAC+Q,YAAY,EAAE;QAC3KmU,OAAO,CAACnU,YAAY,GAAG,IAAI,CAAC+O,eAAe,CAACxc,KAAK;MACrD;IACJ,CAAC,MACI;MACD;MACA,IAAImd,mBAAmB,GAAG1iB,QAAQ,CAACuiB,aAAa,CAAC,GAAG,GAAG,IAAI,CAACpmB,SAAS,CAAC+D,OAAO,CAACC,EAAE,GAAG,2BAA2B,CAAC;MAC/G;MACA,IAAI,IAAI,CAAChE,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,CAACwB,mBAAmB,KAAK,UAAU,IAAI7B,QAAQ,CAAC8gB,mBAAmB,CAACnd,KAAK,CAAC,KAAK,IAAI,CAACpJ,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,CAAC+Q,YAAY,EAAE;QACpL;QACAmU,OAAO,CAACnU,YAAY,GAAGpR,QAAQ,CAAC8gB,mBAAmB,CAACnd,KAAK,CAAC;MAC9D;IACJ;IACA,IAAI,CAACpJ,SAAS,CAAC2W,kBAAkB,CAAC,IAAI,CAAC3W,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,EAAEklB,OAAO,CAAC;IACvF,IAAI,CAAChrB,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,CAACyE,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACuB,KAAK,CAACgZ,IAAI,GAAGlM,SAAS;IACtF;IACA,IAAI,CAACyH,2BAA2B,CAAC,IAAI,CAACtgB,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,EAAEmlB,cAAc,EAAEC,oBAAoB,EAAEC,kBAAkB,EAAEC,gBAAgB,EAAEC,2BAA2B,EAAEC,yBAAyB,EAAEC,wBAAwB,CAAC;IAC3O,IAAI,CAACpjB,mBAAmB,CAAC,IAAI,CAACnI,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,EAAE,WAAW,CAAC;IAClF,IAAI,CAACqC,mBAAmB,CAAC,IAAI,CAACnI,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,EAAE,QAAQ,CAAC;IAC/E,IAAI,CAACqC,mBAAmB,CAAC,IAAI,CAACnI,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC;IAC7E,IAAI,CAACqC,mBAAmB,CAAC,IAAI,CAACnI,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,EAAE,SAAS,CAAC;IAChF,IAAI,CAACqC,mBAAmB,CAAC,IAAI,CAACnI,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,EAAE,WAAW,CAAC;IAClF,IAAI,CAACqC,mBAAmB,CAAC,IAAI,CAACnI,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,EAAE,YAAY,CAAC;IACnF,IAAI,CAACqC,mBAAmB,CAAC,IAAI,CAACnI,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,EAAE,UAAU,CAAC;IACjF;IACA,IAAI,IAAI,CAAC9F,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,CAACwB,mBAAmB,KAAK,UAAU,EAAE;MAChF,IAAI,CAACa,mBAAmB,CAAC,IAAI,CAACnI,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,EAAE,cAAc,CAAC;IACzF;IACA;IACA,IAAI,CAAC9F,SAAS,CAACsE,UAAU,CAAC+D,SAAS,CAACmH,iBAAiB,CAAC3H,SAAS,EAAE,IAAI,EAAE2H,iBAAiB,EAAE,wBAAwB,EAAE,EAAE,EAAEyQ,YAAY,EAAEC,gBAAgB,CAAC;IACvJ,IAAI,CAACsL,iBAAiB,CAAChc,iBAAiB,CAAC3H,SAAS,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC;IACrE,IAAI,CAACpJ,QAAQ,CAAC,CAAC,EAAE;MACb,IAAI,CAAC8kB,gBAAgB,CAACkI,IAAI,CAAC,CAAC;IAChC;EACJ,CAAC;EACD1rB,UAAU,CAACkC,SAAS,CAACoiB,eAAe,GAAG,YAAY;IAC/C,IAAI,CAACd,gBAAgB,CAACkI,IAAI,CAAC,CAAC;EAChC,CAAC;EACD1rB,UAAU,CAACkC,SAAS,CAAC6oB,wBAAwB,GAAG,UAAUY,SAAS,EAAEjtB,QAAQ,EAAE;IAC3E,IAAI,CAACA,QAAQ,EAAE;MACXitB,SAAS,GAAGA,SAAS,CAAC3hB,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAACA,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;IAC3D;IACA,IAAI4hB,KAAK,GAAG,MAAM;IAClB,QAAQD,SAAS;MACb,KAAK,IAAI,CAAC1rB,SAAS,CAAC4jB,SAAS,CAACC,WAAW,CAAC,MAAM,CAAC;QAC7C8H,KAAK,GAAG,MAAM;QACd;MACJ,KAAK,IAAI,CAAC3rB,SAAS,CAAC4jB,SAAS,CAACC,WAAW,CAAC,YAAY,CAAC;QACnD8H,KAAK,GAAG,WAAW;QACnB;MACJ,KAAK,IAAI,CAAC3rB,SAAS,CAAC4jB,SAAS,CAACC,WAAW,CAAC,cAAc,CAAC;QACrD8H,KAAK,GAAG,OAAO;QACf;MACJ,KAAK,IAAI,CAAC3rB,SAAS,CAAC4jB,SAAS,CAACC,WAAW,CAAC,aAAa,CAAC;QACpD8H,KAAK,GAAG,QAAQ;QAChB;MACJ,KAAK,IAAI,CAAC3rB,SAAS,CAAC4jB,SAAS,CAACC,WAAW,CAAC,cAAc,CAAC;QACrD8H,KAAK,GAAG,QAAQ;QAChB;MACJ,KAAK,IAAI,CAAC3rB,SAAS,CAAC4jB,SAAS,CAACC,WAAW,CAAC,eAAe,CAAC;QACtD8H,KAAK,GAAG,SAAS;QACjB;MACJ,KAAK,IAAI,CAAC3rB,SAAS,CAAC4jB,SAAS,CAACC,WAAW,CAAC,MAAM,CAAC;QAC7C8H,KAAK,GAAG,MAAM;QACd;IACR;IACA,OAAOA,KAAK;EAChB,CAAC;EACD;AACJ;AACA;AACA;EACI5rB,UAAU,CAACkC,SAAS,CAACwiB,cAAc,GAAG,UAAUkH,KAAK,EAAE;IACnD,IAAID,SAAS,GAAG,IAAI,CAAC1rB,SAAS,CAAC4jB,SAAS,CAACC,WAAW,CAAC,MAAM,CAAC;IAC5D,QAAQ8H,KAAK;MACT,KAAK,OAAO;QACRD,SAAS,GAAG,IAAI,CAAC1rB,SAAS,CAAC4jB,SAAS,CAACC,WAAW,CAAC,QAAQ,CAAC;QAC1D;MACJ,KAAK,WAAW;QACZ6H,SAAS,GAAG,IAAI,CAAC1rB,SAAS,CAAC4jB,SAAS,CAACC,WAAW,CAAC,YAAY,CAAC;QAC9D;MACJ,KAAK,QAAQ;QACT6H,SAAS,GAAG,IAAI,CAAC1rB,SAAS,CAAC4jB,SAAS,CAACC,WAAW,CAAC,OAAO,CAAC;QACzD;MACJ,KAAK,MAAM;MACX,KAAK,QAAQ;MACb,KAAK,SAAS;QACV6H,SAAS,GAAG,IAAI,CAAC1rB,SAAS,CAAC4jB,SAAS,CAACC,WAAW,CAAC8H,KAAK,CAAC;QACvD;MACJ,KAAK,MAAM;QACPD,SAAS,GAAG,IAAI,CAAC1rB,SAAS,CAAC4jB,SAAS,CAACC,WAAW,CAAC,MAAM,CAAC;QACxD;IACR;IACA,OAAO6H,SAAS;EACpB,CAAC;EACD;AACJ;AACA;EACI3rB,UAAU,CAACkC,SAAS,CAAC2pB,mBAAmB,GAAG,YAAY;IACnD,IAAI,IAAI,CAAC5rB,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAACW,MAAM,KAAK,CAAC,EAAE;MACvD,IAAI,IAAI,CAACzG,SAAS,CAAC6V,OAAO,IAAI,IAAI,CAAC7V,SAAS,CAAC6V,OAAO,CAAChT,uBAAuB,EAAE;QAC1E,IAAI,CAACgpB,iBAAiB,CAAC,CAAC;QACxB,IAAI,CAAC7rB,SAAS,CAAC6V,OAAO,CAAChT,uBAAuB,CAAC2I,0BAA0B,CAAC,IAAI,CAAC;QAC/E,IAAI,CAACjN,OAAO,CAAC8V,QAAQ,EAAE;UACnB,IAAI,CAACrU,SAAS,CAAC6V,OAAO,CAAChT,uBAAuB,CAACipB,8BAA8B,CAAC,CAAC;QACnF;MACJ;MACA,IAAI,CAACzqB,aAAa,CAAC0qB,wBAAwB,CAAC,CAAC;IACjD,CAAC,MACI;MACD,IAAI,IAAI,CAAC/rB,SAAS,CAACqL,mBAAmB,IAAI,CAAC,IAAI,CAAChK,aAAa,CAAC2qB,SAAS,IAAI,CAAC,IAAI,CAAChsB,SAAS,CAACisB,YAAY,EAAE;QACrG,IAAI,CAACjsB,SAAS,CAACqL,mBAAmB,CAACC,uBAAuB,CAAC,CAAC;MAChE;MACA;MACA,IAAI,IAAI,CAACtL,SAAS,CAAC6V,OAAO,IAAI,IAAI,CAAC7V,SAAS,CAAC6V,OAAO,CAAChT,uBAAuB,KAAK,CAACtE,OAAO,CAAC8V,QAAQ,IAAI,IAAI,CAACrU,SAAS,CAACuV,iBAAiB,CAAC,EAAE;QACrI;QACA,IAAI2W,MAAM,GAAG,IAAI,CAAClsB,SAAS,CAAC6V,OAAO,CAAChT,uBAAuB,CAACspB,qBAAqB;QACjF,IAAI,IAAI,CAACnsB,SAAS,CAACsE,UAAU,CAACxC,wBAAwB,IAAI,CAAC,IAAI,CAAC9B,SAAS,CAACsE,UAAU,CAACxC,wBAAwB,CAACsqB,iBAAiB,IAAI,CAACF,MAAM,EAAE;UACxI,IAAI,CAAClsB,SAAS,CAAC6V,OAAO,CAAChT,uBAAuB,CAACwpB,+BAA+B,CAAC,KAAK,CAAC;UACrF,IAAI,CAACrsB,SAAS,CAAC6V,OAAO,CAAChT,uBAAuB,CAACypB,uCAAuC,CAAC,KAAK,CAAC;QACjG;QACA,IAAI,CAACtsB,SAAS,CAAC6V,OAAO,CAAChT,uBAAuB,CAACipB,8BAA8B,CAAC,CAAC;QAC/E,IAAI,CAAC9rB,SAAS,CAAC6V,OAAO,CAAChT,uBAAuB,CAAC2I,0BAA0B,CAAC,KAAK,CAAC;MACpF;IACJ;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;EACI;EACAzL,UAAU,CAACkC,SAAS,CAACsqB,eAAe,GAAG,UAAUlQ,iBAAiB,EAAES,KAAK,EAAE;IACvE;IACAT,iBAAiB,GAAG,CAAC7d,iBAAiB,CAAC,IAAI,CAACwB,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC9F,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,GAAGuW,iBAAiB;IACrJ,IAAImQ,WAAW,GAAG,KAAK;IACvB,IAAI,IAAI,CAACnrB,aAAa,CAACorB,YAAY,CAACjmB,CAAC,KAAK,IAAI,CAACnF,aAAa,CAACqrB,eAAe,CAAClmB,CAAC,IAAI,IAAI,CAACnF,aAAa,CAACorB,YAAY,CAAC7lB,CAAC,KAAK,IAAI,CAACvF,aAAa,CAACqrB,eAAe,CAAC9lB,CAAC,EAAE;MAC1J4lB,WAAW,GAAG,IAAI;IACtB;IACA,IAAInQ,iBAAiB,EAAE;MACnB,IAAI,IAAI,CAAC9a,0BAA0B,IAAI,IAAI,CAACA,0BAA0B,CAAC6P,2BAA2B,EAAE;QAChG,IAAI,CAAC7P,0BAA0B,CAAC6P,2BAA2B,GAAG,IAAI;QAClE,IAAI,CAAC7P,0BAA0B,CAACiQ,2BAA2B,GAAG,IAAI;MACtE;MACA;MACA,IAAI,CAAC,IAAI,CAACnQ,aAAa,CAACqB,IAAI,YAAYvD,eAAe,IAAI,IAAI,CAACkC,aAAa,CAACqB,IAAI,YAAYtD,QAAQ,KAAK,CAAC,IAAI,CAACiC,aAAa,CAACqB,IAAI,CAACiqB,QAAQ,EAAE;QAC1I;QACA,IAAIC,OAAO,GAAG;UACVpU,OAAO,EAAE6D,iBAAiB,CAAC7D,OAAO;UAAEK,SAAS,EAAEwD,iBAAiB,CAACxD,SAAS;UAAED,WAAW,EAAEyD,iBAAiB,CAACzD,WAAW;UACtHG,SAAS,EAAEsD,iBAAiB,CAACtD,SAAS;UAAEiE,MAAM,EAAEX,iBAAiB,CAACW,MAAM;UAAExP,OAAO,EAAE6O,iBAAiB,CAAC7O,OAAO;UAC5GkL,YAAY,EAAE2D,iBAAiB,CAAC3D;QACpC,CAAC;QACD,IAAI5P,KAAK,GAAG,IAAI,CAAC6K,kBAAkB,CAAC0I,iBAAiB,CAACxU,SAAS,EAAEwU,iBAAiB,CAACrY,EAAE,CAAC;QACtF;QACA,IAAI8G,MAAM,GAAG;UAAEC,IAAI,EAAEsR,iBAAiB,CAACvR,MAAM,CAACtE,CAAC;UAAEwE,GAAG,EAAEqR,iBAAiB,CAACvR,MAAM,CAAClE,CAAC;UAAEqE,KAAK,EAAEoR,iBAAiB,CAACvR,MAAM,CAACG,KAAK;UAAEC,MAAM,EAAEmR,iBAAiB,CAACvR,MAAM,CAACI;QAAO,CAAC;QAClK,IAAI,IAAI,CAAC7J,aAAa,CAACqB,IAAI,YAAYtD,QAAQ,EAAE;UAC7CwtB,OAAO,CAACC,kBAAkB,GAAG,IAAI,CAACpI,cAAc,CAACpI,iBAAiB,CAACnD,qBAAqB,CAAC;UACzF0T,OAAO,CAACE,gBAAgB,GAAG,IAAI,CAACrI,cAAc,CAACpI,iBAAiB,CAAChD,sBAAsB,CAAC;UACxFuT,OAAO,CAAC5T,eAAe,GAAGqD,iBAAiB,CAACrD,eAAe;QAC/D;QACA,IAAI,CAAC,IAAI,CAAC3X,aAAa,CAAC0rB,iBAAiB,IAAI1Q,iBAAiB,CAACrU,WAAW,KAAK,UAAU,EAAE;UACvF,IAAIqU,iBAAiB,CAACrU,WAAW,KAAK,EAAE,IAAIxJ,iBAAiB,CAAC6d,iBAAiB,CAACrU,WAAW,CAAC,EAAE;YAC1F;YACA,IAAI,CAACvG,qBAAqB,CAACurB,sBAAsB,CAAC3Q,iBAAiB,EAAE,IAAI,CAACrc,SAAS,CAACsE,UAAU,CAACqb,kBAAkB,CAAC7C,KAAK,CAAC,CAAC;UAC7H,CAAC,MACI,IAAIT,iBAAiB,CAACrU,WAAW,KAAK,UAAU,IAAIqU,iBAAiB,CAACrU,WAAW,KAAK,WAAW,IAClGqU,iBAAiB,CAACrU,WAAW,KAAK,QAAQ,EAAE;YAC5C;YACA,IAAI,CAACrG,uBAAuB,CAACsrB,6BAA6B,CAAC5Q,iBAAiB,EAAE,IAAI,CAACrc,SAAS,CAACsE,UAAU,CAACqb,kBAAkB,CAAC7C,KAAK,CAAC,CAAC;UACtI;QACJ;QACA,IAAI,CAACzb,aAAa,CAACwJ,4BAA4B,CAAC,IAAI,CAAC;MACzD,CAAC,MACI,IAAI,IAAI,CAACxJ,aAAa,CAACqB,IAAI,YAAYrD,QAAQ,IAAI,IAAI,CAACgC,aAAa,CAACqB,IAAI,YAAYpD,UAAU,EAAE;QACnG,IAAIktB,WAAW,EAAE;UACb,IAAI,CAACnrB,aAAa,CAACwJ,4BAA4B,CAAC,IAAI,CAAC;QACzD;QACA,IAAIwR,iBAAiB,CAACrU,WAAW,KAAK,EAAE,IAAIxJ,iBAAiB,CAAC6d,iBAAiB,CAACrU,WAAW,CAAC,EAAE;UAC1F,IAAIqU,iBAAiB,CAAC/U,mBAAmB,KAAK,UAAU,EAAE;YACtD;YACA,IAAI,CAACtH,SAAS,CAACsE,UAAU,CAACxC,wBAAwB,CAACihB,kBAAkB,CAAC,QAAQ,EAAE,IAAI,CAAC/iB,SAAS,CAACsE,UAAU,CAACqb,kBAAkB,CAAC7C,KAAK,CAAC,EAAET,iBAAiB,CAAC;UAC3J,CAAC,MACI,IAAIA,iBAAiB,CAAC/U,mBAAmB,KAAK,sBAAsB,IAAI+U,iBAAiB,CAAC/U,mBAAmB,KAAK,gBAAgB,IAAI+U,iBAAiB,CAAC/U,mBAAmB,KAAK,eAAe,EAAE;YAClM;YACA,IAAI,CAACjG,aAAa,CAACmC,eAAe,CAACwf,yBAAyB,CAAC,QAAQ,EAAE,IAAI,CAAChjB,SAAS,CAACsE,UAAU,CAACqb,kBAAkB,CAAC7C,KAAK,CAAC,EAAET,iBAAiB,CAAC;UAClJ,CAAC,MACI,IAAIA,iBAAiB,CAAC/U,mBAAmB,KAAK,KAAK,EAAE;YACtD;YACA,IAAI,CAACtF,mBAAmB,CAACihB,4BAA4B,CAAC,QAAQ,EAAE,IAAI,CAACjjB,SAAS,CAACsE,UAAU,CAACqb,kBAAkB,CAAC7C,KAAK,CAAC,EAAET,iBAAiB,CAAC;UAC3I,CAAC,MACI,IAAIA,iBAAiB,CAAC/U,mBAAmB,KAAK,OAAO,IAAI+U,iBAAiB,CAAC/U,mBAAmB,KAAK,OAAO,EAAE;YAC7G;YACA,IAAI,CAAC1F,qBAAqB,CAACmhB,kBAAkB,CAAC,QAAQ,EAAE,IAAI,CAAC/iB,SAAS,CAACsE,UAAU,CAACqb,kBAAkB,CAAC7C,KAAK,CAAC,EAAET,iBAAiB,EAAEmQ,WAAW,CAAC;UAChJ,CAAC,MACI;YACD;YACA,IAAI,CAACxsB,SAAS,CAACsE,UAAU,CAAC7C,qBAAqB,CAACshB,kBAAkB,CAAC,QAAQ,EAAE,IAAI,CAAC/iB,SAAS,CAACsE,UAAU,CAACqb,kBAAkB,CAAC7C,KAAK,CAAC,EAAET,iBAAiB,EAAEmQ,WAAW,CAAC;UACrK;UACA;QACJ,CAAC,MACI,IAAInQ,iBAAiB,CAACrU,WAAW,KAAK,UAAU,IAAIqU,iBAAiB,CAACrU,WAAW,KAAK,WAAW,IAAIqU,iBAAiB,CAACrU,WAAW,KAAK,QAAQ,IAAIqU,iBAAiB,CAACrU,WAAW,KAAK,MAAM,IAAIqU,iBAAiB,CAACrU,WAAW,KAAK,QAAQ,EAAE;UAC5O,IAAI,CAAChI,SAAS,CAACsE,UAAU,CAAC3C,uBAAuB,CAACohB,kBAAkB,CAAC,QAAQ,EAAE,IAAI,CAAC/iB,SAAS,CAACsE,UAAU,CAACqb,kBAAkB,CAAC7C,KAAK,CAAC,EAAET,iBAAiB,CAAC;QAC1J;QACA,IAAI,IAAI,CAAChb,aAAa,CAACqB,IAAI,YAAYpD,UAAU,EAAE;UAC/C,IAAI,CAAC+c,iBAAiB,CAAC9U,uBAAuB,EAAE;YAC5C,IAAI,CAAC2lB,uBAAuB,CAAC7Q,iBAAiB,CAAC;UACnD;QACJ;QACA,IAAI,IAAI,CAAChb,aAAa,CAACqB,IAAI,YAAYrD,QAAQ,EAAE;UAC7C,IAAI,IAAI,CAACgC,aAAa,CAAC8U,MAAM,KAAK,QAAQ,EAAE;YACxC,IAAI,CAACkG,iBAAiB,CAAC9U,uBAAuB,EAAE;cAC5C,IAAI,CAAC4lB,qBAAqB,CAAC9Q,iBAAiB,CAAC;YACjD;UACJ;QACJ;MACJ,CAAC,MACI,IAAI,IAAI,CAAChb,aAAa,CAACqB,IAAI,YAAYnD,WAAW,EAAE;QACrD,IAAIitB,WAAW,EAAE;UACb,IAAI,CAACnrB,aAAa,CAACwJ,4BAA4B,CAAC,IAAI,CAAC;QACzD;QACA,IAAIwR,iBAAiB,CAACrU,WAAW,KAAK,EAAE,IAAIxJ,iBAAiB,CAAC6d,iBAAiB,CAACrU,WAAW,CAAC,EAAE;UAC1F;UACA,IAAKqU,iBAAiB,CAAC/U,mBAAmB,KAAK,MAAM,IAAI+U,iBAAiB,CAAC/U,mBAAmB,KAAK,oBAAoB,IAAI+U,iBAAiB,CAAC/U,mBAAmB,KAAK,SAAS,EAAG;YAC7K,IAAI,CAACtH,SAAS,CAACsE,UAAU,CAAC7C,qBAAqB,CAACshB,kBAAkB,CAAC,QAAQ,EAAE,IAAI,CAAC/iB,SAAS,CAACsE,UAAU,CAACqb,kBAAkB,CAAC7C,KAAK,CAAC,EAAET,iBAAiB,EAAEmQ,WAAW,CAAC;UACrK;UACA;QACJ,CAAC,MACI,IAAInQ,iBAAiB,CAACrU,WAAW,KAAK,UAAU,IAAIqU,iBAAiB,CAACrU,WAAW,KAAK,WAAW,IAAIqU,iBAAiB,CAACrU,WAAW,KAAK,MAAM,IAAIqU,iBAAiB,CAACrU,WAAW,KAAK,QAAQ,EAAE;UAC9L,IAAIqU,iBAAiB,CAACrU,WAAW,KAAK,UAAU,EAAE;YAC9C;YACA,IAAI,CAAChI,SAAS,CAACsE,UAAU,CAAC3C,uBAAuB,CAACohB,kBAAkB,CAAC,cAAc,EAAE,IAAI,CAAC/iB,SAAS,CAACsE,UAAU,CAACqb,kBAAkB,CAAC7C,KAAK,CAAC,EAAET,iBAAiB,CAAC;UAChK;UACA;UACA,IAAI,CAACrc,SAAS,CAACsE,UAAU,CAAC3C,uBAAuB,CAACohB,kBAAkB,CAAC,QAAQ,EAAE,IAAI,CAAC/iB,SAAS,CAACsE,UAAU,CAACqb,kBAAkB,CAAC7C,KAAK,CAAC,EAAET,iBAAiB,CAAC;QAC1J;QACA,IAAI,CAAC6Q,uBAAuB,CAAC7Q,iBAAiB,CAAC;MACnD;MACA;MACA,IAAI,IAAI,CAAChb,aAAa,CAACmT,cAAc,IAAI,IAAI,CAACnT,aAAa,CAACmT,cAAc,CAAC4Y,iBAAiB,IAAI,IAAI,CAACptB,SAAS,CAACqtB,mBAAmB,KAAKhR,iBAAiB,CAAC/U,mBAAmB,KAAK,sBAAsB,IAAI+U,iBAAiB,CAAC/U,mBAAmB,KAAK,eAAe,IAAI+U,iBAAiB,CAAC/U,mBAAmB,KAAK,gBAAgB,CAAC,EAAE;QACjU;QACA,IAAI,CAACjG,aAAa,CAACmT,cAAc,CAAC4Y,iBAAiB,CAACE,WAAW,CAAC,CAAC,IAAI,CAACttB,SAAS,CAAC4jB,SAAS,CAACC,WAAW,CAAC,oBAAoB,CAAC,CAAC,EAAE,IAAI,CAAC;QACnI;QACA,IAAI,CAACxiB,aAAa,CAACmT,cAAc,CAAC4Y,iBAAiB,CAACE,WAAW,CAAC,CAAC,IAAI,CAACttB,SAAS,CAAC4jB,SAAS,CAACC,WAAW,CAAC,aAAa,CAAC,CAAC,EAAE,IAAI,CAAC;MAChI;MACA,IAAI,IAAI,CAAC7jB,SAAS,CAAC2C,aAAa,EAAE;QAC9B,IAAI,IAAI,CAAC3C,SAAS,CAAC2C,aAAa,CAACE,uBAAuB,IAAI,IAAI,CAAC7C,SAAS,CAAC0R,uBAAuB,EAAE;UAChG,IAAI,CAAC1R,SAAS,CAAC2C,aAAa,CAACE,uBAAuB,CAAC0qB,mBAAmB,CAAC,CAAC;UAC1E,IAAIlR,iBAAiB,CAACrU,WAAW,KAAK,EAAE,IAAIxJ,iBAAiB,CAAC6d,iBAAiB,CAACrU,WAAW,CAAC,EAAE;YAC1F;YACA,IAAI,CAAChI,SAAS,CAAC2C,aAAa,CAACE,uBAAuB,CAAC2qB,gBAAgB,CAAC,CAAC;UAC3E,CAAC,MACI,IAAInR,iBAAiB,CAACrU,WAAW,KAAK,UAAU,IAAIqU,iBAAiB,CAACrU,WAAW,KAAK,WAAW,IAAIqU,iBAAiB,CAACrU,WAAW,KAAK,MAAM,IAAIqU,iBAAiB,CAACrU,WAAW,KAAK,QAAQ,IAAIqU,iBAAiB,CAACrU,WAAW,KAAK,QAAQ,EAAE;YAC5O,IAAI,CAAChI,SAAS,CAAC2C,aAAa,CAACE,uBAAuB,CAAC4qB,cAAc,CAAC,CAAC;UACzE;UACA,IAAI,IAAI,CAACztB,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAACW,MAAM,KAAK,CAAC,IAAI,IAAI,CAACzG,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,CAACyB,uBAAuB,KAAK,IAAI,EAAE;YACvI,IAAI,CAACvH,SAAS,CAAC2C,aAAa,CAACE,uBAAuB,CAACwpB,+BAA+B,CAAC,IAAI,CAAC;UAC9F;UACA,IAAI,CAAC5tB,QAAQ,CAAC,CAAC,EAAE;YACb,IAAI,IAAI,CAACuB,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAACW,MAAM,KAAK,CAAC,IAAI,CAAC,IAAI,CAACzG,SAAS,CAACisB,YAAY,EAAE;cACvF,IAAI,CAACjsB,SAAS,CAAC2C,aAAa,CAACE,uBAAuB,CAAC2I,0BAA0B,CAAC,IAAI,CAAC;cACrF,IAAI,CAACxL,SAAS,CAAC2C,aAAa,CAACE,uBAAuB,CAAC6qB,uBAAuB,CAAC,CAAC;cAC9E,IAAI,CAAC1tB,SAAS,CAAC2C,aAAa,CAACE,uBAAuB,CAAC8O,eAAe,GAAG,IAAI;cAC3E;cACA,IAAI,CAAC,IAAI,CAAC3R,SAAS,CAACyJ,kBAAkB,IAAI4S,iBAAiB,CAACsR,UAAU,CAAC3pB,EAAE,IAAI,EAAE,IAAIqY,iBAAiB,CAACsR,UAAU,CAAC3pB,EAAE,IAAI,IAAI,IAAIqY,iBAAiB,CAACsR,UAAU,CAAC3pB,EAAE,CAAC4pB,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,MAAM,EAAE;gBACjL,IAAI5pB,EAAE,GAAGH,QAAQ,CAACC,cAAc,CAACuY,iBAAiB,CAACsR,UAAU,CAAC3pB,EAAE,CAAC;gBACjE,IAAI6pB,eAAe,GAAG7pB,EAAE,IAAIA,EAAE,CAACyD,QAAQ;gBACvC,IAAI,CAAComB,eAAe,EAAE;kBAClB,IAAI,CAAC7tB,SAAS,CAAC2C,aAAa,CAACE,uBAAuB,CAAC+O,qBAAqB,CAAC,IAAI,CAAC5R,SAAS,CAAC2C,aAAa,CAACkP,cAAc,CAAC;gBAC3H,CAAC,MACI,IAAI,IAAI,CAAC7R,SAAS,CAACsE,UAAU,IAAIupB,eAAe,EAAE;kBACnD,IAAI,CAAC7tB,SAAS,CAACsE,UAAU,CAACqG,cAAc,CAAC,CAAC;gBAC9C;cACJ,CAAC,MACI;gBACD,IAAI,CAAC3K,SAAS,CAAC2C,aAAa,CAACE,uBAAuB,CAAC+O,qBAAqB,CAAC,IAAI,CAAC5R,SAAS,CAAC2C,aAAa,CAACkP,cAAc,CAAC;cAC3H;cACA,IAAI,IAAI,CAAC7R,SAAS,CAAC8tB,0BAA0B,IAAI,IAAI,CAAC9tB,SAAS,CAAC+tB,4BAA4B,EAAE;gBAC1F,IAAIC,mBAAmB,GAAGnqB,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAC9D,SAAS,CAAC+D,OAAO,CAACC,EAAE,GAAG,uBAAuB,CAAC;gBACtGgqB,mBAAmB,CAACjiB,KAAK,CAACkG,OAAO,GAAG,MAAM;gBAC1C,IAAI,IAAI,CAACjS,SAAS,CAAC2C,aAAa,EAAE;kBAC9B,IAAI,CAAC3C,SAAS,CAAC2C,aAAa,CAACsrB,yBAAyB,CAACtc,eAAe,GAAG,KAAK;kBAC9E,IAAI,CAAC3R,SAAS,CAAC2C,aAAa,CAACsrB,yBAAyB,CAACC,uBAAuB,CAAC,IAAI,CAACluB,SAAS,CAAC2C,aAAa,CAACwrB,gBAAgB,CAAC;kBAC7H,IAAI,CAACnuB,SAAS,CAAC2C,aAAa,CAACE,uBAAuB,CAACurB,YAAY,CAAC,IAAI,CAAC;gBAC3E;cACJ;YACJ;UACJ;QACJ;MACJ;IACJ;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;EACIruB,UAAU,CAACkC,SAAS,CAAC8U,qBAAqB,GAAG,UAAUsF,iBAAiB,EAAEgS,YAAY,EAAE;IACpF,IAAIhS,iBAAiB,CAACrU,WAAW,KAAK,UAAU,EAAE;MAC9CqU,iBAAiB,CAACvF,KAAK,GAAGtX,mBAAmB,CAAC6c,iBAAiB,EAAEA,iBAAiB,CAACzF,YAAY,EAAE,IAAI,CAACjV,uBAAuB,CAAC;MAC9H,IAAI0a,iBAAiB,CAACpE,gBAAgB,KAAK,IAAI,EAAE;QAC7CoE,iBAAiB,CAACiS,YAAY,GAAGjS,iBAAiB,CAACvF,KAAK;MAC5D;MACA;MACA,IAAI,CAAC9W,SAAS,CAACsE,UAAU,CAAC3C,uBAAuB,CAACohB,kBAAkB,CAAC,OAAO,EAAE1G,iBAAiB,CAACxU,SAAS,EAAEwU,iBAAiB,EAAEgS,YAAY,CAAC;MAC3I,IAAI,CAACruB,SAAS,CAACsE,UAAU,CAACzC,2BAA2B,CAAC0sB,iBAAiB,CAAClS,iBAAiB,CAAC9T,SAAS,EAAE8T,iBAAiB,CAACvF,KAAK,CAAC;MAC7H,IAAI,CAAC0U,iBAAiB,CAACnP,iBAAiB,CAACxU,SAAS,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC;IAC/E,CAAC,MACI,IAAIwU,iBAAiB,CAACrU,WAAW,KAAK,QAAQ,EAAE;MACjDqU,iBAAiB,CAACvF,KAAK,GAAGrX,iBAAiB,CAAC4c,iBAAiB,EAAE,IAAI,CAAC1a,uBAAuB,CAAC;MAC5F,IAAI0a,iBAAiB,CAACpE,gBAAgB,KAAK,IAAI,EAAE;QAC7CoE,iBAAiB,CAACiS,YAAY,GAAGjS,iBAAiB,CAACvF,KAAK;MAC5D;MACA;MACA,IAAI,CAAC9W,SAAS,CAACsE,UAAU,CAAC3C,uBAAuB,CAACohB,kBAAkB,CAAC,OAAO,EAAE1G,iBAAiB,CAACxU,SAAS,EAAEwU,iBAAiB,EAAEgS,YAAY,CAAC;MAC3I,IAAI,CAACruB,SAAS,CAACsE,UAAU,CAACzC,2BAA2B,CAAC0sB,iBAAiB,CAAClS,iBAAiB,CAAC9T,SAAS,EAAE8T,iBAAiB,CAACvF,KAAK,CAAC;MAC7H,IAAI,CAAC0U,iBAAiB,CAACnP,iBAAiB,CAACxU,SAAS,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC;IAC/E,CAAC,MACI,IAAIwU,iBAAiB,CAACrU,WAAW,KAAK,WAAW,EAAE;MACpDqU,iBAAiB,CAACvF,KAAK,GAAGpX,oBAAoB,CAAC2c,iBAAiB,EAAEA,iBAAiB,CAACzF,YAAY,EAAE,IAAI,CAACjV,uBAAuB,CAAC;MAC/H,IAAI0a,iBAAiB,CAACpE,gBAAgB,KAAK,IAAI,EAAE;QAC7CoE,iBAAiB,CAACiS,YAAY,GAAGjS,iBAAiB,CAACvF,KAAK;MAC5D;MACA;MACA,IAAI,CAAC9W,SAAS,CAACsE,UAAU,CAAC3C,uBAAuB,CAACohB,kBAAkB,CAAC,OAAO,EAAE1G,iBAAiB,CAACxU,SAAS,EAAEwU,iBAAiB,EAAEgS,YAAY,CAAC;MAC3I,IAAI,CAACruB,SAAS,CAACsE,UAAU,CAACzC,2BAA2B,CAAC0sB,iBAAiB,CAAClS,iBAAiB,CAAC9T,SAAS,EAAE8T,iBAAiB,CAACvF,KAAK,CAAC;MAC7H,IAAI,CAAC0U,iBAAiB,CAACnP,iBAAiB,CAACxU,SAAS,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC;IAC/E,CAAC,MACI,IAAIwU,iBAAiB,CAACrU,WAAW,KAAK,MAAM,EAAE;MAC/C;MACAqU,iBAAiB,CAACvF,KAAK,GAAG,IAAI,CAACnV,uBAAuB,CAAC6sB,aAAa,CAACnS,iBAAiB,CAACzF,YAAY,EAAEyF,iBAAiB,CAACrY,EAAE,EAAEqY,iBAAiB,CAACxU,SAAS,CAAC;MACvJ,IAAIwU,iBAAiB,CAACpE,gBAAgB,KAAK,IAAI,EAAE;QAC7CoE,iBAAiB,CAACiS,YAAY,GAAGjS,iBAAiB,CAACvF,KAAK;QACxDnX,oBAAoB,CAAC0c,iBAAiB,CAAC;MAC3C;MACA;MACA,IAAI,CAACrc,SAAS,CAACsE,UAAU,CAAC3C,uBAAuB,CAACohB,kBAAkB,CAAC,OAAO,EAAE1G,iBAAiB,CAACxU,SAAS,EAAEwU,iBAAiB,EAAEgS,YAAY,CAAC;MAC3I,IAAI,CAACruB,SAAS,CAACsE,UAAU,CAACzC,2BAA2B,CAAC0sB,iBAAiB,CAAClS,iBAAiB,CAAC9T,SAAS,EAAE8T,iBAAiB,CAACvF,KAAK,CAAC;MAC7H,IAAI,CAAC0U,iBAAiB,CAACnP,iBAAiB,CAACxU,SAAS,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC;IAC/E,CAAC,MACI,IAAIwU,iBAAiB,CAACrU,WAAW,KAAK,QAAQ,EAAE;MACjD;MACAqU,iBAAiB,CAACvF,KAAK,GAAG,IAAI,CAACnV,uBAAuB,CAAC8sB,eAAe,CAACpS,iBAAiB,CAACzF,YAAY,EAAEyF,iBAAiB,CAACrY,EAAE,EAAEqY,iBAAiB,CAACxU,SAAS,CAAC;MACzJ,IAAIwU,iBAAiB,CAACpE,gBAAgB,KAAK,IAAI,EAAE;QAC7CoE,iBAAiB,CAACiS,YAAY,GAAGjS,iBAAiB,CAACvF,KAAK;QACxDnX,oBAAoB,CAAC0c,iBAAiB,CAAC;MAC3C;MACA;MACA,IAAI,CAACrc,SAAS,CAACsE,UAAU,CAAC3C,uBAAuB,CAACohB,kBAAkB,CAAC,OAAO,EAAE1G,iBAAiB,CAACxU,SAAS,EAAEwU,iBAAiB,EAAEgS,YAAY,CAAC;MAC3I,IAAI,CAACruB,SAAS,CAACsE,UAAU,CAACzC,2BAA2B,CAAC0sB,iBAAiB,CAAClS,iBAAiB,CAAC9T,SAAS,EAAE8T,iBAAiB,CAACvF,KAAK,CAAC;MAC7H,IAAI,CAAC0U,iBAAiB,CAACnP,iBAAiB,CAACxU,SAAS,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC;IAC/E;EACJ,CAAC;EACD;AACJ;AACA;EACI9H,UAAU,CAACkC,SAAS,CAAC8P,qBAAqB,GAAG,YAAY;IACrD,IAAI,IAAI,CAAC/R,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAACW,MAAM,KAAK,CAAC,IAAI,IAAI,CAACzG,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,CAACyB,uBAAuB,KAAK,IAAI,EAAE;MACvI,IAAI,IAAI,CAACvH,SAAS,CAAC6V,OAAO,IAAI,IAAI,CAAC7V,SAAS,CAAC6V,OAAO,CAAChT,uBAAuB,EAAE;QAC1E,IAAI,CAACpE,QAAQ,CAAC,CAAC,IAAIF,OAAO,CAAC8V,QAAQ,IAAI,CAAC,IAAI,CAACrU,SAAS,CAACuV,iBAAiB,EAAE;UACtE,IAAInB,YAAY,GAAGvQ,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAC9D,SAAS,CAAC+D,OAAO,CAACC,EAAE,GAAG,eAAe,CAAC;UACvF,IAAIoQ,YAAY,CAACrI,KAAK,CAACkG,OAAO,KAAK,MAAM,EAAE;YACvC,IAAI,IAAI,CAACjS,SAAS,CAAC0uB,aAAa,IAAI,IAAI,CAAC1uB,SAAS,CAAC0R,uBAAuB,IAAI,IAAI,CAAC1R,SAAS,CAACmE,gBAAgB,CAAC5C,0BAA0B,CAAC6P,2BAA2B,EAAE;cAClK;cACA,IAAI,CAACpR,SAAS,CAAC2C,aAAa,CAACE,uBAAuB,CAAC8rB,mBAAmB,CAAC,EAAE,CAAC;YAChF,CAAC,MACI;cACD,IAAI,IAAI,CAAC3uB,SAAS,CAAC0uB,aAAa,IAAI,IAAI,CAAC1uB,SAAS,CAAC0R,uBAAuB,EAAE;gBACxE;gBACA,IAAI,CAAC1R,SAAS,CAAC2C,aAAa,CAACE,uBAAuB,CAAC8U,gCAAgC,CAAC,CAAC;gBACvF,IAAI,CAAC3X,SAAS,CAAC2C,aAAa,CAACE,uBAAuB,CAAC8rB,mBAAmB,CAAC,IAAI,CAAC3uB,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,CAACwB,mBAAmB,CAAC;gBACzI,IAAIsnB,QAAQ,GAAG/qB,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAC9D,SAAS,CAAC+D,OAAO,CAACC,EAAE,GAAG,iBAAiB,CAAC;gBACrF,IAAI4qB,QAAQ,IAAI,CAACA,QAAQ,CAAC3iB,aAAa,CAACL,SAAS,CAACC,QAAQ,CAAC,aAAa,CAAC,EAAE;kBACvE+iB,QAAQ,CAAC3iB,aAAa,CAACL,SAAS,CAACoM,GAAG,CAAC,aAAa,CAAC;gBACvD;cACJ;YACJ;UACJ;QACJ;QACA,IAAI,CAAC6T,iBAAiB,CAAC,CAAC;QACxB,IAAI,CAAC7rB,SAAS,CAAC6V,OAAO,CAAChT,uBAAuB,CAAC2I,0BAA0B,CAAC,IAAI,CAAC;MACnF;IACJ;EACJ,CAAC;EACDzL,UAAU,CAACkC,SAAS,CAAC4pB,iBAAiB,GAAG,YAAY;IACjD,IAAI1kB,MAAM,GAAG,KAAK;IAClB;IACA,IAAI7C,UAAU,GAAG,IAAI,CAACtE,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC;IAC5D,IAAIxB,UAAU,IAAIA,UAAU,CAACoD,kBAAkB,EAAE;MAC7C;MACAP,MAAM,GAAG7C,UAAU,CAACoD,kBAAkB,CAACP,MAAM;MAC7C,IAAIA,MAAM,IAAI,IAAI,CAACQ,wBAAwB,CAAC,gBAAgB,EAAErD,UAAU,CAAC,EAAE;QACvE6C,MAAM,GAAG,KAAK;MAClB;IACJ;IACA,IAAI,CAAC5I,OAAO,CAAC8V,QAAQ,IAAI,IAAI,CAACrU,SAAS,CAACuV,iBAAiB,EAAE;MACvD,IAAI,CAACpO,MAAM,EAAE;QACT,IAAI,IAAI,CAACnH,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,CAACwB,mBAAmB,KAAK,OAAO,IAC3E,IAAI,CAACtH,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,CAACwB,mBAAmB,KAAK,OAAO,EAAE;UAC7E,IAAI,CAACtH,SAAS,CAAC6V,OAAO,CAAChT,uBAAuB,CAACgsB,oCAAoC,CAAC,IAAI,CAAC;QAC7F,CAAC,MACI,IAAI,IAAI,CAAC7uB,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,CAACwB,mBAAmB,KAAK,aAAa,EAAE;UACxF,IAAI,CAACtH,SAAS,CAAC6V,OAAO,CAAChT,uBAAuB,CAACgsB,oCAAoC,CAAC,IAAI,CAAC;QAC7F,CAAC,MACI,IAAI,IAAI,CAAC7uB,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,CAACwB,mBAAmB,KAAK,MAAM,IAC/E,IAAI,CAACtH,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,CAACwB,mBAAmB,KAAK,gBAAgB,IACpF,IAAI,CAACtH,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,CAACwB,mBAAmB,KAAK,eAAe,EAAE;UACrF,IAAI,CAACtH,SAAS,CAAC6V,OAAO,CAAChT,uBAAuB,CAACwpB,+BAA+B,CAAC,KAAK,CAAC;QACzF,CAAC,MACI,IAAI,IAAI,CAACrsB,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,CAACwB,mBAAmB,KAAK,UAAU,EAAE;UACrF,IAAI,CAACtH,SAAS,CAAC6V,OAAO,CAAChT,uBAAuB,CAACypB,uCAAuC,CAAC,IAAI,CAAC;QAChG,CAAC,MACI,IAAI,IAAI,CAACtsB,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,CAACwB,mBAAmB,KAAK,sBAAsB,EAAE;UACjG,IAAI,CAACtH,SAAS,CAAC6V,OAAO,CAAChT,uBAAuB,CAACisB,8BAA8B,CAAC,IAAI,CAAC;QACvF,CAAC,MACI,IAAI,IAAI,CAAC9uB,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,CAACwB,mBAAmB,KAAK,KAAK,EAAE;UAChF,IAAI,CAACtH,SAAS,CAAC6V,OAAO,CAAChT,uBAAuB,CAACisB,8BAA8B,CAAC,IAAI,CAAC;QACvF,CAAC,MACI;UACD,IAAI,IAAI,CAAC9uB,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAACW,MAAM,KAAK,CAAC,IAAI,IAAI,CAACzG,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,CAACyB,uBAAuB,KAAK,IAAI,EAAE;YACvI,IAAI,CAACvH,SAAS,CAAC6V,OAAO,CAAChT,uBAAuB,CAACwpB,+BAA+B,CAAC,IAAI,CAAC;UACxF;QACJ;MACJ;MACA;IACJ,CAAC,MACI,IAAI,CAAC,IAAI,CAACrsB,SAAS,CAACmE,gBAAgB,CAAC5C,0BAA0B,CAAC6P,2BAA2B,IAAI,EAAE,IAAI,CAACpR,SAAS,CAAC6F,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,CAACipB,QAAQ,KAAK,aAAa,CAAC,IAAKxwB,OAAO,CAAC8V,QAAQ,IAAI,CAAC,IAAI,CAACrU,SAAS,CAACuV,iBAAkB,EAAE;MACtO,IAAI,CAACvV,SAAS,CAAC2C,aAAa,CAACE,uBAAuB,CAACmsB,6BAA6B,CAAC,IAAI,EAAE,IAAI,CAAC;IAClG;EACJ,CAAC;EACDjvB,UAAU,CAACkC,SAAS,CAAC2d,aAAa,GAAG,UAAUqP,IAAI,EAAE;IACjD,IAAIC,UAAU,GAAG,IAAIC,IAAI,CAACF,IAAI,CAAC7rB,QAAQ,CAAC,CAAC,CAAC;IAC1C,IAAIgsB,KAAK,CAACF,UAAU,CAACG,WAAW,CAAC,CAAC,CAAC,EAAE;MACjC,IAAIC,UAAU,GAAGL,IAAI,CAACrB,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC;MAClC;MACA0B,UAAU,GAAGA,UAAU,CAAC1B,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,GAAG,GAAG0B,UAAU,CAAC1B,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,GAAG,GAAG0B,UAAU,CAAC1B,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,GAAG,GAAG0B,UAAU,CAAC1B,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,GAAG,GAAG0B,UAAU,CAAC1B,KAAK,CAAC,EAAE,EAAE,EAAE,CAAC,GAAG,GAAG,GAAG0B,UAAU,CAAC1B,KAAK,CAAC,EAAE,EAAE,EAAE,CAAC;MACnMsB,UAAU,GAAG,IAAIC,IAAI,CAACG,UAAU,CAAC;IACrC;IACA;IACA,OAAQJ,UAAU,CAACK,QAAQ,CAAC,CAAC,GAAG,CAAC,GAAI,GAAG,GAAGL,UAAU,CAACM,OAAO,CAAC,CAAC,GAAG,GAAG,GAAGN,UAAU,CAACG,WAAW,CAAC,CAAC,GAAG,GAAG,GAAGH,UAAU,CAACO,QAAQ,CAAC,CAAC,GAAG,GAAG,GAAGP,UAAU,CAACQ,UAAU,CAAC,CAAC,GAAG,GAAG,GAAGR,UAAU,CAACS,UAAU,CAAC,CAAC;EAClM,CAAC;EACD;AACJ;AACA;AACA;AACA;EACI5vB,UAAU,CAACkC,SAAS,CAACyR,iBAAiB,GAAG,UAAUkc,eAAe,EAAEhoB,UAAU,EAAE;IAC5E,IAAIkB,KAAK,GAAG,IAAI;IAChB,KAAK,IAAImB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG2lB,eAAe,CAACnpB,MAAM,EAAEwD,CAAC,EAAE,EAAE;MAC7C,IAAI2lB,eAAe,CAAC3lB,CAAC,CAAC,CAACpC,SAAS,KAAKD,UAAU,EAAE;QAC7CkB,KAAK,GAAGmB,CAAC;QACT;MACJ;IACJ;IACA,OAAOnB,KAAK;EAChB,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;EACI;EACA/I,UAAU,CAACkC,SAAS,CAAC4tB,mBAAmB,GAAG,UAAU/pB,WAAW,EAAE9B,EAAE,EAAE;IAClE;IACA,IAAIM,UAAU;IACd,KAAK,IAAI2F,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGnE,WAAW,CAACW,MAAM,EAAEwD,CAAC,EAAE,EAAE;MACzC,IAAIjG,EAAE,KAAK8B,WAAW,CAACmE,CAAC,CAAC,CAACjG,EAAE,EAAE;QAC1BM,UAAU,GAAGwB,WAAW,CAACmE,CAAC,CAAC;MAC/B;IACJ;IACA,OAAO3F,UAAU;EACrB,CAAC;EACD;AACJ;AACA;AACA;EACI;EACAvE,UAAU,CAACkC,SAAS,CAAC0d,kBAAkB,GAAG,UAAU7C,KAAK,EAAE;IACvD,IAAIgT,WAAW,GAAGhT,KAAK,CAAC+B,MAAM;IAC9B,IAAIkR,kBAAkB,GAAGjT,KAAK,CAAC+B,MAAM,CAAC5S,aAAa;IACnD,IAAI6jB,WAAW,CAAClkB,SAAS,CAACC,QAAQ,CAAC,gBAAgB,CAAC,EAAE;MAClDikB,WAAW,GAAGC,kBAAkB;IACpC,CAAC,MACI,IAAIA,kBAAkB,IAAIA,kBAAkB,CAACnkB,SAAS,CAACC,QAAQ,CAAC,gBAAgB,CAAC,IAAIkkB,kBAAkB,CAAC9jB,aAAa,IAAI8jB,kBAAkB,CAAC9jB,aAAa,CAACA,aAAa,IAAI8jB,kBAAkB,CAAC9jB,aAAa,CAACA,aAAa,CAACA,aAAa,EAAE;MAC1O6jB,WAAW,GAAGC,kBAAkB,CAAC9jB,aAAa,CAACA,aAAa,CAACA,aAAa;IAC9E,CAAC,MACI,IAAI6jB,WAAW,CAAClkB,SAAS,CAACC,QAAQ,CAAC,wBAAwB,CAAC,EAAE;MAC/DikB,WAAW,GAAGC,kBAAkB;IACpC;IACA,IAAIC,UAAU;IACd,IAAIF,WAAW,EAAE;MACb;MACAE,UAAU,GAAGF,WAAW,CAAC9rB,EAAE,CAAC+F,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI+lB,WAAW,CAAC9rB,EAAE,CAAC+F,KAAK,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,IAAI+lB,WAAW,CAAC9rB,EAAE,CAAC+F,KAAK,CAAC,oBAAoB,CAAC,CAAC,CAAC,CAAC,IAAI+lB,WAAW,CAAC9rB,EAAE,CAAC+F,KAAK,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;IACrL;IACA,IAAIqlB,KAAK,CAACY,UAAU,CAAC,EAAE;MACnBlT,KAAK,GAAG,IAAI,CAACzb,aAAa,CAAC4uB,eAAe;MAC1C,IAAInT,KAAK,EAAE;QACPgT,WAAW,GAAGhT,KAAK,CAAC+B,MAAM;QAC1B;QACAmR,UAAU,GAAGF,WAAW,CAAC9rB,EAAE,CAAC+F,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI+lB,WAAW,CAAC9rB,EAAE,CAAC+F,KAAK,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,IAAI+lB,WAAW,CAAC9rB,EAAE,CAAC+F,KAAK,CAAC,oBAAoB,CAAC,CAAC,CAAC,CAAC,IAAI+lB,WAAW,CAAC9rB,EAAE,CAAC+F,KAAK,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;MACrL;IACJ;IACA;IACA,OAAOtE,QAAQ,CAACuqB,UAAU,CAAC;EAC/B,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI;EACAjwB,UAAU,CAACkC,SAAS,CAACiuB,qBAAqB,GAAG,UAAUC,mBAAmB,EAAEC,gBAAgB,EAAEpT,MAAM,EAAE;IAClG,IAAIqT,QAAQ,GAAG,EAAE;IACjB,IAAI/Y,gBAAgB,GAAG,IAAI;IAC3B,IAAI6Y,mBAAmB,EAAE;MACrB,IAAIA,mBAAmB,CAAC1pB,MAAM,GAAG,CAAC,EAAE;QAChC,KAAK,IAAIwD,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGkmB,mBAAmB,CAAC1pB,MAAM,EAAEwD,CAAC,EAAE,EAAE;UACjD;UACA,IAAI3F,UAAU,GAAG6rB,mBAAmB,CAAClmB,CAAC,CAAC;UACvCqN,gBAAgB,GAAG;YACf;YACAhQ,mBAAmB,EAAE,QAAQ;YAAE0V,MAAM,EAAE1Y,UAAU,CAACgsB,MAAM;YAAE5X,YAAY,EAAEpU,UAAU,CAACisB,YAAY;YAAEtT,IAAI,EAAE3Y,UAAU,CAACksB,IAAI;YAAEC,KAAK,EAAEnsB,UAAU,CAACmsB,KAAK;YAAEC,UAAU,EAAEpsB,UAAU,CAACosB,UAAU;YAClLC,QAAQ,EAAE,EAAE;YAAEC,MAAM,EAAE;cAAEH,KAAK,EAAEnsB,UAAU,CAACusB,KAAK;cAAEH,UAAU,EAAEpsB,UAAU,CAACwsB,UAAU;cAAEpY,YAAY,EAAEpU,UAAU,CAACisB,YAAY;cAAEvT,MAAM,EAAE1Y,UAAU,CAACgsB;YAAO,CAAC;YACtJ/nB,SAAS,EAAEjE,UAAU,CAACmL,SAAS;YAAEshB,QAAQ,EAAEX,gBAAgB,CAAC3gB,SAAS;YAAEjC,OAAO,EAAElJ,UAAU,CAACoJ,OAAO;YAClGvG,MAAM,EAAE7C,UAAU,CAAC0sB;UACvB,CAAC;UACDX,QAAQ,CAACA,QAAQ,CAAC5pB,MAAM,CAAC,GAAG6Q,gBAAgB;QAChD;MACJ;IACJ;IACA,OAAO+Y,QAAQ;EACnB,CAAC;EACDtwB,UAAU,CAACkC,SAAS,CAACgvB,eAAe,GAAG,YAAY;IAC/C;IACA,OAAO,sCAAsC,CAACC,OAAO,CAAC,OAAO,EAAE,UAAUC,CAAC,EAAE;MACxE;MACA,IAAIC,MAAM,GAAG1iB,IAAI,CAAC0iB,MAAM,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC;QAAEC,CAAC,GAAGF,CAAC,IAAI,GAAG,GAAGC,MAAM,GAAIA,MAAM,GAAG,GAAG,GAAG,GAAI;MACjF,OAAOA,MAAM,CAAChuB,QAAQ,CAAC,EAAE,CAAC;IAC9B,CAAC,CAAC;EACN,CAAC;EACD;AACJ;AACA;EACIrD,UAAU,CAACkC,SAAS,CAACqvB,UAAU,GAAG,YAAY;IAC1C;IACA,OAAO,IAAI,CAACL,eAAe,CAAC,CAAC;EACjC,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI;EACAlxB,UAAU,CAACkC,SAAS,CAACsvB,qBAAqB,GAAG,UAAU3tB,OAAO,EAAE4tB,SAAS,EAAEC,UAAU,EAAE7pB,UAAU,EAAE8pB,WAAW,EAAE;IAC5G,IAAI1gB,MAAM,GAAG,IAAI,CAAC3P,aAAa,CAAC4P,UAAU,CAAC,oBAAoB,GAAGrJ,UAAU,CAAC;IAC7E,IAAIoJ,MAAM,EAAE;MACR,IAAI,CAAC2gB,YAAY,CAAC3gB,MAAM,EAAEwgB,SAAS,EAAEC,UAAU,EAAE7pB,UAAU,CAAC;MAC5D,OAAOoJ,MAAM;IACjB,CAAC,MACI;MACD;MACA,IAAI4gB,gBAAgB,GAAGtzB,aAAa,CAAC,QAAQ,EAAE;QAAE0F,EAAE,EAAE,IAAI,CAAChE,SAAS,CAAC+D,OAAO,CAACC,EAAE,GAAG,oBAAoB,GAAG4D,UAAU;QAAEkE,SAAS,EAAE;MAAyB,CAAC,CAAC;MAC1J,IAAI,CAAC6lB,YAAY,CAACC,gBAAgB,EAAEJ,SAAS,EAAEC,UAAU,EAAE7pB,UAAU,CAAC;MACtEhE,OAAO,CAAC8Y,WAAW,CAACkV,gBAAgB,CAAC;MACrC,OAAOA,gBAAgB;IAC3B;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;EACI7xB,UAAU,CAACkC,SAAS,CAAC4vB,iBAAiB,GAAG,UAAU5mB,KAAK,EAAEC,MAAM,EAAEtD,UAAU,EAAE;IAC1E,IAAIoJ,MAAM,GAAG,IAAI,CAAC3P,aAAa,CAAC4P,UAAU,CAAC,oBAAoB,GAAGrJ,UAAU,CAAC;IAC7E,IAAIoJ,MAAM,EAAE;MACRA,MAAM,CAACjF,KAAK,CAACd,KAAK,GAAGA,KAAK,GAAG,IAAI;MACjC+F,MAAM,CAACjF,KAAK,CAACb,MAAM,GAAGA,MAAM,GAAG,IAAI;MACnC,IAAI,CAAC7J,aAAa,CAACywB,kBAAkB,CAAC9gB,MAAM,EAAEpJ,UAAU,CAAC;IAC7D;EACJ,CAAC;EACD;AACJ;AACA;AACA;EACI7H,UAAU,CAACkC,SAAS,CAAC8vB,qBAAqB,GAAG,UAAUnqB,UAAU,EAAE;IAC/D,IAAIoJ,MAAM,GAAG,IAAI,CAAC3P,aAAa,CAAC4P,UAAU,CAAC,oBAAoB,GAAGrJ,UAAU,CAAC;IAC7E,IAAIoqB,IAAI,GAAG,IAAI,CAAC3wB,aAAa,CAACgP,aAAa,CAAC,CAAC;IAC7C,IAAI4hB,KAAK,GAAG,IAAI,CAAC5wB,aAAa,CAAC6wB,YAAY,CAACF,IAAI,CAAC;IACjD,IAAIhhB,MAAM,EAAE;MACR,IAAI/F,KAAK,GAAG,IAAI,CAAC5J,aAAa,CAAC+O,QAAQ,CAACxI,UAAU,CAAC,CAACqD,KAAK;MACzD,IAAIC,MAAM,GAAG,IAAI,CAAC7J,aAAa,CAAC+O,QAAQ,CAACxI,UAAU,CAAC,CAACsD,MAAM;MAC3D8F,MAAM,CAAC/F,KAAK,GAAGA,KAAK,GAAGgnB,KAAK;MAC5BjhB,MAAM,CAAC9F,MAAM,GAAGA,MAAM,GAAG+mB,KAAK;MAC9BjhB,MAAM,CAACjF,KAAK,CAACd,KAAK,GAAGA,KAAK,GAAG+mB,IAAI,GAAG,IAAI;MACxChhB,MAAM,CAACjF,KAAK,CAACb,MAAM,GAAGA,MAAM,GAAG8mB,IAAI,GAAG,IAAI;IAC9C;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI;EACAjyB,UAAU,CAACkC,SAAS,CAACupB,iBAAiB,GAAG,UAAU5jB,UAAU,EAAEuqB,eAAe,EAAEC,sBAAsB,EAAElhB,oBAAoB,EAAEF,MAAM,EAAEqhB,mBAAmB,EAAEC,kBAAkB,EAAEvR,kBAAkB,EAAE;IAC/L,IAAI,CAACgR,qBAAqB,CAACnqB,UAAU,CAAC;IACtC,IAAI,IAAI,CAACnG,qBAAqB,EAAE;MAC5B,IAAI4wB,mBAAmB,EAAE;QACrB,IAAI,CAAC5wB,qBAAqB,CAACurB,sBAAsB,CAACmF,eAAe,EAAEvqB,UAAU,EAAE,IAAI,CAAC;MACxF,CAAC,MACI;QACD,IAAI,CAACnG,qBAAqB,CAACurB,sBAAsB,CAACmF,eAAe,EAAEvqB,UAAU,EAAE,IAAI,EAAE0qB,kBAAkB,CAAC;MAC5G;IACJ;IACA,IAAI,IAAI,CAAC3wB,uBAAuB,EAAE;MAC9B,IAAI0wB,mBAAmB,EAAE;QACrB,IAAI,CAAC1wB,uBAAuB,CAACsrB,6BAA6B,CAACmF,sBAAsB,EAAExqB,UAAU,EAAE,IAAI,CAAC;MACxG,CAAC,MACI;QACD,IAAI,CAACjG,uBAAuB,CAACsrB,6BAA6B,CAACmF,sBAAsB,EAAExqB,UAAU,EAAE,IAAI,EAAE0qB,kBAAkB,CAAC;MAC5H;IACJ;IACA,IAAI,IAAI,CAACxwB,wBAAwB,EAAE;MAC/B,IAAIuwB,mBAAmB,EAAE;QACrB,IAAI,CAACvwB,wBAAwB,CAACywB,yBAAyB,CAACxR,kBAAkB,EAAEnZ,UAAU,EAAE,IAAI,CAAC;MACjG,CAAC,MACI;QACD,IAAI,CAAC9F,wBAAwB,CAACywB,yBAAyB,CAACxR,kBAAkB,EAAEnZ,UAAU,EAAE,IAAI,EAAE0qB,kBAAkB,CAAC;MACrH;IACJ;IACA,IAAIthB,MAAM,KAAK,IAAI,IAAIA,MAAM,KAAK4J,SAAS,EAAE;MACzC5J,MAAM,GAAGA,MAAM;IACnB,CAAC,MACI;MACDA,MAAM,GAAG,IAAI,CAAC3P,aAAa,CAAC4P,UAAU,CAAC,oBAAoB,GAAGrJ,UAAU,CAAC;IAC7E;IACA,IAAI,CAAC5H,SAAS,CAAC6T,OAAO,CAAC2e,yBAAyB,CAACxhB,MAAM,EAAEpJ,UAAU,CAAC;IACpE,IAAI,CAAC,IAAI,CAACvG,aAAa,CAACoxB,UAAU,IAAI,IAAI,CAACzyB,SAAS,CAAC0C,IAAI,KAAK,KAAK,IAAI,IAAI,CAAC1C,SAAS,CAACiE,iBAAiB,GAAG,CAAC,KAAK2D,UAAU,EAAE;MACxH,IAAI8qB,aAAa,GAAG7uB,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAC9D,SAAS,CAAC+D,OAAO,CAACC,EAAE,GAAG,oBAAoB,IAAI,IAAI,CAAChE,SAAS,CAACiE,iBAAiB,GAAG,CAAC,CAAC,CAAC;MACtI,IAAI+tB,IAAI,GAAG,IAAI,CAAC3wB,aAAa,CAACgP,aAAa,CAAC,CAAC;MAC7C,IAAI4hB,KAAK,GAAG,IAAI,CAAC5wB,aAAa,CAACsxB,yBAAyB,CAAC,CAAC;MAC1D,IAAIC,OAAO,GAAGF,aAAa,CAACG,UAAU,CAAC,IAAI,CAAC;MAC5C,IAAI9Z,SAAS,GAAG,IAAI,CAAC/Y,SAAS,CAAC4N,qBAAqB,CAACmL,SAAS,GAAG,IAAI,CAAC/Y,SAAS,CAAC4N,qBAAqB,CAACmL,SAAS,GAAG,CAAC;MACnH,IAAIP,OAAO,GAAG,IAAI,CAACxY,SAAS,CAAC4N,qBAAqB,CAAC4K,OAAO,GAAG,IAAI,CAACxY,SAAS,CAAC4N,qBAAqB,CAAC4K,OAAO,GAAG,CAAC;MAC7G,IAAII,WAAW,GAAG,IAAI,CAAC5Y,SAAS,CAAC4N,qBAAqB,CAACgL,WAAW,GAAG,IAAI,CAAC5Y,SAAS,CAAC4N,qBAAqB,CAACgL,WAAW,GAAG,SAAS;MACjI,IAAI,CAACra,OAAO,CAAC8V,QAAQ,IAAK9V,OAAO,CAAC8V,QAAQ,IAAI2d,IAAI,IAAI,GAAI,EAAE;QACxDY,OAAO,CAACE,YAAY,CAACb,KAAK,EAAE,CAAC,EAAE,CAAC,EAAEA,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;MAClD;MACAW,OAAO,CAACG,SAAS,CAAC,CAAC;MACnBH,OAAO,CAACI,QAAQ,GAAG,OAAO;MAC1BJ,OAAO,CAACK,OAAO,GAAG,OAAO;MACzBL,OAAO,CAACM,SAAS,GAAGna,SAAS,GAAGiZ,IAAI,GAAG,CAAC,GAAGjZ,SAAS,GAAGiZ,IAAI,GAAGjZ,SAAS;MACvE6Z,OAAO,CAACO,WAAW,GAAGva,WAAW;MACjCga,OAAO,CAACQ,WAAW,GAAG5a,OAAO;MAC7B,IAAIH,cAAc,GAAGtZ,eAAe,CAAC,IAAI,CAACiB,SAAS,CAACmE,gBAAgB,CAACnC,mBAAmB,CAACqxB,qBAAqB,CAAC,CAAC,CAAC;MACjH,IAAI/a,MAAM,GAAGtZ,oBAAoB,CAACqZ,cAAc,CAAC;MACjD,KAAK,IAAIib,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGhb,MAAM,CAAC7R,MAAM,EAAE6sB,CAAC,EAAE,EAAE;QACpC,IAAIC,SAAS,GAAGjb,MAAM,CAACgb,CAAC,CAAC;QACzB,QAAQC,SAAS,CAACC,OAAO;UACrB,KAAK,GAAG;YACJZ,OAAO,CAACa,MAAM,CAACF,SAAS,CAAC/sB,CAAC,EAAE+sB,SAAS,CAAC3sB,CAAC,CAAC;YACxC;UACJ,KAAK,GAAG;YACJgsB,OAAO,CAACc,MAAM,CAACH,SAAS,CAAC/sB,CAAC,EAAE+sB,SAAS,CAAC3sB,CAAC,CAAC;YACxC;UACJ;YACI;QACR;MACJ;MACAgsB,OAAO,CAACe,MAAM,CAAC,CAAC;MAChBf,OAAO,CAACgB,SAAS,CAAC,CAAC;MACnB,IAAI,CAACp1B,iBAAiB,CAAC,IAAI,CAACwB,SAAS,CAAC2C,aAAa,CAAC,IAAI,CAACnE,iBAAiB,CAAC,IAAI,CAACwB,SAAS,CAAC2C,aAAa,CAACE,uBAAuB,CAAC,EAAE;QAC9H,IAAI,CAAC7C,SAAS,CAAC6V,OAAO,CAAChT,uBAAuB,CAACspB,qBAAqB,GAAG,IAAI;MAC/E;IACJ;IACA,IAAI,IAAI,CAAC5qB,0BAA0B,EAAE;MACjC,IAAI8wB,mBAAmB,EAAE;QACrB;QACA,IAAI,CAAC9wB,0BAA0B,CAACsyB,iCAAiC,CAAC3iB,oBAAoB,EAAEtJ,UAAU,EAAE,IAAI,CAAC;MAC7G,CAAC,MACI;QACD;QACA,IAAI,CAACrG,0BAA0B,CAACsyB,iCAAiC,CAAC3iB,oBAAoB,EAAEtJ,UAAU,CAAC;MACvG;IACJ;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI;EACA7H,UAAU,CAACkC,SAAS,CAAC6xB,gBAAgB,GAAG,UAAUlsB,UAAU,EAAEtD,UAAU,EAAEU,YAAY,EAAE;IACpF;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,IAAIyJ,WAAW,GAAGC,IAAI,CAACC,KAAK,CAACtI,IAAI,CAACa,SAAS,CAAClB,MAAM,CAACC,cAAc,CAAC,CAACQ,MAAM,GAAG,IAAI,CAAC;IACjF,IAAIgI,WAAW,GAAG,IAAI,EAAE;MACpB,IAAI,CAACD,sBAAsB,CAAC,CAAC;MAC7B,IAAI,CAACnN,aAAa,CAACmS,eAAe,GAAG,IAAI;MACzC,IAAI,CAAE,IAAI,CAACnS,aAAa,CAAC0yB,mBAAoB,EAAE;QAC3C,IAAI,CAAC/zB,SAAS,CAACmM,gBAAgB,CAAC6nB,qBAAqB,CAAC,CAAC;MAC3D;IACJ;IACA;IACA,IAAIzgB,WAAW,GAAGvN,MAAM,CAACC,cAAc,CAACC,OAAO,CAAC,IAAI,CAAC7E,aAAa,CAAC8E,UAAU,GAAGnB,YAAY,CAAC;IAC7F,IAAI,IAAI,CAAC3D,aAAa,CAACmS,eAAe,EAAE;MACpCD,WAAW,GAAG,IAAI,CAAClS,aAAa,CAAC2N,iBAAiB,CAAC,IAAI,CAAC3N,aAAa,CAAC8E,UAAU,GAAGnB,YAAY,CAAC;IACpG;IACA,IAAI8D,KAAK,GAAG,CAAC;IACb,IAAI,CAACyK,WAAW,EAAE;MACd,IAAI,CAAClH,0BAA0B,CAAC/H,UAAU,EAAEsD,UAAU,CAAC;MACvD,IAAIqsB,cAAc,GAAG;QAAEpsB,SAAS,EAAED,UAAU;QAAE9B,WAAW,EAAE;MAAG,CAAC;MAC/DmuB,cAAc,CAACnuB,WAAW,CAACkB,IAAI,CAAC1C,UAAU,CAAC;MAC3CwE,KAAK,GAAGmrB,cAAc,CAACnuB,WAAW,CAAC2E,OAAO,CAACnG,UAAU,CAAC;MACtD,IAAIyI,oBAAoB,GAAG,EAAE;MAC7BA,oBAAoB,CAAC/F,IAAI,CAACitB,cAAc,CAAC;MACzC,IAAIC,qBAAqB,GAAG7tB,IAAI,CAACa,SAAS,CAAC6F,oBAAoB,CAAC;MAChE,IAAI,IAAI,CAAC1L,aAAa,CAACmS,eAAe,EAAE;QACpC,IAAI,CAACnS,aAAa,CAAC2N,iBAAiB,CAAC,IAAI,CAAC3N,aAAa,CAAC8E,UAAU,GAAGnB,YAAY,CAAC,GAAGkvB,qBAAqB;MAC9G,CAAC,MACI;QACDluB,MAAM,CAACC,cAAc,CAACgB,OAAO,CAAC,IAAI,CAAC5F,aAAa,CAAC8E,UAAU,GAAGnB,YAAY,EAAEkvB,qBAAqB,CAAC;MACtG;IACJ,CAAC,MACI;MACD,IAAI,CAAC7nB,0BAA0B,CAAC/H,UAAU,EAAEsD,UAAU,CAAC;MACvD,IAAIusB,aAAa,GAAG9tB,IAAI,CAACC,KAAK,CAACiN,WAAW,CAAC;MAC3C,IAAI,CAAC,IAAI,CAAClS,aAAa,CAACmS,eAAe,EAAE;QACrCxN,MAAM,CAACC,cAAc,CAACgJ,UAAU,CAAC,IAAI,CAAC5N,aAAa,CAAC8E,UAAU,GAAGnB,YAAY,CAAC;MAClF;MACA,IAAIovB,WAAW,GAAG,IAAI,CAACp0B,SAAS,CAACmE,gBAAgB,CAACuP,iBAAiB,CAACygB,aAAa,EAAEvsB,UAAU,CAAC;MAC9F,IAAIusB,aAAa,CAACC,WAAW,CAAC,EAAE;QAC5BD,aAAa,CAACC,WAAW,CAAC,CAACtuB,WAAW,CAACyJ,MAAM,CAAC,UAAU4a,IAAI,EAAErhB,KAAK,EAAE;UACjE,IAAIqhB,IAAI,CAAC5hB,SAAS,KAAKjE,UAAU,CAACiE,SAAS,EAAE;YACzC4rB,aAAa,CAACC,WAAW,CAAC,CAACtuB,WAAW,CAACiB,MAAM,CAAC+B,KAAK,EAAE,CAAC,CAAC;UAC3D;QACJ,CAAC,CAAC;QACFqrB,aAAa,CAACC,WAAW,CAAC,CAACtuB,WAAW,CAACkB,IAAI,CAAC1C,UAAU,CAAC;QACvDwE,KAAK,GAAGqrB,aAAa,CAACC,WAAW,CAAC,CAACtuB,WAAW,CAAC2E,OAAO,CAACnG,UAAU,CAAC;MACtE,CAAC,MACI;QACD,IAAI+vB,gBAAgB,GAAG;UAAExsB,SAAS,EAAED,UAAU;UAAE9B,WAAW,EAAE;QAAG,CAAC;QACjEuuB,gBAAgB,CAACvuB,WAAW,CAACkB,IAAI,CAAC1C,UAAU,CAAC;QAC7CwE,KAAK,GAAGurB,gBAAgB,CAACvuB,WAAW,CAAC2E,OAAO,CAACnG,UAAU,CAAC;QACxD6vB,aAAa,CAACntB,IAAI,CAACqtB,gBAAgB,CAAC;MACxC;MACA,IAAIH,qBAAqB,GAAG7tB,IAAI,CAACa,SAAS,CAACitB,aAAa,CAAC;MACzD,IAAI,IAAI,CAAC9yB,aAAa,CAACmS,eAAe,EAAE;QACpC,IAAI,CAACnS,aAAa,CAAC2N,iBAAiB,CAAC,IAAI,CAAC3N,aAAa,CAAC8E,UAAU,GAAGnB,YAAY,CAAC,GAAGkvB,qBAAqB;MAC9G,CAAC,MACI;QACDluB,MAAM,CAACC,cAAc,CAACgB,OAAO,CAAC,IAAI,CAAC5F,aAAa,CAAC8E,UAAU,GAAGnB,YAAY,EAAEkvB,qBAAqB,CAAC;MACtG;IACJ;IACA,OAAOprB,KAAK;EAChB,CAAC;EACD;AACJ;AACA;AACA;EACI/I,UAAU,CAACkC,SAAS,CAACkX,YAAY,GAAG,UAAUhX,IAAI,EAAE;IAChD,IAAImyB,eAAe,GAAG,MAAM;IAC5B,QAAQnyB,IAAI;MACR,KAAK,aAAa;MAClB,KAAK,QAAQ;QACTmyB,eAAe,GAAG,OAAO;QACzB;MACJ,KAAK,WAAW;MAChB,KAAK,MAAM;QACPA,eAAe,GAAG,WAAW;QAC7B;MACJ,KAAK,QAAQ;QACTA,eAAe,GAAG,QAAQ;QAC1B;MACJ,KAAK,QAAQ;MACb,KAAK,OAAO;QACRA,eAAe,GAAG,QAAQ;QAC1B;MACJ,KAAK,SAAS;QACVA,eAAe,GAAG,SAAS;QAC3B;MACJ,KAAK,MAAM;QACPA,eAAe,GAAG,MAAM;QACxB;MACJ,KAAK,OAAO;QACR;QACA;IACR;IACA,OAAOA,eAAe;EAC1B,CAAC;EACD;AACJ;AACA;AACA;EACIv0B,UAAU,CAACkC,SAAS,CAACsyB,yBAAyB,GAAG,UAAU5I,KAAK,EAAE;IAC9D,IAAID,SAAS;IACb,QAAQC,KAAK;MACT,KAAK,OAAO;QACRD,SAAS,GAAG,aAAa;QACzB;MACJ,KAAK,WAAW;MAChB,KAAK,QAAQ;MACb,KAAK,QAAQ;MACb,KAAK,SAAS;MACd,KAAK,MAAM;QACPA,SAAS,GAAGC,KAAK,CAACvoB,QAAQ,CAAC,CAAC;QAC5B;MACJ,KAAK,MAAM;QACPsoB,SAAS,GAAG,MAAM;QAClB;IACR;IACA,OAAOA,SAAS;EACpB,CAAC;EACD;AACJ;AACA;AACA;AACA;EACI;EACA3rB,UAAU,CAACkC,SAAS,CAACuyB,SAAS,GAAG,UAAUC,KAAK,EAAE5sB,SAAS,EAAE;IACzD,IAAI6sB,WAAW,GAAG,IAAI,CAACrzB,aAAa,CAAC+O,QAAQ,CAACvI,SAAS,CAAC;IACxD,IAAI6sB,WAAW,EAAE;MACb,IAAIA,WAAW,CAACC,QAAQ,KAAK,CAAC,EAAE;QAC5B,OAAO;UAAE5pB,IAAI,EAAE0pB,KAAK,CAACzpB,GAAG;UAAEA,GAAG,EAAE0pB,WAAW,CAACzpB,KAAK,IAAIwpB,KAAK,CAAC1pB,IAAI,GAAG0pB,KAAK,CAACxpB,KAAK,CAAC;UAAEA,KAAK,EAAEwpB,KAAK,CAACvpB,MAAM;UAAEA,MAAM,EAAEupB,KAAK,CAACxpB;QAAM,CAAC;MAC7H,CAAC,MACI,IAAIypB,WAAW,CAACC,QAAQ,KAAK,CAAC,EAAE;QACjC;QACA,OAAO;UAAE5pB,IAAI,EAAE2pB,WAAW,CAACzpB,KAAK,GAAGwpB,KAAK,CAAC1pB,IAAI,GAAG0pB,KAAK,CAACxpB,KAAK;UAAED,GAAG,EAAE0pB,WAAW,CAACxpB,MAAM,GAAGupB,KAAK,CAACzpB,GAAG,GAAGypB,KAAK,CAACvpB,MAAM;UAAED,KAAK,EAAEwpB,KAAK,CAACxpB,KAAK;UAAEC,MAAM,EAAEupB,KAAK,CAACvpB;QAAO,CAAC;MAC/J,CAAC,MACI,IAAIwpB,WAAW,CAACC,QAAQ,KAAK,CAAC,EAAE;QACjC,OAAO;UAAE5pB,IAAI,EAAE2pB,WAAW,CAACxpB,MAAM,GAAGupB,KAAK,CAACzpB,GAAG,GAAGypB,KAAK,CAACvpB,MAAM;UAAEF,GAAG,EAAEypB,KAAK,CAAC1pB,IAAI;UAAEE,KAAK,EAAEwpB,KAAK,CAACvpB,MAAM;UAAEA,MAAM,EAAEupB,KAAK,CAACxpB;QAAM,CAAC;MAC7H,CAAC,MACI;QACD,OAAOwpB,KAAK;MAChB;IACJ,CAAC,MACI;MACD,OAAOA,KAAK;IAChB;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;EACI;EACA10B,UAAU,CAACkC,SAAS,CAAC2yB,YAAY,GAAG,UAAUH,KAAK,EAAE5sB,SAAS,EAAE;IAC5D,IAAI6sB,WAAW,GAAG,IAAI,CAACrzB,aAAa,CAAC+O,QAAQ,CAACvI,SAAS,CAAC;IACxD,IAAI6sB,WAAW,EAAE;MACb,IAAIA,WAAW,CAACC,QAAQ,KAAK,CAAC,EAAE;QAC5B,OAAO;UAAEnuB,CAAC,EAAEiuB,KAAK,CAAC7tB,CAAC;UAAEA,CAAC,EAAE8tB,WAAW,CAACzpB,KAAK,IAAIwpB,KAAK,CAACjuB,CAAC,GAAGiuB,KAAK,CAACxpB,KAAK,CAAC;UAAEA,KAAK,EAAEwpB,KAAK,CAACvpB,MAAM;UAAEA,MAAM,EAAEupB,KAAK,CAACxpB;QAAM,CAAC;MACnH,CAAC,MACI,IAAIypB,WAAW,CAACC,QAAQ,KAAK,CAAC,EAAE;QACjC;QACA,OAAO;UAAEnuB,CAAC,EAAEkuB,WAAW,CAACzpB,KAAK,GAAGwpB,KAAK,CAACjuB,CAAC,GAAGiuB,KAAK,CAACxpB,KAAK;UAAErE,CAAC,EAAE8tB,WAAW,CAACxpB,MAAM,GAAGupB,KAAK,CAAC7tB,CAAC,GAAG6tB,KAAK,CAACvpB,MAAM;UAAED,KAAK,EAAEwpB,KAAK,CAACxpB,KAAK;UAAEC,MAAM,EAAEupB,KAAK,CAACvpB;QAAO,CAAC;MACrJ,CAAC,MACI,IAAIwpB,WAAW,CAACC,QAAQ,KAAK,CAAC,EAAE;QACjC,OAAO;UAAEnuB,CAAC,EAAEkuB,WAAW,CAACxpB,MAAM,GAAGupB,KAAK,CAAC7tB,CAAC,GAAG6tB,KAAK,CAACvpB,MAAM;UAAEtE,CAAC,EAAE6tB,KAAK,CAACjuB,CAAC;UAAEyE,KAAK,EAAEwpB,KAAK,CAACvpB,MAAM;UAAEA,MAAM,EAAEupB,KAAK,CAACxpB;QAAM,CAAC;MACnH,CAAC,MACI;QACD,OAAOwpB,KAAK;MAChB;IACJ,CAAC,MACI;MACD,OAAOA,KAAK;IAChB;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;EACI;EACA10B,UAAU,CAACkC,SAAS,CAAC4yB,eAAe,GAAG,UAAUC,MAAM,EAAEjtB,SAAS,EAAE;IAChE,IAAIitB,MAAM,EAAE;MACR,IAAIJ,WAAW,GAAG,IAAI,CAACrzB,aAAa,CAAC+O,QAAQ,CAACvI,SAAS,CAAC;MACxD,IAAI6sB,WAAW,CAACC,QAAQ,KAAK,CAAC,EAAE;QAC5B,IAAII,OAAO,GAAG,EAAE;QAChB,KAAK,IAAI9qB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG6qB,MAAM,CAACruB,MAAM,EAAEwD,CAAC,EAAE,EAAE;UACpC,IAAI+qB,KAAK,GAAG;YAAExuB,CAAC,EAAEsuB,MAAM,CAAC7qB,CAAC,CAAC,CAACrD,CAAC;YAAEA,CAAC,EAAE8tB,WAAW,CAACzpB,KAAK,GAAG6pB,MAAM,CAAC7qB,CAAC,CAAC,CAACzD;UAAE,CAAC;UAClEuuB,OAAO,CAAC/tB,IAAI,CAACguB,KAAK,CAAC;QACvB;QACA,OAAOD,OAAO;MAClB,CAAC,MACI,IAAIL,WAAW,CAACC,QAAQ,KAAK,CAAC,EAAE;QACjC,IAAIM,OAAO,GAAG,EAAE;QAChB,KAAK,IAAIhrB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG6qB,MAAM,CAACruB,MAAM,EAAEwD,CAAC,EAAE,EAAE;UACpC,IAAI+qB,KAAK,GAAG;YAAExuB,CAAC,EAAEkuB,WAAW,CAACzpB,KAAK,GAAG6pB,MAAM,CAAC7qB,CAAC,CAAC,CAACzD,CAAC;YAAEI,CAAC,EAAE8tB,WAAW,CAACxpB,MAAM,GAAG4pB,MAAM,CAAC7qB,CAAC,CAAC,CAACrD;UAAE,CAAC;UACvFquB,OAAO,CAACjuB,IAAI,CAACguB,KAAK,CAAC;QACvB;QACA,OAAOC,OAAO;MAClB,CAAC,MACI,IAAIP,WAAW,CAACC,QAAQ,KAAK,CAAC,EAAE;QACjC,IAAIO,OAAO,GAAG,EAAE;QAChB,KAAK,IAAIjrB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG6qB,MAAM,CAACruB,MAAM,EAAEwD,CAAC,EAAE,EAAE;UACpC,IAAI+qB,KAAK,GAAG;YAAExuB,CAAC,EAAEkuB,WAAW,CAACxpB,MAAM,GAAG4pB,MAAM,CAAC7qB,CAAC,CAAC,CAACrD,CAAC;YAAEA,CAAC,EAAEkuB,MAAM,CAAC7qB,CAAC,CAAC,CAACzD;UAAE,CAAC;UACnE0uB,OAAO,CAACluB,IAAI,CAACguB,KAAK,CAAC;QACvB;QACA,OAAOE,OAAO;MAClB,CAAC,MACI;QACD,OAAOJ,MAAM;MACjB;IACJ;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI;EACA/0B,UAAU,CAACkC,SAAS,CAACkzB,oBAAoB,GAAG,UAAUttB,SAAS,EAAEutB,gBAAgB,EAAEhM,QAAQ,EAAE;IACzF;IACA,IAAIrc,oBAAoB;IACxB;IACA,IAAIwG,WAAW,GAAGvN,MAAM,CAACC,cAAc,CAACC,OAAO,CAAC,IAAI,CAAC7E,aAAa,CAAC8E,UAAU,GAAGijB,QAAQ,CAAC;IACzF,IAAI,IAAI,CAAC/nB,aAAa,CAACmS,eAAe,EAAE;MACpCD,WAAW,GAAG,IAAI,CAAClS,aAAa,CAAC2N,iBAAiB,CAAC,IAAI,CAAC3N,aAAa,CAAC8E,UAAU,GAAGijB,QAAQ,CAAC;IAChG;IACA,IAAI7V,WAAW,EAAE;MACb,IAAIE,WAAW,GAAGpN,IAAI,CAACC,KAAK,CAACiN,WAAW,CAAC;MACzC,IAAIzK,KAAK,GAAG,IAAI,CAAC9I,SAAS,CAACmE,gBAAgB,CAACuP,iBAAiB,CAACD,WAAW,EAAE5L,SAAS,CAAC;MACrF,IAAI4L,WAAW,CAAC3K,KAAK,CAAC,EAAE;QACpBiE,oBAAoB,GAAG0G,WAAW,CAAC3K,KAAK,CAAC,CAAChD,WAAW;MACzD,CAAC,MACI;QACDiH,oBAAoB,GAAG,IAAI;MAC/B;IACJ,CAAC,MACI;MACDA,oBAAoB,GAAG,IAAI;IAC/B;IACA,OAAOA,oBAAoB;EAC/B,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI;EACAhN,UAAU,CAACkC,SAAS,CAACqe,2BAA2B,GAAG,UAAUjE,iBAAiB,EAAEgZ,OAAO,EAAEC,QAAQ,EAAEC,WAAW,EAAEvV,SAAS,EAAEwV,WAAW,EAAEC,SAAS,EAAEC,WAAW,EAAEC,UAAU,EAAE/S,YAAY,EAAEgT,WAAW,EAAE;IACnM,IAAI9sB,KAAK,GAAG,IAAI,CAAC6K,kBAAkB,CAAC0I,iBAAiB,CAACxU,SAAS,EAAEwU,iBAAiB,CAACrY,EAAE,CAAC;IACtF,IAAI7B,IAAI,GAAG,IAAI,CAACwG,iBAAiB,CAAC0T,iBAAiB,CAAC/U,mBAAmB,EAAE+U,iBAAiB,CAACrU,WAAW,CAAC;IACvG;IACA,IAAI6tB,SAAS,GAAG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"},"metadata":{},"sourceType":"module","externalDependencies":[]}