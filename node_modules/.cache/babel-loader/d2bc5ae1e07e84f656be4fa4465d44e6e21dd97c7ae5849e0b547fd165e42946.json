{"ast":null,"code":"import { createElement, isNullOrUndefined, Browser, isBlazor } from '@syncfusion/ej2-base';\nimport { Dialog } from '@syncfusion/ej2-popups';\n/**\n * TextLayer module is used to handle the text content on the control.\n *\n * @hidden\n */\nvar TextLayer = /** @class */function () {\n  /**\n   * @param {PdfViewer} pdfViewer - The PdfViewer.\n   * @param {PdfViewerBase} pdfViewerBase - The PdfViewerBase.\n   * @private\n   */\n  function TextLayer(pdfViewer, pdfViewerBase) {\n    var _this = this;\n    // eslint-disable-next-line\n    this.textBoundsArray = [];\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    this.characterBound = [];\n    /**\n     * @returns {void}\n     */\n    this.closeNotification = function () {\n      _this.notifyDialog.hide();\n    };\n    this.pdfViewer = pdfViewer;\n    this.pdfViewerBase = pdfViewerBase;\n  }\n  /**\n   * @param {number} pageNumber - The pageNumber.\n   * @param {number} pageWidth - The pageWidth.\n   * @param {number} pageHeight - The pageHeight.\n   * @param {HTMLElement} pageDiv - The pageDiv.\n   * @returns {HTMLElement} - The HTMLElement.\n   * @private\n   */\n  TextLayer.prototype.addTextLayer = function (pageNumber, pageWidth, pageHeight, pageDiv) {\n    var textDiv = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageNumber);\n    var textLayer;\n    if (!textDiv) {\n      textLayer = createElement('div', {\n        id: this.pdfViewer.element.id + '_textLayer_' + pageNumber,\n        className: 'e-pv-text-layer'\n      });\n      textLayer.style.width = pageWidth + 'px';\n      textLayer.style.height = pageHeight + 'px';\n      if (pageDiv) {\n        pageDiv.appendChild(textLayer);\n      }\n    }\n    this.pdfViewerBase.applyElementStyles(textLayer, pageNumber);\n    return textLayer;\n  };\n  /**\n   * @param {number} pageNumber - The pageNumber.\n   * @param {any} textContents - The textContents.\n   * @param {any} textBounds - The textBounds.\n   * @param {any} rotation - The rotation.\n   * @returns {void}\n   * @private\n   */\n  // eslint-disable-next-line\n  TextLayer.prototype.renderTextContents = function (pageNumber, textContents, textBounds, rotation, rtldoc) {\n    var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageNumber);\n    var canvasElement = createElement(\"canvas\");\n    var isRTLText;\n    if (this.pdfViewerBase.clientSideRendering) {\n      isRTLText = false;\n    }\n    var linebounds = [];\n    var lineContent = [];\n    var yValue;\n    var heightValue;\n    if (textBounds.length > 1) {\n      if (textBounds[0].Width === 0 && textBounds.length > 2) {\n        yValue = textBounds[1].Y;\n        heightValue = textBounds[1].Height;\n      } else {\n        yValue = textBounds[0].Y;\n        heightValue = textBounds[0].Height;\n      }\n    }\n    var idNumber = 0;\n    if (canvasElement && textLayer && textLayer.childNodes.length === 0) {\n      for (var i = 0; i < textContents.length; i++) {\n        // eslint-disable-next-line\n        if (!textContents[i].includes(\"\\r\\n\") && !textContents[i].includes(\"\\u0002\") && i != textBounds.length - 1 && rotation === 0 && !rtldoc) {\n          linebounds.push(textBounds[parseInt(i.toString(), 10)]);\n          lineContent.push(textContents[parseInt(i.toString(), 10)]);\n          if (yValue > textBounds[parseInt(i.toString(), 10)].Y && textBounds[parseInt(i.toString(), 10)].Width !== 0) {\n            yValue = textBounds[parseInt(i.toString(), 10)].Y;\n          }\n          if (heightValue < textBounds[parseInt(i.toString(), 10)].Height && textBounds[parseInt(i.toString(), 10)].Width !== 0) {\n            heightValue = textBounds[parseInt(i.toString(), 10)].Height;\n          }\n        } else {\n          linebounds.push(textBounds[parseInt(i.toString(), 10)]);\n          lineContent.push(textContents[parseInt(i.toString(), 10)]);\n          if (yValue > textBounds[parseInt(i.toString(), 10)].Y && textBounds[parseInt(i.toString(), 10)].Width !== 0) {\n            yValue = textBounds[parseInt(i.toString(), 10)].Y;\n          }\n          if (heightValue < textBounds[parseInt(i.toString(), 10)].Height && textBounds[parseInt(i.toString(), 10)].Width !== 0) {\n            heightValue = textBounds[parseInt(i.toString(), 10)].Height;\n          }\n          for (var j = 0; j < linebounds.length; j++) {\n            var bounds = linebounds[parseInt(j.toString(), 10)];\n            // eslint-disable-next-line max-len\n            var textDiv = createElement('div', {\n              id: this.pdfViewer.element.id + '_text_' + pageNumber + '_' + idNumber,\n              className: 'e-pv-text',\n              attrs: {\n                'tabindex': '-1'\n              }\n            });\n            var textContent = lineContent[parseInt(j.toString(), 10)];\n            if (textContent === \" \" && j != linebounds.length - 1 && j != 0) {\n              bounds.Height = linebounds[j - 1].Height;\n              bounds.Y = linebounds[j - 1].Y;\n            }\n            textDiv.textContent = textContent.replace(/&nbsp;/g, ' ');\n            // eslint-disable-next-line\n            var newLine = lineContent[j].replace(/  +/g, ' ');\n            if (newLine !== ' ') {\n              textDiv.style.whiteSpace = 'pre';\n            }\n            if (this.pdfViewerBase.clientSideRendering) {\n              if (textContent === ' ') {\n                textDiv.style.whiteSpace = 'pre';\n              }\n              if (!isNullOrUndefined(textDiv.textContent) && textContent !== \" \") {\n                isRTLText = this.pdfViewerBase.checkIsRtlText(textDiv.textContent);\n                textDiv.style.direction = isRTLText ? 'rtl' : 'ltr';\n              } else {\n                textDiv.style.direction = isRTLText ? 'rtl' : 'ltr';\n              }\n            }\n            if (bounds.Width === 0 && j != linebounds.length - 1 && j != 0) {\n              if (linebounds[j + 1].X - (linebounds[j - 1].X + linebounds[j - 1].Width) < 30 && !lineContent[j - 1].includes(\"\\r\\n\") && !textContents[parseInt(j.toString(), 10)].includes(\"\\u0002\")) {\n                bounds.Width = linebounds[j + 1].X - (linebounds[j - 1].X + linebounds[j - 1].Width);\n                bounds.X = linebounds[j - 1].X + linebounds[j - 1].Width;\n                if (bounds.Width < 0) {\n                  bounds.Width = 0;\n                } else {\n                  textDiv.style.whiteSpace = 'pre';\n                }\n              }\n            }\n            if ((j != 0 || linebounds.length - 1 === 0 || bounds.Y - yValue > 20 && bounds.Width != 0) && idNumber != 0 && (textBounds[idNumber - 1].Y - textBounds[parseInt(idNumber.toString(), 10)].Y > 11 || textBounds[parseInt(idNumber.toString(), 10)].Y - textBounds[idNumber - 1].Y > 11) && lineContent[parseInt(j.toString(), 10)] != \" \") {\n              yValue = linebounds[parseInt(j.toString(), 10)].Y;\n              heightValue = linebounds[parseInt(j.toString(), 10)].Height;\n            }\n            if (bounds) {\n              if (bounds.Rotation !== 270) {\n                bounds.Y = yValue;\n                bounds.Height = heightValue;\n              }\n              this.setStyleToTextDiv(textDiv, bounds.X, bounds.Y, bounds.Bottom, bounds.Width, bounds.Height, bounds.Rotation);\n            }\n            this.setTextElementProperties(textDiv);\n            var context = canvasElement.getContext('2d');\n            context.font = textDiv.style.fontSize + ' ' + textDiv.style.fontFamily;\n            var contextWidth = context.measureText(lineContent[parseInt(j.toString(), 10)].replace(/(\\r\\n|\\n|\\r)/gm, '')).width;\n            if (bounds) {\n              var scale = void 0;\n              if (bounds.Rotation === 90 || this.pdfViewerBase.clientSideRendering && bounds.Rotation === 270) {\n                scale = bounds.Height * this.pdfViewerBase.getZoomFactor() / contextWidth;\n              } else {\n                scale = bounds.Width * this.pdfViewerBase.getZoomFactor() / contextWidth;\n              }\n              this.applyTextRotation(scale, textDiv, rotation, bounds.Rotation, bounds);\n            }\n            textLayer.appendChild(textDiv);\n            // EJ2-855106- Optimize performance by eliminating unnecessary getBoundingClientRect usage in this method.\n            this.resizeExcessDiv(textLayer, textDiv);\n            // eslint-disable-next-line max-len\n            if (this.pdfViewer.textSelectionModule && this.pdfViewer.enableTextSelection && !this.pdfViewerBase.isTextSelectionDisabled && textDiv.className !== 'e-pdfviewer-formFields' && textDiv.className !== 'e-pdfviewer-signatureformfields' && textDiv.className !== 'e-pdfviewer-signatureformfields-signature') {\n              textDiv.classList.add('e-pv-cursor');\n            }\n            idNumber++;\n          }\n          linebounds = [];\n          lineContent = [];\n          if (i < textBounds.length - 1) {\n            if (textBounds[i + 1].Width === 0 && !isNullOrUndefined(textBounds[i + 2])) {\n              yValue = textBounds[i + 2].Y;\n              heightValue = textBounds[i + 2].Height;\n            } else {\n              yValue = textBounds[i + 1].Y;\n              heightValue = textBounds[i + 1].Height;\n            }\n          }\n        }\n      }\n    }\n  };\n  /**\n   * @param pageNumber\n   * @param textContents\n   * @param textBounds\n   * @param rotation\n   * @param isTextSearch\n   * @param pageNumber\n   * @param textContents\n   * @param textBounds\n   * @param rotation\n   * @param isTextSearch\n   * @private\n   */\n  // eslint-disable-next-line\n  TextLayer.prototype.resizeTextContents = function (pageNumber, textContents, textBounds, rotation, isTextSearch) {\n    var textLayer = this.pdfViewerBase.getElement('_textLayer_' + pageNumber);\n    var canvasElement = createElement(\"canvas\");\n    if (canvasElement) {\n      for (var i = 0; i < textLayer.childNodes.length; i++) {\n        // eslint-disable-next-line\n        var bounds = void 0;\n        var textDiv = this.pdfViewerBase.getElement('_text_' + pageNumber + '_' + i);\n        if (isNullOrUndefined(textDiv)) {\n          break;\n        }\n        if (textBounds) {\n          bounds = textBounds[parseInt(i.toString(), 10)];\n          if (bounds) {\n            this.setStyleToTextDiv(textDiv, bounds.X, bounds.Y, bounds.Bottom, bounds.Width, bounds.Height, bounds.Rotation);\n          }\n        }\n        this.setTextElementProperties(textDiv);\n        var context = canvasElement.getContext('2d');\n        context.font = textDiv.style.fontSize + ' ' + textDiv.style.fontFamily;\n        var contextWidth = void 0;\n        if (textContents) {\n          var textContent = textContents[parseInt(i.toString(), 10)];\n          if (textContent) {\n            contextWidth = context.measureText(textContent.replace(/(\\r\\n|\\n|\\r)/gm, '')).width;\n          }\n        } else {\n          contextWidth = context.measureText(textDiv.textContent.replace(/(\\r\\n|\\n|\\r)/gm, '')).width;\n        }\n        if (bounds) {\n          var scale = void 0;\n          if (bounds.Rotation === 90 || this.pdfViewerBase.clientSideRendering && bounds.Rotation === 270) {\n            scale = bounds.Height * this.pdfViewerBase.getZoomFactor() / contextWidth;\n          } else {\n            scale = bounds.Width * this.pdfViewerBase.getZoomFactor() / contextWidth;\n          }\n          this.applyTextRotation(scale, textDiv, rotation, bounds.Rotation, bounds);\n        }\n        // EJ2-855106- Optimize performance by eliminating unnecessary getBoundingClientRect usage in this method.\n        this.resizeExcessDiv(textLayer, textDiv);\n      }\n    } else {\n      textLayer.parentElement.removeChild(textLayer);\n    }\n    if (this.pdfViewer.textSearch) {\n      if (!isTextSearch) {\n        this.pdfViewer.textSearch.resizeSearchElements(pageNumber);\n      }\n    }\n  };\n  TextLayer.prototype.applyTextRotation = function (scale, textDiv, rotation, textRotation, bounds) {\n    var scaleString = 'scaleX(' + scale + ')';\n    if (this.pdfViewerBase.clientSideRendering) {\n      if (rotation === 0) {\n        if (textRotation === 0) {\n          textDiv.style.transform = scaleString;\n        } else if (textRotation === 90) {\n          textDiv.style.left = (bounds.X + bounds.Width) * this.pdfViewerBase.getZoomFactor() + \"px\";\n          textDiv.style.top = bounds.Y * this.pdfViewerBase.getZoomFactor() + \"px\";\n          textDiv.style.transform = 'rotate(' + textRotation + 'deg) ' + scaleString;\n        } else if (textRotation === 180) {\n          textDiv.style.left = (bounds.X + bounds.Width) * this.pdfViewerBase.getZoomFactor() + \"px\";\n          textDiv.style.top = (bounds.Y + bounds.Height) * this.pdfViewerBase.getZoomFactor() + \"px\";\n          textDiv.style.transform = 'rotate(' + textRotation + 'deg) ' + scaleString;\n        } else if (textRotation === 270) {\n          textDiv.style.left = bounds.X * this.pdfViewerBase.getZoomFactor() + \"px\";\n          textDiv.style.top = (bounds.Y + bounds.Height) * this.pdfViewerBase.getZoomFactor() + \"px\";\n          textDiv.style.transform = 'rotate(' + textRotation + 'deg) ' + scaleString;\n        } else {\n          textDiv.style.transform = scaleString;\n        }\n      } else if (rotation === 1) {\n        var textRotationAngle = textRotation + 90;\n        if (textRotationAngle >= 360) {\n          textRotationAngle -= 360;\n        }\n        if (textRotation === 0) {\n          textDiv.style.transform = 'rotate(90deg) ' + scaleString;\n        } else if (textRotation === 90) {\n          textDiv.style.left = bounds.X * this.pdfViewerBase.getZoomFactor() + \"px\";\n          textDiv.style.top = (bounds.Y + bounds.Width) * this.pdfViewerBase.getZoomFactor() + \"px\";\n          textDiv.style.transform = 'rotate(' + textRotationAngle + 'deg) ' + scaleString;\n        } else if (textRotation === 180) {\n          textDiv.style.left = (bounds.X - bounds.Height) * this.pdfViewerBase.getZoomFactor() + \"px\";\n          textDiv.style.top = (bounds.Y + bounds.Width) * this.pdfViewerBase.getZoomFactor() + \"px\";\n          textDiv.style.transform = 'rotate(' + textRotationAngle + 'deg) ' + scaleString;\n        } else if (textRotation === 270) {\n          textDiv.style.left = (bounds.X - bounds.Height) * this.pdfViewerBase.getZoomFactor() + \"px\";\n          textDiv.style.top = bounds.Y * this.pdfViewerBase.getZoomFactor() + \"px\";\n          textDiv.style.transform = 'rotate(' + textRotationAngle + 'deg) ' + scaleString;\n        } else {\n          textDiv.style.transform = 'rotate(90deg) ' + scaleString;\n        }\n      } else if (rotation === 2) {\n        var textRotationAngle = textRotation + 180;\n        if (textRotationAngle >= 360) {\n          textRotationAngle -= 360;\n        }\n        if (textRotation === 0) {\n          textDiv.style.transform = 'rotate(180deg) ' + scaleString;\n        } else if (textRotation === 90) {\n          textDiv.style.left = (bounds.X - bounds.Width) * this.pdfViewerBase.getZoomFactor() + \"px\";\n          textDiv.style.top = bounds.Y * this.pdfViewerBase.getZoomFactor() + \"px\";\n          textDiv.style.transform = 'rotate(' + textRotationAngle + 'deg) ' + scaleString;\n        } else if (textRotation === 180) {\n          textDiv.style.left = (bounds.X - bounds.Width) * this.pdfViewerBase.getZoomFactor() + \"px\";\n          textDiv.style.top = (bounds.Y - bounds.Height) * this.pdfViewerBase.getZoomFactor() + \"px\";\n          textDiv.style.transform = 'rotate(' + textRotationAngle + 'deg) ' + scaleString;\n        } else if (textRotation === 270) {\n          textDiv.style.left = bounds.X * this.pdfViewerBase.getZoomFactor() + \"px\";\n          textDiv.style.top = (bounds.Y - bounds.Height) * this.pdfViewerBase.getZoomFactor() + \"px\";\n          textDiv.style.transform = 'rotate(' + textRotationAngle + 'deg) ' + scaleString;\n        } else {\n          textDiv.style.transform = 'rotate(180deg) ' + scaleString;\n        }\n      } else if (rotation === 3) {\n        var textRotationAngle = textRotation + 270;\n        if (textRotationAngle >= 360) {\n          textRotationAngle -= 360;\n        }\n        if (textRotation === 0) {\n          textDiv.style.transform = 'rotate(270deg) ' + scaleString;\n        } else if (textRotation === 90) {\n          textDiv.style.left = bounds.X * this.pdfViewerBase.getZoomFactor() + \"px\";\n          textDiv.style.top = (bounds.Y - bounds.Width) * this.pdfViewerBase.getZoomFactor() + \"px\";\n          textDiv.style.transform = 'rotate(' + textRotationAngle + 'deg) ' + scaleString;\n        } else if (textRotation === 180) {\n          textDiv.style.left = (bounds.X + bounds.Height) * this.pdfViewerBase.getZoomFactor() + \"px\";\n          textDiv.style.top = (bounds.Y - bounds.Width) * this.pdfViewerBase.getZoomFactor() + \"px\";\n          textDiv.style.transform = 'rotate(' + textRotationAngle + 'deg) ' + scaleString;\n        } else if (textRotation === 270) {\n          textDiv.style.left = (bounds.X + bounds.Height) * this.pdfViewerBase.getZoomFactor() + \"px\";\n          textDiv.style.top = bounds.Y * this.pdfViewerBase.getZoomFactor() + \"px\";\n          textDiv.style.transform = 'rotate(' + textRotationAngle + 'deg) ' + scaleString;\n        } else {\n          textDiv.style.transform = 'rotate(270deg) ' + scaleString;\n        }\n      }\n    } else {\n      if (rotation === 0) {\n        if (textRotation >= 0 && textRotation < 90) {\n          textDiv.style.transform = scaleString;\n        } else if (textRotation == 90 || textRotation == 270) {\n          if (textRotation == 270) {\n            textDiv.style.left = bounds.X * this.pdfViewerBase.getZoomFactor() + \"px\";\n            textDiv.style.top = (bounds.Y + bounds.Width) * this.pdfViewerBase.getZoomFactor() + \"px\";\n            textDiv.style.height = bounds.Height * this.pdfViewerBase.getZoomFactor() + \"px\";\n            textDiv.style.fontSize = bounds.Height * this.pdfViewerBase.getZoomFactor() + \"px\";\n          } else {\n            textDiv.style.left = (bounds.X + bounds.Width) * this.pdfViewerBase.getZoomFactor() + \"px\";\n            textDiv.style.top = bounds.Y * this.pdfViewerBase.getZoomFactor() + \"px\";\n            textDiv.style.height = bounds.Width * this.pdfViewerBase.getZoomFactor() + \"px\";\n            textDiv.style.fontSize = bounds.Width * this.pdfViewerBase.getZoomFactor() + \"px\";\n            textDiv.style.transformOrigin = '0% 0%';\n          }\n          textDiv.style.transform = 'rotate(' + textRotation + 'deg) ' + scaleString;\n        } else {\n          textDiv.style.transform = 'rotate(' + textRotation + 'deg) ' + scaleString;\n        }\n      } else if (rotation === 1) {\n        if (textRotation === 0) {\n          textDiv.style.transform = 'rotate(90deg) ' + scaleString;\n        } else if (textRotation === -90) {\n          textDiv.style.transform = scaleString;\n        } else {\n          textRotation = textRotation + 90;\n          textDiv.style.transform = 'rotate(' + textRotation + 'deg) ' + scaleString;\n        }\n      } else if (rotation === 2) {\n        if (textRotation === 0) {\n          textDiv.style.transform = 'rotate(180deg) ' + scaleString;\n        } else if (textRotation === 180) {\n          textDiv.style.transform = scaleString;\n        } else {\n          textDiv.style.transform = 'rotate(' + textRotation + 'deg) ' + scaleString;\n        }\n      } else if (rotation === 3) {\n        if (textRotation === 0) {\n          textDiv.style.transform = 'rotate(-90deg) ' + scaleString;\n        } else if (textRotation === 90) {\n          textDiv.style.transform = scaleString;\n        } else {\n          textDiv.style.transform = 'rotate(' + textRotation + 'deg) ' + scaleString;\n        }\n      }\n    }\n  };\n  TextLayer.prototype.setTextElementProperties = function (textDiv) {\n    textDiv.style.fontFamily = 'serif';\n    textDiv.style.transformOrigin = this.pdfViewerBase.clientSideRendering ? '0% 0%' : '0%';\n  };\n  /**\n   * @param {number} pageNumber - The pageNumber.\n   * @returns {void}\n   * @private\n   */\n  TextLayer.prototype.resizeTextContentsOnZoom = function (pageNumber) {\n    // eslint-disable-next-line max-len\n    var renderObject = window.sessionStorage.getItem(this.pdfViewerBase.getDocumentId() + '_' + pageNumber + '_' + this.getPreviousZoomFactor());\n    // eslint-disable-next-line\n    var textBounds = [];\n    var textContents = [];\n    // eslint-disable-next-line\n    var rotation;\n    if (renderObject) {\n      // eslint-disable-next-line\n      var data = JSON.parse(renderObject);\n      // eslint-disable-next-line\n      textBounds = data['textBounds'];\n      // eslint-disable-next-line\n      textContents = data['textContent'];\n      // eslint-disable-next-line\n      rotation = data['rotation'];\n    }\n    if (textBounds.length !== 0) {\n      this.textBoundsArray.push({\n        pageNumber: pageNumber,\n        textBounds: textBounds\n      });\n      this.resizeTextContents(pageNumber, textContents, textBounds, rotation);\n    } else {\n      // eslint-disable-next-line\n      var textElements = this.textBoundsArray.filter(function (obj) {\n        return obj.pageNumber === pageNumber;\n      });\n      if (textElements) {\n        if (textElements.length !== 0) {\n          // eslint-disable-next-line\n          textBounds = textElements[0]['textBounds'];\n          this.resizeTextContents(pageNumber, null, textBounds, rotation);\n        }\n      }\n    }\n  };\n  /**\n   * EJ2-855106- Optimize performance by eliminating unnecessary getBoundingClientRect usage in this method.\n   */\n  TextLayer.prototype.resizeExcessDiv = function (textLayer, textDiv) {\n    // EJ2-855106- Optimize performance by eliminating unnecessary getBoundingClientRect usage in this method.\n    // const textLayerPosition: ClientRect = textLayer.getBoundingClientRect();\n    // const textDivPosition: ClientRect = textDiv.getBoundingClientRect();\n    // // eslint-disable-next-line max-len\n    // if ((textDivPosition.width + textDivPosition.left) >= (textLayerPosition.width + textLayerPosition.left) || (textDivPosition.width > textLayerPosition.width)) {\n    //     // 'auto' width is set to reset the size of the div to its contents.\n    //     textDiv.style.width = 'auto';\n    //     // Client width gets reset by 'auto' width property which has the width of the content.\n    //     textDiv.style.width = textDiv.clientWidth + 'px';\n    // }\n  };\n  /**\n   * @private\n   * @param {boolean} isPinchZoomed - The isPinchZoomed.\n   * @returns {void}\n   */\n  TextLayer.prototype.clearTextLayers = function (isPinchZoomed) {\n    var lowerPageValue = this.pdfViewerBase.currentPageNumber - 3;\n    lowerPageValue = lowerPageValue > 0 ? lowerPageValue : 0;\n    var higherPageValue = this.pdfViewerBase.currentPageNumber + 1;\n    higherPageValue = higherPageValue < this.pdfViewerBase.pageCount ? higherPageValue : this.pdfViewerBase.pageCount - 1;\n    var textLayers = document.querySelectorAll('div[id*=\"' + this.pdfViewer.element.id + '_textLayer_\"]');\n    for (var i = 0; i < textLayers.length; i++) {\n      textLayers[parseInt(i.toString(), 10)].style.display = 'block';\n      if (this.pdfViewerBase.getMagnified() && (this.getTextSelectionStatus() || this.getTextSearchStatus())) {\n        // eslint-disable-next-line radix\n        var pageNumber = parseInt(textLayers[parseInt(i.toString(), 10)].id.split('_textLayer_')[1]);\n        if (!(lowerPageValue + 1 <= pageNumber && pageNumber <= higherPageValue - 1)) {\n          this.removeElement(textLayers[parseInt(i.toString(), 10)], isPinchZoomed);\n        }\n      } else if (this.pdfViewerBase.getPinchZoomed()) {\n        this.removeElement(textLayers[parseInt(i.toString(), 10)], isPinchZoomed);\n      } else {\n        this.removeElement(textLayers[parseInt(i.toString(), 10)], isPinchZoomed);\n      }\n    }\n  };\n  TextLayer.prototype.removeElement = function (element, isPinchZoomed) {\n    if (isPinchZoomed) {\n      this.removeForeignObjects(element);\n    } else {\n      if (Browser.isIE) {\n        if (element.parentElement) {\n          element.parentElement.removeChild(element);\n        } else if (element.parentNode) {\n          element.parentNode.removeChild(element);\n        }\n      } else {\n        element.remove();\n      }\n    }\n  };\n  TextLayer.prototype.removeForeignObjects = function (element) {\n    // eslint-disable-next-line\n    var childElement = element.getElementsByClassName('foreign-object');\n    if (childElement) {\n      for (var i = 0; i < childElement.length; i++) {\n        if (Browser.isDevice) {\n          //Remove the outer div element of checkbox and other formfields in pichzoom\n          if (childElement[parseInt(i.toString(), 10)].parentElement.className === 'e-pv-text-layer' && childElement[0].parentElement.className !== 'e-pv-checkbox-outer-div') {\n            element.removeChild(childElement[0]);\n          } else if (childElement[parseInt(i.toString(), 10)].parentElement.className === 'e-pv-checkbox-outer-div') {\n            var outerDivParent = document.getElementById(childElement[0].parentElement.id);\n            if (outerDivParent) {\n              outerDivParent.parentElement.remove();\n            }\n          }\n        } else {\n          if (childElement[parseInt(i.toString(), 10)].parentElement.className === 'e-pv-text-layer') {\n            element.removeChild(childElement[0]);\n          }\n        }\n      }\n    }\n  };\n  /**\n   * @param pageNumber\n   * @param divId\n   * @param fromOffset\n   * @param toOffset\n   * @param textString\n   * @param className\n   * @private\n   */\n  // eslint-disable-next-line max-len\n  TextLayer.prototype.convertToSpan = function (pageNumber, divId, fromOffset, toOffset, textString, className, isRTLText) {\n    var textDiv = this.pdfViewerBase.getElement('_text_' + pageNumber + '_' + divId);\n    var textContent = textString.substring(fromOffset, toOffset);\n    var node = document.createTextNode(textContent);\n    if (className) {\n      var spanElement = createElement('span');\n      spanElement.className = className + ' e-pv-text';\n      if (this.pdfViewerBase.clientSideRendering && isRTLText) {\n        if (toOffset === textString.length) {\n          spanElement.style.left = 0 + 'px';\n          spanElement.style.top = 0 + 'px';\n        } else {\n          if (textDiv.style.direction == 'rtl') {\n            var currentText = textDiv.textContent;\n            textDiv.textContent = textString.substring(toOffset, textString.length);\n            var textBounds = textDiv.getBoundingClientRect();\n            spanElement.style.left = textBounds.width + 'px';\n            spanElement.style.top = 0 + 'px';\n            textDiv.textContent = currentText;\n          }\n        }\n      }\n      spanElement.appendChild(node);\n      textDiv.appendChild(spanElement);\n    } else {\n      textDiv.appendChild(node);\n    }\n  };\n  /**\n   * @param startPage\n   * @param endPage\n   * @param anchorOffsetDiv\n   * @param focusOffsetDiv\n   * @param anchorOffset\n   * @param focusOffset\n   * @private\n   */\n  // eslint-disable-next-line max-len\n  TextLayer.prototype.applySpanForSelection = function (startPage, endPage, anchorOffsetDiv, focusOffsetDiv, anchorOffset, focusOffset) {\n    if (this.pdfViewer.textSelectionModule) {\n      for (var i = startPage; i <= endPage; i++) {\n        var isRTLText = void 0;\n        if (this.pdfViewerBase.clientSideRendering) {\n          var storedData = JSON.parse(this.pdfViewerBase.pageTextDetails[this.pdfViewerBase.documentId + '_' + i + '_textDetails']);\n          var pageText = storedData[\"pageText\"];\n          isRTLText = this.pdfViewerBase.checkIsRtlText(pageText);\n        }\n        var startId = void 0;\n        var endId = void 0;\n        // eslint-disable-next-line\n        var textDivs = this.pdfViewerBase.getElement('_textLayer_' + i).childNodes;\n        if (i === startPage) {\n          startId = anchorOffsetDiv;\n          endId = textDivs.length - 1;\n        } else if (i === endPage) {\n          startId = 0;\n          endId = focusOffsetDiv;\n        } else {\n          startId = 0;\n          endId = textDivs.length - 1;\n        }\n        if (startPage === endPage) {\n          startId = anchorOffsetDiv;\n          endId = focusOffsetDiv;\n        }\n        for (var j = startId; j <= endId; j++) {\n          var textDiv = this.pdfViewerBase.getElement('_text_' + i + '_' + j);\n          var initId = void 0;\n          var lastId = void 0;\n          var length_1 = void 0;\n          if (textDiv && textDiv.textContent) {\n            length_1 = textDiv.textContent.length;\n            var textContent = textDiv.textContent;\n            textDiv.textContent = '';\n            if (j === startId) {\n              if (i === startPage) {\n                initId = anchorOffset;\n              } else {\n                initId = 0;\n              }\n              lastId = length_1;\n              this.convertToSpan(i, j, 0, initId, textContent, null, isRTLText);\n            } else if (j === endId && i === endPage) {\n              initId = 0;\n              lastId = focusOffset;\n            } else {\n              initId = 0;\n              lastId = length_1;\n            }\n            if (startId === endId && startPage === endPage) {\n              initId = anchorOffset;\n              lastId = focusOffset;\n            }\n            this.convertToSpan(i, j, initId, lastId, textContent, 'e-pv-maintaincontent', isRTLText);\n            if (j === endId && i === endPage) {\n              this.convertToSpan(i, j, lastId, textContent.length, textContent, null, isRTLText);\n            }\n          }\n        }\n      }\n    }\n  };\n  /**\n   * @private\n   * @returns {void}\n   */\n  TextLayer.prototype.clearDivSelection = function () {\n    var textLayers = document.querySelectorAll('div[id*=\"' + this.pdfViewer.element.id + '_textLayer_\"]');\n    for (var i = 0; i < textLayers.length; i++) {\n      var childNodes = textLayers[parseInt(i.toString(), 10)].childNodes;\n      for (var j = 0; j < childNodes.length; j++) {\n        var textDiv = childNodes[parseInt(j.toString(), 10)];\n        // eslint-disable-next-line max-len\n        if (textDiv.className !== 'e-pdfviewer-formFields' && textDiv.className !== 'e-pdfviewer-signatureformfields' && textDiv.className !== 'e-pdfviewer-signatureformfields-signature') {\n          var textContent = textDiv.textContent;\n          // eslint-disable-next-line max-len\n          if (textDiv.childNodes.length > 1 || textDiv.childNodes.length === 1 && textDiv.childNodes[0].tagName === 'SPAN') {\n            textDiv.textContent = '';\n            textDiv.textContent = textContent;\n          }\n        }\n      }\n    }\n  };\n  // eslint-disable-next-line\n  TextLayer.prototype.setStyleToTextDiv = function (textDiv, left, top, bottom, width, height, rotation) {\n    textDiv.style.left = left * this.pdfViewerBase.getZoomFactor() + 'px';\n    textDiv.style.top = top * this.pdfViewerBase.getZoomFactor() + 'px';\n    var textHeight;\n    if (rotation === 90 || this.pdfViewerBase.clientSideRendering && rotation === 270) {\n      textHeight = width * this.pdfViewerBase.getZoomFactor();\n    } else {\n      textHeight = height * this.pdfViewerBase.getZoomFactor();\n    }\n    textDiv.style.height = textHeight + 'px';\n    textDiv.style.fontSize = textHeight + 'px';\n  };\n  TextLayer.prototype.getTextSelectionStatus = function () {\n    if (this.pdfViewer.textSelectionModule) {\n      return this.pdfViewer.textSelectionModule.isTextSelection;\n    } else {\n      return false;\n    }\n  };\n  /**\n   * @param {boolean} isAdd - The isAdd.\n   * @returns {void}\n   * @private\n   */\n  TextLayer.prototype.modifyTextCursor = function (isAdd) {\n    var textLayerList = document.querySelectorAll('div[id*=\"' + this.pdfViewer.element.id + '_textLayer_\"]');\n    for (var i = 0; i < textLayerList.length; i++) {\n      var childNodes = textLayerList[parseInt(i.toString(), 10)].childNodes;\n      for (var j = 0; j < childNodes.length; j++) {\n        var textElement = childNodes[parseInt(j.toString(), 10)];\n        // eslint-disable-next-line max-len\n        if (isAdd && textElement.className !== 'e-pdfviewer-formFields' && textElement.className !== 'e-pdfviewer-signatureformfields' && textElement.className !== 'e-pdfviewer-signatureformfields-signature') {\n          textElement.classList.add('e-pv-cursor');\n        } else {\n          textElement.classList.remove('e-pv-cursor');\n        }\n      }\n    }\n  };\n  /**\n   * @param {Selection} selection - The Selection.\n   * @returns {boolean} - Returns true or false.\n   * @private\n   */\n  TextLayer.prototype.isBackWardSelection = function (selection) {\n    var position = selection.anchorNode.compareDocumentPosition(selection.focusNode);\n    var backward = false;\n    if (!position && selection.anchorOffset > selection.focusOffset || position === Node.DOCUMENT_POSITION_PRECEDING) {\n      backward = true;\n    }\n    return backward;\n  };\n  /**\n   * @param {Node} element - The element.\n   * @returns {number} - Returns number.\n   * @private\n   */\n  TextLayer.prototype.getPageIndex = function (element) {\n    var pageId;\n    // eslint-disable-next-line\n    var parentElement = element.parentElement;\n    if (!parentElement) {\n      parentElement = element.parentNode;\n    }\n    if (parentElement.className === 'e-pv-text-layer') {\n      // eslint-disable-next-line radix\n      pageId = parseInt(element.id.split('_text_')[1]);\n    } else {\n      // eslint-disable-next-line radix\n      pageId = parseInt(parentElement.id.split('_text_')[1]);\n    }\n    return pageId;\n  };\n  /**\n   * @param {Node} element - The element.\n   * @param {number} pageIndex - The pageIndex.\n   * @returns {number} - Returns number.\n   * @private\n   */\n  TextLayer.prototype.getTextIndex = function (element, pageIndex) {\n    var textIndex;\n    // eslint-disable-next-line\n    var parentElement = element.parentElement;\n    if (!parentElement) {\n      parentElement = element.parentNode;\n    }\n    if (parentElement.className === 'e-pv-text-layer') {\n      // eslint-disable-next-line radix\n      textIndex = parseInt(element.id.split('_text_' + pageIndex + '_')[1]);\n    } else {\n      // eslint-disable-next-line radix\n      textIndex = parseInt(parentElement.id.split('_text_' + pageIndex + '_')[1]);\n    }\n    return textIndex;\n  };\n  TextLayer.prototype.getPreviousZoomFactor = function () {\n    if (this.pdfViewer.magnificationModule) {\n      return this.pdfViewer.magnificationModule.previousZoomFactor;\n    } else {\n      return 1;\n    }\n  };\n  /**\n   * @private\n   * @returns {boolean} - Returns true or false.\n   */\n  TextLayer.prototype.getTextSearchStatus = function () {\n    if (this.pdfViewer.textSearchModule) {\n      return this.pdfViewer.textSearchModule.isTextSearch;\n    } else {\n      return false;\n    }\n  };\n  /**\n   * @param {string} text - The text.\n   * @returns {void}\n   * @private\n   */\n  TextLayer.prototype.createNotificationPopup = function (text) {\n    var _this = this;\n    if (!this.isMessageBoxOpen) {\n      if (!isBlazor()) {\n        // eslint-disable-next-line max-len\n        var popupElement_1 = createElement('div', {\n          id: this.pdfViewer.element.id + '_notify',\n          className: 'e-pv-notification-popup'\n        });\n        this.pdfViewerBase.viewerContainer.appendChild(popupElement_1);\n        this.notifyDialog = new Dialog({\n          showCloseIcon: true,\n          closeOnEscape: false,\n          isModal: true,\n          header: this.pdfViewer.localeObj.getConstant('PdfViewer'),\n          buttons: [{\n            buttonModel: {\n              content: this.pdfViewer.localeObj.getConstant('OK'),\n              isPrimary: true\n            },\n            click: this.closeNotification.bind(this)\n          }],\n          // eslint-disable-next-line max-len\n          content: '<div class=\"e-pv-notification-popup-content\" tabindex = \"0\">' + text + '</div>',\n          target: this.pdfViewer.element,\n          beforeClose: function () {\n            _this.notifyDialog.destroy();\n            if (_this.pdfViewer.element) {\n              try {\n                _this.pdfViewer.element.removeChild(popupElement_1);\n              } catch (error) {\n                popupElement_1.parentElement.removeChild(popupElement_1);\n              }\n            }\n            if (_this.pdfViewer.textSearchModule) {\n              _this.pdfViewer.textSearch.isMessagePopupOpened = false;\n            }\n            _this.isMessageBoxOpen = false;\n          }\n        });\n        if (this.pdfViewer.enableRtl) {\n          this.notifyDialog.enableRtl = true;\n        }\n        this.notifyDialog.appendTo(popupElement_1);\n        this.isMessageBoxOpen = true;\n      } else {\n        // eslint-disable-next-line\n        var notificationElement = document.getElementById(this.pdfViewer.element.id + '_notification_popup_content');\n        if (notificationElement) {\n          notificationElement.textContent = text;\n          notificationElement.innerHTML = text;\n        }\n        if (this.pdfViewer.textSearchModule) {\n          this.pdfViewer.textSearch.isMessagePopupOpened = false;\n        }\n        this.pdfViewer._dotnetInstance.invokeMethodAsync('OpenNotificationPopup', text);\n      }\n    }\n  };\n  return TextLayer;\n}();\nexport { TextLayer };","map":{"version":3,"names":["createElement","isNullOrUndefined","Browser","isBlazor","Dialog","TextLayer","pdfViewer","pdfViewerBase","_this","textBoundsArray","characterBound","closeNotification","notifyDialog","hide","prototype","addTextLayer","pageNumber","pageWidth","pageHeight","pageDiv","textDiv","document","getElementById","element","id","textLayer","className","style","width","height","appendChild","applyElementStyles","renderTextContents","textContents","textBounds","rotation","rtldoc","canvasElement","isRTLText","clientSideRendering","linebounds","lineContent","yValue","heightValue","length","Width","Y","Height","idNumber","childNodes","i","includes","push","parseInt","toString","j","bounds","attrs","textContent","replace","newLine","whiteSpace","checkIsRtlText","direction","X","Rotation","setStyleToTextDiv","Bottom","setTextElementProperties","context","getContext","font","fontSize","fontFamily","contextWidth","measureText","scale","getZoomFactor","applyTextRotation","resizeExcessDiv","textSelectionModule","enableTextSelection","isTextSelectionDisabled","classList","add","resizeTextContents","isTextSearch","getElement","parentElement","removeChild","textSearch","resizeSearchElements","textRotation","scaleString","transform","left","top","textRotationAngle","transformOrigin","resizeTextContentsOnZoom","renderObject","window","sessionStorage","getItem","getDocumentId","getPreviousZoomFactor","data","JSON","parse","textElements","filter","obj","clearTextLayers","isPinchZoomed","lowerPageValue","currentPageNumber","higherPageValue","pageCount","textLayers","querySelectorAll","display","getMagnified","getTextSelectionStatus","getTextSearchStatus","split","removeElement","getPinchZoomed","removeForeignObjects","isIE","parentNode","remove","childElement","getElementsByClassName","isDevice","outerDivParent","convertToSpan","divId","fromOffset","toOffset","textString","substring","node","createTextNode","spanElement","currentText","getBoundingClientRect","applySpanForSelection","startPage","endPage","anchorOffsetDiv","focusOffsetDiv","anchorOffset","focusOffset","storedData","pageTextDetails","documentId","pageText","startId","endId","textDivs","initId","lastId","length_1","clearDivSelection","tagName","bottom","textHeight","isTextSelection","modifyTextCursor","isAdd","textLayerList","textElement","isBackWardSelection","selection","position","anchorNode","compareDocumentPosition","focusNode","backward","Node","DOCUMENT_POSITION_PRECEDING","getPageIndex","pageId","getTextIndex","pageIndex","textIndex","magnificationModule","previousZoomFactor","textSearchModule","createNotificationPopup","text","isMessageBoxOpen","popupElement_1","viewerContainer","showCloseIcon","closeOnEscape","isModal","header","localeObj","getConstant","buttons","buttonModel","content","isPrimary","click","bind","target","beforeClose","destroy","error","isMessagePopupOpened","enableRtl","appendTo","notificationElement","innerHTML","_dotnetInstance","invokeMethodAsync"],"sources":["/Users/saleem/Desktop/KClient/Web App/Ver_3.6/User Interface/website_Source files/node_modules/@syncfusion/ej2-pdfviewer/src/pdfviewer/base/text-layer.js"],"sourcesContent":["import { createElement, isNullOrUndefined, Browser, isBlazor } from '@syncfusion/ej2-base';\nimport { Dialog } from '@syncfusion/ej2-popups';\n/**\n * TextLayer module is used to handle the text content on the control.\n *\n * @hidden\n */\nvar TextLayer = /** @class */ (function () {\n    /**\n     * @param {PdfViewer} pdfViewer - The PdfViewer.\n     * @param {PdfViewerBase} pdfViewerBase - The PdfViewerBase.\n     * @private\n     */\n    function TextLayer(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        // eslint-disable-next-line\n        this.textBoundsArray = [];\n        /**\n         * @private\n         */\n        // eslint-disable-next-line\n        this.characterBound = [];\n        /**\n         * @returns {void}\n         */\n        this.closeNotification = function () {\n            _this.notifyDialog.hide();\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @param {number} pageNumber - The pageNumber.\n     * @param {number} pageWidth - The pageWidth.\n     * @param {number} pageHeight - The pageHeight.\n     * @param {HTMLElement} pageDiv - The pageDiv.\n     * @returns {HTMLElement} - The HTMLElement.\n     * @private\n     */\n    TextLayer.prototype.addTextLayer = function (pageNumber, pageWidth, pageHeight, pageDiv) {\n        var textDiv = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageNumber);\n        var textLayer;\n        if (!textDiv) {\n            textLayer = createElement('div', { id: this.pdfViewer.element.id + '_textLayer_' + pageNumber, className: 'e-pv-text-layer' });\n            textLayer.style.width = pageWidth + 'px';\n            textLayer.style.height = pageHeight + 'px';\n            if (pageDiv) {\n                pageDiv.appendChild(textLayer);\n            }\n        }\n        this.pdfViewerBase.applyElementStyles(textLayer, pageNumber);\n        return textLayer;\n    };\n    /**\n     * @param {number} pageNumber - The pageNumber.\n     * @param {any} textContents - The textContents.\n     * @param {any} textBounds - The textBounds.\n     * @param {any} rotation - The rotation.\n     * @returns {void}\n     * @private\n     */\n    // eslint-disable-next-line\n    TextLayer.prototype.renderTextContents = function (pageNumber, textContents, textBounds, rotation, rtldoc) {\n        var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageNumber);\n        var canvasElement = createElement(\"canvas\");\n        var isRTLText;\n        if (this.pdfViewerBase.clientSideRendering) {\n            isRTLText = false;\n        }\n        var linebounds = [];\n        var lineContent = [];\n        var yValue;\n        var heightValue;\n        if (textBounds.length > 1) {\n            if (textBounds[0].Width === 0 && textBounds.length > 2) {\n                yValue = textBounds[1].Y;\n                heightValue = textBounds[1].Height;\n            }\n            else {\n                yValue = textBounds[0].Y;\n                heightValue = textBounds[0].Height;\n            }\n        }\n        var idNumber = 0;\n        if (canvasElement && textLayer && textLayer.childNodes.length === 0) {\n            for (var i = 0; i < textContents.length; i++) {\n                // eslint-disable-next-line\n                if ((!(textContents[i].includes(\"\\r\\n\")) && !(textContents[i].includes(\"\\u0002\"))) && i != textBounds.length - 1 && rotation === 0 && !rtldoc) {\n                    linebounds.push(textBounds[parseInt(i.toString(), 10)]);\n                    lineContent.push(textContents[parseInt(i.toString(), 10)]);\n                    if (yValue > textBounds[parseInt(i.toString(), 10)].Y && textBounds[parseInt(i.toString(), 10)].Width !== 0) {\n                        yValue = textBounds[parseInt(i.toString(), 10)].Y;\n                    }\n                    if (heightValue < textBounds[parseInt(i.toString(), 10)].Height && textBounds[parseInt(i.toString(), 10)].Width !== 0) {\n                        heightValue = textBounds[parseInt(i.toString(), 10)].Height;\n                    }\n                }\n                else {\n                    linebounds.push(textBounds[parseInt(i.toString(), 10)]);\n                    lineContent.push(textContents[parseInt(i.toString(), 10)]);\n                    if (yValue > textBounds[parseInt(i.toString(), 10)].Y && textBounds[parseInt(i.toString(), 10)].Width !== 0) {\n                        yValue = textBounds[parseInt(i.toString(), 10)].Y;\n                    }\n                    if (heightValue < textBounds[parseInt(i.toString(), 10)].Height && textBounds[parseInt(i.toString(), 10)].Width !== 0) {\n                        heightValue = textBounds[parseInt(i.toString(), 10)].Height;\n                    }\n                    for (var j = 0; j < linebounds.length; j++) {\n                        var bounds = linebounds[parseInt(j.toString(), 10)];\n                        // eslint-disable-next-line max-len\n                        var textDiv = createElement('div', { id: this.pdfViewer.element.id + '_text_' + pageNumber + '_' + idNumber, className: 'e-pv-text', attrs: { 'tabindex': '-1' } });\n                        var textContent = lineContent[parseInt(j.toString(), 10)];\n                        if (textContent === \" \" && j != linebounds.length - 1 && j != 0) {\n                            bounds.Height = linebounds[j - 1].Height;\n                            bounds.Y = linebounds[j - 1].Y;\n                        }\n                        textDiv.textContent = textContent.replace(/&nbsp;/g, ' ');\n                        // eslint-disable-next-line\n                        var newLine = lineContent[j].replace(/  +/g, ' ');\n                        if (newLine !== ' ') {\n                            textDiv.style.whiteSpace = 'pre';\n                        }\n                        if (this.pdfViewerBase.clientSideRendering) {\n                            if (textContent === ' ') {\n                                textDiv.style.whiteSpace = 'pre';\n                            }\n                            if (!isNullOrUndefined(textDiv.textContent) && textContent !== \" \") {\n                                isRTLText = this.pdfViewerBase.checkIsRtlText(textDiv.textContent);\n                                textDiv.style.direction = isRTLText ? 'rtl' : 'ltr';\n                            }\n                            else {\n                                textDiv.style.direction = isRTLText ? 'rtl' : 'ltr';\n                            }\n                        }\n                        if (bounds.Width === 0 && j != linebounds.length - 1 && j != 0) {\n                            if (linebounds[j + 1].X - (linebounds[j - 1].X + linebounds[j - 1].Width) < 30 && (!lineContent[j - 1].includes(\"\\r\\n\") && !(textContents[parseInt(j.toString(), 10)].includes(\"\\u0002\")))) {\n                                bounds.Width = linebounds[j + 1].X - (linebounds[j - 1].X + linebounds[j - 1].Width);\n                                bounds.X = linebounds[j - 1].X + linebounds[j - 1].Width;\n                                if (bounds.Width < 0) {\n                                    bounds.Width = 0;\n                                }\n                                else {\n                                    textDiv.style.whiteSpace = 'pre';\n                                }\n                            }\n                        }\n                        if ((j != 0 || linebounds.length - 1 === 0 || (bounds.Y - yValue) > 20 && bounds.Width != 0) && idNumber != 0 && ((textBounds[idNumber - 1].Y - textBounds[parseInt(idNumber.toString(), 10)].Y) > 11 || ((textBounds[parseInt(idNumber.toString(), 10)].Y - textBounds[idNumber - 1].Y) > 11)) && lineContent[parseInt(j.toString(), 10)] != \" \") {\n                            yValue = linebounds[parseInt(j.toString(), 10)].Y;\n                            heightValue = linebounds[parseInt(j.toString(), 10)].Height;\n                        }\n                        if (bounds) {\n                            if (bounds.Rotation !== 270) {\n                                bounds.Y = yValue;\n                                bounds.Height = heightValue;\n                            }\n                            this.setStyleToTextDiv(textDiv, bounds.X, bounds.Y, bounds.Bottom, bounds.Width, bounds.Height, bounds.Rotation);\n                        }\n                        this.setTextElementProperties(textDiv);\n                        var context = canvasElement.getContext('2d');\n                        context.font = textDiv.style.fontSize + ' ' + textDiv.style.fontFamily;\n                        var contextWidth = context.measureText(lineContent[parseInt(j.toString(), 10)].replace(/(\\r\\n|\\n|\\r)/gm, '')).width;\n                        if (bounds) {\n                            var scale = void 0;\n                            if (bounds.Rotation === 90 || (this.pdfViewerBase.clientSideRendering && bounds.Rotation === 270)) {\n                                scale = bounds.Height * this.pdfViewerBase.getZoomFactor() / contextWidth;\n                            }\n                            else {\n                                scale = bounds.Width * this.pdfViewerBase.getZoomFactor() / contextWidth;\n                            }\n                            this.applyTextRotation(scale, textDiv, rotation, bounds.Rotation, bounds);\n                        }\n                        textLayer.appendChild(textDiv);\n                        // EJ2-855106- Optimize performance by eliminating unnecessary getBoundingClientRect usage in this method.\n                        this.resizeExcessDiv(textLayer, textDiv);\n                        // eslint-disable-next-line max-len\n                        if (this.pdfViewer.textSelectionModule && this.pdfViewer.enableTextSelection && !this.pdfViewerBase.isTextSelectionDisabled && textDiv.className !== 'e-pdfviewer-formFields'\n                            && textDiv.className !== 'e-pdfviewer-signatureformfields' && textDiv.className !== 'e-pdfviewer-signatureformfields-signature') {\n                            textDiv.classList.add('e-pv-cursor');\n                        }\n                        idNumber++;\n                    }\n                    linebounds = [];\n                    lineContent = [];\n                    if (i < textBounds.length - 1) {\n                        if (textBounds[i + 1].Width === 0 && !isNullOrUndefined(textBounds[i + 2])) {\n                            yValue = textBounds[i + 2].Y;\n                            heightValue = textBounds[i + 2].Height;\n                        }\n                        else {\n                            yValue = textBounds[i + 1].Y;\n                            heightValue = textBounds[i + 1].Height;\n                        }\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @param pageNumber\n     * @param textContents\n     * @param textBounds\n     * @param rotation\n     * @param isTextSearch\n     * @param pageNumber\n     * @param textContents\n     * @param textBounds\n     * @param rotation\n     * @param isTextSearch\n     * @private\n     */\n    // eslint-disable-next-line\n    TextLayer.prototype.resizeTextContents = function (pageNumber, textContents, textBounds, rotation, isTextSearch) {\n        var textLayer = this.pdfViewerBase.getElement('_textLayer_' + pageNumber);\n        var canvasElement = createElement(\"canvas\");\n        if (canvasElement) {\n            for (var i = 0; i < textLayer.childNodes.length; i++) {\n                // eslint-disable-next-line\n                var bounds = void 0;\n                var textDiv = this.pdfViewerBase.getElement('_text_' + pageNumber + '_' + i);\n                if (isNullOrUndefined(textDiv)) {\n                    break;\n                }\n                if (textBounds) {\n                    bounds = textBounds[parseInt(i.toString(), 10)];\n                    if (bounds) {\n                        this.setStyleToTextDiv(textDiv, bounds.X, bounds.Y, bounds.Bottom, bounds.Width, bounds.Height, bounds.Rotation);\n                    }\n                }\n                this.setTextElementProperties(textDiv);\n                var context = canvasElement.getContext('2d');\n                context.font = textDiv.style.fontSize + ' ' + textDiv.style.fontFamily;\n                var contextWidth = void 0;\n                if (textContents) {\n                    var textContent = textContents[parseInt(i.toString(), 10)];\n                    if (textContent) {\n                        contextWidth = context.measureText(textContent.replace(/(\\r\\n|\\n|\\r)/gm, '')).width;\n                    }\n                }\n                else {\n                    contextWidth = context.measureText(textDiv.textContent.replace(/(\\r\\n|\\n|\\r)/gm, '')).width;\n                }\n                if (bounds) {\n                    var scale = void 0;\n                    if (bounds.Rotation === 90 || (this.pdfViewerBase.clientSideRendering && bounds.Rotation === 270)) {\n                        scale = bounds.Height * this.pdfViewerBase.getZoomFactor() / contextWidth;\n                    }\n                    else {\n                        scale = bounds.Width * this.pdfViewerBase.getZoomFactor() / contextWidth;\n                    }\n                    this.applyTextRotation(scale, textDiv, rotation, bounds.Rotation, bounds);\n                }\n                // EJ2-855106- Optimize performance by eliminating unnecessary getBoundingClientRect usage in this method.\n                this.resizeExcessDiv(textLayer, textDiv);\n            }\n        }\n        else {\n            textLayer.parentElement.removeChild(textLayer);\n        }\n        if (this.pdfViewer.textSearch) {\n            if (!isTextSearch) {\n                this.pdfViewer.textSearch.resizeSearchElements(pageNumber);\n            }\n        }\n    };\n    TextLayer.prototype.applyTextRotation = function (scale, textDiv, rotation, textRotation, bounds) {\n        var scaleString = 'scaleX(' + scale + ')';\n        if (this.pdfViewerBase.clientSideRendering) {\n            if (rotation === 0) {\n                if (textRotation === 0) {\n                    textDiv.style.transform = scaleString;\n                }\n                else if (textRotation === 90) {\n                    textDiv.style.left = (bounds.X + bounds.Width) * this.pdfViewerBase.getZoomFactor() + \"px\";\n                    textDiv.style.top = bounds.Y * this.pdfViewerBase.getZoomFactor() + \"px\";\n                    textDiv.style.transform = 'rotate(' + textRotation + 'deg) ' + scaleString;\n                }\n                else if (textRotation === 180) {\n                    textDiv.style.left = (bounds.X + bounds.Width) * this.pdfViewerBase.getZoomFactor() + \"px\";\n                    textDiv.style.top = (bounds.Y + bounds.Height) * this.pdfViewerBase.getZoomFactor() + \"px\";\n                    textDiv.style.transform = 'rotate(' + textRotation + 'deg) ' + scaleString;\n                }\n                else if (textRotation === 270) {\n                    textDiv.style.left = bounds.X * this.pdfViewerBase.getZoomFactor() + \"px\";\n                    textDiv.style.top = (bounds.Y + bounds.Height) * this.pdfViewerBase.getZoomFactor() + \"px\";\n                    textDiv.style.transform = 'rotate(' + textRotation + 'deg) ' + scaleString;\n                }\n                else {\n                    textDiv.style.transform = scaleString;\n                }\n            }\n            else if (rotation === 1) {\n                var textRotationAngle = textRotation + 90;\n                if (textRotationAngle >= 360) {\n                    textRotationAngle -= 360;\n                }\n                if (textRotation === 0) {\n                    textDiv.style.transform = 'rotate(90deg) ' + scaleString;\n                }\n                else if (textRotation === 90) {\n                    textDiv.style.left = bounds.X * this.pdfViewerBase.getZoomFactor() + \"px\";\n                    textDiv.style.top = (bounds.Y + bounds.Width) * this.pdfViewerBase.getZoomFactor() + \"px\";\n                    textDiv.style.transform = 'rotate(' + textRotationAngle + 'deg) ' + scaleString;\n                }\n                else if (textRotation === 180) {\n                    textDiv.style.left = (bounds.X - bounds.Height) * this.pdfViewerBase.getZoomFactor() + \"px\";\n                    textDiv.style.top = (bounds.Y + bounds.Width) * this.pdfViewerBase.getZoomFactor() + \"px\";\n                    textDiv.style.transform = 'rotate(' + textRotationAngle + 'deg) ' + scaleString;\n                }\n                else if (textRotation === 270) {\n                    textDiv.style.left = (bounds.X - bounds.Height) * this.pdfViewerBase.getZoomFactor() + \"px\";\n                    textDiv.style.top = (bounds.Y) * this.pdfViewerBase.getZoomFactor() + \"px\";\n                    textDiv.style.transform = 'rotate(' + textRotationAngle + 'deg) ' + scaleString;\n                }\n                else {\n                    textDiv.style.transform = 'rotate(90deg) ' + scaleString;\n                }\n            }\n            else if (rotation === 2) {\n                var textRotationAngle = textRotation + 180;\n                if (textRotationAngle >= 360) {\n                    textRotationAngle -= 360;\n                }\n                if (textRotation === 0) {\n                    textDiv.style.transform = 'rotate(180deg) ' + scaleString;\n                }\n                else if (textRotation === 90) {\n                    textDiv.style.left = (bounds.X - bounds.Width) * this.pdfViewerBase.getZoomFactor() + \"px\";\n                    textDiv.style.top = bounds.Y * this.pdfViewerBase.getZoomFactor() + \"px\";\n                    textDiv.style.transform = 'rotate(' + (textRotationAngle) + 'deg) ' + scaleString;\n                }\n                else if (textRotation === 180) {\n                    textDiv.style.left = (bounds.X - bounds.Width) * this.pdfViewerBase.getZoomFactor() + \"px\";\n                    textDiv.style.top = (bounds.Y - bounds.Height) * this.pdfViewerBase.getZoomFactor() + \"px\";\n                    textDiv.style.transform = 'rotate(' + (textRotationAngle) + 'deg) ' + scaleString;\n                }\n                else if (textRotation === 270) {\n                    textDiv.style.left = bounds.X * this.pdfViewerBase.getZoomFactor() + \"px\";\n                    textDiv.style.top = (bounds.Y - bounds.Height) * this.pdfViewerBase.getZoomFactor() + \"px\";\n                    textDiv.style.transform = 'rotate(' + (textRotationAngle) + 'deg) ' + scaleString;\n                }\n                else {\n                    textDiv.style.transform = 'rotate(180deg) ' + scaleString;\n                }\n            }\n            else if (rotation === 3) {\n                var textRotationAngle = textRotation + 270;\n                if (textRotationAngle >= 360) {\n                    textRotationAngle -= 360;\n                }\n                if (textRotation === 0) {\n                    textDiv.style.transform = 'rotate(270deg) ' + scaleString;\n                }\n                else if (textRotation === 90) {\n                    textDiv.style.left = bounds.X * this.pdfViewerBase.getZoomFactor() + \"px\";\n                    textDiv.style.top = (bounds.Y - bounds.Width) * this.pdfViewerBase.getZoomFactor() + \"px\";\n                    textDiv.style.transform = 'rotate(' + (textRotationAngle) + 'deg) ' + scaleString;\n                }\n                else if (textRotation === 180) {\n                    textDiv.style.left = (bounds.X + bounds.Height) * this.pdfViewerBase.getZoomFactor() + \"px\";\n                    textDiv.style.top = (bounds.Y - bounds.Width) * this.pdfViewerBase.getZoomFactor() + \"px\";\n                    textDiv.style.transform = 'rotate(' + (textRotationAngle) + 'deg) ' + scaleString;\n                }\n                else if (textRotation === 270) {\n                    textDiv.style.left = (bounds.X + bounds.Height) * this.pdfViewerBase.getZoomFactor() + \"px\";\n                    textDiv.style.top = (bounds.Y) * this.pdfViewerBase.getZoomFactor() + \"px\";\n                    textDiv.style.transform = 'rotate(' + (textRotationAngle) + 'deg) ' + scaleString;\n                }\n                else {\n                    textDiv.style.transform = 'rotate(270deg) ' + scaleString;\n                }\n            }\n        }\n        else {\n            if (rotation === 0) {\n                if ((textRotation >= 0 && textRotation < 90)) {\n                    textDiv.style.transform = scaleString;\n                }\n                else if ((textRotation == 90) || (textRotation == 270)) {\n                    if ((textRotation == 270)) {\n                        textDiv.style.left = (bounds.X * this.pdfViewerBase.getZoomFactor()) + \"px\";\n                        textDiv.style.top = ((bounds.Y + bounds.Width) * this.pdfViewerBase.getZoomFactor()) + \"px\";\n                        textDiv.style.height = (bounds.Height * this.pdfViewerBase.getZoomFactor()) + \"px\";\n                        textDiv.style.fontSize = (bounds.Height * this.pdfViewerBase.getZoomFactor()) + \"px\";\n                    }\n                    else {\n                        textDiv.style.left = ((bounds.X + bounds.Width) * this.pdfViewerBase.getZoomFactor()) + \"px\";\n                        textDiv.style.top = (bounds.Y * this.pdfViewerBase.getZoomFactor()) + \"px\";\n                        textDiv.style.height = (bounds.Width * this.pdfViewerBase.getZoomFactor()) + \"px\";\n                        textDiv.style.fontSize = (bounds.Width * this.pdfViewerBase.getZoomFactor()) + \"px\";\n                        textDiv.style.transformOrigin = '0% 0%';\n                    }\n                    textDiv.style.transform = 'rotate(' + textRotation + 'deg) ' + scaleString;\n                }\n                else {\n                    textDiv.style.transform = 'rotate(' + textRotation + 'deg) ' + scaleString;\n                }\n            }\n            else if (rotation === 1) {\n                if (textRotation === 0) {\n                    textDiv.style.transform = 'rotate(90deg) ' + scaleString;\n                }\n                else if (textRotation === -90) {\n                    textDiv.style.transform = scaleString;\n                }\n                else {\n                    textRotation = textRotation + 90;\n                    textDiv.style.transform = 'rotate(' + textRotation + 'deg) ' + scaleString;\n                }\n            }\n            else if (rotation === 2) {\n                if (textRotation === 0) {\n                    textDiv.style.transform = 'rotate(180deg) ' + scaleString;\n                }\n                else if (textRotation === 180) {\n                    textDiv.style.transform = scaleString;\n                }\n                else {\n                    textDiv.style.transform = 'rotate(' + textRotation + 'deg) ' + scaleString;\n                }\n            }\n            else if (rotation === 3) {\n                if (textRotation === 0) {\n                    textDiv.style.transform = 'rotate(-90deg) ' + scaleString;\n                }\n                else if (textRotation === 90) {\n                    textDiv.style.transform = scaleString;\n                }\n                else {\n                    textDiv.style.transform = 'rotate(' + textRotation + 'deg) ' + scaleString;\n                }\n            }\n        }\n    };\n    TextLayer.prototype.setTextElementProperties = function (textDiv) {\n        textDiv.style.fontFamily = 'serif';\n        textDiv.style.transformOrigin = this.pdfViewerBase.clientSideRendering ? '0% 0%' : '0%';\n    };\n    /**\n     * @param {number} pageNumber - The pageNumber.\n     * @returns {void}\n     * @private\n     */\n    TextLayer.prototype.resizeTextContentsOnZoom = function (pageNumber) {\n        // eslint-disable-next-line max-len\n        var renderObject = window.sessionStorage.getItem(this.pdfViewerBase.getDocumentId() + '_' + pageNumber + '_' + this.getPreviousZoomFactor());\n        // eslint-disable-next-line\n        var textBounds = [];\n        var textContents = [];\n        // eslint-disable-next-line\n        var rotation;\n        if (renderObject) {\n            // eslint-disable-next-line\n            var data = JSON.parse(renderObject);\n            // eslint-disable-next-line\n            textBounds = data['textBounds'];\n            // eslint-disable-next-line\n            textContents = data['textContent'];\n            // eslint-disable-next-line\n            rotation = data['rotation'];\n        }\n        if (textBounds.length !== 0) {\n            this.textBoundsArray.push({ pageNumber: pageNumber, textBounds: textBounds });\n            this.resizeTextContents(pageNumber, textContents, textBounds, rotation);\n        }\n        else {\n            // eslint-disable-next-line\n            var textElements = this.textBoundsArray.filter(function (obj) {\n                return obj.pageNumber === pageNumber;\n            });\n            if (textElements) {\n                if (textElements.length !== 0) {\n                    // eslint-disable-next-line\n                    textBounds = textElements[0]['textBounds'];\n                    this.resizeTextContents(pageNumber, null, textBounds, rotation);\n                }\n            }\n        }\n    };\n    /**\n     * EJ2-855106- Optimize performance by eliminating unnecessary getBoundingClientRect usage in this method.\n     */\n    TextLayer.prototype.resizeExcessDiv = function (textLayer, textDiv) {\n        // EJ2-855106- Optimize performance by eliminating unnecessary getBoundingClientRect usage in this method.\n        // const textLayerPosition: ClientRect = textLayer.getBoundingClientRect();\n        // const textDivPosition: ClientRect = textDiv.getBoundingClientRect();\n        // // eslint-disable-next-line max-len\n        // if ((textDivPosition.width + textDivPosition.left) >= (textLayerPosition.width + textLayerPosition.left) || (textDivPosition.width > textLayerPosition.width)) {\n        //     // 'auto' width is set to reset the size of the div to its contents.\n        //     textDiv.style.width = 'auto';\n        //     // Client width gets reset by 'auto' width property which has the width of the content.\n        //     textDiv.style.width = textDiv.clientWidth + 'px';\n        // }\n    };\n    /**\n     * @private\n     * @param {boolean} isPinchZoomed - The isPinchZoomed.\n     * @returns {void}\n     */\n    TextLayer.prototype.clearTextLayers = function (isPinchZoomed) {\n        var lowerPageValue = this.pdfViewerBase.currentPageNumber - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = this.pdfViewerBase.currentPageNumber + 1;\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        var textLayers = document.querySelectorAll('div[id*=\"' + this.pdfViewer.element.id + '_textLayer_\"]');\n        for (var i = 0; i < textLayers.length; i++) {\n            textLayers[parseInt(i.toString(), 10)].style.display = 'block';\n            if (this.pdfViewerBase.getMagnified() && (this.getTextSelectionStatus() || this.getTextSearchStatus())) {\n                // eslint-disable-next-line radix\n                var pageNumber = parseInt(textLayers[parseInt(i.toString(), 10)].id.split('_textLayer_')[1]);\n                if (!(((lowerPageValue + 1) <= pageNumber) && (pageNumber <= (higherPageValue - 1)))) {\n                    this.removeElement(textLayers[parseInt(i.toString(), 10)], isPinchZoomed);\n                }\n            }\n            else if (this.pdfViewerBase.getPinchZoomed()) {\n                this.removeElement(textLayers[parseInt(i.toString(), 10)], isPinchZoomed);\n            }\n            else {\n                this.removeElement(textLayers[parseInt(i.toString(), 10)], isPinchZoomed);\n            }\n        }\n    };\n    TextLayer.prototype.removeElement = function (element, isPinchZoomed) {\n        if (isPinchZoomed) {\n            this.removeForeignObjects(element);\n        }\n        else {\n            if (Browser.isIE) {\n                if (element.parentElement) {\n                    element.parentElement.removeChild(element);\n                }\n                else if (element.parentNode) {\n                    element.parentNode.removeChild(element);\n                }\n            }\n            else {\n                element.remove();\n            }\n        }\n    };\n    TextLayer.prototype.removeForeignObjects = function (element) {\n        // eslint-disable-next-line\n        var childElement = element.getElementsByClassName('foreign-object');\n        if (childElement) {\n            for (var i = 0; i < childElement.length; i++) {\n                if (Browser.isDevice) {\n                    //Remove the outer div element of checkbox and other formfields in pichzoom\n                    if (childElement[parseInt(i.toString(), 10)].parentElement.className === 'e-pv-text-layer' && childElement[0].parentElement.className !== 'e-pv-checkbox-outer-div') {\n                        element.removeChild(childElement[0]);\n                    }\n                    else if (childElement[parseInt(i.toString(), 10)].parentElement.className === 'e-pv-checkbox-outer-div') {\n                        var outerDivParent = document.getElementById(childElement[0].parentElement.id);\n                        if (outerDivParent) {\n                            outerDivParent.parentElement.remove();\n                        }\n                    }\n                }\n                else {\n                    if (childElement[parseInt(i.toString(), 10)].parentElement.className === 'e-pv-text-layer') {\n                        element.removeChild(childElement[0]);\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @param pageNumber\n     * @param divId\n     * @param fromOffset\n     * @param toOffset\n     * @param textString\n     * @param className\n     * @private\n     */\n    // eslint-disable-next-line max-len\n    TextLayer.prototype.convertToSpan = function (pageNumber, divId, fromOffset, toOffset, textString, className, isRTLText) {\n        var textDiv = this.pdfViewerBase.getElement('_text_' + pageNumber + '_' + divId);\n        var textContent = textString.substring(fromOffset, toOffset);\n        var node = document.createTextNode(textContent);\n        if (className) {\n            var spanElement = createElement('span');\n            spanElement.className = className + ' e-pv-text';\n            if (this.pdfViewerBase.clientSideRendering && isRTLText) {\n                if (toOffset === textString.length) {\n                    spanElement.style.left = 0 + 'px';\n                    spanElement.style.top = 0 + 'px';\n                }\n                else {\n                    if (textDiv.style.direction == 'rtl') {\n                        var currentText = textDiv.textContent;\n                        textDiv.textContent = textString.substring(toOffset, textString.length);\n                        var textBounds = textDiv.getBoundingClientRect();\n                        spanElement.style.left = textBounds.width + 'px';\n                        spanElement.style.top = 0 + 'px';\n                        textDiv.textContent = currentText;\n                    }\n                }\n            }\n            spanElement.appendChild(node);\n            textDiv.appendChild(spanElement);\n        }\n        else {\n            textDiv.appendChild(node);\n        }\n    };\n    /**\n     * @param startPage\n     * @param endPage\n     * @param anchorOffsetDiv\n     * @param focusOffsetDiv\n     * @param anchorOffset\n     * @param focusOffset\n     * @private\n     */\n    // eslint-disable-next-line max-len\n    TextLayer.prototype.applySpanForSelection = function (startPage, endPage, anchorOffsetDiv, focusOffsetDiv, anchorOffset, focusOffset) {\n        if (this.pdfViewer.textSelectionModule) {\n            for (var i = startPage; i <= endPage; i++) {\n                var isRTLText = void 0;\n                if (this.pdfViewerBase.clientSideRendering) {\n                    var storedData = JSON.parse(this.pdfViewerBase.pageTextDetails[this.pdfViewerBase.documentId + '_' + i + '_textDetails']);\n                    var pageText = storedData[\"pageText\"];\n                    isRTLText = this.pdfViewerBase.checkIsRtlText(pageText);\n                }\n                var startId = void 0;\n                var endId = void 0;\n                // eslint-disable-next-line\n                var textDivs = this.pdfViewerBase.getElement('_textLayer_' + i).childNodes;\n                if (i === startPage) {\n                    startId = anchorOffsetDiv;\n                    endId = textDivs.length - 1;\n                }\n                else if (i === endPage) {\n                    startId = 0;\n                    endId = focusOffsetDiv;\n                }\n                else {\n                    startId = 0;\n                    endId = textDivs.length - 1;\n                }\n                if (startPage === endPage) {\n                    startId = anchorOffsetDiv;\n                    endId = focusOffsetDiv;\n                }\n                for (var j = startId; j <= endId; j++) {\n                    var textDiv = this.pdfViewerBase.getElement('_text_' + i + '_' + j);\n                    var initId = void 0;\n                    var lastId = void 0;\n                    var length_1 = void 0;\n                    if (textDiv && textDiv.textContent) {\n                        length_1 = textDiv.textContent.length;\n                        var textContent = textDiv.textContent;\n                        textDiv.textContent = '';\n                        if (j === startId) {\n                            if (i === startPage) {\n                                initId = anchorOffset;\n                            }\n                            else {\n                                initId = 0;\n                            }\n                            lastId = length_1;\n                            this.convertToSpan(i, j, 0, initId, textContent, null, isRTLText);\n                        }\n                        else if (j === endId && i === endPage) {\n                            initId = 0;\n                            lastId = focusOffset;\n                        }\n                        else {\n                            initId = 0;\n                            lastId = length_1;\n                        }\n                        if (startId === endId && startPage === endPage) {\n                            initId = anchorOffset;\n                            lastId = focusOffset;\n                        }\n                        this.convertToSpan(i, j, initId, lastId, textContent, 'e-pv-maintaincontent', isRTLText);\n                        if (j === endId && i === endPage) {\n                            this.convertToSpan(i, j, lastId, textContent.length, textContent, null, isRTLText);\n                        }\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     * @returns {void}\n     */\n    TextLayer.prototype.clearDivSelection = function () {\n        var textLayers = document.querySelectorAll('div[id*=\"' + this.pdfViewer.element.id + '_textLayer_\"]');\n        for (var i = 0; i < textLayers.length; i++) {\n            var childNodes = textLayers[parseInt(i.toString(), 10)].childNodes;\n            for (var j = 0; j < childNodes.length; j++) {\n                var textDiv = childNodes[parseInt(j.toString(), 10)];\n                // eslint-disable-next-line max-len\n                if (textDiv.className !== 'e-pdfviewer-formFields' && textDiv.className !== 'e-pdfviewer-signatureformfields' && textDiv.className !== 'e-pdfviewer-signatureformfields-signature') {\n                    var textContent = textDiv.textContent;\n                    // eslint-disable-next-line max-len\n                    if (textDiv.childNodes.length > 1 || textDiv.childNodes.length === 1 && (textDiv.childNodes[0].tagName === 'SPAN')) {\n                        textDiv.textContent = '';\n                        textDiv.textContent = textContent;\n                    }\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line\n    TextLayer.prototype.setStyleToTextDiv = function (textDiv, left, top, bottom, width, height, rotation) {\n        textDiv.style.left = left * this.pdfViewerBase.getZoomFactor() + 'px';\n        textDiv.style.top = top * this.pdfViewerBase.getZoomFactor() + 'px';\n        var textHeight;\n        if (rotation === 90 || (this.pdfViewerBase.clientSideRendering && rotation === 270)) {\n            textHeight = width * this.pdfViewerBase.getZoomFactor();\n        }\n        else {\n            textHeight = height * this.pdfViewerBase.getZoomFactor();\n        }\n        textDiv.style.height = textHeight + 'px';\n        textDiv.style.fontSize = textHeight + 'px';\n    };\n    TextLayer.prototype.getTextSelectionStatus = function () {\n        if (this.pdfViewer.textSelectionModule) {\n            return this.pdfViewer.textSelectionModule.isTextSelection;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @param {boolean} isAdd - The isAdd.\n     * @returns {void}\n     * @private\n     */\n    TextLayer.prototype.modifyTextCursor = function (isAdd) {\n        var textLayerList = document.querySelectorAll('div[id*=\"' + this.pdfViewer.element.id + '_textLayer_\"]');\n        for (var i = 0; i < textLayerList.length; i++) {\n            var childNodes = textLayerList[parseInt(i.toString(), 10)].childNodes;\n            for (var j = 0; j < childNodes.length; j++) {\n                var textElement = childNodes[parseInt(j.toString(), 10)];\n                // eslint-disable-next-line max-len\n                if (isAdd && textElement.className !== 'e-pdfviewer-formFields' && textElement.className !== 'e-pdfviewer-signatureformfields' && textElement.className !== 'e-pdfviewer-signatureformfields-signature') {\n                    textElement.classList.add('e-pv-cursor');\n                }\n                else {\n                    textElement.classList.remove('e-pv-cursor');\n                }\n            }\n        }\n    };\n    /**\n     * @param {Selection} selection - The Selection.\n     * @returns {boolean} - Returns true or false.\n     * @private\n     */\n    TextLayer.prototype.isBackWardSelection = function (selection) {\n        var position = selection.anchorNode.compareDocumentPosition(selection.focusNode);\n        var backward = false;\n        if (!position && selection.anchorOffset > selection.focusOffset || position === Node.DOCUMENT_POSITION_PRECEDING) {\n            backward = true;\n        }\n        return backward;\n    };\n    /**\n     * @param {Node} element - The element.\n     * @returns {number} - Returns number.\n     * @private\n     */\n    TextLayer.prototype.getPageIndex = function (element) {\n        var pageId;\n        // eslint-disable-next-line\n        var parentElement = element.parentElement;\n        if (!parentElement) {\n            parentElement = element.parentNode;\n        }\n        if (parentElement.className === 'e-pv-text-layer') {\n            // eslint-disable-next-line radix\n            pageId = parseInt(element.id.split('_text_')[1]);\n        }\n        else {\n            // eslint-disable-next-line radix\n            pageId = parseInt(parentElement.id.split('_text_')[1]);\n        }\n        return pageId;\n    };\n    /**\n     * @param {Node} element - The element.\n     * @param {number} pageIndex - The pageIndex.\n     * @returns {number} - Returns number.\n     * @private\n     */\n    TextLayer.prototype.getTextIndex = function (element, pageIndex) {\n        var textIndex;\n        // eslint-disable-next-line\n        var parentElement = element.parentElement;\n        if (!parentElement) {\n            parentElement = element.parentNode;\n        }\n        if (parentElement.className === 'e-pv-text-layer') {\n            // eslint-disable-next-line radix\n            textIndex = parseInt(element.id.split('_text_' + pageIndex + '_')[1]);\n        }\n        else {\n            // eslint-disable-next-line radix\n            textIndex = parseInt(parentElement.id.split('_text_' + pageIndex + '_')[1]);\n        }\n        return textIndex;\n    };\n    TextLayer.prototype.getPreviousZoomFactor = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.previousZoomFactor;\n        }\n        else {\n            return 1;\n        }\n    };\n    /**\n     * @private\n     * @returns {boolean} - Returns true or false.\n     */\n    TextLayer.prototype.getTextSearchStatus = function () {\n        if (this.pdfViewer.textSearchModule) {\n            return this.pdfViewer.textSearchModule.isTextSearch;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @param {string} text - The text.\n     * @returns {void}\n     * @private\n     */\n    TextLayer.prototype.createNotificationPopup = function (text) {\n        var _this = this;\n        if (!this.isMessageBoxOpen) {\n            if (!isBlazor()) {\n                // eslint-disable-next-line max-len\n                var popupElement_1 = createElement('div', { id: this.pdfViewer.element.id + '_notify', className: 'e-pv-notification-popup' });\n                this.pdfViewerBase.viewerContainer.appendChild(popupElement_1);\n                this.notifyDialog = new Dialog({\n                    showCloseIcon: true, closeOnEscape: false, isModal: true, header: this.pdfViewer.localeObj.getConstant('PdfViewer'),\n                    buttons: [{\n                            buttonModel: { content: this.pdfViewer.localeObj.getConstant('OK'), isPrimary: true },\n                            click: this.closeNotification.bind(this)\n                        }],\n                    // eslint-disable-next-line max-len\n                    content: '<div class=\"e-pv-notification-popup-content\" tabindex = \"0\">' + text + '</div>', target: this.pdfViewer.element,\n                    beforeClose: function () {\n                        _this.notifyDialog.destroy();\n                        if (_this.pdfViewer.element) {\n                            try {\n                                _this.pdfViewer.element.removeChild(popupElement_1);\n                            }\n                            catch (error) {\n                                popupElement_1.parentElement.removeChild(popupElement_1);\n                            }\n                        }\n                        if (_this.pdfViewer.textSearchModule) {\n                            _this.pdfViewer.textSearch.isMessagePopupOpened = false;\n                        }\n                        _this.isMessageBoxOpen = false;\n                    }\n                });\n                if (this.pdfViewer.enableRtl) {\n                    this.notifyDialog.enableRtl = true;\n                }\n                this.notifyDialog.appendTo(popupElement_1);\n                this.isMessageBoxOpen = true;\n            }\n            else {\n                // eslint-disable-next-line\n                var notificationElement = document.getElementById(this.pdfViewer.element.id + '_notification_popup_content');\n                if (notificationElement) {\n                    notificationElement.textContent = text;\n                    notificationElement.innerHTML = text;\n                }\n                if (this.pdfViewer.textSearchModule) {\n                    this.pdfViewer.textSearch.isMessagePopupOpened = false;\n                }\n                this.pdfViewer._dotnetInstance.invokeMethodAsync('OpenNotificationPopup', text);\n            }\n        }\n    };\n    return TextLayer;\n}());\nexport { TextLayer };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}