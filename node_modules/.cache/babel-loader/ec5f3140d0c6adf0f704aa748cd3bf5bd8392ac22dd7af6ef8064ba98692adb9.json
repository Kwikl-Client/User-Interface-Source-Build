{"ast":null,"code":"import * as CONSTANT from './../base/constant';\nimport { NodeSelection } from '../../selection/selection';\nimport { NodeCutter } from './nodecutter';\nimport { InsertHtml } from './inserthtml';\nimport { createElement, isNullOrUndefined as isNOU, closest } from '@syncfusion/ej2-base';\n/**\n * Link internal component\n *\n * @hidden\n\n */\nvar LinkCommand = /** @class */function () {\n  /**\n   * Constructor for creating the Formats plugin\n   *\n   * @param {EditorManager} parent - specifies the editor manager\n   * @hidden\n    */\n  function LinkCommand(parent) {\n    this.parent = parent;\n    this.addEventListener();\n  }\n  LinkCommand.prototype.addEventListener = function () {\n    this.parent.observer.on(CONSTANT.LINK, this.linkCommand, this);\n  };\n  LinkCommand.prototype.linkCommand = function (e) {\n    switch (e.value.toString().toLocaleLowerCase()) {\n      case 'createlink':\n      case 'editlink':\n        this.createLink(e);\n        break;\n      case 'openlink':\n        this.openLink(e);\n        break;\n      case 'removelink':\n        this.removeLink(e);\n        break;\n    }\n  };\n  LinkCommand.prototype.createLink = function (e) {\n    var closestAnchor = !isNOU(e.item.selectParent) && e.item.selectParent.length > 0 && closest(e.item.selectParent[0], 'a');\n    closestAnchor = !isNOU(closestAnchor) ? closestAnchor : !isNOU(e.item.selectParent) && e.item.selectParent.length > 0 ? e.item.selectParent[0] : null;\n    if (!isNOU(closestAnchor) && closestAnchor.tagName === 'A') {\n      var anchorEle = closestAnchor;\n      var linkText = '';\n      if (!isNOU(e.item.url)) {\n        anchorEle.setAttribute('href', e.item.url);\n      }\n      if (!isNOU(e.item.title)) {\n        anchorEle.setAttribute('title', e.item.title);\n      }\n      if (!isNOU(e.item.text) && e.item.text !== '') {\n        linkText = anchorEle.innerText;\n        anchorEle.innerText = e.item.text;\n      }\n      if (!isNOU(e.item.target)) {\n        anchorEle.setAttribute('target', e.item.target);\n        anchorEle.setAttribute('aria-label', e.item.ariaLabel);\n      } else {\n        anchorEle.removeAttribute('target');\n        anchorEle.removeAttribute('aria-label');\n      }\n      if (linkText === e.item.text) {\n        e.item.selection.setSelectionText(this.parent.currentDocument, anchorEle, anchorEle, 1, 1);\n        e.item.selection.restore();\n      } else {\n        var startIndex = e.item.action === 'Paste' ? anchorEle.childNodes[0].textContent.length : 0;\n        e.item.selection.setSelectionText(this.parent.currentDocument, anchorEle.childNodes[0], anchorEle.childNodes[0], startIndex, anchorEle.childNodes[0].textContent.length);\n      }\n    } else {\n      var domSelection = new NodeSelection();\n      var range = domSelection.getRange(this.parent.currentDocument);\n      if (range.endContainer.nodeName === '#text' && range.startContainer.textContent.length === range.endOffset + 1 && range.endContainer.textContent.charAt(range.endOffset) === ' ' && !isNOU(range.endContainer.nextSibling) && range.endContainer.nextSibling.nodeName === 'A') {\n        domSelection.setSelectionText(this.parent.currentDocument, range.startContainer, range.endContainer, range.startOffset, range.endOffset + 1);\n        range = domSelection.getRange(this.parent.currentDocument);\n      }\n      var text = isNOU(e.item.text) ? true : e.item.text.replace(/ /g, '').localeCompare(range.toString().replace(/\\n/g, ' ').replace(/ /g, '')) < 0;\n      if (e.event && e.event.type === 'keydown' && (e.event.keyCode === 32 || e.event.keyCode === 13) || e.item.action === 'Paste' || range.collapsed || text) {\n        var anchor = this.createAchorNode(e);\n        anchor.innerText = e.item.text === '' ? e.item.url : e.item.text;\n        var text_1 = anchor.innerText;\n        // Replace spaces with non-breaking spaces\n        var modifiedText = text_1.replace(/  +/g, function (match) {\n          return '\\u00A0'.repeat(match.length);\n        });\n        anchor.innerText = modifiedText;\n        e.item.selection.restore();\n        InsertHtml.Insert(this.parent.currentDocument, anchor, this.parent.editableElement);\n        if (e.event && e.event.type === 'keydown' && (e.event.keyCode === 32 || e.event.keyCode === 13)) {\n          var startContainer = e.item.selection.range.startContainer;\n          startContainer.textContent = this.removeText(startContainer.textContent, e.item.text);\n        } else {\n          var startIndex = e.item.action === 'Paste' ? anchor.childNodes[0].textContent.length : 0;\n          e.item.selection.setSelectionText(this.parent.currentDocument, anchor.childNodes[0], anchor.childNodes[0], startIndex, anchor.childNodes[0].textContent.length);\n        }\n      } else {\n        this.createLinkNode(e);\n      }\n    }\n    if (e.callBack) {\n      e.callBack({\n        requestType: 'Links',\n        editorMode: 'HTML',\n        event: e.event,\n        range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n        elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n      });\n    }\n  };\n  LinkCommand.prototype.createLinkNode = function (e) {\n    var domSelection = new NodeSelection();\n    var nodeCutter = new NodeCutter();\n    var range = domSelection.getRange(this.parent.currentDocument);\n    var nodes = this.getSelectionNodes(domSelection.getNodeCollection(range));\n    var save = domSelection.save(range, this.parent.currentDocument);\n    var txtArray = [];\n    var inlineNodes = [];\n    var currentNode;\n    var removeNodes = [];\n    var anchorNodes = [];\n    var finalinlineNodes = [];\n    var cloneNode;\n    for (var index = 0; index < nodes.length; index++) {\n      nodes[index] = nodeCutter.GetSpliceNode(range, nodes[index]);\n      txtArray[index] = nodes[index];\n    }\n    for (var i = 0; i < txtArray.length; i++) {\n      var check = true;\n      currentNode = txtArray[i];\n      while (check === true) {\n        if (currentNode.parentNode.nodeName === 'A') {\n          var anchorEle = currentNode.parentNode;\n          currentNode.parentNode.parentNode.insertBefore(anchorEle.firstChild, anchorEle);\n          currentNode.parentNode.removeChild(anchorEle);\n        }\n        if (this.isBlockNode(currentNode.parentNode) || txtArray.length === 0 || i === 0 || i === txtArray.length - 1 || range.startContainer.nodeType === 3) {\n          inlineNodes[i] = currentNode;\n          check = false;\n        } else {\n          currentNode = currentNode.parentNode;\n        }\n      }\n    }\n    for (var i = 0, j_1 = 0; i < inlineNodes.length; i++) {\n      if (i === 0) {\n        finalinlineNodes[j_1] = inlineNodes[i];\n      }\n      if (inlineNodes.length > 1 && i < inlineNodes.length - 1) {\n        if (inlineNodes[i].parentElement === inlineNodes[i + 1].parentElement && inlineNodes[i] === inlineNodes[i + 1]) {\n          continue;\n        } else {\n          finalinlineNodes[j_1 + 1] = inlineNodes[i + 1];\n          j_1++;\n        }\n      }\n    }\n    var j = 0;\n    anchorNodes[j] = this.createAchorNode(e);\n    for (var i = 0; i < finalinlineNodes.length; i++) {\n      if (i === 0) {\n        cloneNode = finalinlineNodes[i].cloneNode(true);\n        anchorNodes[i].appendChild(cloneNode);\n      }\n      if (i < finalinlineNodes.length - 1) {\n        if (finalinlineNodes[i].parentNode === finalinlineNodes[i + 1].parentNode) {\n          var cln = finalinlineNodes[i + 1].cloneNode(true);\n          anchorNodes[j].appendChild(cln);\n        } else {\n          j = j + 1;\n          anchorNodes[j] = this.createAchorNode(e);\n          cloneNode = finalinlineNodes[i + 1].cloneNode(true);\n          anchorNodes[j].appendChild(cloneNode);\n        }\n      }\n    }\n    this.parent.nodeSelection.setRange(document, save.range);\n    for (var i = 0, j_2 = 0, k = 0; i <= finalinlineNodes.length; i++) {\n      if (i === 0) {\n        finalinlineNodes[i].parentNode.insertBefore(anchorNodes[j_2], finalinlineNodes[i].nextSibling);\n        if (this.parent.domNode.blockNodes().length === 1) {\n          this.parent.nodeSelection.setSelectionNode(this.parent.currentDocument, anchorNodes[j_2]);\n        }\n        removeNodes[k] = finalinlineNodes[i];\n        k++;\n      }\n      if (i < finalinlineNodes.length - 1) {\n        if (finalinlineNodes[i].parentNode === finalinlineNodes[i + 1].parentNode) {\n          removeNodes[k] = finalinlineNodes[i + 1];\n          k++;\n        } else {\n          j_2 = j_2 + 1;\n          finalinlineNodes[i + 1].parentNode.insertBefore(anchorNodes[j_2], finalinlineNodes[i + 1]);\n          removeNodes[k] = finalinlineNodes[i + 1];\n          k++;\n        }\n      }\n    }\n    for (var i = 0; i < removeNodes.length; i++) {\n      if (removeNodes[i].parentNode) {\n        removeNodes[i].parentNode.removeChild(removeNodes[i]);\n      }\n    }\n  };\n  LinkCommand.prototype.createAchorNode = function (e) {\n    var anchorEle = createElement('a', {\n      className: 'e-rte-anchor',\n      attrs: {\n        href: e.item.url,\n        title: isNOU(e.item.title) || e.item.title === '' ? e.item.url : e.item.title\n      }\n    });\n    if (!isNOU(e.item.target)) {\n      anchorEle.setAttribute('target', e.item.target);\n    }\n    if (!isNOU(e.item.ariaLabel)) {\n      anchorEle.setAttribute('aria-label', e.item.ariaLabel);\n    }\n    return anchorEle;\n  };\n  LinkCommand.prototype.getSelectionNodes = function (nodeCollection) {\n    nodeCollection = nodeCollection.reverse();\n    for (var index = 0; index < nodeCollection.length; index++) {\n      if (nodeCollection[index].nodeType !== 3 || nodeCollection[index].textContent.trim() === '') {\n        if (nodeCollection[index].nodeName !== 'IMG') {\n          nodeCollection.splice(index, 1);\n          index--;\n        }\n      }\n    }\n    return nodeCollection.reverse();\n  };\n  LinkCommand.prototype.isBlockNode = function (element) {\n    return !!element && element.nodeType === Node.ELEMENT_NODE && CONSTANT.BLOCK_TAGS.indexOf(element.tagName.toLowerCase()) >= 0;\n  };\n  LinkCommand.prototype.removeText = function (text, val) {\n    var arr = text.split(' ');\n    for (var i = 0; i < arr.length; i++) {\n      if (arr[i] === val) {\n        arr.splice(i, 1);\n        i--;\n      }\n    }\n    return arr.join(' ') + ' ';\n  };\n  LinkCommand.prototype.openLink = function (e) {\n    document.defaultView.open(e.item.url, e.item.target);\n    this.callBack(e);\n  };\n  LinkCommand.prototype.removeLink = function (e) {\n    var blockNodes = this.parent.domNode.blockNodes();\n    if (blockNodes.length < 2) {\n      this.parent.domNode.setMarker(e.item.selection);\n      var closestAnchor = closest(e.item.selectParent[0], 'a');\n      var selectParent = closestAnchor ? closestAnchor : e.item.selectParent[0];\n      var parent_1 = selectParent.parentNode;\n      var child = [];\n      for (; selectParent.firstChild; null) {\n        child.push(parent_1.insertBefore(selectParent.firstChild, selectParent));\n      }\n      parent_1.removeChild(selectParent);\n      if (child && child.length === 1) {\n        e.item.selection.startContainer = e.item.selection.getNodeArray(child[child.length - 1], true);\n        e.item.selection.endContainer = e.item.selection.startContainer;\n      }\n      e.item.selection = this.parent.domNode.saveMarker(e.item.selection);\n    } else {\n      for (var i = 0; i < blockNodes.length; i++) {\n        var linkNode = blockNodes[i].querySelectorAll('a');\n        for (var j = 0; j < linkNode.length; j++) {\n          if (this.parent.currentDocument.getSelection().containsNode(linkNode[j], true)) {\n            linkNode[j].outerHTML = linkNode[j].innerHTML;\n          }\n        }\n      }\n    }\n    e.item.selection.restore();\n    this.callBack(e);\n  };\n  LinkCommand.prototype.callBack = function (e) {\n    if (e.callBack) {\n      e.callBack({\n        requestType: e.item.subCommand,\n        editorMode: 'HTML',\n        event: e.event,\n        range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n        elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n      });\n    }\n  };\n  return LinkCommand;\n}();\nexport { LinkCommand };","map":{"version":3,"names":["CONSTANT","NodeSelection","NodeCutter","InsertHtml","createElement","isNullOrUndefined","isNOU","closest","LinkCommand","parent","addEventListener","prototype","observer","on","LINK","linkCommand","e","value","toString","toLocaleLowerCase","createLink","openLink","removeLink","closestAnchor","item","selectParent","length","tagName","anchorEle","linkText","url","setAttribute","title","text","innerText","target","ariaLabel","removeAttribute","selection","setSelectionText","currentDocument","restore","startIndex","action","childNodes","textContent","domSelection","range","getRange","endContainer","nodeName","startContainer","endOffset","charAt","nextSibling","startOffset","replace","localeCompare","event","type","keyCode","collapsed","anchor","createAchorNode","text_1","modifiedText","match","repeat","Insert","editableElement","removeText","createLinkNode","callBack","requestType","editorMode","nodeSelection","elements","getSelectedNodes","nodeCutter","nodes","getSelectionNodes","getNodeCollection","save","txtArray","inlineNodes","currentNode","removeNodes","anchorNodes","finalinlineNodes","cloneNode","index","GetSpliceNode","i","check","parentNode","insertBefore","firstChild","removeChild","isBlockNode","nodeType","j_1","parentElement","j","appendChild","cln","setRange","document","j_2","k","domNode","blockNodes","setSelectionNode","className","attrs","href","nodeCollection","reverse","trim","splice","element","Node","ELEMENT_NODE","BLOCK_TAGS","indexOf","toLowerCase","val","arr","split","join","defaultView","open","setMarker","parent_1","child","push","getNodeArray","saveMarker","linkNode","querySelectorAll","getSelection","containsNode","outerHTML","innerHTML","subCommand"],"sources":["/Users/saleem/Desktop/KClient/Web App/Ver_3.6/User Interface/website_Source files/node_modules/@syncfusion/ej2-richtexteditor/src/editor-manager/plugin/link.js"],"sourcesContent":["import * as CONSTANT from './../base/constant';\nimport { NodeSelection } from '../../selection/selection';\nimport { NodeCutter } from './nodecutter';\nimport { InsertHtml } from './inserthtml';\nimport { createElement, isNullOrUndefined as isNOU, closest } from '@syncfusion/ej2-base';\n/**\n * Link internal component\n *\n * @hidden\n\n */\nvar LinkCommand = /** @class */ (function () {\n    /**\n     * Constructor for creating the Formats plugin\n     *\n     * @param {EditorManager} parent - specifies the editor manager\n     * @hidden\n\n     */\n    function LinkCommand(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    LinkCommand.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.LINK, this.linkCommand, this);\n    };\n    LinkCommand.prototype.linkCommand = function (e) {\n        switch (e.value.toString().toLocaleLowerCase()) {\n            case 'createlink':\n            case 'editlink':\n                this.createLink(e);\n                break;\n            case 'openlink':\n                this.openLink(e);\n                break;\n            case 'removelink':\n                this.removeLink(e);\n                break;\n        }\n    };\n    LinkCommand.prototype.createLink = function (e) {\n        var closestAnchor = (!isNOU(e.item.selectParent) && e.item.selectParent.length > 0) &&\n            closest(e.item.selectParent[0], 'a');\n        closestAnchor = !isNOU(closestAnchor) ? closestAnchor :\n            (!isNOU(e.item.selectParent) && e.item.selectParent.length > 0) ? (e.item.selectParent[0]) : null;\n        if (!isNOU(closestAnchor) && closestAnchor.tagName === 'A') {\n            var anchorEle = closestAnchor;\n            var linkText = '';\n            if (!isNOU(e.item.url)) {\n                anchorEle.setAttribute('href', e.item.url);\n            }\n            if (!isNOU(e.item.title)) {\n                anchorEle.setAttribute('title', e.item.title);\n            }\n            if (!isNOU(e.item.text) && e.item.text !== '') {\n                linkText = anchorEle.innerText;\n                anchorEle.innerText = e.item.text;\n            }\n            if (!isNOU(e.item.target)) {\n                anchorEle.setAttribute('target', e.item.target);\n                anchorEle.setAttribute('aria-label', e.item.ariaLabel);\n            }\n            else {\n                anchorEle.removeAttribute('target');\n                anchorEle.removeAttribute('aria-label');\n            }\n            if (linkText === e.item.text) {\n                e.item.selection.setSelectionText(this.parent.currentDocument, anchorEle, anchorEle, 1, 1);\n                e.item.selection.restore();\n            }\n            else {\n                var startIndex = e.item.action === 'Paste' ? anchorEle.childNodes[0].textContent.length : 0;\n                e.item.selection.setSelectionText(this.parent.currentDocument, anchorEle.childNodes[0], anchorEle.childNodes[0], startIndex, anchorEle.childNodes[0].textContent.length);\n            }\n        }\n        else {\n            var domSelection = new NodeSelection();\n            var range = domSelection.getRange(this.parent.currentDocument);\n            if (range.endContainer.nodeName === '#text' && range.startContainer.textContent.length === (range.endOffset + 1) &&\n                range.endContainer.textContent.charAt(range.endOffset) === ' ' && (!isNOU(range.endContainer.nextSibling) && range.endContainer.nextSibling.nodeName === 'A')) {\n                domSelection.setSelectionText(this.parent.currentDocument, range.startContainer, range.endContainer, range.startOffset, range.endOffset + 1);\n                range = domSelection.getRange(this.parent.currentDocument);\n            }\n            var text = isNOU(e.item.text) ? true : e.item.text.replace(/ /g, '').localeCompare(range.toString()\n                .replace(/\\n/g, ' ').replace(/ /g, '')) < 0;\n            if (e.event && e.event.type === 'keydown' && (e.event.keyCode === 32\n                || e.event.keyCode === 13) || e.item.action === 'Paste' || range.collapsed || text) {\n                var anchor = this.createAchorNode(e);\n                anchor.innerText = e.item.text === '' ? e.item.url : e.item.text;\n                var text_1 = anchor.innerText;\n                // Replace spaces with non-breaking spaces\n                var modifiedText = text_1.replace(/  +/g, function (match) {\n                    return '\\u00A0'.repeat(match.length);\n                });\n                anchor.innerText = modifiedText;\n                e.item.selection.restore();\n                InsertHtml.Insert(this.parent.currentDocument, anchor, this.parent.editableElement);\n                if (e.event && e.event.type === 'keydown' && (e.event.keyCode === 32\n                    || e.event.keyCode === 13)) {\n                    var startContainer = e.item.selection.range.startContainer;\n                    startContainer.textContent = this.removeText(startContainer.textContent, e.item.text);\n                }\n                else {\n                    var startIndex = e.item.action === 'Paste' ? anchor.childNodes[0].textContent.length : 0;\n                    e.item.selection.setSelectionText(this.parent.currentDocument, anchor.childNodes[0], anchor.childNodes[0], startIndex, anchor.childNodes[0].textContent.length);\n                }\n            }\n            else {\n                this.createLinkNode(e);\n            }\n        }\n        if (e.callBack) {\n            e.callBack({\n                requestType: 'Links',\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    LinkCommand.prototype.createLinkNode = function (e) {\n        var domSelection = new NodeSelection();\n        var nodeCutter = new NodeCutter();\n        var range = domSelection.getRange(this.parent.currentDocument);\n        var nodes = this.getSelectionNodes(domSelection.getNodeCollection(range));\n        var save = domSelection.save(range, this.parent.currentDocument);\n        var txtArray = [];\n        var inlineNodes = [];\n        var currentNode;\n        var removeNodes = [];\n        var anchorNodes = [];\n        var finalinlineNodes = [];\n        var cloneNode;\n        for (var index = 0; index < nodes.length; index++) {\n            nodes[index] = nodeCutter.GetSpliceNode(range, nodes[index]);\n            txtArray[index] = nodes[index];\n        }\n        for (var i = 0; i < txtArray.length; i++) {\n            var check = true;\n            currentNode = txtArray[i];\n            while (check === true) {\n                if (currentNode.parentNode.nodeName === 'A') {\n                    var anchorEle = currentNode.parentNode;\n                    currentNode.parentNode.parentNode.insertBefore(anchorEle.firstChild, anchorEle);\n                    currentNode.parentNode.removeChild(anchorEle);\n                }\n                if (this.isBlockNode(currentNode.parentNode) || txtArray.length === 0 || i === 0 || i === txtArray.length - 1\n                    || range.startContainer.nodeType === 3) {\n                    inlineNodes[i] = currentNode;\n                    check = false;\n                }\n                else {\n                    currentNode = currentNode.parentNode;\n                }\n            }\n        }\n        for (var i = 0, j_1 = 0; i < inlineNodes.length; i++) {\n            if (i === 0) {\n                finalinlineNodes[j_1] = inlineNodes[i];\n            }\n            if (inlineNodes.length > 1 && i < inlineNodes.length - 1) {\n                if ((inlineNodes[i].parentElement === inlineNodes[i + 1].parentElement) &&\n                    (inlineNodes[i] === inlineNodes[i + 1])) {\n                    continue;\n                }\n                else {\n                    finalinlineNodes[j_1 + 1] = inlineNodes[i + 1];\n                    j_1++;\n                }\n            }\n        }\n        var j = 0;\n        anchorNodes[j] = this.createAchorNode(e);\n        for (var i = 0; i < finalinlineNodes.length; i++) {\n            if (i === 0) {\n                cloneNode = finalinlineNodes[i].cloneNode(true);\n                anchorNodes[i].appendChild(cloneNode);\n            }\n            if (i < finalinlineNodes.length - 1) {\n                if (finalinlineNodes[i].parentNode === finalinlineNodes[i + 1].parentNode) {\n                    var cln = finalinlineNodes[i + 1].cloneNode(true);\n                    anchorNodes[j].appendChild(cln);\n                }\n                else {\n                    j = j + 1;\n                    anchorNodes[j] = this.createAchorNode(e);\n                    cloneNode = finalinlineNodes[i + 1].cloneNode(true);\n                    anchorNodes[j].appendChild(cloneNode);\n                }\n            }\n        }\n        this.parent.nodeSelection.setRange(document, save.range);\n        for (var i = 0, j_2 = 0, k = 0; i <= finalinlineNodes.length; i++) {\n            if (i === 0) {\n                finalinlineNodes[i].parentNode.insertBefore(anchorNodes[j_2], finalinlineNodes[i].nextSibling);\n                if (this.parent.domNode.blockNodes().length === 1) {\n                    this.parent.nodeSelection.setSelectionNode(this.parent.currentDocument, anchorNodes[j_2]);\n                }\n                removeNodes[k] = finalinlineNodes[i];\n                k++;\n            }\n            if (i < finalinlineNodes.length - 1) {\n                if (finalinlineNodes[i].parentNode === finalinlineNodes[i + 1].parentNode) {\n                    removeNodes[k] = finalinlineNodes[i + 1];\n                    k++;\n                }\n                else {\n                    j_2 = j_2 + 1;\n                    finalinlineNodes[i + 1].parentNode.insertBefore(anchorNodes[j_2], finalinlineNodes[i + 1]);\n                    removeNodes[k] = finalinlineNodes[i + 1];\n                    k++;\n                }\n            }\n        }\n        for (var i = 0; i < removeNodes.length; i++) {\n            if (removeNodes[i].parentNode) {\n                removeNodes[i].parentNode.removeChild(removeNodes[i]);\n            }\n        }\n    };\n    LinkCommand.prototype.createAchorNode = function (e) {\n        var anchorEle = createElement('a', {\n            className: 'e-rte-anchor',\n            attrs: {\n                href: e.item.url,\n                title: isNOU(e.item.title) || e.item.title === '' ? e.item.url : e.item.title\n            }\n        });\n        if (!isNOU(e.item.target)) {\n            anchorEle.setAttribute('target', e.item.target);\n        }\n        if (!isNOU(e.item.ariaLabel)) {\n            anchorEle.setAttribute('aria-label', e.item.ariaLabel);\n        }\n        return anchorEle;\n    };\n    LinkCommand.prototype.getSelectionNodes = function (nodeCollection) {\n        nodeCollection = nodeCollection.reverse();\n        for (var index = 0; index < nodeCollection.length; index++) {\n            if (nodeCollection[index].nodeType !== 3 || nodeCollection[index].textContent.trim() === '') {\n                if (nodeCollection[index].nodeName !== 'IMG') {\n                    nodeCollection.splice(index, 1);\n                    index--;\n                }\n            }\n        }\n        return nodeCollection.reverse();\n    };\n    LinkCommand.prototype.isBlockNode = function (element) {\n        return (!!element && (element.nodeType === Node.ELEMENT_NODE && CONSTANT.BLOCK_TAGS.indexOf(element.tagName.toLowerCase()) >= 0));\n    };\n    LinkCommand.prototype.removeText = function (text, val) {\n        var arr = text.split(' ');\n        for (var i = 0; i < arr.length; i++) {\n            if (arr[i] === val) {\n                arr.splice(i, 1);\n                i--;\n            }\n        }\n        return arr.join(' ') + ' ';\n    };\n    LinkCommand.prototype.openLink = function (e) {\n        document.defaultView.open(e.item.url, e.item.target);\n        this.callBack(e);\n    };\n    LinkCommand.prototype.removeLink = function (e) {\n        var blockNodes = this.parent.domNode.blockNodes();\n        if (blockNodes.length < 2) {\n            this.parent.domNode.setMarker(e.item.selection);\n            var closestAnchor = closest(e.item.selectParent[0], 'a');\n            var selectParent = closestAnchor ? closestAnchor : e.item.selectParent[0];\n            var parent_1 = selectParent.parentNode;\n            var child = [];\n            for (; selectParent.firstChild; null) {\n                child.push(parent_1.insertBefore(selectParent.firstChild, selectParent));\n            }\n            parent_1.removeChild(selectParent);\n            if (child && child.length === 1) {\n                e.item.selection.startContainer = e.item.selection.getNodeArray(child[child.length - 1], true);\n                e.item.selection.endContainer = e.item.selection.startContainer;\n            }\n            e.item.selection = this.parent.domNode.saveMarker(e.item.selection);\n        }\n        else {\n            for (var i = 0; i < blockNodes.length; i++) {\n                var linkNode = blockNodes[i].querySelectorAll('a');\n                for (var j = 0; j < linkNode.length; j++) {\n                    if (this.parent.currentDocument.getSelection().containsNode(linkNode[j], true)) {\n                        linkNode[j].outerHTML = linkNode[j].innerHTML;\n                    }\n                }\n            }\n        }\n        e.item.selection.restore();\n        this.callBack(e);\n    };\n    LinkCommand.prototype.callBack = function (e) {\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.item.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    return LinkCommand;\n}());\nexport { LinkCommand };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}