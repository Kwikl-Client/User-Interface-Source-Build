{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nimport { _PdfDictionary, _PdfName, _PdfReference } from './../pdf-primitives';\nimport { _PdfParser, _PdfLexicalOperator } from '../pdf-parser';\nimport { _PdfStream } from '../base-stream';\nimport { _PdfCommand } from './../pdf-primitives';\nimport { _ExportHelper } from './xfdf-document';\nimport { PdfUriAnnotation, PdfRubberStampAnnotation, PdfFileLinkAnnotation, PdfTextWebLinkAnnotation, PdfRectangleAnnotation, PdfDocumentLinkAnnotation } from './../annotations/annotation';\nimport { _bytesToString, _getNewGuidString, _byteArrayToHexString, _stringToBytes } from './../utils';\nimport { PdfCheckBoxField, PdfComboBoxField, PdfListBoxField, PdfRadioButtonListField, PdfTextBoxField } from './../form/field';\nimport { _StringTokenizer } from './../fonts/string-layouter';\nimport { _PdfFlateStream } from '../flate-stream';\nimport { CompressedStreamWriter } from '@syncfusion/ej2-compression';\nvar _FdfDocument = /** @class */function (_super) {\n  __extends(_FdfDocument, _super);\n  function _FdfDocument(fileName) {\n    var _this = _super.call(this) || this;\n    _this._annotationObjects = new Map(); // eslint-disable-line\n    _this._specialCharacters = 'âãÏÓ';\n    if (fileName !== null && typeof fileName !== 'undefined') {\n      _this._fileName = fileName;\n    }\n    return _this;\n  }\n  _FdfDocument.prototype._exportAnnotations = function (document) {\n    this._document = document;\n    this._crossReference = document._crossReference;\n    this._isAnnotationExport = true;\n    this._exportAnnotationData(document, document.pageCount);\n    return this._save();\n  };\n  _FdfDocument.prototype._exportFormFields = function (document) {\n    this._document = document;\n    this._crossReference = document._crossReference;\n    this._isAnnotationExport = false;\n    this._key = _getNewGuidString();\n    return this._save();\n  };\n  _FdfDocument.prototype._save = function () {\n    var _this = this;\n    var objectID = 0;\n    var objectArray = [];\n    if (!this._isAnnotationExport) {\n      if (this._asPerSpecification) {\n        this.fdfString += '%FDF-1.2\\n%' + this._specialCharacters + '\\r\\n1 0 obj\\r<</FDF<</F(';\n        this.fdfString += this._fileName + ')';\n        this.fdfString += '/Fields[';\n      } else {\n        this.fdfString += '%FDF-1.2\\n';\n      }\n      var form = this._document.form;\n      if (form !== null && typeof form !== 'undefined') {\n        this._exportEmptyFields = form.exportEmptyFields;\n        var count = this._document.form.count;\n        for (var i = 0; i < count; i++) {\n          var field = this._document.form.fieldAt(i);\n          var value = this._exportFormFieldsData(field);\n          if (field instanceof PdfTextBoxField || field instanceof PdfListBoxField || field instanceof PdfComboBoxField || field instanceof PdfRadioButtonListField || field instanceof PdfCheckBoxField) {\n            objectID++;\n          }\n          if (!this._asPerSpecification) {\n            if (field instanceof PdfTextBoxField || field instanceof PdfListBoxField || field instanceof PdfComboBoxField) {\n              objectArray.push(objectID);\n              this.fdfString += objectID + ' 0 obj<</T <' + this._stringToHexString(field.name) + '> /V ';\n              if (typeof value === 'string' || Array.isArray(value) && value.length === 1) {\n                this.fdfString += '<' + this._stringToHexString(Array.isArray(value) ? value[0] : value) + '>';\n              } else if (Array.isArray(value)) {\n                this.fdfString += '[';\n                for (var j = 0; j < value.length; j++) {\n                  this.fdfString += '<' + this._stringToHexString(value[Number.parseInt(j.toString(), 10)]) + '>';\n                  if (j !== value.length - 1) {\n                    this.fdfString += ' ';\n                  }\n                }\n                this.fdfString += ']';\n              }\n              this.fdfString += ' >>endobj\\n';\n            } else if (field instanceof PdfRadioButtonListField || field instanceof PdfCheckBoxField) {\n              objectArray.push(objectID);\n              this.fdfString += objectID + ' 0 obj<</T <' + this._stringToHexString(field.name) + '> /V /';\n              this.fdfString += value + ' >>endobj\\n';\n            }\n          } else {\n            if (field instanceof PdfTextBoxField || field instanceof PdfListBoxField || field instanceof PdfComboBoxField) {\n              objectArray.push(objectID);\n              this.fdfString += '<</T(' + field.name + ')/V';\n              if (typeof value === 'string' || Array.isArray(value) && value.length === 1) {\n                this.fdfString += '(' + (Array.isArray(value) ? value[0] : value) + ')';\n              } else if (Array.isArray(value)) {\n                this.fdfString += '[';\n                for (var j = 0; j < value.length; j++) {\n                  this.fdfString += '(' + value[Number.parseInt(j.toString(), 10)] + ')';\n                  if (j !== value.length - 1) {\n                    this.fdfString += ' ';\n                  }\n                }\n                this.fdfString += ']';\n              }\n              this.fdfString += '>>';\n            } else if (field instanceof PdfRadioButtonListField || field instanceof PdfCheckBoxField) {\n              objectArray.push(objectID);\n              this.fdfString += '<</T(' + field.name + ')/V/' + value + '>>';\n            }\n          }\n        }\n      }\n      if (this._asPerSpecification) {\n        this.fdfString += ']';\n        this.fdfString += '/ID[]/UF(' + this._fileName + ')>>/Type/Catalog>>\\rendobj\\rtrailer\\r\\n<</Root 1 0 R>>\\r\\n';\n        this.fdfString += '%%EOF\\r\\n';\n      } else {\n        this.fdfString += this._table.size + 1 + ' 0 obj<</F <' + this._stringToHexString(this._fileName) + '>  /Fields [';\n        for (var i = 0; i < this._table.size; i++) {\n          var field = this._document.form.fieldAt(i);\n          if (field !== null && typeof field !== 'undefined' && field.export) {\n            this.fdfString += objectArray[Number.parseInt(i.toString(), 10)] + ' 0 R ';\n          }\n        }\n        this.fdfString += ']>>endobj\\n';\n        this.fdfString += objectArray.length + 2 + ' 0 obj<</Version /1.4 /FDF ' + (objectArray.length + 1) + ' 0 R>>endobj\\n';\n        this.fdfString += 'trailer\\n<</Root ' + (objectArray.length + 2) + ' 0 R>>';\n      }\n    }\n    var arrayBuffer = new ArrayBuffer(this.fdfString.length * 1);\n    var result = new Uint8Array(arrayBuffer);\n    result.forEach(function (val, i) {\n      result[i] = _this.fdfString.charCodeAt(i); // eslint-disable-line\n    });\n    return result;\n  };\n  _FdfDocument.prototype._importAnnotations = function (document, data) {\n    this._document = document;\n    this._crossReference = document._crossReference;\n    this._isAnnotationExport = false;\n    this._checkFdf(_bytesToString(data));\n    var stream = new _PdfStream(data);\n    this._isAnnotationImport = true;\n    var parser = new _PdfParser(new _PdfLexicalOperator(stream), null, true, false);\n    this._readFdfData(parser);\n    if (this._annotationObjects !== null && typeof this._annotationObjects !== 'undefined' && this._annotationObjects.size > 0) {\n      this._annotationObjects.clear();\n    }\n    if (this._table !== null && typeof this._table !== 'undefined' && this._table.size > 0) {\n      this._table.clear();\n    }\n  };\n  _FdfDocument.prototype._importFormData = function (document, data) {\n    this._document = document;\n    this._crossReference = document._crossReference;\n    this._isAnnotationExport = false;\n    this._checkFdf(_bytesToString(data));\n    var stream = new _PdfStream(data);\n    var parser = new _PdfParser(new _PdfLexicalOperator(stream), null, false, false);\n    this._readFdfData(parser);\n  };\n  _FdfDocument.prototype._readFdfData = function (parser) {\n    var _this = this;\n    var token = parser.getObject(); // eslint-disable-line\n    if (this._isAnnotationImport) {\n      var key = '';\n      while (token !== null && typeof token !== 'undefined' && token !== 'EOF') {\n        if (token instanceof _PdfDictionary) {\n          this._table.set(key, token);\n          key = '';\n        } else if (token instanceof _PdfStream || token instanceof _PdfFlateStream) {\n          this._table.set(key, token);\n          key = '';\n        } else if (token !== null && Number.isInteger(token) && token !== 0) {\n          if (parser.first >= 0) {\n            key = token.toString() + ' ' + parser.first.toString();\n          }\n        } else if (token instanceof _PdfCommand && token.command !== null && typeof token.command !== 'undefined' && token.command === 'trailer') {\n          key = token.command;\n        }\n        token = parser.getObject();\n      }\n      this._annotationObjects = this._parseAnnotationData();\n      this._annotationObjects.forEach(function (value, key) {\n        var dictionary = value;\n        dictionary._crossReference = _this._crossReference;\n        dictionary._updated = true;\n        if (dictionary !== null && typeof dictionary !== 'undefined' && dictionary.has('Page')) {\n          var pageNumber = dictionary.get('Page');\n          if (pageNumber !== null && typeof pageNumber !== 'undefined') {\n            var pageIndex = pageNumber;\n            if (pageIndex < _this._document.pageCount) {\n              var page = _this._document.getPage(pageIndex);\n              var pageDictionary = page._pageDictionary;\n              if (pageDictionary !== null && typeof pageDictionary !== 'undefined') {\n                var annotations = page.annotations;\n                var annotation = annotations._parseAnnotation(dictionary);\n                if (annotation !== null && typeof annotation !== 'undefined') {\n                  annotation._isImported = true;\n                  var reference = _this._crossReference._getNextReference();\n                  _this._crossReference._cacheMap.set(reference, dictionary);\n                  if (dictionary.has('NM') || dictionary.has('IRT')) {\n                    _this._addReferenceToGroup(reference, dictionary);\n                  }\n                  annotation._ref = reference;\n                  var index = annotations._annotations.length;\n                  annotations._annotations.push(reference);\n                  pageDictionary.set('Annots', annotations._annotations);\n                  pageDictionary._updated = true;\n                  annotations._parsedAnnotations.set(index, annotation);\n                  _this._handlePopup(annotations, reference, dictionary, pageDictionary);\n                }\n              }\n            }\n          }\n        }\n      });\n    } else {\n      token = parser.getObject();\n      if (!this._asPerSpecification) {\n        token = parser.getObject();\n        if (token instanceof _PdfCommand && token.command !== null) {\n          token = token.command;\n        }\n        while (token !== null && typeof token !== 'undefined' && token !== 'EOF') {\n          if (token instanceof _PdfDictionary) {\n            var t = token.getArray('T');\n            var v = void 0;\n            if (token._map.V instanceof _PdfName) {\n              v = token.getArray('V').name;\n            } else {\n              v = token.getArray('V');\n            }\n            if (t !== null && t !== undefined && t.length > 0) {\n              this._table.set(t, v);\n            }\n          }\n          token = parser.getObject();\n        }\n      } else {\n        while (token !== null && typeof token !== 'undefined' && token !== 'EOF') {\n          if (token instanceof _PdfDictionary && token !== null && token._map.FDF !== null && token._map.FDF !== undefined) {\n            token = token._map.FDF;\n            if (token instanceof _PdfDictionary && token._map.Fields !== null && token._map.Fields !== undefined) {\n              token = token._map.Fields;\n              if (token !== null && token !== undefined) {\n                for (var i = 0; i < token.length; i++) {\n                  var field = token[Number.parseInt(i.toString(), 10)];\n                  if (field instanceof _PdfDictionary && field !== null && field !== undefined) {\n                    var t = field.getArray('T');\n                    var v = void 0;\n                    if (field._map.V instanceof _PdfName) {\n                      v = field.getArray('V').name;\n                    } else {\n                      v = field.getArray('V');\n                    }\n                    if (t !== null && t !== undefined && t.length > 0) {\n                      this._table.set(t, v);\n                    }\n                  }\n                }\n              }\n            }\n          }\n          token = parser.getObject();\n        }\n      }\n      this._importField();\n    }\n  };\n  _FdfDocument.prototype._parseAnnotationData = function () {\n    var objects = new Map(); // eslint-disable-line\n    var mappedObjects = new Map(); // eslint-disable-line  \n    objects = this._table;\n    if (objects !== null && typeof objects !== 'undefined' && objects.size > 0 && objects.has('trailer')) {\n      var trailer = objects.get('trailer');\n      if (trailer instanceof _PdfDictionary && trailer !== null && typeof trailer !== 'undefined' && trailer.has('Root')) {\n        var holder = trailer.getRaw('Root');\n        if (holder !== null && typeof holder !== 'undefined') {\n          var rootKey = holder.objectNumber.toString() + ' ' + holder.generationNumber.toString();\n          if (objects.has(rootKey)) {\n            var root = objects.get(rootKey);\n            if (root !== null && typeof root !== 'undefined' && root.has('FDF')) {\n              var fdf = root.get('FDF');\n              if (fdf !== null && typeof fdf !== 'undefined' && fdf.has('Annots')) {\n                var annots = fdf.get('Annots');\n                if (annots !== null && typeof annots !== 'undefined' && annots.length > 0) {\n                  for (var i = 0; i < annots.length; i++) {\n                    var annot = annots[Number.parseInt(i.toString(), 10)];\n                    var key = annot.objectNumber.toString() + ' ' + annot.generationNumber.toString();\n                    if (objects.has(key)) {\n                      annot = objects.get(key);\n                      mappedObjects.set(key, annot);\n                      objects.delete(key);\n                    }\n                  }\n                }\n              }\n            }\n          }\n          objects.delete(rootKey);\n        }\n      }\n      objects.delete('trailer');\n    }\n    return mappedObjects;\n  };\n  _FdfDocument.prototype._importField = function () {\n    var _this = this;\n    var form = this._document.form;\n    var count = form.count;\n    if (count) {\n      this._table.forEach(function (value, key) {\n        var textValue;\n        if (_this._table.size > 0 && _this._table.has(key)) {\n          textValue = _this._table.get(key);\n        }\n        var index = form._getFieldIndex(key);\n        if (index !== -1 && index < count) {\n          var field = form.fieldAt(index);\n          if (field) {\n            if (textValue && textValue !== '') {\n              field._dictionary.update('RV', textValue);\n            }\n            var param = [];\n            if (Array.isArray(value)) {\n              param = value;\n            } else {\n              param.push(value);\n            }\n            _this._importFieldData(field, param);\n          }\n        }\n      });\n    }\n  };\n  //#region Export Annotations\n  _FdfDocument.prototype._exportAnnotationData = function (document, pageCount) {\n    var genNumber = _StringTokenizer._whiteSpace + '0' + _StringTokenizer._whiteSpace;\n    var startDictionary = '<<' + '/';\n    this.fdfString += '%FDF-1.2' + '\\r\\n';\n    var index = 2;\n    var annot = new Array();\n    var appearance = this.exportAppearance;\n    for (var i = 0; i < pageCount; i++) {\n      var page = document.getPage(i);\n      if (page !== null && typeof page !== 'undefined' && page.annotations.count > 0) {\n        for (var k = 0; k < page.annotations.count; k++) {\n          var annotation = page.annotations.at(k);\n          if (annotation !== null && typeof annotation !== 'undefined' && !(annotation instanceof PdfFileLinkAnnotation || annotation instanceof PdfTextWebLinkAnnotation || annotation instanceof PdfDocumentLinkAnnotation || annotation instanceof PdfUriAnnotation)) {\n            if (annotation instanceof PdfRubberStampAnnotation || annotation instanceof PdfRectangleAnnotation) {\n              var value = this._exportAnnotation(annotation, this.fdfString, index, annot, i, true);\n              index = value.index;\n              annot = value.annot;\n            } else {\n              var value = this._exportAnnotation(annotation, this.fdfString, index, annot, i, appearance);\n              index = value.index;\n              annot = value.annot;\n            }\n          }\n        }\n      }\n    }\n    if (index !== 2) {\n      var root = '1' + genNumber;\n      this.fdfString += root + 'obj' + '\\r\\n' + startDictionary + 'FDF' + startDictionary + 'Annots' + '[';\n      for (var i = 0; i < annot.length - 1; i++) {\n        this.fdfString += annot[Number.parseInt(i.toString(), 10)] + genNumber + 'R' + ' ';\n      }\n      this.fdfString += annot[annot.length - 1] + genNumber + 'R' + ']' + '/' + 'F' + '(' + this._fileName + ')' + '/' + 'UF' + '(';\n      this.fdfString += this._fileName + ')>>' + '/' + 'Type' + '/' + 'Catalog' + '>>' + '\\r\\n' + 'endobj' + '\\r\\n';\n      this.fdfString += 'trailer' + '\\r\\n' + startDictionary + 'Root' + ' ' + root + 'R' + '>>' + '\\r\\n' + '%%EOF' + '\\r\\n';\n    }\n  };\n  _FdfDocument.prototype._exportAnnotation = function (annotation, fdfString, index, annot, pageIndex, appearance) {\n    this.fdfString = fdfString;\n    var helper = new _FdfHelper();\n    var dictionary = annotation._dictionary;\n    var startObject = _StringTokenizer._whiteSpace + '0' + _StringTokenizer._whiteSpace + 'obj' + '\\r\\n';\n    var endObject = '\\r\\n' + 'endobj' + '\\r\\n';\n    this._annotationID = index.toString();\n    this.fdfString += index + startObject + '<<';\n    var list = new Map(); // eslint-disable-line\n    var streamReference = new Array();\n    annot.push(this._annotationID);\n    dictionary.set('Page', pageIndex);\n    var annotValue = this._getEntries(list, streamReference, index, dictionary, this.fdfString, appearance);\n    index = annotValue.index;\n    list = annotValue.list;\n    streamReference = annotValue.streamReference;\n    delete dictionary._map.Page;\n    this.fdfString += '>>' + endObject;\n    var _loop_1 = function () {\n      var keys = Array();\n      list.forEach(function (key, value) {\n        keys.push(value);\n      });\n      for (var i = 0; i < keys.length; i++) {\n        var key = keys[Number.parseInt(i.toString(), 10)];\n        if (list.get(key) instanceof _PdfDictionary || list.get(key) instanceof _PdfStream || list.get(key) instanceof _PdfFlateStream) {\n          if (list.get(key) instanceof _PdfDictionary) {\n            dictionary = list.get(key);\n          } else {\n            dictionary = list.get(key).dictionary;\n          }\n          if (dictionary !== null && typeof dictionary !== 'undefined') {\n            if (dictionary instanceof _PdfDictionary && dictionary.has('Type')) {\n              var type = dictionary.get('Type');\n              if (type !== null && typeof type !== 'undefined' && type.name === 'Annot') {\n                annot.push(key.toString());\n                dictionary.set('Page', pageIndex);\n              }\n            }\n            this_1.fdfString += key + startObject + '<<';\n            var value = this_1._getEntries(list, streamReference, index, dictionary, this_1.fdfString, appearance);\n            list = value.list;\n            streamReference = value.streamReference;\n            index = value.index;\n            if (dictionary instanceof _PdfDictionary && dictionary.has('Page')) {\n              delete dictionary._map.Page;\n            }\n            this_1.fdfString += '>>';\n            if (streamReference !== null && typeof streamReference !== 'undefined' && streamReference.indexOf(key) !== -1) {\n              this_1._appendStream(list.get(key), this_1.fdfString);\n            }\n            this_1.fdfString += endObject;\n          }\n        }\n        list.delete(key);\n      }\n    };\n    var this_1 = this;\n    while (list.size > 0) {\n      _loop_1();\n    }\n    index++;\n    helper.index = index;\n    helper.annot = annot;\n    return helper;\n  };\n  _FdfDocument.prototype._appendStream = function (value, fdfString) {\n    var stream = value; // eslint-disable-line\n    this.fdfString = fdfString;\n    if (value instanceof _PdfFlateStream || value instanceof _PdfStream) {\n      if (value instanceof _PdfFlateStream) {\n        stream = value.stream;\n      } else {\n        stream = value;\n      }\n    }\n    if (value instanceof _PdfFlateStream || value instanceof _PdfStream) {\n      var byteArray = stream.getBytes();\n      var dataArray = new Uint8Array(byteArray);\n      var sw = new CompressedStreamWriter();\n      sw.write(dataArray, 0, dataArray.length);\n      sw.close();\n      var compressString = sw.getCompressedString;\n      this.fdfString += 'stream' + '\\r\\n';\n      this.fdfString += compressString;\n      this.fdfString += '\\r\\n' + 'endstream';\n    }\n  };\n  _FdfDocument.prototype._getEntries = function (list,\n  // eslint-disable-line\n  streamReference, index, dictionary, fdfString, hasAppearance) {\n    var _this = this;\n    var flag = false;\n    var helper = new _FdfHelper();\n    this.fdfString = fdfString;\n    var listDictionary = list; // eslint-disable-line\n    dictionary.forEach(function (key, value) {\n      if (!(!hasAppearance && key === 'AP')) {\n        if (key !== 'P') {\n          _this.fdfString += '/' + key;\n        }\n        if (key === 'Sound' || key === 'F' || hasAppearance) {\n          flag = true;\n        }\n        var primitive = value; // eslint-disable-line\n        if (typeof primitive === 'string') {\n          _this.fdfString += '(' + _this._getFormattedString(primitive) + ')';\n        } else if (primitive instanceof _PdfName) {\n          _this.fdfString += '/' + primitive.name;\n        } else if (primitive instanceof Array) {\n          primitive = primitive; // eslint-disable-line\n          var value_1 = _this._appendArray(primitive, _this.fdfString, index, flag, listDictionary, streamReference);\n          listDictionary = value_1.list;\n          streamReference = value_1.streamReference;\n          index = value_1.index;\n        } else if (typeof primitive === 'number') {\n          _this.fdfString += ' ' + primitive.toString();\n        } else if (typeof primitive === 'boolean') {\n          _this.fdfString += ' ' + (primitive ? 'true' : 'false');\n        } else if (primitive instanceof _PdfDictionary) {\n          _this.fdfString += '<<';\n          primitive = primitive;\n          var value_2 = _this._getEntries(listDictionary, streamReference, index, primitive, _this.fdfString, hasAppearance);\n          listDictionary = value_2.list;\n          streamReference = value_2.streamReference;\n          index = value_2.index;\n          _this.fdfString += '>>';\n        } else if (primitive instanceof _PdfReference) {\n          var pageNumber = dictionary.get('Page');\n          if (key === 'Parent') {\n            _this.fdfString += ' ' + _this._annotationID + ' 0 R';\n            _this.fdfString += '/Page ' + pageNumber;\n          } else if (key === 'IRT') {\n            if (dictionary.has('NM')) {\n              var name_1 = dictionary.get('NM');\n              if (name_1 !== null) {\n                _this.fdfString += '(' + _this._getFormattedString(name_1) + ')';\n              }\n            }\n          } else if (key !== 'P') {\n            var holder = primitive;\n            if (holder !== null && typeof holder !== 'undefined') {\n              index++;\n              _this.fdfString += ' ' + index + ' 0 R';\n              if (flag) {\n                streamReference.push(index);\n              }\n              listDictionary.set(index, dictionary.get(key));\n            }\n          }\n        }\n        flag = false;\n      }\n    });\n    helper.list = listDictionary;\n    helper.streamReference = streamReference;\n    helper.index = index;\n    return helper;\n  };\n  _FdfDocument.prototype._appendArray = function (array,\n  // eslint-disable-line\n  fdfString, index, flag, list,\n  // eslint-disable-line\n  streamReference) {\n    this.fdfString = fdfString;\n    this.fdfString += '[';\n    var helper = new _FdfHelper();\n    var listDictionary = list; // eslint-disable-line\n    if (array !== null && array.length > 0) {\n      var count = array.length;\n      for (var i = 0; i < count; i++) {\n        var element = array[Number.parseInt(i.toString(), 10)]; // eslint-disable-line\n        if (i !== 0 && (typeof element === 'number' || element instanceof _PdfReference || typeof element === 'boolean')) {\n          this.fdfString += ' ';\n        }\n        var value = this._appendElement(element, this.fdfString, index, flag, listDictionary, streamReference);\n        listDictionary = value.list;\n        streamReference = value.streamReference;\n        index = value.index;\n      }\n    }\n    this.fdfString += ']';\n    helper.list = listDictionary;\n    helper.streamReference = streamReference;\n    helper.index = index;\n    return helper;\n  };\n  _FdfDocument.prototype._appendElement = function (element,\n  // eslint-disable-line\n  fdfString, index, flag, list,\n  // eslint-disable-line\n  streamReference) {\n    this.fdfString = fdfString;\n    var helper = new _FdfHelper();\n    var listDictionary = list; // eslint-disable-line\n    if (typeof element === 'number') {\n      this.fdfString += element.toString();\n    } else if (element instanceof _PdfName) {\n      this.fdfString += element.name.toString();\n    } else if (element instanceof Array) {\n      element = element; // eslint-disable-line\n      var value = this._appendArray(element, this.fdfString, index, flag, listDictionary, streamReference);\n      listDictionary = value.list;\n      streamReference = value.streamReference;\n      index = value.index;\n    } else if (element instanceof _PdfDictionary) {\n      this.fdfString += '<<';\n      element = element;\n      var value = this._getEntries(listDictionary, streamReference, index, element, this.fdfString, flag);\n      listDictionary = value.list;\n      streamReference = value.streamReference;\n      index = value.index;\n      this.fdfString += '>>';\n    }\n    helper.list = listDictionary;\n    helper.streamReference = streamReference;\n    helper.index = index;\n    return helper;\n  };\n  _FdfDocument.prototype._getFormattedString = function (value) {\n    var result = '';\n    for (var i = 0; i < value.length; i++) {\n      var c = value.charCodeAt(i);\n      if (c === 40 || c === 41) {\n        result += '\\'';\n      }\n      result += String.fromCharCode(c);\n    }\n    return result;\n  };\n  //#endregion\n  _FdfDocument.prototype._checkFdf = function (element) {\n    if (element.includes(this._specialCharacters) || element.includes('Ã¢Ã£Ã\\u008fÃ\\u0093')) {\n      this._asPerSpecification = true;\n    }\n    if (element.startsWith('%')) {\n      var token = element.substring(1, 5);\n      if (token !== 'FDF-') {\n        // eslint-disable-line\n        throw new Error('Invalid FDF file.');\n      }\n    }\n  };\n  _FdfDocument.prototype._stringToHexString = function (text) {\n    var hexString = '';\n    if (text !== null && typeof text !== 'undefined' && text.length > 0) {\n      var bytesValue = _stringToBytes(text);\n      hexString = _byteArrayToHexString(bytesValue);\n    }\n    return hexString;\n  };\n  return _FdfDocument;\n}(_ExportHelper);\nexport { _FdfDocument };\nvar _FdfHelper = /** @class */function () {\n  function _FdfHelper() {}\n  return _FdfHelper;\n}();\nexport { _FdfHelper };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","_PdfDictionary","_PdfName","_PdfReference","_PdfParser","_PdfLexicalOperator","_PdfStream","_PdfCommand","_ExportHelper","PdfUriAnnotation","PdfRubberStampAnnotation","PdfFileLinkAnnotation","PdfTextWebLinkAnnotation","PdfRectangleAnnotation","PdfDocumentLinkAnnotation","_bytesToString","_getNewGuidString","_byteArrayToHexString","_stringToBytes","PdfCheckBoxField","PdfComboBoxField","PdfListBoxField","PdfRadioButtonListField","PdfTextBoxField","_StringTokenizer","_PdfFlateStream","CompressedStreamWriter","_FdfDocument","_super","fileName","_this","call","_annotationObjects","Map","_specialCharacters","_fileName","_exportAnnotations","document","_document","_crossReference","_isAnnotationExport","_exportAnnotationData","pageCount","_save","_exportFormFields","_key","objectID","objectArray","_asPerSpecification","fdfString","form","_exportEmptyFields","exportEmptyFields","count","i","field","fieldAt","value","_exportFormFieldsData","push","_stringToHexString","name","isArray","length","j","Number","parseInt","toString","_table","size","export","arrayBuffer","ArrayBuffer","result","Uint8Array","forEach","val","charCodeAt","_importAnnotations","data","_checkFdf","stream","_isAnnotationImport","parser","_readFdfData","clear","_importFormData","token","getObject","key","set","isInteger","first","command","_parseAnnotationData","dictionary","_updated","has","pageNumber","get","pageIndex","page","getPage","pageDictionary","_pageDictionary","annotations","annotation","_parseAnnotation","_isImported","reference","_getNextReference","_cacheMap","_addReferenceToGroup","_ref","index","_annotations","_parsedAnnotations","_handlePopup","t","getArray","v","_map","V","undefined","FDF","Fields","_importField","objects","mappedObjects","trailer","holder","getRaw","rootKey","objectNumber","generationNumber","root","fdf","annots","annot","delete","textValue","_getFieldIndex","_dictionary","update","param","_importFieldData","genNumber","_whiteSpace","startDictionary","appearance","exportAppearance","k","at","_exportAnnotation","helper","_FdfHelper","startObject","endObject","_annotationID","list","streamReference","annotValue","_getEntries","Page","_loop_1","keys","type","this_1","indexOf","_appendStream","byteArray","getBytes","dataArray","sw","write","close","compressString","getCompressedString","hasAppearance","flag","listDictionary","primitive","_getFormattedString","value_1","_appendArray","value_2","name_1","array","element","_appendElement","c","String","fromCharCode","includes","startsWith","substring","Error","text","hexString","bytesValue"],"sources":["/Users/saleem/Desktop/KClient/Web App/Ver_3.6/User Interface/website_Source files/node_modules/@syncfusion/ej2-pdf/src/pdf/core/import-export/fdf-document.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { _PdfDictionary, _PdfName, _PdfReference } from './../pdf-primitives';\nimport { _PdfParser, _PdfLexicalOperator } from '../pdf-parser';\nimport { _PdfStream } from '../base-stream';\nimport { _PdfCommand } from './../pdf-primitives';\nimport { _ExportHelper } from './xfdf-document';\nimport { PdfUriAnnotation, PdfRubberStampAnnotation, PdfFileLinkAnnotation, PdfTextWebLinkAnnotation, PdfRectangleAnnotation, PdfDocumentLinkAnnotation } from './../annotations/annotation';\nimport { _bytesToString, _getNewGuidString, _byteArrayToHexString, _stringToBytes } from './../utils';\nimport { PdfCheckBoxField, PdfComboBoxField, PdfListBoxField, PdfRadioButtonListField, PdfTextBoxField } from './../form/field';\nimport { _StringTokenizer } from './../fonts/string-layouter';\nimport { _PdfFlateStream } from '../flate-stream';\nimport { CompressedStreamWriter } from '@syncfusion/ej2-compression';\nvar _FdfDocument = /** @class */ (function (_super) {\n    __extends(_FdfDocument, _super);\n    function _FdfDocument(fileName) {\n        var _this = _super.call(this) || this;\n        _this._annotationObjects = new Map(); // eslint-disable-line\n        _this._specialCharacters = 'âãÏÓ';\n        if (fileName !== null && typeof fileName !== 'undefined') {\n            _this._fileName = fileName;\n        }\n        return _this;\n    }\n    _FdfDocument.prototype._exportAnnotations = function (document) {\n        this._document = document;\n        this._crossReference = document._crossReference;\n        this._isAnnotationExport = true;\n        this._exportAnnotationData(document, document.pageCount);\n        return this._save();\n    };\n    _FdfDocument.prototype._exportFormFields = function (document) {\n        this._document = document;\n        this._crossReference = document._crossReference;\n        this._isAnnotationExport = false;\n        this._key = _getNewGuidString();\n        return this._save();\n    };\n    _FdfDocument.prototype._save = function () {\n        var _this = this;\n        var objectID = 0;\n        var objectArray = [];\n        if (!this._isAnnotationExport) {\n            if (this._asPerSpecification) {\n                this.fdfString += '%FDF-1.2\\n%' + this._specialCharacters + '\\r\\n1 0 obj\\r<</FDF<</F(';\n                this.fdfString += this._fileName + ')';\n                this.fdfString += '/Fields[';\n            }\n            else {\n                this.fdfString += '%FDF-1.2\\n';\n            }\n            var form = this._document.form;\n            if (form !== null && typeof form !== 'undefined') {\n                this._exportEmptyFields = form.exportEmptyFields;\n                var count = this._document.form.count;\n                for (var i = 0; i < count; i++) {\n                    var field = this._document.form.fieldAt(i);\n                    var value = this._exportFormFieldsData(field);\n                    if (field instanceof PdfTextBoxField || field instanceof PdfListBoxField || field instanceof PdfComboBoxField\n                        || field instanceof PdfRadioButtonListField || field instanceof PdfCheckBoxField) {\n                        objectID++;\n                    }\n                    if (!this._asPerSpecification) {\n                        if (field instanceof PdfTextBoxField || field instanceof PdfListBoxField || field instanceof PdfComboBoxField) {\n                            objectArray.push(objectID);\n                            this.fdfString += objectID + ' 0 obj<</T <' + this._stringToHexString(field.name) + '> /V ';\n                            if (typeof value === 'string' || (Array.isArray(value) && value.length === 1)) {\n                                this.fdfString += '<' + this._stringToHexString((Array.isArray(value) ? value[0] : value)) + '>';\n                            }\n                            else if (Array.isArray(value)) {\n                                this.fdfString += '[';\n                                for (var j = 0; j < value.length; j++) {\n                                    this.fdfString += '<' + this._stringToHexString(value[Number.parseInt(j.toString(), 10)]) + '>';\n                                    if (j !== value.length - 1) {\n                                        this.fdfString += ' ';\n                                    }\n                                }\n                                this.fdfString += ']';\n                            }\n                            this.fdfString += ' >>endobj\\n';\n                        }\n                        else if (field instanceof PdfRadioButtonListField || field instanceof PdfCheckBoxField) {\n                            objectArray.push(objectID);\n                            this.fdfString += objectID + ' 0 obj<</T <' + this._stringToHexString(field.name) + '> /V /';\n                            this.fdfString += value + ' >>endobj\\n';\n                        }\n                    }\n                    else {\n                        if (field instanceof PdfTextBoxField || field instanceof PdfListBoxField || field instanceof PdfComboBoxField) {\n                            objectArray.push(objectID);\n                            this.fdfString += '<</T(' + field.name + ')/V';\n                            if (typeof value === 'string' || (Array.isArray(value) && value.length === 1)) {\n                                this.fdfString += '(' + (Array.isArray(value) ? value[0] : value) + ')';\n                            }\n                            else if (Array.isArray(value)) {\n                                this.fdfString += '[';\n                                for (var j = 0; j < value.length; j++) {\n                                    this.fdfString += '(' + value[Number.parseInt(j.toString(), 10)] + ')';\n                                    if (j !== value.length - 1) {\n                                        this.fdfString += ' ';\n                                    }\n                                }\n                                this.fdfString += ']';\n                            }\n                            this.fdfString += '>>';\n                        }\n                        else if (field instanceof PdfRadioButtonListField || field instanceof PdfCheckBoxField) {\n                            objectArray.push(objectID);\n                            this.fdfString += '<</T(' + field.name + ')/V/' + value + '>>';\n                        }\n                    }\n                }\n            }\n            if (this._asPerSpecification) {\n                this.fdfString += ']';\n                this.fdfString += '/ID[]/UF(' + this._fileName + ')>>/Type/Catalog>>\\rendobj\\rtrailer\\r\\n<</Root 1 0 R>>\\r\\n';\n                this.fdfString += '%%EOF\\r\\n';\n            }\n            else {\n                this.fdfString += (this._table.size + 1) + ' 0 obj<</F <' + this._stringToHexString(this._fileName) + '>  /Fields [';\n                for (var i = 0; i < this._table.size; i++) {\n                    var field = this._document.form.fieldAt(i);\n                    if (field !== null && typeof field !== 'undefined' && field.export) {\n                        this.fdfString += objectArray[Number.parseInt(i.toString(), 10)] + ' 0 R ';\n                    }\n                }\n                this.fdfString += ']>>endobj\\n';\n                this.fdfString += (objectArray.length + 2) + ' 0 obj<</Version /1.4 /FDF ' + (objectArray.length + 1) + ' 0 R>>endobj\\n';\n                this.fdfString += 'trailer\\n<</Root ' + (objectArray.length + 2) + ' 0 R>>';\n            }\n        }\n        var arrayBuffer = new ArrayBuffer(this.fdfString.length * 1);\n        var result = new Uint8Array(arrayBuffer);\n        result.forEach(function (val, i) {\n            result[i] = _this.fdfString.charCodeAt(i); // eslint-disable-line\n        });\n        return result;\n    };\n    _FdfDocument.prototype._importAnnotations = function (document, data) {\n        this._document = document;\n        this._crossReference = document._crossReference;\n        this._isAnnotationExport = false;\n        this._checkFdf(_bytesToString(data));\n        var stream = new _PdfStream(data);\n        this._isAnnotationImport = true;\n        var parser = new _PdfParser(new _PdfLexicalOperator(stream), null, true, false);\n        this._readFdfData(parser);\n        if (this._annotationObjects !== null && typeof this._annotationObjects !== 'undefined' && this._annotationObjects.size > 0) {\n            this._annotationObjects.clear();\n        }\n        if (this._table !== null && typeof this._table !== 'undefined' && this._table.size > 0) {\n            this._table.clear();\n        }\n    };\n    _FdfDocument.prototype._importFormData = function (document, data) {\n        this._document = document;\n        this._crossReference = document._crossReference;\n        this._isAnnotationExport = false;\n        this._checkFdf(_bytesToString(data));\n        var stream = new _PdfStream(data);\n        var parser = new _PdfParser(new _PdfLexicalOperator(stream), null, false, false);\n        this._readFdfData(parser);\n    };\n    _FdfDocument.prototype._readFdfData = function (parser) {\n        var _this = this;\n        var token = parser.getObject(); // eslint-disable-line\n        if (this._isAnnotationImport) {\n            var key = '';\n            while (token !== null && typeof token !== 'undefined' && token !== 'EOF') {\n                if (token instanceof _PdfDictionary) {\n                    this._table.set(key, token);\n                    key = '';\n                }\n                else if (token instanceof _PdfStream || token instanceof _PdfFlateStream) {\n                    this._table.set(key, token);\n                    key = '';\n                }\n                else if (token !== null && Number.isInteger(token) && token !== 0) {\n                    if (parser.first >= 0) {\n                        key = token.toString() + ' ' + parser.first.toString();\n                    }\n                }\n                else if (token instanceof _PdfCommand && token.command !== null && typeof token.command !== 'undefined' &&\n                    token.command === 'trailer') {\n                    key = token.command;\n                }\n                token = parser.getObject();\n            }\n            this._annotationObjects = this._parseAnnotationData();\n            this._annotationObjects.forEach(function (value, key) {\n                var dictionary = value;\n                dictionary._crossReference = _this._crossReference;\n                dictionary._updated = true;\n                if (dictionary !== null && typeof dictionary !== 'undefined' && dictionary.has('Page')) {\n                    var pageNumber = dictionary.get('Page');\n                    if (pageNumber !== null && typeof pageNumber !== 'undefined') {\n                        var pageIndex = pageNumber;\n                        if (pageIndex < _this._document.pageCount) {\n                            var page = _this._document.getPage(pageIndex);\n                            var pageDictionary = page._pageDictionary;\n                            if (pageDictionary !== null && typeof pageDictionary !== 'undefined') {\n                                var annotations = page.annotations;\n                                var annotation = annotations._parseAnnotation(dictionary);\n                                if (annotation !== null && typeof annotation !== 'undefined') {\n                                    annotation._isImported = true;\n                                    var reference = _this._crossReference._getNextReference();\n                                    _this._crossReference._cacheMap.set(reference, dictionary);\n                                    if (dictionary.has('NM') || dictionary.has('IRT')) {\n                                        _this._addReferenceToGroup(reference, dictionary);\n                                    }\n                                    annotation._ref = reference;\n                                    var index = annotations._annotations.length;\n                                    annotations._annotations.push(reference);\n                                    pageDictionary.set('Annots', annotations._annotations);\n                                    pageDictionary._updated = true;\n                                    annotations._parsedAnnotations.set(index, annotation);\n                                    _this._handlePopup(annotations, reference, dictionary, pageDictionary);\n                                }\n                            }\n                        }\n                    }\n                }\n            });\n        }\n        else {\n            token = parser.getObject();\n            if (!this._asPerSpecification) {\n                token = parser.getObject();\n                if (token instanceof _PdfCommand && token.command !== null) {\n                    token = token.command;\n                }\n                while (token !== null && typeof token !== 'undefined' && token !== 'EOF') {\n                    if (token instanceof _PdfDictionary) {\n                        var t = token.getArray('T');\n                        var v = void 0;\n                        if (token._map.V instanceof _PdfName) {\n                            v = token.getArray('V').name;\n                        }\n                        else {\n                            v = token.getArray('V');\n                        }\n                        if (t !== null && t !== undefined && t.length > 0) {\n                            this._table.set(t, v);\n                        }\n                    }\n                    token = parser.getObject();\n                }\n            }\n            else {\n                while (token !== null && typeof token !== 'undefined' && token !== 'EOF') {\n                    if (token instanceof _PdfDictionary && token !== null && token._map.FDF !== null && token._map.FDF !== undefined) {\n                        token = token._map.FDF;\n                        if (token instanceof _PdfDictionary && token._map.Fields !== null && token._map.Fields !== undefined) {\n                            token = token._map.Fields;\n                            if (token !== null && token !== undefined) {\n                                for (var i = 0; i < token.length; i++) {\n                                    var field = token[Number.parseInt(i.toString(), 10)];\n                                    if (field instanceof _PdfDictionary && field !== null && field !== undefined) {\n                                        var t = field.getArray('T');\n                                        var v = void 0;\n                                        if (field._map.V instanceof _PdfName) {\n                                            v = field.getArray('V').name;\n                                        }\n                                        else {\n                                            v = field.getArray('V');\n                                        }\n                                        if (t !== null && t !== undefined && t.length > 0) {\n                                            this._table.set(t, v);\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                    token = parser.getObject();\n                }\n            }\n            this._importField();\n        }\n    };\n    _FdfDocument.prototype._parseAnnotationData = function () {\n        var objects = new Map(); // eslint-disable-line\n        var mappedObjects = new Map(); // eslint-disable-line  \n        objects = this._table;\n        if (objects !== null && typeof objects !== 'undefined' && objects.size > 0 && objects.has('trailer')) {\n            var trailer = objects.get('trailer');\n            if (trailer instanceof _PdfDictionary && trailer !== null && typeof trailer !== 'undefined' && trailer.has('Root')) {\n                var holder = trailer.getRaw('Root');\n                if (holder !== null && typeof holder !== 'undefined') {\n                    var rootKey = holder.objectNumber.toString() + ' ' + holder.generationNumber.toString();\n                    if (objects.has(rootKey)) {\n                        var root = objects.get(rootKey);\n                        if (root !== null && typeof root !== 'undefined' && root.has('FDF')) {\n                            var fdf = root.get('FDF');\n                            if (fdf !== null && typeof fdf !== 'undefined' && fdf.has('Annots')) {\n                                var annots = fdf.get('Annots');\n                                if (annots !== null && typeof annots !== 'undefined' && annots.length > 0) {\n                                    for (var i = 0; i < annots.length; i++) {\n                                        var annot = annots[Number.parseInt(i.toString(), 10)];\n                                        var key = annot.objectNumber.toString() + ' ' + annot.generationNumber.toString();\n                                        if (objects.has(key)) {\n                                            annot = objects.get(key);\n                                            mappedObjects.set(key, annot);\n                                            objects.delete(key);\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                    objects.delete(rootKey);\n                }\n            }\n            objects.delete('trailer');\n        }\n        return mappedObjects;\n    };\n    _FdfDocument.prototype._importField = function () {\n        var _this = this;\n        var form = this._document.form;\n        var count = form.count;\n        if (count) {\n            this._table.forEach(function (value, key) {\n                var textValue;\n                if (_this._table.size > 0 && _this._table.has(key)) {\n                    textValue = _this._table.get(key);\n                }\n                var index = form._getFieldIndex(key);\n                if (index !== -1 && index < count) {\n                    var field = form.fieldAt(index);\n                    if (field) {\n                        if (textValue && textValue !== '') {\n                            field._dictionary.update('RV', textValue);\n                        }\n                        var param = [];\n                        if (Array.isArray(value)) {\n                            param = value;\n                        }\n                        else {\n                            param.push(value);\n                        }\n                        _this._importFieldData(field, param);\n                    }\n                }\n            });\n        }\n    };\n    //#region Export Annotations\n    _FdfDocument.prototype._exportAnnotationData = function (document, pageCount) {\n        var genNumber = _StringTokenizer._whiteSpace + '0' + _StringTokenizer._whiteSpace;\n        var startDictionary = '<<' + '/';\n        this.fdfString += '%FDF-1.2' + '\\r\\n';\n        var index = 2;\n        var annot = new Array();\n        var appearance = this.exportAppearance;\n        for (var i = 0; i < pageCount; i++) {\n            var page = document.getPage(i);\n            if (page !== null && typeof page !== 'undefined' && page.annotations.count > 0) {\n                for (var k = 0; k < page.annotations.count; k++) {\n                    var annotation = page.annotations.at(k);\n                    if (annotation !== null && typeof annotation !== 'undefined' && !(annotation instanceof PdfFileLinkAnnotation ||\n                        annotation instanceof PdfTextWebLinkAnnotation || annotation instanceof PdfDocumentLinkAnnotation ||\n                        annotation instanceof PdfUriAnnotation)) {\n                        if (annotation instanceof PdfRubberStampAnnotation || annotation instanceof PdfRectangleAnnotation) {\n                            var value = this._exportAnnotation(annotation, this.fdfString, index, annot, i, true);\n                            index = value.index;\n                            annot = value.annot;\n                        }\n                        else {\n                            var value = this._exportAnnotation(annotation, this.fdfString, index, annot, i, appearance);\n                            index = value.index;\n                            annot = value.annot;\n                        }\n                    }\n                }\n            }\n        }\n        if (index !== 2) {\n            var root = '1' + genNumber;\n            this.fdfString += root + 'obj' + '\\r\\n' + startDictionary + 'FDF' + startDictionary + 'Annots' + '[';\n            for (var i = 0; i < annot.length - 1; i++) {\n                this.fdfString += annot[Number.parseInt(i.toString(), 10)] + genNumber + 'R' + ' ';\n            }\n            this.fdfString += annot[annot.length - 1] + genNumber + 'R' + ']' + '/' + 'F' + '(' + this._fileName + ')' + '/' + 'UF' + '(';\n            this.fdfString += this._fileName + ')>>' + '/' + 'Type' + '/' + 'Catalog' + '>>' + '\\r\\n' + 'endobj' + '\\r\\n';\n            this.fdfString += 'trailer' + '\\r\\n' + startDictionary + 'Root' + ' ' + root + 'R' + '>>' + '\\r\\n' + '%%EOF' + '\\r\\n';\n        }\n    };\n    _FdfDocument.prototype._exportAnnotation = function (annotation, fdfString, index, annot, pageIndex, appearance) {\n        this.fdfString = fdfString;\n        var helper = new _FdfHelper();\n        var dictionary = annotation._dictionary;\n        var startObject = _StringTokenizer._whiteSpace + '0' + _StringTokenizer._whiteSpace + 'obj' + '\\r\\n';\n        var endObject = '\\r\\n' + 'endobj' + '\\r\\n';\n        this._annotationID = index.toString();\n        this.fdfString += index + startObject + '<<';\n        var list = new Map(); // eslint-disable-line\n        var streamReference = new Array();\n        annot.push(this._annotationID);\n        dictionary.set('Page', pageIndex);\n        var annotValue = this._getEntries(list, streamReference, index, dictionary, this.fdfString, appearance);\n        index = annotValue.index;\n        list = annotValue.list;\n        streamReference = annotValue.streamReference;\n        delete dictionary._map.Page;\n        this.fdfString += '>>' + endObject;\n        var _loop_1 = function () {\n            var keys = Array();\n            list.forEach(function (key, value) {\n                keys.push(value);\n            });\n            for (var i = 0; i < keys.length; i++) {\n                var key = keys[Number.parseInt(i.toString(), 10)];\n                if (list.get(key) instanceof _PdfDictionary || list.get(key) instanceof _PdfStream ||\n                    list.get(key) instanceof _PdfFlateStream) {\n                    if (list.get(key) instanceof _PdfDictionary) {\n                        dictionary = list.get(key);\n                    }\n                    else {\n                        dictionary = list.get(key).dictionary;\n                    }\n                    if (dictionary !== null && typeof dictionary !== 'undefined') {\n                        if (dictionary instanceof _PdfDictionary && dictionary.has('Type')) {\n                            var type = dictionary.get('Type');\n                            if (type !== null && typeof type !== 'undefined' && type.name === 'Annot') {\n                                annot.push(key.toString());\n                                dictionary.set('Page', pageIndex);\n                            }\n                        }\n                        this_1.fdfString += key + startObject + '<<';\n                        var value = this_1._getEntries(list, streamReference, index, dictionary, this_1.fdfString, appearance);\n                        list = value.list;\n                        streamReference = value.streamReference;\n                        index = value.index;\n                        if (dictionary instanceof _PdfDictionary && dictionary.has('Page')) {\n                            delete dictionary._map.Page;\n                        }\n                        this_1.fdfString += '>>';\n                        if (streamReference !== null && typeof streamReference !== 'undefined' && streamReference.indexOf(key) !== -1) {\n                            this_1._appendStream(list.get(key), this_1.fdfString);\n                        }\n                        this_1.fdfString += endObject;\n                    }\n                }\n                list.delete(key);\n            }\n        };\n        var this_1 = this;\n        while (list.size > 0) {\n            _loop_1();\n        }\n        index++;\n        helper.index = index;\n        helper.annot = annot;\n        return helper;\n    };\n    _FdfDocument.prototype._appendStream = function (value, fdfString) {\n        var stream = value; // eslint-disable-line\n        this.fdfString = fdfString;\n        if (value instanceof _PdfFlateStream || value instanceof _PdfStream) {\n            if (value instanceof _PdfFlateStream) {\n                stream = value.stream;\n            }\n            else {\n                stream = value;\n            }\n        }\n        if (value instanceof _PdfFlateStream || value instanceof _PdfStream) {\n            var byteArray = stream.getBytes();\n            var dataArray = new Uint8Array(byteArray);\n            var sw = new CompressedStreamWriter();\n            sw.write(dataArray, 0, dataArray.length);\n            sw.close();\n            var compressString = sw.getCompressedString;\n            this.fdfString += 'stream' + '\\r\\n';\n            this.fdfString += compressString;\n            this.fdfString += '\\r\\n' + 'endstream';\n        }\n    };\n    _FdfDocument.prototype._getEntries = function (list, // eslint-disable-line\n    streamReference, index, dictionary, fdfString, hasAppearance) {\n        var _this = this;\n        var flag = false;\n        var helper = new _FdfHelper();\n        this.fdfString = fdfString;\n        var listDictionary = list; // eslint-disable-line\n        dictionary.forEach(function (key, value) {\n            if (!((!hasAppearance && key === 'AP'))) {\n                if (key !== 'P') {\n                    _this.fdfString += '/' + key;\n                }\n                if (key === 'Sound' || key === 'F' || hasAppearance) {\n                    flag = true;\n                }\n                var primitive = value; // eslint-disable-line\n                if (typeof primitive === 'string') {\n                    _this.fdfString += '(' + _this._getFormattedString(primitive) + ')';\n                }\n                else if (primitive instanceof _PdfName) {\n                    _this.fdfString += '/' + primitive.name;\n                }\n                else if (primitive instanceof Array) {\n                    primitive = primitive; // eslint-disable-line\n                    var value_1 = _this._appendArray(primitive, _this.fdfString, index, flag, listDictionary, streamReference);\n                    listDictionary = value_1.list;\n                    streamReference = value_1.streamReference;\n                    index = value_1.index;\n                }\n                else if (typeof primitive === 'number') {\n                    _this.fdfString += ' ' + primitive.toString();\n                }\n                else if (typeof primitive === 'boolean') {\n                    _this.fdfString += ' ' + ((primitive) ? 'true' : 'false');\n                }\n                else if (primitive instanceof _PdfDictionary) {\n                    _this.fdfString += '<<';\n                    primitive = primitive;\n                    var value_2 = _this._getEntries(listDictionary, streamReference, index, primitive, _this.fdfString, hasAppearance);\n                    listDictionary = value_2.list;\n                    streamReference = value_2.streamReference;\n                    index = value_2.index;\n                    _this.fdfString += '>>';\n                }\n                else if (primitive instanceof _PdfReference) {\n                    var pageNumber = dictionary.get('Page');\n                    if (key === 'Parent') {\n                        _this.fdfString += ' ' + _this._annotationID + ' 0 R';\n                        _this.fdfString += '/Page ' + pageNumber;\n                    }\n                    else if (key === 'IRT') {\n                        if (dictionary.has('NM')) {\n                            var name_1 = dictionary.get('NM');\n                            if (name_1 !== null) {\n                                _this.fdfString += '(' + _this._getFormattedString(name_1) + ')';\n                            }\n                        }\n                    }\n                    else if (key !== 'P') {\n                        var holder = primitive;\n                        if (holder !== null && typeof holder !== 'undefined') {\n                            index++;\n                            _this.fdfString += ' ' + index + ' 0 R';\n                            if (flag) {\n                                streamReference.push(index);\n                            }\n                            listDictionary.set(index, dictionary.get(key));\n                        }\n                    }\n                }\n                flag = false;\n            }\n        });\n        helper.list = listDictionary;\n        helper.streamReference = streamReference;\n        helper.index = index;\n        return helper;\n    };\n    _FdfDocument.prototype._appendArray = function (array, // eslint-disable-line\n    fdfString, index, flag, list, // eslint-disable-line\n    streamReference) {\n        this.fdfString = fdfString;\n        this.fdfString += '[';\n        var helper = new _FdfHelper();\n        var listDictionary = list; // eslint-disable-line\n        if (array !== null && array.length > 0) {\n            var count = array.length;\n            for (var i = 0; i < count; i++) {\n                var element = array[Number.parseInt(i.toString(), 10)]; // eslint-disable-line\n                if (i !== 0 && (typeof element === 'number' || element instanceof _PdfReference || typeof element === 'boolean')) {\n                    this.fdfString += ' ';\n                }\n                var value = this._appendElement(element, this.fdfString, index, flag, listDictionary, streamReference);\n                listDictionary = value.list;\n                streamReference = value.streamReference;\n                index = value.index;\n            }\n        }\n        this.fdfString += ']';\n        helper.list = listDictionary;\n        helper.streamReference = streamReference;\n        helper.index = index;\n        return helper;\n    };\n    _FdfDocument.prototype._appendElement = function (element, // eslint-disable-line\n    fdfString, index, flag, list, // eslint-disable-line\n    streamReference) {\n        this.fdfString = fdfString;\n        var helper = new _FdfHelper();\n        var listDictionary = list; // eslint-disable-line\n        if (typeof element === 'number') {\n            this.fdfString += (element).toString();\n        }\n        else if (element instanceof _PdfName) {\n            this.fdfString += (element.name.toString());\n        }\n        else if (element instanceof Array) {\n            element = element; // eslint-disable-line\n            var value = this._appendArray(element, this.fdfString, index, flag, listDictionary, streamReference);\n            listDictionary = value.list;\n            streamReference = value.streamReference;\n            index = value.index;\n        }\n        else if (element instanceof _PdfDictionary) {\n            this.fdfString += '<<';\n            element = element;\n            var value = this._getEntries(listDictionary, streamReference, index, element, this.fdfString, flag);\n            listDictionary = value.list;\n            streamReference = value.streamReference;\n            index = value.index;\n            this.fdfString += '>>';\n        }\n        helper.list = listDictionary;\n        helper.streamReference = streamReference;\n        helper.index = index;\n        return helper;\n    };\n    _FdfDocument.prototype._getFormattedString = function (value) {\n        var result = '';\n        for (var i = 0; i < value.length; i++) {\n            var c = value.charCodeAt(i);\n            if (c === 40 || c === 41) {\n                result += '\\'';\n            }\n            result += String.fromCharCode(c);\n        }\n        return result;\n    };\n    //#endregion\n    _FdfDocument.prototype._checkFdf = function (element) {\n        if (element.includes(this._specialCharacters) || element.includes('Ã¢Ã£Ã\\u008fÃ\\u0093')) {\n            this._asPerSpecification = true;\n        }\n        if (element.startsWith('%')) {\n            var token = element.substring(1, 5);\n            if (token !== 'FDF-') { // eslint-disable-line\n                throw new Error('Invalid FDF file.');\n            }\n        }\n    };\n    _FdfDocument.prototype._stringToHexString = function (text) {\n        var hexString = '';\n        if (text !== null && typeof text !== 'undefined' && text.length > 0) {\n            var bytesValue = _stringToBytes(text);\n            hexString = _byteArrayToHexString(bytesValue);\n        }\n        return hexString;\n    };\n    return _FdfDocument;\n}(_ExportHelper));\nexport { _FdfDocument };\nvar _FdfHelper = /** @class */ (function () {\n    function _FdfHelper() {\n    }\n    return _FdfHelper;\n}());\nexport { _FdfHelper };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}