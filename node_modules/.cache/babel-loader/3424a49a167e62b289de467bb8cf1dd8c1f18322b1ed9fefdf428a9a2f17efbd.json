{"ast":null,"code":"var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nimport { createElement, Browser, isNullOrUndefined, isBlazor, Internationalization } from '@syncfusion/ej2-base';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { TextLayer, ContextMenu, Signature, PdfFormFieldBase, AccessibilityTags } from '../index';\nimport { NavigationPane } from './navigation-pane';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { AjaxHandler } from '../index';\nimport { Point, Rect, identityMatrix, transformPointByMatrix, contains, rotateMatrix } from '@syncfusion/ej2-drawings';\nimport { SelectTool, MoveTool, ResizeTool, ConnectTool, NodeDrawingTool, PolygonDrawingTool, LineTool, RotateTool, StampTool, InkDrawingTool } from '../drawing/tools';\nimport { Selector } from '../drawing/selector';\nimport { ActiveElements, findActiveElement } from '../drawing/action';\nimport { renderAdornerLayer } from '../drawing/dom-util';\nimport { cloneObject } from '../drawing/drawing-util';\nimport { BlazorContextMenu } from './blazor-context-menu';\nimport { createSpinner, showSpinner, hideSpinner } from './spinner';\nimport { BlazorUiAdaptor } from './blazor-ui-adaptor';\n/**\n * The `PdfViewerBase` module is used to handle base methods of PDF viewer.\n *\n * @hidden\n */\nvar PdfViewerBase = /** @class */function () {\n  /**\n   * Initialize the constructor of PDFViewerBase\n   *\n   * @param { PdfViewer } viewer - Specified PdfViewer class.\n   */\n  function PdfViewerBase(viewer) {\n    var _this = this;\n    /**\n     * @private\n     */\n    this.hyperlinkAndLinkAnnotation = {};\n    /**\n     * @private\n     */\n    this.pageTextDetails = {};\n    /**\n     * @private\n     */\n    this.pageImageDetails = {};\n    /**\n     * @private\n     */\n    this.pageSize = [];\n    /**\n     * @private\n     */\n    this.pageCount = 0;\n    /**\n     * @private\n     */\n    this.isReRenderRequired = true;\n    /**\n     * @private\n     */\n    this.currentPageNumber = 0;\n    /**\n     * @private\n     */\n    this.activeElements = new ActiveElements();\n    /**\n     * @private\n     */\n    this.mouseDownEvent = null;\n    /**\n     *\n     * @private\n     */\n    this.pngData = [];\n    /**\n     * @private\n     */\n    this.isDocumentLoaded = false;\n    /**\n     * @private\n     */\n    this.renderedPagesList = [];\n    /**\n     * @private\n     */\n    this.pageGap = 8;\n    /**\n     * @private\n     */\n    this.signatureAdded = false;\n    /**\n     * @private\n     */\n    this.isFreeTextSelected = false;\n    this.pageLeft = 5;\n    this.sessionLimit = 1000;\n    this.pageStopValue = 300;\n    /**\n     * @private\n     */\n    this.toolbarHeight = 56;\n    this.pageLimit = 0;\n    this.previousPage = 0;\n    this.isViewerMouseDown = false;\n    this.isViewerMouseWheel = false;\n    this.scrollPosition = 0;\n    this.sessionStorage = [];\n    /**\n     * @private\n     */\n    this.isLoadedFormFieldAdded = false;\n    this.pointerCount = 0;\n    this.pointersForTouch = [];\n    /**\n     * @private\n     */\n    this.isPasswordAvailable = false;\n    /**\n     * @private\n     */\n    this.passwordData = '';\n    /**\n     * @private\n     */\n    this.reRenderedCount = 0;\n    this.mouseX = 0;\n    this.mouseY = 0;\n    /**\n     * @private\n     */\n    this.mouseLeft = 0;\n    /**\n     * @private\n     */\n    this.mouseTop = 0;\n    this.touchClientX = 0;\n    this.touchClientY = 0;\n    this.previousTime = 0;\n    this.currentTime = 0;\n    this.isTouchScrolled = false;\n    this.isLongTouchPropagated = false;\n    // eslint-disable-next-line\n    this.longTouchTimer = null;\n    this.isViewerContainerDoubleClick = false;\n    // eslint-disable-next-line\n    this.dblClickTimer = null;\n    /**\n     * @private\n     */\n    this.pinchZoomStorage = [];\n    /**\n     * @private\n     */\n    this.isTextSelectionDisabled = false;\n    /**\n     * @private\n     */\n    this.isPanMode = false;\n    this.dragX = 0;\n    this.dragY = 0;\n    this.isScrollbarMouseDown = false;\n    this.scrollX = 0;\n    this.scrollY = 0;\n    this.ispageMoved = false;\n    this.isThumb = false;\n    this.isTapHidden = false;\n    // eslint-disable-next-line\n    this.singleTapTimer = null;\n    this.tapCount = 0;\n    this.inputTapCount = 0;\n    /**\n     * @private\n     */\n    this.isInitialLoaded = false;\n    this.annotationPageList = [];\n    this.importPageList = [];\n    /**\n     * @private\n     */\n    this.isImportAction = false;\n    this.isImportedAnnotation = false;\n    /**\n     * @private\n     */\n    this.isAnnotationCollectionRemoved = false;\n    /**\n     * @private\n     */\n    this.tool = null;\n    // eslint-disable-next-line\n    this.action = 'Select';\n    /**\n     * @private\n     */\n    this.eventArgs = null;\n    /**\n     * @private\n     */\n    this.inAction = false;\n    /**\n     * @private\n     */\n    this.isMouseDown = false;\n    /**\n     * @private\n     */\n    this.isStampMouseDown = false;\n    /**\n     * @private\n     */\n    this.stampAdded = false;\n    /**\n     * @private\n     */\n    this.customStampCount = 0;\n    /**\n     * @private\n     */\n    this.isDynamicStamp = false;\n    /**\n     * @private\n     */\n    this.isMixedSizeDocument = false;\n    /**\n     * @private\n     */\n    this.highestWidth = 0;\n    /**\n     * @private\n     */\n    this.highestHeight = 0;\n    /**\n     * @private\n     */\n    this.customStampCollection = [];\n    /**\n     * @private\n     */\n    this.isAlreadyAdded = false;\n    /**\n     * @private\n     */\n    this.isWebkitMobile = false;\n    /**\n     * @private\n     */\n    this.isFreeTextContextMenu = false;\n    /**\n     * @private\n     */\n    this.isSelection = false;\n    /**\n     * @private\n     */\n    this.isAddAnnotation = false;\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    this.annotationComments = null;\n    /**\n     * @private\n     */\n    this.isToolbarSignClicked = false;\n    /**\n     * @private\n     */\n    this.signatureCount = 0;\n    /**\n     * @private\n     */\n    this.isSignatureAdded = false;\n    /**\n     * @private\n     */\n    this.isNewSignatureAdded = false;\n    /**\n     * @private\n     */\n    this.isInitialPageMode = false;\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    this.documentAnnotationCollections = null;\n    /**\n     * @private\n     */\n    this.annotationRenderredList = [];\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    this.annotationStorage = {};\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    this.formFieldStorage = {};\n    /**\n     * @private\n     */\n    this.isStorageExceed = false;\n    /**\n     * @private\n     */\n    this.isFormStorageExceed = false;\n    /**\n     * @private\n     */\n    this.isNewStamp = false;\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    this.downloadCollections = {};\n    /**\n     * @private\n     */\n    this.isAnnotationAdded = false;\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    this.annotationEvent = null;\n    /**\n     * @private\n    */\n    this.isAnnotationDrawn = false;\n    /**\n     * @private\n     */\n    this.isAnnotationSelect = false;\n    /**\n     * @private\n     */\n    this.isAnnotationMouseDown = false;\n    /**\n     * @private\n     */\n    this.isAnnotationMouseMove = false;\n    /**\n     * @private\n     */\n    this.validateForm = false;\n    /**\n     * @private\n     */\n    this.isMinimumZoom = false;\n    /**\n     * @private\n     */\n    this.documentLoaded = false;\n    this.tileRenderCount = 0;\n    this.tileRequestCount = 0;\n    /**\n     * @private\n     */\n    this.isTileImageRendered = false;\n    this.isDataExits = false;\n    this.requestLists = [];\n    this.tilerequestLists = [];\n    this.textrequestLists = [];\n    this.renderThumbnailImages = false;\n    /**\n     * @private\n     */\n    this.pageRenderCount = 2;\n    /**\n     * @private\n     */\n    this.isInkAdded = false;\n    /**\n     * @private\n     */\n    this.inkCount = 0;\n    /**\n     * @private\n     */\n    this.isAddedSignClicked = false;\n    /**\n     * @private\n     */\n    this.imageCount = 0;\n    /**\n     * @private\n     */\n    this.isMousedOver = false;\n    /**\n     * @private\n     */\n    this.isFormFieldSelect = false;\n    /**\n     * @private\n     */\n    this.isFormFieldMouseDown = false;\n    /**\n     * @private\n     */\n    this.isFormFieldMouseMove = false;\n    /**\n     * @private\n     */\n    this.isFormFieldMousedOver = false;\n    /**\n     * @private\n     */\n    this.isPassword = false;\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    this.digitalSignaturePages = [];\n    this.isDigitalSignaturePresent = false;\n    this.isDrawnCompletely = false;\n    /**\n     * @private\n     */\n    this.isAddComment = false;\n    /**\n     * @private\n     */\n    this.drawSignatureWithTool = false;\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    this.formFieldCollection = [];\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    this.nonFillableFields = {};\n    /**\n     * @private\n     */\n    this.isInitialField = false;\n    /**\n     * @private\n     */\n    this.isTouchDesignerMode = false;\n    /**\n     * @private\n     */\n    this.isPrint = false;\n    /**\n     * @private\n     */\n    this.isPDFViewerJson = false;\n    /**\n     * @private\n     */\n    this.isJsonImported = false;\n    /**\n     * @private\n     */\n    this.isJsonExported = false;\n    /**\n     * @private\n     */\n    this.isPageRotated = false;\n    this.downloadFileName = '';\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    this.isFocusField = false;\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    this.isTouchPad = false;\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    this.isMacGestureActive = false;\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    this.macGestureStartScale = 0;\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    this.zoomInterval = 5;\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    this.isTaggedPdf = false;\n    this.accessibilityTagsHandler = null;\n    this.accessibilityTagsCollection = [];\n    this.pageRequestListForAccessibilityTags = [];\n    this.enableAccessibilityMultiPageRequest = true;\n    /**\n    * @private\n    */\n    // eslint-disable-next-line\n    this.clientSideRendering = false;\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    this.focusField = [];\n    /**\n     * @private\n     */\n    this.isSkipDocumentPath = false;\n    /**\n     * @returns {void}\n     */\n    this.clearSessionStorage = function () {\n      var documentId = '';\n      var hashId = window.sessionStorage.getItem(_this.documentId + '_hashId');\n      var documentLiveCount = window.sessionStorage.getItem(_this.documentId + '_documentLiveCount');\n      var serviceURL = window.sessionStorage.getItem(_this.documentId + '_serviceURL');\n      if (Browser.isIE || Browser.info.name === 'edge') {\n        documentId = decodeURI(hashId);\n      } else {\n        documentId = hashId;\n      }\n      if (documentId !== null) {\n        // eslint-disable-next-line max-len\n        var jsonObject = {\n          hashId: documentId,\n          documentLiveCount: documentLiveCount,\n          action: 'Unload',\n          elementId: _this.pdfViewer.element.id\n        };\n        var actionName = window.sessionStorage.getItem(_this.documentId + '_unload');\n        ;\n        if (!isNullOrUndefined(serviceURL)) {\n          // eslint-disable-next-line\n          var browserSupportsKeepalive = ('keepalive' in new Request(''));\n          if (browserSupportsKeepalive) {\n            // eslint-disable-next-line\n            var headerValue = _this.setUnloadRequestHeaders();\n            var credentialsData = _this.pdfViewer.ajaxRequestSettings.withCredentials ? 'include' : 'omit';\n            fetch(serviceURL + '/' + actionName, {\n              method: 'POST',\n              credentials: credentialsData,\n              headers: headerValue,\n              body: JSON.stringify(jsonObject)\n            });\n          }\n        } else if (isBlazor()) {\n          _this.clearCache(actionName, jsonObject, _this);\n        }\n      }\n      window.sessionStorage.removeItem(_this.documentId + '_annotations_textMarkup');\n      window.sessionStorage.removeItem(_this.documentId + '_annotations_shape');\n      window.sessionStorage.removeItem(_this.documentId + '_annotations_shape_measure');\n      window.sessionStorage.removeItem(_this.documentId + '_annotations_stamp');\n      window.sessionStorage.removeItem(_this.documentId + '_annotations_sticky');\n      window.sessionStorage.removeItem(_this.documentId + '_annotations_freetext');\n      window.sessionStorage.removeItem(_this.documentId + '_formfields');\n      window.sessionStorage.removeItem(_this.documentId + '_formDesigner');\n      window.sessionStorage.removeItem(_this.documentId + '_annotations_sign');\n      window.sessionStorage.removeItem(_this.documentId + '_pagedata');\n      window.sessionStorage.removeItem(_this.documentId + '_currentDocument');\n      window.sessionStorage.removeItem(_this.documentId + '_hashId');\n      window.sessionStorage.removeItem(_this.documentId + '_documentLiveCount');\n      window.sessionStorage.removeItem(_this.documentId + '_unload');\n      window.sessionStorage.removeItem(_this.documentId + '_serviceURL');\n    };\n    /**\n     * @private\n     * @param {MouseEvent} event - Mouse event.\n     * @returns {void}\n     */\n    this.onWindowResize = function (event) {\n      var proxy = null;\n      proxy = _this;\n      if (_this.pdfViewer.enableRtl) {\n        // eslint-disable-next-line max-len\n        proxy.viewerContainer.style.right = (proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerContainerLeft() : 0) + 'px';\n        // eslint-disable-next-line max-len\n        proxy.viewerContainer.style.left = (proxy.navigationPane.commentPanelContainer ? proxy.navigationPane.commentPanelContainer.offsetWidth : 0) + 'px';\n      } else {\n        // eslint-disable-next-line max-len\n        proxy.viewerContainer.style.left = (proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerContainerLeft() : 0) + 'px';\n        // eslint-disable-next-line max-len\n        proxy.viewerContainer.style.right = (proxy.navigationPane.commentPanelContainer ? proxy.navigationPane.commentPanelContainer.offsetWidth : 0) + 'px';\n      }\n      // eslint-disable-next-line\n      var viewerElementWidth = proxy.pdfViewer.element.clientWidth > 0 ? proxy.pdfViewer.element.clientWidth : proxy.pdfViewer.element.style.width;\n      // eslint-disable-next-line\n      var viewerWidth = viewerElementWidth - (proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerContainerLeft() : 0) - (proxy.navigationPane.commentPanelContainer ? proxy.navigationPane.getViewerContainerRight() : 0);\n      proxy.viewerContainer.style.width = viewerWidth + 'px';\n      if (proxy.pdfViewer.toolbarModule) {\n        // eslint-disable-next-line\n        var toolbarContainer = isBlazor() ? proxy.pdfViewer.element.querySelector('.e-pv-toolbar') : proxy.getElement('_toolbarContainer');\n        var toolbarHeight = 0;\n        var formDesignerToolbarHeight = 0;\n        if (toolbarContainer) {\n          toolbarHeight = toolbarContainer.getBoundingClientRect().height;\n        }\n        if (proxy.isAnnotationToolbarHidden() || Browser.isDevice && !_this.pdfViewer.enableDesktopMode) {\n          if (toolbarHeight === 0) {\n            if (_this.navigationPane.isNavigationToolbarVisible) {\n              // eslint-disable-next-line\n              var navigationToolbar = proxy.getElement('_navigationToolbar');\n              toolbarHeight = navigationToolbar.getBoundingClientRect().height;\n            }\n          }\n          if (!proxy.isFormDesignerToolbarHidded()) {\n            var formDesignerToolbar = proxy.getElement('_formdesigner_toolbar');\n            formDesignerToolbarHeight = formDesignerToolbar ? formDesignerToolbar.getBoundingClientRect().height : 0;\n          }\n          // eslint-disable-next-line max-len\n          proxy.viewerContainer.style.height = proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height, toolbarHeight + formDesignerToolbarHeight);\n        } else {\n          // eslint-disable-next-line\n          var annotationToolbarContainer = isBlazor() ? proxy.pdfViewer.element.querySelector('.e-pv-annotation-toolbar') : proxy.getElement('_annotation_toolbar');\n          var annotationToolbarHeight = 0;\n          if (annotationToolbarContainer) {\n            annotationToolbarHeight = annotationToolbarContainer.getBoundingClientRect().height;\n          }\n          // eslint-disable-next-line max-len\n          proxy.viewerContainer.style.height = proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height, toolbarHeight + annotationToolbarHeight);\n        }\n      } else {\n        proxy.viewerContainer.style.height = proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height, 0);\n      }\n      if (proxy.pdfViewer.bookmarkViewModule && Browser.isDevice && !_this.pdfViewer.enableDesktopMode) {\n        var bookmarkContainer = proxy.getElement('_bookmarks_container');\n        if (bookmarkContainer) {\n          bookmarkContainer.style.height = proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height, 0);\n        }\n      }\n      if (proxy.viewerContainer.style.height === '0px') {\n        if (proxy.pdfViewer.height.toString() === 'auto') {\n          proxy.pdfViewer.height = 500;\n          proxy.viewerContainer.style.height = proxy.pdfViewer.height + 'px';\n        } else {\n          proxy.viewerContainer.style.height = proxy.pdfViewer.element.style.height;\n        }\n      }\n      if (proxy.viewerContainer.style.width === '0px') {\n        if (proxy.pdfViewer.width.toString() === 'auto') {\n          proxy.pdfViewer.width = 500;\n          proxy.viewerContainer.style.width = proxy.pdfViewer.width + 'px';\n        } else {\n          proxy.viewerContainer.style.width = proxy.pdfViewer.element.style.width;\n        }\n      }\n      proxy.pageContainer.style.width = proxy.viewerContainer.clientWidth + 'px';\n      if (proxy.viewerContainer.clientWidth === 0) {\n        proxy.pageContainer.style.width = proxy.pdfViewer.element.style.width;\n      }\n      if (!isBlazor()) {\n        if (proxy.pdfViewer.toolbarModule) {\n          // eslint-disable-next-line max-len\n          proxy.pdfViewer.toolbarModule.onToolbarResize(proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerMainContainerWidth() : proxy.pdfViewer.element.clientWidth);\n        }\n      }\n      if (_this.pdfViewer.enableToolbar && _this.pdfViewer.thumbnailViewModule) {\n        proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.currentPageNumber - 1);\n      }\n      if (proxy.pdfViewer.textSearchModule && (!Browser.isDevice || _this.pdfViewer.enableDesktopMode)) {\n        proxy.pdfViewer.textSearchModule.textSearchBoxOnResize();\n      }\n      if (viewerWidth !== 0) {\n        if (!proxy.navigationPane.isBookmarkListOpen) {\n          proxy.updateZoomValue();\n        }\n      }\n      if (Browser.isDevice && !_this.pdfViewer.enableDesktopMode) {\n        proxy.mobileScrollerContainer.style.left = viewerWidth - parseFloat(proxy.mobileScrollerContainer.style.width) + 'px';\n        proxy.mobilePageNoContainer.style.left = viewerWidth / 2 - parseFloat(proxy.mobilePageNoContainer.style.width) / 2 + 'px';\n        proxy.mobilePageNoContainer.style.top = proxy.pdfViewer.element.clientHeight / 2 + 'px';\n        proxy.updateMobileScrollerPosition();\n      } else {\n        proxy.navigationPane.setResizeIconTop();\n        proxy.navigationPane.setCommentPanelResizeIconTop();\n        if (event && event.type === 'resize') {\n          proxy.signatureModule.updateCanvasSize();\n        }\n      }\n      if (proxy.navigationPane.sideBarToolbar) {\n        proxy.navigationPane.sideBarToolbar.style.height = proxy.viewerContainer.style.height;\n      }\n    };\n    /**\n     * @param {MouseEvent} event - The MouseEvent.\n     * @returns {void}\n     */\n    this.viewerContainerOnMousedown = function (event) {\n      _this.isFreeTextContextMenu = false;\n      var isUpdate = false;\n      _this.isSelection = true;\n      var target = event.target;\n      if (event.button === 0 && !_this.getPopupNoteVisibleStatus() && !_this.isClickedOnScrollBar(event, false)) {\n        _this.isViewerMouseDown = true;\n        // eslint-disable-next-line\n        if (event.detail === 1 && target.className !== 'e-pdfviewer-formFields' && target.className !== 'free-text-input') {\n          isUpdate = true;\n          _this.focusViewerContainer(true);\n        }\n        _this.scrollPosition = _this.viewerContainer.scrollTop / _this.getZoomFactor();\n        _this.mouseX = event.clientX;\n        _this.mouseY = event.clientY;\n        _this.mouseLeft = event.clientX;\n        _this.mouseTop = event.clientY;\n        // eslint-disable-next-line\n        var isIE = !!document.documentMode;\n        if (_this.pdfViewer.textSelectionModule && !_this.isClickedOnScrollBar(event, true) && !_this.isTextSelectionDisabled) {\n          if (!isIE && target.className !== 'e-pdfviewer-formFields' && target.className !== 'e-pdfviewer-ListBox' && target.className !== 'e-pv-formfield-dropdown' && target.className !== 'e-pv-formfield-listbox' && target.className !== 'e-pv-formfield-input' && target.className !== 'e-pv-formfield-textarea') {\n            event.preventDefault();\n          }\n          if (target.className !== 'e-pv-droplet') {\n            _this.pdfViewer.textSelectionModule.clearTextSelection();\n          }\n        }\n      }\n      if (_this.isClickedOnScrollBar(event, false)) {\n        _this.isViewerMouseDown = true;\n      }\n      if (_this.isPanMode) {\n        _this.dragX = event.pageX;\n        _this.dragY = event.pageY;\n        // eslint-disable-next-line max-len\n        if (_this.viewerContainer.contains(event.target) && event.target !== _this.viewerContainer && event.target !== _this.pageContainer && _this.isPanMode) {\n          _this.viewerContainer.style.cursor = 'grabbing';\n        }\n      }\n      if (_this.isShapeBasedAnnotationsEnabled() && (_this.isAnnotationDrawn || !(target.className === 'e-pv-page-container' || target.className === 'foreign-object' && isNaN(_this.activeElements.activePageID)))) {\n        _this.diagramMouseDown(event);\n      }\n      if (_this.pdfViewer.annotation && _this.pdfViewer.annotation.stickyNotesAnnotationModule.accordionContainer) {\n        if (!isUpdate) {\n          _this.pdfViewer.annotationModule.stickyNotesAnnotationModule.isEditableElement = false;\n          _this.updateCommentPanel();\n          isUpdate = true;\n        }\n      }\n      if (isBlazor()) {\n        _this.mouseDownHandler(event);\n      }\n    };\n    /**\n     * @param {MouseEvent} event - The MouseEvent.\n     * @returns {void}\n     */\n    this.viewerContainerOnMouseup = function (event) {\n      if (!_this.getPopupNoteVisibleStatus()) {\n        if (_this.isViewerMouseDown) {\n          if (_this.scrollHoldTimer) {\n            clearTimeout(_this.scrollHoldTimer);\n            _this.scrollHoldTimer = null;\n          }\n          // eslint-disable-next-line max-len\n          if (_this.scrollPosition === 0 && _this.viewerContainer.scrollTop === 0 || _this.scrollPosition * _this.getZoomFactor() !== _this.viewerContainer.scrollTop) {\n            _this.pageViewScrollChanged(_this.currentPageNumber);\n          }\n        }\n        var isSignatureFieldReadOnly = false;\n        if (event.target) {\n          if (event.target.className == 'e-pv-show-designer-name' && event.target.id.split('_', 1) != '') {\n            isSignatureFieldReadOnly = document.getElementById(event.target.id.split('_', 1)).disabled;\n          }\n          if (event.target.className == 'foreign-object' && event.target.children[0]) {\n            isSignatureFieldReadOnly = event.target.children[0].disabled;\n          }\n        }\n        if (isSignatureFieldReadOnly && _this.pdfViewer.annotation) {\n          _this.pdfViewer.annotation.clearSelection();\n        }\n        if (_this.isShapeBasedAnnotationsEnabled() && !isSignatureFieldReadOnly && (_this.isAnnotationDrawn || _this.action !== \"DrawTool\")) {\n          _this.diagramMouseUp(event);\n          if (_this.pdfViewer.annotation) {\n            _this.pdfViewer.annotation.onAnnotationMouseUp();\n          }\n        }\n        if (_this.pdfViewer.selectedItems.formFields.length > 0) {\n          // eslint-disable-next-line max-len\n          if (!isNullOrUndefined(_this.pdfViewer.toolbar) && !isNullOrUndefined(_this.pdfViewer.toolbar.formDesignerToolbarModule) && !Browser.isDevice) {\n            _this.pdfViewer.toolbar.formDesignerToolbarModule.showHideDeleteIcon(true);\n          }\n        } else {\n          // eslint-disable-next-line max-len\n          if (!isNullOrUndefined(_this.pdfViewer.toolbar) && !isNullOrUndefined(_this.pdfViewer.toolbar.formDesignerToolbarModule) && !Browser.isDevice) {\n            _this.pdfViewer.toolbar.formDesignerToolbarModule.showHideDeleteIcon(false);\n          }\n        }\n        _this.isSelection = false;\n        // eslint-disable-next-line max-len\n        var commentElement = document.getElementById(_this.pdfViewer.element.id + '_commantPanel');\n        if (commentElement && commentElement.style.display === 'block') {\n          if (_this.pdfViewer.selectedItems) {\n            if (_this.pdfViewer.selectedItems.annotations.length !== 0) {\n              // eslint-disable-next-line\n              var accordionExpand = document.getElementById(_this.pdfViewer.element.id + '_accordionContainer' + _this.pdfViewer.currentPageNumber);\n              if (accordionExpand) {\n                accordionExpand.ej2_instances[0].expandItem(true);\n              }\n              // eslint-disable-next-line\n              var commentsDiv = document.getElementById(_this.pdfViewer.selectedItems.annotations[0].annotName);\n              if (commentsDiv) {\n                if (!commentsDiv.classList.contains('e-pv-comments-border')) {\n                  commentsDiv.firstChild.click();\n                }\n              }\n            }\n          }\n        }\n        if (event.button === 0 && !_this.isClickedOnScrollBar(event, false)) {\n          // 0 is for left button.\n          var eventTarget_1 = event.target;\n          var offsetX = event.clientX;\n          var offsetY = event.clientY;\n          var zoomFactor = _this.getZoomFactor();\n          var pageIndex = _this.currentPageNumber;\n          if (eventTarget_1) {\n            // eslint-disable-next-line\n            var pageString = eventTarget_1.id.split('_text_')[1] || eventTarget_1.id.split('_textLayer_')[1] || eventTarget_1.id.split('_annotationCanvas_')[1] || eventTarget_1.id.split('_pageDiv_')[1] || eventTarget_1.id.split('_freeText_')[1] || eventTarget_1.id.split('_')[1];\n            // eslint-disable-next-line\n            pageIndex = parseInt(pageString);\n            if (isNaN(pageIndex) && _this.pdfViewer.formFieldCollection) {\n              var formFieldsTargetId = _this.pdfViewer.formFieldCollection.filter(function (targetFormField) {\n                return targetFormField.id == eventTarget_1.id || targetFormField.id == eventTarget_1.id.split('_')[0];\n              });\n              if (formFieldsTargetId.length > 0) {\n                pageIndex = formFieldsTargetId[0].pageIndex;\n              }\n            }\n          }\n          var pageDiv = _this.getElement('_pageDiv_' + pageIndex);\n          if (pageDiv) {\n            var pageCurrentRect = pageDiv.getBoundingClientRect();\n            offsetX = (event.clientX - pageCurrentRect.left) / zoomFactor;\n            offsetY = (event.clientY - pageCurrentRect.top) / zoomFactor;\n          }\n          // eslint-disable-next-line max-len\n          if (eventTarget_1 && eventTarget_1.classList && !eventTarget_1.classList.contains('e-pv-hyperlink') && !eventTarget_1.classList.contains('e-pv-page-container')) {\n            // eslint-disable-next-line\n            _this.pdfViewer.firePageClick(offsetX, offsetY, pageIndex + 1);\n            if (_this.pdfViewer.formFieldsModule && !_this.pdfViewer.formDesignerModule) {\n              _this.signatureModule.removeFocus();\n            }\n          }\n          if (_this.isTextMarkupAnnotationModule() && !_this.isToolbarInkClicked) {\n            _this.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationMouseUp(event);\n          }\n          if (_this.pdfViewer.formDesignerModule && !_this.pdfViewer.annotationModule) {\n            _this.pdfViewer.formDesignerModule.updateCanvas(pageIndex);\n          }\n          // eslint-disable-next-line max-len\n          if (_this.viewerContainer.contains(event.target) && event.target !== _this.viewerContainer && event.target !== _this.pageContainer && _this.isPanMode) {\n            _this.viewerContainer.style.cursor = 'move';\n            _this.viewerContainer.style.cursor = '-webkit-grab';\n            _this.viewerContainer.style.cursor = '-moz-grab';\n            _this.viewerContainer.style.cursor = 'grab';\n          }\n        }\n        _this.isViewerMouseDown = false;\n      }\n    };\n    /**\n     * @param {any} event - The Wheel event.\n     * @returns {void}\n     */\n    this.detectTouchPad = function (event) {\n      // eslint-disable-next-line max-len\n      _this.isTouchPad = event.wheelDeltaY ? event.wheelDeltaY === event.deltaY * -3 ? true : Math.abs(event.deltaY) < 60 : event.deltaMode === 0;\n    };\n    /**\n     * @param {any} event - The Wheel event.\n     * @returns {void}\n     */\n    this.handleMacGestureStart = function (event) {\n      event.preventDefault();\n      event.stopPropagation();\n      _this.macGestureStartScale = _this.pdfViewer.magnification.zoomFactor;\n    };\n    /**\n     * @param {any} event - The Wheel event.\n     * @returns {void}\n     */\n    this.handleMacGestureChange = function (event) {\n      event.preventDefault();\n      event.stopPropagation();\n      var macX = event.clientX;\n      var macY = event.clientY;\n      var scale = Number((_this.macGestureStartScale * event.scale).toFixed(2));\n      if (!_this.isMacGestureActive) {\n        _this.isMacGestureActive = true;\n        _this.pdfViewer.magnification.initiateMouseZoom(macX, macY, scale * 100);\n        setTimeout(function () {\n          _this.isMacGestureActive = false;\n        }, 50);\n      }\n    };\n    /**\n     * @param {any} event - The Wheel event.\n     * @returns {void}\n     */\n    this.handleMacGestureEnd = function (event) {\n      event.preventDefault();\n      event.stopPropagation();\n    };\n    /**\n     * @param {WheelEvent} event - The MouseEvent.\n     * @returns {void}\n     */\n    this.viewerContainerOnMouseWheel = function (event) {\n      _this.isViewerMouseWheel = true;\n      if (_this.getRerenderCanvasCreated()) {\n        event.preventDefault();\n      }\n      if (event.ctrlKey) {\n        var zoomDifference = 25;\n        if (_this.pdfViewer.magnificationModule ? _this.pdfViewer.magnification.zoomFactor : _this.pdfViewer.zoomValue < 1) {\n          zoomDifference = 10;\n        }\n        if (_this.pdfViewer.magnificationModule ? _this.pdfViewer.magnification.zoomFactor : _this.pdfViewer.zoomValue >= 2) {\n          zoomDifference = 50;\n        }\n        if (_this.isTouchPad && !_this.isMacSafari) {\n          zoomDifference = zoomDifference / _this.zoomInterval;\n        }\n        // eslint-disable-next-line\n        if (_this.pdfViewer.magnificationModule) {\n          if (event.wheelDelta > 0) {\n            _this.pdfViewer.magnification.initiateMouseZoom(event.x, event.y, _this.pdfViewer.magnification.zoomFactor * 100 + zoomDifference);\n          } else {\n            _this.pdfViewer.magnification.initiateMouseZoom(event.x, event.y, _this.pdfViewer.magnification.zoomFactor * 100 - zoomDifference);\n          }\n        }\n        _this.isTouchPad = false;\n      }\n      if (_this.pdfViewer.magnificationModule) {\n        _this.pdfViewer.magnificationModule.pageRerenderOnMouseWheel();\n        if (event.ctrlKey) {\n          event.preventDefault();\n        }\n        _this.pdfViewer.magnificationModule.fitPageScrollMouseWheel(event);\n      }\n      if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n        if (_this.isViewerMouseDown) {\n          if (!event.target.classList.contains('e-pv-text')) {\n            _this.pdfViewer.textSelectionModule.textSelectionOnMouseWheel(_this.currentPageNumber - 1);\n          }\n        }\n      }\n    };\n    /**\n     * @param {KeyboardEvent} event - The KeyboardEvent.\n     * @returns {void}\n     */\n    this.onWindowKeyDown = function (event) {\n      var isMac = navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i) ? true : false;\n      var isCommandKey = isMac ? event.metaKey : false;\n      if (_this.isFreeTextAnnotationModule() && _this.pdfViewer.annotationModule && (_this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus === true || _this.pdfViewer.annotationModule.inputElementModule.isInFocus === true)) {\n        return;\n      }\n      if (!event.ctrlKey || !isCommandKey) {\n        switch (event.keyCode) {\n          case 46:\n            var activeElement = document.activeElement;\n            if (activeElement.tagName !== 'INPUT' && activeElement.tagName !== 'TEXTAREA' && !activeElement.isContentEditable) {\n              _this.DeleteKeyPressed(event);\n            }\n            break;\n          case 27:\n            if (_this.pdfViewer.toolbar) {\n              _this.pdfViewer.toolbar.addInkAnnotation();\n              _this.pdfViewer.toolbar.deSelectCommentAnnotation();\n              _this.pdfViewer.toolbar.updateStampItems();\n              if (_this.pdfViewer.toolbar.annotationToolbarModule) {\n                if (isBlazor()) {\n                  _this.pdfViewer.toolbar.annotationToolbarModule.deselectAllItemsInBlazor();\n                } else {\n                  _this.pdfViewer.toolbar.annotationToolbarModule.deselectAllItems();\n                }\n              }\n              if (_this.pdfViewer.isFormDesignerToolbarVisible && document.getElementById('FormField_helper_html_element')) {\n                var formFieldElement = document.getElementById('FormField_helper_html_element');\n                if (formFieldElement) {\n                  formFieldElement.remove();\n                }\n              }\n              _this.pdfViewer.tool = '';\n              _this.focusViewerContainer();\n            }\n            break;\n          case 13:\n            if (_this.pdfViewer.formDesignerModule) {\n              if (event.type === 'keydown' && event.keyCode === 13) {\n                if (event.target && (event.target.id || event.target.tabIndex) && _this.pdfViewer.formFieldCollections) {\n                  var fieldId = void 0;\n                  var currentTarget = event.target;\n                  if (event.target.tabIndex && !event.target.id) {\n                    currentTarget = event.target.parentElement;\n                    fieldId = currentTarget.id.split(\"_content_html_element\")[0];\n                  } else {\n                    currentTarget = event.target;\n                    fieldId = currentTarget.id.split(\"_\")[0];\n                  }\n                  for (var i = 0; i < _this.pdfViewer.formFieldCollections.length; i++) {\n                    var formfield = _this.pdfViewer.formFieldCollections[parseInt(i.toString(), 10)];\n                    if (fieldId === formfield.id && (formfield.type === 'SignatureField' || formfield.type === 'InitialField')) {\n                      _this.pdfViewer.fireFormFieldClickEvent('formFieldClicked', _this.pdfViewer.formFieldCollections[parseInt(i.toString(), 10)]);\n                      event.preventDefault();\n                    }\n                  }\n                }\n              }\n            }\n            break;\n          case 32:\n            if (_this.pdfViewer.formDesignerModule) {\n              if (event.type === 'keydown' && event.keyCode === 32) {\n                if (event.target && event.target.id && _this.pdfViewer.formFields) {\n                  for (var i = 0; i < _this.pdfViewer.formFields.length; i++) {\n                    var formField = _this.pdfViewer.formFields[parseInt(i.toString(), 10)];\n                    if (event.target.id.split(\"_\")[0] === formField.id && formField.formFieldAnnotationType === \"Checkbox\") {\n                      _this.pdfViewer.formDesignerModule.setCheckBoxState(event);\n                      event.preventDefault();\n                      break;\n                    }\n                  }\n                }\n              }\n            }\n            break;\n          case 9:\n            if (event.target && (event.target.id || event.target.tabIndex) && _this.pdfViewer.formFieldCollections) {\n              {\n                if (event.target.className === 'e-pv-formfield-input' || event.target.id === _this.pdfViewer.element.id + '_viewerContainer') {\n                  var nextField = void 0;\n                  var fieldIndex = void 0;\n                  var currentTarget_1 = event.target;\n                  var id_1;\n                  if (event.target.tabIndex && !event.target.id) {\n                    currentTarget_1 = event.target.parentElement;\n                    id_1 = currentTarget_1.id.split(\"_content_html_element\")[0];\n                  } else {\n                    currentTarget_1 = event.target;\n                    id_1 = currentTarget_1.id.split(\"_input\")[0];\n                  }\n                  if (_this.pdfViewer.formDesignerModule) {\n                    if (event.shiftKey && event.key === \"Tab\") {\n                      fieldIndex = _this.pdfViewer.formFieldCollections.findIndex(function (field) {\n                        return field.id === id_1;\n                      });\n                      nextField = fieldIndex > 0 ? _this.pdfViewer.formFieldCollections[fieldIndex - 1] : _this.pdfViewer.formFieldCollections[_this.pdfViewer.formFieldCollections.length - 1];\n                    } else {\n                      fieldIndex = _this.pdfViewer.formFieldCollections.findIndex(function (field) {\n                        return field.id === id_1;\n                      });\n                      nextField = fieldIndex + 1 < _this.pdfViewer.formFieldCollections.length ? _this.pdfViewer.formFieldCollections[fieldIndex + 1] : _this.pdfViewer.formFieldCollections[0];\n                    }\n                    _this.pdfViewer.focusFormField(nextField);\n                    event.preventDefault();\n                  }\n                  if (!_this.pdfViewer.formDesigner) {\n                    if (!(currentTarget_1.className === 'e-pdfviewer-formFields')) {\n                      if (event.shiftKey && event.key === \"Tab\") {\n                        fieldIndex = _this.pdfViewer.formFieldCollections.findIndex(function (field) {\n                          return field.id === currentTarget_1.id;\n                        });\n                        nextField = fieldIndex > 0 ? _this.pdfViewer.formFieldCollections[fieldIndex - 1] : _this.pdfViewer.formFieldCollections[_this.pdfViewer.formFieldCollections.length - 1];\n                      } else {\n                        fieldIndex = _this.pdfViewer.formFieldCollections.findIndex(function (field) {\n                          return field.id === currentTarget_1.id;\n                        });\n                        nextField = fieldIndex + 1 < _this.pdfViewer.formFieldCollections.length ? _this.pdfViewer.formFieldCollections[fieldIndex + 1] : _this.pdfViewer.formFieldCollections[0];\n                      }\n                      _this.pdfViewer.focusFormField(nextField);\n                      event.preventDefault();\n                    }\n                  }\n                }\n              }\n            }\n            if (event.target && event.target.id && _this.pdfViewer.formFields) {\n              for (var i = 0; i < _this.pdfViewer.formFields.length; i++) {\n                var formField_1 = _this.pdfViewer.formFields[parseInt(i.toString(), 10)];\n                if (event.target.id === formField_1.id) {\n                  // eslint-disable-next-line\n                  var field = {\n                    value: formField_1.value,\n                    fontFamily: formField_1.fontFamily,\n                    fontSize: formField_1.fontSize,\n                    fontStyle: formField_1.fontStyle,\n                    // eslint-disable-next-line\n                    color: formField_1.color,\n                    backgroundColor: formField_1.backgroundColor,\n                    alignment: formField_1.alignment,\n                    isReadonly: formField_1.isReadonly,\n                    visibility: formField_1.visibility,\n                    // eslint-disable-next-line\n                    maxLength: formField_1.maxLength,\n                    isRequired: formField_1.isRequired,\n                    isPrint: formField_1.isPrint,\n                    rotation: formField_1.rotateAngle,\n                    tooltip: formField_1.tooltip,\n                    // eslint-disable-next-line\n                    options: formField_1.options,\n                    isChecked: formField_1.isChecked,\n                    isSelected: formField_1.isSelected\n                  };\n                  _this.pdfViewer.fireFocusOutFormField(field, formField_1.pageIndex);\n                }\n              }\n            }\n            break;\n        }\n      }\n    };\n    /**\n     * @param {KeyboardEvent} event - The KeyboardEvent.\n     * @returns {void}\n     */\n    this.viewerContainerOnKeyDown = function (event) {\n      var isMac = navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i) ? true : false;\n      var isCommandKey = isMac ? event.metaKey : false;\n      if (_this.isFreeTextAnnotationModule() && _this.pdfViewer.annotationModule && (_this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus === true || _this.pdfViewer.annotationModule.inputElementModule.isInFocus === true)) {\n        return;\n      }\n      var activeElement = document.activeElement;\n      if ((event.ctrlKey || isCommandKey) && activeElement.tagName !== 'INPUT' && activeElement.tagName !== 'TEXTAREA' && !activeElement.isContentEditable) {\n        // add keycodes if shift key is used.\n        if (event.shiftKey && !isMac || isMac && !event.shiftKey) {\n          switch (event.keyCode) {\n            case 38: // up arrow\n            case 33:\n              // page up\n              event.preventDefault();\n              if (_this.currentPageNumber !== 1) {\n                _this.updateScrollTop(0);\n              }\n              break;\n            case 40: // down arrow\n            case 34:\n              // page down\n              event.preventDefault();\n              if (_this.currentPageNumber !== _this.pageCount) {\n                _this.updateScrollTop(_this.pageCount - 1);\n              }\n              break;\n            default:\n              break;\n          }\n        }\n        switch (event.keyCode) {\n          case 79:\n            // o key\n            if (_this.pdfViewer.toolbarModule && _this.pdfViewer.enableToolbar) {\n              _this.pdfViewer.toolbarModule.openFileDialogBox(event);\n            }\n            break;\n          case 67:\n            // c key\n            if (_this.pdfViewer.textSelectionModule && _this.pdfViewer.enableTextSelection && !_this.isTextSelectionDisabled) {\n              event.preventDefault();\n              _this.pdfViewer.textSelectionModule.copyText();\n            }\n            if (_this.pdfViewer.selectedItems.annotations.length || _this.pdfViewer.selectedItems.formFields.length) {\n              _this.pdfViewer.copy();\n              _this.contextMenuModule.previousAction = 'Copy';\n            }\n            break;\n          case 70:\n            // f key\n            if (_this.pdfViewer.textSearchModule && _this.pdfViewer.enableTextSearch) {\n              event.preventDefault();\n              _this.pdfViewer.toolbarModule.textSearchButtonHandler();\n            }\n            break;\n          case 80:\n            // p key\n            if (_this.pdfViewer.printModule && _this.pdfViewer.enablePrint) {\n              event.preventDefault();\n              _this.pdfViewer.print.print();\n            }\n            break;\n          case 90:\n            //z key\n            if (_this.pdfViewer.annotationModule) {\n              _this.pdfViewer.annotationModule.undo();\n            }\n            break;\n          case 88:\n            //x key\n            if (_this.pdfViewer.selectedItems.annotations.length || _this.pdfViewer.selectedItems.formFields.length) {\n              _this.pdfViewer.cut();\n              _this.contextMenuModule.previousAction = 'Cut';\n            }\n            break;\n          case 89:\n            //y key\n            if (_this.pdfViewer.annotationModule) {\n              _this.pdfViewer.annotationModule.redo();\n            }\n            break;\n          case 86:\n            //v key\n            // eslint-disable-next-line max-len\n            if (_this.pdfViewer.annotation && _this.pdfViewer.annotation.isShapeCopied || _this.pdfViewer.formFields && _this.pdfViewer.formDesigner && _this.pdfViewer.formDesigner.isShapeCopied) {\n              var isSearchboxDialogOpen = void 0;\n              var searchBoxId = document.getElementById(_this.pdfViewer.element.id + \"_search_box\");\n              if (searchBoxId) {\n                isSearchboxDialogOpen = searchBoxId.style.display !== \"none\";\n              }\n              if (!isSearchboxDialogOpen && _this.pdfViewer.formDesigner && !_this.pdfViewer.formDesigner.isPropertyDialogOpen) {\n                _this.pdfViewer.paste();\n                _this.contextMenuModule.previousAction = 'Paste';\n              }\n            }\n            break;\n          default:\n            break;\n        }\n      }\n      if (_this.pdfViewer.magnificationModule) {\n        _this.pdfViewer.magnificationModule.magnifyBehaviorKeyDown(event);\n      }\n    };\n    /**\n     * @param {MouseEvent} event - The MouseEvent.\n     * @returns {void}\n     */\n    this.viewerContainerOnMousemove = function (event) {\n      _this.mouseX = event.clientX;\n      _this.mouseY = event.clientY;\n      // eslint-disable-next-line\n      var isIE = !!document.documentMode;\n      var target = event.target;\n      if (_this.action === 'Drag') {\n        event.preventDefault();\n      }\n      // eslint-disable-next-line max-len\n      if (_this.isViewerMouseDown && !(_this.action === 'Perimeter' || _this.action === 'Polygon' || _this.action === 'Line' || _this.action === 'DrawTool' || _this.action === 'Distance')) {\n        // eslint-disable-next-line max-len\n        if (_this.pdfViewer.textSelectionModule && _this.pdfViewer.enableTextSelection && !_this.isTextSelectionDisabled && !_this.getPopupNoteVisibleStatus()) {\n          // text selection won't perform if we start the selection from hyperlink content by commenting this line.\n          // this region block the toc/hyperlink navigation on sometimes.\n          // if ((event.target as HTMLElement).classList.contains('e-pv-hyperlink') && this.pdfViewer.linkAnnotationModule) {\n          // this.pdfViewer.linkAnnotationModule.modifyZindexForHyperlink((event.target as HTMLElement), true);\n          // }\n          if (!isIE) {\n            if (event.target.className != 'e-pdfviewer-formFields') event.preventDefault();\n            _this.mouseX = event.clientX;\n            _this.mouseY = event.clientY;\n            // eslint-disable-next-line\n            var annotationModule = _this.pdfViewer.annotationModule;\n            // eslint-disable-next-line max-len\n            if (annotationModule && annotationModule.textMarkupAnnotationModule && annotationModule.textMarkupAnnotationModule.isDropletClicked && annotationModule.textMarkupAnnotationModule.isEnableTextMarkupResizer(annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode)) {\n              annotationModule.textMarkupAnnotationModule.textSelect(event.target, _this.mouseX, _this.mouseY);\n            } else {\n              _this.pdfViewer.textSelectionModule.textSelectionOnMouseMove(event.target, _this.mouseX, _this.mouseY);\n            }\n          } else {\n            var selection = window.getSelection();\n            if (!selection.type && !selection.isCollapsed && selection.anchorNode !== null) {\n              _this.pdfViewer.textSelectionModule.isTextSelection = true;\n            }\n          }\n        } else if (_this.skipPreventDefault(target)) {\n          event.preventDefault();\n        }\n      }\n      if (_this.isTextMarkupAnnotationModule() && !_this.getPopupNoteVisibleStatus()) {\n        _this.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationMouseMove(event);\n      }\n      if (_this.isPanMode) {\n        _this.panOnMouseMove(event);\n      }\n      if (_this.isShapeBasedAnnotationsEnabled()) {\n        var canvas = void 0;\n        // eslint-disable-next-line max-len\n        if (event.target && (event.target.id.indexOf('_text') > -1 || event.target.parentElement.classList.contains('foreign-object') || event.target.id.indexOf('_annotationCanvas') > -1 || event.target.classList.contains('e-pv-hyperlink')) && _this.pdfViewer.annotation || event.target.classList.contains('e-pdfviewer-formFields')) {\n          var pageIndex = _this.pdfViewer.annotation.getEventPageNumber(event);\n          var diagram = document.getElementById(_this.pdfViewer.element.id + '_annotationCanvas_' + pageIndex);\n          if (diagram) {\n            var canvas1 = diagram.getBoundingClientRect();\n            var left = canvas1.x ? canvas1.x : canvas1.left;\n            var top_1 = canvas1.y ? canvas1.y : canvas1.top;\n            // eslint-disable-next-line max-len\n            if (_this.pdfViewer.annotationModule.stampAnnotationModule.currentStampAnnotation && _this.pdfViewer.annotationModule.stampAnnotationModule.currentStampAnnotation.shapeAnnotationType === 'Image') {\n              canvas = new Rect(left, top_1, canvas1.width - 10, canvas1.height - 10);\n            } else {\n              canvas = new Rect(left + 1, top_1 + 1, canvas1.width - 3, canvas1.height - 3);\n            }\n          }\n        } else if (!_this.pdfViewer.annotationModule && _this.pdfViewer.formDesignerModule) {\n          var pageIndex = _this.pdfViewer.formDesignerModule.getEventPageNumber(event);\n          var diagram = document.getElementById(_this.pdfViewer.element.id + '_annotationCanvas_' + pageIndex);\n          if (diagram) {\n            var canvas1 = diagram.getBoundingClientRect();\n            var left = canvas1.x ? canvas1.x : canvas1.left;\n            var top_2 = canvas1.y ? canvas1.y : canvas1.top;\n            canvas = new Rect(left + 10, top_2 + 10, canvas1.width - 10, canvas1.height - 10);\n          }\n        }\n        // eslint-disable-next-line max-len\n        var stampModule = _this.pdfViewer.annotationModule ? _this.pdfViewer.annotationModule.stampAnnotationModule : null;\n        if (canvas && canvas.containsPoint({\n          x: _this.mouseX,\n          y: _this.mouseY\n        }) && !(stampModule && stampModule.isStampAnnotSelected)) {\n          _this.diagramMouseMove(event);\n          _this.annotationEvent = event;\n        } else {\n          _this.diagramMouseLeave(event);\n          if (_this.isAnnotationDrawn && !_this.pdfViewer.isFormDesignerToolbarVisible) {\n            _this.diagramMouseUp(event);\n            _this.isAnnotationAdded = true;\n          }\n        }\n        if (_this.pdfViewer.enableStampAnnotations) {\n          if (stampModule && stampModule.isStampAnnotSelected) {\n            _this.pdfViewer.tool = 'Stamp';\n            _this.tool = new StampTool(_this.pdfViewer, _this);\n            _this.isMouseDown = true;\n            stampModule.isStampAnnotSelected = false;\n            stampModule.isNewStampAnnot = true;\n          }\n        }\n        if (_this.isSignatureAdded && _this.pdfViewer.enableHandwrittenSignature) {\n          _this.pdfViewer.tool = 'Stamp';\n          _this.tool = new StampTool(_this.pdfViewer, _this);\n          _this.isMouseDown = true;\n          _this.isSignatureAdded = false;\n          _this.isNewSignatureAdded = true;\n        }\n      }\n    };\n    /**\n     * @param {MouseEvent} event - The MouseEvent.\n     * @returns {void}\n     */\n    this.panOnMouseMove = function (event) {\n      var isStampMode = false;\n      // eslint-disable-next-line max-len\n      if (_this.action === 'Ink' || _this.action === \"Line\" || _this.action === 'Perimeter' || _this.action === 'Polygon' || _this.action === 'DrawTool' || _this.action === 'Drag' || _this.action.indexOf('Rotate') !== -1 || _this.action.indexOf('Resize') !== -1) {\n        isStampMode = true;\n      }\n      // eslint-disable-next-line max-len\n      if (_this.viewerContainer.contains(event.target) && event.target !== _this.viewerContainer && event.target !== _this.pageContainer && !isStampMode) {\n        if (_this.isViewerMouseDown) {\n          var deltaX = _this.dragX - event.pageX;\n          var deltaY = _this.dragY - event.pageY;\n          _this.viewerContainer.scrollTop = _this.viewerContainer.scrollTop + deltaY;\n          _this.viewerContainer.scrollLeft = _this.viewerContainer.scrollLeft + deltaX;\n          _this.viewerContainer.style.cursor = 'move';\n          _this.viewerContainer.style.cursor = '-webkit-grabbing';\n          _this.viewerContainer.style.cursor = '-moz-grabbing';\n          _this.viewerContainer.style.cursor = 'grabbing';\n          _this.dragX = event.pageX;\n          _this.dragY = event.pageY;\n        } else {\n          if (!_this.navigationPane.isNavigationPaneResized) {\n            _this.viewerContainer.style.cursor = 'move';\n            _this.viewerContainer.style.cursor = '-webkit-grab';\n            _this.viewerContainer.style.cursor = '-moz-grab';\n            _this.viewerContainer.style.cursor = 'grab';\n          }\n        }\n      } else {\n        if (!_this.navigationPane.isNavigationPaneResized) {\n          _this.viewerContainer.style.cursor = 'auto';\n        }\n      }\n    };\n    /**\n     * @param {MouseEvent} event - The MouseEvent.\n     * @returns {void}\n     */\n    this.viewerContainerOnMouseLeave = function (event) {\n      if (_this.isViewerMouseDown) {\n        if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n          _this.pdfViewer.textSelectionModule.textSelectionOnMouseLeave(event);\n        }\n      }\n      if (_this.pdfViewer.textSelectionModule && _this.pdfViewer.textSelectionModule.isTextSelection) {\n        event.preventDefault();\n      }\n      if (_this.action === 'Ink') {\n        _this.diagramMouseUp(event);\n        _this.isAnnotationAdded = true;\n      }\n    };\n    /**\n     * @param {MouseEvent} event - The MouseEvent.\n     * @returns {void}\n     */\n    this.viewerContainerOnMouseEnter = function (event) {\n      if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n        _this.pdfViewer.textSelectionModule.clear();\n      }\n    };\n    /**\n     * @param {MouseEvent} event - The MouseEvent.\n     * @returns {void}\n     */\n    this.viewerContainerOnMouseOver = function (event) {\n      // eslint-disable-next-line\n      var isIE = !!document.documentMode;\n      if (_this.isViewerMouseDown) {\n        if (!isIE) {\n          event.preventDefault();\n        }\n      }\n    };\n    /**\n     * @param {MouseEvent} event - The MouseEvent.\n     * @returns {void}\n     */\n    this.viewerContainerOnClick = function (event) {\n      if (event.type === 'dblclick') {\n        if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled && !_this.getCurrentTextMarkupAnnotation()) {\n          if (event.target.classList.contains('e-pv-text')) {\n            _this.isViewerContainerDoubleClick = true;\n            if (!_this.getTextMarkupAnnotationMode()) {\n              var pageNumber = parseFloat(event.target.id.split('_')[2]);\n              _this.pdfViewer.fireTextSelectionStart(pageNumber + 1);\n            }\n            _this.pdfViewer.textSelectionModule.selectAWord(event.target, event.clientX, event.clientY, false);\n            if (_this.pdfViewer.contextMenuSettings.contextMenuAction === 'MouseUp') {\n              _this.pdfViewer.textSelectionModule.calculateContextMenuPosition(event.clientY, event.clientX);\n            }\n            if (!_this.getTextMarkupAnnotationMode()) {\n              _this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(true, false);\n              _this.dblClickTimer = setTimeout(function () {\n                _this.applySelection();\n              }, 100);\n              _this.pdfViewer.textSelectionModule.fireTextSelectEnd();\n            } else if (_this.isTextMarkupAnnotationModule() && _this.getTextMarkupAnnotationMode()) {\n              // eslint-disable-next-line max-len\n              _this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations(_this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode);\n            }\n          }\n        } else if (_this.getCurrentTextMarkupAnnotation()) {\n          // this.pdfViewer.annotationModule.showAnnotationPopup(event);\n        }\n        if (_this.action && (_this.action === 'Perimeter' || _this.action === 'Polygon') && _this.tool) {\n          _this.eventArgs.position = _this.currentPosition;\n          _this.getMouseEventArgs(_this.currentPosition, _this.eventArgs, event, _this.eventArgs.source);\n          var ctrlKey = _this.isMetaKey(event);\n          var info = {\n            ctrlKey: event.ctrlKey,\n            shiftKey: event.shiftKey\n          };\n          _this.eventArgs.info = info;\n          _this.eventArgs.clickCount = event.detail;\n          _this.tool.mouseUp(_this.eventArgs, true);\n        }\n        if ((_this.pdfViewer.selectedItems || _this.pdfViewer.annotation && _this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) && !_this.pdfViewer.annotationSettings.isLock) {\n          // eslint-disable-next-line\n          var currentAnnotation = _this.pdfViewer.selectedItems.annotations[0];\n          if (_this.pdfViewer.selectedItems.annotations.length !== 0 && !(currentAnnotation.annotationSettings.isLock || currentAnnotation.isLock)) {\n            // eslint-disable-next-line max-len\n            if (_this.pdfViewer.annotationModule && !currentAnnotation.formFieldAnnotationType) {\n              // eslint-disable-next-line max-len\n              _this.pdfViewer.annotationModule.annotationSelect(currentAnnotation.annotName, currentAnnotation.pageIndex, currentAnnotation, null, true);\n              if (_this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus === false) {\n                if (_this.isFreeTextAnnotation(_this.pdfViewer.selectedItems.annotations) === true && !_this.pdfViewer.selectedItems.annotations[0].isLock) {\n                  var elmtPosition = {};\n                  elmtPosition.x = _this.pdfViewer.selectedItems.annotations[0].bounds.x;\n                  elmtPosition.y = _this.pdfViewer.selectedItems.annotations[0].bounds.y;\n                  // eslint-disable-next-line max-len\n                  _this.pdfViewer.annotation.freeTextAnnotationModule.addInuptElemet(elmtPosition, _this.pdfViewer.selectedItems.annotations[0]);\n                } else if (_this.pdfViewer.selectedItems.annotations[0].enableShapeLabel === true) {\n                  var elmtPosition = {};\n                  elmtPosition.x = _this.pdfViewer.selectedItems.annotations[0].bounds.x;\n                  elmtPosition.y = _this.pdfViewer.selectedItems.annotations[0].bounds.y;\n                  // eslint-disable-next-line max-len\n                  _this.pdfViewer.annotation.inputElementModule.editLabel(elmtPosition, _this.pdfViewer.selectedItems.annotations[0]);\n                } else {\n                  // eslint-disable-next-line\n                  var accordionExpand = document.getElementById(_this.pdfViewer.element.id + '_accordionContainer' + _this.pdfViewer.currentPageNumber);\n                  if (accordionExpand) {\n                    accordionExpand.ej2_instances[0].expandItem(true);\n                  }\n                  // eslint-disable-next-line\n                  if (_this.pdfViewer.toolbarModule && _this.pdfViewer.isFormDesignerToolbarVisible && _this.pdfViewer.enableAnnotationToolbar && !_this.pdfViewer.isAnnotationToolbarVisible && !isNullOrUndefined(_this.pdfViewer.toolbarModule.annotationToolbarModule)) {\n                    _this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(_this.pdfViewer.toolbarModule.annotationItem);\n                  }\n                  var commentsDiv = document.getElementById(_this.pdfViewer.selectedItems.annotations[0].annotName);\n                  if (commentsDiv) {\n                    if (!commentsDiv.classList.contains('e-pv-comments-border')) {\n                      commentsDiv.firstChild.click();\n                    }\n                  }\n                }\n              }\n            }\n          } else {\n            // eslint-disable-next-line max-len\n            var annotation = _this.pdfViewer.annotation;\n            var annotationModule = _this.pdfViewer.annotationModule;\n            if (annotation && annotationModule.textMarkupAnnotationModule && annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n              // eslint-disable-next-line\n              var annotation_1 = _this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;\n              // eslint-disable-next-line max-len\n              _this.pdfViewer.annotationModule.annotationSelect(annotation_1.annotName, _this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage, annotation_1, null, true);\n              // eslint-disable-next-line\n              var accordionExpand = document.getElementById(_this.pdfViewer.element.id + '_accordionContainer' + _this.currentPageNumber);\n              if (accordionExpand) {\n                accordionExpand.ej2_instances[0].expandItem(true);\n              }\n              // eslint-disable-next-line\n              var comments = document.getElementById(annotation_1.annotName);\n              if (comments) {\n                comments.firstChild.click();\n              }\n            }\n          }\n        }\n        if (_this.pdfViewer.designerMode && _this.pdfViewer.selectedItems.formFields.length > 0) {\n          var eventArgs = {\n            name: \"formFieldDoubleClick\",\n            field: _this.pdfViewer.selectedItems.formFields[0],\n            cancel: false\n          };\n          _this.pdfViewer.fireFormFieldDoubleClickEvent(eventArgs);\n          if (!eventArgs.cancel) {\n            _this.pdfViewer.formDesigner.createPropertiesWindow();\n          }\n        }\n      } else {\n        if (event.detail === 3) {\n          if (_this.isViewerContainerDoubleClick) {\n            clearTimeout(_this.dblClickTimer);\n            _this.isViewerContainerDoubleClick = false;\n          }\n          if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled && !_this.getTextMarkupAnnotationMode()) {\n            _this.pdfViewer.textSelectionModule.selectEntireLine(event);\n            _this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(true, false);\n            _this.pdfViewer.textSelectionModule.fireTextSelectEnd();\n            _this.applySelection();\n          }\n        }\n      }\n    };\n    /**\n     * @param {DragEvent} event - The DragEvent.\n     * @returns {void}\n     */\n    this.viewerContainerOnDragStart = function (event) {\n      // eslint-disable-next-line\n      var isIE = !!document.documentMode;\n      if (!isIE) {\n        event.preventDefault();\n      }\n    };\n    // eslint-disable-next-line\n    this.viewerContainerOnContextMenuClick = function (event) {\n      _this.isViewerMouseDown = false;\n    };\n    // eslint-disable-next-line\n    this.onWindowMouseUp = function (event) {\n      _this.isFreeTextContextMenu = false;\n      _this.isNewStamp = false;\n      _this.signatureAdded = false;\n      // eslint-disable-next-line\n      var annotationModule = _this.pdfViewer.annotationModule;\n      // eslint-disable-next-line max-len\n      if (annotationModule && annotationModule.textMarkupAnnotationModule && annotationModule.textMarkupAnnotationModule.isEnableTextMarkupResizer(annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode)) {\n        // eslint-disable-next-line\n        var modules = annotationModule.textMarkupAnnotationModule;\n        modules.isLeftDropletClicked = false;\n        modules.isDropletClicked = false;\n        modules.isRightDropletClicked = false;\n        if (!modules.currentTextMarkupAnnotation && window.getSelection().anchorNode === null) {\n          modules.showHideDropletDiv(true);\n        } else if (!modules.currentTextMarkupAnnotation && modules.currentTextMarkupAddMode === '') {\n          modules.isTextMarkupAnnotationMode = false;\n        }\n      }\n      if (!_this.getPopupNoteVisibleStatus()) {\n        if (event.button === 0) {\n          // eslint-disable-next-line max-len\n          if (_this.isNewFreeTextAnnotation()) {\n            if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled && !_this.getTextMarkupAnnotationMode()) {\n              // eslint-disable-next-line max-len\n              if (event.detail === 1 && !_this.viewerContainer.contains(event.target) && !_this.contextMenuModule.contextMenuElement.contains(event.target)) {\n                if (window.getSelection().anchorNode !== null) {\n                  _this.pdfViewer.textSelectionModule.textSelectionOnMouseup(event);\n                }\n              }\n              // eslint-disable-next-line\n              var target = event.target;\n              if (_this.viewerContainer.contains(event.target) && target.className !== 'e-pdfviewer-formFields' && target.className !== 'e-pv-formfield-input' && target.className !== 'e-pv-formfield-textarea') {\n                if (!_this.isClickedOnScrollBar(event, true) && !_this.isScrollbarMouseDown) {\n                  _this.pdfViewer.textSelectionModule.textSelectionOnMouseup(event);\n                } else {\n                  if (window.getSelection().anchorNode !== null) {\n                    _this.pdfViewer.textSelectionModule.applySpanForSelection();\n                  }\n                }\n              }\n            } else if (_this.getTextMarkupAnnotationMode()) {\n              // eslint-disable-next-line\n              var viewerElement = _this.pdfViewer.element;\n              // eslint-disable-next-line\n              var targetElement = event.target;\n              if (viewerElement && targetElement) {\n                if (viewerElement.id.split('_')[0] === targetElement.id.split('_')[0] && targetElement.id.split('_')[1] !== 'commenttextbox') {\n                  // eslint-disable-next-line max-len\n                  _this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations(_this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode);\n                }\n              }\n            }\n          }\n        } else if (event.button === 2) {\n          if (_this.viewerContainer.contains(event.target) && _this.skipPreventDefault(event.target)) {\n            if (_this.checkIsNormalText()) {\n              window.getSelection().removeAllRanges();\n            }\n          }\n        }\n        if (_this.isViewerMouseDown) {\n          _this.isViewerMouseDown = false;\n          if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n            _this.pdfViewer.textSelectionModule.clear();\n            _this.pdfViewer.textSelectionModule.selectionStartPage = null;\n          }\n          event.preventDefault();\n          event.stopPropagation();\n          return false;\n        } else {\n          return true;\n        }\n      }\n    };\n    /**\n     * @param {TouchEvent} event - The DragEvent.\n     * @returns {void}\n     */\n    this.onWindowTouchEnd = function (event) {\n      _this.signatureAdded = false;\n      // eslint-disable-next-line max-len\n      if (!_this.pdfViewer.element.contains(event.target) && !_this.contextMenuModule.contextMenuElement.contains(event.target)) {\n        if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n          _this.pdfViewer.textSelectionModule.clearTextSelection();\n        }\n      }\n    };\n    /**\n     * @param {TouchEvent} event - The TouchEvent.\n     * @returns {void}\n     */\n    this.viewerContainerOnTouchStart = function (event) {\n      var touchPoints = event.touches;\n      if (_this.pdfViewer.magnificationModule) {\n        _this.pdfViewer.magnificationModule.setTouchPoints(touchPoints[0].clientX, touchPoints[0].clientY);\n      }\n      var target = event.target;\n      // eslint-disable-next-line max-len\n      if (touchPoints.length === 1 && !target.classList.contains('e-pv-hyperlink') && _this.skipPreventDefault(target)) {\n        _this.preventTouchEvent(event);\n      }\n      if (event.touches.length === 1 && _this.isTextMarkupAnnotationModule() && !_this.getPopupNoteVisibleStatus()) {\n        if (!_this.isToolbarInkClicked) {\n          _this.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationTouchEnd(event);\n        }\n      }\n      _this.touchClientX = touchPoints[0].clientX;\n      _this.touchClientY = touchPoints[0].clientY;\n      _this.scrollY = touchPoints[0].clientY;\n      _this.previousTime = new Date().getTime();\n      // eslint-disable-next-line max-len\n      if (touchPoints.length === 1 && !(event.target.classList.contains('e-pv-touch-select-drop') || event.target.classList.contains('e-pv-touch-ellipse'))) {\n        if (Browser.isDevice && !_this.pdfViewer.enableDesktopMode && _this.pageCount > 0 && !_this.isThumb && !event.target.classList.contains('e-pv-hyperlink')) {\n          _this.handleTaps(touchPoints, event);\n        }\n        if (!isBlazor() || !Browser.isDevice || _this.pdfViewer.enableDesktopMode) {\n          _this.handleTextBoxTaps(touchPoints);\n        }\n        var designerMode = _this.isDesignerMode(target);\n        if (designerMode) {\n          _this.contextMenuModule.close();\n          // event.preventDefault();\n          if (!_this.isLongTouchPropagated) {\n            _this.longTouchTimer = setTimeout(function () {\n              if (!_this.isMoving) {\n                _this.isTouchDesignerMode = true;\n                /* eslint-disable */\n                _this.contextMenuModule.open(_this.touchClientY, _this.touchClientX, _this.viewerContainer);\n                /* eslint-enable */\n              }\n            }, 1000);\n          }\n          _this.isLongTouchPropagated = true;\n          _this.isMoving = false;\n        } else if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n          _this.pdfViewer.textSelectionModule.clearTextSelection();\n          _this.contextMenuModule.close();\n          // event.preventDefault();\n          if (!_this.isLongTouchPropagated) {\n            _this.longTouchTimer = setTimeout(function () {\n              _this.viewerContainerOnLongTouch(event);\n            }, 1000);\n          }\n          _this.isLongTouchPropagated = true;\n        }\n      }\n      // eslint-disable-next-line\n      var toolbarModule = _this.pdfViewer.toolbarModule ? _this.pdfViewer.toolbarModule.annotationToolbarModule : 'null';\n      if (target.classList.contains('e-pv-text') && (!toolbarModule || !toolbarModule.textMarkupToolbarElement || toolbarModule.textMarkupToolbarElement.children.length === 0)) {\n        target.classList.add('e-pv-text-selection-none');\n      }\n      _this.diagramMouseDown(event);\n      // eslint-disable-next-line max-len\n      if (_this.action === 'Perimeter' || _this.action === 'Distance' || _this.action === 'Line' || _this.action === 'Polygon' || _this.action === 'DrawTool' || _this.action === 'Drag' || _this.action.indexOf('Rotate') !== -1 || _this.action.indexOf('Resize') !== -1) {\n        event.preventDefault();\n      }\n    };\n    /**\n     * @param {TouchEvent} event - The TouchEvent.\n     * @returns {void}\n     */\n    this.viewerContainerOnLongTouch = function (event) {\n      _this.touchClientX = event.touches[0].clientX;\n      _this.touchClientY = event.touches[0].clientY;\n      event.preventDefault();\n      if (_this.pdfViewer.textSelectionModule) {\n        var target = event.target;\n        if (target.classList.contains('e-pv-text-selection-none')) {\n          target.classList.remove('e-pv-text-selection-none');\n        }\n        _this.pdfViewer.textSelectionModule.initiateTouchSelection(event, _this.touchClientX, _this.touchClientY);\n        if (Browser.isDevice && !_this.pdfViewer.enableDesktopMode) {\n          clearTimeout(_this.singleTapTimer);\n          _this.tapCount = 0;\n        }\n      }\n    };\n    /**\n     * @param {PointerEvent} event - The PointerEvent.\n     * @returns {void}\n     */\n    this.viewerContainerOnPointerDown = function (event) {\n      if (event.pointerType === 'touch') {\n        _this.pointerCount++;\n        if (_this.pointerCount <= 2) {\n          event.preventDefault();\n          _this.pointersForTouch.push(event);\n          if (_this.pointerCount === 2) {\n            _this.pointerCount = 0;\n          }\n          if (_this.pdfViewer.magnificationModule) {\n            _this.pdfViewer.magnificationModule.setTouchPoints(event.clientX, event.clientY);\n          }\n        }\n      }\n    };\n    /**\n     * @param {TouchEvent} event - The TouchEvent.\n     * @returns {void}\n     */\n    this.viewerContainerOnTouchMove = function (event) {\n      if (_this.action === 'Drag') {\n        _this.isMoving = true;\n      }\n      if (Browser.isDevice && !_this.pdfViewer.enableDesktopMode) {\n        clearTimeout(_this.singleTapTimer);\n        _this.singleTapTimer = null;\n        _this.tapCount = 0;\n      }\n      _this.preventTouchEvent(event);\n      if (_this.isToolbarInkClicked) {\n        event.preventDefault();\n      }\n      var touchPoints = event.touches;\n      if (_this.pdfViewer.magnificationModule) {\n        _this.isTouchScrolled = true;\n        if (touchPoints.length > 1 && _this.pageCount > 0) {\n          if (Browser.isDevice && !_this.pdfViewer.enableDesktopMode) {\n            _this.isTouchScrolled = false;\n          }\n          if (_this.pdfViewer.enablePinchZoom) {\n            // eslint-disable-next-line max-len\n            _this.pdfViewer.magnificationModule.initiatePinchMove(touchPoints[0].clientX, touchPoints[0].clientY, touchPoints[1].clientX, touchPoints[1].clientY);\n          }\n        } else if (touchPoints.length === 1 && _this.getPagesPinchZoomed()) {\n          if (Browser.isDevice && !_this.pdfViewer.enableDesktopMode) {\n            _this.isTouchScrolled = false;\n          }\n          _this.pdfViewer.magnificationModule.pinchMoveScroll();\n        }\n      }\n      _this.mouseX = touchPoints[0].clientX;\n      _this.mouseY = touchPoints[0].clientY;\n      var canvas;\n      // eslint-disable-next-line max-len\n      if (event.target && (event.target.id.indexOf('_text') > -1 || event.target.id.indexOf('_annotationCanvas') > -1 || event.target.classList.contains('e-pv-hyperlink')) && _this.pdfViewer.annotation) {\n        var pageIndex = _this.pdfViewer.annotation.getEventPageNumber(event);\n        var diagram = document.getElementById(_this.pdfViewer.element.id + '_annotationCanvas_' + pageIndex);\n        if (diagram) {\n          var canvas1 = diagram.getBoundingClientRect();\n          var left = canvas1.x ? canvas1.x : canvas1.left;\n          var top_3 = canvas1.y ? canvas1.y : canvas1.top;\n          canvas = new Rect(left + 10, top_3 + 10, canvas1.width - 10, canvas1.height - 10);\n        }\n      }\n      if (canvas && canvas.containsPoint({\n        x: _this.mouseX,\n        y: _this.mouseY\n      }) || _this.action === 'Ink') {\n        _this.diagramMouseMove(event);\n        _this.annotationEvent = event;\n      } else {\n        _this.diagramMouseLeave(event);\n        if (_this.isAnnotationDrawn) {\n          _this.diagramMouseUp(event);\n          _this.isAnnotationAdded = true;\n        }\n      }\n      touchPoints = null;\n    };\n    /**\n     * @param {PointerEvent} event - The TouchEvent.\n     * @returns {void}\n     */\n    this.viewerContainerOnPointerMove = function (event) {\n      if (event.pointerType === 'touch' && _this.pageCount > 0) {\n        event.preventDefault();\n        if (_this.pointersForTouch.length === 2) {\n          for (var i = 0; i < _this.pointersForTouch.length; i++) {\n            if (event.pointerId === _this.pointersForTouch[parseInt(i.toString(), 10)].pointerId) {\n              _this.pointersForTouch[parseInt(i.toString(), 10)] = event;\n              break;\n            }\n          }\n          if (_this.pdfViewer.magnificationModule && _this.pdfViewer.enablePinchZoom) {\n            // eslint-disable-next-line max-len\n            _this.pdfViewer.magnificationModule.initiatePinchMove(_this.pointersForTouch[0].clientX, _this.pointersForTouch[0].clientY, _this.pointersForTouch[1].clientX, _this.pointersForTouch[1].clientY);\n          }\n        }\n      }\n    };\n    /**\n     * @param {TouchEvent} event - The TouchEvent.\n     * @returns {void}\n     */\n    this.viewerContainerOnTouchEnd = function (event) {\n      if (_this.pdfViewer.magnificationModule) {\n        _this.pdfViewer.magnificationModule.pinchMoveEnd();\n      }\n      if (event.cancelable && !event.target.classList.contains('e-pv-touch-ellipse') && _this.pdfViewer.textSelectionModule && _this.pdfViewer.textSelectionModule.isTextSelection) {\n        event.preventDefault();\n      }\n      _this.isLongTouchPropagated = false;\n      clearInterval(_this.longTouchTimer);\n      _this.longTouchTimer = null;\n      if (Browser.isDevice && !_this.isDeviceiOS && !_this.pdfViewer.enableDesktopMode && _this.isTouchScrolled) {\n        _this.currentTime = new Date().getTime();\n        var duration = _this.currentTime - _this.previousTime;\n        // eslint-disable-next-line\n        var difference = _this.scrollY - event.changedTouches[0].pageY;\n        // eslint-disable-next-line\n        var speed = difference / duration;\n        if (Math.abs(speed) > 1.5) {\n          // eslint-disable-next-line\n          var scrollTop = difference + duration * speed;\n          if (scrollTop > 0) {\n            _this.viewerContainer.scrollTop += scrollTop;\n            _this.updateMobileScrollerPosition();\n          }\n        }\n      }\n      _this.diagramMouseUp(event);\n      _this.renderStampAnnotation(event);\n      if (!Browser.isDevice) {\n        _this.focusViewerContainer();\n      }\n    };\n    /**\n     * @param {PointerEvent} event - The PointerEvent.\n     * @returns {void}\n     */\n    this.viewerContainerOnPointerEnd = function (event) {\n      if (event.pointerType === 'touch') {\n        event.preventDefault();\n        if (_this.pdfViewer.magnificationModule) {\n          _this.pdfViewer.magnificationModule.pinchMoveEnd();\n        }\n        _this.pointersForTouch = [];\n        _this.pointerCount = 0;\n      }\n    };\n    // eslint-disable-next-line\n    this.viewerContainerOnScroll = function (event) {\n      var proxy = null;\n      proxy = _this;\n      var allowServerDataBind = proxy.pdfViewer.allowServerDataBinding;\n      proxy.pdfViewer.enableServerDataBinding(false);\n      var scrollposX = 0;\n      var scrollposY = 0;\n      if (event.touches && Browser.isDevice && !_this.pdfViewer.enableDesktopMode) {\n        // eslint-disable-next-line\n        var ratio = (_this.viewerContainer.scrollHeight - _this.viewerContainer.clientHeight) / (_this.viewerContainer.clientHeight - _this.toolbarHeight);\n        if (_this.isThumb) {\n          _this.ispageMoved = true;\n          event.preventDefault();\n          _this.mobilePageNoContainer.style.display = 'block';\n          scrollposX = event.touches[0].pageX - _this.scrollX;\n          scrollposY = event.touches[0].pageY - _this.viewerContainer.offsetTop;\n          _this.viewerContainer.scrollTop = scrollposY * ratio;\n          // eslint-disable-next-line\n          var containerValue = event.touches[0].pageY;\n          // eslint-disable-next-line\n          var toolbarHeight = _this.pdfViewer.toolbarModule ? 0 : 50;\n          if (_this.viewerContainer.scrollTop !== 0 && containerValue <= _this.viewerContainer.clientHeight - toolbarHeight) {\n            _this.mobileScrollerContainer.style.top = containerValue + 'px';\n          }\n        } else if (event.touches[0].target.className !== 'e-pv-touch-ellipse') {\n          if (!(_this.isWebkitMobile && Browser.isDevice && !_this.pdfViewer.enableDesktopMode)) {\n            _this.mobilePageNoContainer.style.display = 'none';\n            scrollposY = _this.touchClientY - event.touches[0].pageY;\n            scrollposX = _this.touchClientX - event.touches[0].pageX;\n            _this.viewerContainer.scrollTop = _this.viewerContainer.scrollTop + scrollposY;\n            _this.viewerContainer.scrollLeft = _this.viewerContainer.scrollLeft + scrollposX;\n          }\n          // eslint-disable-next-line\n          _this.updateMobileScrollerPosition();\n          _this.touchClientY = event.touches[0].pageY;\n          _this.touchClientX = event.touches[0].pageX;\n        }\n      }\n      if (_this.scrollHoldTimer) {\n        clearTimeout(_this.scrollHoldTimer);\n      }\n      var pageIndex = _this.currentPageNumber;\n      _this.scrollHoldTimer = null;\n      _this.contextMenuModule.close();\n      var verticalScrollValue = _this.viewerContainer.scrollTop;\n      // eslint-disable-next-line max-len\n      for (var i = 0; i < _this.pageCount; i++) {\n        if (_this.pageSize[parseInt(i.toString(), 10)] != null) {\n          var pageHeight = _this.getPageHeight(i);\n          if (pageHeight < 150) {\n            _this.pageStopValue = 75;\n          } else if (pageHeight >= 150 && pageHeight < 300) {\n            _this.pageStopValue = 125;\n          } else if (pageHeight >= 300 && pageHeight < 500) {\n            _this.pageStopValue = 200;\n          } else {\n            _this.pageStopValue = 300;\n          }\n          // eslint-disable-next-line max-len\n          if (verticalScrollValue + _this.pageStopValue <= _this.getPageTop(i) + pageHeight) {\n            _this.currentPageNumber = i + 1;\n            _this.pdfViewer.currentPageNumber = i + 1;\n            break;\n          }\n        }\n      }\n      // eslint-disable-next-line max-len\n      if (_this.pdfViewer.magnificationModule && _this.pdfViewer.magnificationModule.fitType === 'fitToPage' && _this.currentPageNumber > 0) {\n        if (_this.pageSize[_this.currentPageNumber - 1]) {\n          if (!_this.isPanMode && !Browser.isDevice && _this.pdfViewer.enableDesktopMode) {\n            _this.viewerContainer.scrollTop = _this.pageSize[_this.currentPageNumber - 1].top * _this.getZoomFactor();\n          }\n        }\n      }\n      _this.renderElementsVirtualScroll(_this.currentPageNumber);\n      // eslint-disable-next-line max-len\n      if (!_this.isViewerMouseDown && !_this.getPinchZoomed() && !_this.getPinchScrolled() && !_this.getPagesPinchZoomed() || _this.isViewerMouseWheel) {\n        _this.pageViewScrollChanged(_this.currentPageNumber);\n        _this.isViewerMouseWheel = false;\n      } else {\n        _this.showPageLoadingIndicator(_this.currentPageNumber - 1, false);\n      }\n      if (_this.pdfViewer.toolbarModule) {\n        if (!isBlazor()) {\n          _this.pdfViewer.toolbarModule.updateCurrentPage(_this.currentPageNumber);\n        }\n        if (!isBlazor()) {\n          if (!Browser.isDevice || _this.pdfViewer.enableDesktopMode) {\n            _this.pdfViewer.toolbarModule.updateNavigationButtons();\n          }\n        }\n      }\n      if (Browser.isDevice && !_this.pdfViewer.enableDesktopMode) {\n        _this.mobileSpanContainer.innerHTML = _this.currentPageNumber.toString();\n        _this.mobilecurrentPageContainer.innerHTML = _this.currentPageNumber.toString();\n      }\n      if (pageIndex !== _this.currentPageNumber) {\n        if (proxy.pdfViewer.thumbnailViewModule && (!Browser.isDevice || _this.pdfViewer.enableDesktopMode)) {\n          proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.currentPageNumber - 1);\n          proxy.pdfViewer.thumbnailViewModule.isThumbnailClicked = false;\n        }\n        _this.pdfViewer.firePageChange(pageIndex);\n      }\n      if (_this.pdfViewer.magnificationModule) {\n        if (!_this.isPanMode && !Browser.isDevice && _this.pdfViewer.enableDesktopMode) {\n          _this.pdfViewer.magnificationModule.updatePagesForFitPage(_this.currentPageNumber - 1);\n        }\n      }\n      var currentPage = _this.getElement('_pageDiv_' + (_this.currentPageNumber - 1));\n      if (currentPage) {\n        currentPage.style.visibility = 'visible';\n      }\n      if (_this.isViewerMouseDown) {\n        if (_this.getRerenderCanvasCreated() && !_this.isPanMode) {\n          _this.pdfViewer.magnificationModule.clearIntervalTimer();\n        }\n        // eslint-disable-next-line\n        var data = _this.clientSideRendering ? _this.getLinkInformation(_this.currentPageNumber) : _this.getStoredData(_this.currentPageNumber);\n        if (data) {\n          _this.isDataExits = true;\n          _this.initiatePageViewScrollChanged();\n          _this.isDataExits = false;\n        } else {\n          // eslint-disable-next-line max-len\n          var timer = _this.pdfViewer.scrollSettings.delayPageRequestTimeOnScroll ? _this.pdfViewer.scrollSettings.delayPageRequestTimeOnScroll : 100;\n          _this.scrollHoldTimer = setTimeout(function () {\n            _this.initiatePageViewScrollChanged();\n          }, timer);\n        }\n      }\n      if (_this.pdfViewer.annotation && _this.navigationPane.commentPanelContainer) {\n        _this.pdfViewer.annotation.stickyNotesAnnotationModule.updateCommentPanelScrollTop(_this.currentPageNumber);\n      }\n      // eslint-disable-next-line max-len\n      if (Browser.isDevice && !_this.pdfViewer.enableDesktopMode && event.touches && event.touches[0].target.className !== 'e-pv-touch-ellipse') {\n        setTimeout(function () {\n          _this.updateMobileScrollerPosition();\n        }, 500);\n      }\n      proxy.pdfViewer.enableServerDataBinding(allowServerDataBind, true);\n    };\n    this.pdfViewer = viewer;\n    this.navigationPane = new NavigationPane(this.pdfViewer, this);\n    this.textLayer = new TextLayer(this.pdfViewer, this);\n    this.accessibilityTags = new AccessibilityTags(this.pdfViewer, this);\n    this.signatureModule = new Signature(this.pdfViewer, this);\n  }\n  /**\n   * @private\n   * @returns {void}\n   */\n  PdfViewerBase.prototype.initializeComponent = function () {\n    var element = document.getElementById(this.pdfViewer.element.id);\n    if (element) {\n      this.blazorUIAdaptor = isBlazor() ? new BlazorUiAdaptor(this.pdfViewer, this) : null;\n      if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n        this.pdfViewer.element.classList.add('e-pv-mobile-view');\n      }\n      var controlWidth = '100%';\n      var toolbarDiv = void 0;\n      this.viewerMainContainer = isBlazor() ? element.querySelector('.e-pv-viewer-main-container') : createElement('div', {\n        id: this.pdfViewer.element.id + '_viewerMainContainer',\n        className: 'e-pv-viewer-main-container'\n      });\n      this.viewerContainer = isBlazor() ? element.querySelector('.e-pv-viewer-container') : createElement('div', {\n        id: this.pdfViewer.element.id + '_viewerContainer',\n        className: 'e-pv-viewer-container'\n      });\n      if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n        this.createMobilePageNumberContainer();\n      }\n      // eslint-disable-next-line\n      this.viewerContainer.tabIndex = -1;\n      if (this.pdfViewer.enableRtl) {\n        this.viewerContainer.style.direction = 'rtl';\n      }\n      element.style.touchAction = 'pan-x pan-y';\n      this.setMaximumHeight(element);\n      this.mainContainer = isBlazor() ? element.querySelector('.e-pv-main-container') : createElement('div', {\n        id: this.pdfViewer.element.id + '_mainContainer',\n        className: 'e-pv-main-container'\n      });\n      this.mainContainer.appendChild(this.viewerMainContainer);\n      element.appendChild(this.mainContainer);\n      this.applyViewerHeight(this.mainContainer);\n      if (this.pdfViewer.toolbarModule) {\n        this.navigationPane.initializeNavigationPane();\n        toolbarDiv = this.pdfViewer.toolbarModule.intializeToolbar(controlWidth);\n      } else {\n        if (isBlazor()) {\n          this.navigationPane.initializeNavigationPane();\n          toolbarDiv = this.pdfViewer.element.querySelector('.e-pv-toolbar');\n          if (!this.pdfViewer.enableToolbar) {\n            this.toolbarHeight = 0;\n            toolbarDiv.style.display = 'none';\n          }\n          if (!this.pdfViewer.enableNavigationToolbar && (Browser.isDevice && this.pdfViewer.enableDesktopMode || !Browser.isDevice)) {\n            this.navigationPane.sideBarToolbar.style.display = 'none';\n            this.navigationPane.sideBarToolbarSplitter.style.display = 'none';\n            if (this.navigationPane.isBookmarkOpen || this.navigationPane.isThumbnailOpen) {\n              this.navigationPane.updateViewerContainerOnClose();\n            }\n          }\n        }\n      }\n      if (toolbarDiv) {\n        this.viewerContainer.style.height = this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height, 56);\n      } else {\n        this.viewerContainer.style.height = this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height, 0);\n      }\n      var viewerWidth = this.pdfViewer.element.clientWidth;\n      if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n        viewerWidth = viewerWidth - (this.navigationPane.sideBarToolbar ? this.navigationPane.getViewerContainerLeft() : 0) - (this.navigationPane.commentPanelContainer ? this.navigationPane.getViewerContainerRight() : 0);\n      }\n      this.viewerContainer.style.width = viewerWidth + 'px';\n      this.viewerMainContainer.appendChild(this.viewerContainer);\n      if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n        this.mobileScrollerContainer.style.left = viewerWidth - parseFloat(this.mobileScrollerContainer.style.width) + 'px';\n        this.mobilePageNoContainer.style.left = viewerWidth / 2 - parseFloat(this.mobilePageNoContainer.style.width) / 2 + 'px';\n        this.mobilePageNoContainer.style.top = this.pdfViewer.element.clientHeight / 2 + 'px';\n        this.mobilePageNoContainer.style.display = 'none';\n        this.mobilePageNoContainer.appendChild(this.mobilecurrentPageContainer);\n        this.mobilePageNoContainer.appendChild(this.mobilenumberContainer);\n        this.mobilePageNoContainer.appendChild(this.mobiletotalPageContainer);\n        this.viewerContainer.appendChild(this.mobilePageNoContainer);\n        this.viewerMainContainer.appendChild(this.mobileScrollerContainer);\n        this.mobileScrollerContainer.appendChild(this.mobileSpanContainer);\n      }\n      this.pageContainer = createElement('div', {\n        id: this.pdfViewer.element.id + '_pageViewContainer',\n        className: 'e-pv-page-container',\n        attrs: {\n          'role': 'document'\n        }\n      });\n      if (this.pdfViewer.enableRtl) {\n        this.pageContainer.style.direction = 'ltr';\n      }\n      this.viewerContainer.appendChild(this.pageContainer);\n      this.pageContainer.style.width = this.viewerContainer.clientWidth + 'px';\n      if (toolbarDiv && this.pdfViewer.thumbnailViewModule && (!Browser.isDevice || this.pdfViewer.enableDesktopMode)) {\n        this.pdfViewer.thumbnailViewModule.createThumbnailContainer();\n      }\n      this.createPrintPopup();\n      if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n        this.createGoToPagePopup();\n      }\n      var waitingPopup = createElement('div', {\n        id: this.pdfViewer.element.id + '_loadingIndicator'\n      });\n      this.viewerContainer.appendChild(waitingPopup);\n      createSpinner({\n        target: waitingPopup,\n        cssClass: 'e-spin-center'\n      });\n      this.setLoaderProperties(waitingPopup);\n      if (isBlazor()) {\n        this.contextMenuModule = new BlazorContextMenu(this.pdfViewer, this);\n        // eslint-disable-next-line\n        var spinnerElement = document.getElementsByClassName(this.pdfViewer.element.id + '_spinner');\n        if (spinnerElement && spinnerElement[0] && !spinnerElement[0].classList.contains('e-spin-hide')) {\n          spinnerElement[0].classList.remove('e-spin-show');\n          spinnerElement[0].classList.add('e-spin-hide');\n        }\n      } else {\n        this.contextMenuModule = new ContextMenu(this.pdfViewer, this);\n      }\n      this.contextMenuModule.createContextMenu();\n      this.createFileInputElement();\n      this.wireEvents();\n      if (this.pdfViewer.textSearchModule && (!Browser.isDevice || this.pdfViewer.enableDesktopMode)) {\n        this.pdfViewer.textSearchModule.createTextSearchBox();\n      }\n      if (this.pdfViewer.documentPath) {\n        if (isBlazor()) {\n          this.pdfViewer._dotnetInstance.invokeMethodAsync('LoadDocumentFromClient', this.pdfViewer.documentPath);\n        } else {\n          this.pdfViewer.load(this.pdfViewer.documentPath, null);\n        }\n      }\n      if (this.pdfViewer.annotationModule) {\n        this.pdfViewer.annotationModule.initializeCollection();\n      }\n    }\n    if (Browser.isDevice && this.pdfViewer.enableDesktopMode && this.pdfViewer.toolbarModule) {\n      this.pdfViewer.interactionMode = 'Pan';\n    }\n  };\n  PdfViewerBase.prototype.createMobilePageNumberContainer = function () {\n    this.mobilePageNoContainer = createElement('div', {\n      id: this.pdfViewer.element.id + '_mobilepagenoContainer',\n      className: 'e-pv-mobilepagenoscroll-container'\n    });\n    this.mobilecurrentPageContainer = createElement('span', {\n      id: this.pdfViewer.element.id + '_mobilecurrentpageContainer',\n      className: 'e-pv-mobilecurrentpage-container'\n    });\n    this.mobilenumberContainer = createElement('span', {\n      id: this.pdfViewer.element.id + '_mobiledashedlineContainer',\n      className: 'e-pv-mobiledashedline-container'\n    });\n    this.mobiletotalPageContainer = createElement('span', {\n      id: this.pdfViewer.element.id + '_mobiletotalpageContainer',\n      className: 'e-pv-mobiletotalpage-container'\n    });\n    this.mobileScrollerContainer = createElement('div', {\n      id: this.pdfViewer.element.id + '_mobilescrollContainer',\n      className: 'e-pv-mobilescroll-container'\n    });\n    this.mobileSpanContainer = createElement('span', {\n      id: this.pdfViewer.element.id + '_mobilespanContainer',\n      className: 'e-pv-mobilespanscroll-container'\n    });\n    this.mobileSpanContainer.innerHTML = '1';\n    this.mobilecurrentPageContainer.innerHTML = '1';\n    this.mobilenumberContainer.innerHTML = '&#x2015;&#x2015;&#x2015;&#x2015;&#x2015;';\n    this.mobileScrollerContainer.style.cssFloat = 'right';\n    this.mobileScrollerContainer.style.width = '40px';\n    this.mobileScrollerContainer.style.height = '32px';\n    this.mobileScrollerContainer.style.zIndex = '100';\n    this.mobilePageNoContainer.style.width = '120px';\n    this.mobilePageNoContainer.style.height = '100px';\n    this.mobilePageNoContainer.style.zIndex = '100';\n    this.mobilePageNoContainer.style.position = 'fixed';\n    this.mobileScrollerContainer.addEventListener('touchstart', this.mobileScrollContainerDown.bind(this));\n    this.mobileScrollerContainer.addEventListener('touchend', this.mobileScrollContainerEnd.bind(this));\n    this.mobileScrollerContainer.style.display = 'none';\n  };\n  /**\n   * @private\n   * @param  {string} documentData - file name or base64 string.\n   * @param {string} password - password of the PDF document.\n   * @returns {void}\n   */\n  PdfViewerBase.prototype.initiatePageRender = function (documentData, password) {\n    if (this.clientSideRendering) {\n      this.pdfViewer.unload();\n    }\n    this.loadedData = documentData;\n    this.documentId = this.createGUID();\n    if (this.viewerContainer) {\n      this.viewerContainer.scrollTop = 0;\n    }\n    this.showLoadingIndicator(true);\n    this.hashId = ' ';\n    this.isFileName = false;\n    this.saveDocumentInfo();\n    if (this.pdfViewer.interactionMode === 'Pan') {\n      this.initiatePanning();\n    }\n    documentData = this.checkDocumentData(documentData);\n    var isbase64 = this.loadedData.includes('pdf;base64,');\n    if (isbase64 && this.clientSideRendering) {\n      this.pdfViewer.fileByteArray = this.convertBase64(documentData);\n    }\n    this.setFileName();\n    if (this.pdfViewer.downloadFileName) {\n      this.downloadFileName = this.pdfViewer.downloadFileName;\n    } else {\n      this.downloadFileName = this.pdfViewer.fileName;\n    }\n    var jsonObject = this.constructJsonObject(documentData, password, isbase64);\n    this.createAjaxRequest(jsonObject, documentData, password);\n  };\n  /**\n  * @private\n  */\n  PdfViewerBase.prototype.initiateLoadDocument = function (documentId, isFileName, fileName) {\n    if (documentId) {\n      this.documentId = documentId;\n    }\n    if (this.viewerContainer) {\n      this.viewerContainer.scrollTop = 0;\n    }\n    this.showLoadingIndicator(true);\n    this.hashId = ' ';\n    this.isFileName = isFileName;\n    this.saveDocumentInfo();\n    if (this.pdfViewer.interactionMode === 'Pan') {\n      this.initiatePanning();\n    }\n    this.setFileName();\n    if (this.pdfViewer.fileName === null) {\n      if (isFileName && fileName) {\n        this.pdfViewer.fileName = fileName;\n        this.jsonDocumentId = this.pdfViewer.fileName;\n      } else {\n        this.pdfViewer.fileName = 'undefined.pdf';\n        this.jsonDocumentId = null;\n      }\n    }\n    if (this.pdfViewer.downloadFileName) {\n      this.downloadFileName = this.pdfViewer.downloadFileName;\n    } else {\n      this.downloadFileName = this.pdfViewer.fileName;\n    }\n  };\n  /**\n   * @private\n   */\n  PdfViewerBase.prototype.convertBase64 = function (base64) {\n    return new Uint8Array(atob(base64).split('').map(function (char) {\n      return char.charCodeAt(0);\n    }));\n  };\n  /**\n   * @private\n   */\n  PdfViewerBase.prototype.loadSuccess = function (documentDetails, password) {\n    // eslint-disable-next-line\n    var data = documentDetails;\n    if (data) {\n      if (typeof data !== 'object') {\n        try {\n          data = JSON.parse(data);\n        } catch (error) {\n          this.onControlError(500, data, this.pdfViewer.serverActionSettings.load);\n          data = null;\n        }\n      }\n      if (data) {\n        while (typeof data !== 'object') {\n          data = JSON.parse(data);\n          // eslint-disable-next-line\n          if (typeof parseInt(data) === 'number' && !isNaN(parseInt(data))) {\n            // eslint-disable-next-line\n            data = parseInt(data);\n            break;\n          }\n        }\n        if (data.StatusText && data.StatusText === 'File Does not Exist') {\n          this.showLoadingIndicator(false);\n        }\n        // eslint-disable-next-line\n        if (data.uniqueId === this.documentId || typeof parseInt(data) === 'number' && !isNaN(parseInt(data))) {\n          this.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.load, data);\n          this.requestSuccess(data, null, password);\n        }\n      }\n    }\n  };\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.mobileScrollContainerDown = function (event) {\n    this.ispageMoved = false;\n    this.isThumb = true;\n    if (this.isTextMarkupAnnotationModule()) {\n      // eslint-disable-next-line max-len\n      if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage != null && Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n        var pageNumber = this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage;\n        this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage = null;\n        this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearAnnotationSelection(pageNumber);\n        this.pdfViewer.toolbar.showToolbar(true);\n      }\n    }\n    this.mobileScrollerContainer.addEventListener('touchmove', this.viewerContainerOnScroll.bind(this), true);\n  };\n  /**\n   * @private\n   * @param {MouseEvent} e - default mouse event.\n   * @returns {PointModel} - retuns the bounds.\n   */\n  PdfViewerBase.prototype.relativePosition = function (e) {\n    // eslint-disable-next-line\n    var currentRect = this.viewerContainer.getBoundingClientRect();\n    var left = e.clientX - currentRect.left;\n    var top = e.clientY - currentRect.top;\n    return {\n      x: left,\n      y: top\n    };\n  };\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.setMaximumHeight = function (element) {\n    // eslint-disable-next-line\n    var currentRect = element.getBoundingClientRect();\n    if (!Browser.isDevice || this.pdfViewer.enableDesktopMode || currentRect && currentRect.height === 0) {\n      element.style.minHeight = '500px';\n    }\n    this.updateWidth();\n    this.updateHeight();\n  };\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.applyViewerHeight = function (element) {\n    // eslint-disable-next-line\n    var currentRect = element.getBoundingClientRect();\n    if (Browser.isDevice && !this.pdfViewer.enableDesktopMode && currentRect && currentRect.height === 0) {\n      element.style.minHeight = '500px';\n    }\n  };\n  /**\n   * @private\n   * @returns {void}\n   */\n  PdfViewerBase.prototype.updateWidth = function () {\n    if (this.pdfViewer.width.toString() !== 'auto') {\n      // eslint-disable-next-line\n      this.pdfViewer.element.style.width = this.pdfViewer.width;\n    }\n  };\n  /**\n   * @private\n   * @returns {void}\n   */\n  PdfViewerBase.prototype.updateHeight = function () {\n    if (this.pdfViewer.height.toString() !== 'auto') {\n      // eslint-disable-next-line\n      this.pdfViewer.element.style.height = this.pdfViewer.height;\n    }\n  };\n  /**\n   * @private\n   * @returns {void}\n   */\n  PdfViewerBase.prototype.updateViewerContainer = function () {\n    var sideBarContentContainer = this.getElement('_sideBarContentContainer');\n    if (sideBarContentContainer && sideBarContentContainer.style.display === 'none') {\n      this.navigationPane.updateViewerContainerOnClose();\n    } else if (sideBarContentContainer && sideBarContentContainer.style.display === 'block') {\n      this.navigationPane.updateViewerContainerOnExpand();\n    } else {\n      this.updateViewerContainerSize();\n    }\n    // eslint-disable-next-line\n    var toolbarModule = this.pdfViewer.toolbarModule;\n    if (toolbarModule) {\n      if (isBlazor()) {\n        if (this.pdfViewer.enableToolbar || this.pdfViewer.enableAnnotationToolbar) {\n          this.pdfViewer._dotnetInstance.invokeMethodAsync('RefreshToolbarItems');\n        }\n      } else {\n        if (this.pdfViewer.enableToolbar) {\n          toolbarModule.toolbar.refreshOverflow();\n        }\n        if (this.pdfViewer.enableAnnotationToolbar && toolbarModule.annotationToolbarModule) {\n          toolbarModule.annotationToolbarModule.toolbar.refreshOverflow();\n        }\n      }\n    }\n  };\n  PdfViewerBase.prototype.updateViewerContainerSize = function () {\n    this.viewerContainer.style.width = this.pdfViewer.element.clientWidth + 'px';\n    this.pageContainer.style.width = this.viewerContainer.offsetWidth + 'px';\n    this.updateZoomValue();\n  };\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.mobileScrollContainerEnd = function (event) {\n    if (!this.ispageMoved) {\n      this.goToPagePopup.show();\n    }\n    this.isThumb = false;\n    this.ispageMoved = false;\n    this.mobileScrollerContainer.removeEventListener('touchmove', this.viewerContainerOnScroll.bind(this), true);\n    this.mobilePageNoContainer.style.display = 'none';\n  };\n  /**\n   * @private\n   * @param {any} data - data.\n   * @returns {boolean}\n   */\n  PdfViewerBase.prototype.checkRedirection = function (data) {\n    var redirect = false;\n    if (data && typeof data === 'object' && (data.redirectUrl || data.redirectUri || data.redirectUrl === \"\" || data.redirectUri === \"\")) {\n      if (data.redirectUrl === \"\" || data.redirectUri === \"\") {\n        redirect = true;\n      } else {\n        data.redirectUrl ? window.location.href = data.redirectUrl : window.location.href = data.redirectUri;\n      }\n    } else if (data && typeof data === 'string' && (data.includes('redirectUrl') || data.includes('redirectUri'))) {\n      if (JSON.parse(data).redirectUrl === \"\" || JSON.parse(data).redirectUri === \"\") {\n        redirect = true;\n      } else {\n        data.includes('redirectUrl') ? window.location.href = JSON.parse(data).redirectUrl : window.location.href = JSON.parse(data).redirectUri;\n      }\n    }\n    return redirect;\n  };\n  PdfViewerBase.prototype.getPdfBase64 = function (input) {\n    if (input.startsWith('http://') || input.startsWith('https://')) {\n      return fetch(input).then(function (response) {\n        if (response.ok) {\n          return response.arrayBuffer();\n        } else {\n          console.error('Error fetching PDF:', response.statusText);\n          throw new Error(response.statusText);\n        }\n      }).then(function (pdfData) {\n        var binary = new Uint8Array(pdfData).reduce(function (str, byte) {\n          return str + String.fromCharCode(byte);\n        }, '');\n        var base64String = btoa(binary);\n        return base64String;\n      }).catch(function (error) {\n        console.error('Error fetching PDF:', error.message);\n        throw error;\n      });\n    } else {\n      return Promise.resolve(input);\n    }\n  };\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.createAjaxRequest = function (jsonObject, documentData, password) {\n    var _this = this;\n    var proxy = null;\n    proxy = this;\n    if (this.pdfViewer.serverActionSettings) {\n      this.loadRequestHandler = new AjaxHandler(this.pdfViewer);\n      this.loadRequestHandler.url = this.pdfViewer.serviceUrl + '/' + this.pdfViewer.serverActionSettings.load;\n      this.loadRequestHandler.responseType = 'json';\n      this.loadRequestHandler.mode = true;\n      // eslint-disable-next-line\n      jsonObject['action'] = 'Load';\n      // eslint-disable-next-line\n      jsonObject['elementId'] = this.pdfViewer.element.id;\n      if (this.clientSideRendering) {\n        this.getPdfBase64(documentData).then(function (pdfBase64) {\n          var data = _this.pdfViewer.pdfRendererModule.load(pdfBase64, _this.documentId, password, jsonObject);\n          if (data) {\n            if (typeof data !== 'object') {\n              try {\n                data = JSON.parse(data);\n              } catch (error) {\n                proxy.onControlError(500, data, _this.pdfViewer.serverActionSettings.load);\n                data = null;\n              }\n            }\n            if (data) {\n              while (typeof data !== 'object') {\n                data = JSON.parse(data);\n                // eslint-disable-next-line\n                if (typeof parseInt(data) === 'number' && !isNaN(parseInt(data))) {\n                  // eslint-disable-next-line\n                  data = parseInt(data);\n                  break;\n                }\n              }\n              // eslint-disable-next-line\n              if (data.uniqueId === proxy.documentId || typeof parseInt(data) === 'number' && !isNaN(parseInt(data))) {\n                proxy.updateFormFieldName(data);\n                proxy.pdfViewer.fireAjaxRequestSuccess(_this.pdfViewer.serverActionSettings.load, data);\n                if (!isNullOrUndefined(data['isTaggedPdf']) && data['isTaggedPdf']) {\n                  proxy.isTaggedPdf = true;\n                }\n                proxy.requestSuccess(data, documentData, password);\n              }\n            }\n          } else {\n            proxy.showLoadingIndicator(false);\n            proxy.openImportExportNotificationPopup(proxy.pdfViewer.localeObj.getConstant('Import PDF Failed'));\n          }\n        });\n      } else {\n        this.loadRequestHandler.send(jsonObject);\n        // eslint-disable-next-line\n        this.loadRequestHandler.onSuccess = function (result) {\n          // eslint-disable-next-line\n          var data = result.data;\n          var redirect = proxy.checkRedirection(data);\n          if (redirect) {\n            proxy.showLoadingIndicator(false);\n          } else {\n            if (data) {\n              if (typeof data !== 'object') {\n                try {\n                  data = JSON.parse(data);\n                } catch (error) {\n                  proxy.onControlError(500, data, this.pdfViewer.serverActionSettings.load);\n                  data = null;\n                }\n              }\n              if (data) {\n                while (typeof data !== 'object') {\n                  data = JSON.parse(data);\n                  // eslint-disable-next-line\n                  if (typeof parseInt(data) === 'number' && !isNaN(parseInt(data))) {\n                    // eslint-disable-next-line\n                    data = parseInt(data);\n                    break;\n                  }\n                }\n                // eslint-disable-next-line\n                if (data.uniqueId === proxy.documentId || typeof parseInt(data) === 'number' && !isNaN(parseInt(data))) {\n                  proxy.updateFormFieldName(data);\n                  proxy.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.load, data);\n                  if (!isNullOrUndefined(data['isTaggedPdf']) && data['isTaggedPdf']) {\n                    proxy.isTaggedPdf = true;\n                  }\n                  proxy.requestSuccess(data, documentData, password);\n                }\n              }\n            } else {\n              proxy.showLoadingIndicator(false);\n              proxy.openImportExportNotificationPopup(proxy.pdfViewer.localeObj.getConstant('Import PDF Failed'));\n            }\n          }\n        };\n        // eslint-disable-next-line\n        this.loadRequestHandler.onFailure = function (result) {\n          var statusString = result.status.toString().split('')[0];\n          if (statusString === '4') {\n            proxy.openNotificationPopup('Client error');\n          } else {\n            proxy.openNotificationPopup();\n          }\n          proxy.showLoadingIndicator(false);\n          proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.load);\n        };\n        // eslint-disable-next-line\n        this.loadRequestHandler.onError = function (result) {\n          proxy.openNotificationPopup();\n          proxy.showLoadingIndicator(false);\n          // eslint-disable-next-line\n          proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.load);\n        };\n      }\n    }\n  };\n  // EJ2-60380 - As of now, in form designer the element name is taken fromfield.ActualFieldName (with hypen) but for\n  // Form fields it is taken from field.FieldName (without hypen).\n  // For this reason when user taken the form feilds on button click, name of the form feilds are different with and without form designer module\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.updateFormFieldName = function (data) {\n    if (data && data.PdfRenderedFormFields && data.PdfRenderedFormFields.length > 0) {\n      var field = void 0;\n      for (var i = 0; i < data.PdfRenderedFormFields.length; i++) {\n        field = data.PdfRenderedFormFields[parseInt(i.toString(), 10)];\n        if (field) {\n          if (field.ActualFieldName) {\n            field.FieldName = field.ActualFieldName;\n          }\n          if (isNullOrUndefined(field.Value)) {\n            field.Value = \"\";\n          }\n        }\n      }\n    }\n  };\n  /**\n   * @private\n   * @param {string} errorString - The message to be displayed.\n   * @returns {void}\n   */\n  PdfViewerBase.prototype.openNotificationPopup = function (errorString) {\n    var _this = this;\n    if (this.pdfViewer.showNotificationDialog) {\n      if (errorString === 'Client error') {\n        if (isBlazor()) {\n          var promise = this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText', 'PdfViewer_Clienterror');\n          promise.then(function (value) {\n            _this.textLayer.createNotificationPopup(value);\n          });\n        } else {\n          this.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant('Client error'));\n        }\n      } else {\n        if (isBlazor()) {\n          var promise = this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText', 'PdfViewer_Servererror');\n          promise.then(function (value) {\n            _this.textLayer.createNotificationPopup(value);\n          });\n        } else {\n          this.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant('Server error'));\n        }\n      }\n      if (this.getElement('_notify')) {\n        this.getElement('_notify').classList.add('e-pv-notification-large-content');\n      }\n    }\n  };\n  /**\n   * @private\n   * @param {string} errorString - The message to be shown.\n   * @returns {void}\n   */\n  PdfViewerBase.prototype.showNotificationPopup = function (errorString) {\n    if (!this.pdfViewer.showNotificationDialog && errorString !== '') {\n      this.textLayer.createNotificationPopup(errorString);\n      if (this.getElement('_notify')) {\n        this.getElement('_notify').classList.add('e-pv-notification-large-content');\n      }\n    }\n  };\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.requestSuccess = function (data, documentData, password) {\n    if (this.clientSideRendering) {\n      if (data.isDigitalSignaturePresent && !isNullOrUndefined(data.digitialSignatureFile) && data.digitialSignatureFile != \"\") {\n        this.pdfViewer.fileByteArray = this.convertBase64(data.digitialSignatureFile);\n      } else if (data.fileByteArray) {\n        this.pdfViewer.fileByteArray = this.convertBase64(data.fileByteArray);\n      } else if (!this.pdfViewer.fileByteArray && !isNullOrUndefined(this.pdfViewer.toolbarModule) && this.pdfViewer.toolbarModule.uploadedFile) {\n        this.pdfViewer.fileByteArray = this.convertBase64(this.pdfViewer.toolbarModule.uploadedFile.replace(/^data:+[a-zA-Z]+\\/[a-zA-Z]+;base64,/g, ''));\n      } else if (!this.pdfViewer.fileByteArray && data.documentData) {\n        this.pdfViewer.fileByteArray = this.convertBase64(data.documentData);\n      }\n    }\n    if (data && data.pageCount !== undefined) {\n      if (isBlazor() && this.isPassword) {\n        this.isPassword = false;\n        this.isPasswordAvailable = false;\n        this.pdfViewer._dotnetInstance.invokeMethodAsync('ClosePasswordDialog');\n      }\n      if (password && password != '') {\n        this.passwordData = password;\n      }\n      this.pdfViewer.allowServerDataBinding = false;\n      this.pageCount = data.pageCount;\n      this.pdfViewer.pageCount = data.pageCount;\n      this.hashId = data.hashId;\n      this.documentLiveCount = data.documentLiveCount;\n      this.isAnnotationCollectionRemoved = false;\n      this.saveDocumentHashData();\n      this.saveFormfieldsData(data);\n      this.pdfViewer.allowServerDataBinding = true;\n      if (this.clientSideRendering) {\n        this.isDigitalSignaturePresent = data.isDigitalSignaturePresent;\n      } else {\n        this.digitalSignaturePages = data.digitalSignaturePages;\n      }\n      this.pageRender(data);\n      // eslint-disable-next-line\n      var pageData = {\n        pageCount: data.pageCount,\n        pageSizes: data.pageSizes\n      };\n      window.sessionStorage.setItem(this.documentId + '_pagedata', JSON.stringify(pageData));\n      if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n        this.mobileScrollerContainer.style.display = '';\n        // eslint-disable-next-line\n        var toolbarHeight = this.pdfViewer.toolbarModule ? this.toolbarHeight : 0;\n        this.mobileScrollerContainer.style.top = toolbarHeight + 'px';\n      }\n      this.restrictionList = data.RestrictionSummary;\n      this.RestrictionEnabled(this.restrictionList, false);\n    } else {\n      this.pageCount = 0;\n      this.currentPageNumber = 0;\n      if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n        this.mobileScrollerContainer.style.display = 'none';\n      }\n      if (data === 4) {\n        if (!isBlazor()) {\n          // 4 is error code for encrypted document.\n          this.renderPasswordPopup(documentData, password);\n        }\n      } else if (data === 3) {\n        if (!isBlazor()) {\n          // 3 is error code for corrupted document.\n          this.renderCorruptPopup();\n        }\n      }\n      if (this.pdfViewer.toolbarModule) {\n        this.pdfViewer.toolbarModule.updateToolbarItems();\n      }\n    }\n    // eslint-disable-next-line\n    var annotationModule = this.pdfViewer.annotationModule;\n    // eslint-disable-next-line max-len\n    if (annotationModule && annotationModule.textMarkupAnnotationModule && annotationModule.textMarkupAnnotationModule.isEnableTextMarkupResizer(annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode)) {\n      annotationModule.textMarkupAnnotationModule.createAnnotationSelectElement();\n    }\n  };\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.RestrictionEnabled = function (restrictionSummary, isEnable) {\n    if (restrictionSummary) {\n      for (var i = 0; i < restrictionSummary.length; i++) {\n        this.EnableRestriction(restrictionSummary[parseInt(i.toString(), 10)], isEnable);\n        if (!isBlazor()) {\n          if (this.pdfViewer.toolbarModule) {\n            this.pdfViewer.toolbarModule.DisableToolbarItems(restrictionSummary[parseInt(i.toString(), 10)], isEnable);\n          }\n        } else {\n          if (this.pdfViewer.toolbarModule) {\n            this.pdfViewer._dotnetInstance.invokeMethodAsync('RestrictToolbarItems', restrictionSummary, isEnable);\n          }\n        }\n      }\n    }\n  };\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.EnableRestriction = function (restrictionSummary, isEnable) {\n    switch (restrictionSummary) {\n      case 'Print':\n        this.pdfViewer.enablePrint = isEnable;\n        break;\n      case 'CopyContent':\n        this.pdfViewer.enableTextSelection = isEnable;\n        break;\n      case 'FillFields':\n        this.pdfViewer.enableFormFields = isEnable;\n        this.enableFormFieldButton(isEnable);\n        break;\n      case 'EditAnnotations':\n        this.pdfViewer.enableAnnotation = isEnable;\n        break;\n    }\n  };\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.pageRender = function (data) {\n    this.document = null;\n    this.passwordDialogReset();\n    if (this.passwordPopup) {\n      this.passwordPopup.hide();\n    }\n    var pageIndex = 0;\n    this.initPageDiv(data);\n    this.currentPageNumber = pageIndex + 1;\n    this.pdfViewer.currentPageNumber = pageIndex + 1;\n    this.previousZoomValue = this.pdfViewer.zoomValue;\n    var isZoomMode = false;\n    if (this.pdfViewer.magnificationModule) {\n      this.pdfViewer.magnificationModule.isAutoZoom = true;\n      if (this.pdfViewer.zoomValue && this.pdfViewer.zoomValue > 0) {\n        if (this.pdfViewer.zoomValue !== 100) {\n          isZoomMode = true;\n        }\n        this.isInitialPageMode = true;\n        this.pdfViewer.magnification.zoomTo(this.pdfViewer.zoomValue);\n      }\n      if (this.pdfViewer.zoomMode === 'FitToWidth') {\n        this.isInitialPageMode = true;\n        isZoomMode = true;\n        this.pdfViewer.magnificationModule.fitToWidth();\n      } else if (this.pdfViewer.zoomMode === 'FitToPage') {\n        this.isInitialPageMode = true;\n        isZoomMode = true;\n        this.pdfViewer.magnificationModule.fitToPage();\n      }\n      this.documentLoaded = true;\n      this.pdfViewer.magnificationModule.isInitialLoading = true;\n      this.onWindowResize();\n      this.documentLoaded = false;\n      this.pdfViewer.magnificationModule.isInitialLoading = false;\n    }\n    this.isDocumentLoaded = true;\n    // eslint-disable-next-line\n    var viewPortWidth = 816;\n    // eslint-disable-next-line radix\n    viewPortWidth = parseInt(viewPortWidth);\n    var pageWidth = this.pageSize[parseInt(pageIndex.toString(), 10)].width;\n    if (this.clientSideRendering) {\n      var proxy_1 = this;\n      var fileByteArray = this.pdfViewer.fileByteArray;\n      this.pdfViewerRunner.postMessage({\n        uploadedFile: fileByteArray,\n        message: 'LoadPageCollection',\n        password: this.passwordData,\n        pageIndex: pageIndex,\n        isZoomMode: isZoomMode\n      });\n      this.pdfViewerRunner.onmessage = function (event) {\n        if (event.data.message === 'PageLoaded') {\n          proxy_1.initialPagesRendered(event.data.pageIndex, event.data.isZoomMode);\n        }\n      };\n    } else {\n      this.initialPagesRendered(pageIndex, isZoomMode);\n    }\n    this.showLoadingIndicator(false);\n    if (!isBlazor()) {\n      if (this.pdfViewer.toolbarModule) {\n        this.pdfViewer.toolbarModule.uploadedDocumentName = null;\n        this.pdfViewer.toolbarModule.updateCurrentPage(this.currentPageNumber);\n        this.pdfViewer.toolbarModule.updateToolbarItems();\n        if (this.pdfViewer.toolbar && this.pdfViewer.toolbar.annotationToolbarModule) {\n          this.pdfViewer.toolbar.annotationToolbarModule.enableAnnotationAddTools(true);\n        }\n      }\n    }\n    if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n      this.mobileSpanContainer.innerHTML = this.currentPageNumber.toString();\n      this.mobilecurrentPageContainer.innerHTML = this.currentPageNumber.toString();\n    }\n  };\n  PdfViewerBase.prototype.initialPagesRendered = function (pageIndex, isZoomMode) {\n    if (this.renderedPagesList.indexOf(pageIndex) === -1 && !isZoomMode) {\n      this.createRequestForRender(pageIndex);\n      var pageNumber = pageIndex + 1;\n      var renderLimit = this.pdfViewer.initialRenderPages <= this.pageCount ? this.pdfViewer.initialRenderPages > this.pageRenderCount ? this.pdfViewer.initialRenderPages : 2 : this.pageCount;\n      for (var i = 1; i < renderLimit; i++) {\n        this.createRequestForRender(i);\n        pageNumber = pageNumber + 1;\n      }\n      if (this.pageSize[parseInt(pageNumber.toString(), 10)]) {\n        var pageTop = this.getPageTop(pageNumber);\n        var viewerHeight = this.viewerContainer.clientHeight;\n        while (viewerHeight > pageTop) {\n          if (this.pageSize[parseInt(pageNumber.toString(), 10)]) {\n            this.renderPageElement(pageNumber);\n            this.createRequestForRender(pageNumber);\n            pageTop = this.getPageTop(pageNumber);\n            pageNumber = pageNumber + 1;\n          } else {\n            break;\n          }\n        }\n      }\n    }\n  };\n  PdfViewerBase.prototype.renderPasswordPopup = function (documentData, password) {\n    var _this = this;\n    if (!isBlazor()) {\n      if (!this.isPasswordAvailable) {\n        if (this.isFileName) {\n          this.document = documentData;\n        } else {\n          this.document = 'data:application/pdf;base64,' + documentData;\n        }\n        this.isPasswordAvailable = true;\n        this.createPasswordPopup();\n        this.pdfViewer.fireDocumentLoadFailed(true, null);\n        this.passwordPopup.show();\n      } else {\n        this.pdfViewer.fireDocumentLoadFailed(true, password);\n        this.promptElement.classList.add('e-pv-password-error');\n        this.promptElement.textContent = this.pdfViewer.localeObj.getConstant('Invalid Password');\n        this.promptElement.focus();\n        if (this.isFileName) {\n          this.document = documentData;\n        } else {\n          this.document = 'data:application/pdf;base64,' + documentData;\n        }\n        this.passwordPopup.show();\n      }\n    } else {\n      // eslint-disable-next-line\n      var promptElement_1 = document.getElementById(this.pdfViewer.element.id + '_prompt');\n      var promise = this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText', 'PdfViewer_EnterPassword');\n      promise.then(function (value) {\n        promptElement_1.textContent = value;\n      });\n      // eslint-disable-next-line\n      var passwordInput_1 = document.querySelector('#' + this.pdfViewer.element.id + '_password_input');\n      passwordInput_1.addEventListener('keyup', function () {\n        if (passwordInput_1.value === '') {\n          _this.passwordDialogReset();\n        }\n      });\n      passwordInput_1.addEventListener('focus', function () {\n        passwordInput_1.parentElement.classList.add('e-input-focus');\n      });\n      passwordInput_1.addEventListener('blur', function () {\n        passwordInput_1.parentElement.classList.remove('e-input-focus');\n      });\n      if (!this.isPasswordAvailable) {\n        if (this.isFileName) {\n          this.document = documentData;\n        } else {\n          this.document = 'data:application/pdf;base64,' + documentData;\n        }\n        this.isPasswordAvailable = true;\n        this.pdfViewer.fireDocumentLoadFailed(true, null);\n      } else {\n        this.pdfViewer.fireDocumentLoadFailed(true, password);\n        promptElement_1.classList.add('e-pv-password-error');\n        var promise_1 = this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText', 'PdfViewer_InvalidPassword');\n        promise_1.then(function (value) {\n          promptElement_1.textContent = value;\n        });\n        promptElement_1.focus();\n        if (this.isFileName) {\n          this.document = documentData;\n        } else {\n          this.document = 'data:application/pdf;base64,' + documentData;\n        }\n      }\n      this.pdfViewer._dotnetInstance.invokeMethodAsync('OpenPasswordDialog');\n    }\n  };\n  PdfViewerBase.prototype.renderCorruptPopup = function () {\n    this.pdfViewer.fireDocumentLoadFailed(false, null);\n    this.documentId = null;\n    if (this.pdfViewer.showNotificationDialog) {\n      if (!isBlazor()) {\n        this.createCorruptedPopup();\n        this.corruptPopup.show();\n      } else {\n        this.pdfViewer._dotnetInstance.invokeMethodAsync('OpenCorruptedDialog');\n      }\n    }\n  };\n  PdfViewerBase.prototype.constructJsonObject = function (documentData, password, isBase64String) {\n    var jsonObject;\n    if (password) {\n      this.isPasswordAvailable = true;\n      this.passwordData = password;\n      // eslint-disable-next-line max-len\n      jsonObject = {\n        document: documentData,\n        password: password,\n        isClientsideLoading: isBase64String,\n        zoomFactor: \"1\",\n        isFileName: this.isFileName.toString(),\n        uniqueId: this.documentId,\n        showDigitalSignatureAppearance: this.pdfViewer.showDigitalSignatureAppearance\n      };\n    } else {\n      this.isPasswordAvailable = false;\n      this.passwordData = '';\n      jsonObject = {\n        document: documentData,\n        zoomFactor: \"1\",\n        isClientsideLoading: isBase64String,\n        isFileName: this.isFileName.toString(),\n        uniqueId: this.documentId,\n        hideEmptyDigitalSignatureFields: this.pdfViewer.hideEmptyDigitalSignatureFields,\n        showDigitalSignatureAppearance: this.pdfViewer.showDigitalSignatureAppearance\n      };\n    }\n    return jsonObject;\n  };\n  PdfViewerBase.prototype.checkDocumentData = function (documentData) {\n    var base64String = documentData.split('base64,')[1];\n    if (base64String === undefined) {\n      this.isFileName = true;\n      this.jsonDocumentId = documentData;\n      if (this.pdfViewer.fileName === null) {\n        // eslint-disable-next-line max-len\n        var documentStringArray = documentData.indexOf('\\\\') !== -1 ? documentData.split('\\\\') : documentData.split('/');\n        this.pdfViewer.fileName = documentStringArray[documentStringArray.length - 1];\n        this.jsonDocumentId = this.pdfViewer.fileName;\n        base64String = documentData;\n      }\n    } else {\n      this.jsonDocumentId = null;\n    }\n    return base64String;\n  };\n  PdfViewerBase.prototype.setFileName = function () {\n    if (this.pdfViewer.fileName === null) {\n      if (this.pdfViewer.toolbarModule && this.pdfViewer.toolbarModule.uploadedDocumentName) {\n        this.pdfViewer.fileName = this.pdfViewer.toolbarModule.uploadedDocumentName;\n        this.jsonDocumentId = this.pdfViewer.fileName;\n      } else {\n        this.pdfViewer.fileName = 'undefined.pdf';\n        this.jsonDocumentId = null;\n      }\n    }\n  };\n  PdfViewerBase.prototype.saveDocumentInfo = function () {\n    window.sessionStorage.setItem(this.documentId + '_currentDocument', this.documentId);\n    window.sessionStorage.setItem(this.documentId + '_serviceURL', this.pdfViewer.serviceUrl);\n    if (this.pdfViewer.serverActionSettings) {\n      window.sessionStorage.setItem(this.documentId + '_unload', this.pdfViewer.serverActionSettings.unload);\n    }\n  };\n  PdfViewerBase.prototype.saveDocumentHashData = function () {\n    var hashId = '';\n    if (Browser.isIE || Browser.info.name === 'edge') {\n      hashId = encodeURI(this.hashId);\n    } else {\n      hashId = this.hashId;\n    }\n    window.sessionStorage.setItem(this.documentId + '_hashId', hashId);\n    if (this.documentLiveCount) {\n      window.sessionStorage.setItem(this.documentId + '_documentLiveCount', this.documentLiveCount.toString());\n    }\n  };\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.saveFormfieldsData = function (data) {\n    this.pdfViewer.isFormFieldDocument = false;\n    this.enableFormFieldButton(false);\n    if (data && data.PdfRenderedFormFields && data.PdfRenderedFormFields.length > 0) {\n      if (this.formfieldvalue) {\n        if (this.pdfViewer.formFieldsModule) {\n          this.setItemInSessionStorage(this.formfieldvalue, '_formfields');\n        }\n        this.formfieldvalue = null;\n      } else if (this.pdfViewer.formFieldsModule) {\n        for (var i = 0; i < data.PdfRenderedFormFields.length; i++) {\n          if (data.PdfRenderedFormFields[parseInt(i.toString(), 10)].FieldName == '') {\n            data.PdfRenderedFormFields.splice(i, 1);\n          }\n        }\n        this.setItemInSessionStorage(data.PdfRenderedFormFields, '_formfields');\n      }\n      if (this.pdfViewer.enableFormFields && this.pdfViewer.formFieldsModule) {\n        this.pdfViewer.formFieldsModule.formFieldCollections();\n      }\n      if (this.pdfViewer.formFieldCollections.length > 0) {\n        this.pdfViewer.isFormFieldDocument = true;\n        this.enableFormFieldButton(true);\n      }\n    }\n  };\n  /**\n   * @param {boolean} isEnable - Enable or disable the toolbar itema.\n   * @returns {void}\n   * @private\n   */\n  PdfViewerBase.prototype.enableFormFieldButton = function (isEnable) {\n    if (isEnable) {\n      this.pdfViewer.isFormFieldDocument = true;\n    }\n    if (this.pdfViewer.toolbarModule && this.pdfViewer.toolbarModule.submitItem) {\n      this.pdfViewer.toolbarModule.toolbar.enableItems(this.pdfViewer.toolbarModule.submitItem.parentElement, isEnable);\n    }\n  };\n  PdfViewerBase.prototype.updateWaitingPopup = function (pageNumber) {\n    if (this.pageSize[parseInt(pageNumber.toString(), 10)].top != null) {\n      // eslint-disable-next-line max-len\n      var pageCurrentRect = this.getElement('_pageDiv_' + pageNumber).getBoundingClientRect();\n      var waitingPopup = this.getElement('_pageDiv_' + pageNumber).firstChild.firstChild;\n      if (pageCurrentRect.top < 0) {\n        if (this.toolbarHeight + this.viewerContainer.clientHeight / 2 - pageCurrentRect.top < pageCurrentRect.height) {\n          waitingPopup.style.top = this.viewerContainer.clientHeight / 2 - pageCurrentRect.top - this.toolbarHeight + 'px';\n        } else {\n          if (this.toolbarHeight + pageCurrentRect.bottom / 2 - pageCurrentRect.top < pageCurrentRect.height) {\n            waitingPopup.style.top = pageCurrentRect.bottom / 2 - pageCurrentRect.top - this.toolbarHeight + 'px';\n          }\n        }\n      } else {\n        waitingPopup.style.top = this.viewerContainer.clientHeight / 2 + 'px';\n      }\n      if (Browser.isDevice && !this.pdfViewer.enableDesktopMode && pageCurrentRect.width > this.viewerContainer.clientWidth) {\n        waitingPopup.style.left = this.viewerContainer.clientWidth / 2 + this.viewerContainer.scrollLeft + 'px';\n      } else if (this.getZoomFactor() > 1.25 && pageCurrentRect.width > this.viewerContainer.clientWidth) {\n        waitingPopup.style.left = this.viewerContainer.clientWidth / 2 + 'px';\n      } else {\n        waitingPopup.style.left = pageCurrentRect.width / 2 + 'px';\n      }\n    }\n  };\n  /**\n   * @private\n   * @returns {number} - returned the page value.\n   */\n  PdfViewerBase.prototype.getActivePage = function (isPageNumber) {\n    if (this.activeElements && !isNullOrUndefined(this.activeElements.activePageID)) {\n      if (isPageNumber) {\n        return this.activeElements.activePageID + 1;\n      } else {\n        return this.activeElements.activePageID;\n      }\n    } else {\n      if (isPageNumber) {\n        return this.currentPageNumber;\n      } else {\n        return this.currentPageNumber - 1;\n      }\n    }\n  };\n  PdfViewerBase.prototype.createWaitingPopup = function (pageNumber) {\n    // eslint-disable-next-line max-len\n    var waitingPopup = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + pageNumber);\n    if (waitingPopup) {\n      createSpinner({\n        target: waitingPopup\n      });\n      this.setLoaderProperties(waitingPopup);\n    }\n  };\n  PdfViewerBase.prototype.showLoadingIndicator = function (isShow) {\n    var waitingPopup = this.getElement('_loadingIndicator');\n    if (waitingPopup) {\n      if (isShow) {\n        waitingPopup.style.display = 'block';\n        showSpinner(waitingPopup);\n      } else {\n        waitingPopup.style.display = 'none';\n        hideSpinner(waitingPopup);\n      }\n    }\n  };\n  PdfViewerBase.prototype.spinnerPosition = function (container, pageIndex) {\n    var inner = container.querySelector('.e-spinner-inner');\n    var zoomValue = this.getZoomFactor();\n    var width = this.pageSize[parseInt(pageIndex.toString(), 10)].width * zoomValue;\n    var height = this.pageSize[parseInt(pageIndex.toString(), 10)].height * zoomValue;\n    inner.style.top = height / 2 + 'px';\n    inner.style.left = width / 2 + 'px';\n    var circle = inner.children[0];\n    if (zoomValue <= 0.20) {\n      circle.style.width = '20px';\n      circle.style.height = '20px';\n      circle.style.transformOrigin = '10px 10px 10px';\n    } else if (zoomValue <= 0.45) {\n      circle.style.width = '30px';\n      circle.style.height = '30px';\n      circle.style.transformOrigin = '15px 15px 15px';\n    } else {\n      circle.style.width = '48px';\n      circle.style.height = '48px';\n      circle.style.transformOrigin = '24px 24px 24px';\n    }\n  };\n  /**\n   * @param {boolean} isShow - Show or hide page loading indicator.\n   * @returns {void}\n   * @private\n   */\n  PdfViewerBase.prototype.showPageLoadingIndicator = function (pageIndex, isShow) {\n    var waitingPopup = this.getElement('_pageDiv_' + pageIndex);\n    if (waitingPopup != null) {\n      this.spinnerPosition(waitingPopup, pageIndex);\n      if (isShow) {\n        showSpinner(waitingPopup);\n      } else {\n        hideSpinner(waitingPopup);\n      }\n      this.updateWaitingPopup(pageIndex);\n    }\n  };\n  /**\n   * @param {boolean} isShow - Show or hide print loading indicator.\n   * @returns {void}\n   * @private\n   */\n  PdfViewerBase.prototype.showPrintLoadingIndicator = function (isShow) {\n    var printWaitingPopup = this.getElement('_printLoadingIndicator');\n    if (printWaitingPopup != null) {\n      if (isShow) {\n        this.printMainContainer.style.display = 'block';\n        showSpinner(printWaitingPopup);\n      } else {\n        this.printMainContainer.style.display = 'none';\n        hideSpinner(printWaitingPopup);\n      }\n    }\n  };\n  PdfViewerBase.prototype.setLoaderProperties = function (element) {\n    var spinnerElement = element.firstChild.firstChild.firstChild;\n    if (spinnerElement) {\n      spinnerElement.style.height = '48px';\n      spinnerElement.style.width = '48px';\n      spinnerElement.style.transformOrigin = '24px 24px 24px';\n    }\n  };\n  /**\n   * @param {number} pageNumber - Specify the pageNumber.\n   * @returns {void}\n   * @private\n   */\n  PdfViewerBase.prototype.updateScrollTop = function (pageNumber) {\n    var _this = this;\n    // eslint-disable-next-line\n    if (this.pageSize[pageNumber] != null) {\n      this.renderElementsVirtualScroll(pageNumber);\n      this.viewerContainer.scrollTop = this.getPageTop(pageNumber);\n      if (this.renderedPagesList.indexOf(pageNumber) === -1) {\n        this.createRequestForRender(pageNumber);\n      }\n      setTimeout(function () {\n        var currentPageNumber = pageNumber + 1;\n        if (currentPageNumber !== _this.currentPageNumber) {\n          _this.pdfViewer.currentPageNumber = currentPageNumber;\n          _this.currentPageNumber = currentPageNumber;\n          if (_this.pdfViewer.toolbarModule) {\n            _this.pdfViewer.toolbarModule.updateCurrentPage(currentPageNumber);\n          }\n        }\n      }, 100);\n    }\n  };\n  /**\n   * @private\n   * @returns {number} - Returns the zoom factor value.\n   */\n  PdfViewerBase.prototype.getZoomFactor = function () {\n    if (this.pdfViewer.magnificationModule) {\n      return this.pdfViewer.magnificationModule.zoomFactor;\n    } else {\n      // default value\n      return 1;\n    }\n  };\n  /**\n   * @private\n   * @returns {boolean} - Returns whether the pinch zoom is performed or not.\n   */\n  PdfViewerBase.prototype.getPinchZoomed = function () {\n    if (this.pdfViewer.magnificationModule) {\n      return this.pdfViewer.magnificationModule.isPinchZoomed;\n    } else {\n      // default value\n      return false;\n    }\n  };\n  /**\n   * @private\n   * @returns {boolean} -Returns whether the zoom is performed or not.\n   */\n  PdfViewerBase.prototype.getMagnified = function () {\n    if (this.pdfViewer.magnificationModule) {\n      return this.pdfViewer.magnificationModule.isMagnified;\n    } else {\n      // default value\n      return false;\n    }\n  };\n  PdfViewerBase.prototype.getPinchScrolled = function () {\n    if (this.pdfViewer.magnificationModule) {\n      return this.pdfViewer.magnificationModule.isPinchScrolled;\n    } else {\n      // default value\n      return false;\n    }\n  };\n  PdfViewerBase.prototype.getPagesPinchZoomed = function () {\n    if (this.pdfViewer.magnificationModule) {\n      return this.pdfViewer.magnificationModule.isPagePinchZoomed;\n    } else {\n      // default value\n      return false;\n    }\n  };\n  PdfViewerBase.prototype.getPagesZoomed = function () {\n    if (this.pdfViewer.magnificationModule) {\n      return this.pdfViewer.magnificationModule.isPagesZoomed;\n    } else {\n      // default value\n      return false;\n    }\n  };\n  PdfViewerBase.prototype.getRerenderCanvasCreated = function () {\n    if (this.pdfViewer.magnificationModule) {\n      return this.pdfViewer.magnificationModule.isRerenderCanvasCreated;\n    } else {\n      // default value\n      return false;\n    }\n  };\n  /**\n   * @private\n   * @returns {string} - retrun the docuumentid.\n   */\n  PdfViewerBase.prototype.getDocumentId = function () {\n    return this.documentId;\n  };\n  /**\n   * @private\n   * @returns {void}\n   */\n  PdfViewerBase.prototype.download = function () {\n    if (this.pageCount > 0) {\n      this.createRequestForDownload();\n    }\n  };\n  /**\n   * @private\n   * @returns {promise<Blob>} - Returns the blob object.\n   */\n  PdfViewerBase.prototype.saveAsBlob = function () {\n    var _this = this;\n    if (this.pageCount > 0) {\n      return new Promise(function (resolve, reject) {\n        _this.saveAsBlobRequest().then(function (value) {\n          resolve(value);\n        });\n      });\n    }\n    return null;\n  };\n  PdfViewerBase.prototype.saveAsBlobRequest = function () {\n    var _this = this;\n    var proxy = null;\n    proxy = this;\n    var promise = new Promise(function (resolve, reject) {\n      // eslint-disable-next-line\n      var jsonObject = proxy.constructJsonDownload();\n      _this.dowonloadRequestHandler = new AjaxHandler(_this.pdfViewer);\n      _this.dowonloadRequestHandler.url = proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.download;\n      _this.dowonloadRequestHandler.responseType = 'text';\n      if (_this.clientSideRendering) {\n        var data = _this.pdfViewer.pdfRendererModule.getDocumentAsBase64(jsonObject);\n        var resultdata = proxy.saveAsBlobFile(data, proxy);\n        resolve(resultdata);\n      } else {\n        _this.dowonloadRequestHandler.send(jsonObject);\n      }\n      // eslint-disable-next-line\n      _this.dowonloadRequestHandler.onSuccess = function (result) {\n        // eslint-disable-next-line\n        var data = result.data;\n        var resultdata = proxy.saveAsBlobFile(data, proxy);\n        resolve(resultdata);\n      };\n      // eslint-disable-next-line\n      _this.dowonloadRequestHandler.onFailure = function (result) {\n        proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.download);\n      };\n      // eslint-disable-next-line\n      _this.dowonloadRequestHandler.onError = function (result) {\n        proxy.openNotificationPopup();\n        proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.download);\n      };\n    });\n    return promise;\n  };\n  PdfViewerBase.prototype.saveAsBlobFile = function (data, proxy) {\n    return new Promise(function (resolve) {\n      if (data) {\n        if (typeof data === 'object') {\n          data = JSON.parse(data);\n        }\n        if (typeof data !== 'object' && data.indexOf('data:application/pdf') === -1) {\n          proxy.onControlError(500, data, proxy.pdfViewer.serverActionSettings.download);\n          data = null;\n        }\n        if (data) {\n          if (!proxy.clientSideRendering) {\n            proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.download, data);\n          }\n          var blobUrl = proxy.createBlobUrl(data.split('base64,')[1], 'application/pdf');\n          resolve(blobUrl);\n        }\n      }\n    });\n  };\n  /**\n   * @param {boolean} isTriggerEvent - check to trigger the event.\n   * @returns {void}\n   * @private\n   */\n  PdfViewerBase.prototype.clear = function (isTriggerEvent) {\n    var proxy = this;\n    var pdfViewer = proxy.pdfViewer;\n    var printModule = pdfViewer.printModule;\n    var textSearchModule = pdfViewer.textSearchModule;\n    var bookmarkViewModule = pdfViewer.bookmarkViewModule;\n    var thumbnailViewModule = pdfViewer.thumbnailView;\n    var annotationModule = pdfViewer.annotation;\n    var magnificationModule = pdfViewer.magnificationModule;\n    var textSelectionModule = pdfViewer.textSelectionModule;\n    var formFieldsModule = pdfViewer.formFieldsModule;\n    var signatureModule = proxy.signatureModule;\n    proxy.isPasswordAvailable = false;\n    proxy.isDocumentLoaded = false;\n    proxy.isInitialLoaded = false;\n    proxy.isImportAction = false;\n    proxy.annotationPageList = [];\n    proxy.annotationComments = null;\n    pdfViewer.annotationCollection = [];\n    pdfViewer.signatureCollection = [];\n    pdfViewer.formFieldCollection = [];\n    proxy.isAnnotationCollectionRemoved = false;\n    proxy.documentAnnotationCollections = null;\n    proxy.isDrawnCompletely = false;\n    proxy.annotationRenderredList = [];\n    proxy.isImportAction = false;\n    proxy.isImportedAnnotation = false;\n    proxy.importedAnnotation = [];\n    proxy.isStorageExceed = false;\n    proxy.annotationStorage = {};\n    proxy.formFieldStorage = {};\n    proxy.downloadCollections = {};\n    proxy.annotationEvent = null;\n    proxy.highestWidth = 0;\n    proxy.highestHeight = 0;\n    proxy.requestLists = [];\n    proxy.tilerequestLists = [];\n    proxy.isToolbarInkClicked = false;\n    pdfViewer.formFieldCollections = [];\n    proxy.passwordData = '';\n    proxy.isFocusField = false;\n    proxy.focusField = [];\n    proxy.updateDocumentEditedProperty(false);\n    pdfViewer.clipboardData.clipObject = {};\n    if (pdfViewer.toolbar) {\n      pdfViewer.toolbar.uploadedFile = null;\n    }\n    proxy.isTaggedPdf = false;\n    if (pdfViewer.formDesignerModule) {\n      pdfViewer.formDesignerModule.formFieldIndex = 0;\n      if (proxy.activeElements) {\n        pdfViewer.clearSelection(proxy.activeElements.activePageID);\n      }\n      pdfViewer.zIndexTable = [];\n    }\n    proxy.initiateTextSelectMode();\n    proxy.RestrictionEnabled(proxy.restrictionList, true);\n    proxy.restrictionList = null;\n    if (!Browser.isDevice || pdfViewer.enableDesktopMode) {\n      if (proxy.navigationPane.sideBarToolbar) {\n        proxy.navigationPane.clear();\n      }\n    }\n    if (!isBlazor() && Browser.isDevice || !pdfViewer.enableDesktopMode) {\n      proxy.navigationPane.clear();\n    }\n    if (thumbnailViewModule) {\n      thumbnailViewModule.clear();\n    }\n    if (bookmarkViewModule) {\n      bookmarkViewModule.clear();\n    }\n    if (magnificationModule) {\n      magnificationModule.isMagnified = false;\n      magnificationModule.clearIntervalTimer();\n    }\n    if (textSelectionModule) {\n      textSelectionModule.clearTextSelection();\n    }\n    if (textSearchModule) {\n      textSearchModule.resetTextSearch();\n    }\n    if (annotationModule) {\n      annotationModule.clear();\n      annotationModule.initializeCollection();\n    }\n    if (formFieldsModule) {\n      formFieldsModule.readOnlyCollection = [];\n      formFieldsModule.signatureFieldCollection = [];\n      formFieldsModule.renderedPageList = [];\n      formFieldsModule.currentTarget = null;\n    }\n    if (signatureModule) {\n      signatureModule.signaturecollection = [];\n      signatureModule.outputcollection = [];\n      signatureModule.signAnnotationIndex = [];\n    }\n    if (proxy.pageSize) {\n      proxy.pageSize = [];\n    }\n    if (proxy.renderedPagesList) {\n      proxy.renderedPagesList = [];\n    }\n    if (proxy.accessibilityTagsCollection) {\n      proxy.accessibilityTagsCollection = [];\n    }\n    if (proxy.pageRequestListForAccessibilityTags) {\n      proxy.pageRequestListForAccessibilityTags = [];\n    }\n    if (proxy.pageContainer) {\n      while (proxy.pageContainer.hasChildNodes()) {\n        proxy.pageContainer.removeChild(proxy.pageContainer.lastChild);\n      }\n    }\n    if (proxy.pageCount > 0) {\n      proxy.unloadDocument(proxy);\n      // eslint-disable-next-line\n      proxy.textLayer.characterBound = new Array();\n      proxy.loadRequestHandler && proxy.loadRequestHandler.clear();\n      proxy.virtualLoadRequestHandler && proxy.virtualLoadRequestHandler.clear();\n      proxy.pageRequestHandler && proxy.pageRequestHandler.clear();\n      proxy.dowonloadRequestHandler && proxy.dowonloadRequestHandler.clear();\n      proxy.importAnnotationRequestHandler && proxy.importAnnotationRequestHandler.clear();\n      proxy.exportAnnotationRequestHandler && proxy.exportAnnotationRequestHandler.clear();\n      proxy.importFormFieldsRequestHandler && proxy.importFormFieldsRequestHandler.clear();\n      proxy.exportFormFieldsRequestHandler && proxy.exportFormFieldsRequestHandler.clear();\n      if (printModule && printModule.printRequestHandler) {\n        printModule.printRequestHandler.clear();\n      }\n    }\n    proxy.windowSessionStorageClear();\n    if (proxy.pinchZoomStorage) {\n      proxy.pinchZoomStorage = [];\n    }\n    if ((proxy.previousZoomValue || proxy.previousZoomValue === 0) && proxy.previousZoomValue !== pdfViewer.zoomValue) {\n      pdfViewer.zoomValue = proxy.previousZoomValue;\n    }\n    if (isTriggerEvent && proxy.pageCount > 0) {\n      pdfViewer.fireDocumentUnload(this.pdfViewer.fileName);\n    }\n    this.pdfViewer.fileName = null;\n  };\n  /**\n   * @private\n   * @returns {void}\n   */\n  PdfViewerBase.prototype.destroy = function () {\n    if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n      this.pdfViewer.element.classList.remove('e-pv-mobile-view');\n    }\n    this.unWireEvents();\n    this.clear(false);\n    if (this.pageContainer) {\n      this.pageContainer.parentNode ? this.pageContainer.parentNode.removeChild(this.pageContainer) : null;\n    }\n    if (this.viewerContainer) {\n      this.viewerContainer.parentNode ? this.viewerContainer.parentNode.removeChild(this.viewerContainer) : null;\n    }\n    if (this.contextMenuModule) {\n      var contextMenuElement = this.contextMenuModule.contextMenuElement;\n      contextMenuElement && contextMenuElement.ej2_instances && contextMenuElement.ej2_instances.length > 0 ? this.contextMenuModule.destroy() : null;\n    }\n    if (this.pdfViewer.toolbarModule) {\n      this.navigationPane.destroy();\n    }\n    var measureElement = document.getElementById('measureElement');\n    if (measureElement) {\n      measureElement = undefined;\n    }\n  };\n  /**\n   * @param {PdfViewerBase} proxy - PdfviewerBase class.\n   * @returns {void}\n   * @private\n   */\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.unloadDocument = function (proxy) {\n    var documentId = '';\n    var hashId = window.sessionStorage.getItem(this.documentId + '_hashId');\n    var documentLiveCount = window.sessionStorage.getItem(this.documentId + '_documentLiveCount');\n    var serviceURL = window.sessionStorage.getItem(this.documentId + '_serviceURL');\n    if (Browser.isIE || Browser.info.name === 'edge') {\n      documentId = decodeURI(hashId);\n    } else {\n      documentId = proxy.hashId ? proxy.hashId : hashId;\n    }\n    if (documentId !== null) {\n      // eslint-disable-next-line max-len\n      var jsonObject = {\n        hashId: documentId,\n        documentLiveCount: documentLiveCount,\n        action: 'Unload',\n        elementId: proxy.pdfViewer.element.id\n      };\n      var actionName = window.sessionStorage.getItem(this.documentId + '_unload');\n      if (serviceURL !== \"undefined\" && serviceURL !== \"null\" && serviceURL !== \"\" && !isNullOrUndefined(serviceURL)) {\n        try {\n          // eslint-disable-next-line\n          var browserSupportsKeepalive = ('keepalive' in new Request(''));\n          if (browserSupportsKeepalive) {\n            // eslint-disable-next-line\n            var headerValue = this.setUnloadRequestHeaders();\n            var credentialsData = this.pdfViewer.ajaxRequestSettings.withCredentials ? 'include' : 'omit';\n            fetch(serviceURL + '/' + actionName, {\n              method: 'POST',\n              credentials: credentialsData,\n              headers: headerValue,\n              body: JSON.stringify(jsonObject)\n            });\n          }\n        } catch (error) {\n          this.unloadRequestHandler = new AjaxHandler(this.pdfViewer);\n          this.unloadRequestHandler.send(jsonObject);\n        }\n      } else if (isBlazor()) {\n        this.clearCache(actionName, jsonObject, proxy);\n      }\n    }\n    if (this.pdfViewer.magnificationModule) {\n      this.pdfViewer.magnificationModule.zoomFactor = 1;\n    }\n    this.formFieldCollection = [];\n    this.textrequestLists = [];\n    window.sessionStorage.removeItem(this.documentId + '_hashId');\n    window.sessionStorage.removeItem(this.documentId + '_documentLiveCount');\n    if (this.documentId) {\n      window.sessionStorage.removeItem(this.documentId + '_formfields');\n      window.sessionStorage.removeItem(this.documentId + '_formDesigner');\n      window.sessionStorage.removeItem(this.documentId + '_annotations_shape');\n      window.sessionStorage.removeItem(this.documentId + '_annotations_shape_measure');\n      window.sessionStorage.removeItem(this.documentId + '_annotations_stamp');\n      window.sessionStorage.removeItem(this.documentId + '_annotations_sticky');\n      window.sessionStorage.removeItem(this.documentId + '_annotations_textMarkup');\n      window.sessionStorage.removeItem(this.documentId + '_annotations_freetext');\n      window.sessionStorage.removeItem(this.documentId + '_formfields');\n      window.sessionStorage.removeItem(this.documentId + '_annotations_sign');\n      window.sessionStorage.removeItem(this.documentId + '_annotations_ink');\n      window.sessionStorage.removeItem(this.documentId + '_pagedata');\n      for (var i = 0; i < this.sessionStorage.length; i++) {\n        window.sessionStorage.removeItem(this.sessionStorage[parseInt(i.toString(), 10)]);\n      }\n    }\n  };\n  PdfViewerBase.prototype.clearCache = function (actionName, jsonObject, proxy) {\n    this.unloadRequestHandler = new AjaxHandler(this.pdfViewer);\n    this.unloadRequestHandler.url = window.sessionStorage.getItem(this.documentId + '_serviceURL') + '/' + actionName;\n    this.unloadRequestHandler.mode = false;\n    this.unloadRequestHandler.responseType = null;\n    this.unloadRequestHandler.send(jsonObject);\n    // eslint-disable-next-line\n    this.unloadRequestHandler.onSuccess = function (result) {\n      // eslint-disable-next-line\n      var data = result.data;\n      if (data) {\n        if (typeof data !== 'object') {\n          if (data.indexOf('Document') === -1) {\n            proxy.onControlError(500, data, actionName);\n            data = null;\n          }\n        }\n        if (data) {\n          proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.unload, data);\n        }\n      }\n    };\n    // eslint-disable-next-line\n    this.unloadRequestHandler.onFailure = function (result) {\n      proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, actionName);\n    };\n    // eslint-disable-next-line\n    this.unloadRequestHandler.onError = function (result) {\n      proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, actionName);\n    };\n  };\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.setUnloadRequestHeaders = function () {\n    // eslint-disable-next-line\n    var myHeaders = new Headers();\n    myHeaders.append('Content-Type', 'application/json;charset=UTF-8');\n    for (var i = 0; i < this.pdfViewer.ajaxRequestSettings.ajaxHeaders.length; i++) {\n      // eslint-disable-next-line max-len\n      myHeaders.append(this.pdfViewer.ajaxRequestSettings.ajaxHeaders[parseInt(i.toString(), 10)].headerName, this.pdfViewer.ajaxRequestSettings.ajaxHeaders[parseInt(i.toString(), 10)].headerValue);\n    }\n    return myHeaders;\n  };\n  PdfViewerBase.prototype.windowSessionStorageClear = function () {\n    window.sessionStorage.removeItem(this.documentId + '_currentDocument');\n    window.sessionStorage.removeItem(this.documentId + '_serviceURL');\n    window.sessionStorage.removeItem(this.documentId + '_unload');\n    for (var i = 0; i < this.sessionStorage.length; i++) {\n      window.sessionStorage.removeItem(this.sessionStorage[parseInt(i.toString(), 10)]);\n    }\n  };\n  PdfViewerBase.prototype.updateCommentPanel = function () {\n    // eslint-disable-next-line\n    var moreOptionsButton = document.querySelectorAll('.e-pv-more-options-button');\n    for (var i = 0; i < moreOptionsButton.length; i++) {\n      moreOptionsButton[parseInt(i.toString(), 10)].style.visibility = 'hidden';\n    }\n    // eslint-disable-next-line\n    var commentTextBox = document.querySelectorAll('.e-pv-new-comments-div');\n    for (var j = 0; j < commentTextBox.length; j++) {\n      commentTextBox[parseInt(j.toString(), 10)].style.display = 'none';\n    }\n    // eslint-disable-next-line\n    var commentContainer = document.querySelectorAll('.e-pv-comments-border');\n    for (var j = 0; j < commentContainer.length; j++) {\n      commentContainer[parseInt(j.toString(), 10)].classList.remove('e-pv-comments-border');\n    }\n    // eslint-disable-next-line\n    var editableElement = document.querySelectorAll('.e-editable-inline');\n    for (var j = 0; j < editableElement.length; j++) {\n      editableElement[parseInt(j.toString(), 10)].style.display = 'none';\n    }\n    // eslint-disable-next-line\n    var commentSelect = document.querySelectorAll('.e-pv-comments-select');\n    for (var z = 0; z < commentSelect.length; z++) {\n      commentSelect[parseInt(z.toString(), 10)].classList.remove('e-pv-comments-select');\n    }\n    // eslint-disable-next-line\n    var commentsDiv = document.querySelectorAll('.e-pv-comments-div');\n    for (var j = 0; j < commentsDiv.length; j++) {\n      commentsDiv[parseInt(j.toString(), 10)].style.minHeight = 60 + 'px';\n    }\n  };\n  /**\n   * @param {boolean} isMouseDown - check whether the mouse down is triggered.\n   * @returns {void}\n   * @private\n   */\n  PdfViewerBase.prototype.focusViewerContainer = function (isMouseDown) {\n    var scrollX = window.scrollX;\n    var scrollY = window.scrollY;\n    // eslint-disable-next-line\n    var parentNode = this.getScrollParent(this.viewerContainer);\n    var scrollNodeX = 0;\n    var scrollNodeY = 0;\n    if (parentNode !== null) {\n      scrollNodeX = parentNode.scrollLeft;\n      scrollNodeY = parentNode.scrollTop;\n    }\n    this.viewerContainer.focus();\n    if (this.pdfViewer.annotation && this.pdfViewer.annotation.stickyNotesAnnotationModule.accordionContainer) {\n      this.updateCommentPanel();\n    }\n    // eslint-disable-next-line max-len\n    if ((navigator.userAgent.indexOf('MSIE') !== -1 || navigator.appVersion.indexOf('Trident/') > -1 || navigator.userAgent.indexOf('Edge') !== -1) && parentNode !== null) {\n      parentNode.scrollLeft = scrollNodeX;\n      parentNode.scrollTop = scrollNodeY;\n    } else if (parentNode !== null) {\n      parentNode.scrollTo(scrollNodeX, scrollNodeY);\n    }\n    window.scrollTo(scrollX, scrollY);\n  };\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.getScrollParent = function (node) {\n    if (node === null || node.nodeName === 'HTML') {\n      return null;\n    }\n    var style = getComputedStyle(node);\n    if (this.viewerContainer.id !== node.id && (style.overflowY === 'scroll' || style.overflowY === 'auto')) {\n      return node;\n    } else {\n      return this.getScrollParent(node.parentNode);\n    }\n  };\n  PdfViewerBase.prototype.createCorruptedPopup = function () {\n    var _this = this;\n    // eslint-disable-next-line max-len\n    var popupElement = createElement('div', {\n      id: this.pdfViewer.element.id + '_corrupted_popup',\n      className: 'e-pv-corrupted-popup'\n    });\n    this.pageContainer.appendChild(popupElement);\n    this.corruptPopup = new Dialog({\n      showCloseIcon: true,\n      closeOnEscape: true,\n      isModal: true,\n      // eslint-disable-next-line max-len\n      header: '<div class=\"e-pv-corrupted-popup-header\"> ' + this.pdfViewer.localeObj.getConstant('File Corrupted') + '</div>',\n      visible: false,\n      // eslint-disable-next-line max-len\n      buttons: [{\n        buttonModel: {\n          content: this.pdfViewer.localeObj.getConstant('OK'),\n          isPrimary: true\n        },\n        click: this.closeCorruptPopup.bind(this)\n      }],\n      target: this.pdfViewer.element,\n      beforeClose: function () {\n        _this.corruptPopup.destroy();\n        _this.getElement('_corrupted_popup').remove();\n        _this.corruptPopup = null;\n        var waitingPopup = _this.getElement('_loadingIndicator');\n        if (waitingPopup != null) {\n          hideSpinner(waitingPopup);\n        }\n      }\n    });\n    if (this.pdfViewer.enableRtl) {\n      // eslint-disable-next-line max-len\n      this.corruptPopup.content = '<div id=\"templatertl\" class=\"e-pv-notification-icon-rtl\"> <div class=\"e-pv-corrupted-popup-content-rtl\" tabindex=\"0\">' + this.pdfViewer.localeObj.getConstant('File Corrupted Content') + '</div></div>';\n      this.corruptPopup.enableRtl = true;\n    } else {\n      // eslint-disable-next-line max-len\n      this.corruptPopup.content = '<div id=\"template\" class=\"e-pv-notification-icon\"> <div class=\"e-pv-corrupted-popup-content\" tabindex=\"0\">' + this.pdfViewer.localeObj.getConstant('File Corrupted Content') + '</div></div>';\n    }\n    this.corruptPopup.appendTo(popupElement);\n  };\n  /**\n   * @private\n   * @returns {void}\n   */\n  PdfViewerBase.prototype.hideLoadingIndicator = function () {\n    var waitingPopup = this.getElement('_loadingIndicator');\n    if (waitingPopup !== null) {\n      hideSpinner(waitingPopup);\n    }\n  };\n  PdfViewerBase.prototype.closeCorruptPopup = function () {\n    this.corruptPopup.hide();\n    var waitingPopup = this.getElement('_loadingIndicator');\n    if (waitingPopup !== null) {\n      hideSpinner(waitingPopup);\n    }\n  };\n  PdfViewerBase.prototype.createPrintPopup = function () {\n    var element = document.getElementById(this.pdfViewer.element.id);\n    this.printMainContainer = createElement('div', {\n      id: this.pdfViewer.element.id + '_printcontainer',\n      className: 'e-pv-print-popup-container'\n    });\n    element.appendChild(this.printMainContainer);\n    this.printMainContainer.style.display = 'none';\n    var printWaitingPopup = createElement('div', {\n      id: this.pdfViewer.element.id + '_printLoadingIndicator',\n      className: 'e-pv-print-loading-container'\n    });\n    this.printMainContainer.appendChild(printWaitingPopup);\n    createSpinner({\n      target: printWaitingPopup,\n      cssClass: 'e-spin-center'\n    });\n    this.setLoaderProperties(printWaitingPopup);\n  };\n  PdfViewerBase.prototype.createGoToPagePopup = function () {\n    var _this = this;\n    // eslint-disable-next-line max-len\n    var popupElement = createElement('div', {\n      id: this.pdfViewer.element.id + '_goTopage_popup',\n      className: 'e-pv-gotopage-popup'\n    });\n    this.goToPageElement = createElement('span', {\n      id: this.pdfViewer.element.id + '_prompt'\n    });\n    this.goToPageElement.textContent = this.pdfViewer.localeObj.getConstant('Enter pagenumber');\n    popupElement.appendChild(this.goToPageElement);\n    var inputContainer = createElement('span', {\n      className: 'e-pv-text-input'\n    });\n    // eslint-disable-next-line max-len\n    this.goToPageInput = createElement('input', {\n      id: this.pdfViewer.element.id + '_page_input',\n      className: 'e-input'\n    });\n    this.goToPageInput.type = 'text';\n    this.goToPageInput.style.maxWidth = '80%';\n    this.pageNoContainer = createElement('span', {\n      className: '.e-pv-number-ofpages'\n    });\n    inputContainer.appendChild(this.goToPageInput);\n    inputContainer.appendChild(this.pageNoContainer);\n    popupElement.appendChild(inputContainer);\n    this.pageContainer.appendChild(popupElement);\n    this.goToPagePopup = new Dialog({\n      showCloseIcon: true,\n      closeOnEscape: false,\n      isModal: true,\n      header: this.pdfViewer.localeObj.getConstant('GoToPage'),\n      visible: false,\n      buttons: [{\n        buttonModel: {\n          content: this.pdfViewer.localeObj.getConstant('Cancel')\n        },\n        click: this.GoToPageCancelClick.bind(this)\n      },\n      // eslint-disable-next-line max-len\n      {\n        buttonModel: {\n          content: this.pdfViewer.localeObj.getConstant('Apply'),\n          disabled: true,\n          cssClass: 'e-pv-gotopage-apply-btn',\n          isPrimary: true\n        },\n        click: this.GoToPageApplyClick.bind(this)\n      }],\n      close: this.closeGoToPagePopUp.bind(this)\n    });\n    if (this.pdfViewer.enableRtl) {\n      this.goToPagePopup.enableRtl = true;\n    }\n    this.goToPagePopup.appendTo(popupElement);\n    if (!isBlazor()) {\n      var goToPageTextBox = new NumericTextBox({\n        format: '##',\n        showSpinButton: false\n      });\n      goToPageTextBox.appendTo(this.goToPageInput);\n    }\n    this.goToPageInput.addEventListener('keyup', function () {\n      // eslint-disable-next-line\n      var inputValue = _this.goToPageInput.value;\n      if (inputValue !== '' && parseFloat(inputValue) > 0 && _this.pdfViewer.pageCount + 1 > parseFloat(inputValue)) {\n        _this.EnableApplyButton();\n      } else {\n        _this.DisableApplyButton();\n      }\n    });\n  };\n  PdfViewerBase.prototype.closeGoToPagePopUp = function () {\n    this.goToPageInput.value = '';\n    this.DisableApplyButton();\n  };\n  PdfViewerBase.prototype.EnableApplyButton = function () {\n    // eslint-disable-next-line\n    var popupElements = document.getElementsByClassName('e-pv-gotopage-apply-btn')[0];\n    popupElements.removeAttribute('disabled');\n  };\n  PdfViewerBase.prototype.DisableApplyButton = function () {\n    // eslint-disable-next-line\n    var popupElements = document.getElementsByClassName('e-pv-gotopage-apply-btn')[0];\n    popupElements.setAttribute('disabled', true);\n  };\n  PdfViewerBase.prototype.GoToPageCancelClick = function () {\n    this.goToPagePopup.hide();\n  };\n  PdfViewerBase.prototype.GoToPageApplyClick = function () {\n    this.goToPagePopup.hide();\n    // eslint-disable-next-line\n    var pageNumber = this.goToPageInput.value;\n    this.pdfViewer.navigation.goToPage(pageNumber);\n    this.updateMobileScrollerPosition();\n  };\n  /**\n   * @private\n   * @returns {void}\n   */\n  PdfViewerBase.prototype.updateMobileScrollerPosition = function () {\n    if (Browser.isDevice && !this.pdfViewer.enableDesktopMode && this.mobileScrollerContainer) {\n      // eslint-disable-next-line\n      var ratio = (this.viewerContainer.scrollHeight - this.viewerContainer.clientHeight) / (this.viewerContainer.clientHeight - 56);\n      // eslint-disable-next-line\n      var differenceRatio = this.viewerContainer.scrollTop / ratio;\n      // eslint-disable-next-line\n      var toolbarHeight = this.pdfViewer.toolbarModule ? this.toolbarHeight : 0;\n      this.mobileScrollerContainer.style.top = toolbarHeight + differenceRatio + 'px';\n    }\n  };\n  PdfViewerBase.prototype.createPasswordPopup = function () {\n    var _this = this;\n    // eslint-disable-next-line max-len\n    var popupElement = createElement('div', {\n      id: this.pdfViewer.element.id + '_password_popup',\n      className: 'e-pv-password-popup',\n      attrs: {\n        'tabindex': '-1'\n      }\n    });\n    this.promptElement = createElement('span', {\n      id: this.pdfViewer.element.id + '_prompt',\n      attrs: {\n        'tabindex': '-1'\n      }\n    });\n    this.promptElement.textContent = this.pdfViewer.localeObj.getConstant('Enter Password');\n    popupElement.appendChild(this.promptElement);\n    var inputContainer = createElement('span', {\n      className: 'e-input-group e-pv-password-input'\n    });\n    // eslint-disable-next-line max-len\n    this.passwordInput = createElement('input', {\n      id: this.pdfViewer.element.id + '_password_input',\n      className: 'e-input'\n    });\n    this.passwordInput.type = 'password';\n    this.passwordInput.name = 'Required';\n    inputContainer.appendChild(this.passwordInput);\n    popupElement.appendChild(inputContainer);\n    this.pageContainer.appendChild(popupElement);\n    this.passwordPopup = new Dialog({\n      showCloseIcon: true,\n      closeOnEscape: false,\n      isModal: true,\n      header: this.pdfViewer.localeObj.getConstant('Password Protected'),\n      visible: false,\n      close: this.passwordCancel.bind(this),\n      target: this.pdfViewer.element,\n      beforeClose: function () {\n        _this.passwordPopup.destroy();\n        _this.getElement('_password_popup').remove();\n        _this.passwordPopup = null;\n        var waitingPopup = _this.getElement('_loadingIndicator');\n        if (waitingPopup != null) {\n          hideSpinner(waitingPopup);\n        }\n      }\n    });\n    if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n      this.passwordPopup.buttons = [{\n        buttonModel: {\n          content: this.pdfViewer.localeObj.getConstant('OK'),\n          isPrimary: true\n        },\n        click: this.applyPassword.bind(this)\n      }, {\n        buttonModel: {\n          content: this.pdfViewer.localeObj.getConstant('Cancel')\n        },\n        click: this.passwordCancelClick.bind(this)\n      }];\n    } else {\n      this.passwordPopup.buttons = [{\n        buttonModel: {\n          content: this.pdfViewer.localeObj.getConstant('Cancel')\n        },\n        click: this.passwordCancelClick.bind(this)\n      }, {\n        buttonModel: {\n          content: this.pdfViewer.localeObj.getConstant('OK'),\n          isPrimary: true\n        },\n        click: this.applyPassword.bind(this)\n      }];\n    }\n    if (this.pdfViewer.enableRtl) {\n      this.passwordPopup.enableRtl = true;\n    }\n    this.passwordPopup.appendTo(popupElement);\n    this.passwordInput.addEventListener('keyup', function () {\n      if (_this.passwordInput.value === '') {\n        _this.passwordDialogReset();\n      }\n    });\n    this.passwordInput.addEventListener('focus', function () {\n      _this.passwordInput.parentElement.classList.add('e-input-focus');\n    });\n    this.passwordInput.addEventListener('blur', function () {\n      _this.passwordInput.parentElement.classList.remove('e-input-focus');\n    });\n  };\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.passwordCancel = function (args) {\n    if (args.isInteraction) {\n      this.clear(false);\n      this.passwordDialogReset();\n      this.passwordInput.value = '';\n    }\n    var waitingPopup = this.getElement('_loadingIndicator');\n    if (waitingPopup !== null) {\n      hideSpinner(waitingPopup);\n    }\n  };\n  PdfViewerBase.prototype.passwordCancelClick = function () {\n    this.clear(false);\n    this.passwordDialogReset();\n    this.passwordPopup.hide();\n    var waitingPopup = this.getElement('_loadingIndicator');\n    if (waitingPopup !== null) {\n      hideSpinner(waitingPopup);\n    }\n  };\n  PdfViewerBase.prototype.passwordDialogReset = function () {\n    if (!isBlazor()) {\n      if (this.promptElement) {\n        this.promptElement.classList.remove('e-pv-password-error');\n        this.promptElement.textContent = this.pdfViewer.localeObj.getConstant('Enter Password');\n        this.passwordInput.value = '';\n      }\n    }\n  };\n  /**\n   * @private\n   * @returns {void}\n   */\n  PdfViewerBase.prototype.applyPassword = function () {\n    if (!isBlazor()) {\n      var password = this.passwordInput.value;\n      if (!isNullOrUndefined(password) && password.length > 0) {\n        this.pdfViewer.load(this.document, password);\n      }\n    }\n    this.focusViewerContainer();\n  };\n  PdfViewerBase.prototype.createFileInputElement = function () {\n    if (Browser.isDevice || !this.pdfViewer.enableDesktopMode) {\n      // eslint-disable-next-line max-len\n      if (this.pdfViewer.enableAnnotationToolbar && this.pdfViewer.toolbarModule && this.pdfViewer.toolbarModule.annotationToolbarModule) {\n        this.pdfViewer.toolbarModule.annotationToolbarModule.createCustomStampElement();\n      }\n      if (this.signatureModule) {\n        this.signatureModule.createSignatureFileElement();\n      }\n    }\n  };\n  PdfViewerBase.prototype.wireEvents = function () {\n    var _this = this;\n    this.isDeviceiOS = ['iPad Simulator', 'iPhone Simulator', 'iPod Simulator', 'iPad', 'iPhone', 'iPod'].includes(navigator.platform) || navigator.userAgent.includes(\"Mac\") && \"ontouchend\" in document;\n    this.isMacSafari = navigator.userAgent.indexOf(\"Safari\") > -1 && navigator.userAgent.indexOf(\"Chrome\") === -1 && !this.isDeviceiOS;\n    this.isWebkitMobile = /Chrome/.test(navigator.userAgent) || /Google Inc/.test(navigator.vendor) || navigator.userAgent.indexOf('Safari') !== -1;\n    this.viewerContainer.addEventListener('scroll', this.viewerContainerOnScroll, true);\n    if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n      this.viewerContainer.addEventListener('touchmove', this.viewerContainerOnScroll, true);\n    }\n    this.viewerContainer.addEventListener('mousedown', this.viewerContainerOnMousedown);\n    this.viewerContainer.addEventListener('mouseup', this.viewerContainerOnMouseup);\n    this.viewerContainer.addEventListener(\"wheel\", this.detectTouchPad, false);\n    this.viewerContainer.addEventListener('wheel', this.viewerContainerOnMouseWheel);\n    if (this.isMacSafari) {\n      window.addEventListener('gesturestart', function (e) {\n        return e.preventDefault();\n      });\n      window.addEventListener('gesturechange', function (e) {\n        return e.preventDefault();\n      });\n      window.addEventListener('gestureend', function (e) {\n        return e.preventDefault();\n      });\n      this.viewerContainer.addEventListener('gesturestart', this.handleMacGestureStart, false);\n      this.viewerContainer.addEventListener('gesturechange', this.handleMacGestureChange, false);\n      this.viewerContainer.addEventListener('gestureend', this.handleMacGestureEnd, false);\n    }\n    this.viewerContainer.addEventListener('mousemove', this.viewerContainerOnMousemove);\n    this.viewerContainer.addEventListener('mouseleave', this.viewerContainerOnMouseLeave);\n    this.viewerContainer.addEventListener('mouseenter', this.viewerContainerOnMouseEnter);\n    this.viewerContainer.addEventListener('mouseover', this.viewerContainerOnMouseOver);\n    this.viewerContainer.addEventListener('click', this.viewerContainerOnClick);\n    this.viewerContainer.addEventListener('dblclick', this.viewerContainerOnClick);\n    this.viewerContainer.addEventListener('dragstart', this.viewerContainerOnDragStart);\n    this.pdfViewer.element.addEventListener('keydown', this.viewerContainerOnKeyDown);\n    window.addEventListener('keydown', this.onWindowKeyDown);\n    window.addEventListener('mouseup', this.onWindowMouseUp);\n    window.addEventListener('touchend', this.onWindowTouchEnd);\n    this.unload = function () {\n      return _this.pdfViewerRunner.terminate();\n    };\n    this.unloadDocument(this);\n    window.addEventListener('unload', this.unload);\n    window.addEventListener('beforeunload', this.clearSessionStorage);\n    window.addEventListener('resize', this.onWindowResize);\n    // eslint-disable-next-line max-len\n    if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.userAgent.indexOf('Edge') !== -1 || navigator.userAgent.indexOf('Trident') !== -1) {\n      this.viewerContainer.addEventListener('pointerdown', this.viewerContainerOnPointerDown);\n      this.viewerContainer.addEventListener('pointermove', this.viewerContainerOnPointerMove);\n      this.viewerContainer.addEventListener('pointerup', this.viewerContainerOnPointerEnd);\n      this.viewerContainer.addEventListener('pointerleave', this.viewerContainerOnPointerEnd);\n    } else {\n      this.viewerContainer.addEventListener('touchstart', this.viewerContainerOnTouchStart);\n      if (this.isWebkitMobile && this.isDeviceiOS) {\n        // eslint-disable-next-line max-len\n        this.viewerContainer.addEventListener(\"touchmove\", function (e) {\n          if (!isNullOrUndefined(e.scale) && e.scale !== 1) {\n            e.preventDefault();\n          }\n        }, {\n          passive: false\n        });\n      }\n      this.viewerContainer.addEventListener('touchmove', this.viewerContainerOnTouchMove);\n      this.viewerContainer.addEventListener('touchend', this.viewerContainerOnTouchEnd);\n      this.viewerContainer.addEventListener('touchleave', this.viewerContainerOnTouchEnd);\n      this.viewerContainer.addEventListener('touchcancel', this.viewerContainerOnTouchEnd);\n    }\n  };\n  PdfViewerBase.prototype.unWireEvents = function () {\n    if (this.viewerContainer) {\n      this.viewerContainer.removeEventListener('scroll', this.viewerContainerOnScroll, true);\n      if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n        this.viewerContainer.removeEventListener('touchmove', this.viewerContainerOnScroll, true);\n      }\n      this.viewerContainer.removeEventListener('mousedown', this.viewerContainerOnMousedown);\n      this.viewerContainer.removeEventListener('mouseup', this.viewerContainerOnMouseup);\n      this.viewerContainer.removeEventListener(\"wheel\", this.detectTouchPad, false);\n      this.viewerContainer.removeEventListener('wheel', this.viewerContainerOnMouseWheel);\n      if (this.isMacSafari) {\n        window.removeEventListener('gesturestart', function (e) {\n          return e.preventDefault();\n        });\n        window.removeEventListener('gesturechange', function (e) {\n          return e.preventDefault();\n        });\n        window.removeEventListener('gestureend', function (e) {\n          return e.preventDefault();\n        });\n        this.viewerContainer.removeEventListener('gesturestart', this.handleMacGestureStart, false);\n        this.viewerContainer.removeEventListener('gesturechange', this.handleMacGestureChange, false);\n        this.viewerContainer.removeEventListener('gestureend', this.handleMacGestureEnd, false);\n      }\n      this.viewerContainer.removeEventListener('mousemove', this.viewerContainerOnMousemove);\n      this.viewerContainer.removeEventListener('mouseleave', this.viewerContainerOnMouseLeave);\n      this.viewerContainer.removeEventListener('mouseenter', this.viewerContainerOnMouseEnter);\n      this.viewerContainer.removeEventListener('mouseover', this.viewerContainerOnMouseOver);\n      this.viewerContainer.removeEventListener('click', this.viewerContainerOnClick);\n      this.viewerContainer.removeEventListener('dragstart', this.viewerContainerOnDragStart);\n      this.viewerContainer.removeEventListener('contextmenu', this.viewerContainerOnContextMenuClick);\n      this.pdfViewer.element.removeEventListener('keydown', this.viewerContainerOnKeyDown);\n      window.addEventListener('keydown', this.onWindowKeyDown);\n      window.removeEventListener('mouseup', this.onWindowMouseUp);\n      window.removeEventListener('unload', this.unload);\n      window.removeEventListener('resize', this.onWindowResize);\n      // eslint-disable-next-line max-len\n      if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.userAgent.indexOf('Edge') !== -1 || navigator.userAgent.indexOf('Trident') !== -1) {\n        this.viewerContainer.removeEventListener('pointerdown', this.viewerContainerOnPointerDown);\n        this.viewerContainer.removeEventListener('pointermove', this.viewerContainerOnPointerMove);\n        this.viewerContainer.removeEventListener('pointerup', this.viewerContainerOnPointerEnd);\n        this.viewerContainer.removeEventListener('pointerleave', this.viewerContainerOnPointerEnd);\n      } else {\n        this.viewerContainer.removeEventListener('touchstart', this.viewerContainerOnTouchStart);\n        if (this.isWebkitMobile && this.isDeviceiOS) {\n          // eslint-disable-next-line max-len\n          this.viewerContainer.removeEventListener(\"touchmove\", function (e) {\n            if (!isNullOrUndefined(e.scale) && e.scale !== 1) {\n              e.preventDefault();\n            }\n          }, false);\n        }\n        this.viewerContainer.removeEventListener('touchmove', this.viewerContainerOnTouchMove);\n        this.viewerContainer.removeEventListener('touchend', this.viewerContainerOnTouchEnd);\n        this.viewerContainer.removeEventListener('touchleave', this.viewerContainerOnTouchEnd);\n        this.viewerContainer.removeEventListener('touchcancel', this.viewerContainerOnTouchEnd);\n      }\n    }\n  };\n  /**\n   * @private\n   * @returns {void}\n   */\n  PdfViewerBase.prototype.updateZoomValue = function () {\n    if (this.pdfViewer.magnificationModule) {\n      if (this.pdfViewer.magnificationModule.isAutoZoom) {\n        this.pdfViewer.magnificationModule.fitToAuto();\n      } else if (this.pdfViewer.zoomMode !== 'FitToWidth' && this.pdfViewer.magnificationModule.fitType === 'fitToWidth') {\n        this.pdfViewer.magnificationModule.fitToWidth();\n      } else if (this.pdfViewer.magnificationModule.fitType === 'fitToPage') {\n        this.pdfViewer.magnificationModule.fitToPage();\n      }\n    }\n    for (var i = 0; i < this.pageCount; i++) {\n      this.applyLeftPosition(i);\n    }\n  };\n  /**\n   * @private\n   * @param {any} annotation - The annotation type of any.\n   * @returns {void}\n   */\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.updateFreeTextProperties = function (annotation) {\n    if (this.pdfViewer.enableShapeLabel) {\n      if (this.pdfViewer.shapeLabelSettings.fillColor) {\n        annotation.labelFillColor = this.pdfViewer.shapeLabelSettings.fillColor;\n      }\n      if (this.pdfViewer.shapeLabelSettings.fontColor) {\n        annotation.fontColor = this.pdfViewer.shapeLabelSettings.fontColor;\n      }\n      if (this.pdfViewer.shapeLabelSettings.fontSize) {\n        annotation.fontSize = this.pdfViewer.shapeLabelSettings.fontSize;\n      }\n      if (this.pdfViewer.shapeLabelSettings.fontFamily) {\n        annotation.fontFamily = this.pdfViewer.shapeLabelSettings.fontFamily;\n      }\n      if (this.pdfViewer.shapeLabelSettings.opacity) {\n        annotation.labelOpacity = this.pdfViewer.shapeLabelSettings.opacity;\n      }\n      if (this.pdfViewer.shapeLabelSettings.labelContent) {\n        annotation.labelContent = this.pdfViewer.shapeLabelSettings.labelContent;\n      }\n    }\n  };\n  /**\n   * @private\n   * @param {MouseEvent} event - The mouse event.\n   * @returns {void}\n   */\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.mouseDownHandler = function (event) {\n    var isEnableDelete = false;\n    var isCancel;\n    var hidenItems = [];\n    var disabledItems = [];\n    if (event && event.target) {\n      this.mouseDownEvent = event;\n      this.contextMenuModule.currentTarget = event.target;\n    }\n    if (this.pdfViewer.annotationModule) {\n      isEnableDelete = this.pdfViewer.annotationModule.isEnableDelete();\n    }\n    if (!isEnableDelete) {\n      disabledItems.push('DeleteContext');\n    }\n    if (this.pdfViewer.contextMenuOption === 'None') {\n      isCancel = true;\n    } else if (this.pdfViewer.textSelectionModule || this.isShapeBasedAnnotationsEnabled()) {\n      if (event) {\n        var isClickWithinSelectionBounds = this.isClickWithinSelectionBounds(event);\n        // eslint-disable-next-line max-len\n        if (this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.freeTextAnnotationModule && this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus) {\n          this.isFreeTextContextMenu = true;\n          // eslint-disable-next-line max-len\n          if (this.pdfViewer.annotation.freeTextAnnotationModule && !this.pdfViewer.annotation.freeTextAnnotationModule.isTextSelected) {\n            disabledItems.push('Cut');\n            disabledItems.push('Copy');\n          }\n          // eslint-disable-next-line max-len\n          if (this.pdfViewer.annotation.freeTextAnnotationModule && this.pdfViewer.annotation.freeTextAnnotationModule.selectedText === '') {\n            disabledItems.push('Paste');\n          }\n          hidenItems.push('HighlightContext');\n          hidenItems.push('UnderlineContext');\n          hidenItems.push('StrikethroughContext');\n          hidenItems.push('ScaleRatio');\n          hidenItems.push('Properties');\n          hidenItems.push('Comment');\n          hidenItems.push('DeleteContext');\n        } else if (isClickWithinSelectionBounds && this.pdfViewer.textSelectionModule) {\n          // eslint-disable-next-line max-len\n          if (!event.target.classList.contains('e-pv-maintaincontent') && event.target.classList.contains('e-pv-text') || event.target.classList.contains('e-pv-text-layer')) {\n            if (this.checkIsNormalText()) {\n              isCancel = true;\n            }\n            // eslint-disable-next-line max-len\n          } else if ((Browser.isIE || Browser.info.name === 'edge') && event.target.classList.contains('e-pv-page-container')) {\n            isCancel = true;\n          }\n          hidenItems.push('Cut');\n          hidenItems.push('Paste');\n          hidenItems.push('DeleteContext');\n          hidenItems.push('ScaleRatio');\n          hidenItems.push('Comment');\n          hidenItems.push('Properties');\n          // eslint-disable-next-line max-len\n        } else if (this.pdfViewer.selectedItems.annotations.length !== 0 && (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'HandWrittenSignature' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureText' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureImage')) {\n          this.shapeMenuItems(hidenItems, disabledItems, false, true);\n          // eslint-disable-next-line max-len\n        } else if (this.pdfViewer.selectedItems.annotations.length !== 0 && this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType !== 'Path') {\n          this.shapeMenuItems(hidenItems, disabledItems, true);\n        } else {\n          // eslint-disable-next-line max-len\n          if (this.pdfViewer.annotation && this.pdfViewer.annotation.isShapeCopied && (event.target.classList.contains('e-pv-text-layer') || event.target.classList.contains('e-pv-text')) && !this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n            hidenItems.push('Properties');\n            this.shapeMenuItems(hidenItems, disabledItems, false);\n            // eslint-disable-next-line max-len\n          } else if (this.isCalibrateAnnotationModule() && this.pdfViewer.annotationModule.measureAnnotationModule.currentAnnotationMode) {\n            hidenItems.push('HighlightContext');\n            hidenItems.push('UnderlineContext');\n            hidenItems.push('StrikethroughContext');\n            hidenItems.push('Properties');\n            disabledItems.push('Cut');\n            disabledItems.push('Copy');\n            disabledItems.push('Paste');\n            disabledItems.push('DeleteContext');\n            disabledItems.push('Comment');\n            // eslint-disable-next-line max-len\n          } else if (this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n            hidenItems.push('HighlightContext');\n            hidenItems.push('UnderlineContext');\n            hidenItems.push('StrikethroughContext');\n            hidenItems.push('Properties');\n            hidenItems.push('Cut');\n            hidenItems.push('Copy');\n            hidenItems.push('Paste');\n            hidenItems.push('ScaleRatio');\n          } else {\n            isCancel = true;\n          }\n        }\n      } else if (this.pdfViewer.textSelectionModule && this.pdfViewer.contextMenuOption === 'MouseUp') {\n        hidenItems.push('Cut');\n        hidenItems.push('Paste');\n        hidenItems.push('DeleteContext');\n        hidenItems.push('ScaleRatio');\n        hidenItems.push('Comment');\n        hidenItems.push('Properties');\n      } else if (this.pdfViewer.selectedItems.annotations.length === 0) {\n        hidenItems.push('Cut');\n        hidenItems.push('Paste');\n        hidenItems.push('DeleteContext');\n        hidenItems.push('ScaleRatio');\n        hidenItems.push('Properties');\n      }\n      if (!this.pdfViewer.enableCommentPanel) {\n        disabledItems.push('Comment');\n      }\n    } else {\n      isCancel = true;\n    }\n    var eventArgs = {\n      hidenItems: hidenItems,\n      disabledItems: disabledItems,\n      isCancel: isCancel\n    };\n    this.pdfViewer._dotnetInstance.invokeMethodAsync('MouseDownHandler', eventArgs);\n  };\n  /**\n   * @private\n   * @param {string} selectedMenu - The selected menu.\n   * @returns {void}\n   */\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.OnItemSelected = function (selectedMenu) {\n    // eslint-disable-next-line\n    var target = this.contextMenuModule.currentTarget;\n    switch (selectedMenu) {\n      case this.pdfViewer.localeObj.getConstant('Copy'):\n        this.CopyItemSelected();\n        break;\n      case this.pdfViewer.localeObj.getConstant('Highlight context'):\n        this.TextMarkUpSelected('Highlight');\n        break;\n      case this.pdfViewer.localeObj.getConstant('Underline context'):\n        this.TextMarkUpSelected('Underline');\n        break;\n      case this.pdfViewer.localeObj.getConstant('Strikethrough context'):\n        this.TextMarkUpSelected('Strikethrough');\n        break;\n      case this.pdfViewer.localeObj.getConstant('Properties'):\n        this.PropertiesItemSelected();\n        break;\n      case this.pdfViewer.localeObj.getConstant('Cut'):\n        this.CutItemSelected(target);\n        break;\n      case this.pdfViewer.localeObj.getConstant('Paste'):\n        this.pasteItemSelected(target);\n        break;\n      case this.pdfViewer.localeObj.getConstant('Delete Context'):\n        this.DeleteItemSelected();\n        break;\n      case this.pdfViewer.localeObj.getConstant('Scale Ratio'):\n        this.ScaleRatioSelected();\n        break;\n      case this.pdfViewer.localeObj.getConstant('Comment'):\n        this.CommentItemSelected();\n        break;\n      default:\n        break;\n    }\n  };\n  PdfViewerBase.prototype.CommentItemSelected = function () {\n    if (this.pdfViewer.annotation) {\n      this.pdfViewer.annotation.showCommentsPanel();\n      if (this.pdfViewer.selectedItems.annotations.length !== 0 || this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n        // eslint-disable-next-line\n        var currentAnnotation = void 0;\n        if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n          currentAnnotation = this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;\n        } else {\n          currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n        }\n        // eslint-disable-next-line\n        var accordionExpand = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + this.pdfViewer.currentPageNumber);\n        if (accordionExpand) {\n          accordionExpand.ej2_instances[0].expandItem(true);\n        }\n        // eslint-disable-next-line\n        var commentsDiv = document.getElementById(currentAnnotation.annotName);\n        if (commentsDiv) {\n          if (!commentsDiv.classList.contains('e-pv-comments-border')) {\n            commentsDiv.firstChild.click();\n          }\n        }\n      }\n    }\n  };\n  PdfViewerBase.prototype.ScaleRatioSelected = function () {\n    if (this.isCalibrateAnnotationModule()) {\n      this.pdfViewer.annotation.measureAnnotationModule.createScaleRatioWindow();\n    }\n  };\n  PdfViewerBase.prototype.DeleteItemSelected = function () {\n    if (this.pdfViewer.formDesignerModule && this.pdfViewer.selectedItems.formFields.length !== 0) {\n      this.pdfViewer.formDesignerModule.deleteFormField(this.pdfViewer.selectedItems.formFields[0].id);\n    } else if (this.pdfViewer.annotation) {\n      this.pdfViewer.annotation.deleteAnnotation();\n    }\n  };\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.pasteItemSelected = function (target) {\n    // eslint-disable-next-line max-len\n    if (this.isFreeTextContextMenu || this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus && target && target.className === 'free-text-input' && target.tagName === 'TEXTAREA') {\n      this.pdfViewer.annotation.freeTextAnnotationModule.pasteSelectedText(target);\n      this.contextMenuModule.close();\n    } else {\n      this.pdfViewer.paste();\n      this.contextMenuModule.previousAction = 'Paste';\n    }\n  };\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.CutItemSelected = function (target) {\n    // eslint-disable-next-line max-len\n    if (this.isFreeTextContextMenu || this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus && target && target.className === 'free-text-input' && target.tagName === 'TEXTAREA') {\n      this.pdfViewer.annotation.freeTextAnnotationModule.cutSelectedText(target);\n      this.contextMenuModule.close();\n    } else if (this.pdfViewer.selectedItems.annotations.length === 1) {\n      var pageIndex = this.pdfViewer.selectedItems.annotations[0].pageIndex;\n      this.pdfViewer.cut();\n      this.contextMenuModule.previousAction = 'Cut';\n    } else if (this.pdfViewer.selectedItems.formFields.length === 1) {\n      this.pdfViewer.cut();\n      this.contextMenuModule.previousAction = 'Cut';\n    }\n  };\n  PdfViewerBase.prototype.CopyItemSelected = function () {\n    var isSkip = false;\n    // eslint-disable-next-line max-len\n    if (this.isFreeTextContextMenu || this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus) {\n      this.pdfViewer.annotation.freeTextAnnotationModule.copySelectedText();\n      this.contextMenuModule.close();\n      isSkip = true;\n    } else if (this.pdfViewer.textSelectionModule) {\n      this.pdfViewer.textSelectionModule.copyText();\n      this.contextMenuModule.close();\n    }\n    if (this.pdfViewer.selectedItems.annotations.length && !isSkip) {\n      this.pdfViewer.copy();\n      this.contextMenuModule.previousAction = 'Copy';\n    } else if (this.pdfViewer.selectedItems.formFields.length > 0) {\n      this.pdfViewer.copy();\n      this.contextMenuModule.previousAction = 'Copy';\n    }\n  };\n  PdfViewerBase.prototype.PropertiesItemSelected = function () {\n    // eslint-disable-next-line max-len\n    if (this.pdfViewer.selectedItems.annotations.length !== 0 && (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Line' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'LineWidthArrowHead' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Distance')) {\n      this.pdfViewer.annotation.createPropertiesWindow();\n      // eslint-disable-next-line max-len\n    } else if (this.pdfViewer.selectedItems.formFields.length !== 0 && this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType) {\n      this.pdfViewer.formDesigner.createPropertiesWindow();\n    }\n  };\n  PdfViewerBase.prototype.TextMarkUpSelected = function (type) {\n    if (this.pdfViewer.annotation && this.pdfViewer.annotation.textMarkupAnnotationModule) {\n      this.pdfViewer.annotation.textMarkupAnnotationModule.isSelectionMaintained = false;\n      this.pdfViewer.annotation.textMarkupAnnotationModule.drawTextMarkupAnnotations(type);\n      this.pdfViewer.annotation.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n      this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAddMode = '';\n      this.pdfViewer.annotation.textMarkupAnnotationModule.isSelectionMaintained = true;\n    }\n  };\n  PdfViewerBase.prototype.shapeMenuItems = function (hidenItems, disabledItems, enableProperties, isSignature) {\n    if (this.pdfViewer.annotation && !this.pdfViewer.annotation.isShapeCopied) {\n      disabledItems.push('Paste');\n    }\n    hidenItems.push('HighlightContext');\n    hidenItems.push('UnderlineContext');\n    hidenItems.push('StrikethroughContext');\n    hidenItems.push('ScaleRatio');\n    if (enableProperties) {\n      // eslint-disable-next-line max-len\n      if (!(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Line' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'LineWidthArrowHead' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Distance')) {\n        hidenItems.push('Properties');\n      }\n    } else if (isSignature) {\n      hidenItems.push('Properties');\n      hidenItems.push('Comment');\n    } else {\n      hidenItems.push('Cut');\n      hidenItems.push('Copy');\n      hidenItems.push('DeleteContext');\n      hidenItems.push('Comment');\n    }\n  };\n  /**\n   * @private\n   */\n  PdfViewerBase.prototype.checkIsRtlText = function (text) {\n    // eslint-disable-next-line max-len\n    var ltrChars = 'A-Za-z\\\\u00C0-\\\\u00D6\\\\u00D8-\\\\u00F6\\\\u00F8-\\\\u02B8\\\\u0300-\\\\u0590\\\\u0800-\\\\u1FFF' + '\\\\u2C00-\\\\uFB1C\\\\uFDFE-\\\\uFE6F\\\\uFEFD-\\\\uFFFF';\n    var rtlChars = '\\\\u0591-\\\\u07FF\\\\uFB1D-\\\\uFDFD\\\\uFE70-\\\\uFEFC';\n    // eslint-disable-next-line\n    var rtlDirCheck = new RegExp('^[^' + ltrChars + ']*[' + rtlChars + ']');\n    return rtlDirCheck.test(text);\n  };\n  /**\n   * @private\n   * @param {any} event - Specifies the event.\n   * @returns {boolean} - retruned the beolean value.\n   */\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.isClickWithinSelectionBounds = function (event) {\n    var bounds;\n    var isWithin = false;\n    var diCount = 5;\n    var negativeCount = this.currentPageNumber - diCount < 0 ? 0 : this.currentPageNumber - diCount;\n    var positiveCount = this.currentPageNumber - diCount > this.pageCount ? this.pageCount : this.currentPageNumber + diCount;\n    if (this.pdfViewer.textSelectionModule) {\n      for (var i = negativeCount; i < positiveCount; i++) {\n        if (i >= 0) {\n          bounds = this.pdfViewer.textSelectionModule.getCurrentSelectionBounds(i);\n          if (bounds) {\n            var currentBound = bounds;\n            if (this.getHorizontalValue(currentBound.left, i) < event.clientX && this.getHorizontalValue(currentBound.right, i) > event.clientX && this.getVerticalValue(currentBound.top, i) < event.clientY && this.getVerticalValue(currentBound.bottom, i) > event.clientY) {\n              isWithin = true;\n              break;\n            }\n          }\n        }\n      }\n      if ((Browser.isIE || Browser.info.name === 'edge') && bounds) {\n        isWithin = true;\n      }\n    }\n    return isWithin;\n  };\n  PdfViewerBase.prototype.getHorizontalClientValue = function (value) {\n    var pageDiv = this.getElement('_pageDiv_' + (this.currentPageNumber - 1));\n    var pageBounds = pageDiv.getBoundingClientRect();\n    return value - pageBounds.left;\n  };\n  PdfViewerBase.prototype.getVerticalClientValue = function (value) {\n    var pageDiv = this.getElement('_pageDiv_' + (this.currentPageNumber - 1));\n    var pageBounds = pageDiv.getBoundingClientRect();\n    return value - pageBounds.top;\n  };\n  PdfViewerBase.prototype.getHorizontalValue = function (value, pageNumber) {\n    var pageDiv = this.getElement('_pageDiv_' + (pageNumber || this.currentPageNumber - 1));\n    var pageBounds = pageDiv.getBoundingClientRect();\n    return value * this.getZoomFactor() + pageBounds.left;\n  };\n  PdfViewerBase.prototype.getVerticalValue = function (value, pageNumber) {\n    var pageDiv = this.getElement('_pageDiv_' + (pageNumber || this.currentPageNumber - 1));\n    var pageBounds = pageDiv.getBoundingClientRect();\n    return value * this.getZoomFactor() + pageBounds.top;\n  };\n  /**\n   * @private\n   * @returns {boolean} - retruned the beolean value.\n   */\n  PdfViewerBase.prototype.checkIsNormalText = function () {\n    var isText = true;\n    var currentText = '';\n    // eslint-disable-next-line\n    var textSelectionModule = this.pdfViewer.textSelectionModule;\n    if (textSelectionModule && textSelectionModule.selectionRangeArray && textSelectionModule.selectionRangeArray.length === 1) {\n      currentText = textSelectionModule.selectionRangeArray[0].textContent;\n    } else if (window.getSelection() && window.getSelection().anchorNode) {\n      currentText = window.getSelection().toString();\n    }\n    if (currentText !== '' && this.checkIsRtlText(currentText)) {\n      isText = false;\n    }\n    return isText;\n  };\n  PdfViewerBase.prototype.DeleteKeyPressed = function (event) {\n    var isSearchboxDialogOpen;\n    var searchBoxId = document.getElementById(this.pdfViewer.element.id + \"_search_box\");\n    if (searchBoxId) {\n      isSearchboxDialogOpen = searchBoxId.style.display !== \"none\";\n    }\n    if (this.pdfViewer.formDesignerModule && !this.pdfViewer.formDesigner.isPropertyDialogOpen && this.pdfViewer.designerMode && this.pdfViewer.selectedItems.formFields.length !== 0 && !isSearchboxDialogOpen) {\n      this.pdfViewer.formDesignerModule.deleteFormField(this.pdfViewer.selectedItems.formFields[0].id);\n    } else if (this.pdfViewer.annotation && !this.pdfViewer.designerMode && event.srcElement.parentElement.classList && !event.srcElement.parentElement.classList.contains(\"e-input-focus\")) {\n      if (this.isTextMarkupAnnotationModule() && !this.getPopupNoteVisibleStatus() && !isSearchboxDialogOpen) {\n        this.pdfViewer.annotationModule.deleteAnnotation();\n      }\n      if (this.pdfViewer.selectedItems.annotations.length > 0) {\n        // eslint-disable-next-line\n        var annotation = this.pdfViewer.selectedItems.annotations[0];\n        var isReadOnly = true;\n        var type = annotation.shapeAnnotationType;\n        if (type === 'Path' || annotation.formFieldAnnotationType === 'SignatureField' || annotation.formFieldAnnotationType === 'InitialField' || type === 'HandWrittenSignature' || type === 'SignatureText' || type === 'SignatureImage') {\n          var inputFields = document.getElementById(annotation.id);\n          if (inputFields && inputFields.disabled) {\n            isReadOnly = true;\n          }\n        }\n        if (!isReadOnly) {\n          if (annotation.annotationSettings && annotation.annotationSettings.isLock) {\n            if (this.pdfViewer.annotationModule.checkAllowedInteractions('Delete', annotation)) {\n              this.pdfViewer.remove(annotation);\n              this.pdfViewer.renderSelector(this.pdfViewer.annotation.getEventPageNumber(event));\n            }\n          } else {\n            this.pdfViewer.remove(annotation);\n            this.pdfViewer.renderSelector(this.pdfViewer.annotation.getEventPageNumber(event));\n          }\n        }\n      }\n    }\n  };\n  /**\n   * @private\n   * @returns {void}\n   */\n  PdfViewerBase.prototype.initiatePanning = function () {\n    this.isPanMode = true;\n    this.textLayer.modifyTextCursor(false);\n    this.disableTextSelectionMode();\n    if (this.pdfViewer.toolbar && this.pdfViewer.toolbar.annotationToolbarModule) {\n      this.pdfViewer.toolbar.annotationToolbarModule.deselectAllItems();\n    }\n  };\n  /**\n   * @private\n   * @returns {void}\n   */\n  PdfViewerBase.prototype.initiateTextSelectMode = function () {\n    this.isPanMode = false;\n    if (this.viewerContainer) {\n      this.viewerContainer.style.cursor = 'auto';\n      if (this.pdfViewer.textSelectionModule) {\n        this.textLayer.modifyTextCursor(true);\n        this.pdfViewer.textSelectionModule.enableTextSelectionMode();\n      }\n      if ((!Browser.isDevice || this.pdfViewer.enableDesktopMode) && !isBlazor()) {\n        this.enableAnnotationAddTools(true);\n      }\n    }\n  };\n  /**\n   * @private\n   * @returns {void}\n  */\n  PdfViewerBase.prototype.initiateTextSelection = function () {\n    if (this.pdfViewer.toolbar && !this.pdfViewer.toolbar.isSelectionToolDisabled) {\n      this.initiateTextSelectMode();\n      this.pdfViewer.toolbar.updateInteractionTools(true);\n    }\n  };\n  PdfViewerBase.prototype.enableAnnotationAddTools = function (isEnable) {\n    if (this.pdfViewer.toolbarModule) {\n      if (this.pdfViewer.toolbarModule.annotationToolbarModule) {\n        this.pdfViewer.toolbarModule.annotationToolbarModule.enableAnnotationAddTools(isEnable);\n      }\n    }\n  };\n  PdfViewerBase.prototype.applySelection = function () {\n    if (window.getSelection().anchorNode !== null) {\n      this.pdfViewer.textSelectionModule.applySpanForSelection();\n    }\n    this.isViewerContainerDoubleClick = false;\n  };\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.isDesignerMode = function (target) {\n    var isDesignerMode = false;\n    if (this.pdfViewer.selectedItems.annotations.length !== 0 && (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'HandWrittenSignature' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureText' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureImage')) {\n      isDesignerMode = true;\n      // eslint-disable-next-line max-len\n    } else if (this.pdfViewer.selectedItems.annotations.length !== 0 && this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType !== 'Path') {\n      isDesignerMode = true;\n      // eslint-disable-next-line max-len\n    } else if (this.pdfViewer.selectedItems.formFields.length !== 0 && this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType && this.pdfViewer.designerMode) {\n      isDesignerMode = true;\n    } else {\n      // eslint-disable-next-line max-len\n      if (this.pdfViewer.annotation && this.pdfViewer.annotation.isShapeCopied && (target.classList.contains('e-pv-text-layer') ||\n      // eslint-disable-next-line max-len\n      target.classList.contains('e-pv-text')) && !this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n        isDesignerMode = true;\n        // eslint-disable-next-line max-len\n      } else if (this.pdfViewer.formDesigner && this.pdfViewer.formDesigner.isShapeCopied && (target.classList.contains('e-pv-text-layer') || target.classList.contains('e-pv-text'))) {\n        isDesignerMode = true;\n      }\n    }\n    this.designerModetarget = target;\n    return isDesignerMode;\n  };\n  PdfViewerBase.prototype.handleTaps = function (touchPoints, event) {\n    var _this = this;\n    //EJ2CORE-813 - Implemented focus removing logic for iOS devices\n    if (this.isDeviceiOS) {\n      var obj = findActiveElement(event, this, this.pdfViewer);\n      // eslint-disable-next-line\n      var isRemoveFocus_1 = !isNullOrUndefined(this.pdfViewer.annotation) && !isNullOrUndefined(this.pdfViewer.annotation.freeTextAnnotationModule) && !this.pdfViewer.annotation.freeTextAnnotationModule.isNewFreeTextAnnot && (obj && this.pdfViewer.selectedItems.annotations[0] ? obj.id !== this.pdfViewer.selectedItems.annotations[0].id : true) && document.activeElement.classList.contains('free-text-input') && this.isFreeTextAnnotation(this.pdfViewer.selectedItems.annotations);\n      if (!this.singleTapTimer) {\n        this.singleTapTimer = setTimeout(function () {\n          if (isRemoveFocus_1) {\n            _this.pdfViewer.clearSelection(_this.pdfViewer.selectedItems.annotations[0].pageIndex);\n            _this.focusViewerContainer(true);\n          }\n          _this.onSingleTap(touchPoints);\n          // eslint-disable-next-line\n        }, 300);\n        this.tapCount++;\n      } else {\n        if (this.pdfViewer.enablePinchZoom) {\n          this.tapCount++;\n          if (this.tapCount > 2) {\n            this.tapCount = 2;\n          }\n          clearTimeout(this.singleTapTimer);\n          this.singleTapTimer = null;\n          this.onDoubleTap(touchPoints);\n        }\n      }\n    } else {\n      if (!this.singleTapTimer) {\n        this.singleTapTimer = setTimeout(function () {\n          _this.onSingleTap(touchPoints);\n          // eslint-disable-next-line\n        }, 300);\n        this.tapCount++;\n      } else {\n        if (this.pdfViewer.enablePinchZoom) {\n          this.tapCount++;\n          if (this.tapCount > 2) {\n            this.tapCount = 2;\n          }\n          clearTimeout(this.singleTapTimer);\n          this.singleTapTimer = null;\n          this.onDoubleTap(touchPoints);\n        }\n      }\n    }\n  };\n  PdfViewerBase.prototype.handleTextBoxTaps = function (touchPoints) {\n    var _this = this;\n    setTimeout(function () {\n      _this.inputTapCount = 0;\n    }, 300);\n    this.inputTapCount++;\n    //EJ2CORE-813 - Removing timer function for iOS Devices\n    if (this.isDeviceiOS) {\n      // eslint-disable-next-line\n      this.onTextBoxDoubleTap(touchPoints);\n    } else {\n      var timer = setTimeout(function () {\n        _this.onTextBoxDoubleTap(touchPoints);\n      }, 200);\n    }\n    if (this.inputTapCount > 2) {\n      this.inputTapCount = 0;\n    }\n  };\n  PdfViewerBase.prototype.onTextBoxDoubleTap = function (touches) {\n    var target = touches[0].target;\n    if (this.inputTapCount === 2) {\n      if (this.pdfViewer.selectedItems.annotations.length !== 0) {\n        if (this.pdfViewer.annotationModule) {\n          var currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n          //EJ2CORE-813 - Removing focus from all active free text elements before focusing on free text annotation on iOS devices\n          if (this.isDeviceiOS && document.activeElement.classList.contains('free-text-input') && this.isFreeTextAnnotation(this.pdfViewer.selectedItems.annotations)) {\n            this.focusViewerContainer(true);\n          }\n          this.pdfViewer.annotationModule.annotationSelect(currentAnnotation.annotName, currentAnnotation.pageIndex, currentAnnotation, null, true);\n        }\n        if (this.isFreeTextAnnotation(this.pdfViewer.selectedItems.annotations) && !this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus) {\n          var elmtPosition = {};\n          elmtPosition.x = this.pdfViewer.selectedItems.annotations[0].bounds.x;\n          elmtPosition.y = this.pdfViewer.selectedItems.annotations[0].bounds.y;\n          var targetAnnotation = void 0;\n          if (this.pdfViewer.selectedItems.annotations[0].id == 'diagram_helper') {\n            targetAnnotation = this.pdfViewer.nameTable[this.eventArgs.source.id];\n          } else {\n            targetAnnotation = this.pdfViewer.selectedItems.annotations[0];\n          }\n          // eslint-disable-next-line max-len\n          this.pdfViewer.annotation.freeTextAnnotationModule.addInuptElemet(elmtPosition, targetAnnotation);\n        } else if (this.pdfViewer.selectedItems.annotations[0] && this.pdfViewer.selectedItems.annotations[0].enableShapeLabel && !this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus) {\n          var elmtPosition = {};\n          elmtPosition.x = this.pdfViewer.selectedItems.annotations[0].bounds.x;\n          elmtPosition.y = this.pdfViewer.selectedItems.annotations[0].bounds.y;\n          this.pdfViewer.annotation.inputElementModule.editLabel(elmtPosition, this.pdfViewer.selectedItems.annotations[0]);\n        }\n      }\n    }\n  };\n  PdfViewerBase.prototype.onSingleTap = function (touches) {\n    var target = touches[0].target;\n    var isFormfields = false;\n    this.singleTapTimer = null;\n    if (target && (target.classList.contains('e-pdfviewer-formFields') || target.classList.contains('e-pdfviewer-ListBox') || target.classList.contains('e-pdfviewer-signatureformfields'))) {\n      isFormfields = true;\n    }\n    if (!this.isLongTouchPropagated && !this.navigationPane.isNavigationToolbarVisible && !isFormfields) {\n      if (this.pdfViewer.toolbarModule) {\n        if (this.touchClientX >= touches[0].clientX - 10 && this.touchClientX <= touches[0].clientX + 10 && this.touchClientY >= touches[0].clientY - 10 && this.touchClientY <= touches[0].clientY + 10) {\n          if (!this.isTapHidden) {\n            if (isBlazor()) {\n              // eslint-disable-next-line max-len\n              this.viewerContainer.scrollTop -= this.pdfViewer.element.querySelector('.e-pv-mobile-toolbar').clientHeight * this.getZoomFactor();\n            }\n            if (this.pdfViewer.toolbar.moreDropDown) {\n              var dropDown = this.getElement('_more_option-popup');\n              if (dropDown.firstElementChild) {\n                dropDown.classList.remove('e-popup-open');\n                dropDown.classList.add('e-popup-close');\n                dropDown.removeChild(dropDown.firstElementChild);\n              }\n            }\n          } else {\n            if (isBlazor()) {\n              // eslint-disable-next-line max-len\n              this.viewerContainer.scrollTop += this.pdfViewer.element.querySelector('.e-pv-mobile-toolbar').clientHeight * this.getZoomFactor();\n            }\n          }\n          if (this.isTapHidden && Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n            this.mobileScrollerContainer.style.display = '';\n            this.updateMobileScrollerPosition();\n            // eslint-disable-next-line max-len\n          } else if (Browser.isDevice && !this.pdfViewer.enableDesktopMode && this.getSelectTextMarkupCurrentPage() == null) {\n            this.mobileScrollerContainer.style.display = 'none';\n          }\n          if (this.getSelectTextMarkupCurrentPage() == null) {\n            if (!isBlazor()) {\n              if (this.pdfViewer.enableToolbar) {\n                this.pdfViewer.toolbarModule.showToolbar(true);\n              }\n            } else {\n              //this.pdfViewer._dotnetInstance.invokeMethodAsync('TapOnMobileDevice', this.isTapHidden);\n              this.blazorUIAdaptor.tapOnMobileDevice(this.isTapHidden);\n            }\n            this.isTapHidden = !this.isTapHidden;\n          }\n        }\n        this.tapCount = 0;\n      }\n    }\n  };\n  PdfViewerBase.prototype.onDoubleTap = function (touches) {\n    var target = touches[0].target;\n    var isFormfields = false;\n    if (target && (target.classList.contains('e-pdfviewer-formFields') || target.classList.contains('e-pdfviewer-ListBox') || target.classList.contains('e-pdfviewer-signatureformfields'))) {\n      isFormfields = true;\n    }\n    if (this.tapCount === 2 && !isFormfields) {\n      this.tapCount = 0;\n      /**\n       * Sometimes the values gets differ by some decimal points. So converted the decimal points values to Integer values.\n       */\n      // eslint-disable-next-line\n      if (this.touchClientX >= parseInt((touches[0].clientX - 10).toString()) && this.touchClientX <= touches[0].clientX + 10 && this.touchClientY >= touches[0].clientY - 10 && this.touchClientY <= touches[0].clientY + 30) {\n        if (this.pdfViewer.magnification && this.pdfViewer.selectedItems.annotations.length !== 1) {\n          this.pdfViewer.magnification.onDoubleTapMagnification();\n        }\n        this.viewerContainer.style.height = this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height, this.toolbarHeight);\n        this.isTapHidden = false;\n        clearTimeout(this.singleTapTimer);\n        this.singleTapTimer = null;\n      }\n    }\n  };\n  PdfViewerBase.prototype.preventTouchEvent = function (event) {\n    if (this.pdfViewer.textSelectionModule) {\n      // eslint-disable-next-line max-len\n      if (!this.isPanMode && this.pdfViewer.enableTextSelection && !this.isTextSelectionDisabled && this.getSelectTextMarkupCurrentPage() == null) {\n        if (!(this.isWebkitMobile && Browser.isDevice && !this.pdfViewer.enableDesktopMode)) {\n          event.preventDefault();\n          event.stopPropagation();\n        }\n      }\n    }\n  };\n  PdfViewerBase.prototype.renderStampAnnotation = function (event) {\n    if (this.pdfViewer.annotation) {\n      var zoomFactor = this.getZoomFactor();\n      var pageIndex = this.pdfViewer.annotation.getEventPageNumber(event);\n      var pageDiv = this.getElement('_pageDiv_' + pageIndex);\n      if (this.pdfViewer.enableStampAnnotations) {\n        var stampModule = this.pdfViewer.annotationModule.stampAnnotationModule;\n        if (stampModule && stampModule.isStampAnnotSelected) {\n          if (pageDiv) {\n            var pageCurrentRect = pageDiv.getBoundingClientRect();\n            // eslint-disable-next-line max-len\n            if (event.type === 'touchend' && this.pdfViewer.annotationModule.stampAnnotationModule.currentStampAnnotation.shapeAnnotationType === 'Image') {\n              var currentStampObj = this.pdfViewer.annotationModule.stampAnnotationModule.currentStampAnnotation;\n              currentStampObj.pageIndex = pageIndex;\n              currentStampObj.bounds.x = (event.changedTouches[0].clientX - pageCurrentRect.left) / zoomFactor;\n              currentStampObj.bounds.y = (event.changedTouches[0].clientY - pageCurrentRect.top) / zoomFactor;\n              stampModule.updateDeleteItems(pageIndex, currentStampObj, currentStampObj.opacity);\n              this.pdfViewer.add(currentStampObj);\n              var canvas = document.getElementById(this.pdfViewer.element.id + '_annotationCanvas_' + pageIndex);\n              this.pdfViewer.renderDrawing(canvas, pageIndex);\n            } else {\n              // eslint-disable-next-line max-len\n              stampModule.renderStamp((event.changedTouches[0].clientX - pageCurrentRect.left) / zoomFactor, (event.changedTouches[0].clientY - pageCurrentRect.top) / zoomFactor, null, null, pageIndex, null, null, null, null);\n            }\n            stampModule.isStampAnnotSelected = false;\n          }\n        }\n        this.pdfViewer.annotation.onAnnotationMouseDown();\n      }\n      if (this.pdfViewer.enableHandwrittenSignature && this.isSignatureAdded && pageDiv) {\n        var pageCurrentRect = pageDiv.getBoundingClientRect();\n        this.currentSignatureAnnot.pageIndex = pageIndex;\n        // eslint-disable-next-line max-len\n        this.signatureModule.renderSignature((event.changedTouches[0].clientX - pageCurrentRect.left) / zoomFactor, (event.changedTouches[0].clientY - pageCurrentRect.top) / zoomFactor);\n        this.isSignatureAdded = false;\n      }\n      if (event.touches.length === 1 && this.isTextMarkupAnnotationModule() && !this.getPopupNoteVisibleStatus()) {\n        this.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationTouchEnd(event);\n      }\n    }\n  };\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.initPageDiv = function (pageValues) {\n    if (!isBlazor()) {\n      if (this.pdfViewer.toolbarModule) {\n        this.pdfViewer.toolbarModule.updateTotalPage();\n      }\n    }\n    if (Browser.isDevice && !this.pdfViewer.enableDesktopMode && this.mobiletotalPageContainer) {\n      this.mobiletotalPageContainer.innerHTML = this.pageCount.toString();\n      this.pageNoContainer.innerHTML = '(1-' + this.pageCount.toString() + ')';\n    }\n    if (this.pageCount > 0) {\n      var topValue = 0;\n      var pageLimit = 0;\n      this.isMixedSizeDocument = false;\n      if (this.pageCount > 100) {\n        // to render 100 pages intially.\n        pageLimit = 100;\n        this.pageLimit = pageLimit;\n      } else {\n        pageLimit = this.pageCount;\n      }\n      var isPortrait = false;\n      var isLandscape = false;\n      var differentPageSize = false;\n      for (var i = 0; i < pageLimit; i++) {\n        if (typeof pageValues.pageSizes[parseInt(i.toString(), 10)] !== 'object') {\n          var pageSize = pageValues.pageSizes[parseInt(i.toString(), 10)].split(',');\n          if (pageValues.pageSizes[i - 1] !== null && i !== 0) {\n            var previousPageHeight = pageValues.pageSizes[i - 1].split(',');\n            topValue = this.pageGap + parseFloat(previousPageHeight[1]) + topValue;\n          } else {\n            topValue = this.pageGap;\n          }\n          var size = {\n            width: parseFloat(pageSize[0]),\n            height: parseFloat(pageSize[1]),\n            top: topValue\n          };\n          this.pageSize.push(size);\n        } else {\n          if (pageValues.pageSizes[i - 1] !== null && i !== 0) {\n            // eslint-disable-next-line\n            var previousPageHeight = pageValues.pageSizes[i - 1];\n            topValue = this.pageGap + (parseFloat(previousPageHeight.height) ? parseFloat(previousPageHeight.height) : parseFloat(previousPageHeight.Height)) + topValue;\n          } else {\n            topValue = this.pageGap;\n          }\n          // eslint-disable-next-line max-len\n          var size = {\n            width: pageValues.pageSizes[parseInt(i.toString(), 10)].width ? pageValues.pageSizes[parseInt(i.toString(), 10)].width : pageValues.pageSizes[parseInt(i.toString(), 10)].Width,\n            height: pageValues.pageSizes[parseInt(i.toString(), 10)].height ? pageValues.pageSizes[parseInt(i.toString(), 10)].height : pageValues.pageSizes[parseInt(i.toString(), 10)].Height,\n            top: topValue,\n            rotation: !isNullOrUndefined(pageValues.pageRotation) && pageValues.pageRotation.length > 0 ? pageValues.pageRotation[parseInt(i.toString(), 10)] : 0\n          };\n          this.pageSize.push(size);\n        }\n        if (this.pageSize[parseInt(i.toString(), 10)].height > this.pageSize[parseInt(i.toString(), 10)].width) {\n          isPortrait = true;\n        }\n        if (this.pageSize[parseInt(i.toString(), 10)].width > this.pageSize[parseInt(i.toString(), 10)].height) {\n          isLandscape = true;\n        }\n        if (i > 0 && this.pageSize[parseInt(i.toString(), 10)].width !== this.pageSize[i - 1].width) {\n          differentPageSize = true;\n        }\n        var pageWidth = this.pageSize[parseInt(i.toString(), 10)].width;\n        if (pageWidth > this.highestWidth) {\n          this.highestWidth = pageWidth;\n        }\n        var pageHeight = this.pageSize[parseInt(i.toString(), 10)].height;\n        if (pageHeight > this.highestHeight) {\n          this.highestHeight = pageHeight;\n        }\n      }\n      if (isPortrait && isLandscape || differentPageSize) {\n        this.isMixedSizeDocument = true;\n      }\n      var limit = void 0;\n      if (this.pdfViewer.initialRenderPages > 10) {\n        if (this.pdfViewer.initialRenderPages > 100) {\n          limit = pageLimit;\n        } else {\n          limit = this.pdfViewer.initialRenderPages <= this.pageCount ? this.pdfViewer.initialRenderPages : this.pageCount;\n        }\n      } else {\n        limit = this.pageCount < 10 ? this.pageCount : 10;\n      }\n      for (var i = 0; i < limit; i++) {\n        this.renderPageContainer(i, this.getPageWidth(i), this.getPageHeight(i), this.getPageTop(i));\n      }\n      // eslint-disable-next-line max-len\n      this.pageContainer.style.height = this.getPageTop(this.pageSize.length - 1) + this.getPageHeight(this.pageSize.length - 1) + 'px';\n      this.pageContainer.style.position = 'relative';\n      if (this.pageLimit === 100) {\n        var pageDiv = this.getElement('_pageDiv_' + this.pageLimit);\n        if (pageDiv === null && this.pageLimit < this.pageCount) {\n          Promise.all([this.renderPagesVirtually()]);\n        }\n      }\n    }\n  };\n  PdfViewerBase.prototype.renderElementsVirtualScroll = function (pageNumber) {\n    var lowerLimit = 1;\n    var higherLimit = 3;\n    if (this.pageStopValue <= 200) {\n      lowerLimit = 4;\n      higherLimit = 4;\n    } else {\n      lowerLimit = 2;\n      higherLimit = 3;\n    }\n    var pageValue = pageNumber + lowerLimit;\n    if (pageValue > this.pageCount) {\n      pageValue = this.pageCount;\n    }\n    for (var i = pageNumber - 1; i <= pageValue; i++) {\n      if (i !== -1) {\n        this.renderPageElement(i);\n      }\n    }\n    var lowerPageValue = pageNumber - 3;\n    if (lowerPageValue < 0) {\n      lowerPageValue = 0;\n    }\n    for (var i = pageNumber - 1; i >= lowerPageValue; i--) {\n      if (i !== -1) {\n        this.renderPageElement(i);\n      }\n    }\n    for (var j = 0; j < this.pageCount; j++) {\n      if (!(lowerPageValue <= j && j <= pageValue)) {\n        var pageDiv = this.getElement('_pageDiv_' + j);\n        var pageCanvas = this.getElement('_pageCanvas_' + j);\n        var textLayer = this.getElement('_textLayer_' + j);\n        var initialLoadedPages = this.pdfViewer.initialRenderPages > this.pageRenderCount ? this.pdfViewer.initialRenderPages <= this.pageCount ? this.pdfViewer.initialRenderPages - 1 : this.pageCount : -1;\n        if (pageCanvas && j > initialLoadedPages) {\n          pageCanvas.parentNode.removeChild(pageCanvas);\n          if (textLayer) {\n            if (this.pdfViewer.textSelectionModule && textLayer.childNodes.length !== 0 && !this.isTextSelectionDisabled) {\n              this.pdfViewer.textSelectionModule.maintainSelectionOnScroll(j, true);\n            }\n            textLayer.parentNode.removeChild(textLayer);\n          }\n          var indexInArray = this.renderedPagesList.indexOf(j);\n          if (indexInArray !== -1) {\n            this.renderedPagesList.splice(indexInArray, 1);\n          }\n        }\n        if (pageDiv && j > initialLoadedPages) {\n          pageDiv.parentNode.removeChild(pageDiv);\n          var indexInArray = this.renderedPagesList.indexOf(j);\n          if (indexInArray !== -1) {\n            this.renderedPagesList.splice(indexInArray, 1);\n          }\n        }\n      }\n    }\n    if (isBlazor()) this.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateCurrentPageNumber', this.currentPageNumber);\n  };\n  PdfViewerBase.prototype.renderPageElement = function (i) {\n    var pageDiv = this.getElement('_pageDiv_' + i);\n    var canvas = this.getElement('_pageCanvas_' + i);\n    if (canvas == null && pageDiv == null && i < this.pageSize.length) {\n      // eslint-disable-next-line\n      this.renderPageContainer(i, this.getPageWidth(i), this.getPageHeight(i), this.getPageTop(i));\n    }\n  };\n  PdfViewerBase.prototype.renderPagesVirtually = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var proxy;\n      var _this = this;\n      return __generator(this, function (_a) {\n        proxy = this;\n        setTimeout(function () {\n          _this.initiateRenderPagesVirtually(proxy);\n        }, 500);\n        return [2 /*return*/];\n      });\n    });\n  };\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.initiateRenderPagesVirtually = function (proxy) {\n    var jsonObject = {\n      hashId: proxy.hashId,\n      isClientsideLoading: this.clientSideRendering,\n      isCompletePageSizeNotReceived: true,\n      action: 'VirtualLoad',\n      elementId: proxy.pdfViewer.element.id,\n      uniqueId: proxy.documentId,\n      password: proxy.passwordData\n    };\n    if (proxy.jsonDocumentId) {\n      // eslint-disable-next-line\n      jsonObject.documentId = proxy.jsonDocumentId;\n    }\n    this.virtualLoadRequestHandler = new AjaxHandler(this.pdfViewer);\n    this.virtualLoadRequestHandler.url = proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.load;\n    this.virtualLoadRequestHandler.responseType = 'json';\n    this.virtualLoadRequestHandler.mode = true;\n    if (this.clientSideRendering) {\n      var data = this.pdfViewer.pdfRendererModule.load(null, this.documentId, null, jsonObject);\n      this.viritualload(JSON.parse(data), this);\n    } else {\n      this.virtualLoadRequestHandler.send(jsonObject);\n    }\n    // eslint-disable-next-line\n    this.virtualLoadRequestHandler.onSuccess = function (result) {\n      // eslint-disable-next-line\n      var data = result.data;\n      if (data) {\n        if (typeof data !== 'object') {\n          try {\n            data = JSON.parse(data);\n          } catch (error) {\n            proxy.onControlError(500, data, 'VirtualLoad');\n          }\n        }\n      }\n      if (data) {\n        while (typeof data !== 'object') {\n          data = JSON.parse(data);\n        }\n        proxy.viritualload(data, proxy);\n      }\n    };\n    // eslint-disable-next-line\n    this.virtualLoadRequestHandler.onFailure = function (result) {\n      proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText);\n    };\n    // eslint-disable-next-line\n    this.virtualLoadRequestHandler.onError = function (result) {\n      proxy.openNotificationPopup();\n      proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText);\n    };\n  };\n  PdfViewerBase.prototype.viritualload = function (data, proxy) {\n    if (proxy.documentId === data.uniqueId) {\n      proxy.pdfViewer.fireAjaxRequestSuccess('VirtualLoad', data);\n      // eslint-disable-next-line\n      var pageValues = data;\n      if (proxy.pageSize[proxy.pageLimit - 1]) {\n        var topValue = proxy.pageSize[proxy.pageLimit - 1].top;\n        for (var i_1 = proxy.pageLimit; i_1 < proxy.pageCount; i_1++) {\n          if (typeof pageValues.pageSizes[parseInt(i_1.toString(), 10)] !== 'object') {\n            var pageSize = pageValues.pageSizes[parseInt(i_1.toString(), 10)].split(',');\n            if (proxy.pageSize[i_1 - 1] !== null && i_1 !== 0) {\n              var previousPageHeight = proxy.pageSize[i_1 - 1].height;\n              topValue = proxy.pageGap + parseFloat(previousPageHeight) + topValue;\n            }\n            var size = {\n              width: parseFloat(pageSize[0]),\n              height: parseFloat(pageSize[1]),\n              top: topValue\n            };\n            proxy.pageSize.push(size);\n          } else {\n            if (proxy.pageSize[i_1 - 1] !== null && i_1 !== 0) {\n              var previousPageHeight = proxy.pageSize[i_1 - 1].height;\n              topValue = proxy.pageGap + parseFloat(previousPageHeight) + topValue;\n            }\n            // eslint-disable-next-line max-len\n            var size = {\n              width: parseFloat(pageValues.pageSizes[parseInt(i_1.toString(), 10)].width) ? parseFloat(pageValues.pageSizes[parseInt(i_1.toString(), 10)].width) : parseFloat(pageValues.pageSizes[parseInt(i_1.toString(), 10)].Width),\n              height: parseFloat(pageValues.pageSizes[parseInt(i_1.toString(), 10)].height) ? parseFloat(pageValues.pageSizes[parseInt(i_1.toString(), 10)].height) : parseFloat(pageValues.pageSizes[parseInt(i_1.toString(), 10)].Height),\n              top: topValue,\n              rotation: pageValues.pageRotation[parseInt(i_1.toString(), 10)]\n            };\n            proxy.pageSize.push(size);\n          }\n        }\n        // eslint-disable-next-line max-len\n        proxy.pageContainer.style.height = proxy.getPageTop(proxy.pageSize.length - 1) + proxy.getPageHeight(proxy.pageSize.length - 1) + 'px';\n        // eslint-disable-next-line\n        var pageData = window.sessionStorage.getItem(proxy.documentId + '_pagedata');\n        if (proxy.pageCount > 100) {\n          if (this.pdfViewer.initialRenderPages > 100) {\n            var limit = this.pdfViewer.initialRenderPages <= proxy.pageCount ? this.pdfViewer.initialRenderPages : proxy.pageCount;\n            for (var i = 100; i < limit; i++) {\n              proxy.renderPageContainer(i, proxy.getPageWidth(i), proxy.getPageHeight(i), proxy.getPageTop(i));\n              proxy.createRequestForRender(i);\n            }\n          }\n          proxy.pdfViewer.fireDocumentLoad(pageData);\n          var linkAnnotationModule = proxy.pdfViewer.linkAnnotationModule;\n          if (linkAnnotationModule && linkAnnotationModule.linkAnnotation && linkAnnotationModule.linkAnnotation.length > 0 && linkAnnotationModule.linkPage.length > 0) {\n            linkAnnotationModule.renderDocumentLink(linkAnnotationModule.linkAnnotation, linkAnnotationModule.linkPage, linkAnnotationModule.annotationY, proxy.currentPageNumber - 1);\n          }\n        }\n      }\n    }\n  };\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.tileRenderPage = function (data, pageIndex) {\n    var _this = this;\n    var proxy = null;\n    proxy = this;\n    if (data && this.pageSize[parseInt(pageIndex.toString(), 10)]) {\n      var pageWidth = this.getPageWidth(pageIndex);\n      var pageHeight = this.getPageHeight(pageIndex);\n      // eslint-disable-next-line max-len\n      var canvas_1 = this.getElement('_pageCanvas_' + pageIndex);\n      var pageDiv_1 = this.getElement('_pageDiv_' + pageIndex);\n      var tileX = data.tileX ? data.tileX : 0;\n      var tileY = data.tileY ? data.tileY : 0;\n      if (pageDiv_1) {\n        pageDiv_1.style.width = pageWidth + 'px';\n        pageDiv_1.style.height = pageHeight + 'px';\n        pageDiv_1.style.background = '#fff';\n        pageDiv_1.style.top = this.getPageTop(pageIndex) + 'px';\n        if (this.pdfViewer.enableRtl) {\n          pageDiv_1.style.right = this.updateLeftPosition(pageIndex) + 'px';\n        } else {\n          pageDiv_1.style.left = this.updateLeftPosition(pageIndex) + 'px';\n        }\n      }\n      if (canvas_1) {\n        canvas_1.style.background = '#fff';\n      }\n      var imageData = data['image'];\n      var zoomFactor = this.retrieveCurrentZoomFactor();\n      var oldCanvases = document.querySelectorAll('img[id*=\"' + proxy.pdfViewer.element.id + '_tileimg_' + pageIndex + '_\"]');\n      if (oldCanvases.length === 0) {\n        this.isReRenderRequired = true;\n      }\n      if (this.isReRenderRequired) {\n        if (data.zoomFactor) {\n          zoomFactor = data.zoomFactor;\n        }\n        var currentString = this.documentId + '_' + pageIndex + '_' + zoomFactor + '_' + data.tileX + '_' + data.tileY;\n        // eslint-disable-next-line max-len\n        this.tilerequestLists.push(currentString);\n        // eslint-disable-next-line\n        var matrix = data['transformationMatrix'];\n        // eslint-disable-next-line\n        var width = data['width'];\n        if (imageData) {\n          var tileX_1 = data.tileX ? data.tileX : 0;\n          var tileY_1 = data.tileY ? data.tileY : 0;\n          var scaleFactor = !isNullOrUndefined(data.scaleFactor) ? data.scaleFactor : 1.5;\n          var image_1 = document.getElementById(this.pdfViewer.element.id + '_tileimg_' + pageIndex + '_' + this.getZoomFactor() + '_' + tileX_1 + '_' + tileY_1);\n          if (!image_1) {\n            image_1 = new Image();\n            image_1.id = this.pdfViewer.element.id + '_tileimg_' + pageIndex + '_' + this.getZoomFactor() + '_' + tileX_1 + '_' + tileY_1;\n            if (pageDiv_1) {\n              pageDiv_1.append(image_1);\n            }\n          }\n          image_1.src = imageData;\n          image_1.setAttribute('alt', '');\n          image_1.onload = function () {\n            proxy.showPageLoadingIndicator(pageIndex, false);\n            proxy.tileRenderCount = proxy.tileRenderCount + 1;\n            if (tileX_1 === 0 && tileY_1 === 0) {\n              if (pageIndex === 0 && _this.isDocumentLoaded) {\n                proxy.renderPDFInformations();\n                proxy.isInitialLoaded = true;\n                // eslint-disable-next-line\n                var pageData = window.sessionStorage.getItem(proxy.documentId + '_pagedata');\n                if (proxy.pageCount <= 100) {\n                  proxy.pdfViewer.fireDocumentLoad(pageData);\n                }\n                proxy.isDocumentLoaded = false;\n                if (proxy.pdfViewer.textSearch && proxy.pdfViewer.isExtractText) {\n                  proxy.pdfViewer.textSearchModule.getPDFDocumentTexts();\n                }\n              }\n            }\n            if (proxy.tileRenderCount === proxy.tileRequestCount) {\n              if (proxy.isTextMarkupAnnotationModule()) {\n                proxy.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotations(pageIndex);\n              }\n              if (canvas_1) {\n                canvas_1.style.display = 'none';\n                canvas_1.src = '#';\n              }\n              var oldPageDiv = document.querySelectorAll('img[id*=\"' + proxy.pdfViewer.element.id + '_oldCanvas\"]');\n              for (var i = 0; i < oldPageDiv.length; i++) {\n                pageDiv_1.removeChild(oldPageDiv[parseInt(i.toString(), 10)]);\n              }\n              proxy.isTileImageRendered = false;\n              proxy.tileRenderCount = 0;\n              if (proxy.pdfViewer.magnificationModule) {\n                proxy.pdfViewer.magnificationModule.rerenderCountIncrement();\n              }\n              proxy.isDrawnCompletely = true;\n            }\n            image_1.setAttribute('alt', 'Page ' + (pageIndex + 1));\n          };\n          var currentImageWidth = width * this.getZoomFactor() / zoomFactor / scaleFactor;\n          var matrixElements = matrix.Elements ? matrix.Elements : matrix.Values;\n          var currentImageTop = matrixElements[5] * this.getZoomFactor() / zoomFactor / scaleFactor;\n          var currentImageLeft = matrixElements[4] * this.getZoomFactor() / zoomFactor / scaleFactor;\n          image_1.width = currentImageWidth;\n          image_1.style.width = currentImageWidth + 'px';\n          image_1.style.top = currentImageTop + 'px';\n          image_1.style.left = currentImageLeft + 'px';\n          image_1.style.position = 'absolute';\n        }\n        if (tileX === 0 && tileY === 0) {\n          this.onPageRender(data, pageIndex, pageDiv_1);\n        }\n      } else {\n        var _loop_1 = function (l) {\n          var tileImgId = oldCanvases[parseInt(l.toString(), 10)].id.split('_');\n          var zoomFactor_1 = proxy.retrieveCurrentZoomFactor();\n          var tileData = void 0;\n          // eslint-disable-next-line\n          if (this_1.clientSideRendering) {\n            tileData = JSON.parse(proxy.getStoredTileImageDetails(pageIndex, parseFloat(tileImgId[tileImgId.length - 2]), parseFloat(tileImgId[tileImgId.length - 1]), zoomFactor_1));\n          } else {\n            tileData = JSON.parse(proxy.getWindowSessionStorageTile(pageIndex, parseFloat(tileImgId[tileImgId.length - 2]), parseFloat(tileImgId[tileImgId.length - 1]), zoomFactor_1));\n          }\n          if (tileData && tileData.zoomFactor) {\n            zoomFactor_1 = tileData.zoomFactor;\n          }\n          if (parseFloat(tileImgId[tileImgId.length - 4]) === pageIndex) {\n            var node_1 = oldCanvases[parseInt(l.toString(), 10)];\n            // Make sure it's really an Element\n            if (node_1.nodeType == Node.ELEMENT_NODE) {\n              node_1.onload = function () {\n                proxy.showPageLoadingIndicator(pageIndex, false);\n                proxy.tileRenderCount = proxy.tileRenderCount + 1;\n                if (tileX_2 === 0 && tileY_2 === 0) {\n                  if (pageIndex === 0 && _this.isDocumentLoaded) {\n                    _this.renderPDFInformations();\n                    _this.isInitialLoaded = true;\n                    // eslint-disable-next-line\n                    var pageData = window.sessionStorage.getItem(proxy.documentId + '_pagedata');\n                    if (proxy.pageCount <= 100) {\n                      proxy.pdfViewer.fireDocumentLoad(pageData);\n                    }\n                    proxy.isDocumentLoaded = false;\n                    if (proxy.pdfViewer.textSearch && proxy.pdfViewer.isExtractText) {\n                      proxy.pdfViewer.textSearchModule.getPDFDocumentTexts();\n                    }\n                  }\n                }\n                if (proxy.tileRenderCount === proxy.tileRequestCount) {\n                  canvas_1.style.display = 'none';\n                  canvas_1.src = '#';\n                  if (proxy.isTextMarkupAnnotationModule()) {\n                    proxy.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotations(pageIndex);\n                  }\n                  var oldPageDiv = document.querySelectorAll('img[id*=\"' + proxy.pdfViewer.element.id + '_oldCanvas\"]');\n                  for (var i = 0; i < oldPageDiv.length; i++) {\n                    pageDiv_1.removeChild(oldPageDiv[parseInt(i.toString(), 10)]);\n                  }\n                  proxy.isTileImageRendered = false;\n                  proxy.tileRenderCount = 0;\n                  if (proxy.pdfViewer.magnificationModule) {\n                    proxy.pdfViewer.magnificationModule.rerenderCountIncrement();\n                  }\n                  proxy.isDrawnCompletely = true;\n                }\n                node_1.setAttribute('alt', 'Page ' + (pageIndex + 1));\n              };\n              if (tileData) node_1.src = tileData.image;\n            }\n          }\n        };\n        var this_1 = this;\n        for (var l = 0; l < oldCanvases.length; l++) {\n          _loop_1(l);\n        }\n        var tileX_2 = data.tileX ? data.tileX : 0;\n        var tileY_2 = data.tileY ? data.tileY : 0;\n        if (tileX_2 === 0 && tileY_2 === 0) {\n          this.onPageRender(data, pageIndex, pageDiv_1);\n        }\n      }\n    }\n  };\n  PdfViewerBase.prototype.renderTileCanvas = function (pageWidth, pageHeight, pageIndex, pageDiv, zoomFactor, scaleFactor) {\n    var pageCanvas = this.getElement('_pageTileCanvas_' + pageIndex);\n    if (!pageCanvas) {\n      pageCanvas = createElement('canvas', {\n        id: this.pdfViewer.element.id + '_pageTileCanvas_' + pageIndex,\n        className: 'e-pv-pageTile-canvas'\n      });\n      pageCanvas.style.width = pageWidth + 'px';\n      pageCanvas.style.height = pageHeight + 'px';\n      pageCanvas.style.display = 'none';\n      pageCanvas.style.backgroundColor = '#fff';\n      if (this.isMixedSizeDocument && this.highestWidth > 0) {\n        pageCanvas.style.marginLeft = 'auto';\n        pageCanvas.style.marginRight = 'auto';\n      }\n      pageDiv.appendChild(pageCanvas);\n    }\n    return pageCanvas;\n  };\n  PdfViewerBase.prototype.calculateImageWidth = function (pageWidth, zoomFactor, scaleFactor, imageWidth) {\n    var width = pageWidth / this.getZoomFactor() * zoomFactor * scaleFactor;\n    // eslint-disable-next-line\n    if (parseInt(imageWidth.toString()) === parseInt(width.toString())) {\n      imageWidth = width;\n    }\n    imageWidth = imageWidth * this.getZoomFactor() / zoomFactor;\n    return imageWidth;\n  };\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.renderPage = function (data, pageIndex, imageSource) {\n    var _this = this;\n    var proxy = this;\n    if (data && this.pageSize[parseInt(pageIndex.toString(), 10)]) {\n      var pageWidth = this.getPageWidth(pageIndex);\n      var pageHeight = this.getPageHeight(pageIndex);\n      // eslint-disable-next-line max-len\n      var canvas_2 = this.getElement('_pageCanvas_' + pageIndex);\n      var pageDiv_2 = this.getElement('_pageDiv_' + pageIndex);\n      if (pageDiv_2) {\n        pageDiv_2.style.width = pageWidth + 'px';\n        pageDiv_2.style.height = pageHeight + 'px';\n        pageDiv_2.style.top = this.getPageTop(pageIndex) + 'px';\n        if (this.pdfViewer.enableRtl) {\n          pageDiv_2.style.right = this.updateLeftPosition(pageIndex) + 'px';\n        } else {\n          pageDiv_2.style.left = this.updateLeftPosition(pageIndex) + 'px';\n        }\n      }\n      if (canvas_2) {\n        canvas_2.style.background = '#fff';\n        canvas_2.style.display = 'block';\n        canvas_2.style.width = pageWidth + 'px';\n        canvas_2.style.height = pageHeight + 'px';\n        if (pageWidth < parseFloat(pageDiv_2.style.width)) {\n          pageDiv_2.style.boxShadow = 'none';\n        }\n        // eslint-disable-next-line\n        var imageData = this.renderThumbnailImages && !this.clientSideRendering ? imageSource : data['image'];\n        if (imageData) {\n          canvas_2.onload = function () {\n            var oldCanvases = document.querySelectorAll('img[id*=\"' + proxy.pdfViewer.element.id + '_tileimg_\"]');\n            var pageCanvas = proxy.getElement('_pageDiv_' + pageIndex);\n            for (var i = 0; i < oldCanvases.length; i++) {\n              var tileImgId = oldCanvases[parseInt(i.toString(), 10)].id.split('_');\n              if (parseFloat(tileImgId[tileImgId.length - 3]) != proxy.getZoomFactor()) {\n                if (pageIndex !== parseInt(tileImgId[tileImgId.length - 4], 10)) {\n                  proxy.getElement('_pageDiv_' + tileImgId[tileImgId.length - 4]).removeChild(oldCanvases[parseInt(i.toString(), 10)]);\n                } else {\n                  pageCanvas.removeChild(oldCanvases[parseInt(i.toString(), 10)]);\n                }\n              }\n            }\n            var oldPageDiv = document.querySelectorAll('img[id*=\"' + proxy.pdfViewer.element.id + '_oldCanvas\"]');\n            for (var i = 0; i < oldPageDiv.length; i++) {\n              pageDiv_2.removeChild(oldPageDiv[parseInt(i.toString(), 10)]);\n            }\n            if (_this.pdfViewer.magnificationModule) {\n              _this.pdfViewer.magnificationModule.rerenderCountIncrement();\n            }\n            _this.showPageLoadingIndicator(pageIndex, false);\n            if (pageIndex === 0 && _this.isDocumentLoaded) {\n              _this.renderPDFInformations();\n              _this.isInitialLoaded = true;\n              // eslint-disable-next-line\n              var pageData = window.sessionStorage.getItem(_this.documentId + '_pagedata');\n              if (_this.pageCount <= 100) {\n                _this.pdfViewer.fireDocumentLoad(pageData);\n              }\n              _this.isDocumentLoaded = false;\n              if (_this.pdfViewer.textSearch && _this.pdfViewer.isExtractText) {\n                _this.pdfViewer.textSearchModule.getPDFDocumentTexts();\n              }\n            }\n            if (_this.pdfViewer.magnificationModule) {\n              _this.pdfViewer.magnificationModule.pushImageObjects(canvas_2);\n            }\n            canvas_2.setAttribute('alt', 'Page ' + (pageIndex + 1));\n          };\n          canvas_2.src = imageData;\n        }\n        this.onPageRender(data, pageIndex, pageDiv_2);\n      }\n    }\n  };\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.onPageRender = function (data, pageIndex, pageDiv) {\n    // eslint-disable-next-line\n    var aElement = pageDiv && pageDiv.getElementsByTagName('a');\n    var isAnnotationRendered = false;\n    if (aElement && aElement.length !== 0) {\n      for (var index = aElement.length - 1; index >= 0; index--) {\n        aElement[parseInt(index.toString(), 10)].parentNode.removeChild(aElement[parseInt(index.toString(), 10)]);\n      }\n    }\n    if (this.pdfViewer.textSearchModule || this.pdfViewer.textSelectionModule || this.pdfViewer.annotationModule) {\n      this.renderTextContent(data, pageIndex);\n    }\n    if (this.pdfViewer.formFieldsModule && !(this.pdfViewer.magnificationModule ? this.pdfViewer.magnificationModule.isFormFieldPageZoomed : false)) {\n      this.pdfViewer.formFieldsModule.renderFormFields(pageIndex, false);\n    }\n    if (this.pdfViewer.accessibilityTagsModule && this.pdfViewer.enableAccessibilityTags && this.isTaggedPdf) {\n      if (this.accessibilityTagsCollection[pageIndex.toString()]) {\n        this.renderAccessibilityTags(pageIndex, this.accessibilityTagsCollection[pageIndex.toString()]);\n      } else if (this.pageRequestListForAccessibilityTags.indexOf(pageIndex) === -1) {\n        this.createRequestForAccessibilityTags(pageIndex);\n      }\n    }\n    if (this.pdfViewer.formDesignerModule && !this.isDocumentLoaded) {\n      this.pdfViewer.formDesignerModule.rerenderFormFields(pageIndex);\n    }\n    if (this.pdfViewer.formFieldsModule && !this.isDocumentLoaded && !this.pdfViewer.formDesignerModule) {\n      this.pdfViewer.formFieldsModule.renderFormFields(pageIndex, false);\n    }\n    if (this.pdfViewer.formDesignerModule && this.isDocumentLoaded && (this.pdfViewer.magnificationModule ? this.pdfViewer.magnificationModule.isFormFieldPageZoomed : true) && this.pdfViewer.formFieldsModule) {\n      this.pdfViewer.formFieldsModule.renderFormFields(pageIndex, false);\n      if (this.pdfViewer.magnificationModule) {\n        this.pdfViewer.magnificationModule.isFormFieldPageZoomed = false;\n      }\n    }\n    if (this.pdfViewer.enableHyperlink && this.pdfViewer.linkAnnotationModule) {\n      this.pdfViewer.linkAnnotationModule.renderHyperlinkContent(data, pageIndex);\n    }\n    if (this.pdfViewer.textSelectionModule && !this.isTextSelectionDisabled) {\n      this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(pageIndex);\n    }\n    if (this.documentAnnotationCollections) {\n      var isAnnotationAdded = false;\n      for (var i = 0; i < this.annotationRenderredList.length; i++) {\n        if (this.annotationRenderredList[parseInt(i.toString(), 10)] === pageIndex) {\n          isAnnotationAdded = true;\n        }\n      }\n      // eslint-disable-next-line\n      var pageAnnotations = this.documentAnnotationCollections[pageIndex];\n      if (pageAnnotations && !isAnnotationAdded) {\n        data.shapeAnnotation = pageAnnotations.shapeAnnotation;\n        data.measureShapeAnnotation = pageAnnotations.measureShapeAnnotation;\n        data.textMarkupAnnotation = pageAnnotations.textMarkupAnnotation;\n        data.freeTextAnnotation = pageAnnotations.freeTextAnnotation;\n        data.stampAnnotations = pageAnnotations.stampAnnotations;\n        data.stickyNotesAnnotation = pageAnnotations.stickyNotesAnnotation;\n        data.signatureAnnotation = pageAnnotations.signatureAnnotation;\n        data.signatureInkAnnotation = pageAnnotations.signatureInkAnnotation;\n        this.annotationRenderredList.push(pageIndex);\n      }\n    }\n    if (this.isImportAction) {\n      // eslint-disable-next-line\n      var pageAnnotations = this.checkDocumentCollectionData(pageIndex);\n      this.drawPageAnnotations(this.importedAnnotation[parseInt(pageIndex.toString(), 10)], pageIndex);\n      if (pageAnnotations) {\n        data.shapeAnnotation = pageAnnotations.shapeAnnotation;\n        data.measureShapeAnnotation = pageAnnotations.measureShapeAnnotation;\n        data.textMarkupAnnotation = pageAnnotations.textMarkupAnnotation;\n        data.freeTextAnnotation = pageAnnotations.freeTextAnnotation;\n        data.stampAnnotations = pageAnnotations.stampAnnotations;\n        data.stickyNotesAnnotation = pageAnnotations.stickyNotesAnnotation;\n        data.signatureInkAnnotation = pageAnnotations.signatureInkAnnotation;\n        isAnnotationRendered = true;\n      }\n    }\n    if (!this.isImportAction) {\n      if (this.pdfViewer.annotationModule && (this.isTextMarkupAnnotationModule() || this.isShapeBasedAnnotationsEnabled())) {\n        if (this.isStampAnnotationModule()) {\n          // eslint-disable-next-line\n          var stampData = data['stampAnnotations'];\n          if (isAnnotationRendered) {\n            // eslint-disable-next-line max-len\n            this.pdfViewer.annotationModule.stampAnnotationModule.renderStampAnnotations(stampData, pageIndex, null, true);\n          } else {\n            // eslint-disable-next-line max-len\n            this.pdfViewer.annotationModule.stampAnnotationModule.renderStampAnnotations(stampData, pageIndex);\n          }\n        }\n        if (isAnnotationRendered) {\n          // eslint-disable-next-line max-len\n          this.pdfViewer.annotationModule.renderAnnotations(pageIndex, data.shapeAnnotation, data.measureShapeAnnotation, data.textMarkupAnnotation, null, true);\n        } else {\n          // eslint-disable-next-line max-len\n          this.pdfViewer.annotationModule.renderAnnotations(pageIndex, data.shapeAnnotation, data.measureShapeAnnotation, data.textMarkupAnnotation);\n        }\n        this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderStickyNotesAnnotations(data.stickyNotesAnnotation, pageIndex);\n      }\n      if (this.isFreeTextAnnotationModule() && data.freeTextAnnotation) {\n        if (isAnnotationRendered) {\n          // eslint-disable-next-line max-len\n          this.pdfViewer.annotationModule.freeTextAnnotationModule.renderFreeTextAnnotations(data.freeTextAnnotation, pageIndex);\n        } else {\n          this.pdfViewer.annotationModule.freeTextAnnotationModule.renderFreeTextAnnotations(data.freeTextAnnotation, pageIndex);\n        }\n      }\n      if (this.isInkAnnotationModule() && data && data.signatureInkAnnotation) {\n        // eslint-disable-next-line max-len\n        this.pdfViewer.annotationModule.inkAnnotationModule.renderExistingInkSignature(data.signatureInkAnnotation, pageIndex, isAnnotationRendered);\n      }\n    }\n    if (this.pdfViewer.formDesignerModule && !this.pdfViewer.annotationModule) {\n      this.pdfViewer.formDesignerModule.updateCanvas(pageIndex);\n    }\n    if (this.pdfViewer.textSearchModule) {\n      if (this.pdfViewer.textSearchModule.isTextSearch) {\n        this.pdfViewer.textSearchModule.highlightOtherOccurrences(pageIndex);\n      }\n    }\n    if (this.isShapeBasedAnnotationsEnabled()) {\n      var canvas1 = this.getElement('_annotationCanvas_' + pageIndex);\n      var commonStyle = 'position:absolute;top:0px;left:0px;overflow:hidden;pointer-events:none;z-index:1000';\n      if (canvas1) {\n        var bounds = canvas1.getBoundingClientRect();\n        renderAdornerLayer(bounds, commonStyle, canvas1, pageIndex, this.pdfViewer);\n        this.pdfViewer.renderSelector(pageIndex, this.pdfViewer.annotationSelectorSettings);\n      }\n    }\n    if (this.pdfViewer.annotationModule) {\n      this.pdfViewer.annotationModule.stickyNotesAnnotationModule.selectCommentsAnnotation(pageIndex);\n    }\n    if (data && data.signatureAnnotation && this.signatureModule) {\n      this.signatureModule.renderExistingSignature(data.signatureAnnotation, pageIndex, false);\n    }\n    // eslint-disable-next-line max-len\n    if (this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.isAnnotationSelected && this.pdfViewer.annotationModule.annotationPageIndex === pageIndex) {\n      this.pdfViewer.annotationModule.selectAnnotationFromCodeBehind();\n    }\n    this.isLoadedFormFieldAdded = false;\n  };\n  /**\n   * @private\n   * @param {number} pageIndex - page index for rendering the annotation.\n   * @returns {void}\n   */\n  PdfViewerBase.prototype.renderAnnotations = function (pageIndex, annotationsCollection, isAddedProgrammatically) {\n    // eslint-disable-next-line\n    var data = {};\n    if (this.documentAnnotationCollections) {\n      var isAnnotationAdded = false;\n      for (var i = 0; i < this.annotationRenderredList.length; i++) {\n        if (this.annotationRenderredList[parseInt(i.toString(), 10)] === pageIndex) {\n          isAnnotationAdded = true;\n        }\n      }\n      // eslint-disable-next-line\n      var pageAnnotations = this.documentAnnotationCollections[pageIndex];\n      if (pageAnnotations && !isAnnotationAdded) {\n        data.shapeAnnotation = pageAnnotations.shapeAnnotation;\n        data.measureShapeAnnotation = pageAnnotations.measureShapeAnnotation;\n        data.textMarkupAnnotation = pageAnnotations.textMarkupAnnotation;\n        data.freeTextAnnotation = pageAnnotations.freeTextAnnotation;\n        data.stampAnnotations = pageAnnotations.stampAnnotations;\n        data.stickyNotesAnnotation = pageAnnotations.stickyNotesAnnotation;\n        data.signatureAnnotation = pageAnnotations.signatureAnnotation;\n        data.signatureInkAnnotation = pageAnnotations.signatureInkAnnotation;\n        this.annotationRenderredList.push(pageIndex);\n      }\n    }\n    if (this.isAnnotationCollectionRemoved) {\n      data.shapeAnnotation = [];\n      data.measureShapeAnnotation = [];\n      data.textMarkupAnnotation = [];\n      data.freeTextAnnotation = [];\n      data.stampAnnotations = [];\n      data.stickyNotesAnnotation = [];\n      data.signatureInkAnnotation = [];\n    }\n    if (this.isImportAction) {\n      var isAnnotationAdded = false;\n      for (var i = 0; i < this.annotationPageList.length; i++) {\n        if (this.annotationPageList[parseInt(i.toString(), 10)] === pageIndex) {\n          isAnnotationAdded = true;\n        }\n      }\n      if (!isAnnotationAdded) {\n        if (this.importedAnnotation) {\n          this.drawPageAnnotations(this.importedAnnotation, pageIndex, true);\n          this.annotationPageList[this.annotationPageList.length] = pageIndex;\n        }\n      }\n    }\n    var annotData = [];\n    var collection = annotationsCollection.annotationOrder;\n    if (!isNullOrUndefined(collection)) {\n      for (var l = 0; l < collection.length; l++) {\n        var type = collection[parseInt(l.toString(), 10)].AnnotType ? collection[parseInt(l.toString(), 10)].AnnotType : collection[parseInt(l.toString(), 10)].AnnotationType;\n        annotData.push(collection[parseInt(l.toString(), 10)]);\n        switch (type) {\n          case \"textMarkup\":\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.renderTextMarkupAnnotationsInPage(annotData, pageIndex, null, true);\n            break;\n          case \"shape_measure\":\n            this.pdfViewer.annotationModule.renderAnnotations(pageIndex, null, annotData, null, null, null, true);\n            break;\n          case \"shape\":\n            this.pdfViewer.annotationModule.renderAnnotations(pageIndex, annotData, null, null, null, null, true);\n            break;\n          case \"sticky\":\n            this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderStickyNotesAnnotations(annotData, pageIndex);\n            break;\n          case \"stamp\":\n            this.pdfViewer.annotationModule.stampAnnotationModule.renderStampAnnotations(annotData, pageIndex, null, null, true);\n            break;\n          case \"Ink\":\n            this.pdfViewer.annotationModule.inkAnnotationModule.renderExistingInkSignature(annotData, pageIndex, false, true);\n            break;\n          case \"Text Box\":\n            this.pdfViewer.annotationModule.freeTextAnnotationModule.renderFreeTextAnnotations(annotData, pageIndex, undefined, true);\n            break;\n          default:\n            break;\n        }\n        annotData = [];\n      }\n    }\n    if (data && data.signatureAnnotation) {\n      this.signatureModule.renderExistingSignature(data.signatureAnnotation, pageIndex, false);\n    }\n    if (this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.isAnnotationSelected) {\n      this.pdfViewer.annotationModule.selectAnnotationFromCodeBehind();\n    }\n  };\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.renderTextContent = function (data, pageIndex) {\n    // eslint-disable-next-line\n    var texts = data['textContent'];\n    // eslint-disable-next-line\n    var bounds = data['textBounds'];\n    // eslint-disable-next-line\n    var rotation = data['rotation'];\n    var rtldoc = data.documentTextCollection ? this.checkIsRtlText(data.documentTextCollection[0][parseInt(pageIndex.toString(), 10)].PageText) : this.checkIsRtlText(data.pageText);\n    var textLayer = this.getElement('_textLayer_' + pageIndex);\n    if (!textLayer) {\n      // eslint-disable-next-line max-len\n      textLayer = this.textLayer.addTextLayer(pageIndex, this.getPageWidth(pageIndex), this.getPageHeight(pageIndex), this.getElement('_pageDiv_' + pageIndex));\n    }\n    if (textLayer && texts && bounds) {\n      textLayer.style.display = 'block';\n      if (textLayer.childNodes.length === 0) {\n        this.textLayer.renderTextContents(pageIndex, texts, bounds, rotation, rtldoc);\n      } else {\n        this.textLayer.resizeTextContents(pageIndex, texts, bounds, rotation, true);\n      }\n    }\n  };\n  PdfViewerBase.prototype.renderAccessibilityTags = function (pageIndex, taggedTextResponse) {\n    this.accessibilityTags.renderAccessibilityTags(pageIndex, taggedTextResponse);\n  };\n  PdfViewerBase.prototype.returnPageListForAccessibilityTags = function (pageIndex) {\n    var pageList = [];\n    if (!this.enableAccessibilityMultiPageRequest) {\n      return [pageIndex];\n    }\n    var minPage = pageIndex - 2 > 0 ? pageIndex - 2 : 0;\n    var maxPage = pageIndex + 4 < this.pageCount - 1 ? pageIndex + 4 : this.pageCount - 1;\n    for (var i = minPage; i <= maxPage; i++) {\n      if (this.accessibilityTagsCollection[parseInt(i.toString(), 10)] === undefined) {\n        pageList.push(parseInt(i.toString(), 10));\n      } else {\n        maxPage = maxPage + 1 < this.pageCount - 1 ? maxPage + 1 : this.pageCount - 1;\n      }\n    }\n    this.pageRequestListForAccessibilityTags = pageList;\n    return pageList;\n  };\n  PdfViewerBase.prototype.createRequestForAccessibilityTags = function (pageIndex) {\n    var jsonObject;\n    var proxy = this;\n    jsonObject = {\n      action: 'RenderTaggedContent',\n      elementId: this.pdfViewer.element.id,\n      hashId: this.hashId,\n      uniqueId: this.documentId,\n      pageList: JSON.stringify(this.returnPageListForAccessibilityTags(pageIndex))\n    };\n    if (this.jsonDocumentId) {\n      jsonObject.document = this.jsonDocumentId;\n    }\n    var url = this.pdfViewer.serviceUrl + '/' + \"RenderTaggedContent\";\n    this.accessibilityTagsHandler = new AjaxHandler(this.pdfViewer);\n    this.accessibilityTagsHandler.url = url;\n    this.accessibilityTagsHandler.mode = true;\n    this.accessibilityTagsHandler.responseType = 'text';\n    this.accessibilityTagsHandler.send(jsonObject);\n    this.accessibilityTagsHandler.onSuccess = function (result) {\n      var data = JSON.parse(result.data);\n      var pageData;\n      for (var i = 0; i < data.length; i++) {\n        pageData = data[parseInt(i.toString(), 10)];\n        proxy.accessibilityTagsCollection[pageData[0]] = pageData[1];\n      }\n      proxy.pageRequestListForAccessibilityTags = [];\n      if (proxy.accessibilityTagsCollection[parseInt(pageIndex.toString(), 10)]) {\n        proxy.renderAccessibilityTags(pageIndex, proxy.accessibilityTagsCollection[parseInt(pageIndex.toString(), 10)]);\n      }\n      if (proxy.accessibilityTagsCollection[pageIndex - 1 <= 0 ? parseInt((pageIndex - 1).toString(), 10) : 0]) {\n        proxy.renderAccessibilityTags(pageIndex - 1 <= 0 ? pageIndex - 1 : 0, proxy.accessibilityTagsCollection[pageIndex - 1 <= 0 ? parseInt((pageIndex - 1).toString(), 10) : 0]);\n      }\n    };\n  };\n  PdfViewerBase.prototype.renderPageContainer = function (pageNumber, pageWidth, pageHeight, topValue) {\n    // eslint-disable-next-line max-len\n    var pageDiv = createElement('div', {\n      id: this.pdfViewer.element.id + '_pageDiv_' + pageNumber,\n      className: 'e-pv-page-div',\n      attrs: {\n        'tabindex': '-1'\n      }\n    });\n    pageDiv.style.width = pageWidth + 'px';\n    pageDiv.style.height = pageHeight + 'px';\n    if (this.pdfViewer.enableRtl) {\n      pageDiv.style.right = this.updateLeftPosition(pageNumber) + 'px';\n    } else {\n      pageDiv.style.left = this.updateLeftPosition(pageNumber) + 'px';\n    }\n    pageDiv.style.top = topValue + 'px';\n    this.pageContainer.appendChild(pageDiv);\n    this.pageContainer.style.width = this.isMixedSizeDocument && this.highestWidth * this.getZoomFactor() > this.viewerContainer.clientWidth ? this.highestWidth * this.getZoomFactor() + 'px' : this.viewerContainer.clientWidth + 'px';\n    this.createWaitingPopup(pageNumber);\n    this.orderPageDivElements(pageDiv, pageNumber);\n    this.renderPageCanvas(pageDiv, pageWidth, pageHeight, pageNumber, 'block');\n    if (Browser.isDevice && !this.pdfViewer.enableDesktopMode && !this.isThumb) {\n      this.updateMobileScrollerPosition();\n    }\n  };\n  PdfViewerBase.prototype.renderPDFInformations = function () {\n    if (this.pdfViewer.thumbnailViewModule && (!Browser.isDevice || this.pdfViewer.enableDesktopMode)) {\n      this.pdfViewer.thumbnailViewModule.createRequestForThumbnails();\n    }\n    if (this.pdfViewer.bookmarkViewModule) {\n      this.pdfViewer.bookmarkViewModule.createRequestForBookmarks();\n    }\n    if (this.pdfViewer.annotationModule) {\n      if (this.pdfViewer.toolbarModule) {\n        this.pdfViewer.annotationModule.stickyNotesAnnotationModule.initializeAcccordionContainer();\n      }\n      if (this.pdfViewer.isCommandPanelOpen) {\n        this.pdfViewer.annotation.showCommentsPanel();\n      }\n      this.pdfViewer.annotationModule.stickyNotesAnnotationModule.createRequestForComments();\n    }\n  };\n  PdfViewerBase.prototype.orderPageDivElements = function (pageDiv, pageIndex) {\n    var nextElement = this.getElement('_pageDiv_' + (pageIndex + 1));\n    if (nextElement) {\n      this.pageContainer.insertBefore(pageDiv, nextElement);\n    } else {\n      this.pageContainer.appendChild(pageDiv);\n    }\n  };\n  /**\n   * @param pageDiv\n   * @param pageWidth\n   * @param pageHeight\n   * @param pageNumber\n   * @param displayMode\n   * @param pageDiv\n   * @param pageWidth\n   * @param pageHeight\n   * @param pageNumber\n   * @param displayMode\n   * @param pageDiv\n   * @param pageWidth\n   * @param pageHeight\n   * @param pageNumber\n   * @param displayMode\n   * @private\n   */\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.renderPageCanvas = function (pageDiv, pageWidth, pageHeight, pageNumber, displayMode) {\n    if (pageDiv) {\n      // eslint-disable-next-line\n      var pageCanvas = this.getElement('_pageCanvas_' + pageNumber);\n      if (pageCanvas) {\n        pageCanvas.width = pageWidth;\n        pageCanvas.height = pageHeight;\n        pageCanvas.style.display = 'block';\n        if (this.isMixedSizeDocument && this.highestWidth > 0) {\n          pageCanvas.style.marginLeft = 'auto';\n          pageCanvas.style.marginRight = 'auto';\n        }\n      } else {\n        // eslint-disable-next-line max-len\n        pageCanvas = createElement('img', {\n          id: this.pdfViewer.element.id + '_pageCanvas_' + pageNumber,\n          className: 'e-pv-page-canvas'\n        });\n        pageCanvas.width = pageWidth;\n        pageCanvas.height = pageHeight;\n        pageCanvas.style.display = displayMode;\n        if (this.isMixedSizeDocument && this.highestWidth > 0) {\n          pageCanvas.style.marginLeft = 'auto';\n          pageCanvas.style.marginRight = 'auto';\n        }\n        pageDiv.appendChild(pageCanvas);\n      }\n      pageCanvas.setAttribute('alt', '');\n      if (this.pdfViewer.annotationModule && this.pdfViewer.annotation) {\n        // eslint-disable-next-line max-len\n        this.pdfViewer.annotationModule.createAnnotationLayer(pageDiv, pageWidth, pageHeight, pageNumber, displayMode);\n      }\n      if (this.pdfViewer.textSearchModule || this.pdfViewer.textSelectionModule || this.pdfViewer.formFieldsModule || this.pdfViewer.annotationModule) {\n        this.textLayer.addTextLayer(pageNumber, pageWidth, pageHeight, pageDiv);\n      }\n      if (this.pdfViewer.formDesignerModule && !this.pdfViewer.annotationModule) {\n        this.pdfViewer.formDesignerModule.createAnnotationLayer(pageDiv, pageWidth, pageHeight, pageNumber, displayMode);\n      }\n      return pageCanvas;\n    }\n  };\n  /**\n   * @private\n   * @param {any} pageCanvas - The canvas for rendering the page.\n   * @param {any} pageNumber - The page number for adding styles.\n   * @returns {void}\n   */\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.applyElementStyles = function (pageCanvas, pageNumber) {\n    if (this.isMixedSizeDocument && pageCanvas) {\n      var canvasElement = document.getElementById(this.pdfViewer.element.id + '_pageCanvas_' + pageNumber);\n      var oldCanvas = document.getElementById(this.pdfViewer.element.id + '_oldCanvas_' + pageNumber);\n      if (pageCanvas && canvasElement && canvasElement.offsetLeft > 0) {\n        pageCanvas.style.marginLeft = canvasElement.offsetLeft + 'px';\n        pageCanvas.style.marginRight = canvasElement.offsetLeft + 'px';\n      } else if (oldCanvas && oldCanvas.offsetLeft > 0) {\n        pageCanvas.style.marginLeft = oldCanvas.offsetLeft + 'px';\n        pageCanvas.style.marginRight = oldCanvas.offsetLeft + 'px';\n      } else {\n        pageCanvas.style.marginLeft = 'auto';\n        pageCanvas.style.marginRight = 'auto';\n      }\n    }\n  };\n  /**\n   * @private\n   * @param  {number} pageIndex - page index for updating positon.\n   * @returns {void}\n   */\n  PdfViewerBase.prototype.updateLeftPosition = function (pageIndex) {\n    var leftPosition;\n    var width = this.viewerContainer.getBoundingClientRect().width;\n    if (width === 0) {\n      width = parseFloat(this.pdfViewer.width.toString());\n    }\n    // eslint-disable-next-line max-len\n    if (this.isMixedSizeDocument && this.highestWidth > 0) {\n      if (this.viewerContainer.clientWidth > 0) {\n        leftPosition = (this.viewerContainer.clientWidth - this.highestWidth * this.getZoomFactor()) / 2;\n      } else {\n        leftPosition = (width - this.highestWidth * this.getZoomFactor()) / 2;\n      }\n      var pageDiff = (this.highestWidth * this.getZoomFactor() - this.getPageWidth(pageIndex)) / 2;\n      if (leftPosition > 0) {\n        leftPosition += pageDiff;\n      } else {\n        leftPosition = pageDiff;\n      }\n      this.pageContainer.style.width = this.highestWidth * this.getZoomFactor() > this.viewerContainer.clientWidth ? this.highestWidth * this.getZoomFactor() + 'px' : this.viewerContainer.clientWidth + 'px';\n    } else {\n      if (this.viewerContainer.clientWidth > 0) {\n        leftPosition = (this.viewerContainer.clientWidth - this.getPageWidth(pageIndex)) / 2;\n      } else {\n        leftPosition = (width - this.getPageWidth(pageIndex)) / 2;\n      }\n    }\n    var isLandscape = false;\n    if (this.pageSize[parseInt(pageIndex.toString(), 10)].width > this.pageSize[parseInt(pageIndex.toString(), 10)].height) {\n      isLandscape = true;\n    }\n    // eslint-disable-next-line max-len\n    if (leftPosition < 0 || (this.pdfViewer.magnificationModule ? this.pdfViewer.magnificationModule.isAutoZoom && this.getZoomFactor() < 1 || this.pdfViewer.magnificationModule.fitType === 'fitToWidth' : false)) {\n      var leftValue = leftPosition;\n      if (leftPosition > 0 && Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n        // eslint-disable-next-line\n        leftPosition = leftValue;\n      } else {\n        leftPosition = this.pageLeft;\n      }\n      if (leftPosition > 0 && this.isMixedSizeDocument) {\n        if (leftValue > 0) {\n          leftPosition = leftValue;\n        }\n      }\n    }\n    return leftPosition;\n  };\n  /**\n   * @private\n   * @param {number} pageIndex - The page index for positon.\n   * @returns {void}\n   */\n  PdfViewerBase.prototype.applyLeftPosition = function (pageIndex) {\n    var leftPosition;\n    if (this.pageSize[parseInt(pageIndex.toString(), 10)]) {\n      if (this.isMixedSizeDocument && this.highestWidth > 0) {\n        if (this.viewerContainer.clientWidth > 0) {\n          // eslint-disable-next-line max-len\n          leftPosition = (this.viewerContainer.clientWidth - this.highestWidth * this.getZoomFactor()) / 2;\n        } else {\n          // eslint-disable-next-line max-len\n          leftPosition = (this.viewerContainer.getBoundingClientRect().width - this.highestWidth * this.getZoomFactor()) / 2;\n        }\n        var pageDiff = (this.highestWidth * this.getZoomFactor() - this.getPageWidth(pageIndex)) / 2;\n        if (leftPosition > 0) {\n          leftPosition += pageDiff;\n        } else {\n          leftPosition = pageDiff;\n        }\n      } else {\n        if (this.viewerContainer.clientWidth > 0) {\n          // eslint-disable-next-line max-len\n          leftPosition = (this.viewerContainer.clientWidth - this.pageSize[parseInt(pageIndex.toString(), 10)].width * this.getZoomFactor()) / 2;\n        } else {\n          // eslint-disable-next-line max-len\n          leftPosition = (this.viewerContainer.getBoundingClientRect().width - this.pageSize[parseInt(pageIndex.toString(), 10)].width * this.getZoomFactor()) / 2;\n        }\n      }\n      var isLandscape = false;\n      if (this.pageSize[parseInt(pageIndex.toString(), 10)].width > this.pageSize[parseInt(pageIndex.toString(), 10)].height) {\n        isLandscape = true;\n      }\n      // eslint-disable-next-line max-len\n      if (leftPosition < 0 || (this.pdfViewer.magnificationModule ? this.pdfViewer.magnificationModule.isAutoZoom && this.getZoomFactor() < 1 || this.pdfViewer.magnificationModule.fitType === 'fitToWidth' : false)) {\n        var leftValue = leftPosition;\n        leftPosition = this.pageLeft;\n        // eslint-disable-next-line max-len\n        if (leftValue > 0 && this.isMixedSizeDocument) {\n          leftPosition = leftValue;\n        }\n      }\n      // eslint-disable-next-line max-len\n      var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + pageIndex);\n      if (pageDiv) {\n        if (!this.pdfViewer.enableRtl) {\n          pageDiv.style.left = leftPosition + 'px';\n        } else {\n          pageDiv.style.right = leftPosition + 'px';\n        }\n      }\n    }\n  };\n  PdfViewerBase.prototype.updatePageHeight = function (viewerHeight, toolbarHeight) {\n    return (viewerHeight - toolbarHeight) / viewerHeight * 100 + '%';\n  };\n  /**\n   * @private\n   * @param {Point} clientPoint - The user should provide a x, y coordinates.\n   * @returns {number}\n   */\n  PdfViewerBase.prototype.getPageNumberFromClientPoint = function (clientPoint) {\n    var pointX = clientPoint.x + this.viewerContainer.scrollLeft;\n    var pointY = clientPoint.y + this.viewerContainer.scrollTop;\n    for (var i = 0; i < this.pageCount; i++) {\n      var pageTop = this.pageSize[parseInt(i.toString(), 10)].height + this.viewerContainer.scrollTop;\n      if (pointY < this.pageSize[parseInt(i.toString(), 10)].top + pageTop) {\n        var viewerContainerBounds = this.getElement('_pageViewContainer').getBoundingClientRect();\n        var pageLeft = (viewerContainerBounds.width - this.pageSize[parseInt(i.toString(), 10)].width) / 2 + viewerContainerBounds.x;\n        var verticalScrollPosition = 0;\n        if (pointY > this.pageSize[parseInt(i.toString(), 10)].top) {\n          verticalScrollPosition = pointY - this.pageSize[parseInt(i.toString(), 10)].top;\n        } else {\n          verticalScrollPosition = this.pageSize[parseInt(i.toString(), 10)].top - pointY;\n        }\n        if (verticalScrollPosition > 0) {\n          if (this.pageSize[parseInt(i.toString(), 10)] != null) {\n            var pageHeight = this.getPageHeight(i);\n            if (pageLeft >= 0) {\n              if (pointX < pageLeft || pointX > pageLeft + this.pageSize[parseInt(i.toString(), 10)].width) {\n                return -1;\n              }\n            }\n            if (verticalScrollPosition <= this.getPageTop(i) + pageTop) {\n              return i + 1;\n            }\n          }\n        }\n      }\n    }\n    return -1;\n  };\n  /**\n   * @private\n   * @param {Point} clientPoint - The user should provide a x, y coordinates.\n   * @param {number} pageNumber - We need to pass pageNumber.\n   * @returns {Point}\n   */\n  PdfViewerBase.prototype.convertClientPointToPagePoint = function (clientPoint, pageNumber) {\n    if (pageNumber !== -1) {\n      var viewerContainerBounds = this.getElement('_pageViewContainer').getBoundingClientRect();\n      var pageLeft = (viewerContainerBounds.width - this.pageSize[pageNumber - 1].width) / 2 + viewerContainerBounds.x;\n      var pagePoint = {\n        x: clientPoint.x + this.viewerContainer.scrollLeft - pageLeft,\n        y: clientPoint.y + this.viewerContainer.scrollTop - this.pageSize[pageNumber - 1].top\n      };\n      return pagePoint;\n    }\n    return null;\n  };\n  /**\n   * @private\n   * @param {Point} pagePoint - The user needs to provide a page x, y position.\n   * @param {number} pageNumber - We need to pass pageNumber.\n   * @returns {Point}\n   */\n  PdfViewerBase.prototype.convertPagePointToClientPoint = function (pagePoint, pageNumber) {\n    if (pageNumber !== -1) {\n      var viewerContainerBounds = this.getElement('_pageViewContainer').getBoundingClientRect();\n      var pageLeft = (viewerContainerBounds.width - this.pageSize[pageNumber - 1].width) / 2 + viewerContainerBounds.x;\n      var clientPoint = {\n        x: pagePoint.x + pageLeft,\n        y: pagePoint.y + this.pageSize[pageNumber - 1].top\n      };\n      return clientPoint;\n    }\n    return null;\n  };\n  /**\n   * @private\n   * @param {Point} pagePoint - The user needs to provide a page x, y position.\n   * @param {number} pageNumber - We need to pass pageNumber.\n   * @returns {Point}\n   */\n  PdfViewerBase.prototype.convertPagePointToScrollingPoint = function (pagePoint, pageNumber) {\n    if (pageNumber !== -1) {\n      var scrollingPoint = {\n        x: pagePoint.x + this.viewerContainer.scrollLeft,\n        y: pagePoint.y + this.viewerContainer.scrollTop\n      };\n      return scrollingPoint;\n    }\n    return null;\n  };\n  PdfViewerBase.prototype.initiatePageViewScrollChanged = function () {\n    if (this.scrollHoldTimer) {\n      clearTimeout(this.scrollHoldTimer);\n    }\n    this.scrollHoldTimer = null;\n    if (this.scrollPosition * this.getZoomFactor() !== this.viewerContainer.scrollTop) {\n      this.scrollPosition = this.viewerContainer.scrollTop;\n      this.pageViewScrollChanged(this.currentPageNumber);\n    }\n  };\n  PdfViewerBase.prototype.renderCountIncrement = function () {\n    if (this.pdfViewer.magnificationModule) {\n      this.pdfViewer.magnificationModule.renderCountIncrement();\n    }\n  };\n  /**\n   * @private\n   * @param {number} currentPageNumber - The current pagenumber.\n   * @returns {void}\n   */\n  PdfViewerBase.prototype.pageViewScrollChanged = function (currentPageNumber) {\n    if (this.isPanMode) {\n      if (this.renderedPagesList.indexOf(currentPageNumber - 1) === -1) {\n        this.reRenderedCount = 0;\n      }\n    } else {\n      this.reRenderedCount = 0;\n    }\n    var currentPageIndex = currentPageNumber - 1;\n    if (currentPageNumber !== this.previousPage && currentPageNumber <= this.pageCount) {\n      var isSkip = false;\n      var storeData = this.clientSideRendering ? this.getLinkInformation(currentPageIndex) : this.getStoredData(currentPageIndex);\n      if (this.isDataExits && !this.getStoredData(currentPageIndex)) {\n        isSkip = true;\n      }\n      if (this.renderedPagesList.indexOf(currentPageIndex) === -1 && !this.getMagnified() && !isSkip) {\n        this.renderCountIncrement();\n        this.createRequestForRender(currentPageIndex);\n      }\n    }\n    if (!(this.getMagnified() || this.getPagesPinchZoomed())) {\n      var previous = currentPageIndex - 1;\n      var isSkip = false;\n      var canvas = this.getElement('_pageCanvas_' + previous);\n      var storeData = this.clientSideRendering ? this.getLinkInformation(previous) : this.getStoredData(previous);\n      if (this.isDataExits && !this.getStoredData(previous)) {\n        isSkip = true;\n      }\n      if (canvas !== null && !isSkip) {\n        if (this.renderedPagesList.indexOf(previous) === -1 && !this.getMagnified()) {\n          this.renderCountIncrement();\n          this.createRequestForRender(previous);\n        }\n      }\n      if (this.isMinimumZoom) {\n        this.renderPreviousPagesInScroll(previous);\n      }\n      var next = currentPageIndex + 1;\n      var pageHeight = 0;\n      if (next < this.pageCount) {\n        pageHeight = this.getPageHeight(next);\n        var allowPageRendering = this.isMinimumZoom ? this.isMinimumZoom : this.renderedPagesList.indexOf(next) === -1;\n        if (allowPageRendering && !this.getMagnified() && pageHeight) {\n          if (this.isDocumentLoaded && this.pdfViewer.initialRenderPages > this.pageRenderCount && this.getPageHeight(this.pdfViewer.initialRenderPages - 1) + this.getPageTop(this.pdfViewer.initialRenderPages - 1) > this.viewerContainer.clientHeight) {\n            var renderLimit = this.pdfViewer.initialRenderPages <= this.pageCount ? this.pdfViewer.initialRenderPages : this.pageCount;\n            for (var i = 1; i < renderLimit; i++) {\n              this.createRequestForRender(i);\n            }\n          } else {\n            this.createRequestForRender(next);\n            this.renderCountIncrement();\n            while (this.viewerContainer.clientHeight > pageHeight) {\n              next = next + 1;\n              if (next < this.pageCount) {\n                this.renderPageElement(next);\n                this.createRequestForRender(next);\n                pageHeight += this.getPageHeight(next);\n                this.renderCountIncrement();\n              } else {\n                break;\n              }\n            }\n          }\n        }\n      }\n    }\n  };\n  PdfViewerBase.prototype.renderPreviousPagesInScroll = function (pageIndex) {\n    var next = pageIndex - 1;\n    var pageNumber = next - 1;\n    if (next > 0) {\n      if (this.renderedPagesList.indexOf(next) === -1 && !this.getMagnified()) {\n        this.createRequestForRender(next);\n        this.renderCountIncrement();\n      }\n      if (pageNumber > 0) {\n        if (this.renderedPagesList.indexOf(pageNumber) === -1 && !this.getMagnified()) {\n          this.createRequestForRender(pageNumber);\n          this.renderCountIncrement();\n        }\n      }\n    }\n  };\n  PdfViewerBase.prototype.downloadDocument = function (blobUrl) {\n    // eslint-disable-next-line\n    var Url = URL || webkitURL;\n    blobUrl = Url.createObjectURL(blobUrl);\n    var anchorElement = createElement('a');\n    if (anchorElement.click) {\n      anchorElement.href = blobUrl;\n      anchorElement.target = '_parent';\n      if ('download' in anchorElement) {\n        anchorElement.download = this.downloadFileName;\n      }\n      (document.body || document.documentElement).appendChild(anchorElement);\n      anchorElement.click();\n      anchorElement.parentNode.removeChild(anchorElement);\n    } else {\n      if (window.top === window && blobUrl.split('#')[0] === window.location.href.split('#')[0]) {\n        var padCharacter = blobUrl.indexOf('?') === -1 ? '?' : '&';\n        blobUrl = blobUrl.replace(/#|$/, padCharacter + '$&');\n      }\n      /* eslint-disable */\n      window.open(blobUrl, '_parent');\n      /* eslint-enable */\n    }\n  };\n  PdfViewerBase.prototype.downloadExportFormat = function (blobUrl, annotationDataFormat, formFieldDataFormat, isForm) {\n    var isJson = annotationDataFormat === 'Json' || formFieldDataFormat === 'Json';\n    // eslint-disable-next-line max-len\n    var extension = isJson ? '.json' : formFieldDataFormat === 'Fdf' ? '.fdf' : formFieldDataFormat === 'Xml' ? '.xml' : annotationDataFormat === 'Xfdf' || formFieldDataFormat === 'Xfdf' ? '.xfdf' : null;\n    if (!isNullOrUndefined(extension)) {\n      // eslint-disable-next-line\n      var Url = URL || webkitURL;\n      blobUrl = Url.createObjectURL(blobUrl);\n      var anchorElement = createElement('a');\n      if (anchorElement.click) {\n        anchorElement.href = blobUrl;\n        anchorElement.target = '_parent';\n        if ('download' in anchorElement) {\n          if (this.pdfViewer.exportAnnotationFileName !== null) {\n            anchorElement.download = this.pdfViewer.exportAnnotationFileName.split('.')[0] + extension;\n          } else {\n            anchorElement.download = this.pdfViewer.fileName.split('.')[0] + extension;\n          }\n        }\n        (document.body || document.documentElement).appendChild(anchorElement);\n        anchorElement.click();\n        anchorElement.parentNode.removeChild(anchorElement);\n        if (isForm) {\n          this.pdfViewer.fireFormExportSuccess(blobUrl, anchorElement.download);\n        } else {\n          this.pdfViewer.fireExportSuccess(blobUrl, anchorElement.download);\n        }\n      } else if (isJson) {\n        if (window.top === window && blobUrl.split('#')[0] === window.location.href.split('#')[0]) {\n          var padCharacter = blobUrl.indexOf('?') === -1 ? '?' : '&';\n          blobUrl = blobUrl.replace(/#|$/, padCharacter + '$&');\n        }\n        /* eslint-disable */\n        window.open(blobUrl, '_parent');\n        /* eslint-enable */\n        if (isForm) {\n          this.pdfViewer.fireFormExportSuccess(blobUrl, this.pdfViewer.fileName.split('.')[0] + extension);\n        } else {\n          this.pdfViewer.fireExportSuccess(blobUrl, this.pdfViewer.fileName.split('.')[0] + extension);\n        }\n      }\n    }\n  };\n  /**\n   * @private\n   * @param {string} data - The data for exporting the fields.\n   * @returns {void}\n   */\n  PdfViewerBase.prototype.exportFormFields = function (data, formFieldDataFormat) {\n    this.createRequestForExportFormfields(false, formFieldDataFormat, data);\n  };\n  /**\n   * @param data\n   * @param formFieldDataFormat\n   * @private\n   */\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.importFormFields = function (data, formFieldDataFormat) {\n    this.createRequestForImportingFormfields(data, formFieldDataFormat);\n  };\n  /**\n   * @param {boolean} isObject\n   * @param {FormFieldDataFormat} formFieldDataFormat\n   * @param {string} data - The data for exporting the fields.\n   * @private\n   */\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.createRequestForExportFormfields = function (isObject, formFieldDataFormat, data) {\n    var _this = this;\n    var proxy = null;\n    proxy = this;\n    var promise = new Promise(function (resolve, reject) {\n      // eslint-disable-next-line\n      var jsonObject = proxy.createFormfieldsJsonData();\n      var canExport = false;\n      if (formFieldDataFormat === 'Json' || formFieldDataFormat === 'Fdf' || formFieldDataFormat === 'Xfdf' || formFieldDataFormat === \"Xml\") {\n        jsonObject.formFieldDataFormat = formFieldDataFormat;\n        canExport = proxy.pdfViewer.fireFormExportStarted(jsonObject);\n      }\n      if (canExport) {\n        jsonObject.action = 'ExportFormFields';\n        // eslint-disable-next-line\n        jsonObject['hashId'] = proxy.hashId;\n        // eslint-disable-next-line\n        jsonObject['fileName'] = proxy.pdfViewer.fileName;\n        if (data && data !== '' && !isObject) {\n          // eslint-disable-next-line\n          jsonObject['filePath'] = data;\n        }\n        // eslint-disable-next-line\n        jsonObject['elementId'] = _this.pdfViewer.element.id;\n        // eslint-disable-next-line max-len\n        if (proxy.jsonDocumentId) {\n          // eslint-disable-next-line\n          jsonObject.document = proxy.jsonDocumentId;\n        }\n        var formFieldsPageList = _this.getFormFieldsPageList(jsonObject[\"formDesigner\"]);\n        jsonObject['formFieldsPageList'] = JSON.stringify(formFieldsPageList);\n        jsonObject['isFormFieldAnnotationsExist'] = _this.isAnnotationsExist(jsonObject[\"formDesigner\"]) || _this.isFieldsDataExist(jsonObject[\"fieldsData\"]) || formFieldsPageList.length > 0;\n        var url = proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.exportFormFields;\n        proxy.exportFormFieldsRequestHandler = new AjaxHandler(_this.pdfViewer);\n        proxy.exportFormFieldsRequestHandler.url = url;\n        proxy.exportFormFieldsRequestHandler.mode = true;\n        proxy.exportFormFieldsRequestHandler.responseType = 'text';\n        if (!proxy.clientSideRendering) {\n          proxy.exportFormFieldsRequestHandler.send(jsonObject);\n        } else {\n          var resultData = proxy.pdfViewer.pdfRendererModule.exportFormFields(jsonObject, isObject);\n          if (isObject) {\n            var annotData = _this.getDataOnSuccess(resultData);\n            resolve(annotData);\n          } else {\n            proxy.exportFileDownload(resultData, proxy, formFieldDataFormat, jsonObject, isObject);\n          }\n        }\n        // eslint-disable-next-line\n        proxy.exportFormFieldsRequestHandler.onSuccess = function (result) {\n          // eslint-disable-next-line\n          var data = result.data;\n          var redirect = proxy.checkRedirection(data);\n          if (!redirect) {\n            if (data) {\n              if (isObject) {\n                var annotData = proxy.exportFileDownload(data, proxy, formFieldDataFormat, jsonObject, isObject);\n                resolve(annotData);\n              } else {\n                proxy.exportFileDownload(data, proxy, formFieldDataFormat, jsonObject, isObject);\n              }\n            }\n          }\n        };\n        // eslint-disable-next-line\n        proxy.exportFormFieldsRequestHandler.onFailure = function (result) {\n          proxy.pdfViewer.fireFormExportFailed(jsonObject.pdfAnnotation, result.statusText);\n        };\n        // eslint-disable-next-line\n        proxy.exportFormFieldsRequestHandler.onError = function (result) {\n          proxy.pdfViewer.fireFormExportFailed(jsonObject.pdfAnnotation, result.statusText);\n        };\n      }\n    });\n    if (isObject) {\n      return promise;\n    } else {\n      return true;\n    }\n  };\n  PdfViewerBase.prototype.exportFileDownload = function (data, proxy, formFieldDataFormat, jsonObject, isObject) {\n    return new Promise(function (resolve) {\n      if (data) {\n        if (!proxy.clientSideRendering) {\n          proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.exportFormFields, data);\n        }\n        if (isObject) {\n          // eslint-disable-next-line\n          var annotationJson = decodeURIComponent(escape(atob(data.split(',')[1])));\n          resolve(annotationJson);\n          proxy.pdfViewer.fireFormExportSuccess(annotationJson, proxy.pdfViewer.fileName);\n        } else if (data.split('base64,')[1]) {\n          var blobUrl = proxy.createBlobUrl(data.split('base64,')[1], 'application/json');\n          if (Browser.isIE || Browser.info.name === 'edge') {\n            window.navigator.msSaveOrOpenBlob(blobUrl, proxy.pdfViewer.fileName.split('.')[0] + '.json');\n          } else if (jsonObject.formFieldDataFormat === 'Json' || jsonObject.formFieldDataFormat === 'Fdf' || jsonObject.formFieldDataFormat === 'Xfdf' || jsonObject.formFieldDataFormat === 'Xml') {\n            proxy.downloadExportFormat(blobUrl, null, formFieldDataFormat, true);\n          }\n        }\n      }\n    });\n  };\n  /**\n   * @param {string} fileName - Gets the name of the file name for slicing the last index\n   * @param {string} sliceBy - A type to slice the file name; example (\".\", \"_\")\n   * @returns {string}\n   * @private\n   */\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.getLastIndexValue = function (fileName, sliceBy) {\n    var indexName = fileName.slice(fileName.lastIndexOf(sliceBy) + 1);\n    return indexName;\n  };\n  /**\n   * @param source\n   * @private\n   */\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.createRequestForImportingFormfields = function (source, formFieldDataFormat) {\n    var proxy = null;\n    var index = \".\";\n    proxy = this;\n    // eslint-disable-next-line\n    var jsonObject = {};\n    var sourceName = this.getLastIndexValue(source, index);\n    if (typeof source !== 'object' && (sourceName === 'json' || sourceName === 'fdf' || sourceName === 'xfdf' || sourceName === 'xml')) {\n      jsonObject.data = source;\n      jsonObject['fileName'] = proxy.pdfViewer.fileName;\n      jsonObject.formFieldDataFormat = formFieldDataFormat;\n    } else {\n      jsonObject.formFieldDataFormat = formFieldDataFormat;\n      if (formFieldDataFormat === 'Json') {\n        jsonObject.data = JSON.stringify(source);\n      } else {\n        jsonObject.data = source;\n      }\n    }\n    proxy.pdfViewer.fireFormImportStarted(source);\n    // eslint-disable-next-line\n    jsonObject['hashId'] = proxy.hashId;\n    // eslint-disable-next-line\n    jsonObject['elementId'] = this.pdfViewer.element.id;\n    // eslint-disable-next-line max-len\n    if (proxy.jsonDocumentId) {\n      // eslint-disable-next-line\n      jsonObject.document = proxy.jsonDocumentId;\n    }\n    jsonObject = Object.assign(jsonObject, this.constructJsonDownload());\n    // eslint-disable-next-line\t\n    jsonObject.action = 'ImportFormFields';\n    var url = proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.importFormFields;\n    proxy.importFormFieldsRequestHandler = new AjaxHandler(this.pdfViewer);\n    proxy.importFormFieldsRequestHandler.url = url;\n    proxy.importFormFieldsRequestHandler.mode = true;\n    proxy.importFormFieldsRequestHandler.responseType = 'text';\n    if (!proxy.clientSideRendering) {\n      proxy.importFormFieldsRequestHandler.send(jsonObject);\n    } else {\n      var resultData = proxy.pdfViewer.pdfRendererModule.importFormFields(jsonObject);\n      this.importClientSideFormFields(resultData, source);\n    }\n    // eslint-disable-next-line\n    proxy.importFormFieldsRequestHandler.onSuccess = function (result) {\n      // eslint-disable-next-line\n      var data = result.data;\n      var redirect = proxy.checkRedirection(data);\n      if (!redirect) {\n        if (data && data !== 'null') {\n          if (typeof data !== 'object') {\n            try {\n              data = JSON.parse(data);\n              if (typeof data !== 'object') {\n                proxy.onControlError(500, data, proxy.pdfViewer.serverActionSettings.importFormFields);\n                proxy.pdfViewer.fireFormImportFailed(source, result.statusText);\n                data = null;\n              }\n            } catch (error) {\n              proxy.pdfViewer.fireFormImportFailed(source, proxy.pdfViewer.localeObj.getConstant('File not found'));\n              if (isBlazor()) {\n                var promise = this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText', 'PdfViewer_FileNotFound');\n                promise.then(function (value) {\n                  proxy.openImportExportNotificationPopup(value);\n                });\n              } else {\n                proxy.openImportExportNotificationPopup(proxy.pdfViewer.localeObj.getConstant('File not found'));\n              }\n              proxy.onControlError(500, data, proxy.pdfViewer.serverActionSettings.importFormFields);\n              data = null;\n            }\n          }\n          proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.importFormFields, data);\n          proxy.pdfViewer.fireFormImportSuccess(source);\n          window.sessionStorage.removeItem(this.documentId + '_formfields');\n          this.pdfViewer.formFieldsModule.removeExistingFormFields();\n          window.sessionStorage.removeItem(this.documentId + '_formDesigner');\n          proxy.saveFormfieldsData(data);\n          for (var i = 0; i < proxy.renderedPagesList.length; i++) {\n            this.pdfViewer.formFieldsModule.renderFormFields(proxy.renderedPagesList[parseInt(i.toString(), 10)], true);\n          }\n        } else {\n          proxy.pdfViewer.fireFormImportFailed(source, result.statusText);\n          if (isBlazor()) {\n            var promise = this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText', 'PdfViewer_FileNotFound');\n            promise.then(function (value) {\n              proxy.openImportExportNotificationPopup(value);\n            });\n          } else {\n            proxy.openImportExportNotificationPopup(proxy.pdfViewer.localeObj.getConstant('File not found'));\n          }\n        }\n      }\n    };\n    // eslint-disable-next-line\n    proxy.importFormFieldsRequestHandler.onFailure = function (result) {\n      proxy.pdfViewer.fireFormImportFailed(source, result.statusText);\n    };\n    // eslint-disable-next-line\n    proxy.importFormFieldsRequestHandler.onError = function (result) {\n      proxy.pdfViewer.fireFormImportFailed(source, result.statusText);\n    };\n  };\n  PdfViewerBase.prototype.importClientSideFormFields = function (result, source) {\n    if (!isNullOrUndefined(result)) {\n      this.pdfViewer.fireFormImportSuccess(source);\n      window.sessionStorage.removeItem(this.documentId + '_formfields');\n      this.pdfViewer.formFieldsModule.removeExistingFormFields();\n      window.sessionStorage.removeItem(this.documentId + '_formDesigner');\n      this.saveFormfieldsData(result);\n      for (var i = 0; i < this.renderedPagesList.length; i++) {\n        this.pdfViewer.formFieldsModule.renderFormFields(this.renderedPagesList[parseInt(i.toString(), 10)], true);\n      }\n    } else {\n      this.pdfViewer.fireFormImportFailed(source, null);\n      this.openImportExportNotificationPopup(this.pdfViewer.localeObj.getConstant('File not found'));\n    }\n  };\n  /**\n   * @public\n   * @returns {any} - Returns the Json data.\n   */\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.createFormfieldsJsonData = function () {\n    // eslint-disable-next-line\n    var jsonObject = {};\n    if (this.pdfViewer.formDesignerModule) {\n      var fieldsData = this.pdfViewer.formDesignerModule.downloadFormDesigner();\n      // eslint-disable-next-line\n      jsonObject['formDesigner'] = fieldsData;\n    } else if (this.pdfViewer.formFieldsModule) {\n      var fieldsData = this.pdfViewer.formFieldsModule.downloadFormFieldsData();\n      // eslint-disable-next-line\n      jsonObject['fieldsData'] = fieldsData;\n    }\n    return jsonObject;\n  };\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.constructJsonDownload = function () {\n    // eslint-disable-next-line\n    var jsonObject = {\n      hashId: this.hashId\n    };\n    if (this.jsonDocumentId) {\n      jsonObject.documentId = this.jsonDocumentId;\n    }\n    jsonObject.uniqueId = this.documentId;\n    this.importPageList = [];\n    if (this.pdfViewer.annotationModule) {\n      this.saveImportedAnnotations();\n    }\n    if (this.isTextMarkupAnnotationModule()) {\n      this.isJsonExported = false;\n      // eslint-disable-next-line max-len\n      var textMarkupAnnotationCollection = this.pdfViewer.annotationModule.textMarkupAnnotationModule.saveTextMarkupAnnotations();\n      // eslint-disable-next-line\n      jsonObject['textMarkupAnnotations'] = textMarkupAnnotationCollection;\n    }\n    if (this.isShapeAnnotationModule()) {\n      this.isJsonExported = false;\n      // eslint-disable-next-line max-len\n      var shapeAnnotations = this.pdfViewer.annotationModule.shapeAnnotationModule.saveShapeAnnotations();\n      // eslint-disable-next-line\n      jsonObject['shapeAnnotations'] = shapeAnnotations;\n    }\n    if (this.isCalibrateAnnotationModule()) {\n      this.isJsonExported = false;\n      // eslint-disable-next-line max-len\n      var calibrateAnnotations = this.pdfViewer.annotationModule.measureAnnotationModule.saveMeasureShapeAnnotations();\n      // eslint-disable-next-line\n      jsonObject['measureShapeAnnotations'] = calibrateAnnotations;\n    }\n    if (this.isStampAnnotationModule()) {\n      // eslint-disable-next-line max-len\n      var stampAnnotationCollection = this.pdfViewer.annotationModule.stampAnnotationModule.saveStampAnnotations();\n      // eslint-disable-next-line\n      jsonObject['stampAnnotations'] = stampAnnotationCollection;\n    }\n    if (this.isCommentAnnotationModule()) {\n      // eslint-disable-next-line max-len\n      var stickyAnnotationCollection = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveStickyAnnotations();\n      // eslint-disable-next-line\n      jsonObject['stickyNotesAnnotation'] = stickyAnnotationCollection;\n    }\n    if (this.isImportAction) {\n      var importList = JSON.stringify(this.importPageList);\n      // eslint-disable-next-line\n      jsonObject['importPageList'] = importList;\n    }\n    if (this.pdfViewer.formDesignerModule) {\n      var fieldsData = this.pdfViewer.formDesignerModule.downloadFormDesigner();\n      // eslint-disable-next-line\n      jsonObject['formDesigner'] = fieldsData;\n    } else if (this.pdfViewer.formFieldsModule) {\n      var fieldsData = this.pdfViewer.formFieldsModule.downloadFormFieldsData();\n      // eslint-disable-next-line\n      jsonObject['fieldsData'] = fieldsData;\n    }\n    var signatureData = this.signatureModule.saveSignature();\n    // eslint-disable-next-line\n    jsonObject['signatureData'] = signatureData;\n    if (this.pdfViewer.isSignatureEditable) {\n      // eslint-disable-next-line\n      jsonObject['isSignatureEdited'] = this.pdfViewer.isSignatureEditable;\n    }\n    if (this.isFreeTextAnnotationModule()) {\n      // eslint-disable-next-line max-len\n      var freeTextAnnotationCollection = this.pdfViewer.annotationModule.freeTextAnnotationModule.saveFreeTextAnnotations();\n      // eslint-disable-next-line\n      jsonObject['freeTextAnnotation'] = freeTextAnnotationCollection;\n    }\n    if (this.isInkAnnotationModule()) {\n      var inkSignatureData = this.pdfViewer.annotationModule.inkAnnotationModule.saveInkSignature();\n      // eslint-disable-next-line\n      jsonObject['inkSignatureData'] = inkSignatureData;\n    }\n    // eslint-disable-next-line\n    jsonObject['action'] = 'Download';\n    // eslint-disable-next-line\n    jsonObject['elementId'] = this.pdfViewer.element.id;\n    if (this.pdfViewer.annotationModule) {\n      var annotationsPageList = this.getAnnotationsPageList();\n      jsonObject['isAnnotationsExist'] = this.isAnnotationsExist(jsonObject[\"textMarkupAnnotations\"]) || this.isAnnotationsExist(jsonObject[\"shapeAnnotations\"]) || this.isAnnotationsExist(jsonObject[\"measureShapeAnnotations\"]) || this.isAnnotationsExist(jsonObject[\"stampAnnotations\"]) || this.isAnnotationsExist(jsonObject[\"stickyNotesAnnotation\"]) || this.isAnnotationsExist(jsonObject[\"signatureData\"]) || this.isAnnotationsExist(jsonObject[\"freeTextAnnotation\"]) || this.isAnnotationsExist(jsonObject[\"inkSignatureData\"]) || annotationsPageList.length > 0;\n      jsonObject['annotationsPageList'] = JSON.stringify(annotationsPageList);\n    }\n    if (this.pdfViewer.formDesignerModule || this.pdfViewer.formFieldsModule) {\n      var formFieldsPageList = this.getFormFieldsPageList(jsonObject[\"formDesigner\"]);\n      jsonObject['isFormFieldAnnotationsExist'] = this.isAnnotationsExist(jsonObject[\"formDesigner\"]) || this.isFieldsDataExist(jsonObject[\"fieldsData\"]) || formFieldsPageList.length > 0;\n      jsonObject['formFieldsPageList'] = JSON.stringify(formFieldsPageList);\n    }\n    if (this.pdfViewer.annotationCollection) {\n      jsonObject['annotationCollection'] = JSON.stringify(this.pdfViewer.annotationCollection);\n    }\n    return jsonObject;\n  };\n  /**\n   * @private\n   * @returns {boolean} - Returns whether annotation is present.\n   */\n  PdfViewerBase.prototype.isAnnotationsExist = function (annotationInfo) {\n    // eslint-disable-next-line max-len\n    return !isNullOrUndefined(annotationInfo) ? JSON.parse(annotationInfo).flat(1).length > 0 : false;\n  };\n  /**\n   * @private\n   * @returns {boolean} - Returns whether fields data is present.\n   */\n  PdfViewerBase.prototype.isFieldsDataExist = function (fieldsData) {\n    // eslint-disable-next-line max-len\n    return !isNullOrUndefined(fieldsData) ? Object.entries(JSON.parse(fieldsData)).length !== 0 : false;\n  };\n  /**\n   * @private\n   * @returns {boolean} - Returns annotations page number list.\n   */\n  PdfViewerBase.prototype.getAnnotationsPageList = function () {\n    // eslint-disable-next-line max-len\n    var annotCollection = this.pdfViewer.annotationCollection.map(function (a) {\n      return a.pageNumber;\n    });\n    var annotActionCollection = this.pdfViewer.annotationModule.actionCollection.filter(function (value, index, self) {\n      return value.annotation.propName !== \"formFields\" && value.annotation.formFieldAnnotationType == undefined;\n    }).map(function (a) {\n      return a.pageIndex;\n    });\n    var fullPageList = annotCollection.concat(annotActionCollection);\n    return fullPageList.filter(function (value, index, self) {\n      return self.indexOf(value) === index && value !== undefined;\n    });\n  };\n  /**\n   * @private\n   * @returns {boolean} - Returns form fields page number list.\n   */\n  PdfViewerBase.prototype.getFormFieldsPageList = function (formDesignerData) {\n    // eslint-disable-next-line max-len\n    var formFieldsCollection = this.pdfViewer.formFieldCollection.map(function (item) {\n      if (!isNullOrUndefined(item.properties)) {\n        return item.properties.pageNumber;\n      } else {\n        return item.pageNumber + 1;\n      }\n    });\n    var annotActionCollection = !isNullOrUndefined(this.pdfViewer.annotationModule) ? this.pdfViewer.annotationModule.actionCollection.filter(function (value, index, self) {\n      return value.annotation.propName == \"formFields\" || value.annotation.formFieldAnnotationType != undefined;\n    }).map(function (a) {\n      return a.pageIndex;\n    }) : [];\n    var fullPageList = formFieldsCollection.concat(annotActionCollection);\n    var designerDataList;\n    if (!isNullOrUndefined(formDesignerData)) {\n      designerDataList = JSON.parse(formDesignerData).map(function (item) {\n        return item.FormField.pageNumber;\n      });\n    }\n    var totalPageList = fullPageList.concat(designerDataList);\n    return totalPageList.filter(function (value, index, self) {\n      return self.indexOf(value) === index && value !== undefined;\n    });\n  };\n  /**\n   * @private\n   * @param {string} annotationID - The annotationID.\n   * @returns {any} - Returns collection of type.\n   */\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.checkFormFieldCollection = function (annotationID) {\n    var isFormFieldAnnotation = false;\n    // eslint-disable-next-line\n    var formDesignerData = null;\n    formDesignerData = this.getItemFromSessionStorage('_formDesigner');\n    if (formDesignerData) {\n      // eslint-disable-next-line\n      var formFieldsData = JSON.parse(formDesignerData);\n      for (var i = 0; i < formFieldsData.length; i++) {\n        if (formFieldsData[parseInt(i.toString(), 10)].FormField.formFieldAnnotationType === 'RadioButton') {\n          for (var j = 0; j < formFieldsData[parseInt(i.toString(), 10)].FormField.radiobuttonItem.length; j++) {\n            if (annotationID === formFieldsData[parseInt(i.toString(), 10)].FormField.radiobuttonItem[parseInt(j.toString(), 10)].id.split('_')[0]) {\n              isFormFieldAnnotation = true;\n              break;\n            }\n          }\n        } else if (formFieldsData[parseInt(i.toString(), 10)].Key.split('_')[0] === annotationID) {\n          isFormFieldAnnotation = true;\n          break;\n        }\n      }\n    }\n    return isFormFieldAnnotation;\n  };\n  /**\n   * @private\n   * @returns {boolean} - Returns whether freetext module is enabled.\n   */\n  PdfViewerBase.prototype.isFreeTextAnnotationModule = function () {\n    // eslint-disable-next-line max-len\n    if (this.pdfViewer.annotation) {\n      if (this.pdfViewer.annotation && this.pdfViewer.annotation.freeTextAnnotationModule) {\n        return true;\n      } else {\n        return false;\n      }\n    } else {\n      return false;\n    }\n  };\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.createRequestForDownload = function () {\n    var proxy = null;\n    proxy = this;\n    proxy.pdfViewer.fireDownloadStart(proxy.downloadFileName);\n    // eslint-disable-next-line\n    var jsonObject = this.constructJsonDownload();\n    var digitalSignature = proxy.clientSideRendering ? proxy.isDigitalSignaturePresent : proxy.digitalSignaturePages && proxy.digitalSignaturePages.length !== 0;\n    if (digitalSignature) {\n      if (proxy.pdfViewer.isDocumentEdited) {\n        jsonObject['digitalSignatureDocumentEdited'] = true;\n      } else {\n        jsonObject['digitalSignatureDocumentEdited'] = false;\n      }\n    }\n    this.dowonloadRequestHandler = new AjaxHandler(this.pdfViewer);\n    this.dowonloadRequestHandler.url = proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.download;\n    this.dowonloadRequestHandler.responseType = 'text';\n    if (this.validateForm && this.pdfViewer.enableFormFieldsValidation) {\n      this.pdfViewer.fireValidatedFailed(proxy.pdfViewer.serverActionSettings.download);\n      this.validateForm = false;\n    } else if (!this.clientSideRendering) {\n      this.dowonloadRequestHandler.send(jsonObject);\n    } else {\n      var data = this.pdfViewer.pdfRendererModule.getDocumentAsBase64(jsonObject);\n      this.fileDownload(data, this);\n    }\n    // eslint-disable-next-line\n    this.dowonloadRequestHandler.onSuccess = function (result) {\n      // eslint-disable-next-line\n      var data = result.data;\n      var redirect = proxy.checkRedirection(data);\n      if (!redirect) {\n        if (data) {\n          proxy.fileDownload(data, proxy);\n        } else {\n          proxy.pdfViewer.fireDownloadEnd(proxy.downloadFileName, 'PDF Document saved in server side successfully');\n        }\n      }\n    };\n    // eslint-disable-next-line\n    this.dowonloadRequestHandler.onFailure = function (result) {\n      proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.download);\n    };\n    // eslint-disable-next-line\n    this.dowonloadRequestHandler.onError = function (result) {\n      proxy.openNotificationPopup();\n      proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.download);\n    };\n  };\n  PdfViewerBase.prototype.fileDownload = function (data, proxy) {\n    if (data) {\n      if (typeof data !== 'object' && data.indexOf('data:application/pdf') === -1) {\n        proxy.onControlError(500, data, proxy.pdfViewer.serverActionSettings.download);\n        data = null;\n      }\n      if (typeof data === 'object') {\n        data = JSON.parse(data);\n      }\n      if (data) {\n        if (proxy.pdfViewer.downloadFileName && proxy.pdfViewer.downloadFileName !== proxy.downloadFileName) {\n          proxy.downloadFileName = proxy.pdfViewer.downloadFileName;\n        }\n        if (proxy.clientSideRendering) {\n          proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.download, data);\n        }\n        var blobUrl = proxy.createBlobUrl(data.split('base64,')[1], 'application/pdf');\n        if (Browser.isIE || Browser.info.name === 'edge') {\n          window.navigator.msSaveOrOpenBlob(blobUrl, proxy.downloadFileName);\n        } else {\n          proxy.downloadDocument(blobUrl);\n        }\n        proxy.pdfViewer.fireDownloadEnd(proxy.downloadFileName, data);\n      }\n      proxy.updateDocumentAnnotationCollections();\n    }\n  };\n  /**\n   * @param pageWidth\n   * @private\n   */\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.getTileCount = function (pageWidth) {\n    if (pageWidth && typeof pageWidth === 'number') {\n      var defaultWidth = 816;\n      var tileCount = 1;\n      if (this.getZoomFactor() > 2 && pageWidth <= 1200) {\n        tileCount = 2;\n      } else {\n        tileCount = pageWidth / defaultWidth;\n      }\n      // eslint-disable-next-line radix\n      var tileValue = Math.ceil(tileCount);\n      if (tileValue <= 0) {\n        return 1;\n      } else {\n        if (this.pdfViewer.tileRenderingSettings.enableTileRendering) {\n          return tileValue;\n        } else {\n          return 1;\n        }\n      }\n    } else {\n      return 1;\n    }\n  };\n  PdfViewerBase.prototype.createRequestForRender = function (pageIndex) {\n    var proxy = null;\n    proxy = this;\n    var canvas = proxy.getElement('_pageCanvas_' + pageIndex);\n    var oldCanvas = proxy.getElement('_oldCanvas_' + pageIndex);\n    if (this.pageSize && this.pageSize[parseInt(pageIndex.toString(), 10)]) {\n      var pageWidth_1 = this.pageSize[parseInt(pageIndex.toString(), 10)].width;\n      var pageHeight = this.pageSize[parseInt(pageIndex.toString(), 10)].height;\n      var tilecanvas = this.getElement('_pageCanvas_' + pageIndex);\n      // eslint-disable-next-line\n      var viewPortWidth_1 = 1200; // On diving the value greater than 1200 we will get the tile count as 2.\n      // eslint-disable-next-line\n      var viewPortHeight = proxy.pdfViewer.element.clientHeight > 0 ? proxy.pdfViewer.element.clientHeight : proxy.pdfViewer.element.style.height;\n      // eslint-disable-next-line radix\n      viewPortWidth_1 = parseInt(viewPortWidth_1);\n      // eslint-disable-next-line radix\n      viewPortHeight = parseInt(viewPortHeight) ? parseInt(viewPortHeight) : 500; //we have applied minimum-height as 500.\n      var noTileX = void 0;\n      var noTileY = void 0;\n      var thumbnailImageElement = void 0;\n      var imageSource = void 0;\n      var object = new Object();\n      if (this.isMinimumZoom && document.getElementById(this.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageIndex)) {\n        this.renderThumbnailImages = true;\n        thumbnailImageElement = document.getElementById(this.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageIndex).children[0];\n        imageSource = thumbnailImageElement.src;\n      } else {\n        this.renderThumbnailImages = false;\n      }\n      var tileCount = this.getTileCount(pageWidth_1);\n      if (canvas) {\n        if (!isNaN(parseFloat(canvas.style.width)) || oldCanvas) {\n          if (proxy.isInitialLoaded) {\n            proxy.showPageLoadingIndicator(pageIndex, false);\n          }\n        }\n        // eslint-disable-next-line\n        var data = proxy.getStoredData(pageIndex);\n        noTileX = noTileY = tileCount;\n        var tileSettings = proxy.pdfViewer.tileRenderingSettings;\n        if (tileSettings.enableTileRendering && tileSettings.x > 0 && tileSettings.y > 0) {\n          if (viewPortWidth_1 < pageWidth_1 || this.getZoomFactor() > 2) {\n            noTileX = tileSettings.x;\n            noTileY = tileSettings.y;\n          }\n        }\n        proxy.tileRequestCount = noTileX * noTileY;\n        var zoomFactor = this.retrieveCurrentZoomFactor();\n        var isPageRequestSent = void 0;\n        if (tileCount === 1) {\n          data = proxy.getStoredData(pageIndex);\n          isPageRequestSent = proxy.pageRequestSent(pageIndex, 0, 0);\n        } else {\n          // eslint-disable-next-line\n          var tileData = JSON.parse(proxy.getWindowSessionStorageTile(pageIndex, 0, 0, zoomFactor));\n          if (tileCount > 1) {\n            data = tileData;\n          }\n        }\n        if (data && data.uniqueId === proxy.documentId && (data['image'] || this.isMinimumZoom)) {\n          canvas.style.backgroundColor = '#fff';\n          if (proxy.pdfViewer.magnification && proxy.pdfViewer.magnification.isPinchZoomed || !this.pageSize[parseInt(pageIndex.toString(), 10)]) {\n            return;\n          }\n          var zoomFactor_2 = this.retrieveCurrentZoomFactor();\n          if (zoomFactor_2 > 2 && pageWidth_1 <= 1200) {\n            viewPortWidth_1 = 700;\n          } else {\n            viewPortWidth_1 = 1200;\n          }\n          if (!proxy.pdfViewer.tileRenderingSettings.enableTileRendering) {\n            viewPortWidth_1 = 1200;\n          }\n          if (viewPortWidth_1 >= pageWidth_1 || !proxy.pdfViewer.tileRenderingSettings.enableTileRendering) {\n            if (this.renderThumbnailImages && tileCount === 1) {\n              proxy.renderPage(data, pageIndex, imageSource);\n            } else {\n              proxy.renderPage(data, pageIndex);\n            }\n          } else {\n            proxy.isTileImageRendered = true;\n            proxy.tileRenderCount = 0;\n            if (this.renderThumbnailImages && tileCount === 1) {\n              proxy.renderPage(data, pageIndex, imageSource);\n            } else {\n              proxy.tileRenderPage(data, pageIndex);\n              for (var k = 0; k < noTileX; k++) {\n                for (var l = 0; l < noTileY; l++) {\n                  if (k === 0 && l === 0) {\n                    continue;\n                  }\n                  data = this.clientSideRendering ? JSON.parse(this.getStoredTileImageDetails(pageIndex, k, l, zoomFactor_2)) : JSON.parse(this.getWindowSessionStorageTile(pageIndex, k, l, zoomFactor_2));\n                  if (data) {\n                    proxy.tileRenderPage(data, pageIndex);\n                  }\n                }\n              }\n            }\n          }\n          data = null;\n        } else if (data === null || !isPageRequestSent) {\n          if (!this.renderThumbnailImages) {\n            if (this.getPagesPinchZoomed()) {\n              proxy.showPageLoadingIndicator(pageIndex, false);\n            } else {\n              proxy.showPageLoadingIndicator(pageIndex, true);\n            }\n            if (proxy.getPagesZoomed()) {\n              if (proxy.isInitialLoaded) {\n                proxy.showPageLoadingIndicator(pageIndex, false);\n              }\n            }\n          }\n          if (proxy.pdfViewer.magnification && proxy.pdfViewer.magnification.isPinchZoomed) {\n            return;\n          }\n          if (!proxy.pdfViewer.tileRenderingSettings.enableTileRendering || this.renderThumbnailImages) {\n            noTileX = 1;\n            noTileY = 1;\n          }\n          proxy.tileRenderCount = 0;\n          proxy.isTileImageRendered = true;\n          for (var x = 0; x < noTileX; x++) {\n            for (var y = 0; y < noTileY; y++) {\n              var jsonObject = null;\n              var zoomFactor_3 = this.retrieveCurrentZoomFactor();\n              if (zoomFactor_3 > 2 && pageWidth_1 <= 1200) {\n                viewPortWidth_1 = 700;\n              } else {\n                viewPortWidth_1 = 1200;\n              }\n              if (!proxy.pdfViewer.tileRenderingSettings.enableTileRendering) {\n                viewPortWidth_1 = 1200;\n              }\n              if (this.renderThumbnailImages && !this.clientSideRendering) {\n                proxy.renderPage(object, pageIndex, imageSource);\n                if (this.textrequestLists.indexOf(pageIndex) == -1) {\n                  jsonObject = {\n                    pageStartIndex: pageIndex,\n                    pageEndIndex: pageIndex + 1,\n                    documentId: proxy.getDocumentId(),\n                    hashId: proxy.hashId,\n                    action: 'RenderPdfTexts',\n                    elementId: proxy.pdfViewer.element.id,\n                    uniqueId: proxy.documentId\n                  };\n                  if (this.jsonDocumentId) {\n                    jsonObject.documentId = this.jsonDocumentId;\n                  }\n                  this.textRequestHandler = new AjaxHandler(this.pdfViewer);\n                  this.textRequestHandler.url = this.pdfViewer.serviceUrl + '/' + this.pdfViewer.serverActionSettings.renderTexts;\n                  this.textRequestHandler.responseType = 'json';\n                  if (!this.clientSideRendering) {\n                    this.textRequestHandler.send(jsonObject);\n                  }\n                  this.textrequestLists.push(pageIndex);\n                  proxy.textRequestHandler.onSuccess = function (result) {\n                    // eslint-disable-next-line max-len\n                    if (proxy.pdfViewer.magnification && proxy.pdfViewer.magnification.isPinchZoomed || !proxy.pageSize[parseInt(pageIndex.toString(), 10)]) {\n                      return;\n                    }\n                    // eslint-disable-next-line\n                    var data = result.data;\n                    if (data) {\n                      if (typeof data !== 'object') {\n                        try {\n                          data = JSON.parse(data);\n                        } catch (error) {\n                          proxy.onControlError(500, data, proxy.pdfViewer.serverActionSettings.renderTexts);\n                          data = null;\n                        }\n                      }\n                    }\n                    if (data) {\n                      proxy.pageTextRequestOnSuccess(data, proxy, pageIndex);\n                    }\n                  };\n                  // eslint-disable-next-line\n                  this.textRequestHandler.onFailure = function (result) {\n                    // eslint-disable-next-line max-len\n                    proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.renderTexts);\n                  };\n                  // eslint-disable-next-line\n                  this.textRequestHandler.onError = function (result) {\n                    proxy.openNotificationPopup();\n                    // eslint-disable-next-line max-len\n                    proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.renderTexts);\n                  };\n                  if (this.clientSideRendering) {\n                    this.pdfViewer.pdfRendererModule.getDocumentText(jsonObject).then(function (data) {\n                      proxy.pageTextRequestOnSuccess(data, proxy, pageIndex);\n                    });\n                  }\n                }\n              } else {\n                // eslint-disable-next-line max-len\n                jsonObject = {\n                  xCoordinate: x.toString(),\n                  yCoordinate: y.toString(),\n                  viewPortWidth: viewPortWidth_1.toString(),\n                  viewPortHeight: viewPortHeight.toString(),\n                  pageNumber: pageIndex.toString(),\n                  hashId: proxy.hashId,\n                  tilecount: tileCount.toString(),\n                  tileXCount: noTileX.toString(),\n                  tileYCount: noTileY.toString(),\n                  // eslint-disable-next-line max-len\n                  zoomFactor: zoomFactor_3.toString(),\n                  action: 'RenderPdfPages',\n                  uniqueId: this.documentId,\n                  elementId: proxy.pdfViewer.element.id,\n                  digitalSignaturePresent: proxy.digitalSignaturePresent(pageIndex)\n                };\n                if (this.jsonDocumentId) {\n                  // eslint-disable-next-line\n                  jsonObject.documentId = this.jsonDocumentId;\n                }\n                proxy.pageRequestHandler = new AjaxHandler(this.pdfViewer);\n                // eslint-disable-next-line max-len\n                proxy.pageRequestHandler.url = proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.renderPages;\n                proxy.pageRequestHandler.responseType = 'json';\n                if (!isNullOrUndefined(proxy.hashId)) {\n                  this.clientSideRendering ? '' : proxy.pageRequestHandler.send(jsonObject);\n                }\n                proxy.requestLists.push(proxy.documentId + '_' + pageIndex + '_' + x + '_' + y + '_' + zoomFactor_3);\n                // eslint-disable-next-line\n                proxy.pageRequestHandler.onSuccess = function (result) {\n                  // eslint-disable-next-line max-len\n                  if (proxy.pdfViewer.magnification && proxy.pdfViewer.magnification.isPinchZoomed || !proxy.pageSize[parseInt(pageIndex.toString(), 10)]) {\n                    return;\n                  }\n                  // eslint-disable-next-line\n                  var data = result.data;\n                  var redirect = proxy.checkRedirection(data);\n                  if (redirect) {\n                    proxy.showLoadingIndicator(false);\n                  } else {\n                    if (data) {\n                      if (typeof data !== 'object') {\n                        try {\n                          data = JSON.parse(data);\n                        } catch (error) {\n                          proxy.onControlError(500, data, proxy.pdfViewer.serverActionSettings.renderPages);\n                          data = null;\n                        }\n                      }\n                    }\n                    if (data) {\n                      proxy.pageRequestOnSuccess(data, proxy, viewPortWidth_1, pageWidth_1, pageIndex);\n                    }\n                  }\n                };\n                // eslint-disable-next-line\n                this.pageRequestHandler.onFailure = function (result) {\n                  // eslint-disable-next-line max-len\n                  proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.renderPages);\n                };\n                // eslint-disable-next-line\n                this.pageRequestHandler.onError = function (result) {\n                  proxy.openNotificationPopup();\n                  // eslint-disable-next-line max-len\n                  proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.renderPages);\n                };\n                if (this.clientSideRendering) {\n                  var textDetailsId = proxy.documentId + '_' + pageIndex + '_textDetails';\n                  var isTextNeed = proxy.pageTextDetails ? proxy.pageTextDetails[\"\" + textDetailsId] ? false : true : true;\n                  if (viewPortWidth_1 >= pageWidth_1 || !proxy.pdfViewer.tileRenderingSettings.enableTileRendering) {\n                    this.pdfViewerRunner.postMessage({\n                      pageIndex: pageIndex,\n                      message: 'renderPage',\n                      zoomFactor: zoomFactor_3,\n                      isTextNeed: isTextNeed,\n                      textDetailsId: textDetailsId\n                    });\n                  } else {\n                    this.showPageLoadingIndicator(pageIndex, true);\n                    this.pdfViewerRunner.postMessage({\n                      pageIndex: pageIndex,\n                      message: 'renderImageAsTile',\n                      zoomFactor: zoomFactor_3,\n                      tileX: x,\n                      tileY: y,\n                      tileXCount: noTileX,\n                      tileYCount: noTileY,\n                      isTextNeed: isTextNeed,\n                      textDetailsId: textDetailsId\n                    });\n                  }\n                  this.pdfViewerRunner.onmessage = function (event) {\n                    switch (event.data.message) {\n                      case 'imageRendered':\n                        if (event.data.message === 'imageRendered') {\n                          var canvas_3 = document.createElement('canvas');\n                          var _a = event.data,\n                            value = _a.value,\n                            width = _a.width,\n                            height = _a.height,\n                            pageIndex_1 = _a.pageIndex;\n                          canvas_3.width = width;\n                          canvas_3.height = height;\n                          var canvasContext = canvas_3.getContext('2d');\n                          var imageData = canvasContext.createImageData(width, height);\n                          imageData.data.set(value);\n                          canvasContext.putImageData(imageData, 0, 0);\n                          var imageUrl = canvas_3.toDataURL();\n                          var textBounds = event.data.textBounds;\n                          var textContent = event.data.textContent;\n                          var pageText = event.data.pageText;\n                          var rotation = event.data.rotation;\n                          var characterBounds = event.data.characterBounds;\n                          var hyperlinksDetails = proxy.pdfViewer.pdfRendererModule.getHyperlinks(pageIndex_1);\n                          var data_1 = {\n                            image: imageUrl,\n                            pageNumber: pageIndex_1,\n                            uniqueId: proxy.documentId,\n                            pageWidth: event.data.pageWidth,\n                            zoomFactor: event.data.zoomFactor,\n                            hyperlinks: hyperlinksDetails.hyperlinks,\n                            hyperlinkBounds: hyperlinksDetails.hyperlinkBounds,\n                            linkAnnotation: hyperlinksDetails.linkAnnotation,\n                            linkPage: hyperlinksDetails.linkPage,\n                            annotationLocation: hyperlinksDetails.annotationLocation,\n                            characterBounds: characterBounds\n                          };\n                          if (event.data.isTextNeed) {\n                            data_1.textBounds = textBounds;\n                            data_1.textContent = textContent;\n                            data_1.rotation = rotation;\n                            data_1.pageText = pageText;\n                            proxy.storeTextDetails(pageIndex_1, textBounds, textContent, pageText, rotation, characterBounds);\n                          } else {\n                            var textDetails = JSON.parse(proxy.pageTextDetails[\"\" + event.data.textDetailsId]);\n                            data_1.textBounds = textDetails.textBounds;\n                            data_1.textContent = textDetails.textContent;\n                            data_1.rotation = textDetails.rotation;\n                            data_1.pageText = textDetails.pageText;\n                            data_1.characterBounds = textDetails.characterBounds;\n                          }\n                          if (data_1 && data_1.image && data_1.uniqueId === proxy.documentId) {\n                            var currentPageWidth = data_1.pageWidth && data_1.pageWidth > 0 ? data_1.pageWidth : pageWidth_1;\n                            proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.renderPages, data_1);\n                            var pageNumber = data_1.pageNumber !== undefined ? data_1.pageNumber : pageIndex_1;\n                            var blobObj = proxy.createBlobUrl(data_1.image.split('base64,')[1], 'image/png');\n                            var Url = URL || webkitURL;\n                            var blobUrl = Url.createObjectURL(blobObj);\n                            var storeObject = {\n                              // eslint-disable-next-line\n                              image: blobUrl,\n                              width: data_1.pageWidth,\n                              uniqueId: data_1.uniqueId,\n                              zoomFactor: data_1.zoomFactor\n                            };\n                            proxy.storeImageData(pageNumber, storeObject);\n                            proxy.pageRequestOnSuccess(data_1, proxy, viewPortWidth_1, pageWidth_1, pageIndex_1);\n                          }\n                        }\n                        break;\n                      case 'renderTileImage':\n                        if (event.data.message === 'renderTileImage') {\n                          var canvas_4 = document.createElement('canvas');\n                          var _b = event.data,\n                            value = _b.value,\n                            w = _b.w,\n                            h = _b.h,\n                            noTileX_1 = _b.noTileX,\n                            noTileY_1 = _b.noTileY,\n                            x_1 = _b.x,\n                            y_1 = _b.y,\n                            pageIndex_2 = _b.pageIndex;\n                          canvas_4.setAttribute('height', h);\n                          canvas_4.setAttribute('width', w);\n                          canvas_4.width = w;\n                          canvas_4.height = h;\n                          var canvasContext = canvas_4.getContext('2d');\n                          var imageData = canvasContext.createImageData(w, h);\n                          imageData.data.set(value);\n                          canvasContext.putImageData(imageData, 0, 0);\n                          var imageUrl = canvas_4.toDataURL();\n                          var tileWidth = w;\n                          var tileHeight = h;\n                          var textBounds = event.data.textBounds;\n                          var textContent = event.data.textContent;\n                          var pageText = event.data.pageText;\n                          var rotation = event.data.rotation;\n                          var characterBounds = event.data.characterBounds;\n                          var tileData = {\n                            image: imageUrl,\n                            noTileX: noTileX_1,\n                            noTileY: noTileY_1,\n                            pageNumber: pageIndex_2,\n                            tileX: x_1,\n                            tileY: y_1,\n                            uniqueId: proxy.documentId,\n                            pageWidth: pageWidth_1,\n                            width: tileWidth,\n                            transformationMatrix: {\n                              Values: [1, 0, 0, 1, tileWidth * x_1, tileHeight * y_1, 0, 0, 0]\n                            },\n                            zoomFactor: event.data.zoomFactor,\n                            characterBounds: characterBounds,\n                            isTextNeed: event.data.isTextNeed,\n                            textDetailsId: event.data.textDetailsId,\n                            textBounds: textBounds,\n                            textContent: textContent,\n                            pageText: pageText\n                          };\n                          if (tileData && tileData.image && tileData.uniqueId === proxy.documentId) {\n                            var currentPageWidth = tileData.pageWidth && tileData.pageWidth > 0 ? tileData.pageWidth : pageWidth_1;\n                            proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.renderPages, tileData);\n                            var pageNumber = tileData.pageNumber !== undefined ? tileData.pageNumber : pageIndex_2;\n                            if (x_1 == 0 && y_1 == 0) {\n                              var blobObj = proxy.createBlobUrl(tileData.image.split('base64,')[1], 'image/png');\n                              var Url = URL || webkitURL;\n                              var blobUrl = Url.createObjectURL(blobObj);\n                              if (tileData.isTextNeed) {\n                                tileData.textBounds = textBounds;\n                                tileData.textContent = textContent;\n                                tileData.rotation = rotation;\n                                tileData.pageText = pageText;\n                                proxy.storeTextDetails(pageIndex_2, textBounds, textContent, pageText, rotation, characterBounds);\n                              } else {\n                                var textDetails = JSON.parse(proxy.pageTextDetails[\"\" + tileData.textDetailsId]);\n                                tileData.textBounds = textDetails.textBounds;\n                                tileData.textContent = textDetails.textContent;\n                                tileData.rotation = textDetails.rotation;\n                                tileData.pageText = textDetails.pageText;\n                                tileData.characterBounds = textDetails.characterBounds;\n                              }\n                              var storeObject = {\n                                // eslint-disable-next-line\n                                image: blobUrl,\n                                width: tileData.width,\n                                uniqueId: tileData.uniqueId,\n                                tileX: tileData.tileX,\n                                tileY: tileData.tileY,\n                                zoomFactor: tileData.zoomFactor,\n                                transformationMatrix: tileData.transformationMatrix,\n                                pageText: tileData.pageText,\n                                textContent: tileData.textContent,\n                                textBounds: tileData.textBounds\n                              };\n                              proxy.storeImageData(pageNumber, storeObject, tileData.tileX, tileData.tileY);\n                            } else {\n                              var blobObj = proxy.createBlobUrl(tileData.image.split('base64,')[1], 'image/png');\n                              var Url = URL || webkitURL;\n                              var blobUrl = Url.createObjectURL(blobObj);\n                              var storeObject = {\n                                // eslint-disable-next-line\n                                image: blobUrl,\n                                width: tileData.width,\n                                uniqueId: tileData.uniqueId,\n                                tileX: tileData.tileX,\n                                tileY: tileData.tileY,\n                                zoomFactor: tileData.zoomFactor,\n                                transformationMatrix: tileData.transformationMatrix\n                              };\n                              proxy.storeImageData(pageNumber, storeObject, tileData.tileX, tileData.tileY);\n                            }\n                            proxy.pageRequestOnSuccess(tileData, proxy, viewPortWidth_1, pageWidth_1, pageIndex_2, true);\n                          }\n                        }\n                        break;\n                      case 'renderThumbnail':\n                        proxy.pdfViewer.thumbnailViewModule.thumbnailOnMessage(event);\n                        break;\n                      case 'printImage':\n                        proxy.pdfViewer.printModule.printOnMessage(event);\n                        break;\n                    }\n                  };\n                }\n              }\n            }\n          }\n        }\n        if (this.renderedPagesList.indexOf(pageIndex) === -1) {\n          proxy.renderedPagesList.push(pageIndex);\n        }\n      }\n    }\n  };\n  PdfViewerBase.prototype.pageRequestOnSuccess = function (data, proxy, viewPortWidth, pageWidth, pageIndex, isTileRender) {\n    while (typeof data !== 'object') {\n      data = JSON.parse(data);\n    }\n    if (data.image && data.uniqueId === proxy.documentId) {\n      var currentPageWidth = data.pageWidth && data.pageWidth > 0 ? data.pageWidth : pageWidth;\n      proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.renderPages, data);\n      var pageNumber = data.pageNumber !== undefined ? data.pageNumber : pageIndex;\n      if ((viewPortWidth >= currentPageWidth || !proxy.pdfViewer.tileRenderingSettings.enableTileRendering) && !isTileRender) {\n        proxy.storeWinData(data, pageNumber);\n      } else {\n        proxy.storeWinData(data, pageNumber, data.tileX, data.tileY);\n      }\n      if ((viewPortWidth >= currentPageWidth || !proxy.pdfViewer.tileRenderingSettings.enableTileRendering) && !isTileRender) {\n        proxy.renderPage(data, pageNumber);\n      } else {\n        proxy.tileRenderPage(data, pageNumber);\n      }\n    }\n  };\n  PdfViewerBase.prototype.pageTextRequestOnSuccess = function (data, proxy, pageIndex) {\n    while (typeof data !== 'object') {\n      data = JSON.parse(data);\n    }\n    if (data.documentTextCollection && data.uniqueId === proxy.documentId) {\n      proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.renderTexts, data);\n      var pageNumber = data.pageNumber !== undefined ? data.pageNumber : pageIndex;\n      proxy.storeWinData(data, pageNumber);\n      proxy.renderPage(data, pageIndex);\n    }\n  };\n  /**\n  * @private\n  */\n  PdfViewerBase.prototype.requestForTextExtraction = function (pageIndex, annotationObject) {\n    var jsonObject;\n    var proxy = this;\n    jsonObject = {\n      pageStartIndex: pageIndex,\n      pageEndIndex: pageIndex + 1,\n      documentId: proxy.getDocumentId(),\n      hashId: proxy.hashId,\n      action: 'RenderPdfTexts',\n      elementId: proxy.pdfViewer.element.id,\n      uniqueId: proxy.documentId\n    };\n    if (this.jsonDocumentId) {\n      jsonObject.documentId = this.jsonDocumentId;\n    }\n    this.textRequestHandler = new AjaxHandler(this.pdfViewer);\n    this.textRequestHandler.url = this.pdfViewer.serviceUrl + '/' + this.pdfViewer.serverActionSettings.renderTexts;\n    this.textRequestHandler.responseType = 'json';\n    if (!this.clientSideRendering) {\n      this.textRequestHandler.send(jsonObject);\n    }\n    this.textrequestLists.push(pageIndex);\n    proxy.textRequestHandler.onSuccess = function (result) {\n      // eslint-disable-next-line max-len\n      if (proxy.pdfViewer.magnification && proxy.pdfViewer.magnification.isPinchZoomed || !proxy.pageSize[parseInt(pageIndex.toString(), 10)]) {\n        return;\n      }\n      // eslint-disable-next-line\n      var data = result.data;\n      var redirect = proxy.checkRedirection(data);\n      if (!redirect) {\n        if (data) {\n          if (typeof data !== 'object') {\n            try {\n              data = JSON.parse(data);\n            } catch (error) {\n              proxy.onControlError(500, data, proxy.pdfViewer.serverActionSettings.renderTexts);\n              data = null;\n            }\n          }\n        }\n        if (data) {\n          proxy.textRequestOnSuccess(data, proxy, pageIndex, annotationObject);\n        }\n      }\n    };\n    // eslint-disable-next-line\n    this.textRequestHandler.onFailure = function (result) {\n      // eslint-disable-next-line max-len\n      proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.renderTexts);\n    };\n    // eslint-disable-next-line\n    this.textRequestHandler.onError = function (result) {\n      proxy.openNotificationPopup();\n      // eslint-disable-next-line max-len\n      proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.renderTexts);\n    };\n    if (this.clientSideRendering) {\n      this.pdfViewer.pdfRendererModule.getDocumentText(jsonObject).then(function (data) {\n        proxy.textRequestOnSuccess(data, proxy, pageIndex, annotationObject);\n      });\n    }\n  };\n  PdfViewerBase.prototype.textRequestOnSuccess = function (data, proxy, pageIndex, annotationObject) {\n    while (typeof data !== 'object') {\n      data = JSON.parse(data);\n    }\n    if (data.documentTextCollection && data.uniqueId === proxy.documentId) {\n      proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.renderTexts, data);\n      var pageNumber = data.pageNumber !== undefined ? data.pageNumber : pageIndex;\n      proxy.storeWinData(data, pageNumber);\n      if (!isNullOrUndefined(annotationObject)) {\n        var markedBounds = annotationObject.bounds[0];\n        var pageCharText = data.documentTextCollection[0][parseInt(pageIndex.toString(), 10)].PageText.split('');\n        var characterBounds = data.characterBounds;\n        var textMarkupContent = proxy.textMarkUpContent(markedBounds, pageCharText, characterBounds);\n        annotationObject.textMarkupContent = textMarkupContent;\n        this.pdfViewer.annotationModule.storeAnnotations(pageIndex, annotationObject, '_annotations_textMarkup');\n      } else {\n        proxy.renderPage(data, pageIndex);\n      }\n    }\n  };\n  /**\n  * @private\n  */\n  PdfViewerBase.prototype.textMarkUpContent = function (markedBounds, pageCharText, characterBounds) {\n    var textMarkupContent = '';\n    for (var j = 0; j < characterBounds.length; j++) {\n      var buffer = 0.5;\n      if (characterBounds[parseInt(j.toString(), 10)].Y >= markedBounds.Y - buffer && characterBounds[parseInt(j.toString(), 10)].X >= markedBounds.X - buffer && characterBounds[parseInt(j.toString(), 10)].Y <= markedBounds.Y + markedBounds.Height + buffer && characterBounds[parseInt(j.toString(), 10)].X <= markedBounds.X + markedBounds.Width + buffer) {\n        textMarkupContent += pageCharText[parseInt(j.toString(), 10)];\n      }\n    }\n    return textMarkupContent.replace(/(\\r\\n)/gm, '');\n  };\n  /**\n  * @private\n  * @returns {boolean}\n  */\n  PdfViewerBase.prototype.digitalSignaturePresent = function (pageIndex) {\n    var digitalSignaturePresent = false;\n    if (this.digitalSignaturePages && this.digitalSignaturePages.length !== 0 && this.digitalSignaturePages.indexOf(pageIndex) != -1) {\n      digitalSignaturePresent = true;\n    }\n    return digitalSignaturePresent;\n  };\n  PdfViewerBase.prototype.pageRequestSent = function (pageIndex, tileX, tileY) {\n    var zoomFactor = this.retrieveCurrentZoomFactor();\n    var currentString = this.documentId + '_' + pageIndex + '_' + tileX + '_' + tileY + '_' + zoomFactor;\n    if (this.requestLists && this.requestLists.indexOf(currentString) > -1) {\n      return true;\n    }\n    return false;\n  };\n  /**\n   * @private\n   * @param {string} status - The status message.\n   * @param {string} errorMessage - The error message.\n   * @param {string} action - The action.\n   * @returns {void}\n   */\n  PdfViewerBase.prototype.onControlError = function (status, errorMessage, action) {\n    this.openNotificationPopup();\n    this.pdfViewer.fireAjaxRequestFailed(status, errorMessage, action);\n  };\n  /**\n   * @param pageIndex\n   * @private\n   */\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.getStoredData = function (pageIndex, isTextSearch) {\n    var zoomFactor = this.retrieveCurrentZoomFactor();\n    if (this.pdfViewer.restrictZoomRequest && !this.pdfViewer.tileRenderingSettings.enableTileRendering) {\n      zoomFactor = 1;\n    }\n    // eslint-disable-next-line\n    var storedData = this.getWindowSessionStorage(pageIndex, zoomFactor) ? this.getWindowSessionStorage(pageIndex, zoomFactor) : this.getPinchZoomPage(pageIndex);\n    if (!storedData && isTextSearch) {\n      // eslint-disable-next-line\n      var storedTileData = this.clientSideRendering ? this.getStoredTileImageDetails(pageIndex, 0, 0, zoomFactor) : this.getWindowSessionStorageTile(pageIndex, 0, 0, zoomFactor);\n      if (storedTileData) {\n        storedData = storedTileData;\n      }\n    }\n    // eslint-disable-next-line\n    var data = null;\n    if (storedData) {\n      // eslint-disable-next-line\n      data = storedData;\n      if (!this.isPinchZoomStorage) {\n        data = JSON.parse(storedData);\n      }\n      this.isPinchZoomStorage = false;\n    }\n    return data;\n  };\n  /**\n   * @private\n   * @param  {any} data - The data.\n   * @param {number} pageIndex - The pageIndex.\n   * @param {number} tileX - The tileX.\n   * @param {number} tileY - The tileY.\n   * @returns {void}\n   */\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.storeWinData = function (data, pageIndex, tileX, tileY) {\n    var storeObject;\n    if (!data['image']) {\n      var pageItems = data.documentTextCollection[0][parseInt(pageIndex.toString(), 10)];\n      storeObject = {\n        // eslint-disable-next-line\n        textContent: data['textContent'],\n        textBounds: data['textBounds'],\n        pageText: pageItems.PageText,\n        rotation: data['rotation'],\n        uniqueId: data['uniqueId']\n      };\n      if (this.pageSize[parseInt(pageIndex.toString(), 10)]) {\n        // eslint-disable-next-line\n        this.pageSize[pageIndex].rotation = parseFloat(data['rotation']);\n      }\n      // eslint-disable-next-line\n      this.textLayer.characterBound[pageIndex] = data['characterBounds'];\n    } else {\n      // eslint-disable-next-line\n      var blobObj = this.createBlobUrl(data['image'].split('base64,')[1], 'image/png');\n      // eslint-disable-next-line\n      var Url = URL || webkitURL;\n      var blobUrl = Url.createObjectURL(blobObj);\n      // eslint-disable-next-line\n      if (isNaN(tileX) && isNaN(tileY) || tileX === 0 && tileY === 0) {\n        storeObject = {\n          // eslint-disable-next-line\n          image: blobUrl,\n          transformationMatrix: data['transformationMatrix'],\n          hyperlinks: data['hyperlinks'],\n          hyperlinkBounds: data['hyperlinkBounds'],\n          linkAnnotation: data['linkAnnotation'],\n          linkPage: data['linkPage'],\n          annotationLocation: data['annotationLocation'],\n          // eslint-disable-next-line\n          textContent: data['textContent'],\n          width: data['width'],\n          textBounds: data['textBounds'],\n          pageText: data['pageText'],\n          rotation: data['rotation'],\n          scaleFactor: data['scaleFactor'],\n          uniqueId: data['uniqueId'],\n          zoomFactor: data['zoomFactor'],\n          tileX: tileX,\n          tileY: tileY\n        };\n        if (this.pageSize[parseInt(pageIndex.toString(), 10)]) {\n          // eslint-disable-next-line\n          this.pageSize[pageIndex].rotation = parseFloat(data['rotation']);\n        }\n        // eslint-disable-next-line\n        this.textLayer.characterBound[pageIndex] = data['characterBounds'];\n      } else {\n        storeObject = {\n          // eslint-disable-next-line\n          image: blobUrl,\n          transformationMatrix: data['transformationMatrix'],\n          tileX: tileX,\n          tileY: tileY,\n          width: data['width'],\n          zoomFactor: data['zoomFactor']\n        };\n      }\n    }\n    // eslint-disable-next-line\n    var viewPortWidth = 816;\n    var pageWidth = 0;\n    if (this.pageSize[parseInt(pageIndex.toString(), 10)]) {\n      pageWidth = this.pageSize[parseInt(pageIndex.toString(), 10)].width;\n    }\n    this.manageSessionStorage(pageIndex, storeObject, tileX, tileY);\n  };\n  /**\n   * @private\n   * @param {XMLHttpRequest} request - The Xml request.\n   * @returns {void}\n   */\n  PdfViewerBase.prototype.setCustomAjaxHeaders = function (request) {\n    for (var i = 0; i < this.pdfViewer.ajaxRequestSettings.ajaxHeaders.length; i++) {\n      // eslint-disable-next-line max-len\n      request.setRequestHeader(this.pdfViewer.ajaxRequestSettings.ajaxHeaders[parseInt(i.toString(), 10)].headerName, this.pdfViewer.ajaxRequestSettings.ajaxHeaders[parseInt(i.toString(), 10)].headerValue);\n    }\n  };\n  /**\n   * @private\n   * @param {number} pageIndex - Page index.\n   * @returns {object}\n   */\n  PdfViewerBase.prototype.getPinchZoomPage = function (pageIndex) {\n    // eslint-disable-next-line\n    for (var key in this.pinchZoomStorage) {\n      // eslint-disable-next-line\n      if (this.pinchZoomStorage.hasOwnProperty(key)) {\n        /* eslint-disable-next-line security/detect-object-injection */\n        if (this.pinchZoomStorage[key].index === pageIndex) {\n          this.isPinchZoomStorage = true;\n          /* eslint-disable-next-line security/detect-object-injection */\n          return this.pinchZoomStorage[key].pinchZoomStorage;\n        }\n      }\n    }\n    return null;\n  };\n  /**\n   * @private\n   * @param {number} pageIndex - current page index.\n   * @param {number} zoomFactor - cuurent zoom factor\n   * @returns {string}\n   */\n  PdfViewerBase.prototype.getWindowSessionStorage = function (pageIndex, zoomFactor) {\n    return window.sessionStorage.getItem(this.documentId + '_' + pageIndex + '_' + zoomFactor);\n  };\n  /**\n   * @private\n   * @param {number} pageIndex - current page index.\n   * @param {number} tileX - cuurent tile x\n   * @param {number} tileY - cuurent tile y\n   * @param {number} zoomFactor - cuurent zoom factor\n   * @returns {string}\n   */\n  PdfViewerBase.prototype.getWindowSessionStorageTile = function (pageIndex, tileX, tileY, zoomFactor) {\n    return window.sessionStorage.getItem(this.documentId + '_' + pageIndex + '_' + tileX + '_' + tileY + '_' + zoomFactor);\n  };\n  /**\n   * @private\n   *\n   */\n  PdfViewerBase.prototype.getStoredTileImageDetails = function (pageIndex, tileX, tileY, zoomFactor) {\n    return this.pageImageDetails[this.documentId + '_' + pageIndex + '_' + tileX + '_' + tileY + '_' + zoomFactor + '_imageUrl'] || null;\n  };\n  /**\n   * @private\n   * @returns {number}\n   */\n  PdfViewerBase.prototype.retrieveCurrentZoomFactor = function () {\n    var zoomFactor = this.getZoomFactor();\n    if (this.pdfViewer.enableZoomOptimization) {\n      if (zoomFactor <= 1) {\n        zoomFactor = 1;\n      } else if (zoomFactor > 1 && zoomFactor <= 2) {\n        zoomFactor = 2;\n      } else if (zoomFactor > 2 && zoomFactor <= 3) {\n        zoomFactor = 3;\n      } else if (zoomFactor > 3 && zoomFactor <= 4) {\n        zoomFactor = 4;\n      }\n      return zoomFactor;\n    } else {\n      if (zoomFactor <= 0) {\n        zoomFactor = 1;\n      }\n      return zoomFactor;\n    }\n  };\n  /**\n   * @private\n   *\n   */\n  PdfViewerBase.prototype.storeTextDetails = function (pageNumber, textBounds, textContent, pageText, rotation, characterBounds) {\n    var textObject = {\n      textBounds: textBounds,\n      textContent: textContent,\n      rotation: rotation,\n      pageText: pageText,\n      characterBounds: characterBounds\n    };\n    if (this.pageSize[parseInt(pageNumber.toString(), 10)]) {\n      this.pageSize[parseInt(pageNumber.toString(), 10)].rotation = rotation;\n    }\n    this.textLayer.characterBound[parseInt(pageNumber.toString(), 10)] = characterBounds;\n    this.pageTextDetails[this.documentId + '_' + pageNumber + '_textDetails'] = JSON.stringify(textObject);\n  };\n  /**\n   * @private\n   *\n   */\n  PdfViewerBase.prototype.storeImageData = function (pageNumber, storeObject, tileX, tileY) {\n    var zoomFactor = !isNullOrUndefined(storeObject.zoomFactor) ? storeObject.zoomFactor : this.retrieveCurrentZoomFactor();\n    if (isNaN(tileX) && isNaN(tileY)) {\n      this.pageImageDetails[this.documentId + '_' + pageNumber + '_' + zoomFactor + '_imageUrl'] = JSON.stringify(storeObject);\n    } else {\n      this.pageImageDetails[this.documentId + '_' + pageNumber + '_' + tileX + '_' + tileY + '_' + zoomFactor + '_imageUrl'] = JSON.stringify(storeObject);\n    }\n  };\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.manageSessionStorage = function (pageIndex, storeObject, tileX, tileY) {\n    // eslint-disable-next-line\n    var sessionSize = Math.round(JSON.stringify(window.sessionStorage).length / 1024);\n    var maxSessionSize = 5000;\n    if (sessionSize >= maxSessionSize) {\n      if (!this.isStorageExceed) {\n        // eslint-disable-next-line\n        var annotationList = [];\n        var formFieldsList = [];\n        for (var i = 0; i < window.sessionStorage.length; i++) {\n          if (window.sessionStorage.key(i) && window.sessionStorage.key(i).split('_')[3]) {\n            if (window.sessionStorage.key(i).split('_')[3] === 'annotations') {\n              // eslint-disable-next-line max-len\n              this.annotationStorage[window.sessionStorage.key(i)] = window.sessionStorage.getItem(window.sessionStorage.key(i));\n              annotationList.push(window.sessionStorage.key(i));\n            } else if (window.sessionStorage.key(i).split('_')[3] === 'formfields') {\n              // eslint-disable-next-line max-len\n              this.formFieldStorage[window.sessionStorage.key(i)] = window.sessionStorage.getItem(window.sessionStorage.key(i));\n              formFieldsList.push(window.sessionStorage.key(i));\n            } else if (window.sessionStorage.key(i).split('_')[3] === 'formDesigner') {\n              this.formFieldStorage[window.sessionStorage.key(i)] = window.sessionStorage.getItem(window.sessionStorage.key(i));\n              formFieldsList.push(window.sessionStorage.key(i));\n            }\n          }\n        }\n        if (annotationList) {\n          for (var i = 0; i < annotationList.length; i++) {\n            window.sessionStorage.removeItem(annotationList[parseInt(i.toString(), 10)]);\n          }\n        }\n        if (formFieldsList) {\n          for (var i = 0; i < formFieldsList.length; i++) {\n            window.sessionStorage.removeItem(formFieldsList[parseInt(i.toString(), 10)]);\n          }\n        }\n      }\n      this.isStorageExceed = true;\n      sessionSize = Math.round(JSON.stringify(window.sessionStorage).length / 1024);\n      if (sessionSize >= 5000) {\n        var storageLength = window.sessionStorage.length;\n        if (storageLength > 200) {\n          storageLength = 200;\n        }\n        for (var i = 0; i < storageLength; i++) {\n          if (window.sessionStorage.key(i) && window.sessionStorage.key(i).split('_')[3]) {\n            if (window.sessionStorage.key(i).split('_')[3] !== 'annotations') {\n              window.sessionStorage.removeItem(window.sessionStorage.key(i));\n            }\n          }\n        }\n      }\n    }\n    var zoomFactor = this.retrieveCurrentZoomFactor();\n    if (isNaN(tileX) && isNaN(tileY)) {\n      // eslint-disable-next-line max-len\n      window.sessionStorage.setItem(this.documentId + '_' + pageIndex + '_' + zoomFactor, JSON.stringify(storeObject));\n      this.sessionStorage.push(this.documentId + '_' + pageIndex + '_' + zoomFactor);\n    } else {\n      this.sessionStorage.push(this.documentId + '_' + pageIndex + '_' + tileX + '_' + tileY + '_' + zoomFactor);\n      // eslint-disable-next-line max-len\n      window.sessionStorage.setItem(this.documentId + '_' + pageIndex + '_' + tileX + '_' + tileY + '_' + zoomFactor, JSON.stringify(storeObject));\n    }\n  };\n  /**\n   * @private\n   *\n   */\n  PdfViewerBase.prototype.createBlobUrl = function (base64String, contentType) {\n    var sliceSize = 512;\n    var byteCharacters = atob(base64String);\n    // eslint-disable-next-line\n    var byteArrays = [];\n    for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n      var slice = byteCharacters.slice(offset, offset + sliceSize);\n      // eslint-disable-next-line\n      var byteNumbers = new Array(slice.length);\n      for (var i = 0; i < slice.length; i++) {\n        /* eslint-disable-next-line security/detect-object-injection */\n        byteNumbers[i] = slice.charCodeAt(i);\n      }\n      // eslint-disable-next-line\n      var byteArray = new Uint8Array(byteNumbers);\n      byteArrays.push(byteArray);\n    }\n    // eslint-disable-next-line\n    var blob = new Blob(byteArrays, {\n      type: contentType\n    });\n    return blob;\n  };\n  PdfViewerBase.prototype.getRandomNumber = function () {\n    // eslint-disable-next-line\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n      // eslint-disable-next-line\n      var random = Math.random() * 16 | 0,\n        v = c == 'x' ? random : random & 0x3 | 0x8;\n      return random.toString(16);\n    });\n  };\n  PdfViewerBase.prototype.createGUID = function () {\n    // eslint-disable-next-line max-len\n    return 'Sync_PdfViewer_' + this.getRandomNumber();\n  };\n  /**\n   * @private\n   * @param {MouseEvent} event - The mouse event.\n   * @param {boolean} isNeedToSet - Is need to test.\n   * @returns {boolean} - Returns true or false.\n   */\n  PdfViewerBase.prototype.isClickedOnScrollBar = function (event, isNeedToSet) {\n    var isScrollBar = false;\n    if (isNeedToSet) {\n      this.setScrollDownValue(event.type, false);\n    }\n    // eslint-disable-next-line max-len\n    if (this.viewerContainer.clientWidth + this.viewerContainer.offsetLeft < event.clientX && event.clientX < this.viewerContainer.offsetWidth + this.viewerContainer.offsetLeft) {\n      isScrollBar = true;\n      if (isNeedToSet) {\n        this.setScrollDownValue(event.type, true);\n      }\n    }\n    // eslint-disable-next-line max-len\n    if (this.viewerContainer.clientHeight + this.viewerContainer.offsetTop < event.clientY && event.clientY < this.viewerContainer.offsetHeight + this.viewerContainer.offsetTop) {\n      isScrollBar = true;\n      if (isNeedToSet) {\n        this.setScrollDownValue(event.type, true);\n      }\n    }\n    return isScrollBar;\n  };\n  PdfViewerBase.prototype.setScrollDownValue = function (eventType, boolValue) {\n    if (eventType === 'mousedown') {\n      this.isScrollbarMouseDown = boolValue;\n    }\n  };\n  /**\n   * @private\n   * @returns {void}\n   */\n  PdfViewerBase.prototype.disableTextSelectionMode = function () {\n    this.isTextSelectionDisabled = true;\n    this.viewerContainer.classList.remove('e-enable-text-selection');\n    if (this.pdfViewer.textSelectionModule) {\n      this.pdfViewer.textSelectionModule.clearTextSelection();\n    }\n    this.viewerContainer.classList.add('e-disable-text-selection');\n    this.viewerContainer.addEventListener('selectstart', function () {\n      return false;\n    });\n  };\n  /**\n   * @private\n   * @param {string} idString - The Id string.\n   * @returns {HTMLElement} - The html element.\n   */\n  PdfViewerBase.prototype.getElement = function (idString) {\n    return document.getElementById(this.pdfViewer.element.id + idString);\n  };\n  /**\n   * @private\n   * @param {number} pageIndex - The pageIndex\n   * @returns {number} - Returns number\n   */\n  PdfViewerBase.prototype.getPageWidth = function (pageIndex) {\n    if (this.pageSize[parseInt(pageIndex.toString(), 10)]) {\n      return this.pageSize[parseInt(pageIndex.toString(), 10)].width * this.getZoomFactor();\n    } else {\n      return 0;\n    }\n  };\n  /**\n   * @private\n   * @param {number} pageIndex - The pageIndex\n   * @returns {number} - Returns number\n   */\n  PdfViewerBase.prototype.getPageHeight = function (pageIndex) {\n    if (this.pageSize[parseInt(pageIndex.toString(), 10)]) {\n      return this.pageSize[parseInt(pageIndex.toString(), 10)].height * this.getZoomFactor();\n    } else {\n      return 0;\n    }\n  };\n  /**\n   * @private\n   * @param {number} pageIndex - The pageIndex.\n   * @returns {number} - Returns number\n   */\n  PdfViewerBase.prototype.getPageTop = function (pageIndex) {\n    if (this.pageSize[parseInt(pageIndex.toString(), 10)]) {\n      return this.pageSize[parseInt(pageIndex.toString(), 10)].top * this.getZoomFactor();\n    } else {\n      return 0;\n    }\n  };\n  PdfViewerBase.prototype.isAnnotationToolbarHidden = function () {\n    if (this.pdfViewer.toolbarModule.annotationToolbarModule) {\n      return this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden;\n    } else {\n      return true;\n    }\n  };\n  PdfViewerBase.prototype.isFormDesignerToolbarHidded = function () {\n    var formDesignerToolbar = this.pdfViewer.toolbarModule.formDesignerToolbarModule;\n    if (formDesignerToolbar) {\n      return formDesignerToolbar.isToolbarHidden;\n    } else {\n      return true;\n    }\n  };\n  /**\n   * @private\n   * @returns {boolean} - Returns true or false.\n   */\n  PdfViewerBase.prototype.getTextMarkupAnnotationMode = function () {\n    if (this.isTextMarkupAnnotationModule()) {\n      return this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode;\n    } else {\n      return false;\n    }\n  };\n  PdfViewerBase.prototype.isNewFreeTextAnnotation = function () {\n    // eslint-disable-next-line max-len\n    if (this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.freeTextAnnotationModule) {\n      if (!this.pdfViewer.annotationModule.freeTextAnnotationModule.isNewFreeTextAnnot) {\n        return true;\n      } else {\n        return false;\n      }\n    } else {\n      return true;\n    }\n  };\n  PdfViewerBase.prototype.getCurrentTextMarkupAnnotation = function () {\n    if (this.isTextMarkupAnnotationModule()) {\n      if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n        return true;\n      } else {\n        return false;\n      }\n    } else {\n      return false;\n    }\n  };\n  /**\n   * @private\n   * @returns {number} - Returns page number.\n   */\n  PdfViewerBase.prototype.getSelectTextMarkupCurrentPage = function () {\n    if (this.isTextMarkupAnnotationModule()) {\n      return this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage;\n    } else {\n      return null;\n    }\n  };\n  /**\n   * @private\n   * @returns {boolean} - Retunrs true or false.\n   */\n  PdfViewerBase.prototype.getAnnotationToolStatus = function () {\n    if (this.pdfViewer.toolbarModule) {\n      return this.pdfViewer.toolbarModule.annotationToolbarModule.isAnnotationButtonsEnabled();\n    } else {\n      return false;\n    }\n  };\n  /**\n   * @private\n   * @returns {boolean} - Retunrs true or false.\n   */\n  PdfViewerBase.prototype.getPopupNoteVisibleStatus = function () {\n    if (this.pdfViewer.annotationModule) {\n      return this.pdfViewer.annotationModule.isPopupNoteVisible;\n    } else {\n      return false;\n    }\n  };\n  /**\n   * @private\n   * @returns {TextMarkupAnnotation} - TextMarkupAnnotation.\n   */\n  PdfViewerBase.prototype.isTextMarkupAnnotationModule = function () {\n    if (this.pdfViewer.annotationModule) {\n      return this.pdfViewer.annotationModule.textMarkupAnnotationModule;\n    } else {\n      return null;\n    }\n  };\n  /**\n   * @private\n   * @returns {boolean} - Returns true or false.\n   */\n  PdfViewerBase.prototype.isShapeAnnotationModule = function () {\n    if (this.pdfViewer.annotation) {\n      if (this.pdfViewer.annotation && this.pdfViewer.annotation.shapeAnnotationModule) {\n        return true;\n      } else {\n        return false;\n      }\n    } else {\n      return false;\n    }\n  };\n  /**\n   * @private\n   * @returns {boolean} - Retunrs true or false.\n   */\n  PdfViewerBase.prototype.isFormDesignerModule = function () {\n    if (this.pdfViewer.formDesignerModule) {\n      return true;\n    } else {\n      return false;\n    }\n  };\n  /**\n   * @private\n   * @returns {boolean} - Retunrs true or false.\n   */\n  PdfViewerBase.prototype.isCalibrateAnnotationModule = function () {\n    if (this.pdfViewer.annotation) {\n      if (this.pdfViewer.annotation && this.pdfViewer.annotation.measureAnnotationModule) {\n        return true;\n      } else {\n        return false;\n      }\n    } else {\n      return false;\n    }\n  };\n  /**\n   * @private\n   * @returns {boolean} - Retunrs true or false.\n   */\n  PdfViewerBase.prototype.isStampAnnotationModule = function () {\n    if (this.pdfViewer.annotation) {\n      if (this.pdfViewer.annotation && this.pdfViewer.annotation.stampAnnotationModule) {\n        return true;\n      } else {\n        return false;\n      }\n    } else {\n      return false;\n    }\n  };\n  /**\n   * @private\n   * @returns {boolean} - Retunrs true or false.\n   */\n  PdfViewerBase.prototype.isInkAnnotationModule = function () {\n    if (this.pdfViewer.annotation) {\n      if (this.pdfViewer.annotation && this.pdfViewer.annotation.inkAnnotationModule) {\n        return true;\n      } else {\n        return false;\n      }\n    } else {\n      return false;\n    }\n  };\n  /**\n   * @private\n   * @returns {boolean} - Retunrs true or false.\n   */\n  PdfViewerBase.prototype.isCommentAnnotationModule = function () {\n    if (this.pdfViewer.annotation) {\n      if (this.pdfViewer.annotation && this.pdfViewer.annotation.stickyNotesAnnotationModule) {\n        return true;\n      } else {\n        return false;\n      }\n    } else {\n      return false;\n    }\n  };\n  /**\n   * @private\n   * @returns {boolean} - Retunrs true or false.\n   */\n  PdfViewerBase.prototype.isShapeBasedAnnotationsEnabled = function () {\n    // eslint-disable-next-line max-len\n    if (this.isShapeAnnotationModule() || this.isCalibrateAnnotationModule() || this.isStampAnnotationModule() || this.isCommentAnnotationModule() || this.isFormDesignerModule()) {\n      return true;\n    } else {\n      return false;\n    }\n  };\n  /**\n   * @private\n   * @param {MouseEvent | PointerEvent | TouchEvent} e - Returns event.\n   * @returns {PointModel} - Returns points.\n   */\n  PdfViewerBase.prototype.getMousePosition = function (e) {\n    var touchArg;\n    var offsetX;\n    var offsetY;\n    var currentTarget = e.target.parentElement;\n    if (e.type.indexOf('touch') !== -1) {\n      touchArg = e;\n      if (this.pdfViewer.annotation || this.isDeviceiOS) {\n        var pageNumber = this.pdfViewer.currentPageNumber - 1;\n        if (this.pdfViewer.annotation && !isNaN(this.pdfViewer.annotation.getEventPageNumber(e))) {\n          pageNumber = this.pdfViewer.annotation.getEventPageNumber(e);\n        }\n        if (isNaN(pageNumber) && this.pdfViewer.formDesignerModule) {\n          pageNumber = this.pdfViewer.formDesignerModule.getEventPageNumber(e);\n        }\n        var pageDiv = this.getElement('_pageDiv_' + pageNumber);\n        if (pageDiv) {\n          var pageCurrentRect = pageDiv.getBoundingClientRect();\n          offsetX = touchArg.changedTouches[0].clientX - pageCurrentRect.left;\n          offsetY = touchArg.changedTouches[0].clientY - pageCurrentRect.top;\n        }\n      }\n    } else {\n      if (e.target.classList.contains('e-pv-hyperlink')) {\n        offsetX = e.offsetX + e.target.offsetLeft;\n        offsetY = e.offsetY + e.target.offsetTop;\n      } else if (e.target.classList.contains('e-pv-text') && currentTarget) {\n        var targetParentRect = currentTarget.getBoundingClientRect();\n        offsetX = e.clientX - targetParentRect.left;\n        offsetY = e.clientY - targetParentRect.top;\n        // eslint-disable-next-line\n      } else if (e.target && e && e.path && currentTarget && (currentTarget.classList.contains('foreign-object') || currentTarget.parentElement.classList.contains('foreign-object'))) {\n        // eslint-disable-next-line\n        var targetParentRect = void 0;\n        if (e.path[4].className === 'e-pv-page-div') {\n          targetParentRect = e.path[4].getBoundingClientRect();\n        } else {\n          for (var i = 0; i < e.path.length; i++) {\n            if (e.path[parseInt(i.toString(), 10)].className === 'e-pv-page-div') {\n              targetParentRect = e.path[parseInt(i.toString(), 10)].getBoundingClientRect();\n              break;\n            }\n          }\n        }\n        offsetX = e.clientX - targetParentRect.left;\n        offsetY = e.clientY - targetParentRect.top;\n        // eslint-disable-next-line\n      } else if (e.target && currentTarget && currentTarget.classList.contains('foreign-object') || e.target.classList.contains('e-pv-checkbox-div')) {\n        // eslint-disable-next-line\n        var targetParentRect = void 0;\n        if (e.target.classList.contains('e-pv-checkbox-div')) {\n          targetParentRect = e.target.offsetParent.offsetParent.offsetParent.offsetParent.getBoundingClientRect();\n        } else {\n          targetParentRect = e.target.offsetParent.offsetParent.offsetParent.getBoundingClientRect();\n        }\n        offsetX = e.clientX - targetParentRect.left;\n        offsetY = e.clientY - targetParentRect.top;\n      } else {\n        offsetX = e.offsetX;\n        offsetY = e.offsetY;\n      }\n    }\n    return {\n      x: offsetX,\n      y: offsetY\n    };\n  };\n  PdfViewerBase.prototype.getMouseEventArgs = function (position, args, evt, source) {\n    args.position = position;\n    var obj;\n    var objects;\n    if (!source) {\n      if (this.action === 'Drag' || this.action === 'ConnectorSourceEnd' || this.action === 'SegmentEnd' || this.action === 'OrthoThumb' || this.action === 'BezierSourceThumb' || this.action === 'BezierTargetThumb' || this.action === 'ConnectorTargetEnd' || this.action.indexOf('Rotate') !== -1 || this.action.indexOf('Resize') !== -1) {\n        obj = this.pdfViewer.selectedItems;\n        if (this.action === 'Drag' && obj && this.pdfViewer.selectedItems.annotations.length > 0) {\n          obj = findActiveElement(evt, this, this.pdfViewer);\n        } else if (this.action === 'Drag' && obj && this.pdfViewer.selectedItems.formFields.length > 0) {\n          obj = findActiveElement(evt, this, this.pdfViewer);\n        }\n      } else {\n        obj = findActiveElement(evt, this, this.pdfViewer);\n      }\n    } else {\n      //   objects = this.diagram.findObjectsUnderMouse(this.currentPosition, source);\n      obj = findActiveElement(evt, this, this.pdfViewer);\n    }\n    var wrapper;\n    if (obj) {\n      wrapper = obj.wrapper;\n    }\n    if (!source) {\n      args.source = obj;\n      args.sourceWrapper = wrapper;\n    } else {\n      args.target = obj;\n      args.targetWrapper = wrapper;\n    }\n    args.actualObject = this.eventArgs.actualObject;\n    //args.startTouches = this.touchStartList;\n    //args.moveTouches = this.touchMoveList;\n    return args;\n  };\n  /**\n   * @private\n   * @param {PdfAnnotationBaseModel} obj - The object.\n   * @param {PointModel} position - The position.\n   * @returns {Actions | string} - Returns the string.\n   */\n  PdfViewerBase.prototype.findToolToActivate = function (obj, position) {\n    position = {\n      x: position.x / this.getZoomFactor(),\n      y: position.y / this.getZoomFactor()\n    };\n    var element = this.pdfViewer.selectedItems.wrapper;\n    if (element && obj) {\n      var selectorBnds = element.bounds; //let handle: SelectorModel = diagram.selectedItems;\n      var paddedBounds = new Rect(selectorBnds.x, selectorBnds.y, selectorBnds.width, selectorBnds.height);\n      if (obj.shapeAnnotationType === 'Line' || obj.shapeAnnotationType === 'LineWidthArrowHead' || obj.shapeAnnotationType === 'Distance' || obj.shapeAnnotationType === 'Polygon') {\n        var conn = this.pdfViewer.selectedItems.annotations[0];\n        if (conn) {\n          for (var i = 0; i < conn.vertexPoints.length; i++) {\n            if (contains(position, conn.vertexPoints[parseInt(i.toString(), 10)], 10) && conn.leaderHeight !== 0) {\n              return 'ConnectorSegmentPoint_' + i;\n            }\n          }\n        }\n      }\n      if (obj.shapeAnnotationType === 'Distance') {\n        var leaderCount = 0;\n        var newPoint1 = void 0;\n        if (obj && obj.wrapper) {\n          for (var i = 0; i < obj.wrapper.children.length; i++) {\n            var elementAngle = Point.findAngle(obj.sourcePoint, obj.targetPoint);\n            // eslint-disable-next-line\n            var segment = obj.wrapper.children[i];\n            if (segment.id.indexOf('leader') > -1) {\n              var centerPoint = obj.wrapper.children[0].bounds.center;\n              if (leaderCount === 0) {\n                newPoint1 = {\n                  x: obj.sourcePoint.x,\n                  y: obj.sourcePoint.y - obj.leaderHeight\n                };\n                centerPoint = obj.sourcePoint;\n              } else {\n                newPoint1 = {\n                  x: obj.targetPoint.x,\n                  y: obj.targetPoint.y - obj.leaderHeight\n                };\n                centerPoint = obj.targetPoint;\n              }\n              var matrix_1 = identityMatrix();\n              rotateMatrix(matrix_1, elementAngle, centerPoint.x, centerPoint.y);\n              var rotatedPoint = transformPointByMatrix(matrix_1, {\n                x: newPoint1.x,\n                y: newPoint1.y\n              });\n              if (contains(position, rotatedPoint, 10)) {\n                return 'Leader' + leaderCount;\n              }\n              leaderCount++;\n            }\n          }\n        }\n      }\n      var ten = this.pdfViewer.touchPadding;\n      if (this.getZoomFactor() <= 1.5) {\n        ten = ten / this.getZoomFactor();\n      }\n      var matrix = identityMatrix();\n      rotateMatrix(matrix, obj.rotateAngle + element.parentTransform, element.offsetX, element.offsetY);\n      //check for resizing tool\n      var x = element.offsetX - element.pivot.x * element.actualSize.width;\n      var y = element.offsetY - element.pivot.y * element.actualSize.height;\n      var rotateThumb = {\n        x: x + (element.pivot.x === 0.5 ? element.pivot.x * 2 : element.pivot.x) * element.actualSize.width / 2,\n        y: y - 30 / this.getZoomFactor()\n      };\n      rotateThumb = transformPointByMatrix(matrix, rotateThumb);\n      if (obj.shapeAnnotationType === 'Stamp' && contains(position, rotateThumb, ten)) {\n        return 'Rotate';\n      }\n      paddedBounds = this.inflate(ten, paddedBounds);\n      if (paddedBounds.containsPoint(position, 0)) {\n        var action = this.checkResizeHandles(this.pdfViewer, element, position, matrix, x, y);\n        if (action) {\n          return action;\n        }\n      }\n      if (this.pdfViewer.selectedItems.annotations.indexOf(obj) > -1) {\n        return 'Drag';\n      } else if (this.pdfViewer.selectedItems.formFields.indexOf(obj) > -1 && this.pdfViewer.designerMode) {\n        return 'Drag';\n      }\n      return 'Select';\n    }\n    return this.pdfViewer.tool || 'Select';\n  };\n  PdfViewerBase.prototype.inflate = function (padding, bound) {\n    bound.x -= padding;\n    bound.y -= padding;\n    bound.width += padding * 2;\n    bound.height += padding * 2;\n    return bound;\n  };\n  PdfViewerBase.prototype.checkResizeHandles = function (diagram, element, position, matrix, x, y) {\n    var action;\n    if (!action) {\n      action = this.checkForResizeHandles(diagram, element, position, matrix, x, y);\n    }\n    if (action) {\n      return action;\n    }\n    return null;\n  };\n  PdfViewerBase.prototype.checkForResizeHandles = function (diagram, element, position, matrix, x, y) {\n    var forty = 40 / 1;\n    var ten = this.pdfViewer.touchPadding / 1;\n    // Resizer cursor adjustment factor for higher zoom values\n    var resizerBuffer = 1.9;\n    if (this.getZoomFactor() >= 2.0 && !Browser.isDevice) {\n      ten = ten / (this.getZoomFactor() / resizerBuffer);\n    }\n    if (element.actualSize.width < 40 || element.actualSize.height < 40 && Browser.isDevice) {\n      ten = ten / 2 * this.getZoomFactor() / 1;\n    }\n    var selectedItems = diagram.selectedItems;\n    var isStamp = false;\n    var isSticky = false;\n    var isNodeShape = false;\n    var isInk = false;\n    var resizerLocation = this.pdfViewer.annotationSelectorSettings.resizerLocation;\n    if (resizerLocation < 1 || resizerLocation > 3) {\n      resizerLocation = 3;\n    }\n    // eslint-disable-next-line max-len\n    if (this.pdfViewer.selectedItems.annotations[0] && (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Stamp' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'FreeText' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Image' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'HandWrittenSignature' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureText' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureImage')) {\n      isStamp = true;\n    }\n    // eslint-disable-next-line max-len\n    if (this.pdfViewer.selectedItems.annotations[0] && this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'StickyNotes') {\n      isSticky = true;\n    }\n    // eslint-disable-next-line max-len\n    if (this.pdfViewer.selectedItems.annotations[0] && this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Ink') {\n      isInk = true;\n    }\n    // eslint-disable-next-line max-len\n    if (this.pdfViewer.selectedItems.annotations[0] && (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Ellipse' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Radius' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Rectangle')) {\n      isNodeShape = true;\n    }\n    if (!isSticky) {\n      // eslint-disable-next-line max-len\n      if (isInk || isStamp || this.pdfViewer.selectedItems.annotations[0] && (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'HandWrittenSignature' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureText' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureImage') || element.actualSize.width >= forty && element.actualSize.height >= forty && isNodeShape && (resizerLocation === 1 || resizerLocation === 3)) {\n        if (contains(position, transformPointByMatrix(matrix, {\n          x: x + element.actualSize.width,\n          y: y + element.actualSize.height\n        }), ten)) {\n          return 'ResizeSouthEast';\n        }\n        if (contains(position, transformPointByMatrix(matrix, {\n          x: x,\n          y: y + element.actualSize.height\n        }), ten)) {\n          return 'ResizeSouthWest';\n        }\n        if (contains(position, transformPointByMatrix(matrix, {\n          x: x + element.actualSize.width,\n          y: y\n        }), ten)) {\n          return 'ResizeNorthEast';\n        }\n        if (contains(position, transformPointByMatrix(matrix, {\n          x: x,\n          y: y\n        }), ten)) {\n          return 'ResizeNorthWest';\n        }\n      }\n      // eslint-disable-next-line max-len\n      if (isInk || !isNodeShape || isNodeShape && (resizerLocation === 2 || resizerLocation === 3 || !(element.actualSize.width >= forty && element.actualSize.height >= forty) && resizerLocation === 1)) {\n        if (contains(\n        // eslint-disable-next-line max-len\n        position, transformPointByMatrix(matrix, {\n          x: x + element.actualSize.width,\n          y: y + element.actualSize.height / 2\n        }), ten) && !isStamp) {\n          return 'ResizeEast';\n        }\n        // eslint-disable-next-line max-len\n        if (contains(position, transformPointByMatrix(matrix, {\n          x: x,\n          y: y + element.actualSize.height / 2\n        }), ten) && !isStamp) {\n          return 'ResizeWest';\n        }\n        if (contains(\n        // eslint-disable-next-line max-len\n        position, transformPointByMatrix(matrix, {\n          x: x + element.actualSize.width / 2,\n          y: y + element.actualSize.height\n        }), ten) && !isStamp) {\n          return 'ResizeSouth';\n        }\n        // eslint-disable-next-line max-len\n        if (contains(position, transformPointByMatrix(matrix, {\n          x: x + element.actualSize.width / 2,\n          y: y\n        }), ten) && !isStamp) {\n          return 'ResizeNorth';\n        }\n      }\n    }\n    return null;\n  };\n  /**\n   * @private\n   * @param {string} fieldID - The fieldID\n   * @returns {boolean} - Returns true or false.\n   */\n  PdfViewerBase.prototype.checkSignatureFormField = function (fieldID) {\n    var isFormFieldSign = false;\n    if (this.pdfViewer.formDesignerModule) {\n      fieldID = fieldID.split('_')[0];\n    }\n    // eslint-disable-next-line\n    var formField = this.pdfViewer.nameTable[fieldID];\n    if (formField) {\n      if (formField.formFieldAnnotationType === 'SignatureField' || formField.formFieldAnnotationType === 'InitialField' || formField.annotName === 'SignatureField') {\n        isFormFieldSign = true;\n      }\n    }\n    return isFormFieldSign;\n  };\n  /**\n   * @private\n   * @param {MouseEvent | TouchEvent} evt - The event.\n   * @returns {void}\n   */\n  PdfViewerBase.prototype.diagramMouseMove = function (evt) {\n    var allowServerDataBind = this.pdfViewer.allowServerDataBinding;\n    var pageDiv = this.getElement('_pageDiv_' + (this.currentPageNumber - 1));\n    this.pdfViewer.enableServerDataBinding(false);\n    this.currentPosition = this.getMousePosition(evt);\n    this.pdfViewer.firePageMouseover(this.currentPosition.x, this.currentPosition.y);\n    if (this.pdfViewer.annotation) {\n      this.activeElements.activePageID = this.pdfViewer.annotation.getEventPageNumber(evt);\n    } else if (this.pdfViewer.formDesignerModule) {\n      this.activeElements.activePageID = this.pdfViewer.formDesignerModule.getEventPageNumber(evt);\n    }\n    var obj = findActiveElement(evt, this, this.pdfViewer);\n    if (this.tool instanceof NodeDrawingTool || this.tool instanceof LineTool) {\n      obj = this.pdfViewer.drawingObject;\n    }\n    var target;\n    var isFormFieldSign = this.pdfViewer.selectedItems.annotations.length > 0 ? this.checkSignatureFormField(this.pdfViewer.selectedItems.annotations[0].id) : false;\n    if (Point.equals(this.currentPosition, this.prevPosition) === false || this.inAction) {\n      if (this.isMouseDown === false) {\n        this.eventArgs = {};\n        var sourceDrawingElement = null;\n        if (obj) {\n          this.tool = this.getTool(this.action);\n          if (obj.wrapper) {\n            sourceDrawingElement = obj.wrapper.children[0];\n            if (sourceDrawingElement) {\n              target = obj;\n            }\n          }\n        }\n        var eventTarget = evt.target;\n        this.action = this.findToolToActivate(obj, this.currentPosition);\n        // eslint-disable-next-line\n        if (obj && obj.annotationSettings && obj.annotationSettings.isLock) {\n          if (this.action === 'Select') {\n            if (!this.pdfViewer.annotationModule.checkAllowedInteractions('Select', obj)) {\n              this.action = '';\n            }\n          }\n          if (this.action === 'Drag') {\n            if (!this.pdfViewer.annotationModule.checkAllowedInteractions('Move', obj)) {\n              this.action = 'Select';\n            }\n          }\n          // eslint-disable-next-line max-len\n          if (this.action === 'ResizeSouthEast' || this.action === 'ResizeNorthEast' || this.action === 'ResizeNorthWest' || this.action === 'ResizeSouthWest' ||\n          // eslint-disable-next-line max-len\n          this.action === 'ResizeNorth' || this.action === 'ResizeWest' || this.action === 'ResizeEast' || this.action === 'ResizeSouth' || this.action.includes('ConnectorSegmentPoint') || this.action.includes('Leader')) {\n            if (!this.pdfViewer.annotationModule.checkAllowedInteractions('Resize', obj)) {\n              this.action = 'Select';\n            }\n          }\n        }\n        // eslint-disable-next-line max-len\n        if (!this.pdfViewer.designerMode && (!isNullOrUndefined(target) && !isNullOrUndefined(target.formFieldAnnotationType) || isFormFieldSign)) {\n          if (this.action === 'ResizeSouthEast' || this.action === 'ResizeNorthEast' || this.action === 'ResizeNorthWest' || this.action === 'ResizeSouthWest' ||\n          // eslint-disable-next-line max-len\n          this.action === 'ResizeNorth' || this.action === 'Drag' || this.action === 'ResizeWest' || this.action === 'ResizeEast' || this.action === 'ResizeSouth' || this.action.includes('ConnectorSegmentPoint') || this.action.includes('Leader')) {\n            this.action = '';\n          }\n        }\n        this.tool = this.getTool(this.action);\n        this.setCursor(eventTarget, evt);\n        if (this.pdfViewer.linkAnnotationModule && this.pdfViewer.selectedItems.annotations.length != 0 && this.pdfViewer.selectedItems.formFields.length != 0) {\n          this.pdfViewer.linkAnnotationModule.disableHyperlinkNavigationUnderObjects(eventTarget, evt, this);\n        }\n      } else {\n        if (!this.tool && this.action && this.action === 'Rotate') {\n          this.tool = this.getTool(this.action);\n          if (evt.target) {\n            this.setCursor(evt.target, evt);\n          }\n        }\n        // eslint-disable-next-line max-len\n        if (!this.pdfViewer.designerMode && (!isNullOrUndefined(target) && !isNullOrUndefined(target.formFieldAnnotationType) || isFormFieldSign)) {\n          if (this.action === 'ResizeSouthEast' || this.action === 'ResizeNorthEast' || this.action === 'ResizeNorthWest' || this.action === 'ResizeSouthWest' ||\n          // eslint-disable-next-line max-len\n          this.action === 'ResizeNorth' || this.action === 'Drag' || this.action === 'ResizeWest' || this.action === 'ResizeEast' || this.action === 'ResizeSouth' || this.action.includes('ConnectorSegmentPoint') || this.action.includes('Leader')) {\n            this.action = '';\n            this.tool = null;\n          }\n        }\n        if (this.eventArgs && this.eventArgs.source) {\n          var eventTarget = evt.target;\n          this.updateDefaultCursor(this.eventArgs.source, eventTarget, evt);\n        } else {\n          this.setCursor(evt.target, evt);\n        }\n        this.diagramMouseActionHelper(evt);\n        if (this.tool) {\n          var currentObject = obj;\n          if (currentObject && currentObject.shapeAnnotationType === 'FreeText') {\n            if (this.pdfViewer.freeTextSettings.allowEditTextOnly && this.action !== \"Ink\" && this.eventArgs.source && this.eventArgs.source.shapeAnnotationType === \"FreeText\") {\n              var eventTarget = event.target;\n              eventTarget.style.cursor = 'default';\n              this.tool = null;\n            }\n          }\n          if (this.tool != null) {\n            var info = {\n              ctrlKey: evt.ctrlKey,\n              shiftKey: evt.shiftKey\n            };\n            this.eventArgs.info = info;\n            this.tool.mouseMove(this.eventArgs);\n          }\n        }\n      }\n      if (this.pdfViewer.drawingObject && this.pdfViewer.drawingObject.formFieldAnnotationType && this.action !== 'Drag') {\n        if (!(this.tool instanceof ResizeTool)) {\n          this.tool = this.getTool(this.action);\n          if (this.tool instanceof NodeDrawingTool) {\n            var obj_1 = this.pdfViewer.drawingObject;\n            // eslint-disable-next-line\n            var bounds = this.pdfViewer.formDesignerModule.updateFormFieldInitialSize(obj_1, obj_1.formFieldAnnotationType);\n            var pageWidth = this.pageContainer.firstElementChild.clientWidth - bounds.width;\n            var pageHeight = this.pageContainer.firstElementChild.clientHeight - bounds.height;\n            if (this.pdfViewer.formDesignerModule && obj_1.formFieldAnnotationType && this.currentPosition.x < pageWidth && this.currentPosition.y < pageHeight) {\n              // eslint-disable-next-line\n              var formFieldElement = document.getElementById('FormField_helper_html_element');\n              if (!formFieldElement) {\n                // eslint-disable-next-line max-len\n                this.pdfViewer.formDesignerModule.drawHelper(obj_1.formFieldAnnotationType, obj_1, evt);\n              } else if (formFieldElement) {\n                var previousActivePage = formFieldElement.parentElement.id.split(\"_text_\")[1] || formFieldElement.parentElement.id.split(\"_textLayer_\")[1] || formFieldElement.parentElement.id.split(\"_annotationCanvas_\")[1] || formFieldElement.parentElement.id.split(\"_pageDiv_\")[1];\n                if (parseInt(previousActivePage) !== this.activeElements.activePageID) {\n                  formFieldElement.remove(\"FormField_helper_html_element\");\n                } else {\n                  // eslint-disable-next-line\n                  var point = this.getMousePosition(event);\n                  if (obj_1.formFieldAnnotationType === 'Checkbox' && formFieldElement.firstElementChild.firstElementChild.lastElementChild) {\n                    formFieldElement.firstElementChild.firstElementChild.lastElementChild.style.visibility = 'visible';\n                  } else if (obj_1.formFieldAnnotationType === 'SignatureField' || obj_1.formFieldAnnotationType === 'InitialField') {\n                    formFieldElement.firstElementChild.firstElementChild.style.visibility = 'visible';\n                    formFieldElement.firstElementChild.lastElementChild.style.visibility = 'visible';\n                  } else {\n                    formFieldElement.firstElementChild.firstElementChild.style.visibility = 'visible';\n                  }\n                  formFieldElement.setAttribute('style', 'height:' + bounds.height + 'px; width:' + bounds.width + 'px;left:' + point.x + 'px; top:' + point.y + 'px;' + 'position:absolute;opacity: 0.5;');\n                }\n              }\n            } else if (this.currentPosition.x > pageWidth || this.currentPosition.y > pageHeight) {\n              // eslint-disable-next-line\n              var formFieldElement = document.getElementById('FormField_helper_html_element');\n              if (!formFieldElement) {\n                // eslint-disable-next-line max-len\n                this.pdfViewer.formDesignerModule.drawHelper(obj_1.formFieldAnnotationType, obj_1, evt);\n              } else if (formFieldElement) {\n                // eslint-disable-next-line\n                var point = this.getMousePosition(event);\n                formFieldElement.setAttribute('style', 'height:' + bounds.height + 'px; width:' + bounds.width + 'px;left:' + point.x + 'px; top:' + point.y + 'px;' + 'position:absolute;opacity: 0.5;');\n                if (this.currentPosition.x + parseInt(formFieldElement.style.width) > parseInt(pageDiv.style.width)) {\n                  if (obj_1.formFieldAnnotationType === 'Checkbox' && formFieldElement.firstElementChild.firstElementChild.lastElementChild) {\n                    formFieldElement.firstElementChild.firstElementChild.lastElementChild.style.visibility = 'hidden';\n                  } else if (obj_1.formFieldAnnotationType === 'SignatureField' || obj_1.formFieldAnnotationType === 'InitialField') {\n                    formFieldElement.firstElementChild.firstElementChild.style.visibility = 'hidden';\n                    formFieldElement.firstElementChild.lastElementChild.style.visibility = 'hidden';\n                  } else {\n                    formFieldElement.firstElementChild.firstElementChild.style.visibility = 'hidden';\n                  }\n                } else {\n                  if (obj_1.formFieldAnnotationType === 'Checkbox' && formFieldElement.firstElementChild.firstElementChild.lastElementChild) {\n                    formFieldElement.firstElementChild.firstElementChild.lastElementChild.style.visibility = 'visible';\n                  } else if (obj_1.formFieldAnnotationType === 'SignatureField' || obj_1.formFieldAnnotationType === 'InitialField') {\n                    formFieldElement.firstElementChild.firstElementChild.style.visibility = 'visible';\n                    formFieldElement.firstElementChild.lastElementChild.style.visibility = 'visible';\n                  } else {\n                    formFieldElement.firstElementChild.firstElementChild.style.visibility = 'visible';\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n      this.prevPosition = this.currentPosition;\n    }\n    this.pdfViewer.enableServerDataBinding(allowServerDataBind, true);\n  };\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.updateDefaultCursor = function (source, target, event) {\n    // eslint-disable-next-line max-len\n    if (source && source.pageIndex !== undefined && source.pageIndex !== this.activeElements.activePageID && target) {\n      // eslint-disable-next-line\n      this.isPanMode ? target.style.cursor = 'grab' : target.style.cursor = 'default';\n    } else {\n      this.setCursor(target, event);\n    }\n  };\n  /**\n   * @private\n   * @param {MouseEvent | TouchEvent} evt - The event.\n   * @returns {void}\n   */\n  PdfViewerBase.prototype.diagramMouseLeave = function (evt) {\n    this.currentPosition = this.getMousePosition(evt);\n    if (this.pdfViewer.annotation) {\n      this.activeElements.activePageID = this.pdfViewer.annotation.getEventPageNumber(evt);\n    }\n    if (isNaN(this.activeElements.activePageID) && this.pdfViewer.formDesignerModule) {\n      this.activeElements.activePageID = this.pdfViewer.formDesignerModule.getEventPageNumber(evt);\n    }\n    var shapeElement = findActiveElement(evt, this, this.pdfViewer);\n    var mouseMoveforce = false;\n    var target;\n    if (Point.equals(this.currentPosition, this.prevPosition) === false || this.inAction) {\n      if (this.isMouseDown === false || mouseMoveforce) {\n        this.eventArgs = {};\n        var sourceElement = null;\n        if (shapeElement) {\n          sourceElement = shapeElement.wrapper.children[0];\n          if (sourceElement) {\n            target = shapeElement;\n          }\n          mouseMoveforce = false;\n        }\n      } else {\n        this.diagramMouseActionHelper(evt);\n        // eslint-disable-next-line max-len\n        if (this.tool && this.action !== 'Drag' && this.pdfViewer.tool !== 'Stamp' && this.tool.currentElement && this.tool.currentElement.shapeAnnotationType !== 'Stamp') {\n          this.tool.mouseLeave(this.eventArgs);\n          this.tool = null;\n          if (this.pdfViewer.annotation) {\n            this.pdfViewer.annotationModule.renderAnnotations(this.previousPage, null, null, null);\n          }\n        }\n      }\n      this.prevPosition = this.currentPosition;\n    }\n  };\n  PdfViewerBase.prototype.diagramMouseActionHelper = function (evt) {\n    this.eventArgs.position = this.currentPosition;\n    if (this.action === 'Drag' && this.eventArgs.source instanceof Selector) {\n      this.getMouseEventArgs(this.currentPosition, this.eventArgs, evt);\n    }\n    this.getMouseEventArgs(this.currentPosition, this.eventArgs, evt, this.eventArgs.source);\n    this.inAction = true;\n    this.initialEventArgs = null;\n  };\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.setCursor = function (eventTarget, event) {\n    // eslint-disable-next-line max-len\n    var freeTextAnnotModule = this.pdfViewer.annotationModule ? this.pdfViewer.annotationModule.freeTextAnnotationModule : null;\n    var cursorType;\n    if (this.tool instanceof ResizeTool) {\n      if (this.tool.corner === 'ResizeNorthWest') {\n        cursorType = this.setResizerCursorType();\n        eventTarget.style.cursor = isNullOrUndefined(cursorType) ? 'nw-resize' : cursorType;\n      } else if (this.tool.corner === 'ResizeNorthEast') {\n        cursorType = this.setResizerCursorType();\n        eventTarget.style.cursor = isNullOrUndefined(cursorType) ? 'ne-resize' : cursorType;\n      } else if (this.tool.corner === 'ResizeSouthWest') {\n        cursorType = this.setResizerCursorType();\n        eventTarget.style.cursor = isNullOrUndefined(cursorType) ? 'sw-resize' : cursorType;\n      } else if (this.tool.corner === 'ResizeSouthEast') {\n        cursorType = this.setResizerCursorType();\n        eventTarget.style.cursor = isNullOrUndefined(cursorType) ? 'se-resize' : cursorType;\n      } else if (this.tool.corner === 'ResizeNorth') {\n        cursorType = this.setResizerCursorType();\n        eventTarget.style.cursor = isNullOrUndefined(cursorType) ? 'n-resize' : cursorType;\n      } else if (this.tool.corner === 'ResizeWest') {\n        cursorType = this.setResizerCursorType();\n        eventTarget.style.cursor = isNullOrUndefined(cursorType) ? 'w-resize' : cursorType;\n      } else if (this.tool.corner === 'ResizeEast') {\n        cursorType = this.setResizerCursorType();\n        eventTarget.style.cursor = isNullOrUndefined(cursorType) ? 'e-resize' : cursorType;\n      } else if (this.tool.corner === 'ResizeSouth') {\n        cursorType = this.setResizerCursorType();\n        eventTarget.style.cursor = isNullOrUndefined(cursorType) ? 's-resize' : cursorType;\n      }\n    } else if (this.isCommentIconAdded && this.isAddComment) {\n      eventTarget.style.cursor = 'crosshair';\n    } else if (this.pdfViewer.enableHandwrittenSignature && this.isNewSignatureAdded && this.tool instanceof StampTool) {\n      eventTarget.style.cursor = 'crosshair';\n    } else if (this.tool instanceof MoveTool) {\n      eventTarget.style.cursor = 'move';\n      // eslint-disable-next-line max-len\n    } else if (this.tool instanceof NodeDrawingTool || this.tool instanceof LineTool || this.tool instanceof PolygonDrawingTool || freeTextAnnotModule && freeTextAnnotModule.isNewAddedAnnot || this.tool instanceof InkDrawingTool) {\n      eventTarget.style.cursor = 'crosshair';\n    } else if (this.tool instanceof ConnectTool) {\n      if (this.tool.endPoint && this.tool.endPoint.indexOf('Leader0')) {\n        cursorType = this.setResizerCursorType();\n        eventTarget.style.cursor = isNullOrUndefined(cursorType) ? 'nw-resize' : cursorType;\n      } else if (this.tool.endPoint && this.tool.endPoint.indexOf('Leader1')) {\n        cursorType = this.setResizerCursorType();\n        eventTarget.style.cursor = isNullOrUndefined(cursorType) ? 'ne-resize' : cursorType;\n      } else if (this.tool.endPoint && this.tool.endPoint.indexOf('ConnectorSegmentPoint')) {\n        eventTarget.style.cursor = 'sw-resize';\n      }\n    } else {\n      if (eventTarget.classList.contains('e-pv-text')) {\n        eventTarget.style.cursor = 'text';\n      } else if (eventTarget.classList.contains('e-pv-hyperlink')) {\n        eventTarget.style.cursor = 'pointer';\n      } else if (this.isPanMode) {\n        if (this.isViewerMouseDown && event.type === 'mousemove') {\n          eventTarget.style.cursor = 'grabbing';\n        } else {\n          var obj = findActiveElement(event, this, this.pdfViewer);\n          if (obj && event.type === 'mousemove') {\n            eventTarget.style.cursor = 'pointer';\n            // eslint-disable-next-line max-len\n            var currentObject = obj;\n            // eslint-disable-next-line\n            var currentPosition = this.getMousePosition(event);\n            // eslint-disable-next-line\n            var relativePosition = this.relativePosition(event);\n            // eslint-disable-next-line\n            var viewerPositions = {\n              left: relativePosition.x,\n              top: relativePosition.y\n            };\n            // eslint-disable-next-line\n            var mousePositions = {\n              left: currentPosition.x,\n              top: currentPosition.y\n            };\n            // eslint-disable-next-line\n            var annotationSettings = {\n              opacity: currentObject.opacity,\n              fillColor: currentObject.fillColor,\n              strokeColor: currentObject.strokeColor,\n              thicknes: currentObject.thickness,\n              author: currentObject.author,\n              subject: currentObject.subject,\n              modifiedDate: currentObject.modifiedDate\n            };\n            // eslint-disable-next-line max-len\n            this.isMousedOver = true;\n            var isFormField = this.checkSignatureFormField(currentObject.id);\n            if (currentObject.formFieldAnnotationType) {\n              this.isFormFieldMousedOver = true;\n              var field_1 = {\n                // eslint-disable-next-line\n                value: currentObject.value,\n                fontFamily: currentObject.fontFamily,\n                fontSize: currentObject.fontSize,\n                fontStyle: currentObject.fontStyle,\n                // eslint-disable-next-line max-len\n                color: currentObject.color,\n                backgroundColor: currentObject.backgroundColor,\n                borderColor: currentObject.borderColor,\n                // eslint-disable-next-line\n                thickness: currentObject.thickness,\n                alignment: currentObject.alignment,\n                isReadonly: currentObject.isReadonly,\n                visibility: currentObject.visibility,\n                // eslint-disable-next-line\n                maxLength: currentObject.maxLength,\n                isRequired: currentObject.isRequired,\n                isPrint: currentObject.isPrint,\n                rotation: currentObject.rotateAngle,\n                tooltip: currentObject.tooltip,\n                options: currentObject.options,\n                // eslint-disable-next-line\n                isChecked: currentObject.isChecked,\n                isSelected: currentObject.isSelected\n              };\n              this.pdfViewer.fireFormFieldMouseoverEvent('formFieldMouseover', field_1, currentObject.pageIndex, relativePosition.x, relativePosition.y, currentPosition.x, currentPosition.y);\n            } else {\n              if (!isFormField)\n                // eslint-disable-next-line max-len\n                this.pdfViewer.fireAnnotationMouseover(currentObject.annotName, currentObject.pageIndex, currentObject.shapeAnnotationType, currentObject.bounds, annotationSettings, mousePositions, viewerPositions);\n            }\n          } else {\n            eventTarget.style.cursor = 'grab';\n            if (this.isMousedOver) {\n              var pageIndex = void 0;\n              if (this.pdfViewer.formDesignerModule) {\n                pageIndex = this.pdfViewer.formDesignerModule.getEventPageNumber(event);\n              } else {\n                pageIndex = this.pdfViewer.annotation.getEventPageNumber(event);\n              }\n              if (this.isFormFieldMousedOver) {\n                this.pdfViewer.fireFormFieldMouseLeaveEvent('formFieldMouseLeave', null, pageIndex);\n              } else {\n                this.pdfViewer.fireAnnotationMouseLeave(pageIndex);\n              }\n              this.isMousedOver = false;\n              this.isFormFieldMousedOver = false;\n            }\n          }\n        }\n      } else {\n        var obj = findActiveElement(event, this, this.pdfViewer);\n        if (obj && this.pdfViewer.selectedItems.annotations.length === 0 && event.type === 'mousemove') {\n          var currentObject = obj;\n          // eslint-disable-next-line\n          var annotationObject = this.pdfViewer.nameTable[currentObject.id];\n          // eslint-disable-next-line max-len\n          if (annotationObject.shapeAnnotationType !== 'HandWrittenSignature' && annotationObject.shapeAnnotationType !== 'Ink' && annotationObject.annotationSettings && annotationObject.annotationSettings.isLock !== undefined) {\n            annotationObject.annotationSettings.isLock = JSON.parse(annotationObject.annotationSettings.isLock);\n          }\n          if (annotationObject.annotationSettings && annotationObject.annotationSettings.isLock) {\n            eventTarget.style.cursor = 'default';\n          } else {\n            eventTarget.style.cursor = 'pointer';\n          }\n          // eslint-disable-next-line\n          var currentPosition = this.getMousePosition(event);\n          // eslint-disable-next-line\n          var relativePosition = this.relativePosition(event);\n          // eslint-disable-next-line\n          var viewerPositions = {\n            left: relativePosition.x,\n            top: relativePosition.y\n          };\n          // eslint-disable-next-line\n          var mousePositions = {\n            left: currentPosition.x,\n            top: currentPosition.y\n          };\n          // eslint-disable-next-line\n          var annotationSettings = {\n            opacity: currentObject.opacity,\n            fillColor: currentObject.fillColor,\n            strokeColor: currentObject.strokeColor,\n            thicknes: currentObject.thickness,\n            author: currentObject.author,\n            subject: currentObject.subject,\n            modifiedDate: currentObject.modifiedDate\n          };\n          // eslint-disable-next-line max-len\n          this.isMousedOver = true;\n          var isFormField = this.checkSignatureFormField(currentObject.id);\n          if (currentObject.formFieldAnnotationType) {\n            this.isFormFieldMousedOver = true;\n            var field_2 = {\n              // eslint-disable-next-line\n              value: currentObject.value,\n              fontFamily: currentObject.fontFamily,\n              fontSize: currentObject.fontSize,\n              fontStyle: currentObject.fontStyle,\n              // eslint-disable-next-line max-len\n              color: currentObject.color,\n              backgroundColor: currentObject.backgroundColor,\n              borderColor: currentObject.borderColor,\n              // eslint-disable-next-line\n              thickness: currentObject.thickness,\n              alignment: currentObject.alignment,\n              isReadonly: currentObject.isReadonly,\n              visibility: currentObject.visibility,\n              // eslint-disable-next-line\n              maxLength: currentObject.maxLength,\n              isRequired: currentObject.isRequired,\n              isPrint: currentObject.isPrint,\n              rotation: currentObject.rotateAngle,\n              tooltip: currentObject.tooltip,\n              options: currentObject.options,\n              // eslint-disable-next-line\n              isChecked: currentObject.isChecked,\n              isSelected: currentObject.isSelected\n            };\n            this.fromTarget = currentObject;\n            this.pdfViewer.fireFormFieldMouseoverEvent('formFieldMouseover', field_2, currentObject.pageIndex, relativePosition.x, relativePosition.y, currentPosition.x, currentPosition.y);\n          } else {\n            if (!isFormField)\n              // eslint-disable-next-line max-len\n              this.pdfViewer.fireAnnotationMouseover(currentObject.annotName, currentObject.pageIndex, currentObject.shapeAnnotationType, currentObject.bounds, annotationSettings, mousePositions, viewerPositions);\n          }\n        } else if (!this.pdfViewer.formDesignerModule && event.target.classList.contains('e-pdfviewer-formFields')) {\n          var pageIndex = this.pdfViewer.annotation.getEventPageNumber(event);\n          var currentPosition = this.getMousePosition(event);\n          var relativePosition = this.relativePosition(event);\n          var viewerPositions = {\n            left: relativePosition.x,\n            top: relativePosition.y\n          };\n          var mousePositions = {\n            left: currentPosition.x,\n            top: currentPosition.y\n          };\n          var dataJson = this.getItemFromSessionStorage('_formfields');\n          var data = JSON.parse(dataJson);\n          for (var i = 0; i < data.length; i++) {\n            if (data[parseInt(i.toString(), 10)].FieldName === event.target.name) {\n              var field = {\n                name: data[parseInt(i.toString(), 10)].FieldName\n              };\n            }\n          }\n          this.isMousedOver = true;\n          this.isFormFieldMousedOver = true;\n          this.pdfViewer.fireFormFieldMouseoverEvent('formFieldMouseover', field, pageIndex, relativePosition.x, relativePosition.y, currentPosition.x, currentPosition.y);\n        } else {\n          if (this.isMousedOver) {\n            var pageIndex = void 0;\n            if (this.pdfViewer.formDesignerModule) {\n              pageIndex = this.pdfViewer.formDesignerModule.getEventPageNumber(event);\n            } else {\n              pageIndex = this.pdfViewer.annotation.getEventPageNumber(event);\n            }\n            if (this.isFormFieldMousedOver) {\n              if (this.fromTarget) {\n                var field_3 = {\n                  // eslint-disable-next-line\n                  name: this.fromTarget.name,\n                  id: this.fromTarget.id,\n                  value: this.fromTarget.value,\n                  fontFamily: this.fromTarget.fontFamily,\n                  fontSize: this.fromTarget.fontSize,\n                  fontStyle: this.fromTarget.fontStyle,\n                  // eslint-disable-next-line max-len\n                  color: this.fromTarget.color,\n                  backgroundColor: this.fromTarget.backgroundColor,\n                  borderColor: this.fromTarget.borderColor,\n                  // eslint-disable-next-line\n                  thickness: this.fromTarget.thickness,\n                  alignment: this.fromTarget.alignment,\n                  isReadonly: this.fromTarget.isReadonly,\n                  visibility: this.fromTarget.visibility,\n                  // eslint-disable-next-line\n                  maxLength: this.fromTarget.maxLength,\n                  isRequired: this.fromTarget.isRequired,\n                  isPrint: this.fromTarget.isPrint,\n                  rotation: this.fromTarget.rotateAngle,\n                  tooltip: this.fromTarget.tooltip,\n                  options: this.fromTarget.options,\n                  // eslint-disable-next-line\n                  isChecked: this.fromTarget.isChecked,\n                  isSelected: this.fromTarget.isSelected\n                };\n                this.pdfViewer.fireFormFieldMouseLeaveEvent('formFieldMouseLeave', field_3, pageIndex);\n              } else {\n                this.pdfViewer.fireFormFieldMouseLeaveEvent('formFieldMouseLeave', null, pageIndex);\n              }\n            } else {\n              this.pdfViewer.fireAnnotationMouseLeave(pageIndex);\n            }\n            this.isMousedOver = false;\n            this.isFormFieldMousedOver = false;\n            eventTarget.style.cursor = 'default';\n          }\n          if (obj && this.pdfViewer.selectedItems.annotations.length === 1 && event.type === 'mousemove') {\n            eventTarget.style.cursor = 'pointer';\n          } else {\n            eventTarget.style.cursor = 'default';\n          }\n        }\n      }\n    }\n  };\n  PdfViewerBase.prototype.setResizerCursorType = function () {\n    var cursorType;\n    // eslint-disable-next-line max-len\n    if (this.pdfViewer.selectedItems.annotations[0] && isNullOrUndefined(this.pdfViewer.selectedItems.annotations[0].annotationSelectorSettings.resizerCursorType)) {\n      if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'FreeText') {\n        // eslint-disable-next-line max-len\n        cursorType = !isNullOrUndefined(this.pdfViewer.freeTextSettings.annotationSelectorSettings) ? this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerCursorType : null;\n      } else if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Stamp') {\n        // eslint-disable-next-line max-len\n        cursorType = !isNullOrUndefined(this.pdfViewer.stampSettings.annotationSelectorSettings) ? this.pdfViewer.stampSettings.annotationSelectorSettings.resizerCursorType : null;\n      } else if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'HandWrittenSignature' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureText' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureImage') {\n        // eslint-disable-next-line max-len\n        cursorType = !isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings) ? this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerCursorType : null;\n      } else if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Ink') {\n        // eslint-disable-next-line max-len\n        cursorType = !isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings) ? this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerCursorType : null;\n      } else if (!this.pdfViewer.selectedItems.annotations[0].measureType) {\n        if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Line') {\n          // eslint-disable-next-line max-len\n          cursorType = !isNullOrUndefined(this.pdfViewer.lineSettings.annotationSelectorSettings) ? this.pdfViewer.lineSettings.annotationSelectorSettings.resizerCursorType : null;\n        } else if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'LineWidthArrowHead') {\n          // eslint-disable-next-line max-len\n          cursorType = !isNullOrUndefined(this.pdfViewer.arrowSettings.annotationSelectorSettings) ? this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerCursorType : null;\n        } else if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Rectangle') {\n          // eslint-disable-next-line max-len\n          cursorType = !isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings) ? this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerCursorType : null;\n        } else if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Ellipse') {\n          // eslint-disable-next-line max-len\n          cursorType = !isNullOrUndefined(this.pdfViewer.circleSettings.annotationSelectorSettings) ? this.pdfViewer.circleSettings.annotationSelectorSettings.resizerCursorType : null;\n        } else if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Polygon') {\n          // eslint-disable-next-line max-len\n          cursorType = !isNullOrUndefined(this.pdfViewer.polygonSettings.annotationSelectorSettings) ? this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerCursorType : null;\n        }\n      } else if (this.pdfViewer.selectedItems.annotations[0].measureType) {\n        if (this.pdfViewer.selectedItems.annotations[0].subject === 'Distance calculation') {\n          // eslint-disable-next-line max-len\n          cursorType = !isNullOrUndefined(this.pdfViewer.distanceSettings.annotationSelectorSettings) ? this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerCursorType : null;\n        } else if (this.pdfViewer.selectedItems.annotations[0].subject === 'Perimeter calculation') {\n          // eslint-disable-next-line max-len\n          cursorType = !isNullOrUndefined(this.pdfViewer.perimeterSettings.annotationSelectorSettings) ? this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerCursorType : null;\n        } else if (this.pdfViewer.selectedItems.annotations[0].subject === 'Area calculation') {\n          // eslint-disable-next-line max-len\n          cursorType = !isNullOrUndefined(this.pdfViewer.areaSettings.annotationSelectorSettings) ? this.pdfViewer.areaSettings.annotationSelectorSettings.resizerCursorType : null;\n        } else if (this.pdfViewer.selectedItems.annotations[0].subject === 'Radius calculation') {\n          // eslint-disable-next-line max-len\n          cursorType = !isNullOrUndefined(this.pdfViewer.radiusSettings.annotationSelectorSettings) ? this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerCursorType : null;\n        } else if (this.pdfViewer.selectedItems.annotations[0].subject === 'Volume calculation') {\n          // eslint-disable-next-line max-len\n          cursorType = !isNullOrUndefined(this.pdfViewer.volumeSettings.annotationSelectorSettings) ? this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerCursorType : null;\n        }\n      }\n    } else {\n      if (this.pdfViewer.selectedItems.annotations[0]) {\n        cursorType = this.pdfViewer.selectedItems.annotations[0].annotationSelectorSettings.resizerCursorType;\n      }\n    }\n    if (!cursorType) {\n      cursorType = this.pdfViewer.annotationSelectorSettings.resizerCursorType;\n    }\n    return cursorType;\n  };\n  /**\n   * @private\n   * @param {Actions | string} action - The actions.\n   * @returns {ToolBase} - Returns tools.\n   */\n  PdfViewerBase.prototype.getTool = function (action) {\n    switch (action) {\n      case 'Select':\n        return new SelectTool(this.pdfViewer, this);\n      case 'Drag':\n        return new MoveTool(this.pdfViewer, this);\n      case 'ResizeSouthEast':\n      case 'ResizeSouthWest':\n      case 'ResizeNorthEast':\n      case 'ResizeNorthWest':\n      case 'ResizeSouth':\n      case 'ResizeNorth':\n      case 'ResizeWest':\n      case 'ResizeEast':\n        return new ResizeTool(this.pdfViewer, this, action);\n      case 'ConnectorSourceEnd':\n      case 'ConnectorTargetEnd':\n      case 'Leader':\n      case 'ConnectorSegmentPoint':\n        return new ConnectTool(this.pdfViewer, this, action);\n      case 'DrawTool':\n        return new NodeDrawingTool(this.pdfViewer, this, this.pdfViewer.drawingObject);\n      case 'Polygon':\n        return new PolygonDrawingTool(this.pdfViewer, this, 'Polygon');\n      case 'Distance':\n        return new LineTool(this.pdfViewer, this, 'Leader1', undefined);\n      case 'Line':\n        return new LineTool(this.pdfViewer, this, 'ConnectorSegmentPoint_1', this.pdfViewer.drawingObject);\n      case 'Perimeter':\n        return new PolygonDrawingTool(this.pdfViewer, this, 'Perimeter');\n      case 'Rotate':\n        return new RotateTool(this.pdfViewer, this);\n      case 'Stamp':\n        return new StampTool(this.pdfViewer, this);\n      case 'Ink':\n        return new InkDrawingTool(this.pdfViewer, this, this.pdfViewer.drawingObject);\n    }\n    if (action.indexOf('ConnectorSegmentPoint') > -1 || action.indexOf('Leader') > -1) {\n      return new ConnectTool(this.pdfViewer, this, action);\n    }\n    return null;\n  };\n  /**\n   * @private\n   * @param {MouseEvent | TouchEvent} evt - The events.\n   * @returns {void}\n   */\n  PdfViewerBase.prototype.diagramMouseUp = function (evt) {\n    var allowServerDataBind = this.pdfViewer.allowServerDataBinding;\n    this.pdfViewer.enableServerDataBinding(false);\n    var touches;\n    var isAnnotResized = this.action.toLowerCase().includes('resize') || this.action.toLowerCase().includes('connectorsegmentpoint');\n    var isAnnotationDrawn = this.action === 'Drag' || isAnnotResized || (this.tool instanceof NodeDrawingTool || this.tool instanceof LineTool || this.tool instanceof PolygonDrawingTool) && this.tool.dragging && this.tool.drawingObject;\n    if (this.tool) {\n      if (!this.inAction && evt.which !== 3) {\n        if (this.action === 'Drag') {\n          this.action = 'Select';\n          var obj = findActiveElement(evt, this, this.pdfViewer);\n          var isMultipleSelect = true;\n        }\n      }\n      var isGroupAction = void 0;\n      if (!(this.tool instanceof PolygonDrawingTool) && !(this.tool instanceof LineTool) && !(this.tool instanceof NodeDrawingTool)) {\n        this.inAction = false;\n        this.isMouseDown = false;\n      }\n      this.currentPosition = this.getMousePosition(evt);\n      if (this.tool) {\n        this.eventArgs.position = this.currentPosition;\n        this.getMouseEventArgs(this.currentPosition, this.eventArgs, evt, this.eventArgs.source);\n        var ctrlKey = this.isMetaKey(evt);\n        var info = {\n          ctrlKey: evt.ctrlKey,\n          shiftKey: evt.shiftKey\n        };\n        this.eventArgs.info = info;\n        this.eventArgs.clickCount = evt.detail;\n        this.tool.mouseUp(this.eventArgs);\n        this.isAnnotationMouseDown = false;\n        this.isFormFieldMouseDown = false;\n        // eslint-disable-next-line max-len\n        if ((this.tool instanceof NodeDrawingTool || this.tool instanceof LineTool || this.tool instanceof PolygonDrawingTool) && !this.tool.dragging) {\n          this.inAction = false;\n          this.isMouseDown = false;\n        }\n        if (isAnnotationDrawn) {\n          var obj = findActiveElement(evt, this, this.pdfViewer);\n          // eslint-disable-next-line max-len\n          if (this.isShapeAnnotationModule() || this.isCalibrateAnnotationModule()) {\n            this.pdfViewer.annotation.onShapesMouseup(obj, evt);\n          }\n        }\n        this.isAnnotationDrawn = false;\n      }\n    }\n    var target = evt.target;\n    // eslint-disable-next-line max-len\n    if (!touches && evt.cancelable && !(this.isDeviceiOS && !this.pdfViewer.annotationModule) && this.skipPreventDefault(target)) {\n      evt.preventDefault();\n    }\n    this.eventArgs = {};\n    this.pdfViewer.enableServerDataBinding(allowServerDataBind, true);\n  };\n  /**\n   * @private\n   * @param {HTMLElement} target - The target.\n   * @returns {boolean} - Returns true or false.\n   */\n  PdfViewerBase.prototype.skipPreventDefault = function (target) {\n    var isSkipped = false;\n    var isSkip = false;\n    // eslint-disable-next-line max-len\n    if (this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.freeTextAnnotationModule && this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus) {\n      isSkip = true;\n    }\n    // eslint-disable-next-line max-len\n    if (target.parentElement && target.parentElement.className !== 'foreign-object' && !target.classList.contains('e-pv-radio-btn') && !target.classList.contains('e-pv-radiobtn-span') && !target.classList.contains('e-pv-checkbox-div') && !target.classList.contains('e-pdfviewer-formFields') && !target.classList.contains('e-pdfviewer-ListBox') && !target.classList.contains('e-pdfviewer-signatureformfields') && !(target.className === 'free-text-input' && target.tagName === 'TEXTAREA') && !isSkip && !(target.className === 'e-pv-hyperlink') && target.parentElement.classList.length > 0 && !target.parentElement.classList.contains(\"e-editable-elements\")) {\n      isSkipped = true;\n    }\n    return isSkipped;\n  };\n  PdfViewerBase.prototype.isMetaKey = function (evt) {\n    return navigator.platform.match('Mac') ? evt.metaKey : evt.ctrlKey;\n  };\n  /**\n   * @private\n   * @param {MouseEvent | TouchEvent} evt - The events.\n   * @returns {void}\n   */\n  PdfViewerBase.prototype.diagramMouseDown = function (evt) {\n    var _this = this;\n    if (this.tool instanceof MoveTool && !(this.tool instanceof StampTool) && this.tool['inAction']) {\n      this.diagramMouseUp(evt);\n      if (evt.which === 1) {\n        this.preventContextmenu = true;\n        setTimeout(function () {\n          _this.preventContextmenu = false;\n        }, 200);\n      }\n    }\n    var allowServerDataBind = this.pdfViewer.allowServerDataBinding;\n    this.pdfViewer.enableServerDataBinding(false);\n    var touches = null;\n    touches = evt.touches;\n    this.isMouseDown = true;\n    this.isAnnotationAdded = false;\n    this.currentPosition = this.prevPosition = this.getMousePosition(evt);\n    this.eventArgs = {};\n    var isStamp = false;\n    if (this.pdfViewer.tool === 'Stamp') {\n      this.pdfViewer.tool = '';\n      isStamp = true;\n    }\n    var target;\n    if (this.pdfViewer.annotation) {\n      this.activeElements.activePageID = this.pdfViewer.annotation.getEventPageNumber(evt) ? this.pdfViewer.annotation.getEventPageNumber(evt) : this.pdfViewer.currentPageNumber - 1;\n    }\n    var obj = findActiveElement(evt, this, this.pdfViewer);\n    if (Browser.isDevice && !this.pdfViewer.enableDesktopMode && obj && !(obj instanceof PdfFormFieldBase)) {\n      evt.preventDefault();\n    }\n    if (this.pdfViewer.annotation && this.pdfViewer.enableStampAnnotations) {\n      var stampModule = this.pdfViewer.annotationModule.stampAnnotationModule;\n      if (stampModule && stampModule.isNewStampAnnot) {\n        var stampObj = obj;\n        if (!stampObj && this.pdfViewer.selectedItems.annotations[0]) {\n          stampObj = this.pdfViewer.selectedItems.annotations[0];\n        }\n        if (stampObj) {\n          this.isViewerMouseDown = false;\n          stampObj.opacity = this.pdfViewer.stampSettings.opacity;\n          this.isNewStamp = true;\n          var opacity = void 0;\n          if (stampObj.shapeAnnotationType === 'Image') {\n            opacity = this.pdfViewer.customStampSettings.opacity;\n          } else {\n            opacity = this.pdfViewer.stampSettings.opacity;\n          }\n          // eslint-disable-next-line max-len\n          this.pdfViewer.nodePropertyChange(stampObj, {\n            opacity: opacity\n          });\n          this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode = false;\n          if (stampObj.shapeAnnotationType === 'Image' && !this.isAlreadyAdded) {\n            this.stampAdded = true;\n            var stampName = stampObj.id;\n            if (stampModule.currentStampAnnotation && stampModule.currentStampAnnotation.signatureName) {\n              stampName = stampModule.currentStampAnnotation.signatureName;\n            }\n            var isSkip = false;\n            for (var i = 0; i < this.customStampCollection.length; i++) {\n              if (this.customStampCollection[parseInt(i.toString(), 10)].customStampName === stampName) {\n                isSkip = true;\n                break;\n              }\n            }\n            if (isSkip) {\n              stampName = stampObj.id;\n            }\n            stampName = stampModule.customStampName ? stampModule.customStampName : stampModule.currentStampAnnotation.signatureName;\n            this.customStampCollection.push({\n              customStampName: stampName,\n              customStampImageSource: stampObj.data\n            });\n            if (isBlazor()) {\n              this.pdfViewer._dotnetInstance.invokeMethodAsync(\"UpdateCustomStampCollection\", stampName, stampObj.data);\n            }\n          }\n          if (this.pdfViewer.customStampSettings.enableCustomStamp && this.pdfViewer.customStampSettings.isAddToMenu) {\n            this.stampAdded = true;\n          }\n          this.isAlreadyAdded = false;\n          stampModule.updateDeleteItems(stampObj.pageIndex, stampObj, stampObj.opacity);\n          stampModule.resetAnnotation();\n          stampModule.isNewStampAnnot = false;\n        }\n      }\n    }\n    if (this.isNewSignatureAdded) {\n      this.signatureCount++;\n      this.currentSignatureAnnot = null;\n      var signObject = obj;\n      if (isNullOrUndefined(signObject) && this.pdfViewer.selectedItems.annotations[0]) {\n        signObject = this.pdfViewer.selectedItems.annotations[0];\n      }\n      if (signObject) {\n        this.signatureAdded = true;\n        this.signatureModule.storeSignatureData(signObject.pageIndex, signObject);\n        // eslint-disable-next-line\n        var bounds = {\n          left: signObject.bounds.x,\n          top: signObject.bounds.y,\n          width: signObject.bounds.width,\n          height: signObject.bounds.height\n        };\n        // eslint-disable-next-line max-len\n        this.pdfViewer.fireSignatureAdd(signObject.pageIndex, signObject.signatureName, signObject.shapeAnnotationType, bounds, signObject.opacity, signObject.strokeColor, signObject.thickness, this.signatureModule.saveImageString);\n      }\n      this.isNewSignatureAdded = false;\n    }\n    if (this.pdfViewer.annotationModule) {\n      var freeTextAnnotModule = this.pdfViewer.annotationModule.freeTextAnnotationModule;\n      var canvasPaddingLeft = 5,\n        canvasPaddingWidth = 10;\n      // eslint-disable-next-line\n      if (freeTextAnnotModule.isNewFreeTextAnnot === true) {\n        var canvas = void 0;\n        // eslint-disable-next-line max-len\n        if (evt.target && (evt.target.id.indexOf('_text') > -1 || evt.target.id.indexOf('_annotationCanvas') > -1 || evt.target.classList.contains('e-pv-hyperlink')) && this.pdfViewer.annotation) {\n          var pageIndex = this.pdfViewer.annotation.getEventPageNumber(evt);\n          var diagram = document.getElementById(this.pdfViewer.element.id + '_annotationCanvas_' + pageIndex);\n          if (diagram) {\n            var canvas1 = diagram.getBoundingClientRect();\n            var left = canvas1.x ? canvas1.x : canvas1.left;\n            var top_4 = canvas1.y ? canvas1.y : canvas1.top;\n            canvas = new Rect(left + canvasPaddingLeft, top_4 + canvasPaddingLeft, canvas1.width - canvasPaddingWidth, canvas1.height - canvasPaddingWidth);\n          }\n        }\n        if (touches) {\n          this.mouseX = touches[0].clientX;\n          this.mouseY = touches[0].clientY;\n        }\n        if (canvas && canvas.containsPoint({\n          x: this.mouseX,\n          y: this.mouseY\n        }) && freeTextAnnotModule.isNewAddedAnnot) {\n          var pageIndex = this.pdfViewer.annotation.getEventPageNumber(evt);\n          if (!this.pdfViewer.freeTextSettings.enableAutoFit) {\n            var zoomFactor = this.getZoomFactor();\n            var width = this.currentPosition.x + freeTextAnnotModule.defautWidth * zoomFactor;\n            var pageWidth = this.getPageWidth(pageIndex);\n            if (width >= pageWidth) {\n              this.currentPosition.x = pageWidth - freeTextAnnotModule.defautWidth * zoomFactor;\n              this.currentPosition.x <= 0 ? this.currentPosition.x = canvasPaddingLeft : this.currentPosition.x;\n              freeTextAnnotModule.defautWidth = freeTextAnnotModule.defautWidth * zoomFactor >= pageWidth ? pageWidth - canvasPaddingWidth : freeTextAnnotModule.defautWidth;\n            }\n          }\n          freeTextAnnotModule.addInuptElemet(this.currentPosition, null, pageIndex);\n          if (this.pdfViewer.toolbar && this.pdfViewer.toolbar.annotationToolbarModule) {\n            // eslint-disable-next-line\n            var annotModule = this.pdfViewer.toolbar.annotationToolbarModule;\n            if (!isBlazor()) {\n              annotModule.primaryToolbar.deSelectItem(annotModule.freeTextEditItem);\n            }\n          }\n          evt.preventDefault();\n          freeTextAnnotModule.isNewAddedAnnot = false;\n        }\n      }\n    }\n    var sourceElement = null;\n    if (obj) {\n      sourceElement = obj.wrapper.children[0];\n      if (sourceElement) {\n        target = obj;\n      }\n    }\n    if (!this.tool || this.tool && !this.tool.drawingObject) {\n      if (!isStamp) {\n        this.action = this.findToolToActivate(obj, this.currentPosition);\n        // eslint-disable-next-line\n        if (obj && obj.annotationSettings && obj.annotationSettings.isLock) {\n          if (this.action === 'Select') {\n            if (!this.pdfViewer.annotationModule.checkAllowedInteractions('Select', obj)) {\n              this.action = '';\n            }\n          }\n          if (this.action === 'Drag') {\n            if (!this.pdfViewer.annotationModule.checkAllowedInteractions('Move', obj)) {\n              this.action = 'Select';\n            }\n          }\n          if (this.action === 'Rotate') {\n            this.action = 'Select';\n          }\n          // eslint-disable-next-line max-len\n          if (this.action === 'ResizeSouthEast' || this.action === 'ResizeNorthEast' || this.action === 'ResizeNorthWest' || this.action === 'ResizeSouthWest' || this.action === 'ResizeSouth' ||\n          // eslint-disable-next-line max-len\n          this.action === 'ResizeNorth' || this.action === 'ResizeWest' || this.action === 'ResizeEast' || this.action.includes('ConnectorSegmentPoint') || this.action.includes('Leader')) {\n            if (!this.pdfViewer.annotationModule.checkAllowedInteractions('Resize', obj)) {\n              this.action = 'Select';\n            }\n          }\n        }\n        this.tool = this.getTool(this.action);\n        if (!this.tool) {\n          this.action = this.pdfViewer.tool || 'Select';\n          this.tool = this.getTool(this.action);\n        }\n      } else {\n        this.action = 'Select';\n        this.tool = this.getTool(this.action);\n      }\n    }\n    this.getMouseEventArgs(this.currentPosition, this.eventArgs, evt);\n    this.eventArgs.position = this.currentPosition;\n    if (this.tool) {\n      this.isAnnotationMouseDown = false;\n      this.isFormFieldMouseDown = false;\n      this.isAnnotationMouseMove = false;\n      this.isFormFieldMouseMove = false;\n      this.tool.mouseDown(this.eventArgs);\n      this.isAnnotationDrawn = true;\n      this.signatureAdded = true;\n    }\n    if (this.pdfViewer.annotation) {\n      this.pdfViewer.annotation.onAnnotationMouseDown();\n    }\n    if (this.pdfViewer.selectedItems && this.pdfViewer.selectedItems.formFields.length === 1) {\n      if (!isNullOrUndefined(this.pdfViewer.toolbar) && !isNullOrUndefined(this.pdfViewer.toolbar.formDesignerToolbarModule)) {\n        this.pdfViewer.toolbar.formDesignerToolbarModule.showHideDeleteIcon(true);\n      }\n    }\n    var signatureFieldAnnotation = this.pdfViewer.selectedItems.annotations.length === 1 ? this.pdfViewer.nameTable[this.pdfViewer.selectedItems.annotations[0].id.split('_')[0] + '_content'] : null;\n    if (!signatureFieldAnnotation) {\n      signatureFieldAnnotation = this.pdfViewer.selectedItems.annotations.length === 1 ? this.pdfViewer.nameTable[this.pdfViewer.selectedItems.annotations[0].id] : null;\n    }\n    // eslint-disable-next-line max-len\n    if (this.eventArgs && this.eventArgs.source && (this.eventArgs.source.formFieldAnnotationType || signatureFieldAnnotation) && !this.pdfViewer.designerMode) {\n      var currentObject = void 0;\n      if (signatureFieldAnnotation) {\n        currentObject = this.pdfViewer.nameTable[this.pdfViewer.selectedItems.annotations[0].id.split('_')[0]];\n      } else {\n        currentObject = this.eventArgs.source;\n      }\n      if (!currentObject) {\n        currentObject = this.pdfViewer.formFieldCollections[this.pdfViewer.formFieldCollections.findIndex(function (el) {\n          return el.id === signatureFieldAnnotation.id;\n        })];\n      }\n      if (currentObject) {\n        // eslint-disable-next-line\n        var field = {\n          // eslint-disable-next-line max-len\n          name: currentObject.name,\n          id: currentObject.id,\n          fontFamily: currentObject.fontFamily,\n          fontSize: currentObject.fontSize,\n          fontStyle: currentObject.fontStyle,\n          // eslint-disable-next-line\n          color: currentObject.color,\n          value: currentObject.value,\n          type: currentObject.formFieldAnnotationType ? currentObject.formFieldAnnotationType : currentObject.type,\n          backgroundColor: currentObject.backgroundColor,\n          alignment: currentObject.alignment\n        };\n        var target_1 = document.getElementById(currentObject.id);\n        target_1 = target_1 ? target_1 : document.getElementById(currentObject.id + '_content_html_element') ? document.getElementById(currentObject.id + '_content_html_element').children[0].children[0] : null;\n        if (target_1) {\n          this.currentTarget = target_1;\n          this.pdfViewer.fireFormFieldClickEvent('formFieldClicked', field, false, evt.button === 0);\n        }\n      }\n    }\n    this.initialEventArgs = {\n      source: this.eventArgs.source,\n      sourceWrapper: this.eventArgs.sourceWrapper\n    };\n    this.initialEventArgs.position = this.currentPosition;\n    this.initialEventArgs.info = this.eventArgs.info;\n    this.pdfViewer.enableServerDataBinding(allowServerDataBind, true);\n  };\n  /**\n   * @private\n   */\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.exportAnnotationsAsObject = function (annotationDataFormat) {\n    var _this = this;\n    if (this.pdfViewer.annotationModule) {\n      var isAnnotations = this.updateExportItem();\n      if (isAnnotations) {\n        return new Promise(function (resolve, reject) {\n          _this.createRequestForExportAnnotations(true, annotationDataFormat).then(function (value) {\n            resolve(value);\n          });\n        });\n      }\n    }\n  };\n  /**\n   * @private\n   * @param {string} type - The type.\n   */\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.getItemFromSessionStorage = function (type) {\n    if (this.isStorageExceed) {\n      return this.formFieldStorage[this.documentId + type];\n    } else {\n      return window.sessionStorage.getItem(this.documentId + type);\n    }\n  };\n  /**\n   * @param textDiv\n   * @param left\n   * @param top\n   * @param fontHeight\n   * @param width\n   * @param height\n   * @param isPrint\n   * @param textDiv\n   * @param left\n   * @param top\n   * @param fontHeight\n   * @param width\n   * @param height\n   * @param isPrint\n   * @param textDiv\n   * @param left\n   * @param top\n   * @param fontHeight\n   * @param width\n   * @param height\n   * @param isPrint\n   * @param textDiv\n   * @param left\n   * @param top\n   * @param fontHeight\n   * @param width\n   * @param height\n   * @param isPrint\n   * @param textDiv\n   * @param left\n   * @param top\n   * @param fontHeight\n   * @param width\n   * @param height\n   * @param isPrint\n   * @private\n   */\n  // eslint-disable-next-line max-len\n  PdfViewerBase.prototype.setStyleToTextDiv = function (textDiv, left, top, fontHeight, width, height, isPrint) {\n    var zoomvalue = this.getZoomFactor();\n    if (isPrint) {\n      zoomvalue = 1;\n      textDiv.style.position = 'absolute';\n    }\n    textDiv.style.left = left * zoomvalue + 'px';\n    textDiv.style.top = top * zoomvalue + 'px';\n    textDiv.style.height = height * zoomvalue + 'px';\n    textDiv.style.width = width * zoomvalue + 'px';\n    textDiv.style.margin = '0px';\n    if (fontHeight > 0) {\n      textDiv.style.fontSize = fontHeight * zoomvalue + 'px';\n    }\n  };\n  /**\n   * @param number\n   * @private\n   */\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.ConvertPointToPixel = function (number) {\n    return number * (96 / 72);\n  };\n  /**\n   * @private\n   */\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.setItemInSessionStorage = function (formFieldsData, type) {\n    // eslint-disable-next-line\n    var formFieldsSize = Math.round(JSON.stringify(formFieldsData).length / 1024);\n    var sessionSize = Math.round(JSON.stringify(window.sessionStorage).length / 1024);\n    if (formFieldsSize > 4500) {\n      this.isStorageExceed = true;\n      if (this.pdfViewer.formFieldsModule) {\n        if (!this.isFormStorageExceed) {\n          this.pdfViewer.formFieldsModule.clearFormFieldStorage();\n          this.isFormStorageExceed = true;\n        }\n      }\n    }\n    if (this.isStorageExceed) {\n      this.formFieldStorage[this.documentId + type] = JSON.stringify(formFieldsData);\n    } else if (formFieldsSize + sessionSize > 4500) {\n      this.isStorageExceed = true;\n      if (this.pdfViewer.formFieldsModule) {\n        this.pdfViewer.formFieldsModule.clearFormFieldStorage();\n      }\n      this.isFormStorageExceed = true;\n      if (this.pdfViewer.annotationModule) {\n        this.pdfViewer.annotationModule.clearAnnotationStorage();\n      }\n      this.formFieldStorage[this.documentId + type] = JSON.stringify(formFieldsData);\n    } else {\n      window.sessionStorage.setItem(this.documentId + type, JSON.stringify(formFieldsData));\n    }\n  };\n  /**\n   * @private\n   */\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.exportFormFieldsAsObject = function (formFieldDataFormat) {\n    var _this = this;\n    if (this.pdfViewer.formFieldsModule) {\n      return new Promise(function (resolve, reject) {\n        _this.createRequestForExportFormfields(true, formFieldDataFormat).then(function (value) {\n          resolve(value);\n        });\n      });\n    }\n  };\n  /**\n   * @param importData\n   * @param annotationDataFormat\n   * @param isXfdf\n   * @param importData\n   * @param annotationDataFormat\n   * @param isXfdf\n   * @param importData\n   * @param annotationDataFormat\n   * @param isXfdf\n   * @private\n   */\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.importAnnotations = function (importData, annotationDataFormat, isXfdf) {\n    if (this.pdfViewer.annotationModule) {\n      this.createRequestForImportAnnotations(importData, annotationDataFormat, isXfdf);\n    }\n  };\n  /**\n   * @private\n   * @param {AnnotationDataFormat} annotationDataFormat - The annotationDataFormat.\n   * @returns {void}\n   */\n  PdfViewerBase.prototype.exportAnnotations = function (annotationDataFormat) {\n    if (this.pdfViewer.annotationModule) {\n      var isAnnotations = this.updateExportItem();\n      if (isAnnotations) {\n        this.createRequestForExportAnnotations(false, annotationDataFormat);\n      }\n    }\n  };\n  /**\n   * @param isObject\n   * @param annotationDataFormat\n   * @param isBase64String\n   * @private\n   */\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.createRequestForExportAnnotations = function (isObject, annotationDataFormat, isBase64String) {\n    var _this = this;\n    var proxy = null;\n    proxy = this;\n    var promise = new Promise(function (resolve, reject) {\n      // eslint-disable-next-line\n      var jsonObject;\n      var canExport = false;\n      jsonObject = _this.constructJsonDownload();\n      jsonObject.annotationDataFormat = annotationDataFormat;\n      // eslint-disable-next-line\n      jsonObject['action'] = 'ExportAnnotations';\n      canExport = proxy.pdfViewer.fireExportStart(jsonObject);\n      if (canExport) {\n        if (proxy.jsonDocumentId) {\n          // eslint-disable-next-line\n          jsonObject.document = proxy.jsonDocumentId;\n        }\n        var url = proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.exportAnnotations;\n        proxy.exportAnnotationRequestHandler = new AjaxHandler(_this.pdfViewer);\n        proxy.exportAnnotationRequestHandler.url = url;\n        proxy.exportAnnotationRequestHandler.mode = true;\n        proxy.exportAnnotationRequestHandler.responseType = 'text';\n        if (!_this.clientSideRendering) {\n          proxy.exportAnnotationRequestHandler.send(jsonObject);\n        } else {\n          var resultData = _this.pdfViewer.pdfRendererModule.exportAnnotation(jsonObject, isObject);\n          if (isObject) {\n            var annotData = proxy.exportAnnotationFileDownload(resultData, proxy, annotationDataFormat, jsonObject, isObject, isBase64String);\n            resolve(annotData);\n          } else {\n            proxy.exportAnnotationFileDownload(resultData, proxy, annotationDataFormat, jsonObject, isObject, isBase64String);\n          }\n        }\n        // eslint-disable-next-line\n        proxy.exportAnnotationRequestHandler.onSuccess = function (result) {\n          // eslint-disable-next-line\n          var data = result.data;\n          var redirect = proxy.checkRedirection(data);\n          if (!redirect) {\n            if (data) {\n              if (isObject) {\n                var annotData = proxy.exportAnnotationFileDownload(data, proxy, annotationDataFormat, jsonObject, isObject, isBase64String);\n                resolve(annotData);\n              } else {\n                proxy.exportAnnotationFileDownload(data, proxy, annotationDataFormat, jsonObject, isObject, isBase64String);\n              }\n            } else {\n              var fileName = void 0;\n              if (proxy.pdfViewer.exportAnnotationFileName !== null) {\n                fileName = proxy.pdfViewer.exportAnnotationFileName;\n              } else {\n                fileName = proxy.pdfViewer.fileName;\n              }\n              proxy.pdfViewer.fireExportSuccess('Exported data saved in server side successfully', fileName);\n            }\n          }\n        };\n        // eslint-disable-next-line\n        proxy.exportAnnotationRequestHandler.onFailure = function (result) {\n          proxy.pdfViewer.fireExportFailed(jsonObject.pdfAnnotation, result.statusText);\n        };\n        // eslint-disable-next-line\n        proxy.exportAnnotationRequestHandler.onError = function (result) {\n          proxy.pdfViewer.fireExportFailed(jsonObject.pdfAnnotation, result.statusText);\n        };\n      }\n    });\n    if (isObject || isBase64String) {\n      return promise;\n    } else {\n      return true;\n    }\n  };\n  PdfViewerBase.prototype.exportAnnotationFileDownload = function (data, proxy, annotationDataFormat, jsonObject, isObject, isBase64String) {\n    var _this = this;\n    return new Promise(function (resolve) {\n      if (data) {\n        if (typeof data === 'object') {\n          data = JSON.parse(data);\n        }\n        if (data) {\n          var isCancel = proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.exportAnnotations, data);\n          if (isObject || isBase64String && !isBlazor()) {\n            if (data.split('base64,')[1]) {\n              var exportObject = data;\n              // eslint-disable-next-line \n              var annotationJson = atob(data.split(',')[1]);\n              if (isObject) {\n                if (jsonObject.annotationDataFormat === 'Json') {\n                  annotationJson = proxy.getSanitizedString(annotationJson);\n                  exportObject = JSON.parse(annotationJson);\n                } else {\n                  exportObject = annotationJson;\n                }\n              }\n              if (proxy.pdfViewer.exportAnnotationFileName !== null) {\n                proxy.pdfViewer.fireExportSuccess(exportObject, proxy.pdfViewer.exportAnnotationFileName);\n              } else {\n                proxy.pdfViewer.fireExportSuccess(exportObject, proxy.pdfViewer.fileName);\n              }\n              proxy.updateDocumentAnnotationCollections();\n              if (isBase64String) {\n                resolve(data);\n              } else {\n                resolve(annotationJson);\n              }\n            } else {\n              // eslint-disable-next-line max-len\n              proxy.pdfViewer.fireExportFailed(jsonObject.pdfAnnotation, proxy.pdfViewer.localeObj.getConstant('Export Failed'));\n            }\n          } else {\n            if (annotationDataFormat === 'Json') {\n              if (data.split('base64,')[1]) {\n                if (!isCancel) {\n                  var blobUrl = proxy.createBlobUrl(data.split('base64,')[1], 'application/json');\n                  if (Browser.isIE || Browser.info.name === 'edge') {\n                    if (proxy.pdfViewer.exportAnnotationFileName !== null) {\n                      // eslint-disable-next-line max-len\n                      window.navigator.msSaveOrOpenBlob(blobUrl, proxy.pdfViewer.exportAnnotationFileName.split('.')[0] + '.json');\n                    } else {\n                      window.navigator.msSaveOrOpenBlob(blobUrl, proxy.pdfViewer.fileName.split('.')[0] + '.json');\n                    }\n                  } else {\n                    proxy.downloadExportFormat(blobUrl, annotationDataFormat);\n                  }\n                  proxy.updateDocumentAnnotationCollections();\n                } else {\n                  return data;\n                }\n              } else {\n                if (isBlazor()) {\n                  var promise = _this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText', 'PdfViewer_ExportFailed');\n                  promise.then(function (value) {\n                    proxy.openImportExportNotificationPopup(value);\n                  });\n                } else {\n                  proxy.openImportExportNotificationPopup(proxy.pdfViewer.localeObj.getConstant('Export Failed'));\n                }\n                // eslint-disable-next-line max-len\n                proxy.pdfViewer.fireExportFailed(jsonObject.pdfAnnotation, proxy.pdfViewer.localeObj.getConstant('Export Failed'));\n              }\n            } else {\n              if (data.split('base64,')[1]) {\n                if (!isCancel) {\n                  var blobUrl = proxy.createBlobUrl(data.split('base64,')[1], 'application/vnd.adobe.xfdf');\n                  if (Browser.isIE || Browser.info.name === 'edge') {\n                    window.navigator.msSaveOrOpenBlob(blobUrl, proxy.pdfViewer.fileName.split('.')[0] + '.xfdf');\n                  } else {\n                    proxy.downloadExportFormat(blobUrl, annotationDataFormat);\n                  }\n                  proxy.updateDocumentAnnotationCollections();\n                } else {\n                  return data;\n                }\n              } else {\n                if (isBlazor()) {\n                  var promise = _this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText', 'PdfViewer_ExportFailed');\n                  promise.then(function (value) {\n                    proxy.openImportExportNotificationPopup(value);\n                  });\n                } else {\n                  proxy.openImportExportNotificationPopup(proxy.pdfViewer.localeObj.getConstant('Export Failed'));\n                }\n                // eslint-disable-next-line max-len\n                proxy.pdfViewer.fireExportFailed(jsonObject, proxy.pdfViewer.localeObj.getConstant('Export Failed'));\n              }\n            }\n          }\n        }\n        if (typeof data !== 'string') {\n          try {\n            if (typeof data === 'string') {\n              proxy.onControlError(500, data, proxy.pdfViewer.serverActionSettings.exportAnnotations);\n              data = null;\n            }\n          } catch (error) {\n            // eslint-disable-next-line max-len\n            proxy.pdfViewer.fireExportFailed(jsonObject.pdfAnnotation, proxy.pdfViewer.localeObj.getConstant('Export Failed'));\n            proxy.onControlError(500, data, proxy.pdfViewer.serverActionSettings.exportAnnotations);\n            data = null;\n          }\n        }\n      }\n      return '';\n    });\n  };\n  PdfViewerBase.prototype.getDataOnSuccess = function (resultData) {\n    var _this = this;\n    return new Promise(function (resolve) {\n      var proxy = null;\n      proxy = _this;\n      proxy.pdfViewer.fireExportSuccess(resultData, proxy.pdfViewer.fileName);\n      proxy.updateDocumentAnnotationCollections();\n      resolve(resultData);\n    });\n  };\n  /**\n  * @private\n  */\n  PdfViewerBase.prototype.updateModifiedDateToLocalDate = function (newData, annotationType) {\n    if (newData[\"\" + annotationType] && newData[\"\" + annotationType].length > 0) {\n      var data = newData[\"\" + annotationType];\n      if (data) {\n        for (var j = 0; j < data.length; j++) {\n          data[parseInt(j.toString(), 10)].ModifiedDate = this.convertUTCDateTimeToLocalDateTime(data[parseInt(j.toString(), 10)].ModifiedDate);\n          if (data[parseInt(j.toString(), 10)].Comments) {\n            for (var i = 0; i < data[parseInt(j.toString(), 10)].Comments.length; i++) {\n              data[parseInt(j.toString(), 10)].Comments[parseInt(i.toString(), 10)].ModifiedDate = this.convertUTCDateTimeToLocalDateTime(data[parseInt(j.toString(), 10)].Comments[parseInt(i.toString(), 10)].ModifiedDate);\n            }\n          }\n        }\n      }\n    }\n  };\n  /**\n   * @private\n   */\n  PdfViewerBase.prototype.convertUTCDateTimeToLocalDateTime = function (date) {\n    var dateTime;\n    // We have globalized the date and time based on the given locale.\n    this.globalize = new Internationalization(this.pdfViewer.locale);\n    if (date !== null && date !== undefined && date !== '') {\n      if (!this.clientSideRendering) {\n        dateTime = new Date(Date.parse(date + ' ' + 'UTC'));\n      } else {\n        dateTime = new Date(date);\n      }\n    } else {\n      var now = new Date();\n      var now_utc = Date.UTC(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate(), now.getUTCHours(), now.getUTCMinutes(), now.getUTCSeconds());\n      dateTime = new Date(now_utc);\n    }\n    var dateTimeValue = this.globalize.formatDate(dateTime, {\n      format: this.pdfViewer.dateTimeFormat,\n      type: 'dateTime'\n    });\n    return dateTimeValue;\n  };\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.createRequestForImportAnnotations = function (importData, annotationDataFormat, isXfdf) {\n    var jsonObject;\n    var proxy = null;\n    proxy = this;\n    if (!isXfdf && proxy.isPDFViewerJson) {\n      this.isJsonImported = true;\n    } else {\n      this.isJsonImported = false;\n    }\n    if (typeof importData === 'object') {\n      if (importData && importData.pdfAnnotation) {\n        var newArray = Object.keys(importData.pdfAnnotation);\n        for (var i = 0; i < newArray.length; i++) {\n          var newData = importData.pdfAnnotation[newArray[parseInt(i.toString(), 10)]];\n          this.updateModifiedDateToLocalDate(newData, \"freeTextAnnotation\");\n          this.updateModifiedDateToLocalDate(newData, \"measureShapeAnnotation\");\n          this.updateModifiedDateToLocalDate(newData, \"shapeAnnotation\");\n          this.updateModifiedDateToLocalDate(newData, \"signatureAnnotation\");\n          this.updateModifiedDateToLocalDate(newData, \"signatureInkAnnotation\");\n          this.updateModifiedDateToLocalDate(newData, \"stampAnnotations\");\n          this.updateModifiedDateToLocalDate(newData, \"stickyNotesAnnotation\");\n          this.updateModifiedDateToLocalDate(newData, \"textMarkupAnnotation\");\n        }\n      }\n      proxy.reRenderAnnotations(importData.pdfAnnotation);\n      proxy.isImportedAnnotation = true;\n      proxy.updateDocumentEditedProperty(true);\n      if (!this.isAddAnnotation) {\n        proxy.pdfViewer.fireImportSuccess(importData.pdfAnnotation);\n      }\n    } else {\n      proxy.pdfViewer.fireImportStart(importData);\n      if (annotationDataFormat === 'Json') {\n        // eslint-disable-next-line max-len\n        if (proxy.isPDFViewerJson) {\n          jsonObject = {\n            fileName: importData,\n            action: 'ImportAnnotations',\n            elementId: proxy.pdfViewer.element.id,\n            hashId: proxy.hashId,\n            uniqueId: proxy.documentId,\n            annotationDataFormat: annotationDataFormat\n          };\n        } else {\n          jsonObject = {\n            importedData: importData,\n            action: 'ImportAnnotations',\n            elementId: proxy.pdfViewer.element.id,\n            hashId: proxy.hashId,\n            uniqueId: proxy.documentId,\n            annotationDataFormat: annotationDataFormat\n          };\n        }\n      } else {\n        if (!isXfdf) {\n          importData = btoa(importData);\n        }\n        importData = importData.split(',')[1] ? importData.split(',')[1] : importData.split(',')[0];\n        // eslint-disable-next-line max-len\n        jsonObject = {\n          importedData: importData,\n          action: 'ImportAnnotations',\n          elementId: proxy.pdfViewer.element.id,\n          hashId: proxy.hashId,\n          uniqueId: proxy.documentId,\n          annotationDataFormat: annotationDataFormat\n        };\n      }\n      jsonObject = Object.assign(jsonObject, this.constructJsonDownload());\n      jsonObject[\"action\"] = 'ImportAnnotations';\n      if (proxy.jsonDocumentId) {\n        // eslint-disable-next-line\n        if (jsonObject.documentId) {\n          delete jsonObject['documentId'];\n        }\n        jsonObject.document = proxy.jsonDocumentId;\n      }\n      var url = proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.importAnnotations;\n      proxy.importAnnotationRequestHandler = new AjaxHandler(proxy.pdfViewer);\n      proxy.importAnnotationRequestHandler.url = url;\n      proxy.importAnnotationRequestHandler.mode = true;\n      proxy.importAnnotationRequestHandler.responseType = 'text';\n      if (!this.clientSideRendering) {\n        proxy.importAnnotationRequestHandler.send(jsonObject);\n      } else {\n        var resultData = this.pdfViewer.pdfRendererModule.importAnnotations(jsonObject);\n        if (resultData) {\n          this.addAnnotationOnImport(resultData, importData);\n        }\n      }\n      // eslint-disable-next-line\n      proxy.importAnnotationRequestHandler.onSuccess = function (result) {\n        // eslint-disable-next-line\n        var data = result.data;\n        var redirect = proxy.checkRedirection(data);\n        if (!redirect) {\n          if (data) {\n            if (typeof data !== 'object') {\n              try {\n                data = JSON.parse(data);\n                if (typeof data !== 'object') {\n                  proxy.onControlError(500, data, proxy.pdfViewer.serverActionSettings.importAnnotations);\n                  data = null;\n                }\n              } catch (error) {\n                proxy.pdfViewer.fireImportFailed(importData, proxy.pdfViewer.localeObj.getConstant('File not found'));\n                if (isBlazor()) {\n                  var promise = this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText', 'PdfViewer_FileNotFound');\n                  promise.then(function (value) {\n                    proxy.openImportExportNotificationPopup(value);\n                  });\n                } else {\n                  proxy.openImportExportNotificationPopup(proxy.pdfViewer.localeObj.getConstant('File not found'));\n                }\n                proxy.onControlError(500, data, proxy.pdfViewer.serverActionSettings.importAnnotations);\n                data = null;\n              }\n            }\n            if (data) {\n              proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.importAnnotations, data);\n              if (data.pdfAnnotation) {\n                var newArray_1;\n                var newData_1;\n                newArray_1 = Object.keys(data.pdfAnnotation);\n                for (var i = 0; i < Object.keys(data.pdfAnnotation).length; i++) {\n                  newData_1 = data.pdfAnnotation[newArray_1[parseInt(i.toString(), 10)]];\n                  proxy.updateModifiedDateToLocalDate(newData_1, \"annotationOrder\");\n                  proxy.updateModifiedDateToLocalDate(newData_1, \"freeTextAnnotation\");\n                  proxy.updateModifiedDateToLocalDate(newData_1, \"measureShapeAnnotation\");\n                  proxy.updateModifiedDateToLocalDate(newData_1, \"shapeAnnotation\");\n                  proxy.updateModifiedDateToLocalDate(newData_1, \"signatureAnnotation\");\n                  proxy.updateModifiedDateToLocalDate(newData_1, \"signatureInkAnnotation\");\n                  proxy.updateModifiedDateToLocalDate(newData_1, \"stampAnnotations\");\n                  proxy.updateModifiedDateToLocalDate(newData_1, \"stickyNotesAnnotation\");\n                  proxy.updateModifiedDateToLocalDate(newData_1, \"textMarkupAnnotation\");\n                }\n                proxy.reRenderAnnotations(data.pdfAnnotation);\n                proxy.isImportedAnnotation = true;\n                proxy.updateDocumentEditedProperty(true);\n                proxy.pdfViewer.fireImportSuccess(data.pdfAnnotation);\n              }\n            }\n          }\n        }\n      };\n      // eslint-disable-next-line\n      proxy.importAnnotationRequestHandler.onFailure = function (result) {\n        proxy.pdfViewer.fireImportFailed(importData, result.statusText);\n      };\n      // eslint-disable-next-line\n      proxy.importAnnotationRequestHandler.onError = function (result) {\n        proxy.pdfViewer.fireImportFailed(importData, result.statusText);\n      };\n    }\n  };\n  PdfViewerBase.prototype.addAnnotationOnImport = function (resultData, importData) {\n    var proxy = null;\n    proxy = this;\n    if (resultData) {\n      proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.importAnnotations, resultData);\n      if (resultData.pdfAnnotation) {\n        var newArray = void 0;\n        var newData = void 0;\n        newArray = Object.keys(resultData.pdfAnnotation);\n        for (var i = 0; i < Object.keys(resultData.pdfAnnotation).length; i++) {\n          newData = resultData.pdfAnnotation[newArray[parseInt(i.toString(), 10)]];\n          proxy.updateModifiedDateToLocalDate(newData, \"annotationOrder\");\n          proxy.updateModifiedDateToLocalDate(newData, \"freeTextAnnotation\");\n          proxy.updateModifiedDateToLocalDate(newData, \"measureShapeAnnotation\");\n          proxy.updateModifiedDateToLocalDate(newData, \"shapeAnnotation\");\n          proxy.updateModifiedDateToLocalDate(newData, \"signatureAnnotation\");\n          proxy.updateModifiedDateToLocalDate(newData, \"signatureInkAnnotation\");\n          proxy.updateModifiedDateToLocalDate(newData, \"stampAnnotations\");\n          proxy.updateModifiedDateToLocalDate(newData, \"stickyNotesAnnotation\");\n          proxy.updateModifiedDateToLocalDate(newData, \"textMarkupAnnotation\");\n        }\n        proxy.reRenderAnnotations(resultData.pdfAnnotation);\n        proxy.isImportedAnnotation = true;\n        proxy.updateDocumentEditedProperty(true);\n        proxy.pdfViewer.fireImportSuccess(resultData.pdfAnnotation);\n      } else {\n        proxy.pdfViewer.fireImportFailed(importData, proxy.pdfViewer.localeObj.getConstant('File not found'));\n      }\n    }\n  };\n  /**\n   * @private\n   * @param {string} errorDetails - The error details.\n   * @returns {void}\n   */\n  PdfViewerBase.prototype.openImportExportNotificationPopup = function (errorDetails) {\n    if (this.pdfViewer.showNotificationDialog) {\n      this.textLayer.createNotificationPopup(errorDetails);\n    }\n  };\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.reRenderAnnotations = function (annotation) {\n    if (annotation) {\n      this.isImportAction = true;\n      var count = 0;\n      if (this.isImportedAnnotation) {\n        this.importedAnnotation = this.combineImportedData(this.importedAnnotation, annotation);\n      } else {\n        if (this.pageCount > 0) {\n          this.importedAnnotation = annotation;\n        }\n      }\n      if (!this.isImportedAnnotation) {\n        count = 0;\n      }\n      for (var i = 0; i < this.pageCount; i++) {\n        if (annotation[parseInt(i.toString(), 10)]) {\n          // eslint-disable-next-line\n          var importPageCollections = [];\n          // eslint-disable-next-line\n          var textMarkupObject = window.sessionStorage.getItem(this.documentId + '_annotations_textMarkup');\n          // eslint-disable-next-line\n          var shapeObject = window.sessionStorage.getItem(this.documentId + '_annotations_shape');\n          // eslint-disable-next-line\n          var measureShapeObject = window.sessionStorage.getItem(this.documentId + '_annotations_shape_measure');\n          // eslint-disable-next-line\n          var stampObject = window.sessionStorage.getItem(this.documentId + '_annotations_stamp');\n          // eslint-disable-next-line\n          var stickyObject = window.sessionStorage.getItem(this.documentId + '_annotations_sticky');\n          // eslint-disable-next-line\n          var freeTextObject = window.sessionStorage.getItem(this.documentId + '_annotations_freetext');\n          // eslint-disable-next-line\n          var signatureObject = window.sessionStorage.getItem(this.documentId + '_annotations_sign');\n          // eslint-disable-next-line\n          var inkObject = window.sessionStorage.getItem(this.documentId + '_annotations_ink');\n          if (this.isStorageExceed) {\n            textMarkupObject = this.annotationStorage[this.documentId + '_annotations_textMarkup'];\n            shapeObject = this.annotationStorage[this.documentId + '_annotations_shape'];\n            measureShapeObject = this.annotationStorage[this.documentId + '_annotations_shape_measure'];\n            stampObject = this.annotationStorage[this.documentId + '_annotations_stamp'];\n            stickyObject = this.annotationStorage[this.documentId + '_annotations_sticky'];\n            freeTextObject = this.annotationStorage[this.documentId + '_annotations_freetext'];\n            inkObject = this.annotationStorage[this.documentId + '_annotations_ink'];\n          }\n          this.drawPageAnnotations(annotation[parseInt(i.toString(), 10)], i);\n          if (this.isImportedAnnotation) {\n            var isAdded = false;\n            for (var j = 0; j < this.annotationPageList.length; j++) {\n              if (this.annotationPageList[parseInt(j.toString(), 10)] === i) {\n                isAdded = true;\n              }\n            }\n            if (isAdded) {\n              this.annotationPageList[parseInt(count.toString(), 10)] = i;\n              count = count + 1;\n            }\n          } else {\n            this.annotationPageList[parseInt(count.toString(), 10)] = i;\n            count = count + 1;\n          }\n          if (annotation[parseInt(i.toString(), 10)].textMarkupAnnotation && annotation[parseInt(i.toString(), 10)].textMarkupAnnotation.length !== 0) {\n            if (textMarkupObject) {\n              var annotObject = JSON.parse(textMarkupObject);\n              // eslint-disable-next-line max-len\n              annotation[parseInt(i.toString(), 10)].textMarkupAnnotation = this.checkAnnotationCollections(annotObject, annotation[parseInt(i.toString(), 10)].textMarkupAnnotation, i);\n            }\n            annotation[parseInt(i.toString(), 10)].textMarkupAnnotation = this.checkAnnotationCommentsCollections(annotation[parseInt(i.toString(), 10)].textMarkupAnnotation, i);\n            importPageCollections.textMarkupAnnotation = annotation[parseInt(i.toString(), 10)].textMarkupAnnotation;\n          }\n          if (annotation[parseInt(i.toString(), 10)].shapeAnnotation && annotation[parseInt(i.toString(), 10)].shapeAnnotation.length !== 0) {\n            if (shapeObject) {\n              var annotObject = JSON.parse(shapeObject);\n              annotation[parseInt(i.toString(), 10)].shapeAnnotation = this.checkAnnotationCollections(annotObject, annotation[parseInt(i.toString(), 10)].shapeAnnotation, i);\n            }\n            annotation[parseInt(i.toString(), 10)].shapeAnnotation = this.checkAnnotationCommentsCollections(annotation[parseInt(i.toString(), 10)].shapeAnnotation, i);\n            importPageCollections.shapeAnnotation = annotation[parseInt(i.toString(), 10)].shapeAnnotation;\n          }\n          if (annotation[parseInt(i.toString(), 10)].measureShapeAnnotation && annotation[parseInt(i.toString(), 10)].measureShapeAnnotation.length !== 0) {\n            if (measureShapeObject) {\n              var annotObject = JSON.parse(measureShapeObject);\n              // eslint-disable-next-line max-len\n              annotation[parseInt(i.toString(), 10)].measureShapeAnnotation = this.checkAnnotationCollections(annotObject, annotation[parseInt(i.toString(), 10)].measureShapeAnnotation, i);\n            }\n            // eslint-disable-next-line max-len\n            annotation[parseInt(i.toString(), 10)].measureShapeAnnotation = this.checkAnnotationCommentsCollections(annotation[parseInt(i.toString(), 10)].measureShapeAnnotation, i);\n            importPageCollections.measureShapeAnnotation = annotation[parseInt(i.toString(), 10)].measureShapeAnnotation;\n          }\n          if (annotation[parseInt(i.toString(), 10)].stampAnnotations && annotation[parseInt(i.toString(), 10)].stampAnnotations.length !== 0) {\n            if (stampObject) {\n              var annotObject = JSON.parse(stampObject);\n              // eslint-disable-next-line max-len\n              annotation[parseInt(i.toString(), 10)].stampAnnotations = this.checkAnnotationCollections(annotObject, annotation[parseInt(i.toString(), 10)].stampAnnotations, i);\n            }\n            annotation[parseInt(i.toString(), 10)].stampAnnotations = this.checkAnnotationCommentsCollections(annotation[parseInt(i.toString(), 10)].stampAnnotations, i);\n            importPageCollections.stampAnnotations = annotation[parseInt(i.toString(), 10)].stampAnnotations;\n          }\n          if (annotation[parseInt(i.toString(), 10)].stickyNotesAnnotation && annotation[parseInt(i.toString(), 10)].stickyNotesAnnotation.length !== 0) {\n            if (stickyObject) {\n              var annotObject = JSON.parse(stickyObject);\n              // eslint-disable-next-line max-len\n              annotation[parseInt(i.toString(), 10)].stickyNotesAnnotation = this.checkAnnotationCollections(annotObject, annotation[parseInt(i.toString(), 10)].stickyNotesAnnotation, i);\n            }\n            // eslint-disable-next-line max-len\n            annotation[parseInt(i.toString(), 10)].stickyNotesAnnotation = this.checkAnnotationCommentsCollections(annotation[parseInt(i.toString(), 10)].stickyNotesAnnotation, i);\n            importPageCollections.stickyNotesAnnotation = annotation[parseInt(i.toString(), 10)].stickyNotesAnnotation;\n          }\n          if (annotation[parseInt(i.toString(), 10)].freeTextAnnotation && annotation[parseInt(i.toString(), 10)].freeTextAnnotation.length !== 0) {\n            if (freeTextObject) {\n              var annotObject = JSON.parse(freeTextObject);\n              // eslint-disable-next-line max-len\n              annotation[parseInt(i.toString(), 10)].freeTextAnnotation = this.checkAnnotationCollections(annotObject, annotation[parseInt(i.toString(), 10)].freeTextAnnotation, i);\n            }\n            annotation[parseInt(i.toString(), 10)].freeTextAnnotation = this.checkAnnotationCommentsCollections(annotation[parseInt(i.toString(), 10)].freeTextAnnotation, i);\n            importPageCollections.freeTextAnnotation = annotation[parseInt(i.toString(), 10)].freeTextAnnotation;\n          }\n          if (annotation[parseInt(i.toString(), 10)].signatureAnnotation && annotation[parseInt(i.toString(), 10)].signatureAnnotation.length !== 0) {\n            if (signatureObject) {\n              var annotObject = JSON.parse(signatureObject);\n              // eslint-disable-next-line max-len\n              annotation[parseInt(i.toString(), 10)].signatureAnnotation = this.checkSignatureCollections(annotObject, annotation[parseInt(i.toString(), 10)].signatureAnnotation, i);\n            }\n            importPageCollections.signatureAnnotation = annotation[parseInt(i.toString(), 10)].signatureAnnotation;\n          }\n          if (annotation[parseInt(i.toString(), 10)].signatureInkAnnotation && annotation[parseInt(i.toString(), 10)].signatureInkAnnotation.length !== 0) {\n            if (inkObject) {\n              var annotObject = JSON.parse(inkObject);\n              // eslint-disable-next-line max-len\n              annotation[parseInt(i.toString(), 10)].signatureInkAnnotation = this.checkAnnotationCollections(annotObject, annotation[parseInt(i.toString(), 10)].signatureInkAnnotation, i);\n            }\n            // eslint-disable-next-line max-len\n            annotation[parseInt(i.toString(), 10)].signatureInkAnnotation = this.checkAnnotationCommentsCollections(annotation[parseInt(i.toString(), 10)].signatureInkAnnotation, i);\n            importPageCollections.signatureInkAnnotation = annotation[parseInt(i.toString(), 10)].signatureInkAnnotation;\n          }\n          if (annotation[parseInt(i.toString(), 10)].annotationOrder) {\n            var annotationOrderCollection = annotation[parseInt(i.toString(), 10)].annotationOrder;\n            var annotationData = [];\n            for (var index = 0; index < annotationOrderCollection.length; index++) {\n              var annotationName = annotationOrderCollection[parseInt(index.toString(), 10)].AnnotType ? annotationOrderCollection[parseInt(index.toString(), 10)].AnnotType : annotationOrderCollection[parseInt(index.toString(), 10)].AnnotationType;\n              annotationData.push(annotationOrderCollection[parseInt(index.toString(), 10)]);\n              var annotObject = void 0;\n              switch (annotationName) {\n                case 'textMarkup':\n                  if (annotation[parseInt(i.toString(), 10)].textMarkupAnnotation.length !== 0 || annotationData.length !== 0) {\n                    this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(annotationData, i);\n                    for (var j = 0; j < annotationData.length; j++) {\n                      this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.textMarkupAnnotationModule.updateTextMarkupAnnotationCollections(annotationOrderCollection[parseInt(index.toString(), 10)], i));\n                    }\n                  }\n                  break;\n                case 'shape':\n                  if (annotation[parseInt(i.toString(), 10)].shapeAnnotation.length !== 0 || annotationData.length !== 0) {\n                    this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(annotationData, i);\n                    for (var j = 0; j < annotationData.length; j++) {\n                      this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.shapeAnnotationModule.updateShapeAnnotationCollections(annotationOrderCollection[parseInt(index.toString(), 10)], i));\n                    }\n                  }\n                  break;\n                case 'shape_measure':\n                  if (annotation[parseInt(i.toString(), 10)].measureShapeAnnotation.length !== 0 || annotationData.length !== 0) {\n                    this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(annotationData, i);\n                    for (var j = 0; j < annotationData.length; j++) {\n                      this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.measureAnnotationModule.updateMeasureAnnotationCollections(annotationOrderCollection[parseInt(index.toString(), 10)], i));\n                    }\n                  }\n                  break;\n                case 'stamp':\n                  if (annotation[parseInt(i.toString(), 10)].stampAnnotations.length !== 0 || annotationData.length !== 0) {\n                    this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(annotationData, i);\n                    for (var j = 0; j < annotationData.length; j++) {\n                      this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.stampAnnotationModule.updateStampAnnotationCollections(annotationOrderCollection[parseInt(index.toString(), 10)], i));\n                    }\n                  }\n                  break;\n                case 'Text Box':\n                case 'freeText':\n                  if (annotation[parseInt(i.toString(), 10)].freeTextAnnotation.length !== 0 || annotationData.length !== 0) {\n                    this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(annotationData, i);\n                    for (var j = 0; j < annotationData.length; j++) {\n                      this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.freeTextAnnotationModule.updateFreeTextAnnotationCollections(annotationOrderCollection[parseInt(index.toString(), 10)], i));\n                    }\n                  }\n                  break;\n                case 'sticky':\n                  if (annotation[parseInt(i.toString(), 10)].stickyNotesAnnotation.length !== 0 || annotationData.length !== 0) {\n                    this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(annotationData, i);\n                    for (var j = 0; j < annotationData.length; j++) {\n                      this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateStickyNotesAnnotationCollections(annotationOrderCollection[parseInt(index.toString(), 10)], i));\n                    }\n                  }\n                  break;\n                case 'signature':\n                  if (annotation[parseInt(i.toString(), 10)].signatureAnnotation.length !== 0 || annotationData.length !== 0) {\n                    for (var j = 0; j < annotationData.length; j++) {\n                      this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.signatureModule.updateSignatureCollections(annotationOrderCollection[parseInt(index.toString(), 10)], i), true);\n                    }\n                  }\n                  break;\n                case 'Ink':\n                case 'ink':\n                  if (annotation[parseInt(i.toString(), 10)].signatureInkAnnotation.length !== 0 || annotationData.length !== 0) {\n                    this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(annotationData, i);\n                    for (var j = 0; j < annotation[parseInt(i.toString(), 10)].annotationOrder[parseInt(index.toString(), 10)].length; j++) {\n                      this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.inkAnnotationModule.updateInkCollections(annotationOrderCollection[parseInt(index.toString(), 10)], i));\n                    }\n                  }\n                  break;\n              }\n              annotationData = [];\n            }\n          }\n          this.updateImportedAnnotationsInDocumentCollections(importPageCollections, i);\n        }\n      }\n      if (this.pageCount > 0) {\n        // eslint-disable-next-line max-len\n        if (this.pdfViewer.annotationModule.stickyNotesAnnotationModule && !this.pdfViewer.annotationModule.stickyNotesAnnotationModule.isAnnotationRendered) {\n          // eslint-disable-next-line\n          var annotationCollection = this.createAnnotationsCollection();\n          if (annotationCollection) {\n            // eslint-disable-next-line max-len\n            this.documentAnnotationCollections = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationsInDocumentCollections(this.importedAnnotation, annotationCollection);\n          }\n        }\n      }\n    }\n    this.isImportAction = false;\n  };\n  /**\n   * @param importedAnnotations\n   * @param pageNumber\n   * @private\n   */\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.updateImportedAnnotationsInDocumentCollections = function (importedAnnotations, pageNumber) {\n    if (this.documentAnnotationCollections) {\n      // eslint-disable-next-line\n      var documentAnnotationCollection = this.documentAnnotationCollections;\n      // eslint-disable-next-line\n      var pageCollections = documentAnnotationCollection[pageNumber];\n      if (pageCollections) {\n        if (importedAnnotations.textMarkupAnnotation && importedAnnotations.textMarkupAnnotation.length !== 0) {\n          for (var i = 0; i < importedAnnotations.textMarkupAnnotation.length; i++) {\n            pageCollections.textMarkupAnnotation.push(importedAnnotations.textMarkupAnnotation[parseInt(i.toString(), 10)]);\n          }\n        }\n        if (importedAnnotations.shapeAnnotation && importedAnnotations.shapeAnnotation.length !== 0) {\n          for (var i = 0; i < importedAnnotations.shapeAnnotation.length; i++) {\n            pageCollections.shapeAnnotation.push(importedAnnotations.shapeAnnotation[parseInt(i.toString(), 10)]);\n          }\n        }\n        if (importedAnnotations.measureShapeAnnotation && importedAnnotations.measureShapeAnnotation.length !== 0) {\n          for (var i = 0; i < importedAnnotations.measureShapeAnnotation.length; i++) {\n            pageCollections.measureShapeAnnotation.push(importedAnnotations.measureShapeAnnotation[parseInt(i.toString(), 10)]);\n          }\n        }\n        if (importedAnnotations.stampAnnotations && importedAnnotations.stampAnnotations.length !== 0) {\n          for (var i = 0; i < importedAnnotations.stampAnnotations.length; i++) {\n            pageCollections.stampAnnotations.push(importedAnnotations.stampAnnotations[parseInt(i.toString(), 10)]);\n          }\n        }\n        if (importedAnnotations.stickyNotesAnnotation && importedAnnotations.stickyNotesAnnotation.length !== 0) {\n          for (var i = 0; i < importedAnnotations.stickyNotesAnnotation.length; i++) {\n            pageCollections.stickyNotesAnnotation.push(importedAnnotations.stickyNotesAnnotation[parseInt(i.toString(), 10)]);\n          }\n        }\n        if (importedAnnotations.freeTextAnnotation && importedAnnotations.freeTextAnnotation.length !== 0) {\n          for (var i = 0; i < importedAnnotations.freeTextAnnotation.length; i++) {\n            pageCollections.freeTextAnnotation.push(importedAnnotations.freeTextAnnotation[parseInt(i.toString(), 10)]);\n          }\n        }\n        if (importedAnnotations.signatureAnnotation && importedAnnotations.signatureAnnotation.length !== 0) {\n          for (var i = 0; i < importedAnnotations.signatureAnnotation.length; i++) {\n            pageCollections.signatureAnnotation.push(importedAnnotations.signatureAnnotation[parseInt(i.toString(), 10)]);\n          }\n        }\n        if (importedAnnotations.signatureInkAnnotation && importedAnnotations.signatureInkAnnotation.length !== 0) {\n          for (var i = 0; i < importedAnnotations.signatureInkAnnotation.length; i++) {\n            pageCollections.signatureInkAnnotation.push(importedAnnotations.signatureInkAnnotation[parseInt(i.toString(), 10)]);\n          }\n        }\n        this.documentAnnotationCollections[parseInt(pageNumber.toString(), 10)] = pageCollections;\n      }\n    }\n  };\n  /**\n   * @param pageIndex\n   * @param pageCollections\n   * @param pageIndex\n   * @param pageCollections\n   * @private\n   */\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.checkDocumentCollectionData = function (pageIndex, pageCollections) {\n    // eslint-disable-next-line\n    var importPageCollections;\n    if (pageCollections) {\n      importPageCollections = pageCollections;\n    } else if (this.documentAnnotationCollections) {\n      // eslint-disable-next-line\n      var documetCollections = this.documentAnnotationCollections[pageIndex];\n      if (documetCollections) {\n        importPageCollections = cloneObject(documetCollections);\n      }\n    }\n    if (importPageCollections) {\n      // eslint-disable-next-line\n      var textMarkupObject = window.sessionStorage.getItem(this.documentId + '_annotations_textMarkup');\n      // eslint-disable-next-line\n      var shapeObject = window.sessionStorage.getItem(this.documentId + '_annotations_shape');\n      // eslint-disable-next-line\n      var measureShapeObject = window.sessionStorage.getItem(this.documentId + '_annotations_shape_measure');\n      // eslint-disable-next-line\n      var stampObject = window.sessionStorage.getItem(this.documentId + '_annotations_stamp');\n      // eslint-disable-next-line\n      var stickyObject = window.sessionStorage.getItem(this.documentId + '_annotations_sticky');\n      // eslint-disable-next-line\n      var freeTextObject = window.sessionStorage.getItem(this.documentId + '_annotations_freetext');\n      // eslint-disable-next-line\n      var inkObject = window.sessionStorage.getItem(this.documentId + '_annotations_ink');\n      // eslint-disable-next-line\n      var signatureObject = window.sessionStorage.getItem(this.documentId + '_annotations_sign');\n      if (this.isStorageExceed) {\n        textMarkupObject = this.annotationStorage[this.documentId + '_annotations_textMarkup'];\n        shapeObject = this.annotationStorage[this.documentId + '_annotations_shape'];\n        measureShapeObject = this.annotationStorage[this.documentId + '_annotations_shape_measure'];\n        stampObject = this.annotationStorage[this.documentId + '_annotations_stamp'];\n        stickyObject = this.annotationStorage[this.documentId + '_annotations_sticky'];\n        freeTextObject = this.annotationStorage[this.documentId + '_annotations_freetext'];\n        inkObject = this.annotationStorage[this.documentId + '_annotations_ink'];\n        signatureObject = this.annotationStorage[this.documentId + '_annotations_sign'];\n      }\n      if (importPageCollections.textMarkupAnnotation && importPageCollections.textMarkupAnnotation.length !== 0) {\n        if (textMarkupObject) {\n          var annotationObject = JSON.parse(textMarkupObject);\n          if (annotationObject) {\n            // eslint-disable-next-line max-len\n            importPageCollections.textMarkupAnnotation = this.findImportedAnnotations(annotationObject, importPageCollections.textMarkupAnnotation, pageIndex);\n          }\n        }\n      }\n      if (importPageCollections.shapeAnnotation && importPageCollections.shapeAnnotation.length !== 0) {\n        if (shapeObject) {\n          var annotationObject = JSON.parse(shapeObject);\n          if (annotationObject) {\n            // eslint-disable-next-line max-len\n            importPageCollections.shapeAnnotation = this.findImportedAnnotations(annotationObject, importPageCollections.shapeAnnotation, pageIndex);\n          }\n        }\n      }\n      if (importPageCollections.measureShapeAnnotation && importPageCollections.measureShapeAnnotation.length !== 0) {\n        if (measureShapeObject) {\n          var annotationObject = JSON.parse(measureShapeObject);\n          if (annotationObject) {\n            // eslint-disable-next-line max-len\n            importPageCollections.measureShapeAnnotation = this.findImportedAnnotations(annotationObject, importPageCollections.measureShapeAnnotation, pageIndex);\n          }\n        }\n      }\n      if (importPageCollections.stampAnnotations && importPageCollections.stampAnnotations.length !== 0) {\n        if (stampObject) {\n          var annotationObject = JSON.parse(stampObject);\n          if (annotationObject) {\n            // eslint-disable-next-line max-len\n            importPageCollections.stampAnnotations = this.findImportedAnnotations(annotationObject, importPageCollections.stampAnnotations, pageIndex);\n          }\n        }\n      }\n      if (importPageCollections.stickyNotesAnnotation && importPageCollections.stickyNotesAnnotation.length !== 0) {\n        if (stickyObject) {\n          var annotationObject = JSON.parse(stickyObject);\n          if (annotationObject) {\n            // eslint-disable-next-line max-len\n            importPageCollections.stickyNotesAnnotation = this.findImportedAnnotations(annotationObject, importPageCollections.stickyNotesAnnotation, pageIndex);\n          }\n        }\n      }\n      if (importPageCollections.freeTextAnnotation && importPageCollections.freeTextAnnotation.length !== 0) {\n        if (freeTextObject) {\n          var annotationObject = JSON.parse(freeTextObject);\n          if (annotationObject) {\n            // eslint-disable-next-line max-len\n            importPageCollections.freeTextAnnotation = this.findImportedAnnotations(annotationObject, importPageCollections.freeTextAnnotation, pageIndex);\n          }\n        }\n      }\n      if (importPageCollections.signatureInkAnnotation && importPageCollections.signatureInkAnnotation.length !== 0) {\n        if (inkObject) {\n          var annotationObject = JSON.parse(inkObject);\n          if (annotationObject) {\n            // eslint-disable-next-line max-len\n            importPageCollections.signatureInkAnnotation = this.findImportedAnnotations(annotationObject, importPageCollections.signatureInkAnnotation, pageIndex);\n          }\n        }\n      }\n      if (importPageCollections.signatureAnnotation && importPageCollections.signatureAnnotation.length !== 0) {\n        if (signatureObject) {\n          var annotationObject = JSON.parse(inkObject);\n          if (annotationObject) {\n            // eslint-disable-next-line max-len\n            importPageCollections.signatureAnnotation = this.findImportedAnnotations(annotationObject, importPageCollections.signatureAnnotation, pageIndex);\n          }\n        }\n      }\n      return importPageCollections;\n    }\n  };\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.findImportedAnnotations = function (annotationCollection, importAnnotations, pageNumber) {\n    // eslint-disable-next-line\n    var pageCollections = null;\n    for (var a = 0; a < annotationCollection.length; a++) {\n      if (annotationCollection[parseInt(a.toString(), 10)].pageIndex === pageNumber) {\n        pageCollections = annotationCollection[parseInt(a.toString(), 10)].annotations;\n      }\n    }\n    if (pageCollections) {\n      for (var i = 0; i < pageCollections.length; i++) {\n        for (var j = 0; j < importAnnotations.length; j++) {\n          if (pageCollections[parseInt(i.toString(), 10)].annotName === importAnnotations[parseInt(j.toString(), 10)].AnnotName) {\n            importAnnotations.splice(j, 1);\n            j = j - 1;\n          }\n        }\n      }\n    }\n    pageCollections = null;\n    return importAnnotations;\n  };\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.drawPageAnnotations = function (annotation, pageIndex, isNewlyAdded) {\n    if (isNewlyAdded) {\n      annotation = annotation[parseInt(pageIndex.toString(), 10)];\n    }\n    // When utilising the addAnnotation API, the annotationOrder object is not available; thus, the following code is used to put the annotation object into the annotationOrder.\n    if (annotation && !annotation.annotationOrder) {\n      var annotationTypes = ['freeTextAnnotation', 'measureShapeAnnotation', 'shapeAnnotation', 'signatureAnnotation', 'signatureInkAnnotation', 'stampAnnotations', 'stickyNotesAnnotation', 'textMarkupAnnotation'];\n      // eslint-disable-next-line\n      var foundAnnotationType = annotationTypes.find(function (type) {\n        if (annotation[\"\" + type] && annotation[\"\" + type].length !== 0) {\n          return annotation[\"\" + type];\n        }\n      });\n      if (foundAnnotationType) {\n        // eslint-disable-next-line\n        annotation.annotationOrder = annotation[foundAnnotationType];\n      }\n    }\n    if (annotation) {\n      var annotationOrderCollection = annotation.annotationOrder;\n      var annotationData = [];\n      var isRefreshRequired = true;\n      for (var index = 0; index < annotationOrderCollection.length; index++) {\n        var annotationName = annotationOrderCollection[parseInt(index.toString(), 10)].AnnotType ? annotationOrderCollection[parseInt(index.toString(), 10)].AnnotType : annotationOrderCollection[parseInt(index.toString(), 10)].AnnotationType;\n        annotationData.push(annotationOrderCollection[parseInt(index.toString(), 10)]);\n        var storeObject = void 0;\n        var annotObject = void 0;\n        switch (annotationName) {\n          case 'textMarkup':\n            isRefreshRequired = false;\n            storeObject = window.sessionStorage.getItem(this.documentId + '_annotations_textMarkup');\n            if (this.isStorageExceed) {\n              storeObject = this.annotationStorage[this.documentId + '_annotations_textMarkup'];\n            }\n            if (storeObject) {\n              annotObject = JSON.parse(storeObject);\n              if (annotObject) {\n                annotationData = this.checkAnnotationCollections(annotObject, annotationData, pageIndex);\n              }\n            }\n            annotation.textMarkupAnnotation = this.checkAnnotationCommentsCollections(annotation.textMarkupAnnotation, pageIndex);\n            this.pdfViewer.annotationModule.renderAnnotations(pageIndex, null, null, annotationData, null, true);\n            break;\n          case 'shape':\n            isRefreshRequired = false;\n            storeObject = window.sessionStorage.getItem(this.documentId + '_annotations_shape');\n            if (this.isStorageExceed) {\n              storeObject = this.annotationStorage[this.documentId + '_annotations_shape'];\n            }\n            if (storeObject) {\n              annotObject = JSON.parse(storeObject);\n              annotationData = this.checkAnnotationCollections(annotObject, annotationData, pageIndex);\n            }\n            annotation.shapeAnnotation = this.checkAnnotationCommentsCollections(annotation.shapeAnnotation, pageIndex);\n            this.pdfViewer.annotationModule.renderAnnotations(pageIndex, annotationData, null, null, null, true);\n            break;\n          case 'shape_measure':\n            isRefreshRequired = false;\n            storeObject = window.sessionStorage.getItem(this.documentId + '_annotations_shape_measure');\n            if (this.isStorageExceed) {\n              storeObject = this.annotationStorage[this.documentId + '_annotations_shape_measure'];\n            }\n            if (storeObject) {\n              annotObject = JSON.parse(storeObject);\n              annotationData = this.checkAnnotationCollections(annotObject, annotationData, pageIndex);\n            }\n            annotation.measureShapeAnnotation = this.checkAnnotationCommentsCollections(annotation.measureShapeAnnotation, pageIndex);\n            this.pdfViewer.annotationModule.renderAnnotations(pageIndex, null, annotationData, null, null, true);\n            break;\n          case 'stamp':\n            storeObject = window.sessionStorage.getItem(this.documentId + '_annotations_stamp');\n            if (this.isStorageExceed) {\n              storeObject = this.annotationStorage[this.documentId + '_annotations_stamp'];\n            }\n            if (storeObject) {\n              annotObject = JSON.parse(storeObject);\n              annotationData = this.checkAnnotationCollections(annotObject, annotationData, pageIndex);\n            }\n            annotation.stampAnnotations = this.checkAnnotationCommentsCollections(annotation.stampAnnotations, pageIndex);\n            this.pdfViewer.annotationModule.stampAnnotationModule.renderStampAnnotations(annotationData, pageIndex, null, true);\n            break;\n          case 'Text Box':\n          case 'freeText':\n            storeObject = window.sessionStorage.getItem(this.documentId + '_annotations_freetext');\n            if (this.isStorageExceed) {\n              storeObject = this.annotationStorage[this.documentId + '_annotations_freetext'];\n            }\n            if (storeObject) {\n              annotObject = JSON.parse(storeObject);\n              annotationData = this.checkAnnotationCollections(annotObject, annotationData, pageIndex);\n            }\n            annotation.freeTextAnnotation = this.checkAnnotationCommentsCollections(annotation.freeTextAnnotation, pageIndex);\n            this.pdfViewer.annotationModule.freeTextAnnotationModule.renderFreeTextAnnotations(annotationData, pageIndex, true);\n            break;\n          case 'sticky':\n            storeObject = window.sessionStorage.getItem(this.documentId + '_annotations_sticky');\n            if (this.isStorageExceed) {\n              storeObject = this.annotationStorage[this.documentId + '_annotations_sticky'];\n            }\n            if (storeObject) {\n              annotObject = JSON.parse(storeObject);\n              annotationData = this.checkAnnotationCollections(annotObject, annotationData, pageIndex);\n            }\n            annotation.stickyNotesAnnotation = this.checkAnnotationCommentsCollections(annotation.stickyNotesAnnotation, pageIndex);\n            this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderStickyNotesAnnotations(annotationData, pageIndex);\n            break;\n          case 'signature':\n            storeObject = window.sessionStorage.getItem(this.documentId + '_annotations_sign');\n            annotObject = JSON.parse(storeObject);\n            if (annotObject) {\n              annotation.signatureAnnotation = this.checkSignatureCollections(annotObject, annotationData, pageIndex);\n            }\n            this.signatureModule.renderExistingSignature(annotationData, pageIndex, true);\n            break;\n          case 'Ink':\n          case 'ink':\n            storeObject = window.sessionStorage.getItem(this.documentId + '_annotations_ink');\n            if (this.isStorageExceed) {\n              storeObject = this.annotationStorage[this.documentId + '_annotations_ink'];\n            }\n            if (storeObject) {\n              annotObject = JSON.parse(storeObject);\n              annotationData = this.checkAnnotationCollections(annotObject, annotationData, pageIndex);\n            }\n            annotation.signatureInkAnnotation = this.checkAnnotationCommentsCollections(annotation.signatureInkAnnotation, pageIndex);\n            this.pdfViewer.annotationModule.inkAnnotationModule.renderExistingInkSignature(annotationData, pageIndex, true);\n            break;\n          default:\n            break;\n        }\n        annotationData = [];\n      }\n      if (isRefreshRequired) {\n        var canvas = this.getElement('_annotationCanvas_' + pageIndex);\n        this.pdfViewer.drawing.refreshCanvasDiagramLayer(canvas, pageIndex);\n      }\n    }\n    ;\n  };\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.checkSignatureCollections = function (annotationCollection, annotation, pageNumber) {\n    // eslint-disable-next-line\n    var pageCollections = null;\n    for (var a = 0; a < annotationCollection.length; a++) {\n      if (annotationCollection[parseInt(a.toString(), 10)].pageIndex === pageNumber) {\n        pageCollections = annotationCollection[parseInt(a.toString(), 10)].annotations;\n      }\n    }\n    if (pageCollections) {\n      for (var i = 0; i < pageCollections.length; i++) {\n        for (var j = 0; j < annotation.length; j++) {\n          if (pageCollections[parseInt(i.toString(), 10)].signatureName === annotation[parseInt(j.toString(), 10)].SignatureName) {\n            annotation.splice(j, 1);\n            j = j - 1;\n          }\n        }\n      }\n    }\n    pageCollections = null;\n    return annotation;\n  };\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.checkAnnotationCollections = function (annotationCollection, annotation, pageNumber) {\n    // eslint-disable-next-line\n    var pageCollections = null;\n    for (var a = 0; a < annotationCollection.length; a++) {\n      if (annotationCollection[parseInt(a.toString(), 10)].pageIndex === pageNumber) {\n        pageCollections = annotationCollection[parseInt(a.toString(), 10)].annotations;\n      }\n    }\n    if (pageCollections) {\n      for (var i = 0; i < pageCollections.length; i++) {\n        for (var j = 0; j < annotation.length; j++) {\n          if (pageCollections[parseInt(i.toString(), 10)].annotName === annotation[parseInt(j.toString(), 10)].AnnotName) {\n            annotation.splice(j, 1);\n            j = j - 1;\n          }\n        }\n      }\n    }\n    pageCollections = null;\n    return annotation;\n  };\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.checkAnnotationCommentsCollections = function (annotation, pageNumber) {\n    if (this.annotationComments) {\n      // eslint-disable-next-line\n      var annotationCollections = this.annotationComments[pageNumber];\n      annotationCollections = this.selectAnnotationCollections(annotationCollections);\n      if (annotationCollections) {\n        for (var i = 0; i < annotationCollections.length; i++) {\n          for (var j = 0; j < annotation.length; j++) {\n            if (annotationCollections[parseInt(i.toString(), 10)].AnnotName === annotation[parseInt(j.toString(), 10)].AnnotName) {\n              annotation.splice(j, 1);\n              j = j - 1;\n            }\n          }\n        }\n      }\n      annotationCollections = null;\n    }\n    return annotation;\n  };\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.selectAnnotationCollections = function (pageAnnotations) {\n    // eslint-disable-next-line\n    var pageCollections = [];\n    if (pageAnnotations) {\n      if (pageAnnotations.textMarkupAnnotation && pageAnnotations.textMarkupAnnotation.length !== 0) {\n        for (var i = 0; i < pageAnnotations.textMarkupAnnotation.length; i++) {\n          pageCollections.push(pageAnnotations.textMarkupAnnotation[parseInt(i.toString(), 10)]);\n        }\n      }\n      if (pageAnnotations.shapeAnnotation && pageAnnotations.shapeAnnotation.length !== 0) {\n        for (var i = 0; i < pageAnnotations.shapeAnnotation.length; i++) {\n          pageCollections.push(pageAnnotations.shapeAnnotation[parseInt(i.toString(), 10)]);\n        }\n      }\n      if (pageAnnotations.measureShapeAnnotation && pageAnnotations.measureShapeAnnotation.length !== 0) {\n        for (var i = 0; i < pageAnnotations.measureShapeAnnotation.length; i++) {\n          pageCollections.push(pageAnnotations.measureShapeAnnotation[parseInt(i.toString(), 10)]);\n        }\n      }\n      if (pageAnnotations.stampAnnotations && pageAnnotations.stampAnnotations.length !== 0) {\n        for (var i = 0; i < pageAnnotations.stampAnnotations.length; i++) {\n          pageCollections.push(pageAnnotations.stampAnnotations[parseInt(i.toString(), 10)]);\n        }\n      }\n      if (pageAnnotations.stickyNotesAnnotation && pageAnnotations.stickyNotesAnnotation.length !== 0) {\n        for (var i = 0; i < pageAnnotations.stickyNotesAnnotation.length; i++) {\n          pageCollections.push(pageAnnotations.stickyNotesAnnotation[parseInt(i.toString(), 10)]);\n        }\n      }\n      if (pageAnnotations.freeTextAnnotation && pageAnnotations.freeTextAnnotation.length !== 0) {\n        for (var i = 0; i < pageAnnotations.freeTextAnnotation.length; i++) {\n          pageCollections.push(pageAnnotations.freeTextAnnotation[parseInt(i.toString(), 10)]);\n        }\n      }\n      if (pageAnnotations.signatureInkAnnotation && pageAnnotations.signatureInkAnnotation.length !== 0) {\n        for (var i = 0; i < pageAnnotations.signatureInkAnnotation.length; i++) {\n          pageCollections.push(pageAnnotations.signatureInkAnnotation[parseInt(i.toString(), 10)]);\n        }\n      }\n    }\n    return pageCollections;\n  };\n  PdfViewerBase.prototype.saveImportedAnnotations = function () {\n    // eslint-disable-next-line\n    var textMarkupObject = window.sessionStorage.getItem(this.documentId + '_annotations_textMarkup');\n    // eslint-disable-next-line\n    var shapeObject = window.sessionStorage.getItem(this.documentId + '_annotations_shape');\n    // eslint-disable-next-line\n    var measureShapeObject = window.sessionStorage.getItem(this.documentId + '_annotations_shape_measure');\n    // eslint-disable-next-line\n    var stampObject = window.sessionStorage.getItem(this.documentId + '_annotations_stamp');\n    // eslint-disable-next-line\n    var stickyObject = window.sessionStorage.getItem(this.documentId + '_annotations_sticky');\n    // eslint-disable-next-line\n    var freeTextObject = window.sessionStorage.getItem(this.documentId + '_annotations_freetext');\n    // eslint-disable-next-line\n    var inkObject = window.sessionStorage.getItem(this.documentId + '_annotations_ink');\n    // eslint-disable-next-line\n    var signatureObject = window.sessionStorage.getItem(this.documentId + '_annotations_sign');\n    if (this.isStorageExceed) {\n      textMarkupObject = this.annotationStorage[this.documentId + '_annotations_textMarkup'];\n      shapeObject = this.annotationStorage[this.documentId + '_annotations_shape'];\n      measureShapeObject = this.annotationStorage[this.documentId + '_annotations_shape_measure'];\n      stampObject = this.annotationStorage[this.documentId + '_annotations_stamp'];\n      stickyObject = this.annotationStorage[this.documentId + '_annotations_sticky'];\n      freeTextObject = this.annotationStorage[this.documentId + '_annotations_freetext'];\n      inkObject = this.annotationStorage[this.documentId + '_annotations_ink'];\n      signatureObject = this.annotationStorage[this.documentId + '_annotations_sign'];\n    }\n    // eslint-disable-next-line max-len\n    this.downloadCollections = {\n      textMarkupObject: textMarkupObject,\n      shapeObject: shapeObject,\n      measureShapeObject: measureShapeObject,\n      stampObject: stampObject,\n      stickyObject: stickyObject,\n      freeTextObject: freeTextObject,\n      inkObject: inkObject,\n      signatureObject: signatureObject\n    };\n    if (this.documentAnnotationCollections) {\n      for (var i = 0; i < this.pageCount; i++) {\n        if (this.documentAnnotationCollections[parseInt(i.toString(), 10)]) {\n          // eslint-disable-next-line\n          var pageCollections = cloneObject(this.documentAnnotationCollections[i]);\n          pageCollections = this.checkDocumentCollectionData(i, pageCollections);\n          this.savePageAnnotations(pageCollections, i);\n        }\n      }\n    }\n  };\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.savePageAnnotations = function (annotation, pageIndex) {\n    if (annotation.textMarkupAnnotation.length !== 0) {\n      for (var s = 0; s < annotation.textMarkupAnnotation.length; s++) {\n        // eslint-disable-next-line max-len\n        this.pdfViewer.annotationModule.textMarkupAnnotationModule.saveImportedTextMarkupAnnotations(annotation.textMarkupAnnotation[parseInt(s.toString(), 10)], pageIndex);\n      }\n    }\n    if (annotation.shapeAnnotation.length !== 0) {\n      for (var s = 0; s < annotation.shapeAnnotation.length; s++) {\n        // eslint-disable-next-line max-len\n        this.pdfViewer.annotationModule.shapeAnnotationModule.saveImportedShapeAnnotations(annotation.shapeAnnotation[parseInt(s.toString(), 10)], pageIndex);\n      }\n    }\n    if (annotation.measureShapeAnnotation.length !== 0) {\n      for (var s = 0; s < annotation.measureShapeAnnotation.length; s++) {\n        // eslint-disable-next-line max-len\n        this.pdfViewer.annotationModule.measureAnnotationModule.saveImportedMeasureAnnotations(annotation.measureShapeAnnotation[parseInt(s.toString(), 10)], pageIndex);\n      }\n    }\n    if (annotation.stampAnnotations.length !== 0) {\n      for (var s = 0; s < annotation.stampAnnotations.length; s++) {\n        // eslint-disable-next-line max-len\n        this.pdfViewer.annotationModule.stampAnnotationModule.saveImportedStampAnnotations(annotation.stampAnnotations[parseInt(s.toString(), 10)], pageIndex);\n      }\n    }\n    if (annotation.stickyNotesAnnotation.length !== 0) {\n      for (var s = 0; s < annotation.stickyNotesAnnotation.length; s++) {\n        // eslint-disable-next-line max-len\n        this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveImportedStickyNotesAnnotations(annotation.stickyNotesAnnotation[parseInt(s.toString(), 10)], pageIndex);\n      }\n    }\n    if (annotation.freeTextAnnotation.length !== 0) {\n      for (var s = 0; s < annotation.freeTextAnnotation.length; s++) {\n        // eslint-disable-next-line max-len\n        this.pdfViewer.annotationModule.freeTextAnnotationModule.saveImportedFreeTextAnnotations(annotation.freeTextAnnotation[parseInt(s.toString(), 10)], pageIndex);\n      }\n    }\n    if (annotation.signatureInkAnnotation.length !== 0) {\n      for (var s = 0; s < annotation.signatureInkAnnotation.length; s++) {\n        this.pdfViewer.annotationModule.inkAnnotationModule.saveImportedInkAnnotation(annotation.signatureInkAnnotation[parseInt(s.toString(), 10)], pageIndex);\n      }\n    }\n  };\n  PdfViewerBase.prototype.updateDocumentAnnotationCollections = function () {\n    window.sessionStorage.removeItem(this.documentId + '_annotations_textMarkup');\n    window.sessionStorage.removeItem(this.documentId + '_annotations_shape');\n    window.sessionStorage.removeItem(this.documentId + '_annotations_shape_measure');\n    window.sessionStorage.removeItem(this.documentId + '_annotations_stamp');\n    window.sessionStorage.removeItem(this.documentId + '_annotations_sticky');\n    window.sessionStorage.removeItem(this.documentId + '_annotations_freetext');\n    window.sessionStorage.removeItem(this.documentId + '_annotations_ink');\n    if (this.downloadCollections) {\n      if (this.isStorageExceed) {\n        this.annotationStorage[this.documentId + '_annotations_textMarkup'] = this.downloadCollections.textMarkupObject;\n        this.annotationStorage[this.documentId + '_annotations_shape'] = this.downloadCollections.shapeObject;\n        this.annotationStorage[this.documentId + '_annotations_shape_measure'] = this.downloadCollections.measureShapeObject;\n        this.annotationStorage[this.documentId + '_annotations_stamp'] = this.downloadCollections.stampObject;\n        this.annotationStorage[this.documentId + '_annotations_sticky'] = this.downloadCollections.stickyObject;\n        this.annotationStorage[this.documentId + '_annotations_freetext'] = this.downloadCollections.freeTextObject;\n        this.annotationStorage[this.documentId + '_annotations_ink'] = this.downloadCollections.inkObject;\n      } else {\n        if (this.downloadCollections.textMarkupObject) {\n          window.sessionStorage.setItem(this.documentId + '_annotations_textMarkup', this.downloadCollections.textMarkupObject);\n        }\n        if (this.downloadCollections.shapeObject) {\n          window.sessionStorage.setItem(this.documentId + '_annotations_shape', this.downloadCollections.shapeObject);\n        }\n        if (this.downloadCollections.measureShapeObject) {\n          window.sessionStorage.setItem(this.documentId + '_annotations_shape_measure', this.downloadCollections.measureShapeObject);\n        }\n        if (this.downloadCollections.stampObject) {\n          window.sessionStorage.setItem(this.documentId + '_annotations_stamp', this.downloadCollections.stampObject);\n        }\n        if (this.downloadCollections.stickyObject) {\n          window.sessionStorage.setItem(this.documentId + '_annotations_sticky', this.downloadCollections.stickyObject);\n        }\n        if (this.downloadCollections.freeTextObject) {\n          window.sessionStorage.setItem(this.documentId + '_annotations_freetext', this.downloadCollections.freeTextObject);\n        }\n        if (this.downloadCollections.inkObject) {\n          window.sessionStorage.setItem(this.documentId + '_annotations_ink', this.downloadCollections.inkObject);\n        }\n      }\n    }\n  };\n  /**\n   * @private\n   */\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.createAnnotationJsonData = function () {\n    // eslint-disable-next-line\n    var annotationCollection = {};\n    var textMarkupAnnotationCollection;\n    var shapeAnnotations;\n    var calibrateAnnotations;\n    var stampAnnotationCollection;\n    var stickyAnnotationCollection;\n    var freeTextAnnotationCollection;\n    var signaturCollection;\n    var signaturInkCollection;\n    this.saveImportedAnnotations();\n    if (this.isTextMarkupAnnotationModule()) {\n      this.isJsonExported = true;\n      // eslint-disable-next-line max-len\n      textMarkupAnnotationCollection = this.pdfViewer.annotationModule.textMarkupAnnotationModule.saveTextMarkupAnnotations();\n    }\n    if (this.isShapeAnnotationModule()) {\n      this.isJsonExported = true;\n      // eslint-disable-next-line max-len\n      shapeAnnotations = this.pdfViewer.annotationModule.shapeAnnotationModule.saveShapeAnnotations();\n    }\n    if (this.isCalibrateAnnotationModule()) {\n      this.isJsonExported = true;\n      // eslint-disable-next-line max-len\n      calibrateAnnotations = this.pdfViewer.annotationModule.measureAnnotationModule.saveMeasureShapeAnnotations();\n    }\n    if (this.isStampAnnotationModule()) {\n      // eslint-disable-next-line max-len\n      stampAnnotationCollection = this.pdfViewer.annotationModule.stampAnnotationModule.saveStampAnnotations();\n    }\n    if (this.isCommentAnnotationModule()) {\n      // eslint-disable-next-line max-len\n      stickyAnnotationCollection = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveStickyAnnotations();\n    }\n    if (this.isFreeTextAnnotationModule()) {\n      // eslint-disable-next-line max-len\n      freeTextAnnotationCollection = this.pdfViewer.annotationModule.freeTextAnnotationModule.saveFreeTextAnnotations();\n    }\n    if (this.isInkAnnotationModule()) {\n      // eslint-disable-next-line\n      signaturInkCollection = this.pdfViewer.annotationModule.inkAnnotationModule.saveInkSignature();\n    }\n    if (this.pdfViewer.isSignatureEditable) {\n      // eslint-disable-next-line\n      signaturCollection = this.signatureModule.saveSignature();\n    } else {\n      // eslint-disable-next-line\n      var annotations = new Array();\n      for (var j = 0; j < this.pageCount; j++) {\n        annotations[parseInt(j.toString(), 10)] = [];\n      }\n      signaturCollection = JSON.stringify(annotations);\n    }\n    for (var s = 0; s < this.pageCount; s++) {\n      // eslint-disable-next-line max-len\n      var annotation = {\n        textMarkupAnnotation: JSON.parse(textMarkupAnnotationCollection)[parseInt(s.toString(), 10)],\n        shapeAnnotation: JSON.parse(shapeAnnotations)[parseInt(s.toString(), 10)],\n        measureShapeAnnotation: JSON.parse(calibrateAnnotations)[parseInt(s.toString(), 10)],\n        stampAnnotations: JSON.parse(stampAnnotationCollection)[parseInt(s.toString(), 10)],\n        // eslint-disable-next-line max-len\n        stickyNotesAnnotation: JSON.parse(stickyAnnotationCollection)[parseInt(s.toString(), 10)],\n        freeTextAnnotation: JSON.parse(freeTextAnnotationCollection)[parseInt(s.toString(), 10)],\n        signatureAnnotation: JSON.parse(signaturCollection)[parseInt(s.toString(), 10)],\n        signatureInkAnnotation: JSON.parse(signaturInkCollection)[parseInt(s.toString(), 10)]\n      };\n      annotationCollection[parseInt(s.toString(), 10)] = annotation;\n    }\n    return JSON.stringify(annotationCollection);\n  };\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.combineImportedData = function (excistingImportAnnotation, newlyImportAnnotation) {\n    for (var i = 0; i < this.pageCount; i++) {\n      if (newlyImportAnnotation[parseInt(i.toString(), 10)]) {\n        if (excistingImportAnnotation[parseInt(i.toString(), 10)]) {\n          if (newlyImportAnnotation[parseInt(i.toString(), 10)].textMarkupAnnotation && newlyImportAnnotation[parseInt(i.toString(), 10)].textMarkupAnnotation.length !== 0) {\n            if (excistingImportAnnotation[parseInt(i.toString(), 10)].textMarkupAnnotation) {\n              // eslint-disable-next-line max-len\n              newlyImportAnnotation[parseInt(i.toString(), 10)].textMarkupAnnotation = this.checkImportedData(excistingImportAnnotation[parseInt(i.toString(), 10)].textMarkupAnnotation, newlyImportAnnotation[parseInt(i.toString(), 10)].textMarkupAnnotation, i);\n              if (newlyImportAnnotation[parseInt(i.toString(), 10)].textMarkupAnnotation.length !== 0) {\n                // eslint-disable-next-line max-len\n                excistingImportAnnotation[parseInt(i.toString(), 10)].textMarkupAnnotation = excistingImportAnnotation[parseInt(i.toString(), 10)].textMarkupAnnotation.concat(newlyImportAnnotation[parseInt(i.toString(), 10)].textMarkupAnnotation);\n              }\n            } else {\n              excistingImportAnnotation[parseInt(i.toString(), 10)].textMarkupAnnotation = newlyImportAnnotation[parseInt(i.toString(), 10)].textMarkupAnnotation;\n            }\n          }\n          if (newlyImportAnnotation[parseInt(i.toString(), 10)].shapeAnnotation && newlyImportAnnotation[parseInt(i.toString(), 10)].shapeAnnotation.length !== 0) {\n            if (excistingImportAnnotation[parseInt(i.toString(), 10)].shapeAnnotation) {\n              // eslint-disable-next-line max-len\n              newlyImportAnnotation[parseInt(i.toString(), 10)].shapeAnnotation = this.checkImportedData(excistingImportAnnotation[parseInt(i.toString(), 10)].shapeAnnotation, newlyImportAnnotation[parseInt(i.toString(), 10)].shapeAnnotation, i);\n              if (newlyImportAnnotation[parseInt(i.toString(), 10)].shapeAnnotation.length !== 0) {\n                // eslint-disable-next-line max-len\n                excistingImportAnnotation[parseInt(i.toString(), 10)].shapeAnnotation = excistingImportAnnotation[parseInt(i.toString(), 10)].shapeAnnotation.concat(newlyImportAnnotation[parseInt(i.toString(), 10)].shapeAnnotation);\n              }\n            } else {\n              excistingImportAnnotation[parseInt(i.toString(), 10)].shapeAnnotation = newlyImportAnnotation[parseInt(i.toString(), 10)].shapeAnnotation;\n            }\n          }\n          if (newlyImportAnnotation[parseInt(i.toString(), 10)].measureShapeAnnotation && newlyImportAnnotation[parseInt(i.toString(), 10)].measureShapeAnnotation.length !== 0) {\n            if (excistingImportAnnotation[parseInt(i.toString(), 10)].measureShapeAnnotation) {\n              // eslint-disable-next-line max-len\n              newlyImportAnnotation[parseInt(i.toString(), 10)].measureShapeAnnotation = this.checkImportedData(excistingImportAnnotation[parseInt(i.toString(), 10)].measureShapeAnnotation, newlyImportAnnotation[parseInt(i.toString(), 10)].measureShapeAnnotation, i);\n              if (newlyImportAnnotation[parseInt(i.toString(), 10)].measureShapeAnnotation.length !== 0) {\n                // eslint-disable-next-line max-len\n                excistingImportAnnotation[parseInt(i.toString(), 10)].measureShapeAnnotation = excistingImportAnnotation[parseInt(i.toString(), 10)].measureShapeAnnotation.concat(newlyImportAnnotation[parseInt(i.toString(), 10)].measureShapeAnnotation);\n              }\n            } else {\n              excistingImportAnnotation[parseInt(i.toString(), 10)].measureShapeAnnotation = newlyImportAnnotation[parseInt(i.toString(), 10)].measureShapeAnnotation;\n            }\n          }\n          if (newlyImportAnnotation[parseInt(i.toString(), 10)].stampAnnotations && newlyImportAnnotation[parseInt(i.toString(), 10)].stampAnnotations.length !== 0) {\n            if (excistingImportAnnotation[parseInt(i.toString(), 10)].stampAnnotations) {\n              // eslint-disable-next-line max-len\n              newlyImportAnnotation[parseInt(i.toString(), 10)].stampAnnotations = this.checkImportedData(excistingImportAnnotation[parseInt(i.toString(), 10)].stampAnnotations, newlyImportAnnotation[parseInt(i.toString(), 10)].stampAnnotations, i);\n              if (newlyImportAnnotation[parseInt(i.toString(), 10)].stampAnnotations.length !== 0) {\n                // eslint-disable-next-line max-len\n                excistingImportAnnotation[parseInt(i.toString(), 10)].stampAnnotations = excistingImportAnnotation[parseInt(i.toString(), 10)].stampAnnotations.concat(newlyImportAnnotation[parseInt(i.toString(), 10)].stampAnnotations);\n              }\n            } else {\n              excistingImportAnnotation[parseInt(i.toString(), 10)].stampAnnotations = newlyImportAnnotation[parseInt(i.toString(), 10)].stampAnnotations;\n            }\n          }\n          if (newlyImportAnnotation[parseInt(i.toString(), 10)].stickyNotesAnnotation && newlyImportAnnotation[parseInt(i.toString(), 10)].stickyNotesAnnotation.length !== 0) {\n            if (excistingImportAnnotation[parseInt(i.toString(), 10)].stickyNotesAnnotation) {\n              // eslint-disable-next-line max-len\n              newlyImportAnnotation[parseInt(i.toString(), 10)].stickyNotesAnnotation = this.checkImportedData(excistingImportAnnotation[parseInt(i.toString(), 10)].stickyNotesAnnotation, newlyImportAnnotation[parseInt(i.toString(), 10)].stickyNotesAnnotation, i);\n              if (newlyImportAnnotation[parseInt(i.toString(), 10)].stickyNotesAnnotation.length !== 0) {\n                // eslint-disable-next-line max-len\n                excistingImportAnnotation[parseInt(i.toString(), 10)].stickyNotesAnnotation = excistingImportAnnotation[parseInt(i.toString(), 10)].stickyNotesAnnotation.concat(newlyImportAnnotation[parseInt(i.toString(), 10)].stickyNotesAnnotation);\n              }\n            } else {\n              excistingImportAnnotation[parseInt(i.toString(), 10)].stickyNotesAnnotation = newlyImportAnnotation[parseInt(i.toString(), 10)].stickyNotesAnnotation;\n            }\n          }\n          if (newlyImportAnnotation[parseInt(i.toString(), 10)].freeTextAnnotation && newlyImportAnnotation[parseInt(i.toString(), 10)].freeTextAnnotation.length !== 0) {\n            if (excistingImportAnnotation[parseInt(i.toString(), 10)].freeTextAnnotation) {\n              // eslint-disable-next-line max-len\n              newlyImportAnnotation[parseInt(i.toString(), 10)].freeTextAnnotation = this.checkImportedData(excistingImportAnnotation[parseInt(i.toString(), 10)].freeTextAnnotation, newlyImportAnnotation[parseInt(i.toString(), 10)].freeTextAnnotation, i);\n              if (newlyImportAnnotation[parseInt(i.toString(), 10)].freeTextAnnotation.length !== 0) {\n                // eslint-disable-next-line max-len\n                excistingImportAnnotation[parseInt(i.toString(), 10)].freeTextAnnotation = excistingImportAnnotation[parseInt(i.toString(), 10)].freeTextAnnotation.concat(newlyImportAnnotation[parseInt(i.toString(), 10)].freeTextAnnotation);\n              }\n            } else {\n              excistingImportAnnotation[parseInt(i.toString(), 10)].freeTextAnnotation = newlyImportAnnotation[parseInt(i.toString(), 10)].freeTextAnnotation;\n            }\n          }\n          if (newlyImportAnnotation[parseInt(i.toString(), 10)].signatureInkAnnotation && newlyImportAnnotation[parseInt(i.toString(), 10)].signatureInkAnnotation.length !== 0) {\n            if (excistingImportAnnotation[parseInt(i.toString(), 10)].signatureInkAnnotation) {\n              // eslint-disable-next-line max-len\n              newlyImportAnnotation[parseInt(i.toString(), 10)].signatureInkAnnotation = this.checkImportedData(excistingImportAnnotation[parseInt(i.toString(), 10)].signatureInkAnnotation, newlyImportAnnotation[parseInt(i.toString(), 10)].signatureInkAnnotation, i);\n              if (newlyImportAnnotation[parseInt(i.toString(), 10)].signatureInkAnnotation.length !== 0) {\n                // eslint-disable-next-line max-len\n                excistingImportAnnotation[parseInt(i.toString(), 10)].signatureInkAnnotation = excistingImportAnnotation[parseInt(i.toString(), 10)].signatureInkAnnotation.concat(newlyImportAnnotation[parseInt(i.toString(), 10)].signatureInkAnnotation);\n              }\n            } else {\n              excistingImportAnnotation[parseInt(i.toString(), 10)].signatureInkAnnotation = newlyImportAnnotation[parseInt(i.toString(), 10)].signatureInkAnnotation;\n            }\n          }\n        } else {\n          // eslint-disable-next-line max-len\n          var annotation = {\n            // eslint-disable-next-line max-len\n            textMarkupAnnotation: newlyImportAnnotation[parseInt(i.toString(), 10)].textMarkupAnnotation,\n            shapeAnnotation: newlyImportAnnotation[parseInt(i.toString(), 10)].shapeAnnotation,\n            // eslint-disable-next-line max-len\n            measureShapeAnnotation: newlyImportAnnotation[parseInt(i.toString(), 10)].measureShapeAnnotation,\n            stampAnnotations: newlyImportAnnotation[parseInt(i.toString(), 10)].stampAnnotations,\n            // eslint-disable-next-line max-len\n            stickyNotesAnnotation: newlyImportAnnotation[parseInt(i.toString(), 10)].stickyNotesAnnotation,\n            freeTextAnnotation: newlyImportAnnotation[parseInt(i.toString(), 10)].freeTextAnnotation,\n            signatureInkAnnotation: newlyImportAnnotation[parseInt(i.toString(), 10)].signatureInkAnnotation\n          };\n          excistingImportAnnotation[parseInt(i.toString(), 10)] = annotation;\n        }\n      }\n    }\n    return excistingImportAnnotation;\n  };\n  /**\n   * @private\n   * @returns {boolean} - Returns true or false.\n   */\n  PdfViewerBase.prototype.updateExportItem = function () {\n    // eslint-disable-next-line\n    var shapeObject = window.sessionStorage.getItem(this.documentId + '_annotations_shape');\n    // eslint-disable-next-line\n    var measureObject = window.sessionStorage.getItem(this.documentId + '_annotations_shape_measure');\n    // eslint-disable-next-line\n    var stampObject = window.sessionStorage.getItem(this.documentId + '_annotations_stamp');\n    // eslint-disable-next-line\n    var stickyObject = window.sessionStorage.getItem(this.documentId + '_annotations_sticky');\n    // eslint-disable-next-line\n    var textMarkupObject = window.sessionStorage.getItem(this.documentId + '_annotations_textMarkup');\n    // eslint-disable-next-line\n    var freeTextObject = window.sessionStorage.getItem(this.documentId + '_annotations_freetext');\n    var isSignatureEditable = false;\n    // eslint-disable-next-line\n    var inkAnnotationObjct = window.sessionStorage.getItem(this.documentId + '_annotations_ink');\n    if (this.pdfViewer.isSignatureEditable) {\n      // eslint-disable-next-line\n      var signatureObject = window.sessionStorage.getItem(this.documentId + '_annotations_sign');\n      if (signatureObject) {\n        isSignatureEditable = true;\n      }\n    }\n    // eslint-disable-next-line max-len\n    if (shapeObject || measureObject || stampObject || stickyObject || textMarkupObject || freeTextObject || this.isImportAction || this.isStorageExceed || isSignatureEditable || inkAnnotationObjct) {\n      return true;\n    } else {\n      return false;\n    }\n  };\n  PdfViewerBase.prototype.isFreeTextAnnotation = function (annotations) {\n    var resut = false;\n    if (annotations && annotations.length > 0) {\n      resut = annotations.some(function (s) {\n        return s.shapeAnnotationType === 'FreeText' && s.subject === 'Text Box';\n      });\n    }\n    return resut;\n  };\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.checkImportedData = function (existingCollection, newCollection, pageIndex) {\n    for (var i = 0; i < existingCollection.length; i++) {\n      for (var j = 0; j < newCollection.length; j++) {\n        if (existingCollection[parseInt(i.toString(), 10)].AnnotName === newCollection[parseInt(j.toString(), 10)].AnnotName) {\n          var len = this.pdfViewer.annotationCollection.length;\n          for (var x = 0; x < len; x++) {\n            if (this.pdfViewer.annotationCollection[parseInt(x.toString(), 10)].annotationId === newCollection[parseInt(j.toString(), 10)].AnnotName) {\n              // To update the comment panel values in a collections while importing the annotation with the same name. (EJ2-62092)\n              this.pdfViewer.annotationCollection[parseInt(x.toString(), 10)].comments = this.pdfViewer.annotationModule.getAnnotationComments(newCollection[parseInt(j.toString(), 10)].Comments, newCollection[parseInt(j.toString(), 10)], newCollection[parseInt(j.toString(), 10)].Author);\n              this.pdfViewer.annotationCollection[parseInt(x.toString(), 10)].review = {\n                state: newCollection[parseInt(j.toString(), 10)].State,\n                stateModel: newCollection[parseInt(j.toString(), 10)].StateModel,\n                modifiedDate: newCollection[parseInt(j.toString(), 10)].ModifiedDate,\n                author: newCollection[parseInt(j.toString(), 10)].Author\n              };\n              this.pdfViewer.annotationCollection[parseInt(x.toString(), 10)].note = newCollection[parseInt(j.toString(), 10)].Note;\n              var annot = this.pdfViewer.annotationCollection[parseInt(x.toString(), 10)];\n              if (existingCollection[parseInt(i.toString(), 10)].AnnotType === \"shape\" && this.pdfViewer.annotationModule.shapeAnnotationModule) {\n                this.documentAnnotationCollections[parseInt(pageIndex.toString(), 10)].shapeAnnotation[parseInt(i.toString(), 10)] = newCollection[parseInt(j.toString(), 10)];\n                this.updateAnnotationsInSessionStorage(newCollection[parseInt(j.toString(), 10)], annot, \"_annotations_shape\");\n              } else if (existingCollection[parseInt(i.toString(), 10)].AnnotType === \"textMarkup\" && this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n                this.documentAnnotationCollections[parseInt(pageIndex.toString(), 10)].textMarkupAnnotation[parseInt(i.toString(), 10)] = newCollection[parseInt(j.toString(), 10)];\n                this.updateAnnotationsInSessionStorage(newCollection[parseInt(j.toString(), 10)], annot, \"_annotations_textMarkup\");\n              } else if (existingCollection[parseInt(i.toString(), 10)].AnnotType === \"shape_measure\" && this.pdfViewer.annotationModule.measureAnnotationModule) {\n                this.documentAnnotationCollections[parseInt(pageIndex.toString(), 10)].measureShapeAnnotation[parseInt(i.toString(), 10)] = newCollection[parseInt(j.toString(), 10)];\n                this.updateAnnotationsInSessionStorage(newCollection[parseInt(j.toString(), 10)], annot, \"_annotations_shape_measure\");\n              } else if (existingCollection[parseInt(i.toString(), 10)].AnnotType === \"stamp\" && this.pdfViewer.annotationModule.stampAnnotationModule) {\n                this.documentAnnotationCollections[parseInt(pageIndex.toString(), 10)].stampAnnotations[parseInt(i.toString(), 10)] = newCollection[parseInt(j.toString(), 10)];\n                this.updateAnnotationsInSessionStorage(newCollection[parseInt(j.toString(), 10)], annot, \"_annotations_stamp\");\n              } else if (existingCollection[parseInt(i.toString(), 10)].AnnotType === \"freeText\" && this.pdfViewer.annotationModule.freeTextAnnotationModule) {\n                this.documentAnnotationCollections[parseInt(pageIndex.toString(), 10)].freeTextAnnotation[parseInt(i.toString(), 10)] = newCollection[parseInt(j.toString(), 10)];\n                this.updateAnnotationsInSessionStorage(newCollection[parseInt(j.toString(), 10)], annot, \"_annotations_freetext\");\n              } else if (existingCollection[parseInt(i.toString(), 10)].AnnotType === \"ink\" && this.pdfViewer.annotationModule.inkAnnotationModule) {\n                this.documentAnnotationCollections[parseInt(pageIndex.toString(), 10)].signatureInkAnnotation[parseInt(i.toString(), 10)] = newCollection[parseInt(j.toString(), 10)];\n                this.updateAnnotationsInSessionStorage(newCollection[parseInt(j.toString(), 10)], annot, \"_annotations_ink\");\n              } else if (existingCollection[parseInt(i.toString(), 10)].AnnotType === \"sticky\") {\n                this.documentAnnotationCollections[parseInt(pageIndex.toString(), 10)].stickyNotesAnnotation[parseInt(i.toString(), 10)] = newCollection[parseInt(j.toString(), 10)];\n                this.updateAnnotationsInSessionStorage(newCollection[parseInt(j.toString(), 10)], annot, \"_annotations_sticky\");\n              }\n              break;\n            }\n          }\n          this.pdfViewer.annotationModule.stickyNotesAnnotationModule.createCommentControlPanel(newCollection[parseInt(j.toString(), 10)], pageIndex + 1, null, null, true);\n          newCollection.splice(j, 1);\n          j = j - 1;\n        }\n      }\n    }\n    if (this.annotationComments) {\n      // eslint-disable-next-line\n      var annotationCollections = this.annotationComments[pageIndex];\n      annotationCollections = this.selectAnnotationCollections(annotationCollections);\n      if (annotationCollections) {\n        for (var i = 0; i < annotationCollections.length; i++) {\n          for (var j = 0; j < newCollection.length; j++) {\n            if (annotationCollections[parseInt(i.toString(), 10)].AnnotName === newCollection[parseInt(j.toString(), 10)].AnnotName) {\n              newCollection.splice(j, 1);\n              j = j - 1;\n            }\n          }\n        }\n      }\n    }\n    return newCollection;\n  };\n  // To update the comment panel values in a session storage while importing the annotation with the same name. (EJ2-62092)\n  PdfViewerBase.prototype.updateAnnotationsInSessionStorage = function (newCollection, annot, type) {\n    var annotation = window.sessionStorage.getItem(this.documentId + type);\n    var annotObject = JSON.parse(annotation);\n    if (annotObject) {\n      for (var b = 0; b < annotObject.length; b++) {\n        if (annotObject[parseInt(b.toString(), 10)].annotations) {\n          for (var z = 0; z < annotObject[parseInt(b.toString(), 10)].annotations.length; z++) {\n            if (annotObject[parseInt(b.toString(), 10)].annotations[parseInt(z.toString(), 10)].annotName === newCollection.AnnotName) {\n              annotObject[parseInt(b.toString(), 10)].annotations[parseInt(z.toString(), 10)].comments = annot.comments;\n              annotObject[parseInt(b.toString(), 10)].annotations[parseInt(z.toString(), 10)].review = annot.review;\n              annotObject[parseInt(b.toString(), 10)].annotations[parseInt(z.toString(), 10)].note = annot.note;\n              break;\n            }\n          }\n        }\n      }\n      window.sessionStorage.setItem(this.documentId + type, JSON.stringify(annotObject));\n    }\n  };\n  /**\n   * @param points\n   * @private\n   */\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.checkAnnotationWidth = function (points) {\n    var width = 0;\n    var height = 0;\n    var minWidth;\n    var maxWidth;\n    var minHeight;\n    var maxHeight;\n    for (var i = 0; i < points.length; i++) {\n      if (!minWidth) {\n        minWidth = points[parseInt(i.toString(), 10)].x;\n        maxWidth = points[parseInt(i.toString(), 10)].x;\n        minHeight = points[parseInt(i.toString(), 10)].y;\n        maxHeight = points[parseInt(i.toString(), 10)].y;\n      } else {\n        if (minWidth > points[parseInt(i.toString(), 10)].x) {\n          minWidth = points[parseInt(i.toString(), 10)].x;\n        } else if (maxWidth < points[parseInt(i.toString(), 10)].x) {\n          maxWidth = points[parseInt(i.toString(), 10)].x;\n        }\n        if (minHeight > points[parseInt(i.toString(), 10)].y) {\n          minHeight = points[parseInt(i.toString(), 10)].y;\n        } else if (maxHeight < points[parseInt(i.toString(), 10)].y) {\n          maxHeight = points[parseInt(i.toString(), 10)].y;\n        }\n      }\n    }\n    width = maxWidth - minWidth;\n    height = maxHeight - minHeight;\n    return {\n      width: width,\n      height: height\n    };\n  };\n  PdfViewerBase.prototype.deleteAnnotations = function () {\n    if (this.pdfViewer.annotationModule) {\n      this.pdfViewer.annotations = [];\n      this.pdfViewer.zIndexTable = [];\n      this.pdfViewer.annotationCollection = [];\n      this.pdfViewer.signatureCollection = [];\n      // eslint-disable-next-line\n      var annotationCollection = this.createAnnotationsCollection();\n      this.annotationComments = annotationCollection;\n      this.documentAnnotationCollections = annotationCollection;\n      this.annotationRenderredList = [];\n      window.sessionStorage.removeItem(this.documentId + '_annotations_shape');\n      window.sessionStorage.removeItem(this.documentId + '_annotations_shape_measure');\n      window.sessionStorage.removeItem(this.documentId + '_annotations_stamp');\n      window.sessionStorage.removeItem(this.documentId + '_annotations_sticky');\n      window.sessionStorage.removeItem(this.documentId + '_annotations_textMarkup');\n      window.sessionStorage.removeItem(this.documentId + '_annotations_freetext');\n      window.sessionStorage.removeItem(this.documentId + '_annotations_sign');\n      window.sessionStorage.removeItem(this.documentId + '_annotations_ink');\n      for (var i = 0; i < this.pageCount; i++) {\n        this.pdfViewer.annotationModule.renderAnnotations(i, null, null, null);\n        this.pdfViewer.renderDrawing(undefined, i);\n        this.pdfViewer.clearSelection(i);\n        var accordionContent = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + (i + 1));\n        if (accordionContent) {\n          accordionContent.remove();\n        }\n        // eslint-disable-next-line max-len\n        var accordionContentContainer = document.getElementById(this.pdfViewer.element.id + '_accordionContentContainer');\n        if (accordionContentContainer) {\n          if (accordionContentContainer.childElementCount === 0) {\n            accordionContentContainer.style.display = 'none';\n            if (document.getElementById(this.pdfViewer.element.id + '_commentsPanelText')) {\n              // eslint-disable-next-line max-len\n              this.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export Annotations')], false);\n              document.getElementById(this.pdfViewer.element.id + '_commentsPanelText').style.display = 'block';\n            }\n          }\n        }\n      }\n      this.isImportedAnnotation = false;\n      this.isImportAction = false;\n      this.importedAnnotation = [];\n      this.annotationPageList = [];\n      this.pdfViewer.annotationModule.freeTextAnnotationModule.freeTextPageNumbers = [];\n      this.pdfViewer.annotationModule.stampAnnotationModule.stampPageNumber = [];\n      this.pdfViewer.annotation.inkAnnotationModule.inkAnnotationindex = [];\n      this.isAnnotationCollectionRemoved = true;\n    }\n  };\n  /**\n   * @param pageNumber\n   * @param isObject\n   * @param pageNumber\n   * @param isObject\n   * @private\n   */\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.createAnnotationsCollection = function (pageNumber, isObject) {\n    // eslint-disable-next-line\n    var annotationCollectionList = [];\n    if (!isObject) {\n      for (var i = 0; i < this.pageCount; i++) {\n        var annotation = {\n          // eslint-disable-next-line max-len\n          textMarkupAnnotation: [],\n          shapeAnnotation: [],\n          measureShapeAnnotation: [],\n          stampAnnotations: [],\n          stickyNotesAnnotation: [],\n          freeTextAnnotation: [],\n          signatureAnnotation: [],\n          signatureInkAnnotation: []\n        };\n        annotationCollectionList.push(annotation);\n      }\n    } else {\n      annotationCollectionList = {};\n      var annotation = {\n        // eslint-disable-next-line max-len\n        textMarkupAnnotation: [],\n        shapeAnnotation: [],\n        measureShapeAnnotation: [],\n        stampAnnotations: [],\n        stickyNotesAnnotation: [],\n        freeTextAnnotation: [],\n        signatureAnnotation: [],\n        signatureInkAnnotation: []\n      };\n      annotationCollectionList[parseInt(pageNumber.toString(), 10)] = annotation;\n    }\n    return annotationCollectionList;\n  };\n  /**\n   * @param importAnnotation\n   * @private\n   */\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.addAnnotation = function (importAnnotation) {\n    // eslint-disable-next-line\n    var pdfAnnotation = {};\n    // eslint-disable-next-line\n    var documentCollections;\n    if (importAnnotation) {\n      var isAnnotationObject = false;\n      var annotationCount = 1;\n      if (importAnnotation.shapeAnnotationType || importAnnotation.author) {\n        isAnnotationObject = true;\n        documentCollections = this.createAnnotationsCollection(importAnnotation.pageNumber, true);\n      } else {\n        if (importAnnotation.length) {\n          annotationCount = importAnnotation.length;\n          documentCollections = this.createAnnotationsCollection();\n        } else {\n          isAnnotationObject = true;\n          documentCollections = this.createAnnotationsCollection(importAnnotation.pageNumber, true);\n        }\n      }\n      for (var a = 0; a < annotationCount; a++) {\n        // eslint-disable-next-line\n        var annotation = void 0;\n        if (isAnnotationObject) {\n          annotation = importAnnotation;\n        } else {\n          annotation = importAnnotation[parseInt(a.toString(), 10)];\n        }\n        // eslint-disable-next-line\n        var newAnnotation = {};\n        newAnnotation.ShapeAnnotationType = annotation.shapeAnnotationType;\n        newAnnotation.AnnotationAddMode = annotation.annotationAddMode;\n        newAnnotation.Author = annotation.author;\n        newAnnotation.AnnotationSelectorSettings = annotation.annotationSelectorSettings;\n        newAnnotation.AnnotationSettings = annotation.annotationSettings;\n        newAnnotation.PageNumber = annotation.pageNumber;\n        newAnnotation.ModifiedDate = annotation.modifiedDate;\n        newAnnotation.Subject = annotation.subject;\n        newAnnotation.Note = annotation.note;\n        newAnnotation.AnnotName = annotation.annotationId;\n        newAnnotation.IsCommentLock = annotation.isCommentLock;\n        newAnnotation.Comments = annotation.comments;\n        if (annotation.comments && annotation.comments.length > 0) {\n          // eslint-disable-next-line\n          var comments = [];\n          for (var i = 0; i < annotation.comments.length; i++) {\n            comments.push(this.updateComments(annotation, annotation.comments[parseInt(i.toString(), 10)]));\n          }\n          newAnnotation.Comments = comments;\n        }\n        if (annotation.review) {\n          newAnnotation.State = annotation.review.state;\n          newAnnotation.StateModel = annotation.review.stateModel;\n        }\n        newAnnotation.CustomData = annotation.customData;\n        newAnnotation.Opacity = annotation.opacity;\n        if (annotation.shapeAnnotationType === 'textMarkup') {\n          newAnnotation.AnnotType = 'textMarkup';\n          newAnnotation.Color = annotation.color;\n          newAnnotation.IsMultiSelect = annotation.isMultiSelect;\n          newAnnotation.TextMarkupAnnotationType = annotation.textMarkupAnnotationType;\n          newAnnotation.TextMarkupContent = annotation.textMarkupContent;\n          newAnnotation.TextMarkupStartIndex = annotation.textMarkupStartIndex;\n          newAnnotation.TextMarkupEndIndex = annotation.textMarkupEndIndex;\n          if (annotation.rect) {\n            newAnnotation.Rect = this.convertBounds(annotation.rect, true);\n          }\n          if (annotation.bounds && annotation.bounds.length >= 1) {\n            // eslint-disable-next-line\n            var bounds = new Array();\n            for (var i = 0; i < annotation.bounds.length; i++) {\n              bounds.push(this.convertBounds(annotation.bounds[parseInt(i.toString(), 10)]));\n            }\n            newAnnotation.Bounds = bounds;\n          }\n          documentCollections[annotation.pageNumber].textMarkupAnnotation.push(newAnnotation);\n        } else if (annotation.shapeAnnotationType === 'sticky') {\n          newAnnotation.AnnotType = 'sticky';\n          newAnnotation.Icon = 'Comment';\n          newAnnotation.Bounds = this.convertBounds(annotation.bounds);\n          newAnnotation.StrokeColor = annotation.strokeColor;\n          newAnnotation.Color = annotation.color;\n          documentCollections[annotation.pageNumber].stickyNotesAnnotation.push(newAnnotation);\n        } else if (annotation.shapeAnnotationType === 'FreeText') {\n          newAnnotation.AnnotType = 'freeText';\n          newAnnotation.Name = annotation.annotationId;\n          newAnnotation.MarkupText = annotation.dynamicText;\n          newAnnotation.Text = annotation.dynamicText;\n          newAnnotation.Note = annotation.dynamicText;\n          newAnnotation.TextAlign = annotation.textAlign;\n          newAnnotation.Thickness = annotation.thicknes;\n          newAnnotation.StrokeColor = annotation.strokeColor;\n          newAnnotation.FillColor = annotation.fillColor;\n          newAnnotation.FontColor = annotation.fontColor;\n          newAnnotation.FontSize = annotation.fontSize;\n          newAnnotation.FontFamily = annotation.fontFamily;\n          newAnnotation.Rotate = annotation.rotateAngle;\n          newAnnotation.Bounds = this.convertBounds(annotation.bounds);\n          // eslint-disable-next-line max-len\n          newAnnotation.Font = {\n            'Name': annotation.fontFamily,\n            'Size': annotation.fontSize,\n            'Bold': annotation.font.isBold,\n            'Italic': annotation.font.isItalic,\n            'Strikeout': annotation.font.isStrikeout,\n            'Underline': annotation.font.isUnderline\n          };\n          documentCollections[annotation.pageNumber].freeTextAnnotation.push(newAnnotation);\n        } else if (annotation.shapeAnnotationType === 'stamp') {\n          newAnnotation.AnnotType = 'stamp';\n          newAnnotation.Icon = annotation.icon;\n          newAnnotation.isDynamic = false;\n          newAnnotation.Rect = this.convertBounds(annotation.bounds, false, true);\n          newAnnotation.RotateAngle = annotation.rotateAngle;\n          newAnnotation.FillColor = annotation.fillColor;\n          newAnnotation.StrokeColor = annotation.strokeColor;\n          newAnnotation.StampAnnotationType = annotation.stampAnnotationType;\n          newAnnotation.CreationDate = annotation.creationDate;\n          if (annotation.stampAnnotationType === 'image') {\n            // eslint-disable-next-line\n            var apperarance = [];\n            // eslint-disable-next-line\n            var imageData = {\n              'imagedata': annotation.stampAnnotationPath\n            };\n            apperarance.push(imageData);\n            newAnnotation.Apperarance = apperarance;\n          }\n          if (annotation.isDynamicStamp) {\n            newAnnotation.IsDynamic = true;\n            newAnnotation.StrokeColor = annotation.stampFillcolor;\n            // eslint-disable-next-line\n            var apperarance = [];\n            // eslint-disable-next-line\n            var imageData = {\n              'type': 'string',\n              'text': annotation.dynamicText,\n              'currentFontname': '95b303ab-d397-438a-83af-e2ff8a9900f1',\n              'baseFontName': 'Helvetica-BoldOblique',\n              'fontSize': 10,\n              'isImport': true\n            };\n            apperarance.push(imageData);\n            newAnnotation.Apperarance = apperarance;\n          }\n          documentCollections[annotation.pageNumber].stampAnnotations.push(newAnnotation);\n        } else if (annotation.shapeAnnotationType === 'Ink' || annotation.shapeAnnotationType === 'Signature') {\n          newAnnotation.StrokeColor = annotation.strokeColor;\n          newAnnotation.FillColor = annotation.fillColor;\n          newAnnotation.Thickness = annotation.thickness;\n          newAnnotation.Bounds = this.convertBounds(annotation.bounds);\n          newAnnotation.PathData = annotation.data;\n          newAnnotation.pageIndex = annotation.pageNumber;\n          if (annotation.shapeAnnotationType === 'Ink') {\n            newAnnotation.AnnotType = 'Ink';\n            newAnnotation.IsPathData = true;\n            documentCollections[annotation.pageNumber].signatureInkAnnotation.push(newAnnotation);\n          }\n          if (annotation.shapeAnnotationType === 'Signature') {\n            newAnnotation.AnnotType = 'Signature';\n            newAnnotation.SignatureName = annotation.annotationId;\n            newAnnotation.IsSignature = true;\n            documentCollections[annotation.pageNumber].signatureAnnotation.push(newAnnotation);\n          }\n        } else {\n          // eslint-disable-next-line max-len\n          if (annotation.shapeAnnotationType === 'Line' || annotation.shapeAnnotationType === 'LineWidthArrowHead' || annotation.shapeAnnotationType === 'Polyline' || annotation.shapeAnnotationType === 'Polygon' || annotation.shapeAnnotationType === 'Polyline' || annotation.shapeAnnotationType === 'Circle' || annotation.shapeAnnotationType === 'Oval' || annotation.shapeAnnotationType === 'Rectangle' || annotation.shapeAnnotationType === 'Square' || annotation.shapeAnnotationType === 'Ellipse') {\n            newAnnotation.AnnotType = 'shape';\n            newAnnotation.StrokeColor = annotation.strokeColor;\n            newAnnotation.FillColor = annotation.fillColor;\n            newAnnotation.Thickness = annotation.thickness;\n            newAnnotation.BorderStyle = annotation.borderStyle;\n            newAnnotation.BorderDashArray = annotation.borderDashArray;\n            newAnnotation.RotateAngle = annotation.rotateAngle;\n            newAnnotation.IsCloudShape = annotation.isCloudShape;\n            newAnnotation.CloudIntensity = annotation.cloudIntensity;\n            newAnnotation.RectangleDifference = annotation.rectangleDifference;\n            newAnnotation.LineHeadStart = annotation.lineHeadStart;\n            newAnnotation.LineHeadEnd = annotation.lineHeadEnd;\n            newAnnotation.IsLocked = annotation.isLocked;\n            newAnnotation.EnableShapeLabel = annotation.enableShapeLabel;\n            newAnnotation.LabelContent = annotation.labelContent;\n            newAnnotation.LabelFillColor = annotation.labelFillColor;\n            newAnnotation.LabelBorderColor = annotation.labelBorderColor;\n            newAnnotation.FontColor = annotation.fontColor;\n            newAnnotation.FontSize = annotation.fontSize;\n            newAnnotation.LabelBounds = this.convertBounds(annotation.labelBounds);\n            newAnnotation.LabelSettings = annotation.labelSettings;\n            newAnnotation.Bounds = this.convertBounds(annotation.bounds);\n            newAnnotation.LeaderLength = annotation.leaderLength;\n            newAnnotation.LeaderLineExtenstion = annotation.leaderLineExtension;\n            if (annotation.vertexPoints && annotation.vertexPoints.length >= 1) {\n              // eslint-disable-next-line\n              var points = new Array();\n              for (var i = 0; i < annotation.vertexPoints.length; i++) {\n                points.push(this.convertVertexPoints(annotation.vertexPoints[parseInt(i.toString(), 10)]));\n              }\n              newAnnotation.VertexPoints = points;\n            }\n            newAnnotation.EnableShapeLabel = annotation.enableShapeLabel;\n            // eslint-disable-next-line max-len\n            if (annotation.subject === 'Distance calculation' || annotation.subject === 'Perimeter calculation' || annotation.subject === 'Area calculation' || annotation.subject === 'Radius calculation' || annotation.subject === 'Volume calculation') {\n              newAnnotation.AnnotType = 'shape_measure';\n              // eslint-disable-next-line\n              var calibrate = annotation.calibrate;\n              if (calibrate) {\n                // eslint-disable-next-line\n                newAnnotation.Calibrate = {\n                  'Ratio': calibrate.ratio,\n                  'X': [{\n                    'Unit': calibrate.x[0].unit,\n                    'ConversionFactor': calibrate.x[0].conversionFactor,\n                    'FractionalType': calibrate.x[0].fractionalType,\n                    'Denominator': calibrate.x[0].denominator,\n                    'FormatDenominator': calibrate.x[0].formatDenominator\n                  }],\n                  // eslint-disable-next-line\n                  'Distance': [{\n                    'Unit': calibrate.distance[0].unit,\n                    'ConversionFactor': calibrate.distance[0].conversionFactor,\n                    'FractionalType': calibrate.distance[0].fractionalType,\n                    'Denominator': calibrate.distance[0].denominator,\n                    'FormatDenominator': calibrate.distance[0].formatDenominator\n                  }],\n                  // eslint-disable-next-line\n                  'Area': [{\n                    'Unit': calibrate.area[0].unit,\n                    'ConversionFactor': calibrate.area[0].conversionFactor,\n                    'FractionalType': calibrate.area[0].fractionalType,\n                    'Denominator': calibrate.area[0].denominator,\n                    'FormatDenominator': calibrate.area[0].formatDenominator\n                  }],\n                  // eslint-disable-next-line\n                  'Angle': null,\n                  'Volume': null,\n                  'TargetUnitConversion': calibrate.targetUnitConversion,\n                  'Depth': calibrate.depth\n                };\n              }\n              newAnnotation.Indent = annotation.indent;\n              newAnnotation.Caption = annotation.caption;\n              newAnnotation.CaptionPosition = annotation.captionPosition;\n              newAnnotation.LeaderLineExtension = annotation.leaderLineExtension;\n              newAnnotation.LeaderLength = annotation.leaderLength;\n              newAnnotation.LeaderLineOffset = annotation.leaderLineOffset;\n              documentCollections[annotation.pageNumber].measureShapeAnnotation.push(newAnnotation);\n            } else {\n              documentCollections[annotation.pageNumber].shapeAnnotation.push(newAnnotation);\n            }\n          }\n        }\n      }\n      pdfAnnotation.pdfAnnotation = documentCollections;\n      this.pdfViewer.importAnnotation(pdfAnnotation);\n    }\n  };\n  /**\n   * @param bounds\n   * @private\n   */\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.convertBounds = function (bounds, isRect, isStamp) {\n    if (bounds) {\n      if (isRect) {\n        var left = bounds.left ? bounds.left : bounds.Left ? bounds.Left : 0;\n        var right = bounds.right ? bounds.right : bounds.Right ? bounds.Right : 0;\n        var bottom = bounds.bottom ? bounds.bottom : bounds.Bottom ? bounds.Bottom : 0;\n        var top_5 = bounds.top ? bounds.top : bounds.Top ? bounds.Top : 0;\n        return {\n          left: left,\n          right: right,\n          bottom: bottom,\n          top: top_5\n        };\n      } else {\n        var x = bounds.x ? bounds.x : bounds.left ? bounds.left : bounds.Left ? bounds.Left : 0;\n        var y = bounds.y ? bounds.y : bounds.top ? bounds.top : bounds.Top ? bounds.Top : 0;\n        var width = bounds.width ? bounds.width : bounds.Width ? bounds.Width : 0;\n        var height = bounds.height ? bounds.height : bounds.Height ? bounds.Height : 0;\n        if (isStamp) {\n          return {\n            X: this.ConvertPixelToPoint(x),\n            Y: this.ConvertPixelToPoint(y),\n            Left: this.ConvertPixelToPoint(x),\n            Top: this.ConvertPixelToPoint(y),\n            Height: this.ConvertPixelToPoint(height),\n            Width: this.ConvertPixelToPoint(width)\n          };\n        } else {\n          return {\n            X: x,\n            Y: y,\n            Left: x,\n            Top: y,\n            Height: height,\n            Width: width\n          };\n        }\n      }\n    }\n  };\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.ConvertPixelToPoint = function (number) {\n    return number * (72 / 96);\n  };\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.convertVertexPoints = function (points) {\n    if (points) {\n      var x = points.x ? points.x : points.X ? points.X : 0;\n      var y = points.y ? points.y : points.Y ? points.Y : 0;\n      return {\n        X: x,\n        Y: y,\n        Left: x,\n        Top: y\n      };\n    }\n  };\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.updateComments = function (annotation, comments) {\n    if (annotation && comments) {\n      // eslint-disable-next-line\n      var newAnnotation = {};\n      newAnnotation.ShapeAnnotationType = annotation.shapeAnnotationType;\n      newAnnotation.Author = comments.author;\n      newAnnotation.AnnotationSelectorSettings = annotation.annotationSelectorSettings;\n      newAnnotation.AnnotationSettings = annotation.annotationSettings;\n      newAnnotation.PageNumber = annotation.pageNumber;\n      newAnnotation.ModifiedDate = comments.modifiedDate;\n      newAnnotation.Subject = annotation.subject;\n      newAnnotation.Note = comments.note;\n      newAnnotation.AnnotName = comments.annotName;\n      newAnnotation.Comments = comments.comments;\n      newAnnotation.State = comments.review.state;\n      newAnnotation.StateModel = comments.review.stateModel;\n      newAnnotation.CustomData = annotation.customData;\n      newAnnotation.IsLock = comments.isLock;\n      return newAnnotation;\n    }\n  };\n  /**\n   * @private\n   */\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.removeFocus = function () {\n    if (isBlazor()) {\n      // eslint-disable-next-line\n      var currentPageContainer = this.pdfViewer.element.querySelector('#' + this.pdfViewer.element.id + '_totalPage');\n      // eslint-disable-next-line max-len\n      if (currentPageContainer && currentPageContainer.firstElementChild && currentPageContainer.firstElementChild.firstElementChild) {\n        currentPageContainer.firstElementChild.firstElementChild.blur();\n      }\n    }\n  };\n  /**\n   * @private\n   */\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.updateDocumentEditedProperty = function (isEdited) {\n    this.pdfViewer.allowServerDataBinding = true;\n    this.pdfViewer.isDocumentEdited = isEdited;\n    this.pdfViewer.allowServerDataBinding = false;\n  };\n  /**\n  * @private\n  */\n  PdfViewerBase.prototype.getWindowDevicePixelRatio = function () {\n    var devicePixelRatio = window.devicePixelRatio;\n    if (!Browser.isDevice) {\n      return devicePixelRatio;\n    } else {\n      return devicePixelRatio = 2;\n    }\n  };\n  /**\n  * @private\n  */\n  PdfViewerBase.prototype.getZoomRatio = function (zoom) {\n    var zoomFactor = this.getZoomFactor();\n    var zoomValue = zoom ? zoom : 1;\n    var ratio;\n    var devicePixelRatio = this.getWindowDevicePixelRatio();\n    if (!Browser.isDevice || Browser.isDevice && zoomFactor <= 0.7) {\n      ratio = zoomValue * devicePixelRatio;\n    } else {\n      ratio = zoomValue;\n    }\n    return ratio;\n  };\n  /**\n  * @private\n  */\n  PdfViewerBase.prototype.importJsonForRotatedDocuments = function (Rotate, pageNumber, bounds, originalRotation) {\n    // eslint-disable-next-line\n    var rotateAngle = Math.abs(Rotate);\n    var pageDetails = this.pageSize[parseInt(pageNumber.toString(), 10)];\n    //originalRotation = !isNullOrUndefined(originalRotation) ? originalRotation : pageDetails.rotation;\n    if (originalRotation !== pageDetails.rotation) {\n      rotateAngle = this.getRotationAngle(originalRotation, pageNumber);\n      this.isPageRotated = true;\n    } else {\n      rotateAngle = 0;\n      this.isPageRotated = false;\n    }\n    if (rotateAngle === 1) {\n      return {\n        X: pageDetails.width - bounds.Y - bounds.Height,\n        Y: bounds.X,\n        Height: bounds.Width,\n        Width: bounds.Height\n      };\n    } else if (rotateAngle === 2) {\n      return {\n        X: pageDetails.width - bounds.X - bounds.Width,\n        Y: pageDetails.height - bounds.Y - bounds.Height,\n        Height: bounds.Height,\n        Width: bounds.Width\n      };\n    } else if (rotateAngle === 3) {\n      return {\n        X: bounds.Y,\n        Y: pageDetails.height - bounds.X - bounds.Width,\n        Height: bounds.Width,\n        Width: bounds.Height\n      };\n    } else {\n      return bounds;\n    }\n  };\n  PdfViewerBase.prototype.getRotationAngle = function (originalRotation, pageNumber) {\n    var pageDetails = this.pageSize[parseInt(pageNumber.toString(), 10)];\n    originalRotation = Math.abs(originalRotation);\n    var rotateAngle;\n    if (originalRotation === 0) {\n      return rotateAngle = pageDetails.rotation;\n    } else if (originalRotation === 1 || originalRotation === 90) {\n      if (pageDetails.rotation == 0) {\n        return rotateAngle = 3;\n      } else if (pageDetails.rotation === 2) {\n        return rotateAngle = 1;\n      } else if (pageDetails.rotation === 3) {\n        return rotateAngle = 2;\n      }\n    } else if (originalRotation === 2 || originalRotation === 180) {\n      if (pageDetails.rotation == 0) {\n        return rotateAngle = 2;\n      } else if (pageDetails.rotation === 1) {\n        return rotateAngle = 3;\n      } else if (pageDetails.rotation === 3) {\n        return rotateAngle = 1;\n      }\n    } else if (originalRotation === 3 || originalRotation === 270) {\n      if (pageDetails.rotation == 0) {\n        return rotateAngle = 1;\n      } else if (pageDetails.rotation === 2) {\n        return rotateAngle = 3;\n      } else if (pageDetails.rotation === 1) {\n        return rotateAngle = 2;\n      }\n    }\n  };\n  /**\n  * @private\n  */\n  PdfViewerBase.prototype.calculateVertexPoints = function (Rotate, pageNumber, vertexPoints, originalRotation) {\n    // eslint-disable-next-line\n    var rotateAngle = Math.abs(Rotate);\n    var vPoints = [];\n    var pageDetails = this.pageSize[parseInt(pageNumber.toString(), 10)];\n    var x;\n    var y;\n    var point;\n    //originalRotation = !isNullOrUndefined(originalRotation) ? originalRotation : pageDetails.rotation;\n    if (originalRotation !== pageDetails.rotation) {\n      rotateAngle = this.getRotationAngle(originalRotation, pageNumber);\n    } else {\n      rotateAngle = 0;\n    }\n    for (var j = 0; j < vertexPoints.length; j++) {\n      if (rotateAngle === 1) {\n        x = vertexPoints[parseInt(j.toString(), 10)].Y ? pageDetails.width - vertexPoints[parseInt(j.toString(), 10)].Y : pageDetails.width - vertexPoints[parseInt(j.toString(), 10)].y;\n        y = vertexPoints[parseInt(j.toString(), 10)].X ? vertexPoints[parseInt(j.toString(), 10)].X : vertexPoints[parseInt(j.toString(), 10)].x;\n        point = {\n          x: x,\n          y: y\n        };\n        vPoints.push(point);\n      } else if (rotateAngle === 2) {\n        x = vertexPoints[parseInt(j.toString(), 10)].X ? pageDetails.width - vertexPoints[parseInt(j.toString(), 10)].X : pageDetails.width - vertexPoints[parseInt(j.toString(), 10)].x;\n        y = vertexPoints[parseInt(j.toString(), 10)].Y ? pageDetails.height - vertexPoints[parseInt(j.toString(), 10)].Y : pageDetails.height - vertexPoints[parseInt(j.toString(), 10)].y;\n        var point_1 = {\n          x: x,\n          y: y\n        };\n        vPoints.push(point_1);\n      } else if (rotateAngle == 3) {\n        x = vertexPoints[parseInt(j.toString(), 10)].Y ? vertexPoints[parseInt(j.toString(), 10)].Y : vertexPoints[parseInt(j.toString(), 10)].y;\n        y = vertexPoints[parseInt(j.toString(), 10)].X ? pageDetails.height - vertexPoints[parseInt(j.toString(), 10)].X : pageDetails.height - vertexPoints[parseInt(j.toString(), 10)].x;\n        point = {\n          x: x,\n          y: y\n        };\n        vPoints.push(point);\n      } else {\n        x = vertexPoints[parseInt(j.toString(), 10)].X ? vertexPoints[parseInt(j.toString(), 10)].X : vertexPoints[parseInt(j.toString(), 10)].x;\n        y = vertexPoints[parseInt(j.toString(), 10)].Y ? vertexPoints[parseInt(j.toString(), 10)].Y : vertexPoints[parseInt(j.toString(), 10)].y;\n        var point_2 = {\n          x: x,\n          y: y\n        };\n        vPoints.push(point_2);\n      }\n    }\n    return vPoints;\n  };\n  /**\n  * @private\n  */\n  PdfViewerBase.prototype.isSignaturePathData = function (data) {\n    // eslint-disable-next-line\n    var pathRegex = /^([Mm]\\s*\\d+(\\.\\d+)?\\s*,\\s*\\d+(\\.\\d+)?(\\s+[Ll]\\s*\\d+(\\.\\d+)?\\s*,\\s*\\d+(\\.\\d+)?)*\\s*)+$/;\n    return pathRegex.test(data);\n  };\n  /**\n  * @private\n  */\n  PdfViewerBase.prototype.isSignatureImageData = function (data) {\n    // eslint-disable-next-line\n    var base64ImageRegex = /^data:image\\/([a-z]+);base64,/;\n    return base64ImageRegex.test(data);\n  };\n  /**\n  * @private\n  */\n  PdfViewerBase.prototype.getSanitizedString = function (annotationData) {\n    var sanitizedString = annotationData.replace(/[\\x00-\\x1F\\x7F]/g, function (c) {\n      return \"\\\\u\" + c.charCodeAt(0).toString(16).padStart(4, '0');\n    });\n    return sanitizedString;\n  };\n  /**\n   * @param pageIndex\n   * @private\n   */\n  // eslint-disable-next-line\n  PdfViewerBase.prototype.getLinkInformation = function (pageIndex, isTextSearch) {\n    var zoomFactor = this.retrieveCurrentZoomFactor();\n    if (this.pdfViewer.restrictZoomRequest && !this.pdfViewer.tileRenderingSettings.enableTileRendering) {\n      zoomFactor = 1;\n    }\n    var id = this.documentId + '_' + pageIndex;\n    var storedImage = this.pageImageDetails ? this.pageImageDetails[id + '_' + zoomFactor + '_imageUrl'] ? this.pageImageDetails[id + '_' + zoomFactor + '_imageUrl'] : this.getPinchZoomPage(pageIndex) : this.getPinchZoomPage(pageIndex);\n    var storedHyperlink = this.hyperlinkAndLinkAnnotation ? this.hyperlinkAndLinkAnnotation[id + '_hyperlinkAndLinkAnnotation'] ? this.hyperlinkAndLinkAnnotation[id + '_hyperlinkAndLinkAnnotation'] : this.getPinchZoomPage(pageIndex) : this.getPinchZoomPage(pageIndex);\n    var storedTextDetails = this.pageTextDetails ? this.pageTextDetails[id + '_textDetails'] ? this.pageTextDetails[id + '_textDetails'] : this.getPinchZoomPage(pageIndex) : this.getPinchZoomPage(pageIndex);\n    if (!storedImage) {\n      // eslint-disable-next-line\n      var storedTileData = this.getStoredTileImageDetails(pageIndex, 0, 0, zoomFactor);\n      if (storedTileData) {\n        storedImage = storedTileData;\n      }\n    }\n    // eslint-disable-next-line\n    var imageUrl = null;\n    var linkAnnotation = null;\n    var textDetails = null;\n    var mergedObj = null;\n    if (storedImage && storedHyperlink) {\n      // eslint-disable-next-line\n      imageUrl = JSON.parse(storedImage);\n      linkAnnotation = JSON.parse(storedHyperlink);\n      textDetails = JSON.parse(storedTextDetails);\n      mergedObj = Object.assign({}, imageUrl, linkAnnotation, textDetails);\n      this.isPinchZoomStorage = false;\n    }\n    return mergedObj;\n  };\n  return PdfViewerBase;\n}();\nexport { PdfViewerBase };","map":{"version":3,"names":["__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__generator","body","_","label","sent","t","trys","ops","f","y","g","verb","Symbol","iterator","n","v","op","TypeError","call","pop","length","push","createElement","Browser","isNullOrUndefined","isBlazor","Internationalization","Dialog","TextLayer","ContextMenu","Signature","PdfFormFieldBase","AccessibilityTags","NavigationPane","NumericTextBox","AjaxHandler","Point","Rect","identityMatrix","transformPointByMatrix","contains","rotateMatrix","SelectTool","MoveTool","ResizeTool","ConnectTool","NodeDrawingTool","PolygonDrawingTool","LineTool","RotateTool","StampTool","InkDrawingTool","Selector","ActiveElements","findActiveElement","renderAdornerLayer","cloneObject","BlazorContextMenu","createSpinner","showSpinner","hideSpinner","BlazorUiAdaptor","PdfViewerBase","viewer","_this","hyperlinkAndLinkAnnotation","pageTextDetails","pageImageDetails","pageSize","pageCount","isReRenderRequired","currentPageNumber","activeElements","mouseDownEvent","pngData","isDocumentLoaded","renderedPagesList","pageGap","signatureAdded","isFreeTextSelected","pageLeft","sessionLimit","pageStopValue","toolbarHeight","pageLimit","previousPage","isViewerMouseDown","isViewerMouseWheel","scrollPosition","sessionStorage","isLoadedFormFieldAdded","pointerCount","pointersForTouch","isPasswordAvailable","passwordData","reRenderedCount","mouseX","mouseY","mouseLeft","mouseTop","touchClientX","touchClientY","previousTime","currentTime","isTouchScrolled","isLongTouchPropagated","longTouchTimer","isViewerContainerDoubleClick","dblClickTimer","pinchZoomStorage","isTextSelectionDisabled","isPanMode","dragX","dragY","isScrollbarMouseDown","scrollX","scrollY","ispageMoved","isThumb","isTapHidden","singleTapTimer","tapCount","inputTapCount","isInitialLoaded","annotationPageList","importPageList","isImportAction","isImportedAnnotation","isAnnotationCollectionRemoved","tool","action","eventArgs","inAction","isMouseDown","isStampMouseDown","stampAdded","customStampCount","isDynamicStamp","isMixedSizeDocument","highestWidth","highestHeight","customStampCollection","isAlreadyAdded","isWebkitMobile","isFreeTextContextMenu","isSelection","isAddAnnotation","annotationComments","isToolbarSignClicked","signatureCount","isSignatureAdded","isNewSignatureAdded","isInitialPageMode","documentAnnotationCollections","annotationRenderredList","annotationStorage","formFieldStorage","isStorageExceed","isFormStorageExceed","isNewStamp","downloadCollections","isAnnotationAdded","annotationEvent","isAnnotationDrawn","isAnnotationSelect","isAnnotationMouseDown","isAnnotationMouseMove","validateForm","isMinimumZoom","documentLoaded","tileRenderCount","tileRequestCount","isTileImageRendered","isDataExits","requestLists","tilerequestLists","textrequestLists","renderThumbnailImages","pageRenderCount","isInkAdded","inkCount","isAddedSignClicked","imageCount","isMousedOver","isFormFieldSelect","isFormFieldMouseDown","isFormFieldMouseMove","isFormFieldMousedOver","isPassword","digitalSignaturePages","isDigitalSignaturePresent","isDrawnCompletely","isAddComment","drawSignatureWithTool","formFieldCollection","nonFillableFields","isInitialField","isTouchDesignerMode","isPrint","isPDFViewerJson","isJsonImported","isJsonExported","isPageRotated","downloadFileName","isFocusField","isTouchPad","isMacGestureActive","macGestureStartScale","zoomInterval","isTaggedPdf","accessibilityTagsHandler","accessibilityTagsCollection","pageRequestListForAccessibilityTags","enableAccessibilityMultiPageRequest","clientSideRendering","focusField","isSkipDocumentPath","clearSessionStorage","documentId","hashId","window","getItem","documentLiveCount","serviceURL","isIE","info","name","decodeURI","jsonObject","elementId","pdfViewer","element","id","actionName","browserSupportsKeepalive","Request","headerValue","setUnloadRequestHeaders","credentialsData","ajaxRequestSettings","withCredentials","fetch","method","credentials","headers","JSON","stringify","clearCache","removeItem","onWindowResize","event","proxy","enableRtl","viewerContainer","style","right","navigationPane","sideBarToolbar","getViewerContainerLeft","left","commentPanelContainer","offsetWidth","viewerElementWidth","clientWidth","width","viewerWidth","getViewerContainerRight","toolbarModule","toolbarContainer","querySelector","getElement","formDesignerToolbarHeight","getBoundingClientRect","height","isAnnotationToolbarHidden","isDevice","enableDesktopMode","isNavigationToolbarVisible","navigationToolbar","isFormDesignerToolbarHidded","formDesignerToolbar","updatePageHeight","annotationToolbarContainer","annotationToolbarHeight","bookmarkViewModule","bookmarkContainer","toString","pageContainer","onToolbarResize","getViewerMainContainerWidth","enableToolbar","thumbnailViewModule","gotoThumbnailImage","textSearchModule","textSearchBoxOnResize","isBookmarkListOpen","updateZoomValue","mobileScrollerContainer","parseFloat","mobilePageNoContainer","top","clientHeight","updateMobileScrollerPosition","setResizeIconTop","setCommentPanelResizeIconTop","type","signatureModule","updateCanvasSize","viewerContainerOnMousedown","isUpdate","target","button","getPopupNoteVisibleStatus","isClickedOnScrollBar","detail","className","focusViewerContainer","scrollTop","getZoomFactor","clientX","clientY","document","documentMode","textSelectionModule","preventDefault","clearTextSelection","pageX","pageY","cursor","isShapeBasedAnnotationsEnabled","isNaN","activePageID","diagramMouseDown","annotation","stickyNotesAnnotationModule","accordionContainer","annotationModule","isEditableElement","updateCommentPanel","mouseDownHandler","viewerContainerOnMouseup","scrollHoldTimer","clearTimeout","pageViewScrollChanged","isSignatureFieldReadOnly","split","getElementById","disabled","children","clearSelection","diagramMouseUp","onAnnotationMouseUp","selectedItems","formFields","toolbar","formDesignerToolbarModule","showHideDeleteIcon","commentElement","display","annotations","accordionExpand","ej2_instances","expandItem","commentsDiv","annotName","classList","firstChild","click","eventTarget_1","offsetX","offsetY","zoomFactor","pageIndex","pageString","parseInt","formFieldsTargetId","filter","targetFormField","pageDiv","pageCurrentRect","firePageClick","formFieldsModule","formDesignerModule","removeFocus","isTextMarkupAnnotationModule","isToolbarInkClicked","textMarkupAnnotationModule","onTextMarkupAnnotationMouseUp","updateCanvas","detectTouchPad","wheelDeltaY","deltaY","Math","abs","deltaMode","handleMacGestureStart","stopPropagation","magnification","handleMacGestureChange","macX","macY","scale","Number","toFixed","initiateMouseZoom","setTimeout","handleMacGestureEnd","viewerContainerOnMouseWheel","getRerenderCanvasCreated","ctrlKey","zoomDifference","magnificationModule","zoomValue","isMacSafari","wheelDelta","x","pageRerenderOnMouseWheel","fitPageScrollMouseWheel","textSelectionOnMouseWheel","onWindowKeyDown","isMac","navigator","platform","match","isCommandKey","metaKey","isFreeTextAnnotationModule","freeTextAnnotationModule","isInuptBoxInFocus","inputElementModule","isInFocus","keyCode","activeElement","tagName","isContentEditable","DeleteKeyPressed","addInkAnnotation","deSelectCommentAnnotation","updateStampItems","annotationToolbarModule","deselectAllItemsInBlazor","deselectAllItems","isFormDesignerToolbarVisible","formFieldElement","remove","tabIndex","formFieldCollections","fieldId","currentTarget","parentElement","i","formfield","fireFormFieldClickEvent","formField","formFieldAnnotationType","setCheckBoxState","nextField","fieldIndex","currentTarget_1","id_1","shiftKey","key","findIndex","field","focusFormField","formDesigner","formField_1","fontFamily","fontSize","fontStyle","color","backgroundColor","alignment","isReadonly","visibility","maxLength","isRequired","rotation","rotateAngle","tooltip","options","isChecked","isSelected","fireFocusOutFormField","viewerContainerOnKeyDown","updateScrollTop","openFileDialogBox","enableTextSelection","copyText","copy","contextMenuModule","previousAction","enableTextSearch","textSearchButtonHandler","printModule","enablePrint","print","undo","cut","redo","isShapeCopied","isSearchboxDialogOpen","searchBoxId","isPropertyDialogOpen","paste","magnifyBehaviorKeyDown","viewerContainerOnMousemove","isDropletClicked","isEnableTextMarkupResizer","currentTextMarkupAddMode","textSelect","textSelectionOnMouseMove","selection","getSelection","isCollapsed","anchorNode","isTextSelection","skipPreventDefault","onTextMarkupAnnotationMouseMove","panOnMouseMove","canvas","indexOf","getEventPageNumber","diagram","canvas1","top_1","stampAnnotationModule","currentStampAnnotation","shapeAnnotationType","top_2","stampModule","containsPoint","isStampAnnotSelected","diagramMouseMove","diagramMouseLeave","enableStampAnnotations","isNewStampAnnot","enableHandwrittenSignature","isStampMode","deltaX","scrollLeft","isNavigationPaneResized","viewerContainerOnMouseLeave","textSelectionOnMouseLeave","viewerContainerOnMouseEnter","clear","viewerContainerOnMouseOver","viewerContainerOnClick","getCurrentTextMarkupAnnotation","getTextMarkupAnnotationMode","pageNumber","fireTextSelectionStart","selectAWord","contextMenuSettings","contextMenuAction","calculateContextMenuPosition","maintainSelectionOnZoom","applySelection","fireTextSelectEnd","drawTextMarkupAnnotations","position","currentPosition","getMouseEventArgs","source","isMetaKey","clickCount","mouseUp","currentTextMarkupAnnotation","annotationSettings","isLock","currentAnnotation","annotationSelect","isFreeTextAnnotation","elmtPosition","bounds","addInuptElemet","enableShapeLabel","editLabel","enableAnnotationToolbar","isAnnotationToolbarVisible","showAnnotationToolbar","annotationItem","annotation_1","selectTextMarkupCurrentPage","comments","designerMode","cancel","fireFormFieldDoubleClickEvent","createPropertiesWindow","selectEntireLine","viewerContainerOnDragStart","viewerContainerOnContextMenuClick","onWindowMouseUp","modules","isLeftDropletClicked","isRightDropletClicked","showHideDropletDiv","isTextMarkupAnnotationMode","isNewFreeTextAnnotation","contextMenuElement","textSelectionOnMouseup","applySpanForSelection","viewerElement","targetElement","checkIsNormalText","removeAllRanges","selectionStartPage","onWindowTouchEnd","viewerContainerOnTouchStart","touchPoints","touches","setTouchPoints","preventTouchEvent","onTextMarkupAnnotationTouchEnd","Date","getTime","handleTaps","handleTextBoxTaps","isDesignerMode","close","isMoving","open","viewerContainerOnLongTouch","textMarkupToolbarElement","add","initiateTouchSelection","viewerContainerOnPointerDown","pointerType","viewerContainerOnTouchMove","enablePinchZoom","initiatePinchMove","getPagesPinchZoomed","pinchMoveScroll","top_3","viewerContainerOnPointerMove","pointerId","viewerContainerOnTouchEnd","pinchMoveEnd","cancelable","clearInterval","isDeviceiOS","duration","difference","changedTouches","speed","renderStampAnnotation","viewerContainerOnPointerEnd","viewerContainerOnScroll","allowServerDataBind","allowServerDataBinding","enableServerDataBinding","scrollposX","scrollposY","ratio","scrollHeight","offsetTop","containerValue","verticalScrollValue","pageHeight","getPageHeight","getPageTop","fitType","renderElementsVirtualScroll","getPinchZoomed","getPinchScrolled","showPageLoadingIndicator","updateCurrentPage","updateNavigationButtons","mobileSpanContainer","innerHTML","mobilecurrentPageContainer","isThumbnailClicked","firePageChange","updatePagesForFitPage","currentPage","clearIntervalTimer","data","getLinkInformation","getStoredData","initiatePageViewScrollChanged","timer","scrollSettings","delayPageRequestTimeOnScroll","updateCommentPanelScrollTop","textLayer","accessibilityTags","prototype","initializeComponent","blazorUIAdaptor","controlWidth","toolbarDiv","viewerMainContainer","createMobilePageNumberContainer","direction","touchAction","setMaximumHeight","mainContainer","appendChild","applyViewerHeight","initializeNavigationPane","intializeToolbar","enableNavigationToolbar","sideBarToolbarSplitter","isBookmarkOpen","isThumbnailOpen","updateViewerContainerOnClose","mobilenumberContainer","mobiletotalPageContainer","attrs","createThumbnailContainer","createPrintPopup","createGoToPagePopup","waitingPopup","cssClass","setLoaderProperties","spinnerElement","getElementsByClassName","createContextMenu","createFileInputElement","wireEvents","createTextSearchBox","documentPath","_dotnetInstance","invokeMethodAsync","load","initializeCollection","interactionMode","cssFloat","zIndex","addEventListener","mobileScrollContainerDown","bind","mobileScrollContainerEnd","initiatePageRender","documentData","password","unload","loadedData","createGUID","showLoadingIndicator","isFileName","saveDocumentInfo","initiatePanning","checkDocumentData","isbase64","includes","fileByteArray","convertBase64","setFileName","fileName","constructJsonObject","createAjaxRequest","initiateLoadDocument","jsonDocumentId","base64","Uint8Array","atob","map","char","charCodeAt","loadSuccess","documentDetails","parse","error","onControlError","serverActionSettings","StatusText","uniqueId","fireAjaxRequestSuccess","requestSuccess","clearAnnotationSelection","showToolbar","relativePosition","currentRect","minHeight","updateWidth","updateHeight","updateViewerContainer","sideBarContentContainer","updateViewerContainerOnExpand","updateViewerContainerSize","refreshOverflow","goToPagePopup","show","removeEventListener","checkRedirection","redirect","redirectUrl","redirectUri","location","href","getPdfBase64","input","startsWith","response","ok","arrayBuffer","console","statusText","Error","pdfData","binary","reduce","str","byte","String","fromCharCode","base64String","btoa","catch","message","loadRequestHandler","url","serviceUrl","responseType","mode","pdfBase64","pdfRendererModule","updateFormFieldName","openImportExportNotificationPopup","localeObj","getConstant","send","onSuccess","onFailure","statusString","status","openNotificationPopup","fireAjaxRequestFailed","onError","PdfRenderedFormFields","ActualFieldName","FieldName","Value","errorString","showNotificationDialog","promise","createNotificationPopup","showNotificationPopup","digitialSignatureFile","uploadedFile","replace","undefined","saveDocumentHashData","saveFormfieldsData","pageRender","pageData","pageSizes","setItem","restrictionList","RestrictionSummary","RestrictionEnabled","renderPasswordPopup","renderCorruptPopup","updateToolbarItems","createAnnotationSelectElement","restrictionSummary","isEnable","EnableRestriction","DisableToolbarItems","enableFormFields","enableFormFieldButton","enableAnnotation","passwordDialogReset","passwordPopup","hide","initPageDiv","previousZoomValue","isZoomMode","isAutoZoom","zoomTo","zoomMode","fitToWidth","fitToPage","isInitialLoading","viewPortWidth","pageWidth","proxy_1","pdfViewerRunner","postMessage","onmessage","initialPagesRendered","uploadedDocumentName","enableAnnotationAddTools","createRequestForRender","renderLimit","initialRenderPages","pageTop","viewerHeight","renderPageElement","createPasswordPopup","fireDocumentLoadFailed","promptElement","textContent","focus","promptElement_1","passwordInput_1","promise_1","createCorruptedPopup","corruptPopup","isBase64String","isClientsideLoading","showDigitalSignatureAppearance","hideEmptyDigitalSignatureFields","documentStringArray","encodeURI","isFormFieldDocument","formfieldvalue","setItemInSessionStorage","splice","submitItem","enableItems","updateWaitingPopup","bottom","getActivePage","isPageNumber","createWaitingPopup","isShow","spinnerPosition","container","inner","circle","transformOrigin","showPrintLoadingIndicator","printWaitingPopup","printMainContainer","isPinchZoomed","getMagnified","isMagnified","isPinchScrolled","isPagePinchZoomed","getPagesZoomed","isPagesZoomed","isRerenderCanvasCreated","getDocumentId","download","createRequestForDownload","saveAsBlob","saveAsBlobRequest","constructJsonDownload","dowonloadRequestHandler","getDocumentAsBase64","resultdata","saveAsBlobFile","blobUrl","createBlobUrl","isTriggerEvent","thumbnailView","annotationCollection","signatureCollection","importedAnnotation","updateDocumentEditedProperty","clipboardData","clipObject","formFieldIndex","zIndexTable","initiateTextSelectMode","resetTextSearch","readOnlyCollection","signatureFieldCollection","renderedPageList","signaturecollection","outputcollection","signAnnotationIndex","hasChildNodes","removeChild","lastChild","unloadDocument","characterBound","Array","virtualLoadRequestHandler","pageRequestHandler","importAnnotationRequestHandler","exportAnnotationRequestHandler","importFormFieldsRequestHandler","exportFormFieldsRequestHandler","printRequestHandler","windowSessionStorageClear","fireDocumentUnload","destroy","unWireEvents","parentNode","measureElement","unloadRequestHandler","myHeaders","Headers","append","ajaxHeaders","headerName","moreOptionsButton","querySelectorAll","commentTextBox","j","commentContainer","editableElement","commentSelect","z","getScrollParent","scrollNodeX","scrollNodeY","userAgent","appVersion","scrollTo","node","nodeName","getComputedStyle","overflowY","popupElement","showCloseIcon","closeOnEscape","isModal","header","visible","buttons","buttonModel","content","isPrimary","closeCorruptPopup","beforeClose","appendTo","hideLoadingIndicator","goToPageElement","inputContainer","goToPageInput","maxWidth","pageNoContainer","GoToPageCancelClick","GoToPageApplyClick","closeGoToPagePopUp","goToPageTextBox","format","showSpinButton","inputValue","EnableApplyButton","DisableApplyButton","popupElements","removeAttribute","setAttribute","navigation","goToPage","differenceRatio","passwordInput","passwordCancel","applyPassword","passwordCancelClick","args","isInteraction","createCustomStampElement","createSignatureFileElement","test","vendor","terminate","passive","fitToAuto","applyLeftPosition","updateFreeTextProperties","shapeLabelSettings","fillColor","labelFillColor","fontColor","opacity","labelOpacity","labelContent","isEnableDelete","isCancel","hidenItems","disabledItems","contextMenuOption","isClickWithinSelectionBounds","isTextSelected","selectedText","shapeMenuItems","isCalibrateAnnotationModule","measureAnnotationModule","currentAnnotationMode","enableCommentPanel","OnItemSelected","selectedMenu","CopyItemSelected","TextMarkUpSelected","PropertiesItemSelected","CutItemSelected","pasteItemSelected","DeleteItemSelected","ScaleRatioSelected","CommentItemSelected","showCommentsPanel","createScaleRatioWindow","deleteFormField","deleteAnnotation","pasteSelectedText","cutSelectedText","isSkip","copySelectedText","isSelectionMaintained","enableProperties","isSignature","checkIsRtlText","text","ltrChars","rtlChars","rtlDirCheck","RegExp","isWithin","diCount","negativeCount","positiveCount","getCurrentSelectionBounds","currentBound","getHorizontalValue","getVerticalValue","getHorizontalClientValue","pageBounds","getVerticalClientValue","isText","currentText","selectionRangeArray","srcElement","isReadOnly","inputFields","checkAllowedInteractions","renderSelector","modifyTextCursor","disableTextSelectionMode","enableTextSelectionMode","initiateTextSelection","isSelectionToolDisabled","updateInteractionTools","designerModetarget","obj","isRemoveFocus_1","isNewFreeTextAnnot","onSingleTap","onDoubleTap","onTextBoxDoubleTap","targetAnnotation","nameTable","isFormfields","moreDropDown","dropDown","firstElementChild","getSelectTextMarkupCurrentPage","tapOnMobileDevice","onDoubleTapMagnification","currentStampObj","updateDeleteItems","renderDrawing","renderStamp","onAnnotationMouseDown","currentSignatureAnnot","renderSignature","pageValues","updateTotalPage","topValue","isPortrait","isLandscape","differentPageSize","previousPageHeight","size","Height","Width","pageRotation","limit","renderPageContainer","getPageWidth","all","renderPagesVirtually","lowerLimit","higherLimit","pageValue","lowerPageValue","pageCanvas","initialLoadedPages","childNodes","maintainSelectionOnScroll","indexInArray","_a","initiateRenderPagesVirtually","isCompletePageSizeNotReceived","viritualload","i_1","fireDocumentLoad","linkAnnotationModule","linkAnnotation","linkPage","renderDocumentLink","annotationY","tileRenderPage","canvas_1","pageDiv_1","tileX","tileY","background","updateLeftPosition","imageData","retrieveCurrentZoomFactor","oldCanvases","currentString","matrix","tileX_1","tileY_1","scaleFactor","image_1","Image","src","onload","renderPDFInformations","textSearch","isExtractText","getPDFDocumentTexts","rerenderAnnotations","oldPageDiv","rerenderCountIncrement","currentImageWidth","matrixElements","Elements","Values","currentImageTop","currentImageLeft","onPageRender","_loop_1","l","tileImgId","zoomFactor_1","tileData","this_1","getStoredTileImageDetails","getWindowSessionStorageTile","node_1","nodeType","Node","ELEMENT_NODE","tileX_2","tileY_2","image","renderTileCanvas","marginLeft","marginRight","calculateImageWidth","imageWidth","renderPage","imageSource","canvas_2","pageDiv_2","boxShadow","pushImageObjects","aElement","getElementsByTagName","isAnnotationRendered","index","renderTextContent","isFormFieldPageZoomed","renderFormFields","accessibilityTagsModule","enableAccessibilityTags","renderAccessibilityTags","createRequestForAccessibilityTags","rerenderFormFields","enableHyperlink","renderHyperlinkContent","applySelectionRangeOnScroll","pageAnnotations","shapeAnnotation","measureShapeAnnotation","textMarkupAnnotation","freeTextAnnotation","stampAnnotations","stickyNotesAnnotation","signatureAnnotation","signatureInkAnnotation","checkDocumentCollectionData","drawPageAnnotations","isStampAnnotationModule","stampData","renderStampAnnotations","renderAnnotations","renderStickyNotesAnnotations","renderFreeTextAnnotations","isInkAnnotationModule","inkAnnotationModule","renderExistingInkSignature","isTextSearch","highlightOtherOccurrences","commonStyle","annotationSelectorSettings","selectCommentsAnnotation","renderExistingSignature","isAnnotationSelected","annotationPageIndex","selectAnnotationFromCodeBehind","annotationsCollection","isAddedProgrammatically","annotData","collection","annotationOrder","AnnotType","AnnotationType","renderTextMarkupAnnotationsInPage","texts","rtldoc","documentTextCollection","PageText","pageText","addTextLayer","renderTextContents","resizeTextContents","taggedTextResponse","returnPageListForAccessibilityTags","pageList","minPage","maxPage","orderPageDivElements","renderPageCanvas","createRequestForThumbnails","createRequestForBookmarks","initializeAcccordionContainer","isCommandPanelOpen","createRequestForComments","nextElement","insertBefore","displayMode","createAnnotationLayer","applyElementStyles","canvasElement","oldCanvas","offsetLeft","leftPosition","pageDiff","leftValue","getPageNumberFromClientPoint","clientPoint","pointX","pointY","viewerContainerBounds","verticalScrollPosition","convertClientPointToPagePoint","pagePoint","convertPagePointToClientPoint","convertPagePointToScrollingPoint","scrollingPoint","renderCountIncrement","currentPageIndex","storeData","previous","renderPreviousPagesInScroll","allowPageRendering","downloadDocument","Url","URL","webkitURL","createObjectURL","anchorElement","documentElement","padCharacter","downloadExportFormat","annotationDataFormat","formFieldDataFormat","isForm","isJson","extension","exportAnnotationFileName","fireFormExportSuccess","fireExportSuccess","exportFormFields","createRequestForExportFormfields","importFormFields","createRequestForImportingFormfields","isObject","createFormfieldsJsonData","canExport","fireFormExportStarted","formFieldsPageList","getFormFieldsPageList","isAnnotationsExist","isFieldsDataExist","resultData","getDataOnSuccess","exportFileDownload","fireFormExportFailed","pdfAnnotation","annotationJson","decodeURIComponent","escape","msSaveOrOpenBlob","getLastIndexValue","sliceBy","indexName","slice","lastIndexOf","sourceName","fireFormImportStarted","Object","assign","importClientSideFormFields","fireFormImportFailed","fireFormImportSuccess","removeExistingFormFields","fieldsData","downloadFormDesigner","downloadFormFieldsData","saveImportedAnnotations","textMarkupAnnotationCollection","saveTextMarkupAnnotations","isShapeAnnotationModule","shapeAnnotations","shapeAnnotationModule","saveShapeAnnotations","calibrateAnnotations","saveMeasureShapeAnnotations","stampAnnotationCollection","saveStampAnnotations","isCommentAnnotationModule","stickyAnnotationCollection","saveStickyAnnotations","importList","signatureData","saveSignature","isSignatureEditable","freeTextAnnotationCollection","saveFreeTextAnnotations","inkSignatureData","saveInkSignature","annotationsPageList","getAnnotationsPageList","annotationInfo","flat","entries","annotCollection","a","annotActionCollection","actionCollection","self","propName","fullPageList","concat","formDesignerData","formFieldsCollection","item","properties","designerDataList","FormField","totalPageList","checkFormFieldCollection","annotationID","isFormFieldAnnotation","getItemFromSessionStorage","formFieldsData","radiobuttonItem","Key","fireDownloadStart","digitalSignature","isDocumentEdited","enableFormFieldsValidation","fireValidatedFailed","fileDownload","fireDownloadEnd","updateDocumentAnnotationCollections","getTileCount","defaultWidth","tileCount","tileValue","ceil","tileRenderingSettings","enableTileRendering","pageWidth_1","tilecanvas","viewPortWidth_1","viewPortHeight","noTileX","noTileY","thumbnailImageElement","object","tileSettings","isPageRequestSent","pageRequestSent","zoomFactor_2","k","zoomFactor_3","pageStartIndex","pageEndIndex","textRequestHandler","renderTexts","pageTextRequestOnSuccess","getDocumentText","xCoordinate","yCoordinate","tilecount","tileXCount","tileYCount","digitalSignaturePresent","renderPages","pageRequestOnSuccess","textDetailsId","isTextNeed","canvas_3","pageIndex_1","canvasContext","getContext","createImageData","set","putImageData","imageUrl","toDataURL","textBounds","characterBounds","hyperlinksDetails","getHyperlinks","data_1","hyperlinks","hyperlinkBounds","annotationLocation","storeTextDetails","textDetails","currentPageWidth","blobObj","storeObject","storeImageData","canvas_4","_b","w","h","noTileX_1","noTileY_1","x_1","y_1","pageIndex_2","tileWidth","tileHeight","transformationMatrix","thumbnailOnMessage","printOnMessage","isTileRender","storeWinData","requestForTextExtraction","annotationObject","textRequestOnSuccess","markedBounds","pageCharText","textMarkupContent","textMarkUpContent","storeAnnotations","buffer","Y","X","errorMessage","restrictZoomRequest","storedData","getWindowSessionStorage","getPinchZoomPage","storedTileData","isPinchZoomStorage","pageItems","manageSessionStorage","setCustomAjaxHeaders","request","setRequestHeader","hasOwnProperty","enableZoomOptimization","textObject","sessionSize","round","maxSessionSize","annotationList","formFieldsList","storageLength","contentType","sliceSize","byteCharacters","byteArrays","offset","byteNumbers","byteArray","blob","Blob","getRandomNumber","c","random","isNeedToSet","isScrollBar","setScrollDownValue","offsetHeight","eventType","boolValue","idString","isToolbarHidden","getAnnotationToolStatus","isAnnotationButtonsEnabled","isPopupNoteVisible","isFormDesignerModule","getMousePosition","touchArg","targetParentRect","path","offsetParent","evt","objects","wrapper","sourceWrapper","targetWrapper","actualObject","findToolToActivate","selectorBnds","paddedBounds","conn","vertexPoints","leaderHeight","leaderCount","newPoint1","elementAngle","findAngle","sourcePoint","targetPoint","segment","centerPoint","center","matrix_1","rotatedPoint","ten","touchPadding","parentTransform","pivot","actualSize","rotateThumb","inflate","checkResizeHandles","padding","bound","checkForResizeHandles","forty","resizerBuffer","isStamp","isSticky","isNodeShape","isInk","resizerLocation","checkSignatureFormField","fieldID","isFormFieldSign","firePageMouseover","drawingObject","equals","prevPosition","sourceDrawingElement","getTool","eventTarget","setCursor","disableHyperlinkNavigationUnderObjects","updateDefaultCursor","diagramMouseActionHelper","currentObject","freeTextSettings","allowEditTextOnly","mouseMove","obj_1","updateFormFieldInitialSize","drawHelper","previousActivePage","point","lastElementChild","shapeElement","mouseMoveforce","sourceElement","currentElement","mouseLeave","initialEventArgs","freeTextAnnotModule","cursorType","corner","setResizerCursorType","isCommentIconAdded","isNewAddedAnnot","endPoint","viewerPositions","mousePositions","strokeColor","thicknes","thickness","author","subject","modifiedDate","isFormField","field_1","borderColor","fireFormFieldMouseoverEvent","fireAnnotationMouseover","fireFormFieldMouseLeaveEvent","fireAnnotationMouseLeave","field_2","fromTarget","dataJson","field_3","resizerCursorType","stampSettings","handWrittenSignatureSettings","inkAnnotationSettings","measureType","lineSettings","arrowSettings","rectangleSettings","circleSettings","polygonSettings","distanceSettings","perimeterSettings","areaSettings","radiusSettings","volumeSettings","isAnnotResized","toLowerCase","dragging","which","isMultipleSelect","isGroupAction","onShapesMouseup","isSkipped","preventContextmenu","stampObj","customStampSettings","nodePropertyChange","isStampAddMode","stampName","signatureName","customStampName","customStampImageSource","enableCustomStamp","isAddToMenu","resetAnnotation","signObject","storeSignatureData","fireSignatureAdd","saveImageString","canvasPaddingLeft","canvasPaddingWidth","top_4","enableAutoFit","defautWidth","annotModule","primaryToolbar","deSelectItem","freeTextEditItem","mouseDown","signatureFieldAnnotation","el","target_1","exportAnnotationsAsObject","isAnnotations","updateExportItem","createRequestForExportAnnotations","setStyleToTextDiv","textDiv","fontHeight","zoomvalue","margin","ConvertPointToPixel","number","formFieldsSize","clearFormFieldStorage","clearAnnotationStorage","exportFormFieldsAsObject","importAnnotations","importData","isXfdf","createRequestForImportAnnotations","exportAnnotations","fireExportStart","exportAnnotation","exportAnnotationFileDownload","fireExportFailed","exportObject","getSanitizedString","updateModifiedDateToLocalDate","newData","annotationType","ModifiedDate","convertUTCDateTimeToLocalDateTime","Comments","date","dateTime","globalize","locale","now","now_utc","UTC","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","dateTimeValue","formatDate","dateTimeFormat","newArray","keys","reRenderAnnotations","fireImportSuccess","fireImportStart","importedData","addAnnotationOnImport","fireImportFailed","newArray_1","newData_1","errorDetails","count","combineImportedData","importPageCollections","textMarkupObject","shapeObject","measureShapeObject","stampObject","stickyObject","freeTextObject","signatureObject","inkObject","isAdded","annotObject","checkAnnotationCollections","checkAnnotationCommentsCollections","checkSignatureCollections","annotationOrderCollection","annotationData","annotationName","renderAnnotationComments","updateCollections","updateTextMarkupAnnotationCollections","updateShapeAnnotationCollections","updateMeasureAnnotationCollections","updateStampAnnotationCollections","updateFreeTextAnnotationCollections","updateStickyNotesAnnotationCollections","updateSignatureCollections","updateInkCollections","updateImportedAnnotationsInDocumentCollections","createAnnotationsCollection","updateAnnotationsInDocumentCollections","importedAnnotations","documentAnnotationCollection","pageCollections","documetCollections","findImportedAnnotations","AnnotName","isNewlyAdded","annotationTypes","foundAnnotationType","find","isRefreshRequired","drawing","refreshCanvasDiagramLayer","SignatureName","annotationCollections","selectAnnotationCollections","savePageAnnotations","s","saveImportedTextMarkupAnnotations","saveImportedShapeAnnotations","saveImportedMeasureAnnotations","saveImportedStampAnnotations","saveImportedStickyNotesAnnotations","saveImportedFreeTextAnnotations","saveImportedInkAnnotation","createAnnotationJsonData","signaturCollection","signaturInkCollection","excistingImportAnnotation","newlyImportAnnotation","checkImportedData","measureObject","inkAnnotationObjct","resut","some","existingCollection","newCollection","len","annotationId","getAnnotationComments","Author","review","state","State","stateModel","StateModel","note","Note","annot","updateAnnotationsInSessionStorage","createCommentControlPanel","b","checkAnnotationWidth","points","minWidth","maxHeight","deleteAnnotations","accordionContent","accordionContentContainer","childElementCount","annotationMenuObj","freeTextPageNumbers","stampPageNumber","inkAnnotationindex","annotationCollectionList","addAnnotation","importAnnotation","documentCollections","isAnnotationObject","annotationCount","newAnnotation","ShapeAnnotationType","AnnotationAddMode","annotationAddMode","AnnotationSelectorSettings","AnnotationSettings","PageNumber","Subject","IsCommentLock","isCommentLock","updateComments","CustomData","customData","Opacity","Color","IsMultiSelect","isMultiSelect","TextMarkupAnnotationType","textMarkupAnnotationType","TextMarkupContent","TextMarkupStartIndex","textMarkupStartIndex","TextMarkupEndIndex","textMarkupEndIndex","rect","convertBounds","Bounds","Icon","StrokeColor","Name","MarkupText","dynamicText","Text","TextAlign","textAlign","Thickness","FillColor","FontColor","FontSize","FontFamily","Rotate","Font","font","isBold","isItalic","isStrikeout","isUnderline","icon","isDynamic","RotateAngle","StampAnnotationType","stampAnnotationType","CreationDate","creationDate","apperarance","stampAnnotationPath","Apperarance","IsDynamic","stampFillcolor","PathData","IsPathData","IsSignature","BorderStyle","borderStyle","BorderDashArray","borderDashArray","IsCloudShape","isCloudShape","CloudIntensity","cloudIntensity","RectangleDifference","rectangleDifference","LineHeadStart","lineHeadStart","LineHeadEnd","lineHeadEnd","IsLocked","isLocked","EnableShapeLabel","LabelContent","LabelFillColor","LabelBorderColor","labelBorderColor","LabelBounds","labelBounds","LabelSettings","labelSettings","LeaderLength","leaderLength","LeaderLineExtenstion","leaderLineExtension","convertVertexPoints","VertexPoints","calibrate","Calibrate","unit","conversionFactor","fractionalType","denominator","formatDenominator","distance","area","targetUnitConversion","depth","Indent","indent","Caption","caption","CaptionPosition","captionPosition","LeaderLineExtension","LeaderLineOffset","leaderLineOffset","isRect","Left","Right","Bottom","top_5","Top","ConvertPixelToPoint","IsLock","currentPageContainer","blur","isEdited","getWindowDevicePixelRatio","devicePixelRatio","getZoomRatio","zoom","importJsonForRotatedDocuments","originalRotation","pageDetails","getRotationAngle","calculateVertexPoints","vPoints","point_1","point_2","isSignaturePathData","pathRegex","isSignatureImageData","base64ImageRegex","sanitizedString","padStart","storedImage","storedHyperlink","storedTextDetails","mergedObj"],"sources":["/Users/saleem/Desktop/KClient/Web App/Ver_3.6/User Interface/website_Source files/node_modules/@syncfusion/ej2-pdfviewer/src/pdfviewer/base/pdfviewer-base.js"],"sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { createElement, Browser, isNullOrUndefined, isBlazor, Internationalization } from '@syncfusion/ej2-base';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { TextLayer, ContextMenu, Signature, PdfFormFieldBase, AccessibilityTags } from '../index';\nimport { NavigationPane } from './navigation-pane';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { AjaxHandler } from '../index';\nimport { Point, Rect, identityMatrix, transformPointByMatrix, contains, rotateMatrix } from '@syncfusion/ej2-drawings';\nimport { SelectTool, MoveTool, ResizeTool, ConnectTool, NodeDrawingTool, PolygonDrawingTool, LineTool, RotateTool, StampTool, InkDrawingTool } from '../drawing/tools';\nimport { Selector } from '../drawing/selector';\nimport { ActiveElements, findActiveElement } from '../drawing/action';\nimport { renderAdornerLayer } from '../drawing/dom-util';\nimport { cloneObject } from '../drawing/drawing-util';\nimport { BlazorContextMenu } from './blazor-context-menu';\nimport { createSpinner, showSpinner, hideSpinner } from './spinner';\nimport { BlazorUiAdaptor } from './blazor-ui-adaptor';\n/**\n * The `PdfViewerBase` module is used to handle base methods of PDF viewer.\n *\n * @hidden\n */\nvar PdfViewerBase = /** @class */ (function () {\n    /**\n     * Initialize the constructor of PDFViewerBase\n     *\n     * @param { PdfViewer } viewer - Specified PdfViewer class.\n     */\n    function PdfViewerBase(viewer) {\n        var _this = this;\n        /**\n         * @private\n         */\n        this.hyperlinkAndLinkAnnotation = {};\n        /**\n         * @private\n         */\n        this.pageTextDetails = {};\n        /**\n         * @private\n         */\n        this.pageImageDetails = {};\n        /**\n         * @private\n         */\n        this.pageSize = [];\n        /**\n         * @private\n         */\n        this.pageCount = 0;\n        /**\n         * @private\n         */\n        this.isReRenderRequired = true;\n        /**\n         * @private\n         */\n        this.currentPageNumber = 0;\n        /**\n         * @private\n         */\n        this.activeElements = new ActiveElements();\n        /**\n         * @private\n         */\n        this.mouseDownEvent = null;\n        /**\n         *\n         * @private\n         */\n        this.pngData = [];\n        /**\n         * @private\n         */\n        this.isDocumentLoaded = false;\n        /**\n         * @private\n         */\n        this.renderedPagesList = [];\n        /**\n         * @private\n         */\n        this.pageGap = 8;\n        /**\n         * @private\n         */\n        this.signatureAdded = false;\n        /**\n         * @private\n         */\n        this.isFreeTextSelected = false;\n        this.pageLeft = 5;\n        this.sessionLimit = 1000;\n        this.pageStopValue = 300;\n        /**\n         * @private\n         */\n        this.toolbarHeight = 56;\n        this.pageLimit = 0;\n        this.previousPage = 0;\n        this.isViewerMouseDown = false;\n        this.isViewerMouseWheel = false;\n        this.scrollPosition = 0;\n        this.sessionStorage = [];\n        /**\n         * @private\n         */\n        this.isLoadedFormFieldAdded = false;\n        this.pointerCount = 0;\n        this.pointersForTouch = [];\n        /**\n         * @private\n         */\n        this.isPasswordAvailable = false;\n        /**\n         * @private\n         */\n        this.passwordData = '';\n        /**\n         * @private\n         */\n        this.reRenderedCount = 0;\n        this.mouseX = 0;\n        this.mouseY = 0;\n        /**\n         * @private\n         */\n        this.mouseLeft = 0;\n        /**\n         * @private\n         */\n        this.mouseTop = 0;\n        this.touchClientX = 0;\n        this.touchClientY = 0;\n        this.previousTime = 0;\n        this.currentTime = 0;\n        this.isTouchScrolled = false;\n        this.isLongTouchPropagated = false;\n        // eslint-disable-next-line\n        this.longTouchTimer = null;\n        this.isViewerContainerDoubleClick = false;\n        // eslint-disable-next-line\n        this.dblClickTimer = null;\n        /**\n         * @private\n         */\n        this.pinchZoomStorage = [];\n        /**\n         * @private\n         */\n        this.isTextSelectionDisabled = false;\n        /**\n         * @private\n         */\n        this.isPanMode = false;\n        this.dragX = 0;\n        this.dragY = 0;\n        this.isScrollbarMouseDown = false;\n        this.scrollX = 0;\n        this.scrollY = 0;\n        this.ispageMoved = false;\n        this.isThumb = false;\n        this.isTapHidden = false;\n        // eslint-disable-next-line\n        this.singleTapTimer = null;\n        this.tapCount = 0;\n        this.inputTapCount = 0;\n        /**\n         * @private\n         */\n        this.isInitialLoaded = false;\n        this.annotationPageList = [];\n        this.importPageList = [];\n        /**\n         * @private\n         */\n        this.isImportAction = false;\n        this.isImportedAnnotation = false;\n        /**\n         * @private\n         */\n        this.isAnnotationCollectionRemoved = false;\n        /**\n         * @private\n         */\n        this.tool = null;\n        // eslint-disable-next-line\n        this.action = 'Select';\n        /**\n         * @private\n         */\n        this.eventArgs = null;\n        /**\n         * @private\n         */\n        this.inAction = false;\n        /**\n         * @private\n         */\n        this.isMouseDown = false;\n        /**\n         * @private\n         */\n        this.isStampMouseDown = false;\n        /**\n         * @private\n         */\n        this.stampAdded = false;\n        /**\n         * @private\n         */\n        this.customStampCount = 0;\n        /**\n         * @private\n         */\n        this.isDynamicStamp = false;\n        /**\n         * @private\n         */\n        this.isMixedSizeDocument = false;\n        /**\n         * @private\n         */\n        this.highestWidth = 0;\n        /**\n         * @private\n         */\n        this.highestHeight = 0;\n        /**\n         * @private\n         */\n        this.customStampCollection = [];\n        /**\n         * @private\n         */\n        this.isAlreadyAdded = false;\n        /**\n         * @private\n         */\n        this.isWebkitMobile = false;\n        /**\n         * @private\n         */\n        this.isFreeTextContextMenu = false;\n        /**\n         * @private\n         */\n        this.isSelection = false;\n        /**\n         * @private\n         */\n        this.isAddAnnotation = false;\n        /**\n         * @private\n         */\n        // eslint-disable-next-line\n        this.annotationComments = null;\n        /**\n         * @private\n         */\n        this.isToolbarSignClicked = false;\n        /**\n         * @private\n         */\n        this.signatureCount = 0;\n        /**\n         * @private\n         */\n        this.isSignatureAdded = false;\n        /**\n         * @private\n         */\n        this.isNewSignatureAdded = false;\n        /**\n         * @private\n         */\n        this.isInitialPageMode = false;\n        /**\n         * @private\n         */\n        // eslint-disable-next-line\n        this.documentAnnotationCollections = null;\n        /**\n         * @private\n         */\n        this.annotationRenderredList = [];\n        /**\n         * @private\n         */\n        // eslint-disable-next-line\n        this.annotationStorage = {};\n        /**\n         * @private\n         */\n        // eslint-disable-next-line\n        this.formFieldStorage = {};\n        /**\n         * @private\n         */\n        this.isStorageExceed = false;\n        /**\n         * @private\n         */\n        this.isFormStorageExceed = false;\n        /**\n         * @private\n         */\n        this.isNewStamp = false;\n        /**\n         * @private\n         */\n        // eslint-disable-next-line\n        this.downloadCollections = {};\n        /**\n         * @private\n         */\n        this.isAnnotationAdded = false;\n        /**\n         * @private\n         */\n        // eslint-disable-next-line\n        this.annotationEvent = null;\n        /**\n         * @private\n        */\n        this.isAnnotationDrawn = false;\n        /**\n         * @private\n         */\n        this.isAnnotationSelect = false;\n        /**\n         * @private\n         */\n        this.isAnnotationMouseDown = false;\n        /**\n         * @private\n         */\n        this.isAnnotationMouseMove = false;\n        /**\n         * @private\n         */\n        this.validateForm = false;\n        /**\n         * @private\n         */\n        this.isMinimumZoom = false;\n        /**\n         * @private\n         */\n        this.documentLoaded = false;\n        this.tileRenderCount = 0;\n        this.tileRequestCount = 0;\n        /**\n         * @private\n         */\n        this.isTileImageRendered = false;\n        this.isDataExits = false;\n        this.requestLists = [];\n        this.tilerequestLists = [];\n        this.textrequestLists = [];\n        this.renderThumbnailImages = false;\n        /**\n         * @private\n         */\n        this.pageRenderCount = 2;\n        /**\n         * @private\n         */\n        this.isInkAdded = false;\n        /**\n         * @private\n         */\n        this.inkCount = 0;\n        /**\n         * @private\n         */\n        this.isAddedSignClicked = false;\n        /**\n         * @private\n         */\n        this.imageCount = 0;\n        /**\n         * @private\n         */\n        this.isMousedOver = false;\n        /**\n         * @private\n         */\n        this.isFormFieldSelect = false;\n        /**\n         * @private\n         */\n        this.isFormFieldMouseDown = false;\n        /**\n         * @private\n         */\n        this.isFormFieldMouseMove = false;\n        /**\n         * @private\n         */\n        this.isFormFieldMousedOver = false;\n        /**\n         * @private\n         */\n        this.isPassword = false;\n        /**\n         * @private\n         */\n        // eslint-disable-next-line\n        this.digitalSignaturePages = [];\n        this.isDigitalSignaturePresent = false;\n        this.isDrawnCompletely = false;\n        /**\n         * @private\n         */\n        this.isAddComment = false;\n        /**\n         * @private\n         */\n        this.drawSignatureWithTool = false;\n        /**\n         * @private\n         */\n        // eslint-disable-next-line\n        this.formFieldCollection = [];\n        /**\n         * @private\n         */\n        // eslint-disable-next-line\n        this.nonFillableFields = {};\n        /**\n         * @private\n         */\n        this.isInitialField = false;\n        /**\n         * @private\n         */\n        this.isTouchDesignerMode = false;\n        /**\n         * @private\n         */\n        this.isPrint = false;\n        /**\n         * @private\n         */\n        this.isPDFViewerJson = false;\n        /**\n         * @private\n         */\n        this.isJsonImported = false;\n        /**\n         * @private\n         */\n        this.isJsonExported = false;\n        /**\n         * @private\n         */\n        this.isPageRotated = false;\n        this.downloadFileName = '';\n        /**\n         * @private\n         */\n        // eslint-disable-next-line\n        this.isFocusField = false;\n        /**\n         * @private\n         */\n        // eslint-disable-next-line\n        this.isTouchPad = false;\n        /**\n         * @private\n         */\n        // eslint-disable-next-line\n        this.isMacGestureActive = false;\n        /**\n         * @private\n         */\n        // eslint-disable-next-line\n        this.macGestureStartScale = 0;\n        /**\n         * @private\n         */\n        // eslint-disable-next-line\n        this.zoomInterval = 5;\n        /**\n         * @private\n         */\n        // eslint-disable-next-line\n        this.isTaggedPdf = false;\n        this.accessibilityTagsHandler = null;\n        this.accessibilityTagsCollection = [];\n        this.pageRequestListForAccessibilityTags = [];\n        this.enableAccessibilityMultiPageRequest = true;\n        /**\n        * @private\n        */\n        // eslint-disable-next-line\n        this.clientSideRendering = false;\n        /**\n         * @private\n         */\n        // eslint-disable-next-line\n        this.focusField = [];\n        /**\n         * @private\n         */\n        this.isSkipDocumentPath = false;\n        /**\n         * @returns {void}\n         */\n        this.clearSessionStorage = function () {\n            var documentId = '';\n            var hashId = window.sessionStorage.getItem(_this.documentId + '_hashId');\n            var documentLiveCount = window.sessionStorage.getItem(_this.documentId + '_documentLiveCount');\n            var serviceURL = window.sessionStorage.getItem(_this.documentId + '_serviceURL');\n            if (Browser.isIE || Browser.info.name === 'edge') {\n                documentId = decodeURI(hashId);\n            }\n            else {\n                documentId = hashId;\n            }\n            if (documentId !== null) {\n                // eslint-disable-next-line max-len\n                var jsonObject = { hashId: documentId, documentLiveCount: documentLiveCount, action: 'Unload', elementId: _this.pdfViewer.element.id };\n                var actionName = window.sessionStorage.getItem(_this.documentId + '_unload');\n                ;\n                if (!isNullOrUndefined(serviceURL)) {\n                    // eslint-disable-next-line\n                    var browserSupportsKeepalive = 'keepalive' in new Request('');\n                    if (browserSupportsKeepalive) {\n                        // eslint-disable-next-line\n                        var headerValue = _this.setUnloadRequestHeaders();\n                        var credentialsData = _this.pdfViewer.ajaxRequestSettings.withCredentials ? 'include' : 'omit';\n                        fetch(serviceURL + '/' + actionName, {\n                            method: 'POST',\n                            credentials: credentialsData,\n                            headers: headerValue,\n                            body: JSON.stringify(jsonObject)\n                        });\n                    }\n                }\n                else if (isBlazor()) {\n                    _this.clearCache(actionName, jsonObject, _this);\n                }\n            }\n            window.sessionStorage.removeItem(_this.documentId + '_annotations_textMarkup');\n            window.sessionStorage.removeItem(_this.documentId + '_annotations_shape');\n            window.sessionStorage.removeItem(_this.documentId + '_annotations_shape_measure');\n            window.sessionStorage.removeItem(_this.documentId + '_annotations_stamp');\n            window.sessionStorage.removeItem(_this.documentId + '_annotations_sticky');\n            window.sessionStorage.removeItem(_this.documentId + '_annotations_freetext');\n            window.sessionStorage.removeItem(_this.documentId + '_formfields');\n            window.sessionStorage.removeItem(_this.documentId + '_formDesigner');\n            window.sessionStorage.removeItem(_this.documentId + '_annotations_sign');\n            window.sessionStorage.removeItem(_this.documentId + '_pagedata');\n            window.sessionStorage.removeItem(_this.documentId + '_currentDocument');\n            window.sessionStorage.removeItem(_this.documentId + '_hashId');\n            window.sessionStorage.removeItem(_this.documentId + '_documentLiveCount');\n            window.sessionStorage.removeItem(_this.documentId + '_unload');\n            window.sessionStorage.removeItem(_this.documentId + '_serviceURL');\n        };\n        /**\n         * @private\n         * @param {MouseEvent} event - Mouse event.\n         * @returns {void}\n         */\n        this.onWindowResize = function (event) {\n            var proxy = null;\n            proxy = _this;\n            if (_this.pdfViewer.enableRtl) {\n                // eslint-disable-next-line max-len\n                proxy.viewerContainer.style.right = (proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerContainerLeft() : 0) + 'px';\n                // eslint-disable-next-line max-len\n                proxy.viewerContainer.style.left = (proxy.navigationPane.commentPanelContainer ? proxy.navigationPane.commentPanelContainer.offsetWidth : 0) + 'px';\n            }\n            else {\n                // eslint-disable-next-line max-len\n                proxy.viewerContainer.style.left = (proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerContainerLeft() : 0) + 'px';\n                // eslint-disable-next-line max-len\n                proxy.viewerContainer.style.right = (proxy.navigationPane.commentPanelContainer ? proxy.navigationPane.commentPanelContainer.offsetWidth : 0) + 'px';\n            }\n            // eslint-disable-next-line\n            var viewerElementWidth = (proxy.pdfViewer.element.clientWidth > 0 ? proxy.pdfViewer.element.clientWidth : proxy.pdfViewer.element.style.width);\n            // eslint-disable-next-line\n            var viewerWidth = (viewerElementWidth - (proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerContainerLeft() : 0) - (proxy.navigationPane.commentPanelContainer ? proxy.navigationPane.getViewerContainerRight() : 0));\n            proxy.viewerContainer.style.width = viewerWidth + 'px';\n            if (proxy.pdfViewer.toolbarModule) {\n                // eslint-disable-next-line\n                var toolbarContainer = isBlazor() ? proxy.pdfViewer.element.querySelector('.e-pv-toolbar') : proxy.getElement('_toolbarContainer');\n                var toolbarHeight = 0;\n                var formDesignerToolbarHeight = 0;\n                if (toolbarContainer) {\n                    toolbarHeight = toolbarContainer.getBoundingClientRect().height;\n                }\n                if (proxy.isAnnotationToolbarHidden() || (Browser.isDevice && !_this.pdfViewer.enableDesktopMode)) {\n                    if (toolbarHeight === 0) {\n                        if (_this.navigationPane.isNavigationToolbarVisible) {\n                            // eslint-disable-next-line\n                            var navigationToolbar = proxy.getElement('_navigationToolbar');\n                            toolbarHeight = navigationToolbar.getBoundingClientRect().height;\n                        }\n                    }\n                    if (!proxy.isFormDesignerToolbarHidded()) {\n                        var formDesignerToolbar = proxy.getElement('_formdesigner_toolbar');\n                        formDesignerToolbarHeight = formDesignerToolbar ? formDesignerToolbar.getBoundingClientRect().height : 0;\n                    }\n                    // eslint-disable-next-line max-len\n                    proxy.viewerContainer.style.height = proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height, toolbarHeight + formDesignerToolbarHeight);\n                }\n                else {\n                    // eslint-disable-next-line\n                    var annotationToolbarContainer = isBlazor() ? proxy.pdfViewer.element.querySelector('.e-pv-annotation-toolbar') : proxy.getElement('_annotation_toolbar');\n                    var annotationToolbarHeight = 0;\n                    if (annotationToolbarContainer) {\n                        annotationToolbarHeight = annotationToolbarContainer.getBoundingClientRect().height;\n                    }\n                    // eslint-disable-next-line max-len\n                    proxy.viewerContainer.style.height = proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height, toolbarHeight + annotationToolbarHeight);\n                }\n            }\n            else {\n                proxy.viewerContainer.style.height = proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height, 0);\n            }\n            if (proxy.pdfViewer.bookmarkViewModule && (Browser.isDevice && !_this.pdfViewer.enableDesktopMode)) {\n                var bookmarkContainer = proxy.getElement('_bookmarks_container');\n                if (bookmarkContainer) {\n                    bookmarkContainer.style.height = proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height, 0);\n                }\n            }\n            if (proxy.viewerContainer.style.height === '0px') {\n                if (proxy.pdfViewer.height.toString() === 'auto') {\n                    proxy.pdfViewer.height = 500;\n                    proxy.viewerContainer.style.height = proxy.pdfViewer.height + 'px';\n                }\n                else {\n                    proxy.viewerContainer.style.height = proxy.pdfViewer.element.style.height;\n                }\n            }\n            if (proxy.viewerContainer.style.width === '0px') {\n                if (proxy.pdfViewer.width.toString() === 'auto') {\n                    proxy.pdfViewer.width = 500;\n                    proxy.viewerContainer.style.width = proxy.pdfViewer.width + 'px';\n                }\n                else {\n                    proxy.viewerContainer.style.width = proxy.pdfViewer.element.style.width;\n                }\n            }\n            proxy.pageContainer.style.width = proxy.viewerContainer.clientWidth + 'px';\n            if (proxy.viewerContainer.clientWidth === 0) {\n                proxy.pageContainer.style.width = proxy.pdfViewer.element.style.width;\n            }\n            if (!isBlazor()) {\n                if (proxy.pdfViewer.toolbarModule) {\n                    // eslint-disable-next-line max-len\n                    proxy.pdfViewer.toolbarModule.onToolbarResize((proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerMainContainerWidth() : proxy.pdfViewer.element.clientWidth));\n                }\n            }\n            if (_this.pdfViewer.enableToolbar && _this.pdfViewer.thumbnailViewModule) {\n                proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.currentPageNumber - 1);\n            }\n            if (proxy.pdfViewer.textSearchModule && (!Browser.isDevice || _this.pdfViewer.enableDesktopMode)) {\n                proxy.pdfViewer.textSearchModule.textSearchBoxOnResize();\n            }\n            if (viewerWidth !== 0) {\n                if (!proxy.navigationPane.isBookmarkListOpen) {\n                    proxy.updateZoomValue();\n                }\n            }\n            if (Browser.isDevice && !_this.pdfViewer.enableDesktopMode) {\n                proxy.mobileScrollerContainer.style.left = (viewerWidth - parseFloat(proxy.mobileScrollerContainer.style.width)) + 'px';\n                proxy.mobilePageNoContainer.style.left = (viewerWidth / 2) - (parseFloat(proxy.mobilePageNoContainer.style.width) / 2) + 'px';\n                proxy.mobilePageNoContainer.style.top = (proxy.pdfViewer.element.clientHeight / 2) + 'px';\n                proxy.updateMobileScrollerPosition();\n            }\n            else {\n                proxy.navigationPane.setResizeIconTop();\n                proxy.navigationPane.setCommentPanelResizeIconTop();\n                if (event && event.type === 'resize') {\n                    proxy.signatureModule.updateCanvasSize();\n                }\n            }\n            if (proxy.navigationPane.sideBarToolbar) {\n                proxy.navigationPane.sideBarToolbar.style.height = proxy.viewerContainer.style.height;\n            }\n        };\n        /**\n         * @param {MouseEvent} event - The MouseEvent.\n         * @returns {void}\n         */\n        this.viewerContainerOnMousedown = function (event) {\n            _this.isFreeTextContextMenu = false;\n            var isUpdate = false;\n            _this.isSelection = true;\n            var target = event.target;\n            if (event.button === 0 && !_this.getPopupNoteVisibleStatus() && !_this.isClickedOnScrollBar(event, false)) {\n                _this.isViewerMouseDown = true;\n                // eslint-disable-next-line\n                if (event.detail === 1 && target.className !== 'e-pdfviewer-formFields' && target.className !== 'free-text-input') {\n                    isUpdate = true;\n                    _this.focusViewerContainer(true);\n                }\n                _this.scrollPosition = _this.viewerContainer.scrollTop / _this.getZoomFactor();\n                _this.mouseX = event.clientX;\n                _this.mouseY = event.clientY;\n                _this.mouseLeft = event.clientX;\n                _this.mouseTop = event.clientY;\n                // eslint-disable-next-line\n                var isIE = !!document.documentMode;\n                if (_this.pdfViewer.textSelectionModule && !_this.isClickedOnScrollBar(event, true) && !_this.isTextSelectionDisabled) {\n                    if (!isIE && target.className !== 'e-pdfviewer-formFields' && target.className !== 'e-pdfviewer-ListBox' && target.className !== 'e-pv-formfield-dropdown' && target.className !== 'e-pv-formfield-listbox' && target.className !== 'e-pv-formfield-input' && target.className !== 'e-pv-formfield-textarea') {\n                        event.preventDefault();\n                    }\n                    if (target.className !== 'e-pv-droplet') {\n                        _this.pdfViewer.textSelectionModule.clearTextSelection();\n                    }\n                }\n            }\n            if (_this.isClickedOnScrollBar(event, false)) {\n                _this.isViewerMouseDown = true;\n            }\n            if (_this.isPanMode) {\n                _this.dragX = event.pageX;\n                _this.dragY = event.pageY;\n                // eslint-disable-next-line max-len\n                if (_this.viewerContainer.contains(event.target) && (event.target !== _this.viewerContainer) && (event.target !== _this.pageContainer) && _this.isPanMode) {\n                    _this.viewerContainer.style.cursor = 'grabbing';\n                }\n            }\n            if (_this.isShapeBasedAnnotationsEnabled() && (_this.isAnnotationDrawn || !(target.className === 'e-pv-page-container' || (target.className === 'foreign-object' && isNaN(_this.activeElements.activePageID))))) {\n                _this.diagramMouseDown(event);\n            }\n            if (_this.pdfViewer.annotation && _this.pdfViewer.annotation.stickyNotesAnnotationModule.accordionContainer) {\n                if (!isUpdate) {\n                    _this.pdfViewer.annotationModule.stickyNotesAnnotationModule.isEditableElement = false;\n                    _this.updateCommentPanel();\n                    isUpdate = true;\n                }\n            }\n            if (isBlazor()) {\n                _this.mouseDownHandler(event);\n            }\n        };\n        /**\n         * @param {MouseEvent} event - The MouseEvent.\n         * @returns {void}\n         */\n        this.viewerContainerOnMouseup = function (event) {\n            if (!_this.getPopupNoteVisibleStatus()) {\n                if (_this.isViewerMouseDown) {\n                    if (_this.scrollHoldTimer) {\n                        clearTimeout(_this.scrollHoldTimer);\n                        _this.scrollHoldTimer = null;\n                    }\n                    // eslint-disable-next-line max-len\n                    if ((_this.scrollPosition === 0 && _this.viewerContainer.scrollTop === 0) || ((_this.scrollPosition * _this.getZoomFactor()) !== _this.viewerContainer.scrollTop)) {\n                        _this.pageViewScrollChanged(_this.currentPageNumber);\n                    }\n                }\n                var isSignatureFieldReadOnly = false;\n                if (event.target) {\n                    if (event.target.className == 'e-pv-show-designer-name' && event.target.id.split('_', 1) != '') {\n                        isSignatureFieldReadOnly = document.getElementById(event.target.id.split('_', 1)).disabled;\n                    }\n                    if (event.target.className == 'foreign-object' && event.target.children[0]) {\n                        isSignatureFieldReadOnly = event.target.children[0].disabled;\n                    }\n                }\n                if (isSignatureFieldReadOnly && _this.pdfViewer.annotation) {\n                    _this.pdfViewer.annotation.clearSelection();\n                }\n                if (_this.isShapeBasedAnnotationsEnabled() && !isSignatureFieldReadOnly && (_this.isAnnotationDrawn || _this.action !== \"DrawTool\")) {\n                    _this.diagramMouseUp(event);\n                    if (_this.pdfViewer.annotation) {\n                        _this.pdfViewer.annotation.onAnnotationMouseUp();\n                    }\n                }\n                if (_this.pdfViewer.selectedItems.formFields.length > 0) {\n                    // eslint-disable-next-line max-len\n                    if (!isNullOrUndefined(_this.pdfViewer.toolbar) && !isNullOrUndefined(_this.pdfViewer.toolbar.formDesignerToolbarModule) && !Browser.isDevice) {\n                        _this.pdfViewer.toolbar.formDesignerToolbarModule.showHideDeleteIcon(true);\n                    }\n                }\n                else {\n                    // eslint-disable-next-line max-len\n                    if (!isNullOrUndefined(_this.pdfViewer.toolbar) && !isNullOrUndefined(_this.pdfViewer.toolbar.formDesignerToolbarModule) && !Browser.isDevice) {\n                        _this.pdfViewer.toolbar.formDesignerToolbarModule.showHideDeleteIcon(false);\n                    }\n                }\n                _this.isSelection = false;\n                // eslint-disable-next-line max-len\n                var commentElement = document.getElementById(_this.pdfViewer.element.id + '_commantPanel');\n                if (commentElement && commentElement.style.display === 'block') {\n                    if (_this.pdfViewer.selectedItems) {\n                        if (_this.pdfViewer.selectedItems.annotations.length !== 0) {\n                            // eslint-disable-next-line\n                            var accordionExpand = document.getElementById(_this.pdfViewer.element.id + '_accordionContainer' + _this.pdfViewer.currentPageNumber);\n                            if (accordionExpand) {\n                                accordionExpand.ej2_instances[0].expandItem(true);\n                            }\n                            // eslint-disable-next-line\n                            var commentsDiv = document.getElementById(_this.pdfViewer.selectedItems.annotations[0].annotName);\n                            if (commentsDiv) {\n                                if (!commentsDiv.classList.contains('e-pv-comments-border')) {\n                                    commentsDiv.firstChild.click();\n                                }\n                            }\n                        }\n                    }\n                }\n                if (event.button === 0 && !_this.isClickedOnScrollBar(event, false)) {\n                    // 0 is for left button.\n                    var eventTarget_1 = event.target;\n                    var offsetX = event.clientX;\n                    var offsetY = event.clientY;\n                    var zoomFactor = _this.getZoomFactor();\n                    var pageIndex = _this.currentPageNumber;\n                    if (eventTarget_1) {\n                        // eslint-disable-next-line\n                        var pageString = eventTarget_1.id.split('_text_')[1] || eventTarget_1.id.split('_textLayer_')[1] || eventTarget_1.id.split('_annotationCanvas_')[1] || eventTarget_1.id.split('_pageDiv_')[1] || eventTarget_1.id.split('_freeText_')[1] || eventTarget_1.id.split('_')[1];\n                        // eslint-disable-next-line\n                        pageIndex = parseInt(pageString);\n                        if (isNaN(pageIndex) && _this.pdfViewer.formFieldCollection) {\n                            var formFieldsTargetId = _this.pdfViewer.formFieldCollection.filter(function (targetFormField) { return (targetFormField.id == eventTarget_1.id) || (targetFormField.id == eventTarget_1.id.split('_')[0]); });\n                            if (formFieldsTargetId.length > 0) {\n                                pageIndex = formFieldsTargetId[0].pageIndex;\n                            }\n                        }\n                    }\n                    var pageDiv = _this.getElement('_pageDiv_' + pageIndex);\n                    if (pageDiv) {\n                        var pageCurrentRect = pageDiv.getBoundingClientRect();\n                        offsetX = (event.clientX - pageCurrentRect.left) / zoomFactor;\n                        offsetY = (event.clientY - pageCurrentRect.top) / zoomFactor;\n                    }\n                    // eslint-disable-next-line max-len\n                    if (eventTarget_1 && eventTarget_1.classList && !eventTarget_1.classList.contains('e-pv-hyperlink') && !eventTarget_1.classList.contains('e-pv-page-container')) {\n                        // eslint-disable-next-line\n                        _this.pdfViewer.firePageClick(offsetX, offsetY, pageIndex + 1);\n                        if (_this.pdfViewer.formFieldsModule && !_this.pdfViewer.formDesignerModule) {\n                            _this.signatureModule.removeFocus();\n                        }\n                    }\n                    if (_this.isTextMarkupAnnotationModule() && !_this.isToolbarInkClicked) {\n                        _this.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationMouseUp(event);\n                    }\n                    if (_this.pdfViewer.formDesignerModule && !_this.pdfViewer.annotationModule) {\n                        _this.pdfViewer.formDesignerModule.updateCanvas(pageIndex);\n                    }\n                    // eslint-disable-next-line max-len\n                    if (_this.viewerContainer.contains(event.target) && (event.target !== _this.viewerContainer) && (event.target !== _this.pageContainer) && _this.isPanMode) {\n                        _this.viewerContainer.style.cursor = 'move';\n                        _this.viewerContainer.style.cursor = '-webkit-grab';\n                        _this.viewerContainer.style.cursor = '-moz-grab';\n                        _this.viewerContainer.style.cursor = 'grab';\n                    }\n                }\n                _this.isViewerMouseDown = false;\n            }\n        };\n        /**\n         * @param {any} event - The Wheel event.\n         * @returns {void}\n         */\n        this.detectTouchPad = function (event) {\n            // eslint-disable-next-line max-len\n            _this.isTouchPad = event.wheelDeltaY ? (event.wheelDeltaY === (event.deltaY * -3) ? true : Math.abs(event.deltaY) < 60) : (event.deltaMode === 0);\n        };\n        /**\n         * @param {any} event - The Wheel event.\n         * @returns {void}\n         */\n        this.handleMacGestureStart = function (event) {\n            event.preventDefault();\n            event.stopPropagation();\n            _this.macGestureStartScale = _this.pdfViewer.magnification.zoomFactor;\n        };\n        /**\n         * @param {any} event - The Wheel event.\n         * @returns {void}\n         */\n        this.handleMacGestureChange = function (event) {\n            event.preventDefault();\n            event.stopPropagation();\n            var macX = event.clientX;\n            var macY = event.clientY;\n            var scale = Number((_this.macGestureStartScale * event.scale).toFixed(2));\n            if (!_this.isMacGestureActive) {\n                _this.isMacGestureActive = true;\n                _this.pdfViewer.magnification.initiateMouseZoom(macX, macY, scale * 100);\n                setTimeout(function () {\n                    _this.isMacGestureActive = false;\n                }, 50);\n            }\n        };\n        /**\n         * @param {any} event - The Wheel event.\n         * @returns {void}\n         */\n        this.handleMacGestureEnd = function (event) {\n            event.preventDefault();\n            event.stopPropagation();\n        };\n        /**\n         * @param {WheelEvent} event - The MouseEvent.\n         * @returns {void}\n         */\n        this.viewerContainerOnMouseWheel = function (event) {\n            _this.isViewerMouseWheel = true;\n            if (_this.getRerenderCanvasCreated()) {\n                event.preventDefault();\n            }\n            if (event.ctrlKey) {\n                var zoomDifference = 25;\n                if (_this.pdfViewer.magnificationModule ? _this.pdfViewer.magnification.zoomFactor : _this.pdfViewer.zoomValue < 1) {\n                    zoomDifference = 10;\n                }\n                if (_this.pdfViewer.magnificationModule ? _this.pdfViewer.magnification.zoomFactor : _this.pdfViewer.zoomValue >= 2) {\n                    zoomDifference = 50;\n                }\n                if (_this.isTouchPad && !_this.isMacSafari) {\n                    zoomDifference = zoomDifference / _this.zoomInterval;\n                }\n                // eslint-disable-next-line\n                if (_this.pdfViewer.magnificationModule) {\n                    if (event.wheelDelta > 0) {\n                        _this.pdfViewer.magnification.initiateMouseZoom(event.x, event.y, (_this.pdfViewer.magnification.zoomFactor * 100) + zoomDifference);\n                    }\n                    else {\n                        _this.pdfViewer.magnification.initiateMouseZoom(event.x, event.y, (_this.pdfViewer.magnification.zoomFactor * 100) - zoomDifference);\n                    }\n                }\n                _this.isTouchPad = false;\n            }\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.pageRerenderOnMouseWheel();\n                if (event.ctrlKey) {\n                    event.preventDefault();\n                }\n                _this.pdfViewer.magnificationModule.fitPageScrollMouseWheel(event);\n            }\n            if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                if (_this.isViewerMouseDown) {\n                    if (!event.target.classList.contains('e-pv-text')) {\n                        _this.pdfViewer.textSelectionModule.textSelectionOnMouseWheel(_this.currentPageNumber - 1);\n                    }\n                }\n            }\n        };\n        /**\n         * @param {KeyboardEvent} event - The KeyboardEvent.\n         * @returns {void}\n         */\n        this.onWindowKeyDown = function (event) {\n            var isMac = navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i) ? true : false;\n            var isCommandKey = isMac ? event.metaKey : false;\n            if ((_this.isFreeTextAnnotationModule() && _this.pdfViewer.annotationModule\n                && (_this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus === true\n                    || _this.pdfViewer.annotationModule.inputElementModule.isInFocus === true))) {\n                return;\n            }\n            if (!event.ctrlKey || !isCommandKey) {\n                switch (event.keyCode) {\n                    case 46:\n                        var activeElement = document.activeElement;\n                        if (activeElement.tagName !== 'INPUT' && activeElement.tagName !== 'TEXTAREA' && !activeElement.isContentEditable) {\n                            _this.DeleteKeyPressed(event);\n                        }\n                        break;\n                    case 27:\n                        if (_this.pdfViewer.toolbar) {\n                            _this.pdfViewer.toolbar.addInkAnnotation();\n                            _this.pdfViewer.toolbar.deSelectCommentAnnotation();\n                            _this.pdfViewer.toolbar.updateStampItems();\n                            if (_this.pdfViewer.toolbar.annotationToolbarModule) {\n                                if (isBlazor()) {\n                                    _this.pdfViewer.toolbar.annotationToolbarModule.deselectAllItemsInBlazor();\n                                }\n                                else {\n                                    _this.pdfViewer.toolbar.annotationToolbarModule.deselectAllItems();\n                                }\n                            }\n                            if (_this.pdfViewer.isFormDesignerToolbarVisible && document.getElementById('FormField_helper_html_element')) {\n                                var formFieldElement = document.getElementById('FormField_helper_html_element');\n                                if (formFieldElement) {\n                                    formFieldElement.remove();\n                                }\n                            }\n                            _this.pdfViewer.tool = '';\n                            _this.focusViewerContainer();\n                        }\n                        break;\n                    case 13:\n                        if (_this.pdfViewer.formDesignerModule) {\n                            if ((event.type === 'keydown' && event.keyCode === 13)) {\n                                if (event.target && (event.target.id || event.target.tabIndex) && _this.pdfViewer.formFieldCollections) {\n                                    var fieldId = void 0;\n                                    var currentTarget = event.target;\n                                    if ((event.target.tabIndex && !event.target.id)) {\n                                        currentTarget = event.target.parentElement;\n                                        fieldId = currentTarget.id.split(\"_content_html_element\")[0];\n                                    }\n                                    else {\n                                        currentTarget = event.target;\n                                        fieldId = currentTarget.id.split(\"_\")[0];\n                                    }\n                                    for (var i = 0; i < _this.pdfViewer.formFieldCollections.length; i++) {\n                                        var formfield = _this.pdfViewer.formFieldCollections[parseInt(i.toString(), 10)];\n                                        if (fieldId === formfield.id && (formfield.type === 'SignatureField' || formfield.type === 'InitialField')) {\n                                            _this.pdfViewer.fireFormFieldClickEvent('formFieldClicked', _this.pdfViewer.formFieldCollections[parseInt(i.toString(), 10)]);\n                                            event.preventDefault();\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                        break;\n                    case 32:\n                        if (_this.pdfViewer.formDesignerModule) {\n                            if ((event.type === 'keydown' && event.keyCode === 32)) {\n                                if (event.target && event.target.id && _this.pdfViewer.formFields) {\n                                    for (var i = 0; i < _this.pdfViewer.formFields.length; i++) {\n                                        var formField = _this.pdfViewer.formFields[parseInt(i.toString(), 10)];\n                                        if (event.target.id.split(\"_\")[0] === formField.id && (formField.formFieldAnnotationType === \"Checkbox\")) {\n                                            _this.pdfViewer.formDesignerModule.setCheckBoxState(event);\n                                            event.preventDefault();\n                                            break;\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                        break;\n                    case 9:\n                        if (event.target && (event.target.id || event.target.tabIndex) && _this.pdfViewer.formFieldCollections) {\n                            {\n                                if (event.target.className === 'e-pv-formfield-input' || event.target.id === _this.pdfViewer.element.id + '_viewerContainer') {\n                                    var nextField = void 0;\n                                    var fieldIndex = void 0;\n                                    var currentTarget_1 = event.target;\n                                    var id_1;\n                                    if ((event.target.tabIndex && !event.target.id)) {\n                                        currentTarget_1 = event.target.parentElement;\n                                        id_1 = currentTarget_1.id.split(\"_content_html_element\")[0];\n                                    }\n                                    else {\n                                        currentTarget_1 = event.target;\n                                        id_1 = currentTarget_1.id.split(\"_input\")[0];\n                                    }\n                                    if (_this.pdfViewer.formDesignerModule) {\n                                        if ((event.shiftKey && event.key === \"Tab\")) {\n                                            fieldIndex = _this.pdfViewer.formFieldCollections.findIndex(function (field) { return field.id === id_1; });\n                                            nextField = fieldIndex > 0 ? _this.pdfViewer.formFieldCollections[fieldIndex - 1] : _this.pdfViewer.formFieldCollections[_this.pdfViewer.formFieldCollections.length - 1];\n                                        }\n                                        else {\n                                            fieldIndex = _this.pdfViewer.formFieldCollections.findIndex(function (field) { return field.id === id_1; });\n                                            nextField = fieldIndex + 1 < _this.pdfViewer.formFieldCollections.length ? _this.pdfViewer.formFieldCollections[fieldIndex + 1] : _this.pdfViewer.formFieldCollections[0];\n                                        }\n                                        _this.pdfViewer.focusFormField(nextField);\n                                        event.preventDefault();\n                                    }\n                                    if (!_this.pdfViewer.formDesigner) {\n                                        if (!(currentTarget_1.className === 'e-pdfviewer-formFields')) {\n                                            if ((event.shiftKey && event.key === \"Tab\")) {\n                                                fieldIndex = _this.pdfViewer.formFieldCollections.findIndex(function (field) { return field.id === currentTarget_1.id; });\n                                                nextField = fieldIndex > 0 ? _this.pdfViewer.formFieldCollections[fieldIndex - 1] : _this.pdfViewer.formFieldCollections[_this.pdfViewer.formFieldCollections.length - 1];\n                                            }\n                                            else {\n                                                fieldIndex = _this.pdfViewer.formFieldCollections.findIndex(function (field) { return field.id === currentTarget_1.id; });\n                                                nextField = fieldIndex + 1 < _this.pdfViewer.formFieldCollections.length ? _this.pdfViewer.formFieldCollections[fieldIndex + 1] : _this.pdfViewer.formFieldCollections[0];\n                                            }\n                                            _this.pdfViewer.focusFormField(nextField);\n                                            event.preventDefault();\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                        if (event.target && event.target.id && _this.pdfViewer.formFields) {\n                            for (var i = 0; i < _this.pdfViewer.formFields.length; i++) {\n                                var formField_1 = _this.pdfViewer.formFields[parseInt(i.toString(), 10)];\n                                if (event.target.id === formField_1.id) {\n                                    // eslint-disable-next-line\n                                    var field = {\n                                        value: formField_1.value, fontFamily: formField_1.fontFamily, fontSize: formField_1.fontSize, fontStyle: formField_1.fontStyle,\n                                        // eslint-disable-next-line\n                                        color: formField_1.color, backgroundColor: formField_1.backgroundColor, alignment: formField_1.alignment, isReadonly: formField_1.isReadonly, visibility: formField_1.visibility,\n                                        // eslint-disable-next-line\n                                        maxLength: formField_1.maxLength, isRequired: formField_1.isRequired, isPrint: formField_1.isPrint, rotation: formField_1.rotateAngle, tooltip: formField_1.tooltip,\n                                        // eslint-disable-next-line\n                                        options: formField_1.options, isChecked: formField_1.isChecked, isSelected: formField_1.isSelected\n                                    };\n                                    _this.pdfViewer.fireFocusOutFormField(field, formField_1.pageIndex);\n                                }\n                            }\n                        }\n                        break;\n                }\n            }\n        };\n        /**\n         * @param {KeyboardEvent} event - The KeyboardEvent.\n         * @returns {void}\n         */\n        this.viewerContainerOnKeyDown = function (event) {\n            var isMac = navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i) ? true : false;\n            var isCommandKey = isMac ? event.metaKey : false;\n            if ((_this.isFreeTextAnnotationModule() && _this.pdfViewer.annotationModule\n                && (_this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus === true\n                    || _this.pdfViewer.annotationModule.inputElementModule.isInFocus === true))) {\n                return;\n            }\n            var activeElement = document.activeElement;\n            if ((event.ctrlKey || isCommandKey) && ((activeElement.tagName !== 'INPUT' && activeElement.tagName !== 'TEXTAREA' && !activeElement.isContentEditable))) {\n                // add keycodes if shift key is used.\n                if ((event.shiftKey && !isMac) || (isMac && !event.shiftKey)) {\n                    switch (event.keyCode) {\n                        case 38: // up arrow\n                        case 33: // page up\n                            event.preventDefault();\n                            if (_this.currentPageNumber !== 1) {\n                                _this.updateScrollTop(0);\n                            }\n                            break;\n                        case 40: // down arrow\n                        case 34: // page down\n                            event.preventDefault();\n                            if (_this.currentPageNumber !== _this.pageCount) {\n                                _this.updateScrollTop(_this.pageCount - 1);\n                            }\n                            break;\n                        default:\n                            break;\n                    }\n                }\n                switch (event.keyCode) {\n                    case 79: // o key\n                        if (_this.pdfViewer.toolbarModule && _this.pdfViewer.enableToolbar) {\n                            _this.pdfViewer.toolbarModule.openFileDialogBox(event);\n                        }\n                        break;\n                    case 67: // c key\n                        if (_this.pdfViewer.textSelectionModule && _this.pdfViewer.enableTextSelection && !_this.isTextSelectionDisabled) {\n                            event.preventDefault();\n                            _this.pdfViewer.textSelectionModule.copyText();\n                        }\n                        if (_this.pdfViewer.selectedItems.annotations.length || _this.pdfViewer.selectedItems.formFields.length) {\n                            _this.pdfViewer.copy();\n                            _this.contextMenuModule.previousAction = 'Copy';\n                        }\n                        break;\n                    case 70: // f key\n                        if (_this.pdfViewer.textSearchModule && _this.pdfViewer.enableTextSearch) {\n                            event.preventDefault();\n                            _this.pdfViewer.toolbarModule.textSearchButtonHandler();\n                        }\n                        break;\n                    case 80: // p key\n                        if (_this.pdfViewer.printModule && _this.pdfViewer.enablePrint) {\n                            event.preventDefault();\n                            _this.pdfViewer.print.print();\n                        }\n                        break;\n                    case 90: //z key\n                        if (_this.pdfViewer.annotationModule) {\n                            _this.pdfViewer.annotationModule.undo();\n                        }\n                        break;\n                    case 88: //x key\n                        if (_this.pdfViewer.selectedItems.annotations.length || _this.pdfViewer.selectedItems.formFields.length) {\n                            _this.pdfViewer.cut();\n                            _this.contextMenuModule.previousAction = 'Cut';\n                        }\n                        break;\n                    case 89: //y key\n                        if (_this.pdfViewer.annotationModule) {\n                            _this.pdfViewer.annotationModule.redo();\n                        }\n                        break;\n                    case 86: //v key\n                        // eslint-disable-next-line max-len\n                        if ((_this.pdfViewer.annotation && _this.pdfViewer.annotation.isShapeCopied) || (_this.pdfViewer.formFields && _this.pdfViewer.formDesigner && _this.pdfViewer.formDesigner.isShapeCopied)) {\n                            var isSearchboxDialogOpen = void 0;\n                            var searchBoxId = document.getElementById(_this.pdfViewer.element.id + \"_search_box\");\n                            if (searchBoxId) {\n                                isSearchboxDialogOpen = searchBoxId.style.display !== \"none\";\n                            }\n                            if (!isSearchboxDialogOpen && _this.pdfViewer.formDesigner && !_this.pdfViewer.formDesigner.isPropertyDialogOpen) {\n                                _this.pdfViewer.paste();\n                                _this.contextMenuModule.previousAction = 'Paste';\n                            }\n                        }\n                        break;\n                    default:\n                        break;\n                }\n            }\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.magnifyBehaviorKeyDown(event);\n            }\n        };\n        /**\n         * @param {MouseEvent} event - The MouseEvent.\n         * @returns {void}\n         */\n        this.viewerContainerOnMousemove = function (event) {\n            _this.mouseX = event.clientX;\n            _this.mouseY = event.clientY;\n            // eslint-disable-next-line\n            var isIE = !!document.documentMode;\n            var target = event.target;\n            if (_this.action === 'Drag') {\n                event.preventDefault();\n            }\n            // eslint-disable-next-line max-len\n            if (_this.isViewerMouseDown && !(_this.action === 'Perimeter' || _this.action === 'Polygon' || _this.action === 'Line' || _this.action === 'DrawTool' || _this.action === 'Distance')) {\n                // eslint-disable-next-line max-len\n                if (_this.pdfViewer.textSelectionModule && _this.pdfViewer.enableTextSelection && !_this.isTextSelectionDisabled && !_this.getPopupNoteVisibleStatus()) {\n                    // text selection won't perform if we start the selection from hyperlink content by commenting this line.\n                    // this region block the toc/hyperlink navigation on sometimes.\n                    // if ((event.target as HTMLElement).classList.contains('e-pv-hyperlink') && this.pdfViewer.linkAnnotationModule) {\n                    // this.pdfViewer.linkAnnotationModule.modifyZindexForHyperlink((event.target as HTMLElement), true);\n                    // }\n                    if (!isIE) {\n                        if (event.target.className != 'e-pdfviewer-formFields')\n                            event.preventDefault();\n                        _this.mouseX = event.clientX;\n                        _this.mouseY = event.clientY;\n                        // eslint-disable-next-line\n                        var annotationModule = _this.pdfViewer.annotationModule;\n                        // eslint-disable-next-line max-len\n                        if (annotationModule && annotationModule.textMarkupAnnotationModule && annotationModule.textMarkupAnnotationModule.isDropletClicked && annotationModule.textMarkupAnnotationModule.isEnableTextMarkupResizer(annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode)) {\n                            annotationModule.textMarkupAnnotationModule.textSelect(event.target, _this.mouseX, _this.mouseY);\n                        }\n                        else {\n                            _this.pdfViewer.textSelectionModule.textSelectionOnMouseMove(event.target, _this.mouseX, _this.mouseY);\n                        }\n                    }\n                    else {\n                        var selection = window.getSelection();\n                        if (!selection.type && !selection.isCollapsed && selection.anchorNode !== null) {\n                            _this.pdfViewer.textSelectionModule.isTextSelection = true;\n                        }\n                    }\n                }\n                else if (_this.skipPreventDefault(target)) {\n                    event.preventDefault();\n                }\n            }\n            if (_this.isTextMarkupAnnotationModule() && !_this.getPopupNoteVisibleStatus()) {\n                _this.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationMouseMove(event);\n            }\n            if (_this.isPanMode) {\n                _this.panOnMouseMove(event);\n            }\n            if (_this.isShapeBasedAnnotationsEnabled()) {\n                var canvas = void 0;\n                // eslint-disable-next-line max-len\n                if (event.target && (event.target.id.indexOf('_text') > -1 || (event.target.parentElement.classList.contains('foreign-object')) || event.target.id.indexOf('_annotationCanvas') > -1 || event.target.classList.contains('e-pv-hyperlink')) && _this.pdfViewer.annotation || event.target.classList.contains('e-pdfviewer-formFields')) {\n                    var pageIndex = _this.pdfViewer.annotation.getEventPageNumber(event);\n                    var diagram = document.getElementById(_this.pdfViewer.element.id + '_annotationCanvas_' + pageIndex);\n                    if (diagram) {\n                        var canvas1 = diagram.getBoundingClientRect();\n                        var left = canvas1.x ? canvas1.x : canvas1.left;\n                        var top_1 = canvas1.y ? canvas1.y : canvas1.top;\n                        // eslint-disable-next-line max-len\n                        if (_this.pdfViewer.annotationModule.stampAnnotationModule.currentStampAnnotation && _this.pdfViewer.annotationModule.stampAnnotationModule.currentStampAnnotation.shapeAnnotationType === 'Image') {\n                            canvas = new Rect(left, top_1, canvas1.width - 10, canvas1.height - 10);\n                        }\n                        else {\n                            canvas = new Rect(left + 1, top_1 + 1, canvas1.width - 3, canvas1.height - 3);\n                        }\n                    }\n                }\n                else if (!_this.pdfViewer.annotationModule && _this.pdfViewer.formDesignerModule) {\n                    var pageIndex = _this.pdfViewer.formDesignerModule.getEventPageNumber(event);\n                    var diagram = document.getElementById(_this.pdfViewer.element.id + '_annotationCanvas_' + pageIndex);\n                    if (diagram) {\n                        var canvas1 = diagram.getBoundingClientRect();\n                        var left = canvas1.x ? canvas1.x : canvas1.left;\n                        var top_2 = canvas1.y ? canvas1.y : canvas1.top;\n                        canvas = new Rect(left + 10, top_2 + 10, canvas1.width - 10, canvas1.height - 10);\n                    }\n                }\n                // eslint-disable-next-line max-len\n                var stampModule = _this.pdfViewer.annotationModule ? _this.pdfViewer.annotationModule.stampAnnotationModule : null;\n                if (canvas && canvas.containsPoint({ x: _this.mouseX, y: _this.mouseY }) && !(stampModule && stampModule.isStampAnnotSelected)) {\n                    _this.diagramMouseMove(event);\n                    _this.annotationEvent = event;\n                }\n                else {\n                    _this.diagramMouseLeave(event);\n                    if (_this.isAnnotationDrawn && !_this.pdfViewer.isFormDesignerToolbarVisible) {\n                        _this.diagramMouseUp(event);\n                        _this.isAnnotationAdded = true;\n                    }\n                }\n                if (_this.pdfViewer.enableStampAnnotations) {\n                    if (stampModule && stampModule.isStampAnnotSelected) {\n                        _this.pdfViewer.tool = 'Stamp';\n                        _this.tool = new StampTool(_this.pdfViewer, _this);\n                        _this.isMouseDown = true;\n                        stampModule.isStampAnnotSelected = false;\n                        stampModule.isNewStampAnnot = true;\n                    }\n                }\n                if (_this.isSignatureAdded && _this.pdfViewer.enableHandwrittenSignature) {\n                    _this.pdfViewer.tool = 'Stamp';\n                    _this.tool = new StampTool(_this.pdfViewer, _this);\n                    _this.isMouseDown = true;\n                    _this.isSignatureAdded = false;\n                    _this.isNewSignatureAdded = true;\n                }\n            }\n        };\n        /**\n         * @param {MouseEvent} event - The MouseEvent.\n         * @returns {void}\n         */\n        this.panOnMouseMove = function (event) {\n            var isStampMode = false;\n            // eslint-disable-next-line max-len\n            if (_this.action === 'Ink' || _this.action === \"Line\" || _this.action === 'Perimeter' || _this.action === 'Polygon' || _this.action === 'DrawTool' || _this.action === 'Drag' || _this.action.indexOf('Rotate') !== -1 || _this.action.indexOf('Resize') !== -1) {\n                isStampMode = true;\n            }\n            // eslint-disable-next-line max-len\n            if (_this.viewerContainer.contains(event.target) && (event.target !== _this.viewerContainer) && (event.target !== _this.pageContainer) && !isStampMode) {\n                if (_this.isViewerMouseDown) {\n                    var deltaX = _this.dragX - event.pageX;\n                    var deltaY = _this.dragY - event.pageY;\n                    _this.viewerContainer.scrollTop = _this.viewerContainer.scrollTop + deltaY;\n                    _this.viewerContainer.scrollLeft = _this.viewerContainer.scrollLeft + deltaX;\n                    _this.viewerContainer.style.cursor = 'move';\n                    _this.viewerContainer.style.cursor = '-webkit-grabbing';\n                    _this.viewerContainer.style.cursor = '-moz-grabbing';\n                    _this.viewerContainer.style.cursor = 'grabbing';\n                    _this.dragX = event.pageX;\n                    _this.dragY = event.pageY;\n                }\n                else {\n                    if (!_this.navigationPane.isNavigationPaneResized) {\n                        _this.viewerContainer.style.cursor = 'move';\n                        _this.viewerContainer.style.cursor = '-webkit-grab';\n                        _this.viewerContainer.style.cursor = '-moz-grab';\n                        _this.viewerContainer.style.cursor = 'grab';\n                    }\n                }\n            }\n            else {\n                if (!_this.navigationPane.isNavigationPaneResized) {\n                    _this.viewerContainer.style.cursor = 'auto';\n                }\n            }\n        };\n        /**\n         * @param {MouseEvent} event - The MouseEvent.\n         * @returns {void}\n         */\n        this.viewerContainerOnMouseLeave = function (event) {\n            if (_this.isViewerMouseDown) {\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                    _this.pdfViewer.textSelectionModule.textSelectionOnMouseLeave(event);\n                }\n            }\n            if (_this.pdfViewer.textSelectionModule && _this.pdfViewer.textSelectionModule.isTextSelection) {\n                event.preventDefault();\n            }\n            if (_this.action === 'Ink') {\n                _this.diagramMouseUp(event);\n                _this.isAnnotationAdded = true;\n            }\n        };\n        /**\n         * @param {MouseEvent} event - The MouseEvent.\n         * @returns {void}\n         */\n        this.viewerContainerOnMouseEnter = function (event) {\n            if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                _this.pdfViewer.textSelectionModule.clear();\n            }\n        };\n        /**\n         * @param {MouseEvent} event - The MouseEvent.\n         * @returns {void}\n         */\n        this.viewerContainerOnMouseOver = function (event) {\n            // eslint-disable-next-line\n            var isIE = !!document.documentMode;\n            if (_this.isViewerMouseDown) {\n                if (!isIE) {\n                    event.preventDefault();\n                }\n            }\n        };\n        /**\n         * @param {MouseEvent} event - The MouseEvent.\n         * @returns {void}\n         */\n        this.viewerContainerOnClick = function (event) {\n            if (event.type === 'dblclick') {\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled && !_this.getCurrentTextMarkupAnnotation()) {\n                    if (event.target.classList.contains('e-pv-text')) {\n                        _this.isViewerContainerDoubleClick = true;\n                        if (!_this.getTextMarkupAnnotationMode()) {\n                            var pageNumber = parseFloat(event.target.id.split('_')[2]);\n                            _this.pdfViewer.fireTextSelectionStart(pageNumber + 1);\n                        }\n                        _this.pdfViewer.textSelectionModule.selectAWord(event.target, event.clientX, event.clientY, false);\n                        if (_this.pdfViewer.contextMenuSettings.contextMenuAction === 'MouseUp') {\n                            _this.pdfViewer.textSelectionModule.calculateContextMenuPosition(event.clientY, event.clientX);\n                        }\n                        if (!_this.getTextMarkupAnnotationMode()) {\n                            _this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(true, false);\n                            _this.dblClickTimer = setTimeout(function () {\n                                _this.applySelection();\n                            }, 100);\n                            _this.pdfViewer.textSelectionModule.fireTextSelectEnd();\n                        }\n                        else if (_this.isTextMarkupAnnotationModule() && _this.getTextMarkupAnnotationMode()) {\n                            // eslint-disable-next-line max-len\n                            _this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations(_this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode);\n                        }\n                    }\n                }\n                else if (_this.getCurrentTextMarkupAnnotation()) {\n                    // this.pdfViewer.annotationModule.showAnnotationPopup(event);\n                }\n                if (_this.action && (_this.action === 'Perimeter' || _this.action === 'Polygon') && _this.tool) {\n                    _this.eventArgs.position = _this.currentPosition;\n                    _this.getMouseEventArgs(_this.currentPosition, _this.eventArgs, event, _this.eventArgs.source);\n                    var ctrlKey = _this.isMetaKey(event);\n                    var info = { ctrlKey: event.ctrlKey, shiftKey: event.shiftKey };\n                    _this.eventArgs.info = info;\n                    _this.eventArgs.clickCount = event.detail;\n                    _this.tool.mouseUp(_this.eventArgs, true);\n                }\n                if ((_this.pdfViewer.selectedItems ||\n                    (_this.pdfViewer.annotation && _this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation)) && !_this.pdfViewer.annotationSettings.isLock) {\n                    // eslint-disable-next-line\n                    var currentAnnotation = _this.pdfViewer.selectedItems.annotations[0];\n                    if (_this.pdfViewer.selectedItems.annotations.length !== 0 && !(currentAnnotation.annotationSettings.isLock || currentAnnotation.isLock)) {\n                        // eslint-disable-next-line max-len\n                        if (_this.pdfViewer.annotationModule && !currentAnnotation.formFieldAnnotationType) {\n                            // eslint-disable-next-line max-len\n                            _this.pdfViewer.annotationModule.annotationSelect(currentAnnotation.annotName, currentAnnotation.pageIndex, currentAnnotation, null, true);\n                            if (_this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus === false) {\n                                if (_this.isFreeTextAnnotation(_this.pdfViewer.selectedItems.annotations) === true && !_this.pdfViewer.selectedItems.annotations[0].isLock) {\n                                    var elmtPosition = {};\n                                    elmtPosition.x = _this.pdfViewer.selectedItems.annotations[0].bounds.x;\n                                    elmtPosition.y = _this.pdfViewer.selectedItems.annotations[0].bounds.y;\n                                    // eslint-disable-next-line max-len\n                                    _this.pdfViewer.annotation.freeTextAnnotationModule.addInuptElemet(elmtPosition, _this.pdfViewer.selectedItems.annotations[0]);\n                                }\n                                else if (_this.pdfViewer.selectedItems.annotations[0].enableShapeLabel === true) {\n                                    var elmtPosition = {};\n                                    elmtPosition.x = _this.pdfViewer.selectedItems.annotations[0].bounds.x;\n                                    elmtPosition.y = _this.pdfViewer.selectedItems.annotations[0].bounds.y;\n                                    // eslint-disable-next-line max-len\n                                    _this.pdfViewer.annotation.inputElementModule.editLabel(elmtPosition, _this.pdfViewer.selectedItems.annotations[0]);\n                                }\n                                else {\n                                    // eslint-disable-next-line\n                                    var accordionExpand = document.getElementById(_this.pdfViewer.element.id + '_accordionContainer' + _this.pdfViewer.currentPageNumber);\n                                    if (accordionExpand) {\n                                        accordionExpand.ej2_instances[0].expandItem(true);\n                                    }\n                                    // eslint-disable-next-line\n                                    if (_this.pdfViewer.toolbarModule && _this.pdfViewer.isFormDesignerToolbarVisible && _this.pdfViewer.enableAnnotationToolbar && !_this.pdfViewer.isAnnotationToolbarVisible && !isNullOrUndefined(_this.pdfViewer.toolbarModule.annotationToolbarModule)) {\n                                        _this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(_this.pdfViewer.toolbarModule.annotationItem);\n                                    }\n                                    var commentsDiv = document.getElementById(_this.pdfViewer.selectedItems.annotations[0].annotName);\n                                    if (commentsDiv) {\n                                        if (!commentsDiv.classList.contains('e-pv-comments-border')) {\n                                            commentsDiv.firstChild.click();\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                    else {\n                        // eslint-disable-next-line max-len\n                        var annotation = _this.pdfViewer.annotation;\n                        var annotationModule = _this.pdfViewer.annotationModule;\n                        if (annotation && annotationModule.textMarkupAnnotationModule && annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                            // eslint-disable-next-line\n                            var annotation_1 = _this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;\n                            // eslint-disable-next-line max-len\n                            _this.pdfViewer.annotationModule.annotationSelect(annotation_1.annotName, _this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage, annotation_1, null, true);\n                            // eslint-disable-next-line\n                            var accordionExpand = document.getElementById(_this.pdfViewer.element.id + '_accordionContainer' + _this.currentPageNumber);\n                            if (accordionExpand) {\n                                accordionExpand.ej2_instances[0].expandItem(true);\n                            }\n                            // eslint-disable-next-line\n                            var comments = document.getElementById(annotation_1.annotName);\n                            if (comments) {\n                                comments.firstChild.click();\n                            }\n                        }\n                    }\n                }\n                if (_this.pdfViewer.designerMode && _this.pdfViewer.selectedItems.formFields.length > 0) {\n                    var eventArgs = { name: \"formFieldDoubleClick\", field: _this.pdfViewer.selectedItems.formFields[0], cancel: false };\n                    _this.pdfViewer.fireFormFieldDoubleClickEvent(eventArgs);\n                    if (!eventArgs.cancel) {\n                        _this.pdfViewer.formDesigner.createPropertiesWindow();\n                    }\n                }\n            }\n            else {\n                if (event.detail === 3) {\n                    if (_this.isViewerContainerDoubleClick) {\n                        clearTimeout(_this.dblClickTimer);\n                        _this.isViewerContainerDoubleClick = false;\n                    }\n                    if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled && !_this.getTextMarkupAnnotationMode()) {\n                        _this.pdfViewer.textSelectionModule.selectEntireLine(event);\n                        _this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(true, false);\n                        _this.pdfViewer.textSelectionModule.fireTextSelectEnd();\n                        _this.applySelection();\n                    }\n                }\n            }\n        };\n        /**\n         * @param {DragEvent} event - The DragEvent.\n         * @returns {void}\n         */\n        this.viewerContainerOnDragStart = function (event) {\n            // eslint-disable-next-line\n            var isIE = !!document.documentMode;\n            if (!isIE) {\n                event.preventDefault();\n            }\n        };\n        // eslint-disable-next-line\n        this.viewerContainerOnContextMenuClick = function (event) {\n            _this.isViewerMouseDown = false;\n        };\n        // eslint-disable-next-line\n        this.onWindowMouseUp = function (event) {\n            _this.isFreeTextContextMenu = false;\n            _this.isNewStamp = false;\n            _this.signatureAdded = false;\n            // eslint-disable-next-line\n            var annotationModule = _this.pdfViewer.annotationModule;\n            // eslint-disable-next-line max-len\n            if (annotationModule && annotationModule.textMarkupAnnotationModule && annotationModule.textMarkupAnnotationModule.isEnableTextMarkupResizer(annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode)) {\n                // eslint-disable-next-line\n                var modules = annotationModule.textMarkupAnnotationModule;\n                modules.isLeftDropletClicked = false;\n                modules.isDropletClicked = false;\n                modules.isRightDropletClicked = false;\n                if (!modules.currentTextMarkupAnnotation && window.getSelection().anchorNode === null) {\n                    modules.showHideDropletDiv(true);\n                }\n                else if (!modules.currentTextMarkupAnnotation && modules.currentTextMarkupAddMode === '') {\n                    modules.isTextMarkupAnnotationMode = false;\n                }\n            }\n            if (!_this.getPopupNoteVisibleStatus()) {\n                if (event.button === 0) {\n                    // eslint-disable-next-line max-len\n                    if (_this.isNewFreeTextAnnotation()) {\n                        if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled && !_this.getTextMarkupAnnotationMode()) {\n                            // eslint-disable-next-line max-len\n                            if (event.detail === 1 && !_this.viewerContainer.contains(event.target) && !_this.contextMenuModule.contextMenuElement.contains(event.target)) {\n                                if (window.getSelection().anchorNode !== null) {\n                                    _this.pdfViewer.textSelectionModule.textSelectionOnMouseup(event);\n                                }\n                            }\n                            // eslint-disable-next-line\n                            var target = event.target;\n                            if (_this.viewerContainer.contains(event.target) && target.className !== 'e-pdfviewer-formFields' && target.className !== 'e-pv-formfield-input' && target.className !== 'e-pv-formfield-textarea') {\n                                if (!_this.isClickedOnScrollBar(event, true) && !_this.isScrollbarMouseDown) {\n                                    _this.pdfViewer.textSelectionModule.textSelectionOnMouseup(event);\n                                }\n                                else {\n                                    if (window.getSelection().anchorNode !== null) {\n                                        _this.pdfViewer.textSelectionModule.applySpanForSelection();\n                                    }\n                                }\n                            }\n                        }\n                        else if (_this.getTextMarkupAnnotationMode()) {\n                            // eslint-disable-next-line\n                            var viewerElement = _this.pdfViewer.element;\n                            // eslint-disable-next-line\n                            var targetElement = event.target;\n                            if (viewerElement && targetElement) {\n                                if (viewerElement.id.split('_')[0] === targetElement.id.split('_')[0] && targetElement.id.split('_')[1] !== 'commenttextbox') {\n                                    // eslint-disable-next-line max-len\n                                    _this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations(_this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode);\n                                }\n                            }\n                        }\n                    }\n                }\n                else if (event.button === 2) {\n                    if (_this.viewerContainer.contains(event.target) && _this.skipPreventDefault(event.target)) {\n                        if (_this.checkIsNormalText()) {\n                            window.getSelection().removeAllRanges();\n                        }\n                    }\n                }\n                if (_this.isViewerMouseDown) {\n                    _this.isViewerMouseDown = false;\n                    if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                        _this.pdfViewer.textSelectionModule.clear();\n                        _this.pdfViewer.textSelectionModule.selectionStartPage = null;\n                    }\n                    event.preventDefault();\n                    event.stopPropagation();\n                    return false;\n                }\n                else {\n                    return true;\n                }\n            }\n        };\n        /**\n         * @param {TouchEvent} event - The DragEvent.\n         * @returns {void}\n         */\n        this.onWindowTouchEnd = function (event) {\n            _this.signatureAdded = false;\n            // eslint-disable-next-line max-len\n            if (!_this.pdfViewer.element.contains(event.target) && !_this.contextMenuModule.contextMenuElement.contains(event.target)) {\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                    _this.pdfViewer.textSelectionModule.clearTextSelection();\n                }\n            }\n        };\n        /**\n         * @param {TouchEvent} event - The TouchEvent.\n         * @returns {void}\n         */\n        this.viewerContainerOnTouchStart = function (event) {\n            var touchPoints = event.touches;\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.setTouchPoints(touchPoints[0].clientX, touchPoints[0].clientY);\n            }\n            var target = event.target;\n            // eslint-disable-next-line max-len\n            if (touchPoints.length === 1 && !(target.classList.contains('e-pv-hyperlink')) && _this.skipPreventDefault(target)) {\n                _this.preventTouchEvent(event);\n            }\n            if (event.touches.length === 1 && _this.isTextMarkupAnnotationModule() && !_this.getPopupNoteVisibleStatus()) {\n                if (!_this.isToolbarInkClicked) {\n                    _this.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationTouchEnd(event);\n                }\n            }\n            _this.touchClientX = touchPoints[0].clientX;\n            _this.touchClientY = touchPoints[0].clientY;\n            _this.scrollY = touchPoints[0].clientY;\n            _this.previousTime = new Date().getTime();\n            // eslint-disable-next-line max-len\n            if (touchPoints.length === 1 && !(event.target.classList.contains('e-pv-touch-select-drop') || event.target.classList.contains('e-pv-touch-ellipse'))) {\n                if ((Browser.isDevice && !_this.pdfViewer.enableDesktopMode) && _this.pageCount > 0 && !_this.isThumb && !(event.target.classList.contains('e-pv-hyperlink'))) {\n                    _this.handleTaps(touchPoints, event);\n                }\n                if (!isBlazor() || !Browser.isDevice || _this.pdfViewer.enableDesktopMode) {\n                    _this.handleTextBoxTaps(touchPoints);\n                }\n                var designerMode = _this.isDesignerMode(target);\n                if (designerMode) {\n                    _this.contextMenuModule.close();\n                    // event.preventDefault();\n                    if (!_this.isLongTouchPropagated) {\n                        _this.longTouchTimer = setTimeout(function () {\n                            if (!_this.isMoving) {\n                                _this.isTouchDesignerMode = true;\n                                /* eslint-disable */\n                                _this.contextMenuModule.open(_this.touchClientY, _this.touchClientX, _this.viewerContainer);\n                                /* eslint-enable */\n                            }\n                        }, 1000);\n                    }\n                    _this.isLongTouchPropagated = true;\n                    _this.isMoving = false;\n                }\n                else if ((_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled)) {\n                    _this.pdfViewer.textSelectionModule.clearTextSelection();\n                    _this.contextMenuModule.close();\n                    // event.preventDefault();\n                    if (!_this.isLongTouchPropagated) {\n                        _this.longTouchTimer = setTimeout(function () {\n                            _this.viewerContainerOnLongTouch(event);\n                        }, 1000);\n                    }\n                    _this.isLongTouchPropagated = true;\n                }\n            }\n            // eslint-disable-next-line\n            var toolbarModule = _this.pdfViewer.toolbarModule ? _this.pdfViewer.toolbarModule.annotationToolbarModule : 'null';\n            if (target.classList.contains('e-pv-text') && (!toolbarModule || !toolbarModule.textMarkupToolbarElement || toolbarModule.textMarkupToolbarElement.children.length === 0)) {\n                target.classList.add('e-pv-text-selection-none');\n            }\n            _this.diagramMouseDown(event);\n            // eslint-disable-next-line max-len\n            if (_this.action === 'Perimeter' || _this.action === 'Distance' || _this.action === 'Line' || _this.action === 'Polygon' || _this.action === 'DrawTool' || _this.action === 'Drag' || _this.action.indexOf('Rotate') !== -1 || _this.action.indexOf('Resize') !== -1) {\n                event.preventDefault();\n            }\n        };\n        /**\n         * @param {TouchEvent} event - The TouchEvent.\n         * @returns {void}\n         */\n        this.viewerContainerOnLongTouch = function (event) {\n            _this.touchClientX = event.touches[0].clientX;\n            _this.touchClientY = event.touches[0].clientY;\n            event.preventDefault();\n            if (_this.pdfViewer.textSelectionModule) {\n                var target = event.target;\n                if (target.classList.contains('e-pv-text-selection-none')) {\n                    target.classList.remove('e-pv-text-selection-none');\n                }\n                _this.pdfViewer.textSelectionModule.initiateTouchSelection(event, _this.touchClientX, _this.touchClientY);\n                if (Browser.isDevice && !_this.pdfViewer.enableDesktopMode) {\n                    clearTimeout(_this.singleTapTimer);\n                    _this.tapCount = 0;\n                }\n            }\n        };\n        /**\n         * @param {PointerEvent} event - The PointerEvent.\n         * @returns {void}\n         */\n        this.viewerContainerOnPointerDown = function (event) {\n            if (event.pointerType === 'touch') {\n                _this.pointerCount++;\n                if (_this.pointerCount <= 2) {\n                    event.preventDefault();\n                    _this.pointersForTouch.push(event);\n                    if (_this.pointerCount === 2) {\n                        _this.pointerCount = 0;\n                    }\n                    if (_this.pdfViewer.magnificationModule) {\n                        _this.pdfViewer.magnificationModule.setTouchPoints(event.clientX, event.clientY);\n                    }\n                }\n            }\n        };\n        /**\n         * @param {TouchEvent} event - The TouchEvent.\n         * @returns {void}\n         */\n        this.viewerContainerOnTouchMove = function (event) {\n            if (_this.action === 'Drag') {\n                _this.isMoving = true;\n            }\n            if (Browser.isDevice && !_this.pdfViewer.enableDesktopMode) {\n                clearTimeout(_this.singleTapTimer);\n                _this.singleTapTimer = null;\n                _this.tapCount = 0;\n            }\n            _this.preventTouchEvent(event);\n            if (_this.isToolbarInkClicked) {\n                event.preventDefault();\n            }\n            var touchPoints = event.touches;\n            if (_this.pdfViewer.magnificationModule) {\n                _this.isTouchScrolled = true;\n                if (touchPoints.length > 1 && _this.pageCount > 0) {\n                    if (Browser.isDevice && !_this.pdfViewer.enableDesktopMode) {\n                        _this.isTouchScrolled = false;\n                    }\n                    if (_this.pdfViewer.enablePinchZoom) {\n                        // eslint-disable-next-line max-len\n                        _this.pdfViewer.magnificationModule.initiatePinchMove(touchPoints[0].clientX, touchPoints[0].clientY, touchPoints[1].clientX, touchPoints[1].clientY);\n                    }\n                }\n                else if (touchPoints.length === 1 && _this.getPagesPinchZoomed()) {\n                    if (Browser.isDevice && !_this.pdfViewer.enableDesktopMode) {\n                        _this.isTouchScrolled = false;\n                    }\n                    _this.pdfViewer.magnificationModule.pinchMoveScroll();\n                }\n            }\n            _this.mouseX = touchPoints[0].clientX;\n            _this.mouseY = touchPoints[0].clientY;\n            var canvas;\n            // eslint-disable-next-line max-len\n            if (event.target && (event.target.id.indexOf('_text') > -1 || event.target.id.indexOf('_annotationCanvas') > -1 || event.target.classList.contains('e-pv-hyperlink')) && _this.pdfViewer.annotation) {\n                var pageIndex = _this.pdfViewer.annotation.getEventPageNumber(event);\n                var diagram = document.getElementById(_this.pdfViewer.element.id + '_annotationCanvas_' + pageIndex);\n                if (diagram) {\n                    var canvas1 = diagram.getBoundingClientRect();\n                    var left = canvas1.x ? canvas1.x : canvas1.left;\n                    var top_3 = canvas1.y ? canvas1.y : canvas1.top;\n                    canvas = new Rect(left + 10, top_3 + 10, canvas1.width - 10, canvas1.height - 10);\n                }\n            }\n            if (canvas && canvas.containsPoint({ x: _this.mouseX, y: _this.mouseY }) || _this.action === 'Ink') {\n                _this.diagramMouseMove(event);\n                _this.annotationEvent = event;\n            }\n            else {\n                _this.diagramMouseLeave(event);\n                if (_this.isAnnotationDrawn) {\n                    _this.diagramMouseUp(event);\n                    _this.isAnnotationAdded = true;\n                }\n            }\n            touchPoints = null;\n        };\n        /**\n         * @param {PointerEvent} event - The TouchEvent.\n         * @returns {void}\n         */\n        this.viewerContainerOnPointerMove = function (event) {\n            if (event.pointerType === 'touch' && _this.pageCount > 0) {\n                event.preventDefault();\n                if (_this.pointersForTouch.length === 2) {\n                    for (var i = 0; i < _this.pointersForTouch.length; i++) {\n                        if (event.pointerId === _this.pointersForTouch[parseInt(i.toString(), 10)].pointerId) {\n                            _this.pointersForTouch[parseInt(i.toString(), 10)] = event;\n                            break;\n                        }\n                    }\n                    if (_this.pdfViewer.magnificationModule && _this.pdfViewer.enablePinchZoom) {\n                        // eslint-disable-next-line max-len\n                        _this.pdfViewer.magnificationModule.initiatePinchMove(_this.pointersForTouch[0].clientX, _this.pointersForTouch[0].clientY, _this.pointersForTouch[1].clientX, _this.pointersForTouch[1].clientY);\n                    }\n                }\n            }\n        };\n        /**\n         * @param {TouchEvent} event - The TouchEvent.\n         * @returns {void}\n         */\n        this.viewerContainerOnTouchEnd = function (event) {\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.pinchMoveEnd();\n            }\n            if (event.cancelable && !event.target.classList.contains('e-pv-touch-ellipse') && _this.pdfViewer.textSelectionModule && _this.pdfViewer.textSelectionModule.isTextSelection) {\n                event.preventDefault();\n            }\n            _this.isLongTouchPropagated = false;\n            clearInterval(_this.longTouchTimer);\n            _this.longTouchTimer = null;\n            if ((Browser.isDevice && !_this.isDeviceiOS && !_this.pdfViewer.enableDesktopMode) && _this.isTouchScrolled) {\n                _this.currentTime = new Date().getTime();\n                var duration = _this.currentTime - _this.previousTime;\n                // eslint-disable-next-line\n                var difference = _this.scrollY - event.changedTouches[0].pageY;\n                // eslint-disable-next-line\n                var speed = (difference) / (duration);\n                if (Math.abs(speed) > 1.5) {\n                    // eslint-disable-next-line\n                    var scrollTop = (difference) + ((duration) * speed);\n                    if (scrollTop > 0) {\n                        _this.viewerContainer.scrollTop += scrollTop;\n                        _this.updateMobileScrollerPosition();\n                    }\n                }\n            }\n            _this.diagramMouseUp(event);\n            _this.renderStampAnnotation(event);\n            if (!Browser.isDevice) {\n                _this.focusViewerContainer();\n            }\n        };\n        /**\n         * @param {PointerEvent} event - The PointerEvent.\n         * @returns {void}\n         */\n        this.viewerContainerOnPointerEnd = function (event) {\n            if (event.pointerType === 'touch') {\n                event.preventDefault();\n                if (_this.pdfViewer.magnificationModule) {\n                    _this.pdfViewer.magnificationModule.pinchMoveEnd();\n                }\n                _this.pointersForTouch = [];\n                _this.pointerCount = 0;\n            }\n        };\n        // eslint-disable-next-line\n        this.viewerContainerOnScroll = function (event) {\n            var proxy = null;\n            proxy = _this;\n            var allowServerDataBind = proxy.pdfViewer.allowServerDataBinding;\n            proxy.pdfViewer.enableServerDataBinding(false);\n            var scrollposX = 0;\n            var scrollposY = 0;\n            if (event.touches && (Browser.isDevice && !_this.pdfViewer.enableDesktopMode)) {\n                // eslint-disable-next-line\n                var ratio = (_this.viewerContainer.scrollHeight - _this.viewerContainer.clientHeight) / (_this.viewerContainer.clientHeight - _this.toolbarHeight);\n                if (_this.isThumb) {\n                    _this.ispageMoved = true;\n                    event.preventDefault();\n                    _this.mobilePageNoContainer.style.display = 'block';\n                    scrollposX = event.touches[0].pageX - _this.scrollX;\n                    scrollposY = event.touches[0].pageY - _this.viewerContainer.offsetTop;\n                    _this.viewerContainer.scrollTop = scrollposY * ratio;\n                    // eslint-disable-next-line\n                    var containerValue = event.touches[0].pageY;\n                    // eslint-disable-next-line\n                    var toolbarHeight = _this.pdfViewer.toolbarModule ? 0 : 50;\n                    if (_this.viewerContainer.scrollTop !== 0 && ((containerValue) <= (_this.viewerContainer.clientHeight - toolbarHeight))) {\n                        _this.mobileScrollerContainer.style.top = containerValue + 'px';\n                    }\n                }\n                else if (event.touches[0].target.className !== 'e-pv-touch-ellipse') {\n                    if (!(_this.isWebkitMobile && (Browser.isDevice && !_this.pdfViewer.enableDesktopMode))) {\n                        _this.mobilePageNoContainer.style.display = 'none';\n                        scrollposY = _this.touchClientY - event.touches[0].pageY;\n                        scrollposX = _this.touchClientX - event.touches[0].pageX;\n                        _this.viewerContainer.scrollTop = _this.viewerContainer.scrollTop + (scrollposY);\n                        _this.viewerContainer.scrollLeft = _this.viewerContainer.scrollLeft + (scrollposX);\n                    }\n                    // eslint-disable-next-line\n                    _this.updateMobileScrollerPosition();\n                    _this.touchClientY = event.touches[0].pageY;\n                    _this.touchClientX = event.touches[0].pageX;\n                }\n            }\n            if (_this.scrollHoldTimer) {\n                clearTimeout(_this.scrollHoldTimer);\n            }\n            var pageIndex = _this.currentPageNumber;\n            _this.scrollHoldTimer = null;\n            _this.contextMenuModule.close();\n            var verticalScrollValue = _this.viewerContainer.scrollTop;\n            // eslint-disable-next-line max-len\n            for (var i = 0; i < _this.pageCount; i++) {\n                if (_this.pageSize[parseInt(i.toString(), 10)] != null) {\n                    var pageHeight = _this.getPageHeight(i);\n                    if (pageHeight < 150) {\n                        _this.pageStopValue = 75;\n                    }\n                    else if (pageHeight >= 150 && pageHeight < 300) {\n                        _this.pageStopValue = 125;\n                    }\n                    else if (pageHeight >= 300 && pageHeight < 500) {\n                        _this.pageStopValue = 200;\n                    }\n                    else {\n                        _this.pageStopValue = 300;\n                    }\n                    // eslint-disable-next-line max-len\n                    if ((verticalScrollValue + _this.pageStopValue) <= (_this.getPageTop(i) + pageHeight)) {\n                        _this.currentPageNumber = i + 1;\n                        _this.pdfViewer.currentPageNumber = i + 1;\n                        break;\n                    }\n                }\n            }\n            // eslint-disable-next-line max-len\n            if (_this.pdfViewer.magnificationModule && _this.pdfViewer.magnificationModule.fitType === 'fitToPage' && _this.currentPageNumber > 0) {\n                if (_this.pageSize[_this.currentPageNumber - 1]) {\n                    if (!_this.isPanMode && (!Browser.isDevice && _this.pdfViewer.enableDesktopMode)) {\n                        _this.viewerContainer.scrollTop = _this.pageSize[_this.currentPageNumber - 1].top * _this.getZoomFactor();\n                    }\n                }\n            }\n            _this.renderElementsVirtualScroll(_this.currentPageNumber);\n            // eslint-disable-next-line max-len\n            if (!_this.isViewerMouseDown && !_this.getPinchZoomed() && !_this.getPinchScrolled() && !_this.getPagesPinchZoomed() || _this.isViewerMouseWheel) {\n                _this.pageViewScrollChanged(_this.currentPageNumber);\n                _this.isViewerMouseWheel = false;\n            }\n            else {\n                _this.showPageLoadingIndicator(_this.currentPageNumber - 1, false);\n            }\n            if (_this.pdfViewer.toolbarModule) {\n                if (!isBlazor()) {\n                    _this.pdfViewer.toolbarModule.updateCurrentPage(_this.currentPageNumber);\n                }\n                if (!isBlazor()) {\n                    if (!Browser.isDevice || _this.pdfViewer.enableDesktopMode) {\n                        _this.pdfViewer.toolbarModule.updateNavigationButtons();\n                    }\n                }\n            }\n            if (Browser.isDevice && !_this.pdfViewer.enableDesktopMode) {\n                _this.mobileSpanContainer.innerHTML = _this.currentPageNumber.toString();\n                _this.mobilecurrentPageContainer.innerHTML = _this.currentPageNumber.toString();\n            }\n            if (pageIndex !== _this.currentPageNumber) {\n                if (proxy.pdfViewer.thumbnailViewModule && (!Browser.isDevice || _this.pdfViewer.enableDesktopMode)) {\n                    proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.currentPageNumber - 1);\n                    proxy.pdfViewer.thumbnailViewModule.isThumbnailClicked = false;\n                }\n                _this.pdfViewer.firePageChange(pageIndex);\n            }\n            if (_this.pdfViewer.magnificationModule) {\n                if (!_this.isPanMode && (!Browser.isDevice && _this.pdfViewer.enableDesktopMode)) {\n                    _this.pdfViewer.magnificationModule.updatePagesForFitPage(_this.currentPageNumber - 1);\n                }\n            }\n            var currentPage = _this.getElement('_pageDiv_' + (_this.currentPageNumber - 1));\n            if (currentPage) {\n                currentPage.style.visibility = 'visible';\n            }\n            if (_this.isViewerMouseDown) {\n                if (_this.getRerenderCanvasCreated() && !_this.isPanMode) {\n                    _this.pdfViewer.magnificationModule.clearIntervalTimer();\n                }\n                // eslint-disable-next-line\n                var data = _this.clientSideRendering ? _this.getLinkInformation(_this.currentPageNumber) : _this.getStoredData(_this.currentPageNumber);\n                if (data) {\n                    _this.isDataExits = true;\n                    _this.initiatePageViewScrollChanged();\n                    _this.isDataExits = false;\n                }\n                else {\n                    // eslint-disable-next-line max-len\n                    var timer = _this.pdfViewer.scrollSettings.delayPageRequestTimeOnScroll ? _this.pdfViewer.scrollSettings.delayPageRequestTimeOnScroll : 100;\n                    _this.scrollHoldTimer = setTimeout(function () {\n                        _this.initiatePageViewScrollChanged();\n                    }, timer);\n                }\n            }\n            if (_this.pdfViewer.annotation && _this.navigationPane.commentPanelContainer) {\n                _this.pdfViewer.annotation.stickyNotesAnnotationModule.updateCommentPanelScrollTop(_this.currentPageNumber);\n            }\n            // eslint-disable-next-line max-len\n            if ((Browser.isDevice && !_this.pdfViewer.enableDesktopMode) && event.touches && event.touches[0].target.className !== 'e-pv-touch-ellipse') {\n                setTimeout(function () {\n                    _this.updateMobileScrollerPosition();\n                }, 500);\n            }\n            proxy.pdfViewer.enableServerDataBinding(allowServerDataBind, true);\n        };\n        this.pdfViewer = viewer;\n        this.navigationPane = new NavigationPane(this.pdfViewer, this);\n        this.textLayer = new TextLayer(this.pdfViewer, this);\n        this.accessibilityTags = new AccessibilityTags(this.pdfViewer, this);\n        this.signatureModule = new Signature(this.pdfViewer, this);\n    }\n    /**\n     * @private\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.initializeComponent = function () {\n        var element = document.getElementById(this.pdfViewer.element.id);\n        if (element) {\n            this.blazorUIAdaptor = isBlazor() ? new BlazorUiAdaptor(this.pdfViewer, this) : null;\n            if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n                this.pdfViewer.element.classList.add('e-pv-mobile-view');\n            }\n            var controlWidth = '100%';\n            var toolbarDiv = void 0;\n            this.viewerMainContainer = isBlazor() ? element.querySelector('.e-pv-viewer-main-container') : createElement('div', { id: this.pdfViewer.element.id + '_viewerMainContainer', className: 'e-pv-viewer-main-container' });\n            this.viewerContainer = isBlazor() ? element.querySelector('.e-pv-viewer-container') : createElement('div', { id: this.pdfViewer.element.id + '_viewerContainer', className: 'e-pv-viewer-container' });\n            if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n                this.createMobilePageNumberContainer();\n            }\n            // eslint-disable-next-line\n            this.viewerContainer.tabIndex = -1;\n            if (this.pdfViewer.enableRtl) {\n                this.viewerContainer.style.direction = 'rtl';\n            }\n            element.style.touchAction = 'pan-x pan-y';\n            this.setMaximumHeight(element);\n            this.mainContainer = isBlazor() ? element.querySelector('.e-pv-main-container') : createElement('div', { id: this.pdfViewer.element.id + '_mainContainer', className: 'e-pv-main-container' });\n            this.mainContainer.appendChild(this.viewerMainContainer);\n            element.appendChild(this.mainContainer);\n            this.applyViewerHeight(this.mainContainer);\n            if (this.pdfViewer.toolbarModule) {\n                this.navigationPane.initializeNavigationPane();\n                toolbarDiv = this.pdfViewer.toolbarModule.intializeToolbar(controlWidth);\n            }\n            else {\n                if (isBlazor()) {\n                    this.navigationPane.initializeNavigationPane();\n                    toolbarDiv = this.pdfViewer.element.querySelector('.e-pv-toolbar');\n                    if (!this.pdfViewer.enableToolbar) {\n                        this.toolbarHeight = 0;\n                        toolbarDiv.style.display = 'none';\n                    }\n                    if (!this.pdfViewer.enableNavigationToolbar && ((Browser.isDevice && this.pdfViewer.enableDesktopMode) || (!Browser.isDevice))) {\n                        this.navigationPane.sideBarToolbar.style.display = 'none';\n                        this.navigationPane.sideBarToolbarSplitter.style.display = 'none';\n                        if (this.navigationPane.isBookmarkOpen || this.navigationPane.isThumbnailOpen) {\n                            this.navigationPane.updateViewerContainerOnClose();\n                        }\n                    }\n                }\n            }\n            if (toolbarDiv) {\n                this.viewerContainer.style.height = this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height, 56);\n            }\n            else {\n                this.viewerContainer.style.height = this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height, 0);\n            }\n            var viewerWidth = this.pdfViewer.element.clientWidth;\n            if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n                viewerWidth = viewerWidth - (this.navigationPane.sideBarToolbar ? this.navigationPane.getViewerContainerLeft() : 0) -\n                    (this.navigationPane.commentPanelContainer ? this.navigationPane.getViewerContainerRight() : 0);\n            }\n            this.viewerContainer.style.width = viewerWidth + 'px';\n            this.viewerMainContainer.appendChild(this.viewerContainer);\n            if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n                this.mobileScrollerContainer.style.left = (viewerWidth - parseFloat(this.mobileScrollerContainer.style.width)) + 'px';\n                this.mobilePageNoContainer.style.left = (viewerWidth / 2) - (parseFloat(this.mobilePageNoContainer.style.width) / 2) + 'px';\n                this.mobilePageNoContainer.style.top = (this.pdfViewer.element.clientHeight / 2) + 'px';\n                this.mobilePageNoContainer.style.display = 'none';\n                this.mobilePageNoContainer.appendChild(this.mobilecurrentPageContainer);\n                this.mobilePageNoContainer.appendChild(this.mobilenumberContainer);\n                this.mobilePageNoContainer.appendChild(this.mobiletotalPageContainer);\n                this.viewerContainer.appendChild(this.mobilePageNoContainer);\n                this.viewerMainContainer.appendChild(this.mobileScrollerContainer);\n                this.mobileScrollerContainer.appendChild(this.mobileSpanContainer);\n            }\n            this.pageContainer = createElement('div', { id: this.pdfViewer.element.id + '_pageViewContainer', className: 'e-pv-page-container', attrs: { 'role': 'document' } });\n            if (this.pdfViewer.enableRtl) {\n                this.pageContainer.style.direction = 'ltr';\n            }\n            this.viewerContainer.appendChild(this.pageContainer);\n            this.pageContainer.style.width = this.viewerContainer.clientWidth + 'px';\n            if (toolbarDiv && this.pdfViewer.thumbnailViewModule && (!Browser.isDevice || this.pdfViewer.enableDesktopMode)) {\n                this.pdfViewer.thumbnailViewModule.createThumbnailContainer();\n            }\n            this.createPrintPopup();\n            if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n                this.createGoToPagePopup();\n            }\n            var waitingPopup = createElement('div', { id: this.pdfViewer.element.id + '_loadingIndicator' });\n            this.viewerContainer.appendChild(waitingPopup);\n            createSpinner({ target: waitingPopup, cssClass: 'e-spin-center' });\n            this.setLoaderProperties(waitingPopup);\n            if (isBlazor()) {\n                this.contextMenuModule = new BlazorContextMenu(this.pdfViewer, this);\n                // eslint-disable-next-line\n                var spinnerElement = document.getElementsByClassName(this.pdfViewer.element.id + '_spinner');\n                if (spinnerElement && spinnerElement[0] && (!spinnerElement[0].classList.contains('e-spin-hide'))) {\n                    spinnerElement[0].classList.remove('e-spin-show');\n                    spinnerElement[0].classList.add('e-spin-hide');\n                }\n            }\n            else {\n                this.contextMenuModule = new ContextMenu(this.pdfViewer, this);\n            }\n            this.contextMenuModule.createContextMenu();\n            this.createFileInputElement();\n            this.wireEvents();\n            if (this.pdfViewer.textSearchModule && (!Browser.isDevice || this.pdfViewer.enableDesktopMode)) {\n                this.pdfViewer.textSearchModule.createTextSearchBox();\n            }\n            if (this.pdfViewer.documentPath) {\n                if (isBlazor()) {\n                    this.pdfViewer._dotnetInstance.invokeMethodAsync('LoadDocumentFromClient', this.pdfViewer.documentPath);\n                }\n                else {\n                    this.pdfViewer.load(this.pdfViewer.documentPath, null);\n                }\n            }\n            if (this.pdfViewer.annotationModule) {\n                this.pdfViewer.annotationModule.initializeCollection();\n            }\n        }\n        if (Browser.isDevice && this.pdfViewer.enableDesktopMode && this.pdfViewer.toolbarModule) {\n            this.pdfViewer.interactionMode = 'Pan';\n        }\n    };\n    PdfViewerBase.prototype.createMobilePageNumberContainer = function () {\n        this.mobilePageNoContainer = createElement('div', { id: this.pdfViewer.element.id + '_mobilepagenoContainer', className: 'e-pv-mobilepagenoscroll-container' });\n        this.mobilecurrentPageContainer = createElement('span', { id: this.pdfViewer.element.id + '_mobilecurrentpageContainer', className: 'e-pv-mobilecurrentpage-container' });\n        this.mobilenumberContainer = createElement('span', { id: this.pdfViewer.element.id + '_mobiledashedlineContainer', className: 'e-pv-mobiledashedline-container' });\n        this.mobiletotalPageContainer = createElement('span', { id: this.pdfViewer.element.id + '_mobiletotalpageContainer', className: 'e-pv-mobiletotalpage-container' });\n        this.mobileScrollerContainer = createElement('div', { id: this.pdfViewer.element.id + '_mobilescrollContainer', className: 'e-pv-mobilescroll-container' });\n        this.mobileSpanContainer = createElement('span', { id: this.pdfViewer.element.id + '_mobilespanContainer', className: 'e-pv-mobilespanscroll-container' });\n        this.mobileSpanContainer.innerHTML = '1';\n        this.mobilecurrentPageContainer.innerHTML = '1';\n        this.mobilenumberContainer.innerHTML = '&#x2015;&#x2015;&#x2015;&#x2015;&#x2015;';\n        this.mobileScrollerContainer.style.cssFloat = 'right';\n        this.mobileScrollerContainer.style.width = '40px';\n        this.mobileScrollerContainer.style.height = '32px';\n        this.mobileScrollerContainer.style.zIndex = '100';\n        this.mobilePageNoContainer.style.width = '120px';\n        this.mobilePageNoContainer.style.height = '100px';\n        this.mobilePageNoContainer.style.zIndex = '100';\n        this.mobilePageNoContainer.style.position = 'fixed';\n        this.mobileScrollerContainer.addEventListener('touchstart', this.mobileScrollContainerDown.bind(this));\n        this.mobileScrollerContainer.addEventListener('touchend', this.mobileScrollContainerEnd.bind(this));\n        this.mobileScrollerContainer.style.display = 'none';\n    };\n    /**\n     * @private\n     * @param  {string} documentData - file name or base64 string.\n     * @param {string} password - password of the PDF document.\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.initiatePageRender = function (documentData, password) {\n        if (this.clientSideRendering) {\n            this.pdfViewer.unload();\n        }\n        this.loadedData = documentData;\n        this.documentId = this.createGUID();\n        if (this.viewerContainer) {\n            this.viewerContainer.scrollTop = 0;\n        }\n        this.showLoadingIndicator(true);\n        this.hashId = ' ';\n        this.isFileName = false;\n        this.saveDocumentInfo();\n        if (this.pdfViewer.interactionMode === 'Pan') {\n            this.initiatePanning();\n        }\n        documentData = this.checkDocumentData(documentData);\n        var isbase64 = this.loadedData.includes('pdf;base64,');\n        if (isbase64 && this.clientSideRendering) {\n            this.pdfViewer.fileByteArray = this.convertBase64(documentData);\n        }\n        this.setFileName();\n        if (this.pdfViewer.downloadFileName) {\n            this.downloadFileName = this.pdfViewer.downloadFileName;\n        }\n        else {\n            this.downloadFileName = this.pdfViewer.fileName;\n        }\n        var jsonObject = this.constructJsonObject(documentData, password, isbase64);\n        this.createAjaxRequest(jsonObject, documentData, password);\n    };\n    /**\n    * @private\n    */\n    PdfViewerBase.prototype.initiateLoadDocument = function (documentId, isFileName, fileName) {\n        if (documentId) {\n            this.documentId = documentId;\n        }\n        if (this.viewerContainer) {\n            this.viewerContainer.scrollTop = 0;\n        }\n        this.showLoadingIndicator(true);\n        this.hashId = ' ';\n        this.isFileName = isFileName;\n        this.saveDocumentInfo();\n        if (this.pdfViewer.interactionMode === 'Pan') {\n            this.initiatePanning();\n        }\n        this.setFileName();\n        if (this.pdfViewer.fileName === null) {\n            if (isFileName && fileName) {\n                this.pdfViewer.fileName = fileName;\n                this.jsonDocumentId = this.pdfViewer.fileName;\n            }\n            else {\n                this.pdfViewer.fileName = 'undefined.pdf';\n                this.jsonDocumentId = null;\n            }\n        }\n        if (this.pdfViewer.downloadFileName) {\n            this.downloadFileName = this.pdfViewer.downloadFileName;\n        }\n        else {\n            this.downloadFileName = this.pdfViewer.fileName;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.convertBase64 = function (base64) {\n        return new Uint8Array(atob(base64).split('').map(function (char) { return char.charCodeAt(0); }));\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.loadSuccess = function (documentDetails, password) {\n        // eslint-disable-next-line\n        var data = documentDetails;\n        if (data) {\n            if (typeof data !== 'object') {\n                try {\n                    data = JSON.parse(data);\n                }\n                catch (error) {\n                    this.onControlError(500, data, this.pdfViewer.serverActionSettings.load);\n                    data = null;\n                }\n            }\n            if (data) {\n                while (typeof data !== 'object') {\n                    data = JSON.parse(data);\n                    // eslint-disable-next-line\n                    if (typeof parseInt(data) === 'number' && !isNaN(parseInt(data))) {\n                        // eslint-disable-next-line\n                        data = parseInt(data);\n                        break;\n                    }\n                }\n                if (data.StatusText && (data.StatusText === 'File Does not Exist')) {\n                    this.showLoadingIndicator(false);\n                }\n                // eslint-disable-next-line\n                if (data.uniqueId === this.documentId || (typeof parseInt(data) === 'number' && !isNaN(parseInt(data)))) {\n                    this.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.load, data);\n                    this.requestSuccess(data, null, password);\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.mobileScrollContainerDown = function (event) {\n        this.ispageMoved = false;\n        this.isThumb = true;\n        if (this.isTextMarkupAnnotationModule()) {\n            // eslint-disable-next-line max-len\n            if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage != null && (Browser.isDevice && !this.pdfViewer.enableDesktopMode)) {\n                var pageNumber = this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage;\n                this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage = null;\n                this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearAnnotationSelection(pageNumber);\n                this.pdfViewer.toolbar.showToolbar(true);\n            }\n        }\n        this.mobileScrollerContainer.addEventListener('touchmove', this.viewerContainerOnScroll.bind(this), true);\n    };\n    /**\n     * @private\n     * @param {MouseEvent} e - default mouse event.\n     * @returns {PointModel} - retuns the bounds.\n     */\n    PdfViewerBase.prototype.relativePosition = function (e) {\n        // eslint-disable-next-line\n        var currentRect = this.viewerContainer.getBoundingClientRect();\n        var left = e.clientX - currentRect.left;\n        var top = e.clientY - currentRect.top;\n        return { x: left, y: top };\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.setMaximumHeight = function (element) {\n        // eslint-disable-next-line\n        var currentRect = element.getBoundingClientRect();\n        if ((!Browser.isDevice || this.pdfViewer.enableDesktopMode) || (currentRect && currentRect.height === 0)) {\n            element.style.minHeight = '500px';\n        }\n        this.updateWidth();\n        this.updateHeight();\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.applyViewerHeight = function (element) {\n        // eslint-disable-next-line\n        var currentRect = element.getBoundingClientRect();\n        if ((Browser.isDevice && !this.pdfViewer.enableDesktopMode) && currentRect && currentRect.height === 0) {\n            element.style.minHeight = '500px';\n        }\n    };\n    /**\n     * @private\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.updateWidth = function () {\n        if (this.pdfViewer.width.toString() !== 'auto') {\n            // eslint-disable-next-line\n            this.pdfViewer.element.style.width = this.pdfViewer.width;\n        }\n    };\n    /**\n     * @private\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.updateHeight = function () {\n        if (this.pdfViewer.height.toString() !== 'auto') {\n            // eslint-disable-next-line\n            this.pdfViewer.element.style.height = this.pdfViewer.height;\n        }\n    };\n    /**\n     * @private\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.updateViewerContainer = function () {\n        var sideBarContentContainer = this.getElement('_sideBarContentContainer');\n        if (sideBarContentContainer && sideBarContentContainer.style.display === 'none') {\n            this.navigationPane.updateViewerContainerOnClose();\n        }\n        else if (sideBarContentContainer && sideBarContentContainer.style.display === 'block') {\n            this.navigationPane.updateViewerContainerOnExpand();\n        }\n        else {\n            this.updateViewerContainerSize();\n        }\n        // eslint-disable-next-line\n        var toolbarModule = this.pdfViewer.toolbarModule;\n        if (toolbarModule) {\n            if (isBlazor()) {\n                if (this.pdfViewer.enableToolbar || this.pdfViewer.enableAnnotationToolbar) {\n                    this.pdfViewer._dotnetInstance.invokeMethodAsync('RefreshToolbarItems');\n                }\n            }\n            else {\n                if (this.pdfViewer.enableToolbar) {\n                    toolbarModule.toolbar.refreshOverflow();\n                }\n                if (this.pdfViewer.enableAnnotationToolbar && toolbarModule.annotationToolbarModule) {\n                    toolbarModule.annotationToolbarModule.toolbar.refreshOverflow();\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.updateViewerContainerSize = function () {\n        this.viewerContainer.style.width = this.pdfViewer.element.clientWidth + 'px';\n        this.pageContainer.style.width = this.viewerContainer.offsetWidth + 'px';\n        this.updateZoomValue();\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.mobileScrollContainerEnd = function (event) {\n        if (!this.ispageMoved) {\n            this.goToPagePopup.show();\n        }\n        this.isThumb = false;\n        this.ispageMoved = false;\n        this.mobileScrollerContainer.removeEventListener('touchmove', this.viewerContainerOnScroll.bind(this), true);\n        this.mobilePageNoContainer.style.display = 'none';\n    };\n    /**\n     * @private\n     * @param {any} data - data.\n     * @returns {boolean}\n     */\n    PdfViewerBase.prototype.checkRedirection = function (data) {\n        var redirect = false;\n        if (data && typeof (data) === 'object' && (data.redirectUrl || data.redirectUri || data.redirectUrl === \"\" || data.redirectUri === \"\")) {\n            if (data.redirectUrl === \"\" || data.redirectUri === \"\") {\n                redirect = true;\n            }\n            else {\n                data.redirectUrl ? window.location.href = data.redirectUrl : window.location.href = data.redirectUri;\n            }\n        }\n        else if (data && typeof (data) === 'string' && (data.includes('redirectUrl') || data.includes('redirectUri'))) {\n            if (JSON.parse(data).redirectUrl === \"\" || JSON.parse(data).redirectUri === \"\") {\n                redirect = true;\n            }\n            else {\n                data.includes('redirectUrl') ? window.location.href = JSON.parse(data).redirectUrl : window.location.href = JSON.parse(data).redirectUri;\n            }\n        }\n        return redirect;\n    };\n    PdfViewerBase.prototype.getPdfBase64 = function (input) {\n        if (input.startsWith('http://') || input.startsWith('https://')) {\n            return fetch(input)\n                .then(function (response) {\n                if (response.ok) {\n                    return response.arrayBuffer();\n                }\n                else {\n                    console.error('Error fetching PDF:', response.statusText);\n                    throw new Error(response.statusText);\n                }\n            })\n                .then(function (pdfData) {\n                var binary = new Uint8Array(pdfData).reduce(function (str, byte) { return str + String.fromCharCode(byte); }, '');\n                var base64String = btoa(binary);\n                return base64String;\n            })\n                .catch(function (error) {\n                console.error('Error fetching PDF:', error.message);\n                throw error;\n            });\n        }\n        else {\n            return Promise.resolve(input);\n        }\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.createAjaxRequest = function (jsonObject, documentData, password) {\n        var _this = this;\n        var proxy = null;\n        proxy = this;\n        if (this.pdfViewer.serverActionSettings) {\n            this.loadRequestHandler = new AjaxHandler(this.pdfViewer);\n            this.loadRequestHandler.url = this.pdfViewer.serviceUrl + '/' + this.pdfViewer.serverActionSettings.load;\n            this.loadRequestHandler.responseType = 'json';\n            this.loadRequestHandler.mode = true;\n            // eslint-disable-next-line\n            jsonObject['action'] = 'Load';\n            // eslint-disable-next-line\n            jsonObject['elementId'] = this.pdfViewer.element.id;\n            if (this.clientSideRendering) {\n                this.getPdfBase64(documentData).then(function (pdfBase64) {\n                    var data = _this.pdfViewer.pdfRendererModule.load(pdfBase64, _this.documentId, password, jsonObject);\n                    if (data) {\n                        if (typeof data !== 'object') {\n                            try {\n                                data = JSON.parse(data);\n                            }\n                            catch (error) {\n                                proxy.onControlError(500, data, _this.pdfViewer.serverActionSettings.load);\n                                data = null;\n                            }\n                        }\n                        if (data) {\n                            while (typeof data !== 'object') {\n                                data = JSON.parse(data);\n                                // eslint-disable-next-line\n                                if (typeof parseInt(data) === 'number' && !isNaN(parseInt(data))) {\n                                    // eslint-disable-next-line\n                                    data = parseInt(data);\n                                    break;\n                                }\n                            }\n                            // eslint-disable-next-line\n                            if (data.uniqueId === proxy.documentId || (typeof parseInt(data) === 'number' && !isNaN(parseInt(data)))) {\n                                proxy.updateFormFieldName(data);\n                                proxy.pdfViewer.fireAjaxRequestSuccess(_this.pdfViewer.serverActionSettings.load, data);\n                                if (!isNullOrUndefined(data['isTaggedPdf']) && data['isTaggedPdf']) {\n                                    proxy.isTaggedPdf = true;\n                                }\n                                proxy.requestSuccess(data, documentData, password);\n                            }\n                        }\n                    }\n                    else {\n                        proxy.showLoadingIndicator(false);\n                        proxy.openImportExportNotificationPopup(proxy.pdfViewer.localeObj.getConstant('Import PDF Failed'));\n                    }\n                });\n            }\n            else {\n                this.loadRequestHandler.send(jsonObject);\n                // eslint-disable-next-line\n                this.loadRequestHandler.onSuccess = function (result) {\n                    // eslint-disable-next-line\n                    var data = result.data;\n                    var redirect = proxy.checkRedirection(data);\n                    if (redirect) {\n                        proxy.showLoadingIndicator(false);\n                    }\n                    else {\n                        if (data) {\n                            if (typeof data !== 'object') {\n                                try {\n                                    data = JSON.parse(data);\n                                }\n                                catch (error) {\n                                    proxy.onControlError(500, data, this.pdfViewer.serverActionSettings.load);\n                                    data = null;\n                                }\n                            }\n                            if (data) {\n                                while (typeof data !== 'object') {\n                                    data = JSON.parse(data);\n                                    // eslint-disable-next-line\n                                    if (typeof parseInt(data) === 'number' && !isNaN(parseInt(data))) {\n                                        // eslint-disable-next-line\n                                        data = parseInt(data);\n                                        break;\n                                    }\n                                }\n                                // eslint-disable-next-line\n                                if (data.uniqueId === proxy.documentId || (typeof parseInt(data) === 'number' && !isNaN(parseInt(data)))) {\n                                    proxy.updateFormFieldName(data);\n                                    proxy.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.load, data);\n                                    if (!isNullOrUndefined(data['isTaggedPdf']) && data['isTaggedPdf']) {\n                                        proxy.isTaggedPdf = true;\n                                    }\n                                    proxy.requestSuccess(data, documentData, password);\n                                }\n                            }\n                        }\n                        else {\n                            proxy.showLoadingIndicator(false);\n                            proxy.openImportExportNotificationPopup(proxy.pdfViewer.localeObj.getConstant('Import PDF Failed'));\n                        }\n                    }\n                };\n                // eslint-disable-next-line\n                this.loadRequestHandler.onFailure = function (result) {\n                    var statusString = result.status.toString().split('')[0];\n                    if (statusString === '4') {\n                        proxy.openNotificationPopup('Client error');\n                    }\n                    else {\n                        proxy.openNotificationPopup();\n                    }\n                    proxy.showLoadingIndicator(false);\n                    proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.load);\n                };\n                // eslint-disable-next-line\n                this.loadRequestHandler.onError = function (result) {\n                    proxy.openNotificationPopup();\n                    proxy.showLoadingIndicator(false);\n                    // eslint-disable-next-line\n                    proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.load);\n                };\n            }\n        }\n    };\n    // EJ2-60380 - As of now, in form designer the element name is taken fromfield.ActualFieldName (with hypen) but for\n    // Form fields it is taken from field.FieldName (without hypen).\n    // For this reason when user taken the form feilds on button click, name of the form feilds are different with and without form designer module\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.updateFormFieldName = function (data) {\n        if (data && data.PdfRenderedFormFields && data.PdfRenderedFormFields.length > 0) {\n            var field = void 0;\n            for (var i = 0; i < data.PdfRenderedFormFields.length; i++) {\n                field = data.PdfRenderedFormFields[parseInt(i.toString(), 10)];\n                if (field) {\n                    if (field.ActualFieldName) {\n                        field.FieldName = field.ActualFieldName;\n                    }\n                    if (isNullOrUndefined(field.Value)) {\n                        field.Value = \"\";\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     * @param {string} errorString - The message to be displayed.\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.openNotificationPopup = function (errorString) {\n        var _this = this;\n        if (this.pdfViewer.showNotificationDialog) {\n            if (errorString === 'Client error') {\n                if (isBlazor()) {\n                    var promise = this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText', 'PdfViewer_Clienterror');\n                    promise.then(function (value) {\n                        _this.textLayer.createNotificationPopup(value);\n                    });\n                }\n                else {\n                    this.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant('Client error'));\n                }\n            }\n            else {\n                if (isBlazor()) {\n                    var promise = this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText', 'PdfViewer_Servererror');\n                    promise.then(function (value) {\n                        _this.textLayer.createNotificationPopup(value);\n                    });\n                }\n                else {\n                    this.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant('Server error'));\n                }\n            }\n            if (this.getElement('_notify')) {\n                this.getElement('_notify').classList.add('e-pv-notification-large-content');\n            }\n        }\n    };\n    /**\n     * @private\n     * @param {string} errorString - The message to be shown.\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.showNotificationPopup = function (errorString) {\n        if (!this.pdfViewer.showNotificationDialog && errorString !== '') {\n            this.textLayer.createNotificationPopup(errorString);\n            if (this.getElement('_notify')) {\n                this.getElement('_notify').classList.add('e-pv-notification-large-content');\n            }\n        }\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.requestSuccess = function (data, documentData, password) {\n        if (this.clientSideRendering) {\n            if (data.isDigitalSignaturePresent && !isNullOrUndefined(data.digitialSignatureFile) && data.digitialSignatureFile != \"\") {\n                this.pdfViewer.fileByteArray = this.convertBase64(data.digitialSignatureFile);\n            }\n            else if (data.fileByteArray) {\n                this.pdfViewer.fileByteArray = this.convertBase64(data.fileByteArray);\n            }\n            else if (!this.pdfViewer.fileByteArray && !isNullOrUndefined(this.pdfViewer.toolbarModule) && this.pdfViewer.toolbarModule.uploadedFile) {\n                this.pdfViewer.fileByteArray = this.convertBase64(this.pdfViewer.toolbarModule.uploadedFile.replace(/^data:+[a-zA-Z]+\\/[a-zA-Z]+;base64,/g, ''));\n            }\n            else if (!this.pdfViewer.fileByteArray && data.documentData) {\n                this.pdfViewer.fileByteArray = this.convertBase64(data.documentData);\n            }\n        }\n        if (data && data.pageCount !== undefined) {\n            if (isBlazor() && this.isPassword) {\n                this.isPassword = false;\n                this.isPasswordAvailable = false;\n                this.pdfViewer._dotnetInstance.invokeMethodAsync('ClosePasswordDialog');\n            }\n            if (password && password != '') {\n                this.passwordData = password;\n            }\n            this.pdfViewer.allowServerDataBinding = false;\n            this.pageCount = data.pageCount;\n            this.pdfViewer.pageCount = data.pageCount;\n            this.hashId = data.hashId;\n            this.documentLiveCount = data.documentLiveCount;\n            this.isAnnotationCollectionRemoved = false;\n            this.saveDocumentHashData();\n            this.saveFormfieldsData(data);\n            this.pdfViewer.allowServerDataBinding = true;\n            if (this.clientSideRendering) {\n                this.isDigitalSignaturePresent = data.isDigitalSignaturePresent;\n            }\n            else {\n                this.digitalSignaturePages = data.digitalSignaturePages;\n            }\n            this.pageRender(data);\n            // eslint-disable-next-line\n            var pageData = { pageCount: data.pageCount, pageSizes: data.pageSizes };\n            window.sessionStorage.setItem(this.documentId + '_pagedata', JSON.stringify(pageData));\n            if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n                this.mobileScrollerContainer.style.display = '';\n                // eslint-disable-next-line\n                var toolbarHeight = this.pdfViewer.toolbarModule ? this.toolbarHeight : 0;\n                this.mobileScrollerContainer.style.top = (toolbarHeight) + 'px';\n            }\n            this.restrictionList = data.RestrictionSummary;\n            this.RestrictionEnabled(this.restrictionList, false);\n        }\n        else {\n            this.pageCount = 0;\n            this.currentPageNumber = 0;\n            if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n                this.mobileScrollerContainer.style.display = 'none';\n            }\n            if (data === 4) {\n                if (!isBlazor()) {\n                    // 4 is error code for encrypted document.\n                    this.renderPasswordPopup(documentData, password);\n                }\n            }\n            else if (data === 3) {\n                if (!isBlazor()) {\n                    // 3 is error code for corrupted document.\n                    this.renderCorruptPopup();\n                }\n            }\n            if (this.pdfViewer.toolbarModule) {\n                this.pdfViewer.toolbarModule.updateToolbarItems();\n            }\n        }\n        // eslint-disable-next-line\n        var annotationModule = this.pdfViewer.annotationModule;\n        // eslint-disable-next-line max-len\n        if (annotationModule && annotationModule.textMarkupAnnotationModule && annotationModule.textMarkupAnnotationModule.isEnableTextMarkupResizer(annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode)) {\n            annotationModule.textMarkupAnnotationModule.createAnnotationSelectElement();\n        }\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.RestrictionEnabled = function (restrictionSummary, isEnable) {\n        if (restrictionSummary) {\n            for (var i = 0; i < restrictionSummary.length; i++) {\n                this.EnableRestriction(restrictionSummary[parseInt(i.toString(), 10)], isEnable);\n                if (!isBlazor()) {\n                    if (this.pdfViewer.toolbarModule) {\n                        this.pdfViewer.toolbarModule.DisableToolbarItems(restrictionSummary[parseInt(i.toString(), 10)], isEnable);\n                    }\n                }\n                else {\n                    if (this.pdfViewer.toolbarModule) {\n                        this.pdfViewer._dotnetInstance.invokeMethodAsync('RestrictToolbarItems', restrictionSummary, isEnable);\n                    }\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.EnableRestriction = function (restrictionSummary, isEnable) {\n        switch (restrictionSummary) {\n            case 'Print':\n                this.pdfViewer.enablePrint = isEnable;\n                break;\n            case 'CopyContent':\n                this.pdfViewer.enableTextSelection = isEnable;\n                break;\n            case 'FillFields':\n                this.pdfViewer.enableFormFields = isEnable;\n                this.enableFormFieldButton(isEnable);\n                break;\n            case 'EditAnnotations':\n                this.pdfViewer.enableAnnotation = isEnable;\n                break;\n        }\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.pageRender = function (data) {\n        this.document = null;\n        this.passwordDialogReset();\n        if (this.passwordPopup) {\n            this.passwordPopup.hide();\n        }\n        var pageIndex = 0;\n        this.initPageDiv(data);\n        this.currentPageNumber = pageIndex + 1;\n        this.pdfViewer.currentPageNumber = pageIndex + 1;\n        this.previousZoomValue = this.pdfViewer.zoomValue;\n        var isZoomMode = false;\n        if (this.pdfViewer.magnificationModule) {\n            this.pdfViewer.magnificationModule.isAutoZoom = true;\n            if (this.pdfViewer.zoomValue && this.pdfViewer.zoomValue > 0) {\n                if (this.pdfViewer.zoomValue !== 100) {\n                    isZoomMode = true;\n                }\n                this.isInitialPageMode = true;\n                this.pdfViewer.magnification.zoomTo(this.pdfViewer.zoomValue);\n            }\n            if (this.pdfViewer.zoomMode === 'FitToWidth') {\n                this.isInitialPageMode = true;\n                isZoomMode = true;\n                this.pdfViewer.magnificationModule.fitToWidth();\n            }\n            else if (this.pdfViewer.zoomMode === 'FitToPage') {\n                this.isInitialPageMode = true;\n                isZoomMode = true;\n                this.pdfViewer.magnificationModule.fitToPage();\n            }\n            this.documentLoaded = true;\n            this.pdfViewer.magnificationModule.isInitialLoading = true;\n            this.onWindowResize();\n            this.documentLoaded = false;\n            this.pdfViewer.magnificationModule.isInitialLoading = false;\n        }\n        this.isDocumentLoaded = true;\n        // eslint-disable-next-line\n        var viewPortWidth = 816;\n        // eslint-disable-next-line radix\n        viewPortWidth = parseInt(viewPortWidth);\n        var pageWidth = this.pageSize[parseInt(pageIndex.toString(), 10)].width;\n        if (this.clientSideRendering) {\n            var proxy_1 = this;\n            var fileByteArray = this.pdfViewer.fileByteArray;\n            this.pdfViewerRunner.postMessage({ uploadedFile: fileByteArray, message: 'LoadPageCollection', password: this.passwordData, pageIndex: pageIndex, isZoomMode: isZoomMode });\n            this.pdfViewerRunner.onmessage = function (event) {\n                if (event.data.message === 'PageLoaded') {\n                    proxy_1.initialPagesRendered(event.data.pageIndex, event.data.isZoomMode);\n                }\n            };\n        }\n        else {\n            this.initialPagesRendered(pageIndex, isZoomMode);\n        }\n        this.showLoadingIndicator(false);\n        if (!isBlazor()) {\n            if (this.pdfViewer.toolbarModule) {\n                this.pdfViewer.toolbarModule.uploadedDocumentName = null;\n                this.pdfViewer.toolbarModule.updateCurrentPage(this.currentPageNumber);\n                this.pdfViewer.toolbarModule.updateToolbarItems();\n                if (this.pdfViewer.toolbar && this.pdfViewer.toolbar.annotationToolbarModule) {\n                    this.pdfViewer.toolbar.annotationToolbarModule.enableAnnotationAddTools(true);\n                }\n            }\n        }\n        if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n            this.mobileSpanContainer.innerHTML = this.currentPageNumber.toString();\n            this.mobilecurrentPageContainer.innerHTML = this.currentPageNumber.toString();\n        }\n    };\n    PdfViewerBase.prototype.initialPagesRendered = function (pageIndex, isZoomMode) {\n        if (this.renderedPagesList.indexOf(pageIndex) === -1 && !isZoomMode) {\n            this.createRequestForRender(pageIndex);\n            var pageNumber = pageIndex + 1;\n            var renderLimit = this.pdfViewer.initialRenderPages <= this.pageCount ? (this.pdfViewer.initialRenderPages > this.pageRenderCount) ? this.pdfViewer.initialRenderPages : 2 : this.pageCount;\n            for (var i = 1; i < renderLimit; i++) {\n                this.createRequestForRender(i);\n                pageNumber = pageNumber + 1;\n            }\n            if (this.pageSize[parseInt(pageNumber.toString(), 10)]) {\n                var pageTop = this.getPageTop(pageNumber);\n                var viewerHeight = this.viewerContainer.clientHeight;\n                while (viewerHeight > pageTop) {\n                    if (this.pageSize[parseInt(pageNumber.toString(), 10)]) {\n                        this.renderPageElement(pageNumber);\n                        this.createRequestForRender(pageNumber);\n                        pageTop = this.getPageTop(pageNumber);\n                        pageNumber = pageNumber + 1;\n                    }\n                    else {\n                        break;\n                    }\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.renderPasswordPopup = function (documentData, password) {\n        var _this = this;\n        if (!isBlazor()) {\n            if (!this.isPasswordAvailable) {\n                if (this.isFileName) {\n                    this.document = documentData;\n                }\n                else {\n                    this.document = 'data:application/pdf;base64,' + documentData;\n                }\n                this.isPasswordAvailable = true;\n                this.createPasswordPopup();\n                this.pdfViewer.fireDocumentLoadFailed(true, null);\n                this.passwordPopup.show();\n            }\n            else {\n                this.pdfViewer.fireDocumentLoadFailed(true, password);\n                this.promptElement.classList.add('e-pv-password-error');\n                this.promptElement.textContent = this.pdfViewer.localeObj.getConstant('Invalid Password');\n                this.promptElement.focus();\n                if (this.isFileName) {\n                    this.document = documentData;\n                }\n                else {\n                    this.document = 'data:application/pdf;base64,' + documentData;\n                }\n                this.passwordPopup.show();\n            }\n        }\n        else {\n            // eslint-disable-next-line\n            var promptElement_1 = document.getElementById(this.pdfViewer.element.id + '_prompt');\n            var promise = this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText', 'PdfViewer_EnterPassword');\n            promise.then(function (value) {\n                promptElement_1.textContent = value;\n            });\n            // eslint-disable-next-line\n            var passwordInput_1 = document.querySelector('#' + this.pdfViewer.element.id + '_password_input');\n            passwordInput_1.addEventListener('keyup', function () {\n                if (passwordInput_1.value === '') {\n                    _this.passwordDialogReset();\n                }\n            });\n            passwordInput_1.addEventListener('focus', function () {\n                passwordInput_1.parentElement.classList.add('e-input-focus');\n            });\n            passwordInput_1.addEventListener('blur', function () {\n                passwordInput_1.parentElement.classList.remove('e-input-focus');\n            });\n            if (!this.isPasswordAvailable) {\n                if (this.isFileName) {\n                    this.document = documentData;\n                }\n                else {\n                    this.document = 'data:application/pdf;base64,' + documentData;\n                }\n                this.isPasswordAvailable = true;\n                this.pdfViewer.fireDocumentLoadFailed(true, null);\n            }\n            else {\n                this.pdfViewer.fireDocumentLoadFailed(true, password);\n                promptElement_1.classList.add('e-pv-password-error');\n                var promise_1 = this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText', 'PdfViewer_InvalidPassword');\n                promise_1.then(function (value) {\n                    promptElement_1.textContent = value;\n                });\n                promptElement_1.focus();\n                if (this.isFileName) {\n                    this.document = documentData;\n                }\n                else {\n                    this.document = 'data:application/pdf;base64,' + documentData;\n                }\n            }\n            this.pdfViewer._dotnetInstance.invokeMethodAsync('OpenPasswordDialog');\n        }\n    };\n    PdfViewerBase.prototype.renderCorruptPopup = function () {\n        this.pdfViewer.fireDocumentLoadFailed(false, null);\n        this.documentId = null;\n        if (this.pdfViewer.showNotificationDialog) {\n            if (!isBlazor()) {\n                this.createCorruptedPopup();\n                this.corruptPopup.show();\n            }\n            else {\n                this.pdfViewer._dotnetInstance.invokeMethodAsync('OpenCorruptedDialog');\n            }\n        }\n    };\n    PdfViewerBase.prototype.constructJsonObject = function (documentData, password, isBase64String) {\n        var jsonObject;\n        if (password) {\n            this.isPasswordAvailable = true;\n            this.passwordData = password;\n            // eslint-disable-next-line max-len\n            jsonObject = { document: documentData, password: password, isClientsideLoading: isBase64String, zoomFactor: \"1\", isFileName: this.isFileName.toString(), uniqueId: this.documentId, showDigitalSignatureAppearance: this.pdfViewer.showDigitalSignatureAppearance };\n        }\n        else {\n            this.isPasswordAvailable = false;\n            this.passwordData = '';\n            jsonObject = { document: documentData, zoomFactor: \"1\", isClientsideLoading: isBase64String, isFileName: this.isFileName.toString(), uniqueId: this.documentId, hideEmptyDigitalSignatureFields: this.pdfViewer.hideEmptyDigitalSignatureFields, showDigitalSignatureAppearance: this.pdfViewer.showDigitalSignatureAppearance };\n        }\n        return jsonObject;\n    };\n    PdfViewerBase.prototype.checkDocumentData = function (documentData) {\n        var base64String = documentData.split('base64,')[1];\n        if (base64String === undefined) {\n            this.isFileName = true;\n            this.jsonDocumentId = documentData;\n            if (this.pdfViewer.fileName === null) {\n                // eslint-disable-next-line max-len\n                var documentStringArray = (documentData.indexOf('\\\\') !== -1) ? documentData.split('\\\\') : documentData.split('/');\n                this.pdfViewer.fileName = documentStringArray[documentStringArray.length - 1];\n                this.jsonDocumentId = this.pdfViewer.fileName;\n                base64String = documentData;\n            }\n        }\n        else {\n            this.jsonDocumentId = null;\n        }\n        return base64String;\n    };\n    PdfViewerBase.prototype.setFileName = function () {\n        if (this.pdfViewer.fileName === null) {\n            if (this.pdfViewer.toolbarModule && this.pdfViewer.toolbarModule.uploadedDocumentName) {\n                this.pdfViewer.fileName = this.pdfViewer.toolbarModule.uploadedDocumentName;\n                this.jsonDocumentId = this.pdfViewer.fileName;\n            }\n            else {\n                this.pdfViewer.fileName = 'undefined.pdf';\n                this.jsonDocumentId = null;\n            }\n        }\n    };\n    PdfViewerBase.prototype.saveDocumentInfo = function () {\n        window.sessionStorage.setItem(this.documentId + '_currentDocument', this.documentId);\n        window.sessionStorage.setItem(this.documentId + '_serviceURL', this.pdfViewer.serviceUrl);\n        if (this.pdfViewer.serverActionSettings) {\n            window.sessionStorage.setItem(this.documentId + '_unload', this.pdfViewer.serverActionSettings.unload);\n        }\n    };\n    PdfViewerBase.prototype.saveDocumentHashData = function () {\n        var hashId = '';\n        if (Browser.isIE || Browser.info.name === 'edge') {\n            hashId = encodeURI(this.hashId);\n        }\n        else {\n            hashId = this.hashId;\n        }\n        window.sessionStorage.setItem(this.documentId + '_hashId', hashId);\n        if (this.documentLiveCount) {\n            window.sessionStorage.setItem(this.documentId + '_documentLiveCount', this.documentLiveCount.toString());\n        }\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.saveFormfieldsData = function (data) {\n        this.pdfViewer.isFormFieldDocument = false;\n        this.enableFormFieldButton(false);\n        if (data && data.PdfRenderedFormFields && data.PdfRenderedFormFields.length > 0) {\n            if (this.formfieldvalue) {\n                if (this.pdfViewer.formFieldsModule) {\n                    this.setItemInSessionStorage(this.formfieldvalue, '_formfields');\n                }\n                this.formfieldvalue = null;\n            }\n            else if (this.pdfViewer.formFieldsModule) {\n                for (var i = 0; i < data.PdfRenderedFormFields.length; i++) {\n                    if (data.PdfRenderedFormFields[parseInt(i.toString(), 10)].FieldName == '') {\n                        data.PdfRenderedFormFields.splice(i, 1);\n                    }\n                }\n                this.setItemInSessionStorage(data.PdfRenderedFormFields, '_formfields');\n            }\n            if (this.pdfViewer.enableFormFields && this.pdfViewer.formFieldsModule) {\n                this.pdfViewer.formFieldsModule.formFieldCollections();\n            }\n            if (this.pdfViewer.formFieldCollections.length > 0) {\n                this.pdfViewer.isFormFieldDocument = true;\n                this.enableFormFieldButton(true);\n            }\n        }\n    };\n    /**\n     * @param {boolean} isEnable - Enable or disable the toolbar itema.\n     * @returns {void}\n     * @private\n     */\n    PdfViewerBase.prototype.enableFormFieldButton = function (isEnable) {\n        if (isEnable) {\n            this.pdfViewer.isFormFieldDocument = true;\n        }\n        if (this.pdfViewer.toolbarModule && this.pdfViewer.toolbarModule.submitItem) {\n            this.pdfViewer.toolbarModule.toolbar.enableItems(this.pdfViewer.toolbarModule.submitItem.parentElement, isEnable);\n        }\n    };\n    PdfViewerBase.prototype.updateWaitingPopup = function (pageNumber) {\n        if (this.pageSize[parseInt(pageNumber.toString(), 10)].top != null) {\n            // eslint-disable-next-line max-len\n            var pageCurrentRect = this.getElement('_pageDiv_' + pageNumber).getBoundingClientRect();\n            var waitingPopup = this.getElement('_pageDiv_' + pageNumber).firstChild.firstChild;\n            if (pageCurrentRect.top < 0) {\n                if (this.toolbarHeight + (this.viewerContainer.clientHeight / 2) - pageCurrentRect.top < pageCurrentRect.height) {\n                    waitingPopup.style.top = ((this.viewerContainer.clientHeight / 2) - pageCurrentRect.top) - this.toolbarHeight + 'px';\n                }\n                else {\n                    if (this.toolbarHeight + (pageCurrentRect.bottom / 2) - pageCurrentRect.top < pageCurrentRect.height) {\n                        waitingPopup.style.top = ((pageCurrentRect.bottom / 2) - pageCurrentRect.top) - this.toolbarHeight + 'px';\n                    }\n                }\n            }\n            else {\n                waitingPopup.style.top = this.viewerContainer.clientHeight / 2 + 'px';\n            }\n            if ((Browser.isDevice && !this.pdfViewer.enableDesktopMode) && pageCurrentRect.width > this.viewerContainer.clientWidth) {\n                waitingPopup.style.left = (this.viewerContainer.clientWidth / 2) + (this.viewerContainer.scrollLeft) + 'px';\n            }\n            else if (this.getZoomFactor() > 1.25 && pageCurrentRect.width > this.viewerContainer.clientWidth) {\n                waitingPopup.style.left = this.viewerContainer.clientWidth / 2 + 'px';\n            }\n            else {\n                waitingPopup.style.left = pageCurrentRect.width / 2 + 'px';\n            }\n        }\n    };\n    /**\n     * @private\n     * @returns {number} - returned the page value.\n     */\n    PdfViewerBase.prototype.getActivePage = function (isPageNumber) {\n        if (this.activeElements && !isNullOrUndefined(this.activeElements.activePageID)) {\n            if (isPageNumber) {\n                return this.activeElements.activePageID + 1;\n            }\n            else {\n                return this.activeElements.activePageID;\n            }\n        }\n        else {\n            if (isPageNumber) {\n                return this.currentPageNumber;\n            }\n            else {\n                return this.currentPageNumber - 1;\n            }\n        }\n    };\n    PdfViewerBase.prototype.createWaitingPopup = function (pageNumber) {\n        // eslint-disable-next-line max-len\n        var waitingPopup = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + pageNumber);\n        if (waitingPopup) {\n            createSpinner({ target: waitingPopup });\n            this.setLoaderProperties(waitingPopup);\n        }\n    };\n    PdfViewerBase.prototype.showLoadingIndicator = function (isShow) {\n        var waitingPopup = this.getElement('_loadingIndicator');\n        if (waitingPopup) {\n            if (isShow) {\n                waitingPopup.style.display = 'block';\n                showSpinner(waitingPopup);\n            }\n            else {\n                waitingPopup.style.display = 'none';\n                hideSpinner(waitingPopup);\n            }\n        }\n    };\n    PdfViewerBase.prototype.spinnerPosition = function (container, pageIndex) {\n        var inner = container.querySelector('.e-spinner-inner');\n        var zoomValue = this.getZoomFactor();\n        var width = this.pageSize[parseInt(pageIndex.toString(), 10)].width * zoomValue;\n        var height = this.pageSize[parseInt(pageIndex.toString(), 10)].height * zoomValue;\n        inner.style.top = (height / 2) + 'px';\n        inner.style.left = (width / 2) + 'px';\n        var circle = inner.children[0];\n        if (zoomValue <= 0.20) {\n            circle.style.width = '20px';\n            circle.style.height = '20px';\n            circle.style.transformOrigin = '10px 10px 10px';\n        }\n        else if (zoomValue <= 0.45) {\n            circle.style.width = '30px';\n            circle.style.height = '30px';\n            circle.style.transformOrigin = '15px 15px 15px';\n        }\n        else {\n            circle.style.width = '48px';\n            circle.style.height = '48px';\n            circle.style.transformOrigin = '24px 24px 24px';\n        }\n    };\n    /**\n     * @param {boolean} isShow - Show or hide page loading indicator.\n     * @returns {void}\n     * @private\n     */\n    PdfViewerBase.prototype.showPageLoadingIndicator = function (pageIndex, isShow) {\n        var waitingPopup = this.getElement('_pageDiv_' + pageIndex);\n        if (waitingPopup != null) {\n            this.spinnerPosition(waitingPopup, pageIndex);\n            if (isShow) {\n                showSpinner(waitingPopup);\n            }\n            else {\n                hideSpinner(waitingPopup);\n            }\n            this.updateWaitingPopup(pageIndex);\n        }\n    };\n    /**\n     * @param {boolean} isShow - Show or hide print loading indicator.\n     * @returns {void}\n     * @private\n     */\n    PdfViewerBase.prototype.showPrintLoadingIndicator = function (isShow) {\n        var printWaitingPopup = this.getElement('_printLoadingIndicator');\n        if (printWaitingPopup != null) {\n            if (isShow) {\n                this.printMainContainer.style.display = 'block';\n                showSpinner(printWaitingPopup);\n            }\n            else {\n                this.printMainContainer.style.display = 'none';\n                hideSpinner(printWaitingPopup);\n            }\n        }\n    };\n    PdfViewerBase.prototype.setLoaderProperties = function (element) {\n        var spinnerElement = element.firstChild.firstChild.firstChild;\n        if (spinnerElement) {\n            spinnerElement.style.height = '48px';\n            spinnerElement.style.width = '48px';\n            spinnerElement.style.transformOrigin = '24px 24px 24px';\n        }\n    };\n    /**\n     * @param {number} pageNumber - Specify the pageNumber.\n     * @returns {void}\n     * @private\n     */\n    PdfViewerBase.prototype.updateScrollTop = function (pageNumber) {\n        var _this = this;\n        // eslint-disable-next-line\n        if (this.pageSize[pageNumber] != null) {\n            this.renderElementsVirtualScroll(pageNumber);\n            this.viewerContainer.scrollTop = this.getPageTop(pageNumber);\n            if (this.renderedPagesList.indexOf(pageNumber) === -1) {\n                this.createRequestForRender(pageNumber);\n            }\n            setTimeout(function () {\n                var currentPageNumber = pageNumber + 1;\n                if (currentPageNumber !== _this.currentPageNumber) {\n                    _this.pdfViewer.currentPageNumber = currentPageNumber;\n                    _this.currentPageNumber = currentPageNumber;\n                    if (_this.pdfViewer.toolbarModule) {\n                        _this.pdfViewer.toolbarModule.updateCurrentPage(currentPageNumber);\n                    }\n                }\n            }, 100);\n        }\n    };\n    /**\n     * @private\n     * @returns {number} - Returns the zoom factor value.\n     */\n    PdfViewerBase.prototype.getZoomFactor = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.zoomFactor;\n        }\n        else {\n            // default value\n            return 1;\n        }\n    };\n    /**\n     * @private\n     * @returns {boolean} - Returns whether the pinch zoom is performed or not.\n     */\n    PdfViewerBase.prototype.getPinchZoomed = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isPinchZoomed;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    /**\n     * @private\n     * @returns {boolean} -Returns whether the zoom is performed or not.\n     */\n    PdfViewerBase.prototype.getMagnified = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isMagnified;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getPinchScrolled = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isPinchScrolled;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getPagesPinchZoomed = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isPagePinchZoomed;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getPagesZoomed = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isPagesZoomed;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getRerenderCanvasCreated = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isRerenderCanvasCreated;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    /**\n     * @private\n     * @returns {string} - retrun the docuumentid.\n     */\n    PdfViewerBase.prototype.getDocumentId = function () {\n        return this.documentId;\n    };\n    /**\n     * @private\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.download = function () {\n        if (this.pageCount > 0) {\n            this.createRequestForDownload();\n        }\n    };\n    /**\n     * @private\n     * @returns {promise<Blob>} - Returns the blob object.\n     */\n    PdfViewerBase.prototype.saveAsBlob = function () {\n        var _this = this;\n        if (this.pageCount > 0) {\n            return new Promise(function (resolve, reject) {\n                _this.saveAsBlobRequest().then(function (value) {\n                    resolve(value);\n                });\n            });\n        }\n        return null;\n    };\n    PdfViewerBase.prototype.saveAsBlobRequest = function () {\n        var _this = this;\n        var proxy = null;\n        proxy = this;\n        var promise = new Promise(function (resolve, reject) {\n            // eslint-disable-next-line\n            var jsonObject = proxy.constructJsonDownload();\n            _this.dowonloadRequestHandler = new AjaxHandler(_this.pdfViewer);\n            _this.dowonloadRequestHandler.url = proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.download;\n            _this.dowonloadRequestHandler.responseType = 'text';\n            if (_this.clientSideRendering) {\n                var data = _this.pdfViewer.pdfRendererModule.getDocumentAsBase64(jsonObject);\n                var resultdata = proxy.saveAsBlobFile(data, proxy);\n                resolve(resultdata);\n            }\n            else {\n                _this.dowonloadRequestHandler.send(jsonObject);\n            }\n            // eslint-disable-next-line\n            _this.dowonloadRequestHandler.onSuccess = function (result) {\n                // eslint-disable-next-line\n                var data = result.data;\n                var resultdata = proxy.saveAsBlobFile(data, proxy);\n                resolve(resultdata);\n            };\n            // eslint-disable-next-line\n            _this.dowonloadRequestHandler.onFailure = function (result) {\n                proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.download);\n            };\n            // eslint-disable-next-line\n            _this.dowonloadRequestHandler.onError = function (result) {\n                proxy.openNotificationPopup();\n                proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.download);\n            };\n        });\n        return promise;\n    };\n    PdfViewerBase.prototype.saveAsBlobFile = function (data, proxy) {\n        return new Promise(function (resolve) {\n            if (data) {\n                if (typeof data === 'object') {\n                    data = JSON.parse(data);\n                }\n                if (typeof data !== 'object' && data.indexOf('data:application/pdf') === -1) {\n                    proxy.onControlError(500, data, proxy.pdfViewer.serverActionSettings.download);\n                    data = null;\n                }\n                if (data) {\n                    if (!proxy.clientSideRendering) {\n                        proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.download, data);\n                    }\n                    var blobUrl = proxy.createBlobUrl(data.split('base64,')[1], 'application/pdf');\n                    resolve(blobUrl);\n                }\n            }\n        });\n    };\n    /**\n     * @param {boolean} isTriggerEvent - check to trigger the event.\n     * @returns {void}\n     * @private\n     */\n    PdfViewerBase.prototype.clear = function (isTriggerEvent) {\n        var proxy = this;\n        var pdfViewer = proxy.pdfViewer;\n        var printModule = pdfViewer.printModule;\n        var textSearchModule = pdfViewer.textSearchModule;\n        var bookmarkViewModule = pdfViewer.bookmarkViewModule;\n        var thumbnailViewModule = pdfViewer.thumbnailView;\n        var annotationModule = pdfViewer.annotation;\n        var magnificationModule = pdfViewer.magnificationModule;\n        var textSelectionModule = pdfViewer.textSelectionModule;\n        var formFieldsModule = pdfViewer.formFieldsModule;\n        var signatureModule = proxy.signatureModule;\n        proxy.isPasswordAvailable = false;\n        proxy.isDocumentLoaded = false;\n        proxy.isInitialLoaded = false;\n        proxy.isImportAction = false;\n        proxy.annotationPageList = [];\n        proxy.annotationComments = null;\n        pdfViewer.annotationCollection = [];\n        pdfViewer.signatureCollection = [];\n        pdfViewer.formFieldCollection = [];\n        proxy.isAnnotationCollectionRemoved = false;\n        proxy.documentAnnotationCollections = null;\n        proxy.isDrawnCompletely = false;\n        proxy.annotationRenderredList = [];\n        proxy.isImportAction = false;\n        proxy.isImportedAnnotation = false;\n        proxy.importedAnnotation = [];\n        proxy.isStorageExceed = false;\n        proxy.annotationStorage = {};\n        proxy.formFieldStorage = {};\n        proxy.downloadCollections = {};\n        proxy.annotationEvent = null;\n        proxy.highestWidth = 0;\n        proxy.highestHeight = 0;\n        proxy.requestLists = [];\n        proxy.tilerequestLists = [];\n        proxy.isToolbarInkClicked = false;\n        pdfViewer.formFieldCollections = [];\n        proxy.passwordData = '';\n        proxy.isFocusField = false;\n        proxy.focusField = [];\n        proxy.updateDocumentEditedProperty(false);\n        pdfViewer.clipboardData.clipObject = {};\n        if (pdfViewer.toolbar) {\n            pdfViewer.toolbar.uploadedFile = null;\n        }\n        proxy.isTaggedPdf = false;\n        if (pdfViewer.formDesignerModule) {\n            pdfViewer.formDesignerModule.formFieldIndex = 0;\n            if (proxy.activeElements) {\n                pdfViewer.clearSelection(proxy.activeElements.activePageID);\n            }\n            pdfViewer.zIndexTable = [];\n        }\n        proxy.initiateTextSelectMode();\n        proxy.RestrictionEnabled(proxy.restrictionList, true);\n        proxy.restrictionList = null;\n        if (!Browser.isDevice || pdfViewer.enableDesktopMode) {\n            if (proxy.navigationPane.sideBarToolbar) {\n                proxy.navigationPane.clear();\n            }\n        }\n        if (!isBlazor() && Browser.isDevice || !pdfViewer.enableDesktopMode) {\n            proxy.navigationPane.clear();\n        }\n        if (thumbnailViewModule) {\n            thumbnailViewModule.clear();\n        }\n        if (bookmarkViewModule) {\n            bookmarkViewModule.clear();\n        }\n        if (magnificationModule) {\n            magnificationModule.isMagnified = false;\n            magnificationModule.clearIntervalTimer();\n        }\n        if (textSelectionModule) {\n            textSelectionModule.clearTextSelection();\n        }\n        if (textSearchModule) {\n            textSearchModule.resetTextSearch();\n        }\n        if (annotationModule) {\n            annotationModule.clear();\n            annotationModule.initializeCollection();\n        }\n        if (formFieldsModule) {\n            formFieldsModule.readOnlyCollection = [];\n            formFieldsModule.signatureFieldCollection = [];\n            formFieldsModule.renderedPageList = [];\n            formFieldsModule.currentTarget = null;\n        }\n        if (signatureModule) {\n            signatureModule.signaturecollection = [];\n            signatureModule.outputcollection = [];\n            signatureModule.signAnnotationIndex = [];\n        }\n        if (proxy.pageSize) {\n            proxy.pageSize = [];\n        }\n        if (proxy.renderedPagesList) {\n            proxy.renderedPagesList = [];\n        }\n        if (proxy.accessibilityTagsCollection) {\n            proxy.accessibilityTagsCollection = [];\n        }\n        if (proxy.pageRequestListForAccessibilityTags) {\n            proxy.pageRequestListForAccessibilityTags = [];\n        }\n        if (proxy.pageContainer) {\n            while (proxy.pageContainer.hasChildNodes()) {\n                proxy.pageContainer.removeChild(proxy.pageContainer.lastChild);\n            }\n        }\n        if (proxy.pageCount > 0) {\n            proxy.unloadDocument(proxy);\n            // eslint-disable-next-line\n            proxy.textLayer.characterBound = new Array();\n            proxy.loadRequestHandler && proxy.loadRequestHandler.clear();\n            proxy.virtualLoadRequestHandler && proxy.virtualLoadRequestHandler.clear();\n            proxy.pageRequestHandler && proxy.pageRequestHandler.clear();\n            proxy.dowonloadRequestHandler && proxy.dowonloadRequestHandler.clear();\n            proxy.importAnnotationRequestHandler && proxy.importAnnotationRequestHandler.clear();\n            proxy.exportAnnotationRequestHandler && proxy.exportAnnotationRequestHandler.clear();\n            proxy.importFormFieldsRequestHandler && proxy.importFormFieldsRequestHandler.clear();\n            proxy.exportFormFieldsRequestHandler && proxy.exportFormFieldsRequestHandler.clear();\n            if (printModule && printModule.printRequestHandler) {\n                printModule.printRequestHandler.clear();\n            }\n        }\n        proxy.windowSessionStorageClear();\n        if (proxy.pinchZoomStorage) {\n            proxy.pinchZoomStorage = [];\n        }\n        if ((proxy.previousZoomValue || proxy.previousZoomValue === 0) && proxy.previousZoomValue !== pdfViewer.zoomValue) {\n            pdfViewer.zoomValue = proxy.previousZoomValue;\n        }\n        if (isTriggerEvent && proxy.pageCount > 0) {\n            pdfViewer.fireDocumentUnload(this.pdfViewer.fileName);\n        }\n        this.pdfViewer.fileName = null;\n    };\n    /**\n     * @private\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.destroy = function () {\n        if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n            this.pdfViewer.element.classList.remove('e-pv-mobile-view');\n        }\n        this.unWireEvents();\n        this.clear(false);\n        if (this.pageContainer) {\n            this.pageContainer.parentNode ? this.pageContainer.parentNode.removeChild(this.pageContainer) : null;\n        }\n        if (this.viewerContainer) {\n            this.viewerContainer.parentNode ? this.viewerContainer.parentNode.removeChild(this.viewerContainer) : null;\n        }\n        if (this.contextMenuModule) {\n            var contextMenuElement = this.contextMenuModule.contextMenuElement;\n            contextMenuElement && contextMenuElement.ej2_instances && contextMenuElement.ej2_instances.length > 0 ? this.contextMenuModule.destroy() : null;\n        }\n        if (this.pdfViewer.toolbarModule) {\n            this.navigationPane.destroy();\n        }\n        var measureElement = document.getElementById('measureElement');\n        if (measureElement) {\n            measureElement = undefined;\n        }\n    };\n    /**\n     * @param {PdfViewerBase} proxy - PdfviewerBase class.\n     * @returns {void}\n     * @private\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.unloadDocument = function (proxy) {\n        var documentId = '';\n        var hashId = window.sessionStorage.getItem(this.documentId + '_hashId');\n        var documentLiveCount = window.sessionStorage.getItem(this.documentId + '_documentLiveCount');\n        var serviceURL = window.sessionStorage.getItem(this.documentId + '_serviceURL');\n        if (Browser.isIE || Browser.info.name === 'edge') {\n            documentId = decodeURI(hashId);\n        }\n        else {\n            documentId = proxy.hashId ? proxy.hashId : hashId;\n        }\n        if (documentId !== null) {\n            // eslint-disable-next-line max-len\n            var jsonObject = { hashId: documentId, documentLiveCount: documentLiveCount, action: 'Unload', elementId: proxy.pdfViewer.element.id };\n            var actionName = window.sessionStorage.getItem(this.documentId + '_unload');\n            if (serviceURL !== \"undefined\" && serviceURL !== \"null\" && serviceURL !== \"\" && !isNullOrUndefined(serviceURL)) {\n                try {\n                    // eslint-disable-next-line\n                    var browserSupportsKeepalive = 'keepalive' in new Request('');\n                    if (browserSupportsKeepalive) {\n                        // eslint-disable-next-line\n                        var headerValue = this.setUnloadRequestHeaders();\n                        var credentialsData = this.pdfViewer.ajaxRequestSettings.withCredentials ? 'include' : 'omit';\n                        fetch(serviceURL + '/' + actionName, {\n                            method: 'POST',\n                            credentials: credentialsData,\n                            headers: headerValue,\n                            body: JSON.stringify(jsonObject)\n                        });\n                    }\n                }\n                catch (error) {\n                    this.unloadRequestHandler = new AjaxHandler(this.pdfViewer);\n                    this.unloadRequestHandler.send(jsonObject);\n                }\n            }\n            else if (isBlazor()) {\n                this.clearCache(actionName, jsonObject, proxy);\n            }\n        }\n        if (this.pdfViewer.magnificationModule) {\n            this.pdfViewer.magnificationModule.zoomFactor = 1;\n        }\n        this.formFieldCollection = [];\n        this.textrequestLists = [];\n        window.sessionStorage.removeItem(this.documentId + '_hashId');\n        window.sessionStorage.removeItem(this.documentId + '_documentLiveCount');\n        if (this.documentId) {\n            window.sessionStorage.removeItem(this.documentId + '_formfields');\n            window.sessionStorage.removeItem(this.documentId + '_formDesigner');\n            window.sessionStorage.removeItem(this.documentId + '_annotations_shape');\n            window.sessionStorage.removeItem(this.documentId + '_annotations_shape_measure');\n            window.sessionStorage.removeItem(this.documentId + '_annotations_stamp');\n            window.sessionStorage.removeItem(this.documentId + '_annotations_sticky');\n            window.sessionStorage.removeItem(this.documentId + '_annotations_textMarkup');\n            window.sessionStorage.removeItem(this.documentId + '_annotations_freetext');\n            window.sessionStorage.removeItem(this.documentId + '_formfields');\n            window.sessionStorage.removeItem(this.documentId + '_annotations_sign');\n            window.sessionStorage.removeItem(this.documentId + '_annotations_ink');\n            window.sessionStorage.removeItem(this.documentId + '_pagedata');\n            for (var i = 0; i < this.sessionStorage.length; i++) {\n                window.sessionStorage.removeItem(this.sessionStorage[parseInt(i.toString(), 10)]);\n            }\n        }\n    };\n    PdfViewerBase.prototype.clearCache = function (actionName, jsonObject, proxy) {\n        this.unloadRequestHandler = new AjaxHandler(this.pdfViewer);\n        this.unloadRequestHandler.url = window.sessionStorage.getItem(this.documentId + '_serviceURL') + '/' + actionName;\n        this.unloadRequestHandler.mode = false;\n        this.unloadRequestHandler.responseType = null;\n        this.unloadRequestHandler.send(jsonObject);\n        // eslint-disable-next-line\n        this.unloadRequestHandler.onSuccess = function (result) {\n            // eslint-disable-next-line\n            var data = result.data;\n            if (data) {\n                if (typeof data !== 'object') {\n                    if (data.indexOf('Document') === -1) {\n                        proxy.onControlError(500, data, actionName);\n                        data = null;\n                    }\n                }\n                if (data) {\n                    proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.unload, data);\n                }\n            }\n        };\n        // eslint-disable-next-line\n        this.unloadRequestHandler.onFailure = function (result) {\n            proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, actionName);\n        };\n        // eslint-disable-next-line\n        this.unloadRequestHandler.onError = function (result) {\n            proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, actionName);\n        };\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.setUnloadRequestHeaders = function () {\n        // eslint-disable-next-line\n        var myHeaders = new Headers();\n        myHeaders.append('Content-Type', 'application/json;charset=UTF-8');\n        for (var i = 0; i < this.pdfViewer.ajaxRequestSettings.ajaxHeaders.length; i++) {\n            // eslint-disable-next-line max-len\n            myHeaders.append(this.pdfViewer.ajaxRequestSettings.ajaxHeaders[parseInt(i.toString(), 10)].headerName, this.pdfViewer.ajaxRequestSettings.ajaxHeaders[parseInt(i.toString(), 10)].headerValue);\n        }\n        return myHeaders;\n    };\n    PdfViewerBase.prototype.windowSessionStorageClear = function () {\n        window.sessionStorage.removeItem(this.documentId + '_currentDocument');\n        window.sessionStorage.removeItem(this.documentId + '_serviceURL');\n        window.sessionStorage.removeItem(this.documentId + '_unload');\n        for (var i = 0; i < this.sessionStorage.length; i++) {\n            window.sessionStorage.removeItem(this.sessionStorage[parseInt(i.toString(), 10)]);\n        }\n    };\n    PdfViewerBase.prototype.updateCommentPanel = function () {\n        // eslint-disable-next-line\n        var moreOptionsButton = document.querySelectorAll('.e-pv-more-options-button');\n        for (var i = 0; i < moreOptionsButton.length; i++) {\n            moreOptionsButton[parseInt(i.toString(), 10)].style.visibility = 'hidden';\n        }\n        // eslint-disable-next-line\n        var commentTextBox = document.querySelectorAll('.e-pv-new-comments-div');\n        for (var j = 0; j < commentTextBox.length; j++) {\n            commentTextBox[parseInt(j.toString(), 10)].style.display = 'none';\n        }\n        // eslint-disable-next-line\n        var commentContainer = document.querySelectorAll('.e-pv-comments-border');\n        for (var j = 0; j < commentContainer.length; j++) {\n            commentContainer[parseInt(j.toString(), 10)].classList.remove('e-pv-comments-border');\n        }\n        // eslint-disable-next-line\n        var editableElement = document.querySelectorAll('.e-editable-inline');\n        for (var j = 0; j < editableElement.length; j++) {\n            editableElement[parseInt(j.toString(), 10)].style.display = 'none';\n        }\n        // eslint-disable-next-line\n        var commentSelect = document.querySelectorAll('.e-pv-comments-select');\n        for (var z = 0; z < commentSelect.length; z++) {\n            commentSelect[parseInt(z.toString(), 10)].classList.remove('e-pv-comments-select');\n        }\n        // eslint-disable-next-line\n        var commentsDiv = document.querySelectorAll('.e-pv-comments-div');\n        for (var j = 0; j < commentsDiv.length; j++) {\n            commentsDiv[parseInt(j.toString(), 10)].style.minHeight = 60 + 'px';\n        }\n    };\n    /**\n     * @param {boolean} isMouseDown - check whether the mouse down is triggered.\n     * @returns {void}\n     * @private\n     */\n    PdfViewerBase.prototype.focusViewerContainer = function (isMouseDown) {\n        var scrollX = window.scrollX;\n        var scrollY = window.scrollY;\n        // eslint-disable-next-line\n        var parentNode = this.getScrollParent(this.viewerContainer);\n        var scrollNodeX = 0;\n        var scrollNodeY = 0;\n        if (parentNode !== null) {\n            scrollNodeX = parentNode.scrollLeft;\n            scrollNodeY = parentNode.scrollTop;\n        }\n        this.viewerContainer.focus();\n        if (this.pdfViewer.annotation && this.pdfViewer.annotation.stickyNotesAnnotationModule.accordionContainer) {\n            this.updateCommentPanel();\n        }\n        // eslint-disable-next-line max-len\n        if ((navigator.userAgent.indexOf('MSIE') !== -1 || navigator.appVersion.indexOf('Trident/') > -1 || navigator.userAgent.indexOf('Edge') !== -1) && parentNode !== null) {\n            parentNode.scrollLeft = scrollNodeX;\n            parentNode.scrollTop = scrollNodeY;\n        }\n        else if (parentNode !== null) {\n            parentNode.scrollTo(scrollNodeX, scrollNodeY);\n        }\n        window.scrollTo(scrollX, scrollY);\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.getScrollParent = function (node) {\n        if (node === null || node.nodeName === 'HTML') {\n            return null;\n        }\n        var style = getComputedStyle(node);\n        if (this.viewerContainer.id !== node.id && (style.overflowY === 'scroll' || style.overflowY === 'auto')) {\n            return node;\n        }\n        else {\n            return this.getScrollParent(node.parentNode);\n        }\n    };\n    PdfViewerBase.prototype.createCorruptedPopup = function () {\n        var _this = this;\n        // eslint-disable-next-line max-len\n        var popupElement = createElement('div', { id: this.pdfViewer.element.id + '_corrupted_popup', className: 'e-pv-corrupted-popup' });\n        this.pageContainer.appendChild(popupElement);\n        this.corruptPopup = new Dialog({\n            showCloseIcon: true, closeOnEscape: true, isModal: true,\n            // eslint-disable-next-line max-len\n            header: '<div class=\"e-pv-corrupted-popup-header\"> ' + this.pdfViewer.localeObj.getConstant('File Corrupted') + '</div>', visible: false,\n            // eslint-disable-next-line max-len\n            buttons: [{ buttonModel: { content: this.pdfViewer.localeObj.getConstant('OK'), isPrimary: true }, click: this.closeCorruptPopup.bind(this) }],\n            target: this.pdfViewer.element, beforeClose: function () {\n                _this.corruptPopup.destroy();\n                _this.getElement('_corrupted_popup').remove();\n                _this.corruptPopup = null;\n                var waitingPopup = _this.getElement('_loadingIndicator');\n                if (waitingPopup != null) {\n                    hideSpinner(waitingPopup);\n                }\n            }\n        });\n        if (this.pdfViewer.enableRtl) {\n            // eslint-disable-next-line max-len\n            this.corruptPopup.content = '<div id=\"templatertl\" class=\"e-pv-notification-icon-rtl\"> <div class=\"e-pv-corrupted-popup-content-rtl\" tabindex=\"0\">' + this.pdfViewer.localeObj.getConstant('File Corrupted Content') + '</div></div>';\n            this.corruptPopup.enableRtl = true;\n        }\n        else {\n            // eslint-disable-next-line max-len\n            this.corruptPopup.content = '<div id=\"template\" class=\"e-pv-notification-icon\"> <div class=\"e-pv-corrupted-popup-content\" tabindex=\"0\">' + this.pdfViewer.localeObj.getConstant('File Corrupted Content') + '</div></div>';\n        }\n        this.corruptPopup.appendTo(popupElement);\n    };\n    /**\n     * @private\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.hideLoadingIndicator = function () {\n        var waitingPopup = this.getElement('_loadingIndicator');\n        if (waitingPopup !== null) {\n            hideSpinner(waitingPopup);\n        }\n    };\n    PdfViewerBase.prototype.closeCorruptPopup = function () {\n        this.corruptPopup.hide();\n        var waitingPopup = this.getElement('_loadingIndicator');\n        if (waitingPopup !== null) {\n            hideSpinner(waitingPopup);\n        }\n    };\n    PdfViewerBase.prototype.createPrintPopup = function () {\n        var element = document.getElementById(this.pdfViewer.element.id);\n        this.printMainContainer = createElement('div', {\n            id: this.pdfViewer.element.id + '_printcontainer',\n            className: 'e-pv-print-popup-container'\n        });\n        element.appendChild(this.printMainContainer);\n        this.printMainContainer.style.display = 'none';\n        var printWaitingPopup = createElement('div', {\n            id: this.pdfViewer.element.id + '_printLoadingIndicator',\n            className: 'e-pv-print-loading-container'\n        });\n        this.printMainContainer.appendChild(printWaitingPopup);\n        createSpinner({ target: printWaitingPopup, cssClass: 'e-spin-center' });\n        this.setLoaderProperties(printWaitingPopup);\n    };\n    PdfViewerBase.prototype.createGoToPagePopup = function () {\n        var _this = this;\n        // eslint-disable-next-line max-len\n        var popupElement = createElement('div', { id: this.pdfViewer.element.id + '_goTopage_popup', className: 'e-pv-gotopage-popup' });\n        this.goToPageElement = createElement('span', { id: this.pdfViewer.element.id + '_prompt' });\n        this.goToPageElement.textContent = this.pdfViewer.localeObj.getConstant('Enter pagenumber');\n        popupElement.appendChild(this.goToPageElement);\n        var inputContainer = createElement('span', { className: 'e-pv-text-input' });\n        // eslint-disable-next-line max-len\n        this.goToPageInput = createElement('input', { id: this.pdfViewer.element.id + '_page_input', className: 'e-input' });\n        this.goToPageInput.type = 'text';\n        this.goToPageInput.style.maxWidth = '80%';\n        this.pageNoContainer = createElement('span', { className: '.e-pv-number-ofpages' });\n        inputContainer.appendChild(this.goToPageInput);\n        inputContainer.appendChild(this.pageNoContainer);\n        popupElement.appendChild(inputContainer);\n        this.pageContainer.appendChild(popupElement);\n        this.goToPagePopup = new Dialog({\n            showCloseIcon: true, closeOnEscape: false, isModal: true,\n            header: this.pdfViewer.localeObj.getConstant('GoToPage'), visible: false, buttons: [\n                {\n                    buttonModel: { content: this.pdfViewer.localeObj.getConstant('Cancel') },\n                    click: this.GoToPageCancelClick.bind(this)\n                },\n                // eslint-disable-next-line max-len\n                {\n                    buttonModel: { content: this.pdfViewer.localeObj.getConstant('Apply'), disabled: true, cssClass: 'e-pv-gotopage-apply-btn', isPrimary: true },\n                    click: this.GoToPageApplyClick.bind(this)\n                }\n            ], close: this.closeGoToPagePopUp.bind(this)\n        });\n        if (this.pdfViewer.enableRtl) {\n            this.goToPagePopup.enableRtl = true;\n        }\n        this.goToPagePopup.appendTo(popupElement);\n        if (!isBlazor()) {\n            var goToPageTextBox = new NumericTextBox({ format: '##', showSpinButton: false });\n            goToPageTextBox.appendTo(this.goToPageInput);\n        }\n        this.goToPageInput.addEventListener('keyup', function () {\n            // eslint-disable-next-line\n            var inputValue = _this.goToPageInput.value;\n            if (inputValue !== '' && parseFloat(inputValue) > 0 && (_this.pdfViewer.pageCount + 1) > parseFloat(inputValue)) {\n                _this.EnableApplyButton();\n            }\n            else {\n                _this.DisableApplyButton();\n            }\n        });\n    };\n    PdfViewerBase.prototype.closeGoToPagePopUp = function () {\n        this.goToPageInput.value = '';\n        this.DisableApplyButton();\n    };\n    PdfViewerBase.prototype.EnableApplyButton = function () {\n        // eslint-disable-next-line\n        var popupElements = document.getElementsByClassName('e-pv-gotopage-apply-btn')[0];\n        popupElements.removeAttribute('disabled');\n    };\n    PdfViewerBase.prototype.DisableApplyButton = function () {\n        // eslint-disable-next-line\n        var popupElements = document.getElementsByClassName('e-pv-gotopage-apply-btn')[0];\n        popupElements.setAttribute('disabled', true);\n    };\n    PdfViewerBase.prototype.GoToPageCancelClick = function () {\n        this.goToPagePopup.hide();\n    };\n    PdfViewerBase.prototype.GoToPageApplyClick = function () {\n        this.goToPagePopup.hide();\n        // eslint-disable-next-line\n        var pageNumber = this.goToPageInput.value;\n        this.pdfViewer.navigation.goToPage(pageNumber);\n        this.updateMobileScrollerPosition();\n    };\n    /**\n     * @private\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.updateMobileScrollerPosition = function () {\n        if ((Browser.isDevice && !this.pdfViewer.enableDesktopMode) && this.mobileScrollerContainer) {\n            // eslint-disable-next-line\n            var ratio = (this.viewerContainer.scrollHeight - this.viewerContainer.clientHeight) / (this.viewerContainer.clientHeight - 56);\n            // eslint-disable-next-line\n            var differenceRatio = (this.viewerContainer.scrollTop) / ratio;\n            // eslint-disable-next-line\n            var toolbarHeight = this.pdfViewer.toolbarModule ? this.toolbarHeight : 0;\n            this.mobileScrollerContainer.style.top = (toolbarHeight + differenceRatio) + 'px';\n        }\n    };\n    PdfViewerBase.prototype.createPasswordPopup = function () {\n        var _this = this;\n        // eslint-disable-next-line max-len\n        var popupElement = createElement('div', { id: this.pdfViewer.element.id + '_password_popup', className: 'e-pv-password-popup', attrs: { 'tabindex': '-1' } });\n        this.promptElement = createElement('span', { id: this.pdfViewer.element.id + '_prompt', attrs: { 'tabindex': '-1' } });\n        this.promptElement.textContent = this.pdfViewer.localeObj.getConstant('Enter Password');\n        popupElement.appendChild(this.promptElement);\n        var inputContainer = createElement('span', { className: 'e-input-group e-pv-password-input' });\n        // eslint-disable-next-line max-len\n        this.passwordInput = createElement('input', { id: this.pdfViewer.element.id + '_password_input', className: 'e-input' });\n        this.passwordInput.type = 'password';\n        this.passwordInput.name = 'Required';\n        inputContainer.appendChild(this.passwordInput);\n        popupElement.appendChild(inputContainer);\n        this.pageContainer.appendChild(popupElement);\n        this.passwordPopup = new Dialog({\n            showCloseIcon: true, closeOnEscape: false, isModal: true,\n            header: this.pdfViewer.localeObj.getConstant('Password Protected'), visible: false,\n            close: this.passwordCancel.bind(this), target: this.pdfViewer.element, beforeClose: function () {\n                _this.passwordPopup.destroy();\n                _this.getElement('_password_popup').remove();\n                _this.passwordPopup = null;\n                var waitingPopup = _this.getElement('_loadingIndicator');\n                if (waitingPopup != null) {\n                    hideSpinner(waitingPopup);\n                }\n            }\n        });\n        if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n            this.passwordPopup.buttons = [\n                {\n                    buttonModel: { content: this.pdfViewer.localeObj.getConstant('OK'), isPrimary: true },\n                    click: this.applyPassword.bind(this)\n                },\n                { buttonModel: { content: this.pdfViewer.localeObj.getConstant('Cancel') }, click: this.passwordCancelClick.bind(this) }\n            ];\n        }\n        else {\n            this.passwordPopup.buttons = [\n                { buttonModel: { content: this.pdfViewer.localeObj.getConstant('Cancel') }, click: this.passwordCancelClick.bind(this) },\n                {\n                    buttonModel: { content: this.pdfViewer.localeObj.getConstant('OK'), isPrimary: true },\n                    click: this.applyPassword.bind(this)\n                }\n            ];\n        }\n        if (this.pdfViewer.enableRtl) {\n            this.passwordPopup.enableRtl = true;\n        }\n        this.passwordPopup.appendTo(popupElement);\n        this.passwordInput.addEventListener('keyup', function () {\n            if (_this.passwordInput.value === '') {\n                _this.passwordDialogReset();\n            }\n        });\n        this.passwordInput.addEventListener('focus', function () {\n            _this.passwordInput.parentElement.classList.add('e-input-focus');\n        });\n        this.passwordInput.addEventListener('blur', function () {\n            _this.passwordInput.parentElement.classList.remove('e-input-focus');\n        });\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.passwordCancel = function (args) {\n        if (args.isInteraction) {\n            this.clear(false);\n            this.passwordDialogReset();\n            this.passwordInput.value = '';\n        }\n        var waitingPopup = this.getElement('_loadingIndicator');\n        if (waitingPopup !== null) {\n            hideSpinner(waitingPopup);\n        }\n    };\n    PdfViewerBase.prototype.passwordCancelClick = function () {\n        this.clear(false);\n        this.passwordDialogReset();\n        this.passwordPopup.hide();\n        var waitingPopup = this.getElement('_loadingIndicator');\n        if (waitingPopup !== null) {\n            hideSpinner(waitingPopup);\n        }\n    };\n    PdfViewerBase.prototype.passwordDialogReset = function () {\n        if (!isBlazor()) {\n            if (this.promptElement) {\n                this.promptElement.classList.remove('e-pv-password-error');\n                this.promptElement.textContent = this.pdfViewer.localeObj.getConstant('Enter Password');\n                this.passwordInput.value = '';\n            }\n        }\n    };\n    /**\n     * @private\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.applyPassword = function () {\n        if (!isBlazor()) {\n            var password = this.passwordInput.value;\n            if (!isNullOrUndefined(password) && password.length > 0) {\n                this.pdfViewer.load(this.document, password);\n            }\n        }\n        this.focusViewerContainer();\n    };\n    PdfViewerBase.prototype.createFileInputElement = function () {\n        if (Browser.isDevice || !this.pdfViewer.enableDesktopMode) {\n            // eslint-disable-next-line max-len\n            if (this.pdfViewer.enableAnnotationToolbar && this.pdfViewer.toolbarModule && this.pdfViewer.toolbarModule.annotationToolbarModule) {\n                this.pdfViewer.toolbarModule.annotationToolbarModule.createCustomStampElement();\n            }\n            if (this.signatureModule) {\n                this.signatureModule.createSignatureFileElement();\n            }\n        }\n    };\n    PdfViewerBase.prototype.wireEvents = function () {\n        var _this = this;\n        this.isDeviceiOS = (['iPad Simulator', 'iPhone Simulator', 'iPod Simulator', 'iPad', 'iPhone', 'iPod'].includes(navigator.platform) || (navigator.userAgent.includes(\"Mac\") && \"ontouchend\" in document));\n        this.isMacSafari = navigator.userAgent.indexOf(\"Safari\") > -1 && navigator.userAgent.indexOf(\"Chrome\") === -1 && !this.isDeviceiOS;\n        this.isWebkitMobile = /Chrome/.test(navigator.userAgent) || /Google Inc/.test(navigator.vendor) || (navigator.userAgent.indexOf('Safari') !== -1);\n        this.viewerContainer.addEventListener('scroll', this.viewerContainerOnScroll, true);\n        if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n            this.viewerContainer.addEventListener('touchmove', this.viewerContainerOnScroll, true);\n        }\n        this.viewerContainer.addEventListener('mousedown', this.viewerContainerOnMousedown);\n        this.viewerContainer.addEventListener('mouseup', this.viewerContainerOnMouseup);\n        this.viewerContainer.addEventListener(\"wheel\", this.detectTouchPad, false);\n        this.viewerContainer.addEventListener('wheel', this.viewerContainerOnMouseWheel);\n        if (this.isMacSafari) {\n            window.addEventListener('gesturestart', function (e) { return e.preventDefault(); });\n            window.addEventListener('gesturechange', function (e) { return e.preventDefault(); });\n            window.addEventListener('gestureend', function (e) { return e.preventDefault(); });\n            this.viewerContainer.addEventListener('gesturestart', this.handleMacGestureStart, false);\n            this.viewerContainer.addEventListener('gesturechange', this.handleMacGestureChange, false);\n            this.viewerContainer.addEventListener('gestureend', this.handleMacGestureEnd, false);\n        }\n        this.viewerContainer.addEventListener('mousemove', this.viewerContainerOnMousemove);\n        this.viewerContainer.addEventListener('mouseleave', this.viewerContainerOnMouseLeave);\n        this.viewerContainer.addEventListener('mouseenter', this.viewerContainerOnMouseEnter);\n        this.viewerContainer.addEventListener('mouseover', this.viewerContainerOnMouseOver);\n        this.viewerContainer.addEventListener('click', this.viewerContainerOnClick);\n        this.viewerContainer.addEventListener('dblclick', this.viewerContainerOnClick);\n        this.viewerContainer.addEventListener('dragstart', this.viewerContainerOnDragStart);\n        this.pdfViewer.element.addEventListener('keydown', this.viewerContainerOnKeyDown);\n        window.addEventListener('keydown', this.onWindowKeyDown);\n        window.addEventListener('mouseup', this.onWindowMouseUp);\n        window.addEventListener('touchend', this.onWindowTouchEnd);\n        this.unload = function () { return _this.pdfViewerRunner.terminate(); };\n        this.unloadDocument(this);\n        window.addEventListener('unload', this.unload);\n        window.addEventListener('beforeunload', this.clearSessionStorage);\n        window.addEventListener('resize', this.onWindowResize);\n        // eslint-disable-next-line max-len\n        if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.userAgent.indexOf('Edge') !== -1 || navigator.userAgent.indexOf('Trident') !== -1) {\n            this.viewerContainer.addEventListener('pointerdown', this.viewerContainerOnPointerDown);\n            this.viewerContainer.addEventListener('pointermove', this.viewerContainerOnPointerMove);\n            this.viewerContainer.addEventListener('pointerup', this.viewerContainerOnPointerEnd);\n            this.viewerContainer.addEventListener('pointerleave', this.viewerContainerOnPointerEnd);\n        }\n        else {\n            this.viewerContainer.addEventListener('touchstart', this.viewerContainerOnTouchStart);\n            if (this.isWebkitMobile && this.isDeviceiOS) {\n                // eslint-disable-next-line max-len\n                this.viewerContainer.addEventListener(\"touchmove\", function (e) { if (!isNullOrUndefined(e.scale) && (e.scale !== 1)) {\n                    e.preventDefault();\n                } }, { passive: false });\n            }\n            this.viewerContainer.addEventListener('touchmove', this.viewerContainerOnTouchMove);\n            this.viewerContainer.addEventListener('touchend', this.viewerContainerOnTouchEnd);\n            this.viewerContainer.addEventListener('touchleave', this.viewerContainerOnTouchEnd);\n            this.viewerContainer.addEventListener('touchcancel', this.viewerContainerOnTouchEnd);\n        }\n    };\n    PdfViewerBase.prototype.unWireEvents = function () {\n        if (this.viewerContainer) {\n            this.viewerContainer.removeEventListener('scroll', this.viewerContainerOnScroll, true);\n            if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n                this.viewerContainer.removeEventListener('touchmove', this.viewerContainerOnScroll, true);\n            }\n            this.viewerContainer.removeEventListener('mousedown', this.viewerContainerOnMousedown);\n            this.viewerContainer.removeEventListener('mouseup', this.viewerContainerOnMouseup);\n            this.viewerContainer.removeEventListener(\"wheel\", this.detectTouchPad, false);\n            this.viewerContainer.removeEventListener('wheel', this.viewerContainerOnMouseWheel);\n            if (this.isMacSafari) {\n                window.removeEventListener('gesturestart', function (e) { return e.preventDefault(); });\n                window.removeEventListener('gesturechange', function (e) { return e.preventDefault(); });\n                window.removeEventListener('gestureend', function (e) { return e.preventDefault(); });\n                this.viewerContainer.removeEventListener('gesturestart', this.handleMacGestureStart, false);\n                this.viewerContainer.removeEventListener('gesturechange', this.handleMacGestureChange, false);\n                this.viewerContainer.removeEventListener('gestureend', this.handleMacGestureEnd, false);\n            }\n            this.viewerContainer.removeEventListener('mousemove', this.viewerContainerOnMousemove);\n            this.viewerContainer.removeEventListener('mouseleave', this.viewerContainerOnMouseLeave);\n            this.viewerContainer.removeEventListener('mouseenter', this.viewerContainerOnMouseEnter);\n            this.viewerContainer.removeEventListener('mouseover', this.viewerContainerOnMouseOver);\n            this.viewerContainer.removeEventListener('click', this.viewerContainerOnClick);\n            this.viewerContainer.removeEventListener('dragstart', this.viewerContainerOnDragStart);\n            this.viewerContainer.removeEventListener('contextmenu', this.viewerContainerOnContextMenuClick);\n            this.pdfViewer.element.removeEventListener('keydown', this.viewerContainerOnKeyDown);\n            window.addEventListener('keydown', this.onWindowKeyDown);\n            window.removeEventListener('mouseup', this.onWindowMouseUp);\n            window.removeEventListener('unload', this.unload);\n            window.removeEventListener('resize', this.onWindowResize);\n            // eslint-disable-next-line max-len\n            if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.userAgent.indexOf('Edge') !== -1 || navigator.userAgent.indexOf('Trident') !== -1) {\n                this.viewerContainer.removeEventListener('pointerdown', this.viewerContainerOnPointerDown);\n                this.viewerContainer.removeEventListener('pointermove', this.viewerContainerOnPointerMove);\n                this.viewerContainer.removeEventListener('pointerup', this.viewerContainerOnPointerEnd);\n                this.viewerContainer.removeEventListener('pointerleave', this.viewerContainerOnPointerEnd);\n            }\n            else {\n                this.viewerContainer.removeEventListener('touchstart', this.viewerContainerOnTouchStart);\n                if (this.isWebkitMobile && this.isDeviceiOS) {\n                    // eslint-disable-next-line max-len\n                    this.viewerContainer.removeEventListener(\"touchmove\", function (e) { if (!isNullOrUndefined(e.scale) && (e.scale !== 1)) {\n                        e.preventDefault();\n                    } }, false);\n                }\n                this.viewerContainer.removeEventListener('touchmove', this.viewerContainerOnTouchMove);\n                this.viewerContainer.removeEventListener('touchend', this.viewerContainerOnTouchEnd);\n                this.viewerContainer.removeEventListener('touchleave', this.viewerContainerOnTouchEnd);\n                this.viewerContainer.removeEventListener('touchcancel', this.viewerContainerOnTouchEnd);\n            }\n        }\n    };\n    /**\n     * @private\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.updateZoomValue = function () {\n        if (this.pdfViewer.magnificationModule) {\n            if (this.pdfViewer.magnificationModule.isAutoZoom) {\n                this.pdfViewer.magnificationModule.fitToAuto();\n            }\n            else if (this.pdfViewer.zoomMode !== 'FitToWidth' && this.pdfViewer.magnificationModule.fitType === 'fitToWidth') {\n                this.pdfViewer.magnificationModule.fitToWidth();\n            }\n            else if (this.pdfViewer.magnificationModule.fitType === 'fitToPage') {\n                this.pdfViewer.magnificationModule.fitToPage();\n            }\n        }\n        for (var i = 0; i < this.pageCount; i++) {\n            this.applyLeftPosition(i);\n        }\n    };\n    /**\n     * @private\n     * @param {any} annotation - The annotation type of any.\n     * @returns {void}\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.updateFreeTextProperties = function (annotation) {\n        if (this.pdfViewer.enableShapeLabel) {\n            if (this.pdfViewer.shapeLabelSettings.fillColor) {\n                annotation.labelFillColor = this.pdfViewer.shapeLabelSettings.fillColor;\n            }\n            if (this.pdfViewer.shapeLabelSettings.fontColor) {\n                annotation.fontColor = this.pdfViewer.shapeLabelSettings.fontColor;\n            }\n            if (this.pdfViewer.shapeLabelSettings.fontSize) {\n                annotation.fontSize = this.pdfViewer.shapeLabelSettings.fontSize;\n            }\n            if (this.pdfViewer.shapeLabelSettings.fontFamily) {\n                annotation.fontFamily = this.pdfViewer.shapeLabelSettings.fontFamily;\n            }\n            if (this.pdfViewer.shapeLabelSettings.opacity) {\n                annotation.labelOpacity = this.pdfViewer.shapeLabelSettings.opacity;\n            }\n            if (this.pdfViewer.shapeLabelSettings.labelContent) {\n                annotation.labelContent = this.pdfViewer.shapeLabelSettings.labelContent;\n            }\n        }\n    };\n    /**\n     * @private\n     * @param {MouseEvent} event - The mouse event.\n     * @returns {void}\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.mouseDownHandler = function (event) {\n        var isEnableDelete = false;\n        var isCancel;\n        var hidenItems = [];\n        var disabledItems = [];\n        if (event && event.target) {\n            this.mouseDownEvent = event;\n            this.contextMenuModule.currentTarget = event.target;\n        }\n        if (this.pdfViewer.annotationModule) {\n            isEnableDelete = this.pdfViewer.annotationModule.isEnableDelete();\n        }\n        if (!isEnableDelete) {\n            disabledItems.push('DeleteContext');\n        }\n        if (this.pdfViewer.contextMenuOption === 'None') {\n            isCancel = true;\n        }\n        else if (this.pdfViewer.textSelectionModule || this.isShapeBasedAnnotationsEnabled()) {\n            if (event) {\n                var isClickWithinSelectionBounds = this.isClickWithinSelectionBounds(event);\n                // eslint-disable-next-line max-len\n                if (this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.freeTextAnnotationModule && this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus) {\n                    this.isFreeTextContextMenu = true;\n                    // eslint-disable-next-line max-len\n                    if (this.pdfViewer.annotation.freeTextAnnotationModule && !this.pdfViewer.annotation.freeTextAnnotationModule.isTextSelected) {\n                        disabledItems.push('Cut');\n                        disabledItems.push('Copy');\n                    }\n                    // eslint-disable-next-line max-len\n                    if (this.pdfViewer.annotation.freeTextAnnotationModule && this.pdfViewer.annotation.freeTextAnnotationModule.selectedText === '') {\n                        disabledItems.push('Paste');\n                    }\n                    hidenItems.push('HighlightContext');\n                    hidenItems.push('UnderlineContext');\n                    hidenItems.push('StrikethroughContext');\n                    hidenItems.push('ScaleRatio');\n                    hidenItems.push('Properties');\n                    hidenItems.push('Comment');\n                    hidenItems.push('DeleteContext');\n                }\n                else if (isClickWithinSelectionBounds && this.pdfViewer.textSelectionModule) {\n                    // eslint-disable-next-line max-len\n                    if ((!event.target.classList.contains('e-pv-maintaincontent') && event.target.classList.contains('e-pv-text') || event.target.classList.contains('e-pv-text-layer'))) {\n                        if (this.checkIsNormalText()) {\n                            isCancel = true;\n                        }\n                        // eslint-disable-next-line max-len\n                    }\n                    else if ((Browser.isIE || Browser.info.name === 'edge') && event.target.classList.contains('e-pv-page-container')) {\n                        isCancel = true;\n                    }\n                    hidenItems.push('Cut');\n                    hidenItems.push('Paste');\n                    hidenItems.push('DeleteContext');\n                    hidenItems.push('ScaleRatio');\n                    hidenItems.push('Comment');\n                    hidenItems.push('Properties');\n                    // eslint-disable-next-line max-len\n                }\n                else if (this.pdfViewer.selectedItems.annotations.length !== 0 && (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'HandWrittenSignature' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureText' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureImage')) {\n                    this.shapeMenuItems(hidenItems, disabledItems, false, true);\n                    // eslint-disable-next-line max-len\n                }\n                else if (this.pdfViewer.selectedItems.annotations.length !== 0 && this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType !== 'Path') {\n                    this.shapeMenuItems(hidenItems, disabledItems, true);\n                }\n                else {\n                    // eslint-disable-next-line max-len\n                    if (this.pdfViewer.annotation && this.pdfViewer.annotation.isShapeCopied && (event.target.classList.contains('e-pv-text-layer') ||\n                        event.target.classList.contains('e-pv-text')) && !this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                        hidenItems.push('Properties');\n                        this.shapeMenuItems(hidenItems, disabledItems, false);\n                        // eslint-disable-next-line max-len\n                    }\n                    else if (this.isCalibrateAnnotationModule() && this.pdfViewer.annotationModule.measureAnnotationModule.currentAnnotationMode) {\n                        hidenItems.push('HighlightContext');\n                        hidenItems.push('UnderlineContext');\n                        hidenItems.push('StrikethroughContext');\n                        hidenItems.push('Properties');\n                        disabledItems.push('Cut');\n                        disabledItems.push('Copy');\n                        disabledItems.push('Paste');\n                        disabledItems.push('DeleteContext');\n                        disabledItems.push('Comment');\n                        // eslint-disable-next-line max-len\n                    }\n                    else if (this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                        hidenItems.push('HighlightContext');\n                        hidenItems.push('UnderlineContext');\n                        hidenItems.push('StrikethroughContext');\n                        hidenItems.push('Properties');\n                        hidenItems.push('Cut');\n                        hidenItems.push('Copy');\n                        hidenItems.push('Paste');\n                        hidenItems.push('ScaleRatio');\n                    }\n                    else {\n                        isCancel = true;\n                    }\n                }\n            }\n            else if (this.pdfViewer.textSelectionModule && (this.pdfViewer.contextMenuOption === 'MouseUp')) {\n                hidenItems.push('Cut');\n                hidenItems.push('Paste');\n                hidenItems.push('DeleteContext');\n                hidenItems.push('ScaleRatio');\n                hidenItems.push('Comment');\n                hidenItems.push('Properties');\n            }\n            else if (this.pdfViewer.selectedItems.annotations.length === 0) {\n                hidenItems.push('Cut');\n                hidenItems.push('Paste');\n                hidenItems.push('DeleteContext');\n                hidenItems.push('ScaleRatio');\n                hidenItems.push('Properties');\n            }\n            if (!this.pdfViewer.enableCommentPanel) {\n                disabledItems.push('Comment');\n            }\n        }\n        else {\n            isCancel = true;\n        }\n        var eventArgs = { hidenItems: hidenItems, disabledItems: disabledItems, isCancel: isCancel };\n        this.pdfViewer._dotnetInstance.invokeMethodAsync('MouseDownHandler', eventArgs);\n    };\n    /**\n     * @private\n     * @param {string} selectedMenu - The selected menu.\n     * @returns {void}\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.OnItemSelected = function (selectedMenu) {\n        // eslint-disable-next-line\n        var target = this.contextMenuModule.currentTarget;\n        switch (selectedMenu) {\n            case this.pdfViewer.localeObj.getConstant('Copy'):\n                this.CopyItemSelected();\n                break;\n            case this.pdfViewer.localeObj.getConstant('Highlight context'):\n                this.TextMarkUpSelected('Highlight');\n                break;\n            case this.pdfViewer.localeObj.getConstant('Underline context'):\n                this.TextMarkUpSelected('Underline');\n                break;\n            case this.pdfViewer.localeObj.getConstant('Strikethrough context'):\n                this.TextMarkUpSelected('Strikethrough');\n                break;\n            case this.pdfViewer.localeObj.getConstant('Properties'):\n                this.PropertiesItemSelected();\n                break;\n            case this.pdfViewer.localeObj.getConstant('Cut'):\n                this.CutItemSelected(target);\n                break;\n            case this.pdfViewer.localeObj.getConstant('Paste'):\n                this.pasteItemSelected(target);\n                break;\n            case this.pdfViewer.localeObj.getConstant('Delete Context'):\n                this.DeleteItemSelected();\n                break;\n            case this.pdfViewer.localeObj.getConstant('Scale Ratio'):\n                this.ScaleRatioSelected();\n                break;\n            case this.pdfViewer.localeObj.getConstant('Comment'):\n                this.CommentItemSelected();\n                break;\n            default:\n                break;\n        }\n    };\n    PdfViewerBase.prototype.CommentItemSelected = function () {\n        if (this.pdfViewer.annotation) {\n            this.pdfViewer.annotation.showCommentsPanel();\n            if (this.pdfViewer.selectedItems.annotations.length !== 0 ||\n                this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                // eslint-disable-next-line\n                var currentAnnotation = void 0;\n                if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                    currentAnnotation = this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;\n                }\n                else {\n                    currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n                }\n                // eslint-disable-next-line\n                var accordionExpand = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + this.pdfViewer.currentPageNumber);\n                if (accordionExpand) {\n                    accordionExpand.ej2_instances[0].expandItem(true);\n                }\n                // eslint-disable-next-line\n                var commentsDiv = document.getElementById(currentAnnotation.annotName);\n                if (commentsDiv) {\n                    if (!commentsDiv.classList.contains('e-pv-comments-border')) {\n                        commentsDiv.firstChild.click();\n                    }\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.ScaleRatioSelected = function () {\n        if (this.isCalibrateAnnotationModule()) {\n            this.pdfViewer.annotation.measureAnnotationModule.createScaleRatioWindow();\n        }\n    };\n    PdfViewerBase.prototype.DeleteItemSelected = function () {\n        if (this.pdfViewer.formDesignerModule && this.pdfViewer.selectedItems.formFields.length !== 0) {\n            this.pdfViewer.formDesignerModule.deleteFormField(this.pdfViewer.selectedItems.formFields[0].id);\n        }\n        else if (this.pdfViewer.annotation) {\n            this.pdfViewer.annotation.deleteAnnotation();\n        }\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.pasteItemSelected = function (target) {\n        // eslint-disable-next-line max-len\n        if (this.isFreeTextContextMenu || (this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus) && (target && target.className === 'free-text-input' && target.tagName === 'TEXTAREA')) {\n            this.pdfViewer.annotation.freeTextAnnotationModule.pasteSelectedText(target);\n            this.contextMenuModule.close();\n        }\n        else {\n            this.pdfViewer.paste();\n            this.contextMenuModule.previousAction = 'Paste';\n        }\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.CutItemSelected = function (target) {\n        // eslint-disable-next-line max-len\n        if (this.isFreeTextContextMenu || (this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus) && (target && target.className === 'free-text-input' && target.tagName === 'TEXTAREA')) {\n            this.pdfViewer.annotation.freeTextAnnotationModule.cutSelectedText(target);\n            this.contextMenuModule.close();\n        }\n        else if (this.pdfViewer.selectedItems.annotations.length === 1) {\n            var pageIndex = this.pdfViewer.selectedItems.annotations[0].pageIndex;\n            this.pdfViewer.cut();\n            this.contextMenuModule.previousAction = 'Cut';\n        }\n        else if (this.pdfViewer.selectedItems.formFields.length === 1) {\n            this.pdfViewer.cut();\n            this.contextMenuModule.previousAction = 'Cut';\n        }\n    };\n    PdfViewerBase.prototype.CopyItemSelected = function () {\n        var isSkip = false;\n        // eslint-disable-next-line max-len\n        if (this.isFreeTextContextMenu || (this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus)) {\n            this.pdfViewer.annotation.freeTextAnnotationModule.copySelectedText();\n            this.contextMenuModule.close();\n            isSkip = true;\n        }\n        else if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.copyText();\n            this.contextMenuModule.close();\n        }\n        if (this.pdfViewer.selectedItems.annotations.length && !isSkip) {\n            this.pdfViewer.copy();\n            this.contextMenuModule.previousAction = 'Copy';\n        }\n        else if (this.pdfViewer.selectedItems.formFields.length > 0) {\n            this.pdfViewer.copy();\n            this.contextMenuModule.previousAction = 'Copy';\n        }\n    };\n    PdfViewerBase.prototype.PropertiesItemSelected = function () {\n        // eslint-disable-next-line max-len\n        if (this.pdfViewer.selectedItems.annotations.length !== 0 && (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Line' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'LineWidthArrowHead' ||\n            this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Distance')) {\n            this.pdfViewer.annotation.createPropertiesWindow();\n            // eslint-disable-next-line max-len\n        }\n        else if (this.pdfViewer.selectedItems.formFields.length !== 0 && this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType) {\n            this.pdfViewer.formDesigner.createPropertiesWindow();\n        }\n    };\n    PdfViewerBase.prototype.TextMarkUpSelected = function (type) {\n        if (this.pdfViewer.annotation && this.pdfViewer.annotation.textMarkupAnnotationModule) {\n            this.pdfViewer.annotation.textMarkupAnnotationModule.isSelectionMaintained = false;\n            this.pdfViewer.annotation.textMarkupAnnotationModule.drawTextMarkupAnnotations(type);\n            this.pdfViewer.annotation.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n            this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAddMode = '';\n            this.pdfViewer.annotation.textMarkupAnnotationModule.isSelectionMaintained = true;\n        }\n    };\n    PdfViewerBase.prototype.shapeMenuItems = function (hidenItems, disabledItems, enableProperties, isSignature) {\n        if (this.pdfViewer.annotation && !this.pdfViewer.annotation.isShapeCopied) {\n            disabledItems.push('Paste');\n        }\n        hidenItems.push('HighlightContext');\n        hidenItems.push('UnderlineContext');\n        hidenItems.push('StrikethroughContext');\n        hidenItems.push('ScaleRatio');\n        if (enableProperties) {\n            // eslint-disable-next-line max-len\n            if (!(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Line' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'LineWidthArrowHead' ||\n                this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Distance')) {\n                hidenItems.push('Properties');\n            }\n        }\n        else if (isSignature) {\n            hidenItems.push('Properties');\n            hidenItems.push('Comment');\n        }\n        else {\n            hidenItems.push('Cut');\n            hidenItems.push('Copy');\n            hidenItems.push('DeleteContext');\n            hidenItems.push('Comment');\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.checkIsRtlText = function (text) {\n        // eslint-disable-next-line max-len\n        var ltrChars = 'A-Za-z\\\\u00C0-\\\\u00D6\\\\u00D8-\\\\u00F6\\\\u00F8-\\\\u02B8\\\\u0300-\\\\u0590\\\\u0800-\\\\u1FFF' + '\\\\u2C00-\\\\uFB1C\\\\uFDFE-\\\\uFE6F\\\\uFEFD-\\\\uFFFF';\n        var rtlChars = '\\\\u0591-\\\\u07FF\\\\uFB1D-\\\\uFDFD\\\\uFE70-\\\\uFEFC';\n        // eslint-disable-next-line\n        var rtlDirCheck = new RegExp('^[^' + ltrChars + ']*[' + rtlChars + ']');\n        return rtlDirCheck.test(text);\n    };\n    /**\n     * @private\n     * @param {any} event - Specifies the event.\n     * @returns {boolean} - retruned the beolean value.\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.isClickWithinSelectionBounds = function (event) {\n        var bounds;\n        var isWithin = false;\n        var diCount = 5;\n        var negativeCount = ((this.currentPageNumber - diCount) < 0) ? 0 : this.currentPageNumber - diCount;\n        var positiveCount = ((this.currentPageNumber - diCount) > this.pageCount) ? this.pageCount : this.currentPageNumber + diCount;\n        if (this.pdfViewer.textSelectionModule) {\n            for (var i = negativeCount; i < positiveCount; i++) {\n                if (i >= 0) {\n                    bounds = this.pdfViewer.textSelectionModule.getCurrentSelectionBounds(i);\n                    if (bounds) {\n                        var currentBound = bounds;\n                        if (this.getHorizontalValue(currentBound.left, i) < event.clientX && this.getHorizontalValue(currentBound.right, i) >\n                            event.clientX && this.getVerticalValue(currentBound.top, i) < event.clientY &&\n                            this.getVerticalValue(currentBound.bottom, i) > event.clientY) {\n                            isWithin = true;\n                            break;\n                        }\n                    }\n                }\n            }\n            if ((Browser.isIE || Browser.info.name === 'edge') && bounds) {\n                isWithin = true;\n            }\n        }\n        return isWithin;\n    };\n    PdfViewerBase.prototype.getHorizontalClientValue = function (value) {\n        var pageDiv = this.getElement('_pageDiv_' + (this.currentPageNumber - 1));\n        var pageBounds = pageDiv.getBoundingClientRect();\n        return (value - pageBounds.left);\n    };\n    PdfViewerBase.prototype.getVerticalClientValue = function (value) {\n        var pageDiv = this.getElement('_pageDiv_' + (this.currentPageNumber - 1));\n        var pageBounds = pageDiv.getBoundingClientRect();\n        return (value - pageBounds.top);\n    };\n    PdfViewerBase.prototype.getHorizontalValue = function (value, pageNumber) {\n        var pageDiv = this.getElement('_pageDiv_' + (pageNumber || this.currentPageNumber - 1));\n        var pageBounds = pageDiv.getBoundingClientRect();\n        return (value * this.getZoomFactor()) + pageBounds.left;\n    };\n    PdfViewerBase.prototype.getVerticalValue = function (value, pageNumber) {\n        var pageDiv = this.getElement('_pageDiv_' + (pageNumber || this.currentPageNumber - 1));\n        var pageBounds = pageDiv.getBoundingClientRect();\n        return (value * this.getZoomFactor()) + pageBounds.top;\n    };\n    /**\n     * @private\n     * @returns {boolean} - retruned the beolean value.\n     */\n    PdfViewerBase.prototype.checkIsNormalText = function () {\n        var isText = true;\n        var currentText = '';\n        // eslint-disable-next-line\n        var textSelectionModule = this.pdfViewer.textSelectionModule;\n        if (textSelectionModule && textSelectionModule.selectionRangeArray && textSelectionModule.selectionRangeArray.length === 1) {\n            currentText = textSelectionModule.selectionRangeArray[0].textContent;\n        }\n        else if (window.getSelection() && window.getSelection().anchorNode) {\n            currentText = window.getSelection().toString();\n        }\n        if (currentText !== '' && this.checkIsRtlText(currentText)) {\n            isText = false;\n        }\n        return isText;\n    };\n    PdfViewerBase.prototype.DeleteKeyPressed = function (event) {\n        var isSearchboxDialogOpen;\n        var searchBoxId = document.getElementById(this.pdfViewer.element.id + \"_search_box\");\n        if (searchBoxId) {\n            isSearchboxDialogOpen = searchBoxId.style.display !== \"none\";\n        }\n        if (this.pdfViewer.formDesignerModule && !this.pdfViewer.formDesigner.isPropertyDialogOpen && this.pdfViewer.designerMode && this.pdfViewer.selectedItems.formFields.length !== 0 && !isSearchboxDialogOpen) {\n            this.pdfViewer.formDesignerModule.deleteFormField(this.pdfViewer.selectedItems.formFields[0].id);\n        }\n        else if (this.pdfViewer.annotation && !this.pdfViewer.designerMode && event.srcElement.parentElement.classList && !event.srcElement.parentElement.classList.contains(\"e-input-focus\")) {\n            if (this.isTextMarkupAnnotationModule() && !this.getPopupNoteVisibleStatus() && !isSearchboxDialogOpen) {\n                this.pdfViewer.annotationModule.deleteAnnotation();\n            }\n            if (this.pdfViewer.selectedItems.annotations.length > 0) {\n                // eslint-disable-next-line\n                var annotation = this.pdfViewer.selectedItems.annotations[0];\n                var isReadOnly = true;\n                var type = annotation.shapeAnnotationType;\n                if (type === 'Path' || annotation.formFieldAnnotationType === 'SignatureField' || annotation.formFieldAnnotationType === 'InitialField' || type === 'HandWrittenSignature' || type === 'SignatureText' || type === 'SignatureImage') {\n                    var inputFields = document.getElementById(annotation.id);\n                    if (inputFields && inputFields.disabled) {\n                        isReadOnly = true;\n                    }\n                }\n                if (!isReadOnly) {\n                    if (annotation.annotationSettings && annotation.annotationSettings.isLock) {\n                        if (this.pdfViewer.annotationModule.checkAllowedInteractions('Delete', annotation)) {\n                            this.pdfViewer.remove(annotation);\n                            this.pdfViewer.renderSelector(this.pdfViewer.annotation.getEventPageNumber(event));\n                        }\n                    }\n                    else {\n                        this.pdfViewer.remove(annotation);\n                        this.pdfViewer.renderSelector(this.pdfViewer.annotation.getEventPageNumber(event));\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.initiatePanning = function () {\n        this.isPanMode = true;\n        this.textLayer.modifyTextCursor(false);\n        this.disableTextSelectionMode();\n        if (this.pdfViewer.toolbar && this.pdfViewer.toolbar.annotationToolbarModule) {\n            this.pdfViewer.toolbar.annotationToolbarModule.deselectAllItems();\n        }\n    };\n    /**\n     * @private\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.initiateTextSelectMode = function () {\n        this.isPanMode = false;\n        if (this.viewerContainer) {\n            this.viewerContainer.style.cursor = 'auto';\n            if (this.pdfViewer.textSelectionModule) {\n                this.textLayer.modifyTextCursor(true);\n                this.pdfViewer.textSelectionModule.enableTextSelectionMode();\n            }\n            if ((!Browser.isDevice || this.pdfViewer.enableDesktopMode) && !isBlazor()) {\n                this.enableAnnotationAddTools(true);\n            }\n        }\n    };\n    /**\n     * @private\n     * @returns {void}\n    */\n    PdfViewerBase.prototype.initiateTextSelection = function () {\n        if (this.pdfViewer.toolbar && !this.pdfViewer.toolbar.isSelectionToolDisabled) {\n            this.initiateTextSelectMode();\n            this.pdfViewer.toolbar.updateInteractionTools(true);\n        }\n    };\n    PdfViewerBase.prototype.enableAnnotationAddTools = function (isEnable) {\n        if (this.pdfViewer.toolbarModule) {\n            if (this.pdfViewer.toolbarModule.annotationToolbarModule) {\n                this.pdfViewer.toolbarModule.annotationToolbarModule.enableAnnotationAddTools(isEnable);\n            }\n        }\n    };\n    PdfViewerBase.prototype.applySelection = function () {\n        if (window.getSelection().anchorNode !== null) {\n            this.pdfViewer.textSelectionModule.applySpanForSelection();\n        }\n        this.isViewerContainerDoubleClick = false;\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.isDesignerMode = function (target) {\n        var isDesignerMode = false;\n        if (this.pdfViewer.selectedItems.annotations.length !== 0 && (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'HandWrittenSignature' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureText' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureImage')) {\n            isDesignerMode = true;\n            // eslint-disable-next-line max-len\n        }\n        else if (this.pdfViewer.selectedItems.annotations.length !== 0 && this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType !== 'Path') {\n            isDesignerMode = true;\n            // eslint-disable-next-line max-len\n        }\n        else if (this.pdfViewer.selectedItems.formFields.length !== 0 && this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType && this.pdfViewer.designerMode) {\n            isDesignerMode = true;\n        }\n        else {\n            // eslint-disable-next-line max-len\n            if (this.pdfViewer.annotation && this.pdfViewer.annotation.isShapeCopied && (target.classList.contains('e-pv-text-layer') ||\n                // eslint-disable-next-line max-len\n                target.classList.contains('e-pv-text')) && !this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                isDesignerMode = true;\n                // eslint-disable-next-line max-len\n            }\n            else if (this.pdfViewer.formDesigner && this.pdfViewer.formDesigner.isShapeCopied && (target.classList.contains('e-pv-text-layer') ||\n                target.classList.contains('e-pv-text'))) {\n                isDesignerMode = true;\n            }\n        }\n        this.designerModetarget = target;\n        return isDesignerMode;\n    };\n    PdfViewerBase.prototype.handleTaps = function (touchPoints, event) {\n        var _this = this;\n        //EJ2CORE-813 - Implemented focus removing logic for iOS devices\n        if (this.isDeviceiOS) {\n            var obj = findActiveElement(event, this, this.pdfViewer);\n            // eslint-disable-next-line\n            var isRemoveFocus_1 = (!isNullOrUndefined(this.pdfViewer.annotation) && !isNullOrUndefined(this.pdfViewer.annotation.freeTextAnnotationModule) && !this.pdfViewer.annotation.freeTextAnnotationModule.isNewFreeTextAnnot) && (obj && this.pdfViewer.selectedItems.annotations[0] ? obj.id !== this.pdfViewer.selectedItems.annotations[0].id : true) && document.activeElement.classList.contains('free-text-input') && this.isFreeTextAnnotation(this.pdfViewer.selectedItems.annotations);\n            if (!this.singleTapTimer) {\n                this.singleTapTimer = setTimeout(function () {\n                    if (isRemoveFocus_1) {\n                        _this.pdfViewer.clearSelection(_this.pdfViewer.selectedItems.annotations[0].pageIndex);\n                        _this.focusViewerContainer(true);\n                    }\n                    _this.onSingleTap(touchPoints);\n                    // eslint-disable-next-line\n                }, 300);\n                this.tapCount++;\n            }\n            else {\n                if (this.pdfViewer.enablePinchZoom) {\n                    this.tapCount++;\n                    if (this.tapCount > 2) {\n                        this.tapCount = 2;\n                    }\n                    clearTimeout(this.singleTapTimer);\n                    this.singleTapTimer = null;\n                    this.onDoubleTap(touchPoints);\n                }\n            }\n        }\n        else {\n            if (!this.singleTapTimer) {\n                this.singleTapTimer = setTimeout(function () {\n                    _this.onSingleTap(touchPoints);\n                    // eslint-disable-next-line\n                }, 300);\n                this.tapCount++;\n            }\n            else {\n                if (this.pdfViewer.enablePinchZoom) {\n                    this.tapCount++;\n                    if (this.tapCount > 2) {\n                        this.tapCount = 2;\n                    }\n                    clearTimeout(this.singleTapTimer);\n                    this.singleTapTimer = null;\n                    this.onDoubleTap(touchPoints);\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.handleTextBoxTaps = function (touchPoints) {\n        var _this = this;\n        setTimeout(function () {\n            _this.inputTapCount = 0;\n        }, 300);\n        this.inputTapCount++;\n        //EJ2CORE-813 - Removing timer function for iOS Devices\n        if (this.isDeviceiOS) {\n            // eslint-disable-next-line\n            this.onTextBoxDoubleTap(touchPoints);\n        }\n        else {\n            var timer = setTimeout(function () {\n                _this.onTextBoxDoubleTap(touchPoints);\n            }, 200);\n        }\n        if (this.inputTapCount > 2) {\n            this.inputTapCount = 0;\n        }\n    };\n    PdfViewerBase.prototype.onTextBoxDoubleTap = function (touches) {\n        var target = touches[0].target;\n        if (this.inputTapCount === 2) {\n            if (this.pdfViewer.selectedItems.annotations.length !== 0) {\n                if (this.pdfViewer.annotationModule) {\n                    var currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n                    //EJ2CORE-813 - Removing focus from all active free text elements before focusing on free text annotation on iOS devices\n                    if (this.isDeviceiOS && document.activeElement.classList.contains('free-text-input') && (this.isFreeTextAnnotation(this.pdfViewer.selectedItems.annotations))) {\n                        this.focusViewerContainer(true);\n                    }\n                    this.pdfViewer.annotationModule.annotationSelect(currentAnnotation.annotName, currentAnnotation.pageIndex, currentAnnotation, null, true);\n                }\n                if (this.isFreeTextAnnotation(this.pdfViewer.selectedItems.annotations) && !(this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus)) {\n                    var elmtPosition = {};\n                    elmtPosition.x = this.pdfViewer.selectedItems.annotations[0].bounds.x;\n                    elmtPosition.y = this.pdfViewer.selectedItems.annotations[0].bounds.y;\n                    var targetAnnotation = void 0;\n                    if (this.pdfViewer.selectedItems.annotations[0].id == 'diagram_helper') {\n                        targetAnnotation = this.pdfViewer.nameTable[this.eventArgs.source.id];\n                    }\n                    else {\n                        targetAnnotation = this.pdfViewer.selectedItems.annotations[0];\n                    }\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.annotation.freeTextAnnotationModule.addInuptElemet(elmtPosition, targetAnnotation);\n                }\n                else if (this.pdfViewer.selectedItems.annotations[0] && this.pdfViewer.selectedItems.annotations[0].enableShapeLabel && !(this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus)) {\n                    var elmtPosition = {};\n                    elmtPosition.x = this.pdfViewer.selectedItems.annotations[0].bounds.x;\n                    elmtPosition.y = this.pdfViewer.selectedItems.annotations[0].bounds.y;\n                    this.pdfViewer.annotation.inputElementModule.editLabel(elmtPosition, this.pdfViewer.selectedItems.annotations[0]);\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.onSingleTap = function (touches) {\n        var target = touches[0].target;\n        var isFormfields = false;\n        this.singleTapTimer = null;\n        if (target && (target.classList.contains('e-pdfviewer-formFields')\n            || target.classList.contains('e-pdfviewer-ListBox') || target.classList.contains('e-pdfviewer-signatureformfields'))) {\n            isFormfields = true;\n        }\n        if (!this.isLongTouchPropagated && !this.navigationPane.isNavigationToolbarVisible && !isFormfields) {\n            if (this.pdfViewer.toolbarModule) {\n                if ((this.touchClientX >= touches[0].clientX - 10) && (this.touchClientX <= touches[0].clientX + 10) &&\n                    (this.touchClientY >= touches[0].clientY - 10) && (this.touchClientY <= touches[0].clientY + 10)) {\n                    if (!this.isTapHidden) {\n                        if (isBlazor()) {\n                            // eslint-disable-next-line max-len\n                            this.viewerContainer.scrollTop -= this.pdfViewer.element.querySelector('.e-pv-mobile-toolbar').clientHeight * this.getZoomFactor();\n                        }\n                        if (this.pdfViewer.toolbar.moreDropDown) {\n                            var dropDown = this.getElement('_more_option-popup');\n                            if (dropDown.firstElementChild) {\n                                dropDown.classList.remove('e-popup-open');\n                                dropDown.classList.add('e-popup-close');\n                                dropDown.removeChild(dropDown.firstElementChild);\n                            }\n                        }\n                    }\n                    else {\n                        if (isBlazor()) {\n                            // eslint-disable-next-line max-len\n                            this.viewerContainer.scrollTop += this.pdfViewer.element.querySelector('.e-pv-mobile-toolbar').clientHeight * this.getZoomFactor();\n                        }\n                    }\n                    if (this.isTapHidden && (Browser.isDevice && !this.pdfViewer.enableDesktopMode)) {\n                        this.mobileScrollerContainer.style.display = '';\n                        this.updateMobileScrollerPosition();\n                        // eslint-disable-next-line max-len\n                    }\n                    else if ((Browser.isDevice && !this.pdfViewer.enableDesktopMode) && this.getSelectTextMarkupCurrentPage() == null) {\n                        this.mobileScrollerContainer.style.display = 'none';\n                    }\n                    if (this.getSelectTextMarkupCurrentPage() == null) {\n                        if (!isBlazor()) {\n                            if (this.pdfViewer.enableToolbar) {\n                                this.pdfViewer.toolbarModule.showToolbar(true);\n                            }\n                        }\n                        else {\n                            //this.pdfViewer._dotnetInstance.invokeMethodAsync('TapOnMobileDevice', this.isTapHidden);\n                            this.blazorUIAdaptor.tapOnMobileDevice(this.isTapHidden);\n                        }\n                        this.isTapHidden = !this.isTapHidden;\n                    }\n                }\n                this.tapCount = 0;\n            }\n        }\n    };\n    PdfViewerBase.prototype.onDoubleTap = function (touches) {\n        var target = touches[0].target;\n        var isFormfields = false;\n        if (target && (target.classList.contains('e-pdfviewer-formFields')\n            || target.classList.contains('e-pdfviewer-ListBox') || target.classList.contains('e-pdfviewer-signatureformfields'))) {\n            isFormfields = true;\n        }\n        if (this.tapCount === 2 && !isFormfields) {\n            this.tapCount = 0;\n            /**\n             * Sometimes the values gets differ by some decimal points. So converted the decimal points values to Integer values.\n             */\n            // eslint-disable-next-line\n            if ((this.touchClientX >= parseInt((touches[0].clientX - 10).toString())) && (this.touchClientX <= touches[0].clientX + 10) &&\n                (this.touchClientY >= touches[0].clientY - 10) && (this.touchClientY <= touches[0].clientY + 30)) {\n                if (this.pdfViewer.magnification && this.pdfViewer.selectedItems.annotations.length !== 1) {\n                    this.pdfViewer.magnification.onDoubleTapMagnification();\n                }\n                this.viewerContainer.style.height = this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height, this.toolbarHeight);\n                this.isTapHidden = false;\n                clearTimeout(this.singleTapTimer);\n                this.singleTapTimer = null;\n            }\n        }\n    };\n    PdfViewerBase.prototype.preventTouchEvent = function (event) {\n        if (this.pdfViewer.textSelectionModule) {\n            // eslint-disable-next-line max-len\n            if (!this.isPanMode && this.pdfViewer.enableTextSelection && !this.isTextSelectionDisabled && this.getSelectTextMarkupCurrentPage() == null) {\n                if (!(this.isWebkitMobile && (Browser.isDevice && !this.pdfViewer.enableDesktopMode))) {\n                    event.preventDefault();\n                    event.stopPropagation();\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.renderStampAnnotation = function (event) {\n        if (this.pdfViewer.annotation) {\n            var zoomFactor = this.getZoomFactor();\n            var pageIndex = this.pdfViewer.annotation.getEventPageNumber(event);\n            var pageDiv = this.getElement('_pageDiv_' + pageIndex);\n            if (this.pdfViewer.enableStampAnnotations) {\n                var stampModule = this.pdfViewer.annotationModule.stampAnnotationModule;\n                if (stampModule && stampModule.isStampAnnotSelected) {\n                    if (pageDiv) {\n                        var pageCurrentRect = pageDiv.getBoundingClientRect();\n                        // eslint-disable-next-line max-len\n                        if (event.type === 'touchend' && this.pdfViewer.annotationModule.stampAnnotationModule.currentStampAnnotation.shapeAnnotationType === 'Image') {\n                            var currentStampObj = this.pdfViewer.annotationModule.stampAnnotationModule.currentStampAnnotation;\n                            currentStampObj.pageIndex = pageIndex;\n                            currentStampObj.bounds.x = (event.changedTouches[0].clientX - pageCurrentRect.left) / zoomFactor;\n                            currentStampObj.bounds.y = (event.changedTouches[0].clientY - pageCurrentRect.top) / zoomFactor;\n                            stampModule.updateDeleteItems(pageIndex, currentStampObj, currentStampObj.opacity);\n                            this.pdfViewer.add(currentStampObj);\n                            var canvas = document.getElementById(this.pdfViewer.element.id + '_annotationCanvas_' + pageIndex);\n                            this.pdfViewer.renderDrawing(canvas, pageIndex);\n                        }\n                        else {\n                            // eslint-disable-next-line max-len\n                            stampModule.renderStamp((event.changedTouches[0].clientX - pageCurrentRect.left) / zoomFactor, (event.changedTouches[0].clientY - pageCurrentRect.top) / zoomFactor, null, null, pageIndex, null, null, null, null);\n                        }\n                        stampModule.isStampAnnotSelected = false;\n                    }\n                }\n                this.pdfViewer.annotation.onAnnotationMouseDown();\n            }\n            if (this.pdfViewer.enableHandwrittenSignature && this.isSignatureAdded && pageDiv) {\n                var pageCurrentRect = pageDiv.getBoundingClientRect();\n                this.currentSignatureAnnot.pageIndex = pageIndex;\n                // eslint-disable-next-line max-len\n                this.signatureModule.renderSignature((event.changedTouches[0].clientX - pageCurrentRect.left) / zoomFactor, (event.changedTouches[0].clientY - pageCurrentRect.top) / zoomFactor);\n                this.isSignatureAdded = false;\n            }\n            if (event.touches.length === 1 && this.isTextMarkupAnnotationModule() && !this.getPopupNoteVisibleStatus()) {\n                this.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationTouchEnd(event);\n            }\n        }\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.initPageDiv = function (pageValues) {\n        if (!isBlazor()) {\n            if (this.pdfViewer.toolbarModule) {\n                this.pdfViewer.toolbarModule.updateTotalPage();\n            }\n        }\n        if ((Browser.isDevice && !this.pdfViewer.enableDesktopMode) && this.mobiletotalPageContainer) {\n            this.mobiletotalPageContainer.innerHTML = this.pageCount.toString();\n            this.pageNoContainer.innerHTML = '(1-' + this.pageCount.toString() + ')';\n        }\n        if (this.pageCount > 0) {\n            var topValue = 0;\n            var pageLimit = 0;\n            this.isMixedSizeDocument = false;\n            if (this.pageCount > 100) {\n                // to render 100 pages intially.\n                pageLimit = 100;\n                this.pageLimit = pageLimit;\n            }\n            else {\n                pageLimit = this.pageCount;\n            }\n            var isPortrait = false;\n            var isLandscape = false;\n            var differentPageSize = false;\n            for (var i = 0; i < pageLimit; i++) {\n                if (typeof pageValues.pageSizes[parseInt(i.toString(), 10)] !== 'object') {\n                    var pageSize = pageValues.pageSizes[parseInt(i.toString(), 10)].split(',');\n                    if (pageValues.pageSizes[i - 1] !== null && i !== 0) {\n                        var previousPageHeight = pageValues.pageSizes[i - 1].split(',');\n                        topValue = this.pageGap + parseFloat(previousPageHeight[1]) + topValue;\n                    }\n                    else {\n                        topValue = this.pageGap;\n                    }\n                    var size = { width: parseFloat(pageSize[0]), height: parseFloat(pageSize[1]), top: topValue };\n                    this.pageSize.push(size);\n                }\n                else {\n                    if (pageValues.pageSizes[i - 1] !== null && i !== 0) {\n                        // eslint-disable-next-line\n                        var previousPageHeight = pageValues.pageSizes[i - 1];\n                        topValue = this.pageGap + (parseFloat(previousPageHeight.height) ? parseFloat(previousPageHeight.height) : parseFloat(previousPageHeight.Height)) + topValue;\n                    }\n                    else {\n                        topValue = this.pageGap;\n                    }\n                    // eslint-disable-next-line max-len\n                    var size = { width: (pageValues.pageSizes[parseInt(i.toString(), 10)].width ? pageValues.pageSizes[parseInt(i.toString(), 10)].width : pageValues.pageSizes[parseInt(i.toString(), 10)].Width), height: (pageValues.pageSizes[parseInt(i.toString(), 10)].height ? pageValues.pageSizes[parseInt(i.toString(), 10)].height : pageValues.pageSizes[parseInt(i.toString(), 10)].Height), top: topValue, rotation: !isNullOrUndefined(pageValues.pageRotation) && pageValues.pageRotation.length > 0 ? pageValues.pageRotation[parseInt(i.toString(), 10)] : 0 };\n                    this.pageSize.push(size);\n                }\n                if (this.pageSize[parseInt(i.toString(), 10)].height > this.pageSize[parseInt(i.toString(), 10)].width) {\n                    isPortrait = true;\n                }\n                if (this.pageSize[parseInt(i.toString(), 10)].width > this.pageSize[parseInt(i.toString(), 10)].height) {\n                    isLandscape = true;\n                }\n                if (i > 0 && this.pageSize[parseInt(i.toString(), 10)].width !== this.pageSize[i - 1].width) {\n                    differentPageSize = true;\n                }\n                var pageWidth = this.pageSize[parseInt(i.toString(), 10)].width;\n                if (pageWidth > this.highestWidth) {\n                    this.highestWidth = pageWidth;\n                }\n                var pageHeight = this.pageSize[parseInt(i.toString(), 10)].height;\n                if (pageHeight > this.highestHeight) {\n                    this.highestHeight = pageHeight;\n                }\n            }\n            if ((isPortrait && isLandscape) || differentPageSize) {\n                this.isMixedSizeDocument = true;\n            }\n            var limit = void 0;\n            if (this.pdfViewer.initialRenderPages > 10) {\n                if (this.pdfViewer.initialRenderPages > 100) {\n                    limit = pageLimit;\n                }\n                else {\n                    limit = this.pdfViewer.initialRenderPages <= this.pageCount ? this.pdfViewer.initialRenderPages : this.pageCount;\n                }\n            }\n            else {\n                limit = this.pageCount < 10 ? this.pageCount : 10;\n            }\n            for (var i = 0; i < limit; i++) {\n                this.renderPageContainer(i, this.getPageWidth(i), this.getPageHeight(i), this.getPageTop(i));\n            }\n            // eslint-disable-next-line max-len\n            this.pageContainer.style.height = this.getPageTop(this.pageSize.length - 1) + this.getPageHeight(this.pageSize.length - 1) + 'px';\n            this.pageContainer.style.position = 'relative';\n            if (this.pageLimit === 100) {\n                var pageDiv = this.getElement('_pageDiv_' + this.pageLimit);\n                if (pageDiv === null && this.pageLimit < this.pageCount) {\n                    Promise.all([this.renderPagesVirtually()]);\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.renderElementsVirtualScroll = function (pageNumber) {\n        var lowerLimit = 1;\n        var higherLimit = 3;\n        if (this.pageStopValue <= 200) {\n            lowerLimit = 4;\n            higherLimit = 4;\n        }\n        else {\n            lowerLimit = 2;\n            higherLimit = 3;\n        }\n        var pageValue = pageNumber + lowerLimit;\n        if (pageValue > this.pageCount) {\n            pageValue = this.pageCount;\n        }\n        for (var i = pageNumber - 1; i <= pageValue; i++) {\n            if (i !== -1) {\n                this.renderPageElement(i);\n            }\n        }\n        var lowerPageValue = pageNumber - 3;\n        if (lowerPageValue < 0) {\n            lowerPageValue = 0;\n        }\n        for (var i = pageNumber - 1; i >= lowerPageValue; i--) {\n            if (i !== -1) {\n                this.renderPageElement(i);\n            }\n        }\n        for (var j = 0; j < this.pageCount; j++) {\n            if (!((lowerPageValue <= j) && (j <= pageValue))) {\n                var pageDiv = this.getElement('_pageDiv_' + j);\n                var pageCanvas = this.getElement('_pageCanvas_' + j);\n                var textLayer = this.getElement('_textLayer_' + j);\n                var initialLoadedPages = this.pdfViewer.initialRenderPages > this.pageRenderCount ? (this.pdfViewer.initialRenderPages <= this.pageCount) ? (this.pdfViewer.initialRenderPages - 1) : this.pageCount : -1;\n                if (pageCanvas && j > initialLoadedPages) {\n                    pageCanvas.parentNode.removeChild(pageCanvas);\n                    if (textLayer) {\n                        if (this.pdfViewer.textSelectionModule && textLayer.childNodes.length !== 0 && !this.isTextSelectionDisabled) {\n                            this.pdfViewer.textSelectionModule.maintainSelectionOnScroll(j, true);\n                        }\n                        textLayer.parentNode.removeChild(textLayer);\n                    }\n                    var indexInArray = this.renderedPagesList.indexOf(j);\n                    if (indexInArray !== -1) {\n                        this.renderedPagesList.splice(indexInArray, 1);\n                    }\n                }\n                if (pageDiv && j > initialLoadedPages) {\n                    pageDiv.parentNode.removeChild(pageDiv);\n                    var indexInArray = this.renderedPagesList.indexOf(j);\n                    if (indexInArray !== -1) {\n                        this.renderedPagesList.splice(indexInArray, 1);\n                    }\n                }\n            }\n        }\n        if (isBlazor())\n            this.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateCurrentPageNumber', this.currentPageNumber);\n    };\n    PdfViewerBase.prototype.renderPageElement = function (i) {\n        var pageDiv = this.getElement('_pageDiv_' + i);\n        var canvas = this.getElement('_pageCanvas_' + i);\n        if (canvas == null && pageDiv == null && i < this.pageSize.length) {\n            // eslint-disable-next-line\n            this.renderPageContainer(i, this.getPageWidth(i), this.getPageHeight(i), this.getPageTop(i));\n        }\n    };\n    PdfViewerBase.prototype.renderPagesVirtually = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var proxy;\n            var _this = this;\n            return __generator(this, function (_a) {\n                proxy = this;\n                setTimeout(function () {\n                    _this.initiateRenderPagesVirtually(proxy);\n                }, 500);\n                return [2 /*return*/];\n            });\n        });\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.initiateRenderPagesVirtually = function (proxy) {\n        var jsonObject = { hashId: proxy.hashId, isClientsideLoading: this.clientSideRendering, isCompletePageSizeNotReceived: true, action: 'VirtualLoad', elementId: proxy.pdfViewer.element.id, uniqueId: proxy.documentId, password: proxy.passwordData };\n        if (proxy.jsonDocumentId) {\n            // eslint-disable-next-line\n            jsonObject.documentId = proxy.jsonDocumentId;\n        }\n        this.virtualLoadRequestHandler = new AjaxHandler(this.pdfViewer);\n        this.virtualLoadRequestHandler.url = proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.load;\n        this.virtualLoadRequestHandler.responseType = 'json';\n        this.virtualLoadRequestHandler.mode = true;\n        if (this.clientSideRendering) {\n            var data = this.pdfViewer.pdfRendererModule.load(null, this.documentId, null, jsonObject);\n            this.viritualload(JSON.parse(data), this);\n        }\n        else {\n            this.virtualLoadRequestHandler.send(jsonObject);\n        }\n        // eslint-disable-next-line\n        this.virtualLoadRequestHandler.onSuccess = function (result) {\n            // eslint-disable-next-line\n            var data = result.data;\n            if (data) {\n                if (typeof data !== 'object') {\n                    try {\n                        data = JSON.parse(data);\n                    }\n                    catch (error) {\n                        proxy.onControlError(500, data, 'VirtualLoad');\n                    }\n                }\n            }\n            if (data) {\n                while (typeof data !== 'object') {\n                    data = JSON.parse(data);\n                }\n                proxy.viritualload(data, proxy);\n            }\n        };\n        // eslint-disable-next-line\n        this.virtualLoadRequestHandler.onFailure = function (result) {\n            proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText);\n        };\n        // eslint-disable-next-line\n        this.virtualLoadRequestHandler.onError = function (result) {\n            proxy.openNotificationPopup();\n            proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText);\n        };\n    };\n    PdfViewerBase.prototype.viritualload = function (data, proxy) {\n        if (proxy.documentId === data.uniqueId) {\n            proxy.pdfViewer.fireAjaxRequestSuccess('VirtualLoad', data);\n            // eslint-disable-next-line\n            var pageValues = data;\n            if (proxy.pageSize[proxy.pageLimit - 1]) {\n                var topValue = proxy.pageSize[proxy.pageLimit - 1].top;\n                for (var i_1 = proxy.pageLimit; i_1 < proxy.pageCount; i_1++) {\n                    if (typeof (pageValues.pageSizes[parseInt(i_1.toString(), 10)]) !== 'object') {\n                        var pageSize = pageValues.pageSizes[parseInt(i_1.toString(), 10)].split(',');\n                        if (proxy.pageSize[i_1 - 1] !== null && i_1 !== 0) {\n                            var previousPageHeight = proxy.pageSize[i_1 - 1].height;\n                            topValue = proxy.pageGap + parseFloat(previousPageHeight) + topValue;\n                        }\n                        var size = { width: parseFloat(pageSize[0]), height: parseFloat(pageSize[1]), top: topValue };\n                        proxy.pageSize.push(size);\n                    }\n                    else {\n                        if (proxy.pageSize[i_1 - 1] !== null && i_1 !== 0) {\n                            var previousPageHeight = proxy.pageSize[i_1 - 1].height;\n                            topValue = proxy.pageGap + parseFloat(previousPageHeight) + topValue;\n                        }\n                        // eslint-disable-next-line max-len\n                        var size = { width: (parseFloat(pageValues.pageSizes[parseInt(i_1.toString(), 10)].width) ? parseFloat(pageValues.pageSizes[parseInt(i_1.toString(), 10)].width) : parseFloat(pageValues.pageSizes[parseInt(i_1.toString(), 10)].Width)), height: (parseFloat(pageValues.pageSizes[parseInt(i_1.toString(), 10)].height) ? parseFloat(pageValues.pageSizes[parseInt(i_1.toString(), 10)].height) : parseFloat(pageValues.pageSizes[parseInt(i_1.toString(), 10)].Height)), top: topValue, rotation: pageValues.pageRotation[parseInt(i_1.toString(), 10)] };\n                        proxy.pageSize.push(size);\n                    }\n                }\n                // eslint-disable-next-line max-len\n                proxy.pageContainer.style.height = proxy.getPageTop(proxy.pageSize.length - 1) + proxy.getPageHeight(proxy.pageSize.length - 1) + 'px';\n                // eslint-disable-next-line\n                var pageData = window.sessionStorage.getItem(proxy.documentId + '_pagedata');\n                if (proxy.pageCount > 100) {\n                    if (this.pdfViewer.initialRenderPages > 100) {\n                        var limit = this.pdfViewer.initialRenderPages <= proxy.pageCount ? this.pdfViewer.initialRenderPages : proxy.pageCount;\n                        for (var i = 100; i < limit; i++) {\n                            proxy.renderPageContainer(i, proxy.getPageWidth(i), proxy.getPageHeight(i), proxy.getPageTop(i));\n                            proxy.createRequestForRender(i);\n                        }\n                    }\n                    proxy.pdfViewer.fireDocumentLoad(pageData);\n                    var linkAnnotationModule = proxy.pdfViewer.linkAnnotationModule;\n                    if (linkAnnotationModule && linkAnnotationModule.linkAnnotation && linkAnnotationModule.linkAnnotation.length > 0 && linkAnnotationModule.linkPage.length > 0) {\n                        linkAnnotationModule.renderDocumentLink(linkAnnotationModule.linkAnnotation, linkAnnotationModule.linkPage, linkAnnotationModule.annotationY, proxy.currentPageNumber - 1);\n                    }\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.tileRenderPage = function (data, pageIndex) {\n        var _this = this;\n        var proxy = null;\n        proxy = this;\n        if (data && this.pageSize[parseInt(pageIndex.toString(), 10)]) {\n            var pageWidth = this.getPageWidth(pageIndex);\n            var pageHeight = this.getPageHeight(pageIndex);\n            // eslint-disable-next-line max-len\n            var canvas_1 = this.getElement('_pageCanvas_' + pageIndex);\n            var pageDiv_1 = this.getElement('_pageDiv_' + pageIndex);\n            var tileX = data.tileX ? data.tileX : 0;\n            var tileY = data.tileY ? data.tileY : 0;\n            if (pageDiv_1) {\n                pageDiv_1.style.width = pageWidth + 'px';\n                pageDiv_1.style.height = pageHeight + 'px';\n                pageDiv_1.style.background = '#fff';\n                pageDiv_1.style.top = this.getPageTop(pageIndex) + 'px';\n                if (this.pdfViewer.enableRtl) {\n                    pageDiv_1.style.right = this.updateLeftPosition(pageIndex) + 'px';\n                }\n                else {\n                    pageDiv_1.style.left = this.updateLeftPosition(pageIndex) + 'px';\n                }\n            }\n            if (canvas_1) {\n                canvas_1.style.background = '#fff';\n            }\n            var imageData = data['image'];\n            var zoomFactor = this.retrieveCurrentZoomFactor();\n            var oldCanvases = document.querySelectorAll('img[id*=\"' + proxy.pdfViewer.element.id + '_tileimg_' + pageIndex + '_\"]');\n            if (oldCanvases.length === 0) {\n                this.isReRenderRequired = true;\n            }\n            if (this.isReRenderRequired) {\n                if (data.zoomFactor) {\n                    zoomFactor = data.zoomFactor;\n                }\n                var currentString = this.documentId + '_' + pageIndex + '_' + zoomFactor + '_' + data.tileX + '_' + data.tileY;\n                // eslint-disable-next-line max-len\n                this.tilerequestLists.push(currentString);\n                // eslint-disable-next-line\n                var matrix = data['transformationMatrix'];\n                // eslint-disable-next-line\n                var width = data['width'];\n                if (imageData) {\n                    var tileX_1 = data.tileX ? data.tileX : 0;\n                    var tileY_1 = data.tileY ? data.tileY : 0;\n                    var scaleFactor = (!isNullOrUndefined(data.scaleFactor)) ? data.scaleFactor : 1.5;\n                    var image_1 = document.getElementById(this.pdfViewer.element.id + '_tileimg_' + pageIndex + '_' + this.getZoomFactor() + '_' + tileX_1 + '_' + tileY_1);\n                    if (!image_1) {\n                        image_1 = new Image();\n                        image_1.id = this.pdfViewer.element.id + '_tileimg_' + pageIndex + '_' + this.getZoomFactor() + '_' + tileX_1 + '_' + tileY_1;\n                        if (pageDiv_1) {\n                            pageDiv_1.append(image_1);\n                        }\n                    }\n                    image_1.src = imageData;\n                    image_1.setAttribute('alt', '');\n                    image_1.onload = function () {\n                        proxy.showPageLoadingIndicator(pageIndex, false);\n                        proxy.tileRenderCount = proxy.tileRenderCount + 1;\n                        if ((tileX_1 === 0) && (tileY_1 === 0)) {\n                            if (pageIndex === 0 && _this.isDocumentLoaded) {\n                                proxy.renderPDFInformations();\n                                proxy.isInitialLoaded = true;\n                                // eslint-disable-next-line\n                                var pageData = window.sessionStorage.getItem(proxy.documentId + '_pagedata');\n                                if (proxy.pageCount <= 100) {\n                                    proxy.pdfViewer.fireDocumentLoad(pageData);\n                                }\n                                proxy.isDocumentLoaded = false;\n                                if (proxy.pdfViewer.textSearch && proxy.pdfViewer.isExtractText) {\n                                    proxy.pdfViewer.textSearchModule.getPDFDocumentTexts();\n                                }\n                            }\n                        }\n                        if (proxy.tileRenderCount === proxy.tileRequestCount) {\n                            if (proxy.isTextMarkupAnnotationModule()) {\n                                proxy.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotations(pageIndex);\n                            }\n                            if (canvas_1) {\n                                canvas_1.style.display = 'none';\n                                canvas_1.src = '#';\n                            }\n                            var oldPageDiv = document.querySelectorAll('img[id*=\"' + proxy.pdfViewer.element.id + '_oldCanvas\"]');\n                            for (var i = 0; i < oldPageDiv.length; i++) {\n                                pageDiv_1.removeChild(oldPageDiv[parseInt(i.toString(), 10)]);\n                            }\n                            proxy.isTileImageRendered = false;\n                            proxy.tileRenderCount = 0;\n                            if (proxy.pdfViewer.magnificationModule) {\n                                proxy.pdfViewer.magnificationModule.rerenderCountIncrement();\n                            }\n                            proxy.isDrawnCompletely = true;\n                        }\n                        image_1.setAttribute('alt', 'Page ' + (pageIndex + 1));\n                    };\n                    var currentImageWidth = (((width * this.getZoomFactor()) / zoomFactor) / scaleFactor);\n                    var matrixElements = matrix.Elements ? matrix.Elements : matrix.Values;\n                    var currentImageTop = (((matrixElements[5] * this.getZoomFactor()) / zoomFactor) / scaleFactor);\n                    var currentImageLeft = (((matrixElements[4] * this.getZoomFactor()) / zoomFactor) / scaleFactor);\n                    image_1.width = currentImageWidth;\n                    image_1.style.width = currentImageWidth + 'px';\n                    image_1.style.top = currentImageTop + 'px';\n                    image_1.style.left = currentImageLeft + 'px';\n                    image_1.style.position = 'absolute';\n                }\n                if ((tileX === 0) && (tileY === 0)) {\n                    this.onPageRender(data, pageIndex, pageDiv_1);\n                }\n            }\n            else {\n                var _loop_1 = function (l) {\n                    var tileImgId = oldCanvases[parseInt(l.toString(), 10)].id.split('_');\n                    var zoomFactor_1 = proxy.retrieveCurrentZoomFactor();\n                    var tileData = void 0;\n                    // eslint-disable-next-line\n                    if (this_1.clientSideRendering) {\n                        tileData = JSON.parse(proxy.getStoredTileImageDetails(pageIndex, parseFloat(tileImgId[tileImgId.length - 2]), parseFloat(tileImgId[tileImgId.length - 1]), zoomFactor_1));\n                    }\n                    else {\n                        tileData = JSON.parse(proxy.getWindowSessionStorageTile(pageIndex, parseFloat(tileImgId[tileImgId.length - 2]), parseFloat(tileImgId[tileImgId.length - 1]), zoomFactor_1));\n                    }\n                    if (tileData && tileData.zoomFactor) {\n                        zoomFactor_1 = tileData.zoomFactor;\n                    }\n                    if (parseFloat(tileImgId[tileImgId.length - 4]) === pageIndex) {\n                        var node_1 = oldCanvases[parseInt(l.toString(), 10)];\n                        // Make sure it's really an Element\n                        if (node_1.nodeType == Node.ELEMENT_NODE) {\n                            node_1.onload = function () {\n                                proxy.showPageLoadingIndicator(pageIndex, false);\n                                proxy.tileRenderCount = proxy.tileRenderCount + 1;\n                                if ((tileX_2 === 0) && (tileY_2 === 0)) {\n                                    if (pageIndex === 0 && _this.isDocumentLoaded) {\n                                        _this.renderPDFInformations();\n                                        _this.isInitialLoaded = true;\n                                        // eslint-disable-next-line\n                                        var pageData = window.sessionStorage.getItem(proxy.documentId + '_pagedata');\n                                        if (proxy.pageCount <= 100) {\n                                            proxy.pdfViewer.fireDocumentLoad(pageData);\n                                        }\n                                        proxy.isDocumentLoaded = false;\n                                        if (proxy.pdfViewer.textSearch && proxy.pdfViewer.isExtractText) {\n                                            proxy.pdfViewer.textSearchModule.getPDFDocumentTexts();\n                                        }\n                                    }\n                                }\n                                if (proxy.tileRenderCount === proxy.tileRequestCount) {\n                                    canvas_1.style.display = 'none';\n                                    canvas_1.src = '#';\n                                    if (proxy.isTextMarkupAnnotationModule()) {\n                                        proxy.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotations(pageIndex);\n                                    }\n                                    var oldPageDiv = document.querySelectorAll('img[id*=\"' + proxy.pdfViewer.element.id + '_oldCanvas\"]');\n                                    for (var i = 0; i < oldPageDiv.length; i++) {\n                                        pageDiv_1.removeChild(oldPageDiv[parseInt(i.toString(), 10)]);\n                                    }\n                                    proxy.isTileImageRendered = false;\n                                    proxy.tileRenderCount = 0;\n                                    if (proxy.pdfViewer.magnificationModule) {\n                                        proxy.pdfViewer.magnificationModule.rerenderCountIncrement();\n                                    }\n                                    proxy.isDrawnCompletely = true;\n                                }\n                                node_1.setAttribute('alt', 'Page ' + (pageIndex + 1));\n                            };\n                            if (tileData)\n                                node_1.src = tileData.image;\n                        }\n                    }\n                };\n                var this_1 = this;\n                for (var l = 0; l < oldCanvases.length; l++) {\n                    _loop_1(l);\n                }\n                var tileX_2 = data.tileX ? data.tileX : 0;\n                var tileY_2 = data.tileY ? data.tileY : 0;\n                if ((tileX_2 === 0) && (tileY_2 === 0)) {\n                    this.onPageRender(data, pageIndex, pageDiv_1);\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.renderTileCanvas = function (pageWidth, pageHeight, pageIndex, pageDiv, zoomFactor, scaleFactor) {\n        var pageCanvas = this.getElement('_pageTileCanvas_' + pageIndex);\n        if (!pageCanvas) {\n            pageCanvas = createElement('canvas', { id: this.pdfViewer.element.id + '_pageTileCanvas_' + pageIndex, className: 'e-pv-pageTile-canvas' });\n            pageCanvas.style.width = pageWidth + 'px';\n            pageCanvas.style.height = pageHeight + 'px';\n            pageCanvas.style.display = 'none';\n            pageCanvas.style.backgroundColor = '#fff';\n            if (this.isMixedSizeDocument && this.highestWidth > 0) {\n                pageCanvas.style.marginLeft = 'auto';\n                pageCanvas.style.marginRight = 'auto';\n            }\n            pageDiv.appendChild(pageCanvas);\n        }\n        return pageCanvas;\n    };\n    PdfViewerBase.prototype.calculateImageWidth = function (pageWidth, zoomFactor, scaleFactor, imageWidth) {\n        var width = (pageWidth / this.getZoomFactor()) * zoomFactor * scaleFactor;\n        // eslint-disable-next-line\n        if ((parseInt(imageWidth.toString())) === (parseInt(width.toString()))) {\n            imageWidth = width;\n        }\n        imageWidth = ((imageWidth * this.getZoomFactor()) / zoomFactor);\n        return imageWidth;\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.renderPage = function (data, pageIndex, imageSource) {\n        var _this = this;\n        var proxy = this;\n        if (data && this.pageSize[parseInt(pageIndex.toString(), 10)]) {\n            var pageWidth = this.getPageWidth(pageIndex);\n            var pageHeight = this.getPageHeight(pageIndex);\n            // eslint-disable-next-line max-len\n            var canvas_2 = this.getElement('_pageCanvas_' + pageIndex);\n            var pageDiv_2 = this.getElement('_pageDiv_' + pageIndex);\n            if (pageDiv_2) {\n                pageDiv_2.style.width = pageWidth + 'px';\n                pageDiv_2.style.height = pageHeight + 'px';\n                pageDiv_2.style.top = this.getPageTop(pageIndex) + 'px';\n                if (this.pdfViewer.enableRtl) {\n                    pageDiv_2.style.right = this.updateLeftPosition(pageIndex) + 'px';\n                }\n                else {\n                    pageDiv_2.style.left = this.updateLeftPosition(pageIndex) + 'px';\n                }\n            }\n            if (canvas_2) {\n                canvas_2.style.background = '#fff';\n                canvas_2.style.display = 'block';\n                canvas_2.style.width = pageWidth + 'px';\n                canvas_2.style.height = pageHeight + 'px';\n                if (pageWidth < parseFloat(pageDiv_2.style.width)) {\n                    pageDiv_2.style.boxShadow = 'none';\n                }\n                // eslint-disable-next-line\n                var imageData = (this.renderThumbnailImages && !this.clientSideRendering) ? imageSource : data['image'];\n                if (imageData) {\n                    canvas_2.onload = function () {\n                        var oldCanvases = document.querySelectorAll('img[id*=\"' + proxy.pdfViewer.element.id + '_tileimg_\"]');\n                        var pageCanvas = proxy.getElement('_pageDiv_' + pageIndex);\n                        for (var i = 0; i < oldCanvases.length; i++) {\n                            var tileImgId = oldCanvases[parseInt(i.toString(), 10)].id.split('_');\n                            if (parseFloat(tileImgId[tileImgId.length - 3]) != proxy.getZoomFactor()) {\n                                if (pageIndex !== parseInt(tileImgId[tileImgId.length - 4], 10)) {\n                                    proxy.getElement('_pageDiv_' + tileImgId[tileImgId.length - 4]).removeChild(oldCanvases[parseInt(i.toString(), 10)]);\n                                }\n                                else {\n                                    pageCanvas.removeChild(oldCanvases[parseInt(i.toString(), 10)]);\n                                }\n                            }\n                        }\n                        var oldPageDiv = document.querySelectorAll('img[id*=\"' + proxy.pdfViewer.element.id + '_oldCanvas\"]');\n                        for (var i = 0; i < oldPageDiv.length; i++) {\n                            pageDiv_2.removeChild(oldPageDiv[parseInt(i.toString(), 10)]);\n                        }\n                        if (_this.pdfViewer.magnificationModule) {\n                            _this.pdfViewer.magnificationModule.rerenderCountIncrement();\n                        }\n                        _this.showPageLoadingIndicator(pageIndex, false);\n                        if (pageIndex === 0 && _this.isDocumentLoaded) {\n                            _this.renderPDFInformations();\n                            _this.isInitialLoaded = true;\n                            // eslint-disable-next-line\n                            var pageData = window.sessionStorage.getItem(_this.documentId + '_pagedata');\n                            if (_this.pageCount <= 100) {\n                                _this.pdfViewer.fireDocumentLoad(pageData);\n                            }\n                            _this.isDocumentLoaded = false;\n                            if (_this.pdfViewer.textSearch && _this.pdfViewer.isExtractText) {\n                                _this.pdfViewer.textSearchModule.getPDFDocumentTexts();\n                            }\n                        }\n                        if (_this.pdfViewer.magnificationModule) {\n                            _this.pdfViewer.magnificationModule.pushImageObjects(canvas_2);\n                        }\n                        canvas_2.setAttribute('alt', 'Page ' + (pageIndex + 1));\n                    };\n                    canvas_2.src = imageData;\n                }\n                this.onPageRender(data, pageIndex, pageDiv_2);\n            }\n        }\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.onPageRender = function (data, pageIndex, pageDiv) {\n        // eslint-disable-next-line\n        var aElement = pageDiv && pageDiv.getElementsByTagName('a');\n        var isAnnotationRendered = false;\n        if (aElement && aElement.length !== 0) {\n            for (var index = aElement.length - 1; index >= 0; index--) {\n                aElement[parseInt(index.toString(), 10)].parentNode.removeChild(aElement[parseInt(index.toString(), 10)]);\n            }\n        }\n        if (this.pdfViewer.textSearchModule || this.pdfViewer.textSelectionModule || this.pdfViewer.annotationModule) {\n            this.renderTextContent(data, pageIndex);\n        }\n        if (this.pdfViewer.formFieldsModule && !(this.pdfViewer.magnificationModule ? this.pdfViewer.magnificationModule.isFormFieldPageZoomed : false)) {\n            this.pdfViewer.formFieldsModule.renderFormFields(pageIndex, false);\n        }\n        if (this.pdfViewer.accessibilityTagsModule && this.pdfViewer.enableAccessibilityTags && this.isTaggedPdf) {\n            if (this.accessibilityTagsCollection[pageIndex.toString()]) {\n                this.renderAccessibilityTags(pageIndex, this.accessibilityTagsCollection[pageIndex.toString()]);\n            }\n            else if (this.pageRequestListForAccessibilityTags.indexOf(pageIndex) === -1) {\n                this.createRequestForAccessibilityTags(pageIndex);\n            }\n        }\n        if (this.pdfViewer.formDesignerModule && !this.isDocumentLoaded) {\n            this.pdfViewer.formDesignerModule.rerenderFormFields(pageIndex);\n        }\n        if (this.pdfViewer.formFieldsModule && !this.isDocumentLoaded && !this.pdfViewer.formDesignerModule) {\n            this.pdfViewer.formFieldsModule.renderFormFields(pageIndex, false);\n        }\n        if (this.pdfViewer.formDesignerModule && this.isDocumentLoaded && (this.pdfViewer.magnificationModule ? this.pdfViewer.magnificationModule.isFormFieldPageZoomed : true) && this.pdfViewer.formFieldsModule) {\n            this.pdfViewer.formFieldsModule.renderFormFields(pageIndex, false);\n            if (this.pdfViewer.magnificationModule) {\n                this.pdfViewer.magnificationModule.isFormFieldPageZoomed = false;\n            }\n        }\n        if (this.pdfViewer.enableHyperlink && this.pdfViewer.linkAnnotationModule) {\n            this.pdfViewer.linkAnnotationModule.renderHyperlinkContent(data, pageIndex);\n        }\n        if (this.pdfViewer.textSelectionModule && !this.isTextSelectionDisabled) {\n            this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(pageIndex);\n        }\n        if (this.documentAnnotationCollections) {\n            var isAnnotationAdded = false;\n            for (var i = 0; i < this.annotationRenderredList.length; i++) {\n                if (this.annotationRenderredList[parseInt(i.toString(), 10)] === pageIndex) {\n                    isAnnotationAdded = true;\n                }\n            }\n            // eslint-disable-next-line\n            var pageAnnotations = this.documentAnnotationCollections[pageIndex];\n            if (pageAnnotations && !isAnnotationAdded) {\n                data.shapeAnnotation = pageAnnotations.shapeAnnotation;\n                data.measureShapeAnnotation = pageAnnotations.measureShapeAnnotation;\n                data.textMarkupAnnotation = pageAnnotations.textMarkupAnnotation;\n                data.freeTextAnnotation = pageAnnotations.freeTextAnnotation;\n                data.stampAnnotations = pageAnnotations.stampAnnotations;\n                data.stickyNotesAnnotation = pageAnnotations.stickyNotesAnnotation;\n                data.signatureAnnotation = pageAnnotations.signatureAnnotation;\n                data.signatureInkAnnotation = pageAnnotations.signatureInkAnnotation;\n                this.annotationRenderredList.push(pageIndex);\n            }\n        }\n        if (this.isImportAction) {\n            // eslint-disable-next-line\n            var pageAnnotations = this.checkDocumentCollectionData(pageIndex);\n            this.drawPageAnnotations(this.importedAnnotation[parseInt(pageIndex.toString(), 10)], pageIndex);\n            if (pageAnnotations) {\n                data.shapeAnnotation = pageAnnotations.shapeAnnotation;\n                data.measureShapeAnnotation = pageAnnotations.measureShapeAnnotation;\n                data.textMarkupAnnotation = pageAnnotations.textMarkupAnnotation;\n                data.freeTextAnnotation = pageAnnotations.freeTextAnnotation;\n                data.stampAnnotations = pageAnnotations.stampAnnotations;\n                data.stickyNotesAnnotation = pageAnnotations.stickyNotesAnnotation;\n                data.signatureInkAnnotation = pageAnnotations.signatureInkAnnotation;\n                isAnnotationRendered = true;\n            }\n        }\n        if (!(this.isImportAction)) {\n            if (this.pdfViewer.annotationModule && (this.isTextMarkupAnnotationModule() || this.isShapeBasedAnnotationsEnabled())) {\n                if (this.isStampAnnotationModule()) {\n                    // eslint-disable-next-line\n                    var stampData = data['stampAnnotations'];\n                    if (isAnnotationRendered) {\n                        // eslint-disable-next-line max-len\n                        this.pdfViewer.annotationModule.stampAnnotationModule.renderStampAnnotations(stampData, pageIndex, null, true);\n                    }\n                    else {\n                        // eslint-disable-next-line max-len\n                        this.pdfViewer.annotationModule.stampAnnotationModule.renderStampAnnotations(stampData, pageIndex);\n                    }\n                }\n                if (isAnnotationRendered) {\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.annotationModule.renderAnnotations(pageIndex, data.shapeAnnotation, data.measureShapeAnnotation, data.textMarkupAnnotation, null, true);\n                }\n                else {\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.annotationModule.renderAnnotations(pageIndex, data.shapeAnnotation, data.measureShapeAnnotation, data.textMarkupAnnotation);\n                }\n                this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderStickyNotesAnnotations(data.stickyNotesAnnotation, pageIndex);\n            }\n            if (this.isFreeTextAnnotationModule() && data.freeTextAnnotation) {\n                if (isAnnotationRendered) {\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.annotationModule.freeTextAnnotationModule.renderFreeTextAnnotations(data.freeTextAnnotation, pageIndex);\n                }\n                else {\n                    this.pdfViewer.annotationModule.freeTextAnnotationModule.renderFreeTextAnnotations(data.freeTextAnnotation, pageIndex);\n                }\n            }\n            if (this.isInkAnnotationModule() && data && data.signatureInkAnnotation) {\n                // eslint-disable-next-line max-len\n                this.pdfViewer.annotationModule.inkAnnotationModule.renderExistingInkSignature(data.signatureInkAnnotation, pageIndex, isAnnotationRendered);\n            }\n        }\n        if (this.pdfViewer.formDesignerModule && !this.pdfViewer.annotationModule) {\n            this.pdfViewer.formDesignerModule.updateCanvas(pageIndex);\n        }\n        if (this.pdfViewer.textSearchModule) {\n            if (this.pdfViewer.textSearchModule.isTextSearch) {\n                this.pdfViewer.textSearchModule.highlightOtherOccurrences(pageIndex);\n            }\n        }\n        if (this.isShapeBasedAnnotationsEnabled()) {\n            var canvas1 = this.getElement('_annotationCanvas_' + pageIndex);\n            var commonStyle = 'position:absolute;top:0px;left:0px;overflow:hidden;pointer-events:none;z-index:1000';\n            if (canvas1) {\n                var bounds = canvas1.getBoundingClientRect();\n                renderAdornerLayer(bounds, commonStyle, canvas1, pageIndex, this.pdfViewer);\n                this.pdfViewer.renderSelector(pageIndex, this.pdfViewer.annotationSelectorSettings);\n            }\n        }\n        if (this.pdfViewer.annotationModule) {\n            this.pdfViewer.annotationModule.stickyNotesAnnotationModule.selectCommentsAnnotation(pageIndex);\n        }\n        if (data && data.signatureAnnotation && this.signatureModule) {\n            this.signatureModule.renderExistingSignature(data.signatureAnnotation, pageIndex, false);\n        }\n        // eslint-disable-next-line max-len\n        if (this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.isAnnotationSelected && this.pdfViewer.annotationModule.annotationPageIndex === pageIndex) {\n            this.pdfViewer.annotationModule.selectAnnotationFromCodeBehind();\n        }\n        this.isLoadedFormFieldAdded = false;\n    };\n    /**\n     * @private\n     * @param {number} pageIndex - page index for rendering the annotation.\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.renderAnnotations = function (pageIndex, annotationsCollection, isAddedProgrammatically) {\n        // eslint-disable-next-line\n        var data = {};\n        if (this.documentAnnotationCollections) {\n            var isAnnotationAdded = false;\n            for (var i = 0; i < this.annotationRenderredList.length; i++) {\n                if (this.annotationRenderredList[parseInt(i.toString(), 10)] === pageIndex) {\n                    isAnnotationAdded = true;\n                }\n            }\n            // eslint-disable-next-line\n            var pageAnnotations = this.documentAnnotationCollections[pageIndex];\n            if (pageAnnotations && !isAnnotationAdded) {\n                data.shapeAnnotation = pageAnnotations.shapeAnnotation;\n                data.measureShapeAnnotation = pageAnnotations.measureShapeAnnotation;\n                data.textMarkupAnnotation = pageAnnotations.textMarkupAnnotation;\n                data.freeTextAnnotation = pageAnnotations.freeTextAnnotation;\n                data.stampAnnotations = pageAnnotations.stampAnnotations;\n                data.stickyNotesAnnotation = pageAnnotations.stickyNotesAnnotation;\n                data.signatureAnnotation = pageAnnotations.signatureAnnotation;\n                data.signatureInkAnnotation = pageAnnotations.signatureInkAnnotation;\n                this.annotationRenderredList.push(pageIndex);\n            }\n        }\n        if (this.isAnnotationCollectionRemoved) {\n            data.shapeAnnotation = [];\n            data.measureShapeAnnotation = [];\n            data.textMarkupAnnotation = [];\n            data.freeTextAnnotation = [];\n            data.stampAnnotations = [];\n            data.stickyNotesAnnotation = [];\n            data.signatureInkAnnotation = [];\n        }\n        if (this.isImportAction) {\n            var isAnnotationAdded = false;\n            for (var i = 0; i < this.annotationPageList.length; i++) {\n                if (this.annotationPageList[parseInt(i.toString(), 10)] === pageIndex) {\n                    isAnnotationAdded = true;\n                }\n            }\n            if (!isAnnotationAdded) {\n                if (this.importedAnnotation) {\n                    this.drawPageAnnotations(this.importedAnnotation, pageIndex, true);\n                    this.annotationPageList[this.annotationPageList.length] = pageIndex;\n                }\n            }\n        }\n        var annotData = [];\n        var collection = annotationsCollection.annotationOrder;\n        if (!isNullOrUndefined(collection)) {\n            for (var l = 0; l < collection.length; l++) {\n                var type = collection[parseInt(l.toString(), 10)].AnnotType ? collection[parseInt(l.toString(), 10)].AnnotType : collection[parseInt(l.toString(), 10)].AnnotationType;\n                annotData.push(collection[parseInt(l.toString(), 10)]);\n                switch (type) {\n                    case \"textMarkup\":\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.renderTextMarkupAnnotationsInPage(annotData, pageIndex, null, true);\n                        break;\n                    case \"shape_measure\":\n                        this.pdfViewer.annotationModule.renderAnnotations(pageIndex, null, annotData, null, null, null, true);\n                        break;\n                    case \"shape\":\n                        this.pdfViewer.annotationModule.renderAnnotations(pageIndex, annotData, null, null, null, null, true);\n                        break;\n                    case \"sticky\":\n                        this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderStickyNotesAnnotations(annotData, pageIndex);\n                        break;\n                    case \"stamp\":\n                        this.pdfViewer.annotationModule.stampAnnotationModule.renderStampAnnotations(annotData, pageIndex, null, null, true);\n                        break;\n                    case \"Ink\":\n                        this.pdfViewer.annotationModule.inkAnnotationModule.renderExistingInkSignature(annotData, pageIndex, false, true);\n                        break;\n                    case \"Text Box\":\n                        this.pdfViewer.annotationModule.freeTextAnnotationModule.renderFreeTextAnnotations(annotData, pageIndex, undefined, true);\n                        break;\n                    default:\n                        break;\n                }\n                annotData = [];\n            }\n        }\n        if (data && data.signatureAnnotation) {\n            this.signatureModule.renderExistingSignature(data.signatureAnnotation, pageIndex, false);\n        }\n        if (this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.isAnnotationSelected) {\n            this.pdfViewer.annotationModule.selectAnnotationFromCodeBehind();\n        }\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.renderTextContent = function (data, pageIndex) {\n        // eslint-disable-next-line\n        var texts = data['textContent'];\n        // eslint-disable-next-line\n        var bounds = data['textBounds'];\n        // eslint-disable-next-line\n        var rotation = data['rotation'];\n        var rtldoc = data.documentTextCollection ? this.checkIsRtlText(data.documentTextCollection[0][parseInt(pageIndex.toString(), 10)].PageText) : this.checkIsRtlText(data.pageText);\n        var textLayer = this.getElement('_textLayer_' + pageIndex);\n        if (!textLayer) {\n            // eslint-disable-next-line max-len\n            textLayer = this.textLayer.addTextLayer(pageIndex, this.getPageWidth(pageIndex), this.getPageHeight(pageIndex), this.getElement('_pageDiv_' + pageIndex));\n        }\n        if (textLayer && texts && bounds) {\n            textLayer.style.display = 'block';\n            if (textLayer.childNodes.length === 0) {\n                this.textLayer.renderTextContents(pageIndex, texts, bounds, rotation, rtldoc);\n            }\n            else {\n                this.textLayer.resizeTextContents(pageIndex, texts, bounds, rotation, true);\n            }\n        }\n    };\n    PdfViewerBase.prototype.renderAccessibilityTags = function (pageIndex, taggedTextResponse) {\n        this.accessibilityTags.renderAccessibilityTags(pageIndex, taggedTextResponse);\n    };\n    PdfViewerBase.prototype.returnPageListForAccessibilityTags = function (pageIndex) {\n        var pageList = [];\n        if (!this.enableAccessibilityMultiPageRequest) {\n            return [pageIndex];\n        }\n        var minPage = pageIndex - 2 > 0 ? pageIndex - 2 : 0;\n        var maxPage = pageIndex + 4 < this.pageCount - 1 ? pageIndex + 4 : this.pageCount - 1;\n        for (var i = minPage; i <= maxPage; i++) {\n            if (this.accessibilityTagsCollection[parseInt(i.toString(), 10)] === undefined) {\n                pageList.push(parseInt(i.toString(), 10));\n            }\n            else {\n                maxPage = maxPage + 1 < this.pageCount - 1 ? maxPage + 1 : this.pageCount - 1;\n            }\n        }\n        this.pageRequestListForAccessibilityTags = pageList;\n        return pageList;\n    };\n    PdfViewerBase.prototype.createRequestForAccessibilityTags = function (pageIndex) {\n        var jsonObject;\n        var proxy = this;\n        jsonObject = { action: 'RenderTaggedContent', elementId: this.pdfViewer.element.id, hashId: this.hashId, uniqueId: this.documentId, pageList: JSON.stringify(this.returnPageListForAccessibilityTags(pageIndex)) };\n        if (this.jsonDocumentId) {\n            jsonObject.document = this.jsonDocumentId;\n        }\n        var url = this.pdfViewer.serviceUrl + '/' + \"RenderTaggedContent\";\n        this.accessibilityTagsHandler = new AjaxHandler(this.pdfViewer);\n        this.accessibilityTagsHandler.url = url;\n        this.accessibilityTagsHandler.mode = true;\n        this.accessibilityTagsHandler.responseType = 'text';\n        this.accessibilityTagsHandler.send(jsonObject);\n        this.accessibilityTagsHandler.onSuccess = function (result) {\n            var data = JSON.parse(result.data);\n            var pageData;\n            for (var i = 0; i < data.length; i++) {\n                pageData = data[parseInt(i.toString(), 10)];\n                proxy.accessibilityTagsCollection[pageData[0]] = pageData[1];\n            }\n            proxy.pageRequestListForAccessibilityTags = [];\n            if (proxy.accessibilityTagsCollection[parseInt(pageIndex.toString(), 10)]) {\n                proxy.renderAccessibilityTags(pageIndex, proxy.accessibilityTagsCollection[parseInt(pageIndex.toString(), 10)]);\n            }\n            if (proxy.accessibilityTagsCollection[pageIndex - 1 <= 0 ? parseInt((pageIndex - 1).toString(), 10) : 0]) {\n                proxy.renderAccessibilityTags(pageIndex - 1 <= 0 ? pageIndex - 1 : 0, proxy.accessibilityTagsCollection[pageIndex - 1 <= 0 ? parseInt((pageIndex - 1).toString(), 10) : 0]);\n            }\n        };\n    };\n    PdfViewerBase.prototype.renderPageContainer = function (pageNumber, pageWidth, pageHeight, topValue) {\n        // eslint-disable-next-line max-len\n        var pageDiv = createElement('div', { id: this.pdfViewer.element.id + '_pageDiv_' + pageNumber, className: 'e-pv-page-div', attrs: { 'tabindex': '-1' } });\n        pageDiv.style.width = pageWidth + 'px';\n        pageDiv.style.height = pageHeight + 'px';\n        if (this.pdfViewer.enableRtl) {\n            pageDiv.style.right = this.updateLeftPosition(pageNumber) + 'px';\n        }\n        else {\n            pageDiv.style.left = this.updateLeftPosition(pageNumber) + 'px';\n        }\n        pageDiv.style.top = topValue + 'px';\n        this.pageContainer.appendChild(pageDiv);\n        this.pageContainer.style.width = (this.isMixedSizeDocument && (this.highestWidth * this.getZoomFactor()) > this.viewerContainer.clientWidth) ? (this.highestWidth * this.getZoomFactor()) + 'px' : this.viewerContainer.clientWidth + 'px';\n        this.createWaitingPopup(pageNumber);\n        this.orderPageDivElements(pageDiv, pageNumber);\n        this.renderPageCanvas(pageDiv, pageWidth, pageHeight, pageNumber, 'block');\n        if ((Browser.isDevice && !this.pdfViewer.enableDesktopMode) && !this.isThumb) {\n            this.updateMobileScrollerPosition();\n        }\n    };\n    PdfViewerBase.prototype.renderPDFInformations = function () {\n        if (this.pdfViewer.thumbnailViewModule && (!Browser.isDevice || this.pdfViewer.enableDesktopMode)) {\n            this.pdfViewer.thumbnailViewModule.createRequestForThumbnails();\n        }\n        if (this.pdfViewer.bookmarkViewModule) {\n            this.pdfViewer.bookmarkViewModule.createRequestForBookmarks();\n        }\n        if (this.pdfViewer.annotationModule) {\n            if (this.pdfViewer.toolbarModule) {\n                this.pdfViewer.annotationModule.stickyNotesAnnotationModule.initializeAcccordionContainer();\n            }\n            if (this.pdfViewer.isCommandPanelOpen) {\n                this.pdfViewer.annotation.showCommentsPanel();\n            }\n            this.pdfViewer.annotationModule.stickyNotesAnnotationModule.createRequestForComments();\n        }\n    };\n    PdfViewerBase.prototype.orderPageDivElements = function (pageDiv, pageIndex) {\n        var nextElement = this.getElement('_pageDiv_' + (pageIndex + 1));\n        if (nextElement) {\n            this.pageContainer.insertBefore(pageDiv, nextElement);\n        }\n        else {\n            this.pageContainer.appendChild(pageDiv);\n        }\n    };\n    /**\n     * @param pageDiv\n     * @param pageWidth\n     * @param pageHeight\n     * @param pageNumber\n     * @param displayMode\n     * @param pageDiv\n     * @param pageWidth\n     * @param pageHeight\n     * @param pageNumber\n     * @param displayMode\n     * @param pageDiv\n     * @param pageWidth\n     * @param pageHeight\n     * @param pageNumber\n     * @param displayMode\n     * @private\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.renderPageCanvas = function (pageDiv, pageWidth, pageHeight, pageNumber, displayMode) {\n        if (pageDiv) {\n            // eslint-disable-next-line\n            var pageCanvas = this.getElement('_pageCanvas_' + pageNumber);\n            if (pageCanvas) {\n                pageCanvas.width = pageWidth;\n                pageCanvas.height = pageHeight;\n                pageCanvas.style.display = 'block';\n                if (this.isMixedSizeDocument && this.highestWidth > 0) {\n                    pageCanvas.style.marginLeft = 'auto';\n                    pageCanvas.style.marginRight = 'auto';\n                }\n            }\n            else {\n                // eslint-disable-next-line max-len\n                pageCanvas = createElement('img', { id: this.pdfViewer.element.id + '_pageCanvas_' + pageNumber, className: 'e-pv-page-canvas' });\n                pageCanvas.width = pageWidth;\n                pageCanvas.height = pageHeight;\n                pageCanvas.style.display = displayMode;\n                if (this.isMixedSizeDocument && this.highestWidth > 0) {\n                    pageCanvas.style.marginLeft = 'auto';\n                    pageCanvas.style.marginRight = 'auto';\n                }\n                pageDiv.appendChild(pageCanvas);\n            }\n            pageCanvas.setAttribute('alt', '');\n            if (this.pdfViewer.annotationModule && this.pdfViewer.annotation) {\n                // eslint-disable-next-line max-len\n                this.pdfViewer.annotationModule.createAnnotationLayer(pageDiv, pageWidth, pageHeight, pageNumber, displayMode);\n            }\n            if (this.pdfViewer.textSearchModule || this.pdfViewer.textSelectionModule || this.pdfViewer.formFieldsModule || this.pdfViewer.annotationModule) {\n                this.textLayer.addTextLayer(pageNumber, pageWidth, pageHeight, pageDiv);\n            }\n            if (this.pdfViewer.formDesignerModule && !this.pdfViewer.annotationModule) {\n                this.pdfViewer.formDesignerModule.createAnnotationLayer(pageDiv, pageWidth, pageHeight, pageNumber, displayMode);\n            }\n            return pageCanvas;\n        }\n    };\n    /**\n     * @private\n     * @param {any} pageCanvas - The canvas for rendering the page.\n     * @param {any} pageNumber - The page number for adding styles.\n     * @returns {void}\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.applyElementStyles = function (pageCanvas, pageNumber) {\n        if (this.isMixedSizeDocument && pageCanvas) {\n            var canvasElement = document.getElementById(this.pdfViewer.element.id + '_pageCanvas_' + pageNumber);\n            var oldCanvas = document.getElementById(this.pdfViewer.element.id + '_oldCanvas_' + pageNumber);\n            if (pageCanvas && canvasElement && canvasElement.offsetLeft > 0) {\n                pageCanvas.style.marginLeft = canvasElement.offsetLeft + 'px';\n                pageCanvas.style.marginRight = canvasElement.offsetLeft + 'px';\n            }\n            else if (oldCanvas && oldCanvas.offsetLeft > 0) {\n                pageCanvas.style.marginLeft = oldCanvas.offsetLeft + 'px';\n                pageCanvas.style.marginRight = oldCanvas.offsetLeft + 'px';\n            }\n            else {\n                pageCanvas.style.marginLeft = 'auto';\n                pageCanvas.style.marginRight = 'auto';\n            }\n        }\n    };\n    /**\n     * @private\n     * @param  {number} pageIndex - page index for updating positon.\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.updateLeftPosition = function (pageIndex) {\n        var leftPosition;\n        var width = this.viewerContainer.getBoundingClientRect().width;\n        if (width === 0) {\n            width = parseFloat(this.pdfViewer.width.toString());\n        }\n        // eslint-disable-next-line max-len\n        if (this.isMixedSizeDocument && this.highestWidth > 0) {\n            if (this.viewerContainer.clientWidth > 0) {\n                leftPosition = (this.viewerContainer.clientWidth - (this.highestWidth * this.getZoomFactor())) / 2;\n            }\n            else {\n                leftPosition = (width - (this.highestWidth * this.getZoomFactor())) / 2;\n            }\n            var pageDiff = (this.highestWidth * this.getZoomFactor() - this.getPageWidth(pageIndex)) / 2;\n            if (leftPosition > 0) {\n                leftPosition += pageDiff;\n            }\n            else {\n                leftPosition = pageDiff;\n            }\n            this.pageContainer.style.width = ((this.highestWidth * this.getZoomFactor()) > this.viewerContainer.clientWidth) ? (this.highestWidth * this.getZoomFactor()) + 'px' : this.viewerContainer.clientWidth + 'px';\n        }\n        else {\n            if (this.viewerContainer.clientWidth > 0) {\n                leftPosition = (this.viewerContainer.clientWidth - this.getPageWidth(pageIndex)) / 2;\n            }\n            else {\n                leftPosition = (width - this.getPageWidth(pageIndex)) / 2;\n            }\n        }\n        var isLandscape = false;\n        if (this.pageSize[parseInt(pageIndex.toString(), 10)].width > this.pageSize[parseInt(pageIndex.toString(), 10)].height) {\n            isLandscape = true;\n        }\n        // eslint-disable-next-line max-len\n        if (leftPosition < 0 || (this.pdfViewer.magnificationModule ? ((this.pdfViewer.magnificationModule.isAutoZoom && this.getZoomFactor() < 1) || this.pdfViewer.magnificationModule.fitType === 'fitToWidth') : false)) {\n            var leftValue = leftPosition;\n            if (leftPosition > 0 && (Browser.isDevice && !this.pdfViewer.enableDesktopMode)) {\n                // eslint-disable-next-line\n                leftPosition = leftValue;\n            }\n            else {\n                leftPosition = this.pageLeft;\n            }\n            if ((leftPosition > 0) && this.isMixedSizeDocument) {\n                if (leftValue > 0) {\n                    leftPosition = leftValue;\n                }\n            }\n        }\n        return leftPosition;\n    };\n    /**\n     * @private\n     * @param {number} pageIndex - The page index for positon.\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.applyLeftPosition = function (pageIndex) {\n        var leftPosition;\n        if (this.pageSize[parseInt(pageIndex.toString(), 10)]) {\n            if (this.isMixedSizeDocument && this.highestWidth > 0) {\n                if (this.viewerContainer.clientWidth > 0) {\n                    // eslint-disable-next-line max-len\n                    leftPosition = (this.viewerContainer.clientWidth - (this.highestWidth * this.getZoomFactor())) / 2;\n                }\n                else {\n                    // eslint-disable-next-line max-len\n                    leftPosition = (this.viewerContainer.getBoundingClientRect().width - (this.highestWidth * this.getZoomFactor())) / 2;\n                }\n                var pageDiff = (this.highestWidth * this.getZoomFactor() - this.getPageWidth(pageIndex)) / 2;\n                if (leftPosition > 0) {\n                    leftPosition += pageDiff;\n                }\n                else {\n                    leftPosition = pageDiff;\n                }\n            }\n            else {\n                if (this.viewerContainer.clientWidth > 0) {\n                    // eslint-disable-next-line max-len\n                    leftPosition = (this.viewerContainer.clientWidth - this.pageSize[parseInt(pageIndex.toString(), 10)].width * this.getZoomFactor()) / 2;\n                }\n                else {\n                    // eslint-disable-next-line max-len\n                    leftPosition = (this.viewerContainer.getBoundingClientRect().width - this.pageSize[parseInt(pageIndex.toString(), 10)].width * this.getZoomFactor()) / 2;\n                }\n            }\n            var isLandscape = false;\n            if (this.pageSize[parseInt(pageIndex.toString(), 10)].width > this.pageSize[parseInt(pageIndex.toString(), 10)].height) {\n                isLandscape = true;\n            }\n            // eslint-disable-next-line max-len\n            if (leftPosition < 0 || (this.pdfViewer.magnificationModule ? ((this.pdfViewer.magnificationModule.isAutoZoom && this.getZoomFactor() < 1) || this.pdfViewer.magnificationModule.fitType === 'fitToWidth') : false)) {\n                var leftValue = leftPosition;\n                leftPosition = this.pageLeft;\n                // eslint-disable-next-line max-len\n                if ((leftValue > 0) && this.isMixedSizeDocument) {\n                    leftPosition = leftValue;\n                }\n            }\n            // eslint-disable-next-line max-len\n            var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + pageIndex);\n            if (pageDiv) {\n                if (!this.pdfViewer.enableRtl) {\n                    pageDiv.style.left = leftPosition + 'px';\n                }\n                else {\n                    pageDiv.style.right = leftPosition + 'px';\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.updatePageHeight = function (viewerHeight, toolbarHeight) {\n        return ((viewerHeight - toolbarHeight) / viewerHeight) * 100 + '%';\n    };\n    /**\n     * @private\n     * @param {Point} clientPoint - The user should provide a x, y coordinates.\n     * @returns {number}\n     */\n    PdfViewerBase.prototype.getPageNumberFromClientPoint = function (clientPoint) {\n        var pointX = clientPoint.x + this.viewerContainer.scrollLeft;\n        var pointY = clientPoint.y + this.viewerContainer.scrollTop;\n        for (var i = 0; i < this.pageCount; i++) {\n            var pageTop = this.pageSize[parseInt(i.toString(), 10)].height + this.viewerContainer.scrollTop;\n            if (pointY < (this.pageSize[parseInt(i.toString(), 10)].top + pageTop)) {\n                var viewerContainerBounds = this.getElement('_pageViewContainer').getBoundingClientRect();\n                var pageLeft = ((viewerContainerBounds.width - this.pageSize[parseInt(i.toString(), 10)].width) / 2) + viewerContainerBounds.x;\n                var verticalScrollPosition = 0;\n                if (pointY > this.pageSize[parseInt(i.toString(), 10)].top) {\n                    verticalScrollPosition = (pointY - this.pageSize[parseInt(i.toString(), 10)].top);\n                }\n                else {\n                    verticalScrollPosition = (this.pageSize[parseInt(i.toString(), 10)].top - pointY);\n                }\n                if (verticalScrollPosition > 0) {\n                    if (this.pageSize[parseInt(i.toString(), 10)] != null) {\n                        var pageHeight = this.getPageHeight(i);\n                        if (pageLeft >= 0) {\n                            if ((pointX < pageLeft) || (pointX > (pageLeft + (this.pageSize[parseInt(i.toString(), 10)].width)))) {\n                                return -1;\n                            }\n                        }\n                        if (verticalScrollPosition <= (this.getPageTop(i) + pageTop)) {\n                            return i + 1;\n                        }\n                    }\n                }\n            }\n        }\n        return -1;\n    };\n    /**\n     * @private\n     * @param {Point} clientPoint - The user should provide a x, y coordinates.\n     * @param {number} pageNumber - We need to pass pageNumber.\n     * @returns {Point}\n     */\n    PdfViewerBase.prototype.convertClientPointToPagePoint = function (clientPoint, pageNumber) {\n        if (pageNumber !== -1) {\n            var viewerContainerBounds = this.getElement('_pageViewContainer').getBoundingClientRect();\n            var pageLeft = ((viewerContainerBounds.width - this.pageSize[pageNumber - 1].width) / 2) + viewerContainerBounds.x;\n            var pagePoint = { x: (clientPoint.x + this.viewerContainer.scrollLeft) - pageLeft, y: (clientPoint.y + this.viewerContainer.scrollTop) - this.pageSize[pageNumber - 1].top };\n            return pagePoint;\n        }\n        return null;\n    };\n    /**\n     * @private\n     * @param {Point} pagePoint - The user needs to provide a page x, y position.\n     * @param {number} pageNumber - We need to pass pageNumber.\n     * @returns {Point}\n     */\n    PdfViewerBase.prototype.convertPagePointToClientPoint = function (pagePoint, pageNumber) {\n        if (pageNumber !== -1) {\n            var viewerContainerBounds = this.getElement('_pageViewContainer').getBoundingClientRect();\n            var pageLeft = ((viewerContainerBounds.width - this.pageSize[pageNumber - 1].width) / 2) + viewerContainerBounds.x;\n            var clientPoint = { x: pagePoint.x + pageLeft, y: pagePoint.y + this.pageSize[pageNumber - 1].top };\n            return clientPoint;\n        }\n        return null;\n    };\n    /**\n     * @private\n     * @param {Point} pagePoint - The user needs to provide a page x, y position.\n     * @param {number} pageNumber - We need to pass pageNumber.\n     * @returns {Point}\n     */\n    PdfViewerBase.prototype.convertPagePointToScrollingPoint = function (pagePoint, pageNumber) {\n        if (pageNumber !== -1) {\n            var scrollingPoint = { x: pagePoint.x + this.viewerContainer.scrollLeft, y: pagePoint.y + this.viewerContainer.scrollTop };\n            return scrollingPoint;\n        }\n        return null;\n    };\n    PdfViewerBase.prototype.initiatePageViewScrollChanged = function () {\n        if (this.scrollHoldTimer) {\n            clearTimeout(this.scrollHoldTimer);\n        }\n        this.scrollHoldTimer = null;\n        if ((this.scrollPosition * this.getZoomFactor()) !== this.viewerContainer.scrollTop) {\n            this.scrollPosition = this.viewerContainer.scrollTop;\n            this.pageViewScrollChanged(this.currentPageNumber);\n        }\n    };\n    PdfViewerBase.prototype.renderCountIncrement = function () {\n        if (this.pdfViewer.magnificationModule) {\n            this.pdfViewer.magnificationModule.renderCountIncrement();\n        }\n    };\n    /**\n     * @private\n     * @param {number} currentPageNumber - The current pagenumber.\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.pageViewScrollChanged = function (currentPageNumber) {\n        if (this.isPanMode) {\n            if (this.renderedPagesList.indexOf(currentPageNumber - 1) === -1) {\n                this.reRenderedCount = 0;\n            }\n        }\n        else {\n            this.reRenderedCount = 0;\n        }\n        var currentPageIndex = currentPageNumber - 1;\n        if (currentPageNumber !== this.previousPage && currentPageNumber <= this.pageCount) {\n            var isSkip = false;\n            var storeData = this.clientSideRendering ? this.getLinkInformation(currentPageIndex) : this.getStoredData(currentPageIndex);\n            if (this.isDataExits && !this.getStoredData(currentPageIndex)) {\n                isSkip = true;\n            }\n            if (this.renderedPagesList.indexOf(currentPageIndex) === -1 && !this.getMagnified() && !isSkip) {\n                this.renderCountIncrement();\n                this.createRequestForRender(currentPageIndex);\n            }\n        }\n        if (!(this.getMagnified() || this.getPagesPinchZoomed())) {\n            var previous = currentPageIndex - 1;\n            var isSkip = false;\n            var canvas = this.getElement('_pageCanvas_' + previous);\n            var storeData = this.clientSideRendering ? this.getLinkInformation(previous) : this.getStoredData(previous);\n            if (this.isDataExits && !this.getStoredData(previous)) {\n                isSkip = true;\n            }\n            if (canvas !== null && !isSkip) {\n                if (this.renderedPagesList.indexOf(previous) === -1 && !this.getMagnified()) {\n                    this.renderCountIncrement();\n                    this.createRequestForRender(previous);\n                }\n            }\n            if (this.isMinimumZoom) {\n                this.renderPreviousPagesInScroll(previous);\n            }\n            var next = currentPageIndex + 1;\n            var pageHeight = 0;\n            if (next < this.pageCount) {\n                pageHeight = this.getPageHeight(next);\n                var allowPageRendering = this.isMinimumZoom ? this.isMinimumZoom : this.renderedPagesList.indexOf(next) === -1;\n                if (allowPageRendering && !this.getMagnified() && pageHeight) {\n                    if (this.isDocumentLoaded && this.pdfViewer.initialRenderPages > this.pageRenderCount && (this.getPageHeight(this.pdfViewer.initialRenderPages - 1) + this.getPageTop(this.pdfViewer.initialRenderPages - 1)) > this.viewerContainer.clientHeight) {\n                        var renderLimit = this.pdfViewer.initialRenderPages <= this.pageCount ? this.pdfViewer.initialRenderPages : this.pageCount;\n                        for (var i = 1; i < renderLimit; i++) {\n                            this.createRequestForRender(i);\n                        }\n                    }\n                    else {\n                        this.createRequestForRender(next);\n                        this.renderCountIncrement();\n                        while (this.viewerContainer.clientHeight > pageHeight) {\n                            next = next + 1;\n                            if (next < this.pageCount) {\n                                this.renderPageElement(next);\n                                this.createRequestForRender(next);\n                                pageHeight += this.getPageHeight(next);\n                                this.renderCountIncrement();\n                            }\n                            else {\n                                break;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.renderPreviousPagesInScroll = function (pageIndex) {\n        var next = pageIndex - 1;\n        var pageNumber = next - 1;\n        if (next > 0) {\n            if (this.renderedPagesList.indexOf(next) === -1 && !this.getMagnified()) {\n                this.createRequestForRender(next);\n                this.renderCountIncrement();\n            }\n            if (pageNumber > 0) {\n                if (this.renderedPagesList.indexOf(pageNumber) === -1 && !this.getMagnified()) {\n                    this.createRequestForRender(pageNumber);\n                    this.renderCountIncrement();\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.downloadDocument = function (blobUrl) {\n        // eslint-disable-next-line\n        var Url = URL || webkitURL;\n        blobUrl = Url.createObjectURL(blobUrl);\n        var anchorElement = createElement('a');\n        if (anchorElement.click) {\n            anchorElement.href = blobUrl;\n            anchorElement.target = '_parent';\n            if ('download' in anchorElement) {\n                anchorElement.download = this.downloadFileName;\n            }\n            (document.body || document.documentElement).appendChild(anchorElement);\n            anchorElement.click();\n            anchorElement.parentNode.removeChild(anchorElement);\n        }\n        else {\n            if (window.top === window &&\n                blobUrl.split('#')[0] === window.location.href.split('#')[0]) {\n                var padCharacter = blobUrl.indexOf('?') === -1 ? '?' : '&';\n                blobUrl = blobUrl.replace(/#|$/, padCharacter + '$&');\n            }\n            /* eslint-disable */\n            window.open(blobUrl, '_parent');\n            /* eslint-enable */\n        }\n    };\n    PdfViewerBase.prototype.downloadExportFormat = function (blobUrl, annotationDataFormat, formFieldDataFormat, isForm) {\n        var isJson = annotationDataFormat === 'Json' || formFieldDataFormat === 'Json';\n        // eslint-disable-next-line max-len\n        var extension = isJson ? '.json' : formFieldDataFormat === 'Fdf' ? '.fdf' : formFieldDataFormat === 'Xml' ? '.xml' : (annotationDataFormat === 'Xfdf' || formFieldDataFormat === 'Xfdf') ? '.xfdf' : null;\n        if (!isNullOrUndefined(extension)) {\n            // eslint-disable-next-line\n            var Url = URL || webkitURL;\n            blobUrl = Url.createObjectURL(blobUrl);\n            var anchorElement = createElement('a');\n            if (anchorElement.click) {\n                anchorElement.href = blobUrl;\n                anchorElement.target = '_parent';\n                if ('download' in anchorElement) {\n                    if (this.pdfViewer.exportAnnotationFileName !== null) {\n                        anchorElement.download = this.pdfViewer.exportAnnotationFileName.split('.')[0] + extension;\n                    }\n                    else {\n                        anchorElement.download = this.pdfViewer.fileName.split('.')[0] + extension;\n                    }\n                }\n                (document.body || document.documentElement).appendChild(anchorElement);\n                anchorElement.click();\n                anchorElement.parentNode.removeChild(anchorElement);\n                if (isForm) {\n                    this.pdfViewer.fireFormExportSuccess(blobUrl, anchorElement.download);\n                }\n                else {\n                    this.pdfViewer.fireExportSuccess(blobUrl, anchorElement.download);\n                }\n            }\n            else if (isJson) {\n                if (window.top === window &&\n                    blobUrl.split('#')[0] === window.location.href.split('#')[0]) {\n                    var padCharacter = blobUrl.indexOf('?') === -1 ? '?' : '&';\n                    blobUrl = blobUrl.replace(/#|$/, padCharacter + '$&');\n                }\n                /* eslint-disable */\n                window.open(blobUrl, '_parent');\n                /* eslint-enable */\n                if (isForm) {\n                    this.pdfViewer.fireFormExportSuccess(blobUrl, this.pdfViewer.fileName.split('.')[0] + extension);\n                }\n                else {\n                    this.pdfViewer.fireExportSuccess(blobUrl, this.pdfViewer.fileName.split('.')[0] + extension);\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     * @param {string} data - The data for exporting the fields.\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.exportFormFields = function (data, formFieldDataFormat) {\n        this.createRequestForExportFormfields(false, formFieldDataFormat, data);\n    };\n    /**\n     * @param data\n     * @param formFieldDataFormat\n     * @private\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.importFormFields = function (data, formFieldDataFormat) {\n        this.createRequestForImportingFormfields(data, formFieldDataFormat);\n    };\n    /**\n     * @param {boolean} isObject\n     * @param {FormFieldDataFormat} formFieldDataFormat\n     * @param {string} data - The data for exporting the fields.\n     * @private\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.createRequestForExportFormfields = function (isObject, formFieldDataFormat, data) {\n        var _this = this;\n        var proxy = null;\n        proxy = this;\n        var promise = new Promise(function (resolve, reject) {\n            // eslint-disable-next-line\n            var jsonObject = proxy.createFormfieldsJsonData();\n            var canExport = false;\n            if (formFieldDataFormat === 'Json' || formFieldDataFormat === 'Fdf' || formFieldDataFormat === 'Xfdf' || formFieldDataFormat === \"Xml\") {\n                jsonObject.formFieldDataFormat = formFieldDataFormat;\n                canExport = proxy.pdfViewer.fireFormExportStarted(jsonObject);\n            }\n            if (canExport) {\n                jsonObject.action = 'ExportFormFields';\n                // eslint-disable-next-line\n                jsonObject['hashId'] = proxy.hashId;\n                // eslint-disable-next-line\n                jsonObject['fileName'] = proxy.pdfViewer.fileName;\n                if (data && data !== '' && !isObject) {\n                    // eslint-disable-next-line\n                    jsonObject['filePath'] = data;\n                }\n                // eslint-disable-next-line\n                jsonObject['elementId'] = _this.pdfViewer.element.id;\n                // eslint-disable-next-line max-len\n                if (proxy.jsonDocumentId) {\n                    // eslint-disable-next-line\n                    jsonObject.document = proxy.jsonDocumentId;\n                }\n                var formFieldsPageList = _this.getFormFieldsPageList(jsonObject[\"formDesigner\"]);\n                jsonObject['formFieldsPageList'] = JSON.stringify(formFieldsPageList);\n                jsonObject['isFormFieldAnnotationsExist'] = _this.isAnnotationsExist(jsonObject[\"formDesigner\"]) || _this.isFieldsDataExist(jsonObject[\"fieldsData\"]) || formFieldsPageList.length > 0;\n                var url = proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.exportFormFields;\n                proxy.exportFormFieldsRequestHandler = new AjaxHandler(_this.pdfViewer);\n                proxy.exportFormFieldsRequestHandler.url = url;\n                proxy.exportFormFieldsRequestHandler.mode = true;\n                proxy.exportFormFieldsRequestHandler.responseType = 'text';\n                if (!proxy.clientSideRendering) {\n                    proxy.exportFormFieldsRequestHandler.send(jsonObject);\n                }\n                else {\n                    var resultData = proxy.pdfViewer.pdfRendererModule.exportFormFields(jsonObject, isObject);\n                    if (isObject) {\n                        var annotData = _this.getDataOnSuccess(resultData);\n                        resolve(annotData);\n                    }\n                    else {\n                        proxy.exportFileDownload(resultData, proxy, formFieldDataFormat, jsonObject, isObject);\n                    }\n                }\n                // eslint-disable-next-line\n                proxy.exportFormFieldsRequestHandler.onSuccess = function (result) {\n                    // eslint-disable-next-line\n                    var data = result.data;\n                    var redirect = proxy.checkRedirection(data);\n                    if (!redirect) {\n                        if (data) {\n                            if (isObject) {\n                                var annotData = proxy.exportFileDownload(data, proxy, formFieldDataFormat, jsonObject, isObject);\n                                resolve(annotData);\n                            }\n                            else {\n                                proxy.exportFileDownload(data, proxy, formFieldDataFormat, jsonObject, isObject);\n                            }\n                        }\n                    }\n                };\n                // eslint-disable-next-line\n                proxy.exportFormFieldsRequestHandler.onFailure = function (result) {\n                    proxy.pdfViewer.fireFormExportFailed(jsonObject.pdfAnnotation, result.statusText);\n                };\n                // eslint-disable-next-line\n                proxy.exportFormFieldsRequestHandler.onError = function (result) {\n                    proxy.pdfViewer.fireFormExportFailed(jsonObject.pdfAnnotation, result.statusText);\n                };\n            }\n        });\n        if (isObject) {\n            return promise;\n        }\n        else {\n            return true;\n        }\n    };\n    PdfViewerBase.prototype.exportFileDownload = function (data, proxy, formFieldDataFormat, jsonObject, isObject) {\n        return new Promise(function (resolve) {\n            if (data) {\n                if (!proxy.clientSideRendering) {\n                    proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.exportFormFields, data);\n                }\n                if (isObject) {\n                    // eslint-disable-next-line\n                    var annotationJson = decodeURIComponent(escape(atob(data.split(',')[1])));\n                    resolve(annotationJson);\n                    proxy.pdfViewer.fireFormExportSuccess(annotationJson, proxy.pdfViewer.fileName);\n                }\n                else if (data.split('base64,')[1]) {\n                    var blobUrl = proxy.createBlobUrl(data.split('base64,')[1], 'application/json');\n                    if (Browser.isIE || Browser.info.name === 'edge') {\n                        window.navigator.msSaveOrOpenBlob(blobUrl, proxy.pdfViewer.fileName.split('.')[0] + '.json');\n                    }\n                    else if (jsonObject.formFieldDataFormat === 'Json' || jsonObject.formFieldDataFormat === 'Fdf' || jsonObject.formFieldDataFormat === 'Xfdf' || jsonObject.formFieldDataFormat === 'Xml') {\n                        proxy.downloadExportFormat(blobUrl, null, formFieldDataFormat, true);\n                    }\n                }\n            }\n        });\n    };\n    /**\n     * @param {string} fileName - Gets the name of the file name for slicing the last index\n     * @param {string} sliceBy - A type to slice the file name; example (\".\", \"_\")\n     * @returns {string}\n     * @private\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.getLastIndexValue = function (fileName, sliceBy) {\n        var indexName = fileName.slice(fileName.lastIndexOf(sliceBy) + 1);\n        return indexName;\n    };\n    /**\n     * @param source\n     * @private\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.createRequestForImportingFormfields = function (source, formFieldDataFormat) {\n        var proxy = null;\n        var index = \".\";\n        proxy = this;\n        // eslint-disable-next-line\n        var jsonObject = {};\n        var sourceName = this.getLastIndexValue(source, index);\n        if (typeof source !== 'object' && (sourceName === 'json' || sourceName === 'fdf' || sourceName === 'xfdf' || sourceName === 'xml')) {\n            jsonObject.data = source;\n            jsonObject['fileName'] = proxy.pdfViewer.fileName;\n            jsonObject.formFieldDataFormat = formFieldDataFormat;\n        }\n        else {\n            jsonObject.formFieldDataFormat = formFieldDataFormat;\n            if (formFieldDataFormat === 'Json') {\n                jsonObject.data = JSON.stringify(source);\n            }\n            else {\n                jsonObject.data = source;\n            }\n        }\n        proxy.pdfViewer.fireFormImportStarted(source);\n        // eslint-disable-next-line\n        jsonObject['hashId'] = proxy.hashId;\n        // eslint-disable-next-line\n        jsonObject['elementId'] = this.pdfViewer.element.id;\n        // eslint-disable-next-line max-len\n        if (proxy.jsonDocumentId) {\n            // eslint-disable-next-line\n            jsonObject.document = proxy.jsonDocumentId;\n        }\n        jsonObject = Object.assign(jsonObject, this.constructJsonDownload());\n        // eslint-disable-next-line\t\n        jsonObject.action = 'ImportFormFields';\n        var url = proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.importFormFields;\n        proxy.importFormFieldsRequestHandler = new AjaxHandler(this.pdfViewer);\n        proxy.importFormFieldsRequestHandler.url = url;\n        proxy.importFormFieldsRequestHandler.mode = true;\n        proxy.importFormFieldsRequestHandler.responseType = 'text';\n        if (!proxy.clientSideRendering) {\n            proxy.importFormFieldsRequestHandler.send(jsonObject);\n        }\n        else {\n            var resultData = proxy.pdfViewer.pdfRendererModule.importFormFields(jsonObject);\n            this.importClientSideFormFields(resultData, source);\n        }\n        // eslint-disable-next-line\n        proxy.importFormFieldsRequestHandler.onSuccess = function (result) {\n            // eslint-disable-next-line\n            var data = result.data;\n            var redirect = proxy.checkRedirection(data);\n            if (!redirect) {\n                if (data && data !== 'null') {\n                    if (typeof data !== 'object') {\n                        try {\n                            data = JSON.parse(data);\n                            if (typeof data !== 'object') {\n                                proxy.onControlError(500, data, proxy.pdfViewer.serverActionSettings.importFormFields);\n                                proxy.pdfViewer.fireFormImportFailed(source, result.statusText);\n                                data = null;\n                            }\n                        }\n                        catch (error) {\n                            proxy.pdfViewer.fireFormImportFailed(source, proxy.pdfViewer.localeObj.getConstant('File not found'));\n                            if (isBlazor()) {\n                                var promise = this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText', 'PdfViewer_FileNotFound');\n                                promise.then(function (value) {\n                                    proxy.openImportExportNotificationPopup(value);\n                                });\n                            }\n                            else {\n                                proxy.openImportExportNotificationPopup(proxy.pdfViewer.localeObj.getConstant('File not found'));\n                            }\n                            proxy.onControlError(500, data, proxy.pdfViewer.serverActionSettings.importFormFields);\n                            data = null;\n                        }\n                    }\n                    proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.importFormFields, data);\n                    proxy.pdfViewer.fireFormImportSuccess(source);\n                    window.sessionStorage.removeItem(this.documentId + '_formfields');\n                    this.pdfViewer.formFieldsModule.removeExistingFormFields();\n                    window.sessionStorage.removeItem(this.documentId + '_formDesigner');\n                    proxy.saveFormfieldsData(data);\n                    for (var i = 0; i < proxy.renderedPagesList.length; i++) {\n                        this.pdfViewer.formFieldsModule.renderFormFields(proxy.renderedPagesList[parseInt(i.toString(), 10)], true);\n                    }\n                }\n                else {\n                    proxy.pdfViewer.fireFormImportFailed(source, result.statusText);\n                    if (isBlazor()) {\n                        var promise = this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText', 'PdfViewer_FileNotFound');\n                        promise.then(function (value) {\n                            proxy.openImportExportNotificationPopup(value);\n                        });\n                    }\n                    else {\n                        proxy.openImportExportNotificationPopup(proxy.pdfViewer.localeObj.getConstant('File not found'));\n                    }\n                }\n            }\n        };\n        // eslint-disable-next-line\n        proxy.importFormFieldsRequestHandler.onFailure = function (result) {\n            proxy.pdfViewer.fireFormImportFailed(source, result.statusText);\n        };\n        // eslint-disable-next-line\n        proxy.importFormFieldsRequestHandler.onError = function (result) {\n            proxy.pdfViewer.fireFormImportFailed(source, result.statusText);\n        };\n    };\n    PdfViewerBase.prototype.importClientSideFormFields = function (result, source) {\n        if (!isNullOrUndefined(result)) {\n            this.pdfViewer.fireFormImportSuccess(source);\n            window.sessionStorage.removeItem(this.documentId + '_formfields');\n            this.pdfViewer.formFieldsModule.removeExistingFormFields();\n            window.sessionStorage.removeItem(this.documentId + '_formDesigner');\n            this.saveFormfieldsData(result);\n            for (var i = 0; i < this.renderedPagesList.length; i++) {\n                this.pdfViewer.formFieldsModule.renderFormFields(this.renderedPagesList[parseInt(i.toString(), 10)], true);\n            }\n        }\n        else {\n            this.pdfViewer.fireFormImportFailed(source, null);\n            this.openImportExportNotificationPopup(this.pdfViewer.localeObj.getConstant('File not found'));\n        }\n    };\n    /**\n     * @public\n     * @returns {any} - Returns the Json data.\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.createFormfieldsJsonData = function () {\n        // eslint-disable-next-line\n        var jsonObject = {};\n        if (this.pdfViewer.formDesignerModule) {\n            var fieldsData = this.pdfViewer.formDesignerModule.downloadFormDesigner();\n            // eslint-disable-next-line\n            jsonObject['formDesigner'] = fieldsData;\n        }\n        else if (this.pdfViewer.formFieldsModule) {\n            var fieldsData = this.pdfViewer.formFieldsModule.downloadFormFieldsData();\n            // eslint-disable-next-line\n            jsonObject['fieldsData'] = fieldsData;\n        }\n        return jsonObject;\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.constructJsonDownload = function () {\n        // eslint-disable-next-line\n        var jsonObject = { hashId: this.hashId };\n        if (this.jsonDocumentId) {\n            jsonObject.documentId = this.jsonDocumentId;\n        }\n        jsonObject.uniqueId = this.documentId;\n        this.importPageList = [];\n        if (this.pdfViewer.annotationModule) {\n            this.saveImportedAnnotations();\n        }\n        if (this.isTextMarkupAnnotationModule()) {\n            this.isJsonExported = false;\n            // eslint-disable-next-line max-len\n            var textMarkupAnnotationCollection = this.pdfViewer.annotationModule.textMarkupAnnotationModule.saveTextMarkupAnnotations();\n            // eslint-disable-next-line\n            jsonObject['textMarkupAnnotations'] = textMarkupAnnotationCollection;\n        }\n        if (this.isShapeAnnotationModule()) {\n            this.isJsonExported = false;\n            // eslint-disable-next-line max-len\n            var shapeAnnotations = this.pdfViewer.annotationModule.shapeAnnotationModule.saveShapeAnnotations();\n            // eslint-disable-next-line\n            jsonObject['shapeAnnotations'] = shapeAnnotations;\n        }\n        if (this.isCalibrateAnnotationModule()) {\n            this.isJsonExported = false;\n            // eslint-disable-next-line max-len\n            var calibrateAnnotations = this.pdfViewer.annotationModule.measureAnnotationModule.saveMeasureShapeAnnotations();\n            // eslint-disable-next-line\n            jsonObject['measureShapeAnnotations'] = calibrateAnnotations;\n        }\n        if (this.isStampAnnotationModule()) {\n            // eslint-disable-next-line max-len\n            var stampAnnotationCollection = this.pdfViewer.annotationModule.stampAnnotationModule.saveStampAnnotations();\n            // eslint-disable-next-line\n            jsonObject['stampAnnotations'] = stampAnnotationCollection;\n        }\n        if (this.isCommentAnnotationModule()) {\n            // eslint-disable-next-line max-len\n            var stickyAnnotationCollection = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveStickyAnnotations();\n            // eslint-disable-next-line\n            jsonObject['stickyNotesAnnotation'] = stickyAnnotationCollection;\n        }\n        if (this.isImportAction) {\n            var importList = JSON.stringify(this.importPageList);\n            // eslint-disable-next-line\n            jsonObject['importPageList'] = importList;\n        }\n        if (this.pdfViewer.formDesignerModule) {\n            var fieldsData = this.pdfViewer.formDesignerModule.downloadFormDesigner();\n            // eslint-disable-next-line\n            jsonObject['formDesigner'] = fieldsData;\n        }\n        else if (this.pdfViewer.formFieldsModule) {\n            var fieldsData = this.pdfViewer.formFieldsModule.downloadFormFieldsData();\n            // eslint-disable-next-line\n            jsonObject['fieldsData'] = fieldsData;\n        }\n        var signatureData = this.signatureModule.saveSignature();\n        // eslint-disable-next-line\n        jsonObject['signatureData'] = signatureData;\n        if (this.pdfViewer.isSignatureEditable) {\n            // eslint-disable-next-line\n            jsonObject['isSignatureEdited'] = this.pdfViewer.isSignatureEditable;\n        }\n        if (this.isFreeTextAnnotationModule()) {\n            // eslint-disable-next-line max-len\n            var freeTextAnnotationCollection = this.pdfViewer.annotationModule.freeTextAnnotationModule.saveFreeTextAnnotations();\n            // eslint-disable-next-line\n            jsonObject['freeTextAnnotation'] = freeTextAnnotationCollection;\n        }\n        if (this.isInkAnnotationModule()) {\n            var inkSignatureData = this.pdfViewer.annotationModule.inkAnnotationModule.saveInkSignature();\n            // eslint-disable-next-line\n            jsonObject['inkSignatureData'] = inkSignatureData;\n        }\n        // eslint-disable-next-line\n        jsonObject['action'] = 'Download';\n        // eslint-disable-next-line\n        jsonObject['elementId'] = this.pdfViewer.element.id;\n        if (this.pdfViewer.annotationModule) {\n            var annotationsPageList = this.getAnnotationsPageList();\n            jsonObject['isAnnotationsExist'] = this.isAnnotationsExist(jsonObject[\"textMarkupAnnotations\"]) || this.isAnnotationsExist(jsonObject[\"shapeAnnotations\"]) || this.isAnnotationsExist(jsonObject[\"measureShapeAnnotations\"]) || this.isAnnotationsExist(jsonObject[\"stampAnnotations\"]) || this.isAnnotationsExist(jsonObject[\"stickyNotesAnnotation\"]) || this.isAnnotationsExist(jsonObject[\"signatureData\"]) || this.isAnnotationsExist(jsonObject[\"freeTextAnnotation\"]) || this.isAnnotationsExist(jsonObject[\"inkSignatureData\"]) || annotationsPageList.length > 0;\n            jsonObject['annotationsPageList'] = JSON.stringify(annotationsPageList);\n        }\n        if (this.pdfViewer.formDesignerModule || this.pdfViewer.formFieldsModule) {\n            var formFieldsPageList = this.getFormFieldsPageList(jsonObject[\"formDesigner\"]);\n            jsonObject['isFormFieldAnnotationsExist'] = this.isAnnotationsExist(jsonObject[\"formDesigner\"]) || this.isFieldsDataExist(jsonObject[\"fieldsData\"]) || formFieldsPageList.length > 0;\n            jsonObject['formFieldsPageList'] = JSON.stringify(formFieldsPageList);\n        }\n        if (this.pdfViewer.annotationCollection) {\n            jsonObject['annotationCollection'] = JSON.stringify(this.pdfViewer.annotationCollection);\n        }\n        return jsonObject;\n    };\n    /**\n     * @private\n     * @returns {boolean} - Returns whether annotation is present.\n     */\n    PdfViewerBase.prototype.isAnnotationsExist = function (annotationInfo) {\n        // eslint-disable-next-line max-len\n        return !isNullOrUndefined(annotationInfo) ? JSON.parse(annotationInfo).flat(1).length > 0 : false;\n    };\n    /**\n     * @private\n     * @returns {boolean} - Returns whether fields data is present.\n     */\n    PdfViewerBase.prototype.isFieldsDataExist = function (fieldsData) {\n        // eslint-disable-next-line max-len\n        return !isNullOrUndefined(fieldsData) ? Object.entries(JSON.parse(fieldsData)).length !== 0 : false;\n    };\n    /**\n     * @private\n     * @returns {boolean} - Returns annotations page number list.\n     */\n    PdfViewerBase.prototype.getAnnotationsPageList = function () {\n        // eslint-disable-next-line max-len\n        var annotCollection = this.pdfViewer.annotationCollection.map(function (a) { return a.pageNumber; });\n        var annotActionCollection = this.pdfViewer.annotationModule.actionCollection.filter(function (value, index, self) { return value.annotation.propName !== \"formFields\" && value.annotation.formFieldAnnotationType == undefined; }).map(function (a) { return a.pageIndex; });\n        var fullPageList = annotCollection.concat(annotActionCollection);\n        return fullPageList.filter(function (value, index, self) { return self.indexOf(value) === index && value !== undefined; });\n    };\n    /**\n     * @private\n     * @returns {boolean} - Returns form fields page number list.\n     */\n    PdfViewerBase.prototype.getFormFieldsPageList = function (formDesignerData) {\n        // eslint-disable-next-line max-len\n        var formFieldsCollection = this.pdfViewer.formFieldCollection.map(function (item) {\n            if (!isNullOrUndefined(item.properties)) {\n                return item.properties.pageNumber;\n            }\n            else {\n                return item.pageNumber + 1;\n            }\n        });\n        var annotActionCollection = !isNullOrUndefined(this.pdfViewer.annotationModule) ? this.pdfViewer.annotationModule.actionCollection.filter(function (value, index, self) { return value.annotation.propName == \"formFields\" || value.annotation.formFieldAnnotationType != undefined; }).map(function (a) { return a.pageIndex; }) : [];\n        var fullPageList = formFieldsCollection.concat(annotActionCollection);\n        var designerDataList;\n        if (!isNullOrUndefined(formDesignerData)) {\n            designerDataList = JSON.parse(formDesignerData).map(function (item) {\n                return item.FormField.pageNumber;\n            });\n        }\n        var totalPageList = fullPageList.concat(designerDataList);\n        return totalPageList.filter(function (value, index, self) { return self.indexOf(value) === index && value !== undefined; });\n    };\n    /**\n     * @private\n     * @param {string} annotationID - The annotationID.\n     * @returns {any} - Returns collection of type.\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.checkFormFieldCollection = function (annotationID) {\n        var isFormFieldAnnotation = false;\n        // eslint-disable-next-line\n        var formDesignerData = null;\n        formDesignerData = this.getItemFromSessionStorage('_formDesigner');\n        if (formDesignerData) {\n            // eslint-disable-next-line\n            var formFieldsData = JSON.parse(formDesignerData);\n            for (var i = 0; i < formFieldsData.length; i++) {\n                if (formFieldsData[parseInt(i.toString(), 10)].FormField.formFieldAnnotationType === 'RadioButton') {\n                    for (var j = 0; j < formFieldsData[parseInt(i.toString(), 10)].FormField.radiobuttonItem.length; j++) {\n                        if (annotationID === formFieldsData[parseInt(i.toString(), 10)].FormField.radiobuttonItem[parseInt(j.toString(), 10)].id.split('_')[0]) {\n                            isFormFieldAnnotation = true;\n                            break;\n                        }\n                    }\n                }\n                else if (formFieldsData[parseInt(i.toString(), 10)].Key.split('_')[0] === annotationID) {\n                    isFormFieldAnnotation = true;\n                    break;\n                }\n            }\n        }\n        return isFormFieldAnnotation;\n    };\n    /**\n     * @private\n     * @returns {boolean} - Returns whether freetext module is enabled.\n     */\n    PdfViewerBase.prototype.isFreeTextAnnotationModule = function () {\n        // eslint-disable-next-line max-len\n        if (this.pdfViewer.annotation) {\n            if (this.pdfViewer.annotation && this.pdfViewer.annotation.freeTextAnnotationModule) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        }\n        else {\n            return false;\n        }\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.createRequestForDownload = function () {\n        var proxy = null;\n        proxy = this;\n        proxy.pdfViewer.fireDownloadStart(proxy.downloadFileName);\n        // eslint-disable-next-line\n        var jsonObject = this.constructJsonDownload();\n        var digitalSignature = proxy.clientSideRendering ? proxy.isDigitalSignaturePresent : (proxy.digitalSignaturePages && proxy.digitalSignaturePages.length !== 0);\n        if (digitalSignature) {\n            if (proxy.pdfViewer.isDocumentEdited) {\n                jsonObject['digitalSignatureDocumentEdited'] = true;\n            }\n            else {\n                jsonObject['digitalSignatureDocumentEdited'] = false;\n            }\n        }\n        this.dowonloadRequestHandler = new AjaxHandler(this.pdfViewer);\n        this.dowonloadRequestHandler.url = proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.download;\n        this.dowonloadRequestHandler.responseType = 'text';\n        if (this.validateForm && this.pdfViewer.enableFormFieldsValidation) {\n            this.pdfViewer.fireValidatedFailed(proxy.pdfViewer.serverActionSettings.download);\n            this.validateForm = false;\n        }\n        else if (!this.clientSideRendering) {\n            this.dowonloadRequestHandler.send(jsonObject);\n        }\n        else {\n            var data = this.pdfViewer.pdfRendererModule.getDocumentAsBase64(jsonObject);\n            this.fileDownload(data, this);\n        }\n        // eslint-disable-next-line\n        this.dowonloadRequestHandler.onSuccess = function (result) {\n            // eslint-disable-next-line\n            var data = result.data;\n            var redirect = proxy.checkRedirection(data);\n            if (!redirect) {\n                if (data) {\n                    proxy.fileDownload(data, proxy);\n                }\n                else {\n                    proxy.pdfViewer.fireDownloadEnd(proxy.downloadFileName, 'PDF Document saved in server side successfully');\n                }\n            }\n        };\n        // eslint-disable-next-line\n        this.dowonloadRequestHandler.onFailure = function (result) {\n            proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.download);\n        };\n        // eslint-disable-next-line\n        this.dowonloadRequestHandler.onError = function (result) {\n            proxy.openNotificationPopup();\n            proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.download);\n        };\n    };\n    PdfViewerBase.prototype.fileDownload = function (data, proxy) {\n        if (data) {\n            if (typeof data !== 'object' && data.indexOf('data:application/pdf') === -1) {\n                proxy.onControlError(500, data, proxy.pdfViewer.serverActionSettings.download);\n                data = null;\n            }\n            if (typeof data === 'object') {\n                data = JSON.parse(data);\n            }\n            if (data) {\n                if (proxy.pdfViewer.downloadFileName && (proxy.pdfViewer.downloadFileName !== proxy.downloadFileName)) {\n                    proxy.downloadFileName = proxy.pdfViewer.downloadFileName;\n                }\n                if (proxy.clientSideRendering) {\n                    proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.download, data);\n                }\n                var blobUrl = proxy.createBlobUrl(data.split('base64,')[1], 'application/pdf');\n                if (Browser.isIE || Browser.info.name === 'edge') {\n                    window.navigator.msSaveOrOpenBlob(blobUrl, proxy.downloadFileName);\n                }\n                else {\n                    proxy.downloadDocument(blobUrl);\n                }\n                proxy.pdfViewer.fireDownloadEnd(proxy.downloadFileName, data);\n            }\n            proxy.updateDocumentAnnotationCollections();\n        }\n    };\n    /**\n     * @param pageWidth\n     * @private\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.getTileCount = function (pageWidth) {\n        if (pageWidth && typeof pageWidth === 'number') {\n            var defaultWidth = 816;\n            var tileCount = 1;\n            if (this.getZoomFactor() > 2 && pageWidth <= 1200) {\n                tileCount = 2;\n            }\n            else {\n                tileCount = pageWidth / defaultWidth;\n            }\n            // eslint-disable-next-line radix\n            var tileValue = Math.ceil(tileCount);\n            if (tileValue <= 0) {\n                return 1;\n            }\n            else {\n                if (this.pdfViewer.tileRenderingSettings.enableTileRendering) {\n                    return tileValue;\n                }\n                else {\n                    return 1;\n                }\n            }\n        }\n        else {\n            return 1;\n        }\n    };\n    PdfViewerBase.prototype.createRequestForRender = function (pageIndex) {\n        var proxy = null;\n        proxy = this;\n        var canvas = proxy.getElement('_pageCanvas_' + pageIndex);\n        var oldCanvas = proxy.getElement('_oldCanvas_' + pageIndex);\n        if (this.pageSize && this.pageSize[parseInt(pageIndex.toString(), 10)]) {\n            var pageWidth_1 = this.pageSize[parseInt(pageIndex.toString(), 10)].width;\n            var pageHeight = this.pageSize[parseInt(pageIndex.toString(), 10)].height;\n            var tilecanvas = this.getElement('_pageCanvas_' + pageIndex);\n            // eslint-disable-next-line\n            var viewPortWidth_1 = 1200; // On diving the value greater than 1200 we will get the tile count as 2.\n            // eslint-disable-next-line\n            var viewPortHeight = proxy.pdfViewer.element.clientHeight > 0 ? proxy.pdfViewer.element.clientHeight : proxy.pdfViewer.element.style.height;\n            // eslint-disable-next-line radix\n            viewPortWidth_1 = parseInt(viewPortWidth_1);\n            // eslint-disable-next-line radix\n            viewPortHeight = parseInt(viewPortHeight) ? parseInt(viewPortHeight) : 500; //we have applied minimum-height as 500.\n            var noTileX = void 0;\n            var noTileY = void 0;\n            var thumbnailImageElement = void 0;\n            var imageSource = void 0;\n            var object = new Object();\n            if ((this.isMinimumZoom && document.getElementById(this.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageIndex))) {\n                this.renderThumbnailImages = true;\n                thumbnailImageElement = document.getElementById(this.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageIndex).children[0];\n                imageSource = thumbnailImageElement.src;\n            }\n            else {\n                this.renderThumbnailImages = false;\n            }\n            var tileCount = this.getTileCount(pageWidth_1);\n            if (canvas) {\n                if (!isNaN(parseFloat(canvas.style.width)) || oldCanvas) {\n                    if (proxy.isInitialLoaded) {\n                        proxy.showPageLoadingIndicator(pageIndex, false);\n                    }\n                }\n                // eslint-disable-next-line\n                var data = proxy.getStoredData(pageIndex);\n                noTileX = noTileY = tileCount;\n                var tileSettings = proxy.pdfViewer.tileRenderingSettings;\n                if (tileSettings.enableTileRendering && tileSettings.x > 0 && tileSettings.y > 0) {\n                    if ((viewPortWidth_1 < pageWidth_1 || this.getZoomFactor() > 2)) {\n                        noTileX = tileSettings.x;\n                        noTileY = tileSettings.y;\n                    }\n                }\n                proxy.tileRequestCount = noTileX * noTileY;\n                var zoomFactor = this.retrieveCurrentZoomFactor();\n                var isPageRequestSent = void 0;\n                if (tileCount === 1) {\n                    data = proxy.getStoredData(pageIndex);\n                    isPageRequestSent = proxy.pageRequestSent(pageIndex, 0, 0);\n                }\n                else {\n                    // eslint-disable-next-line\n                    var tileData = JSON.parse(proxy.getWindowSessionStorageTile(pageIndex, 0, 0, zoomFactor));\n                    if (tileCount > 1) {\n                        data = tileData;\n                    }\n                }\n                if (data && data.uniqueId === proxy.documentId && (data['image'] || this.isMinimumZoom)) {\n                    canvas.style.backgroundColor = '#fff';\n                    if ((proxy.pdfViewer.magnification && proxy.pdfViewer.magnification.isPinchZoomed) || !this.pageSize[parseInt(pageIndex.toString(), 10)]) {\n                        return;\n                    }\n                    var zoomFactor_2 = this.retrieveCurrentZoomFactor();\n                    if (zoomFactor_2 > 2 && pageWidth_1 <= 1200) {\n                        viewPortWidth_1 = 700;\n                    }\n                    else {\n                        viewPortWidth_1 = 1200;\n                    }\n                    if (!proxy.pdfViewer.tileRenderingSettings.enableTileRendering) {\n                        viewPortWidth_1 = 1200;\n                    }\n                    if ((viewPortWidth_1 >= pageWidth_1) || !proxy.pdfViewer.tileRenderingSettings.enableTileRendering) {\n                        if (this.renderThumbnailImages && tileCount === 1) {\n                            proxy.renderPage(data, pageIndex, imageSource);\n                        }\n                        else {\n                            proxy.renderPage(data, pageIndex);\n                        }\n                    }\n                    else {\n                        proxy.isTileImageRendered = true;\n                        proxy.tileRenderCount = 0;\n                        if (this.renderThumbnailImages && tileCount === 1) {\n                            proxy.renderPage(data, pageIndex, imageSource);\n                        }\n                        else {\n                            proxy.tileRenderPage(data, pageIndex);\n                            for (var k = 0; k < noTileX; k++) {\n                                for (var l = 0; l < noTileY; l++) {\n                                    if (k === 0 && l === 0) {\n                                        continue;\n                                    }\n                                    data = this.clientSideRendering ? JSON.parse(this.getStoredTileImageDetails(pageIndex, k, l, zoomFactor_2)) : JSON.parse(this.getWindowSessionStorageTile(pageIndex, k, l, zoomFactor_2));\n                                    if (data) {\n                                        proxy.tileRenderPage(data, pageIndex);\n                                    }\n                                }\n                            }\n                        }\n                    }\n                    data = null;\n                }\n                else if (data === null || !isPageRequestSent) {\n                    if (!this.renderThumbnailImages) {\n                        if (this.getPagesPinchZoomed()) {\n                            proxy.showPageLoadingIndicator(pageIndex, false);\n                        }\n                        else {\n                            proxy.showPageLoadingIndicator(pageIndex, true);\n                        }\n                        if (proxy.getPagesZoomed()) {\n                            if (proxy.isInitialLoaded) {\n                                proxy.showPageLoadingIndicator(pageIndex, false);\n                            }\n                        }\n                    }\n                    if (proxy.pdfViewer.magnification && proxy.pdfViewer.magnification.isPinchZoomed) {\n                        return;\n                    }\n                    if (!proxy.pdfViewer.tileRenderingSettings.enableTileRendering || this.renderThumbnailImages) {\n                        noTileX = 1;\n                        noTileY = 1;\n                    }\n                    proxy.tileRenderCount = 0;\n                    proxy.isTileImageRendered = true;\n                    for (var x = 0; x < noTileX; x++) {\n                        for (var y = 0; y < noTileY; y++) {\n                            var jsonObject = null;\n                            var zoomFactor_3 = this.retrieveCurrentZoomFactor();\n                            if (zoomFactor_3 > 2 && pageWidth_1 <= 1200) {\n                                viewPortWidth_1 = 700;\n                            }\n                            else {\n                                viewPortWidth_1 = 1200;\n                            }\n                            if (!proxy.pdfViewer.tileRenderingSettings.enableTileRendering) {\n                                viewPortWidth_1 = 1200;\n                            }\n                            if (this.renderThumbnailImages && !this.clientSideRendering) {\n                                proxy.renderPage(object, pageIndex, imageSource);\n                                if (this.textrequestLists.indexOf(pageIndex) == -1) {\n                                    jsonObject = { pageStartIndex: pageIndex, pageEndIndex: pageIndex + 1, documentId: proxy.getDocumentId(), hashId: proxy.hashId, action: 'RenderPdfTexts', elementId: proxy.pdfViewer.element.id, uniqueId: proxy.documentId };\n                                    if (this.jsonDocumentId) {\n                                        jsonObject.documentId = this.jsonDocumentId;\n                                    }\n                                    this.textRequestHandler = new AjaxHandler(this.pdfViewer);\n                                    this.textRequestHandler.url = this.pdfViewer.serviceUrl + '/' + this.pdfViewer.serverActionSettings.renderTexts;\n                                    this.textRequestHandler.responseType = 'json';\n                                    if (!this.clientSideRendering) {\n                                        this.textRequestHandler.send(jsonObject);\n                                    }\n                                    this.textrequestLists.push(pageIndex);\n                                    proxy.textRequestHandler.onSuccess = function (result) {\n                                        // eslint-disable-next-line max-len\n                                        if ((proxy.pdfViewer.magnification && proxy.pdfViewer.magnification.isPinchZoomed) || !proxy.pageSize[parseInt(pageIndex.toString(), 10)]) {\n                                            return;\n                                        }\n                                        // eslint-disable-next-line\n                                        var data = result.data;\n                                        if (data) {\n                                            if (typeof data !== 'object') {\n                                                try {\n                                                    data = JSON.parse(data);\n                                                }\n                                                catch (error) {\n                                                    proxy.onControlError(500, data, proxy.pdfViewer.serverActionSettings.renderTexts);\n                                                    data = null;\n                                                }\n                                            }\n                                        }\n                                        if (data) {\n                                            proxy.pageTextRequestOnSuccess(data, proxy, pageIndex);\n                                        }\n                                    };\n                                    // eslint-disable-next-line\n                                    this.textRequestHandler.onFailure = function (result) {\n                                        // eslint-disable-next-line max-len\n                                        proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.renderTexts);\n                                    };\n                                    // eslint-disable-next-line\n                                    this.textRequestHandler.onError = function (result) {\n                                        proxy.openNotificationPopup();\n                                        // eslint-disable-next-line max-len\n                                        proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.renderTexts);\n                                    };\n                                    if (this.clientSideRendering) {\n                                        this.pdfViewer.pdfRendererModule.getDocumentText(jsonObject).then(function (data) {\n                                            proxy.pageTextRequestOnSuccess(data, proxy, pageIndex);\n                                        });\n                                    }\n                                }\n                            }\n                            else {\n                                // eslint-disable-next-line max-len\n                                jsonObject = {\n                                    xCoordinate: (x).toString(), yCoordinate: (y).toString(), viewPortWidth: (viewPortWidth_1).toString(), viewPortHeight: (viewPortHeight).toString(),\n                                    pageNumber: (pageIndex).toString(), hashId: proxy.hashId, tilecount: (tileCount).toString(), tileXCount: (noTileX).toString(), tileYCount: (noTileY).toString(),\n                                    // eslint-disable-next-line max-len\n                                    zoomFactor: (zoomFactor_3).toString(), action: 'RenderPdfPages', uniqueId: this.documentId, elementId: proxy.pdfViewer.element.id, digitalSignaturePresent: proxy.digitalSignaturePresent(pageIndex)\n                                };\n                                if (this.jsonDocumentId) {\n                                    // eslint-disable-next-line\n                                    jsonObject.documentId = this.jsonDocumentId;\n                                }\n                                proxy.pageRequestHandler = new AjaxHandler(this.pdfViewer);\n                                // eslint-disable-next-line max-len\n                                proxy.pageRequestHandler.url = proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.renderPages;\n                                proxy.pageRequestHandler.responseType = 'json';\n                                if (!isNullOrUndefined(proxy.hashId)) {\n                                    this.clientSideRendering ? '' : proxy.pageRequestHandler.send(jsonObject);\n                                }\n                                proxy.requestLists.push(proxy.documentId + '_' + pageIndex + '_' + x + '_' + y + '_' + zoomFactor_3);\n                                // eslint-disable-next-line\n                                proxy.pageRequestHandler.onSuccess = function (result) {\n                                    // eslint-disable-next-line max-len\n                                    if ((proxy.pdfViewer.magnification && proxy.pdfViewer.magnification.isPinchZoomed) || !proxy.pageSize[parseInt(pageIndex.toString(), 10)]) {\n                                        return;\n                                    }\n                                    // eslint-disable-next-line\n                                    var data = result.data;\n                                    var redirect = proxy.checkRedirection(data);\n                                    if (redirect) {\n                                        proxy.showLoadingIndicator(false);\n                                    }\n                                    else {\n                                        if (data) {\n                                            if (typeof data !== 'object') {\n                                                try {\n                                                    data = JSON.parse(data);\n                                                }\n                                                catch (error) {\n                                                    proxy.onControlError(500, data, proxy.pdfViewer.serverActionSettings.renderPages);\n                                                    data = null;\n                                                }\n                                            }\n                                        }\n                                        if (data) {\n                                            proxy.pageRequestOnSuccess(data, proxy, viewPortWidth_1, pageWidth_1, pageIndex);\n                                        }\n                                    }\n                                };\n                                // eslint-disable-next-line\n                                this.pageRequestHandler.onFailure = function (result) {\n                                    // eslint-disable-next-line max-len\n                                    proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.renderPages);\n                                };\n                                // eslint-disable-next-line\n                                this.pageRequestHandler.onError = function (result) {\n                                    proxy.openNotificationPopup();\n                                    // eslint-disable-next-line max-len\n                                    proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.renderPages);\n                                };\n                                if (this.clientSideRendering) {\n                                    var textDetailsId = proxy.documentId + '_' + pageIndex + '_textDetails';\n                                    var isTextNeed = proxy.pageTextDetails ? proxy.pageTextDetails[\"\" + textDetailsId] ? false : true : true;\n                                    if (viewPortWidth_1 >= pageWidth_1 || !proxy.pdfViewer.tileRenderingSettings.enableTileRendering) {\n                                        this.pdfViewerRunner.postMessage({ pageIndex: pageIndex, message: 'renderPage', zoomFactor: zoomFactor_3, isTextNeed: isTextNeed, textDetailsId: textDetailsId });\n                                    }\n                                    else {\n                                        this.showPageLoadingIndicator(pageIndex, true);\n                                        this.pdfViewerRunner.postMessage({\n                                            pageIndex: pageIndex,\n                                            message: 'renderImageAsTile',\n                                            zoomFactor: zoomFactor_3,\n                                            tileX: x,\n                                            tileY: y,\n                                            tileXCount: noTileX,\n                                            tileYCount: noTileY,\n                                            isTextNeed: isTextNeed,\n                                            textDetailsId: textDetailsId\n                                        });\n                                    }\n                                    this.pdfViewerRunner.onmessage = function (event) {\n                                        switch (event.data.message) {\n                                            case 'imageRendered':\n                                                if (event.data.message === 'imageRendered') {\n                                                    var canvas_3 = document.createElement('canvas');\n                                                    var _a = event.data, value = _a.value, width = _a.width, height = _a.height, pageIndex_1 = _a.pageIndex;\n                                                    canvas_3.width = width;\n                                                    canvas_3.height = height;\n                                                    var canvasContext = canvas_3.getContext('2d');\n                                                    var imageData = canvasContext.createImageData(width, height);\n                                                    imageData.data.set(value);\n                                                    canvasContext.putImageData(imageData, 0, 0);\n                                                    var imageUrl = canvas_3.toDataURL();\n                                                    var textBounds = event.data.textBounds;\n                                                    var textContent = event.data.textContent;\n                                                    var pageText = event.data.pageText;\n                                                    var rotation = event.data.rotation;\n                                                    var characterBounds = event.data.characterBounds;\n                                                    var hyperlinksDetails = proxy.pdfViewer.pdfRendererModule.getHyperlinks(pageIndex_1);\n                                                    var data_1 = ({ image: imageUrl, pageNumber: pageIndex_1, uniqueId: proxy.documentId, pageWidth: event.data.pageWidth, zoomFactor: event.data.zoomFactor, hyperlinks: hyperlinksDetails.hyperlinks, hyperlinkBounds: hyperlinksDetails.hyperlinkBounds, linkAnnotation: hyperlinksDetails.linkAnnotation, linkPage: hyperlinksDetails.linkPage, annotationLocation: hyperlinksDetails.annotationLocation, characterBounds: characterBounds });\n                                                    if (event.data.isTextNeed) {\n                                                        data_1.textBounds = textBounds;\n                                                        data_1.textContent = textContent;\n                                                        data_1.rotation = rotation;\n                                                        data_1.pageText = pageText;\n                                                        proxy.storeTextDetails(pageIndex_1, textBounds, textContent, pageText, rotation, characterBounds);\n                                                    }\n                                                    else {\n                                                        var textDetails = JSON.parse(proxy.pageTextDetails[\"\" + event.data.textDetailsId]);\n                                                        data_1.textBounds = textDetails.textBounds;\n                                                        data_1.textContent = textDetails.textContent;\n                                                        data_1.rotation = textDetails.rotation;\n                                                        data_1.pageText = textDetails.pageText;\n                                                        data_1.characterBounds = textDetails.characterBounds;\n                                                    }\n                                                    if (data_1 && data_1.image && data_1.uniqueId === proxy.documentId) {\n                                                        var currentPageWidth = (data_1.pageWidth && data_1.pageWidth > 0) ? data_1.pageWidth : pageWidth_1;\n                                                        proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.renderPages, data_1);\n                                                        var pageNumber = (data_1.pageNumber !== undefined) ? data_1.pageNumber : pageIndex_1;\n                                                        var blobObj = proxy.createBlobUrl(data_1.image.split('base64,')[1], 'image/png');\n                                                        var Url = URL || webkitURL;\n                                                        var blobUrl = Url.createObjectURL(blobObj);\n                                                        var storeObject = {\n                                                            // eslint-disable-next-line\n                                                            image: blobUrl, width: data_1.pageWidth, uniqueId: data_1.uniqueId, zoomFactor: data_1.zoomFactor\n                                                        };\n                                                        proxy.storeImageData(pageNumber, storeObject);\n                                                        proxy.pageRequestOnSuccess(data_1, proxy, viewPortWidth_1, pageWidth_1, pageIndex_1);\n                                                    }\n                                                }\n                                                break;\n                                            case 'renderTileImage':\n                                                if (event.data.message === 'renderTileImage') {\n                                                    var canvas_4 = document.createElement('canvas');\n                                                    var _b = event.data, value = _b.value, w = _b.w, h = _b.h, noTileX_1 = _b.noTileX, noTileY_1 = _b.noTileY, x_1 = _b.x, y_1 = _b.y, pageIndex_2 = _b.pageIndex;\n                                                    canvas_4.setAttribute('height', h);\n                                                    canvas_4.setAttribute('width', w);\n                                                    canvas_4.width = w;\n                                                    canvas_4.height = h;\n                                                    var canvasContext = canvas_4.getContext('2d');\n                                                    var imageData = canvasContext.createImageData(w, h);\n                                                    imageData.data.set(value);\n                                                    canvasContext.putImageData(imageData, 0, 0);\n                                                    var imageUrl = canvas_4.toDataURL();\n                                                    var tileWidth = w;\n                                                    var tileHeight = h;\n                                                    var textBounds = event.data.textBounds;\n                                                    var textContent = event.data.textContent;\n                                                    var pageText = event.data.pageText;\n                                                    var rotation = event.data.rotation;\n                                                    var characterBounds = event.data.characterBounds;\n                                                    var tileData = {\n                                                        image: imageUrl,\n                                                        noTileX: noTileX_1,\n                                                        noTileY: noTileY_1,\n                                                        pageNumber: pageIndex_2,\n                                                        tileX: x_1,\n                                                        tileY: y_1,\n                                                        uniqueId: proxy.documentId,\n                                                        pageWidth: pageWidth_1,\n                                                        width: tileWidth,\n                                                        transformationMatrix: {\n                                                            Values: [1, 0, 0, 1, tileWidth * x_1, tileHeight * y_1, 0, 0, 0]\n                                                        },\n                                                        zoomFactor: event.data.zoomFactor,\n                                                        characterBounds: characterBounds,\n                                                        isTextNeed: event.data.isTextNeed,\n                                                        textDetailsId: event.data.textDetailsId,\n                                                        textBounds: textBounds,\n                                                        textContent: textContent,\n                                                        pageText: pageText\n                                                    };\n                                                    if (tileData && tileData.image && tileData.uniqueId === proxy.documentId) {\n                                                        var currentPageWidth = (tileData.pageWidth && tileData.pageWidth > 0) ? tileData.pageWidth : pageWidth_1;\n                                                        proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.renderPages, tileData);\n                                                        var pageNumber = (tileData.pageNumber !== undefined) ? tileData.pageNumber : pageIndex_2;\n                                                        if (x_1 == 0 && y_1 == 0) {\n                                                            var blobObj = proxy.createBlobUrl(tileData.image.split('base64,')[1], 'image/png');\n                                                            var Url = URL || webkitURL;\n                                                            var blobUrl = Url.createObjectURL(blobObj);\n                                                            if (tileData.isTextNeed) {\n                                                                tileData.textBounds = textBounds;\n                                                                tileData.textContent = textContent;\n                                                                tileData.rotation = rotation;\n                                                                tileData.pageText = pageText;\n                                                                proxy.storeTextDetails(pageIndex_2, textBounds, textContent, pageText, rotation, characterBounds);\n                                                            }\n                                                            else {\n                                                                var textDetails = JSON.parse(proxy.pageTextDetails[\"\" + tileData.textDetailsId]);\n                                                                tileData.textBounds = textDetails.textBounds;\n                                                                tileData.textContent = textDetails.textContent;\n                                                                tileData.rotation = textDetails.rotation;\n                                                                tileData.pageText = textDetails.pageText;\n                                                                tileData.characterBounds = textDetails.characterBounds;\n                                                            }\n                                                            var storeObject = {\n                                                                // eslint-disable-next-line\n                                                                image: blobUrl, width: tileData.width, uniqueId: tileData.uniqueId, tileX: tileData.tileX, tileY: tileData.tileY,\n                                                                zoomFactor: tileData.zoomFactor, transformationMatrix: tileData.transformationMatrix, pageText: tileData.pageText, textContent: tileData.textContent, textBounds: tileData.textBounds\n                                                            };\n                                                            proxy.storeImageData(pageNumber, storeObject, tileData.tileX, tileData.tileY);\n                                                        }\n                                                        else {\n                                                            var blobObj = proxy.createBlobUrl(tileData.image.split('base64,')[1], 'image/png');\n                                                            var Url = URL || webkitURL;\n                                                            var blobUrl = Url.createObjectURL(blobObj);\n                                                            var storeObject = {\n                                                                // eslint-disable-next-line\n                                                                image: blobUrl, width: tileData.width, uniqueId: tileData.uniqueId, tileX: tileData.tileX, tileY: tileData.tileY, zoomFactor: tileData.zoomFactor, transformationMatrix: tileData.transformationMatrix\n                                                            };\n                                                            proxy.storeImageData(pageNumber, storeObject, tileData.tileX, tileData.tileY);\n                                                        }\n                                                        proxy.pageRequestOnSuccess(tileData, proxy, viewPortWidth_1, pageWidth_1, pageIndex_2, true);\n                                                    }\n                                                }\n                                                break;\n                                            case 'renderThumbnail':\n                                                proxy.pdfViewer.thumbnailViewModule.thumbnailOnMessage(event);\n                                                break;\n                                            case 'printImage':\n                                                proxy.pdfViewer.printModule.printOnMessage(event);\n                                                break;\n                                        }\n                                    };\n                                }\n                            }\n                        }\n                    }\n                }\n                if (this.renderedPagesList.indexOf(pageIndex) === -1) {\n                    proxy.renderedPagesList.push(pageIndex);\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.pageRequestOnSuccess = function (data, proxy, viewPortWidth, pageWidth, pageIndex, isTileRender) {\n        while (typeof data !== 'object') {\n            data = JSON.parse(data);\n        }\n        if (data.image && data.uniqueId === proxy.documentId) {\n            var currentPageWidth = (data.pageWidth && data.pageWidth > 0) ? data.pageWidth : pageWidth;\n            proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.renderPages, data);\n            var pageNumber = (data.pageNumber !== undefined) ? data.pageNumber : pageIndex;\n            if (((viewPortWidth >= currentPageWidth) || !proxy.pdfViewer.tileRenderingSettings.enableTileRendering) && !isTileRender) {\n                proxy.storeWinData(data, pageNumber);\n            }\n            else {\n                proxy.storeWinData(data, pageNumber, data.tileX, data.tileY);\n            }\n            if (((viewPortWidth >= currentPageWidth) || !proxy.pdfViewer.tileRenderingSettings.enableTileRendering) && !isTileRender) {\n                proxy.renderPage(data, pageNumber);\n            }\n            else {\n                proxy.tileRenderPage(data, pageNumber);\n            }\n        }\n    };\n    PdfViewerBase.prototype.pageTextRequestOnSuccess = function (data, proxy, pageIndex) {\n        while (typeof data !== 'object') {\n            data = JSON.parse(data);\n        }\n        if (data.documentTextCollection && data.uniqueId === proxy.documentId) {\n            proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.renderTexts, data);\n            var pageNumber = (data.pageNumber !== undefined) ? data.pageNumber : pageIndex;\n            proxy.storeWinData(data, pageNumber);\n            proxy.renderPage(data, pageIndex);\n        }\n    };\n    /**\n    * @private\n    */\n    PdfViewerBase.prototype.requestForTextExtraction = function (pageIndex, annotationObject) {\n        var jsonObject;\n        var proxy = this;\n        jsonObject = { pageStartIndex: pageIndex, pageEndIndex: pageIndex + 1, documentId: proxy.getDocumentId(), hashId: proxy.hashId, action: 'RenderPdfTexts', elementId: proxy.pdfViewer.element.id, uniqueId: proxy.documentId };\n        if (this.jsonDocumentId) {\n            jsonObject.documentId = this.jsonDocumentId;\n        }\n        this.textRequestHandler = new AjaxHandler(this.pdfViewer);\n        this.textRequestHandler.url = this.pdfViewer.serviceUrl + '/' + this.pdfViewer.serverActionSettings.renderTexts;\n        this.textRequestHandler.responseType = 'json';\n        if (!this.clientSideRendering) {\n            this.textRequestHandler.send(jsonObject);\n        }\n        this.textrequestLists.push(pageIndex);\n        proxy.textRequestHandler.onSuccess = function (result) {\n            // eslint-disable-next-line max-len\n            if ((proxy.pdfViewer.magnification && proxy.pdfViewer.magnification.isPinchZoomed) || !proxy.pageSize[parseInt(pageIndex.toString(), 10)]) {\n                return;\n            }\n            // eslint-disable-next-line\n            var data = result.data;\n            var redirect = proxy.checkRedirection(data);\n            if (!redirect) {\n                if (data) {\n                    if (typeof data !== 'object') {\n                        try {\n                            data = JSON.parse(data);\n                        }\n                        catch (error) {\n                            proxy.onControlError(500, data, proxy.pdfViewer.serverActionSettings.renderTexts);\n                            data = null;\n                        }\n                    }\n                }\n                if (data) {\n                    proxy.textRequestOnSuccess(data, proxy, pageIndex, annotationObject);\n                }\n            }\n        };\n        // eslint-disable-next-line\n        this.textRequestHandler.onFailure = function (result) {\n            // eslint-disable-next-line max-len\n            proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.renderTexts);\n        };\n        // eslint-disable-next-line\n        this.textRequestHandler.onError = function (result) {\n            proxy.openNotificationPopup();\n            // eslint-disable-next-line max-len\n            proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.renderTexts);\n        };\n        if (this.clientSideRendering) {\n            this.pdfViewer.pdfRendererModule.getDocumentText(jsonObject).then(function (data) {\n                proxy.textRequestOnSuccess(data, proxy, pageIndex, annotationObject);\n            });\n        }\n    };\n    PdfViewerBase.prototype.textRequestOnSuccess = function (data, proxy, pageIndex, annotationObject) {\n        while (typeof data !== 'object') {\n            data = JSON.parse(data);\n        }\n        if (data.documentTextCollection && data.uniqueId === proxy.documentId) {\n            proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.renderTexts, data);\n            var pageNumber = (data.pageNumber !== undefined) ? data.pageNumber : pageIndex;\n            proxy.storeWinData(data, pageNumber);\n            if (!isNullOrUndefined(annotationObject)) {\n                var markedBounds = annotationObject.bounds[0];\n                var pageCharText = data.documentTextCollection[0][parseInt(pageIndex.toString(), 10)].PageText.split('');\n                var characterBounds = data.characterBounds;\n                var textMarkupContent = proxy.textMarkUpContent(markedBounds, pageCharText, characterBounds);\n                annotationObject.textMarkupContent = textMarkupContent;\n                this.pdfViewer.annotationModule.storeAnnotations(pageIndex, annotationObject, '_annotations_textMarkup');\n            }\n            else {\n                proxy.renderPage(data, pageIndex);\n            }\n        }\n    };\n    /**\n    * @private\n    */\n    PdfViewerBase.prototype.textMarkUpContent = function (markedBounds, pageCharText, characterBounds) {\n        var textMarkupContent = '';\n        for (var j = 0; j < characterBounds.length; j++) {\n            var buffer = 0.5;\n            if (characterBounds[parseInt(j.toString(), 10)].Y >= markedBounds.Y - buffer && characterBounds[parseInt(j.toString(), 10)].X >= markedBounds.X - buffer && characterBounds[parseInt(j.toString(), 10)].Y <= markedBounds.Y + markedBounds.Height + buffer && characterBounds[parseInt(j.toString(), 10)].X <= markedBounds.X + markedBounds.Width + buffer) {\n                textMarkupContent += pageCharText[parseInt(j.toString(), 10)];\n            }\n        }\n        return textMarkupContent.replace((/(\\r\\n)/gm), '');\n    };\n    /**\n    * @private\n    * @returns {boolean}\n    */\n    PdfViewerBase.prototype.digitalSignaturePresent = function (pageIndex) {\n        var digitalSignaturePresent = false;\n        if (this.digitalSignaturePages && (this.digitalSignaturePages.length !== 0) && (this.digitalSignaturePages.indexOf(pageIndex) != -1)) {\n            digitalSignaturePresent = true;\n        }\n        return digitalSignaturePresent;\n    };\n    PdfViewerBase.prototype.pageRequestSent = function (pageIndex, tileX, tileY) {\n        var zoomFactor = this.retrieveCurrentZoomFactor();\n        var currentString = this.documentId + '_' + pageIndex + '_' + tileX + '_' + tileY + '_' + zoomFactor;\n        if (this.requestLists && this.requestLists.indexOf(currentString) > -1) {\n            return true;\n        }\n        return false;\n    };\n    /**\n     * @private\n     * @param {string} status - The status message.\n     * @param {string} errorMessage - The error message.\n     * @param {string} action - The action.\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.onControlError = function (status, errorMessage, action) {\n        this.openNotificationPopup();\n        this.pdfViewer.fireAjaxRequestFailed(status, errorMessage, action);\n    };\n    /**\n     * @param pageIndex\n     * @private\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.getStoredData = function (pageIndex, isTextSearch) {\n        var zoomFactor = this.retrieveCurrentZoomFactor();\n        if (this.pdfViewer.restrictZoomRequest && !this.pdfViewer.tileRenderingSettings.enableTileRendering) {\n            zoomFactor = 1;\n        }\n        // eslint-disable-next-line\n        var storedData = this.getWindowSessionStorage(pageIndex, zoomFactor) ? this.getWindowSessionStorage(pageIndex, zoomFactor) : this.getPinchZoomPage(pageIndex);\n        if (!storedData && isTextSearch) {\n            // eslint-disable-next-line\n            var storedTileData = this.clientSideRendering ? this.getStoredTileImageDetails(pageIndex, 0, 0, zoomFactor) : this.getWindowSessionStorageTile(pageIndex, 0, 0, zoomFactor);\n            if (storedTileData) {\n                storedData = storedTileData;\n            }\n        }\n        // eslint-disable-next-line\n        var data = null;\n        if (storedData) {\n            // eslint-disable-next-line\n            data = storedData;\n            if (!this.isPinchZoomStorage) {\n                data = JSON.parse(storedData);\n            }\n            this.isPinchZoomStorage = false;\n        }\n        return data;\n    };\n    /**\n     * @private\n     * @param  {any} data - The data.\n     * @param {number} pageIndex - The pageIndex.\n     * @param {number} tileX - The tileX.\n     * @param {number} tileY - The tileY.\n     * @returns {void}\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.storeWinData = function (data, pageIndex, tileX, tileY) {\n        var storeObject;\n        if (!data['image']) {\n            var pageItems = data.documentTextCollection[0][parseInt(pageIndex.toString(), 10)];\n            storeObject = {\n                // eslint-disable-next-line\n                textContent: data['textContent'], textBounds: data['textBounds'], pageText: pageItems.PageText, rotation: data['rotation'], uniqueId: data['uniqueId']\n            };\n            if (this.pageSize[parseInt(pageIndex.toString(), 10)]) {\n                // eslint-disable-next-line\n                this.pageSize[pageIndex].rotation = parseFloat(data['rotation']);\n            }\n            // eslint-disable-next-line\n            this.textLayer.characterBound[pageIndex] = data['characterBounds'];\n        }\n        else {\n            // eslint-disable-next-line\n            var blobObj = this.createBlobUrl(data['image'].split('base64,')[1], 'image/png');\n            // eslint-disable-next-line\n            var Url = URL || webkitURL;\n            var blobUrl = Url.createObjectURL(blobObj);\n            // eslint-disable-next-line\n            if ((isNaN(tileX) && isNaN(tileY)) || (tileX === 0 && tileY === 0)) {\n                storeObject = {\n                    // eslint-disable-next-line\n                    image: blobUrl, transformationMatrix: data['transformationMatrix'], hyperlinks: data['hyperlinks'], hyperlinkBounds: data['hyperlinkBounds'], linkAnnotation: data['linkAnnotation'], linkPage: data['linkPage'], annotationLocation: data['annotationLocation'],\n                    // eslint-disable-next-line\n                    textContent: data['textContent'], width: data['width'], textBounds: data['textBounds'], pageText: data['pageText'], rotation: data['rotation'], scaleFactor: data['scaleFactor'], uniqueId: data['uniqueId'], zoomFactor: data['zoomFactor'], tileX: tileX, tileY: tileY\n                };\n                if (this.pageSize[parseInt(pageIndex.toString(), 10)]) {\n                    // eslint-disable-next-line\n                    this.pageSize[pageIndex].rotation = parseFloat(data['rotation']);\n                }\n                // eslint-disable-next-line\n                this.textLayer.characterBound[pageIndex] = data['characterBounds'];\n            }\n            else {\n                storeObject = {\n                    // eslint-disable-next-line\n                    image: blobUrl, transformationMatrix: data['transformationMatrix'], tileX: tileX, tileY: tileY, width: data['width'], zoomFactor: data['zoomFactor']\n                };\n            }\n        }\n        // eslint-disable-next-line\n        var viewPortWidth = 816;\n        var pageWidth = 0;\n        if (this.pageSize[parseInt(pageIndex.toString(), 10)]) {\n            pageWidth = this.pageSize[parseInt(pageIndex.toString(), 10)].width;\n        }\n        this.manageSessionStorage(pageIndex, storeObject, tileX, tileY);\n    };\n    /**\n     * @private\n     * @param {XMLHttpRequest} request - The Xml request.\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.setCustomAjaxHeaders = function (request) {\n        for (var i = 0; i < this.pdfViewer.ajaxRequestSettings.ajaxHeaders.length; i++) {\n            // eslint-disable-next-line max-len\n            request.setRequestHeader(this.pdfViewer.ajaxRequestSettings.ajaxHeaders[parseInt(i.toString(), 10)].headerName, this.pdfViewer.ajaxRequestSettings.ajaxHeaders[parseInt(i.toString(), 10)].headerValue);\n        }\n    };\n    /**\n     * @private\n     * @param {number} pageIndex - Page index.\n     * @returns {object}\n     */\n    PdfViewerBase.prototype.getPinchZoomPage = function (pageIndex) {\n        // eslint-disable-next-line\n        for (var key in this.pinchZoomStorage) {\n            // eslint-disable-next-line\n            if (this.pinchZoomStorage.hasOwnProperty(key)) {\n                /* eslint-disable-next-line security/detect-object-injection */\n                if (this.pinchZoomStorage[key].index === pageIndex) {\n                    this.isPinchZoomStorage = true;\n                    /* eslint-disable-next-line security/detect-object-injection */\n                    return this.pinchZoomStorage[key].pinchZoomStorage;\n                }\n            }\n        }\n        return null;\n    };\n    /**\n     * @private\n     * @param {number} pageIndex - current page index.\n     * @param {number} zoomFactor - cuurent zoom factor\n     * @returns {string}\n     */\n    PdfViewerBase.prototype.getWindowSessionStorage = function (pageIndex, zoomFactor) {\n        return window.sessionStorage.getItem(this.documentId + '_' + pageIndex + '_' + zoomFactor);\n    };\n    /**\n     * @private\n     * @param {number} pageIndex - current page index.\n     * @param {number} tileX - cuurent tile x\n     * @param {number} tileY - cuurent tile y\n     * @param {number} zoomFactor - cuurent zoom factor\n     * @returns {string}\n     */\n    PdfViewerBase.prototype.getWindowSessionStorageTile = function (pageIndex, tileX, tileY, zoomFactor) {\n        return window.sessionStorage.getItem(this.documentId + '_' + pageIndex + '_' + tileX + '_' + tileY + '_' + zoomFactor);\n    };\n    /**\n     * @private\n     *\n     */\n    PdfViewerBase.prototype.getStoredTileImageDetails = function (pageIndex, tileX, tileY, zoomFactor) {\n        return this.pageImageDetails[this.documentId + '_' + pageIndex + '_' + tileX + '_' + tileY + '_' + zoomFactor + '_imageUrl'] || null;\n    };\n    /**\n     * @private\n     * @returns {number}\n     */\n    PdfViewerBase.prototype.retrieveCurrentZoomFactor = function () {\n        var zoomFactor = this.getZoomFactor();\n        if (this.pdfViewer.enableZoomOptimization) {\n            if ((zoomFactor) <= 1) {\n                zoomFactor = 1;\n            }\n            else if ((zoomFactor) > 1 && zoomFactor <= 2) {\n                zoomFactor = 2;\n            }\n            else if ((zoomFactor) > 2 && zoomFactor <= 3) {\n                zoomFactor = 3;\n            }\n            else if ((zoomFactor) > 3 && zoomFactor <= 4) {\n                zoomFactor = 4;\n            }\n            return zoomFactor;\n        }\n        else {\n            if (zoomFactor <= 0) {\n                zoomFactor = 1;\n            }\n            return zoomFactor;\n        }\n    };\n    /**\n     * @private\n     *\n     */\n    PdfViewerBase.prototype.storeTextDetails = function (pageNumber, textBounds, textContent, pageText, rotation, characterBounds) {\n        var textObject = ({ textBounds: textBounds, textContent: textContent, rotation: rotation, pageText: pageText, characterBounds: characterBounds });\n        if (this.pageSize[parseInt(pageNumber.toString(), 10)]) {\n            this.pageSize[parseInt(pageNumber.toString(), 10)].rotation = rotation;\n        }\n        this.textLayer.characterBound[parseInt(pageNumber.toString(), 10)] = characterBounds;\n        this.pageTextDetails[this.documentId + '_' + pageNumber + '_textDetails'] = JSON.stringify(textObject);\n    };\n    /**\n     * @private\n     *\n     */\n    PdfViewerBase.prototype.storeImageData = function (pageNumber, storeObject, tileX, tileY) {\n        var zoomFactor = !isNullOrUndefined(storeObject.zoomFactor) ? storeObject.zoomFactor : this.retrieveCurrentZoomFactor();\n        if (isNaN(tileX) && isNaN(tileY)) {\n            this.pageImageDetails[this.documentId + '_' + pageNumber + '_' + zoomFactor + '_imageUrl'] = JSON.stringify(storeObject);\n        }\n        else {\n            this.pageImageDetails[this.documentId + '_' + pageNumber + '_' + tileX + '_' + tileY + '_' + zoomFactor + '_imageUrl'] = JSON.stringify(storeObject);\n        }\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.manageSessionStorage = function (pageIndex, storeObject, tileX, tileY) {\n        // eslint-disable-next-line\n        var sessionSize = Math.round(JSON.stringify(window.sessionStorage).length / 1024);\n        var maxSessionSize = 5000;\n        if (sessionSize >= maxSessionSize) {\n            if (!this.isStorageExceed) {\n                // eslint-disable-next-line\n                var annotationList = [];\n                var formFieldsList = [];\n                for (var i = 0; i < window.sessionStorage.length; i++) {\n                    if (window.sessionStorage.key(i) && window.sessionStorage.key(i).split('_')[3]) {\n                        if (window.sessionStorage.key(i).split('_')[3] === 'annotations') {\n                            // eslint-disable-next-line max-len\n                            this.annotationStorage[window.sessionStorage.key(i)] = window.sessionStorage.getItem(window.sessionStorage.key(i));\n                            annotationList.push(window.sessionStorage.key(i));\n                        }\n                        else if (window.sessionStorage.key(i).split('_')[3] === 'formfields') {\n                            // eslint-disable-next-line max-len\n                            this.formFieldStorage[window.sessionStorage.key(i)] = window.sessionStorage.getItem(window.sessionStorage.key(i));\n                            formFieldsList.push(window.sessionStorage.key(i));\n                        }\n                        else if (window.sessionStorage.key(i).split('_')[3] === 'formDesigner') {\n                            this.formFieldStorage[window.sessionStorage.key(i)] = window.sessionStorage.getItem(window.sessionStorage.key(i));\n                            formFieldsList.push(window.sessionStorage.key(i));\n                        }\n                    }\n                }\n                if (annotationList) {\n                    for (var i = 0; i < annotationList.length; i++) {\n                        window.sessionStorage.removeItem(annotationList[parseInt(i.toString(), 10)]);\n                    }\n                }\n                if (formFieldsList) {\n                    for (var i = 0; i < formFieldsList.length; i++) {\n                        window.sessionStorage.removeItem(formFieldsList[parseInt(i.toString(), 10)]);\n                    }\n                }\n            }\n            this.isStorageExceed = true;\n            sessionSize = Math.round(JSON.stringify(window.sessionStorage).length / 1024);\n            if (sessionSize >= 5000) {\n                var storageLength = window.sessionStorage.length;\n                if (storageLength > 200) {\n                    storageLength = 200;\n                }\n                for (var i = 0; i < storageLength; i++) {\n                    if (window.sessionStorage.key(i) && window.sessionStorage.key(i).split('_')[3]) {\n                        if (window.sessionStorage.key(i).split('_')[3] !== 'annotations') {\n                            window.sessionStorage.removeItem(window.sessionStorage.key(i));\n                        }\n                    }\n                }\n            }\n        }\n        var zoomFactor = this.retrieveCurrentZoomFactor();\n        if (isNaN(tileX) && isNaN(tileY)) {\n            // eslint-disable-next-line max-len\n            window.sessionStorage.setItem(this.documentId + '_' + pageIndex + '_' + zoomFactor, JSON.stringify(storeObject));\n            this.sessionStorage.push(this.documentId + '_' + pageIndex + '_' + zoomFactor);\n        }\n        else {\n            this.sessionStorage.push(this.documentId + '_' + pageIndex + '_' + tileX + '_' + tileY + '_' + zoomFactor);\n            // eslint-disable-next-line max-len\n            window.sessionStorage.setItem(this.documentId + '_' + pageIndex + '_' + tileX + '_' + tileY + '_' + zoomFactor, JSON.stringify(storeObject));\n        }\n    };\n    /**\n     * @private\n     *\n     */\n    PdfViewerBase.prototype.createBlobUrl = function (base64String, contentType) {\n        var sliceSize = 512;\n        var byteCharacters = atob(base64String);\n        // eslint-disable-next-line\n        var byteArrays = [];\n        for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n            var slice = byteCharacters.slice(offset, offset + sliceSize);\n            // eslint-disable-next-line\n            var byteNumbers = new Array(slice.length);\n            for (var i = 0; i < slice.length; i++) {\n                /* eslint-disable-next-line security/detect-object-injection */\n                byteNumbers[i] = slice.charCodeAt(i);\n            }\n            // eslint-disable-next-line\n            var byteArray = new Uint8Array(byteNumbers);\n            byteArrays.push(byteArray);\n        }\n        // eslint-disable-next-line\n        var blob = new Blob(byteArrays, { type: contentType });\n        return blob;\n    };\n    PdfViewerBase.prototype.getRandomNumber = function () {\n        // eslint-disable-next-line\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n            // eslint-disable-next-line\n            var random = Math.random() * 16 | 0, v = c == 'x' ? random : (random & 0x3 | 0x8);\n            return random.toString(16);\n        });\n    };\n    PdfViewerBase.prototype.createGUID = function () {\n        // eslint-disable-next-line max-len\n        return 'Sync_PdfViewer_' + this.getRandomNumber();\n    };\n    /**\n     * @private\n     * @param {MouseEvent} event - The mouse event.\n     * @param {boolean} isNeedToSet - Is need to test.\n     * @returns {boolean} - Returns true or false.\n     */\n    PdfViewerBase.prototype.isClickedOnScrollBar = function (event, isNeedToSet) {\n        var isScrollBar = false;\n        if (isNeedToSet) {\n            this.setScrollDownValue(event.type, false);\n        }\n        // eslint-disable-next-line max-len\n        if ((this.viewerContainer.clientWidth + this.viewerContainer.offsetLeft) < event.clientX && event.clientX < (this.viewerContainer.offsetWidth + this.viewerContainer.offsetLeft)) {\n            isScrollBar = true;\n            if (isNeedToSet) {\n                this.setScrollDownValue(event.type, true);\n            }\n        }\n        // eslint-disable-next-line max-len\n        if ((this.viewerContainer.clientHeight + this.viewerContainer.offsetTop) < event.clientY && event.clientY < (this.viewerContainer.offsetHeight + this.viewerContainer.offsetTop)) {\n            isScrollBar = true;\n            if (isNeedToSet) {\n                this.setScrollDownValue(event.type, true);\n            }\n        }\n        return isScrollBar;\n    };\n    PdfViewerBase.prototype.setScrollDownValue = function (eventType, boolValue) {\n        if (eventType === 'mousedown') {\n            this.isScrollbarMouseDown = boolValue;\n        }\n    };\n    /**\n     * @private\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.disableTextSelectionMode = function () {\n        this.isTextSelectionDisabled = true;\n        this.viewerContainer.classList.remove('e-enable-text-selection');\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.clearTextSelection();\n        }\n        this.viewerContainer.classList.add('e-disable-text-selection');\n        this.viewerContainer.addEventListener('selectstart', function () {\n            return false;\n        });\n    };\n    /**\n     * @private\n     * @param {string} idString - The Id string.\n     * @returns {HTMLElement} - The html element.\n     */\n    PdfViewerBase.prototype.getElement = function (idString) {\n        return document.getElementById(this.pdfViewer.element.id + idString);\n    };\n    /**\n     * @private\n     * @param {number} pageIndex - The pageIndex\n     * @returns {number} - Returns number\n     */\n    PdfViewerBase.prototype.getPageWidth = function (pageIndex) {\n        if (this.pageSize[parseInt(pageIndex.toString(), 10)]) {\n            return this.pageSize[parseInt(pageIndex.toString(), 10)].width * this.getZoomFactor();\n        }\n        else {\n            return 0;\n        }\n    };\n    /**\n     * @private\n     * @param {number} pageIndex - The pageIndex\n     * @returns {number} - Returns number\n     */\n    PdfViewerBase.prototype.getPageHeight = function (pageIndex) {\n        if (this.pageSize[parseInt(pageIndex.toString(), 10)]) {\n            return this.pageSize[parseInt(pageIndex.toString(), 10)].height * this.getZoomFactor();\n        }\n        else {\n            return 0;\n        }\n    };\n    /**\n     * @private\n     * @param {number} pageIndex - The pageIndex.\n     * @returns {number} - Returns number\n     */\n    PdfViewerBase.prototype.getPageTop = function (pageIndex) {\n        if (this.pageSize[parseInt(pageIndex.toString(), 10)]) {\n            return this.pageSize[parseInt(pageIndex.toString(), 10)].top * this.getZoomFactor();\n        }\n        else {\n            return 0;\n        }\n    };\n    PdfViewerBase.prototype.isAnnotationToolbarHidden = function () {\n        if (this.pdfViewer.toolbarModule.annotationToolbarModule) {\n            return this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden;\n        }\n        else {\n            return true;\n        }\n    };\n    PdfViewerBase.prototype.isFormDesignerToolbarHidded = function () {\n        var formDesignerToolbar = this.pdfViewer.toolbarModule.formDesignerToolbarModule;\n        if (formDesignerToolbar) {\n            return formDesignerToolbar.isToolbarHidden;\n        }\n        else {\n            return true;\n        }\n    };\n    /**\n     * @private\n     * @returns {boolean} - Returns true or false.\n     */\n    PdfViewerBase.prototype.getTextMarkupAnnotationMode = function () {\n        if (this.isTextMarkupAnnotationModule()) {\n            return this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode;\n        }\n        else {\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.isNewFreeTextAnnotation = function () {\n        // eslint-disable-next-line max-len\n        if (this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.freeTextAnnotationModule) {\n            if (!this.pdfViewer.annotationModule.freeTextAnnotationModule.isNewFreeTextAnnot) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        }\n        else {\n            return true;\n        }\n    };\n    PdfViewerBase.prototype.getCurrentTextMarkupAnnotation = function () {\n        if (this.isTextMarkupAnnotationModule()) {\n            if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     * @returns {number} - Returns page number.\n     */\n    PdfViewerBase.prototype.getSelectTextMarkupCurrentPage = function () {\n        if (this.isTextMarkupAnnotationModule()) {\n            return this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage;\n        }\n        else {\n            return null;\n        }\n    };\n    /**\n     * @private\n     * @returns {boolean} - Retunrs true or false.\n     */\n    PdfViewerBase.prototype.getAnnotationToolStatus = function () {\n        if (this.pdfViewer.toolbarModule) {\n            return this.pdfViewer.toolbarModule.annotationToolbarModule.isAnnotationButtonsEnabled();\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     * @returns {boolean} - Retunrs true or false.\n     */\n    PdfViewerBase.prototype.getPopupNoteVisibleStatus = function () {\n        if (this.pdfViewer.annotationModule) {\n            return this.pdfViewer.annotationModule.isPopupNoteVisible;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     * @returns {TextMarkupAnnotation} - TextMarkupAnnotation.\n     */\n    PdfViewerBase.prototype.isTextMarkupAnnotationModule = function () {\n        if (this.pdfViewer.annotationModule) {\n            return this.pdfViewer.annotationModule.textMarkupAnnotationModule;\n        }\n        else {\n            return null;\n        }\n    };\n    /**\n     * @private\n     * @returns {boolean} - Returns true or false.\n     */\n    PdfViewerBase.prototype.isShapeAnnotationModule = function () {\n        if (this.pdfViewer.annotation) {\n            if (this.pdfViewer.annotation && this.pdfViewer.annotation.shapeAnnotationModule) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     * @returns {boolean} - Retunrs true or false.\n     */\n    PdfViewerBase.prototype.isFormDesignerModule = function () {\n        if (this.pdfViewer.formDesignerModule) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     * @returns {boolean} - Retunrs true or false.\n     */\n    PdfViewerBase.prototype.isCalibrateAnnotationModule = function () {\n        if (this.pdfViewer.annotation) {\n            if (this.pdfViewer.annotation && this.pdfViewer.annotation.measureAnnotationModule) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     * @returns {boolean} - Retunrs true or false.\n     */\n    PdfViewerBase.prototype.isStampAnnotationModule = function () {\n        if (this.pdfViewer.annotation) {\n            if (this.pdfViewer.annotation && this.pdfViewer.annotation.stampAnnotationModule) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     * @returns {boolean} - Retunrs true or false.\n     */\n    PdfViewerBase.prototype.isInkAnnotationModule = function () {\n        if (this.pdfViewer.annotation) {\n            if (this.pdfViewer.annotation && this.pdfViewer.annotation.inkAnnotationModule) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     * @returns {boolean} - Retunrs true or false.\n     */\n    PdfViewerBase.prototype.isCommentAnnotationModule = function () {\n        if (this.pdfViewer.annotation) {\n            if (this.pdfViewer.annotation && this.pdfViewer.annotation.stickyNotesAnnotationModule) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     * @returns {boolean} - Retunrs true or false.\n     */\n    PdfViewerBase.prototype.isShapeBasedAnnotationsEnabled = function () {\n        // eslint-disable-next-line max-len\n        if (this.isShapeAnnotationModule() || this.isCalibrateAnnotationModule() || this.isStampAnnotationModule() || this.isCommentAnnotationModule() || this.isFormDesignerModule()) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     * @param {MouseEvent | PointerEvent | TouchEvent} e - Returns event.\n     * @returns {PointModel} - Returns points.\n     */\n    PdfViewerBase.prototype.getMousePosition = function (e) {\n        var touchArg;\n        var offsetX;\n        var offsetY;\n        var currentTarget = e.target.parentElement;\n        if (e.type.indexOf('touch') !== -1) {\n            touchArg = e;\n            if (this.pdfViewer.annotation || this.isDeviceiOS) {\n                var pageNumber = this.pdfViewer.currentPageNumber - 1;\n                if (this.pdfViewer.annotation && !isNaN(this.pdfViewer.annotation.getEventPageNumber(e))) {\n                    pageNumber = this.pdfViewer.annotation.getEventPageNumber(e);\n                }\n                if (isNaN(pageNumber) && this.pdfViewer.formDesignerModule) {\n                    pageNumber = this.pdfViewer.formDesignerModule.getEventPageNumber(e);\n                }\n                var pageDiv = this.getElement('_pageDiv_' + pageNumber);\n                if (pageDiv) {\n                    var pageCurrentRect = pageDiv.getBoundingClientRect();\n                    offsetX = touchArg.changedTouches[0].clientX - pageCurrentRect.left;\n                    offsetY = touchArg.changedTouches[0].clientY - pageCurrentRect.top;\n                }\n            }\n        }\n        else {\n            if (e.target.classList.contains('e-pv-hyperlink')) {\n                offsetX = e.offsetX + e.target.offsetLeft;\n                offsetY = e.offsetY + e.target.offsetTop;\n            }\n            else if (e.target.classList.contains('e-pv-text') && currentTarget) {\n                var targetParentRect = currentTarget.getBoundingClientRect();\n                offsetX = e.clientX - targetParentRect.left;\n                offsetY = e.clientY - targetParentRect.top;\n                // eslint-disable-next-line\n            }\n            else if (e.target && (e && e.path) && currentTarget && (currentTarget.classList.contains('foreign-object') || currentTarget.parentElement.classList.contains('foreign-object'))) {\n                // eslint-disable-next-line\n                var targetParentRect = void 0;\n                if (e.path[4].className === 'e-pv-page-div') {\n                    targetParentRect = e.path[4].getBoundingClientRect();\n                }\n                else {\n                    for (var i = 0; i < e.path.length; i++) {\n                        if (e.path[parseInt(i.toString(), 10)].className === 'e-pv-page-div') {\n                            targetParentRect = e.path[parseInt(i.toString(), 10)].getBoundingClientRect();\n                            break;\n                        }\n                    }\n                }\n                offsetX = e.clientX - targetParentRect.left;\n                offsetY = e.clientY - targetParentRect.top;\n                // eslint-disable-next-line\n            }\n            else if (e.target && currentTarget && currentTarget.classList.contains('foreign-object') || (e.target.classList.contains('e-pv-checkbox-div'))) {\n                // eslint-disable-next-line\n                var targetParentRect = void 0;\n                if ((e.target.classList.contains('e-pv-checkbox-div'))) {\n                    targetParentRect = e.target.offsetParent.offsetParent.offsetParent.offsetParent.getBoundingClientRect();\n                }\n                else {\n                    targetParentRect = e.target.offsetParent.offsetParent.offsetParent.getBoundingClientRect();\n                }\n                offsetX = e.clientX - targetParentRect.left;\n                offsetY = e.clientY - targetParentRect.top;\n            }\n            else {\n                offsetX = e.offsetX;\n                offsetY = e.offsetY;\n            }\n        }\n        return { x: offsetX, y: offsetY };\n    };\n    PdfViewerBase.prototype.getMouseEventArgs = function (position, args, evt, source) {\n        args.position = position;\n        var obj;\n        var objects;\n        if (!source) {\n            if (this.action === 'Drag' || this.action === 'ConnectorSourceEnd' || this.action === 'SegmentEnd' ||\n                this.action === 'OrthoThumb' || this.action === 'BezierSourceThumb' || this.action === 'BezierTargetThumb' ||\n                this.action === 'ConnectorTargetEnd' || this.action.indexOf('Rotate') !== -1 || this.action.indexOf('Resize') !== -1) {\n                obj = this.pdfViewer.selectedItems;\n                if (this.action === 'Drag' && obj && this.pdfViewer.selectedItems.annotations.length > 0) {\n                    obj = findActiveElement(evt, this, this.pdfViewer);\n                }\n                else if (this.action === 'Drag' && obj && this.pdfViewer.selectedItems.formFields.length > 0) {\n                    obj = findActiveElement(evt, this, this.pdfViewer);\n                }\n            }\n            else {\n                obj = findActiveElement(evt, this, this.pdfViewer);\n            }\n        }\n        else {\n            //   objects = this.diagram.findObjectsUnderMouse(this.currentPosition, source);\n            obj = findActiveElement(evt, this, this.pdfViewer);\n        }\n        var wrapper;\n        if (obj) {\n            wrapper = obj.wrapper;\n        }\n        if (!source) {\n            args.source = obj;\n            args.sourceWrapper = wrapper;\n        }\n        else {\n            args.target = obj;\n            args.targetWrapper = wrapper;\n        }\n        args.actualObject = this.eventArgs.actualObject;\n        //args.startTouches = this.touchStartList;\n        //args.moveTouches = this.touchMoveList;\n        return args;\n    };\n    /**\n     * @private\n     * @param {PdfAnnotationBaseModel} obj - The object.\n     * @param {PointModel} position - The position.\n     * @returns {Actions | string} - Returns the string.\n     */\n    PdfViewerBase.prototype.findToolToActivate = function (obj, position) {\n        position = { x: position.x / this.getZoomFactor(), y: position.y / this.getZoomFactor() };\n        var element = this.pdfViewer.selectedItems.wrapper;\n        if (element && obj) {\n            var selectorBnds = element.bounds; //let handle: SelectorModel = diagram.selectedItems;\n            var paddedBounds = new Rect(selectorBnds.x, selectorBnds.y, selectorBnds.width, selectorBnds.height);\n            if (obj.shapeAnnotationType === 'Line' || obj.shapeAnnotationType === 'LineWidthArrowHead' ||\n                obj.shapeAnnotationType === 'Distance' || obj.shapeAnnotationType === 'Polygon') {\n                var conn = this.pdfViewer.selectedItems.annotations[0];\n                if (conn) {\n                    for (var i = 0; i < conn.vertexPoints.length; i++) {\n                        if (contains(position, conn.vertexPoints[parseInt(i.toString(), 10)], 10) && conn.leaderHeight !== 0) {\n                            return 'ConnectorSegmentPoint_' + i;\n                        }\n                    }\n                }\n            }\n            if (obj.shapeAnnotationType === 'Distance') {\n                var leaderCount = 0;\n                var newPoint1 = void 0;\n                if (obj && obj.wrapper) {\n                    for (var i = 0; i < obj.wrapper.children.length; i++) {\n                        var elementAngle = Point.findAngle(obj.sourcePoint, obj.targetPoint);\n                        // eslint-disable-next-line\n                        var segment = obj.wrapper.children[i];\n                        if (segment.id.indexOf('leader') > -1) {\n                            var centerPoint = obj.wrapper.children[0].bounds.center;\n                            if (leaderCount === 0) {\n                                newPoint1 = { x: obj.sourcePoint.x, y: obj.sourcePoint.y - obj.leaderHeight };\n                                centerPoint = obj.sourcePoint;\n                            }\n                            else {\n                                newPoint1 = { x: obj.targetPoint.x, y: obj.targetPoint.y - obj.leaderHeight };\n                                centerPoint = obj.targetPoint;\n                            }\n                            var matrix_1 = identityMatrix();\n                            rotateMatrix(matrix_1, elementAngle, centerPoint.x, centerPoint.y);\n                            var rotatedPoint = transformPointByMatrix(matrix_1, { x: newPoint1.x, y: newPoint1.y });\n                            if (contains(position, rotatedPoint, 10)) {\n                                return 'Leader' + leaderCount;\n                            }\n                            leaderCount++;\n                        }\n                    }\n                }\n            }\n            var ten = this.pdfViewer.touchPadding;\n            if (this.getZoomFactor() <= 1.5) {\n                ten = ten / this.getZoomFactor();\n            }\n            var matrix = identityMatrix();\n            rotateMatrix(matrix, obj.rotateAngle + element.parentTransform, element.offsetX, element.offsetY);\n            //check for resizing tool\n            var x = element.offsetX - element.pivot.x * element.actualSize.width;\n            var y = element.offsetY - element.pivot.y * element.actualSize.height;\n            var rotateThumb = {\n                x: x + ((element.pivot.x === 0.5 ? element.pivot.x * 2 : element.pivot.x) * element.actualSize.width / 2),\n                y: y - 30 / this.getZoomFactor()\n            };\n            rotateThumb = transformPointByMatrix(matrix, rotateThumb);\n            if (obj.shapeAnnotationType === 'Stamp' && contains(position, rotateThumb, ten)) {\n                return 'Rotate';\n            }\n            paddedBounds = this.inflate(ten, paddedBounds);\n            if (paddedBounds.containsPoint(position, 0)) {\n                var action = this.checkResizeHandles(this.pdfViewer, element, position, matrix, x, y);\n                if (action) {\n                    return action;\n                }\n            }\n            if (this.pdfViewer.selectedItems.annotations.indexOf(obj) > -1) {\n                return 'Drag';\n            }\n            else if (this.pdfViewer.selectedItems.formFields.indexOf(obj) > -1 && this.pdfViewer.designerMode) {\n                return 'Drag';\n            }\n            return 'Select';\n        }\n        return this.pdfViewer.tool || 'Select';\n    };\n    PdfViewerBase.prototype.inflate = function (padding, bound) {\n        bound.x -= padding;\n        bound.y -= padding;\n        bound.width += padding * 2;\n        bound.height += padding * 2;\n        return bound;\n    };\n    PdfViewerBase.prototype.checkResizeHandles = function (diagram, element, position, matrix, x, y) {\n        var action;\n        if (!action) {\n            action = this.checkForResizeHandles(diagram, element, position, matrix, x, y);\n        }\n        if (action) {\n            return action;\n        }\n        return null;\n    };\n    PdfViewerBase.prototype.checkForResizeHandles = function (diagram, element, position, matrix, x, y) {\n        var forty = 40 / 1;\n        var ten = this.pdfViewer.touchPadding / 1;\n        // Resizer cursor adjustment factor for higher zoom values\n        var resizerBuffer = 1.9;\n        if (this.getZoomFactor() >= 2.0 && !Browser.isDevice) {\n            ten = ten / (this.getZoomFactor() / resizerBuffer);\n        }\n        if (element.actualSize.width < 40 || element.actualSize.height < 40 && Browser.isDevice) {\n            ten = ten / 2 * this.getZoomFactor() / 1;\n        }\n        var selectedItems = diagram.selectedItems;\n        var isStamp = false;\n        var isSticky = false;\n        var isNodeShape = false;\n        var isInk = false;\n        var resizerLocation = this.pdfViewer.annotationSelectorSettings.resizerLocation;\n        if (resizerLocation < 1 || resizerLocation > 3) {\n            resizerLocation = 3;\n        }\n        // eslint-disable-next-line max-len\n        if (this.pdfViewer.selectedItems.annotations[0] && (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Stamp'\n            || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'FreeText' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Image' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'HandWrittenSignature'\n            || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureText' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureImage')) {\n            isStamp = true;\n        }\n        // eslint-disable-next-line max-len\n        if (this.pdfViewer.selectedItems.annotations[0] && this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'StickyNotes') {\n            isSticky = true;\n        }\n        // eslint-disable-next-line max-len\n        if (this.pdfViewer.selectedItems.annotations[0] && this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Ink') {\n            isInk = true;\n        }\n        // eslint-disable-next-line max-len\n        if (this.pdfViewer.selectedItems.annotations[0] && (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Ellipse' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Radius' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Rectangle')) {\n            isNodeShape = true;\n        }\n        if (!isSticky) {\n            // eslint-disable-next-line max-len\n            if ((isInk || isStamp || (this.pdfViewer.selectedItems.annotations[0] && (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'HandWrittenSignature' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureText' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureImage')) || ((element.actualSize.width >= forty && element.actualSize.height >= forty) && isNodeShape && (resizerLocation === 1 || resizerLocation === 3)))) {\n                if (contains(position, transformPointByMatrix(matrix, { x: x + element.actualSize.width, y: y + element.actualSize.height }), ten)) {\n                    return 'ResizeSouthEast';\n                }\n                if (contains(position, transformPointByMatrix(matrix, { x: x, y: y + element.actualSize.height }), ten)) {\n                    return 'ResizeSouthWest';\n                }\n                if (contains(position, transformPointByMatrix(matrix, { x: x + element.actualSize.width, y: y }), ten)) {\n                    return 'ResizeNorthEast';\n                }\n                if (contains(position, transformPointByMatrix(matrix, { x: x, y: y }), ten)) {\n                    return 'ResizeNorthWest';\n                }\n            }\n            // eslint-disable-next-line max-len\n            if (isInk || !isNodeShape || (isNodeShape && (resizerLocation === 2 || resizerLocation === 3 || (!(element.actualSize.width >= forty && element.actualSize.height >= forty) && resizerLocation === 1)))) {\n                if (contains(\n                // eslint-disable-next-line max-len\n                position, transformPointByMatrix(matrix, { x: x + element.actualSize.width, y: y + element.actualSize.height / 2 }), ten) && !isStamp) {\n                    return 'ResizeEast';\n                }\n                // eslint-disable-next-line max-len\n                if (contains(position, transformPointByMatrix(matrix, { x: x, y: y + element.actualSize.height / 2 }), ten) && !isStamp) {\n                    return 'ResizeWest';\n                }\n                if (contains(\n                // eslint-disable-next-line max-len\n                position, transformPointByMatrix(matrix, { x: x + element.actualSize.width / 2, y: y + element.actualSize.height }), ten) && !isStamp) {\n                    return 'ResizeSouth';\n                }\n                // eslint-disable-next-line max-len\n                if (contains(position, transformPointByMatrix(matrix, { x: x + element.actualSize.width / 2, y: y }), ten) && !isStamp) {\n                    return 'ResizeNorth';\n                }\n            }\n        }\n        return null;\n    };\n    /**\n     * @private\n     * @param {string} fieldID - The fieldID\n     * @returns {boolean} - Returns true or false.\n     */\n    PdfViewerBase.prototype.checkSignatureFormField = function (fieldID) {\n        var isFormFieldSign = false;\n        if (this.pdfViewer.formDesignerModule) {\n            fieldID = fieldID.split('_')[0];\n        }\n        // eslint-disable-next-line\n        var formField = this.pdfViewer.nameTable[fieldID];\n        if (formField) {\n            if (formField.formFieldAnnotationType === 'SignatureField' || formField.formFieldAnnotationType === 'InitialField' || formField.annotName === 'SignatureField') {\n                isFormFieldSign = true;\n            }\n        }\n        return isFormFieldSign;\n    };\n    /**\n     * @private\n     * @param {MouseEvent | TouchEvent} evt - The event.\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.diagramMouseMove = function (evt) {\n        var allowServerDataBind = this.pdfViewer.allowServerDataBinding;\n        var pageDiv = this.getElement('_pageDiv_' + (this.currentPageNumber - 1));\n        this.pdfViewer.enableServerDataBinding(false);\n        this.currentPosition = this.getMousePosition(evt);\n        this.pdfViewer.firePageMouseover(this.currentPosition.x, this.currentPosition.y);\n        if (this.pdfViewer.annotation) {\n            this.activeElements.activePageID = this.pdfViewer.annotation.getEventPageNumber(evt);\n        }\n        else if (this.pdfViewer.formDesignerModule) {\n            this.activeElements.activePageID = this.pdfViewer.formDesignerModule.getEventPageNumber(evt);\n        }\n        var obj = findActiveElement(evt, this, this.pdfViewer);\n        if ((this.tool instanceof NodeDrawingTool) || (this.tool instanceof LineTool)) {\n            obj = this.pdfViewer.drawingObject;\n        }\n        var target;\n        var isFormFieldSign = this.pdfViewer.selectedItems.annotations.length > 0 ? this.checkSignatureFormField(this.pdfViewer.selectedItems.annotations[0].id) : false;\n        if ((Point.equals(this.currentPosition, this.prevPosition) === false || this.inAction)) {\n            if (this.isMouseDown === false) {\n                this.eventArgs = {};\n                var sourceDrawingElement = null;\n                if (obj) {\n                    this.tool = this.getTool(this.action);\n                    if (obj.wrapper) {\n                        sourceDrawingElement = obj.wrapper.children[0];\n                        if (sourceDrawingElement) {\n                            target = obj;\n                        }\n                    }\n                }\n                var eventTarget = evt.target;\n                this.action = this.findToolToActivate(obj, this.currentPosition);\n                // eslint-disable-next-line\n                if (obj && obj.annotationSettings && obj.annotationSettings.isLock) {\n                    if (this.action === 'Select') {\n                        if (!this.pdfViewer.annotationModule.checkAllowedInteractions('Select', obj)) {\n                            this.action = '';\n                        }\n                    }\n                    if (this.action === 'Drag') {\n                        if (!this.pdfViewer.annotationModule.checkAllowedInteractions('Move', obj)) {\n                            this.action = 'Select';\n                        }\n                    }\n                    // eslint-disable-next-line max-len\n                    if (this.action === 'ResizeSouthEast' || this.action === 'ResizeNorthEast' || this.action === 'ResizeNorthWest' || this.action === 'ResizeSouthWest' ||\n                        // eslint-disable-next-line max-len\n                        this.action === 'ResizeNorth' || this.action === 'ResizeWest' || this.action === 'ResizeEast' || this.action === 'ResizeSouth' || this.action.includes('ConnectorSegmentPoint') || this.action.includes('Leader')) {\n                        if (!this.pdfViewer.annotationModule.checkAllowedInteractions('Resize', obj)) {\n                            this.action = 'Select';\n                        }\n                    }\n                }\n                // eslint-disable-next-line max-len\n                if (!this.pdfViewer.designerMode && ((!isNullOrUndefined(target) && (!isNullOrUndefined(target.formFieldAnnotationType))) || isFormFieldSign)) {\n                    if (this.action === 'ResizeSouthEast' || this.action === 'ResizeNorthEast' || this.action === 'ResizeNorthWest' || this.action === 'ResizeSouthWest' ||\n                        // eslint-disable-next-line max-len\n                        this.action === 'ResizeNorth' || this.action === 'Drag' || this.action === 'ResizeWest' || this.action === 'ResizeEast' || this.action === 'ResizeSouth' || this.action.includes('ConnectorSegmentPoint') || this.action.includes('Leader')) {\n                        this.action = '';\n                    }\n                }\n                this.tool = this.getTool(this.action);\n                this.setCursor(eventTarget, evt);\n                if (this.pdfViewer.linkAnnotationModule && this.pdfViewer.selectedItems.annotations.length != 0 && this.pdfViewer.selectedItems.formFields.length != 0) {\n                    this.pdfViewer.linkAnnotationModule.disableHyperlinkNavigationUnderObjects(eventTarget, evt, this);\n                }\n            }\n            else {\n                if (!this.tool && this.action && this.action === 'Rotate') {\n                    this.tool = this.getTool(this.action);\n                    if (evt.target) {\n                        this.setCursor(evt.target, evt);\n                    }\n                }\n                // eslint-disable-next-line max-len\n                if (!this.pdfViewer.designerMode && ((!isNullOrUndefined(target) && (!isNullOrUndefined(target.formFieldAnnotationType))) || isFormFieldSign)) {\n                    if (this.action === 'ResizeSouthEast' || this.action === 'ResizeNorthEast' || this.action === 'ResizeNorthWest' || this.action === 'ResizeSouthWest' ||\n                        // eslint-disable-next-line max-len\n                        this.action === 'ResizeNorth' || this.action === 'Drag' || this.action === 'ResizeWest' || this.action === 'ResizeEast' || this.action === 'ResizeSouth' || this.action.includes('ConnectorSegmentPoint') || this.action.includes('Leader')) {\n                        this.action = '';\n                        this.tool = null;\n                    }\n                }\n                if (this.eventArgs && this.eventArgs.source) {\n                    var eventTarget = evt.target;\n                    this.updateDefaultCursor(this.eventArgs.source, eventTarget, evt);\n                }\n                else {\n                    this.setCursor(evt.target, evt);\n                }\n                this.diagramMouseActionHelper(evt);\n                if (this.tool) {\n                    var currentObject = obj;\n                    if (currentObject && currentObject.shapeAnnotationType === 'FreeText') {\n                        if (this.pdfViewer.freeTextSettings.allowEditTextOnly && this.action !== \"Ink\" &&\n                            (this.eventArgs.source && this.eventArgs.source.shapeAnnotationType === \"FreeText\")) {\n                            var eventTarget = event.target;\n                            eventTarget.style.cursor = 'default';\n                            this.tool = null;\n                        }\n                    }\n                    if (this.tool != null) {\n                        var info = { ctrlKey: evt.ctrlKey, shiftKey: evt.shiftKey };\n                        this.eventArgs.info = info;\n                        this.tool.mouseMove(this.eventArgs);\n                    }\n                }\n            }\n            if (this.pdfViewer.drawingObject && this.pdfViewer.drawingObject.formFieldAnnotationType && this.action !== 'Drag') {\n                if (!(this.tool instanceof ResizeTool)) {\n                    this.tool = this.getTool(this.action);\n                    if (this.tool instanceof NodeDrawingTool) {\n                        var obj_1 = this.pdfViewer.drawingObject;\n                        // eslint-disable-next-line\n                        var bounds = this.pdfViewer.formDesignerModule.updateFormFieldInitialSize(obj_1, obj_1.formFieldAnnotationType);\n                        var pageWidth = this.pageContainer.firstElementChild.clientWidth - bounds.width;\n                        var pageHeight = this.pageContainer.firstElementChild.clientHeight - bounds.height;\n                        if (this.pdfViewer.formDesignerModule && obj_1.formFieldAnnotationType\n                            && this.currentPosition.x < pageWidth && this.currentPosition.y < pageHeight) {\n                            // eslint-disable-next-line\n                            var formFieldElement = document.getElementById('FormField_helper_html_element');\n                            if (!formFieldElement) {\n                                // eslint-disable-next-line max-len\n                                this.pdfViewer.formDesignerModule.drawHelper(obj_1.formFieldAnnotationType, obj_1, evt);\n                            }\n                            else if (formFieldElement) {\n                                var previousActivePage = formFieldElement.parentElement.id.split(\"_text_\")[1] || formFieldElement.parentElement.id.split(\"_textLayer_\")[1] || formFieldElement.parentElement.id.split(\"_annotationCanvas_\")[1] || formFieldElement.parentElement.id.split(\"_pageDiv_\")[1];\n                                if (parseInt(previousActivePage) !== this.activeElements.activePageID) {\n                                    formFieldElement.remove(\"FormField_helper_html_element\");\n                                }\n                                else {\n                                    // eslint-disable-next-line\n                                    var point = this.getMousePosition(event);\n                                    if (obj_1.formFieldAnnotationType === 'Checkbox' && formFieldElement.firstElementChild.firstElementChild.lastElementChild) {\n                                        formFieldElement.firstElementChild.firstElementChild.lastElementChild.style.visibility = 'visible';\n                                    }\n                                    else if (obj_1.formFieldAnnotationType === 'SignatureField' || obj_1.formFieldAnnotationType === 'InitialField') {\n                                        formFieldElement.firstElementChild.firstElementChild.style.visibility = 'visible';\n                                        formFieldElement.firstElementChild.lastElementChild.style.visibility = 'visible';\n                                    }\n                                    else {\n                                        formFieldElement.firstElementChild.firstElementChild.style.visibility = 'visible';\n                                    }\n                                    formFieldElement.setAttribute('style', 'height:' + bounds.height + 'px; width:' + bounds.width + 'px;left:' + point.x + 'px; top:' + point.y + 'px;' +\n                                        'position:absolute;opacity: 0.5;');\n                                }\n                            }\n                        }\n                        else if (this.currentPosition.x > pageWidth || this.currentPosition.y > pageHeight) {\n                            // eslint-disable-next-line\n                            var formFieldElement = document.getElementById('FormField_helper_html_element');\n                            if (!formFieldElement) {\n                                // eslint-disable-next-line max-len\n                                this.pdfViewer.formDesignerModule.drawHelper(obj_1.formFieldAnnotationType, obj_1, evt);\n                            }\n                            else if (formFieldElement) {\n                                // eslint-disable-next-line\n                                var point = this.getMousePosition(event);\n                                formFieldElement.setAttribute('style', 'height:' + bounds.height + 'px; width:' + bounds.width + 'px;left:' + point.x + 'px; top:' + point.y + 'px;' +\n                                    'position:absolute;opacity: 0.5;');\n                                if ((this.currentPosition.x + parseInt(formFieldElement.style.width)) > parseInt(pageDiv.style.width)) {\n                                    if (obj_1.formFieldAnnotationType === 'Checkbox' && formFieldElement.firstElementChild.firstElementChild.lastElementChild) {\n                                        formFieldElement.firstElementChild.firstElementChild.lastElementChild.style.visibility = 'hidden';\n                                    }\n                                    else if (obj_1.formFieldAnnotationType === 'SignatureField' || obj_1.formFieldAnnotationType === 'InitialField') {\n                                        formFieldElement.firstElementChild.firstElementChild.style.visibility = 'hidden';\n                                        formFieldElement.firstElementChild.lastElementChild.style.visibility = 'hidden';\n                                    }\n                                    else {\n                                        formFieldElement.firstElementChild.firstElementChild.style.visibility = 'hidden';\n                                    }\n                                }\n                                else {\n                                    if (obj_1.formFieldAnnotationType === 'Checkbox' && formFieldElement.firstElementChild.firstElementChild.lastElementChild) {\n                                        formFieldElement.firstElementChild.firstElementChild.lastElementChild.style.visibility = 'visible';\n                                    }\n                                    else if (obj_1.formFieldAnnotationType === 'SignatureField' || obj_1.formFieldAnnotationType === 'InitialField') {\n                                        formFieldElement.firstElementChild.firstElementChild.style.visibility = 'visible';\n                                        formFieldElement.firstElementChild.lastElementChild.style.visibility = 'visible';\n                                    }\n                                    else {\n                                        formFieldElement.firstElementChild.firstElementChild.style.visibility = 'visible';\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n            this.prevPosition = this.currentPosition;\n        }\n        this.pdfViewer.enableServerDataBinding(allowServerDataBind, true);\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.updateDefaultCursor = function (source, target, event) {\n        // eslint-disable-next-line max-len\n        if (source && source.pageIndex !== undefined && source.pageIndex !== this.activeElements.activePageID && target) {\n            // eslint-disable-next-line\n            this.isPanMode ? target.style.cursor = 'grab' : target.style.cursor = 'default';\n        }\n        else {\n            this.setCursor(target, event);\n        }\n    };\n    /**\n     * @private\n     * @param {MouseEvent | TouchEvent} evt - The event.\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.diagramMouseLeave = function (evt) {\n        this.currentPosition = this.getMousePosition(evt);\n        if (this.pdfViewer.annotation) {\n            this.activeElements.activePageID = this.pdfViewer.annotation.getEventPageNumber(evt);\n        }\n        if (isNaN(this.activeElements.activePageID) && this.pdfViewer.formDesignerModule) {\n            this.activeElements.activePageID = this.pdfViewer.formDesignerModule.getEventPageNumber(evt);\n        }\n        var shapeElement = findActiveElement(evt, this, this.pdfViewer);\n        var mouseMoveforce = false;\n        var target;\n        if (Point.equals(this.currentPosition, this.prevPosition) === false || this.inAction) {\n            if (this.isMouseDown === false || mouseMoveforce) {\n                this.eventArgs = {};\n                var sourceElement = null;\n                if (shapeElement) {\n                    sourceElement = shapeElement.wrapper.children[0];\n                    if (sourceElement) {\n                        target = shapeElement;\n                    }\n                    mouseMoveforce = false;\n                }\n            }\n            else {\n                this.diagramMouseActionHelper(evt);\n                // eslint-disable-next-line max-len\n                if (this.tool && this.action !== 'Drag' && this.pdfViewer.tool !== 'Stamp' && this.tool.currentElement && this.tool.currentElement.shapeAnnotationType !== 'Stamp') {\n                    this.tool.mouseLeave(this.eventArgs);\n                    this.tool = null;\n                    if (this.pdfViewer.annotation) {\n                        this.pdfViewer.annotationModule.renderAnnotations(this.previousPage, null, null, null);\n                    }\n                }\n            }\n            this.prevPosition = this.currentPosition;\n        }\n    };\n    PdfViewerBase.prototype.diagramMouseActionHelper = function (evt) {\n        this.eventArgs.position = this.currentPosition;\n        if (this.action === 'Drag' &&\n            this.eventArgs.source instanceof Selector) {\n            this.getMouseEventArgs(this.currentPosition, this.eventArgs, evt);\n        }\n        this.getMouseEventArgs(this.currentPosition, this.eventArgs, evt, this.eventArgs.source);\n        this.inAction = true;\n        this.initialEventArgs = null;\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.setCursor = function (eventTarget, event) {\n        // eslint-disable-next-line max-len\n        var freeTextAnnotModule = this.pdfViewer.annotationModule ? this.pdfViewer.annotationModule.freeTextAnnotationModule : null;\n        var cursorType;\n        if (this.tool instanceof ResizeTool) {\n            if (this.tool.corner === 'ResizeNorthWest') {\n                cursorType = this.setResizerCursorType();\n                eventTarget.style.cursor = isNullOrUndefined(cursorType) ? 'nw-resize' : cursorType;\n            }\n            else if (this.tool.corner === 'ResizeNorthEast') {\n                cursorType = this.setResizerCursorType();\n                eventTarget.style.cursor = isNullOrUndefined(cursorType) ? 'ne-resize' : cursorType;\n            }\n            else if (this.tool.corner === 'ResizeSouthWest') {\n                cursorType = this.setResizerCursorType();\n                eventTarget.style.cursor = isNullOrUndefined(cursorType) ? 'sw-resize' : cursorType;\n            }\n            else if (this.tool.corner === 'ResizeSouthEast') {\n                cursorType = this.setResizerCursorType();\n                eventTarget.style.cursor = isNullOrUndefined(cursorType) ? 'se-resize' : cursorType;\n            }\n            else if (this.tool.corner === 'ResizeNorth') {\n                cursorType = this.setResizerCursorType();\n                eventTarget.style.cursor = isNullOrUndefined(cursorType) ? 'n-resize' : cursorType;\n            }\n            else if (this.tool.corner === 'ResizeWest') {\n                cursorType = this.setResizerCursorType();\n                eventTarget.style.cursor = isNullOrUndefined(cursorType) ? 'w-resize' : cursorType;\n            }\n            else if (this.tool.corner === 'ResizeEast') {\n                cursorType = this.setResizerCursorType();\n                eventTarget.style.cursor = isNullOrUndefined(cursorType) ? 'e-resize' : cursorType;\n            }\n            else if (this.tool.corner === 'ResizeSouth') {\n                cursorType = this.setResizerCursorType();\n                eventTarget.style.cursor = isNullOrUndefined(cursorType) ? 's-resize' : cursorType;\n            }\n        }\n        else if (this.isCommentIconAdded && this.isAddComment) {\n            eventTarget.style.cursor = 'crosshair';\n        }\n        else if (this.pdfViewer.enableHandwrittenSignature && this.isNewSignatureAdded && this.tool instanceof StampTool) {\n            eventTarget.style.cursor = 'crosshair';\n        }\n        else if (this.tool instanceof MoveTool) {\n            eventTarget.style.cursor = 'move';\n            // eslint-disable-next-line max-len\n        }\n        else if (this.tool instanceof NodeDrawingTool || this.tool instanceof LineTool || this.tool instanceof PolygonDrawingTool || (freeTextAnnotModule && freeTextAnnotModule.isNewAddedAnnot) || this.tool instanceof InkDrawingTool) {\n            eventTarget.style.cursor = 'crosshair';\n        }\n        else if (this.tool instanceof ConnectTool) {\n            if (this.tool.endPoint && this.tool.endPoint.indexOf('Leader0')) {\n                cursorType = this.setResizerCursorType();\n                eventTarget.style.cursor = isNullOrUndefined(cursorType) ? 'nw-resize' : cursorType;\n            }\n            else if (this.tool.endPoint && this.tool.endPoint.indexOf('Leader1')) {\n                cursorType = this.setResizerCursorType();\n                eventTarget.style.cursor = isNullOrUndefined(cursorType) ? 'ne-resize' : cursorType;\n            }\n            else if (this.tool.endPoint && this.tool.endPoint.indexOf('ConnectorSegmentPoint')) {\n                eventTarget.style.cursor = 'sw-resize';\n            }\n        }\n        else {\n            if (eventTarget.classList.contains('e-pv-text')) {\n                eventTarget.style.cursor = 'text';\n            }\n            else if (eventTarget.classList.contains('e-pv-hyperlink')) {\n                eventTarget.style.cursor = 'pointer';\n            }\n            else if (this.isPanMode) {\n                if (this.isViewerMouseDown && event.type === 'mousemove') {\n                    eventTarget.style.cursor = 'grabbing';\n                }\n                else {\n                    var obj = findActiveElement(event, this, this.pdfViewer);\n                    if (obj && event.type === 'mousemove') {\n                        eventTarget.style.cursor = 'pointer';\n                        // eslint-disable-next-line max-len\n                        var currentObject = obj;\n                        // eslint-disable-next-line\n                        var currentPosition = this.getMousePosition(event);\n                        // eslint-disable-next-line\n                        var relativePosition = this.relativePosition(event);\n                        // eslint-disable-next-line\n                        var viewerPositions = { left: relativePosition.x, top: relativePosition.y };\n                        // eslint-disable-next-line\n                        var mousePositions = { left: currentPosition.x, top: currentPosition.y };\n                        // eslint-disable-next-line\n                        var annotationSettings = { opacity: currentObject.opacity, fillColor: currentObject.fillColor, strokeColor: currentObject.strokeColor, thicknes: currentObject.thickness, author: currentObject.author, subject: currentObject.subject, modifiedDate: currentObject.modifiedDate };\n                        // eslint-disable-next-line max-len\n                        this.isMousedOver = true;\n                        var isFormField = this.checkSignatureFormField(currentObject.id);\n                        if (currentObject.formFieldAnnotationType) {\n                            this.isFormFieldMousedOver = true;\n                            var field_1 = {\n                                // eslint-disable-next-line\n                                value: currentObject.value, fontFamily: currentObject.fontFamily, fontSize: currentObject.fontSize, fontStyle: currentObject.fontStyle,\n                                // eslint-disable-next-line max-len\n                                color: currentObject.color, backgroundColor: currentObject.backgroundColor, borderColor: currentObject.borderColor,\n                                // eslint-disable-next-line\n                                thickness: currentObject.thickness, alignment: currentObject.alignment, isReadonly: currentObject.isReadonly, visibility: currentObject.visibility,\n                                // eslint-disable-next-line\n                                maxLength: currentObject.maxLength, isRequired: currentObject.isRequired, isPrint: currentObject.isPrint, rotation: currentObject.rotateAngle, tooltip: currentObject.tooltip, options: currentObject.options,\n                                // eslint-disable-next-line\n                                isChecked: currentObject.isChecked, isSelected: currentObject.isSelected\n                            };\n                            this.pdfViewer.fireFormFieldMouseoverEvent('formFieldMouseover', field_1, currentObject.pageIndex, relativePosition.x, relativePosition.y, currentPosition.x, currentPosition.y);\n                        }\n                        else {\n                            if (!isFormField)\n                                // eslint-disable-next-line max-len\n                                this.pdfViewer.fireAnnotationMouseover(currentObject.annotName, currentObject.pageIndex, currentObject.shapeAnnotationType, currentObject.bounds, annotationSettings, mousePositions, viewerPositions);\n                        }\n                    }\n                    else {\n                        eventTarget.style.cursor = 'grab';\n                        if (this.isMousedOver) {\n                            var pageIndex = void 0;\n                            if (this.pdfViewer.formDesignerModule) {\n                                pageIndex = this.pdfViewer.formDesignerModule.getEventPageNumber(event);\n                            }\n                            else {\n                                pageIndex = this.pdfViewer.annotation.getEventPageNumber(event);\n                            }\n                            if (this.isFormFieldMousedOver) {\n                                this.pdfViewer.fireFormFieldMouseLeaveEvent('formFieldMouseLeave', null, pageIndex);\n                            }\n                            else {\n                                this.pdfViewer.fireAnnotationMouseLeave(pageIndex);\n                            }\n                            this.isMousedOver = false;\n                            this.isFormFieldMousedOver = false;\n                        }\n                    }\n                }\n            }\n            else {\n                var obj = findActiveElement(event, this, this.pdfViewer);\n                if (obj && this.pdfViewer.selectedItems.annotations.length === 0 && event.type === 'mousemove') {\n                    var currentObject = obj;\n                    // eslint-disable-next-line\n                    var annotationObject = this.pdfViewer.nameTable[currentObject.id];\n                    // eslint-disable-next-line max-len\n                    if (annotationObject.shapeAnnotationType !== 'HandWrittenSignature' && annotationObject.shapeAnnotationType !== 'Ink' && annotationObject.annotationSettings && annotationObject.annotationSettings.isLock !== undefined) {\n                        annotationObject.annotationSettings.isLock = JSON.parse(annotationObject.annotationSettings.isLock);\n                    }\n                    if (annotationObject.annotationSettings && annotationObject.annotationSettings.isLock) {\n                        eventTarget.style.cursor = 'default';\n                    }\n                    else {\n                        eventTarget.style.cursor = 'pointer';\n                    }\n                    // eslint-disable-next-line\n                    var currentPosition = this.getMousePosition(event);\n                    // eslint-disable-next-line\n                    var relativePosition = this.relativePosition(event);\n                    // eslint-disable-next-line\n                    var viewerPositions = { left: relativePosition.x, top: relativePosition.y };\n                    // eslint-disable-next-line\n                    var mousePositions = { left: currentPosition.x, top: currentPosition.y };\n                    // eslint-disable-next-line\n                    var annotationSettings = { opacity: currentObject.opacity, fillColor: currentObject.fillColor, strokeColor: currentObject.strokeColor, thicknes: currentObject.thickness, author: currentObject.author, subject: currentObject.subject, modifiedDate: currentObject.modifiedDate };\n                    // eslint-disable-next-line max-len\n                    this.isMousedOver = true;\n                    var isFormField = this.checkSignatureFormField(currentObject.id);\n                    if (currentObject.formFieldAnnotationType) {\n                        this.isFormFieldMousedOver = true;\n                        var field_2 = {\n                            // eslint-disable-next-line\n                            value: currentObject.value, fontFamily: currentObject.fontFamily, fontSize: currentObject.fontSize, fontStyle: currentObject.fontStyle,\n                            // eslint-disable-next-line max-len\n                            color: currentObject.color, backgroundColor: currentObject.backgroundColor, borderColor: currentObject.borderColor,\n                            // eslint-disable-next-line\n                            thickness: currentObject.thickness, alignment: currentObject.alignment, isReadonly: currentObject.isReadonly, visibility: currentObject.visibility,\n                            // eslint-disable-next-line\n                            maxLength: currentObject.maxLength, isRequired: currentObject.isRequired, isPrint: currentObject.isPrint, rotation: currentObject.rotateAngle, tooltip: currentObject.tooltip, options: currentObject.options,\n                            // eslint-disable-next-line\n                            isChecked: currentObject.isChecked, isSelected: currentObject.isSelected\n                        };\n                        this.fromTarget = currentObject;\n                        this.pdfViewer.fireFormFieldMouseoverEvent('formFieldMouseover', field_2, currentObject.pageIndex, relativePosition.x, relativePosition.y, currentPosition.x, currentPosition.y);\n                    }\n                    else {\n                        if (!isFormField)\n                            // eslint-disable-next-line max-len\n                            this.pdfViewer.fireAnnotationMouseover(currentObject.annotName, currentObject.pageIndex, currentObject.shapeAnnotationType, currentObject.bounds, annotationSettings, mousePositions, viewerPositions);\n                    }\n                }\n                else if (!this.pdfViewer.formDesignerModule && event.target.classList.contains('e-pdfviewer-formFields')) {\n                    var pageIndex = this.pdfViewer.annotation.getEventPageNumber(event);\n                    var currentPosition = this.getMousePosition(event);\n                    var relativePosition = this.relativePosition(event);\n                    var viewerPositions = { left: relativePosition.x, top: relativePosition.y };\n                    var mousePositions = { left: currentPosition.x, top: currentPosition.y };\n                    var dataJson = this.getItemFromSessionStorage('_formfields');\n                    var data = JSON.parse(dataJson);\n                    for (var i = 0; i < data.length; i++) {\n                        if (data[parseInt(i.toString(), 10)].FieldName === event.target.name) {\n                            var field = { name: data[parseInt(i.toString(), 10)].FieldName };\n                        }\n                    }\n                    this.isMousedOver = true;\n                    this.isFormFieldMousedOver = true;\n                    this.pdfViewer.fireFormFieldMouseoverEvent('formFieldMouseover', field, pageIndex, relativePosition.x, relativePosition.y, currentPosition.x, currentPosition.y);\n                }\n                else {\n                    if (this.isMousedOver) {\n                        var pageIndex = void 0;\n                        if (this.pdfViewer.formDesignerModule) {\n                            pageIndex = this.pdfViewer.formDesignerModule.getEventPageNumber(event);\n                        }\n                        else {\n                            pageIndex = this.pdfViewer.annotation.getEventPageNumber(event);\n                        }\n                        if (this.isFormFieldMousedOver) {\n                            if (this.fromTarget) {\n                                var field_3 = {\n                                    // eslint-disable-next-line\n                                    name: this.fromTarget.name, id: this.fromTarget.id, value: this.fromTarget.value, fontFamily: this.fromTarget.fontFamily, fontSize: this.fromTarget.fontSize, fontStyle: this.fromTarget.fontStyle,\n                                    // eslint-disable-next-line max-len\n                                    color: this.fromTarget.color, backgroundColor: this.fromTarget.backgroundColor, borderColor: this.fromTarget.borderColor,\n                                    // eslint-disable-next-line\n                                    thickness: this.fromTarget.thickness, alignment: this.fromTarget.alignment, isReadonly: this.fromTarget.isReadonly, visibility: this.fromTarget.visibility,\n                                    // eslint-disable-next-line\n                                    maxLength: this.fromTarget.maxLength, isRequired: this.fromTarget.isRequired, isPrint: this.fromTarget.isPrint, rotation: this.fromTarget.rotateAngle, tooltip: this.fromTarget.tooltip, options: this.fromTarget.options,\n                                    // eslint-disable-next-line\n                                    isChecked: this.fromTarget.isChecked, isSelected: this.fromTarget.isSelected\n                                };\n                                this.pdfViewer.fireFormFieldMouseLeaveEvent('formFieldMouseLeave', field_3, pageIndex);\n                            }\n                            else {\n                                this.pdfViewer.fireFormFieldMouseLeaveEvent('formFieldMouseLeave', null, pageIndex);\n                            }\n                        }\n                        else {\n                            this.pdfViewer.fireAnnotationMouseLeave(pageIndex);\n                        }\n                        this.isMousedOver = false;\n                        this.isFormFieldMousedOver = false;\n                        eventTarget.style.cursor = 'default';\n                    }\n                    if (obj && this.pdfViewer.selectedItems.annotations.length === 1 && event.type === 'mousemove') {\n                        eventTarget.style.cursor = 'pointer';\n                    }\n                    else {\n                        eventTarget.style.cursor = 'default';\n                    }\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.setResizerCursorType = function () {\n        var cursorType;\n        // eslint-disable-next-line max-len\n        if (this.pdfViewer.selectedItems.annotations[0] && isNullOrUndefined(this.pdfViewer.selectedItems.annotations[0].annotationSelectorSettings.resizerCursorType)) {\n            if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'FreeText') {\n                // eslint-disable-next-line max-len\n                cursorType = !isNullOrUndefined(this.pdfViewer.freeTextSettings.annotationSelectorSettings) ? this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerCursorType : null;\n            }\n            else if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Stamp') {\n                // eslint-disable-next-line max-len\n                cursorType = !isNullOrUndefined(this.pdfViewer.stampSettings.annotationSelectorSettings) ? this.pdfViewer.stampSettings.annotationSelectorSettings.resizerCursorType : null;\n            }\n            else if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'HandWrittenSignature' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureText' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureImage') {\n                // eslint-disable-next-line max-len\n                cursorType = !isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings) ? this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerCursorType : null;\n            }\n            else if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Ink') {\n                // eslint-disable-next-line max-len\n                cursorType = !isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings) ? this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerCursorType : null;\n            }\n            else if (!this.pdfViewer.selectedItems.annotations[0].measureType) {\n                if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Line') {\n                    // eslint-disable-next-line max-len\n                    cursorType = !isNullOrUndefined(this.pdfViewer.lineSettings.annotationSelectorSettings) ? this.pdfViewer.lineSettings.annotationSelectorSettings.resizerCursorType : null;\n                }\n                else if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'LineWidthArrowHead') {\n                    // eslint-disable-next-line max-len\n                    cursorType = !isNullOrUndefined(this.pdfViewer.arrowSettings.annotationSelectorSettings) ? this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerCursorType : null;\n                }\n                else if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Rectangle') {\n                    // eslint-disable-next-line max-len\n                    cursorType = !isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings) ? this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerCursorType : null;\n                }\n                else if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Ellipse') {\n                    // eslint-disable-next-line max-len\n                    cursorType = !isNullOrUndefined(this.pdfViewer.circleSettings.annotationSelectorSettings) ? this.pdfViewer.circleSettings.annotationSelectorSettings.resizerCursorType : null;\n                }\n                else if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Polygon') {\n                    // eslint-disable-next-line max-len\n                    cursorType = !isNullOrUndefined(this.pdfViewer.polygonSettings.annotationSelectorSettings) ? this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerCursorType : null;\n                }\n            }\n            else if (this.pdfViewer.selectedItems.annotations[0].measureType) {\n                if (this.pdfViewer.selectedItems.annotations[0].subject === 'Distance calculation') {\n                    // eslint-disable-next-line max-len\n                    cursorType = !isNullOrUndefined(this.pdfViewer.distanceSettings.annotationSelectorSettings) ? this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerCursorType : null;\n                }\n                else if (this.pdfViewer.selectedItems.annotations[0].subject === 'Perimeter calculation') {\n                    // eslint-disable-next-line max-len\n                    cursorType = !isNullOrUndefined(this.pdfViewer.perimeterSettings.annotationSelectorSettings) ? this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerCursorType : null;\n                }\n                else if (this.pdfViewer.selectedItems.annotations[0].subject === 'Area calculation') {\n                    // eslint-disable-next-line max-len\n                    cursorType = !isNullOrUndefined(this.pdfViewer.areaSettings.annotationSelectorSettings) ? this.pdfViewer.areaSettings.annotationSelectorSettings.resizerCursorType : null;\n                }\n                else if (this.pdfViewer.selectedItems.annotations[0].subject === 'Radius calculation') {\n                    // eslint-disable-next-line max-len\n                    cursorType = !isNullOrUndefined(this.pdfViewer.radiusSettings.annotationSelectorSettings) ? this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerCursorType : null;\n                }\n                else if (this.pdfViewer.selectedItems.annotations[0].subject === 'Volume calculation') {\n                    // eslint-disable-next-line max-len\n                    cursorType = !isNullOrUndefined(this.pdfViewer.volumeSettings.annotationSelectorSettings) ? this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerCursorType : null;\n                }\n            }\n        }\n        else {\n            if (this.pdfViewer.selectedItems.annotations[0]) {\n                cursorType = this.pdfViewer.selectedItems.annotations[0].annotationSelectorSettings.resizerCursorType;\n            }\n        }\n        if (!cursorType) {\n            cursorType = this.pdfViewer.annotationSelectorSettings.resizerCursorType;\n        }\n        return cursorType;\n    };\n    /**\n     * @private\n     * @param {Actions | string} action - The actions.\n     * @returns {ToolBase} - Returns tools.\n     */\n    PdfViewerBase.prototype.getTool = function (action) {\n        switch (action) {\n            case 'Select':\n                return new SelectTool(this.pdfViewer, this);\n            case 'Drag':\n                return new MoveTool(this.pdfViewer, this);\n            case 'ResizeSouthEast':\n            case 'ResizeSouthWest':\n            case 'ResizeNorthEast':\n            case 'ResizeNorthWest':\n            case 'ResizeSouth':\n            case 'ResizeNorth':\n            case 'ResizeWest':\n            case 'ResizeEast':\n                return new ResizeTool(this.pdfViewer, this, action);\n            case 'ConnectorSourceEnd':\n            case 'ConnectorTargetEnd':\n            case 'Leader':\n            case 'ConnectorSegmentPoint':\n                return new ConnectTool(this.pdfViewer, this, action);\n            case 'DrawTool':\n                return new NodeDrawingTool(this.pdfViewer, this, this.pdfViewer.drawingObject);\n            case 'Polygon':\n                return new PolygonDrawingTool(this.pdfViewer, this, 'Polygon');\n            case 'Distance':\n                return new LineTool(this.pdfViewer, this, 'Leader1', undefined);\n            case 'Line':\n                return new LineTool(this.pdfViewer, this, 'ConnectorSegmentPoint_1', this.pdfViewer.drawingObject);\n            case 'Perimeter':\n                return new PolygonDrawingTool(this.pdfViewer, this, 'Perimeter');\n            case 'Rotate':\n                return new RotateTool(this.pdfViewer, this);\n            case 'Stamp':\n                return new StampTool(this.pdfViewer, this);\n            case 'Ink':\n                return new InkDrawingTool(this.pdfViewer, this, this.pdfViewer.drawingObject);\n        }\n        if (action.indexOf('ConnectorSegmentPoint') > -1 || action.indexOf('Leader') > -1) {\n            return new ConnectTool(this.pdfViewer, this, action);\n        }\n        return null;\n    };\n    /**\n     * @private\n     * @param {MouseEvent | TouchEvent} evt - The events.\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.diagramMouseUp = function (evt) {\n        var allowServerDataBind = this.pdfViewer.allowServerDataBinding;\n        this.pdfViewer.enableServerDataBinding(false);\n        var touches;\n        var isAnnotResized = (this.action.toLowerCase().includes('resize') || this.action.toLowerCase().includes('connectorsegmentpoint'));\n        var isAnnotationDrawn = (this.action === 'Drag' || isAnnotResized) || ((this.tool instanceof NodeDrawingTool || this.tool instanceof LineTool || this.tool instanceof PolygonDrawingTool) && (this.tool.dragging && this.tool.drawingObject));\n        if (this.tool) {\n            if (!this.inAction && evt.which !== 3) {\n                if (this.action === 'Drag') {\n                    this.action = 'Select';\n                    var obj = findActiveElement(evt, this, this.pdfViewer);\n                    var isMultipleSelect = true;\n                }\n            }\n            var isGroupAction = void 0;\n            if (!(this.tool instanceof PolygonDrawingTool) && !(this.tool instanceof LineTool) && !(this.tool instanceof NodeDrawingTool)) {\n                this.inAction = false;\n                this.isMouseDown = false;\n            }\n            this.currentPosition = this.getMousePosition(evt);\n            if (this.tool) {\n                this.eventArgs.position = this.currentPosition;\n                this.getMouseEventArgs(this.currentPosition, this.eventArgs, evt, this.eventArgs.source);\n                var ctrlKey = this.isMetaKey(evt);\n                var info = { ctrlKey: evt.ctrlKey, shiftKey: evt.shiftKey };\n                this.eventArgs.info = info;\n                this.eventArgs.clickCount = evt.detail;\n                this.tool.mouseUp(this.eventArgs);\n                this.isAnnotationMouseDown = false;\n                this.isFormFieldMouseDown = false;\n                // eslint-disable-next-line max-len\n                if ((this.tool instanceof NodeDrawingTool || this.tool instanceof LineTool || this.tool instanceof PolygonDrawingTool) && !this.tool.dragging) {\n                    this.inAction = false;\n                    this.isMouseDown = false;\n                }\n                if (isAnnotationDrawn) {\n                    var obj = findActiveElement(evt, this, this.pdfViewer);\n                    // eslint-disable-next-line max-len\n                    if ((this.isShapeAnnotationModule() || this.isCalibrateAnnotationModule())) {\n                        this.pdfViewer.annotation.onShapesMouseup(obj, evt);\n                    }\n                }\n                this.isAnnotationDrawn = false;\n            }\n        }\n        var target = evt.target;\n        // eslint-disable-next-line max-len\n        if (!touches && (evt.cancelable && !(this.isDeviceiOS && !this.pdfViewer.annotationModule)) && this.skipPreventDefault(target)) {\n            evt.preventDefault();\n        }\n        this.eventArgs = {};\n        this.pdfViewer.enableServerDataBinding(allowServerDataBind, true);\n    };\n    /**\n     * @private\n     * @param {HTMLElement} target - The target.\n     * @returns {boolean} - Returns true or false.\n     */\n    PdfViewerBase.prototype.skipPreventDefault = function (target) {\n        var isSkipped = false;\n        var isSkip = false;\n        // eslint-disable-next-line max-len\n        if (this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.freeTextAnnotationModule && this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus) {\n            isSkip = true;\n        }\n        // eslint-disable-next-line max-len\n        if (target.parentElement && target.parentElement.className !== 'foreign-object' && !target.classList.contains('e-pv-radio-btn') && !target.classList.contains('e-pv-radiobtn-span') && !target.classList.contains('e-pv-checkbox-div') && !target.classList.contains('e-pdfviewer-formFields')\n            && !target.classList.contains('e-pdfviewer-ListBox') && !target.classList.contains('e-pdfviewer-signatureformfields')\n            && !((target).className === 'free-text-input' && (target).tagName === 'TEXTAREA')\n            && !isSkip && !((target).className === 'e-pv-hyperlink') && target.parentElement.classList.length > 0 && !target.parentElement.classList.contains(\"e-editable-elements\")) {\n            isSkipped = true;\n        }\n        return isSkipped;\n    };\n    PdfViewerBase.prototype.isMetaKey = function (evt) {\n        return navigator.platform.match('Mac') ? evt.metaKey : evt.ctrlKey;\n    };\n    /**\n     * @private\n     * @param {MouseEvent | TouchEvent} evt - The events.\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.diagramMouseDown = function (evt) {\n        var _this = this;\n        if (this.tool instanceof MoveTool && !(this.tool instanceof StampTool) && this.tool['inAction']) {\n            this.diagramMouseUp(evt);\n            if (evt.which === 1) {\n                this.preventContextmenu = true;\n                setTimeout(function () {\n                    _this.preventContextmenu = false;\n                }, 200);\n            }\n        }\n        var allowServerDataBind = this.pdfViewer.allowServerDataBinding;\n        this.pdfViewer.enableServerDataBinding(false);\n        var touches = null;\n        touches = evt.touches;\n        this.isMouseDown = true;\n        this.isAnnotationAdded = false;\n        this.currentPosition = this.prevPosition = this.getMousePosition(evt);\n        this.eventArgs = {};\n        var isStamp = false;\n        if (this.pdfViewer.tool === 'Stamp') {\n            this.pdfViewer.tool = '';\n            isStamp = true;\n        }\n        var target;\n        if (this.pdfViewer.annotation) {\n            this.activeElements.activePageID = this.pdfViewer.annotation.getEventPageNumber(evt) ? this.pdfViewer.annotation.getEventPageNumber(evt) : this.pdfViewer.currentPageNumber - 1;\n        }\n        var obj = findActiveElement(evt, this, this.pdfViewer);\n        if ((Browser.isDevice && !this.pdfViewer.enableDesktopMode) && (obj && !(obj instanceof PdfFormFieldBase))) {\n            evt.preventDefault();\n        }\n        if (this.pdfViewer.annotation && this.pdfViewer.enableStampAnnotations) {\n            var stampModule = this.pdfViewer.annotationModule.stampAnnotationModule;\n            if (stampModule && stampModule.isNewStampAnnot) {\n                var stampObj = obj;\n                if (!stampObj && this.pdfViewer.selectedItems.annotations[0]) {\n                    stampObj = this.pdfViewer.selectedItems.annotations[0];\n                }\n                if (stampObj) {\n                    this.isViewerMouseDown = false;\n                    stampObj.opacity = this.pdfViewer.stampSettings.opacity;\n                    this.isNewStamp = true;\n                    var opacity = void 0;\n                    if (stampObj.shapeAnnotationType === 'Image') {\n                        opacity = this.pdfViewer.customStampSettings.opacity;\n                    }\n                    else {\n                        opacity = this.pdfViewer.stampSettings.opacity;\n                    }\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.nodePropertyChange(stampObj, { opacity: opacity });\n                    this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode = false;\n                    if (stampObj.shapeAnnotationType === 'Image' && !this.isAlreadyAdded) {\n                        this.stampAdded = true;\n                        var stampName = stampObj.id;\n                        if (stampModule.currentStampAnnotation && stampModule.currentStampAnnotation.signatureName) {\n                            stampName = stampModule.currentStampAnnotation.signatureName;\n                        }\n                        var isSkip = false;\n                        for (var i = 0; i < this.customStampCollection.length; i++) {\n                            if (this.customStampCollection[parseInt(i.toString(), 10)].customStampName === stampName) {\n                                isSkip = true;\n                                break;\n                            }\n                        }\n                        if (isSkip) {\n                            stampName = stampObj.id;\n                        }\n                        stampName = stampModule.customStampName ? stampModule.customStampName : stampModule.currentStampAnnotation.signatureName;\n                        this.customStampCollection.push({ customStampName: stampName, customStampImageSource: stampObj.data });\n                        if (isBlazor()) {\n                            this.pdfViewer._dotnetInstance.invokeMethodAsync(\"UpdateCustomStampCollection\", stampName, stampObj.data);\n                        }\n                    }\n                    if (this.pdfViewer.customStampSettings.enableCustomStamp && this.pdfViewer.customStampSettings.isAddToMenu) {\n                        this.stampAdded = true;\n                    }\n                    this.isAlreadyAdded = false;\n                    stampModule.updateDeleteItems(stampObj.pageIndex, stampObj, stampObj.opacity);\n                    stampModule.resetAnnotation();\n                    stampModule.isNewStampAnnot = false;\n                }\n            }\n        }\n        if (this.isNewSignatureAdded) {\n            this.signatureCount++;\n            this.currentSignatureAnnot = null;\n            var signObject = obj;\n            if (isNullOrUndefined(signObject) && this.pdfViewer.selectedItems.annotations[0]) {\n                signObject = this.pdfViewer.selectedItems.annotations[0];\n            }\n            if (signObject) {\n                this.signatureAdded = true;\n                this.signatureModule.storeSignatureData(signObject.pageIndex, signObject);\n                // eslint-disable-next-line\n                var bounds = { left: signObject.bounds.x, top: signObject.bounds.y, width: signObject.bounds.width, height: signObject.bounds.height };\n                // eslint-disable-next-line max-len\n                this.pdfViewer.fireSignatureAdd(signObject.pageIndex, signObject.signatureName, signObject.shapeAnnotationType, bounds, signObject.opacity, signObject.strokeColor, signObject.thickness, this.signatureModule.saveImageString);\n            }\n            this.isNewSignatureAdded = false;\n        }\n        if (this.pdfViewer.annotationModule) {\n            var freeTextAnnotModule = this.pdfViewer.annotationModule.freeTextAnnotationModule;\n            var canvasPaddingLeft = 5, canvasPaddingWidth = 10;\n            // eslint-disable-next-line\n            if (freeTextAnnotModule.isNewFreeTextAnnot === true) {\n                var canvas = void 0;\n                // eslint-disable-next-line max-len\n                if (evt.target && (evt.target.id.indexOf('_text') > -1 || evt.target.id.indexOf('_annotationCanvas') > -1 || evt.target.classList.contains('e-pv-hyperlink')) && this.pdfViewer.annotation) {\n                    var pageIndex = this.pdfViewer.annotation.getEventPageNumber(evt);\n                    var diagram = document.getElementById(this.pdfViewer.element.id + '_annotationCanvas_' + pageIndex);\n                    if (diagram) {\n                        var canvas1 = diagram.getBoundingClientRect();\n                        var left = canvas1.x ? canvas1.x : canvas1.left;\n                        var top_4 = canvas1.y ? canvas1.y : canvas1.top;\n                        canvas = new Rect(left + canvasPaddingLeft, top_4 + canvasPaddingLeft, canvas1.width - canvasPaddingWidth, canvas1.height - canvasPaddingWidth);\n                    }\n                }\n                if (touches) {\n                    this.mouseX = touches[0].clientX;\n                    this.mouseY = touches[0].clientY;\n                }\n                if (canvas && canvas.containsPoint({ x: this.mouseX, y: this.mouseY }) && freeTextAnnotModule.isNewAddedAnnot) {\n                    var pageIndex = this.pdfViewer.annotation.getEventPageNumber(evt);\n                    if (!this.pdfViewer.freeTextSettings.enableAutoFit) {\n                        var zoomFactor = this.getZoomFactor();\n                        var width = this.currentPosition.x + (freeTextAnnotModule.defautWidth * zoomFactor);\n                        var pageWidth = this.getPageWidth(pageIndex);\n                        if (width >= pageWidth) {\n                            this.currentPosition.x = pageWidth - (freeTextAnnotModule.defautWidth * zoomFactor);\n                            this.currentPosition.x <= 0 ? this.currentPosition.x = canvasPaddingLeft : this.currentPosition.x;\n                            freeTextAnnotModule.defautWidth = (freeTextAnnotModule.defautWidth * zoomFactor) >= pageWidth ? pageWidth - canvasPaddingWidth : freeTextAnnotModule.defautWidth;\n                        }\n                    }\n                    freeTextAnnotModule.addInuptElemet(this.currentPosition, null, pageIndex);\n                    if (this.pdfViewer.toolbar && this.pdfViewer.toolbar.annotationToolbarModule) {\n                        // eslint-disable-next-line\n                        var annotModule = this.pdfViewer.toolbar.annotationToolbarModule;\n                        if (!isBlazor()) {\n                            annotModule.primaryToolbar.deSelectItem(annotModule.freeTextEditItem);\n                        }\n                    }\n                    evt.preventDefault();\n                    freeTextAnnotModule.isNewAddedAnnot = false;\n                }\n            }\n        }\n        var sourceElement = null;\n        if (obj) {\n            sourceElement = obj.wrapper.children[0];\n            if (sourceElement) {\n                target = obj;\n            }\n        }\n        if (!this.tool || (this.tool && !this.tool.drawingObject)) {\n            if (!isStamp) {\n                this.action = this.findToolToActivate(obj, this.currentPosition);\n                // eslint-disable-next-line\n                if (obj && obj.annotationSettings && obj.annotationSettings.isLock) {\n                    if (this.action === 'Select') {\n                        if (!this.pdfViewer.annotationModule.checkAllowedInteractions('Select', obj)) {\n                            this.action = '';\n                        }\n                    }\n                    if (this.action === 'Drag') {\n                        if (!this.pdfViewer.annotationModule.checkAllowedInteractions('Move', obj)) {\n                            this.action = 'Select';\n                        }\n                    }\n                    if (this.action === 'Rotate') {\n                        this.action = 'Select';\n                    }\n                    // eslint-disable-next-line max-len\n                    if (this.action === 'ResizeSouthEast' || this.action === 'ResizeNorthEast' || this.action === 'ResizeNorthWest' || this.action === 'ResizeSouthWest' || this.action === 'ResizeSouth' || // eslint-disable-next-line max-len\n                        this.action === 'ResizeNorth' || this.action === 'ResizeWest' || this.action === 'ResizeEast' || this.action.includes('ConnectorSegmentPoint') || this.action.includes('Leader')) {\n                        if (!this.pdfViewer.annotationModule.checkAllowedInteractions('Resize', obj)) {\n                            this.action = 'Select';\n                        }\n                    }\n                }\n                this.tool = this.getTool(this.action);\n                if (!this.tool) {\n                    this.action = this.pdfViewer.tool || 'Select';\n                    this.tool = this.getTool(this.action);\n                }\n            }\n            else {\n                this.action = 'Select';\n                this.tool = this.getTool(this.action);\n            }\n        }\n        this.getMouseEventArgs(this.currentPosition, this.eventArgs, evt);\n        this.eventArgs.position = this.currentPosition;\n        if (this.tool) {\n            this.isAnnotationMouseDown = false;\n            this.isFormFieldMouseDown = false;\n            this.isAnnotationMouseMove = false;\n            this.isFormFieldMouseMove = false;\n            this.tool.mouseDown(this.eventArgs);\n            this.isAnnotationDrawn = true;\n            this.signatureAdded = true;\n        }\n        if (this.pdfViewer.annotation) {\n            this.pdfViewer.annotation.onAnnotationMouseDown();\n        }\n        if (this.pdfViewer.selectedItems && this.pdfViewer.selectedItems.formFields.length === 1) {\n            if (!isNullOrUndefined(this.pdfViewer.toolbar) && !isNullOrUndefined(this.pdfViewer.toolbar.formDesignerToolbarModule)) {\n                this.pdfViewer.toolbar.formDesignerToolbarModule.showHideDeleteIcon(true);\n            }\n        }\n        var signatureFieldAnnotation = this.pdfViewer.selectedItems.annotations.length === 1 ? this.pdfViewer.nameTable[this.pdfViewer.selectedItems.annotations[0].id.split('_')[0] + '_content'] : null;\n        if (!signatureFieldAnnotation) {\n            signatureFieldAnnotation = this.pdfViewer.selectedItems.annotations.length === 1 ? this.pdfViewer.nameTable[this.pdfViewer.selectedItems.annotations[0].id] : null;\n        }\n        // eslint-disable-next-line max-len\n        if (this.eventArgs && this.eventArgs.source && (this.eventArgs.source.formFieldAnnotationType || signatureFieldAnnotation) && !this.pdfViewer.designerMode) {\n            var currentObject = void 0;\n            if (signatureFieldAnnotation) {\n                currentObject = this.pdfViewer.nameTable[this.pdfViewer.selectedItems.annotations[0].id.split('_')[0]];\n            }\n            else {\n                currentObject = this.eventArgs.source;\n            }\n            if (!currentObject) {\n                currentObject = this.pdfViewer.formFieldCollections[this.pdfViewer.formFieldCollections.findIndex(function (el) { return el.id === signatureFieldAnnotation.id; })];\n            }\n            if (currentObject) {\n                // eslint-disable-next-line\n                var field = {\n                    // eslint-disable-next-line max-len\n                    name: currentObject.name, id: currentObject.id, fontFamily: currentObject.fontFamily, fontSize: currentObject.fontSize, fontStyle: currentObject.fontStyle,\n                    // eslint-disable-next-line\n                    color: currentObject.color, value: currentObject.value, type: currentObject.formFieldAnnotationType ? currentObject.formFieldAnnotationType : currentObject.type, backgroundColor: currentObject.backgroundColor, alignment: currentObject.alignment\n                };\n                var target_1 = document.getElementById(currentObject.id);\n                target_1 = target_1 ? target_1 : (document.getElementById(currentObject.id + '_content_html_element') ? document.getElementById(currentObject.id + '_content_html_element').children[0].children[0] : null);\n                if (target_1) {\n                    this.currentTarget = target_1;\n                    this.pdfViewer.fireFormFieldClickEvent('formFieldClicked', field, false, evt.button === 0);\n                }\n            }\n        }\n        this.initialEventArgs = { source: this.eventArgs.source, sourceWrapper: this.eventArgs.sourceWrapper };\n        this.initialEventArgs.position = this.currentPosition;\n        this.initialEventArgs.info = this.eventArgs.info;\n        this.pdfViewer.enableServerDataBinding(allowServerDataBind, true);\n    };\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.exportAnnotationsAsObject = function (annotationDataFormat) {\n        var _this = this;\n        if (this.pdfViewer.annotationModule) {\n            var isAnnotations = this.updateExportItem();\n            if (isAnnotations) {\n                return new Promise(function (resolve, reject) {\n                    _this.createRequestForExportAnnotations(true, annotationDataFormat).then(function (value) {\n                        resolve(value);\n                    });\n                });\n            }\n        }\n    };\n    /**\n     * @private\n     * @param {string} type - The type.\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.getItemFromSessionStorage = function (type) {\n        if (this.isStorageExceed) {\n            return this.formFieldStorage[this.documentId + type];\n        }\n        else {\n            return window.sessionStorage.getItem(this.documentId + type);\n        }\n    };\n    /**\n     * @param textDiv\n     * @param left\n     * @param top\n     * @param fontHeight\n     * @param width\n     * @param height\n     * @param isPrint\n     * @param textDiv\n     * @param left\n     * @param top\n     * @param fontHeight\n     * @param width\n     * @param height\n     * @param isPrint\n     * @param textDiv\n     * @param left\n     * @param top\n     * @param fontHeight\n     * @param width\n     * @param height\n     * @param isPrint\n     * @param textDiv\n     * @param left\n     * @param top\n     * @param fontHeight\n     * @param width\n     * @param height\n     * @param isPrint\n     * @param textDiv\n     * @param left\n     * @param top\n     * @param fontHeight\n     * @param width\n     * @param height\n     * @param isPrint\n     * @private\n     */\n    // eslint-disable-next-line max-len\n    PdfViewerBase.prototype.setStyleToTextDiv = function (textDiv, left, top, fontHeight, width, height, isPrint) {\n        var zoomvalue = this.getZoomFactor();\n        if (isPrint) {\n            zoomvalue = 1;\n            textDiv.style.position = 'absolute';\n        }\n        textDiv.style.left = left * zoomvalue + 'px';\n        textDiv.style.top = top * zoomvalue + 'px';\n        textDiv.style.height = height * zoomvalue + 'px';\n        textDiv.style.width = width * zoomvalue + 'px';\n        textDiv.style.margin = '0px';\n        if (fontHeight > 0) {\n            textDiv.style.fontSize = fontHeight * zoomvalue + 'px';\n        }\n    };\n    /**\n     * @param number\n     * @private\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.ConvertPointToPixel = function (number) {\n        return (number * (96 / 72));\n    };\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.setItemInSessionStorage = function (formFieldsData, type) {\n        // eslint-disable-next-line\n        var formFieldsSize = Math.round(JSON.stringify(formFieldsData).length / 1024);\n        var sessionSize = Math.round(JSON.stringify(window.sessionStorage).length / 1024);\n        if (formFieldsSize > 4500) {\n            this.isStorageExceed = true;\n            if (this.pdfViewer.formFieldsModule) {\n                if (!(this.isFormStorageExceed)) {\n                    this.pdfViewer.formFieldsModule.clearFormFieldStorage();\n                    this.isFormStorageExceed = true;\n                }\n            }\n        }\n        if (this.isStorageExceed) {\n            this.formFieldStorage[this.documentId + type] = JSON.stringify(formFieldsData);\n        }\n        else if ((formFieldsSize + sessionSize) > 4500) {\n            this.isStorageExceed = true;\n            if (this.pdfViewer.formFieldsModule) {\n                this.pdfViewer.formFieldsModule.clearFormFieldStorage();\n            }\n            this.isFormStorageExceed = true;\n            if (this.pdfViewer.annotationModule) {\n                this.pdfViewer.annotationModule.clearAnnotationStorage();\n            }\n            this.formFieldStorage[this.documentId + type] = JSON.stringify(formFieldsData);\n        }\n        else {\n            window.sessionStorage.setItem(this.documentId + type, JSON.stringify(formFieldsData));\n        }\n    };\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.exportFormFieldsAsObject = function (formFieldDataFormat) {\n        var _this = this;\n        if (this.pdfViewer.formFieldsModule) {\n            return new Promise(function (resolve, reject) {\n                _this.createRequestForExportFormfields(true, formFieldDataFormat).then(function (value) {\n                    resolve(value);\n                });\n            });\n        }\n    };\n    /**\n     * @param importData\n     * @param annotationDataFormat\n     * @param isXfdf\n     * @param importData\n     * @param annotationDataFormat\n     * @param isXfdf\n     * @param importData\n     * @param annotationDataFormat\n     * @param isXfdf\n     * @private\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.importAnnotations = function (importData, annotationDataFormat, isXfdf) {\n        if (this.pdfViewer.annotationModule) {\n            this.createRequestForImportAnnotations(importData, annotationDataFormat, isXfdf);\n        }\n    };\n    /**\n     * @private\n     * @param {AnnotationDataFormat} annotationDataFormat - The annotationDataFormat.\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.exportAnnotations = function (annotationDataFormat) {\n        if (this.pdfViewer.annotationModule) {\n            var isAnnotations = this.updateExportItem();\n            if (isAnnotations) {\n                this.createRequestForExportAnnotations(false, annotationDataFormat);\n            }\n        }\n    };\n    /**\n     * @param isObject\n     * @param annotationDataFormat\n     * @param isBase64String\n     * @private\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.createRequestForExportAnnotations = function (isObject, annotationDataFormat, isBase64String) {\n        var _this = this;\n        var proxy = null;\n        proxy = this;\n        var promise = new Promise(function (resolve, reject) {\n            // eslint-disable-next-line\n            var jsonObject;\n            var canExport = false;\n            jsonObject = _this.constructJsonDownload();\n            jsonObject.annotationDataFormat = annotationDataFormat;\n            // eslint-disable-next-line\n            jsonObject['action'] = 'ExportAnnotations';\n            canExport = proxy.pdfViewer.fireExportStart(jsonObject);\n            if (canExport) {\n                if (proxy.jsonDocumentId) {\n                    // eslint-disable-next-line\n                    jsonObject.document = proxy.jsonDocumentId;\n                }\n                var url = proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.exportAnnotations;\n                proxy.exportAnnotationRequestHandler = new AjaxHandler(_this.pdfViewer);\n                proxy.exportAnnotationRequestHandler.url = url;\n                proxy.exportAnnotationRequestHandler.mode = true;\n                proxy.exportAnnotationRequestHandler.responseType = 'text';\n                if (!_this.clientSideRendering) {\n                    proxy.exportAnnotationRequestHandler.send(jsonObject);\n                }\n                else {\n                    var resultData = _this.pdfViewer.pdfRendererModule.exportAnnotation(jsonObject, isObject);\n                    if (isObject) {\n                        var annotData = proxy.exportAnnotationFileDownload(resultData, proxy, annotationDataFormat, jsonObject, isObject, isBase64String);\n                        resolve(annotData);\n                    }\n                    else {\n                        proxy.exportAnnotationFileDownload(resultData, proxy, annotationDataFormat, jsonObject, isObject, isBase64String);\n                    }\n                }\n                // eslint-disable-next-line\n                proxy.exportAnnotationRequestHandler.onSuccess = function (result) {\n                    // eslint-disable-next-line\n                    var data = result.data;\n                    var redirect = proxy.checkRedirection(data);\n                    if (!redirect) {\n                        if (data) {\n                            if (isObject) {\n                                var annotData = proxy.exportAnnotationFileDownload(data, proxy, annotationDataFormat, jsonObject, isObject, isBase64String);\n                                resolve(annotData);\n                            }\n                            else {\n                                proxy.exportAnnotationFileDownload(data, proxy, annotationDataFormat, jsonObject, isObject, isBase64String);\n                            }\n                        }\n                        else {\n                            var fileName = void 0;\n                            if (proxy.pdfViewer.exportAnnotationFileName !== null) {\n                                fileName = proxy.pdfViewer.exportAnnotationFileName;\n                            }\n                            else {\n                                fileName = proxy.pdfViewer.fileName;\n                            }\n                            proxy.pdfViewer.fireExportSuccess('Exported data saved in server side successfully', fileName);\n                        }\n                    }\n                };\n                // eslint-disable-next-line\n                proxy.exportAnnotationRequestHandler.onFailure = function (result) {\n                    proxy.pdfViewer.fireExportFailed(jsonObject.pdfAnnotation, result.statusText);\n                };\n                // eslint-disable-next-line\n                proxy.exportAnnotationRequestHandler.onError = function (result) {\n                    proxy.pdfViewer.fireExportFailed(jsonObject.pdfAnnotation, result.statusText);\n                };\n            }\n        });\n        if (isObject || isBase64String) {\n            return promise;\n        }\n        else {\n            return true;\n        }\n    };\n    PdfViewerBase.prototype.exportAnnotationFileDownload = function (data, proxy, annotationDataFormat, jsonObject, isObject, isBase64String) {\n        var _this = this;\n        return new Promise(function (resolve) {\n            if (data) {\n                if (typeof data === 'object') {\n                    data = JSON.parse(data);\n                }\n                if (data) {\n                    var isCancel = proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.exportAnnotations, data);\n                    if (isObject || (isBase64String && !isBlazor())) {\n                        if (data.split('base64,')[1]) {\n                            var exportObject = data;\n                            // eslint-disable-next-line \n                            var annotationJson = atob(data.split(',')[1]);\n                            if (isObject) {\n                                if (jsonObject.annotationDataFormat === 'Json') {\n                                    annotationJson = proxy.getSanitizedString(annotationJson);\n                                    exportObject = JSON.parse(annotationJson);\n                                }\n                                else {\n                                    exportObject = annotationJson;\n                                }\n                            }\n                            if (proxy.pdfViewer.exportAnnotationFileName !== null) {\n                                proxy.pdfViewer.fireExportSuccess(exportObject, proxy.pdfViewer.exportAnnotationFileName);\n                            }\n                            else {\n                                proxy.pdfViewer.fireExportSuccess(exportObject, proxy.pdfViewer.fileName);\n                            }\n                            proxy.updateDocumentAnnotationCollections();\n                            if (isBase64String) {\n                                resolve(data);\n                            }\n                            else {\n                                resolve(annotationJson);\n                            }\n                        }\n                        else {\n                            // eslint-disable-next-line max-len\n                            proxy.pdfViewer.fireExportFailed(jsonObject.pdfAnnotation, proxy.pdfViewer.localeObj.getConstant('Export Failed'));\n                        }\n                    }\n                    else {\n                        if (annotationDataFormat === 'Json') {\n                            if (data.split('base64,')[1]) {\n                                if (!isCancel) {\n                                    var blobUrl = proxy.createBlobUrl(data.split('base64,')[1], 'application/json');\n                                    if (Browser.isIE || Browser.info.name === 'edge') {\n                                        if (proxy.pdfViewer.exportAnnotationFileName !== null) {\n                                            // eslint-disable-next-line max-len\n                                            window.navigator.msSaveOrOpenBlob(blobUrl, proxy.pdfViewer.exportAnnotationFileName.split('.')[0] + '.json');\n                                        }\n                                        else {\n                                            window.navigator.msSaveOrOpenBlob(blobUrl, proxy.pdfViewer.fileName.split('.')[0] + '.json');\n                                        }\n                                    }\n                                    else {\n                                        proxy.downloadExportFormat(blobUrl, annotationDataFormat);\n                                    }\n                                    proxy.updateDocumentAnnotationCollections();\n                                }\n                                else {\n                                    return data;\n                                }\n                            }\n                            else {\n                                if (isBlazor()) {\n                                    var promise = _this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText', 'PdfViewer_ExportFailed');\n                                    promise.then(function (value) {\n                                        proxy.openImportExportNotificationPopup(value);\n                                    });\n                                }\n                                else {\n                                    proxy.openImportExportNotificationPopup(proxy.pdfViewer.localeObj.getConstant('Export Failed'));\n                                }\n                                // eslint-disable-next-line max-len\n                                proxy.pdfViewer.fireExportFailed(jsonObject.pdfAnnotation, proxy.pdfViewer.localeObj.getConstant('Export Failed'));\n                            }\n                        }\n                        else {\n                            if (data.split('base64,')[1]) {\n                                if (!isCancel) {\n                                    var blobUrl = proxy.createBlobUrl(data.split('base64,')[1], 'application/vnd.adobe.xfdf');\n                                    if (Browser.isIE || Browser.info.name === 'edge') {\n                                        window.navigator.msSaveOrOpenBlob(blobUrl, proxy.pdfViewer.fileName.split('.')[0] + '.xfdf');\n                                    }\n                                    else {\n                                        proxy.downloadExportFormat(blobUrl, annotationDataFormat);\n                                    }\n                                    proxy.updateDocumentAnnotationCollections();\n                                }\n                                else {\n                                    return data;\n                                }\n                            }\n                            else {\n                                if (isBlazor()) {\n                                    var promise = _this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText', 'PdfViewer_ExportFailed');\n                                    promise.then(function (value) {\n                                        proxy.openImportExportNotificationPopup(value);\n                                    });\n                                }\n                                else {\n                                    proxy.openImportExportNotificationPopup(proxy.pdfViewer.localeObj.getConstant('Export Failed'));\n                                }\n                                // eslint-disable-next-line max-len\n                                proxy.pdfViewer.fireExportFailed(jsonObject, proxy.pdfViewer.localeObj.getConstant('Export Failed'));\n                            }\n                        }\n                    }\n                }\n                if (typeof data !== 'string') {\n                    try {\n                        if (typeof data === 'string') {\n                            proxy.onControlError(500, data, proxy.pdfViewer.serverActionSettings.exportAnnotations);\n                            data = null;\n                        }\n                    }\n                    catch (error) {\n                        // eslint-disable-next-line max-len\n                        proxy.pdfViewer.fireExportFailed(jsonObject.pdfAnnotation, proxy.pdfViewer.localeObj.getConstant('Export Failed'));\n                        proxy.onControlError(500, data, proxy.pdfViewer.serverActionSettings.exportAnnotations);\n                        data = null;\n                    }\n                }\n            }\n            return '';\n        });\n    };\n    PdfViewerBase.prototype.getDataOnSuccess = function (resultData) {\n        var _this = this;\n        return new Promise(function (resolve) {\n            var proxy = null;\n            proxy = _this;\n            proxy.pdfViewer.fireExportSuccess(resultData, proxy.pdfViewer.fileName);\n            proxy.updateDocumentAnnotationCollections();\n            resolve(resultData);\n        });\n    };\n    /**\n    * @private\n    */\n    PdfViewerBase.prototype.updateModifiedDateToLocalDate = function (newData, annotationType) {\n        if (newData[\"\" + annotationType] && newData[\"\" + annotationType].length > 0) {\n            var data = newData[\"\" + annotationType];\n            if (data) {\n                for (var j = 0; j < data.length; j++) {\n                    data[parseInt(j.toString(), 10)].ModifiedDate = this.convertUTCDateTimeToLocalDateTime(data[parseInt(j.toString(), 10)].ModifiedDate);\n                    if (data[parseInt(j.toString(), 10)].Comments) {\n                        for (var i = 0; i < data[parseInt(j.toString(), 10)].Comments.length; i++) {\n                            data[parseInt(j.toString(), 10)].Comments[parseInt(i.toString(), 10)].ModifiedDate = this.convertUTCDateTimeToLocalDateTime(data[parseInt(j.toString(), 10)].Comments[parseInt(i.toString(), 10)].ModifiedDate);\n                        }\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.convertUTCDateTimeToLocalDateTime = function (date) {\n        var dateTime;\n        // We have globalized the date and time based on the given locale.\n        this.globalize = new Internationalization(this.pdfViewer.locale);\n        if (date !== null && date !== undefined && date !== '') {\n            if (!this.clientSideRendering) {\n                dateTime = new Date(Date.parse(date + ' ' + 'UTC'));\n            }\n            else {\n                dateTime = new Date(date);\n            }\n        }\n        else {\n            var now = new Date();\n            var now_utc = Date.UTC(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate(), now.getUTCHours(), now.getUTCMinutes(), now.getUTCSeconds());\n            dateTime = new Date(now_utc);\n        }\n        var dateTimeValue = this.globalize.formatDate(dateTime, { format: this.pdfViewer.dateTimeFormat, type: 'dateTime' });\n        return dateTimeValue;\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.createRequestForImportAnnotations = function (importData, annotationDataFormat, isXfdf) {\n        var jsonObject;\n        var proxy = null;\n        proxy = this;\n        if (!isXfdf && proxy.isPDFViewerJson) {\n            this.isJsonImported = true;\n        }\n        else {\n            this.isJsonImported = false;\n        }\n        if (typeof importData === 'object') {\n            if (importData && importData.pdfAnnotation) {\n                var newArray = Object.keys(importData.pdfAnnotation);\n                for (var i = 0; i < newArray.length; i++) {\n                    var newData = importData.pdfAnnotation[newArray[parseInt(i.toString(), 10)]];\n                    this.updateModifiedDateToLocalDate(newData, \"freeTextAnnotation\");\n                    this.updateModifiedDateToLocalDate(newData, \"measureShapeAnnotation\");\n                    this.updateModifiedDateToLocalDate(newData, \"shapeAnnotation\");\n                    this.updateModifiedDateToLocalDate(newData, \"signatureAnnotation\");\n                    this.updateModifiedDateToLocalDate(newData, \"signatureInkAnnotation\");\n                    this.updateModifiedDateToLocalDate(newData, \"stampAnnotations\");\n                    this.updateModifiedDateToLocalDate(newData, \"stickyNotesAnnotation\");\n                    this.updateModifiedDateToLocalDate(newData, \"textMarkupAnnotation\");\n                }\n            }\n            proxy.reRenderAnnotations(importData.pdfAnnotation);\n            proxy.isImportedAnnotation = true;\n            proxy.updateDocumentEditedProperty(true);\n            if (!this.isAddAnnotation) {\n                proxy.pdfViewer.fireImportSuccess(importData.pdfAnnotation);\n            }\n        }\n        else {\n            proxy.pdfViewer.fireImportStart(importData);\n            if (annotationDataFormat === 'Json') {\n                // eslint-disable-next-line max-len\n                if (proxy.isPDFViewerJson) {\n                    jsonObject = { fileName: importData, action: 'ImportAnnotations', elementId: proxy.pdfViewer.element.id, hashId: proxy.hashId, uniqueId: proxy.documentId, annotationDataFormat: annotationDataFormat };\n                }\n                else {\n                    jsonObject = { importedData: importData, action: 'ImportAnnotations', elementId: proxy.pdfViewer.element.id, hashId: proxy.hashId, uniqueId: proxy.documentId, annotationDataFormat: annotationDataFormat };\n                }\n            }\n            else {\n                if (!isXfdf) {\n                    importData = btoa(importData);\n                }\n                importData = importData.split(',')[1] ? importData.split(',')[1] : importData.split(',')[0];\n                // eslint-disable-next-line max-len\n                jsonObject = { importedData: importData, action: 'ImportAnnotations', elementId: proxy.pdfViewer.element.id, hashId: proxy.hashId, uniqueId: proxy.documentId, annotationDataFormat: annotationDataFormat };\n            }\n            jsonObject = Object.assign(jsonObject, this.constructJsonDownload());\n            jsonObject[\"action\"] = 'ImportAnnotations';\n            if (proxy.jsonDocumentId) {\n                // eslint-disable-next-line\n                if (jsonObject.documentId) {\n                    delete jsonObject['documentId'];\n                }\n                jsonObject.document = proxy.jsonDocumentId;\n            }\n            var url = proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.importAnnotations;\n            proxy.importAnnotationRequestHandler = new AjaxHandler(proxy.pdfViewer);\n            proxy.importAnnotationRequestHandler.url = url;\n            proxy.importAnnotationRequestHandler.mode = true;\n            proxy.importAnnotationRequestHandler.responseType = 'text';\n            if (!this.clientSideRendering) {\n                proxy.importAnnotationRequestHandler.send(jsonObject);\n            }\n            else {\n                var resultData = this.pdfViewer.pdfRendererModule.importAnnotations(jsonObject);\n                if (resultData) {\n                    this.addAnnotationOnImport(resultData, importData);\n                }\n            }\n            // eslint-disable-next-line\n            proxy.importAnnotationRequestHandler.onSuccess = function (result) {\n                // eslint-disable-next-line\n                var data = result.data;\n                var redirect = proxy.checkRedirection(data);\n                if (!redirect) {\n                    if (data) {\n                        if (typeof data !== 'object') {\n                            try {\n                                data = JSON.parse(data);\n                                if (typeof data !== 'object') {\n                                    proxy.onControlError(500, data, proxy.pdfViewer.serverActionSettings.importAnnotations);\n                                    data = null;\n                                }\n                            }\n                            catch (error) {\n                                proxy.pdfViewer.fireImportFailed(importData, proxy.pdfViewer.localeObj.getConstant('File not found'));\n                                if (isBlazor()) {\n                                    var promise = this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText', 'PdfViewer_FileNotFound');\n                                    promise.then(function (value) {\n                                        proxy.openImportExportNotificationPopup(value);\n                                    });\n                                }\n                                else {\n                                    proxy.openImportExportNotificationPopup(proxy.pdfViewer.localeObj.getConstant('File not found'));\n                                }\n                                proxy.onControlError(500, data, proxy.pdfViewer.serverActionSettings.importAnnotations);\n                                data = null;\n                            }\n                        }\n                        if (data) {\n                            proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.importAnnotations, data);\n                            if (data.pdfAnnotation) {\n                                var newArray_1;\n                                var newData_1;\n                                newArray_1 = Object.keys(data.pdfAnnotation);\n                                for (var i = 0; i < Object.keys(data.pdfAnnotation).length; i++) {\n                                    newData_1 = data.pdfAnnotation[newArray_1[parseInt(i.toString(), 10)]];\n                                    proxy.updateModifiedDateToLocalDate(newData_1, \"annotationOrder\");\n                                    proxy.updateModifiedDateToLocalDate(newData_1, \"freeTextAnnotation\");\n                                    proxy.updateModifiedDateToLocalDate(newData_1, \"measureShapeAnnotation\");\n                                    proxy.updateModifiedDateToLocalDate(newData_1, \"shapeAnnotation\");\n                                    proxy.updateModifiedDateToLocalDate(newData_1, \"signatureAnnotation\");\n                                    proxy.updateModifiedDateToLocalDate(newData_1, \"signatureInkAnnotation\");\n                                    proxy.updateModifiedDateToLocalDate(newData_1, \"stampAnnotations\");\n                                    proxy.updateModifiedDateToLocalDate(newData_1, \"stickyNotesAnnotation\");\n                                    proxy.updateModifiedDateToLocalDate(newData_1, \"textMarkupAnnotation\");\n                                }\n                                proxy.reRenderAnnotations(data.pdfAnnotation);\n                                proxy.isImportedAnnotation = true;\n                                proxy.updateDocumentEditedProperty(true);\n                                proxy.pdfViewer.fireImportSuccess(data.pdfAnnotation);\n                            }\n                        }\n                    }\n                }\n            };\n            // eslint-disable-next-line\n            proxy.importAnnotationRequestHandler.onFailure = function (result) {\n                proxy.pdfViewer.fireImportFailed(importData, result.statusText);\n            };\n            // eslint-disable-next-line\n            proxy.importAnnotationRequestHandler.onError = function (result) {\n                proxy.pdfViewer.fireImportFailed(importData, result.statusText);\n            };\n        }\n    };\n    PdfViewerBase.prototype.addAnnotationOnImport = function (resultData, importData) {\n        var proxy = null;\n        proxy = this;\n        if (resultData) {\n            proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.importAnnotations, resultData);\n            if (resultData.pdfAnnotation) {\n                var newArray = void 0;\n                var newData = void 0;\n                newArray = Object.keys(resultData.pdfAnnotation);\n                for (var i = 0; i < Object.keys(resultData.pdfAnnotation).length; i++) {\n                    newData = resultData.pdfAnnotation[newArray[parseInt(i.toString(), 10)]];\n                    proxy.updateModifiedDateToLocalDate(newData, \"annotationOrder\");\n                    proxy.updateModifiedDateToLocalDate(newData, \"freeTextAnnotation\");\n                    proxy.updateModifiedDateToLocalDate(newData, \"measureShapeAnnotation\");\n                    proxy.updateModifiedDateToLocalDate(newData, \"shapeAnnotation\");\n                    proxy.updateModifiedDateToLocalDate(newData, \"signatureAnnotation\");\n                    proxy.updateModifiedDateToLocalDate(newData, \"signatureInkAnnotation\");\n                    proxy.updateModifiedDateToLocalDate(newData, \"stampAnnotations\");\n                    proxy.updateModifiedDateToLocalDate(newData, \"stickyNotesAnnotation\");\n                    proxy.updateModifiedDateToLocalDate(newData, \"textMarkupAnnotation\");\n                }\n                proxy.reRenderAnnotations(resultData.pdfAnnotation);\n                proxy.isImportedAnnotation = true;\n                proxy.updateDocumentEditedProperty(true);\n                proxy.pdfViewer.fireImportSuccess(resultData.pdfAnnotation);\n            }\n            else {\n                proxy.pdfViewer.fireImportFailed(importData, proxy.pdfViewer.localeObj.getConstant('File not found'));\n            }\n        }\n    };\n    /**\n     * @private\n     * @param {string} errorDetails - The error details.\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.openImportExportNotificationPopup = function (errorDetails) {\n        if (this.pdfViewer.showNotificationDialog) {\n            this.textLayer.createNotificationPopup(errorDetails);\n        }\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.reRenderAnnotations = function (annotation) {\n        if (annotation) {\n            this.isImportAction = true;\n            var count = 0;\n            if (this.isImportedAnnotation) {\n                this.importedAnnotation = this.combineImportedData(this.importedAnnotation, annotation);\n            }\n            else {\n                if (this.pageCount > 0) {\n                    this.importedAnnotation = annotation;\n                }\n            }\n            if (!this.isImportedAnnotation) {\n                count = 0;\n            }\n            for (var i = 0; i < this.pageCount; i++) {\n                if (annotation[parseInt(i.toString(), 10)]) {\n                    // eslint-disable-next-line\n                    var importPageCollections = [];\n                    // eslint-disable-next-line\n                    var textMarkupObject = window.sessionStorage.getItem(this.documentId + '_annotations_textMarkup');\n                    // eslint-disable-next-line\n                    var shapeObject = window.sessionStorage.getItem(this.documentId + '_annotations_shape');\n                    // eslint-disable-next-line\n                    var measureShapeObject = window.sessionStorage.getItem(this.documentId + '_annotations_shape_measure');\n                    // eslint-disable-next-line\n                    var stampObject = window.sessionStorage.getItem(this.documentId + '_annotations_stamp');\n                    // eslint-disable-next-line\n                    var stickyObject = window.sessionStorage.getItem(this.documentId + '_annotations_sticky');\n                    // eslint-disable-next-line\n                    var freeTextObject = window.sessionStorage.getItem(this.documentId + '_annotations_freetext');\n                    // eslint-disable-next-line\n                    var signatureObject = window.sessionStorage.getItem(this.documentId + '_annotations_sign');\n                    // eslint-disable-next-line\n                    var inkObject = window.sessionStorage.getItem(this.documentId + '_annotations_ink');\n                    if (this.isStorageExceed) {\n                        textMarkupObject = this.annotationStorage[this.documentId + '_annotations_textMarkup'];\n                        shapeObject = this.annotationStorage[this.documentId + '_annotations_shape'];\n                        measureShapeObject = this.annotationStorage[this.documentId + '_annotations_shape_measure'];\n                        stampObject = this.annotationStorage[this.documentId + '_annotations_stamp'];\n                        stickyObject = this.annotationStorage[this.documentId + '_annotations_sticky'];\n                        freeTextObject = this.annotationStorage[this.documentId + '_annotations_freetext'];\n                        inkObject = this.annotationStorage[this.documentId + '_annotations_ink'];\n                    }\n                    this.drawPageAnnotations(annotation[parseInt(i.toString(), 10)], i);\n                    if (this.isImportedAnnotation) {\n                        var isAdded = false;\n                        for (var j = 0; j < this.annotationPageList.length; j++) {\n                            if (this.annotationPageList[parseInt(j.toString(), 10)] === i) {\n                                isAdded = true;\n                            }\n                        }\n                        if (isAdded) {\n                            this.annotationPageList[parseInt(count.toString(), 10)] = i;\n                            count = count + 1;\n                        }\n                    }\n                    else {\n                        this.annotationPageList[parseInt(count.toString(), 10)] = i;\n                        count = count + 1;\n                    }\n                    if (annotation[parseInt(i.toString(), 10)].textMarkupAnnotation && annotation[parseInt(i.toString(), 10)].textMarkupAnnotation.length !== 0) {\n                        if (textMarkupObject) {\n                            var annotObject = JSON.parse(textMarkupObject);\n                            // eslint-disable-next-line max-len\n                            annotation[parseInt(i.toString(), 10)].textMarkupAnnotation = this.checkAnnotationCollections(annotObject, annotation[parseInt(i.toString(), 10)].textMarkupAnnotation, i);\n                        }\n                        annotation[parseInt(i.toString(), 10)].textMarkupAnnotation = this.checkAnnotationCommentsCollections(annotation[parseInt(i.toString(), 10)].textMarkupAnnotation, i);\n                        importPageCollections.textMarkupAnnotation = annotation[parseInt(i.toString(), 10)].textMarkupAnnotation;\n                    }\n                    if (annotation[parseInt(i.toString(), 10)].shapeAnnotation && annotation[parseInt(i.toString(), 10)].shapeAnnotation.length !== 0) {\n                        if (shapeObject) {\n                            var annotObject = JSON.parse(shapeObject);\n                            annotation[parseInt(i.toString(), 10)].shapeAnnotation = this.checkAnnotationCollections(annotObject, annotation[parseInt(i.toString(), 10)].shapeAnnotation, i);\n                        }\n                        annotation[parseInt(i.toString(), 10)].shapeAnnotation = this.checkAnnotationCommentsCollections(annotation[parseInt(i.toString(), 10)].shapeAnnotation, i);\n                        importPageCollections.shapeAnnotation = annotation[parseInt(i.toString(), 10)].shapeAnnotation;\n                    }\n                    if (annotation[parseInt(i.toString(), 10)].measureShapeAnnotation && annotation[parseInt(i.toString(), 10)].measureShapeAnnotation.length !== 0) {\n                        if (measureShapeObject) {\n                            var annotObject = JSON.parse(measureShapeObject);\n                            // eslint-disable-next-line max-len\n                            annotation[parseInt(i.toString(), 10)].measureShapeAnnotation = this.checkAnnotationCollections(annotObject, annotation[parseInt(i.toString(), 10)].measureShapeAnnotation, i);\n                        }\n                        // eslint-disable-next-line max-len\n                        annotation[parseInt(i.toString(), 10)].measureShapeAnnotation = this.checkAnnotationCommentsCollections(annotation[parseInt(i.toString(), 10)].measureShapeAnnotation, i);\n                        importPageCollections.measureShapeAnnotation = annotation[parseInt(i.toString(), 10)].measureShapeAnnotation;\n                    }\n                    if (annotation[parseInt(i.toString(), 10)].stampAnnotations && annotation[parseInt(i.toString(), 10)].stampAnnotations.length !== 0) {\n                        if (stampObject) {\n                            var annotObject = JSON.parse(stampObject);\n                            // eslint-disable-next-line max-len\n                            annotation[parseInt(i.toString(), 10)].stampAnnotations = this.checkAnnotationCollections(annotObject, annotation[parseInt(i.toString(), 10)].stampAnnotations, i);\n                        }\n                        annotation[parseInt(i.toString(), 10)].stampAnnotations = this.checkAnnotationCommentsCollections(annotation[parseInt(i.toString(), 10)].stampAnnotations, i);\n                        importPageCollections.stampAnnotations = annotation[parseInt(i.toString(), 10)].stampAnnotations;\n                    }\n                    if (annotation[parseInt(i.toString(), 10)].stickyNotesAnnotation && annotation[parseInt(i.toString(), 10)].stickyNotesAnnotation.length !== 0) {\n                        if (stickyObject) {\n                            var annotObject = JSON.parse(stickyObject);\n                            // eslint-disable-next-line max-len\n                            annotation[parseInt(i.toString(), 10)].stickyNotesAnnotation = this.checkAnnotationCollections(annotObject, annotation[parseInt(i.toString(), 10)].stickyNotesAnnotation, i);\n                        }\n                        // eslint-disable-next-line max-len\n                        annotation[parseInt(i.toString(), 10)].stickyNotesAnnotation = this.checkAnnotationCommentsCollections(annotation[parseInt(i.toString(), 10)].stickyNotesAnnotation, i);\n                        importPageCollections.stickyNotesAnnotation = annotation[parseInt(i.toString(), 10)].stickyNotesAnnotation;\n                    }\n                    if (annotation[parseInt(i.toString(), 10)].freeTextAnnotation && annotation[parseInt(i.toString(), 10)].freeTextAnnotation.length !== 0) {\n                        if (freeTextObject) {\n                            var annotObject = JSON.parse(freeTextObject);\n                            // eslint-disable-next-line max-len\n                            annotation[parseInt(i.toString(), 10)].freeTextAnnotation = this.checkAnnotationCollections(annotObject, annotation[parseInt(i.toString(), 10)].freeTextAnnotation, i);\n                        }\n                        annotation[parseInt(i.toString(), 10)].freeTextAnnotation = this.checkAnnotationCommentsCollections(annotation[parseInt(i.toString(), 10)].freeTextAnnotation, i);\n                        importPageCollections.freeTextAnnotation = annotation[parseInt(i.toString(), 10)].freeTextAnnotation;\n                    }\n                    if (annotation[parseInt(i.toString(), 10)].signatureAnnotation && annotation[parseInt(i.toString(), 10)].signatureAnnotation.length !== 0) {\n                        if (signatureObject) {\n                            var annotObject = JSON.parse(signatureObject);\n                            // eslint-disable-next-line max-len\n                            annotation[parseInt(i.toString(), 10)].signatureAnnotation = this.checkSignatureCollections(annotObject, annotation[parseInt(i.toString(), 10)].signatureAnnotation, i);\n                        }\n                        importPageCollections.signatureAnnotation = annotation[parseInt(i.toString(), 10)].signatureAnnotation;\n                    }\n                    if (annotation[parseInt(i.toString(), 10)].signatureInkAnnotation && annotation[parseInt(i.toString(), 10)].signatureInkAnnotation.length !== 0) {\n                        if (inkObject) {\n                            var annotObject = JSON.parse(inkObject);\n                            // eslint-disable-next-line max-len\n                            annotation[parseInt(i.toString(), 10)].signatureInkAnnotation = this.checkAnnotationCollections(annotObject, annotation[parseInt(i.toString(), 10)].signatureInkAnnotation, i);\n                        }\n                        // eslint-disable-next-line max-len\n                        annotation[parseInt(i.toString(), 10)].signatureInkAnnotation = this.checkAnnotationCommentsCollections(annotation[parseInt(i.toString(), 10)].signatureInkAnnotation, i);\n                        importPageCollections.signatureInkAnnotation = annotation[parseInt(i.toString(), 10)].signatureInkAnnotation;\n                    }\n                    if (annotation[parseInt(i.toString(), 10)].annotationOrder) {\n                        var annotationOrderCollection = annotation[parseInt(i.toString(), 10)].annotationOrder;\n                        var annotationData = [];\n                        for (var index = 0; index < annotationOrderCollection.length; index++) {\n                            var annotationName = annotationOrderCollection[parseInt(index.toString(), 10)].AnnotType ? annotationOrderCollection[parseInt(index.toString(), 10)].AnnotType : annotationOrderCollection[parseInt(index.toString(), 10)].AnnotationType;\n                            annotationData.push(annotationOrderCollection[parseInt(index.toString(), 10)]);\n                            var annotObject = void 0;\n                            switch (annotationName) {\n                                case 'textMarkup':\n                                    if (annotation[parseInt(i.toString(), 10)].textMarkupAnnotation.length !== 0 || annotationData.length !== 0) {\n                                        this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(annotationData, i);\n                                        for (var j = 0; j < annotationData.length; j++) {\n                                            this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.textMarkupAnnotationModule.updateTextMarkupAnnotationCollections(annotationOrderCollection[parseInt(index.toString(), 10)], i));\n                                        }\n                                    }\n                                    break;\n                                case 'shape':\n                                    if (annotation[parseInt(i.toString(), 10)].shapeAnnotation.length !== 0 || annotationData.length !== 0) {\n                                        this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(annotationData, i);\n                                        for (var j = 0; j < annotationData.length; j++) {\n                                            this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.shapeAnnotationModule.updateShapeAnnotationCollections(annotationOrderCollection[parseInt(index.toString(), 10)], i));\n                                        }\n                                    }\n                                    break;\n                                case 'shape_measure':\n                                    if (annotation[parseInt(i.toString(), 10)].measureShapeAnnotation.length !== 0 || annotationData.length !== 0) {\n                                        this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(annotationData, i);\n                                        for (var j = 0; j < annotationData.length; j++) {\n                                            this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.measureAnnotationModule.updateMeasureAnnotationCollections(annotationOrderCollection[parseInt(index.toString(), 10)], i));\n                                        }\n                                    }\n                                    break;\n                                case 'stamp':\n                                    if (annotation[parseInt(i.toString(), 10)].stampAnnotations.length !== 0 || annotationData.length !== 0) {\n                                        this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(annotationData, i);\n                                        for (var j = 0; j < annotationData.length; j++) {\n                                            this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.stampAnnotationModule.updateStampAnnotationCollections(annotationOrderCollection[parseInt(index.toString(), 10)], i));\n                                        }\n                                    }\n                                    break;\n                                case 'Text Box':\n                                case 'freeText':\n                                    if (annotation[parseInt(i.toString(), 10)].freeTextAnnotation.length !== 0 || annotationData.length !== 0) {\n                                        this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(annotationData, i);\n                                        for (var j = 0; j < annotationData.length; j++) {\n                                            this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.freeTextAnnotationModule.updateFreeTextAnnotationCollections(annotationOrderCollection[parseInt(index.toString(), 10)], i));\n                                        }\n                                    }\n                                    break;\n                                case 'sticky':\n                                    if (annotation[parseInt(i.toString(), 10)].stickyNotesAnnotation.length !== 0 || annotationData.length !== 0) {\n                                        this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(annotationData, i);\n                                        for (var j = 0; j < annotationData.length; j++) {\n                                            this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateStickyNotesAnnotationCollections(annotationOrderCollection[parseInt(index.toString(), 10)], i));\n                                        }\n                                    }\n                                    break;\n                                case 'signature':\n                                    if (annotation[parseInt(i.toString(), 10)].signatureAnnotation.length !== 0 || annotationData.length !== 0) {\n                                        for (var j = 0; j < annotationData.length; j++) {\n                                            this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.signatureModule.updateSignatureCollections(annotationOrderCollection[parseInt(index.toString(), 10)], i), true);\n                                        }\n                                    }\n                                    break;\n                                case 'Ink':\n                                case 'ink':\n                                    if (annotation[parseInt(i.toString(), 10)].signatureInkAnnotation.length !== 0 || annotationData.length !== 0) {\n                                        this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(annotationData, i);\n                                        for (var j = 0; j < annotation[parseInt(i.toString(), 10)].annotationOrder[parseInt(index.toString(), 10)].length; j++) {\n                                            this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.inkAnnotationModule.updateInkCollections(annotationOrderCollection[parseInt(index.toString(), 10)], i));\n                                        }\n                                    }\n                                    break;\n                            }\n                            annotationData = [];\n                        }\n                    }\n                    this.updateImportedAnnotationsInDocumentCollections(importPageCollections, i);\n                }\n            }\n            if (this.pageCount > 0) {\n                // eslint-disable-next-line max-len\n                if (this.pdfViewer.annotationModule.stickyNotesAnnotationModule && !this.pdfViewer.annotationModule.stickyNotesAnnotationModule.isAnnotationRendered) {\n                    // eslint-disable-next-line\n                    var annotationCollection = this.createAnnotationsCollection();\n                    if (annotationCollection) {\n                        // eslint-disable-next-line max-len\n                        this.documentAnnotationCollections = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationsInDocumentCollections(this.importedAnnotation, annotationCollection);\n                    }\n                }\n            }\n        }\n        this.isImportAction = false;\n    };\n    /**\n     * @param importedAnnotations\n     * @param pageNumber\n     * @private\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.updateImportedAnnotationsInDocumentCollections = function (importedAnnotations, pageNumber) {\n        if (this.documentAnnotationCollections) {\n            // eslint-disable-next-line\n            var documentAnnotationCollection = this.documentAnnotationCollections;\n            // eslint-disable-next-line\n            var pageCollections = documentAnnotationCollection[pageNumber];\n            if (pageCollections) {\n                if (importedAnnotations.textMarkupAnnotation && importedAnnotations.textMarkupAnnotation.length !== 0) {\n                    for (var i = 0; i < importedAnnotations.textMarkupAnnotation.length; i++) {\n                        pageCollections.textMarkupAnnotation.push(importedAnnotations.textMarkupAnnotation[parseInt(i.toString(), 10)]);\n                    }\n                }\n                if (importedAnnotations.shapeAnnotation && importedAnnotations.shapeAnnotation.length !== 0) {\n                    for (var i = 0; i < importedAnnotations.shapeAnnotation.length; i++) {\n                        pageCollections.shapeAnnotation.push(importedAnnotations.shapeAnnotation[parseInt(i.toString(), 10)]);\n                    }\n                }\n                if (importedAnnotations.measureShapeAnnotation && importedAnnotations.measureShapeAnnotation.length !== 0) {\n                    for (var i = 0; i < importedAnnotations.measureShapeAnnotation.length; i++) {\n                        pageCollections.measureShapeAnnotation.push(importedAnnotations.measureShapeAnnotation[parseInt(i.toString(), 10)]);\n                    }\n                }\n                if (importedAnnotations.stampAnnotations && importedAnnotations.stampAnnotations.length !== 0) {\n                    for (var i = 0; i < importedAnnotations.stampAnnotations.length; i++) {\n                        pageCollections.stampAnnotations.push(importedAnnotations.stampAnnotations[parseInt(i.toString(), 10)]);\n                    }\n                }\n                if (importedAnnotations.stickyNotesAnnotation && importedAnnotations.stickyNotesAnnotation.length !== 0) {\n                    for (var i = 0; i < importedAnnotations.stickyNotesAnnotation.length; i++) {\n                        pageCollections.stickyNotesAnnotation.push(importedAnnotations.stickyNotesAnnotation[parseInt(i.toString(), 10)]);\n                    }\n                }\n                if (importedAnnotations.freeTextAnnotation && importedAnnotations.freeTextAnnotation.length !== 0) {\n                    for (var i = 0; i < importedAnnotations.freeTextAnnotation.length; i++) {\n                        pageCollections.freeTextAnnotation.push(importedAnnotations.freeTextAnnotation[parseInt(i.toString(), 10)]);\n                    }\n                }\n                if (importedAnnotations.signatureAnnotation && importedAnnotations.signatureAnnotation.length !== 0) {\n                    for (var i = 0; i < importedAnnotations.signatureAnnotation.length; i++) {\n                        pageCollections.signatureAnnotation.push(importedAnnotations.signatureAnnotation[parseInt(i.toString(), 10)]);\n                    }\n                }\n                if (importedAnnotations.signatureInkAnnotation && importedAnnotations.signatureInkAnnotation.length !== 0) {\n                    for (var i = 0; i < importedAnnotations.signatureInkAnnotation.length; i++) {\n                        pageCollections.signatureInkAnnotation.push(importedAnnotations.signatureInkAnnotation[parseInt(i.toString(), 10)]);\n                    }\n                }\n                this.documentAnnotationCollections[parseInt(pageNumber.toString(), 10)] = pageCollections;\n            }\n        }\n    };\n    /**\n     * @param pageIndex\n     * @param pageCollections\n     * @param pageIndex\n     * @param pageCollections\n     * @private\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.checkDocumentCollectionData = function (pageIndex, pageCollections) {\n        // eslint-disable-next-line\n        var importPageCollections;\n        if (pageCollections) {\n            importPageCollections = pageCollections;\n        }\n        else if (this.documentAnnotationCollections) {\n            // eslint-disable-next-line\n            var documetCollections = this.documentAnnotationCollections[pageIndex];\n            if (documetCollections) {\n                importPageCollections = cloneObject(documetCollections);\n            }\n        }\n        if (importPageCollections) {\n            // eslint-disable-next-line\n            var textMarkupObject = window.sessionStorage.getItem(this.documentId + '_annotations_textMarkup');\n            // eslint-disable-next-line\n            var shapeObject = window.sessionStorage.getItem(this.documentId + '_annotations_shape');\n            // eslint-disable-next-line\n            var measureShapeObject = window.sessionStorage.getItem(this.documentId + '_annotations_shape_measure');\n            // eslint-disable-next-line\n            var stampObject = window.sessionStorage.getItem(this.documentId + '_annotations_stamp');\n            // eslint-disable-next-line\n            var stickyObject = window.sessionStorage.getItem(this.documentId + '_annotations_sticky');\n            // eslint-disable-next-line\n            var freeTextObject = window.sessionStorage.getItem(this.documentId + '_annotations_freetext');\n            // eslint-disable-next-line\n            var inkObject = window.sessionStorage.getItem(this.documentId + '_annotations_ink');\n            // eslint-disable-next-line\n            var signatureObject = window.sessionStorage.getItem(this.documentId + '_annotations_sign');\n            if (this.isStorageExceed) {\n                textMarkupObject = this.annotationStorage[this.documentId + '_annotations_textMarkup'];\n                shapeObject = this.annotationStorage[this.documentId + '_annotations_shape'];\n                measureShapeObject = this.annotationStorage[this.documentId + '_annotations_shape_measure'];\n                stampObject = this.annotationStorage[this.documentId + '_annotations_stamp'];\n                stickyObject = this.annotationStorage[this.documentId + '_annotations_sticky'];\n                freeTextObject = this.annotationStorage[this.documentId + '_annotations_freetext'];\n                inkObject = this.annotationStorage[this.documentId + '_annotations_ink'];\n                signatureObject = this.annotationStorage[this.documentId + '_annotations_sign'];\n            }\n            if (importPageCollections.textMarkupAnnotation && importPageCollections.textMarkupAnnotation.length !== 0) {\n                if (textMarkupObject) {\n                    var annotationObject = JSON.parse(textMarkupObject);\n                    if (annotationObject) {\n                        // eslint-disable-next-line max-len\n                        importPageCollections.textMarkupAnnotation = this.findImportedAnnotations(annotationObject, importPageCollections.textMarkupAnnotation, pageIndex);\n                    }\n                }\n            }\n            if (importPageCollections.shapeAnnotation && importPageCollections.shapeAnnotation.length !== 0) {\n                if (shapeObject) {\n                    var annotationObject = JSON.parse(shapeObject);\n                    if (annotationObject) {\n                        // eslint-disable-next-line max-len\n                        importPageCollections.shapeAnnotation = this.findImportedAnnotations(annotationObject, importPageCollections.shapeAnnotation, pageIndex);\n                    }\n                }\n            }\n            if (importPageCollections.measureShapeAnnotation && importPageCollections.measureShapeAnnotation.length !== 0) {\n                if (measureShapeObject) {\n                    var annotationObject = JSON.parse(measureShapeObject);\n                    if (annotationObject) {\n                        // eslint-disable-next-line max-len\n                        importPageCollections.measureShapeAnnotation = this.findImportedAnnotations(annotationObject, importPageCollections.measureShapeAnnotation, pageIndex);\n                    }\n                }\n            }\n            if (importPageCollections.stampAnnotations && importPageCollections.stampAnnotations.length !== 0) {\n                if (stampObject) {\n                    var annotationObject = JSON.parse(stampObject);\n                    if (annotationObject) {\n                        // eslint-disable-next-line max-len\n                        importPageCollections.stampAnnotations = this.findImportedAnnotations(annotationObject, importPageCollections.stampAnnotations, pageIndex);\n                    }\n                }\n            }\n            if (importPageCollections.stickyNotesAnnotation && importPageCollections.stickyNotesAnnotation.length !== 0) {\n                if (stickyObject) {\n                    var annotationObject = JSON.parse(stickyObject);\n                    if (annotationObject) {\n                        // eslint-disable-next-line max-len\n                        importPageCollections.stickyNotesAnnotation = this.findImportedAnnotations(annotationObject, importPageCollections.stickyNotesAnnotation, pageIndex);\n                    }\n                }\n            }\n            if (importPageCollections.freeTextAnnotation && importPageCollections.freeTextAnnotation.length !== 0) {\n                if (freeTextObject) {\n                    var annotationObject = JSON.parse(freeTextObject);\n                    if (annotationObject) {\n                        // eslint-disable-next-line max-len\n                        importPageCollections.freeTextAnnotation = this.findImportedAnnotations(annotationObject, importPageCollections.freeTextAnnotation, pageIndex);\n                    }\n                }\n            }\n            if (importPageCollections.signatureInkAnnotation && importPageCollections.signatureInkAnnotation.length !== 0) {\n                if (inkObject) {\n                    var annotationObject = JSON.parse(inkObject);\n                    if (annotationObject) {\n                        // eslint-disable-next-line max-len\n                        importPageCollections.signatureInkAnnotation = this.findImportedAnnotations(annotationObject, importPageCollections.signatureInkAnnotation, pageIndex);\n                    }\n                }\n            }\n            if (importPageCollections.signatureAnnotation && importPageCollections.signatureAnnotation.length !== 0) {\n                if (signatureObject) {\n                    var annotationObject = JSON.parse(inkObject);\n                    if (annotationObject) {\n                        // eslint-disable-next-line max-len\n                        importPageCollections.signatureAnnotation = this.findImportedAnnotations(annotationObject, importPageCollections.signatureAnnotation, pageIndex);\n                    }\n                }\n            }\n            return importPageCollections;\n        }\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.findImportedAnnotations = function (annotationCollection, importAnnotations, pageNumber) {\n        // eslint-disable-next-line\n        var pageCollections = null;\n        for (var a = 0; a < annotationCollection.length; a++) {\n            if (annotationCollection[parseInt(a.toString(), 10)].pageIndex === pageNumber) {\n                pageCollections = annotationCollection[parseInt(a.toString(), 10)].annotations;\n            }\n        }\n        if (pageCollections) {\n            for (var i = 0; i < pageCollections.length; i++) {\n                for (var j = 0; j < importAnnotations.length; j++) {\n                    if (pageCollections[parseInt(i.toString(), 10)].annotName === importAnnotations[parseInt(j.toString(), 10)].AnnotName) {\n                        importAnnotations.splice(j, 1);\n                        j = j - 1;\n                    }\n                }\n            }\n        }\n        pageCollections = null;\n        return importAnnotations;\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.drawPageAnnotations = function (annotation, pageIndex, isNewlyAdded) {\n        if (isNewlyAdded) {\n            annotation = annotation[parseInt(pageIndex.toString(), 10)];\n        }\n        // When utilising the addAnnotation API, the annotationOrder object is not available; thus, the following code is used to put the annotation object into the annotationOrder.\n        if (annotation && !(annotation.annotationOrder)) {\n            var annotationTypes = ['freeTextAnnotation', 'measureShapeAnnotation', 'shapeAnnotation', 'signatureAnnotation', 'signatureInkAnnotation', 'stampAnnotations', 'stickyNotesAnnotation', 'textMarkupAnnotation'];\n            // eslint-disable-next-line\n            var foundAnnotationType = annotationTypes.find(function (type) {\n                if (annotation[\"\" + type] && annotation[\"\" + type].length !== 0) {\n                    return annotation[\"\" + type];\n                }\n            });\n            if (foundAnnotationType) {\n                // eslint-disable-next-line\n                annotation.annotationOrder = annotation[foundAnnotationType];\n            }\n        }\n        if (annotation) {\n            var annotationOrderCollection = annotation.annotationOrder;\n            var annotationData = [];\n            var isRefreshRequired = true;\n            for (var index = 0; index < annotationOrderCollection.length; index++) {\n                var annotationName = annotationOrderCollection[parseInt(index.toString(), 10)].AnnotType ? annotationOrderCollection[parseInt(index.toString(), 10)].AnnotType : annotationOrderCollection[parseInt(index.toString(), 10)].AnnotationType;\n                annotationData.push(annotationOrderCollection[parseInt(index.toString(), 10)]);\n                var storeObject = void 0;\n                var annotObject = void 0;\n                switch (annotationName) {\n                    case 'textMarkup':\n                        isRefreshRequired = false;\n                        storeObject = window.sessionStorage.getItem(this.documentId + '_annotations_textMarkup');\n                        if (this.isStorageExceed) {\n                            storeObject = this.annotationStorage[this.documentId + '_annotations_textMarkup'];\n                        }\n                        if (storeObject) {\n                            annotObject = JSON.parse(storeObject);\n                            if (annotObject) {\n                                annotationData = this.checkAnnotationCollections(annotObject, annotationData, pageIndex);\n                            }\n                        }\n                        annotation.textMarkupAnnotation = this.checkAnnotationCommentsCollections(annotation.textMarkupAnnotation, pageIndex);\n                        this.pdfViewer.annotationModule.renderAnnotations(pageIndex, null, null, annotationData, null, true);\n                        break;\n                    case 'shape':\n                        isRefreshRequired = false;\n                        storeObject = window.sessionStorage.getItem(this.documentId + '_annotations_shape');\n                        if (this.isStorageExceed) {\n                            storeObject = this.annotationStorage[this.documentId + '_annotations_shape'];\n                        }\n                        if (storeObject) {\n                            annotObject = JSON.parse(storeObject);\n                            annotationData = this.checkAnnotationCollections(annotObject, annotationData, pageIndex);\n                        }\n                        annotation.shapeAnnotation = this.checkAnnotationCommentsCollections(annotation.shapeAnnotation, pageIndex);\n                        this.pdfViewer.annotationModule.renderAnnotations(pageIndex, annotationData, null, null, null, true);\n                        break;\n                    case 'shape_measure':\n                        isRefreshRequired = false;\n                        storeObject = window.sessionStorage.getItem(this.documentId + '_annotations_shape_measure');\n                        if (this.isStorageExceed) {\n                            storeObject = this.annotationStorage[this.documentId + '_annotations_shape_measure'];\n                        }\n                        if (storeObject) {\n                            annotObject = JSON.parse(storeObject);\n                            annotationData = this.checkAnnotationCollections(annotObject, annotationData, pageIndex);\n                        }\n                        annotation.measureShapeAnnotation = this.checkAnnotationCommentsCollections(annotation.measureShapeAnnotation, pageIndex);\n                        this.pdfViewer.annotationModule.renderAnnotations(pageIndex, null, annotationData, null, null, true);\n                        break;\n                    case 'stamp':\n                        storeObject = window.sessionStorage.getItem(this.documentId + '_annotations_stamp');\n                        if (this.isStorageExceed) {\n                            storeObject = this.annotationStorage[this.documentId + '_annotations_stamp'];\n                        }\n                        if (storeObject) {\n                            annotObject = JSON.parse(storeObject);\n                            annotationData = this.checkAnnotationCollections(annotObject, annotationData, pageIndex);\n                        }\n                        annotation.stampAnnotations = this.checkAnnotationCommentsCollections(annotation.stampAnnotations, pageIndex);\n                        this.pdfViewer.annotationModule.stampAnnotationModule.renderStampAnnotations(annotationData, pageIndex, null, true);\n                        break;\n                    case 'Text Box':\n                    case 'freeText':\n                        storeObject = window.sessionStorage.getItem(this.documentId + '_annotations_freetext');\n                        if (this.isStorageExceed) {\n                            storeObject = this.annotationStorage[this.documentId + '_annotations_freetext'];\n                        }\n                        if (storeObject) {\n                            annotObject = JSON.parse(storeObject);\n                            annotationData = this.checkAnnotationCollections(annotObject, annotationData, pageIndex);\n                        }\n                        annotation.freeTextAnnotation = this.checkAnnotationCommentsCollections(annotation.freeTextAnnotation, pageIndex);\n                        this.pdfViewer.annotationModule.freeTextAnnotationModule.renderFreeTextAnnotations(annotationData, pageIndex, true);\n                        break;\n                    case 'sticky':\n                        storeObject = window.sessionStorage.getItem(this.documentId + '_annotations_sticky');\n                        if (this.isStorageExceed) {\n                            storeObject = this.annotationStorage[this.documentId + '_annotations_sticky'];\n                        }\n                        if (storeObject) {\n                            annotObject = JSON.parse(storeObject);\n                            annotationData = this.checkAnnotationCollections(annotObject, annotationData, pageIndex);\n                        }\n                        annotation.stickyNotesAnnotation = this.checkAnnotationCommentsCollections(annotation.stickyNotesAnnotation, pageIndex);\n                        this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderStickyNotesAnnotations(annotationData, pageIndex);\n                        break;\n                    case 'signature':\n                        storeObject = window.sessionStorage.getItem(this.documentId + '_annotations_sign');\n                        annotObject = JSON.parse(storeObject);\n                        if (annotObject) {\n                            annotation.signatureAnnotation = this.checkSignatureCollections(annotObject, annotationData, pageIndex);\n                        }\n                        this.signatureModule.renderExistingSignature(annotationData, pageIndex, true);\n                        break;\n                    case 'Ink':\n                    case 'ink':\n                        storeObject = window.sessionStorage.getItem(this.documentId + '_annotations_ink');\n                        if (this.isStorageExceed) {\n                            storeObject = this.annotationStorage[this.documentId + '_annotations_ink'];\n                        }\n                        if (storeObject) {\n                            annotObject = JSON.parse(storeObject);\n                            annotationData = this.checkAnnotationCollections(annotObject, annotationData, pageIndex);\n                        }\n                        annotation.signatureInkAnnotation = this.checkAnnotationCommentsCollections(annotation.signatureInkAnnotation, pageIndex);\n                        this.pdfViewer.annotationModule.inkAnnotationModule.renderExistingInkSignature(annotationData, pageIndex, true);\n                        break;\n                    default:\n                        break;\n                }\n                annotationData = [];\n            }\n            if (isRefreshRequired) {\n                var canvas = this.getElement('_annotationCanvas_' + pageIndex);\n                this.pdfViewer.drawing.refreshCanvasDiagramLayer(canvas, pageIndex);\n            }\n        }\n        ;\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.checkSignatureCollections = function (annotationCollection, annotation, pageNumber) {\n        // eslint-disable-next-line\n        var pageCollections = null;\n        for (var a = 0; a < annotationCollection.length; a++) {\n            if (annotationCollection[parseInt(a.toString(), 10)].pageIndex === pageNumber) {\n                pageCollections = annotationCollection[parseInt(a.toString(), 10)].annotations;\n            }\n        }\n        if (pageCollections) {\n            for (var i = 0; i < pageCollections.length; i++) {\n                for (var j = 0; j < annotation.length; j++) {\n                    if (pageCollections[parseInt(i.toString(), 10)].signatureName === annotation[parseInt(j.toString(), 10)].SignatureName) {\n                        annotation.splice(j, 1);\n                        j = j - 1;\n                    }\n                }\n            }\n        }\n        pageCollections = null;\n        return annotation;\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.checkAnnotationCollections = function (annotationCollection, annotation, pageNumber) {\n        // eslint-disable-next-line\n        var pageCollections = null;\n        for (var a = 0; a < annotationCollection.length; a++) {\n            if (annotationCollection[parseInt(a.toString(), 10)].pageIndex === pageNumber) {\n                pageCollections = annotationCollection[parseInt(a.toString(), 10)].annotations;\n            }\n        }\n        if (pageCollections) {\n            for (var i = 0; i < pageCollections.length; i++) {\n                for (var j = 0; j < annotation.length; j++) {\n                    if (pageCollections[parseInt(i.toString(), 10)].annotName === annotation[parseInt(j.toString(), 10)].AnnotName) {\n                        annotation.splice(j, 1);\n                        j = j - 1;\n                    }\n                }\n            }\n        }\n        pageCollections = null;\n        return annotation;\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.checkAnnotationCommentsCollections = function (annotation, pageNumber) {\n        if (this.annotationComments) {\n            // eslint-disable-next-line\n            var annotationCollections = this.annotationComments[pageNumber];\n            annotationCollections = this.selectAnnotationCollections(annotationCollections);\n            if (annotationCollections) {\n                for (var i = 0; i < annotationCollections.length; i++) {\n                    for (var j = 0; j < annotation.length; j++) {\n                        if (annotationCollections[parseInt(i.toString(), 10)].AnnotName === annotation[parseInt(j.toString(), 10)].AnnotName) {\n                            annotation.splice(j, 1);\n                            j = j - 1;\n                        }\n                    }\n                }\n            }\n            annotationCollections = null;\n        }\n        return annotation;\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.selectAnnotationCollections = function (pageAnnotations) {\n        // eslint-disable-next-line\n        var pageCollections = [];\n        if (pageAnnotations) {\n            if (pageAnnotations.textMarkupAnnotation && pageAnnotations.textMarkupAnnotation.length !== 0) {\n                for (var i = 0; i < pageAnnotations.textMarkupAnnotation.length; i++) {\n                    pageCollections.push(pageAnnotations.textMarkupAnnotation[parseInt(i.toString(), 10)]);\n                }\n            }\n            if (pageAnnotations.shapeAnnotation && pageAnnotations.shapeAnnotation.length !== 0) {\n                for (var i = 0; i < pageAnnotations.shapeAnnotation.length; i++) {\n                    pageCollections.push(pageAnnotations.shapeAnnotation[parseInt(i.toString(), 10)]);\n                }\n            }\n            if (pageAnnotations.measureShapeAnnotation && pageAnnotations.measureShapeAnnotation.length !== 0) {\n                for (var i = 0; i < pageAnnotations.measureShapeAnnotation.length; i++) {\n                    pageCollections.push(pageAnnotations.measureShapeAnnotation[parseInt(i.toString(), 10)]);\n                }\n            }\n            if (pageAnnotations.stampAnnotations && pageAnnotations.stampAnnotations.length !== 0) {\n                for (var i = 0; i < pageAnnotations.stampAnnotations.length; i++) {\n                    pageCollections.push(pageAnnotations.stampAnnotations[parseInt(i.toString(), 10)]);\n                }\n            }\n            if (pageAnnotations.stickyNotesAnnotation && pageAnnotations.stickyNotesAnnotation.length !== 0) {\n                for (var i = 0; i < pageAnnotations.stickyNotesAnnotation.length; i++) {\n                    pageCollections.push(pageAnnotations.stickyNotesAnnotation[parseInt(i.toString(), 10)]);\n                }\n            }\n            if (pageAnnotations.freeTextAnnotation && pageAnnotations.freeTextAnnotation.length !== 0) {\n                for (var i = 0; i < pageAnnotations.freeTextAnnotation.length; i++) {\n                    pageCollections.push(pageAnnotations.freeTextAnnotation[parseInt(i.toString(), 10)]);\n                }\n            }\n            if (pageAnnotations.signatureInkAnnotation && pageAnnotations.signatureInkAnnotation.length !== 0) {\n                for (var i = 0; i < pageAnnotations.signatureInkAnnotation.length; i++) {\n                    pageCollections.push(pageAnnotations.signatureInkAnnotation[parseInt(i.toString(), 10)]);\n                }\n            }\n        }\n        return pageCollections;\n    };\n    PdfViewerBase.prototype.saveImportedAnnotations = function () {\n        // eslint-disable-next-line\n        var textMarkupObject = window.sessionStorage.getItem(this.documentId + '_annotations_textMarkup');\n        // eslint-disable-next-line\n        var shapeObject = window.sessionStorage.getItem(this.documentId + '_annotations_shape');\n        // eslint-disable-next-line\n        var measureShapeObject = window.sessionStorage.getItem(this.documentId + '_annotations_shape_measure');\n        // eslint-disable-next-line\n        var stampObject = window.sessionStorage.getItem(this.documentId + '_annotations_stamp');\n        // eslint-disable-next-line\n        var stickyObject = window.sessionStorage.getItem(this.documentId + '_annotations_sticky');\n        // eslint-disable-next-line\n        var freeTextObject = window.sessionStorage.getItem(this.documentId + '_annotations_freetext');\n        // eslint-disable-next-line\n        var inkObject = window.sessionStorage.getItem(this.documentId + '_annotations_ink');\n        // eslint-disable-next-line\n        var signatureObject = window.sessionStorage.getItem(this.documentId + '_annotations_sign');\n        if (this.isStorageExceed) {\n            textMarkupObject = this.annotationStorage[this.documentId + '_annotations_textMarkup'];\n            shapeObject = this.annotationStorage[this.documentId + '_annotations_shape'];\n            measureShapeObject = this.annotationStorage[this.documentId + '_annotations_shape_measure'];\n            stampObject = this.annotationStorage[this.documentId + '_annotations_stamp'];\n            stickyObject = this.annotationStorage[this.documentId + '_annotations_sticky'];\n            freeTextObject = this.annotationStorage[this.documentId + '_annotations_freetext'];\n            inkObject = this.annotationStorage[this.documentId + '_annotations_ink'];\n            signatureObject = this.annotationStorage[this.documentId + '_annotations_sign'];\n        }\n        // eslint-disable-next-line max-len\n        this.downloadCollections = { textMarkupObject: textMarkupObject, shapeObject: shapeObject, measureShapeObject: measureShapeObject, stampObject: stampObject, stickyObject: stickyObject, freeTextObject: freeTextObject, inkObject: inkObject, signatureObject: signatureObject };\n        if (this.documentAnnotationCollections) {\n            for (var i = 0; i < this.pageCount; i++) {\n                if (this.documentAnnotationCollections[parseInt(i.toString(), 10)]) {\n                    // eslint-disable-next-line\n                    var pageCollections = cloneObject(this.documentAnnotationCollections[i]);\n                    pageCollections = this.checkDocumentCollectionData(i, pageCollections);\n                    this.savePageAnnotations(pageCollections, i);\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.savePageAnnotations = function (annotation, pageIndex) {\n        if (annotation.textMarkupAnnotation.length !== 0) {\n            for (var s = 0; s < annotation.textMarkupAnnotation.length; s++) {\n                // eslint-disable-next-line max-len\n                this.pdfViewer.annotationModule.textMarkupAnnotationModule.saveImportedTextMarkupAnnotations(annotation.textMarkupAnnotation[parseInt(s.toString(), 10)], pageIndex);\n            }\n        }\n        if (annotation.shapeAnnotation.length !== 0) {\n            for (var s = 0; s < annotation.shapeAnnotation.length; s++) {\n                // eslint-disable-next-line max-len\n                this.pdfViewer.annotationModule.shapeAnnotationModule.saveImportedShapeAnnotations(annotation.shapeAnnotation[parseInt(s.toString(), 10)], pageIndex);\n            }\n        }\n        if (annotation.measureShapeAnnotation.length !== 0) {\n            for (var s = 0; s < annotation.measureShapeAnnotation.length; s++) {\n                // eslint-disable-next-line max-len\n                this.pdfViewer.annotationModule.measureAnnotationModule.saveImportedMeasureAnnotations(annotation.measureShapeAnnotation[parseInt(s.toString(), 10)], pageIndex);\n            }\n        }\n        if (annotation.stampAnnotations.length !== 0) {\n            for (var s = 0; s < annotation.stampAnnotations.length; s++) {\n                // eslint-disable-next-line max-len\n                this.pdfViewer.annotationModule.stampAnnotationModule.saveImportedStampAnnotations(annotation.stampAnnotations[parseInt(s.toString(), 10)], pageIndex);\n            }\n        }\n        if (annotation.stickyNotesAnnotation.length !== 0) {\n            for (var s = 0; s < annotation.stickyNotesAnnotation.length; s++) {\n                // eslint-disable-next-line max-len\n                this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveImportedStickyNotesAnnotations(annotation.stickyNotesAnnotation[parseInt(s.toString(), 10)], pageIndex);\n            }\n        }\n        if (annotation.freeTextAnnotation.length !== 0) {\n            for (var s = 0; s < annotation.freeTextAnnotation.length; s++) {\n                // eslint-disable-next-line max-len\n                this.pdfViewer.annotationModule.freeTextAnnotationModule.saveImportedFreeTextAnnotations(annotation.freeTextAnnotation[parseInt(s.toString(), 10)], pageIndex);\n            }\n        }\n        if (annotation.signatureInkAnnotation.length !== 0) {\n            for (var s = 0; s < annotation.signatureInkAnnotation.length; s++) {\n                this.pdfViewer.annotationModule.inkAnnotationModule.saveImportedInkAnnotation(annotation.signatureInkAnnotation[parseInt(s.toString(), 10)], pageIndex);\n            }\n        }\n    };\n    PdfViewerBase.prototype.updateDocumentAnnotationCollections = function () {\n        window.sessionStorage.removeItem(this.documentId + '_annotations_textMarkup');\n        window.sessionStorage.removeItem(this.documentId + '_annotations_shape');\n        window.sessionStorage.removeItem(this.documentId + '_annotations_shape_measure');\n        window.sessionStorage.removeItem(this.documentId + '_annotations_stamp');\n        window.sessionStorage.removeItem(this.documentId + '_annotations_sticky');\n        window.sessionStorage.removeItem(this.documentId + '_annotations_freetext');\n        window.sessionStorage.removeItem(this.documentId + '_annotations_ink');\n        if (this.downloadCollections) {\n            if (this.isStorageExceed) {\n                this.annotationStorage[this.documentId + '_annotations_textMarkup'] = this.downloadCollections.textMarkupObject;\n                this.annotationStorage[this.documentId + '_annotations_shape'] = this.downloadCollections.shapeObject;\n                this.annotationStorage[this.documentId + '_annotations_shape_measure'] = this.downloadCollections.measureShapeObject;\n                this.annotationStorage[this.documentId + '_annotations_stamp'] = this.downloadCollections.stampObject;\n                this.annotationStorage[this.documentId + '_annotations_sticky'] = this.downloadCollections.stickyObject;\n                this.annotationStorage[this.documentId + '_annotations_freetext'] = this.downloadCollections.freeTextObject;\n                this.annotationStorage[this.documentId + '_annotations_ink'] = this.downloadCollections.inkObject;\n            }\n            else {\n                if (this.downloadCollections.textMarkupObject) {\n                    window.sessionStorage.setItem(this.documentId + '_annotations_textMarkup', this.downloadCollections.textMarkupObject);\n                }\n                if (this.downloadCollections.shapeObject) {\n                    window.sessionStorage.setItem(this.documentId + '_annotations_shape', this.downloadCollections.shapeObject);\n                }\n                if (this.downloadCollections.measureShapeObject) {\n                    window.sessionStorage.setItem(this.documentId + '_annotations_shape_measure', this.downloadCollections.measureShapeObject);\n                }\n                if (this.downloadCollections.stampObject) {\n                    window.sessionStorage.setItem(this.documentId + '_annotations_stamp', this.downloadCollections.stampObject);\n                }\n                if (this.downloadCollections.stickyObject) {\n                    window.sessionStorage.setItem(this.documentId + '_annotations_sticky', this.downloadCollections.stickyObject);\n                }\n                if (this.downloadCollections.freeTextObject) {\n                    window.sessionStorage.setItem(this.documentId + '_annotations_freetext', this.downloadCollections.freeTextObject);\n                }\n                if (this.downloadCollections.inkObject) {\n                    window.sessionStorage.setItem(this.documentId + '_annotations_ink', this.downloadCollections.inkObject);\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.createAnnotationJsonData = function () {\n        // eslint-disable-next-line\n        var annotationCollection = {};\n        var textMarkupAnnotationCollection;\n        var shapeAnnotations;\n        var calibrateAnnotations;\n        var stampAnnotationCollection;\n        var stickyAnnotationCollection;\n        var freeTextAnnotationCollection;\n        var signaturCollection;\n        var signaturInkCollection;\n        this.saveImportedAnnotations();\n        if (this.isTextMarkupAnnotationModule()) {\n            this.isJsonExported = true;\n            // eslint-disable-next-line max-len\n            textMarkupAnnotationCollection = this.pdfViewer.annotationModule.textMarkupAnnotationModule.saveTextMarkupAnnotations();\n        }\n        if (this.isShapeAnnotationModule()) {\n            this.isJsonExported = true;\n            // eslint-disable-next-line max-len\n            shapeAnnotations = this.pdfViewer.annotationModule.shapeAnnotationModule.saveShapeAnnotations();\n        }\n        if (this.isCalibrateAnnotationModule()) {\n            this.isJsonExported = true;\n            // eslint-disable-next-line max-len\n            calibrateAnnotations = this.pdfViewer.annotationModule.measureAnnotationModule.saveMeasureShapeAnnotations();\n        }\n        if (this.isStampAnnotationModule()) {\n            // eslint-disable-next-line max-len\n            stampAnnotationCollection = this.pdfViewer.annotationModule.stampAnnotationModule.saveStampAnnotations();\n        }\n        if (this.isCommentAnnotationModule()) {\n            // eslint-disable-next-line max-len\n            stickyAnnotationCollection = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveStickyAnnotations();\n        }\n        if (this.isFreeTextAnnotationModule()) {\n            // eslint-disable-next-line max-len\n            freeTextAnnotationCollection = this.pdfViewer.annotationModule.freeTextAnnotationModule.saveFreeTextAnnotations();\n        }\n        if (this.isInkAnnotationModule()) {\n            // eslint-disable-next-line\n            signaturInkCollection = this.pdfViewer.annotationModule.inkAnnotationModule.saveInkSignature();\n        }\n        if (this.pdfViewer.isSignatureEditable) {\n            // eslint-disable-next-line\n            signaturCollection = this.signatureModule.saveSignature();\n        }\n        else {\n            // eslint-disable-next-line\n            var annotations = new Array();\n            for (var j = 0; j < this.pageCount; j++) {\n                annotations[parseInt(j.toString(), 10)] = [];\n            }\n            signaturCollection = JSON.stringify(annotations);\n        }\n        for (var s = 0; s < this.pageCount; s++) {\n            // eslint-disable-next-line max-len\n            var annotation = {\n                textMarkupAnnotation: JSON.parse(textMarkupAnnotationCollection)[parseInt(s.toString(), 10)], shapeAnnotation: JSON.parse(shapeAnnotations)[parseInt(s.toString(), 10)],\n                measureShapeAnnotation: JSON.parse(calibrateAnnotations)[parseInt(s.toString(), 10)], stampAnnotations: JSON.parse(stampAnnotationCollection)[parseInt(s.toString(), 10)],\n                // eslint-disable-next-line max-len\n                stickyNotesAnnotation: JSON.parse(stickyAnnotationCollection)[parseInt(s.toString(), 10)], freeTextAnnotation: JSON.parse(freeTextAnnotationCollection)[parseInt(s.toString(), 10)], signatureAnnotation: JSON.parse(signaturCollection)[parseInt(s.toString(), 10)], signatureInkAnnotation: JSON.parse(signaturInkCollection)[parseInt(s.toString(), 10)]\n            };\n            annotationCollection[parseInt(s.toString(), 10)] = annotation;\n        }\n        return JSON.stringify(annotationCollection);\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.combineImportedData = function (excistingImportAnnotation, newlyImportAnnotation) {\n        for (var i = 0; i < this.pageCount; i++) {\n            if (newlyImportAnnotation[parseInt(i.toString(), 10)]) {\n                if (excistingImportAnnotation[parseInt(i.toString(), 10)]) {\n                    if (newlyImportAnnotation[parseInt(i.toString(), 10)].textMarkupAnnotation && newlyImportAnnotation[parseInt(i.toString(), 10)].textMarkupAnnotation.length !== 0) {\n                        if (excistingImportAnnotation[parseInt(i.toString(), 10)].textMarkupAnnotation) {\n                            // eslint-disable-next-line max-len\n                            newlyImportAnnotation[parseInt(i.toString(), 10)].textMarkupAnnotation = this.checkImportedData(excistingImportAnnotation[parseInt(i.toString(), 10)].textMarkupAnnotation, newlyImportAnnotation[parseInt(i.toString(), 10)].textMarkupAnnotation, i);\n                            if (newlyImportAnnotation[parseInt(i.toString(), 10)].textMarkupAnnotation.length !== 0) {\n                                // eslint-disable-next-line max-len\n                                excistingImportAnnotation[parseInt(i.toString(), 10)].textMarkupAnnotation = excistingImportAnnotation[parseInt(i.toString(), 10)].textMarkupAnnotation.concat(newlyImportAnnotation[parseInt(i.toString(), 10)].textMarkupAnnotation);\n                            }\n                        }\n                        else {\n                            excistingImportAnnotation[parseInt(i.toString(), 10)].textMarkupAnnotation = newlyImportAnnotation[parseInt(i.toString(), 10)].textMarkupAnnotation;\n                        }\n                    }\n                    if (newlyImportAnnotation[parseInt(i.toString(), 10)].shapeAnnotation && newlyImportAnnotation[parseInt(i.toString(), 10)].shapeAnnotation.length !== 0) {\n                        if (excistingImportAnnotation[parseInt(i.toString(), 10)].shapeAnnotation) {\n                            // eslint-disable-next-line max-len\n                            newlyImportAnnotation[parseInt(i.toString(), 10)].shapeAnnotation = this.checkImportedData(excistingImportAnnotation[parseInt(i.toString(), 10)].shapeAnnotation, newlyImportAnnotation[parseInt(i.toString(), 10)].shapeAnnotation, i);\n                            if (newlyImportAnnotation[parseInt(i.toString(), 10)].shapeAnnotation.length !== 0) {\n                                // eslint-disable-next-line max-len\n                                excistingImportAnnotation[parseInt(i.toString(), 10)].shapeAnnotation = excistingImportAnnotation[parseInt(i.toString(), 10)].shapeAnnotation.concat(newlyImportAnnotation[parseInt(i.toString(), 10)].shapeAnnotation);\n                            }\n                        }\n                        else {\n                            excistingImportAnnotation[parseInt(i.toString(), 10)].shapeAnnotation = newlyImportAnnotation[parseInt(i.toString(), 10)].shapeAnnotation;\n                        }\n                    }\n                    if (newlyImportAnnotation[parseInt(i.toString(), 10)].measureShapeAnnotation && newlyImportAnnotation[parseInt(i.toString(), 10)].measureShapeAnnotation.length !== 0) {\n                        if (excistingImportAnnotation[parseInt(i.toString(), 10)].measureShapeAnnotation) {\n                            // eslint-disable-next-line max-len\n                            newlyImportAnnotation[parseInt(i.toString(), 10)].measureShapeAnnotation = this.checkImportedData(excistingImportAnnotation[parseInt(i.toString(), 10)].measureShapeAnnotation, newlyImportAnnotation[parseInt(i.toString(), 10)].measureShapeAnnotation, i);\n                            if (newlyImportAnnotation[parseInt(i.toString(), 10)].measureShapeAnnotation.length !== 0) {\n                                // eslint-disable-next-line max-len\n                                excistingImportAnnotation[parseInt(i.toString(), 10)].measureShapeAnnotation = excistingImportAnnotation[parseInt(i.toString(), 10)].measureShapeAnnotation.concat(newlyImportAnnotation[parseInt(i.toString(), 10)].measureShapeAnnotation);\n                            }\n                        }\n                        else {\n                            excistingImportAnnotation[parseInt(i.toString(), 10)].measureShapeAnnotation = newlyImportAnnotation[parseInt(i.toString(), 10)].measureShapeAnnotation;\n                        }\n                    }\n                    if (newlyImportAnnotation[parseInt(i.toString(), 10)].stampAnnotations && newlyImportAnnotation[parseInt(i.toString(), 10)].stampAnnotations.length !== 0) {\n                        if (excistingImportAnnotation[parseInt(i.toString(), 10)].stampAnnotations) {\n                            // eslint-disable-next-line max-len\n                            newlyImportAnnotation[parseInt(i.toString(), 10)].stampAnnotations = this.checkImportedData(excistingImportAnnotation[parseInt(i.toString(), 10)].stampAnnotations, newlyImportAnnotation[parseInt(i.toString(), 10)].stampAnnotations, i);\n                            if (newlyImportAnnotation[parseInt(i.toString(), 10)].stampAnnotations.length !== 0) {\n                                // eslint-disable-next-line max-len\n                                excistingImportAnnotation[parseInt(i.toString(), 10)].stampAnnotations = excistingImportAnnotation[parseInt(i.toString(), 10)].stampAnnotations.concat(newlyImportAnnotation[parseInt(i.toString(), 10)].stampAnnotations);\n                            }\n                        }\n                        else {\n                            excistingImportAnnotation[parseInt(i.toString(), 10)].stampAnnotations = newlyImportAnnotation[parseInt(i.toString(), 10)].stampAnnotations;\n                        }\n                    }\n                    if (newlyImportAnnotation[parseInt(i.toString(), 10)].stickyNotesAnnotation && newlyImportAnnotation[parseInt(i.toString(), 10)].stickyNotesAnnotation.length !== 0) {\n                        if (excistingImportAnnotation[parseInt(i.toString(), 10)].stickyNotesAnnotation) {\n                            // eslint-disable-next-line max-len\n                            newlyImportAnnotation[parseInt(i.toString(), 10)].stickyNotesAnnotation = this.checkImportedData(excistingImportAnnotation[parseInt(i.toString(), 10)].stickyNotesAnnotation, newlyImportAnnotation[parseInt(i.toString(), 10)].stickyNotesAnnotation, i);\n                            if (newlyImportAnnotation[parseInt(i.toString(), 10)].stickyNotesAnnotation.length !== 0) {\n                                // eslint-disable-next-line max-len\n                                excistingImportAnnotation[parseInt(i.toString(), 10)].stickyNotesAnnotation = excistingImportAnnotation[parseInt(i.toString(), 10)].stickyNotesAnnotation.concat(newlyImportAnnotation[parseInt(i.toString(), 10)].stickyNotesAnnotation);\n                            }\n                        }\n                        else {\n                            excistingImportAnnotation[parseInt(i.toString(), 10)].stickyNotesAnnotation = newlyImportAnnotation[parseInt(i.toString(), 10)].stickyNotesAnnotation;\n                        }\n                    }\n                    if (newlyImportAnnotation[parseInt(i.toString(), 10)].freeTextAnnotation && newlyImportAnnotation[parseInt(i.toString(), 10)].freeTextAnnotation.length !== 0) {\n                        if (excistingImportAnnotation[parseInt(i.toString(), 10)].freeTextAnnotation) {\n                            // eslint-disable-next-line max-len\n                            newlyImportAnnotation[parseInt(i.toString(), 10)].freeTextAnnotation = this.checkImportedData(excistingImportAnnotation[parseInt(i.toString(), 10)].freeTextAnnotation, newlyImportAnnotation[parseInt(i.toString(), 10)].freeTextAnnotation, i);\n                            if (newlyImportAnnotation[parseInt(i.toString(), 10)].freeTextAnnotation.length !== 0) {\n                                // eslint-disable-next-line max-len\n                                excistingImportAnnotation[parseInt(i.toString(), 10)].freeTextAnnotation = excistingImportAnnotation[parseInt(i.toString(), 10)].freeTextAnnotation.concat(newlyImportAnnotation[parseInt(i.toString(), 10)].freeTextAnnotation);\n                            }\n                        }\n                        else {\n                            excistingImportAnnotation[parseInt(i.toString(), 10)].freeTextAnnotation = newlyImportAnnotation[parseInt(i.toString(), 10)].freeTextAnnotation;\n                        }\n                    }\n                    if (newlyImportAnnotation[parseInt(i.toString(), 10)].signatureInkAnnotation && newlyImportAnnotation[parseInt(i.toString(), 10)].signatureInkAnnotation.length !== 0) {\n                        if (excistingImportAnnotation[parseInt(i.toString(), 10)].signatureInkAnnotation) {\n                            // eslint-disable-next-line max-len\n                            newlyImportAnnotation[parseInt(i.toString(), 10)].signatureInkAnnotation = this.checkImportedData(excistingImportAnnotation[parseInt(i.toString(), 10)].signatureInkAnnotation, newlyImportAnnotation[parseInt(i.toString(), 10)].signatureInkAnnotation, i);\n                            if (newlyImportAnnotation[parseInt(i.toString(), 10)].signatureInkAnnotation.length !== 0) {\n                                // eslint-disable-next-line max-len\n                                excistingImportAnnotation[parseInt(i.toString(), 10)].signatureInkAnnotation = excistingImportAnnotation[parseInt(i.toString(), 10)].signatureInkAnnotation.concat(newlyImportAnnotation[parseInt(i.toString(), 10)].signatureInkAnnotation);\n                            }\n                        }\n                        else {\n                            excistingImportAnnotation[parseInt(i.toString(), 10)].signatureInkAnnotation = newlyImportAnnotation[parseInt(i.toString(), 10)].signatureInkAnnotation;\n                        }\n                    }\n                }\n                else {\n                    // eslint-disable-next-line max-len\n                    var annotation = {\n                        // eslint-disable-next-line max-len\n                        textMarkupAnnotation: newlyImportAnnotation[parseInt(i.toString(), 10)].textMarkupAnnotation, shapeAnnotation: newlyImportAnnotation[parseInt(i.toString(), 10)].shapeAnnotation,\n                        // eslint-disable-next-line max-len\n                        measureShapeAnnotation: newlyImportAnnotation[parseInt(i.toString(), 10)].measureShapeAnnotation, stampAnnotations: newlyImportAnnotation[parseInt(i.toString(), 10)].stampAnnotations,\n                        // eslint-disable-next-line max-len\n                        stickyNotesAnnotation: newlyImportAnnotation[parseInt(i.toString(), 10)].stickyNotesAnnotation, freeTextAnnotation: newlyImportAnnotation[parseInt(i.toString(), 10)].freeTextAnnotation,\n                        signatureInkAnnotation: newlyImportAnnotation[parseInt(i.toString(), 10)].signatureInkAnnotation\n                    };\n                    excistingImportAnnotation[parseInt(i.toString(), 10)] = annotation;\n                }\n            }\n        }\n        return excistingImportAnnotation;\n    };\n    /**\n     * @private\n     * @returns {boolean} - Returns true or false.\n     */\n    PdfViewerBase.prototype.updateExportItem = function () {\n        // eslint-disable-next-line\n        var shapeObject = window.sessionStorage.getItem(this.documentId + '_annotations_shape');\n        // eslint-disable-next-line\n        var measureObject = window.sessionStorage.getItem(this.documentId + '_annotations_shape_measure');\n        // eslint-disable-next-line\n        var stampObject = window.sessionStorage.getItem(this.documentId + '_annotations_stamp');\n        // eslint-disable-next-line\n        var stickyObject = window.sessionStorage.getItem(this.documentId + '_annotations_sticky');\n        // eslint-disable-next-line\n        var textMarkupObject = window.sessionStorage.getItem(this.documentId + '_annotations_textMarkup');\n        // eslint-disable-next-line\n        var freeTextObject = window.sessionStorage.getItem(this.documentId + '_annotations_freetext');\n        var isSignatureEditable = false;\n        // eslint-disable-next-line\n        var inkAnnotationObjct = window.sessionStorage.getItem(this.documentId + '_annotations_ink');\n        if (this.pdfViewer.isSignatureEditable) {\n            // eslint-disable-next-line\n            var signatureObject = window.sessionStorage.getItem(this.documentId + '_annotations_sign');\n            if (signatureObject) {\n                isSignatureEditable = true;\n            }\n        }\n        // eslint-disable-next-line max-len\n        if (shapeObject || measureObject || stampObject || stickyObject || textMarkupObject || freeTextObject || this.isImportAction || this.isStorageExceed || isSignatureEditable || inkAnnotationObjct) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.isFreeTextAnnotation = function (annotations) {\n        var resut = false;\n        if (annotations && annotations.length > 0) {\n            resut = annotations.some(function (s) { return s.shapeAnnotationType === 'FreeText' && s.subject === 'Text Box'; });\n        }\n        return resut;\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.checkImportedData = function (existingCollection, newCollection, pageIndex) {\n        for (var i = 0; i < existingCollection.length; i++) {\n            for (var j = 0; j < newCollection.length; j++) {\n                if (existingCollection[parseInt(i.toString(), 10)].AnnotName === newCollection[parseInt(j.toString(), 10)].AnnotName) {\n                    var len = this.pdfViewer.annotationCollection.length;\n                    for (var x = 0; x < len; x++) {\n                        if (this.pdfViewer.annotationCollection[parseInt(x.toString(), 10)].annotationId === newCollection[parseInt(j.toString(), 10)].AnnotName) {\n                            // To update the comment panel values in a collections while importing the annotation with the same name. (EJ2-62092)\n                            this.pdfViewer.annotationCollection[parseInt(x.toString(), 10)].comments = this.pdfViewer.annotationModule.getAnnotationComments(newCollection[parseInt(j.toString(), 10)].Comments, newCollection[parseInt(j.toString(), 10)], newCollection[parseInt(j.toString(), 10)].Author);\n                            this.pdfViewer.annotationCollection[parseInt(x.toString(), 10)].review = { state: newCollection[parseInt(j.toString(), 10)].State, stateModel: newCollection[parseInt(j.toString(), 10)].StateModel, modifiedDate: newCollection[parseInt(j.toString(), 10)].ModifiedDate, author: newCollection[parseInt(j.toString(), 10)].Author };\n                            this.pdfViewer.annotationCollection[parseInt(x.toString(), 10)].note = newCollection[parseInt(j.toString(), 10)].Note;\n                            var annot = this.pdfViewer.annotationCollection[parseInt(x.toString(), 10)];\n                            if (existingCollection[parseInt(i.toString(), 10)].AnnotType === \"shape\" && this.pdfViewer.annotationModule.shapeAnnotationModule) {\n                                this.documentAnnotationCollections[parseInt(pageIndex.toString(), 10)].shapeAnnotation[parseInt(i.toString(), 10)] = newCollection[parseInt(j.toString(), 10)];\n                                this.updateAnnotationsInSessionStorage(newCollection[parseInt(j.toString(), 10)], annot, \"_annotations_shape\");\n                            }\n                            else if (existingCollection[parseInt(i.toString(), 10)].AnnotType === \"textMarkup\" && this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n                                this.documentAnnotationCollections[parseInt(pageIndex.toString(), 10)].textMarkupAnnotation[parseInt(i.toString(), 10)] = newCollection[parseInt(j.toString(), 10)];\n                                this.updateAnnotationsInSessionStorage(newCollection[parseInt(j.toString(), 10)], annot, \"_annotations_textMarkup\");\n                            }\n                            else if (existingCollection[parseInt(i.toString(), 10)].AnnotType === \"shape_measure\" && this.pdfViewer.annotationModule.measureAnnotationModule) {\n                                this.documentAnnotationCollections[parseInt(pageIndex.toString(), 10)].measureShapeAnnotation[parseInt(i.toString(), 10)] = newCollection[parseInt(j.toString(), 10)];\n                                this.updateAnnotationsInSessionStorage(newCollection[parseInt(j.toString(), 10)], annot, \"_annotations_shape_measure\");\n                            }\n                            else if (existingCollection[parseInt(i.toString(), 10)].AnnotType === \"stamp\" && this.pdfViewer.annotationModule.stampAnnotationModule) {\n                                this.documentAnnotationCollections[parseInt(pageIndex.toString(), 10)].stampAnnotations[parseInt(i.toString(), 10)] = newCollection[parseInt(j.toString(), 10)];\n                                this.updateAnnotationsInSessionStorage(newCollection[parseInt(j.toString(), 10)], annot, \"_annotations_stamp\");\n                            }\n                            else if (existingCollection[parseInt(i.toString(), 10)].AnnotType === \"freeText\" && this.pdfViewer.annotationModule.freeTextAnnotationModule) {\n                                this.documentAnnotationCollections[parseInt(pageIndex.toString(), 10)].freeTextAnnotation[parseInt(i.toString(), 10)] = newCollection[parseInt(j.toString(), 10)];\n                                this.updateAnnotationsInSessionStorage(newCollection[parseInt(j.toString(), 10)], annot, \"_annotations_freetext\");\n                            }\n                            else if (existingCollection[parseInt(i.toString(), 10)].AnnotType === \"ink\" && this.pdfViewer.annotationModule.inkAnnotationModule) {\n                                this.documentAnnotationCollections[parseInt(pageIndex.toString(), 10)].signatureInkAnnotation[parseInt(i.toString(), 10)] = newCollection[parseInt(j.toString(), 10)];\n                                this.updateAnnotationsInSessionStorage(newCollection[parseInt(j.toString(), 10)], annot, \"_annotations_ink\");\n                            }\n                            else if (existingCollection[parseInt(i.toString(), 10)].AnnotType === \"sticky\") {\n                                this.documentAnnotationCollections[parseInt(pageIndex.toString(), 10)].stickyNotesAnnotation[parseInt(i.toString(), 10)] = newCollection[parseInt(j.toString(), 10)];\n                                this.updateAnnotationsInSessionStorage(newCollection[parseInt(j.toString(), 10)], annot, \"_annotations_sticky\");\n                            }\n                            break;\n                        }\n                    }\n                    this.pdfViewer.annotationModule.stickyNotesAnnotationModule.createCommentControlPanel(newCollection[parseInt(j.toString(), 10)], (pageIndex + 1), null, null, true);\n                    newCollection.splice(j, 1);\n                    j = j - 1;\n                }\n            }\n        }\n        if (this.annotationComments) {\n            // eslint-disable-next-line\n            var annotationCollections = this.annotationComments[pageIndex];\n            annotationCollections = this.selectAnnotationCollections(annotationCollections);\n            if (annotationCollections) {\n                for (var i = 0; i < annotationCollections.length; i++) {\n                    for (var j = 0; j < newCollection.length; j++) {\n                        if (annotationCollections[parseInt(i.toString(), 10)].AnnotName === newCollection[parseInt(j.toString(), 10)].AnnotName) {\n                            newCollection.splice(j, 1);\n                            j = j - 1;\n                        }\n                    }\n                }\n            }\n        }\n        return newCollection;\n    };\n    // To update the comment panel values in a session storage while importing the annotation with the same name. (EJ2-62092)\n    PdfViewerBase.prototype.updateAnnotationsInSessionStorage = function (newCollection, annot, type) {\n        var annotation = window.sessionStorage.getItem(this.documentId + type);\n        var annotObject = JSON.parse(annotation);\n        if (annotObject) {\n            for (var b = 0; b < annotObject.length; b++) {\n                if (annotObject[parseInt(b.toString(), 10)].annotations) {\n                    for (var z = 0; z < annotObject[parseInt(b.toString(), 10)].annotations.length; z++) {\n                        if (annotObject[parseInt(b.toString(), 10)].annotations[parseInt(z.toString(), 10)].annotName === newCollection.AnnotName) {\n                            annotObject[parseInt(b.toString(), 10)].annotations[parseInt(z.toString(), 10)].comments = annot.comments;\n                            annotObject[parseInt(b.toString(), 10)].annotations[parseInt(z.toString(), 10)].review = annot.review;\n                            annotObject[parseInt(b.toString(), 10)].annotations[parseInt(z.toString(), 10)].note = annot.note;\n                            break;\n                        }\n                    }\n                }\n            }\n            window.sessionStorage.setItem(this.documentId + type, JSON.stringify(annotObject));\n        }\n    };\n    /**\n     * @param points\n     * @private\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.checkAnnotationWidth = function (points) {\n        var width = 0;\n        var height = 0;\n        var minWidth;\n        var maxWidth;\n        var minHeight;\n        var maxHeight;\n        for (var i = 0; i < points.length; i++) {\n            if (!minWidth) {\n                minWidth = points[parseInt(i.toString(), 10)].x;\n                maxWidth = points[parseInt(i.toString(), 10)].x;\n                minHeight = points[parseInt(i.toString(), 10)].y;\n                maxHeight = points[parseInt(i.toString(), 10)].y;\n            }\n            else {\n                if (minWidth > points[parseInt(i.toString(), 10)].x) {\n                    minWidth = points[parseInt(i.toString(), 10)].x;\n                }\n                else if (maxWidth < points[parseInt(i.toString(), 10)].x) {\n                    maxWidth = points[parseInt(i.toString(), 10)].x;\n                }\n                if (minHeight > points[parseInt(i.toString(), 10)].y) {\n                    minHeight = points[parseInt(i.toString(), 10)].y;\n                }\n                else if (maxHeight < points[parseInt(i.toString(), 10)].y) {\n                    maxHeight = points[parseInt(i.toString(), 10)].y;\n                }\n            }\n        }\n        width = maxWidth - minWidth;\n        height = maxHeight - minHeight;\n        return { width: width, height: height };\n    };\n    PdfViewerBase.prototype.deleteAnnotations = function () {\n        if (this.pdfViewer.annotationModule) {\n            this.pdfViewer.annotations = [];\n            this.pdfViewer.zIndexTable = [];\n            this.pdfViewer.annotationCollection = [];\n            this.pdfViewer.signatureCollection = [];\n            // eslint-disable-next-line\n            var annotationCollection = this.createAnnotationsCollection();\n            this.annotationComments = annotationCollection;\n            this.documentAnnotationCollections = annotationCollection;\n            this.annotationRenderredList = [];\n            window.sessionStorage.removeItem(this.documentId + '_annotations_shape');\n            window.sessionStorage.removeItem(this.documentId + '_annotations_shape_measure');\n            window.sessionStorage.removeItem(this.documentId + '_annotations_stamp');\n            window.sessionStorage.removeItem(this.documentId + '_annotations_sticky');\n            window.sessionStorage.removeItem(this.documentId + '_annotations_textMarkup');\n            window.sessionStorage.removeItem(this.documentId + '_annotations_freetext');\n            window.sessionStorage.removeItem(this.documentId + '_annotations_sign');\n            window.sessionStorage.removeItem(this.documentId + '_annotations_ink');\n            for (var i = 0; i < this.pageCount; i++) {\n                this.pdfViewer.annotationModule.renderAnnotations(i, null, null, null);\n                this.pdfViewer.renderDrawing(undefined, i);\n                this.pdfViewer.clearSelection(i);\n                var accordionContent = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + (i + 1));\n                if (accordionContent) {\n                    accordionContent.remove();\n                }\n                // eslint-disable-next-line max-len\n                var accordionContentContainer = document.getElementById(this.pdfViewer.element.id + '_accordionContentContainer');\n                if (accordionContentContainer) {\n                    if (accordionContentContainer.childElementCount === 0) {\n                        accordionContentContainer.style.display = 'none';\n                        if (document.getElementById(this.pdfViewer.element.id + '_commentsPanelText')) {\n                            // eslint-disable-next-line max-len\n                            this.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export Annotations')], false);\n                            document.getElementById(this.pdfViewer.element.id + '_commentsPanelText').style.display = 'block';\n                        }\n                    }\n                }\n            }\n            this.isImportedAnnotation = false;\n            this.isImportAction = false;\n            this.importedAnnotation = [];\n            this.annotationPageList = [];\n            this.pdfViewer.annotationModule.freeTextAnnotationModule.freeTextPageNumbers = [];\n            this.pdfViewer.annotationModule.stampAnnotationModule.stampPageNumber = [];\n            this.pdfViewer.annotation.inkAnnotationModule.inkAnnotationindex = [];\n            this.isAnnotationCollectionRemoved = true;\n        }\n    };\n    /**\n     * @param pageNumber\n     * @param isObject\n     * @param pageNumber\n     * @param isObject\n     * @private\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.createAnnotationsCollection = function (pageNumber, isObject) {\n        // eslint-disable-next-line\n        var annotationCollectionList = [];\n        if (!isObject) {\n            for (var i = 0; i < this.pageCount; i++) {\n                var annotation = {\n                    // eslint-disable-next-line max-len\n                    textMarkupAnnotation: [], shapeAnnotation: [], measureShapeAnnotation: [], stampAnnotations: [], stickyNotesAnnotation: [], freeTextAnnotation: [], signatureAnnotation: [], signatureInkAnnotation: []\n                };\n                annotationCollectionList.push(annotation);\n            }\n        }\n        else {\n            annotationCollectionList = {};\n            var annotation = {\n                // eslint-disable-next-line max-len\n                textMarkupAnnotation: [], shapeAnnotation: [], measureShapeAnnotation: [], stampAnnotations: [], stickyNotesAnnotation: [], freeTextAnnotation: [], signatureAnnotation: [], signatureInkAnnotation: []\n            };\n            annotationCollectionList[parseInt(pageNumber.toString(), 10)] = annotation;\n        }\n        return annotationCollectionList;\n    };\n    /**\n     * @param importAnnotation\n     * @private\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.addAnnotation = function (importAnnotation) {\n        // eslint-disable-next-line\n        var pdfAnnotation = {};\n        // eslint-disable-next-line\n        var documentCollections;\n        if (importAnnotation) {\n            var isAnnotationObject = false;\n            var annotationCount = 1;\n            if (importAnnotation.shapeAnnotationType || importAnnotation.author) {\n                isAnnotationObject = true;\n                documentCollections = this.createAnnotationsCollection(importAnnotation.pageNumber, true);\n            }\n            else {\n                if (importAnnotation.length) {\n                    annotationCount = importAnnotation.length;\n                    documentCollections = this.createAnnotationsCollection();\n                }\n                else {\n                    isAnnotationObject = true;\n                    documentCollections = this.createAnnotationsCollection(importAnnotation.pageNumber, true);\n                }\n            }\n            for (var a = 0; a < annotationCount; a++) {\n                // eslint-disable-next-line\n                var annotation = void 0;\n                if (isAnnotationObject) {\n                    annotation = importAnnotation;\n                }\n                else {\n                    annotation = importAnnotation[parseInt(a.toString(), 10)];\n                }\n                // eslint-disable-next-line\n                var newAnnotation = {};\n                newAnnotation.ShapeAnnotationType = annotation.shapeAnnotationType;\n                newAnnotation.AnnotationAddMode = annotation.annotationAddMode;\n                newAnnotation.Author = annotation.author;\n                newAnnotation.AnnotationSelectorSettings = annotation.annotationSelectorSettings;\n                newAnnotation.AnnotationSettings = annotation.annotationSettings;\n                newAnnotation.PageNumber = annotation.pageNumber;\n                newAnnotation.ModifiedDate = annotation.modifiedDate;\n                newAnnotation.Subject = annotation.subject;\n                newAnnotation.Note = annotation.note;\n                newAnnotation.AnnotName = annotation.annotationId;\n                newAnnotation.IsCommentLock = annotation.isCommentLock;\n                newAnnotation.Comments = annotation.comments;\n                if (annotation.comments && annotation.comments.length > 0) {\n                    // eslint-disable-next-line\n                    var comments = [];\n                    for (var i = 0; i < annotation.comments.length; i++) {\n                        comments.push(this.updateComments(annotation, annotation.comments[parseInt(i.toString(), 10)]));\n                    }\n                    newAnnotation.Comments = comments;\n                }\n                if (annotation.review) {\n                    newAnnotation.State = annotation.review.state;\n                    newAnnotation.StateModel = annotation.review.stateModel;\n                }\n                newAnnotation.CustomData = annotation.customData;\n                newAnnotation.Opacity = annotation.opacity;\n                if (annotation.shapeAnnotationType === 'textMarkup') {\n                    newAnnotation.AnnotType = 'textMarkup';\n                    newAnnotation.Color = annotation.color;\n                    newAnnotation.IsMultiSelect = annotation.isMultiSelect;\n                    newAnnotation.TextMarkupAnnotationType = annotation.textMarkupAnnotationType;\n                    newAnnotation.TextMarkupContent = annotation.textMarkupContent;\n                    newAnnotation.TextMarkupStartIndex = annotation.textMarkupStartIndex;\n                    newAnnotation.TextMarkupEndIndex = annotation.textMarkupEndIndex;\n                    if (annotation.rect) {\n                        newAnnotation.Rect = this.convertBounds(annotation.rect, true);\n                    }\n                    if (annotation.bounds && annotation.bounds.length >= 1) {\n                        // eslint-disable-next-line\n                        var bounds = new Array();\n                        for (var i = 0; i < annotation.bounds.length; i++) {\n                            bounds.push(this.convertBounds(annotation.bounds[parseInt(i.toString(), 10)]));\n                        }\n                        newAnnotation.Bounds = bounds;\n                    }\n                    documentCollections[annotation.pageNumber].textMarkupAnnotation.push(newAnnotation);\n                }\n                else if (annotation.shapeAnnotationType === 'sticky') {\n                    newAnnotation.AnnotType = 'sticky';\n                    newAnnotation.Icon = 'Comment';\n                    newAnnotation.Bounds = this.convertBounds(annotation.bounds);\n                    newAnnotation.StrokeColor = annotation.strokeColor;\n                    newAnnotation.Color = annotation.color;\n                    documentCollections[annotation.pageNumber].stickyNotesAnnotation.push(newAnnotation);\n                }\n                else if (annotation.shapeAnnotationType === 'FreeText') {\n                    newAnnotation.AnnotType = 'freeText';\n                    newAnnotation.Name = annotation.annotationId;\n                    newAnnotation.MarkupText = annotation.dynamicText;\n                    newAnnotation.Text = annotation.dynamicText;\n                    newAnnotation.Note = annotation.dynamicText;\n                    newAnnotation.TextAlign = annotation.textAlign;\n                    newAnnotation.Thickness = annotation.thicknes;\n                    newAnnotation.StrokeColor = annotation.strokeColor;\n                    newAnnotation.FillColor = annotation.fillColor;\n                    newAnnotation.FontColor = annotation.fontColor;\n                    newAnnotation.FontSize = annotation.fontSize;\n                    newAnnotation.FontFamily = annotation.fontFamily;\n                    newAnnotation.Rotate = annotation.rotateAngle;\n                    newAnnotation.Bounds = this.convertBounds(annotation.bounds);\n                    // eslint-disable-next-line max-len\n                    newAnnotation.Font = { 'Name': annotation.fontFamily, 'Size': annotation.fontSize, 'Bold': annotation.font.isBold, 'Italic': annotation.font.isItalic, 'Strikeout': annotation.font.isStrikeout, 'Underline': annotation.font.isUnderline };\n                    documentCollections[annotation.pageNumber].freeTextAnnotation.push(newAnnotation);\n                }\n                else if (annotation.shapeAnnotationType === 'stamp') {\n                    newAnnotation.AnnotType = 'stamp';\n                    newAnnotation.Icon = annotation.icon;\n                    newAnnotation.isDynamic = false;\n                    newAnnotation.Rect = this.convertBounds(annotation.bounds, false, true);\n                    newAnnotation.RotateAngle = annotation.rotateAngle;\n                    newAnnotation.FillColor = annotation.fillColor;\n                    newAnnotation.StrokeColor = annotation.strokeColor;\n                    newAnnotation.StampAnnotationType = annotation.stampAnnotationType;\n                    newAnnotation.CreationDate = annotation.creationDate;\n                    if (annotation.stampAnnotationType === 'image') {\n                        // eslint-disable-next-line\n                        var apperarance = [];\n                        // eslint-disable-next-line\n                        var imageData = { 'imagedata': annotation.stampAnnotationPath };\n                        apperarance.push(imageData);\n                        newAnnotation.Apperarance = apperarance;\n                    }\n                    if (annotation.isDynamicStamp) {\n                        newAnnotation.IsDynamic = true;\n                        newAnnotation.StrokeColor = annotation.stampFillcolor;\n                        // eslint-disable-next-line\n                        var apperarance = [];\n                        // eslint-disable-next-line\n                        var imageData = { 'type': 'string', 'text': annotation.dynamicText, 'currentFontname': '95b303ab-d397-438a-83af-e2ff8a9900f1', 'baseFontName': 'Helvetica-BoldOblique', 'fontSize': 10, 'isImport': true };\n                        apperarance.push(imageData);\n                        newAnnotation.Apperarance = apperarance;\n                    }\n                    documentCollections[annotation.pageNumber].stampAnnotations.push(newAnnotation);\n                }\n                else if (annotation.shapeAnnotationType === 'Ink' || annotation.shapeAnnotationType === 'Signature') {\n                    newAnnotation.StrokeColor = annotation.strokeColor;\n                    newAnnotation.FillColor = annotation.fillColor;\n                    newAnnotation.Thickness = annotation.thickness;\n                    newAnnotation.Bounds = this.convertBounds(annotation.bounds);\n                    newAnnotation.PathData = annotation.data;\n                    newAnnotation.pageIndex = annotation.pageNumber;\n                    if (annotation.shapeAnnotationType === 'Ink') {\n                        newAnnotation.AnnotType = 'Ink';\n                        newAnnotation.IsPathData = true;\n                        documentCollections[annotation.pageNumber].signatureInkAnnotation.push(newAnnotation);\n                    }\n                    if (annotation.shapeAnnotationType === 'Signature') {\n                        newAnnotation.AnnotType = 'Signature';\n                        newAnnotation.SignatureName = annotation.annotationId;\n                        newAnnotation.IsSignature = true;\n                        documentCollections[annotation.pageNumber].signatureAnnotation.push(newAnnotation);\n                    }\n                }\n                else {\n                    // eslint-disable-next-line max-len\n                    if (annotation.shapeAnnotationType === 'Line' || annotation.shapeAnnotationType === 'LineWidthArrowHead' || annotation.shapeAnnotationType === 'Polyline' || annotation.shapeAnnotationType === 'Polygon' || annotation.shapeAnnotationType === 'Polyline' || annotation.shapeAnnotationType === 'Circle' || annotation.shapeAnnotationType === 'Oval' || annotation.shapeAnnotationType === 'Rectangle' || annotation.shapeAnnotationType === 'Square' || annotation.shapeAnnotationType === 'Ellipse') {\n                        newAnnotation.AnnotType = 'shape';\n                        newAnnotation.StrokeColor = annotation.strokeColor;\n                        newAnnotation.FillColor = annotation.fillColor;\n                        newAnnotation.Thickness = annotation.thickness;\n                        newAnnotation.BorderStyle = annotation.borderStyle;\n                        newAnnotation.BorderDashArray = annotation.borderDashArray;\n                        newAnnotation.RotateAngle = annotation.rotateAngle;\n                        newAnnotation.IsCloudShape = annotation.isCloudShape;\n                        newAnnotation.CloudIntensity = annotation.cloudIntensity;\n                        newAnnotation.RectangleDifference = annotation.rectangleDifference;\n                        newAnnotation.LineHeadStart = annotation.lineHeadStart;\n                        newAnnotation.LineHeadEnd = annotation.lineHeadEnd;\n                        newAnnotation.IsLocked = annotation.isLocked;\n                        newAnnotation.EnableShapeLabel = annotation.enableShapeLabel;\n                        newAnnotation.LabelContent = annotation.labelContent;\n                        newAnnotation.LabelFillColor = annotation.labelFillColor;\n                        newAnnotation.LabelBorderColor = annotation.labelBorderColor;\n                        newAnnotation.FontColor = annotation.fontColor;\n                        newAnnotation.FontSize = annotation.fontSize;\n                        newAnnotation.LabelBounds = this.convertBounds(annotation.labelBounds);\n                        newAnnotation.LabelSettings = annotation.labelSettings;\n                        newAnnotation.Bounds = this.convertBounds(annotation.bounds);\n                        newAnnotation.LeaderLength = annotation.leaderLength;\n                        newAnnotation.LeaderLineExtenstion = annotation.leaderLineExtension;\n                        if (annotation.vertexPoints && annotation.vertexPoints.length >= 1) {\n                            // eslint-disable-next-line\n                            var points = new Array();\n                            for (var i = 0; i < annotation.vertexPoints.length; i++) {\n                                points.push(this.convertVertexPoints(annotation.vertexPoints[parseInt(i.toString(), 10)]));\n                            }\n                            newAnnotation.VertexPoints = points;\n                        }\n                        newAnnotation.EnableShapeLabel = annotation.enableShapeLabel;\n                        // eslint-disable-next-line max-len\n                        if (annotation.subject === 'Distance calculation' || annotation.subject === 'Perimeter calculation' || annotation.subject === 'Area calculation' || annotation.subject === 'Radius calculation' || annotation.subject === 'Volume calculation') {\n                            newAnnotation.AnnotType = 'shape_measure';\n                            // eslint-disable-next-line\n                            var calibrate = annotation.calibrate;\n                            if (calibrate) {\n                                // eslint-disable-next-line\n                                newAnnotation.Calibrate = {\n                                    'Ratio': calibrate.ratio, 'X': [{ 'Unit': calibrate.x[0].unit, 'ConversionFactor': calibrate.x[0].conversionFactor, 'FractionalType': calibrate.x[0].fractionalType, 'Denominator': calibrate.x[0].denominator, 'FormatDenominator': calibrate.x[0].formatDenominator }],\n                                    // eslint-disable-next-line\n                                    'Distance': [{ 'Unit': calibrate.distance[0].unit, 'ConversionFactor': calibrate.distance[0].conversionFactor, 'FractionalType': calibrate.distance[0].fractionalType, 'Denominator': calibrate.distance[0].denominator, 'FormatDenominator': calibrate.distance[0].formatDenominator }],\n                                    // eslint-disable-next-line\n                                    'Area': [{ 'Unit': calibrate.area[0].unit, 'ConversionFactor': calibrate.area[0].conversionFactor, 'FractionalType': calibrate.area[0].fractionalType, 'Denominator': calibrate.area[0].denominator, 'FormatDenominator': calibrate.area[0].formatDenominator }],\n                                    // eslint-disable-next-line\n                                    'Angle': null, 'Volume': null, 'TargetUnitConversion': calibrate.targetUnitConversion, 'Depth': calibrate.depth\n                                };\n                            }\n                            newAnnotation.Indent = annotation.indent;\n                            newAnnotation.Caption = annotation.caption;\n                            newAnnotation.CaptionPosition = annotation.captionPosition;\n                            newAnnotation.LeaderLineExtension = annotation.leaderLineExtension;\n                            newAnnotation.LeaderLength = annotation.leaderLength;\n                            newAnnotation.LeaderLineOffset = annotation.leaderLineOffset;\n                            documentCollections[annotation.pageNumber].measureShapeAnnotation.push(newAnnotation);\n                        }\n                        else {\n                            documentCollections[annotation.pageNumber].shapeAnnotation.push(newAnnotation);\n                        }\n                    }\n                }\n            }\n            pdfAnnotation.pdfAnnotation = documentCollections;\n            this.pdfViewer.importAnnotation(pdfAnnotation);\n        }\n    };\n    /**\n     * @param bounds\n     * @private\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.convertBounds = function (bounds, isRect, isStamp) {\n        if (bounds) {\n            if (isRect) {\n                var left = bounds.left ? bounds.left : bounds.Left ? bounds.Left : 0;\n                var right = bounds.right ? bounds.right : bounds.Right ? bounds.Right : 0;\n                var bottom = bounds.bottom ? bounds.bottom : bounds.Bottom ? bounds.Bottom : 0;\n                var top_5 = bounds.top ? bounds.top : bounds.Top ? bounds.Top : 0;\n                return { left: left, right: right, bottom: bottom, top: top_5 };\n            }\n            else {\n                var x = bounds.x ? bounds.x : bounds.left ? bounds.left : bounds.Left ? bounds.Left : 0;\n                var y = bounds.y ? bounds.y : bounds.top ? bounds.top : bounds.Top ? bounds.Top : 0;\n                var width = bounds.width ? bounds.width : bounds.Width ? bounds.Width : 0;\n                var height = bounds.height ? bounds.height : bounds.Height ? bounds.Height : 0;\n                if (isStamp) {\n                    return { X: this.ConvertPixelToPoint(x), Y: this.ConvertPixelToPoint(y), Left: this.ConvertPixelToPoint(x), Top: this.ConvertPixelToPoint(y), Height: this.ConvertPixelToPoint(height), Width: this.ConvertPixelToPoint(width) };\n                }\n                else {\n                    return { X: x, Y: y, Left: x, Top: y, Height: height, Width: width };\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.ConvertPixelToPoint = function (number) {\n        return (number * (72 / 96));\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.convertVertexPoints = function (points) {\n        if (points) {\n            var x = points.x ? points.x : points.X ? points.X : 0;\n            var y = points.y ? points.y : points.Y ? points.Y : 0;\n            return { X: x, Y: y, Left: x, Top: y };\n        }\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.updateComments = function (annotation, comments) {\n        if (annotation && comments) {\n            // eslint-disable-next-line\n            var newAnnotation = {};\n            newAnnotation.ShapeAnnotationType = annotation.shapeAnnotationType;\n            newAnnotation.Author = comments.author;\n            newAnnotation.AnnotationSelectorSettings = annotation.annotationSelectorSettings;\n            newAnnotation.AnnotationSettings = annotation.annotationSettings;\n            newAnnotation.PageNumber = annotation.pageNumber;\n            newAnnotation.ModifiedDate = comments.modifiedDate;\n            newAnnotation.Subject = annotation.subject;\n            newAnnotation.Note = comments.note;\n            newAnnotation.AnnotName = comments.annotName;\n            newAnnotation.Comments = comments.comments;\n            newAnnotation.State = comments.review.state;\n            newAnnotation.StateModel = comments.review.stateModel;\n            newAnnotation.CustomData = annotation.customData;\n            newAnnotation.IsLock = comments.isLock;\n            return newAnnotation;\n        }\n    };\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.removeFocus = function () {\n        if (isBlazor()) {\n            // eslint-disable-next-line\n            var currentPageContainer = this.pdfViewer.element.querySelector('#' + this.pdfViewer.element.id + '_totalPage');\n            // eslint-disable-next-line max-len\n            if (currentPageContainer && currentPageContainer.firstElementChild && currentPageContainer.firstElementChild.firstElementChild) {\n                currentPageContainer.firstElementChild.firstElementChild.blur();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.updateDocumentEditedProperty = function (isEdited) {\n        this.pdfViewer.allowServerDataBinding = true;\n        this.pdfViewer.isDocumentEdited = isEdited;\n        this.pdfViewer.allowServerDataBinding = false;\n    };\n    /**\n    * @private\n    */\n    PdfViewerBase.prototype.getWindowDevicePixelRatio = function () {\n        var devicePixelRatio = window.devicePixelRatio;\n        if (!Browser.isDevice) {\n            return devicePixelRatio;\n        }\n        else {\n            return devicePixelRatio = 2;\n        }\n    };\n    /**\n    * @private\n    */\n    PdfViewerBase.prototype.getZoomRatio = function (zoom) {\n        var zoomFactor = this.getZoomFactor();\n        var zoomValue = zoom ? zoom : 1;\n        var ratio;\n        var devicePixelRatio = this.getWindowDevicePixelRatio();\n        if (!Browser.isDevice || (Browser.isDevice && zoomFactor <= 0.7)) {\n            ratio = zoomValue * devicePixelRatio;\n        }\n        else {\n            ratio = zoomValue;\n        }\n        return ratio;\n    };\n    /**\n    * @private\n    */\n    PdfViewerBase.prototype.importJsonForRotatedDocuments = function (Rotate, pageNumber, bounds, originalRotation) {\n        // eslint-disable-next-line\n        var rotateAngle = Math.abs(Rotate);\n        var pageDetails = this.pageSize[parseInt(pageNumber.toString(), 10)];\n        //originalRotation = !isNullOrUndefined(originalRotation) ? originalRotation : pageDetails.rotation;\n        if (originalRotation !== pageDetails.rotation) {\n            rotateAngle = this.getRotationAngle(originalRotation, pageNumber);\n            this.isPageRotated = true;\n        }\n        else {\n            rotateAngle = 0;\n            this.isPageRotated = false;\n        }\n        if (rotateAngle === 1) {\n            return { X: pageDetails.width - bounds.Y - bounds.Height, Y: bounds.X, Height: bounds.Width, Width: bounds.Height };\n        }\n        else if (rotateAngle === 2) {\n            return { X: pageDetails.width - bounds.X - bounds.Width, Y: pageDetails.height - bounds.Y - bounds.Height, Height: bounds.Height, Width: bounds.Width };\n        }\n        else if (rotateAngle === 3) {\n            return { X: bounds.Y, Y: pageDetails.height - bounds.X - bounds.Width, Height: bounds.Width, Width: bounds.Height };\n        }\n        else {\n            return bounds;\n        }\n    };\n    PdfViewerBase.prototype.getRotationAngle = function (originalRotation, pageNumber) {\n        var pageDetails = this.pageSize[parseInt(pageNumber.toString(), 10)];\n        originalRotation = Math.abs(originalRotation);\n        var rotateAngle;\n        if (originalRotation === 0) {\n            return rotateAngle = pageDetails.rotation;\n        }\n        else if (originalRotation === 1 || originalRotation === 90) {\n            if (pageDetails.rotation == 0) {\n                return rotateAngle = 3;\n            }\n            else if (pageDetails.rotation === 2) {\n                return rotateAngle = 1;\n            }\n            else if (pageDetails.rotation === 3) {\n                return rotateAngle = 2;\n            }\n        }\n        else if (originalRotation === 2 || originalRotation === 180) {\n            if (pageDetails.rotation == 0) {\n                return rotateAngle = 2;\n            }\n            else if (pageDetails.rotation === 1) {\n                return rotateAngle = 3;\n            }\n            else if (pageDetails.rotation === 3) {\n                return rotateAngle = 1;\n            }\n        }\n        else if (originalRotation === 3 || originalRotation === 270) {\n            if (pageDetails.rotation == 0) {\n                return rotateAngle = 1;\n            }\n            else if (pageDetails.rotation === 2) {\n                return rotateAngle = 3;\n            }\n            else if (pageDetails.rotation === 1) {\n                return rotateAngle = 2;\n            }\n        }\n    };\n    /**\n   * @private\n   */\n    PdfViewerBase.prototype.calculateVertexPoints = function (Rotate, pageNumber, vertexPoints, originalRotation) {\n        // eslint-disable-next-line\n        var rotateAngle = Math.abs(Rotate);\n        var vPoints = [];\n        var pageDetails = this.pageSize[parseInt(pageNumber.toString(), 10)];\n        var x;\n        var y;\n        var point;\n        //originalRotation = !isNullOrUndefined(originalRotation) ? originalRotation : pageDetails.rotation;\n        if (originalRotation !== pageDetails.rotation) {\n            rotateAngle = this.getRotationAngle(originalRotation, pageNumber);\n        }\n        else {\n            rotateAngle = 0;\n        }\n        for (var j = 0; j < vertexPoints.length; j++) {\n            if (rotateAngle === 1) {\n                x = vertexPoints[parseInt(j.toString(), 10)].Y ? pageDetails.width - vertexPoints[parseInt(j.toString(), 10)].Y : pageDetails.width - vertexPoints[parseInt(j.toString(), 10)].y;\n                y = vertexPoints[parseInt(j.toString(), 10)].X ? vertexPoints[parseInt(j.toString(), 10)].X : vertexPoints[parseInt(j.toString(), 10)].x;\n                point = { x: x, y: y };\n                vPoints.push(point);\n            }\n            else if (rotateAngle === 2) {\n                x = vertexPoints[parseInt(j.toString(), 10)].X ? pageDetails.width - vertexPoints[parseInt(j.toString(), 10)].X : pageDetails.width - vertexPoints[parseInt(j.toString(), 10)].x;\n                y = vertexPoints[parseInt(j.toString(), 10)].Y ? pageDetails.height - vertexPoints[parseInt(j.toString(), 10)].Y : pageDetails.height - vertexPoints[parseInt(j.toString(), 10)].y;\n                var point_1 = { x: x, y: y };\n                vPoints.push(point_1);\n            }\n            else if (rotateAngle == 3) {\n                x = vertexPoints[parseInt(j.toString(), 10)].Y ? vertexPoints[parseInt(j.toString(), 10)].Y : vertexPoints[parseInt(j.toString(), 10)].y;\n                y = vertexPoints[parseInt(j.toString(), 10)].X ? pageDetails.height - vertexPoints[parseInt(j.toString(), 10)].X : pageDetails.height - vertexPoints[parseInt(j.toString(), 10)].x;\n                point = { x: x, y: y };\n                vPoints.push(point);\n            }\n            else {\n                x = vertexPoints[parseInt(j.toString(), 10)].X ? vertexPoints[parseInt(j.toString(), 10)].X : vertexPoints[parseInt(j.toString(), 10)].x;\n                y = vertexPoints[parseInt(j.toString(), 10)].Y ? vertexPoints[parseInt(j.toString(), 10)].Y : vertexPoints[parseInt(j.toString(), 10)].y;\n                var point_2 = { x: x, y: y };\n                vPoints.push(point_2);\n            }\n        }\n        return vPoints;\n    };\n    /**\n    * @private\n    */\n    PdfViewerBase.prototype.isSignaturePathData = function (data) {\n        // eslint-disable-next-line\n        var pathRegex = /^([Mm]\\s*\\d+(\\.\\d+)?\\s*,\\s*\\d+(\\.\\d+)?(\\s+[Ll]\\s*\\d+(\\.\\d+)?\\s*,\\s*\\d+(\\.\\d+)?)*\\s*)+$/;\n        return pathRegex.test(data);\n    };\n    /**\n    * @private\n    */\n    PdfViewerBase.prototype.isSignatureImageData = function (data) {\n        // eslint-disable-next-line\n        var base64ImageRegex = /^data:image\\/([a-z]+);base64,/;\n        return base64ImageRegex.test(data);\n    };\n    /**\n    * @private\n    */\n    PdfViewerBase.prototype.getSanitizedString = function (annotationData) {\n        var sanitizedString = annotationData.replace(/[\\x00-\\x1F\\x7F]/g, function (c) { return \"\\\\u\" + c.charCodeAt(0).toString(16).padStart(4, '0'); });\n        return sanitizedString;\n    };\n    /**\n     * @param pageIndex\n     * @private\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.getLinkInformation = function (pageIndex, isTextSearch) {\n        var zoomFactor = this.retrieveCurrentZoomFactor();\n        if (this.pdfViewer.restrictZoomRequest && !this.pdfViewer.tileRenderingSettings.enableTileRendering) {\n            zoomFactor = 1;\n        }\n        var id = this.documentId + '_' + pageIndex;\n        var storedImage = this.pageImageDetails ? this.pageImageDetails[id + '_' + zoomFactor + '_imageUrl'] ? this.pageImageDetails[id + '_' + zoomFactor + '_imageUrl'] : this.getPinchZoomPage(pageIndex) : this.getPinchZoomPage(pageIndex);\n        var storedHyperlink = this.hyperlinkAndLinkAnnotation ? this.hyperlinkAndLinkAnnotation[id + '_hyperlinkAndLinkAnnotation'] ? this.hyperlinkAndLinkAnnotation[id + '_hyperlinkAndLinkAnnotation'] : this.getPinchZoomPage(pageIndex) : this.getPinchZoomPage(pageIndex);\n        var storedTextDetails = this.pageTextDetails ? this.pageTextDetails[id + '_textDetails'] ? this.pageTextDetails[id + '_textDetails'] : this.getPinchZoomPage(pageIndex) : this.getPinchZoomPage(pageIndex);\n        if (!storedImage) {\n            // eslint-disable-next-line\n            var storedTileData = this.getStoredTileImageDetails(pageIndex, 0, 0, zoomFactor);\n            if (storedTileData) {\n                storedImage = storedTileData;\n            }\n        }\n        // eslint-disable-next-line\n        var imageUrl = null;\n        var linkAnnotation = null;\n        var textDetails = null;\n        var mergedObj = null;\n        if (storedImage && storedHyperlink) {\n            // eslint-disable-next-line\n            imageUrl = JSON.parse(storedImage);\n            linkAnnotation = JSON.parse(storedHyperlink);\n            textDetails = JSON.parse(storedTextDetails);\n            mergedObj = Object.assign({}, imageUrl, linkAnnotation, textDetails);\n            this.isPinchZoomStorage = false;\n        }\n        return mergedObj;\n    };\n    return PdfViewerBase;\n}());\nexport { PdfViewerBase };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}