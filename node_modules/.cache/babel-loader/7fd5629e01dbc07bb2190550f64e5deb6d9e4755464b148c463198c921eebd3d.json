{"ast":null,"code":"import { EventHandler, detach, formatUnit, Browser, closest } from '@syncfusion/ej2-base';\nimport { Column } from '../models/column';\nimport { ColumnWidthService } from '../services/width-controller';\nimport * as events from '../base/constant';\nimport { getScrollBarWidth, parentsUntil, Global, frozenDirection, isChildColumn, applyStickyLeftRightPosition, groupCaptionRowLeftRightPos } from '../base/util';\nimport { isNullOrUndefined, addClass, removeClass } from '@syncfusion/ej2-base';\nimport * as literals from '../base/string-literals';\nexport var resizeClassList = {\n  root: 'e-rhandler',\n  suppress: 'e-rsuppress',\n  icon: 'e-ricon',\n  helper: 'e-rhelper',\n  header: 'th.e-headercell',\n  cursor: 'e-rcursor'\n};\n/**\n * `Resize` module is used to handle Resize to fit for columns.\n *\n * @hidden\n * @private\n */\nvar Resize = /** @class */function () {\n  /**\n   * Constructor for the Grid resize module\n   *\n   * @param {IGrid} parent - specifies the IGrid\n   * @hidden\n   */\n  function Resize(parent) {\n    this.tapped = false;\n    this.isDblClk = true;\n    /** @hidden */\n    this.resizeProcess = false;\n    this.parent = parent;\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.widthService = new ColumnWidthService(parent);\n    this.addEventListener();\n  }\n  /**\n   * Resize by field names.\n   *\n   * @param  {string|string[]} fName - Defines the field name.\n   * @returns {void}\n   */\n  Resize.prototype.autoFitColumns = function (fName) {\n    var columnName = fName === undefined || fName === null || fName.length <= 0 ? this.parent.getColumns().map(function (x) {\n      return x.field;\n    }) : typeof fName === 'string' ? [fName] : fName;\n    this.parent.isAutoFitColumns = true;\n    if (this.parent.enableAdaptiveUI) {\n      this.parent.element.classList.add('e-grid-autofit');\n    }\n    this.findColumn(columnName);\n  };\n  Resize.prototype.autoFit = function () {\n    var newarray = this.parent.getColumns().filter(function (c) {\n      return c.autoFit === true;\n    }).map(function (c) {\n      return c.field || c.headerText;\n    });\n    if (newarray.length > 0) {\n      this.autoFitColumns(newarray);\n    }\n    if (this.parent.resizeSettings.mode === 'Auto') {\n      this.widthService.setWidthToTable();\n    }\n  };\n  Resize.prototype.resizeColumn = function (fName, index, id) {\n    var gObj = this.parent;\n    var tWidth = 0;\n    var headerTable = gObj.getHeaderTable();\n    var contentTable = gObj.getContentTable();\n    var footerTable;\n    var headerDivTag = 'e-gridheader';\n    var contentDivTag = literals.gridContent;\n    var footerDivTag = literals.gridFooter;\n    var indentWidth = 0;\n    var uid = id ? id : this.parent.getUidByColumnField(fName);\n    var columnIndex = this.parent.getNormalizedColumnIndex(uid);\n    var headerTextClone = headerTable.querySelector('[e-mappinguid=\"' + uid + '\"]').parentElement.cloneNode(true);\n    var contentTextClone = contentTable.querySelectorAll(\"td.e-rowcell:nth-child(\" + (columnIndex + 1) + \"):not(.e-groupcaption):not(.e-detailcell)\");\n    var footerTextClone;\n    var columnIndexByField = this.parent.getColumnIndexByField(fName);\n    if (!isNullOrUndefined(gObj.getFooterContent())) {\n      footerTable = gObj.getFooterContentTable();\n    }\n    if (footerTable) {\n      footerTextClone = footerTable.querySelectorAll(\"td:nth-child(\" + (columnIndex + 1) + \"):not(.e-groupcaption)\");\n    }\n    var indentWidthClone = [].slice.call(headerTable.querySelector('tr').getElementsByClassName('e-grouptopleftcell'));\n    if (indentWidthClone.length > 0) {\n      for (var i = 0; i < indentWidthClone.length; i++) {\n        indentWidth += indentWidthClone[parseInt(i.toString(), 10)].offsetWidth;\n      }\n    }\n    var detailsElement = contentTable.querySelector('.e-detailrowcollapse') || contentTable.querySelector('.e-detailrowexpand');\n    if ((this.parent.detailTemplate || this.parent.childGrid) && detailsElement) {\n      indentWidth += detailsElement.offsetWidth;\n    }\n    var headerText = [headerTextClone];\n    var contentText = [];\n    var footerText = [];\n    if (footerTable) {\n      for (var i = 0; i < footerTextClone.length; i++) {\n        footerText[parseInt(i.toString(), 10)] = footerTextClone[parseInt(i.toString(), 10)].cloneNode(true);\n      }\n    }\n    for (var i = 0; i < contentTextClone.length; i++) {\n      contentText[parseInt(i.toString(), 10)] = contentTextClone[parseInt(i.toString(), 10)].cloneNode(true);\n    }\n    var wHeader = this.createTable(headerTable, headerText, headerDivTag);\n    var wFooter = null;\n    var wContent = null;\n    if (gObj.getCurrentViewRecords().length) {\n      wContent = this.createTable(contentTable, contentText, contentDivTag);\n    }\n    if (footerText.length) {\n      wFooter = this.createTable(footerTable, footerText, footerDivTag);\n    }\n    var columnbyindex = gObj.getColumns()[parseInt(columnIndexByField.toString(), 10)];\n    var width = columnbyindex.width = formatUnit(Math.max(wHeader, wContent, wFooter));\n    var colMaxWidth = columnbyindex.maxWidth && parseFloat(columnbyindex.maxWidth.toString());\n    if (parseInt(width, 10) > colMaxWidth) {\n      columnbyindex.width = colMaxWidth;\n    }\n    this.widthService.setColumnWidth(gObj.getColumns()[parseInt(columnIndexByField.toString(), 10)]);\n    var result = gObj.getColumns().some(function (x) {\n      return x.width === null || x.width === undefined || x.width.length <= 0;\n    });\n    if (result === false) {\n      var element = gObj.getColumns();\n      for (var i = 0; i < element.length; i++) {\n        if (element[parseInt(i.toString(), 10)].visible) {\n          tWidth = tWidth + parseFloat(element[parseInt(i.toString(), 10)].width);\n        }\n      }\n    }\n    var calcTableWidth = tWidth + indentWidth;\n    if (tWidth > 0) {\n      if (this.parent.detailTemplate || this.parent.childGrid) {\n        this.widthService.setColumnWidth(new Column({\n          width: '30px'\n        }));\n      }\n      if (this.parent.resizeSettings.mode === 'Auto') {\n        calcTableWidth = '100%';\n      }\n      headerTable.style.width = formatUnit(calcTableWidth);\n      contentTable.style.width = formatUnit(calcTableWidth);\n      if (!isNullOrUndefined(footerTable)) {\n        footerTable.style.width = formatUnit(calcTableWidth);\n      }\n    }\n    if (gObj.isFrozenGrid() && gObj.enableColumnVirtualization) {\n      this.widthService.refreshFrozenScrollbar();\n    }\n    var tableWidth = headerTable.offsetWidth;\n    var contentwidth = gObj.getContent().scrollWidth;\n    if (contentwidth > tableWidth) {\n      headerTable.classList.add('e-tableborder');\n      contentTable.classList.add('e-tableborder');\n    } else {\n      headerTable.classList.remove('e-tableborder');\n      contentTable.classList.remove('e-tableborder');\n    }\n    if (!isNullOrUndefined(footerTable)) {\n      footerTable.classList.add('e-tableborder');\n    }\n  };\n  /**\n   * To destroy the resize\n   *\n   * @returns {void}\n   * @hidden\n   */\n  Resize.prototype.destroy = function () {\n    var gridElement = this.parent.element;\n    if (!gridElement || !gridElement.querySelector('.' + literals.gridHeader) && !gridElement.querySelector('.' + literals.gridContent)) {\n      return;\n    }\n    this.widthService = null;\n    this.unwireEvents();\n    this.removeEventListener();\n  };\n  /**\n   * For internal use only - Get the module name.\n   *\n   * @returns {string} returns the module name\n   * @private\n   */\n  Resize.prototype.getModuleName = function () {\n    return 'resize';\n  };\n  Resize.prototype.findColumn = function (fName) {\n    for (var i = 0; i < fName.length; i++) {\n      var fieldName = fName[parseInt(i.toString(), 10)];\n      var columnIndex = this.parent.getColumnIndexByField(fieldName);\n      var column = this.parent.getColumns()[parseInt(columnIndex.toString(), 10)];\n      if (columnIndex > -1 && !isNullOrUndefined(column) && column.visible === true) {\n        this.resizeColumn(fieldName, columnIndex);\n      }\n    }\n    if (this.parent.allowTextWrap) {\n      this.parent.notify(events.freezeRender, {\n        case: 'refreshHeight',\n        isModeChg: true\n      });\n    }\n    if (this.parent.isFrozenGrid()) {\n      this.refreshResizefrzCols(true, true);\n    }\n  };\n  /**\n   * To create table for autofit\n   *\n   * @param {Element} table - specifies the table\n   * @param {Element[]} text - specifies the text\n   * @param {string} tag - specifies the tag name\n   * @returns {number} returns the number\n   * @hidden\n   */\n  Resize.prototype.createTable = function (table, text, tag) {\n    var myTableDiv = this.parent.createElement('div');\n    var adaptiveClass = this.parent.enableAdaptiveUI ? ' e-bigger' : '';\n    myTableDiv.className = this.parent.element.className + adaptiveClass;\n    myTableDiv.style.cssText = 'display: inline-block;visibility:hidden;position:absolute';\n    var mySubDiv = this.parent.createElement('div');\n    mySubDiv.className = tag;\n    var myTable = this.parent.createElement('table', {\n      attrs: {\n        role: 'grid'\n      }\n    });\n    myTable.className = table.className;\n    myTable.classList.add('e-resizetable');\n    myTable.style.cssText = 'table-layout: auto;width: auto';\n    var myTr = this.parent.createElement('tr');\n    for (var i = 0; i < text.length; i++) {\n      var tr = myTr.cloneNode();\n      tr.className = table.querySelector('tr').className;\n      tr.appendChild(text[parseInt(i.toString(), 10)]);\n      myTable.appendChild(tr);\n    }\n    mySubDiv.appendChild(myTable);\n    myTableDiv.appendChild(mySubDiv);\n    document.body.appendChild(myTableDiv);\n    var offsetWidthValue = myTable.getBoundingClientRect().width;\n    document.body.removeChild(myTableDiv);\n    return Math.ceil(offsetWidthValue);\n  };\n  /**\n   * @returns {void}\n   * @hidden\n   */\n  Resize.prototype.addEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.parent.on(events.headerRefreshed, this.refreshHeight, this);\n    this.parent.on(events.refreshResizePosition, this.refreshResizePosition, this);\n    this.parent.on(events.initialEnd, this.wireEvents, this);\n    this.parent.on(events.contentReady, this.autoFit, this);\n    this.parent.on(events.refreshHandlers, this.refreshHeight, this);\n    this.parent.on(events.destroy, this.destroy, this);\n  };\n  /**\n   * @returns {void}\n   * @hidden\n   */\n  Resize.prototype.removeEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.parent.off(events.headerRefreshed, this.refreshHeight);\n    this.parent.off(events.refreshResizePosition, this.refreshResizePosition);\n    this.parent.off(events.initialEnd, this.wireEvents);\n    this.parent.off(events.refreshHandlers, this.refreshHeight);\n    this.parent.off(events.destroy, this.destroy);\n  };\n  /**\n   * @returns {void}\n   * @hidden\n   */\n  Resize.prototype.render = function () {\n    this.unwireEvents();\n    this.wireEvents();\n    this.setHandlerHeight();\n  };\n  Resize.prototype.refreshHeight = function () {\n    if (this.parent.getHeaderTable()) {\n      var element = this.getResizeHandlers();\n      for (var i = 0; i < element.length; i++) {\n        if (element[parseInt(i.toString(), 10)].parentElement.offsetHeight > 0) {\n          element[parseInt(i.toString(), 10)].style.height = element[parseInt(i.toString(), 10)].parentElement.offsetHeight + 'px';\n        }\n      }\n      this.setHandlerHeight();\n    }\n  };\n  Resize.prototype.wireEvents = function () {\n    EventHandler.add(this.parent.getHeaderContent(), Browser.touchStartEvent, this.touchResizeStart, this);\n    EventHandler.add(this.parent.getHeaderContent(), events.dblclick, this.callAutoFit, this);\n  };\n  Resize.prototype.unwireEvents = function () {\n    EventHandler.remove(this.parent.getHeaderContent(), Browser.touchStartEvent, this.touchResizeStart);\n    EventHandler.remove(this.parent.getHeaderContent(), events.dblclick, this.callAutoFit);\n  };\n  Resize.prototype.getResizeHandlers = function () {\n    return [].slice.call(this.parent.getHeaderTable().getElementsByClassName(resizeClassList.root));\n  };\n  Resize.prototype.setHandlerHeight = function () {\n    var element = [].slice.call(this.parent.getHeaderTable().getElementsByClassName(resizeClassList.suppress));\n    for (var i = 0; i < element.length; i++) {\n      element[parseInt(i.toString(), 10)].style.height = element[parseInt(i.toString(), 10)].parentElement.offsetHeight + 'px';\n    }\n  };\n  Resize.prototype.callAutoFit = function (e) {\n    if (e.target.classList.contains('e-rhandler')) {\n      var col = this.getTargetColumn(e);\n      if (col.columns) {\n        return;\n      }\n      this.resizeColumn(col.field, this.parent.getNormalizedColumnIndex(col.uid), col.uid);\n      var header = closest(e.target, resizeClassList.header);\n      header.classList.add('e-resized');\n    }\n  };\n  Resize.prototype.touchResizeStart = function (e) {\n    if (!Global.timer) {\n      Global.timer = setTimeout(function () {\n        Global.timer = null;\n      }, 300);\n      return this.resizeStart(e);\n    } else {\n      clearTimeout(Global.timer);\n      Global.timer = null;\n      this.callAutoFit(e);\n    }\n  };\n  Resize.prototype.resizeStart = function (e) {\n    var _this = this;\n    if (e.target.classList.contains('e-rhandler')) {\n      if (!this.helper) {\n        if (this.getScrollBarWidth() === 0) {\n          this.resizeProcess = true;\n          if (this.parent.allowGrouping) {\n            for (var i = 0; i < this.parent.groupSettings.columns.length; i++) {\n              this.widthService.setColumnWidth(new Column({\n                width: '30px'\n              }), i);\n            }\n          }\n          for (var _i = 0, _a = this.refreshColumnWidth(); _i < _a.length; _i++) {\n            var col = _a[_i];\n            this.widthService.setColumnWidth(col);\n          }\n          this.widthService.setWidthToTable();\n          this.resizeProcess = false;\n        }\n        this.refreshStackedColumnWidth();\n        this.element = e.target;\n        this.parentElementWidth = this.parent.element.getBoundingClientRect().width;\n        this.appendHelper();\n        this.column = this.getTargetColumn(e);\n        this.pageX = this.getPointX(e);\n        if (this.column.getFreezeTableName() === literals.frozenRight) {\n          if (this.parent.enableRtl) {\n            this.minMove = (this.column.minWidth ? parseFloat(this.column.minWidth.toString()) : 0) - parseFloat(isNullOrUndefined(this.column.width) ? '' : this.column.width.toString());\n          } else {\n            this.minMove = parseFloat(isNullOrUndefined(this.column.width) ? '' : this.column.width.toString()) - (this.column.minWidth ? parseFloat(this.column.minWidth.toString()) : 0);\n          }\n        } else if (this.parent.enableRtl) {\n          this.minMove = parseFloat(this.column.width.toString()) - (this.column.minWidth ? parseFloat(this.column.minWidth.toString()) : 0);\n        } else {\n          this.minMove = (this.column.minWidth ? parseFloat(this.column.minWidth.toString()) : 0) - parseFloat(isNullOrUndefined(this.column.width) ? '' : this.column.width.toString());\n        }\n        this.minMove += this.pageX;\n      }\n      if (Browser.isDevice && !this.helper.classList.contains(resizeClassList.icon)) {\n        this.helper.classList.add(resizeClassList.icon);\n        EventHandler.add(document, Browser.touchStartEvent, this.removeHelper, this);\n        EventHandler.add(this.helper, Browser.touchStartEvent, this.resizeStart, this);\n      } else {\n        var args = {\n          e: e,\n          column: this.column\n        };\n        this.parent.trigger(events.resizeStart, args, function (args) {\n          if (args.cancel || _this.parent.isEdit) {\n            _this.cancelResizeAction();\n            return;\n          }\n          EventHandler.add(document, Browser.touchEndEvent, _this.resizeEnd, _this);\n          EventHandler.add(_this.parent.element, Browser.touchMoveEvent, _this.resizing, _this);\n          _this.updateCursor('add');\n        });\n      }\n    }\n  };\n  Resize.prototype.cancelResizeAction = function (removeEvents) {\n    if (removeEvents) {\n      EventHandler.remove(this.parent.element, Browser.touchMoveEvent, this.resizing);\n      EventHandler.remove(document, Browser.touchEndEvent, this.resizeEnd);\n      this.updateCursor('remove');\n    }\n    if (Browser.isDevice) {\n      EventHandler.remove(document, Browser.touchStartEvent, this.removeHelper);\n      EventHandler.remove(this.helper, Browser.touchStartEvent, this.resizeStart);\n    }\n    detach(this.helper);\n    this.refresh();\n  };\n  Resize.prototype.getWidth = function (width, minWidth, maxWidth) {\n    if (minWidth && width < minWidth) {\n      return minWidth;\n    } else if (maxWidth && width > maxWidth) {\n      return maxWidth;\n    } else {\n      return width;\n    }\n  };\n  Resize.prototype.updateResizeEleHeight = function () {\n    var elements = [].slice.call(this.parent.getHeaderContent().getElementsByClassName('e-rhandler'));\n    for (var i = 0; i < elements.length; i++) {\n      elements[parseInt(i.toString(), 10)].style.height = this.element.parentElement.offsetHeight + 'px';\n    }\n  };\n  Resize.prototype.getColData = function (column, mousemove) {\n    return {\n      width: parseFloat(isNullOrUndefined(this.widthService.getWidth(column)) || this.widthService.getWidth(column) === 'auto' ? '0' : this.widthService.getWidth(column).toString()) + mousemove,\n      minWidth: column.minWidth ? parseFloat(column.minWidth.toString()) : null,\n      maxWidth: column.maxWidth ? parseFloat(column.maxWidth.toString()) : null\n    };\n  };\n  Resize.prototype.refreshResizeFixedCols = function (pos) {\n    var cols = this.parent.getColumns();\n    var translateX = this.parent.enableColumnVirtualization ? this.parent.translateX : 0;\n    var th = [].slice.call(this.parent.getHeaderContent().querySelector('tbody').querySelectorAll('.e-fixedfreeze')).concat([].slice.call(this.parent.getContent().querySelectorAll('.e-fixedfreeze')));\n    for (var i = 0; i < th.length; i++) {\n      var node = th[parseInt(i.toString(), 10)];\n      var column = void 0;\n      if (node.classList.contains('e-summarycell')) {\n        var uid = node.getAttribute('e-mappinguid');\n        column = this.parent.getColumnByUid(uid);\n      } else {\n        var index = parseInt(node.getAttribute('data-colindex'), 10);\n        column = cols[parseInt(index.toString(), 10)];\n      }\n      var width = 0;\n      if (pos === 'Left') {\n        if (this.parent.getVisibleFrozenLeftCount()) {\n          width = this.parent.getIndentCount() * 30;\n        } else if (this.parent.getFrozenMode() === 'Right') {\n          width = this.parent.groupSettings.columns.length * 30;\n        }\n        for (var j = 0; j < cols.length; j++) {\n          if (column.index > cols[parseInt(j.toString(), 10)].index) {\n            if (column.uid === cols[parseInt(j.toString(), 10)].uid) {\n              break;\n            }\n            if (cols[parseInt(j.toString(), 10)].freeze === 'Left' || cols[parseInt(j.toString(), 10)].isFrozen || cols[parseInt(j.toString(), 10)].freeze === 'Fixed') {\n              if (cols[parseInt(j.toString(), 10)].visible) {\n                width += parseFloat(cols[parseInt(j.toString(), 10)].width.toString());\n              }\n            }\n          }\n        }\n        applyStickyLeftRightPosition(node, (width === 0 ? width : width - 1) - translateX, this.parent.enableRtl, 'Left');\n      }\n      if (pos === 'Right') {\n        width = this.parent.getFrozenMode() === 'Right' && this.parent.isRowDragable() ? 30 : 0;\n        for (var j = cols.length - 1; j >= 0; j--) {\n          if (column.uid === cols[parseInt(j.toString(), 10)].uid) {\n            break;\n          }\n          if (cols[parseInt(j.toString(), 10)].freeze === 'Right' || cols[parseInt(j.toString(), 10)].freeze === 'Fixed') {\n            if (cols[parseInt(j.toString(), 10)].visible) {\n              width += parseFloat(cols[parseInt(j.toString(), 10)].width.toString());\n            }\n          }\n        }\n        applyStickyLeftRightPosition(node, width + translateX, this.parent.enableRtl, 'Right');\n      }\n    }\n  };\n  Resize.prototype.refreshResizePosition = function () {\n    this.refreshResizefrzCols(true);\n  };\n  Resize.prototype.refreshResizefrzCols = function (freezeRefresh, isAutoFitCol) {\n    var _this = this;\n    var translateX = this.parent.enableColumnVirtualization ? this.parent.translateX : 0;\n    if (freezeRefresh || this.column.freeze === 'Left' || this.column.isFrozen || this.column.columns && frozenDirection(this.column) === 'Left') {\n      var width_1 = this.parent.getIndentCount() * 30;\n      var columns = this.parent.getColumns().filter(function (col) {\n        return col.freeze === 'Left' || col.isFrozen;\n      });\n      if (!freezeRefresh || isAutoFitCol) {\n        this.frzHdrRefresh('Left');\n      }\n      for (var i = 0; i < columns.length; i++) {\n        if (freezeRefresh || columns[parseInt(i.toString(), 10)].index > this.column.index) {\n          var elements = [];\n          if (this.parent.frozenRows) {\n            elements = [].slice.call(this.parent.getHeaderContent().querySelectorAll('td[data-colindex=\"' + i + '\"]')).concat([].slice.call(this.parent.getContent().querySelectorAll('td[data-colindex=\"' + i + '\"]')));\n          } else {\n            elements = [].slice.call(this.parent.getContent().querySelectorAll('td[data-colindex=\"' + i + '\"]'));\n          }\n          elements.filter(function (cell) {\n            applyStickyLeftRightPosition(cell, width_1 - translateX, _this.parent.enableRtl, 'Left');\n          });\n          if (this.parent.enableColumnVirtualization) {\n            columns[parseInt(i.toString(), 10)].valueX = width_1;\n          }\n        }\n        if (columns[parseInt(i.toString(), 10)].visible) {\n          width_1 += parseFloat(columns[parseInt(i.toString(), 10)].width.toString());\n        }\n      }\n      this.refreshResizeFixedCols('Left');\n    }\n    if (freezeRefresh || this.column.freeze === 'Right' || this.column.columns && frozenDirection(this.column) === 'Right') {\n      var width_2 = this.parent.getFrozenMode() === 'Right' && this.parent.isRowDragable() ? 30 : 0;\n      var columns = this.parent.getColumns();\n      if (!freezeRefresh || isAutoFitCol) {\n        this.frzHdrRefresh('Right');\n      }\n      var columnsRight = columns.filter(function (col) {\n        return col.freeze === 'Right';\n      });\n      for (var i = columns.length - 1; i >= columns.length - columnsRight.length; i--) {\n        var elements = [];\n        if (this.parent.frozenRows) {\n          elements = [].slice.call(this.parent.getHeaderContent().querySelectorAll('td[data-colindex=\"' + i + '\"]')).concat([].slice.call(this.parent.getContent().querySelectorAll('td[data-colindex=\"' + i + '\"]')));\n        } else {\n          elements = [].slice.call(this.parent.getContent().querySelectorAll('td[data-colindex=\"' + i + '\"]'));\n        }\n        elements.filter(function (cell) {\n          applyStickyLeftRightPosition(cell, width_2 + translateX, _this.parent.enableRtl, 'Right');\n        });\n        if (this.parent.enableColumnVirtualization) {\n          columns[parseInt(i.toString(), 10)].valueX = width_2;\n        }\n        if (columns[parseInt(i.toString(), 10)].visible) {\n          width_2 = width_2 + parseFloat(columns[parseInt(i.toString(), 10)].width.toString());\n        }\n      }\n      this.refreshResizeFixedCols('Right');\n    }\n    if (this.column && (this.column.freeze === 'Fixed' || this.column.columns && frozenDirection(this.column) === 'Fixed')) {\n      this.refreshResizeFixedCols('Left');\n      this.refreshResizeFixedCols('Right');\n      this.frzHdrRefresh('Left');\n      this.frzHdrRefresh('Right');\n    }\n    if (this.parent.groupSettings.columns.length && this.parent.aggregates.length && this.parent.getContent().querySelector('.e-groupcaptionrow')) {\n      this.refreshGroupCaptionRow();\n    }\n  };\n  Resize.prototype.refreshGroupCaptionRow = function () {\n    var capRow = [].slice.call(this.parent.getContent().querySelectorAll('.e-groupcaptionrow'));\n    for (var i = 0; i < capRow.length; i++) {\n      var tr = capRow[parseInt(i.toString(), 10)];\n      if (tr.querySelector('.e-summarycell')) {\n        groupCaptionRowLeftRightPos(tr, this.parent);\n      }\n    }\n  };\n  Resize.prototype.frzHdrRefresh = function (pos) {\n    var _this = this;\n    var translateX = this.parent.enableColumnVirtualization ? this.parent.translateX : 0;\n    if (pos === 'Left') {\n      var tr = [].slice.call(this.parent.getHeaderContent().querySelector('thead').querySelectorAll('tr'));\n      for (var i = 0; i < tr.length; i++) {\n        var th = [].slice.call(tr[parseInt(i.toString(), 10)].querySelectorAll('.e-leftfreeze,.e-fixedfreeze'));\n        var _loop_1 = function (j) {\n          var node = th[parseInt(j.toString(), 10)];\n          if (node.classList.contains('e-rowdragheader') || node.classList.contains('e-dragheadercell') || node.classList.contains('e-grouptopleftcell')) {\n            return \"continue\";\n          }\n          var column = this_1.getParticularCol(node);\n          var cols = this_1.parent.getColumns();\n          var width = 0;\n          var summarycell = [];\n          if (this_1.parent.aggregates.length && this_1.parent.getFooterContent()) {\n            if (this_1.parent.getContent().querySelectorAll('.e-summaryrow').length) {\n              var summaryRows = [].slice.call(this_1.parent.getContent().querySelectorAll('.e-summaryrow'));\n              summaryRows.filter(function (row) {\n                summarycell.push(row.querySelector('[e-mappinguid=\"' + column.uid + '\"]'));\n              });\n            }\n            summarycell = summarycell.concat([].slice.call(this_1.parent.getFooterContent().querySelectorAll('[e-mappinguid=\"' + column.uid + '\"]')));\n          }\n          if (node.classList.contains('e-fixedfreeze')) {\n            if (this_1.parent.getVisibleFrozenLeftCount()) {\n              width = this_1.parent.getIndentCount() * 30;\n            } else if (this_1.parent.getFrozenMode() === 'Right') {\n              width = this_1.parent.groupSettings.columns.length * 30;\n            }\n            for (var w = 0; w < cols.length; w++) {\n              if (column.index > cols[parseInt(w.toString(), 10)].index) {\n                if (column.uid === cols[parseInt(w.toString(), 10)].uid) {\n                  break;\n                }\n                if (cols[parseInt(w.toString(), 10)].freeze === 'Left' || cols[parseInt(w.toString(), 10)].isFrozen || cols[parseInt(w.toString(), 10)].freeze === 'Fixed') {\n                  if (cols[parseInt(w.toString(), 10)].visible) {\n                    width += parseInt(cols[parseInt(w.toString(), 10)].width.toString(), 10);\n                  }\n                }\n              }\n            }\n            if (summarycell && summarycell.length) {\n              summarycell.filter(function (cell) {\n                applyStickyLeftRightPosition(cell, width - translateX, _this.parent.enableRtl, 'Left');\n              });\n            }\n            applyStickyLeftRightPosition(node, (width === 0 ? width : width - 1) - translateX, this_1.parent.enableRtl, 'Left');\n          } else {\n            width = this_1.parent.getIndentCount() * 30;\n            if (column.index === 0) {\n              if (summarycell && summarycell.length) {\n                summarycell.filter(function (cell) {\n                  applyStickyLeftRightPosition(cell, width - translateX, _this.parent.enableRtl, 'Left');\n                });\n              }\n              applyStickyLeftRightPosition(node, width - translateX, this_1.parent.enableRtl, 'Left');\n              if (this_1.parent.enableColumnVirtualization) {\n                column.valueX = width;\n              }\n            } else {\n              for (var k = 0; k < cols.length; k++) {\n                if (column.index < cols[parseInt(k.toString(), 10)].index || column.uid === cols[parseInt(k.toString(), 10)].uid) {\n                  break;\n                }\n                if (cols[parseInt(k.toString(), 10)].visible) {\n                  width += parseInt(cols[parseInt(k.toString(), 10)].width.toString(), 10);\n                }\n              }\n              if (summarycell && summarycell.length) {\n                summarycell.filter(function (cell) {\n                  applyStickyLeftRightPosition(cell, width - translateX, _this.parent.enableRtl, 'Left');\n                });\n              }\n              applyStickyLeftRightPosition(node, width - translateX, this_1.parent.enableRtl, 'Left');\n              if (this_1.parent.enableColumnVirtualization) {\n                column.valueX = width;\n              }\n            }\n          }\n        };\n        var this_1 = this;\n        for (var j = 0; j < th.length; j++) {\n          _loop_1(j);\n        }\n      }\n    }\n    if (pos === 'Right') {\n      var tr = [].slice.call(this.parent.getHeaderContent().querySelector('thead').querySelectorAll('tr'));\n      for (var i = 0; i < tr.length; i++) {\n        var th = [].slice.call(tr[parseInt(i.toString(), 10)].querySelectorAll('.e-rightfreeze, .e-fixedfreeze'));\n        var _loop_2 = function (j) {\n          var node = th[parseInt(j.toString(), 10)];\n          var column = this_2.getParticularCol(node);\n          var cols = this_2.parent.getColumns();\n          var width = 0;\n          var summarycell = [];\n          if (this_2.parent.aggregates.length && this_2.parent.getFooterContent()) {\n            if (this_2.parent.getContent().querySelectorAll('.e-summaryrow').length) {\n              var summaryRows = [].slice.call(this_2.parent.getContent().querySelectorAll('.e-summaryrow'));\n              summaryRows.filter(function (row) {\n                summarycell.push(row.querySelector('[e-mappinguid=\"' + column.uid + '\"]'));\n              });\n            }\n            summarycell = summarycell.concat([].slice.call(this_2.parent.getFooterContent().querySelectorAll('[e-mappinguid=\"' + column.uid + '\"]')));\n          }\n          if (node.classList.contains('e-fixedfreeze')) {\n            width = this_2.parent.getFrozenMode() === 'Right' && this_2.parent.isRowDragable() ? 30 : 0;\n            for (var w = cols.length - 1; w >= 0; w--) {\n              if (column.index < cols[parseInt(w.toString(), 10)].index) {\n                if (column.columns && isChildColumn(column, cols[parseInt(w.toString(), 10)].uid) || column.index > cols[parseInt(w.toString(), 10)].index) {\n                  break;\n                }\n                if (cols[parseInt(w.toString(), 10)].freeze === 'Right' || cols[parseInt(w.toString(), 10)].freeze === 'Fixed') {\n                  if (cols[parseInt(w.toString(), 10)].visible) {\n                    width += parseFloat(cols[parseInt(w.toString(), 10)].width.toString());\n                  }\n                }\n              }\n            }\n            if (summarycell.length) {\n              summarycell.filter(function (cell) {\n                applyStickyLeftRightPosition(cell, width + translateX, _this.parent.enableRtl, 'Right');\n              });\n            }\n            applyStickyLeftRightPosition(node, width + translateX, this_2.parent.enableRtl, 'Right');\n          } else {\n            width = this_2.parent.getFrozenMode() === 'Right' && this_2.parent.isRowDragable() ? 30 : 0;\n            for (var k = cols.length - 1; k >= 0; k--) {\n              if (column.columns && isChildColumn(column, cols[parseInt(k.toString(), 10)].uid) || column.index > cols[parseInt(k.toString(), 10)].index || column.uid === cols[parseInt(k.toString(), 10)].uid) {\n                break;\n              }\n              if (cols[parseInt(k.toString(), 10)].visible) {\n                width += parseInt(cols[parseInt(k.toString(), 10)].width.toString(), 10);\n              }\n            }\n            if (summarycell.length) {\n              summarycell.filter(function (cell) {\n                applyStickyLeftRightPosition(cell, width + translateX, _this.parent.enableRtl, 'Right');\n              });\n            }\n            applyStickyLeftRightPosition(node, width + translateX, this_2.parent.enableRtl, 'Right');\n            if (this_2.parent.enableColumnVirtualization) {\n              column.valueX = width;\n            }\n          }\n        };\n        var this_2 = this;\n        for (var j = th.length - 1; j >= 0; j--) {\n          _loop_2(j);\n        }\n      }\n    }\n  };\n  Resize.prototype.getParticularCol = function (node) {\n    var uid = node.classList.contains('e-filterbarcell') ? node.getAttribute('e-mappinguid') : node.querySelector('[e-mappinguid]').getAttribute('e-mappinguid');\n    return this.parent.getColumnByUid(uid);\n  };\n  Resize.prototype.resizing = function (e) {\n    if (isNullOrUndefined(this.column)) {\n      return;\n    }\n    if (this.parent.isFrozenGrid()) {\n      this.refreshResizefrzCols();\n    }\n    var offsetWidth = 0;\n    if (isNullOrUndefined(this.column)) {\n      offsetWidth = parentsUntil(this.element, 'th').offsetWidth;\n    }\n    if (this.parent.allowTextWrap) {\n      this.updateResizeEleHeight();\n      this.setHelperHeight();\n    }\n    var pageX = this.getPointX(e);\n    var mousemove = this.parent.enableRtl ? -(pageX - this.pageX) : pageX - this.pageX;\n    var colData = this.getColData(this.column, mousemove);\n    if (!colData.width) {\n      colData.width = closest(this.element, 'th').offsetWidth;\n    }\n    var width = this.getWidth(colData.width, colData.minWidth, colData.maxWidth);\n    this.parent.log('resize_min_max', {\n      column: this.column,\n      width: width\n    });\n    if (!this.parent.enableRtl && this.minMove >= pageX || this.parent.enableRtl && this.minMove <= pageX) {\n      width = this.column.minWidth ? parseFloat(this.column.minWidth.toString()) : 10;\n      this.pageX = pageX = this.minMove;\n    }\n    if (width !== parseFloat(isNullOrUndefined(this.column.width) || this.column.width === 'auto' ? offsetWidth.toString() : this.column.width.toString())) {\n      this.pageX = pageX;\n      this.column.width = formatUnit(width);\n      var args = {\n        e: e,\n        column: this.column\n      };\n      this.parent.trigger(events.onResize, args);\n      if (args.cancel) {\n        this.cancelResizeAction(true);\n        return;\n      }\n      var columns = [this.column];\n      var finalColumns = [this.column];\n      if (this.column.columns) {\n        columns = this.getSubColumns(this.column, []);\n        columns = this.calulateColumnsWidth(columns, false, mousemove);\n        finalColumns = this.calulateColumnsWidth(columns, true, mousemove);\n      }\n      this.resizeProcess = true;\n      for (var _i = 0, finalColumns_1 = finalColumns; _i < finalColumns_1.length; _i++) {\n        var col = finalColumns_1[_i];\n        this.widthService.setColumnWidth(col, null, 'resize');\n      }\n      this.resizeProcess = false;\n      this.updateHelper();\n    }\n    this.isDblClk = false;\n  };\n  Resize.prototype.calulateColumnsWidth = function (columns, isUpdate, mousemove) {\n    var finalColumns = [];\n    for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n      var col = columns_1[_i];\n      var totalWidth = 0;\n      for (var i = 0; i < columns.length; i++) {\n        totalWidth += parseFloat(columns[parseInt(i.toString(), 10)].width.toString());\n      }\n      var colData = this.getColData(col, parseFloat(col.width) * mousemove / totalWidth);\n      var colWidth = this.getWidth(colData.width, colData.minWidth, colData.maxWidth);\n      if (colWidth !== parseFloat(col.width.toString())) {\n        if (isUpdate) {\n          col.width = formatUnit(colWidth < 1 ? 1 : colWidth);\n        }\n        finalColumns.push(col);\n      }\n    }\n    return finalColumns;\n  };\n  Resize.prototype.getSubColumns = function (column, subColumns) {\n    for (var _i = 0, _a = column.columns; _i < _a.length; _i++) {\n      var col = _a[_i];\n      if (col.visible !== false && col.allowResizing) {\n        if (col.columns) {\n          this.getSubColumns(col, subColumns);\n        } else {\n          subColumns.push(col);\n        }\n      }\n    }\n    return subColumns;\n  };\n  Resize.prototype.resizeEnd = function (e) {\n    if (!this.helper || this.parent.isDestroyed) {\n      return;\n    }\n    var gObj = this.parent;\n    EventHandler.remove(this.parent.element, Browser.touchMoveEvent, this.resizing);\n    EventHandler.remove(document, Browser.touchEndEvent, this.resizeEnd);\n    this.updateCursor('remove');\n    detach(this.helper);\n    var args = {\n      e: e,\n      column: this.column\n    };\n    var content = this.parent.getContent().querySelector('.' + literals.content);\n    var cTable = content;\n    if (cTable.scrollHeight > cTable.clientHeight) {\n      this.parent.scrollModule.setPadding();\n      cTable.style.overflowY = 'scroll';\n    }\n    this.parent.trigger(events.resizeStop, args);\n    closest(this.element, '.e-headercell').classList.add('e-resized');\n    this.isFrozenColResized = false;\n    if (this.parent.allowTextWrap) {\n      this.updateResizeEleHeight();\n      this.parent.notify(events.textWrapRefresh, {\n        case: 'textwrap'\n      });\n    }\n    var headerTable = gObj.getHeaderTable();\n    var contentTable = gObj.getContentTable();\n    var footerTable;\n    if (!isNullOrUndefined(gObj.getFooterContent())) {\n      footerTable = gObj.getFooterContentTable();\n    }\n    var tableWidth = headerTable.offsetWidth;\n    var contentwidth = gObj.getContent().scrollWidth;\n    if (contentwidth > tableWidth) {\n      addClass([headerTable, contentTable], ['e-tableborder']);\n    } else {\n      removeClass([headerTable, contentTable], ['e-tableborder']);\n    }\n    if (!isNullOrUndefined(footerTable)) {\n      footerTable.classList.add('e-tableborder');\n    }\n    this.refresh();\n    this.doubleTapEvent(e);\n    this.isDblClk = true;\n  };\n  Resize.prototype.getPointX = function (e) {\n    if (e.touches && e.touches.length) {\n      return e.touches[0].pageX;\n    } else {\n      return e.pageX;\n    }\n  };\n  Resize.prototype.refreshColumnWidth = function () {\n    var columns = this.parent.getColumns();\n    for (var _i = 0, _a = [].slice.apply(this.parent.getHeaderContent().querySelectorAll('th.e-headercell')); _i < _a.length; _i++) {\n      var ele = _a[_i];\n      for (var _b = 0, columns_2 = columns; _b < columns_2.length; _b++) {\n        var column = columns_2[_b];\n        if (ele.querySelector('[e-mappinguid]') && ele.querySelector('[e-mappinguid]').getAttribute('e-mappinguid') === column.uid && column.visible) {\n          column.width = ele.getBoundingClientRect().width;\n          break;\n        }\n      }\n    }\n    return columns;\n  };\n  Resize.prototype.refreshStackedColumnWidth = function () {\n    for (var _i = 0, _a = this.parent.getStackedColumns(this.parent.columns); _i < _a.length; _i++) {\n      var stackedColumn = _a[_i];\n      stackedColumn.width = this.getStackedWidth(stackedColumn, 0);\n    }\n  };\n  Resize.prototype.getStackedWidth = function (column, width) {\n    for (var _i = 0, _a = column.columns; _i < _a.length; _i++) {\n      var col = _a[_i];\n      if (col.visible !== false) {\n        if (col.columns) {\n          width = this.getStackedWidth(col, width);\n        } else {\n          width += parseFloat(col.width.toString());\n        }\n      }\n    }\n    return width;\n  };\n  Resize.prototype.getTargetColumn = function (e) {\n    var cell = closest(e.target, resizeClassList.header);\n    cell = cell.querySelector('.e-headercelldiv') || cell.querySelector('.e-stackedheadercelldiv');\n    var uid = cell.getAttribute('e-mappinguid');\n    return this.parent.getColumnByUid(uid);\n  };\n  Resize.prototype.updateCursor = function (action) {\n    var headerRows = [].slice.call(this.parent.getHeaderContent().querySelectorAll('th'));\n    headerRows.push(this.parent.element);\n    for (var _i = 0, headerRows_1 = headerRows; _i < headerRows_1.length; _i++) {\n      var row = headerRows_1[_i];\n      row.classList[\"\" + action](resizeClassList.cursor);\n    }\n  };\n  Resize.prototype.refresh = function () {\n    this.column = null;\n    this.pageX = null;\n    this.element = null;\n    this.helper = null;\n  };\n  Resize.prototype.appendHelper = function () {\n    this.helper = this.parent.createElement('div', {\n      className: resizeClassList.helper\n    });\n    this.parent.element.appendChild(this.helper);\n    this.setHelperHeight();\n  };\n  Resize.prototype.setHelperHeight = function () {\n    var height = this.parent.getContent().offsetHeight - this.getScrollBarWidth();\n    var rect = closest(this.element, resizeClassList.header);\n    var tr = [].slice.call(this.parent.getHeaderContent().querySelectorAll('tr'));\n    for (var i = tr.indexOf(rect.parentElement); i < tr.length && i > -1; i++) {\n      height += tr[parseInt(i.toString(), 10)].offsetHeight;\n    }\n    var pos = this.calcPos(rect);\n    pos.left += this.parent.enableRtl ? 0 - 1 : rect.offsetWidth - 2;\n    this.helper.style.cssText = 'height: ' + height + 'px; top: ' + pos.top + 'px; left:' + Math.floor(pos.left) + 'px;';\n    if (this.parent.enableVirtualization) {\n      this.helper.classList.add('e-virtual-rhandler');\n    }\n  };\n  Resize.prototype.getScrollBarWidth = function (height) {\n    var ele = this.parent.getContent().firstChild;\n    return ele.scrollHeight > ele.clientHeight && height || ele.scrollWidth > ele.clientWidth ? getScrollBarWidth() : 0;\n  };\n  Resize.prototype.removeHelper = function (e) {\n    var cls = e.target.classList;\n    if (!(cls.contains(resizeClassList.root) || cls.contains(resizeClassList.icon)) && this.helper) {\n      EventHandler.remove(document, Browser.touchStartEvent, this.removeHelper);\n      EventHandler.remove(this.helper, Browser.touchStartEvent, this.resizeStart);\n      detach(this.helper);\n      this.refresh();\n    }\n  };\n  Resize.prototype.updateHelper = function () {\n    var rect = closest(this.element, resizeClassList.header);\n    var left;\n    left = Math.floor(this.calcPos(rect).left + (this.parent.enableRtl ? 0 - 1 : rect.offsetWidth - 2));\n    var borderWidth = 2; // to maintain the helper inside of grid element.\n    if (left > this.parentElementWidth) {\n      left = this.parentElementWidth - borderWidth;\n    }\n    this.helper.style.left = left + 'px';\n  };\n  Resize.prototype.calcPos = function (elem) {\n    var parentOffset = {\n      top: 0,\n      left: 0\n    };\n    var offset = elem.getBoundingClientRect();\n    var doc = elem.ownerDocument;\n    var offsetParent = parentsUntil(elem, 'e-grid') || doc.documentElement;\n    while (offsetParent && (offsetParent === doc.body || offsetParent === doc.documentElement) && offsetParent.style.position === 'static') {\n      offsetParent = offsetParent.parentNode;\n    }\n    if (offsetParent && offsetParent !== elem && offsetParent.nodeType === 1) {\n      parentOffset = offsetParent.getBoundingClientRect();\n    }\n    return {\n      top: offset.top - parentOffset.top,\n      left: offset.left - parentOffset.left\n    };\n  };\n  Resize.prototype.doubleTapEvent = function (e) {\n    var _this = this;\n    if (this.getUserAgent() && this.isDblClk) {\n      if (!this.tapped) {\n        this.tapped = setTimeout(function () {\n          _this.tapped = null;\n        }, 300);\n      } else {\n        clearTimeout(this.tapped);\n        this.callAutoFit(e);\n        this.tapped = null;\n      }\n    }\n  };\n  Resize.prototype.getUserAgent = function () {\n    var userAgent = Browser.userAgent.toLowerCase();\n    return /iphone|ipod|ipad/.test(userAgent);\n  };\n  Resize.prototype.timeoutHandler = function () {\n    this.tapped = null;\n  };\n  return Resize;\n}();\nexport { Resize };","map":{"version":3,"names":["EventHandler","detach","formatUnit","Browser","closest","Column","ColumnWidthService","events","getScrollBarWidth","parentsUntil","Global","frozenDirection","isChildColumn","applyStickyLeftRightPosition","groupCaptionRowLeftRightPos","isNullOrUndefined","addClass","removeClass","literals","resizeClassList","root","suppress","icon","helper","header","cursor","Resize","parent","tapped","isDblClk","resizeProcess","isDestroyed","widthService","addEventListener","prototype","autoFitColumns","fName","columnName","undefined","length","getColumns","map","x","field","isAutoFitColumns","enableAdaptiveUI","element","classList","add","findColumn","autoFit","newarray","filter","c","headerText","resizeSettings","mode","setWidthToTable","resizeColumn","index","id","gObj","tWidth","headerTable","getHeaderTable","contentTable","getContentTable","footerTable","headerDivTag","contentDivTag","gridContent","footerDivTag","gridFooter","indentWidth","uid","getUidByColumnField","columnIndex","getNormalizedColumnIndex","headerTextClone","querySelector","parentElement","cloneNode","contentTextClone","querySelectorAll","footerTextClone","columnIndexByField","getColumnIndexByField","getFooterContent","getFooterContentTable","indentWidthClone","slice","call","getElementsByClassName","i","parseInt","toString","offsetWidth","detailsElement","detailTemplate","childGrid","contentText","footerText","wHeader","createTable","wFooter","wContent","getCurrentViewRecords","columnbyindex","width","Math","max","colMaxWidth","maxWidth","parseFloat","setColumnWidth","result","some","visible","calcTableWidth","style","isFrozenGrid","enableColumnVirtualization","refreshFrozenScrollbar","tableWidth","contentwidth","getContent","scrollWidth","remove","destroy","gridElement","gridHeader","unwireEvents","removeEventListener","getModuleName","fieldName","column","allowTextWrap","notify","freezeRender","case","isModeChg","refreshResizefrzCols","table","text","tag","myTableDiv","createElement","adaptiveClass","className","cssText","mySubDiv","myTable","attrs","role","myTr","tr","appendChild","document","body","offsetWidthValue","getBoundingClientRect","removeChild","ceil","on","headerRefreshed","refreshHeight","refreshResizePosition","initialEnd","wireEvents","contentReady","refreshHandlers","off","render","setHandlerHeight","getResizeHandlers","offsetHeight","height","getHeaderContent","touchStartEvent","touchResizeStart","dblclick","callAutoFit","e","target","contains","col","getTargetColumn","columns","timer","setTimeout","resizeStart","clearTimeout","_this","allowGrouping","groupSettings","_i","_a","refreshColumnWidth","refreshStackedColumnWidth","parentElementWidth","appendHelper","pageX","getPointX","getFreezeTableName","frozenRight","enableRtl","minMove","minWidth","isDevice","removeHelper","args","trigger","cancel","isEdit","cancelResizeAction","touchEndEvent","resizeEnd","touchMoveEvent","resizing","updateCursor","removeEvents","refresh","getWidth","updateResizeEleHeight","elements","getColData","mousemove","refreshResizeFixedCols","pos","cols","translateX","th","concat","node","getAttribute","getColumnByUid","getVisibleFrozenLeftCount","getIndentCount","getFrozenMode","j","freeze","isFrozen","isRowDragable","freezeRefresh","isAutoFitCol","width_1","frzHdrRefresh","frozenRows","cell","valueX","width_2","columnsRight","aggregates","refreshGroupCaptionRow","capRow","_loop_1","this_1","getParticularCol","summarycell","summaryRows","row","push","w","k","_loop_2","this_2","setHelperHeight","colData","log","onResize","finalColumns","getSubColumns","calulateColumnsWidth","finalColumns_1","updateHelper","isUpdate","columns_1","totalWidth","colWidth","subColumns","allowResizing","content","cTable","scrollHeight","clientHeight","scrollModule","setPadding","overflowY","resizeStop","isFrozenColResized","textWrapRefresh","doubleTapEvent","touches","apply","ele","_b","columns_2","getStackedColumns","stackedColumn","getStackedWidth","action","headerRows","headerRows_1","rect","indexOf","calcPos","left","top","floor","enableVirtualization","firstChild","clientWidth","cls","borderWidth","elem","parentOffset","offset","doc","ownerDocument","offsetParent","documentElement","position","parentNode","nodeType","getUserAgent","userAgent","toLowerCase","test","timeoutHandler"],"sources":["/Users/saleem/Desktop/KClient/Web App/Ver_3.6/User Interface/website_Source files/node_modules/@syncfusion/ej2-grids/src/grid/actions/resize.js"],"sourcesContent":["import { EventHandler, detach, formatUnit, Browser, closest } from '@syncfusion/ej2-base';\nimport { Column } from '../models/column';\nimport { ColumnWidthService } from '../services/width-controller';\nimport * as events from '../base/constant';\nimport { getScrollBarWidth, parentsUntil, Global, frozenDirection, isChildColumn, applyStickyLeftRightPosition, groupCaptionRowLeftRightPos } from '../base/util';\nimport { isNullOrUndefined, addClass, removeClass } from '@syncfusion/ej2-base';\nimport * as literals from '../base/string-literals';\nexport var resizeClassList = {\n    root: 'e-rhandler',\n    suppress: 'e-rsuppress',\n    icon: 'e-ricon',\n    helper: 'e-rhelper',\n    header: 'th.e-headercell',\n    cursor: 'e-rcursor'\n};\n/**\n * `Resize` module is used to handle Resize to fit for columns.\n *\n * @hidden\n * @private\n */\nvar Resize = /** @class */ (function () {\n    /**\n     * Constructor for the Grid resize module\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     * @hidden\n     */\n    function Resize(parent) {\n        this.tapped = false;\n        this.isDblClk = true;\n        /** @hidden */\n        this.resizeProcess = false;\n        this.parent = parent;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.widthService = new ColumnWidthService(parent);\n        this.addEventListener();\n    }\n    /**\n     * Resize by field names.\n     *\n     * @param  {string|string[]} fName - Defines the field name.\n     * @returns {void}\n     */\n    Resize.prototype.autoFitColumns = function (fName) {\n        var columnName = (fName === undefined || fName === null || fName.length <= 0) ?\n            this.parent.getColumns().map(function (x) { return x.field; }) : (typeof fName === 'string') ? [fName] : fName;\n        this.parent.isAutoFitColumns = true;\n        if (this.parent.enableAdaptiveUI) {\n            this.parent.element.classList.add('e-grid-autofit');\n        }\n        this.findColumn(columnName);\n    };\n    Resize.prototype.autoFit = function () {\n        var newarray = this.parent.getColumns().filter(function (c) { return c.autoFit === true; })\n            .map(function (c) { return c.field || c.headerText; });\n        if (newarray.length > 0) {\n            this.autoFitColumns(newarray);\n        }\n        if (this.parent.resizeSettings.mode === 'Auto') {\n            this.widthService.setWidthToTable();\n        }\n    };\n    Resize.prototype.resizeColumn = function (fName, index, id) {\n        var gObj = this.parent;\n        var tWidth = 0;\n        var headerTable = gObj.getHeaderTable();\n        var contentTable = gObj.getContentTable();\n        var footerTable;\n        var headerDivTag = 'e-gridheader';\n        var contentDivTag = literals.gridContent;\n        var footerDivTag = literals.gridFooter;\n        var indentWidth = 0;\n        var uid = id ? id : this.parent.getUidByColumnField(fName);\n        var columnIndex = this.parent.getNormalizedColumnIndex(uid);\n        var headerTextClone = headerTable.querySelector('[e-mappinguid=\"' + uid + '\"]').parentElement.cloneNode(true);\n        var contentTextClone = contentTable.querySelectorAll(\"td.e-rowcell:nth-child(\" + (columnIndex + 1) + \"):not(.e-groupcaption):not(.e-detailcell)\");\n        var footerTextClone;\n        var columnIndexByField = this.parent.getColumnIndexByField(fName);\n        if (!isNullOrUndefined(gObj.getFooterContent())) {\n            footerTable = gObj.getFooterContentTable();\n        }\n        if (footerTable) {\n            footerTextClone = footerTable.querySelectorAll(\"td:nth-child(\" + (columnIndex + 1) + \"):not(.e-groupcaption)\");\n        }\n        var indentWidthClone = [].slice.call(headerTable.querySelector('tr').getElementsByClassName('e-grouptopleftcell'));\n        if (indentWidthClone.length > 0) {\n            for (var i = 0; i < indentWidthClone.length; i++) {\n                indentWidth += indentWidthClone[parseInt(i.toString(), 10)].offsetWidth;\n            }\n        }\n        var detailsElement = contentTable.querySelector('.e-detailrowcollapse') ||\n            contentTable.querySelector('.e-detailrowexpand');\n        if ((this.parent.detailTemplate || this.parent.childGrid) && detailsElement) {\n            indentWidth += detailsElement.offsetWidth;\n        }\n        var headerText = [headerTextClone];\n        var contentText = [];\n        var footerText = [];\n        if (footerTable) {\n            for (var i = 0; i < footerTextClone.length; i++) {\n                footerText[parseInt(i.toString(), 10)] = footerTextClone[parseInt(i.toString(), 10)].cloneNode(true);\n            }\n        }\n        for (var i = 0; i < contentTextClone.length; i++) {\n            contentText[parseInt(i.toString(), 10)] = contentTextClone[parseInt(i.toString(), 10)].cloneNode(true);\n        }\n        var wHeader = this.createTable(headerTable, headerText, headerDivTag);\n        var wFooter = null;\n        var wContent = null;\n        if (gObj.getCurrentViewRecords().length) {\n            wContent = this.createTable(contentTable, contentText, contentDivTag);\n        }\n        if (footerText.length) {\n            wFooter = this.createTable(footerTable, footerText, footerDivTag);\n        }\n        var columnbyindex = gObj.getColumns()[parseInt(columnIndexByField.toString(), 10)];\n        var width = columnbyindex.width = formatUnit(Math.max(wHeader, wContent, wFooter));\n        var colMaxWidth = columnbyindex.maxWidth && parseFloat(columnbyindex.maxWidth.toString());\n        if (parseInt(width, 10) > colMaxWidth) {\n            columnbyindex.width = colMaxWidth;\n        }\n        this.widthService.setColumnWidth(gObj.getColumns()[parseInt(columnIndexByField.toString(), 10)]);\n        var result = gObj.getColumns().some(function (x) { return x.width === null\n            || x.width === undefined || x.width.length <= 0; });\n        if (result === false) {\n            var element = gObj.getColumns();\n            for (var i = 0; i < element.length; i++) {\n                if (element[parseInt(i.toString(), 10)].visible) {\n                    tWidth = tWidth + parseFloat(element[parseInt(i.toString(), 10)].width);\n                }\n            }\n        }\n        var calcTableWidth = tWidth + indentWidth;\n        if (tWidth > 0) {\n            if (this.parent.detailTemplate || this.parent.childGrid) {\n                this.widthService.setColumnWidth(new Column({ width: '30px' }));\n            }\n            if (this.parent.resizeSettings.mode === 'Auto') {\n                calcTableWidth = '100%';\n            }\n            headerTable.style.width = formatUnit(calcTableWidth);\n            contentTable.style.width = formatUnit(calcTableWidth);\n            if (!isNullOrUndefined(footerTable)) {\n                footerTable.style.width = formatUnit(calcTableWidth);\n            }\n        }\n        if (gObj.isFrozenGrid() && gObj.enableColumnVirtualization) {\n            this.widthService.refreshFrozenScrollbar();\n        }\n        var tableWidth = headerTable.offsetWidth;\n        var contentwidth = (gObj.getContent().scrollWidth);\n        if (contentwidth > tableWidth) {\n            headerTable.classList.add('e-tableborder');\n            contentTable.classList.add('e-tableborder');\n        }\n        else {\n            headerTable.classList.remove('e-tableborder');\n            contentTable.classList.remove('e-tableborder');\n        }\n        if (!isNullOrUndefined(footerTable)) {\n            footerTable.classList.add('e-tableborder');\n        }\n    };\n    /**\n     * To destroy the resize\n     *\n     * @returns {void}\n     * @hidden\n     */\n    Resize.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.' + literals.gridHeader) && !gridElement.querySelector('.' + literals.gridContent))) {\n            return;\n        }\n        this.widthService = null;\n        this.unwireEvents();\n        this.removeEventListener();\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} returns the module name\n     * @private\n     */\n    Resize.prototype.getModuleName = function () {\n        return 'resize';\n    };\n    Resize.prototype.findColumn = function (fName) {\n        for (var i = 0; i < fName.length; i++) {\n            var fieldName = fName[parseInt(i.toString(), 10)];\n            var columnIndex = this.parent.getColumnIndexByField(fieldName);\n            var column = this.parent.getColumns()[parseInt(columnIndex.toString(), 10)];\n            if (columnIndex > -1 && !isNullOrUndefined(column) && column.visible === true) {\n                this.resizeColumn(fieldName, columnIndex);\n            }\n        }\n        if (this.parent.allowTextWrap) {\n            this.parent.notify(events.freezeRender, { case: 'refreshHeight', isModeChg: true });\n        }\n        if (this.parent.isFrozenGrid()) {\n            this.refreshResizefrzCols(true, true);\n        }\n    };\n    /**\n     * To create table for autofit\n     *\n     * @param {Element} table - specifies the table\n     * @param {Element[]} text - specifies the text\n     * @param {string} tag - specifies the tag name\n     * @returns {number} returns the number\n     * @hidden\n     */\n    Resize.prototype.createTable = function (table, text, tag) {\n        var myTableDiv = this.parent.createElement('div');\n        var adaptiveClass = this.parent.enableAdaptiveUI ? ' e-bigger' : '';\n        myTableDiv.className = this.parent.element.className + adaptiveClass;\n        myTableDiv.style.cssText = 'display: inline-block;visibility:hidden;position:absolute';\n        var mySubDiv = this.parent.createElement('div');\n        mySubDiv.className = tag;\n        var myTable = this.parent.createElement('table', { attrs: { role: 'grid' } });\n        myTable.className = table.className;\n        myTable.classList.add('e-resizetable');\n        myTable.style.cssText = 'table-layout: auto;width: auto';\n        var myTr = this.parent.createElement('tr');\n        for (var i = 0; i < text.length; i++) {\n            var tr = myTr.cloneNode();\n            tr.className = table.querySelector('tr').className;\n            tr.appendChild(text[parseInt(i.toString(), 10)]);\n            myTable.appendChild(tr);\n        }\n        mySubDiv.appendChild(myTable);\n        myTableDiv.appendChild(mySubDiv);\n        document.body.appendChild(myTableDiv);\n        var offsetWidthValue = myTable.getBoundingClientRect().width;\n        document.body.removeChild(myTableDiv);\n        return Math.ceil(offsetWidthValue);\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    Resize.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.headerRefreshed, this.refreshHeight, this);\n        this.parent.on(events.refreshResizePosition, this.refreshResizePosition, this);\n        this.parent.on(events.initialEnd, this.wireEvents, this);\n        this.parent.on(events.contentReady, this.autoFit, this);\n        this.parent.on(events.refreshHandlers, this.refreshHeight, this);\n        this.parent.on(events.destroy, this.destroy, this);\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    Resize.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.headerRefreshed, this.refreshHeight);\n        this.parent.off(events.refreshResizePosition, this.refreshResizePosition);\n        this.parent.off(events.initialEnd, this.wireEvents);\n        this.parent.off(events.refreshHandlers, this.refreshHeight);\n        this.parent.off(events.destroy, this.destroy);\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    Resize.prototype.render = function () {\n        this.unwireEvents();\n        this.wireEvents();\n        this.setHandlerHeight();\n    };\n    Resize.prototype.refreshHeight = function () {\n        if (this.parent.getHeaderTable()) {\n            var element = this.getResizeHandlers();\n            for (var i = 0; i < element.length; i++) {\n                if (element[parseInt(i.toString(), 10)].parentElement.offsetHeight > 0) {\n                    element[parseInt(i.toString(), 10)].style.height = element[parseInt(i.toString(), 10)].parentElement.offsetHeight + 'px';\n                }\n            }\n            this.setHandlerHeight();\n        }\n    };\n    Resize.prototype.wireEvents = function () {\n        EventHandler.add(this.parent.getHeaderContent(), Browser.touchStartEvent, this.touchResizeStart, this);\n        EventHandler.add(this.parent.getHeaderContent(), events.dblclick, this.callAutoFit, this);\n    };\n    Resize.prototype.unwireEvents = function () {\n        EventHandler.remove(this.parent.getHeaderContent(), Browser.touchStartEvent, this.touchResizeStart);\n        EventHandler.remove(this.parent.getHeaderContent(), events.dblclick, this.callAutoFit);\n    };\n    Resize.prototype.getResizeHandlers = function () {\n        return [].slice.call(this.parent.getHeaderTable().getElementsByClassName(resizeClassList.root));\n    };\n    Resize.prototype.setHandlerHeight = function () {\n        var element = [].slice.call(this.parent.getHeaderTable().getElementsByClassName(resizeClassList.suppress));\n        for (var i = 0; i < element.length; i++) {\n            element[parseInt(i.toString(), 10)].style.height = element[parseInt(i.toString(), 10)].parentElement.offsetHeight + 'px';\n        }\n    };\n    Resize.prototype.callAutoFit = function (e) {\n        if (e.target.classList.contains('e-rhandler')) {\n            var col = this.getTargetColumn(e);\n            if (col.columns) {\n                return;\n            }\n            this.resizeColumn(col.field, this.parent.getNormalizedColumnIndex(col.uid), col.uid);\n            var header = closest(e.target, resizeClassList.header);\n            header.classList.add('e-resized');\n        }\n    };\n    Resize.prototype.touchResizeStart = function (e) {\n        if (!Global.timer) {\n            Global.timer = setTimeout(function () {\n                Global.timer = null;\n            }, 300);\n            return this.resizeStart(e);\n        }\n        else {\n            clearTimeout(Global.timer);\n            Global.timer = null;\n            this.callAutoFit(e);\n        }\n    };\n    Resize.prototype.resizeStart = function (e) {\n        var _this = this;\n        if (e.target.classList.contains('e-rhandler')) {\n            if (!this.helper) {\n                if (this.getScrollBarWidth() === 0) {\n                    this.resizeProcess = true;\n                    if (this.parent.allowGrouping) {\n                        for (var i = 0; i < this.parent.groupSettings.columns.length; i++) {\n                            this.widthService.setColumnWidth(new Column({ width: '30px' }), i);\n                        }\n                    }\n                    for (var _i = 0, _a = this.refreshColumnWidth(); _i < _a.length; _i++) {\n                        var col = _a[_i];\n                        this.widthService.setColumnWidth(col);\n                    }\n                    this.widthService.setWidthToTable();\n                    this.resizeProcess = false;\n                }\n                this.refreshStackedColumnWidth();\n                this.element = e.target;\n                this.parentElementWidth = this.parent.element.getBoundingClientRect().width;\n                this.appendHelper();\n                this.column = this.getTargetColumn(e);\n                this.pageX = this.getPointX(e);\n                if (this.column.getFreezeTableName() === literals.frozenRight) {\n                    if (this.parent.enableRtl) {\n                        this.minMove = (this.column.minWidth ? parseFloat(this.column.minWidth.toString()) : 0)\n                            - parseFloat(isNullOrUndefined(this.column.width) ? '' : this.column.width.toString());\n                    }\n                    else {\n                        this.minMove = parseFloat(isNullOrUndefined(this.column.width) ? '' : this.column.width.toString())\n                            - (this.column.minWidth ? parseFloat(this.column.minWidth.toString()) : 0);\n                    }\n                }\n                else if (this.parent.enableRtl) {\n                    this.minMove = parseFloat(this.column.width.toString())\n                        - (this.column.minWidth ? parseFloat(this.column.minWidth.toString()) : 0);\n                }\n                else {\n                    this.minMove = (this.column.minWidth ? parseFloat(this.column.minWidth.toString()) : 0)\n                        - parseFloat(isNullOrUndefined(this.column.width) ? '' : this.column.width.toString());\n                }\n                this.minMove += this.pageX;\n            }\n            if (Browser.isDevice && !this.helper.classList.contains(resizeClassList.icon)) {\n                this.helper.classList.add(resizeClassList.icon);\n                EventHandler.add(document, Browser.touchStartEvent, this.removeHelper, this);\n                EventHandler.add(this.helper, Browser.touchStartEvent, this.resizeStart, this);\n            }\n            else {\n                var args = { e: e, column: this.column };\n                this.parent.trigger(events.resizeStart, args, function (args) {\n                    if (args.cancel || _this.parent.isEdit) {\n                        _this.cancelResizeAction();\n                        return;\n                    }\n                    EventHandler.add(document, Browser.touchEndEvent, _this.resizeEnd, _this);\n                    EventHandler.add(_this.parent.element, Browser.touchMoveEvent, _this.resizing, _this);\n                    _this.updateCursor('add');\n                });\n            }\n        }\n    };\n    Resize.prototype.cancelResizeAction = function (removeEvents) {\n        if (removeEvents) {\n            EventHandler.remove(this.parent.element, Browser.touchMoveEvent, this.resizing);\n            EventHandler.remove(document, Browser.touchEndEvent, this.resizeEnd);\n            this.updateCursor('remove');\n        }\n        if (Browser.isDevice) {\n            EventHandler.remove(document, Browser.touchStartEvent, this.removeHelper);\n            EventHandler.remove(this.helper, Browser.touchStartEvent, this.resizeStart);\n        }\n        detach(this.helper);\n        this.refresh();\n    };\n    Resize.prototype.getWidth = function (width, minWidth, maxWidth) {\n        if (minWidth && width < minWidth) {\n            return minWidth;\n        }\n        else if ((maxWidth && width > maxWidth)) {\n            return maxWidth;\n        }\n        else {\n            return width;\n        }\n    };\n    Resize.prototype.updateResizeEleHeight = function () {\n        var elements = [].slice.call(this.parent.getHeaderContent().getElementsByClassName('e-rhandler'));\n        for (var i = 0; i < elements.length; i++) {\n            elements[parseInt(i.toString(), 10)].style.height = this.element.parentElement.offsetHeight + 'px';\n        }\n    };\n    Resize.prototype.getColData = function (column, mousemove) {\n        return {\n            width: parseFloat(isNullOrUndefined(this.widthService.getWidth(column)) || this.widthService.getWidth(column) === 'auto' ? '0'\n                : this.widthService.getWidth(column).toString()) + mousemove,\n            minWidth: column.minWidth ? parseFloat(column.minWidth.toString()) : null,\n            maxWidth: column.maxWidth ? parseFloat(column.maxWidth.toString()) : null\n        };\n    };\n    Resize.prototype.refreshResizeFixedCols = function (pos) {\n        var cols = this.parent.getColumns();\n        var translateX = this.parent.enableColumnVirtualization ? this.parent.translateX : 0;\n        var th = [].slice.call(this.parent.getHeaderContent().querySelector('tbody').querySelectorAll('.e-fixedfreeze')).concat([].slice.call(this.parent.getContent().querySelectorAll('.e-fixedfreeze')));\n        for (var i = 0; i < th.length; i++) {\n            var node = th[parseInt(i.toString(), 10)];\n            var column = void 0;\n            if (node.classList.contains('e-summarycell')) {\n                var uid = node.getAttribute('e-mappinguid');\n                column = this.parent.getColumnByUid(uid);\n            }\n            else {\n                var index = parseInt(node.getAttribute('data-colindex'), 10);\n                column = cols[parseInt(index.toString(), 10)];\n            }\n            var width = 0;\n            if (pos === 'Left') {\n                if (this.parent.getVisibleFrozenLeftCount()) {\n                    width = this.parent.getIndentCount() * 30;\n                }\n                else if (this.parent.getFrozenMode() === 'Right') {\n                    width = this.parent.groupSettings.columns.length * 30;\n                }\n                for (var j = 0; j < cols.length; j++) {\n                    if (column.index > cols[parseInt(j.toString(), 10)].index) {\n                        if (column.uid === cols[parseInt(j.toString(), 10)].uid) {\n                            break;\n                        }\n                        if ((cols[parseInt(j.toString(), 10)].freeze === 'Left' || cols[parseInt(j.toString(), 10)].isFrozen) ||\n                            cols[parseInt(j.toString(), 10)].freeze === 'Fixed') {\n                            if (cols[parseInt(j.toString(), 10)].visible) {\n                                width += parseFloat(cols[parseInt(j.toString(), 10)].width.toString());\n                            }\n                        }\n                    }\n                }\n                applyStickyLeftRightPosition(node, ((width === 0 ? width : width - 1) - translateX), this.parent.enableRtl, 'Left');\n            }\n            if (pos === 'Right') {\n                width = this.parent.getFrozenMode() === 'Right' && this.parent.isRowDragable() ? 30 : 0;\n                for (var j = cols.length - 1; j >= 0; j--) {\n                    if (column.uid === cols[parseInt(j.toString(), 10)].uid) {\n                        break;\n                    }\n                    if (cols[parseInt(j.toString(), 10)].freeze === 'Right' || cols[parseInt(j.toString(), 10)].freeze === 'Fixed') {\n                        if (cols[parseInt(j.toString(), 10)].visible) {\n                            width += parseFloat(cols[parseInt(j.toString(), 10)].width.toString());\n                        }\n                    }\n                }\n                applyStickyLeftRightPosition(node, width + translateX, this.parent.enableRtl, 'Right');\n            }\n        }\n    };\n    Resize.prototype.refreshResizePosition = function () {\n        this.refreshResizefrzCols(true);\n    };\n    Resize.prototype.refreshResizefrzCols = function (freezeRefresh, isAutoFitCol) {\n        var _this = this;\n        var translateX = this.parent.enableColumnVirtualization ? this.parent.translateX : 0;\n        if (freezeRefresh || ((this.column.freeze === 'Left' || this.column.isFrozen) ||\n            (this.column.columns && frozenDirection(this.column) === 'Left'))) {\n            var width_1 = this.parent.getIndentCount() * 30;\n            var columns = this.parent.getColumns().filter(function (col) { return col.freeze === 'Left' || col.isFrozen; });\n            if (!freezeRefresh || isAutoFitCol) {\n                this.frzHdrRefresh('Left');\n            }\n            for (var i = 0; i < columns.length; i++) {\n                if (freezeRefresh || (columns[parseInt(i.toString(), 10)].index > this.column.index)) {\n                    var elements = [];\n                    if (this.parent.frozenRows) {\n                        elements = [].slice.call(this.parent.getHeaderContent().querySelectorAll('td[data-colindex=\"' + i + '\"]')).concat([].slice.call(this.parent.getContent().querySelectorAll('td[data-colindex=\"' + i + '\"]')));\n                    }\n                    else {\n                        elements = [].slice.call(this.parent.getContent().querySelectorAll('td[data-colindex=\"' + i + '\"]'));\n                    }\n                    elements.filter(function (cell) {\n                        applyStickyLeftRightPosition(cell, width_1 - translateX, _this.parent.enableRtl, 'Left');\n                    });\n                    if (this.parent.enableColumnVirtualization) {\n                        columns[parseInt(i.toString(), 10)].valueX = width_1;\n                    }\n                }\n                if (columns[parseInt(i.toString(), 10)].visible) {\n                    width_1 += parseFloat(columns[parseInt(i.toString(), 10)].width.toString());\n                }\n            }\n            this.refreshResizeFixedCols('Left');\n        }\n        if (freezeRefresh || (this.column.freeze === 'Right' || (this.column.columns && frozenDirection(this.column) === 'Right'))) {\n            var width_2 = this.parent.getFrozenMode() === 'Right' && this.parent.isRowDragable() ? 30 : 0;\n            var columns = this.parent.getColumns();\n            if (!freezeRefresh || isAutoFitCol) {\n                this.frzHdrRefresh('Right');\n            }\n            var columnsRight = columns.filter(function (col) { return col.freeze === 'Right'; });\n            for (var i = columns.length - 1; i >= columns.length - columnsRight.length; i--) {\n                var elements = [];\n                if (this.parent.frozenRows) {\n                    elements = [].slice.call(this.parent.getHeaderContent().querySelectorAll('td[data-colindex=\"' + i + '\"]')).concat([].slice.call(this.parent.getContent().querySelectorAll('td[data-colindex=\"' + i + '\"]')));\n                }\n                else {\n                    elements = [].slice.call(this.parent.getContent().querySelectorAll('td[data-colindex=\"' + i + '\"]'));\n                }\n                elements.filter(function (cell) {\n                    applyStickyLeftRightPosition(cell, width_2 + translateX, _this.parent.enableRtl, 'Right');\n                });\n                if (this.parent.enableColumnVirtualization) {\n                    columns[parseInt(i.toString(), 10)].valueX = width_2;\n                }\n                if (columns[parseInt(i.toString(), 10)].visible) {\n                    width_2 = width_2 + parseFloat(columns[parseInt(i.toString(), 10)].width.toString());\n                }\n            }\n            this.refreshResizeFixedCols('Right');\n        }\n        if (this.column && (this.column.freeze === 'Fixed' || (this.column.columns && frozenDirection(this.column) === 'Fixed'))) {\n            this.refreshResizeFixedCols('Left');\n            this.refreshResizeFixedCols('Right');\n            this.frzHdrRefresh('Left');\n            this.frzHdrRefresh('Right');\n        }\n        if (this.parent.groupSettings.columns.length && this.parent.aggregates.length &&\n            this.parent.getContent().querySelector('.e-groupcaptionrow')) {\n            this.refreshGroupCaptionRow();\n        }\n    };\n    Resize.prototype.refreshGroupCaptionRow = function () {\n        var capRow = [].slice.call(this.parent.getContent().querySelectorAll('.e-groupcaptionrow'));\n        for (var i = 0; i < capRow.length; i++) {\n            var tr = capRow[parseInt(i.toString(), 10)];\n            if (tr.querySelector('.e-summarycell')) {\n                groupCaptionRowLeftRightPos(tr, this.parent);\n            }\n        }\n    };\n    Resize.prototype.frzHdrRefresh = function (pos) {\n        var _this = this;\n        var translateX = this.parent.enableColumnVirtualization ? this.parent.translateX : 0;\n        if (pos === 'Left') {\n            var tr = [].slice.call(this.parent.getHeaderContent().querySelector('thead').querySelectorAll('tr'));\n            for (var i = 0; i < tr.length; i++) {\n                var th = [].slice.call(tr[parseInt(i.toString(), 10)].querySelectorAll('.e-leftfreeze,.e-fixedfreeze'));\n                var _loop_1 = function (j) {\n                    var node = th[parseInt(j.toString(), 10)];\n                    if (node.classList.contains('e-rowdragheader') || node.classList.contains('e-dragheadercell') ||\n                        node.classList.contains('e-grouptopleftcell')) {\n                        return \"continue\";\n                    }\n                    var column = this_1.getParticularCol(node);\n                    var cols = this_1.parent.getColumns();\n                    var width = 0;\n                    var summarycell = [];\n                    if (this_1.parent.aggregates.length && this_1.parent.getFooterContent()) {\n                        if (this_1.parent.getContent().querySelectorAll('.e-summaryrow').length) {\n                            var summaryRows = [].slice.call(this_1.parent.getContent().querySelectorAll('.e-summaryrow'));\n                            summaryRows.filter(function (row) {\n                                summarycell.push(row.querySelector('[e-mappinguid=\"' + column.uid + '\"]'));\n                            });\n                        }\n                        summarycell = summarycell.concat([].slice.call(this_1.parent.getFooterContent().querySelectorAll('[e-mappinguid=\"' + column.uid + '\"]')));\n                    }\n                    if (node.classList.contains('e-fixedfreeze')) {\n                        if (this_1.parent.getVisibleFrozenLeftCount()) {\n                            width = this_1.parent.getIndentCount() * 30;\n                        }\n                        else if (this_1.parent.getFrozenMode() === 'Right') {\n                            width = this_1.parent.groupSettings.columns.length * 30;\n                        }\n                        for (var w = 0; w < cols.length; w++) {\n                            if (column.index > cols[parseInt(w.toString(), 10)].index) {\n                                if (column.uid === cols[parseInt(w.toString(), 10)].uid) {\n                                    break;\n                                }\n                                if ((cols[parseInt(w.toString(), 10)].freeze === 'Left' || cols[parseInt(w.toString(), 10)].isFrozen) ||\n                                    cols[parseInt(w.toString(), 10)].freeze === 'Fixed') {\n                                    if (cols[parseInt(w.toString(), 10)].visible) {\n                                        width += parseInt(cols[parseInt(w.toString(), 10)].width.toString(), 10);\n                                    }\n                                }\n                            }\n                        }\n                        if (summarycell && summarycell.length) {\n                            summarycell.filter(function (cell) {\n                                applyStickyLeftRightPosition(cell, width - translateX, _this.parent.enableRtl, 'Left');\n                            });\n                        }\n                        applyStickyLeftRightPosition(node, ((width === 0 ? width : width - 1) - translateX), this_1.parent.enableRtl, 'Left');\n                    }\n                    else {\n                        width = this_1.parent.getIndentCount() * 30;\n                        if (column.index === 0) {\n                            if (summarycell && summarycell.length) {\n                                summarycell.filter(function (cell) {\n                                    applyStickyLeftRightPosition(cell, width - translateX, _this.parent.enableRtl, 'Left');\n                                });\n                            }\n                            applyStickyLeftRightPosition(node, width - translateX, this_1.parent.enableRtl, 'Left');\n                            if (this_1.parent.enableColumnVirtualization) {\n                                column.valueX = width;\n                            }\n                        }\n                        else {\n                            for (var k = 0; k < cols.length; k++) {\n                                if (column.index < cols[parseInt(k.toString(), 10)].index ||\n                                    column.uid === cols[parseInt(k.toString(), 10)].uid) {\n                                    break;\n                                }\n                                if (cols[parseInt(k.toString(), 10)].visible) {\n                                    width += parseInt(cols[parseInt(k.toString(), 10)].width.toString(), 10);\n                                }\n                            }\n                            if (summarycell && summarycell.length) {\n                                summarycell.filter(function (cell) {\n                                    applyStickyLeftRightPosition(cell, width - translateX, _this.parent.enableRtl, 'Left');\n                                });\n                            }\n                            applyStickyLeftRightPosition(node, width - translateX, this_1.parent.enableRtl, 'Left');\n                            if (this_1.parent.enableColumnVirtualization) {\n                                column.valueX = width;\n                            }\n                        }\n                    }\n                };\n                var this_1 = this;\n                for (var j = 0; j < th.length; j++) {\n                    _loop_1(j);\n                }\n            }\n        }\n        if (pos === 'Right') {\n            var tr = [].slice.call(this.parent.getHeaderContent().querySelector('thead').querySelectorAll('tr'));\n            for (var i = 0; i < tr.length; i++) {\n                var th = [].slice.call(tr[parseInt(i.toString(), 10)].querySelectorAll('.e-rightfreeze, .e-fixedfreeze'));\n                var _loop_2 = function (j) {\n                    var node = th[parseInt(j.toString(), 10)];\n                    var column = this_2.getParticularCol(node);\n                    var cols = this_2.parent.getColumns();\n                    var width = 0;\n                    var summarycell = [];\n                    if (this_2.parent.aggregates.length && this_2.parent.getFooterContent()) {\n                        if (this_2.parent.getContent().querySelectorAll('.e-summaryrow').length) {\n                            var summaryRows = [].slice.call(this_2.parent.getContent().querySelectorAll('.e-summaryrow'));\n                            summaryRows.filter(function (row) {\n                                summarycell.push(row.querySelector('[e-mappinguid=\"' + column.uid + '\"]'));\n                            });\n                        }\n                        summarycell = summarycell.concat([].slice.call(this_2.parent.getFooterContent().querySelectorAll('[e-mappinguid=\"' + column.uid + '\"]')));\n                    }\n                    if (node.classList.contains('e-fixedfreeze')) {\n                        width = this_2.parent.getFrozenMode() === 'Right' && this_2.parent.isRowDragable() ? 30 : 0;\n                        for (var w = cols.length - 1; w >= 0; w--) {\n                            if (column.index < cols[parseInt(w.toString(), 10)].index) {\n                                if ((column.columns && isChildColumn(column, cols[parseInt(w.toString(), 10)].uid)) ||\n                                    column.index > cols[parseInt(w.toString(), 10)].index) {\n                                    break;\n                                }\n                                if (cols[parseInt(w.toString(), 10)].freeze === 'Right' ||\n                                    cols[parseInt(w.toString(), 10)].freeze === 'Fixed') {\n                                    if (cols[parseInt(w.toString(), 10)].visible) {\n                                        width += parseFloat(cols[parseInt(w.toString(), 10)].width.toString());\n                                    }\n                                }\n                            }\n                        }\n                        if (summarycell.length) {\n                            summarycell.filter(function (cell) {\n                                applyStickyLeftRightPosition(cell, width + translateX, _this.parent.enableRtl, 'Right');\n                            });\n                        }\n                        applyStickyLeftRightPosition(node, width + translateX, this_2.parent.enableRtl, 'Right');\n                    }\n                    else {\n                        width = this_2.parent.getFrozenMode() === 'Right' && this_2.parent.isRowDragable() ? 30 : 0;\n                        for (var k = cols.length - 1; k >= 0; k--) {\n                            if ((column.columns && isChildColumn(column, cols[parseInt(k.toString(), 10)].uid)) ||\n                                column.index > cols[parseInt(k.toString(), 10)].index ||\n                                column.uid === cols[parseInt(k.toString(), 10)].uid) {\n                                break;\n                            }\n                            if (cols[parseInt(k.toString(), 10)].visible) {\n                                width += parseInt(cols[parseInt(k.toString(), 10)].width.toString(), 10);\n                            }\n                        }\n                        if (summarycell.length) {\n                            summarycell.filter(function (cell) {\n                                applyStickyLeftRightPosition(cell, width + translateX, _this.parent.enableRtl, 'Right');\n                            });\n                        }\n                        applyStickyLeftRightPosition(node, width + translateX, this_2.parent.enableRtl, 'Right');\n                        if (this_2.parent.enableColumnVirtualization) {\n                            column.valueX = width;\n                        }\n                    }\n                };\n                var this_2 = this;\n                for (var j = th.length - 1; j >= 0; j--) {\n                    _loop_2(j);\n                }\n            }\n        }\n    };\n    Resize.prototype.getParticularCol = function (node) {\n        var uid = node.classList.contains('e-filterbarcell') ? node.getAttribute('e-mappinguid') :\n            node.querySelector('[e-mappinguid]').getAttribute('e-mappinguid');\n        return this.parent.getColumnByUid(uid);\n    };\n    Resize.prototype.resizing = function (e) {\n        if (isNullOrUndefined(this.column)) {\n            return;\n        }\n        if (this.parent.isFrozenGrid()) {\n            this.refreshResizefrzCols();\n        }\n        var offsetWidth = 0;\n        if (isNullOrUndefined(this.column)) {\n            offsetWidth = parentsUntil(this.element, 'th').offsetWidth;\n        }\n        if (this.parent.allowTextWrap) {\n            this.updateResizeEleHeight();\n            this.setHelperHeight();\n        }\n        var pageX = this.getPointX(e);\n        var mousemove = this.parent.enableRtl ? -(pageX - this.pageX) : (pageX - this.pageX);\n        var colData = this.getColData(this.column, mousemove);\n        if (!colData.width) {\n            colData.width = closest(this.element, 'th').offsetWidth;\n        }\n        var width = this.getWidth(colData.width, colData.minWidth, colData.maxWidth);\n        this.parent.log('resize_min_max', { column: this.column, width: width });\n        if (((!this.parent.enableRtl && this.minMove >= pageX) || (this.parent.enableRtl && this.minMove <= pageX))) {\n            width = this.column.minWidth ? parseFloat(this.column.minWidth.toString()) : 10;\n            this.pageX = pageX = this.minMove;\n        }\n        if (width !== parseFloat(isNullOrUndefined(this.column.width) || this.column.width === 'auto' ?\n            offsetWidth.toString() : this.column.width.toString())) {\n            this.pageX = pageX;\n            this.column.width = formatUnit(width);\n            var args = {\n                e: e,\n                column: this.column\n            };\n            this.parent.trigger(events.onResize, args);\n            if (args.cancel) {\n                this.cancelResizeAction(true);\n                return;\n            }\n            var columns = [this.column];\n            var finalColumns = [this.column];\n            if (this.column.columns) {\n                columns = this.getSubColumns(this.column, []);\n                columns = this.calulateColumnsWidth(columns, false, mousemove);\n                finalColumns = this.calulateColumnsWidth(columns, true, mousemove);\n            }\n            this.resizeProcess = true;\n            for (var _i = 0, finalColumns_1 = finalColumns; _i < finalColumns_1.length; _i++) {\n                var col = finalColumns_1[_i];\n                this.widthService.setColumnWidth(col, null, 'resize');\n            }\n            this.resizeProcess = false;\n            this.updateHelper();\n        }\n        this.isDblClk = false;\n    };\n    Resize.prototype.calulateColumnsWidth = function (columns, isUpdate, mousemove) {\n        var finalColumns = [];\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var col = columns_1[_i];\n            var totalWidth = 0;\n            for (var i = 0; i < columns.length; i++) {\n                totalWidth += parseFloat(columns[parseInt(i.toString(), 10)].width.toString());\n            }\n            var colData = this.getColData(col, (parseFloat(col.width)) * mousemove / totalWidth);\n            var colWidth = this.getWidth(colData.width, colData.minWidth, colData.maxWidth);\n            if ((colWidth !== parseFloat(col.width.toString()))) {\n                if (isUpdate) {\n                    col.width = formatUnit(colWidth < 1 ? 1 : colWidth);\n                }\n                finalColumns.push(col);\n            }\n        }\n        return finalColumns;\n    };\n    Resize.prototype.getSubColumns = function (column, subColumns) {\n        for (var _i = 0, _a = column.columns; _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (col.visible !== false && col.allowResizing) {\n                if (col.columns) {\n                    this.getSubColumns(col, subColumns);\n                }\n                else {\n                    subColumns.push(col);\n                }\n            }\n        }\n        return subColumns;\n    };\n    Resize.prototype.resizeEnd = function (e) {\n        if (!this.helper || this.parent.isDestroyed) {\n            return;\n        }\n        var gObj = this.parent;\n        EventHandler.remove(this.parent.element, Browser.touchMoveEvent, this.resizing);\n        EventHandler.remove(document, Browser.touchEndEvent, this.resizeEnd);\n        this.updateCursor('remove');\n        detach(this.helper);\n        var args = { e: e, column: this.column };\n        var content = this.parent.getContent().querySelector('.' + literals.content);\n        var cTable = content;\n        if (cTable.scrollHeight > cTable.clientHeight) {\n            this.parent.scrollModule.setPadding();\n            cTable.style.overflowY = 'scroll';\n        }\n        this.parent.trigger(events.resizeStop, args);\n        closest(this.element, '.e-headercell').classList.add('e-resized');\n        this.isFrozenColResized = false;\n        if (this.parent.allowTextWrap) {\n            this.updateResizeEleHeight();\n            this.parent.notify(events.textWrapRefresh, { case: 'textwrap' });\n        }\n        var headerTable = gObj.getHeaderTable();\n        var contentTable = gObj.getContentTable();\n        var footerTable;\n        if (!isNullOrUndefined(gObj.getFooterContent())) {\n            footerTable = gObj.getFooterContentTable();\n        }\n        var tableWidth = headerTable.offsetWidth;\n        var contentwidth = (gObj.getContent().scrollWidth);\n        if (contentwidth > tableWidth) {\n            addClass([headerTable, contentTable], ['e-tableborder']);\n        }\n        else {\n            removeClass([headerTable, contentTable], ['e-tableborder']);\n        }\n        if (!isNullOrUndefined(footerTable)) {\n            footerTable.classList.add('e-tableborder');\n        }\n        this.refresh();\n        this.doubleTapEvent(e);\n        this.isDblClk = true;\n    };\n    Resize.prototype.getPointX = function (e) {\n        if (e.touches && e.touches.length) {\n            return e.touches[0].pageX;\n        }\n        else {\n            return e.pageX;\n        }\n    };\n    Resize.prototype.refreshColumnWidth = function () {\n        var columns = this.parent.getColumns();\n        for (var _i = 0, _a = [].slice.apply(this.parent.getHeaderContent().querySelectorAll('th.e-headercell')); _i < _a.length; _i++) {\n            var ele = _a[_i];\n            for (var _b = 0, columns_2 = columns; _b < columns_2.length; _b++) {\n                var column = columns_2[_b];\n                if (ele.querySelector('[e-mappinguid]') &&\n                    ele.querySelector('[e-mappinguid]').getAttribute('e-mappinguid') === column.uid && column.visible) {\n                    column.width = ele.getBoundingClientRect().width;\n                    break;\n                }\n            }\n        }\n        return columns;\n    };\n    Resize.prototype.refreshStackedColumnWidth = function () {\n        for (var _i = 0, _a = this.parent.getStackedColumns(this.parent.columns); _i < _a.length; _i++) {\n            var stackedColumn = _a[_i];\n            stackedColumn.width = this.getStackedWidth(stackedColumn, 0);\n        }\n    };\n    Resize.prototype.getStackedWidth = function (column, width) {\n        for (var _i = 0, _a = column.columns; _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (col.visible !== false) {\n                if (col.columns) {\n                    width = this.getStackedWidth(col, width);\n                }\n                else {\n                    width += parseFloat(col.width.toString());\n                }\n            }\n        }\n        return width;\n    };\n    Resize.prototype.getTargetColumn = function (e) {\n        var cell = closest(e.target, resizeClassList.header);\n        cell = cell.querySelector('.e-headercelldiv') || cell.querySelector('.e-stackedheadercelldiv');\n        var uid = cell.getAttribute('e-mappinguid');\n        return this.parent.getColumnByUid(uid);\n    };\n    Resize.prototype.updateCursor = function (action) {\n        var headerRows = [].slice.call(this.parent.getHeaderContent().querySelectorAll('th'));\n        headerRows.push(this.parent.element);\n        for (var _i = 0, headerRows_1 = headerRows; _i < headerRows_1.length; _i++) {\n            var row = headerRows_1[_i];\n            row.classList[\"\" + action](resizeClassList.cursor);\n        }\n    };\n    Resize.prototype.refresh = function () {\n        this.column = null;\n        this.pageX = null;\n        this.element = null;\n        this.helper = null;\n    };\n    Resize.prototype.appendHelper = function () {\n        this.helper = this.parent.createElement('div', {\n            className: resizeClassList.helper\n        });\n        this.parent.element.appendChild(this.helper);\n        this.setHelperHeight();\n    };\n    Resize.prototype.setHelperHeight = function () {\n        var height = this.parent.getContent().offsetHeight - this.getScrollBarWidth();\n        var rect = closest(this.element, resizeClassList.header);\n        var tr = [].slice.call(this.parent.getHeaderContent().querySelectorAll('tr'));\n        for (var i = tr.indexOf(rect.parentElement); i < tr.length && i > -1; i++) {\n            height += tr[parseInt(i.toString(), 10)].offsetHeight;\n        }\n        var pos = this.calcPos(rect);\n        pos.left += (this.parent.enableRtl ? 0 - 1 : rect.offsetWidth - 2);\n        this.helper.style.cssText = 'height: ' + height + 'px; top: ' + pos.top + 'px; left:' + Math.floor(pos.left) + 'px;';\n        if (this.parent.enableVirtualization) {\n            this.helper.classList.add('e-virtual-rhandler');\n        }\n    };\n    Resize.prototype.getScrollBarWidth = function (height) {\n        var ele = this.parent.getContent().firstChild;\n        return (ele.scrollHeight > ele.clientHeight && height) ||\n            ele.scrollWidth > ele.clientWidth ? getScrollBarWidth() : 0;\n    };\n    Resize.prototype.removeHelper = function (e) {\n        var cls = e.target.classList;\n        if (!(cls.contains(resizeClassList.root) || cls.contains(resizeClassList.icon)) && this.helper) {\n            EventHandler.remove(document, Browser.touchStartEvent, this.removeHelper);\n            EventHandler.remove(this.helper, Browser.touchStartEvent, this.resizeStart);\n            detach(this.helper);\n            this.refresh();\n        }\n    };\n    Resize.prototype.updateHelper = function () {\n        var rect = closest(this.element, resizeClassList.header);\n        var left;\n        left = Math.floor(this.calcPos(rect).left + (this.parent.enableRtl ? 0 - 1 : rect.offsetWidth - 2));\n        var borderWidth = 2; // to maintain the helper inside of grid element.\n        if (left > this.parentElementWidth) {\n            left = this.parentElementWidth - borderWidth;\n        }\n        this.helper.style.left = left + 'px';\n    };\n    Resize.prototype.calcPos = function (elem) {\n        var parentOffset = {\n            top: 0,\n            left: 0\n        };\n        var offset = elem.getBoundingClientRect();\n        var doc = elem.ownerDocument;\n        var offsetParent = parentsUntil(elem, 'e-grid') || doc.documentElement;\n        while (offsetParent &&\n            (offsetParent === doc.body || offsetParent === doc.documentElement) &&\n            offsetParent.style.position === 'static') {\n            offsetParent = offsetParent.parentNode;\n        }\n        if (offsetParent && offsetParent !== elem && offsetParent.nodeType === 1) {\n            parentOffset = offsetParent.getBoundingClientRect();\n        }\n        return {\n            top: offset.top - parentOffset.top,\n            left: offset.left - parentOffset.left\n        };\n    };\n    Resize.prototype.doubleTapEvent = function (e) {\n        var _this = this;\n        if (this.getUserAgent() && this.isDblClk) {\n            if (!this.tapped) {\n                this.tapped = setTimeout(function () {\n                    _this.tapped = null;\n                }, 300);\n            }\n            else {\n                clearTimeout(this.tapped);\n                this.callAutoFit(e);\n                this.tapped = null;\n            }\n        }\n    };\n    Resize.prototype.getUserAgent = function () {\n        var userAgent = Browser.userAgent.toLowerCase();\n        return /iphone|ipod|ipad/.test(userAgent);\n    };\n    Resize.prototype.timeoutHandler = function () {\n        this.tapped = null;\n    };\n    return Resize;\n}());\nexport { Resize };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}