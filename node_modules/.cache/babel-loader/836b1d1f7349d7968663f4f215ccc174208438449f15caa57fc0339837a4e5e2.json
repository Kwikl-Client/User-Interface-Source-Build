{"ast":null,"code":"/* eslint-disable */\nimport { AjaxHandler } from '../index';\nimport { createElement, isNullOrUndefined } from '@syncfusion/ej2-base';\n/**\n * The `ThumbnailView` module is used to handle thumbnail view navigation of PDF viewer.\n */\nvar ThumbnailView = /** @class */function () {\n  /**\n   * @param pdfViewer\n   * @param pdfViewerBase\n   * @param pdfViewer\n   * @param pdfViewerBase\n   * @private\n   */\n  function ThumbnailView(pdfViewer, pdfViewerBase) {\n    var _this = this;\n    this.thumbnailLimit = 30;\n    this.thumbnailThreshold = 50;\n    this.thumbnailTopMargin = 10;\n    /**\n     * @private\n     */\n    this.isThumbnailClicked = false;\n    /**\n     * @param event\n     * @private\n     */\n    this.thumbnailClick = function (event, isKeyboard) {\n      var proxy = _this;\n      var pageNumber = proxy.getPageNumberFromID(event.srcElement.id);\n      if (proxy.previousElement) {\n        proxy.previousElement.classList.remove('e-pv-thumbnail-selection');\n        proxy.previousElement.classList.remove('e-pv-thumbnail-focus');\n        proxy.previousElement.classList.add('e-pv-thumbnail-selection-ring');\n      }\n      if (event.srcElement.parentElement.id === proxy.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n        proxy.setSelectionStyle(event.srcElement.parentElement);\n        proxy.previousElement = event.srcElement.parentElement;\n      } else if (event.srcElement.id === proxy.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n        proxy.setSelectionStyle(event.srcElement);\n        proxy.previousElement = event.srcElement;\n      }\n      proxy.pdfViewer.fireThumbnailClick(pageNumber + 1);\n      proxy.isThumbnailClicked = true;\n      proxy.goToThumbnailPage(pageNumber + 1);\n      if (!isKeyboard) {\n        proxy.pdfViewerBase.focusViewerContainer();\n      }\n      if (_this.pdfViewer.annotationModule && _this.pdfViewer.annotationModule.inkAnnotationModule) {\n        // eslint-disable-next-line\n        var currentPageNumber = parseInt(_this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);\n        _this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(currentPageNumber);\n      }\n    };\n    /**\n     * @param event\n     * @private\n     */\n    this.thumbnailKeydown = function (event) {\n      if (event && event.key === \"Enter\" || event.key === \" \") {\n        _this.thumbnailClick(event, true);\n        event.preventDefault();\n        event.stopPropagation();\n      }\n    };\n    /**\n     * @param event\n     * @private\n     */\n    this.thumbnailMouseOver = function (event) {\n      var proxy = _this;\n      var pageNumber = proxy.getPageNumberFromID(event.srcElement.id);\n      if (event.srcElement.id === proxy.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n        proxy.setMouseOverStyle(event.srcElement);\n      } else if (event.srcElement.id === proxy.pdfViewer.element.id + '_thumbnail_image_' + pageNumber) {\n        proxy.setMouseOverStyle(event.srcElement.parentElement);\n      }\n    };\n    /**\n     * @param event\n     * @private\n     */\n    this.thumbnailMouseLeave = function (event) {\n      var proxy = _this;\n      var pageNumber = proxy.getPageNumberFromID(event.srcElement.id);\n      if (event.srcElement.parentElement.id === proxy.pdfViewer.element.id + '_thumbnail_view') {\n        proxy.setMouseLeaveStyle(event.srcElement.children[0].children[0]);\n      } else if (event.srcElement.parentElement.id === proxy.pdfViewer.element.id + '_thumbnail_' + pageNumber) {\n        proxy.setMouseLeaveStyle(event.srcElement.parentElement.children[0]);\n      }\n    };\n    this.pdfViewer = pdfViewer;\n    this.pdfViewerBase = pdfViewerBase;\n  }\n  /**\n   * @private\n   */\n  ThumbnailView.prototype.createThumbnailContainer = function () {\n    // eslint-disable-next-line max-len\n    this.thumbnailView = createElement('div', {\n      id: this.pdfViewer.element.id + '_thumbnail_view',\n      className: 'e-pv-thumbnail-view e-pv-thumbnail-row'\n    });\n    this.pdfViewerBase.navigationPane.sideBarContent.appendChild(this.thumbnailView);\n  };\n  /**\n   * Open the thumbnail pane of the PdfViewer.\n   *\n   * @returns void\n   */\n  ThumbnailView.prototype.openThumbnailPane = function () {\n    if (this.pdfViewerBase.navigationPane) {\n      this.pdfViewerBase.navigationPane.openThumbnailPane();\n    }\n  };\n  /**\n   * Close the thumbnail pane of the PdfViewer.\n   *\n   * @returns void\n   */\n  ThumbnailView.prototype.closeThumbnailPane = function () {\n    if (this.pdfViewerBase.navigationPane) {\n      this.pdfViewerBase.navigationPane.closeThumbnailPane();\n    }\n  };\n  ;\n  /**\n   * @private\n   */\n  // eslint-disable-next-line\n  ThumbnailView.prototype.createRequestForThumbnails = function () {\n    var proxy = this;\n    // eslint-disable-next-line\n    var isIE = !!document.documentMode;\n    if (!isIE) {\n      // eslint-disable-next-line\n      return new Promise(\n      // eslint-disable-next-line\n      function (renderThumbnailImage, reject) {\n        proxy.requestCreation(proxy);\n      });\n    } else {\n      this.requestCreation(proxy);\n      return null;\n    }\n  };\n  ThumbnailView.prototype.requestCreation = function (proxy) {\n    // Removed the condition to skip multiple request for thumbnail image.\n    proxy.startIndex = proxy.thumbnailLimit;\n    // eslint-disable-next-line max-len\n    proxy.thumbnailLimit = proxy.startIndex + proxy.thumbnailThreshold < proxy.pdfViewer.pageCount ? proxy.startIndex + proxy.thumbnailThreshold : proxy.pdfViewer.pageCount;\n    var digitalSignaturePresent = false;\n    for (var i = proxy.startIndex; i < proxy.thumbnailLimit; i++) {\n      if (proxy.pdfViewerBase.digitalSignaturePresent(i)) {\n        digitalSignaturePresent = true;\n      }\n    }\n    var digitalSignatureList = \"\";\n    if (digitalSignaturePresent) {\n      digitalSignatureList = proxy.pdfViewerBase.digitalSignaturePages.toString();\n    }\n    // eslint-disable-next-line max-len\n    var jsonObject = {\n      startPage: proxy.startIndex.toString(),\n      endPage: proxy.thumbnailLimit.toString(),\n      sizeX: \"99.7\",\n      sizeY: \"141\",\n      hashId: proxy.pdfViewerBase.hashId,\n      action: 'RenderThumbnailImages',\n      elementId: proxy.pdfViewer.element.id,\n      uniqueId: proxy.pdfViewerBase.documentId,\n      digitalSignaturePresent: digitalSignaturePresent,\n      digitalSignaturePageList: digitalSignatureList\n    };\n    if (this.pdfViewerBase.jsonDocumentId) {\n      // eslint-disable-next-line\n      jsonObject.documentId = this.pdfViewerBase.jsonDocumentId;\n    }\n    if (!this.pdfViewerBase.clientSideRendering) {\n      this.thumbnailRequestHandler = new AjaxHandler(this.pdfViewer);\n      this.thumbnailRequestHandler.url = proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.renderThumbnail;\n      this.thumbnailRequestHandler.responseType = 'json';\n      if (proxy.thumbnailLimit > 0 && !isNullOrUndefined(proxy.pdfViewerBase.hashId)) {\n        this.thumbnailRequestHandler.send(jsonObject);\n      }\n      // eslint-disable-next-line\n      this.thumbnailRequestHandler.onSuccess = function (result) {\n        // eslint-disable-next-line\n        var data = result.data;\n        var redirect = proxy.pdfViewerBase.checkRedirection(data);\n        if (!redirect) {\n          proxy.updateThumbnailCollection(data);\n        }\n      };\n      // eslint-disable-next-line\n      this.thumbnailRequestHandler.onFailure = function (result) {\n        proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.renderThumbnail);\n      };\n      // eslint-disable-next-line\n      this.thumbnailRequestHandler.onError = function (result) {\n        proxy.pdfViewerBase.openNotificationPopup();\n        proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.renderThumbnail);\n      };\n    } else {\n      for (var pageIndex = proxy.startIndex; pageIndex < proxy.thumbnailLimit; pageIndex++) {\n        this.pdfViewerBase.pdfViewerRunner.postMessage({\n          pageIndex: pageIndex,\n          message: 'renderThumbnail'\n        });\n      }\n    }\n  };\n  /**\n   * @private\n   */\n  ThumbnailView.prototype.thumbnailOnMessage = function (event) {\n    if (event.data.message === 'renderThumbnail') {\n      var canvas = document.createElement('canvas');\n      var _a = event.data,\n        value = _a.value,\n        width = _a.width,\n        height = _a.height,\n        pageIndex = _a.pageIndex;\n      canvas.width = width;\n      canvas.height = height;\n      var canvasContext = canvas.getContext('2d');\n      var imageData = canvasContext.createImageData(width, height);\n      imageData.data.set(value);\n      canvasContext.putImageData(imageData, 0, 0);\n      var imageUrl = canvas.toDataURL();\n      var data = {\n        thumbnailImage: imageUrl,\n        startPage: this.startIndex,\n        endPage: this.thumbnailLimit,\n        uniqueId: this.pdfViewerBase.documentId,\n        pageIndex: pageIndex\n      };\n      this.updateThumbnailCollection(data);\n    }\n  };\n  /**\n  * @param jsonData\n  * @private\n  */\n  // eslint-disable-next-line\n  ThumbnailView.prototype.updateThumbnailCollection = function (data) {\n    if (data) {\n      var proxy = this;\n      if (typeof data !== 'object') {\n        try {\n          data = JSON.parse(data);\n        } catch (error) {\n          proxy.pdfViewerBase.onControlError(500, data, proxy.pdfViewer.serverActionSettings.renderThumbnail);\n          data = null;\n        }\n      }\n      if (data && data.uniqueId === proxy.pdfViewerBase.documentId) {\n        proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.renderThumbnail, data);\n        proxy.renderThumbnailImage(data);\n        if (proxy.pdfViewer.isThumbnailViewOpen) {\n          proxy.pdfViewerBase.navigationPane.isThumbnailOpen = true;\n          // eslint-disable-next-line max-len\n          proxy.pdfViewerBase.navigationPane.sideBarTitle.textContent = proxy.pdfViewer.localeObj.getConstant('Page Thumbnails');\n          document.getElementById(proxy.pdfViewer.element.id + '_thumbnail_view').style.display = 'flex';\n          var bookmarkContent = proxy.pdfViewer.element.querySelector('.e-pv-bookmark-view');\n          if (bookmarkContent) {\n            bookmarkContent.style.display = 'none';\n          }\n          proxy.pdfViewerBase.navigationPane.setThumbnailSelectionIconTheme();\n          proxy.pdfViewerBase.navigationPane.updateViewerContainerOnExpand();\n          proxy.pdfViewerBase.navigationPane.isBookmarkOpen = false;\n        }\n      }\n    }\n  };\n  /**\n   * @param pageNumber\n   * @private\n   */\n  ThumbnailView.prototype.gotoThumbnailImage = function (pageNumber) {\n    var shouldScroll = this.checkThumbnailScroll(pageNumber);\n    if (this.thumbnailView) {\n      var thumbnailChild = this.thumbnailView.children[pageNumber];\n      if (thumbnailChild) {\n        var thumbnailDiv = thumbnailChild.children[0];\n        var offsetTop = void 0;\n        if (shouldScroll) {\n          if (thumbnailDiv.offsetTop <= 0) {\n            offsetTop = thumbnailDiv.parentElement.offsetTop + thumbnailDiv.clientTop - this.thumbnailTopMargin;\n          } else {\n            offsetTop = thumbnailDiv.offsetTop + thumbnailDiv.clientTop - this.thumbnailTopMargin;\n          }\n          this.pdfViewerBase.navigationPane.sideBarContent.scrollTop = offsetTop;\n        }\n        if (!this.isThumbnailClicked) {\n          if (this.previousElement) {\n            this.previousElement.classList.remove('e-pv-thumbnail-selection');\n            this.previousElement.classList.remove('e-pv-thumbnail-focus');\n            this.previousElement.classList.remove('e-pv-thumbnail-hover');\n            this.previousElement.classList.add('e-pv-thumbnail-selection-ring');\n          }\n          this.setFocusStyle(thumbnailDiv, pageNumber);\n        }\n        this.previousElement = thumbnailDiv.children[0];\n      }\n    }\n  };\n  ThumbnailView.prototype.checkThumbnailScroll = function (pageNumber) {\n    var shouldScroll = false;\n    if (this.thumbnailView) {\n      var visibleThumbs = this.getVisibleThumbs();\n      var numVisibleThumbs = visibleThumbs.views.length;\n      // if the thumbnail isn't currently visible, scroll it into view.\n      if (numVisibleThumbs > 0) {\n        var visibleFirstPageID = this.getPageNumberFromID(visibleThumbs.first.id);\n        // account for only one thumbnail being visible.\n        // eslint-disable-next-line max-len\n        var visibleLastPageID = numVisibleThumbs > 1 ? this.getPageNumberFromID(visibleThumbs.last.id) : visibleFirstPageID;\n        if (pageNumber <= visibleFirstPageID || pageNumber >= visibleLastPageID) {\n          shouldScroll = true;\n        } else {\n          // eslint-disable-next-line\n          visibleThumbs.views.some(function (view) {\n            var pageID = view.id.split('_');\n            var thumbPageNumber = pageID[pageID.length - 1];\n            // eslint-disable-next-line radix\n            if (parseInt(thumbPageNumber) !== pageNumber) {\n              return false;\n            }\n            shouldScroll = view.percent < 100 && view.view.offsetWidth > view.view.offsetHeight && view.percent < 97;\n            return true;\n          });\n        }\n      }\n    }\n    return shouldScroll;\n  };\n  ThumbnailView.prototype.getPageNumberFromID = function (pageId) {\n    var pageID = pageId.split('_');\n    var pageNumber = pageID[pageID.length - 1];\n    // eslint-disable-next-line radix\n    return parseInt(pageNumber);\n  };\n  ThumbnailView.prototype.setFocusStyle = function (thumbnail, pageNumber) {\n    if (thumbnail.children[0].id === this.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n      this.setMouseFocusStyle(thumbnail.children[0]);\n    }\n  };\n  // eslint-disable-next-line\n  ThumbnailView.prototype.renderThumbnailImage = function (data) {\n    if (this.thumbnailView) {\n      this.pdfViewerBase.clientSideRendering ? this.renderClientThumbnailImage(data) : this.renderServerThumbnailImage(data);\n    }\n    this.pdfViewerBase.navigationPane.enableThumbnailButton();\n    if (this.thumbnailLimit !== this.pdfViewerBase.pageCount && this.thumbnailView) {\n      // eslint-disable-next-line\n      var isIE = !!document.documentMode;\n      if (!isIE) {\n        Promise.all([this.createRequestForThumbnails()]);\n      } else {\n        this.createRequestForThumbnails();\n      }\n    }\n  };\n  // eslint-disable-next-line\n  ThumbnailView.prototype.renderServerThumbnailImage = function (data) {\n    var startPage = data && isNaN(data.startPage) ? data.startPage : this.startIndex;\n    var endPage = data && isNaN(data.endPage) ? data.endPage : this.thumbnailLimit;\n    for (var i = startPage; i < endPage; i++) {\n      this.thumbnailImageRender(i, data);\n    }\n  };\n  // eslint-disable-next-line\n  ThumbnailView.prototype.renderClientThumbnailImage = function (data) {\n    var pageIndex = data.pageIndex;\n    this.thumbnailImageRender(pageIndex, data);\n  };\n  // eslint-disable-next-line\n  ThumbnailView.prototype.thumbnailImageRender = function (pageIndex, data) {\n    // eslint-disable-next-line max-len\n    var pageLink = createElement('a', {\n      id: 'page_' + pageIndex,\n      attrs: {\n        'aria-label': 'Thumbnail of Page' + (pageIndex + 1),\n        'role': 'link'\n      },\n      className: 'e-pv-thumbnail-anchor-node'\n    });\n    // eslint-disable-next-line max-len\n    var thumbnail = createElement('div', {\n      id: this.pdfViewer.element.id + '_thumbnail_' + pageIndex,\n      className: 'e-pv-thumbnail e-pv-thumbnail-column'\n    });\n    // eslint-disable-next-line max-len\n    this.thumbnailSelectionRing = createElement('div', {\n      id: this.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageIndex,\n      className: 'e-pv-thumbnail-selection-ring'\n    });\n    thumbnail.appendChild(this.thumbnailSelectionRing);\n    // eslint-disable-next-line max-len\n    var thumbnailPageNumber = createElement('div', {\n      id: this.pdfViewer.element.id + '_thumbnail_pagenumber_' + pageIndex,\n      className: 'e-pv-thumbnail-number'\n    });\n    thumbnailPageNumber.textContent = (pageIndex + 1).toString();\n    thumbnail.appendChild(thumbnailPageNumber);\n    // eslint-disable-next-line max-len\n    this.thumbnailImage = createElement('img', {\n      id: this.pdfViewer.element.id + '_thumbnail_image_' + pageIndex,\n      className: 'e-pv-thumbnail-image',\n      attrs: {\n        'tabindex': '0',\n        \"aria-label\": \"Thumbnail of Page\" + (pageIndex + 1)\n      }\n    });\n    // eslint-disable-next-line max-len\n    this.thumbnailImage.src = this.pdfViewerBase.clientSideRendering || typeof data.thumbnailImage === 'string' || data.thumbnailImage instanceof String ? data.thumbnailImage : data.thumbnailImage[pageIndex];\n    this.thumbnailImage.alt = this.pdfViewer.element.id + '_thumbnail_page_' + pageIndex;\n    if (this.pdfViewerBase.pageSize[pageIndex] && this.pdfViewerBase.pageSize[pageIndex].height < this.pdfViewerBase.pageSize[pageIndex].width) {\n      this.thumbnailImage.style.height = '86px';\n      this.thumbnailImage.style.width = '126px';\n      thumbnail.style.height = '100px';\n      thumbnail.style.width = '140px';\n      pageLink.style.left = '-25px';\n      thumbnailPageNumber.style.left = '18px';\n      pageLink.style.marginRight = '41px';\n      thumbnail.style.marginLeft = '-5px';\n      thumbnail.style.marginRight = '0px';\n    }\n    this.thumbnailSelectionRing.appendChild(this.thumbnailImage);\n    pageLink.appendChild(thumbnail);\n    this.thumbnailView.appendChild(pageLink);\n    this.wireUpEvents();\n    if (pageIndex === 0) {\n      this.setMouseFocusToFirstPage();\n    }\n  };\n  ThumbnailView.prototype.wireUpEvents = function () {\n    if (this.thumbnailSelectionRing) {\n      this.thumbnailSelectionRing.addEventListener('click', this.thumbnailClick);\n      this.thumbnailImage.addEventListener('keydown', this.thumbnailKeydown);\n      this.thumbnailSelectionRing.addEventListener('mouseover', this.thumbnailMouseOver);\n      this.thumbnailSelectionRing.addEventListener('mouseleave', this.thumbnailMouseLeave);\n    }\n  };\n  ThumbnailView.prototype.unwireUpEvents = function () {\n    if (this.thumbnailSelectionRing && this.thumbnailImage) {\n      this.thumbnailSelectionRing.removeEventListener('click', this.thumbnailClick);\n      this.thumbnailImage.removeEventListener('keydown', this.thumbnailKeydown);\n      this.thumbnailSelectionRing.removeEventListener('mouseover', this.thumbnailMouseOver);\n      this.thumbnailSelectionRing.removeEventListener('mouseleave', this.thumbnailMouseLeave);\n    }\n  };\n  ThumbnailView.prototype.goToThumbnailPage = function (pageNumber) {\n    if (pageNumber > 0 && pageNumber <= this.pdfViewerBase.pageCount && this.pdfViewerBase.currentPageNumber !== pageNumber) {\n      this.pdfViewerBase.updateScrollTop(pageNumber - 1);\n    } else {\n      this.isThumbnailClicked = false;\n    }\n  };\n  ThumbnailView.prototype.setSelectionStyle = function (thumbnailElement) {\n    thumbnailElement.classList.remove('e-pv-thumbnail-selection-ring');\n    thumbnailElement.classList.remove('e-pv-thumbnail-hover');\n    thumbnailElement.classList.remove('e-pv-thumbnail-focus');\n    thumbnailElement.classList.add('e-pv-thumbnail-selection');\n  };\n  ThumbnailView.prototype.setMouseOverStyle = function (thumbnailElement) {\n    // eslint-disable-next-line max-len\n    if (!thumbnailElement.classList.contains('e-pv-thumbnail-selection')) {\n      thumbnailElement.classList.remove('e-pv-thumbnail-selection-ring');\n      if (!thumbnailElement.classList.contains('e-pv-thumbnail-focus')) {\n        thumbnailElement.classList.add('e-pv-thumbnail-hover');\n      }\n    }\n  };\n  ThumbnailView.prototype.setMouseLeaveStyle = function (thumbnailElement) {\n    if (!thumbnailElement.classList.contains('e-pv-thumbnail-selection')) {\n      if (!thumbnailElement.classList.contains('e-pv-thumbnail-focus')) {\n        thumbnailElement.classList.add('e-pv-thumbnail-selection-ring');\n      }\n      thumbnailElement.classList.remove('e-pv-thumbnail-hover');\n    } else {\n      if (!thumbnailElement.classList.contains('e-pv-thumbnail-selection')) {\n        thumbnailElement.classList.remove('e-pv-thumbnail-selection');\n        thumbnailElement.classList.add('e-pv-thumbnail-focus');\n      }\n    }\n  };\n  ThumbnailView.prototype.setMouseFocusStyle = function (thumbnailElement) {\n    thumbnailElement.classList.remove('e-pv-thumbnail-selection');\n    thumbnailElement.classList.remove('e-pv-thumbnail-hover');\n    thumbnailElement.classList.add('e-pv-thumbnail-focus');\n  };\n  ThumbnailView.prototype.setMouseFocusToFirstPage = function () {\n    var thumbnailChild = this.thumbnailView.children[0];\n    if (thumbnailChild) {\n      var thumbnailDiv = thumbnailChild.children[0].children[0];\n      this.setMouseFocusStyle(thumbnailDiv);\n      this.previousElement = thumbnailDiv;\n    }\n  };\n  /**\n   * @private\n   */\n  ThumbnailView.prototype.clear = function () {\n    this.startIndex = 0;\n    this.thumbnailLimit = 0;\n    if (this.pdfViewerBase.navigationPane) {\n      if (this.pdfViewerBase.navigationPane.sideBarContentContainer) {\n        this.pdfViewerBase.navigationPane.sideBarContentContainer.style.display = 'block';\n        this.pdfViewerBase.navigationPane.sideBarContent.scrollTop = 0;\n        this.pdfViewerBase.navigationPane.sideBarContentContainer.style.display = 'none';\n      }\n    }\n    if (this.thumbnailView) {\n      while (this.thumbnailView.hasChildNodes()) {\n        this.thumbnailView.removeChild(this.thumbnailView.lastChild);\n      }\n    }\n    if (this.pdfViewerBase.navigationPane) {\n      this.pdfViewerBase.navigationPane.resetThumbnailView();\n    }\n    if (this.thumbnailRequestHandler) {\n      this.thumbnailRequestHandler.clear();\n    }\n    this.unwireUpEvents();\n  };\n  ThumbnailView.prototype.getVisibleThumbs = function () {\n    return this.getVisibleElements(this.pdfViewerBase.navigationPane.sideBarContent, this.thumbnailView.children);\n  };\n  ThumbnailView.prototype.getVisibleElements = function (scrollElement, thumbnailViewChildren) {\n    var top = scrollElement.scrollTop;\n    var bottom = top + scrollElement.clientHeight;\n    var left = scrollElement.scrollLeft;\n    var right = left + scrollElement.clientWidth;\n    /**\n     * @param thumbnailViewChildrenElement\n     */\n    function isThumbnailElementBottomAfterViewTop(thumbnailViewChildrenElement) {\n      var elementBottom = thumbnailViewChildrenElement.offsetTop + thumbnailViewChildrenElement.clientTop + thumbnailViewChildrenElement.clientHeight;\n      return elementBottom > top;\n    }\n    // eslint-disable-next-line\n    var visible = [];\n    var thumbnailView;\n    var element;\n    var currentHeight;\n    var viewHeight;\n    var viewBottom;\n    var hiddenHeight;\n    var currentWidth;\n    var viewWidth;\n    var viewRight;\n    var hiddenWidth;\n    var percentVisible;\n    var firstVisibleElementInd = thumbnailViewChildren.length === 0 ? 0 : this.binarySearchFirstItem(thumbnailViewChildren, isThumbnailElementBottomAfterViewTop);\n    if (thumbnailViewChildren.length > 0) {\n      firstVisibleElementInd = this.backtrackBeforeAllVisibleElements(firstVisibleElementInd, thumbnailViewChildren, top);\n    }\n    var lastEdge = -1;\n    for (var i = firstVisibleElementInd, ii = thumbnailViewChildren.length; i < ii; i++) {\n      thumbnailView = this.getThumbnailElement(i);\n      element = thumbnailView;\n      currentWidth = element.offsetLeft + element.clientLeft;\n      currentHeight = element.offsetTop + element.clientTop;\n      viewWidth = element.clientWidth;\n      viewHeight = element.clientHeight;\n      viewRight = currentWidth + viewWidth;\n      viewBottom = currentHeight + viewHeight;\n      if (lastEdge === -1) {\n        if (viewBottom >= bottom) {\n          lastEdge = viewBottom;\n        }\n      } else if (currentHeight > lastEdge) {\n        break;\n      }\n      if (viewBottom <= top || currentHeight >= bottom || viewRight <= left || currentWidth >= right) {\n        continue;\n      }\n      hiddenHeight = Math.max(0, top - currentHeight) + Math.max(0, viewBottom - bottom);\n      hiddenWidth = Math.max(0, left - currentWidth) + Math.max(0, viewRight - right);\n      // eslint-disable-next-line no-bitwise\n      percentVisible = (viewHeight - hiddenHeight) * (viewWidth - hiddenWidth) * 100 / viewHeight / viewWidth | 0;\n      visible.push({\n        id: thumbnailView.id,\n        x: currentWidth,\n        y: currentHeight,\n        view: thumbnailView,\n        percent: percentVisible\n      });\n    }\n    var first = visible[0];\n    var last = visible[visible.length - 1];\n    return {\n      first: first,\n      last: last,\n      views: visible\n    };\n  };\n  // eslint-disable-next-line\n  ThumbnailView.prototype.binarySearchFirstItem = function (items, condition) {\n    var minIndex = 0;\n    var maxIndex = items.length - 1;\n    if (items.length === 0 || !condition(this.getThumbnailElement(maxIndex))) {\n      return items.length - 1;\n    }\n    if (condition(this.getThumbnailElement(minIndex))) {\n      return minIndex;\n    }\n    while (minIndex < maxIndex) {\n      // eslint-disable-next-line no-bitwise\n      var currentIndex = minIndex + maxIndex >> 1;\n      if (condition(this.getThumbnailElement(currentIndex))) {\n        maxIndex = currentIndex;\n      } else {\n        minIndex = currentIndex + 1;\n      }\n    }\n    return minIndex; /* === maxIndex */\n  };\n  ThumbnailView.prototype.backtrackBeforeAllVisibleElements = function (index, views, top) {\n    if (index < 2) {\n      return index;\n    }\n    var thumbnailElement = this.getThumbnailElement(index);\n    var pageTop = thumbnailElement.offsetTop + thumbnailElement.clientTop;\n    if (pageTop >= top) {\n      thumbnailElement = this.getThumbnailElement(index - 1);\n      pageTop = thumbnailElement.offsetTop + thumbnailElement.clientTop;\n    }\n    for (var i = index - 2; i >= 0; --i) {\n      thumbnailElement = this.getThumbnailElement(i);\n      if (thumbnailElement.offsetTop + thumbnailElement.clientTop + thumbnailElement.clientHeight <= pageTop) {\n        break;\n      }\n      index = i;\n    }\n    return index;\n  };\n  ThumbnailView.prototype.getThumbnailElement = function (index) {\n    var thumbnailChild = this.thumbnailView.children[index];\n    return thumbnailChild.children[0];\n  };\n  /**\n   * @private\n   */\n  ThumbnailView.prototype.destroy = function () {\n    this.clear();\n  };\n  /**\n   * @private\n   */\n  ThumbnailView.prototype.getModuleName = function () {\n    return 'ThumbnailView';\n  };\n  return ThumbnailView;\n}();\nexport { ThumbnailView };","map":{"version":3,"names":["AjaxHandler","createElement","isNullOrUndefined","ThumbnailView","pdfViewer","pdfViewerBase","_this","thumbnailLimit","thumbnailThreshold","thumbnailTopMargin","isThumbnailClicked","thumbnailClick","event","isKeyboard","proxy","pageNumber","getPageNumberFromID","srcElement","id","previousElement","classList","remove","add","parentElement","element","setSelectionStyle","fireThumbnailClick","goToThumbnailPage","focusViewerContainer","annotationModule","inkAnnotationModule","currentPageNumber","parseInt","drawInkAnnotation","thumbnailKeydown","key","preventDefault","stopPropagation","thumbnailMouseOver","setMouseOverStyle","thumbnailMouseLeave","setMouseLeaveStyle","children","prototype","createThumbnailContainer","thumbnailView","className","navigationPane","sideBarContent","appendChild","openThumbnailPane","closeThumbnailPane","createRequestForThumbnails","isIE","document","documentMode","Promise","renderThumbnailImage","reject","requestCreation","startIndex","pageCount","digitalSignaturePresent","i","digitalSignatureList","digitalSignaturePages","toString","jsonObject","startPage","endPage","sizeX","sizeY","hashId","action","elementId","uniqueId","documentId","digitalSignaturePageList","jsonDocumentId","clientSideRendering","thumbnailRequestHandler","url","serviceUrl","serverActionSettings","renderThumbnail","responseType","send","onSuccess","result","data","redirect","checkRedirection","updateThumbnailCollection","onFailure","fireAjaxRequestFailed","status","statusText","onError","openNotificationPopup","pageIndex","pdfViewerRunner","postMessage","message","thumbnailOnMessage","canvas","_a","value","width","height","canvasContext","getContext","imageData","createImageData","set","putImageData","imageUrl","toDataURL","thumbnailImage","JSON","parse","error","onControlError","fireAjaxRequestSuccess","isThumbnailViewOpen","isThumbnailOpen","sideBarTitle","textContent","localeObj","getConstant","getElementById","style","display","bookmarkContent","querySelector","setThumbnailSelectionIconTheme","updateViewerContainerOnExpand","isBookmarkOpen","gotoThumbnailImage","shouldScroll","checkThumbnailScroll","thumbnailChild","thumbnailDiv","offsetTop","clientTop","scrollTop","setFocusStyle","visibleThumbs","getVisibleThumbs","numVisibleThumbs","views","length","visibleFirstPageID","first","visibleLastPageID","last","some","view","pageID","split","thumbPageNumber","percent","offsetWidth","offsetHeight","pageId","thumbnail","setMouseFocusStyle","renderClientThumbnailImage","renderServerThumbnailImage","enableThumbnailButton","all","isNaN","thumbnailImageRender","pageLink","attrs","thumbnailSelectionRing","thumbnailPageNumber","src","String","alt","pageSize","left","marginRight","marginLeft","wireUpEvents","setMouseFocusToFirstPage","addEventListener","unwireUpEvents","removeEventListener","updateScrollTop","thumbnailElement","contains","clear","sideBarContentContainer","hasChildNodes","removeChild","lastChild","resetThumbnailView","getVisibleElements","scrollElement","thumbnailViewChildren","top","bottom","clientHeight","scrollLeft","right","clientWidth","isThumbnailElementBottomAfterViewTop","thumbnailViewChildrenElement","elementBottom","visible","currentHeight","viewHeight","viewBottom","hiddenHeight","currentWidth","viewWidth","viewRight","hiddenWidth","percentVisible","firstVisibleElementInd","binarySearchFirstItem","backtrackBeforeAllVisibleElements","lastEdge","ii","getThumbnailElement","offsetLeft","clientLeft","Math","max","push","x","y","items","condition","minIndex","maxIndex","currentIndex","index","pageTop","destroy","getModuleName"],"sources":["/Users/saleem/Desktop/KClient/Web App/Ver_3.6/User Interface/website_Source files/node_modules/@syncfusion/ej2-pdfviewer/src/pdfviewer/thumbnail-view/thumbnail-view.js"],"sourcesContent":["/* eslint-disable */\nimport { AjaxHandler } from '../index';\nimport { createElement, isNullOrUndefined } from '@syncfusion/ej2-base';\n/**\n * The `ThumbnailView` module is used to handle thumbnail view navigation of PDF viewer.\n */\nvar ThumbnailView = /** @class */ (function () {\n    /**\n     * @param pdfViewer\n     * @param pdfViewerBase\n     * @param pdfViewer\n     * @param pdfViewerBase\n     * @private\n     */\n    function ThumbnailView(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        this.thumbnailLimit = 30;\n        this.thumbnailThreshold = 50;\n        this.thumbnailTopMargin = 10;\n        /**\n         * @private\n         */\n        this.isThumbnailClicked = false;\n        /**\n         * @param event\n         * @private\n         */\n        this.thumbnailClick = function (event, isKeyboard) {\n            var proxy = _this;\n            var pageNumber = proxy.getPageNumberFromID(event.srcElement.id);\n            if (proxy.previousElement) {\n                proxy.previousElement.classList.remove('e-pv-thumbnail-selection');\n                proxy.previousElement.classList.remove('e-pv-thumbnail-focus');\n                proxy.previousElement.classList.add('e-pv-thumbnail-selection-ring');\n            }\n            if (event.srcElement.parentElement.id === proxy.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n                proxy.setSelectionStyle(event.srcElement.parentElement);\n                proxy.previousElement = event.srcElement.parentElement;\n            }\n            else if (event.srcElement.id === proxy.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n                proxy.setSelectionStyle(event.srcElement);\n                proxy.previousElement = event.srcElement;\n            }\n            proxy.pdfViewer.fireThumbnailClick(pageNumber + 1);\n            proxy.isThumbnailClicked = true;\n            proxy.goToThumbnailPage(pageNumber + 1);\n            if (!isKeyboard) {\n                proxy.pdfViewerBase.focusViewerContainer();\n            }\n            if (_this.pdfViewer.annotationModule && _this.pdfViewer.annotationModule.inkAnnotationModule) {\n                // eslint-disable-next-line\n                var currentPageNumber = parseInt(_this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);\n                _this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(currentPageNumber);\n            }\n        };\n        /**\n         * @param event\n         * @private\n         */\n        this.thumbnailKeydown = function (event) {\n            if (event && event.key === \"Enter\" || event.key === \" \") {\n                _this.thumbnailClick(event, true);\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        };\n        /**\n         * @param event\n         * @private\n         */\n        this.thumbnailMouseOver = function (event) {\n            var proxy = _this;\n            var pageNumber = proxy.getPageNumberFromID(event.srcElement.id);\n            if (event.srcElement.id === proxy.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n                proxy.setMouseOverStyle(event.srcElement);\n            }\n            else if (event.srcElement.id === proxy.pdfViewer.element.id + '_thumbnail_image_' + pageNumber) {\n                proxy.setMouseOverStyle(event.srcElement.parentElement);\n            }\n        };\n        /**\n         * @param event\n         * @private\n         */\n        this.thumbnailMouseLeave = function (event) {\n            var proxy = _this;\n            var pageNumber = proxy.getPageNumberFromID(event.srcElement.id);\n            if (event.srcElement.parentElement.id === proxy.pdfViewer.element.id + '_thumbnail_view') {\n                proxy.setMouseLeaveStyle(event.srcElement.children[0].children[0]);\n            }\n            else if (event.srcElement.parentElement.id === proxy.pdfViewer.element.id + '_thumbnail_' + pageNumber) {\n                proxy.setMouseLeaveStyle(event.srcElement.parentElement.children[0]);\n            }\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.createThumbnailContainer = function () {\n        // eslint-disable-next-line max-len\n        this.thumbnailView = createElement('div', { id: this.pdfViewer.element.id + '_thumbnail_view', className: 'e-pv-thumbnail-view e-pv-thumbnail-row' });\n        this.pdfViewerBase.navigationPane.sideBarContent.appendChild(this.thumbnailView);\n    };\n    /**\n     * Open the thumbnail pane of the PdfViewer.\n     *\n     * @returns void\n     */\n    ThumbnailView.prototype.openThumbnailPane = function () {\n        if (this.pdfViewerBase.navigationPane) {\n            this.pdfViewerBase.navigationPane.openThumbnailPane();\n        }\n    };\n    /**\n     * Close the thumbnail pane of the PdfViewer.\n     *\n     * @returns void\n     */\n    ThumbnailView.prototype.closeThumbnailPane = function () {\n        if (this.pdfViewerBase.navigationPane) {\n            this.pdfViewerBase.navigationPane.closeThumbnailPane();\n        }\n    };\n    ;\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    ThumbnailView.prototype.createRequestForThumbnails = function () {\n        var proxy = this;\n        // eslint-disable-next-line\n        var isIE = !!document.documentMode;\n        if (!isIE) {\n            // eslint-disable-next-line\n            return new Promise(\n            // eslint-disable-next-line\n            function (renderThumbnailImage, reject) {\n                proxy.requestCreation(proxy);\n            });\n        }\n        else {\n            this.requestCreation(proxy);\n            return null;\n        }\n    };\n    ThumbnailView.prototype.requestCreation = function (proxy) {\n        // Removed the condition to skip multiple request for thumbnail image.\n        proxy.startIndex = proxy.thumbnailLimit;\n        // eslint-disable-next-line max-len\n        proxy.thumbnailLimit = proxy.startIndex + proxy.thumbnailThreshold < proxy.pdfViewer.pageCount ? proxy.startIndex + proxy.thumbnailThreshold : proxy.pdfViewer.pageCount;\n        var digitalSignaturePresent = false;\n        for (var i = proxy.startIndex; i < proxy.thumbnailLimit; i++) {\n            if (proxy.pdfViewerBase.digitalSignaturePresent(i)) {\n                digitalSignaturePresent = true;\n            }\n        }\n        var digitalSignatureList = \"\";\n        if (digitalSignaturePresent) {\n            digitalSignatureList = proxy.pdfViewerBase.digitalSignaturePages.toString();\n        }\n        // eslint-disable-next-line max-len\n        var jsonObject = { startPage: proxy.startIndex.toString(), endPage: proxy.thumbnailLimit.toString(), sizeX: \"99.7\", sizeY: \"141\", hashId: proxy.pdfViewerBase.hashId, action: 'RenderThumbnailImages', elementId: proxy.pdfViewer.element.id, uniqueId: proxy.pdfViewerBase.documentId, digitalSignaturePresent: digitalSignaturePresent, digitalSignaturePageList: digitalSignatureList };\n        if (this.pdfViewerBase.jsonDocumentId) {\n            // eslint-disable-next-line\n            jsonObject.documentId = this.pdfViewerBase.jsonDocumentId;\n        }\n        if (!this.pdfViewerBase.clientSideRendering) {\n            this.thumbnailRequestHandler = new AjaxHandler(this.pdfViewer);\n            this.thumbnailRequestHandler.url = proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.renderThumbnail;\n            this.thumbnailRequestHandler.responseType = 'json';\n            if (proxy.thumbnailLimit > 0 && !isNullOrUndefined(proxy.pdfViewerBase.hashId)) {\n                this.thumbnailRequestHandler.send(jsonObject);\n            }\n            // eslint-disable-next-line\n            this.thumbnailRequestHandler.onSuccess = function (result) {\n                // eslint-disable-next-line\n                var data = result.data;\n                var redirect = proxy.pdfViewerBase.checkRedirection(data);\n                if (!redirect) {\n                    proxy.updateThumbnailCollection(data);\n                }\n            };\n            // eslint-disable-next-line\n            this.thumbnailRequestHandler.onFailure = function (result) {\n                proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.renderThumbnail);\n            };\n            // eslint-disable-next-line\n            this.thumbnailRequestHandler.onError = function (result) {\n                proxy.pdfViewerBase.openNotificationPopup();\n                proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.renderThumbnail);\n            };\n        }\n        else {\n            for (var pageIndex = proxy.startIndex; pageIndex < proxy.thumbnailLimit; pageIndex++) {\n                this.pdfViewerBase.pdfViewerRunner.postMessage({\n                    pageIndex: pageIndex,\n                    message: 'renderThumbnail'\n                });\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.thumbnailOnMessage = function (event) {\n        if (event.data.message === 'renderThumbnail') {\n            var canvas = document.createElement('canvas');\n            var _a = event.data, value = _a.value, width = _a.width, height = _a.height, pageIndex = _a.pageIndex;\n            canvas.width = width;\n            canvas.height = height;\n            var canvasContext = canvas.getContext('2d');\n            var imageData = canvasContext.createImageData(width, height);\n            imageData.data.set(value);\n            canvasContext.putImageData(imageData, 0, 0);\n            var imageUrl = canvas.toDataURL();\n            var data = ({\n                thumbnailImage: imageUrl,\n                startPage: this.startIndex,\n                endPage: this.thumbnailLimit,\n                uniqueId: this.pdfViewerBase.documentId,\n                pageIndex: pageIndex\n            });\n            this.updateThumbnailCollection(data);\n        }\n    };\n    /**\n   * @param jsonData\n   * @private\n   */\n    // eslint-disable-next-line\n    ThumbnailView.prototype.updateThumbnailCollection = function (data) {\n        if (data) {\n            var proxy = this;\n            if (typeof data !== 'object') {\n                try {\n                    data = JSON.parse(data);\n                }\n                catch (error) {\n                    proxy.pdfViewerBase.onControlError(500, data, proxy.pdfViewer.serverActionSettings.renderThumbnail);\n                    data = null;\n                }\n            }\n            if (data && data.uniqueId === proxy.pdfViewerBase.documentId) {\n                proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.renderThumbnail, data);\n                proxy.renderThumbnailImage(data);\n                if (proxy.pdfViewer.isThumbnailViewOpen) {\n                    proxy.pdfViewerBase.navigationPane.isThumbnailOpen = true;\n                    // eslint-disable-next-line max-len\n                    proxy.pdfViewerBase.navigationPane.sideBarTitle.textContent = proxy.pdfViewer.localeObj.getConstant('Page Thumbnails');\n                    document.getElementById(proxy.pdfViewer.element.id + '_thumbnail_view').style.display = 'flex';\n                    var bookmarkContent = proxy.pdfViewer.element.querySelector('.e-pv-bookmark-view');\n                    if (bookmarkContent) {\n                        bookmarkContent.style.display = 'none';\n                    }\n                    proxy.pdfViewerBase.navigationPane.setThumbnailSelectionIconTheme();\n                    proxy.pdfViewerBase.navigationPane.updateViewerContainerOnExpand();\n                    proxy.pdfViewerBase.navigationPane.isBookmarkOpen = false;\n                }\n            }\n        }\n    };\n    /**\n     * @param pageNumber\n     * @private\n     */\n    ThumbnailView.prototype.gotoThumbnailImage = function (pageNumber) {\n        var shouldScroll = this.checkThumbnailScroll(pageNumber);\n        if (this.thumbnailView) {\n            var thumbnailChild = this.thumbnailView.children[pageNumber];\n            if (thumbnailChild) {\n                var thumbnailDiv = thumbnailChild.children[0];\n                var offsetTop = void 0;\n                if (shouldScroll) {\n                    if (thumbnailDiv.offsetTop <= 0) {\n                        offsetTop = thumbnailDiv.parentElement.offsetTop + thumbnailDiv.clientTop - this.thumbnailTopMargin;\n                    }\n                    else {\n                        offsetTop = thumbnailDiv.offsetTop + thumbnailDiv.clientTop - this.thumbnailTopMargin;\n                    }\n                    this.pdfViewerBase.navigationPane.sideBarContent.scrollTop = offsetTop;\n                }\n                if (!this.isThumbnailClicked) {\n                    if (this.previousElement) {\n                        this.previousElement.classList.remove('e-pv-thumbnail-selection');\n                        this.previousElement.classList.remove('e-pv-thumbnail-focus');\n                        this.previousElement.classList.remove('e-pv-thumbnail-hover');\n                        this.previousElement.classList.add('e-pv-thumbnail-selection-ring');\n                    }\n                    this.setFocusStyle(thumbnailDiv, pageNumber);\n                }\n                this.previousElement = thumbnailDiv.children[0];\n            }\n        }\n    };\n    ThumbnailView.prototype.checkThumbnailScroll = function (pageNumber) {\n        var shouldScroll = false;\n        if (this.thumbnailView) {\n            var visibleThumbs = this.getVisibleThumbs();\n            var numVisibleThumbs = visibleThumbs.views.length;\n            // if the thumbnail isn't currently visible, scroll it into view.\n            if (numVisibleThumbs > 0) {\n                var visibleFirstPageID = this.getPageNumberFromID(visibleThumbs.first.id);\n                // account for only one thumbnail being visible.\n                // eslint-disable-next-line max-len\n                var visibleLastPageID = (numVisibleThumbs > 1 ? this.getPageNumberFromID(visibleThumbs.last.id) : visibleFirstPageID);\n                if (pageNumber <= visibleFirstPageID || pageNumber >= visibleLastPageID) {\n                    shouldScroll = true;\n                }\n                else {\n                    // eslint-disable-next-line\n                    visibleThumbs.views.some(function (view) {\n                        var pageID = view.id.split('_');\n                        var thumbPageNumber = pageID[pageID.length - 1];\n                        // eslint-disable-next-line radix\n                        if (parseInt(thumbPageNumber) !== pageNumber) {\n                            return false;\n                        }\n                        shouldScroll = view.percent < 100 && (view.view.offsetWidth > view.view.offsetHeight && view.percent < 97);\n                        return true;\n                    });\n                }\n            }\n        }\n        return shouldScroll;\n    };\n    ThumbnailView.prototype.getPageNumberFromID = function (pageId) {\n        var pageID = pageId.split('_');\n        var pageNumber = pageID[pageID.length - 1];\n        // eslint-disable-next-line radix\n        return parseInt(pageNumber);\n    };\n    ThumbnailView.prototype.setFocusStyle = function (thumbnail, pageNumber) {\n        if (thumbnail.children[0].id === this.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n            this.setMouseFocusStyle(thumbnail.children[0]);\n        }\n    };\n    // eslint-disable-next-line\n    ThumbnailView.prototype.renderThumbnailImage = function (data) {\n        if (this.thumbnailView) {\n            this.pdfViewerBase.clientSideRendering ? this.renderClientThumbnailImage(data) : this.renderServerThumbnailImage(data);\n        }\n        this.pdfViewerBase.navigationPane.enableThumbnailButton();\n        if (this.thumbnailLimit !== this.pdfViewerBase.pageCount && this.thumbnailView) {\n            // eslint-disable-next-line\n            var isIE = !!document.documentMode;\n            if (!isIE) {\n                Promise.all([this.createRequestForThumbnails()]);\n            }\n            else {\n                this.createRequestForThumbnails();\n            }\n        }\n    };\n    // eslint-disable-next-line\n    ThumbnailView.prototype.renderServerThumbnailImage = function (data) {\n        var startPage = (data && isNaN(data.startPage)) ? data.startPage : this.startIndex;\n        var endPage = (data && isNaN(data.endPage)) ? data.endPage : this.thumbnailLimit;\n        for (var i = startPage; i < endPage; i++) {\n            this.thumbnailImageRender(i, data);\n        }\n    };\n    // eslint-disable-next-line\n    ThumbnailView.prototype.renderClientThumbnailImage = function (data) {\n        var pageIndex = data.pageIndex;\n        this.thumbnailImageRender(pageIndex, data);\n    };\n    // eslint-disable-next-line\n    ThumbnailView.prototype.thumbnailImageRender = function (pageIndex, data) {\n        // eslint-disable-next-line max-len\n        var pageLink = createElement('a', { id: 'page_' + pageIndex, attrs: { 'aria-label': 'Thumbnail of Page' + (pageIndex + 1), 'role': 'link' }, className: 'e-pv-thumbnail-anchor-node' });\n        // eslint-disable-next-line max-len\n        var thumbnail = createElement('div', { id: this.pdfViewer.element.id + '_thumbnail_' + pageIndex, className: 'e-pv-thumbnail e-pv-thumbnail-column' });\n        // eslint-disable-next-line max-len\n        this.thumbnailSelectionRing = createElement('div', { id: this.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageIndex, className: 'e-pv-thumbnail-selection-ring' });\n        thumbnail.appendChild(this.thumbnailSelectionRing);\n        // eslint-disable-next-line max-len\n        var thumbnailPageNumber = createElement('div', { id: this.pdfViewer.element.id + '_thumbnail_pagenumber_' + pageIndex, className: 'e-pv-thumbnail-number' });\n        thumbnailPageNumber.textContent = (pageIndex + 1).toString();\n        thumbnail.appendChild(thumbnailPageNumber);\n        // eslint-disable-next-line max-len\n        this.thumbnailImage = createElement('img', { id: this.pdfViewer.element.id + '_thumbnail_image_' + pageIndex, className: 'e-pv-thumbnail-image', attrs: { 'tabindex': '0', \"aria-label\": \"Thumbnail of Page\" + (pageIndex + 1) } });\n        // eslint-disable-next-line max-len\n        this.thumbnailImage.src = this.pdfViewerBase.clientSideRendering || typeof data.thumbnailImage === 'string' || data.thumbnailImage instanceof String ? data.thumbnailImage : data.thumbnailImage[pageIndex];\n        this.thumbnailImage.alt = this.pdfViewer.element.id + '_thumbnail_page_' + pageIndex;\n        if (this.pdfViewerBase.pageSize[pageIndex] && (this.pdfViewerBase.pageSize[pageIndex].height < this.pdfViewerBase.pageSize[pageIndex].width)) {\n            this.thumbnailImage.style.height = '86px';\n            this.thumbnailImage.style.width = '126px';\n            thumbnail.style.height = '100px';\n            thumbnail.style.width = '140px';\n            pageLink.style.left = '-25px';\n            thumbnailPageNumber.style.left = '18px';\n            pageLink.style.marginRight = '41px';\n            thumbnail.style.marginLeft = '-5px';\n            thumbnail.style.marginRight = '0px';\n        }\n        this.thumbnailSelectionRing.appendChild(this.thumbnailImage);\n        pageLink.appendChild(thumbnail);\n        this.thumbnailView.appendChild(pageLink);\n        this.wireUpEvents();\n        if (pageIndex === 0) {\n            this.setMouseFocusToFirstPage();\n        }\n    };\n    ThumbnailView.prototype.wireUpEvents = function () {\n        if (this.thumbnailSelectionRing) {\n            this.thumbnailSelectionRing.addEventListener('click', this.thumbnailClick);\n            this.thumbnailImage.addEventListener('keydown', this.thumbnailKeydown);\n            this.thumbnailSelectionRing.addEventListener('mouseover', this.thumbnailMouseOver);\n            this.thumbnailSelectionRing.addEventListener('mouseleave', this.thumbnailMouseLeave);\n        }\n    };\n    ThumbnailView.prototype.unwireUpEvents = function () {\n        if (this.thumbnailSelectionRing && this.thumbnailImage) {\n            this.thumbnailSelectionRing.removeEventListener('click', this.thumbnailClick);\n            this.thumbnailImage.removeEventListener('keydown', this.thumbnailKeydown);\n            this.thumbnailSelectionRing.removeEventListener('mouseover', this.thumbnailMouseOver);\n            this.thumbnailSelectionRing.removeEventListener('mouseleave', this.thumbnailMouseLeave);\n        }\n    };\n    ThumbnailView.prototype.goToThumbnailPage = function (pageNumber) {\n        if (pageNumber > 0 && pageNumber <= this.pdfViewerBase.pageCount && this.pdfViewerBase.currentPageNumber !== pageNumber) {\n            this.pdfViewerBase.updateScrollTop(pageNumber - 1);\n        }\n        else {\n            this.isThumbnailClicked = false;\n        }\n    };\n    ThumbnailView.prototype.setSelectionStyle = function (thumbnailElement) {\n        thumbnailElement.classList.remove('e-pv-thumbnail-selection-ring');\n        thumbnailElement.classList.remove('e-pv-thumbnail-hover');\n        thumbnailElement.classList.remove('e-pv-thumbnail-focus');\n        thumbnailElement.classList.add('e-pv-thumbnail-selection');\n    };\n    ThumbnailView.prototype.setMouseOverStyle = function (thumbnailElement) {\n        // eslint-disable-next-line max-len\n        if (!thumbnailElement.classList.contains('e-pv-thumbnail-selection')) {\n            thumbnailElement.classList.remove('e-pv-thumbnail-selection-ring');\n            if (!thumbnailElement.classList.contains('e-pv-thumbnail-focus')) {\n                thumbnailElement.classList.add('e-pv-thumbnail-hover');\n            }\n        }\n    };\n    ThumbnailView.prototype.setMouseLeaveStyle = function (thumbnailElement) {\n        if (!thumbnailElement.classList.contains('e-pv-thumbnail-selection')) {\n            if (!thumbnailElement.classList.contains('e-pv-thumbnail-focus')) {\n                thumbnailElement.classList.add('e-pv-thumbnail-selection-ring');\n            }\n            thumbnailElement.classList.remove('e-pv-thumbnail-hover');\n        }\n        else {\n            if (!thumbnailElement.classList.contains('e-pv-thumbnail-selection')) {\n                thumbnailElement.classList.remove('e-pv-thumbnail-selection');\n                thumbnailElement.classList.add('e-pv-thumbnail-focus');\n            }\n        }\n    };\n    ThumbnailView.prototype.setMouseFocusStyle = function (thumbnailElement) {\n        thumbnailElement.classList.remove('e-pv-thumbnail-selection');\n        thumbnailElement.classList.remove('e-pv-thumbnail-hover');\n        thumbnailElement.classList.add('e-pv-thumbnail-focus');\n    };\n    ThumbnailView.prototype.setMouseFocusToFirstPage = function () {\n        var thumbnailChild = this.thumbnailView.children[0];\n        if (thumbnailChild) {\n            var thumbnailDiv = thumbnailChild.children[0].children[0];\n            this.setMouseFocusStyle(thumbnailDiv);\n            this.previousElement = thumbnailDiv;\n        }\n    };\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.clear = function () {\n        this.startIndex = 0;\n        this.thumbnailLimit = 0;\n        if (this.pdfViewerBase.navigationPane) {\n            if (this.pdfViewerBase.navigationPane.sideBarContentContainer) {\n                this.pdfViewerBase.navigationPane.sideBarContentContainer.style.display = 'block';\n                this.pdfViewerBase.navigationPane.sideBarContent.scrollTop = 0;\n                this.pdfViewerBase.navigationPane.sideBarContentContainer.style.display = 'none';\n            }\n        }\n        if (this.thumbnailView) {\n            while (this.thumbnailView.hasChildNodes()) {\n                this.thumbnailView.removeChild(this.thumbnailView.lastChild);\n            }\n        }\n        if (this.pdfViewerBase.navigationPane) {\n            this.pdfViewerBase.navigationPane.resetThumbnailView();\n        }\n        if (this.thumbnailRequestHandler) {\n            this.thumbnailRequestHandler.clear();\n        }\n        this.unwireUpEvents();\n    };\n    ThumbnailView.prototype.getVisibleThumbs = function () {\n        return this.getVisibleElements(this.pdfViewerBase.navigationPane.sideBarContent, this.thumbnailView.children);\n    };\n    ThumbnailView.prototype.getVisibleElements = function (scrollElement, thumbnailViewChildren) {\n        var top = scrollElement.scrollTop;\n        var bottom = top + scrollElement.clientHeight;\n        var left = scrollElement.scrollLeft;\n        var right = left + scrollElement.clientWidth;\n        /**\n         * @param thumbnailViewChildrenElement\n         */\n        function isThumbnailElementBottomAfterViewTop(thumbnailViewChildrenElement) {\n            var elementBottom = thumbnailViewChildrenElement.offsetTop + thumbnailViewChildrenElement.clientTop + thumbnailViewChildrenElement.clientHeight;\n            return elementBottom > top;\n        }\n        // eslint-disable-next-line\n        var visible = [];\n        var thumbnailView;\n        var element;\n        var currentHeight;\n        var viewHeight;\n        var viewBottom;\n        var hiddenHeight;\n        var currentWidth;\n        var viewWidth;\n        var viewRight;\n        var hiddenWidth;\n        var percentVisible;\n        var firstVisibleElementInd = thumbnailViewChildren.length === 0 ? 0 :\n            this.binarySearchFirstItem(thumbnailViewChildren, isThumbnailElementBottomAfterViewTop);\n        if (thumbnailViewChildren.length > 0) {\n            firstVisibleElementInd =\n                this.backtrackBeforeAllVisibleElements(firstVisibleElementInd, thumbnailViewChildren, top);\n        }\n        var lastEdge = -1;\n        for (var i = firstVisibleElementInd, ii = thumbnailViewChildren.length; i < ii; i++) {\n            thumbnailView = this.getThumbnailElement(i);\n            element = thumbnailView;\n            currentWidth = element.offsetLeft + element.clientLeft;\n            currentHeight = element.offsetTop + element.clientTop;\n            viewWidth = element.clientWidth;\n            viewHeight = element.clientHeight;\n            viewRight = currentWidth + viewWidth;\n            viewBottom = currentHeight + viewHeight;\n            if (lastEdge === -1) {\n                if (viewBottom >= bottom) {\n                    lastEdge = viewBottom;\n                }\n            }\n            else if (currentHeight > lastEdge) {\n                break;\n            }\n            if (viewBottom <= top || currentHeight >= bottom ||\n                viewRight <= left || currentWidth >= right) {\n                continue;\n            }\n            hiddenHeight = Math.max(0, top - currentHeight) +\n                Math.max(0, viewBottom - bottom);\n            hiddenWidth = Math.max(0, left - currentWidth) +\n                Math.max(0, viewRight - right);\n            // eslint-disable-next-line no-bitwise\n            percentVisible = ((viewHeight - hiddenHeight) * (viewWidth - hiddenWidth) * 100 / viewHeight / viewWidth) | 0;\n            visible.push({\n                id: thumbnailView.id,\n                x: currentWidth,\n                y: currentHeight,\n                view: thumbnailView,\n                percent: percentVisible\n            });\n        }\n        var first = visible[0];\n        var last = visible[visible.length - 1];\n        return { first: first, last: last, views: visible };\n    };\n    // eslint-disable-next-line\n    ThumbnailView.prototype.binarySearchFirstItem = function (items, condition) {\n        var minIndex = 0;\n        var maxIndex = items.length - 1;\n        if (items.length === 0 || !condition(this.getThumbnailElement(maxIndex))) {\n            return items.length - 1;\n        }\n        if (condition(this.getThumbnailElement(minIndex))) {\n            return minIndex;\n        }\n        while (minIndex < maxIndex) {\n            // eslint-disable-next-line no-bitwise\n            var currentIndex = (minIndex + maxIndex) >> 1;\n            if (condition(this.getThumbnailElement(currentIndex))) {\n                maxIndex = currentIndex;\n            }\n            else {\n                minIndex = currentIndex + 1;\n            }\n        }\n        return minIndex; /* === maxIndex */\n    };\n    ThumbnailView.prototype.backtrackBeforeAllVisibleElements = function (index, views, top) {\n        if (index < 2) {\n            return index;\n        }\n        var thumbnailElement = this.getThumbnailElement(index);\n        var pageTop = thumbnailElement.offsetTop + thumbnailElement.clientTop;\n        if (pageTop >= top) {\n            thumbnailElement = this.getThumbnailElement(index - 1);\n            pageTop = thumbnailElement.offsetTop + thumbnailElement.clientTop;\n        }\n        for (var i = index - 2; i >= 0; --i) {\n            thumbnailElement = this.getThumbnailElement(i);\n            if (thumbnailElement.offsetTop + thumbnailElement.clientTop + thumbnailElement.clientHeight <= pageTop) {\n                break;\n            }\n            index = i;\n        }\n        return index;\n    };\n    ThumbnailView.prototype.getThumbnailElement = function (index) {\n        var thumbnailChild = this.thumbnailView.children[index];\n        return thumbnailChild.children[0];\n    };\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.destroy = function () {\n        this.clear();\n    };\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.getModuleName = function () {\n        return 'ThumbnailView';\n    };\n    return ThumbnailView;\n}());\nexport { ThumbnailView };\n"],"mappings":"AAAA;AACA,SAASA,WAAW,QAAQ,UAAU;AACtC,SAASC,aAAa,EAAEC,iBAAiB,QAAQ,sBAAsB;AACvE;AACA;AACA;AACA,IAAIC,aAAa,GAAG,aAAe,YAAY;EAC3C;AACJ;AACA;AACA;AACA;AACA;AACA;EACI,SAASA,aAAaA,CAACC,SAAS,EAAEC,aAAa,EAAE;IAC7C,IAAIC,KAAK,GAAG,IAAI;IAChB,IAAI,CAACC,cAAc,GAAG,EAAE;IACxB,IAAI,CAACC,kBAAkB,GAAG,EAAE;IAC5B,IAAI,CAACC,kBAAkB,GAAG,EAAE;IAC5B;AACR;AACA;IACQ,IAAI,CAACC,kBAAkB,GAAG,KAAK;IAC/B;AACR;AACA;AACA;IACQ,IAAI,CAACC,cAAc,GAAG,UAAUC,KAAK,EAAEC,UAAU,EAAE;MAC/C,IAAIC,KAAK,GAAGR,KAAK;MACjB,IAAIS,UAAU,GAAGD,KAAK,CAACE,mBAAmB,CAACJ,KAAK,CAACK,UAAU,CAACC,EAAE,CAAC;MAC/D,IAAIJ,KAAK,CAACK,eAAe,EAAE;QACvBL,KAAK,CAACK,eAAe,CAACC,SAAS,CAACC,MAAM,CAAC,0BAA0B,CAAC;QAClEP,KAAK,CAACK,eAAe,CAACC,SAAS,CAACC,MAAM,CAAC,sBAAsB,CAAC;QAC9DP,KAAK,CAACK,eAAe,CAACC,SAAS,CAACE,GAAG,CAAC,+BAA+B,CAAC;MACxE;MACA,IAAIV,KAAK,CAACK,UAAU,CAACM,aAAa,CAACL,EAAE,KAAKJ,KAAK,CAACV,SAAS,CAACoB,OAAO,CAACN,EAAE,GAAG,4BAA4B,GAAGH,UAAU,EAAE;QAC9GD,KAAK,CAACW,iBAAiB,CAACb,KAAK,CAACK,UAAU,CAACM,aAAa,CAAC;QACvDT,KAAK,CAACK,eAAe,GAAGP,KAAK,CAACK,UAAU,CAACM,aAAa;MAC1D,CAAC,MACI,IAAIX,KAAK,CAACK,UAAU,CAACC,EAAE,KAAKJ,KAAK,CAACV,SAAS,CAACoB,OAAO,CAACN,EAAE,GAAG,4BAA4B,GAAGH,UAAU,EAAE;QACrGD,KAAK,CAACW,iBAAiB,CAACb,KAAK,CAACK,UAAU,CAAC;QACzCH,KAAK,CAACK,eAAe,GAAGP,KAAK,CAACK,UAAU;MAC5C;MACAH,KAAK,CAACV,SAAS,CAACsB,kBAAkB,CAACX,UAAU,GAAG,CAAC,CAAC;MAClDD,KAAK,CAACJ,kBAAkB,GAAG,IAAI;MAC/BI,KAAK,CAACa,iBAAiB,CAACZ,UAAU,GAAG,CAAC,CAAC;MACvC,IAAI,CAACF,UAAU,EAAE;QACbC,KAAK,CAACT,aAAa,CAACuB,oBAAoB,CAAC,CAAC;MAC9C;MACA,IAAItB,KAAK,CAACF,SAAS,CAACyB,gBAAgB,IAAIvB,KAAK,CAACF,SAAS,CAACyB,gBAAgB,CAACC,mBAAmB,EAAE;QAC1F;QACA,IAAIC,iBAAiB,GAAGC,QAAQ,CAAC1B,KAAK,CAACF,SAAS,CAACyB,gBAAgB,CAACC,mBAAmB,CAACC,iBAAiB,CAAC;QACxGzB,KAAK,CAACF,SAAS,CAACyB,gBAAgB,CAACC,mBAAmB,CAACG,iBAAiB,CAACF,iBAAiB,CAAC;MAC7F;IACJ,CAAC;IACD;AACR;AACA;AACA;IACQ,IAAI,CAACG,gBAAgB,GAAG,UAAUtB,KAAK,EAAE;MACrC,IAAIA,KAAK,IAAIA,KAAK,CAACuB,GAAG,KAAK,OAAO,IAAIvB,KAAK,CAACuB,GAAG,KAAK,GAAG,EAAE;QACrD7B,KAAK,CAACK,cAAc,CAACC,KAAK,EAAE,IAAI,CAAC;QACjCA,KAAK,CAACwB,cAAc,CAAC,CAAC;QACtBxB,KAAK,CAACyB,eAAe,CAAC,CAAC;MAC3B;IACJ,CAAC;IACD;AACR;AACA;AACA;IACQ,IAAI,CAACC,kBAAkB,GAAG,UAAU1B,KAAK,EAAE;MACvC,IAAIE,KAAK,GAAGR,KAAK;MACjB,IAAIS,UAAU,GAAGD,KAAK,CAACE,mBAAmB,CAACJ,KAAK,CAACK,UAAU,CAACC,EAAE,CAAC;MAC/D,IAAIN,KAAK,CAACK,UAAU,CAACC,EAAE,KAAKJ,KAAK,CAACV,SAAS,CAACoB,OAAO,CAACN,EAAE,GAAG,4BAA4B,GAAGH,UAAU,EAAE;QAChGD,KAAK,CAACyB,iBAAiB,CAAC3B,KAAK,CAACK,UAAU,CAAC;MAC7C,CAAC,MACI,IAAIL,KAAK,CAACK,UAAU,CAACC,EAAE,KAAKJ,KAAK,CAACV,SAAS,CAACoB,OAAO,CAACN,EAAE,GAAG,mBAAmB,GAAGH,UAAU,EAAE;QAC5FD,KAAK,CAACyB,iBAAiB,CAAC3B,KAAK,CAACK,UAAU,CAACM,aAAa,CAAC;MAC3D;IACJ,CAAC;IACD;AACR;AACA;AACA;IACQ,IAAI,CAACiB,mBAAmB,GAAG,UAAU5B,KAAK,EAAE;MACxC,IAAIE,KAAK,GAAGR,KAAK;MACjB,IAAIS,UAAU,GAAGD,KAAK,CAACE,mBAAmB,CAACJ,KAAK,CAACK,UAAU,CAACC,EAAE,CAAC;MAC/D,IAAIN,KAAK,CAACK,UAAU,CAACM,aAAa,CAACL,EAAE,KAAKJ,KAAK,CAACV,SAAS,CAACoB,OAAO,CAACN,EAAE,GAAG,iBAAiB,EAAE;QACtFJ,KAAK,CAAC2B,kBAAkB,CAAC7B,KAAK,CAACK,UAAU,CAACyB,QAAQ,CAAC,CAAC,CAAC,CAACA,QAAQ,CAAC,CAAC,CAAC,CAAC;MACtE,CAAC,MACI,IAAI9B,KAAK,CAACK,UAAU,CAACM,aAAa,CAACL,EAAE,KAAKJ,KAAK,CAACV,SAAS,CAACoB,OAAO,CAACN,EAAE,GAAG,aAAa,GAAGH,UAAU,EAAE;QACpGD,KAAK,CAAC2B,kBAAkB,CAAC7B,KAAK,CAACK,UAAU,CAACM,aAAa,CAACmB,QAAQ,CAAC,CAAC,CAAC,CAAC;MACxE;IACJ,CAAC;IACD,IAAI,CAACtC,SAAS,GAAGA,SAAS;IAC1B,IAAI,CAACC,aAAa,GAAGA,aAAa;EACtC;EACA;AACJ;AACA;EACIF,aAAa,CAACwC,SAAS,CAACC,wBAAwB,GAAG,YAAY;IAC3D;IACA,IAAI,CAACC,aAAa,GAAG5C,aAAa,CAAC,KAAK,EAAE;MAAEiB,EAAE,EAAE,IAAI,CAACd,SAAS,CAACoB,OAAO,CAACN,EAAE,GAAG,iBAAiB;MAAE4B,SAAS,EAAE;IAAyC,CAAC,CAAC;IACrJ,IAAI,CAACzC,aAAa,CAAC0C,cAAc,CAACC,cAAc,CAACC,WAAW,CAAC,IAAI,CAACJ,aAAa,CAAC;EACpF,CAAC;EACD;AACJ;AACA;AACA;AACA;EACI1C,aAAa,CAACwC,SAAS,CAACO,iBAAiB,GAAG,YAAY;IACpD,IAAI,IAAI,CAAC7C,aAAa,CAAC0C,cAAc,EAAE;MACnC,IAAI,CAAC1C,aAAa,CAAC0C,cAAc,CAACG,iBAAiB,CAAC,CAAC;IACzD;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;EACI/C,aAAa,CAACwC,SAAS,CAACQ,kBAAkB,GAAG,YAAY;IACrD,IAAI,IAAI,CAAC9C,aAAa,CAAC0C,cAAc,EAAE;MACnC,IAAI,CAAC1C,aAAa,CAAC0C,cAAc,CAACI,kBAAkB,CAAC,CAAC;IAC1D;EACJ,CAAC;EACD;EACA;AACJ;AACA;EACI;EACAhD,aAAa,CAACwC,SAAS,CAACS,0BAA0B,GAAG,YAAY;IAC7D,IAAItC,KAAK,GAAG,IAAI;IAChB;IACA,IAAIuC,IAAI,GAAG,CAAC,CAACC,QAAQ,CAACC,YAAY;IAClC,IAAI,CAACF,IAAI,EAAE;MACP;MACA,OAAO,IAAIG,OAAO;MAClB;MACA,UAAUC,oBAAoB,EAAEC,MAAM,EAAE;QACpC5C,KAAK,CAAC6C,eAAe,CAAC7C,KAAK,CAAC;MAChC,CAAC,CAAC;IACN,CAAC,MACI;MACD,IAAI,CAAC6C,eAAe,CAAC7C,KAAK,CAAC;MAC3B,OAAO,IAAI;IACf;EACJ,CAAC;EACDX,aAAa,CAACwC,SAAS,CAACgB,eAAe,GAAG,UAAU7C,KAAK,EAAE;IACvD;IACAA,KAAK,CAAC8C,UAAU,GAAG9C,KAAK,CAACP,cAAc;IACvC;IACAO,KAAK,CAACP,cAAc,GAAGO,KAAK,CAAC8C,UAAU,GAAG9C,KAAK,CAACN,kBAAkB,GAAGM,KAAK,CAACV,SAAS,CAACyD,SAAS,GAAG/C,KAAK,CAAC8C,UAAU,GAAG9C,KAAK,CAACN,kBAAkB,GAAGM,KAAK,CAACV,SAAS,CAACyD,SAAS;IACxK,IAAIC,uBAAuB,GAAG,KAAK;IACnC,KAAK,IAAIC,CAAC,GAAGjD,KAAK,CAAC8C,UAAU,EAAEG,CAAC,GAAGjD,KAAK,CAACP,cAAc,EAAEwD,CAAC,EAAE,EAAE;MAC1D,IAAIjD,KAAK,CAACT,aAAa,CAACyD,uBAAuB,CAACC,CAAC,CAAC,EAAE;QAChDD,uBAAuB,GAAG,IAAI;MAClC;IACJ;IACA,IAAIE,oBAAoB,GAAG,EAAE;IAC7B,IAAIF,uBAAuB,EAAE;MACzBE,oBAAoB,GAAGlD,KAAK,CAACT,aAAa,CAAC4D,qBAAqB,CAACC,QAAQ,CAAC,CAAC;IAC/E;IACA;IACA,IAAIC,UAAU,GAAG;MAAEC,SAAS,EAAEtD,KAAK,CAAC8C,UAAU,CAACM,QAAQ,CAAC,CAAC;MAAEG,OAAO,EAAEvD,KAAK,CAACP,cAAc,CAAC2D,QAAQ,CAAC,CAAC;MAAEI,KAAK,EAAE,MAAM;MAAEC,KAAK,EAAE,KAAK;MAAEC,MAAM,EAAE1D,KAAK,CAACT,aAAa,CAACmE,MAAM;MAAEC,MAAM,EAAE,uBAAuB;MAAEC,SAAS,EAAE5D,KAAK,CAACV,SAAS,CAACoB,OAAO,CAACN,EAAE;MAAEyD,QAAQ,EAAE7D,KAAK,CAACT,aAAa,CAACuE,UAAU;MAAEd,uBAAuB,EAAEA,uBAAuB;MAAEe,wBAAwB,EAAEb;IAAqB,CAAC;IAC1X,IAAI,IAAI,CAAC3D,aAAa,CAACyE,cAAc,EAAE;MACnC;MACAX,UAAU,CAACS,UAAU,GAAG,IAAI,CAACvE,aAAa,CAACyE,cAAc;IAC7D;IACA,IAAI,CAAC,IAAI,CAACzE,aAAa,CAAC0E,mBAAmB,EAAE;MACzC,IAAI,CAACC,uBAAuB,GAAG,IAAIhF,WAAW,CAAC,IAAI,CAACI,SAAS,CAAC;MAC9D,IAAI,CAAC4E,uBAAuB,CAACC,GAAG,GAAGnE,KAAK,CAACV,SAAS,CAAC8E,UAAU,GAAG,GAAG,GAAGpE,KAAK,CAACV,SAAS,CAAC+E,oBAAoB,CAACC,eAAe;MAC1H,IAAI,CAACJ,uBAAuB,CAACK,YAAY,GAAG,MAAM;MAClD,IAAIvE,KAAK,CAACP,cAAc,GAAG,CAAC,IAAI,CAACL,iBAAiB,CAACY,KAAK,CAACT,aAAa,CAACmE,MAAM,CAAC,EAAE;QAC5E,IAAI,CAACQ,uBAAuB,CAACM,IAAI,CAACnB,UAAU,CAAC;MACjD;MACA;MACA,IAAI,CAACa,uBAAuB,CAACO,SAAS,GAAG,UAAUC,MAAM,EAAE;QACvD;QACA,IAAIC,IAAI,GAAGD,MAAM,CAACC,IAAI;QACtB,IAAIC,QAAQ,GAAG5E,KAAK,CAACT,aAAa,CAACsF,gBAAgB,CAACF,IAAI,CAAC;QACzD,IAAI,CAACC,QAAQ,EAAE;UACX5E,KAAK,CAAC8E,yBAAyB,CAACH,IAAI,CAAC;QACzC;MACJ,CAAC;MACD;MACA,IAAI,CAACT,uBAAuB,CAACa,SAAS,GAAG,UAAUL,MAAM,EAAE;QACvD1E,KAAK,CAACV,SAAS,CAAC0F,qBAAqB,CAACN,MAAM,CAACO,MAAM,EAAEP,MAAM,CAACQ,UAAU,EAAElF,KAAK,CAACV,SAAS,CAAC+E,oBAAoB,CAACC,eAAe,CAAC;MACjI,CAAC;MACD;MACA,IAAI,CAACJ,uBAAuB,CAACiB,OAAO,GAAG,UAAUT,MAAM,EAAE;QACrD1E,KAAK,CAACT,aAAa,CAAC6F,qBAAqB,CAAC,CAAC;QAC3CpF,KAAK,CAACV,SAAS,CAAC0F,qBAAqB,CAACN,MAAM,CAACO,MAAM,EAAEP,MAAM,CAACQ,UAAU,EAAElF,KAAK,CAACV,SAAS,CAAC+E,oBAAoB,CAACC,eAAe,CAAC;MACjI,CAAC;IACL,CAAC,MACI;MACD,KAAK,IAAIe,SAAS,GAAGrF,KAAK,CAAC8C,UAAU,EAAEuC,SAAS,GAAGrF,KAAK,CAACP,cAAc,EAAE4F,SAAS,EAAE,EAAE;QAClF,IAAI,CAAC9F,aAAa,CAAC+F,eAAe,CAACC,WAAW,CAAC;UAC3CF,SAAS,EAAEA,SAAS;UACpBG,OAAO,EAAE;QACb,CAAC,CAAC;MACN;IACJ;EACJ,CAAC;EACD;AACJ;AACA;EACInG,aAAa,CAACwC,SAAS,CAAC4D,kBAAkB,GAAG,UAAU3F,KAAK,EAAE;IAC1D,IAAIA,KAAK,CAAC6E,IAAI,CAACa,OAAO,KAAK,iBAAiB,EAAE;MAC1C,IAAIE,MAAM,GAAGlD,QAAQ,CAACrD,aAAa,CAAC,QAAQ,CAAC;MAC7C,IAAIwG,EAAE,GAAG7F,KAAK,CAAC6E,IAAI;QAAEiB,KAAK,GAAGD,EAAE,CAACC,KAAK;QAAEC,KAAK,GAAGF,EAAE,CAACE,KAAK;QAAEC,MAAM,GAAGH,EAAE,CAACG,MAAM;QAAET,SAAS,GAAGM,EAAE,CAACN,SAAS;MACrGK,MAAM,CAACG,KAAK,GAAGA,KAAK;MACpBH,MAAM,CAACI,MAAM,GAAGA,MAAM;MACtB,IAAIC,aAAa,GAAGL,MAAM,CAACM,UAAU,CAAC,IAAI,CAAC;MAC3C,IAAIC,SAAS,GAAGF,aAAa,CAACG,eAAe,CAACL,KAAK,EAAEC,MAAM,CAAC;MAC5DG,SAAS,CAACtB,IAAI,CAACwB,GAAG,CAACP,KAAK,CAAC;MACzBG,aAAa,CAACK,YAAY,CAACH,SAAS,EAAE,CAAC,EAAE,CAAC,CAAC;MAC3C,IAAII,QAAQ,GAAGX,MAAM,CAACY,SAAS,CAAC,CAAC;MACjC,IAAI3B,IAAI,GAAI;QACR4B,cAAc,EAAEF,QAAQ;QACxB/C,SAAS,EAAE,IAAI,CAACR,UAAU;QAC1BS,OAAO,EAAE,IAAI,CAAC9D,cAAc;QAC5BoE,QAAQ,EAAE,IAAI,CAACtE,aAAa,CAACuE,UAAU;QACvCuB,SAAS,EAAEA;MACf,CAAE;MACF,IAAI,CAACP,yBAAyB,CAACH,IAAI,CAAC;IACxC;EACJ,CAAC;EACD;AACJ;AACA;AACA;EACI;EACAtF,aAAa,CAACwC,SAAS,CAACiD,yBAAyB,GAAG,UAAUH,IAAI,EAAE;IAChE,IAAIA,IAAI,EAAE;MACN,IAAI3E,KAAK,GAAG,IAAI;MAChB,IAAI,OAAO2E,IAAI,KAAK,QAAQ,EAAE;QAC1B,IAAI;UACAA,IAAI,GAAG6B,IAAI,CAACC,KAAK,CAAC9B,IAAI,CAAC;QAC3B,CAAC,CACD,OAAO+B,KAAK,EAAE;UACV1G,KAAK,CAACT,aAAa,CAACoH,cAAc,CAAC,GAAG,EAAEhC,IAAI,EAAE3E,KAAK,CAACV,SAAS,CAAC+E,oBAAoB,CAACC,eAAe,CAAC;UACnGK,IAAI,GAAG,IAAI;QACf;MACJ;MACA,IAAIA,IAAI,IAAIA,IAAI,CAACd,QAAQ,KAAK7D,KAAK,CAACT,aAAa,CAACuE,UAAU,EAAE;QAC1D9D,KAAK,CAACV,SAAS,CAACsH,sBAAsB,CAAC5G,KAAK,CAACV,SAAS,CAAC+E,oBAAoB,CAACC,eAAe,EAAEK,IAAI,CAAC;QAClG3E,KAAK,CAAC2C,oBAAoB,CAACgC,IAAI,CAAC;QAChC,IAAI3E,KAAK,CAACV,SAAS,CAACuH,mBAAmB,EAAE;UACrC7G,KAAK,CAACT,aAAa,CAAC0C,cAAc,CAAC6E,eAAe,GAAG,IAAI;UACzD;UACA9G,KAAK,CAACT,aAAa,CAAC0C,cAAc,CAAC8E,YAAY,CAACC,WAAW,GAAGhH,KAAK,CAACV,SAAS,CAAC2H,SAAS,CAACC,WAAW,CAAC,iBAAiB,CAAC;UACtH1E,QAAQ,CAAC2E,cAAc,CAACnH,KAAK,CAACV,SAAS,CAACoB,OAAO,CAACN,EAAE,GAAG,iBAAiB,CAAC,CAACgH,KAAK,CAACC,OAAO,GAAG,MAAM;UAC9F,IAAIC,eAAe,GAAGtH,KAAK,CAACV,SAAS,CAACoB,OAAO,CAAC6G,aAAa,CAAC,qBAAqB,CAAC;UAClF,IAAID,eAAe,EAAE;YACjBA,eAAe,CAACF,KAAK,CAACC,OAAO,GAAG,MAAM;UAC1C;UACArH,KAAK,CAACT,aAAa,CAAC0C,cAAc,CAACuF,8BAA8B,CAAC,CAAC;UACnExH,KAAK,CAACT,aAAa,CAAC0C,cAAc,CAACwF,6BAA6B,CAAC,CAAC;UAClEzH,KAAK,CAACT,aAAa,CAAC0C,cAAc,CAACyF,cAAc,GAAG,KAAK;QAC7D;MACJ;IACJ;EACJ,CAAC;EACD;AACJ;AACA;AACA;EACIrI,aAAa,CAACwC,SAAS,CAAC8F,kBAAkB,GAAG,UAAU1H,UAAU,EAAE;IAC/D,IAAI2H,YAAY,GAAG,IAAI,CAACC,oBAAoB,CAAC5H,UAAU,CAAC;IACxD,IAAI,IAAI,CAAC8B,aAAa,EAAE;MACpB,IAAI+F,cAAc,GAAG,IAAI,CAAC/F,aAAa,CAACH,QAAQ,CAAC3B,UAAU,CAAC;MAC5D,IAAI6H,cAAc,EAAE;QAChB,IAAIC,YAAY,GAAGD,cAAc,CAAClG,QAAQ,CAAC,CAAC,CAAC;QAC7C,IAAIoG,SAAS,GAAG,KAAK,CAAC;QACtB,IAAIJ,YAAY,EAAE;UACd,IAAIG,YAAY,CAACC,SAAS,IAAI,CAAC,EAAE;YAC7BA,SAAS,GAAGD,YAAY,CAACtH,aAAa,CAACuH,SAAS,GAAGD,YAAY,CAACE,SAAS,GAAG,IAAI,CAACtI,kBAAkB;UACvG,CAAC,MACI;YACDqI,SAAS,GAAGD,YAAY,CAACC,SAAS,GAAGD,YAAY,CAACE,SAAS,GAAG,IAAI,CAACtI,kBAAkB;UACzF;UACA,IAAI,CAACJ,aAAa,CAAC0C,cAAc,CAACC,cAAc,CAACgG,SAAS,GAAGF,SAAS;QAC1E;QACA,IAAI,CAAC,IAAI,CAACpI,kBAAkB,EAAE;UAC1B,IAAI,IAAI,CAACS,eAAe,EAAE;YACtB,IAAI,CAACA,eAAe,CAACC,SAAS,CAACC,MAAM,CAAC,0BAA0B,CAAC;YACjE,IAAI,CAACF,eAAe,CAACC,SAAS,CAACC,MAAM,CAAC,sBAAsB,CAAC;YAC7D,IAAI,CAACF,eAAe,CAACC,SAAS,CAACC,MAAM,CAAC,sBAAsB,CAAC;YAC7D,IAAI,CAACF,eAAe,CAACC,SAAS,CAACE,GAAG,CAAC,+BAA+B,CAAC;UACvE;UACA,IAAI,CAAC2H,aAAa,CAACJ,YAAY,EAAE9H,UAAU,CAAC;QAChD;QACA,IAAI,CAACI,eAAe,GAAG0H,YAAY,CAACnG,QAAQ,CAAC,CAAC,CAAC;MACnD;IACJ;EACJ,CAAC;EACDvC,aAAa,CAACwC,SAAS,CAACgG,oBAAoB,GAAG,UAAU5H,UAAU,EAAE;IACjE,IAAI2H,YAAY,GAAG,KAAK;IACxB,IAAI,IAAI,CAAC7F,aAAa,EAAE;MACpB,IAAIqG,aAAa,GAAG,IAAI,CAACC,gBAAgB,CAAC,CAAC;MAC3C,IAAIC,gBAAgB,GAAGF,aAAa,CAACG,KAAK,CAACC,MAAM;MACjD;MACA,IAAIF,gBAAgB,GAAG,CAAC,EAAE;QACtB,IAAIG,kBAAkB,GAAG,IAAI,CAACvI,mBAAmB,CAACkI,aAAa,CAACM,KAAK,CAACtI,EAAE,CAAC;QACzE;QACA;QACA,IAAIuI,iBAAiB,GAAIL,gBAAgB,GAAG,CAAC,GAAG,IAAI,CAACpI,mBAAmB,CAACkI,aAAa,CAACQ,IAAI,CAACxI,EAAE,CAAC,GAAGqI,kBAAmB;QACrH,IAAIxI,UAAU,IAAIwI,kBAAkB,IAAIxI,UAAU,IAAI0I,iBAAiB,EAAE;UACrEf,YAAY,GAAG,IAAI;QACvB,CAAC,MACI;UACD;UACAQ,aAAa,CAACG,KAAK,CAACM,IAAI,CAAC,UAAUC,IAAI,EAAE;YACrC,IAAIC,MAAM,GAAGD,IAAI,CAAC1I,EAAE,CAAC4I,KAAK,CAAC,GAAG,CAAC;YAC/B,IAAIC,eAAe,GAAGF,MAAM,CAACA,MAAM,CAACP,MAAM,GAAG,CAAC,CAAC;YAC/C;YACA,IAAItH,QAAQ,CAAC+H,eAAe,CAAC,KAAKhJ,UAAU,EAAE;cAC1C,OAAO,KAAK;YAChB;YACA2H,YAAY,GAAGkB,IAAI,CAACI,OAAO,GAAG,GAAG,IAAKJ,IAAI,CAACA,IAAI,CAACK,WAAW,GAAGL,IAAI,CAACA,IAAI,CAACM,YAAY,IAAIN,IAAI,CAACI,OAAO,GAAG,EAAG;YAC1G,OAAO,IAAI;UACf,CAAC,CAAC;QACN;MACJ;IACJ;IACA,OAAOtB,YAAY;EACvB,CAAC;EACDvI,aAAa,CAACwC,SAAS,CAAC3B,mBAAmB,GAAG,UAAUmJ,MAAM,EAAE;IAC5D,IAAIN,MAAM,GAAGM,MAAM,CAACL,KAAK,CAAC,GAAG,CAAC;IAC9B,IAAI/I,UAAU,GAAG8I,MAAM,CAACA,MAAM,CAACP,MAAM,GAAG,CAAC,CAAC;IAC1C;IACA,OAAOtH,QAAQ,CAACjB,UAAU,CAAC;EAC/B,CAAC;EACDZ,aAAa,CAACwC,SAAS,CAACsG,aAAa,GAAG,UAAUmB,SAAS,EAAErJ,UAAU,EAAE;IACrE,IAAIqJ,SAAS,CAAC1H,QAAQ,CAAC,CAAC,CAAC,CAACxB,EAAE,KAAK,IAAI,CAACd,SAAS,CAACoB,OAAO,CAACN,EAAE,GAAG,4BAA4B,GAAGH,UAAU,EAAE;MACpG,IAAI,CAACsJ,kBAAkB,CAACD,SAAS,CAAC1H,QAAQ,CAAC,CAAC,CAAC,CAAC;IAClD;EACJ,CAAC;EACD;EACAvC,aAAa,CAACwC,SAAS,CAACc,oBAAoB,GAAG,UAAUgC,IAAI,EAAE;IAC3D,IAAI,IAAI,CAAC5C,aAAa,EAAE;MACpB,IAAI,CAACxC,aAAa,CAAC0E,mBAAmB,GAAG,IAAI,CAACuF,0BAA0B,CAAC7E,IAAI,CAAC,GAAG,IAAI,CAAC8E,0BAA0B,CAAC9E,IAAI,CAAC;IAC1H;IACA,IAAI,CAACpF,aAAa,CAAC0C,cAAc,CAACyH,qBAAqB,CAAC,CAAC;IACzD,IAAI,IAAI,CAACjK,cAAc,KAAK,IAAI,CAACF,aAAa,CAACwD,SAAS,IAAI,IAAI,CAAChB,aAAa,EAAE;MAC5E;MACA,IAAIQ,IAAI,GAAG,CAAC,CAACC,QAAQ,CAACC,YAAY;MAClC,IAAI,CAACF,IAAI,EAAE;QACPG,OAAO,CAACiH,GAAG,CAAC,CAAC,IAAI,CAACrH,0BAA0B,CAAC,CAAC,CAAC,CAAC;MACpD,CAAC,MACI;QACD,IAAI,CAACA,0BAA0B,CAAC,CAAC;MACrC;IACJ;EACJ,CAAC;EACD;EACAjD,aAAa,CAACwC,SAAS,CAAC4H,0BAA0B,GAAG,UAAU9E,IAAI,EAAE;IACjE,IAAIrB,SAAS,GAAIqB,IAAI,IAAIiF,KAAK,CAACjF,IAAI,CAACrB,SAAS,CAAC,GAAIqB,IAAI,CAACrB,SAAS,GAAG,IAAI,CAACR,UAAU;IAClF,IAAIS,OAAO,GAAIoB,IAAI,IAAIiF,KAAK,CAACjF,IAAI,CAACpB,OAAO,CAAC,GAAIoB,IAAI,CAACpB,OAAO,GAAG,IAAI,CAAC9D,cAAc;IAChF,KAAK,IAAIwD,CAAC,GAAGK,SAAS,EAAEL,CAAC,GAAGM,OAAO,EAAEN,CAAC,EAAE,EAAE;MACtC,IAAI,CAAC4G,oBAAoB,CAAC5G,CAAC,EAAE0B,IAAI,CAAC;IACtC;EACJ,CAAC;EACD;EACAtF,aAAa,CAACwC,SAAS,CAAC2H,0BAA0B,GAAG,UAAU7E,IAAI,EAAE;IACjE,IAAIU,SAAS,GAAGV,IAAI,CAACU,SAAS;IAC9B,IAAI,CAACwE,oBAAoB,CAACxE,SAAS,EAAEV,IAAI,CAAC;EAC9C,CAAC;EACD;EACAtF,aAAa,CAACwC,SAAS,CAACgI,oBAAoB,GAAG,UAAUxE,SAAS,EAAEV,IAAI,EAAE;IACtE;IACA,IAAImF,QAAQ,GAAG3K,aAAa,CAAC,GAAG,EAAE;MAAEiB,EAAE,EAAE,OAAO,GAAGiF,SAAS;MAAE0E,KAAK,EAAE;QAAE,YAAY,EAAE,mBAAmB,IAAI1E,SAAS,GAAG,CAAC,CAAC;QAAE,MAAM,EAAE;MAAO,CAAC;MAAErD,SAAS,EAAE;IAA6B,CAAC,CAAC;IACvL;IACA,IAAIsH,SAAS,GAAGnK,aAAa,CAAC,KAAK,EAAE;MAAEiB,EAAE,EAAE,IAAI,CAACd,SAAS,CAACoB,OAAO,CAACN,EAAE,GAAG,aAAa,GAAGiF,SAAS;MAAErD,SAAS,EAAE;IAAuC,CAAC,CAAC;IACtJ;IACA,IAAI,CAACgI,sBAAsB,GAAG7K,aAAa,CAAC,KAAK,EAAE;MAAEiB,EAAE,EAAE,IAAI,CAACd,SAAS,CAACoB,OAAO,CAACN,EAAE,GAAG,4BAA4B,GAAGiF,SAAS;MAAErD,SAAS,EAAE;IAAgC,CAAC,CAAC;IAC5KsH,SAAS,CAACnH,WAAW,CAAC,IAAI,CAAC6H,sBAAsB,CAAC;IAClD;IACA,IAAIC,mBAAmB,GAAG9K,aAAa,CAAC,KAAK,EAAE;MAAEiB,EAAE,EAAE,IAAI,CAACd,SAAS,CAACoB,OAAO,CAACN,EAAE,GAAG,wBAAwB,GAAGiF,SAAS;MAAErD,SAAS,EAAE;IAAwB,CAAC,CAAC;IAC5JiI,mBAAmB,CAACjD,WAAW,GAAG,CAAC3B,SAAS,GAAG,CAAC,EAAEjC,QAAQ,CAAC,CAAC;IAC5DkG,SAAS,CAACnH,WAAW,CAAC8H,mBAAmB,CAAC;IAC1C;IACA,IAAI,CAAC1D,cAAc,GAAGpH,aAAa,CAAC,KAAK,EAAE;MAAEiB,EAAE,EAAE,IAAI,CAACd,SAAS,CAACoB,OAAO,CAACN,EAAE,GAAG,mBAAmB,GAAGiF,SAAS;MAAErD,SAAS,EAAE,sBAAsB;MAAE+H,KAAK,EAAE;QAAE,UAAU,EAAE,GAAG;QAAE,YAAY,EAAE,mBAAmB,IAAI1E,SAAS,GAAG,CAAC;MAAE;IAAE,CAAC,CAAC;IACnO;IACA,IAAI,CAACkB,cAAc,CAAC2D,GAAG,GAAG,IAAI,CAAC3K,aAAa,CAAC0E,mBAAmB,IAAI,OAAOU,IAAI,CAAC4B,cAAc,KAAK,QAAQ,IAAI5B,IAAI,CAAC4B,cAAc,YAAY4D,MAAM,GAAGxF,IAAI,CAAC4B,cAAc,GAAG5B,IAAI,CAAC4B,cAAc,CAAClB,SAAS,CAAC;IAC3M,IAAI,CAACkB,cAAc,CAAC6D,GAAG,GAAG,IAAI,CAAC9K,SAAS,CAACoB,OAAO,CAACN,EAAE,GAAG,kBAAkB,GAAGiF,SAAS;IACpF,IAAI,IAAI,CAAC9F,aAAa,CAAC8K,QAAQ,CAAChF,SAAS,CAAC,IAAK,IAAI,CAAC9F,aAAa,CAAC8K,QAAQ,CAAChF,SAAS,CAAC,CAACS,MAAM,GAAG,IAAI,CAACvG,aAAa,CAAC8K,QAAQ,CAAChF,SAAS,CAAC,CAACQ,KAAM,EAAE;MAC1I,IAAI,CAACU,cAAc,CAACa,KAAK,CAACtB,MAAM,GAAG,MAAM;MACzC,IAAI,CAACS,cAAc,CAACa,KAAK,CAACvB,KAAK,GAAG,OAAO;MACzCyD,SAAS,CAAClC,KAAK,CAACtB,MAAM,GAAG,OAAO;MAChCwD,SAAS,CAAClC,KAAK,CAACvB,KAAK,GAAG,OAAO;MAC/BiE,QAAQ,CAAC1C,KAAK,CAACkD,IAAI,GAAG,OAAO;MAC7BL,mBAAmB,CAAC7C,KAAK,CAACkD,IAAI,GAAG,MAAM;MACvCR,QAAQ,CAAC1C,KAAK,CAACmD,WAAW,GAAG,MAAM;MACnCjB,SAAS,CAAClC,KAAK,CAACoD,UAAU,GAAG,MAAM;MACnClB,SAAS,CAAClC,KAAK,CAACmD,WAAW,GAAG,KAAK;IACvC;IACA,IAAI,CAACP,sBAAsB,CAAC7H,WAAW,CAAC,IAAI,CAACoE,cAAc,CAAC;IAC5DuD,QAAQ,CAAC3H,WAAW,CAACmH,SAAS,CAAC;IAC/B,IAAI,CAACvH,aAAa,CAACI,WAAW,CAAC2H,QAAQ,CAAC;IACxC,IAAI,CAACW,YAAY,CAAC,CAAC;IACnB,IAAIpF,SAAS,KAAK,CAAC,EAAE;MACjB,IAAI,CAACqF,wBAAwB,CAAC,CAAC;IACnC;EACJ,CAAC;EACDrL,aAAa,CAACwC,SAAS,CAAC4I,YAAY,GAAG,YAAY;IAC/C,IAAI,IAAI,CAACT,sBAAsB,EAAE;MAC7B,IAAI,CAACA,sBAAsB,CAACW,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC9K,cAAc,CAAC;MAC1E,IAAI,CAAC0G,cAAc,CAACoE,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAACvJ,gBAAgB,CAAC;MACtE,IAAI,CAAC4I,sBAAsB,CAACW,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAACnJ,kBAAkB,CAAC;MAClF,IAAI,CAACwI,sBAAsB,CAACW,gBAAgB,CAAC,YAAY,EAAE,IAAI,CAACjJ,mBAAmB,CAAC;IACxF;EACJ,CAAC;EACDrC,aAAa,CAACwC,SAAS,CAAC+I,cAAc,GAAG,YAAY;IACjD,IAAI,IAAI,CAACZ,sBAAsB,IAAI,IAAI,CAACzD,cAAc,EAAE;MACpD,IAAI,CAACyD,sBAAsB,CAACa,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAAChL,cAAc,CAAC;MAC7E,IAAI,CAAC0G,cAAc,CAACsE,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAACzJ,gBAAgB,CAAC;MACzE,IAAI,CAAC4I,sBAAsB,CAACa,mBAAmB,CAAC,WAAW,EAAE,IAAI,CAACrJ,kBAAkB,CAAC;MACrF,IAAI,CAACwI,sBAAsB,CAACa,mBAAmB,CAAC,YAAY,EAAE,IAAI,CAACnJ,mBAAmB,CAAC;IAC3F;EACJ,CAAC;EACDrC,aAAa,CAACwC,SAAS,CAAChB,iBAAiB,GAAG,UAAUZ,UAAU,EAAE;IAC9D,IAAIA,UAAU,GAAG,CAAC,IAAIA,UAAU,IAAI,IAAI,CAACV,aAAa,CAACwD,SAAS,IAAI,IAAI,CAACxD,aAAa,CAAC0B,iBAAiB,KAAKhB,UAAU,EAAE;MACrH,IAAI,CAACV,aAAa,CAACuL,eAAe,CAAC7K,UAAU,GAAG,CAAC,CAAC;IACtD,CAAC,MACI;MACD,IAAI,CAACL,kBAAkB,GAAG,KAAK;IACnC;EACJ,CAAC;EACDP,aAAa,CAACwC,SAAS,CAAClB,iBAAiB,GAAG,UAAUoK,gBAAgB,EAAE;IACpEA,gBAAgB,CAACzK,SAAS,CAACC,MAAM,CAAC,+BAA+B,CAAC;IAClEwK,gBAAgB,CAACzK,SAAS,CAACC,MAAM,CAAC,sBAAsB,CAAC;IACzDwK,gBAAgB,CAACzK,SAAS,CAACC,MAAM,CAAC,sBAAsB,CAAC;IACzDwK,gBAAgB,CAACzK,SAAS,CAACE,GAAG,CAAC,0BAA0B,CAAC;EAC9D,CAAC;EACDnB,aAAa,CAACwC,SAAS,CAACJ,iBAAiB,GAAG,UAAUsJ,gBAAgB,EAAE;IACpE;IACA,IAAI,CAACA,gBAAgB,CAACzK,SAAS,CAAC0K,QAAQ,CAAC,0BAA0B,CAAC,EAAE;MAClED,gBAAgB,CAACzK,SAAS,CAACC,MAAM,CAAC,+BAA+B,CAAC;MAClE,IAAI,CAACwK,gBAAgB,CAACzK,SAAS,CAAC0K,QAAQ,CAAC,sBAAsB,CAAC,EAAE;QAC9DD,gBAAgB,CAACzK,SAAS,CAACE,GAAG,CAAC,sBAAsB,CAAC;MAC1D;IACJ;EACJ,CAAC;EACDnB,aAAa,CAACwC,SAAS,CAACF,kBAAkB,GAAG,UAAUoJ,gBAAgB,EAAE;IACrE,IAAI,CAACA,gBAAgB,CAACzK,SAAS,CAAC0K,QAAQ,CAAC,0BAA0B,CAAC,EAAE;MAClE,IAAI,CAACD,gBAAgB,CAACzK,SAAS,CAAC0K,QAAQ,CAAC,sBAAsB,CAAC,EAAE;QAC9DD,gBAAgB,CAACzK,SAAS,CAACE,GAAG,CAAC,+BAA+B,CAAC;MACnE;MACAuK,gBAAgB,CAACzK,SAAS,CAACC,MAAM,CAAC,sBAAsB,CAAC;IAC7D,CAAC,MACI;MACD,IAAI,CAACwK,gBAAgB,CAACzK,SAAS,CAAC0K,QAAQ,CAAC,0BAA0B,CAAC,EAAE;QAClED,gBAAgB,CAACzK,SAAS,CAACC,MAAM,CAAC,0BAA0B,CAAC;QAC7DwK,gBAAgB,CAACzK,SAAS,CAACE,GAAG,CAAC,sBAAsB,CAAC;MAC1D;IACJ;EACJ,CAAC;EACDnB,aAAa,CAACwC,SAAS,CAAC0H,kBAAkB,GAAG,UAAUwB,gBAAgB,EAAE;IACrEA,gBAAgB,CAACzK,SAAS,CAACC,MAAM,CAAC,0BAA0B,CAAC;IAC7DwK,gBAAgB,CAACzK,SAAS,CAACC,MAAM,CAAC,sBAAsB,CAAC;IACzDwK,gBAAgB,CAACzK,SAAS,CAACE,GAAG,CAAC,sBAAsB,CAAC;EAC1D,CAAC;EACDnB,aAAa,CAACwC,SAAS,CAAC6I,wBAAwB,GAAG,YAAY;IAC3D,IAAI5C,cAAc,GAAG,IAAI,CAAC/F,aAAa,CAACH,QAAQ,CAAC,CAAC,CAAC;IACnD,IAAIkG,cAAc,EAAE;MAChB,IAAIC,YAAY,GAAGD,cAAc,CAAClG,QAAQ,CAAC,CAAC,CAAC,CAACA,QAAQ,CAAC,CAAC,CAAC;MACzD,IAAI,CAAC2H,kBAAkB,CAACxB,YAAY,CAAC;MACrC,IAAI,CAAC1H,eAAe,GAAG0H,YAAY;IACvC;EACJ,CAAC;EACD;AACJ;AACA;EACI1I,aAAa,CAACwC,SAAS,CAACoJ,KAAK,GAAG,YAAY;IACxC,IAAI,CAACnI,UAAU,GAAG,CAAC;IACnB,IAAI,CAACrD,cAAc,GAAG,CAAC;IACvB,IAAI,IAAI,CAACF,aAAa,CAAC0C,cAAc,EAAE;MACnC,IAAI,IAAI,CAAC1C,aAAa,CAAC0C,cAAc,CAACiJ,uBAAuB,EAAE;QAC3D,IAAI,CAAC3L,aAAa,CAAC0C,cAAc,CAACiJ,uBAAuB,CAAC9D,KAAK,CAACC,OAAO,GAAG,OAAO;QACjF,IAAI,CAAC9H,aAAa,CAAC0C,cAAc,CAACC,cAAc,CAACgG,SAAS,GAAG,CAAC;QAC9D,IAAI,CAAC3I,aAAa,CAAC0C,cAAc,CAACiJ,uBAAuB,CAAC9D,KAAK,CAACC,OAAO,GAAG,MAAM;MACpF;IACJ;IACA,IAAI,IAAI,CAACtF,aAAa,EAAE;MACpB,OAAO,IAAI,CAACA,aAAa,CAACoJ,aAAa,CAAC,CAAC,EAAE;QACvC,IAAI,CAACpJ,aAAa,CAACqJ,WAAW,CAAC,IAAI,CAACrJ,aAAa,CAACsJ,SAAS,CAAC;MAChE;IACJ;IACA,IAAI,IAAI,CAAC9L,aAAa,CAAC0C,cAAc,EAAE;MACnC,IAAI,CAAC1C,aAAa,CAAC0C,cAAc,CAACqJ,kBAAkB,CAAC,CAAC;IAC1D;IACA,IAAI,IAAI,CAACpH,uBAAuB,EAAE;MAC9B,IAAI,CAACA,uBAAuB,CAAC+G,KAAK,CAAC,CAAC;IACxC;IACA,IAAI,CAACL,cAAc,CAAC,CAAC;EACzB,CAAC;EACDvL,aAAa,CAACwC,SAAS,CAACwG,gBAAgB,GAAG,YAAY;IACnD,OAAO,IAAI,CAACkD,kBAAkB,CAAC,IAAI,CAAChM,aAAa,CAAC0C,cAAc,CAACC,cAAc,EAAE,IAAI,CAACH,aAAa,CAACH,QAAQ,CAAC;EACjH,CAAC;EACDvC,aAAa,CAACwC,SAAS,CAAC0J,kBAAkB,GAAG,UAAUC,aAAa,EAAEC,qBAAqB,EAAE;IACzF,IAAIC,GAAG,GAAGF,aAAa,CAACtD,SAAS;IACjC,IAAIyD,MAAM,GAAGD,GAAG,GAAGF,aAAa,CAACI,YAAY;IAC7C,IAAItB,IAAI,GAAGkB,aAAa,CAACK,UAAU;IACnC,IAAIC,KAAK,GAAGxB,IAAI,GAAGkB,aAAa,CAACO,WAAW;IAC5C;AACR;AACA;IACQ,SAASC,oCAAoCA,CAACC,4BAA4B,EAAE;MACxE,IAAIC,aAAa,GAAGD,4BAA4B,CAACjE,SAAS,GAAGiE,4BAA4B,CAAChE,SAAS,GAAGgE,4BAA4B,CAACL,YAAY;MAC/I,OAAOM,aAAa,GAAGR,GAAG;IAC9B;IACA;IACA,IAAIS,OAAO,GAAG,EAAE;IAChB,IAAIpK,aAAa;IACjB,IAAIrB,OAAO;IACX,IAAI0L,aAAa;IACjB,IAAIC,UAAU;IACd,IAAIC,UAAU;IACd,IAAIC,YAAY;IAChB,IAAIC,YAAY;IAChB,IAAIC,SAAS;IACb,IAAIC,SAAS;IACb,IAAIC,WAAW;IACf,IAAIC,cAAc;IAClB,IAAIC,sBAAsB,GAAGpB,qBAAqB,CAACjD,MAAM,KAAK,CAAC,GAAG,CAAC,GAC/D,IAAI,CAACsE,qBAAqB,CAACrB,qBAAqB,EAAEO,oCAAoC,CAAC;IAC3F,IAAIP,qBAAqB,CAACjD,MAAM,GAAG,CAAC,EAAE;MAClCqE,sBAAsB,GAClB,IAAI,CAACE,iCAAiC,CAACF,sBAAsB,EAAEpB,qBAAqB,EAAEC,GAAG,CAAC;IAClG;IACA,IAAIsB,QAAQ,GAAG,CAAC,CAAC;IACjB,KAAK,IAAI/J,CAAC,GAAG4J,sBAAsB,EAAEI,EAAE,GAAGxB,qBAAqB,CAACjD,MAAM,EAAEvF,CAAC,GAAGgK,EAAE,EAAEhK,CAAC,EAAE,EAAE;MACjFlB,aAAa,GAAG,IAAI,CAACmL,mBAAmB,CAACjK,CAAC,CAAC;MAC3CvC,OAAO,GAAGqB,aAAa;MACvByK,YAAY,GAAG9L,OAAO,CAACyM,UAAU,GAAGzM,OAAO,CAAC0M,UAAU;MACtDhB,aAAa,GAAG1L,OAAO,CAACsH,SAAS,GAAGtH,OAAO,CAACuH,SAAS;MACrDwE,SAAS,GAAG/L,OAAO,CAACqL,WAAW;MAC/BM,UAAU,GAAG3L,OAAO,CAACkL,YAAY;MACjCc,SAAS,GAAGF,YAAY,GAAGC,SAAS;MACpCH,UAAU,GAAGF,aAAa,GAAGC,UAAU;MACvC,IAAIW,QAAQ,KAAK,CAAC,CAAC,EAAE;QACjB,IAAIV,UAAU,IAAIX,MAAM,EAAE;UACtBqB,QAAQ,GAAGV,UAAU;QACzB;MACJ,CAAC,MACI,IAAIF,aAAa,GAAGY,QAAQ,EAAE;QAC/B;MACJ;MACA,IAAIV,UAAU,IAAIZ,GAAG,IAAIU,aAAa,IAAIT,MAAM,IAC5Ce,SAAS,IAAIpC,IAAI,IAAIkC,YAAY,IAAIV,KAAK,EAAE;QAC5C;MACJ;MACAS,YAAY,GAAGc,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE5B,GAAG,GAAGU,aAAa,CAAC,GAC3CiB,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEhB,UAAU,GAAGX,MAAM,CAAC;MACpCgB,WAAW,GAAGU,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEhD,IAAI,GAAGkC,YAAY,CAAC,GAC1Ca,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEZ,SAAS,GAAGZ,KAAK,CAAC;MAClC;MACAc,cAAc,GAAI,CAACP,UAAU,GAAGE,YAAY,KAAKE,SAAS,GAAGE,WAAW,CAAC,GAAG,GAAG,GAAGN,UAAU,GAAGI,SAAS,GAAI,CAAC;MAC7GN,OAAO,CAACoB,IAAI,CAAC;QACTnN,EAAE,EAAE2B,aAAa,CAAC3B,EAAE;QACpBoN,CAAC,EAAEhB,YAAY;QACfiB,CAAC,EAAErB,aAAa;QAChBtD,IAAI,EAAE/G,aAAa;QACnBmH,OAAO,EAAE0D;MACb,CAAC,CAAC;IACN;IACA,IAAIlE,KAAK,GAAGyD,OAAO,CAAC,CAAC,CAAC;IACtB,IAAIvD,IAAI,GAAGuD,OAAO,CAACA,OAAO,CAAC3D,MAAM,GAAG,CAAC,CAAC;IACtC,OAAO;MAAEE,KAAK,EAAEA,KAAK;MAAEE,IAAI,EAAEA,IAAI;MAAEL,KAAK,EAAE4D;IAAQ,CAAC;EACvD,CAAC;EACD;EACA9M,aAAa,CAACwC,SAAS,CAACiL,qBAAqB,GAAG,UAAUY,KAAK,EAAEC,SAAS,EAAE;IACxE,IAAIC,QAAQ,GAAG,CAAC;IAChB,IAAIC,QAAQ,GAAGH,KAAK,CAAClF,MAAM,GAAG,CAAC;IAC/B,IAAIkF,KAAK,CAAClF,MAAM,KAAK,CAAC,IAAI,CAACmF,SAAS,CAAC,IAAI,CAACT,mBAAmB,CAACW,QAAQ,CAAC,CAAC,EAAE;MACtE,OAAOH,KAAK,CAAClF,MAAM,GAAG,CAAC;IAC3B;IACA,IAAImF,SAAS,CAAC,IAAI,CAACT,mBAAmB,CAACU,QAAQ,CAAC,CAAC,EAAE;MAC/C,OAAOA,QAAQ;IACnB;IACA,OAAOA,QAAQ,GAAGC,QAAQ,EAAE;MACxB;MACA,IAAIC,YAAY,GAAIF,QAAQ,GAAGC,QAAQ,IAAK,CAAC;MAC7C,IAAIF,SAAS,CAAC,IAAI,CAACT,mBAAmB,CAACY,YAAY,CAAC,CAAC,EAAE;QACnDD,QAAQ,GAAGC,YAAY;MAC3B,CAAC,MACI;QACDF,QAAQ,GAAGE,YAAY,GAAG,CAAC;MAC/B;IACJ;IACA,OAAOF,QAAQ,CAAC,CAAC;EACrB,CAAC;EACDvO,aAAa,CAACwC,SAAS,CAACkL,iCAAiC,GAAG,UAAUgB,KAAK,EAAExF,KAAK,EAAEmD,GAAG,EAAE;IACrF,IAAIqC,KAAK,GAAG,CAAC,EAAE;MACX,OAAOA,KAAK;IAChB;IACA,IAAIhD,gBAAgB,GAAG,IAAI,CAACmC,mBAAmB,CAACa,KAAK,CAAC;IACtD,IAAIC,OAAO,GAAGjD,gBAAgB,CAAC/C,SAAS,GAAG+C,gBAAgB,CAAC9C,SAAS;IACrE,IAAI+F,OAAO,IAAItC,GAAG,EAAE;MAChBX,gBAAgB,GAAG,IAAI,CAACmC,mBAAmB,CAACa,KAAK,GAAG,CAAC,CAAC;MACtDC,OAAO,GAAGjD,gBAAgB,CAAC/C,SAAS,GAAG+C,gBAAgB,CAAC9C,SAAS;IACrE;IACA,KAAK,IAAIhF,CAAC,GAAG8K,KAAK,GAAG,CAAC,EAAE9K,CAAC,IAAI,CAAC,EAAE,EAAEA,CAAC,EAAE;MACjC8H,gBAAgB,GAAG,IAAI,CAACmC,mBAAmB,CAACjK,CAAC,CAAC;MAC9C,IAAI8H,gBAAgB,CAAC/C,SAAS,GAAG+C,gBAAgB,CAAC9C,SAAS,GAAG8C,gBAAgB,CAACa,YAAY,IAAIoC,OAAO,EAAE;QACpG;MACJ;MACAD,KAAK,GAAG9K,CAAC;IACb;IACA,OAAO8K,KAAK;EAChB,CAAC;EACD1O,aAAa,CAACwC,SAAS,CAACqL,mBAAmB,GAAG,UAAUa,KAAK,EAAE;IAC3D,IAAIjG,cAAc,GAAG,IAAI,CAAC/F,aAAa,CAACH,QAAQ,CAACmM,KAAK,CAAC;IACvD,OAAOjG,cAAc,CAAClG,QAAQ,CAAC,CAAC,CAAC;EACrC,CAAC;EACD;AACJ;AACA;EACIvC,aAAa,CAACwC,SAAS,CAACoM,OAAO,GAAG,YAAY;IAC1C,IAAI,CAAChD,KAAK,CAAC,CAAC;EAChB,CAAC;EACD;AACJ;AACA;EACI5L,aAAa,CAACwC,SAAS,CAACqM,aAAa,GAAG,YAAY;IAChD,OAAO,eAAe;EAC1B,CAAC;EACD,OAAO7O,aAAa;AACxB,CAAC,CAAC,CAAE;AACJ,SAASA,aAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}