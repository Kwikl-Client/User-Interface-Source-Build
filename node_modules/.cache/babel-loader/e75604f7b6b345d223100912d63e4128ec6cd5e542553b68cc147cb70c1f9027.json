{"ast":null,"code":"import { Browser, isBlazor, isNullOrUndefined, initializeCSPTemplate } from '@syncfusion/ej2-base';\nimport { splitArrayCollection, processPathData, cornersPointsBeforeRotation } from '@syncfusion/ej2-drawings';\nimport { Tooltip } from '@syncfusion/ej2-popups';\n/**\n * The `FormFields` module is to render formfields in the PDF document.\n *\n * @hidden\n */\nvar FormFields = /** @class */function () {\n  /**\n   * @param viewer\n   * @param base\n   * @param viewer\n   * @param base\n   * @private\n   */\n  function FormFields(viewer, base) {\n    // eslint-disable-next-line\n    this.maintainTabIndex = {};\n    // eslint-disable-next-line\n    this.maintanMinTabindex = {};\n    this.isSignatureField = false;\n    this.paddingDifferenceValue = 10;\n    this.indicatorPaddingValue = 4;\n    this.isKeyDownCheck = false;\n    this.signatureFontSizeConstent = 1.35;\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    this.readOnlyCollection = [];\n    this.isSignatureRendered = false;\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    this.signatureFieldCollection = [];\n    this.selectedIndex = [];\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    this.renderedPageList = [];\n    this.pdfViewer = viewer;\n    this.pdfViewerBase = base;\n  }\n  /**\n   * @param pageIndex\n   * @private\n   */\n  FormFields.prototype.renderFormFields = function (pageIndex, isImportFormField) {\n    this.maxTabIndex = 0;\n    this.minTabIndex = -1;\n    // eslint-disable-next-line        \n    if (this.renderedPageList.indexOf(pageIndex) !== -1 && !isImportFormField) {\n      this.data = this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');\n      if (!this.data || this.data === '[]') {\n        this.data = this.pdfViewerBase.getItemFromSessionStorage('_formfields');\n      }\n    } else {\n      this.data = this.pdfViewerBase.getItemFromSessionStorage('_formfields');\n    }\n    if (this.data) {\n      // eslint-disable-next-line\n      this.formFieldsData = JSON.parse(this.data);\n      var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageIndex);\n      var canvasElement = document.getElementById(this.pdfViewer.element.id + '_pageCanvas_' + pageIndex);\n      var count = void 0;\n      if (this.formFieldsData !== null && canvasElement !== null && textLayer !== null) {\n        var flag = false;\n        for (var i = 0; i < this.formFieldsData.length; i++) {\n          var formField = this.formFieldsData[i];\n          if (!flag && isNullOrUndefined(formField.ActualFieldName) && formField.PageIndex === pageIndex) {\n            count = parseInt(formField.FieldName.slice(formField.FieldName.lastIndexOf(\"_\") + 1));\n            flag = true;\n          }\n        }\n        if (this.renderedPageList.indexOf(pageIndex) === -1) {\n          this.renderedPageList.push(pageIndex);\n        }\n        var _loop_1 = function (i_1) {\n          // eslint-disable-next-line\n          var currentData = this_1.formFieldsData[i_1];\n          if (currentData.FieldName !== '') {\n            if (currentData.IsInitialField) {\n              currentData.Name = 'InitialField';\n            }\n            // eslint-disable-next-line\n            var font = currentData['Font'];\n            if (this_1.pdfViewer.formDesigner) {\n              if (parseFloat(currentData['PageIndex']) == pageIndex) {\n                var fontFamily = void 0;\n                var fontStyle = void 0;\n                var fontSize = void 0;\n                if (!isNullOrUndefined(font) && font.Height) {\n                  fontFamily = font.Name;\n                  if (font.Italic) {\n                    fontStyle = 'Italic';\n                  }\n                  if (font.Bold) {\n                    fontStyle = 'Bold';\n                  }\n                  if (font.Strikeout) {\n                    fontStyle = 'Strikethrough';\n                  }\n                  if (font.Underline) {\n                    fontStyle = 'Underline';\n                  }\n                  fontSize = this_1.ConvertPointToPixel(font.Size);\n                }\n                var textAlignment = currentData.Alignment === 2 ? 'right' : currentData.Alignment === 1 ? 'center' : 'left';\n                var backgroundColor = currentData['BackColor'];\n                var bounds = currentData['LineBounds'];\n                var backColor = 'rgba(' + backgroundColor.R + ',' + backgroundColor.G + ',' + backgroundColor.B + ',' + 1 + ')';\n                if (currentData.IsTransparent === true) {\n                  backColor = \"rgba(0,0,0,0)\";\n                }\n                backColor = this_1.rgbaToHex(backColor);\n                // set default color if field have black color as bg.\n                if (backColor === '#000000ff') {\n                  backColor = '#daeaf7ff';\n                }\n                // eslint-disable-next-line\n                var fontColor = currentData['FontColor'];\n                var left = this_1.ConvertPointToPixel(bounds.X);\n                var top_1 = this_1.ConvertPointToPixel(bounds.Y);\n                var width = this_1.ConvertPointToPixel(bounds.Width);\n                var height = this_1.ConvertPointToPixel(bounds.Height);\n                var boundArray = {\n                  left: left,\n                  top: top_1,\n                  width: width,\n                  height: height\n                };\n                var isFieldRotated = false;\n                var rotateFieldAngle = 0;\n                if (currentData[\"Rotation\"] !== 0) {\n                  if (currentData[\"RotationAngle\"] === -90 || currentData[\"RotationAngle\"] === -270 || currentData[\"RotationAngle\"] === -180) {\n                    boundArray = this_1.getBounds(boundArray, pageIndex, 0, isFieldRotated);\n                  }\n                } else {\n                  isFieldRotated = true;\n                  boundArray = this_1.getBounds(boundArray, pageIndex, 0, isFieldRotated);\n                  rotateFieldAngle = this_1.getAngle(pageIndex);\n                }\n                var foreColor = 'rgba(' + fontColor.R + ',' + fontColor.G + ',' + fontColor.B + ',' + 1 + ')';\n                foreColor = this_1.rgbaToHex(foreColor);\n                var borderColor = currentData['BorderColor'];\n                var borderRGB = void 0;\n                if (currentData.IsTansparentBorderColor) {\n                  borderRGB = 'rgba(' + borderColor.R + ',' + borderColor.G + ',' + borderColor.B + ',' + 0 + ')';\n                } else {\n                  borderRGB = 'rgba(' + borderColor.R + ',' + borderColor.G + ',' + borderColor.B + ',' + 1 + ')';\n                }\n                borderRGB = this_1.rgbaToHex(borderRGB);\n                var borderWidth = currentData['BorderWidth'];\n                this_1.selectedIndex = [];\n                var elementValue = \"\";\n                if (currentData.Name === 'RadioButton' || currentData.Name === 'CheckBox') {\n                  elementValue = currentData['Text'] ? currentData['Text'] : currentData['Value'];\n                } else {\n                  elementValue = currentData['Text'];\n                }\n                var fieldProperties = {\n                  bounds: {\n                    X: boundArray.left,\n                    Y: boundArray.top,\n                    Width: boundArray.width,\n                    Height: boundArray.height\n                  },\n                  pageNumber: parseFloat(currentData['PageIndex']) + 1,\n                  name: currentData['ActualFieldName'],\n                  tooltip: currentData['ToolTip'],\n                  value: elementValue,\n                  insertSpaces: currentData['InsertSpaces'],\n                  isChecked: currentData['Selected'],\n                  isSelected: currentData['Selected'],\n                  fontFamily: fontFamily,\n                  fontStyle: fontStyle,\n                  backgroundColor: backColor,\n                  color: foreColor,\n                  borderColor: borderRGB,\n                  thickness: borderWidth,\n                  fontSize: fontSize,\n                  isMultiline: currentData.Multiline,\n                  rotateAngle: rotateFieldAngle,\n                  isReadOnly: currentData['IsReadonly'],\n                  isRequired: currentData['IsRequired'],\n                  alignment: textAlignment,\n                  options: this_1.getListValues(currentData),\n                  selectedIndex: this_1.selectedIndex,\n                  maxLength: currentData.MaxLength,\n                  visibility: currentData.Visible === 1 ? \"hidden\" : \"visible\",\n                  font: {\n                    isItalic: !isNullOrUndefined(font) ? font.Italic : false,\n                    isBold: !isNullOrUndefined(font) ? font.Bold : false,\n                    isStrikeout: !isNullOrUndefined(font) ? font.Strikeout : false,\n                    isUnderline: !isNullOrUndefined(font) ? font.Underline : false\n                  },\n                  isTransparent: currentData.IsTransparent\n                };\n                if (!currentData.id && this_1.pdfViewer.formFieldCollections[i_1] && !isNullOrUndefined(currentData['ActualFieldName'])) {\n                  fieldProperties.id = this_1.pdfViewer.formFieldCollections[i_1].id;\n                }\n                if (currentData.Name === 'DropDown' || currentData.Name === 'ListBox') {\n                  fieldProperties.value = currentData['SelectedValue'];\n                }\n                // eslint-disable-next-line\n                var fieldType = this_1.getFormFieldType(currentData);\n                if (currentData.Name !== 'SignatureText' || currentData.Name !== 'SignatureImage') {\n                  if (!isNullOrUndefined(this_1.getFormFieldType(currentData))) {\n                    if (currentData.IsRequired) {\n                      var thickness = fieldProperties.thickness;\n                      thickness = thickness > 0 ? thickness : 1;\n                      fieldProperties.thickness = thickness;\n                    }\n                    var addedElement1 = this_1.pdfViewer.formDesignerModule.addFormField(fieldType, fieldProperties, false, fieldProperties.id);\n                    if (addedElement1 && addedElement1.parentElement) {\n                      currentData.id = addedElement1.parentElement.id.split('_')[0];\n                    }\n                    if (addedElement1 && addedElement1.style.visibility === \"hidden\") {\n                      addedElement1.childNodes[0].disabled = true;\n                    }\n                  }\n                }\n                if (fieldType === 'SignatureField' || fieldType === 'InitialField') {\n                  this_1.addSignaturePath(currentData, count);\n                  if (!isNullOrUndefined(currentData.Value) && currentData.Value != \"\") {\n                    this_1.renderExistingAnnnot(currentData, parseFloat(currentData['PageIndex']) + 1, null, isFieldRotated);\n                    this_1.isSignatureRendered = true;\n                    count++;\n                  }\n                }\n                if (currentData.ActualFieldName === null && this_1.formFieldsData.filter(function (item) {\n                  return item.FieldName.includes(currentData.FieldName.replace(/_\\d$/, ''));\n                }).filter(function (value) {\n                  return value.Name != 'ink';\n                }).length === 0) {\n                  this_1.renderExistingAnnnot(currentData, parseFloat(currentData['PageIndex']) + 1, null, isFieldRotated);\n                  this_1.pdfViewerBase.signatureModule.storeSignatureData(pageIndex, currentData);\n                  this_1.isSignatureRendered = true;\n                  count++;\n                }\n                this_1.pdfViewerBase.isLoadedFormFieldAdded = true;\n              }\n            } else {\n              // eslint-disable-next-line\n              if (parseFloat(currentData['PageIndex']) == pageIndex) {\n                // eslint-disable-next-line\n                var field = this_1.createFormFields(currentData, pageIndex, i_1, null, count);\n                var inputField = field.currentField;\n                var signCount = field.count;\n                var isFieldRotated = false;\n                if (currentData.ActualFieldName === null && this_1.formFieldsData.filter(function (item) {\n                  return item.FieldName.includes(currentData.FieldName.replace(/_\\d$/, ''));\n                }).filter(function (value) {\n                  return value.Name != 'ink';\n                }).length === 0) {\n                  this_1.renderExistingAnnnot(currentData, parseFloat(currentData['PageIndex']) + 1, null, isFieldRotated);\n                  this_1.pdfViewerBase.signatureModule.storeSignatureData(pageIndex, currentData);\n                  this_1.isSignatureRendered = true;\n                  count++;\n                }\n                if (inputField) {\n                  // eslint-disable-next-line\n                  var divElement = this_1.createParentElement(currentData, pageIndex);\n                  // eslint-disable-next-line\n                  var bounds = currentData['LineBounds'];\n                  // eslint-disable-next-line\n                  var font_1 = currentData['Font'];\n                  // eslint-disable-next-line\n                  rotateAngle = 0;\n                  if (currentData['Rotation'] === 0) {\n                    isFieldRotated = true;\n                    rotateAngle = this_1.getAngle(pageIndex);\n                    if (divElement) {\n                      divElement.style.transform = 'rotate(' + rotateAngle + 'deg)';\n                    } else {\n                      inputField.style.transform = 'rotate(' + rotateAngle + 'deg)';\n                    }\n                  } else {\n                    if (divElement) {\n                      divElement.style.transform = 'rotate(' + rotateAngle + 'deg)';\n                    } else {\n                      inputField.style.transform = 'rotate(' + rotateAngle + 'deg)';\n                    }\n                  }\n                  this_1.applyPosition(inputField, bounds, font_1, pageIndex, 0, isFieldRotated);\n                  inputField.InsertSpaces = currentData.InsertSpaces;\n                  if (inputField.InsertSpaces) {\n                    var zoomFactor = this_1.pdfViewerBase.getZoomFactor();\n                    // eslint-disable-next-line\n                    var font_2 = parseInt(inputField.style.width) / inputField.maxLength - parseFloat(inputField.style.fontSize) / 2 - 0.6 * zoomFactor;\n                    // eslint-disable-next-line\n                    inputField.style.letterSpacing = '' + font_2 + 'px';\n                    inputField.style.fontFamily = 'monospace';\n                    inputField.style.paddingLeft = font_2 / 2 + 'px';\n                  }\n                  // eslint-disable-next-line\n                  currentData['uniqueID'] = this_1.pdfViewer.element.id + 'input_' + pageIndex + '_' + i_1;\n                  for (var j = 0; j < this_1.pdfViewer.formFieldCollections.length; j++) {\n                    if ((inputField.type === 'text' || inputField.type === 'password' || inputField.type === 'textarea') && currentData.Name !== 'SignatureField') {\n                      if (currentData['uniqueID'] === this_1.pdfViewer.formFieldCollections[j].id) {\n                        this_1.pdfViewer.formFieldCollections[j].value = currentData['Text'];\n                      }\n                    }\n                  }\n                  if (isNullOrUndefined(currentData.Value)) {\n                    currentData.Value = currentData['Text'];\n                  }\n                  if (currentData.ToolTip) {\n                    this_1.setToolTip(currentData.ToolTip, inputField);\n                  }\n                  this_1.applyCommonProperties(inputField, pageIndex, i_1, currentData, isFieldRotated);\n                  this_1.checkIsReadonly(currentData, inputField);\n                  this_1.applyTabIndex(currentData, inputField, pageIndex);\n                  this_1.checkIsRequiredField(currentData, inputField);\n                  this_1.applyDefaultColor(inputField);\n                  this_1.updateFormFieldsCollection(currentData);\n                  if (divElement) {\n                    divElement.appendChild(inputField);\n                    textLayer.appendChild(divElement);\n                  } else {\n                    inputField.style.position = 'absolute';\n                    textLayer.appendChild(inputField);\n                  }\n                  inputField.addEventListener('focus', this_1.focusFormFields.bind(this_1));\n                  inputField.addEventListener('blur', this_1.blurFormFields.bind(this_1));\n                  inputField.addEventListener('click', this_1.updateFormFields.bind(this_1));\n                  inputField.addEventListener('change', this_1.changeFormFields.bind(this_1));\n                  inputField.addEventListener('keydown', this_1.updateFormFieldsValue.bind(this_1));\n                  inputField.addEventListener('keyup', this_1.updateSameFieldsValue.bind(this_1));\n                  count = signCount;\n                }\n              }\n            }\n          }\n        };\n        var this_1 = this,\n          rotateAngle;\n        for (var i_1 = 0; i_1 < this.formFieldsData.length; i_1++) {\n          _loop_1(i_1);\n        }\n        if (!this.pdfViewer.formDesigner) {\n          window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_formfields');\n          this.pdfViewerBase.setItemInSessionStorage(this.formFieldsData, '_formfields');\n        }\n      }\n    }\n    if (this.pdfViewerBase.isFocusField && this.pdfViewerBase.focusField) {\n      var currentField = document.getElementById(this.pdfViewerBase.focusField.id);\n      if (currentField) {\n        if ((this.pdfViewerBase.focusField.type === \"SignatureField\" || this.pdfViewerBase.focusField.type === \"InitialField\") && this.pdfViewer.formDesignerModule) {\n          var y = this.pdfViewerBase.focusField.bounds.y;\n          var height = this.pdfViewerBase.pageSize[pageIndex].height;\n          this.pdfViewer.bookmark.goToBookmark(this.pdfViewerBase.focusField.pageIndex, height - y);\n        } else {\n          currentField.focus();\n        }\n        this.pdfViewerBase.isFocusField = false;\n        this.pdfViewerBase.focusField = [];\n      }\n    }\n  };\n  FormFields.prototype.setToolTip = function (tooltipContent, targetElement) {\n    //initialize tooltip component\n    var tooltip = new Tooltip({\n      content: initializeCSPTemplate(function () {\n        return tooltipContent;\n      })\n    });\n    // render initialized tooltip\n    tooltip.appendTo(targetElement);\n  };\n  FormFields.prototype.trim = function (str) {\n    return str.replace(/^\\s+|\\s+$/gm, '');\n  };\n  FormFields.prototype.rgbaToHex = function (rgba) {\n    var inParts = rgba.substring(rgba.indexOf(\"(\")).split(\",\");\n    var r = parseInt(this.trim(inParts[0].substring(1)), 10);\n    var g = parseInt(this.trim(inParts[1]), 10);\n    var b = parseInt(this.trim(inParts[2]), 10);\n    var a = parseFloat(parseFloat(this.trim(inParts[3].substring(0, inParts[3].length - 1))).toFixed(2));\n    var outParts = [r.toString(16), g.toString(16), b.toString(16), Math.round(a * 255).toString(16).substring(0, 2)];\n    // Pad single-digit output values\n    outParts.forEach(function (part, i) {\n      if (part.length === 1) {\n        outParts[i] = '0' + part;\n      }\n    });\n    return '#' + outParts.join('');\n  };\n  FormFields.prototype.getListValues = function (currentData) {\n    var listItem = currentData['TextList'];\n    var options = [];\n    for (var i = 0; i < listItem.length; i++) {\n      if (listItem[i] === currentData['SelectedValue']) this.selectedIndex.push(i);\n      options.push({\n        itemName: listItem[i],\n        itemValue: listItem[i]\n      });\n    }\n    if (this.getFormFieldType(currentData) === 'ListBox') {\n      this.selectedIndex = currentData['SelectedList'];\n    }\n    return options;\n  };\n  // eslint-disable-next-line\n  FormFields.prototype.createParentElement = function (data, pageIndex) {\n    // eslint-disable-next-line\n    var divElement;\n    // eslint-disable-next-line\n    if (data['Name'] === 'Textbox' || data['Name'] === 'Password') {\n      divElement = document.createElement('div');\n      divElement.style.background = 'white';\n      if (data.InsertSpaces) {\n        divElement.style.background = 'transparent';\n      }\n      // eslint-disable-next-line\n      var bounds = data['LineBounds'];\n      // eslint-disable-next-line\n      var font = data['Font'];\n      // eslint-disable-next-line\n      divElement.style.position = 'absolute';\n      // eslint-disable-next-line\n      var isFieldRotated = false;\n      if (data['Rotation'] === 0) {\n        isFieldRotated = true;\n      }\n      this.applyPosition(divElement, bounds, font, pageIndex, 0, isFieldRotated);\n    }\n    return divElement;\n  };\n  /**\n   * @private\n   */\n  FormFields.prototype.getAngle = function (pageIndex) {\n    // eslint-disable-next-line\n    var angle = 0;\n    // eslint-disable-next-line\n    var pageDetails = this.pdfViewerBase.pageSize[pageIndex];\n    if (pageDetails && pageDetails.rotation) {\n      switch (pageDetails.rotation) {\n        case 0:\n          angle = 0;\n          break;\n        case 1:\n          angle = 90;\n          break;\n        case 2:\n          angle = 180;\n          break;\n        case 3:\n          angle = 270;\n          break;\n      }\n    }\n    return angle;\n  };\n  FormFields.prototype.nextField = function () {\n    this.signatureFieldNavigate(true);\n  };\n  FormFields.prototype.previousField = function () {\n    this.signatureFieldNavigate(false);\n  };\n  FormFields.prototype.signatureFieldNavigate = function (nextSign) {\n    var isNextSignField = nextSign;\n    // eslint-disable-next-line\n    var signatureFields = this.signatureFieldCollection;\n    var collectionData = this.pdfViewer.formFieldCollections;\n    if (signatureFields.length === 0) {\n      signatureFields = this.pdfViewerBase.signatureModule.getSignField();\n    }\n    // eslint-disable-next-line\n    var currentField;\n    if (this.currentTarget) {\n      if (this.pdfViewer.formDesignerModule) {\n        for (var i = 0; i < collectionData.length; i++) {\n          currentField = collectionData[i];\n          if (this.currentTarget.id === currentField.id) {\n            this.currentTarget = document.getElementById(currentField.id);\n            this.getSignatureIndex(i, collectionData.length, isNextSignField);\n            break;\n          }\n        }\n      } else {\n        for (var i = 0; i < signatureFields.length; i++) {\n          currentField = this.pdfViewer.formDesignerModule ? signatureFields[i].FormField : signatureFields[i];\n          if (this.currentTarget.id === currentField.uniqueID) {\n            this.currentTarget = document.getElementById(currentField.uniqueID);\n            this.getSignatureIndex(i, signatureFields.length, isNextSignField);\n            break;\n          }\n        }\n      }\n    } else {\n      if (nextSign) {\n        if (this.pdfViewer.formDesignerModule) {\n          currentField = signatureFields[0];\n          if (currentField.id) {\n            this.currentTarget = document.getElementById(currentField.id);\n            this.getSignatureIndex(0, signatureFields.length, isNextSignField, true);\n          }\n        } else {\n          currentField = signatureFields[0];\n          if (currentField.uniqueID) {\n            this.currentTarget = document.getElementById(currentField.uniqueID);\n            this.getSignatureIndex(0, signatureFields.length, isNextSignField, true);\n          }\n        }\n      }\n    }\n  };\n  FormFields.prototype.getSignatureIndex = function (currentSignatureIndex, signatureCount, isNextSign, isFirstNavigate) {\n    var signatureIndex = currentSignatureIndex;\n    if (!isFirstNavigate) {\n      if (isNextSign) {\n        signatureIndex++;\n      } else {\n        signatureIndex--;\n      }\n    }\n    if (signatureCount === 1) {\n      this.renderSignatureField(0);\n    } else {\n      if (signatureIndex < signatureCount && signatureIndex >= 0) {\n        this.renderSignatureField(signatureIndex);\n      } else {\n        if (isNextSign) {\n          if (signatureIndex >= signatureCount) {\n            this.renderSignatureField(0);\n          }\n        } else {\n          if (signatureIndex <= 0) {\n            this.renderSignatureField(signatureCount - 1);\n          }\n        }\n      }\n    }\n  };\n  FormFields.prototype.renderSignatureField = function (currentSignIndex) {\n    var curSignIndex = currentSignIndex;\n    // eslint-disable-next-line\n    var signatureFields = this.signatureFieldCollection;\n    var collectionData = this.pdfViewer.formFieldCollections;\n    // eslint-disable-next-line\n    var currentField;\n    if (curSignIndex < collectionData.length) {\n      for (var i = 0; i < collectionData.length; i++) {\n        if (this.pdfViewer.formDesignerModule) {\n          var curSignIndexId = collectionData[curSignIndex].id;\n          var signatureFieldData = collectionData[i];\n          if (curSignIndexId === signatureFieldData.id) {\n            var pageIndex = signatureFieldData.pageIndex >= 0 ? signatureFieldData.pageIndex : signatureFieldData.pageNumber;\n            var isRender = this.pdfViewer.annotationModule.findRenderPageList(pageIndex);\n            if (!isRender) {\n              this.pdfViewer.navigation.goToPage(pageIndex + 1);\n              this.renderFormFields(pageIndex, false);\n            }\n            this.currentTarget = document.getElementById(signatureFieldData.id);\n            currentField = signatureFieldData;\n            break;\n          }\n        } else {\n          var curSignIndexId = this.pdfViewer.formDesignerModule ? signatureFields[curSignIndex].FormField.uniqueID : signatureFields[curSignIndex].uniqueID;\n          var signatureFieldData = this.pdfViewer.formDesignerModule ? signatureFields[i].FormField : signatureFields[i];\n          if (curSignIndexId === signatureFieldData.uniqueID) {\n            var pageIndex_1 = signatureFieldData.PageIndex >= 0 ? signatureFieldData.PageIndex : signatureFieldData.pageNumber;\n            var isRender_1 = this.pdfViewer.annotationModule.findRenderPageList(pageIndex_1);\n            if (!isRender_1) {\n              this.pdfViewer.navigation.goToPage(pageIndex_1 + 1);\n              this.renderFormFields(pageIndex_1, false);\n            }\n            this.currentTarget = document.getElementById(signatureFieldData.uniqueID);\n            currentField = signatureFieldData;\n            break;\n          }\n        }\n      }\n      if (this.currentTarget === null) {\n        var pageIndex_2 = currentField.PageIndex >= 0 ? currentField.PageIndex : currentField.pageNumber;\n        this.pdfViewer.navigation.goToPage(pageIndex_2);\n        this.currentTarget = document.getElementById(currentField.uniqueID);\n      }\n      if (this.currentTarget) {\n        if (this.currentTarget.className === 'e-pdfviewer-signatureformfields-signature' && !this.pdfViewer.formDesignerModule) {\n          document.getElementById(this.currentTarget.id).focus();\n          this.pdfViewer.select([this.currentTarget.id], null);\n        } else if (this.currentTarget.className === 'e-pdfviewer-signatureformfields' || this.currentTarget.className === 'e-pdfviewer-signatureformfields-signature') {\n          if (this.pdfViewer.formDesignerModule) {\n            document.getElementById(this.currentTarget.id).parentElement.focus();\n          } else {\n            document.getElementById(this.currentTarget.id).focus();\n          }\n        }\n      }\n    }\n  };\n  /**\n   * @private\n   */\n  FormFields.prototype.formFieldCollections = function () {\n    // eslint-disable-next-line\n    var data = this.pdfViewerBase.getItemFromSessionStorage('_formfields');\n    if (data) {\n      // eslint-disable-next-line\n      var formFieldsData = JSON.parse(data);\n      for (var i = 0; i < formFieldsData.length; i++) {\n        // eslint-disable-next-line\n        var currentData = formFieldsData[i];\n        // eslint-disable-next-line\n        var type = currentData['Name'];\n        if (this.pdfViewer.formDesignerModule) {\n          if (currentData.Name !== 'ink' && currentData.Name !== 'SignatureImage' && currentData.Name !== 'SignatureText') {\n            this.retreiveFormFieldsData(currentData, true);\n          }\n        } else {\n          if (currentData.Name !== 'ink') {\n            // eslint-disable-next-line\n            var formFieldCollection = {\n              name: this.retriveFieldName(currentData),\n              id: this.pdfViewer.element.id + 'input_' + parseFloat(currentData['PageIndex']) + '_' + i,\n              isReadOnly: false,\n              type: currentData.IsInitialField ? 'InitialField' : type,\n              value: this.retriveCurrentValue(currentData),\n              fontName: '',\n              isRequired: currentData.IsRequired\n            };\n            this.pdfViewer.formFieldCollections.push(formFieldCollection);\n          }\n        }\n      }\n    }\n  };\n  FormFields.prototype.retreiveFormFieldsData = function (currentData, isCollection) {\n    var fontFamily;\n    var fontStyle;\n    var fontSize;\n    if (currentData.FieldName !== '') {\n      if (currentData.IsInitialField) {\n        currentData.Name = 'InitialField';\n      }\n      // eslint-disable-next-line\n      var font = currentData['Font'];\n      if (!isNullOrUndefined(font) && font.Height) {\n        fontFamily = font.Name;\n        if (font.Italic) {\n          fontStyle = 'Italic';\n        }\n        if (font.Bold) {\n          fontStyle = 'Bold';\n        }\n        if (font.Strikeout) {\n          fontStyle = 'Strikethrough';\n        }\n        if (font.Underline) {\n          fontStyle = 'Underline';\n        }\n        fontSize = this.ConvertPointToPixel(font.Size);\n      }\n      var textAlignment = currentData.Alignment === 2 ? 'right' : currentData.Alignment === 1 ? 'center' : 'left';\n      var backgroundColor = currentData['BackColor'];\n      var bounds = currentData['LineBounds'];\n      var backColor = 'rgba(' + backgroundColor.R + ',' + backgroundColor.G + ',' + backgroundColor.B + ',' + 1 + ')';\n      backColor = this.rgbaToHex(backColor);\n      // set default color if field have black color as bg.\n      if (currentData.IsTransparent === true) {\n        backColor = \"rgba(0,0,0,0)\";\n      } else if (backColor === '#000000ff') {\n        backColor = '#daeaf7ff';\n      }\n      // eslint-disable-next-line\n      var fontColor = currentData['FontColor'];\n      var left = this.ConvertPointToPixel(bounds.X);\n      var top_2 = this.ConvertPointToPixel(bounds.Y);\n      var width = this.ConvertPointToPixel(bounds.Width);\n      var height = this.ConvertPointToPixel(bounds.Height);\n      var boundArray = {\n        left: left,\n        top: top_2,\n        width: width,\n        height: height\n      };\n      var foreColor = 'rgba(' + fontColor.R + ',' + fontColor.G + ',' + fontColor.B + ',' + 1 + ')';\n      foreColor = this.rgbaToHex(foreColor);\n      var borderColor = currentData['BorderColor'];\n      var borderRGB = 'rgba(' + borderColor.R + ',' + borderColor.G + ',' + borderColor.B + ',' + 1 + ')';\n      borderRGB = this.rgbaToHex(borderRGB);\n      var borderWidth = currentData['BorderWidth'];\n      this.selectedIndex = [];\n      var fieldProperties = {\n        bounds: {\n          X: boundArray.left,\n          Y: boundArray.top,\n          Width: boundArray.width,\n          Height: boundArray.height\n        },\n        pageNumber: parseFloat(currentData['PageIndex']) + 1,\n        name: currentData['ActualFieldName'],\n        tooltip: currentData['ToolTip'],\n        value: currentData['Text'],\n        isChecked: currentData['Selected'],\n        isSelected: currentData['Selected'],\n        fontFamily: fontFamily,\n        fontStyle: fontStyle,\n        backgroundColor: backColor,\n        color: foreColor,\n        borderColor: borderRGB,\n        thickness: borderWidth,\n        fontSize: fontSize,\n        isMultiline: currentData.Multiline,\n        isReadOnly: currentData['IsReadonly'],\n        isRequired: currentData['IsRequired'],\n        insertSpaces: currentData['InsertSpaces'],\n        alignment: textAlignment,\n        options: this.getListValues(currentData),\n        selectedIndex: this.selectedIndex,\n        maxLength: currentData.MaxLength,\n        visibility: currentData.Visible === 1 ? \"hidden\" : \"visible\",\n        font: {\n          isItalic: !isNullOrUndefined(font) ? font.Italic : false,\n          isBold: !isNullOrUndefined(font) ? font.Bold : false,\n          isStrikeout: !isNullOrUndefined(font) ? font.Strikeout : false,\n          isUnderline: !isNullOrUndefined(font) ? font.Underline : false\n        },\n        pageIndex: currentData['PageIndex'],\n        isTransparent: currentData['IsTransparent'],\n        rotationAngle: currentData['RotationAngle'],\n        signatureType: currentData['SignatureType'] ? currentData['SignatureType'] : \"\",\n        signatureIndicatorSettings: currentData['SignatureIndicatorSettings'],\n        zIndex: currentData['zIndex']\n      };\n      if (currentData.Name === 'DropDown' || currentData.Name === 'ListBox') {\n        fieldProperties.value = currentData['SelectedValue'];\n      }\n      // eslint-disable-next-line\n      var fieldType = this.getFormFieldType(currentData);\n      if (fieldType === 'SignatureField' || fieldType === 'InitialField') {\n        this.addSignaturePath(currentData);\n        if (this.isSignatureField) {\n          fieldProperties.value = currentData.Value;\n        }\n      }\n      var addedElement = this.pdfViewer.formDesignerModule.addFormField(fieldType, fieldProperties, isCollection);\n      return addedElement;\n    }\n    return null;\n  };\n  /**\n   * @param formField\n   * @private\n   */\n  FormFields.prototype.updateFormFieldsCollection = function (formField) {\n    var type = formField['Name'];\n    var formFieldCollection = {\n      name: this.retriveFieldName(formField),\n      id: formField.uniqueID,\n      isReadOnly: formField.IsReadonly,\n      isRequired: formField.IsRequired,\n      isSelected: type === 'CheckBox' ? false : formField.Selected,\n      isChecked: type === 'RadioButton' ? false : formField.Selected,\n      type: type,\n      value: type === 'ListBox' || type === 'DropDown' ? formField.SelectedValue : formField.Value,\n      fontName: formField.FontFamily ? formField.FontFamily : '',\n      pageIndex: formField.PageIndex,\n      pageNumber: formField.PageIndex + 1,\n      isMultiline: formField.isMultiline ? formField.isMultiline : formField.Multiline,\n      insertSpaces: formField.insertSpaces ? formField.insertSpaces : formField.InsertSpaces,\n      isTransparent: formField.isTransparent ? formField.isTransparent : formField.IsTransparent,\n      rotateAngle: formField.rotateAngle ? formField.rotateAngle : formField.RotationAngle,\n      selectedIndex: formField.selectedIndex ? formField.selectedIndex : formField.SelectedList,\n      options: formField.options ? formField.options : formField.TextList ? formField.TextList : [],\n      signatureType: formField.signatureType ? formField.signatureType : \"\",\n      zIndex: formField.zIndex,\n      tooltip: formField.tooltip ? formField.tooltip : formField.ToolTip ? formField.ToolTip : \"\",\n      signatureIndicatorSettings: formField.signatureIndicatorSettings ? formField.signatureIndicatorSettings : \"\"\n    };\n    this.pdfViewer.formFieldCollections[this.pdfViewer.formFieldCollections.findIndex(function (el) {\n      return el.id === formFieldCollection.id;\n    })] = formFieldCollection;\n  };\n  // eslint-disable-next-line\n  FormFields.prototype.updateFormFieldValues = function (formFields) {\n    this.readOnlyCollection.push(formFields.id);\n    if (formFields) {\n      // eslint-disable-next-line\n      var currentElement = document.getElementById(formFields.id);\n      if (currentElement) {\n        if (formFields.isReadOnly) {\n          currentElement.disabled = true;\n          currentElement.style.backgroundColor = '';\n          currentElement.style.cursor = 'default';\n        } else {\n          if (currentElement.style.backgroundColor === '') {\n            currentElement.style.backgroundColor = 'rgba(0, 20, 200, 0.2)';\n          }\n          currentElement.disabled = false;\n          currentElement.style.cursor = '';\n        }\n      }\n      this.updateDataInSession(currentElement);\n    }\n  };\n  /**\n   * @param currentData\n   * @private\n   */\n  // eslint-disable-next-line\n  FormFields.prototype.retriveFieldName = function (currentData) {\n    // eslint-disable-next-line\n    var currentField;\n    // eslint-disable-next-line\n    switch (currentData['Name']) {\n      case 'Textbox':\n      case 'Password':\n      case 'SignatureField':\n      case 'InitialField':\n        currentField = currentData.FieldName;\n        break;\n      case 'RadioButton':\n      case 'CheckBox':\n        currentField = currentData.GroupName;\n        break;\n      case 'DropDown':\n      case 'ListBox':\n        currentField = currentData.Text;\n        break;\n    }\n    return currentField;\n  };\n  // eslint-disable-next-line\n  FormFields.prototype.retriveCurrentValue = function (currentData) {\n    // eslint-disable-next-line\n    var currentField;\n    // eslint-disable-next-line\n    switch (currentData['Name']) {\n      case 'Textbox':\n      case 'Password':\n        currentField = currentData.Text;\n        break;\n      case 'SignatureField':\n        currentField = currentData.Value;\n        break;\n      case 'RadioButton':\n      case 'CheckBox':\n        currentField = currentData.Selected;\n        break;\n      case 'DropDown':\n        currentField = currentData.SelectedValue;\n        break;\n      case 'ListBox':\n        currentField = currentData.SelectedList;\n        break;\n    }\n    return currentField;\n  };\n  // eslint-disable-next-line\n  FormFields.prototype.getSignatureBounds = function (LineBounds, bounds, pageIndex) {\n    // eslint-disable-next-line\n    var pageDetails = this.pdfViewerBase.pageSize[pageIndex];\n    // eslint-disable-next-line\n    var bound = 0;\n    switch (pageDetails.rotation) {\n      case 0:\n        bound = bounds;\n        break;\n      case 1:\n        bound = {\n          x: bounds.x + LineBounds.Width + bounds.width / 3.5,\n          y: pageDetails.width - LineBounds.X + bounds.height / 4\n        };\n        break;\n      case 2:\n        bound = {\n          x: pageDetails.width - bounds.x - bounds.width,\n          y: pageDetails.height - bounds.y - bounds.height\n        };\n        break;\n      case 3:\n        bound = {\n          x: bounds.y - bounds.width / 2 + bounds.height,\n          y: bounds.x + bounds.width / 3\n        };\n        break;\n    }\n    return bound;\n  };\n  /**\n   * @private\n   */\n  // eslint-disable-next-line\n  FormFields.prototype.downloadFormFieldsData = function () {\n    // eslint-disable-next-line\n    var data = this.pdfViewerBase.getItemFromSessionStorage('_formfields');\n    if (data) {\n      // eslint-disable-next-line\n      var formFieldsData = JSON.parse(data);\n      // eslint-disable-next-line\n      var datas = {};\n      var fieldDatas = [];\n      for (var m = 0; m < formFieldsData.length; m++) {\n        // eslint-disable-next-line\n        var currentData = formFieldsData[m];\n        var isRequired = currentData.IsRequired;\n        if (currentData.Name === 'Textbox' || currentData.Name === 'Password' || currentData.Multiline) {\n          if (isRequired && (currentData.Text === '' || currentData.Text === null)) {\n            this.pdfViewerBase.validateForm = true;\n            this.pdfViewerBase.nonFillableFields[currentData.FieldName] = currentData.Text;\n          } else {\n            delete this.pdfViewerBase.nonFillableFields[currentData.FieldName];\n          }\n          fieldDatas = {\n            fieldValue: currentData.Text,\n            isReadOnly: currentData.IsReadonly\n          };\n          datas[currentData.FieldName] = fieldDatas;\n        } else if (currentData.Name === 'RadioButton' && currentData.Selected) {\n          if (isRequired && currentData.Selected === false) {\n            this.pdfViewerBase.validateForm = true;\n            this.pdfViewerBase.nonFillableFields[currentData.GroupName] = currentData.Value;\n          } else {\n            delete this.pdfViewerBase.nonFillableFields[currentData.GroupName];\n          }\n          fieldDatas = {\n            fieldValue: currentData.Value,\n            isReadOnly: currentData.IsReadonly\n          };\n          datas[currentData.GroupName] = fieldDatas;\n        } else if (currentData.Name === 'CheckBox') {\n          if (isRequired && currentData.Selected === false) {\n            this.pdfViewerBase.validateForm = true;\n            this.pdfViewerBase.nonFillableFields[currentData.GroupName] = currentData.Selected;\n          } else {\n            delete this.pdfViewerBase.nonFillableFields[currentData.GroupName];\n          }\n          if (currentData.CheckboxIndex && currentData.Selected && currentData.Value) {\n            fieldDatas = {\n              isSelected: currentData.CheckboxIndex,\n              isReadOnly: currentData.IsReadonly,\n              fieldValue: currentData.Value\n            };\n            datas[currentData.GroupName] = fieldDatas;\n          } else if (datas[currentData.GroupName] === undefined || datas[currentData.GroupName] === null) {\n            fieldDatas = {\n              isSelected: currentData.Selected,\n              isReadOnly: currentData.IsReadonly,\n              fieldValue: currentData.Value\n            };\n            datas[currentData.GroupName] = fieldDatas;\n          }\n        } else if (currentData.Name === 'DropDown') {\n          if (isRequired && currentData.SelectedValue === '') {\n            this.pdfViewerBase.validateForm = true;\n            this.pdfViewerBase.nonFillableFields[currentData.Text] = currentData.SelectedValue;\n          } else {\n            delete this.pdfViewerBase.nonFillableFields[currentData.Text];\n          }\n          fieldDatas = {\n            fieldValue: currentData.SelectedValue,\n            isReadOnly: currentData.IsReadonly\n          };\n          datas[currentData.FieldName] = fieldDatas;\n        } else if (currentData.Name === 'ListBox') {\n          // eslint-disable-next-line\n          var childItems = currentData['TextList'];\n          var childItemsText = [];\n          for (var m_1 = 0; m_1 < currentData.SelectedList.length; m_1++) {\n            // eslint-disable-next-line\n            var currentElement = currentData.SelectedList[m_1];\n            childItemsText.push(childItems[currentElement]);\n          }\n          fieldDatas = {\n            fieldValue: JSON.stringify(childItemsText),\n            isReadOnly: currentData.IsReadonly\n          };\n          datas[currentData.Text] = fieldDatas;\n        } else if (currentData.Name === 'SignatureField' || currentData.Name === 'InitialField') {\n          // eslint-disable-next-line\n          var csData = void 0;\n          if (currentData.Value === null || currentData.Value === '') {\n            this.addSignaturePath(currentData);\n          }\n          if (currentData.Value && currentData.Value !== '') {\n            csData = currentData.Value;\n            var fontFamily = currentData.fontFamily ? currentData.fontFamily : currentData.FontFamily;\n            if (fontFamily) {\n              datas[currentData.FieldName + 'fontName'] = fontFamily;\n              datas[currentData.FieldName + 'fontSize'] = currentData.fontSize ? currentData.fontSize : currentData.FontSize;\n            } else if (currentData.Value.split('base64,')[1]) {\n              datas[currentData.FieldName + 'ImageData'] = true;\n            } else {\n              // eslint-disable-next-line\n              var collectionData = processPathData(currentData.Value);\n              csData = splitArrayCollection(collectionData);\n            }\n          }\n          if (isRequired && currentData.Value === null || currentData.Value === '') {\n            this.pdfViewerBase.validateForm = true;\n            this.pdfViewerBase.nonFillableFields[currentData.FieldName] = JSON.stringify(csData);\n          } else {\n            delete this.pdfViewerBase.nonFillableFields[currentData.FieldName];\n          }\n          datas[currentData.FieldName] = JSON.stringify(csData);\n          if (currentData.Bounds) {\n            // eslint-disable-next-line\n            var bounds = this.getSignatureBounds(currentData.LineBounds, currentData.Bounds, currentData.PageIndex);\n            currentData.Bounds.x = bounds.x;\n            currentData.Bounds.y = bounds.y;\n            datas[currentData.FieldName + 'bounds'] = JSON.stringify(currentData.Bounds);\n          } else {\n            // eslint-disable-next-line\n            var lineBounds = currentData.LineBounds;\n            // eslint-disable-next-line\n            var bounds = {\n              x: this.ConvertPointToPixel(lineBounds.X),\n              y: this.ConvertPointToPixel(lineBounds.Y),\n              width: this.ConvertPointToPixel(lineBounds.Width),\n              height: this.ConvertPointToPixel(lineBounds.Height)\n            };\n            datas[currentData.FieldName + 'bounds'] = JSON.stringify(bounds);\n          }\n          datas[currentData.FieldName + 'isReadOnly'] = currentData.IsReadonly;\n        }\n      }\n      return JSON.stringify(datas);\n    }\n  };\n  FormFields.prototype.focusFormFields = function (event) {\n    // eslint-disable-next-line\n    var currentTarget = event.target;\n    // eslint-disable-next-line\n    if (currentTarget && currentTarget.className !== 'e-pdfviewer-signatureformfields' && currentTarget.className !== 'e-pdfviewer-signatureformfields e-pv-signature-focus') {\n      // eslint-disable-next-line\n      var backgroundcolor = currentTarget.style.backgroundColor;\n      // eslint-disable-next-line\n      var currentIndex = backgroundcolor.lastIndexOf(',');\n      // eslint-disable-next-line\n      var currentColor = backgroundcolor.slice(0, currentIndex + 1) + 0 + ')';\n      currentTarget.style.backgroundColor = currentColor;\n      if (currentTarget.type === 'checkbox') {\n        currentTarget.style.webkitAppearance = '';\n      }\n      currentTarget.style.boxShadow = \"0 0 5px \" + (currentTarget.style.borderColor === 'transparent' ? '#000000' : currentTarget.style.borderColor);\n    } else if (currentTarget) {\n      // eslint-disable-next-line\n      if (currentTarget.className === 'e-pdfviewer-signatureformfields' || currentTarget.className === 'e-pdfviewer-signatureformfields-signature' || currentTarget.className === 'e-pdfviewer-signatureformfields e-pv-signature-focus' || currentTarget.className === 'e-pdfviewer-signatureformfields-signature  e-pv-signature-focus') {\n        this.pdfViewerBase.signatureModule.setFocus(currentTarget.id);\n      }\n    }\n  };\n  FormFields.prototype.blurFormFields = function (event) {\n    // eslint-disable-next-line\n    var currentTarget = event.target;\n    if (currentTarget.InsertSpaces && this.isKeyDownCheck) {\n      // eslint-disable-next-line\n      var font = parseInt(currentTarget.style.width) - parseInt(currentTarget.style.height) / 2;\n      currentTarget.style.width = '' + font + 'px';\n      this.isKeyDownCheck = false;\n    }\n    if (currentTarget.type === 'checkbox') {\n      this.pdfViewer.fireFocusOutFormField(currentTarget.name, currentTarget.checked);\n    } else {\n      this.pdfViewer.fireFocusOutFormField(currentTarget.name, currentTarget.value);\n    }\n    // eslint-disable-next-line\n    var backgroundcolor = currentTarget.style.backgroundColor;\n    // eslint-disable-next-line\n    var currentIndex = backgroundcolor.lastIndexOf(',');\n    // eslint-disable-next-line\n    var currentColor = backgroundcolor.slice(0, currentIndex + 1) + 0.2 + ')';\n    currentTarget.style.backgroundColor = currentColor;\n    currentTarget.style.boxShadow = 'none';\n    if (currentTarget.type === 'checkbox' && !currentTarget.checked) {\n      currentTarget.style.webkitAppearance = 'none';\n    } else {\n      currentTarget.style.webkitAppearance = '';\n    }\n  };\n  FormFields.prototype.updateFormFields = function (event) {\n    // eslint-disable-next-line\n    var currentTarget = event.target;\n    if (currentTarget.className === 'e-pdfviewer-ListBox') {\n      currentTarget = currentTarget.parentElement;\n      this.updateDataInSession(currentTarget);\n    } else if (currentTarget.className === 'e-pdfviewer-signatureformfields' || currentTarget.className === 'e-pdfviewer-signatureformfields e-pv-signature-focus') {\n      this.currentTarget = currentTarget;\n    } else if (currentTarget.className === 'e-pv-buttonItem' || currentTarget.type === 'button') {\n      this.pdfViewer.fireButtonFieldClickEvent(currentTarget.value, currentTarget.name, currentTarget.id);\n    }\n    for (var m = 0; m < this.pdfViewer.formFieldCollections.length; m++) {\n      if (currentTarget.id === this.pdfViewer.formFieldCollections[m].id) {\n        if (this.pdfViewer.formDesignerModule || this.pdfViewer.annotationModule) {\n          this.pdfViewer.fireFormFieldClickEvent('formFieldClicked', this.pdfViewer.formFieldCollections[m]);\n        }\n        // eslint-disable-next-line\n        if (currentTarget.className === 'e-pdfviewer-signatureformfields' || currentTarget.className === 'e-pdfviewer-signatureformfields-signature' || currentTarget.className === 'e-pdfviewer-signatureformfields e-pv-signature-focus' || currentTarget.className === 'e-pdfviewer-signatureformfields-signature  e-pv-signature-focus') {\n          this.pdfViewerBase.signatureModule.setFocus(currentTarget.id);\n        }\n      }\n    }\n  };\n  /**\n   * @param signatureType\n   * @param value\n   * @param target\n   * @param fontname\n   * @param signatureType\n   * @param value\n   * @param target\n   * @param fontname\n   * @private\n   */\n  // eslint-disable-next-line\n  FormFields.prototype.drawSignature = function (signatureType, value, target, fontname) {\n    var annot;\n    // eslint-disable-next-line\n    var proxy = this;\n    var bounds;\n    var targetBounds;\n    var parentElementBounds;\n    var data;\n    if (this.pdfViewer.formDesigner) {\n      data = this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');\n    } else {\n      data = this.pdfViewerBase.getItemFromSessionStorage('_formfields');\n    }\n    var formFieldsData = JSON.parse(data);\n    if (this.pdfViewer.formDesignerModule) {\n      var targetName = this.currentTarget && this.currentTarget.offsetParent ? this.currentTarget.offsetParent.name : this.currentTarget ? this.currentTarget.name : target.name ? target.name : target.offsetParent.name;\n    } else {\n      var targetName = this.currentTarget ? this.currentTarget.name : target.name ? target.name : target.offsetParent.name;\n    }\n    var _loop_2 = function () {\n      var fieldName = this_2.pdfViewer.formDesigner ? formFieldsData[i].FormField.name : formFieldsData[i].FieldName;\n      if (this_2.pdfViewer.formDesigner ? fieldName === targetName : fieldName === targetName && !isNullOrUndefined(formFieldsData[i].ActualFieldName)) {\n        target = this_2.pdfViewer.formDesigner ? document.getElementById(formFieldsData[i].Key.split(\"_\")[0]) : document.getElementById(formFieldsData[i].uniqueID);\n        // eslint-disable-next-line\n        var currentField_1 = target;\n        var signatureAdd_1 = true;\n        this_2.pdfViewer.annotations.filter(function (item) {\n          if (!isNullOrUndefined(currentField_1) && item.id === target.id + \"_content\") {\n            signatureAdd_1 = false;\n          }\n        });\n        if (!isNullOrUndefined(currentField_1) && signatureAdd_1) {\n          var elementId = currentField_1.offsetParent.offsetParent.id.split(\"_\")[0];\n          var signatureField_1 = this_2.pdfViewer.nameTable[elementId];\n          if (target && target.offsetParent && signatureField_1) {\n            targetBounds = target.getBoundingClientRect();\n            parentElementBounds = target.offsetParent.offsetParent.offsetParent.getBoundingClientRect();\n            this_2.pdfViewerBase.drawSignatureWithTool = true;\n            if (target.nextSibling && target.nextSibling.id.indexOf(\"initial\") !== -1) {\n              this_2.pdfViewer.isInitialFieldToolbarSelection = true;\n            }\n          }\n          var currentValue_1 = value ? value : this_2.pdfViewerBase.signatureModule.outputString;\n          var currentFont = fontname ? fontname : this_2.pdfViewerBase.signatureModule.fontName;\n          var zoomvalue = this_2.pdfViewerBase.getZoomFactor();\n          var currentWidth = this_2.pdfViewerBase.drawSignatureWithTool ? targetBounds.width / zoomvalue : parseFloat(currentField_1.style.width) / zoomvalue;\n          var currentHeight = this_2.pdfViewerBase.drawSignatureWithTool ? targetBounds.height / zoomvalue : parseFloat(currentField_1.style.height) / zoomvalue;\n          var currentLeft = this_2.pdfViewerBase.drawSignatureWithTool ? (targetBounds.left - parentElementBounds.left) / zoomvalue : parseFloat(currentField_1.style.left) / zoomvalue;\n          var currentTop = this_2.pdfViewerBase.drawSignatureWithTool ? (targetBounds.top - parentElementBounds.top) / zoomvalue : parseFloat(currentField_1.style.top) / zoomvalue;\n          var currentPage_1 = this_2.pdfViewerBase.drawSignatureWithTool ? target.nextElementSibling ? parseFloat(target.nextElementSibling.id.split(\"_\")[1]) : parseFloat(currentField_1.id.split('_')[1]) : parseFloat(currentField_1.id.split('_')[1]);\n          var currentIndex = this_2.pdfViewerBase.drawSignatureWithTool ? target.nextElementSibling ? parseFloat(target.nextElementSibling.id.split('_')[2]) : parseFloat(currentField_1.id.split('_')[2]) : parseFloat(currentField_1.id.split('_')[2]);\n          var signString_1 = this_2.pdfViewerBase.signatureModule.saveImageString;\n          var signatureFontFamily_1;\n          var signatureFontSize_1;\n          var rotateAngleString = currentField_1.offsetParent.offsetParent.style.transform ? currentField_1.offsetParent.offsetParent.style.transform : currentField_1.style.transform;\n          rotateAngleString = rotateAngleString.substring(rotateAngleString.indexOf(\"(\") + 1, rotateAngleString.indexOf(\"d\"));\n          var rotateAngle_1 = rotateAngleString ? parseInt(rotateAngleString) : 0;\n          if (signatureType === 'Type') {\n            if (!currentFont) {\n              currentFont = 'Helvetica';\n            }\n            // eslint-disable-next-line\n            bounds = this_2.getSignBounds(currentIndex, rotateAngle_1, currentPage_1, zoomvalue, currentLeft, currentTop, currentWidth, currentHeight);\n            if (this_2.pdfViewer.signatureFitMode === 'Default') {\n              bounds = this_2.getDefaultBoundsforSign(bounds);\n            }\n            annot = {\n              // eslint-disable-next-line max-len\n              id: currentField_1.id,\n              bounds: {\n                x: bounds.x,\n                y: bounds.y,\n                width: bounds.width,\n                height: bounds.height\n              },\n              pageIndex: currentPage_1,\n              data: currentValue_1,\n              modifiedDate: '',\n              shapeAnnotationType: 'SignatureText',\n              opacity: 1,\n              rotateAngle: rotateAngle_1,\n              annotName: 'SignatureText',\n              comments: [],\n              review: {\n                state: '',\n                stateModel: '',\n                modifiedDate: '',\n                author: ''\n              },\n              fontFamily: currentFont,\n              fontSize: bounds.height / this_2.signatureFontSizeConstent\n            };\n            if (annot.shapeAnnotationType === 'SignatureText') {\n              var textWidth = this_2.getTextWidth(annot.data, annot.fontSize, annot.fontFamily);\n              var widthRatio = 1;\n              if (textWidth > bounds.width) widthRatio = bounds.width / textWidth;\n              annot.fontSize = this_2.getFontSize(Math.floor(annot.fontSize * widthRatio));\n            }\n            signString_1 = annot.data;\n            signatureFontFamily_1 = annot.fontFamily;\n            signatureFontSize_1 = annot.fontSize;\n          } else if (signatureType === 'Image') {\n            // eslint-disable-next-line\n            bounds = this_2.getSignBounds(currentIndex, rotateAngle_1, currentPage_1, zoomvalue, currentLeft, currentTop, currentWidth, currentHeight);\n            var image_1 = new Image();\n            var currentTarget_1 = target;\n            image_1.src = currentValue_1;\n            image_1.onload = function () {\n              proxy.imageOnLoad(bounds, image_1, currentValue_1, currentPage_1, rotateAngle_1, currentField_1, signatureField_1, signString_1, signatureFontFamily_1, signatureFontSize_1, currentTarget_1);\n            };\n          } else {\n            if (currentValue_1.indexOf('base64') !== -1) {\n              // eslint-disable-next-line\n              bounds = this_2.getSignBounds(currentIndex, rotateAngle_1, currentPage_1, zoomvalue, currentLeft, currentTop, currentWidth, currentHeight);\n              if (this_2.pdfViewer.signatureFitMode === 'Default') {\n                bounds = this_2.getDefaultBoundsforSign(bounds);\n              }\n              annot = {\n                // eslint-disable-next-line max-len\n                id: currentField_1.id,\n                bounds: {\n                  x: bounds.x,\n                  y: bounds.y,\n                  width: bounds.width,\n                  height: bounds.height\n                },\n                pageIndex: currentPage_1,\n                data: currentValue_1,\n                modifiedDate: '',\n                shapeAnnotationType: 'SignatureImage',\n                opacity: 1,\n                rotateAngle: rotateAngle_1,\n                annotName: 'SignatureField',\n                comments: [],\n                review: {\n                  state: '',\n                  stateModel: '',\n                  modifiedDate: '',\n                  author: ''\n                }\n              };\n              signString_1 = annot.data;\n            } else {\n              // eslint-disable-next-line\n              if (this_2.pdfViewer.signatureFitMode === 'Default') {\n                // eslint-disable-next-line\n                var signatureBounds = this_2.pdfViewerBase.signatureModule.updateSignatureAspectRatio(currentValue_1, false, currentField_1);\n                // eslint-disable-next-line\n                bounds = this_2.getSignBounds(currentIndex, rotateAngle_1, currentPage_1, zoomvalue, currentLeft, currentTop, signatureBounds.width, signatureBounds.height, true);\n                bounds.x = bounds.x + signatureBounds.left;\n                bounds.y = bounds.y + signatureBounds.top;\n              } else {\n                bounds = this_2.getSignBounds(currentIndex, rotateAngle_1, currentPage_1, zoomvalue, currentLeft, currentTop, currentWidth, currentHeight);\n              }\n              annot = {\n                // eslint-disable-next-line max-len\n                id: currentField_1.id,\n                bounds: {\n                  x: bounds.x,\n                  y: bounds.y,\n                  width: bounds.width,\n                  height: bounds.height\n                },\n                pageIndex: currentPage_1,\n                data: currentValue_1,\n                modifiedDate: '',\n                shapeAnnotationType: 'Path',\n                opacity: 1,\n                rotateAngle: rotateAngle_1,\n                annotName: 'SignatureField',\n                comments: [],\n                review: {\n                  state: '',\n                  stateModel: '',\n                  modifiedDate: '',\n                  author: ''\n                }\n              };\n            }\n          }\n          if (this_2.pdfViewerBase.drawSignatureWithTool && signatureField_1 && signatureType !== 'Image') {\n            annot.id = signatureField_1.id + \"_content\";\n            var obj = this_2.pdfViewer.add(annot);\n            signatureField_1.wrapper.children.push(obj.wrapper);\n          } else if (signatureType !== 'Image') {\n            this_2.pdfViewer.add(annot);\n          }\n          if (annot && annot.shapeAnnotationType === 'Path' && currentValue_1 !== '') {\n            this_2.pdfViewerBase.currentSignatureAnnot = annot;\n            // eslint-disable-next-line\n            var position = {\n              currentHeight: currentHeight,\n              currentWidth: currentWidth,\n              currentLeft: currentLeft,\n              currentTop: currentTop\n            };\n            this_2.pdfViewerBase.signatureModule.addSignatureCollection(bounds, position);\n            signString_1 = this_2.pdfViewerBase.signatureModule.saveImageString;\n            this_2.pdfViewerBase.currentSignatureAnnot = null;\n          }\n          if (signatureType !== 'Image') {\n            // eslint-disable-next-line\n            var canvass = document.getElementById(this_2.pdfViewer.element.id + '_annotationCanvas_' + currentPage_1);\n            // eslint-disable-next-line\n            this_2.pdfViewer.renderDrawing(canvass, currentPage_1);\n            this_2.pdfViewerBase.signatureModule.showSignatureDialog(false);\n            if (currentField_1.className === 'e-pdfviewer-signatureformfields e-pv-signature-focus') {\n              currentField_1.className = 'e-pdfviewer-signatureformfields-signature e-pv-signature-focus';\n            } else {\n              currentField_1.className = 'e-pdfviewer-signatureformfields-signature';\n            }\n            if (this_2.pdfViewerBase.drawSignatureWithTool && signatureField_1) {\n              var key = target.offsetParent.offsetParent.id.split('_')[0] + '_content';\n              annot.bounds = {\n                x: bounds.x * zoomvalue,\n                y: bounds.y * zoomvalue,\n                width: bounds.width * zoomvalue,\n                height: bounds.height * zoomvalue\n              };\n              this_2.updateSignatureDataInSession(annot, key);\n            } else {\n              this_2.updateDataInSession(currentField_1, annot.data, annot.bounds, signatureFontFamily_1, signatureFontSize_1);\n            }\n            currentField_1.style.pointerEvents = 'none';\n            if (this_2.pdfViewer.annotation) {\n              this_2.pdfViewer.annotation.addAction(annot.pageIndex, null, annot, 'FormField Value Change', '', annot, annot);\n            }\n            // eslint-disable-next-line\n            if (annot.shapeAnnotationType === 'Path' || annot.shapeAnnotationType === \"SignatureText\") {\n              this_2.pdfViewer.fireSignatureAdd(annot.pageIndex, annot.id, annot.shapeAnnotationType, annot.bounds, annot.opacity, null, null, signString_1);\n            }\n            this_2.pdfViewer.fireFocusOutFormField(currentField_1.name, currentValue_1);\n          }\n        }\n      }\n    };\n    var this_2 = this;\n    for (var i = 0; i < formFieldsData.length; i++) {\n      _loop_2();\n    }\n    if (signatureType !== 'Image') {\n      this.pdfViewerBase.signatureModule.hideSignaturePanel();\n      this.pdfViewerBase.drawSignatureWithTool = false;\n      this.pdfViewer.isInitialFieldToolbarSelection = false;\n    }\n  };\n  //  EJ2-62918- Image signature width is wrong while adding programmatically and it is fixed by adding an onload event.\n  //  A function was added and it was called\n  FormFields.prototype.imageOnLoad = function (bounds, image, currentValue, currentPage, rotateAngle, currentField, signatureField, signString, signatureFontFamily, signatureFontSize, target) {\n    if (target && target.offsetParent && signatureField) {\n      this.pdfViewerBase.drawSignatureWithTool = true;\n      if (target.nextSibling && target.nextSibling.id.indexOf(\"initial\") !== -1) {\n        this.pdfViewer.isInitialFieldToolbarSelection = true;\n      }\n    }\n    var annot;\n    if (this.pdfViewer.signatureFitMode === 'Default') {\n      var padding = Math.min(bounds.height / this.paddingDifferenceValue, bounds.width / this.paddingDifferenceValue);\n      var maxHeight = bounds.height - padding;\n      var maxWidth = bounds.width - padding;\n      var imageWidth = image.width;\n      var imageHeight = image.height;\n      var beforeWidth = bounds.width;\n      var beforeHeight = bounds.height;\n      var ratio = Math.min(maxWidth / imageWidth, maxHeight / imageHeight);\n      bounds.width = imageWidth * ratio;\n      bounds.height = imageHeight * ratio;\n      bounds.x = bounds.x + (beforeWidth - bounds.width) / 2;\n      bounds.y = bounds.y + (beforeHeight - bounds.height) / 2;\n    }\n    annot = {\n      // eslint-disable-next-line max-len\n      id: currentField.id,\n      bounds: {\n        x: bounds.x,\n        y: bounds.y,\n        width: bounds.width,\n        height: bounds.height\n      },\n      pageIndex: currentPage,\n      data: currentValue,\n      modifiedDate: '',\n      shapeAnnotationType: 'SignatureImage',\n      opacity: 1,\n      rotateAngle: rotateAngle,\n      annotName: 'SignatureField',\n      comments: [],\n      review: {\n        state: '',\n        stateModel: '',\n        modifiedDate: '',\n        author: ''\n      }\n    };\n    signString = annot.data;\n    if (this.pdfViewerBase.drawSignatureWithTool && signatureField) {\n      annot.id = signatureField.id + \"_content\";\n      var obj = this.pdfViewer.add(annot);\n      signatureField.wrapper.children.push(obj.wrapper);\n    } else {\n      this.pdfViewer.add(annot);\n    }\n    var canvass = document.getElementById(this.pdfViewer.element.id + '_annotationCanvas_' + currentPage);\n    // eslint-disable-next-line\n    this.pdfViewer.renderDrawing(canvass, currentPage);\n    this.pdfViewerBase.signatureModule.showSignatureDialog(false);\n    if (currentField.className === 'e-pdfviewer-signatureformfields e-pv-signature-focus') {\n      currentField.className = 'e-pdfviewer-signatureformfields-signature e-pv-signature-focus';\n    } else {\n      currentField.className = 'e-pdfviewer-signatureformfields-signature';\n    }\n    if (this.pdfViewerBase.drawSignatureWithTool && signatureField) {\n      var zoomvalue = this.pdfViewerBase.getZoomFactor();\n      var key = target.offsetParent.offsetParent.id.split('_')[0] + '_content';\n      annot.bounds = {\n        x: bounds.x * zoomvalue,\n        y: bounds.y * zoomvalue,\n        width: bounds.width * zoomvalue,\n        height: bounds.height * zoomvalue\n      };\n      this.updateSignatureDataInSession(annot, key);\n    } else {\n      this.updateDataInSession(currentField, annot.data, annot.bounds, signatureFontFamily, signatureFontSize);\n    }\n    currentField.style.pointerEvents = 'none';\n    if (this.pdfViewer.annotation) {\n      this.pdfViewer.annotation.addAction(annot.pageIndex, null, annot, 'FormField Value Change', '', annot, annot);\n    }\n    // eslint-disable-next-line\n    if (annot.shapeAnnotationType === \"SignatureImage\") {\n      this.pdfViewer.fireSignatureAdd(annot.pageIndex, annot.id, annot.shapeAnnotationType, annot.bounds, annot.opacity, null, null, signString);\n    }\n    this.pdfViewer.fireFocusOutFormField(currentField.name, currentValue);\n    this.pdfViewerBase.signatureModule.hideSignaturePanel();\n    this.pdfViewerBase.drawSignatureWithTool = false;\n    this.pdfViewer.isInitialFieldToolbarSelection = false;\n  };\n  FormFields.prototype.updateSignatureDataInSession = function (annot, key) {\n    var data = this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');\n    var formFieldsData = JSON.parse(data);\n    if (!isNullOrUndefined(formFieldsData)) {\n      var _loop_3 = function (i) {\n        if (formFieldsData[i].Key === key) {\n          var formFieldIndex = this_3.pdfViewer.formFieldCollection.findIndex(function (el) {\n            return el.id === formFieldsData[i].FormField.id.split('_')[0];\n          });\n          if (annot.shapeAnnotationType === \"SignatureText\") {\n            formFieldsData[i].FormField.signatureType = \"Text\";\n            this_3.pdfViewerBase.formFieldCollection[i].FormField.signatureType = \"Text\";\n            this_3.pdfViewer.nameTable[key].signatureType = \"Text\";\n            formFieldsData[i].FormField.fontFamily = annot.fontFamily === \"TimesRoman\" ? \"Times New Roman\" : annot.fontFamily;\n            this_3.pdfViewerBase.formFieldCollection[i].FormField.fontFamily = annot.fontFamily;\n            this_3.pdfViewer.nameTable[key].fontFamily = annot.fontFamily;\n            formFieldsData[i].FormField.fontSize = annot.fontSize;\n            this_3.pdfViewerBase.formFieldCollection[i].FormField.fontSize = annot.fontSize;\n            this_3.pdfViewer.nameTable[key].fontSize = annot.fontSize;\n            formFieldIndex > -1 ? this_3.pdfViewer.formFieldCollection[formFieldIndex].signatureType = \"Text\" : null;\n          } else if (annot.shapeAnnotationType === \"SignatureImage\") {\n            formFieldsData[i].FormField.signatureType = \"Image\";\n            this_3.pdfViewerBase.formFieldCollection[i].FormField.signatureType = \"Image\";\n            this_3.pdfViewer.nameTable[key].signatureType = \"Image\";\n            formFieldIndex > -1 ? this_3.pdfViewer.formFieldCollection[formFieldIndex].signatureType = \"Image\" : null;\n          } else {\n            formFieldsData[i].FormField.signatureType = \"Path\";\n            this_3.pdfViewerBase.formFieldCollection[i].FormField.signatureType = \"Path\";\n            this_3.pdfViewer.nameTable[key].signatureType = \"Path\";\n            formFieldIndex > -1 ? this_3.pdfViewer.formFieldCollection[formFieldIndex].signatureType = \"Path\" : null;\n          }\n          formFieldsData[i].FormField.signatureBound = annot.bounds;\n          this_3.pdfViewerBase.formFieldCollection[i].FormField.signatureBound = annot.bounds;\n          this_3.pdfViewer.nameTable[key].signatureBound = annot.bounds;\n          formFieldIndex > -1 ? this_3.pdfViewer.formFieldCollection[formFieldIndex].signatureBound = annot.bounds : null;\n          if (annot.shapeAnnotationType === \"Path\") {\n            var collectionData = processPathData(annot.data);\n            var csData = splitArrayCollection(collectionData);\n            formFieldsData[i].FormField.value = JSON.stringify(csData);\n            this_3.pdfViewer.nameTable[key].value = annot.data;\n            this_3.pdfViewer.nameTable[key.split('_')[0]].value = annot.data;\n            this_3.pdfViewerBase.formFieldCollection[i].FormField.value = JSON.stringify(csData);\n            formFieldIndex > -1 ? this_3.pdfViewer.formFieldCollection[formFieldIndex].value = JSON.stringify(csData) : null;\n          } else {\n            formFieldsData[i].FormField.value = annot.data;\n            this_3.pdfViewerBase.formFieldCollection[i].FormField.value = annot.data;\n            this_3.pdfViewer.nameTable[key.split('_')[0]].value = annot.data;\n            this_3.pdfViewer.nameTable[key].value = annot.data;\n            formFieldIndex > -1 ? this_3.pdfViewer.formFieldCollection[formFieldIndex].value = annot.data : null;\n          }\n          this_3.pdfViewer.formDesigner.updateFormFieldCollections(formFieldsData[i].FormField);\n          this_3.pdfViewer.formDesigner.updateFormFieldPropertiesChanges(\"formFieldPropertiesChange\", formFieldsData[i].FormField, true, false, false, false, false, false, false, false, false, false, false, false, false, false, false, \"\", formFieldsData[i].FormField.value);\n        }\n      };\n      var this_3 = this;\n      for (var i = 0; i < formFieldsData.length; i++) {\n        _loop_3(i);\n      }\n    }\n    this.pdfViewerBase.setItemInSessionStorage(formFieldsData, '_formDesigner');\n  };\n  /**\n   * @private\n   */\n  FormFields.prototype.getDefaultBoundsforSign = function (bounds) {\n    return {\n      x: bounds.x + 4,\n      y: bounds.y + 4,\n      width: bounds.width - 8,\n      height: bounds.height - 8\n    };\n  };\n  /**\n   * @private\n    */\n  // eslint-disable-next-line\n  FormFields.prototype.getSignBounds = function (currentIndex, rotateAngle, currentPage, zoomvalue, currentLeft, currentTop, currentWidth, currentHeight, isDraw) {\n    // eslint-disable-next-line\n    var bounds;\n    var signatureId = this.pdfViewer.isInitialFieldToolbarSelection ? 'initialIcon' : 'signIcon';\n    var signIcon = document.getElementById(signatureId + '_' + currentPage + '_' + currentIndex);\n    var signLeft = signIcon ? parseFloat(signIcon.style.left) * zoomvalue : 0;\n    var difference = currentLeft * zoomvalue - signLeft / zoomvalue;\n    if (rotateAngle === 90 || rotateAngle === 270) {\n      this.rotateAngle = 0;\n      if (signIcon.style.left !== '') {\n        if (isDraw) {\n          return bounds = {\n            x: currentLeft - difference / zoomvalue - zoomvalue,\n            y: currentTop + difference / zoomvalue + zoomvalue,\n            width: currentWidth,\n            height: currentHeight\n          };\n        } else {\n          return bounds = {\n            x: currentLeft - difference / zoomvalue - zoomvalue,\n            y: currentTop + difference / zoomvalue + zoomvalue,\n            width: currentHeight,\n            height: currentWidth\n          };\n        }\n      } else {\n        difference = 10;\n        if (isDraw) {\n          return bounds = {\n            x: currentLeft - currentWidth,\n            y: currentTop + currentWidth,\n            width: currentHeight,\n            height: currentWidth\n          };\n        } else {\n          return bounds = {\n            x: currentLeft - currentWidth - difference / 2,\n            y: currentTop + currentWidth + difference,\n            width: currentHeight,\n            height: currentWidth\n          };\n        }\n      }\n    } else {\n      this.rotateAngle = 0;\n      return bounds = {\n        x: currentLeft,\n        y: currentTop,\n        width: currentWidth,\n        height: currentHeight\n      };\n    }\n  };\n  // eslint-disable-next-line\n  FormFields.prototype.updateSameFieldsValue = function (event) {\n    if (this.formFieldsData) {\n      for (var i = 0; i < this.formFieldsData.length; i++) {\n        // eslint-disable-next-line\n        var currentField = this.formFieldsData[i];\n        if (event.target.name === currentField.FieldName && event.target.id !== currentField.uniqueID) {\n          // eslint-disable-next-line\n          var currentTarget = document.getElementById(this.formFieldsData[i].uniqueID);\n          if (currentTarget) {\n            currentTarget.value = event.target.value;\n          } else {\n            currentField.Text = event.target.value;\n            this.pdfViewerBase.setItemInSessionStorage(this.formFieldsData, '_formfields');\n          }\n        }\n      }\n    }\n  };\n  FormFields.prototype.updateFormFieldsValue = function (event) {\n    // eslint-disable-next-line\n    var currentTarget = event.target;\n    var fieldIndex;\n    var nextFields;\n    if (currentTarget.InsertSpaces && !this.isKeyDownCheck) {\n      // eslint-disable-next-line\n      var font = parseInt(currentTarget.style.width) + parseInt(currentTarget.style.height) / 2;\n      currentTarget.style.width = '' + font + 'px';\n      this.isKeyDownCheck = true;\n    }\n    if (event.which === 9 && currentTarget && (currentTarget.className === 'e-pdfviewer-formFields' || currentTarget.className === 'e-pdfviewer-signatureformfields e-pv-signature-focus' || currentTarget.className === 'e-pdfviewer-signatureformfields-signature')) {\n      // eslint-disable-next-line\n      var id = currentTarget.id.split('input_')[1].split('_')[0];\n      // eslint-disable-next-line\n      var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + parseInt(id));\n      // eslint-disable-next-line\n      var currentFields = textLayer.getElementsByClassName('e-pdfviewer-formFields');\n      var istabindexed = true;\n      fieldIndex = this.pdfViewer.formFieldCollections.findIndex(function (field) {\n        return field.id === currentTarget.id;\n      });\n      if (!event.shiftKey && event.key === \"Tab\") {\n        nextFields = fieldIndex + 1 < this.pdfViewer.formFieldCollections.length ? this.pdfViewer.formFieldCollections[fieldIndex + 1] : this.pdfViewer.formFieldCollections[0];\n      }\n      this.pdfViewer.focusFormField(nextFields);\n      istabindexed = true;\n      event.preventDefault();\n      var tabindex = currentTarget.tabIndex + 1;\n      while (!istabindexed) {\n        for (var l = 0; l < currentFields.length; l++) {\n          istabindexed = false;\n          if (currentFields[l].tabIndex === tabindex) {\n            currentFields[l].focus();\n            istabindexed = true;\n            event.preventDefault();\n            break;\n          }\n        }\n        if (this.maintainTabIndex[id] === tabindex) {\n          istabindexed = true;\n        }\n        tabindex = tabindex + 1;\n      }\n    }\n    if (event.shiftKey && event.key === \"Tab\") {\n      var fieldIndex_1 = this.pdfViewer.formFieldCollections.findIndex(function (field) {\n        return field.id === currentTarget.id;\n      });\n      var nextField = fieldIndex_1 > 0 ? this.pdfViewer.formFieldCollections[fieldIndex_1 - 1] : this.pdfViewer.formFieldCollections[this.pdfViewer.formFieldCollections.length - 1];\n      this.pdfViewer.focusFormField(nextField);\n      event.preventDefault();\n    }\n    if (event.currentTarget.classList.contains('e-pdfviewer-signatureformfields') || event.currentTarget.classList.contains('e-pdfviewer-signatureformfields-signature')) {\n      if (event.key === 'Enter') {\n        // eslint-disable-next-line\n        var currentTarget_2 = event.target;\n        for (var m = 0; m < this.pdfViewer.formFieldCollections.length; m++) {\n          if (currentTarget_2.id === this.pdfViewer.formFieldCollections[m].id) {\n            this.pdfViewerBase.signatureModule.setFocus(currentTarget_2.id);\n            this.pdfViewer.fireFormFieldClickEvent('formFieldClicked', this.pdfViewer.formFieldCollections[m]);\n          }\n        }\n      } else {\n        event.preventDefault();\n      }\n    }\n  };\n  FormFields.prototype.changeFormFields = function (event) {\n    // eslint-disable-next-line\n    var currentTarget = event.target;\n    this.updateDataInSession(currentTarget);\n  };\n  /**\n   * @param target\n   * @param signaturePath\n   * @param signatureBounds\n   * @param signatureFontFamily\n   * @param signatureFontSize\n   * @param target\n   * @param signaturePath\n   * @param signatureBounds\n   * @param signatureFontFamily\n   * @param signatureFontSize\n   * @param target\n   * @param signaturePath\n   * @param signatureBounds\n   * @param signatureFontFamily\n   * @param signatureFontSize\n   * @param target\n   * @param signaturePath\n   * @param signatureBounds\n   * @param signatureFontFamily\n   * @param signatureFontSize\n   * @param target\n   * @param signaturePath\n   * @param signatureBounds\n   * @param signatureFontFamily\n   * @param signatureFontSize\n   * @private\n   */\n  // eslint-disable-next-line\n  FormFields.prototype.updateDataInSession = function (target, signaturePath, signatureBounds, signatureFontFamily, signatureFontSize) {\n    this.pdfViewerBase.updateDocumentEditedProperty(true);\n    // eslint-disable-next-line\n    var filterFields = [];\n    var fieldsByName = \" \";\n    var filterFieldName = [];\n    var filterArrayLength = 0;\n    var data = this.pdfViewerBase.getItemFromSessionStorage('_formfields');\n    if (data && !this.pdfViewer.formDesignerModule) {\n      // eslint-disable-next-line\n      var FormFieldsData = JSON.parse(data);\n      filterFields = FormFieldsData.filter(function (item) {\n        return item.uniqueID === target.id;\n      });\n      if (filterFields.length > 0) {\n        fieldsByName = filterFields[0].FieldName;\n        filterFieldName = FormFieldsData.filter(function (item) {\n          return item.FieldName === fieldsByName;\n        });\n        filterArrayLength = filterFieldName.length;\n      }\n      for (var m = 0; m < FormFieldsData.length; m++) {\n        // eslint-disable-next-line\n        var currentData = FormFieldsData[m];\n        if (currentData.uniqueID === target.id || fieldsByName === currentData.FieldName) {\n          if (target && target.type === 'text' || target.type === 'password' || target.type === 'textarea') {\n            var signField = target;\n            if (signField.classList.contains('e-pdfviewer-signatureformfields') || signField.classList.contains('e-pdfviewer-signatureformfields-signature')) {\n              if (signaturePath) {\n                currentData.Value = signaturePath;\n              }\n              if (signatureBounds) {\n                currentData.Bounds = signatureBounds;\n              }\n              if (signatureFontFamily) {\n                currentData.FontFamily = signatureFontFamily;\n                currentData.FontSize = signatureFontSize;\n              }\n            } else {\n              currentData.Text = target.value;\n              currentData.Value = target.value;\n              currentData.Multiline = target.multiline;\n            }\n          } else if (target.type === 'radio') {\n            if (target.checked) {\n              for (var l = 0; l < FormFieldsData.length; l++) {\n                // eslint-disable-next-line\n                var currentType = FormFieldsData[l];\n                if (FormFieldsData[l].GroupName === target.name) {\n                  FormFieldsData[l].Selected = false;\n                }\n              }\n              if (target.value == currentData.Value) {\n                currentData.Selected = true;\n                break;\n              } else {\n                currentData.Selected = false;\n              }\n            }\n            if (target.selected) {\n              currentData.Selected = true;\n            }\n            if (currentData.Value == \"\" || currentData.Value !== target.value) {\n              currentData.Value = target.value;\n            }\n          } else if (target.type === 'checkbox') {\n            var targetCheckBox = target.id;\n            var filterCheckBoxSameName = FormFieldsData.filter(function (sameNameCheckboxField) {\n              return sameNameCheckboxField.GroupName === target.name && sameNameCheckboxField.Name == 'CheckBox';\n            });\n            for (var l = 0; l < filterCheckBoxSameName.length; l++) {\n              // eslint-disable-next-line\n              var currentType = filterCheckBoxSameName[l];\n              currentType.Selected = false;\n              currentType.checked = false;\n              // eslint-disable-next-line\n              var currentTarget = document.getElementById(currentType.uniqueID);\n              if (currentTarget) {\n                if (targetCheckBox !== currentTarget.id) {\n                  currentTarget.Selected = false;\n                  currentTarget.checked = false;\n                  currentTarget.style.webkitAppearance = 'none';\n                }\n              }\n            }\n            if (target.checked) {\n              currentData.Selected = true;\n            } else {\n              currentData.Selected = false;\n            }\n            if (currentData.Value == \"\") {\n              currentData.Value = target.value;\n            }\n          } else if (target.type === 'select-one' && target.size === 0) {\n            if (target.selectedIndex < 0) {\n              target.selectedIndex = currentData.selectedIndex;\n            }\n            // eslint-disable-next-line\n            var currentValue = target.options[target.selectedIndex].text;\n            // eslint-disable-next-line\n            var childrens = target.children;\n            var isChildElements = false;\n            for (var k = 0; k < childrens.length; k++) {\n              if (childrens[k].text === currentValue) {\n                currentData.SelectedValue = currentValue;\n                currentData.selectedIndex = target.selectedIndex;\n              }\n            }\n          } else if (target.type === 'select-multiple' || target.size > 0) {\n            // eslint-disable-next-line\n            var currentValue = target.selectedOptions;\n            currentData.SelectedList = [];\n            for (var z = 0; z < currentValue.length; z++) {\n              // eslint-disable-next-line\n              var childrens = target.children;\n              for (var k = 0; k < childrens.length; k++) {\n                if (childrens[k] === currentValue[z]) {\n                  currentData.SelectedList.push(k);\n                }\n              }\n            }\n            currentData.SelectedValue = target.value;\n            var index = currentData.TextList ? currentData.TextList.indexOf(target.value) : 0;\n            currentData.selectedIndex = index > -1 ? index : 0;\n            currentData.SelectedList = [currentData.selectedIndex];\n          }\n          if (target.disabled) {\n            currentData.IsReadonly = true;\n          }\n          currentData.IsRequired = target.Required ? target.Required : false;\n          currentData.ToolTip = target.tooltip ? target.tooltip : \"\";\n          this.updateFormFieldsCollection(currentData);\n          filterArrayLength--;\n          if (filterArrayLength == 0) break;\n        } else if (target && target.getAttribute('list') != null && target.type === 'text' && currentData.uniqueID === target.list.id) {\n          currentData.SelectedValue = target.value;\n        }\n        this.updateFormFieldsCollection(currentData);\n      }\n      window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_formfields');\n      this.pdfViewerBase.setItemInSessionStorage(FormFieldsData, '_formfields');\n    }\n    if (this.pdfViewer.formDesignerModule && target && target.id) {\n      var selectedItem = this.pdfViewer.nameTable[target.id.split('_')[0]];\n      if (selectedItem && selectedItem.wrapper && selectedItem.wrapper.children[0]) {\n        selectedItem.value = target.value;\n        var point = cornersPointsBeforeRotation(selectedItem.wrapper.children[0]).topLeft;\n        this.pdfViewer.formDesignerModule.updateFormDesignerFieldInSessionStorage(point, selectedItem.wrapper.children[0], selectedItem.formFieldAnnotationType, selectedItem);\n      }\n    }\n  };\n  /**\n   * @private\n   */\n  FormFields.prototype.removeExistingFormFields = function () {\n    var data = this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');\n    var formFieldsData = JSON.parse(data);\n    if (formFieldsData) {\n      for (var i = 0; i < formFieldsData.length; i++) {\n        if (formFieldsData[i].FormField.formFieldAnnotationType === \"RadioButton\") {\n          var buttonItem = [];\n          buttonItem = formFieldsData[i].FormField.radiobuttonItem;\n          var sameButtonItemId = formFieldsData[i].FormField.id.split('_')[0];\n          for (var j = 0; j < buttonItem.length; j++) {\n            var otherButton = buttonItem[j];\n            if (otherButton.id.split('_')[0] !== sameButtonItemId) {\n              this.pdfViewer.formDesignerModule.deleteFormField(otherButton.id.split('_')[0]);\n            }\n          }\n        }\n        if (formFieldsData[i].Key) {\n          this.pdfViewer.formDesignerModule.deleteFormField(formFieldsData[i].Key.split('_')[0]);\n        }\n      }\n    }\n  };\n  // eslint-disable-next-line\n  FormFields.prototype.applyCommonProperties = function (inputdiv, pageIndex, index, currentData, isFieldRotated) {\n    // eslint-disable-next-line\n    var inputField = document.getElementById(this.pdfViewer.element.id + 'input_' + pageIndex + '_' + index);\n    if (inputField) {\n      var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageIndex);\n      if (inputdiv.type === 'text' && inputField.parentElement !== textLayer) {\n        inputField.parentElement.remove();\n      }\n      if (!(inputField.className === \"e-pdfviewer-signatureformfields e-pv-signature-focus\")) {\n        inputField.remove();\n      }\n    }\n    // eslint-disable-next-line\n    var signIcon = document.getElementById('signIcon_' + pageIndex + '_' + index);\n    var left = parseFloat(inputdiv.style.left);\n    var top = parseInt(inputdiv.style.top);\n    var width = parseFloat(inputdiv.style.width);\n    var height = parseFloat(inputdiv.style.height);\n    var signIconWidth;\n    var signIconHeght;\n    var hightDifference;\n    var widthDifference;\n    var zoomvalue = this.pdfViewerBase.getZoomFactor();\n    if (signIcon && !isFieldRotated) {\n      signIconWidth = parseFloat(signIcon.style.width);\n      signIconHeght = parseFloat(signIcon.style.height);\n      if (signIcon.style.transform == 'rotate(90deg)') {\n        signIcon.style.transform = 'rotate(0deg)';\n        hightDifference = height / 2;\n        widthDifference = signIconWidth * zoomvalue;\n        signIcon.style.left = left - (hightDifference - signIconWidth * zoomvalue) + widthDifference / 2 + 'px';\n      }\n      if (signIcon.style.transform == 'rotate(180deg)') {\n        signIcon.style.transform = 'rotate(0deg)';\n        signIcon.style.left = left + 'px';\n        signIcon.style.top = top + 'px';\n      }\n      if (signIcon.style.transform == 'rotate(270deg)') {\n        signIcon.style.transform = 'rotate(0deg)';\n        hightDifference = height / 2;\n        widthDifference = signIconWidth * zoomvalue;\n        signIcon.style.left = left - (hightDifference - widthDifference) + widthDifference / 2 + 'px';\n        signIcon.style.top = top + (width + signIconHeght * zoomvalue) + signIconHeght * zoomvalue / 2 + 'px';\n      }\n    }\n    if (currentData.IsSignatureField && this.isSignatureField) {\n      inputdiv.className = 'e-pdfviewer-signatureformfields-signature';\n      inputdiv.style.pointerEvents = 'none';\n    } else if (currentData.IsSignatureField) {\n      if (currentData.Value) {\n        inputdiv.className = 'e-pdfviewer-signatureformfields-signature';\n        inputdiv.style.pointerEvents = 'none';\n      } else {\n        inputdiv.className = 'e-pdfviewer-signatureformfields';\n      }\n    } else if (currentData.Name !== 'Button') {\n      inputdiv.className = 'e-pdfviewer-formFields';\n    }\n    inputdiv.id = this.pdfViewer.element.id + 'input_' + pageIndex + '_' + index;\n    inputdiv.ariaLabel = this.pdfViewer.element.id + 'input_' + pageIndex;\n    inputdiv.style.zIndex = 1000;\n  };\n  /**\n   * @param currentData\n   * @param pageIndex\n   * @param index\n   * @param printContainer\n   * @param currentData\n   * @param pageIndex\n   * @param index\n   * @param printContainer\n   * @private\n   */\n  // eslint-disable-next-line\n  FormFields.prototype.createFormFields = function (currentData, pageIndex, index, printContainer, count) {\n    // eslint-disable-next-line\n    var currentField;\n    // eslint-disable-next-line\n    switch (currentData['Name']) {\n      case 'Textbox':\n        currentField = this.createTextBoxField(currentData, pageIndex, 'text');\n        break;\n      case 'Password':\n        currentField = this.createTextBoxField(currentData, pageIndex, 'password');\n        break;\n      case 'RadioButton':\n        currentField = this.createRadioBoxField(currentData, pageIndex, 'radio');\n        break;\n      case 'CheckBox':\n        currentField = this.createRadioBoxField(currentData, pageIndex, 'checkbox', printContainer);\n        break;\n      case 'DropDown':\n        currentField = this.createDropDownField(currentData, pageIndex, index, printContainer);\n        break;\n      case 'ListBox':\n        currentField = this.createListBoxField(currentData, pageIndex);\n        break;\n      case 'InitialField':\n      case 'SignatureField':\n        currentField = this.createSignatureField(currentData, pageIndex, index, printContainer, count);\n        var isFieldRotated = false;\n        if (currentData['Rotation'] === 0) {\n          isFieldRotated = true;\n        }\n        if (currentData.Value && currentData.Value !== '') {\n          this.renderExistingAnnnot(currentData, index, printContainer, isFieldRotated);\n          this.isSignatureRendered = true;\n          count++;\n        }\n        break;\n      case 'Button':\n        currentField = this.createButtonField(currentData, pageIndex);\n        break;\n      case 'ink':\n        if (this.pdfViewer.formDesignerModule) {\n          if (currentData.Value && currentData.Value !== '' && !this.isSignatureRendered) {\n            this.renderExistingAnnnot(currentData, index, printContainer);\n          }\n        }\n        break;\n      case 'SignatureText':\n      case 'SignatureImage':\n        if (currentData.Value && currentData.Value !== '' && !this.isSignatureRendered) {\n          this.renderExistingAnnnot(currentData, index, printContainer);\n        }\n        break;\n    }\n    return {\n      currentField: currentField,\n      count: count\n    };\n  };\n  FormFields.prototype.getFormFieldType = function (currentData) {\n    // eslint-disable-next-line\n    var currentField;\n    // eslint-disable-next-line\n    switch (currentData['Name']) {\n      case 'Textbox':\n        currentField = 'Textbox';\n        break;\n      case 'Password':\n        currentField = 'Password';\n        break;\n      case 'RadioButton':\n        currentField = 'RadioButton';\n        break;\n      case 'CheckBox':\n        currentField = 'CheckBox';\n        break;\n      case 'DropDown':\n        currentField = 'DropDown';\n        break;\n      case 'ListBox':\n        currentField = 'ListBox';\n        break;\n      case 'SignatureField':\n        currentField = 'SignatureField';\n        if (currentData.IsInitialField) {\n          currentField = 'InitialField';\n        }\n        break;\n      case 'InitialField':\n        currentField = 'InitialField';\n        break;\n    }\n    return currentField;\n  };\n  // eslint-disable-next-line\n  FormFields.prototype.createButtonField = function (data, pageIndex) {\n    // eslint-disable-next-line\n    var inputField = document.createElement('input');\n    if (data.Value && (this.isBase64(data.Value) || this.isURL(data.Value))) {\n      inputField.type = 'image';\n      inputField.src = data.Value;\n    } else {\n      inputField.type = 'button';\n    }\n    inputField.className = 'e-pv-buttonItem';\n    if (data.Text !== '') {\n      inputField.value = data.Text;\n    } else {\n      inputField.value = '';\n    }\n    inputField.name = data.FieldName;\n    return inputField;\n  };\n  /**\n   * Returns the boolean value based on the imgae source base64\n   *\n   * @param {string} imageSrc - Passing the image source.\n   *\n   * @returns {boolean}\n   */\n  FormFields.prototype.isBase64 = function (imageSrc) {\n    return /^data:([a-zA-Z]*\\/[a-zA-Z+.-]*);base64,/.test(imageSrc);\n  };\n  /**\n   * Returns the boolean value based on the imgae source URL\n   *\n   * @param {string} imageSrc - Passing the image source.\n   *\n   * @returns {boolean}\n   */\n  FormFields.prototype.isURL = function (imageSrc) {\n    try {\n      new URL(imageSrc);\n      return true;\n    } catch (_a) {\n      return false;\n    }\n  };\n  // eslint-disable-next-line\n  FormFields.prototype.createTextBoxField = function (data, pageIndex, type) {\n    // eslint-disable-next-line\n    var inputField;\n    if (data.Visible === 1) {\n      return;\n    }\n    if (data.Multiline) {\n      inputField = document.createElement('textarea');\n      inputField.style.resize = 'none';\n    } else {\n      inputField = document.createElement('input');\n      inputField.type = type;\n    }\n    if (data.MaxLength > 0) {\n      inputField.maxLength = data.MaxLength;\n    }\n    this.addAlignmentPropety(data, inputField);\n    if (data.Text !== '') {\n      inputField.value = data.Text;\n    } else {\n      inputField.value = '';\n    }\n    if (!this.pdfViewer.enableAutoComplete) {\n      inputField.autocomplete = 'off';\n    }\n    inputField.name = data.FieldName;\n    return inputField;\n  };\n  // eslint-disable-next-line\n  FormFields.prototype.checkIsReadonly = function (data, inputField) {\n    var isReadonly = false;\n    for (var n = 0; n < this.readOnlyCollection.length; n++) {\n      if (inputField.id === this.readOnlyCollection[n]) {\n        isReadonly = true;\n        break;\n      }\n    }\n    if (!this.pdfViewer.formDesignerModule && !this.pdfViewer.annotationModule && (data.IsInitialField || data.IsSignatureField)) {\n      isReadonly = true;\n    }\n    if (data.IsReadonly || !this.pdfViewer.enableFormFields || isReadonly) {\n      inputField.disabled = true;\n      inputField.style.cursor = 'default';\n      inputField.style.backgroundColor = 'transparent';\n    } else {\n      // eslint-disable-next-line\n      var borderColor = data.BackColor;\n      inputField.style.backgroundColor = 'rgba(' + borderColor.R + ',' + borderColor.G + ',' + borderColor.B + ',' + 0.2 + ')';\n      // eslint-disable-next-line\n      var fontColor = data.FontColor;\n      inputField.style.color = 'rgba(' + fontColor.R + ',' + fontColor.G + ',' + fontColor.B + ',' + 1 + ')';\n    }\n  };\n  /**\n   * @param isReadonly\n   * @private\n   */\n  // eslint-disable-next-line max-len\n  FormFields.prototype.formFieldsReadOnly = function (isReadonly) {\n    // eslint-disable-next-line\n    var formFields = document.getElementsByClassName('e-pdfviewer-formFields');\n    this.makeformFieldsReadonly(formFields, isReadonly);\n    // eslint-disable-next-line\n    var signatureFields = document.getElementsByClassName('e-pdfviewer-signatureformfields');\n    this.makeformFieldsReadonly(signatureFields, isReadonly);\n  };\n  // eslint-disable-next-line\n  FormFields.prototype.makeformFieldsReadonly = function (formFields, isReadonly) {\n    for (var i = 0; i < formFields.length; i++) {\n      if (formFields[i]) {\n        // eslint-disable-next-line\n        var inputField = formFields[i];\n        if (!isReadonly) {\n          inputField.disabled = true;\n          inputField.style.cursor = 'default';\n        } else {\n          // eslint-disable-next-line\n          inputField.disabled = false;\n        }\n      }\n    }\n  };\n  // eslint-disable-next-line\n  FormFields.prototype.applyTabIndex = function (data, inputField, pageIndex) {\n    inputField.tabIndex = data.TabIndex;\n    this.maxTabIndex = Math.max(this.maxTabIndex, inputField.tabIndex);\n    if (this.minTabIndex === -1) {\n      this.minTabIndex = inputField.tabIndex;\n    }\n    this.minTabIndex = Math.min(this.minTabIndex, inputField.tabIndex);\n    this.maintainTabIndex[pageIndex.toString()] = this.maxTabIndex;\n    this.maintanMinTabindex[pageIndex.toString()] = this.minTabIndex;\n  };\n  // eslint-disable-next-line\n  FormFields.prototype.checkIsRequiredField = function (data, inputField) {\n    if (data.IsRequired) {\n      inputField.required = true;\n      inputField.style.border = '1px solid red';\n    } else {\n      // eslint-disable-next-line\n      var borderColor = data.BorderColor;\n      inputField.style.border = data.BorderWidth;\n      inputField.style.borderColor = 'rgba(' + borderColor.R + ',' + borderColor.G + ',' + borderColor.B + ',' + 1 + ')';\n    }\n    if (inputField.type !== 'checkbox' && inputField.type !== 'radio') {\n      var borderStyle = data.BorderStyle;\n      this.addBorderStylePropety(borderStyle, inputField);\n    }\n  };\n  // eslint-disable-next-line\n  FormFields.prototype.applyDefaultColor = function (inputField) {\n    // eslint-disable-next-line max-len\n    if (inputField.type !== 'button' && (inputField.style.backgroundColor === 'rgba(255, 255, 255, 0.2)' || inputField.style.backgroundColor === 'rgba(0, 0, 0, 0.2)') || inputField.style.backgroundColor === 'rgba(218, 234, 247, 0.2)') {\n      inputField.style.backgroundColor = 'rgba(0, 20, 200, 0.2)';\n    }\n    if (inputField.style.color === 'rgba(255, 255, 255, 0.2)') {\n      inputField.style.color = 'black';\n    }\n  };\n  // eslint-disable-next-line\n  FormFields.prototype.addAlignmentPropety = function (data, inputField) {\n    // eslint-disable-next-line\n    var alignment = data.Alignment;\n    switch (alignment) {\n      case 0:\n        inputField.style.textAlign = 'left';\n        break;\n      case 1:\n        inputField.style.textAlign = 'center';\n        break;\n      case 2:\n        inputField.style.textAlign = 'right';\n        break;\n      case 3:\n        inputField.style.textAlign = 'justify';\n        break;\n    }\n  };\n  // eslint-disable-next-line\n  FormFields.prototype.addBorderStylePropety = function (borderStyle, inputField) {\n    // eslint-disable-next-line\n    switch (borderStyle) {\n      case 0:\n        inputField.style.borderStyle = 'solid';\n        break;\n      case 1:\n        inputField.style.borderStyle = 'dashed';\n        break;\n      case 2:\n        inputField.style.borderStyle = 'outset';\n        break;\n      case 3:\n        inputField.style.borderStyle = 'inset';\n        break;\n      case 4:\n        inputField.style.borderStyle = 'outset';\n        break;\n      case 5:\n        inputField.style.borderStyle = 'dotted';\n        break;\n      case 6:\n        inputField.style.borderStyle = 'inset';\n        break;\n    }\n  };\n  // eslint-disable-next-line\n  FormFields.prototype.createRadioBoxField = function (data, pageIndex, type, printContainer) {\n    // eslint-disable-next-line\n    var inputField = document.createElement('input');\n    inputField.type = type;\n    if (data.Selected) {\n      inputField.checked = true;\n    } else if (type === 'checkbox' && !printContainer) {\n      inputField.style.webkitAppearance = 'none';\n    }\n    inputField.name = data.GroupName;\n    inputField.value = data.Value;\n    return inputField;\n  };\n  // eslint-disable-next-line\n  FormFields.prototype.createDropDownField = function (data, pageIndex, index, printContainer) {\n    // eslint-disable-next-line\n    var inputField = document.createElement('select');\n    // eslint-disable-next-line\n    var childItems = data['TextList'];\n    if (data.Selected && !printContainer) {\n      // eslint-disable-next-line\n      var previousField = document.getElementById('editableDropdown' + pageIndex + '_' + index);\n      if (previousField) {\n        previousField.remove();\n      }\n      // eslint-disable-next-line\n      var inputFields = document.createElement('input');\n      inputFields.id = 'editableDropdown' + pageIndex + '_' + index;\n      inputFields.setAttribute('list', this.pdfViewer.element.id + 'input_' + pageIndex + '_' + index);\n      // eslint-disable-next-line\n      var bounds = data['LineBounds'];\n      // eslint-disable-next-line\n      var font = data['Font'];\n      inputFields.style.position = 'absolute';\n      inputFields.style.border = '0px';\n      // eslint-disable-next-line\n      this.applyPosition(inputFields, bounds, font, pageIndex, data['Rotation']);\n      inputFields.style.backgroundColor = 'rgba(0, 20, 200, 0.2)';\n      inputFields.className = 'e-pdfviewer-formFields';\n      if (data.selectedIndex === -1) {\n        inputFields.value = data.SelectedValue;\n      }\n      if (printContainer) {\n        printContainer.appendChild(inputFields);\n      } else {\n        var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageIndex);\n        textLayer.appendChild(inputFields);\n      }\n      inputFields.addEventListener('focus', this.focusFormFields.bind(this));\n      inputFields.addEventListener('blur', this.blurFormFields.bind(this));\n      inputFields.addEventListener('click', this.updateFormFields.bind(this));\n      inputFields.addEventListener('change', this.changeFormFields.bind(this));\n      inputFields.addEventListener('keydown', this.updateFormFieldsValue.bind(this));\n      inputField = document.createElement('DATALIST');\n    }\n    for (var j = 0; j < childItems.length; j++) {\n      // eslint-disable-next-line\n      var option = document.createElement('option');\n      option.className = 'e-dropdownSelect';\n      if (data.SelectedValue === childItems[j] || data.selectedIndex === j) {\n        option.selected = true;\n      } else {\n        option.selected = false;\n      }\n      option.innerHTML = childItems[j];\n      inputField.appendChild(option);\n    }\n    inputField.name = data.Text;\n    return inputField;\n  };\n  // eslint-disable-next-line\n  FormFields.prototype.createListBoxField = function (data, pageIndex) {\n    // eslint-disable-next-line\n    var inputField = document.createElement('select');\n    // eslint-disable-next-line\n    var childItems = data['TextList'];\n    if (data.MultiSelect) {\n      inputField.multiple = true;\n    } else {\n      inputField.multiple = false;\n      inputField.size = childItems.length;\n    }\n    for (var j = 0; j < childItems.length; j++) {\n      // eslint-disable-next-line\n      var option = document.createElement('option');\n      option.className = 'e-pdfviewer-ListBox';\n      for (var k = 0; k < data.SelectedList.length; k++) {\n        if (data.SelectedList[k] === j) {\n          option.selected = true;\n        }\n      }\n      option.innerHTML = childItems[j];\n      inputField.appendChild(option);\n    }\n    inputField.name = data.Text;\n    return inputField;\n  };\n  // eslint-disable-next-line\n  FormFields.prototype.createSignatureField = function (data, pageIndex, index, printContainer, count) {\n    // eslint-disable-next-line\n    var inputField = document.createElement('input');\n    inputField.type = 'text';\n    inputField.name = data.FieldName;\n    var zoomvalue = this.pdfViewerBase.getZoomFactor();\n    // eslint-disable-next-line\n    var previousField = document.getElementById('signIcon_' + pageIndex + '_' + index);\n    if (previousField && !printContainer) {\n      previousField.remove();\n    }\n    this.pdfViewerBase.isInitialField = data.IsInitialField;\n    var signIndicator = this.pdfViewerBase.isInitialField ? \"Initial\" : \"Sign\";\n    //check whether the width for sign indicator has default value or not and then set the default width value for initial field.\n    var signatureFieldIndicatorWidth = this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings ? this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.width === 19 ? this.pdfViewerBase.isInitialField ? 27 : 19 : this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.width : 19;\n    // eslint-disable-next-line\n    var span = document.createElement('span');\n    var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageIndex);\n    // eslint-disable-next-line\n    var bounds = data['LineBounds'];\n    // eslint-disable-next-line\n    var font = data['Font'];\n    var left = this.ConvertPointToPixel(bounds.X);\n    var top = this.ConvertPointToPixel(bounds.Y);\n    var indicatorWidth = this.ConvertPointToPixel(bounds.Width);\n    var indicatorHeight = this.ConvertPointToPixel(bounds.Height);\n    // eslint-disable-next-line max-len\n    var height = this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings ? this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.height > indicatorHeight * zoomvalue / 2 ? indicatorHeight * zoomvalue / 2 : this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.height : indicatorHeight * zoomvalue / 2;\n    // eslint-disable-next-line max-len\n    var width = signatureFieldIndicatorWidth > indicatorWidth * zoomvalue / 2 ? indicatorWidth * zoomvalue / 2 : signatureFieldIndicatorWidth;\n    // eslint-disable-next-line max-len\n    var size = this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings ? this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.fontSize > height / 2 ? 10 : this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.fontSize : 10;\n    var fontSize = size > width ? width / 2 : size > height ? height / 2 : size;\n    span.style.position = 'absolute';\n    span.id = 'signIcon_' + pageIndex + '_' + index;\n    var rotation = this.getAngle(pageIndex);\n    // eslint-disable-next-line\n    var annotBounds = {\n      left: left,\n      top: top,\n      width: width,\n      height: height\n    };\n    // eslint-disable-next-line\n    var fieldBounds = this.getBounds(annotBounds, pageIndex);\n    span.style.transform = 'rotate(' + rotation + 'deg)';\n    span.style.left = fieldBounds.left * zoomvalue + 'px';\n    span.style.top = fieldBounds.top * zoomvalue + 'px';\n    if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n      span.style.height = 5 + 'px';\n      span.style.width = 10 + 'px';\n      span.style.fontSize = '3px';\n    } else {\n      span.style.height = height + 'px';\n      span.style.width = width + 'px';\n      span.style.fontSize = fontSize + 'px';\n      if (isBlazor()) {\n        span.style.fontSize = fontSize - 1 + 'px';\n      }\n    }\n    if (!(height + this.indicatorPaddingValue > indicatorHeight * zoomvalue) && !(width + this.indicatorPaddingValue > indicatorWidth * zoomvalue)) {\n      span.style.padding = '2px';\n    }\n    span.style.textAlign = 'center';\n    span.style.boxSizing = 'content-box';\n    // eslint-disable-next-line\n    span.innerHTML = this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings ? this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.text ? this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.text : signIndicator : signIndicator;\n    span.style.color = this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings ? this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.color ? this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.color : 'black' : 'black';\n    // eslint-disable-next-line\n    span.style.backgroundColor = this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings ? this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.backgroundColor ? this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.backgroundColor : 'orange' : 'orange';\n    span.style.opacity = this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings ? this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.opacity ? this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.opacity : 1 : 1;\n    if (!isNullOrUndefined(textLayer)) {\n      textLayer.appendChild(span);\n    }\n    this.addSignaturePath(data, count);\n    return inputField;\n  };\n  // eslint-disable-next-line\n  FormFields.prototype.addSignaturePath = function (signData, count) {\n    this.isSignatureField = false;\n    // eslint-disable-next-line\n    var data = this.pdfViewerBase.getItemFromSessionStorage('_formfields');\n    if (data) {\n      // eslint-disable-next-line\n      var formFieldsData = JSON.parse(data);\n      for (var m = 0; m < formFieldsData.length; m++) {\n        // eslint-disable-next-line\n        var currentData = formFieldsData[m];\n        // eslint-disable-next-line max-len\n        if (currentData.ActualFieldName === null && count && (currentData.Name === 'ink' || currentData.Name === 'SignatureField' || currentData.Name === 'SignatureImage' || currentData.Name === 'SignatureText') && (this.pdfViewer.formDesigner ? currentData.FieldName.split('_')[0] === signData.ActualFieldName || currentData.FieldName.split('_')[0] === signData.FieldName : currentData.FieldName.split('_')[0] === signData.FieldName && !isNullOrUndefined(signData.ActualFieldName) && currentData.Value && currentData.Value !== '')) {\n          signData.Value = currentData.Value;\n          signData.FontFamily = currentData.FontFamily;\n          signData.FontSize = currentData.FontSize;\n          this.isSignatureField = true;\n          signData.Bounds = currentData.LineBounds;\n        }\n        if (currentData.ActualFieldName === null && count && (currentData.Name === 'ink' || currentData.Name === 'SignatureField' || currentData.Name === 'SignatureImage' || currentData.Name === 'SignatureText') && this.pdfViewer.formDesigner ? currentData.FieldName === signData.ActualFieldName + '_' + count || currentData.FieldName === signData.FieldName + '_' + count : (currentData.FieldName === signData.FieldName + '_' + count || currentData.FieldName === signData.ActualFieldName + '_' + count) && !isNullOrUndefined(signData.ActualFieldName) && currentData.Value && currentData.Value !== '') {\n          signData.Value = currentData.Value;\n          signData.FontFamily = currentData.FontFamily;\n          signData.FontSize = currentData.FontSize;\n          this.isSignatureField = true;\n          if (!signData.Bounds) {\n            signData.Bounds = currentData.LineBounds;\n          }\n          break;\n        }\n      }\n    }\n    return this.isSignatureField;\n  };\n  // eslint-disable-next-line\n  FormFields.prototype.getBounds = function (bound, pageIndex, rotation, isFieldRotated) {\n    // eslint-disable-next-line\n    var pageDetails = this.pdfViewerBase.pageSize[pageIndex];\n    // eslint-disable-next-line\n    var bounds;\n    if (rotation > 0) {\n      bounds = this.getBoundsPosition(rotation, bound, pageDetails, isFieldRotated);\n    } else {\n      bounds = this.getBoundsPosition(pageDetails.rotation, bound, pageDetails, isFieldRotated);\n    }\n    return bounds;\n  };\n  // eslint-disable-next-line\n  FormFields.prototype.getBoundsPosition = function (rotation, bound, pageDetails, isFieldRotated) {\n    // eslint-disable-next-line\n    var bounds;\n    if (!isFieldRotated) {\n      switch (rotation) {\n        case 90:\n          // eslint-disable-next-line\n          bounds = {\n            left: pageDetails.width - bound.top - bound.height,\n            top: bound.left,\n            width: bound.height,\n            height: bound.width\n          };\n          break;\n        case 180:\n          // eslint-disable-next-line\n          bounds = {\n            left: pageDetails.width - bound.left - bound.width,\n            top: pageDetails.height - bound.top - bound.height,\n            width: bound.width,\n            height: bound.height\n          };\n          break;\n        case 270:\n          // eslint-disable-next-line\n          bounds = {\n            left: bound.top,\n            top: pageDetails.height - bound.left - bound.width,\n            width: bound.height,\n            height: bound.width\n          };\n          break;\n        case 0:\n          // eslint-disable-next-line\n          bounds = bound;\n          break;\n        case 1:\n          // eslint-disable-next-line\n          bounds = {\n            left: pageDetails.width - bound.top - bound.height,\n            top: bound.left,\n            width: bound.height,\n            height: bound.width\n          };\n          break;\n        case 2:\n          // eslint-disable-next-line\n          bounds = {\n            left: pageDetails.width - bound.left - bound.width,\n            top: pageDetails.height - bound.top - bound.height,\n            width: bound.width,\n            height: bound.height\n          };\n          break;\n        case 3:\n          // eslint-disable-next-line\n          bounds = {\n            left: bound.top,\n            top: pageDetails.height - bound.left - bound.width,\n            width: bound.height,\n            height: bound.width\n          };\n          break;\n      }\n      if (!bounds) {\n        bounds = bound;\n      }\n    } else {\n      switch (rotation) {\n        case 0:\n          // eslint-disable-next-line\n          bounds = bound;\n          break;\n        case 1:\n          // eslint-disable-next-line\n          bounds = {\n            left: pageDetails.width - bound.top - bound.height - (bound.width / 2 - bound.height / 2),\n            top: bound.left + (bound.width / 2 - bound.height / 2),\n            width: bound.width,\n            height: bound.height\n          };\n          break;\n        case 2:\n          // eslint-disable-next-line\n          bounds = {\n            left: pageDetails.width - bound.left - bound.width,\n            top: pageDetails.height - bound.top - bound.height,\n            width: bound.width,\n            height: bound.height\n          };\n          break;\n        case 3:\n          // eslint-disable-next-line\n          bounds = {\n            left: bound.top - (bound.width / 2 - bound.height / 2),\n            top: pageDetails.height - bound.left - bound.width + (bound.width / 2 - bound.height / 2),\n            width: bound.width,\n            height: bound.height\n          };\n          break;\n      }\n      if (!bounds) {\n        bounds = bound;\n      }\n    }\n    return bounds;\n  };\n  // eslint-disable-next-line\n  FormFields.prototype.applyPosition = function (inputField, bounds, font, pageIndex, rotation, isFieldRotated) {\n    if (bounds) {\n      var left = this.ConvertPointToPixel(bounds.X);\n      var top_3 = this.ConvertPointToPixel(bounds.Y);\n      var width = this.ConvertPointToPixel(bounds.Width);\n      var height = this.ConvertPointToPixel(bounds.Height);\n      var fontHeight = 0;\n      // eslint-disable-next-line\n      var fieldBounds = {\n        left: left,\n        top: top_3,\n        width: width,\n        height: height\n      };\n      // eslint-disable-next-line\n      var annotBounds = this.getBounds(fieldBounds, pageIndex, rotation, isFieldRotated);\n      if (!isNullOrUndefined(font) && font.Height) {\n        inputField.style.fontFamily = font.Name;\n        if (font.Italic) {\n          inputField.style.fontStyle = 'italic';\n        }\n        if (font.Bold) {\n          inputField.style.fontWeight = 'Bold';\n        }\n        fontHeight = this.ConvertPointToPixel(font.Size);\n      }\n      this.pdfViewerBase.setStyleToTextDiv(inputField, annotBounds.left, annotBounds.top, fontHeight, annotBounds.width, annotBounds.height, false);\n    }\n  };\n  // eslint-disable-next-line\n  FormFields.prototype.renderExistingAnnnot = function (data, index, printContainer, isFieldRotated) {\n    if (!printContainer) {\n      // eslint-disable-next-line\n      var bounds = void 0;\n      if (data.Bounds && data.Name !== 'ink') {\n        bounds = data.Bounds;\n      } else {\n        bounds = data.LineBounds;\n      }\n      var currentLeft = void 0;\n      var currentTop = void 0;\n      var currentWidth = void 0;\n      var currentHeight = void 0;\n      if (bounds.x || bounds.y || bounds.width || bounds.height) {\n        currentLeft = bounds.x;\n        currentTop = bounds.y;\n        currentWidth = bounds.width;\n        currentHeight = bounds.height;\n      } else {\n        currentLeft = this.ConvertPointToPixel(bounds.X);\n        currentTop = this.ConvertPointToPixel(bounds.Y);\n        currentWidth = this.ConvertPointToPixel(bounds.Width);\n        currentHeight = this.ConvertPointToPixel(bounds.Height);\n      }\n      // eslint-disable-next-line\n      var currentPage = parseFloat(data['PageIndex']);\n      // eslint-disable-next-line\n      var bound = {\n        left: currentLeft,\n        top: currentTop,\n        width: currentWidth,\n        height: currentHeight\n      };\n      // eslint-disable-next-line\n      var newBounds = this.updateSignatureBounds(bound, currentPage, isFieldRotated);\n      var annot = void 0;\n      var fontFamily = data.FontFamily ? data.FontFamily : data.fontFamily;\n      // eslint-disable-next-line\n      if (this.pdfViewerBase.isSignatureImageData(data.Value)) {\n        annot = {\n          // eslint-disable-next-line max-len\n          id: this.pdfViewer.element.id + 'input_' + currentPage + '_' + index,\n          bounds: newBounds,\n          pageIndex: currentPage,\n          data: data.Value,\n          modifiedDate: '',\n          shapeAnnotationType: 'SignatureImage',\n          opacity: 1,\n          rotateAngle: isFieldRotated ? this.getAngle(currentPage) : 0,\n          annotName: 'SignatureField',\n          comments: [],\n          review: {\n            state: '',\n            stateModel: '',\n            modifiedDate: '',\n            author: ''\n          }\n        };\n      } else if (this.pdfViewerBase.isSignaturePathData(data.Value)) {\n        var bound_1 = newBounds;\n        var tempBounds = {\n          left: newBounds.x,\n          top: newBounds.y,\n          width: newBounds.width,\n          height: newBounds.height\n        };\n        bound_1 = this.updateSignatureBounds(tempBounds, currentPage, false);\n        annot = {\n          // eslint-disable-next-line max-len\n          id: this.pdfViewer.element.id + 'input_' + currentPage + '_' + index,\n          bounds: bound_1,\n          pageIndex: currentPage,\n          data: data.Value,\n          modifiedDate: '',\n          shapeAnnotationType: 'Path',\n          opacity: 1,\n          rotateAngle: 0,\n          annotName: 'SignatureField',\n          comments: [],\n          review: {\n            state: '',\n            stateModel: '',\n            modifiedDate: '',\n            author: ''\n          }\n        };\n      } else {\n        annot = {\n          // eslint-disable-next-line max-len\n          id: this.pdfViewer.element.id + 'input_' + currentPage + '_' + index,\n          bounds: newBounds,\n          pageIndex: currentPage,\n          data: data.Value,\n          modifiedDate: '',\n          shapeAnnotationType: 'SignatureText',\n          opacity: 1,\n          rotateAngle: isFieldRotated ? this.getAngle(currentPage) : 0,\n          annotName: 'SignatureField',\n          comments: [],\n          review: {\n            state: '',\n            stateModel: '',\n            modifiedDate: '',\n            author: ''\n          },\n          fontFamily: data.FontFamily,\n          fontSize: data.FontSize\n        };\n        annot.fontFamily = fontFamily === \"TimesRoman\" ? \"Times New Roman\" : fontFamily;\n        annot.fontSize = data.FontSize ? data.FontSize : data.fontSize;\n      }\n      if ((data.Name === 'SignatureField' || data.Name === 'InitialField') && !isNullOrUndefined(data.id)) {\n        var elementId = data.id;\n        var signatureFieldElement = document.getElementById(elementId + '_content_html_element');\n        var signatureField = this.pdfViewer.nameTable[elementId];\n        annot.id = signatureField.id + \"_content\";\n        var obj = this.pdfViewer.add(annot);\n        signatureField.wrapper.children.push(obj.wrapper);\n        if (!isNullOrUndefined(signatureFieldElement) && this.isSignatureField) {\n          var inputField = signatureFieldElement.children[0].children[0];\n          inputField.style.pointerEvents = 'none';\n          inputField.className = 'e-pdfviewer-signatureformfields-signature';\n          inputField.parentElement.style.pointerEvents = 'none';\n        } else if (!isNullOrUndefined(signatureFieldElement) && data.Value) {\n          var inputField = signatureFieldElement.children[0].children[0];\n          inputField.style.pointerEvents = 'none';\n          inputField.className = 'e-pdfviewer-signatureformfields-signature';\n          inputField.parentElement.style.pointerEvents = 'none';\n        }\n      } else {\n        var target = document.getElementById(annot.id);\n        if (target && target.classList.contains('e-pdfviewer-signatureformfields-signature')) {\n          this.pdfViewer.annotation.deleteAnnotationById(annot.id);\n        }\n        this.pdfViewer.add(annot);\n        if (target) {\n          this.updateDataInSession(target, annot.data, annot.bounds);\n          this.pdfViewer.fireSignatureAdd(annot.pageIndex, annot.id, annot.shapeAnnotationType, annot.bounds, annot.opacity, annot.strokeColor, annot.thickness, annot.data);\n        }\n      }\n      data.Bounds = annot.bounds;\n      if (this.pdfViewer.formDesignerModule) {\n        var zoomvalue = this.pdfViewerBase.getZoomFactor();\n        annot.bounds = {\n          x: currentLeft * zoomvalue,\n          y: currentTop * zoomvalue,\n          width: currentWidth * zoomvalue,\n          height: currentHeight * zoomvalue\n        };\n        this.updateSignatureDataInSession(annot, annot.id);\n      }\n      // eslint-disable-next-line\n      var canvass = document.getElementById(this.pdfViewer.element.id + '_annotationCanvas_' + currentPage);\n      // eslint-disable-next-line\n      this.pdfViewer.renderDrawing(canvass, currentPage);\n    }\n  };\n  /**\n   * @private\n   */\n  // eslint-disable-next-line\n  FormFields.prototype.updateSignatureBounds = function (bound, pageIndex, isFieldRotated) {\n    // eslint-disable-next-line\n    var pageDetails = this.pdfViewerBase.pageSize[pageIndex];\n    if (pageDetails) {\n      if (!isFieldRotated) {\n        if (pageDetails.rotation === 1) {\n          // eslint-disable-next-line max-len\n          return {\n            x: pageDetails.width - bound.top - bound.height,\n            y: bound.left,\n            width: bound.height,\n            height: bound.width\n          };\n        } else if (pageDetails.rotation === 2) {\n          // eslint-disable-next-line max-len\n          return {\n            x: pageDetails.width - bound.left - bound.width,\n            y: pageDetails.height - bound.top - bound.height,\n            width: bound.width,\n            height: bound.height\n          };\n        } else if (pageDetails.rotation === 3) {\n          // eslint-disable-next-line max-len\n          return {\n            x: bound.top,\n            y: pageDetails.height - bound.left - bound.width,\n            width: bound.height,\n            height: bound.width\n          };\n        } else {\n          // eslint-disable-next-line max-len\n          return {\n            x: bound.left,\n            y: bound.top,\n            width: bound.width,\n            height: bound.height\n          };\n        }\n      } else {\n        if (pageDetails.rotation === 1) {\n          // eslint-disable-next-line max-len\n          return {\n            x: pageDetails.width - bound.top - bound.height - (bound.width / 2 - bound.height / 2),\n            y: bound.left + (bound.width / 2 - bound.height / 2),\n            width: bound.width,\n            height: bound.height\n          };\n        } else if (pageDetails.rotation === 2) {\n          // eslint-disable-next-line max-len\n          return {\n            x: pageDetails.width - bound.left - bound.width,\n            y: pageDetails.height - bound.top - bound.height,\n            width: bound.width,\n            height: bound.height\n          };\n        } else if (pageDetails.rotation === 3) {\n          // eslint-disable-next-line max-len\n          return {\n            x: bound.top - (bound.width / 2 - bound.height / 2),\n            y: pageDetails.height - bound.left - bound.width + (bound.width / 2 - bound.height / 2),\n            width: bound.width,\n            height: bound.height\n          };\n        } else {\n          // eslint-disable-next-line max-len\n          return {\n            x: bound.left,\n            y: bound.top,\n            width: bound.width,\n            height: bound.height\n          };\n        }\n      }\n    } else {\n      return {\n        x: bound.left,\n        y: bound.top,\n        width: bound.width,\n        height: bound.height\n      };\n    }\n  };\n  FormFields.prototype.resetFormFields = function () {\n    var formFieldData = this.pdfViewer.formFieldCollections;\n    for (var i = 0; i < formFieldData.length; i++) {\n      var currentData = formFieldData[i];\n      this.currentTarget = document.getElementById(currentData.id);\n      if (currentData.type === 'Textbox') {\n        this.currentTarget.value = currentData.value;\n      } else if (currentData.type === 'RadioButton') {\n        this.currentTarget.checked = currentData.value;\n        if (currentData.value) {\n          this.updateDataInSession(this.currentTarget);\n        }\n      } else if (currentData.type === 'DropDown') {\n        this.currentTarget.value = currentData.value;\n      } else if (currentData.type === 'CheckBox') {\n        this.currentTarget.checked = currentData.value;\n      } else if (currentData.type === 'SignatureField') {\n        // eslint-disable-next-line\n        var annotation = this.pdfViewer.nameTable[currentData.id];\n        if (annotation) {\n          if (this.currentTarget && this.currentTarget.className === 'e-pdfviewer-signatureformfields-signature') {\n            this.currentTarget.className = 'e-pdfviewer-signatureformfields';\n            this.currentTarget.style.pointerEvents = '';\n            this.updateDataInSession(this.currentTarget, '');\n          }\n          this.pdfViewer.remove(annotation);\n          this.pdfViewer.renderDrawing();\n        }\n      }\n      if (currentData.type !== 'RadioButton' && currentData.type !== 'SignatureField') {\n        this.updateDataInSession(this.currentTarget);\n      }\n    }\n  };\n  /**\n   * @private\n   */\n  // eslint-disable-next-line\n  FormFields.prototype.clearFormFieldStorage = function () {\n    // eslint-disable-next-line\n    var sessionSize = Math.round(JSON.stringify(window.sessionStorage).length / 1024);\n    var maxSessionSize = 4500;\n    if (this.pdfViewerBase.isStorageExceed) {\n      var storageLength = window.sessionStorage.length;\n      // eslint-disable-next-line\n      var formFieldsList = [];\n      for (var i = 0; i < storageLength; i++) {\n        if (window.sessionStorage.key(i) && window.sessionStorage.key(i).split('_')[3]) {\n          if (window.sessionStorage.key(i).split('_')[3] === 'formfields') {\n            // eslint-disable-next-line max-len\n            this.pdfViewerBase.formFieldStorage[window.sessionStorage.key(i)] = window.sessionStorage.getItem(window.sessionStorage.key(i));\n            formFieldsList.push(window.sessionStorage.key(i));\n          } else if (window.sessionStorage.key(i).split('_')[3] === 'formDesigner') {\n            this.pdfViewerBase.formFieldStorage[window.sessionStorage.key(i)] = window.sessionStorage.getItem(window.sessionStorage.key(i));\n            formFieldsList.push(window.sessionStorage.key(i));\n          }\n        }\n      }\n      if (formFieldsList) {\n        for (var i = 0; i < formFieldsList.length; i++) {\n          window.sessionStorage.removeItem(formFieldsList[i]);\n        }\n      }\n    }\n  };\n  // eslint-disable-next-line\n  FormFields.prototype.clearFormFields = function (formField) {\n    // eslint-disable-next-line\n    var data = this.pdfViewerBase.getItemFromSessionStorage('_formfields');\n    if (data) {\n      // eslint-disable-next-line\n      var formFieldsData = void 0;\n      if (formField) {\n        formFieldsData = [formField];\n      } else {\n        formFieldsData = JSON.parse(data);\n      }\n      var isFirstRadio = true;\n      for (var m = 0; m < formFieldsData.length; m++) {\n        // eslint-disable-next-line\n        var currentData = formFieldsData[m];\n        if (formField) {\n          currentData.uniqueID = formField.id;\n          currentData.Name = formField.type;\n        }\n        // eslint-disable-next-line\n        this.currentTarget = document.getElementById(currentData.uniqueID);\n        if (currentData.Name === 'Textbox') {\n          this.currentTarget.value = '';\n        } else if (currentData.Name === 'RadioButton') {\n          if (isFirstRadio) {\n            this.currentTarget.checked = true;\n            this.updateDataInSession(this.currentTarget);\n            isFirstRadio = false;\n          }\n        } else if (currentData.Name === 'DropDown') {\n          this.currentTarget.value = currentData.TextList[0];\n        } else if (currentData.Name === 'CheckBox') {\n          this.currentTarget.checked = false;\n        } else if (currentData.Name === 'SignatureField' || currentData.Name === 'InitialField') {\n          // eslint-disable-next-line\n          var annotation = this.pdfViewer.nameTable[currentData.uniqueID];\n          if (annotation.propName !== 'annotations') {\n            annotation = this.pdfViewer.nameTable[currentData.uniqueID + '_content'];\n          }\n          if (annotation) {\n            if (this.currentTarget && this.currentTarget.className === 'e-pdfviewer-signatureformfields-signature') {\n              this.currentTarget.className = 'e-pdfviewer-signatureformfields';\n              this.currentTarget.style.pointerEvents = '';\n              this.currentTarget.parentElement.style.pointerEvents = '';\n              this.updateDataInSession(this.currentTarget, '');\n              if (formField) {\n                formField.value = '';\n                formField.signatureType = [formField.signatureType];\n                formField.signatureType[0] = '';\n              }\n            }\n            this.pdfViewer.annotation.deleteAnnotationById(annotation.id);\n          }\n        }\n        if (currentData.Name !== 'SignatureField' && currentData.Name !== 'ink' && currentData.Name !== 'RadioButton') {\n          this.updateDataInSession(this.currentTarget);\n        }\n      }\n    }\n  };\n  /**\n   * @param number\n   * @private\n   */\n  // eslint-disable-next-line\n  FormFields.prototype.ConvertPointToPixel = function (number) {\n    return number * (96 / 72);\n  };\n  /**\n   * @private\n   */\n  FormFields.prototype.destroy = function () {\n    this.currentTarget = null;\n    this.readOnlyCollection = [];\n    if (this.pdfViewerBase && this.pdfViewerBase.signatureModule) this.pdfViewerBase.signatureModule.destroy();\n  };\n  /**\n   * @private\n   */\n  FormFields.prototype.getModuleName = function () {\n    return 'FormFields';\n  };\n  /**\n   * @private\n   * Get the text wdith\n   * @param text\n   * @param font\n   * @param fontFamily\n  */\n  FormFields.prototype.getTextWidth = function (text, font, fontFamily) {\n    var canvas = document.createElement('canvas');\n    var context = canvas.getContext('2d');\n    var fontName;\n    if (font) {\n      fontName = font + 'px' + ' ' + fontFamily;\n    }\n    context.font = fontName || getComputedStyle(document.body).font;\n    return context.measureText(text).width;\n  };\n  /**\n   * @private\n   * @param {number} fontSize - Font size.\n   * @returns {number} - Returns the font size.\n  */\n  FormFields.prototype.getFontSize = function (fontSize) {\n    return fontSize;\n    ;\n  };\n  return FormFields;\n}();\nexport { FormFields };","map":{"version":3,"names":["Browser","isBlazor","isNullOrUndefined","initializeCSPTemplate","splitArrayCollection","processPathData","cornersPointsBeforeRotation","Tooltip","FormFields","viewer","base","maintainTabIndex","maintanMinTabindex","isSignatureField","paddingDifferenceValue","indicatorPaddingValue","isKeyDownCheck","signatureFontSizeConstent","readOnlyCollection","isSignatureRendered","signatureFieldCollection","selectedIndex","renderedPageList","pdfViewer","pdfViewerBase","prototype","renderFormFields","pageIndex","isImportFormField","maxTabIndex","minTabIndex","indexOf","data","getItemFromSessionStorage","formFieldsData","JSON","parse","textLayer","document","getElementById","element","id","canvasElement","count","flag","i","length","formField","ActualFieldName","PageIndex","parseInt","FieldName","slice","lastIndexOf","push","_loop_1","i_1","currentData","this_1","IsInitialField","Name","font","formDesigner","parseFloat","fontFamily","fontStyle","fontSize","Height","Italic","Bold","Strikeout","Underline","ConvertPointToPixel","Size","textAlignment","Alignment","backgroundColor","bounds","backColor","R","G","B","IsTransparent","rgbaToHex","fontColor","left","X","top_1","Y","width","Width","height","boundArray","top","isFieldRotated","rotateFieldAngle","getBounds","getAngle","foreColor","borderColor","borderRGB","IsTansparentBorderColor","borderWidth","elementValue","fieldProperties","pageNumber","name","tooltip","value","insertSpaces","isChecked","isSelected","color","thickness","isMultiline","Multiline","rotateAngle","isReadOnly","isRequired","alignment","options","getListValues","maxLength","MaxLength","visibility","Visible","isItalic","isBold","isStrikeout","isUnderline","isTransparent","formFieldCollections","fieldType","getFormFieldType","IsRequired","addedElement1","formDesignerModule","addFormField","parentElement","split","style","childNodes","disabled","addSignaturePath","Value","renderExistingAnnnot","filter","item","includes","replace","signatureModule","storeSignatureData","isLoadedFormFieldAdded","field","createFormFields","inputField","currentField","signCount","divElement","createParentElement","font_1","transform","applyPosition","InsertSpaces","zoomFactor","getZoomFactor","font_2","letterSpacing","paddingLeft","j","type","ToolTip","setToolTip","applyCommonProperties","checkIsReadonly","applyTabIndex","checkIsRequiredField","applyDefaultColor","updateFormFieldsCollection","appendChild","position","addEventListener","focusFormFields","bind","blurFormFields","updateFormFields","changeFormFields","updateFormFieldsValue","updateSameFieldsValue","window","sessionStorage","removeItem","documentId","setItemInSessionStorage","isFocusField","focusField","y","pageSize","bookmark","goToBookmark","focus","tooltipContent","targetElement","content","appendTo","trim","str","rgba","inParts","substring","r","g","b","a","toFixed","outParts","toString","Math","round","forEach","part","join","listItem","itemName","itemValue","createElement","background","angle","pageDetails","rotation","nextField","signatureFieldNavigate","previousField","nextSign","isNextSignField","signatureFields","collectionData","getSignField","currentTarget","getSignatureIndex","FormField","uniqueID","currentSignatureIndex","signatureCount","isNextSign","isFirstNavigate","signatureIndex","renderSignatureField","currentSignIndex","curSignIndex","curSignIndexId","signatureFieldData","isRender","annotationModule","findRenderPageList","navigation","goToPage","pageIndex_1","isRender_1","pageIndex_2","className","select","retreiveFormFieldsData","formFieldCollection","retriveFieldName","retriveCurrentValue","fontName","isCollection","top_2","rotationAngle","signatureType","signatureIndicatorSettings","zIndex","addedElement","IsReadonly","Selected","SelectedValue","FontFamily","RotationAngle","SelectedList","TextList","findIndex","el","updateFormFieldValues","formFields","currentElement","cursor","updateDataInSession","GroupName","Text","getSignatureBounds","LineBounds","bound","x","downloadFormFieldsData","datas","fieldDatas","m","validateForm","nonFillableFields","fieldValue","CheckboxIndex","undefined","childItems","childItemsText","m_1","stringify","csData","FontSize","Bounds","lineBounds","event","target","backgroundcolor","currentIndex","currentColor","webkitAppearance","boxShadow","setFocus","fireFocusOutFormField","checked","fireButtonFieldClickEvent","fireFormFieldClickEvent","drawSignature","fontname","annot","proxy","targetBounds","parentElementBounds","targetName","offsetParent","_loop_2","fieldName","this_2","Key","currentField_1","signatureAdd_1","annotations","elementId","signatureField_1","nameTable","getBoundingClientRect","drawSignatureWithTool","nextSibling","isInitialFieldToolbarSelection","currentValue_1","outputString","currentFont","zoomvalue","currentWidth","currentHeight","currentLeft","currentTop","currentPage_1","nextElementSibling","signString_1","saveImageString","signatureFontFamily_1","signatureFontSize_1","rotateAngleString","rotateAngle_1","getSignBounds","signatureFitMode","getDefaultBoundsforSign","modifiedDate","shapeAnnotationType","opacity","annotName","comments","review","state","stateModel","author","textWidth","getTextWidth","widthRatio","getFontSize","floor","image_1","Image","currentTarget_1","src","onload","imageOnLoad","signatureBounds","updateSignatureAspectRatio","obj","add","wrapper","children","currentSignatureAnnot","addSignatureCollection","canvass","renderDrawing","showSignatureDialog","key","updateSignatureDataInSession","pointerEvents","annotation","addAction","fireSignatureAdd","hideSignaturePanel","image","currentValue","currentPage","signatureField","signString","signatureFontFamily","signatureFontSize","padding","min","maxHeight","maxWidth","imageWidth","imageHeight","beforeWidth","beforeHeight","ratio","_loop_3","formFieldIndex","this_3","signatureBound","updateFormFieldCollections","updateFormFieldPropertiesChanges","isDraw","signatureId","signIcon","signLeft","difference","fieldIndex","nextFields","which","currentFields","getElementsByClassName","istabindexed","shiftKey","focusFormField","preventDefault","tabindex","tabIndex","l","fieldIndex_1","classList","contains","currentTarget_2","signaturePath","updateDocumentEditedProperty","filterFields","fieldsByName","filterFieldName","filterArrayLength","FormFieldsData","signField","multiline","currentType","selected","targetCheckBox","filterCheckBoxSameName","sameNameCheckboxField","size","text","childrens","isChildElements","k","selectedOptions","z","index","Required","getAttribute","list","selectedItem","point","topLeft","updateFormDesignerFieldInSessionStorage","formFieldAnnotationType","removeExistingFormFields","buttonItem","radiobuttonItem","sameButtonItemId","otherButton","deleteFormField","inputdiv","remove","signIconWidth","signIconHeght","hightDifference","widthDifference","IsSignatureField","ariaLabel","printContainer","createTextBoxField","createRadioBoxField","createDropDownField","createListBoxField","createSignatureField","createButtonField","isBase64","isURL","imageSrc","test","URL","_a","resize","addAlignmentPropety","enableAutoComplete","autocomplete","isReadonly","n","enableFormFields","BackColor","FontColor","formFieldsReadOnly","makeformFieldsReadonly","TabIndex","max","required","border","BorderColor","BorderWidth","borderStyle","BorderStyle","addBorderStylePropety","textAlign","inputFields","setAttribute","option","innerHTML","MultiSelect","multiple","isInitialField","signIndicator","signatureFieldIndicatorWidth","signatureFieldSettings","span","indicatorWidth","indicatorHeight","annotBounds","fieldBounds","isDevice","enableDesktopMode","boxSizing","signData","getBoundsPosition","top_3","fontHeight","fontWeight","setStyleToTextDiv","newBounds","updateSignatureBounds","isSignatureImageData","isSignaturePathData","bound_1","tempBounds","signatureFieldElement","deleteAnnotationById","strokeColor","resetFormFields","formFieldData","clearFormFieldStorage","sessionSize","maxSessionSize","isStorageExceed","storageLength","formFieldsList","formFieldStorage","getItem","clearFormFields","isFirstRadio","propName","number","destroy","getModuleName","canvas","context","getContext","getComputedStyle","body","measureText"],"sources":["/Users/saleem/Desktop/KClient/Web App/Ver_3.6/User Interface/website_Source files/node_modules/@syncfusion/ej2-pdfviewer/src/pdfviewer/form-fields/form-fields.js"],"sourcesContent":["import { Browser, isBlazor, isNullOrUndefined, initializeCSPTemplate } from '@syncfusion/ej2-base';\nimport { splitArrayCollection, processPathData, cornersPointsBeforeRotation } from '@syncfusion/ej2-drawings';\nimport { Tooltip } from '@syncfusion/ej2-popups';\n/**\n * The `FormFields` module is to render formfields in the PDF document.\n *\n * @hidden\n */\nvar FormFields = /** @class */ (function () {\n    /**\n     * @param viewer\n     * @param base\n     * @param viewer\n     * @param base\n     * @private\n     */\n    function FormFields(viewer, base) {\n        // eslint-disable-next-line\n        this.maintainTabIndex = {};\n        // eslint-disable-next-line\n        this.maintanMinTabindex = {};\n        this.isSignatureField = false;\n        this.paddingDifferenceValue = 10;\n        this.indicatorPaddingValue = 4;\n        this.isKeyDownCheck = false;\n        this.signatureFontSizeConstent = 1.35;\n        /**\n         * @private\n         */\n        // eslint-disable-next-line\n        this.readOnlyCollection = [];\n        this.isSignatureRendered = false;\n        /**\n         * @private\n         */\n        // eslint-disable-next-line\n        this.signatureFieldCollection = [];\n        this.selectedIndex = [];\n        /**\n         * @private\n         */\n        // eslint-disable-next-line\n        this.renderedPageList = [];\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = base;\n    }\n    /**\n     * @param pageIndex\n     * @private\n     */\n    FormFields.prototype.renderFormFields = function (pageIndex, isImportFormField) {\n        this.maxTabIndex = 0;\n        this.minTabIndex = -1;\n        // eslint-disable-next-line        \n        if (this.renderedPageList.indexOf(pageIndex) !== -1 && !isImportFormField) {\n            this.data = this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');\n            if (!this.data || this.data === '[]') {\n                this.data = this.pdfViewerBase.getItemFromSessionStorage('_formfields');\n            }\n        }\n        else {\n            this.data = this.pdfViewerBase.getItemFromSessionStorage('_formfields');\n        }\n        if (this.data) {\n            // eslint-disable-next-line\n            this.formFieldsData = JSON.parse(this.data);\n            var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageIndex);\n            var canvasElement = document.getElementById(this.pdfViewer.element.id + '_pageCanvas_' + pageIndex);\n            var count = void 0;\n            if (this.formFieldsData !== null && canvasElement !== null && textLayer !== null) {\n                var flag = false;\n                for (var i = 0; i < this.formFieldsData.length; i++) {\n                    var formField = this.formFieldsData[i];\n                    if (!flag && isNullOrUndefined(formField.ActualFieldName) && formField.PageIndex === pageIndex) {\n                        count = parseInt(formField.FieldName.slice(formField.FieldName.lastIndexOf(\"_\") + 1));\n                        flag = true;\n                    }\n                }\n                if (this.renderedPageList.indexOf(pageIndex) === -1) {\n                    this.renderedPageList.push(pageIndex);\n                }\n                var _loop_1 = function (i_1) {\n                    // eslint-disable-next-line\n                    var currentData = this_1.formFieldsData[i_1];\n                    if (currentData.FieldName !== '') {\n                        if (currentData.IsInitialField) {\n                            currentData.Name = 'InitialField';\n                        }\n                        // eslint-disable-next-line\n                        var font = currentData['Font'];\n                        if (this_1.pdfViewer.formDesigner) {\n                            if (parseFloat(currentData['PageIndex']) == pageIndex) {\n                                var fontFamily = void 0;\n                                var fontStyle = void 0;\n                                var fontSize = void 0;\n                                if (!isNullOrUndefined(font) && font.Height) {\n                                    fontFamily = font.Name;\n                                    if (font.Italic) {\n                                        fontStyle = 'Italic';\n                                    }\n                                    if (font.Bold) {\n                                        fontStyle = 'Bold';\n                                    }\n                                    if (font.Strikeout) {\n                                        fontStyle = 'Strikethrough';\n                                    }\n                                    if (font.Underline) {\n                                        fontStyle = 'Underline';\n                                    }\n                                    fontSize = this_1.ConvertPointToPixel(font.Size);\n                                }\n                                var textAlignment = currentData.Alignment === 2 ? 'right' : (currentData.Alignment === 1 ? 'center' : 'left');\n                                var backgroundColor = currentData['BackColor'];\n                                var bounds = currentData['LineBounds'];\n                                var backColor = 'rgba(' + backgroundColor.R + ',' + backgroundColor.G + ',' + backgroundColor.B + ',' + 1 + ')';\n                                if (currentData.IsTransparent === true) {\n                                    backColor = \"rgba(0,0,0,0)\";\n                                }\n                                backColor = this_1.rgbaToHex(backColor);\n                                // set default color if field have black color as bg.\n                                if (backColor === '#000000ff') {\n                                    backColor = '#daeaf7ff';\n                                }\n                                // eslint-disable-next-line\n                                var fontColor = currentData['FontColor'];\n                                var left = this_1.ConvertPointToPixel(bounds.X);\n                                var top_1 = this_1.ConvertPointToPixel(bounds.Y);\n                                var width = this_1.ConvertPointToPixel(bounds.Width);\n                                var height = this_1.ConvertPointToPixel(bounds.Height);\n                                var boundArray = { left: left, top: top_1, width: width, height: height };\n                                var isFieldRotated = false;\n                                var rotateFieldAngle = 0;\n                                if (currentData[\"Rotation\"] !== 0) {\n                                    if (currentData[\"RotationAngle\"] === -90 || currentData[\"RotationAngle\"] === -270 || currentData[\"RotationAngle\"] === -180) {\n                                        boundArray = this_1.getBounds(boundArray, pageIndex, 0, isFieldRotated);\n                                    }\n                                }\n                                else {\n                                    isFieldRotated = true;\n                                    boundArray = this_1.getBounds(boundArray, pageIndex, 0, isFieldRotated);\n                                    rotateFieldAngle = this_1.getAngle(pageIndex);\n                                }\n                                var foreColor = 'rgba(' + fontColor.R + ',' + fontColor.G + ',' + fontColor.B + ',' + 1 + ')';\n                                foreColor = this_1.rgbaToHex(foreColor);\n                                var borderColor = currentData['BorderColor'];\n                                var borderRGB = void 0;\n                                if (currentData.IsTansparentBorderColor) {\n                                    borderRGB = 'rgba(' + borderColor.R + ',' + borderColor.G + ',' + borderColor.B + ',' + 0 + ')';\n                                }\n                                else {\n                                    borderRGB = 'rgba(' + borderColor.R + ',' + borderColor.G + ',' + borderColor.B + ',' + 1 + ')';\n                                }\n                                borderRGB = this_1.rgbaToHex(borderRGB);\n                                var borderWidth = currentData['BorderWidth'];\n                                this_1.selectedIndex = [];\n                                var elementValue = \"\";\n                                if (currentData.Name === 'RadioButton' || currentData.Name === 'CheckBox') {\n                                    elementValue = currentData['Text'] ? currentData['Text'] : currentData['Value'];\n                                }\n                                else {\n                                    elementValue = currentData['Text'];\n                                }\n                                var fieldProperties = {\n                                    bounds: { X: boundArray.left, Y: boundArray.top, Width: boundArray.width, Height: boundArray.height }, pageNumber: parseFloat(currentData['PageIndex']) + 1, name: currentData['ActualFieldName'], tooltip: currentData['ToolTip'],\n                                    value: elementValue, insertSpaces: currentData['InsertSpaces'], isChecked: currentData['Selected'], isSelected: currentData['Selected'], fontFamily: fontFamily, fontStyle: fontStyle, backgroundColor: backColor, color: foreColor, borderColor: borderRGB, thickness: borderWidth, fontSize: fontSize, isMultiline: currentData.Multiline, rotateAngle: rotateFieldAngle,\n                                    isReadOnly: currentData['IsReadonly'], isRequired: currentData['IsRequired'], alignment: textAlignment, options: this_1.getListValues(currentData), selectedIndex: this_1.selectedIndex, maxLength: currentData.MaxLength, visibility: currentData.Visible === 1 ? \"hidden\" : \"visible\", font: { isItalic: !isNullOrUndefined(font) ? font.Italic : false, isBold: !isNullOrUndefined(font) ? font.Bold : false, isStrikeout: !isNullOrUndefined(font) ? font.Strikeout : false, isUnderline: !isNullOrUndefined(font) ? font.Underline : false }, isTransparent: currentData.IsTransparent\n                                };\n                                if (!currentData.id && this_1.pdfViewer.formFieldCollections[i_1] && !isNullOrUndefined(currentData['ActualFieldName'])) {\n                                    fieldProperties.id = this_1.pdfViewer.formFieldCollections[i_1].id;\n                                }\n                                if (currentData.Name === 'DropDown' || currentData.Name === 'ListBox') {\n                                    fieldProperties.value = currentData['SelectedValue'];\n                                }\n                                // eslint-disable-next-line\n                                var fieldType = this_1.getFormFieldType(currentData);\n                                if (currentData.Name !== 'SignatureText' || currentData.Name !== 'SignatureImage') {\n                                    if (!isNullOrUndefined(this_1.getFormFieldType(currentData))) {\n                                        if (currentData.IsRequired) {\n                                            var thickness = fieldProperties.thickness;\n                                            thickness = thickness > 0 ? thickness : 1;\n                                            fieldProperties.thickness = thickness;\n                                        }\n                                        var addedElement1 = this_1.pdfViewer.formDesignerModule.addFormField(fieldType, fieldProperties, false, fieldProperties.id);\n                                        if (addedElement1 && addedElement1.parentElement) {\n                                            currentData.id = addedElement1.parentElement.id.split('_')[0];\n                                        }\n                                        if (addedElement1 && addedElement1.style.visibility === \"hidden\") {\n                                            addedElement1.childNodes[0].disabled = true;\n                                        }\n                                    }\n                                }\n                                if (fieldType === 'SignatureField' || fieldType === 'InitialField') {\n                                    this_1.addSignaturePath(currentData, count);\n                                    if (!isNullOrUndefined(currentData.Value) && currentData.Value != \"\") {\n                                        this_1.renderExistingAnnnot(currentData, parseFloat(currentData['PageIndex']) + 1, null, isFieldRotated);\n                                        this_1.isSignatureRendered = true;\n                                        count++;\n                                    }\n                                }\n                                if (currentData.ActualFieldName === null && this_1.formFieldsData.filter(function (item) { return item.FieldName.includes(currentData.FieldName.replace(/_\\d$/, '')); }).filter(function (value) { return value.Name != 'ink'; }).length === 0) {\n                                    this_1.renderExistingAnnnot(currentData, parseFloat(currentData['PageIndex']) + 1, null, isFieldRotated);\n                                    this_1.pdfViewerBase.signatureModule.storeSignatureData(pageIndex, currentData);\n                                    this_1.isSignatureRendered = true;\n                                    count++;\n                                }\n                                this_1.pdfViewerBase.isLoadedFormFieldAdded = true;\n                            }\n                        }\n                        else {\n                            // eslint-disable-next-line\n                            if (parseFloat(currentData['PageIndex']) == pageIndex) {\n                                // eslint-disable-next-line\n                                var field = this_1.createFormFields(currentData, pageIndex, i_1, null, count);\n                                var inputField = field.currentField;\n                                var signCount = field.count;\n                                var isFieldRotated = false;\n                                if (currentData.ActualFieldName === null && this_1.formFieldsData.filter(function (item) { return item.FieldName.includes(currentData.FieldName.replace(/_\\d$/, '')); }).filter(function (value) { return value.Name != 'ink'; }).length === 0) {\n                                    this_1.renderExistingAnnnot(currentData, parseFloat(currentData['PageIndex']) + 1, null, isFieldRotated);\n                                    this_1.pdfViewerBase.signatureModule.storeSignatureData(pageIndex, currentData);\n                                    this_1.isSignatureRendered = true;\n                                    count++;\n                                }\n                                if (inputField) {\n                                    // eslint-disable-next-line\n                                    var divElement = this_1.createParentElement(currentData, pageIndex);\n                                    // eslint-disable-next-line\n                                    var bounds = currentData['LineBounds'];\n                                    // eslint-disable-next-line\n                                    var font_1 = currentData['Font'];\n                                    // eslint-disable-next-line\n                                    rotateAngle = 0;\n                                    if (currentData['Rotation'] === 0) {\n                                        isFieldRotated = true;\n                                        rotateAngle = this_1.getAngle(pageIndex);\n                                        if (divElement) {\n                                            divElement.style.transform = 'rotate(' + rotateAngle + 'deg)';\n                                        }\n                                        else {\n                                            inputField.style.transform = 'rotate(' + rotateAngle + 'deg)';\n                                        }\n                                    }\n                                    else {\n                                        if (divElement) {\n                                            divElement.style.transform = 'rotate(' + rotateAngle + 'deg)';\n                                        }\n                                        else {\n                                            inputField.style.transform = 'rotate(' + rotateAngle + 'deg)';\n                                        }\n                                    }\n                                    this_1.applyPosition(inputField, bounds, font_1, pageIndex, 0, isFieldRotated);\n                                    inputField.InsertSpaces = currentData.InsertSpaces;\n                                    if (inputField.InsertSpaces) {\n                                        var zoomFactor = this_1.pdfViewerBase.getZoomFactor();\n                                        // eslint-disable-next-line\n                                        var font_2 = ((parseInt(inputField.style.width) / inputField.maxLength) - (parseFloat(inputField.style.fontSize) / 2)) - (0.6 * zoomFactor);\n                                        // eslint-disable-next-line\n                                        inputField.style.letterSpacing = '' + font_2 + 'px';\n                                        inputField.style.fontFamily = 'monospace';\n                                        inputField.style.paddingLeft = (font_2 / 2) + 'px';\n                                    }\n                                    // eslint-disable-next-line\n                                    currentData['uniqueID'] = this_1.pdfViewer.element.id + 'input_' + pageIndex + '_' + i_1;\n                                    for (var j = 0; j < this_1.pdfViewer.formFieldCollections.length; j++) {\n                                        if ((inputField.type === 'text' || inputField.type === 'password' || inputField.type === 'textarea') && currentData.Name !== 'SignatureField') {\n                                            if (currentData['uniqueID'] === this_1.pdfViewer.formFieldCollections[j].id) {\n                                                this_1.pdfViewer.formFieldCollections[j].value = currentData['Text'];\n                                            }\n                                        }\n                                    }\n                                    if (isNullOrUndefined(currentData.Value)) {\n                                        currentData.Value = currentData['Text'];\n                                    }\n                                    if (currentData.ToolTip) {\n                                        this_1.setToolTip(currentData.ToolTip, inputField);\n                                    }\n                                    this_1.applyCommonProperties(inputField, pageIndex, i_1, currentData, isFieldRotated);\n                                    this_1.checkIsReadonly(currentData, inputField);\n                                    this_1.applyTabIndex(currentData, inputField, pageIndex);\n                                    this_1.checkIsRequiredField(currentData, inputField);\n                                    this_1.applyDefaultColor(inputField);\n                                    this_1.updateFormFieldsCollection(currentData);\n                                    if (divElement) {\n                                        divElement.appendChild(inputField);\n                                        textLayer.appendChild(divElement);\n                                    }\n                                    else {\n                                        inputField.style.position = 'absolute';\n                                        textLayer.appendChild(inputField);\n                                    }\n                                    inputField.addEventListener('focus', this_1.focusFormFields.bind(this_1));\n                                    inputField.addEventListener('blur', this_1.blurFormFields.bind(this_1));\n                                    inputField.addEventListener('click', this_1.updateFormFields.bind(this_1));\n                                    inputField.addEventListener('change', this_1.changeFormFields.bind(this_1));\n                                    inputField.addEventListener('keydown', this_1.updateFormFieldsValue.bind(this_1));\n                                    inputField.addEventListener('keyup', this_1.updateSameFieldsValue.bind(this_1));\n                                    count = signCount;\n                                }\n                            }\n                        }\n                    }\n                };\n                var this_1 = this, rotateAngle;\n                for (var i_1 = 0; i_1 < this.formFieldsData.length; i_1++) {\n                    _loop_1(i_1);\n                }\n                if (!this.pdfViewer.formDesigner) {\n                    window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_formfields');\n                    this.pdfViewerBase.setItemInSessionStorage(this.formFieldsData, '_formfields');\n                }\n            }\n        }\n        if (this.pdfViewerBase.isFocusField && this.pdfViewerBase.focusField) {\n            var currentField = document.getElementById(this.pdfViewerBase.focusField.id);\n            if (currentField) {\n                if ((this.pdfViewerBase.focusField.type === \"SignatureField\" || this.pdfViewerBase.focusField.type === \"InitialField\") && this.pdfViewer.formDesignerModule) {\n                    var y = this.pdfViewerBase.focusField.bounds.y;\n                    var height = this.pdfViewerBase.pageSize[pageIndex].height;\n                    this.pdfViewer.bookmark.goToBookmark(this.pdfViewerBase.focusField.pageIndex, height - y);\n                }\n                else {\n                    currentField.focus();\n                }\n                this.pdfViewerBase.isFocusField = false;\n                this.pdfViewerBase.focusField = [];\n            }\n        }\n    };\n    FormFields.prototype.setToolTip = function (tooltipContent, targetElement) {\n        //initialize tooltip component\n        var tooltip = new Tooltip({\n            content: initializeCSPTemplate(function () { return tooltipContent; })\n        });\n        // render initialized tooltip\n        tooltip.appendTo(targetElement);\n    };\n    FormFields.prototype.trim = function (str) {\n        return str.replace(/^\\s+|\\s+$/gm, '');\n    };\n    FormFields.prototype.rgbaToHex = function (rgba) {\n        var inParts = rgba.substring(rgba.indexOf(\"(\")).split(\",\");\n        var r = parseInt(this.trim(inParts[0].substring(1)), 10);\n        var g = parseInt(this.trim(inParts[1]), 10);\n        var b = parseInt(this.trim(inParts[2]), 10);\n        var a = parseFloat(parseFloat(this.trim(inParts[3].substring(0, inParts[3].length - 1))).toFixed(2));\n        var outParts = [\n            r.toString(16),\n            g.toString(16),\n            b.toString(16),\n            Math.round(a * 255).toString(16).substring(0, 2)\n        ];\n        // Pad single-digit output values\n        outParts.forEach(function (part, i) {\n            if (part.length === 1) {\n                outParts[i] = '0' + part;\n            }\n        });\n        return ('#' + outParts.join(''));\n    };\n    FormFields.prototype.getListValues = function (currentData) {\n        var listItem = currentData['TextList'];\n        var options = [];\n        for (var i = 0; i < listItem.length; i++) {\n            if (listItem[i] === currentData['SelectedValue'])\n                this.selectedIndex.push(i);\n            options.push({ itemName: listItem[i], itemValue: listItem[i] });\n        }\n        if (this.getFormFieldType(currentData) === 'ListBox') {\n            this.selectedIndex = currentData['SelectedList'];\n        }\n        return options;\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.createParentElement = function (data, pageIndex) {\n        // eslint-disable-next-line\n        var divElement;\n        // eslint-disable-next-line\n        if (data['Name'] === 'Textbox' || data['Name'] === 'Password') {\n            divElement = document.createElement('div');\n            divElement.style.background = 'white';\n            if (data.InsertSpaces) {\n                divElement.style.background = 'transparent';\n            }\n            // eslint-disable-next-line\n            var bounds = data['LineBounds'];\n            // eslint-disable-next-line\n            var font = data['Font'];\n            // eslint-disable-next-line\n            divElement.style.position = 'absolute';\n            // eslint-disable-next-line\n            var isFieldRotated = false;\n            if (data['Rotation'] === 0) {\n                isFieldRotated = true;\n            }\n            this.applyPosition(divElement, bounds, font, pageIndex, 0, isFieldRotated);\n        }\n        return divElement;\n    };\n    /**\n     * @private\n     */\n    FormFields.prototype.getAngle = function (pageIndex) {\n        // eslint-disable-next-line\n        var angle = 0;\n        // eslint-disable-next-line\n        var pageDetails = this.pdfViewerBase.pageSize[pageIndex];\n        if (pageDetails && pageDetails.rotation) {\n            switch (pageDetails.rotation) {\n                case 0:\n                    angle = 0;\n                    break;\n                case 1:\n                    angle = 90;\n                    break;\n                case 2:\n                    angle = 180;\n                    break;\n                case 3:\n                    angle = 270;\n                    break;\n            }\n        }\n        return angle;\n    };\n    FormFields.prototype.nextField = function () {\n        this.signatureFieldNavigate(true);\n    };\n    FormFields.prototype.previousField = function () {\n        this.signatureFieldNavigate(false);\n    };\n    FormFields.prototype.signatureFieldNavigate = function (nextSign) {\n        var isNextSignField = nextSign;\n        // eslint-disable-next-line\n        var signatureFields = this.signatureFieldCollection;\n        var collectionData = this.pdfViewer.formFieldCollections;\n        if (signatureFields.length === 0) {\n            signatureFields = this.pdfViewerBase.signatureModule.getSignField();\n        }\n        // eslint-disable-next-line\n        var currentField;\n        if (this.currentTarget) {\n            if (this.pdfViewer.formDesignerModule) {\n                for (var i = 0; i < collectionData.length; i++) {\n                    currentField = collectionData[i];\n                    if (this.currentTarget.id === currentField.id) {\n                        this.currentTarget = document.getElementById(currentField.id);\n                        this.getSignatureIndex(i, collectionData.length, isNextSignField);\n                        break;\n                    }\n                }\n            }\n            else {\n                for (var i = 0; i < signatureFields.length; i++) {\n                    currentField = this.pdfViewer.formDesignerModule ? signatureFields[i].FormField : signatureFields[i];\n                    if (this.currentTarget.id === currentField.uniqueID) {\n                        this.currentTarget = document.getElementById(currentField.uniqueID);\n                        this.getSignatureIndex(i, signatureFields.length, isNextSignField);\n                        break;\n                    }\n                }\n            }\n        }\n        else {\n            if (nextSign) {\n                if (this.pdfViewer.formDesignerModule) {\n                    currentField = signatureFields[0];\n                    if (currentField.id) {\n                        this.currentTarget = document.getElementById(currentField.id);\n                        this.getSignatureIndex(0, signatureFields.length, isNextSignField, true);\n                    }\n                }\n                else {\n                    currentField = signatureFields[0];\n                    if (currentField.uniqueID) {\n                        this.currentTarget = document.getElementById(currentField.uniqueID);\n                        this.getSignatureIndex(0, signatureFields.length, isNextSignField, true);\n                    }\n                }\n            }\n        }\n    };\n    FormFields.prototype.getSignatureIndex = function (currentSignatureIndex, signatureCount, isNextSign, isFirstNavigate) {\n        var signatureIndex = currentSignatureIndex;\n        if (!isFirstNavigate) {\n            if (isNextSign) {\n                signatureIndex++;\n            }\n            else {\n                signatureIndex--;\n            }\n        }\n        if (signatureCount === 1) {\n            this.renderSignatureField(0);\n        }\n        else {\n            if (signatureIndex < signatureCount && signatureIndex >= 0) {\n                this.renderSignatureField(signatureIndex);\n            }\n            else {\n                if (isNextSign) {\n                    if (signatureIndex >= signatureCount) {\n                        this.renderSignatureField(0);\n                    }\n                }\n                else {\n                    if (signatureIndex <= 0) {\n                        this.renderSignatureField(signatureCount - 1);\n                    }\n                }\n            }\n        }\n    };\n    FormFields.prototype.renderSignatureField = function (currentSignIndex) {\n        var curSignIndex = currentSignIndex;\n        // eslint-disable-next-line\n        var signatureFields = this.signatureFieldCollection;\n        var collectionData = this.pdfViewer.formFieldCollections;\n        // eslint-disable-next-line\n        var currentField;\n        if (curSignIndex < collectionData.length) {\n            for (var i = 0; i < collectionData.length; i++) {\n                if (this.pdfViewer.formDesignerModule) {\n                    var curSignIndexId = collectionData[curSignIndex].id;\n                    var signatureFieldData = collectionData[i];\n                    if (curSignIndexId === signatureFieldData.id) {\n                        var pageIndex = signatureFieldData.pageIndex >= 0 ? signatureFieldData.pageIndex : signatureFieldData.pageNumber;\n                        var isRender = this.pdfViewer.annotationModule.findRenderPageList(pageIndex);\n                        if (!isRender) {\n                            this.pdfViewer.navigation.goToPage(pageIndex + 1);\n                            this.renderFormFields(pageIndex, false);\n                        }\n                        this.currentTarget = document.getElementById(signatureFieldData.id);\n                        currentField = signatureFieldData;\n                        break;\n                    }\n                }\n                else {\n                    var curSignIndexId = this.pdfViewer.formDesignerModule ? signatureFields[curSignIndex].FormField.uniqueID : signatureFields[curSignIndex].uniqueID;\n                    var signatureFieldData = this.pdfViewer.formDesignerModule ? signatureFields[i].FormField : signatureFields[i];\n                    if (curSignIndexId === signatureFieldData.uniqueID) {\n                        var pageIndex_1 = signatureFieldData.PageIndex >= 0 ? signatureFieldData.PageIndex : signatureFieldData.pageNumber;\n                        var isRender_1 = this.pdfViewer.annotationModule.findRenderPageList(pageIndex_1);\n                        if (!isRender_1) {\n                            this.pdfViewer.navigation.goToPage(pageIndex_1 + 1);\n                            this.renderFormFields(pageIndex_1, false);\n                        }\n                        this.currentTarget = document.getElementById(signatureFieldData.uniqueID);\n                        currentField = signatureFieldData;\n                        break;\n                    }\n                }\n            }\n            if (this.currentTarget === null) {\n                var pageIndex_2 = currentField.PageIndex >= 0 ? currentField.PageIndex : currentField.pageNumber;\n                this.pdfViewer.navigation.goToPage(pageIndex_2);\n                this.currentTarget = document.getElementById(currentField.uniqueID);\n            }\n            if (this.currentTarget) {\n                if (this.currentTarget.className === 'e-pdfviewer-signatureformfields-signature' && !(this.pdfViewer.formDesignerModule)) {\n                    document.getElementById(this.currentTarget.id).focus();\n                    this.pdfViewer.select([this.currentTarget.id], null);\n                }\n                else if (this.currentTarget.className === 'e-pdfviewer-signatureformfields' || this.currentTarget.className === 'e-pdfviewer-signatureformfields-signature') {\n                    if (this.pdfViewer.formDesignerModule) {\n                        document.getElementById(this.currentTarget.id).parentElement.focus();\n                    }\n                    else {\n                        document.getElementById(this.currentTarget.id).focus();\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    FormFields.prototype.formFieldCollections = function () {\n        // eslint-disable-next-line\n        var data = this.pdfViewerBase.getItemFromSessionStorage('_formfields');\n        if (data) {\n            // eslint-disable-next-line\n            var formFieldsData = JSON.parse(data);\n            for (var i = 0; i < formFieldsData.length; i++) {\n                // eslint-disable-next-line\n                var currentData = formFieldsData[i];\n                // eslint-disable-next-line\n                var type = currentData['Name'];\n                if (this.pdfViewer.formDesignerModule) {\n                    if (currentData.Name !== 'ink' && currentData.Name !== 'SignatureImage' && currentData.Name !== 'SignatureText') {\n                        this.retreiveFormFieldsData(currentData, true);\n                    }\n                }\n                else {\n                    if (currentData.Name !== 'ink') {\n                        // eslint-disable-next-line\n                        var formFieldCollection = { name: this.retriveFieldName(currentData), id: this.pdfViewer.element.id + 'input_' + parseFloat(currentData['PageIndex']) + '_' + i, isReadOnly: false, type: currentData.IsInitialField ? 'InitialField' : type, value: this.retriveCurrentValue(currentData), fontName: '', isRequired: currentData.IsRequired };\n                        this.pdfViewer.formFieldCollections.push(formFieldCollection);\n                    }\n                }\n            }\n        }\n    };\n    FormFields.prototype.retreiveFormFieldsData = function (currentData, isCollection) {\n        var fontFamily;\n        var fontStyle;\n        var fontSize;\n        if (currentData.FieldName !== '') {\n            if (currentData.IsInitialField) {\n                currentData.Name = 'InitialField';\n            }\n            // eslint-disable-next-line\n            var font = currentData['Font'];\n            if (!isNullOrUndefined(font) && font.Height) {\n                fontFamily = font.Name;\n                if (font.Italic) {\n                    fontStyle = 'Italic';\n                }\n                if (font.Bold) {\n                    fontStyle = 'Bold';\n                }\n                if (font.Strikeout) {\n                    fontStyle = 'Strikethrough';\n                }\n                if (font.Underline) {\n                    fontStyle = 'Underline';\n                }\n                fontSize = this.ConvertPointToPixel(font.Size);\n            }\n            var textAlignment = currentData.Alignment === 2 ? 'right' : (currentData.Alignment === 1 ? 'center' : 'left');\n            var backgroundColor = currentData['BackColor'];\n            var bounds = currentData['LineBounds'];\n            var backColor = 'rgba(' + backgroundColor.R + ',' + backgroundColor.G + ',' + backgroundColor.B + ',' + 1 + ')';\n            backColor = this.rgbaToHex(backColor);\n            // set default color if field have black color as bg.\n            if (currentData.IsTransparent === true) {\n                backColor = \"rgba(0,0,0,0)\";\n            }\n            else if (backColor === '#000000ff') {\n                backColor = '#daeaf7ff';\n            }\n            // eslint-disable-next-line\n            var fontColor = currentData['FontColor'];\n            var left = this.ConvertPointToPixel(bounds.X);\n            var top_2 = this.ConvertPointToPixel(bounds.Y);\n            var width = this.ConvertPointToPixel(bounds.Width);\n            var height = this.ConvertPointToPixel(bounds.Height);\n            var boundArray = { left: left, top: top_2, width: width, height: height };\n            var foreColor = 'rgba(' + fontColor.R + ',' + fontColor.G + ',' + fontColor.B + ',' + 1 + ')';\n            foreColor = this.rgbaToHex(foreColor);\n            var borderColor = currentData['BorderColor'];\n            var borderRGB = 'rgba(' + borderColor.R + ',' + borderColor.G + ',' + borderColor.B + ',' + 1 + ')';\n            borderRGB = this.rgbaToHex(borderRGB);\n            var borderWidth = currentData['BorderWidth'];\n            this.selectedIndex = [];\n            var fieldProperties = {\n                bounds: { X: boundArray.left, Y: boundArray.top, Width: boundArray.width, Height: boundArray.height }, pageNumber: parseFloat(currentData['PageIndex']) + 1, name: currentData['ActualFieldName'], tooltip: currentData['ToolTip'],\n                value: currentData['Text'], isChecked: currentData['Selected'], isSelected: currentData['Selected'], fontFamily: fontFamily, fontStyle: fontStyle, backgroundColor: backColor, color: foreColor, borderColor: borderRGB, thickness: borderWidth, fontSize: fontSize, isMultiline: currentData.Multiline,\n                isReadOnly: currentData['IsReadonly'], isRequired: currentData['IsRequired'], insertSpaces: currentData['InsertSpaces'], alignment: textAlignment, options: this.getListValues(currentData), selectedIndex: this.selectedIndex, maxLength: currentData.MaxLength, visibility: currentData.Visible === 1 ? \"hidden\" : \"visible\", font: { isItalic: !isNullOrUndefined(font) ? font.Italic : false, isBold: !isNullOrUndefined(font) ? font.Bold : false, isStrikeout: !isNullOrUndefined(font) ? font.Strikeout : false, isUnderline: !isNullOrUndefined(font) ? font.Underline : false }, pageIndex: currentData['PageIndex'], isTransparent: currentData['IsTransparent'], rotationAngle: currentData['RotationAngle'], signatureType: currentData['SignatureType'] ? currentData['SignatureType'] : \"\", signatureIndicatorSettings: currentData['SignatureIndicatorSettings'], zIndex: currentData['zIndex']\n            };\n            if (currentData.Name === 'DropDown' || currentData.Name === 'ListBox') {\n                fieldProperties.value = currentData['SelectedValue'];\n            }\n            // eslint-disable-next-line\n            var fieldType = this.getFormFieldType(currentData);\n            if (fieldType === 'SignatureField' || fieldType === 'InitialField') {\n                this.addSignaturePath(currentData);\n                if (this.isSignatureField) {\n                    fieldProperties.value = currentData.Value;\n                }\n            }\n            var addedElement = this.pdfViewer.formDesignerModule.addFormField(fieldType, fieldProperties, isCollection);\n            return addedElement;\n        }\n        return null;\n    };\n    /**\n     * @param formField\n     * @private\n     */\n    FormFields.prototype.updateFormFieldsCollection = function (formField) {\n        var type = formField['Name'];\n        var formFieldCollection = {\n            name: this.retriveFieldName(formField), id: formField.uniqueID, isReadOnly: formField.IsReadonly, isRequired: formField.IsRequired, isSelected: type === 'CheckBox' ? false : formField.Selected,\n            isChecked: type === 'RadioButton' ? false : formField.Selected, type: type, value: type === 'ListBox' || type === 'DropDown' ? formField.SelectedValue : formField.Value, fontName: formField.FontFamily ? formField.FontFamily : '', pageIndex: formField.PageIndex, pageNumber: formField.PageIndex + 1, isMultiline: formField.isMultiline ? formField.isMultiline : formField.Multiline, insertSpaces: formField.insertSpaces ? formField.insertSpaces : formField.InsertSpaces, isTransparent: formField.isTransparent ? formField.isTransparent : formField.IsTransparent, rotateAngle: formField.rotateAngle ? formField.rotateAngle : formField.RotationAngle,\n            selectedIndex: formField.selectedIndex ? formField.selectedIndex : formField.SelectedList, options: formField.options ? formField.options : formField.TextList ? formField.TextList : [],\n            signatureType: formField.signatureType ? formField.signatureType : \"\", zIndex: formField.zIndex, tooltip: formField.tooltip ? formField.tooltip : formField.ToolTip ? formField.ToolTip : \"\", signatureIndicatorSettings: formField.signatureIndicatorSettings ? formField.signatureIndicatorSettings : \"\"\n        };\n        this.pdfViewer.formFieldCollections[this.pdfViewer.formFieldCollections.findIndex(function (el) { return el.id === formFieldCollection.id; })] = formFieldCollection;\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.updateFormFieldValues = function (formFields) {\n        this.readOnlyCollection.push(formFields.id);\n        if (formFields) {\n            // eslint-disable-next-line\n            var currentElement = document.getElementById(formFields.id);\n            if (currentElement) {\n                if (formFields.isReadOnly) {\n                    currentElement.disabled = true;\n                    currentElement.style.backgroundColor = '';\n                    currentElement.style.cursor = 'default';\n                }\n                else {\n                    if (currentElement.style.backgroundColor === '') {\n                        currentElement.style.backgroundColor = 'rgba(0, 20, 200, 0.2)';\n                    }\n                    currentElement.disabled = false;\n                    currentElement.style.cursor = '';\n                }\n            }\n            this.updateDataInSession(currentElement);\n        }\n    };\n    /**\n     * @param currentData\n     * @private\n     */\n    // eslint-disable-next-line\n    FormFields.prototype.retriveFieldName = function (currentData) {\n        // eslint-disable-next-line\n        var currentField;\n        // eslint-disable-next-line\n        switch (currentData['Name']) {\n            case 'Textbox':\n            case 'Password':\n            case 'SignatureField':\n            case 'InitialField':\n                currentField = currentData.FieldName;\n                break;\n            case 'RadioButton':\n            case 'CheckBox':\n                currentField = currentData.GroupName;\n                break;\n            case 'DropDown':\n            case 'ListBox':\n                currentField = currentData.Text;\n                break;\n        }\n        return currentField;\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.retriveCurrentValue = function (currentData) {\n        // eslint-disable-next-line\n        var currentField;\n        // eslint-disable-next-line\n        switch (currentData['Name']) {\n            case 'Textbox':\n            case 'Password':\n                currentField = currentData.Text;\n                break;\n            case 'SignatureField':\n                currentField = currentData.Value;\n                break;\n            case 'RadioButton':\n            case 'CheckBox':\n                currentField = currentData.Selected;\n                break;\n            case 'DropDown':\n                currentField = currentData.SelectedValue;\n                break;\n            case 'ListBox':\n                currentField = currentData.SelectedList;\n                break;\n        }\n        return currentField;\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.getSignatureBounds = function (LineBounds, bounds, pageIndex) {\n        // eslint-disable-next-line\n        var pageDetails = this.pdfViewerBase.pageSize[pageIndex];\n        // eslint-disable-next-line\n        var bound = 0;\n        switch (pageDetails.rotation) {\n            case 0:\n                bound = bounds;\n                break;\n            case 1:\n                bound = { x: bounds.x + LineBounds.Width + (bounds.width / 3.5), y: pageDetails.width - LineBounds.X + (bounds.height / 4) };\n                break;\n            case 2:\n                bound = { x: pageDetails.width - bounds.x - bounds.width, y: pageDetails.height - bounds.y - bounds.height };\n                break;\n            case 3:\n                bound = { x: bounds.y - (bounds.width / 2) + bounds.height, y: bounds.x + (bounds.width / 3) };\n                break;\n        }\n        return bound;\n    };\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    FormFields.prototype.downloadFormFieldsData = function () {\n        // eslint-disable-next-line\n        var data = this.pdfViewerBase.getItemFromSessionStorage('_formfields');\n        if (data) {\n            // eslint-disable-next-line\n            var formFieldsData = JSON.parse(data);\n            // eslint-disable-next-line\n            var datas = {};\n            var fieldDatas = [];\n            for (var m = 0; m < formFieldsData.length; m++) {\n                // eslint-disable-next-line\n                var currentData = formFieldsData[m];\n                var isRequired = currentData.IsRequired;\n                if (currentData.Name === 'Textbox' || currentData.Name === 'Password' || currentData.Multiline) {\n                    if (isRequired && (currentData.Text === '' || currentData.Text === null)) {\n                        this.pdfViewerBase.validateForm = true;\n                        this.pdfViewerBase.nonFillableFields[currentData.FieldName] = currentData.Text;\n                    }\n                    else {\n                        delete (this.pdfViewerBase.nonFillableFields[currentData.FieldName]);\n                    }\n                    fieldDatas = { fieldValue: currentData.Text, isReadOnly: currentData.IsReadonly };\n                    datas[currentData.FieldName] = fieldDatas;\n                }\n                else if (currentData.Name === 'RadioButton' && currentData.Selected) {\n                    if (isRequired && currentData.Selected === false) {\n                        this.pdfViewerBase.validateForm = true;\n                        this.pdfViewerBase.nonFillableFields[currentData.GroupName] = currentData.Value;\n                    }\n                    else {\n                        delete (this.pdfViewerBase.nonFillableFields[currentData.GroupName]);\n                    }\n                    fieldDatas = { fieldValue: currentData.Value, isReadOnly: currentData.IsReadonly };\n                    datas[currentData.GroupName] = fieldDatas;\n                }\n                else if (currentData.Name === 'CheckBox') {\n                    if (isRequired && currentData.Selected === false) {\n                        this.pdfViewerBase.validateForm = true;\n                        this.pdfViewerBase.nonFillableFields[currentData.GroupName] = currentData.Selected;\n                    }\n                    else {\n                        delete (this.pdfViewerBase.nonFillableFields[currentData.GroupName]);\n                    }\n                    if (currentData.CheckboxIndex && currentData.Selected && currentData.Value) {\n                        fieldDatas = { isSelected: currentData.CheckboxIndex, isReadOnly: currentData.IsReadonly, fieldValue: currentData.Value };\n                        datas[currentData.GroupName] = fieldDatas;\n                    }\n                    else if (datas[currentData.GroupName] === undefined || datas[currentData.GroupName] === null) {\n                        fieldDatas = { isSelected: currentData.Selected, isReadOnly: currentData.IsReadonly, fieldValue: currentData.Value };\n                        datas[currentData.GroupName] = fieldDatas;\n                    }\n                }\n                else if (currentData.Name === 'DropDown') {\n                    if (isRequired && currentData.SelectedValue === '') {\n                        this.pdfViewerBase.validateForm = true;\n                        this.pdfViewerBase.nonFillableFields[currentData.Text] = currentData.SelectedValue;\n                    }\n                    else {\n                        delete (this.pdfViewerBase.nonFillableFields[currentData.Text]);\n                    }\n                    fieldDatas = { fieldValue: currentData.SelectedValue, isReadOnly: currentData.IsReadonly };\n                    datas[currentData.FieldName] = fieldDatas;\n                }\n                else if (currentData.Name === 'ListBox') {\n                    // eslint-disable-next-line\n                    var childItems = currentData['TextList'];\n                    var childItemsText = [];\n                    for (var m_1 = 0; m_1 < currentData.SelectedList.length; m_1++) {\n                        // eslint-disable-next-line\n                        var currentElement = currentData.SelectedList[m_1];\n                        childItemsText.push(childItems[currentElement]);\n                    }\n                    fieldDatas = { fieldValue: JSON.stringify(childItemsText), isReadOnly: currentData.IsReadonly };\n                    datas[currentData.Text] = fieldDatas;\n                }\n                else if (currentData.Name === 'SignatureField' || currentData.Name === 'InitialField') {\n                    // eslint-disable-next-line\n                    var csData = void 0;\n                    if (currentData.Value === null || currentData.Value === '') {\n                        this.addSignaturePath(currentData);\n                    }\n                    if (currentData.Value && currentData.Value !== '') {\n                        csData = currentData.Value;\n                        var fontFamily = currentData.fontFamily ? currentData.fontFamily : currentData.FontFamily;\n                        if (fontFamily) {\n                            datas[currentData.FieldName + 'fontName'] = fontFamily;\n                            datas[currentData.FieldName + 'fontSize'] = currentData.fontSize ? currentData.fontSize : currentData.FontSize;\n                        }\n                        else if (currentData.Value.split('base64,')[1]) {\n                            datas[currentData.FieldName + 'ImageData'] = true;\n                        }\n                        else {\n                            // eslint-disable-next-line\n                            var collectionData = processPathData(currentData.Value);\n                            csData = splitArrayCollection(collectionData);\n                        }\n                    }\n                    if (isRequired && currentData.Value === null || currentData.Value === '') {\n                        this.pdfViewerBase.validateForm = true;\n                        this.pdfViewerBase.nonFillableFields[currentData.FieldName] = JSON.stringify(csData);\n                    }\n                    else {\n                        delete (this.pdfViewerBase.nonFillableFields[currentData.FieldName]);\n                    }\n                    datas[currentData.FieldName] = JSON.stringify(csData);\n                    if (currentData.Bounds) {\n                        // eslint-disable-next-line\n                        var bounds = this.getSignatureBounds(currentData.LineBounds, currentData.Bounds, currentData.PageIndex);\n                        currentData.Bounds.x = bounds.x;\n                        currentData.Bounds.y = bounds.y;\n                        datas[currentData.FieldName + 'bounds'] = JSON.stringify(currentData.Bounds);\n                    }\n                    else {\n                        // eslint-disable-next-line\n                        var lineBounds = currentData.LineBounds;\n                        // eslint-disable-next-line\n                        var bounds = { x: this.ConvertPointToPixel(lineBounds.X), y: this.ConvertPointToPixel(lineBounds.Y), width: this.ConvertPointToPixel(lineBounds.Width), height: this.ConvertPointToPixel(lineBounds.Height) };\n                        datas[currentData.FieldName + 'bounds'] = JSON.stringify(bounds);\n                    }\n                    datas[currentData.FieldName + 'isReadOnly'] = currentData.IsReadonly;\n                }\n            }\n            return (JSON.stringify(datas));\n        }\n    };\n    FormFields.prototype.focusFormFields = function (event) {\n        // eslint-disable-next-line\n        var currentTarget = event.target;\n        // eslint-disable-next-line\n        if (currentTarget && (currentTarget.className !== 'e-pdfviewer-signatureformfields' && currentTarget.className !== 'e-pdfviewer-signatureformfields e-pv-signature-focus')) {\n            // eslint-disable-next-line\n            var backgroundcolor = currentTarget.style.backgroundColor;\n            // eslint-disable-next-line\n            var currentIndex = backgroundcolor.lastIndexOf(',');\n            // eslint-disable-next-line\n            var currentColor = backgroundcolor.slice(0, currentIndex + 1) + 0 + ')';\n            currentTarget.style.backgroundColor = currentColor;\n            if (currentTarget.type === 'checkbox') {\n                currentTarget.style.webkitAppearance = '';\n            }\n            currentTarget.style.boxShadow = \"0 0 5px \" + (currentTarget.style.borderColor === 'transparent' ? '#000000' : currentTarget.style.borderColor);\n        }\n        else if (currentTarget) {\n            // eslint-disable-next-line\n            if (currentTarget.className === 'e-pdfviewer-signatureformfields' || currentTarget.className === 'e-pdfviewer-signatureformfields-signature' || currentTarget.className === 'e-pdfviewer-signatureformfields e-pv-signature-focus' || currentTarget.className === 'e-pdfviewer-signatureformfields-signature  e-pv-signature-focus') {\n                this.pdfViewerBase.signatureModule.setFocus(currentTarget.id);\n            }\n        }\n    };\n    FormFields.prototype.blurFormFields = function (event) {\n        // eslint-disable-next-line\n        var currentTarget = event.target;\n        if (currentTarget.InsertSpaces && this.isKeyDownCheck) {\n            // eslint-disable-next-line\n            var font = parseInt(currentTarget.style.width) - (parseInt(currentTarget.style.height) / 2);\n            currentTarget.style.width = '' + font + 'px';\n            this.isKeyDownCheck = false;\n        }\n        if (currentTarget.type === 'checkbox') {\n            this.pdfViewer.fireFocusOutFormField(currentTarget.name, currentTarget.checked);\n        }\n        else {\n            this.pdfViewer.fireFocusOutFormField(currentTarget.name, currentTarget.value);\n        }\n        // eslint-disable-next-line\n        var backgroundcolor = currentTarget.style.backgroundColor;\n        // eslint-disable-next-line\n        var currentIndex = backgroundcolor.lastIndexOf(',');\n        // eslint-disable-next-line\n        var currentColor = backgroundcolor.slice(0, currentIndex + 1) + 0.2 + ')';\n        currentTarget.style.backgroundColor = currentColor;\n        currentTarget.style.boxShadow = 'none';\n        if ((currentTarget.type === 'checkbox') && !currentTarget.checked) {\n            currentTarget.style.webkitAppearance = 'none';\n        }\n        else {\n            currentTarget.style.webkitAppearance = '';\n        }\n    };\n    FormFields.prototype.updateFormFields = function (event) {\n        // eslint-disable-next-line\n        var currentTarget = event.target;\n        if (currentTarget.className === 'e-pdfviewer-ListBox') {\n            currentTarget = currentTarget.parentElement;\n            this.updateDataInSession(currentTarget);\n        }\n        else if (currentTarget.className === 'e-pdfviewer-signatureformfields' || currentTarget.className === 'e-pdfviewer-signatureformfields e-pv-signature-focus') {\n            this.currentTarget = currentTarget;\n        }\n        else if (currentTarget.className === 'e-pv-buttonItem' || currentTarget.type === 'button') {\n            this.pdfViewer.fireButtonFieldClickEvent(currentTarget.value, currentTarget.name, currentTarget.id);\n        }\n        for (var m = 0; m < this.pdfViewer.formFieldCollections.length; m++) {\n            if (currentTarget.id === this.pdfViewer.formFieldCollections[m].id) {\n                if (this.pdfViewer.formDesignerModule || this.pdfViewer.annotationModule) {\n                    this.pdfViewer.fireFormFieldClickEvent('formFieldClicked', this.pdfViewer.formFieldCollections[m]);\n                }\n                // eslint-disable-next-line\n                if (currentTarget.className === 'e-pdfviewer-signatureformfields' || currentTarget.className === 'e-pdfviewer-signatureformfields-signature' || currentTarget.className === 'e-pdfviewer-signatureformfields e-pv-signature-focus' || currentTarget.className === 'e-pdfviewer-signatureformfields-signature  e-pv-signature-focus') {\n                    this.pdfViewerBase.signatureModule.setFocus(currentTarget.id);\n                }\n            }\n        }\n    };\n    /**\n     * @param signatureType\n     * @param value\n     * @param target\n     * @param fontname\n     * @param signatureType\n     * @param value\n     * @param target\n     * @param fontname\n     * @private\n     */\n    // eslint-disable-next-line\n    FormFields.prototype.drawSignature = function (signatureType, value, target, fontname) {\n        var annot;\n        // eslint-disable-next-line\n        var proxy = this;\n        var bounds;\n        var targetBounds;\n        var parentElementBounds;\n        var data;\n        if (this.pdfViewer.formDesigner) {\n            data = this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');\n        }\n        else {\n            data = this.pdfViewerBase.getItemFromSessionStorage('_formfields');\n        }\n        var formFieldsData = JSON.parse(data);\n        if (this.pdfViewer.formDesignerModule) {\n            var targetName = this.currentTarget && this.currentTarget.offsetParent ? this.currentTarget.offsetParent.name : this.currentTarget ? this.currentTarget.name : target.name ? target.name : target.offsetParent.name;\n        }\n        else {\n            var targetName = this.currentTarget ? this.currentTarget.name : target.name ? target.name : target.offsetParent.name;\n        }\n        var _loop_2 = function () {\n            var fieldName = this_2.pdfViewer.formDesigner ? formFieldsData[i].FormField.name : formFieldsData[i].FieldName;\n            if (this_2.pdfViewer.formDesigner ? fieldName === targetName : fieldName === targetName && (!isNullOrUndefined(formFieldsData[i].ActualFieldName))) {\n                target = this_2.pdfViewer.formDesigner ? document.getElementById(formFieldsData[i].Key.split(\"_\")[0]) : document.getElementById(formFieldsData[i].uniqueID);\n                // eslint-disable-next-line\n                var currentField_1 = target;\n                var signatureAdd_1 = true;\n                this_2.pdfViewer.annotations.filter(function (item) {\n                    if (!isNullOrUndefined(currentField_1) && item.id === target.id + \"_content\") {\n                        signatureAdd_1 = false;\n                    }\n                });\n                if (!isNullOrUndefined(currentField_1) && signatureAdd_1) {\n                    var elementId = currentField_1.offsetParent.offsetParent.id.split(\"_\")[0];\n                    var signatureField_1 = this_2.pdfViewer.nameTable[elementId];\n                    if (target && target.offsetParent && signatureField_1) {\n                        targetBounds = target.getBoundingClientRect();\n                        parentElementBounds = target.offsetParent.offsetParent.offsetParent.getBoundingClientRect();\n                        this_2.pdfViewerBase.drawSignatureWithTool = true;\n                        if (target.nextSibling && target.nextSibling.id.indexOf(\"initial\") !== -1) {\n                            this_2.pdfViewer.isInitialFieldToolbarSelection = true;\n                        }\n                    }\n                    var currentValue_1 = value ? value : this_2.pdfViewerBase.signatureModule.outputString;\n                    var currentFont = fontname ? fontname : this_2.pdfViewerBase.signatureModule.fontName;\n                    var zoomvalue = this_2.pdfViewerBase.getZoomFactor();\n                    var currentWidth = this_2.pdfViewerBase.drawSignatureWithTool ? targetBounds.width / zoomvalue : parseFloat(currentField_1.style.width) / zoomvalue;\n                    var currentHeight = this_2.pdfViewerBase.drawSignatureWithTool ? targetBounds.height / zoomvalue : parseFloat(currentField_1.style.height) / zoomvalue;\n                    var currentLeft = this_2.pdfViewerBase.drawSignatureWithTool ? ((targetBounds.left - parentElementBounds.left)) / zoomvalue : parseFloat(currentField_1.style.left) / zoomvalue;\n                    var currentTop = this_2.pdfViewerBase.drawSignatureWithTool ? ((targetBounds.top - parentElementBounds.top)) / zoomvalue : parseFloat(currentField_1.style.top) / zoomvalue;\n                    var currentPage_1 = this_2.pdfViewerBase.drawSignatureWithTool ? target.nextElementSibling ? parseFloat(target.nextElementSibling.id.split(\"_\")[1]) : parseFloat(currentField_1.id.split('_')[1]) : parseFloat(currentField_1.id.split('_')[1]);\n                    var currentIndex = this_2.pdfViewerBase.drawSignatureWithTool ? target.nextElementSibling ? parseFloat(target.nextElementSibling.id.split('_')[2]) : parseFloat(currentField_1.id.split('_')[2]) : parseFloat(currentField_1.id.split('_')[2]);\n                    var signString_1 = this_2.pdfViewerBase.signatureModule.saveImageString;\n                    var signatureFontFamily_1;\n                    var signatureFontSize_1;\n                    var rotateAngleString = currentField_1.offsetParent.offsetParent.style.transform ? currentField_1.offsetParent.offsetParent.style.transform : currentField_1.style.transform;\n                    rotateAngleString = rotateAngleString.substring(rotateAngleString.indexOf(\"(\") + 1, rotateAngleString.indexOf(\"d\"));\n                    var rotateAngle_1 = rotateAngleString ? parseInt(rotateAngleString) : 0;\n                    if (signatureType === 'Type') {\n                        if (!currentFont) {\n                            currentFont = 'Helvetica';\n                        }\n                        // eslint-disable-next-line\n                        bounds = this_2.getSignBounds(currentIndex, rotateAngle_1, currentPage_1, zoomvalue, currentLeft, currentTop, currentWidth, currentHeight);\n                        if (this_2.pdfViewer.signatureFitMode === 'Default') {\n                            bounds = this_2.getDefaultBoundsforSign(bounds);\n                        }\n                        annot = {\n                            // eslint-disable-next-line max-len\n                            id: currentField_1.id, bounds: { x: bounds.x, y: bounds.y, width: bounds.width, height: bounds.height }, pageIndex: currentPage_1, data: currentValue_1, modifiedDate: '',\n                            shapeAnnotationType: 'SignatureText', opacity: 1, rotateAngle: rotateAngle_1, annotName: 'SignatureText', comments: [], review: { state: '', stateModel: '', modifiedDate: '', author: '' }, fontFamily: currentFont, fontSize: bounds.height / this_2.signatureFontSizeConstent\n                        };\n                        if (annot.shapeAnnotationType === 'SignatureText') {\n                            var textWidth = this_2.getTextWidth(annot.data, annot.fontSize, annot.fontFamily);\n                            var widthRatio = 1;\n                            if (textWidth > bounds.width)\n                                widthRatio = bounds.width / textWidth;\n                            annot.fontSize = this_2.getFontSize(Math.floor((annot.fontSize * widthRatio)));\n                        }\n                        signString_1 = annot.data;\n                        signatureFontFamily_1 = annot.fontFamily;\n                        signatureFontSize_1 = annot.fontSize;\n                    }\n                    else if (signatureType === 'Image') {\n                        // eslint-disable-next-line\n                        bounds = this_2.getSignBounds(currentIndex, rotateAngle_1, currentPage_1, zoomvalue, currentLeft, currentTop, currentWidth, currentHeight);\n                        var image_1 = new Image();\n                        var currentTarget_1 = target;\n                        image_1.src = currentValue_1;\n                        image_1.onload = function () {\n                            proxy.imageOnLoad(bounds, image_1, currentValue_1, currentPage_1, rotateAngle_1, currentField_1, signatureField_1, signString_1, signatureFontFamily_1, signatureFontSize_1, currentTarget_1);\n                        };\n                    }\n                    else {\n                        if ((currentValue_1.indexOf('base64')) !== -1) {\n                            // eslint-disable-next-line\n                            bounds = this_2.getSignBounds(currentIndex, rotateAngle_1, currentPage_1, zoomvalue, currentLeft, currentTop, currentWidth, currentHeight);\n                            if (this_2.pdfViewer.signatureFitMode === 'Default') {\n                                bounds = this_2.getDefaultBoundsforSign(bounds);\n                            }\n                            annot = {\n                                // eslint-disable-next-line max-len\n                                id: currentField_1.id, bounds: { x: bounds.x, y: bounds.y, width: bounds.width, height: bounds.height }, pageIndex: currentPage_1, data: currentValue_1, modifiedDate: '',\n                                shapeAnnotationType: 'SignatureImage', opacity: 1, rotateAngle: rotateAngle_1, annotName: 'SignatureField', comments: [], review: { state: '', stateModel: '', modifiedDate: '', author: '' }\n                            };\n                            signString_1 = annot.data;\n                        }\n                        else {\n                            // eslint-disable-next-line\n                            if (this_2.pdfViewer.signatureFitMode === 'Default') {\n                                // eslint-disable-next-line\n                                var signatureBounds = this_2.pdfViewerBase.signatureModule.updateSignatureAspectRatio(currentValue_1, false, currentField_1);\n                                // eslint-disable-next-line\n                                bounds = this_2.getSignBounds(currentIndex, rotateAngle_1, currentPage_1, zoomvalue, currentLeft, currentTop, signatureBounds.width, signatureBounds.height, true);\n                                bounds.x = bounds.x + signatureBounds.left;\n                                bounds.y = bounds.y + signatureBounds.top;\n                            }\n                            else {\n                                bounds = this_2.getSignBounds(currentIndex, rotateAngle_1, currentPage_1, zoomvalue, currentLeft, currentTop, currentWidth, currentHeight);\n                            }\n                            annot = {\n                                // eslint-disable-next-line max-len\n                                id: currentField_1.id, bounds: { x: bounds.x, y: bounds.y, width: bounds.width, height: bounds.height }, pageIndex: currentPage_1, data: currentValue_1, modifiedDate: '',\n                                shapeAnnotationType: 'Path', opacity: 1, rotateAngle: rotateAngle_1, annotName: 'SignatureField', comments: [], review: { state: '', stateModel: '', modifiedDate: '', author: '' }\n                            };\n                        }\n                    }\n                    if (this_2.pdfViewerBase.drawSignatureWithTool && signatureField_1 && signatureType !== 'Image') {\n                        annot.id = signatureField_1.id + \"_content\";\n                        var obj = this_2.pdfViewer.add(annot);\n                        signatureField_1.wrapper.children.push(obj.wrapper);\n                    }\n                    else if (signatureType !== 'Image') {\n                        this_2.pdfViewer.add(annot);\n                    }\n                    if (annot && annot.shapeAnnotationType === 'Path' && currentValue_1 !== '') {\n                        this_2.pdfViewerBase.currentSignatureAnnot = annot;\n                        // eslint-disable-next-line\n                        var position = { currentHeight: currentHeight, currentWidth: currentWidth, currentLeft: currentLeft, currentTop: currentTop };\n                        this_2.pdfViewerBase.signatureModule.addSignatureCollection(bounds, position);\n                        signString_1 = this_2.pdfViewerBase.signatureModule.saveImageString;\n                        this_2.pdfViewerBase.currentSignatureAnnot = null;\n                    }\n                    if (signatureType !== 'Image') {\n                        // eslint-disable-next-line\n                        var canvass = document.getElementById(this_2.pdfViewer.element.id + '_annotationCanvas_' + currentPage_1);\n                        // eslint-disable-next-line\n                        this_2.pdfViewer.renderDrawing(canvass, currentPage_1);\n                        this_2.pdfViewerBase.signatureModule.showSignatureDialog(false);\n                        if (currentField_1.className === 'e-pdfviewer-signatureformfields e-pv-signature-focus') {\n                            currentField_1.className = 'e-pdfviewer-signatureformfields-signature e-pv-signature-focus';\n                        }\n                        else {\n                            currentField_1.className = 'e-pdfviewer-signatureformfields-signature';\n                        }\n                        if (this_2.pdfViewerBase.drawSignatureWithTool && signatureField_1) {\n                            var key = target.offsetParent.offsetParent.id.split('_')[0] + '_content';\n                            annot.bounds = { x: bounds.x * zoomvalue, y: bounds.y * zoomvalue, width: bounds.width * zoomvalue, height: bounds.height * zoomvalue };\n                            this_2.updateSignatureDataInSession(annot, key);\n                        }\n                        else {\n                            this_2.updateDataInSession(currentField_1, annot.data, annot.bounds, signatureFontFamily_1, signatureFontSize_1);\n                        }\n                        currentField_1.style.pointerEvents = 'none';\n                        if (this_2.pdfViewer.annotation) {\n                            this_2.pdfViewer.annotation.addAction(annot.pageIndex, null, annot, 'FormField Value Change', '', annot, annot);\n                        }\n                        // eslint-disable-next-line\n                        if (annot.shapeAnnotationType === 'Path' || annot.shapeAnnotationType === \"SignatureText\") {\n                            this_2.pdfViewer.fireSignatureAdd(annot.pageIndex, annot.id, annot.shapeAnnotationType, annot.bounds, annot.opacity, null, null, signString_1);\n                        }\n                        this_2.pdfViewer.fireFocusOutFormField(currentField_1.name, currentValue_1);\n                    }\n                }\n            }\n        };\n        var this_2 = this;\n        for (var i = 0; i < formFieldsData.length; i++) {\n            _loop_2();\n        }\n        if (signatureType !== 'Image') {\n            this.pdfViewerBase.signatureModule.hideSignaturePanel();\n            this.pdfViewerBase.drawSignatureWithTool = false;\n            this.pdfViewer.isInitialFieldToolbarSelection = false;\n        }\n    };\n    //  EJ2-62918- Image signature width is wrong while adding programmatically and it is fixed by adding an onload event.\n    //  A function was added and it was called\n    FormFields.prototype.imageOnLoad = function (bounds, image, currentValue, currentPage, rotateAngle, currentField, signatureField, signString, signatureFontFamily, signatureFontSize, target) {\n        if (target && target.offsetParent && signatureField) {\n            this.pdfViewerBase.drawSignatureWithTool = true;\n            if (target.nextSibling && target.nextSibling.id.indexOf(\"initial\") !== -1) {\n                this.pdfViewer.isInitialFieldToolbarSelection = true;\n            }\n        }\n        var annot;\n        if (this.pdfViewer.signatureFitMode === 'Default') {\n            var padding = Math.min(bounds.height / this.paddingDifferenceValue, bounds.width / this.paddingDifferenceValue);\n            var maxHeight = bounds.height - padding;\n            var maxWidth = bounds.width - padding;\n            var imageWidth = image.width;\n            var imageHeight = image.height;\n            var beforeWidth = bounds.width;\n            var beforeHeight = bounds.height;\n            var ratio = Math.min(maxWidth / imageWidth, maxHeight / imageHeight);\n            bounds.width = imageWidth * ratio;\n            bounds.height = imageHeight * ratio;\n            bounds.x = bounds.x + (beforeWidth - bounds.width) / 2;\n            bounds.y = bounds.y + (beforeHeight - bounds.height) / 2;\n        }\n        annot = {\n            // eslint-disable-next-line max-len\n            id: currentField.id, bounds: { x: bounds.x, y: bounds.y, width: bounds.width, height: bounds.height }, pageIndex: currentPage, data: currentValue, modifiedDate: '',\n            shapeAnnotationType: 'SignatureImage', opacity: 1, rotateAngle: rotateAngle, annotName: 'SignatureField', comments: [], review: { state: '', stateModel: '', modifiedDate: '', author: '' }\n        };\n        signString = annot.data;\n        if (this.pdfViewerBase.drawSignatureWithTool && signatureField) {\n            annot.id = signatureField.id + \"_content\";\n            var obj = this.pdfViewer.add(annot);\n            signatureField.wrapper.children.push(obj.wrapper);\n        }\n        else {\n            this.pdfViewer.add(annot);\n        }\n        var canvass = document.getElementById(this.pdfViewer.element.id + '_annotationCanvas_' + currentPage);\n        // eslint-disable-next-line\n        this.pdfViewer.renderDrawing(canvass, currentPage);\n        this.pdfViewerBase.signatureModule.showSignatureDialog(false);\n        if (currentField.className === 'e-pdfviewer-signatureformfields e-pv-signature-focus') {\n            currentField.className = 'e-pdfviewer-signatureformfields-signature e-pv-signature-focus';\n        }\n        else {\n            currentField.className = 'e-pdfviewer-signatureformfields-signature';\n        }\n        if (this.pdfViewerBase.drawSignatureWithTool && signatureField) {\n            var zoomvalue = this.pdfViewerBase.getZoomFactor();\n            var key = target.offsetParent.offsetParent.id.split('_')[0] + '_content';\n            annot.bounds = { x: bounds.x * zoomvalue, y: bounds.y * zoomvalue, width: bounds.width * zoomvalue, height: bounds.height * zoomvalue };\n            this.updateSignatureDataInSession(annot, key);\n        }\n        else {\n            this.updateDataInSession(currentField, annot.data, annot.bounds, signatureFontFamily, signatureFontSize);\n        }\n        currentField.style.pointerEvents = 'none';\n        if (this.pdfViewer.annotation) {\n            this.pdfViewer.annotation.addAction(annot.pageIndex, null, annot, 'FormField Value Change', '', annot, annot);\n        }\n        // eslint-disable-next-line\n        if (annot.shapeAnnotationType === \"SignatureImage\") {\n            this.pdfViewer.fireSignatureAdd(annot.pageIndex, annot.id, annot.shapeAnnotationType, annot.bounds, annot.opacity, null, null, signString);\n        }\n        this.pdfViewer.fireFocusOutFormField(currentField.name, currentValue);\n        this.pdfViewerBase.signatureModule.hideSignaturePanel();\n        this.pdfViewerBase.drawSignatureWithTool = false;\n        this.pdfViewer.isInitialFieldToolbarSelection = false;\n    };\n    FormFields.prototype.updateSignatureDataInSession = function (annot, key) {\n        var data = this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');\n        var formFieldsData = JSON.parse(data);\n        if (!isNullOrUndefined(formFieldsData)) {\n            var _loop_3 = function (i) {\n                if (formFieldsData[i].Key === key) {\n                    var formFieldIndex = this_3.pdfViewer.formFieldCollection.findIndex(function (el) { return el.id === formFieldsData[i].FormField.id.split('_')[0]; });\n                    if (annot.shapeAnnotationType === \"SignatureText\") {\n                        formFieldsData[i].FormField.signatureType = \"Text\";\n                        this_3.pdfViewerBase.formFieldCollection[i].FormField.signatureType = \"Text\";\n                        this_3.pdfViewer.nameTable[key].signatureType = \"Text\";\n                        formFieldsData[i].FormField.fontFamily = annot.fontFamily === \"TimesRoman\" ? \"Times New Roman\" : annot.fontFamily;\n                        this_3.pdfViewerBase.formFieldCollection[i].FormField.fontFamily = annot.fontFamily;\n                        this_3.pdfViewer.nameTable[key].fontFamily = annot.fontFamily;\n                        formFieldsData[i].FormField.fontSize = annot.fontSize;\n                        this_3.pdfViewerBase.formFieldCollection[i].FormField.fontSize = annot.fontSize;\n                        this_3.pdfViewer.nameTable[key].fontSize = annot.fontSize;\n                        formFieldIndex > -1 ? this_3.pdfViewer.formFieldCollection[formFieldIndex].signatureType = \"Text\" : null;\n                    }\n                    else if (annot.shapeAnnotationType === \"SignatureImage\") {\n                        formFieldsData[i].FormField.signatureType = \"Image\";\n                        this_3.pdfViewerBase.formFieldCollection[i].FormField.signatureType = \"Image\";\n                        this_3.pdfViewer.nameTable[key].signatureType = \"Image\";\n                        formFieldIndex > -1 ? this_3.pdfViewer.formFieldCollection[formFieldIndex].signatureType = \"Image\" : null;\n                    }\n                    else {\n                        formFieldsData[i].FormField.signatureType = \"Path\";\n                        this_3.pdfViewerBase.formFieldCollection[i].FormField.signatureType = \"Path\";\n                        this_3.pdfViewer.nameTable[key].signatureType = \"Path\";\n                        formFieldIndex > -1 ? this_3.pdfViewer.formFieldCollection[formFieldIndex].signatureType = \"Path\" : null;\n                    }\n                    formFieldsData[i].FormField.signatureBound = annot.bounds;\n                    this_3.pdfViewerBase.formFieldCollection[i].FormField.signatureBound = annot.bounds;\n                    this_3.pdfViewer.nameTable[key].signatureBound = annot.bounds;\n                    formFieldIndex > -1 ? this_3.pdfViewer.formFieldCollection[formFieldIndex].signatureBound = annot.bounds : null;\n                    if (annot.shapeAnnotationType === \"Path\") {\n                        var collectionData = processPathData(annot.data);\n                        var csData = splitArrayCollection(collectionData);\n                        formFieldsData[i].FormField.value = JSON.stringify(csData);\n                        this_3.pdfViewer.nameTable[key].value = annot.data;\n                        this_3.pdfViewer.nameTable[key.split('_')[0]].value = annot.data;\n                        this_3.pdfViewerBase.formFieldCollection[i].FormField.value = JSON.stringify(csData);\n                        formFieldIndex > -1 ? this_3.pdfViewer.formFieldCollection[formFieldIndex].value = JSON.stringify(csData) : null;\n                    }\n                    else {\n                        formFieldsData[i].FormField.value = annot.data;\n                        this_3.pdfViewerBase.formFieldCollection[i].FormField.value = annot.data;\n                        this_3.pdfViewer.nameTable[key.split('_')[0]].value = annot.data;\n                        this_3.pdfViewer.nameTable[key].value = annot.data;\n                        formFieldIndex > -1 ? this_3.pdfViewer.formFieldCollection[formFieldIndex].value = annot.data : null;\n                    }\n                    this_3.pdfViewer.formDesigner.updateFormFieldCollections(formFieldsData[i].FormField);\n                    this_3.pdfViewer.formDesigner.updateFormFieldPropertiesChanges(\"formFieldPropertiesChange\", formFieldsData[i].FormField, true, false, false, false, false, false, false, false, false, false, false, false, false, false, false, \"\", formFieldsData[i].FormField.value);\n                }\n            };\n            var this_3 = this;\n            for (var i = 0; i < formFieldsData.length; i++) {\n                _loop_3(i);\n            }\n        }\n        this.pdfViewerBase.setItemInSessionStorage(formFieldsData, '_formDesigner');\n    };\n    /**\n     * @private\n     */\n    FormFields.prototype.getDefaultBoundsforSign = function (bounds) {\n        return { x: bounds.x + 4, y: bounds.y + 4, width: bounds.width - 8, height: bounds.height - 8 };\n    };\n    /**\n     * @private\n      */\n    // eslint-disable-next-line\n    FormFields.prototype.getSignBounds = function (currentIndex, rotateAngle, currentPage, zoomvalue, currentLeft, currentTop, currentWidth, currentHeight, isDraw) {\n        // eslint-disable-next-line\n        var bounds;\n        var signatureId = this.pdfViewer.isInitialFieldToolbarSelection ? 'initialIcon' : 'signIcon';\n        var signIcon = document.getElementById(signatureId + '_' + currentPage + '_' + currentIndex);\n        var signLeft = signIcon ? parseFloat(signIcon.style.left) * zoomvalue : 0;\n        var difference = (currentLeft * zoomvalue) - (signLeft / zoomvalue);\n        if (rotateAngle === 90 || rotateAngle === 270) {\n            this.rotateAngle = 0;\n            if (signIcon.style.left !== '') {\n                if (isDraw) {\n                    return bounds = { x: currentLeft - (difference / zoomvalue) - zoomvalue, y: currentTop + (difference / zoomvalue) + zoomvalue, width: currentWidth, height: currentHeight };\n                }\n                else {\n                    return bounds = { x: currentLeft - (difference / zoomvalue) - zoomvalue, y: currentTop + (difference / zoomvalue) + zoomvalue, width: currentHeight, height: currentWidth };\n                }\n            }\n            else {\n                difference = 10;\n                if (isDraw) {\n                    return bounds = { x: currentLeft - currentWidth, y: currentTop + currentWidth, width: currentHeight, height: currentWidth };\n                }\n                else {\n                    return bounds = { x: currentLeft - currentWidth - difference / 2, y: currentTop + currentWidth + difference, width: currentHeight, height: currentWidth };\n                }\n            }\n        }\n        else {\n            this.rotateAngle = 0;\n            return bounds = { x: currentLeft, y: currentTop, width: currentWidth, height: currentHeight };\n        }\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.updateSameFieldsValue = function (event) {\n        if (this.formFieldsData) {\n            for (var i = 0; i < this.formFieldsData.length; i++) {\n                // eslint-disable-next-line\n                var currentField = this.formFieldsData[i];\n                if (event.target.name === currentField.FieldName && event.target.id !== currentField.uniqueID) {\n                    // eslint-disable-next-line\n                    var currentTarget = document.getElementById(this.formFieldsData[i].uniqueID);\n                    if (currentTarget) {\n                        currentTarget.value = event.target.value;\n                    }\n                    else {\n                        currentField.Text = event.target.value;\n                        this.pdfViewerBase.setItemInSessionStorage(this.formFieldsData, '_formfields');\n                    }\n                }\n            }\n        }\n    };\n    FormFields.prototype.updateFormFieldsValue = function (event) {\n        // eslint-disable-next-line\n        var currentTarget = event.target;\n        var fieldIndex;\n        var nextFields;\n        if (currentTarget.InsertSpaces && !this.isKeyDownCheck) {\n            // eslint-disable-next-line\n            var font = parseInt(currentTarget.style.width) + (parseInt(currentTarget.style.height) / 2);\n            currentTarget.style.width = '' + font + 'px';\n            this.isKeyDownCheck = true;\n        }\n        if (event.which === 9 && currentTarget && (currentTarget.className === 'e-pdfviewer-formFields' || currentTarget.className === 'e-pdfviewer-signatureformfields e-pv-signature-focus' || currentTarget.className === 'e-pdfviewer-signatureformfields-signature')) {\n            // eslint-disable-next-line\n            var id = currentTarget.id.split('input_')[1].split('_')[0];\n            // eslint-disable-next-line\n            var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + parseInt(id));\n            // eslint-disable-next-line\n            var currentFields = textLayer.getElementsByClassName('e-pdfviewer-formFields');\n            var istabindexed = true;\n            fieldIndex = this.pdfViewer.formFieldCollections.findIndex(function (field) { return field.id === currentTarget.id; });\n            if ((!event.shiftKey && event.key === \"Tab\")) {\n                nextFields = fieldIndex + 1 < this.pdfViewer.formFieldCollections.length ? this.pdfViewer.formFieldCollections[fieldIndex + 1] : this.pdfViewer.formFieldCollections[0];\n            }\n            this.pdfViewer.focusFormField(nextFields);\n            istabindexed = true;\n            event.preventDefault();\n            var tabindex = currentTarget.tabIndex + 1;\n            while (!istabindexed) {\n                for (var l = 0; l < currentFields.length; l++) {\n                    istabindexed = false;\n                    if (currentFields[l].tabIndex === (tabindex)) {\n                        currentFields[l].focus();\n                        istabindexed = true;\n                        event.preventDefault();\n                        break;\n                    }\n                }\n                if (this.maintainTabIndex[id] === tabindex) {\n                    istabindexed = true;\n                }\n                tabindex = tabindex + 1;\n            }\n        }\n        if ((event.shiftKey && event.key === \"Tab\")) {\n            var fieldIndex_1 = this.pdfViewer.formFieldCollections.findIndex(function (field) { return field.id === currentTarget.id; });\n            var nextField = fieldIndex_1 > 0 ? this.pdfViewer.formFieldCollections[fieldIndex_1 - 1] : this.pdfViewer.formFieldCollections[this.pdfViewer.formFieldCollections.length - 1];\n            this.pdfViewer.focusFormField(nextField);\n            event.preventDefault();\n        }\n        if (event.currentTarget.classList.contains('e-pdfviewer-signatureformfields') ||\n            event.currentTarget.classList.contains('e-pdfviewer-signatureformfields-signature')) {\n            if (event.key === 'Enter') {\n                // eslint-disable-next-line\n                var currentTarget_2 = event.target;\n                for (var m = 0; m < this.pdfViewer.formFieldCollections.length; m++) {\n                    if (currentTarget_2.id === this.pdfViewer.formFieldCollections[m].id) {\n                        this.pdfViewerBase.signatureModule.setFocus(currentTarget_2.id);\n                        this.pdfViewer.fireFormFieldClickEvent('formFieldClicked', this.pdfViewer.formFieldCollections[m]);\n                    }\n                }\n            }\n            else {\n                event.preventDefault();\n            }\n        }\n    };\n    FormFields.prototype.changeFormFields = function (event) {\n        // eslint-disable-next-line\n        var currentTarget = event.target;\n        this.updateDataInSession(currentTarget);\n    };\n    /**\n     * @param target\n     * @param signaturePath\n     * @param signatureBounds\n     * @param signatureFontFamily\n     * @param signatureFontSize\n     * @param target\n     * @param signaturePath\n     * @param signatureBounds\n     * @param signatureFontFamily\n     * @param signatureFontSize\n     * @param target\n     * @param signaturePath\n     * @param signatureBounds\n     * @param signatureFontFamily\n     * @param signatureFontSize\n     * @param target\n     * @param signaturePath\n     * @param signatureBounds\n     * @param signatureFontFamily\n     * @param signatureFontSize\n     * @param target\n     * @param signaturePath\n     * @param signatureBounds\n     * @param signatureFontFamily\n     * @param signatureFontSize\n     * @private\n     */\n    // eslint-disable-next-line\n    FormFields.prototype.updateDataInSession = function (target, signaturePath, signatureBounds, signatureFontFamily, signatureFontSize) {\n        this.pdfViewerBase.updateDocumentEditedProperty(true);\n        // eslint-disable-next-line\n        var filterFields = [];\n        var fieldsByName = \" \";\n        var filterFieldName = [];\n        var filterArrayLength = 0;\n        var data = this.pdfViewerBase.getItemFromSessionStorage('_formfields');\n        if (data && !this.pdfViewer.formDesignerModule) {\n            // eslint-disable-next-line\n            var FormFieldsData = JSON.parse(data);\n            filterFields = FormFieldsData.filter(function (item) { return item.uniqueID === target.id; });\n            if (filterFields.length > 0) {\n                fieldsByName = filterFields[0].FieldName;\n                filterFieldName = FormFieldsData.filter(function (item) { return item.FieldName === fieldsByName; });\n                filterArrayLength = filterFieldName.length;\n            }\n            for (var m = 0; m < FormFieldsData.length; m++) {\n                // eslint-disable-next-line\n                var currentData = FormFieldsData[m];\n                if (currentData.uniqueID === target.id || fieldsByName === currentData.FieldName) {\n                    if (target && target.type === 'text' || target.type === 'password' || target.type === 'textarea') {\n                        var signField = target;\n                        if (signField.classList.contains('e-pdfviewer-signatureformfields') || signField.classList.contains('e-pdfviewer-signatureformfields-signature')) {\n                            if (signaturePath) {\n                                currentData.Value = signaturePath;\n                            }\n                            if (signatureBounds) {\n                                currentData.Bounds = signatureBounds;\n                            }\n                            if (signatureFontFamily) {\n                                currentData.FontFamily = signatureFontFamily;\n                                currentData.FontSize = signatureFontSize;\n                            }\n                        }\n                        else {\n                            currentData.Text = target.value;\n                            currentData.Value = target.value;\n                            currentData.Multiline = target.multiline;\n                        }\n                    }\n                    else if (target.type === 'radio') {\n                        if (target.checked) {\n                            for (var l = 0; l < FormFieldsData.length; l++) {\n                                // eslint-disable-next-line\n                                var currentType = FormFieldsData[l];\n                                if (FormFieldsData[l].GroupName === target.name) {\n                                    FormFieldsData[l].Selected = false;\n                                }\n                            }\n                            if (target.value == currentData.Value) {\n                                currentData.Selected = true;\n                                break;\n                            }\n                            else {\n                                currentData.Selected = false;\n                            }\n                        }\n                        if (target.selected) {\n                            currentData.Selected = true;\n                        }\n                        if (currentData.Value == \"\" || currentData.Value !== target.value) {\n                            currentData.Value = target.value;\n                        }\n                    }\n                    else if (target.type === 'checkbox') {\n                        var targetCheckBox = target.id;\n                        var filterCheckBoxSameName = FormFieldsData.filter(function (sameNameCheckboxField) { return (sameNameCheckboxField.GroupName === target.name) && sameNameCheckboxField.Name == 'CheckBox'; });\n                        for (var l = 0; l < filterCheckBoxSameName.length; l++) {\n                            // eslint-disable-next-line\n                            var currentType = filterCheckBoxSameName[l];\n                            currentType.Selected = false;\n                            currentType.checked = false;\n                            // eslint-disable-next-line\n                            var currentTarget = document.getElementById(currentType.uniqueID);\n                            if (currentTarget) {\n                                if (targetCheckBox !== currentTarget.id) {\n                                    currentTarget.Selected = false;\n                                    currentTarget.checked = false;\n                                    currentTarget.style.webkitAppearance = 'none';\n                                }\n                            }\n                        }\n                        if (target.checked) {\n                            currentData.Selected = true;\n                        }\n                        else {\n                            currentData.Selected = false;\n                        }\n                        if (currentData.Value == \"\") {\n                            currentData.Value = target.value;\n                        }\n                    }\n                    else if (target.type === 'select-one' && target.size === 0) {\n                        if (target.selectedIndex < 0) {\n                            target.selectedIndex = currentData.selectedIndex;\n                        }\n                        // eslint-disable-next-line\n                        var currentValue = target.options[target.selectedIndex].text;\n                        // eslint-disable-next-line\n                        var childrens = target.children;\n                        var isChildElements = false;\n                        for (var k = 0; k < childrens.length; k++) {\n                            if (childrens[k].text === currentValue) {\n                                currentData.SelectedValue = currentValue;\n                                currentData.selectedIndex = target.selectedIndex;\n                            }\n                        }\n                    }\n                    else if (target.type === 'select-multiple' || target.size > 0) {\n                        // eslint-disable-next-line\n                        var currentValue = target.selectedOptions;\n                        currentData.SelectedList = [];\n                        for (var z = 0; z < currentValue.length; z++) {\n                            // eslint-disable-next-line\n                            var childrens = target.children;\n                            for (var k = 0; k < childrens.length; k++) {\n                                if (childrens[k] === currentValue[z]) {\n                                    currentData.SelectedList.push(k);\n                                }\n                            }\n                        }\n                        currentData.SelectedValue = target.value;\n                        var index = currentData.TextList ? currentData.TextList.indexOf(target.value) : 0;\n                        currentData.selectedIndex = index > -1 ? index : 0;\n                        currentData.SelectedList = [currentData.selectedIndex];\n                    }\n                    if (target.disabled) {\n                        currentData.IsReadonly = true;\n                    }\n                    currentData.IsRequired = target.Required ? target.Required : false;\n                    currentData.ToolTip = target.tooltip ? target.tooltip : \"\";\n                    this.updateFormFieldsCollection(currentData);\n                    filterArrayLength--;\n                    if (filterArrayLength == 0)\n                        break;\n                }\n                else if (target && target.getAttribute('list') != null && target.type === 'text' && currentData.uniqueID === target.list.id) {\n                    currentData.SelectedValue = target.value;\n                }\n                this.updateFormFieldsCollection(currentData);\n            }\n            window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_formfields');\n            this.pdfViewerBase.setItemInSessionStorage(FormFieldsData, '_formfields');\n        }\n        if (this.pdfViewer.formDesignerModule && target && target.id) {\n            var selectedItem = this.pdfViewer.nameTable[target.id.split('_')[0]];\n            if (selectedItem && selectedItem.wrapper && selectedItem.wrapper.children[0]) {\n                selectedItem.value = target.value;\n                var point = cornersPointsBeforeRotation(selectedItem.wrapper.children[0]).topLeft;\n                this.pdfViewer.formDesignerModule.updateFormDesignerFieldInSessionStorage(point, selectedItem.wrapper.children[0], selectedItem.formFieldAnnotationType, selectedItem);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    FormFields.prototype.removeExistingFormFields = function () {\n        var data = this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');\n        var formFieldsData = JSON.parse(data);\n        if (formFieldsData) {\n            for (var i = 0; i < formFieldsData.length; i++) {\n                if (formFieldsData[i].FormField.formFieldAnnotationType === \"RadioButton\") {\n                    var buttonItem = [];\n                    buttonItem = formFieldsData[i].FormField.radiobuttonItem;\n                    var sameButtonItemId = formFieldsData[i].FormField.id.split('_')[0];\n                    for (var j = 0; j < buttonItem.length; j++) {\n                        var otherButton = buttonItem[j];\n                        if (otherButton.id.split('_')[0] !== sameButtonItemId) {\n                            this.pdfViewer.formDesignerModule.deleteFormField(otherButton.id.split('_')[0]);\n                        }\n                    }\n                }\n                if (formFieldsData[i].Key) {\n                    this.pdfViewer.formDesignerModule.deleteFormField(formFieldsData[i].Key.split('_')[0]);\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.applyCommonProperties = function (inputdiv, pageIndex, index, currentData, isFieldRotated) {\n        // eslint-disable-next-line\n        var inputField = document.getElementById(this.pdfViewer.element.id + 'input_' + pageIndex + '_' + index);\n        if (inputField) {\n            var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageIndex);\n            if (inputdiv.type === 'text' && inputField.parentElement !== textLayer) {\n                inputField.parentElement.remove();\n            }\n            if (!(inputField.className === \"e-pdfviewer-signatureformfields e-pv-signature-focus\")) {\n                inputField.remove();\n            }\n        }\n        // eslint-disable-next-line\n        var signIcon = document.getElementById('signIcon_' + pageIndex + '_' + index);\n        var left = parseFloat(inputdiv.style.left);\n        var top = parseInt(inputdiv.style.top);\n        var width = parseFloat(inputdiv.style.width);\n        var height = parseFloat(inputdiv.style.height);\n        var signIconWidth;\n        var signIconHeght;\n        var hightDifference;\n        var widthDifference;\n        var zoomvalue = this.pdfViewerBase.getZoomFactor();\n        if (signIcon && !isFieldRotated) {\n            signIconWidth = parseFloat(signIcon.style.width);\n            signIconHeght = parseFloat(signIcon.style.height);\n            if (signIcon.style.transform == 'rotate(90deg)') {\n                signIcon.style.transform = 'rotate(0deg)';\n                hightDifference = height / 2;\n                widthDifference = signIconWidth * zoomvalue;\n                signIcon.style.left = ((left - (hightDifference - (signIconWidth * zoomvalue))) + (widthDifference / 2)) + 'px';\n            }\n            if (signIcon.style.transform == 'rotate(180deg)') {\n                signIcon.style.transform = 'rotate(0deg)';\n                signIcon.style.left = left + 'px';\n                signIcon.style.top = (top) + 'px';\n            }\n            if (signIcon.style.transform == 'rotate(270deg)') {\n                signIcon.style.transform = 'rotate(0deg)';\n                hightDifference = height / 2;\n                widthDifference = signIconWidth * zoomvalue;\n                signIcon.style.left = ((left - (hightDifference - widthDifference)) + (widthDifference / 2)) + 'px';\n                signIcon.style.top = ((top + (width + (signIconHeght * zoomvalue)) + ((signIconHeght * zoomvalue) / 2))) + 'px';\n            }\n        }\n        if (currentData.IsSignatureField && this.isSignatureField) {\n            inputdiv.className = 'e-pdfviewer-signatureformfields-signature';\n            inputdiv.style.pointerEvents = 'none';\n        }\n        else if (currentData.IsSignatureField) {\n            if (currentData.Value) {\n                inputdiv.className = 'e-pdfviewer-signatureformfields-signature';\n                inputdiv.style.pointerEvents = 'none';\n            }\n            else {\n                inputdiv.className = 'e-pdfviewer-signatureformfields';\n            }\n        }\n        else if (currentData.Name !== 'Button') {\n            inputdiv.className = 'e-pdfviewer-formFields';\n        }\n        inputdiv.id = this.pdfViewer.element.id + 'input_' + pageIndex + '_' + index;\n        inputdiv.ariaLabel = this.pdfViewer.element.id + 'input_' + pageIndex;\n        inputdiv.style.zIndex = 1000;\n    };\n    /**\n     * @param currentData\n     * @param pageIndex\n     * @param index\n     * @param printContainer\n     * @param currentData\n     * @param pageIndex\n     * @param index\n     * @param printContainer\n     * @private\n     */\n    // eslint-disable-next-line\n    FormFields.prototype.createFormFields = function (currentData, pageIndex, index, printContainer, count) {\n        // eslint-disable-next-line\n        var currentField;\n        // eslint-disable-next-line\n        switch (currentData['Name']) {\n            case 'Textbox':\n                currentField = this.createTextBoxField(currentData, pageIndex, 'text');\n                break;\n            case 'Password':\n                currentField = this.createTextBoxField(currentData, pageIndex, 'password');\n                break;\n            case 'RadioButton':\n                currentField = this.createRadioBoxField(currentData, pageIndex, 'radio');\n                break;\n            case 'CheckBox':\n                currentField = this.createRadioBoxField(currentData, pageIndex, 'checkbox', printContainer);\n                break;\n            case 'DropDown':\n                currentField = this.createDropDownField(currentData, pageIndex, index, printContainer);\n                break;\n            case 'ListBox':\n                currentField = this.createListBoxField(currentData, pageIndex);\n                break;\n            case 'InitialField':\n            case 'SignatureField':\n                currentField = this.createSignatureField(currentData, pageIndex, index, printContainer, count);\n                var isFieldRotated = false;\n                if (currentData['Rotation'] === 0) {\n                    isFieldRotated = true;\n                }\n                if (currentData.Value && currentData.Value !== '') {\n                    this.renderExistingAnnnot(currentData, index, printContainer, isFieldRotated);\n                    this.isSignatureRendered = true;\n                    count++;\n                }\n                break;\n            case 'Button':\n                currentField = this.createButtonField(currentData, pageIndex);\n                break;\n            case 'ink':\n                if (this.pdfViewer.formDesignerModule) {\n                    if (currentData.Value && currentData.Value !== '' && !this.isSignatureRendered) {\n                        this.renderExistingAnnnot(currentData, index, printContainer);\n                    }\n                }\n                break;\n            case 'SignatureText':\n            case 'SignatureImage':\n                if (currentData.Value && currentData.Value !== '' && !this.isSignatureRendered) {\n                    this.renderExistingAnnnot(currentData, index, printContainer);\n                }\n                break;\n        }\n        return { currentField: currentField, count: count };\n    };\n    FormFields.prototype.getFormFieldType = function (currentData) {\n        // eslint-disable-next-line\n        var currentField;\n        // eslint-disable-next-line\n        switch (currentData['Name']) {\n            case 'Textbox':\n                currentField = 'Textbox';\n                break;\n            case 'Password':\n                currentField = 'Password';\n                break;\n            case 'RadioButton':\n                currentField = 'RadioButton';\n                break;\n            case 'CheckBox':\n                currentField = 'CheckBox';\n                break;\n            case 'DropDown':\n                currentField = 'DropDown';\n                break;\n            case 'ListBox':\n                currentField = 'ListBox';\n                break;\n            case 'SignatureField':\n                currentField = 'SignatureField';\n                if (currentData.IsInitialField) {\n                    currentField = 'InitialField';\n                }\n                break;\n            case 'InitialField':\n                currentField = 'InitialField';\n                break;\n        }\n        return currentField;\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.createButtonField = function (data, pageIndex) {\n        // eslint-disable-next-line\n        var inputField = document.createElement('input');\n        if (data.Value && (this.isBase64(data.Value) || this.isURL(data.Value))) {\n            inputField.type = 'image';\n            inputField.src = data.Value;\n        }\n        else {\n            inputField.type = 'button';\n        }\n        inputField.className = 'e-pv-buttonItem';\n        if (data.Text !== '') {\n            inputField.value = data.Text;\n        }\n        else {\n            inputField.value = '';\n        }\n        inputField.name = data.FieldName;\n        return inputField;\n    };\n    /**\n     * Returns the boolean value based on the imgae source base64\n     *\n     * @param {string} imageSrc - Passing the image source.\n     *\n     * @returns {boolean}\n     */\n    FormFields.prototype.isBase64 = function (imageSrc) {\n        return /^data:([a-zA-Z]*\\/[a-zA-Z+.-]*);base64,/.test(imageSrc);\n    };\n    /**\n     * Returns the boolean value based on the imgae source URL\n     *\n     * @param {string} imageSrc - Passing the image source.\n     *\n     * @returns {boolean}\n     */\n    FormFields.prototype.isURL = function (imageSrc) {\n        try {\n            new URL(imageSrc);\n            return true;\n        }\n        catch (_a) {\n            return false;\n        }\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.createTextBoxField = function (data, pageIndex, type) {\n        // eslint-disable-next-line\n        var inputField;\n        if (data.Visible === 1) {\n            return;\n        }\n        if (data.Multiline) {\n            inputField = document.createElement('textarea');\n            inputField.style.resize = 'none';\n        }\n        else {\n            inputField = document.createElement('input');\n            inputField.type = type;\n        }\n        if (data.MaxLength > 0) {\n            inputField.maxLength = data.MaxLength;\n        }\n        this.addAlignmentPropety(data, inputField);\n        if (data.Text !== '') {\n            inputField.value = data.Text;\n        }\n        else {\n            inputField.value = '';\n        }\n        if (!this.pdfViewer.enableAutoComplete) {\n            inputField.autocomplete = 'off';\n        }\n        inputField.name = data.FieldName;\n        return inputField;\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.checkIsReadonly = function (data, inputField) {\n        var isReadonly = false;\n        for (var n = 0; n < this.readOnlyCollection.length; n++) {\n            if (inputField.id === this.readOnlyCollection[n]) {\n                isReadonly = true;\n                break;\n            }\n        }\n        if (!this.pdfViewer.formDesignerModule && !this.pdfViewer.annotationModule && (data.IsInitialField || data.IsSignatureField)) {\n            isReadonly = true;\n        }\n        if (data.IsReadonly || (!this.pdfViewer.enableFormFields) || isReadonly) {\n            inputField.disabled = true;\n            inputField.style.cursor = 'default';\n            inputField.style.backgroundColor = 'transparent';\n        }\n        else {\n            // eslint-disable-next-line\n            var borderColor = data.BackColor;\n            inputField.style.backgroundColor = 'rgba(' + borderColor.R + ',' + borderColor.G + ',' + borderColor.B + ',' + 0.2 + ')';\n            // eslint-disable-next-line\n            var fontColor = data.FontColor;\n            inputField.style.color = 'rgba(' + fontColor.R + ',' + fontColor.G + ',' + fontColor.B + ',' + 1 + ')';\n        }\n    };\n    /**\n     * @param isReadonly\n     * @private\n     */\n    // eslint-disable-next-line max-len\n    FormFields.prototype.formFieldsReadOnly = function (isReadonly) {\n        // eslint-disable-next-line\n        var formFields = document.getElementsByClassName('e-pdfviewer-formFields');\n        this.makeformFieldsReadonly(formFields, isReadonly);\n        // eslint-disable-next-line\n        var signatureFields = document.getElementsByClassName('e-pdfviewer-signatureformfields');\n        this.makeformFieldsReadonly(signatureFields, isReadonly);\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.makeformFieldsReadonly = function (formFields, isReadonly) {\n        for (var i = 0; i < formFields.length; i++) {\n            if (formFields[i]) {\n                // eslint-disable-next-line\n                var inputField = formFields[i];\n                if (!isReadonly) {\n                    inputField.disabled = true;\n                    inputField.style.cursor = 'default';\n                }\n                else {\n                    // eslint-disable-next-line\n                    inputField.disabled = false;\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.applyTabIndex = function (data, inputField, pageIndex) {\n        inputField.tabIndex = data.TabIndex;\n        this.maxTabIndex = Math.max(this.maxTabIndex, inputField.tabIndex);\n        if (this.minTabIndex === -1) {\n            this.minTabIndex = inputField.tabIndex;\n        }\n        this.minTabIndex = Math.min(this.minTabIndex, inputField.tabIndex);\n        this.maintainTabIndex[pageIndex.toString()] = this.maxTabIndex;\n        this.maintanMinTabindex[pageIndex.toString()] = this.minTabIndex;\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.checkIsRequiredField = function (data, inputField) {\n        if (data.IsRequired) {\n            inputField.required = true;\n            inputField.style.border = '1px solid red';\n        }\n        else {\n            // eslint-disable-next-line\n            var borderColor = data.BorderColor;\n            inputField.style.border = data.BorderWidth;\n            inputField.style.borderColor = 'rgba(' + borderColor.R + ',' + borderColor.G + ',' + borderColor.B + ',' + 1 + ')';\n        }\n        if (inputField.type !== 'checkbox' && inputField.type !== 'radio') {\n            var borderStyle = data.BorderStyle;\n            this.addBorderStylePropety(borderStyle, inputField);\n        }\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.applyDefaultColor = function (inputField) {\n        // eslint-disable-next-line max-len\n        if (inputField.type !== 'button' && (inputField.style.backgroundColor === 'rgba(255, 255, 255, 0.2)' || inputField.style.backgroundColor === 'rgba(0, 0, 0, 0.2)') || inputField.style.backgroundColor === 'rgba(218, 234, 247, 0.2)') {\n            inputField.style.backgroundColor = 'rgba(0, 20, 200, 0.2)';\n        }\n        if (inputField.style.color === 'rgba(255, 255, 255, 0.2)') {\n            inputField.style.color = 'black';\n        }\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.addAlignmentPropety = function (data, inputField) {\n        // eslint-disable-next-line\n        var alignment = data.Alignment;\n        switch (alignment) {\n            case 0:\n                inputField.style.textAlign = 'left';\n                break;\n            case 1:\n                inputField.style.textAlign = 'center';\n                break;\n            case 2:\n                inputField.style.textAlign = 'right';\n                break;\n            case 3:\n                inputField.style.textAlign = 'justify';\n                break;\n        }\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.addBorderStylePropety = function (borderStyle, inputField) {\n        // eslint-disable-next-line\n        switch (borderStyle) {\n            case 0:\n                inputField.style.borderStyle = 'solid';\n                break;\n            case 1:\n                inputField.style.borderStyle = 'dashed';\n                break;\n            case 2:\n                inputField.style.borderStyle = 'outset';\n                break;\n            case 3:\n                inputField.style.borderStyle = 'inset';\n                break;\n            case 4:\n                inputField.style.borderStyle = 'outset';\n                break;\n            case 5:\n                inputField.style.borderStyle = 'dotted';\n                break;\n            case 6:\n                inputField.style.borderStyle = 'inset';\n                break;\n        }\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.createRadioBoxField = function (data, pageIndex, type, printContainer) {\n        // eslint-disable-next-line\n        var inputField = document.createElement('input');\n        inputField.type = type;\n        if (data.Selected) {\n            inputField.checked = true;\n        }\n        else if (type === 'checkbox' && !printContainer) {\n            inputField.style.webkitAppearance = 'none';\n        }\n        inputField.name = data.GroupName;\n        inputField.value = data.Value;\n        return inputField;\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.createDropDownField = function (data, pageIndex, index, printContainer) {\n        // eslint-disable-next-line\n        var inputField = document.createElement('select');\n        // eslint-disable-next-line\n        var childItems = data['TextList'];\n        if (data.Selected && !printContainer) {\n            // eslint-disable-next-line\n            var previousField = document.getElementById('editableDropdown' + pageIndex + '_' + index);\n            if (previousField) {\n                previousField.remove();\n            }\n            // eslint-disable-next-line\n            var inputFields = document.createElement('input');\n            inputFields.id = 'editableDropdown' + pageIndex + '_' + index;\n            inputFields.setAttribute('list', this.pdfViewer.element.id + 'input_' + pageIndex + '_' + index);\n            // eslint-disable-next-line\n            var bounds = data['LineBounds'];\n            // eslint-disable-next-line\n            var font = data['Font'];\n            inputFields.style.position = 'absolute';\n            inputFields.style.border = '0px';\n            // eslint-disable-next-line\n            this.applyPosition(inputFields, bounds, font, pageIndex, data['Rotation']);\n            inputFields.style.backgroundColor = 'rgba(0, 20, 200, 0.2)';\n            inputFields.className = 'e-pdfviewer-formFields';\n            if (data.selectedIndex === -1) {\n                inputFields.value = data.SelectedValue;\n            }\n            if (printContainer) {\n                printContainer.appendChild(inputFields);\n            }\n            else {\n                var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageIndex);\n                textLayer.appendChild(inputFields);\n            }\n            inputFields.addEventListener('focus', this.focusFormFields.bind(this));\n            inputFields.addEventListener('blur', this.blurFormFields.bind(this));\n            inputFields.addEventListener('click', this.updateFormFields.bind(this));\n            inputFields.addEventListener('change', this.changeFormFields.bind(this));\n            inputFields.addEventListener('keydown', this.updateFormFieldsValue.bind(this));\n            inputField = document.createElement('DATALIST');\n        }\n        for (var j = 0; j < childItems.length; j++) {\n            // eslint-disable-next-line\n            var option = document.createElement('option');\n            option.className = 'e-dropdownSelect';\n            if (data.SelectedValue === childItems[j] || data.selectedIndex === j) {\n                option.selected = true;\n            }\n            else {\n                option.selected = false;\n            }\n            option.innerHTML = childItems[j];\n            inputField.appendChild(option);\n        }\n        inputField.name = data.Text;\n        return inputField;\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.createListBoxField = function (data, pageIndex) {\n        // eslint-disable-next-line\n        var inputField = document.createElement('select');\n        // eslint-disable-next-line\n        var childItems = data['TextList'];\n        if (data.MultiSelect) {\n            inputField.multiple = true;\n        }\n        else {\n            inputField.multiple = false;\n            inputField.size = childItems.length;\n        }\n        for (var j = 0; j < childItems.length; j++) {\n            // eslint-disable-next-line\n            var option = document.createElement('option');\n            option.className = 'e-pdfviewer-ListBox';\n            for (var k = 0; k < data.SelectedList.length; k++) {\n                if (data.SelectedList[k] === j) {\n                    option.selected = true;\n                }\n            }\n            option.innerHTML = childItems[j];\n            inputField.appendChild(option);\n        }\n        inputField.name = data.Text;\n        return inputField;\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.createSignatureField = function (data, pageIndex, index, printContainer, count) {\n        // eslint-disable-next-line\n        var inputField = document.createElement('input');\n        inputField.type = 'text';\n        inputField.name = data.FieldName;\n        var zoomvalue = this.pdfViewerBase.getZoomFactor();\n        // eslint-disable-next-line\n        var previousField = document.getElementById('signIcon_' + pageIndex + '_' + index);\n        if (previousField && !printContainer) {\n            previousField.remove();\n        }\n        this.pdfViewerBase.isInitialField = data.IsInitialField;\n        var signIndicator = this.pdfViewerBase.isInitialField ? \"Initial\" : \"Sign\";\n        //check whether the width for sign indicator has default value or not and then set the default width value for initial field.\n        var signatureFieldIndicatorWidth = this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings ? (this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.width === 19 ? (this.pdfViewerBase.isInitialField ? 27 : 19) : this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.width) : 19;\n        // eslint-disable-next-line\n        var span = document.createElement('span');\n        var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageIndex);\n        // eslint-disable-next-line\n        var bounds = data['LineBounds'];\n        // eslint-disable-next-line\n        var font = data['Font'];\n        var left = this.ConvertPointToPixel(bounds.X);\n        var top = this.ConvertPointToPixel(bounds.Y);\n        var indicatorWidth = this.ConvertPointToPixel(bounds.Width);\n        var indicatorHeight = this.ConvertPointToPixel(bounds.Height);\n        // eslint-disable-next-line max-len\n        var height = this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings ? (this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.height > indicatorHeight * zoomvalue / 2 ? indicatorHeight * zoomvalue / 2 : this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.height) : indicatorHeight * zoomvalue / 2;\n        // eslint-disable-next-line max-len\n        var width = signatureFieldIndicatorWidth > indicatorWidth * zoomvalue / 2 ? indicatorWidth * zoomvalue / 2 : signatureFieldIndicatorWidth;\n        // eslint-disable-next-line max-len\n        var size = this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings ? (this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.fontSize > height / 2 ? 10 : this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.fontSize) : 10;\n        var fontSize = size > width ? width / 2 : (size > height ? height / 2 : size);\n        span.style.position = 'absolute';\n        span.id = 'signIcon_' + pageIndex + '_' + index;\n        var rotation = this.getAngle(pageIndex);\n        // eslint-disable-next-line\n        var annotBounds = { left: left, top: top, width: width, height: height };\n        // eslint-disable-next-line\n        var fieldBounds = this.getBounds(annotBounds, pageIndex);\n        span.style.transform = 'rotate(' + rotation + 'deg)';\n        span.style.left = fieldBounds.left * zoomvalue + 'px';\n        span.style.top = fieldBounds.top * zoomvalue + 'px';\n        if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n            span.style.height = 5 + 'px';\n            span.style.width = 10 + 'px';\n            span.style.fontSize = '3px';\n        }\n        else {\n            span.style.height = height + 'px';\n            span.style.width = width + 'px';\n            span.style.fontSize = fontSize + 'px';\n            if (isBlazor()) {\n                span.style.fontSize = (fontSize - 1) + 'px';\n            }\n        }\n        if (!((height + this.indicatorPaddingValue) > indicatorHeight * zoomvalue) && !((width + this.indicatorPaddingValue) > indicatorWidth * zoomvalue)) {\n            span.style.padding = '2px';\n        }\n        span.style.textAlign = 'center';\n        span.style.boxSizing = 'content-box';\n        // eslint-disable-next-line\n        span.innerHTML = this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings ? (this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.text ? this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.text : signIndicator) : signIndicator;\n        span.style.color = this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings ? (this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.color ? this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.color : 'black') : 'black';\n        // eslint-disable-next-line\n        span.style.backgroundColor = this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings ? (this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.backgroundColor ? this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.backgroundColor : 'orange') : 'orange';\n        span.style.opacity = this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings ? (this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.opacity ? this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.opacity : 1) : 1;\n        if (!isNullOrUndefined(textLayer)) {\n            textLayer.appendChild(span);\n        }\n        this.addSignaturePath(data, count);\n        return inputField;\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.addSignaturePath = function (signData, count) {\n        this.isSignatureField = false;\n        // eslint-disable-next-line\n        var data = this.pdfViewerBase.getItemFromSessionStorage('_formfields');\n        if (data) {\n            // eslint-disable-next-line\n            var formFieldsData = JSON.parse(data);\n            for (var m = 0; m < formFieldsData.length; m++) {\n                // eslint-disable-next-line\n                var currentData = formFieldsData[m];\n                // eslint-disable-next-line max-len\n                if (currentData.ActualFieldName === null && count && (currentData.Name === 'ink' || currentData.Name === 'SignatureField' || currentData.Name === 'SignatureImage' || currentData.Name === 'SignatureText') && (this.pdfViewer.formDesigner ? ((currentData.FieldName.split('_')[0]) === (signData.ActualFieldName) || (currentData.FieldName.split('_')[0]) === (signData.FieldName)) : ((currentData.FieldName.split('_')[0] === (signData.FieldName)) && !isNullOrUndefined(signData.ActualFieldName)) && currentData.Value && currentData.Value !== '')) {\n                    signData.Value = currentData.Value;\n                    signData.FontFamily = currentData.FontFamily;\n                    signData.FontSize = currentData.FontSize;\n                    this.isSignatureField = true;\n                    signData.Bounds = currentData.LineBounds;\n                }\n                if (currentData.ActualFieldName === null && count && (currentData.Name === 'ink' || currentData.Name === 'SignatureField' || currentData.Name === 'SignatureImage' || currentData.Name === 'SignatureText') && this.pdfViewer.formDesigner ? currentData.FieldName === signData.ActualFieldName + '_' + count || currentData.FieldName === signData.FieldName + '_' + count : ((currentData.FieldName === signData.FieldName + '_' + count || currentData.FieldName === signData.ActualFieldName + '_' + count) && !isNullOrUndefined(signData.ActualFieldName)) && currentData.Value && currentData.Value !== '') {\n                    signData.Value = currentData.Value;\n                    signData.FontFamily = currentData.FontFamily;\n                    signData.FontSize = currentData.FontSize;\n                    this.isSignatureField = true;\n                    if (!signData.Bounds) {\n                        signData.Bounds = currentData.LineBounds;\n                    }\n                    break;\n                }\n            }\n        }\n        return this.isSignatureField;\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.getBounds = function (bound, pageIndex, rotation, isFieldRotated) {\n        // eslint-disable-next-line\n        var pageDetails = this.pdfViewerBase.pageSize[pageIndex];\n        // eslint-disable-next-line\n        var bounds;\n        if (rotation > 0) {\n            bounds = this.getBoundsPosition(rotation, bound, pageDetails, isFieldRotated);\n        }\n        else {\n            bounds = this.getBoundsPosition(pageDetails.rotation, bound, pageDetails, isFieldRotated);\n        }\n        return bounds;\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.getBoundsPosition = function (rotation, bound, pageDetails, isFieldRotated) {\n        // eslint-disable-next-line\n        var bounds;\n        if (!isFieldRotated) {\n            switch (rotation) {\n                case 90:\n                    // eslint-disable-next-line\n                    bounds = { left: pageDetails.width - bound.top - bound.height, top: bound.left, width: bound.height, height: bound.width };\n                    break;\n                case 180:\n                    // eslint-disable-next-line\n                    bounds = { left: pageDetails.width - bound.left - bound.width, top: pageDetails.height - bound.top - bound.height, width: bound.width, height: bound.height };\n                    break;\n                case 270:\n                    // eslint-disable-next-line\n                    bounds = { left: bound.top, top: pageDetails.height - bound.left - bound.width, width: bound.height, height: bound.width };\n                    break;\n                case 0:\n                    // eslint-disable-next-line\n                    bounds = bound;\n                    break;\n                case 1:\n                    // eslint-disable-next-line\n                    bounds = { left: pageDetails.width - bound.top - bound.height, top: bound.left, width: bound.height, height: bound.width };\n                    break;\n                case 2:\n                    // eslint-disable-next-line\n                    bounds = { left: pageDetails.width - bound.left - bound.width, top: pageDetails.height - bound.top - bound.height, width: bound.width, height: bound.height };\n                    break;\n                case 3:\n                    // eslint-disable-next-line\n                    bounds = { left: bound.top, top: pageDetails.height - bound.left - bound.width, width: bound.height, height: bound.width };\n                    break;\n            }\n            if (!bounds) {\n                bounds = bound;\n            }\n        }\n        else {\n            switch (rotation) {\n                case 0:\n                    // eslint-disable-next-line\n                    bounds = bound;\n                    break;\n                case 1:\n                    // eslint-disable-next-line\n                    bounds = { left: pageDetails.width - bound.top - bound.height - (bound.width / 2 - bound.height / 2), top: bound.left + (bound.width / 2 - bound.height / 2), width: bound.width, height: bound.height };\n                    break;\n                case 2:\n                    // eslint-disable-next-line\n                    bounds = { left: pageDetails.width - bound.left - bound.width, top: pageDetails.height - bound.top - bound.height, width: bound.width, height: bound.height };\n                    break;\n                case 3:\n                    // eslint-disable-next-line\n                    bounds = { left: bound.top - (bound.width / 2 - bound.height / 2), top: (pageDetails.height - bound.left - bound.width + (bound.width / 2 - bound.height / 2)), width: bound.width, height: bound.height };\n                    break;\n            }\n            if (!bounds) {\n                bounds = bound;\n            }\n        }\n        return bounds;\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.applyPosition = function (inputField, bounds, font, pageIndex, rotation, isFieldRotated) {\n        if (bounds) {\n            var left = this.ConvertPointToPixel(bounds.X);\n            var top_3 = this.ConvertPointToPixel(bounds.Y);\n            var width = this.ConvertPointToPixel(bounds.Width);\n            var height = this.ConvertPointToPixel(bounds.Height);\n            var fontHeight = 0;\n            // eslint-disable-next-line\n            var fieldBounds = { left: left, top: top_3, width: width, height: height };\n            // eslint-disable-next-line\n            var annotBounds = this.getBounds(fieldBounds, pageIndex, rotation, isFieldRotated);\n            if (!isNullOrUndefined(font) && font.Height) {\n                inputField.style.fontFamily = font.Name;\n                if (font.Italic) {\n                    inputField.style.fontStyle = 'italic';\n                }\n                if (font.Bold) {\n                    inputField.style.fontWeight = 'Bold';\n                }\n                fontHeight = this.ConvertPointToPixel(font.Size);\n            }\n            this.pdfViewerBase.setStyleToTextDiv(inputField, annotBounds.left, annotBounds.top, fontHeight, annotBounds.width, annotBounds.height, false);\n        }\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.renderExistingAnnnot = function (data, index, printContainer, isFieldRotated) {\n        if (!printContainer) {\n            // eslint-disable-next-line\n            var bounds = void 0;\n            if (data.Bounds && data.Name !== 'ink') {\n                bounds = data.Bounds;\n            }\n            else {\n                bounds = data.LineBounds;\n            }\n            var currentLeft = void 0;\n            var currentTop = void 0;\n            var currentWidth = void 0;\n            var currentHeight = void 0;\n            if (bounds.x || bounds.y || bounds.width || bounds.height) {\n                currentLeft = bounds.x;\n                currentTop = bounds.y;\n                currentWidth = bounds.width;\n                currentHeight = bounds.height;\n            }\n            else {\n                currentLeft = this.ConvertPointToPixel(bounds.X);\n                currentTop = this.ConvertPointToPixel(bounds.Y);\n                currentWidth = this.ConvertPointToPixel(bounds.Width);\n                currentHeight = this.ConvertPointToPixel(bounds.Height);\n            }\n            // eslint-disable-next-line\n            var currentPage = parseFloat(data['PageIndex']);\n            // eslint-disable-next-line\n            var bound = { left: currentLeft, top: currentTop, width: currentWidth, height: currentHeight };\n            // eslint-disable-next-line\n            var newBounds = this.updateSignatureBounds(bound, currentPage, isFieldRotated);\n            var annot = void 0;\n            var fontFamily = data.FontFamily ? data.FontFamily : data.fontFamily;\n            // eslint-disable-next-line\n            if ((this.pdfViewerBase.isSignatureImageData(data.Value))) {\n                annot = {\n                    // eslint-disable-next-line max-len\n                    id: this.pdfViewer.element.id + 'input_' + currentPage + '_' + index, bounds: newBounds, pageIndex: currentPage, data: data.Value, modifiedDate: '',\n                    shapeAnnotationType: 'SignatureImage', opacity: 1, rotateAngle: isFieldRotated ? this.getAngle(currentPage) : 0, annotName: 'SignatureField', comments: [], review: { state: '', stateModel: '', modifiedDate: '', author: '' }\n                };\n            }\n            else if (this.pdfViewerBase.isSignaturePathData(data.Value)) {\n                var bound_1 = newBounds;\n                var tempBounds = { left: newBounds.x, top: newBounds.y, width: newBounds.width, height: newBounds.height };\n                bound_1 = this.updateSignatureBounds(tempBounds, currentPage, false);\n                annot = {\n                    // eslint-disable-next-line max-len\n                    id: this.pdfViewer.element.id + 'input_' + currentPage + '_' + index, bounds: bound_1, pageIndex: currentPage, data: data.Value, modifiedDate: '',\n                    shapeAnnotationType: 'Path', opacity: 1, rotateAngle: 0, annotName: 'SignatureField', comments: [], review: { state: '', stateModel: '', modifiedDate: '', author: '' }\n                };\n            }\n            else {\n                annot = {\n                    // eslint-disable-next-line max-len\n                    id: this.pdfViewer.element.id + 'input_' + currentPage + '_' + index, bounds: newBounds, pageIndex: currentPage, data: data.Value, modifiedDate: '',\n                    shapeAnnotationType: 'SignatureText', opacity: 1, rotateAngle: isFieldRotated ? this.getAngle(currentPage) : 0, annotName: 'SignatureField', comments: [], review: { state: '', stateModel: '', modifiedDate: '', author: '' }, fontFamily: data.FontFamily, fontSize: data.FontSize\n                };\n                annot.fontFamily = fontFamily === \"TimesRoman\" ? \"Times New Roman\" : fontFamily;\n                annot.fontSize = data.FontSize ? data.FontSize : data.fontSize;\n            }\n            if ((data.Name === 'SignatureField' || data.Name === 'InitialField') && !isNullOrUndefined(data.id)) {\n                var elementId = data.id;\n                var signatureFieldElement = document.getElementById(elementId + '_content_html_element');\n                var signatureField = this.pdfViewer.nameTable[elementId];\n                annot.id = signatureField.id + \"_content\";\n                var obj = this.pdfViewer.add(annot);\n                signatureField.wrapper.children.push(obj.wrapper);\n                if (!isNullOrUndefined(signatureFieldElement) && this.isSignatureField) {\n                    var inputField = signatureFieldElement.children[0].children[0];\n                    inputField.style.pointerEvents = 'none';\n                    inputField.className = 'e-pdfviewer-signatureformfields-signature';\n                    inputField.parentElement.style.pointerEvents = 'none';\n                }\n                else if (!isNullOrUndefined(signatureFieldElement) && data.Value) {\n                    var inputField = signatureFieldElement.children[0].children[0];\n                    inputField.style.pointerEvents = 'none';\n                    inputField.className = 'e-pdfviewer-signatureformfields-signature';\n                    inputField.parentElement.style.pointerEvents = 'none';\n                }\n            }\n            else {\n                var target = document.getElementById(annot.id);\n                if (target && target.classList.contains('e-pdfviewer-signatureformfields-signature')) {\n                    this.pdfViewer.annotation.deleteAnnotationById(annot.id);\n                }\n                this.pdfViewer.add(annot);\n                if (target) {\n                    this.updateDataInSession(target, annot.data, annot.bounds);\n                    this.pdfViewer.fireSignatureAdd(annot.pageIndex, annot.id, annot.shapeAnnotationType, annot.bounds, annot.opacity, annot.strokeColor, annot.thickness, annot.data);\n                }\n            }\n            data.Bounds = annot.bounds;\n            if (this.pdfViewer.formDesignerModule) {\n                var zoomvalue = this.pdfViewerBase.getZoomFactor();\n                annot.bounds = { x: currentLeft * zoomvalue, y: currentTop * zoomvalue, width: currentWidth * zoomvalue, height: currentHeight * zoomvalue };\n                this.updateSignatureDataInSession(annot, annot.id);\n            }\n            // eslint-disable-next-line\n            var canvass = document.getElementById(this.pdfViewer.element.id + '_annotationCanvas_' + currentPage);\n            // eslint-disable-next-line\n            this.pdfViewer.renderDrawing(canvass, currentPage);\n        }\n    };\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    FormFields.prototype.updateSignatureBounds = function (bound, pageIndex, isFieldRotated) {\n        // eslint-disable-next-line\n        var pageDetails = this.pdfViewerBase.pageSize[pageIndex];\n        if (pageDetails) {\n            if (!isFieldRotated) {\n                if (pageDetails.rotation === 1) {\n                    // eslint-disable-next-line max-len\n                    return { x: pageDetails.width - bound.top - bound.height, y: bound.left, width: bound.height, height: bound.width };\n                }\n                else if (pageDetails.rotation === 2) {\n                    // eslint-disable-next-line max-len\n                    return { x: pageDetails.width - bound.left - bound.width, y: pageDetails.height - bound.top - bound.height, width: bound.width, height: bound.height };\n                }\n                else if (pageDetails.rotation === 3) {\n                    // eslint-disable-next-line max-len\n                    return { x: bound.top, y: (pageDetails.height - bound.left - bound.width), width: bound.height, height: bound.width };\n                }\n                else {\n                    // eslint-disable-next-line max-len\n                    return { x: bound.left, y: bound.top, width: bound.width, height: bound.height };\n                }\n            }\n            else {\n                if (pageDetails.rotation === 1) {\n                    // eslint-disable-next-line max-len\n                    return { x: pageDetails.width - bound.top - bound.height - (bound.width / 2 - bound.height / 2), y: bound.left + (bound.width / 2 - bound.height / 2), width: bound.width, height: bound.height };\n                }\n                else if (pageDetails.rotation === 2) {\n                    // eslint-disable-next-line max-len\n                    return { x: pageDetails.width - bound.left - bound.width, y: pageDetails.height - bound.top - bound.height, width: bound.width, height: bound.height };\n                }\n                else if (pageDetails.rotation === 3) {\n                    // eslint-disable-next-line max-len\n                    return { x: bound.top - (bound.width / 2 - bound.height / 2), y: (pageDetails.height - bound.left - bound.width + (bound.width / 2 - bound.height / 2)), width: bound.width, height: bound.height };\n                }\n                else {\n                    // eslint-disable-next-line max-len\n                    return { x: bound.left, y: bound.top, width: bound.width, height: bound.height };\n                }\n            }\n        }\n        else {\n            return { x: bound.left, y: bound.top, width: bound.width, height: bound.height };\n        }\n    };\n    FormFields.prototype.resetFormFields = function () {\n        var formFieldData = this.pdfViewer.formFieldCollections;\n        for (var i = 0; i < formFieldData.length; i++) {\n            var currentData = formFieldData[i];\n            this.currentTarget = document.getElementById(currentData.id);\n            if (currentData.type === 'Textbox') {\n                this.currentTarget.value = currentData.value;\n            }\n            else if (currentData.type === 'RadioButton') {\n                this.currentTarget.checked = currentData.value;\n                if (currentData.value) {\n                    this.updateDataInSession(this.currentTarget);\n                }\n            }\n            else if (currentData.type === 'DropDown') {\n                this.currentTarget.value = currentData.value;\n            }\n            else if (currentData.type === 'CheckBox') {\n                this.currentTarget.checked = currentData.value;\n            }\n            else if (currentData.type === 'SignatureField') {\n                // eslint-disable-next-line\n                var annotation = this.pdfViewer.nameTable[currentData.id];\n                if (annotation) {\n                    if (this.currentTarget && this.currentTarget.className === 'e-pdfviewer-signatureformfields-signature') {\n                        this.currentTarget.className = 'e-pdfviewer-signatureformfields';\n                        this.currentTarget.style.pointerEvents = '';\n                        this.updateDataInSession(this.currentTarget, '');\n                    }\n                    this.pdfViewer.remove(annotation);\n                    this.pdfViewer.renderDrawing();\n                }\n            }\n            if (currentData.type !== 'RadioButton' && currentData.type !== 'SignatureField') {\n                this.updateDataInSession(this.currentTarget);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    FormFields.prototype.clearFormFieldStorage = function () {\n        // eslint-disable-next-line\n        var sessionSize = Math.round(JSON.stringify(window.sessionStorage).length / 1024);\n        var maxSessionSize = 4500;\n        if (this.pdfViewerBase.isStorageExceed) {\n            var storageLength = window.sessionStorage.length;\n            // eslint-disable-next-line\n            var formFieldsList = [];\n            for (var i = 0; i < storageLength; i++) {\n                if (window.sessionStorage.key(i) && window.sessionStorage.key(i).split('_')[3]) {\n                    if (window.sessionStorage.key(i).split('_')[3] === 'formfields') {\n                        // eslint-disable-next-line max-len\n                        this.pdfViewerBase.formFieldStorage[window.sessionStorage.key(i)] = window.sessionStorage.getItem(window.sessionStorage.key(i));\n                        formFieldsList.push(window.sessionStorage.key(i));\n                    }\n                    else if (window.sessionStorage.key(i).split('_')[3] === 'formDesigner') {\n                        this.pdfViewerBase.formFieldStorage[window.sessionStorage.key(i)] = window.sessionStorage.getItem(window.sessionStorage.key(i));\n                        formFieldsList.push(window.sessionStorage.key(i));\n                    }\n                }\n            }\n            if (formFieldsList) {\n                for (var i = 0; i < formFieldsList.length; i++) {\n                    window.sessionStorage.removeItem(formFieldsList[i]);\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.clearFormFields = function (formField) {\n        // eslint-disable-next-line\n        var data = this.pdfViewerBase.getItemFromSessionStorage('_formfields');\n        if (data) {\n            // eslint-disable-next-line\n            var formFieldsData = void 0;\n            if (formField) {\n                formFieldsData = [formField];\n            }\n            else {\n                formFieldsData = JSON.parse(data);\n            }\n            var isFirstRadio = true;\n            for (var m = 0; m < formFieldsData.length; m++) {\n                // eslint-disable-next-line\n                var currentData = formFieldsData[m];\n                if (formField) {\n                    currentData.uniqueID = formField.id;\n                    currentData.Name = formField.type;\n                }\n                // eslint-disable-next-line\n                this.currentTarget = document.getElementById(currentData.uniqueID);\n                if (currentData.Name === 'Textbox') {\n                    this.currentTarget.value = '';\n                }\n                else if (currentData.Name === 'RadioButton') {\n                    if (isFirstRadio) {\n                        this.currentTarget.checked = true;\n                        this.updateDataInSession(this.currentTarget);\n                        isFirstRadio = false;\n                    }\n                }\n                else if (currentData.Name === 'DropDown') {\n                    this.currentTarget.value = currentData.TextList[0];\n                }\n                else if (currentData.Name === 'CheckBox') {\n                    this.currentTarget.checked = false;\n                }\n                else if (currentData.Name === 'SignatureField' || currentData.Name === 'InitialField') {\n                    // eslint-disable-next-line\n                    var annotation = this.pdfViewer.nameTable[currentData.uniqueID];\n                    if (annotation.propName !== 'annotations') {\n                        annotation = this.pdfViewer.nameTable[currentData.uniqueID + '_content'];\n                    }\n                    if (annotation) {\n                        if (this.currentTarget && this.currentTarget.className === 'e-pdfviewer-signatureformfields-signature') {\n                            this.currentTarget.className = 'e-pdfviewer-signatureformfields';\n                            this.currentTarget.style.pointerEvents = '';\n                            this.currentTarget.parentElement.style.pointerEvents = '';\n                            this.updateDataInSession(this.currentTarget, '');\n                            if (formField) {\n                                formField.value = '';\n                                formField.signatureType = [formField.signatureType];\n                                formField.signatureType[0] = '';\n                            }\n                        }\n                        this.pdfViewer.annotation.deleteAnnotationById(annotation.id);\n                    }\n                }\n                if (currentData.Name !== 'SignatureField' && currentData.Name !== 'ink' && currentData.Name !== 'RadioButton') {\n                    this.updateDataInSession(this.currentTarget);\n                }\n            }\n        }\n    };\n    /**\n     * @param number\n     * @private\n     */\n    // eslint-disable-next-line\n    FormFields.prototype.ConvertPointToPixel = function (number) {\n        return (number * (96 / 72));\n    };\n    /**\n     * @private\n     */\n    FormFields.prototype.destroy = function () {\n        this.currentTarget = null;\n        this.readOnlyCollection = [];\n        if (this.pdfViewerBase && this.pdfViewerBase.signatureModule)\n            this.pdfViewerBase.signatureModule.destroy();\n    };\n    /**\n     * @private\n     */\n    FormFields.prototype.getModuleName = function () {\n        return 'FormFields';\n    };\n    /**\n     * @private\n     * Get the text wdith\n     * @param text\n     * @param font\n     * @param fontFamily\n    */\n    FormFields.prototype.getTextWidth = function (text, font, fontFamily) {\n        var canvas = document.createElement('canvas');\n        var context = canvas.getContext('2d');\n        var fontName;\n        if (font) {\n            fontName = font + 'px' + ' ' + fontFamily;\n        }\n        context.font = fontName || getComputedStyle(document.body).font;\n        return context.measureText(text).width;\n    };\n    /**\n     * @private\n     * @param {number} fontSize - Font size.\n     * @returns {number} - Returns the font size.\n    */\n    FormFields.prototype.getFontSize = function (fontSize) {\n        return fontSize;\n        ;\n    };\n    return FormFields;\n}());\nexport { FormFields };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}