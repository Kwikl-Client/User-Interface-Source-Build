{"ast":null,"code":"import { createElement, isNullOrUndefined, isBlazor } from '@syncfusion/ej2-base';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { splitArrayCollection, processPathData, getPathString } from '@syncfusion/ej2-drawings';\nimport { TextBox } from '@syncfusion/ej2-inputs';\nimport { cloneObject } from '../drawing/drawing-util';\nimport { CheckBox } from '@syncfusion/ej2-buttons';\nimport { Tab } from '@syncfusion/ej2-navigations';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { DisplayMode } from './types';\n/**\n * @hidden\n */\nvar Signature = /** @class */function () {\n  /**\n   * Initialize the constructor of blazorUIadapater.\n   * @private\n   * @param { PdfViewer } pdfViewer - Specified PdfViewer class.\n   * @param { PdfViewerBase } pdfViewerBase - The pdfViewerBase.\n   */\n  function Signature(pdfViewer, pdfViewerBase) {\n    var _this = this;\n    this.mouseMoving = true;\n    this.canvasTouched = false;\n    this.imageSignatureDataUrl = '';\n    this.drawSignatureDataUrl = '';\n    // eslint-disable-next-line\n    this.newObject = [];\n    /**\n     * @private\n     */\n    this.outputString = '';\n    /**\n     * @private\n     */\n    this.drawOutputString = '';\n    /**\n    * @private\n    */\n    this.imageOutputString = '';\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    this.signaturecollection = [];\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    this.outputcollection = [];\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    this.signAnnotationIndex = [];\n    // eslint-disable-next-line\n    this.fontsign = [];\n    // eslint-disable-next-line\n    this.signfontStyle = [];\n    this.isSaveSignature = false;\n    this.isSaveInitial = false;\n    this.isInitialFiledSaveSignature = false;\n    this.isSignatureFieldsSaveSignature = false;\n    this.issaveTypeSignature = false;\n    this.issaveImageSignature = false;\n    this.issaveTypeInitial = false;\n    this.issaveImageInitial = false;\n    this.saveSignatureTypeString = '';\n    this.saveInitialTypeString = '';\n    this.saveTypeString = '';\n    this.signatureTypeString = '';\n    this.initialTypeString = '';\n    this.saveUploadString = '';\n    this.saveSignatureUploadString = '';\n    this.saveInitialUploadString = '';\n    this.signatureUploadString = '';\n    this.initialUploadString = '';\n    this.clearUploadString = false;\n    this.textValue = '';\n    this.signatureDrawString = '';\n    this.initialDrawString = '';\n    // eslint-disable-next-line\n    this.signatureTextContentTop = 0.2;\n    // eslint-disable-next-line\n    this.signatureTextContentLeft = 0.7;\n    // eslint-disable-next-line\n    this.saveSignatureString = '';\n    // eslint-disable-next-line\n    this.saveInitialString = '';\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    this.saveImageString = '';\n    this.signatureFieldCollection = [];\n    this.signatureImageString = '';\n    this.initialImageString = '';\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    this.maxSaveLimit = 5;\n    this.select = function (e) {\n      if (this.canvasTouched) {\n        this.mouseMoving = true;\n        this.canvasTouched = false;\n      }\n      if (e.isSwiped && this.signaturetype == 'Draw' && this.mouseMoving) {\n        e.cancel = true;\n        this.mouseMoving = false;\n      }\n    };\n    // eslint-disable-next-line\n    this.addStampImage = function (args) {\n      // eslint-disable-next-line\n      var proxy = _this;\n      // eslint-disable-next-line\n      var upoadedFiles = args.target.files;\n      if (args.target.files[0] !== null) {\n        var uploadedFile = upoadedFiles[0];\n        if (uploadedFile.type.split('/')[0] === 'image') {\n          var reader = new FileReader();\n          // eslint-disable-next-line\n          reader.onload = function (e) {\n            // eslint-disable-next-line\n            var canvas = document.getElementById(_this.pdfViewer.element.id + '_signatureuploadCanvas_');\n            // eslint-disable-next-line\n            var context = canvas.getContext('2d');\n            // eslint-disable-next-line\n            var image = new Image();\n            // eslint-disable-next-line\n            var proxy = _this;\n            image.onload = function () {\n              // eslint-disable-next-line\n              var signbutton = document.getElementById(_this.pdfViewer.element.id + '_e-pv-upload-button');\n              signbutton.style.visibility = 'hidden';\n              context.drawImage(image, 0, 0, canvas.width, canvas.height);\n              proxy.enableCreateButton(false);\n              proxy.outputString = image.src;\n              proxy.signatureImageHeight = image.naturalHeight;\n              proxy.signatureImageWidth = image.naturalWidth;\n            };\n            image.src = e.currentTarget.result;\n            proxy.outputString = e.currentTarget.result;\n            proxy.switchTabImageSignature = e.currentTarget.result;\n          };\n          reader.readAsDataURL(uploadedFile);\n        }\n      }\n      args.target.value = '';\n      args.currentTarget.value = '';\n    };\n    this.pdfViewer = pdfViewer;\n    this.pdfViewerBase = pdfViewerBase;\n  }\n  /**\n   * @private\n   * @returns {void}\n   */\n  Signature.prototype.createSignaturePanel = function () {\n    var _this = this;\n    var maximumWidth = 750;\n    this.imageSignatureDataUrl = \"\";\n    this.drawSignatureDataUrl = \"\";\n    if (!isBlazor()) {\n      var elementID = this.pdfViewer.element.id;\n      var dialogDiv = createElement('div', {\n        id: elementID + '_signature_window',\n        className: 'e-pv-signature-window'\n      });\n      dialogDiv.style.display = 'block';\n      this.pdfViewerBase.pageContainer.appendChild(dialogDiv);\n      var appearanceTab = this.createSignatureCanvas();\n      var signaturePanelHeader = void 0;\n      if (!this.pdfViewerBase.isToolbarSignClicked) {\n        if (this.pdfViewerBase.isInitialField) {\n          signaturePanelHeader = this.pdfViewer.localeObj.getConstant('HandwrittenInitialDialogHeaderText');\n        } else {\n          signaturePanelHeader = this.pdfViewer.localeObj.getConstant('HandwrittenSignatureDialogHeaderText');\n        }\n      } else {\n        if (this.pdfViewerBase.isInitialField) {\n          signaturePanelHeader = this.pdfViewer.localeObj.getConstant('InitialFieldDialogHeaderText');\n        } else {\n          signaturePanelHeader = this.pdfViewer.localeObj.getConstant('SignatureFieldDialogHeaderText');\n        }\n      }\n      if (this.signatureDialog) {\n        this.signatureDialog.content = appearanceTab;\n      } else {\n        this.signatureDialog = new Dialog({\n          // eslint-disable-next-line max-len\n          showCloseIcon: true,\n          closeOnEscape: false,\n          isModal: true,\n          header: signaturePanelHeader,\n          cssClass: 'e-pv-signature-dialog-height',\n          target: this.pdfViewer.element,\n          content: appearanceTab,\n          width: '750px',\n          visible: true,\n          allowDragging: true,\n          beforeClose: function () {\n            _this.clearSignatureCanvas();\n            _this.signatureDialog.destroy();\n            _this.signatureDialog = null;\n            if (_this.tabObj) {\n              _this.tabObj.destroy();\n            }\n            // eslint-disable-next-line\n            var signatureWindow = document.getElementById(_this.pdfViewer.element.id + '_signature_window');\n            if (signatureWindow) {\n              // eslint-disable-next-line\n              signatureWindow.parentNode ? signatureWindow.parentNode.removeChild(signatureWindow) : signatureWindow.parentElement.removeChild(signatureWindow);\n            }\n            // eslint-disable-next-line max-len\n            if (!_this.pdfViewerBase.isToolbarSignClicked && !_this.pdfViewerBase.drawSignatureWithTool && !isNullOrUndefined(_this.pdfViewer.formFieldsModule.currentTarget)) {\n              _this.pdfViewer.fireFocusOutFormField(_this.pdfViewer.formFieldsModule.currentTarget.name, '');\n            }\n            _this.pdfViewerBase.isToolbarSignClicked = false;\n            _this.setFocus();\n          }\n        });\n        this.signatureDialog.buttons = [\n        // eslint-disable-next-line max-len\n        {\n          buttonModel: {\n            content: this.pdfViewer.localeObj.getConstant('Clear'),\n            disabled: true,\n            cssClass: 'e-pv-clearbtn'\n          },\n          click: this.clearSignatureCanvas.bind(this)\n        },\n        // eslint-disable-next-line max-len\n        {\n          buttonModel: {\n            content: this.pdfViewer.localeObj.getConstant('Cancel'),\n            cssClass: 'e-pv-cancelbtn'\n          },\n          click: this.closeSignaturePanel.bind(this)\n        },\n        // eslint-disable-next-line max-len\n        {\n          buttonModel: {\n            content: this.pdfViewer.localeObj.getConstant('Create'),\n            isPrimary: true,\n            disabled: true,\n            cssClass: 'e-pv-createbtn'\n          },\n          click: this.addSignatureInPage.bind(this)\n        }];\n        this.signatureDialog.appendTo(dialogDiv);\n      }\n      if (this.pdfViewer.element.offsetWidth < maximumWidth) this.updateCanvasSize();\n      if (this.pdfViewer.enableRtl) {\n        this.signatureDialog.enableRtl = this.pdfViewer.enableRtl;\n      }\n      var checkboxItem = this.signatureDialog.content.ej2_instances[0].items[0];\n      if (checkboxItem.header.label === 'DRAW') {\n        var drawCheckbox = document.getElementById(\"checkbox\");\n        this.hideSignatureCheckbox(drawCheckbox);\n      } else if (checkboxItem.header.label === 'TYPE') {\n        var typeCheckbox = document.getElementById(\"checkbox1\");\n        this.hideSignatureCheckbox(typeCheckbox);\n      } else {\n        var imageCheckbox = document.getElementById(\"checkbox2\");\n        this.hideSignatureCheckbox(imageCheckbox);\n      }\n    } else {\n      // eslint-disable-next-line\n      var canvas = document.getElementById(this.pdfViewer.element.id + '_signatureCanvas_');\n      if (canvas) {\n        if (!this.pdfViewerBase.pageContainer.querySelector('.e-pv-signature-window')) {\n          var elementID = this.pdfViewer.element.id;\n          // eslint-disable-next-line max-len\n          var dialogDiv = createElement('div', {\n            id: elementID + '_signature_window',\n            className: 'e-pv-signature-window'\n          });\n          dialogDiv.style.display = 'block';\n          this.pdfViewerBase.pageContainer.appendChild(dialogDiv);\n        }\n        canvas.addEventListener('mousedown', this.signaturePanelMouseDown.bind(this));\n        canvas.addEventListener('mousemove', this.signaturePanelMouseMove.bind(this));\n        canvas.addEventListener('mouseup', this.signaturePanelMouseUp.bind(this));\n        canvas.addEventListener('mouseleave', this.signaturePanelMouseUp.bind(this));\n        canvas.addEventListener('touchstart', this.signaturePanelMouseDown.bind(this));\n        canvas.addEventListener('touchmove', this.signaturePanelMouseMove.bind(this));\n        canvas.addEventListener('touchend', this.signaturePanelMouseUp.bind(this));\n        this.clearSignatureCanvas();\n      }\n      this.pdfViewer._dotnetInstance.invokeMethodAsync('OpenSignaturePanel', this.pdfViewerBase.isToolbarSignClicked);\n    }\n    this.drawSavedSignature();\n  };\n  Signature.prototype.drawSavedSignature = function () {\n    if (!this.pdfViewerBase.isToolbarSignClicked && (this.isSaveSignature || this.isSaveInitial)) {\n      if (!this.pdfViewerBase.isInitialField && this.isSaveSignature) {\n        this.outputString = this.saveSignatureString;\n      } else if (this.pdfViewerBase.isInitialField && this.isSaveInitial) {\n        this.outputString = this.saveInitialString;\n      }\n      // eslint-disable-next-line\n      var canvas = document.getElementById(this.pdfViewer.element.id + '_signatureCanvas_');\n      // eslint-disable-next-line\n      var context_1 = canvas.getContext('2d');\n      // eslint-disable-next-line\n      var image_1 = new Image();\n      image_1.onload = function () {\n        context_1.drawImage(image_1, 0, 0);\n      };\n      if (!this.pdfViewerBase.isInitialField && this.isSaveSignature) {\n        image_1.src = this.signatureDrawString;\n      } else if (this.pdfViewerBase.isInitialField && this.isSaveInitial) {\n        image_1.src = this.initialDrawString;\n      }\n      // eslint-disable-next-line\n      var checkbox = document.getElementById(this.pdfViewer.element.id + '_signatureCheckBox');\n      if (checkbox) {\n        checkbox.checked = true;\n      }\n      this.enableCreateButton(false);\n      this.enableClearbutton(false);\n    }\n  };\n  Signature.prototype.drawSavedTypeSignature = function () {\n    var output = '';\n    if (!this.pdfViewerBase.isToolbarSignClicked && (this.issaveTypeSignature || this.issaveTypeInitial)) {\n      if (!this.pdfViewerBase.isInitialField && this.issaveTypeSignature) {\n        output = this.saveSignatureTypeString;\n      } else {\n        output = this.saveInitialTypeString;\n      }\n    }\n    return output;\n  };\n  ;\n  Signature.prototype.drawSavedImageSignature = function () {\n    var output = '';\n    if (!this.pdfViewerBase.isToolbarSignClicked && (this.issaveImageSignature || this.issaveImageInitial)) {\n      if (!this.pdfViewerBase.isInitialField && this.issaveImageSignature) {\n        output = this.saveSignatureUploadString;\n      } else {\n        output = this.saveInitialUploadString;\n      }\n    }\n    return output;\n  };\n  ;\n  Signature.prototype.hideSignatureCheckbox = function (checkbox) {\n    if (this.pdfViewerBase.isToolbarSignClicked) {\n      if (this.pdfViewerBase.isInitialField) {\n        if (this.pdfViewer.handWrittenSignatureSettings.initialDialogSettings && this.pdfViewer.handWrittenSignatureSettings.initialDialogSettings.hideSaveSignature) {\n          this.hideCheckboxParent(checkbox);\n        }\n      } else if (this.pdfViewer.handWrittenSignatureSettings.signatureDialogSettings && this.pdfViewer.handWrittenSignatureSettings.signatureDialogSettings.hideSaveSignature) {\n        this.hideCheckboxParent(checkbox);\n      }\n    } else {\n      if (this.pdfViewerBase.isInitialField) {\n        if (this.pdfViewer.initialFieldSettings.initialDialogSettings && this.pdfViewer.initialFieldSettings.initialDialogSettings.hideSaveSignature) {\n          this.hideCheckboxParent(checkbox);\n        }\n      } else {\n        if (this.pdfViewer.signatureFieldSettings.signatureDialogSettings && this.pdfViewer.signatureFieldSettings.signatureDialogSettings.hideSaveSignature) {\n          this.hideCheckboxParent(checkbox);\n        }\n      }\n    }\n  };\n  Signature.prototype.saveSignatureCheckbox = function () {\n    if (this.pdfViewerBase.isToolbarSignClicked) {\n      return false;\n    } else {\n      if (this.pdfViewerBase.isInitialField) {\n        if (this.pdfViewer.initialFieldSettings.initialDialogSettings && this.pdfViewer.initialFieldSettings.initialDialogSettings.hideSaveSignature) {\n          return false;\n        } else {\n          return this.isInitialFiledSaveSignature;\n        }\n      } else {\n        if (this.pdfViewer.signatureFieldSettings.signatureDialogSettings && this.pdfViewer.signatureFieldSettings.signatureDialogSettings.hideSaveSignature) {\n          return false;\n        } else {\n          return this.isSignatureFieldsSaveSignature;\n        }\n      }\n    }\n  };\n  Signature.prototype.hideCheckboxParent = function (checkbox) {\n    if (checkbox) {\n      checkbox.parentElement.style.display = 'none';\n    }\n  };\n  Signature.prototype.saveSignatureImage = function () {\n    // eslint-disable-next-line\n    var checkbox = document.getElementById(this.pdfViewer.element.id + '_signatureCheckBox');\n    if (checkbox && checkbox.checked) {\n      if (this.outputString !== '') {\n        if (!this.pdfViewerBase.isInitialField) {\n          this.isSaveSignature = true;\n          this.saveSignatureString = this.outputString;\n        } else {\n          this.isSaveInitial = true;\n          this.saveInitialString = this.outputString;\n        }\n        // eslint-disable-next-line\n        var canvas = document.getElementById(this.pdfViewer.element.id + '_signatureCanvas_');\n        this.saveImageString = canvas.toDataURL();\n        if (!this.pdfViewerBase.isInitialField) {\n          this.signatureImageString = this.saveImageString;\n        } else {\n          this.initialImageString = this.saveImageString;\n        }\n      }\n    } else {\n      if (this.isSaveSignature && !this.pdfViewerBase.isInitialField) {\n        this.isSaveSignature = false;\n        this.saveSignatureString = '';\n        this.saveImageString = '';\n        this.signatureImageString = '';\n      } else if (this.isSaveInitial && this.pdfViewerBase.isInitialField) {\n        this.isSaveInitial = false;\n        this.saveInitialString = '';\n        this.saveImageString = '';\n        this.initialImageString = '';\n      }\n      this.clearSignatureCanvas();\n    }\n  };\n  /**\n   * @param type\n   * @private\n   */\n  // eslint-disable-next-line\n  Signature.prototype.addSignature = function (type) {\n    var annot;\n    if (this.pdfViewerBase.isToolbarSignClicked) {\n      var annotationName = this.pdfViewer.annotation.createGUID();\n      this.pdfViewerBase.currentSignatureAnnot = null;\n      this.pdfViewerBase.isSignatureAdded = true;\n      var pageIndex = this.pdfViewerBase.currentPageNumber - 1;\n      // eslint-disable-next-line max-len\n      var thickness = this.pdfViewer.handWrittenSignatureSettings.thickness ? this.pdfViewer.handWrittenSignatureSettings.thickness : 1;\n      // eslint-disable-next-line max-len\n      var opacity = this.pdfViewer.handWrittenSignatureSettings.opacity ? this.pdfViewer.handWrittenSignatureSettings.opacity : 1;\n      // eslint-disable-next-line max-len\n      var strokeColor = this.pdfViewer.handWrittenSignatureSettings.strokeColor ? this.pdfViewer.handWrittenSignatureSettings.strokeColor : '#000000';\n      var fontSize = 16;\n      var fontFamily = 'Helvetica';\n      var signatureBounds = this.updateSignatureAspectRatio(this.outputString, true);\n      // eslint-disable-next-line\n      var canvas = document.getElementById(this.pdfViewer.element.id + '_signatureCanvas_');\n      this.saveImageString = canvas.toDataURL();\n      if (!this.pdfViewerBase.isInitialField) {\n        this.signatureImageString = this.saveImageString;\n      } else {\n        this.initialImageString = this.saveImageString;\n      }\n      annot = {\n        // eslint-disable-next-line max-len\n        id: 'sign' + this.pdfViewerBase.signatureCount,\n        bounds: signatureBounds,\n        pageIndex: pageIndex,\n        data: this.outputString,\n        fontFamily: fontFamily,\n        fontSize: fontSize,\n        shapeAnnotationType: 'HandWrittenSignature',\n        opacity: opacity,\n        strokeColor: strokeColor,\n        thickness: thickness,\n        signatureName: annotationName\n      };\n      this.pdfViewerBase.currentSignatureAnnot = annot;\n      // eslint-disable-next-line\n      var checkbox = void 0;\n      if (isBlazor()) {\n        checkbox = document.getElementById(this.pdfViewer.element.id + '_signatureCheckBox');\n      } else {\n        checkbox = document.getElementById('checkbox');\n      }\n      if (checkbox && checkbox.checked) {\n        this.addSignatureCollection();\n      }\n      this.hideSignaturePanel();\n      this.pdfViewerBase.isToolbarSignClicked = false;\n    } else {\n      // eslint-disable-next-line\n      var checkbox = document.getElementById('checkbox');\n      var typeCheckbox = document.getElementById('checkbox1');\n      var imageCheckbox = document.getElementById('checkbox2');\n      var isSignatureAdded = false;\n      if (!isSignatureAdded) {\n        // eslint-disable-next-line\n        var canvas = document.getElementById(this.pdfViewer.element.id + '_signatureCanvas_');\n        this.saveImageString = canvas.toDataURL();\n        if (checkbox) {\n          if (checkbox.checked) {\n            if (!this.pdfViewerBase.isInitialField) {\n              this.isSaveSignature = true;\n              this.signatureDrawString = this.saveImageString;\n              this.saveSignatureString = this.outputString;\n            } else {\n              this.isSaveInitial = true;\n              this.initialDrawString = this.saveImageString;\n              this.saveInitialString = this.outputString;\n            }\n            this.checkSaveFiledSign(this.pdfViewerBase.isInitialField, true);\n          } else {\n            if (!this.pdfViewerBase.isInitialField) {\n              this.isSaveSignature = false;\n              this.saveSignatureString = '';\n            } else {\n              this.isSaveInitial = false;\n              this.saveInitialString = '';\n            }\n            this.checkSaveFiledSign(this.pdfViewerBase.isInitialField, false);\n          }\n        }\n        this.saveTypeSignature(typeCheckbox);\n        this.saveUploadSignature(imageCheckbox);\n        if (!this.pdfViewerBase.isInitialField) {\n          this.signatureImageString = this.saveImageString;\n        } else {\n          this.initialImageString = this.saveImageString;\n        }\n        this.pdfViewer.formFieldsModule.drawSignature(null, null, this.pdfViewerBase.currentTarget, null);\n        isSignatureAdded = true;\n      }\n    }\n  };\n  /**\n  * @param data\n  * @param isSignature\n  * @param currentField\n  * @param data\n  * @param isSignature\n  * @param currentField\n  * @param data\n  * @param isSignature\n  * @param currentField\n  * @private\n  */\n  // eslint-disable-next-line\n  Signature.prototype.updateSignatureAspectRatio = function (data, isSignature, currentField, currentData) {\n    // eslint-disable-next-line\n    var collectionData = processPathData(data);\n    // eslint-disable-next-line\n    var csData = splitArrayCollection(collectionData);\n    var minimumX = -1;\n    var minimumY = -1;\n    var maximumX = -1;\n    var maximumY = -1;\n    var signatureCanvas = document.getElementById(this.pdfViewer.element.id + '_signatureCanvas_');\n    var signatureCavasWidth = 0;\n    var signatureCavasHeight = 0;\n    for (var m = 0; m < csData.length; m++) {\n      // eslint-disable-next-line\n      var val = csData[m];\n      if (minimumX === -1) {\n        // eslint-disable-next-line\n        minimumX = parseFloat(val['x'].toString());\n        // eslint-disable-next-line\n        maximumX = parseFloat(val['x'].toString());\n        // eslint-disable-next-line\n        minimumY = parseFloat(val['y'].toString());\n        // eslint-disable-next-line\n        maximumY = parseFloat(val['y'].toString());\n      } else {\n        // eslint-disable-next-line\n        var point1 = parseFloat(val['x'].toString());\n        // eslint-disable-next-line\n        var point2 = parseFloat(val['y'].toString());\n        if (minimumX >= point1) {\n          minimumX = point1;\n        }\n        if (minimumY >= point2) {\n          minimumY = point2;\n        }\n        if (maximumX <= point1) {\n          maximumX = point1;\n        }\n        if (maximumY <= point2) {\n          maximumY = point2;\n        }\n      }\n    }\n    signatureCavasWidth = signatureCanvas ? signatureCanvas.clientWidth : 650;\n    signatureCavasHeight = signatureCanvas ? signatureCanvas.clientHeight : 300;\n    var newdifferenceX = maximumX - minimumX;\n    var newdifferenceY = maximumY - minimumY;\n    var signBounds = this.calculateSignatureBounds(signatureCavasWidth, signatureCavasHeight, newdifferenceX, newdifferenceY, isSignature, currentField, currentData);\n    if (isSignature) {\n      var zoomvalue = this.pdfViewerBase.getZoomFactor();\n      var pageIndex = this.pdfViewerBase.currentPageNumber - 1;\n      var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + pageIndex);\n      var currentLeft = (parseFloat(pageDiv.style.width) / 2 - signBounds.currentWidth / 2) / zoomvalue;\n      // eslint-disable-next-line max-len\n      var currentTop = (parseFloat(pageDiv.style.height) / 2 - signBounds.currentHeight / 2) / zoomvalue;\n      return {\n        x: currentLeft,\n        y: currentTop,\n        width: signBounds.currentWidth,\n        height: signBounds.currentHeight\n      };\n    } else {\n      return {\n        left: signBounds.currentLeftDiff,\n        top: signBounds.currentTopDiff,\n        width: signBounds.currentWidth,\n        height: signBounds.currentHeight\n      };\n    }\n  };\n  Signature.prototype.calculateSignatureBounds = function (signatureCavasWidth, signatureCavasHeight, newdifferenceX, newdifferenceY, isSignature, currentField, currentData) {\n    var ratioX = newdifferenceX / signatureCavasWidth;\n    var ratioY = newdifferenceY / signatureCavasHeight;\n    var zoomvalue = this.pdfViewerBase.getZoomFactor();\n    var currentWidth = 0;\n    var currentHeight = 0;\n    var isSignatureStretched = false;\n    var isHeightStretched = false;\n    var leftDifference = 0;\n    var topDifference = 0;\n    if (isSignature) {\n      currentWidth = this.pdfViewer.handWrittenSignatureSettings.width ? this.pdfViewer.handWrittenSignatureSettings.width : 150;\n      currentHeight = this.pdfViewer.handWrittenSignatureSettings.height ? this.pdfViewer.handWrittenSignatureSettings.height : 100;\n    } else {\n      var fieldWidth = currentField ? currentField.style.width === '100%' ? currentField.clientWidth : parseFloat(currentField.style.width) : this.ConvertPointToPixel(currentData.LineBounds.Width);\n      var fieldHeight = currentField ? currentField.style.height === '100%' ? currentField.clientHeight : parseFloat(currentField.style.height) : this.ConvertPointToPixel(currentData.LineBounds.Height);\n      var fieldWidthRatio = fieldWidth / fieldHeight;\n      var fieldHeightRatio = fieldHeight / fieldWidth;\n      var canvasWidthRatio = signatureCavasWidth / signatureCavasHeight;\n      var canvasHeightRatio = signatureCavasHeight / signatureCavasWidth;\n      var fieldRotation = currentField ? currentField.offsetParent.offsetParent.style.transform ? currentField.offsetParent.offsetParent.style.transform : currentField.style.transform : currentData.RotationAngle;\n      if (fieldWidthRatio > canvasWidthRatio || fieldHeightRatio > canvasWidthRatio || Math.abs(fieldWidthRatio - fieldHeightRatio) <= 1) {\n        var ratioDifference = 0;\n        if (fieldHeightRatio > canvasWidthRatio || Math.abs(fieldWidthRatio - fieldHeightRatio) <= 1) {\n          isHeightStretched = true;\n          ratioDifference = fieldHeightRatio / canvasHeightRatio;\n        } else {\n          isSignatureStretched = true;\n          ratioDifference = fieldWidthRatio / canvasWidthRatio;\n        }\n        if (fieldRotation === 'rotate(90deg)' || fieldRotation === 'rotate(270deg)') {\n          // eslint-disable-next-line\n          currentWidth = fieldHeight / zoomvalue;\n          // eslint-disable-next-line\n          currentHeight = fieldWidth / zoomvalue;\n        } else {\n          if (isSignatureStretched) {\n            // eslint-disable-next-line\n            leftDifference = fieldWidth / zoomvalue;\n            // eslint-disable-next-line\n            currentWidth = fieldWidth / ratioDifference / zoomvalue;\n            // eslint-disable-next-line\n            currentHeight = fieldHeight / zoomvalue;\n          }\n          if (isHeightStretched) {\n            // eslint-disable-next-line\n            topDifference = fieldHeight / zoomvalue;\n            // eslint-disable-next-line\n            currentWidth = fieldWidth / zoomvalue;\n            // eslint-disable-next-line\n            currentHeight = fieldHeight / ratioDifference / zoomvalue;\n          }\n        }\n      } else {\n        if (fieldRotation === 'rotate(90deg)' || fieldRotation === 'rotate(270deg)') {\n          // eslint-disable-next-line\n          currentWidth = fieldHeight / zoomvalue;\n          // eslint-disable-next-line\n          currentHeight = fieldWidth / zoomvalue;\n        } else {\n          // eslint-disable-next-line\n          currentWidth = fieldWidth / zoomvalue;\n          // eslint-disable-next-line\n          currentHeight = fieldHeight / zoomvalue;\n        }\n      }\n    }\n    var currentLeftDiff = (signatureCavasWidth - newdifferenceX) / 2;\n    var currentTopDiff = (signatureCavasHeight - newdifferenceY) / 2;\n    if (isSignatureStretched) {\n      currentLeftDiff = currentLeftDiff / signatureCavasWidth * leftDifference;\n      var leftValueDiff = (leftDifference * ratioX - currentWidth * ratioX) / 2;\n      currentLeftDiff = currentLeftDiff + leftValueDiff;\n      currentTopDiff = currentTopDiff / signatureCavasHeight * currentHeight;\n    } else if (isHeightStretched) {\n      currentLeftDiff = currentLeftDiff / signatureCavasWidth * currentWidth;\n      currentTopDiff = currentTopDiff / signatureCavasHeight * topDifference;\n      var topValueDiff = (topDifference * ratioY - currentHeight * ratioY) / 2;\n      currentTopDiff = currentTopDiff + topValueDiff;\n    } else {\n      currentLeftDiff = currentLeftDiff / signatureCavasWidth * currentWidth;\n      currentTopDiff = currentTopDiff / signatureCavasHeight * currentHeight;\n    }\n    if (this.pdfViewer.signatureFitMode !== \"Stretch\") {\n      currentWidth = currentWidth * ratioX;\n      currentHeight = currentHeight * ratioY;\n    }\n    return {\n      currentLeftDiff: currentLeftDiff,\n      currentTopDiff: currentTopDiff,\n      currentWidth: currentWidth,\n      currentHeight: currentHeight\n    };\n  };\n  /**\n   * @private\n   */\n  Signature.prototype.setFocus = function (id) {\n    if (!id) {\n      if (this.currentTarget) {\n        document.getElementById(this.currentTarget.id).focus();\n      }\n    } else {\n      this.removeFocus();\n      var signatureElement = document.getElementById(id);\n      signatureElement.classList.add('e-pv-signature-focus');\n    }\n  };\n  /**\n  * @private\n  */\n  Signature.prototype.removeFocus = function () {\n    if (this.signatureFieldCollection) {\n      // eslint-disable-next-line\n      var signatureFields = this.signatureFieldCollection;\n      if (signatureFields.length === 0) {\n        signatureFields = this.getSignField();\n      }\n      for (var i = 0; i < this.signatureFieldCollection.length; i++) {\n        var signatureFieldId = this.pdfViewer.formDesignerModule ? this.signatureFieldCollection[parseInt(i.toString(), 10)].FormField.uniqueID : this.signatureFieldCollection[parseInt(i.toString(), 10)].uniqueID;\n        var signatureElement = document.getElementById(signatureFieldId);\n        if (signatureElement) {\n          signatureElement.classList.remove('e-pv-signature-focus');\n        }\n      }\n      if (this.pdfViewer.formFieldsModule.currentTarget) {\n        this.pdfViewer.formFieldsModule.currentTarget.classList.remove('e-pv-signature-focus');\n      }\n    }\n  };\n  // eslint-disable-next-line\n  Signature.prototype.getSignField = function () {\n    if (this.pdfViewer.formDesignerModule) {\n      this.signatureFieldCollection = this.pdfViewer.formDesignerModule.getFormDesignerSignField(this.signatureFieldCollection);\n    } else {\n      this.signatureFieldCollection = this.getFormFieldSignField();\n    }\n    return this.signatureFieldCollection;\n  };\n  Signature.prototype.getFormFieldSignField = function () {\n    // eslint-disable-next-line\n    var data = this.pdfViewerBase.getItemFromSessionStorage('_formfields');\n    // eslint-disable-next-line\n    var currentData;\n    if (data) {\n      // eslint-disable-next-line\n      var formFieldsData = JSON.parse(data);\n      for (var i = 0; i < formFieldsData.length; i++) {\n        currentData = formFieldsData[parseInt(i.toString(), 10)];\n        if (currentData.Name === 'SignatureField' || currentData.Name === 'InitialField') {\n          // eslint-disable-next-line\n          currentData['uniqueID'] = this.pdfViewer.element.id + 'input_' + currentData.PageIndex + '_' + i;\n          this.signatureFieldCollection.push(formFieldsData[parseInt(i.toString(), 10)]);\n        }\n      }\n    }\n    return this.signatureFieldCollection;\n  };\n  Signature.prototype.checkSaveFiledSign = function (initialField, saveSign) {\n    if (initialField) {\n      this.isInitialFiledSaveSignature = saveSign;\n    } else {\n      this.isSignatureFieldsSaveSignature = saveSign;\n    }\n  };\n  Signature.prototype.addSignatureInPage = function () {\n    if (this.signaturetype === 'Draw') {\n      this.addSignature();\n    } else if (this.signaturetype === 'Type') {\n      this.typeAddSignature();\n    } else {\n      this.imageAddSignature();\n    }\n    this.drawOutputString = '';\n    this.imageOutputString = '';\n  };\n  Signature.prototype.typeAddSignature = function (type) {\n    if (this.pdfViewerBase.isToolbarSignClicked) {\n      var zoomvalue = this.pdfViewerBase.getZoomFactor();\n      // eslint-disable-next-line\n      var annot = null;\n      var annotationName = this.pdfViewer.annotation.createGUID();\n      this.pdfViewerBase.currentSignatureAnnot = null;\n      this.pdfViewerBase.isSignatureAdded = true;\n      var pageIndex = this.pdfViewerBase.currentPageNumber - 1;\n      var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + pageIndex);\n      var thickness = this.pdfViewer.handWrittenSignatureSettings.thickness ? this.pdfViewer.handWrittenSignatureSettings.thickness : 1;\n      var opacity = this.pdfViewer.handWrittenSignatureSettings.opacity ? this.pdfViewer.handWrittenSignatureSettings.opacity : 1;\n      var strokeColor = this.pdfViewer.handWrittenSignatureSettings.strokeColor ? this.pdfViewer.handWrittenSignatureSettings.strokeColor : '#000000';\n      var fontSize = 16;\n      var currentLeft = 0;\n      var currentTop = 0;\n      var currentHeight = 65;\n      var currentWidth = 200;\n      if (!isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.height) && this.pdfViewer.signatureFitMode === \"Stretch\") {\n        currentHeight = this.pdfViewer.handWrittenSignatureSettings.height;\n      }\n      if (!isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.width) && this.pdfViewer.signatureFitMode === \"Stretch\") {\n        currentWidth = this.pdfViewer.handWrittenSignatureSettings.width;\n      }\n      currentLeft = (parseFloat(pageDiv.style.width) / 2 - currentWidth / 2) / zoomvalue;\n      currentTop = (parseFloat(pageDiv.style.height) / 2 - currentHeight / 2) / zoomvalue;\n      var zoomFactor = this.pdfViewerBase.getZoomFactor();\n      if (!this.signtypevalue) {\n        this.updateSignatureTypeValue(true);\n      }\n      var inputValue = this.signtypevalue;\n      annot = {\n        // eslint-disable-next-line max-len\n        id: 'Typesign' + this.pdfViewerBase.signatureCount,\n        bounds: {\n          left: currentLeft / zoomFactor,\n          top: currentTop / zoomFactor,\n          x: currentLeft / zoomFactor,\n          // eslint-disable-next-line max-len\n          y: currentTop / zoomFactor,\n          width: currentWidth,\n          height: currentHeight\n        },\n        pageIndex: pageIndex,\n        dynamicText: inputValue,\n        data: this.pdfViewerBase.signatureModule.outputString,\n        shapeAnnotationType: 'SignatureText',\n        opacity: opacity,\n        strokeColor: strokeColor,\n        thickness: thickness,\n        fontSize: fontSize,\n        fontFamily: this.fontName,\n        signatureName: annotationName\n      };\n      this.pdfViewerBase.currentSignatureAnnot = annot;\n      // eslint-disable-next-line\n      var checkbox = void 0;\n      if (isBlazor()) {\n        checkbox = document.getElementById(this.pdfViewer.element.id + '_signatureCheckBox');\n      } else {\n        checkbox = document.getElementById('checkbox1');\n      }\n      if (checkbox && checkbox.checked) {\n        this.addSignatureCollection();\n      }\n      this.signtypevalue = '';\n      this.hideSignaturePanel();\n      this.pdfViewerBase.isToolbarSignClicked = false;\n    } else {\n      var checkbox = document.getElementById('checkbox');\n      var typeCheckbox = document.getElementById('checkbox1');\n      var imageCheckbox = document.getElementById('checkbox2');\n      var isSignatureAdded = false;\n      if (!isSignatureAdded) {\n        this.saveDrawSignature(checkbox);\n        this.saveUploadSignature(imageCheckbox);\n        var canvas = document.getElementById(this.pdfViewer.element.id + '_signatureCanvas_');\n        this.saveTypeString = canvas.toDataURL();\n        this.updateSignatureTypeValue();\n        if (typeCheckbox && typeCheckbox.checked) {\n          if (!this.pdfViewerBase.isInitialField) {\n            this.isSaveSignature = true;\n            this.signatureImageString = this.saveTypeString;\n            this.saveSignatureTypeString = this.textValue;\n            this.issaveTypeSignature = true;\n          } else {\n            this.isSaveInitial = true;\n            this.initialImageString = this.saveTypeString;\n            this.saveInitialTypeString = this.textValue;\n            this.issaveTypeInitial = true;\n          }\n        } else {\n          if (!this.pdfViewerBase.isInitialField) {\n            this.isSaveSignature = false;\n            this.saveSignatureTypeString = '';\n            this.issaveTypeSignature = false;\n          } else {\n            this.isSaveInitial = false;\n            this.saveInitialTypeString = '';\n            this.issaveTypeInitial = false;\n          }\n        }\n        if (!this.pdfViewerBase.isInitialField) {\n          this.signatureTypeString = this.saveTypeString;\n        } else {\n          this.initialTypeString = this.saveTypeString;\n        }\n        this.pdfViewer.formFieldsModule.drawSignature('Type', this.textValue, this.pdfViewerBase.currentTarget);\n        isSignatureAdded = true;\n        this.hideSignaturePanel();\n      }\n    }\n  };\n  Signature.prototype.imageAddSignature = function (type) {\n    if (this.pdfViewerBase.isToolbarSignClicked) {\n      var zoomvalue = this.pdfViewerBase.getZoomFactor();\n      // eslint-disable-next-line\n      var annot = null;\n      var annotationName = this.pdfViewer.annotation.createGUID();\n      this.pdfViewerBase.currentSignatureAnnot = null;\n      this.pdfViewerBase.isSignatureAdded = true;\n      var pageIndex = this.pdfViewerBase.currentPageNumber - 1;\n      var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + pageIndex);\n      var thickness = this.pdfViewer.handWrittenSignatureSettings.thickness ? this.pdfViewer.handWrittenSignatureSettings.thickness : 1;\n      var opacity = this.pdfViewer.handWrittenSignatureSettings.opacity ? this.pdfViewer.handWrittenSignatureSettings.opacity : 1;\n      var strokeColor = this.pdfViewer.handWrittenSignatureSettings.strokeColor ? this.pdfViewer.handWrittenSignatureSettings.strokeColor : '#000000';\n      var fontSize = 16;\n      var currentLeft = 0;\n      var currentTop = 0;\n      var standardImageRatio = 100;\n      var currentHeight = 0;\n      var currentWidth = 0;\n      // eslint-disable-next-line max-len\n      if (!isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.height) && this.pdfViewer.signatureFitMode === \"Stretch\") {\n        currentHeight = this.pdfViewer.handWrittenSignatureSettings.height;\n      } else if (this.signatureImageHeight >= this.signatureImageWidth) {\n        currentHeight = this.signatureImageHeight / this.signatureImageHeight * standardImageRatio;\n      } else {\n        currentHeight = this.signatureImageHeight / this.signatureImageWidth * standardImageRatio;\n      }\n      if (!isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.width) && this.pdfViewer.signatureFitMode === \"Stretch\") {\n        currentWidth = this.pdfViewer.handWrittenSignatureSettings.width;\n      } else if (this.signatureImageHeight >= this.signatureImageWidth) {\n        currentWidth = this.signatureImageWidth / this.signatureImageHeight * standardImageRatio;\n      } else {\n        currentWidth = this.signatureImageWidth / this.signatureImageWidth * standardImageRatio;\n      }\n      currentLeft = (parseFloat(pageDiv.style.width) / 2 - currentWidth / 2) / zoomvalue;\n      currentTop = (parseFloat(pageDiv.style.height) / 2 - currentHeight / 2) / zoomvalue;\n      var zoomFactor = this.pdfViewerBase.getZoomFactor();\n      var inputValue = this.signtypevalue;\n      annot = {\n        // eslint-disable-next-line max-len\n        id: 'Typesign' + this.pdfViewerBase.signatureCount,\n        bounds: {\n          left: currentLeft / zoomFactor,\n          top: currentTop / zoomFactor,\n          x: currentLeft / zoomFactor,\n          // eslint-disable-next-line max-len\n          y: currentTop / zoomFactor,\n          width: currentWidth,\n          height: currentHeight\n        },\n        pageIndex: pageIndex,\n        dynamicText: inputValue,\n        data: this.pdfViewerBase.signatureModule.outputString,\n        shapeAnnotationType: 'SignatureImage',\n        opacity: opacity,\n        strokeColor: strokeColor,\n        thickness: thickness,\n        fontSize: fontSize,\n        fontFamily: this.fontName,\n        signatureName: annotationName\n      };\n      this.pdfViewerBase.currentSignatureAnnot = annot;\n      // eslint-disable-next-line\n      var checkbox = void 0;\n      if (isBlazor()) {\n        checkbox = document.getElementById(this.pdfViewer.element.id + '_signatureCheckBox');\n      } else {\n        checkbox = document.getElementById('checkbox2');\n      }\n      if (checkbox && checkbox.checked) {\n        this.addSignatureCollection();\n      }\n      this.hideSignaturePanel();\n      this.pdfViewerBase.isToolbarSignClicked = false;\n    } else {\n      var checkbox = document.getElementById('checkbox');\n      var typeCheckbox = document.getElementById('checkbox1');\n      var imageCheckbox = document.getElementById('checkbox2');\n      var isSignatureAdded = false;\n      if (!isSignatureAdded) {\n        this.saveDrawSignature(checkbox);\n        this.saveTypeSignature(typeCheckbox);\n        var canvas = document.getElementById(this.pdfViewer.element.id + '_signatureCanvas_');\n        this.saveUploadString = canvas.toDataURL();\n        if (imageCheckbox && imageCheckbox.checked) {\n          if (!this.pdfViewerBase.isInitialField) {\n            this.isSaveSignature = true;\n            this.signatureImageString = this.saveUploadString;\n            this.saveSignatureUploadString = this.outputString;\n            this.issaveImageSignature = true;\n          } else {\n            this.isSaveInitial = true;\n            this.initialImageString = this.saveUploadString;\n            this.saveInitialUploadString = this.outputString;\n            this.issaveImageInitial = true;\n          }\n        } else {\n          if (!this.pdfViewerBase.isInitialField) {\n            this.isSaveSignature = false;\n            this.saveSignatureUploadString = '';\n            this.issaveImageSignature = false;\n          } else {\n            this.isSaveInitial = false;\n            this.saveInitialUploadString = '';\n            this.issaveImageInitial = false;\n          }\n        }\n        if (!this.pdfViewerBase.isInitialField) {\n          this.signatureUploadString = this.saveUploadString;\n        } else {\n          this.initialUploadString = this.saveUploadString;\n        }\n        this.pdfViewer.formFieldsModule.drawSignature('Image', '', this.pdfViewerBase.currentTarget);\n        isSignatureAdded = true;\n        this.hideSignaturePanel();\n      }\n    }\n  };\n  Signature.prototype.saveDrawSignature = function (checkbox) {\n    if (checkbox) {\n      if (checkbox.checked) {\n        if (this.drawOutputString !== '') {\n          var canvas = document.getElementById(this.pdfViewer.element.id + '_signatureCanvas_');\n          this.saveImageString = canvas.toDataURL();\n          if (!this.pdfViewerBase.isInitialField) {\n            this.saveSignatureString = this.drawOutputString;\n            this.signatureDrawString = this.saveImageString;\n          } else {\n            this.saveInitialString = this.drawOutputString;\n            this.initialDrawString = this.saveImageString;\n          }\n          this.checkSaveFiledSign(this.pdfViewerBase.isInitialField, true);\n        }\n      } else {\n        if (!this.pdfViewerBase.isInitialField) {\n          this.saveSignatureString = '';\n        } else {\n          this.saveInitialString = '';\n        }\n        this.checkSaveFiledSign(this.pdfViewerBase.isInitialField, false);\n      }\n    }\n  };\n  Signature.prototype.saveTypeSignature = function (typeCheckbox) {\n    if (typeCheckbox) {\n      if (typeCheckbox.checked) {\n        this.updateSignatureTypeValue();\n        if (this.textValue !== '') {\n          if (!this.pdfViewerBase.isInitialField) {\n            this.issaveTypeSignature = true;\n            this.saveSignatureTypeString = this.textValue;\n          } else {\n            this.issaveTypeInitial = true;\n            this.saveInitialTypeString = this.textValue;\n          }\n        }\n      } else {\n        if (!this.pdfViewerBase.isInitialField) {\n          this.saveSignatureTypeString = '';\n          this.issaveTypeSignature = false;\n        } else {\n          this.saveInitialTypeString = '';\n          this.issaveTypeInitial = false;\n        }\n      }\n    }\n  };\n  Signature.prototype.saveUploadSignature = function (imageCheckbox) {\n    if (imageCheckbox) {\n      if (imageCheckbox.checked) {\n        var imageCanvas = document.getElementById(this.pdfViewer.element.id + '_signatureuploadCanvas_');\n        var uploadString = imageCanvas.toDataURL();\n        var imageString = document.getElementById(this.pdfViewer.element.id + '_e-pv-upload-button').style.visibility === 'hidden' ? uploadString : '';\n        if (imageString !== '') {\n          if (!this.pdfViewerBase.isInitialField) {\n            this.issaveImageSignature = true;\n            this.saveSignatureUploadString = imageString;\n          } else {\n            this.issaveImageInitial = true;\n            this.saveInitialUploadString = imageString;\n          }\n        }\n      } else {\n        if (!this.pdfViewerBase.isInitialField) {\n          this.saveSignatureUploadString = '';\n          this.issaveImageSignature = false;\n        } else {\n          this.saveInitialUploadString = '';\n          this.issaveImageInitial = false;\n        }\n      }\n    }\n  };\n  Signature.prototype.updateSignatureTypeValue = function (isType) {\n    // eslint-disable-next-line\n    var fontElements = document.querySelectorAll('.e-pv-font-sign');\n    if (fontElements) {\n      for (var j = 0; j < fontElements.length; j++) {\n        if (fontElements[parseInt(j.toString(), 10)] && fontElements[parseInt(j.toString(), 10)].style.borderColor === 'red') {\n          if (this.pdfViewerBase.isToolbarSignClicked) {\n            if (isType) {\n              this.signtypevalue = fontElements[parseInt(j.toString(), 10)].textContent;\n              this.outputString = fontElements[parseInt(j.toString(), 10)].textContent;\n            } else {\n              this.outputString = fontElements[parseInt(j.toString(), 10)].textContent;\n            }\n          } else {\n            if (isType) {\n              this.signtypevalue = fontElements[parseInt(j.toString(), 10)].textContent;\n              this.textValue = fontElements[parseInt(j.toString(), 10)].textContent;\n            } else {\n              this.textValue = fontElements[parseInt(j.toString(), 10)].textContent;\n            }\n          }\n          try {\n            this.fontName = JSON.parse(fontElements[parseInt(j.toString(), 10)].style.fontFamily);\n          } catch (e) {\n            this.fontName = fontElements[parseInt(j.toString(), 10)].style.fontFamily;\n          }\n        }\n      }\n    }\n  };\n  /**\n   * @private\n   * @returns {void}\n   */\n  Signature.prototype.hideSignaturePanel = function () {\n    if (this.signatureDialog) {\n      this.signatureDialog.hide();\n    }\n  };\n  Signature.prototype.bindTypeSignatureClickEvent = function () {\n    if (isBlazor()) {\n      for (var i = 0; i < 4; i++) {\n        // eslint-disable-next-line\n        var fontElement = document.querySelector('#' + this.pdfViewer.element.id + '_font_signature' + i);\n        if (fontElement) {\n          fontElement.addEventListener('click', this.typeSignatureclicked.bind(this));\n        }\n      }\n    }\n  };\n  Signature.prototype.bindDrawSignatureClickEvent = function () {\n    // eslint-disable-next-line\n    var canvas = document.getElementById(this.pdfViewer.element.id + '_signatureCanvas_');\n    if (canvas) {\n      canvas.addEventListener('mousedown', this.signaturePanelMouseDown.bind(this));\n      canvas.addEventListener('mousemove', this.signaturePanelMouseMove.bind(this));\n      canvas.addEventListener('mouseup', this.signaturePanelMouseUp.bind(this));\n      canvas.addEventListener('mouseleave', this.signaturePanelMouseUp.bind(this));\n      canvas.addEventListener('touchstart', this.signaturePanelMouseDown.bind(this));\n      canvas.addEventListener('touchmove', this.signaturePanelMouseMove.bind(this));\n      canvas.addEventListener('touchend', this.signaturePanelMouseUp.bind(this));\n    }\n  };\n  // eslint-disable-next-line\n  Signature.prototype.typeSignatureclicked = function (event) {\n    var eventTarget = event.target;\n    if (eventTarget) {\n      for (var i = 0; i < 4; i++) {\n        // eslint-disable-next-line\n        var fontElement = document.querySelector('#' + this.pdfViewer.element.id + '_font_signature' + i);\n        if (fontElement) {\n          fontElement.style.borderColor = '';\n        }\n      }\n      eventTarget.style.borderColor = 'red';\n      this.outputString = eventTarget.textContent;\n      try {\n        this.fontName = JSON.parse(eventTarget.style.fontFamily);\n      } catch (e) {\n        this.fontName = eventTarget.style.fontFamily;\n      }\n      this.enableCreateButton(false);\n    }\n  };\n  // eslint-disable-next-line\n  Signature.prototype.createSignatureCanvas = function () {\n    // eslint-disable-next-line\n    var previousField = document.getElementById(this.pdfViewer.element.id + '_signatureCanvas_');\n    // eslint-disable-next-line\n    var field = document.getElementById(this.pdfViewer.element.id + 'Signature_appearance');\n    if (previousField) {\n      previousField.remove();\n    }\n    if (field) {\n      field.remove();\n    }\n    // eslint-disable-next-line max-len\n    var appearanceDiv = createElement('div', {\n      id: this.pdfViewer.element.id + 'Signature_appearance',\n      className: 'e-pv-signature-apperance',\n      styles: 'margin-top:30px'\n    });\n    // eslint-disable-next-line max-len\n    var canvas = createElement('canvas', {\n      id: this.pdfViewer.element.id + '_signatureCanvas_',\n      className: 'e-pv-signature-canvas'\n    });\n    if (this.pdfViewer.element.offsetWidth > 750) {\n      canvas.width = 714;\n    } else {\n      canvas.width = this.pdfViewer.element.offsetWidth - 35;\n    }\n    canvas.classList.add('e-pv-canvas-signature');\n    canvas.height = 305;\n    canvas.style.height = '305px';\n    canvas.style.border = '1px dotted #bdbdbd';\n    canvas.style.backgroundColor = 'white';\n    canvas.style.boxSizing = 'border-box';\n    canvas.style.borderRadius = '2px';\n    canvas.addEventListener('mousedown', this.signaturePanelMouseDown.bind(this));\n    canvas.addEventListener('mousemove', this.signaturePanelMouseMove.bind(this));\n    canvas.addEventListener('mouseup', this.signaturePanelMouseUp.bind(this));\n    canvas.addEventListener('mouseleave', this.signaturePanelMouseLeave.bind(this));\n    canvas.addEventListener('touchstart', this.signaturePanelMouseDown.bind(this));\n    canvas.addEventListener('touchmove', this.signaturePanelMouseMove.bind(this));\n    canvas.addEventListener('touchend', this.signaturePanelMouseUp.bind(this));\n    appearanceDiv.appendChild(canvas);\n    // eslint-disable-next-line\n    var checkBoxObj;\n    // eslint-disable-next-line\n    var input;\n    var saveCheckBoxContent;\n    if (this.pdfViewerBase.isToolbarSignClicked && !this.pdfViewerBase.isInitialField) {\n      saveCheckBoxContent = this.pdfViewer.localeObj.getConstant('Save Signature');\n    } else {\n      saveCheckBoxContent = this.pdfViewerBase.isInitialField ? this.pdfViewer.localeObj.getConstant('Save Initial') : this.pdfViewer.localeObj.getConstant('Save Signature');\n    }\n    if (!this.pdfViewer.hideSaveSignature) {\n      // eslint-disable-next-line\n      input = document.createElement('input');\n      input.type = 'checkbox';\n      input.id = 'checkbox';\n      appearanceDiv.appendChild(input);\n      checkBoxObj = new CheckBox({\n        label: saveCheckBoxContent,\n        disabled: false,\n        checked: false\n      });\n      checkBoxObj.appendTo(input);\n    }\n    if (!this.pdfViewerBase.isInitialField) {\n      this.isSaveSignature = this.saveSignatureCheckbox();\n    } else {\n      this.isSaveInitial = this.saveSignatureCheckbox();\n    }\n    if (this.isSaveSignature && !this.pdfViewerBase.isInitialField) {\n      checkBoxObj.checked = true;\n    } else if (this.isSaveInitial && this.pdfViewerBase.isInitialField) {\n      checkBoxObj.checked = true;\n    }\n    //if (!this.pdfViewerBase.isToolbarSignClicked) {\n    // eslint-disable-next-line\n    var typeDiv = createElement('div', {\n      id: this.pdfViewer.element.id + 'type_appearance',\n      className: 'e-pv-signature-apperance',\n      styles: 'margin-top:6px'\n    });\n    // eslint-disable-next-line\n    var inputText = document.createElement('input');\n    if (!this.pdfViewerBase.isInitialField && this.issaveTypeSignature && !this.pdfViewerBase.isToolbarSignClicked) {\n      inputText.value = this.drawSavedTypeSignature();\n    } else if (this.pdfViewerBase.isInitialField && this.issaveTypeInitial && !this.pdfViewerBase.isToolbarSignClicked) {\n      inputText.value = this.drawSavedTypeSignature();\n    }\n    inputText.type = 'text';\n    inputText.id = this.pdfViewer.element.id + '_e-pv-Signtext-box';\n    typeDiv.appendChild(inputText);\n    // eslint-disable-next-line\n    var inputobj = new TextBox({\n      placeholder: this.pdfViewer.localeObj.getConstant('Enter Signature as Name'),\n      floatLabelType: 'Auto'\n    });\n    inputobj.appendTo(inputText);\n    // eslint-disable-next-line\n    var fontDiv = createElement('div', {\n      id: this.pdfViewer.element.id + '_font_appearance',\n      className: 'e-pv-font-appearance-style'\n    });\n    fontDiv.classList.add('e-pv-canvas-signature');\n    fontDiv.style.height = '270px';\n    fontDiv.style.border = '1px dotted #bdbdbd';\n    fontDiv.style.boxSizing = 'border-box';\n    fontDiv.style.borderRadius = '2px';\n    fontDiv.style.backgroundColor = 'white';\n    fontDiv.style.color = 'black';\n    fontDiv.style.marginTop = '8px';\n    fontDiv.style.paddingRight = '0px';\n    typeDiv.appendChild(fontDiv);\n    input = document.createElement('input');\n    input.type = 'checkbox';\n    input.id = 'checkbox1';\n    typeDiv.appendChild(input);\n    checkBoxObj = new CheckBox({\n      label: saveCheckBoxContent,\n      disabled: false,\n      checked: false\n    });\n    checkBoxObj.appendTo(input);\n    if (this.issaveTypeSignature && !this.pdfViewerBase.isInitialField && !this.pdfViewerBase.isToolbarSignClicked) {\n      checkBoxObj.checked = true;\n    } else if (this.issaveTypeInitial && this.pdfViewerBase.isInitialField && !this.pdfViewerBase.isToolbarSignClicked) {\n      checkBoxObj.checked = true;\n    }\n    inputobj.addEventListener('input', this.renderSignatureText.bind(this));\n    this.enableCreateButton(true);\n    // eslint-disable-next-line\n    var tab = createElement('div', {\n      id: this.pdfViewer.element.id + 'Signature_tab'\n    });\n    var uploadDiv = createElement('div', {\n      id: this.pdfViewer.element.id + 'upload_appearance',\n      className: 'e-pv-signature-apperance',\n      styles: 'padding-top:30px'\n    });\n    // eslint-disable-next-line\n    var button = document.createElement('div');\n    button.id = this.pdfViewer.element.id + '_e-pv-upload-button';\n    uploadDiv.appendChild(button);\n    // eslint-disable-next-line\n    var uploadButton = new Button({\n      cssClass: 'e-pv-sign-upload',\n      content: this.pdfViewer.localeObj.getConstant('Browse Signature Image')\n    });\n    uploadButton.appendTo(button);\n    uploadButton.element.style.position = 'absolute';\n    // eslint-disable-next-line max-len\n    var uploadCanvas = createElement('canvas', {\n      id: this.pdfViewer.element.id + '_signatureuploadCanvas_',\n      className: 'e-pv-signature-uploadcanvas'\n    });\n    if (this.pdfViewer.element.offsetWidth > 750) {\n      uploadCanvas.width = 714;\n    } else {\n      uploadCanvas.width = this.pdfViewer.element.offsetWidth - 35;\n    }\n    uploadCanvas.classList.add('e-pv-canvas-signature');\n    uploadCanvas.height = 305;\n    uploadCanvas.style.height = '305px';\n    uploadButton.element.style.left = uploadCanvas.width / 2 - 50 + 'px';\n    uploadButton.element.style.top = parseFloat(uploadCanvas.style.height) / 2 + 20 + 'px';\n    uploadCanvas.style.border = '1px dotted #bdbdbd';\n    uploadCanvas.style.backgroundColor = 'white';\n    uploadCanvas.style.boxSizing = 'border-box';\n    uploadCanvas.style.borderRadius = '2px';\n    uploadCanvas.style.zIndex = '0';\n    var imageUploadString = '';\n    if (!this.pdfViewerBase.isInitialField && this.issaveImageSignature && !this.pdfViewerBase.isToolbarSignClicked) {\n      imageUploadString = this.drawSavedImageSignature();\n    } else if (this.pdfViewerBase.isInitialField && this.issaveImageInitial && !this.pdfViewerBase.isToolbarSignClicked) {\n      imageUploadString = this.drawSavedImageSignature();\n    }\n    if (imageUploadString !== '' && !this.pdfViewerBase.isToolbarSignClicked) {\n      this.clearUploadString = false;\n      var ctx_1 = uploadCanvas.getContext('2d');\n      var image_2 = new Image();\n      image_2.src = imageUploadString;\n      image_2.onload = function () {\n        ctx_1.drawImage(image_2, 0, 0, uploadCanvas.width, uploadCanvas.height);\n      };\n      uploadButton.element.style.display = 'hidden';\n    }\n    uploadDiv.appendChild(uploadCanvas);\n    input = document.createElement('input');\n    input.type = 'checkbox';\n    input.id = 'checkbox2';\n    uploadDiv.appendChild(input);\n    checkBoxObj = new CheckBox({\n      label: saveCheckBoxContent,\n      disabled: false,\n      checked: false\n    });\n    checkBoxObj.appendTo(input);\n    if (this.issaveImageSignature && !this.pdfViewerBase.isInitialField && !this.pdfViewerBase.isToolbarSignClicked) {\n      checkBoxObj.checked = true;\n    } else if (this.issaveImageInitial && this.pdfViewerBase.isInitialField && !this.pdfViewerBase.isToolbarSignClicked) {\n      checkBoxObj.checked = true;\n    }\n    button.addEventListener('click', this.uploadSignatureImage.bind(this));\n    // eslint-disable-next-line max-len\n    this.signfontStyle = [{\n      FontName: 'Helvetica'\n    }, {\n      FontName: 'Times New Roman'\n    }, {\n      FontName: 'Courier'\n    }, {\n      FontName: 'Symbol'\n    }];\n    // eslint-disable-next-line\n    var fontSignature = [];\n    if (this.pdfViewerBase.isToolbarSignClicked && !isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.typeSignatureFonts)) {\n      for (var j = 0; j < 4; j++) {\n        if (!isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.typeSignatureFonts[parseInt(j.toString(), 10)])) {\n          this.signfontStyle[parseInt(j.toString(), 10)].FontName = this.pdfViewer.handWrittenSignatureSettings.typeSignatureFonts[parseInt(j.toString(), 10)];\n        }\n      }\n    }\n    for (var i = 0; i < this.signfontStyle.length; i++) {\n      fontSignature[parseInt(i.toString(), 10)] = document.createElement('div');\n      fontSignature[parseInt(i.toString(), 10)].id = '_font_signature' + i + '';\n      fontSignature[parseInt(i.toString(), 10)].classList.add('e-pv-font-sign');\n    }\n    this.fontsign = fontSignature;\n    // eslint-disable-next-line\n    var proxy = this;\n    var items = [];\n    if (this.pdfViewerBase.isToolbarSignClicked) {\n      if (this.pdfViewerBase.isInitialField) {\n        items = this.showHideSignatureTab((this.pdfViewer.handWrittenSignatureSettings.initialDialogSettings ? this.pdfViewer.handWrittenSignatureSettings.initialDialogSettings : this.pdfViewer.initialDialogSettings) && (this.pdfViewer.handWrittenSignatureSettings.initialDialogSettings ? this.pdfViewer.handWrittenSignatureSettings.initialDialogSettings.displayMode : this.pdfViewer.initialDialogSettings.displayMode), appearanceDiv, typeDiv, uploadDiv);\n      } else {\n        items = this.showHideSignatureTab((this.pdfViewer.handWrittenSignatureSettings.signatureDialogSettings ? this.pdfViewer.handWrittenSignatureSettings.signatureDialogSettings : this.pdfViewer.signatureDialogSettings) && (this.pdfViewer.handWrittenSignatureSettings.signatureDialogSettings ? this.pdfViewer.handWrittenSignatureSettings.signatureDialogSettings.displayMode : this.pdfViewer.signatureDialogSettings.displayMode), appearanceDiv, typeDiv, uploadDiv);\n      }\n    } else {\n      if (this.pdfViewerBase.isInitialField) {\n        items = this.showHideSignatureTab(this.pdfViewer.initialFieldSettings.initialDialogSettings ? this.pdfViewer.initialFieldSettings.initialDialogSettings.displayMode : 7, appearanceDiv, typeDiv, uploadDiv);\n      } else {\n        items = this.showHideSignatureTab(this.pdfViewer.signatureFieldSettings.signatureDialogSettings ? this.pdfViewer.signatureFieldSettings.signatureDialogSettings.displayMode : 7, appearanceDiv, typeDiv, uploadDiv);\n      }\n    }\n    // eslint-disable-next-line\n    this.tabObj = new Tab({\n      selected: function (args) {\n        proxy.handleSelectEvent(args);\n      },\n      selecting: function (args) {\n        proxy.select(args);\n      },\n      items: items\n    });\n    this.tabObj.appendTo(tab);\n    if (items[0].header.label === 'DRAW') {\n      this.signaturetype = 'Draw';\n    } else if (items[0].header.label === 'TYPE') {\n      this.signaturetype = 'Type';\n    } else {\n      this.signaturetype = 'Image';\n    }\n    return tab;\n    // } else {\n    //     return appearanceDiv;\n    // }\n  };\n  Signature.prototype.handleSelectEvent = function (e) {\n    // eslint-disable-next-line\n    var headerText = '';\n    var maximumWidth = 750;\n    var tabInstance = document.getElementById(this.pdfViewer.element.id + 'Signature_tab').ej2_instances[0];\n    if (tabInstance) {\n      if (tabInstance.items.length > 0) {\n        for (var i = 0; i < tabInstance.items.length; i++) {\n          var headerValue = tabInstance.items[parseInt(i.toString(), 10)].header.text;\n          if (headerValue === e.selectedItem.textContent) {\n            headerText = tabInstance.items[parseInt(i.toString(), 10)].header.label;\n          }\n        }\n      }\n    }\n    this.clearSignatureCanvas(e);\n    // eslint-disable-next-line\n    if (headerText.toLocaleLowerCase() === 'draw') {\n      this.signaturetype = 'Draw';\n      this.enableCreateSignatureButton();\n      var drawCheckbox = document.getElementById(\"checkbox\");\n      this.hideSignatureCheckbox(drawCheckbox);\n    } else if (headerText.toLocaleLowerCase() === 'type') {\n      var canvas = document.getElementById(this.pdfViewer.element.id + '_signatureCanvas_');\n      this.drawSignatureDataUrl = canvas.toDataURL();\n      this.updateSignatureTypeValue();\n      this.signaturetype = 'Type';\n      this.enableCreateSignatureButton();\n      var typeCheckbox = document.getElementById(\"checkbox1\");\n      this.hideSignatureCheckbox(typeCheckbox);\n      var textbox = document.getElementById(this.pdfViewer.element.id + '_e-pv-Signtext-box');\n      if (!this.pdfViewerBase.isInitialField && this.saveSignatureTypeString !== '' && textbox.value !== '' && !this.pdfViewerBase.isToolbarSignClicked) {\n        this.renderSignatureText();\n      } else if (this.pdfViewerBase.isInitialField && this.saveInitialTypeString !== '' && textbox.value !== '' && !this.pdfViewerBase.isToolbarSignClicked) {\n        this.renderSignatureText();\n      }\n    } else if (headerText.toLocaleLowerCase() === 'upload') {\n      var canvas = document.getElementById(this.pdfViewer.element.id + '_signatureCanvas_');\n      this.drawSignatureDataUrl = canvas.toDataURL();\n      this.signaturetype = 'Image';\n      this.enableCreateSignatureButton();\n      var imageCheckbox = document.getElementById(\"checkbox2\");\n      this.hideSignatureCheckbox(imageCheckbox);\n      var signbutton = document.getElementById(this.pdfViewer.element.id + '_e-pv-upload-button');\n      if (this.saveSignatureUploadString !== \"\" && !this.pdfViewerBase.isInitialField && !this.clearUploadString && !this.pdfViewerBase.isToolbarSignClicked) {\n        this.enableCreateButton(false);\n        signbutton.style.visibility = 'hidden';\n        this.outputString = this.saveSignatureUploadString;\n      }\n      if (this.saveInitialUploadString !== \"\" && this.pdfViewerBase.isInitialField && !this.clearUploadString && !this.pdfViewerBase.isToolbarSignClicked) {\n        this.enableCreateButton(false);\n        signbutton.style.visibility = 'hidden';\n        this.outputString = this.saveInitialUploadString;\n      }\n    }\n    if (this.pdfViewer.element.offsetWidth < maximumWidth) this.updateCanvasSize();\n    this.drawSignOnTabSwitch();\n    if (headerText.toLocaleLowerCase() === 'upload' && this.imageSignatureDataUrl) {\n      this.imageSignOnTabSwitch();\n    }\n  };\n  Signature.prototype.enableCreateSignatureButton = function () {\n    if (this.pdfViewerBase.isToolbarSignClicked || this.signaturetype !== 'Type') {\n      if (this.outputString !== \"\") {\n        this.enableCreateButton(false);\n      } else {\n        this.enableCreateButton(true);\n      }\n    } else {\n      if (this.textValue !== \"\") {\n        this.enableCreateButton(false);\n      } else {\n        this.enableCreateButton(true);\n      }\n    }\n  };\n  Signature.prototype.showHideSignatureTab = function (displayMode, appearanceDiv, typeDiv, uploadDiv) {\n    var items = [];\n    if (displayMode & DisplayMode.Draw) {\n      items.push({\n        header: {\n          'text': this.pdfViewer.localeObj.getConstant('Draw-hand Signature'),\n          'label': 'DRAW'\n        },\n        content: appearanceDiv\n      });\n    }\n    if (displayMode & DisplayMode.Text) {\n      items.push({\n        header: {\n          'text': this.pdfViewer.localeObj.getConstant('Type Signature'),\n          'label': 'TYPE'\n        },\n        content: typeDiv\n      });\n    }\n    if (displayMode & DisplayMode.Upload) {\n      items.push({\n        header: {\n          'text': this.pdfViewer.localeObj.getConstant('Upload Signature'),\n          'label': 'UPLOAD'\n        },\n        content: uploadDiv\n      });\n    }\n    return items;\n  };\n  /**\n   * @private\n   * @returns {void}\n   */\n  Signature.prototype.createSignatureFileElement = function () {\n    // eslint-disable-next-line\n    var signImage = createElement('input', {\n      id: this.pdfViewer.element.id + '_signElement',\n      attrs: {\n        'type': 'file'\n      }\n    });\n    signImage.setAttribute('accept', '.jpg,.jpeg,.png');\n    signImage.style.position = 'absolute';\n    signImage.style.left = '0px';\n    signImage.style.top = '0px';\n    signImage.style.visibility = 'hidden';\n    document.body.appendChild(signImage);\n    signImage.addEventListener('change', this.addStampImage);\n  };\n  Signature.prototype.uploadSignatureImage = function () {\n    // eslint-disable-next-line\n    var signImage = document.getElementById(this.pdfViewer.element.id + '_signElement');\n    if (signImage) {\n      signImage.click();\n    }\n  };\n  Signature.prototype.renderSignatureText = function () {\n    var maximumWidth = 750;\n    // eslint-disable-next-line\n    var fontDiv = document.getElementById(this.pdfViewer.element.id + '_font_appearance');\n    // eslint-disable-next-line\n    var textBox = document.getElementById(this.pdfViewer.element.id + '_e-pv-Signtext-box');\n    for (var i = 0; i < this.signfontStyle.length; i++) {\n      this.fontsign[parseInt(i.toString(), 10)].innerHTML = textBox.value;\n      this.fontsign[parseInt(i.toString(), 10)].style.fontFamily = this.signfontStyle[parseInt(i.toString(), 10)].FontName;\n      if (this.fontName !== \"\" && this.signfontStyle[parseInt(i.toString(), 10)].FontName === this.fontName) {\n        this.fontsign[parseInt(i.toString(), 10)].style.borderColor = 'red';\n      } else if (isNullOrUndefined(this.fontName) && this.signfontStyle[parseInt(i.toString(), 10)].FontName === 'Helvetica') {\n        this.fontsign[parseInt(i.toString(), 10)].style.borderColor = 'red';\n      }\n      fontDiv.appendChild(this.fontsign[parseInt(i.toString(), 10)]);\n    }\n    for (var i = 0; i < this.signfontStyle.length; i++) {\n      // eslint-disable-next-line\n      var clickSign = document.getElementById('_font_signature' + i + '');\n      clickSign.addEventListener('click', this.typeSignatureclick.bind(this));\n    }\n    this.enableCreateButton(false);\n    this.enableClearbutton(false);\n    if (this.pdfViewer.element.offsetWidth < maximumWidth) this.updateCanvasSize();\n    this.drawSignOnTabSwitch();\n  };\n  Signature.prototype.typeSignatureclick = function () {\n    var eventTarget = event.target;\n    // eslint-disable-next-line\n    var createButton = document.getElementsByClassName('e-pv-createbtn')[0];\n    createButton.disabled = false;\n    for (var i = 0; i < 4; i++) {\n      // eslint-disable-next-line\n      var fontElement = document.getElementById('_font_signature' + i + '');\n      if (fontElement) {\n        fontElement.style.borderColor = '';\n      }\n    }\n    eventTarget.style.borderColor = 'red';\n    this.outputString = eventTarget.textContent;\n    try {\n      this.fontName = JSON.parse(eventTarget.style.fontFamily);\n    } catch (e) {\n      this.fontName = eventTarget.style.fontFamily;\n    }\n  };\n  /**\n   * @param bounds\n   * @param position\n   * @private\n   */\n  // eslint-disable-next-line\n  Signature.prototype.addSignatureCollection = function (bounds, position) {\n    var minimumX = -1;\n    var minimumY = -1;\n    var maximumX = -1;\n    var maximumY = -1;\n    // eslint-disable-next-line\n    var collectionData = processPathData(this.outputString);\n    // eslint-disable-next-line\n    var newCanvas = document.createElement('canvas');\n    // eslint-disable-next-line\n    var context = newCanvas.getContext('2d');\n    // eslint-disable-next-line\n    var imageString;\n    var signatureType = this.pdfViewerBase.currentSignatureAnnot.shapeAnnotationType;\n    if (signatureType === 'HandWrittenSignature') {\n      if (collectionData.length !== 0) {\n        // eslint-disable-next-line\n        for (var k = 0; k < collectionData.length; k++) {\n          // eslint-disable-next-line\n          var val = collectionData[k];\n          if (minimumX === -1) {\n            // eslint-disable-next-line\n            minimumX = val['x'];\n            // eslint-disable-next-line\n            maximumX = val['x'];\n            // eslint-disable-next-line\n            minimumY = val['y'];\n            // eslint-disable-next-line\n            maximumY = val['y'];\n          } else {\n            // eslint-disable-next-line\n            var point1 = val['x'];\n            // eslint-disable-next-line\n            var point2 = val['y'];\n            if (minimumX >= point1) {\n              minimumX = point1;\n            }\n            if (minimumY >= point2) {\n              minimumY = point2;\n            }\n            if (maximumX <= point1) {\n              maximumX = point1;\n            }\n            if (maximumY <= point2) {\n              maximumY = point2;\n            }\n          }\n        }\n        var newdifferenceX = maximumX - minimumX;\n        var newdifferenceY = maximumY - minimumY;\n        var differenceX = newdifferenceX / 100;\n        var differenceY = newdifferenceY / 100;\n        var left = 0;\n        var top_1 = 0;\n        if (bounds) {\n          newCanvas.width = position.currentWidth;\n          newCanvas.height = position.currentHeight;\n          differenceX = newdifferenceX / bounds.width;\n          differenceY = newdifferenceY / bounds.height;\n          left = bounds.x - position.currentLeft;\n          top_1 = bounds.y - position.currentTop;\n        } else {\n          newCanvas.width = 100;\n          newCanvas.height = 100;\n        }\n        context.beginPath();\n        for (var n = 0; n < collectionData.length; n++) {\n          // eslint-disable-next-line\n          var val = collectionData[n];\n          // eslint-disable-next-line\n          var point1 = (val['x'] - minimumX) / differenceX + left;\n          // eslint-disable-next-line\n          var point2 = (val['y'] - minimumY) / differenceY + top_1;\n          // eslint-disable-next-line\n          if (val['command'] === 'M') {\n            context.moveTo(point1, point2);\n            // eslint-disable-next-line\n          } else if (val['command'] === 'L') {\n            context.lineTo(point1, point2);\n          }\n        }\n        context.stroke();\n        context.closePath();\n        imageString = newCanvas.toDataURL();\n      }\n    } else if (signatureType === 'SignatureText') {\n      imageString = this.outputString;\n    } else {\n      imageString = this.outputString;\n    }\n    if (bounds) {\n      this.saveImageString = imageString;\n    } else {\n      // eslint-disable-next-line\n      var signCollection = {};\n      signCollection['sign_' + this.pdfViewerBase.imageCount] = this.outputString;\n      this.outputcollection.push(signCollection);\n      // eslint-disable-next-line\n      var signature = [];\n      signature.push({\n        id: 'sign_' + this.pdfViewerBase.imageCount,\n        imageData: imageString,\n        signatureType: signatureType,\n        fontFamily: this.pdfViewerBase.currentSignatureAnnot.fontFamily\n      });\n      this.signaturecollection.push({\n        image: signature,\n        isInitial: this.pdfViewerBase.isInitialField\n      });\n      this.pdfViewerBase.imageCount++;\n    }\n  };\n  /**\n   * @private]\n   * @param {number} limit - The limit.\n   * @returns {number} - Returns number.\n   */\n  Signature.prototype.getSaveLimit = function (limit) {\n    if (limit > this.maxSaveLimit) {\n      limit = this.maxSaveLimit;\n    } else if (limit < 1) {\n      limit = 1;\n    }\n    return limit;\n  };\n  /**\n   * @private\n   * @returns {void}\n   */\n  Signature.prototype.RenderSavedSignature = function () {\n    this.pdfViewerBase.signatureCount++;\n    var zoomvalue = this.pdfViewerBase.getZoomFactor();\n    var annot;\n    if (this.pdfViewerBase.isAddedSignClicked) {\n      var annotationName = this.pdfViewer.annotation.createGUID();\n      this.pdfViewerBase.currentSignatureAnnot = null;\n      this.pdfViewerBase.isSignatureAdded = true;\n      var pageIndex = this.pdfViewerBase.currentPageNumber - 1;\n      var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + pageIndex);\n      var currentLeft = 0;\n      var currentTop = 0;\n      // eslint-disable-next-line max-len\n      var currentWidth = this.pdfViewer.handWrittenSignatureSettings.width ? this.pdfViewer.handWrittenSignatureSettings.width : 100;\n      // eslint-disable-next-line max-len\n      var currentHeight = this.pdfViewer.handWrittenSignatureSettings.height ? this.pdfViewer.handWrittenSignatureSettings.height : 100;\n      // eslint-disable-next-line max-len\n      var thickness = this.pdfViewer.handWrittenSignatureSettings.thickness ? this.pdfViewer.handWrittenSignatureSettings.thickness : 1;\n      // eslint-disable-next-line max-len\n      var opacity = this.pdfViewer.handWrittenSignatureSettings.opacity ? this.pdfViewer.handWrittenSignatureSettings.opacity : 1;\n      // eslint-disable-next-line max-len\n      var strokeColor = this.pdfViewer.handWrittenSignatureSettings.strokeColor ? this.pdfViewer.handWrittenSignatureSettings.strokeColor : '#000000';\n      currentLeft = (parseFloat(pageDiv.style.width) / 2 - currentWidth / 2) / zoomvalue;\n      // eslint-disable-next-line max-len\n      currentTop = (parseFloat(pageDiv.style.height) / 2 - currentHeight / 2) / zoomvalue;\n      var keyString = '';\n      var signatureType = void 0;\n      var signatureFontFamily = void 0;\n      for (var collection = 0; collection < this.outputcollection.length; collection++) {\n        // eslint-disable-next-line\n        var collectionAddedsign = this.outputcollection[collection];\n        // eslint-disable-next-line\n        var eventTarget = event.target;\n        // eslint-disable-next-line max-len\n        if (eventTarget && eventTarget.id === 'sign_' + collection || eventTarget && eventTarget.id === 'sign_border' + collection) {\n          keyString = collectionAddedsign['sign_' + collection];\n          break;\n        }\n      }\n      for (var signatureIndex = 0; signatureIndex < this.signaturecollection.length; signatureIndex++) {\n        var eventTarget = event.target;\n        var signatureId = this.signaturecollection[parseInt(signatureIndex.toString(), 10)].image[0].id.split('_')[1];\n        if (eventTarget && eventTarget.id === 'sign_' + signatureId || eventTarget && eventTarget.id === 'sign_border' + signatureId) {\n          signatureType = this.signaturecollection[parseInt(signatureIndex.toString(), 10)].image[0].signatureType;\n          signatureFontFamily = this.signaturecollection[parseInt(signatureIndex.toString(), 10)].image[0].fontFamily;\n          break;\n        }\n      }\n      if (signatureType === 'HandWrittenSignature') {\n        // eslint-disable-next-line\n        var signatureBounds = this.updateSignatureAspectRatio(keyString, true);\n        // eslint-disable-next-line max-len\n        currentWidth = signatureBounds.width ? signatureBounds.width : currentWidth;\n        // eslint-disable-next-line max-len\n        currentHeight = signatureBounds.height ? signatureBounds.height : currentHeight;\n      } else {\n        currentWidth = currentWidth === 150 ? 200 : this.pdfViewer.handWrittenSignatureSettings.width;\n        // eslint-disable-next-line max-len\n        currentHeight = currentHeight === 100 ? 65 : this.pdfViewer.handWrittenSignatureSettings.height;\n      }\n      annot = {\n        // eslint-disable-next-line max-len\n        id: 'sign' + this.pdfViewerBase.signatureCount,\n        bounds: {\n          x: currentLeft,\n          y: currentTop,\n          width: currentWidth,\n          height: currentHeight\n        },\n        pageIndex: pageIndex,\n        data: keyString,\n        // eslint-disable-next-line max-len\n        shapeAnnotationType: signatureType,\n        opacity: opacity,\n        fontFamily: signatureFontFamily,\n        strokeColor: strokeColor,\n        thickness: thickness,\n        signatureName: annotationName\n      };\n      this.pdfViewerBase.currentSignatureAnnot = annot;\n      this.pdfViewerBase.isAddedSignClicked = false;\n    } else {\n      this.pdfViewer.formFieldsModule.drawSignature();\n    }\n  };\n  /**\n   * @private\n   * @returns {void}\n   */\n  Signature.prototype.updateCanvasSize = function () {\n    // eslint-disable-next-line\n    var canvas = document.getElementById(this.pdfViewer.element.id + '_signatureCanvas_');\n    this.setTabItemWidth(canvas);\n    var uploadCanvas = document.getElementById(this.pdfViewer.element.id + '_signatureuploadCanvas_');\n    this.setTabItemWidth(uploadCanvas);\n    var fontAppearance = document.getElementById(this.pdfViewer.element.id + '_font_appearance');\n    this.setTabItemWidth(fontAppearance);\n  };\n  Signature.prototype.setTabItemWidth = function (canvas) {\n    var padding = 2;\n    var maximumWidth = 750;\n    var canvasWidth = 714;\n    var margin = 50;\n    var elem = document.querySelector('.e-dlg-content');\n    if (elem) {\n      var style = getComputedStyle(elem);\n      padding = padding + parseInt(style.paddingLeft, 10) + parseInt(style.paddingRight, 10);\n    }\n    if (canvas && this.signatureDialog && this.signatureDialog.visible) {\n      var context_2 = canvas.getContext('2d');\n      var canvasContent = canvas.toDataURL();\n      if (this.pdfViewer.element.offsetWidth > maximumWidth) {\n        canvas.width = canvasWidth;\n        canvas.style.width = canvasWidth + 'px';\n      } else {\n        canvas.width = this.pdfViewer.element.offsetWidth - padding;\n        canvas.style.width = canvas.width + 'px';\n      }\n      var image_3 = new Image();\n      image_3.src = canvasContent;\n      image_3.onload = function () {\n        context_2.drawImage(image_3, 0, 0, canvas.width, canvas.height);\n      };\n    }\n    var fontInnerDiv = document.getElementsByClassName('e-pv-font-sign');\n    if (canvas && fontInnerDiv && fontInnerDiv.length > 0) {\n      for (var i = 0; i < fontInnerDiv.length; i++) {\n        var fontDiv = fontInnerDiv[parseInt(i.toString(), 10)];\n        fontDiv.style.width = canvas.width / 2 - margin + 'px';\n      }\n    }\n  };\n  Signature.prototype.drawSignOnTabSwitch = function () {\n    var proxy = this;\n    var image = new Image();\n    image.onload = function () {\n      var canvas = document.getElementById(proxy.pdfViewer.element.id + '_signatureCanvas_');\n      if (canvas) {\n        var context = canvas.getContext('2d');\n        context.drawImage(image, 0, 0);\n      }\n    };\n    image.src = this.drawSignatureDataUrl;\n  };\n  Signature.prototype.imageSignOnTabSwitch = function () {\n    var proxy = this;\n    var image = new Image();\n    image.onload = function () {\n      var canvas = document.getElementById(proxy.pdfViewer.element.id + '_signatureuploadCanvas_');\n      if (canvas) {\n        var context = canvas.getContext('2d');\n        var signbutton = document.getElementById(proxy.pdfViewer.element.id + '_e-pv-upload-button');\n        signbutton.style.visibility = 'hidden';\n        context.drawImage(image, 0, 0, canvas.width, canvas.height);\n        proxy.enableCreateButton(false);\n        proxy.signatureImageHeight = image.naturalHeight;\n        proxy.signatureImageWidth = image.naturalWidth;\n      }\n    };\n    image.src = this.imageSignatureDataUrl;\n  };\n  Signature.prototype.signaturePanelMouseDown = function (e) {\n    if (e.type !== 'contextmenu') {\n      e.preventDefault();\n      this.findMousePosition(e);\n      this.mouseDetection = true;\n      this.oldX = this.mouseX;\n      this.oldY = this.mouseY;\n      this.newObject = [];\n      this.drawMousePosition(e);\n      this.mouseMoving = true;\n    }\n  };\n  Signature.prototype.enableCreateButton = function (isEnable) {\n    // eslint-disable-next-line\n    var createbtn = document.getElementsByClassName('e-pv-createbtn')[0];\n    if (createbtn) {\n      createbtn.disabled = isEnable;\n    }\n    this.enableClearbutton(isEnable);\n  };\n  Signature.prototype.enableClearbutton = function (isEnable) {\n    // eslint-disable-next-line\n    var clearbtn = document.getElementsByClassName('e-pv-clearbtn')[0];\n    if (clearbtn) {\n      clearbtn.disabled = isEnable;\n    }\n  };\n  Signature.prototype.signaturePanelMouseMove = function (e) {\n    if (this.mouseDetection && this.signaturetype === 'Draw') {\n      this.findMousePosition(e);\n      this.enableCreateButton(false);\n      this.drawMousePosition(e);\n    }\n  };\n  Signature.prototype.findMousePosition = function (event) {\n    var offsetX;\n    var offsetY;\n    if (event.type.indexOf('touch') !== -1) {\n      event = event;\n      var element = event.target;\n      // eslint-disable-next-line\n      var currentRect = element.getBoundingClientRect();\n      this.mouseX = event.changedTouches[0].clientX - currentRect.left;\n      this.mouseY = event.changedTouches[0].clientY - currentRect.top;\n    } else {\n      event = event;\n      this.mouseX = event.offsetX;\n      this.mouseY = event.offsetY;\n    }\n  };\n  Signature.prototype.drawMousePosition = function (event) {\n    if (this.mouseDetection) {\n      this.drawSignatureInCanvas();\n      this.oldX = this.mouseX;\n      this.oldY = this.mouseY;\n    }\n  };\n  Signature.prototype.drawSignatureInCanvas = function () {\n    // eslint-disable-next-line\n    var canvas = document.getElementById(this.pdfViewer.element.id + '_signatureCanvas_');\n    // eslint-disable-next-line\n    var context = canvas.getContext('2d');\n    context.beginPath();\n    context.moveTo(this.oldX, this.oldY);\n    context.lineTo(this.mouseX, this.mouseY);\n    context.stroke();\n    context.lineWidth = 2;\n    context.arc(this.oldX, this.oldY, 2 / 2, 0, Math.PI * 2, true);\n    context.closePath();\n    this.newObject.push(this.mouseX, this.mouseY);\n  };\n  Signature.prototype.signaturePanelMouseUp = function () {\n    if (this.mouseDetection) {\n      this.convertToPath(this.newObject);\n    }\n    this.mouseDetection = false;\n    if (event.type == 'touchend') {\n      this.canvasTouched = true;\n    }\n  };\n  Signature.prototype.signaturePanelMouseLeave = function () {\n    if (this.mouseDetection) {\n      this.convertToPath(this.newObject);\n    }\n    this.mouseDetection = false;\n    this.mouseMoving = false;\n  };\n  ;\n  // eslint-disable-next-line\n  Signature.prototype.convertToPath = function (newObject) {\n    this.movePath(newObject[0], newObject[1]);\n    this.linePath(newObject[0], newObject[1]);\n    for (var n = 2; n < newObject.length; n = n + 2) {\n      this.linePath(newObject[parseInt(n.toString(), 10)], newObject[n + 1]);\n    }\n  };\n  Signature.prototype.linePath = function (x, y) {\n    this.outputString += 'L' + x + ',' + y + ' ';\n  };\n  Signature.prototype.movePath = function (x, y) {\n    this.outputString += 'M' + x + ',' + y + ' ';\n  };\n  /**\n   * @private\n   * @returns {void}\n   */\n  Signature.prototype.clearSignatureCanvas = function (type) {\n    var isCanvasClear = true;\n    var drawObject = [];\n    if (type && !isNullOrUndefined(type.previousIndex) && !isNullOrUndefined(type.selectedIndex)) {\n      isCanvasClear = false;\n      if (type.previousIndex === 0) {\n        this.drawOutputString = this.outputString;\n        drawObject = this.newObject;\n      } else if (type.previousIndex === 2) {\n        this.imageOutputString = this.outputString;\n      }\n      this.outputString = '';\n      this.newObject = [];\n      if (type.selectedIndex === 0) {\n        this.outputString = this.drawOutputString;\n        this.newObject = drawObject;\n      } else if (type.selectedIndex === 2) {\n        this.outputString = this.imageOutputString;\n      }\n    } else {\n      this.outputString = '';\n      this.newObject = [];\n    }\n    var isClearDrawTab = false;\n    var isClearTypeTab = false;\n    var isClearImageTab = false;\n    if (type && type.currentTarget && type.currentTarget.classList.contains(\"e-pv-clearbtn\")) {\n      isCanvasClear = false;\n      if (this.signaturetype === 'Draw') {\n        isClearDrawTab = true;\n        var checkbox = document.getElementById('checkbox');\n        var checkBoxElement = document.getElementById('checkbox');\n        if (checkbox && checkBoxElement.nextElementSibling) {\n          checkBoxElement.nextElementSibling.classList.remove('e-check');\n          checkbox.checked = false;\n        }\n      } else if (this.signaturetype === 'Type') {\n        isClearTypeTab = true;\n        var checkbox = document.getElementById('checkbox1');\n        var checkBoxElement = document.getElementById('checkbox1');\n        if (checkbox && checkBoxElement.nextElementSibling) {\n          checkBoxElement.nextElementSibling.classList.remove('e-check');\n          checkbox.checked = false;\n          this.textValue = '';\n        }\n      } else {\n        isClearImageTab = true;\n        this.clearUploadString = true;\n        var checkbox = document.getElementById('checkbox2');\n        var checkBoxElement = document.getElementById('checkbox2');\n        if (checkbox && checkBoxElement.nextElementSibling) {\n          checkBoxElement.nextElementSibling.classList.remove('e-check');\n          checkbox.checked = false;\n        }\n      }\n    }\n    // eslint-disable-next-line\n    var canvas = document.getElementById(this.pdfViewer.element.id + '_signatureCanvas_');\n    // eslint-disable-next-line\n    if (canvas && isCanvasClear || isClearDrawTab) {\n      // eslint-disable-next-line\n      var context = canvas.getContext('2d');\n      context.clearRect(0, 0, canvas.width, canvas.height);\n    }\n    // eslint-disable-next-line\n    var imageCanvas = document.getElementById(this.pdfViewer.element.id + '_signatureuploadCanvas_');\n    if (imageCanvas && isCanvasClear || isClearImageTab) {\n      // eslint-disable-next-line\n      var context = imageCanvas.getContext('2d');\n      context.clearRect(0, 0, imageCanvas.width, imageCanvas.height);\n      // eslint-disable-next-line\n      var signbutton = document.getElementById(this.pdfViewer.element.id + '_e-pv-upload-button');\n      if (signbutton) {\n        signbutton.style.visibility = '';\n      }\n    }\n    // eslint-disable-next-line\n    var fontdiv = document.getElementById(this.pdfViewer.element.id + '_font_appearance');\n    // eslint-disable-next-line\n    var textbox = document.getElementById(this.pdfViewer.element.id + '_e-pv-Signtext-box');\n    if (fontdiv && textbox && isCanvasClear || isClearTypeTab) {\n      textbox.value = '';\n      if (!isBlazor()) {\n        fontdiv.innerHTML = '';\n      }\n    }\n    this.enableCreateButton(true);\n  };\n  /**\n   * @private\n   * @returns {void}\n   */\n  Signature.prototype.closeSignaturePanel = function () {\n    if (this.pdfViewerBase.currentTarget) {\n      this.pdfViewerBase.drawSignatureWithTool = true;\n    }\n    this.clearSignatureCanvas();\n    if (!isBlazor()) {\n      this.signatureDialog.hide();\n    }\n    this.pdfViewerBase.isToolbarSignClicked = false;\n    this.pdfViewerBase.drawSignatureWithTool = false;\n    this.drawOutputString = '';\n    this.imageOutputString = '';\n  };\n  /**\n   * @private\n   * @returns {string} - Returns the string.\n   */\n  Signature.prototype.saveSignature = function () {\n    // eslint-disable-next-line\n    var storeObject = null;\n    if (this.pdfViewerBase.isStorageExceed) {\n      storeObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_sign'];\n    } else {\n      storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_sign');\n    }\n    // eslint-disable-next-line\n    var annotations = new Array();\n    for (var j = 0; j < this.pdfViewerBase.pageCount; j++) {\n      annotations[parseInt(j.toString(), 10)] = [];\n    }\n    if (storeObject) {\n      var annotationCollection = JSON.parse(storeObject);\n      for (var i = 0; i < annotationCollection.length; i++) {\n        var newArray = [];\n        var pageAnnotationObject = annotationCollection[parseInt(i.toString(), 10)];\n        if (pageAnnotationObject) {\n          for (var z = 0; pageAnnotationObject.annotations.length > z; z++) {\n            if (this.pdfViewer.isSignatureEditable) {\n              var signatureSettings = this.pdfViewer.handWrittenSignatureSettings;\n              var annotationSettings = this.pdfViewer.annotationSettings;\n              var annotationAuthor = signatureSettings.author !== 'Guest' ? signatureSettings.author : annotationSettings.author ? annotationSettings.author : 'Guest';\n              // eslint-disable-next-line max-len\n              pageAnnotationObject.annotations[parseInt(z.toString(), 10)].author = annotationAuthor;\n            }\n            // eslint-disable-next-line max-len\n            var strokeColorString = pageAnnotationObject.annotations[parseInt(z.toString(), 10)].strokeColor ? pageAnnotationObject.annotations[parseInt(z.toString(), 10)].strokeColor : \"black\";\n            pageAnnotationObject.annotations[parseInt(z.toString(), 10)].strokeColor = JSON.stringify(this.getRgbCode(strokeColorString));\n            // eslint-disable-next-line max-len\n            pageAnnotationObject.annotations[parseInt(z.toString(), 10)].bounds = JSON.stringify(this.pdfViewer.annotation.getBounds(pageAnnotationObject.annotations[parseInt(z.toString(), 10)].bounds, pageAnnotationObject.pageIndex));\n            if (pageAnnotationObject.annotations[parseInt(z.toString(), 10)].shapeAnnotationType === 'HandWrittenSignature' || pageAnnotationObject.annotations[parseInt(z.toString(), 10)].signatureName === 'ink') {\n              // eslint-disable-next-line\n              var collectionData = processPathData(pageAnnotationObject.annotations[parseInt(z.toString(), 10)].data);\n              // eslint-disable-next-line\n              var csData = splitArrayCollection(collectionData);\n              pageAnnotationObject.annotations[parseInt(z.toString(), 10)].data = JSON.stringify(csData);\n            } else {\n              if (pageAnnotationObject.annotations[parseInt(z.toString(), 10)].shapeAnnotationType === 'SignatureText' && !this.checkDefaultFont(pageAnnotationObject.annotations[parseInt(z.toString(), 10)].fontFamily)) {\n                var signTypeCanvas = createElement('canvas');\n                var bounds = JSON.parse(pageAnnotationObject.annotations[parseInt(z.toString(), 10)].bounds);\n                signTypeCanvas.width = bounds && bounds.width || 150;\n                signTypeCanvas.height = bounds && bounds.height || pageAnnotationObject.annotations[parseInt(z.toString(), 10)].fontSize * 2;\n                // eslint-disable-next-line\n                var canvasContext = signTypeCanvas.getContext('2d');\n                var x = signTypeCanvas.width / 2;\n                var y = signTypeCanvas.height / 2 + pageAnnotationObject.annotations[parseInt(z.toString(), 10)].fontSize / 2 - 10;\n                canvasContext.textAlign = 'center';\n                canvasContext.font = pageAnnotationObject.annotations[parseInt(z.toString(), 10)].fontSize + 'px ' + pageAnnotationObject.annotations[parseInt(z.toString(), 10)].fontFamily;\n                canvasContext.fillText(pageAnnotationObject.annotations[parseInt(z.toString(), 10)].data, x, y);\n                pageAnnotationObject.annotations[parseInt(z.toString(), 10)].data = JSON.stringify(signTypeCanvas.toDataURL('image/png'));\n                pageAnnotationObject.annotations[parseInt(z.toString(), 10)].shapeAnnotationType = 'SignatureImage';\n              } else {\n                pageAnnotationObject.annotations[parseInt(z.toString(), 10)].data = JSON.stringify(pageAnnotationObject.annotations[parseInt(z.toString(), 10)].data);\n              }\n            }\n          }\n          newArray = pageAnnotationObject.annotations;\n        }\n        annotations[pageAnnotationObject.pageIndex] = newArray;\n      }\n    }\n    return JSON.stringify(annotations);\n  };\n  Signature.prototype.checkDefaultFont = function (fontName) {\n    // eslint-disable-next-line\n    [{\n      FontName: 'Helvetica'\n    }, {\n      FontName: 'Times New Roman'\n    }, {\n      FontName: 'Courier'\n    }, {\n      FontName: 'Symbol'\n    }];\n    if (fontName === 'Helvetica' || fontName === 'Times New Roman' || fontName === 'Courier' || fontName === 'Symbol') {\n      return true;\n    }\n    return false;\n  };\n  /**\n   * @param colorString\n   * @private\n   */\n  // eslint-disable-next-line\n  Signature.prototype.getRgbCode = function (colorString) {\n    /* eslint-disable-next-line security/detect-unsafe-regex */\n    if (!colorString.match(/#([a-z0-9]+)/gi) && !colorString.match(/^rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*(\\d+(?:\\.\\d+)?))?\\)$/)) {\n      colorString = this.pdfViewer.annotationModule.nameToHash(colorString);\n    }\n    var stringArray = colorString.split(',');\n    if (isNullOrUndefined(stringArray[1])) {\n      colorString = this.pdfViewer.annotationModule.getValue(colorString, 'rgba');\n      stringArray = colorString.split(',');\n    }\n    // eslint-disable-next-line radix\n    var r = parseInt(stringArray[0].split('(')[1]);\n    // eslint-disable-next-line radix\n    var g = parseInt(stringArray[1]);\n    // eslint-disable-next-line radix\n    var b = parseInt(stringArray[2]);\n    // eslint-disable-next-line radix\n    var a = parseInt(stringArray[3]);\n    return {\n      r: r,\n      g: g,\n      b: b,\n      a: a\n    };\n  };\n  /**\n   * @private\n   * @param {number} left - The left.\n   * @param {number} top - The top.\n   * @returns {void}\n   */\n  Signature.prototype.renderSignature = function (left, top) {\n    var annot;\n    // eslint-disable-next-line\n    var currentAnnotation = this.pdfViewerBase.currentSignatureAnnot;\n    var annotationName = this.pdfViewer.annotation.createGUID();\n    if (currentAnnotation) {\n      if (this.pdfViewerBase.currentSignatureAnnot.shapeAnnotationType === 'HandWrittenSignature') {\n        annot = {\n          // eslint-disable-next-line max-len\n          id: currentAnnotation.id,\n          bounds: {\n            x: left,\n            y: top,\n            width: currentAnnotation.bounds.width,\n            height: currentAnnotation.bounds.height\n          },\n          pageIndex: currentAnnotation.pageIndex,\n          data: currentAnnotation.data,\n          shapeAnnotationType: 'HandWrittenSignature',\n          opacity: currentAnnotation.opacity,\n          fontFamily: currentAnnotation.fontFamily,\n          fontSize: currentAnnotation.fontSize,\n          strokeColor: currentAnnotation.strokeColor,\n          thickness: currentAnnotation.thickness,\n          signatureName: annotationName\n        };\n      }\n      if (this.pdfViewerBase.currentSignatureAnnot.shapeAnnotationType === 'SignatureText') {\n        annot = {\n          // eslint-disable-next-line max-len\n          id: currentAnnotation.id,\n          bounds: {\n            x: left,\n            y: top,\n            width: currentAnnotation.bounds.width,\n            height: currentAnnotation.bounds.height\n          },\n          pageIndex: currentAnnotation.pageIndex,\n          data: currentAnnotation.data,\n          shapeAnnotationType: 'SignatureText',\n          opacity: currentAnnotation.opacity,\n          fontFamily: currentAnnotation.fontFamily,\n          fontSize: currentAnnotation.fontSize,\n          strokeColor: currentAnnotation.strokeColor,\n          thickness: currentAnnotation.thickness,\n          signatureName: annotationName\n        };\n      } else if (this.pdfViewerBase.currentSignatureAnnot.shapeAnnotationType === 'SignatureImage') {\n        annot = {\n          // eslint-disable-next-line max-len\n          id: currentAnnotation.id,\n          bounds: {\n            x: left,\n            y: top,\n            width: currentAnnotation.bounds.width,\n            height: currentAnnotation.bounds.height\n          },\n          pageIndex: currentAnnotation.pageIndex,\n          data: currentAnnotation.data,\n          shapeAnnotationType: 'SignatureImage',\n          opacity: currentAnnotation.opacity,\n          fontFamily: currentAnnotation.fontFamily,\n          fontSize: currentAnnotation.fontSize,\n          strokeColor: currentAnnotation.strokeColor,\n          thickness: currentAnnotation.thickness,\n          signatureName: annotationName\n        };\n      }\n      this.pdfViewer.add(annot);\n      // eslint-disable-next-line\n      var canvass = document.getElementById(this.pdfViewer.element.id + '_annotationCanvas_' + currentAnnotation.pageIndex);\n      // eslint-disable-next-line\n      this.pdfViewer.renderDrawing(canvass, currentAnnotation.pageIndex);\n      this.pdfViewerBase.signatureAdded = true;\n      // eslint-disable-next-line max-len\n      this.storeSignatureData(currentAnnotation.pageIndex, annot);\n      this.pdfViewer.fireSignatureAdd(currentAnnotation.pageIndex, currentAnnotation.signatureName, currentAnnotation.shapeAnnotationType, currentAnnotation.bounds, currentAnnotation.opacity, currentAnnotation.strokeColor, currentAnnotation.thickness);\n      this.pdfViewerBase.currentSignatureAnnot = null;\n      this.pdfViewerBase.signatureCount++;\n    }\n  };\n  /**\n   * @param annotationCollection\n   * @param pageIndex\n   * @param isImport\n   * @private\n   */\n  // eslint-disable-next-line\n  Signature.prototype.renderExistingSignature = function (annotationCollection, pageIndex, isImport) {\n    var annot;\n    var isAnnotationAdded = false;\n    if (!isImport) {\n      for (var p = 0; p < this.signAnnotationIndex.length; p++) {\n        if (this.signAnnotationIndex[parseInt(p.toString(), 10)] === pageIndex) {\n          isAnnotationAdded = true;\n          break;\n        }\n      }\n    }\n    if (annotationCollection && !isAnnotationAdded) {\n      if (annotationCollection.length > 0 && this.signAnnotationIndex.indexOf(pageIndex) === -1) {\n        this.signAnnotationIndex.push(pageIndex);\n      }\n      for (var n = 0; n < annotationCollection.length; n++) {\n        // eslint-disable-next-line\n        var currentAnnotation = annotationCollection[n];\n        if (currentAnnotation) {\n          // eslint-disable-next-line\n          var data = currentAnnotation.PathData;\n          if (isImport) {\n            if (currentAnnotation.IsSignature) {\n              data = currentAnnotation.PathData;\n            } else if (currentAnnotation.AnnotationType === 'SignatureImage' || currentAnnotation.AnnotationType === 'SignatureText') {\n              data = JSON.parse(JSON.stringify(currentAnnotation.PathData));\n            } else {\n              if (data.includes('command')) {\n                data = getPathString(JSON.parse(currentAnnotation.PathData));\n              } else {\n                data = currentAnnotation.PathData;\n              }\n            }\n          }\n          this.outputString = data;\n          this.outputString = '';\n          var rectDiff = 0;\n          var rectDifference = 1;\n          var bounds = currentAnnotation.Bounds;\n          var currentLeft = !isNullOrUndefined(bounds.X) ? bounds.X + rectDiff / 2 : bounds.x + rectDiff / 2;\n          var currentTop = !isNullOrUndefined(bounds.Y) ? bounds.Y + rectDiff / 2 : bounds.y + rectDiff / 2;\n          var currentWidth = bounds.Width ? bounds.Width - (rectDifference - 1) : bounds.width - (rectDifference - 1);\n          var currentHeight = bounds.Height ? bounds.Height - (rectDifference - 1) : bounds.height - (rectDifference - 1);\n          if (currentAnnotation.AnnotationType === 'SignatureText') {\n            annot = {\n              id: 'sign' + this.pdfViewerBase.signatureCount,\n              bounds: {\n                x: currentLeft,\n                y: currentTop,\n                width: currentWidth,\n                height: currentHeight\n              },\n              pageIndex: pageIndex,\n              data: data,\n              fontFamily: currentAnnotation.FontFamily,\n              fontSize: currentAnnotation.FontSize,\n              shapeAnnotationType: 'SignatureText',\n              opacity: currentAnnotation.Opacity,\n              strokeColor: currentAnnotation.StrokeColor,\n              thickness: currentAnnotation.Thickness,\n              signatureName: currentAnnotation.SignatureName\n            };\n          } else if (currentAnnotation.AnnotationType === 'SignatureImage') {\n            annot = {\n              id: 'sign' + this.pdfViewerBase.signatureCount,\n              bounds: {\n                x: currentLeft,\n                y: currentTop,\n                width: currentWidth,\n                height: currentHeight\n              },\n              pageIndex: pageIndex,\n              data: data,\n              shapeAnnotationType: 'SignatureImage',\n              opacity: currentAnnotation.Opacity,\n              strokeColor: currentAnnotation.StrokeColor,\n              thickness: currentAnnotation.Thickness,\n              signatureName: currentAnnotation.SignatureName\n            };\n          } else {\n            annot = {\n              id: 'sign' + this.pdfViewerBase.signatureCount,\n              bounds: {\n                x: currentLeft,\n                y: currentTop,\n                width: currentWidth,\n                height: currentHeight\n              },\n              pageIndex: pageIndex,\n              data: data,\n              shapeAnnotationType: 'HandWrittenSignature',\n              opacity: currentAnnotation.Opacity,\n              strokeColor: currentAnnotation.StrokeColor,\n              thickness: currentAnnotation.Thickness,\n              signatureName: currentAnnotation.SignatureName ? currentAnnotation.SignatureName : \"ink\"\n            };\n          }\n        }\n        this.pdfViewer.add(annot);\n        // eslint-disable-next-line\n        var canvass = document.getElementById(this.pdfViewer.element.id + '_annotationCanvas_' + currentAnnotation.pageIndex);\n        // eslint-disable-next-line\n        this.pdfViewer.renderDrawing(canvass, annot.pageIndex);\n        this.storeSignatureData(annot.pageIndex, annot);\n        this.pdfViewerBase.currentSignatureAnnot = null;\n        this.pdfViewerBase.signatureCount++;\n        // eslint-disable-next-line max-len\n        if (this.pdfViewerBase.navigationPane && this.pdfViewerBase.navigationPane.annotationMenuObj && this.pdfViewer.isSignatureEditable) {\n          // eslint-disable-next-line max-len\n          this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export Annotations')], true);\n          // eslint-disable-next-line max-len\n          this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export XFDF')], true);\n        }\n      }\n    }\n  };\n  /**\n   * @param pageNumber\n   * @param annotations\n   * @private\n   */\n  // eslint-disable-next-line\n  Signature.prototype.storeSignatureData = function (pageNumber, annotations) {\n    // eslint-disable-next-line max-len\n    this.pdfViewer.annotation.addAction(annotations.pageIndex ? annotations.pageIndex : annotations.PageIndex, null, annotations, 'Addition', '', annotations, annotations);\n    var annotation = null;\n    var left;\n    var top;\n    var width;\n    var height;\n    var pageIndex;\n    var zoomvalue = this.pdfViewerBase.getZoomFactor();\n    if (annotations.bounds) {\n      left = annotations.bounds.left ? annotations.bounds.left : annotations.bounds.x;\n      top = annotations.bounds.top ? annotations.bounds.top : annotations.bounds.y;\n      width = annotations.bounds.width;\n      height = annotations.bounds.height;\n      pageIndex = annotations.pageIndex;\n    } else {\n      left = annotations.Bounds.left ? annotations.Bounds.left : annotations.Bounds.x;\n      top = annotations.Bounds.top ? annotations.Bounds.top : annotations.Bounds.y;\n      width = annotations.LineBounds.Width;\n      height = annotations.LineBounds.Height;\n      pageIndex = annotations.PageIndex;\n    }\n    if (annotations.wrapper && annotations.wrapper.bounds) {\n      left = annotations.wrapper.bounds.left;\n      top = annotations.wrapper.bounds.top;\n    }\n    if (annotations.shapeAnnotationType === 'SignatureText' && annotations.wrapper && annotations.wrapper.children[1]) {\n      left = left + annotations.wrapper.pivot.x + (this.signatureTextContentLeft - this.signatureTextContentTop * (zoomvalue - zoomvalue / this.signatureTextContentLeft));\n      top = top + (annotations.wrapper.children[1].bounds.y - top - (annotations.wrapper.children[1].bounds.y - top) / 3) + annotations.wrapper.pivot.y + this.signatureTextContentTop * zoomvalue;\n    }\n    annotation = {\n      id: annotations.id ? annotations.id : null,\n      bounds: {\n        left: left,\n        top: top,\n        width: width,\n        height: height\n      },\n      shapeAnnotationType: annotations.shapeAnnotationType ? annotations.shapeAnnotationType : \"ink\",\n      opacity: annotations.opacity ? annotations.opacity : 1,\n      thickness: annotations.thickness ? annotations.thickness : 1,\n      strokeColor: annotations.strokeColor ? annotations.strokeColor : null,\n      pageIndex: pageIndex,\n      data: annotations.data ? annotations.data : annotations.Value,\n      fontSize: annotations.fontSize ? annotations.fontSize : null,\n      fontFamily: annotations.fontFamily ? annotations.fontFamily : null,\n      signatureName: annotations.signatureName ? annotations.signatureName : annotations.Name\n    };\n    // eslint-disable-next-line\n    var sessionSize = Math.round(JSON.stringify(window.sessionStorage).length / 1024);\n    // eslint-disable-next-line\n    var currentAnnotation = Math.round(JSON.stringify(annotation).length / 1024);\n    if (sessionSize + currentAnnotation > 4500) {\n      this.pdfViewerBase.isStorageExceed = true;\n      this.pdfViewer.annotationModule.clearAnnotationStorage();\n      if (!this.pdfViewerBase.isFormStorageExceed) {\n        this.pdfViewer.formFieldsModule.clearFormFieldStorage();\n      }\n    }\n    // eslint-disable-next-line\n    var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_sign');\n    var index = 0;\n    if (!storeObject) {\n      this.storeSignatureCollections(annotation, pageNumber);\n      var shapeAnnotation = {\n        pageIndex: pageNumber,\n        annotations: []\n      };\n      shapeAnnotation.annotations.push(annotation);\n      index = shapeAnnotation.annotations.indexOf(annotation);\n      var annotationCollection = [];\n      annotationCollection.push(shapeAnnotation);\n      var annotationStringified = JSON.stringify(annotationCollection);\n      if (this.pdfViewerBase.isStorageExceed) {\n        this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_sign'] = annotationStringified;\n      } else {\n        window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_sign', annotationStringified);\n      }\n    } else {\n      this.storeSignatureCollections(annotation, pageNumber);\n      var annotObject = JSON.parse(storeObject);\n      window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_sign');\n      var pageIndex_1 = this.pdfViewer.annotationModule.getPageCollection(annotObject, pageNumber);\n      if (!isNullOrUndefined(pageIndex_1) && annotObject[parseInt(pageIndex_1.toString(), 10)]) {\n        annotObject[parseInt(pageIndex_1.toString(), 10)].annotations.push(annotation);\n        index = annotObject[parseInt(pageIndex_1.toString(), 10)].annotations.indexOf(annotation);\n      } else {\n        var markupAnnotation = {\n          pageIndex: pageNumber,\n          annotations: []\n        };\n        markupAnnotation.annotations.push(annotation);\n        index = markupAnnotation.annotations.indexOf(annotation);\n        annotObject.push(markupAnnotation);\n      }\n      var annotationStringified = JSON.stringify(annotObject);\n      if (this.pdfViewerBase.isStorageExceed) {\n        this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_sign'] = annotationStringified;\n      } else {\n        window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_sign', annotationStringified);\n      }\n    }\n  };\n  /**\n   * @param property\n   * @param pageNumber\n   * @param annotationBase\n   * @param isSignatureEdited\n   * @private\n   */\n  // eslint-disable-next-line\n  Signature.prototype.modifySignatureCollection = function (property, pageNumber, annotationBase, isSignatureEdited) {\n    this.pdfViewerBase.updateDocumentEditedProperty(true);\n    var currentAnnotObject = null;\n    var pageAnnotations = this.getAnnotations(pageNumber, null);\n    var zoomvalue = this.pdfViewerBase.getZoomFactor();\n    if (pageAnnotations != null && annotationBase) {\n      for (var i = 0; i < pageAnnotations.length; i++) {\n        if (annotationBase.id === pageAnnotations[parseInt(i.toString(), 10)].id) {\n          if (property === 'bounds') {\n            var top_2 = void 0;\n            var left = void 0;\n            if (annotationBase.shapeAnnotationType === 'SignatureText' && annotationBase.wrapper && annotationBase.wrapper.children[1]) {\n              top_2 = annotationBase.wrapper.children[0].bounds.y;\n              left = annotationBase.wrapper.children[0].bounds.x + annotationBase.wrapper.pivot.x + (this.signatureTextContentLeft - this.signatureTextContentTop * (zoomvalue - zoomvalue / this.signatureTextContentLeft));\n              top_2 = top_2 + (annotationBase.wrapper.children[1].bounds.y - top_2 - (annotationBase.wrapper.children[1].bounds.y - top_2) / 3) + annotationBase.wrapper.pivot.y + this.signatureTextContentTop * zoomvalue;\n              pageAnnotations[parseInt(i.toString(), 10)].bounds = {\n                left: left,\n                top: top_2,\n                width: annotationBase.bounds.width,\n                height: annotationBase.bounds.height\n              };\n            } else {\n              pageAnnotations[parseInt(i.toString(), 10)].bounds = {\n                left: annotationBase.wrapper.bounds.left,\n                top: annotationBase.wrapper.bounds.top,\n                width: annotationBase.bounds.width,\n                height: annotationBase.bounds.height\n              };\n            }\n            // eslint-disable-next-line max-len\n            pageAnnotations[parseInt(i.toString(), 10)].fontSize = annotationBase.fontSize;\n          } else if (property === 'stroke') {\n            pageAnnotations[parseInt(i.toString(), 10)].strokeColor = annotationBase.wrapper.children[0].style.strokeColor;\n          } else if (property === 'opacity') {\n            pageAnnotations[parseInt(i.toString(), 10)].opacity = annotationBase.wrapper.children[0].style.opacity;\n          } else if (property === 'thickness') {\n            pageAnnotations[parseInt(i.toString(), 10)].thickness = annotationBase.wrapper.children[0].style.strokeWidth;\n          } else if (property === 'delete') {\n            this.updateSignatureCollection(pageAnnotations[parseInt(i.toString(), 10)]);\n            currentAnnotObject = pageAnnotations.splice(i, 1)[0];\n            break;\n          }\n          if (property && property !== 'delete') {\n            this.storeSignatureCollections(pageAnnotations[parseInt(i.toString(), 10)], pageNumber);\n          }\n          if (isSignatureEdited) {\n            pageAnnotations[parseInt(i.toString(), 10)].opacity = annotationBase.wrapper.children[0].style.opacity;\n            pageAnnotations[parseInt(i.toString(), 10)].strokeColor = annotationBase.wrapper.children[0].style.strokeColor;\n            pageAnnotations[parseInt(i.toString(), 10)].thickness = annotationBase.wrapper.children[0].style.strokeWidth;\n            this.storeSignatureCollections(pageAnnotations[parseInt(i.toString(), 10)], pageNumber);\n            break;\n          }\n        }\n      }\n      this.manageAnnotations(pageAnnotations, pageNumber);\n    }\n    return currentAnnotObject;\n  };\n  /**\n   * @param annotation\n   * @param pageNumber\n   * @private\n   */\n  // eslint-disable-next-line\n  Signature.prototype.storeSignatureCollections = function (annotation, pageNumber) {\n    // eslint-disable-next-line\n    var collectionDetails = this.checkSignatureCollection(annotation);\n    // eslint-disable-next-line\n    var selectAnnotation = cloneObject(annotation);\n    selectAnnotation.annotationId = annotation.signatureName;\n    selectAnnotation.pageNumber = pageNumber;\n    delete selectAnnotation.annotName;\n    if (annotation.id) {\n      selectAnnotation.uniqueKey = annotation.id;\n      delete selectAnnotation.id;\n    }\n    if (collectionDetails.isExisting) {\n      this.pdfViewer.signatureCollection.splice(collectionDetails.position, 0, selectAnnotation);\n    } else {\n      this.pdfViewer.signatureCollection.push(selectAnnotation);\n    }\n  };\n  // eslint-disable-next-line\n  Signature.prototype.checkSignatureCollection = function (signature) {\n    // eslint-disable-next-line\n    var collections = this.pdfViewer.signatureCollection;\n    if (collections && signature) {\n      for (var i = 0; i < collections.length; i++) {\n        if (collections[parseInt(i.toString(), 10)].annotationId === signature.signatureName) {\n          this.pdfViewer.signatureCollection.splice(i, 1);\n          return {\n            isExisting: true,\n            position: i\n          };\n        }\n      }\n    }\n    return {\n      isExisting: false,\n      position: null\n    };\n  };\n  /**\n   * @param signature\n   * @private\n   */\n  // eslint-disable-next-line\n  Signature.prototype.updateSignatureCollection = function (signature) {\n    // eslint-disable-next-line\n    var collections = this.pdfViewer.signatureCollection;\n    if (collections && signature) {\n      for (var i = 0; i < collections.length; i++) {\n        if (collections[parseInt(i.toString(), 10)].annotationId === signature.signatureName) {\n          this.pdfViewer.signatureCollection.splice(i, 1);\n          break;\n        }\n      }\n    }\n  };\n  /**\n   * @param pageNumber\n   * @param signature\n   * @private\n   */\n  // eslint-disable-next-line\n  Signature.prototype.addInCollection = function (pageNumber, signature) {\n    if (signature) {\n      this.storeSignatureCollections(signature, pageNumber);\n      // eslint-disable-next-line\n      var pageSignatures = this.getAnnotations(pageNumber, null);\n      if (pageSignatures) {\n        pageSignatures.push(signature);\n      }\n      this.manageAnnotations(pageSignatures, pageNumber);\n    }\n  };\n  // eslint-disable-next-line\n  Signature.prototype.getAnnotations = function (pageIndex, shapeAnnotations) {\n    // eslint-disable-next-line\n    var annotationCollection;\n    // eslint-disable-next-line\n    var storeObject = null;\n    if (this.pdfViewerBase.isStorageExceed) {\n      storeObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_sign'];\n    } else {\n      storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_sign');\n    }\n    if (storeObject) {\n      var annotObject = JSON.parse(storeObject);\n      var index = this.pdfViewer.annotationModule.getPageCollection(annotObject, pageIndex);\n      if (!isNullOrUndefined(index) && annotObject[parseInt(index.toString(), 10)]) {\n        annotationCollection = annotObject[parseInt(index.toString(), 10)].annotations;\n      } else {\n        annotationCollection = shapeAnnotations;\n      }\n    } else {\n      annotationCollection = shapeAnnotations;\n    }\n    return annotationCollection;\n  };\n  Signature.prototype.manageAnnotations = function (pageAnnotations, pageNumber) {\n    // eslint-disable-next-line\n    var storeObject = null;\n    if (this.pdfViewerBase.isStorageExceed) {\n      storeObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_sign'];\n    } else {\n      storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_sign');\n    }\n    if (storeObject) {\n      var annotObject = JSON.parse(storeObject);\n      window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_sign');\n      var index = this.pdfViewer.annotationModule.getPageCollection(annotObject, pageNumber);\n      if (annotObject[parseInt(index.toString(), 10)]) {\n        annotObject[parseInt(index.toString(), 10)].annotations = pageAnnotations;\n      }\n      var annotationStringified = JSON.stringify(annotObject);\n      if (this.pdfViewerBase.isStorageExceed) {\n        this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_sign'] = annotationStringified;\n      } else {\n        window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_sign', annotationStringified);\n      }\n    }\n  };\n  /**\n   * @private\n   * @param {boolean} isShow - Returns the true or false.\n   * @returns {void}\n   */\n  Signature.prototype.showSignatureDialog = function (isShow) {\n    if (isShow) {\n      this.createSignaturePanel();\n    }\n  };\n  /**\n   * @private\n   * @returns {void}\n   */\n  Signature.prototype.setAnnotationMode = function () {\n    this.pdfViewerBase.isToolbarSignClicked = true;\n    this.pdfViewerBase.isInitialField = false;\n    this.showSignatureDialog(true);\n  };\n  /**\n   * @private\n   * @returns {void}\n   */\n  Signature.prototype.setInitialMode = function () {\n    this.pdfViewerBase.isToolbarSignClicked = true;\n    this.pdfViewerBase.isInitialField = true;\n    this.showSignatureDialog(true);\n  };\n  /**\n   * @param number\n   * @private\n   */\n  // eslint-disable-next-line\n  Signature.prototype.ConvertPointToPixel = function (number) {\n    return number * (96 / 72);\n  };\n  /**\n   * @param signature\n   * @param pageIndex\n   * @param isImport\n   * @private\n   */\n  // eslint-disable-next-line\n  Signature.prototype.updateSignatureCollections = function (signature, pageIndex, isImport) {\n    var annot;\n    // eslint-disable-next-line\n    if (signature) {\n      // eslint-disable-next-line\n      var bounds = signature.Bounds;\n      var currentLeft = bounds.X;\n      var currentTop = bounds.Y;\n      var currentWidth = bounds.Width;\n      var currentHeight = bounds.Height;\n      // eslint-disable-next-line\n      var data = signature.PathData;\n      if (isImport) {\n        data = getPathString(JSON.parse(signature.PathData));\n      }\n      annot = {\n        // eslint-disable-next-line max-len\n        id: 'sign' + signature.SignatureName,\n        bounds: {\n          x: currentLeft,\n          y: currentTop,\n          width: currentWidth,\n          height: currentHeight\n        },\n        pageIndex: pageIndex,\n        data: data,\n        shapeAnnotationType: 'HandWrittenSignature',\n        opacity: signature.Opacity,\n        strokeColor: signature.StrokeColor,\n        thickness: signature.Thickness,\n        signatureName: signature.SignatureName\n      };\n      return annot;\n    }\n  };\n  /**\n   * @private\n   * @returns {void}\n   */\n  Signature.prototype.destroy = function () {\n    window.sessionStorage.removeItem('_annotations_sign');\n    // eslint-disable-next-line\n    var signImage = document.getElementById(this.pdfViewer.element.id + '_signElement');\n    if (signImage) {\n      signImage.removeEventListener('change', this.addStampImage);\n      if (signImage.parentElement) signImage.parentElement.removeChild(signImage);\n    }\n    if (this.signatureDialog) this.signatureDialog.destroy();\n  };\n  return Signature;\n}();\nexport { Signature };","map":{"version":3,"names":["createElement","isNullOrUndefined","isBlazor","Dialog","splitArrayCollection","processPathData","getPathString","TextBox","cloneObject","CheckBox","Tab","Button","DisplayMode","Signature","pdfViewer","pdfViewerBase","_this","mouseMoving","canvasTouched","imageSignatureDataUrl","drawSignatureDataUrl","newObject","outputString","drawOutputString","imageOutputString","signaturecollection","outputcollection","signAnnotationIndex","fontsign","signfontStyle","isSaveSignature","isSaveInitial","isInitialFiledSaveSignature","isSignatureFieldsSaveSignature","issaveTypeSignature","issaveImageSignature","issaveTypeInitial","issaveImageInitial","saveSignatureTypeString","saveInitialTypeString","saveTypeString","signatureTypeString","initialTypeString","saveUploadString","saveSignatureUploadString","saveInitialUploadString","signatureUploadString","initialUploadString","clearUploadString","textValue","signatureDrawString","initialDrawString","signatureTextContentTop","signatureTextContentLeft","saveSignatureString","saveInitialString","saveImageString","signatureFieldCollection","signatureImageString","initialImageString","maxSaveLimit","select","e","isSwiped","signaturetype","cancel","addStampImage","args","proxy","upoadedFiles","target","files","uploadedFile","type","split","reader","FileReader","onload","canvas","document","getElementById","element","id","context","getContext","image","Image","signbutton","style","visibility","drawImage","width","height","enableCreateButton","src","signatureImageHeight","naturalHeight","signatureImageWidth","naturalWidth","currentTarget","result","switchTabImageSignature","readAsDataURL","value","prototype","createSignaturePanel","maximumWidth","elementID","dialogDiv","className","display","pageContainer","appendChild","appearanceTab","createSignatureCanvas","signaturePanelHeader","isToolbarSignClicked","isInitialField","localeObj","getConstant","signatureDialog","content","showCloseIcon","closeOnEscape","isModal","header","cssClass","visible","allowDragging","beforeClose","clearSignatureCanvas","destroy","tabObj","signatureWindow","parentNode","removeChild","parentElement","drawSignatureWithTool","formFieldsModule","fireFocusOutFormField","name","setFocus","buttons","buttonModel","disabled","click","bind","closeSignaturePanel","isPrimary","addSignatureInPage","appendTo","offsetWidth","updateCanvasSize","enableRtl","checkboxItem","ej2_instances","items","label","drawCheckbox","hideSignatureCheckbox","typeCheckbox","imageCheckbox","querySelector","addEventListener","signaturePanelMouseDown","signaturePanelMouseMove","signaturePanelMouseUp","_dotnetInstance","invokeMethodAsync","drawSavedSignature","context_1","image_1","checkbox","checked","enableClearbutton","drawSavedTypeSignature","output","drawSavedImageSignature","handWrittenSignatureSettings","initialDialogSettings","hideSaveSignature","hideCheckboxParent","signatureDialogSettings","initialFieldSettings","signatureFieldSettings","saveSignatureCheckbox","saveSignatureImage","toDataURL","addSignature","annot","annotationName","annotation","createGUID","currentSignatureAnnot","isSignatureAdded","pageIndex","currentPageNumber","thickness","opacity","strokeColor","fontSize","fontFamily","signatureBounds","updateSignatureAspectRatio","signatureCount","bounds","data","shapeAnnotationType","signatureName","addSignatureCollection","hideSignaturePanel","checkSaveFiledSign","saveTypeSignature","saveUploadSignature","drawSignature","isSignature","currentField","currentData","collectionData","csData","minimumX","minimumY","maximumX","maximumY","signatureCanvas","signatureCavasWidth","signatureCavasHeight","m","length","val","parseFloat","toString","point1","point2","clientWidth","clientHeight","newdifferenceX","newdifferenceY","signBounds","calculateSignatureBounds","zoomvalue","getZoomFactor","pageDiv","currentLeft","currentWidth","currentTop","currentHeight","x","y","left","currentLeftDiff","top","currentTopDiff","ratioX","ratioY","isSignatureStretched","isHeightStretched","leftDifference","topDifference","fieldWidth","ConvertPointToPixel","LineBounds","Width","fieldHeight","Height","fieldWidthRatio","fieldHeightRatio","canvasWidthRatio","canvasHeightRatio","fieldRotation","offsetParent","transform","RotationAngle","Math","abs","ratioDifference","leftValueDiff","topValueDiff","signatureFitMode","focus","removeFocus","signatureElement","classList","add","signatureFields","getSignField","i","signatureFieldId","formDesignerModule","parseInt","FormField","uniqueID","remove","getFormDesignerSignField","getFormFieldSignField","getItemFromSessionStorage","formFieldsData","JSON","parse","Name","PageIndex","push","initialField","saveSign","typeAddSignature","imageAddSignature","zoomFactor","signtypevalue","updateSignatureTypeValue","inputValue","dynamicText","signatureModule","fontName","saveDrawSignature","standardImageRatio","imageCanvas","uploadString","imageString","isType","fontElements","querySelectorAll","j","borderColor","textContent","hide","bindTypeSignatureClickEvent","fontElement","typeSignatureclicked","bindDrawSignatureClickEvent","event","eventTarget","previousField","field","appearanceDiv","styles","border","backgroundColor","boxSizing","borderRadius","signaturePanelMouseLeave","checkBoxObj","input","saveCheckBoxContent","typeDiv","inputText","inputobj","placeholder","floatLabelType","fontDiv","color","marginTop","paddingRight","renderSignatureText","tab","uploadDiv","button","uploadButton","position","uploadCanvas","zIndex","imageUploadString","ctx_1","image_2","uploadSignatureImage","FontName","fontSignature","typeSignatureFonts","showHideSignatureTab","displayMode","selected","handleSelectEvent","selecting","headerText","tabInstance","headerValue","text","selectedItem","toLocaleLowerCase","enableCreateSignatureButton","textbox","drawSignOnTabSwitch","imageSignOnTabSwitch","Draw","Text","Upload","createSignatureFileElement","signImage","attrs","setAttribute","body","textBox","innerHTML","clickSign","typeSignatureclick","createButton","getElementsByClassName","newCanvas","signatureType","k","differenceX","differenceY","top_1","beginPath","n","moveTo","lineTo","stroke","closePath","signCollection","imageCount","signature","imageData","isInitial","getSaveLimit","limit","RenderSavedSignature","isAddedSignClicked","keyString","signatureFontFamily","collection","collectionAddedsign","signatureIndex","signatureId","setTabItemWidth","fontAppearance","padding","canvasWidth","margin","elem","getComputedStyle","paddingLeft","context_2","canvasContent","image_3","fontInnerDiv","preventDefault","findMousePosition","mouseDetection","oldX","mouseX","oldY","mouseY","drawMousePosition","isEnable","createbtn","clearbtn","offsetX","offsetY","indexOf","currentRect","getBoundingClientRect","changedTouches","clientX","clientY","drawSignatureInCanvas","lineWidth","arc","PI","convertToPath","movePath","linePath","isCanvasClear","drawObject","previousIndex","selectedIndex","isClearDrawTab","isClearTypeTab","isClearImageTab","contains","checkBoxElement","nextElementSibling","clearRect","fontdiv","saveSignature","storeObject","isStorageExceed","annotationStorage","documentId","window","sessionStorage","getItem","annotations","Array","pageCount","annotationCollection","newArray","pageAnnotationObject","z","isSignatureEditable","signatureSettings","annotationSettings","annotationAuthor","author","strokeColorString","stringify","getRgbCode","getBounds","checkDefaultFont","signTypeCanvas","canvasContext","textAlign","font","fillText","colorString","match","annotationModule","nameToHash","stringArray","getValue","r","g","b","a","renderSignature","currentAnnotation","canvass","renderDrawing","signatureAdded","storeSignatureData","fireSignatureAdd","renderExistingSignature","isImport","isAnnotationAdded","p","PathData","IsSignature","AnnotationType","includes","rectDiff","rectDifference","Bounds","X","Y","FontFamily","FontSize","Opacity","StrokeColor","Thickness","SignatureName","navigationPane","annotationMenuObj","enableItems","pageNumber","addAction","wrapper","children","pivot","Value","sessionSize","round","clearAnnotationStorage","isFormStorageExceed","clearFormFieldStorage","index","storeSignatureCollections","shapeAnnotation","annotationStringified","setItem","annotObject","removeItem","pageIndex_1","getPageCollection","markupAnnotation","modifySignatureCollection","property","annotationBase","isSignatureEdited","updateDocumentEditedProperty","currentAnnotObject","pageAnnotations","getAnnotations","top_2","strokeWidth","updateSignatureCollection","splice","manageAnnotations","collectionDetails","checkSignatureCollection","selectAnnotation","annotationId","annotName","uniqueKey","isExisting","signatureCollection","collections","addInCollection","pageSignatures","shapeAnnotations","showSignatureDialog","isShow","setAnnotationMode","setInitialMode","number","updateSignatureCollections","removeEventListener"],"sources":["/Users/saleem/Desktop/KClient/Web App/Ver_3.6/User Interface/website_Source files/node_modules/@syncfusion/ej2-pdfviewer/src/pdfviewer/base/signature.js"],"sourcesContent":["import { createElement, isNullOrUndefined, isBlazor } from '@syncfusion/ej2-base';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { splitArrayCollection, processPathData, getPathString } from '@syncfusion/ej2-drawings';\nimport { TextBox } from '@syncfusion/ej2-inputs';\nimport { cloneObject } from '../drawing/drawing-util';\nimport { CheckBox } from '@syncfusion/ej2-buttons';\nimport { Tab } from '@syncfusion/ej2-navigations';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { DisplayMode } from './types';\n/**\n * @hidden\n */\nvar Signature = /** @class */ (function () {\n    /**\n     * Initialize the constructor of blazorUIadapater.\n     * @private\n     * @param { PdfViewer } pdfViewer - Specified PdfViewer class.\n     * @param { PdfViewerBase } pdfViewerBase - The pdfViewerBase.\n     */\n    function Signature(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        this.mouseMoving = true;\n        this.canvasTouched = false;\n        this.imageSignatureDataUrl = '';\n        this.drawSignatureDataUrl = '';\n        // eslint-disable-next-line\n        this.newObject = [];\n        /**\n         * @private\n         */\n        this.outputString = '';\n        /**\n         * @private\n         */\n        this.drawOutputString = '';\n        /**\n        * @private\n        */\n        this.imageOutputString = '';\n        /**\n         * @private\n         */\n        // eslint-disable-next-line\n        this.signaturecollection = [];\n        /**\n         * @private\n         */\n        // eslint-disable-next-line\n        this.outputcollection = [];\n        /**\n         * @private\n         */\n        // eslint-disable-next-line\n        this.signAnnotationIndex = [];\n        // eslint-disable-next-line\n        this.fontsign = [];\n        // eslint-disable-next-line\n        this.signfontStyle = [];\n        this.isSaveSignature = false;\n        this.isSaveInitial = false;\n        this.isInitialFiledSaveSignature = false;\n        this.isSignatureFieldsSaveSignature = false;\n        this.issaveTypeSignature = false;\n        this.issaveImageSignature = false;\n        this.issaveTypeInitial = false;\n        this.issaveImageInitial = false;\n        this.saveSignatureTypeString = '';\n        this.saveInitialTypeString = '';\n        this.saveTypeString = '';\n        this.signatureTypeString = '';\n        this.initialTypeString = '';\n        this.saveUploadString = '';\n        this.saveSignatureUploadString = '';\n        this.saveInitialUploadString = '';\n        this.signatureUploadString = '';\n        this.initialUploadString = '';\n        this.clearUploadString = false;\n        this.textValue = '';\n        this.signatureDrawString = '';\n        this.initialDrawString = '';\n        // eslint-disable-next-line\n        this.signatureTextContentTop = 0.2;\n        // eslint-disable-next-line\n        this.signatureTextContentLeft = 0.7;\n        // eslint-disable-next-line\n        this.saveSignatureString = '';\n        // eslint-disable-next-line\n        this.saveInitialString = '';\n        /**\n         * @private\n         */\n        // eslint-disable-next-line\n        this.saveImageString = '';\n        this.signatureFieldCollection = [];\n        this.signatureImageString = '';\n        this.initialImageString = '';\n        /**\n         * @private\n         */\n        // eslint-disable-next-line\n        this.maxSaveLimit = 5;\n        this.select = function (e) {\n            if (this.canvasTouched) {\n                this.mouseMoving = true;\n                this.canvasTouched = false;\n            }\n            if (e.isSwiped && this.signaturetype == 'Draw' && this.mouseMoving) {\n                e.cancel = true;\n                this.mouseMoving = false;\n            }\n        };\n        // eslint-disable-next-line\n        this.addStampImage = function (args) {\n            // eslint-disable-next-line\n            var proxy = _this;\n            // eslint-disable-next-line\n            var upoadedFiles = args.target.files;\n            if (args.target.files[0] !== null) {\n                var uploadedFile = upoadedFiles[0];\n                if (uploadedFile.type.split('/')[0] === 'image') {\n                    var reader = new FileReader();\n                    // eslint-disable-next-line\n                    reader.onload = function (e) {\n                        // eslint-disable-next-line\n                        var canvas = document.getElementById(_this.pdfViewer.element.id + '_signatureuploadCanvas_');\n                        // eslint-disable-next-line\n                        var context = canvas.getContext('2d');\n                        // eslint-disable-next-line\n                        var image = new Image();\n                        // eslint-disable-next-line\n                        var proxy = _this;\n                        image.onload = function () {\n                            // eslint-disable-next-line\n                            var signbutton = document.getElementById(_this.pdfViewer.element.id + '_e-pv-upload-button');\n                            signbutton.style.visibility = 'hidden';\n                            context.drawImage(image, 0, 0, canvas.width, canvas.height);\n                            proxy.enableCreateButton(false);\n                            proxy.outputString = image.src;\n                            proxy.signatureImageHeight = image.naturalHeight;\n                            proxy.signatureImageWidth = image.naturalWidth;\n                        };\n                        image.src = e.currentTarget.result;\n                        proxy.outputString = e.currentTarget.result;\n                        proxy.switchTabImageSignature = e.currentTarget.result;\n                    };\n                    reader.readAsDataURL(uploadedFile);\n                }\n            }\n            args.target.value = '';\n            args.currentTarget.value = '';\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     * @returns {void}\n     */\n    Signature.prototype.createSignaturePanel = function () {\n        var _this = this;\n        var maximumWidth = 750;\n        this.imageSignatureDataUrl = \"\";\n        this.drawSignatureDataUrl = \"\";\n        if (!isBlazor()) {\n            var elementID = this.pdfViewer.element.id;\n            var dialogDiv = createElement('div', { id: elementID + '_signature_window', className: 'e-pv-signature-window' });\n            dialogDiv.style.display = 'block';\n            this.pdfViewerBase.pageContainer.appendChild(dialogDiv);\n            var appearanceTab = this.createSignatureCanvas();\n            var signaturePanelHeader = void 0;\n            if (!this.pdfViewerBase.isToolbarSignClicked) {\n                if (this.pdfViewerBase.isInitialField) {\n                    signaturePanelHeader = this.pdfViewer.localeObj.getConstant('HandwrittenInitialDialogHeaderText');\n                }\n                else {\n                    signaturePanelHeader = this.pdfViewer.localeObj.getConstant('HandwrittenSignatureDialogHeaderText');\n                }\n            }\n            else {\n                if (this.pdfViewerBase.isInitialField) {\n                    signaturePanelHeader = this.pdfViewer.localeObj.getConstant('InitialFieldDialogHeaderText');\n                }\n                else {\n                    signaturePanelHeader = this.pdfViewer.localeObj.getConstant('SignatureFieldDialogHeaderText');\n                }\n            }\n            if (this.signatureDialog) {\n                this.signatureDialog.content = appearanceTab;\n            }\n            else {\n                this.signatureDialog = new Dialog({\n                    // eslint-disable-next-line max-len\n                    showCloseIcon: true, closeOnEscape: false, isModal: true, header: signaturePanelHeader, cssClass: 'e-pv-signature-dialog-height',\n                    target: this.pdfViewer.element, content: appearanceTab, width: '750px', visible: true, allowDragging: true,\n                    beforeClose: function () {\n                        _this.clearSignatureCanvas();\n                        _this.signatureDialog.destroy();\n                        _this.signatureDialog = null;\n                        if (_this.tabObj) {\n                            _this.tabObj.destroy();\n                        }\n                        // eslint-disable-next-line\n                        var signatureWindow = document.getElementById(_this.pdfViewer.element.id + '_signature_window');\n                        if (signatureWindow) {\n                            // eslint-disable-next-line\n                            signatureWindow.parentNode ? signatureWindow.parentNode.removeChild(signatureWindow) : signatureWindow.parentElement.removeChild(signatureWindow);\n                        }\n                        // eslint-disable-next-line max-len\n                        if (!_this.pdfViewerBase.isToolbarSignClicked && !_this.pdfViewerBase.drawSignatureWithTool && !isNullOrUndefined(_this.pdfViewer.formFieldsModule.currentTarget)) {\n                            _this.pdfViewer.fireFocusOutFormField(_this.pdfViewer.formFieldsModule.currentTarget.name, '');\n                        }\n                        _this.pdfViewerBase.isToolbarSignClicked = false;\n                        _this.setFocus();\n                    }\n                });\n                this.signatureDialog.buttons = [\n                    // eslint-disable-next-line max-len\n                    { buttonModel: { content: this.pdfViewer.localeObj.getConstant('Clear'), disabled: true, cssClass: 'e-pv-clearbtn' }, click: this.clearSignatureCanvas.bind(this) },\n                    // eslint-disable-next-line max-len\n                    { buttonModel: { content: this.pdfViewer.localeObj.getConstant('Cancel'), cssClass: 'e-pv-cancelbtn' }, click: this.closeSignaturePanel.bind(this) },\n                    // eslint-disable-next-line max-len\n                    { buttonModel: { content: this.pdfViewer.localeObj.getConstant('Create'), isPrimary: true, disabled: true, cssClass: 'e-pv-createbtn' }, click: this.addSignatureInPage.bind(this) }\n                ];\n                this.signatureDialog.appendTo(dialogDiv);\n            }\n            if (this.pdfViewer.element.offsetWidth < maximumWidth)\n                this.updateCanvasSize();\n            if (this.pdfViewer.enableRtl) {\n                this.signatureDialog.enableRtl = this.pdfViewer.enableRtl;\n            }\n            var checkboxItem = this.signatureDialog.content.ej2_instances[0].items[0];\n            if (checkboxItem.header.label === 'DRAW') {\n                var drawCheckbox = document.getElementById(\"checkbox\");\n                this.hideSignatureCheckbox(drawCheckbox);\n            }\n            else if (checkboxItem.header.label === 'TYPE') {\n                var typeCheckbox = document.getElementById(\"checkbox1\");\n                this.hideSignatureCheckbox(typeCheckbox);\n            }\n            else {\n                var imageCheckbox = document.getElementById(\"checkbox2\");\n                this.hideSignatureCheckbox(imageCheckbox);\n            }\n        }\n        else {\n            // eslint-disable-next-line\n            var canvas = document.getElementById(this.pdfViewer.element.id + '_signatureCanvas_');\n            if (canvas) {\n                if (!this.pdfViewerBase.pageContainer.querySelector('.e-pv-signature-window')) {\n                    var elementID = this.pdfViewer.element.id;\n                    // eslint-disable-next-line max-len\n                    var dialogDiv = createElement('div', { id: elementID + '_signature_window', className: 'e-pv-signature-window' });\n                    dialogDiv.style.display = 'block';\n                    this.pdfViewerBase.pageContainer.appendChild(dialogDiv);\n                }\n                canvas.addEventListener('mousedown', this.signaturePanelMouseDown.bind(this));\n                canvas.addEventListener('mousemove', this.signaturePanelMouseMove.bind(this));\n                canvas.addEventListener('mouseup', this.signaturePanelMouseUp.bind(this));\n                canvas.addEventListener('mouseleave', this.signaturePanelMouseUp.bind(this));\n                canvas.addEventListener('touchstart', this.signaturePanelMouseDown.bind(this));\n                canvas.addEventListener('touchmove', this.signaturePanelMouseMove.bind(this));\n                canvas.addEventListener('touchend', this.signaturePanelMouseUp.bind(this));\n                this.clearSignatureCanvas();\n            }\n            this.pdfViewer._dotnetInstance.invokeMethodAsync('OpenSignaturePanel', this.pdfViewerBase.isToolbarSignClicked);\n        }\n        this.drawSavedSignature();\n    };\n    Signature.prototype.drawSavedSignature = function () {\n        if (!this.pdfViewerBase.isToolbarSignClicked && (this.isSaveSignature || this.isSaveInitial)) {\n            if (!this.pdfViewerBase.isInitialField && this.isSaveSignature) {\n                this.outputString = this.saveSignatureString;\n            }\n            else if (this.pdfViewerBase.isInitialField && this.isSaveInitial) {\n                this.outputString = this.saveInitialString;\n            }\n            // eslint-disable-next-line\n            var canvas = document.getElementById(this.pdfViewer.element.id + '_signatureCanvas_');\n            // eslint-disable-next-line\n            var context_1 = canvas.getContext('2d');\n            // eslint-disable-next-line\n            var image_1 = new Image();\n            image_1.onload = function () {\n                context_1.drawImage(image_1, 0, 0);\n            };\n            if (!this.pdfViewerBase.isInitialField && this.isSaveSignature) {\n                image_1.src = this.signatureDrawString;\n            }\n            else if (this.pdfViewerBase.isInitialField && this.isSaveInitial) {\n                image_1.src = this.initialDrawString;\n            }\n            // eslint-disable-next-line\n            var checkbox = document.getElementById(this.pdfViewer.element.id + '_signatureCheckBox');\n            if (checkbox) {\n                checkbox.checked = true;\n            }\n            this.enableCreateButton(false);\n            this.enableClearbutton(false);\n        }\n    };\n    Signature.prototype.drawSavedTypeSignature = function () {\n        var output = '';\n        if (!this.pdfViewerBase.isToolbarSignClicked && (this.issaveTypeSignature || this.issaveTypeInitial)) {\n            if (!this.pdfViewerBase.isInitialField && this.issaveTypeSignature) {\n                output = this.saveSignatureTypeString;\n            }\n            else {\n                output = this.saveInitialTypeString;\n            }\n        }\n        return output;\n    };\n    ;\n    Signature.prototype.drawSavedImageSignature = function () {\n        var output = '';\n        if (!this.pdfViewerBase.isToolbarSignClicked && (this.issaveImageSignature || this.issaveImageInitial)) {\n            if (!this.pdfViewerBase.isInitialField && this.issaveImageSignature) {\n                output = this.saveSignatureUploadString;\n            }\n            else {\n                output = this.saveInitialUploadString;\n            }\n        }\n        return output;\n    };\n    ;\n    Signature.prototype.hideSignatureCheckbox = function (checkbox) {\n        if (this.pdfViewerBase.isToolbarSignClicked) {\n            if (this.pdfViewerBase.isInitialField) {\n                if (this.pdfViewer.handWrittenSignatureSettings.initialDialogSettings && this.pdfViewer.handWrittenSignatureSettings.initialDialogSettings.hideSaveSignature) {\n                    this.hideCheckboxParent(checkbox);\n                }\n            }\n            else if (this.pdfViewer.handWrittenSignatureSettings.signatureDialogSettings && this.pdfViewer.handWrittenSignatureSettings.signatureDialogSettings.hideSaveSignature) {\n                this.hideCheckboxParent(checkbox);\n            }\n        }\n        else {\n            if (this.pdfViewerBase.isInitialField) {\n                if (this.pdfViewer.initialFieldSettings.initialDialogSettings && this.pdfViewer.initialFieldSettings.initialDialogSettings.hideSaveSignature) {\n                    this.hideCheckboxParent(checkbox);\n                }\n            }\n            else {\n                if (this.pdfViewer.signatureFieldSettings.signatureDialogSettings && this.pdfViewer.signatureFieldSettings.signatureDialogSettings.hideSaveSignature) {\n                    this.hideCheckboxParent(checkbox);\n                }\n            }\n        }\n    };\n    Signature.prototype.saveSignatureCheckbox = function () {\n        if (this.pdfViewerBase.isToolbarSignClicked) {\n            return false;\n        }\n        else {\n            if (this.pdfViewerBase.isInitialField) {\n                if (this.pdfViewer.initialFieldSettings.initialDialogSettings && this.pdfViewer.initialFieldSettings.initialDialogSettings.hideSaveSignature) {\n                    return false;\n                }\n                else {\n                    return this.isInitialFiledSaveSignature;\n                }\n            }\n            else {\n                if (this.pdfViewer.signatureFieldSettings.signatureDialogSettings && this.pdfViewer.signatureFieldSettings.signatureDialogSettings.hideSaveSignature) {\n                    return false;\n                }\n                else {\n                    return this.isSignatureFieldsSaveSignature;\n                }\n            }\n        }\n    };\n    Signature.prototype.hideCheckboxParent = function (checkbox) {\n        if (checkbox) {\n            checkbox.parentElement.style.display = 'none';\n        }\n    };\n    Signature.prototype.saveSignatureImage = function () {\n        // eslint-disable-next-line\n        var checkbox = document.getElementById(this.pdfViewer.element.id + '_signatureCheckBox');\n        if (checkbox && checkbox.checked) {\n            if (this.outputString !== '') {\n                if (!this.pdfViewerBase.isInitialField) {\n                    this.isSaveSignature = true;\n                    this.saveSignatureString = this.outputString;\n                }\n                else {\n                    this.isSaveInitial = true;\n                    this.saveInitialString = this.outputString;\n                }\n                // eslint-disable-next-line\n                var canvas = document.getElementById(this.pdfViewer.element.id + '_signatureCanvas_');\n                this.saveImageString = canvas.toDataURL();\n                if (!this.pdfViewerBase.isInitialField) {\n                    this.signatureImageString = this.saveImageString;\n                }\n                else {\n                    this.initialImageString = this.saveImageString;\n                }\n            }\n        }\n        else {\n            if (this.isSaveSignature && !this.pdfViewerBase.isInitialField) {\n                this.isSaveSignature = false;\n                this.saveSignatureString = '';\n                this.saveImageString = '';\n                this.signatureImageString = '';\n            }\n            else if (this.isSaveInitial && this.pdfViewerBase.isInitialField) {\n                this.isSaveInitial = false;\n                this.saveInitialString = '';\n                this.saveImageString = '';\n                this.initialImageString = '';\n            }\n            this.clearSignatureCanvas();\n        }\n    };\n    /**\n     * @param type\n     * @private\n     */\n    // eslint-disable-next-line\n    Signature.prototype.addSignature = function (type) {\n        var annot;\n        if (this.pdfViewerBase.isToolbarSignClicked) {\n            var annotationName = this.pdfViewer.annotation.createGUID();\n            this.pdfViewerBase.currentSignatureAnnot = null;\n            this.pdfViewerBase.isSignatureAdded = true;\n            var pageIndex = this.pdfViewerBase.currentPageNumber - 1;\n            // eslint-disable-next-line max-len\n            var thickness = this.pdfViewer.handWrittenSignatureSettings.thickness ? this.pdfViewer.handWrittenSignatureSettings.thickness : 1;\n            // eslint-disable-next-line max-len\n            var opacity = this.pdfViewer.handWrittenSignatureSettings.opacity ? this.pdfViewer.handWrittenSignatureSettings.opacity : 1;\n            // eslint-disable-next-line max-len\n            var strokeColor = this.pdfViewer.handWrittenSignatureSettings.strokeColor ? this.pdfViewer.handWrittenSignatureSettings.strokeColor : '#000000';\n            var fontSize = 16;\n            var fontFamily = 'Helvetica';\n            var signatureBounds = this.updateSignatureAspectRatio(this.outputString, true);\n            // eslint-disable-next-line\n            var canvas = document.getElementById(this.pdfViewer.element.id + '_signatureCanvas_');\n            this.saveImageString = canvas.toDataURL();\n            if (!this.pdfViewerBase.isInitialField) {\n                this.signatureImageString = this.saveImageString;\n            }\n            else {\n                this.initialImageString = this.saveImageString;\n            }\n            annot = {\n                // eslint-disable-next-line max-len\n                id: 'sign' + this.pdfViewerBase.signatureCount, bounds: signatureBounds, pageIndex: pageIndex, data: this.outputString, fontFamily: fontFamily, fontSize: fontSize,\n                shapeAnnotationType: 'HandWrittenSignature', opacity: opacity, strokeColor: strokeColor, thickness: thickness, signatureName: annotationName\n            };\n            this.pdfViewerBase.currentSignatureAnnot = annot;\n            // eslint-disable-next-line\n            var checkbox = void 0;\n            if (isBlazor()) {\n                checkbox = document.getElementById(this.pdfViewer.element.id + '_signatureCheckBox');\n            }\n            else {\n                checkbox = document.getElementById('checkbox');\n            }\n            if (checkbox && checkbox.checked) {\n                this.addSignatureCollection();\n            }\n            this.hideSignaturePanel();\n            this.pdfViewerBase.isToolbarSignClicked = false;\n        }\n        else {\n            // eslint-disable-next-line\n            var checkbox = document.getElementById('checkbox');\n            var typeCheckbox = document.getElementById('checkbox1');\n            var imageCheckbox = document.getElementById('checkbox2');\n            var isSignatureAdded = false;\n            if (!isSignatureAdded) {\n                // eslint-disable-next-line\n                var canvas = document.getElementById(this.pdfViewer.element.id + '_signatureCanvas_');\n                this.saveImageString = canvas.toDataURL();\n                if (checkbox) {\n                    if (checkbox.checked) {\n                        if (!this.pdfViewerBase.isInitialField) {\n                            this.isSaveSignature = true;\n                            this.signatureDrawString = this.saveImageString;\n                            this.saveSignatureString = this.outputString;\n                        }\n                        else {\n                            this.isSaveInitial = true;\n                            this.initialDrawString = this.saveImageString;\n                            this.saveInitialString = this.outputString;\n                        }\n                        this.checkSaveFiledSign(this.pdfViewerBase.isInitialField, true);\n                    }\n                    else {\n                        if (!this.pdfViewerBase.isInitialField) {\n                            this.isSaveSignature = false;\n                            this.saveSignatureString = '';\n                        }\n                        else {\n                            this.isSaveInitial = false;\n                            this.saveInitialString = '';\n                        }\n                        this.checkSaveFiledSign(this.pdfViewerBase.isInitialField, false);\n                    }\n                }\n                this.saveTypeSignature(typeCheckbox);\n                this.saveUploadSignature(imageCheckbox);\n                if (!this.pdfViewerBase.isInitialField) {\n                    this.signatureImageString = this.saveImageString;\n                }\n                else {\n                    this.initialImageString = this.saveImageString;\n                }\n                this.pdfViewer.formFieldsModule.drawSignature(null, null, this.pdfViewerBase.currentTarget, null);\n                isSignatureAdded = true;\n            }\n        }\n    };\n    /**\n    * @param data\n    * @param isSignature\n    * @param currentField\n    * @param data\n    * @param isSignature\n    * @param currentField\n    * @param data\n    * @param isSignature\n    * @param currentField\n    * @private\n    */\n    // eslint-disable-next-line\n    Signature.prototype.updateSignatureAspectRatio = function (data, isSignature, currentField, currentData) {\n        // eslint-disable-next-line\n        var collectionData = processPathData(data);\n        // eslint-disable-next-line\n        var csData = splitArrayCollection(collectionData);\n        var minimumX = -1;\n        var minimumY = -1;\n        var maximumX = -1;\n        var maximumY = -1;\n        var signatureCanvas = document.getElementById(this.pdfViewer.element.id + '_signatureCanvas_');\n        var signatureCavasWidth = 0;\n        var signatureCavasHeight = 0;\n        for (var m = 0; m < csData.length; m++) {\n            // eslint-disable-next-line\n            var val = csData[m];\n            if (minimumX === -1) {\n                // eslint-disable-next-line\n                minimumX = parseFloat(val['x'].toString());\n                // eslint-disable-next-line\n                maximumX = parseFloat(val['x'].toString());\n                // eslint-disable-next-line\n                minimumY = parseFloat(val['y'].toString());\n                // eslint-disable-next-line\n                maximumY = parseFloat(val['y'].toString());\n            }\n            else {\n                // eslint-disable-next-line\n                var point1 = parseFloat(val['x'].toString());\n                // eslint-disable-next-line\n                var point2 = parseFloat(val['y'].toString());\n                if (minimumX >= point1) {\n                    minimumX = point1;\n                }\n                if (minimumY >= point2) {\n                    minimumY = point2;\n                }\n                if (maximumX <= point1) {\n                    maximumX = point1;\n                }\n                if (maximumY <= point2) {\n                    maximumY = point2;\n                }\n            }\n        }\n        signatureCavasWidth = signatureCanvas ? signatureCanvas.clientWidth : 650;\n        signatureCavasHeight = signatureCanvas ? signatureCanvas.clientHeight : 300;\n        var newdifferenceX = maximumX - minimumX;\n        var newdifferenceY = maximumY - minimumY;\n        var signBounds = this.calculateSignatureBounds(signatureCavasWidth, signatureCavasHeight, newdifferenceX, newdifferenceY, isSignature, currentField, currentData);\n        if (isSignature) {\n            var zoomvalue = this.pdfViewerBase.getZoomFactor();\n            var pageIndex = this.pdfViewerBase.currentPageNumber - 1;\n            var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + pageIndex);\n            var currentLeft = ((parseFloat(pageDiv.style.width) / 2) - (signBounds.currentWidth / 2)) / zoomvalue;\n            // eslint-disable-next-line max-len\n            var currentTop = ((parseFloat(pageDiv.style.height) / 2) - (signBounds.currentHeight / 2)) / zoomvalue;\n            return { x: currentLeft, y: currentTop, width: signBounds.currentWidth, height: signBounds.currentHeight };\n        }\n        else {\n            return { left: signBounds.currentLeftDiff, top: signBounds.currentTopDiff, width: signBounds.currentWidth, height: signBounds.currentHeight };\n        }\n    };\n    Signature.prototype.calculateSignatureBounds = function (signatureCavasWidth, signatureCavasHeight, newdifferenceX, newdifferenceY, isSignature, currentField, currentData) {\n        var ratioX = newdifferenceX / signatureCavasWidth;\n        var ratioY = newdifferenceY / signatureCavasHeight;\n        var zoomvalue = this.pdfViewerBase.getZoomFactor();\n        var currentWidth = 0;\n        var currentHeight = 0;\n        var isSignatureStretched = false;\n        var isHeightStretched = false;\n        var leftDifference = 0;\n        var topDifference = 0;\n        if (isSignature) {\n            currentWidth = this.pdfViewer.handWrittenSignatureSettings.width ? this.pdfViewer.handWrittenSignatureSettings.width : 150;\n            currentHeight = this.pdfViewer.handWrittenSignatureSettings.height ? this.pdfViewer.handWrittenSignatureSettings.height : 100;\n        }\n        else {\n            var fieldWidth = currentField ? currentField.style.width === '100%' ? currentField.clientWidth : parseFloat(currentField.style.width) : this.ConvertPointToPixel(currentData.LineBounds.Width);\n            var fieldHeight = currentField ? currentField.style.height === '100%' ? currentField.clientHeight : parseFloat(currentField.style.height) : this.ConvertPointToPixel(currentData.LineBounds.Height);\n            var fieldWidthRatio = fieldWidth / fieldHeight;\n            var fieldHeightRatio = fieldHeight / fieldWidth;\n            var canvasWidthRatio = signatureCavasWidth / signatureCavasHeight;\n            var canvasHeightRatio = signatureCavasHeight / signatureCavasWidth;\n            var fieldRotation = currentField ? currentField.offsetParent.offsetParent.style.transform ? currentField.offsetParent.offsetParent.style.transform : currentField.style.transform : currentData.RotationAngle;\n            if ((fieldWidthRatio > canvasWidthRatio) || (fieldHeightRatio > canvasWidthRatio) || ((Math.abs(fieldWidthRatio - fieldHeightRatio)) <= 1)) {\n                var ratioDifference = 0;\n                if ((fieldHeightRatio > canvasWidthRatio) || ((Math.abs(fieldWidthRatio - fieldHeightRatio)) <= 1)) {\n                    isHeightStretched = true;\n                    ratioDifference = fieldHeightRatio / canvasHeightRatio;\n                }\n                else {\n                    isSignatureStretched = true;\n                    ratioDifference = fieldWidthRatio / canvasWidthRatio;\n                }\n                if (fieldRotation === 'rotate(90deg)' || fieldRotation === 'rotate(270deg)') {\n                    // eslint-disable-next-line\n                    currentWidth = fieldHeight / zoomvalue;\n                    // eslint-disable-next-line\n                    currentHeight = fieldWidth / zoomvalue;\n                }\n                else {\n                    if (isSignatureStretched) {\n                        // eslint-disable-next-line\n                        leftDifference = fieldWidth / zoomvalue;\n                        // eslint-disable-next-line\n                        currentWidth = (fieldWidth / ratioDifference) / zoomvalue;\n                        // eslint-disable-next-line\n                        currentHeight = fieldHeight / zoomvalue;\n                    }\n                    if (isHeightStretched) {\n                        // eslint-disable-next-line\n                        topDifference = fieldHeight / zoomvalue;\n                        // eslint-disable-next-line\n                        currentWidth = fieldWidth / zoomvalue;\n                        // eslint-disable-next-line\n                        currentHeight = (fieldHeight / ratioDifference) / zoomvalue;\n                    }\n                }\n            }\n            else {\n                if (fieldRotation === 'rotate(90deg)' || fieldRotation === 'rotate(270deg)') {\n                    // eslint-disable-next-line\n                    currentWidth = fieldHeight / zoomvalue;\n                    // eslint-disable-next-line\n                    currentHeight = fieldWidth / zoomvalue;\n                }\n                else {\n                    // eslint-disable-next-line\n                    currentWidth = fieldWidth / zoomvalue;\n                    // eslint-disable-next-line\n                    currentHeight = fieldHeight / zoomvalue;\n                }\n            }\n        }\n        var currentLeftDiff = (signatureCavasWidth - newdifferenceX) / 2;\n        var currentTopDiff = (signatureCavasHeight - newdifferenceY) / 2;\n        if (isSignatureStretched) {\n            currentLeftDiff = (currentLeftDiff / signatureCavasWidth) * leftDifference;\n            var leftValueDiff = ((leftDifference * ratioX) - (currentWidth * ratioX)) / 2;\n            currentLeftDiff = currentLeftDiff + leftValueDiff;\n            currentTopDiff = (currentTopDiff / signatureCavasHeight) * currentHeight;\n        }\n        else if (isHeightStretched) {\n            currentLeftDiff = (currentLeftDiff / signatureCavasWidth) * currentWidth;\n            currentTopDiff = (currentTopDiff / signatureCavasHeight) * topDifference;\n            var topValueDiff = ((topDifference * ratioY) - (currentHeight * ratioY)) / 2;\n            currentTopDiff = currentTopDiff + topValueDiff;\n        }\n        else {\n            currentLeftDiff = (currentLeftDiff / signatureCavasWidth) * currentWidth;\n            currentTopDiff = (currentTopDiff / signatureCavasHeight) * currentHeight;\n        }\n        if (this.pdfViewer.signatureFitMode !== \"Stretch\") {\n            currentWidth = currentWidth * ratioX;\n            currentHeight = currentHeight * ratioY;\n        }\n        return { currentLeftDiff: currentLeftDiff, currentTopDiff: currentTopDiff, currentWidth: currentWidth, currentHeight: currentHeight };\n    };\n    /**\n     * @private\n     */\n    Signature.prototype.setFocus = function (id) {\n        if (!id) {\n            if (this.currentTarget) {\n                document.getElementById(this.currentTarget.id).focus();\n            }\n        }\n        else {\n            this.removeFocus();\n            var signatureElement = document.getElementById(id);\n            signatureElement.classList.add('e-pv-signature-focus');\n        }\n    };\n    /**\n    * @private\n    */\n    Signature.prototype.removeFocus = function () {\n        if (this.signatureFieldCollection) {\n            // eslint-disable-next-line\n            var signatureFields = this.signatureFieldCollection;\n            if (signatureFields.length === 0) {\n                signatureFields = this.getSignField();\n            }\n            for (var i = 0; i < this.signatureFieldCollection.length; i++) {\n                var signatureFieldId = this.pdfViewer.formDesignerModule ? this.signatureFieldCollection[parseInt(i.toString(), 10)].FormField.uniqueID : this.signatureFieldCollection[parseInt(i.toString(), 10)].uniqueID;\n                var signatureElement = document.getElementById(signatureFieldId);\n                if (signatureElement) {\n                    signatureElement.classList.remove('e-pv-signature-focus');\n                }\n            }\n            if (this.pdfViewer.formFieldsModule.currentTarget) {\n                this.pdfViewer.formFieldsModule.currentTarget.classList.remove('e-pv-signature-focus');\n            }\n        }\n    };\n    // eslint-disable-next-line\n    Signature.prototype.getSignField = function () {\n        if (this.pdfViewer.formDesignerModule) {\n            this.signatureFieldCollection =\n                this.pdfViewer.formDesignerModule.getFormDesignerSignField(this.signatureFieldCollection);\n        }\n        else {\n            this.signatureFieldCollection = this.getFormFieldSignField();\n        }\n        return this.signatureFieldCollection;\n    };\n    Signature.prototype.getFormFieldSignField = function () {\n        // eslint-disable-next-line\n        var data = this.pdfViewerBase.getItemFromSessionStorage('_formfields');\n        // eslint-disable-next-line\n        var currentData;\n        if (data) {\n            // eslint-disable-next-line\n            var formFieldsData = JSON.parse(data);\n            for (var i = 0; i < formFieldsData.length; i++) {\n                currentData = formFieldsData[parseInt(i.toString(), 10)];\n                if (currentData.Name === 'SignatureField' || currentData.Name === 'InitialField') {\n                    // eslint-disable-next-line\n                    currentData['uniqueID'] = this.pdfViewer.element.id + 'input_' + currentData.PageIndex + '_' + i;\n                    this.signatureFieldCollection.push(formFieldsData[parseInt(i.toString(), 10)]);\n                }\n            }\n        }\n        return this.signatureFieldCollection;\n    };\n    Signature.prototype.checkSaveFiledSign = function (initialField, saveSign) {\n        if (initialField) {\n            this.isInitialFiledSaveSignature = saveSign;\n        }\n        else {\n            this.isSignatureFieldsSaveSignature = saveSign;\n        }\n    };\n    Signature.prototype.addSignatureInPage = function () {\n        if (this.signaturetype === 'Draw') {\n            this.addSignature();\n        }\n        else if (this.signaturetype === 'Type') {\n            this.typeAddSignature();\n        }\n        else {\n            this.imageAddSignature();\n        }\n        this.drawOutputString = '';\n        this.imageOutputString = '';\n    };\n    Signature.prototype.typeAddSignature = function (type) {\n        if (this.pdfViewerBase.isToolbarSignClicked) {\n            var zoomvalue = this.pdfViewerBase.getZoomFactor();\n            // eslint-disable-next-line\n            var annot = null;\n            var annotationName = this.pdfViewer.annotation.createGUID();\n            this.pdfViewerBase.currentSignatureAnnot = null;\n            this.pdfViewerBase.isSignatureAdded = true;\n            var pageIndex = this.pdfViewerBase.currentPageNumber - 1;\n            var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + pageIndex);\n            var thickness = this.pdfViewer.handWrittenSignatureSettings.thickness ? this.pdfViewer.handWrittenSignatureSettings.thickness : 1;\n            var opacity = this.pdfViewer.handWrittenSignatureSettings.opacity ? this.pdfViewer.handWrittenSignatureSettings.opacity : 1;\n            var strokeColor = this.pdfViewer.handWrittenSignatureSettings.strokeColor ? this.pdfViewer.handWrittenSignatureSettings.strokeColor : '#000000';\n            var fontSize = 16;\n            var currentLeft = 0;\n            var currentTop = 0;\n            var currentHeight = 65;\n            var currentWidth = 200;\n            if (!isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.height) && (this.pdfViewer.signatureFitMode === \"Stretch\")) {\n                currentHeight = this.pdfViewer.handWrittenSignatureSettings.height;\n            }\n            if (!isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.width) && (this.pdfViewer.signatureFitMode === \"Stretch\")) {\n                currentWidth = this.pdfViewer.handWrittenSignatureSettings.width;\n            }\n            currentLeft = ((parseFloat(pageDiv.style.width) / 2) - (currentWidth / 2)) / zoomvalue;\n            currentTop = ((parseFloat(pageDiv.style.height) / 2) - (currentHeight / 2)) / zoomvalue;\n            var zoomFactor = this.pdfViewerBase.getZoomFactor();\n            if (!this.signtypevalue) {\n                this.updateSignatureTypeValue(true);\n            }\n            var inputValue = this.signtypevalue;\n            annot = {\n                // eslint-disable-next-line max-len\n                id: 'Typesign' + this.pdfViewerBase.signatureCount, bounds: {\n                    left: currentLeft / zoomFactor, top: currentTop / zoomFactor, x: currentLeft / zoomFactor,\n                    // eslint-disable-next-line max-len\n                    y: currentTop / zoomFactor, width: currentWidth, height: currentHeight\n                }, pageIndex: pageIndex, dynamicText: inputValue, data: this.pdfViewerBase.signatureModule.outputString, shapeAnnotationType: 'SignatureText',\n                opacity: opacity, strokeColor: strokeColor, thickness: thickness, fontSize: fontSize, fontFamily: this.fontName, signatureName: annotationName\n            };\n            this.pdfViewerBase.currentSignatureAnnot = annot;\n            // eslint-disable-next-line\n            var checkbox = void 0;\n            if (isBlazor()) {\n                checkbox = document.getElementById(this.pdfViewer.element.id + '_signatureCheckBox');\n            }\n            else {\n                checkbox = document.getElementById('checkbox1');\n            }\n            if (checkbox && checkbox.checked) {\n                this.addSignatureCollection();\n            }\n            this.signtypevalue = '';\n            this.hideSignaturePanel();\n            this.pdfViewerBase.isToolbarSignClicked = false;\n        }\n        else {\n            var checkbox = document.getElementById('checkbox');\n            var typeCheckbox = document.getElementById('checkbox1');\n            var imageCheckbox = document.getElementById('checkbox2');\n            var isSignatureAdded = false;\n            if (!isSignatureAdded) {\n                this.saveDrawSignature(checkbox);\n                this.saveUploadSignature(imageCheckbox);\n                var canvas = document.getElementById(this.pdfViewer.element.id + '_signatureCanvas_');\n                this.saveTypeString = canvas.toDataURL();\n                this.updateSignatureTypeValue();\n                if (typeCheckbox && typeCheckbox.checked) {\n                    if (!this.pdfViewerBase.isInitialField) {\n                        this.isSaveSignature = true;\n                        this.signatureImageString = this.saveTypeString;\n                        this.saveSignatureTypeString = this.textValue;\n                        this.issaveTypeSignature = true;\n                    }\n                    else {\n                        this.isSaveInitial = true;\n                        this.initialImageString = this.saveTypeString;\n                        this.saveInitialTypeString = this.textValue;\n                        this.issaveTypeInitial = true;\n                    }\n                }\n                else {\n                    if (!this.pdfViewerBase.isInitialField) {\n                        this.isSaveSignature = false;\n                        this.saveSignatureTypeString = '';\n                        this.issaveTypeSignature = false;\n                    }\n                    else {\n                        this.isSaveInitial = false;\n                        this.saveInitialTypeString = '';\n                        this.issaveTypeInitial = false;\n                    }\n                }\n                if (!this.pdfViewerBase.isInitialField) {\n                    this.signatureTypeString = this.saveTypeString;\n                }\n                else {\n                    this.initialTypeString = this.saveTypeString;\n                }\n                this.pdfViewer.formFieldsModule.drawSignature('Type', this.textValue, this.pdfViewerBase.currentTarget);\n                isSignatureAdded = true;\n                this.hideSignaturePanel();\n            }\n        }\n    };\n    Signature.prototype.imageAddSignature = function (type) {\n        if (this.pdfViewerBase.isToolbarSignClicked) {\n            var zoomvalue = this.pdfViewerBase.getZoomFactor();\n            // eslint-disable-next-line\n            var annot = null;\n            var annotationName = this.pdfViewer.annotation.createGUID();\n            this.pdfViewerBase.currentSignatureAnnot = null;\n            this.pdfViewerBase.isSignatureAdded = true;\n            var pageIndex = this.pdfViewerBase.currentPageNumber - 1;\n            var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + pageIndex);\n            var thickness = this.pdfViewer.handWrittenSignatureSettings.thickness ? this.pdfViewer.handWrittenSignatureSettings.thickness : 1;\n            var opacity = this.pdfViewer.handWrittenSignatureSettings.opacity ? this.pdfViewer.handWrittenSignatureSettings.opacity : 1;\n            var strokeColor = this.pdfViewer.handWrittenSignatureSettings.strokeColor ? this.pdfViewer.handWrittenSignatureSettings.strokeColor : '#000000';\n            var fontSize = 16;\n            var currentLeft = 0;\n            var currentTop = 0;\n            var standardImageRatio = 100;\n            var currentHeight = 0;\n            var currentWidth = 0;\n            // eslint-disable-next-line max-len\n            if (!isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.height) && (this.pdfViewer.signatureFitMode === \"Stretch\")) {\n                currentHeight = this.pdfViewer.handWrittenSignatureSettings.height;\n            }\n            else if (this.signatureImageHeight >= this.signatureImageWidth) {\n                currentHeight = ((this.signatureImageHeight / this.signatureImageHeight) * standardImageRatio);\n            }\n            else {\n                currentHeight = ((this.signatureImageHeight / this.signatureImageWidth) * standardImageRatio);\n            }\n            if (!isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.width) && (this.pdfViewer.signatureFitMode === \"Stretch\")) {\n                currentWidth = this.pdfViewer.handWrittenSignatureSettings.width;\n            }\n            else if (this.signatureImageHeight >= this.signatureImageWidth) {\n                currentWidth = ((this.signatureImageWidth / this.signatureImageHeight) * standardImageRatio);\n            }\n            else {\n                currentWidth = ((this.signatureImageWidth / this.signatureImageWidth) * standardImageRatio);\n            }\n            currentLeft = ((parseFloat(pageDiv.style.width) / 2) - (currentWidth / 2)) / zoomvalue;\n            currentTop = ((parseFloat(pageDiv.style.height) / 2) - (currentHeight / 2)) / zoomvalue;\n            var zoomFactor = this.pdfViewerBase.getZoomFactor();\n            var inputValue = this.signtypevalue;\n            annot = {\n                // eslint-disable-next-line max-len\n                id: 'Typesign' + this.pdfViewerBase.signatureCount, bounds: {\n                    left: currentLeft / zoomFactor, top: currentTop / zoomFactor, x: currentLeft / zoomFactor,\n                    // eslint-disable-next-line max-len\n                    y: currentTop / zoomFactor, width: currentWidth, height: currentHeight\n                }, pageIndex: pageIndex, dynamicText: inputValue, data: this.pdfViewerBase.signatureModule.outputString, shapeAnnotationType: 'SignatureImage',\n                opacity: opacity, strokeColor: strokeColor, thickness: thickness, fontSize: fontSize, fontFamily: this.fontName, signatureName: annotationName\n            };\n            this.pdfViewerBase.currentSignatureAnnot = annot;\n            // eslint-disable-next-line\n            var checkbox = void 0;\n            if (isBlazor()) {\n                checkbox = document.getElementById(this.pdfViewer.element.id + '_signatureCheckBox');\n            }\n            else {\n                checkbox = document.getElementById('checkbox2');\n            }\n            if (checkbox && checkbox.checked) {\n                this.addSignatureCollection();\n            }\n            this.hideSignaturePanel();\n            this.pdfViewerBase.isToolbarSignClicked = false;\n        }\n        else {\n            var checkbox = document.getElementById('checkbox');\n            var typeCheckbox = document.getElementById('checkbox1');\n            var imageCheckbox = document.getElementById('checkbox2');\n            var isSignatureAdded = false;\n            if (!isSignatureAdded) {\n                this.saveDrawSignature(checkbox);\n                this.saveTypeSignature(typeCheckbox);\n                var canvas = document.getElementById(this.pdfViewer.element.id + '_signatureCanvas_');\n                this.saveUploadString = canvas.toDataURL();\n                if (imageCheckbox && imageCheckbox.checked) {\n                    if (!this.pdfViewerBase.isInitialField) {\n                        this.isSaveSignature = true;\n                        this.signatureImageString = this.saveUploadString;\n                        this.saveSignatureUploadString = this.outputString;\n                        this.issaveImageSignature = true;\n                    }\n                    else {\n                        this.isSaveInitial = true;\n                        this.initialImageString = this.saveUploadString;\n                        this.saveInitialUploadString = this.outputString;\n                        this.issaveImageInitial = true;\n                    }\n                }\n                else {\n                    if (!this.pdfViewerBase.isInitialField) {\n                        this.isSaveSignature = false;\n                        this.saveSignatureUploadString = '';\n                        this.issaveImageSignature = false;\n                    }\n                    else {\n                        this.isSaveInitial = false;\n                        this.saveInitialUploadString = '';\n                        this.issaveImageInitial = false;\n                    }\n                }\n                if (!this.pdfViewerBase.isInitialField) {\n                    this.signatureUploadString = this.saveUploadString;\n                }\n                else {\n                    this.initialUploadString = this.saveUploadString;\n                }\n                this.pdfViewer.formFieldsModule.drawSignature('Image', '', this.pdfViewerBase.currentTarget);\n                isSignatureAdded = true;\n                this.hideSignaturePanel();\n            }\n        }\n    };\n    Signature.prototype.saveDrawSignature = function (checkbox) {\n        if (checkbox) {\n            if (checkbox.checked) {\n                if (this.drawOutputString !== '') {\n                    var canvas = document.getElementById(this.pdfViewer.element.id + '_signatureCanvas_');\n                    this.saveImageString = canvas.toDataURL();\n                    if (!this.pdfViewerBase.isInitialField) {\n                        this.saveSignatureString = this.drawOutputString;\n                        this.signatureDrawString = this.saveImageString;\n                    }\n                    else {\n                        this.saveInitialString = this.drawOutputString;\n                        this.initialDrawString = this.saveImageString;\n                    }\n                    this.checkSaveFiledSign(this.pdfViewerBase.isInitialField, true);\n                }\n            }\n            else {\n                if (!this.pdfViewerBase.isInitialField) {\n                    this.saveSignatureString = '';\n                }\n                else {\n                    this.saveInitialString = '';\n                }\n                this.checkSaveFiledSign(this.pdfViewerBase.isInitialField, false);\n            }\n        }\n    };\n    Signature.prototype.saveTypeSignature = function (typeCheckbox) {\n        if (typeCheckbox) {\n            if (typeCheckbox.checked) {\n                this.updateSignatureTypeValue();\n                if (this.textValue !== '') {\n                    if (!this.pdfViewerBase.isInitialField) {\n                        this.issaveTypeSignature = true;\n                        this.saveSignatureTypeString = this.textValue;\n                    }\n                    else {\n                        this.issaveTypeInitial = true;\n                        this.saveInitialTypeString = this.textValue;\n                    }\n                }\n            }\n            else {\n                if (!this.pdfViewerBase.isInitialField) {\n                    this.saveSignatureTypeString = '';\n                    this.issaveTypeSignature = false;\n                }\n                else {\n                    this.saveInitialTypeString = '';\n                    this.issaveTypeInitial = false;\n                }\n            }\n        }\n    };\n    Signature.prototype.saveUploadSignature = function (imageCheckbox) {\n        if (imageCheckbox) {\n            if (imageCheckbox.checked) {\n                var imageCanvas = document.getElementById(this.pdfViewer.element.id + '_signatureuploadCanvas_');\n                var uploadString = imageCanvas.toDataURL();\n                var imageString = document.getElementById(this.pdfViewer.element.id + '_e-pv-upload-button').style.visibility === 'hidden' ? uploadString : '';\n                if (imageString !== '') {\n                    if (!this.pdfViewerBase.isInitialField) {\n                        this.issaveImageSignature = true;\n                        this.saveSignatureUploadString = imageString;\n                    }\n                    else {\n                        this.issaveImageInitial = true;\n                        this.saveInitialUploadString = imageString;\n                    }\n                }\n            }\n            else {\n                if (!this.pdfViewerBase.isInitialField) {\n                    this.saveSignatureUploadString = '';\n                    this.issaveImageSignature = false;\n                }\n                else {\n                    this.saveInitialUploadString = '';\n                    this.issaveImageInitial = false;\n                }\n            }\n        }\n    };\n    Signature.prototype.updateSignatureTypeValue = function (isType) {\n        // eslint-disable-next-line\n        var fontElements = document.querySelectorAll('.e-pv-font-sign');\n        if (fontElements) {\n            for (var j = 0; j < fontElements.length; j++) {\n                if (fontElements[parseInt(j.toString(), 10)] && fontElements[parseInt(j.toString(), 10)].style.borderColor === 'red') {\n                    if (this.pdfViewerBase.isToolbarSignClicked) {\n                        if (isType) {\n                            this.signtypevalue = fontElements[parseInt(j.toString(), 10)].textContent;\n                            this.outputString = fontElements[parseInt(j.toString(), 10)].textContent;\n                        }\n                        else {\n                            this.outputString = fontElements[parseInt(j.toString(), 10)].textContent;\n                        }\n                    }\n                    else {\n                        if (isType) {\n                            this.signtypevalue = fontElements[parseInt(j.toString(), 10)].textContent;\n                            this.textValue = fontElements[parseInt(j.toString(), 10)].textContent;\n                        }\n                        else {\n                            this.textValue = fontElements[parseInt(j.toString(), 10)].textContent;\n                        }\n                    }\n                    try {\n                        this.fontName = JSON.parse(fontElements[parseInt(j.toString(), 10)].style.fontFamily);\n                    }\n                    catch (e) {\n                        this.fontName = fontElements[parseInt(j.toString(), 10)].style.fontFamily;\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     * @returns {void}\n     */\n    Signature.prototype.hideSignaturePanel = function () {\n        if (this.signatureDialog) {\n            this.signatureDialog.hide();\n        }\n    };\n    Signature.prototype.bindTypeSignatureClickEvent = function () {\n        if (isBlazor()) {\n            for (var i = 0; i < 4; i++) {\n                // eslint-disable-next-line\n                var fontElement = document.querySelector('#' + this.pdfViewer.element.id + '_font_signature' + i);\n                if (fontElement) {\n                    fontElement.addEventListener('click', this.typeSignatureclicked.bind(this));\n                }\n            }\n        }\n    };\n    Signature.prototype.bindDrawSignatureClickEvent = function () {\n        // eslint-disable-next-line\n        var canvas = document.getElementById(this.pdfViewer.element.id + '_signatureCanvas_');\n        if (canvas) {\n            canvas.addEventListener('mousedown', this.signaturePanelMouseDown.bind(this));\n            canvas.addEventListener('mousemove', this.signaturePanelMouseMove.bind(this));\n            canvas.addEventListener('mouseup', this.signaturePanelMouseUp.bind(this));\n            canvas.addEventListener('mouseleave', this.signaturePanelMouseUp.bind(this));\n            canvas.addEventListener('touchstart', this.signaturePanelMouseDown.bind(this));\n            canvas.addEventListener('touchmove', this.signaturePanelMouseMove.bind(this));\n            canvas.addEventListener('touchend', this.signaturePanelMouseUp.bind(this));\n        }\n    };\n    // eslint-disable-next-line\n    Signature.prototype.typeSignatureclicked = function (event) {\n        var eventTarget = event.target;\n        if (eventTarget) {\n            for (var i = 0; i < 4; i++) {\n                // eslint-disable-next-line\n                var fontElement = document.querySelector('#' + this.pdfViewer.element.id + '_font_signature' + i);\n                if (fontElement) {\n                    fontElement.style.borderColor = '';\n                }\n            }\n            eventTarget.style.borderColor = 'red';\n            this.outputString = eventTarget.textContent;\n            try {\n                this.fontName = JSON.parse(eventTarget.style.fontFamily);\n            }\n            catch (e) {\n                this.fontName = eventTarget.style.fontFamily;\n            }\n            this.enableCreateButton(false);\n        }\n    };\n    // eslint-disable-next-line\n    Signature.prototype.createSignatureCanvas = function () {\n        // eslint-disable-next-line\n        var previousField = document.getElementById(this.pdfViewer.element.id + '_signatureCanvas_');\n        // eslint-disable-next-line\n        var field = document.getElementById(this.pdfViewer.element.id + 'Signature_appearance');\n        if (previousField) {\n            previousField.remove();\n        }\n        if (field) {\n            field.remove();\n        }\n        // eslint-disable-next-line max-len\n        var appearanceDiv = createElement('div', { id: this.pdfViewer.element.id + 'Signature_appearance', className: 'e-pv-signature-apperance', styles: 'margin-top:30px' });\n        // eslint-disable-next-line max-len\n        var canvas = createElement('canvas', { id: this.pdfViewer.element.id + '_signatureCanvas_', className: 'e-pv-signature-canvas' });\n        if (this.pdfViewer.element.offsetWidth > 750) {\n            canvas.width = 714;\n        }\n        else {\n            canvas.width = this.pdfViewer.element.offsetWidth - 35;\n        }\n        canvas.classList.add('e-pv-canvas-signature');\n        canvas.height = 305;\n        canvas.style.height = '305px';\n        canvas.style.border = '1px dotted #bdbdbd';\n        canvas.style.backgroundColor = 'white';\n        canvas.style.boxSizing = 'border-box';\n        canvas.style.borderRadius = '2px';\n        canvas.addEventListener('mousedown', this.signaturePanelMouseDown.bind(this));\n        canvas.addEventListener('mousemove', this.signaturePanelMouseMove.bind(this));\n        canvas.addEventListener('mouseup', this.signaturePanelMouseUp.bind(this));\n        canvas.addEventListener('mouseleave', this.signaturePanelMouseLeave.bind(this));\n        canvas.addEventListener('touchstart', this.signaturePanelMouseDown.bind(this));\n        canvas.addEventListener('touchmove', this.signaturePanelMouseMove.bind(this));\n        canvas.addEventListener('touchend', this.signaturePanelMouseUp.bind(this));\n        appearanceDiv.appendChild(canvas);\n        // eslint-disable-next-line\n        var checkBoxObj;\n        // eslint-disable-next-line\n        var input;\n        var saveCheckBoxContent;\n        if (this.pdfViewerBase.isToolbarSignClicked && !this.pdfViewerBase.isInitialField) {\n            saveCheckBoxContent = this.pdfViewer.localeObj.getConstant('Save Signature');\n        }\n        else {\n            saveCheckBoxContent = this.pdfViewerBase.isInitialField ? this.pdfViewer.localeObj.getConstant('Save Initial') : this.pdfViewer.localeObj.getConstant('Save Signature');\n        }\n        if (!this.pdfViewer.hideSaveSignature) {\n            // eslint-disable-next-line\n            input = document.createElement('input');\n            input.type = 'checkbox';\n            input.id = 'checkbox';\n            appearanceDiv.appendChild(input);\n            checkBoxObj = new CheckBox({ label: saveCheckBoxContent, disabled: false, checked: false });\n            checkBoxObj.appendTo(input);\n        }\n        if (!this.pdfViewerBase.isInitialField) {\n            this.isSaveSignature = this.saveSignatureCheckbox();\n        }\n        else {\n            this.isSaveInitial = this.saveSignatureCheckbox();\n        }\n        if (this.isSaveSignature && !this.pdfViewerBase.isInitialField) {\n            checkBoxObj.checked = true;\n        }\n        else if (this.isSaveInitial && this.pdfViewerBase.isInitialField) {\n            checkBoxObj.checked = true;\n        }\n        //if (!this.pdfViewerBase.isToolbarSignClicked) {\n        // eslint-disable-next-line\n        var typeDiv = createElement('div', { id: this.pdfViewer.element.id + 'type_appearance', className: 'e-pv-signature-apperance', styles: 'margin-top:6px' });\n        // eslint-disable-next-line\n        var inputText = document.createElement('input');\n        if (!this.pdfViewerBase.isInitialField && this.issaveTypeSignature && !this.pdfViewerBase.isToolbarSignClicked) {\n            inputText.value = this.drawSavedTypeSignature();\n        }\n        else if (this.pdfViewerBase.isInitialField && this.issaveTypeInitial && !this.pdfViewerBase.isToolbarSignClicked) {\n            inputText.value = this.drawSavedTypeSignature();\n        }\n        inputText.type = 'text';\n        inputText.id = this.pdfViewer.element.id + '_e-pv-Signtext-box';\n        typeDiv.appendChild(inputText);\n        // eslint-disable-next-line\n        var inputobj = new TextBox({\n            placeholder: this.pdfViewer.localeObj.getConstant('Enter Signature as Name'),\n            floatLabelType: 'Auto'\n        });\n        inputobj.appendTo(inputText);\n        // eslint-disable-next-line\n        var fontDiv = createElement('div', { id: this.pdfViewer.element.id + '_font_appearance', className: 'e-pv-font-appearance-style' });\n        fontDiv.classList.add('e-pv-canvas-signature');\n        fontDiv.style.height = '270px';\n        fontDiv.style.border = '1px dotted #bdbdbd';\n        fontDiv.style.boxSizing = 'border-box';\n        fontDiv.style.borderRadius = '2px';\n        fontDiv.style.backgroundColor = 'white';\n        fontDiv.style.color = 'black';\n        fontDiv.style.marginTop = '8px';\n        fontDiv.style.paddingRight = '0px';\n        typeDiv.appendChild(fontDiv);\n        input = document.createElement('input');\n        input.type = 'checkbox';\n        input.id = 'checkbox1';\n        typeDiv.appendChild(input);\n        checkBoxObj = new CheckBox({ label: saveCheckBoxContent, disabled: false, checked: false });\n        checkBoxObj.appendTo(input);\n        if (this.issaveTypeSignature && !this.pdfViewerBase.isInitialField && !this.pdfViewerBase.isToolbarSignClicked) {\n            checkBoxObj.checked = true;\n        }\n        else if (this.issaveTypeInitial && this.pdfViewerBase.isInitialField && !this.pdfViewerBase.isToolbarSignClicked) {\n            checkBoxObj.checked = true;\n        }\n        inputobj.addEventListener('input', this.renderSignatureText.bind(this));\n        this.enableCreateButton(true);\n        // eslint-disable-next-line\n        var tab = createElement('div', { id: this.pdfViewer.element.id + 'Signature_tab' });\n        var uploadDiv = createElement('div', { id: this.pdfViewer.element.id + 'upload_appearance', className: 'e-pv-signature-apperance', styles: 'padding-top:30px' });\n        // eslint-disable-next-line\n        var button = document.createElement('div');\n        button.id = this.pdfViewer.element.id + '_e-pv-upload-button';\n        uploadDiv.appendChild(button);\n        // eslint-disable-next-line\n        var uploadButton = new Button({ cssClass: 'e-pv-sign-upload', content: this.pdfViewer.localeObj.getConstant('Browse Signature Image') });\n        uploadButton.appendTo(button);\n        uploadButton.element.style.position = 'absolute';\n        // eslint-disable-next-line max-len\n        var uploadCanvas = createElement('canvas', { id: this.pdfViewer.element.id + '_signatureuploadCanvas_', className: 'e-pv-signature-uploadcanvas' });\n        if (this.pdfViewer.element.offsetWidth > 750) {\n            uploadCanvas.width = 714;\n        }\n        else {\n            uploadCanvas.width = this.pdfViewer.element.offsetWidth - 35;\n        }\n        uploadCanvas.classList.add('e-pv-canvas-signature');\n        uploadCanvas.height = 305;\n        uploadCanvas.style.height = '305px';\n        uploadButton.element.style.left = ((uploadCanvas.width / 2) - 50) + 'px';\n        uploadButton.element.style.top = ((parseFloat(uploadCanvas.style.height) / 2) + 20) + 'px';\n        uploadCanvas.style.border = '1px dotted #bdbdbd';\n        uploadCanvas.style.backgroundColor = 'white';\n        uploadCanvas.style.boxSizing = 'border-box';\n        uploadCanvas.style.borderRadius = '2px';\n        uploadCanvas.style.zIndex = '0';\n        var imageUploadString = '';\n        if (!this.pdfViewerBase.isInitialField && this.issaveImageSignature && !this.pdfViewerBase.isToolbarSignClicked) {\n            imageUploadString = this.drawSavedImageSignature();\n        }\n        else if (this.pdfViewerBase.isInitialField && this.issaveImageInitial && !this.pdfViewerBase.isToolbarSignClicked) {\n            imageUploadString = this.drawSavedImageSignature();\n        }\n        if (imageUploadString !== '' && !this.pdfViewerBase.isToolbarSignClicked) {\n            this.clearUploadString = false;\n            var ctx_1 = uploadCanvas.getContext('2d');\n            var image_2 = new Image();\n            image_2.src = imageUploadString;\n            image_2.onload = function () {\n                ctx_1.drawImage(image_2, 0, 0, uploadCanvas.width, uploadCanvas.height);\n            };\n            uploadButton.element.style.display = 'hidden';\n        }\n        uploadDiv.appendChild(uploadCanvas);\n        input = document.createElement('input');\n        input.type = 'checkbox';\n        input.id = 'checkbox2';\n        uploadDiv.appendChild(input);\n        checkBoxObj = new CheckBox({ label: saveCheckBoxContent, disabled: false, checked: false });\n        checkBoxObj.appendTo(input);\n        if (this.issaveImageSignature && !this.pdfViewerBase.isInitialField && !this.pdfViewerBase.isToolbarSignClicked) {\n            checkBoxObj.checked = true;\n        }\n        else if (this.issaveImageInitial && this.pdfViewerBase.isInitialField && !this.pdfViewerBase.isToolbarSignClicked) {\n            checkBoxObj.checked = true;\n        }\n        button.addEventListener('click', this.uploadSignatureImage.bind(this));\n        // eslint-disable-next-line max-len\n        this.signfontStyle = [{ FontName: 'Helvetica' }, { FontName: 'Times New Roman' }, { FontName: 'Courier' }, { FontName: 'Symbol' }];\n        // eslint-disable-next-line\n        var fontSignature = [];\n        if (this.pdfViewerBase.isToolbarSignClicked && !isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.typeSignatureFonts)) {\n            for (var j = 0; j < 4; j++) {\n                if (!isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.typeSignatureFonts[parseInt(j.toString(), 10)])) {\n                    this.signfontStyle[parseInt(j.toString(), 10)].FontName = this.pdfViewer.handWrittenSignatureSettings.typeSignatureFonts[parseInt(j.toString(), 10)];\n                }\n            }\n        }\n        for (var i = 0; i < this.signfontStyle.length; i++) {\n            fontSignature[parseInt(i.toString(), 10)] = document.createElement('div');\n            fontSignature[parseInt(i.toString(), 10)].id = '_font_signature' + i + '';\n            fontSignature[parseInt(i.toString(), 10)].classList.add('e-pv-font-sign');\n        }\n        this.fontsign = fontSignature;\n        // eslint-disable-next-line\n        var proxy = this;\n        var items = [];\n        if (this.pdfViewerBase.isToolbarSignClicked) {\n            if (this.pdfViewerBase.isInitialField) {\n                items = this.showHideSignatureTab((this.pdfViewer.handWrittenSignatureSettings.initialDialogSettings ? this.pdfViewer.handWrittenSignatureSettings.initialDialogSettings : this.pdfViewer.initialDialogSettings) && (this.pdfViewer.handWrittenSignatureSettings.initialDialogSettings ? this.pdfViewer.handWrittenSignatureSettings.initialDialogSettings.displayMode : this.pdfViewer.initialDialogSettings.displayMode), appearanceDiv, typeDiv, uploadDiv);\n            }\n            else {\n                items = this.showHideSignatureTab((this.pdfViewer.handWrittenSignatureSettings.signatureDialogSettings ? this.pdfViewer.handWrittenSignatureSettings.signatureDialogSettings : this.pdfViewer.signatureDialogSettings) && (this.pdfViewer.handWrittenSignatureSettings.signatureDialogSettings ? this.pdfViewer.handWrittenSignatureSettings.signatureDialogSettings.displayMode : this.pdfViewer.signatureDialogSettings.displayMode), appearanceDiv, typeDiv, uploadDiv);\n            }\n        }\n        else {\n            if (this.pdfViewerBase.isInitialField) {\n                items = this.showHideSignatureTab((this.pdfViewer.initialFieldSettings.initialDialogSettings ? this.pdfViewer.initialFieldSettings.initialDialogSettings.displayMode : 7), appearanceDiv, typeDiv, uploadDiv);\n            }\n            else {\n                items = this.showHideSignatureTab((this.pdfViewer.signatureFieldSettings.signatureDialogSettings ? this.pdfViewer.signatureFieldSettings.signatureDialogSettings.displayMode : 7), appearanceDiv, typeDiv, uploadDiv);\n            }\n        }\n        // eslint-disable-next-line\n        this.tabObj = new Tab({\n            selected: function (args) {\n                proxy.handleSelectEvent(args);\n            },\n            selecting: function (args) {\n                proxy.select(args);\n            },\n            items: items\n        });\n        this.tabObj.appendTo(tab);\n        if (items[0].header.label === 'DRAW') {\n            this.signaturetype = 'Draw';\n        }\n        else if (items[0].header.label === 'TYPE') {\n            this.signaturetype = 'Type';\n        }\n        else {\n            this.signaturetype = 'Image';\n        }\n        return tab;\n        // } else {\n        //     return appearanceDiv;\n        // }\n    };\n    Signature.prototype.handleSelectEvent = function (e) {\n        // eslint-disable-next-line\n        var headerText = '';\n        var maximumWidth = 750;\n        var tabInstance = document.getElementById(this.pdfViewer.element.id + 'Signature_tab').ej2_instances[0];\n        if (tabInstance) {\n            if (tabInstance.items.length > 0) {\n                for (var i = 0; i < tabInstance.items.length; i++) {\n                    var headerValue = tabInstance.items[parseInt(i.toString(), 10)].header.text;\n                    if (headerValue === e.selectedItem.textContent) {\n                        headerText = tabInstance.items[parseInt(i.toString(), 10)].header.label;\n                    }\n                }\n            }\n        }\n        this.clearSignatureCanvas(e);\n        // eslint-disable-next-line\n        if (headerText.toLocaleLowerCase() === 'draw') {\n            this.signaturetype = 'Draw';\n            this.enableCreateSignatureButton();\n            var drawCheckbox = document.getElementById(\"checkbox\");\n            this.hideSignatureCheckbox(drawCheckbox);\n        }\n        else if (headerText.toLocaleLowerCase() === 'type') {\n            var canvas = document.getElementById(this.pdfViewer.element.id + '_signatureCanvas_');\n            this.drawSignatureDataUrl = canvas.toDataURL();\n            this.updateSignatureTypeValue();\n            this.signaturetype = 'Type';\n            this.enableCreateSignatureButton();\n            var typeCheckbox = document.getElementById(\"checkbox1\");\n            this.hideSignatureCheckbox(typeCheckbox);\n            var textbox = document.getElementById(this.pdfViewer.element.id + '_e-pv-Signtext-box');\n            if (!this.pdfViewerBase.isInitialField && this.saveSignatureTypeString !== '' && textbox.value !== '' && !this.pdfViewerBase.isToolbarSignClicked) {\n                this.renderSignatureText();\n            }\n            else if (this.pdfViewerBase.isInitialField && this.saveInitialTypeString !== '' && textbox.value !== '' && !this.pdfViewerBase.isToolbarSignClicked) {\n                this.renderSignatureText();\n            }\n        }\n        else if (headerText.toLocaleLowerCase() === 'upload') {\n            var canvas = document.getElementById(this.pdfViewer.element.id + '_signatureCanvas_');\n            this.drawSignatureDataUrl = canvas.toDataURL();\n            this.signaturetype = 'Image';\n            this.enableCreateSignatureButton();\n            var imageCheckbox = document.getElementById(\"checkbox2\");\n            this.hideSignatureCheckbox(imageCheckbox);\n            var signbutton = document.getElementById(this.pdfViewer.element.id + '_e-pv-upload-button');\n            if (this.saveSignatureUploadString !== \"\" && !this.pdfViewerBase.isInitialField && !this.clearUploadString && !this.pdfViewerBase.isToolbarSignClicked) {\n                this.enableCreateButton(false);\n                signbutton.style.visibility = 'hidden';\n                this.outputString = this.saveSignatureUploadString;\n            }\n            if (this.saveInitialUploadString !== \"\" && this.pdfViewerBase.isInitialField && !this.clearUploadString && !this.pdfViewerBase.isToolbarSignClicked) {\n                this.enableCreateButton(false);\n                signbutton.style.visibility = 'hidden';\n                this.outputString = this.saveInitialUploadString;\n            }\n        }\n        if (this.pdfViewer.element.offsetWidth < maximumWidth)\n            this.updateCanvasSize();\n        this.drawSignOnTabSwitch();\n        if (headerText.toLocaleLowerCase() === 'upload' && this.imageSignatureDataUrl) {\n            this.imageSignOnTabSwitch();\n        }\n    };\n    Signature.prototype.enableCreateSignatureButton = function () {\n        if (this.pdfViewerBase.isToolbarSignClicked || this.signaturetype !== 'Type') {\n            if (this.outputString !== \"\") {\n                this.enableCreateButton(false);\n            }\n            else {\n                this.enableCreateButton(true);\n            }\n        }\n        else {\n            if (this.textValue !== \"\") {\n                this.enableCreateButton(false);\n            }\n            else {\n                this.enableCreateButton(true);\n            }\n        }\n    };\n    Signature.prototype.showHideSignatureTab = function (displayMode, appearanceDiv, typeDiv, uploadDiv) {\n        var items = [];\n        if (displayMode & DisplayMode.Draw) {\n            items.push({\n                header: { 'text': this.pdfViewer.localeObj.getConstant('Draw-hand Signature'), 'label': 'DRAW' },\n                content: appearanceDiv\n            });\n        }\n        if (displayMode & DisplayMode.Text) {\n            items.push({\n                header: { 'text': this.pdfViewer.localeObj.getConstant('Type Signature'), 'label': 'TYPE' },\n                content: typeDiv\n            });\n        }\n        if (displayMode & DisplayMode.Upload) {\n            items.push({\n                header: { 'text': this.pdfViewer.localeObj.getConstant('Upload Signature'), 'label': 'UPLOAD' },\n                content: uploadDiv\n            });\n        }\n        return items;\n    };\n    /**\n     * @private\n     * @returns {void}\n     */\n    Signature.prototype.createSignatureFileElement = function () {\n        // eslint-disable-next-line\n        var signImage = createElement('input', { id: this.pdfViewer.element.id + '_signElement', attrs: { 'type': 'file' } });\n        signImage.setAttribute('accept', '.jpg,.jpeg,.png');\n        signImage.style.position = 'absolute';\n        signImage.style.left = '0px';\n        signImage.style.top = '0px';\n        signImage.style.visibility = 'hidden';\n        document.body.appendChild(signImage);\n        signImage.addEventListener('change', this.addStampImage);\n    };\n    Signature.prototype.uploadSignatureImage = function () {\n        // eslint-disable-next-line\n        var signImage = document.getElementById(this.pdfViewer.element.id + '_signElement');\n        if (signImage) {\n            signImage.click();\n        }\n    };\n    Signature.prototype.renderSignatureText = function () {\n        var maximumWidth = 750;\n        // eslint-disable-next-line\n        var fontDiv = document.getElementById(this.pdfViewer.element.id + '_font_appearance');\n        // eslint-disable-next-line\n        var textBox = document.getElementById(this.pdfViewer.element.id + '_e-pv-Signtext-box');\n        for (var i = 0; i < this.signfontStyle.length; i++) {\n            this.fontsign[parseInt(i.toString(), 10)].innerHTML = textBox.value;\n            this.fontsign[parseInt(i.toString(), 10)].style.fontFamily = this.signfontStyle[parseInt(i.toString(), 10)].FontName;\n            if (this.fontName !== \"\" && this.signfontStyle[parseInt(i.toString(), 10)].FontName === this.fontName) {\n                this.fontsign[parseInt(i.toString(), 10)].style.borderColor = 'red';\n            }\n            else if (isNullOrUndefined(this.fontName) && this.signfontStyle[parseInt(i.toString(), 10)].FontName === 'Helvetica') {\n                this.fontsign[parseInt(i.toString(), 10)].style.borderColor = 'red';\n            }\n            fontDiv.appendChild(this.fontsign[parseInt(i.toString(), 10)]);\n        }\n        for (var i = 0; i < this.signfontStyle.length; i++) {\n            // eslint-disable-next-line\n            var clickSign = document.getElementById('_font_signature' + i + '');\n            clickSign.addEventListener('click', this.typeSignatureclick.bind(this));\n        }\n        this.enableCreateButton(false);\n        this.enableClearbutton(false);\n        if (this.pdfViewer.element.offsetWidth < maximumWidth)\n            this.updateCanvasSize();\n        this.drawSignOnTabSwitch();\n    };\n    Signature.prototype.typeSignatureclick = function () {\n        var eventTarget = event.target;\n        // eslint-disable-next-line\n        var createButton = document.getElementsByClassName('e-pv-createbtn')[0];\n        createButton.disabled = false;\n        for (var i = 0; i < 4; i++) {\n            // eslint-disable-next-line\n            var fontElement = document.getElementById('_font_signature' + i + '');\n            if (fontElement) {\n                fontElement.style.borderColor = '';\n            }\n        }\n        eventTarget.style.borderColor = 'red';\n        this.outputString = eventTarget.textContent;\n        try {\n            this.fontName = JSON.parse(eventTarget.style.fontFamily);\n        }\n        catch (e) {\n            this.fontName = eventTarget.style.fontFamily;\n        }\n    };\n    /**\n     * @param bounds\n     * @param position\n     * @private\n     */\n    // eslint-disable-next-line\n    Signature.prototype.addSignatureCollection = function (bounds, position) {\n        var minimumX = -1;\n        var minimumY = -1;\n        var maximumX = -1;\n        var maximumY = -1;\n        // eslint-disable-next-line\n        var collectionData = processPathData(this.outputString);\n        // eslint-disable-next-line\n        var newCanvas = document.createElement('canvas');\n        // eslint-disable-next-line\n        var context = newCanvas.getContext('2d');\n        // eslint-disable-next-line\n        var imageString;\n        var signatureType = this.pdfViewerBase.currentSignatureAnnot.shapeAnnotationType;\n        if (signatureType === 'HandWrittenSignature') {\n            if (collectionData.length !== 0) {\n                // eslint-disable-next-line\n                for (var k = 0; k < collectionData.length; k++) {\n                    // eslint-disable-next-line\n                    var val = collectionData[k];\n                    if (minimumX === -1) {\n                        // eslint-disable-next-line\n                        minimumX = (val['x']);\n                        // eslint-disable-next-line\n                        maximumX = (val['x']);\n                        // eslint-disable-next-line\n                        minimumY = (val['y']);\n                        // eslint-disable-next-line\n                        maximumY = (val['y']);\n                    }\n                    else {\n                        // eslint-disable-next-line\n                        var point1 = (val['x']);\n                        // eslint-disable-next-line\n                        var point2 = (val['y']);\n                        if (minimumX >= point1) {\n                            minimumX = point1;\n                        }\n                        if (minimumY >= point2) {\n                            minimumY = point2;\n                        }\n                        if (maximumX <= point1) {\n                            maximumX = point1;\n                        }\n                        if (maximumY <= point2) {\n                            maximumY = point2;\n                        }\n                    }\n                }\n                var newdifferenceX = maximumX - minimumX;\n                var newdifferenceY = maximumY - minimumY;\n                var differenceX = newdifferenceX / 100;\n                var differenceY = newdifferenceY / 100;\n                var left = 0;\n                var top_1 = 0;\n                if (bounds) {\n                    newCanvas.width = position.currentWidth;\n                    newCanvas.height = position.currentHeight;\n                    differenceX = newdifferenceX / (bounds.width);\n                    differenceY = newdifferenceY / (bounds.height);\n                    left = bounds.x - position.currentLeft;\n                    top_1 = bounds.y - position.currentTop;\n                }\n                else {\n                    newCanvas.width = 100;\n                    newCanvas.height = 100;\n                }\n                context.beginPath();\n                for (var n = 0; n < collectionData.length; n++) {\n                    // eslint-disable-next-line\n                    var val = collectionData[n];\n                    // eslint-disable-next-line\n                    var point1 = ((val['x'] - minimumX) / differenceX) + left;\n                    // eslint-disable-next-line\n                    var point2 = ((val['y'] - minimumY) / differenceY) + top_1;\n                    // eslint-disable-next-line\n                    if (val['command'] === 'M') {\n                        context.moveTo(point1, point2);\n                        // eslint-disable-next-line\n                    }\n                    else if (val['command'] === 'L') {\n                        context.lineTo(point1, point2);\n                    }\n                }\n                context.stroke();\n                context.closePath();\n                imageString = newCanvas.toDataURL();\n            }\n        }\n        else if (signatureType === 'SignatureText') {\n            imageString = this.outputString;\n        }\n        else {\n            imageString = this.outputString;\n        }\n        if (bounds) {\n            this.saveImageString = imageString;\n        }\n        else {\n            // eslint-disable-next-line\n            var signCollection = {};\n            signCollection['sign_' + this.pdfViewerBase.imageCount] = this.outputString;\n            this.outputcollection.push(signCollection);\n            // eslint-disable-next-line\n            var signature = [];\n            signature.push({ id: 'sign_' + this.pdfViewerBase.imageCount, imageData: imageString, signatureType: signatureType, fontFamily: this.pdfViewerBase.currentSignatureAnnot.fontFamily });\n            this.signaturecollection.push({ image: signature, isInitial: this.pdfViewerBase.isInitialField });\n            this.pdfViewerBase.imageCount++;\n        }\n    };\n    /**\n     * @private]\n     * @param {number} limit - The limit.\n     * @returns {number} - Returns number.\n     */\n    Signature.prototype.getSaveLimit = function (limit) {\n        if (limit > this.maxSaveLimit) {\n            limit = this.maxSaveLimit;\n        }\n        else if (limit < 1) {\n            limit = 1;\n        }\n        return limit;\n    };\n    /**\n     * @private\n     * @returns {void}\n     */\n    Signature.prototype.RenderSavedSignature = function () {\n        this.pdfViewerBase.signatureCount++;\n        var zoomvalue = this.pdfViewerBase.getZoomFactor();\n        var annot;\n        if (this.pdfViewerBase.isAddedSignClicked) {\n            var annotationName = this.pdfViewer.annotation.createGUID();\n            this.pdfViewerBase.currentSignatureAnnot = null;\n            this.pdfViewerBase.isSignatureAdded = true;\n            var pageIndex = this.pdfViewerBase.currentPageNumber - 1;\n            var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + pageIndex);\n            var currentLeft = 0;\n            var currentTop = 0;\n            // eslint-disable-next-line max-len\n            var currentWidth = this.pdfViewer.handWrittenSignatureSettings.width ? this.pdfViewer.handWrittenSignatureSettings.width : 100;\n            // eslint-disable-next-line max-len\n            var currentHeight = this.pdfViewer.handWrittenSignatureSettings.height ? this.pdfViewer.handWrittenSignatureSettings.height : 100;\n            // eslint-disable-next-line max-len\n            var thickness = this.pdfViewer.handWrittenSignatureSettings.thickness ? this.pdfViewer.handWrittenSignatureSettings.thickness : 1;\n            // eslint-disable-next-line max-len\n            var opacity = this.pdfViewer.handWrittenSignatureSettings.opacity ? this.pdfViewer.handWrittenSignatureSettings.opacity : 1;\n            // eslint-disable-next-line max-len\n            var strokeColor = this.pdfViewer.handWrittenSignatureSettings.strokeColor ? this.pdfViewer.handWrittenSignatureSettings.strokeColor : '#000000';\n            currentLeft = ((parseFloat(pageDiv.style.width) / 2) - (currentWidth / 2)) / zoomvalue;\n            // eslint-disable-next-line max-len\n            currentTop = ((parseFloat(pageDiv.style.height) / 2) - (currentHeight / 2)) / zoomvalue;\n            var keyString = '';\n            var signatureType = void 0;\n            var signatureFontFamily = void 0;\n            for (var collection = 0; collection < this.outputcollection.length; collection++) {\n                // eslint-disable-next-line\n                var collectionAddedsign = this.outputcollection[collection];\n                // eslint-disable-next-line\n                var eventTarget = event.target;\n                // eslint-disable-next-line max-len\n                if (eventTarget && eventTarget.id === 'sign_' + collection || eventTarget && eventTarget.id === 'sign_border' + collection) {\n                    keyString = collectionAddedsign['sign_' + collection];\n                    break;\n                }\n            }\n            for (var signatureIndex = 0; signatureIndex < this.signaturecollection.length; signatureIndex++) {\n                var eventTarget = event.target;\n                var signatureId = this.signaturecollection[parseInt(signatureIndex.toString(), 10)].image[0].id.split('_')[1];\n                if (eventTarget && eventTarget.id === 'sign_' + signatureId || eventTarget && eventTarget.id === 'sign_border' + signatureId) {\n                    signatureType = this.signaturecollection[parseInt(signatureIndex.toString(), 10)].image[0].signatureType;\n                    signatureFontFamily = this.signaturecollection[parseInt(signatureIndex.toString(), 10)].image[0].fontFamily;\n                    break;\n                }\n            }\n            if (signatureType === 'HandWrittenSignature') {\n                // eslint-disable-next-line\n                var signatureBounds = this.updateSignatureAspectRatio(keyString, true);\n                // eslint-disable-next-line max-len\n                currentWidth = signatureBounds.width ? signatureBounds.width : currentWidth;\n                // eslint-disable-next-line max-len\n                currentHeight = signatureBounds.height ? signatureBounds.height : currentHeight;\n            }\n            else {\n                currentWidth = currentWidth === 150 ? 200 : this.pdfViewer.handWrittenSignatureSettings.width;\n                // eslint-disable-next-line max-len\n                currentHeight = currentHeight === 100 ? 65 : this.pdfViewer.handWrittenSignatureSettings.height;\n            }\n            annot = {\n                // eslint-disable-next-line max-len\n                id: 'sign' + this.pdfViewerBase.signatureCount, bounds: { x: currentLeft, y: currentTop, width: currentWidth, height: currentHeight }, pageIndex: pageIndex, data: keyString,\n                // eslint-disable-next-line max-len\n                shapeAnnotationType: signatureType, opacity: opacity, fontFamily: signatureFontFamily, strokeColor: strokeColor, thickness: thickness, signatureName: annotationName\n            };\n            this.pdfViewerBase.currentSignatureAnnot = annot;\n            this.pdfViewerBase.isAddedSignClicked = false;\n        }\n        else {\n            this.pdfViewer.formFieldsModule.drawSignature();\n        }\n    };\n    /**\n     * @private\n     * @returns {void}\n     */\n    Signature.prototype.updateCanvasSize = function () {\n        // eslint-disable-next-line\n        var canvas = document.getElementById(this.pdfViewer.element.id + '_signatureCanvas_');\n        this.setTabItemWidth(canvas);\n        var uploadCanvas = document.getElementById(this.pdfViewer.element.id + '_signatureuploadCanvas_');\n        this.setTabItemWidth(uploadCanvas);\n        var fontAppearance = document.getElementById(this.pdfViewer.element.id + '_font_appearance');\n        this.setTabItemWidth(fontAppearance);\n    };\n    Signature.prototype.setTabItemWidth = function (canvas) {\n        var padding = 2;\n        var maximumWidth = 750;\n        var canvasWidth = 714;\n        var margin = 50;\n        var elem = document.querySelector('.e-dlg-content');\n        if (elem) {\n            var style = getComputedStyle(elem);\n            padding = padding + parseInt(style.paddingLeft, 10) + parseInt(style.paddingRight, 10);\n        }\n        if (canvas && this.signatureDialog && this.signatureDialog.visible) {\n            var context_2 = canvas.getContext('2d');\n            var canvasContent = canvas.toDataURL();\n            if (this.pdfViewer.element.offsetWidth > maximumWidth) {\n                canvas.width = canvasWidth;\n                canvas.style.width = canvasWidth + 'px';\n            }\n            else {\n                canvas.width = this.pdfViewer.element.offsetWidth - padding;\n                canvas.style.width = canvas.width + 'px';\n            }\n            var image_3 = new Image();\n            image_3.src = canvasContent;\n            image_3.onload = function () {\n                context_2.drawImage(image_3, 0, 0, canvas.width, canvas.height);\n            };\n        }\n        var fontInnerDiv = document.getElementsByClassName('e-pv-font-sign');\n        if (canvas && fontInnerDiv && fontInnerDiv.length > 0) {\n            for (var i = 0; i < fontInnerDiv.length; i++) {\n                var fontDiv = fontInnerDiv[parseInt(i.toString(), 10)];\n                fontDiv.style.width = ((canvas.width / 2) - margin) + 'px';\n            }\n        }\n    };\n    Signature.prototype.drawSignOnTabSwitch = function () {\n        var proxy = this;\n        var image = new Image();\n        image.onload = function () {\n            var canvas = document.getElementById(proxy.pdfViewer.element.id + '_signatureCanvas_');\n            if (canvas) {\n                var context = canvas.getContext('2d');\n                context.drawImage(image, 0, 0);\n            }\n        };\n        image.src = this.drawSignatureDataUrl;\n    };\n    Signature.prototype.imageSignOnTabSwitch = function () {\n        var proxy = this;\n        var image = new Image();\n        image.onload = function () {\n            var canvas = document.getElementById(proxy.pdfViewer.element.id + '_signatureuploadCanvas_');\n            if (canvas) {\n                var context = canvas.getContext('2d');\n                var signbutton = document.getElementById(proxy.pdfViewer.element.id + '_e-pv-upload-button');\n                signbutton.style.visibility = 'hidden';\n                context.drawImage(image, 0, 0, canvas.width, canvas.height);\n                proxy.enableCreateButton(false);\n                proxy.signatureImageHeight = image.naturalHeight;\n                proxy.signatureImageWidth = image.naturalWidth;\n            }\n        };\n        image.src = this.imageSignatureDataUrl;\n    };\n    Signature.prototype.signaturePanelMouseDown = function (e) {\n        if (e.type !== 'contextmenu') {\n            e.preventDefault();\n            this.findMousePosition(e);\n            this.mouseDetection = true;\n            this.oldX = this.mouseX;\n            this.oldY = this.mouseY;\n            this.newObject = [];\n            this.drawMousePosition(e);\n            this.mouseMoving = true;\n        }\n    };\n    Signature.prototype.enableCreateButton = function (isEnable) {\n        // eslint-disable-next-line\n        var createbtn = document.getElementsByClassName('e-pv-createbtn')[0];\n        if (createbtn) {\n            createbtn.disabled = isEnable;\n        }\n        this.enableClearbutton(isEnable);\n    };\n    Signature.prototype.enableClearbutton = function (isEnable) {\n        // eslint-disable-next-line\n        var clearbtn = document.getElementsByClassName('e-pv-clearbtn')[0];\n        if (clearbtn) {\n            clearbtn.disabled = isEnable;\n        }\n    };\n    Signature.prototype.signaturePanelMouseMove = function (e) {\n        if (this.mouseDetection && this.signaturetype === 'Draw') {\n            this.findMousePosition(e);\n            this.enableCreateButton(false);\n            this.drawMousePosition(e);\n        }\n    };\n    Signature.prototype.findMousePosition = function (event) {\n        var offsetX;\n        var offsetY;\n        if (event.type.indexOf('touch') !== -1) {\n            event = event;\n            var element = event.target;\n            // eslint-disable-next-line\n            var currentRect = element.getBoundingClientRect();\n            this.mouseX = event.changedTouches[0].clientX - currentRect.left;\n            this.mouseY = event.changedTouches[0].clientY - currentRect.top;\n        }\n        else {\n            event = event;\n            this.mouseX = event.offsetX;\n            this.mouseY = event.offsetY;\n        }\n    };\n    Signature.prototype.drawMousePosition = function (event) {\n        if (this.mouseDetection) {\n            this.drawSignatureInCanvas();\n            this.oldX = this.mouseX;\n            this.oldY = this.mouseY;\n        }\n    };\n    Signature.prototype.drawSignatureInCanvas = function () {\n        // eslint-disable-next-line\n        var canvas = document.getElementById(this.pdfViewer.element.id + '_signatureCanvas_');\n        // eslint-disable-next-line\n        var context = canvas.getContext('2d');\n        context.beginPath();\n        context.moveTo(this.oldX, this.oldY);\n        context.lineTo(this.mouseX, this.mouseY);\n        context.stroke();\n        context.lineWidth = 2;\n        context.arc(this.oldX, this.oldY, 2 / 2, 0, Math.PI * 2, true);\n        context.closePath();\n        this.newObject.push(this.mouseX, this.mouseY);\n    };\n    Signature.prototype.signaturePanelMouseUp = function () {\n        if (this.mouseDetection) {\n            this.convertToPath(this.newObject);\n        }\n        this.mouseDetection = false;\n        if (event.type == 'touchend') {\n            this.canvasTouched = true;\n        }\n    };\n    Signature.prototype.signaturePanelMouseLeave = function () {\n        if (this.mouseDetection) {\n            this.convertToPath(this.newObject);\n        }\n        this.mouseDetection = false;\n        this.mouseMoving = false;\n    };\n    ;\n    // eslint-disable-next-line\n    Signature.prototype.convertToPath = function (newObject) {\n        this.movePath(newObject[0], newObject[1]);\n        this.linePath(newObject[0], newObject[1]);\n        for (var n = 2; n < newObject.length; n = n + 2) {\n            this.linePath(newObject[parseInt(n.toString(), 10)], newObject[n + 1]);\n        }\n    };\n    Signature.prototype.linePath = function (x, y) {\n        this.outputString += 'L' + x + ',' + y + ' ';\n    };\n    Signature.prototype.movePath = function (x, y) {\n        this.outputString += 'M' + x + ',' + y + ' ';\n    };\n    /**\n     * @private\n     * @returns {void}\n     */\n    Signature.prototype.clearSignatureCanvas = function (type) {\n        var isCanvasClear = true;\n        var drawObject = [];\n        if (type && !isNullOrUndefined(type.previousIndex) && !isNullOrUndefined(type.selectedIndex)) {\n            isCanvasClear = false;\n            if (type.previousIndex === 0) {\n                this.drawOutputString = this.outputString;\n                drawObject = this.newObject;\n            }\n            else if (type.previousIndex === 2) {\n                this.imageOutputString = this.outputString;\n            }\n            this.outputString = '';\n            this.newObject = [];\n            if (type.selectedIndex === 0) {\n                this.outputString = this.drawOutputString;\n                this.newObject = drawObject;\n            }\n            else if (type.selectedIndex === 2) {\n                this.outputString = this.imageOutputString;\n            }\n        }\n        else {\n            this.outputString = '';\n            this.newObject = [];\n        }\n        var isClearDrawTab = false;\n        var isClearTypeTab = false;\n        var isClearImageTab = false;\n        if (type && type.currentTarget && type.currentTarget.classList.contains(\"e-pv-clearbtn\")) {\n            isCanvasClear = false;\n            if (this.signaturetype === 'Draw') {\n                isClearDrawTab = true;\n                var checkbox = document.getElementById('checkbox');\n                var checkBoxElement = document.getElementById('checkbox');\n                if (checkbox && checkBoxElement.nextElementSibling) {\n                    checkBoxElement.nextElementSibling.classList.remove('e-check');\n                    checkbox.checked = false;\n                }\n            }\n            else if (this.signaturetype === 'Type') {\n                isClearTypeTab = true;\n                var checkbox = document.getElementById('checkbox1');\n                var checkBoxElement = document.getElementById('checkbox1');\n                if (checkbox && checkBoxElement.nextElementSibling) {\n                    checkBoxElement.nextElementSibling.classList.remove('e-check');\n                    checkbox.checked = false;\n                    this.textValue = '';\n                }\n            }\n            else {\n                isClearImageTab = true;\n                this.clearUploadString = true;\n                var checkbox = document.getElementById('checkbox2');\n                var checkBoxElement = document.getElementById('checkbox2');\n                if (checkbox && checkBoxElement.nextElementSibling) {\n                    checkBoxElement.nextElementSibling.classList.remove('e-check');\n                    checkbox.checked = false;\n                }\n            }\n        }\n        // eslint-disable-next-line\n        var canvas = document.getElementById(this.pdfViewer.element.id + '_signatureCanvas_');\n        // eslint-disable-next-line\n        if ((canvas && isCanvasClear) || (isClearDrawTab)) {\n            // eslint-disable-next-line\n            var context = canvas.getContext('2d');\n            context.clearRect(0, 0, canvas.width, canvas.height);\n        }\n        // eslint-disable-next-line\n        var imageCanvas = document.getElementById(this.pdfViewer.element.id + '_signatureuploadCanvas_');\n        if (imageCanvas && isCanvasClear || (isClearImageTab)) {\n            // eslint-disable-next-line\n            var context = imageCanvas.getContext('2d');\n            context.clearRect(0, 0, imageCanvas.width, imageCanvas.height);\n            // eslint-disable-next-line\n            var signbutton = document.getElementById(this.pdfViewer.element.id + '_e-pv-upload-button');\n            if (signbutton) {\n                signbutton.style.visibility = '';\n            }\n        }\n        // eslint-disable-next-line\n        var fontdiv = document.getElementById(this.pdfViewer.element.id + '_font_appearance');\n        // eslint-disable-next-line\n        var textbox = document.getElementById(this.pdfViewer.element.id + '_e-pv-Signtext-box');\n        if ((fontdiv && textbox && isCanvasClear) || (isClearTypeTab)) {\n            textbox.value = '';\n            if (!isBlazor()) {\n                fontdiv.innerHTML = '';\n            }\n        }\n        this.enableCreateButton(true);\n    };\n    /**\n     * @private\n     * @returns {void}\n     */\n    Signature.prototype.closeSignaturePanel = function () {\n        if (this.pdfViewerBase.currentTarget) {\n            this.pdfViewerBase.drawSignatureWithTool = true;\n        }\n        this.clearSignatureCanvas();\n        if (!isBlazor()) {\n            this.signatureDialog.hide();\n        }\n        this.pdfViewerBase.isToolbarSignClicked = false;\n        this.pdfViewerBase.drawSignatureWithTool = false;\n        this.drawOutputString = '';\n        this.imageOutputString = '';\n    };\n    /**\n     * @private\n     * @returns {string} - Returns the string.\n     */\n    Signature.prototype.saveSignature = function () {\n        // eslint-disable-next-line\n        var storeObject = null;\n        if (this.pdfViewerBase.isStorageExceed) {\n            storeObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_sign'];\n        }\n        else {\n            storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_sign');\n        }\n        // eslint-disable-next-line\n        var annotations = new Array();\n        for (var j = 0; j < this.pdfViewerBase.pageCount; j++) {\n            annotations[parseInt(j.toString(), 10)] = [];\n        }\n        if (storeObject) {\n            var annotationCollection = JSON.parse(storeObject);\n            for (var i = 0; i < annotationCollection.length; i++) {\n                var newArray = [];\n                var pageAnnotationObject = annotationCollection[parseInt(i.toString(), 10)];\n                if (pageAnnotationObject) {\n                    for (var z = 0; pageAnnotationObject.annotations.length > z; z++) {\n                        if (this.pdfViewer.isSignatureEditable) {\n                            var signatureSettings = this.pdfViewer.handWrittenSignatureSettings;\n                            var annotationSettings = this.pdfViewer.annotationSettings;\n                            var annotationAuthor = (signatureSettings.author !== 'Guest') ? signatureSettings.author : annotationSettings.author ? annotationSettings.author : 'Guest';\n                            // eslint-disable-next-line max-len\n                            pageAnnotationObject.annotations[parseInt(z.toString(), 10)].author = annotationAuthor;\n                        }\n                        // eslint-disable-next-line max-len\n                        var strokeColorString = pageAnnotationObject.annotations[parseInt(z.toString(), 10)].strokeColor ? pageAnnotationObject.annotations[parseInt(z.toString(), 10)].strokeColor : \"black\";\n                        pageAnnotationObject.annotations[parseInt(z.toString(), 10)].strokeColor = JSON.stringify(this.getRgbCode(strokeColorString));\n                        // eslint-disable-next-line max-len\n                        pageAnnotationObject.annotations[parseInt(z.toString(), 10)].bounds = JSON.stringify(this.pdfViewer.annotation.getBounds(pageAnnotationObject.annotations[parseInt(z.toString(), 10)].bounds, pageAnnotationObject.pageIndex));\n                        if (pageAnnotationObject.annotations[parseInt(z.toString(), 10)].shapeAnnotationType === 'HandWrittenSignature' || pageAnnotationObject.annotations[parseInt(z.toString(), 10)].signatureName === 'ink') {\n                            // eslint-disable-next-line\n                            var collectionData = processPathData(pageAnnotationObject.annotations[parseInt(z.toString(), 10)].data);\n                            // eslint-disable-next-line\n                            var csData = splitArrayCollection(collectionData);\n                            pageAnnotationObject.annotations[parseInt(z.toString(), 10)].data = JSON.stringify(csData);\n                        }\n                        else {\n                            if (pageAnnotationObject.annotations[parseInt(z.toString(), 10)].shapeAnnotationType === 'SignatureText' && !this.checkDefaultFont(pageAnnotationObject.annotations[parseInt(z.toString(), 10)].fontFamily)) {\n                                var signTypeCanvas = createElement('canvas');\n                                var bounds = JSON.parse(pageAnnotationObject.annotations[parseInt(z.toString(), 10)].bounds);\n                                signTypeCanvas.width = (bounds && bounds.width) || 150;\n                                signTypeCanvas.height = (bounds && bounds.height) || pageAnnotationObject.annotations[parseInt(z.toString(), 10)].fontSize * 2;\n                                // eslint-disable-next-line\n                                var canvasContext = signTypeCanvas.getContext('2d');\n                                var x = signTypeCanvas.width / 2;\n                                var y = (signTypeCanvas.height / 2) + pageAnnotationObject.annotations[parseInt(z.toString(), 10)].fontSize / 2 - 10;\n                                canvasContext.textAlign = 'center';\n                                canvasContext.font = pageAnnotationObject.annotations[parseInt(z.toString(), 10)].fontSize + 'px ' + pageAnnotationObject.annotations[parseInt(z.toString(), 10)].fontFamily;\n                                canvasContext.fillText(pageAnnotationObject.annotations[parseInt(z.toString(), 10)].data, x, y);\n                                pageAnnotationObject.annotations[parseInt(z.toString(), 10)].data = JSON.stringify(signTypeCanvas.toDataURL('image/png'));\n                                pageAnnotationObject.annotations[parseInt(z.toString(), 10)].shapeAnnotationType = 'SignatureImage';\n                            }\n                            else {\n                                pageAnnotationObject.annotations[parseInt(z.toString(), 10)].data = JSON.stringify(pageAnnotationObject.annotations[parseInt(z.toString(), 10)].data);\n                            }\n                        }\n                    }\n                    newArray = pageAnnotationObject.annotations;\n                }\n                annotations[pageAnnotationObject.pageIndex] = newArray;\n            }\n        }\n        return JSON.stringify(annotations);\n    };\n    Signature.prototype.checkDefaultFont = function (fontName) {\n        // eslint-disable-next-line\n        [{ FontName: 'Helvetica' }, { FontName: 'Times New Roman' }, { FontName: 'Courier' }, { FontName: 'Symbol' }];\n        if (fontName === 'Helvetica' || fontName === 'Times New Roman' || fontName === 'Courier' || fontName === 'Symbol') {\n            return true;\n        }\n        return false;\n    };\n    /**\n     * @param colorString\n     * @private\n     */\n    // eslint-disable-next-line\n    Signature.prototype.getRgbCode = function (colorString) {\n        /* eslint-disable-next-line security/detect-unsafe-regex */\n        if (!colorString.match(/#([a-z0-9]+)/gi) && !colorString.match(/^rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*(\\d+(?:\\.\\d+)?))?\\)$/)) {\n            colorString = this.pdfViewer.annotationModule.nameToHash(colorString);\n        }\n        var stringArray = colorString.split(',');\n        if (isNullOrUndefined(stringArray[1])) {\n            colorString = this.pdfViewer.annotationModule.getValue(colorString, 'rgba');\n            stringArray = colorString.split(',');\n        }\n        // eslint-disable-next-line radix\n        var r = parseInt(stringArray[0].split('(')[1]);\n        // eslint-disable-next-line radix\n        var g = parseInt(stringArray[1]);\n        // eslint-disable-next-line radix\n        var b = parseInt(stringArray[2]);\n        // eslint-disable-next-line radix\n        var a = parseInt(stringArray[3]);\n        return { r: r, g: g, b: b, a: a };\n    };\n    /**\n     * @private\n     * @param {number} left - The left.\n     * @param {number} top - The top.\n     * @returns {void}\n     */\n    Signature.prototype.renderSignature = function (left, top) {\n        var annot;\n        // eslint-disable-next-line\n        var currentAnnotation = this.pdfViewerBase.currentSignatureAnnot;\n        var annotationName = this.pdfViewer.annotation.createGUID();\n        if (currentAnnotation) {\n            if (this.pdfViewerBase.currentSignatureAnnot.shapeAnnotationType === 'HandWrittenSignature') {\n                annot = {\n                    // eslint-disable-next-line max-len\n                    id: currentAnnotation.id, bounds: { x: left, y: top, width: currentAnnotation.bounds.width, height: currentAnnotation.bounds.height }, pageIndex: currentAnnotation.pageIndex, data: currentAnnotation.data,\n                    shapeAnnotationType: 'HandWrittenSignature', opacity: currentAnnotation.opacity, fontFamily: currentAnnotation.fontFamily, fontSize: currentAnnotation.fontSize, strokeColor: currentAnnotation.strokeColor, thickness: currentAnnotation.thickness, signatureName: annotationName\n                };\n            }\n            if (this.pdfViewerBase.currentSignatureAnnot.shapeAnnotationType === 'SignatureText') {\n                annot = {\n                    // eslint-disable-next-line max-len\n                    id: currentAnnotation.id, bounds: { x: left, y: top, width: currentAnnotation.bounds.width, height: currentAnnotation.bounds.height }, pageIndex: currentAnnotation.pageIndex, data: currentAnnotation.data,\n                    shapeAnnotationType: 'SignatureText', opacity: currentAnnotation.opacity, fontFamily: currentAnnotation.fontFamily, fontSize: currentAnnotation.fontSize, strokeColor: currentAnnotation.strokeColor, thickness: currentAnnotation.thickness, signatureName: annotationName\n                };\n            }\n            else if (this.pdfViewerBase.currentSignatureAnnot.shapeAnnotationType === 'SignatureImage') {\n                annot = {\n                    // eslint-disable-next-line max-len\n                    id: currentAnnotation.id, bounds: { x: left, y: top, width: currentAnnotation.bounds.width, height: currentAnnotation.bounds.height }, pageIndex: currentAnnotation.pageIndex, data: currentAnnotation.data,\n                    shapeAnnotationType: 'SignatureImage', opacity: currentAnnotation.opacity, fontFamily: currentAnnotation.fontFamily, fontSize: currentAnnotation.fontSize, strokeColor: currentAnnotation.strokeColor, thickness: currentAnnotation.thickness, signatureName: annotationName\n                };\n            }\n            this.pdfViewer.add(annot);\n            // eslint-disable-next-line\n            var canvass = document.getElementById(this.pdfViewer.element.id + '_annotationCanvas_' + currentAnnotation.pageIndex);\n            // eslint-disable-next-line\n            this.pdfViewer.renderDrawing(canvass, currentAnnotation.pageIndex);\n            this.pdfViewerBase.signatureAdded = true;\n            // eslint-disable-next-line max-len\n            this.storeSignatureData(currentAnnotation.pageIndex, annot);\n            this.pdfViewer.fireSignatureAdd(currentAnnotation.pageIndex, currentAnnotation.signatureName, currentAnnotation.shapeAnnotationType, currentAnnotation.bounds, currentAnnotation.opacity, currentAnnotation.strokeColor, currentAnnotation.thickness);\n            this.pdfViewerBase.currentSignatureAnnot = null;\n            this.pdfViewerBase.signatureCount++;\n        }\n    };\n    /**\n     * @param annotationCollection\n     * @param pageIndex\n     * @param isImport\n     * @private\n     */\n    // eslint-disable-next-line\n    Signature.prototype.renderExistingSignature = function (annotationCollection, pageIndex, isImport) {\n        var annot;\n        var isAnnotationAdded = false;\n        if (!isImport) {\n            for (var p = 0; p < this.signAnnotationIndex.length; p++) {\n                if (this.signAnnotationIndex[parseInt(p.toString(), 10)] === pageIndex) {\n                    isAnnotationAdded = true;\n                    break;\n                }\n            }\n        }\n        if (annotationCollection && !isAnnotationAdded) {\n            if (annotationCollection.length > 0 && this.signAnnotationIndex.indexOf(pageIndex) === -1) {\n                this.signAnnotationIndex.push(pageIndex);\n            }\n            for (var n = 0; n < annotationCollection.length; n++) {\n                // eslint-disable-next-line\n                var currentAnnotation = annotationCollection[n];\n                if (currentAnnotation) {\n                    // eslint-disable-next-line\n                    var data = currentAnnotation.PathData;\n                    if (isImport) {\n                        if (currentAnnotation.IsSignature) {\n                            data = currentAnnotation.PathData;\n                        }\n                        else if (currentAnnotation.AnnotationType === 'SignatureImage' || currentAnnotation.AnnotationType === 'SignatureText') {\n                            data = JSON.parse(JSON.stringify(currentAnnotation.PathData));\n                        }\n                        else {\n                            if (data.includes('command')) {\n                                data = getPathString(JSON.parse(currentAnnotation.PathData));\n                            }\n                            else {\n                                data = currentAnnotation.PathData;\n                            }\n                        }\n                    }\n                    this.outputString = data;\n                    this.outputString = '';\n                    var rectDiff = 0;\n                    var rectDifference = 1;\n                    var bounds = currentAnnotation.Bounds;\n                    var currentLeft = !isNullOrUndefined(bounds.X) ? bounds.X + (rectDiff / 2) : bounds.x + (rectDiff / 2);\n                    var currentTop = !isNullOrUndefined(bounds.Y) ? bounds.Y + (rectDiff / 2) : bounds.y + (rectDiff / 2);\n                    var currentWidth = bounds.Width ? bounds.Width - (rectDifference - 1) : bounds.width - (rectDifference - 1);\n                    var currentHeight = bounds.Height ? bounds.Height - (rectDifference - 1) : bounds.height - (rectDifference - 1);\n                    if (currentAnnotation.AnnotationType === 'SignatureText') {\n                        annot = {\n                            id: 'sign' + this.pdfViewerBase.signatureCount, bounds: { x: currentLeft, y: currentTop, width: currentWidth, height: currentHeight }, pageIndex: pageIndex, data: data, fontFamily: currentAnnotation.FontFamily, fontSize: currentAnnotation.FontSize,\n                            shapeAnnotationType: 'SignatureText', opacity: currentAnnotation.Opacity, strokeColor: currentAnnotation.StrokeColor, thickness: currentAnnotation.Thickness, signatureName: currentAnnotation.SignatureName\n                        };\n                    }\n                    else if (currentAnnotation.AnnotationType === 'SignatureImage') {\n                        annot = {\n                            id: 'sign' + this.pdfViewerBase.signatureCount, bounds: { x: currentLeft, y: currentTop, width: currentWidth, height: currentHeight }, pageIndex: pageIndex, data: data, shapeAnnotationType: 'SignatureImage', opacity: currentAnnotation.Opacity, strokeColor: currentAnnotation.StrokeColor, thickness: currentAnnotation.Thickness, signatureName: currentAnnotation.SignatureName\n                        };\n                    }\n                    else {\n                        annot = {\n                            id: 'sign' + this.pdfViewerBase.signatureCount, bounds: { x: currentLeft, y: currentTop, width: currentWidth, height: currentHeight }, pageIndex: pageIndex, data: data, shapeAnnotationType: 'HandWrittenSignature', opacity: currentAnnotation.Opacity, strokeColor: currentAnnotation.StrokeColor, thickness: currentAnnotation.Thickness, signatureName: currentAnnotation.SignatureName ? currentAnnotation.SignatureName : \"ink\"\n                        };\n                    }\n                }\n                this.pdfViewer.add(annot);\n                // eslint-disable-next-line\n                var canvass = document.getElementById(this.pdfViewer.element.id + '_annotationCanvas_' + currentAnnotation.pageIndex);\n                // eslint-disable-next-line\n                this.pdfViewer.renderDrawing(canvass, annot.pageIndex);\n                this.storeSignatureData(annot.pageIndex, annot);\n                this.pdfViewerBase.currentSignatureAnnot = null;\n                this.pdfViewerBase.signatureCount++;\n                // eslint-disable-next-line max-len\n                if (this.pdfViewerBase.navigationPane && this.pdfViewerBase.navigationPane.annotationMenuObj && this.pdfViewer.isSignatureEditable) {\n                    // eslint-disable-next-line max-len\n                    this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export Annotations')], true);\n                    // eslint-disable-next-line max-len\n                    this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export XFDF')], true);\n                }\n            }\n        }\n    };\n    /**\n     * @param pageNumber\n     * @param annotations\n     * @private\n     */\n    // eslint-disable-next-line\n    Signature.prototype.storeSignatureData = function (pageNumber, annotations) {\n        // eslint-disable-next-line max-len\n        this.pdfViewer.annotation.addAction(annotations.pageIndex ? annotations.pageIndex : annotations.PageIndex, null, annotations, 'Addition', '', annotations, annotations);\n        var annotation = null;\n        var left;\n        var top;\n        var width;\n        var height;\n        var pageIndex;\n        var zoomvalue = this.pdfViewerBase.getZoomFactor();\n        if (annotations.bounds) {\n            left = annotations.bounds.left ? annotations.bounds.left : annotations.bounds.x;\n            top = annotations.bounds.top ? annotations.bounds.top : annotations.bounds.y;\n            width = annotations.bounds.width;\n            height = annotations.bounds.height;\n            pageIndex = annotations.pageIndex;\n        }\n        else {\n            left = annotations.Bounds.left ? annotations.Bounds.left : annotations.Bounds.x;\n            top = annotations.Bounds.top ? annotations.Bounds.top : annotations.Bounds.y;\n            width = annotations.LineBounds.Width;\n            height = annotations.LineBounds.Height;\n            pageIndex = annotations.PageIndex;\n        }\n        if (annotations.wrapper && annotations.wrapper.bounds) {\n            left = annotations.wrapper.bounds.left;\n            top = annotations.wrapper.bounds.top;\n        }\n        if (annotations.shapeAnnotationType === 'SignatureText' && annotations.wrapper && annotations.wrapper.children[1]) {\n            left = left + annotations.wrapper.pivot.x + (this.signatureTextContentLeft - (this.signatureTextContentTop * (zoomvalue - (zoomvalue / this.signatureTextContentLeft))));\n            top = top + ((annotations.wrapper.children[1].bounds.y - top) - (annotations.wrapper.children[1].bounds.y - top) / 3) + annotations.wrapper.pivot.y + (this.signatureTextContentTop * zoomvalue);\n        }\n        annotation = {\n            id: annotations.id ? annotations.id : null, bounds: { left: left, top: top, width: width, height: height }, shapeAnnotationType: annotations.shapeAnnotationType ? annotations.shapeAnnotationType : \"ink\", opacity: annotations.opacity ? annotations.opacity : 1, thickness: annotations.thickness ? annotations.thickness : 1, strokeColor: annotations.strokeColor ? annotations.strokeColor : null, pageIndex: pageIndex, data: annotations.data ? annotations.data : annotations.Value, fontSize: annotations.fontSize ? annotations.fontSize : null, fontFamily: annotations.fontFamily ? annotations.fontFamily : null, signatureName: annotations.signatureName ? annotations.signatureName : annotations.Name\n        };\n        // eslint-disable-next-line\n        var sessionSize = Math.round(JSON.stringify(window.sessionStorage).length / 1024);\n        // eslint-disable-next-line\n        var currentAnnotation = Math.round(JSON.stringify(annotation).length / 1024);\n        if ((sessionSize + currentAnnotation) > 4500) {\n            this.pdfViewerBase.isStorageExceed = true;\n            this.pdfViewer.annotationModule.clearAnnotationStorage();\n            if (!(this.pdfViewerBase.isFormStorageExceed)) {\n                this.pdfViewer.formFieldsModule.clearFormFieldStorage();\n            }\n        }\n        // eslint-disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_sign');\n        var index = 0;\n        if (!storeObject) {\n            this.storeSignatureCollections(annotation, pageNumber);\n            var shapeAnnotation = { pageIndex: pageNumber, annotations: [] };\n            shapeAnnotation.annotations.push(annotation);\n            index = shapeAnnotation.annotations.indexOf(annotation);\n            var annotationCollection = [];\n            annotationCollection.push(shapeAnnotation);\n            var annotationStringified = JSON.stringify(annotationCollection);\n            if (this.pdfViewerBase.isStorageExceed) {\n                this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_sign'] = annotationStringified;\n            }\n            else {\n                window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_sign', annotationStringified);\n            }\n        }\n        else {\n            this.storeSignatureCollections(annotation, pageNumber);\n            var annotObject = JSON.parse(storeObject);\n            window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_sign');\n            var pageIndex_1 = this.pdfViewer.annotationModule.getPageCollection(annotObject, pageNumber);\n            if (!isNullOrUndefined(pageIndex_1) && annotObject[parseInt(pageIndex_1.toString(), 10)]) {\n                annotObject[parseInt(pageIndex_1.toString(), 10)].annotations.push(annotation);\n                index = annotObject[parseInt(pageIndex_1.toString(), 10)].annotations.indexOf(annotation);\n            }\n            else {\n                var markupAnnotation = { pageIndex: pageNumber, annotations: [] };\n                markupAnnotation.annotations.push(annotation);\n                index = markupAnnotation.annotations.indexOf(annotation);\n                annotObject.push(markupAnnotation);\n            }\n            var annotationStringified = JSON.stringify(annotObject);\n            if (this.pdfViewerBase.isStorageExceed) {\n                this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_sign'] = annotationStringified;\n            }\n            else {\n                window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_sign', annotationStringified);\n            }\n        }\n    };\n    /**\n     * @param property\n     * @param pageNumber\n     * @param annotationBase\n     * @param isSignatureEdited\n     * @private\n     */\n    // eslint-disable-next-line\n    Signature.prototype.modifySignatureCollection = function (property, pageNumber, annotationBase, isSignatureEdited) {\n        this.pdfViewerBase.updateDocumentEditedProperty(true);\n        var currentAnnotObject = null;\n        var pageAnnotations = this.getAnnotations(pageNumber, null);\n        var zoomvalue = this.pdfViewerBase.getZoomFactor();\n        if (pageAnnotations != null && annotationBase) {\n            for (var i = 0; i < pageAnnotations.length; i++) {\n                if (annotationBase.id === pageAnnotations[parseInt(i.toString(), 10)].id) {\n                    if (property === 'bounds') {\n                        var top_2 = void 0;\n                        var left = void 0;\n                        if (annotationBase.shapeAnnotationType === 'SignatureText' && annotationBase.wrapper && annotationBase.wrapper.children[1]) {\n                            top_2 = annotationBase.wrapper.children[0].bounds.y;\n                            left = annotationBase.wrapper.children[0].bounds.x + annotationBase.wrapper.pivot.x + (this.signatureTextContentLeft - (this.signatureTextContentTop * (zoomvalue - (zoomvalue / this.signatureTextContentLeft))));\n                            top_2 = top_2 + ((annotationBase.wrapper.children[1].bounds.y - top_2) - (annotationBase.wrapper.children[1].bounds.y - top_2) / 3) + annotationBase.wrapper.pivot.y + (this.signatureTextContentTop * zoomvalue);\n                            pageAnnotations[parseInt(i.toString(), 10)].bounds = { left: left, top: top_2, width: annotationBase.bounds.width, height: annotationBase.bounds.height };\n                        }\n                        else {\n                            pageAnnotations[parseInt(i.toString(), 10)].bounds = { left: annotationBase.wrapper.bounds.left, top: annotationBase.wrapper.bounds.top, width: annotationBase.bounds.width, height: annotationBase.bounds.height };\n                        }\n                        // eslint-disable-next-line max-len\n                        pageAnnotations[parseInt(i.toString(), 10)].fontSize = annotationBase.fontSize;\n                    }\n                    else if (property === 'stroke') {\n                        pageAnnotations[parseInt(i.toString(), 10)].strokeColor = annotationBase.wrapper.children[0].style.strokeColor;\n                    }\n                    else if (property === 'opacity') {\n                        pageAnnotations[parseInt(i.toString(), 10)].opacity = annotationBase.wrapper.children[0].style.opacity;\n                    }\n                    else if (property === 'thickness') {\n                        pageAnnotations[parseInt(i.toString(), 10)].thickness = annotationBase.wrapper.children[0].style.strokeWidth;\n                    }\n                    else if (property === 'delete') {\n                        this.updateSignatureCollection(pageAnnotations[parseInt(i.toString(), 10)]);\n                        currentAnnotObject = pageAnnotations.splice(i, 1)[0];\n                        break;\n                    }\n                    if (property && property !== 'delete') {\n                        this.storeSignatureCollections(pageAnnotations[parseInt(i.toString(), 10)], pageNumber);\n                    }\n                    if (isSignatureEdited) {\n                        pageAnnotations[parseInt(i.toString(), 10)].opacity = annotationBase.wrapper.children[0].style.opacity;\n                        pageAnnotations[parseInt(i.toString(), 10)].strokeColor = annotationBase.wrapper.children[0].style.strokeColor;\n                        pageAnnotations[parseInt(i.toString(), 10)].thickness = annotationBase.wrapper.children[0].style.strokeWidth;\n                        this.storeSignatureCollections(pageAnnotations[parseInt(i.toString(), 10)], pageNumber);\n                        break;\n                    }\n                }\n            }\n            this.manageAnnotations(pageAnnotations, pageNumber);\n        }\n        return currentAnnotObject;\n    };\n    /**\n     * @param annotation\n     * @param pageNumber\n     * @private\n     */\n    // eslint-disable-next-line\n    Signature.prototype.storeSignatureCollections = function (annotation, pageNumber) {\n        // eslint-disable-next-line\n        var collectionDetails = this.checkSignatureCollection(annotation);\n        // eslint-disable-next-line\n        var selectAnnotation = cloneObject(annotation);\n        selectAnnotation.annotationId = annotation.signatureName;\n        selectAnnotation.pageNumber = pageNumber;\n        delete selectAnnotation.annotName;\n        if (annotation.id) {\n            selectAnnotation.uniqueKey = annotation.id;\n            delete selectAnnotation.id;\n        }\n        if (collectionDetails.isExisting) {\n            this.pdfViewer.signatureCollection.splice(collectionDetails.position, 0, selectAnnotation);\n        }\n        else {\n            this.pdfViewer.signatureCollection.push(selectAnnotation);\n        }\n    };\n    // eslint-disable-next-line\n    Signature.prototype.checkSignatureCollection = function (signature) {\n        // eslint-disable-next-line\n        var collections = this.pdfViewer.signatureCollection;\n        if (collections && signature) {\n            for (var i = 0; i < collections.length; i++) {\n                if (collections[parseInt(i.toString(), 10)].annotationId === signature.signatureName) {\n                    this.pdfViewer.signatureCollection.splice(i, 1);\n                    return { isExisting: true, position: i };\n                }\n            }\n        }\n        return { isExisting: false, position: null };\n    };\n    /**\n     * @param signature\n     * @private\n     */\n    // eslint-disable-next-line\n    Signature.prototype.updateSignatureCollection = function (signature) {\n        // eslint-disable-next-line\n        var collections = this.pdfViewer.signatureCollection;\n        if (collections && signature) {\n            for (var i = 0; i < collections.length; i++) {\n                if (collections[parseInt(i.toString(), 10)].annotationId === signature.signatureName) {\n                    this.pdfViewer.signatureCollection.splice(i, 1);\n                    break;\n                }\n            }\n        }\n    };\n    /**\n     * @param pageNumber\n     * @param signature\n     * @private\n     */\n    // eslint-disable-next-line\n    Signature.prototype.addInCollection = function (pageNumber, signature) {\n        if (signature) {\n            this.storeSignatureCollections(signature, pageNumber);\n            // eslint-disable-next-line\n            var pageSignatures = this.getAnnotations(pageNumber, null);\n            if (pageSignatures) {\n                pageSignatures.push(signature);\n            }\n            this.manageAnnotations(pageSignatures, pageNumber);\n        }\n    };\n    // eslint-disable-next-line\n    Signature.prototype.getAnnotations = function (pageIndex, shapeAnnotations) {\n        // eslint-disable-next-line\n        var annotationCollection;\n        // eslint-disable-next-line\n        var storeObject = null;\n        if (this.pdfViewerBase.isStorageExceed) {\n            storeObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_sign'];\n        }\n        else {\n            storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_sign');\n        }\n        if (storeObject) {\n            var annotObject = JSON.parse(storeObject);\n            var index = this.pdfViewer.annotationModule.getPageCollection(annotObject, pageIndex);\n            if (!isNullOrUndefined(index) && annotObject[parseInt(index.toString(), 10)]) {\n                annotationCollection = annotObject[parseInt(index.toString(), 10)].annotations;\n            }\n            else {\n                annotationCollection = shapeAnnotations;\n            }\n        }\n        else {\n            annotationCollection = shapeAnnotations;\n        }\n        return annotationCollection;\n    };\n    Signature.prototype.manageAnnotations = function (pageAnnotations, pageNumber) {\n        // eslint-disable-next-line\n        var storeObject = null;\n        if (this.pdfViewerBase.isStorageExceed) {\n            storeObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_sign'];\n        }\n        else {\n            storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_sign');\n        }\n        if (storeObject) {\n            var annotObject = JSON.parse(storeObject);\n            window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_sign');\n            var index = this.pdfViewer.annotationModule.getPageCollection(annotObject, pageNumber);\n            if (annotObject[parseInt(index.toString(), 10)]) {\n                annotObject[parseInt(index.toString(), 10)].annotations = pageAnnotations;\n            }\n            var annotationStringified = JSON.stringify(annotObject);\n            if (this.pdfViewerBase.isStorageExceed) {\n                this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_sign'] = annotationStringified;\n            }\n            else {\n                window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_sign', annotationStringified);\n            }\n        }\n    };\n    /**\n     * @private\n     * @param {boolean} isShow - Returns the true or false.\n     * @returns {void}\n     */\n    Signature.prototype.showSignatureDialog = function (isShow) {\n        if (isShow) {\n            this.createSignaturePanel();\n        }\n    };\n    /**\n     * @private\n     * @returns {void}\n     */\n    Signature.prototype.setAnnotationMode = function () {\n        this.pdfViewerBase.isToolbarSignClicked = true;\n        this.pdfViewerBase.isInitialField = false;\n        this.showSignatureDialog(true);\n    };\n    /**\n     * @private\n     * @returns {void}\n     */\n    Signature.prototype.setInitialMode = function () {\n        this.pdfViewerBase.isToolbarSignClicked = true;\n        this.pdfViewerBase.isInitialField = true;\n        this.showSignatureDialog(true);\n    };\n    /**\n     * @param number\n     * @private\n     */\n    // eslint-disable-next-line\n    Signature.prototype.ConvertPointToPixel = function (number) {\n        return (number * (96 / 72));\n    };\n    /**\n     * @param signature\n     * @param pageIndex\n     * @param isImport\n     * @private\n     */\n    // eslint-disable-next-line\n    Signature.prototype.updateSignatureCollections = function (signature, pageIndex, isImport) {\n        var annot;\n        // eslint-disable-next-line\n        if (signature) {\n            // eslint-disable-next-line\n            var bounds = signature.Bounds;\n            var currentLeft = bounds.X;\n            var currentTop = bounds.Y;\n            var currentWidth = bounds.Width;\n            var currentHeight = bounds.Height;\n            // eslint-disable-next-line\n            var data = signature.PathData;\n            if (isImport) {\n                data = getPathString(JSON.parse(signature.PathData));\n            }\n            annot = {\n                // eslint-disable-next-line max-len\n                id: 'sign' + signature.SignatureName, bounds: { x: currentLeft, y: currentTop, width: currentWidth, height: currentHeight }, pageIndex: pageIndex, data: data,\n                shapeAnnotationType: 'HandWrittenSignature', opacity: signature.Opacity, strokeColor: signature.StrokeColor, thickness: signature.Thickness, signatureName: signature.SignatureName\n            };\n            return annot;\n        }\n    };\n    /**\n     * @private\n     * @returns {void}\n     */\n    Signature.prototype.destroy = function () {\n        window.sessionStorage.removeItem('_annotations_sign');\n        // eslint-disable-next-line\n        var signImage = document.getElementById(this.pdfViewer.element.id + '_signElement');\n        if (signImage) {\n            signImage.removeEventListener('change', this.addStampImage);\n            if (signImage.parentElement)\n                signImage.parentElement.removeChild(signImage);\n        }\n        if (this.signatureDialog)\n            this.signatureDialog.destroy();\n    };\n    return Signature;\n}());\nexport { Signature };\n"],"mappings":"AAAA,SAASA,aAAa,EAAEC,iBAAiB,EAAEC,QAAQ,QAAQ,sBAAsB;AACjF,SAASC,MAAM,QAAQ,wBAAwB;AAC/C,SAASC,oBAAoB,EAAEC,eAAe,EAAEC,aAAa,QAAQ,0BAA0B;AAC/F,SAASC,OAAO,QAAQ,wBAAwB;AAChD,SAASC,WAAW,QAAQ,yBAAyB;AACrD,SAASC,QAAQ,QAAQ,yBAAyB;AAClD,SAASC,GAAG,QAAQ,6BAA6B;AACjD,SAASC,MAAM,QAAQ,yBAAyB;AAChD,SAASC,WAAW,QAAQ,SAAS;AACrC;AACA;AACA;AACA,IAAIC,SAAS,GAAG,aAAe,YAAY;EACvC;AACJ;AACA;AACA;AACA;AACA;EACI,SAASA,SAASA,CAACC,SAAS,EAAEC,aAAa,EAAE;IACzC,IAAIC,KAAK,GAAG,IAAI;IAChB,IAAI,CAACC,WAAW,GAAG,IAAI;IACvB,IAAI,CAACC,aAAa,GAAG,KAAK;IAC1B,IAAI,CAACC,qBAAqB,GAAG,EAAE;IAC/B,IAAI,CAACC,oBAAoB,GAAG,EAAE;IAC9B;IACA,IAAI,CAACC,SAAS,GAAG,EAAE;IACnB;AACR;AACA;IACQ,IAAI,CAACC,YAAY,GAAG,EAAE;IACtB;AACR;AACA;IACQ,IAAI,CAACC,gBAAgB,GAAG,EAAE;IAC1B;AACR;AACA;IACQ,IAAI,CAACC,iBAAiB,GAAG,EAAE;IAC3B;AACR;AACA;IACQ;IACA,IAAI,CAACC,mBAAmB,GAAG,EAAE;IAC7B;AACR;AACA;IACQ;IACA,IAAI,CAACC,gBAAgB,GAAG,EAAE;IAC1B;AACR;AACA;IACQ;IACA,IAAI,CAACC,mBAAmB,GAAG,EAAE;IAC7B;IACA,IAAI,CAACC,QAAQ,GAAG,EAAE;IAClB;IACA,IAAI,CAACC,aAAa,GAAG,EAAE;IACvB,IAAI,CAACC,eAAe,GAAG,KAAK;IAC5B,IAAI,CAACC,aAAa,GAAG,KAAK;IAC1B,IAAI,CAACC,2BAA2B,GAAG,KAAK;IACxC,IAAI,CAACC,8BAA8B,GAAG,KAAK;IAC3C,IAAI,CAACC,mBAAmB,GAAG,KAAK;IAChC,IAAI,CAACC,oBAAoB,GAAG,KAAK;IACjC,IAAI,CAACC,iBAAiB,GAAG,KAAK;IAC9B,IAAI,CAACC,kBAAkB,GAAG,KAAK;IAC/B,IAAI,CAACC,uBAAuB,GAAG,EAAE;IACjC,IAAI,CAACC,qBAAqB,GAAG,EAAE;IAC/B,IAAI,CAACC,cAAc,GAAG,EAAE;IACxB,IAAI,CAACC,mBAAmB,GAAG,EAAE;IAC7B,IAAI,CAACC,iBAAiB,GAAG,EAAE;IAC3B,IAAI,CAACC,gBAAgB,GAAG,EAAE;IAC1B,IAAI,CAACC,yBAAyB,GAAG,EAAE;IACnC,IAAI,CAACC,uBAAuB,GAAG,EAAE;IACjC,IAAI,CAACC,qBAAqB,GAAG,EAAE;IAC/B,IAAI,CAACC,mBAAmB,GAAG,EAAE;IAC7B,IAAI,CAACC,iBAAiB,GAAG,KAAK;IAC9B,IAAI,CAACC,SAAS,GAAG,EAAE;IACnB,IAAI,CAACC,mBAAmB,GAAG,EAAE;IAC7B,IAAI,CAACC,iBAAiB,GAAG,EAAE;IAC3B;IACA,IAAI,CAACC,uBAAuB,GAAG,GAAG;IAClC;IACA,IAAI,CAACC,wBAAwB,GAAG,GAAG;IACnC;IACA,IAAI,CAACC,mBAAmB,GAAG,EAAE;IAC7B;IACA,IAAI,CAACC,iBAAiB,GAAG,EAAE;IAC3B;AACR;AACA;IACQ;IACA,IAAI,CAACC,eAAe,GAAG,EAAE;IACzB,IAAI,CAACC,wBAAwB,GAAG,EAAE;IAClC,IAAI,CAACC,oBAAoB,GAAG,EAAE;IAC9B,IAAI,CAACC,kBAAkB,GAAG,EAAE;IAC5B;AACR;AACA;IACQ;IACA,IAAI,CAACC,YAAY,GAAG,CAAC;IACrB,IAAI,CAACC,MAAM,GAAG,UAAUC,CAAC,EAAE;MACvB,IAAI,IAAI,CAAC5C,aAAa,EAAE;QACpB,IAAI,CAACD,WAAW,GAAG,IAAI;QACvB,IAAI,CAACC,aAAa,GAAG,KAAK;MAC9B;MACA,IAAI4C,CAAC,CAACC,QAAQ,IAAI,IAAI,CAACC,aAAa,IAAI,MAAM,IAAI,IAAI,CAAC/C,WAAW,EAAE;QAChE6C,CAAC,CAACG,MAAM,GAAG,IAAI;QACf,IAAI,CAAChD,WAAW,GAAG,KAAK;MAC5B;IACJ,CAAC;IACD;IACA,IAAI,CAACiD,aAAa,GAAG,UAAUC,IAAI,EAAE;MACjC;MACA,IAAIC,KAAK,GAAGpD,KAAK;MACjB;MACA,IAAIqD,YAAY,GAAGF,IAAI,CAACG,MAAM,CAACC,KAAK;MACpC,IAAIJ,IAAI,CAACG,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,KAAK,IAAI,EAAE;QAC/B,IAAIC,YAAY,GAAGH,YAAY,CAAC,CAAC,CAAC;QAClC,IAAIG,YAAY,CAACC,IAAI,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,OAAO,EAAE;UAC7C,IAAIC,MAAM,GAAG,IAAIC,UAAU,CAAC,CAAC;UAC7B;UACAD,MAAM,CAACE,MAAM,GAAG,UAAUf,CAAC,EAAE;YACzB;YACA,IAAIgB,MAAM,GAAGC,QAAQ,CAACC,cAAc,CAAChE,KAAK,CAACF,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,yBAAyB,CAAC;YAC5F;YACA,IAAIC,OAAO,GAAGL,MAAM,CAACM,UAAU,CAAC,IAAI,CAAC;YACrC;YACA,IAAIC,KAAK,GAAG,IAAIC,KAAK,CAAC,CAAC;YACvB;YACA,IAAIlB,KAAK,GAAGpD,KAAK;YACjBqE,KAAK,CAACR,MAAM,GAAG,YAAY;cACvB;cACA,IAAIU,UAAU,GAAGR,QAAQ,CAACC,cAAc,CAAChE,KAAK,CAACF,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,qBAAqB,CAAC;cAC5FK,UAAU,CAACC,KAAK,CAACC,UAAU,GAAG,QAAQ;cACtCN,OAAO,CAACO,SAAS,CAACL,KAAK,EAAE,CAAC,EAAE,CAAC,EAAEP,MAAM,CAACa,KAAK,EAAEb,MAAM,CAACc,MAAM,CAAC;cAC3DxB,KAAK,CAACyB,kBAAkB,CAAC,KAAK,CAAC;cAC/BzB,KAAK,CAAC9C,YAAY,GAAG+D,KAAK,CAACS,GAAG;cAC9B1B,KAAK,CAAC2B,oBAAoB,GAAGV,KAAK,CAACW,aAAa;cAChD5B,KAAK,CAAC6B,mBAAmB,GAAGZ,KAAK,CAACa,YAAY;YAClD,CAAC;YACDb,KAAK,CAACS,GAAG,GAAGhC,CAAC,CAACqC,aAAa,CAACC,MAAM;YAClChC,KAAK,CAAC9C,YAAY,GAAGwC,CAAC,CAACqC,aAAa,CAACC,MAAM;YAC3ChC,KAAK,CAACiC,uBAAuB,GAAGvC,CAAC,CAACqC,aAAa,CAACC,MAAM;UAC1D,CAAC;UACDzB,MAAM,CAAC2B,aAAa,CAAC9B,YAAY,CAAC;QACtC;MACJ;MACAL,IAAI,CAACG,MAAM,CAACiC,KAAK,GAAG,EAAE;MACtBpC,IAAI,CAACgC,aAAa,CAACI,KAAK,GAAG,EAAE;IACjC,CAAC;IACD,IAAI,CAACzF,SAAS,GAAGA,SAAS;IAC1B,IAAI,CAACC,aAAa,GAAGA,aAAa;EACtC;EACA;AACJ;AACA;AACA;EACIF,SAAS,CAAC2F,SAAS,CAACC,oBAAoB,GAAG,YAAY;IACnD,IAAIzF,KAAK,GAAG,IAAI;IAChB,IAAI0F,YAAY,GAAG,GAAG;IACtB,IAAI,CAACvF,qBAAqB,GAAG,EAAE;IAC/B,IAAI,CAACC,oBAAoB,GAAG,EAAE;IAC9B,IAAI,CAAClB,QAAQ,CAAC,CAAC,EAAE;MACb,IAAIyG,SAAS,GAAG,IAAI,CAAC7F,SAAS,CAACmE,OAAO,CAACC,EAAE;MACzC,IAAI0B,SAAS,GAAG5G,aAAa,CAAC,KAAK,EAAE;QAAEkF,EAAE,EAAEyB,SAAS,GAAG,mBAAmB;QAAEE,SAAS,EAAE;MAAwB,CAAC,CAAC;MACjHD,SAAS,CAACpB,KAAK,CAACsB,OAAO,GAAG,OAAO;MACjC,IAAI,CAAC/F,aAAa,CAACgG,aAAa,CAACC,WAAW,CAACJ,SAAS,CAAC;MACvD,IAAIK,aAAa,GAAG,IAAI,CAACC,qBAAqB,CAAC,CAAC;MAChD,IAAIC,oBAAoB,GAAG,KAAK,CAAC;MACjC,IAAI,CAAC,IAAI,CAACpG,aAAa,CAACqG,oBAAoB,EAAE;QAC1C,IAAI,IAAI,CAACrG,aAAa,CAACsG,cAAc,EAAE;UACnCF,oBAAoB,GAAG,IAAI,CAACrG,SAAS,CAACwG,SAAS,CAACC,WAAW,CAAC,oCAAoC,CAAC;QACrG,CAAC,MACI;UACDJ,oBAAoB,GAAG,IAAI,CAACrG,SAAS,CAACwG,SAAS,CAACC,WAAW,CAAC,sCAAsC,CAAC;QACvG;MACJ,CAAC,MACI;QACD,IAAI,IAAI,CAACxG,aAAa,CAACsG,cAAc,EAAE;UACnCF,oBAAoB,GAAG,IAAI,CAACrG,SAAS,CAACwG,SAAS,CAACC,WAAW,CAAC,8BAA8B,CAAC;QAC/F,CAAC,MACI;UACDJ,oBAAoB,GAAG,IAAI,CAACrG,SAAS,CAACwG,SAAS,CAACC,WAAW,CAAC,gCAAgC,CAAC;QACjG;MACJ;MACA,IAAI,IAAI,CAACC,eAAe,EAAE;QACtB,IAAI,CAACA,eAAe,CAACC,OAAO,GAAGR,aAAa;MAChD,CAAC,MACI;QACD,IAAI,CAACO,eAAe,GAAG,IAAIrH,MAAM,CAAC;UAC9B;UACAuH,aAAa,EAAE,IAAI;UAAEC,aAAa,EAAE,KAAK;UAAEC,OAAO,EAAE,IAAI;UAAEC,MAAM,EAAEV,oBAAoB;UAAEW,QAAQ,EAAE,8BAA8B;UAChIxD,MAAM,EAAE,IAAI,CAACxD,SAAS,CAACmE,OAAO;UAAEwC,OAAO,EAAER,aAAa;UAAEtB,KAAK,EAAE,OAAO;UAAEoC,OAAO,EAAE,IAAI;UAAEC,aAAa,EAAE,IAAI;UAC1GC,WAAW,EAAE,SAAAA,CAAA,EAAY;YACrBjH,KAAK,CAACkH,oBAAoB,CAAC,CAAC;YAC5BlH,KAAK,CAACwG,eAAe,CAACW,OAAO,CAAC,CAAC;YAC/BnH,KAAK,CAACwG,eAAe,GAAG,IAAI;YAC5B,IAAIxG,KAAK,CAACoH,MAAM,EAAE;cACdpH,KAAK,CAACoH,MAAM,CAACD,OAAO,CAAC,CAAC;YAC1B;YACA;YACA,IAAIE,eAAe,GAAGtD,QAAQ,CAACC,cAAc,CAAChE,KAAK,CAACF,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,mBAAmB,CAAC;YAC/F,IAAImD,eAAe,EAAE;cACjB;cACAA,eAAe,CAACC,UAAU,GAAGD,eAAe,CAACC,UAAU,CAACC,WAAW,CAACF,eAAe,CAAC,GAAGA,eAAe,CAACG,aAAa,CAACD,WAAW,CAACF,eAAe,CAAC;YACrJ;YACA;YACA,IAAI,CAACrH,KAAK,CAACD,aAAa,CAACqG,oBAAoB,IAAI,CAACpG,KAAK,CAACD,aAAa,CAAC0H,qBAAqB,IAAI,CAACxI,iBAAiB,CAACe,KAAK,CAACF,SAAS,CAAC4H,gBAAgB,CAACvC,aAAa,CAAC,EAAE;cAC/JnF,KAAK,CAACF,SAAS,CAAC6H,qBAAqB,CAAC3H,KAAK,CAACF,SAAS,CAAC4H,gBAAgB,CAACvC,aAAa,CAACyC,IAAI,EAAE,EAAE,CAAC;YAClG;YACA5H,KAAK,CAACD,aAAa,CAACqG,oBAAoB,GAAG,KAAK;YAChDpG,KAAK,CAAC6H,QAAQ,CAAC,CAAC;UACpB;QACJ,CAAC,CAAC;QACF,IAAI,CAACrB,eAAe,CAACsB,OAAO,GAAG;QAC3B;QACA;UAAEC,WAAW,EAAE;YAAEtB,OAAO,EAAE,IAAI,CAAC3G,SAAS,CAACwG,SAAS,CAACC,WAAW,CAAC,OAAO,CAAC;YAAEyB,QAAQ,EAAE,IAAI;YAAElB,QAAQ,EAAE;UAAgB,CAAC;UAAEmB,KAAK,EAAE,IAAI,CAACf,oBAAoB,CAACgB,IAAI,CAAC,IAAI;QAAE,CAAC;QACnK;QACA;UAAEH,WAAW,EAAE;YAAEtB,OAAO,EAAE,IAAI,CAAC3G,SAAS,CAACwG,SAAS,CAACC,WAAW,CAAC,QAAQ,CAAC;YAAEO,QAAQ,EAAE;UAAiB,CAAC;UAAEmB,KAAK,EAAE,IAAI,CAACE,mBAAmB,CAACD,IAAI,CAAC,IAAI;QAAE,CAAC;QACpJ;QACA;UAAEH,WAAW,EAAE;YAAEtB,OAAO,EAAE,IAAI,CAAC3G,SAAS,CAACwG,SAAS,CAACC,WAAW,CAAC,QAAQ,CAAC;YAAE6B,SAAS,EAAE,IAAI;YAAEJ,QAAQ,EAAE,IAAI;YAAElB,QAAQ,EAAE;UAAiB,CAAC;UAAEmB,KAAK,EAAE,IAAI,CAACI,kBAAkB,CAACH,IAAI,CAAC,IAAI;QAAE,CAAC,CACvL;QACD,IAAI,CAAC1B,eAAe,CAAC8B,QAAQ,CAAC1C,SAAS,CAAC;MAC5C;MACA,IAAI,IAAI,CAAC9F,SAAS,CAACmE,OAAO,CAACsE,WAAW,GAAG7C,YAAY,EACjD,IAAI,CAAC8C,gBAAgB,CAAC,CAAC;MAC3B,IAAI,IAAI,CAAC1I,SAAS,CAAC2I,SAAS,EAAE;QAC1B,IAAI,CAACjC,eAAe,CAACiC,SAAS,GAAG,IAAI,CAAC3I,SAAS,CAAC2I,SAAS;MAC7D;MACA,IAAIC,YAAY,GAAG,IAAI,CAAClC,eAAe,CAACC,OAAO,CAACkC,aAAa,CAAC,CAAC,CAAC,CAACC,KAAK,CAAC,CAAC,CAAC;MACzE,IAAIF,YAAY,CAAC7B,MAAM,CAACgC,KAAK,KAAK,MAAM,EAAE;QACtC,IAAIC,YAAY,GAAG/E,QAAQ,CAACC,cAAc,CAAC,UAAU,CAAC;QACtD,IAAI,CAAC+E,qBAAqB,CAACD,YAAY,CAAC;MAC5C,CAAC,MACI,IAAIJ,YAAY,CAAC7B,MAAM,CAACgC,KAAK,KAAK,MAAM,EAAE;QAC3C,IAAIG,YAAY,GAAGjF,QAAQ,CAACC,cAAc,CAAC,WAAW,CAAC;QACvD,IAAI,CAAC+E,qBAAqB,CAACC,YAAY,CAAC;MAC5C,CAAC,MACI;QACD,IAAIC,aAAa,GAAGlF,QAAQ,CAACC,cAAc,CAAC,WAAW,CAAC;QACxD,IAAI,CAAC+E,qBAAqB,CAACE,aAAa,CAAC;MAC7C;IACJ,CAAC,MACI;MACD;MACA,IAAInF,MAAM,GAAGC,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,mBAAmB,CAAC;MACrF,IAAIJ,MAAM,EAAE;QACR,IAAI,CAAC,IAAI,CAAC/D,aAAa,CAACgG,aAAa,CAACmD,aAAa,CAAC,wBAAwB,CAAC,EAAE;UAC3E,IAAIvD,SAAS,GAAG,IAAI,CAAC7F,SAAS,CAACmE,OAAO,CAACC,EAAE;UACzC;UACA,IAAI0B,SAAS,GAAG5G,aAAa,CAAC,KAAK,EAAE;YAAEkF,EAAE,EAAEyB,SAAS,GAAG,mBAAmB;YAAEE,SAAS,EAAE;UAAwB,CAAC,CAAC;UACjHD,SAAS,CAACpB,KAAK,CAACsB,OAAO,GAAG,OAAO;UACjC,IAAI,CAAC/F,aAAa,CAACgG,aAAa,CAACC,WAAW,CAACJ,SAAS,CAAC;QAC3D;QACA9B,MAAM,CAACqF,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAACC,uBAAuB,CAAClB,IAAI,CAAC,IAAI,CAAC,CAAC;QAC7EpE,MAAM,CAACqF,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAACE,uBAAuB,CAACnB,IAAI,CAAC,IAAI,CAAC,CAAC;QAC7EpE,MAAM,CAACqF,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAACG,qBAAqB,CAACpB,IAAI,CAAC,IAAI,CAAC,CAAC;QACzEpE,MAAM,CAACqF,gBAAgB,CAAC,YAAY,EAAE,IAAI,CAACG,qBAAqB,CAACpB,IAAI,CAAC,IAAI,CAAC,CAAC;QAC5EpE,MAAM,CAACqF,gBAAgB,CAAC,YAAY,EAAE,IAAI,CAACC,uBAAuB,CAAClB,IAAI,CAAC,IAAI,CAAC,CAAC;QAC9EpE,MAAM,CAACqF,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAACE,uBAAuB,CAACnB,IAAI,CAAC,IAAI,CAAC,CAAC;QAC7EpE,MAAM,CAACqF,gBAAgB,CAAC,UAAU,EAAE,IAAI,CAACG,qBAAqB,CAACpB,IAAI,CAAC,IAAI,CAAC,CAAC;QAC1E,IAAI,CAAChB,oBAAoB,CAAC,CAAC;MAC/B;MACA,IAAI,CAACpH,SAAS,CAACyJ,eAAe,CAACC,iBAAiB,CAAC,oBAAoB,EAAE,IAAI,CAACzJ,aAAa,CAACqG,oBAAoB,CAAC;IACnH;IACA,IAAI,CAACqD,kBAAkB,CAAC,CAAC;EAC7B,CAAC;EACD5J,SAAS,CAAC2F,SAAS,CAACiE,kBAAkB,GAAG,YAAY;IACjD,IAAI,CAAC,IAAI,CAAC1J,aAAa,CAACqG,oBAAoB,KAAK,IAAI,CAACtF,eAAe,IAAI,IAAI,CAACC,aAAa,CAAC,EAAE;MAC1F,IAAI,CAAC,IAAI,CAAChB,aAAa,CAACsG,cAAc,IAAI,IAAI,CAACvF,eAAe,EAAE;QAC5D,IAAI,CAACR,YAAY,GAAG,IAAI,CAACgC,mBAAmB;MAChD,CAAC,MACI,IAAI,IAAI,CAACvC,aAAa,CAACsG,cAAc,IAAI,IAAI,CAACtF,aAAa,EAAE;QAC9D,IAAI,CAACT,YAAY,GAAG,IAAI,CAACiC,iBAAiB;MAC9C;MACA;MACA,IAAIuB,MAAM,GAAGC,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,mBAAmB,CAAC;MACrF;MACA,IAAIwF,SAAS,GAAG5F,MAAM,CAACM,UAAU,CAAC,IAAI,CAAC;MACvC;MACA,IAAIuF,OAAO,GAAG,IAAIrF,KAAK,CAAC,CAAC;MACzBqF,OAAO,CAAC9F,MAAM,GAAG,YAAY;QACzB6F,SAAS,CAAChF,SAAS,CAACiF,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;MACtC,CAAC;MACD,IAAI,CAAC,IAAI,CAAC5J,aAAa,CAACsG,cAAc,IAAI,IAAI,CAACvF,eAAe,EAAE;QAC5D6I,OAAO,CAAC7E,GAAG,GAAG,IAAI,CAAC5C,mBAAmB;MAC1C,CAAC,MACI,IAAI,IAAI,CAACnC,aAAa,CAACsG,cAAc,IAAI,IAAI,CAACtF,aAAa,EAAE;QAC9D4I,OAAO,CAAC7E,GAAG,GAAG,IAAI,CAAC3C,iBAAiB;MACxC;MACA;MACA,IAAIyH,QAAQ,GAAG7F,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,oBAAoB,CAAC;MACxF,IAAI0F,QAAQ,EAAE;QACVA,QAAQ,CAACC,OAAO,GAAG,IAAI;MAC3B;MACA,IAAI,CAAChF,kBAAkB,CAAC,KAAK,CAAC;MAC9B,IAAI,CAACiF,iBAAiB,CAAC,KAAK,CAAC;IACjC;EACJ,CAAC;EACDjK,SAAS,CAAC2F,SAAS,CAACuE,sBAAsB,GAAG,YAAY;IACrD,IAAIC,MAAM,GAAG,EAAE;IACf,IAAI,CAAC,IAAI,CAACjK,aAAa,CAACqG,oBAAoB,KAAK,IAAI,CAAClF,mBAAmB,IAAI,IAAI,CAACE,iBAAiB,CAAC,EAAE;MAClG,IAAI,CAAC,IAAI,CAACrB,aAAa,CAACsG,cAAc,IAAI,IAAI,CAACnF,mBAAmB,EAAE;QAChE8I,MAAM,GAAG,IAAI,CAAC1I,uBAAuB;MACzC,CAAC,MACI;QACD0I,MAAM,GAAG,IAAI,CAACzI,qBAAqB;MACvC;IACJ;IACA,OAAOyI,MAAM;EACjB,CAAC;EACD;EACAnK,SAAS,CAAC2F,SAAS,CAACyE,uBAAuB,GAAG,YAAY;IACtD,IAAID,MAAM,GAAG,EAAE;IACf,IAAI,CAAC,IAAI,CAACjK,aAAa,CAACqG,oBAAoB,KAAK,IAAI,CAACjF,oBAAoB,IAAI,IAAI,CAACE,kBAAkB,CAAC,EAAE;MACpG,IAAI,CAAC,IAAI,CAACtB,aAAa,CAACsG,cAAc,IAAI,IAAI,CAAClF,oBAAoB,EAAE;QACjE6I,MAAM,GAAG,IAAI,CAACpI,yBAAyB;MAC3C,CAAC,MACI;QACDoI,MAAM,GAAG,IAAI,CAACnI,uBAAuB;MACzC;IACJ;IACA,OAAOmI,MAAM;EACjB,CAAC;EACD;EACAnK,SAAS,CAAC2F,SAAS,CAACuD,qBAAqB,GAAG,UAAUa,QAAQ,EAAE;IAC5D,IAAI,IAAI,CAAC7J,aAAa,CAACqG,oBAAoB,EAAE;MACzC,IAAI,IAAI,CAACrG,aAAa,CAACsG,cAAc,EAAE;QACnC,IAAI,IAAI,CAACvG,SAAS,CAACoK,4BAA4B,CAACC,qBAAqB,IAAI,IAAI,CAACrK,SAAS,CAACoK,4BAA4B,CAACC,qBAAqB,CAACC,iBAAiB,EAAE;UAC1J,IAAI,CAACC,kBAAkB,CAACT,QAAQ,CAAC;QACrC;MACJ,CAAC,MACI,IAAI,IAAI,CAAC9J,SAAS,CAACoK,4BAA4B,CAACI,uBAAuB,IAAI,IAAI,CAACxK,SAAS,CAACoK,4BAA4B,CAACI,uBAAuB,CAACF,iBAAiB,EAAE;QACnK,IAAI,CAACC,kBAAkB,CAACT,QAAQ,CAAC;MACrC;IACJ,CAAC,MACI;MACD,IAAI,IAAI,CAAC7J,aAAa,CAACsG,cAAc,EAAE;QACnC,IAAI,IAAI,CAACvG,SAAS,CAACyK,oBAAoB,CAACJ,qBAAqB,IAAI,IAAI,CAACrK,SAAS,CAACyK,oBAAoB,CAACJ,qBAAqB,CAACC,iBAAiB,EAAE;UAC1I,IAAI,CAACC,kBAAkB,CAACT,QAAQ,CAAC;QACrC;MACJ,CAAC,MACI;QACD,IAAI,IAAI,CAAC9J,SAAS,CAAC0K,sBAAsB,CAACF,uBAAuB,IAAI,IAAI,CAACxK,SAAS,CAAC0K,sBAAsB,CAACF,uBAAuB,CAACF,iBAAiB,EAAE;UAClJ,IAAI,CAACC,kBAAkB,CAACT,QAAQ,CAAC;QACrC;MACJ;IACJ;EACJ,CAAC;EACD/J,SAAS,CAAC2F,SAAS,CAACiF,qBAAqB,GAAG,YAAY;IACpD,IAAI,IAAI,CAAC1K,aAAa,CAACqG,oBAAoB,EAAE;MACzC,OAAO,KAAK;IAChB,CAAC,MACI;MACD,IAAI,IAAI,CAACrG,aAAa,CAACsG,cAAc,EAAE;QACnC,IAAI,IAAI,CAACvG,SAAS,CAACyK,oBAAoB,CAACJ,qBAAqB,IAAI,IAAI,CAACrK,SAAS,CAACyK,oBAAoB,CAACJ,qBAAqB,CAACC,iBAAiB,EAAE;UAC1I,OAAO,KAAK;QAChB,CAAC,MACI;UACD,OAAO,IAAI,CAACpJ,2BAA2B;QAC3C;MACJ,CAAC,MACI;QACD,IAAI,IAAI,CAAClB,SAAS,CAAC0K,sBAAsB,CAACF,uBAAuB,IAAI,IAAI,CAACxK,SAAS,CAAC0K,sBAAsB,CAACF,uBAAuB,CAACF,iBAAiB,EAAE;UAClJ,OAAO,KAAK;QAChB,CAAC,MACI;UACD,OAAO,IAAI,CAACnJ,8BAA8B;QAC9C;MACJ;IACJ;EACJ,CAAC;EACDpB,SAAS,CAAC2F,SAAS,CAAC6E,kBAAkB,GAAG,UAAUT,QAAQ,EAAE;IACzD,IAAIA,QAAQ,EAAE;MACVA,QAAQ,CAACpC,aAAa,CAAChD,KAAK,CAACsB,OAAO,GAAG,MAAM;IACjD;EACJ,CAAC;EACDjG,SAAS,CAAC2F,SAAS,CAACkF,kBAAkB,GAAG,YAAY;IACjD;IACA,IAAId,QAAQ,GAAG7F,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,oBAAoB,CAAC;IACxF,IAAI0F,QAAQ,IAAIA,QAAQ,CAACC,OAAO,EAAE;MAC9B,IAAI,IAAI,CAACvJ,YAAY,KAAK,EAAE,EAAE;QAC1B,IAAI,CAAC,IAAI,CAACP,aAAa,CAACsG,cAAc,EAAE;UACpC,IAAI,CAACvF,eAAe,GAAG,IAAI;UAC3B,IAAI,CAACwB,mBAAmB,GAAG,IAAI,CAAChC,YAAY;QAChD,CAAC,MACI;UACD,IAAI,CAACS,aAAa,GAAG,IAAI;UACzB,IAAI,CAACwB,iBAAiB,GAAG,IAAI,CAACjC,YAAY;QAC9C;QACA;QACA,IAAIwD,MAAM,GAAGC,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,mBAAmB,CAAC;QACrF,IAAI,CAAC1B,eAAe,GAAGsB,MAAM,CAAC6G,SAAS,CAAC,CAAC;QACzC,IAAI,CAAC,IAAI,CAAC5K,aAAa,CAACsG,cAAc,EAAE;UACpC,IAAI,CAAC3D,oBAAoB,GAAG,IAAI,CAACF,eAAe;QACpD,CAAC,MACI;UACD,IAAI,CAACG,kBAAkB,GAAG,IAAI,CAACH,eAAe;QAClD;MACJ;IACJ,CAAC,MACI;MACD,IAAI,IAAI,CAAC1B,eAAe,IAAI,CAAC,IAAI,CAACf,aAAa,CAACsG,cAAc,EAAE;QAC5D,IAAI,CAACvF,eAAe,GAAG,KAAK;QAC5B,IAAI,CAACwB,mBAAmB,GAAG,EAAE;QAC7B,IAAI,CAACE,eAAe,GAAG,EAAE;QACzB,IAAI,CAACE,oBAAoB,GAAG,EAAE;MAClC,CAAC,MACI,IAAI,IAAI,CAAC3B,aAAa,IAAI,IAAI,CAAChB,aAAa,CAACsG,cAAc,EAAE;QAC9D,IAAI,CAACtF,aAAa,GAAG,KAAK;QAC1B,IAAI,CAACwB,iBAAiB,GAAG,EAAE;QAC3B,IAAI,CAACC,eAAe,GAAG,EAAE;QACzB,IAAI,CAACG,kBAAkB,GAAG,EAAE;MAChC;MACA,IAAI,CAACuE,oBAAoB,CAAC,CAAC;IAC/B;EACJ,CAAC;EACD;AACJ;AACA;AACA;EACI;EACArH,SAAS,CAAC2F,SAAS,CAACoF,YAAY,GAAG,UAAUnH,IAAI,EAAE;IAC/C,IAAIoH,KAAK;IACT,IAAI,IAAI,CAAC9K,aAAa,CAACqG,oBAAoB,EAAE;MACzC,IAAI0E,cAAc,GAAG,IAAI,CAAChL,SAAS,CAACiL,UAAU,CAACC,UAAU,CAAC,CAAC;MAC3D,IAAI,CAACjL,aAAa,CAACkL,qBAAqB,GAAG,IAAI;MAC/C,IAAI,CAAClL,aAAa,CAACmL,gBAAgB,GAAG,IAAI;MAC1C,IAAIC,SAAS,GAAG,IAAI,CAACpL,aAAa,CAACqL,iBAAiB,GAAG,CAAC;MACxD;MACA,IAAIC,SAAS,GAAG,IAAI,CAACvL,SAAS,CAACoK,4BAA4B,CAACmB,SAAS,GAAG,IAAI,CAACvL,SAAS,CAACoK,4BAA4B,CAACmB,SAAS,GAAG,CAAC;MACjI;MACA,IAAIC,OAAO,GAAG,IAAI,CAACxL,SAAS,CAACoK,4BAA4B,CAACoB,OAAO,GAAG,IAAI,CAACxL,SAAS,CAACoK,4BAA4B,CAACoB,OAAO,GAAG,CAAC;MAC3H;MACA,IAAIC,WAAW,GAAG,IAAI,CAACzL,SAAS,CAACoK,4BAA4B,CAACqB,WAAW,GAAG,IAAI,CAACzL,SAAS,CAACoK,4BAA4B,CAACqB,WAAW,GAAG,SAAS;MAC/I,IAAIC,QAAQ,GAAG,EAAE;MACjB,IAAIC,UAAU,GAAG,WAAW;MAC5B,IAAIC,eAAe,GAAG,IAAI,CAACC,0BAA0B,CAAC,IAAI,CAACrL,YAAY,EAAE,IAAI,CAAC;MAC9E;MACA,IAAIwD,MAAM,GAAGC,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,mBAAmB,CAAC;MACrF,IAAI,CAAC1B,eAAe,GAAGsB,MAAM,CAAC6G,SAAS,CAAC,CAAC;MACzC,IAAI,CAAC,IAAI,CAAC5K,aAAa,CAACsG,cAAc,EAAE;QACpC,IAAI,CAAC3D,oBAAoB,GAAG,IAAI,CAACF,eAAe;MACpD,CAAC,MACI;QACD,IAAI,CAACG,kBAAkB,GAAG,IAAI,CAACH,eAAe;MAClD;MACAqI,KAAK,GAAG;QACJ;QACA3G,EAAE,EAAE,MAAM,GAAG,IAAI,CAACnE,aAAa,CAAC6L,cAAc;QAAEC,MAAM,EAAEH,eAAe;QAAEP,SAAS,EAAEA,SAAS;QAAEW,IAAI,EAAE,IAAI,CAACxL,YAAY;QAAEmL,UAAU,EAAEA,UAAU;QAAED,QAAQ,EAAEA,QAAQ;QAClKO,mBAAmB,EAAE,sBAAsB;QAAET,OAAO,EAAEA,OAAO;QAAEC,WAAW,EAAEA,WAAW;QAAEF,SAAS,EAAEA,SAAS;QAAEW,aAAa,EAAElB;MAClI,CAAC;MACD,IAAI,CAAC/K,aAAa,CAACkL,qBAAqB,GAAGJ,KAAK;MAChD;MACA,IAAIjB,QAAQ,GAAG,KAAK,CAAC;MACrB,IAAI1K,QAAQ,CAAC,CAAC,EAAE;QACZ0K,QAAQ,GAAG7F,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,oBAAoB,CAAC;MACxF,CAAC,MACI;QACD0F,QAAQ,GAAG7F,QAAQ,CAACC,cAAc,CAAC,UAAU,CAAC;MAClD;MACA,IAAI4F,QAAQ,IAAIA,QAAQ,CAACC,OAAO,EAAE;QAC9B,IAAI,CAACoC,sBAAsB,CAAC,CAAC;MACjC;MACA,IAAI,CAACC,kBAAkB,CAAC,CAAC;MACzB,IAAI,CAACnM,aAAa,CAACqG,oBAAoB,GAAG,KAAK;IACnD,CAAC,MACI;MACD;MACA,IAAIwD,QAAQ,GAAG7F,QAAQ,CAACC,cAAc,CAAC,UAAU,CAAC;MAClD,IAAIgF,YAAY,GAAGjF,QAAQ,CAACC,cAAc,CAAC,WAAW,CAAC;MACvD,IAAIiF,aAAa,GAAGlF,QAAQ,CAACC,cAAc,CAAC,WAAW,CAAC;MACxD,IAAIkH,gBAAgB,GAAG,KAAK;MAC5B,IAAI,CAACA,gBAAgB,EAAE;QACnB;QACA,IAAIpH,MAAM,GAAGC,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,mBAAmB,CAAC;QACrF,IAAI,CAAC1B,eAAe,GAAGsB,MAAM,CAAC6G,SAAS,CAAC,CAAC;QACzC,IAAIf,QAAQ,EAAE;UACV,IAAIA,QAAQ,CAACC,OAAO,EAAE;YAClB,IAAI,CAAC,IAAI,CAAC9J,aAAa,CAACsG,cAAc,EAAE;cACpC,IAAI,CAACvF,eAAe,GAAG,IAAI;cAC3B,IAAI,CAACoB,mBAAmB,GAAG,IAAI,CAACM,eAAe;cAC/C,IAAI,CAACF,mBAAmB,GAAG,IAAI,CAAChC,YAAY;YAChD,CAAC,MACI;cACD,IAAI,CAACS,aAAa,GAAG,IAAI;cACzB,IAAI,CAACoB,iBAAiB,GAAG,IAAI,CAACK,eAAe;cAC7C,IAAI,CAACD,iBAAiB,GAAG,IAAI,CAACjC,YAAY;YAC9C;YACA,IAAI,CAAC6L,kBAAkB,CAAC,IAAI,CAACpM,aAAa,CAACsG,cAAc,EAAE,IAAI,CAAC;UACpE,CAAC,MACI;YACD,IAAI,CAAC,IAAI,CAACtG,aAAa,CAACsG,cAAc,EAAE;cACpC,IAAI,CAACvF,eAAe,GAAG,KAAK;cAC5B,IAAI,CAACwB,mBAAmB,GAAG,EAAE;YACjC,CAAC,MACI;cACD,IAAI,CAACvB,aAAa,GAAG,KAAK;cAC1B,IAAI,CAACwB,iBAAiB,GAAG,EAAE;YAC/B;YACA,IAAI,CAAC4J,kBAAkB,CAAC,IAAI,CAACpM,aAAa,CAACsG,cAAc,EAAE,KAAK,CAAC;UACrE;QACJ;QACA,IAAI,CAAC+F,iBAAiB,CAACpD,YAAY,CAAC;QACpC,IAAI,CAACqD,mBAAmB,CAACpD,aAAa,CAAC;QACvC,IAAI,CAAC,IAAI,CAAClJ,aAAa,CAACsG,cAAc,EAAE;UACpC,IAAI,CAAC3D,oBAAoB,GAAG,IAAI,CAACF,eAAe;QACpD,CAAC,MACI;UACD,IAAI,CAACG,kBAAkB,GAAG,IAAI,CAACH,eAAe;QAClD;QACA,IAAI,CAAC1C,SAAS,CAAC4H,gBAAgB,CAAC4E,aAAa,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,CAACvM,aAAa,CAACoF,aAAa,EAAE,IAAI,CAAC;QACjG+F,gBAAgB,GAAG,IAAI;MAC3B;IACJ;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI;EACArL,SAAS,CAAC2F,SAAS,CAACmG,0BAA0B,GAAG,UAAUG,IAAI,EAAES,WAAW,EAAEC,YAAY,EAAEC,WAAW,EAAE;IACrG;IACA,IAAIC,cAAc,GAAGrN,eAAe,CAACyM,IAAI,CAAC;IAC1C;IACA,IAAIa,MAAM,GAAGvN,oBAAoB,CAACsN,cAAc,CAAC;IACjD,IAAIE,QAAQ,GAAG,CAAC,CAAC;IACjB,IAAIC,QAAQ,GAAG,CAAC,CAAC;IACjB,IAAIC,QAAQ,GAAG,CAAC,CAAC;IACjB,IAAIC,QAAQ,GAAG,CAAC,CAAC;IACjB,IAAIC,eAAe,GAAGjJ,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,mBAAmB,CAAC;IAC9F,IAAI+I,mBAAmB,GAAG,CAAC;IAC3B,IAAIC,oBAAoB,GAAG,CAAC;IAC5B,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGR,MAAM,CAACS,MAAM,EAAED,CAAC,EAAE,EAAE;MACpC;MACA,IAAIE,GAAG,GAAGV,MAAM,CAACQ,CAAC,CAAC;MACnB,IAAIP,QAAQ,KAAK,CAAC,CAAC,EAAE;QACjB;QACAA,QAAQ,GAAGU,UAAU,CAACD,GAAG,CAAC,GAAG,CAAC,CAACE,QAAQ,CAAC,CAAC,CAAC;QAC1C;QACAT,QAAQ,GAAGQ,UAAU,CAACD,GAAG,CAAC,GAAG,CAAC,CAACE,QAAQ,CAAC,CAAC,CAAC;QAC1C;QACAV,QAAQ,GAAGS,UAAU,CAACD,GAAG,CAAC,GAAG,CAAC,CAACE,QAAQ,CAAC,CAAC,CAAC;QAC1C;QACAR,QAAQ,GAAGO,UAAU,CAACD,GAAG,CAAC,GAAG,CAAC,CAACE,QAAQ,CAAC,CAAC,CAAC;MAC9C,CAAC,MACI;QACD;QACA,IAAIC,MAAM,GAAGF,UAAU,CAACD,GAAG,CAAC,GAAG,CAAC,CAACE,QAAQ,CAAC,CAAC,CAAC;QAC5C;QACA,IAAIE,MAAM,GAAGH,UAAU,CAACD,GAAG,CAAC,GAAG,CAAC,CAACE,QAAQ,CAAC,CAAC,CAAC;QAC5C,IAAIX,QAAQ,IAAIY,MAAM,EAAE;UACpBZ,QAAQ,GAAGY,MAAM;QACrB;QACA,IAAIX,QAAQ,IAAIY,MAAM,EAAE;UACpBZ,QAAQ,GAAGY,MAAM;QACrB;QACA,IAAIX,QAAQ,IAAIU,MAAM,EAAE;UACpBV,QAAQ,GAAGU,MAAM;QACrB;QACA,IAAIT,QAAQ,IAAIU,MAAM,EAAE;UACpBV,QAAQ,GAAGU,MAAM;QACrB;MACJ;IACJ;IACAR,mBAAmB,GAAGD,eAAe,GAAGA,eAAe,CAACU,WAAW,GAAG,GAAG;IACzER,oBAAoB,GAAGF,eAAe,GAAGA,eAAe,CAACW,YAAY,GAAG,GAAG;IAC3E,IAAIC,cAAc,GAAGd,QAAQ,GAAGF,QAAQ;IACxC,IAAIiB,cAAc,GAAGd,QAAQ,GAAGF,QAAQ;IACxC,IAAIiB,UAAU,GAAG,IAAI,CAACC,wBAAwB,CAACd,mBAAmB,EAAEC,oBAAoB,EAAEU,cAAc,EAAEC,cAAc,EAAEtB,WAAW,EAAEC,YAAY,EAAEC,WAAW,CAAC;IACjK,IAAIF,WAAW,EAAE;MACb,IAAIyB,SAAS,GAAG,IAAI,CAACjO,aAAa,CAACkO,aAAa,CAAC,CAAC;MAClD,IAAI9C,SAAS,GAAG,IAAI,CAACpL,aAAa,CAACqL,iBAAiB,GAAG,CAAC;MACxD,IAAI8C,OAAO,GAAGnK,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,WAAW,GAAGiH,SAAS,CAAC;MAC1F,IAAIgD,WAAW,GAAG,CAAEb,UAAU,CAACY,OAAO,CAAC1J,KAAK,CAACG,KAAK,CAAC,GAAG,CAAC,GAAKmJ,UAAU,CAACM,YAAY,GAAG,CAAE,IAAIJ,SAAS;MACrG;MACA,IAAIK,UAAU,GAAG,CAAEf,UAAU,CAACY,OAAO,CAAC1J,KAAK,CAACI,MAAM,CAAC,GAAG,CAAC,GAAKkJ,UAAU,CAACQ,aAAa,GAAG,CAAE,IAAIN,SAAS;MACtG,OAAO;QAAEO,CAAC,EAAEJ,WAAW;QAAEK,CAAC,EAAEH,UAAU;QAAE1J,KAAK,EAAEmJ,UAAU,CAACM,YAAY;QAAExJ,MAAM,EAAEkJ,UAAU,CAACQ;MAAc,CAAC;IAC9G,CAAC,MACI;MACD,OAAO;QAAEG,IAAI,EAAEX,UAAU,CAACY,eAAe;QAAEC,GAAG,EAAEb,UAAU,CAACc,cAAc;QAAEjK,KAAK,EAAEmJ,UAAU,CAACM,YAAY;QAAExJ,MAAM,EAAEkJ,UAAU,CAACQ;MAAc,CAAC;IACjJ;EACJ,CAAC;EACDzO,SAAS,CAAC2F,SAAS,CAACuI,wBAAwB,GAAG,UAAUd,mBAAmB,EAAEC,oBAAoB,EAAEU,cAAc,EAAEC,cAAc,EAAEtB,WAAW,EAAEC,YAAY,EAAEC,WAAW,EAAE;IACxK,IAAIoC,MAAM,GAAGjB,cAAc,GAAGX,mBAAmB;IACjD,IAAI6B,MAAM,GAAGjB,cAAc,GAAGX,oBAAoB;IAClD,IAAIc,SAAS,GAAG,IAAI,CAACjO,aAAa,CAACkO,aAAa,CAAC,CAAC;IAClD,IAAIG,YAAY,GAAG,CAAC;IACpB,IAAIE,aAAa,GAAG,CAAC;IACrB,IAAIS,oBAAoB,GAAG,KAAK;IAChC,IAAIC,iBAAiB,GAAG,KAAK;IAC7B,IAAIC,cAAc,GAAG,CAAC;IACtB,IAAIC,aAAa,GAAG,CAAC;IACrB,IAAI3C,WAAW,EAAE;MACb6B,YAAY,GAAG,IAAI,CAACtO,SAAS,CAACoK,4BAA4B,CAACvF,KAAK,GAAG,IAAI,CAAC7E,SAAS,CAACoK,4BAA4B,CAACvF,KAAK,GAAG,GAAG;MAC1H2J,aAAa,GAAG,IAAI,CAACxO,SAAS,CAACoK,4BAA4B,CAACtF,MAAM,GAAG,IAAI,CAAC9E,SAAS,CAACoK,4BAA4B,CAACtF,MAAM,GAAG,GAAG;IACjI,CAAC,MACI;MACD,IAAIuK,UAAU,GAAG3C,YAAY,GAAGA,YAAY,CAAChI,KAAK,CAACG,KAAK,KAAK,MAAM,GAAG6H,YAAY,CAACkB,WAAW,GAAGJ,UAAU,CAACd,YAAY,CAAChI,KAAK,CAACG,KAAK,CAAC,GAAG,IAAI,CAACyK,mBAAmB,CAAC3C,WAAW,CAAC4C,UAAU,CAACC,KAAK,CAAC;MAC9L,IAAIC,WAAW,GAAG/C,YAAY,GAAGA,YAAY,CAAChI,KAAK,CAACI,MAAM,KAAK,MAAM,GAAG4H,YAAY,CAACmB,YAAY,GAAGL,UAAU,CAACd,YAAY,CAAChI,KAAK,CAACI,MAAM,CAAC,GAAG,IAAI,CAACwK,mBAAmB,CAAC3C,WAAW,CAAC4C,UAAU,CAACG,MAAM,CAAC;MACnM,IAAIC,eAAe,GAAGN,UAAU,GAAGI,WAAW;MAC9C,IAAIG,gBAAgB,GAAGH,WAAW,GAAGJ,UAAU;MAC/C,IAAIQ,gBAAgB,GAAG1C,mBAAmB,GAAGC,oBAAoB;MACjE,IAAI0C,iBAAiB,GAAG1C,oBAAoB,GAAGD,mBAAmB;MAClE,IAAI4C,aAAa,GAAGrD,YAAY,GAAGA,YAAY,CAACsD,YAAY,CAACA,YAAY,CAACtL,KAAK,CAACuL,SAAS,GAAGvD,YAAY,CAACsD,YAAY,CAACA,YAAY,CAACtL,KAAK,CAACuL,SAAS,GAAGvD,YAAY,CAAChI,KAAK,CAACuL,SAAS,GAAGtD,WAAW,CAACuD,aAAa;MAC7M,IAAKP,eAAe,GAAGE,gBAAgB,IAAMD,gBAAgB,GAAGC,gBAAiB,IAAMM,IAAI,CAACC,GAAG,CAACT,eAAe,GAAGC,gBAAgB,CAAC,IAAK,CAAE,EAAE;QACxI,IAAIS,eAAe,GAAG,CAAC;QACvB,IAAKT,gBAAgB,GAAGC,gBAAgB,IAAOM,IAAI,CAACC,GAAG,CAACT,eAAe,GAAGC,gBAAgB,CAAC,IAAK,CAAE,EAAE;UAChGV,iBAAiB,GAAG,IAAI;UACxBmB,eAAe,GAAGT,gBAAgB,GAAGE,iBAAiB;QAC1D,CAAC,MACI;UACDb,oBAAoB,GAAG,IAAI;UAC3BoB,eAAe,GAAGV,eAAe,GAAGE,gBAAgB;QACxD;QACA,IAAIE,aAAa,KAAK,eAAe,IAAIA,aAAa,KAAK,gBAAgB,EAAE;UACzE;UACAzB,YAAY,GAAGmB,WAAW,GAAGvB,SAAS;UACtC;UACAM,aAAa,GAAGa,UAAU,GAAGnB,SAAS;QAC1C,CAAC,MACI;UACD,IAAIe,oBAAoB,EAAE;YACtB;YACAE,cAAc,GAAGE,UAAU,GAAGnB,SAAS;YACvC;YACAI,YAAY,GAAIe,UAAU,GAAGgB,eAAe,GAAInC,SAAS;YACzD;YACAM,aAAa,GAAGiB,WAAW,GAAGvB,SAAS;UAC3C;UACA,IAAIgB,iBAAiB,EAAE;YACnB;YACAE,aAAa,GAAGK,WAAW,GAAGvB,SAAS;YACvC;YACAI,YAAY,GAAGe,UAAU,GAAGnB,SAAS;YACrC;YACAM,aAAa,GAAIiB,WAAW,GAAGY,eAAe,GAAInC,SAAS;UAC/D;QACJ;MACJ,CAAC,MACI;QACD,IAAI6B,aAAa,KAAK,eAAe,IAAIA,aAAa,KAAK,gBAAgB,EAAE;UACzE;UACAzB,YAAY,GAAGmB,WAAW,GAAGvB,SAAS;UACtC;UACAM,aAAa,GAAGa,UAAU,GAAGnB,SAAS;QAC1C,CAAC,MACI;UACD;UACAI,YAAY,GAAGe,UAAU,GAAGnB,SAAS;UACrC;UACAM,aAAa,GAAGiB,WAAW,GAAGvB,SAAS;QAC3C;MACJ;IACJ;IACA,IAAIU,eAAe,GAAG,CAACzB,mBAAmB,GAAGW,cAAc,IAAI,CAAC;IAChE,IAAIgB,cAAc,GAAG,CAAC1B,oBAAoB,GAAGW,cAAc,IAAI,CAAC;IAChE,IAAIkB,oBAAoB,EAAE;MACtBL,eAAe,GAAIA,eAAe,GAAGzB,mBAAmB,GAAIgC,cAAc;MAC1E,IAAImB,aAAa,GAAG,CAAEnB,cAAc,GAAGJ,MAAM,GAAKT,YAAY,GAAGS,MAAO,IAAI,CAAC;MAC7EH,eAAe,GAAGA,eAAe,GAAG0B,aAAa;MACjDxB,cAAc,GAAIA,cAAc,GAAG1B,oBAAoB,GAAIoB,aAAa;IAC5E,CAAC,MACI,IAAIU,iBAAiB,EAAE;MACxBN,eAAe,GAAIA,eAAe,GAAGzB,mBAAmB,GAAImB,YAAY;MACxEQ,cAAc,GAAIA,cAAc,GAAG1B,oBAAoB,GAAIgC,aAAa;MACxE,IAAImB,YAAY,GAAG,CAAEnB,aAAa,GAAGJ,MAAM,GAAKR,aAAa,GAAGQ,MAAO,IAAI,CAAC;MAC5EF,cAAc,GAAGA,cAAc,GAAGyB,YAAY;IAClD,CAAC,MACI;MACD3B,eAAe,GAAIA,eAAe,GAAGzB,mBAAmB,GAAImB,YAAY;MACxEQ,cAAc,GAAIA,cAAc,GAAG1B,oBAAoB,GAAIoB,aAAa;IAC5E;IACA,IAAI,IAAI,CAACxO,SAAS,CAACwQ,gBAAgB,KAAK,SAAS,EAAE;MAC/ClC,YAAY,GAAGA,YAAY,GAAGS,MAAM;MACpCP,aAAa,GAAGA,aAAa,GAAGQ,MAAM;IAC1C;IACA,OAAO;MAAEJ,eAAe,EAAEA,eAAe;MAAEE,cAAc,EAAEA,cAAc;MAAER,YAAY,EAAEA,YAAY;MAAEE,aAAa,EAAEA;IAAc,CAAC;EACzI,CAAC;EACD;AACJ;AACA;EACIzO,SAAS,CAAC2F,SAAS,CAACqC,QAAQ,GAAG,UAAU3D,EAAE,EAAE;IACzC,IAAI,CAACA,EAAE,EAAE;MACL,IAAI,IAAI,CAACiB,aAAa,EAAE;QACpBpB,QAAQ,CAACC,cAAc,CAAC,IAAI,CAACmB,aAAa,CAACjB,EAAE,CAAC,CAACqM,KAAK,CAAC,CAAC;MAC1D;IACJ,CAAC,MACI;MACD,IAAI,CAACC,WAAW,CAAC,CAAC;MAClB,IAAIC,gBAAgB,GAAG1M,QAAQ,CAACC,cAAc,CAACE,EAAE,CAAC;MAClDuM,gBAAgB,CAACC,SAAS,CAACC,GAAG,CAAC,sBAAsB,CAAC;IAC1D;EACJ,CAAC;EACD;AACJ;AACA;EACI9Q,SAAS,CAAC2F,SAAS,CAACgL,WAAW,GAAG,YAAY;IAC1C,IAAI,IAAI,CAAC/N,wBAAwB,EAAE;MAC/B;MACA,IAAImO,eAAe,GAAG,IAAI,CAACnO,wBAAwB;MACnD,IAAImO,eAAe,CAACxD,MAAM,KAAK,CAAC,EAAE;QAC9BwD,eAAe,GAAG,IAAI,CAACC,YAAY,CAAC,CAAC;MACzC;MACA,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACrO,wBAAwB,CAAC2K,MAAM,EAAE0D,CAAC,EAAE,EAAE;QAC3D,IAAIC,gBAAgB,GAAG,IAAI,CAACjR,SAAS,CAACkR,kBAAkB,GAAG,IAAI,CAACvO,wBAAwB,CAACwO,QAAQ,CAACH,CAAC,CAACvD,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC2D,SAAS,CAACC,QAAQ,GAAG,IAAI,CAAC1O,wBAAwB,CAACwO,QAAQ,CAACH,CAAC,CAACvD,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC4D,QAAQ;QAC5M,IAAIV,gBAAgB,GAAG1M,QAAQ,CAACC,cAAc,CAAC+M,gBAAgB,CAAC;QAChE,IAAIN,gBAAgB,EAAE;UAClBA,gBAAgB,CAACC,SAAS,CAACU,MAAM,CAAC,sBAAsB,CAAC;QAC7D;MACJ;MACA,IAAI,IAAI,CAACtR,SAAS,CAAC4H,gBAAgB,CAACvC,aAAa,EAAE;QAC/C,IAAI,CAACrF,SAAS,CAAC4H,gBAAgB,CAACvC,aAAa,CAACuL,SAAS,CAACU,MAAM,CAAC,sBAAsB,CAAC;MAC1F;IACJ;EACJ,CAAC;EACD;EACAvR,SAAS,CAAC2F,SAAS,CAACqL,YAAY,GAAG,YAAY;IAC3C,IAAI,IAAI,CAAC/Q,SAAS,CAACkR,kBAAkB,EAAE;MACnC,IAAI,CAACvO,wBAAwB,GACzB,IAAI,CAAC3C,SAAS,CAACkR,kBAAkB,CAACK,wBAAwB,CAAC,IAAI,CAAC5O,wBAAwB,CAAC;IACjG,CAAC,MACI;MACD,IAAI,CAACA,wBAAwB,GAAG,IAAI,CAAC6O,qBAAqB,CAAC,CAAC;IAChE;IACA,OAAO,IAAI,CAAC7O,wBAAwB;EACxC,CAAC;EACD5C,SAAS,CAAC2F,SAAS,CAAC8L,qBAAqB,GAAG,YAAY;IACpD;IACA,IAAIxF,IAAI,GAAG,IAAI,CAAC/L,aAAa,CAACwR,yBAAyB,CAAC,aAAa,CAAC;IACtE;IACA,IAAI9E,WAAW;IACf,IAAIX,IAAI,EAAE;MACN;MACA,IAAI0F,cAAc,GAAGC,IAAI,CAACC,KAAK,CAAC5F,IAAI,CAAC;MACrC,KAAK,IAAIgF,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGU,cAAc,CAACpE,MAAM,EAAE0D,CAAC,EAAE,EAAE;QAC5CrE,WAAW,GAAG+E,cAAc,CAACP,QAAQ,CAACH,CAAC,CAACvD,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;QACxD,IAAId,WAAW,CAACkF,IAAI,KAAK,gBAAgB,IAAIlF,WAAW,CAACkF,IAAI,KAAK,cAAc,EAAE;UAC9E;UACAlF,WAAW,CAAC,UAAU,CAAC,GAAG,IAAI,CAAC3M,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,QAAQ,GAAGuI,WAAW,CAACmF,SAAS,GAAG,GAAG,GAAGd,CAAC;UAChG,IAAI,CAACrO,wBAAwB,CAACoP,IAAI,CAACL,cAAc,CAACP,QAAQ,CAACH,CAAC,CAACvD,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;QAClF;MACJ;IACJ;IACA,OAAO,IAAI,CAAC9K,wBAAwB;EACxC,CAAC;EACD5C,SAAS,CAAC2F,SAAS,CAAC2G,kBAAkB,GAAG,UAAU2F,YAAY,EAAEC,QAAQ,EAAE;IACvE,IAAID,YAAY,EAAE;MACd,IAAI,CAAC9Q,2BAA2B,GAAG+Q,QAAQ;IAC/C,CAAC,MACI;MACD,IAAI,CAAC9Q,8BAA8B,GAAG8Q,QAAQ;IAClD;EACJ,CAAC;EACDlS,SAAS,CAAC2F,SAAS,CAAC6C,kBAAkB,GAAG,YAAY;IACjD,IAAI,IAAI,CAACrF,aAAa,KAAK,MAAM,EAAE;MAC/B,IAAI,CAAC4H,YAAY,CAAC,CAAC;IACvB,CAAC,MACI,IAAI,IAAI,CAAC5H,aAAa,KAAK,MAAM,EAAE;MACpC,IAAI,CAACgP,gBAAgB,CAAC,CAAC;IAC3B,CAAC,MACI;MACD,IAAI,CAACC,iBAAiB,CAAC,CAAC;IAC5B;IACA,IAAI,CAAC1R,gBAAgB,GAAG,EAAE;IAC1B,IAAI,CAACC,iBAAiB,GAAG,EAAE;EAC/B,CAAC;EACDX,SAAS,CAAC2F,SAAS,CAACwM,gBAAgB,GAAG,UAAUvO,IAAI,EAAE;IACnD,IAAI,IAAI,CAAC1D,aAAa,CAACqG,oBAAoB,EAAE;MACzC,IAAI4H,SAAS,GAAG,IAAI,CAACjO,aAAa,CAACkO,aAAa,CAAC,CAAC;MAClD;MACA,IAAIpD,KAAK,GAAG,IAAI;MAChB,IAAIC,cAAc,GAAG,IAAI,CAAChL,SAAS,CAACiL,UAAU,CAACC,UAAU,CAAC,CAAC;MAC3D,IAAI,CAACjL,aAAa,CAACkL,qBAAqB,GAAG,IAAI;MAC/C,IAAI,CAAClL,aAAa,CAACmL,gBAAgB,GAAG,IAAI;MAC1C,IAAIC,SAAS,GAAG,IAAI,CAACpL,aAAa,CAACqL,iBAAiB,GAAG,CAAC;MACxD,IAAI8C,OAAO,GAAGnK,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,WAAW,GAAGiH,SAAS,CAAC;MAC1F,IAAIE,SAAS,GAAG,IAAI,CAACvL,SAAS,CAACoK,4BAA4B,CAACmB,SAAS,GAAG,IAAI,CAACvL,SAAS,CAACoK,4BAA4B,CAACmB,SAAS,GAAG,CAAC;MACjI,IAAIC,OAAO,GAAG,IAAI,CAACxL,SAAS,CAACoK,4BAA4B,CAACoB,OAAO,GAAG,IAAI,CAACxL,SAAS,CAACoK,4BAA4B,CAACoB,OAAO,GAAG,CAAC;MAC3H,IAAIC,WAAW,GAAG,IAAI,CAACzL,SAAS,CAACoK,4BAA4B,CAACqB,WAAW,GAAG,IAAI,CAACzL,SAAS,CAACoK,4BAA4B,CAACqB,WAAW,GAAG,SAAS;MAC/I,IAAIC,QAAQ,GAAG,EAAE;MACjB,IAAI2C,WAAW,GAAG,CAAC;MACnB,IAAIE,UAAU,GAAG,CAAC;MAClB,IAAIC,aAAa,GAAG,EAAE;MACtB,IAAIF,YAAY,GAAG,GAAG;MACtB,IAAI,CAACnP,iBAAiB,CAAC,IAAI,CAACa,SAAS,CAACoK,4BAA4B,CAACtF,MAAM,CAAC,IAAK,IAAI,CAAC9E,SAAS,CAACwQ,gBAAgB,KAAK,SAAU,EAAE;QAC3HhC,aAAa,GAAG,IAAI,CAACxO,SAAS,CAACoK,4BAA4B,CAACtF,MAAM;MACtE;MACA,IAAI,CAAC3F,iBAAiB,CAAC,IAAI,CAACa,SAAS,CAACoK,4BAA4B,CAACvF,KAAK,CAAC,IAAK,IAAI,CAAC7E,SAAS,CAACwQ,gBAAgB,KAAK,SAAU,EAAE;QAC1HlC,YAAY,GAAG,IAAI,CAACtO,SAAS,CAACoK,4BAA4B,CAACvF,KAAK;MACpE;MACAwJ,WAAW,GAAG,CAAEb,UAAU,CAACY,OAAO,CAAC1J,KAAK,CAACG,KAAK,CAAC,GAAG,CAAC,GAAKyJ,YAAY,GAAG,CAAE,IAAIJ,SAAS;MACtFK,UAAU,GAAG,CAAEf,UAAU,CAACY,OAAO,CAAC1J,KAAK,CAACI,MAAM,CAAC,GAAG,CAAC,GAAK0J,aAAa,GAAG,CAAE,IAAIN,SAAS;MACvF,IAAIkE,UAAU,GAAG,IAAI,CAACnS,aAAa,CAACkO,aAAa,CAAC,CAAC;MACnD,IAAI,CAAC,IAAI,CAACkE,aAAa,EAAE;QACrB,IAAI,CAACC,wBAAwB,CAAC,IAAI,CAAC;MACvC;MACA,IAAIC,UAAU,GAAG,IAAI,CAACF,aAAa;MACnCtH,KAAK,GAAG;QACJ;QACA3G,EAAE,EAAE,UAAU,GAAG,IAAI,CAACnE,aAAa,CAAC6L,cAAc;QAAEC,MAAM,EAAE;UACxD4C,IAAI,EAAEN,WAAW,GAAG+D,UAAU;UAAEvD,GAAG,EAAEN,UAAU,GAAG6D,UAAU;UAAE3D,CAAC,EAAEJ,WAAW,GAAG+D,UAAU;UACzF;UACA1D,CAAC,EAAEH,UAAU,GAAG6D,UAAU;UAAEvN,KAAK,EAAEyJ,YAAY;UAAExJ,MAAM,EAAE0J;QAC7D,CAAC;QAAEnD,SAAS,EAAEA,SAAS;QAAEmH,WAAW,EAAED,UAAU;QAAEvG,IAAI,EAAE,IAAI,CAAC/L,aAAa,CAACwS,eAAe,CAACjS,YAAY;QAAEyL,mBAAmB,EAAE,eAAe;QAC7IT,OAAO,EAAEA,OAAO;QAAEC,WAAW,EAAEA,WAAW;QAAEF,SAAS,EAAEA,SAAS;QAAEG,QAAQ,EAAEA,QAAQ;QAAEC,UAAU,EAAE,IAAI,CAAC+G,QAAQ;QAAExG,aAAa,EAAElB;MACpI,CAAC;MACD,IAAI,CAAC/K,aAAa,CAACkL,qBAAqB,GAAGJ,KAAK;MAChD;MACA,IAAIjB,QAAQ,GAAG,KAAK,CAAC;MACrB,IAAI1K,QAAQ,CAAC,CAAC,EAAE;QACZ0K,QAAQ,GAAG7F,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,oBAAoB,CAAC;MACxF,CAAC,MACI;QACD0F,QAAQ,GAAG7F,QAAQ,CAACC,cAAc,CAAC,WAAW,CAAC;MACnD;MACA,IAAI4F,QAAQ,IAAIA,QAAQ,CAACC,OAAO,EAAE;QAC9B,IAAI,CAACoC,sBAAsB,CAAC,CAAC;MACjC;MACA,IAAI,CAACkG,aAAa,GAAG,EAAE;MACvB,IAAI,CAACjG,kBAAkB,CAAC,CAAC;MACzB,IAAI,CAACnM,aAAa,CAACqG,oBAAoB,GAAG,KAAK;IACnD,CAAC,MACI;MACD,IAAIwD,QAAQ,GAAG7F,QAAQ,CAACC,cAAc,CAAC,UAAU,CAAC;MAClD,IAAIgF,YAAY,GAAGjF,QAAQ,CAACC,cAAc,CAAC,WAAW,CAAC;MACvD,IAAIiF,aAAa,GAAGlF,QAAQ,CAACC,cAAc,CAAC,WAAW,CAAC;MACxD,IAAIkH,gBAAgB,GAAG,KAAK;MAC5B,IAAI,CAACA,gBAAgB,EAAE;QACnB,IAAI,CAACuH,iBAAiB,CAAC7I,QAAQ,CAAC;QAChC,IAAI,CAACyC,mBAAmB,CAACpD,aAAa,CAAC;QACvC,IAAInF,MAAM,GAAGC,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,mBAAmB,CAAC;QACrF,IAAI,CAAC1C,cAAc,GAAGsC,MAAM,CAAC6G,SAAS,CAAC,CAAC;QACxC,IAAI,CAACyH,wBAAwB,CAAC,CAAC;QAC/B,IAAIpJ,YAAY,IAAIA,YAAY,CAACa,OAAO,EAAE;UACtC,IAAI,CAAC,IAAI,CAAC9J,aAAa,CAACsG,cAAc,EAAE;YACpC,IAAI,CAACvF,eAAe,GAAG,IAAI;YAC3B,IAAI,CAAC4B,oBAAoB,GAAG,IAAI,CAAClB,cAAc;YAC/C,IAAI,CAACF,uBAAuB,GAAG,IAAI,CAACW,SAAS;YAC7C,IAAI,CAACf,mBAAmB,GAAG,IAAI;UACnC,CAAC,MACI;YACD,IAAI,CAACH,aAAa,GAAG,IAAI;YACzB,IAAI,CAAC4B,kBAAkB,GAAG,IAAI,CAACnB,cAAc;YAC7C,IAAI,CAACD,qBAAqB,GAAG,IAAI,CAACU,SAAS;YAC3C,IAAI,CAACb,iBAAiB,GAAG,IAAI;UACjC;QACJ,CAAC,MACI;UACD,IAAI,CAAC,IAAI,CAACrB,aAAa,CAACsG,cAAc,EAAE;YACpC,IAAI,CAACvF,eAAe,GAAG,KAAK;YAC5B,IAAI,CAACQ,uBAAuB,GAAG,EAAE;YACjC,IAAI,CAACJ,mBAAmB,GAAG,KAAK;UACpC,CAAC,MACI;YACD,IAAI,CAACH,aAAa,GAAG,KAAK;YAC1B,IAAI,CAACQ,qBAAqB,GAAG,EAAE;YAC/B,IAAI,CAACH,iBAAiB,GAAG,KAAK;UAClC;QACJ;QACA,IAAI,CAAC,IAAI,CAACrB,aAAa,CAACsG,cAAc,EAAE;UACpC,IAAI,CAAC5E,mBAAmB,GAAG,IAAI,CAACD,cAAc;QAClD,CAAC,MACI;UACD,IAAI,CAACE,iBAAiB,GAAG,IAAI,CAACF,cAAc;QAChD;QACA,IAAI,CAAC1B,SAAS,CAAC4H,gBAAgB,CAAC4E,aAAa,CAAC,MAAM,EAAE,IAAI,CAACrK,SAAS,EAAE,IAAI,CAAClC,aAAa,CAACoF,aAAa,CAAC;QACvG+F,gBAAgB,GAAG,IAAI;QACvB,IAAI,CAACgB,kBAAkB,CAAC,CAAC;MAC7B;IACJ;EACJ,CAAC;EACDrM,SAAS,CAAC2F,SAAS,CAACyM,iBAAiB,GAAG,UAAUxO,IAAI,EAAE;IACpD,IAAI,IAAI,CAAC1D,aAAa,CAACqG,oBAAoB,EAAE;MACzC,IAAI4H,SAAS,GAAG,IAAI,CAACjO,aAAa,CAACkO,aAAa,CAAC,CAAC;MAClD;MACA,IAAIpD,KAAK,GAAG,IAAI;MAChB,IAAIC,cAAc,GAAG,IAAI,CAAChL,SAAS,CAACiL,UAAU,CAACC,UAAU,CAAC,CAAC;MAC3D,IAAI,CAACjL,aAAa,CAACkL,qBAAqB,GAAG,IAAI;MAC/C,IAAI,CAAClL,aAAa,CAACmL,gBAAgB,GAAG,IAAI;MAC1C,IAAIC,SAAS,GAAG,IAAI,CAACpL,aAAa,CAACqL,iBAAiB,GAAG,CAAC;MACxD,IAAI8C,OAAO,GAAGnK,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,WAAW,GAAGiH,SAAS,CAAC;MAC1F,IAAIE,SAAS,GAAG,IAAI,CAACvL,SAAS,CAACoK,4BAA4B,CAACmB,SAAS,GAAG,IAAI,CAACvL,SAAS,CAACoK,4BAA4B,CAACmB,SAAS,GAAG,CAAC;MACjI,IAAIC,OAAO,GAAG,IAAI,CAACxL,SAAS,CAACoK,4BAA4B,CAACoB,OAAO,GAAG,IAAI,CAACxL,SAAS,CAACoK,4BAA4B,CAACoB,OAAO,GAAG,CAAC;MAC3H,IAAIC,WAAW,GAAG,IAAI,CAACzL,SAAS,CAACoK,4BAA4B,CAACqB,WAAW,GAAG,IAAI,CAACzL,SAAS,CAACoK,4BAA4B,CAACqB,WAAW,GAAG,SAAS;MAC/I,IAAIC,QAAQ,GAAG,EAAE;MACjB,IAAI2C,WAAW,GAAG,CAAC;MACnB,IAAIE,UAAU,GAAG,CAAC;MAClB,IAAIqE,kBAAkB,GAAG,GAAG;MAC5B,IAAIpE,aAAa,GAAG,CAAC;MACrB,IAAIF,YAAY,GAAG,CAAC;MACpB;MACA,IAAI,CAACnP,iBAAiB,CAAC,IAAI,CAACa,SAAS,CAACoK,4BAA4B,CAACtF,MAAM,CAAC,IAAK,IAAI,CAAC9E,SAAS,CAACwQ,gBAAgB,KAAK,SAAU,EAAE;QAC3HhC,aAAa,GAAG,IAAI,CAACxO,SAAS,CAACoK,4BAA4B,CAACtF,MAAM;MACtE,CAAC,MACI,IAAI,IAAI,CAACG,oBAAoB,IAAI,IAAI,CAACE,mBAAmB,EAAE;QAC5DqJ,aAAa,GAAK,IAAI,CAACvJ,oBAAoB,GAAG,IAAI,CAACA,oBAAoB,GAAI2N,kBAAmB;MAClG,CAAC,MACI;QACDpE,aAAa,GAAK,IAAI,CAACvJ,oBAAoB,GAAG,IAAI,CAACE,mBAAmB,GAAIyN,kBAAmB;MACjG;MACA,IAAI,CAACzT,iBAAiB,CAAC,IAAI,CAACa,SAAS,CAACoK,4BAA4B,CAACvF,KAAK,CAAC,IAAK,IAAI,CAAC7E,SAAS,CAACwQ,gBAAgB,KAAK,SAAU,EAAE;QAC1HlC,YAAY,GAAG,IAAI,CAACtO,SAAS,CAACoK,4BAA4B,CAACvF,KAAK;MACpE,CAAC,MACI,IAAI,IAAI,CAACI,oBAAoB,IAAI,IAAI,CAACE,mBAAmB,EAAE;QAC5DmJ,YAAY,GAAK,IAAI,CAACnJ,mBAAmB,GAAG,IAAI,CAACF,oBAAoB,GAAI2N,kBAAmB;MAChG,CAAC,MACI;QACDtE,YAAY,GAAK,IAAI,CAACnJ,mBAAmB,GAAG,IAAI,CAACA,mBAAmB,GAAIyN,kBAAmB;MAC/F;MACAvE,WAAW,GAAG,CAAEb,UAAU,CAACY,OAAO,CAAC1J,KAAK,CAACG,KAAK,CAAC,GAAG,CAAC,GAAKyJ,YAAY,GAAG,CAAE,IAAIJ,SAAS;MACtFK,UAAU,GAAG,CAAEf,UAAU,CAACY,OAAO,CAAC1J,KAAK,CAACI,MAAM,CAAC,GAAG,CAAC,GAAK0J,aAAa,GAAG,CAAE,IAAIN,SAAS;MACvF,IAAIkE,UAAU,GAAG,IAAI,CAACnS,aAAa,CAACkO,aAAa,CAAC,CAAC;MACnD,IAAIoE,UAAU,GAAG,IAAI,CAACF,aAAa;MACnCtH,KAAK,GAAG;QACJ;QACA3G,EAAE,EAAE,UAAU,GAAG,IAAI,CAACnE,aAAa,CAAC6L,cAAc;QAAEC,MAAM,EAAE;UACxD4C,IAAI,EAAEN,WAAW,GAAG+D,UAAU;UAAEvD,GAAG,EAAEN,UAAU,GAAG6D,UAAU;UAAE3D,CAAC,EAAEJ,WAAW,GAAG+D,UAAU;UACzF;UACA1D,CAAC,EAAEH,UAAU,GAAG6D,UAAU;UAAEvN,KAAK,EAAEyJ,YAAY;UAAExJ,MAAM,EAAE0J;QAC7D,CAAC;QAAEnD,SAAS,EAAEA,SAAS;QAAEmH,WAAW,EAAED,UAAU;QAAEvG,IAAI,EAAE,IAAI,CAAC/L,aAAa,CAACwS,eAAe,CAACjS,YAAY;QAAEyL,mBAAmB,EAAE,gBAAgB;QAC9IT,OAAO,EAAEA,OAAO;QAAEC,WAAW,EAAEA,WAAW;QAAEF,SAAS,EAAEA,SAAS;QAAEG,QAAQ,EAAEA,QAAQ;QAAEC,UAAU,EAAE,IAAI,CAAC+G,QAAQ;QAAExG,aAAa,EAAElB;MACpI,CAAC;MACD,IAAI,CAAC/K,aAAa,CAACkL,qBAAqB,GAAGJ,KAAK;MAChD;MACA,IAAIjB,QAAQ,GAAG,KAAK,CAAC;MACrB,IAAI1K,QAAQ,CAAC,CAAC,EAAE;QACZ0K,QAAQ,GAAG7F,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,oBAAoB,CAAC;MACxF,CAAC,MACI;QACD0F,QAAQ,GAAG7F,QAAQ,CAACC,cAAc,CAAC,WAAW,CAAC;MACnD;MACA,IAAI4F,QAAQ,IAAIA,QAAQ,CAACC,OAAO,EAAE;QAC9B,IAAI,CAACoC,sBAAsB,CAAC,CAAC;MACjC;MACA,IAAI,CAACC,kBAAkB,CAAC,CAAC;MACzB,IAAI,CAACnM,aAAa,CAACqG,oBAAoB,GAAG,KAAK;IACnD,CAAC,MACI;MACD,IAAIwD,QAAQ,GAAG7F,QAAQ,CAACC,cAAc,CAAC,UAAU,CAAC;MAClD,IAAIgF,YAAY,GAAGjF,QAAQ,CAACC,cAAc,CAAC,WAAW,CAAC;MACvD,IAAIiF,aAAa,GAAGlF,QAAQ,CAACC,cAAc,CAAC,WAAW,CAAC;MACxD,IAAIkH,gBAAgB,GAAG,KAAK;MAC5B,IAAI,CAACA,gBAAgB,EAAE;QACnB,IAAI,CAACuH,iBAAiB,CAAC7I,QAAQ,CAAC;QAChC,IAAI,CAACwC,iBAAiB,CAACpD,YAAY,CAAC;QACpC,IAAIlF,MAAM,GAAGC,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,mBAAmB,CAAC;QACrF,IAAI,CAACvC,gBAAgB,GAAGmC,MAAM,CAAC6G,SAAS,CAAC,CAAC;QAC1C,IAAI1B,aAAa,IAAIA,aAAa,CAACY,OAAO,EAAE;UACxC,IAAI,CAAC,IAAI,CAAC9J,aAAa,CAACsG,cAAc,EAAE;YACpC,IAAI,CAACvF,eAAe,GAAG,IAAI;YAC3B,IAAI,CAAC4B,oBAAoB,GAAG,IAAI,CAACf,gBAAgB;YACjD,IAAI,CAACC,yBAAyB,GAAG,IAAI,CAACtB,YAAY;YAClD,IAAI,CAACa,oBAAoB,GAAG,IAAI;UACpC,CAAC,MACI;YACD,IAAI,CAACJ,aAAa,GAAG,IAAI;YACzB,IAAI,CAAC4B,kBAAkB,GAAG,IAAI,CAAChB,gBAAgB;YAC/C,IAAI,CAACE,uBAAuB,GAAG,IAAI,CAACvB,YAAY;YAChD,IAAI,CAACe,kBAAkB,GAAG,IAAI;UAClC;QACJ,CAAC,MACI;UACD,IAAI,CAAC,IAAI,CAACtB,aAAa,CAACsG,cAAc,EAAE;YACpC,IAAI,CAACvF,eAAe,GAAG,KAAK;YAC5B,IAAI,CAACc,yBAAyB,GAAG,EAAE;YACnC,IAAI,CAACT,oBAAoB,GAAG,KAAK;UACrC,CAAC,MACI;YACD,IAAI,CAACJ,aAAa,GAAG,KAAK;YAC1B,IAAI,CAACc,uBAAuB,GAAG,EAAE;YACjC,IAAI,CAACR,kBAAkB,GAAG,KAAK;UACnC;QACJ;QACA,IAAI,CAAC,IAAI,CAACtB,aAAa,CAACsG,cAAc,EAAE;UACpC,IAAI,CAACvE,qBAAqB,GAAG,IAAI,CAACH,gBAAgB;QACtD,CAAC,MACI;UACD,IAAI,CAACI,mBAAmB,GAAG,IAAI,CAACJ,gBAAgB;QACpD;QACA,IAAI,CAAC7B,SAAS,CAAC4H,gBAAgB,CAAC4E,aAAa,CAAC,OAAO,EAAE,EAAE,EAAE,IAAI,CAACvM,aAAa,CAACoF,aAAa,CAAC;QAC5F+F,gBAAgB,GAAG,IAAI;QACvB,IAAI,CAACgB,kBAAkB,CAAC,CAAC;MAC7B;IACJ;EACJ,CAAC;EACDrM,SAAS,CAAC2F,SAAS,CAACiN,iBAAiB,GAAG,UAAU7I,QAAQ,EAAE;IACxD,IAAIA,QAAQ,EAAE;MACV,IAAIA,QAAQ,CAACC,OAAO,EAAE;QAClB,IAAI,IAAI,CAACtJ,gBAAgB,KAAK,EAAE,EAAE;UAC9B,IAAIuD,MAAM,GAAGC,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,mBAAmB,CAAC;UACrF,IAAI,CAAC1B,eAAe,GAAGsB,MAAM,CAAC6G,SAAS,CAAC,CAAC;UACzC,IAAI,CAAC,IAAI,CAAC5K,aAAa,CAACsG,cAAc,EAAE;YACpC,IAAI,CAAC/D,mBAAmB,GAAG,IAAI,CAAC/B,gBAAgB;YAChD,IAAI,CAAC2B,mBAAmB,GAAG,IAAI,CAACM,eAAe;UACnD,CAAC,MACI;YACD,IAAI,CAACD,iBAAiB,GAAG,IAAI,CAAChC,gBAAgB;YAC9C,IAAI,CAAC4B,iBAAiB,GAAG,IAAI,CAACK,eAAe;UACjD;UACA,IAAI,CAAC2J,kBAAkB,CAAC,IAAI,CAACpM,aAAa,CAACsG,cAAc,EAAE,IAAI,CAAC;QACpE;MACJ,CAAC,MACI;QACD,IAAI,CAAC,IAAI,CAACtG,aAAa,CAACsG,cAAc,EAAE;UACpC,IAAI,CAAC/D,mBAAmB,GAAG,EAAE;QACjC,CAAC,MACI;UACD,IAAI,CAACC,iBAAiB,GAAG,EAAE;QAC/B;QACA,IAAI,CAAC4J,kBAAkB,CAAC,IAAI,CAACpM,aAAa,CAACsG,cAAc,EAAE,KAAK,CAAC;MACrE;IACJ;EACJ,CAAC;EACDxG,SAAS,CAAC2F,SAAS,CAAC4G,iBAAiB,GAAG,UAAUpD,YAAY,EAAE;IAC5D,IAAIA,YAAY,EAAE;MACd,IAAIA,YAAY,CAACa,OAAO,EAAE;QACtB,IAAI,CAACuI,wBAAwB,CAAC,CAAC;QAC/B,IAAI,IAAI,CAACnQ,SAAS,KAAK,EAAE,EAAE;UACvB,IAAI,CAAC,IAAI,CAAClC,aAAa,CAACsG,cAAc,EAAE;YACpC,IAAI,CAACnF,mBAAmB,GAAG,IAAI;YAC/B,IAAI,CAACI,uBAAuB,GAAG,IAAI,CAACW,SAAS;UACjD,CAAC,MACI;YACD,IAAI,CAACb,iBAAiB,GAAG,IAAI;YAC7B,IAAI,CAACG,qBAAqB,GAAG,IAAI,CAACU,SAAS;UAC/C;QACJ;MACJ,CAAC,MACI;QACD,IAAI,CAAC,IAAI,CAAClC,aAAa,CAACsG,cAAc,EAAE;UACpC,IAAI,CAAC/E,uBAAuB,GAAG,EAAE;UACjC,IAAI,CAACJ,mBAAmB,GAAG,KAAK;QACpC,CAAC,MACI;UACD,IAAI,CAACK,qBAAqB,GAAG,EAAE;UAC/B,IAAI,CAACH,iBAAiB,GAAG,KAAK;QAClC;MACJ;IACJ;EACJ,CAAC;EACDvB,SAAS,CAAC2F,SAAS,CAAC6G,mBAAmB,GAAG,UAAUpD,aAAa,EAAE;IAC/D,IAAIA,aAAa,EAAE;MACf,IAAIA,aAAa,CAACY,OAAO,EAAE;QACvB,IAAI8I,WAAW,GAAG5O,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,yBAAyB,CAAC;QAChG,IAAI0O,YAAY,GAAGD,WAAW,CAAChI,SAAS,CAAC,CAAC;QAC1C,IAAIkI,WAAW,GAAG9O,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,qBAAqB,CAAC,CAACM,KAAK,CAACC,UAAU,KAAK,QAAQ,GAAGmO,YAAY,GAAG,EAAE;QAC9I,IAAIC,WAAW,KAAK,EAAE,EAAE;UACpB,IAAI,CAAC,IAAI,CAAC9S,aAAa,CAACsG,cAAc,EAAE;YACpC,IAAI,CAAClF,oBAAoB,GAAG,IAAI;YAChC,IAAI,CAACS,yBAAyB,GAAGiR,WAAW;UAChD,CAAC,MACI;YACD,IAAI,CAACxR,kBAAkB,GAAG,IAAI;YAC9B,IAAI,CAACQ,uBAAuB,GAAGgR,WAAW;UAC9C;QACJ;MACJ,CAAC,MACI;QACD,IAAI,CAAC,IAAI,CAAC9S,aAAa,CAACsG,cAAc,EAAE;UACpC,IAAI,CAACzE,yBAAyB,GAAG,EAAE;UACnC,IAAI,CAACT,oBAAoB,GAAG,KAAK;QACrC,CAAC,MACI;UACD,IAAI,CAACU,uBAAuB,GAAG,EAAE;UACjC,IAAI,CAACR,kBAAkB,GAAG,KAAK;QACnC;MACJ;IACJ;EACJ,CAAC;EACDxB,SAAS,CAAC2F,SAAS,CAAC4M,wBAAwB,GAAG,UAAUU,MAAM,EAAE;IAC7D;IACA,IAAIC,YAAY,GAAGhP,QAAQ,CAACiP,gBAAgB,CAAC,iBAAiB,CAAC;IAC/D,IAAID,YAAY,EAAE;MACd,KAAK,IAAIE,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,YAAY,CAAC3F,MAAM,EAAE6F,CAAC,EAAE,EAAE;QAC1C,IAAIF,YAAY,CAAC9B,QAAQ,CAACgC,CAAC,CAAC1F,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,IAAIwF,YAAY,CAAC9B,QAAQ,CAACgC,CAAC,CAAC1F,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC/I,KAAK,CAAC0O,WAAW,KAAK,KAAK,EAAE;UAClH,IAAI,IAAI,CAACnT,aAAa,CAACqG,oBAAoB,EAAE;YACzC,IAAI0M,MAAM,EAAE;cACR,IAAI,CAACX,aAAa,GAAGY,YAAY,CAAC9B,QAAQ,CAACgC,CAAC,CAAC1F,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC4F,WAAW;cACzE,IAAI,CAAC7S,YAAY,GAAGyS,YAAY,CAAC9B,QAAQ,CAACgC,CAAC,CAAC1F,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC4F,WAAW;YAC5E,CAAC,MACI;cACD,IAAI,CAAC7S,YAAY,GAAGyS,YAAY,CAAC9B,QAAQ,CAACgC,CAAC,CAAC1F,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC4F,WAAW;YAC5E;UACJ,CAAC,MACI;YACD,IAAIL,MAAM,EAAE;cACR,IAAI,CAACX,aAAa,GAAGY,YAAY,CAAC9B,QAAQ,CAACgC,CAAC,CAAC1F,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC4F,WAAW;cACzE,IAAI,CAAClR,SAAS,GAAG8Q,YAAY,CAAC9B,QAAQ,CAACgC,CAAC,CAAC1F,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC4F,WAAW;YACzE,CAAC,MACI;cACD,IAAI,CAAClR,SAAS,GAAG8Q,YAAY,CAAC9B,QAAQ,CAACgC,CAAC,CAAC1F,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC4F,WAAW;YACzE;UACJ;UACA,IAAI;YACA,IAAI,CAACX,QAAQ,GAAGf,IAAI,CAACC,KAAK,CAACqB,YAAY,CAAC9B,QAAQ,CAACgC,CAAC,CAAC1F,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC/I,KAAK,CAACiH,UAAU,CAAC;UACzF,CAAC,CACD,OAAO3I,CAAC,EAAE;YACN,IAAI,CAAC0P,QAAQ,GAAGO,YAAY,CAAC9B,QAAQ,CAACgC,CAAC,CAAC1F,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC/I,KAAK,CAACiH,UAAU;UAC7E;QACJ;MACJ;IACJ;EACJ,CAAC;EACD;AACJ;AACA;AACA;EACI5L,SAAS,CAAC2F,SAAS,CAAC0G,kBAAkB,GAAG,YAAY;IACjD,IAAI,IAAI,CAAC1F,eAAe,EAAE;MACtB,IAAI,CAACA,eAAe,CAAC4M,IAAI,CAAC,CAAC;IAC/B;EACJ,CAAC;EACDvT,SAAS,CAAC2F,SAAS,CAAC6N,2BAA2B,GAAG,YAAY;IAC1D,IAAInU,QAAQ,CAAC,CAAC,EAAE;MACZ,KAAK,IAAI4R,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,CAAC,EAAEA,CAAC,EAAE,EAAE;QACxB;QACA,IAAIwC,WAAW,GAAGvP,QAAQ,CAACmF,aAAa,CAAC,GAAG,GAAG,IAAI,CAACpJ,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,iBAAiB,GAAG4M,CAAC,CAAC;QACjG,IAAIwC,WAAW,EAAE;UACbA,WAAW,CAACnK,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAACoK,oBAAoB,CAACrL,IAAI,CAAC,IAAI,CAAC,CAAC;QAC/E;MACJ;IACJ;EACJ,CAAC;EACDrI,SAAS,CAAC2F,SAAS,CAACgO,2BAA2B,GAAG,YAAY;IAC1D;IACA,IAAI1P,MAAM,GAAGC,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,mBAAmB,CAAC;IACrF,IAAIJ,MAAM,EAAE;MACRA,MAAM,CAACqF,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAACC,uBAAuB,CAAClB,IAAI,CAAC,IAAI,CAAC,CAAC;MAC7EpE,MAAM,CAACqF,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAACE,uBAAuB,CAACnB,IAAI,CAAC,IAAI,CAAC,CAAC;MAC7EpE,MAAM,CAACqF,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAACG,qBAAqB,CAACpB,IAAI,CAAC,IAAI,CAAC,CAAC;MACzEpE,MAAM,CAACqF,gBAAgB,CAAC,YAAY,EAAE,IAAI,CAACG,qBAAqB,CAACpB,IAAI,CAAC,IAAI,CAAC,CAAC;MAC5EpE,MAAM,CAACqF,gBAAgB,CAAC,YAAY,EAAE,IAAI,CAACC,uBAAuB,CAAClB,IAAI,CAAC,IAAI,CAAC,CAAC;MAC9EpE,MAAM,CAACqF,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAACE,uBAAuB,CAACnB,IAAI,CAAC,IAAI,CAAC,CAAC;MAC7EpE,MAAM,CAACqF,gBAAgB,CAAC,UAAU,EAAE,IAAI,CAACG,qBAAqB,CAACpB,IAAI,CAAC,IAAI,CAAC,CAAC;IAC9E;EACJ,CAAC;EACD;EACArI,SAAS,CAAC2F,SAAS,CAAC+N,oBAAoB,GAAG,UAAUE,KAAK,EAAE;IACxD,IAAIC,WAAW,GAAGD,KAAK,CAACnQ,MAAM;IAC9B,IAAIoQ,WAAW,EAAE;MACb,KAAK,IAAI5C,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,CAAC,EAAEA,CAAC,EAAE,EAAE;QACxB;QACA,IAAIwC,WAAW,GAAGvP,QAAQ,CAACmF,aAAa,CAAC,GAAG,GAAG,IAAI,CAACpJ,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,iBAAiB,GAAG4M,CAAC,CAAC;QACjG,IAAIwC,WAAW,EAAE;UACbA,WAAW,CAAC9O,KAAK,CAAC0O,WAAW,GAAG,EAAE;QACtC;MACJ;MACAQ,WAAW,CAAClP,KAAK,CAAC0O,WAAW,GAAG,KAAK;MACrC,IAAI,CAAC5S,YAAY,GAAGoT,WAAW,CAACP,WAAW;MAC3C,IAAI;QACA,IAAI,CAACX,QAAQ,GAAGf,IAAI,CAACC,KAAK,CAACgC,WAAW,CAAClP,KAAK,CAACiH,UAAU,CAAC;MAC5D,CAAC,CACD,OAAO3I,CAAC,EAAE;QACN,IAAI,CAAC0P,QAAQ,GAAGkB,WAAW,CAAClP,KAAK,CAACiH,UAAU;MAChD;MACA,IAAI,CAAC5G,kBAAkB,CAAC,KAAK,CAAC;IAClC;EACJ,CAAC;EACD;EACAhF,SAAS,CAAC2F,SAAS,CAACU,qBAAqB,GAAG,YAAY;IACpD;IACA,IAAIyN,aAAa,GAAG5P,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,mBAAmB,CAAC;IAC5F;IACA,IAAI0P,KAAK,GAAG7P,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,sBAAsB,CAAC;IACvF,IAAIyP,aAAa,EAAE;MACfA,aAAa,CAACvC,MAAM,CAAC,CAAC;IAC1B;IACA,IAAIwC,KAAK,EAAE;MACPA,KAAK,CAACxC,MAAM,CAAC,CAAC;IAClB;IACA;IACA,IAAIyC,aAAa,GAAG7U,aAAa,CAAC,KAAK,EAAE;MAAEkF,EAAE,EAAE,IAAI,CAACpE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,sBAAsB;MAAE2B,SAAS,EAAE,0BAA0B;MAAEiO,MAAM,EAAE;IAAkB,CAAC,CAAC;IACtK;IACA,IAAIhQ,MAAM,GAAG9E,aAAa,CAAC,QAAQ,EAAE;MAAEkF,EAAE,EAAE,IAAI,CAACpE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,mBAAmB;MAAE2B,SAAS,EAAE;IAAwB,CAAC,CAAC;IACjI,IAAI,IAAI,CAAC/F,SAAS,CAACmE,OAAO,CAACsE,WAAW,GAAG,GAAG,EAAE;MAC1CzE,MAAM,CAACa,KAAK,GAAG,GAAG;IACtB,CAAC,MACI;MACDb,MAAM,CAACa,KAAK,GAAG,IAAI,CAAC7E,SAAS,CAACmE,OAAO,CAACsE,WAAW,GAAG,EAAE;IAC1D;IACAzE,MAAM,CAAC4M,SAAS,CAACC,GAAG,CAAC,uBAAuB,CAAC;IAC7C7M,MAAM,CAACc,MAAM,GAAG,GAAG;IACnBd,MAAM,CAACU,KAAK,CAACI,MAAM,GAAG,OAAO;IAC7Bd,MAAM,CAACU,KAAK,CAACuP,MAAM,GAAG,oBAAoB;IAC1CjQ,MAAM,CAACU,KAAK,CAACwP,eAAe,GAAG,OAAO;IACtClQ,MAAM,CAACU,KAAK,CAACyP,SAAS,GAAG,YAAY;IACrCnQ,MAAM,CAACU,KAAK,CAAC0P,YAAY,GAAG,KAAK;IACjCpQ,MAAM,CAACqF,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAACC,uBAAuB,CAAClB,IAAI,CAAC,IAAI,CAAC,CAAC;IAC7EpE,MAAM,CAACqF,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAACE,uBAAuB,CAACnB,IAAI,CAAC,IAAI,CAAC,CAAC;IAC7EpE,MAAM,CAACqF,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAACG,qBAAqB,CAACpB,IAAI,CAAC,IAAI,CAAC,CAAC;IACzEpE,MAAM,CAACqF,gBAAgB,CAAC,YAAY,EAAE,IAAI,CAACgL,wBAAwB,CAACjM,IAAI,CAAC,IAAI,CAAC,CAAC;IAC/EpE,MAAM,CAACqF,gBAAgB,CAAC,YAAY,EAAE,IAAI,CAACC,uBAAuB,CAAClB,IAAI,CAAC,IAAI,CAAC,CAAC;IAC9EpE,MAAM,CAACqF,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAACE,uBAAuB,CAACnB,IAAI,CAAC,IAAI,CAAC,CAAC;IAC7EpE,MAAM,CAACqF,gBAAgB,CAAC,UAAU,EAAE,IAAI,CAACG,qBAAqB,CAACpB,IAAI,CAAC,IAAI,CAAC,CAAC;IAC1E2L,aAAa,CAAC7N,WAAW,CAAClC,MAAM,CAAC;IACjC;IACA,IAAIsQ,WAAW;IACf;IACA,IAAIC,KAAK;IACT,IAAIC,mBAAmB;IACvB,IAAI,IAAI,CAACvU,aAAa,CAACqG,oBAAoB,IAAI,CAAC,IAAI,CAACrG,aAAa,CAACsG,cAAc,EAAE;MAC/EiO,mBAAmB,GAAG,IAAI,CAACxU,SAAS,CAACwG,SAAS,CAACC,WAAW,CAAC,gBAAgB,CAAC;IAChF,CAAC,MACI;MACD+N,mBAAmB,GAAG,IAAI,CAACvU,aAAa,CAACsG,cAAc,GAAG,IAAI,CAACvG,SAAS,CAACwG,SAAS,CAACC,WAAW,CAAC,cAAc,CAAC,GAAG,IAAI,CAACzG,SAAS,CAACwG,SAAS,CAACC,WAAW,CAAC,gBAAgB,CAAC;IAC3K;IACA,IAAI,CAAC,IAAI,CAACzG,SAAS,CAACsK,iBAAiB,EAAE;MACnC;MACAiK,KAAK,GAAGtQ,QAAQ,CAAC/E,aAAa,CAAC,OAAO,CAAC;MACvCqV,KAAK,CAAC5Q,IAAI,GAAG,UAAU;MACvB4Q,KAAK,CAACnQ,EAAE,GAAG,UAAU;MACrB2P,aAAa,CAAC7N,WAAW,CAACqO,KAAK,CAAC;MAChCD,WAAW,GAAG,IAAI3U,QAAQ,CAAC;QAAEoJ,KAAK,EAAEyL,mBAAmB;QAAEtM,QAAQ,EAAE,KAAK;QAAE6B,OAAO,EAAE;MAAM,CAAC,CAAC;MAC3FuK,WAAW,CAAC9L,QAAQ,CAAC+L,KAAK,CAAC;IAC/B;IACA,IAAI,CAAC,IAAI,CAACtU,aAAa,CAACsG,cAAc,EAAE;MACpC,IAAI,CAACvF,eAAe,GAAG,IAAI,CAAC2J,qBAAqB,CAAC,CAAC;IACvD,CAAC,MACI;MACD,IAAI,CAAC1J,aAAa,GAAG,IAAI,CAAC0J,qBAAqB,CAAC,CAAC;IACrD;IACA,IAAI,IAAI,CAAC3J,eAAe,IAAI,CAAC,IAAI,CAACf,aAAa,CAACsG,cAAc,EAAE;MAC5D+N,WAAW,CAACvK,OAAO,GAAG,IAAI;IAC9B,CAAC,MACI,IAAI,IAAI,CAAC9I,aAAa,IAAI,IAAI,CAAChB,aAAa,CAACsG,cAAc,EAAE;MAC9D+N,WAAW,CAACvK,OAAO,GAAG,IAAI;IAC9B;IACA;IACA;IACA,IAAI0K,OAAO,GAAGvV,aAAa,CAAC,KAAK,EAAE;MAAEkF,EAAE,EAAE,IAAI,CAACpE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,iBAAiB;MAAE2B,SAAS,EAAE,0BAA0B;MAAEiO,MAAM,EAAE;IAAiB,CAAC,CAAC;IAC1J;IACA,IAAIU,SAAS,GAAGzQ,QAAQ,CAAC/E,aAAa,CAAC,OAAO,CAAC;IAC/C,IAAI,CAAC,IAAI,CAACe,aAAa,CAACsG,cAAc,IAAI,IAAI,CAACnF,mBAAmB,IAAI,CAAC,IAAI,CAACnB,aAAa,CAACqG,oBAAoB,EAAE;MAC5GoO,SAAS,CAACjP,KAAK,GAAG,IAAI,CAACwE,sBAAsB,CAAC,CAAC;IACnD,CAAC,MACI,IAAI,IAAI,CAAChK,aAAa,CAACsG,cAAc,IAAI,IAAI,CAACjF,iBAAiB,IAAI,CAAC,IAAI,CAACrB,aAAa,CAACqG,oBAAoB,EAAE;MAC9GoO,SAAS,CAACjP,KAAK,GAAG,IAAI,CAACwE,sBAAsB,CAAC,CAAC;IACnD;IACAyK,SAAS,CAAC/Q,IAAI,GAAG,MAAM;IACvB+Q,SAAS,CAACtQ,EAAE,GAAG,IAAI,CAACpE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,oBAAoB;IAC/DqQ,OAAO,CAACvO,WAAW,CAACwO,SAAS,CAAC;IAC9B;IACA,IAAIC,QAAQ,GAAG,IAAIlV,OAAO,CAAC;MACvBmV,WAAW,EAAE,IAAI,CAAC5U,SAAS,CAACwG,SAAS,CAACC,WAAW,CAAC,yBAAyB,CAAC;MAC5EoO,cAAc,EAAE;IACpB,CAAC,CAAC;IACFF,QAAQ,CAACnM,QAAQ,CAACkM,SAAS,CAAC;IAC5B;IACA,IAAII,OAAO,GAAG5V,aAAa,CAAC,KAAK,EAAE;MAAEkF,EAAE,EAAE,IAAI,CAACpE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,kBAAkB;MAAE2B,SAAS,EAAE;IAA6B,CAAC,CAAC;IACnI+O,OAAO,CAAClE,SAAS,CAACC,GAAG,CAAC,uBAAuB,CAAC;IAC9CiE,OAAO,CAACpQ,KAAK,CAACI,MAAM,GAAG,OAAO;IAC9BgQ,OAAO,CAACpQ,KAAK,CAACuP,MAAM,GAAG,oBAAoB;IAC3Ca,OAAO,CAACpQ,KAAK,CAACyP,SAAS,GAAG,YAAY;IACtCW,OAAO,CAACpQ,KAAK,CAAC0P,YAAY,GAAG,KAAK;IAClCU,OAAO,CAACpQ,KAAK,CAACwP,eAAe,GAAG,OAAO;IACvCY,OAAO,CAACpQ,KAAK,CAACqQ,KAAK,GAAG,OAAO;IAC7BD,OAAO,CAACpQ,KAAK,CAACsQ,SAAS,GAAG,KAAK;IAC/BF,OAAO,CAACpQ,KAAK,CAACuQ,YAAY,GAAG,KAAK;IAClCR,OAAO,CAACvO,WAAW,CAAC4O,OAAO,CAAC;IAC5BP,KAAK,GAAGtQ,QAAQ,CAAC/E,aAAa,CAAC,OAAO,CAAC;IACvCqV,KAAK,CAAC5Q,IAAI,GAAG,UAAU;IACvB4Q,KAAK,CAACnQ,EAAE,GAAG,WAAW;IACtBqQ,OAAO,CAACvO,WAAW,CAACqO,KAAK,CAAC;IAC1BD,WAAW,GAAG,IAAI3U,QAAQ,CAAC;MAAEoJ,KAAK,EAAEyL,mBAAmB;MAAEtM,QAAQ,EAAE,KAAK;MAAE6B,OAAO,EAAE;IAAM,CAAC,CAAC;IAC3FuK,WAAW,CAAC9L,QAAQ,CAAC+L,KAAK,CAAC;IAC3B,IAAI,IAAI,CAACnT,mBAAmB,IAAI,CAAC,IAAI,CAACnB,aAAa,CAACsG,cAAc,IAAI,CAAC,IAAI,CAACtG,aAAa,CAACqG,oBAAoB,EAAE;MAC5GgO,WAAW,CAACvK,OAAO,GAAG,IAAI;IAC9B,CAAC,MACI,IAAI,IAAI,CAACzI,iBAAiB,IAAI,IAAI,CAACrB,aAAa,CAACsG,cAAc,IAAI,CAAC,IAAI,CAACtG,aAAa,CAACqG,oBAAoB,EAAE;MAC9GgO,WAAW,CAACvK,OAAO,GAAG,IAAI;IAC9B;IACA4K,QAAQ,CAACtL,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC6L,mBAAmB,CAAC9M,IAAI,CAAC,IAAI,CAAC,CAAC;IACvE,IAAI,CAACrD,kBAAkB,CAAC,IAAI,CAAC;IAC7B;IACA,IAAIoQ,GAAG,GAAGjW,aAAa,CAAC,KAAK,EAAE;MAAEkF,EAAE,EAAE,IAAI,CAACpE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG;IAAgB,CAAC,CAAC;IACnF,IAAIgR,SAAS,GAAGlW,aAAa,CAAC,KAAK,EAAE;MAAEkF,EAAE,EAAE,IAAI,CAACpE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,mBAAmB;MAAE2B,SAAS,EAAE,0BAA0B;MAAEiO,MAAM,EAAE;IAAmB,CAAC,CAAC;IAChK;IACA,IAAIqB,MAAM,GAAGpR,QAAQ,CAAC/E,aAAa,CAAC,KAAK,CAAC;IAC1CmW,MAAM,CAACjR,EAAE,GAAG,IAAI,CAACpE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,qBAAqB;IAC7DgR,SAAS,CAAClP,WAAW,CAACmP,MAAM,CAAC;IAC7B;IACA,IAAIC,YAAY,GAAG,IAAIzV,MAAM,CAAC;MAAEmH,QAAQ,EAAE,kBAAkB;MAAEL,OAAO,EAAE,IAAI,CAAC3G,SAAS,CAACwG,SAAS,CAACC,WAAW,CAAC,wBAAwB;IAAE,CAAC,CAAC;IACxI6O,YAAY,CAAC9M,QAAQ,CAAC6M,MAAM,CAAC;IAC7BC,YAAY,CAACnR,OAAO,CAACO,KAAK,CAAC6Q,QAAQ,GAAG,UAAU;IAChD;IACA,IAAIC,YAAY,GAAGtW,aAAa,CAAC,QAAQ,EAAE;MAAEkF,EAAE,EAAE,IAAI,CAACpE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,yBAAyB;MAAE2B,SAAS,EAAE;IAA8B,CAAC,CAAC;IACnJ,IAAI,IAAI,CAAC/F,SAAS,CAACmE,OAAO,CAACsE,WAAW,GAAG,GAAG,EAAE;MAC1C+M,YAAY,CAAC3Q,KAAK,GAAG,GAAG;IAC5B,CAAC,MACI;MACD2Q,YAAY,CAAC3Q,KAAK,GAAG,IAAI,CAAC7E,SAAS,CAACmE,OAAO,CAACsE,WAAW,GAAG,EAAE;IAChE;IACA+M,YAAY,CAAC5E,SAAS,CAACC,GAAG,CAAC,uBAAuB,CAAC;IACnD2E,YAAY,CAAC1Q,MAAM,GAAG,GAAG;IACzB0Q,YAAY,CAAC9Q,KAAK,CAACI,MAAM,GAAG,OAAO;IACnCwQ,YAAY,CAACnR,OAAO,CAACO,KAAK,CAACiK,IAAI,GAAK6G,YAAY,CAAC3Q,KAAK,GAAG,CAAC,GAAI,EAAE,GAAI,IAAI;IACxEyQ,YAAY,CAACnR,OAAO,CAACO,KAAK,CAACmK,GAAG,GAAKrB,UAAU,CAACgI,YAAY,CAAC9Q,KAAK,CAACI,MAAM,CAAC,GAAG,CAAC,GAAI,EAAE,GAAI,IAAI;IAC1F0Q,YAAY,CAAC9Q,KAAK,CAACuP,MAAM,GAAG,oBAAoB;IAChDuB,YAAY,CAAC9Q,KAAK,CAACwP,eAAe,GAAG,OAAO;IAC5CsB,YAAY,CAAC9Q,KAAK,CAACyP,SAAS,GAAG,YAAY;IAC3CqB,YAAY,CAAC9Q,KAAK,CAAC0P,YAAY,GAAG,KAAK;IACvCoB,YAAY,CAAC9Q,KAAK,CAAC+Q,MAAM,GAAG,GAAG;IAC/B,IAAIC,iBAAiB,GAAG,EAAE;IAC1B,IAAI,CAAC,IAAI,CAACzV,aAAa,CAACsG,cAAc,IAAI,IAAI,CAAClF,oBAAoB,IAAI,CAAC,IAAI,CAACpB,aAAa,CAACqG,oBAAoB,EAAE;MAC7GoP,iBAAiB,GAAG,IAAI,CAACvL,uBAAuB,CAAC,CAAC;IACtD,CAAC,MACI,IAAI,IAAI,CAAClK,aAAa,CAACsG,cAAc,IAAI,IAAI,CAAChF,kBAAkB,IAAI,CAAC,IAAI,CAACtB,aAAa,CAACqG,oBAAoB,EAAE;MAC/GoP,iBAAiB,GAAG,IAAI,CAACvL,uBAAuB,CAAC,CAAC;IACtD;IACA,IAAIuL,iBAAiB,KAAK,EAAE,IAAI,CAAC,IAAI,CAACzV,aAAa,CAACqG,oBAAoB,EAAE;MACtE,IAAI,CAACpE,iBAAiB,GAAG,KAAK;MAC9B,IAAIyT,KAAK,GAAGH,YAAY,CAAClR,UAAU,CAAC,IAAI,CAAC;MACzC,IAAIsR,OAAO,GAAG,IAAIpR,KAAK,CAAC,CAAC;MACzBoR,OAAO,CAAC5Q,GAAG,GAAG0Q,iBAAiB;MAC/BE,OAAO,CAAC7R,MAAM,GAAG,YAAY;QACzB4R,KAAK,CAAC/Q,SAAS,CAACgR,OAAO,EAAE,CAAC,EAAE,CAAC,EAAEJ,YAAY,CAAC3Q,KAAK,EAAE2Q,YAAY,CAAC1Q,MAAM,CAAC;MAC3E,CAAC;MACDwQ,YAAY,CAACnR,OAAO,CAACO,KAAK,CAACsB,OAAO,GAAG,QAAQ;IACjD;IACAoP,SAAS,CAAClP,WAAW,CAACsP,YAAY,CAAC;IACnCjB,KAAK,GAAGtQ,QAAQ,CAAC/E,aAAa,CAAC,OAAO,CAAC;IACvCqV,KAAK,CAAC5Q,IAAI,GAAG,UAAU;IACvB4Q,KAAK,CAACnQ,EAAE,GAAG,WAAW;IACtBgR,SAAS,CAAClP,WAAW,CAACqO,KAAK,CAAC;IAC5BD,WAAW,GAAG,IAAI3U,QAAQ,CAAC;MAAEoJ,KAAK,EAAEyL,mBAAmB;MAAEtM,QAAQ,EAAE,KAAK;MAAE6B,OAAO,EAAE;IAAM,CAAC,CAAC;IAC3FuK,WAAW,CAAC9L,QAAQ,CAAC+L,KAAK,CAAC;IAC3B,IAAI,IAAI,CAAClT,oBAAoB,IAAI,CAAC,IAAI,CAACpB,aAAa,CAACsG,cAAc,IAAI,CAAC,IAAI,CAACtG,aAAa,CAACqG,oBAAoB,EAAE;MAC7GgO,WAAW,CAACvK,OAAO,GAAG,IAAI;IAC9B,CAAC,MACI,IAAI,IAAI,CAACxI,kBAAkB,IAAI,IAAI,CAACtB,aAAa,CAACsG,cAAc,IAAI,CAAC,IAAI,CAACtG,aAAa,CAACqG,oBAAoB,EAAE;MAC/GgO,WAAW,CAACvK,OAAO,GAAG,IAAI;IAC9B;IACAsL,MAAM,CAAChM,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAACwM,oBAAoB,CAACzN,IAAI,CAAC,IAAI,CAAC,CAAC;IACtE;IACA,IAAI,CAACrH,aAAa,GAAG,CAAC;MAAE+U,QAAQ,EAAE;IAAY,CAAC,EAAE;MAAEA,QAAQ,EAAE;IAAkB,CAAC,EAAE;MAAEA,QAAQ,EAAE;IAAU,CAAC,EAAE;MAAEA,QAAQ,EAAE;IAAS,CAAC,CAAC;IAClI;IACA,IAAIC,aAAa,GAAG,EAAE;IACtB,IAAI,IAAI,CAAC9V,aAAa,CAACqG,oBAAoB,IAAI,CAACnH,iBAAiB,CAAC,IAAI,CAACa,SAAS,CAACoK,4BAA4B,CAAC4L,kBAAkB,CAAC,EAAE;MAC/H,KAAK,IAAI7C,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,CAAC,EAAEA,CAAC,EAAE,EAAE;QACxB,IAAI,CAAChU,iBAAiB,CAAC,IAAI,CAACa,SAAS,CAACoK,4BAA4B,CAAC4L,kBAAkB,CAAC7E,QAAQ,CAACgC,CAAC,CAAC1F,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE;UAChH,IAAI,CAAC1M,aAAa,CAACoQ,QAAQ,CAACgC,CAAC,CAAC1F,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACqI,QAAQ,GAAG,IAAI,CAAC9V,SAAS,CAACoK,4BAA4B,CAAC4L,kBAAkB,CAAC7E,QAAQ,CAACgC,CAAC,CAAC1F,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;QACxJ;MACJ;IACJ;IACA,KAAK,IAAIuD,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACjQ,aAAa,CAACuM,MAAM,EAAE0D,CAAC,EAAE,EAAE;MAChD+E,aAAa,CAAC5E,QAAQ,CAACH,CAAC,CAACvD,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,GAAGxJ,QAAQ,CAAC/E,aAAa,CAAC,KAAK,CAAC;MACzE6W,aAAa,CAAC5E,QAAQ,CAACH,CAAC,CAACvD,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACrJ,EAAE,GAAG,iBAAiB,GAAG4M,CAAC,GAAG,EAAE;MACzE+E,aAAa,CAAC5E,QAAQ,CAACH,CAAC,CAACvD,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACmD,SAAS,CAACC,GAAG,CAAC,gBAAgB,CAAC;IAC7E;IACA,IAAI,CAAC/P,QAAQ,GAAGiV,aAAa;IAC7B;IACA,IAAIzS,KAAK,GAAG,IAAI;IAChB,IAAIwF,KAAK,GAAG,EAAE;IACd,IAAI,IAAI,CAAC7I,aAAa,CAACqG,oBAAoB,EAAE;MACzC,IAAI,IAAI,CAACrG,aAAa,CAACsG,cAAc,EAAE;QACnCuC,KAAK,GAAG,IAAI,CAACmN,oBAAoB,CAAC,CAAC,IAAI,CAACjW,SAAS,CAACoK,4BAA4B,CAACC,qBAAqB,GAAG,IAAI,CAACrK,SAAS,CAACoK,4BAA4B,CAACC,qBAAqB,GAAG,IAAI,CAACrK,SAAS,CAACqK,qBAAqB,MAAM,IAAI,CAACrK,SAAS,CAACoK,4BAA4B,CAACC,qBAAqB,GAAG,IAAI,CAACrK,SAAS,CAACoK,4BAA4B,CAACC,qBAAqB,CAAC6L,WAAW,GAAG,IAAI,CAAClW,SAAS,CAACqK,qBAAqB,CAAC6L,WAAW,CAAC,EAAEnC,aAAa,EAAEU,OAAO,EAAEW,SAAS,CAAC;MAClc,CAAC,MACI;QACDtM,KAAK,GAAG,IAAI,CAACmN,oBAAoB,CAAC,CAAC,IAAI,CAACjW,SAAS,CAACoK,4BAA4B,CAACI,uBAAuB,GAAG,IAAI,CAACxK,SAAS,CAACoK,4BAA4B,CAACI,uBAAuB,GAAG,IAAI,CAACxK,SAAS,CAACwK,uBAAuB,MAAM,IAAI,CAACxK,SAAS,CAACoK,4BAA4B,CAACI,uBAAuB,GAAG,IAAI,CAACxK,SAAS,CAACoK,4BAA4B,CAACI,uBAAuB,CAAC0L,WAAW,GAAG,IAAI,CAAClW,SAAS,CAACwK,uBAAuB,CAAC0L,WAAW,CAAC,EAAEnC,aAAa,EAAEU,OAAO,EAAEW,SAAS,CAAC;MAC9c;IACJ,CAAC,MACI;MACD,IAAI,IAAI,CAACnV,aAAa,CAACsG,cAAc,EAAE;QACnCuC,KAAK,GAAG,IAAI,CAACmN,oBAAoB,CAAE,IAAI,CAACjW,SAAS,CAACyK,oBAAoB,CAACJ,qBAAqB,GAAG,IAAI,CAACrK,SAAS,CAACyK,oBAAoB,CAACJ,qBAAqB,CAAC6L,WAAW,GAAG,CAAC,EAAGnC,aAAa,EAAEU,OAAO,EAAEW,SAAS,CAAC;MACjN,CAAC,MACI;QACDtM,KAAK,GAAG,IAAI,CAACmN,oBAAoB,CAAE,IAAI,CAACjW,SAAS,CAAC0K,sBAAsB,CAACF,uBAAuB,GAAG,IAAI,CAACxK,SAAS,CAAC0K,sBAAsB,CAACF,uBAAuB,CAAC0L,WAAW,GAAG,CAAC,EAAGnC,aAAa,EAAEU,OAAO,EAAEW,SAAS,CAAC;MACzN;IACJ;IACA;IACA,IAAI,CAAC9N,MAAM,GAAG,IAAI1H,GAAG,CAAC;MAClBuW,QAAQ,EAAE,SAAAA,CAAU9S,IAAI,EAAE;QACtBC,KAAK,CAAC8S,iBAAiB,CAAC/S,IAAI,CAAC;MACjC,CAAC;MACDgT,SAAS,EAAE,SAAAA,CAAUhT,IAAI,EAAE;QACvBC,KAAK,CAACP,MAAM,CAACM,IAAI,CAAC;MACtB,CAAC;MACDyF,KAAK,EAAEA;IACX,CAAC,CAAC;IACF,IAAI,CAACxB,MAAM,CAACkB,QAAQ,CAAC2M,GAAG,CAAC;IACzB,IAAIrM,KAAK,CAAC,CAAC,CAAC,CAAC/B,MAAM,CAACgC,KAAK,KAAK,MAAM,EAAE;MAClC,IAAI,CAAC7F,aAAa,GAAG,MAAM;IAC/B,CAAC,MACI,IAAI4F,KAAK,CAAC,CAAC,CAAC,CAAC/B,MAAM,CAACgC,KAAK,KAAK,MAAM,EAAE;MACvC,IAAI,CAAC7F,aAAa,GAAG,MAAM;IAC/B,CAAC,MACI;MACD,IAAI,CAACA,aAAa,GAAG,OAAO;IAChC;IACA,OAAOiS,GAAG;IACV;IACA;IACA;EACJ,CAAC;EACDpV,SAAS,CAAC2F,SAAS,CAAC0Q,iBAAiB,GAAG,UAAUpT,CAAC,EAAE;IACjD;IACA,IAAIsT,UAAU,GAAG,EAAE;IACnB,IAAI1Q,YAAY,GAAG,GAAG;IACtB,IAAI2Q,WAAW,GAAGtS,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,eAAe,CAAC,CAACyE,aAAa,CAAC,CAAC,CAAC;IACvG,IAAI0N,WAAW,EAAE;MACb,IAAIA,WAAW,CAACzN,KAAK,CAACwE,MAAM,GAAG,CAAC,EAAE;QAC9B,KAAK,IAAI0D,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGuF,WAAW,CAACzN,KAAK,CAACwE,MAAM,EAAE0D,CAAC,EAAE,EAAE;UAC/C,IAAIwF,WAAW,GAAGD,WAAW,CAACzN,KAAK,CAACqI,QAAQ,CAACH,CAAC,CAACvD,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC1G,MAAM,CAAC0P,IAAI;UAC3E,IAAID,WAAW,KAAKxT,CAAC,CAAC0T,YAAY,CAACrD,WAAW,EAAE;YAC5CiD,UAAU,GAAGC,WAAW,CAACzN,KAAK,CAACqI,QAAQ,CAACH,CAAC,CAACvD,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC1G,MAAM,CAACgC,KAAK;UAC3E;QACJ;MACJ;IACJ;IACA,IAAI,CAAC3B,oBAAoB,CAACpE,CAAC,CAAC;IAC5B;IACA,IAAIsT,UAAU,CAACK,iBAAiB,CAAC,CAAC,KAAK,MAAM,EAAE;MAC3C,IAAI,CAACzT,aAAa,GAAG,MAAM;MAC3B,IAAI,CAAC0T,2BAA2B,CAAC,CAAC;MAClC,IAAI5N,YAAY,GAAG/E,QAAQ,CAACC,cAAc,CAAC,UAAU,CAAC;MACtD,IAAI,CAAC+E,qBAAqB,CAACD,YAAY,CAAC;IAC5C,CAAC,MACI,IAAIsN,UAAU,CAACK,iBAAiB,CAAC,CAAC,KAAK,MAAM,EAAE;MAChD,IAAI3S,MAAM,GAAGC,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,mBAAmB,CAAC;MACrF,IAAI,CAAC9D,oBAAoB,GAAG0D,MAAM,CAAC6G,SAAS,CAAC,CAAC;MAC9C,IAAI,CAACyH,wBAAwB,CAAC,CAAC;MAC/B,IAAI,CAACpP,aAAa,GAAG,MAAM;MAC3B,IAAI,CAAC0T,2BAA2B,CAAC,CAAC;MAClC,IAAI1N,YAAY,GAAGjF,QAAQ,CAACC,cAAc,CAAC,WAAW,CAAC;MACvD,IAAI,CAAC+E,qBAAqB,CAACC,YAAY,CAAC;MACxC,IAAI2N,OAAO,GAAG5S,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,oBAAoB,CAAC;MACvF,IAAI,CAAC,IAAI,CAACnE,aAAa,CAACsG,cAAc,IAAI,IAAI,CAAC/E,uBAAuB,KAAK,EAAE,IAAIqV,OAAO,CAACpR,KAAK,KAAK,EAAE,IAAI,CAAC,IAAI,CAACxF,aAAa,CAACqG,oBAAoB,EAAE;QAC/I,IAAI,CAAC4O,mBAAmB,CAAC,CAAC;MAC9B,CAAC,MACI,IAAI,IAAI,CAACjV,aAAa,CAACsG,cAAc,IAAI,IAAI,CAAC9E,qBAAqB,KAAK,EAAE,IAAIoV,OAAO,CAACpR,KAAK,KAAK,EAAE,IAAI,CAAC,IAAI,CAACxF,aAAa,CAACqG,oBAAoB,EAAE;QACjJ,IAAI,CAAC4O,mBAAmB,CAAC,CAAC;MAC9B;IACJ,CAAC,MACI,IAAIoB,UAAU,CAACK,iBAAiB,CAAC,CAAC,KAAK,QAAQ,EAAE;MAClD,IAAI3S,MAAM,GAAGC,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,mBAAmB,CAAC;MACrF,IAAI,CAAC9D,oBAAoB,GAAG0D,MAAM,CAAC6G,SAAS,CAAC,CAAC;MAC9C,IAAI,CAAC3H,aAAa,GAAG,OAAO;MAC5B,IAAI,CAAC0T,2BAA2B,CAAC,CAAC;MAClC,IAAIzN,aAAa,GAAGlF,QAAQ,CAACC,cAAc,CAAC,WAAW,CAAC;MACxD,IAAI,CAAC+E,qBAAqB,CAACE,aAAa,CAAC;MACzC,IAAI1E,UAAU,GAAGR,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,qBAAqB,CAAC;MAC3F,IAAI,IAAI,CAACtC,yBAAyB,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC7B,aAAa,CAACsG,cAAc,IAAI,CAAC,IAAI,CAACrE,iBAAiB,IAAI,CAAC,IAAI,CAACjC,aAAa,CAACqG,oBAAoB,EAAE;QACpJ,IAAI,CAACvB,kBAAkB,CAAC,KAAK,CAAC;QAC9BN,UAAU,CAACC,KAAK,CAACC,UAAU,GAAG,QAAQ;QACtC,IAAI,CAACnE,YAAY,GAAG,IAAI,CAACsB,yBAAyB;MACtD;MACA,IAAI,IAAI,CAACC,uBAAuB,KAAK,EAAE,IAAI,IAAI,CAAC9B,aAAa,CAACsG,cAAc,IAAI,CAAC,IAAI,CAACrE,iBAAiB,IAAI,CAAC,IAAI,CAACjC,aAAa,CAACqG,oBAAoB,EAAE;QACjJ,IAAI,CAACvB,kBAAkB,CAAC,KAAK,CAAC;QAC9BN,UAAU,CAACC,KAAK,CAACC,UAAU,GAAG,QAAQ;QACtC,IAAI,CAACnE,YAAY,GAAG,IAAI,CAACuB,uBAAuB;MACpD;IACJ;IACA,IAAI,IAAI,CAAC/B,SAAS,CAACmE,OAAO,CAACsE,WAAW,GAAG7C,YAAY,EACjD,IAAI,CAAC8C,gBAAgB,CAAC,CAAC;IAC3B,IAAI,CAACoO,mBAAmB,CAAC,CAAC;IAC1B,IAAIR,UAAU,CAACK,iBAAiB,CAAC,CAAC,KAAK,QAAQ,IAAI,IAAI,CAACtW,qBAAqB,EAAE;MAC3E,IAAI,CAAC0W,oBAAoB,CAAC,CAAC;IAC/B;EACJ,CAAC;EACDhX,SAAS,CAAC2F,SAAS,CAACkR,2BAA2B,GAAG,YAAY;IAC1D,IAAI,IAAI,CAAC3W,aAAa,CAACqG,oBAAoB,IAAI,IAAI,CAACpD,aAAa,KAAK,MAAM,EAAE;MAC1E,IAAI,IAAI,CAAC1C,YAAY,KAAK,EAAE,EAAE;QAC1B,IAAI,CAACuE,kBAAkB,CAAC,KAAK,CAAC;MAClC,CAAC,MACI;QACD,IAAI,CAACA,kBAAkB,CAAC,IAAI,CAAC;MACjC;IACJ,CAAC,MACI;MACD,IAAI,IAAI,CAAC5C,SAAS,KAAK,EAAE,EAAE;QACvB,IAAI,CAAC4C,kBAAkB,CAAC,KAAK,CAAC;MAClC,CAAC,MACI;QACD,IAAI,CAACA,kBAAkB,CAAC,IAAI,CAAC;MACjC;IACJ;EACJ,CAAC;EACDhF,SAAS,CAAC2F,SAAS,CAACuQ,oBAAoB,GAAG,UAAUC,WAAW,EAAEnC,aAAa,EAAEU,OAAO,EAAEW,SAAS,EAAE;IACjG,IAAItM,KAAK,GAAG,EAAE;IACd,IAAIoN,WAAW,GAAGpW,WAAW,CAACkX,IAAI,EAAE;MAChClO,KAAK,CAACiJ,IAAI,CAAC;QACPhL,MAAM,EAAE;UAAE,MAAM,EAAE,IAAI,CAAC/G,SAAS,CAACwG,SAAS,CAACC,WAAW,CAAC,qBAAqB,CAAC;UAAE,OAAO,EAAE;QAAO,CAAC;QAChGE,OAAO,EAAEoN;MACb,CAAC,CAAC;IACN;IACA,IAAImC,WAAW,GAAGpW,WAAW,CAACmX,IAAI,EAAE;MAChCnO,KAAK,CAACiJ,IAAI,CAAC;QACPhL,MAAM,EAAE;UAAE,MAAM,EAAE,IAAI,CAAC/G,SAAS,CAACwG,SAAS,CAACC,WAAW,CAAC,gBAAgB,CAAC;UAAE,OAAO,EAAE;QAAO,CAAC;QAC3FE,OAAO,EAAE8N;MACb,CAAC,CAAC;IACN;IACA,IAAIyB,WAAW,GAAGpW,WAAW,CAACoX,MAAM,EAAE;MAClCpO,KAAK,CAACiJ,IAAI,CAAC;QACPhL,MAAM,EAAE;UAAE,MAAM,EAAE,IAAI,CAAC/G,SAAS,CAACwG,SAAS,CAACC,WAAW,CAAC,kBAAkB,CAAC;UAAE,OAAO,EAAE;QAAS,CAAC;QAC/FE,OAAO,EAAEyO;MACb,CAAC,CAAC;IACN;IACA,OAAOtM,KAAK;EAChB,CAAC;EACD;AACJ;AACA;AACA;EACI/I,SAAS,CAAC2F,SAAS,CAACyR,0BAA0B,GAAG,YAAY;IACzD;IACA,IAAIC,SAAS,GAAGlY,aAAa,CAAC,OAAO,EAAE;MAAEkF,EAAE,EAAE,IAAI,CAACpE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,cAAc;MAAEiT,KAAK,EAAE;QAAE,MAAM,EAAE;MAAO;IAAE,CAAC,CAAC;IACrHD,SAAS,CAACE,YAAY,CAAC,QAAQ,EAAE,iBAAiB,CAAC;IACnDF,SAAS,CAAC1S,KAAK,CAAC6Q,QAAQ,GAAG,UAAU;IACrC6B,SAAS,CAAC1S,KAAK,CAACiK,IAAI,GAAG,KAAK;IAC5ByI,SAAS,CAAC1S,KAAK,CAACmK,GAAG,GAAG,KAAK;IAC3BuI,SAAS,CAAC1S,KAAK,CAACC,UAAU,GAAG,QAAQ;IACrCV,QAAQ,CAACsT,IAAI,CAACrR,WAAW,CAACkR,SAAS,CAAC;IACpCA,SAAS,CAAC/N,gBAAgB,CAAC,QAAQ,EAAE,IAAI,CAACjG,aAAa,CAAC;EAC5D,CAAC;EACDrD,SAAS,CAAC2F,SAAS,CAACmQ,oBAAoB,GAAG,YAAY;IACnD;IACA,IAAIuB,SAAS,GAAGnT,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,cAAc,CAAC;IACnF,IAAIgT,SAAS,EAAE;MACXA,SAAS,CAACjP,KAAK,CAAC,CAAC;IACrB;EACJ,CAAC;EACDpI,SAAS,CAAC2F,SAAS,CAACwP,mBAAmB,GAAG,YAAY;IAClD,IAAItP,YAAY,GAAG,GAAG;IACtB;IACA,IAAIkP,OAAO,GAAG7Q,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,kBAAkB,CAAC;IACrF;IACA,IAAIoT,OAAO,GAAGvT,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,oBAAoB,CAAC;IACvF,KAAK,IAAI4M,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACjQ,aAAa,CAACuM,MAAM,EAAE0D,CAAC,EAAE,EAAE;MAChD,IAAI,CAAClQ,QAAQ,CAACqQ,QAAQ,CAACH,CAAC,CAACvD,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACgK,SAAS,GAAGD,OAAO,CAAC/R,KAAK;MACnE,IAAI,CAAC3E,QAAQ,CAACqQ,QAAQ,CAACH,CAAC,CAACvD,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC/I,KAAK,CAACiH,UAAU,GAAG,IAAI,CAAC5K,aAAa,CAACoQ,QAAQ,CAACH,CAAC,CAACvD,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACqI,QAAQ;MACpH,IAAI,IAAI,CAACpD,QAAQ,KAAK,EAAE,IAAI,IAAI,CAAC3R,aAAa,CAACoQ,QAAQ,CAACH,CAAC,CAACvD,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACqI,QAAQ,KAAK,IAAI,CAACpD,QAAQ,EAAE;QACnG,IAAI,CAAC5R,QAAQ,CAACqQ,QAAQ,CAACH,CAAC,CAACvD,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC/I,KAAK,CAAC0O,WAAW,GAAG,KAAK;MACvE,CAAC,MACI,IAAIjU,iBAAiB,CAAC,IAAI,CAACuT,QAAQ,CAAC,IAAI,IAAI,CAAC3R,aAAa,CAACoQ,QAAQ,CAACH,CAAC,CAACvD,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACqI,QAAQ,KAAK,WAAW,EAAE;QAClH,IAAI,CAAChV,QAAQ,CAACqQ,QAAQ,CAACH,CAAC,CAACvD,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC/I,KAAK,CAAC0O,WAAW,GAAG,KAAK;MACvE;MACA0B,OAAO,CAAC5O,WAAW,CAAC,IAAI,CAACpF,QAAQ,CAACqQ,QAAQ,CAACH,CAAC,CAACvD,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;IAClE;IACA,KAAK,IAAIuD,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACjQ,aAAa,CAACuM,MAAM,EAAE0D,CAAC,EAAE,EAAE;MAChD;MACA,IAAI0G,SAAS,GAAGzT,QAAQ,CAACC,cAAc,CAAC,iBAAiB,GAAG8M,CAAC,GAAG,EAAE,CAAC;MACnE0G,SAAS,CAACrO,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAACsO,kBAAkB,CAACvP,IAAI,CAAC,IAAI,CAAC,CAAC;IAC3E;IACA,IAAI,CAACrD,kBAAkB,CAAC,KAAK,CAAC;IAC9B,IAAI,CAACiF,iBAAiB,CAAC,KAAK,CAAC;IAC7B,IAAI,IAAI,CAAChK,SAAS,CAACmE,OAAO,CAACsE,WAAW,GAAG7C,YAAY,EACjD,IAAI,CAAC8C,gBAAgB,CAAC,CAAC;IAC3B,IAAI,CAACoO,mBAAmB,CAAC,CAAC;EAC9B,CAAC;EACD/W,SAAS,CAAC2F,SAAS,CAACiS,kBAAkB,GAAG,YAAY;IACjD,IAAI/D,WAAW,GAAGD,KAAK,CAACnQ,MAAM;IAC9B;IACA,IAAIoU,YAAY,GAAG3T,QAAQ,CAAC4T,sBAAsB,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC;IACvED,YAAY,CAAC1P,QAAQ,GAAG,KAAK;IAC7B,KAAK,IAAI8I,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,CAAC,EAAEA,CAAC,EAAE,EAAE;MACxB;MACA,IAAIwC,WAAW,GAAGvP,QAAQ,CAACC,cAAc,CAAC,iBAAiB,GAAG8M,CAAC,GAAG,EAAE,CAAC;MACrE,IAAIwC,WAAW,EAAE;QACbA,WAAW,CAAC9O,KAAK,CAAC0O,WAAW,GAAG,EAAE;MACtC;IACJ;IACAQ,WAAW,CAAClP,KAAK,CAAC0O,WAAW,GAAG,KAAK;IACrC,IAAI,CAAC5S,YAAY,GAAGoT,WAAW,CAACP,WAAW;IAC3C,IAAI;MACA,IAAI,CAACX,QAAQ,GAAGf,IAAI,CAACC,KAAK,CAACgC,WAAW,CAAClP,KAAK,CAACiH,UAAU,CAAC;IAC5D,CAAC,CACD,OAAO3I,CAAC,EAAE;MACN,IAAI,CAAC0P,QAAQ,GAAGkB,WAAW,CAAClP,KAAK,CAACiH,UAAU;IAChD;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;EACI;EACA5L,SAAS,CAAC2F,SAAS,CAACyG,sBAAsB,GAAG,UAAUJ,MAAM,EAAEwJ,QAAQ,EAAE;IACrE,IAAIzI,QAAQ,GAAG,CAAC,CAAC;IACjB,IAAIC,QAAQ,GAAG,CAAC,CAAC;IACjB,IAAIC,QAAQ,GAAG,CAAC,CAAC;IACjB,IAAIC,QAAQ,GAAG,CAAC,CAAC;IACjB;IACA,IAAIL,cAAc,GAAGrN,eAAe,CAAC,IAAI,CAACiB,YAAY,CAAC;IACvD;IACA,IAAIsX,SAAS,GAAG7T,QAAQ,CAAC/E,aAAa,CAAC,QAAQ,CAAC;IAChD;IACA,IAAImF,OAAO,GAAGyT,SAAS,CAACxT,UAAU,CAAC,IAAI,CAAC;IACxC;IACA,IAAIyO,WAAW;IACf,IAAIgF,aAAa,GAAG,IAAI,CAAC9X,aAAa,CAACkL,qBAAqB,CAACc,mBAAmB;IAChF,IAAI8L,aAAa,KAAK,sBAAsB,EAAE;MAC1C,IAAInL,cAAc,CAACU,MAAM,KAAK,CAAC,EAAE;QAC7B;QACA,KAAK,IAAI0K,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGpL,cAAc,CAACU,MAAM,EAAE0K,CAAC,EAAE,EAAE;UAC5C;UACA,IAAIzK,GAAG,GAAGX,cAAc,CAACoL,CAAC,CAAC;UAC3B,IAAIlL,QAAQ,KAAK,CAAC,CAAC,EAAE;YACjB;YACAA,QAAQ,GAAIS,GAAG,CAAC,GAAG,CAAE;YACrB;YACAP,QAAQ,GAAIO,GAAG,CAAC,GAAG,CAAE;YACrB;YACAR,QAAQ,GAAIQ,GAAG,CAAC,GAAG,CAAE;YACrB;YACAN,QAAQ,GAAIM,GAAG,CAAC,GAAG,CAAE;UACzB,CAAC,MACI;YACD;YACA,IAAIG,MAAM,GAAIH,GAAG,CAAC,GAAG,CAAE;YACvB;YACA,IAAII,MAAM,GAAIJ,GAAG,CAAC,GAAG,CAAE;YACvB,IAAIT,QAAQ,IAAIY,MAAM,EAAE;cACpBZ,QAAQ,GAAGY,MAAM;YACrB;YACA,IAAIX,QAAQ,IAAIY,MAAM,EAAE;cACpBZ,QAAQ,GAAGY,MAAM;YACrB;YACA,IAAIX,QAAQ,IAAIU,MAAM,EAAE;cACpBV,QAAQ,GAAGU,MAAM;YACrB;YACA,IAAIT,QAAQ,IAAIU,MAAM,EAAE;cACpBV,QAAQ,GAAGU,MAAM;YACrB;UACJ;QACJ;QACA,IAAIG,cAAc,GAAGd,QAAQ,GAAGF,QAAQ;QACxC,IAAIiB,cAAc,GAAGd,QAAQ,GAAGF,QAAQ;QACxC,IAAIkL,WAAW,GAAGnK,cAAc,GAAG,GAAG;QACtC,IAAIoK,WAAW,GAAGnK,cAAc,GAAG,GAAG;QACtC,IAAIY,IAAI,GAAG,CAAC;QACZ,IAAIwJ,KAAK,GAAG,CAAC;QACb,IAAIpM,MAAM,EAAE;UACR+L,SAAS,CAACjT,KAAK,GAAG0Q,QAAQ,CAACjH,YAAY;UACvCwJ,SAAS,CAAChT,MAAM,GAAGyQ,QAAQ,CAAC/G,aAAa;UACzCyJ,WAAW,GAAGnK,cAAc,GAAI/B,MAAM,CAAClH,KAAM;UAC7CqT,WAAW,GAAGnK,cAAc,GAAIhC,MAAM,CAACjH,MAAO;UAC9C6J,IAAI,GAAG5C,MAAM,CAAC0C,CAAC,GAAG8G,QAAQ,CAAClH,WAAW;UACtC8J,KAAK,GAAGpM,MAAM,CAAC2C,CAAC,GAAG6G,QAAQ,CAAChH,UAAU;QAC1C,CAAC,MACI;UACDuJ,SAAS,CAACjT,KAAK,GAAG,GAAG;UACrBiT,SAAS,CAAChT,MAAM,GAAG,GAAG;QAC1B;QACAT,OAAO,CAAC+T,SAAS,CAAC,CAAC;QACnB,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGzL,cAAc,CAACU,MAAM,EAAE+K,CAAC,EAAE,EAAE;UAC5C;UACA,IAAI9K,GAAG,GAAGX,cAAc,CAACyL,CAAC,CAAC;UAC3B;UACA,IAAI3K,MAAM,GAAI,CAACH,GAAG,CAAC,GAAG,CAAC,GAAGT,QAAQ,IAAImL,WAAW,GAAItJ,IAAI;UACzD;UACA,IAAIhB,MAAM,GAAI,CAACJ,GAAG,CAAC,GAAG,CAAC,GAAGR,QAAQ,IAAImL,WAAW,GAAIC,KAAK;UAC1D;UACA,IAAI5K,GAAG,CAAC,SAAS,CAAC,KAAK,GAAG,EAAE;YACxBlJ,OAAO,CAACiU,MAAM,CAAC5K,MAAM,EAAEC,MAAM,CAAC;YAC9B;UACJ,CAAC,MACI,IAAIJ,GAAG,CAAC,SAAS,CAAC,KAAK,GAAG,EAAE;YAC7BlJ,OAAO,CAACkU,MAAM,CAAC7K,MAAM,EAAEC,MAAM,CAAC;UAClC;QACJ;QACAtJ,OAAO,CAACmU,MAAM,CAAC,CAAC;QAChBnU,OAAO,CAACoU,SAAS,CAAC,CAAC;QACnB1F,WAAW,GAAG+E,SAAS,CAACjN,SAAS,CAAC,CAAC;MACvC;IACJ,CAAC,MACI,IAAIkN,aAAa,KAAK,eAAe,EAAE;MACxChF,WAAW,GAAG,IAAI,CAACvS,YAAY;IACnC,CAAC,MACI;MACDuS,WAAW,GAAG,IAAI,CAACvS,YAAY;IACnC;IACA,IAAIuL,MAAM,EAAE;MACR,IAAI,CAACrJ,eAAe,GAAGqQ,WAAW;IACtC,CAAC,MACI;MACD;MACA,IAAI2F,cAAc,GAAG,CAAC,CAAC;MACvBA,cAAc,CAAC,OAAO,GAAG,IAAI,CAACzY,aAAa,CAAC0Y,UAAU,CAAC,GAAG,IAAI,CAACnY,YAAY;MAC3E,IAAI,CAACI,gBAAgB,CAACmR,IAAI,CAAC2G,cAAc,CAAC;MAC1C;MACA,IAAIE,SAAS,GAAG,EAAE;MAClBA,SAAS,CAAC7G,IAAI,CAAC;QAAE3N,EAAE,EAAE,OAAO,GAAG,IAAI,CAACnE,aAAa,CAAC0Y,UAAU;QAAEE,SAAS,EAAE9F,WAAW;QAAEgF,aAAa,EAAEA,aAAa;QAAEpM,UAAU,EAAE,IAAI,CAAC1L,aAAa,CAACkL,qBAAqB,CAACQ;MAAW,CAAC,CAAC;MACtL,IAAI,CAAChL,mBAAmB,CAACoR,IAAI,CAAC;QAAExN,KAAK,EAAEqU,SAAS;QAAEE,SAAS,EAAE,IAAI,CAAC7Y,aAAa,CAACsG;MAAe,CAAC,CAAC;MACjG,IAAI,CAACtG,aAAa,CAAC0Y,UAAU,EAAE;IACnC;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;EACI5Y,SAAS,CAAC2F,SAAS,CAACqT,YAAY,GAAG,UAAUC,KAAK,EAAE;IAChD,IAAIA,KAAK,GAAG,IAAI,CAAClW,YAAY,EAAE;MAC3BkW,KAAK,GAAG,IAAI,CAAClW,YAAY;IAC7B,CAAC,MACI,IAAIkW,KAAK,GAAG,CAAC,EAAE;MAChBA,KAAK,GAAG,CAAC;IACb;IACA,OAAOA,KAAK;EAChB,CAAC;EACD;AACJ;AACA;AACA;EACIjZ,SAAS,CAAC2F,SAAS,CAACuT,oBAAoB,GAAG,YAAY;IACnD,IAAI,CAAChZ,aAAa,CAAC6L,cAAc,EAAE;IACnC,IAAIoC,SAAS,GAAG,IAAI,CAACjO,aAAa,CAACkO,aAAa,CAAC,CAAC;IAClD,IAAIpD,KAAK;IACT,IAAI,IAAI,CAAC9K,aAAa,CAACiZ,kBAAkB,EAAE;MACvC,IAAIlO,cAAc,GAAG,IAAI,CAAChL,SAAS,CAACiL,UAAU,CAACC,UAAU,CAAC,CAAC;MAC3D,IAAI,CAACjL,aAAa,CAACkL,qBAAqB,GAAG,IAAI;MAC/C,IAAI,CAAClL,aAAa,CAACmL,gBAAgB,GAAG,IAAI;MAC1C,IAAIC,SAAS,GAAG,IAAI,CAACpL,aAAa,CAACqL,iBAAiB,GAAG,CAAC;MACxD,IAAI8C,OAAO,GAAGnK,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,WAAW,GAAGiH,SAAS,CAAC;MAC1F,IAAIgD,WAAW,GAAG,CAAC;MACnB,IAAIE,UAAU,GAAG,CAAC;MAClB;MACA,IAAID,YAAY,GAAG,IAAI,CAACtO,SAAS,CAACoK,4BAA4B,CAACvF,KAAK,GAAG,IAAI,CAAC7E,SAAS,CAACoK,4BAA4B,CAACvF,KAAK,GAAG,GAAG;MAC9H;MACA,IAAI2J,aAAa,GAAG,IAAI,CAACxO,SAAS,CAACoK,4BAA4B,CAACtF,MAAM,GAAG,IAAI,CAAC9E,SAAS,CAACoK,4BAA4B,CAACtF,MAAM,GAAG,GAAG;MACjI;MACA,IAAIyG,SAAS,GAAG,IAAI,CAACvL,SAAS,CAACoK,4BAA4B,CAACmB,SAAS,GAAG,IAAI,CAACvL,SAAS,CAACoK,4BAA4B,CAACmB,SAAS,GAAG,CAAC;MACjI;MACA,IAAIC,OAAO,GAAG,IAAI,CAACxL,SAAS,CAACoK,4BAA4B,CAACoB,OAAO,GAAG,IAAI,CAACxL,SAAS,CAACoK,4BAA4B,CAACoB,OAAO,GAAG,CAAC;MAC3H;MACA,IAAIC,WAAW,GAAG,IAAI,CAACzL,SAAS,CAACoK,4BAA4B,CAACqB,WAAW,GAAG,IAAI,CAACzL,SAAS,CAACoK,4BAA4B,CAACqB,WAAW,GAAG,SAAS;MAC/I4C,WAAW,GAAG,CAAEb,UAAU,CAACY,OAAO,CAAC1J,KAAK,CAACG,KAAK,CAAC,GAAG,CAAC,GAAKyJ,YAAY,GAAG,CAAE,IAAIJ,SAAS;MACtF;MACAK,UAAU,GAAG,CAAEf,UAAU,CAACY,OAAO,CAAC1J,KAAK,CAACI,MAAM,CAAC,GAAG,CAAC,GAAK0J,aAAa,GAAG,CAAE,IAAIN,SAAS;MACvF,IAAIiL,SAAS,GAAG,EAAE;MAClB,IAAIpB,aAAa,GAAG,KAAK,CAAC;MAC1B,IAAIqB,mBAAmB,GAAG,KAAK,CAAC;MAChC,KAAK,IAAIC,UAAU,GAAG,CAAC,EAAEA,UAAU,GAAG,IAAI,CAACzY,gBAAgB,CAAC0M,MAAM,EAAE+L,UAAU,EAAE,EAAE;QAC9E;QACA,IAAIC,mBAAmB,GAAG,IAAI,CAAC1Y,gBAAgB,CAACyY,UAAU,CAAC;QAC3D;QACA,IAAIzF,WAAW,GAAGD,KAAK,CAACnQ,MAAM;QAC9B;QACA,IAAIoQ,WAAW,IAAIA,WAAW,CAACxP,EAAE,KAAK,OAAO,GAAGiV,UAAU,IAAIzF,WAAW,IAAIA,WAAW,CAACxP,EAAE,KAAK,aAAa,GAAGiV,UAAU,EAAE;UACxHF,SAAS,GAAGG,mBAAmB,CAAC,OAAO,GAAGD,UAAU,CAAC;UACrD;QACJ;MACJ;MACA,KAAK,IAAIE,cAAc,GAAG,CAAC,EAAEA,cAAc,GAAG,IAAI,CAAC5Y,mBAAmB,CAAC2M,MAAM,EAAEiM,cAAc,EAAE,EAAE;QAC7F,IAAI3F,WAAW,GAAGD,KAAK,CAACnQ,MAAM;QAC9B,IAAIgW,WAAW,GAAG,IAAI,CAAC7Y,mBAAmB,CAACwQ,QAAQ,CAACoI,cAAc,CAAC9L,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAClJ,KAAK,CAAC,CAAC,CAAC,CAACH,EAAE,CAACR,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QAC7G,IAAIgQ,WAAW,IAAIA,WAAW,CAACxP,EAAE,KAAK,OAAO,GAAGoV,WAAW,IAAI5F,WAAW,IAAIA,WAAW,CAACxP,EAAE,KAAK,aAAa,GAAGoV,WAAW,EAAE;UAC1HzB,aAAa,GAAG,IAAI,CAACpX,mBAAmB,CAACwQ,QAAQ,CAACoI,cAAc,CAAC9L,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAClJ,KAAK,CAAC,CAAC,CAAC,CAACwT,aAAa;UACxGqB,mBAAmB,GAAG,IAAI,CAACzY,mBAAmB,CAACwQ,QAAQ,CAACoI,cAAc,CAAC9L,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAClJ,KAAK,CAAC,CAAC,CAAC,CAACoH,UAAU;UAC3G;QACJ;MACJ;MACA,IAAIoM,aAAa,KAAK,sBAAsB,EAAE;QAC1C;QACA,IAAInM,eAAe,GAAG,IAAI,CAACC,0BAA0B,CAACsN,SAAS,EAAE,IAAI,CAAC;QACtE;QACA7K,YAAY,GAAG1C,eAAe,CAAC/G,KAAK,GAAG+G,eAAe,CAAC/G,KAAK,GAAGyJ,YAAY;QAC3E;QACAE,aAAa,GAAG5C,eAAe,CAAC9G,MAAM,GAAG8G,eAAe,CAAC9G,MAAM,GAAG0J,aAAa;MACnF,CAAC,MACI;QACDF,YAAY,GAAGA,YAAY,KAAK,GAAG,GAAG,GAAG,GAAG,IAAI,CAACtO,SAAS,CAACoK,4BAA4B,CAACvF,KAAK;QAC7F;QACA2J,aAAa,GAAGA,aAAa,KAAK,GAAG,GAAG,EAAE,GAAG,IAAI,CAACxO,SAAS,CAACoK,4BAA4B,CAACtF,MAAM;MACnG;MACAiG,KAAK,GAAG;QACJ;QACA3G,EAAE,EAAE,MAAM,GAAG,IAAI,CAACnE,aAAa,CAAC6L,cAAc;QAAEC,MAAM,EAAE;UAAE0C,CAAC,EAAEJ,WAAW;UAAEK,CAAC,EAAEH,UAAU;UAAE1J,KAAK,EAAEyJ,YAAY;UAAExJ,MAAM,EAAE0J;QAAc,CAAC;QAAEnD,SAAS,EAAEA,SAAS;QAAEW,IAAI,EAAEmN,SAAS;QAC5K;QACAlN,mBAAmB,EAAE8L,aAAa;QAAEvM,OAAO,EAAEA,OAAO;QAAEG,UAAU,EAAEyN,mBAAmB;QAAE3N,WAAW,EAAEA,WAAW;QAAEF,SAAS,EAAEA,SAAS;QAAEW,aAAa,EAAElB;MAC1J,CAAC;MACD,IAAI,CAAC/K,aAAa,CAACkL,qBAAqB,GAAGJ,KAAK;MAChD,IAAI,CAAC9K,aAAa,CAACiZ,kBAAkB,GAAG,KAAK;IACjD,CAAC,MACI;MACD,IAAI,CAAClZ,SAAS,CAAC4H,gBAAgB,CAAC4E,aAAa,CAAC,CAAC;IACnD;EACJ,CAAC;EACD;AACJ;AACA;AACA;EACIzM,SAAS,CAAC2F,SAAS,CAACgD,gBAAgB,GAAG,YAAY;IAC/C;IACA,IAAI1E,MAAM,GAAGC,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,mBAAmB,CAAC;IACrF,IAAI,CAACqV,eAAe,CAACzV,MAAM,CAAC;IAC5B,IAAIwR,YAAY,GAAGvR,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,yBAAyB,CAAC;IACjG,IAAI,CAACqV,eAAe,CAACjE,YAAY,CAAC;IAClC,IAAIkE,cAAc,GAAGzV,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,kBAAkB,CAAC;IAC5F,IAAI,CAACqV,eAAe,CAACC,cAAc,CAAC;EACxC,CAAC;EACD3Z,SAAS,CAAC2F,SAAS,CAAC+T,eAAe,GAAG,UAAUzV,MAAM,EAAE;IACpD,IAAI2V,OAAO,GAAG,CAAC;IACf,IAAI/T,YAAY,GAAG,GAAG;IACtB,IAAIgU,WAAW,GAAG,GAAG;IACrB,IAAIC,MAAM,GAAG,EAAE;IACf,IAAIC,IAAI,GAAG7V,QAAQ,CAACmF,aAAa,CAAC,gBAAgB,CAAC;IACnD,IAAI0Q,IAAI,EAAE;MACN,IAAIpV,KAAK,GAAGqV,gBAAgB,CAACD,IAAI,CAAC;MAClCH,OAAO,GAAGA,OAAO,GAAGxI,QAAQ,CAACzM,KAAK,CAACsV,WAAW,EAAE,EAAE,CAAC,GAAG7I,QAAQ,CAACzM,KAAK,CAACuQ,YAAY,EAAE,EAAE,CAAC;IAC1F;IACA,IAAIjR,MAAM,IAAI,IAAI,CAAC0C,eAAe,IAAI,IAAI,CAACA,eAAe,CAACO,OAAO,EAAE;MAChE,IAAIgT,SAAS,GAAGjW,MAAM,CAACM,UAAU,CAAC,IAAI,CAAC;MACvC,IAAI4V,aAAa,GAAGlW,MAAM,CAAC6G,SAAS,CAAC,CAAC;MACtC,IAAI,IAAI,CAAC7K,SAAS,CAACmE,OAAO,CAACsE,WAAW,GAAG7C,YAAY,EAAE;QACnD5B,MAAM,CAACa,KAAK,GAAG+U,WAAW;QAC1B5V,MAAM,CAACU,KAAK,CAACG,KAAK,GAAG+U,WAAW,GAAG,IAAI;MAC3C,CAAC,MACI;QACD5V,MAAM,CAACa,KAAK,GAAG,IAAI,CAAC7E,SAAS,CAACmE,OAAO,CAACsE,WAAW,GAAGkR,OAAO;QAC3D3V,MAAM,CAACU,KAAK,CAACG,KAAK,GAAGb,MAAM,CAACa,KAAK,GAAG,IAAI;MAC5C;MACA,IAAIsV,OAAO,GAAG,IAAI3V,KAAK,CAAC,CAAC;MACzB2V,OAAO,CAACnV,GAAG,GAAGkV,aAAa;MAC3BC,OAAO,CAACpW,MAAM,GAAG,YAAY;QACzBkW,SAAS,CAACrV,SAAS,CAACuV,OAAO,EAAE,CAAC,EAAE,CAAC,EAAEnW,MAAM,CAACa,KAAK,EAAEb,MAAM,CAACc,MAAM,CAAC;MACnE,CAAC;IACL;IACA,IAAIsV,YAAY,GAAGnW,QAAQ,CAAC4T,sBAAsB,CAAC,gBAAgB,CAAC;IACpE,IAAI7T,MAAM,IAAIoW,YAAY,IAAIA,YAAY,CAAC9M,MAAM,GAAG,CAAC,EAAE;MACnD,KAAK,IAAI0D,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGoJ,YAAY,CAAC9M,MAAM,EAAE0D,CAAC,EAAE,EAAE;QAC1C,IAAI8D,OAAO,GAAGsF,YAAY,CAACjJ,QAAQ,CAACH,CAAC,CAACvD,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;QACtDqH,OAAO,CAACpQ,KAAK,CAACG,KAAK,GAAKb,MAAM,CAACa,KAAK,GAAG,CAAC,GAAIgV,MAAM,GAAI,IAAI;MAC9D;IACJ;EACJ,CAAC;EACD9Z,SAAS,CAAC2F,SAAS,CAACoR,mBAAmB,GAAG,YAAY;IAClD,IAAIxT,KAAK,GAAG,IAAI;IAChB,IAAIiB,KAAK,GAAG,IAAIC,KAAK,CAAC,CAAC;IACvBD,KAAK,CAACR,MAAM,GAAG,YAAY;MACvB,IAAIC,MAAM,GAAGC,QAAQ,CAACC,cAAc,CAACZ,KAAK,CAACtD,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,mBAAmB,CAAC;MACtF,IAAIJ,MAAM,EAAE;QACR,IAAIK,OAAO,GAAGL,MAAM,CAACM,UAAU,CAAC,IAAI,CAAC;QACrCD,OAAO,CAACO,SAAS,CAACL,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;MAClC;IACJ,CAAC;IACDA,KAAK,CAACS,GAAG,GAAG,IAAI,CAAC1E,oBAAoB;EACzC,CAAC;EACDP,SAAS,CAAC2F,SAAS,CAACqR,oBAAoB,GAAG,YAAY;IACnD,IAAIzT,KAAK,GAAG,IAAI;IAChB,IAAIiB,KAAK,GAAG,IAAIC,KAAK,CAAC,CAAC;IACvBD,KAAK,CAACR,MAAM,GAAG,YAAY;MACvB,IAAIC,MAAM,GAAGC,QAAQ,CAACC,cAAc,CAACZ,KAAK,CAACtD,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,yBAAyB,CAAC;MAC5F,IAAIJ,MAAM,EAAE;QACR,IAAIK,OAAO,GAAGL,MAAM,CAACM,UAAU,CAAC,IAAI,CAAC;QACrC,IAAIG,UAAU,GAAGR,QAAQ,CAACC,cAAc,CAACZ,KAAK,CAACtD,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,qBAAqB,CAAC;QAC5FK,UAAU,CAACC,KAAK,CAACC,UAAU,GAAG,QAAQ;QACtCN,OAAO,CAACO,SAAS,CAACL,KAAK,EAAE,CAAC,EAAE,CAAC,EAAEP,MAAM,CAACa,KAAK,EAAEb,MAAM,CAACc,MAAM,CAAC;QAC3DxB,KAAK,CAACyB,kBAAkB,CAAC,KAAK,CAAC;QAC/BzB,KAAK,CAAC2B,oBAAoB,GAAGV,KAAK,CAACW,aAAa;QAChD5B,KAAK,CAAC6B,mBAAmB,GAAGZ,KAAK,CAACa,YAAY;MAClD;IACJ,CAAC;IACDb,KAAK,CAACS,GAAG,GAAG,IAAI,CAAC3E,qBAAqB;EAC1C,CAAC;EACDN,SAAS,CAAC2F,SAAS,CAAC4D,uBAAuB,GAAG,UAAUtG,CAAC,EAAE;IACvD,IAAIA,CAAC,CAACW,IAAI,KAAK,aAAa,EAAE;MAC1BX,CAAC,CAACqX,cAAc,CAAC,CAAC;MAClB,IAAI,CAACC,iBAAiB,CAACtX,CAAC,CAAC;MACzB,IAAI,CAACuX,cAAc,GAAG,IAAI;MAC1B,IAAI,CAACC,IAAI,GAAG,IAAI,CAACC,MAAM;MACvB,IAAI,CAACC,IAAI,GAAG,IAAI,CAACC,MAAM;MACvB,IAAI,CAACpa,SAAS,GAAG,EAAE;MACnB,IAAI,CAACqa,iBAAiB,CAAC5X,CAAC,CAAC;MACzB,IAAI,CAAC7C,WAAW,GAAG,IAAI;IAC3B;EACJ,CAAC;EACDJ,SAAS,CAAC2F,SAAS,CAACX,kBAAkB,GAAG,UAAU8V,QAAQ,EAAE;IACzD;IACA,IAAIC,SAAS,GAAG7W,QAAQ,CAAC4T,sBAAsB,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC;IACpE,IAAIiD,SAAS,EAAE;MACXA,SAAS,CAAC5S,QAAQ,GAAG2S,QAAQ;IACjC;IACA,IAAI,CAAC7Q,iBAAiB,CAAC6Q,QAAQ,CAAC;EACpC,CAAC;EACD9a,SAAS,CAAC2F,SAAS,CAACsE,iBAAiB,GAAG,UAAU6Q,QAAQ,EAAE;IACxD;IACA,IAAIE,QAAQ,GAAG9W,QAAQ,CAAC4T,sBAAsB,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC;IAClE,IAAIkD,QAAQ,EAAE;MACVA,QAAQ,CAAC7S,QAAQ,GAAG2S,QAAQ;IAChC;EACJ,CAAC;EACD9a,SAAS,CAAC2F,SAAS,CAAC6D,uBAAuB,GAAG,UAAUvG,CAAC,EAAE;IACvD,IAAI,IAAI,CAACuX,cAAc,IAAI,IAAI,CAACrX,aAAa,KAAK,MAAM,EAAE;MACtD,IAAI,CAACoX,iBAAiB,CAACtX,CAAC,CAAC;MACzB,IAAI,CAAC+B,kBAAkB,CAAC,KAAK,CAAC;MAC9B,IAAI,CAAC6V,iBAAiB,CAAC5X,CAAC,CAAC;IAC7B;EACJ,CAAC;EACDjD,SAAS,CAAC2F,SAAS,CAAC4U,iBAAiB,GAAG,UAAU3G,KAAK,EAAE;IACrD,IAAIqH,OAAO;IACX,IAAIC,OAAO;IACX,IAAItH,KAAK,CAAChQ,IAAI,CAACuX,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,EAAE;MACpCvH,KAAK,GAAGA,KAAK;MACb,IAAIxP,OAAO,GAAGwP,KAAK,CAACnQ,MAAM;MAC1B;MACA,IAAI2X,WAAW,GAAGhX,OAAO,CAACiX,qBAAqB,CAAC,CAAC;MACjD,IAAI,CAACX,MAAM,GAAG9G,KAAK,CAAC0H,cAAc,CAAC,CAAC,CAAC,CAACC,OAAO,GAAGH,WAAW,CAACxM,IAAI;MAChE,IAAI,CAACgM,MAAM,GAAGhH,KAAK,CAAC0H,cAAc,CAAC,CAAC,CAAC,CAACE,OAAO,GAAGJ,WAAW,CAACtM,GAAG;IACnE,CAAC,MACI;MACD8E,KAAK,GAAGA,KAAK;MACb,IAAI,CAAC8G,MAAM,GAAG9G,KAAK,CAACqH,OAAO;MAC3B,IAAI,CAACL,MAAM,GAAGhH,KAAK,CAACsH,OAAO;IAC/B;EACJ,CAAC;EACDlb,SAAS,CAAC2F,SAAS,CAACkV,iBAAiB,GAAG,UAAUjH,KAAK,EAAE;IACrD,IAAI,IAAI,CAAC4G,cAAc,EAAE;MACrB,IAAI,CAACiB,qBAAqB,CAAC,CAAC;MAC5B,IAAI,CAAChB,IAAI,GAAG,IAAI,CAACC,MAAM;MACvB,IAAI,CAACC,IAAI,GAAG,IAAI,CAACC,MAAM;IAC3B;EACJ,CAAC;EACD5a,SAAS,CAAC2F,SAAS,CAAC8V,qBAAqB,GAAG,YAAY;IACpD;IACA,IAAIxX,MAAM,GAAGC,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,mBAAmB,CAAC;IACrF;IACA,IAAIC,OAAO,GAAGL,MAAM,CAACM,UAAU,CAAC,IAAI,CAAC;IACrCD,OAAO,CAAC+T,SAAS,CAAC,CAAC;IACnB/T,OAAO,CAACiU,MAAM,CAAC,IAAI,CAACkC,IAAI,EAAE,IAAI,CAACE,IAAI,CAAC;IACpCrW,OAAO,CAACkU,MAAM,CAAC,IAAI,CAACkC,MAAM,EAAE,IAAI,CAACE,MAAM,CAAC;IACxCtW,OAAO,CAACmU,MAAM,CAAC,CAAC;IAChBnU,OAAO,CAACoX,SAAS,GAAG,CAAC;IACrBpX,OAAO,CAACqX,GAAG,CAAC,IAAI,CAAClB,IAAI,EAAE,IAAI,CAACE,IAAI,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAEvK,IAAI,CAACwL,EAAE,GAAG,CAAC,EAAE,IAAI,CAAC;IAC9DtX,OAAO,CAACoU,SAAS,CAAC,CAAC;IACnB,IAAI,CAAClY,SAAS,CAACwR,IAAI,CAAC,IAAI,CAAC0I,MAAM,EAAE,IAAI,CAACE,MAAM,CAAC;EACjD,CAAC;EACD5a,SAAS,CAAC2F,SAAS,CAAC8D,qBAAqB,GAAG,YAAY;IACpD,IAAI,IAAI,CAAC+Q,cAAc,EAAE;MACrB,IAAI,CAACqB,aAAa,CAAC,IAAI,CAACrb,SAAS,CAAC;IACtC;IACA,IAAI,CAACga,cAAc,GAAG,KAAK;IAC3B,IAAI5G,KAAK,CAAChQ,IAAI,IAAI,UAAU,EAAE;MAC1B,IAAI,CAACvD,aAAa,GAAG,IAAI;IAC7B;EACJ,CAAC;EACDL,SAAS,CAAC2F,SAAS,CAAC2O,wBAAwB,GAAG,YAAY;IACvD,IAAI,IAAI,CAACkG,cAAc,EAAE;MACrB,IAAI,CAACqB,aAAa,CAAC,IAAI,CAACrb,SAAS,CAAC;IACtC;IACA,IAAI,CAACga,cAAc,GAAG,KAAK;IAC3B,IAAI,CAACpa,WAAW,GAAG,KAAK;EAC5B,CAAC;EACD;EACA;EACAJ,SAAS,CAAC2F,SAAS,CAACkW,aAAa,GAAG,UAAUrb,SAAS,EAAE;IACrD,IAAI,CAACsb,QAAQ,CAACtb,SAAS,CAAC,CAAC,CAAC,EAAEA,SAAS,CAAC,CAAC,CAAC,CAAC;IACzC,IAAI,CAACub,QAAQ,CAACvb,SAAS,CAAC,CAAC,CAAC,EAAEA,SAAS,CAAC,CAAC,CAAC,CAAC;IACzC,KAAK,IAAI8X,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG9X,SAAS,CAAC+M,MAAM,EAAE+K,CAAC,GAAGA,CAAC,GAAG,CAAC,EAAE;MAC7C,IAAI,CAACyD,QAAQ,CAACvb,SAAS,CAAC4Q,QAAQ,CAACkH,CAAC,CAAC5K,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAElN,SAAS,CAAC8X,CAAC,GAAG,CAAC,CAAC,CAAC;IAC1E;EACJ,CAAC;EACDtY,SAAS,CAAC2F,SAAS,CAACoW,QAAQ,GAAG,UAAUrN,CAAC,EAAEC,CAAC,EAAE;IAC3C,IAAI,CAAClO,YAAY,IAAI,GAAG,GAAGiO,CAAC,GAAG,GAAG,GAAGC,CAAC,GAAG,GAAG;EAChD,CAAC;EACD3O,SAAS,CAAC2F,SAAS,CAACmW,QAAQ,GAAG,UAAUpN,CAAC,EAAEC,CAAC,EAAE;IAC3C,IAAI,CAAClO,YAAY,IAAI,GAAG,GAAGiO,CAAC,GAAG,GAAG,GAAGC,CAAC,GAAG,GAAG;EAChD,CAAC;EACD;AACJ;AACA;AACA;EACI3O,SAAS,CAAC2F,SAAS,CAAC0B,oBAAoB,GAAG,UAAUzD,IAAI,EAAE;IACvD,IAAIoY,aAAa,GAAG,IAAI;IACxB,IAAIC,UAAU,GAAG,EAAE;IACnB,IAAIrY,IAAI,IAAI,CAACxE,iBAAiB,CAACwE,IAAI,CAACsY,aAAa,CAAC,IAAI,CAAC9c,iBAAiB,CAACwE,IAAI,CAACuY,aAAa,CAAC,EAAE;MAC1FH,aAAa,GAAG,KAAK;MACrB,IAAIpY,IAAI,CAACsY,aAAa,KAAK,CAAC,EAAE;QAC1B,IAAI,CAACxb,gBAAgB,GAAG,IAAI,CAACD,YAAY;QACzCwb,UAAU,GAAG,IAAI,CAACzb,SAAS;MAC/B,CAAC,MACI,IAAIoD,IAAI,CAACsY,aAAa,KAAK,CAAC,EAAE;QAC/B,IAAI,CAACvb,iBAAiB,GAAG,IAAI,CAACF,YAAY;MAC9C;MACA,IAAI,CAACA,YAAY,GAAG,EAAE;MACtB,IAAI,CAACD,SAAS,GAAG,EAAE;MACnB,IAAIoD,IAAI,CAACuY,aAAa,KAAK,CAAC,EAAE;QAC1B,IAAI,CAAC1b,YAAY,GAAG,IAAI,CAACC,gBAAgB;QACzC,IAAI,CAACF,SAAS,GAAGyb,UAAU;MAC/B,CAAC,MACI,IAAIrY,IAAI,CAACuY,aAAa,KAAK,CAAC,EAAE;QAC/B,IAAI,CAAC1b,YAAY,GAAG,IAAI,CAACE,iBAAiB;MAC9C;IACJ,CAAC,MACI;MACD,IAAI,CAACF,YAAY,GAAG,EAAE;MACtB,IAAI,CAACD,SAAS,GAAG,EAAE;IACvB;IACA,IAAI4b,cAAc,GAAG,KAAK;IAC1B,IAAIC,cAAc,GAAG,KAAK;IAC1B,IAAIC,eAAe,GAAG,KAAK;IAC3B,IAAI1Y,IAAI,IAAIA,IAAI,CAAC0B,aAAa,IAAI1B,IAAI,CAAC0B,aAAa,CAACuL,SAAS,CAAC0L,QAAQ,CAAC,eAAe,CAAC,EAAE;MACtFP,aAAa,GAAG,KAAK;MACrB,IAAI,IAAI,CAAC7Y,aAAa,KAAK,MAAM,EAAE;QAC/BiZ,cAAc,GAAG,IAAI;QACrB,IAAIrS,QAAQ,GAAG7F,QAAQ,CAACC,cAAc,CAAC,UAAU,CAAC;QAClD,IAAIqY,eAAe,GAAGtY,QAAQ,CAACC,cAAc,CAAC,UAAU,CAAC;QACzD,IAAI4F,QAAQ,IAAIyS,eAAe,CAACC,kBAAkB,EAAE;UAChDD,eAAe,CAACC,kBAAkB,CAAC5L,SAAS,CAACU,MAAM,CAAC,SAAS,CAAC;UAC9DxH,QAAQ,CAACC,OAAO,GAAG,KAAK;QAC5B;MACJ,CAAC,MACI,IAAI,IAAI,CAAC7G,aAAa,KAAK,MAAM,EAAE;QACpCkZ,cAAc,GAAG,IAAI;QACrB,IAAItS,QAAQ,GAAG7F,QAAQ,CAACC,cAAc,CAAC,WAAW,CAAC;QACnD,IAAIqY,eAAe,GAAGtY,QAAQ,CAACC,cAAc,CAAC,WAAW,CAAC;QAC1D,IAAI4F,QAAQ,IAAIyS,eAAe,CAACC,kBAAkB,EAAE;UAChDD,eAAe,CAACC,kBAAkB,CAAC5L,SAAS,CAACU,MAAM,CAAC,SAAS,CAAC;UAC9DxH,QAAQ,CAACC,OAAO,GAAG,KAAK;UACxB,IAAI,CAAC5H,SAAS,GAAG,EAAE;QACvB;MACJ,CAAC,MACI;QACDka,eAAe,GAAG,IAAI;QACtB,IAAI,CAACna,iBAAiB,GAAG,IAAI;QAC7B,IAAI4H,QAAQ,GAAG7F,QAAQ,CAACC,cAAc,CAAC,WAAW,CAAC;QACnD,IAAIqY,eAAe,GAAGtY,QAAQ,CAACC,cAAc,CAAC,WAAW,CAAC;QAC1D,IAAI4F,QAAQ,IAAIyS,eAAe,CAACC,kBAAkB,EAAE;UAChDD,eAAe,CAACC,kBAAkB,CAAC5L,SAAS,CAACU,MAAM,CAAC,SAAS,CAAC;UAC9DxH,QAAQ,CAACC,OAAO,GAAG,KAAK;QAC5B;MACJ;IACJ;IACA;IACA,IAAI/F,MAAM,GAAGC,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,mBAAmB,CAAC;IACrF;IACA,IAAKJ,MAAM,IAAI+X,aAAa,IAAMI,cAAe,EAAE;MAC/C;MACA,IAAI9X,OAAO,GAAGL,MAAM,CAACM,UAAU,CAAC,IAAI,CAAC;MACrCD,OAAO,CAACoY,SAAS,CAAC,CAAC,EAAE,CAAC,EAAEzY,MAAM,CAACa,KAAK,EAAEb,MAAM,CAACc,MAAM,CAAC;IACxD;IACA;IACA,IAAI+N,WAAW,GAAG5O,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,yBAAyB,CAAC;IAChG,IAAIyO,WAAW,IAAIkJ,aAAa,IAAKM,eAAgB,EAAE;MACnD;MACA,IAAIhY,OAAO,GAAGwO,WAAW,CAACvO,UAAU,CAAC,IAAI,CAAC;MAC1CD,OAAO,CAACoY,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE5J,WAAW,CAAChO,KAAK,EAAEgO,WAAW,CAAC/N,MAAM,CAAC;MAC9D;MACA,IAAIL,UAAU,GAAGR,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,qBAAqB,CAAC;MAC3F,IAAIK,UAAU,EAAE;QACZA,UAAU,CAACC,KAAK,CAACC,UAAU,GAAG,EAAE;MACpC;IACJ;IACA;IACA,IAAI+X,OAAO,GAAGzY,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,kBAAkB,CAAC;IACrF;IACA,IAAIyS,OAAO,GAAG5S,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,oBAAoB,CAAC;IACvF,IAAKsY,OAAO,IAAI7F,OAAO,IAAIkF,aAAa,IAAMK,cAAe,EAAE;MAC3DvF,OAAO,CAACpR,KAAK,GAAG,EAAE;MAClB,IAAI,CAACrG,QAAQ,CAAC,CAAC,EAAE;QACbsd,OAAO,CAACjF,SAAS,GAAG,EAAE;MAC1B;IACJ;IACA,IAAI,CAAC1S,kBAAkB,CAAC,IAAI,CAAC;EACjC,CAAC;EACD;AACJ;AACA;AACA;EACIhF,SAAS,CAAC2F,SAAS,CAAC2C,mBAAmB,GAAG,YAAY;IAClD,IAAI,IAAI,CAACpI,aAAa,CAACoF,aAAa,EAAE;MAClC,IAAI,CAACpF,aAAa,CAAC0H,qBAAqB,GAAG,IAAI;IACnD;IACA,IAAI,CAACP,oBAAoB,CAAC,CAAC;IAC3B,IAAI,CAAChI,QAAQ,CAAC,CAAC,EAAE;MACb,IAAI,CAACsH,eAAe,CAAC4M,IAAI,CAAC,CAAC;IAC/B;IACA,IAAI,CAACrT,aAAa,CAACqG,oBAAoB,GAAG,KAAK;IAC/C,IAAI,CAACrG,aAAa,CAAC0H,qBAAqB,GAAG,KAAK;IAChD,IAAI,CAAClH,gBAAgB,GAAG,EAAE;IAC1B,IAAI,CAACC,iBAAiB,GAAG,EAAE;EAC/B,CAAC;EACD;AACJ;AACA;AACA;EACIX,SAAS,CAAC2F,SAAS,CAACiX,aAAa,GAAG,YAAY;IAC5C;IACA,IAAIC,WAAW,GAAG,IAAI;IACtB,IAAI,IAAI,CAAC3c,aAAa,CAAC4c,eAAe,EAAE;MACpCD,WAAW,GAAG,IAAI,CAAC3c,aAAa,CAAC6c,iBAAiB,CAAC,IAAI,CAAC7c,aAAa,CAAC8c,UAAU,GAAG,mBAAmB,CAAC;IAC3G,CAAC,MACI;MACDH,WAAW,GAAGI,MAAM,CAACC,cAAc,CAACC,OAAO,CAAC,IAAI,CAACjd,aAAa,CAAC8c,UAAU,GAAG,mBAAmB,CAAC;IACpG;IACA;IACA,IAAII,WAAW,GAAG,IAAIC,KAAK,CAAC,CAAC;IAC7B,KAAK,IAAIjK,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAAClT,aAAa,CAACod,SAAS,EAAElK,CAAC,EAAE,EAAE;MACnDgK,WAAW,CAAChM,QAAQ,CAACgC,CAAC,CAAC1F,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,GAAG,EAAE;IAChD;IACA,IAAImP,WAAW,EAAE;MACb,IAAIU,oBAAoB,GAAG3L,IAAI,CAACC,KAAK,CAACgL,WAAW,CAAC;MAClD,KAAK,IAAI5L,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGsM,oBAAoB,CAAChQ,MAAM,EAAE0D,CAAC,EAAE,EAAE;QAClD,IAAIuM,QAAQ,GAAG,EAAE;QACjB,IAAIC,oBAAoB,GAAGF,oBAAoB,CAACnM,QAAQ,CAACH,CAAC,CAACvD,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;QAC3E,IAAI+P,oBAAoB,EAAE;UACtB,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAED,oBAAoB,CAACL,WAAW,CAAC7P,MAAM,GAAGmQ,CAAC,EAAEA,CAAC,EAAE,EAAE;YAC9D,IAAI,IAAI,CAACzd,SAAS,CAAC0d,mBAAmB,EAAE;cACpC,IAAIC,iBAAiB,GAAG,IAAI,CAAC3d,SAAS,CAACoK,4BAA4B;cACnE,IAAIwT,kBAAkB,GAAG,IAAI,CAAC5d,SAAS,CAAC4d,kBAAkB;cAC1D,IAAIC,gBAAgB,GAAIF,iBAAiB,CAACG,MAAM,KAAK,OAAO,GAAIH,iBAAiB,CAACG,MAAM,GAAGF,kBAAkB,CAACE,MAAM,GAAGF,kBAAkB,CAACE,MAAM,GAAG,OAAO;cAC1J;cACAN,oBAAoB,CAACL,WAAW,CAAChM,QAAQ,CAACsM,CAAC,CAAChQ,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACqQ,MAAM,GAAGD,gBAAgB;YAC1F;YACA;YACA,IAAIE,iBAAiB,GAAGP,oBAAoB,CAACL,WAAW,CAAChM,QAAQ,CAACsM,CAAC,CAAChQ,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAChC,WAAW,GAAG+R,oBAAoB,CAACL,WAAW,CAAChM,QAAQ,CAACsM,CAAC,CAAChQ,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAChC,WAAW,GAAG,OAAO;YACrL+R,oBAAoB,CAACL,WAAW,CAAChM,QAAQ,CAACsM,CAAC,CAAChQ,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAChC,WAAW,GAAGkG,IAAI,CAACqM,SAAS,CAAC,IAAI,CAACC,UAAU,CAACF,iBAAiB,CAAC,CAAC;YAC7H;YACAP,oBAAoB,CAACL,WAAW,CAAChM,QAAQ,CAACsM,CAAC,CAAChQ,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC1B,MAAM,GAAG4F,IAAI,CAACqM,SAAS,CAAC,IAAI,CAAChe,SAAS,CAACiL,UAAU,CAACiT,SAAS,CAACV,oBAAoB,CAACL,WAAW,CAAChM,QAAQ,CAACsM,CAAC,CAAChQ,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC1B,MAAM,EAAEyR,oBAAoB,CAACnS,SAAS,CAAC,CAAC;YAC9N,IAAImS,oBAAoB,CAACL,WAAW,CAAChM,QAAQ,CAACsM,CAAC,CAAChQ,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACxB,mBAAmB,KAAK,sBAAsB,IAAIuR,oBAAoB,CAACL,WAAW,CAAChM,QAAQ,CAACsM,CAAC,CAAChQ,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACvB,aAAa,KAAK,KAAK,EAAE;cACrM;cACA,IAAIU,cAAc,GAAGrN,eAAe,CAACie,oBAAoB,CAACL,WAAW,CAAChM,QAAQ,CAACsM,CAAC,CAAChQ,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACzB,IAAI,CAAC;cACvG;cACA,IAAIa,MAAM,GAAGvN,oBAAoB,CAACsN,cAAc,CAAC;cACjD4Q,oBAAoB,CAACL,WAAW,CAAChM,QAAQ,CAACsM,CAAC,CAAChQ,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACzB,IAAI,GAAG2F,IAAI,CAACqM,SAAS,CAACnR,MAAM,CAAC;YAC9F,CAAC,MACI;cACD,IAAI2Q,oBAAoB,CAACL,WAAW,CAAChM,QAAQ,CAACsM,CAAC,CAAChQ,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACxB,mBAAmB,KAAK,eAAe,IAAI,CAAC,IAAI,CAACkS,gBAAgB,CAACX,oBAAoB,CAACL,WAAW,CAAChM,QAAQ,CAACsM,CAAC,CAAChQ,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC9B,UAAU,CAAC,EAAE;gBACzM,IAAIyS,cAAc,GAAGlf,aAAa,CAAC,QAAQ,CAAC;gBAC5C,IAAI6M,MAAM,GAAG4F,IAAI,CAACC,KAAK,CAAC4L,oBAAoB,CAACL,WAAW,CAAChM,QAAQ,CAACsM,CAAC,CAAChQ,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC1B,MAAM,CAAC;gBAC5FqS,cAAc,CAACvZ,KAAK,GAAIkH,MAAM,IAAIA,MAAM,CAAClH,KAAK,IAAK,GAAG;gBACtDuZ,cAAc,CAACtZ,MAAM,GAAIiH,MAAM,IAAIA,MAAM,CAACjH,MAAM,IAAK0Y,oBAAoB,CAACL,WAAW,CAAChM,QAAQ,CAACsM,CAAC,CAAChQ,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC/B,QAAQ,GAAG,CAAC;gBAC9H;gBACA,IAAI2S,aAAa,GAAGD,cAAc,CAAC9Z,UAAU,CAAC,IAAI,CAAC;gBACnD,IAAImK,CAAC,GAAG2P,cAAc,CAACvZ,KAAK,GAAG,CAAC;gBAChC,IAAI6J,CAAC,GAAI0P,cAAc,CAACtZ,MAAM,GAAG,CAAC,GAAI0Y,oBAAoB,CAACL,WAAW,CAAChM,QAAQ,CAACsM,CAAC,CAAChQ,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC/B,QAAQ,GAAG,CAAC,GAAG,EAAE;gBACpH2S,aAAa,CAACC,SAAS,GAAG,QAAQ;gBAClCD,aAAa,CAACE,IAAI,GAAGf,oBAAoB,CAACL,WAAW,CAAChM,QAAQ,CAACsM,CAAC,CAAChQ,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC/B,QAAQ,GAAG,KAAK,GAAG8R,oBAAoB,CAACL,WAAW,CAAChM,QAAQ,CAACsM,CAAC,CAAChQ,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC9B,UAAU;gBAC5K0S,aAAa,CAACG,QAAQ,CAAChB,oBAAoB,CAACL,WAAW,CAAChM,QAAQ,CAACsM,CAAC,CAAChQ,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACzB,IAAI,EAAEyC,CAAC,EAAEC,CAAC,CAAC;gBAC/F8O,oBAAoB,CAACL,WAAW,CAAChM,QAAQ,CAACsM,CAAC,CAAChQ,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACzB,IAAI,GAAG2F,IAAI,CAACqM,SAAS,CAACI,cAAc,CAACvT,SAAS,CAAC,WAAW,CAAC,CAAC;gBACzH2S,oBAAoB,CAACL,WAAW,CAAChM,QAAQ,CAACsM,CAAC,CAAChQ,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACxB,mBAAmB,GAAG,gBAAgB;cACvG,CAAC,MACI;gBACDuR,oBAAoB,CAACL,WAAW,CAAChM,QAAQ,CAACsM,CAAC,CAAChQ,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACzB,IAAI,GAAG2F,IAAI,CAACqM,SAAS,CAACR,oBAAoB,CAACL,WAAW,CAAChM,QAAQ,CAACsM,CAAC,CAAChQ,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACzB,IAAI,CAAC;cACzJ;YACJ;UACJ;UACAuR,QAAQ,GAAGC,oBAAoB,CAACL,WAAW;QAC/C;QACAA,WAAW,CAACK,oBAAoB,CAACnS,SAAS,CAAC,GAAGkS,QAAQ;MAC1D;IACJ;IACA,OAAO5L,IAAI,CAACqM,SAAS,CAACb,WAAW,CAAC;EACtC,CAAC;EACDpd,SAAS,CAAC2F,SAAS,CAACyY,gBAAgB,GAAG,UAAUzL,QAAQ,EAAE;IACvD;IACA,CAAC;MAAEoD,QAAQ,EAAE;IAAY,CAAC,EAAE;MAAEA,QAAQ,EAAE;IAAkB,CAAC,EAAE;MAAEA,QAAQ,EAAE;IAAU,CAAC,EAAE;MAAEA,QAAQ,EAAE;IAAS,CAAC,CAAC;IAC7G,IAAIpD,QAAQ,KAAK,WAAW,IAAIA,QAAQ,KAAK,iBAAiB,IAAIA,QAAQ,KAAK,SAAS,IAAIA,QAAQ,KAAK,QAAQ,EAAE;MAC/G,OAAO,IAAI;IACf;IACA,OAAO,KAAK;EAChB,CAAC;EACD;AACJ;AACA;AACA;EACI;EACA3S,SAAS,CAAC2F,SAAS,CAACuY,UAAU,GAAG,UAAUQ,WAAW,EAAE;IACpD;IACA,IAAI,CAACA,WAAW,CAACC,KAAK,CAAC,gBAAgB,CAAC,IAAI,CAACD,WAAW,CAACC,KAAK,CAAC,4DAA4D,CAAC,EAAE;MAC1HD,WAAW,GAAG,IAAI,CAACze,SAAS,CAAC2e,gBAAgB,CAACC,UAAU,CAACH,WAAW,CAAC;IACzE;IACA,IAAII,WAAW,GAAGJ,WAAW,CAAC7a,KAAK,CAAC,GAAG,CAAC;IACxC,IAAIzE,iBAAiB,CAAC0f,WAAW,CAAC,CAAC,CAAC,CAAC,EAAE;MACnCJ,WAAW,GAAG,IAAI,CAACze,SAAS,CAAC2e,gBAAgB,CAACG,QAAQ,CAACL,WAAW,EAAE,MAAM,CAAC;MAC3EI,WAAW,GAAGJ,WAAW,CAAC7a,KAAK,CAAC,GAAG,CAAC;IACxC;IACA;IACA,IAAImb,CAAC,GAAG5N,QAAQ,CAAC0N,WAAW,CAAC,CAAC,CAAC,CAACjb,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IAC9C;IACA,IAAIob,CAAC,GAAG7N,QAAQ,CAAC0N,WAAW,CAAC,CAAC,CAAC,CAAC;IAChC;IACA,IAAII,CAAC,GAAG9N,QAAQ,CAAC0N,WAAW,CAAC,CAAC,CAAC,CAAC;IAChC;IACA,IAAIK,CAAC,GAAG/N,QAAQ,CAAC0N,WAAW,CAAC,CAAC,CAAC,CAAC;IAChC,OAAO;MAAEE,CAAC,EAAEA,CAAC;MAAEC,CAAC,EAAEA,CAAC;MAAEC,CAAC,EAAEA,CAAC;MAAEC,CAAC,EAAEA;IAAE,CAAC;EACrC,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;EACInf,SAAS,CAAC2F,SAAS,CAACyZ,eAAe,GAAG,UAAUxQ,IAAI,EAAEE,GAAG,EAAE;IACvD,IAAI9D,KAAK;IACT;IACA,IAAIqU,iBAAiB,GAAG,IAAI,CAACnf,aAAa,CAACkL,qBAAqB;IAChE,IAAIH,cAAc,GAAG,IAAI,CAAChL,SAAS,CAACiL,UAAU,CAACC,UAAU,CAAC,CAAC;IAC3D,IAAIkU,iBAAiB,EAAE;MACnB,IAAI,IAAI,CAACnf,aAAa,CAACkL,qBAAqB,CAACc,mBAAmB,KAAK,sBAAsB,EAAE;QACzFlB,KAAK,GAAG;UACJ;UACA3G,EAAE,EAAEgb,iBAAiB,CAAChb,EAAE;UAAE2H,MAAM,EAAE;YAAE0C,CAAC,EAAEE,IAAI;YAAED,CAAC,EAAEG,GAAG;YAAEhK,KAAK,EAAEua,iBAAiB,CAACrT,MAAM,CAAClH,KAAK;YAAEC,MAAM,EAAEsa,iBAAiB,CAACrT,MAAM,CAACjH;UAAO,CAAC;UAAEuG,SAAS,EAAE+T,iBAAiB,CAAC/T,SAAS;UAAEW,IAAI,EAAEoT,iBAAiB,CAACpT,IAAI;UAC3MC,mBAAmB,EAAE,sBAAsB;UAAET,OAAO,EAAE4T,iBAAiB,CAAC5T,OAAO;UAAEG,UAAU,EAAEyT,iBAAiB,CAACzT,UAAU;UAAED,QAAQ,EAAE0T,iBAAiB,CAAC1T,QAAQ;UAAED,WAAW,EAAE2T,iBAAiB,CAAC3T,WAAW;UAAEF,SAAS,EAAE6T,iBAAiB,CAAC7T,SAAS;UAAEW,aAAa,EAAElB;QACxQ,CAAC;MACL;MACA,IAAI,IAAI,CAAC/K,aAAa,CAACkL,qBAAqB,CAACc,mBAAmB,KAAK,eAAe,EAAE;QAClFlB,KAAK,GAAG;UACJ;UACA3G,EAAE,EAAEgb,iBAAiB,CAAChb,EAAE;UAAE2H,MAAM,EAAE;YAAE0C,CAAC,EAAEE,IAAI;YAAED,CAAC,EAAEG,GAAG;YAAEhK,KAAK,EAAEua,iBAAiB,CAACrT,MAAM,CAAClH,KAAK;YAAEC,MAAM,EAAEsa,iBAAiB,CAACrT,MAAM,CAACjH;UAAO,CAAC;UAAEuG,SAAS,EAAE+T,iBAAiB,CAAC/T,SAAS;UAAEW,IAAI,EAAEoT,iBAAiB,CAACpT,IAAI;UAC3MC,mBAAmB,EAAE,eAAe;UAAET,OAAO,EAAE4T,iBAAiB,CAAC5T,OAAO;UAAEG,UAAU,EAAEyT,iBAAiB,CAACzT,UAAU;UAAED,QAAQ,EAAE0T,iBAAiB,CAAC1T,QAAQ;UAAED,WAAW,EAAE2T,iBAAiB,CAAC3T,WAAW;UAAEF,SAAS,EAAE6T,iBAAiB,CAAC7T,SAAS;UAAEW,aAAa,EAAElB;QACjQ,CAAC;MACL,CAAC,MACI,IAAI,IAAI,CAAC/K,aAAa,CAACkL,qBAAqB,CAACc,mBAAmB,KAAK,gBAAgB,EAAE;QACxFlB,KAAK,GAAG;UACJ;UACA3G,EAAE,EAAEgb,iBAAiB,CAAChb,EAAE;UAAE2H,MAAM,EAAE;YAAE0C,CAAC,EAAEE,IAAI;YAAED,CAAC,EAAEG,GAAG;YAAEhK,KAAK,EAAEua,iBAAiB,CAACrT,MAAM,CAAClH,KAAK;YAAEC,MAAM,EAAEsa,iBAAiB,CAACrT,MAAM,CAACjH;UAAO,CAAC;UAAEuG,SAAS,EAAE+T,iBAAiB,CAAC/T,SAAS;UAAEW,IAAI,EAAEoT,iBAAiB,CAACpT,IAAI;UAC3MC,mBAAmB,EAAE,gBAAgB;UAAET,OAAO,EAAE4T,iBAAiB,CAAC5T,OAAO;UAAEG,UAAU,EAAEyT,iBAAiB,CAACzT,UAAU;UAAED,QAAQ,EAAE0T,iBAAiB,CAAC1T,QAAQ;UAAED,WAAW,EAAE2T,iBAAiB,CAAC3T,WAAW;UAAEF,SAAS,EAAE6T,iBAAiB,CAAC7T,SAAS;UAAEW,aAAa,EAAElB;QAClQ,CAAC;MACL;MACA,IAAI,CAAChL,SAAS,CAAC6Q,GAAG,CAAC9F,KAAK,CAAC;MACzB;MACA,IAAIsU,OAAO,GAAGpb,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,oBAAoB,GAAGgb,iBAAiB,CAAC/T,SAAS,CAAC;MACrH;MACA,IAAI,CAACrL,SAAS,CAACsf,aAAa,CAACD,OAAO,EAAED,iBAAiB,CAAC/T,SAAS,CAAC;MAClE,IAAI,CAACpL,aAAa,CAACsf,cAAc,GAAG,IAAI;MACxC;MACA,IAAI,CAACC,kBAAkB,CAACJ,iBAAiB,CAAC/T,SAAS,EAAEN,KAAK,CAAC;MAC3D,IAAI,CAAC/K,SAAS,CAACyf,gBAAgB,CAACL,iBAAiB,CAAC/T,SAAS,EAAE+T,iBAAiB,CAAClT,aAAa,EAAEkT,iBAAiB,CAACnT,mBAAmB,EAAEmT,iBAAiB,CAACrT,MAAM,EAAEqT,iBAAiB,CAAC5T,OAAO,EAAE4T,iBAAiB,CAAC3T,WAAW,EAAE2T,iBAAiB,CAAC7T,SAAS,CAAC;MACrP,IAAI,CAACtL,aAAa,CAACkL,qBAAqB,GAAG,IAAI;MAC/C,IAAI,CAAClL,aAAa,CAAC6L,cAAc,EAAE;IACvC;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;EACI;EACA/L,SAAS,CAAC2F,SAAS,CAACga,uBAAuB,GAAG,UAAUpC,oBAAoB,EAAEjS,SAAS,EAAEsU,QAAQ,EAAE;IAC/F,IAAI5U,KAAK;IACT,IAAI6U,iBAAiB,GAAG,KAAK;IAC7B,IAAI,CAACD,QAAQ,EAAE;MACX,KAAK,IAAIE,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAAChf,mBAAmB,CAACyM,MAAM,EAAEuS,CAAC,EAAE,EAAE;QACtD,IAAI,IAAI,CAAChf,mBAAmB,CAACsQ,QAAQ,CAAC0O,CAAC,CAACpS,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,KAAKpC,SAAS,EAAE;UACpEuU,iBAAiB,GAAG,IAAI;UACxB;QACJ;MACJ;IACJ;IACA,IAAItC,oBAAoB,IAAI,CAACsC,iBAAiB,EAAE;MAC5C,IAAItC,oBAAoB,CAAChQ,MAAM,GAAG,CAAC,IAAI,IAAI,CAACzM,mBAAmB,CAACqa,OAAO,CAAC7P,SAAS,CAAC,KAAK,CAAC,CAAC,EAAE;QACvF,IAAI,CAACxK,mBAAmB,CAACkR,IAAI,CAAC1G,SAAS,CAAC;MAC5C;MACA,KAAK,IAAIgN,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGiF,oBAAoB,CAAChQ,MAAM,EAAE+K,CAAC,EAAE,EAAE;QAClD;QACA,IAAI+G,iBAAiB,GAAG9B,oBAAoB,CAACjF,CAAC,CAAC;QAC/C,IAAI+G,iBAAiB,EAAE;UACnB;UACA,IAAIpT,IAAI,GAAGoT,iBAAiB,CAACU,QAAQ;UACrC,IAAIH,QAAQ,EAAE;YACV,IAAIP,iBAAiB,CAACW,WAAW,EAAE;cAC/B/T,IAAI,GAAGoT,iBAAiB,CAACU,QAAQ;YACrC,CAAC,MACI,IAAIV,iBAAiB,CAACY,cAAc,KAAK,gBAAgB,IAAIZ,iBAAiB,CAACY,cAAc,KAAK,eAAe,EAAE;cACpHhU,IAAI,GAAG2F,IAAI,CAACC,KAAK,CAACD,IAAI,CAACqM,SAAS,CAACoB,iBAAiB,CAACU,QAAQ,CAAC,CAAC;YACjE,CAAC,MACI;cACD,IAAI9T,IAAI,CAACiU,QAAQ,CAAC,SAAS,CAAC,EAAE;gBAC1BjU,IAAI,GAAGxM,aAAa,CAACmS,IAAI,CAACC,KAAK,CAACwN,iBAAiB,CAACU,QAAQ,CAAC,CAAC;cAChE,CAAC,MACI;gBACD9T,IAAI,GAAGoT,iBAAiB,CAACU,QAAQ;cACrC;YACJ;UACJ;UACA,IAAI,CAACtf,YAAY,GAAGwL,IAAI;UACxB,IAAI,CAACxL,YAAY,GAAG,EAAE;UACtB,IAAI0f,QAAQ,GAAG,CAAC;UAChB,IAAIC,cAAc,GAAG,CAAC;UACtB,IAAIpU,MAAM,GAAGqT,iBAAiB,CAACgB,MAAM;UACrC,IAAI/R,WAAW,GAAG,CAAClP,iBAAiB,CAAC4M,MAAM,CAACsU,CAAC,CAAC,GAAGtU,MAAM,CAACsU,CAAC,GAAIH,QAAQ,GAAG,CAAE,GAAGnU,MAAM,CAAC0C,CAAC,GAAIyR,QAAQ,GAAG,CAAE;UACtG,IAAI3R,UAAU,GAAG,CAACpP,iBAAiB,CAAC4M,MAAM,CAACuU,CAAC,CAAC,GAAGvU,MAAM,CAACuU,CAAC,GAAIJ,QAAQ,GAAG,CAAE,GAAGnU,MAAM,CAAC2C,CAAC,GAAIwR,QAAQ,GAAG,CAAE;UACrG,IAAI5R,YAAY,GAAGvC,MAAM,CAACyD,KAAK,GAAGzD,MAAM,CAACyD,KAAK,IAAI2Q,cAAc,GAAG,CAAC,CAAC,GAAGpU,MAAM,CAAClH,KAAK,IAAIsb,cAAc,GAAG,CAAC,CAAC;UAC3G,IAAI3R,aAAa,GAAGzC,MAAM,CAAC2D,MAAM,GAAG3D,MAAM,CAAC2D,MAAM,IAAIyQ,cAAc,GAAG,CAAC,CAAC,GAAGpU,MAAM,CAACjH,MAAM,IAAIqb,cAAc,GAAG,CAAC,CAAC;UAC/G,IAAIf,iBAAiB,CAACY,cAAc,KAAK,eAAe,EAAE;YACtDjV,KAAK,GAAG;cACJ3G,EAAE,EAAE,MAAM,GAAG,IAAI,CAACnE,aAAa,CAAC6L,cAAc;cAAEC,MAAM,EAAE;gBAAE0C,CAAC,EAAEJ,WAAW;gBAAEK,CAAC,EAAEH,UAAU;gBAAE1J,KAAK,EAAEyJ,YAAY;gBAAExJ,MAAM,EAAE0J;cAAc,CAAC;cAAEnD,SAAS,EAAEA,SAAS;cAAEW,IAAI,EAAEA,IAAI;cAAEL,UAAU,EAAEyT,iBAAiB,CAACmB,UAAU;cAAE7U,QAAQ,EAAE0T,iBAAiB,CAACoB,QAAQ;cACvPvU,mBAAmB,EAAE,eAAe;cAAET,OAAO,EAAE4T,iBAAiB,CAACqB,OAAO;cAAEhV,WAAW,EAAE2T,iBAAiB,CAACsB,WAAW;cAAEnV,SAAS,EAAE6T,iBAAiB,CAACuB,SAAS;cAAEzU,aAAa,EAAEkT,iBAAiB,CAACwB;YACnM,CAAC;UACL,CAAC,MACI,IAAIxB,iBAAiB,CAACY,cAAc,KAAK,gBAAgB,EAAE;YAC5DjV,KAAK,GAAG;cACJ3G,EAAE,EAAE,MAAM,GAAG,IAAI,CAACnE,aAAa,CAAC6L,cAAc;cAAEC,MAAM,EAAE;gBAAE0C,CAAC,EAAEJ,WAAW;gBAAEK,CAAC,EAAEH,UAAU;gBAAE1J,KAAK,EAAEyJ,YAAY;gBAAExJ,MAAM,EAAE0J;cAAc,CAAC;cAAEnD,SAAS,EAAEA,SAAS;cAAEW,IAAI,EAAEA,IAAI;cAAEC,mBAAmB,EAAE,gBAAgB;cAAET,OAAO,EAAE4T,iBAAiB,CAACqB,OAAO;cAAEhV,WAAW,EAAE2T,iBAAiB,CAACsB,WAAW;cAAEnV,SAAS,EAAE6T,iBAAiB,CAACuB,SAAS;cAAEzU,aAAa,EAAEkT,iBAAiB,CAACwB;YAC7W,CAAC;UACL,CAAC,MACI;YACD7V,KAAK,GAAG;cACJ3G,EAAE,EAAE,MAAM,GAAG,IAAI,CAACnE,aAAa,CAAC6L,cAAc;cAAEC,MAAM,EAAE;gBAAE0C,CAAC,EAAEJ,WAAW;gBAAEK,CAAC,EAAEH,UAAU;gBAAE1J,KAAK,EAAEyJ,YAAY;gBAAExJ,MAAM,EAAE0J;cAAc,CAAC;cAAEnD,SAAS,EAAEA,SAAS;cAAEW,IAAI,EAAEA,IAAI;cAAEC,mBAAmB,EAAE,sBAAsB;cAAET,OAAO,EAAE4T,iBAAiB,CAACqB,OAAO;cAAEhV,WAAW,EAAE2T,iBAAiB,CAACsB,WAAW;cAAEnV,SAAS,EAAE6T,iBAAiB,CAACuB,SAAS;cAAEzU,aAAa,EAAEkT,iBAAiB,CAACwB,aAAa,GAAGxB,iBAAiB,CAACwB,aAAa,GAAG;YACra,CAAC;UACL;QACJ;QACA,IAAI,CAAC5gB,SAAS,CAAC6Q,GAAG,CAAC9F,KAAK,CAAC;QACzB;QACA,IAAIsU,OAAO,GAAGpb,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,oBAAoB,GAAGgb,iBAAiB,CAAC/T,SAAS,CAAC;QACrH;QACA,IAAI,CAACrL,SAAS,CAACsf,aAAa,CAACD,OAAO,EAAEtU,KAAK,CAACM,SAAS,CAAC;QACtD,IAAI,CAACmU,kBAAkB,CAACzU,KAAK,CAACM,SAAS,EAAEN,KAAK,CAAC;QAC/C,IAAI,CAAC9K,aAAa,CAACkL,qBAAqB,GAAG,IAAI;QAC/C,IAAI,CAAClL,aAAa,CAAC6L,cAAc,EAAE;QACnC;QACA,IAAI,IAAI,CAAC7L,aAAa,CAAC4gB,cAAc,IAAI,IAAI,CAAC5gB,aAAa,CAAC4gB,cAAc,CAACC,iBAAiB,IAAI,IAAI,CAAC9gB,SAAS,CAAC0d,mBAAmB,EAAE;UAChI;UACA,IAAI,CAACzd,aAAa,CAAC4gB,cAAc,CAACC,iBAAiB,CAACC,WAAW,CAAC,CAAC,IAAI,CAAC/gB,SAAS,CAACwG,SAAS,CAACC,WAAW,CAAC,oBAAoB,CAAC,CAAC,EAAE,IAAI,CAAC;UACnI;UACA,IAAI,CAACxG,aAAa,CAAC4gB,cAAc,CAACC,iBAAiB,CAACC,WAAW,CAAC,CAAC,IAAI,CAAC/gB,SAAS,CAACwG,SAAS,CAACC,WAAW,CAAC,aAAa,CAAC,CAAC,EAAE,IAAI,CAAC;QAChI;MACJ;IACJ;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;EACI;EACA1G,SAAS,CAAC2F,SAAS,CAAC8Z,kBAAkB,GAAG,UAAUwB,UAAU,EAAE7D,WAAW,EAAE;IACxE;IACA,IAAI,CAACnd,SAAS,CAACiL,UAAU,CAACgW,SAAS,CAAC9D,WAAW,CAAC9R,SAAS,GAAG8R,WAAW,CAAC9R,SAAS,GAAG8R,WAAW,CAACrL,SAAS,EAAE,IAAI,EAAEqL,WAAW,EAAE,UAAU,EAAE,EAAE,EAAEA,WAAW,EAAEA,WAAW,CAAC;IACvK,IAAIlS,UAAU,GAAG,IAAI;IACrB,IAAI0D,IAAI;IACR,IAAIE,GAAG;IACP,IAAIhK,KAAK;IACT,IAAIC,MAAM;IACV,IAAIuG,SAAS;IACb,IAAI6C,SAAS,GAAG,IAAI,CAACjO,aAAa,CAACkO,aAAa,CAAC,CAAC;IAClD,IAAIgP,WAAW,CAACpR,MAAM,EAAE;MACpB4C,IAAI,GAAGwO,WAAW,CAACpR,MAAM,CAAC4C,IAAI,GAAGwO,WAAW,CAACpR,MAAM,CAAC4C,IAAI,GAAGwO,WAAW,CAACpR,MAAM,CAAC0C,CAAC;MAC/EI,GAAG,GAAGsO,WAAW,CAACpR,MAAM,CAAC8C,GAAG,GAAGsO,WAAW,CAACpR,MAAM,CAAC8C,GAAG,GAAGsO,WAAW,CAACpR,MAAM,CAAC2C,CAAC;MAC5E7J,KAAK,GAAGsY,WAAW,CAACpR,MAAM,CAAClH,KAAK;MAChCC,MAAM,GAAGqY,WAAW,CAACpR,MAAM,CAACjH,MAAM;MAClCuG,SAAS,GAAG8R,WAAW,CAAC9R,SAAS;IACrC,CAAC,MACI;MACDsD,IAAI,GAAGwO,WAAW,CAACiD,MAAM,CAACzR,IAAI,GAAGwO,WAAW,CAACiD,MAAM,CAACzR,IAAI,GAAGwO,WAAW,CAACiD,MAAM,CAAC3R,CAAC;MAC/EI,GAAG,GAAGsO,WAAW,CAACiD,MAAM,CAACvR,GAAG,GAAGsO,WAAW,CAACiD,MAAM,CAACvR,GAAG,GAAGsO,WAAW,CAACiD,MAAM,CAAC1R,CAAC;MAC5E7J,KAAK,GAAGsY,WAAW,CAAC5N,UAAU,CAACC,KAAK;MACpC1K,MAAM,GAAGqY,WAAW,CAAC5N,UAAU,CAACG,MAAM;MACtCrE,SAAS,GAAG8R,WAAW,CAACrL,SAAS;IACrC;IACA,IAAIqL,WAAW,CAAC+D,OAAO,IAAI/D,WAAW,CAAC+D,OAAO,CAACnV,MAAM,EAAE;MACnD4C,IAAI,GAAGwO,WAAW,CAAC+D,OAAO,CAACnV,MAAM,CAAC4C,IAAI;MACtCE,GAAG,GAAGsO,WAAW,CAAC+D,OAAO,CAACnV,MAAM,CAAC8C,GAAG;IACxC;IACA,IAAIsO,WAAW,CAAClR,mBAAmB,KAAK,eAAe,IAAIkR,WAAW,CAAC+D,OAAO,IAAI/D,WAAW,CAAC+D,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,EAAE;MAC/GxS,IAAI,GAAGA,IAAI,GAAGwO,WAAW,CAAC+D,OAAO,CAACE,KAAK,CAAC3S,CAAC,IAAI,IAAI,CAAClM,wBAAwB,GAAI,IAAI,CAACD,uBAAuB,IAAI4L,SAAS,GAAIA,SAAS,GAAG,IAAI,CAAC3L,wBAAyB,CAAE,CAAC;MACxKsM,GAAG,GAAGA,GAAG,IAAKsO,WAAW,CAAC+D,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACpV,MAAM,CAAC2C,CAAC,GAAGG,GAAG,GAAI,CAACsO,WAAW,CAAC+D,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACpV,MAAM,CAAC2C,CAAC,GAAGG,GAAG,IAAI,CAAC,CAAC,GAAGsO,WAAW,CAAC+D,OAAO,CAACE,KAAK,CAAC1S,CAAC,GAAI,IAAI,CAACpM,uBAAuB,GAAG4L,SAAU;IACpM;IACAjD,UAAU,GAAG;MACT7G,EAAE,EAAE+Y,WAAW,CAAC/Y,EAAE,GAAG+Y,WAAW,CAAC/Y,EAAE,GAAG,IAAI;MAAE2H,MAAM,EAAE;QAAE4C,IAAI,EAAEA,IAAI;QAAEE,GAAG,EAAEA,GAAG;QAAEhK,KAAK,EAAEA,KAAK;QAAEC,MAAM,EAAEA;MAAO,CAAC;MAAEmH,mBAAmB,EAAEkR,WAAW,CAAClR,mBAAmB,GAAGkR,WAAW,CAAClR,mBAAmB,GAAG,KAAK;MAAET,OAAO,EAAE2R,WAAW,CAAC3R,OAAO,GAAG2R,WAAW,CAAC3R,OAAO,GAAG,CAAC;MAAED,SAAS,EAAE4R,WAAW,CAAC5R,SAAS,GAAG4R,WAAW,CAAC5R,SAAS,GAAG,CAAC;MAAEE,WAAW,EAAE0R,WAAW,CAAC1R,WAAW,GAAG0R,WAAW,CAAC1R,WAAW,GAAG,IAAI;MAAEJ,SAAS,EAAEA,SAAS;MAAEW,IAAI,EAAEmR,WAAW,CAACnR,IAAI,GAAGmR,WAAW,CAACnR,IAAI,GAAGmR,WAAW,CAACkE,KAAK;MAAE3V,QAAQ,EAAEyR,WAAW,CAACzR,QAAQ,GAAGyR,WAAW,CAACzR,QAAQ,GAAG,IAAI;MAAEC,UAAU,EAAEwR,WAAW,CAACxR,UAAU,GAAGwR,WAAW,CAACxR,UAAU,GAAG,IAAI;MAAEO,aAAa,EAAEiR,WAAW,CAACjR,aAAa,GAAGiR,WAAW,CAACjR,aAAa,GAAGiR,WAAW,CAACtL;IACvrB,CAAC;IACD;IACA,IAAIyP,WAAW,GAAGnR,IAAI,CAACoR,KAAK,CAAC5P,IAAI,CAACqM,SAAS,CAAChB,MAAM,CAACC,cAAc,CAAC,CAAC3P,MAAM,GAAG,IAAI,CAAC;IACjF;IACA,IAAI8R,iBAAiB,GAAGjP,IAAI,CAACoR,KAAK,CAAC5P,IAAI,CAACqM,SAAS,CAAC/S,UAAU,CAAC,CAACqC,MAAM,GAAG,IAAI,CAAC;IAC5E,IAAKgU,WAAW,GAAGlC,iBAAiB,GAAI,IAAI,EAAE;MAC1C,IAAI,CAACnf,aAAa,CAAC4c,eAAe,GAAG,IAAI;MACzC,IAAI,CAAC7c,SAAS,CAAC2e,gBAAgB,CAAC6C,sBAAsB,CAAC,CAAC;MACxD,IAAI,CAAE,IAAI,CAACvhB,aAAa,CAACwhB,mBAAoB,EAAE;QAC3C,IAAI,CAACzhB,SAAS,CAAC4H,gBAAgB,CAAC8Z,qBAAqB,CAAC,CAAC;MAC3D;IACJ;IACA;IACA,IAAI9E,WAAW,GAAGI,MAAM,CAACC,cAAc,CAACC,OAAO,CAAC,IAAI,CAACjd,aAAa,CAAC8c,UAAU,GAAG,mBAAmB,CAAC;IACpG,IAAI4E,KAAK,GAAG,CAAC;IACb,IAAI,CAAC/E,WAAW,EAAE;MACd,IAAI,CAACgF,yBAAyB,CAAC3W,UAAU,EAAE+V,UAAU,CAAC;MACtD,IAAIa,eAAe,GAAG;QAAExW,SAAS,EAAE2V,UAAU;QAAE7D,WAAW,EAAE;MAAG,CAAC;MAChE0E,eAAe,CAAC1E,WAAW,CAACpL,IAAI,CAAC9G,UAAU,CAAC;MAC5C0W,KAAK,GAAGE,eAAe,CAAC1E,WAAW,CAACjC,OAAO,CAACjQ,UAAU,CAAC;MACvD,IAAIqS,oBAAoB,GAAG,EAAE;MAC7BA,oBAAoB,CAACvL,IAAI,CAAC8P,eAAe,CAAC;MAC1C,IAAIC,qBAAqB,GAAGnQ,IAAI,CAACqM,SAAS,CAACV,oBAAoB,CAAC;MAChE,IAAI,IAAI,CAACrd,aAAa,CAAC4c,eAAe,EAAE;QACpC,IAAI,CAAC5c,aAAa,CAAC6c,iBAAiB,CAAC,IAAI,CAAC7c,aAAa,CAAC8c,UAAU,GAAG,mBAAmB,CAAC,GAAG+E,qBAAqB;MACrH,CAAC,MACI;QACD9E,MAAM,CAACC,cAAc,CAAC8E,OAAO,CAAC,IAAI,CAAC9hB,aAAa,CAAC8c,UAAU,GAAG,mBAAmB,EAAE+E,qBAAqB,CAAC;MAC7G;IACJ,CAAC,MACI;MACD,IAAI,CAACF,yBAAyB,CAAC3W,UAAU,EAAE+V,UAAU,CAAC;MACtD,IAAIgB,WAAW,GAAGrQ,IAAI,CAACC,KAAK,CAACgL,WAAW,CAAC;MACzCI,MAAM,CAACC,cAAc,CAACgF,UAAU,CAAC,IAAI,CAAChiB,aAAa,CAAC8c,UAAU,GAAG,mBAAmB,CAAC;MACrF,IAAImF,WAAW,GAAG,IAAI,CAACliB,SAAS,CAAC2e,gBAAgB,CAACwD,iBAAiB,CAACH,WAAW,EAAEhB,UAAU,CAAC;MAC5F,IAAI,CAAC7hB,iBAAiB,CAAC+iB,WAAW,CAAC,IAAIF,WAAW,CAAC7Q,QAAQ,CAAC+Q,WAAW,CAACzU,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE;QACtFuU,WAAW,CAAC7Q,QAAQ,CAAC+Q,WAAW,CAACzU,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC0P,WAAW,CAACpL,IAAI,CAAC9G,UAAU,CAAC;QAC9E0W,KAAK,GAAGK,WAAW,CAAC7Q,QAAQ,CAAC+Q,WAAW,CAACzU,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC0P,WAAW,CAACjC,OAAO,CAACjQ,UAAU,CAAC;MAC7F,CAAC,MACI;QACD,IAAImX,gBAAgB,GAAG;UAAE/W,SAAS,EAAE2V,UAAU;UAAE7D,WAAW,EAAE;QAAG,CAAC;QACjEiF,gBAAgB,CAACjF,WAAW,CAACpL,IAAI,CAAC9G,UAAU,CAAC;QAC7C0W,KAAK,GAAGS,gBAAgB,CAACjF,WAAW,CAACjC,OAAO,CAACjQ,UAAU,CAAC;QACxD+W,WAAW,CAACjQ,IAAI,CAACqQ,gBAAgB,CAAC;MACtC;MACA,IAAIN,qBAAqB,GAAGnQ,IAAI,CAACqM,SAAS,CAACgE,WAAW,CAAC;MACvD,IAAI,IAAI,CAAC/hB,aAAa,CAAC4c,eAAe,EAAE;QACpC,IAAI,CAAC5c,aAAa,CAAC6c,iBAAiB,CAAC,IAAI,CAAC7c,aAAa,CAAC8c,UAAU,GAAG,mBAAmB,CAAC,GAAG+E,qBAAqB;MACrH,CAAC,MACI;QACD9E,MAAM,CAACC,cAAc,CAAC8E,OAAO,CAAC,IAAI,CAAC9hB,aAAa,CAAC8c,UAAU,GAAG,mBAAmB,EAAE+E,qBAAqB,CAAC;MAC7G;IACJ;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;EACI;EACA/hB,SAAS,CAAC2F,SAAS,CAAC2c,yBAAyB,GAAG,UAAUC,QAAQ,EAAEtB,UAAU,EAAEuB,cAAc,EAAEC,iBAAiB,EAAE;IAC/G,IAAI,CAACviB,aAAa,CAACwiB,4BAA4B,CAAC,IAAI,CAAC;IACrD,IAAIC,kBAAkB,GAAG,IAAI;IAC7B,IAAIC,eAAe,GAAG,IAAI,CAACC,cAAc,CAAC5B,UAAU,EAAE,IAAI,CAAC;IAC3D,IAAI9S,SAAS,GAAG,IAAI,CAACjO,aAAa,CAACkO,aAAa,CAAC,CAAC;IAClD,IAAIwU,eAAe,IAAI,IAAI,IAAIJ,cAAc,EAAE;MAC3C,KAAK,IAAIvR,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG2R,eAAe,CAACrV,MAAM,EAAE0D,CAAC,EAAE,EAAE;QAC7C,IAAIuR,cAAc,CAACne,EAAE,KAAKue,eAAe,CAACxR,QAAQ,CAACH,CAAC,CAACvD,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACrJ,EAAE,EAAE;UACtE,IAAIke,QAAQ,KAAK,QAAQ,EAAE;YACvB,IAAIO,KAAK,GAAG,KAAK,CAAC;YAClB,IAAIlU,IAAI,GAAG,KAAK,CAAC;YACjB,IAAI4T,cAAc,CAACtW,mBAAmB,KAAK,eAAe,IAAIsW,cAAc,CAACrB,OAAO,IAAIqB,cAAc,CAACrB,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,EAAE;cACxH0B,KAAK,GAAGN,cAAc,CAACrB,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACpV,MAAM,CAAC2C,CAAC;cACnDC,IAAI,GAAG4T,cAAc,CAACrB,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACpV,MAAM,CAAC0C,CAAC,GAAG8T,cAAc,CAACrB,OAAO,CAACE,KAAK,CAAC3S,CAAC,IAAI,IAAI,CAAClM,wBAAwB,GAAI,IAAI,CAACD,uBAAuB,IAAI4L,SAAS,GAAIA,SAAS,GAAG,IAAI,CAAC3L,wBAAyB,CAAE,CAAC;cAClNsgB,KAAK,GAAGA,KAAK,IAAKN,cAAc,CAACrB,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACpV,MAAM,CAAC2C,CAAC,GAAGmU,KAAK,GAAI,CAACN,cAAc,CAACrB,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACpV,MAAM,CAAC2C,CAAC,GAAGmU,KAAK,IAAI,CAAC,CAAC,GAAGN,cAAc,CAACrB,OAAO,CAACE,KAAK,CAAC1S,CAAC,GAAI,IAAI,CAACpM,uBAAuB,GAAG4L,SAAU;cACjNyU,eAAe,CAACxR,QAAQ,CAACH,CAAC,CAACvD,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC1B,MAAM,GAAG;gBAAE4C,IAAI,EAAEA,IAAI;gBAAEE,GAAG,EAAEgU,KAAK;gBAAEhe,KAAK,EAAE0d,cAAc,CAACxW,MAAM,CAAClH,KAAK;gBAAEC,MAAM,EAAEyd,cAAc,CAACxW,MAAM,CAACjH;cAAO,CAAC;YAC7J,CAAC,MACI;cACD6d,eAAe,CAACxR,QAAQ,CAACH,CAAC,CAACvD,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC1B,MAAM,GAAG;gBAAE4C,IAAI,EAAE4T,cAAc,CAACrB,OAAO,CAACnV,MAAM,CAAC4C,IAAI;gBAAEE,GAAG,EAAE0T,cAAc,CAACrB,OAAO,CAACnV,MAAM,CAAC8C,GAAG;gBAAEhK,KAAK,EAAE0d,cAAc,CAACxW,MAAM,CAAClH,KAAK;gBAAEC,MAAM,EAAEyd,cAAc,CAACxW,MAAM,CAACjH;cAAO,CAAC;YACvN;YACA;YACA6d,eAAe,CAACxR,QAAQ,CAACH,CAAC,CAACvD,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC/B,QAAQ,GAAG6W,cAAc,CAAC7W,QAAQ;UAClF,CAAC,MACI,IAAI4W,QAAQ,KAAK,QAAQ,EAAE;YAC5BK,eAAe,CAACxR,QAAQ,CAACH,CAAC,CAACvD,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAChC,WAAW,GAAG8W,cAAc,CAACrB,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACzc,KAAK,CAAC+G,WAAW;UAClH,CAAC,MACI,IAAI6W,QAAQ,KAAK,SAAS,EAAE;YAC7BK,eAAe,CAACxR,QAAQ,CAACH,CAAC,CAACvD,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACjC,OAAO,GAAG+W,cAAc,CAACrB,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACzc,KAAK,CAAC8G,OAAO;UAC1G,CAAC,MACI,IAAI8W,QAAQ,KAAK,WAAW,EAAE;YAC/BK,eAAe,CAACxR,QAAQ,CAACH,CAAC,CAACvD,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAClC,SAAS,GAAGgX,cAAc,CAACrB,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACzc,KAAK,CAACoe,WAAW;UAChH,CAAC,MACI,IAAIR,QAAQ,KAAK,QAAQ,EAAE;YAC5B,IAAI,CAACS,yBAAyB,CAACJ,eAAe,CAACxR,QAAQ,CAACH,CAAC,CAACvD,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;YAC3EiV,kBAAkB,GAAGC,eAAe,CAACK,MAAM,CAAChS,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;YACpD;UACJ;UACA,IAAIsR,QAAQ,IAAIA,QAAQ,KAAK,QAAQ,EAAE;YACnC,IAAI,CAACV,yBAAyB,CAACe,eAAe,CAACxR,QAAQ,CAACH,CAAC,CAACvD,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAEuT,UAAU,CAAC;UAC3F;UACA,IAAIwB,iBAAiB,EAAE;YACnBG,eAAe,CAACxR,QAAQ,CAACH,CAAC,CAACvD,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACjC,OAAO,GAAG+W,cAAc,CAACrB,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACzc,KAAK,CAAC8G,OAAO;YACtGmX,eAAe,CAACxR,QAAQ,CAACH,CAAC,CAACvD,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAChC,WAAW,GAAG8W,cAAc,CAACrB,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACzc,KAAK,CAAC+G,WAAW;YAC9GkX,eAAe,CAACxR,QAAQ,CAACH,CAAC,CAACvD,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAClC,SAAS,GAAGgX,cAAc,CAACrB,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACzc,KAAK,CAACoe,WAAW;YAC5G,IAAI,CAAClB,yBAAyB,CAACe,eAAe,CAACxR,QAAQ,CAACH,CAAC,CAACvD,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAEuT,UAAU,CAAC;YACvF;UACJ;QACJ;MACJ;MACA,IAAI,CAACiC,iBAAiB,CAACN,eAAe,EAAE3B,UAAU,CAAC;IACvD;IACA,OAAO0B,kBAAkB;EAC7B,CAAC;EACD;AACJ;AACA;AACA;AACA;EACI;EACA3iB,SAAS,CAAC2F,SAAS,CAACkc,yBAAyB,GAAG,UAAU3W,UAAU,EAAE+V,UAAU,EAAE;IAC9E;IACA,IAAIkC,iBAAiB,GAAG,IAAI,CAACC,wBAAwB,CAAClY,UAAU,CAAC;IACjE;IACA,IAAImY,gBAAgB,GAAG1jB,WAAW,CAACuL,UAAU,CAAC;IAC9CmY,gBAAgB,CAACC,YAAY,GAAGpY,UAAU,CAACiB,aAAa;IACxDkX,gBAAgB,CAACpC,UAAU,GAAGA,UAAU;IACxC,OAAOoC,gBAAgB,CAACE,SAAS;IACjC,IAAIrY,UAAU,CAAC7G,EAAE,EAAE;MACfgf,gBAAgB,CAACG,SAAS,GAAGtY,UAAU,CAAC7G,EAAE;MAC1C,OAAOgf,gBAAgB,CAAChf,EAAE;IAC9B;IACA,IAAI8e,iBAAiB,CAACM,UAAU,EAAE;MAC9B,IAAI,CAACxjB,SAAS,CAACyjB,mBAAmB,CAACT,MAAM,CAACE,iBAAiB,CAAC3N,QAAQ,EAAE,CAAC,EAAE6N,gBAAgB,CAAC;IAC9F,CAAC,MACI;MACD,IAAI,CAACpjB,SAAS,CAACyjB,mBAAmB,CAAC1R,IAAI,CAACqR,gBAAgB,CAAC;IAC7D;EACJ,CAAC;EACD;EACArjB,SAAS,CAAC2F,SAAS,CAACyd,wBAAwB,GAAG,UAAUvK,SAAS,EAAE;IAChE;IACA,IAAI8K,WAAW,GAAG,IAAI,CAAC1jB,SAAS,CAACyjB,mBAAmB;IACpD,IAAIC,WAAW,IAAI9K,SAAS,EAAE;MAC1B,KAAK,IAAI5H,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG0S,WAAW,CAACpW,MAAM,EAAE0D,CAAC,EAAE,EAAE;QACzC,IAAI0S,WAAW,CAACvS,QAAQ,CAACH,CAAC,CAACvD,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC4V,YAAY,KAAKzK,SAAS,CAAC1M,aAAa,EAAE;UAClF,IAAI,CAAClM,SAAS,CAACyjB,mBAAmB,CAACT,MAAM,CAAChS,CAAC,EAAE,CAAC,CAAC;UAC/C,OAAO;YAAEwS,UAAU,EAAE,IAAI;YAAEjO,QAAQ,EAAEvE;UAAE,CAAC;QAC5C;MACJ;IACJ;IACA,OAAO;MAAEwS,UAAU,EAAE,KAAK;MAAEjO,QAAQ,EAAE;IAAK,CAAC;EAChD,CAAC;EACD;AACJ;AACA;AACA;EACI;EACAxV,SAAS,CAAC2F,SAAS,CAACqd,yBAAyB,GAAG,UAAUnK,SAAS,EAAE;IACjE;IACA,IAAI8K,WAAW,GAAG,IAAI,CAAC1jB,SAAS,CAACyjB,mBAAmB;IACpD,IAAIC,WAAW,IAAI9K,SAAS,EAAE;MAC1B,KAAK,IAAI5H,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG0S,WAAW,CAACpW,MAAM,EAAE0D,CAAC,EAAE,EAAE;QACzC,IAAI0S,WAAW,CAACvS,QAAQ,CAACH,CAAC,CAACvD,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC4V,YAAY,KAAKzK,SAAS,CAAC1M,aAAa,EAAE;UAClF,IAAI,CAAClM,SAAS,CAACyjB,mBAAmB,CAACT,MAAM,CAAChS,CAAC,EAAE,CAAC,CAAC;UAC/C;QACJ;MACJ;IACJ;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;EACI;EACAjR,SAAS,CAAC2F,SAAS,CAACie,eAAe,GAAG,UAAU3C,UAAU,EAAEpI,SAAS,EAAE;IACnE,IAAIA,SAAS,EAAE;MACX,IAAI,CAACgJ,yBAAyB,CAAChJ,SAAS,EAAEoI,UAAU,CAAC;MACrD;MACA,IAAI4C,cAAc,GAAG,IAAI,CAAChB,cAAc,CAAC5B,UAAU,EAAE,IAAI,CAAC;MAC1D,IAAI4C,cAAc,EAAE;QAChBA,cAAc,CAAC7R,IAAI,CAAC6G,SAAS,CAAC;MAClC;MACA,IAAI,CAACqK,iBAAiB,CAACW,cAAc,EAAE5C,UAAU,CAAC;IACtD;EACJ,CAAC;EACD;EACAjhB,SAAS,CAAC2F,SAAS,CAACkd,cAAc,GAAG,UAAUvX,SAAS,EAAEwY,gBAAgB,EAAE;IACxE;IACA,IAAIvG,oBAAoB;IACxB;IACA,IAAIV,WAAW,GAAG,IAAI;IACtB,IAAI,IAAI,CAAC3c,aAAa,CAAC4c,eAAe,EAAE;MACpCD,WAAW,GAAG,IAAI,CAAC3c,aAAa,CAAC6c,iBAAiB,CAAC,IAAI,CAAC7c,aAAa,CAAC8c,UAAU,GAAG,mBAAmB,CAAC;IAC3G,CAAC,MACI;MACDH,WAAW,GAAGI,MAAM,CAACC,cAAc,CAACC,OAAO,CAAC,IAAI,CAACjd,aAAa,CAAC8c,UAAU,GAAG,mBAAmB,CAAC;IACpG;IACA,IAAIH,WAAW,EAAE;MACb,IAAIoF,WAAW,GAAGrQ,IAAI,CAACC,KAAK,CAACgL,WAAW,CAAC;MACzC,IAAI+E,KAAK,GAAG,IAAI,CAAC3hB,SAAS,CAAC2e,gBAAgB,CAACwD,iBAAiB,CAACH,WAAW,EAAE3W,SAAS,CAAC;MACrF,IAAI,CAAClM,iBAAiB,CAACwiB,KAAK,CAAC,IAAIK,WAAW,CAAC7Q,QAAQ,CAACwQ,KAAK,CAAClU,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE;QAC1E6P,oBAAoB,GAAG0E,WAAW,CAAC7Q,QAAQ,CAACwQ,KAAK,CAAClU,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC0P,WAAW;MAClF,CAAC,MACI;QACDG,oBAAoB,GAAGuG,gBAAgB;MAC3C;IACJ,CAAC,MACI;MACDvG,oBAAoB,GAAGuG,gBAAgB;IAC3C;IACA,OAAOvG,oBAAoB;EAC/B,CAAC;EACDvd,SAAS,CAAC2F,SAAS,CAACud,iBAAiB,GAAG,UAAUN,eAAe,EAAE3B,UAAU,EAAE;IAC3E;IACA,IAAIpE,WAAW,GAAG,IAAI;IACtB,IAAI,IAAI,CAAC3c,aAAa,CAAC4c,eAAe,EAAE;MACpCD,WAAW,GAAG,IAAI,CAAC3c,aAAa,CAAC6c,iBAAiB,CAAC,IAAI,CAAC7c,aAAa,CAAC8c,UAAU,GAAG,mBAAmB,CAAC;IAC3G,CAAC,MACI;MACDH,WAAW,GAAGI,MAAM,CAACC,cAAc,CAACC,OAAO,CAAC,IAAI,CAACjd,aAAa,CAAC8c,UAAU,GAAG,mBAAmB,CAAC;IACpG;IACA,IAAIH,WAAW,EAAE;MACb,IAAIoF,WAAW,GAAGrQ,IAAI,CAACC,KAAK,CAACgL,WAAW,CAAC;MACzCI,MAAM,CAACC,cAAc,CAACgF,UAAU,CAAC,IAAI,CAAChiB,aAAa,CAAC8c,UAAU,GAAG,mBAAmB,CAAC;MACrF,IAAI4E,KAAK,GAAG,IAAI,CAAC3hB,SAAS,CAAC2e,gBAAgB,CAACwD,iBAAiB,CAACH,WAAW,EAAEhB,UAAU,CAAC;MACtF,IAAIgB,WAAW,CAAC7Q,QAAQ,CAACwQ,KAAK,CAAClU,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE;QAC7CuU,WAAW,CAAC7Q,QAAQ,CAACwQ,KAAK,CAAClU,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC0P,WAAW,GAAGwF,eAAe;MAC7E;MACA,IAAIb,qBAAqB,GAAGnQ,IAAI,CAACqM,SAAS,CAACgE,WAAW,CAAC;MACvD,IAAI,IAAI,CAAC/hB,aAAa,CAAC4c,eAAe,EAAE;QACpC,IAAI,CAAC5c,aAAa,CAAC6c,iBAAiB,CAAC,IAAI,CAAC7c,aAAa,CAAC8c,UAAU,GAAG,mBAAmB,CAAC,GAAG+E,qBAAqB;MACrH,CAAC,MACI;QACD9E,MAAM,CAACC,cAAc,CAAC8E,OAAO,CAAC,IAAI,CAAC9hB,aAAa,CAAC8c,UAAU,GAAG,mBAAmB,EAAE+E,qBAAqB,CAAC;MAC7G;IACJ;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;EACI/hB,SAAS,CAAC2F,SAAS,CAACoe,mBAAmB,GAAG,UAAUC,MAAM,EAAE;IACxD,IAAIA,MAAM,EAAE;MACR,IAAI,CAACpe,oBAAoB,CAAC,CAAC;IAC/B;EACJ,CAAC;EACD;AACJ;AACA;AACA;EACI5F,SAAS,CAAC2F,SAAS,CAACse,iBAAiB,GAAG,YAAY;IAChD,IAAI,CAAC/jB,aAAa,CAACqG,oBAAoB,GAAG,IAAI;IAC9C,IAAI,CAACrG,aAAa,CAACsG,cAAc,GAAG,KAAK;IACzC,IAAI,CAACud,mBAAmB,CAAC,IAAI,CAAC;EAClC,CAAC;EACD;AACJ;AACA;AACA;EACI/jB,SAAS,CAAC2F,SAAS,CAACue,cAAc,GAAG,YAAY;IAC7C,IAAI,CAAChkB,aAAa,CAACqG,oBAAoB,GAAG,IAAI;IAC9C,IAAI,CAACrG,aAAa,CAACsG,cAAc,GAAG,IAAI;IACxC,IAAI,CAACud,mBAAmB,CAAC,IAAI,CAAC;EAClC,CAAC;EACD;AACJ;AACA;AACA;EACI;EACA/jB,SAAS,CAAC2F,SAAS,CAAC4J,mBAAmB,GAAG,UAAU4U,MAAM,EAAE;IACxD,OAAQA,MAAM,IAAI,EAAE,GAAG,EAAE,CAAC;EAC9B,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;EACI;EACAnkB,SAAS,CAAC2F,SAAS,CAACye,0BAA0B,GAAG,UAAUvL,SAAS,EAAEvN,SAAS,EAAEsU,QAAQ,EAAE;IACvF,IAAI5U,KAAK;IACT;IACA,IAAI6N,SAAS,EAAE;MACX;MACA,IAAI7M,MAAM,GAAG6M,SAAS,CAACwH,MAAM;MAC7B,IAAI/R,WAAW,GAAGtC,MAAM,CAACsU,CAAC;MAC1B,IAAI9R,UAAU,GAAGxC,MAAM,CAACuU,CAAC;MACzB,IAAIhS,YAAY,GAAGvC,MAAM,CAACyD,KAAK;MAC/B,IAAIhB,aAAa,GAAGzC,MAAM,CAAC2D,MAAM;MACjC;MACA,IAAI1D,IAAI,GAAG4M,SAAS,CAACkH,QAAQ;MAC7B,IAAIH,QAAQ,EAAE;QACV3T,IAAI,GAAGxM,aAAa,CAACmS,IAAI,CAACC,KAAK,CAACgH,SAAS,CAACkH,QAAQ,CAAC,CAAC;MACxD;MACA/U,KAAK,GAAG;QACJ;QACA3G,EAAE,EAAE,MAAM,GAAGwU,SAAS,CAACgI,aAAa;QAAE7U,MAAM,EAAE;UAAE0C,CAAC,EAAEJ,WAAW;UAAEK,CAAC,EAAEH,UAAU;UAAE1J,KAAK,EAAEyJ,YAAY;UAAExJ,MAAM,EAAE0J;QAAc,CAAC;QAAEnD,SAAS,EAAEA,SAAS;QAAEW,IAAI,EAAEA,IAAI;QAC7JC,mBAAmB,EAAE,sBAAsB;QAAET,OAAO,EAAEoN,SAAS,CAAC6H,OAAO;QAAEhV,WAAW,EAAEmN,SAAS,CAAC8H,WAAW;QAAEnV,SAAS,EAAEqN,SAAS,CAAC+H,SAAS;QAAEzU,aAAa,EAAE0M,SAAS,CAACgI;MAC1K,CAAC;MACD,OAAO7V,KAAK;IAChB;EACJ,CAAC;EACD;AACJ;AACA;AACA;EACIhL,SAAS,CAAC2F,SAAS,CAAC2B,OAAO,GAAG,YAAY;IACtC2V,MAAM,CAACC,cAAc,CAACgF,UAAU,CAAC,mBAAmB,CAAC;IACrD;IACA,IAAI7K,SAAS,GAAGnT,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClE,SAAS,CAACmE,OAAO,CAACC,EAAE,GAAG,cAAc,CAAC;IACnF,IAAIgT,SAAS,EAAE;MACXA,SAAS,CAACgN,mBAAmB,CAAC,QAAQ,EAAE,IAAI,CAAChhB,aAAa,CAAC;MAC3D,IAAIgU,SAAS,CAAC1P,aAAa,EACvB0P,SAAS,CAAC1P,aAAa,CAACD,WAAW,CAAC2P,SAAS,CAAC;IACtD;IACA,IAAI,IAAI,CAAC1Q,eAAe,EACpB,IAAI,CAACA,eAAe,CAACW,OAAO,CAAC,CAAC;EACtC,CAAC;EACD,OAAOtH,SAAS;AACpB,CAAC,CAAC,CAAE;AACJ,SAASA,SAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}