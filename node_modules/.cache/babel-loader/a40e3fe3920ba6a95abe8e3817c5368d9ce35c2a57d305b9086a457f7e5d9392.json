{"ast":null,"code":"import { EventHandler, closest, Browser, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { remove } from '@syncfusion/ej2-base';\nimport { ContextMenu as Menu } from '@syncfusion/ej2-navigations';\nimport { parentsUntil, applyBiggerTheme } from '../base/util';\nimport * as events from '../base/constant';\nimport { calculatePosition } from '@syncfusion/ej2-popups';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { Group } from '../actions/group';\nimport { Sort } from '../actions/sort';\nimport { Filter } from '../actions/filter';\nimport { Resize } from '../actions/resize';\nimport { ResponsiveDialogAction } from '../base/enum';\nimport * as literals from '../base/string-literals';\n/**\n * 'column menu module used to handle column menu actions'\n *\n * @hidden\n */\nvar ColumnMenu = /** @class */function () {\n  function ColumnMenu(parent, serviceLocator) {\n    this.defaultItems = {};\n    this.localeText = this.setLocaleKey();\n    this.disableItems = [];\n    this.hiddenItems = [];\n    this.isOpen = false;\n    // default class names\n    this.GROUP = 'e-icon-group';\n    this.UNGROUP = 'e-icon-ungroup';\n    this.ASCENDING = 'e-icon-ascending';\n    this.DESCENDING = 'e-icon-descending';\n    this.ROOT = 'e-columnmenu';\n    this.FILTER = 'e-icon-filter';\n    this.POP = 'e-filter-popup';\n    this.WRAP = 'e-col-menu';\n    this.COL_POP = 'e-colmenu-popup';\n    this.CHOOSER = '_chooser_';\n    this.parent = parent;\n    this.gridID = parent.element.id;\n    this.serviceLocator = serviceLocator;\n    this.addEventListener();\n    if (this.parent.enableAdaptiveUI) {\n      this.setFullScreenDialog();\n    }\n  }\n  ColumnMenu.prototype.wireEvents = function () {\n    if (!this.parent.enableAdaptiveUI) {\n      var elements = this.getColumnMenuHandlers();\n      for (var i = 0; i < elements.length; i++) {\n        EventHandler.add(elements[parseInt(i.toString(), 10)], 'mousedown', this.columnMenuHandlerDown, this);\n      }\n    }\n  };\n  ColumnMenu.prototype.unwireEvents = function () {\n    if (!this.parent.enableAdaptiveUI) {\n      var elements = this.getColumnMenuHandlers();\n      for (var i = 0; i < elements.length; i++) {\n        EventHandler.remove(elements[parseInt(i.toString(), 10)], 'mousedown', this.columnMenuHandlerDown);\n      }\n    }\n  };\n  ColumnMenu.prototype.setFullScreenDialog = function () {\n    if (this.serviceLocator) {\n      this.serviceLocator.registerAdaptiveService(this, this.parent.enableAdaptiveUI, ResponsiveDialogAction.isColMenu);\n    }\n  };\n  /**\n   * To destroy the resize\n   *\n   * @returns {void}\n   * @hidden\n   */\n  ColumnMenu.prototype.destroy = function () {\n    var gridElement = this.parent.element;\n    if (!gridElement.querySelector('.' + literals.gridContent) && !gridElement.querySelector('.' + literals.gridHeader) || !gridElement) {\n      return;\n    }\n    if (this.columnMenu) {\n      this.columnMenu.destroy();\n    }\n    this.removeEventListener();\n    this.unwireFilterEvents();\n    this.unwireEvents();\n    if (!this.parent.enableAdaptiveUI && this.element.parentNode) {\n      remove(this.element);\n    }\n  };\n  ColumnMenu.prototype.columnMenuHandlerClick = function (e) {\n    if (e.target.classList.contains('e-columnmenu')) {\n      if (this.parent.enableAdaptiveUI) {\n        this.headerCell = this.getHeaderCell(e);\n        var col = this.getColumn();\n        this.responsiveDialogRenderer.isCustomDialog = true;\n        this.parent.notify(events.renderResponsiveChangeAction, {\n          action: 4\n        });\n        this.parent.notify(events.filterOpen, {\n          col: col,\n          target: e.target,\n          isClose: null,\n          id: null\n        });\n        this.responsiveDialogRenderer.showResponsiveDialog(null, col);\n      } else {\n        this.columnMenu.items = this.getItems();\n        this.columnMenu.dataBind();\n        if (this.isOpen && this.headerCell !== this.getHeaderCell(e) || document.querySelector('.e-grid-menu .e-menu-parent.e-ul')) {\n          this.columnMenu.close();\n          this.openColumnMenu(e);\n        } else if (!this.isOpen) {\n          this.openColumnMenu(e);\n        } else {\n          this.columnMenu.close();\n        }\n      }\n    }\n  };\n  /**\n   * @param {string} field - specifies the field name\n   * @returns {void}\n   * @hidden\n   */\n  ColumnMenu.prototype.openColumnMenuByField = function (field) {\n    this.openColumnMenu({\n      target: this.parent.getColumnHeaderByField(field).querySelector('.e-columnmenu')\n    });\n  };\n  ColumnMenu.prototype.afterFilterColumnMenuClose = function () {\n    if (this.columnMenu) {\n      this.columnMenu.items = this.getItems();\n      this.columnMenu.dataBind();\n      this.columnMenu.close();\n    }\n  };\n  ColumnMenu.prototype.openColumnMenu = function (e) {\n    var contentRect = this.parent.getContent().getClientRects()[0];\n    var headerEle = this.parent.getHeaderContent();\n    var headerElemCliRect = headerEle.getBoundingClientRect();\n    var pos = {\n      top: 0,\n      left: 0\n    };\n    this.element.style.cssText = 'display:block;visibility:hidden';\n    var elePos = this.element.getBoundingClientRect();\n    var gClient = this.parent.element.getBoundingClientRect();\n    this.element.style.cssText = 'display:none;visibility:visible';\n    this.headerCell = this.getHeaderCell(e);\n    if (this.parent.enableRtl) {\n      pos = this.parent.enableStickyHeader ? calculatePosition(this.headerCell, 'left', 'bottom', true) : calculatePosition(this.headerCell, 'left', 'bottom');\n    } else {\n      pos = this.parent.enableStickyHeader ? calculatePosition(this.headerCell, 'right', 'bottom', true) : calculatePosition(this.headerCell, 'right', 'bottom');\n      pos.left -= elePos.width;\n      if (headerEle.classList.contains('e-sticky')) {\n        pos.top = this.parent.element.offsetTop + headerElemCliRect.top + headerElemCliRect.height;\n        if (headerElemCliRect.top + headerElemCliRect.height > contentRect.top) {\n          pos.top += headerElemCliRect.top + headerElemCliRect.height - contentRect.top;\n        }\n      } else if (this.parent.enableStickyHeader) {\n        pos.top = this.parent.element.offsetTop + headerEle.offsetTop + headerElemCliRect.height;\n      }\n      if (pos.left + elePos.width + 1 >= gClient.right) {\n        pos.left -= 35;\n      }\n    }\n    this.columnMenu['open'](pos.top, pos.left);\n    if (e.preventDefault) {\n      e.preventDefault();\n    }\n    applyBiggerTheme(this.parent.element, this.columnMenu.element.parentElement);\n  };\n  ColumnMenu.prototype.columnMenuHandlerDown = function () {\n    this.isOpen = !(this.element.style.display === 'none' || this.element.style.display === '');\n  };\n  ColumnMenu.prototype.getColumnMenuHandlers = function () {\n    return [].slice.call(this.parent.getHeaderTable().getElementsByClassName(this.ROOT));\n  };\n  /**\n   * @returns {void}\n   * @hidden\n   */\n  ColumnMenu.prototype.addEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.parent.on(events.headerRefreshed, this.wireEvents, this);\n    this.parent.on(events.uiUpdate, this.enableAfterRenderMenu, this);\n    this.parent.on(events.initialEnd, this.render, this);\n    if (this.isFilterItemAdded()) {\n      this.parent.on(events.filterDialogCreated, this.filterPosition, this);\n    }\n    this.parent.on(events.setFullScreenDialog, this.setFullScreenDialog, this);\n    this.parent.on(events.renderResponsiveChangeAction, this.renderResponsiveChangeAction, this);\n    this.parent.on(events.click, this.columnMenuHandlerClick, this);\n    this.parent.on(events.afterFilterColumnMenuClose, this.afterFilterColumnMenuClose, this);\n    this.parent.on(events.keyPressed, this.keyPressHandler, this);\n    this.parent.on(events.destroy, this.destroy, this);\n  };\n  /**\n   * @returns {void}\n   * @hidden\n   */\n  ColumnMenu.prototype.removeEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.parent.off(events.headerRefreshed, this.unwireEvents);\n    this.parent.off(events.uiUpdate, this.enableAfterRenderMenu);\n    this.parent.off(events.initialEnd, this.render);\n    if (this.isFilterItemAdded()) {\n      this.parent.off(events.filterDialogCreated, this.filterPosition);\n    }\n    this.parent.off(events.setFullScreenDialog, this.setFullScreenDialog);\n    this.parent.off(events.renderResponsiveChangeAction, this.renderResponsiveChangeAction);\n    this.parent.off(events.click, this.columnMenuHandlerClick);\n    this.parent.on(events.afterFilterColumnMenuClose, this.afterFilterColumnMenuClose);\n    this.parent.off(events.keyPressed, this.keyPressHandler);\n    this.parent.off(events.destroy, this.destroy);\n  };\n  ColumnMenu.prototype.keyPressHandler = function (e) {\n    var gObj = this.parent;\n    if (e.action === 'altDownArrow') {\n      var element = gObj.focusModule.currentInfo.element;\n      if (element && element.classList.contains('e-headercell')) {\n        var column = gObj.getColumnByUid(element.firstElementChild.getAttribute('e-mappinguid'));\n        this.openColumnMenuByField(column.field);\n      }\n    }\n  };\n  ColumnMenu.prototype.enableAfterRenderMenu = function (e) {\n    if (e.module === this.getModuleName() && e.enable) {\n      if (this.columnMenu) {\n        this.columnMenu.destroy();\n        remove(this.element);\n      }\n      if (!this.parent.enableAdaptiveUI) {\n        this.render();\n      }\n    }\n  };\n  ColumnMenu.prototype.render = function () {\n    if (this.parent.enableAdaptiveUI) {\n      return;\n    }\n    this.l10n = this.serviceLocator.getService('localization');\n    this.element = this.parent.createElement('ul', {\n      id: this.gridID + '_columnmenu',\n      className: 'e-colmenu'\n    });\n    this.element.setAttribute('aria-label', this.l10n.getConstant('ColumnMenuDialogARIA'));\n    this.parent.element.appendChild(this.element);\n    this.columnMenu = new Menu({\n      cssClass: this.parent.cssClass ? 'e-grid-menu' + ' ' + this.parent.cssClass : 'e-grid-menu',\n      enableRtl: this.parent.enableRtl,\n      enablePersistence: this.parent.enablePersistence,\n      locale: this.parent.locale,\n      items: this.getItems(),\n      select: this.columnMenuItemClick.bind(this),\n      beforeOpen: this.columnMenuBeforeOpen.bind(this),\n      onOpen: this.columnMenuOnOpen.bind(this),\n      onClose: this.columnMenuOnClose.bind(this),\n      beforeItemRender: this.beforeMenuItemRender.bind(this),\n      beforeClose: this.columnMenuBeforeClose.bind(this)\n    });\n    if (this.element && parentsUntil(this.element, 'e-popup')) {\n      this.element.classList.add(this.COL_POP);\n    }\n    this.columnMenu.appendTo(this.element);\n    this.wireFilterEvents();\n  };\n  ColumnMenu.prototype.wireFilterEvents = function () {\n    if (!Browser.isDevice && this.isFilterItemAdded()) {\n      EventHandler.add(this.element, 'mouseover', this.appendFilter, this);\n    }\n  };\n  ColumnMenu.prototype.unwireFilterEvents = function () {\n    if (!Browser.isDevice && this.isFilterItemAdded() && !this.parent.enableAdaptiveUI) {\n      EventHandler.remove(this.element, 'mouseover', this.appendFilter);\n    }\n  };\n  ColumnMenu.prototype.beforeMenuItemRender = function (args) {\n    var _a;\n    if (this.isChooserItem(args.item)) {\n      var field_1 = this.getKeyFromId(args.item.id, this.CHOOSER);\n      var column = this.parent.columnModel.filter(function (col) {\n        return col.field === field_1;\n      });\n      var check = createCheckBox(this.parent.createElement, false, {\n        label: args.item.text,\n        checked: column[0].visible\n      });\n      if (this.parent.enableRtl) {\n        check.classList.add('e-rtl');\n      }\n      if (this.parent.cssClass) {\n        if (this.parent.cssClass.indexOf(' ') !== -1) {\n          (_a = check.classList).add.apply(_a, this.parent.cssClass.split(' '));\n        } else {\n          check.classList.add(this.parent.cssClass);\n        }\n      }\n      args.element.innerHTML = '';\n      args.element.appendChild(check);\n    } else if (args.item.id && this.getKeyFromId(args.item.id) === 'Filter') {\n      args.element.appendChild(this.parent.createElement('span', {\n        className: 'e-icons e-caret'\n      }));\n      args.element.className += 'e-filter-item e-menu-caret-icon';\n    }\n  };\n  ColumnMenu.prototype.columnMenuBeforeClose = function (args) {\n    var colChooser = args.event ? closest(args.event.target, '.e-menu-item') : null;\n    if (!isNullOrUndefined(args.parentItem) && this.getKeyFromId(args.parentItem.id) === 'ColumnChooser' && colChooser && this.isChooserItem(colChooser)) {\n      args.cancel = true;\n    } else if (args.event && (closest(args.event.target, '.' + this.POP) || args.event.currentTarget && args.event.currentTarget.activeElement && parentsUntil(args.event.currentTarget.activeElement, 'e-filter-popup') || parentsUntil(args.event.target, 'e-popup') && parentsUntil(args.event.target, 'e-colmenu-popup') || parentsUntil(args.event.target, 'e-popup-wrapper')) && !Browser.isDevice) {\n      args.cancel = true;\n    } else if (args.event && args.event.target && args.event.target.classList.contains('e-filter-item') && args.event.key === 'Enter') {\n      args.cancel = true;\n    }\n  };\n  ColumnMenu.prototype.isChooserItem = function (item) {\n    return item.id && item.id.indexOf('_colmenu_') >= 0 && this.getKeyFromId(item.id, this.CHOOSER).indexOf('_colmenu_') === -1;\n  };\n  ColumnMenu.prototype.columnMenuBeforeOpen = function (args) {\n    args.column = this.targetColumn = this.getColumn();\n    this.parent.trigger(events.columnMenuOpen, args);\n    for (var _i = 0, _a = args.items; _i < _a.length; _i++) {\n      var item = _a[_i];\n      var key = this.getKeyFromId(item.id);\n      var dItem = this.defaultItems[\"\" + key];\n      if (this.getDefaultItems().indexOf(key) !== -1 && this.ensureDisabledStatus(key) && !dItem.hide) {\n        this.disableItems.push(item.text);\n      }\n      if (item.hide) {\n        this.hiddenItems.push(item.text);\n      }\n    }\n    this.columnMenu.enableItems(this.disableItems, false);\n    this.columnMenu.hideItems(this.hiddenItems);\n  };\n  ColumnMenu.prototype.columnMenuOnOpen = function (args) {\n    if (args.element.className === 'e-menu-parent e-ul ') {\n      if (args.element.offsetHeight > window.innerHeight || this.parent.element.offsetHeight > window.innerHeight) {\n        args.element.style.maxHeight = window.innerHeight * 0.8 + 'px';\n        args.element.style.overflowY = 'auto';\n        if (this.parent.enableStickyHeader) {\n          args.element.style.position = 'fixed';\n        }\n      }\n    }\n  };\n  ColumnMenu.prototype.ensureDisabledStatus = function (item) {\n    var status = false;\n    switch (item) {\n      case 'Group':\n        if (!this.parent.allowGrouping || this.parent.ensureModuleInjected(Group) && this.targetColumn && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) >= 0 || this.targetColumn && !this.targetColumn.allowGrouping) {\n          status = true;\n        }\n        break;\n      case 'AutoFitAll':\n      case 'AutoFit':\n        status = !this.parent.ensureModuleInjected(Resize);\n        break;\n      case 'Ungroup':\n        if (!this.parent.ensureModuleInjected(Group) || this.parent.ensureModuleInjected(Group) && this.targetColumn && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) < 0) {\n          status = true;\n        }\n        break;\n      case 'SortDescending':\n      case 'SortAscending':\n        if (this.parent.allowSorting && this.parent.ensureModuleInjected(Sort) && this.parent.sortSettings.columns.length > 0 && this.targetColumn && this.targetColumn.allowSorting) {\n          var sortColumns = this.parent.sortSettings.columns;\n          for (var i = 0; i < sortColumns.length; i++) {\n            if (sortColumns[parseInt(i.toString(), 10)].field === this.targetColumn.field && sortColumns[parseInt(i.toString(), 10)].direction.toLocaleLowerCase() === item.toLocaleLowerCase().replace('sort', '')) {\n              status = true;\n            }\n          }\n        } else if (!this.parent.allowSorting || !this.parent.ensureModuleInjected(Sort) || this.parent.allowSorting && this.targetColumn && !this.targetColumn.allowSorting) {\n          status = true;\n        }\n        break;\n      case 'Filter':\n        if (this.parent.allowFiltering && this.parent.filterSettings.type !== 'FilterBar' && this.parent.ensureModuleInjected(Filter) && this.targetColumn && this.targetColumn.allowFiltering) {\n          status = false;\n        } else if (this.parent.ensureModuleInjected(Filter) && this.parent.allowFiltering && this.targetColumn && (!this.targetColumn.allowFiltering || this.parent.filterSettings.type === 'FilterBar')) {\n          status = true;\n        }\n    }\n    return status;\n  };\n  ColumnMenu.prototype.columnMenuItemClick = function (args) {\n    var item = this.isChooserItem(args.item) ? 'ColumnChooser' : this.getKeyFromId(args.item.id);\n    switch (item) {\n      case 'AutoFit':\n        this.parent.autoFitColumns(this.targetColumn.field);\n        break;\n      case 'AutoFitAll':\n        this.parent.autoFitColumns([]);\n        break;\n      case 'Ungroup':\n        this.parent.ungroupColumn(this.targetColumn.field);\n        break;\n      case 'Group':\n        this.parent.groupColumn(this.targetColumn.field);\n        break;\n      case 'SortAscending':\n        this.parent.sortColumn(this.targetColumn.field, 'Ascending');\n        break;\n      case 'SortDescending':\n        this.parent.sortColumn(this.targetColumn.field, 'Descending');\n        break;\n      case 'ColumnChooser':\n        // eslint-disable-next-line no-case-declarations\n        var key = this.getKeyFromId(args.item.id, this.CHOOSER);\n        // eslint-disable-next-line no-case-declarations\n        var checkbox = args.element.querySelector('.e-checkbox-wrapper .e-frame');\n        if (checkbox && checkbox.classList.contains('e-check')) {\n          checkbox.classList.remove('e-check');\n          this.parent.hideColumns(key, 'field');\n        } else if (checkbox) {\n          this.parent.showColumns(key, 'field');\n          checkbox.classList.add('e-check');\n        }\n        break;\n      case 'Filter':\n        this.getFilter(args.element, args.item.id);\n        break;\n    }\n    args.column = this.targetColumn;\n    this.parent.trigger(events.columnMenuClick, args);\n  };\n  ColumnMenu.prototype.columnMenuOnClose = function (args) {\n    var parent = 'parentObj';\n    if (args.items.length > 0 && args.items[0][\"\" + parent] instanceof Menu) {\n      this.columnMenu.enableItems(this.disableItems, false);\n      this.disableItems = [];\n      this.columnMenu.showItems(this.hiddenItems);\n      this.hiddenItems = [];\n      if (this.isFilterPopupOpen()) {\n        this.getFilter(args.element, args.element.id, true);\n      }\n    }\n    this.parent.notify(events.restoreFocus, {});\n  };\n  ColumnMenu.prototype.getDefaultItems = function () {\n    return ['AutoFitAll', 'AutoFit', 'SortAscending', 'SortDescending', 'Group', 'Ungroup', 'ColumnChooser', 'Filter'];\n  };\n  ColumnMenu.prototype.getItems = function () {\n    var items = [];\n    var defultItems = this.parent.columnMenuItems ? this.parent.columnMenuItems : this.getDefault();\n    for (var _i = 0, defultItems_1 = defultItems; _i < defultItems_1.length; _i++) {\n      var item = defultItems_1[_i];\n      if (typeof item === 'string') {\n        if (item === 'ColumnChooser') {\n          var col = this.getDefaultItem(item);\n          col.items = this.createChooserItems();\n          items.push(col);\n        } else {\n          items.push(this.getDefaultItem(item));\n        }\n      } else {\n        items.push(item);\n      }\n    }\n    return items;\n  };\n  ColumnMenu.prototype.getDefaultItem = function (item) {\n    var menuItem = {};\n    switch (item) {\n      case 'SortAscending':\n        menuItem = {\n          iconCss: this.ASCENDING\n        };\n        break;\n      case 'SortDescending':\n        menuItem = {\n          iconCss: this.DESCENDING\n        };\n        break;\n      case 'Group':\n        menuItem = {\n          iconCss: this.GROUP\n        };\n        break;\n      case 'Ungroup':\n        menuItem = {\n          iconCss: this.UNGROUP\n        };\n        break;\n      case 'Filter':\n        menuItem = {\n          iconCss: this.FILTER\n        };\n        break;\n    }\n    this.defaultItems[\"\" + item] = {\n      text: this.getLocaleText(item),\n      id: this.generateID(item),\n      iconCss: menuItem.iconCss ? 'e-icons ' + menuItem.iconCss : null\n    };\n    return this.defaultItems[\"\" + item];\n  };\n  ColumnMenu.prototype.getLocaleText = function (item) {\n    return this.l10n.getConstant(this.localeText[\"\" + item]);\n  };\n  ColumnMenu.prototype.generateID = function (item, append) {\n    return this.gridID + '_colmenu_' + (append ? append + item : item);\n  };\n  ColumnMenu.prototype.getKeyFromId = function (id, append) {\n    return id.indexOf('_colmenu_') > 0 && id.replace(this.gridID + '_colmenu_' + (append ? append : ''), '');\n  };\n  /**\n   * @returns {HTMLElement} returns the HTMLElement\n   * @hidden\n   */\n  ColumnMenu.prototype.getColumnMenu = function () {\n    return this.element;\n  };\n  ColumnMenu.prototype.getModuleName = function () {\n    return 'columnMenu';\n  };\n  ColumnMenu.prototype.setLocaleKey = function () {\n    var localeKeys = {\n      'AutoFitAll': 'autoFitAll',\n      'AutoFit': 'autoFit',\n      'Group': 'Group',\n      'Ungroup': 'Ungroup',\n      'SortAscending': 'SortAscending',\n      'SortDescending': 'SortDescending',\n      'ColumnChooser': 'Columnchooser',\n      'Filter': 'FilterMenu'\n    };\n    return localeKeys;\n  };\n  ColumnMenu.prototype.getHeaderCell = function (e) {\n    return closest(e.target, 'th.e-headercell');\n  };\n  ColumnMenu.prototype.getColumn = function () {\n    if (this.headerCell) {\n      var uid = this.headerCell.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n      return this.parent.getColumnByUid(uid);\n    }\n    return null;\n  };\n  ColumnMenu.prototype.createChooserItems = function () {\n    var items = [];\n    for (var _i = 0, _a = this.parent.columnModel; _i < _a.length; _i++) {\n      var col = _a[_i];\n      if (col.showInColumnChooser && col.field) {\n        items.push({\n          id: this.generateID(col.field, this.CHOOSER),\n          text: col.headerText ? col.headerText : col.field\n        });\n      }\n    }\n    return items;\n  };\n  ColumnMenu.prototype.appendFilter = function (e) {\n    var filter = 'Filter';\n    if (!this.defaultItems[\"\" + filter]) {\n      return;\n    } else {\n      var key = this.defaultItems[\"\" + filter].id;\n      if (closest(e.target, '#' + key) && !this.isFilterPopupOpen()) {\n        this.getFilter(e.target, key);\n      } else if (!closest(e.target, '#' + key) && this.isFilterPopupOpen()) {\n        this.getFilter(e.target, key, true);\n      }\n    }\n  };\n  ColumnMenu.prototype.getFilter = function (target, id, isClose) {\n    var filterPopup = this.getFilterPop();\n    if (filterPopup) {\n      filterPopup.style.display = !Browser.isDevice && isClose ? 'none' : 'block';\n    } else {\n      this.parent.notify(events.filterOpen, {\n        col: this.targetColumn,\n        target: target,\n        isClose: isClose,\n        id: id\n      });\n    }\n  };\n  ColumnMenu.prototype.setPosition = function (li, ul) {\n    var gridPos = this.parent.element.getBoundingClientRect();\n    var liPos = li.getBoundingClientRect();\n    var left = liPos.left - gridPos.left;\n    var top = liPos.top - gridPos.top;\n    if (gridPos.height < top) {\n      top = top - ul.offsetHeight + liPos.height;\n    } else if (gridPos.height < top + ul.offsetHeight) {\n      top = gridPos.height - ul.offsetHeight;\n    }\n    if (window.innerHeight < ul.offsetHeight + top + gridPos.top) {\n      top = window.innerHeight - ul.offsetHeight - gridPos.top;\n    }\n    if (top + gridPos.top < 0) {\n      top = 0;\n    }\n    left += this.parent.enableRtl ? -ul.offsetWidth : liPos.width;\n    if (gridPos.width <= left + ul.offsetWidth) {\n      left -= liPos.width + ul.offsetWidth;\n      if (liPos.left < ul.offsetWidth) {\n        left = liPos.left + ul.offsetWidth / 2;\n      }\n    } else if (left < 0) {\n      left += ul.offsetWidth + liPos.width;\n    }\n    ul.style.top = top + 'px';\n    ul.style.left = left + 'px';\n  };\n  ColumnMenu.prototype.filterPosition = function () {\n    var filterPopup = this.getFilterPop();\n    if (this.parent.enableAdaptiveUI) {\n      return;\n    }\n    filterPopup.classList.add(this.WRAP);\n    if (!Browser.isDevice) {\n      var disp = filterPopup.style.display;\n      filterPopup.style.cssText += 'display:block;visibility:hidden';\n      var li = this.element.querySelector('.' + this.FILTER);\n      if (li) {\n        this.setPosition(li.parentElement, filterPopup);\n        filterPopup.style.cssText += 'display:' + disp + ';visibility:visible';\n      }\n    }\n  };\n  ColumnMenu.prototype.getDefault = function () {\n    var items = [];\n    if (this.parent.ensureModuleInjected(Resize)) {\n      items.push('AutoFitAll');\n      items.push('AutoFit');\n    }\n    if (this.parent.allowGrouping && this.parent.ensureModuleInjected(Group)) {\n      items.push('Group');\n      items.push('Ungroup');\n    }\n    if (this.parent.allowSorting && this.parent.ensureModuleInjected(Sort)) {\n      items.push('SortAscending');\n      items.push('SortDescending');\n    }\n    items.push('ColumnChooser');\n    if (this.parent.allowFiltering && this.parent.filterSettings.type !== 'FilterBar' && this.parent.ensureModuleInjected(Filter)) {\n      items.push('Filter');\n    }\n    return items;\n  };\n  ColumnMenu.prototype.isFilterPopupOpen = function () {\n    var filterPopup = this.getFilterPop();\n    return filterPopup && filterPopup.style.display !== 'none';\n  };\n  ColumnMenu.prototype.getFilterPop = function () {\n    if (this.targetColumn !== null && this.parent.filterSettings.type === 'Menu' && Browser.isDevice) {\n      return document.getElementById(this.targetColumn.uid + '-flmdlg');\n    }\n    return this.parent.element.querySelector('.' + this.POP);\n  };\n  ColumnMenu.prototype.isFilterItemAdded = function () {\n    return this.parent.columnMenuItems && this.parent.columnMenuItems.indexOf('Filter') >= 0 || !this.parent.columnMenuItems;\n  };\n  ColumnMenu.prototype.renderResponsiveChangeAction = function (args) {\n    this.responsiveDialogRenderer.action = args.action;\n  };\n  return ColumnMenu;\n}();\nexport { ColumnMenu };","map":{"version":3,"names":["EventHandler","closest","Browser","isNullOrUndefined","remove","ContextMenu","Menu","parentsUntil","applyBiggerTheme","events","calculatePosition","createCheckBox","Group","Sort","Filter","Resize","ResponsiveDialogAction","literals","ColumnMenu","parent","serviceLocator","defaultItems","localeText","setLocaleKey","disableItems","hiddenItems","isOpen","GROUP","UNGROUP","ASCENDING","DESCENDING","ROOT","FILTER","POP","WRAP","COL_POP","CHOOSER","gridID","element","id","addEventListener","enableAdaptiveUI","setFullScreenDialog","prototype","wireEvents","elements","getColumnMenuHandlers","i","length","add","parseInt","toString","columnMenuHandlerDown","unwireEvents","registerAdaptiveService","isColMenu","destroy","gridElement","querySelector","gridContent","gridHeader","columnMenu","removeEventListener","unwireFilterEvents","parentNode","columnMenuHandlerClick","e","target","classList","contains","headerCell","getHeaderCell","col","getColumn","responsiveDialogRenderer","isCustomDialog","notify","renderResponsiveChangeAction","action","filterOpen","isClose","showResponsiveDialog","items","getItems","dataBind","document","close","openColumnMenu","openColumnMenuByField","field","getColumnHeaderByField","afterFilterColumnMenuClose","contentRect","getContent","getClientRects","headerEle","getHeaderContent","headerElemCliRect","getBoundingClientRect","pos","top","left","style","cssText","elePos","gClient","enableRtl","enableStickyHeader","width","offsetTop","height","right","preventDefault","parentElement","display","slice","call","getHeaderTable","getElementsByClassName","isDestroyed","on","headerRefreshed","uiUpdate","enableAfterRenderMenu","initialEnd","render","isFilterItemAdded","filterDialogCreated","filterPosition","click","keyPressed","keyPressHandler","off","gObj","focusModule","currentInfo","column","getColumnByUid","firstElementChild","getAttribute","module","getModuleName","enable","l10n","getService","createElement","className","setAttribute","getConstant","appendChild","cssClass","enablePersistence","locale","select","columnMenuItemClick","bind","beforeOpen","columnMenuBeforeOpen","onOpen","columnMenuOnOpen","onClose","columnMenuOnClose","beforeItemRender","beforeMenuItemRender","beforeClose","columnMenuBeforeClose","appendTo","wireFilterEvents","isDevice","appendFilter","args","_a","isChooserItem","item","field_1","getKeyFromId","columnModel","filter","check","label","text","checked","visible","indexOf","apply","split","innerHTML","colChooser","event","parentItem","cancel","currentTarget","activeElement","key","targetColumn","trigger","columnMenuOpen","_i","dItem","getDefaultItems","ensureDisabledStatus","hide","push","enableItems","hideItems","offsetHeight","window","innerHeight","maxHeight","overflowY","position","status","allowGrouping","ensureModuleInjected","groupSettings","columns","allowSorting","sortSettings","sortColumns","direction","toLocaleLowerCase","replace","allowFiltering","filterSettings","type","autoFitColumns","ungroupColumn","groupColumn","sortColumn","checkbox","hideColumns","showColumns","getFilter","columnMenuClick","showItems","isFilterPopupOpen","restoreFocus","defultItems","columnMenuItems","getDefault","defultItems_1","getDefaultItem","createChooserItems","menuItem","iconCss","getLocaleText","generateID","append","getColumnMenu","localeKeys","uid","showInColumnChooser","headerText","filterPopup","getFilterPop","setPosition","li","ul","gridPos","liPos","offsetWidth","disp","getElementById"],"sources":["/Users/saleem/Desktop/KClient/Web App/Ver_3.6/User Interface/website_Source files/node_modules/@syncfusion/ej2-grids/src/grid/actions/column-menu.js"],"sourcesContent":["import { EventHandler, closest, Browser, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { remove } from '@syncfusion/ej2-base';\nimport { ContextMenu as Menu } from '@syncfusion/ej2-navigations';\nimport { parentsUntil, applyBiggerTheme } from '../base/util';\nimport * as events from '../base/constant';\nimport { calculatePosition } from '@syncfusion/ej2-popups';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { Group } from '../actions/group';\nimport { Sort } from '../actions/sort';\nimport { Filter } from '../actions/filter';\nimport { Resize } from '../actions/resize';\nimport { ResponsiveDialogAction } from '../base/enum';\nimport * as literals from '../base/string-literals';\n/**\n * 'column menu module used to handle column menu actions'\n *\n * @hidden\n */\nvar ColumnMenu = /** @class */ (function () {\n    function ColumnMenu(parent, serviceLocator) {\n        this.defaultItems = {};\n        this.localeText = this.setLocaleKey();\n        this.disableItems = [];\n        this.hiddenItems = [];\n        this.isOpen = false;\n        // default class names\n        this.GROUP = 'e-icon-group';\n        this.UNGROUP = 'e-icon-ungroup';\n        this.ASCENDING = 'e-icon-ascending';\n        this.DESCENDING = 'e-icon-descending';\n        this.ROOT = 'e-columnmenu';\n        this.FILTER = 'e-icon-filter';\n        this.POP = 'e-filter-popup';\n        this.WRAP = 'e-col-menu';\n        this.COL_POP = 'e-colmenu-popup';\n        this.CHOOSER = '_chooser_';\n        this.parent = parent;\n        this.gridID = parent.element.id;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n        if (this.parent.enableAdaptiveUI) {\n            this.setFullScreenDialog();\n        }\n    }\n    ColumnMenu.prototype.wireEvents = function () {\n        if (!this.parent.enableAdaptiveUI) {\n            var elements = this.getColumnMenuHandlers();\n            for (var i = 0; i < elements.length; i++) {\n                EventHandler.add(elements[parseInt(i.toString(), 10)], 'mousedown', this.columnMenuHandlerDown, this);\n            }\n        }\n    };\n    ColumnMenu.prototype.unwireEvents = function () {\n        if (!this.parent.enableAdaptiveUI) {\n            var elements = this.getColumnMenuHandlers();\n            for (var i = 0; i < elements.length; i++) {\n                EventHandler.remove(elements[parseInt(i.toString(), 10)], 'mousedown', this.columnMenuHandlerDown);\n            }\n        }\n    };\n    ColumnMenu.prototype.setFullScreenDialog = function () {\n        if (this.serviceLocator) {\n            this.serviceLocator.registerAdaptiveService(this, this.parent.enableAdaptiveUI, ResponsiveDialogAction.isColMenu);\n        }\n    };\n    /**\n     * To destroy the resize\n     *\n     * @returns {void}\n     * @hidden\n     */\n    ColumnMenu.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement.querySelector('.' + literals.gridContent) && (!gridElement.querySelector('.' + literals.gridHeader)) || !gridElement) {\n            return;\n        }\n        if (this.columnMenu) {\n            this.columnMenu.destroy();\n        }\n        this.removeEventListener();\n        this.unwireFilterEvents();\n        this.unwireEvents();\n        if (!this.parent.enableAdaptiveUI && this.element.parentNode) {\n            remove(this.element);\n        }\n    };\n    ColumnMenu.prototype.columnMenuHandlerClick = function (e) {\n        if (e.target.classList.contains('e-columnmenu')) {\n            if (this.parent.enableAdaptiveUI) {\n                this.headerCell = this.getHeaderCell(e);\n                var col = this.getColumn();\n                this.responsiveDialogRenderer.isCustomDialog = true;\n                this.parent.notify(events.renderResponsiveChangeAction, { action: 4 });\n                this.parent.notify(events.filterOpen, { col: col, target: e.target, isClose: null, id: null });\n                this.responsiveDialogRenderer.showResponsiveDialog(null, col);\n            }\n            else {\n                this.columnMenu.items = this.getItems();\n                this.columnMenu.dataBind();\n                if ((this.isOpen && this.headerCell !== this.getHeaderCell(e)) ||\n                    document.querySelector('.e-grid-menu .e-menu-parent.e-ul')) {\n                    this.columnMenu.close();\n                    this.openColumnMenu(e);\n                }\n                else if (!this.isOpen) {\n                    this.openColumnMenu(e);\n                }\n                else {\n                    this.columnMenu.close();\n                }\n            }\n        }\n    };\n    /**\n     * @param {string} field - specifies the field name\n     * @returns {void}\n     * @hidden\n     */\n    ColumnMenu.prototype.openColumnMenuByField = function (field) {\n        this.openColumnMenu({ target: this.parent.getColumnHeaderByField(field).querySelector('.e-columnmenu') });\n    };\n    ColumnMenu.prototype.afterFilterColumnMenuClose = function () {\n        if (this.columnMenu) {\n            this.columnMenu.items = this.getItems();\n            this.columnMenu.dataBind();\n            this.columnMenu.close();\n        }\n    };\n    ColumnMenu.prototype.openColumnMenu = function (e) {\n        var contentRect = this.parent.getContent().getClientRects()[0];\n        var headerEle = this.parent.getHeaderContent();\n        var headerElemCliRect = headerEle.getBoundingClientRect();\n        var pos = { top: 0, left: 0 };\n        this.element.style.cssText = 'display:block;visibility:hidden';\n        var elePos = this.element.getBoundingClientRect();\n        var gClient = this.parent.element.getBoundingClientRect();\n        this.element.style.cssText = 'display:none;visibility:visible';\n        this.headerCell = this.getHeaderCell(e);\n        if (this.parent.enableRtl) {\n            pos = this.parent.enableStickyHeader ? calculatePosition(this.headerCell, 'left', 'bottom', true) :\n                calculatePosition(this.headerCell, 'left', 'bottom');\n        }\n        else {\n            pos = this.parent.enableStickyHeader ? calculatePosition(this.headerCell, 'right', 'bottom', true) :\n                calculatePosition(this.headerCell, 'right', 'bottom');\n            pos.left -= elePos.width;\n            if (headerEle.classList.contains('e-sticky')) {\n                pos.top = this.parent.element.offsetTop + headerElemCliRect.top + headerElemCliRect.height;\n                if (headerElemCliRect.top + headerElemCliRect.height > contentRect.top) {\n                    pos.top += ((headerElemCliRect.top + headerElemCliRect.height) - contentRect.top);\n                }\n            }\n            else if (this.parent.enableStickyHeader) {\n                pos.top = this.parent.element.offsetTop + headerEle.offsetTop + headerElemCliRect.height;\n            }\n            if ((pos.left + elePos.width + 1) >= gClient.right) {\n                pos.left -= 35;\n            }\n        }\n        this.columnMenu['open'](pos.top, pos.left);\n        if (e.preventDefault) {\n            e.preventDefault();\n        }\n        applyBiggerTheme(this.parent.element, this.columnMenu.element.parentElement);\n    };\n    ColumnMenu.prototype.columnMenuHandlerDown = function () {\n        this.isOpen = !(this.element.style.display === 'none' || this.element.style.display === '');\n    };\n    ColumnMenu.prototype.getColumnMenuHandlers = function () {\n        return [].slice.call(this.parent.getHeaderTable().getElementsByClassName(this.ROOT));\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    ColumnMenu.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.headerRefreshed, this.wireEvents, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRenderMenu, this);\n        this.parent.on(events.initialEnd, this.render, this);\n        if (this.isFilterItemAdded()) {\n            this.parent.on(events.filterDialogCreated, this.filterPosition, this);\n        }\n        this.parent.on(events.setFullScreenDialog, this.setFullScreenDialog, this);\n        this.parent.on(events.renderResponsiveChangeAction, this.renderResponsiveChangeAction, this);\n        this.parent.on(events.click, this.columnMenuHandlerClick, this);\n        this.parent.on(events.afterFilterColumnMenuClose, this.afterFilterColumnMenuClose, this);\n        this.parent.on(events.keyPressed, this.keyPressHandler, this);\n        this.parent.on(events.destroy, this.destroy, this);\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    ColumnMenu.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.headerRefreshed, this.unwireEvents);\n        this.parent.off(events.uiUpdate, this.enableAfterRenderMenu);\n        this.parent.off(events.initialEnd, this.render);\n        if (this.isFilterItemAdded()) {\n            this.parent.off(events.filterDialogCreated, this.filterPosition);\n        }\n        this.parent.off(events.setFullScreenDialog, this.setFullScreenDialog);\n        this.parent.off(events.renderResponsiveChangeAction, this.renderResponsiveChangeAction);\n        this.parent.off(events.click, this.columnMenuHandlerClick);\n        this.parent.on(events.afterFilterColumnMenuClose, this.afterFilterColumnMenuClose);\n        this.parent.off(events.keyPressed, this.keyPressHandler);\n        this.parent.off(events.destroy, this.destroy);\n    };\n    ColumnMenu.prototype.keyPressHandler = function (e) {\n        var gObj = this.parent;\n        if (e.action === 'altDownArrow') {\n            var element = gObj.focusModule.currentInfo.element;\n            if (element && element.classList.contains('e-headercell')) {\n                var column = gObj.getColumnByUid(element.firstElementChild.getAttribute('e-mappinguid'));\n                this.openColumnMenuByField(column.field);\n            }\n        }\n    };\n    ColumnMenu.prototype.enableAfterRenderMenu = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            if (this.columnMenu) {\n                this.columnMenu.destroy();\n                remove(this.element);\n            }\n            if (!this.parent.enableAdaptiveUI) {\n                this.render();\n            }\n        }\n    };\n    ColumnMenu.prototype.render = function () {\n        if (this.parent.enableAdaptiveUI) {\n            return;\n        }\n        this.l10n = this.serviceLocator.getService('localization');\n        this.element = this.parent.createElement('ul', { id: this.gridID + '_columnmenu', className: 'e-colmenu' });\n        this.element.setAttribute('aria-label', this.l10n.getConstant('ColumnMenuDialogARIA'));\n        this.parent.element.appendChild(this.element);\n        this.columnMenu = new Menu({\n            cssClass: this.parent.cssClass ? 'e-grid-menu' + ' ' + this.parent.cssClass : 'e-grid-menu',\n            enableRtl: this.parent.enableRtl,\n            enablePersistence: this.parent.enablePersistence,\n            locale: this.parent.locale,\n            items: this.getItems(),\n            select: this.columnMenuItemClick.bind(this),\n            beforeOpen: this.columnMenuBeforeOpen.bind(this),\n            onOpen: this.columnMenuOnOpen.bind(this),\n            onClose: this.columnMenuOnClose.bind(this),\n            beforeItemRender: this.beforeMenuItemRender.bind(this),\n            beforeClose: this.columnMenuBeforeClose.bind(this)\n        });\n        if (this.element && parentsUntil(this.element, 'e-popup')) {\n            this.element.classList.add(this.COL_POP);\n        }\n        this.columnMenu.appendTo(this.element);\n        this.wireFilterEvents();\n    };\n    ColumnMenu.prototype.wireFilterEvents = function () {\n        if (!Browser.isDevice && this.isFilterItemAdded()) {\n            EventHandler.add(this.element, 'mouseover', this.appendFilter, this);\n        }\n    };\n    ColumnMenu.prototype.unwireFilterEvents = function () {\n        if (!Browser.isDevice && this.isFilterItemAdded() && !this.parent.enableAdaptiveUI) {\n            EventHandler.remove(this.element, 'mouseover', this.appendFilter);\n        }\n    };\n    ColumnMenu.prototype.beforeMenuItemRender = function (args) {\n        var _a;\n        if (this.isChooserItem(args.item)) {\n            var field_1 = this.getKeyFromId(args.item.id, this.CHOOSER);\n            var column = this.parent.columnModel.filter(function (col) { return col.field === field_1; });\n            var check = createCheckBox(this.parent.createElement, false, {\n                label: args.item.text,\n                checked: column[0].visible\n            });\n            if (this.parent.enableRtl) {\n                check.classList.add('e-rtl');\n            }\n            if (this.parent.cssClass) {\n                if (this.parent.cssClass.indexOf(' ') !== -1) {\n                    (_a = check.classList).add.apply(_a, this.parent.cssClass.split(' '));\n                }\n                else {\n                    check.classList.add(this.parent.cssClass);\n                }\n            }\n            args.element.innerHTML = '';\n            args.element.appendChild(check);\n        }\n        else if (args.item.id && this.getKeyFromId(args.item.id) === 'Filter') {\n            args.element.appendChild(this.parent.createElement('span', { className: 'e-icons e-caret' }));\n            args.element.className += 'e-filter-item e-menu-caret-icon';\n        }\n    };\n    ColumnMenu.prototype.columnMenuBeforeClose = function (args) {\n        var colChooser = args.event ? closest(args.event.target, '.e-menu-item') : null;\n        if (!isNullOrUndefined(args.parentItem) &&\n            this.getKeyFromId(args.parentItem.id) === 'ColumnChooser' &&\n            colChooser && this.isChooserItem(colChooser)) {\n            args.cancel = true;\n        }\n        else if (args.event && (closest(args.event.target, '.' + this.POP)\n            || (args.event.currentTarget && args.event.currentTarget.activeElement &&\n                parentsUntil(args.event.currentTarget.activeElement, 'e-filter-popup'))\n            || (parentsUntil(args.event.target, 'e-popup') && parentsUntil(args.event.target, 'e-colmenu-popup'))\n            || (parentsUntil(args.event.target, 'e-popup-wrapper'))) && !Browser.isDevice) {\n            args.cancel = true;\n        }\n        else if (args.event && args.event.target && args.event.target.classList.contains('e-filter-item') && args.event.key === 'Enter') {\n            args.cancel = true;\n        }\n    };\n    ColumnMenu.prototype.isChooserItem = function (item) {\n        return item.id && item.id.indexOf('_colmenu_') >= 0 &&\n            this.getKeyFromId(item.id, this.CHOOSER).indexOf('_colmenu_') === -1;\n    };\n    ColumnMenu.prototype.columnMenuBeforeOpen = function (args) {\n        args.column = this.targetColumn = this.getColumn();\n        this.parent.trigger(events.columnMenuOpen, args);\n        for (var _i = 0, _a = args.items; _i < _a.length; _i++) {\n            var item = _a[_i];\n            var key = this.getKeyFromId(item.id);\n            var dItem = this.defaultItems[\"\" + key];\n            if (this.getDefaultItems().indexOf(key) !== -1 && this.ensureDisabledStatus(key) && !dItem.hide) {\n                this.disableItems.push(item.text);\n            }\n            if (item.hide) {\n                this.hiddenItems.push(item.text);\n            }\n        }\n        this.columnMenu.enableItems(this.disableItems, false);\n        this.columnMenu.hideItems(this.hiddenItems);\n    };\n    ColumnMenu.prototype.columnMenuOnOpen = function (args) {\n        if (args.element.className === 'e-menu-parent e-ul ') {\n            if (args.element.offsetHeight > window.innerHeight || this.parent.element.offsetHeight > window.innerHeight) {\n                args.element.style.maxHeight = (window.innerHeight) * 0.8 + 'px';\n                args.element.style.overflowY = 'auto';\n                if (this.parent.enableStickyHeader) {\n                    args.element.style.position = 'fixed';\n                }\n            }\n        }\n    };\n    ColumnMenu.prototype.ensureDisabledStatus = function (item) {\n        var status = false;\n        switch (item) {\n            case 'Group':\n                if (!this.parent.allowGrouping || (this.parent.ensureModuleInjected(Group) && this.targetColumn\n                    && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) >= 0 ||\n                    this.targetColumn && !this.targetColumn.allowGrouping)) {\n                    status = true;\n                }\n                break;\n            case 'AutoFitAll':\n            case 'AutoFit':\n                status = !this.parent.ensureModuleInjected(Resize);\n                break;\n            case 'Ungroup':\n                if (!this.parent.ensureModuleInjected(Group) || (this.parent.ensureModuleInjected(Group) && this.targetColumn\n                    && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) < 0)) {\n                    status = true;\n                }\n                break;\n            case 'SortDescending':\n            case 'SortAscending':\n                if (this.parent.allowSorting && this.parent.ensureModuleInjected(Sort)\n                    && this.parent.sortSettings.columns.length > 0 && this.targetColumn && this.targetColumn.allowSorting) {\n                    var sortColumns = this.parent.sortSettings.columns;\n                    for (var i = 0; i < sortColumns.length; i++) {\n                        if (sortColumns[parseInt(i.toString(), 10)].field === this.targetColumn.field\n                            && sortColumns[parseInt(i.toString(), 10)].direction.toLocaleLowerCase() === item.toLocaleLowerCase().replace('sort', '')) {\n                            status = true;\n                        }\n                    }\n                }\n                else if (!this.parent.allowSorting || !this.parent.ensureModuleInjected(Sort) ||\n                    this.parent.allowSorting && this.targetColumn && !this.targetColumn.allowSorting) {\n                    status = true;\n                }\n                break;\n            case 'Filter':\n                if (this.parent.allowFiltering && (this.parent.filterSettings.type !== 'FilterBar')\n                    && this.parent.ensureModuleInjected(Filter) && this.targetColumn && this.targetColumn.allowFiltering) {\n                    status = false;\n                }\n                else if (this.parent.ensureModuleInjected(Filter) && this.parent.allowFiltering\n                    && this.targetColumn && (!this.targetColumn.allowFiltering || this.parent.filterSettings.type === 'FilterBar')) {\n                    status = true;\n                }\n        }\n        return status;\n    };\n    ColumnMenu.prototype.columnMenuItemClick = function (args) {\n        var item = this.isChooserItem(args.item) ? 'ColumnChooser' : this.getKeyFromId(args.item.id);\n        switch (item) {\n            case 'AutoFit':\n                this.parent.autoFitColumns(this.targetColumn.field);\n                break;\n            case 'AutoFitAll':\n                this.parent.autoFitColumns([]);\n                break;\n            case 'Ungroup':\n                this.parent.ungroupColumn(this.targetColumn.field);\n                break;\n            case 'Group':\n                this.parent.groupColumn(this.targetColumn.field);\n                break;\n            case 'SortAscending':\n                this.parent.sortColumn(this.targetColumn.field, 'Ascending');\n                break;\n            case 'SortDescending':\n                this.parent.sortColumn(this.targetColumn.field, 'Descending');\n                break;\n            case 'ColumnChooser':\n                // eslint-disable-next-line no-case-declarations\n                var key = this.getKeyFromId(args.item.id, this.CHOOSER);\n                // eslint-disable-next-line no-case-declarations\n                var checkbox = args.element.querySelector('.e-checkbox-wrapper .e-frame');\n                if (checkbox && checkbox.classList.contains('e-check')) {\n                    checkbox.classList.remove('e-check');\n                    this.parent.hideColumns(key, 'field');\n                }\n                else if (checkbox) {\n                    this.parent.showColumns(key, 'field');\n                    checkbox.classList.add('e-check');\n                }\n                break;\n            case 'Filter':\n                this.getFilter(args.element, args.item.id);\n                break;\n        }\n        args.column = this.targetColumn;\n        this.parent.trigger(events.columnMenuClick, args);\n    };\n    ColumnMenu.prototype.columnMenuOnClose = function (args) {\n        var parent = 'parentObj';\n        if (args.items.length > 0 && args.items[0][\"\" + parent] instanceof Menu) {\n            this.columnMenu.enableItems(this.disableItems, false);\n            this.disableItems = [];\n            this.columnMenu.showItems(this.hiddenItems);\n            this.hiddenItems = [];\n            if (this.isFilterPopupOpen()) {\n                this.getFilter(args.element, args.element.id, true);\n            }\n        }\n        this.parent.notify(events.restoreFocus, {});\n    };\n    ColumnMenu.prototype.getDefaultItems = function () {\n        return ['AutoFitAll', 'AutoFit', 'SortAscending', 'SortDescending', 'Group', 'Ungroup', 'ColumnChooser', 'Filter'];\n    };\n    ColumnMenu.prototype.getItems = function () {\n        var items = [];\n        var defultItems = this.parent.columnMenuItems ? this.parent.columnMenuItems : this.getDefault();\n        for (var _i = 0, defultItems_1 = defultItems; _i < defultItems_1.length; _i++) {\n            var item = defultItems_1[_i];\n            if (typeof item === 'string') {\n                if (item === 'ColumnChooser') {\n                    var col = this.getDefaultItem(item);\n                    col.items = this.createChooserItems();\n                    items.push(col);\n                }\n                else {\n                    items.push(this.getDefaultItem(item));\n                }\n            }\n            else {\n                items.push(item);\n            }\n        }\n        return items;\n    };\n    ColumnMenu.prototype.getDefaultItem = function (item) {\n        var menuItem = {};\n        switch (item) {\n            case 'SortAscending':\n                menuItem = { iconCss: this.ASCENDING };\n                break;\n            case 'SortDescending':\n                menuItem = { iconCss: this.DESCENDING };\n                break;\n            case 'Group':\n                menuItem = { iconCss: this.GROUP };\n                break;\n            case 'Ungroup':\n                menuItem = { iconCss: this.UNGROUP };\n                break;\n            case 'Filter':\n                menuItem = { iconCss: this.FILTER };\n                break;\n        }\n        this.defaultItems[\"\" + item] = {\n            text: this.getLocaleText(item), id: this.generateID(item),\n            iconCss: menuItem.iconCss ? 'e-icons ' + menuItem.iconCss : null\n        };\n        return this.defaultItems[\"\" + item];\n    };\n    ColumnMenu.prototype.getLocaleText = function (item) {\n        return this.l10n.getConstant(this.localeText[\"\" + item]);\n    };\n    ColumnMenu.prototype.generateID = function (item, append) {\n        return this.gridID + '_colmenu_' + (append ? append + item : item);\n    };\n    ColumnMenu.prototype.getKeyFromId = function (id, append) {\n        return id.indexOf('_colmenu_') > 0 &&\n            id.replace(this.gridID + '_colmenu_' + (append ? append : ''), '');\n    };\n    /**\n     * @returns {HTMLElement} returns the HTMLElement\n     * @hidden\n     */\n    ColumnMenu.prototype.getColumnMenu = function () {\n        return this.element;\n    };\n    ColumnMenu.prototype.getModuleName = function () {\n        return 'columnMenu';\n    };\n    ColumnMenu.prototype.setLocaleKey = function () {\n        var localeKeys = {\n            'AutoFitAll': 'autoFitAll',\n            'AutoFit': 'autoFit',\n            'Group': 'Group',\n            'Ungroup': 'Ungroup',\n            'SortAscending': 'SortAscending',\n            'SortDescending': 'SortDescending',\n            'ColumnChooser': 'Columnchooser',\n            'Filter': 'FilterMenu'\n        };\n        return localeKeys;\n    };\n    ColumnMenu.prototype.getHeaderCell = function (e) {\n        return closest(e.target, 'th.e-headercell');\n    };\n    ColumnMenu.prototype.getColumn = function () {\n        if (this.headerCell) {\n            var uid = this.headerCell.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n            return this.parent.getColumnByUid(uid);\n        }\n        return null;\n    };\n    ColumnMenu.prototype.createChooserItems = function () {\n        var items = [];\n        for (var _i = 0, _a = this.parent.columnModel; _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (col.showInColumnChooser && col.field) {\n                items.push({ id: this.generateID(col.field, this.CHOOSER), text: col.headerText ? col.headerText : col.field });\n            }\n        }\n        return items;\n    };\n    ColumnMenu.prototype.appendFilter = function (e) {\n        var filter = 'Filter';\n        if (!this.defaultItems[\"\" + filter]) {\n            return;\n        }\n        else {\n            var key = this.defaultItems[\"\" + filter].id;\n            if (closest(e.target, '#' + key) && !this.isFilterPopupOpen()) {\n                this.getFilter(e.target, key);\n            }\n            else if (!closest(e.target, '#' + key) && this.isFilterPopupOpen()) {\n                this.getFilter(e.target, key, true);\n            }\n        }\n    };\n    ColumnMenu.prototype.getFilter = function (target, id, isClose) {\n        var filterPopup = this.getFilterPop();\n        if (filterPopup) {\n            filterPopup.style.display = !Browser.isDevice && isClose ? 'none' : 'block';\n        }\n        else {\n            this.parent.notify(events.filterOpen, {\n                col: this.targetColumn, target: target, isClose: isClose, id: id\n            });\n        }\n    };\n    ColumnMenu.prototype.setPosition = function (li, ul) {\n        var gridPos = this.parent.element.getBoundingClientRect();\n        var liPos = li.getBoundingClientRect();\n        var left = liPos.left - gridPos.left;\n        var top = liPos.top - gridPos.top;\n        if (gridPos.height < top) {\n            top = top - ul.offsetHeight + liPos.height;\n        }\n        else if (gridPos.height < top + ul.offsetHeight) {\n            top = gridPos.height - ul.offsetHeight;\n        }\n        if (window.innerHeight < ul.offsetHeight + top + gridPos.top) {\n            top = window.innerHeight - ul.offsetHeight - gridPos.top;\n        }\n        if (top + gridPos.top < 0) {\n            top = 0;\n        }\n        left += (this.parent.enableRtl ? -ul.offsetWidth : liPos.width);\n        if (gridPos.width <= left + ul.offsetWidth) {\n            left -= liPos.width + ul.offsetWidth;\n            if (liPos.left < ul.offsetWidth) {\n                left = liPos.left + ul.offsetWidth / 2;\n            }\n        }\n        else if (left < 0) {\n            left += ul.offsetWidth + liPos.width;\n        }\n        ul.style.top = top + 'px';\n        ul.style.left = left + 'px';\n    };\n    ColumnMenu.prototype.filterPosition = function () {\n        var filterPopup = this.getFilterPop();\n        if (this.parent.enableAdaptiveUI) {\n            return;\n        }\n        filterPopup.classList.add(this.WRAP);\n        if (!Browser.isDevice) {\n            var disp = filterPopup.style.display;\n            filterPopup.style.cssText += 'display:block;visibility:hidden';\n            var li = this.element.querySelector('.' + this.FILTER);\n            if (li) {\n                this.setPosition(li.parentElement, filterPopup);\n                filterPopup.style.cssText += 'display:' + disp + ';visibility:visible';\n            }\n        }\n    };\n    ColumnMenu.prototype.getDefault = function () {\n        var items = [];\n        if (this.parent.ensureModuleInjected(Resize)) {\n            items.push('AutoFitAll');\n            items.push('AutoFit');\n        }\n        if (this.parent.allowGrouping && this.parent.ensureModuleInjected(Group)) {\n            items.push('Group');\n            items.push('Ungroup');\n        }\n        if (this.parent.allowSorting && this.parent.ensureModuleInjected(Sort)) {\n            items.push('SortAscending');\n            items.push('SortDescending');\n        }\n        items.push('ColumnChooser');\n        if (this.parent.allowFiltering && (this.parent.filterSettings.type !== 'FilterBar') &&\n            this.parent.ensureModuleInjected(Filter)) {\n            items.push('Filter');\n        }\n        return items;\n    };\n    ColumnMenu.prototype.isFilterPopupOpen = function () {\n        var filterPopup = this.getFilterPop();\n        return filterPopup && filterPopup.style.display !== 'none';\n    };\n    ColumnMenu.prototype.getFilterPop = function () {\n        if (this.targetColumn !== null && this.parent.filterSettings.type === 'Menu' && Browser.isDevice) {\n            return document.getElementById(this.targetColumn.uid + '-flmdlg');\n        }\n        return this.parent.element.querySelector('.' + this.POP);\n    };\n    ColumnMenu.prototype.isFilterItemAdded = function () {\n        return (this.parent.columnMenuItems &&\n            this.parent.columnMenuItems.indexOf('Filter') >= 0) || !this.parent.columnMenuItems;\n    };\n    ColumnMenu.prototype.renderResponsiveChangeAction = function (args) {\n        this.responsiveDialogRenderer.action = args.action;\n    };\n    return ColumnMenu;\n}());\nexport { ColumnMenu };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}