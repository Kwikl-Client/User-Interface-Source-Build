{"ast":null,"code":"import _classPrivateFieldDestructureSet from \"/Users/saleem/Desktop/KClient/Web App/Ver_3.6/User Interface/website_Source files/node_modules/@babel/runtime/helpers/esm/classPrivateFieldDestructureSet.js\";\nimport _classStaticPrivateMethodGet from \"/Users/saleem/Desktop/KClient/Web App/Ver_3.6/User Interface/website_Source files/node_modules/@babel/runtime/helpers/esm/classStaticPrivateMethodGet.js\";\nimport _defineProperty from \"/Users/saleem/Desktop/KClient/Web App/Ver_3.6/User Interface/website_Source files/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _classStaticPrivateFieldSpecSet from \"/Users/saleem/Desktop/KClient/Web App/Ver_3.6/User Interface/website_Source files/node_modules/@babel/runtime/helpers/esm/classStaticPrivateFieldSpecSet.js\";\nimport _classStaticPrivateFieldSpecGet from \"/Users/saleem/Desktop/KClient/Web App/Ver_3.6/User Interface/website_Source files/node_modules/@babel/runtime/helpers/esm/classStaticPrivateFieldSpecGet.js\";\nimport _classPrivateMethodInitSpec from \"/Users/saleem/Desktop/KClient/Web App/Ver_3.6/User Interface/website_Source files/node_modules/@babel/runtime/helpers/esm/classPrivateMethodInitSpec.js\";\nimport _classPrivateMethodGet from \"/Users/saleem/Desktop/KClient/Web App/Ver_3.6/User Interface/website_Source files/node_modules/@babel/runtime/helpers/esm/classPrivateMethodGet.js\";\nimport _classPrivateFieldInitSpec from \"/Users/saleem/Desktop/KClient/Web App/Ver_3.6/User Interface/website_Source files/node_modules/@babel/runtime/helpers/esm/classPrivateFieldInitSpec.js\";\nimport _classPrivateFieldGet from \"/Users/saleem/Desktop/KClient/Web App/Ver_3.6/User Interface/website_Source files/node_modules/@babel/runtime/helpers/esm/classPrivateFieldGet.js\";\nimport _classPrivateFieldSet from \"/Users/saleem/Desktop/KClient/Web App/Ver_3.6/User Interface/website_Source files/node_modules/@babel/runtime/helpers/esm/classPrivateFieldSet.js\";\n/**\n * @licstart The following is the entire license notice for the\n * JavaScript code in this page\n *\n * Copyright 2023 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * @licend The above is the entire license notice for the\n * JavaScript code in this page\n */\n\n/******/\nvar __webpack_modules__ = {\n  /***/640: ( /***/(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {\n    // EXPORTS\n    __webpack_require__.d(__webpack_exports__, {\n      AnnotationLayer: () => ( /* binding */AnnotationLayer),\n      FreeTextAnnotationElement: () => ( /* binding */FreeTextAnnotationElement),\n      InkAnnotationElement: () => ( /* binding */InkAnnotationElement),\n      StampAnnotationElement: () => ( /* binding */StampAnnotationElement)\n    });\n\n    // EXTERNAL MODULE: ./src/shared/util.js\n    var util = __webpack_require__(266);\n    // EXTERNAL MODULE: ./src/display/display_utils.js\n    var display_utils = __webpack_require__(473);\n    // EXTERNAL MODULE: ./src/display/annotation_storage.js\n    var annotation_storage = __webpack_require__(780);\n    ; // CONCATENATED MODULE: ./src/shared/scripting_utils.js\n    function makeColorComp(n) {\n      return Math.floor(Math.max(0, Math.min(1, n)) * 255).toString(16).padStart(2, \"0\");\n    }\n    function scaleAndClamp(x) {\n      return Math.max(0, Math.min(255, 255 * x));\n    }\n    class ColorConverters {\n      static CMYK_G(_ref) {\n        let [c, y, m, k] = _ref;\n        return [\"G\", 1 - Math.min(1, 0.3 * c + 0.59 * m + 0.11 * y + k)];\n      }\n      static G_CMYK(_ref2) {\n        let [g] = _ref2;\n        return [\"CMYK\", 0, 0, 0, 1 - g];\n      }\n      static G_RGB(_ref3) {\n        let [g] = _ref3;\n        return [\"RGB\", g, g, g];\n      }\n      static G_rgb(_ref4) {\n        let [g] = _ref4;\n        g = scaleAndClamp(g);\n        return [g, g, g];\n      }\n      static G_HTML(_ref5) {\n        let [g] = _ref5;\n        const G = makeColorComp(g);\n        return \"#\".concat(G).concat(G).concat(G);\n      }\n      static RGB_G(_ref6) {\n        let [r, g, b] = _ref6;\n        return [\"G\", 0.3 * r + 0.59 * g + 0.11 * b];\n      }\n      static RGB_rgb(color) {\n        return color.map(scaleAndClamp);\n      }\n      static RGB_HTML(color) {\n        return \"#\".concat(color.map(makeColorComp).join(\"\"));\n      }\n      static T_HTML() {\n        return \"#00000000\";\n      }\n      static T_rgb() {\n        return [null];\n      }\n      static CMYK_RGB(_ref7) {\n        let [c, y, m, k] = _ref7;\n        return [\"RGB\", 1 - Math.min(1, c + k), 1 - Math.min(1, m + k), 1 - Math.min(1, y + k)];\n      }\n      static CMYK_rgb(_ref8) {\n        let [c, y, m, k] = _ref8;\n        return [scaleAndClamp(1 - Math.min(1, c + k)), scaleAndClamp(1 - Math.min(1, m + k)), scaleAndClamp(1 - Math.min(1, y + k))];\n      }\n      static CMYK_HTML(components) {\n        const rgb = this.CMYK_RGB(components).slice(1);\n        return this.RGB_HTML(rgb);\n      }\n      static RGB_CMYK(_ref9) {\n        let [r, g, b] = _ref9;\n        const c = 1 - r;\n        const m = 1 - g;\n        const y = 1 - b;\n        const k = Math.min(c, m, y);\n        return [\"CMYK\", c, m, y, k];\n      }\n    }\n\n    // EXTERNAL MODULE: ./src/display/xfa_layer.js\n    var xfa_layer = __webpack_require__(160);\n    ; // CONCATENATED MODULE: ./src/display/annotation_layer.js\n\n    const DEFAULT_TAB_INDEX = 1000;\n    const DEFAULT_FONT_SIZE = 9;\n    const GetElementsByNameSet = new WeakSet();\n    function getRectDims(rect) {\n      return {\n        width: rect[2] - rect[0],\n        height: rect[3] - rect[1]\n      };\n    }\n    class AnnotationElementFactory {\n      static create(parameters) {\n        const subtype = parameters.data.annotationType;\n        switch (subtype) {\n          case util.AnnotationType.LINK:\n            return new LinkAnnotationElement(parameters);\n          case util.AnnotationType.TEXT:\n            return new TextAnnotationElement(parameters);\n          case util.AnnotationType.WIDGET:\n            const fieldType = parameters.data.fieldType;\n            switch (fieldType) {\n              case \"Tx\":\n                return new TextWidgetAnnotationElement(parameters);\n              case \"Btn\":\n                if (parameters.data.radioButton) {\n                  return new RadioButtonWidgetAnnotationElement(parameters);\n                } else if (parameters.data.checkBox) {\n                  return new CheckboxWidgetAnnotationElement(parameters);\n                }\n                return new PushButtonWidgetAnnotationElement(parameters);\n              case \"Ch\":\n                return new ChoiceWidgetAnnotationElement(parameters);\n              case \"Sig\":\n                return new SignatureWidgetAnnotationElement(parameters);\n            }\n            return new WidgetAnnotationElement(parameters);\n          case util.AnnotationType.POPUP:\n            return new PopupAnnotationElement(parameters);\n          case util.AnnotationType.FREETEXT:\n            return new FreeTextAnnotationElement(parameters);\n          case util.AnnotationType.LINE:\n            return new LineAnnotationElement(parameters);\n          case util.AnnotationType.SQUARE:\n            return new SquareAnnotationElement(parameters);\n          case util.AnnotationType.CIRCLE:\n            return new CircleAnnotationElement(parameters);\n          case util.AnnotationType.POLYLINE:\n            return new PolylineAnnotationElement(parameters);\n          case util.AnnotationType.CARET:\n            return new CaretAnnotationElement(parameters);\n          case util.AnnotationType.INK:\n            return new InkAnnotationElement(parameters);\n          case util.AnnotationType.POLYGON:\n            return new PolygonAnnotationElement(parameters);\n          case util.AnnotationType.HIGHLIGHT:\n            return new HighlightAnnotationElement(parameters);\n          case util.AnnotationType.UNDERLINE:\n            return new UnderlineAnnotationElement(parameters);\n          case util.AnnotationType.SQUIGGLY:\n            return new SquigglyAnnotationElement(parameters);\n          case util.AnnotationType.STRIKEOUT:\n            return new StrikeOutAnnotationElement(parameters);\n          case util.AnnotationType.STAMP:\n            return new StampAnnotationElement(parameters);\n          case util.AnnotationType.FILEATTACHMENT:\n            return new FileAttachmentAnnotationElement(parameters);\n          default:\n            return new AnnotationElement(parameters);\n        }\n      }\n    }\n    var _hasBorder = /*#__PURE__*/new WeakMap();\n    class AnnotationElement {\n      constructor(parameters) {\n        let {\n          isRenderable = false,\n          ignoreBorder = false,\n          createQuadrilaterals = false\n        } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        _classPrivateFieldInitSpec(this, _hasBorder, {\n          writable: true,\n          value: false\n        });\n        this.isRenderable = isRenderable;\n        this.data = parameters.data;\n        this.layer = parameters.layer;\n        this.linkService = parameters.linkService;\n        this.downloadManager = parameters.downloadManager;\n        this.imageResourcesPath = parameters.imageResourcesPath;\n        this.renderForms = parameters.renderForms;\n        this.svgFactory = parameters.svgFactory;\n        this.annotationStorage = parameters.annotationStorage;\n        this.enableScripting = parameters.enableScripting;\n        this.hasJSActions = parameters.hasJSActions;\n        this._fieldObjects = parameters.fieldObjects;\n        this.parent = parameters.parent;\n        if (isRenderable) {\n          this.container = this._createContainer(ignoreBorder);\n        }\n        if (createQuadrilaterals) {\n          this._createQuadrilaterals();\n        }\n      }\n      static _hasPopupData(_ref10) {\n        let {\n          titleObj,\n          contentsObj,\n          richText\n        } = _ref10;\n        return !!(titleObj !== null && titleObj !== void 0 && titleObj.str || contentsObj !== null && contentsObj !== void 0 && contentsObj.str || richText !== null && richText !== void 0 && richText.str);\n      }\n      get hasPopupData() {\n        return AnnotationElement._hasPopupData(this.data);\n      }\n      _createContainer(ignoreBorder) {\n        const {\n          data,\n          parent: {\n            page,\n            viewport\n          }\n        } = this;\n        const container = document.createElement(\"section\");\n        container.setAttribute(\"data-annotation-id\", data.id);\n        if (!(this instanceof WidgetAnnotationElement)) {\n          container.tabIndex = DEFAULT_TAB_INDEX;\n        }\n        container.style.zIndex = this.parent.zIndex++;\n        if (this.data.popupRef) {\n          container.setAttribute(\"aria-haspopup\", \"dialog\");\n        }\n        if (data.noRotate) {\n          container.classList.add(\"norotate\");\n        }\n        const {\n          pageWidth,\n          pageHeight,\n          pageX,\n          pageY\n        } = viewport.rawDims;\n        if (!data.rect || this instanceof PopupAnnotationElement) {\n          const {\n            rotation\n          } = data;\n          if (!data.hasOwnCanvas && rotation !== 0) {\n            this.setRotation(rotation, container);\n          }\n          return container;\n        }\n        const {\n          width,\n          height\n        } = getRectDims(data.rect);\n        const rect = util.Util.normalizeRect([data.rect[0], page.view[3] - data.rect[1] + page.view[1], data.rect[2], page.view[3] - data.rect[3] + page.view[1]]);\n        if (!ignoreBorder && data.borderStyle.width > 0) {\n          container.style.borderWidth = \"\".concat(data.borderStyle.width, \"px\");\n          const horizontalRadius = data.borderStyle.horizontalCornerRadius;\n          const verticalRadius = data.borderStyle.verticalCornerRadius;\n          if (horizontalRadius > 0 || verticalRadius > 0) {\n            const radius = \"calc(\".concat(horizontalRadius, \"px * var(--scale-factor)) / calc(\").concat(verticalRadius, \"px * var(--scale-factor))\");\n            container.style.borderRadius = radius;\n          } else if (this instanceof RadioButtonWidgetAnnotationElement) {\n            const radius = \"calc(\".concat(width, \"px * var(--scale-factor)) / calc(\").concat(height, \"px * var(--scale-factor))\");\n            container.style.borderRadius = radius;\n          }\n          switch (data.borderStyle.style) {\n            case util.AnnotationBorderStyleType.SOLID:\n              container.style.borderStyle = \"solid\";\n              break;\n            case util.AnnotationBorderStyleType.DASHED:\n              container.style.borderStyle = \"dashed\";\n              break;\n            case util.AnnotationBorderStyleType.BEVELED:\n              (0, util.warn)(\"Unimplemented border style: beveled\");\n              break;\n            case util.AnnotationBorderStyleType.INSET:\n              (0, util.warn)(\"Unimplemented border style: inset\");\n              break;\n            case util.AnnotationBorderStyleType.UNDERLINE:\n              container.style.borderBottomStyle = \"solid\";\n              break;\n            default:\n              break;\n          }\n          const borderColor = data.borderColor || null;\n          if (borderColor) {\n            _classPrivateFieldSet(this, _hasBorder, true);\n            container.style.borderColor = util.Util.makeHexColor(borderColor[0] | 0, borderColor[1] | 0, borderColor[2] | 0);\n          } else {\n            container.style.borderWidth = 0;\n          }\n        }\n        container.style.left = \"\".concat(100 * (rect[0] - pageX) / pageWidth, \"%\");\n        container.style.top = \"\".concat(100 * (rect[1] - pageY) / pageHeight, \"%\");\n        const {\n          rotation\n        } = data;\n        if (data.hasOwnCanvas || rotation === 0) {\n          container.style.width = \"\".concat(100 * width / pageWidth, \"%\");\n          container.style.height = \"\".concat(100 * height / pageHeight, \"%\");\n        } else {\n          this.setRotation(rotation, container);\n        }\n        return container;\n      }\n      setRotation(angle) {\n        let container = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.container;\n        if (!this.data.rect) {\n          return;\n        }\n        const {\n          pageWidth,\n          pageHeight\n        } = this.parent.viewport.rawDims;\n        const {\n          width,\n          height\n        } = getRectDims(this.data.rect);\n        let elementWidth, elementHeight;\n        if (angle % 180 === 0) {\n          elementWidth = 100 * width / pageWidth;\n          elementHeight = 100 * height / pageHeight;\n        } else {\n          elementWidth = 100 * height / pageWidth;\n          elementHeight = 100 * width / pageHeight;\n        }\n        container.style.width = \"\".concat(elementWidth, \"%\");\n        container.style.height = \"\".concat(elementHeight, \"%\");\n        container.setAttribute(\"data-main-rotation\", (360 - angle) % 360);\n      }\n      get _commonActions() {\n        const setColor = (jsName, styleName, event) => {\n          const color = event.detail[jsName];\n          const colorType = color[0];\n          const colorArray = color.slice(1);\n          event.target.style[styleName] = ColorConverters[\"\".concat(colorType, \"_HTML\")](colorArray);\n          this.annotationStorage.setValue(this.data.id, {\n            [styleName]: ColorConverters[\"\".concat(colorType, \"_rgb\")](colorArray)\n          });\n        };\n        return (0, util.shadow)(this, \"_commonActions\", {\n          display: event => {\n            const {\n              display\n            } = event.detail;\n            const hidden = display % 2 === 1;\n            this.container.style.visibility = hidden ? \"hidden\" : \"visible\";\n            this.annotationStorage.setValue(this.data.id, {\n              noView: hidden,\n              noPrint: display === 1 || display === 2\n            });\n          },\n          print: event => {\n            this.annotationStorage.setValue(this.data.id, {\n              noPrint: !event.detail.print\n            });\n          },\n          hidden: event => {\n            const {\n              hidden\n            } = event.detail;\n            this.container.style.visibility = hidden ? \"hidden\" : \"visible\";\n            this.annotationStorage.setValue(this.data.id, {\n              noPrint: hidden,\n              noView: hidden\n            });\n          },\n          focus: event => {\n            setTimeout(() => event.target.focus({\n              preventScroll: false\n            }), 0);\n          },\n          userName: event => {\n            event.target.title = event.detail.userName;\n          },\n          readonly: event => {\n            event.target.disabled = event.detail.readonly;\n          },\n          required: event => {\n            this._setRequired(event.target, event.detail.required);\n          },\n          bgColor: event => {\n            setColor(\"bgColor\", \"backgroundColor\", event);\n          },\n          fillColor: event => {\n            setColor(\"fillColor\", \"backgroundColor\", event);\n          },\n          fgColor: event => {\n            setColor(\"fgColor\", \"color\", event);\n          },\n          textColor: event => {\n            setColor(\"textColor\", \"color\", event);\n          },\n          borderColor: event => {\n            setColor(\"borderColor\", \"borderColor\", event);\n          },\n          strokeColor: event => {\n            setColor(\"strokeColor\", \"borderColor\", event);\n          },\n          rotation: event => {\n            const angle = event.detail.rotation;\n            this.setRotation(angle);\n            this.annotationStorage.setValue(this.data.id, {\n              rotation: angle\n            });\n          }\n        });\n      }\n      _dispatchEventFromSandbox(actions, jsEvent) {\n        const commonActions = this._commonActions;\n        for (const name of Object.keys(jsEvent.detail)) {\n          const action = actions[name] || commonActions[name];\n          action === null || action === void 0 || action(jsEvent);\n        }\n      }\n      _setDefaultPropertiesFromJS(element) {\n        if (!this.enableScripting) {\n          return;\n        }\n        const storedData = this.annotationStorage.getRawValue(this.data.id);\n        if (!storedData) {\n          return;\n        }\n        const commonActions = this._commonActions;\n        for (const [actionName, detail] of Object.entries(storedData)) {\n          const action = commonActions[actionName];\n          if (action) {\n            const eventProxy = {\n              detail: {\n                [actionName]: detail\n              },\n              target: element\n            };\n            action(eventProxy);\n            delete storedData[actionName];\n          }\n        }\n      }\n      _createQuadrilaterals() {\n        if (!this.container) {\n          return;\n        }\n        const {\n          quadPoints\n        } = this.data;\n        if (!quadPoints) {\n          return;\n        }\n        const [rectBlX, rectBlY, rectTrX, rectTrY] = this.data.rect;\n        if (quadPoints.length === 1) {\n          const [, {\n            x: trX,\n            y: trY\n          }, {\n            x: blX,\n            y: blY\n          }] = quadPoints[0];\n          if (rectTrX === trX && rectTrY === trY && rectBlX === blX && rectBlY === blY) {\n            return;\n          }\n        }\n        const {\n          style\n        } = this.container;\n        let svgBuffer;\n        if (_classPrivateFieldGet(this, _hasBorder)) {\n          const {\n            borderColor,\n            borderWidth\n          } = style;\n          style.borderWidth = 0;\n          svgBuffer = [\"url('data:image/svg+xml;utf8,\", \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\"\", \" preserveAspectRatio=\\\"none\\\" viewBox=\\\"0 0 1 1\\\">\", \"<g fill=\\\"transparent\\\" stroke=\\\"\".concat(borderColor, \"\\\" stroke-width=\\\"\").concat(borderWidth, \"\\\">\")];\n          this.container.classList.add(\"hasBorder\");\n        }\n        const width = rectTrX - rectBlX;\n        const height = rectTrY - rectBlY;\n        const {\n          svgFactory\n        } = this;\n        const svg = svgFactory.createElement(\"svg\");\n        svg.classList.add(\"quadrilateralsContainer\");\n        svg.setAttribute(\"width\", 0);\n        svg.setAttribute(\"height\", 0);\n        const defs = svgFactory.createElement(\"defs\");\n        svg.append(defs);\n        const clipPath = svgFactory.createElement(\"clipPath\");\n        const id = \"clippath_\".concat(this.data.id);\n        clipPath.setAttribute(\"id\", id);\n        clipPath.setAttribute(\"clipPathUnits\", \"objectBoundingBox\");\n        defs.append(clipPath);\n        for (const [, {\n          x: trX,\n          y: trY\n        }, {\n          x: blX,\n          y: blY\n        }] of quadPoints) {\n          var _svgBuffer;\n          const rect = svgFactory.createElement(\"rect\");\n          const x = (blX - rectBlX) / width;\n          const y = (rectTrY - trY) / height;\n          const rectWidth = (trX - blX) / width;\n          const rectHeight = (trY - blY) / height;\n          rect.setAttribute(\"x\", x);\n          rect.setAttribute(\"y\", y);\n          rect.setAttribute(\"width\", rectWidth);\n          rect.setAttribute(\"height\", rectHeight);\n          clipPath.append(rect);\n          (_svgBuffer = svgBuffer) === null || _svgBuffer === void 0 || _svgBuffer.push(\"<rect vector-effect=\\\"non-scaling-stroke\\\" x=\\\"\".concat(x, \"\\\" y=\\\"\").concat(y, \"\\\" width=\\\"\").concat(rectWidth, \"\\\" height=\\\"\").concat(rectHeight, \"\\\"/>\"));\n        }\n        if (_classPrivateFieldGet(this, _hasBorder)) {\n          svgBuffer.push(\"</g></svg>')\");\n          style.backgroundImage = svgBuffer.join(\"\");\n        }\n        this.container.append(svg);\n        this.container.style.clipPath = \"url(#\".concat(id, \")\");\n      }\n      _createPopup() {\n        const {\n          container,\n          data\n        } = this;\n        container.setAttribute(\"aria-haspopup\", \"dialog\");\n        const popup = new PopupAnnotationElement({\n          data: {\n            color: data.color,\n            titleObj: data.titleObj,\n            modificationDate: data.modificationDate,\n            contentsObj: data.contentsObj,\n            richText: data.richText,\n            parentRect: data.rect,\n            borderStyle: 0,\n            id: \"popup_\".concat(data.id),\n            rotation: data.rotation\n          },\n          parent: this.parent,\n          elements: [this]\n        });\n        this.parent.div.append(popup.render());\n      }\n      render() {\n        (0, util.unreachable)(\"Abstract method `AnnotationElement.render` called\");\n      }\n      _getElementsByName(name) {\n        let skipId = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n        const fields = [];\n        if (this._fieldObjects) {\n          const fieldObj = this._fieldObjects[name];\n          if (fieldObj) {\n            for (const {\n              page,\n              id,\n              exportValues\n            } of fieldObj) {\n              if (page === -1) {\n                continue;\n              }\n              if (id === skipId) {\n                continue;\n              }\n              const exportValue = typeof exportValues === \"string\" ? exportValues : null;\n              const domElement = document.querySelector(\"[data-element-id=\\\"\".concat(id, \"\\\"]\"));\n              if (domElement && !GetElementsByNameSet.has(domElement)) {\n                (0, util.warn)(\"_getElementsByName - element not allowed: \".concat(id));\n                continue;\n              }\n              fields.push({\n                id,\n                exportValue,\n                domElement\n              });\n            }\n          }\n          return fields;\n        }\n        for (const domElement of document.getElementsByName(name)) {\n          const {\n            exportValue\n          } = domElement;\n          const id = domElement.getAttribute(\"data-element-id\");\n          if (id === skipId) {\n            continue;\n          }\n          if (!GetElementsByNameSet.has(domElement)) {\n            continue;\n          }\n          fields.push({\n            id,\n            exportValue,\n            domElement\n          });\n        }\n        return fields;\n      }\n      show() {\n        var _this$popup;\n        if (this.container) {\n          this.container.hidden = false;\n        }\n        (_this$popup = this.popup) === null || _this$popup === void 0 || _this$popup.maybeShow();\n      }\n      hide() {\n        var _this$popup2;\n        if (this.container) {\n          this.container.hidden = true;\n        }\n        (_this$popup2 = this.popup) === null || _this$popup2 === void 0 || _this$popup2.forceHide();\n      }\n      getElementsToTriggerPopup() {\n        return this.container;\n      }\n      addHighlightArea() {\n        const triggers = this.getElementsToTriggerPopup();\n        if (Array.isArray(triggers)) {\n          for (const element of triggers) {\n            element.classList.add(\"highlightArea\");\n          }\n        } else {\n          triggers.classList.add(\"highlightArea\");\n        }\n      }\n      get _isEditable() {\n        return false;\n      }\n      _editOnDoubleClick() {\n        if (!this._isEditable) {\n          return;\n        }\n        const {\n          annotationEditorType: mode,\n          data: {\n            id: editId\n          }\n        } = this;\n        this.container.addEventListener(\"dblclick\", () => {\n          var _this$linkService$eve;\n          (_this$linkService$eve = this.linkService.eventBus) === null || _this$linkService$eve === void 0 || _this$linkService$eve.dispatch(\"switchannotationeditormode\", {\n            source: this,\n            mode,\n            editId\n          });\n        });\n      }\n    }\n    var _setInternalLink = /*#__PURE__*/new WeakSet();\n    var _bindAttachment = /*#__PURE__*/new WeakSet();\n    var _bindSetOCGState = /*#__PURE__*/new WeakSet();\n    class LinkAnnotationElement extends AnnotationElement {\n      constructor(parameters) {\n        let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n        super(parameters, {\n          isRenderable: true,\n          ignoreBorder: !!(options !== null && options !== void 0 && options.ignoreBorder),\n          createQuadrilaterals: true\n        });\n        _classPrivateMethodInitSpec(this, _bindSetOCGState);\n        _classPrivateMethodInitSpec(this, _bindAttachment);\n        _classPrivateMethodInitSpec(this, _setInternalLink);\n        this.isTooltipOnly = parameters.data.isTooltipOnly;\n      }\n      render() {\n        const {\n          data,\n          linkService\n        } = this;\n        const link = document.createElement(\"a\");\n        link.setAttribute(\"data-element-id\", data.id);\n        let isBound = false;\n        if (data.url) {\n          linkService.addLinkAttributes(link, data.url, data.newWindow);\n          isBound = true;\n        } else if (data.action) {\n          this._bindNamedAction(link, data.action);\n          isBound = true;\n        } else if (data.attachment) {\n          _classPrivateMethodGet(this, _bindAttachment, _bindAttachment2).call(this, link, data.attachment, data.attachmentDest);\n          isBound = true;\n        } else if (data.setOCGState) {\n          _classPrivateMethodGet(this, _bindSetOCGState, _bindSetOCGState2).call(this, link, data.setOCGState);\n          isBound = true;\n        } else if (data.dest) {\n          this._bindLink(link, data.dest);\n          isBound = true;\n        } else {\n          if (data.actions && (data.actions.Action || data.actions[\"Mouse Up\"] || data.actions[\"Mouse Down\"]) && this.enableScripting && this.hasJSActions) {\n            this._bindJSAction(link, data);\n            isBound = true;\n          }\n          if (data.resetForm) {\n            this._bindResetFormAction(link, data.resetForm);\n            isBound = true;\n          } else if (this.isTooltipOnly && !isBound) {\n            this._bindLink(link, \"\");\n            isBound = true;\n          }\n        }\n        this.container.classList.add(\"linkAnnotation\");\n        if (isBound) {\n          this.container.append(link);\n        }\n        return this.container;\n      }\n      _bindLink(link, destination) {\n        link.href = this.linkService.getDestinationHash(destination);\n        link.onclick = () => {\n          if (destination) {\n            this.linkService.goToDestination(destination);\n          }\n          return false;\n        };\n        if (destination || destination === \"\") {\n          _classPrivateMethodGet(this, _setInternalLink, _setInternalLink2).call(this);\n        }\n      }\n      _bindNamedAction(link, action) {\n        link.href = this.linkService.getAnchorUrl(\"\");\n        link.onclick = () => {\n          this.linkService.executeNamedAction(action);\n          return false;\n        };\n        _classPrivateMethodGet(this, _setInternalLink, _setInternalLink2).call(this);\n      }\n      _bindJSAction(link, data) {\n        link.href = this.linkService.getAnchorUrl(\"\");\n        const map = new Map([[\"Action\", \"onclick\"], [\"Mouse Up\", \"onmouseup\"], [\"Mouse Down\", \"onmousedown\"]]);\n        for (const name of Object.keys(data.actions)) {\n          const jsName = map.get(name);\n          if (!jsName) {\n            continue;\n          }\n          link[jsName] = () => {\n            var _this$linkService$eve2;\n            (_this$linkService$eve2 = this.linkService.eventBus) === null || _this$linkService$eve2 === void 0 || _this$linkService$eve2.dispatch(\"dispatcheventinsandbox\", {\n              source: this,\n              detail: {\n                id: data.id,\n                name\n              }\n            });\n            return false;\n          };\n        }\n        if (!link.onclick) {\n          link.onclick = () => false;\n        }\n        _classPrivateMethodGet(this, _setInternalLink, _setInternalLink2).call(this);\n      }\n      _bindResetFormAction(link, resetForm) {\n        const otherClickAction = link.onclick;\n        if (!otherClickAction) {\n          link.href = this.linkService.getAnchorUrl(\"\");\n        }\n        _classPrivateMethodGet(this, _setInternalLink, _setInternalLink2).call(this);\n        if (!this._fieldObjects) {\n          (0, util.warn)(\"_bindResetFormAction - \\\"resetForm\\\" action not supported, \" + \"ensure that the `fieldObjects` parameter is provided.\");\n          if (!otherClickAction) {\n            link.onclick = () => false;\n          }\n          return;\n        }\n        link.onclick = () => {\n          otherClickAction === null || otherClickAction === void 0 || otherClickAction();\n          const {\n            fields: resetFormFields,\n            refs: resetFormRefs,\n            include\n          } = resetForm;\n          const allFields = [];\n          if (resetFormFields.length !== 0 || resetFormRefs.length !== 0) {\n            const fieldIds = new Set(resetFormRefs);\n            for (const fieldName of resetFormFields) {\n              const fields = this._fieldObjects[fieldName] || [];\n              for (const {\n                id\n              } of fields) {\n                fieldIds.add(id);\n              }\n            }\n            for (const fields of Object.values(this._fieldObjects)) {\n              for (const field of fields) {\n                if (fieldIds.has(field.id) === include) {\n                  allFields.push(field);\n                }\n              }\n            }\n          } else {\n            for (const fields of Object.values(this._fieldObjects)) {\n              allFields.push(...fields);\n            }\n          }\n          const storage = this.annotationStorage;\n          const allIds = [];\n          for (const field of allFields) {\n            const {\n              id\n            } = field;\n            allIds.push(id);\n            switch (field.type) {\n              case \"text\":\n                {\n                  const value = field.defaultValue || \"\";\n                  storage.setValue(id, {\n                    value\n                  });\n                  break;\n                }\n              case \"checkbox\":\n              case \"radiobutton\":\n                {\n                  const value = field.defaultValue === field.exportValues;\n                  storage.setValue(id, {\n                    value\n                  });\n                  break;\n                }\n              case \"combobox\":\n              case \"listbox\":\n                {\n                  const value = field.defaultValue || \"\";\n                  storage.setValue(id, {\n                    value\n                  });\n                  break;\n                }\n              default:\n                continue;\n            }\n            const domElement = document.querySelector(\"[data-element-id=\\\"\".concat(id, \"\\\"]\"));\n            if (!domElement) {\n              continue;\n            } else if (!GetElementsByNameSet.has(domElement)) {\n              (0, util.warn)(\"_bindResetFormAction - element not allowed: \".concat(id));\n              continue;\n            }\n            domElement.dispatchEvent(new Event(\"resetform\"));\n          }\n          if (this.enableScripting) {\n            var _this$linkService$eve3;\n            (_this$linkService$eve3 = this.linkService.eventBus) === null || _this$linkService$eve3 === void 0 || _this$linkService$eve3.dispatch(\"dispatcheventinsandbox\", {\n              source: this,\n              detail: {\n                id: \"app\",\n                ids: allIds,\n                name: \"ResetForm\"\n              }\n            });\n          }\n          return false;\n        };\n      }\n    }\n    function _setInternalLink2() {\n      this.container.setAttribute(\"data-internal-link\", \"\");\n    }\n    function _bindAttachment2(link, attachment) {\n      let dest = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n      link.href = this.linkService.getAnchorUrl(\"\");\n      link.onclick = () => {\n        var _this$downloadManager;\n        (_this$downloadManager = this.downloadManager) === null || _this$downloadManager === void 0 || _this$downloadManager.openOrDownloadData(attachment.content, attachment.filename, dest);\n        return false;\n      };\n      _classPrivateMethodGet(this, _setInternalLink, _setInternalLink2).call(this);\n    }\n    function _bindSetOCGState2(link, action) {\n      link.href = this.linkService.getAnchorUrl(\"\");\n      link.onclick = () => {\n        this.linkService.executeSetOCGState(action);\n        return false;\n      };\n      _classPrivateMethodGet(this, _setInternalLink, _setInternalLink2).call(this);\n    }\n    class TextAnnotationElement extends AnnotationElement {\n      constructor(parameters) {\n        super(parameters, {\n          isRenderable: true\n        });\n      }\n      render() {\n        this.container.classList.add(\"textAnnotation\");\n        const image = document.createElement(\"img\");\n        image.src = this.imageResourcesPath + \"annotation-\" + this.data.name.toLowerCase() + \".svg\";\n        image.setAttribute(\"data-l10n-id\", \"pdfjs-text-annotation-type\");\n        image.setAttribute(\"data-l10n-args\", JSON.stringify({\n          type: this.data.name\n        }));\n        if (!this.data.popupRef && this.hasPopupData) {\n          this._createPopup();\n        }\n        this.container.append(image);\n        return this.container;\n      }\n    }\n    class WidgetAnnotationElement extends AnnotationElement {\n      render() {\n        if (this.data.alternativeText) {\n          this.container.title = this.data.alternativeText;\n        }\n        return this.container;\n      }\n      showElementAndHideCanvas(element) {\n        if (this.data.hasOwnCanvas) {\n          var _element$previousSibl;\n          if (((_element$previousSibl = element.previousSibling) === null || _element$previousSibl === void 0 ? void 0 : _element$previousSibl.nodeName) === \"CANVAS\") {\n            element.previousSibling.hidden = true;\n          }\n          element.hidden = false;\n        }\n      }\n      _getKeyModifier(event) {\n        return util.FeatureTest.platform.isMac ? event.metaKey : event.ctrlKey;\n      }\n      _setEventListener(element, elementData, baseName, eventName, valueGetter) {\n        if (baseName.includes(\"mouse\")) {\n          element.addEventListener(baseName, event => {\n            var _this$linkService$eve4;\n            (_this$linkService$eve4 = this.linkService.eventBus) === null || _this$linkService$eve4 === void 0 || _this$linkService$eve4.dispatch(\"dispatcheventinsandbox\", {\n              source: this,\n              detail: {\n                id: this.data.id,\n                name: eventName,\n                value: valueGetter(event),\n                shift: event.shiftKey,\n                modifier: this._getKeyModifier(event)\n              }\n            });\n          });\n        } else {\n          element.addEventListener(baseName, event => {\n            var _this$linkService$eve5;\n            if (baseName === \"blur\") {\n              if (!elementData.focused || !event.relatedTarget) {\n                return;\n              }\n              elementData.focused = false;\n            } else if (baseName === \"focus\") {\n              if (elementData.focused) {\n                return;\n              }\n              elementData.focused = true;\n            }\n            if (!valueGetter) {\n              return;\n            }\n            (_this$linkService$eve5 = this.linkService.eventBus) === null || _this$linkService$eve5 === void 0 || _this$linkService$eve5.dispatch(\"dispatcheventinsandbox\", {\n              source: this,\n              detail: {\n                id: this.data.id,\n                name: eventName,\n                value: valueGetter(event)\n              }\n            });\n          });\n        }\n      }\n      _setEventListeners(element, elementData, names, getter) {\n        for (const [baseName, eventName] of names) {\n          var _this$data$actions;\n          if (eventName === \"Action\" || (_this$data$actions = this.data.actions) !== null && _this$data$actions !== void 0 && _this$data$actions[eventName]) {\n            var _this$data$actions2, _this$data$actions3;\n            if (eventName === \"Focus\" || eventName === \"Blur\") {\n              elementData || (elementData = {\n                focused: false\n              });\n            }\n            this._setEventListener(element, elementData, baseName, eventName, getter);\n            if (eventName === \"Focus\" && !((_this$data$actions2 = this.data.actions) !== null && _this$data$actions2 !== void 0 && _this$data$actions2.Blur)) {\n              this._setEventListener(element, elementData, \"blur\", \"Blur\", null);\n            } else if (eventName === \"Blur\" && !((_this$data$actions3 = this.data.actions) !== null && _this$data$actions3 !== void 0 && _this$data$actions3.Focus)) {\n              this._setEventListener(element, elementData, \"focus\", \"Focus\", null);\n            }\n          }\n        }\n      }\n      _setBackgroundColor(element) {\n        const color = this.data.backgroundColor || null;\n        element.style.backgroundColor = color === null ? \"transparent\" : util.Util.makeHexColor(color[0], color[1], color[2]);\n      }\n      _setTextStyle(element) {\n        const TEXT_ALIGNMENT = [\"left\", \"center\", \"right\"];\n        const {\n          fontColor\n        } = this.data.defaultAppearanceData;\n        const fontSize = this.data.defaultAppearanceData.fontSize || DEFAULT_FONT_SIZE;\n        const style = element.style;\n        let computedFontSize;\n        const BORDER_SIZE = 2;\n        const roundToOneDecimal = x => Math.round(10 * x) / 10;\n        if (this.data.multiLine) {\n          const height = Math.abs(this.data.rect[3] - this.data.rect[1] - BORDER_SIZE);\n          const numberOfLines = Math.round(height / (util.LINE_FACTOR * fontSize)) || 1;\n          const lineHeight = height / numberOfLines;\n          computedFontSize = Math.min(fontSize, roundToOneDecimal(lineHeight / util.LINE_FACTOR));\n        } else {\n          const height = Math.abs(this.data.rect[3] - this.data.rect[1] - BORDER_SIZE);\n          computedFontSize = Math.min(fontSize, roundToOneDecimal(height / util.LINE_FACTOR));\n        }\n        style.fontSize = \"calc(\".concat(computedFontSize, \"px * var(--scale-factor))\");\n        style.color = util.Util.makeHexColor(fontColor[0], fontColor[1], fontColor[2]);\n        if (this.data.textAlignment !== null) {\n          style.textAlign = TEXT_ALIGNMENT[this.data.textAlignment];\n        }\n      }\n      _setRequired(element, isRequired) {\n        if (isRequired) {\n          element.setAttribute(\"required\", true);\n        } else {\n          element.removeAttribute(\"required\");\n        }\n        element.setAttribute(\"aria-required\", isRequired);\n      }\n    }\n    class TextWidgetAnnotationElement extends WidgetAnnotationElement {\n      constructor(parameters) {\n        const isRenderable = parameters.renderForms || parameters.data.hasOwnCanvas || !parameters.data.hasAppearance && !!parameters.data.fieldValue;\n        super(parameters, {\n          isRenderable\n        });\n      }\n      setPropertyOnSiblings(base, key, value, keyInStorage) {\n        const storage = this.annotationStorage;\n        for (const element of this._getElementsByName(base.name, base.id)) {\n          if (element.domElement) {\n            element.domElement[key] = value;\n          }\n          storage.setValue(element.id, {\n            [keyInStorage]: value\n          });\n        }\n      }\n      render() {\n        const storage = this.annotationStorage;\n        const id = this.data.id;\n        this.container.classList.add(\"textWidgetAnnotation\");\n        let element = null;\n        if (this.renderForms) {\n          var _this$data$textConten;\n          const storedData = storage.getValue(id, {\n            value: this.data.fieldValue\n          });\n          let textContent = storedData.value || \"\";\n          const maxLen = storage.getValue(id, {\n            charLimit: this.data.maxLen\n          }).charLimit;\n          if (maxLen && textContent.length > maxLen) {\n            textContent = textContent.slice(0, maxLen);\n          }\n          let fieldFormattedValues = storedData.formattedValue || ((_this$data$textConten = this.data.textContent) === null || _this$data$textConten === void 0 ? void 0 : _this$data$textConten.join(\"\\n\")) || null;\n          if (fieldFormattedValues && this.data.comb) {\n            fieldFormattedValues = fieldFormattedValues.replaceAll(/\\s+/g, \"\");\n          }\n          const elementData = {\n            userValue: textContent,\n            formattedValue: fieldFormattedValues,\n            lastCommittedValue: null,\n            commitKey: 1,\n            focused: false\n          };\n          if (this.data.multiLine) {\n            var _fieldFormattedValues;\n            element = document.createElement(\"textarea\");\n            element.textContent = (_fieldFormattedValues = fieldFormattedValues) !== null && _fieldFormattedValues !== void 0 ? _fieldFormattedValues : textContent;\n            if (this.data.doNotScroll) {\n              element.style.overflowY = \"hidden\";\n            }\n          } else {\n            var _fieldFormattedValues2;\n            element = document.createElement(\"input\");\n            element.type = \"text\";\n            element.setAttribute(\"value\", (_fieldFormattedValues2 = fieldFormattedValues) !== null && _fieldFormattedValues2 !== void 0 ? _fieldFormattedValues2 : textContent);\n            if (this.data.doNotScroll) {\n              element.style.overflowX = \"hidden\";\n            }\n          }\n          if (this.data.hasOwnCanvas) {\n            element.hidden = true;\n          }\n          GetElementsByNameSet.add(element);\n          element.setAttribute(\"data-element-id\", id);\n          element.disabled = this.data.readOnly;\n          element.name = this.data.fieldName;\n          element.tabIndex = DEFAULT_TAB_INDEX;\n          this._setRequired(element, this.data.required);\n          if (maxLen) {\n            element.maxLength = maxLen;\n          }\n          element.addEventListener(\"input\", event => {\n            storage.setValue(id, {\n              value: event.target.value\n            });\n            this.setPropertyOnSiblings(element, \"value\", event.target.value, \"value\");\n            elementData.formattedValue = null;\n          });\n          element.addEventListener(\"resetform\", event => {\n            var _this$data$defaultFie;\n            const defaultValue = (_this$data$defaultFie = this.data.defaultFieldValue) !== null && _this$data$defaultFie !== void 0 ? _this$data$defaultFie : \"\";\n            element.value = elementData.userValue = defaultValue;\n            elementData.formattedValue = null;\n          });\n          let blurListener = event => {\n            const {\n              formattedValue\n            } = elementData;\n            if (formattedValue !== null && formattedValue !== undefined) {\n              event.target.value = formattedValue;\n            }\n            event.target.scrollLeft = 0;\n          };\n          if (this.enableScripting && this.hasJSActions) {\n            var _this$data$actions6;\n            element.addEventListener(\"focus\", event => {\n              var _this$data$actions4;\n              if (elementData.focused) {\n                return;\n              }\n              const {\n                target\n              } = event;\n              if (elementData.userValue) {\n                target.value = elementData.userValue;\n              }\n              elementData.lastCommittedValue = target.value;\n              elementData.commitKey = 1;\n              if (!((_this$data$actions4 = this.data.actions) !== null && _this$data$actions4 !== void 0 && _this$data$actions4.Focus)) {\n                elementData.focused = true;\n              }\n            });\n            element.addEventListener(\"updatefromsandbox\", jsEvent => {\n              this.showElementAndHideCanvas(jsEvent.target);\n              const actions = {\n                value(event) {\n                  var _event$detail$value;\n                  elementData.userValue = (_event$detail$value = event.detail.value) !== null && _event$detail$value !== void 0 ? _event$detail$value : \"\";\n                  storage.setValue(id, {\n                    value: elementData.userValue.toString()\n                  });\n                  event.target.value = elementData.userValue;\n                },\n                formattedValue(event) {\n                  const {\n                    formattedValue\n                  } = event.detail;\n                  elementData.formattedValue = formattedValue;\n                  if (formattedValue !== null && formattedValue !== undefined && event.target !== document.activeElement) {\n                    event.target.value = formattedValue;\n                  }\n                  storage.setValue(id, {\n                    formattedValue\n                  });\n                },\n                selRange(event) {\n                  event.target.setSelectionRange(...event.detail.selRange);\n                },\n                charLimit: event => {\n                  var _this$linkService$eve6;\n                  const {\n                    charLimit\n                  } = event.detail;\n                  const {\n                    target\n                  } = event;\n                  if (charLimit === 0) {\n                    target.removeAttribute(\"maxLength\");\n                    return;\n                  }\n                  target.setAttribute(\"maxLength\", charLimit);\n                  let value = elementData.userValue;\n                  if (!value || value.length <= charLimit) {\n                    return;\n                  }\n                  value = value.slice(0, charLimit);\n                  target.value = elementData.userValue = value;\n                  storage.setValue(id, {\n                    value\n                  });\n                  (_this$linkService$eve6 = this.linkService.eventBus) === null || _this$linkService$eve6 === void 0 || _this$linkService$eve6.dispatch(\"dispatcheventinsandbox\", {\n                    source: this,\n                    detail: {\n                      id,\n                      name: \"Keystroke\",\n                      value,\n                      willCommit: true,\n                      commitKey: 1,\n                      selStart: target.selectionStart,\n                      selEnd: target.selectionEnd\n                    }\n                  });\n                }\n              };\n              this._dispatchEventFromSandbox(actions, jsEvent);\n            });\n            element.addEventListener(\"keydown\", event => {\n              var _this$linkService$eve7;\n              elementData.commitKey = 1;\n              let commitKey = -1;\n              if (event.key === \"Escape\") {\n                commitKey = 0;\n              } else if (event.key === \"Enter\" && !this.data.multiLine) {\n                commitKey = 2;\n              } else if (event.key === \"Tab\") {\n                elementData.commitKey = 3;\n              }\n              if (commitKey === -1) {\n                return;\n              }\n              const {\n                value\n              } = event.target;\n              if (elementData.lastCommittedValue === value) {\n                return;\n              }\n              elementData.lastCommittedValue = value;\n              elementData.userValue = value;\n              (_this$linkService$eve7 = this.linkService.eventBus) === null || _this$linkService$eve7 === void 0 || _this$linkService$eve7.dispatch(\"dispatcheventinsandbox\", {\n                source: this,\n                detail: {\n                  id,\n                  name: \"Keystroke\",\n                  value,\n                  willCommit: true,\n                  commitKey,\n                  selStart: event.target.selectionStart,\n                  selEnd: event.target.selectionEnd\n                }\n              });\n            });\n            const _blurListener = blurListener;\n            blurListener = null;\n            element.addEventListener(\"blur\", event => {\n              var _this$data$actions5;\n              if (!elementData.focused || !event.relatedTarget) {\n                return;\n              }\n              if (!((_this$data$actions5 = this.data.actions) !== null && _this$data$actions5 !== void 0 && _this$data$actions5.Blur)) {\n                elementData.focused = false;\n              }\n              const {\n                value\n              } = event.target;\n              elementData.userValue = value;\n              if (elementData.lastCommittedValue !== value) {\n                var _this$linkService$eve8;\n                (_this$linkService$eve8 = this.linkService.eventBus) === null || _this$linkService$eve8 === void 0 || _this$linkService$eve8.dispatch(\"dispatcheventinsandbox\", {\n                  source: this,\n                  detail: {\n                    id,\n                    name: \"Keystroke\",\n                    value,\n                    willCommit: true,\n                    commitKey: elementData.commitKey,\n                    selStart: event.target.selectionStart,\n                    selEnd: event.target.selectionEnd\n                  }\n                });\n              }\n              _blurListener(event);\n            });\n            if ((_this$data$actions6 = this.data.actions) !== null && _this$data$actions6 !== void 0 && _this$data$actions6.Keystroke) {\n              element.addEventListener(\"beforeinput\", event => {\n                var _this$linkService$eve9;\n                elementData.lastCommittedValue = null;\n                const {\n                  data,\n                  target\n                } = event;\n                const {\n                  value,\n                  selectionStart,\n                  selectionEnd\n                } = target;\n                let selStart = selectionStart,\n                  selEnd = selectionEnd;\n                switch (event.inputType) {\n                  case \"deleteWordBackward\":\n                    {\n                      const match = value.substring(0, selectionStart).match(/\\w*[^\\w]*$/);\n                      if (match) {\n                        selStart -= match[0].length;\n                      }\n                      break;\n                    }\n                  case \"deleteWordForward\":\n                    {\n                      const match = value.substring(selectionStart).match(/^[^\\w]*\\w*/);\n                      if (match) {\n                        selEnd += match[0].length;\n                      }\n                      break;\n                    }\n                  case \"deleteContentBackward\":\n                    if (selectionStart === selectionEnd) {\n                      selStart -= 1;\n                    }\n                    break;\n                  case \"deleteContentForward\":\n                    if (selectionStart === selectionEnd) {\n                      selEnd += 1;\n                    }\n                    break;\n                }\n                event.preventDefault();\n                (_this$linkService$eve9 = this.linkService.eventBus) === null || _this$linkService$eve9 === void 0 || _this$linkService$eve9.dispatch(\"dispatcheventinsandbox\", {\n                  source: this,\n                  detail: {\n                    id,\n                    name: \"Keystroke\",\n                    value,\n                    change: data || \"\",\n                    willCommit: false,\n                    selStart,\n                    selEnd\n                  }\n                });\n              });\n            }\n            this._setEventListeners(element, elementData, [[\"focus\", \"Focus\"], [\"blur\", \"Blur\"], [\"mousedown\", \"Mouse Down\"], [\"mouseenter\", \"Mouse Enter\"], [\"mouseleave\", \"Mouse Exit\"], [\"mouseup\", \"Mouse Up\"]], event => event.target.value);\n          }\n          if (blurListener) {\n            element.addEventListener(\"blur\", blurListener);\n          }\n          if (this.data.comb) {\n            const fieldWidth = this.data.rect[2] - this.data.rect[0];\n            const combWidth = fieldWidth / maxLen;\n            element.classList.add(\"comb\");\n            element.style.letterSpacing = \"calc(\".concat(combWidth, \"px * var(--scale-factor) - 1ch)\");\n          }\n        } else {\n          element = document.createElement(\"div\");\n          element.textContent = this.data.fieldValue;\n          element.style.verticalAlign = \"middle\";\n          element.style.display = \"table-cell\";\n          if (this.data.hasOwnCanvas) {\n            element.hidden = true;\n          }\n        }\n        this._setTextStyle(element);\n        this._setBackgroundColor(element);\n        this._setDefaultPropertiesFromJS(element);\n        this.container.append(element);\n        return this.container;\n      }\n    }\n    class SignatureWidgetAnnotationElement extends WidgetAnnotationElement {\n      constructor(parameters) {\n        super(parameters, {\n          isRenderable: !!parameters.data.hasOwnCanvas\n        });\n      }\n    }\n    class CheckboxWidgetAnnotationElement extends WidgetAnnotationElement {\n      constructor(parameters) {\n        super(parameters, {\n          isRenderable: parameters.renderForms\n        });\n      }\n      render() {\n        const storage = this.annotationStorage;\n        const data = this.data;\n        const id = data.id;\n        let value = storage.getValue(id, {\n          value: data.exportValue === data.fieldValue\n        }).value;\n        if (typeof value === \"string\") {\n          value = value !== \"Off\";\n          storage.setValue(id, {\n            value\n          });\n        }\n        this.container.classList.add(\"buttonWidgetAnnotation\", \"checkBox\");\n        const element = document.createElement(\"input\");\n        GetElementsByNameSet.add(element);\n        element.setAttribute(\"data-element-id\", id);\n        element.disabled = data.readOnly;\n        this._setRequired(element, this.data.required);\n        element.type = \"checkbox\";\n        element.name = data.fieldName;\n        if (value) {\n          element.setAttribute(\"checked\", true);\n        }\n        element.setAttribute(\"exportValue\", data.exportValue);\n        element.tabIndex = DEFAULT_TAB_INDEX;\n        element.addEventListener(\"change\", event => {\n          const {\n            name,\n            checked\n          } = event.target;\n          for (const checkbox of this._getElementsByName(name, id)) {\n            const curChecked = checked && checkbox.exportValue === data.exportValue;\n            if (checkbox.domElement) {\n              checkbox.domElement.checked = curChecked;\n            }\n            storage.setValue(checkbox.id, {\n              value: curChecked\n            });\n          }\n          storage.setValue(id, {\n            value: checked\n          });\n        });\n        element.addEventListener(\"resetform\", event => {\n          const defaultValue = data.defaultFieldValue || \"Off\";\n          event.target.checked = defaultValue === data.exportValue;\n        });\n        if (this.enableScripting && this.hasJSActions) {\n          element.addEventListener(\"updatefromsandbox\", jsEvent => {\n            const actions = {\n              value(event) {\n                event.target.checked = event.detail.value !== \"Off\";\n                storage.setValue(id, {\n                  value: event.target.checked\n                });\n              }\n            };\n            this._dispatchEventFromSandbox(actions, jsEvent);\n          });\n          this._setEventListeners(element, null, [[\"change\", \"Validate\"], [\"change\", \"Action\"], [\"focus\", \"Focus\"], [\"blur\", \"Blur\"], [\"mousedown\", \"Mouse Down\"], [\"mouseenter\", \"Mouse Enter\"], [\"mouseleave\", \"Mouse Exit\"], [\"mouseup\", \"Mouse Up\"]], event => event.target.checked);\n        }\n        this._setBackgroundColor(element);\n        this._setDefaultPropertiesFromJS(element);\n        this.container.append(element);\n        return this.container;\n      }\n    }\n    class RadioButtonWidgetAnnotationElement extends WidgetAnnotationElement {\n      constructor(parameters) {\n        super(parameters, {\n          isRenderable: parameters.renderForms\n        });\n      }\n      render() {\n        this.container.classList.add(\"buttonWidgetAnnotation\", \"radioButton\");\n        const storage = this.annotationStorage;\n        const data = this.data;\n        const id = data.id;\n        let value = storage.getValue(id, {\n          value: data.fieldValue === data.buttonValue\n        }).value;\n        if (typeof value === \"string\") {\n          value = value !== data.buttonValue;\n          storage.setValue(id, {\n            value\n          });\n        }\n        if (value) {\n          for (const radio of this._getElementsByName(data.fieldName, id)) {\n            storage.setValue(radio.id, {\n              value: false\n            });\n          }\n        }\n        const element = document.createElement(\"input\");\n        GetElementsByNameSet.add(element);\n        element.setAttribute(\"data-element-id\", id);\n        element.disabled = data.readOnly;\n        this._setRequired(element, this.data.required);\n        element.type = \"radio\";\n        element.name = data.fieldName;\n        if (value) {\n          element.setAttribute(\"checked\", true);\n        }\n        element.tabIndex = DEFAULT_TAB_INDEX;\n        element.addEventListener(\"change\", event => {\n          const {\n            name,\n            checked\n          } = event.target;\n          for (const radio of this._getElementsByName(name, id)) {\n            storage.setValue(radio.id, {\n              value: false\n            });\n          }\n          storage.setValue(id, {\n            value: checked\n          });\n        });\n        element.addEventListener(\"resetform\", event => {\n          const defaultValue = data.defaultFieldValue;\n          event.target.checked = defaultValue !== null && defaultValue !== undefined && defaultValue === data.buttonValue;\n        });\n        if (this.enableScripting && this.hasJSActions) {\n          const pdfButtonValue = data.buttonValue;\n          element.addEventListener(\"updatefromsandbox\", jsEvent => {\n            const actions = {\n              value: event => {\n                const checked = pdfButtonValue === event.detail.value;\n                for (const radio of this._getElementsByName(event.target.name)) {\n                  const curChecked = checked && radio.id === id;\n                  if (radio.domElement) {\n                    radio.domElement.checked = curChecked;\n                  }\n                  storage.setValue(radio.id, {\n                    value: curChecked\n                  });\n                }\n              }\n            };\n            this._dispatchEventFromSandbox(actions, jsEvent);\n          });\n          this._setEventListeners(element, null, [[\"change\", \"Validate\"], [\"change\", \"Action\"], [\"focus\", \"Focus\"], [\"blur\", \"Blur\"], [\"mousedown\", \"Mouse Down\"], [\"mouseenter\", \"Mouse Enter\"], [\"mouseleave\", \"Mouse Exit\"], [\"mouseup\", \"Mouse Up\"]], event => event.target.checked);\n        }\n        this._setBackgroundColor(element);\n        this._setDefaultPropertiesFromJS(element);\n        this.container.append(element);\n        return this.container;\n      }\n    }\n    class PushButtonWidgetAnnotationElement extends LinkAnnotationElement {\n      constructor(parameters) {\n        super(parameters, {\n          ignoreBorder: parameters.data.hasAppearance\n        });\n      }\n      render() {\n        const container = super.render();\n        container.classList.add(\"buttonWidgetAnnotation\", \"pushButton\");\n        if (this.data.alternativeText) {\n          container.title = this.data.alternativeText;\n        }\n        const linkElement = container.lastChild;\n        if (this.enableScripting && this.hasJSActions && linkElement) {\n          this._setDefaultPropertiesFromJS(linkElement);\n          linkElement.addEventListener(\"updatefromsandbox\", jsEvent => {\n            this._dispatchEventFromSandbox({}, jsEvent);\n          });\n        }\n        return container;\n      }\n    }\n    class ChoiceWidgetAnnotationElement extends WidgetAnnotationElement {\n      constructor(parameters) {\n        super(parameters, {\n          isRenderable: parameters.renderForms\n        });\n      }\n      render() {\n        this.container.classList.add(\"choiceWidgetAnnotation\");\n        const storage = this.annotationStorage;\n        const id = this.data.id;\n        const storedData = storage.getValue(id, {\n          value: this.data.fieldValue\n        });\n        const selectElement = document.createElement(\"select\");\n        GetElementsByNameSet.add(selectElement);\n        selectElement.setAttribute(\"data-element-id\", id);\n        selectElement.disabled = this.data.readOnly;\n        this._setRequired(selectElement, this.data.required);\n        selectElement.name = this.data.fieldName;\n        selectElement.tabIndex = DEFAULT_TAB_INDEX;\n        let addAnEmptyEntry = this.data.combo && this.data.options.length > 0;\n        if (!this.data.combo) {\n          selectElement.size = this.data.options.length;\n          if (this.data.multiSelect) {\n            selectElement.multiple = true;\n          }\n        }\n        selectElement.addEventListener(\"resetform\", event => {\n          const defaultValue = this.data.defaultFieldValue;\n          for (const option of selectElement.options) {\n            option.selected = option.value === defaultValue;\n          }\n        });\n        for (const option of this.data.options) {\n          const optionElement = document.createElement(\"option\");\n          optionElement.textContent = option.displayValue;\n          optionElement.value = option.exportValue;\n          if (storedData.value.includes(option.exportValue)) {\n            optionElement.setAttribute(\"selected\", true);\n            addAnEmptyEntry = false;\n          }\n          selectElement.append(optionElement);\n        }\n        let removeEmptyEntry = null;\n        if (addAnEmptyEntry) {\n          const noneOptionElement = document.createElement(\"option\");\n          noneOptionElement.value = \" \";\n          noneOptionElement.setAttribute(\"hidden\", true);\n          noneOptionElement.setAttribute(\"selected\", true);\n          selectElement.prepend(noneOptionElement);\n          removeEmptyEntry = () => {\n            noneOptionElement.remove();\n            selectElement.removeEventListener(\"input\", removeEmptyEntry);\n            removeEmptyEntry = null;\n          };\n          selectElement.addEventListener(\"input\", removeEmptyEntry);\n        }\n        const getValue = isExport => {\n          const name = isExport ? \"value\" : \"textContent\";\n          const {\n            options,\n            multiple\n          } = selectElement;\n          if (!multiple) {\n            return options.selectedIndex === -1 ? null : options[options.selectedIndex][name];\n          }\n          return Array.prototype.filter.call(options, option => option.selected).map(option => option[name]);\n        };\n        let selectedValues = getValue(false);\n        const getItems = event => {\n          const options = event.target.options;\n          return Array.prototype.map.call(options, option => {\n            return {\n              displayValue: option.textContent,\n              exportValue: option.value\n            };\n          });\n        };\n        if (this.enableScripting && this.hasJSActions) {\n          selectElement.addEventListener(\"updatefromsandbox\", jsEvent => {\n            const actions = {\n              value(event) {\n                var _removeEmptyEntry;\n                (_removeEmptyEntry = removeEmptyEntry) === null || _removeEmptyEntry === void 0 || _removeEmptyEntry();\n                const value = event.detail.value;\n                const values = new Set(Array.isArray(value) ? value : [value]);\n                for (const option of selectElement.options) {\n                  option.selected = values.has(option.value);\n                }\n                storage.setValue(id, {\n                  value: getValue(true)\n                });\n                selectedValues = getValue(false);\n              },\n              multipleSelection(event) {\n                selectElement.multiple = true;\n              },\n              remove(event) {\n                const options = selectElement.options;\n                const index = event.detail.remove;\n                options[index].selected = false;\n                selectElement.remove(index);\n                if (options.length > 0) {\n                  const i = Array.prototype.findIndex.call(options, option => option.selected);\n                  if (i === -1) {\n                    options[0].selected = true;\n                  }\n                }\n                storage.setValue(id, {\n                  value: getValue(true),\n                  items: getItems(event)\n                });\n                selectedValues = getValue(false);\n              },\n              clear(event) {\n                while (selectElement.length !== 0) {\n                  selectElement.remove(0);\n                }\n                storage.setValue(id, {\n                  value: null,\n                  items: []\n                });\n                selectedValues = getValue(false);\n              },\n              insert(event) {\n                const {\n                  index,\n                  displayValue,\n                  exportValue\n                } = event.detail.insert;\n                const selectChild = selectElement.children[index];\n                const optionElement = document.createElement(\"option\");\n                optionElement.textContent = displayValue;\n                optionElement.value = exportValue;\n                if (selectChild) {\n                  selectChild.before(optionElement);\n                } else {\n                  selectElement.append(optionElement);\n                }\n                storage.setValue(id, {\n                  value: getValue(true),\n                  items: getItems(event)\n                });\n                selectedValues = getValue(false);\n              },\n              items(event) {\n                const {\n                  items\n                } = event.detail;\n                while (selectElement.length !== 0) {\n                  selectElement.remove(0);\n                }\n                for (const item of items) {\n                  const {\n                    displayValue,\n                    exportValue\n                  } = item;\n                  const optionElement = document.createElement(\"option\");\n                  optionElement.textContent = displayValue;\n                  optionElement.value = exportValue;\n                  selectElement.append(optionElement);\n                }\n                if (selectElement.options.length > 0) {\n                  selectElement.options[0].selected = true;\n                }\n                storage.setValue(id, {\n                  value: getValue(true),\n                  items: getItems(event)\n                });\n                selectedValues = getValue(false);\n              },\n              indices(event) {\n                const indices = new Set(event.detail.indices);\n                for (const option of event.target.options) {\n                  option.selected = indices.has(option.index);\n                }\n                storage.setValue(id, {\n                  value: getValue(true)\n                });\n                selectedValues = getValue(false);\n              },\n              editable(event) {\n                event.target.disabled = !event.detail.editable;\n              }\n            };\n            this._dispatchEventFromSandbox(actions, jsEvent);\n          });\n          selectElement.addEventListener(\"input\", event => {\n            var _this$linkService$eve10;\n            const exportValue = getValue(true);\n            storage.setValue(id, {\n              value: exportValue\n            });\n            event.preventDefault();\n            (_this$linkService$eve10 = this.linkService.eventBus) === null || _this$linkService$eve10 === void 0 || _this$linkService$eve10.dispatch(\"dispatcheventinsandbox\", {\n              source: this,\n              detail: {\n                id,\n                name: \"Keystroke\",\n                value: selectedValues,\n                changeEx: exportValue,\n                willCommit: false,\n                commitKey: 1,\n                keyDown: false\n              }\n            });\n          });\n          this._setEventListeners(selectElement, null, [[\"focus\", \"Focus\"], [\"blur\", \"Blur\"], [\"mousedown\", \"Mouse Down\"], [\"mouseenter\", \"Mouse Enter\"], [\"mouseleave\", \"Mouse Exit\"], [\"mouseup\", \"Mouse Up\"], [\"input\", \"Action\"], [\"input\", \"Validate\"]], event => event.target.value);\n        } else {\n          selectElement.addEventListener(\"input\", function (event) {\n            storage.setValue(id, {\n              value: getValue(true)\n            });\n          });\n        }\n        if (this.data.combo) {\n          this._setTextStyle(selectElement);\n        } else {}\n        this._setBackgroundColor(selectElement);\n        this._setDefaultPropertiesFromJS(selectElement);\n        this.container.append(selectElement);\n        return this.container;\n      }\n    }\n    class PopupAnnotationElement extends AnnotationElement {\n      constructor(parameters) {\n        const {\n          data,\n          elements\n        } = parameters;\n        super(parameters, {\n          isRenderable: AnnotationElement._hasPopupData(data)\n        });\n        this.elements = elements;\n      }\n      render() {\n        this.container.classList.add(\"popupAnnotation\");\n        const popup = new PopupElement({\n          container: this.container,\n          color: this.data.color,\n          titleObj: this.data.titleObj,\n          modificationDate: this.data.modificationDate,\n          contentsObj: this.data.contentsObj,\n          richText: this.data.richText,\n          rect: this.data.rect,\n          parentRect: this.data.parentRect || null,\n          parent: this.parent,\n          elements: this.elements,\n          open: this.data.open\n        });\n        const elementIds = [];\n        for (const element of this.elements) {\n          element.popup = popup;\n          elementIds.push(element.data.id);\n          element.addHighlightArea();\n        }\n        this.container.setAttribute(\"aria-controls\", elementIds.map(id => \"\".concat(util.AnnotationPrefix).concat(id)).join(\",\"));\n        return this.container;\n      }\n    }\n    var _boundKeyDown = /*#__PURE__*/new WeakMap();\n    var _boundHide = /*#__PURE__*/new WeakMap();\n    var _boundShow = /*#__PURE__*/new WeakMap();\n    var _boundToggle = /*#__PURE__*/new WeakMap();\n    var _color = /*#__PURE__*/new WeakMap();\n    var _container = /*#__PURE__*/new WeakMap();\n    var _contentsObj = /*#__PURE__*/new WeakMap();\n    var _dateObj = /*#__PURE__*/new WeakMap();\n    var _elements = /*#__PURE__*/new WeakMap();\n    var _parent = /*#__PURE__*/new WeakMap();\n    var _parentRect = /*#__PURE__*/new WeakMap();\n    var _pinned = /*#__PURE__*/new WeakMap();\n    var _popup = /*#__PURE__*/new WeakMap();\n    var _rect = /*#__PURE__*/new WeakMap();\n    var _richText = /*#__PURE__*/new WeakMap();\n    var _titleObj = /*#__PURE__*/new WeakMap();\n    var _wasVisible = /*#__PURE__*/new WeakMap();\n    var _keyDown = /*#__PURE__*/new WeakSet();\n    var _toggle = /*#__PURE__*/new WeakSet();\n    var _show = /*#__PURE__*/new WeakSet();\n    var _hide = /*#__PURE__*/new WeakSet();\n    class PopupElement {\n      constructor(_ref11) {\n        let {\n          container,\n          color,\n          elements,\n          titleObj,\n          modificationDate,\n          contentsObj,\n          richText,\n          parent,\n          rect,\n          parentRect,\n          open\n        } = _ref11;\n        _classPrivateMethodInitSpec(this, _hide);\n        _classPrivateMethodInitSpec(this, _show);\n        _classPrivateMethodInitSpec(this, _toggle);\n        _classPrivateMethodInitSpec(this, _keyDown);\n        _classPrivateFieldInitSpec(this, _boundKeyDown, {\n          writable: true,\n          value: _classPrivateMethodGet(this, _keyDown, _keyDown2).bind(this)\n        });\n        _classPrivateFieldInitSpec(this, _boundHide, {\n          writable: true,\n          value: _classPrivateMethodGet(this, _hide, _hide2).bind(this)\n        });\n        _classPrivateFieldInitSpec(this, _boundShow, {\n          writable: true,\n          value: _classPrivateMethodGet(this, _show, _show2).bind(this)\n        });\n        _classPrivateFieldInitSpec(this, _boundToggle, {\n          writable: true,\n          value: _classPrivateMethodGet(this, _toggle, _toggle2).bind(this)\n        });\n        _classPrivateFieldInitSpec(this, _color, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _container, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _contentsObj, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _dateObj, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _elements, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _parent, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _parentRect, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _pinned, {\n          writable: true,\n          value: false\n        });\n        _classPrivateFieldInitSpec(this, _popup, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _rect, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _richText, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _titleObj, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _wasVisible, {\n          writable: true,\n          value: false\n        });\n        _classPrivateFieldSet(this, _container, container);\n        _classPrivateFieldSet(this, _titleObj, titleObj);\n        _classPrivateFieldSet(this, _contentsObj, contentsObj);\n        _classPrivateFieldSet(this, _richText, richText);\n        _classPrivateFieldSet(this, _parent, parent);\n        _classPrivateFieldSet(this, _color, color);\n        _classPrivateFieldSet(this, _rect, rect);\n        _classPrivateFieldSet(this, _parentRect, parentRect);\n        _classPrivateFieldSet(this, _elements, elements);\n        _classPrivateFieldSet(this, _dateObj, display_utils.PDFDateString.toDateObject(modificationDate));\n        this.trigger = elements.flatMap(e => e.getElementsToTriggerPopup());\n        for (const element of this.trigger) {\n          element.addEventListener(\"click\", _classPrivateFieldGet(this, _boundToggle));\n          element.addEventListener(\"mouseenter\", _classPrivateFieldGet(this, _boundShow));\n          element.addEventListener(\"mouseleave\", _classPrivateFieldGet(this, _boundHide));\n          element.classList.add(\"popupTriggerArea\");\n        }\n        for (const element of elements) {\n          var _element$container;\n          (_element$container = element.container) === null || _element$container === void 0 || _element$container.addEventListener(\"keydown\", _classPrivateFieldGet(this, _boundKeyDown));\n        }\n        _classPrivateFieldGet(this, _container).hidden = true;\n        if (open) {\n          _classPrivateMethodGet(this, _toggle, _toggle2).call(this);\n        }\n      }\n      render() {\n        if (_classPrivateFieldGet(this, _popup)) {\n          return;\n        }\n        const {\n          page: {\n            view\n          },\n          viewport: {\n            rawDims: {\n              pageWidth,\n              pageHeight,\n              pageX,\n              pageY\n            }\n          }\n        } = _classPrivateFieldGet(this, _parent);\n        const popup = _classPrivateFieldSet(this, _popup, document.createElement(\"div\"));\n        popup.className = \"popup\";\n        if (_classPrivateFieldGet(this, _color)) {\n          const baseColor = popup.style.outlineColor = util.Util.makeHexColor(..._classPrivateFieldGet(this, _color));\n          if (CSS.supports(\"background-color\", \"color-mix(in srgb, red 30%, white)\")) {\n            popup.style.backgroundColor = \"color-mix(in srgb, \".concat(baseColor, \" 30%, white)\");\n          } else {\n            const BACKGROUND_ENLIGHT = 0.7;\n            popup.style.backgroundColor = util.Util.makeHexColor(..._classPrivateFieldGet(this, _color).map(c => Math.floor(BACKGROUND_ENLIGHT * (255 - c) + c)));\n          }\n        }\n        const header = document.createElement(\"span\");\n        header.className = \"header\";\n        const title = document.createElement(\"h1\");\n        header.append(title);\n        ({\n          dir: title.dir,\n          str: title.textContent\n        } = _classPrivateFieldGet(this, _titleObj));\n        popup.append(header);\n        if (_classPrivateFieldGet(this, _dateObj)) {\n          const modificationDate = document.createElement(\"span\");\n          modificationDate.classList.add(\"popupDate\");\n          modificationDate.setAttribute(\"data-l10n-id\", \"pdfjs-annotation-date-string\");\n          modificationDate.setAttribute(\"data-l10n-args\", JSON.stringify({\n            date: _classPrivateFieldGet(this, _dateObj).toLocaleDateString(),\n            time: _classPrivateFieldGet(this, _dateObj).toLocaleTimeString()\n          }));\n          header.append(modificationDate);\n        }\n        const contentsObj = _classPrivateFieldGet(this, _contentsObj);\n        const richText = _classPrivateFieldGet(this, _richText);\n        if (richText !== null && richText !== void 0 && richText.str && (!(contentsObj !== null && contentsObj !== void 0 && contentsObj.str) || contentsObj.str === richText.str)) {\n          xfa_layer.XfaLayer.render({\n            xfaHtml: richText.html,\n            intent: \"richText\",\n            div: popup\n          });\n          popup.lastChild.classList.add(\"richText\", \"popupContent\");\n        } else {\n          const contents = this._formatContents(contentsObj);\n          popup.append(contents);\n        }\n        let useParentRect = !!_classPrivateFieldGet(this, _parentRect);\n        let rect = useParentRect ? _classPrivateFieldGet(this, _parentRect) : _classPrivateFieldGet(this, _rect);\n        for (const element of _classPrivateFieldGet(this, _elements)) {\n          if (!rect || util.Util.intersect(element.data.rect, rect) !== null) {\n            rect = element.data.rect;\n            useParentRect = true;\n            break;\n          }\n        }\n        const normalizedRect = util.Util.normalizeRect([rect[0], view[3] - rect[1] + view[1], rect[2], view[3] - rect[3] + view[1]]);\n        const HORIZONTAL_SPACE_AFTER_ANNOTATION = 5;\n        const parentWidth = useParentRect ? rect[2] - rect[0] + HORIZONTAL_SPACE_AFTER_ANNOTATION : 0;\n        const popupLeft = normalizedRect[0] + parentWidth;\n        const popupTop = normalizedRect[1];\n        const {\n          style\n        } = _classPrivateFieldGet(this, _container);\n        style.left = \"\".concat(100 * (popupLeft - pageX) / pageWidth, \"%\");\n        style.top = \"\".concat(100 * (popupTop - pageY) / pageHeight, \"%\");\n        _classPrivateFieldGet(this, _container).append(popup);\n      }\n      _formatContents(_ref12) {\n        let {\n          str,\n          dir\n        } = _ref12;\n        const p = document.createElement(\"p\");\n        p.classList.add(\"popupContent\");\n        p.dir = dir;\n        const lines = str.split(/(?:\\r\\n?|\\n)/);\n        for (let i = 0, ii = lines.length; i < ii; ++i) {\n          const line = lines[i];\n          p.append(document.createTextNode(line));\n          if (i < ii - 1) {\n            p.append(document.createElement(\"br\"));\n          }\n        }\n        return p;\n      }\n      forceHide() {\n        _classPrivateFieldSet(this, _wasVisible, this.isVisible);\n        if (!_classPrivateFieldGet(this, _wasVisible)) {\n          return;\n        }\n        _classPrivateFieldGet(this, _container).hidden = true;\n      }\n      maybeShow() {\n        if (!_classPrivateFieldGet(this, _wasVisible)) {\n          return;\n        }\n        _classPrivateFieldSet(this, _wasVisible, false);\n        _classPrivateFieldGet(this, _container).hidden = false;\n      }\n      get isVisible() {\n        return _classPrivateFieldGet(this, _container).hidden === false;\n      }\n    }\n    function _keyDown2(event) {\n      if (event.altKey || event.shiftKey || event.ctrlKey || event.metaKey) {\n        return;\n      }\n      if (event.key === \"Enter\" || event.key === \"Escape\" && _classPrivateFieldGet(this, _pinned)) {\n        _classPrivateMethodGet(this, _toggle, _toggle2).call(this);\n      }\n    }\n    function _toggle2() {\n      _classPrivateFieldSet(this, _pinned, !_classPrivateFieldGet(this, _pinned));\n      if (_classPrivateFieldGet(this, _pinned)) {\n        _classPrivateMethodGet(this, _show, _show2).call(this);\n        _classPrivateFieldGet(this, _container).addEventListener(\"click\", _classPrivateFieldGet(this, _boundToggle));\n        _classPrivateFieldGet(this, _container).addEventListener(\"keydown\", _classPrivateFieldGet(this, _boundKeyDown));\n      } else {\n        _classPrivateMethodGet(this, _hide, _hide2).call(this);\n        _classPrivateFieldGet(this, _container).removeEventListener(\"click\", _classPrivateFieldGet(this, _boundToggle));\n        _classPrivateFieldGet(this, _container).removeEventListener(\"keydown\", _classPrivateFieldGet(this, _boundKeyDown));\n      }\n    }\n    function _show2() {\n      if (!_classPrivateFieldGet(this, _popup)) {\n        this.render();\n      }\n      if (!this.isVisible) {\n        _classPrivateFieldGet(this, _container).hidden = false;\n        _classPrivateFieldGet(this, _container).style.zIndex = parseInt(_classPrivateFieldGet(this, _container).style.zIndex) + 1000;\n      } else if (_classPrivateFieldGet(this, _pinned)) {\n        _classPrivateFieldGet(this, _container).classList.add(\"focused\");\n      }\n    }\n    function _hide2() {\n      _classPrivateFieldGet(this, _container).classList.remove(\"focused\");\n      if (_classPrivateFieldGet(this, _pinned) || !this.isVisible) {\n        return;\n      }\n      _classPrivateFieldGet(this, _container).hidden = true;\n      _classPrivateFieldGet(this, _container).style.zIndex = parseInt(_classPrivateFieldGet(this, _container).style.zIndex) - 1000;\n    }\n    class FreeTextAnnotationElement extends AnnotationElement {\n      constructor(parameters) {\n        super(parameters, {\n          isRenderable: true,\n          ignoreBorder: true\n        });\n        this.textContent = parameters.data.textContent;\n        this.textPosition = parameters.data.textPosition;\n        this.annotationEditorType = util.AnnotationEditorType.FREETEXT;\n      }\n      render() {\n        this.container.classList.add(\"freeTextAnnotation\");\n        if (this.textContent) {\n          const content = document.createElement(\"div\");\n          content.classList.add(\"annotationTextContent\");\n          content.setAttribute(\"role\", \"comment\");\n          for (const line of this.textContent) {\n            const lineSpan = document.createElement(\"span\");\n            lineSpan.textContent = line;\n            content.append(lineSpan);\n          }\n          this.container.append(content);\n        }\n        if (!this.data.popupRef && this.hasPopupData) {\n          this._createPopup();\n        }\n        this._editOnDoubleClick();\n        return this.container;\n      }\n      get _isEditable() {\n        return this.data.hasOwnCanvas;\n      }\n    }\n    var _line = /*#__PURE__*/new WeakMap();\n    class LineAnnotationElement extends AnnotationElement {\n      constructor(parameters) {\n        super(parameters, {\n          isRenderable: true,\n          ignoreBorder: true\n        });\n        _classPrivateFieldInitSpec(this, _line, {\n          writable: true,\n          value: null\n        });\n      }\n      render() {\n        this.container.classList.add(\"lineAnnotation\");\n        const data = this.data;\n        const {\n          width,\n          height\n        } = getRectDims(data.rect);\n        const svg = this.svgFactory.create(width, height, true);\n        const line = _classPrivateFieldSet(this, _line, this.svgFactory.createElement(\"svg:line\"));\n        line.setAttribute(\"x1\", data.rect[2] - data.lineCoordinates[0]);\n        line.setAttribute(\"y1\", data.rect[3] - data.lineCoordinates[1]);\n        line.setAttribute(\"x2\", data.rect[2] - data.lineCoordinates[2]);\n        line.setAttribute(\"y2\", data.rect[3] - data.lineCoordinates[3]);\n        line.setAttribute(\"stroke-width\", data.borderStyle.width || 1);\n        line.setAttribute(\"stroke\", \"transparent\");\n        line.setAttribute(\"fill\", \"transparent\");\n        svg.append(line);\n        this.container.append(svg);\n        if (!data.popupRef && this.hasPopupData) {\n          this._createPopup();\n        }\n        return this.container;\n      }\n      getElementsToTriggerPopup() {\n        return _classPrivateFieldGet(this, _line);\n      }\n      addHighlightArea() {\n        this.container.classList.add(\"highlightArea\");\n      }\n    }\n    var _square = /*#__PURE__*/new WeakMap();\n    class SquareAnnotationElement extends AnnotationElement {\n      constructor(parameters) {\n        super(parameters, {\n          isRenderable: true,\n          ignoreBorder: true\n        });\n        _classPrivateFieldInitSpec(this, _square, {\n          writable: true,\n          value: null\n        });\n      }\n      render() {\n        this.container.classList.add(\"squareAnnotation\");\n        const data = this.data;\n        const {\n          width,\n          height\n        } = getRectDims(data.rect);\n        const svg = this.svgFactory.create(width, height, true);\n        const borderWidth = data.borderStyle.width;\n        const square = _classPrivateFieldSet(this, _square, this.svgFactory.createElement(\"svg:rect\"));\n        square.setAttribute(\"x\", borderWidth / 2);\n        square.setAttribute(\"y\", borderWidth / 2);\n        square.setAttribute(\"width\", width - borderWidth);\n        square.setAttribute(\"height\", height - borderWidth);\n        square.setAttribute(\"stroke-width\", borderWidth || 1);\n        square.setAttribute(\"stroke\", \"transparent\");\n        square.setAttribute(\"fill\", \"transparent\");\n        svg.append(square);\n        this.container.append(svg);\n        if (!data.popupRef && this.hasPopupData) {\n          this._createPopup();\n        }\n        return this.container;\n      }\n      getElementsToTriggerPopup() {\n        return _classPrivateFieldGet(this, _square);\n      }\n      addHighlightArea() {\n        this.container.classList.add(\"highlightArea\");\n      }\n    }\n    var _circle = /*#__PURE__*/new WeakMap();\n    class CircleAnnotationElement extends AnnotationElement {\n      constructor(parameters) {\n        super(parameters, {\n          isRenderable: true,\n          ignoreBorder: true\n        });\n        _classPrivateFieldInitSpec(this, _circle, {\n          writable: true,\n          value: null\n        });\n      }\n      render() {\n        this.container.classList.add(\"circleAnnotation\");\n        const data = this.data;\n        const {\n          width,\n          height\n        } = getRectDims(data.rect);\n        const svg = this.svgFactory.create(width, height, true);\n        const borderWidth = data.borderStyle.width;\n        const circle = _classPrivateFieldSet(this, _circle, this.svgFactory.createElement(\"svg:ellipse\"));\n        circle.setAttribute(\"cx\", width / 2);\n        circle.setAttribute(\"cy\", height / 2);\n        circle.setAttribute(\"rx\", width / 2 - borderWidth / 2);\n        circle.setAttribute(\"ry\", height / 2 - borderWidth / 2);\n        circle.setAttribute(\"stroke-width\", borderWidth || 1);\n        circle.setAttribute(\"stroke\", \"transparent\");\n        circle.setAttribute(\"fill\", \"transparent\");\n        svg.append(circle);\n        this.container.append(svg);\n        if (!data.popupRef && this.hasPopupData) {\n          this._createPopup();\n        }\n        return this.container;\n      }\n      getElementsToTriggerPopup() {\n        return _classPrivateFieldGet(this, _circle);\n      }\n      addHighlightArea() {\n        this.container.classList.add(\"highlightArea\");\n      }\n    }\n    var _polyline = /*#__PURE__*/new WeakMap();\n    class PolylineAnnotationElement extends AnnotationElement {\n      constructor(parameters) {\n        super(parameters, {\n          isRenderable: true,\n          ignoreBorder: true\n        });\n        _classPrivateFieldInitSpec(this, _polyline, {\n          writable: true,\n          value: null\n        });\n        this.containerClassName = \"polylineAnnotation\";\n        this.svgElementName = \"svg:polyline\";\n      }\n      render() {\n        this.container.classList.add(this.containerClassName);\n        const data = this.data;\n        const {\n          width,\n          height\n        } = getRectDims(data.rect);\n        const svg = this.svgFactory.create(width, height, true);\n        let points = [];\n        for (const coordinate of data.vertices) {\n          const x = coordinate.x - data.rect[0];\n          const y = data.rect[3] - coordinate.y;\n          points.push(x + \",\" + y);\n        }\n        points = points.join(\" \");\n        const polyline = _classPrivateFieldSet(this, _polyline, this.svgFactory.createElement(this.svgElementName));\n        polyline.setAttribute(\"points\", points);\n        polyline.setAttribute(\"stroke-width\", data.borderStyle.width || 1);\n        polyline.setAttribute(\"stroke\", \"transparent\");\n        polyline.setAttribute(\"fill\", \"transparent\");\n        svg.append(polyline);\n        this.container.append(svg);\n        if (!data.popupRef && this.hasPopupData) {\n          this._createPopup();\n        }\n        return this.container;\n      }\n      getElementsToTriggerPopup() {\n        return _classPrivateFieldGet(this, _polyline);\n      }\n      addHighlightArea() {\n        this.container.classList.add(\"highlightArea\");\n      }\n    }\n    class PolygonAnnotationElement extends PolylineAnnotationElement {\n      constructor(parameters) {\n        super(parameters);\n        this.containerClassName = \"polygonAnnotation\";\n        this.svgElementName = \"svg:polygon\";\n      }\n    }\n    class CaretAnnotationElement extends AnnotationElement {\n      constructor(parameters) {\n        super(parameters, {\n          isRenderable: true,\n          ignoreBorder: true\n        });\n      }\n      render() {\n        this.container.classList.add(\"caretAnnotation\");\n        if (!this.data.popupRef && this.hasPopupData) {\n          this._createPopup();\n        }\n        return this.container;\n      }\n    }\n    var _polylines = /*#__PURE__*/new WeakMap();\n    class InkAnnotationElement extends AnnotationElement {\n      constructor(parameters) {\n        super(parameters, {\n          isRenderable: true,\n          ignoreBorder: true\n        });\n        _classPrivateFieldInitSpec(this, _polylines, {\n          writable: true,\n          value: []\n        });\n        this.containerClassName = \"inkAnnotation\";\n        this.svgElementName = \"svg:polyline\";\n        this.annotationEditorType = util.AnnotationEditorType.INK;\n      }\n      render() {\n        this.container.classList.add(this.containerClassName);\n        const data = this.data;\n        const {\n          width,\n          height\n        } = getRectDims(data.rect);\n        const svg = this.svgFactory.create(width, height, true);\n        for (const inkList of data.inkLists) {\n          let points = [];\n          for (const coordinate of inkList) {\n            const x = coordinate.x - data.rect[0];\n            const y = data.rect[3] - coordinate.y;\n            points.push(\"\".concat(x, \",\").concat(y));\n          }\n          points = points.join(\" \");\n          const polyline = this.svgFactory.createElement(this.svgElementName);\n          _classPrivateFieldGet(this, _polylines).push(polyline);\n          polyline.setAttribute(\"points\", points);\n          polyline.setAttribute(\"stroke-width\", data.borderStyle.width || 1);\n          polyline.setAttribute(\"stroke\", \"transparent\");\n          polyline.setAttribute(\"fill\", \"transparent\");\n          if (!data.popupRef && this.hasPopupData) {\n            this._createPopup();\n          }\n          svg.append(polyline);\n        }\n        this.container.append(svg);\n        return this.container;\n      }\n      getElementsToTriggerPopup() {\n        return _classPrivateFieldGet(this, _polylines);\n      }\n      addHighlightArea() {\n        this.container.classList.add(\"highlightArea\");\n      }\n    }\n    class HighlightAnnotationElement extends AnnotationElement {\n      constructor(parameters) {\n        super(parameters, {\n          isRenderable: true,\n          ignoreBorder: true,\n          createQuadrilaterals: true\n        });\n      }\n      render() {\n        if (!this.data.popupRef && this.hasPopupData) {\n          this._createPopup();\n        }\n        this.container.classList.add(\"highlightAnnotation\");\n        return this.container;\n      }\n    }\n    class UnderlineAnnotationElement extends AnnotationElement {\n      constructor(parameters) {\n        super(parameters, {\n          isRenderable: true,\n          ignoreBorder: true,\n          createQuadrilaterals: true\n        });\n      }\n      render() {\n        if (!this.data.popupRef && this.hasPopupData) {\n          this._createPopup();\n        }\n        this.container.classList.add(\"underlineAnnotation\");\n        return this.container;\n      }\n    }\n    class SquigglyAnnotationElement extends AnnotationElement {\n      constructor(parameters) {\n        super(parameters, {\n          isRenderable: true,\n          ignoreBorder: true,\n          createQuadrilaterals: true\n        });\n      }\n      render() {\n        if (!this.data.popupRef && this.hasPopupData) {\n          this._createPopup();\n        }\n        this.container.classList.add(\"squigglyAnnotation\");\n        return this.container;\n      }\n    }\n    class StrikeOutAnnotationElement extends AnnotationElement {\n      constructor(parameters) {\n        super(parameters, {\n          isRenderable: true,\n          ignoreBorder: true,\n          createQuadrilaterals: true\n        });\n      }\n      render() {\n        if (!this.data.popupRef && this.hasPopupData) {\n          this._createPopup();\n        }\n        this.container.classList.add(\"strikeoutAnnotation\");\n        return this.container;\n      }\n    }\n    class StampAnnotationElement extends AnnotationElement {\n      constructor(parameters) {\n        super(parameters, {\n          isRenderable: true,\n          ignoreBorder: true\n        });\n      }\n      render() {\n        this.container.classList.add(\"stampAnnotation\");\n        if (!this.data.popupRef && this.hasPopupData) {\n          this._createPopup();\n        }\n        return this.container;\n      }\n    }\n    var _trigger = /*#__PURE__*/new WeakMap();\n    var _download = /*#__PURE__*/new WeakSet();\n    class FileAttachmentAnnotationElement extends AnnotationElement {\n      constructor(parameters) {\n        var _this$linkService$eve11;\n        super(parameters, {\n          isRenderable: true\n        });\n        _classPrivateMethodInitSpec(this, _download);\n        _classPrivateFieldInitSpec(this, _trigger, {\n          writable: true,\n          value: null\n        });\n        const {\n          filename,\n          content\n        } = this.data.file;\n        this.filename = (0, display_utils.getFilenameFromUrl)(filename, true);\n        this.content = content;\n        (_this$linkService$eve11 = this.linkService.eventBus) === null || _this$linkService$eve11 === void 0 || _this$linkService$eve11.dispatch(\"fileattachmentannotation\", {\n          source: this,\n          filename,\n          content\n        });\n      }\n      render() {\n        this.container.classList.add(\"fileAttachmentAnnotation\");\n        const {\n          container,\n          data\n        } = this;\n        let trigger;\n        if (data.hasAppearance || data.fillAlpha === 0) {\n          trigger = document.createElement(\"div\");\n        } else {\n          trigger = document.createElement(\"img\");\n          trigger.src = \"\".concat(this.imageResourcesPath, \"annotation-\").concat(/paperclip/i.test(data.name) ? \"paperclip\" : \"pushpin\", \".svg\");\n          if (data.fillAlpha && data.fillAlpha < 1) {\n            trigger.style = \"filter: opacity(\".concat(Math.round(data.fillAlpha * 100), \"%);\");\n          }\n        }\n        trigger.addEventListener(\"dblclick\", _classPrivateMethodGet(this, _download, _download2).bind(this));\n        _classPrivateFieldSet(this, _trigger, trigger);\n        const {\n          isMac\n        } = util.FeatureTest.platform;\n        container.addEventListener(\"keydown\", evt => {\n          if (evt.key === \"Enter\" && (isMac ? evt.metaKey : evt.ctrlKey)) {\n            _classPrivateMethodGet(this, _download, _download2).call(this);\n          }\n        });\n        if (!data.popupRef && this.hasPopupData) {\n          this._createPopup();\n        } else {\n          trigger.classList.add(\"popupTriggerArea\");\n        }\n        container.append(trigger);\n        return container;\n      }\n      getElementsToTriggerPopup() {\n        return _classPrivateFieldGet(this, _trigger);\n      }\n      addHighlightArea() {\n        this.container.classList.add(\"highlightArea\");\n      }\n    }\n    function _download2() {\n      var _this$downloadManager2;\n      (_this$downloadManager2 = this.downloadManager) === null || _this$downloadManager2 === void 0 || _this$downloadManager2.openOrDownloadData(this.content, this.filename);\n    }\n    var _accessibilityManager = /*#__PURE__*/new WeakMap();\n    var _annotationCanvasMap = /*#__PURE__*/new WeakMap();\n    var _editableAnnotations = /*#__PURE__*/new WeakMap();\n    var _appendElement = /*#__PURE__*/new WeakSet();\n    var _setAnnotationCanvasMap = /*#__PURE__*/new WeakSet();\n    class AnnotationLayer {\n      constructor(_ref13) {\n        let {\n          div,\n          accessibilityManager,\n          annotationCanvasMap,\n          page,\n          viewport\n        } = _ref13;\n        _classPrivateMethodInitSpec(this, _setAnnotationCanvasMap);\n        _classPrivateMethodInitSpec(this, _appendElement);\n        _classPrivateFieldInitSpec(this, _accessibilityManager, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _annotationCanvasMap, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _editableAnnotations, {\n          writable: true,\n          value: new Map()\n        });\n        this.div = div;\n        _classPrivateFieldSet(this, _accessibilityManager, accessibilityManager);\n        _classPrivateFieldSet(this, _annotationCanvasMap, annotationCanvasMap);\n        this.page = page;\n        this.viewport = viewport;\n        this.zIndex = 0;\n      }\n      async render(params) {\n        const {\n          annotations\n        } = params;\n        const layer = this.div;\n        (0, display_utils.setLayerDimensions)(layer, this.viewport);\n        const popupToElements = new Map();\n        const elementParams = {\n          data: null,\n          layer,\n          linkService: params.linkService,\n          downloadManager: params.downloadManager,\n          imageResourcesPath: params.imageResourcesPath || \"\",\n          renderForms: params.renderForms !== false,\n          svgFactory: new display_utils.DOMSVGFactory(),\n          annotationStorage: params.annotationStorage || new annotation_storage.AnnotationStorage(),\n          enableScripting: params.enableScripting === true,\n          hasJSActions: params.hasJSActions,\n          fieldObjects: params.fieldObjects,\n          parent: this,\n          elements: null\n        };\n        for (const data of annotations) {\n          if (data.noHTML) {\n            continue;\n          }\n          const isPopupAnnotation = data.annotationType === util.AnnotationType.POPUP;\n          if (!isPopupAnnotation) {\n            const {\n              width,\n              height\n            } = getRectDims(data.rect);\n            if (width <= 0 || height <= 0) {\n              continue;\n            }\n          } else {\n            const elements = popupToElements.get(data.id);\n            if (!elements) {\n              continue;\n            }\n            elementParams.elements = elements;\n          }\n          elementParams.data = data;\n          const element = AnnotationElementFactory.create(elementParams);\n          if (!element.isRenderable) {\n            continue;\n          }\n          if (!isPopupAnnotation && data.popupRef) {\n            const elements = popupToElements.get(data.popupRef);\n            if (!elements) {\n              popupToElements.set(data.popupRef, [element]);\n            } else {\n              elements.push(element);\n            }\n          }\n          if (element.annotationEditorType > 0) {\n            _classPrivateFieldGet(this, _editableAnnotations).set(element.data.id, element);\n          }\n          const rendered = element.render();\n          if (data.hidden) {\n            rendered.style.visibility = \"hidden\";\n          }\n          _classPrivateMethodGet(this, _appendElement, _appendElement2).call(this, rendered, data.id);\n        }\n        _classPrivateMethodGet(this, _setAnnotationCanvasMap, _setAnnotationCanvasMap2).call(this);\n      }\n      update(_ref14) {\n        let {\n          viewport\n        } = _ref14;\n        const layer = this.div;\n        this.viewport = viewport;\n        (0, display_utils.setLayerDimensions)(layer, {\n          rotation: viewport.rotation\n        });\n        _classPrivateMethodGet(this, _setAnnotationCanvasMap, _setAnnotationCanvasMap2).call(this);\n        layer.hidden = false;\n      }\n      getEditableAnnotations() {\n        return Array.from(_classPrivateFieldGet(this, _editableAnnotations).values());\n      }\n      getEditableAnnotation(id) {\n        return _classPrivateFieldGet(this, _editableAnnotations).get(id);\n      }\n    }\n\n    /***/\n    function _appendElement2(element, id) {\n      var _classPrivateFieldGet2;\n      const contentElement = element.firstChild || element;\n      contentElement.id = \"\".concat(util.AnnotationPrefix).concat(id);\n      this.div.append(element);\n      (_classPrivateFieldGet2 = _classPrivateFieldGet(this, _accessibilityManager)) === null || _classPrivateFieldGet2 === void 0 || _classPrivateFieldGet2.moveElementInDOM(this.div, element, contentElement, false);\n    }\n    function _setAnnotationCanvasMap2() {\n      if (!_classPrivateFieldGet(this, _annotationCanvasMap)) {\n        return;\n      }\n      const layer = this.div;\n      for (const [id, canvas] of _classPrivateFieldGet(this, _annotationCanvasMap)) {\n        const element = layer.querySelector(\"[data-annotation-id=\\\"\".concat(id, \"\\\"]\"));\n        if (!element) {\n          continue;\n        }\n        const {\n          firstChild\n        } = element;\n        if (!firstChild) {\n          element.append(canvas);\n        } else if (firstChild.nodeName === \"CANVAS\") {\n          firstChild.replaceWith(canvas);\n        } else {\n          firstChild.before(canvas);\n        }\n      }\n      _classPrivateFieldGet(this, _annotationCanvasMap).clear();\n    }\n  }),\n  /***/780: ( /***/(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {\n    /* harmony export */__webpack_require__.d(__webpack_exports__, {\n      /* harmony export */AnnotationStorage: () => ( /* binding */AnnotationStorage),\n      /* harmony export */PrintAnnotationStorage: () => ( /* binding */PrintAnnotationStorage),\n      /* harmony export */SerializableEmpty: () => ( /* binding */SerializableEmpty)\n      /* harmony export */\n    });\n    /* harmony import */\n    var _shared_util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(266);\n    /* harmony import */\n    var _editor_editor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(115);\n    /* harmony import */\n    var _shared_murmurhash3_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(825);\n    const SerializableEmpty = Object.freeze({\n      map: null,\n      hash: \"\",\n      transfer: undefined\n    });\n    var _modified = /*#__PURE__*/new WeakMap();\n    var _storage = /*#__PURE__*/new WeakMap();\n    var _setModified = /*#__PURE__*/new WeakSet();\n    class AnnotationStorage {\n      constructor() {\n        _classPrivateMethodInitSpec(this, _setModified);\n        _classPrivateFieldInitSpec(this, _modified, {\n          writable: true,\n          value: false\n        });\n        _classPrivateFieldInitSpec(this, _storage, {\n          writable: true,\n          value: new Map()\n        });\n        this.onSetModified = null;\n        this.onResetModified = null;\n        this.onAnnotationEditor = null;\n      }\n      getValue(key, defaultValue) {\n        const value = _classPrivateFieldGet(this, _storage).get(key);\n        if (value === undefined) {\n          return defaultValue;\n        }\n        return Object.assign(defaultValue, value);\n      }\n      getRawValue(key) {\n        return _classPrivateFieldGet(this, _storage).get(key);\n      }\n      remove(key) {\n        _classPrivateFieldGet(this, _storage).delete(key);\n        if (_classPrivateFieldGet(this, _storage).size === 0) {\n          this.resetModified();\n        }\n        if (typeof this.onAnnotationEditor === \"function\") {\n          for (const value of _classPrivateFieldGet(this, _storage).values()) {\n            if (value instanceof _editor_editor_js__WEBPACK_IMPORTED_MODULE_1__.AnnotationEditor) {\n              return;\n            }\n          }\n          this.onAnnotationEditor(null);\n        }\n      }\n      setValue(key, value) {\n        const obj = _classPrivateFieldGet(this, _storage).get(key);\n        let modified = false;\n        if (obj !== undefined) {\n          for (const [entry, val] of Object.entries(value)) {\n            if (obj[entry] !== val) {\n              modified = true;\n              obj[entry] = val;\n            }\n          }\n        } else {\n          modified = true;\n          _classPrivateFieldGet(this, _storage).set(key, value);\n        }\n        if (modified) {\n          _classPrivateMethodGet(this, _setModified, _setModified2).call(this);\n        }\n        if (value instanceof _editor_editor_js__WEBPACK_IMPORTED_MODULE_1__.AnnotationEditor && typeof this.onAnnotationEditor === \"function\") {\n          this.onAnnotationEditor(value.constructor._type);\n        }\n      }\n      has(key) {\n        return _classPrivateFieldGet(this, _storage).has(key);\n      }\n      getAll() {\n        return _classPrivateFieldGet(this, _storage).size > 0 ? (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.objectFromMap)(_classPrivateFieldGet(this, _storage)) : null;\n      }\n      setAll(obj) {\n        for (const [key, val] of Object.entries(obj)) {\n          this.setValue(key, val);\n        }\n      }\n      get size() {\n        return _classPrivateFieldGet(this, _storage).size;\n      }\n      resetModified() {\n        if (_classPrivateFieldGet(this, _modified)) {\n          _classPrivateFieldSet(this, _modified, false);\n          if (typeof this.onResetModified === \"function\") {\n            this.onResetModified();\n          }\n        }\n      }\n      get print() {\n        return new PrintAnnotationStorage(this);\n      }\n      get serializable() {\n        if (_classPrivateFieldGet(this, _storage).size === 0) {\n          return SerializableEmpty;\n        }\n        const map = new Map(),\n          hash = new _shared_murmurhash3_js__WEBPACK_IMPORTED_MODULE_2__.MurmurHash3_64(),\n          transfer = [];\n        const context = Object.create(null);\n        let hasBitmap = false;\n        for (const [key, val] of _classPrivateFieldGet(this, _storage)) {\n          const serialized = val instanceof _editor_editor_js__WEBPACK_IMPORTED_MODULE_1__.AnnotationEditor ? val.serialize(false, context) : val;\n          if (serialized) {\n            map.set(key, serialized);\n            hash.update(\"\".concat(key, \":\").concat(JSON.stringify(serialized)));\n            hasBitmap || (hasBitmap = !!serialized.bitmap);\n          }\n        }\n        if (hasBitmap) {\n          for (const value of map.values()) {\n            if (value.bitmap) {\n              transfer.push(value.bitmap);\n            }\n          }\n        }\n        return map.size > 0 ? {\n          map,\n          hash: hash.hexdigest(),\n          transfer\n        } : SerializableEmpty;\n      }\n    }\n    function _setModified2() {\n      if (!_classPrivateFieldGet(this, _modified)) {\n        _classPrivateFieldSet(this, _modified, true);\n        if (typeof this.onSetModified === \"function\") {\n          this.onSetModified();\n        }\n      }\n    }\n    var _serializable = /*#__PURE__*/new WeakMap();\n    class PrintAnnotationStorage extends AnnotationStorage {\n      constructor(parent) {\n        super();\n        _classPrivateFieldInitSpec(this, _serializable, {\n          writable: true,\n          value: void 0\n        });\n        const {\n          map,\n          hash,\n          transfer\n        } = parent.serializable;\n        const clone = structuredClone(map, transfer ? {\n          transfer\n        } : null);\n        _classPrivateFieldSet(this, _serializable, {\n          map: clone,\n          hash,\n          transfer\n        });\n      }\n      get print() {\n        (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.unreachable)(\"Should not call PrintAnnotationStorage.print\");\n      }\n      get serializable() {\n        return _classPrivateFieldGet(this, _serializable);\n      }\n    }\n\n    /***/\n  }),\n  /***/406: ( /***/(__webpack_module__, __webpack_exports__, __webpack_require__) => {\n    __webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => {\n      try {\n        let _Symbol$iterator;\n        /* harmony export */__webpack_require__.d(__webpack_exports__, {\n          /* harmony export */PDFDataRangeTransport: () => ( /* binding */PDFDataRangeTransport),\n          /* harmony export */PDFWorker: () => ( /* binding */PDFWorker),\n          /* harmony export */build: () => ( /* binding */build),\n          /* harmony export */getDocument: () => ( /* binding */getDocument),\n          /* harmony export */version: () => ( /* binding */version)\n          /* harmony export */\n        });\n        /* unused harmony exports DefaultCanvasFactory, DefaultCMapReaderFactory, DefaultFilterFactory, DefaultStandardFontDataFactory, LoopbackPort, PDFDocumentLoadingTask, PDFDocumentProxy, PDFPageProxy, PDFWorkerUtil, RenderTask */\n        /* harmony import */\n        var _shared_util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(266);\n        /* harmony import */\n        var _annotation_storage_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(780);\n        /* harmony import */\n        var _display_utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(473);\n        /* harmony import */\n        var _font_loader_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(742);\n        /* harmony import */\n        var display_node_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(738);\n        /* harmony import */\n        var _canvas_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(250);\n        /* harmony import */\n        var _worker_options_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(368);\n        /* harmony import */\n        var _shared_message_handler_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(694);\n        /* harmony import */\n        var _metadata_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(472);\n        /* harmony import */\n        var _optional_content_config_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(890);\n        /* harmony import */\n        var _transport_stream_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(92);\n        /* harmony import */\n        var display_fetch_stream__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(171);\n        /* harmony import */\n        var display_network__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(474);\n        /* harmony import */\n        var display_node_stream__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(498);\n        /* harmony import */\n        var _xfa_text_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(521);\n        var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([display_node_utils__WEBPACK_IMPORTED_MODULE_4__, display_node_stream__WEBPACK_IMPORTED_MODULE_13__]);\n        [display_node_utils__WEBPACK_IMPORTED_MODULE_4__, display_node_stream__WEBPACK_IMPORTED_MODULE_13__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__;\n        const DEFAULT_RANGE_CHUNK_SIZE = 65536;\n        const RENDERING_CANCELLED_TIMEOUT = 100;\n        const DELAYED_CLEANUP_TIMEOUT = 5000;\n        const DefaultCanvasFactory = _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.isNodeJS ? display_node_utils__WEBPACK_IMPORTED_MODULE_4__.NodeCanvasFactory : _display_utils_js__WEBPACK_IMPORTED_MODULE_2__.DOMCanvasFactory;\n        const DefaultCMapReaderFactory = _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.isNodeJS ? display_node_utils__WEBPACK_IMPORTED_MODULE_4__.NodeCMapReaderFactory : _display_utils_js__WEBPACK_IMPORTED_MODULE_2__.DOMCMapReaderFactory;\n        const DefaultFilterFactory = _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.isNodeJS ? display_node_utils__WEBPACK_IMPORTED_MODULE_4__.NodeFilterFactory : _display_utils_js__WEBPACK_IMPORTED_MODULE_2__.DOMFilterFactory;\n        const DefaultStandardFontDataFactory = _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.isNodeJS ? display_node_utils__WEBPACK_IMPORTED_MODULE_4__.NodeStandardFontDataFactory : _display_utils_js__WEBPACK_IMPORTED_MODULE_2__.DOMStandardFontDataFactory;\n        function getDocument(src) {\n          var _src$password, _src$length;\n          if (typeof src === \"string\" || src instanceof URL) {\n            src = {\n              url: src\n            };\n          } else if ((0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.isArrayBuffer)(src)) {\n            src = {\n              data: src\n            };\n          }\n          if (typeof src !== \"object\") {\n            throw new Error(\"Invalid parameter in getDocument, need parameter object.\");\n          }\n          if (!src.url && !src.data && !src.range) {\n            throw new Error(\"Invalid parameter object: need either .data, .range or .url\");\n          }\n          const task = new PDFDocumentLoadingTask();\n          const {\n            docId\n          } = task;\n          const url = src.url ? getUrlProp(src.url) : null;\n          const data = src.data ? getDataProp(src.data) : null;\n          const httpHeaders = src.httpHeaders || null;\n          const withCredentials = src.withCredentials === true;\n          const password = (_src$password = src.password) !== null && _src$password !== void 0 ? _src$password : null;\n          const rangeTransport = src.range instanceof PDFDataRangeTransport ? src.range : null;\n          const rangeChunkSize = Number.isInteger(src.rangeChunkSize) && src.rangeChunkSize > 0 ? src.rangeChunkSize : DEFAULT_RANGE_CHUNK_SIZE;\n          let worker = src.worker instanceof PDFWorker ? src.worker : null;\n          const verbosity = src.verbosity;\n          const docBaseUrl = typeof src.docBaseUrl === \"string\" && !(0, _display_utils_js__WEBPACK_IMPORTED_MODULE_2__.isDataScheme)(src.docBaseUrl) ? src.docBaseUrl : null;\n          const cMapUrl = typeof src.cMapUrl === \"string\" ? src.cMapUrl : null;\n          const cMapPacked = src.cMapPacked !== false;\n          const CMapReaderFactory = src.CMapReaderFactory || DefaultCMapReaderFactory;\n          const standardFontDataUrl = typeof src.standardFontDataUrl === \"string\" ? src.standardFontDataUrl : null;\n          const StandardFontDataFactory = src.StandardFontDataFactory || DefaultStandardFontDataFactory;\n          const ignoreErrors = src.stopAtErrors !== true;\n          const maxImageSize = Number.isInteger(src.maxImageSize) && src.maxImageSize > -1 ? src.maxImageSize : -1;\n          const isEvalSupported = src.isEvalSupported !== false;\n          const isOffscreenCanvasSupported = typeof src.isOffscreenCanvasSupported === \"boolean\" ? src.isOffscreenCanvasSupported : !_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.isNodeJS;\n          const canvasMaxAreaInBytes = Number.isInteger(src.canvasMaxAreaInBytes) ? src.canvasMaxAreaInBytes : -1;\n          const disableFontFace = typeof src.disableFontFace === \"boolean\" ? src.disableFontFace : _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.isNodeJS;\n          const fontExtraProperties = src.fontExtraProperties === true;\n          const enableXfa = src.enableXfa === true;\n          const ownerDocument = src.ownerDocument || globalThis.document;\n          const disableRange = src.disableRange === true;\n          const disableStream = src.disableStream === true;\n          const disableAutoFetch = src.disableAutoFetch === true;\n          const pdfBug = src.pdfBug === true;\n          const length = rangeTransport ? rangeTransport.length : (_src$length = src.length) !== null && _src$length !== void 0 ? _src$length : NaN;\n          const useSystemFonts = typeof src.useSystemFonts === \"boolean\" ? src.useSystemFonts : !_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.isNodeJS && !disableFontFace;\n          const useWorkerFetch = typeof src.useWorkerFetch === \"boolean\" ? src.useWorkerFetch : CMapReaderFactory === _display_utils_js__WEBPACK_IMPORTED_MODULE_2__.DOMCMapReaderFactory && StandardFontDataFactory === _display_utils_js__WEBPACK_IMPORTED_MODULE_2__.DOMStandardFontDataFactory && cMapUrl && standardFontDataUrl && (0, _display_utils_js__WEBPACK_IMPORTED_MODULE_2__.isValidFetchUrl)(cMapUrl, document.baseURI) && (0, _display_utils_js__WEBPACK_IMPORTED_MODULE_2__.isValidFetchUrl)(standardFontDataUrl, document.baseURI);\n          const canvasFactory = src.canvasFactory || new DefaultCanvasFactory({\n            ownerDocument\n          });\n          const filterFactory = src.filterFactory || new DefaultFilterFactory({\n            docId,\n            ownerDocument\n          });\n          const styleElement = null;\n          (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.setVerbosityLevel)(verbosity);\n          const transportFactory = {\n            canvasFactory,\n            filterFactory\n          };\n          if (!useWorkerFetch) {\n            transportFactory.cMapReaderFactory = new CMapReaderFactory({\n              baseUrl: cMapUrl,\n              isCompressed: cMapPacked\n            });\n            transportFactory.standardFontDataFactory = new StandardFontDataFactory({\n              baseUrl: standardFontDataUrl\n            });\n          }\n          if (!worker) {\n            const workerParams = {\n              verbosity,\n              port: _worker_options_js__WEBPACK_IMPORTED_MODULE_6__.GlobalWorkerOptions.workerPort\n            };\n            worker = workerParams.port ? PDFWorker.fromPort(workerParams) : new PDFWorker(workerParams);\n            task._worker = worker;\n          }\n          const fetchDocParams = {\n            docId,\n            apiVersion: '4.0.379',\n            data,\n            password,\n            disableAutoFetch,\n            rangeChunkSize,\n            length,\n            docBaseUrl,\n            enableXfa,\n            evaluatorOptions: {\n              maxImageSize,\n              disableFontFace,\n              ignoreErrors,\n              isEvalSupported,\n              isOffscreenCanvasSupported,\n              canvasMaxAreaInBytes,\n              fontExtraProperties,\n              useSystemFonts,\n              cMapUrl: useWorkerFetch ? cMapUrl : null,\n              standardFontDataUrl: useWorkerFetch ? standardFontDataUrl : null\n            }\n          };\n          const transportParams = {\n            ignoreErrors,\n            isEvalSupported,\n            disableFontFace,\n            fontExtraProperties,\n            enableXfa,\n            ownerDocument,\n            disableAutoFetch,\n            pdfBug,\n            styleElement\n          };\n          worker.promise.then(function () {\n            if (task.destroyed) {\n              throw new Error(\"Loading aborted\");\n            }\n            const workerIdPromise = _fetchDocument(worker, fetchDocParams);\n            const networkStreamPromise = new Promise(function (resolve) {\n              let networkStream;\n              if (rangeTransport) {\n                networkStream = new _transport_stream_js__WEBPACK_IMPORTED_MODULE_10__.PDFDataTransportStream({\n                  length,\n                  initialData: rangeTransport.initialData,\n                  progressiveDone: rangeTransport.progressiveDone,\n                  contentDispositionFilename: rangeTransport.contentDispositionFilename,\n                  disableRange,\n                  disableStream\n                }, rangeTransport);\n              } else if (!data) {\n                const createPDFNetworkStream = params => {\n                  if (_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.isNodeJS) {\n                    return new display_node_stream__WEBPACK_IMPORTED_MODULE_13__.PDFNodeStream(params);\n                  }\n                  return (0, _display_utils_js__WEBPACK_IMPORTED_MODULE_2__.isValidFetchUrl)(params.url) ? new display_fetch_stream__WEBPACK_IMPORTED_MODULE_11__.PDFFetchStream(params) : new display_network__WEBPACK_IMPORTED_MODULE_12__.PDFNetworkStream(params);\n                };\n                networkStream = createPDFNetworkStream({\n                  url,\n                  length,\n                  httpHeaders,\n                  withCredentials,\n                  rangeChunkSize,\n                  disableRange,\n                  disableStream\n                });\n              }\n              resolve(networkStream);\n            });\n            return Promise.all([workerIdPromise, networkStreamPromise]).then(function (_ref15) {\n              let [workerId, networkStream] = _ref15;\n              if (task.destroyed) {\n                throw new Error(\"Loading aborted\");\n              }\n              const messageHandler = new _shared_message_handler_js__WEBPACK_IMPORTED_MODULE_7__.MessageHandler(docId, workerId, worker.port);\n              const transport = new WorkerTransport(messageHandler, task, networkStream, transportParams, transportFactory);\n              task._transport = transport;\n              messageHandler.send(\"Ready\", null);\n            });\n          }).catch(task._capability.reject);\n          return task;\n        }\n        async function _fetchDocument(worker, source) {\n          if (worker.destroyed) {\n            throw new Error(\"Worker was destroyed\");\n          }\n          const workerId = await worker.messageHandler.sendWithPromise(\"GetDocRequest\", source, source.data ? [source.data.buffer] : null);\n          if (worker.destroyed) {\n            throw new Error(\"Worker was destroyed\");\n          }\n          return workerId;\n        }\n        function getUrlProp(val) {\n          if (val instanceof URL) {\n            return val.href;\n          }\n          try {\n            return new URL(val, window.location).href;\n          } catch {\n            if (_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.isNodeJS && typeof val === \"string\") {\n              return val;\n            }\n          }\n          throw new Error(\"Invalid PDF url data: \" + \"either string or URL-object is expected in the url property.\");\n        }\n        function getDataProp(val) {\n          if (_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.isNodeJS && typeof Buffer !== \"undefined\" && val instanceof Buffer) {\n            throw new Error(\"Please provide binary data as `Uint8Array`, rather than `Buffer`.\");\n          }\n          if (val instanceof Uint8Array && val.byteLength === val.buffer.byteLength) {\n            return val;\n          }\n          if (typeof val === \"string\") {\n            return (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.stringToBytes)(val);\n          }\n          if (typeof val === \"object\" && !isNaN(val === null || val === void 0 ? void 0 : val.length) || (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.isArrayBuffer)(val)) {\n            return new Uint8Array(val);\n          }\n          throw new Error(\"Invalid PDF binary data: either TypedArray, \" + \"string, or array-like object is expected in the data property.\");\n        }\n        class PDFDocumentLoadingTask {\n          constructor() {\n            var _PDFDocumentLoadingTa, _PDFDocumentLoadingTa2;\n            this._capability = new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.PromiseCapability();\n            this._transport = null;\n            this._worker = null;\n            this.docId = \"d\".concat((_classStaticPrivateFieldSpecSet(PDFDocumentLoadingTask, PDFDocumentLoadingTask, _docId, (_PDFDocumentLoadingTa = _classStaticPrivateFieldSpecGet(PDFDocumentLoadingTask, PDFDocumentLoadingTask, _docId), _PDFDocumentLoadingTa2 = _PDFDocumentLoadingTa++, _PDFDocumentLoadingTa)), _PDFDocumentLoadingTa2));\n            this.destroyed = false;\n            this.onPassword = null;\n            this.onProgress = null;\n          }\n          get promise() {\n            return this._capability.promise;\n          }\n          async destroy() {\n            this.destroyed = true;\n            try {\n              var _this$_worker, _this$_transport;\n              if ((_this$_worker = this._worker) !== null && _this$_worker !== void 0 && _this$_worker.port) {\n                this._worker._pendingDestroy = true;\n              }\n              await ((_this$_transport = this._transport) === null || _this$_transport === void 0 ? void 0 : _this$_transport.destroy());\n            } catch (ex) {\n              var _this$_worker2;\n              if ((_this$_worker2 = this._worker) !== null && _this$_worker2 !== void 0 && _this$_worker2.port) {\n                delete this._worker._pendingDestroy;\n              }\n              throw ex;\n            }\n            this._transport = null;\n            if (this._worker) {\n              this._worker.destroy();\n              this._worker = null;\n            }\n          }\n        }\n        var _docId = {\n          writable: true,\n          value: 0\n        };\n        class PDFDataRangeTransport {\n          constructor(length, initialData) {\n            let progressiveDone = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n            let contentDispositionFilename = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n            this.length = length;\n            this.initialData = initialData;\n            this.progressiveDone = progressiveDone;\n            this.contentDispositionFilename = contentDispositionFilename;\n            this._rangeListeners = [];\n            this._progressListeners = [];\n            this._progressiveReadListeners = [];\n            this._progressiveDoneListeners = [];\n            this._readyCapability = new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.PromiseCapability();\n          }\n          addRangeListener(listener) {\n            this._rangeListeners.push(listener);\n          }\n          addProgressListener(listener) {\n            this._progressListeners.push(listener);\n          }\n          addProgressiveReadListener(listener) {\n            this._progressiveReadListeners.push(listener);\n          }\n          addProgressiveDoneListener(listener) {\n            this._progressiveDoneListeners.push(listener);\n          }\n          onDataRange(begin, chunk) {\n            for (const listener of this._rangeListeners) {\n              listener(begin, chunk);\n            }\n          }\n          onDataProgress(loaded, total) {\n            this._readyCapability.promise.then(() => {\n              for (const listener of this._progressListeners) {\n                listener(loaded, total);\n              }\n            });\n          }\n          onDataProgressiveRead(chunk) {\n            this._readyCapability.promise.then(() => {\n              for (const listener of this._progressiveReadListeners) {\n                listener(chunk);\n              }\n            });\n          }\n          onDataProgressiveDone() {\n            this._readyCapability.promise.then(() => {\n              for (const listener of this._progressiveDoneListeners) {\n                listener();\n              }\n            });\n          }\n          transportReady() {\n            this._readyCapability.resolve();\n          }\n          requestDataRange(begin, end) {\n            (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.unreachable)(\"Abstract method PDFDataRangeTransport.requestDataRange\");\n          }\n          abort() {}\n        }\n        class PDFDocumentProxy {\n          constructor(pdfInfo, transport) {\n            this._pdfInfo = pdfInfo;\n            this._transport = transport;\n          }\n          get annotationStorage() {\n            return this._transport.annotationStorage;\n          }\n          get filterFactory() {\n            return this._transport.filterFactory;\n          }\n          get numPages() {\n            return this._pdfInfo.numPages;\n          }\n          get fingerprints() {\n            return this._pdfInfo.fingerprints;\n          }\n          get isPureXfa() {\n            return (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow)(this, \"isPureXfa\", !!this._transport._htmlForXfa);\n          }\n          get allXfaHtml() {\n            return this._transport._htmlForXfa;\n          }\n          getPage(pageNumber) {\n            return this._transport.getPage(pageNumber);\n          }\n          getPageIndex(ref) {\n            return this._transport.getPageIndex(ref);\n          }\n          getDestinations() {\n            return this._transport.getDestinations();\n          }\n          getDestination(id) {\n            return this._transport.getDestination(id);\n          }\n          getPageLabels() {\n            return this._transport.getPageLabels();\n          }\n          getPageLayout() {\n            return this._transport.getPageLayout();\n          }\n          getPageMode() {\n            return this._transport.getPageMode();\n          }\n          getViewerPreferences() {\n            return this._transport.getViewerPreferences();\n          }\n          getOpenAction() {\n            return this._transport.getOpenAction();\n          }\n          getAttachments() {\n            return this._transport.getAttachments();\n          }\n          getJSActions() {\n            return this._transport.getDocJSActions();\n          }\n          getOutline() {\n            return this._transport.getOutline();\n          }\n          getOptionalContentConfig() {\n            return this._transport.getOptionalContentConfig();\n          }\n          getPermissions() {\n            return this._transport.getPermissions();\n          }\n          getMetadata() {\n            return this._transport.getMetadata();\n          }\n          getMarkInfo() {\n            return this._transport.getMarkInfo();\n          }\n          getData() {\n            return this._transport.getData();\n          }\n          saveDocument() {\n            return this._transport.saveDocument();\n          }\n          getDownloadInfo() {\n            return this._transport.downloadInfoCapability.promise;\n          }\n          cleanup() {\n            let keepLoadedFonts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n            return this._transport.startCleanup(keepLoadedFonts || this.isPureXfa);\n          }\n          destroy() {\n            return this.loadingTask.destroy();\n          }\n          get loadingParams() {\n            return this._transport.loadingParams;\n          }\n          get loadingTask() {\n            return this._transport.loadingTask;\n          }\n          getFieldObjects() {\n            return this._transport.getFieldObjects();\n          }\n          hasJSActions() {\n            return this._transport.hasJSActions();\n          }\n          getCalculationOrderIds() {\n            return this._transport.getCalculationOrderIds();\n          }\n        }\n        var _delayedCleanupTimeout = /*#__PURE__*/new WeakMap();\n        var _pendingCleanup = /*#__PURE__*/new WeakMap();\n        var _tryCleanup = /*#__PURE__*/new WeakSet();\n        var _abortDelayedCleanup = /*#__PURE__*/new WeakSet();\n        class PDFPageProxy {\n          constructor(pageIndex, pageInfo, transport) {\n            let pdfBug = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n            _classPrivateMethodInitSpec(this, _abortDelayedCleanup);\n            _classPrivateMethodInitSpec(this, _tryCleanup);\n            _classPrivateFieldInitSpec(this, _delayedCleanupTimeout, {\n              writable: true,\n              value: null\n            });\n            _classPrivateFieldInitSpec(this, _pendingCleanup, {\n              writable: true,\n              value: false\n            });\n            this._pageIndex = pageIndex;\n            this._pageInfo = pageInfo;\n            this._transport = transport;\n            this._stats = pdfBug ? new _display_utils_js__WEBPACK_IMPORTED_MODULE_2__.StatTimer() : null;\n            this._pdfBug = pdfBug;\n            this.commonObjs = transport.commonObjs;\n            this.objs = new PDFObjects();\n            this._maybeCleanupAfterRender = false;\n            this._intentStates = new Map();\n            this.destroyed = false;\n          }\n          get pageNumber() {\n            return this._pageIndex + 1;\n          }\n          get rotate() {\n            return this._pageInfo.rotate;\n          }\n          get ref() {\n            return this._pageInfo.ref;\n          }\n          get userUnit() {\n            return this._pageInfo.userUnit;\n          }\n          get view() {\n            return this._pageInfo.view;\n          }\n          getViewport() {\n            let {\n              scale,\n              rotation = this.rotate,\n              offsetX = 0,\n              offsetY = 0,\n              dontFlip = false\n            } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n            return new _display_utils_js__WEBPACK_IMPORTED_MODULE_2__.PageViewport({\n              viewBox: this.view,\n              scale,\n              rotation,\n              offsetX,\n              offsetY,\n              dontFlip\n            });\n          }\n          getAnnotations() {\n            let {\n              intent = \"display\"\n            } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n            const intentArgs = this._transport.getRenderingIntent(intent);\n            return this._transport.getAnnotations(this._pageIndex, intentArgs.renderingIntent);\n          }\n          getJSActions() {\n            return this._transport.getPageJSActions(this._pageIndex);\n          }\n          get filterFactory() {\n            return this._transport.filterFactory;\n          }\n          get isPureXfa() {\n            return (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow)(this, \"isPureXfa\", !!this._transport._htmlForXfa);\n          }\n          async getXfa() {\n            var _this$_transport$_htm;\n            return ((_this$_transport$_htm = this._transport._htmlForXfa) === null || _this$_transport$_htm === void 0 ? void 0 : _this$_transport$_htm.children[this._pageIndex]) || null;\n          }\n          render(_ref16) {\n            var _this$_stats, _intentState;\n            let {\n              canvasContext,\n              viewport,\n              intent = \"display\",\n              annotationMode = _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationMode.ENABLE,\n              transform = null,\n              background = null,\n              optionalContentConfigPromise = null,\n              annotationCanvasMap = null,\n              pageColors = null,\n              printAnnotationStorage = null\n            } = _ref16;\n            (_this$_stats = this._stats) === null || _this$_stats === void 0 || _this$_stats.time(\"Overall\");\n            const intentArgs = this._transport.getRenderingIntent(intent, annotationMode, printAnnotationStorage);\n            _classPrivateFieldSet(this, _pendingCleanup, false);\n            _classPrivateMethodGet(this, _abortDelayedCleanup, _abortDelayedCleanup2).call(this);\n            if (!optionalContentConfigPromise) {\n              optionalContentConfigPromise = this._transport.getOptionalContentConfig();\n            }\n            let intentState = this._intentStates.get(intentArgs.cacheKey);\n            if (!intentState) {\n              intentState = Object.create(null);\n              this._intentStates.set(intentArgs.cacheKey, intentState);\n            }\n            if (intentState.streamReaderCancelTimeout) {\n              clearTimeout(intentState.streamReaderCancelTimeout);\n              intentState.streamReaderCancelTimeout = null;\n            }\n            const intentPrint = !!(intentArgs.renderingIntent & _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.RenderingIntentFlag.PRINT);\n            if (!intentState.displayReadyCapability) {\n              var _this$_stats2;\n              intentState.displayReadyCapability = new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.PromiseCapability();\n              intentState.operatorList = {\n                fnArray: [],\n                argsArray: [],\n                lastChunk: false,\n                separateAnnots: null\n              };\n              (_this$_stats2 = this._stats) === null || _this$_stats2 === void 0 || _this$_stats2.time(\"Page Request\");\n              this._pumpOperatorList(intentArgs);\n            }\n            const complete = error => {\n              var _this$_stats3, _this$_stats4;\n              intentState.renderTasks.delete(internalRenderTask);\n              if (this._maybeCleanupAfterRender || intentPrint) {\n                _classPrivateFieldSet(this, _pendingCleanup, true);\n              }\n              _classPrivateMethodGet(this, _tryCleanup, _tryCleanup2).call(this, !intentPrint);\n              if (error) {\n                internalRenderTask.capability.reject(error);\n                this._abortOperatorList({\n                  intentState,\n                  reason: error instanceof Error ? error : new Error(error)\n                });\n              } else {\n                internalRenderTask.capability.resolve();\n              }\n              (_this$_stats3 = this._stats) === null || _this$_stats3 === void 0 || _this$_stats3.timeEnd(\"Rendering\");\n              (_this$_stats4 = this._stats) === null || _this$_stats4 === void 0 || _this$_stats4.timeEnd(\"Overall\");\n            };\n            const internalRenderTask = new InternalRenderTask({\n              callback: complete,\n              params: {\n                canvasContext,\n                viewport,\n                transform,\n                background\n              },\n              objs: this.objs,\n              commonObjs: this.commonObjs,\n              annotationCanvasMap,\n              operatorList: intentState.operatorList,\n              pageIndex: this._pageIndex,\n              canvasFactory: this._transport.canvasFactory,\n              filterFactory: this._transport.filterFactory,\n              useRequestAnimationFrame: !intentPrint,\n              pdfBug: this._pdfBug,\n              pageColors\n            });\n            ((_intentState = intentState).renderTasks || (_intentState.renderTasks = new Set())).add(internalRenderTask);\n            const renderTask = internalRenderTask.task;\n            Promise.all([intentState.displayReadyCapability.promise, optionalContentConfigPromise]).then(_ref17 => {\n              var _this$_stats5;\n              let [transparency, optionalContentConfig] = _ref17;\n              if (this.destroyed) {\n                complete();\n                return;\n              }\n              (_this$_stats5 = this._stats) === null || _this$_stats5 === void 0 || _this$_stats5.time(\"Rendering\");\n              internalRenderTask.initializeGraphics({\n                transparency,\n                optionalContentConfig\n              });\n              internalRenderTask.operatorListChanged();\n            }).catch(complete);\n            return renderTask;\n          }\n          getOperatorList() {\n            let {\n              intent = \"display\",\n              annotationMode = _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationMode.ENABLE,\n              printAnnotationStorage = null\n            } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n            function operatorListChanged() {\n              if (intentState.operatorList.lastChunk) {\n                intentState.opListReadCapability.resolve(intentState.operatorList);\n                intentState.renderTasks.delete(opListTask);\n              }\n            }\n            const intentArgs = this._transport.getRenderingIntent(intent, annotationMode, printAnnotationStorage, true);\n            let intentState = this._intentStates.get(intentArgs.cacheKey);\n            if (!intentState) {\n              intentState = Object.create(null);\n              this._intentStates.set(intentArgs.cacheKey, intentState);\n            }\n            let opListTask;\n            if (!intentState.opListReadCapability) {\n              var _intentState2, _this$_stats6;\n              opListTask = Object.create(null);\n              opListTask.operatorListChanged = operatorListChanged;\n              intentState.opListReadCapability = new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.PromiseCapability();\n              ((_intentState2 = intentState).renderTasks || (_intentState2.renderTasks = new Set())).add(opListTask);\n              intentState.operatorList = {\n                fnArray: [],\n                argsArray: [],\n                lastChunk: false,\n                separateAnnots: null\n              };\n              (_this$_stats6 = this._stats) === null || _this$_stats6 === void 0 || _this$_stats6.time(\"Page Request\");\n              this._pumpOperatorList(intentArgs);\n            }\n            return intentState.opListReadCapability.promise;\n          }\n          streamTextContent() {\n            let {\n              includeMarkedContent = false,\n              disableNormalization = false\n            } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n            const TEXT_CONTENT_CHUNK_SIZE = 100;\n            return this._transport.messageHandler.sendWithStream(\"GetTextContent\", {\n              pageIndex: this._pageIndex,\n              includeMarkedContent: includeMarkedContent === true,\n              disableNormalization: disableNormalization === true\n            }, {\n              highWaterMark: TEXT_CONTENT_CHUNK_SIZE,\n              size(textContent) {\n                return textContent.items.length;\n              }\n            });\n          }\n          getTextContent() {\n            let params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n            if (this._transport._htmlForXfa) {\n              return this.getXfa().then(xfa => {\n                return _xfa_text_js__WEBPACK_IMPORTED_MODULE_14__.XfaText.textContent(xfa);\n              });\n            }\n            const readableStream = this.streamTextContent(params);\n            return new Promise(function (resolve, reject) {\n              function pump() {\n                reader.read().then(function (_ref18) {\n                  let {\n                    value,\n                    done\n                  } = _ref18;\n                  if (done) {\n                    resolve(textContent);\n                    return;\n                  }\n                  Object.assign(textContent.styles, value.styles);\n                  textContent.items.push(...value.items);\n                  pump();\n                }, reject);\n              }\n              const reader = readableStream.getReader();\n              const textContent = {\n                items: [],\n                styles: Object.create(null)\n              };\n              pump();\n            });\n          }\n          getStructTree() {\n            return this._transport.getStructTree(this._pageIndex);\n          }\n          _destroy() {\n            this.destroyed = true;\n            const waitOn = [];\n            for (const intentState of this._intentStates.values()) {\n              this._abortOperatorList({\n                intentState,\n                reason: new Error(\"Page was destroyed.\"),\n                force: true\n              });\n              if (intentState.opListReadCapability) {\n                continue;\n              }\n              for (const internalRenderTask of intentState.renderTasks) {\n                waitOn.push(internalRenderTask.completed);\n                internalRenderTask.cancel();\n              }\n            }\n            this.objs.clear();\n            _classPrivateFieldSet(this, _pendingCleanup, false);\n            _classPrivateMethodGet(this, _abortDelayedCleanup, _abortDelayedCleanup2).call(this);\n            return Promise.all(waitOn);\n          }\n          cleanup() {\n            let resetStats = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n            _classPrivateFieldSet(this, _pendingCleanup, true);\n            const success = _classPrivateMethodGet(this, _tryCleanup, _tryCleanup2).call(this, false);\n            if (resetStats && success) {\n              this._stats && (this._stats = new _display_utils_js__WEBPACK_IMPORTED_MODULE_2__.StatTimer());\n            }\n            return success;\n          }\n          _startRenderPage(transparency, cacheKey) {\n            var _this$_stats7, _intentState$displayR;\n            const intentState = this._intentStates.get(cacheKey);\n            if (!intentState) {\n              return;\n            }\n            (_this$_stats7 = this._stats) === null || _this$_stats7 === void 0 || _this$_stats7.timeEnd(\"Page Request\");\n            (_intentState$displayR = intentState.displayReadyCapability) === null || _intentState$displayR === void 0 || _intentState$displayR.resolve(transparency);\n          }\n          _renderPageChunk(operatorListChunk, intentState) {\n            for (let i = 0, ii = operatorListChunk.length; i < ii; i++) {\n              intentState.operatorList.fnArray.push(operatorListChunk.fnArray[i]);\n              intentState.operatorList.argsArray.push(operatorListChunk.argsArray[i]);\n            }\n            intentState.operatorList.lastChunk = operatorListChunk.lastChunk;\n            intentState.operatorList.separateAnnots = operatorListChunk.separateAnnots;\n            for (const internalRenderTask of intentState.renderTasks) {\n              internalRenderTask.operatorListChanged();\n            }\n            if (operatorListChunk.lastChunk) {\n              _classPrivateMethodGet(this, _tryCleanup, _tryCleanup2).call(this, true);\n            }\n          }\n          _pumpOperatorList(_ref19) {\n            let {\n              renderingIntent,\n              cacheKey,\n              annotationStorageSerializable\n            } = _ref19;\n            const {\n              map,\n              transfer\n            } = annotationStorageSerializable;\n            const readableStream = this._transport.messageHandler.sendWithStream(\"GetOperatorList\", {\n              pageIndex: this._pageIndex,\n              intent: renderingIntent,\n              cacheKey,\n              annotationStorage: map\n            }, transfer);\n            const reader = readableStream.getReader();\n            const intentState = this._intentStates.get(cacheKey);\n            intentState.streamReader = reader;\n            const pump = () => {\n              reader.read().then(_ref20 => {\n                let {\n                  value,\n                  done\n                } = _ref20;\n                if (done) {\n                  intentState.streamReader = null;\n                  return;\n                }\n                if (this._transport.destroyed) {\n                  return;\n                }\n                this._renderPageChunk(value, intentState);\n                pump();\n              }, reason => {\n                intentState.streamReader = null;\n                if (this._transport.destroyed) {\n                  return;\n                }\n                if (intentState.operatorList) {\n                  intentState.operatorList.lastChunk = true;\n                  for (const internalRenderTask of intentState.renderTasks) {\n                    internalRenderTask.operatorListChanged();\n                  }\n                  _classPrivateMethodGet(this, _tryCleanup, _tryCleanup2).call(this, true);\n                }\n                if (intentState.displayReadyCapability) {\n                  intentState.displayReadyCapability.reject(reason);\n                } else if (intentState.opListReadCapability) {\n                  intentState.opListReadCapability.reject(reason);\n                } else {\n                  throw reason;\n                }\n              });\n            };\n            pump();\n          }\n          _abortOperatorList(_ref21) {\n            let {\n              intentState,\n              reason,\n              force = false\n            } = _ref21;\n            if (!intentState.streamReader) {\n              return;\n            }\n            if (intentState.streamReaderCancelTimeout) {\n              clearTimeout(intentState.streamReaderCancelTimeout);\n              intentState.streamReaderCancelTimeout = null;\n            }\n            if (!force) {\n              if (intentState.renderTasks.size > 0) {\n                return;\n              }\n              if (reason instanceof _display_utils_js__WEBPACK_IMPORTED_MODULE_2__.RenderingCancelledException) {\n                let delay = RENDERING_CANCELLED_TIMEOUT;\n                if (reason.extraDelay > 0 && reason.extraDelay < 1000) {\n                  delay += reason.extraDelay;\n                }\n                intentState.streamReaderCancelTimeout = setTimeout(() => {\n                  intentState.streamReaderCancelTimeout = null;\n                  this._abortOperatorList({\n                    intentState,\n                    reason,\n                    force: true\n                  });\n                }, delay);\n                return;\n              }\n            }\n            intentState.streamReader.cancel(new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AbortException(reason.message)).catch(() => {});\n            intentState.streamReader = null;\n            if (this._transport.destroyed) {\n              return;\n            }\n            for (const [curCacheKey, curIntentState] of this._intentStates) {\n              if (curIntentState === intentState) {\n                this._intentStates.delete(curCacheKey);\n                break;\n              }\n            }\n            this.cleanup();\n          }\n          get stats() {\n            return this._stats;\n          }\n        }\n        function _tryCleanup2() {\n          let delayed = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n          _classPrivateMethodGet(this, _abortDelayedCleanup, _abortDelayedCleanup2).call(this);\n          if (!_classPrivateFieldGet(this, _pendingCleanup) || this.destroyed) {\n            return false;\n          }\n          if (delayed) {\n            _classPrivateFieldSet(this, _delayedCleanupTimeout, setTimeout(() => {\n              _classPrivateFieldSet(this, _delayedCleanupTimeout, null);\n              _classPrivateMethodGet(this, _tryCleanup, _tryCleanup2).call(this, false);\n            }, DELAYED_CLEANUP_TIMEOUT));\n            return false;\n          }\n          for (const {\n            renderTasks,\n            operatorList\n          } of this._intentStates.values()) {\n            if (renderTasks.size > 0 || !operatorList.lastChunk) {\n              return false;\n            }\n          }\n          this._intentStates.clear();\n          this.objs.clear();\n          _classPrivateFieldSet(this, _pendingCleanup, false);\n          return true;\n        }\n        function _abortDelayedCleanup2() {\n          if (_classPrivateFieldGet(this, _delayedCleanupTimeout)) {\n            clearTimeout(_classPrivateFieldGet(this, _delayedCleanupTimeout));\n            _classPrivateFieldSet(this, _delayedCleanupTimeout, null);\n          }\n        }\n        var _listeners = /*#__PURE__*/new WeakMap();\n        var _deferred = /*#__PURE__*/new WeakMap();\n        class LoopbackPort {\n          constructor() {\n            _classPrivateFieldInitSpec(this, _listeners, {\n              writable: true,\n              value: new Set()\n            });\n            _classPrivateFieldInitSpec(this, _deferred, {\n              writable: true,\n              value: Promise.resolve()\n            });\n          }\n          postMessage(obj, transfer) {\n            const event = {\n              data: structuredClone(obj, transfer ? {\n                transfer\n              } : null)\n            };\n            _classPrivateFieldGet(this, _deferred).then(() => {\n              for (const listener of _classPrivateFieldGet(this, _listeners)) {\n                listener.call(this, event);\n              }\n            });\n          }\n          addEventListener(name, listener) {\n            _classPrivateFieldGet(this, _listeners).add(listener);\n          }\n          removeEventListener(name, listener) {\n            _classPrivateFieldGet(this, _listeners).delete(listener);\n          }\n          terminate() {\n            _classPrivateFieldGet(this, _listeners).clear();\n          }\n        }\n        const PDFWorkerUtil = {\n          isWorkerDisabled: false,\n          fakeWorkerId: 0\n        };\n        {\n          if (_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.isNodeJS) {\n            var _worker_options_js__W;\n            PDFWorkerUtil.isWorkerDisabled = true;\n            (_worker_options_js__W = _worker_options_js__WEBPACK_IMPORTED_MODULE_6__.GlobalWorkerOptions).workerSrc || (_worker_options_js__W.workerSrc = \"./pdf.worker.mjs\");\n          }\n          PDFWorkerUtil.isSameOrigin = function (baseUrl, otherUrl) {\n            let base;\n            try {\n              base = new URL(baseUrl);\n              if (!base.origin || base.origin === \"null\") {\n                return false;\n              }\n            } catch {\n              return false;\n            }\n            const other = new URL(otherUrl, base);\n            return base.origin === other.origin;\n          };\n          PDFWorkerUtil.createCDNWrapper = function (url) {\n            const wrapper = \"await import(\\\"\".concat(url, \"\\\");\");\n            return URL.createObjectURL(new Blob([wrapper], {\n              type: \"text/javascript\"\n            }));\n          };\n        }\n        class PDFWorker {\n          constructor() {\n            let {\n              name = null,\n              port = null,\n              verbosity = (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.getVerbosityLevel)()\n            } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n            this.name = name;\n            this.destroyed = false;\n            this.verbosity = verbosity;\n            this._readyCapability = new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.PromiseCapability();\n            this._port = null;\n            this._webWorker = null;\n            this._messageHandler = null;\n            if (port) {\n              var _classStaticPrivateFi;\n              if ((_classStaticPrivateFi = _classStaticPrivateFieldSpecGet(PDFWorker, PDFWorker, _workerPorts)) !== null && _classStaticPrivateFi !== void 0 && _classStaticPrivateFi.has(port)) {\n                throw new Error(\"Cannot use more than one PDFWorker per port.\");\n              }\n              (_classStaticPrivateFieldSpecGet(PDFWorker, PDFWorker, _workerPorts) || _classStaticPrivateFieldSpecSet(PDFWorker, PDFWorker, _workerPorts, new WeakMap())).set(port, this);\n              this._initializeFromPort(port);\n              return;\n            }\n            this._initialize();\n          }\n          get promise() {\n            return this._readyCapability.promise;\n          }\n          get port() {\n            return this._port;\n          }\n          get messageHandler() {\n            return this._messageHandler;\n          }\n          _initializeFromPort(port) {\n            this._port = port;\n            this._messageHandler = new _shared_message_handler_js__WEBPACK_IMPORTED_MODULE_7__.MessageHandler(\"main\", \"worker\", port);\n            this._messageHandler.on(\"ready\", function () {});\n            this._readyCapability.resolve();\n            this._messageHandler.send(\"configure\", {\n              verbosity: this.verbosity\n            });\n          }\n          _initialize() {\n            if (!PDFWorkerUtil.isWorkerDisabled && !_classStaticPrivateFieldSpecGet(PDFWorker, PDFWorker, _mainThreadWorkerMessageHandler)) {\n              let {\n                workerSrc\n              } = PDFWorker;\n              try {\n                if (!PDFWorkerUtil.isSameOrigin(window.location.href, workerSrc)) {\n                  workerSrc = PDFWorkerUtil.createCDNWrapper(new URL(workerSrc, window.location).href);\n                }\n                const worker = new Worker(workerSrc, {\n                  type: \"module\"\n                });\n                const messageHandler = new _shared_message_handler_js__WEBPACK_IMPORTED_MODULE_7__.MessageHandler(\"main\", \"worker\", worker);\n                const terminateEarly = () => {\n                  worker.removeEventListener(\"error\", onWorkerError);\n                  messageHandler.destroy();\n                  worker.terminate();\n                  if (this.destroyed) {\n                    this._readyCapability.reject(new Error(\"Worker was destroyed\"));\n                  } else {\n                    this._setupFakeWorker();\n                  }\n                };\n                const onWorkerError = () => {\n                  if (!this._webWorker) {\n                    terminateEarly();\n                  }\n                };\n                worker.addEventListener(\"error\", onWorkerError);\n                messageHandler.on(\"test\", data => {\n                  worker.removeEventListener(\"error\", onWorkerError);\n                  if (this.destroyed) {\n                    terminateEarly();\n                    return;\n                  }\n                  if (data) {\n                    this._messageHandler = messageHandler;\n                    this._port = worker;\n                    this._webWorker = worker;\n                    this._readyCapability.resolve();\n                    messageHandler.send(\"configure\", {\n                      verbosity: this.verbosity\n                    });\n                  } else {\n                    this._setupFakeWorker();\n                    messageHandler.destroy();\n                    worker.terminate();\n                  }\n                });\n                messageHandler.on(\"ready\", data => {\n                  worker.removeEventListener(\"error\", onWorkerError);\n                  if (this.destroyed) {\n                    terminateEarly();\n                    return;\n                  }\n                  try {\n                    sendTest();\n                  } catch {\n                    this._setupFakeWorker();\n                  }\n                });\n                const sendTest = () => {\n                  const testObj = new Uint8Array();\n                  messageHandler.send(\"test\", testObj, [testObj.buffer]);\n                };\n                sendTest();\n                return;\n              } catch {\n                (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.info)(\"The worker has been disabled.\");\n              }\n            }\n            this._setupFakeWorker();\n          }\n          _setupFakeWorker() {\n            if (!PDFWorkerUtil.isWorkerDisabled) {\n              (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(\"Setting up fake worker.\");\n              PDFWorkerUtil.isWorkerDisabled = true;\n            }\n            PDFWorker._setupFakeWorkerGlobal.then(WorkerMessageHandler => {\n              if (this.destroyed) {\n                this._readyCapability.reject(new Error(\"Worker was destroyed\"));\n                return;\n              }\n              const port = new LoopbackPort();\n              this._port = port;\n              const id = \"fake\".concat(PDFWorkerUtil.fakeWorkerId++);\n              const workerHandler = new _shared_message_handler_js__WEBPACK_IMPORTED_MODULE_7__.MessageHandler(id + \"_worker\", id, port);\n              WorkerMessageHandler.setup(workerHandler, port);\n              const messageHandler = new _shared_message_handler_js__WEBPACK_IMPORTED_MODULE_7__.MessageHandler(id, id + \"_worker\", port);\n              this._messageHandler = messageHandler;\n              this._readyCapability.resolve();\n              messageHandler.send(\"configure\", {\n                verbosity: this.verbosity\n              });\n            }).catch(reason => {\n              this._readyCapability.reject(new Error(\"Setting up fake worker failed: \\\"\".concat(reason.message, \"\\\".\")));\n            });\n          }\n          destroy() {\n            var _classStaticPrivateFi2;\n            this.destroyed = true;\n            if (this._webWorker) {\n              this._webWorker.terminate();\n              this._webWorker = null;\n            }\n            (_classStaticPrivateFi2 = _classStaticPrivateFieldSpecGet(PDFWorker, PDFWorker, _workerPorts)) === null || _classStaticPrivateFi2 === void 0 || _classStaticPrivateFi2.delete(this._port);\n            this._port = null;\n            if (this._messageHandler) {\n              this._messageHandler.destroy();\n              this._messageHandler = null;\n            }\n          }\n          static fromPort(params) {\n            var _classStaticPrivateFi3;\n            if (!(params !== null && params !== void 0 && params.port)) {\n              throw new Error(\"PDFWorker.fromPort - invalid method signature.\");\n            }\n            const cachedPort = (_classStaticPrivateFi3 = _classStaticPrivateFieldSpecGet(this, PDFWorker, _workerPorts)) === null || _classStaticPrivateFi3 === void 0 ? void 0 : _classStaticPrivateFi3.get(params.port);\n            if (cachedPort) {\n              if (cachedPort._pendingDestroy) {\n                throw new Error(\"PDFWorker.fromPort - the worker is being destroyed.\\n\" + \"Please remember to await `PDFDocumentLoadingTask.destroy()`-calls.\");\n              }\n              return cachedPort;\n            }\n            return new PDFWorker(params);\n          }\n          static get workerSrc() {\n            if (_worker_options_js__WEBPACK_IMPORTED_MODULE_6__.GlobalWorkerOptions.workerSrc) {\n              return _worker_options_js__WEBPACK_IMPORTED_MODULE_6__.GlobalWorkerOptions.workerSrc;\n            }\n            throw new Error('No \"GlobalWorkerOptions.workerSrc\" specified.');\n          }\n          static get _setupFakeWorkerGlobal() {\n            const loader = async () => {\n              if (_classStaticPrivateFieldSpecGet(this, PDFWorker, _mainThreadWorkerMessageHandler)) {\n                return _classStaticPrivateFieldSpecGet(this, PDFWorker, _mainThreadWorkerMessageHandler);\n              }\n              const worker = await import( /* webpackIgnore: true */this.workerSrc);\n              return worker.WorkerMessageHandler;\n            };\n            return (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow)(this, \"_setupFakeWorkerGlobal\", loader());\n          }\n        }\n        function _get_mainThreadWorkerMessageHandler() {\n          try {\n            var _globalThis$pdfjsWork;\n            return ((_globalThis$pdfjsWork = globalThis.pdfjsWorker) === null || _globalThis$pdfjsWork === void 0 ? void 0 : _globalThis$pdfjsWork.WorkerMessageHandler) || null;\n          } catch {\n            return null;\n          }\n        }\n        var _mainThreadWorkerMessageHandler = {\n          get: _get_mainThreadWorkerMessageHandler,\n          set: void 0\n        };\n        var _workerPorts = {\n          writable: true,\n          value: void 0\n        };\n        var _methodPromises = /*#__PURE__*/new WeakMap();\n        var _pageCache = /*#__PURE__*/new WeakMap();\n        var _pagePromises = /*#__PURE__*/new WeakMap();\n        var _passwordCapability = /*#__PURE__*/new WeakMap();\n        var _cacheSimpleMethod = /*#__PURE__*/new WeakSet();\n        class WorkerTransport {\n          constructor(messageHandler, loadingTask, networkStream, params, factory) {\n            _classPrivateMethodInitSpec(this, _cacheSimpleMethod);\n            _classPrivateFieldInitSpec(this, _methodPromises, {\n              writable: true,\n              value: new Map()\n            });\n            _classPrivateFieldInitSpec(this, _pageCache, {\n              writable: true,\n              value: new Map()\n            });\n            _classPrivateFieldInitSpec(this, _pagePromises, {\n              writable: true,\n              value: new Map()\n            });\n            _classPrivateFieldInitSpec(this, _passwordCapability, {\n              writable: true,\n              value: null\n            });\n            this.messageHandler = messageHandler;\n            this.loadingTask = loadingTask;\n            this.commonObjs = new PDFObjects();\n            this.fontLoader = new _font_loader_js__WEBPACK_IMPORTED_MODULE_3__.FontLoader({\n              ownerDocument: params.ownerDocument,\n              styleElement: params.styleElement\n            });\n            this._params = params;\n            this.canvasFactory = factory.canvasFactory;\n            this.filterFactory = factory.filterFactory;\n            this.cMapReaderFactory = factory.cMapReaderFactory;\n            this.standardFontDataFactory = factory.standardFontDataFactory;\n            this.destroyed = false;\n            this.destroyCapability = null;\n            this._networkStream = networkStream;\n            this._fullReader = null;\n            this._lastProgress = null;\n            this.downloadInfoCapability = new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.PromiseCapability();\n            this.setupMessageHandler();\n          }\n          get annotationStorage() {\n            return (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow)(this, \"annotationStorage\", new _annotation_storage_js__WEBPACK_IMPORTED_MODULE_1__.AnnotationStorage());\n          }\n          getRenderingIntent(intent) {\n            let annotationMode = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationMode.ENABLE;\n            let printAnnotationStorage = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n            let isOpList = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n            let renderingIntent = _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.RenderingIntentFlag.DISPLAY;\n            let annotationStorageSerializable = _annotation_storage_js__WEBPACK_IMPORTED_MODULE_1__.SerializableEmpty;\n            switch (intent) {\n              case \"any\":\n                renderingIntent = _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.RenderingIntentFlag.ANY;\n                break;\n              case \"display\":\n                break;\n              case \"print\":\n                renderingIntent = _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.RenderingIntentFlag.PRINT;\n                break;\n              default:\n                (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(\"getRenderingIntent - invalid intent: \".concat(intent));\n            }\n            switch (annotationMode) {\n              case _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationMode.DISABLE:\n                renderingIntent += _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.RenderingIntentFlag.ANNOTATIONS_DISABLE;\n                break;\n              case _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationMode.ENABLE:\n                break;\n              case _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationMode.ENABLE_FORMS:\n                renderingIntent += _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.RenderingIntentFlag.ANNOTATIONS_FORMS;\n                break;\n              case _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationMode.ENABLE_STORAGE:\n                renderingIntent += _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.RenderingIntentFlag.ANNOTATIONS_STORAGE;\n                const annotationStorage = renderingIntent & _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.RenderingIntentFlag.PRINT && printAnnotationStorage instanceof _annotation_storage_js__WEBPACK_IMPORTED_MODULE_1__.PrintAnnotationStorage ? printAnnotationStorage : this.annotationStorage;\n                annotationStorageSerializable = annotationStorage.serializable;\n                break;\n              default:\n                (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(\"getRenderingIntent - invalid annotationMode: \".concat(annotationMode));\n            }\n            if (isOpList) {\n              renderingIntent += _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.RenderingIntentFlag.OPLIST;\n            }\n            return {\n              renderingIntent,\n              cacheKey: \"\".concat(renderingIntent, \"_\").concat(annotationStorageSerializable.hash),\n              annotationStorageSerializable\n            };\n          }\n          destroy() {\n            var _classPrivateFieldGet3;\n            if (this.destroyCapability) {\n              return this.destroyCapability.promise;\n            }\n            this.destroyed = true;\n            this.destroyCapability = new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.PromiseCapability();\n            (_classPrivateFieldGet3 = _classPrivateFieldGet(this, _passwordCapability)) === null || _classPrivateFieldGet3 === void 0 || _classPrivateFieldGet3.reject(new Error(\"Worker was destroyed during onPassword callback\"));\n            const waitOn = [];\n            for (const page of _classPrivateFieldGet(this, _pageCache).values()) {\n              waitOn.push(page._destroy());\n            }\n            _classPrivateFieldGet(this, _pageCache).clear();\n            _classPrivateFieldGet(this, _pagePromises).clear();\n            if (this.hasOwnProperty(\"annotationStorage\")) {\n              this.annotationStorage.resetModified();\n            }\n            const terminated = this.messageHandler.sendWithPromise(\"Terminate\", null);\n            waitOn.push(terminated);\n            Promise.all(waitOn).then(() => {\n              var _this$_networkStream;\n              this.commonObjs.clear();\n              this.fontLoader.clear();\n              _classPrivateFieldGet(this, _methodPromises).clear();\n              this.filterFactory.destroy();\n              (_this$_networkStream = this._networkStream) === null || _this$_networkStream === void 0 || _this$_networkStream.cancelAllRequests(new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AbortException(\"Worker was terminated.\"));\n              if (this.messageHandler) {\n                this.messageHandler.destroy();\n                this.messageHandler = null;\n              }\n              this.destroyCapability.resolve();\n            }, this.destroyCapability.reject);\n            return this.destroyCapability.promise;\n          }\n          setupMessageHandler() {\n            const {\n              messageHandler,\n              loadingTask\n            } = this;\n            messageHandler.on(\"GetReader\", (data, sink) => {\n              (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(this._networkStream, \"GetReader - no `IPDFStream` instance available.\");\n              this._fullReader = this._networkStream.getFullReader();\n              this._fullReader.onProgress = evt => {\n                this._lastProgress = {\n                  loaded: evt.loaded,\n                  total: evt.total\n                };\n              };\n              sink.onPull = () => {\n                this._fullReader.read().then(function (_ref22) {\n                  let {\n                    value,\n                    done\n                  } = _ref22;\n                  if (done) {\n                    sink.close();\n                    return;\n                  }\n                  (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(value instanceof ArrayBuffer, \"GetReader - expected an ArrayBuffer.\");\n                  sink.enqueue(new Uint8Array(value), 1, [value]);\n                }).catch(reason => {\n                  sink.error(reason);\n                });\n              };\n              sink.onCancel = reason => {\n                this._fullReader.cancel(reason);\n                sink.ready.catch(readyReason => {\n                  if (this.destroyed) {\n                    return;\n                  }\n                  throw readyReason;\n                });\n              };\n            });\n            messageHandler.on(\"ReaderHeadersReady\", data => {\n              const headersCapability = new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.PromiseCapability();\n              const fullReader = this._fullReader;\n              fullReader.headersReady.then(() => {\n                if (!fullReader.isStreamingSupported || !fullReader.isRangeSupported) {\n                  if (this._lastProgress) {\n                    var _loadingTask$onProgre;\n                    (_loadingTask$onProgre = loadingTask.onProgress) === null || _loadingTask$onProgre === void 0 || _loadingTask$onProgre.call(loadingTask, this._lastProgress);\n                  }\n                  fullReader.onProgress = evt => {\n                    var _loadingTask$onProgre2;\n                    (_loadingTask$onProgre2 = loadingTask.onProgress) === null || _loadingTask$onProgre2 === void 0 || _loadingTask$onProgre2.call(loadingTask, {\n                      loaded: evt.loaded,\n                      total: evt.total\n                    });\n                  };\n                }\n                headersCapability.resolve({\n                  isStreamingSupported: fullReader.isStreamingSupported,\n                  isRangeSupported: fullReader.isRangeSupported,\n                  contentLength: fullReader.contentLength\n                });\n              }, headersCapability.reject);\n              return headersCapability.promise;\n            });\n            messageHandler.on(\"GetRangeReader\", (data, sink) => {\n              (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(this._networkStream, \"GetRangeReader - no `IPDFStream` instance available.\");\n              const rangeReader = this._networkStream.getRangeReader(data.begin, data.end);\n              if (!rangeReader) {\n                sink.close();\n                return;\n              }\n              sink.onPull = () => {\n                rangeReader.read().then(function (_ref23) {\n                  let {\n                    value,\n                    done\n                  } = _ref23;\n                  if (done) {\n                    sink.close();\n                    return;\n                  }\n                  (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(value instanceof ArrayBuffer, \"GetRangeReader - expected an ArrayBuffer.\");\n                  sink.enqueue(new Uint8Array(value), 1, [value]);\n                }).catch(reason => {\n                  sink.error(reason);\n                });\n              };\n              sink.onCancel = reason => {\n                rangeReader.cancel(reason);\n                sink.ready.catch(readyReason => {\n                  if (this.destroyed) {\n                    return;\n                  }\n                  throw readyReason;\n                });\n              };\n            });\n            messageHandler.on(\"GetDoc\", _ref24 => {\n              let {\n                pdfInfo\n              } = _ref24;\n              this._numPages = pdfInfo.numPages;\n              this._htmlForXfa = pdfInfo.htmlForXfa;\n              delete pdfInfo.htmlForXfa;\n              loadingTask._capability.resolve(new PDFDocumentProxy(pdfInfo, this));\n            });\n            messageHandler.on(\"DocException\", function (ex) {\n              let reason;\n              switch (ex.name) {\n                case \"PasswordException\":\n                  reason = new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.PasswordException(ex.message, ex.code);\n                  break;\n                case \"InvalidPDFException\":\n                  reason = new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.InvalidPDFException(ex.message);\n                  break;\n                case \"MissingPDFException\":\n                  reason = new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.MissingPDFException(ex.message);\n                  break;\n                case \"UnexpectedResponseException\":\n                  reason = new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.UnexpectedResponseException(ex.message, ex.status);\n                  break;\n                case \"UnknownErrorException\":\n                  reason = new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.UnknownErrorException(ex.message, ex.details);\n                  break;\n                default:\n                  (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.unreachable)(\"DocException - expected a valid Error.\");\n              }\n              loadingTask._capability.reject(reason);\n            });\n            messageHandler.on(\"PasswordRequest\", exception => {\n              _classPrivateFieldSet(this, _passwordCapability, new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.PromiseCapability());\n              if (loadingTask.onPassword) {\n                const updatePassword = password => {\n                  if (password instanceof Error) {\n                    _classPrivateFieldGet(this, _passwordCapability).reject(password);\n                  } else {\n                    _classPrivateFieldGet(this, _passwordCapability).resolve({\n                      password\n                    });\n                  }\n                };\n                try {\n                  loadingTask.onPassword(updatePassword, exception.code);\n                } catch (ex) {\n                  _classPrivateFieldGet(this, _passwordCapability).reject(ex);\n                }\n              } else {\n                _classPrivateFieldGet(this, _passwordCapability).reject(new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.PasswordException(exception.message, exception.code));\n              }\n              return _classPrivateFieldGet(this, _passwordCapability).promise;\n            });\n            messageHandler.on(\"DataLoaded\", data => {\n              var _loadingTask$onProgre3;\n              (_loadingTask$onProgre3 = loadingTask.onProgress) === null || _loadingTask$onProgre3 === void 0 || _loadingTask$onProgre3.call(loadingTask, {\n                loaded: data.length,\n                total: data.length\n              });\n              this.downloadInfoCapability.resolve(data);\n            });\n            messageHandler.on(\"StartRenderPage\", data => {\n              if (this.destroyed) {\n                return;\n              }\n              const page = _classPrivateFieldGet(this, _pageCache).get(data.pageIndex);\n              page._startRenderPage(data.transparency, data.cacheKey);\n            });\n            messageHandler.on(\"commonobj\", _ref25 => {\n              var _globalThis$FontInspe;\n              let [id, type, exportedData] = _ref25;\n              if (this.destroyed) {\n                return null;\n              }\n              if (this.commonObjs.has(id)) {\n                return null;\n              }\n              switch (type) {\n                case \"Font\":\n                  const params = this._params;\n                  if (\"error\" in exportedData) {\n                    const exportedError = exportedData.error;\n                    (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(\"Error during font loading: \".concat(exportedError));\n                    this.commonObjs.resolve(id, exportedError);\n                    break;\n                  }\n                  const inspectFont = params.pdfBug && (_globalThis$FontInspe = globalThis.FontInspector) !== null && _globalThis$FontInspe !== void 0 && _globalThis$FontInspe.enabled ? (font, url) => globalThis.FontInspector.fontAdded(font, url) : null;\n                  const font = new _font_loader_js__WEBPACK_IMPORTED_MODULE_3__.FontFaceObject(exportedData, {\n                    isEvalSupported: params.isEvalSupported,\n                    disableFontFace: params.disableFontFace,\n                    ignoreErrors: params.ignoreErrors,\n                    inspectFont\n                  });\n                  this.fontLoader.bind(font).catch(reason => {\n                    return messageHandler.sendWithPromise(\"FontFallback\", {\n                      id\n                    });\n                  }).finally(() => {\n                    if (!params.fontExtraProperties && font.data) {\n                      font.data = null;\n                    }\n                    this.commonObjs.resolve(id, font);\n                  });\n                  break;\n                case \"CopyLocalImage\":\n                  const {\n                    imageRef\n                  } = exportedData;\n                  (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(imageRef, \"The imageRef must be defined.\");\n                  for (const pageProxy of _classPrivateFieldGet(this, _pageCache).values()) {\n                    for (const [, data] of pageProxy.objs) {\n                      if (data.ref !== imageRef) {\n                        continue;\n                      }\n                      if (!data.dataLen) {\n                        return null;\n                      }\n                      this.commonObjs.resolve(id, structuredClone(data));\n                      return data.dataLen;\n                    }\n                  }\n                  break;\n                case \"FontPath\":\n                case \"Image\":\n                case \"Pattern\":\n                  this.commonObjs.resolve(id, exportedData);\n                  break;\n                default:\n                  throw new Error(\"Got unknown common object type \".concat(type));\n              }\n              return null;\n            });\n            messageHandler.on(\"obj\", _ref26 => {\n              let [id, pageIndex, type, imageData] = _ref26;\n              if (this.destroyed) {\n                return;\n              }\n              const pageProxy = _classPrivateFieldGet(this, _pageCache).get(pageIndex);\n              if (pageProxy.objs.has(id)) {\n                return;\n              }\n              if (pageProxy._intentStates.size === 0) {\n                var _imageData$bitmap;\n                imageData === null || imageData === void 0 || (_imageData$bitmap = imageData.bitmap) === null || _imageData$bitmap === void 0 || _imageData$bitmap.close();\n                return;\n              }\n              switch (type) {\n                case \"Image\":\n                  pageProxy.objs.resolve(id, imageData);\n                  if ((imageData === null || imageData === void 0 ? void 0 : imageData.dataLen) > _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.MAX_IMAGE_SIZE_TO_CACHE) {\n                    pageProxy._maybeCleanupAfterRender = true;\n                  }\n                  break;\n                case \"Pattern\":\n                  pageProxy.objs.resolve(id, imageData);\n                  break;\n                default:\n                  throw new Error(\"Got unknown object type \".concat(type));\n              }\n            });\n            messageHandler.on(\"DocProgress\", data => {\n              var _loadingTask$onProgre4;\n              if (this.destroyed) {\n                return;\n              }\n              (_loadingTask$onProgre4 = loadingTask.onProgress) === null || _loadingTask$onProgre4 === void 0 || _loadingTask$onProgre4.call(loadingTask, {\n                loaded: data.loaded,\n                total: data.total\n              });\n            });\n            messageHandler.on(\"FetchBuiltInCMap\", data => {\n              if (this.destroyed) {\n                return Promise.reject(new Error(\"Worker was destroyed.\"));\n              }\n              if (!this.cMapReaderFactory) {\n                return Promise.reject(new Error(\"CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.\"));\n              }\n              return this.cMapReaderFactory.fetch(data);\n            });\n            messageHandler.on(\"FetchStandardFontData\", data => {\n              if (this.destroyed) {\n                return Promise.reject(new Error(\"Worker was destroyed.\"));\n              }\n              if (!this.standardFontDataFactory) {\n                return Promise.reject(new Error(\"StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.\"));\n              }\n              return this.standardFontDataFactory.fetch(data);\n            });\n          }\n          getData() {\n            return this.messageHandler.sendWithPromise(\"GetData\", null);\n          }\n          saveDocument() {\n            var _this$_fullReader$fil, _this$_fullReader;\n            if (this.annotationStorage.size <= 0) {\n              (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(\"saveDocument called while `annotationStorage` is empty, \" + \"please use the getData-method instead.\");\n            }\n            const {\n              map,\n              transfer\n            } = this.annotationStorage.serializable;\n            return this.messageHandler.sendWithPromise(\"SaveDocument\", {\n              isPureXfa: !!this._htmlForXfa,\n              numPages: this._numPages,\n              annotationStorage: map,\n              filename: (_this$_fullReader$fil = (_this$_fullReader = this._fullReader) === null || _this$_fullReader === void 0 ? void 0 : _this$_fullReader.filename) !== null && _this$_fullReader$fil !== void 0 ? _this$_fullReader$fil : null\n            }, transfer).finally(() => {\n              this.annotationStorage.resetModified();\n            });\n          }\n          getPage(pageNumber) {\n            if (!Number.isInteger(pageNumber) || pageNumber <= 0 || pageNumber > this._numPages) {\n              return Promise.reject(new Error(\"Invalid page request.\"));\n            }\n            const pageIndex = pageNumber - 1,\n              cachedPromise = _classPrivateFieldGet(this, _pagePromises).get(pageIndex);\n            if (cachedPromise) {\n              return cachedPromise;\n            }\n            const promise = this.messageHandler.sendWithPromise(\"GetPage\", {\n              pageIndex\n            }).then(pageInfo => {\n              if (this.destroyed) {\n                throw new Error(\"Transport destroyed\");\n              }\n              const page = new PDFPageProxy(pageIndex, pageInfo, this, this._params.pdfBug);\n              _classPrivateFieldGet(this, _pageCache).set(pageIndex, page);\n              return page;\n            });\n            _classPrivateFieldGet(this, _pagePromises).set(pageIndex, promise);\n            return promise;\n          }\n          getPageIndex(ref) {\n            if (typeof ref !== \"object\" || ref === null || !Number.isInteger(ref.num) || ref.num < 0 || !Number.isInteger(ref.gen) || ref.gen < 0) {\n              return Promise.reject(new Error(\"Invalid pageIndex request.\"));\n            }\n            return this.messageHandler.sendWithPromise(\"GetPageIndex\", {\n              num: ref.num,\n              gen: ref.gen\n            });\n          }\n          getAnnotations(pageIndex, intent) {\n            return this.messageHandler.sendWithPromise(\"GetAnnotations\", {\n              pageIndex,\n              intent\n            });\n          }\n          getFieldObjects() {\n            return _classPrivateMethodGet(this, _cacheSimpleMethod, _cacheSimpleMethod2).call(this, \"GetFieldObjects\");\n          }\n          hasJSActions() {\n            return _classPrivateMethodGet(this, _cacheSimpleMethod, _cacheSimpleMethod2).call(this, \"HasJSActions\");\n          }\n          getCalculationOrderIds() {\n            return this.messageHandler.sendWithPromise(\"GetCalculationOrderIds\", null);\n          }\n          getDestinations() {\n            return this.messageHandler.sendWithPromise(\"GetDestinations\", null);\n          }\n          getDestination(id) {\n            if (typeof id !== \"string\") {\n              return Promise.reject(new Error(\"Invalid destination request.\"));\n            }\n            return this.messageHandler.sendWithPromise(\"GetDestination\", {\n              id\n            });\n          }\n          getPageLabels() {\n            return this.messageHandler.sendWithPromise(\"GetPageLabels\", null);\n          }\n          getPageLayout() {\n            return this.messageHandler.sendWithPromise(\"GetPageLayout\", null);\n          }\n          getPageMode() {\n            return this.messageHandler.sendWithPromise(\"GetPageMode\", null);\n          }\n          getViewerPreferences() {\n            return this.messageHandler.sendWithPromise(\"GetViewerPreferences\", null);\n          }\n          getOpenAction() {\n            return this.messageHandler.sendWithPromise(\"GetOpenAction\", null);\n          }\n          getAttachments() {\n            return this.messageHandler.sendWithPromise(\"GetAttachments\", null);\n          }\n          getDocJSActions() {\n            return _classPrivateMethodGet(this, _cacheSimpleMethod, _cacheSimpleMethod2).call(this, \"GetDocJSActions\");\n          }\n          getPageJSActions(pageIndex) {\n            return this.messageHandler.sendWithPromise(\"GetPageJSActions\", {\n              pageIndex\n            });\n          }\n          getStructTree(pageIndex) {\n            return this.messageHandler.sendWithPromise(\"GetStructTree\", {\n              pageIndex\n            });\n          }\n          getOutline() {\n            return this.messageHandler.sendWithPromise(\"GetOutline\", null);\n          }\n          getOptionalContentConfig() {\n            return this.messageHandler.sendWithPromise(\"GetOptionalContentConfig\", null).then(results => {\n              return new _optional_content_config_js__WEBPACK_IMPORTED_MODULE_9__.OptionalContentConfig(results);\n            });\n          }\n          getPermissions() {\n            return this.messageHandler.sendWithPromise(\"GetPermissions\", null);\n          }\n          getMetadata() {\n            const name = \"GetMetadata\",\n              cachedPromise = _classPrivateFieldGet(this, _methodPromises).get(name);\n            if (cachedPromise) {\n              return cachedPromise;\n            }\n            const promise = this.messageHandler.sendWithPromise(name, null).then(results => {\n              var _this$_fullReader$fil2, _this$_fullReader2, _this$_fullReader$con, _this$_fullReader3;\n              return {\n                info: results[0],\n                metadata: results[1] ? new _metadata_js__WEBPACK_IMPORTED_MODULE_8__.Metadata(results[1]) : null,\n                contentDispositionFilename: (_this$_fullReader$fil2 = (_this$_fullReader2 = this._fullReader) === null || _this$_fullReader2 === void 0 ? void 0 : _this$_fullReader2.filename) !== null && _this$_fullReader$fil2 !== void 0 ? _this$_fullReader$fil2 : null,\n                contentLength: (_this$_fullReader$con = (_this$_fullReader3 = this._fullReader) === null || _this$_fullReader3 === void 0 ? void 0 : _this$_fullReader3.contentLength) !== null && _this$_fullReader$con !== void 0 ? _this$_fullReader$con : null\n              };\n            });\n            _classPrivateFieldGet(this, _methodPromises).set(name, promise);\n            return promise;\n          }\n          getMarkInfo() {\n            return this.messageHandler.sendWithPromise(\"GetMarkInfo\", null);\n          }\n          async startCleanup() {\n            let keepLoadedFonts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n            if (this.destroyed) {\n              return;\n            }\n            await this.messageHandler.sendWithPromise(\"Cleanup\", null);\n            for (const page of _classPrivateFieldGet(this, _pageCache).values()) {\n              const cleanupSuccessful = page.cleanup();\n              if (!cleanupSuccessful) {\n                throw new Error(\"startCleanup: Page \".concat(page.pageNumber, \" is currently rendering.\"));\n              }\n            }\n            this.commonObjs.clear();\n            if (!keepLoadedFonts) {\n              this.fontLoader.clear();\n            }\n            _classPrivateFieldGet(this, _methodPromises).clear();\n            this.filterFactory.destroy(true);\n          }\n          get loadingParams() {\n            const {\n              disableAutoFetch,\n              enableXfa\n            } = this._params;\n            return (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow)(this, \"loadingParams\", {\n              disableAutoFetch,\n              enableXfa\n            });\n          }\n        }\n        function _cacheSimpleMethod2(name) {\n          let data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n          const cachedPromise = _classPrivateFieldGet(this, _methodPromises).get(name);\n          if (cachedPromise) {\n            return cachedPromise;\n          }\n          const promise = this.messageHandler.sendWithPromise(name, data);\n          _classPrivateFieldGet(this, _methodPromises).set(name, promise);\n          return promise;\n        }\n        var _objs = /*#__PURE__*/new WeakMap();\n        var _ensureObj = /*#__PURE__*/new WeakSet();\n        _Symbol$iterator = Symbol.iterator;\n        class PDFObjects {\n          constructor() {\n            _classPrivateMethodInitSpec(this, _ensureObj);\n            _classPrivateFieldInitSpec(this, _objs, {\n              writable: true,\n              value: Object.create(null)\n            });\n          }\n          get(objId) {\n            let callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n            if (callback) {\n              const obj = _classPrivateMethodGet(this, _ensureObj, _ensureObj2).call(this, objId);\n              obj.capability.promise.then(() => callback(obj.data));\n              return null;\n            }\n            const obj = _classPrivateFieldGet(this, _objs)[objId];\n            if (!(obj !== null && obj !== void 0 && obj.capability.settled)) {\n              throw new Error(\"Requesting object that isn't resolved yet \".concat(objId, \".\"));\n            }\n            return obj.data;\n          }\n          has(objId) {\n            var _obj$capability$settl;\n            const obj = _classPrivateFieldGet(this, _objs)[objId];\n            return (_obj$capability$settl = obj === null || obj === void 0 ? void 0 : obj.capability.settled) !== null && _obj$capability$settl !== void 0 ? _obj$capability$settl : false;\n          }\n          resolve(objId) {\n            let data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n            const obj = _classPrivateMethodGet(this, _ensureObj, _ensureObj2).call(this, objId);\n            obj.data = data;\n            obj.capability.resolve();\n          }\n          clear() {\n            for (const objId in _classPrivateFieldGet(this, _objs)) {\n              var _data$bitmap;\n              const {\n                data\n              } = _classPrivateFieldGet(this, _objs)[objId];\n              data === null || data === void 0 || (_data$bitmap = data.bitmap) === null || _data$bitmap === void 0 || _data$bitmap.close();\n            }\n            _classPrivateFieldSet(this, _objs, Object.create(null));\n          }\n          *[_Symbol$iterator]() {\n            for (const objId in _classPrivateFieldGet(this, _objs)) {\n              const {\n                capability,\n                data\n              } = _classPrivateFieldGet(this, _objs)[objId];\n              if (!capability.settled) {\n                continue;\n              }\n              yield [objId, data];\n            }\n          }\n        }\n        function _ensureObj2(objId) {\n          var _classPrivateFieldGet4;\n          return (_classPrivateFieldGet4 = _classPrivateFieldGet(this, _objs))[objId] || (_classPrivateFieldGet4[objId] = {\n            capability: new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.PromiseCapability(),\n            data: null\n          });\n        }\n        var _internalRenderTask = /*#__PURE__*/new WeakMap();\n        class RenderTask {\n          constructor(internalRenderTask) {\n            _classPrivateFieldInitSpec(this, _internalRenderTask, {\n              writable: true,\n              value: null\n            });\n            _classPrivateFieldSet(this, _internalRenderTask, internalRenderTask);\n            this.onContinue = null;\n          }\n          get promise() {\n            return _classPrivateFieldGet(this, _internalRenderTask).capability.promise;\n          }\n          cancel() {\n            let extraDelay = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n            _classPrivateFieldGet(this, _internalRenderTask).cancel(null, extraDelay);\n          }\n          get separateAnnots() {\n            const {\n              separateAnnots\n            } = _classPrivateFieldGet(this, _internalRenderTask).operatorList;\n            if (!separateAnnots) {\n              return false;\n            }\n            const {\n              annotationCanvasMap\n            } = _classPrivateFieldGet(this, _internalRenderTask);\n            return separateAnnots.form || separateAnnots.canvas && (annotationCanvasMap === null || annotationCanvasMap === void 0 ? void 0 : annotationCanvasMap.size) > 0;\n          }\n        }\n        class InternalRenderTask {\n          constructor(_ref27) {\n            let {\n              callback,\n              params,\n              objs,\n              commonObjs,\n              annotationCanvasMap,\n              operatorList,\n              pageIndex,\n              canvasFactory,\n              filterFactory,\n              useRequestAnimationFrame = false,\n              pdfBug = false,\n              pageColors = null\n            } = _ref27;\n            this.callback = callback;\n            this.params = params;\n            this.objs = objs;\n            this.commonObjs = commonObjs;\n            this.annotationCanvasMap = annotationCanvasMap;\n            this.operatorListIdx = null;\n            this.operatorList = operatorList;\n            this._pageIndex = pageIndex;\n            this.canvasFactory = canvasFactory;\n            this.filterFactory = filterFactory;\n            this._pdfBug = pdfBug;\n            this.pageColors = pageColors;\n            this.running = false;\n            this.graphicsReadyCallback = null;\n            this.graphicsReady = false;\n            this._useRequestAnimationFrame = useRequestAnimationFrame === true && typeof window !== \"undefined\";\n            this.cancelled = false;\n            this.capability = new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.PromiseCapability();\n            this.task = new RenderTask(this);\n            this._cancelBound = this.cancel.bind(this);\n            this._continueBound = this._continue.bind(this);\n            this._scheduleNextBound = this._scheduleNext.bind(this);\n            this._nextBound = this._next.bind(this);\n            this._canvas = params.canvasContext.canvas;\n          }\n          get completed() {\n            return this.capability.promise.catch(function () {});\n          }\n          initializeGraphics(_ref28) {\n            var _globalThis$StepperMa, _this$graphicsReadyCa;\n            let {\n              transparency = false,\n              optionalContentConfig\n            } = _ref28;\n            if (this.cancelled) {\n              return;\n            }\n            if (this._canvas) {\n              if (_classStaticPrivateFieldSpecGet(InternalRenderTask, InternalRenderTask, _canvasInUse).has(this._canvas)) {\n                throw new Error(\"Cannot use the same canvas during multiple render() operations. \" + \"Use different canvas or ensure previous operations were \" + \"cancelled or completed.\");\n              }\n              _classStaticPrivateFieldSpecGet(InternalRenderTask, InternalRenderTask, _canvasInUse).add(this._canvas);\n            }\n            if (this._pdfBug && (_globalThis$StepperMa = globalThis.StepperManager) !== null && _globalThis$StepperMa !== void 0 && _globalThis$StepperMa.enabled) {\n              this.stepper = globalThis.StepperManager.create(this._pageIndex);\n              this.stepper.init(this.operatorList);\n              this.stepper.nextBreakPoint = this.stepper.getNextBreakPoint();\n            }\n            const {\n              canvasContext,\n              viewport,\n              transform,\n              background\n            } = this.params;\n            this.gfx = new _canvas_js__WEBPACK_IMPORTED_MODULE_5__.CanvasGraphics(canvasContext, this.commonObjs, this.objs, this.canvasFactory, this.filterFactory, {\n              optionalContentConfig\n            }, this.annotationCanvasMap, this.pageColors);\n            this.gfx.beginDrawing({\n              transform,\n              viewport,\n              transparency,\n              background\n            });\n            this.operatorListIdx = 0;\n            this.graphicsReady = true;\n            (_this$graphicsReadyCa = this.graphicsReadyCallback) === null || _this$graphicsReadyCa === void 0 || _this$graphicsReadyCa.call(this);\n          }\n          cancel() {\n            var _this$gfx;\n            let error = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n            let extraDelay = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n            this.running = false;\n            this.cancelled = true;\n            (_this$gfx = this.gfx) === null || _this$gfx === void 0 || _this$gfx.endDrawing();\n            _classStaticPrivateFieldSpecGet(InternalRenderTask, InternalRenderTask, _canvasInUse).delete(this._canvas);\n            this.callback(error || new _display_utils_js__WEBPACK_IMPORTED_MODULE_2__.RenderingCancelledException(\"Rendering cancelled, page \".concat(this._pageIndex + 1), extraDelay));\n          }\n          operatorListChanged() {\n            var _this$stepper;\n            if (!this.graphicsReady) {\n              this.graphicsReadyCallback || (this.graphicsReadyCallback = this._continueBound);\n              return;\n            }\n            (_this$stepper = this.stepper) === null || _this$stepper === void 0 || _this$stepper.updateOperatorList(this.operatorList);\n            if (this.running) {\n              return;\n            }\n            this._continue();\n          }\n          _continue() {\n            this.running = true;\n            if (this.cancelled) {\n              return;\n            }\n            if (this.task.onContinue) {\n              this.task.onContinue(this._scheduleNextBound);\n            } else {\n              this._scheduleNext();\n            }\n          }\n          _scheduleNext() {\n            if (this._useRequestAnimationFrame) {\n              window.requestAnimationFrame(() => {\n                this._nextBound().catch(this._cancelBound);\n              });\n            } else {\n              Promise.resolve().then(this._nextBound).catch(this._cancelBound);\n            }\n          }\n          async _next() {\n            if (this.cancelled) {\n              return;\n            }\n            this.operatorListIdx = this.gfx.executeOperatorList(this.operatorList, this.operatorListIdx, this._continueBound, this.stepper);\n            if (this.operatorListIdx === this.operatorList.argsArray.length) {\n              this.running = false;\n              if (this.operatorList.lastChunk) {\n                this.gfx.endDrawing();\n                _classStaticPrivateFieldSpecGet(InternalRenderTask, InternalRenderTask, _canvasInUse).delete(this._canvas);\n                this.callback();\n              }\n            }\n          }\n        }\n        var _canvasInUse = {\n          writable: true,\n          value: new WeakSet()\n        };\n        const version = '4.0.379';\n        const build = '9e14d04fd';\n        __webpack_async_result__();\n      } catch (e) {\n        __webpack_async_result__(e);\n      }\n    });\n\n    /***/\n  }),\n  /***/822: ( /***/(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {\n    /* harmony export */__webpack_require__.d(__webpack_exports__, {\n      /* harmony export */BaseCMapReaderFactory: () => ( /* binding */BaseCMapReaderFactory),\n      /* harmony export */BaseCanvasFactory: () => ( /* binding */BaseCanvasFactory),\n      /* harmony export */BaseFilterFactory: () => ( /* binding */BaseFilterFactory),\n      /* harmony export */BaseSVGFactory: () => ( /* binding */BaseSVGFactory),\n      /* harmony export */BaseStandardFontDataFactory: () => ( /* binding */BaseStandardFontDataFactory)\n      /* harmony export */\n    });\n    /* harmony import */\n    var _shared_util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(266);\n    class BaseFilterFactory {\n      constructor() {\n        if (this.constructor === BaseFilterFactory) {\n          (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.unreachable)(\"Cannot initialize BaseFilterFactory.\");\n        }\n      }\n      addFilter(maps) {\n        return \"none\";\n      }\n      addHCMFilter(fgColor, bgColor) {\n        return \"none\";\n      }\n      addHighlightHCMFilter(fgColor, bgColor, newFgColor, newBgColor) {\n        return \"none\";\n      }\n      destroy() {\n        let keepHCM = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      }\n    }\n    class BaseCanvasFactory {\n      constructor() {\n        if (this.constructor === BaseCanvasFactory) {\n          (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.unreachable)(\"Cannot initialize BaseCanvasFactory.\");\n        }\n      }\n      create(width, height) {\n        if (width <= 0 || height <= 0) {\n          throw new Error(\"Invalid canvas size\");\n        }\n        const canvas = this._createCanvas(width, height);\n        return {\n          canvas,\n          context: canvas.getContext(\"2d\")\n        };\n      }\n      reset(canvasAndContext, width, height) {\n        if (!canvasAndContext.canvas) {\n          throw new Error(\"Canvas is not specified\");\n        }\n        if (width <= 0 || height <= 0) {\n          throw new Error(\"Invalid canvas size\");\n        }\n        canvasAndContext.canvas.width = width;\n        canvasAndContext.canvas.height = height;\n      }\n      destroy(canvasAndContext) {\n        if (!canvasAndContext.canvas) {\n          throw new Error(\"Canvas is not specified\");\n        }\n        canvasAndContext.canvas.width = 0;\n        canvasAndContext.canvas.height = 0;\n        canvasAndContext.canvas = null;\n        canvasAndContext.context = null;\n      }\n      _createCanvas(width, height) {\n        (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.unreachable)(\"Abstract method `_createCanvas` called.\");\n      }\n    }\n    class BaseCMapReaderFactory {\n      constructor(_ref29) {\n        let {\n          baseUrl = null,\n          isCompressed = true\n        } = _ref29;\n        if (this.constructor === BaseCMapReaderFactory) {\n          (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.unreachable)(\"Cannot initialize BaseCMapReaderFactory.\");\n        }\n        this.baseUrl = baseUrl;\n        this.isCompressed = isCompressed;\n      }\n      async fetch(_ref30) {\n        let {\n          name\n        } = _ref30;\n        if (!this.baseUrl) {\n          throw new Error('The CMap \"baseUrl\" parameter must be specified, ensure that ' + 'the \"cMapUrl\" and \"cMapPacked\" API parameters are provided.');\n        }\n        if (!name) {\n          throw new Error(\"CMap name must be specified.\");\n        }\n        const url = this.baseUrl + name + (this.isCompressed ? \".bcmap\" : \"\");\n        const compressionType = this.isCompressed ? _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.CMapCompressionType.BINARY : _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.CMapCompressionType.NONE;\n        return this._fetchData(url, compressionType).catch(reason => {\n          throw new Error(\"Unable to load \".concat(this.isCompressed ? \"binary \" : \"\", \"CMap at: \").concat(url));\n        });\n      }\n      _fetchData(url, compressionType) {\n        (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.unreachable)(\"Abstract method `_fetchData` called.\");\n      }\n    }\n    class BaseStandardFontDataFactory {\n      constructor(_ref31) {\n        let {\n          baseUrl = null\n        } = _ref31;\n        if (this.constructor === BaseStandardFontDataFactory) {\n          (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.unreachable)(\"Cannot initialize BaseStandardFontDataFactory.\");\n        }\n        this.baseUrl = baseUrl;\n      }\n      async fetch(_ref32) {\n        let {\n          filename\n        } = _ref32;\n        if (!this.baseUrl) {\n          throw new Error('The standard font \"baseUrl\" parameter must be specified, ensure that ' + 'the \"standardFontDataUrl\" API parameter is provided.');\n        }\n        if (!filename) {\n          throw new Error(\"Font filename must be specified.\");\n        }\n        const url = \"\".concat(this.baseUrl).concat(filename);\n        return this._fetchData(url).catch(reason => {\n          throw new Error(\"Unable to load font data at: \".concat(url));\n        });\n      }\n      _fetchData(url) {\n        (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.unreachable)(\"Abstract method `_fetchData` called.\");\n      }\n    }\n    class BaseSVGFactory {\n      constructor() {\n        if (this.constructor === BaseSVGFactory) {\n          (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.unreachable)(\"Cannot initialize BaseSVGFactory.\");\n        }\n      }\n      create(width, height) {\n        let skipDimensions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n        if (width <= 0 || height <= 0) {\n          throw new Error(\"Invalid SVG dimensions\");\n        }\n        const svg = this._createSVG(\"svg:svg\");\n        svg.setAttribute(\"version\", \"1.1\");\n        if (!skipDimensions) {\n          svg.setAttribute(\"width\", \"\".concat(width, \"px\"));\n          svg.setAttribute(\"height\", \"\".concat(height, \"px\"));\n        }\n        svg.setAttribute(\"preserveAspectRatio\", \"none\");\n        svg.setAttribute(\"viewBox\", \"0 0 \".concat(width, \" \").concat(height));\n        return svg;\n      }\n      createElement(type) {\n        if (typeof type !== \"string\") {\n          throw new Error(\"Invalid SVG element type\");\n        }\n        return this._createSVG(type);\n      }\n      _createSVG(type) {\n        (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.unreachable)(\"Abstract method `_createSVG` called.\");\n      }\n    }\n\n    /***/\n  }),\n  /***/250: ( /***/(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {\n    // EXPORTS\n    __webpack_require__.d(__webpack_exports__, {\n      CanvasGraphics: () => ( /* binding */CanvasGraphics)\n    });\n\n    // EXTERNAL MODULE: ./src/shared/util.js\n    var util = __webpack_require__(266);\n    // EXTERNAL MODULE: ./src/display/display_utils.js\n    var display_utils = __webpack_require__(473);\n    ; // CONCATENATED MODULE: ./src/display/pattern_helper.js\n\n    const PathType = {\n      FILL: \"Fill\",\n      STROKE: \"Stroke\",\n      SHADING: \"Shading\"\n    };\n    function applyBoundingBox(ctx, bbox) {\n      if (!bbox) {\n        return;\n      }\n      const width = bbox[2] - bbox[0];\n      const height = bbox[3] - bbox[1];\n      const region = new Path2D();\n      region.rect(bbox[0], bbox[1], width, height);\n      ctx.clip(region);\n    }\n    class BaseShadingPattern {\n      constructor() {\n        if (this.constructor === BaseShadingPattern) {\n          (0, util.unreachable)(\"Cannot initialize BaseShadingPattern.\");\n        }\n      }\n      getPattern() {\n        (0, util.unreachable)(\"Abstract method `getPattern` called.\");\n      }\n    }\n    class RadialAxialShadingPattern extends BaseShadingPattern {\n      constructor(IR) {\n        super();\n        this._type = IR[1];\n        this._bbox = IR[2];\n        this._colorStops = IR[3];\n        this._p0 = IR[4];\n        this._p1 = IR[5];\n        this._r0 = IR[6];\n        this._r1 = IR[7];\n        this.matrix = null;\n      }\n      _createGradient(ctx) {\n        let grad;\n        if (this._type === \"axial\") {\n          grad = ctx.createLinearGradient(this._p0[0], this._p0[1], this._p1[0], this._p1[1]);\n        } else if (this._type === \"radial\") {\n          grad = ctx.createRadialGradient(this._p0[0], this._p0[1], this._r0, this._p1[0], this._p1[1], this._r1);\n        }\n        for (const colorStop of this._colorStops) {\n          grad.addColorStop(colorStop[0], colorStop[1]);\n        }\n        return grad;\n      }\n      getPattern(ctx, owner, inverse, pathType) {\n        let pattern;\n        if (pathType === PathType.STROKE || pathType === PathType.FILL) {\n          const ownerBBox = owner.current.getClippedPathBoundingBox(pathType, (0, display_utils.getCurrentTransform)(ctx)) || [0, 0, 0, 0];\n          const width = Math.ceil(ownerBBox[2] - ownerBBox[0]) || 1;\n          const height = Math.ceil(ownerBBox[3] - ownerBBox[1]) || 1;\n          const tmpCanvas = owner.cachedCanvases.getCanvas(\"pattern\", width, height, true);\n          const tmpCtx = tmpCanvas.context;\n          tmpCtx.clearRect(0, 0, tmpCtx.canvas.width, tmpCtx.canvas.height);\n          tmpCtx.beginPath();\n          tmpCtx.rect(0, 0, tmpCtx.canvas.width, tmpCtx.canvas.height);\n          tmpCtx.translate(-ownerBBox[0], -ownerBBox[1]);\n          inverse = util.Util.transform(inverse, [1, 0, 0, 1, ownerBBox[0], ownerBBox[1]]);\n          tmpCtx.transform(...owner.baseTransform);\n          if (this.matrix) {\n            tmpCtx.transform(...this.matrix);\n          }\n          applyBoundingBox(tmpCtx, this._bbox);\n          tmpCtx.fillStyle = this._createGradient(tmpCtx);\n          tmpCtx.fill();\n          pattern = ctx.createPattern(tmpCanvas.canvas, \"no-repeat\");\n          const domMatrix = new DOMMatrix(inverse);\n          pattern.setTransform(domMatrix);\n        } else {\n          applyBoundingBox(ctx, this._bbox);\n          pattern = this._createGradient(ctx);\n        }\n        return pattern;\n      }\n    }\n    function drawTriangle(data, context, p1, p2, p3, c1, c2, c3) {\n      const coords = context.coords,\n        colors = context.colors;\n      const bytes = data.data,\n        rowSize = data.width * 4;\n      let tmp;\n      if (coords[p1 + 1] > coords[p2 + 1]) {\n        tmp = p1;\n        p1 = p2;\n        p2 = tmp;\n        tmp = c1;\n        c1 = c2;\n        c2 = tmp;\n      }\n      if (coords[p2 + 1] > coords[p3 + 1]) {\n        tmp = p2;\n        p2 = p3;\n        p3 = tmp;\n        tmp = c2;\n        c2 = c3;\n        c3 = tmp;\n      }\n      if (coords[p1 + 1] > coords[p2 + 1]) {\n        tmp = p1;\n        p1 = p2;\n        p2 = tmp;\n        tmp = c1;\n        c1 = c2;\n        c2 = tmp;\n      }\n      const x1 = (coords[p1] + context.offsetX) * context.scaleX;\n      const y1 = (coords[p1 + 1] + context.offsetY) * context.scaleY;\n      const x2 = (coords[p2] + context.offsetX) * context.scaleX;\n      const y2 = (coords[p2 + 1] + context.offsetY) * context.scaleY;\n      const x3 = (coords[p3] + context.offsetX) * context.scaleX;\n      const y3 = (coords[p3 + 1] + context.offsetY) * context.scaleY;\n      if (y1 >= y3) {\n        return;\n      }\n      const c1r = colors[c1],\n        c1g = colors[c1 + 1],\n        c1b = colors[c1 + 2];\n      const c2r = colors[c2],\n        c2g = colors[c2 + 1],\n        c2b = colors[c2 + 2];\n      const c3r = colors[c3],\n        c3g = colors[c3 + 1],\n        c3b = colors[c3 + 2];\n      const minY = Math.round(y1),\n        maxY = Math.round(y3);\n      let xa, car, cag, cab;\n      let xb, cbr, cbg, cbb;\n      for (let y = minY; y <= maxY; y++) {\n        if (y < y2) {\n          const k = y < y1 ? 0 : (y1 - y) / (y1 - y2);\n          xa = x1 - (x1 - x2) * k;\n          car = c1r - (c1r - c2r) * k;\n          cag = c1g - (c1g - c2g) * k;\n          cab = c1b - (c1b - c2b) * k;\n        } else {\n          let k;\n          if (y > y3) {\n            k = 1;\n          } else if (y2 === y3) {\n            k = 0;\n          } else {\n            k = (y2 - y) / (y2 - y3);\n          }\n          xa = x2 - (x2 - x3) * k;\n          car = c2r - (c2r - c3r) * k;\n          cag = c2g - (c2g - c3g) * k;\n          cab = c2b - (c2b - c3b) * k;\n        }\n        let k;\n        if (y < y1) {\n          k = 0;\n        } else if (y > y3) {\n          k = 1;\n        } else {\n          k = (y1 - y) / (y1 - y3);\n        }\n        xb = x1 - (x1 - x3) * k;\n        cbr = c1r - (c1r - c3r) * k;\n        cbg = c1g - (c1g - c3g) * k;\n        cbb = c1b - (c1b - c3b) * k;\n        const x1_ = Math.round(Math.min(xa, xb));\n        const x2_ = Math.round(Math.max(xa, xb));\n        let j = rowSize * y + x1_ * 4;\n        for (let x = x1_; x <= x2_; x++) {\n          k = (xa - x) / (xa - xb);\n          if (k < 0) {\n            k = 0;\n          } else if (k > 1) {\n            k = 1;\n          }\n          bytes[j++] = car - (car - cbr) * k | 0;\n          bytes[j++] = cag - (cag - cbg) * k | 0;\n          bytes[j++] = cab - (cab - cbb) * k | 0;\n          bytes[j++] = 255;\n        }\n      }\n    }\n    function drawFigure(data, figure, context) {\n      const ps = figure.coords;\n      const cs = figure.colors;\n      let i, ii;\n      switch (figure.type) {\n        case \"lattice\":\n          const verticesPerRow = figure.verticesPerRow;\n          const rows = Math.floor(ps.length / verticesPerRow) - 1;\n          const cols = verticesPerRow - 1;\n          for (i = 0; i < rows; i++) {\n            let q = i * verticesPerRow;\n            for (let j = 0; j < cols; j++, q++) {\n              drawTriangle(data, context, ps[q], ps[q + 1], ps[q + verticesPerRow], cs[q], cs[q + 1], cs[q + verticesPerRow]);\n              drawTriangle(data, context, ps[q + verticesPerRow + 1], ps[q + 1], ps[q + verticesPerRow], cs[q + verticesPerRow + 1], cs[q + 1], cs[q + verticesPerRow]);\n            }\n          }\n          break;\n        case \"triangles\":\n          for (i = 0, ii = ps.length; i < ii; i += 3) {\n            drawTriangle(data, context, ps[i], ps[i + 1], ps[i + 2], cs[i], cs[i + 1], cs[i + 2]);\n          }\n          break;\n        default:\n          throw new Error(\"illegal figure\");\n      }\n    }\n    class MeshShadingPattern extends BaseShadingPattern {\n      constructor(IR) {\n        super();\n        this._coords = IR[2];\n        this._colors = IR[3];\n        this._figures = IR[4];\n        this._bounds = IR[5];\n        this._bbox = IR[7];\n        this._background = IR[8];\n        this.matrix = null;\n      }\n      _createMeshCanvas(combinedScale, backgroundColor, cachedCanvases) {\n        const EXPECTED_SCALE = 1.1;\n        const MAX_PATTERN_SIZE = 3000;\n        const BORDER_SIZE = 2;\n        const offsetX = Math.floor(this._bounds[0]);\n        const offsetY = Math.floor(this._bounds[1]);\n        const boundsWidth = Math.ceil(this._bounds[2]) - offsetX;\n        const boundsHeight = Math.ceil(this._bounds[3]) - offsetY;\n        const width = Math.min(Math.ceil(Math.abs(boundsWidth * combinedScale[0] * EXPECTED_SCALE)), MAX_PATTERN_SIZE);\n        const height = Math.min(Math.ceil(Math.abs(boundsHeight * combinedScale[1] * EXPECTED_SCALE)), MAX_PATTERN_SIZE);\n        const scaleX = boundsWidth / width;\n        const scaleY = boundsHeight / height;\n        const context = {\n          coords: this._coords,\n          colors: this._colors,\n          offsetX: -offsetX,\n          offsetY: -offsetY,\n          scaleX: 1 / scaleX,\n          scaleY: 1 / scaleY\n        };\n        const paddedWidth = width + BORDER_SIZE * 2;\n        const paddedHeight = height + BORDER_SIZE * 2;\n        const tmpCanvas = cachedCanvases.getCanvas(\"mesh\", paddedWidth, paddedHeight, false);\n        const tmpCtx = tmpCanvas.context;\n        const data = tmpCtx.createImageData(width, height);\n        if (backgroundColor) {\n          const bytes = data.data;\n          for (let i = 0, ii = bytes.length; i < ii; i += 4) {\n            bytes[i] = backgroundColor[0];\n            bytes[i + 1] = backgroundColor[1];\n            bytes[i + 2] = backgroundColor[2];\n            bytes[i + 3] = 255;\n          }\n        }\n        for (const figure of this._figures) {\n          drawFigure(data, figure, context);\n        }\n        tmpCtx.putImageData(data, BORDER_SIZE, BORDER_SIZE);\n        const canvas = tmpCanvas.canvas;\n        return {\n          canvas,\n          offsetX: offsetX - BORDER_SIZE * scaleX,\n          offsetY: offsetY - BORDER_SIZE * scaleY,\n          scaleX,\n          scaleY\n        };\n      }\n      getPattern(ctx, owner, inverse, pathType) {\n        applyBoundingBox(ctx, this._bbox);\n        let scale;\n        if (pathType === PathType.SHADING) {\n          scale = util.Util.singularValueDecompose2dScale((0, display_utils.getCurrentTransform)(ctx));\n        } else {\n          scale = util.Util.singularValueDecompose2dScale(owner.baseTransform);\n          if (this.matrix) {\n            const matrixScale = util.Util.singularValueDecompose2dScale(this.matrix);\n            scale = [scale[0] * matrixScale[0], scale[1] * matrixScale[1]];\n          }\n        }\n        const temporaryPatternCanvas = this._createMeshCanvas(scale, pathType === PathType.SHADING ? null : this._background, owner.cachedCanvases);\n        if (pathType !== PathType.SHADING) {\n          ctx.setTransform(...owner.baseTransform);\n          if (this.matrix) {\n            ctx.transform(...this.matrix);\n          }\n        }\n        ctx.translate(temporaryPatternCanvas.offsetX, temporaryPatternCanvas.offsetY);\n        ctx.scale(temporaryPatternCanvas.scaleX, temporaryPatternCanvas.scaleY);\n        return ctx.createPattern(temporaryPatternCanvas.canvas, \"no-repeat\");\n      }\n    }\n    class DummyShadingPattern extends BaseShadingPattern {\n      getPattern() {\n        return \"hotpink\";\n      }\n    }\n    function getShadingPattern(IR) {\n      switch (IR[0]) {\n        case \"RadialAxial\":\n          return new RadialAxialShadingPattern(IR);\n        case \"Mesh\":\n          return new MeshShadingPattern(IR);\n        case \"Dummy\":\n          return new DummyShadingPattern();\n      }\n      throw new Error(\"Unknown IR type: \".concat(IR[0]));\n    }\n    const PaintType = {\n      COLORED: 1,\n      UNCOLORED: 2\n    };\n    class TilingPattern {\n      constructor(IR, color, ctx, canvasGraphicsFactory, baseTransform) {\n        this.operatorList = IR[2];\n        this.matrix = IR[3] || [1, 0, 0, 1, 0, 0];\n        this.bbox = IR[4];\n        this.xstep = IR[5];\n        this.ystep = IR[6];\n        this.paintType = IR[7];\n        this.tilingType = IR[8];\n        this.color = color;\n        this.ctx = ctx;\n        this.canvasGraphicsFactory = canvasGraphicsFactory;\n        this.baseTransform = baseTransform;\n      }\n      createPatternCanvas(owner) {\n        const operatorList = this.operatorList;\n        const bbox = this.bbox;\n        const xstep = this.xstep;\n        const ystep = this.ystep;\n        const paintType = this.paintType;\n        const tilingType = this.tilingType;\n        const color = this.color;\n        const canvasGraphicsFactory = this.canvasGraphicsFactory;\n        (0, util.info)(\"TilingType: \" + tilingType);\n        const x0 = bbox[0],\n          y0 = bbox[1],\n          x1 = bbox[2],\n          y1 = bbox[3];\n        const matrixScale = util.Util.singularValueDecompose2dScale(this.matrix);\n        const curMatrixScale = util.Util.singularValueDecompose2dScale(this.baseTransform);\n        const combinedScale = [matrixScale[0] * curMatrixScale[0], matrixScale[1] * curMatrixScale[1]];\n        const dimx = this.getSizeAndScale(xstep, this.ctx.canvas.width, combinedScale[0]);\n        const dimy = this.getSizeAndScale(ystep, this.ctx.canvas.height, combinedScale[1]);\n        const tmpCanvas = owner.cachedCanvases.getCanvas(\"pattern\", dimx.size, dimy.size, true);\n        const tmpCtx = tmpCanvas.context;\n        const graphics = canvasGraphicsFactory.createCanvasGraphics(tmpCtx);\n        graphics.groupLevel = owner.groupLevel;\n        this.setFillAndStrokeStyleToContext(graphics, paintType, color);\n        let adjustedX0 = x0;\n        let adjustedY0 = y0;\n        let adjustedX1 = x1;\n        let adjustedY1 = y1;\n        if (x0 < 0) {\n          adjustedX0 = 0;\n          adjustedX1 += Math.abs(x0);\n        }\n        if (y0 < 0) {\n          adjustedY0 = 0;\n          adjustedY1 += Math.abs(y0);\n        }\n        tmpCtx.translate(-(dimx.scale * adjustedX0), -(dimy.scale * adjustedY0));\n        graphics.transform(dimx.scale, 0, 0, dimy.scale, 0, 0);\n        tmpCtx.save();\n        this.clipBbox(graphics, adjustedX0, adjustedY0, adjustedX1, adjustedY1);\n        graphics.baseTransform = (0, display_utils.getCurrentTransform)(graphics.ctx);\n        graphics.executeOperatorList(operatorList);\n        graphics.endDrawing();\n        return {\n          canvas: tmpCanvas.canvas,\n          scaleX: dimx.scale,\n          scaleY: dimy.scale,\n          offsetX: adjustedX0,\n          offsetY: adjustedY0\n        };\n      }\n      getSizeAndScale(step, realOutputSize, scale) {\n        step = Math.abs(step);\n        const maxSize = Math.max(TilingPattern.MAX_PATTERN_SIZE, realOutputSize);\n        let size = Math.ceil(step * scale);\n        if (size >= maxSize) {\n          size = maxSize;\n        } else {\n          scale = size / step;\n        }\n        return {\n          scale,\n          size\n        };\n      }\n      clipBbox(graphics, x0, y0, x1, y1) {\n        const bboxWidth = x1 - x0;\n        const bboxHeight = y1 - y0;\n        graphics.ctx.rect(x0, y0, bboxWidth, bboxHeight);\n        graphics.current.updateRectMinMax((0, display_utils.getCurrentTransform)(graphics.ctx), [x0, y0, x1, y1]);\n        graphics.clip();\n        graphics.endPath();\n      }\n      setFillAndStrokeStyleToContext(graphics, paintType, color) {\n        const context = graphics.ctx,\n          current = graphics.current;\n        switch (paintType) {\n          case PaintType.COLORED:\n            const ctx = this.ctx;\n            context.fillStyle = ctx.fillStyle;\n            context.strokeStyle = ctx.strokeStyle;\n            current.fillColor = ctx.fillStyle;\n            current.strokeColor = ctx.strokeStyle;\n            break;\n          case PaintType.UNCOLORED:\n            const cssColor = util.Util.makeHexColor(color[0], color[1], color[2]);\n            context.fillStyle = cssColor;\n            context.strokeStyle = cssColor;\n            current.fillColor = cssColor;\n            current.strokeColor = cssColor;\n            break;\n          default:\n            throw new util.FormatError(\"Unsupported paint type: \".concat(paintType));\n        }\n      }\n      getPattern(ctx, owner, inverse, pathType) {\n        let matrix = inverse;\n        if (pathType !== PathType.SHADING) {\n          matrix = util.Util.transform(matrix, owner.baseTransform);\n          if (this.matrix) {\n            matrix = util.Util.transform(matrix, this.matrix);\n          }\n        }\n        const temporaryPatternCanvas = this.createPatternCanvas(owner);\n        let domMatrix = new DOMMatrix(matrix);\n        domMatrix = domMatrix.translate(temporaryPatternCanvas.offsetX, temporaryPatternCanvas.offsetY);\n        domMatrix = domMatrix.scale(1 / temporaryPatternCanvas.scaleX, 1 / temporaryPatternCanvas.scaleY);\n        const pattern = ctx.createPattern(temporaryPatternCanvas.canvas, \"repeat\");\n        pattern.setTransform(domMatrix);\n        return pattern;\n      }\n    }\n    _defineProperty(TilingPattern, \"MAX_PATTERN_SIZE\", 3000);\n    ; // CONCATENATED MODULE: ./src/shared/image_utils.js\n\n    function convertToRGBA(params) {\n      switch (params.kind) {\n        case ImageKind.GRAYSCALE_1BPP:\n          return convertBlackAndWhiteToRGBA(params);\n        case ImageKind.RGB_24BPP:\n          return convertRGBToRGBA(params);\n      }\n      return null;\n    }\n    function convertBlackAndWhiteToRGBA(_ref33) {\n      let {\n        src,\n        srcPos = 0,\n        dest,\n        width,\n        height,\n        nonBlackColor = 0xffffffff,\n        inverseDecode = false\n      } = _ref33;\n      const black = util.FeatureTest.isLittleEndian ? 0xff000000 : 0x000000ff;\n      const [zeroMapping, oneMapping] = inverseDecode ? [nonBlackColor, black] : [black, nonBlackColor];\n      const widthInSource = width >> 3;\n      const widthRemainder = width & 7;\n      const srcLength = src.length;\n      dest = new Uint32Array(dest.buffer);\n      let destPos = 0;\n      for (let i = 0; i < height; i++) {\n        for (const max = srcPos + widthInSource; srcPos < max; srcPos++) {\n          const elem = srcPos < srcLength ? src[srcPos] : 255;\n          dest[destPos++] = elem & 0b10000000 ? oneMapping : zeroMapping;\n          dest[destPos++] = elem & 0b1000000 ? oneMapping : zeroMapping;\n          dest[destPos++] = elem & 0b100000 ? oneMapping : zeroMapping;\n          dest[destPos++] = elem & 0b10000 ? oneMapping : zeroMapping;\n          dest[destPos++] = elem & 0b1000 ? oneMapping : zeroMapping;\n          dest[destPos++] = elem & 0b100 ? oneMapping : zeroMapping;\n          dest[destPos++] = elem & 0b10 ? oneMapping : zeroMapping;\n          dest[destPos++] = elem & 0b1 ? oneMapping : zeroMapping;\n        }\n        if (widthRemainder === 0) {\n          continue;\n        }\n        const elem = srcPos < srcLength ? src[srcPos++] : 255;\n        for (let j = 0; j < widthRemainder; j++) {\n          dest[destPos++] = elem & 1 << 7 - j ? oneMapping : zeroMapping;\n        }\n      }\n      return {\n        srcPos,\n        destPos\n      };\n    }\n    function convertRGBToRGBA(_ref34) {\n      let {\n        src,\n        srcPos = 0,\n        dest,\n        destPos = 0,\n        width,\n        height\n      } = _ref34;\n      let i = 0;\n      const len32 = src.length >> 2;\n      const src32 = new Uint32Array(src.buffer, srcPos, len32);\n      if (FeatureTest.isLittleEndian) {\n        for (; i < len32 - 2; i += 3, destPos += 4) {\n          const s1 = src32[i];\n          const s2 = src32[i + 1];\n          const s3 = src32[i + 2];\n          dest[destPos] = s1 | 0xff000000;\n          dest[destPos + 1] = s1 >>> 24 | s2 << 8 | 0xff000000;\n          dest[destPos + 2] = s2 >>> 16 | s3 << 16 | 0xff000000;\n          dest[destPos + 3] = s3 >>> 8 | 0xff000000;\n        }\n        for (let j = i * 4, jj = src.length; j < jj; j += 3) {\n          dest[destPos++] = src[j] | src[j + 1] << 8 | src[j + 2] << 16 | 0xff000000;\n        }\n      } else {\n        for (; i < len32 - 2; i += 3, destPos += 4) {\n          const s1 = src32[i];\n          const s2 = src32[i + 1];\n          const s3 = src32[i + 2];\n          dest[destPos] = s1 | 0xff;\n          dest[destPos + 1] = s1 << 24 | s2 >>> 8 | 0xff;\n          dest[destPos + 2] = s2 << 16 | s3 >>> 16 | 0xff;\n          dest[destPos + 3] = s3 << 8 | 0xff;\n        }\n        for (let j = i * 4, jj = src.length; j < jj; j += 3) {\n          dest[destPos++] = src[j] << 24 | src[j + 1] << 16 | src[j + 2] << 8 | 0xff;\n        }\n      }\n      return {\n        srcPos,\n        destPos\n      };\n    }\n    function grayToRGBA(src, dest) {\n      if (FeatureTest.isLittleEndian) {\n        for (let i = 0, ii = src.length; i < ii; i++) {\n          dest[i] = src[i] * 0x10101 | 0xff000000;\n        }\n      } else {\n        for (let i = 0, ii = src.length; i < ii; i++) {\n          dest[i] = src[i] * 0x1010100 | 0x000000ff;\n        }\n      }\n    }\n    ; // CONCATENATED MODULE: ./src/display/canvas.js\n\n    const MIN_FONT_SIZE = 16;\n    const MAX_FONT_SIZE = 100;\n    const MAX_GROUP_SIZE = 4096;\n    const EXECUTION_TIME = 15;\n    const EXECUTION_STEPS = 10;\n    const MAX_SIZE_TO_COMPILE = 1000;\n    const FULL_CHUNK_HEIGHT = 16;\n    function mirrorContextOperations(ctx, destCtx) {\n      if (ctx._removeMirroring) {\n        throw new Error(\"Context is already forwarding operations.\");\n      }\n      ctx.__originalSave = ctx.save;\n      ctx.__originalRestore = ctx.restore;\n      ctx.__originalRotate = ctx.rotate;\n      ctx.__originalScale = ctx.scale;\n      ctx.__originalTranslate = ctx.translate;\n      ctx.__originalTransform = ctx.transform;\n      ctx.__originalSetTransform = ctx.setTransform;\n      ctx.__originalResetTransform = ctx.resetTransform;\n      ctx.__originalClip = ctx.clip;\n      ctx.__originalMoveTo = ctx.moveTo;\n      ctx.__originalLineTo = ctx.lineTo;\n      ctx.__originalBezierCurveTo = ctx.bezierCurveTo;\n      ctx.__originalRect = ctx.rect;\n      ctx.__originalClosePath = ctx.closePath;\n      ctx.__originalBeginPath = ctx.beginPath;\n      ctx._removeMirroring = () => {\n        ctx.save = ctx.__originalSave;\n        ctx.restore = ctx.__originalRestore;\n        ctx.rotate = ctx.__originalRotate;\n        ctx.scale = ctx.__originalScale;\n        ctx.translate = ctx.__originalTranslate;\n        ctx.transform = ctx.__originalTransform;\n        ctx.setTransform = ctx.__originalSetTransform;\n        ctx.resetTransform = ctx.__originalResetTransform;\n        ctx.clip = ctx.__originalClip;\n        ctx.moveTo = ctx.__originalMoveTo;\n        ctx.lineTo = ctx.__originalLineTo;\n        ctx.bezierCurveTo = ctx.__originalBezierCurveTo;\n        ctx.rect = ctx.__originalRect;\n        ctx.closePath = ctx.__originalClosePath;\n        ctx.beginPath = ctx.__originalBeginPath;\n        delete ctx._removeMirroring;\n      };\n      ctx.save = function ctxSave() {\n        destCtx.save();\n        this.__originalSave();\n      };\n      ctx.restore = function ctxRestore() {\n        destCtx.restore();\n        this.__originalRestore();\n      };\n      ctx.translate = function ctxTranslate(x, y) {\n        destCtx.translate(x, y);\n        this.__originalTranslate(x, y);\n      };\n      ctx.scale = function ctxScale(x, y) {\n        destCtx.scale(x, y);\n        this.__originalScale(x, y);\n      };\n      ctx.transform = function ctxTransform(a, b, c, d, e, f) {\n        destCtx.transform(a, b, c, d, e, f);\n        this.__originalTransform(a, b, c, d, e, f);\n      };\n      ctx.setTransform = function ctxSetTransform(a, b, c, d, e, f) {\n        destCtx.setTransform(a, b, c, d, e, f);\n        this.__originalSetTransform(a, b, c, d, e, f);\n      };\n      ctx.resetTransform = function ctxResetTransform() {\n        destCtx.resetTransform();\n        this.__originalResetTransform();\n      };\n      ctx.rotate = function ctxRotate(angle) {\n        destCtx.rotate(angle);\n        this.__originalRotate(angle);\n      };\n      ctx.clip = function ctxRotate(rule) {\n        destCtx.clip(rule);\n        this.__originalClip(rule);\n      };\n      ctx.moveTo = function (x, y) {\n        destCtx.moveTo(x, y);\n        this.__originalMoveTo(x, y);\n      };\n      ctx.lineTo = function (x, y) {\n        destCtx.lineTo(x, y);\n        this.__originalLineTo(x, y);\n      };\n      ctx.bezierCurveTo = function (cp1x, cp1y, cp2x, cp2y, x, y) {\n        destCtx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\n        this.__originalBezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\n      };\n      ctx.rect = function (x, y, width, height) {\n        destCtx.rect(x, y, width, height);\n        this.__originalRect(x, y, width, height);\n      };\n      ctx.closePath = function () {\n        destCtx.closePath();\n        this.__originalClosePath();\n      };\n      ctx.beginPath = function () {\n        destCtx.beginPath();\n        this.__originalBeginPath();\n      };\n    }\n    class CachedCanvases {\n      constructor(canvasFactory) {\n        this.canvasFactory = canvasFactory;\n        this.cache = Object.create(null);\n      }\n      getCanvas(id, width, height) {\n        let canvasEntry;\n        if (this.cache[id] !== undefined) {\n          canvasEntry = this.cache[id];\n          this.canvasFactory.reset(canvasEntry, width, height);\n        } else {\n          canvasEntry = this.canvasFactory.create(width, height);\n          this.cache[id] = canvasEntry;\n        }\n        return canvasEntry;\n      }\n      delete(id) {\n        delete this.cache[id];\n      }\n      clear() {\n        for (const id in this.cache) {\n          const canvasEntry = this.cache[id];\n          this.canvasFactory.destroy(canvasEntry);\n          delete this.cache[id];\n        }\n      }\n    }\n    function drawImageAtIntegerCoords(ctx, srcImg, srcX, srcY, srcW, srcH, destX, destY, destW, destH) {\n      const [a, b, c, d, tx, ty] = (0, display_utils.getCurrentTransform)(ctx);\n      if (b === 0 && c === 0) {\n        const tlX = destX * a + tx;\n        const rTlX = Math.round(tlX);\n        const tlY = destY * d + ty;\n        const rTlY = Math.round(tlY);\n        const brX = (destX + destW) * a + tx;\n        const rWidth = Math.abs(Math.round(brX) - rTlX) || 1;\n        const brY = (destY + destH) * d + ty;\n        const rHeight = Math.abs(Math.round(brY) - rTlY) || 1;\n        ctx.setTransform(Math.sign(a), 0, 0, Math.sign(d), rTlX, rTlY);\n        ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, 0, 0, rWidth, rHeight);\n        ctx.setTransform(a, b, c, d, tx, ty);\n        return [rWidth, rHeight];\n      }\n      if (a === 0 && d === 0) {\n        const tlX = destY * c + tx;\n        const rTlX = Math.round(tlX);\n        const tlY = destX * b + ty;\n        const rTlY = Math.round(tlY);\n        const brX = (destY + destH) * c + tx;\n        const rWidth = Math.abs(Math.round(brX) - rTlX) || 1;\n        const brY = (destX + destW) * b + ty;\n        const rHeight = Math.abs(Math.round(brY) - rTlY) || 1;\n        ctx.setTransform(0, Math.sign(b), Math.sign(c), 0, rTlX, rTlY);\n        ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, 0, 0, rHeight, rWidth);\n        ctx.setTransform(a, b, c, d, tx, ty);\n        return [rHeight, rWidth];\n      }\n      ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, destX, destY, destW, destH);\n      const scaleX = Math.hypot(a, b);\n      const scaleY = Math.hypot(c, d);\n      return [scaleX * destW, scaleY * destH];\n    }\n    function compileType3Glyph(imgData) {\n      const {\n        width,\n        height\n      } = imgData;\n      if (width > MAX_SIZE_TO_COMPILE || height > MAX_SIZE_TO_COMPILE) {\n        return null;\n      }\n      const POINT_TO_PROCESS_LIMIT = 1000;\n      const POINT_TYPES = new Uint8Array([0, 2, 4, 0, 1, 0, 5, 4, 8, 10, 0, 8, 0, 2, 1, 0]);\n      const width1 = width + 1;\n      let points = new Uint8Array(width1 * (height + 1));\n      let i, j, j0;\n      const lineSize = width + 7 & ~7;\n      let data = new Uint8Array(lineSize * height),\n        pos = 0;\n      for (const elem of imgData.data) {\n        let mask = 128;\n        while (mask > 0) {\n          data[pos++] = elem & mask ? 0 : 255;\n          mask >>= 1;\n        }\n      }\n      let count = 0;\n      pos = 0;\n      if (data[pos] !== 0) {\n        points[0] = 1;\n        ++count;\n      }\n      for (j = 1; j < width; j++) {\n        if (data[pos] !== data[pos + 1]) {\n          points[j] = data[pos] ? 2 : 1;\n          ++count;\n        }\n        pos++;\n      }\n      if (data[pos] !== 0) {\n        points[j] = 2;\n        ++count;\n      }\n      for (i = 1; i < height; i++) {\n        pos = i * lineSize;\n        j0 = i * width1;\n        if (data[pos - lineSize] !== data[pos]) {\n          points[j0] = data[pos] ? 1 : 8;\n          ++count;\n        }\n        let sum = (data[pos] ? 4 : 0) + (data[pos - lineSize] ? 8 : 0);\n        for (j = 1; j < width; j++) {\n          sum = (sum >> 2) + (data[pos + 1] ? 4 : 0) + (data[pos - lineSize + 1] ? 8 : 0);\n          if (POINT_TYPES[sum]) {\n            points[j0 + j] = POINT_TYPES[sum];\n            ++count;\n          }\n          pos++;\n        }\n        if (data[pos - lineSize] !== data[pos]) {\n          points[j0 + j] = data[pos] ? 2 : 4;\n          ++count;\n        }\n        if (count > POINT_TO_PROCESS_LIMIT) {\n          return null;\n        }\n      }\n      pos = lineSize * (height - 1);\n      j0 = i * width1;\n      if (data[pos] !== 0) {\n        points[j0] = 8;\n        ++count;\n      }\n      for (j = 1; j < width; j++) {\n        if (data[pos] !== data[pos + 1]) {\n          points[j0 + j] = data[pos] ? 4 : 8;\n          ++count;\n        }\n        pos++;\n      }\n      if (data[pos] !== 0) {\n        points[j0 + j] = 4;\n        ++count;\n      }\n      if (count > POINT_TO_PROCESS_LIMIT) {\n        return null;\n      }\n      const steps = new Int32Array([0, width1, -1, 0, -width1, 0, 0, 0, 1]);\n      const path = new Path2D();\n      for (i = 0; count && i <= height; i++) {\n        let p = i * width1;\n        const end = p + width;\n        while (p < end && !points[p]) {\n          p++;\n        }\n        if (p === end) {\n          continue;\n        }\n        path.moveTo(p % width1, i);\n        const p0 = p;\n        let type = points[p];\n        do {\n          const step = steps[type];\n          do {\n            p += step;\n          } while (!points[p]);\n          const pp = points[p];\n          if (pp !== 5 && pp !== 10) {\n            type = pp;\n            points[p] = 0;\n          } else {\n            type = pp & 0x33 * type >> 4;\n            points[p] &= type >> 2 | type << 2;\n          }\n          path.lineTo(p % width1, p / width1 | 0);\n          if (!points[p]) {\n            --count;\n          }\n        } while (p0 !== p);\n        --i;\n      }\n      data = null;\n      points = null;\n      const drawOutline = function (c) {\n        c.save();\n        c.scale(1 / width, -1 / height);\n        c.translate(0, -height);\n        c.fill(path);\n        c.beginPath();\n        c.restore();\n      };\n      return drawOutline;\n    }\n    class CanvasExtraState {\n      constructor(width, height) {\n        this.alphaIsShape = false;\n        this.fontSize = 0;\n        this.fontSizeScale = 1;\n        this.textMatrix = util.IDENTITY_MATRIX;\n        this.textMatrixScale = 1;\n        this.fontMatrix = util.FONT_IDENTITY_MATRIX;\n        this.leading = 0;\n        this.x = 0;\n        this.y = 0;\n        this.lineX = 0;\n        this.lineY = 0;\n        this.charSpacing = 0;\n        this.wordSpacing = 0;\n        this.textHScale = 1;\n        this.textRenderingMode = util.TextRenderingMode.FILL;\n        this.textRise = 0;\n        this.fillColor = \"#000000\";\n        this.strokeColor = \"#000000\";\n        this.patternFill = false;\n        this.fillAlpha = 1;\n        this.strokeAlpha = 1;\n        this.lineWidth = 1;\n        this.activeSMask = null;\n        this.transferMaps = \"none\";\n        this.startNewPathAndClipBox([0, 0, width, height]);\n      }\n      clone() {\n        const clone = Object.create(this);\n        clone.clipBox = this.clipBox.slice();\n        return clone;\n      }\n      setCurrentPoint(x, y) {\n        this.x = x;\n        this.y = y;\n      }\n      updatePathMinMax(transform, x, y) {\n        [x, y] = util.Util.applyTransform([x, y], transform);\n        this.minX = Math.min(this.minX, x);\n        this.minY = Math.min(this.minY, y);\n        this.maxX = Math.max(this.maxX, x);\n        this.maxY = Math.max(this.maxY, y);\n      }\n      updateRectMinMax(transform, rect) {\n        const p1 = util.Util.applyTransform(rect, transform);\n        const p2 = util.Util.applyTransform(rect.slice(2), transform);\n        const p3 = util.Util.applyTransform([rect[0], rect[3]], transform);\n        const p4 = util.Util.applyTransform([rect[2], rect[1]], transform);\n        this.minX = Math.min(this.minX, p1[0], p2[0], p3[0], p4[0]);\n        this.minY = Math.min(this.minY, p1[1], p2[1], p3[1], p4[1]);\n        this.maxX = Math.max(this.maxX, p1[0], p2[0], p3[0], p4[0]);\n        this.maxY = Math.max(this.maxY, p1[1], p2[1], p3[1], p4[1]);\n      }\n      updateScalingPathMinMax(transform, minMax) {\n        util.Util.scaleMinMax(transform, minMax);\n        this.minX = Math.min(this.minX, minMax[0]);\n        this.maxX = Math.max(this.maxX, minMax[1]);\n        this.minY = Math.min(this.minY, minMax[2]);\n        this.maxY = Math.max(this.maxY, minMax[3]);\n      }\n      updateCurvePathMinMax(transform, x0, y0, x1, y1, x2, y2, x3, y3, minMax) {\n        const box = util.Util.bezierBoundingBox(x0, y0, x1, y1, x2, y2, x3, y3);\n        if (minMax) {\n          minMax[0] = Math.min(minMax[0], box[0], box[2]);\n          minMax[1] = Math.max(minMax[1], box[0], box[2]);\n          minMax[2] = Math.min(minMax[2], box[1], box[3]);\n          minMax[3] = Math.max(minMax[3], box[1], box[3]);\n          return;\n        }\n        this.updateRectMinMax(transform, box);\n      }\n      getPathBoundingBox() {\n        let pathType = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : PathType.FILL;\n        let transform = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n        const box = [this.minX, this.minY, this.maxX, this.maxY];\n        if (pathType === PathType.STROKE) {\n          if (!transform) {\n            (0, util.unreachable)(\"Stroke bounding box must include transform.\");\n          }\n          const scale = util.Util.singularValueDecompose2dScale(transform);\n          const xStrokePad = scale[0] * this.lineWidth / 2;\n          const yStrokePad = scale[1] * this.lineWidth / 2;\n          box[0] -= xStrokePad;\n          box[1] -= yStrokePad;\n          box[2] += xStrokePad;\n          box[3] += yStrokePad;\n        }\n        return box;\n      }\n      updateClipFromPath() {\n        const intersect = util.Util.intersect(this.clipBox, this.getPathBoundingBox());\n        this.startNewPathAndClipBox(intersect || [0, 0, 0, 0]);\n      }\n      isEmptyClip() {\n        return this.minX === Infinity;\n      }\n      startNewPathAndClipBox(box) {\n        this.clipBox = box;\n        this.minX = Infinity;\n        this.minY = Infinity;\n        this.maxX = 0;\n        this.maxY = 0;\n      }\n      getClippedPathBoundingBox() {\n        let pathType = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : PathType.FILL;\n        let transform = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n        return util.Util.intersect(this.clipBox, this.getPathBoundingBox(pathType, transform));\n      }\n    }\n    function putBinaryImageData(ctx, imgData) {\n      if (typeof ImageData !== \"undefined\" && imgData instanceof ImageData) {\n        ctx.putImageData(imgData, 0, 0);\n        return;\n      }\n      const height = imgData.height,\n        width = imgData.width;\n      const partialChunkHeight = height % FULL_CHUNK_HEIGHT;\n      const fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;\n      const totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;\n      const chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);\n      let srcPos = 0,\n        destPos;\n      const src = imgData.data;\n      const dest = chunkImgData.data;\n      let i, j, thisChunkHeight, elemsInThisChunk;\n      if (imgData.kind === util.ImageKind.GRAYSCALE_1BPP) {\n        const srcLength = src.byteLength;\n        const dest32 = new Uint32Array(dest.buffer, 0, dest.byteLength >> 2);\n        const dest32DataLength = dest32.length;\n        const fullSrcDiff = width + 7 >> 3;\n        const white = 0xffffffff;\n        const black = util.FeatureTest.isLittleEndian ? 0xff000000 : 0x000000ff;\n        for (i = 0; i < totalChunks; i++) {\n          thisChunkHeight = i < fullChunks ? FULL_CHUNK_HEIGHT : partialChunkHeight;\n          destPos = 0;\n          for (j = 0; j < thisChunkHeight; j++) {\n            const srcDiff = srcLength - srcPos;\n            let k = 0;\n            const kEnd = srcDiff > fullSrcDiff ? width : srcDiff * 8 - 7;\n            const kEndUnrolled = kEnd & ~7;\n            let mask = 0;\n            let srcByte = 0;\n            for (; k < kEndUnrolled; k += 8) {\n              srcByte = src[srcPos++];\n              dest32[destPos++] = srcByte & 128 ? white : black;\n              dest32[destPos++] = srcByte & 64 ? white : black;\n              dest32[destPos++] = srcByte & 32 ? white : black;\n              dest32[destPos++] = srcByte & 16 ? white : black;\n              dest32[destPos++] = srcByte & 8 ? white : black;\n              dest32[destPos++] = srcByte & 4 ? white : black;\n              dest32[destPos++] = srcByte & 2 ? white : black;\n              dest32[destPos++] = srcByte & 1 ? white : black;\n            }\n            for (; k < kEnd; k++) {\n              if (mask === 0) {\n                srcByte = src[srcPos++];\n                mask = 128;\n              }\n              dest32[destPos++] = srcByte & mask ? white : black;\n              mask >>= 1;\n            }\n          }\n          while (destPos < dest32DataLength) {\n            dest32[destPos++] = 0;\n          }\n          ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n        }\n      } else if (imgData.kind === util.ImageKind.RGBA_32BPP) {\n        j = 0;\n        elemsInThisChunk = width * FULL_CHUNK_HEIGHT * 4;\n        for (i = 0; i < fullChunks; i++) {\n          dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));\n          srcPos += elemsInThisChunk;\n          ctx.putImageData(chunkImgData, 0, j);\n          j += FULL_CHUNK_HEIGHT;\n        }\n        if (i < totalChunks) {\n          elemsInThisChunk = width * partialChunkHeight * 4;\n          dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));\n          ctx.putImageData(chunkImgData, 0, j);\n        }\n      } else if (imgData.kind === util.ImageKind.RGB_24BPP) {\n        thisChunkHeight = FULL_CHUNK_HEIGHT;\n        elemsInThisChunk = width * thisChunkHeight;\n        for (i = 0; i < totalChunks; i++) {\n          if (i >= fullChunks) {\n            thisChunkHeight = partialChunkHeight;\n            elemsInThisChunk = width * thisChunkHeight;\n          }\n          destPos = 0;\n          for (j = elemsInThisChunk; j--;) {\n            dest[destPos++] = src[srcPos++];\n            dest[destPos++] = src[srcPos++];\n            dest[destPos++] = src[srcPos++];\n            dest[destPos++] = 255;\n          }\n          ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n        }\n      } else {\n        throw new Error(\"bad image kind: \".concat(imgData.kind));\n      }\n    }\n    function putBinaryImageMask(ctx, imgData) {\n      if (imgData.bitmap) {\n        ctx.drawImage(imgData.bitmap, 0, 0);\n        return;\n      }\n      const height = imgData.height,\n        width = imgData.width;\n      const partialChunkHeight = height % FULL_CHUNK_HEIGHT;\n      const fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;\n      const totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;\n      const chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);\n      let srcPos = 0;\n      const src = imgData.data;\n      const dest = chunkImgData.data;\n      for (let i = 0; i < totalChunks; i++) {\n        const thisChunkHeight = i < fullChunks ? FULL_CHUNK_HEIGHT : partialChunkHeight;\n        ({\n          srcPos\n        } = convertBlackAndWhiteToRGBA({\n          src,\n          srcPos,\n          dest,\n          width,\n          height: thisChunkHeight,\n          nonBlackColor: 0\n        }));\n        ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n      }\n    }\n    function copyCtxState(sourceCtx, destCtx) {\n      const properties = [\"strokeStyle\", \"fillStyle\", \"fillRule\", \"globalAlpha\", \"lineWidth\", \"lineCap\", \"lineJoin\", \"miterLimit\", \"globalCompositeOperation\", \"font\", \"filter\"];\n      for (const property of properties) {\n        if (sourceCtx[property] !== undefined) {\n          destCtx[property] = sourceCtx[property];\n        }\n      }\n      if (sourceCtx.setLineDash !== undefined) {\n        destCtx.setLineDash(sourceCtx.getLineDash());\n        destCtx.lineDashOffset = sourceCtx.lineDashOffset;\n      }\n    }\n    function resetCtxToDefault(ctx) {\n      ctx.strokeStyle = ctx.fillStyle = \"#000000\";\n      ctx.fillRule = \"nonzero\";\n      ctx.globalAlpha = 1;\n      ctx.lineWidth = 1;\n      ctx.lineCap = \"butt\";\n      ctx.lineJoin = \"miter\";\n      ctx.miterLimit = 10;\n      ctx.globalCompositeOperation = \"source-over\";\n      ctx.font = \"10px sans-serif\";\n      if (ctx.setLineDash !== undefined) {\n        ctx.setLineDash([]);\n        ctx.lineDashOffset = 0;\n      }\n      if (!util.isNodeJS) {\n        const {\n          filter\n        } = ctx;\n        if (filter !== \"none\" && filter !== \"\") {\n          ctx.filter = \"none\";\n        }\n      }\n    }\n    function composeSMaskBackdrop(bytes, r0, g0, b0) {\n      const length = bytes.length;\n      for (let i = 3; i < length; i += 4) {\n        const alpha = bytes[i];\n        if (alpha === 0) {\n          bytes[i - 3] = r0;\n          bytes[i - 2] = g0;\n          bytes[i - 1] = b0;\n        } else if (alpha < 255) {\n          const alpha_ = 255 - alpha;\n          bytes[i - 3] = bytes[i - 3] * alpha + r0 * alpha_ >> 8;\n          bytes[i - 2] = bytes[i - 2] * alpha + g0 * alpha_ >> 8;\n          bytes[i - 1] = bytes[i - 1] * alpha + b0 * alpha_ >> 8;\n        }\n      }\n    }\n    function composeSMaskAlpha(maskData, layerData, transferMap) {\n      const length = maskData.length;\n      const scale = 1 / 255;\n      for (let i = 3; i < length; i += 4) {\n        const alpha = transferMap ? transferMap[maskData[i]] : maskData[i];\n        layerData[i] = layerData[i] * alpha * scale | 0;\n      }\n    }\n    function composeSMaskLuminosity(maskData, layerData, transferMap) {\n      const length = maskData.length;\n      for (let i = 3; i < length; i += 4) {\n        const y = maskData[i - 3] * 77 + maskData[i - 2] * 152 + maskData[i - 1] * 28;\n        layerData[i] = transferMap ? layerData[i] * transferMap[y >> 8] >> 8 : layerData[i] * y >> 16;\n      }\n    }\n    function genericComposeSMask(maskCtx, layerCtx, width, height, subtype, backdrop, transferMap, layerOffsetX, layerOffsetY, maskOffsetX, maskOffsetY) {\n      const hasBackdrop = !!backdrop;\n      const r0 = hasBackdrop ? backdrop[0] : 0;\n      const g0 = hasBackdrop ? backdrop[1] : 0;\n      const b0 = hasBackdrop ? backdrop[2] : 0;\n      const composeFn = subtype === \"Luminosity\" ? composeSMaskLuminosity : composeSMaskAlpha;\n      const PIXELS_TO_PROCESS = 1048576;\n      const chunkSize = Math.min(height, Math.ceil(PIXELS_TO_PROCESS / width));\n      for (let row = 0; row < height; row += chunkSize) {\n        const chunkHeight = Math.min(chunkSize, height - row);\n        const maskData = maskCtx.getImageData(layerOffsetX - maskOffsetX, row + (layerOffsetY - maskOffsetY), width, chunkHeight);\n        const layerData = layerCtx.getImageData(layerOffsetX, row + layerOffsetY, width, chunkHeight);\n        if (hasBackdrop) {\n          composeSMaskBackdrop(maskData.data, r0, g0, b0);\n        }\n        composeFn(maskData.data, layerData.data, transferMap);\n        layerCtx.putImageData(layerData, layerOffsetX, row + layerOffsetY);\n      }\n    }\n    function composeSMask(ctx, smask, layerCtx, layerBox) {\n      const layerOffsetX = layerBox[0];\n      const layerOffsetY = layerBox[1];\n      const layerWidth = layerBox[2] - layerOffsetX;\n      const layerHeight = layerBox[3] - layerOffsetY;\n      if (layerWidth === 0 || layerHeight === 0) {\n        return;\n      }\n      genericComposeSMask(smask.context, layerCtx, layerWidth, layerHeight, smask.subtype, smask.backdrop, smask.transferMap, layerOffsetX, layerOffsetY, smask.offsetX, smask.offsetY);\n      ctx.save();\n      ctx.globalAlpha = 1;\n      ctx.globalCompositeOperation = \"source-over\";\n      ctx.setTransform(1, 0, 0, 1, 0, 0);\n      ctx.drawImage(layerCtx.canvas, 0, 0);\n      ctx.restore();\n    }\n    function getImageSmoothingEnabled(transform, interpolate) {\n      const scale = util.Util.singularValueDecompose2dScale(transform);\n      scale[0] = Math.fround(scale[0]);\n      scale[1] = Math.fround(scale[1]);\n      const actualScale = Math.fround((globalThis.devicePixelRatio || 1) * display_utils.PixelsPerInch.PDF_TO_CSS_UNITS);\n      if (interpolate !== undefined) {\n        return interpolate;\n      } else if (scale[0] <= actualScale || scale[1] <= actualScale) {\n        return true;\n      }\n      return false;\n    }\n    const LINE_CAP_STYLES = [\"butt\", \"round\", \"square\"];\n    const LINE_JOIN_STYLES = [\"miter\", \"round\", \"bevel\"];\n    const NORMAL_CLIP = {};\n    const EO_CLIP = {};\n    var _restoreInitialState = /*#__PURE__*/new WeakSet();\n    var _drawFilter = /*#__PURE__*/new WeakSet();\n    class CanvasGraphics {\n      constructor(canvasCtx, commonObjs, objs, canvasFactory, filterFactory, _ref35, annotationCanvasMap, pageColors) {\n        let {\n          optionalContentConfig,\n          markedContentStack = null\n        } = _ref35;\n        _classPrivateMethodInitSpec(this, _drawFilter);\n        _classPrivateMethodInitSpec(this, _restoreInitialState);\n        this.ctx = canvasCtx;\n        this.current = new CanvasExtraState(this.ctx.canvas.width, this.ctx.canvas.height);\n        this.stateStack = [];\n        this.pendingClip = null;\n        this.pendingEOFill = false;\n        this.res = null;\n        this.xobjs = null;\n        this.commonObjs = commonObjs;\n        this.objs = objs;\n        this.canvasFactory = canvasFactory;\n        this.filterFactory = filterFactory;\n        this.groupStack = [];\n        this.processingType3 = null;\n        this.baseTransform = null;\n        this.baseTransformStack = [];\n        this.groupLevel = 0;\n        this.smaskStack = [];\n        this.smaskCounter = 0;\n        this.tempSMask = null;\n        this.suspendedCtx = null;\n        this.contentVisible = true;\n        this.markedContentStack = markedContentStack || [];\n        this.optionalContentConfig = optionalContentConfig;\n        this.cachedCanvases = new CachedCanvases(this.canvasFactory);\n        this.cachedPatterns = new Map();\n        this.annotationCanvasMap = annotationCanvasMap;\n        this.viewportScale = 1;\n        this.outputScaleX = 1;\n        this.outputScaleY = 1;\n        this.pageColors = pageColors;\n        this._cachedScaleForStroking = [-1, 0];\n        this._cachedGetSinglePixelWidth = null;\n        this._cachedBitmapsMap = new Map();\n      }\n      getObject(data) {\n        let fallback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n        if (typeof data === \"string\") {\n          return data.startsWith(\"g_\") ? this.commonObjs.get(data) : this.objs.get(data);\n        }\n        return fallback;\n      }\n      beginDrawing(_ref36) {\n        let {\n          transform,\n          viewport,\n          transparency = false,\n          background = null\n        } = _ref36;\n        const width = this.ctx.canvas.width;\n        const height = this.ctx.canvas.height;\n        const savedFillStyle = this.ctx.fillStyle;\n        this.ctx.fillStyle = background || \"#ffffff\";\n        this.ctx.fillRect(0, 0, width, height);\n        this.ctx.fillStyle = savedFillStyle;\n        if (transparency) {\n          const transparentCanvas = this.cachedCanvases.getCanvas(\"transparent\", width, height);\n          this.compositeCtx = this.ctx;\n          this.transparentCanvas = transparentCanvas.canvas;\n          this.ctx = transparentCanvas.context;\n          this.ctx.save();\n          this.ctx.transform(...(0, display_utils.getCurrentTransform)(this.compositeCtx));\n        }\n        this.ctx.save();\n        resetCtxToDefault(this.ctx);\n        if (transform) {\n          this.ctx.transform(...transform);\n          this.outputScaleX = transform[0];\n          this.outputScaleY = transform[0];\n        }\n        this.ctx.transform(...viewport.transform);\n        this.viewportScale = viewport.scale;\n        this.baseTransform = (0, display_utils.getCurrentTransform)(this.ctx);\n      }\n      executeOperatorList(operatorList, executionStartIdx, continueCallback, stepper) {\n        const argsArray = operatorList.argsArray;\n        const fnArray = operatorList.fnArray;\n        let i = executionStartIdx || 0;\n        const argsArrayLen = argsArray.length;\n        if (argsArrayLen === i) {\n          return i;\n        }\n        const chunkOperations = argsArrayLen - i > EXECUTION_STEPS && typeof continueCallback === \"function\";\n        const endTime = chunkOperations ? Date.now() + EXECUTION_TIME : 0;\n        let steps = 0;\n        const commonObjs = this.commonObjs;\n        const objs = this.objs;\n        let fnId;\n        while (true) {\n          if (stepper !== undefined && i === stepper.nextBreakPoint) {\n            stepper.breakIt(i, continueCallback);\n            return i;\n          }\n          fnId = fnArray[i];\n          if (fnId !== util.OPS.dependency) {\n            this[fnId].apply(this, argsArray[i]);\n          } else {\n            for (const depObjId of argsArray[i]) {\n              const objsPool = depObjId.startsWith(\"g_\") ? commonObjs : objs;\n              if (!objsPool.has(depObjId)) {\n                objsPool.get(depObjId, continueCallback);\n                return i;\n              }\n            }\n          }\n          i++;\n          if (i === argsArrayLen) {\n            return i;\n          }\n          if (chunkOperations && ++steps > EXECUTION_STEPS) {\n            if (Date.now() > endTime) {\n              continueCallback();\n              return i;\n            }\n            steps = 0;\n          }\n        }\n      }\n      endDrawing() {\n        _classPrivateMethodGet(this, _restoreInitialState, _restoreInitialState2).call(this);\n        this.cachedCanvases.clear();\n        this.cachedPatterns.clear();\n        for (const cache of this._cachedBitmapsMap.values()) {\n          for (const canvas of cache.values()) {\n            if (typeof HTMLCanvasElement !== \"undefined\" && canvas instanceof HTMLCanvasElement) {\n              canvas.width = canvas.height = 0;\n            }\n          }\n          cache.clear();\n        }\n        this._cachedBitmapsMap.clear();\n        _classPrivateMethodGet(this, _drawFilter, _drawFilter2).call(this);\n      }\n      _scaleImage(img, inverseTransform) {\n        const width = img.width;\n        const height = img.height;\n        let widthScale = Math.max(Math.hypot(inverseTransform[0], inverseTransform[1]), 1);\n        let heightScale = Math.max(Math.hypot(inverseTransform[2], inverseTransform[3]), 1);\n        let paintWidth = width,\n          paintHeight = height;\n        let tmpCanvasId = \"prescale1\";\n        let tmpCanvas, tmpCtx;\n        while (widthScale > 2 && paintWidth > 1 || heightScale > 2 && paintHeight > 1) {\n          let newWidth = paintWidth,\n            newHeight = paintHeight;\n          if (widthScale > 2 && paintWidth > 1) {\n            newWidth = paintWidth >= 16384 ? Math.floor(paintWidth / 2) - 1 || 1 : Math.ceil(paintWidth / 2);\n            widthScale /= paintWidth / newWidth;\n          }\n          if (heightScale > 2 && paintHeight > 1) {\n            newHeight = paintHeight >= 16384 ? Math.floor(paintHeight / 2) - 1 || 1 : Math.ceil(paintHeight) / 2;\n            heightScale /= paintHeight / newHeight;\n          }\n          tmpCanvas = this.cachedCanvases.getCanvas(tmpCanvasId, newWidth, newHeight);\n          tmpCtx = tmpCanvas.context;\n          tmpCtx.clearRect(0, 0, newWidth, newHeight);\n          tmpCtx.drawImage(img, 0, 0, paintWidth, paintHeight, 0, 0, newWidth, newHeight);\n          img = tmpCanvas.canvas;\n          paintWidth = newWidth;\n          paintHeight = newHeight;\n          tmpCanvasId = tmpCanvasId === \"prescale1\" ? \"prescale2\" : \"prescale1\";\n        }\n        return {\n          img,\n          paintWidth,\n          paintHeight\n        };\n      }\n      _createMaskCanvas(img) {\n        const ctx = this.ctx;\n        const {\n          width,\n          height\n        } = img;\n        const fillColor = this.current.fillColor;\n        const isPatternFill = this.current.patternFill;\n        const currentTransform = (0, display_utils.getCurrentTransform)(ctx);\n        let cache, cacheKey, scaled, maskCanvas;\n        if ((img.bitmap || img.data) && img.count > 1) {\n          const mainKey = img.bitmap || img.data.buffer;\n          cacheKey = JSON.stringify(isPatternFill ? currentTransform : [currentTransform.slice(0, 4), fillColor]);\n          cache = this._cachedBitmapsMap.get(mainKey);\n          if (!cache) {\n            cache = new Map();\n            this._cachedBitmapsMap.set(mainKey, cache);\n          }\n          const cachedImage = cache.get(cacheKey);\n          if (cachedImage && !isPatternFill) {\n            const offsetX = Math.round(Math.min(currentTransform[0], currentTransform[2]) + currentTransform[4]);\n            const offsetY = Math.round(Math.min(currentTransform[1], currentTransform[3]) + currentTransform[5]);\n            return {\n              canvas: cachedImage,\n              offsetX,\n              offsetY\n            };\n          }\n          scaled = cachedImage;\n        }\n        if (!scaled) {\n          maskCanvas = this.cachedCanvases.getCanvas(\"maskCanvas\", width, height);\n          putBinaryImageMask(maskCanvas.context, img);\n        }\n        let maskToCanvas = util.Util.transform(currentTransform, [1 / width, 0, 0, -1 / height, 0, 0]);\n        maskToCanvas = util.Util.transform(maskToCanvas, [1, 0, 0, 1, 0, -height]);\n        const [minX, minY, maxX, maxY] = util.Util.getAxialAlignedBoundingBox([0, 0, width, height], maskToCanvas);\n        const drawnWidth = Math.round(maxX - minX) || 1;\n        const drawnHeight = Math.round(maxY - minY) || 1;\n        const fillCanvas = this.cachedCanvases.getCanvas(\"fillCanvas\", drawnWidth, drawnHeight);\n        const fillCtx = fillCanvas.context;\n        const offsetX = minX;\n        const offsetY = minY;\n        fillCtx.translate(-offsetX, -offsetY);\n        fillCtx.transform(...maskToCanvas);\n        if (!scaled) {\n          scaled = this._scaleImage(maskCanvas.canvas, (0, display_utils.getCurrentTransformInverse)(fillCtx));\n          scaled = scaled.img;\n          if (cache && isPatternFill) {\n            cache.set(cacheKey, scaled);\n          }\n        }\n        fillCtx.imageSmoothingEnabled = getImageSmoothingEnabled((0, display_utils.getCurrentTransform)(fillCtx), img.interpolate);\n        drawImageAtIntegerCoords(fillCtx, scaled, 0, 0, scaled.width, scaled.height, 0, 0, width, height);\n        fillCtx.globalCompositeOperation = \"source-in\";\n        const inverse = util.Util.transform((0, display_utils.getCurrentTransformInverse)(fillCtx), [1, 0, 0, 1, -offsetX, -offsetY]);\n        fillCtx.fillStyle = isPatternFill ? fillColor.getPattern(ctx, this, inverse, PathType.FILL) : fillColor;\n        fillCtx.fillRect(0, 0, width, height);\n        if (cache && !isPatternFill) {\n          this.cachedCanvases.delete(\"fillCanvas\");\n          cache.set(cacheKey, fillCanvas.canvas);\n        }\n        return {\n          canvas: fillCanvas.canvas,\n          offsetX: Math.round(offsetX),\n          offsetY: Math.round(offsetY)\n        };\n      }\n      setLineWidth(width) {\n        if (width !== this.current.lineWidth) {\n          this._cachedScaleForStroking[0] = -1;\n        }\n        this.current.lineWidth = width;\n        this.ctx.lineWidth = width;\n      }\n      setLineCap(style) {\n        this.ctx.lineCap = LINE_CAP_STYLES[style];\n      }\n      setLineJoin(style) {\n        this.ctx.lineJoin = LINE_JOIN_STYLES[style];\n      }\n      setMiterLimit(limit) {\n        this.ctx.miterLimit = limit;\n      }\n      setDash(dashArray, dashPhase) {\n        const ctx = this.ctx;\n        if (ctx.setLineDash !== undefined) {\n          ctx.setLineDash(dashArray);\n          ctx.lineDashOffset = dashPhase;\n        }\n      }\n      setRenderingIntent(intent) {}\n      setFlatness(flatness) {}\n      setGState(states) {\n        for (const [key, value] of states) {\n          switch (key) {\n            case \"LW\":\n              this.setLineWidth(value);\n              break;\n            case \"LC\":\n              this.setLineCap(value);\n              break;\n            case \"LJ\":\n              this.setLineJoin(value);\n              break;\n            case \"ML\":\n              this.setMiterLimit(value);\n              break;\n            case \"D\":\n              this.setDash(value[0], value[1]);\n              break;\n            case \"RI\":\n              this.setRenderingIntent(value);\n              break;\n            case \"FL\":\n              this.setFlatness(value);\n              break;\n            case \"Font\":\n              this.setFont(value[0], value[1]);\n              break;\n            case \"CA\":\n              this.current.strokeAlpha = value;\n              break;\n            case \"ca\":\n              this.current.fillAlpha = value;\n              this.ctx.globalAlpha = value;\n              break;\n            case \"BM\":\n              this.ctx.globalCompositeOperation = value;\n              break;\n            case \"SMask\":\n              this.current.activeSMask = value ? this.tempSMask : null;\n              this.tempSMask = null;\n              this.checkSMaskState();\n              break;\n            case \"TR\":\n              this.ctx.filter = this.current.transferMaps = this.filterFactory.addFilter(value);\n              break;\n          }\n        }\n      }\n      get inSMaskMode() {\n        return !!this.suspendedCtx;\n      }\n      checkSMaskState() {\n        const inSMaskMode = this.inSMaskMode;\n        if (this.current.activeSMask && !inSMaskMode) {\n          this.beginSMaskMode();\n        } else if (!this.current.activeSMask && inSMaskMode) {\n          this.endSMaskMode();\n        }\n      }\n      beginSMaskMode() {\n        if (this.inSMaskMode) {\n          throw new Error(\"beginSMaskMode called while already in smask mode\");\n        }\n        const drawnWidth = this.ctx.canvas.width;\n        const drawnHeight = this.ctx.canvas.height;\n        const cacheId = \"smaskGroupAt\" + this.groupLevel;\n        const scratchCanvas = this.cachedCanvases.getCanvas(cacheId, drawnWidth, drawnHeight);\n        this.suspendedCtx = this.ctx;\n        this.ctx = scratchCanvas.context;\n        const ctx = this.ctx;\n        ctx.setTransform(...(0, display_utils.getCurrentTransform)(this.suspendedCtx));\n        copyCtxState(this.suspendedCtx, ctx);\n        mirrorContextOperations(ctx, this.suspendedCtx);\n        this.setGState([[\"BM\", \"source-over\"], [\"ca\", 1], [\"CA\", 1]]);\n      }\n      endSMaskMode() {\n        if (!this.inSMaskMode) {\n          throw new Error(\"endSMaskMode called while not in smask mode\");\n        }\n        this.ctx._removeMirroring();\n        copyCtxState(this.ctx, this.suspendedCtx);\n        this.ctx = this.suspendedCtx;\n        this.suspendedCtx = null;\n      }\n      compose(dirtyBox) {\n        if (!this.current.activeSMask) {\n          return;\n        }\n        if (!dirtyBox) {\n          dirtyBox = [0, 0, this.ctx.canvas.width, this.ctx.canvas.height];\n        } else {\n          dirtyBox[0] = Math.floor(dirtyBox[0]);\n          dirtyBox[1] = Math.floor(dirtyBox[1]);\n          dirtyBox[2] = Math.ceil(dirtyBox[2]);\n          dirtyBox[3] = Math.ceil(dirtyBox[3]);\n        }\n        const smask = this.current.activeSMask;\n        const suspendedCtx = this.suspendedCtx;\n        composeSMask(suspendedCtx, smask, this.ctx, dirtyBox);\n        this.ctx.save();\n        this.ctx.setTransform(1, 0, 0, 1, 0, 0);\n        this.ctx.clearRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\n        this.ctx.restore();\n      }\n      save() {\n        if (this.inSMaskMode) {\n          copyCtxState(this.ctx, this.suspendedCtx);\n          this.suspendedCtx.save();\n        } else {\n          this.ctx.save();\n        }\n        const old = this.current;\n        this.stateStack.push(old);\n        this.current = old.clone();\n      }\n      restore() {\n        if (this.stateStack.length === 0 && this.inSMaskMode) {\n          this.endSMaskMode();\n        }\n        if (this.stateStack.length !== 0) {\n          this.current = this.stateStack.pop();\n          if (this.inSMaskMode) {\n            this.suspendedCtx.restore();\n            copyCtxState(this.suspendedCtx, this.ctx);\n          } else {\n            this.ctx.restore();\n          }\n          this.checkSMaskState();\n          this.pendingClip = null;\n          this._cachedScaleForStroking[0] = -1;\n          this._cachedGetSinglePixelWidth = null;\n        }\n      }\n      transform(a, b, c, d, e, f) {\n        this.ctx.transform(a, b, c, d, e, f);\n        this._cachedScaleForStroking[0] = -1;\n        this._cachedGetSinglePixelWidth = null;\n      }\n      constructPath(ops, args, minMax) {\n        const ctx = this.ctx;\n        const current = this.current;\n        let x = current.x,\n          y = current.y;\n        let startX, startY;\n        const currentTransform = (0, display_utils.getCurrentTransform)(ctx);\n        const isScalingMatrix = currentTransform[0] === 0 && currentTransform[3] === 0 || currentTransform[1] === 0 && currentTransform[2] === 0;\n        const minMaxForBezier = isScalingMatrix ? minMax.slice(0) : null;\n        for (let i = 0, j = 0, ii = ops.length; i < ii; i++) {\n          switch (ops[i] | 0) {\n            case util.OPS.rectangle:\n              x = args[j++];\n              y = args[j++];\n              const width = args[j++];\n              const height = args[j++];\n              const xw = x + width;\n              const yh = y + height;\n              ctx.moveTo(x, y);\n              if (width === 0 || height === 0) {\n                ctx.lineTo(xw, yh);\n              } else {\n                ctx.lineTo(xw, y);\n                ctx.lineTo(xw, yh);\n                ctx.lineTo(x, yh);\n              }\n              if (!isScalingMatrix) {\n                current.updateRectMinMax(currentTransform, [x, y, xw, yh]);\n              }\n              ctx.closePath();\n              break;\n            case util.OPS.moveTo:\n              x = args[j++];\n              y = args[j++];\n              ctx.moveTo(x, y);\n              if (!isScalingMatrix) {\n                current.updatePathMinMax(currentTransform, x, y);\n              }\n              break;\n            case util.OPS.lineTo:\n              x = args[j++];\n              y = args[j++];\n              ctx.lineTo(x, y);\n              if (!isScalingMatrix) {\n                current.updatePathMinMax(currentTransform, x, y);\n              }\n              break;\n            case util.OPS.curveTo:\n              startX = x;\n              startY = y;\n              x = args[j + 4];\n              y = args[j + 5];\n              ctx.bezierCurveTo(args[j], args[j + 1], args[j + 2], args[j + 3], x, y);\n              current.updateCurvePathMinMax(currentTransform, startX, startY, args[j], args[j + 1], args[j + 2], args[j + 3], x, y, minMaxForBezier);\n              j += 6;\n              break;\n            case util.OPS.curveTo2:\n              startX = x;\n              startY = y;\n              ctx.bezierCurveTo(x, y, args[j], args[j + 1], args[j + 2], args[j + 3]);\n              current.updateCurvePathMinMax(currentTransform, startX, startY, x, y, args[j], args[j + 1], args[j + 2], args[j + 3], minMaxForBezier);\n              x = args[j + 2];\n              y = args[j + 3];\n              j += 4;\n              break;\n            case util.OPS.curveTo3:\n              startX = x;\n              startY = y;\n              x = args[j + 2];\n              y = args[j + 3];\n              ctx.bezierCurveTo(args[j], args[j + 1], x, y, x, y);\n              current.updateCurvePathMinMax(currentTransform, startX, startY, args[j], args[j + 1], x, y, x, y, minMaxForBezier);\n              j += 4;\n              break;\n            case util.OPS.closePath:\n              ctx.closePath();\n              break;\n          }\n        }\n        if (isScalingMatrix) {\n          current.updateScalingPathMinMax(currentTransform, minMaxForBezier);\n        }\n        current.setCurrentPoint(x, y);\n      }\n      closePath() {\n        this.ctx.closePath();\n      }\n      stroke() {\n        let consumePath = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n        const ctx = this.ctx;\n        const strokeColor = this.current.strokeColor;\n        ctx.globalAlpha = this.current.strokeAlpha;\n        if (this.contentVisible) {\n          if (typeof strokeColor === \"object\" && strokeColor !== null && strokeColor !== void 0 && strokeColor.getPattern) {\n            ctx.save();\n            ctx.strokeStyle = strokeColor.getPattern(ctx, this, (0, display_utils.getCurrentTransformInverse)(ctx), PathType.STROKE);\n            this.rescaleAndStroke(false);\n            ctx.restore();\n          } else {\n            this.rescaleAndStroke(true);\n          }\n        }\n        if (consumePath) {\n          this.consumePath(this.current.getClippedPathBoundingBox());\n        }\n        ctx.globalAlpha = this.current.fillAlpha;\n      }\n      closeStroke() {\n        this.closePath();\n        this.stroke();\n      }\n      fill() {\n        let consumePath = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n        const ctx = this.ctx;\n        const fillColor = this.current.fillColor;\n        const isPatternFill = this.current.patternFill;\n        let needRestore = false;\n        if (isPatternFill) {\n          ctx.save();\n          ctx.fillStyle = fillColor.getPattern(ctx, this, (0, display_utils.getCurrentTransformInverse)(ctx), PathType.FILL);\n          needRestore = true;\n        }\n        const intersect = this.current.getClippedPathBoundingBox();\n        if (this.contentVisible && intersect !== null) {\n          if (this.pendingEOFill) {\n            ctx.fill(\"evenodd\");\n            this.pendingEOFill = false;\n          } else {\n            ctx.fill();\n          }\n        }\n        if (needRestore) {\n          ctx.restore();\n        }\n        if (consumePath) {\n          this.consumePath(intersect);\n        }\n      }\n      eoFill() {\n        this.pendingEOFill = true;\n        this.fill();\n      }\n      fillStroke() {\n        this.fill(false);\n        this.stroke(false);\n        this.consumePath();\n      }\n      eoFillStroke() {\n        this.pendingEOFill = true;\n        this.fillStroke();\n      }\n      closeFillStroke() {\n        this.closePath();\n        this.fillStroke();\n      }\n      closeEOFillStroke() {\n        this.pendingEOFill = true;\n        this.closePath();\n        this.fillStroke();\n      }\n      endPath() {\n        this.consumePath();\n      }\n      clip() {\n        this.pendingClip = NORMAL_CLIP;\n      }\n      eoClip() {\n        this.pendingClip = EO_CLIP;\n      }\n      beginText() {\n        this.current.textMatrix = util.IDENTITY_MATRIX;\n        this.current.textMatrixScale = 1;\n        this.current.x = this.current.lineX = 0;\n        this.current.y = this.current.lineY = 0;\n      }\n      endText() {\n        const paths = this.pendingTextPaths;\n        const ctx = this.ctx;\n        if (paths === undefined) {\n          ctx.beginPath();\n          return;\n        }\n        ctx.save();\n        ctx.beginPath();\n        for (const path of paths) {\n          ctx.setTransform(...path.transform);\n          ctx.translate(path.x, path.y);\n          path.addToPath(ctx, path.fontSize);\n        }\n        ctx.restore();\n        ctx.clip();\n        ctx.beginPath();\n        delete this.pendingTextPaths;\n      }\n      setCharSpacing(spacing) {\n        this.current.charSpacing = spacing;\n      }\n      setWordSpacing(spacing) {\n        this.current.wordSpacing = spacing;\n      }\n      setHScale(scale) {\n        this.current.textHScale = scale / 100;\n      }\n      setLeading(leading) {\n        this.current.leading = -leading;\n      }\n      setFont(fontRefName, size) {\n        var _fontObj$systemFontIn;\n        const fontObj = this.commonObjs.get(fontRefName);\n        const current = this.current;\n        if (!fontObj) {\n          throw new Error(\"Can't find font for \".concat(fontRefName));\n        }\n        current.fontMatrix = fontObj.fontMatrix || util.FONT_IDENTITY_MATRIX;\n        if (current.fontMatrix[0] === 0 || current.fontMatrix[3] === 0) {\n          (0, util.warn)(\"Invalid font matrix for font \" + fontRefName);\n        }\n        if (size < 0) {\n          size = -size;\n          current.fontDirection = -1;\n        } else {\n          current.fontDirection = 1;\n        }\n        this.current.font = fontObj;\n        this.current.fontSize = size;\n        if (fontObj.isType3Font) {\n          return;\n        }\n        const name = fontObj.loadedName || \"sans-serif\";\n        const typeface = ((_fontObj$systemFontIn = fontObj.systemFontInfo) === null || _fontObj$systemFontIn === void 0 ? void 0 : _fontObj$systemFontIn.css) || \"\\\"\".concat(name, \"\\\", \").concat(fontObj.fallbackName);\n        let bold = \"normal\";\n        if (fontObj.black) {\n          bold = \"900\";\n        } else if (fontObj.bold) {\n          bold = \"bold\";\n        }\n        const italic = fontObj.italic ? \"italic\" : \"normal\";\n        let browserFontSize = size;\n        if (size < MIN_FONT_SIZE) {\n          browserFontSize = MIN_FONT_SIZE;\n        } else if (size > MAX_FONT_SIZE) {\n          browserFontSize = MAX_FONT_SIZE;\n        }\n        this.current.fontSizeScale = size / browserFontSize;\n        this.ctx.font = \"\".concat(italic, \" \").concat(bold, \" \").concat(browserFontSize, \"px \").concat(typeface);\n      }\n      setTextRenderingMode(mode) {\n        this.current.textRenderingMode = mode;\n      }\n      setTextRise(rise) {\n        this.current.textRise = rise;\n      }\n      moveText(x, y) {\n        this.current.x = this.current.lineX += x;\n        this.current.y = this.current.lineY += y;\n      }\n      setLeadingMoveText(x, y) {\n        this.setLeading(-y);\n        this.moveText(x, y);\n      }\n      setTextMatrix(a, b, c, d, e, f) {\n        this.current.textMatrix = [a, b, c, d, e, f];\n        this.current.textMatrixScale = Math.hypot(a, b);\n        this.current.x = this.current.lineX = 0;\n        this.current.y = this.current.lineY = 0;\n      }\n      nextLine() {\n        this.moveText(0, this.current.leading);\n      }\n      paintChar(character, x, y, patternTransform) {\n        const ctx = this.ctx;\n        const current = this.current;\n        const font = current.font;\n        const textRenderingMode = current.textRenderingMode;\n        const fontSize = current.fontSize / current.fontSizeScale;\n        const fillStrokeMode = textRenderingMode & util.TextRenderingMode.FILL_STROKE_MASK;\n        const isAddToPathSet = !!(textRenderingMode & util.TextRenderingMode.ADD_TO_PATH_FLAG);\n        const patternFill = current.patternFill && !font.missingFile;\n        let addToPath;\n        if (font.disableFontFace || isAddToPathSet || patternFill) {\n          addToPath = font.getPathGenerator(this.commonObjs, character);\n        }\n        if (font.disableFontFace || patternFill) {\n          ctx.save();\n          ctx.translate(x, y);\n          ctx.beginPath();\n          addToPath(ctx, fontSize);\n          if (patternTransform) {\n            ctx.setTransform(...patternTransform);\n          }\n          if (fillStrokeMode === util.TextRenderingMode.FILL || fillStrokeMode === util.TextRenderingMode.FILL_STROKE) {\n            ctx.fill();\n          }\n          if (fillStrokeMode === util.TextRenderingMode.STROKE || fillStrokeMode === util.TextRenderingMode.FILL_STROKE) {\n            ctx.stroke();\n          }\n          ctx.restore();\n        } else {\n          if (fillStrokeMode === util.TextRenderingMode.FILL || fillStrokeMode === util.TextRenderingMode.FILL_STROKE) {\n            ctx.fillText(character, x, y);\n          }\n          if (fillStrokeMode === util.TextRenderingMode.STROKE || fillStrokeMode === util.TextRenderingMode.FILL_STROKE) {\n            ctx.strokeText(character, x, y);\n          }\n        }\n        if (isAddToPathSet) {\n          const paths = this.pendingTextPaths || (this.pendingTextPaths = []);\n          paths.push({\n            transform: (0, display_utils.getCurrentTransform)(ctx),\n            x,\n            y,\n            fontSize,\n            addToPath\n          });\n        }\n      }\n      get isFontSubpixelAAEnabled() {\n        const {\n          context: ctx\n        } = this.cachedCanvases.getCanvas(\"isFontSubpixelAAEnabled\", 10, 10);\n        ctx.scale(1.5, 1);\n        ctx.fillText(\"I\", 0, 10);\n        const data = ctx.getImageData(0, 0, 10, 10).data;\n        let enabled = false;\n        for (let i = 3; i < data.length; i += 4) {\n          if (data[i] > 0 && data[i] < 255) {\n            enabled = true;\n            break;\n          }\n        }\n        return (0, util.shadow)(this, \"isFontSubpixelAAEnabled\", enabled);\n      }\n      showText(glyphs) {\n        const current = this.current;\n        const font = current.font;\n        if (font.isType3Font) {\n          return this.showType3Text(glyphs);\n        }\n        const fontSize = current.fontSize;\n        if (fontSize === 0) {\n          return undefined;\n        }\n        const ctx = this.ctx;\n        const fontSizeScale = current.fontSizeScale;\n        const charSpacing = current.charSpacing;\n        const wordSpacing = current.wordSpacing;\n        const fontDirection = current.fontDirection;\n        const textHScale = current.textHScale * fontDirection;\n        const glyphsLength = glyphs.length;\n        const vertical = font.vertical;\n        const spacingDir = vertical ? 1 : -1;\n        const defaultVMetrics = font.defaultVMetrics;\n        const widthAdvanceScale = fontSize * current.fontMatrix[0];\n        const simpleFillText = current.textRenderingMode === util.TextRenderingMode.FILL && !font.disableFontFace && !current.patternFill;\n        ctx.save();\n        ctx.transform(...current.textMatrix);\n        ctx.translate(current.x, current.y + current.textRise);\n        if (fontDirection > 0) {\n          ctx.scale(textHScale, -1);\n        } else {\n          ctx.scale(textHScale, 1);\n        }\n        let patternTransform;\n        if (current.patternFill) {\n          ctx.save();\n          const pattern = current.fillColor.getPattern(ctx, this, (0, display_utils.getCurrentTransformInverse)(ctx), PathType.FILL);\n          patternTransform = (0, display_utils.getCurrentTransform)(ctx);\n          ctx.restore();\n          ctx.fillStyle = pattern;\n        }\n        let lineWidth = current.lineWidth;\n        const scale = current.textMatrixScale;\n        if (scale === 0 || lineWidth === 0) {\n          const fillStrokeMode = current.textRenderingMode & util.TextRenderingMode.FILL_STROKE_MASK;\n          if (fillStrokeMode === util.TextRenderingMode.STROKE || fillStrokeMode === util.TextRenderingMode.FILL_STROKE) {\n            lineWidth = this.getSinglePixelWidth();\n          }\n        } else {\n          lineWidth /= scale;\n        }\n        if (fontSizeScale !== 1.0) {\n          ctx.scale(fontSizeScale, fontSizeScale);\n          lineWidth /= fontSizeScale;\n        }\n        ctx.lineWidth = lineWidth;\n        if (font.isInvalidPDFjsFont) {\n          const chars = [];\n          let width = 0;\n          for (const glyph of glyphs) {\n            chars.push(glyph.unicode);\n            width += glyph.width;\n          }\n          ctx.fillText(chars.join(\"\"), 0, 0);\n          current.x += width * widthAdvanceScale * textHScale;\n          ctx.restore();\n          this.compose();\n          return undefined;\n        }\n        let x = 0,\n          i;\n        for (i = 0; i < glyphsLength; ++i) {\n          const glyph = glyphs[i];\n          if (typeof glyph === \"number\") {\n            x += spacingDir * glyph * fontSize / 1000;\n            continue;\n          }\n          let restoreNeeded = false;\n          const spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n          const character = glyph.fontChar;\n          const accent = glyph.accent;\n          let scaledX, scaledY;\n          let width = glyph.width;\n          if (vertical) {\n            const vmetric = glyph.vmetric || defaultVMetrics;\n            const vx = -(glyph.vmetric ? vmetric[1] : width * 0.5) * widthAdvanceScale;\n            const vy = vmetric[2] * widthAdvanceScale;\n            width = vmetric ? -vmetric[0] : width;\n            scaledX = vx / fontSizeScale;\n            scaledY = (x + vy) / fontSizeScale;\n          } else {\n            scaledX = x / fontSizeScale;\n            scaledY = 0;\n          }\n          if (font.remeasure && width > 0) {\n            const measuredWidth = ctx.measureText(character).width * 1000 / fontSize * fontSizeScale;\n            if (width < measuredWidth && this.isFontSubpixelAAEnabled) {\n              const characterScaleX = width / measuredWidth;\n              restoreNeeded = true;\n              ctx.save();\n              ctx.scale(characterScaleX, 1);\n              scaledX /= characterScaleX;\n            } else if (width !== measuredWidth) {\n              scaledX += (width - measuredWidth) / 2000 * fontSize / fontSizeScale;\n            }\n          }\n          if (this.contentVisible && (glyph.isInFont || font.missingFile)) {\n            if (simpleFillText && !accent) {\n              ctx.fillText(character, scaledX, scaledY);\n            } else {\n              this.paintChar(character, scaledX, scaledY, patternTransform);\n              if (accent) {\n                const scaledAccentX = scaledX + fontSize * accent.offset.x / fontSizeScale;\n                const scaledAccentY = scaledY - fontSize * accent.offset.y / fontSizeScale;\n                this.paintChar(accent.fontChar, scaledAccentX, scaledAccentY, patternTransform);\n              }\n            }\n          }\n          const charWidth = vertical ? width * widthAdvanceScale - spacing * fontDirection : width * widthAdvanceScale + spacing * fontDirection;\n          x += charWidth;\n          if (restoreNeeded) {\n            ctx.restore();\n          }\n        }\n        if (vertical) {\n          current.y -= x;\n        } else {\n          current.x += x * textHScale;\n        }\n        ctx.restore();\n        this.compose();\n        return undefined;\n      }\n      showType3Text(glyphs) {\n        const ctx = this.ctx;\n        const current = this.current;\n        const font = current.font;\n        const fontSize = current.fontSize;\n        const fontDirection = current.fontDirection;\n        const spacingDir = font.vertical ? 1 : -1;\n        const charSpacing = current.charSpacing;\n        const wordSpacing = current.wordSpacing;\n        const textHScale = current.textHScale * fontDirection;\n        const fontMatrix = current.fontMatrix || util.FONT_IDENTITY_MATRIX;\n        const glyphsLength = glyphs.length;\n        const isTextInvisible = current.textRenderingMode === util.TextRenderingMode.INVISIBLE;\n        let i, glyph, width, spacingLength;\n        if (isTextInvisible || fontSize === 0) {\n          return;\n        }\n        this._cachedScaleForStroking[0] = -1;\n        this._cachedGetSinglePixelWidth = null;\n        ctx.save();\n        ctx.transform(...current.textMatrix);\n        ctx.translate(current.x, current.y);\n        ctx.scale(textHScale, fontDirection);\n        for (i = 0; i < glyphsLength; ++i) {\n          glyph = glyphs[i];\n          if (typeof glyph === \"number\") {\n            spacingLength = spacingDir * glyph * fontSize / 1000;\n            this.ctx.translate(spacingLength, 0);\n            current.x += spacingLength * textHScale;\n            continue;\n          }\n          const spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n          const operatorList = font.charProcOperatorList[glyph.operatorListId];\n          if (!operatorList) {\n            (0, util.warn)(\"Type3 character \\\"\".concat(glyph.operatorListId, \"\\\" is not available.\"));\n            continue;\n          }\n          if (this.contentVisible) {\n            this.processingType3 = glyph;\n            this.save();\n            ctx.scale(fontSize, fontSize);\n            ctx.transform(...fontMatrix);\n            this.executeOperatorList(operatorList);\n            this.restore();\n          }\n          const transformed = util.Util.applyTransform([glyph.width, 0], fontMatrix);\n          width = transformed[0] * fontSize + spacing;\n          ctx.translate(width, 0);\n          current.x += width * textHScale;\n        }\n        ctx.restore();\n        this.processingType3 = null;\n      }\n      setCharWidth(xWidth, yWidth) {}\n      setCharWidthAndBounds(xWidth, yWidth, llx, lly, urx, ury) {\n        this.ctx.rect(llx, lly, urx - llx, ury - lly);\n        this.ctx.clip();\n        this.endPath();\n      }\n      getColorN_Pattern(IR) {\n        let pattern;\n        if (IR[0] === \"TilingPattern\") {\n          const color = IR[1];\n          const baseTransform = this.baseTransform || (0, display_utils.getCurrentTransform)(this.ctx);\n          const canvasGraphicsFactory = {\n            createCanvasGraphics: ctx => {\n              return new CanvasGraphics(ctx, this.commonObjs, this.objs, this.canvasFactory, this.filterFactory, {\n                optionalContentConfig: this.optionalContentConfig,\n                markedContentStack: this.markedContentStack\n              });\n            }\n          };\n          pattern = new TilingPattern(IR, color, this.ctx, canvasGraphicsFactory, baseTransform);\n        } else {\n          pattern = this._getPattern(IR[1], IR[2]);\n        }\n        return pattern;\n      }\n      setStrokeColorN() {\n        this.current.strokeColor = this.getColorN_Pattern(arguments);\n      }\n      setFillColorN() {\n        this.current.fillColor = this.getColorN_Pattern(arguments);\n        this.current.patternFill = true;\n      }\n      setStrokeRGBColor(r, g, b) {\n        const color = util.Util.makeHexColor(r, g, b);\n        this.ctx.strokeStyle = color;\n        this.current.strokeColor = color;\n      }\n      setFillRGBColor(r, g, b) {\n        const color = util.Util.makeHexColor(r, g, b);\n        this.ctx.fillStyle = color;\n        this.current.fillColor = color;\n        this.current.patternFill = false;\n      }\n      _getPattern(objId) {\n        let matrix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n        let pattern;\n        if (this.cachedPatterns.has(objId)) {\n          pattern = this.cachedPatterns.get(objId);\n        } else {\n          pattern = getShadingPattern(this.getObject(objId));\n          this.cachedPatterns.set(objId, pattern);\n        }\n        if (matrix) {\n          pattern.matrix = matrix;\n        }\n        return pattern;\n      }\n      shadingFill(objId) {\n        if (!this.contentVisible) {\n          return;\n        }\n        const ctx = this.ctx;\n        this.save();\n        const pattern = this._getPattern(objId);\n        ctx.fillStyle = pattern.getPattern(ctx, this, (0, display_utils.getCurrentTransformInverse)(ctx), PathType.SHADING);\n        const inv = (0, display_utils.getCurrentTransformInverse)(ctx);\n        if (inv) {\n          const {\n            width,\n            height\n          } = ctx.canvas;\n          const [x0, y0, x1, y1] = util.Util.getAxialAlignedBoundingBox([0, 0, width, height], inv);\n          this.ctx.fillRect(x0, y0, x1 - x0, y1 - y0);\n        } else {\n          this.ctx.fillRect(-1e10, -1e10, 2e10, 2e10);\n        }\n        this.compose(this.current.getClippedPathBoundingBox());\n        this.restore();\n      }\n      beginInlineImage() {\n        (0, util.unreachable)(\"Should not call beginInlineImage\");\n      }\n      beginImageData() {\n        (0, util.unreachable)(\"Should not call beginImageData\");\n      }\n      paintFormXObjectBegin(matrix, bbox) {\n        if (!this.contentVisible) {\n          return;\n        }\n        this.save();\n        this.baseTransformStack.push(this.baseTransform);\n        if (Array.isArray(matrix) && matrix.length === 6) {\n          this.transform(...matrix);\n        }\n        this.baseTransform = (0, display_utils.getCurrentTransform)(this.ctx);\n        if (bbox) {\n          const width = bbox[2] - bbox[0];\n          const height = bbox[3] - bbox[1];\n          this.ctx.rect(bbox[0], bbox[1], width, height);\n          this.current.updateRectMinMax((0, display_utils.getCurrentTransform)(this.ctx), bbox);\n          this.clip();\n          this.endPath();\n        }\n      }\n      paintFormXObjectEnd() {\n        if (!this.contentVisible) {\n          return;\n        }\n        this.restore();\n        this.baseTransform = this.baseTransformStack.pop();\n      }\n      beginGroup(group) {\n        if (!this.contentVisible) {\n          return;\n        }\n        this.save();\n        if (this.inSMaskMode) {\n          this.endSMaskMode();\n          this.current.activeSMask = null;\n        }\n        const currentCtx = this.ctx;\n        if (!group.isolated) {\n          (0, util.info)(\"TODO: Support non-isolated groups.\");\n        }\n        if (group.knockout) {\n          (0, util.warn)(\"Knockout groups not supported.\");\n        }\n        const currentTransform = (0, display_utils.getCurrentTransform)(currentCtx);\n        if (group.matrix) {\n          currentCtx.transform(...group.matrix);\n        }\n        if (!group.bbox) {\n          throw new Error(\"Bounding box is required.\");\n        }\n        let bounds = util.Util.getAxialAlignedBoundingBox(group.bbox, (0, display_utils.getCurrentTransform)(currentCtx));\n        const canvasBounds = [0, 0, currentCtx.canvas.width, currentCtx.canvas.height];\n        bounds = util.Util.intersect(bounds, canvasBounds) || [0, 0, 0, 0];\n        const offsetX = Math.floor(bounds[0]);\n        const offsetY = Math.floor(bounds[1]);\n        let drawnWidth = Math.max(Math.ceil(bounds[2]) - offsetX, 1);\n        let drawnHeight = Math.max(Math.ceil(bounds[3]) - offsetY, 1);\n        let scaleX = 1,\n          scaleY = 1;\n        if (drawnWidth > MAX_GROUP_SIZE) {\n          scaleX = drawnWidth / MAX_GROUP_SIZE;\n          drawnWidth = MAX_GROUP_SIZE;\n        }\n        if (drawnHeight > MAX_GROUP_SIZE) {\n          scaleY = drawnHeight / MAX_GROUP_SIZE;\n          drawnHeight = MAX_GROUP_SIZE;\n        }\n        this.current.startNewPathAndClipBox([0, 0, drawnWidth, drawnHeight]);\n        let cacheId = \"groupAt\" + this.groupLevel;\n        if (group.smask) {\n          cacheId += \"_smask_\" + this.smaskCounter++ % 2;\n        }\n        const scratchCanvas = this.cachedCanvases.getCanvas(cacheId, drawnWidth, drawnHeight);\n        const groupCtx = scratchCanvas.context;\n        groupCtx.scale(1 / scaleX, 1 / scaleY);\n        groupCtx.translate(-offsetX, -offsetY);\n        groupCtx.transform(...currentTransform);\n        if (group.smask) {\n          this.smaskStack.push({\n            canvas: scratchCanvas.canvas,\n            context: groupCtx,\n            offsetX,\n            offsetY,\n            scaleX,\n            scaleY,\n            subtype: group.smask.subtype,\n            backdrop: group.smask.backdrop,\n            transferMap: group.smask.transferMap || null,\n            startTransformInverse: null\n          });\n        } else {\n          currentCtx.setTransform(1, 0, 0, 1, 0, 0);\n          currentCtx.translate(offsetX, offsetY);\n          currentCtx.scale(scaleX, scaleY);\n          currentCtx.save();\n        }\n        copyCtxState(currentCtx, groupCtx);\n        this.ctx = groupCtx;\n        this.setGState([[\"BM\", \"source-over\"], [\"ca\", 1], [\"CA\", 1]]);\n        this.groupStack.push(currentCtx);\n        this.groupLevel++;\n      }\n      endGroup(group) {\n        if (!this.contentVisible) {\n          return;\n        }\n        this.groupLevel--;\n        const groupCtx = this.ctx;\n        const ctx = this.groupStack.pop();\n        this.ctx = ctx;\n        this.ctx.imageSmoothingEnabled = false;\n        if (group.smask) {\n          this.tempSMask = this.smaskStack.pop();\n          this.restore();\n        } else {\n          this.ctx.restore();\n          const currentMtx = (0, display_utils.getCurrentTransform)(this.ctx);\n          this.restore();\n          this.ctx.save();\n          this.ctx.setTransform(...currentMtx);\n          const dirtyBox = util.Util.getAxialAlignedBoundingBox([0, 0, groupCtx.canvas.width, groupCtx.canvas.height], currentMtx);\n          this.ctx.drawImage(groupCtx.canvas, 0, 0);\n          this.ctx.restore();\n          this.compose(dirtyBox);\n        }\n      }\n      beginAnnotation(id, rect, transform, matrix, hasOwnCanvas) {\n        _classPrivateMethodGet(this, _restoreInitialState, _restoreInitialState2).call(this);\n        resetCtxToDefault(this.ctx);\n        this.ctx.save();\n        this.save();\n        if (this.baseTransform) {\n          this.ctx.setTransform(...this.baseTransform);\n        }\n        if (Array.isArray(rect) && rect.length === 4) {\n          const width = rect[2] - rect[0];\n          const height = rect[3] - rect[1];\n          if (hasOwnCanvas && this.annotationCanvasMap) {\n            transform = transform.slice();\n            transform[4] -= rect[0];\n            transform[5] -= rect[1];\n            rect = rect.slice();\n            rect[0] = rect[1] = 0;\n            rect[2] = width;\n            rect[3] = height;\n            const [scaleX, scaleY] = util.Util.singularValueDecompose2dScale((0, display_utils.getCurrentTransform)(this.ctx));\n            const {\n              viewportScale\n            } = this;\n            const canvasWidth = Math.ceil(width * this.outputScaleX * viewportScale);\n            const canvasHeight = Math.ceil(height * this.outputScaleY * viewportScale);\n            this.annotationCanvas = this.canvasFactory.create(canvasWidth, canvasHeight);\n            const {\n              canvas,\n              context\n            } = this.annotationCanvas;\n            this.annotationCanvasMap.set(id, canvas);\n            this.annotationCanvas.savedCtx = this.ctx;\n            this.ctx = context;\n            this.ctx.save();\n            this.ctx.setTransform(scaleX, 0, 0, -scaleY, 0, height * scaleY);\n            resetCtxToDefault(this.ctx);\n          } else {\n            resetCtxToDefault(this.ctx);\n            this.ctx.rect(rect[0], rect[1], width, height);\n            this.ctx.clip();\n            this.endPath();\n          }\n        }\n        this.current = new CanvasExtraState(this.ctx.canvas.width, this.ctx.canvas.height);\n        this.transform(...transform);\n        this.transform(...matrix);\n      }\n      endAnnotation() {\n        if (this.annotationCanvas) {\n          this.ctx.restore();\n          _classPrivateMethodGet(this, _drawFilter, _drawFilter2).call(this);\n          this.ctx = this.annotationCanvas.savedCtx;\n          delete this.annotationCanvas.savedCtx;\n          delete this.annotationCanvas;\n        }\n      }\n      paintImageMaskXObject(img) {\n        if (!this.contentVisible) {\n          return;\n        }\n        const count = img.count;\n        img = this.getObject(img.data, img);\n        img.count = count;\n        const ctx = this.ctx;\n        const glyph = this.processingType3;\n        if (glyph) {\n          if (glyph.compiled === undefined) {\n            glyph.compiled = compileType3Glyph(img);\n          }\n          if (glyph.compiled) {\n            glyph.compiled(ctx);\n            return;\n          }\n        }\n        const mask = this._createMaskCanvas(img);\n        const maskCanvas = mask.canvas;\n        ctx.save();\n        ctx.setTransform(1, 0, 0, 1, 0, 0);\n        ctx.drawImage(maskCanvas, mask.offsetX, mask.offsetY);\n        ctx.restore();\n        this.compose();\n      }\n      paintImageMaskXObjectRepeat(img, scaleX) {\n        let skewX = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n        let skewY = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n        let scaleY = arguments.length > 4 ? arguments[4] : undefined;\n        let positions = arguments.length > 5 ? arguments[5] : undefined;\n        if (!this.contentVisible) {\n          return;\n        }\n        img = this.getObject(img.data, img);\n        const ctx = this.ctx;\n        ctx.save();\n        const currentTransform = (0, display_utils.getCurrentTransform)(ctx);\n        ctx.transform(scaleX, skewX, skewY, scaleY, 0, 0);\n        const mask = this._createMaskCanvas(img);\n        ctx.setTransform(1, 0, 0, 1, mask.offsetX - currentTransform[4], mask.offsetY - currentTransform[5]);\n        for (let i = 0, ii = positions.length; i < ii; i += 2) {\n          const trans = util.Util.transform(currentTransform, [scaleX, skewX, skewY, scaleY, positions[i], positions[i + 1]]);\n          const [x, y] = util.Util.applyTransform([0, 0], trans);\n          ctx.drawImage(mask.canvas, x, y);\n        }\n        ctx.restore();\n        this.compose();\n      }\n      paintImageMaskXObjectGroup(images) {\n        if (!this.contentVisible) {\n          return;\n        }\n        const ctx = this.ctx;\n        const fillColor = this.current.fillColor;\n        const isPatternFill = this.current.patternFill;\n        for (const image of images) {\n          const {\n            data,\n            width,\n            height,\n            transform\n          } = image;\n          const maskCanvas = this.cachedCanvases.getCanvas(\"maskCanvas\", width, height);\n          const maskCtx = maskCanvas.context;\n          maskCtx.save();\n          const img = this.getObject(data, image);\n          putBinaryImageMask(maskCtx, img);\n          maskCtx.globalCompositeOperation = \"source-in\";\n          maskCtx.fillStyle = isPatternFill ? fillColor.getPattern(maskCtx, this, (0, display_utils.getCurrentTransformInverse)(ctx), PathType.FILL) : fillColor;\n          maskCtx.fillRect(0, 0, width, height);\n          maskCtx.restore();\n          ctx.save();\n          ctx.transform(...transform);\n          ctx.scale(1, -1);\n          drawImageAtIntegerCoords(ctx, maskCanvas.canvas, 0, 0, width, height, 0, -1, 1, 1);\n          ctx.restore();\n        }\n        this.compose();\n      }\n      paintImageXObject(objId) {\n        if (!this.contentVisible) {\n          return;\n        }\n        const imgData = this.getObject(objId);\n        if (!imgData) {\n          (0, util.warn)(\"Dependent image isn't ready yet\");\n          return;\n        }\n        this.paintInlineImageXObject(imgData);\n      }\n      paintImageXObjectRepeat(objId, scaleX, scaleY, positions) {\n        if (!this.contentVisible) {\n          return;\n        }\n        const imgData = this.getObject(objId);\n        if (!imgData) {\n          (0, util.warn)(\"Dependent image isn't ready yet\");\n          return;\n        }\n        const width = imgData.width;\n        const height = imgData.height;\n        const map = [];\n        for (let i = 0, ii = positions.length; i < ii; i += 2) {\n          map.push({\n            transform: [scaleX, 0, 0, scaleY, positions[i], positions[i + 1]],\n            x: 0,\n            y: 0,\n            w: width,\n            h: height\n          });\n        }\n        this.paintInlineImageXObjectGroup(imgData, map);\n      }\n      applyTransferMapsToCanvas(ctx) {\n        if (this.current.transferMaps !== \"none\") {\n          ctx.filter = this.current.transferMaps;\n          ctx.drawImage(ctx.canvas, 0, 0);\n          ctx.filter = \"none\";\n        }\n        return ctx.canvas;\n      }\n      applyTransferMapsToBitmap(imgData) {\n        if (this.current.transferMaps === \"none\") {\n          return imgData.bitmap;\n        }\n        const {\n          bitmap,\n          width,\n          height\n        } = imgData;\n        const tmpCanvas = this.cachedCanvases.getCanvas(\"inlineImage\", width, height);\n        const tmpCtx = tmpCanvas.context;\n        tmpCtx.filter = this.current.transferMaps;\n        tmpCtx.drawImage(bitmap, 0, 0);\n        tmpCtx.filter = \"none\";\n        return tmpCanvas.canvas;\n      }\n      paintInlineImageXObject(imgData) {\n        if (!this.contentVisible) {\n          return;\n        }\n        const width = imgData.width;\n        const height = imgData.height;\n        const ctx = this.ctx;\n        this.save();\n        if (!util.isNodeJS) {\n          const {\n            filter\n          } = ctx;\n          if (filter !== \"none\" && filter !== \"\") {\n            ctx.filter = \"none\";\n          }\n        }\n        ctx.scale(1 / width, -1 / height);\n        let imgToPaint;\n        if (imgData.bitmap) {\n          imgToPaint = this.applyTransferMapsToBitmap(imgData);\n        } else if (typeof HTMLElement === \"function\" && imgData instanceof HTMLElement || !imgData.data) {\n          imgToPaint = imgData;\n        } else {\n          const tmpCanvas = this.cachedCanvases.getCanvas(\"inlineImage\", width, height);\n          const tmpCtx = tmpCanvas.context;\n          putBinaryImageData(tmpCtx, imgData);\n          imgToPaint = this.applyTransferMapsToCanvas(tmpCtx);\n        }\n        const scaled = this._scaleImage(imgToPaint, (0, display_utils.getCurrentTransformInverse)(ctx));\n        ctx.imageSmoothingEnabled = getImageSmoothingEnabled((0, display_utils.getCurrentTransform)(ctx), imgData.interpolate);\n        drawImageAtIntegerCoords(ctx, scaled.img, 0, 0, scaled.paintWidth, scaled.paintHeight, 0, -height, width, height);\n        this.compose();\n        this.restore();\n      }\n      paintInlineImageXObjectGroup(imgData, map) {\n        if (!this.contentVisible) {\n          return;\n        }\n        const ctx = this.ctx;\n        let imgToPaint;\n        if (imgData.bitmap) {\n          imgToPaint = imgData.bitmap;\n        } else {\n          const w = imgData.width;\n          const h = imgData.height;\n          const tmpCanvas = this.cachedCanvases.getCanvas(\"inlineImage\", w, h);\n          const tmpCtx = tmpCanvas.context;\n          putBinaryImageData(tmpCtx, imgData);\n          imgToPaint = this.applyTransferMapsToCanvas(tmpCtx);\n        }\n        for (const entry of map) {\n          ctx.save();\n          ctx.transform(...entry.transform);\n          ctx.scale(1, -1);\n          drawImageAtIntegerCoords(ctx, imgToPaint, entry.x, entry.y, entry.w, entry.h, 0, -1, 1, 1);\n          ctx.restore();\n        }\n        this.compose();\n      }\n      paintSolidColorImageMask() {\n        if (!this.contentVisible) {\n          return;\n        }\n        this.ctx.fillRect(0, 0, 1, 1);\n        this.compose();\n      }\n      markPoint(tag) {}\n      markPointProps(tag, properties) {}\n      beginMarkedContent(tag) {\n        this.markedContentStack.push({\n          visible: true\n        });\n      }\n      beginMarkedContentProps(tag, properties) {\n        if (tag === \"OC\") {\n          this.markedContentStack.push({\n            visible: this.optionalContentConfig.isVisible(properties)\n          });\n        } else {\n          this.markedContentStack.push({\n            visible: true\n          });\n        }\n        this.contentVisible = this.isContentVisible();\n      }\n      endMarkedContent() {\n        this.markedContentStack.pop();\n        this.contentVisible = this.isContentVisible();\n      }\n      beginCompat() {}\n      endCompat() {}\n      consumePath(clipBox) {\n        const isEmpty = this.current.isEmptyClip();\n        if (this.pendingClip) {\n          this.current.updateClipFromPath();\n        }\n        if (!this.pendingClip) {\n          this.compose(clipBox);\n        }\n        const ctx = this.ctx;\n        if (this.pendingClip) {\n          if (!isEmpty) {\n            if (this.pendingClip === EO_CLIP) {\n              ctx.clip(\"evenodd\");\n            } else {\n              ctx.clip();\n            }\n          }\n          this.pendingClip = null;\n        }\n        this.current.startNewPathAndClipBox(this.current.clipBox);\n        ctx.beginPath();\n      }\n      getSinglePixelWidth() {\n        if (!this._cachedGetSinglePixelWidth) {\n          const m = (0, display_utils.getCurrentTransform)(this.ctx);\n          if (m[1] === 0 && m[2] === 0) {\n            this._cachedGetSinglePixelWidth = 1 / Math.min(Math.abs(m[0]), Math.abs(m[3]));\n          } else {\n            const absDet = Math.abs(m[0] * m[3] - m[2] * m[1]);\n            const normX = Math.hypot(m[0], m[2]);\n            const normY = Math.hypot(m[1], m[3]);\n            this._cachedGetSinglePixelWidth = Math.max(normX, normY) / absDet;\n          }\n        }\n        return this._cachedGetSinglePixelWidth;\n      }\n      getScaleForStroking() {\n        if (this._cachedScaleForStroking[0] === -1) {\n          const {\n            lineWidth\n          } = this.current;\n          const {\n            a,\n            b,\n            c,\n            d\n          } = this.ctx.getTransform();\n          let scaleX, scaleY;\n          if (b === 0 && c === 0) {\n            const normX = Math.abs(a);\n            const normY = Math.abs(d);\n            if (normX === normY) {\n              if (lineWidth === 0) {\n                scaleX = scaleY = 1 / normX;\n              } else {\n                const scaledLineWidth = normX * lineWidth;\n                scaleX = scaleY = scaledLineWidth < 1 ? 1 / scaledLineWidth : 1;\n              }\n            } else if (lineWidth === 0) {\n              scaleX = 1 / normX;\n              scaleY = 1 / normY;\n            } else {\n              const scaledXLineWidth = normX * lineWidth;\n              const scaledYLineWidth = normY * lineWidth;\n              scaleX = scaledXLineWidth < 1 ? 1 / scaledXLineWidth : 1;\n              scaleY = scaledYLineWidth < 1 ? 1 / scaledYLineWidth : 1;\n            }\n          } else {\n            const absDet = Math.abs(a * d - b * c);\n            const normX = Math.hypot(a, b);\n            const normY = Math.hypot(c, d);\n            if (lineWidth === 0) {\n              scaleX = normY / absDet;\n              scaleY = normX / absDet;\n            } else {\n              const baseArea = lineWidth * absDet;\n              scaleX = normY > baseArea ? normY / baseArea : 1;\n              scaleY = normX > baseArea ? normX / baseArea : 1;\n            }\n          }\n          this._cachedScaleForStroking[0] = scaleX;\n          this._cachedScaleForStroking[1] = scaleY;\n        }\n        return this._cachedScaleForStroking;\n      }\n      rescaleAndStroke(saveRestore) {\n        const {\n          ctx\n        } = this;\n        const {\n          lineWidth\n        } = this.current;\n        const [scaleX, scaleY] = this.getScaleForStroking();\n        ctx.lineWidth = lineWidth || 1;\n        if (scaleX === 1 && scaleY === 1) {\n          ctx.stroke();\n          return;\n        }\n        const dashes = ctx.getLineDash();\n        if (saveRestore) {\n          ctx.save();\n        }\n        ctx.scale(scaleX, scaleY);\n        if (dashes.length > 0) {\n          const scale = Math.max(scaleX, scaleY);\n          ctx.setLineDash(dashes.map(x => x / scale));\n          ctx.lineDashOffset /= scale;\n        }\n        ctx.stroke();\n        if (saveRestore) {\n          ctx.restore();\n        }\n      }\n      isContentVisible() {\n        for (let i = this.markedContentStack.length - 1; i >= 0; i--) {\n          if (!this.markedContentStack[i].visible) {\n            return false;\n          }\n        }\n        return true;\n      }\n    }\n    function _restoreInitialState2() {\n      while (this.stateStack.length || this.inSMaskMode) {\n        this.restore();\n      }\n      this.ctx.restore();\n      if (this.transparentCanvas) {\n        this.ctx = this.compositeCtx;\n        this.ctx.save();\n        this.ctx.setTransform(1, 0, 0, 1, 0, 0);\n        this.ctx.drawImage(this.transparentCanvas, 0, 0);\n        this.ctx.restore();\n        this.transparentCanvas = null;\n      }\n    }\n    function _drawFilter2() {\n      if (this.pageColors) {\n        const hcmFilterId = this.filterFactory.addHCMFilter(this.pageColors.foreground, this.pageColors.background);\n        if (hcmFilterId !== \"none\") {\n          const savedFilter = this.ctx.filter;\n          this.ctx.filter = hcmFilterId;\n          this.ctx.drawImage(this.ctx.canvas, 0, 0);\n          this.ctx.filter = savedFilter;\n        }\n      }\n    }\n    for (const op in util.OPS) {\n      if (CanvasGraphics.prototype[op] !== undefined) {\n        CanvasGraphics.prototype[util.OPS[op]] = CanvasGraphics.prototype[op];\n      }\n    }\n\n    /***/\n  }),\n  /***/473: ( /***/(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {\n    var _PixelsPerInch;\n    /* harmony export */__webpack_require__.d(__webpack_exports__, {\n      /* harmony export */DOMCMapReaderFactory: () => ( /* binding */DOMCMapReaderFactory),\n      /* harmony export */DOMCanvasFactory: () => ( /* binding */DOMCanvasFactory),\n      /* harmony export */DOMFilterFactory: () => ( /* binding */DOMFilterFactory),\n      /* harmony export */DOMSVGFactory: () => ( /* binding */DOMSVGFactory),\n      /* harmony export */DOMStandardFontDataFactory: () => ( /* binding */DOMStandardFontDataFactory),\n      /* harmony export */PDFDateString: () => ( /* binding */PDFDateString),\n      /* harmony export */PageViewport: () => ( /* binding */PageViewport),\n      /* harmony export */PixelsPerInch: () => ( /* binding */PixelsPerInch),\n      /* harmony export */RenderingCancelledException: () => ( /* binding */RenderingCancelledException),\n      /* harmony export */StatTimer: () => ( /* binding */StatTimer),\n      /* harmony export */fetchData: () => ( /* binding */fetchData),\n      /* harmony export */getColorValues: () => ( /* binding */getColorValues),\n      /* harmony export */getCurrentTransform: () => ( /* binding */getCurrentTransform),\n      /* harmony export */getCurrentTransformInverse: () => ( /* binding */getCurrentTransformInverse),\n      /* harmony export */getFilenameFromUrl: () => ( /* binding */getFilenameFromUrl),\n      /* harmony export */getPdfFilenameFromUrl: () => ( /* binding */getPdfFilenameFromUrl),\n      /* harmony export */getRGB: () => ( /* binding */getRGB),\n      /* harmony export */getXfaPageViewport: () => ( /* binding */getXfaPageViewport),\n      /* harmony export */isDataScheme: () => ( /* binding */isDataScheme),\n      /* harmony export */isPdfFile: () => ( /* binding */isPdfFile),\n      /* harmony export */isValidFetchUrl: () => ( /* binding */isValidFetchUrl),\n      /* harmony export */noContextMenu: () => ( /* binding */noContextMenu),\n      /* harmony export */setLayerDimensions: () => ( /* binding */setLayerDimensions)\n      /* harmony export */\n    });\n    /* unused harmony export deprecated */\n    /* harmony import */\n    var _base_factory_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(822);\n    /* harmony import */\n    var _shared_util_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(266);\n    const SVG_NS = \"http://www.w3.org/2000/svg\";\n    class PixelsPerInch {}\n    _PixelsPerInch = PixelsPerInch;\n    _defineProperty(PixelsPerInch, \"CSS\", 96.0);\n    _defineProperty(PixelsPerInch, \"PDF\", 72.0);\n    _defineProperty(PixelsPerInch, \"PDF_TO_CSS_UNITS\", _PixelsPerInch.CSS / _PixelsPerInch.PDF);\n    var _cache = /*#__PURE__*/new WeakMap();\n    var _defs = /*#__PURE__*/new WeakMap();\n    var _docId2 = /*#__PURE__*/new WeakMap();\n    var _document = /*#__PURE__*/new WeakMap();\n    var _hcmFilter = /*#__PURE__*/new WeakMap();\n    var _hcmKey = /*#__PURE__*/new WeakMap();\n    var _hcmUrl = /*#__PURE__*/new WeakMap();\n    var _hcmHighlightFilter = /*#__PURE__*/new WeakMap();\n    var _hcmHighlightKey = /*#__PURE__*/new WeakMap();\n    var _hcmHighlightUrl = /*#__PURE__*/new WeakMap();\n    var _id = /*#__PURE__*/new WeakMap();\n    var _cache2 = /*#__PURE__*/new WeakMap();\n    var _defs2 = /*#__PURE__*/new WeakMap();\n    var _addGrayConversion = /*#__PURE__*/new WeakSet();\n    var _createFilter = /*#__PURE__*/new WeakSet();\n    var _appendFeFunc = /*#__PURE__*/new WeakSet();\n    var _addTransferMapConversion = /*#__PURE__*/new WeakSet();\n    var _getRGB = /*#__PURE__*/new WeakSet();\n    class DOMFilterFactory extends _base_factory_js__WEBPACK_IMPORTED_MODULE_0__.BaseFilterFactory {\n      constructor() {\n        let {\n          docId,\n          ownerDocument = globalThis.document\n        } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        super();\n        _classPrivateMethodInitSpec(this, _getRGB);\n        _classPrivateMethodInitSpec(this, _addTransferMapConversion);\n        _classPrivateMethodInitSpec(this, _appendFeFunc);\n        _classPrivateMethodInitSpec(this, _createFilter);\n        _classPrivateMethodInitSpec(this, _addGrayConversion);\n        _classPrivateFieldInitSpec(this, _defs2, {\n          get: _get_defs,\n          set: void 0\n        });\n        _classPrivateFieldInitSpec(this, _cache2, {\n          get: _get_cache,\n          set: void 0\n        });\n        _classPrivateFieldInitSpec(this, _cache, {\n          writable: true,\n          value: void 0\n        });\n        _classPrivateFieldInitSpec(this, _defs, {\n          writable: true,\n          value: void 0\n        });\n        _classPrivateFieldInitSpec(this, _docId2, {\n          writable: true,\n          value: void 0\n        });\n        _classPrivateFieldInitSpec(this, _document, {\n          writable: true,\n          value: void 0\n        });\n        _classPrivateFieldInitSpec(this, _hcmFilter, {\n          writable: true,\n          value: void 0\n        });\n        _classPrivateFieldInitSpec(this, _hcmKey, {\n          writable: true,\n          value: void 0\n        });\n        _classPrivateFieldInitSpec(this, _hcmUrl, {\n          writable: true,\n          value: void 0\n        });\n        _classPrivateFieldInitSpec(this, _hcmHighlightFilter, {\n          writable: true,\n          value: void 0\n        });\n        _classPrivateFieldInitSpec(this, _hcmHighlightKey, {\n          writable: true,\n          value: void 0\n        });\n        _classPrivateFieldInitSpec(this, _hcmHighlightUrl, {\n          writable: true,\n          value: void 0\n        });\n        _classPrivateFieldInitSpec(this, _id, {\n          writable: true,\n          value: 0\n        });\n        _classPrivateFieldSet(this, _docId2, docId);\n        _classPrivateFieldSet(this, _document, ownerDocument);\n      }\n      addFilter(maps) {\n        var _this$id, _this$id2;\n        if (!maps) {\n          return \"none\";\n        }\n        let value = _classPrivateFieldGet(this, _cache2).get(maps);\n        if (value) {\n          return value;\n        }\n        let tableR, tableG, tableB, key;\n        if (maps.length === 1) {\n          const mapR = maps[0];\n          const buffer = new Array(256);\n          for (let i = 0; i < 256; i++) {\n            buffer[i] = mapR[i] / 255;\n          }\n          key = tableR = tableG = tableB = buffer.join(\",\");\n        } else {\n          const [mapR, mapG, mapB] = maps;\n          const bufferR = new Array(256);\n          const bufferG = new Array(256);\n          const bufferB = new Array(256);\n          for (let i = 0; i < 256; i++) {\n            bufferR[i] = mapR[i] / 255;\n            bufferG[i] = mapG[i] / 255;\n            bufferB[i] = mapB[i] / 255;\n          }\n          tableR = bufferR.join(\",\");\n          tableG = bufferG.join(\",\");\n          tableB = bufferB.join(\",\");\n          key = \"\".concat(tableR).concat(tableG).concat(tableB);\n        }\n        value = _classPrivateFieldGet(this, _cache2).get(key);\n        if (value) {\n          _classPrivateFieldGet(this, _cache2).set(maps, value);\n          return value;\n        }\n        const id = \"g_\".concat(_classPrivateFieldGet(this, _docId2), \"_transfer_map_\").concat((_classPrivateFieldSet(this, _id, (_this$id = _classPrivateFieldGet(this, _id), _this$id2 = _this$id++, _this$id)), _this$id2));\n        const url = \"url(#\".concat(id, \")\");\n        _classPrivateFieldGet(this, _cache2).set(maps, url);\n        _classPrivateFieldGet(this, _cache2).set(key, url);\n        const filter = _classPrivateMethodGet(this, _createFilter, _createFilter2).call(this, id);\n        _classPrivateMethodGet(this, _addTransferMapConversion, _addTransferMapConversion2).call(this, tableR, tableG, tableB, filter);\n        return url;\n      }\n      addHCMFilter(fgColor, bgColor) {\n        var _classPrivateFieldGet5;\n        const key = \"\".concat(fgColor, \"-\").concat(bgColor);\n        if (_classPrivateFieldGet(this, _hcmKey) === key) {\n          return _classPrivateFieldGet(this, _hcmUrl);\n        }\n        _classPrivateFieldSet(this, _hcmKey, key);\n        _classPrivateFieldSet(this, _hcmUrl, \"none\");\n        (_classPrivateFieldGet5 = _classPrivateFieldGet(this, _hcmFilter)) === null || _classPrivateFieldGet5 === void 0 || _classPrivateFieldGet5.remove();\n        if (!fgColor || !bgColor) {\n          return _classPrivateFieldGet(this, _hcmUrl);\n        }\n        const fgRGB = _classPrivateMethodGet(this, _getRGB, _getRGB2).call(this, fgColor);\n        fgColor = _shared_util_js__WEBPACK_IMPORTED_MODULE_1__.Util.makeHexColor(...fgRGB);\n        const bgRGB = _classPrivateMethodGet(this, _getRGB, _getRGB2).call(this, bgColor);\n        bgColor = _shared_util_js__WEBPACK_IMPORTED_MODULE_1__.Util.makeHexColor(...bgRGB);\n        _classPrivateFieldGet(this, _defs2).style.color = \"\";\n        if (fgColor === \"#000000\" && bgColor === \"#ffffff\" || fgColor === bgColor) {\n          return _classPrivateFieldGet(this, _hcmUrl);\n        }\n        const map = new Array(256);\n        for (let i = 0; i <= 255; i++) {\n          const x = i / 255;\n          map[i] = x <= 0.03928 ? x / 12.92 : ((x + 0.055) / 1.055) ** 2.4;\n        }\n        const table = map.join(\",\");\n        const id = \"g_\".concat(_classPrivateFieldGet(this, _docId2), \"_hcm_filter\");\n        const filter = _classPrivateFieldSet(this, _hcmHighlightFilter, _classPrivateMethodGet(this, _createFilter, _createFilter2).call(this, id));\n        _classPrivateMethodGet(this, _addTransferMapConversion, _addTransferMapConversion2).call(this, table, table, table, filter);\n        _classPrivateMethodGet(this, _addGrayConversion, _addGrayConversion2).call(this, filter);\n        const getSteps = (c, n) => {\n          const start = fgRGB[c] / 255;\n          const end = bgRGB[c] / 255;\n          const arr = new Array(n + 1);\n          for (let i = 0; i <= n; i++) {\n            arr[i] = start + i / n * (end - start);\n          }\n          return arr.join(\",\");\n        };\n        _classPrivateMethodGet(this, _addTransferMapConversion, _addTransferMapConversion2).call(this, getSteps(0, 5), getSteps(1, 5), getSteps(2, 5), filter);\n        _classPrivateFieldSet(this, _hcmUrl, \"url(#\".concat(id, \")\"));\n        return _classPrivateFieldGet(this, _hcmUrl);\n      }\n      addHighlightHCMFilter(fgColor, bgColor, newFgColor, newBgColor) {\n        var _classPrivateFieldGet6;\n        const key = \"\".concat(fgColor, \"-\").concat(bgColor, \"-\").concat(newFgColor, \"-\").concat(newBgColor);\n        if (_classPrivateFieldGet(this, _hcmHighlightKey) === key) {\n          return _classPrivateFieldGet(this, _hcmHighlightUrl);\n        }\n        _classPrivateFieldSet(this, _hcmHighlightKey, key);\n        _classPrivateFieldSet(this, _hcmHighlightUrl, \"none\");\n        (_classPrivateFieldGet6 = _classPrivateFieldGet(this, _hcmHighlightFilter)) === null || _classPrivateFieldGet6 === void 0 || _classPrivateFieldGet6.remove();\n        if (!fgColor || !bgColor) {\n          return _classPrivateFieldGet(this, _hcmHighlightUrl);\n        }\n        const [fgRGB, bgRGB] = [fgColor, bgColor].map(_classPrivateMethodGet(this, _getRGB, _getRGB2).bind(this));\n        let fgGray = Math.round(0.2126 * fgRGB[0] + 0.7152 * fgRGB[1] + 0.0722 * fgRGB[2]);\n        let bgGray = Math.round(0.2126 * bgRGB[0] + 0.7152 * bgRGB[1] + 0.0722 * bgRGB[2]);\n        let [newFgRGB, newBgRGB] = [newFgColor, newBgColor].map(_classPrivateMethodGet(this, _getRGB, _getRGB2).bind(this));\n        if (bgGray < fgGray) {\n          [fgGray, bgGray, newFgRGB, newBgRGB] = [bgGray, fgGray, newBgRGB, newFgRGB];\n        }\n        _classPrivateFieldGet(this, _defs2).style.color = \"\";\n        const getSteps = (fg, bg, n) => {\n          const arr = new Array(256);\n          const step = (bgGray - fgGray) / n;\n          const newStart = fg / 255;\n          const newStep = (bg - fg) / (255 * n);\n          let prev = 0;\n          for (let i = 0; i <= n; i++) {\n            const k = Math.round(fgGray + i * step);\n            const value = newStart + i * newStep;\n            for (let j = prev; j <= k; j++) {\n              arr[j] = value;\n            }\n            prev = k + 1;\n          }\n          for (let i = prev; i < 256; i++) {\n            arr[i] = arr[prev - 1];\n          }\n          return arr.join(\",\");\n        };\n        const id = \"g_\".concat(_classPrivateFieldGet(this, _docId2), \"_hcm_highlight_filter\");\n        const filter = _classPrivateFieldSet(this, _hcmHighlightFilter, _classPrivateMethodGet(this, _createFilter, _createFilter2).call(this, id));\n        _classPrivateMethodGet(this, _addGrayConversion, _addGrayConversion2).call(this, filter);\n        _classPrivateMethodGet(this, _addTransferMapConversion, _addTransferMapConversion2).call(this, getSteps(newFgRGB[0], newBgRGB[0], 5), getSteps(newFgRGB[1], newBgRGB[1], 5), getSteps(newFgRGB[2], newBgRGB[2], 5), filter);\n        _classPrivateFieldSet(this, _hcmHighlightUrl, \"url(#\".concat(id, \")\"));\n        return _classPrivateFieldGet(this, _hcmHighlightUrl);\n      }\n      destroy() {\n        let keepHCM = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n        if (keepHCM && (_classPrivateFieldGet(this, _hcmUrl) || _classPrivateFieldGet(this, _hcmHighlightUrl))) {\n          return;\n        }\n        if (_classPrivateFieldGet(this, _defs)) {\n          _classPrivateFieldGet(this, _defs).parentNode.parentNode.remove();\n          _classPrivateFieldSet(this, _defs, null);\n        }\n        if (_classPrivateFieldGet(this, _cache)) {\n          _classPrivateFieldGet(this, _cache).clear();\n          _classPrivateFieldSet(this, _cache, null);\n        }\n        _classPrivateFieldSet(this, _id, 0);\n      }\n    }\n    function _get_cache() {\n      return _classPrivateFieldGet(this, _cache) || _classPrivateFieldSet(this, _cache, new Map());\n    }\n    function _get_defs() {\n      if (!_classPrivateFieldGet(this, _defs)) {\n        const div = _classPrivateFieldGet(this, _document).createElement(\"div\");\n        const {\n          style\n        } = div;\n        style.visibility = \"hidden\";\n        style.contain = \"strict\";\n        style.width = style.height = 0;\n        style.position = \"absolute\";\n        style.top = style.left = 0;\n        style.zIndex = -1;\n        const svg = _classPrivateFieldGet(this, _document).createElementNS(SVG_NS, \"svg\");\n        svg.setAttribute(\"width\", 0);\n        svg.setAttribute(\"height\", 0);\n        _classPrivateFieldSet(this, _defs, _classPrivateFieldGet(this, _document).createElementNS(SVG_NS, \"defs\"));\n        div.append(svg);\n        svg.append(_classPrivateFieldGet(this, _defs));\n        _classPrivateFieldGet(this, _document).body.append(div);\n      }\n      return _classPrivateFieldGet(this, _defs);\n    }\n    function _addGrayConversion2(filter) {\n      const feColorMatrix = _classPrivateFieldGet(this, _document).createElementNS(SVG_NS, \"feColorMatrix\");\n      feColorMatrix.setAttribute(\"type\", \"matrix\");\n      feColorMatrix.setAttribute(\"values\", \"0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0\");\n      filter.append(feColorMatrix);\n    }\n    function _createFilter2(id) {\n      const filter = _classPrivateFieldGet(this, _document).createElementNS(SVG_NS, \"filter\");\n      filter.setAttribute(\"color-interpolation-filters\", \"sRGB\");\n      filter.setAttribute(\"id\", id);\n      _classPrivateFieldGet(this, _defs2).append(filter);\n      return filter;\n    }\n    function _appendFeFunc2(feComponentTransfer, func, table) {\n      const feFunc = _classPrivateFieldGet(this, _document).createElementNS(SVG_NS, func);\n      feFunc.setAttribute(\"type\", \"discrete\");\n      feFunc.setAttribute(\"tableValues\", table);\n      feComponentTransfer.append(feFunc);\n    }\n    function _addTransferMapConversion2(rTable, gTable, bTable, filter) {\n      const feComponentTransfer = _classPrivateFieldGet(this, _document).createElementNS(SVG_NS, \"feComponentTransfer\");\n      filter.append(feComponentTransfer);\n      _classPrivateMethodGet(this, _appendFeFunc, _appendFeFunc2).call(this, feComponentTransfer, \"feFuncR\", rTable);\n      _classPrivateMethodGet(this, _appendFeFunc, _appendFeFunc2).call(this, feComponentTransfer, \"feFuncG\", gTable);\n      _classPrivateMethodGet(this, _appendFeFunc, _appendFeFunc2).call(this, feComponentTransfer, \"feFuncB\", bTable);\n    }\n    function _getRGB2(color) {\n      _classPrivateFieldGet(this, _defs2).style.color = color;\n      return getRGB(getComputedStyle(_classPrivateFieldGet(this, _defs2)).getPropertyValue(\"color\"));\n    }\n    class DOMCanvasFactory extends _base_factory_js__WEBPACK_IMPORTED_MODULE_0__.BaseCanvasFactory {\n      constructor() {\n        let {\n          ownerDocument = globalThis.document\n        } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        super();\n        this._document = ownerDocument;\n      }\n      _createCanvas(width, height) {\n        const canvas = this._document.createElement(\"canvas\");\n        canvas.width = width;\n        canvas.height = height;\n        return canvas;\n      }\n    }\n    async function fetchData(url) {\n      let type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"text\";\n      if (isValidFetchUrl(url, document.baseURI)) {\n        const response = await fetch(url);\n        if (!response.ok) {\n          throw new Error(response.statusText);\n        }\n        switch (type) {\n          case \"arraybuffer\":\n            return response.arrayBuffer();\n          case \"blob\":\n            return response.blob();\n          case \"json\":\n            return response.json();\n        }\n        return response.text();\n      }\n      return new Promise((resolve, reject) => {\n        const request = new XMLHttpRequest();\n        request.open(\"GET\", url, true);\n        request.responseType = type;\n        request.onreadystatechange = () => {\n          if (request.readyState !== XMLHttpRequest.DONE) {\n            return;\n          }\n          if (request.status === 200 || request.status === 0) {\n            let data;\n            switch (type) {\n              case \"arraybuffer\":\n              case \"blob\":\n              case \"json\":\n                data = request.response;\n                break;\n              default:\n                data = request.responseText;\n                break;\n            }\n            if (data) {\n              resolve(data);\n              return;\n            }\n          }\n          reject(new Error(request.statusText));\n        };\n        request.send(null);\n      });\n    }\n    class DOMCMapReaderFactory extends _base_factory_js__WEBPACK_IMPORTED_MODULE_0__.BaseCMapReaderFactory {\n      _fetchData(url, compressionType) {\n        return fetchData(url, this.isCompressed ? \"arraybuffer\" : \"text\").then(data => {\n          return {\n            cMapData: data instanceof ArrayBuffer ? new Uint8Array(data) : (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_1__.stringToBytes)(data),\n            compressionType\n          };\n        });\n      }\n    }\n    class DOMStandardFontDataFactory extends _base_factory_js__WEBPACK_IMPORTED_MODULE_0__.BaseStandardFontDataFactory {\n      _fetchData(url) {\n        return fetchData(url, \"arraybuffer\").then(data => {\n          return new Uint8Array(data);\n        });\n      }\n    }\n    class DOMSVGFactory extends _base_factory_js__WEBPACK_IMPORTED_MODULE_0__.BaseSVGFactory {\n      _createSVG(type) {\n        return document.createElementNS(SVG_NS, type);\n      }\n    }\n    class PageViewport {\n      constructor(_ref37) {\n        let {\n          viewBox,\n          scale,\n          rotation,\n          offsetX = 0,\n          offsetY = 0,\n          dontFlip = false\n        } = _ref37;\n        this.viewBox = viewBox;\n        this.scale = scale;\n        this.rotation = rotation;\n        this.offsetX = offsetX;\n        this.offsetY = offsetY;\n        const centerX = (viewBox[2] + viewBox[0]) / 2;\n        const centerY = (viewBox[3] + viewBox[1]) / 2;\n        let rotateA, rotateB, rotateC, rotateD;\n        rotation %= 360;\n        if (rotation < 0) {\n          rotation += 360;\n        }\n        switch (rotation) {\n          case 180:\n            rotateA = -1;\n            rotateB = 0;\n            rotateC = 0;\n            rotateD = 1;\n            break;\n          case 90:\n            rotateA = 0;\n            rotateB = 1;\n            rotateC = 1;\n            rotateD = 0;\n            break;\n          case 270:\n            rotateA = 0;\n            rotateB = -1;\n            rotateC = -1;\n            rotateD = 0;\n            break;\n          case 0:\n            rotateA = 1;\n            rotateB = 0;\n            rotateC = 0;\n            rotateD = -1;\n            break;\n          default:\n            throw new Error(\"PageViewport: Invalid rotation, must be a multiple of 90 degrees.\");\n        }\n        if (dontFlip) {\n          rotateC = -rotateC;\n          rotateD = -rotateD;\n        }\n        let offsetCanvasX, offsetCanvasY;\n        let width, height;\n        if (rotateA === 0) {\n          offsetCanvasX = Math.abs(centerY - viewBox[1]) * scale + offsetX;\n          offsetCanvasY = Math.abs(centerX - viewBox[0]) * scale + offsetY;\n          width = (viewBox[3] - viewBox[1]) * scale;\n          height = (viewBox[2] - viewBox[0]) * scale;\n        } else {\n          offsetCanvasX = Math.abs(centerX - viewBox[0]) * scale + offsetX;\n          offsetCanvasY = Math.abs(centerY - viewBox[1]) * scale + offsetY;\n          width = (viewBox[2] - viewBox[0]) * scale;\n          height = (viewBox[3] - viewBox[1]) * scale;\n        }\n        this.transform = [rotateA * scale, rotateB * scale, rotateC * scale, rotateD * scale, offsetCanvasX - rotateA * scale * centerX - rotateC * scale * centerY, offsetCanvasY - rotateB * scale * centerX - rotateD * scale * centerY];\n        this.width = width;\n        this.height = height;\n      }\n      get rawDims() {\n        const {\n          viewBox\n        } = this;\n        return (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_1__.shadow)(this, \"rawDims\", {\n          pageWidth: viewBox[2] - viewBox[0],\n          pageHeight: viewBox[3] - viewBox[1],\n          pageX: viewBox[0],\n          pageY: viewBox[1]\n        });\n      }\n      clone() {\n        let {\n          scale = this.scale,\n          rotation = this.rotation,\n          offsetX = this.offsetX,\n          offsetY = this.offsetY,\n          dontFlip = false\n        } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        return new PageViewport({\n          viewBox: this.viewBox.slice(),\n          scale,\n          rotation,\n          offsetX,\n          offsetY,\n          dontFlip\n        });\n      }\n      convertToViewportPoint(x, y) {\n        return _shared_util_js__WEBPACK_IMPORTED_MODULE_1__.Util.applyTransform([x, y], this.transform);\n      }\n      convertToViewportRectangle(rect) {\n        const topLeft = _shared_util_js__WEBPACK_IMPORTED_MODULE_1__.Util.applyTransform([rect[0], rect[1]], this.transform);\n        const bottomRight = _shared_util_js__WEBPACK_IMPORTED_MODULE_1__.Util.applyTransform([rect[2], rect[3]], this.transform);\n        return [topLeft[0], topLeft[1], bottomRight[0], bottomRight[1]];\n      }\n      convertToPdfPoint(x, y) {\n        return _shared_util_js__WEBPACK_IMPORTED_MODULE_1__.Util.applyInverseTransform([x, y], this.transform);\n      }\n    }\n    class RenderingCancelledException extends _shared_util_js__WEBPACK_IMPORTED_MODULE_1__.BaseException {\n      constructor(msg) {\n        let extraDelay = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n        super(msg, \"RenderingCancelledException\");\n        this.extraDelay = extraDelay;\n      }\n    }\n    function isDataScheme(url) {\n      const ii = url.length;\n      let i = 0;\n      while (i < ii && url[i].trim() === \"\") {\n        i++;\n      }\n      return url.substring(i, i + 5).toLowerCase() === \"data:\";\n    }\n    function isPdfFile(filename) {\n      return typeof filename === \"string\" && /\\.pdf$/i.test(filename);\n    }\n    function getFilenameFromUrl(url) {\n      let onlyStripPath = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      if (!onlyStripPath) {\n        [url] = url.split(/[#?]/, 1);\n      }\n      return url.substring(url.lastIndexOf(\"/\") + 1);\n    }\n    function getPdfFilenameFromUrl(url) {\n      let defaultFilename = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"document.pdf\";\n      if (typeof url !== \"string\") {\n        return defaultFilename;\n      }\n      if (isDataScheme(url)) {\n        (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_1__.warn)('getPdfFilenameFromUrl: ignore \"data:\"-URL for performance reasons.');\n        return defaultFilename;\n      }\n      const reURI = /^(?:(?:[^:]+:)?\\/\\/[^/]+)?([^?#]*)(\\?[^#]*)?(#.*)?$/;\n      const reFilename = /[^/?#=]+\\.pdf\\b(?!.*\\.pdf\\b)/i;\n      const splitURI = reURI.exec(url);\n      let suggestedFilename = reFilename.exec(splitURI[1]) || reFilename.exec(splitURI[2]) || reFilename.exec(splitURI[3]);\n      if (suggestedFilename) {\n        suggestedFilename = suggestedFilename[0];\n        if (suggestedFilename.includes(\"%\")) {\n          try {\n            suggestedFilename = reFilename.exec(decodeURIComponent(suggestedFilename))[0];\n          } catch {}\n        }\n      }\n      return suggestedFilename || defaultFilename;\n    }\n    class StatTimer {\n      constructor() {\n        _defineProperty(this, \"started\", Object.create(null));\n        _defineProperty(this, \"times\", []);\n      }\n      time(name) {\n        if (name in this.started) {\n          (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_1__.warn)(\"Timer is already running for \".concat(name));\n        }\n        this.started[name] = Date.now();\n      }\n      timeEnd(name) {\n        if (!(name in this.started)) {\n          (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_1__.warn)(\"Timer has not been started for \".concat(name));\n        }\n        this.times.push({\n          name,\n          start: this.started[name],\n          end: Date.now()\n        });\n        delete this.started[name];\n      }\n      toString() {\n        const outBuf = [];\n        let longest = 0;\n        for (const {\n          name\n        } of this.times) {\n          longest = Math.max(name.length, longest);\n        }\n        for (const {\n          name,\n          start,\n          end\n        } of this.times) {\n          outBuf.push(\"\".concat(name.padEnd(longest), \" \").concat(end - start, \"ms\\n\"));\n        }\n        return outBuf.join(\"\");\n      }\n    }\n    function isValidFetchUrl(url, baseUrl) {\n      try {\n        const {\n          protocol\n        } = baseUrl ? new URL(url, baseUrl) : new URL(url);\n        return protocol === \"http:\" || protocol === \"https:\";\n      } catch {\n        return false;\n      }\n    }\n    function noContextMenu(e) {\n      e.preventDefault();\n    }\n    function deprecated(details) {\n      console.log(\"Deprecated API usage: \" + details);\n    }\n    let pdfDateStringRegex;\n    class PDFDateString {\n      static toDateObject(input) {\n        if (!input || typeof input !== \"string\") {\n          return null;\n        }\n        pdfDateStringRegex || (pdfDateStringRegex = new RegExp(\"^D:\" + \"(\\\\d{4})\" + \"(\\\\d{2})?\" + \"(\\\\d{2})?\" + \"(\\\\d{2})?\" + \"(\\\\d{2})?\" + \"(\\\\d{2})?\" + \"([Z|+|-])?\" + \"(\\\\d{2})?\" + \"'?\" + \"(\\\\d{2})?\" + \"'?\"));\n        const matches = pdfDateStringRegex.exec(input);\n        if (!matches) {\n          return null;\n        }\n        const year = parseInt(matches[1], 10);\n        let month = parseInt(matches[2], 10);\n        month = month >= 1 && month <= 12 ? month - 1 : 0;\n        let day = parseInt(matches[3], 10);\n        day = day >= 1 && day <= 31 ? day : 1;\n        let hour = parseInt(matches[4], 10);\n        hour = hour >= 0 && hour <= 23 ? hour : 0;\n        let minute = parseInt(matches[5], 10);\n        minute = minute >= 0 && minute <= 59 ? minute : 0;\n        let second = parseInt(matches[6], 10);\n        second = second >= 0 && second <= 59 ? second : 0;\n        const universalTimeRelation = matches[7] || \"Z\";\n        let offsetHour = parseInt(matches[8], 10);\n        offsetHour = offsetHour >= 0 && offsetHour <= 23 ? offsetHour : 0;\n        let offsetMinute = parseInt(matches[9], 10) || 0;\n        offsetMinute = offsetMinute >= 0 && offsetMinute <= 59 ? offsetMinute : 0;\n        if (universalTimeRelation === \"-\") {\n          hour += offsetHour;\n          minute += offsetMinute;\n        } else if (universalTimeRelation === \"+\") {\n          hour -= offsetHour;\n          minute -= offsetMinute;\n        }\n        return new Date(Date.UTC(year, month, day, hour, minute, second));\n      }\n    }\n    function getXfaPageViewport(xfaPage, _ref38) {\n      let {\n        scale = 1,\n        rotation = 0\n      } = _ref38;\n      const {\n        width,\n        height\n      } = xfaPage.attributes.style;\n      const viewBox = [0, 0, parseInt(width), parseInt(height)];\n      return new PageViewport({\n        viewBox,\n        scale,\n        rotation\n      });\n    }\n    function getRGB(color) {\n      if (color.startsWith(\"#\")) {\n        const colorRGB = parseInt(color.slice(1), 16);\n        return [(colorRGB & 0xff0000) >> 16, (colorRGB & 0x00ff00) >> 8, colorRGB & 0x0000ff];\n      }\n      if (color.startsWith(\"rgb(\")) {\n        return color.slice(4, -1).split(\",\").map(x => parseInt(x));\n      }\n      if (color.startsWith(\"rgba(\")) {\n        return color.slice(5, -1).split(\",\").map(x => parseInt(x)).slice(0, 3);\n      }\n      (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_1__.warn)(\"Not a valid color format: \\\"\".concat(color, \"\\\"\"));\n      return [0, 0, 0];\n    }\n    function getColorValues(colors) {\n      const span = document.createElement(\"span\");\n      span.style.visibility = \"hidden\";\n      document.body.append(span);\n      for (const name of colors.keys()) {\n        span.style.color = name;\n        const computedColor = window.getComputedStyle(span).color;\n        colors.set(name, getRGB(computedColor));\n      }\n      span.remove();\n    }\n    function getCurrentTransform(ctx) {\n      const {\n        a,\n        b,\n        c,\n        d,\n        e,\n        f\n      } = ctx.getTransform();\n      return [a, b, c, d, e, f];\n    }\n    function getCurrentTransformInverse(ctx) {\n      const {\n        a,\n        b,\n        c,\n        d,\n        e,\n        f\n      } = ctx.getTransform().invertSelf();\n      return [a, b, c, d, e, f];\n    }\n    function setLayerDimensions(div, viewport) {\n      let mustFlip = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      let mustRotate = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n      if (viewport instanceof PageViewport) {\n        const {\n          pageWidth,\n          pageHeight\n        } = viewport.rawDims;\n        const {\n          style\n        } = div;\n        const useRound = _shared_util_js__WEBPACK_IMPORTED_MODULE_1__.FeatureTest.isCSSRoundSupported;\n        const w = \"var(--scale-factor) * \".concat(pageWidth, \"px\"),\n          h = \"var(--scale-factor) * \".concat(pageHeight, \"px\");\n        const widthStr = useRound ? \"round(\".concat(w, \", 1px)\") : \"calc(\".concat(w, \")\"),\n          heightStr = useRound ? \"round(\".concat(h, \", 1px)\") : \"calc(\".concat(h, \")\");\n        if (!mustFlip || viewport.rotation % 180 === 0) {\n          style.width = widthStr;\n          style.height = heightStr;\n        } else {\n          style.width = heightStr;\n          style.height = widthStr;\n        }\n      }\n      if (mustRotate) {\n        div.setAttribute(\"data-main-rotation\", viewport.rotation);\n      }\n    }\n\n    /***/\n  }),\n  /***/423: ( /***/(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {\n    var _DrawLayer;\n    /* harmony export */__webpack_require__.d(__webpack_exports__, {\n      /* harmony export */DrawLayer: () => ( /* binding */DrawLayer)\n      /* harmony export */\n    });\n    /* harmony import */\n    var _display_utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(473);\n    /* harmony import */\n    var _shared_util_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(266);\n    var _parent2 = /*#__PURE__*/new WeakMap();\n    var _id2 = /*#__PURE__*/new WeakMap();\n    var _mapping = /*#__PURE__*/new WeakMap();\n    var _createSVG = /*#__PURE__*/new WeakSet();\n    class DrawLayer {\n      constructor(_ref39) {\n        let {\n          pageIndex\n        } = _ref39;\n        _classPrivateMethodInitSpec(this, _createSVG);\n        _classPrivateFieldInitSpec(this, _parent2, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _id2, {\n          writable: true,\n          value: 0\n        });\n        _classPrivateFieldInitSpec(this, _mapping, {\n          writable: true,\n          value: new Map()\n        });\n        this.pageIndex = pageIndex;\n      }\n      setParent(parent) {\n        if (!_classPrivateFieldGet(this, _parent2)) {\n          _classPrivateFieldSet(this, _parent2, parent);\n          return;\n        }\n        if (_classPrivateFieldGet(this, _parent2) !== parent) {\n          if (_classPrivateFieldGet(this, _mapping).size > 0) {\n            for (const root of _classPrivateFieldGet(this, _mapping).values()) {\n              root.remove();\n              parent.append(root);\n            }\n          }\n          _classPrivateFieldSet(this, _parent2, parent);\n        }\n      }\n      static get _svgFactory() {\n        return (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_1__.shadow)(this, \"_svgFactory\", new _display_utils_js__WEBPACK_IMPORTED_MODULE_0__.DOMSVGFactory());\n      }\n      highlight(_ref40, color, opacity) {\n        var _this$id3, _this$id4;\n        let {\n          outlines,\n          box\n        } = _ref40;\n        const id = (_classPrivateFieldSet(this, _id2, (_this$id3 = _classPrivateFieldGet(this, _id2), _this$id4 = _this$id3++, _this$id3)), _this$id4);\n        const root = _classPrivateMethodGet(this, _createSVG, _createSVG2).call(this, box);\n        root.classList.add(\"highlight\");\n        const defs = DrawLayer._svgFactory.createElement(\"defs\");\n        root.append(defs);\n        const path = DrawLayer._svgFactory.createElement(\"path\");\n        defs.append(path);\n        const pathId = \"path_p\".concat(this.pageIndex, \"_\").concat(id);\n        path.setAttribute(\"id\", pathId);\n        path.setAttribute(\"d\", _classStaticPrivateMethodGet(DrawLayer, DrawLayer, _extractPathFromHighlightOutlines).call(DrawLayer, outlines));\n        const clipPath = DrawLayer._svgFactory.createElement(\"clipPath\");\n        defs.append(clipPath);\n        const clipPathId = \"clip_\".concat(pathId);\n        clipPath.setAttribute(\"id\", clipPathId);\n        clipPath.setAttribute(\"clipPathUnits\", \"objectBoundingBox\");\n        const clipPathUse = DrawLayer._svgFactory.createElement(\"use\");\n        clipPath.append(clipPathUse);\n        clipPathUse.setAttribute(\"href\", \"#\".concat(pathId));\n        clipPathUse.classList.add(\"clip\");\n        const use = DrawLayer._svgFactory.createElement(\"use\");\n        root.append(use);\n        root.setAttribute(\"fill\", color);\n        root.setAttribute(\"fill-opacity\", opacity);\n        use.setAttribute(\"href\", \"#\".concat(pathId));\n        _classPrivateFieldGet(this, _mapping).set(id, root);\n        return {\n          id,\n          clipPathId: \"url(#\".concat(clipPathId, \")\")\n        };\n      }\n      highlightOutline(_ref41) {\n        var _this$id5, _this$id6;\n        let {\n          outlines,\n          box\n        } = _ref41;\n        const id = (_classPrivateFieldSet(this, _id2, (_this$id5 = _classPrivateFieldGet(this, _id2), _this$id6 = _this$id5++, _this$id5)), _this$id6);\n        const root = _classPrivateMethodGet(this, _createSVG, _createSVG2).call(this, box);\n        root.classList.add(\"highlightOutline\");\n        const defs = DrawLayer._svgFactory.createElement(\"defs\");\n        root.append(defs);\n        const path = DrawLayer._svgFactory.createElement(\"path\");\n        defs.append(path);\n        const pathId = \"path_p\".concat(this.pageIndex, \"_\").concat(id);\n        path.setAttribute(\"id\", pathId);\n        path.setAttribute(\"d\", _classStaticPrivateMethodGet(DrawLayer, DrawLayer, _extractPathFromHighlightOutlines).call(DrawLayer, outlines));\n        path.setAttribute(\"vector-effect\", \"non-scaling-stroke\");\n        const use1 = DrawLayer._svgFactory.createElement(\"use\");\n        root.append(use1);\n        use1.setAttribute(\"href\", \"#\".concat(pathId));\n        const use2 = use1.cloneNode();\n        root.append(use2);\n        use1.classList.add(\"mainOutline\");\n        use2.classList.add(\"secondaryOutline\");\n        _classPrivateFieldGet(this, _mapping).set(id, root);\n        return id;\n      }\n      updateBox(id, box) {\n        _classStaticPrivateMethodGet(DrawLayer, DrawLayer, _setBox).call(DrawLayer, _classPrivateFieldGet(this, _mapping).get(id), box);\n      }\n      rotate(id, angle) {\n        _classPrivateFieldGet(this, _mapping).get(id).setAttribute(\"data-main-rotation\", angle);\n      }\n      changeColor(id, color) {\n        _classPrivateFieldGet(this, _mapping).get(id).setAttribute(\"fill\", color);\n      }\n      changeOpacity(id, opacity) {\n        _classPrivateFieldGet(this, _mapping).get(id).setAttribute(\"fill-opacity\", opacity);\n      }\n      addClass(id, className) {\n        _classPrivateFieldGet(this, _mapping).get(id).classList.add(className);\n      }\n      removeClass(id, className) {\n        _classPrivateFieldGet(this, _mapping).get(id).classList.remove(className);\n      }\n      remove(id) {\n        if (_classPrivateFieldGet(this, _parent2) === null) {\n          return;\n        }\n        _classPrivateFieldGet(this, _mapping).get(id).remove();\n        _classPrivateFieldGet(this, _mapping).delete(id);\n      }\n      destroy() {\n        _classPrivateFieldSet(this, _parent2, null);\n        for (const root of _classPrivateFieldGet(this, _mapping).values()) {\n          root.remove();\n        }\n        _classPrivateFieldGet(this, _mapping).clear();\n      }\n    }\n\n    /***/\n    _DrawLayer = DrawLayer;\n    function _setBox(element, _ref42) {\n      let {\n        x,\n        y,\n        width,\n        height\n      } = _ref42;\n      const {\n        style\n      } = element;\n      style.top = \"\".concat(100 * y, \"%\");\n      style.left = \"\".concat(100 * x, \"%\");\n      style.width = \"\".concat(100 * width, \"%\");\n      style.height = \"\".concat(100 * height, \"%\");\n    }\n    function _createSVG2(box) {\n      const svg = _DrawLayer._svgFactory.create(1, 1, true);\n      _classPrivateFieldGet(this, _parent2).append(svg);\n      _classStaticPrivateMethodGet(_DrawLayer, _DrawLayer, _setBox).call(_DrawLayer, svg, box);\n      return svg;\n    }\n    function _extractPathFromHighlightOutlines(polygons) {\n      const buffer = [];\n      for (const polygon of polygons) {\n        let [prevX, prevY] = polygon;\n        buffer.push(\"M\".concat(prevX, \" \").concat(prevY));\n        for (let i = 2; i < polygon.length; i += 2) {\n          const x = polygon[i];\n          const y = polygon[i + 1];\n          if (x === prevX) {\n            buffer.push(\"V\".concat(y));\n            prevY = y;\n          } else if (y === prevY) {\n            buffer.push(\"H\".concat(x));\n            prevX = x;\n          }\n        }\n        buffer.push(\"Z\");\n      }\n      return buffer.join(\" \");\n    }\n  }),\n  /***/629: ( /***/(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {\n    var _FreeTextEditor, _InkEditor, _StampEditor, _AnnotationEditorLayer;\n    // EXPORTS\n    __webpack_require__.d(__webpack_exports__, {\n      AnnotationEditorLayer: () => ( /* binding */AnnotationEditorLayer)\n    });\n\n    // EXTERNAL MODULE: ./src/shared/util.js\n    var util = __webpack_require__(266);\n    // EXTERNAL MODULE: ./src/display/editor/editor.js + 2 modules\n    var editor_editor = __webpack_require__(115);\n    // EXTERNAL MODULE: ./src/display/editor/tools.js\n    var tools = __webpack_require__(812);\n    // EXTERNAL MODULE: ./src/display/annotation_layer.js + 1 modules\n    var annotation_layer = __webpack_require__(640);\n    ; // CONCATENATED MODULE: ./src/display/editor/freetext.js\n    var _boundEditorDivBlur = /*#__PURE__*/new WeakMap();\n    var _boundEditorDivFocus = /*#__PURE__*/new WeakMap();\n    var _boundEditorDivInput = /*#__PURE__*/new WeakMap();\n    var _boundEditorDivKeydown = /*#__PURE__*/new WeakMap();\n    var _color2 = /*#__PURE__*/new WeakMap();\n    var _content = /*#__PURE__*/new WeakMap();\n    var _editorDivId = /*#__PURE__*/new WeakMap();\n    var _fontSize = /*#__PURE__*/new WeakMap();\n    var _initialData = /*#__PURE__*/new WeakMap();\n    var _updateFontSize = /*#__PURE__*/new WeakSet();\n    var _updateColor = /*#__PURE__*/new WeakSet();\n    var _extractText = /*#__PURE__*/new WeakSet();\n    var _setEditorDimensions = /*#__PURE__*/new WeakSet();\n    var _setContent = /*#__PURE__*/new WeakSet();\n    var _hasElementChanged = /*#__PURE__*/new WeakSet();\n    var _cheatInitialRect = /*#__PURE__*/new WeakSet();\n    class FreeTextEditor extends editor_editor.AnnotationEditor {\n      static get _keyboardManager() {\n        const proto = FreeTextEditor.prototype;\n        const arrowChecker = self => self.isEmpty();\n        const small = tools.AnnotationEditorUIManager.TRANSLATE_SMALL;\n        const big = tools.AnnotationEditorUIManager.TRANSLATE_BIG;\n        return (0, util.shadow)(this, \"_keyboardManager\", new tools.KeyboardManager([[[\"ctrl+s\", \"mac+meta+s\", \"ctrl+p\", \"mac+meta+p\"], proto.commitOrRemove, {\n          bubbles: true\n        }], [[\"ctrl+Enter\", \"mac+meta+Enter\", \"Escape\", \"mac+Escape\"], proto.commitOrRemove], [[\"ArrowLeft\", \"mac+ArrowLeft\"], proto._translateEmpty, {\n          args: [-small, 0],\n          checker: arrowChecker\n        }], [[\"ctrl+ArrowLeft\", \"mac+shift+ArrowLeft\"], proto._translateEmpty, {\n          args: [-big, 0],\n          checker: arrowChecker\n        }], [[\"ArrowRight\", \"mac+ArrowRight\"], proto._translateEmpty, {\n          args: [small, 0],\n          checker: arrowChecker\n        }], [[\"ctrl+ArrowRight\", \"mac+shift+ArrowRight\"], proto._translateEmpty, {\n          args: [big, 0],\n          checker: arrowChecker\n        }], [[\"ArrowUp\", \"mac+ArrowUp\"], proto._translateEmpty, {\n          args: [0, -small],\n          checker: arrowChecker\n        }], [[\"ctrl+ArrowUp\", \"mac+shift+ArrowUp\"], proto._translateEmpty, {\n          args: [0, -big],\n          checker: arrowChecker\n        }], [[\"ArrowDown\", \"mac+ArrowDown\"], proto._translateEmpty, {\n          args: [0, small],\n          checker: arrowChecker\n        }], [[\"ctrl+ArrowDown\", \"mac+shift+ArrowDown\"], proto._translateEmpty, {\n          args: [0, big],\n          checker: arrowChecker\n        }]]));\n      }\n      constructor(params) {\n        super({\n          ...params,\n          name: \"freeTextEditor\"\n        });\n        _classPrivateMethodInitSpec(this, _cheatInitialRect);\n        _classPrivateMethodInitSpec(this, _hasElementChanged);\n        _classPrivateMethodInitSpec(this, _setContent);\n        _classPrivateMethodInitSpec(this, _setEditorDimensions);\n        _classPrivateMethodInitSpec(this, _extractText);\n        _classPrivateMethodInitSpec(this, _updateColor);\n        _classPrivateMethodInitSpec(this, _updateFontSize);\n        _classPrivateFieldInitSpec(this, _boundEditorDivBlur, {\n          writable: true,\n          value: this.editorDivBlur.bind(this)\n        });\n        _classPrivateFieldInitSpec(this, _boundEditorDivFocus, {\n          writable: true,\n          value: this.editorDivFocus.bind(this)\n        });\n        _classPrivateFieldInitSpec(this, _boundEditorDivInput, {\n          writable: true,\n          value: this.editorDivInput.bind(this)\n        });\n        _classPrivateFieldInitSpec(this, _boundEditorDivKeydown, {\n          writable: true,\n          value: this.editorDivKeydown.bind(this)\n        });\n        _classPrivateFieldInitSpec(this, _color2, {\n          writable: true,\n          value: void 0\n        });\n        _classPrivateFieldInitSpec(this, _content, {\n          writable: true,\n          value: \"\"\n        });\n        _classPrivateFieldInitSpec(this, _editorDivId, {\n          writable: true,\n          value: \"\".concat(this.id, \"-editor\")\n        });\n        _classPrivateFieldInitSpec(this, _fontSize, {\n          writable: true,\n          value: void 0\n        });\n        _classPrivateFieldInitSpec(this, _initialData, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldSet(this, _color2, params.color || FreeTextEditor._defaultColor || editor_editor.AnnotationEditor._defaultLineColor);\n        _classPrivateFieldSet(this, _fontSize, params.fontSize || FreeTextEditor._defaultFontSize);\n      }\n      static initialize(l10n) {\n        editor_editor.AnnotationEditor.initialize(l10n, {\n          strings: [\"pdfjs-free-text-default-content\"]\n        });\n        const style = getComputedStyle(document.documentElement);\n        this._internalPadding = parseFloat(style.getPropertyValue(\"--freetext-padding\"));\n      }\n      static updateDefaultParams(type, value) {\n        switch (type) {\n          case util.AnnotationEditorParamsType.FREETEXT_SIZE:\n            FreeTextEditor._defaultFontSize = value;\n            break;\n          case util.AnnotationEditorParamsType.FREETEXT_COLOR:\n            FreeTextEditor._defaultColor = value;\n            break;\n        }\n      }\n      updateParams(type, value) {\n        switch (type) {\n          case util.AnnotationEditorParamsType.FREETEXT_SIZE:\n            _classPrivateMethodGet(this, _updateFontSize, _updateFontSize2).call(this, value);\n            break;\n          case util.AnnotationEditorParamsType.FREETEXT_COLOR:\n            _classPrivateMethodGet(this, _updateColor, _updateColor2).call(this, value);\n            break;\n        }\n      }\n      static get defaultPropertiesToUpdate() {\n        return [[util.AnnotationEditorParamsType.FREETEXT_SIZE, FreeTextEditor._defaultFontSize], [util.AnnotationEditorParamsType.FREETEXT_COLOR, FreeTextEditor._defaultColor || editor_editor.AnnotationEditor._defaultLineColor]];\n      }\n      get propertiesToUpdate() {\n        return [[util.AnnotationEditorParamsType.FREETEXT_SIZE, _classPrivateFieldGet(this, _fontSize)], [util.AnnotationEditorParamsType.FREETEXT_COLOR, _classPrivateFieldGet(this, _color2)]];\n      }\n      _translateEmpty(x, y) {\n        this._uiManager.translateSelectedEditors(x, y, true);\n      }\n      getInitialTranslation() {\n        const scale = this.parentScale;\n        return [-FreeTextEditor._internalPadding * scale, -(FreeTextEditor._internalPadding + _classPrivateFieldGet(this, _fontSize)) * scale];\n      }\n      rebuild() {\n        if (!this.parent) {\n          return;\n        }\n        super.rebuild();\n        if (this.div === null) {\n          return;\n        }\n        if (!this.isAttachedToDOM) {\n          this.parent.add(this);\n        }\n      }\n      enableEditMode() {\n        if (this.isInEditMode()) {\n          return;\n        }\n        this.parent.setEditingState(false);\n        this.parent.updateToolbar(util.AnnotationEditorType.FREETEXT);\n        super.enableEditMode();\n        this.overlayDiv.classList.remove(\"enabled\");\n        this.editorDiv.contentEditable = true;\n        this._isDraggable = false;\n        this.div.removeAttribute(\"aria-activedescendant\");\n        this.editorDiv.addEventListener(\"keydown\", _classPrivateFieldGet(this, _boundEditorDivKeydown));\n        this.editorDiv.addEventListener(\"focus\", _classPrivateFieldGet(this, _boundEditorDivFocus));\n        this.editorDiv.addEventListener(\"blur\", _classPrivateFieldGet(this, _boundEditorDivBlur));\n        this.editorDiv.addEventListener(\"input\", _classPrivateFieldGet(this, _boundEditorDivInput));\n      }\n      disableEditMode() {\n        if (!this.isInEditMode()) {\n          return;\n        }\n        this.parent.setEditingState(true);\n        super.disableEditMode();\n        this.overlayDiv.classList.add(\"enabled\");\n        this.editorDiv.contentEditable = false;\n        this.div.setAttribute(\"aria-activedescendant\", _classPrivateFieldGet(this, _editorDivId));\n        this._isDraggable = true;\n        this.editorDiv.removeEventListener(\"keydown\", _classPrivateFieldGet(this, _boundEditorDivKeydown));\n        this.editorDiv.removeEventListener(\"focus\", _classPrivateFieldGet(this, _boundEditorDivFocus));\n        this.editorDiv.removeEventListener(\"blur\", _classPrivateFieldGet(this, _boundEditorDivBlur));\n        this.editorDiv.removeEventListener(\"input\", _classPrivateFieldGet(this, _boundEditorDivInput));\n        this.div.focus({\n          preventScroll: true\n        });\n        this.isEditing = false;\n        this.parent.div.classList.add(\"freetextEditing\");\n      }\n      focusin(event) {\n        if (!this._focusEventsAllowed) {\n          return;\n        }\n        super.focusin(event);\n        if (event.target !== this.editorDiv) {\n          this.editorDiv.focus();\n        }\n      }\n      onceAdded() {\n        var _this$_initialOptions;\n        if (this.width) {\n          _classPrivateMethodGet(this, _cheatInitialRect, _cheatInitialRect2).call(this);\n          return;\n        }\n        this.enableEditMode();\n        this.editorDiv.focus();\n        if ((_this$_initialOptions = this._initialOptions) !== null && _this$_initialOptions !== void 0 && _this$_initialOptions.isCentered) {\n          this.center();\n        }\n        this._initialOptions = null;\n      }\n      isEmpty() {\n        return !this.editorDiv || this.editorDiv.innerText.trim() === \"\";\n      }\n      remove() {\n        this.isEditing = false;\n        if (this.parent) {\n          this.parent.setEditingState(true);\n          this.parent.div.classList.add(\"freetextEditing\");\n        }\n        super.remove();\n      }\n      commit() {\n        if (!this.isInEditMode()) {\n          return;\n        }\n        super.commit();\n        this.disableEditMode();\n        const savedText = _classPrivateFieldGet(this, _content);\n        const newText = _classPrivateFieldSet(this, _content, _classPrivateMethodGet(this, _extractText, _extractText2).call(this).trimEnd());\n        if (savedText === newText) {\n          return;\n        }\n        const setText = text => {\n          _classPrivateFieldSet(this, _content, text);\n          if (!text) {\n            this.remove();\n            return;\n          }\n          _classPrivateMethodGet(this, _setContent, _setContent2).call(this);\n          this._uiManager.rebuild(this);\n          _classPrivateMethodGet(this, _setEditorDimensions, _setEditorDimensions2).call(this);\n        };\n        this.addCommands({\n          cmd: () => {\n            setText(newText);\n          },\n          undo: () => {\n            setText(savedText);\n          },\n          mustExec: false\n        });\n        _classPrivateMethodGet(this, _setEditorDimensions, _setEditorDimensions2).call(this);\n      }\n      shouldGetKeyboardEvents() {\n        return this.isInEditMode();\n      }\n      enterInEditMode() {\n        this.enableEditMode();\n        this.editorDiv.focus();\n      }\n      dblclick(event) {\n        this.enterInEditMode();\n      }\n      keydown(event) {\n        if (event.target === this.div && event.key === \"Enter\") {\n          this.enterInEditMode();\n          event.preventDefault();\n        }\n      }\n      editorDivKeydown(event) {\n        FreeTextEditor._keyboardManager.exec(this, event);\n      }\n      editorDivFocus(event) {\n        this.isEditing = true;\n      }\n      editorDivBlur(event) {\n        this.isEditing = false;\n      }\n      editorDivInput(event) {\n        this.parent.div.classList.toggle(\"freetextEditing\", this.isEmpty());\n      }\n      disableEditing() {\n        this.editorDiv.setAttribute(\"role\", \"comment\");\n        this.editorDiv.removeAttribute(\"aria-multiline\");\n      }\n      enableEditing() {\n        this.editorDiv.setAttribute(\"role\", \"textbox\");\n        this.editorDiv.setAttribute(\"aria-multiline\", true);\n      }\n      render() {\n        if (this.div) {\n          return this.div;\n        }\n        let baseX, baseY;\n        if (this.width) {\n          baseX = this.x;\n          baseY = this.y;\n        }\n        super.render();\n        this.editorDiv = document.createElement(\"div\");\n        this.editorDiv.className = \"internal\";\n        this.editorDiv.setAttribute(\"id\", _classPrivateFieldGet(this, _editorDivId));\n        this.editorDiv.setAttribute(\"data-l10n-id\", \"pdfjs-free-text\");\n        this.enableEditing();\n        editor_editor.AnnotationEditor._l10nPromise.get(\"pdfjs-free-text-default-content\").then(msg => {\n          var _this$editorDiv;\n          return (_this$editorDiv = this.editorDiv) === null || _this$editorDiv === void 0 ? void 0 : _this$editorDiv.setAttribute(\"default-content\", msg);\n        });\n        this.editorDiv.contentEditable = true;\n        const {\n          style\n        } = this.editorDiv;\n        style.fontSize = \"calc(\".concat(_classPrivateFieldGet(this, _fontSize), \"px * var(--scale-factor))\");\n        style.color = _classPrivateFieldGet(this, _color2);\n        this.div.append(this.editorDiv);\n        this.overlayDiv = document.createElement(\"div\");\n        this.overlayDiv.classList.add(\"overlay\", \"enabled\");\n        this.div.append(this.overlayDiv);\n        (0, tools.bindEvents)(this, this.div, [\"dblclick\", \"keydown\"]);\n        if (this.width) {\n          const [parentWidth, parentHeight] = this.parentDimensions;\n          if (this.annotationElementId) {\n            const {\n              position\n            } = _classPrivateFieldGet(this, _initialData);\n            let [tx, ty] = this.getInitialTranslation();\n            [tx, ty] = this.pageTranslationToScreen(tx, ty);\n            const [pageWidth, pageHeight] = this.pageDimensions;\n            const [pageX, pageY] = this.pageTranslation;\n            let posX, posY;\n            switch (this.rotation) {\n              case 0:\n                posX = baseX + (position[0] - pageX) / pageWidth;\n                posY = baseY + this.height - (position[1] - pageY) / pageHeight;\n                break;\n              case 90:\n                posX = baseX + (position[0] - pageX) / pageWidth;\n                posY = baseY - (position[1] - pageY) / pageHeight;\n                [tx, ty] = [ty, -tx];\n                break;\n              case 180:\n                posX = baseX - this.width + (position[0] - pageX) / pageWidth;\n                posY = baseY - (position[1] - pageY) / pageHeight;\n                [tx, ty] = [-tx, -ty];\n                break;\n              case 270:\n                posX = baseX + (position[0] - pageX - this.height * pageHeight) / pageWidth;\n                posY = baseY + (position[1] - pageY - this.width * pageWidth) / pageHeight;\n                [tx, ty] = [-ty, tx];\n                break;\n            }\n            this.setAt(posX * parentWidth, posY * parentHeight, tx, ty);\n          } else {\n            this.setAt(baseX * parentWidth, baseY * parentHeight, this.width * parentWidth, this.height * parentHeight);\n          }\n          _classPrivateMethodGet(this, _setContent, _setContent2).call(this);\n          this._isDraggable = true;\n          this.editorDiv.contentEditable = false;\n        } else {\n          this._isDraggable = false;\n          this.editorDiv.contentEditable = true;\n        }\n        return this.div;\n      }\n      get contentDiv() {\n        return this.editorDiv;\n      }\n      static deserialize(data, parent, uiManager) {\n        let initialData = null;\n        if (data instanceof annotation_layer.FreeTextAnnotationElement) {\n          const {\n            data: {\n              defaultAppearanceData: {\n                fontSize,\n                fontColor\n              },\n              rect,\n              rotation,\n              id\n            },\n            textContent,\n            textPosition,\n            parent: {\n              page: {\n                pageNumber\n              }\n            }\n          } = data;\n          if (!textContent || textContent.length === 0) {\n            return null;\n          }\n          initialData = data = {\n            annotationType: util.AnnotationEditorType.FREETEXT,\n            color: Array.from(fontColor),\n            fontSize,\n            value: textContent.join(\"\\n\"),\n            position: textPosition,\n            pageIndex: pageNumber - 1,\n            rect,\n            rotation,\n            id,\n            deleted: false\n          };\n        }\n        const editor = super.deserialize(data, parent, uiManager);\n        _classPrivateFieldSet(editor, _fontSize, data.fontSize);\n        _classPrivateFieldSet(editor, _color2, util.Util.makeHexColor(...data.color));\n        _classPrivateFieldSet(editor, _content, data.value);\n        editor.annotationElementId = data.id || null;\n        _classPrivateFieldSet(editor, _initialData, initialData);\n        return editor;\n      }\n      serialize() {\n        let isForCopying = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n        if (this.isEmpty()) {\n          return null;\n        }\n        if (this.deleted) {\n          return {\n            pageIndex: this.pageIndex,\n            id: this.annotationElementId,\n            deleted: true\n          };\n        }\n        const padding = FreeTextEditor._internalPadding * this.parentScale;\n        const rect = this.getRect(padding, padding);\n        const color = editor_editor.AnnotationEditor._colorManager.convert(this.isAttachedToDOM ? getComputedStyle(this.editorDiv).color : _classPrivateFieldGet(this, _color2));\n        const serialized = {\n          annotationType: util.AnnotationEditorType.FREETEXT,\n          color,\n          fontSize: _classPrivateFieldGet(this, _fontSize),\n          value: _classPrivateFieldGet(this, _content),\n          pageIndex: this.pageIndex,\n          rect,\n          rotation: this.rotation,\n          structTreeParentId: this._structTreeParentId\n        };\n        if (isForCopying) {\n          return serialized;\n        }\n        if (this.annotationElementId && !_classPrivateMethodGet(this, _hasElementChanged, _hasElementChanged2).call(this, serialized)) {\n          return null;\n        }\n        serialized.id = this.annotationElementId;\n        return serialized;\n      }\n    }\n\n    // EXTERNAL MODULE: ./src/display/editor/color_picker.js\n    _FreeTextEditor = FreeTextEditor;\n    function _updateFontSize2(fontSize) {\n      const setFontsize = size => {\n        this.editorDiv.style.fontSize = \"calc(\".concat(size, \"px * var(--scale-factor))\");\n        this.translate(0, -(size - _classPrivateFieldGet(this, _fontSize)) * this.parentScale);\n        _classPrivateFieldSet(this, _fontSize, size);\n        _classPrivateMethodGet(this, _setEditorDimensions, _setEditorDimensions2).call(this);\n      };\n      const savedFontsize = _classPrivateFieldGet(this, _fontSize);\n      this.addCommands({\n        cmd: () => {\n          setFontsize(fontSize);\n        },\n        undo: () => {\n          setFontsize(savedFontsize);\n        },\n        mustExec: true,\n        type: util.AnnotationEditorParamsType.FREETEXT_SIZE,\n        overwriteIfSameType: true,\n        keepUndo: true\n      });\n    }\n    function _updateColor2(color) {\n      const savedColor = _classPrivateFieldGet(this, _color2);\n      this.addCommands({\n        cmd: () => {\n          _classPrivateFieldSet(this, _color2, this.editorDiv.style.color = color);\n        },\n        undo: () => {\n          _classPrivateFieldSet(this, _color2, this.editorDiv.style.color = savedColor);\n        },\n        mustExec: true,\n        type: util.AnnotationEditorParamsType.FREETEXT_COLOR,\n        overwriteIfSameType: true,\n        keepUndo: true\n      });\n    }\n    function _extractText2() {\n      const divs = this.editorDiv.getElementsByTagName(\"div\");\n      if (divs.length === 0) {\n        return this.editorDiv.innerText;\n      }\n      const buffer = [];\n      for (const div of divs) {\n        buffer.push(div.innerText.replace(/\\r\\n?|\\n/, \"\"));\n      }\n      return buffer.join(\"\\n\");\n    }\n    function _setEditorDimensions2() {\n      const [parentWidth, parentHeight] = this.parentDimensions;\n      let rect;\n      if (this.isAttachedToDOM) {\n        rect = this.div.getBoundingClientRect();\n      } else {\n        const {\n          currentLayer,\n          div\n        } = this;\n        const savedDisplay = div.style.display;\n        div.style.display = \"hidden\";\n        currentLayer.div.append(this.div);\n        rect = div.getBoundingClientRect();\n        div.remove();\n        div.style.display = savedDisplay;\n      }\n      if (this.rotation % 180 === this.parentRotation % 180) {\n        this.width = rect.width / parentWidth;\n        this.height = rect.height / parentHeight;\n      } else {\n        this.width = rect.height / parentWidth;\n        this.height = rect.width / parentHeight;\n      }\n      this.fixAndSetPosition();\n    }\n    function _setContent2() {\n      this.editorDiv.replaceChildren();\n      if (!_classPrivateFieldGet(this, _content)) {\n        return;\n      }\n      for (const line of _classPrivateFieldGet(this, _content).split(\"\\n\")) {\n        const div = document.createElement(\"div\");\n        div.append(line ? document.createTextNode(line) : document.createElement(\"br\"));\n        this.editorDiv.append(div);\n      }\n    }\n    function _hasElementChanged2(serialized) {\n      const {\n        value,\n        fontSize,\n        color,\n        rect,\n        pageIndex\n      } = _classPrivateFieldGet(this, _initialData);\n      return serialized.value !== value || serialized.fontSize !== fontSize || serialized.rect.some((x, i) => Math.abs(x - rect[i]) >= 1) || serialized.color.some((c, i) => c !== color[i]) || serialized.pageIndex !== pageIndex;\n    }\n    function _cheatInitialRect2() {\n      let delayed = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      if (!this.annotationElementId) {\n        return;\n      }\n      _classPrivateMethodGet(this, _setEditorDimensions, _setEditorDimensions2).call(this);\n      if (!delayed && (this.width === 0 || this.height === 0)) {\n        setTimeout(() => _classPrivateMethodGet(this, _cheatInitialRect, _cheatInitialRect2).call(this, true), 0);\n        return;\n      }\n      const padding = _FreeTextEditor._internalPadding * this.parentScale;\n      _classPrivateFieldGet(this, _initialData).rect = this.getRect(padding, padding);\n    }\n    _defineProperty(FreeTextEditor, \"_freeTextDefaultContent\", \"\");\n    _defineProperty(FreeTextEditor, \"_internalPadding\", 0);\n    _defineProperty(FreeTextEditor, \"_defaultColor\", null);\n    _defineProperty(FreeTextEditor, \"_defaultFontSize\", 10);\n    _defineProperty(FreeTextEditor, \"_type\", \"freetext\");\n    _defineProperty(FreeTextEditor, \"_editorType\", util.AnnotationEditorType.FREETEXT);\n    var color_picker = __webpack_require__(97);\n    // EXTERNAL MODULE: ./src/display/editor/outliner.js\n    var editor_outliner = __webpack_require__(405);\n    ; // CONCATENATED MODULE: ./src/display/editor/highlight.js\n    var _boxes = /*#__PURE__*/new WeakMap();\n    var _clipPathId = /*#__PURE__*/new WeakMap();\n    var _colorPicker = /*#__PURE__*/new WeakMap();\n    var _focusOutlines = /*#__PURE__*/new WeakMap();\n    var _highlightDiv = /*#__PURE__*/new WeakMap();\n    var _highlightOutlines = /*#__PURE__*/new WeakMap();\n    var _id3 = /*#__PURE__*/new WeakMap();\n    var _lastPoint = /*#__PURE__*/new WeakMap();\n    var _opacity = /*#__PURE__*/new WeakMap();\n    var _outlineId = /*#__PURE__*/new WeakMap();\n    var _createOutlines = /*#__PURE__*/new WeakSet();\n    var _updateColor3 = /*#__PURE__*/new WeakSet();\n    var _cleanDrawLayer = /*#__PURE__*/new WeakSet();\n    var _addToDrawLayer = /*#__PURE__*/new WeakSet();\n    var _serializeBoxes = /*#__PURE__*/new WeakSet();\n    var _serializeOutlines = /*#__PURE__*/new WeakSet();\n    class HighlightEditor extends editor_editor.AnnotationEditor {\n      constructor(params) {\n        var _this$_uiManager$high;\n        super({\n          ...params,\n          name: \"highlightEditor\"\n        });\n        _classPrivateMethodInitSpec(this, _serializeOutlines);\n        _classPrivateMethodInitSpec(this, _serializeBoxes);\n        _classPrivateMethodInitSpec(this, _addToDrawLayer);\n        _classPrivateMethodInitSpec(this, _cleanDrawLayer);\n        _classPrivateMethodInitSpec(this, _updateColor3);\n        _classPrivateMethodInitSpec(this, _createOutlines);\n        _classPrivateFieldInitSpec(this, _boxes, {\n          writable: true,\n          value: void 0\n        });\n        _classPrivateFieldInitSpec(this, _clipPathId, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _colorPicker, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _focusOutlines, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _highlightDiv, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _highlightOutlines, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _id3, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _lastPoint, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _opacity, {\n          writable: true,\n          value: void 0\n        });\n        _classPrivateFieldInitSpec(this, _outlineId, {\n          writable: true,\n          value: null\n        });\n        HighlightEditor._defaultColor || (HighlightEditor._defaultColor = ((_this$_uiManager$high = this._uiManager.highlightColors) === null || _this$_uiManager$high === void 0 ? void 0 : _this$_uiManager$high.values().next().value) || \"#fff066\");\n        this.color = params.color || HighlightEditor._defaultColor;\n        _classPrivateFieldSet(this, _opacity, params.opacity || HighlightEditor._defaultOpacity);\n        _classPrivateFieldSet(this, _boxes, params.boxes || null);\n        this._isDraggable = false;\n        _classPrivateMethodGet(this, _createOutlines, _createOutlines2).call(this);\n        _classPrivateMethodGet(this, _addToDrawLayer, _addToDrawLayer2).call(this);\n        this.rotate(this.rotation);\n      }\n      static initialize(l10n) {\n        editor_editor.AnnotationEditor.initialize(l10n);\n      }\n      static updateDefaultParams(type, value) {\n        switch (type) {\n          case util.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:\n            HighlightEditor._defaultColor = value;\n            break;\n        }\n      }\n      get toolbarPosition() {\n        return _classPrivateFieldGet(this, _lastPoint);\n      }\n      updateParams(type, value) {\n        switch (type) {\n          case util.AnnotationEditorParamsType.HIGHLIGHT_COLOR:\n            _classPrivateMethodGet(this, _updateColor3, _updateColor4).call(this, value);\n            break;\n        }\n      }\n      static get defaultPropertiesToUpdate() {\n        return [[util.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR, HighlightEditor._defaultColor]];\n      }\n      get propertiesToUpdate() {\n        return [[util.AnnotationEditorParamsType.HIGHLIGHT_COLOR, this.color || HighlightEditor._defaultColor]];\n      }\n      async addEditToolbar() {\n        const toolbar = await super.addEditToolbar();\n        if (!toolbar) {\n          return null;\n        }\n        if (this._uiManager.highlightColors) {\n          _classPrivateFieldSet(this, _colorPicker, new color_picker.ColorPicker({\n            editor: this\n          }));\n          toolbar.addColorPicker(_classPrivateFieldGet(this, _colorPicker));\n        }\n        return toolbar;\n      }\n      disableEditing() {\n        super.disableEditing();\n        this.div.classList.toggle(\"disabled\", true);\n      }\n      enableEditing() {\n        super.enableEditing();\n        this.div.classList.toggle(\"disabled\", false);\n      }\n      fixAndSetPosition() {\n        return super.fixAndSetPosition(0);\n      }\n      getRect(tx, ty) {\n        return super.getRect(tx, ty, 0);\n      }\n      onceAdded() {\n        this.parent.addUndoableEditor(this);\n        this.div.focus();\n      }\n      remove() {\n        super.remove();\n        _classPrivateMethodGet(this, _cleanDrawLayer, _cleanDrawLayer2).call(this);\n      }\n      rebuild() {\n        if (!this.parent) {\n          return;\n        }\n        super.rebuild();\n        if (this.div === null) {\n          return;\n        }\n        _classPrivateMethodGet(this, _addToDrawLayer, _addToDrawLayer2).call(this);\n        if (!this.isAttachedToDOM) {\n          this.parent.add(this);\n        }\n      }\n      setParent(parent) {\n        let mustBeSelected = false;\n        if (this.parent && !parent) {\n          _classPrivateMethodGet(this, _cleanDrawLayer, _cleanDrawLayer2).call(this);\n        } else if (parent) {\n          var _this$div;\n          _classPrivateMethodGet(this, _addToDrawLayer, _addToDrawLayer2).call(this, parent);\n          mustBeSelected = !this.parent && ((_this$div = this.div) === null || _this$div === void 0 ? void 0 : _this$div.classList.contains(\"selectedEditor\"));\n        }\n        super.setParent(parent);\n        if (mustBeSelected) {\n          this.select();\n        }\n      }\n      rotate(angle) {\n        const {\n          drawLayer\n        } = this.parent;\n        drawLayer.rotate(_classPrivateFieldGet(this, _id3), angle);\n        drawLayer.rotate(_classPrivateFieldGet(this, _outlineId), angle);\n        drawLayer.updateBox(_classPrivateFieldGet(this, _id3), _classStaticPrivateMethodGet(HighlightEditor, HighlightEditor, _rotateBbox).call(HighlightEditor, this, angle));\n        drawLayer.updateBox(_classPrivateFieldGet(this, _outlineId), _classStaticPrivateMethodGet(HighlightEditor, HighlightEditor, _rotateBbox).call(HighlightEditor, _classPrivateFieldGet(this, _focusOutlines).box, angle));\n      }\n      render() {\n        if (this.div) {\n          return this.div;\n        }\n        const div = super.render();\n        const highlightDiv = _classPrivateFieldSet(this, _highlightDiv, document.createElement(\"div\"));\n        div.append(highlightDiv);\n        highlightDiv.className = \"internal\";\n        highlightDiv.style.clipPath = _classPrivateFieldGet(this, _clipPathId);\n        const [parentWidth, parentHeight] = this.parentDimensions;\n        this.setDims(this.width * parentWidth, this.height * parentHeight);\n        (0, tools.bindEvents)(this, _classPrivateFieldGet(this, _highlightDiv), [\"pointerover\", \"pointerleave\"]);\n        this.enableEditing();\n        return div;\n      }\n      pointerover() {\n        this.parent.drawLayer.addClass(_classPrivateFieldGet(this, _outlineId), \"hovered\");\n      }\n      pointerleave() {\n        this.parent.drawLayer.removeClass(_classPrivateFieldGet(this, _outlineId), \"hovered\");\n      }\n      select() {\n        var _this$parent, _this$parent2;\n        super.select();\n        (_this$parent = this.parent) === null || _this$parent === void 0 || _this$parent.drawLayer.removeClass(_classPrivateFieldGet(this, _outlineId), \"hovered\");\n        (_this$parent2 = this.parent) === null || _this$parent2 === void 0 || _this$parent2.drawLayer.addClass(_classPrivateFieldGet(this, _outlineId), \"selected\");\n      }\n      unselect() {\n        var _this$parent3;\n        super.unselect();\n        (_this$parent3 = this.parent) === null || _this$parent3 === void 0 || _this$parent3.drawLayer.removeClass(_classPrivateFieldGet(this, _outlineId), \"selected\");\n      }\n      static deserialize(data, parent, uiManager) {\n        const editor = super.deserialize(data, parent, uiManager);\n        const {\n          rect,\n          color,\n          quadPoints\n        } = data;\n        editor.color = util.Util.makeHexColor(...color);\n        _classPrivateFieldSet(editor, _opacity, data.opacity);\n        const [pageWidth, pageHeight] = editor.pageDimensions;\n        editor.width = (rect[2] - rect[0]) / pageWidth;\n        editor.height = (rect[3] - rect[1]) / pageHeight;\n        const boxes = _classPrivateFieldSet(editor, _boxes, []);\n        for (let i = 0; i < quadPoints.length; i += 8) {\n          boxes.push({\n            x: quadPoints[4] / pageWidth,\n            y: 1 - quadPoints[i + 5] / pageHeight,\n            width: (quadPoints[i + 2] - quadPoints[i]) / pageWidth,\n            height: (quadPoints[i + 5] - quadPoints[i + 1]) / pageHeight\n          });\n        }\n        _classPrivateMethodGet(editor, _createOutlines, _createOutlines2).call(editor);\n        return editor;\n      }\n      serialize() {\n        let isForCopying = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n        if (this.isEmpty() || isForCopying) {\n          return null;\n        }\n        const rect = this.getRect(0, 0);\n        const color = editor_editor.AnnotationEditor._colorManager.convert(this.color);\n        return {\n          annotationType: util.AnnotationEditorType.HIGHLIGHT,\n          color,\n          opacity: _classPrivateFieldGet(this, _opacity),\n          quadPoints: _classPrivateMethodGet(this, _serializeBoxes, _serializeBoxes2).call(this),\n          outlines: _classPrivateMethodGet(this, _serializeOutlines, _serializeOutlines2).call(this),\n          pageIndex: this.pageIndex,\n          rect,\n          rotation: 0,\n          structTreeParentId: this._structTreeParentId\n        };\n      }\n      static canCreateNewEmptyEditor() {\n        return false;\n      }\n    }\n\n    // EXTERNAL MODULE: ./src/display/display_utils.js\n    function _createOutlines2() {\n      const outliner = new editor_outliner.Outliner(_classPrivateFieldGet(this, _boxes), 0.001);\n      _classPrivateFieldSet(this, _highlightOutlines, outliner.getOutlines());\n      ({\n        x: this.x,\n        y: this.y,\n        width: this.width,\n        height: this.height\n      } = _classPrivateFieldGet(this, _highlightOutlines).box);\n      const outlinerForOutline = new editor_outliner.Outliner(_classPrivateFieldGet(this, _boxes), 0.0025, 0.001, this._uiManager.direction === \"ltr\");\n      _classPrivateFieldSet(this, _focusOutlines, outlinerForOutline.getOutlines());\n      const {\n        lastPoint\n      } = _classPrivateFieldGet(this, _focusOutlines).box;\n      _classPrivateFieldSet(this, _lastPoint, [(lastPoint[0] - this.x) / this.width, (lastPoint[1] - this.y) / this.height]);\n    }\n    function _updateColor4(color) {\n      const savedColor = this.color;\n      this.addCommands({\n        cmd: () => {\n          var _classPrivateFieldGet19;\n          this.color = color;\n          this.parent.drawLayer.changeColor(_classPrivateFieldGet(this, _id3), color);\n          (_classPrivateFieldGet19 = _classPrivateFieldGet(this, _colorPicker)) === null || _classPrivateFieldGet19 === void 0 || _classPrivateFieldGet19.updateColor(color);\n        },\n        undo: () => {\n          var _classPrivateFieldGet20;\n          this.color = savedColor;\n          this.parent.drawLayer.changeColor(_classPrivateFieldGet(this, _id3), savedColor);\n          (_classPrivateFieldGet20 = _classPrivateFieldGet(this, _colorPicker)) === null || _classPrivateFieldGet20 === void 0 || _classPrivateFieldGet20.updateColor(savedColor);\n        },\n        mustExec: true,\n        type: util.AnnotationEditorParamsType.HIGHLIGHT_COLOR,\n        overwriteIfSameType: true,\n        keepUndo: true\n      });\n    }\n    function _cleanDrawLayer2() {\n      if (_classPrivateFieldGet(this, _id3) === null || !this.parent) {\n        return;\n      }\n      this.parent.drawLayer.remove(_classPrivateFieldGet(this, _id3));\n      _classPrivateFieldSet(this, _id3, null);\n      this.parent.drawLayer.remove(_classPrivateFieldGet(this, _outlineId));\n      _classPrivateFieldSet(this, _outlineId, null);\n    }\n    function _addToDrawLayer2() {\n      let parent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.parent;\n      if (_classPrivateFieldGet(this, _id3) !== null) {\n        return;\n      }\n      ({\n        id: _classPrivateFieldDestructureSet(this, _id3).value,\n        clipPathId: _classPrivateFieldDestructureSet(this, _clipPathId).value\n      } = parent.drawLayer.highlight(_classPrivateFieldGet(this, _highlightOutlines), this.color, _classPrivateFieldGet(this, _opacity)));\n      if (_classPrivateFieldGet(this, _highlightDiv)) {\n        _classPrivateFieldGet(this, _highlightDiv).style.clipPath = _classPrivateFieldGet(this, _clipPathId);\n      }\n      _classPrivateFieldSet(this, _outlineId, parent.drawLayer.highlightOutline(_classPrivateFieldGet(this, _focusOutlines)));\n    }\n    function _rotateBbox(_ref46, angle) {\n      let {\n        x,\n        y,\n        width,\n        height\n      } = _ref46;\n      switch (angle) {\n        case 90:\n          return {\n            x: 1 - y - height,\n            y: x,\n            width: height,\n            height: width\n          };\n        case 180:\n          return {\n            x: 1 - x - width,\n            y: 1 - y - height,\n            width,\n            height\n          };\n        case 270:\n          return {\n            x: y,\n            y: 1 - x - width,\n            width: height,\n            height: width\n          };\n      }\n      return {\n        x,\n        y,\n        width,\n        height\n      };\n    }\n    function _serializeBoxes2() {\n      const [pageWidth, pageHeight] = this.pageDimensions;\n      const boxes = _classPrivateFieldGet(this, _boxes);\n      const quadPoints = new Array(boxes.length * 8);\n      let i = 0;\n      for (const {\n        x,\n        y,\n        width,\n        height\n      } of boxes) {\n        const sx = x * pageWidth;\n        const sy = (1 - y - height) * pageHeight;\n        quadPoints[i] = quadPoints[i + 4] = sx;\n        quadPoints[i + 1] = quadPoints[i + 3] = sy;\n        quadPoints[i + 2] = quadPoints[i + 6] = sx + width * pageWidth;\n        quadPoints[i + 5] = quadPoints[i + 7] = sy + height * pageHeight;\n        i += 8;\n      }\n      return quadPoints;\n    }\n    function _serializeOutlines2() {\n      const [pageWidth, pageHeight] = this.pageDimensions;\n      const width = this.width * pageWidth;\n      const height = this.height * pageHeight;\n      const tx = this.x * pageWidth;\n      const ty = (1 - this.y - this.height) * pageHeight;\n      const outlines = [];\n      for (const outline of _classPrivateFieldGet(this, _highlightOutlines).outlines) {\n        const points = new Array(outline.length);\n        for (let i = 0; i < outline.length; i += 2) {\n          points[i] = tx + outline[i] * width;\n          points[i + 1] = ty + (1 - outline[i + 1]) * height;\n        }\n        outlines.push(points);\n      }\n      return outlines;\n    }\n    _defineProperty(HighlightEditor, \"_defaultColor\", null);\n    _defineProperty(HighlightEditor, \"_defaultOpacity\", 1);\n    _defineProperty(HighlightEditor, \"_l10nPromise\", void 0);\n    _defineProperty(HighlightEditor, \"_type\", \"highlight\");\n    _defineProperty(HighlightEditor, \"_editorType\", util.AnnotationEditorType.HIGHLIGHT);\n    var display_utils = __webpack_require__(473);\n    ; // CONCATENATED MODULE: ./src/display/editor/ink.js\n    var _baseHeight = /*#__PURE__*/new WeakMap();\n    var _baseWidth = /*#__PURE__*/new WeakMap();\n    var _boundCanvasPointermove = /*#__PURE__*/new WeakMap();\n    var _boundCanvasPointerleave = /*#__PURE__*/new WeakMap();\n    var _boundCanvasPointerup = /*#__PURE__*/new WeakMap();\n    var _boundCanvasPointerdown = /*#__PURE__*/new WeakMap();\n    var _canvasContextMenuTimeoutId = /*#__PURE__*/new WeakMap();\n    var _currentPath2D = /*#__PURE__*/new WeakMap();\n    var _disableEditing = /*#__PURE__*/new WeakMap();\n    var _hasSomethingToDraw = /*#__PURE__*/new WeakMap();\n    var _isCanvasInitialized = /*#__PURE__*/new WeakMap();\n    var _observer = /*#__PURE__*/new WeakMap();\n    var _realWidth = /*#__PURE__*/new WeakMap();\n    var _realHeight = /*#__PURE__*/new WeakMap();\n    var _requestFrameCallback = /*#__PURE__*/new WeakMap();\n    var _updateThickness = /*#__PURE__*/new WeakSet();\n    var _updateColor5 = /*#__PURE__*/new WeakSet();\n    var _updateOpacity = /*#__PURE__*/new WeakSet();\n    var _getInitialBBox = /*#__PURE__*/new WeakSet();\n    var _setStroke = /*#__PURE__*/new WeakSet();\n    var _startDrawing = /*#__PURE__*/new WeakSet();\n    var _draw = /*#__PURE__*/new WeakSet();\n    var _endPath = /*#__PURE__*/new WeakSet();\n    var _stopDrawing = /*#__PURE__*/new WeakSet();\n    var _drawPoints = /*#__PURE__*/new WeakSet();\n    var _makeBezierCurve = /*#__PURE__*/new WeakSet();\n    var _generateBezierPoints = /*#__PURE__*/new WeakSet();\n    var _redraw = /*#__PURE__*/new WeakSet();\n    var _endDrawing = /*#__PURE__*/new WeakSet();\n    var _createCanvas = /*#__PURE__*/new WeakSet();\n    var _createObserver = /*#__PURE__*/new WeakSet();\n    var _setCanvasDims = /*#__PURE__*/new WeakSet();\n    var _setScaleFactor = /*#__PURE__*/new WeakSet();\n    var _updateTransform = /*#__PURE__*/new WeakSet();\n    var _serializePaths = /*#__PURE__*/new WeakSet();\n    var _getBbox = /*#__PURE__*/new WeakSet();\n    var _getPadding = /*#__PURE__*/new WeakSet();\n    var _fitToContent = /*#__PURE__*/new WeakSet();\n    class InkEditor extends editor_editor.AnnotationEditor {\n      constructor(params) {\n        super({\n          ...params,\n          name: \"inkEditor\"\n        });\n        _classPrivateMethodInitSpec(this, _fitToContent);\n        _classPrivateMethodInitSpec(this, _getPadding);\n        _classPrivateMethodInitSpec(this, _getBbox);\n        _classPrivateMethodInitSpec(this, _serializePaths);\n        _classPrivateMethodInitSpec(this, _updateTransform);\n        _classPrivateMethodInitSpec(this, _setScaleFactor);\n        _classPrivateMethodInitSpec(this, _setCanvasDims);\n        _classPrivateMethodInitSpec(this, _createObserver);\n        _classPrivateMethodInitSpec(this, _createCanvas);\n        _classPrivateMethodInitSpec(this, _endDrawing);\n        _classPrivateMethodInitSpec(this, _redraw);\n        _classPrivateMethodInitSpec(this, _generateBezierPoints);\n        _classPrivateMethodInitSpec(this, _makeBezierCurve);\n        _classPrivateMethodInitSpec(this, _drawPoints);\n        _classPrivateMethodInitSpec(this, _stopDrawing);\n        _classPrivateMethodInitSpec(this, _endPath);\n        _classPrivateMethodInitSpec(this, _draw);\n        _classPrivateMethodInitSpec(this, _startDrawing);\n        _classPrivateMethodInitSpec(this, _setStroke);\n        _classPrivateMethodInitSpec(this, _getInitialBBox);\n        _classPrivateMethodInitSpec(this, _updateOpacity);\n        _classPrivateMethodInitSpec(this, _updateColor5);\n        _classPrivateMethodInitSpec(this, _updateThickness);\n        _classPrivateFieldInitSpec(this, _baseHeight, {\n          writable: true,\n          value: 0\n        });\n        _classPrivateFieldInitSpec(this, _baseWidth, {\n          writable: true,\n          value: 0\n        });\n        _classPrivateFieldInitSpec(this, _boundCanvasPointermove, {\n          writable: true,\n          value: this.canvasPointermove.bind(this)\n        });\n        _classPrivateFieldInitSpec(this, _boundCanvasPointerleave, {\n          writable: true,\n          value: this.canvasPointerleave.bind(this)\n        });\n        _classPrivateFieldInitSpec(this, _boundCanvasPointerup, {\n          writable: true,\n          value: this.canvasPointerup.bind(this)\n        });\n        _classPrivateFieldInitSpec(this, _boundCanvasPointerdown, {\n          writable: true,\n          value: this.canvasPointerdown.bind(this)\n        });\n        _classPrivateFieldInitSpec(this, _canvasContextMenuTimeoutId, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _currentPath2D, {\n          writable: true,\n          value: new Path2D()\n        });\n        _classPrivateFieldInitSpec(this, _disableEditing, {\n          writable: true,\n          value: false\n        });\n        _classPrivateFieldInitSpec(this, _hasSomethingToDraw, {\n          writable: true,\n          value: false\n        });\n        _classPrivateFieldInitSpec(this, _isCanvasInitialized, {\n          writable: true,\n          value: false\n        });\n        _classPrivateFieldInitSpec(this, _observer, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _realWidth, {\n          writable: true,\n          value: 0\n        });\n        _classPrivateFieldInitSpec(this, _realHeight, {\n          writable: true,\n          value: 0\n        });\n        _classPrivateFieldInitSpec(this, _requestFrameCallback, {\n          writable: true,\n          value: null\n        });\n        this.color = params.color || null;\n        this.thickness = params.thickness || null;\n        this.opacity = params.opacity || null;\n        this.paths = [];\n        this.bezierPath2D = [];\n        this.allRawPaths = [];\n        this.currentPath = [];\n        this.scaleFactor = 1;\n        this.translationX = this.translationY = 0;\n        this.x = 0;\n        this.y = 0;\n        this._willKeepAspectRatio = true;\n      }\n      static initialize(l10n) {\n        editor_editor.AnnotationEditor.initialize(l10n);\n      }\n      static updateDefaultParams(type, value) {\n        switch (type) {\n          case util.AnnotationEditorParamsType.INK_THICKNESS:\n            InkEditor._defaultThickness = value;\n            break;\n          case util.AnnotationEditorParamsType.INK_COLOR:\n            InkEditor._defaultColor = value;\n            break;\n          case util.AnnotationEditorParamsType.INK_OPACITY:\n            InkEditor._defaultOpacity = value / 100;\n            break;\n        }\n      }\n      updateParams(type, value) {\n        switch (type) {\n          case util.AnnotationEditorParamsType.INK_THICKNESS:\n            _classPrivateMethodGet(this, _updateThickness, _updateThickness2).call(this, value);\n            break;\n          case util.AnnotationEditorParamsType.INK_COLOR:\n            _classPrivateMethodGet(this, _updateColor5, _updateColor6).call(this, value);\n            break;\n          case util.AnnotationEditorParamsType.INK_OPACITY:\n            _classPrivateMethodGet(this, _updateOpacity, _updateOpacity2).call(this, value);\n            break;\n        }\n      }\n      static get defaultPropertiesToUpdate() {\n        return [[util.AnnotationEditorParamsType.INK_THICKNESS, InkEditor._defaultThickness], [util.AnnotationEditorParamsType.INK_COLOR, InkEditor._defaultColor || editor_editor.AnnotationEditor._defaultLineColor], [util.AnnotationEditorParamsType.INK_OPACITY, Math.round(InkEditor._defaultOpacity * 100)]];\n      }\n      get propertiesToUpdate() {\n        var _this$opacity;\n        return [[util.AnnotationEditorParamsType.INK_THICKNESS, this.thickness || InkEditor._defaultThickness], [util.AnnotationEditorParamsType.INK_COLOR, this.color || InkEditor._defaultColor || editor_editor.AnnotationEditor._defaultLineColor], [util.AnnotationEditorParamsType.INK_OPACITY, Math.round(100 * ((_this$opacity = this.opacity) !== null && _this$opacity !== void 0 ? _this$opacity : InkEditor._defaultOpacity))]];\n      }\n      rebuild() {\n        if (!this.parent) {\n          return;\n        }\n        super.rebuild();\n        if (this.div === null) {\n          return;\n        }\n        if (!this.canvas) {\n          _classPrivateMethodGet(this, _createCanvas, _createCanvas2).call(this);\n          _classPrivateMethodGet(this, _createObserver, _createObserver2).call(this);\n        }\n        if (!this.isAttachedToDOM) {\n          this.parent.add(this);\n          _classPrivateMethodGet(this, _setCanvasDims, _setCanvasDims2).call(this);\n        }\n        _classPrivateMethodGet(this, _fitToContent, _fitToContent2).call(this);\n      }\n      remove() {\n        if (this.canvas === null) {\n          return;\n        }\n        if (!this.isEmpty()) {\n          this.commit();\n        }\n        this.canvas.width = this.canvas.height = 0;\n        this.canvas.remove();\n        this.canvas = null;\n        if (_classPrivateFieldGet(this, _canvasContextMenuTimeoutId)) {\n          clearTimeout(_classPrivateFieldGet(this, _canvasContextMenuTimeoutId));\n          _classPrivateFieldSet(this, _canvasContextMenuTimeoutId, null);\n        }\n        _classPrivateFieldGet(this, _observer).disconnect();\n        _classPrivateFieldSet(this, _observer, null);\n        super.remove();\n      }\n      setParent(parent) {\n        if (!this.parent && parent) {\n          this._uiManager.removeShouldRescale(this);\n        } else if (this.parent && parent === null) {\n          this._uiManager.addShouldRescale(this);\n        }\n        super.setParent(parent);\n      }\n      onScaleChanging() {\n        const [parentWidth, parentHeight] = this.parentDimensions;\n        const width = this.width * parentWidth;\n        const height = this.height * parentHeight;\n        this.setDimensions(width, height);\n      }\n      enableEditMode() {\n        if (_classPrivateFieldGet(this, _disableEditing) || this.canvas === null) {\n          return;\n        }\n        super.enableEditMode();\n        this._isDraggable = false;\n        this.canvas.addEventListener(\"pointerdown\", _classPrivateFieldGet(this, _boundCanvasPointerdown));\n      }\n      disableEditMode() {\n        if (!this.isInEditMode() || this.canvas === null) {\n          return;\n        }\n        super.disableEditMode();\n        this._isDraggable = !this.isEmpty();\n        this.div.classList.remove(\"editing\");\n        this.canvas.removeEventListener(\"pointerdown\", _classPrivateFieldGet(this, _boundCanvasPointerdown));\n      }\n      onceAdded() {\n        this._isDraggable = !this.isEmpty();\n      }\n      isEmpty() {\n        return this.paths.length === 0 || this.paths.length === 1 && this.paths[0].length === 0;\n      }\n      commit() {\n        if (_classPrivateFieldGet(this, _disableEditing)) {\n          return;\n        }\n        super.commit();\n        this.isEditing = false;\n        this.disableEditMode();\n        this.setInForeground();\n        _classPrivateFieldSet(this, _disableEditing, true);\n        this.div.classList.add(\"disabled\");\n        _classPrivateMethodGet(this, _fitToContent, _fitToContent2).call(this, true);\n        this.select();\n        this.parent.addInkEditorIfNeeded(true);\n        this.moveInDOM();\n        this.div.focus({\n          preventScroll: true\n        });\n      }\n      focusin(event) {\n        if (!this._focusEventsAllowed) {\n          return;\n        }\n        super.focusin(event);\n        this.enableEditMode();\n      }\n      canvasPointerdown(event) {\n        if (event.button !== 0 || !this.isInEditMode() || _classPrivateFieldGet(this, _disableEditing)) {\n          return;\n        }\n        this.setInForeground();\n        event.preventDefault();\n        if (!this.div.contains(document.activeElement)) {\n          this.div.focus({\n            preventScroll: true\n          });\n        }\n        _classPrivateMethodGet(this, _startDrawing, _startDrawing2).call(this, event.offsetX, event.offsetY);\n      }\n      canvasPointermove(event) {\n        event.preventDefault();\n        _classPrivateMethodGet(this, _draw, _draw2).call(this, event.offsetX, event.offsetY);\n      }\n      canvasPointerup(event) {\n        event.preventDefault();\n        _classPrivateMethodGet(this, _endDrawing, _endDrawing2).call(this, event);\n      }\n      canvasPointerleave(event) {\n        _classPrivateMethodGet(this, _endDrawing, _endDrawing2).call(this, event);\n      }\n      get isResizable() {\n        return !this.isEmpty() && _classPrivateFieldGet(this, _disableEditing);\n      }\n      render() {\n        if (this.div) {\n          return this.div;\n        }\n        let baseX, baseY;\n        if (this.width) {\n          baseX = this.x;\n          baseY = this.y;\n        }\n        super.render();\n        this.div.setAttribute(\"data-l10n-id\", \"pdfjs-ink\");\n        const [x, y, w, h] = _classPrivateMethodGet(this, _getInitialBBox, _getInitialBBox2).call(this);\n        this.setAt(x, y, 0, 0);\n        this.setDims(w, h);\n        _classPrivateMethodGet(this, _createCanvas, _createCanvas2).call(this);\n        if (this.width) {\n          const [parentWidth, parentHeight] = this.parentDimensions;\n          this.setAspectRatio(this.width * parentWidth, this.height * parentHeight);\n          this.setAt(baseX * parentWidth, baseY * parentHeight, this.width * parentWidth, this.height * parentHeight);\n          _classPrivateFieldSet(this, _isCanvasInitialized, true);\n          _classPrivateMethodGet(this, _setCanvasDims, _setCanvasDims2).call(this);\n          this.setDims(this.width * parentWidth, this.height * parentHeight);\n          _classPrivateMethodGet(this, _redraw, _redraw2).call(this);\n          this.div.classList.add(\"disabled\");\n        } else {\n          this.div.classList.add(\"editing\");\n          this.enableEditMode();\n        }\n        _classPrivateMethodGet(this, _createObserver, _createObserver2).call(this);\n        return this.div;\n      }\n      setDimensions(width, height) {\n        const roundedWidth = Math.round(width);\n        const roundedHeight = Math.round(height);\n        if (_classPrivateFieldGet(this, _realWidth) === roundedWidth && _classPrivateFieldGet(this, _realHeight) === roundedHeight) {\n          return;\n        }\n        _classPrivateFieldSet(this, _realWidth, roundedWidth);\n        _classPrivateFieldSet(this, _realHeight, roundedHeight);\n        this.canvas.style.visibility = \"hidden\";\n        const [parentWidth, parentHeight] = this.parentDimensions;\n        this.width = width / parentWidth;\n        this.height = height / parentHeight;\n        this.fixAndSetPosition();\n        if (_classPrivateFieldGet(this, _disableEditing)) {\n          _classPrivateMethodGet(this, _setScaleFactor, _setScaleFactor2).call(this, width, height);\n        }\n        _classPrivateMethodGet(this, _setCanvasDims, _setCanvasDims2).call(this);\n        _classPrivateMethodGet(this, _redraw, _redraw2).call(this);\n        this.canvas.style.visibility = \"visible\";\n        this.fixDims();\n      }\n      static deserialize(data, parent, uiManager) {\n        if (data instanceof annotation_layer.InkAnnotationElement) {\n          return null;\n        }\n        const editor = super.deserialize(data, parent, uiManager);\n        editor.thickness = data.thickness;\n        editor.color = util.Util.makeHexColor(...data.color);\n        editor.opacity = data.opacity;\n        const [pageWidth, pageHeight] = editor.pageDimensions;\n        const width = editor.width * pageWidth;\n        const height = editor.height * pageHeight;\n        const scaleFactor = editor.parentScale;\n        const padding = data.thickness / 2;\n        _classPrivateFieldSet(editor, _disableEditing, true);\n        _classPrivateFieldSet(editor, _realWidth, Math.round(width));\n        _classPrivateFieldSet(editor, _realHeight, Math.round(height));\n        const {\n          paths,\n          rect,\n          rotation\n        } = data;\n        for (let {\n          bezier\n        } of paths) {\n          bezier = _classStaticPrivateMethodGet(InkEditor, InkEditor, _fromPDFCoordinates).call(InkEditor, bezier, rect, rotation);\n          const path = [];\n          editor.paths.push(path);\n          let p0 = scaleFactor * (bezier[0] - padding);\n          let p1 = scaleFactor * (bezier[1] - padding);\n          for (let i = 2, ii = bezier.length; i < ii; i += 6) {\n            const p10 = scaleFactor * (bezier[i] - padding);\n            const p11 = scaleFactor * (bezier[i + 1] - padding);\n            const p20 = scaleFactor * (bezier[i + 2] - padding);\n            const p21 = scaleFactor * (bezier[i + 3] - padding);\n            const p30 = scaleFactor * (bezier[i + 4] - padding);\n            const p31 = scaleFactor * (bezier[i + 5] - padding);\n            path.push([[p0, p1], [p10, p11], [p20, p21], [p30, p31]]);\n            p0 = p30;\n            p1 = p31;\n          }\n          const path2D = _classStaticPrivateMethodGet(this, InkEditor, _buildPath2D).call(this, path);\n          editor.bezierPath2D.push(path2D);\n        }\n        const bbox = _classPrivateMethodGet(editor, _getBbox, _getBbox2).call(editor);\n        _classPrivateFieldSet(editor, _baseWidth, Math.max(editor_editor.AnnotationEditor.MIN_SIZE, bbox[2] - bbox[0]));\n        _classPrivateFieldSet(editor, _baseHeight, Math.max(editor_editor.AnnotationEditor.MIN_SIZE, bbox[3] - bbox[1]));\n        _classPrivateMethodGet(editor, _setScaleFactor, _setScaleFactor2).call(editor, width, height);\n        return editor;\n      }\n      serialize() {\n        if (this.isEmpty()) {\n          return null;\n        }\n        const rect = this.getRect(0, 0);\n        const color = editor_editor.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);\n        return {\n          annotationType: util.AnnotationEditorType.INK,\n          color,\n          thickness: this.thickness,\n          opacity: this.opacity,\n          paths: _classPrivateMethodGet(this, _serializePaths, _serializePaths2).call(this, this.scaleFactor / this.parentScale, this.translationX, this.translationY, rect),\n          pageIndex: this.pageIndex,\n          rect,\n          rotation: this.rotation,\n          structTreeParentId: this._structTreeParentId\n        };\n      }\n    }\n    _InkEditor = InkEditor;\n    function _updateThickness2(thickness) {\n      const savedThickness = this.thickness;\n      this.addCommands({\n        cmd: () => {\n          this.thickness = thickness;\n          _classPrivateMethodGet(this, _fitToContent, _fitToContent2).call(this);\n        },\n        undo: () => {\n          this.thickness = savedThickness;\n          _classPrivateMethodGet(this, _fitToContent, _fitToContent2).call(this);\n        },\n        mustExec: true,\n        type: util.AnnotationEditorParamsType.INK_THICKNESS,\n        overwriteIfSameType: true,\n        keepUndo: true\n      });\n    }\n    function _updateColor6(color) {\n      const savedColor = this.color;\n      this.addCommands({\n        cmd: () => {\n          this.color = color;\n          _classPrivateMethodGet(this, _redraw, _redraw2).call(this);\n        },\n        undo: () => {\n          this.color = savedColor;\n          _classPrivateMethodGet(this, _redraw, _redraw2).call(this);\n        },\n        mustExec: true,\n        type: util.AnnotationEditorParamsType.INK_COLOR,\n        overwriteIfSameType: true,\n        keepUndo: true\n      });\n    }\n    function _updateOpacity2(opacity) {\n      opacity /= 100;\n      const savedOpacity = this.opacity;\n      this.addCommands({\n        cmd: () => {\n          this.opacity = opacity;\n          _classPrivateMethodGet(this, _redraw, _redraw2).call(this);\n        },\n        undo: () => {\n          this.opacity = savedOpacity;\n          _classPrivateMethodGet(this, _redraw, _redraw2).call(this);\n        },\n        mustExec: true,\n        type: util.AnnotationEditorParamsType.INK_OPACITY,\n        overwriteIfSameType: true,\n        keepUndo: true\n      });\n    }\n    function _getInitialBBox2() {\n      const {\n        parentRotation,\n        parentDimensions: [width, height]\n      } = this;\n      switch (parentRotation) {\n        case 90:\n          return [0, height, height, width];\n        case 180:\n          return [width, height, width, height];\n        case 270:\n          return [width, 0, height, width];\n        default:\n          return [0, 0, width, height];\n      }\n    }\n    function _setStroke2() {\n      const {\n        ctx,\n        color,\n        opacity,\n        thickness,\n        parentScale,\n        scaleFactor\n      } = this;\n      ctx.lineWidth = thickness * parentScale / scaleFactor;\n      ctx.lineCap = \"round\";\n      ctx.lineJoin = \"round\";\n      ctx.miterLimit = 10;\n      ctx.strokeStyle = \"\".concat(color).concat((0, tools.opacityToHex)(opacity));\n    }\n    function _startDrawing2(x, y) {\n      this.canvas.addEventListener(\"contextmenu\", display_utils.noContextMenu);\n      this.canvas.addEventListener(\"pointerleave\", _classPrivateFieldGet(this, _boundCanvasPointerleave));\n      this.canvas.addEventListener(\"pointermove\", _classPrivateFieldGet(this, _boundCanvasPointermove));\n      this.canvas.addEventListener(\"pointerup\", _classPrivateFieldGet(this, _boundCanvasPointerup));\n      this.canvas.removeEventListener(\"pointerdown\", _classPrivateFieldGet(this, _boundCanvasPointerdown));\n      this.isEditing = true;\n      if (!_classPrivateFieldGet(this, _isCanvasInitialized)) {\n        var _this$opacity2;\n        _classPrivateFieldSet(this, _isCanvasInitialized, true);\n        _classPrivateMethodGet(this, _setCanvasDims, _setCanvasDims2).call(this);\n        this.thickness || (this.thickness = _InkEditor._defaultThickness);\n        this.color || (this.color = _InkEditor._defaultColor || editor_editor.AnnotationEditor._defaultLineColor);\n        (_this$opacity2 = this.opacity) !== null && _this$opacity2 !== void 0 ? _this$opacity2 : this.opacity = _InkEditor._defaultOpacity;\n      }\n      this.currentPath.push([x, y]);\n      _classPrivateFieldSet(this, _hasSomethingToDraw, false);\n      _classPrivateMethodGet(this, _setStroke, _setStroke2).call(this);\n      _classPrivateFieldSet(this, _requestFrameCallback, () => {\n        _classPrivateMethodGet(this, _drawPoints, _drawPoints2).call(this);\n        if (_classPrivateFieldGet(this, _requestFrameCallback)) {\n          window.requestAnimationFrame(_classPrivateFieldGet(this, _requestFrameCallback));\n        }\n      });\n      window.requestAnimationFrame(_classPrivateFieldGet(this, _requestFrameCallback));\n    }\n    function _draw2(x, y) {\n      const [lastX, lastY] = this.currentPath.at(-1);\n      if (this.currentPath.length > 1 && x === lastX && y === lastY) {\n        return;\n      }\n      const currentPath = this.currentPath;\n      let path2D = _classPrivateFieldGet(this, _currentPath2D);\n      currentPath.push([x, y]);\n      _classPrivateFieldSet(this, _hasSomethingToDraw, true);\n      if (currentPath.length <= 2) {\n        path2D.moveTo(...currentPath[0]);\n        path2D.lineTo(x, y);\n        return;\n      }\n      if (currentPath.length === 3) {\n        _classPrivateFieldSet(this, _currentPath2D, path2D = new Path2D());\n        path2D.moveTo(...currentPath[0]);\n      }\n      _classPrivateMethodGet(this, _makeBezierCurve, _makeBezierCurve2).call(this, path2D, ...currentPath.at(-3), ...currentPath.at(-2), x, y);\n    }\n    function _endPath2() {\n      if (this.currentPath.length === 0) {\n        return;\n      }\n      const lastPoint = this.currentPath.at(-1);\n      _classPrivateFieldGet(this, _currentPath2D).lineTo(...lastPoint);\n    }\n    function _stopDrawing2(x, y) {\n      _classPrivateFieldSet(this, _requestFrameCallback, null);\n      x = Math.min(Math.max(x, 0), this.canvas.width);\n      y = Math.min(Math.max(y, 0), this.canvas.height);\n      _classPrivateMethodGet(this, _draw, _draw2).call(this, x, y);\n      _classPrivateMethodGet(this, _endPath, _endPath2).call(this);\n      let bezier;\n      if (this.currentPath.length !== 1) {\n        bezier = _classPrivateMethodGet(this, _generateBezierPoints, _generateBezierPoints2).call(this);\n      } else {\n        const xy = [x, y];\n        bezier = [[xy, xy.slice(), xy.slice(), xy]];\n      }\n      const path2D = _classPrivateFieldGet(this, _currentPath2D);\n      const currentPath = this.currentPath;\n      this.currentPath = [];\n      _classPrivateFieldSet(this, _currentPath2D, new Path2D());\n      const cmd = () => {\n        this.allRawPaths.push(currentPath);\n        this.paths.push(bezier);\n        this.bezierPath2D.push(path2D);\n        this.rebuild();\n      };\n      const undo = () => {\n        this.allRawPaths.pop();\n        this.paths.pop();\n        this.bezierPath2D.pop();\n        if (this.paths.length === 0) {\n          this.remove();\n        } else {\n          if (!this.canvas) {\n            _classPrivateMethodGet(this, _createCanvas, _createCanvas2).call(this);\n            _classPrivateMethodGet(this, _createObserver, _createObserver2).call(this);\n          }\n          _classPrivateMethodGet(this, _fitToContent, _fitToContent2).call(this);\n        }\n      };\n      this.addCommands({\n        cmd,\n        undo,\n        mustExec: true\n      });\n    }\n    function _drawPoints2() {\n      if (!_classPrivateFieldGet(this, _hasSomethingToDraw)) {\n        return;\n      }\n      _classPrivateFieldSet(this, _hasSomethingToDraw, false);\n      const thickness = Math.ceil(this.thickness * this.parentScale);\n      const lastPoints = this.currentPath.slice(-3);\n      const x = lastPoints.map(xy => xy[0]);\n      const y = lastPoints.map(xy => xy[1]);\n      const xMin = Math.min(...x) - thickness;\n      const xMax = Math.max(...x) + thickness;\n      const yMin = Math.min(...y) - thickness;\n      const yMax = Math.max(...y) + thickness;\n      const {\n        ctx\n      } = this;\n      ctx.save();\n      ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n      for (const path of this.bezierPath2D) {\n        ctx.stroke(path);\n      }\n      ctx.stroke(_classPrivateFieldGet(this, _currentPath2D));\n      ctx.restore();\n    }\n    function _makeBezierCurve2(path2D, x0, y0, x1, y1, x2, y2) {\n      const prevX = (x0 + x1) / 2;\n      const prevY = (y0 + y1) / 2;\n      const x3 = (x1 + x2) / 2;\n      const y3 = (y1 + y2) / 2;\n      path2D.bezierCurveTo(prevX + 2 * (x1 - prevX) / 3, prevY + 2 * (y1 - prevY) / 3, x3 + 2 * (x1 - x3) / 3, y3 + 2 * (y1 - y3) / 3, x3, y3);\n    }\n    function _generateBezierPoints2() {\n      const path = this.currentPath;\n      if (path.length <= 2) {\n        return [[path[0], path[0], path.at(-1), path.at(-1)]];\n      }\n      const bezierPoints = [];\n      let i;\n      let [x0, y0] = path[0];\n      for (i = 1; i < path.length - 2; i++) {\n        const [x1, y1] = path[i];\n        const [x2, y2] = path[i + 1];\n        const x3 = (x1 + x2) / 2;\n        const y3 = (y1 + y2) / 2;\n        const control1 = [x0 + 2 * (x1 - x0) / 3, y0 + 2 * (y1 - y0) / 3];\n        const control2 = [x3 + 2 * (x1 - x3) / 3, y3 + 2 * (y1 - y3) / 3];\n        bezierPoints.push([[x0, y0], control1, control2, [x3, y3]]);\n        [x0, y0] = [x3, y3];\n      }\n      const [x1, y1] = path[i];\n      const [x2, y2] = path[i + 1];\n      const control1 = [x0 + 2 * (x1 - x0) / 3, y0 + 2 * (y1 - y0) / 3];\n      const control2 = [x2 + 2 * (x1 - x2) / 3, y2 + 2 * (y1 - y2) / 3];\n      bezierPoints.push([[x0, y0], control1, control2, [x2, y2]]);\n      return bezierPoints;\n    }\n    function _redraw2() {\n      if (this.isEmpty()) {\n        _classPrivateMethodGet(this, _updateTransform, _updateTransform2).call(this);\n        return;\n      }\n      _classPrivateMethodGet(this, _setStroke, _setStroke2).call(this);\n      const {\n        canvas,\n        ctx\n      } = this;\n      ctx.setTransform(1, 0, 0, 1, 0, 0);\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      _classPrivateMethodGet(this, _updateTransform, _updateTransform2).call(this);\n      for (const path of this.bezierPath2D) {\n        ctx.stroke(path);\n      }\n    }\n    function _endDrawing2(event) {\n      this.canvas.removeEventListener(\"pointerleave\", _classPrivateFieldGet(this, _boundCanvasPointerleave));\n      this.canvas.removeEventListener(\"pointermove\", _classPrivateFieldGet(this, _boundCanvasPointermove));\n      this.canvas.removeEventListener(\"pointerup\", _classPrivateFieldGet(this, _boundCanvasPointerup));\n      this.canvas.addEventListener(\"pointerdown\", _classPrivateFieldGet(this, _boundCanvasPointerdown));\n      if (_classPrivateFieldGet(this, _canvasContextMenuTimeoutId)) {\n        clearTimeout(_classPrivateFieldGet(this, _canvasContextMenuTimeoutId));\n      }\n      _classPrivateFieldSet(this, _canvasContextMenuTimeoutId, setTimeout(() => {\n        _classPrivateFieldSet(this, _canvasContextMenuTimeoutId, null);\n        this.canvas.removeEventListener(\"contextmenu\", display_utils.noContextMenu);\n      }, 10));\n      _classPrivateMethodGet(this, _stopDrawing, _stopDrawing2).call(this, event.offsetX, event.offsetY);\n      this.addToAnnotationStorage();\n      this.setInBackground();\n    }\n    function _createCanvas2() {\n      this.canvas = document.createElement(\"canvas\");\n      this.canvas.width = this.canvas.height = 0;\n      this.canvas.className = \"inkEditorCanvas\";\n      this.canvas.setAttribute(\"data-l10n-id\", \"pdfjs-ink-canvas\");\n      this.div.append(this.canvas);\n      this.ctx = this.canvas.getContext(\"2d\");\n    }\n    function _createObserver2() {\n      _classPrivateFieldSet(this, _observer, new ResizeObserver(entries => {\n        const rect = entries[0].contentRect;\n        if (rect.width && rect.height) {\n          this.setDimensions(rect.width, rect.height);\n        }\n      }));\n      _classPrivateFieldGet(this, _observer).observe(this.div);\n    }\n    function _setCanvasDims2() {\n      if (!_classPrivateFieldGet(this, _isCanvasInitialized)) {\n        return;\n      }\n      const [parentWidth, parentHeight] = this.parentDimensions;\n      this.canvas.width = Math.ceil(this.width * parentWidth);\n      this.canvas.height = Math.ceil(this.height * parentHeight);\n      _classPrivateMethodGet(this, _updateTransform, _updateTransform2).call(this);\n    }\n    function _setScaleFactor2(width, height) {\n      const padding = _classPrivateMethodGet(this, _getPadding, _getPadding2).call(this);\n      const scaleFactorW = (width - padding) / _classPrivateFieldGet(this, _baseWidth);\n      const scaleFactorH = (height - padding) / _classPrivateFieldGet(this, _baseHeight);\n      this.scaleFactor = Math.min(scaleFactorW, scaleFactorH);\n    }\n    function _updateTransform2() {\n      const padding = _classPrivateMethodGet(this, _getPadding, _getPadding2).call(this) / 2;\n      this.ctx.setTransform(this.scaleFactor, 0, 0, this.scaleFactor, this.translationX * this.scaleFactor + padding, this.translationY * this.scaleFactor + padding);\n    }\n    function _buildPath2D(bezier) {\n      const path2D = new Path2D();\n      for (let i = 0, ii = bezier.length; i < ii; i++) {\n        const [first, control1, control2, second] = bezier[i];\n        if (i === 0) {\n          path2D.moveTo(...first);\n        }\n        path2D.bezierCurveTo(control1[0], control1[1], control2[0], control2[1], second[0], second[1]);\n      }\n      return path2D;\n    }\n    function _toPDFCoordinates(points, rect, rotation) {\n      const [blX, blY, trX, trY] = rect;\n      switch (rotation) {\n        case 0:\n          for (let i = 0, ii = points.length; i < ii; i += 2) {\n            points[i] += blX;\n            points[i + 1] = trY - points[i + 1];\n          }\n          break;\n        case 90:\n          for (let i = 0, ii = points.length; i < ii; i += 2) {\n            const x = points[i];\n            points[i] = points[i + 1] + blX;\n            points[i + 1] = x + blY;\n          }\n          break;\n        case 180:\n          for (let i = 0, ii = points.length; i < ii; i += 2) {\n            points[i] = trX - points[i];\n            points[i + 1] += blY;\n          }\n          break;\n        case 270:\n          for (let i = 0, ii = points.length; i < ii; i += 2) {\n            const x = points[i];\n            points[i] = trX - points[i + 1];\n            points[i + 1] = trY - x;\n          }\n          break;\n        default:\n          throw new Error(\"Invalid rotation\");\n      }\n      return points;\n    }\n    function _fromPDFCoordinates(points, rect, rotation) {\n      const [blX, blY, trX, trY] = rect;\n      switch (rotation) {\n        case 0:\n          for (let i = 0, ii = points.length; i < ii; i += 2) {\n            points[i] -= blX;\n            points[i + 1] = trY - points[i + 1];\n          }\n          break;\n        case 90:\n          for (let i = 0, ii = points.length; i < ii; i += 2) {\n            const x = points[i];\n            points[i] = points[i + 1] - blY;\n            points[i + 1] = x - blX;\n          }\n          break;\n        case 180:\n          for (let i = 0, ii = points.length; i < ii; i += 2) {\n            points[i] = trX - points[i];\n            points[i + 1] -= blY;\n          }\n          break;\n        case 270:\n          for (let i = 0, ii = points.length; i < ii; i += 2) {\n            const x = points[i];\n            points[i] = trY - points[i + 1];\n            points[i + 1] = trX - x;\n          }\n          break;\n        default:\n          throw new Error(\"Invalid rotation\");\n      }\n      return points;\n    }\n    function _serializePaths2(s, tx, ty, rect) {\n      const paths = [];\n      const padding = this.thickness / 2;\n      const shiftX = s * tx + padding;\n      const shiftY = s * ty + padding;\n      for (const bezier of this.paths) {\n        const buffer = [];\n        const points = [];\n        for (let j = 0, jj = bezier.length; j < jj; j++) {\n          const [first, control1, control2, second] = bezier[j];\n          const p10 = s * first[0] + shiftX;\n          const p11 = s * first[1] + shiftY;\n          const p20 = s * control1[0] + shiftX;\n          const p21 = s * control1[1] + shiftY;\n          const p30 = s * control2[0] + shiftX;\n          const p31 = s * control2[1] + shiftY;\n          const p40 = s * second[0] + shiftX;\n          const p41 = s * second[1] + shiftY;\n          if (j === 0) {\n            buffer.push(p10, p11);\n            points.push(p10, p11);\n          }\n          buffer.push(p20, p21, p30, p31, p40, p41);\n          points.push(p20, p21);\n          if (j === jj - 1) {\n            points.push(p40, p41);\n          }\n        }\n        paths.push({\n          bezier: _classStaticPrivateMethodGet(_InkEditor, _InkEditor, _toPDFCoordinates).call(_InkEditor, buffer, rect, this.rotation),\n          points: _classStaticPrivateMethodGet(_InkEditor, _InkEditor, _toPDFCoordinates).call(_InkEditor, points, rect, this.rotation)\n        });\n      }\n      return paths;\n    }\n    function _getBbox2() {\n      let xMin = Infinity;\n      let xMax = -Infinity;\n      let yMin = Infinity;\n      let yMax = -Infinity;\n      for (const path of this.paths) {\n        for (const [first, control1, control2, second] of path) {\n          const bbox = util.Util.bezierBoundingBox(...first, ...control1, ...control2, ...second);\n          xMin = Math.min(xMin, bbox[0]);\n          yMin = Math.min(yMin, bbox[1]);\n          xMax = Math.max(xMax, bbox[2]);\n          yMax = Math.max(yMax, bbox[3]);\n        }\n      }\n      return [xMin, yMin, xMax, yMax];\n    }\n    function _getPadding2() {\n      return _classPrivateFieldGet(this, _disableEditing) ? Math.ceil(this.thickness * this.parentScale) : 0;\n    }\n    function _fitToContent2() {\n      let firstTime = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      if (this.isEmpty()) {\n        return;\n      }\n      if (!_classPrivateFieldGet(this, _disableEditing)) {\n        _classPrivateMethodGet(this, _redraw, _redraw2).call(this);\n        return;\n      }\n      const bbox = _classPrivateMethodGet(this, _getBbox, _getBbox2).call(this);\n      const padding = _classPrivateMethodGet(this, _getPadding, _getPadding2).call(this);\n      _classPrivateFieldSet(this, _baseWidth, Math.max(editor_editor.AnnotationEditor.MIN_SIZE, bbox[2] - bbox[0]));\n      _classPrivateFieldSet(this, _baseHeight, Math.max(editor_editor.AnnotationEditor.MIN_SIZE, bbox[3] - bbox[1]));\n      const width = Math.ceil(padding + _classPrivateFieldGet(this, _baseWidth) * this.scaleFactor);\n      const height = Math.ceil(padding + _classPrivateFieldGet(this, _baseHeight) * this.scaleFactor);\n      const [parentWidth, parentHeight] = this.parentDimensions;\n      this.width = width / parentWidth;\n      this.height = height / parentHeight;\n      this.setAspectRatio(width, height);\n      const prevTranslationX = this.translationX;\n      const prevTranslationY = this.translationY;\n      this.translationX = -bbox[0];\n      this.translationY = -bbox[1];\n      _classPrivateMethodGet(this, _setCanvasDims, _setCanvasDims2).call(this);\n      _classPrivateMethodGet(this, _redraw, _redraw2).call(this);\n      _classPrivateFieldSet(this, _realWidth, width);\n      _classPrivateFieldSet(this, _realHeight, height);\n      this.setDims(width, height);\n      const unscaledPadding = firstTime ? padding / this.scaleFactor / 2 : 0;\n      this.translate(prevTranslationX - this.translationX - unscaledPadding, prevTranslationY - this.translationY - unscaledPadding);\n    }\n    _defineProperty(InkEditor, \"_defaultColor\", null);\n    _defineProperty(InkEditor, \"_defaultOpacity\", 1);\n    _defineProperty(InkEditor, \"_defaultThickness\", 1);\n    _defineProperty(InkEditor, \"_type\", \"ink\");\n    _defineProperty(InkEditor, \"_editorType\", util.AnnotationEditorType.INK);\n    ; // CONCATENATED MODULE: ./src/display/editor/stamp.js\n    var _bitmap = /*#__PURE__*/new WeakMap();\n    var _bitmapId = /*#__PURE__*/new WeakMap();\n    var _bitmapPromise = /*#__PURE__*/new WeakMap();\n    var _bitmapUrl = /*#__PURE__*/new WeakMap();\n    var _bitmapFile = /*#__PURE__*/new WeakMap();\n    var _bitmapFileName = /*#__PURE__*/new WeakMap();\n    var _canvas = /*#__PURE__*/new WeakMap();\n    var _observer2 = /*#__PURE__*/new WeakMap();\n    var _resizeTimeoutId = /*#__PURE__*/new WeakMap();\n    var _isSvg = /*#__PURE__*/new WeakMap();\n    var _hasBeenAddedInUndoStack = /*#__PURE__*/new WeakMap();\n    var _getBitmapFetched = /*#__PURE__*/new WeakSet();\n    var _getBitmapDone = /*#__PURE__*/new WeakSet();\n    var _getBitmap = /*#__PURE__*/new WeakSet();\n    var _createCanvas3 = /*#__PURE__*/new WeakSet();\n    var _setDimensions = /*#__PURE__*/new WeakSet();\n    var _scaleBitmap = /*#__PURE__*/new WeakSet();\n    var _drawBitmap = /*#__PURE__*/new WeakSet();\n    var _serializeBitmap = /*#__PURE__*/new WeakSet();\n    var _createObserver3 = /*#__PURE__*/new WeakSet();\n    class StampEditor extends editor_editor.AnnotationEditor {\n      constructor(params) {\n        super({\n          ...params,\n          name: \"stampEditor\"\n        });\n        _classPrivateMethodInitSpec(this, _createObserver3);\n        _classPrivateMethodInitSpec(this, _serializeBitmap);\n        _classPrivateMethodInitSpec(this, _drawBitmap);\n        _classPrivateMethodInitSpec(this, _scaleBitmap);\n        _classPrivateMethodInitSpec(this, _setDimensions);\n        _classPrivateMethodInitSpec(this, _createCanvas3);\n        _classPrivateMethodInitSpec(this, _getBitmap);\n        _classPrivateMethodInitSpec(this, _getBitmapDone);\n        _classPrivateMethodInitSpec(this, _getBitmapFetched);\n        _classPrivateFieldInitSpec(this, _bitmap, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _bitmapId, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _bitmapPromise, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _bitmapUrl, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _bitmapFile, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _bitmapFileName, {\n          writable: true,\n          value: \"\"\n        });\n        _classPrivateFieldInitSpec(this, _canvas, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _observer2, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _resizeTimeoutId, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _isSvg, {\n          writable: true,\n          value: false\n        });\n        _classPrivateFieldInitSpec(this, _hasBeenAddedInUndoStack, {\n          writable: true,\n          value: false\n        });\n        _classPrivateFieldSet(this, _bitmapUrl, params.bitmapUrl);\n        _classPrivateFieldSet(this, _bitmapFile, params.bitmapFile);\n      }\n      static initialize(l10n) {\n        editor_editor.AnnotationEditor.initialize(l10n);\n      }\n      static get supportedTypes() {\n        const types = [\"apng\", \"avif\", \"bmp\", \"gif\", \"jpeg\", \"png\", \"svg+xml\", \"webp\", \"x-icon\"];\n        return (0, util.shadow)(this, \"supportedTypes\", types.map(type => \"image/\".concat(type)));\n      }\n      static get supportedTypesStr() {\n        return (0, util.shadow)(this, \"supportedTypesStr\", this.supportedTypes.join(\",\"));\n      }\n      static isHandlingMimeForPasting(mime) {\n        return this.supportedTypes.includes(mime);\n      }\n      static paste(item, parent) {\n        parent.pasteEditor(util.AnnotationEditorType.STAMP, {\n          bitmapFile: item.getAsFile()\n        });\n      }\n      remove() {\n        if (_classPrivateFieldGet(this, _bitmapId)) {\n          var _classPrivateFieldGet7, _classPrivateFieldGet8;\n          _classPrivateFieldSet(this, _bitmap, null);\n          this._uiManager.imageManager.deleteId(_classPrivateFieldGet(this, _bitmapId));\n          (_classPrivateFieldGet7 = _classPrivateFieldGet(this, _canvas)) === null || _classPrivateFieldGet7 === void 0 || _classPrivateFieldGet7.remove();\n          _classPrivateFieldSet(this, _canvas, null);\n          (_classPrivateFieldGet8 = _classPrivateFieldGet(this, _observer2)) === null || _classPrivateFieldGet8 === void 0 || _classPrivateFieldGet8.disconnect();\n          _classPrivateFieldSet(this, _observer2, null);\n          if (_classPrivateFieldGet(this, _resizeTimeoutId)) {\n            clearTimeout(_classPrivateFieldGet(this, _resizeTimeoutId));\n            _classPrivateFieldSet(this, _resizeTimeoutId, null);\n          }\n        }\n        super.remove();\n      }\n      rebuild() {\n        if (!this.parent) {\n          if (_classPrivateFieldGet(this, _bitmapId)) {\n            _classPrivateMethodGet(this, _getBitmap, _getBitmap2).call(this);\n          }\n          return;\n        }\n        super.rebuild();\n        if (this.div === null) {\n          return;\n        }\n        if (_classPrivateFieldGet(this, _bitmapId)) {\n          _classPrivateMethodGet(this, _getBitmap, _getBitmap2).call(this);\n        }\n        if (!this.isAttachedToDOM) {\n          this.parent.add(this);\n        }\n      }\n      onceAdded() {\n        this._isDraggable = true;\n        this.div.focus();\n      }\n      isEmpty() {\n        return !(_classPrivateFieldGet(this, _bitmapPromise) || _classPrivateFieldGet(this, _bitmap) || _classPrivateFieldGet(this, _bitmapUrl) || _classPrivateFieldGet(this, _bitmapFile));\n      }\n      get isResizable() {\n        return true;\n      }\n      render() {\n        if (this.div) {\n          return this.div;\n        }\n        let baseX, baseY;\n        if (this.width) {\n          baseX = this.x;\n          baseY = this.y;\n        }\n        super.render();\n        this.div.hidden = true;\n        if (_classPrivateFieldGet(this, _bitmap)) {\n          _classPrivateMethodGet(this, _createCanvas3, _createCanvas4).call(this);\n        } else {\n          _classPrivateMethodGet(this, _getBitmap, _getBitmap2).call(this);\n        }\n        if (this.width) {\n          const [parentWidth, parentHeight] = this.parentDimensions;\n          this.setAt(baseX * parentWidth, baseY * parentHeight, this.width * parentWidth, this.height * parentHeight);\n        }\n        return this.div;\n      }\n      getImageForAltText() {\n        return _classPrivateFieldGet(this, _canvas);\n      }\n      static deserialize(data, parent, uiManager) {\n        if (data instanceof annotation_layer.StampAnnotationElement) {\n          return null;\n        }\n        const editor = super.deserialize(data, parent, uiManager);\n        const {\n          rect,\n          bitmapUrl,\n          bitmapId,\n          isSvg,\n          accessibilityData\n        } = data;\n        if (bitmapId && uiManager.imageManager.isValidId(bitmapId)) {\n          _classPrivateFieldSet(editor, _bitmapId, bitmapId);\n        } else {\n          _classPrivateFieldSet(editor, _bitmapUrl, bitmapUrl);\n        }\n        _classPrivateFieldSet(editor, _isSvg, isSvg);\n        const [parentWidth, parentHeight] = editor.pageDimensions;\n        editor.width = (rect[2] - rect[0]) / parentWidth;\n        editor.height = (rect[3] - rect[1]) / parentHeight;\n        if (accessibilityData) {\n          editor.altTextData = accessibilityData;\n        }\n        return editor;\n      }\n      serialize() {\n        let isForCopying = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n        let context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n        if (this.isEmpty()) {\n          return null;\n        }\n        const serialized = {\n          annotationType: util.AnnotationEditorType.STAMP,\n          bitmapId: _classPrivateFieldGet(this, _bitmapId),\n          pageIndex: this.pageIndex,\n          rect: this.getRect(0, 0),\n          rotation: this.rotation,\n          isSvg: _classPrivateFieldGet(this, _isSvg),\n          structTreeParentId: this._structTreeParentId\n        };\n        if (isForCopying) {\n          serialized.bitmapUrl = _classPrivateMethodGet(this, _serializeBitmap, _serializeBitmap2).call(this, true);\n          serialized.accessibilityData = this.altTextData;\n          return serialized;\n        }\n        const {\n          decorative,\n          altText\n        } = this.altTextData;\n        if (!decorative && altText) {\n          serialized.accessibilityData = {\n            type: \"Figure\",\n            alt: altText\n          };\n        }\n        if (context === null) {\n          return serialized;\n        }\n        context.stamps || (context.stamps = new Map());\n        const area = _classPrivateFieldGet(this, _isSvg) ? (serialized.rect[2] - serialized.rect[0]) * (serialized.rect[3] - serialized.rect[1]) : null;\n        if (!context.stamps.has(_classPrivateFieldGet(this, _bitmapId))) {\n          context.stamps.set(_classPrivateFieldGet(this, _bitmapId), {\n            area,\n            serialized\n          });\n          serialized.bitmap = _classPrivateMethodGet(this, _serializeBitmap, _serializeBitmap2).call(this, false);\n        } else if (_classPrivateFieldGet(this, _isSvg)) {\n          const prevData = context.stamps.get(_classPrivateFieldGet(this, _bitmapId));\n          if (area > prevData.area) {\n            prevData.area = area;\n            prevData.serialized.bitmap.close();\n            prevData.serialized.bitmap = _classPrivateMethodGet(this, _serializeBitmap, _serializeBitmap2).call(this, false);\n          }\n        }\n        return serialized;\n      }\n    }\n    _StampEditor = StampEditor;\n    function _getBitmapFetched2(data) {\n      let fromId = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      if (!data) {\n        this.remove();\n        return;\n      }\n      _classPrivateFieldSet(this, _bitmap, data.bitmap);\n      if (!fromId) {\n        _classPrivateFieldSet(this, _bitmapId, data.id);\n        _classPrivateFieldSet(this, _isSvg, data.isSvg);\n      }\n      if (data.file) {\n        _classPrivateFieldSet(this, _bitmapFileName, data.file.name);\n      }\n      _classPrivateMethodGet(this, _createCanvas3, _createCanvas4).call(this);\n    }\n    function _getBitmapDone2() {\n      _classPrivateFieldSet(this, _bitmapPromise, null);\n      this._uiManager.enableWaiting(false);\n      if (_classPrivateFieldGet(this, _canvas)) {\n        this.div.focus();\n      }\n    }\n    function _getBitmap2() {\n      if (_classPrivateFieldGet(this, _bitmapId)) {\n        this._uiManager.enableWaiting(true);\n        this._uiManager.imageManager.getFromId(_classPrivateFieldGet(this, _bitmapId)).then(data => _classPrivateMethodGet(this, _getBitmapFetched, _getBitmapFetched2).call(this, data, true)).finally(() => _classPrivateMethodGet(this, _getBitmapDone, _getBitmapDone2).call(this));\n        return;\n      }\n      if (_classPrivateFieldGet(this, _bitmapUrl)) {\n        const url = _classPrivateFieldGet(this, _bitmapUrl);\n        _classPrivateFieldSet(this, _bitmapUrl, null);\n        this._uiManager.enableWaiting(true);\n        _classPrivateFieldSet(this, _bitmapPromise, this._uiManager.imageManager.getFromUrl(url).then(data => _classPrivateMethodGet(this, _getBitmapFetched, _getBitmapFetched2).call(this, data)).finally(() => _classPrivateMethodGet(this, _getBitmapDone, _getBitmapDone2).call(this)));\n        return;\n      }\n      if (_classPrivateFieldGet(this, _bitmapFile)) {\n        const file = _classPrivateFieldGet(this, _bitmapFile);\n        _classPrivateFieldSet(this, _bitmapFile, null);\n        this._uiManager.enableWaiting(true);\n        _classPrivateFieldSet(this, _bitmapPromise, this._uiManager.imageManager.getFromFile(file).then(data => _classPrivateMethodGet(this, _getBitmapFetched, _getBitmapFetched2).call(this, data)).finally(() => _classPrivateMethodGet(this, _getBitmapDone, _getBitmapDone2).call(this)));\n        return;\n      }\n      const input = document.createElement(\"input\");\n      input.type = \"file\";\n      input.accept = _StampEditor.supportedTypesStr;\n      _classPrivateFieldSet(this, _bitmapPromise, new Promise(resolve => {\n        input.addEventListener(\"change\", async () => {\n          if (!input.files || input.files.length === 0) {\n            this.remove();\n          } else {\n            this._uiManager.enableWaiting(true);\n            const data = await this._uiManager.imageManager.getFromFile(input.files[0]);\n            _classPrivateMethodGet(this, _getBitmapFetched, _getBitmapFetched2).call(this, data);\n          }\n          resolve();\n        });\n        input.addEventListener(\"cancel\", () => {\n          this.remove();\n          resolve();\n        });\n      }).finally(() => _classPrivateMethodGet(this, _getBitmapDone, _getBitmapDone2).call(this)));\n      input.click();\n    }\n    function _createCanvas4() {\n      const {\n        div\n      } = this;\n      let {\n        width,\n        height\n      } = _classPrivateFieldGet(this, _bitmap);\n      const [pageWidth, pageHeight] = this.pageDimensions;\n      const MAX_RATIO = 0.75;\n      if (this.width) {\n        width = this.width * pageWidth;\n        height = this.height * pageHeight;\n      } else if (width > MAX_RATIO * pageWidth || height > MAX_RATIO * pageHeight) {\n        const factor = Math.min(MAX_RATIO * pageWidth / width, MAX_RATIO * pageHeight / height);\n        width *= factor;\n        height *= factor;\n      }\n      const [parentWidth, parentHeight] = this.parentDimensions;\n      this.setDims(width * parentWidth / pageWidth, height * parentHeight / pageHeight);\n      this._uiManager.enableWaiting(false);\n      const canvas = _classPrivateFieldSet(this, _canvas, document.createElement(\"canvas\"));\n      div.append(canvas);\n      div.hidden = false;\n      _classPrivateMethodGet(this, _drawBitmap, _drawBitmap2).call(this, width, height);\n      _classPrivateMethodGet(this, _createObserver3, _createObserver4).call(this);\n      if (!_classPrivateFieldGet(this, _hasBeenAddedInUndoStack)) {\n        this.parent.addUndoableEditor(this);\n        _classPrivateFieldSet(this, _hasBeenAddedInUndoStack, true);\n      }\n      this._uiManager._eventBus.dispatch(\"reporttelemetry\", {\n        source: this,\n        details: {\n          type: \"editing\",\n          subtype: this.editorType,\n          data: {\n            action: \"inserted_image\"\n          }\n        }\n      });\n      this.addAltTextButton();\n      if (_classPrivateFieldGet(this, _bitmapFileName)) {\n        canvas.setAttribute(\"aria-label\", _classPrivateFieldGet(this, _bitmapFileName));\n      }\n    }\n    function _setDimensions2(width, height) {\n      var _this$_initialOptions2;\n      const [parentWidth, parentHeight] = this.parentDimensions;\n      this.width = width / parentWidth;\n      this.height = height / parentHeight;\n      this.setDims(width, height);\n      if ((_this$_initialOptions2 = this._initialOptions) !== null && _this$_initialOptions2 !== void 0 && _this$_initialOptions2.isCentered) {\n        this.center();\n      } else {\n        this.fixAndSetPosition();\n      }\n      this._initialOptions = null;\n      if (_classPrivateFieldGet(this, _resizeTimeoutId) !== null) {\n        clearTimeout(_classPrivateFieldGet(this, _resizeTimeoutId));\n      }\n      const TIME_TO_WAIT = 200;\n      _classPrivateFieldSet(this, _resizeTimeoutId, setTimeout(() => {\n        _classPrivateFieldSet(this, _resizeTimeoutId, null);\n        _classPrivateMethodGet(this, _drawBitmap, _drawBitmap2).call(this, width, height);\n      }, TIME_TO_WAIT));\n    }\n    function _scaleBitmap2(width, height) {\n      const {\n        width: bitmapWidth,\n        height: bitmapHeight\n      } = _classPrivateFieldGet(this, _bitmap);\n      let newWidth = bitmapWidth;\n      let newHeight = bitmapHeight;\n      let bitmap = _classPrivateFieldGet(this, _bitmap);\n      while (newWidth > 2 * width || newHeight > 2 * height) {\n        const prevWidth = newWidth;\n        const prevHeight = newHeight;\n        if (newWidth > 2 * width) {\n          newWidth = newWidth >= 16384 ? Math.floor(newWidth / 2) - 1 : Math.ceil(newWidth / 2);\n        }\n        if (newHeight > 2 * height) {\n          newHeight = newHeight >= 16384 ? Math.floor(newHeight / 2) - 1 : Math.ceil(newHeight / 2);\n        }\n        const offscreen = new OffscreenCanvas(newWidth, newHeight);\n        const ctx = offscreen.getContext(\"2d\");\n        ctx.drawImage(bitmap, 0, 0, prevWidth, prevHeight, 0, 0, newWidth, newHeight);\n        bitmap = offscreen.transferToImageBitmap();\n      }\n      return bitmap;\n    }\n    function _drawBitmap2(width, height) {\n      width = Math.ceil(width);\n      height = Math.ceil(height);\n      const canvas = _classPrivateFieldGet(this, _canvas);\n      if (!canvas || canvas.width === width && canvas.height === height) {\n        return;\n      }\n      canvas.width = width;\n      canvas.height = height;\n      const bitmap = _classPrivateFieldGet(this, _isSvg) ? _classPrivateFieldGet(this, _bitmap) : _classPrivateMethodGet(this, _scaleBitmap, _scaleBitmap2).call(this, width, height);\n      const ctx = canvas.getContext(\"2d\");\n      ctx.filter = this._uiManager.hcmFilter;\n      ctx.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height, 0, 0, width, height);\n    }\n    function _serializeBitmap2(toUrl) {\n      if (toUrl) {\n        if (_classPrivateFieldGet(this, _isSvg)) {\n          const url = this._uiManager.imageManager.getSvgUrl(_classPrivateFieldGet(this, _bitmapId));\n          if (url) {\n            return url;\n          }\n        }\n        const canvas = document.createElement(\"canvas\");\n        ({\n          width: canvas.width,\n          height: canvas.height\n        } = _classPrivateFieldGet(this, _bitmap));\n        const ctx = canvas.getContext(\"2d\");\n        ctx.drawImage(_classPrivateFieldGet(this, _bitmap), 0, 0);\n        return canvas.toDataURL();\n      }\n      if (_classPrivateFieldGet(this, _isSvg)) {\n        const [pageWidth, pageHeight] = this.pageDimensions;\n        const width = Math.round(this.width * pageWidth * display_utils.PixelsPerInch.PDF_TO_CSS_UNITS);\n        const height = Math.round(this.height * pageHeight * display_utils.PixelsPerInch.PDF_TO_CSS_UNITS);\n        const offscreen = new OffscreenCanvas(width, height);\n        const ctx = offscreen.getContext(\"2d\");\n        ctx.drawImage(_classPrivateFieldGet(this, _bitmap), 0, 0, _classPrivateFieldGet(this, _bitmap).width, _classPrivateFieldGet(this, _bitmap).height, 0, 0, width, height);\n        return offscreen.transferToImageBitmap();\n      }\n      return structuredClone(_classPrivateFieldGet(this, _bitmap));\n    }\n    function _createObserver4() {\n      _classPrivateFieldSet(this, _observer2, new ResizeObserver(entries => {\n        const rect = entries[0].contentRect;\n        if (rect.width && rect.height) {\n          _classPrivateMethodGet(this, _setDimensions, _setDimensions2).call(this, rect.width, rect.height);\n        }\n      }));\n      _classPrivateFieldGet(this, _observer2).observe(this.div);\n    }\n    _defineProperty(StampEditor, \"_type\", \"stamp\");\n    _defineProperty(StampEditor, \"_editorType\", util.AnnotationEditorType.STAMP);\n    ; // CONCATENATED MODULE: ./src/display/editor/annotation_editor_layer.js\n    var _accessibilityManager2 = /*#__PURE__*/new WeakMap();\n    var _allowClick = /*#__PURE__*/new WeakMap();\n    var _annotationLayer = /*#__PURE__*/new WeakMap();\n    var _boundPointerup = /*#__PURE__*/new WeakMap();\n    var _boundPointerUpAfterSelection = /*#__PURE__*/new WeakMap();\n    var _boundPointerdown = /*#__PURE__*/new WeakMap();\n    var _editorFocusTimeoutId = /*#__PURE__*/new WeakMap();\n    var _boundSelectionStart = /*#__PURE__*/new WeakMap();\n    var _editors = /*#__PURE__*/new WeakMap();\n    var _hadPointerDown = /*#__PURE__*/new WeakMap();\n    var _isCleaningUp = /*#__PURE__*/new WeakMap();\n    var _isDisabling = /*#__PURE__*/new WeakMap();\n    var _textLayer = /*#__PURE__*/new WeakMap();\n    var _uiManager = /*#__PURE__*/new WeakMap();\n    var _currentEditorType = /*#__PURE__*/new WeakMap();\n    var _createNewEditor = /*#__PURE__*/new WeakSet();\n    var _createAndAddNewEditor = /*#__PURE__*/new WeakSet();\n    var _getCenterPoint = /*#__PURE__*/new WeakSet();\n    var _cleanup = /*#__PURE__*/new WeakSet();\n    class AnnotationEditorLayer {\n      constructor(_ref43) {\n        let {\n          uiManager,\n          pageIndex,\n          div,\n          accessibilityManager,\n          annotationLayer,\n          drawLayer,\n          textLayer,\n          viewport,\n          l10n\n        } = _ref43;\n        _classPrivateMethodInitSpec(this, _cleanup);\n        _classPrivateMethodInitSpec(this, _getCenterPoint);\n        _classPrivateMethodInitSpec(this, _createAndAddNewEditor);\n        _classPrivateMethodInitSpec(this, _createNewEditor);\n        _classPrivateFieldInitSpec(this, _currentEditorType, {\n          get: _get_currentEditorType,\n          set: void 0\n        });\n        _classPrivateFieldInitSpec(this, _accessibilityManager2, {\n          writable: true,\n          value: void 0\n        });\n        _classPrivateFieldInitSpec(this, _allowClick, {\n          writable: true,\n          value: false\n        });\n        _classPrivateFieldInitSpec(this, _annotationLayer, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _boundPointerup, {\n          writable: true,\n          value: this.pointerup.bind(this)\n        });\n        _classPrivateFieldInitSpec(this, _boundPointerUpAfterSelection, {\n          writable: true,\n          value: this.pointerUpAfterSelection.bind(this)\n        });\n        _classPrivateFieldInitSpec(this, _boundPointerdown, {\n          writable: true,\n          value: this.pointerdown.bind(this)\n        });\n        _classPrivateFieldInitSpec(this, _editorFocusTimeoutId, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _boundSelectionStart, {\n          writable: true,\n          value: this.selectionStart.bind(this)\n        });\n        _classPrivateFieldInitSpec(this, _editors, {\n          writable: true,\n          value: new Map()\n        });\n        _classPrivateFieldInitSpec(this, _hadPointerDown, {\n          writable: true,\n          value: false\n        });\n        _classPrivateFieldInitSpec(this, _isCleaningUp, {\n          writable: true,\n          value: false\n        });\n        _classPrivateFieldInitSpec(this, _isDisabling, {\n          writable: true,\n          value: false\n        });\n        _classPrivateFieldInitSpec(this, _textLayer, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _uiManager, {\n          writable: true,\n          value: void 0\n        });\n        const editorTypes = [..._classStaticPrivateFieldSpecGet(AnnotationEditorLayer, AnnotationEditorLayer, _editorTypes).values()];\n        if (!AnnotationEditorLayer._initialized) {\n          AnnotationEditorLayer._initialized = true;\n          for (const editorType of editorTypes) {\n            editorType.initialize(l10n);\n          }\n        }\n        uiManager.registerEditorTypes(editorTypes);\n        _classPrivateFieldSet(this, _uiManager, uiManager);\n        this.pageIndex = pageIndex;\n        this.div = div;\n        _classPrivateFieldSet(this, _accessibilityManager2, accessibilityManager);\n        _classPrivateFieldSet(this, _annotationLayer, annotationLayer);\n        this.viewport = viewport;\n        _classPrivateFieldSet(this, _textLayer, textLayer);\n        this.drawLayer = drawLayer;\n        _classPrivateFieldGet(this, _uiManager).addLayer(this);\n      }\n      get isEmpty() {\n        return _classPrivateFieldGet(this, _editors).size === 0;\n      }\n      updateToolbar(mode) {\n        _classPrivateFieldGet(this, _uiManager).updateToolbar(mode);\n      }\n      updateMode() {\n        let mode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _classPrivateFieldGet(this, _uiManager).getMode();\n        _classPrivateMethodGet(this, _cleanup, _cleanup2).call(this);\n        switch (mode) {\n          case util.AnnotationEditorType.NONE:\n            this.disableTextSelection();\n            this.togglePointerEvents(false);\n            this.disableClick();\n            break;\n          case util.AnnotationEditorType.INK:\n            this.addInkEditorIfNeeded(false);\n            this.disableTextSelection();\n            this.togglePointerEvents(true);\n            this.disableClick();\n            break;\n          case util.AnnotationEditorType.HIGHLIGHT:\n            this.enableTextSelection();\n            this.togglePointerEvents(false);\n            this.disableClick();\n            break;\n          default:\n            this.disableTextSelection();\n            this.togglePointerEvents(true);\n            this.enableClick();\n        }\n        if (mode !== util.AnnotationEditorType.NONE) {\n          const {\n            classList\n          } = this.div;\n          for (const editorType of _classStaticPrivateFieldSpecGet(AnnotationEditorLayer, AnnotationEditorLayer, _editorTypes).values()) {\n            classList.toggle(\"\".concat(editorType._type, \"Editing\"), mode === editorType._editorType);\n          }\n          this.div.hidden = false;\n        }\n      }\n      addInkEditorIfNeeded(isCommitting) {\n        if (_classPrivateFieldGet(this, _uiManager).getMode() !== util.AnnotationEditorType.INK) {\n          return;\n        }\n        if (!isCommitting) {\n          for (const editor of _classPrivateFieldGet(this, _editors).values()) {\n            if (editor.isEmpty()) {\n              editor.setInBackground();\n              return;\n            }\n          }\n        }\n        const editor = _classPrivateMethodGet(this, _createAndAddNewEditor, _createAndAddNewEditor2).call(this, {\n          offsetX: 0,\n          offsetY: 0\n        }, false);\n        editor.setInBackground();\n      }\n      setEditingState(isEditing) {\n        _classPrivateFieldGet(this, _uiManager).setEditingState(isEditing);\n      }\n      addCommands(params) {\n        _classPrivateFieldGet(this, _uiManager).addCommands(params);\n      }\n      togglePointerEvents() {\n        let enabled = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n        this.div.classList.toggle(\"disabled\", !enabled);\n      }\n      enable() {\n        this.togglePointerEvents(true);\n        const annotationElementIds = new Set();\n        for (const editor of _classPrivateFieldGet(this, _editors).values()) {\n          editor.enableEditing();\n          if (editor.annotationElementId) {\n            annotationElementIds.add(editor.annotationElementId);\n          }\n        }\n        if (!_classPrivateFieldGet(this, _annotationLayer)) {\n          return;\n        }\n        const editables = _classPrivateFieldGet(this, _annotationLayer).getEditableAnnotations();\n        for (const editable of editables) {\n          editable.hide();\n          if (_classPrivateFieldGet(this, _uiManager).isDeletedAnnotationElement(editable.data.id)) {\n            continue;\n          }\n          if (annotationElementIds.has(editable.data.id)) {\n            continue;\n          }\n          const editor = this.deserialize(editable);\n          if (!editor) {\n            continue;\n          }\n          this.addOrRebuild(editor);\n          editor.enableEditing();\n        }\n      }\n      disable() {\n        _classPrivateFieldSet(this, _isDisabling, true);\n        this.togglePointerEvents(false);\n        const hiddenAnnotationIds = new Set();\n        for (const editor of _classPrivateFieldGet(this, _editors).values()) {\n          var _this$getEditableAnno;\n          editor.disableEditing();\n          if (!editor.annotationElementId || editor.serialize() !== null) {\n            hiddenAnnotationIds.add(editor.annotationElementId);\n            continue;\n          }\n          (_this$getEditableAnno = this.getEditableAnnotation(editor.annotationElementId)) === null || _this$getEditableAnno === void 0 || _this$getEditableAnno.show();\n          editor.remove();\n        }\n        if (_classPrivateFieldGet(this, _annotationLayer)) {\n          const editables = _classPrivateFieldGet(this, _annotationLayer).getEditableAnnotations();\n          for (const editable of editables) {\n            const {\n              id\n            } = editable.data;\n            if (hiddenAnnotationIds.has(id) || _classPrivateFieldGet(this, _uiManager).isDeletedAnnotationElement(id)) {\n              continue;\n            }\n            editable.show();\n          }\n        }\n        _classPrivateMethodGet(this, _cleanup, _cleanup2).call(this);\n        if (this.isEmpty) {\n          this.div.hidden = true;\n        }\n        const {\n          classList\n        } = this.div;\n        for (const editorType of _classStaticPrivateFieldSpecGet(AnnotationEditorLayer, AnnotationEditorLayer, _editorTypes).values()) {\n          classList.remove(\"\".concat(editorType._type, \"Editing\"));\n        }\n        this.disableTextSelection();\n        _classPrivateFieldSet(this, _isDisabling, false);\n      }\n      getEditableAnnotation(id) {\n        var _classPrivateFieldGet9;\n        return ((_classPrivateFieldGet9 = _classPrivateFieldGet(this, _annotationLayer)) === null || _classPrivateFieldGet9 === void 0 ? void 0 : _classPrivateFieldGet9.getEditableAnnotation(id)) || null;\n      }\n      setActiveEditor(editor) {\n        const currentActive = _classPrivateFieldGet(this, _uiManager).getActive();\n        if (currentActive === editor) {\n          return;\n        }\n        _classPrivateFieldGet(this, _uiManager).setActiveEditor(editor);\n      }\n      enableTextSelection() {\n        var _classPrivateFieldGet10;\n        if ((_classPrivateFieldGet10 = _classPrivateFieldGet(this, _textLayer)) !== null && _classPrivateFieldGet10 !== void 0 && _classPrivateFieldGet10.div) {\n          document.addEventListener(\"selectstart\", _classPrivateFieldGet(this, _boundSelectionStart));\n        }\n      }\n      disableTextSelection() {\n        var _classPrivateFieldGet11;\n        if ((_classPrivateFieldGet11 = _classPrivateFieldGet(this, _textLayer)) !== null && _classPrivateFieldGet11 !== void 0 && _classPrivateFieldGet11.div) {\n          document.removeEventListener(\"selectstart\", _classPrivateFieldGet(this, _boundSelectionStart));\n        }\n      }\n      enableClick() {\n        this.div.addEventListener(\"pointerdown\", _classPrivateFieldGet(this, _boundPointerdown));\n        this.div.addEventListener(\"pointerup\", _classPrivateFieldGet(this, _boundPointerup));\n      }\n      disableClick() {\n        this.div.removeEventListener(\"pointerdown\", _classPrivateFieldGet(this, _boundPointerdown));\n        this.div.removeEventListener(\"pointerup\", _classPrivateFieldGet(this, _boundPointerup));\n      }\n      attach(editor) {\n        _classPrivateFieldGet(this, _editors).set(editor.id, editor);\n        const {\n          annotationElementId\n        } = editor;\n        if (annotationElementId && _classPrivateFieldGet(this, _uiManager).isDeletedAnnotationElement(annotationElementId)) {\n          _classPrivateFieldGet(this, _uiManager).removeDeletedAnnotationElement(editor);\n        }\n      }\n      detach(editor) {\n        var _classPrivateFieldGet12;\n        _classPrivateFieldGet(this, _editors).delete(editor.id);\n        (_classPrivateFieldGet12 = _classPrivateFieldGet(this, _accessibilityManager2)) === null || _classPrivateFieldGet12 === void 0 || _classPrivateFieldGet12.removePointerInTextLayer(editor.contentDiv);\n        if (!_classPrivateFieldGet(this, _isDisabling) && editor.annotationElementId) {\n          _classPrivateFieldGet(this, _uiManager).addDeletedAnnotationElement(editor);\n        }\n      }\n      remove(editor) {\n        this.detach(editor);\n        _classPrivateFieldGet(this, _uiManager).removeEditor(editor);\n        editor.div.remove();\n        editor.isAttachedToDOM = false;\n        if (!_classPrivateFieldGet(this, _isCleaningUp)) {\n          this.addInkEditorIfNeeded(false);\n        }\n      }\n      changeParent(editor) {\n        var _editor$parent;\n        if (editor.parent === this) {\n          return;\n        }\n        if (editor.annotationElementId) {\n          _classPrivateFieldGet(this, _uiManager).addDeletedAnnotationElement(editor.annotationElementId);\n          editor_editor.AnnotationEditor.deleteAnnotationElement(editor);\n          editor.annotationElementId = null;\n        }\n        this.attach(editor);\n        (_editor$parent = editor.parent) === null || _editor$parent === void 0 || _editor$parent.detach(editor);\n        editor.setParent(this);\n        if (editor.div && editor.isAttachedToDOM) {\n          editor.div.remove();\n          this.div.append(editor.div);\n        }\n      }\n      add(editor) {\n        this.changeParent(editor);\n        _classPrivateFieldGet(this, _uiManager).addEditor(editor);\n        this.attach(editor);\n        if (!editor.isAttachedToDOM) {\n          const div = editor.render();\n          this.div.append(div);\n          editor.isAttachedToDOM = true;\n        }\n        editor.fixAndSetPosition();\n        editor.onceAdded();\n        _classPrivateFieldGet(this, _uiManager).addToAnnotationStorage(editor);\n      }\n      moveEditorInDOM(editor) {\n        var _classPrivateFieldGet13;\n        if (!editor.isAttachedToDOM) {\n          return;\n        }\n        const {\n          activeElement\n        } = document;\n        if (editor.div.contains(activeElement) && !_classPrivateFieldGet(this, _editorFocusTimeoutId)) {\n          editor._focusEventsAllowed = false;\n          _classPrivateFieldSet(this, _editorFocusTimeoutId, setTimeout(() => {\n            _classPrivateFieldSet(this, _editorFocusTimeoutId, null);\n            if (!editor.div.contains(document.activeElement)) {\n              editor.div.addEventListener(\"focusin\", () => {\n                editor._focusEventsAllowed = true;\n              }, {\n                once: true\n              });\n              activeElement.focus();\n            } else {\n              editor._focusEventsAllowed = true;\n            }\n          }, 0));\n        }\n        editor._structTreeParentId = (_classPrivateFieldGet13 = _classPrivateFieldGet(this, _accessibilityManager2)) === null || _classPrivateFieldGet13 === void 0 ? void 0 : _classPrivateFieldGet13.moveElementInDOM(this.div, editor.div, editor.contentDiv, true);\n      }\n      addOrRebuild(editor) {\n        if (editor.needsToBeRebuilt()) {\n          editor.parent || (editor.parent = this);\n          editor.rebuild();\n        } else {\n          this.add(editor);\n        }\n      }\n      addUndoableEditor(editor) {\n        const cmd = () => editor._uiManager.rebuild(editor);\n        const undo = () => {\n          editor.remove();\n        };\n        this.addCommands({\n          cmd,\n          undo,\n          mustExec: false\n        });\n      }\n      getNextId() {\n        return _classPrivateFieldGet(this, _uiManager).getId();\n      }\n      canCreateNewEmptyEditor() {\n        var _classPrivateFieldGet14;\n        return (_classPrivateFieldGet14 = _classPrivateFieldGet(this, _currentEditorType)) === null || _classPrivateFieldGet14 === void 0 ? void 0 : _classPrivateFieldGet14.canCreateNewEmptyEditor();\n      }\n      pasteEditor(mode, params) {\n        _classPrivateFieldGet(this, _uiManager).updateToolbar(mode);\n        _classPrivateFieldGet(this, _uiManager).updateMode(mode);\n        const {\n          offsetX,\n          offsetY\n        } = _classPrivateMethodGet(this, _getCenterPoint, _getCenterPoint2).call(this);\n        const id = this.getNextId();\n        const editor = _classPrivateMethodGet(this, _createNewEditor, _createNewEditor2).call(this, {\n          parent: this,\n          id,\n          x: offsetX,\n          y: offsetY,\n          uiManager: _classPrivateFieldGet(this, _uiManager),\n          isCentered: true,\n          ...params\n        });\n        if (editor) {\n          this.add(editor);\n        }\n      }\n      deserialize(data) {\n        var _classStaticPrivateFi4, _data$annotationType;\n        return ((_classStaticPrivateFi4 = _classStaticPrivateFieldSpecGet(AnnotationEditorLayer, AnnotationEditorLayer, _editorTypes).get((_data$annotationType = data.annotationType) !== null && _data$annotationType !== void 0 ? _data$annotationType : data.annotationEditorType)) === null || _classStaticPrivateFi4 === void 0 ? void 0 : _classStaticPrivateFi4.deserialize(data, this, _classPrivateFieldGet(this, _uiManager))) || null;\n      }\n      addNewEditor() {\n        _classPrivateMethodGet(this, _createAndAddNewEditor, _createAndAddNewEditor2).call(this, _classPrivateMethodGet(this, _getCenterPoint, _getCenterPoint2).call(this), true);\n      }\n      setSelected(editor) {\n        _classPrivateFieldGet(this, _uiManager).setSelected(editor);\n      }\n      toggleSelected(editor) {\n        _classPrivateFieldGet(this, _uiManager).toggleSelected(editor);\n      }\n      isSelected(editor) {\n        return _classPrivateFieldGet(this, _uiManager).isSelected(editor);\n      }\n      unselect(editor) {\n        _classPrivateFieldGet(this, _uiManager).unselect(editor);\n      }\n      selectionStart(_event) {\n        var _classPrivateFieldGet15;\n        (_classPrivateFieldGet15 = _classPrivateFieldGet(this, _textLayer)) === null || _classPrivateFieldGet15 === void 0 || _classPrivateFieldGet15.div.addEventListener(\"pointerup\", _classPrivateFieldGet(this, _boundPointerUpAfterSelection), {\n          once: true\n        });\n      }\n      pointerUpAfterSelection(event) {\n        var _classPrivateFieldGet16;\n        const selection = document.getSelection();\n        if (selection.rangeCount === 0) {\n          return;\n        }\n        const range = selection.getRangeAt(0);\n        if (range.collapsed) {\n          return;\n        }\n        if (!((_classPrivateFieldGet16 = _classPrivateFieldGet(this, _textLayer)) !== null && _classPrivateFieldGet16 !== void 0 && _classPrivateFieldGet16.div.contains(range.commonAncestorContainer))) {\n          return;\n        }\n        const {\n          x: layerX,\n          y: layerY,\n          width: parentWidth,\n          height: parentHeight\n        } = _classPrivateFieldGet(this, _textLayer).div.getBoundingClientRect();\n        const bboxes = range.getClientRects();\n        let rotator;\n        switch (this.viewport.rotation) {\n          case 90:\n            rotator = (x, y, w, h) => ({\n              x: (y - layerY) / parentHeight,\n              y: 1 - (x + w - layerX) / parentWidth,\n              width: h / parentHeight,\n              height: w / parentWidth\n            });\n            break;\n          case 180:\n            rotator = (x, y, w, h) => ({\n              x: 1 - (x + w - layerX) / parentWidth,\n              y: 1 - (y + h - layerY) / parentHeight,\n              width: w / parentWidth,\n              height: h / parentHeight\n            });\n            break;\n          case 270:\n            rotator = (x, y, w, h) => ({\n              x: 1 - (y + h - layerY) / parentHeight,\n              y: (x - layerX) / parentWidth,\n              width: h / parentHeight,\n              height: w / parentWidth\n            });\n            break;\n          default:\n            rotator = (x, y, w, h) => ({\n              x: (x - layerX) / parentWidth,\n              y: (y - layerY) / parentHeight,\n              width: w / parentWidth,\n              height: h / parentHeight\n            });\n            break;\n        }\n        const boxes = [];\n        for (const {\n          x,\n          y,\n          width,\n          height\n        } of bboxes) {\n          if (width === 0 || height === 0) {\n            continue;\n          }\n          boxes.push(rotator(x, y, width, height));\n        }\n        if (boxes.length !== 0) {\n          _classPrivateMethodGet(this, _createAndAddNewEditor, _createAndAddNewEditor2).call(this, event, false, {\n            boxes\n          });\n        }\n        selection.empty();\n      }\n      pointerup(event) {\n        const {\n          isMac\n        } = util.FeatureTest.platform;\n        if (event.button !== 0 || event.ctrlKey && isMac) {\n          return;\n        }\n        if (event.target !== this.div) {\n          return;\n        }\n        if (!_classPrivateFieldGet(this, _hadPointerDown)) {\n          return;\n        }\n        _classPrivateFieldSet(this, _hadPointerDown, false);\n        if (!_classPrivateFieldGet(this, _allowClick)) {\n          _classPrivateFieldSet(this, _allowClick, true);\n          return;\n        }\n        if (_classPrivateFieldGet(this, _uiManager).getMode() === util.AnnotationEditorType.STAMP) {\n          _classPrivateFieldGet(this, _uiManager).unselectAll();\n          return;\n        }\n        _classPrivateMethodGet(this, _createAndAddNewEditor, _createAndAddNewEditor2).call(this, event, false);\n      }\n      pointerdown(event) {\n        if (_classPrivateFieldGet(this, _uiManager).getMode() === util.AnnotationEditorType.HIGHLIGHT) {\n          this.enableTextSelection();\n        }\n        if (_classPrivateFieldGet(this, _hadPointerDown)) {\n          _classPrivateFieldSet(this, _hadPointerDown, false);\n          return;\n        }\n        const {\n          isMac\n        } = util.FeatureTest.platform;\n        if (event.button !== 0 || event.ctrlKey && isMac) {\n          return;\n        }\n        if (event.target !== this.div) {\n          return;\n        }\n        _classPrivateFieldSet(this, _hadPointerDown, true);\n        const editor = _classPrivateFieldGet(this, _uiManager).getActive();\n        _classPrivateFieldSet(this, _allowClick, !editor || editor.isEmpty());\n      }\n      findNewParent(editor, x, y) {\n        const layer = _classPrivateFieldGet(this, _uiManager).findParent(x, y);\n        if (layer === null || layer === this) {\n          return false;\n        }\n        layer.changeParent(editor);\n        return true;\n      }\n      destroy() {\n        var _classPrivateFieldGet17;\n        if (((_classPrivateFieldGet17 = _classPrivateFieldGet(this, _uiManager).getActive()) === null || _classPrivateFieldGet17 === void 0 ? void 0 : _classPrivateFieldGet17.parent) === this) {\n          _classPrivateFieldGet(this, _uiManager).commitOrRemove();\n          _classPrivateFieldGet(this, _uiManager).setActiveEditor(null);\n        }\n        if (_classPrivateFieldGet(this, _editorFocusTimeoutId)) {\n          clearTimeout(_classPrivateFieldGet(this, _editorFocusTimeoutId));\n          _classPrivateFieldSet(this, _editorFocusTimeoutId, null);\n        }\n        for (const editor of _classPrivateFieldGet(this, _editors).values()) {\n          var _classPrivateFieldGet18;\n          (_classPrivateFieldGet18 = _classPrivateFieldGet(this, _accessibilityManager2)) === null || _classPrivateFieldGet18 === void 0 || _classPrivateFieldGet18.removePointerInTextLayer(editor.contentDiv);\n          editor.setParent(null);\n          editor.isAttachedToDOM = false;\n          editor.div.remove();\n        }\n        this.div = null;\n        _classPrivateFieldGet(this, _editors).clear();\n        _classPrivateFieldGet(this, _uiManager).removeLayer(this);\n      }\n      render(_ref44) {\n        let {\n          viewport\n        } = _ref44;\n        this.viewport = viewport;\n        (0, display_utils.setLayerDimensions)(this.div, viewport);\n        for (const editor of _classPrivateFieldGet(this, _uiManager).getEditors(this.pageIndex)) {\n          this.add(editor);\n        }\n        this.updateMode();\n      }\n      update(_ref45) {\n        let {\n          viewport\n        } = _ref45;\n        _classPrivateFieldGet(this, _uiManager).commitOrRemove();\n        const oldRotation = this.viewport.rotation;\n        const rotation = viewport.rotation;\n        this.viewport = viewport;\n        (0, display_utils.setLayerDimensions)(this.div, {\n          rotation\n        });\n        if (oldRotation !== rotation) {\n          for (const editor of _classPrivateFieldGet(this, _editors).values()) {\n            editor.rotate(rotation);\n          }\n        }\n        this.updateMode();\n      }\n      get pageDimensions() {\n        const {\n          pageWidth,\n          pageHeight\n        } = this.viewport.rawDims;\n        return [pageWidth, pageHeight];\n      }\n    }\n\n    /***/\n    _AnnotationEditorLayer = AnnotationEditorLayer;\n    function _get_currentEditorType() {\n      return _classStaticPrivateFieldSpecGet(_AnnotationEditorLayer, _AnnotationEditorLayer, _editorTypes).get(_classPrivateFieldGet(this, _uiManager).getMode());\n    }\n    function _createNewEditor2(params) {\n      const editorType = _classPrivateFieldGet(this, _currentEditorType);\n      return editorType ? new editorType.prototype.constructor(params) : null;\n    }\n    function _createAndAddNewEditor2(event, isCentered) {\n      let data = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      const id = this.getNextId();\n      const editor = _classPrivateMethodGet(this, _createNewEditor, _createNewEditor2).call(this, {\n        parent: this,\n        id,\n        x: event.offsetX,\n        y: event.offsetY,\n        uiManager: _classPrivateFieldGet(this, _uiManager),\n        isCentered,\n        ...data\n      });\n      if (editor) {\n        this.add(editor);\n      }\n      return editor;\n    }\n    function _getCenterPoint2() {\n      const {\n        x,\n        y,\n        width,\n        height\n      } = this.div.getBoundingClientRect();\n      const tlX = Math.max(0, x);\n      const tlY = Math.max(0, y);\n      const brX = Math.min(window.innerWidth, x + width);\n      const brY = Math.min(window.innerHeight, y + height);\n      const centerX = (tlX + brX) / 2 - x;\n      const centerY = (tlY + brY) / 2 - y;\n      const [offsetX, offsetY] = this.viewport.rotation % 180 === 0 ? [centerX, centerY] : [centerY, centerX];\n      return {\n        offsetX,\n        offsetY\n      };\n    }\n    function _cleanup2() {\n      _classPrivateFieldSet(this, _isCleaningUp, true);\n      for (const editor of _classPrivateFieldGet(this, _editors).values()) {\n        if (editor.isEmpty()) {\n          editor.remove();\n        }\n      }\n      _classPrivateFieldSet(this, _isCleaningUp, false);\n    }\n    _defineProperty(AnnotationEditorLayer, \"_initialized\", false);\n    var _editorTypes = {\n      writable: true,\n      value: new Map([FreeTextEditor, InkEditor, StampEditor, HighlightEditor].map(type => [type._editorType, type]))\n    };\n  }),\n  /***/97: ( /***/(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {\n    var _ColorPicker;\n    /* harmony export */__webpack_require__.d(__webpack_exports__, {\n      /* harmony export */ColorPicker: () => ( /* binding */ColorPicker)\n      /* harmony export */\n    });\n    /* harmony import */\n    var _shared_util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(266);\n    /* harmony import */\n    var _tools_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(812);\n    /* harmony import */\n    var _display_utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(473);\n    var _boundKeyDown2 = /*#__PURE__*/new WeakMap();\n    var _button = /*#__PURE__*/new WeakMap();\n    var _buttonSwatch = /*#__PURE__*/new WeakMap();\n    var _defaultColor = /*#__PURE__*/new WeakMap();\n    var _dropdown = /*#__PURE__*/new WeakMap();\n    var _dropdownWasFromKeyboard = /*#__PURE__*/new WeakMap();\n    var _isMainColorPicker = /*#__PURE__*/new WeakMap();\n    var _eventBus = /*#__PURE__*/new WeakMap();\n    var _uiManager2 = /*#__PURE__*/new WeakMap();\n    var _getDropdownRoot = /*#__PURE__*/new WeakSet();\n    var _colorSelect = /*#__PURE__*/new WeakSet();\n    var _keyDown3 = /*#__PURE__*/new WeakSet();\n    var _openDropdown = /*#__PURE__*/new WeakSet();\n    class ColorPicker {\n      static get _keyboardManager() {\n        return (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow)(this, \"_keyboardManager\", new _tools_js__WEBPACK_IMPORTED_MODULE_1__.KeyboardManager([[[\"Escape\", \"mac+Escape\"], ColorPicker.prototype._hideDropdownFromKeyboard], [[\" \", \"mac+ \"], ColorPicker.prototype._colorSelectFromKeyboard], [[\"ArrowDown\", \"ArrowRight\", \"mac+ArrowDown\", \"mac+ArrowRight\"], ColorPicker.prototype._moveToNext], [[\"ArrowUp\", \"ArrowLeft\", \"mac+ArrowUp\", \"mac+ArrowLeft\"], ColorPicker.prototype._moveToPrevious], [[\"Home\", \"mac+Home\"], ColorPicker.prototype._moveToBeginning], [[\"End\", \"mac+End\"], ColorPicker.prototype._moveToEnd]]));\n      }\n      constructor(_ref47) {\n        var _classPrivateFieldGet21;\n        let {\n          editor = null,\n          uiManager = null\n        } = _ref47;\n        _classPrivateMethodInitSpec(this, _openDropdown);\n        _classPrivateMethodInitSpec(this, _keyDown3);\n        _classPrivateMethodInitSpec(this, _colorSelect);\n        _classPrivateMethodInitSpec(this, _getDropdownRoot);\n        _classPrivateFieldInitSpec(this, _boundKeyDown2, {\n          writable: true,\n          value: _classPrivateMethodGet(this, _keyDown3, _keyDown4).bind(this)\n        });\n        _classPrivateFieldInitSpec(this, _button, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _buttonSwatch, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _defaultColor, {\n          writable: true,\n          value: void 0\n        });\n        _classPrivateFieldInitSpec(this, _dropdown, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _dropdownWasFromKeyboard, {\n          writable: true,\n          value: false\n        });\n        _classPrivateFieldInitSpec(this, _isMainColorPicker, {\n          writable: true,\n          value: false\n        });\n        _classPrivateFieldInitSpec(this, _eventBus, {\n          writable: true,\n          value: void 0\n        });\n        _classPrivateFieldInitSpec(this, _uiManager2, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldSet(this, _isMainColorPicker, !editor);\n        _classPrivateFieldSet(this, _uiManager2, (editor === null || editor === void 0 ? void 0 : editor._uiManager) || uiManager);\n        _classPrivateFieldSet(this, _eventBus, _classPrivateFieldGet(this, _uiManager2)._eventBus);\n        _classPrivateFieldSet(this, _defaultColor, (editor === null || editor === void 0 ? void 0 : editor.color) || ((_classPrivateFieldGet21 = _classPrivateFieldGet(this, _uiManager2)) === null || _classPrivateFieldGet21 === void 0 ? void 0 : _classPrivateFieldGet21.highlightColors.values().next().value) || \"#FFFF98\");\n      }\n      renderButton() {\n        const button = _classPrivateFieldSet(this, _button, document.createElement(\"button\"));\n        button.className = \"colorPicker\";\n        button.tabIndex = \"0\";\n        button.setAttribute(\"data-l10n-id\", \"pdfjs-editor-colorpicker-button\");\n        button.setAttribute(\"aria-haspopup\", true);\n        button.addEventListener(\"click\", _classPrivateMethodGet(this, _openDropdown, _openDropdown2).bind(this));\n        const swatch = _classPrivateFieldSet(this, _buttonSwatch, document.createElement(\"span\"));\n        swatch.className = \"swatch\";\n        swatch.style.backgroundColor = _classPrivateFieldGet(this, _defaultColor);\n        button.append(swatch);\n        return button;\n      }\n      renderMainDropdown() {\n        const dropdown = _classPrivateFieldSet(this, _dropdown, _classPrivateMethodGet(this, _getDropdownRoot, _getDropdownRoot2).call(this, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR));\n        dropdown.setAttribute(\"aria-orientation\", \"horizontal\");\n        dropdown.setAttribute(\"aria-labelledby\", \"highlightColorPickerLabel\");\n        return dropdown;\n      }\n      _colorSelectFromKeyboard(event) {\n        const color = event.target.getAttribute(\"data-color\");\n        if (!color) {\n          return;\n        }\n        _classPrivateMethodGet(this, _colorSelect, _colorSelect2).call(this, color, event);\n      }\n      _moveToNext(event) {\n        var _event$target$nextSib;\n        if (event.target === _classPrivateFieldGet(this, _button)) {\n          var _classPrivateFieldGet22;\n          (_classPrivateFieldGet22 = _classPrivateFieldGet(this, _dropdown).firstChild) === null || _classPrivateFieldGet22 === void 0 || _classPrivateFieldGet22.focus();\n          return;\n        }\n        (_event$target$nextSib = event.target.nextSibling) === null || _event$target$nextSib === void 0 || _event$target$nextSib.focus();\n      }\n      _moveToPrevious(event) {\n        var _event$target$previou;\n        (_event$target$previou = event.target.previousSibling) === null || _event$target$previou === void 0 || _event$target$previou.focus();\n      }\n      _moveToBeginning() {\n        var _classPrivateFieldGet23;\n        (_classPrivateFieldGet23 = _classPrivateFieldGet(this, _dropdown).firstChild) === null || _classPrivateFieldGet23 === void 0 || _classPrivateFieldGet23.focus();\n      }\n      _moveToEnd() {\n        var _classPrivateFieldGet24;\n        (_classPrivateFieldGet24 = _classPrivateFieldGet(this, _dropdown).lastChild) === null || _classPrivateFieldGet24 === void 0 || _classPrivateFieldGet24.focus();\n      }\n      hideDropdown() {\n        var _classPrivateFieldGet25;\n        (_classPrivateFieldGet25 = _classPrivateFieldGet(this, _dropdown)) === null || _classPrivateFieldGet25 === void 0 || _classPrivateFieldGet25.classList.add(\"hidden\");\n      }\n      _hideDropdownFromKeyboard() {\n        if (_classPrivateFieldGet(this, _isMainColorPicker) || !_classPrivateFieldGet(this, _dropdown) || _classPrivateFieldGet(this, _dropdown).classList.contains(\"hidden\")) {\n          return;\n        }\n        this.hideDropdown();\n        _classPrivateFieldGet(this, _button).removeEventListener(\"keydown\", _classPrivateFieldGet(this, _boundKeyDown2));\n        _classPrivateFieldGet(this, _button).focus({\n          preventScroll: true,\n          focusVisible: _classPrivateFieldGet(this, _dropdownWasFromKeyboard)\n        });\n      }\n      updateColor(color) {\n        if (_classPrivateFieldGet(this, _buttonSwatch)) {\n          _classPrivateFieldGet(this, _buttonSwatch).style.backgroundColor = color;\n        }\n        if (!_classPrivateFieldGet(this, _dropdown)) {\n          return;\n        }\n        const i = _classPrivateFieldGet(this, _uiManager2).highlightColors.values();\n        for (const child of _classPrivateFieldGet(this, _dropdown).children) {\n          child.setAttribute(\"aria-selected\", i.next().value === color);\n        }\n      }\n      destroy() {\n        var _classPrivateFieldGet26, _classPrivateFieldGet27;\n        (_classPrivateFieldGet26 = _classPrivateFieldGet(this, _button)) === null || _classPrivateFieldGet26 === void 0 || _classPrivateFieldGet26.remove();\n        _classPrivateFieldSet(this, _button, null);\n        _classPrivateFieldSet(this, _buttonSwatch, null);\n        (_classPrivateFieldGet27 = _classPrivateFieldGet(this, _dropdown)) === null || _classPrivateFieldGet27 === void 0 || _classPrivateFieldGet27.remove();\n        _classPrivateFieldSet(this, _dropdown, null);\n      }\n    }\n\n    /***/\n    _ColorPicker = ColorPicker;\n    function _getDropdownRoot2(paramType) {\n      const div = document.createElement(\"div\");\n      div.addEventListener(\"contextmenu\", _display_utils_js__WEBPACK_IMPORTED_MODULE_2__.noContextMenu);\n      div.className = \"dropdown\";\n      div.role = \"listbox\";\n      div.setAttribute(\"aria-multiselectable\", false);\n      div.setAttribute(\"aria-orientation\", \"vertical\");\n      div.setAttribute(\"data-l10n-id\", \"pdfjs-editor-colorpicker-dropdown\");\n      for (const [name, color] of _classPrivateFieldGet(this, _uiManager2).highlightColors) {\n        const button = document.createElement(\"button\");\n        button.tabIndex = \"0\";\n        button.role = \"option\";\n        button.setAttribute(\"data-color\", color);\n        button.title = name;\n        button.setAttribute(\"data-l10n-id\", \"pdfjs-editor-colorpicker-\".concat(name));\n        const swatch = document.createElement(\"span\");\n        button.append(swatch);\n        swatch.className = \"swatch\";\n        swatch.style.backgroundColor = color;\n        button.setAttribute(\"aria-selected\", color === _classPrivateFieldGet(this, _defaultColor));\n        button.addEventListener(\"click\", _classPrivateMethodGet(this, _colorSelect, _colorSelect2).bind(this, paramType, color));\n        div.append(button);\n      }\n      div.addEventListener(\"keydown\", _classPrivateFieldGet(this, _boundKeyDown2));\n      return div;\n    }\n    function _colorSelect2(type, color, event) {\n      event.stopPropagation();\n      _classPrivateFieldGet(this, _eventBus).dispatch(\"switchannotationeditorparams\", {\n        source: this,\n        type,\n        value: color\n      });\n    }\n    function _keyDown4(event) {\n      _ColorPicker._keyboardManager.exec(this, event);\n    }\n    function _openDropdown2(event) {\n      if (_classPrivateFieldGet(this, _dropdown) && !_classPrivateFieldGet(this, _dropdown).classList.contains(\"hidden\")) {\n        this.hideDropdown();\n        return;\n      }\n      _classPrivateFieldGet(this, _button).addEventListener(\"keydown\", _classPrivateFieldGet(this, _boundKeyDown2));\n      _classPrivateFieldSet(this, _dropdownWasFromKeyboard, event.detail === 0);\n      if (_classPrivateFieldGet(this, _dropdown)) {\n        _classPrivateFieldGet(this, _dropdown).classList.remove(\"hidden\");\n        return;\n      }\n      const root = _classPrivateFieldSet(this, _dropdown, _classPrivateMethodGet(this, _getDropdownRoot, _getDropdownRoot2).call(this, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorParamsType.HIGHLIGHT_COLOR));\n      _classPrivateFieldGet(this, _button).append(root);\n    }\n  }),\n  /***/115: ( /***/(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {\n    var _AltText, _AnnotationEditor;\n    // EXPORTS\n    __webpack_require__.d(__webpack_exports__, {\n      AnnotationEditor: () => ( /* binding */AnnotationEditor)\n    });\n\n    // EXTERNAL MODULE: ./src/display/editor/tools.js\n    var tools = __webpack_require__(812);\n    // EXTERNAL MODULE: ./src/shared/util.js\n    var util = __webpack_require__(266);\n    // EXTERNAL MODULE: ./src/display/display_utils.js\n    var display_utils = __webpack_require__(473);\n    ; // CONCATENATED MODULE: ./src/display/editor/alt_text.js\n    var _altText = /*#__PURE__*/new WeakMap();\n    var _altTextDecorative = /*#__PURE__*/new WeakMap();\n    var _altTextButton = /*#__PURE__*/new WeakMap();\n    var _altTextTooltip = /*#__PURE__*/new WeakMap();\n    var _altTextTooltipTimeout = /*#__PURE__*/new WeakMap();\n    var _altTextWasFromKeyBoard = /*#__PURE__*/new WeakMap();\n    var _editor = /*#__PURE__*/new WeakMap();\n    var _setState = /*#__PURE__*/new WeakSet();\n    class AltText {\n      constructor(editor) {\n        _classPrivateMethodInitSpec(this, _setState);\n        _classPrivateFieldInitSpec(this, _altText, {\n          writable: true,\n          value: \"\"\n        });\n        _classPrivateFieldInitSpec(this, _altTextDecorative, {\n          writable: true,\n          value: false\n        });\n        _classPrivateFieldInitSpec(this, _altTextButton, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _altTextTooltip, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _altTextTooltipTimeout, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _altTextWasFromKeyBoard, {\n          writable: true,\n          value: false\n        });\n        _classPrivateFieldInitSpec(this, _editor, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldSet(this, _editor, editor);\n      }\n      static initialize(l10nPromise) {\n        AltText._l10nPromise || (AltText._l10nPromise = l10nPromise);\n      }\n      async render() {\n        const altText = _classPrivateFieldSet(this, _altTextButton, document.createElement(\"button\"));\n        altText.className = \"altText\";\n        const msg = await AltText._l10nPromise.get(\"pdfjs-editor-alt-text-button-label\");\n        altText.textContent = msg;\n        altText.setAttribute(\"aria-label\", msg);\n        altText.tabIndex = \"0\";\n        altText.addEventListener(\"contextmenu\", display_utils.noContextMenu);\n        altText.addEventListener(\"pointerdown\", event => event.stopPropagation());\n        const onClick = event => {\n          event.preventDefault();\n          _classPrivateFieldGet(this, _editor)._uiManager.editAltText(_classPrivateFieldGet(this, _editor));\n        };\n        altText.addEventListener(\"click\", onClick, {\n          capture: true\n        });\n        altText.addEventListener(\"keydown\", event => {\n          if (event.target === altText && event.key === \"Enter\") {\n            _classPrivateFieldSet(this, _altTextWasFromKeyBoard, true);\n            onClick(event);\n          }\n        });\n        await _classPrivateMethodGet(this, _setState, _setState2).call(this);\n        return altText;\n      }\n      finish() {\n        if (!_classPrivateFieldGet(this, _altTextButton)) {\n          return;\n        }\n        _classPrivateFieldGet(this, _altTextButton).focus({\n          focusVisible: _classPrivateFieldGet(this, _altTextWasFromKeyBoard)\n        });\n        _classPrivateFieldSet(this, _altTextWasFromKeyBoard, false);\n      }\n      get data() {\n        return {\n          altText: _classPrivateFieldGet(this, _altText),\n          decorative: _classPrivateFieldGet(this, _altTextDecorative)\n        };\n      }\n      set data(_ref48) {\n        let {\n          altText,\n          decorative\n        } = _ref48;\n        if (_classPrivateFieldGet(this, _altText) === altText && _classPrivateFieldGet(this, _altTextDecorative) === decorative) {\n          return;\n        }\n        _classPrivateFieldSet(this, _altText, altText);\n        _classPrivateFieldSet(this, _altTextDecorative, decorative);\n        _classPrivateMethodGet(this, _setState, _setState2).call(this);\n      }\n      toggle() {\n        let enabled = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n        if (!_classPrivateFieldGet(this, _altTextButton)) {\n          return;\n        }\n        if (!enabled && _classPrivateFieldGet(this, _altTextTooltipTimeout)) {\n          clearTimeout(_classPrivateFieldGet(this, _altTextTooltipTimeout));\n          _classPrivateFieldSet(this, _altTextTooltipTimeout, null);\n        }\n        _classPrivateFieldGet(this, _altTextButton).disabled = !enabled;\n      }\n      destroy() {\n        var _classPrivateFieldGet28;\n        (_classPrivateFieldGet28 = _classPrivateFieldGet(this, _altTextButton)) === null || _classPrivateFieldGet28 === void 0 || _classPrivateFieldGet28.remove();\n        _classPrivateFieldSet(this, _altTextButton, null);\n        _classPrivateFieldSet(this, _altTextTooltip, null);\n      }\n    }\n    _AltText = AltText;\n    async function _setState2() {\n      const button = _classPrivateFieldGet(this, _altTextButton);\n      if (!button) {\n        return;\n      }\n      if (!_classPrivateFieldGet(this, _altText) && !_classPrivateFieldGet(this, _altTextDecorative)) {\n        var _classPrivateFieldGet38;\n        button.classList.remove(\"done\");\n        (_classPrivateFieldGet38 = _classPrivateFieldGet(this, _altTextTooltip)) === null || _classPrivateFieldGet38 === void 0 || _classPrivateFieldGet38.remove();\n        return;\n      }\n      button.classList.add(\"done\");\n      _AltText._l10nPromise.get(\"pdfjs-editor-alt-text-edit-button-label\").then(msg => {\n        button.setAttribute(\"aria-label\", msg);\n      });\n      let tooltip = _classPrivateFieldGet(this, _altTextTooltip);\n      if (!tooltip) {\n        _classPrivateFieldSet(this, _altTextTooltip, tooltip = document.createElement(\"span\"));\n        tooltip.className = \"tooltip\";\n        tooltip.setAttribute(\"role\", \"tooltip\");\n        const id = tooltip.id = \"alt-text-tooltip-\".concat(_classPrivateFieldGet(this, _editor).id);\n        button.setAttribute(\"aria-describedby\", id);\n        const DELAY_TO_SHOW_TOOLTIP = 100;\n        button.addEventListener(\"mouseenter\", () => {\n          _classPrivateFieldSet(this, _altTextTooltipTimeout, setTimeout(() => {\n            _classPrivateFieldSet(this, _altTextTooltipTimeout, null);\n            _classPrivateFieldGet(this, _altTextTooltip).classList.add(\"show\");\n            _classPrivateFieldGet(this, _editor)._uiManager._eventBus.dispatch(\"reporttelemetry\", {\n              source: this,\n              details: {\n                type: \"editing\",\n                subtype: _classPrivateFieldGet(this, _editor).editorType,\n                data: {\n                  action: \"alt_text_tooltip\"\n                }\n              }\n            });\n          }, DELAY_TO_SHOW_TOOLTIP));\n        });\n        button.addEventListener(\"mouseleave\", () => {\n          var _classPrivateFieldGet39;\n          if (_classPrivateFieldGet(this, _altTextTooltipTimeout)) {\n            clearTimeout(_classPrivateFieldGet(this, _altTextTooltipTimeout));\n            _classPrivateFieldSet(this, _altTextTooltipTimeout, null);\n          }\n          (_classPrivateFieldGet39 = _classPrivateFieldGet(this, _altTextTooltip)) === null || _classPrivateFieldGet39 === void 0 || _classPrivateFieldGet39.classList.remove(\"show\");\n        });\n      }\n      tooltip.innerText = _classPrivateFieldGet(this, _altTextDecorative) ? await _AltText._l10nPromise.get(\"pdfjs-editor-alt-text-decorative-tooltip\") : _classPrivateFieldGet(this, _altText);\n      if (!tooltip.parentNode) {\n        button.append(tooltip);\n      }\n      const element = _classPrivateFieldGet(this, _editor).getImageForAltText();\n      element === null || element === void 0 || element.setAttribute(\"aria-describedby\", tooltip.id);\n    }\n    _defineProperty(AltText, \"_l10nPromise\", null);\n    ; // CONCATENATED MODULE: ./src/display/editor/toolbar.js\n    var _toolbar = /*#__PURE__*/new WeakMap();\n    var _colorPicker2 = /*#__PURE__*/new WeakMap();\n    var _editor2 = /*#__PURE__*/new WeakMap();\n    var _buttons = /*#__PURE__*/new WeakMap();\n    var _focusIn = /*#__PURE__*/new WeakSet();\n    var _focusOut = /*#__PURE__*/new WeakSet();\n    var _addListenersToElement = /*#__PURE__*/new WeakSet();\n    var _addDeleteButton = /*#__PURE__*/new WeakSet();\n    var _divider = /*#__PURE__*/new WeakMap();\n    class EditorToolbar {\n      constructor(editor) {\n        _classPrivateFieldInitSpec(this, _divider, {\n          get: _get_divider,\n          set: void 0\n        });\n        _classPrivateMethodInitSpec(this, _addDeleteButton);\n        _classPrivateMethodInitSpec(this, _addListenersToElement);\n        _classPrivateMethodInitSpec(this, _focusOut);\n        _classPrivateMethodInitSpec(this, _focusIn);\n        _classPrivateFieldInitSpec(this, _toolbar, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _colorPicker2, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _editor2, {\n          writable: true,\n          value: void 0\n        });\n        _classPrivateFieldInitSpec(this, _buttons, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldSet(this, _editor2, editor);\n      }\n      render() {\n        const editToolbar = _classPrivateFieldSet(this, _toolbar, document.createElement(\"div\"));\n        editToolbar.className = \"editToolbar\";\n        editToolbar.addEventListener(\"contextmenu\", display_utils.noContextMenu);\n        editToolbar.addEventListener(\"pointerdown\", _classStaticPrivateMethodGet(EditorToolbar, EditorToolbar, _pointerDown));\n        const buttons = _classPrivateFieldSet(this, _buttons, document.createElement(\"div\"));\n        buttons.className = \"buttons\";\n        editToolbar.append(buttons);\n        const position = _classPrivateFieldGet(this, _editor2).toolbarPosition;\n        if (position) {\n          const {\n            style\n          } = editToolbar;\n          const x = _classPrivateFieldGet(this, _editor2)._uiManager.direction === \"ltr\" ? 1 - position[0] : position[0];\n          style.insetInlineEnd = \"\".concat(100 * x, \"%\");\n          style.top = \"calc(\".concat(100 * position[1], \"% + var(--editor-toolbar-vert-offset))\");\n        }\n        _classPrivateMethodGet(this, _addDeleteButton, _addDeleteButton2).call(this);\n        return editToolbar;\n      }\n      hide() {\n        var _classPrivateFieldGet29;\n        _classPrivateFieldGet(this, _toolbar).classList.add(\"hidden\");\n        (_classPrivateFieldGet29 = _classPrivateFieldGet(this, _colorPicker2)) === null || _classPrivateFieldGet29 === void 0 || _classPrivateFieldGet29.hideDropdown();\n      }\n      show() {\n        _classPrivateFieldGet(this, _toolbar).classList.remove(\"hidden\");\n      }\n      addAltTextButton(button) {\n        _classPrivateMethodGet(this, _addListenersToElement, _addListenersToElement2).call(this, button);\n        _classPrivateFieldGet(this, _buttons).prepend(button, _classPrivateFieldGet(this, _divider));\n      }\n      addColorPicker(colorPicker) {\n        _classPrivateFieldSet(this, _colorPicker2, colorPicker);\n        const button = colorPicker.renderButton();\n        _classPrivateMethodGet(this, _addListenersToElement, _addListenersToElement2).call(this, button);\n        _classPrivateFieldGet(this, _buttons).prepend(button, _classPrivateFieldGet(this, _divider));\n      }\n      remove() {\n        var _classPrivateFieldGet30;\n        _classPrivateFieldGet(this, _toolbar).remove();\n        (_classPrivateFieldGet30 = _classPrivateFieldGet(this, _colorPicker2)) === null || _classPrivateFieldGet30 === void 0 || _classPrivateFieldGet30.destroy();\n        _classPrivateFieldSet(this, _colorPicker2, null);\n      }\n    }\n    function _pointerDown(e) {\n      e.stopPropagation();\n    }\n    function _focusIn2(e) {\n      _classPrivateFieldGet(this, _editor2)._focusEventsAllowed = false;\n      e.preventDefault();\n      e.stopPropagation();\n    }\n    function _focusOut2(e) {\n      _classPrivateFieldGet(this, _editor2)._focusEventsAllowed = true;\n      e.preventDefault();\n      e.stopPropagation();\n    }\n    function _addListenersToElement2(element) {\n      element.addEventListener(\"focusin\", _classPrivateMethodGet(this, _focusIn, _focusIn2).bind(this), {\n        capture: true\n      });\n      element.addEventListener(\"focusout\", _classPrivateMethodGet(this, _focusOut, _focusOut2).bind(this), {\n        capture: true\n      });\n      element.addEventListener(\"contextmenu\", display_utils.noContextMenu);\n    }\n    function _addDeleteButton2() {\n      const button = document.createElement(\"button\");\n      button.className = \"delete\";\n      button.tabIndex = 0;\n      button.setAttribute(\"data-l10n-id\", \"pdfjs-editor-remove-\".concat(_classPrivateFieldGet(this, _editor2).editorType, \"-button\"));\n      _classPrivateMethodGet(this, _addListenersToElement, _addListenersToElement2).call(this, button);\n      button.addEventListener(\"click\", e => {\n        _classPrivateFieldGet(this, _editor2)._uiManager.delete();\n      });\n      _classPrivateFieldGet(this, _buttons).append(button);\n    }\n    function _get_divider() {\n      const divider = document.createElement(\"div\");\n      divider.className = \"divider\";\n      return divider;\n    }\n    ; // CONCATENATED MODULE: ./src/display/editor/editor.js\n    var _allResizerDivs = /*#__PURE__*/new WeakMap();\n    var _altText2 = /*#__PURE__*/new WeakMap();\n    var _keepAspectRatio = /*#__PURE__*/new WeakMap();\n    var _resizersDiv = /*#__PURE__*/new WeakMap();\n    var _savedDimensions = /*#__PURE__*/new WeakMap();\n    var _boundFocusin = /*#__PURE__*/new WeakMap();\n    var _boundFocusout = /*#__PURE__*/new WeakMap();\n    var _editToolbar = /*#__PURE__*/new WeakMap();\n    var _focusedResizerName = /*#__PURE__*/new WeakMap();\n    var _hasBeenClicked = /*#__PURE__*/new WeakMap();\n    var _isEditing = /*#__PURE__*/new WeakMap();\n    var _isInEditMode = /*#__PURE__*/new WeakMap();\n    var _isResizerEnabledForKeyboard = /*#__PURE__*/new WeakMap();\n    var _moveInDOMTimeout = /*#__PURE__*/new WeakMap();\n    var _isDraggable = /*#__PURE__*/new WeakMap();\n    var _zIndex = /*#__PURE__*/new WeakMap();\n    var _translate = /*#__PURE__*/new WeakSet();\n    var _getBaseTranslation = /*#__PURE__*/new WeakSet();\n    var _getRotationMatrix = /*#__PURE__*/new WeakSet();\n    var _createResizers = /*#__PURE__*/new WeakSet();\n    var _resizerPointerdown = /*#__PURE__*/new WeakSet();\n    var _addResizeToUndoStack = /*#__PURE__*/new WeakSet();\n    var _resizerPointermove = /*#__PURE__*/new WeakSet();\n    var _selectOnPointerEvent = /*#__PURE__*/new WeakSet();\n    var _setUpDragSession = /*#__PURE__*/new WeakSet();\n    var _resizerKeydown = /*#__PURE__*/new WeakSet();\n    var _resizerBlur = /*#__PURE__*/new WeakSet();\n    var _resizerFocus = /*#__PURE__*/new WeakSet();\n    var _setResizerTabIndex = /*#__PURE__*/new WeakSet();\n    var _stopResizing = /*#__PURE__*/new WeakSet();\n    class AnnotationEditor {\n      static get _resizerKeyboardManager() {\n        const resize = AnnotationEditor.prototype._resizeWithKeyboard;\n        const small = tools.AnnotationEditorUIManager.TRANSLATE_SMALL;\n        const big = tools.AnnotationEditorUIManager.TRANSLATE_BIG;\n        return (0, util.shadow)(this, \"_resizerKeyboardManager\", new tools.KeyboardManager([[[\"ArrowLeft\", \"mac+ArrowLeft\"], resize, {\n          args: [-small, 0]\n        }], [[\"ctrl+ArrowLeft\", \"mac+shift+ArrowLeft\"], resize, {\n          args: [-big, 0]\n        }], [[\"ArrowRight\", \"mac+ArrowRight\"], resize, {\n          args: [small, 0]\n        }], [[\"ctrl+ArrowRight\", \"mac+shift+ArrowRight\"], resize, {\n          args: [big, 0]\n        }], [[\"ArrowUp\", \"mac+ArrowUp\"], resize, {\n          args: [0, -small]\n        }], [[\"ctrl+ArrowUp\", \"mac+shift+ArrowUp\"], resize, {\n          args: [0, -big]\n        }], [[\"ArrowDown\", \"mac+ArrowDown\"], resize, {\n          args: [0, small]\n        }], [[\"ctrl+ArrowDown\", \"mac+shift+ArrowDown\"], resize, {\n          args: [0, big]\n        }], [[\"Escape\", \"mac+Escape\"], AnnotationEditor.prototype._stopResizingWithKeyboard]]));\n      }\n      constructor(parameters) {\n        _classPrivateMethodInitSpec(this, _stopResizing);\n        _classPrivateMethodInitSpec(this, _setResizerTabIndex);\n        _classPrivateMethodInitSpec(this, _resizerFocus);\n        _classPrivateMethodInitSpec(this, _resizerBlur);\n        _classPrivateMethodInitSpec(this, _resizerKeydown);\n        _classPrivateMethodInitSpec(this, _setUpDragSession);\n        _classPrivateMethodInitSpec(this, _selectOnPointerEvent);\n        _classPrivateMethodInitSpec(this, _resizerPointermove);\n        _classPrivateMethodInitSpec(this, _addResizeToUndoStack);\n        _classPrivateMethodInitSpec(this, _resizerPointerdown);\n        _classPrivateMethodInitSpec(this, _createResizers);\n        _classPrivateMethodInitSpec(this, _getRotationMatrix);\n        _classPrivateMethodInitSpec(this, _getBaseTranslation);\n        _classPrivateMethodInitSpec(this, _translate);\n        _classPrivateFieldInitSpec(this, _allResizerDivs, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _altText2, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _keepAspectRatio, {\n          writable: true,\n          value: false\n        });\n        _classPrivateFieldInitSpec(this, _resizersDiv, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _savedDimensions, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _boundFocusin, {\n          writable: true,\n          value: this.focusin.bind(this)\n        });\n        _classPrivateFieldInitSpec(this, _boundFocusout, {\n          writable: true,\n          value: this.focusout.bind(this)\n        });\n        _classPrivateFieldInitSpec(this, _editToolbar, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _focusedResizerName, {\n          writable: true,\n          value: \"\"\n        });\n        _classPrivateFieldInitSpec(this, _hasBeenClicked, {\n          writable: true,\n          value: false\n        });\n        _classPrivateFieldInitSpec(this, _isEditing, {\n          writable: true,\n          value: false\n        });\n        _classPrivateFieldInitSpec(this, _isInEditMode, {\n          writable: true,\n          value: false\n        });\n        _classPrivateFieldInitSpec(this, _isResizerEnabledForKeyboard, {\n          writable: true,\n          value: false\n        });\n        _classPrivateFieldInitSpec(this, _moveInDOMTimeout, {\n          writable: true,\n          value: null\n        });\n        _defineProperty(this, \"_initialOptions\", Object.create(null));\n        _defineProperty(this, \"_uiManager\", null);\n        _defineProperty(this, \"_focusEventsAllowed\", true);\n        _defineProperty(this, \"_l10nPromise\", null);\n        _classPrivateFieldInitSpec(this, _isDraggable, {\n          writable: true,\n          value: false\n        });\n        _classPrivateFieldInitSpec(this, _zIndex, {\n          writable: true,\n          value: AnnotationEditor._zIndex++\n        });\n        if (this.constructor === AnnotationEditor) {\n          (0, util.unreachable)(\"Cannot initialize AnnotationEditor.\");\n        }\n        this.parent = parameters.parent;\n        this.id = parameters.id;\n        this.width = this.height = null;\n        this.pageIndex = parameters.parent.pageIndex;\n        this.name = parameters.name;\n        this.div = null;\n        this._uiManager = parameters.uiManager;\n        this.annotationElementId = null;\n        this._willKeepAspectRatio = false;\n        this._initialOptions.isCentered = parameters.isCentered;\n        this._structTreeParentId = null;\n        const {\n          rotation: _rotation,\n          rawDims: {\n            pageWidth: _pageWidth,\n            pageHeight: _pageHeight,\n            pageX,\n            pageY\n          }\n        } = this.parent.viewport;\n        this.rotation = _rotation;\n        this.pageRotation = (360 + _rotation - this._uiManager.viewParameters.rotation) % 360;\n        this.pageDimensions = [_pageWidth, _pageHeight];\n        this.pageTranslation = [pageX, pageY];\n        const [_width, _height] = this.parentDimensions;\n        this.x = parameters.x / _width;\n        this.y = parameters.y / _height;\n        this.isAttachedToDOM = false;\n        this.deleted = false;\n      }\n      get editorType() {\n        return Object.getPrototypeOf(this).constructor._type;\n      }\n      static get _defaultLineColor() {\n        return (0, util.shadow)(this, \"_defaultLineColor\", this._colorManager.getHexCode(\"CanvasText\"));\n      }\n      static deleteAnnotationElement(editor) {\n        const fakeEditor = new FakeEditor({\n          id: editor.parent.getNextId(),\n          parent: editor.parent,\n          uiManager: editor._uiManager\n        });\n        fakeEditor.annotationElementId = editor.annotationElementId;\n        fakeEditor.deleted = true;\n        fakeEditor._uiManager.addToAnnotationStorage(fakeEditor);\n      }\n      static initialize(l10n) {\n        let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n        AnnotationEditor._l10nPromise || (AnnotationEditor._l10nPromise = new Map([\"pdfjs-editor-alt-text-button-label\", \"pdfjs-editor-alt-text-edit-button-label\", \"pdfjs-editor-alt-text-decorative-tooltip\", \"pdfjs-editor-resizer-label-topLeft\", \"pdfjs-editor-resizer-label-topMiddle\", \"pdfjs-editor-resizer-label-topRight\", \"pdfjs-editor-resizer-label-middleRight\", \"pdfjs-editor-resizer-label-bottomRight\", \"pdfjs-editor-resizer-label-bottomMiddle\", \"pdfjs-editor-resizer-label-bottomLeft\", \"pdfjs-editor-resizer-label-middleLeft\"].map(str => [str, l10n.get(str.replaceAll(/([A-Z])/g, c => \"-\".concat(c.toLowerCase())))])));\n        if (options !== null && options !== void 0 && options.strings) {\n          for (const str of options.strings) {\n            AnnotationEditor._l10nPromise.set(str, l10n.get(str));\n          }\n        }\n        if (AnnotationEditor._borderLineWidth !== -1) {\n          return;\n        }\n        const style = getComputedStyle(document.documentElement);\n        AnnotationEditor._borderLineWidth = parseFloat(style.getPropertyValue(\"--outline-width\")) || 0;\n      }\n      static updateDefaultParams(_type, _value) {}\n      static get defaultPropertiesToUpdate() {\n        return [];\n      }\n      static isHandlingMimeForPasting(mime) {\n        return false;\n      }\n      static paste(item, parent) {\n        (0, util.unreachable)(\"Not implemented\");\n      }\n      get propertiesToUpdate() {\n        return [];\n      }\n      get _isDraggable() {\n        return _classPrivateFieldGet(this, _isDraggable);\n      }\n      set _isDraggable(value) {\n        var _this$div2;\n        _classPrivateFieldSet(this, _isDraggable, value);\n        (_this$div2 = this.div) === null || _this$div2 === void 0 || _this$div2.classList.toggle(\"draggable\", value);\n      }\n      get isEnterHandled() {\n        return true;\n      }\n      center() {\n        const [pageWidth, pageHeight] = this.pageDimensions;\n        switch (this.parentRotation) {\n          case 90:\n            this.x -= this.height * pageHeight / (pageWidth * 2);\n            this.y += this.width * pageWidth / (pageHeight * 2);\n            break;\n          case 180:\n            this.x += this.width / 2;\n            this.y += this.height / 2;\n            break;\n          case 270:\n            this.x += this.height * pageHeight / (pageWidth * 2);\n            this.y -= this.width * pageWidth / (pageHeight * 2);\n            break;\n          default:\n            this.x -= this.width / 2;\n            this.y -= this.height / 2;\n            break;\n        }\n        this.fixAndSetPosition();\n      }\n      addCommands(params) {\n        this._uiManager.addCommands(params);\n      }\n      get currentLayer() {\n        return this._uiManager.currentLayer;\n      }\n      setInBackground() {\n        this.div.style.zIndex = 0;\n      }\n      setInForeground() {\n        this.div.style.zIndex = _classPrivateFieldGet(this, _zIndex);\n      }\n      setParent(parent) {\n        if (parent !== null) {\n          this.pageIndex = parent.pageIndex;\n          this.pageDimensions = parent.pageDimensions;\n        } else {\n          _classPrivateMethodGet(this, _stopResizing, _stopResizing2).call(this);\n        }\n        this.parent = parent;\n      }\n      focusin(event) {\n        if (!this._focusEventsAllowed) {\n          return;\n        }\n        if (!_classPrivateFieldGet(this, _hasBeenClicked)) {\n          this.parent.setSelected(this);\n        } else {\n          _classPrivateFieldSet(this, _hasBeenClicked, false);\n        }\n      }\n      focusout(event) {\n        var _this$parent4;\n        if (!this._focusEventsAllowed) {\n          return;\n        }\n        if (!this.isAttachedToDOM) {\n          return;\n        }\n        const target = event.relatedTarget;\n        if (target !== null && target !== void 0 && target.closest(\"#\".concat(this.id))) {\n          return;\n        }\n        event.preventDefault();\n        if (!((_this$parent4 = this.parent) !== null && _this$parent4 !== void 0 && _this$parent4.isMultipleSelection)) {\n          this.commitOrRemove();\n        }\n      }\n      commitOrRemove() {\n        if (this.isEmpty()) {\n          this.remove();\n        } else {\n          this.commit();\n        }\n      }\n      commit() {\n        this.addToAnnotationStorage();\n      }\n      addToAnnotationStorage() {\n        this._uiManager.addToAnnotationStorage(this);\n      }\n      setAt(x, y, tx, ty) {\n        const [width, height] = this.parentDimensions;\n        [tx, ty] = this.screenToPageTranslation(tx, ty);\n        this.x = (x + tx) / width;\n        this.y = (y + ty) / height;\n        this.fixAndSetPosition();\n      }\n      translate(x, y) {\n        _classPrivateMethodGet(this, _translate, _translate2).call(this, this.parentDimensions, x, y);\n      }\n      translateInPage(x, y) {\n        _classPrivateMethodGet(this, _translate, _translate2).call(this, this.pageDimensions, x, y);\n        this.div.scrollIntoView({\n          block: \"nearest\"\n        });\n      }\n      drag(tx, ty) {\n        const [parentWidth, parentHeight] = this.parentDimensions;\n        this.x += tx / parentWidth;\n        this.y += ty / parentHeight;\n        if (this.parent && (this.x < 0 || this.x > 1 || this.y < 0 || this.y > 1)) {\n          const {\n            x,\n            y\n          } = this.div.getBoundingClientRect();\n          if (this.parent.findNewParent(this, x, y)) {\n            this.x -= Math.floor(this.x);\n            this.y -= Math.floor(this.y);\n          }\n        }\n        let {\n          x,\n          y\n        } = this;\n        const [bx, by] = _classPrivateMethodGet(this, _getBaseTranslation, _getBaseTranslation2).call(this);\n        x += bx;\n        y += by;\n        this.div.style.left = \"\".concat((100 * x).toFixed(2), \"%\");\n        this.div.style.top = \"\".concat((100 * y).toFixed(2), \"%\");\n        this.div.scrollIntoView({\n          block: \"nearest\"\n        });\n      }\n      fixAndSetPosition() {\n        let rotation = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.rotation;\n        const [pageWidth, pageHeight] = this.pageDimensions;\n        let {\n          x,\n          y,\n          width,\n          height\n        } = this;\n        width *= pageWidth;\n        height *= pageHeight;\n        x *= pageWidth;\n        y *= pageHeight;\n        switch (rotation) {\n          case 0:\n            x = Math.max(0, Math.min(pageWidth - width, x));\n            y = Math.max(0, Math.min(pageHeight - height, y));\n            break;\n          case 90:\n            x = Math.max(0, Math.min(pageWidth - height, x));\n            y = Math.min(pageHeight, Math.max(width, y));\n            break;\n          case 180:\n            x = Math.min(pageWidth, Math.max(width, x));\n            y = Math.min(pageHeight, Math.max(height, y));\n            break;\n          case 270:\n            x = Math.min(pageWidth, Math.max(height, x));\n            y = Math.max(0, Math.min(pageHeight - width, y));\n            break;\n        }\n        this.x = x /= pageWidth;\n        this.y = y /= pageHeight;\n        const [bx, by] = _classPrivateMethodGet(this, _getBaseTranslation, _getBaseTranslation2).call(this);\n        x += bx;\n        y += by;\n        const {\n          style\n        } = this.div;\n        style.left = \"\".concat((100 * x).toFixed(2), \"%\");\n        style.top = \"\".concat((100 * y).toFixed(2), \"%\");\n        this.moveInDOM();\n      }\n      screenToPageTranslation(x, y) {\n        return _classStaticPrivateMethodGet(AnnotationEditor, AnnotationEditor, _rotatePoint).call(AnnotationEditor, x, y, this.parentRotation);\n      }\n      pageTranslationToScreen(x, y) {\n        return _classStaticPrivateMethodGet(AnnotationEditor, AnnotationEditor, _rotatePoint).call(AnnotationEditor, x, y, 360 - this.parentRotation);\n      }\n      get parentScale() {\n        return this._uiManager.viewParameters.realScale;\n      }\n      get parentRotation() {\n        return (this._uiManager.viewParameters.rotation + this.pageRotation) % 360;\n      }\n      get parentDimensions() {\n        const {\n          parentScale,\n          pageDimensions: [pageWidth, pageHeight]\n        } = this;\n        const scaledWidth = pageWidth * parentScale;\n        const scaledHeight = pageHeight * parentScale;\n        return util.FeatureTest.isCSSRoundSupported ? [Math.round(scaledWidth), Math.round(scaledHeight)] : [scaledWidth, scaledHeight];\n      }\n      setDims(width, height) {\n        const [parentWidth, parentHeight] = this.parentDimensions;\n        this.div.style.width = \"\".concat((100 * width / parentWidth).toFixed(2), \"%\");\n        if (!_classPrivateFieldGet(this, _keepAspectRatio)) {\n          this.div.style.height = \"\".concat((100 * height / parentHeight).toFixed(2), \"%\");\n        }\n      }\n      fixDims() {\n        const {\n          style\n        } = this.div;\n        const {\n          height,\n          width\n        } = style;\n        const widthPercent = width.endsWith(\"%\");\n        const heightPercent = !_classPrivateFieldGet(this, _keepAspectRatio) && height.endsWith(\"%\");\n        if (widthPercent && heightPercent) {\n          return;\n        }\n        const [parentWidth, parentHeight] = this.parentDimensions;\n        if (!widthPercent) {\n          style.width = \"\".concat((100 * parseFloat(width) / parentWidth).toFixed(2), \"%\");\n        }\n        if (!_classPrivateFieldGet(this, _keepAspectRatio) && !heightPercent) {\n          style.height = \"\".concat((100 * parseFloat(height) / parentHeight).toFixed(2), \"%\");\n        }\n      }\n      getInitialTranslation() {\n        return [0, 0];\n      }\n      altTextFinish() {\n        var _classPrivateFieldGet31;\n        (_classPrivateFieldGet31 = _classPrivateFieldGet(this, _altText2)) === null || _classPrivateFieldGet31 === void 0 || _classPrivateFieldGet31.finish();\n      }\n      async addEditToolbar() {\n        if (_classPrivateFieldGet(this, _editToolbar) || _classPrivateFieldGet(this, _isInEditMode)) {\n          return _classPrivateFieldGet(this, _editToolbar);\n        }\n        _classPrivateFieldSet(this, _editToolbar, new EditorToolbar(this));\n        this.div.append(_classPrivateFieldGet(this, _editToolbar).render());\n        if (_classPrivateFieldGet(this, _altText2)) {\n          _classPrivateFieldGet(this, _editToolbar).addAltTextButton(await _classPrivateFieldGet(this, _altText2).render());\n        }\n        return _classPrivateFieldGet(this, _editToolbar);\n      }\n      removeEditToolbar() {\n        var _classPrivateFieldGet32;\n        if (!_classPrivateFieldGet(this, _editToolbar)) {\n          return;\n        }\n        _classPrivateFieldGet(this, _editToolbar).remove();\n        _classPrivateFieldSet(this, _editToolbar, null);\n        (_classPrivateFieldGet32 = _classPrivateFieldGet(this, _altText2)) === null || _classPrivateFieldGet32 === void 0 || _classPrivateFieldGet32.destroy();\n      }\n      getClientDimensions() {\n        return this.div.getBoundingClientRect();\n      }\n      async addAltTextButton() {\n        if (_classPrivateFieldGet(this, _altText2)) {\n          return;\n        }\n        AltText.initialize(AnnotationEditor._l10nPromise);\n        _classPrivateFieldSet(this, _altText2, new AltText(this));\n        await this.addEditToolbar();\n      }\n      get altTextData() {\n        var _classPrivateFieldGet33;\n        return (_classPrivateFieldGet33 = _classPrivateFieldGet(this, _altText2)) === null || _classPrivateFieldGet33 === void 0 ? void 0 : _classPrivateFieldGet33.data;\n      }\n      set altTextData(data) {\n        if (!_classPrivateFieldGet(this, _altText2)) {\n          return;\n        }\n        _classPrivateFieldGet(this, _altText2).data = data;\n      }\n      render() {\n        this.div = document.createElement(\"div\");\n        this.div.setAttribute(\"data-editor-rotation\", (360 - this.rotation) % 360);\n        this.div.className = this.name;\n        this.div.setAttribute(\"id\", this.id);\n        this.div.setAttribute(\"tabIndex\", 0);\n        this.setInForeground();\n        this.div.addEventListener(\"focusin\", _classPrivateFieldGet(this, _boundFocusin));\n        this.div.addEventListener(\"focusout\", _classPrivateFieldGet(this, _boundFocusout));\n        const [parentWidth, parentHeight] = this.parentDimensions;\n        if (this.parentRotation % 180 !== 0) {\n          this.div.style.maxWidth = \"\".concat((100 * parentHeight / parentWidth).toFixed(2), \"%\");\n          this.div.style.maxHeight = \"\".concat((100 * parentWidth / parentHeight).toFixed(2), \"%\");\n        }\n        const [tx, ty] = this.getInitialTranslation();\n        this.translate(tx, ty);\n        (0, tools.bindEvents)(this, this.div, [\"pointerdown\"]);\n        return this.div;\n      }\n      pointerdown(event) {\n        const {\n          isMac\n        } = util.FeatureTest.platform;\n        if (event.button !== 0 || event.ctrlKey && isMac) {\n          event.preventDefault();\n          return;\n        }\n        _classPrivateFieldSet(this, _hasBeenClicked, true);\n        if (this._isDraggable) {\n          _classPrivateMethodGet(this, _setUpDragSession, _setUpDragSession2).call(this, event);\n          return;\n        }\n        _classPrivateMethodGet(this, _selectOnPointerEvent, _selectOnPointerEvent2).call(this, event);\n      }\n      moveInDOM() {\n        if (_classPrivateFieldGet(this, _moveInDOMTimeout)) {\n          clearTimeout(_classPrivateFieldGet(this, _moveInDOMTimeout));\n        }\n        _classPrivateFieldSet(this, _moveInDOMTimeout, setTimeout(() => {\n          var _this$parent5;\n          _classPrivateFieldSet(this, _moveInDOMTimeout, null);\n          (_this$parent5 = this.parent) === null || _this$parent5 === void 0 || _this$parent5.moveEditorInDOM(this);\n        }, 0));\n      }\n      _setParentAndPosition(parent, x, y) {\n        parent.changeParent(this);\n        this.x = x;\n        this.y = y;\n        this.fixAndSetPosition();\n      }\n      getRect(tx, ty) {\n        let rotation = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this.rotation;\n        const scale = this.parentScale;\n        const [pageWidth, pageHeight] = this.pageDimensions;\n        const [pageX, pageY] = this.pageTranslation;\n        const shiftX = tx / scale;\n        const shiftY = ty / scale;\n        const x = this.x * pageWidth;\n        const y = this.y * pageHeight;\n        const width = this.width * pageWidth;\n        const height = this.height * pageHeight;\n        switch (rotation) {\n          case 0:\n            return [x + shiftX + pageX, pageHeight - y - shiftY - height + pageY, x + shiftX + width + pageX, pageHeight - y - shiftY + pageY];\n          case 90:\n            return [x + shiftY + pageX, pageHeight - y + shiftX + pageY, x + shiftY + height + pageX, pageHeight - y + shiftX + width + pageY];\n          case 180:\n            return [x - shiftX - width + pageX, pageHeight - y + shiftY + pageY, x - shiftX + pageX, pageHeight - y + shiftY + height + pageY];\n          case 270:\n            return [x - shiftY - height + pageX, pageHeight - y - shiftX - width + pageY, x - shiftY + pageX, pageHeight - y - shiftX + pageY];\n          default:\n            throw new Error(\"Invalid rotation\");\n        }\n      }\n      getRectInCurrentCoords(rect, pageHeight) {\n        const [x1, y1, x2, y2] = rect;\n        const width = x2 - x1;\n        const height = y2 - y1;\n        switch (this.rotation) {\n          case 0:\n            return [x1, pageHeight - y2, width, height];\n          case 90:\n            return [x1, pageHeight - y1, height, width];\n          case 180:\n            return [x2, pageHeight - y1, width, height];\n          case 270:\n            return [x2, pageHeight - y2, height, width];\n          default:\n            throw new Error(\"Invalid rotation\");\n        }\n      }\n      onceAdded() {}\n      isEmpty() {\n        return false;\n      }\n      enableEditMode() {\n        _classPrivateFieldSet(this, _isInEditMode, true);\n      }\n      disableEditMode() {\n        _classPrivateFieldSet(this, _isInEditMode, false);\n      }\n      isInEditMode() {\n        return _classPrivateFieldGet(this, _isInEditMode);\n      }\n      shouldGetKeyboardEvents() {\n        return _classPrivateFieldGet(this, _isResizerEnabledForKeyboard);\n      }\n      needsToBeRebuilt() {\n        return this.div && !this.isAttachedToDOM;\n      }\n      rebuild() {\n        var _this$div3, _this$div4;\n        (_this$div3 = this.div) === null || _this$div3 === void 0 || _this$div3.addEventListener(\"focusin\", _classPrivateFieldGet(this, _boundFocusin));\n        (_this$div4 = this.div) === null || _this$div4 === void 0 || _this$div4.addEventListener(\"focusout\", _classPrivateFieldGet(this, _boundFocusout));\n      }\n      rotate(_angle) {}\n      serialize() {\n        let isForCopying = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n        let context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n        (0, util.unreachable)(\"An editor must be serializable\");\n      }\n      static deserialize(data, parent, uiManager) {\n        const editor = new this.prototype.constructor({\n          parent,\n          id: parent.getNextId(),\n          uiManager\n        });\n        editor.rotation = data.rotation;\n        const [pageWidth, pageHeight] = editor.pageDimensions;\n        const [x, y, width, height] = editor.getRectInCurrentCoords(data.rect, pageHeight);\n        editor.x = x / pageWidth;\n        editor.y = y / pageHeight;\n        editor.width = width / pageWidth;\n        editor.height = height / pageHeight;\n        return editor;\n      }\n      remove() {\n        this.div.removeEventListener(\"focusin\", _classPrivateFieldGet(this, _boundFocusin));\n        this.div.removeEventListener(\"focusout\", _classPrivateFieldGet(this, _boundFocusout));\n        if (!this.isEmpty()) {\n          this.commit();\n        }\n        if (this.parent) {\n          this.parent.remove(this);\n        } else {\n          this._uiManager.removeEditor(this);\n        }\n        if (_classPrivateFieldGet(this, _moveInDOMTimeout)) {\n          clearTimeout(_classPrivateFieldGet(this, _moveInDOMTimeout));\n          _classPrivateFieldSet(this, _moveInDOMTimeout, null);\n        }\n        _classPrivateMethodGet(this, _stopResizing, _stopResizing2).call(this);\n        this.removeEditToolbar();\n      }\n      get isResizable() {\n        return false;\n      }\n      makeResizable() {\n        if (this.isResizable) {\n          _classPrivateMethodGet(this, _createResizers, _createResizers2).call(this);\n          _classPrivateFieldGet(this, _resizersDiv).classList.remove(\"hidden\");\n          (0, tools.bindEvents)(this, this.div, [\"keydown\"]);\n        }\n      }\n      get toolbarPosition() {\n        return null;\n      }\n      keydown(event) {\n        if (!this.isResizable || event.target !== this.div || event.key !== \"Enter\") {\n          return;\n        }\n        this._uiManager.setSelected(this);\n        _classPrivateFieldSet(this, _savedDimensions, {\n          savedX: this.x,\n          savedY: this.y,\n          savedWidth: this.width,\n          savedHeight: this.height\n        });\n        const children = _classPrivateFieldGet(this, _resizersDiv).children;\n        if (!_classPrivateFieldGet(this, _allResizerDivs)) {\n          _classPrivateFieldSet(this, _allResizerDivs, Array.from(children));\n          const boundResizerKeydown = _classPrivateMethodGet(this, _resizerKeydown, _resizerKeydown2).bind(this);\n          const boundResizerBlur = _classPrivateMethodGet(this, _resizerBlur, _resizerBlur2).bind(this);\n          for (const div of _classPrivateFieldGet(this, _allResizerDivs)) {\n            const name = div.getAttribute(\"data-resizer-name\");\n            div.setAttribute(\"role\", \"spinbutton\");\n            div.addEventListener(\"keydown\", boundResizerKeydown);\n            div.addEventListener(\"blur\", boundResizerBlur);\n            div.addEventListener(\"focus\", _classPrivateMethodGet(this, _resizerFocus, _resizerFocus2).bind(this, name));\n            AnnotationEditor._l10nPromise.get(\"pdfjs-editor-resizer-label-\".concat(name)).then(msg => div.setAttribute(\"aria-label\", msg));\n          }\n        }\n        const first = _classPrivateFieldGet(this, _allResizerDivs)[0];\n        let firstPosition = 0;\n        for (const div of children) {\n          if (div === first) {\n            break;\n          }\n          firstPosition++;\n        }\n        const nextFirstPosition = (360 - this.rotation + this.parentRotation) % 360 / 90 * (_classPrivateFieldGet(this, _allResizerDivs).length / 4);\n        if (nextFirstPosition !== firstPosition) {\n          if (nextFirstPosition < firstPosition) {\n            for (let i = 0; i < firstPosition - nextFirstPosition; i++) {\n              _classPrivateFieldGet(this, _resizersDiv).append(_classPrivateFieldGet(this, _resizersDiv).firstChild);\n            }\n          } else if (nextFirstPosition > firstPosition) {\n            for (let i = 0; i < nextFirstPosition - firstPosition; i++) {\n              _classPrivateFieldGet(this, _resizersDiv).firstChild.before(_classPrivateFieldGet(this, _resizersDiv).lastChild);\n            }\n          }\n          let i = 0;\n          for (const child of children) {\n            const div = _classPrivateFieldGet(this, _allResizerDivs)[i++];\n            const name = div.getAttribute(\"data-resizer-name\");\n            AnnotationEditor._l10nPromise.get(\"pdfjs-editor-resizer-label-\".concat(name)).then(msg => child.setAttribute(\"aria-label\", msg));\n          }\n        }\n        _classPrivateMethodGet(this, _setResizerTabIndex, _setResizerTabIndex2).call(this, 0);\n        _classPrivateFieldSet(this, _isResizerEnabledForKeyboard, true);\n        _classPrivateFieldGet(this, _resizersDiv).firstChild.focus({\n          focusVisible: true\n        });\n        event.preventDefault();\n        event.stopImmediatePropagation();\n      }\n      _resizeWithKeyboard(x, y) {\n        if (!_classPrivateFieldGet(this, _isResizerEnabledForKeyboard)) {\n          return;\n        }\n        _classPrivateMethodGet(this, _resizerPointermove, _resizerPointermove2).call(this, _classPrivateFieldGet(this, _focusedResizerName), {\n          movementX: x,\n          movementY: y\n        });\n      }\n      _stopResizingWithKeyboard() {\n        _classPrivateMethodGet(this, _stopResizing, _stopResizing2).call(this);\n        this.div.focus();\n      }\n      select() {\n        var _this$div5, _classPrivateFieldGet35;\n        this.makeResizable();\n        (_this$div5 = this.div) === null || _this$div5 === void 0 || _this$div5.classList.add(\"selectedEditor\");\n        if (!_classPrivateFieldGet(this, _editToolbar)) {\n          this.addEditToolbar().then(() => {\n            var _this$div6;\n            if ((_this$div6 = this.div) !== null && _this$div6 !== void 0 && _this$div6.classList.contains(\"selectedEditor\")) {\n              var _classPrivateFieldGet34;\n              (_classPrivateFieldGet34 = _classPrivateFieldGet(this, _editToolbar)) === null || _classPrivateFieldGet34 === void 0 || _classPrivateFieldGet34.show();\n            }\n          });\n          return;\n        }\n        (_classPrivateFieldGet35 = _classPrivateFieldGet(this, _editToolbar)) === null || _classPrivateFieldGet35 === void 0 || _classPrivateFieldGet35.show();\n      }\n      unselect() {\n        var _classPrivateFieldGet36, _this$div7, _this$div8, _classPrivateFieldGet37;\n        (_classPrivateFieldGet36 = _classPrivateFieldGet(this, _resizersDiv)) === null || _classPrivateFieldGet36 === void 0 || _classPrivateFieldGet36.classList.add(\"hidden\");\n        (_this$div7 = this.div) === null || _this$div7 === void 0 || _this$div7.classList.remove(\"selectedEditor\");\n        if ((_this$div8 = this.div) !== null && _this$div8 !== void 0 && _this$div8.contains(document.activeElement)) {\n          this._uiManager.currentLayer.div.focus();\n        }\n        (_classPrivateFieldGet37 = _classPrivateFieldGet(this, _editToolbar)) === null || _classPrivateFieldGet37 === void 0 || _classPrivateFieldGet37.hide();\n      }\n      updateParams(type, value) {}\n      disableEditing() {}\n      enableEditing() {}\n      enterInEditMode() {}\n      getImageForAltText() {\n        return null;\n      }\n      get contentDiv() {\n        return this.div;\n      }\n      get isEditing() {\n        return _classPrivateFieldGet(this, _isEditing);\n      }\n      set isEditing(value) {\n        _classPrivateFieldSet(this, _isEditing, value);\n        if (!this.parent) {\n          return;\n        }\n        if (value) {\n          this.parent.setSelected(this);\n          this.parent.setActiveEditor(this);\n        } else {\n          this.parent.setActiveEditor(null);\n        }\n      }\n      setAspectRatio(width, height) {\n        _classPrivateFieldSet(this, _keepAspectRatio, true);\n        const aspectRatio = width / height;\n        const {\n          style\n        } = this.div;\n        style.aspectRatio = aspectRatio;\n        style.height = \"auto\";\n      }\n      static get MIN_SIZE() {\n        return 16;\n      }\n      static canCreateNewEmptyEditor() {\n        return true;\n      }\n    }\n    _AnnotationEditor = AnnotationEditor;\n    function _translate2(_ref49, x, y) {\n      let [width, height] = _ref49;\n      [x, y] = this.screenToPageTranslation(x, y);\n      this.x += x / width;\n      this.y += y / height;\n      this.fixAndSetPosition();\n    }\n    function _getBaseTranslation2() {\n      const [parentWidth, parentHeight] = this.parentDimensions;\n      const {\n        _borderLineWidth\n      } = _AnnotationEditor;\n      const x = _borderLineWidth / parentWidth;\n      const y = _borderLineWidth / parentHeight;\n      switch (this.rotation) {\n        case 90:\n          return [-x, y];\n        case 180:\n          return [x, y];\n        case 270:\n          return [x, -y];\n        default:\n          return [-x, -y];\n      }\n    }\n    function _rotatePoint(x, y, angle) {\n      switch (angle) {\n        case 90:\n          return [y, -x];\n        case 180:\n          return [-x, -y];\n        case 270:\n          return [-y, x];\n        default:\n          return [x, y];\n      }\n    }\n    function _getRotationMatrix2(rotation) {\n      switch (rotation) {\n        case 90:\n          {\n            const [pageWidth, pageHeight] = this.pageDimensions;\n            return [0, -pageWidth / pageHeight, pageHeight / pageWidth, 0];\n          }\n        case 180:\n          return [-1, 0, 0, -1];\n        case 270:\n          {\n            const [pageWidth, pageHeight] = this.pageDimensions;\n            return [0, pageWidth / pageHeight, -pageHeight / pageWidth, 0];\n          }\n        default:\n          return [1, 0, 0, 1];\n      }\n    }\n    function _createResizers2() {\n      if (_classPrivateFieldGet(this, _resizersDiv)) {\n        return;\n      }\n      _classPrivateFieldSet(this, _resizersDiv, document.createElement(\"div\"));\n      _classPrivateFieldGet(this, _resizersDiv).classList.add(\"resizers\");\n      const classes = this._willKeepAspectRatio ? [\"topLeft\", \"topRight\", \"bottomRight\", \"bottomLeft\"] : [\"topLeft\", \"topMiddle\", \"topRight\", \"middleRight\", \"bottomRight\", \"bottomMiddle\", \"bottomLeft\", \"middleLeft\"];\n      for (const name of classes) {\n        const div = document.createElement(\"div\");\n        _classPrivateFieldGet(this, _resizersDiv).append(div);\n        div.classList.add(\"resizer\", name);\n        div.setAttribute(\"data-resizer-name\", name);\n        div.addEventListener(\"pointerdown\", _classPrivateMethodGet(this, _resizerPointerdown, _resizerPointerdown2).bind(this, name));\n        div.addEventListener(\"contextmenu\", display_utils.noContextMenu);\n        div.tabIndex = -1;\n      }\n      this.div.prepend(_classPrivateFieldGet(this, _resizersDiv));\n    }\n    function _resizerPointerdown2(name, event) {\n      var _classPrivateFieldGet40;\n      event.preventDefault();\n      const {\n        isMac\n      } = util.FeatureTest.platform;\n      if (event.button !== 0 || event.ctrlKey && isMac) {\n        return;\n      }\n      (_classPrivateFieldGet40 = _classPrivateFieldGet(this, _altText2)) === null || _classPrivateFieldGet40 === void 0 || _classPrivateFieldGet40.toggle(false);\n      const boundResizerPointermove = _classPrivateMethodGet(this, _resizerPointermove, _resizerPointermove2).bind(this, name);\n      const savedDraggable = this._isDraggable;\n      this._isDraggable = false;\n      const pointerMoveOptions = {\n        passive: true,\n        capture: true\n      };\n      this.parent.togglePointerEvents(false);\n      window.addEventListener(\"pointermove\", boundResizerPointermove, pointerMoveOptions);\n      const savedX = this.x;\n      const savedY = this.y;\n      const savedWidth = this.width;\n      const savedHeight = this.height;\n      const savedParentCursor = this.parent.div.style.cursor;\n      const savedCursor = this.div.style.cursor;\n      this.div.style.cursor = this.parent.div.style.cursor = window.getComputedStyle(event.target).cursor;\n      const pointerUpCallback = () => {\n        var _classPrivateFieldGet41;\n        this.parent.togglePointerEvents(true);\n        (_classPrivateFieldGet41 = _classPrivateFieldGet(this, _altText2)) === null || _classPrivateFieldGet41 === void 0 || _classPrivateFieldGet41.toggle(true);\n        this._isDraggable = savedDraggable;\n        window.removeEventListener(\"pointerup\", pointerUpCallback);\n        window.removeEventListener(\"blur\", pointerUpCallback);\n        window.removeEventListener(\"pointermove\", boundResizerPointermove, pointerMoveOptions);\n        this.parent.div.style.cursor = savedParentCursor;\n        this.div.style.cursor = savedCursor;\n        _classPrivateMethodGet(this, _addResizeToUndoStack, _addResizeToUndoStack2).call(this, savedX, savedY, savedWidth, savedHeight);\n      };\n      window.addEventListener(\"pointerup\", pointerUpCallback);\n      window.addEventListener(\"blur\", pointerUpCallback);\n    }\n    function _addResizeToUndoStack2(savedX, savedY, savedWidth, savedHeight) {\n      const newX = this.x;\n      const newY = this.y;\n      const newWidth = this.width;\n      const newHeight = this.height;\n      if (newX === savedX && newY === savedY && newWidth === savedWidth && newHeight === savedHeight) {\n        return;\n      }\n      this.addCommands({\n        cmd: () => {\n          this.width = newWidth;\n          this.height = newHeight;\n          this.x = newX;\n          this.y = newY;\n          const [parentWidth, parentHeight] = this.parentDimensions;\n          this.setDims(parentWidth * newWidth, parentHeight * newHeight);\n          this.fixAndSetPosition();\n        },\n        undo: () => {\n          this.width = savedWidth;\n          this.height = savedHeight;\n          this.x = savedX;\n          this.y = savedY;\n          const [parentWidth, parentHeight] = this.parentDimensions;\n          this.setDims(parentWidth * savedWidth, parentHeight * savedHeight);\n          this.fixAndSetPosition();\n        },\n        mustExec: true\n      });\n    }\n    function _resizerPointermove2(name, event) {\n      const [parentWidth, parentHeight] = this.parentDimensions;\n      const savedX = this.x;\n      const savedY = this.y;\n      const savedWidth = this.width;\n      const savedHeight = this.height;\n      const minWidth = _AnnotationEditor.MIN_SIZE / parentWidth;\n      const minHeight = _AnnotationEditor.MIN_SIZE / parentHeight;\n      const round = x => Math.round(x * 10000) / 10000;\n      const rotationMatrix = _classPrivateMethodGet(this, _getRotationMatrix, _getRotationMatrix2).call(this, this.rotation);\n      const transf = (x, y) => [rotationMatrix[0] * x + rotationMatrix[2] * y, rotationMatrix[1] * x + rotationMatrix[3] * y];\n      const invRotationMatrix = _classPrivateMethodGet(this, _getRotationMatrix, _getRotationMatrix2).call(this, 360 - this.rotation);\n      const invTransf = (x, y) => [invRotationMatrix[0] * x + invRotationMatrix[2] * y, invRotationMatrix[1] * x + invRotationMatrix[3] * y];\n      let getPoint;\n      let getOpposite;\n      let isDiagonal = false;\n      let isHorizontal = false;\n      switch (name) {\n        case \"topLeft\":\n          isDiagonal = true;\n          getPoint = (w, h) => [0, 0];\n          getOpposite = (w, h) => [w, h];\n          break;\n        case \"topMiddle\":\n          getPoint = (w, h) => [w / 2, 0];\n          getOpposite = (w, h) => [w / 2, h];\n          break;\n        case \"topRight\":\n          isDiagonal = true;\n          getPoint = (w, h) => [w, 0];\n          getOpposite = (w, h) => [0, h];\n          break;\n        case \"middleRight\":\n          isHorizontal = true;\n          getPoint = (w, h) => [w, h / 2];\n          getOpposite = (w, h) => [0, h / 2];\n          break;\n        case \"bottomRight\":\n          isDiagonal = true;\n          getPoint = (w, h) => [w, h];\n          getOpposite = (w, h) => [0, 0];\n          break;\n        case \"bottomMiddle\":\n          getPoint = (w, h) => [w / 2, h];\n          getOpposite = (w, h) => [w / 2, 0];\n          break;\n        case \"bottomLeft\":\n          isDiagonal = true;\n          getPoint = (w, h) => [0, h];\n          getOpposite = (w, h) => [w, 0];\n          break;\n        case \"middleLeft\":\n          isHorizontal = true;\n          getPoint = (w, h) => [0, h / 2];\n          getOpposite = (w, h) => [w, h / 2];\n          break;\n      }\n      const point = getPoint(savedWidth, savedHeight);\n      const oppositePoint = getOpposite(savedWidth, savedHeight);\n      let transfOppositePoint = transf(...oppositePoint);\n      const oppositeX = round(savedX + transfOppositePoint[0]);\n      const oppositeY = round(savedY + transfOppositePoint[1]);\n      let ratioX = 1;\n      let ratioY = 1;\n      let [deltaX, deltaY] = this.screenToPageTranslation(event.movementX, event.movementY);\n      [deltaX, deltaY] = invTransf(deltaX / parentWidth, deltaY / parentHeight);\n      if (isDiagonal) {\n        const oldDiag = Math.hypot(savedWidth, savedHeight);\n        ratioX = ratioY = Math.max(Math.min(Math.hypot(oppositePoint[0] - point[0] - deltaX, oppositePoint[1] - point[1] - deltaY) / oldDiag, 1 / savedWidth, 1 / savedHeight), minWidth / savedWidth, minHeight / savedHeight);\n      } else if (isHorizontal) {\n        ratioX = Math.max(minWidth, Math.min(1, Math.abs(oppositePoint[0] - point[0] - deltaX))) / savedWidth;\n      } else {\n        ratioY = Math.max(minHeight, Math.min(1, Math.abs(oppositePoint[1] - point[1] - deltaY))) / savedHeight;\n      }\n      const newWidth = round(savedWidth * ratioX);\n      const newHeight = round(savedHeight * ratioY);\n      transfOppositePoint = transf(...getOpposite(newWidth, newHeight));\n      const newX = oppositeX - transfOppositePoint[0];\n      const newY = oppositeY - transfOppositePoint[1];\n      this.width = newWidth;\n      this.height = newHeight;\n      this.x = newX;\n      this.y = newY;\n      this.setDims(parentWidth * newWidth, parentHeight * newHeight);\n      this.fixAndSetPosition();\n    }\n    function _selectOnPointerEvent2(event) {\n      const {\n        isMac\n      } = util.FeatureTest.platform;\n      if (event.ctrlKey && !isMac || event.shiftKey || event.metaKey && isMac) {\n        this.parent.toggleSelected(this);\n      } else {\n        this.parent.setSelected(this);\n      }\n    }\n    function _setUpDragSession2(event) {\n      const isSelected = this._uiManager.isSelected(this);\n      this._uiManager.setUpDragSession();\n      let pointerMoveOptions, pointerMoveCallback;\n      if (isSelected) {\n        pointerMoveOptions = {\n          passive: true,\n          capture: true\n        };\n        pointerMoveCallback = e => {\n          const [tx, ty] = this.screenToPageTranslation(e.movementX, e.movementY);\n          this._uiManager.dragSelectedEditors(tx, ty);\n        };\n        window.addEventListener(\"pointermove\", pointerMoveCallback, pointerMoveOptions);\n      }\n      const pointerUpCallback = () => {\n        window.removeEventListener(\"pointerup\", pointerUpCallback);\n        window.removeEventListener(\"blur\", pointerUpCallback);\n        if (isSelected) {\n          window.removeEventListener(\"pointermove\", pointerMoveCallback, pointerMoveOptions);\n        }\n        _classPrivateFieldSet(this, _hasBeenClicked, false);\n        if (!this._uiManager.endDragSession()) {\n          _classPrivateMethodGet(this, _selectOnPointerEvent, _selectOnPointerEvent2).call(this, event);\n        }\n      };\n      window.addEventListener(\"pointerup\", pointerUpCallback);\n      window.addEventListener(\"blur\", pointerUpCallback);\n    }\n    function _resizerKeydown2(event) {\n      _AnnotationEditor._resizerKeyboardManager.exec(this, event);\n    }\n    function _resizerBlur2(event) {\n      var _event$relatedTarget;\n      if (_classPrivateFieldGet(this, _isResizerEnabledForKeyboard) && ((_event$relatedTarget = event.relatedTarget) === null || _event$relatedTarget === void 0 ? void 0 : _event$relatedTarget.parentNode) !== _classPrivateFieldGet(this, _resizersDiv)) {\n        _classPrivateMethodGet(this, _stopResizing, _stopResizing2).call(this);\n      }\n    }\n    function _resizerFocus2(name) {\n      _classPrivateFieldSet(this, _focusedResizerName, _classPrivateFieldGet(this, _isResizerEnabledForKeyboard) ? name : \"\");\n    }\n    function _setResizerTabIndex2(value) {\n      if (!_classPrivateFieldGet(this, _allResizerDivs)) {\n        return;\n      }\n      for (const div of _classPrivateFieldGet(this, _allResizerDivs)) {\n        div.tabIndex = value;\n      }\n    }\n    function _stopResizing2() {\n      _classPrivateFieldSet(this, _isResizerEnabledForKeyboard, false);\n      _classPrivateMethodGet(this, _setResizerTabIndex, _setResizerTabIndex2).call(this, -1);\n      if (_classPrivateFieldGet(this, _savedDimensions)) {\n        const {\n          savedX,\n          savedY,\n          savedWidth,\n          savedHeight\n        } = _classPrivateFieldGet(this, _savedDimensions);\n        _classPrivateMethodGet(this, _addResizeToUndoStack, _addResizeToUndoStack2).call(this, savedX, savedY, savedWidth, savedHeight);\n        _classPrivateFieldSet(this, _savedDimensions, null);\n      }\n    }\n    _defineProperty(AnnotationEditor, \"_borderLineWidth\", -1);\n    _defineProperty(AnnotationEditor, \"_colorManager\", new tools.ColorManager());\n    _defineProperty(AnnotationEditor, \"_zIndex\", 1);\n    class FakeEditor extends AnnotationEditor {\n      constructor(params) {\n        super(params);\n        this.annotationElementId = params.annotationElementId;\n        this.deleted = true;\n      }\n      serialize() {\n        return {\n          id: this.annotationElementId,\n          deleted: true,\n          pageIndex: this.pageIndex\n        };\n      }\n    }\n\n    /***/\n  }),\n  /***/405: ( /***/(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {\n    /* harmony export */__webpack_require__.d(__webpack_exports__, {\n      /* harmony export */Outliner: () => ( /* binding */Outliner)\n      /* harmony export */\n    });\n    var _box = /*#__PURE__*/new WeakMap();\n    var _verticalEdges = /*#__PURE__*/new WeakMap();\n    var _intervals = /*#__PURE__*/new WeakMap();\n    var _getOutlines = /*#__PURE__*/new WeakSet();\n    var _binarySearch = /*#__PURE__*/new WeakSet();\n    var _insert = /*#__PURE__*/new WeakSet();\n    var _remove = /*#__PURE__*/new WeakSet();\n    var _breakEdge = /*#__PURE__*/new WeakSet();\n    class Outliner {\n      constructor(boxes) {\n        let borderWidth = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n        let innerMargin = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n        let isLTR = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n        _classPrivateMethodInitSpec(this, _breakEdge);\n        _classPrivateMethodInitSpec(this, _remove);\n        _classPrivateMethodInitSpec(this, _insert);\n        _classPrivateMethodInitSpec(this, _binarySearch);\n        _classPrivateMethodInitSpec(this, _getOutlines);\n        _classPrivateFieldInitSpec(this, _box, {\n          writable: true,\n          value: void 0\n        });\n        _classPrivateFieldInitSpec(this, _verticalEdges, {\n          writable: true,\n          value: []\n        });\n        _classPrivateFieldInitSpec(this, _intervals, {\n          writable: true,\n          value: []\n        });\n        let minX = Infinity;\n        let maxX = -Infinity;\n        let minY = Infinity;\n        let maxY = -Infinity;\n        const NUMBER_OF_DIGITS = 4;\n        const EPSILON = 10 ** -NUMBER_OF_DIGITS;\n        for (const {\n          x,\n          y,\n          width,\n          height\n        } of boxes) {\n          const x1 = Math.floor((x - borderWidth) / EPSILON) * EPSILON;\n          const x2 = Math.ceil((x + width + borderWidth) / EPSILON) * EPSILON;\n          const y1 = Math.floor((y - borderWidth) / EPSILON) * EPSILON;\n          const y2 = Math.ceil((y + height + borderWidth) / EPSILON) * EPSILON;\n          const left = [x1, y1, y2, true];\n          const right = [x2, y1, y2, false];\n          _classPrivateFieldGet(this, _verticalEdges).push(left, right);\n          minX = Math.min(minX, x1);\n          maxX = Math.max(maxX, x2);\n          minY = Math.min(minY, y1);\n          maxY = Math.max(maxY, y2);\n        }\n        const bboxWidth = maxX - minX + 2 * innerMargin;\n        const bboxHeight = maxY - minY + 2 * innerMargin;\n        const shiftedMinX = minX - innerMargin;\n        const shiftedMinY = minY - innerMargin;\n        const lastEdge = _classPrivateFieldGet(this, _verticalEdges).at(isLTR ? -1 : -2);\n        const lastPoint = [lastEdge[0], lastEdge[2]];\n        for (const edge of _classPrivateFieldGet(this, _verticalEdges)) {\n          const [x, y1, y2] = edge;\n          edge[0] = (x - shiftedMinX) / bboxWidth;\n          edge[1] = (y1 - shiftedMinY) / bboxHeight;\n          edge[2] = (y2 - shiftedMinY) / bboxHeight;\n        }\n        _classPrivateFieldSet(this, _box, {\n          x: shiftedMinX,\n          y: shiftedMinY,\n          width: bboxWidth,\n          height: bboxHeight,\n          lastPoint\n        });\n      }\n      getOutlines() {\n        _classPrivateFieldGet(this, _verticalEdges).sort((a, b) => a[0] - b[0] || a[1] - b[1] || a[2] - b[2]);\n        const outlineVerticalEdges = [];\n        for (const edge of _classPrivateFieldGet(this, _verticalEdges)) {\n          if (edge[3]) {\n            outlineVerticalEdges.push(..._classPrivateMethodGet(this, _breakEdge, _breakEdge2).call(this, edge));\n            _classPrivateMethodGet(this, _insert, _insert2).call(this, edge);\n          } else {\n            _classPrivateMethodGet(this, _remove, _remove2).call(this, edge);\n            outlineVerticalEdges.push(..._classPrivateMethodGet(this, _breakEdge, _breakEdge2).call(this, edge));\n          }\n        }\n        return _classPrivateMethodGet(this, _getOutlines, _getOutlines2).call(this, outlineVerticalEdges);\n      }\n    }\n\n    /***/\n    function _getOutlines2(outlineVerticalEdges) {\n      const edges = [];\n      const allEdges = new Set();\n      for (const edge of outlineVerticalEdges) {\n        const [x, y1, y2] = edge;\n        edges.push([x, y1, edge], [x, y2, edge]);\n      }\n      edges.sort((a, b) => a[1] - b[1] || a[0] - b[0]);\n      for (let i = 0, ii = edges.length; i < ii; i += 2) {\n        const edge1 = edges[i][2];\n        const edge2 = edges[i + 1][2];\n        edge1.push(edge2);\n        edge2.push(edge1);\n        allEdges.add(edge1);\n        allEdges.add(edge2);\n      }\n      const outlines = [];\n      let outline;\n      while (allEdges.size > 0) {\n        const edge = allEdges.values().next().value;\n        let [x, y1, y2, edge1, edge2] = edge;\n        allEdges.delete(edge);\n        let lastPointX = x;\n        let lastPointY = y1;\n        outline = [x, y2];\n        outlines.push(outline);\n        while (true) {\n          let e;\n          if (allEdges.has(edge1)) {\n            e = edge1;\n          } else if (allEdges.has(edge2)) {\n            e = edge2;\n          } else {\n            break;\n          }\n          allEdges.delete(e);\n          [x, y1, y2, edge1, edge2] = e;\n          if (lastPointX !== x) {\n            outline.push(lastPointX, lastPointY, x, lastPointY === y1 ? y1 : y2);\n            lastPointX = x;\n          }\n          lastPointY = lastPointY === y1 ? y2 : y1;\n        }\n        outline.push(lastPointX, lastPointY);\n      }\n      return {\n        outlines,\n        box: _classPrivateFieldGet(this, _box)\n      };\n    }\n    function _binarySearch2(y) {\n      const array = _classPrivateFieldGet(this, _intervals);\n      let start = 0;\n      let end = array.length - 1;\n      while (start <= end) {\n        const middle = start + end >> 1;\n        const y1 = array[middle][0];\n        if (y1 === y) {\n          return middle;\n        }\n        if (y1 < y) {\n          start = middle + 1;\n        } else {\n          end = middle - 1;\n        }\n      }\n      return end + 1;\n    }\n    function _insert2(_ref50) {\n      let [, y1, y2] = _ref50;\n      const index = _classPrivateMethodGet(this, _binarySearch, _binarySearch2).call(this, y1);\n      _classPrivateFieldGet(this, _intervals).splice(index, 0, [y1, y2]);\n    }\n    function _remove2(_ref51) {\n      let [, y1, y2] = _ref51;\n      const index = _classPrivateMethodGet(this, _binarySearch, _binarySearch2).call(this, y1);\n      for (let i = index; i < _classPrivateFieldGet(this, _intervals).length; i++) {\n        const [start, end] = _classPrivateFieldGet(this, _intervals)[i];\n        if (start !== y1) {\n          break;\n        }\n        if (start === y1 && end === y2) {\n          _classPrivateFieldGet(this, _intervals).splice(i, 1);\n          return;\n        }\n      }\n      for (let i = index - 1; i >= 0; i--) {\n        const [start, end] = _classPrivateFieldGet(this, _intervals)[i];\n        if (start !== y1) {\n          break;\n        }\n        if (start === y1 && end === y2) {\n          _classPrivateFieldGet(this, _intervals).splice(i, 1);\n          return;\n        }\n      }\n    }\n    function _breakEdge2(edge) {\n      const [x, y1, y2] = edge;\n      const results = [[x, y1, y2]];\n      const index = _classPrivateMethodGet(this, _binarySearch, _binarySearch2).call(this, y2);\n      for (let i = 0; i < index; i++) {\n        const [start, end] = _classPrivateFieldGet(this, _intervals)[i];\n        for (let j = 0, jj = results.length; j < jj; j++) {\n          const [, y3, y4] = results[j];\n          if (end <= y3 || y4 <= start) {\n            continue;\n          }\n          if (y3 >= start) {\n            if (y4 > end) {\n              results[j][1] = end;\n            } else {\n              if (jj === 1) {\n                return [];\n              }\n              results.splice(j, 1);\n              j--;\n              jj--;\n            }\n            continue;\n          }\n          results[j][2] = start;\n          if (y4 > end) {\n            results.push([x, end, y4]);\n          }\n        }\n      }\n      return results;\n    }\n  }),\n  /***/812: ( /***/(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {\n    var _ImageManager;\n    /* harmony export */__webpack_require__.d(__webpack_exports__, {\n      /* harmony export */AnnotationEditorUIManager: () => ( /* binding */AnnotationEditorUIManager),\n      /* harmony export */ColorManager: () => ( /* binding */ColorManager),\n      /* harmony export */KeyboardManager: () => ( /* binding */KeyboardManager),\n      /* harmony export */bindEvents: () => ( /* binding */bindEvents),\n      /* harmony export */opacityToHex: () => ( /* binding */opacityToHex)\n      /* harmony export */\n    });\n    /* unused harmony export CommandManager */\n    /* harmony import */\n    var _shared_util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(266);\n    /* harmony import */\n    var _display_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(473);\n    function bindEvents(obj, element, names) {\n      for (const name of names) {\n        element.addEventListener(name, obj[name].bind(obj));\n      }\n    }\n    function opacityToHex(opacity) {\n      return Math.round(Math.min(255, Math.max(1, 255 * opacity))).toString(16).padStart(2, \"0\");\n    }\n    var _id4 = /*#__PURE__*/new WeakMap();\n    class IdManager {\n      constructor() {\n        _classPrivateFieldInitSpec(this, _id4, {\n          writable: true,\n          value: 0\n        });\n      }\n      getId() {\n        var _this$id7, _this$id8;\n        return \"\".concat(_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorPrefix).concat((_classPrivateFieldSet(this, _id4, (_this$id7 = _classPrivateFieldGet(this, _id4), _this$id8 = _this$id7++, _this$id7)), _this$id8));\n      }\n    }\n    var _baseId = /*#__PURE__*/new WeakMap();\n    var _id5 = /*#__PURE__*/new WeakMap();\n    var _cache3 = /*#__PURE__*/new WeakMap();\n    var _get = /*#__PURE__*/new WeakSet();\n    class ImageManager {\n      constructor() {\n        _classPrivateMethodInitSpec(this, _get);\n        _classPrivateFieldInitSpec(this, _baseId, {\n          writable: true,\n          value: (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.getUuid)()\n        });\n        _classPrivateFieldInitSpec(this, _id5, {\n          writable: true,\n          value: 0\n        });\n        _classPrivateFieldInitSpec(this, _cache3, {\n          writable: true,\n          value: null\n        });\n      }\n      static get _isSVGFittingCanvas() {\n        const svg = \"data:image/svg+xml;charset=UTF-8,<svg viewBox=\\\"0 0 1 1\\\" width=\\\"1\\\" height=\\\"1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><rect width=\\\"1\\\" height=\\\"1\\\" style=\\\"fill:red;\\\"/></svg>\";\n        const canvas = new OffscreenCanvas(1, 3);\n        const ctx = canvas.getContext(\"2d\");\n        const image = new Image();\n        image.src = svg;\n        const promise = image.decode().then(() => {\n          ctx.drawImage(image, 0, 0, 1, 1, 0, 0, 1, 3);\n          return new Uint32Array(ctx.getImageData(0, 0, 1, 1).data.buffer)[0] === 0;\n        });\n        return (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow)(this, \"_isSVGFittingCanvas\", promise);\n      }\n      async getFromFile(file) {\n        const {\n          lastModified,\n          name,\n          size,\n          type\n        } = file;\n        return _classPrivateMethodGet(this, _get, _get2).call(this, \"\".concat(lastModified, \"_\").concat(name, \"_\").concat(size, \"_\").concat(type), file);\n      }\n      async getFromUrl(url) {\n        return _classPrivateMethodGet(this, _get, _get2).call(this, url, url);\n      }\n      async getFromId(id) {\n        _classPrivateFieldGet(this, _cache3) || _classPrivateFieldSet(this, _cache3, new Map());\n        const data = _classPrivateFieldGet(this, _cache3).get(id);\n        if (!data) {\n          return null;\n        }\n        if (data.bitmap) {\n          data.refCounter += 1;\n          return data;\n        }\n        if (data.file) {\n          return this.getFromFile(data.file);\n        }\n        return this.getFromUrl(data.url);\n      }\n      getSvgUrl(id) {\n        const data = _classPrivateFieldGet(this, _cache3).get(id);\n        if (!(data !== null && data !== void 0 && data.isSvg)) {\n          return null;\n        }\n        return data.svgUrl;\n      }\n      deleteId(id) {\n        _classPrivateFieldGet(this, _cache3) || _classPrivateFieldSet(this, _cache3, new Map());\n        const data = _classPrivateFieldGet(this, _cache3).get(id);\n        if (!data) {\n          return;\n        }\n        data.refCounter -= 1;\n        if (data.refCounter !== 0) {\n          return;\n        }\n        data.bitmap = null;\n      }\n      isValidId(id) {\n        return id.startsWith(\"image_\".concat(_classPrivateFieldGet(this, _baseId), \"_\"));\n      }\n    }\n    _ImageManager = ImageManager;\n    async function _get2(key, rawData) {\n      var _data;\n      _classPrivateFieldGet(this, _cache3) || _classPrivateFieldSet(this, _cache3, new Map());\n      let data = _classPrivateFieldGet(this, _cache3).get(key);\n      if (data === null) {\n        return null;\n      }\n      if ((_data = data) !== null && _data !== void 0 && _data.bitmap) {\n        data.refCounter += 1;\n        return data;\n      }\n      try {\n        var _this$id9, _this$id10;\n        data || (data = {\n          bitmap: null,\n          id: \"image_\".concat(_classPrivateFieldGet(this, _baseId), \"_\").concat((_classPrivateFieldSet(this, _id5, (_this$id9 = _classPrivateFieldGet(this, _id5), _this$id10 = _this$id9++, _this$id9)), _this$id10)),\n          refCounter: 0,\n          isSvg: false\n        });\n        let image;\n        if (typeof rawData === \"string\") {\n          data.url = rawData;\n          image = await (0, _display_utils_js__WEBPACK_IMPORTED_MODULE_1__.fetchData)(rawData, \"blob\");\n        } else {\n          image = data.file = rawData;\n        }\n        if (image.type === \"image/svg+xml\") {\n          const mustRemoveAspectRatioPromise = _ImageManager._isSVGFittingCanvas;\n          const fileReader = new FileReader();\n          const imageElement = new Image();\n          const imagePromise = new Promise((resolve, reject) => {\n            imageElement.onload = () => {\n              data.bitmap = imageElement;\n              data.isSvg = true;\n              resolve();\n            };\n            fileReader.onload = async () => {\n              const url = data.svgUrl = fileReader.result;\n              imageElement.src = (await mustRemoveAspectRatioPromise) ? \"\".concat(url, \"#svgView(preserveAspectRatio(none))\") : url;\n            };\n            imageElement.onerror = fileReader.onerror = reject;\n          });\n          fileReader.readAsDataURL(image);\n          await imagePromise;\n        } else {\n          data.bitmap = await createImageBitmap(image);\n        }\n        data.refCounter = 1;\n      } catch (e) {\n        console.error(e);\n        data = null;\n      }\n      _classPrivateFieldGet(this, _cache3).set(key, data);\n      if (data) {\n        _classPrivateFieldGet(this, _cache3).set(data.id, data);\n      }\n      return data;\n    }\n    var _commands = /*#__PURE__*/new WeakMap();\n    var _locked = /*#__PURE__*/new WeakMap();\n    var _maxSize = /*#__PURE__*/new WeakMap();\n    var _position = /*#__PURE__*/new WeakMap();\n    class CommandManager {\n      constructor() {\n        let maxSize = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 128;\n        _classPrivateFieldInitSpec(this, _commands, {\n          writable: true,\n          value: []\n        });\n        _classPrivateFieldInitSpec(this, _locked, {\n          writable: true,\n          value: false\n        });\n        _classPrivateFieldInitSpec(this, _maxSize, {\n          writable: true,\n          value: void 0\n        });\n        _classPrivateFieldInitSpec(this, _position, {\n          writable: true,\n          value: -1\n        });\n        _classPrivateFieldSet(this, _maxSize, maxSize);\n      }\n      add(_ref52) {\n        let {\n          cmd,\n          undo,\n          mustExec,\n          type = NaN,\n          overwriteIfSameType = false,\n          keepUndo = false\n        } = _ref52;\n        if (mustExec) {\n          cmd();\n        }\n        if (_classPrivateFieldGet(this, _locked)) {\n          return;\n        }\n        const save = {\n          cmd,\n          undo,\n          type\n        };\n        if (_classPrivateFieldGet(this, _position) === -1) {\n          if (_classPrivateFieldGet(this, _commands).length > 0) {\n            _classPrivateFieldGet(this, _commands).length = 0;\n          }\n          _classPrivateFieldSet(this, _position, 0);\n          _classPrivateFieldGet(this, _commands).push(save);\n          return;\n        }\n        if (overwriteIfSameType && _classPrivateFieldGet(this, _commands)[_classPrivateFieldGet(this, _position)].type === type) {\n          if (keepUndo) {\n            save.undo = _classPrivateFieldGet(this, _commands)[_classPrivateFieldGet(this, _position)].undo;\n          }\n          _classPrivateFieldGet(this, _commands)[_classPrivateFieldGet(this, _position)] = save;\n          return;\n        }\n        const next = _classPrivateFieldGet(this, _position) + 1;\n        if (next === _classPrivateFieldGet(this, _maxSize)) {\n          _classPrivateFieldGet(this, _commands).splice(0, 1);\n        } else {\n          _classPrivateFieldSet(this, _position, next);\n          if (next < _classPrivateFieldGet(this, _commands).length) {\n            _classPrivateFieldGet(this, _commands).splice(next);\n          }\n        }\n        _classPrivateFieldGet(this, _commands).push(save);\n      }\n      undo() {\n        if (_classPrivateFieldGet(this, _position) === -1) {\n          return;\n        }\n        _classPrivateFieldSet(this, _locked, true);\n        _classPrivateFieldGet(this, _commands)[_classPrivateFieldGet(this, _position)].undo();\n        _classPrivateFieldSet(this, _locked, false);\n        _classPrivateFieldSet(this, _position, _classPrivateFieldGet(this, _position) - 1);\n      }\n      redo() {\n        if (_classPrivateFieldGet(this, _position) < _classPrivateFieldGet(this, _commands).length - 1) {\n          _classPrivateFieldSet(this, _position, _classPrivateFieldGet(this, _position) + 1);\n          _classPrivateFieldSet(this, _locked, true);\n          _classPrivateFieldGet(this, _commands)[_classPrivateFieldGet(this, _position)].cmd();\n          _classPrivateFieldSet(this, _locked, false);\n        }\n      }\n      hasSomethingToUndo() {\n        return _classPrivateFieldGet(this, _position) !== -1;\n      }\n      hasSomethingToRedo() {\n        return _classPrivateFieldGet(this, _position) < _classPrivateFieldGet(this, _commands).length - 1;\n      }\n      destroy() {\n        _classPrivateFieldSet(this, _commands, null);\n      }\n    }\n    var _serialize = /*#__PURE__*/new WeakSet();\n    class KeyboardManager {\n      constructor(callbacks) {\n        _classPrivateMethodInitSpec(this, _serialize);\n        this.buffer = [];\n        this.callbacks = new Map();\n        this.allKeys = new Set();\n        const {\n          isMac\n        } = _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.FeatureTest.platform;\n        for (const [keys, callback, options = {}] of callbacks) {\n          for (const key of keys) {\n            const isMacKey = key.startsWith(\"mac+\");\n            if (isMac && isMacKey) {\n              this.callbacks.set(key.slice(4), {\n                callback,\n                options\n              });\n              this.allKeys.add(key.split(\"+\").at(-1));\n            } else if (!isMac && !isMacKey) {\n              this.callbacks.set(key, {\n                callback,\n                options\n              });\n              this.allKeys.add(key.split(\"+\").at(-1));\n            }\n          }\n        }\n      }\n      exec(self, event) {\n        if (!this.allKeys.has(event.key)) {\n          return;\n        }\n        const info = this.callbacks.get(_classPrivateMethodGet(this, _serialize, _serialize2).call(this, event));\n        if (!info) {\n          return;\n        }\n        const {\n          callback,\n          options: {\n            bubbles = false,\n            args = [],\n            checker = null\n          }\n        } = info;\n        if (checker && !checker(self, event)) {\n          return;\n        }\n        callback.bind(self, ...args, event)();\n        if (!bubbles) {\n          event.stopPropagation();\n          event.preventDefault();\n        }\n      }\n    }\n    function _serialize2(event) {\n      if (event.altKey) {\n        this.buffer.push(\"alt\");\n      }\n      if (event.ctrlKey) {\n        this.buffer.push(\"ctrl\");\n      }\n      if (event.metaKey) {\n        this.buffer.push(\"meta\");\n      }\n      if (event.shiftKey) {\n        this.buffer.push(\"shift\");\n      }\n      this.buffer.push(event.key);\n      const str = this.buffer.join(\"+\");\n      this.buffer.length = 0;\n      return str;\n    }\n    class ColorManager {\n      get _colors() {\n        const colors = new Map([[\"CanvasText\", null], [\"Canvas\", null]]);\n        (0, _display_utils_js__WEBPACK_IMPORTED_MODULE_1__.getColorValues)(colors);\n        return (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow)(this, \"_colors\", colors);\n      }\n      convert(color) {\n        const rgb = (0, _display_utils_js__WEBPACK_IMPORTED_MODULE_1__.getRGB)(color);\n        if (!window.matchMedia(\"(forced-colors: active)\").matches) {\n          return rgb;\n        }\n        for (const [name, RGB] of this._colors) {\n          if (RGB.every((x, i) => x === rgb[i])) {\n            return ColorManager._colorsMapping.get(name);\n          }\n        }\n        return rgb;\n      }\n      getHexCode(name) {\n        const rgb = this._colors.get(name);\n        if (!rgb) {\n          return name;\n        }\n        return _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.Util.makeHexColor(...rgb);\n      }\n    }\n    _defineProperty(ColorManager, \"_colorsMapping\", new Map([[\"CanvasText\", [0, 0, 0]], [\"Canvas\", [255, 255, 255]]]));\n    var _activeEditor = /*#__PURE__*/new WeakMap();\n    var _allEditors = /*#__PURE__*/new WeakMap();\n    var _allLayers = /*#__PURE__*/new WeakMap();\n    var _altTextManager = /*#__PURE__*/new WeakMap();\n    var _annotationStorage = /*#__PURE__*/new WeakMap();\n    var _commandManager = /*#__PURE__*/new WeakMap();\n    var _currentPageIndex = /*#__PURE__*/new WeakMap();\n    var _deletedAnnotationsElementIds = /*#__PURE__*/new WeakMap();\n    var _draggingEditors = /*#__PURE__*/new WeakMap();\n    var _editorTypes2 = /*#__PURE__*/new WeakMap();\n    var _editorsToRescale = /*#__PURE__*/new WeakMap();\n    var _filterFactory = /*#__PURE__*/new WeakMap();\n    var _focusMainContainerTimeoutId = /*#__PURE__*/new WeakMap();\n    var _highlightColors = /*#__PURE__*/new WeakMap();\n    var _idManager = /*#__PURE__*/new WeakMap();\n    var _isEnabled = /*#__PURE__*/new WeakMap();\n    var _isWaiting = /*#__PURE__*/new WeakMap();\n    var _lastActiveElement = /*#__PURE__*/new WeakMap();\n    var _mainHighlightColorPicker = /*#__PURE__*/new WeakMap();\n    var _mode = /*#__PURE__*/new WeakMap();\n    var _selectedEditors = /*#__PURE__*/new WeakMap();\n    var _pageColors = /*#__PURE__*/new WeakMap();\n    var _boundBlur = /*#__PURE__*/new WeakMap();\n    var _boundFocus = /*#__PURE__*/new WeakMap();\n    var _boundCopy = /*#__PURE__*/new WeakMap();\n    var _boundCut = /*#__PURE__*/new WeakMap();\n    var _boundPaste = /*#__PURE__*/new WeakMap();\n    var _boundKeydown = /*#__PURE__*/new WeakMap();\n    var _boundOnEditingAction = /*#__PURE__*/new WeakMap();\n    var _boundOnPageChanging = /*#__PURE__*/new WeakMap();\n    var _boundOnScaleChanging = /*#__PURE__*/new WeakMap();\n    var _boundOnRotationChanging = /*#__PURE__*/new WeakMap();\n    var _previousStates = /*#__PURE__*/new WeakMap();\n    var _translation = /*#__PURE__*/new WeakMap();\n    var _translationTimeoutId = /*#__PURE__*/new WeakMap();\n    var _container2 = /*#__PURE__*/new WeakMap();\n    var _viewer = /*#__PURE__*/new WeakMap();\n    var _addFocusManager = /*#__PURE__*/new WeakSet();\n    var _removeFocusManager = /*#__PURE__*/new WeakSet();\n    var _addKeyboardManager = /*#__PURE__*/new WeakSet();\n    var _removeKeyboardManager = /*#__PURE__*/new WeakSet();\n    var _addCopyPasteListeners = /*#__PURE__*/new WeakSet();\n    var _removeCopyPasteListeners = /*#__PURE__*/new WeakSet();\n    var _dispatchUpdateStates = /*#__PURE__*/new WeakSet();\n    var _dispatchUpdateUI = /*#__PURE__*/new WeakSet();\n    var _enableAll = /*#__PURE__*/new WeakSet();\n    var _disableAll = /*#__PURE__*/new WeakSet();\n    var _addEditorToLayer = /*#__PURE__*/new WeakSet();\n    var _isEmpty = /*#__PURE__*/new WeakSet();\n    var _selectEditors = /*#__PURE__*/new WeakSet();\n    class AnnotationEditorUIManager {\n      static get _keyboardManager() {\n        const proto = AnnotationEditorUIManager.prototype;\n        const arrowChecker = self => {\n          return _classPrivateFieldGet(self, _container2).contains(document.activeElement) && document.activeElement.tagName !== \"BUTTON\" && self.hasSomethingToControl();\n        };\n        const textInputChecker = (_self, _ref53) => {\n          let {\n            target: el\n          } = _ref53;\n          if (el instanceof HTMLInputElement) {\n            const {\n              type\n            } = el;\n            return type !== \"text\" && type !== \"number\";\n          }\n          return true;\n        };\n        const small = this.TRANSLATE_SMALL;\n        const big = this.TRANSLATE_BIG;\n        return (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow)(this, \"_keyboardManager\", new KeyboardManager([[[\"ctrl+a\", \"mac+meta+a\"], proto.selectAll, {\n          checker: textInputChecker\n        }], [[\"ctrl+z\", \"mac+meta+z\"], proto.undo, {\n          checker: textInputChecker\n        }], [[\"ctrl+y\", \"ctrl+shift+z\", \"mac+meta+shift+z\", \"ctrl+shift+Z\", \"mac+meta+shift+Z\"], proto.redo, {\n          checker: textInputChecker\n        }], [[\"Backspace\", \"alt+Backspace\", \"ctrl+Backspace\", \"shift+Backspace\", \"mac+Backspace\", \"mac+alt+Backspace\", \"mac+ctrl+Backspace\", \"Delete\", \"ctrl+Delete\", \"shift+Delete\", \"mac+Delete\"], proto.delete, {\n          checker: textInputChecker\n        }], [[\"Enter\", \"mac+Enter\"], proto.addNewEditorFromKeyboard, {\n          checker: (self, _ref54) => {\n            let {\n              target: el\n            } = _ref54;\n            return !(el instanceof HTMLButtonElement) && _classPrivateFieldGet(self, _container2).contains(el) && !self.isEnterHandled;\n          }\n        }], [[\" \", \"mac+ \"], proto.addNewEditorFromKeyboard, {\n          checker: self => _classPrivateFieldGet(self, _container2).contains(document.activeElement)\n        }], [[\"Escape\", \"mac+Escape\"], proto.unselectAll], [[\"ArrowLeft\", \"mac+ArrowLeft\"], proto.translateSelectedEditors, {\n          args: [-small, 0],\n          checker: arrowChecker\n        }], [[\"ctrl+ArrowLeft\", \"mac+shift+ArrowLeft\"], proto.translateSelectedEditors, {\n          args: [-big, 0],\n          checker: arrowChecker\n        }], [[\"ArrowRight\", \"mac+ArrowRight\"], proto.translateSelectedEditors, {\n          args: [small, 0],\n          checker: arrowChecker\n        }], [[\"ctrl+ArrowRight\", \"mac+shift+ArrowRight\"], proto.translateSelectedEditors, {\n          args: [big, 0],\n          checker: arrowChecker\n        }], [[\"ArrowUp\", \"mac+ArrowUp\"], proto.translateSelectedEditors, {\n          args: [0, -small],\n          checker: arrowChecker\n        }], [[\"ctrl+ArrowUp\", \"mac+shift+ArrowUp\"], proto.translateSelectedEditors, {\n          args: [0, -big],\n          checker: arrowChecker\n        }], [[\"ArrowDown\", \"mac+ArrowDown\"], proto.translateSelectedEditors, {\n          args: [0, small],\n          checker: arrowChecker\n        }], [[\"ctrl+ArrowDown\", \"mac+shift+ArrowDown\"], proto.translateSelectedEditors, {\n          args: [0, big],\n          checker: arrowChecker\n        }]]));\n      }\n      constructor(container, viewer, altTextManager, eventBus, pdfDocument, pageColors, highlightColors) {\n        _classPrivateMethodInitSpec(this, _selectEditors);\n        _classPrivateMethodInitSpec(this, _isEmpty);\n        _classPrivateMethodInitSpec(this, _addEditorToLayer);\n        _classPrivateMethodInitSpec(this, _disableAll);\n        _classPrivateMethodInitSpec(this, _enableAll);\n        _classPrivateMethodInitSpec(this, _dispatchUpdateUI);\n        _classPrivateMethodInitSpec(this, _dispatchUpdateStates);\n        _classPrivateMethodInitSpec(this, _removeCopyPasteListeners);\n        _classPrivateMethodInitSpec(this, _addCopyPasteListeners);\n        _classPrivateMethodInitSpec(this, _removeKeyboardManager);\n        _classPrivateMethodInitSpec(this, _addKeyboardManager);\n        _classPrivateMethodInitSpec(this, _removeFocusManager);\n        _classPrivateMethodInitSpec(this, _addFocusManager);\n        _classPrivateFieldInitSpec(this, _activeEditor, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _allEditors, {\n          writable: true,\n          value: new Map()\n        });\n        _classPrivateFieldInitSpec(this, _allLayers, {\n          writable: true,\n          value: new Map()\n        });\n        _classPrivateFieldInitSpec(this, _altTextManager, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _annotationStorage, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _commandManager, {\n          writable: true,\n          value: new CommandManager()\n        });\n        _classPrivateFieldInitSpec(this, _currentPageIndex, {\n          writable: true,\n          value: 0\n        });\n        _classPrivateFieldInitSpec(this, _deletedAnnotationsElementIds, {\n          writable: true,\n          value: new Set()\n        });\n        _classPrivateFieldInitSpec(this, _draggingEditors, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _editorTypes2, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _editorsToRescale, {\n          writable: true,\n          value: new Set()\n        });\n        _classPrivateFieldInitSpec(this, _filterFactory, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _focusMainContainerTimeoutId, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _highlightColors, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _idManager, {\n          writable: true,\n          value: new IdManager()\n        });\n        _classPrivateFieldInitSpec(this, _isEnabled, {\n          writable: true,\n          value: false\n        });\n        _classPrivateFieldInitSpec(this, _isWaiting, {\n          writable: true,\n          value: false\n        });\n        _classPrivateFieldInitSpec(this, _lastActiveElement, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _mainHighlightColorPicker, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _mode, {\n          writable: true,\n          value: _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorType.NONE\n        });\n        _classPrivateFieldInitSpec(this, _selectedEditors, {\n          writable: true,\n          value: new Set()\n        });\n        _classPrivateFieldInitSpec(this, _pageColors, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _boundBlur, {\n          writable: true,\n          value: this.blur.bind(this)\n        });\n        _classPrivateFieldInitSpec(this, _boundFocus, {\n          writable: true,\n          value: this.focus.bind(this)\n        });\n        _classPrivateFieldInitSpec(this, _boundCopy, {\n          writable: true,\n          value: this.copy.bind(this)\n        });\n        _classPrivateFieldInitSpec(this, _boundCut, {\n          writable: true,\n          value: this.cut.bind(this)\n        });\n        _classPrivateFieldInitSpec(this, _boundPaste, {\n          writable: true,\n          value: this.paste.bind(this)\n        });\n        _classPrivateFieldInitSpec(this, _boundKeydown, {\n          writable: true,\n          value: this.keydown.bind(this)\n        });\n        _classPrivateFieldInitSpec(this, _boundOnEditingAction, {\n          writable: true,\n          value: this.onEditingAction.bind(this)\n        });\n        _classPrivateFieldInitSpec(this, _boundOnPageChanging, {\n          writable: true,\n          value: this.onPageChanging.bind(this)\n        });\n        _classPrivateFieldInitSpec(this, _boundOnScaleChanging, {\n          writable: true,\n          value: this.onScaleChanging.bind(this)\n        });\n        _classPrivateFieldInitSpec(this, _boundOnRotationChanging, {\n          writable: true,\n          value: this.onRotationChanging.bind(this)\n        });\n        _classPrivateFieldInitSpec(this, _previousStates, {\n          writable: true,\n          value: {\n            isEditing: false,\n            isEmpty: true,\n            hasSomethingToUndo: false,\n            hasSomethingToRedo: false,\n            hasSelectedEditor: false\n          }\n        });\n        _classPrivateFieldInitSpec(this, _translation, {\n          writable: true,\n          value: [0, 0]\n        });\n        _classPrivateFieldInitSpec(this, _translationTimeoutId, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _container2, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _viewer, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldSet(this, _container2, container);\n        _classPrivateFieldSet(this, _viewer, viewer);\n        _classPrivateFieldSet(this, _altTextManager, altTextManager);\n        this._eventBus = eventBus;\n        this._eventBus._on(\"editingaction\", _classPrivateFieldGet(this, _boundOnEditingAction));\n        this._eventBus._on(\"pagechanging\", _classPrivateFieldGet(this, _boundOnPageChanging));\n        this._eventBus._on(\"scalechanging\", _classPrivateFieldGet(this, _boundOnScaleChanging));\n        this._eventBus._on(\"rotationchanging\", _classPrivateFieldGet(this, _boundOnRotationChanging));\n        _classPrivateFieldSet(this, _annotationStorage, pdfDocument.annotationStorage);\n        _classPrivateFieldSet(this, _filterFactory, pdfDocument.filterFactory);\n        _classPrivateFieldSet(this, _pageColors, pageColors);\n        _classPrivateFieldSet(this, _highlightColors, highlightColors || null);\n        this.viewParameters = {\n          realScale: _display_utils_js__WEBPACK_IMPORTED_MODULE_1__.PixelsPerInch.PDF_TO_CSS_UNITS,\n          rotation: 0\n        };\n      }\n      destroy() {\n        var _classPrivateFieldGet42;\n        _classPrivateMethodGet(this, _removeKeyboardManager, _removeKeyboardManager2).call(this);\n        _classPrivateMethodGet(this, _removeFocusManager, _removeFocusManager2).call(this);\n        this._eventBus._off(\"editingaction\", _classPrivateFieldGet(this, _boundOnEditingAction));\n        this._eventBus._off(\"pagechanging\", _classPrivateFieldGet(this, _boundOnPageChanging));\n        this._eventBus._off(\"scalechanging\", _classPrivateFieldGet(this, _boundOnScaleChanging));\n        this._eventBus._off(\"rotationchanging\", _classPrivateFieldGet(this, _boundOnRotationChanging));\n        for (const layer of _classPrivateFieldGet(this, _allLayers).values()) {\n          layer.destroy();\n        }\n        _classPrivateFieldGet(this, _allLayers).clear();\n        _classPrivateFieldGet(this, _allEditors).clear();\n        _classPrivateFieldGet(this, _editorsToRescale).clear();\n        _classPrivateFieldSet(this, _activeEditor, null);\n        _classPrivateFieldGet(this, _selectedEditors).clear();\n        _classPrivateFieldGet(this, _commandManager).destroy();\n        (_classPrivateFieldGet42 = _classPrivateFieldGet(this, _altTextManager)) === null || _classPrivateFieldGet42 === void 0 || _classPrivateFieldGet42.destroy();\n        if (_classPrivateFieldGet(this, _focusMainContainerTimeoutId)) {\n          clearTimeout(_classPrivateFieldGet(this, _focusMainContainerTimeoutId));\n          _classPrivateFieldSet(this, _focusMainContainerTimeoutId, null);\n        }\n        if (_classPrivateFieldGet(this, _translationTimeoutId)) {\n          clearTimeout(_classPrivateFieldGet(this, _translationTimeoutId));\n          _classPrivateFieldSet(this, _translationTimeoutId, null);\n        }\n      }\n      get hcmFilter() {\n        return (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow)(this, \"hcmFilter\", _classPrivateFieldGet(this, _pageColors) ? _classPrivateFieldGet(this, _filterFactory).addHCMFilter(_classPrivateFieldGet(this, _pageColors).foreground, _classPrivateFieldGet(this, _pageColors).background) : \"none\");\n      }\n      get direction() {\n        return (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow)(this, \"direction\", getComputedStyle(_classPrivateFieldGet(this, _container2)).direction);\n      }\n      get highlightColors() {\n        return (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow)(this, \"highlightColors\", _classPrivateFieldGet(this, _highlightColors) ? new Map(_classPrivateFieldGet(this, _highlightColors).split(\",\").map(pair => pair.split(\"=\").map(x => x.trim()))) : null);\n      }\n      setMainHighlightColorPicker(colorPicker) {\n        _classPrivateFieldSet(this, _mainHighlightColorPicker, colorPicker);\n      }\n      editAltText(editor) {\n        var _classPrivateFieldGet43;\n        (_classPrivateFieldGet43 = _classPrivateFieldGet(this, _altTextManager)) === null || _classPrivateFieldGet43 === void 0 || _classPrivateFieldGet43.editAltText(this, editor);\n      }\n      onPageChanging(_ref55) {\n        let {\n          pageNumber\n        } = _ref55;\n        _classPrivateFieldSet(this, _currentPageIndex, pageNumber - 1);\n      }\n      focusMainContainer() {\n        _classPrivateFieldGet(this, _container2).focus();\n      }\n      findParent(x, y) {\n        for (const layer of _classPrivateFieldGet(this, _allLayers).values()) {\n          const {\n            x: layerX,\n            y: layerY,\n            width,\n            height\n          } = layer.div.getBoundingClientRect();\n          if (x >= layerX && x <= layerX + width && y >= layerY && y <= layerY + height) {\n            return layer;\n          }\n        }\n        return null;\n      }\n      disableUserSelect() {\n        let value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n        _classPrivateFieldGet(this, _viewer).classList.toggle(\"noUserSelect\", value);\n      }\n      addShouldRescale(editor) {\n        _classPrivateFieldGet(this, _editorsToRescale).add(editor);\n      }\n      removeShouldRescale(editor) {\n        _classPrivateFieldGet(this, _editorsToRescale).delete(editor);\n      }\n      onScaleChanging(_ref56) {\n        let {\n          scale\n        } = _ref56;\n        this.commitOrRemove();\n        this.viewParameters.realScale = scale * _display_utils_js__WEBPACK_IMPORTED_MODULE_1__.PixelsPerInch.PDF_TO_CSS_UNITS;\n        for (const editor of _classPrivateFieldGet(this, _editorsToRescale)) {\n          editor.onScaleChanging();\n        }\n      }\n      onRotationChanging(_ref57) {\n        let {\n          pagesRotation\n        } = _ref57;\n        this.commitOrRemove();\n        this.viewParameters.rotation = pagesRotation;\n      }\n      addToAnnotationStorage(editor) {\n        if (!editor.isEmpty() && _classPrivateFieldGet(this, _annotationStorage) && !_classPrivateFieldGet(this, _annotationStorage).has(editor.id)) {\n          _classPrivateFieldGet(this, _annotationStorage).setValue(editor.id, editor);\n        }\n      }\n      blur() {\n        if (!this.hasSelection) {\n          return;\n        }\n        const {\n          activeElement\n        } = document;\n        for (const editor of _classPrivateFieldGet(this, _selectedEditors)) {\n          if (editor.div.contains(activeElement)) {\n            _classPrivateFieldSet(this, _lastActiveElement, [editor, activeElement]);\n            editor._focusEventsAllowed = false;\n            break;\n          }\n        }\n      }\n      focus() {\n        if (!_classPrivateFieldGet(this, _lastActiveElement)) {\n          return;\n        }\n        const [lastEditor, lastActiveElement] = _classPrivateFieldGet(this, _lastActiveElement);\n        _classPrivateFieldSet(this, _lastActiveElement, null);\n        lastActiveElement.addEventListener(\"focusin\", () => {\n          lastEditor._focusEventsAllowed = true;\n        }, {\n          once: true\n        });\n        lastActiveElement.focus();\n      }\n      addEditListeners() {\n        _classPrivateMethodGet(this, _addKeyboardManager, _addKeyboardManager2).call(this);\n        _classPrivateMethodGet(this, _addCopyPasteListeners, _addCopyPasteListeners2).call(this);\n      }\n      removeEditListeners() {\n        _classPrivateMethodGet(this, _removeKeyboardManager, _removeKeyboardManager2).call(this);\n        _classPrivateMethodGet(this, _removeCopyPasteListeners, _removeCopyPasteListeners2).call(this);\n      }\n      copy(event) {\n        var _classPrivateFieldGet44;\n        event.preventDefault();\n        (_classPrivateFieldGet44 = _classPrivateFieldGet(this, _activeEditor)) === null || _classPrivateFieldGet44 === void 0 || _classPrivateFieldGet44.commitOrRemove();\n        if (!this.hasSelection) {\n          return;\n        }\n        const editors = [];\n        for (const editor of _classPrivateFieldGet(this, _selectedEditors)) {\n          const serialized = editor.serialize(true);\n          if (serialized) {\n            editors.push(serialized);\n          }\n        }\n        if (editors.length === 0) {\n          return;\n        }\n        event.clipboardData.setData(\"application/pdfjs\", JSON.stringify(editors));\n      }\n      cut(event) {\n        this.copy(event);\n        this.delete();\n      }\n      paste(event) {\n        event.preventDefault();\n        const {\n          clipboardData\n        } = event;\n        for (const item of clipboardData.items) {\n          for (const editorType of _classPrivateFieldGet(this, _editorTypes2)) {\n            if (editorType.isHandlingMimeForPasting(item.type)) {\n              editorType.paste(item, this.currentLayer);\n              return;\n            }\n          }\n        }\n        let data = clipboardData.getData(\"application/pdfjs\");\n        if (!data) {\n          return;\n        }\n        try {\n          data = JSON.parse(data);\n        } catch (ex) {\n          (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(\"paste: \\\"\".concat(ex.message, \"\\\".\"));\n          return;\n        }\n        if (!Array.isArray(data)) {\n          return;\n        }\n        this.unselectAll();\n        const layer = this.currentLayer;\n        try {\n          const newEditors = [];\n          for (const editor of data) {\n            const deserializedEditor = layer.deserialize(editor);\n            if (!deserializedEditor) {\n              return;\n            }\n            newEditors.push(deserializedEditor);\n          }\n          const cmd = () => {\n            for (const editor of newEditors) {\n              _classPrivateMethodGet(this, _addEditorToLayer, _addEditorToLayer2).call(this, editor);\n            }\n            _classPrivateMethodGet(this, _selectEditors, _selectEditors2).call(this, newEditors);\n          };\n          const undo = () => {\n            for (const editor of newEditors) {\n              editor.remove();\n            }\n          };\n          this.addCommands({\n            cmd,\n            undo,\n            mustExec: true\n          });\n        } catch (ex) {\n          (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(\"paste: \\\"\".concat(ex.message, \"\\\".\"));\n        }\n      }\n      keydown(event) {\n        if (!this.isEditorHandlingKeyboard) {\n          AnnotationEditorUIManager._keyboardManager.exec(this, event);\n        }\n      }\n      onEditingAction(details) {\n        if ([\"undo\", \"redo\", \"delete\", \"selectAll\"].includes(details.name)) {\n          this[details.name]();\n        }\n      }\n      setEditingState(isEditing) {\n        if (isEditing) {\n          _classPrivateMethodGet(this, _addFocusManager, _addFocusManager2).call(this);\n          _classPrivateMethodGet(this, _addKeyboardManager, _addKeyboardManager2).call(this);\n          _classPrivateMethodGet(this, _addCopyPasteListeners, _addCopyPasteListeners2).call(this);\n          _classPrivateMethodGet(this, _dispatchUpdateStates, _dispatchUpdateStates2).call(this, {\n            isEditing: _classPrivateFieldGet(this, _mode) !== _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorType.NONE,\n            isEmpty: _classPrivateMethodGet(this, _isEmpty, _isEmpty2).call(this),\n            hasSomethingToUndo: _classPrivateFieldGet(this, _commandManager).hasSomethingToUndo(),\n            hasSomethingToRedo: _classPrivateFieldGet(this, _commandManager).hasSomethingToRedo(),\n            hasSelectedEditor: false\n          });\n        } else {\n          _classPrivateMethodGet(this, _removeFocusManager, _removeFocusManager2).call(this);\n          _classPrivateMethodGet(this, _removeKeyboardManager, _removeKeyboardManager2).call(this);\n          _classPrivateMethodGet(this, _removeCopyPasteListeners, _removeCopyPasteListeners2).call(this);\n          _classPrivateMethodGet(this, _dispatchUpdateStates, _dispatchUpdateStates2).call(this, {\n            isEditing: false\n          });\n          this.disableUserSelect(false);\n        }\n      }\n      registerEditorTypes(types) {\n        if (_classPrivateFieldGet(this, _editorTypes2)) {\n          return;\n        }\n        _classPrivateFieldSet(this, _editorTypes2, types);\n        for (const editorType of _classPrivateFieldGet(this, _editorTypes2)) {\n          _classPrivateMethodGet(this, _dispatchUpdateUI, _dispatchUpdateUI2).call(this, editorType.defaultPropertiesToUpdate);\n        }\n      }\n      getId() {\n        return _classPrivateFieldGet(this, _idManager).getId();\n      }\n      get currentLayer() {\n        return _classPrivateFieldGet(this, _allLayers).get(_classPrivateFieldGet(this, _currentPageIndex));\n      }\n      getLayer(pageIndex) {\n        return _classPrivateFieldGet(this, _allLayers).get(pageIndex);\n      }\n      get currentPageIndex() {\n        return _classPrivateFieldGet(this, _currentPageIndex);\n      }\n      addLayer(layer) {\n        _classPrivateFieldGet(this, _allLayers).set(layer.pageIndex, layer);\n        if (_classPrivateFieldGet(this, _isEnabled)) {\n          layer.enable();\n        } else {\n          layer.disable();\n        }\n      }\n      removeLayer(layer) {\n        _classPrivateFieldGet(this, _allLayers).delete(layer.pageIndex);\n      }\n      updateMode(mode) {\n        let editId = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n        let isFromKeyboard = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n        if (_classPrivateFieldGet(this, _mode) === mode) {\n          return;\n        }\n        _classPrivateFieldSet(this, _mode, mode);\n        if (mode === _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorType.NONE) {\n          this.setEditingState(false);\n          _classPrivateMethodGet(this, _disableAll, _disableAll2).call(this);\n          return;\n        }\n        this.setEditingState(true);\n        _classPrivateMethodGet(this, _enableAll, _enableAll2).call(this);\n        this.unselectAll();\n        for (const layer of _classPrivateFieldGet(this, _allLayers).values()) {\n          layer.updateMode(mode);\n        }\n        if (!editId && isFromKeyboard) {\n          this.addNewEditorFromKeyboard();\n          return;\n        }\n        if (!editId) {\n          return;\n        }\n        for (const editor of _classPrivateFieldGet(this, _allEditors).values()) {\n          if (editor.annotationElementId === editId) {\n            this.setSelected(editor);\n            editor.enterInEditMode();\n            break;\n          }\n        }\n      }\n      addNewEditorFromKeyboard() {\n        if (this.currentLayer.canCreateNewEmptyEditor()) {\n          this.currentLayer.addNewEditor();\n        }\n      }\n      updateToolbar(mode) {\n        if (mode === _classPrivateFieldGet(this, _mode)) {\n          return;\n        }\n        this._eventBus.dispatch(\"switchannotationeditormode\", {\n          source: this,\n          mode\n        });\n      }\n      updateParams(type, value) {\n        var _classPrivateFieldGet45;\n        if (!_classPrivateFieldGet(this, _editorTypes2)) {\n          return;\n        }\n        switch (type) {\n          case _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorParamsType.CREATE:\n            this.currentLayer.addNewEditor();\n            return;\n          case _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:\n            (_classPrivateFieldGet45 = _classPrivateFieldGet(this, _mainHighlightColorPicker)) === null || _classPrivateFieldGet45 === void 0 || _classPrivateFieldGet45.updateColor(value);\n            break;\n        }\n        for (const editor of _classPrivateFieldGet(this, _selectedEditors)) {\n          editor.updateParams(type, value);\n        }\n        for (const editorType of _classPrivateFieldGet(this, _editorTypes2)) {\n          editorType.updateDefaultParams(type, value);\n        }\n      }\n      enableWaiting() {\n        let mustWait = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n        if (_classPrivateFieldGet(this, _isWaiting) === mustWait) {\n          return;\n        }\n        _classPrivateFieldSet(this, _isWaiting, mustWait);\n        for (const layer of _classPrivateFieldGet(this, _allLayers).values()) {\n          if (mustWait) {\n            layer.disableClick();\n          } else {\n            layer.enableClick();\n          }\n          layer.div.classList.toggle(\"waiting\", mustWait);\n        }\n      }\n      getEditors(pageIndex) {\n        const editors = [];\n        for (const editor of _classPrivateFieldGet(this, _allEditors).values()) {\n          if (editor.pageIndex === pageIndex) {\n            editors.push(editor);\n          }\n        }\n        return editors;\n      }\n      getEditor(id) {\n        return _classPrivateFieldGet(this, _allEditors).get(id);\n      }\n      addEditor(editor) {\n        _classPrivateFieldGet(this, _allEditors).set(editor.id, editor);\n      }\n      removeEditor(editor) {\n        if (editor.div.contains(document.activeElement)) {\n          if (_classPrivateFieldGet(this, _focusMainContainerTimeoutId)) {\n            clearTimeout(_classPrivateFieldGet(this, _focusMainContainerTimeoutId));\n          }\n          _classPrivateFieldSet(this, _focusMainContainerTimeoutId, setTimeout(() => {\n            this.focusMainContainer();\n            _classPrivateFieldSet(this, _focusMainContainerTimeoutId, null);\n          }, 0));\n        }\n        _classPrivateFieldGet(this, _allEditors).delete(editor.id);\n        this.unselect(editor);\n        if (!editor.annotationElementId || !_classPrivateFieldGet(this, _deletedAnnotationsElementIds).has(editor.annotationElementId)) {\n          var _classPrivateFieldGet46;\n          (_classPrivateFieldGet46 = _classPrivateFieldGet(this, _annotationStorage)) === null || _classPrivateFieldGet46 === void 0 || _classPrivateFieldGet46.remove(editor.id);\n        }\n      }\n      addDeletedAnnotationElement(editor) {\n        _classPrivateFieldGet(this, _deletedAnnotationsElementIds).add(editor.annotationElementId);\n        editor.deleted = true;\n      }\n      isDeletedAnnotationElement(annotationElementId) {\n        return _classPrivateFieldGet(this, _deletedAnnotationsElementIds).has(annotationElementId);\n      }\n      removeDeletedAnnotationElement(editor) {\n        _classPrivateFieldGet(this, _deletedAnnotationsElementIds).delete(editor.annotationElementId);\n        editor.deleted = false;\n      }\n      setActiveEditor(editor) {\n        if (_classPrivateFieldGet(this, _activeEditor) === editor) {\n          return;\n        }\n        _classPrivateFieldSet(this, _activeEditor, editor);\n        if (editor) {\n          _classPrivateMethodGet(this, _dispatchUpdateUI, _dispatchUpdateUI2).call(this, editor.propertiesToUpdate);\n        }\n      }\n      toggleSelected(editor) {\n        if (_classPrivateFieldGet(this, _selectedEditors).has(editor)) {\n          _classPrivateFieldGet(this, _selectedEditors).delete(editor);\n          editor.unselect();\n          _classPrivateMethodGet(this, _dispatchUpdateStates, _dispatchUpdateStates2).call(this, {\n            hasSelectedEditor: this.hasSelection\n          });\n          return;\n        }\n        _classPrivateFieldGet(this, _selectedEditors).add(editor);\n        editor.select();\n        _classPrivateMethodGet(this, _dispatchUpdateUI, _dispatchUpdateUI2).call(this, editor.propertiesToUpdate);\n        _classPrivateMethodGet(this, _dispatchUpdateStates, _dispatchUpdateStates2).call(this, {\n          hasSelectedEditor: true\n        });\n      }\n      setSelected(editor) {\n        for (const ed of _classPrivateFieldGet(this, _selectedEditors)) {\n          if (ed !== editor) {\n            ed.unselect();\n          }\n        }\n        _classPrivateFieldGet(this, _selectedEditors).clear();\n        _classPrivateFieldGet(this, _selectedEditors).add(editor);\n        editor.select();\n        _classPrivateMethodGet(this, _dispatchUpdateUI, _dispatchUpdateUI2).call(this, editor.propertiesToUpdate);\n        _classPrivateMethodGet(this, _dispatchUpdateStates, _dispatchUpdateStates2).call(this, {\n          hasSelectedEditor: true\n        });\n      }\n      isSelected(editor) {\n        return _classPrivateFieldGet(this, _selectedEditors).has(editor);\n      }\n      get firstSelectedEditor() {\n        return _classPrivateFieldGet(this, _selectedEditors).values().next().value;\n      }\n      unselect(editor) {\n        editor.unselect();\n        _classPrivateFieldGet(this, _selectedEditors).delete(editor);\n        _classPrivateMethodGet(this, _dispatchUpdateStates, _dispatchUpdateStates2).call(this, {\n          hasSelectedEditor: this.hasSelection\n        });\n      }\n      get hasSelection() {\n        return _classPrivateFieldGet(this, _selectedEditors).size !== 0;\n      }\n      get isEnterHandled() {\n        return _classPrivateFieldGet(this, _selectedEditors).size === 1 && this.firstSelectedEditor.isEnterHandled;\n      }\n      undo() {\n        _classPrivateFieldGet(this, _commandManager).undo();\n        _classPrivateMethodGet(this, _dispatchUpdateStates, _dispatchUpdateStates2).call(this, {\n          hasSomethingToUndo: _classPrivateFieldGet(this, _commandManager).hasSomethingToUndo(),\n          hasSomethingToRedo: true,\n          isEmpty: _classPrivateMethodGet(this, _isEmpty, _isEmpty2).call(this)\n        });\n      }\n      redo() {\n        _classPrivateFieldGet(this, _commandManager).redo();\n        _classPrivateMethodGet(this, _dispatchUpdateStates, _dispatchUpdateStates2).call(this, {\n          hasSomethingToUndo: true,\n          hasSomethingToRedo: _classPrivateFieldGet(this, _commandManager).hasSomethingToRedo(),\n          isEmpty: _classPrivateMethodGet(this, _isEmpty, _isEmpty2).call(this)\n        });\n      }\n      addCommands(params) {\n        _classPrivateFieldGet(this, _commandManager).add(params);\n        _classPrivateMethodGet(this, _dispatchUpdateStates, _dispatchUpdateStates2).call(this, {\n          hasSomethingToUndo: true,\n          hasSomethingToRedo: false,\n          isEmpty: _classPrivateMethodGet(this, _isEmpty, _isEmpty2).call(this)\n        });\n      }\n      delete() {\n        this.commitOrRemove();\n        if (!this.hasSelection) {\n          return;\n        }\n        const editors = [..._classPrivateFieldGet(this, _selectedEditors)];\n        const cmd = () => {\n          for (const editor of editors) {\n            editor.remove();\n          }\n        };\n        const undo = () => {\n          for (const editor of editors) {\n            _classPrivateMethodGet(this, _addEditorToLayer, _addEditorToLayer2).call(this, editor);\n          }\n        };\n        this.addCommands({\n          cmd,\n          undo,\n          mustExec: true\n        });\n      }\n      commitOrRemove() {\n        var _classPrivateFieldGet47;\n        (_classPrivateFieldGet47 = _classPrivateFieldGet(this, _activeEditor)) === null || _classPrivateFieldGet47 === void 0 || _classPrivateFieldGet47.commitOrRemove();\n      }\n      hasSomethingToControl() {\n        return _classPrivateFieldGet(this, _activeEditor) || this.hasSelection;\n      }\n      selectAll() {\n        for (const editor of _classPrivateFieldGet(this, _selectedEditors)) {\n          editor.commit();\n        }\n        _classPrivateMethodGet(this, _selectEditors, _selectEditors2).call(this, _classPrivateFieldGet(this, _allEditors).values());\n      }\n      unselectAll() {\n        if (_classPrivateFieldGet(this, _activeEditor)) {\n          _classPrivateFieldGet(this, _activeEditor).commitOrRemove();\n          if (_classPrivateFieldGet(this, _mode) !== _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorType.NONE) {\n            return;\n          }\n        }\n        if (!this.hasSelection) {\n          return;\n        }\n        for (const editor of _classPrivateFieldGet(this, _selectedEditors)) {\n          editor.unselect();\n        }\n        _classPrivateFieldGet(this, _selectedEditors).clear();\n        _classPrivateMethodGet(this, _dispatchUpdateStates, _dispatchUpdateStates2).call(this, {\n          hasSelectedEditor: false\n        });\n      }\n      translateSelectedEditors(x, y) {\n        let noCommit = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n        if (!noCommit) {\n          this.commitOrRemove();\n        }\n        if (!this.hasSelection) {\n          return;\n        }\n        _classPrivateFieldGet(this, _translation)[0] += x;\n        _classPrivateFieldGet(this, _translation)[1] += y;\n        const [totalX, totalY] = _classPrivateFieldGet(this, _translation);\n        const editors = [..._classPrivateFieldGet(this, _selectedEditors)];\n        const TIME_TO_WAIT = 1000;\n        if (_classPrivateFieldGet(this, _translationTimeoutId)) {\n          clearTimeout(_classPrivateFieldGet(this, _translationTimeoutId));\n        }\n        _classPrivateFieldSet(this, _translationTimeoutId, setTimeout(() => {\n          _classPrivateFieldSet(this, _translationTimeoutId, null);\n          _classPrivateFieldGet(this, _translation)[0] = _classPrivateFieldGet(this, _translation)[1] = 0;\n          this.addCommands({\n            cmd: () => {\n              for (const editor of editors) {\n                if (_classPrivateFieldGet(this, _allEditors).has(editor.id)) {\n                  editor.translateInPage(totalX, totalY);\n                }\n              }\n            },\n            undo: () => {\n              for (const editor of editors) {\n                if (_classPrivateFieldGet(this, _allEditors).has(editor.id)) {\n                  editor.translateInPage(-totalX, -totalY);\n                }\n              }\n            },\n            mustExec: false\n          });\n        }, TIME_TO_WAIT));\n        for (const editor of editors) {\n          editor.translateInPage(x, y);\n        }\n      }\n      setUpDragSession() {\n        if (!this.hasSelection) {\n          return;\n        }\n        this.disableUserSelect(true);\n        _classPrivateFieldSet(this, _draggingEditors, new Map());\n        for (const editor of _classPrivateFieldGet(this, _selectedEditors)) {\n          _classPrivateFieldGet(this, _draggingEditors).set(editor, {\n            savedX: editor.x,\n            savedY: editor.y,\n            savedPageIndex: editor.pageIndex,\n            newX: 0,\n            newY: 0,\n            newPageIndex: -1\n          });\n        }\n      }\n      endDragSession() {\n        if (!_classPrivateFieldGet(this, _draggingEditors)) {\n          return false;\n        }\n        this.disableUserSelect(false);\n        const map = _classPrivateFieldGet(this, _draggingEditors);\n        _classPrivateFieldSet(this, _draggingEditors, null);\n        let mustBeAddedInUndoStack = false;\n        for (const [{\n          x,\n          y,\n          pageIndex\n        }, value] of map) {\n          value.newX = x;\n          value.newY = y;\n          value.newPageIndex = pageIndex;\n          mustBeAddedInUndoStack || (mustBeAddedInUndoStack = x !== value.savedX || y !== value.savedY || pageIndex !== value.savedPageIndex);\n        }\n        if (!mustBeAddedInUndoStack) {\n          return false;\n        }\n        const move = (editor, x, y, pageIndex) => {\n          if (_classPrivateFieldGet(this, _allEditors).has(editor.id)) {\n            const parent = _classPrivateFieldGet(this, _allLayers).get(pageIndex);\n            if (parent) {\n              editor._setParentAndPosition(parent, x, y);\n            } else {\n              editor.pageIndex = pageIndex;\n              editor.x = x;\n              editor.y = y;\n            }\n          }\n        };\n        this.addCommands({\n          cmd: () => {\n            for (const [editor, {\n              newX,\n              newY,\n              newPageIndex\n            }] of map) {\n              move(editor, newX, newY, newPageIndex);\n            }\n          },\n          undo: () => {\n            for (const [editor, {\n              savedX,\n              savedY,\n              savedPageIndex\n            }] of map) {\n              move(editor, savedX, savedY, savedPageIndex);\n            }\n          },\n          mustExec: true\n        });\n        return true;\n      }\n      dragSelectedEditors(tx, ty) {\n        if (!_classPrivateFieldGet(this, _draggingEditors)) {\n          return;\n        }\n        for (const editor of _classPrivateFieldGet(this, _draggingEditors).keys()) {\n          editor.drag(tx, ty);\n        }\n      }\n      rebuild(editor) {\n        if (editor.parent === null) {\n          const parent = this.getLayer(editor.pageIndex);\n          if (parent) {\n            parent.changeParent(editor);\n            parent.addOrRebuild(editor);\n          } else {\n            this.addEditor(editor);\n            this.addToAnnotationStorage(editor);\n            editor.rebuild();\n          }\n        } else {\n          editor.parent.addOrRebuild(editor);\n        }\n      }\n      get isEditorHandlingKeyboard() {\n        var _this$getActive;\n        return ((_this$getActive = this.getActive()) === null || _this$getActive === void 0 ? void 0 : _this$getActive.shouldGetKeyboardEvents()) || _classPrivateFieldGet(this, _selectedEditors).size === 1 && this.firstSelectedEditor.shouldGetKeyboardEvents();\n      }\n      isActive(editor) {\n        return _classPrivateFieldGet(this, _activeEditor) === editor;\n      }\n      getActive() {\n        return _classPrivateFieldGet(this, _activeEditor);\n      }\n      getMode() {\n        return _classPrivateFieldGet(this, _mode);\n      }\n      get imageManager() {\n        return (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow)(this, \"imageManager\", new ImageManager());\n      }\n    }\n\n    /***/\n    function _addFocusManager2() {\n      window.addEventListener(\"focus\", _classPrivateFieldGet(this, _boundFocus));\n      window.addEventListener(\"blur\", _classPrivateFieldGet(this, _boundBlur));\n    }\n    function _removeFocusManager2() {\n      window.removeEventListener(\"focus\", _classPrivateFieldGet(this, _boundFocus));\n      window.removeEventListener(\"blur\", _classPrivateFieldGet(this, _boundBlur));\n    }\n    function _addKeyboardManager2() {\n      window.addEventListener(\"keydown\", _classPrivateFieldGet(this, _boundKeydown));\n    }\n    function _removeKeyboardManager2() {\n      window.removeEventListener(\"keydown\", _classPrivateFieldGet(this, _boundKeydown));\n    }\n    function _addCopyPasteListeners2() {\n      document.addEventListener(\"copy\", _classPrivateFieldGet(this, _boundCopy));\n      document.addEventListener(\"cut\", _classPrivateFieldGet(this, _boundCut));\n      document.addEventListener(\"paste\", _classPrivateFieldGet(this, _boundPaste));\n    }\n    function _removeCopyPasteListeners2() {\n      document.removeEventListener(\"copy\", _classPrivateFieldGet(this, _boundCopy));\n      document.removeEventListener(\"cut\", _classPrivateFieldGet(this, _boundCut));\n      document.removeEventListener(\"paste\", _classPrivateFieldGet(this, _boundPaste));\n    }\n    function _dispatchUpdateStates2(details) {\n      const hasChanged = Object.entries(details).some(_ref58 => {\n        let [key, value] = _ref58;\n        return _classPrivateFieldGet(this, _previousStates)[key] !== value;\n      });\n      if (hasChanged) {\n        this._eventBus.dispatch(\"annotationeditorstateschanged\", {\n          source: this,\n          details: Object.assign(_classPrivateFieldGet(this, _previousStates), details)\n        });\n      }\n    }\n    function _dispatchUpdateUI2(details) {\n      this._eventBus.dispatch(\"annotationeditorparamschanged\", {\n        source: this,\n        details\n      });\n    }\n    function _enableAll2() {\n      if (!_classPrivateFieldGet(this, _isEnabled)) {\n        _classPrivateFieldSet(this, _isEnabled, true);\n        for (const layer of _classPrivateFieldGet(this, _allLayers).values()) {\n          layer.enable();\n        }\n      }\n    }\n    function _disableAll2() {\n      this.unselectAll();\n      if (_classPrivateFieldGet(this, _isEnabled)) {\n        _classPrivateFieldSet(this, _isEnabled, false);\n        for (const layer of _classPrivateFieldGet(this, _allLayers).values()) {\n          layer.disable();\n        }\n      }\n    }\n    function _addEditorToLayer2(editor) {\n      const layer = _classPrivateFieldGet(this, _allLayers).get(editor.pageIndex);\n      if (layer) {\n        layer.addOrRebuild(editor);\n      } else {\n        this.addEditor(editor);\n      }\n    }\n    function _isEmpty2() {\n      if (_classPrivateFieldGet(this, _allEditors).size === 0) {\n        return true;\n      }\n      if (_classPrivateFieldGet(this, _allEditors).size === 1) {\n        for (const editor of _classPrivateFieldGet(this, _allEditors).values()) {\n          return editor.isEmpty();\n        }\n      }\n      return false;\n    }\n    function _selectEditors2(editors) {\n      _classPrivateFieldGet(this, _selectedEditors).clear();\n      for (const editor of editors) {\n        if (editor.isEmpty()) {\n          continue;\n        }\n        _classPrivateFieldGet(this, _selectedEditors).add(editor);\n        editor.select();\n      }\n      _classPrivateMethodGet(this, _dispatchUpdateStates, _dispatchUpdateStates2).call(this, {\n        hasSelectedEditor: true\n      });\n    }\n    _defineProperty(AnnotationEditorUIManager, \"TRANSLATE_SMALL\", 1);\n    _defineProperty(AnnotationEditorUIManager, \"TRANSLATE_BIG\", 10);\n  }),\n  /***/171: ( /***/(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {\n    /* harmony export */__webpack_require__.d(__webpack_exports__, {\n      /* harmony export */PDFFetchStream: () => ( /* binding */PDFFetchStream)\n      /* harmony export */\n    });\n    /* harmony import */\n    var _shared_util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(266);\n    /* harmony import */\n    var _network_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(253);\n    ;\n    function createFetchOptions(headers, withCredentials, abortController) {\n      return {\n        method: \"GET\",\n        headers,\n        signal: abortController.signal,\n        mode: \"cors\",\n        credentials: withCredentials ? \"include\" : \"same-origin\",\n        redirect: \"follow\"\n      };\n    }\n    function createHeaders(httpHeaders) {\n      const headers = new Headers();\n      for (const property in httpHeaders) {\n        const value = httpHeaders[property];\n        if (value === undefined) {\n          continue;\n        }\n        headers.append(property, value);\n      }\n      return headers;\n    }\n    function getArrayBuffer(val) {\n      if (val instanceof Uint8Array) {\n        return val.buffer;\n      }\n      if (val instanceof ArrayBuffer) {\n        return val;\n      }\n      (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(\"getArrayBuffer - unexpected data format: \".concat(val));\n      return new Uint8Array(val).buffer;\n    }\n    class PDFFetchStream {\n      constructor(source) {\n        this.source = source;\n        this.isHttp = /^https?:/i.test(source.url);\n        this.httpHeaders = this.isHttp && source.httpHeaders || {};\n        this._fullRequestReader = null;\n        this._rangeRequestReaders = [];\n      }\n      get _progressiveDataLength() {\n        var _this$_fullRequestRea, _this$_fullRequestRea2;\n        return (_this$_fullRequestRea = (_this$_fullRequestRea2 = this._fullRequestReader) === null || _this$_fullRequestRea2 === void 0 ? void 0 : _this$_fullRequestRea2._loaded) !== null && _this$_fullRequestRea !== void 0 ? _this$_fullRequestRea : 0;\n      }\n      getFullReader() {\n        (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(!this._fullRequestReader, \"PDFFetchStream.getFullReader can only be called once.\");\n        this._fullRequestReader = new PDFFetchStreamReader(this);\n        return this._fullRequestReader;\n      }\n      getRangeReader(begin, end) {\n        if (end <= this._progressiveDataLength) {\n          return null;\n        }\n        const reader = new PDFFetchStreamRangeReader(this, begin, end);\n        this._rangeRequestReaders.push(reader);\n        return reader;\n      }\n      cancelAllRequests(reason) {\n        var _this$_fullRequestRea3;\n        (_this$_fullRequestRea3 = this._fullRequestReader) === null || _this$_fullRequestRea3 === void 0 || _this$_fullRequestRea3.cancel(reason);\n        for (const reader of this._rangeRequestReaders.slice(0)) {\n          reader.cancel(reason);\n        }\n      }\n    }\n    class PDFFetchStreamReader {\n      constructor(stream) {\n        this._stream = stream;\n        this._reader = null;\n        this._loaded = 0;\n        this._filename = null;\n        const source = stream.source;\n        this._withCredentials = source.withCredentials || false;\n        this._contentLength = source.length;\n        this._headersCapability = new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.PromiseCapability();\n        this._disableRange = source.disableRange || false;\n        this._rangeChunkSize = source.rangeChunkSize;\n        if (!this._rangeChunkSize && !this._disableRange) {\n          this._disableRange = true;\n        }\n        this._abortController = new AbortController();\n        this._isStreamingSupported = !source.disableStream;\n        this._isRangeSupported = !source.disableRange;\n        this._headers = createHeaders(this._stream.httpHeaders);\n        const url = source.url;\n        fetch(url, createFetchOptions(this._headers, this._withCredentials, this._abortController)).then(response => {\n          if (!(0, _network_utils_js__WEBPACK_IMPORTED_MODULE_1__.validateResponseStatus)(response.status)) {\n            throw (0, _network_utils_js__WEBPACK_IMPORTED_MODULE_1__.createResponseStatusError)(response.status, url);\n          }\n          this._reader = response.body.getReader();\n          this._headersCapability.resolve();\n          const getResponseHeader = name => {\n            return response.headers.get(name);\n          };\n          const {\n            allowRangeRequests,\n            suggestedLength\n          } = (0, _network_utils_js__WEBPACK_IMPORTED_MODULE_1__.validateRangeRequestCapabilities)({\n            getResponseHeader,\n            isHttp: this._stream.isHttp,\n            rangeChunkSize: this._rangeChunkSize,\n            disableRange: this._disableRange\n          });\n          this._isRangeSupported = allowRangeRequests;\n          this._contentLength = suggestedLength || this._contentLength;\n          this._filename = (0, _network_utils_js__WEBPACK_IMPORTED_MODULE_1__.extractFilenameFromHeader)(getResponseHeader);\n          if (!this._isStreamingSupported && this._isRangeSupported) {\n            this.cancel(new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AbortException(\"Streaming is disabled.\"));\n          }\n        }).catch(this._headersCapability.reject);\n        this.onProgress = null;\n      }\n      get headersReady() {\n        return this._headersCapability.promise;\n      }\n      get filename() {\n        return this._filename;\n      }\n      get contentLength() {\n        return this._contentLength;\n      }\n      get isRangeSupported() {\n        return this._isRangeSupported;\n      }\n      get isStreamingSupported() {\n        return this._isStreamingSupported;\n      }\n      async read() {\n        var _this$onProgress;\n        await this._headersCapability.promise;\n        const {\n          value,\n          done\n        } = await this._reader.read();\n        if (done) {\n          return {\n            value,\n            done\n          };\n        }\n        this._loaded += value.byteLength;\n        (_this$onProgress = this.onProgress) === null || _this$onProgress === void 0 || _this$onProgress.call(this, {\n          loaded: this._loaded,\n          total: this._contentLength\n        });\n        return {\n          value: getArrayBuffer(value),\n          done: false\n        };\n      }\n      cancel(reason) {\n        var _this$_reader;\n        (_this$_reader = this._reader) === null || _this$_reader === void 0 || _this$_reader.cancel(reason);\n        this._abortController.abort();\n      }\n    }\n    class PDFFetchStreamRangeReader {\n      constructor(stream, begin, end) {\n        this._stream = stream;\n        this._reader = null;\n        this._loaded = 0;\n        const source = stream.source;\n        this._withCredentials = source.withCredentials || false;\n        this._readCapability = new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.PromiseCapability();\n        this._isStreamingSupported = !source.disableStream;\n        this._abortController = new AbortController();\n        this._headers = createHeaders(this._stream.httpHeaders);\n        this._headers.append(\"Range\", \"bytes=\".concat(begin, \"-\").concat(end - 1));\n        const url = source.url;\n        fetch(url, createFetchOptions(this._headers, this._withCredentials, this._abortController)).then(response => {\n          if (!(0, _network_utils_js__WEBPACK_IMPORTED_MODULE_1__.validateResponseStatus)(response.status)) {\n            throw (0, _network_utils_js__WEBPACK_IMPORTED_MODULE_1__.createResponseStatusError)(response.status, url);\n          }\n          this._readCapability.resolve();\n          this._reader = response.body.getReader();\n        }).catch(this._readCapability.reject);\n        this.onProgress = null;\n      }\n      get isStreamingSupported() {\n        return this._isStreamingSupported;\n      }\n      async read() {\n        var _this$onProgress2;\n        await this._readCapability.promise;\n        const {\n          value,\n          done\n        } = await this._reader.read();\n        if (done) {\n          return {\n            value,\n            done\n          };\n        }\n        this._loaded += value.byteLength;\n        (_this$onProgress2 = this.onProgress) === null || _this$onProgress2 === void 0 || _this$onProgress2.call(this, {\n          loaded: this._loaded\n        });\n        return {\n          value: getArrayBuffer(value),\n          done: false\n        };\n      }\n      cancel(reason) {\n        var _this$_reader2;\n        (_this$_reader2 = this._reader) === null || _this$_reader2 === void 0 || _this$_reader2.cancel(reason);\n        this._abortController.abort();\n      }\n    }\n\n    /***/\n  }),\n  /***/742: ( /***/(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {\n    /* harmony export */__webpack_require__.d(__webpack_exports__, {\n      /* harmony export */FontFaceObject: () => ( /* binding */FontFaceObject),\n      /* harmony export */FontLoader: () => ( /* binding */FontLoader)\n      /* harmony export */\n    });\n    /* harmony import */\n    var _shared_util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(266);\n    var _systemFonts = /*#__PURE__*/new WeakMap();\n    class FontLoader {\n      constructor(_ref59) {\n        let {\n          ownerDocument = globalThis.document,\n          styleElement = null\n        } = _ref59;\n        _classPrivateFieldInitSpec(this, _systemFonts, {\n          writable: true,\n          value: new Set()\n        });\n        this._document = ownerDocument;\n        this.nativeFontFaces = new Set();\n        this.styleElement = null;\n        this.loadingRequests = [];\n        this.loadTestFontId = 0;\n      }\n      addNativeFontFace(nativeFontFace) {\n        this.nativeFontFaces.add(nativeFontFace);\n        this._document.fonts.add(nativeFontFace);\n      }\n      removeNativeFontFace(nativeFontFace) {\n        this.nativeFontFaces.delete(nativeFontFace);\n        this._document.fonts.delete(nativeFontFace);\n      }\n      insertRule(rule) {\n        if (!this.styleElement) {\n          this.styleElement = this._document.createElement(\"style\");\n          this._document.documentElement.getElementsByTagName(\"head\")[0].append(this.styleElement);\n        }\n        const styleSheet = this.styleElement.sheet;\n        styleSheet.insertRule(rule, styleSheet.cssRules.length);\n      }\n      clear() {\n        for (const nativeFontFace of this.nativeFontFaces) {\n          this._document.fonts.delete(nativeFontFace);\n        }\n        this.nativeFontFaces.clear();\n        _classPrivateFieldGet(this, _systemFonts).clear();\n        if (this.styleElement) {\n          this.styleElement.remove();\n          this.styleElement = null;\n        }\n      }\n      async loadSystemFont(_ref60) {\n        let {\n          systemFontInfo: info,\n          _inspectFont\n        } = _ref60;\n        if (!info || _classPrivateFieldGet(this, _systemFonts).has(info.loadedName)) {\n          return;\n        }\n        (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(!this.disableFontFace, \"loadSystemFont shouldn't be called when `disableFontFace` is set.\");\n        if (this.isFontLoadingAPISupported) {\n          const {\n            loadedName,\n            src,\n            style\n          } = info;\n          const fontFace = new FontFace(loadedName, src, style);\n          this.addNativeFontFace(fontFace);\n          try {\n            await fontFace.load();\n            _classPrivateFieldGet(this, _systemFonts).add(loadedName);\n            _inspectFont === null || _inspectFont === void 0 || _inspectFont(info);\n          } catch {\n            (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(\"Cannot load system font: \".concat(info.baseFontName, \", installing it could help to improve PDF rendering.\"));\n            this.removeNativeFontFace(fontFace);\n          }\n          return;\n        }\n        (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.unreachable)(\"Not implemented: loadSystemFont without the Font Loading API.\");\n      }\n      async bind(font) {\n        if (font.attached || font.missingFile && !font.systemFontInfo) {\n          return;\n        }\n        font.attached = true;\n        if (font.systemFontInfo) {\n          await this.loadSystemFont(font);\n          return;\n        }\n        if (this.isFontLoadingAPISupported) {\n          const nativeFontFace = font.createNativeFontFace();\n          if (nativeFontFace) {\n            this.addNativeFontFace(nativeFontFace);\n            try {\n              await nativeFontFace.loaded;\n            } catch (ex) {\n              (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(\"Failed to load font '\".concat(nativeFontFace.family, \"': '\").concat(ex, \"'.\"));\n              font.disableFontFace = true;\n              throw ex;\n            }\n          }\n          return;\n        }\n        const rule = font.createFontFaceRule();\n        if (rule) {\n          this.insertRule(rule);\n          if (this.isSyncFontLoadingSupported) {\n            return;\n          }\n          await new Promise(resolve => {\n            const request = this._queueLoadingCallback(resolve);\n            this._prepareFontLoadEvent(font, request);\n          });\n        }\n      }\n      get isFontLoadingAPISupported() {\n        var _this$_document;\n        const hasFonts = !!((_this$_document = this._document) !== null && _this$_document !== void 0 && _this$_document.fonts);\n        return (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow)(this, \"isFontLoadingAPISupported\", hasFonts);\n      }\n      get isSyncFontLoadingSupported() {\n        var _navigator;\n        let supported = false;\n        if (_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.isNodeJS) {\n          supported = true;\n        } else if (typeof navigator !== \"undefined\" && typeof ((_navigator = navigator) === null || _navigator === void 0 ? void 0 : _navigator.userAgent) === \"string\" && /Mozilla\\/5.0.*?rv:\\d+.*? Gecko/.test(navigator.userAgent)) {\n          supported = true;\n        }\n        return (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow)(this, \"isSyncFontLoadingSupported\", supported);\n      }\n      _queueLoadingCallback(callback) {\n        function completeRequest() {\n          (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(!request.done, \"completeRequest() cannot be called twice.\");\n          request.done = true;\n          while (loadingRequests.length > 0 && loadingRequests[0].done) {\n            const otherRequest = loadingRequests.shift();\n            setTimeout(otherRequest.callback, 0);\n          }\n        }\n        const {\n          loadingRequests\n        } = this;\n        const request = {\n          done: false,\n          complete: completeRequest,\n          callback\n        };\n        loadingRequests.push(request);\n        return request;\n      }\n      get _loadTestFont() {\n        const testFont = atob(\"T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQA\" + \"FQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAA\" + \"ALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgA\" + \"AAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1\" + \"AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD\" + \"6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACM\" + \"AooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4D\" + \"IP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAA\" + \"AAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUA\" + \"AQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgAB\" + \"AAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABY\" + \"AAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAA\" + \"AC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAA\" + \"AAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQAC\" + \"AQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3\" + \"Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTj\" + \"FQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==\");\n        return (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow)(this, \"_loadTestFont\", testFont);\n      }\n      _prepareFontLoadEvent(font, request) {\n        function int32(data, offset) {\n          return data.charCodeAt(offset) << 24 | data.charCodeAt(offset + 1) << 16 | data.charCodeAt(offset + 2) << 8 | data.charCodeAt(offset + 3) & 0xff;\n        }\n        function spliceString(s, offset, remove, insert) {\n          const chunk1 = s.substring(0, offset);\n          const chunk2 = s.substring(offset + remove);\n          return chunk1 + insert + chunk2;\n        }\n        let i, ii;\n        const canvas = this._document.createElement(\"canvas\");\n        canvas.width = 1;\n        canvas.height = 1;\n        const ctx = canvas.getContext(\"2d\");\n        let called = 0;\n        function isFontReady(name, callback) {\n          if (++called > 30) {\n            (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(\"Load test font never loaded.\");\n            callback();\n            return;\n          }\n          ctx.font = \"30px \" + name;\n          ctx.fillText(\".\", 0, 20);\n          const imageData = ctx.getImageData(0, 0, 1, 1);\n          if (imageData.data[3] > 0) {\n            callback();\n            return;\n          }\n          setTimeout(isFontReady.bind(null, name, callback));\n        }\n        const loadTestFontId = \"lt\".concat(Date.now()).concat(this.loadTestFontId++);\n        let data = this._loadTestFont;\n        const COMMENT_OFFSET = 976;\n        data = spliceString(data, COMMENT_OFFSET, loadTestFontId.length, loadTestFontId);\n        const CFF_CHECKSUM_OFFSET = 16;\n        const XXXX_VALUE = 0x58585858;\n        let checksum = int32(data, CFF_CHECKSUM_OFFSET);\n        for (i = 0, ii = loadTestFontId.length - 3; i < ii; i += 4) {\n          checksum = checksum - XXXX_VALUE + int32(loadTestFontId, i) | 0;\n        }\n        if (i < loadTestFontId.length) {\n          checksum = checksum - XXXX_VALUE + int32(loadTestFontId + \"XXX\", i) | 0;\n        }\n        data = spliceString(data, CFF_CHECKSUM_OFFSET, 4, (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.string32)(checksum));\n        const url = \"url(data:font/opentype;base64,\".concat(btoa(data), \");\");\n        const rule = \"@font-face {font-family:\\\"\".concat(loadTestFontId, \"\\\";src:\").concat(url, \"}\");\n        this.insertRule(rule);\n        const div = this._document.createElement(\"div\");\n        div.style.visibility = \"hidden\";\n        div.style.width = div.style.height = \"10px\";\n        div.style.position = \"absolute\";\n        div.style.top = div.style.left = \"0px\";\n        for (const name of [font.loadedName, loadTestFontId]) {\n          const span = this._document.createElement(\"span\");\n          span.textContent = \"Hi\";\n          span.style.fontFamily = name;\n          div.append(span);\n        }\n        this._document.body.append(div);\n        isFontReady(loadTestFontId, () => {\n          div.remove();\n          request.complete();\n        });\n      }\n    }\n    class FontFaceObject {\n      constructor(translatedData, _ref61) {\n        let {\n          isEvalSupported = true,\n          disableFontFace = false,\n          ignoreErrors = false,\n          inspectFont = null\n        } = _ref61;\n        this.compiledGlyphs = Object.create(null);\n        for (const i in translatedData) {\n          this[i] = translatedData[i];\n        }\n        this.isEvalSupported = isEvalSupported !== false;\n        this.disableFontFace = disableFontFace === true;\n        this.ignoreErrors = ignoreErrors === true;\n        this._inspectFont = inspectFont;\n      }\n      createNativeFontFace() {\n        var _this$_inspectFont;\n        if (!this.data || this.disableFontFace) {\n          return null;\n        }\n        let nativeFontFace;\n        if (!this.cssFontInfo) {\n          nativeFontFace = new FontFace(this.loadedName, this.data, {});\n        } else {\n          const css = {\n            weight: this.cssFontInfo.fontWeight\n          };\n          if (this.cssFontInfo.italicAngle) {\n            css.style = \"oblique \".concat(this.cssFontInfo.italicAngle, \"deg\");\n          }\n          nativeFontFace = new FontFace(this.cssFontInfo.fontFamily, this.data, css);\n        }\n        (_this$_inspectFont = this._inspectFont) === null || _this$_inspectFont === void 0 || _this$_inspectFont.call(this, this);\n        return nativeFontFace;\n      }\n      createFontFaceRule() {\n        var _this$_inspectFont2;\n        if (!this.data || this.disableFontFace) {\n          return null;\n        }\n        const data = (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.bytesToString)(this.data);\n        const url = \"url(data:\".concat(this.mimetype, \";base64,\").concat(btoa(data), \");\");\n        let rule;\n        if (!this.cssFontInfo) {\n          rule = \"@font-face {font-family:\\\"\".concat(this.loadedName, \"\\\";src:\").concat(url, \"}\");\n        } else {\n          let css = \"font-weight: \".concat(this.cssFontInfo.fontWeight, \";\");\n          if (this.cssFontInfo.italicAngle) {\n            css += \"font-style: oblique \".concat(this.cssFontInfo.italicAngle, \"deg;\");\n          }\n          rule = \"@font-face {font-family:\\\"\".concat(this.cssFontInfo.fontFamily, \"\\\";\").concat(css, \"src:\").concat(url, \"}\");\n        }\n        (_this$_inspectFont2 = this._inspectFont) === null || _this$_inspectFont2 === void 0 || _this$_inspectFont2.call(this, this, url);\n        return rule;\n      }\n      getPathGenerator(objs, character) {\n        if (this.compiledGlyphs[character] !== undefined) {\n          return this.compiledGlyphs[character];\n        }\n        let cmds;\n        try {\n          cmds = objs.get(this.loadedName + \"_path_\" + character);\n        } catch (ex) {\n          if (!this.ignoreErrors) {\n            throw ex;\n          }\n          (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(\"getPathGenerator - ignoring character: \\\"\".concat(ex, \"\\\".\"));\n          return this.compiledGlyphs[character] = function (c, size) {};\n        }\n        if (this.isEvalSupported && _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.FeatureTest.isEvalSupported) {\n          const jsBuf = [];\n          for (const current of cmds) {\n            const args = current.args !== undefined ? current.args.join(\",\") : \"\";\n            jsBuf.push(\"c.\", current.cmd, \"(\", args, \");\\n\");\n          }\n          return this.compiledGlyphs[character] = new Function(\"c\", \"size\", jsBuf.join(\"\"));\n        }\n        return this.compiledGlyphs[character] = function (c, size) {\n          for (const current of cmds) {\n            if (current.cmd === \"scale\") {\n              current.args = [size, -size];\n            }\n            c[current.cmd].apply(c, current.args);\n          }\n        };\n      }\n    }\n\n    /***/\n  }),\n  /***/472: ( /***/(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {\n    /* harmony export */__webpack_require__.d(__webpack_exports__, {\n      /* harmony export */Metadata: () => ( /* binding */Metadata)\n      /* harmony export */\n    });\n    /* harmony import */\n    var _shared_util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(266);\n    var _metadataMap = /*#__PURE__*/new WeakMap();\n    var _data2 = /*#__PURE__*/new WeakMap();\n    class Metadata {\n      constructor(_ref62) {\n        let {\n          parsedData,\n          rawData\n        } = _ref62;\n        _classPrivateFieldInitSpec(this, _metadataMap, {\n          writable: true,\n          value: void 0\n        });\n        _classPrivateFieldInitSpec(this, _data2, {\n          writable: true,\n          value: void 0\n        });\n        _classPrivateFieldSet(this, _metadataMap, parsedData);\n        _classPrivateFieldSet(this, _data2, rawData);\n      }\n      getRaw() {\n        return _classPrivateFieldGet(this, _data2);\n      }\n      get(name) {\n        var _classPrivateFieldGet48;\n        return (_classPrivateFieldGet48 = _classPrivateFieldGet(this, _metadataMap).get(name)) !== null && _classPrivateFieldGet48 !== void 0 ? _classPrivateFieldGet48 : null;\n      }\n      getAll() {\n        return (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.objectFromMap)(_classPrivateFieldGet(this, _metadataMap));\n      }\n      has(name) {\n        return _classPrivateFieldGet(this, _metadataMap).has(name);\n      }\n    }\n\n    /***/\n  }),\n  /***/474: ( /***/(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {\n    /* harmony export */__webpack_require__.d(__webpack_exports__, {\n      /* harmony export */PDFNetworkStream: () => ( /* binding */PDFNetworkStream)\n      /* harmony export */\n    });\n    /* harmony import */\n    var _shared_util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(266);\n    /* harmony import */\n    var _network_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(253);\n    ;\n    const OK_RESPONSE = 200;\n    const PARTIAL_CONTENT_RESPONSE = 206;\n    function getArrayBuffer(xhr) {\n      const data = xhr.response;\n      if (typeof data !== \"string\") {\n        return data;\n      }\n      return (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.stringToBytes)(data).buffer;\n    }\n    class NetworkManager {\n      constructor(url) {\n        let args = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        this.url = url;\n        this.isHttp = /^https?:/i.test(url);\n        this.httpHeaders = this.isHttp && args.httpHeaders || Object.create(null);\n        this.withCredentials = args.withCredentials || false;\n        this.currXhrId = 0;\n        this.pendingRequests = Object.create(null);\n      }\n      requestRange(begin, end, listeners) {\n        const args = {\n          begin,\n          end\n        };\n        for (const prop in listeners) {\n          args[prop] = listeners[prop];\n        }\n        return this.request(args);\n      }\n      requestFull(listeners) {\n        return this.request(listeners);\n      }\n      request(args) {\n        const xhr = new XMLHttpRequest();\n        const xhrId = this.currXhrId++;\n        const pendingRequest = this.pendingRequests[xhrId] = {\n          xhr\n        };\n        xhr.open(\"GET\", this.url);\n        xhr.withCredentials = this.withCredentials;\n        for (const property in this.httpHeaders) {\n          const value = this.httpHeaders[property];\n          if (value === undefined) {\n            continue;\n          }\n          xhr.setRequestHeader(property, value);\n        }\n        if (this.isHttp && \"begin\" in args && \"end\" in args) {\n          xhr.setRequestHeader(\"Range\", \"bytes=\".concat(args.begin, \"-\").concat(args.end - 1));\n          pendingRequest.expectedStatus = PARTIAL_CONTENT_RESPONSE;\n        } else {\n          pendingRequest.expectedStatus = OK_RESPONSE;\n        }\n        xhr.responseType = \"arraybuffer\";\n        if (args.onError) {\n          xhr.onerror = function (evt) {\n            args.onError(xhr.status);\n          };\n        }\n        xhr.onreadystatechange = this.onStateChange.bind(this, xhrId);\n        xhr.onprogress = this.onProgress.bind(this, xhrId);\n        pendingRequest.onHeadersReceived = args.onHeadersReceived;\n        pendingRequest.onDone = args.onDone;\n        pendingRequest.onError = args.onError;\n        pendingRequest.onProgress = args.onProgress;\n        xhr.send(null);\n        return xhrId;\n      }\n      onProgress(xhrId, evt) {\n        var _pendingRequest$onPro;\n        const pendingRequest = this.pendingRequests[xhrId];\n        if (!pendingRequest) {\n          return;\n        }\n        (_pendingRequest$onPro = pendingRequest.onProgress) === null || _pendingRequest$onPro === void 0 || _pendingRequest$onPro.call(pendingRequest, evt);\n      }\n      onStateChange(xhrId, evt) {\n        const pendingRequest = this.pendingRequests[xhrId];\n        if (!pendingRequest) {\n          return;\n        }\n        const xhr = pendingRequest.xhr;\n        if (xhr.readyState >= 2 && pendingRequest.onHeadersReceived) {\n          pendingRequest.onHeadersReceived();\n          delete pendingRequest.onHeadersReceived;\n        }\n        if (xhr.readyState !== 4) {\n          return;\n        }\n        if (!(xhrId in this.pendingRequests)) {\n          return;\n        }\n        delete this.pendingRequests[xhrId];\n        if (xhr.status === 0 && this.isHttp) {\n          var _pendingRequest$onErr;\n          (_pendingRequest$onErr = pendingRequest.onError) === null || _pendingRequest$onErr === void 0 || _pendingRequest$onErr.call(pendingRequest, xhr.status);\n          return;\n        }\n        const xhrStatus = xhr.status || OK_RESPONSE;\n        const ok_response_on_range_request = xhrStatus === OK_RESPONSE && pendingRequest.expectedStatus === PARTIAL_CONTENT_RESPONSE;\n        if (!ok_response_on_range_request && xhrStatus !== pendingRequest.expectedStatus) {\n          var _pendingRequest$onErr2;\n          (_pendingRequest$onErr2 = pendingRequest.onError) === null || _pendingRequest$onErr2 === void 0 || _pendingRequest$onErr2.call(pendingRequest, xhr.status);\n          return;\n        }\n        const chunk = getArrayBuffer(xhr);\n        if (xhrStatus === PARTIAL_CONTENT_RESPONSE) {\n          const rangeHeader = xhr.getResponseHeader(\"Content-Range\");\n          const matches = /bytes (\\d+)-(\\d+)\\/(\\d+)/.exec(rangeHeader);\n          pendingRequest.onDone({\n            begin: parseInt(matches[1], 10),\n            chunk\n          });\n        } else if (chunk) {\n          pendingRequest.onDone({\n            begin: 0,\n            chunk\n          });\n        } else {\n          var _pendingRequest$onErr3;\n          (_pendingRequest$onErr3 = pendingRequest.onError) === null || _pendingRequest$onErr3 === void 0 || _pendingRequest$onErr3.call(pendingRequest, xhr.status);\n        }\n      }\n      getRequestXhr(xhrId) {\n        return this.pendingRequests[xhrId].xhr;\n      }\n      isPendingRequest(xhrId) {\n        return xhrId in this.pendingRequests;\n      }\n      abortRequest(xhrId) {\n        const xhr = this.pendingRequests[xhrId].xhr;\n        delete this.pendingRequests[xhrId];\n        xhr.abort();\n      }\n    }\n    class PDFNetworkStream {\n      constructor(source) {\n        this._source = source;\n        this._manager = new NetworkManager(source.url, {\n          httpHeaders: source.httpHeaders,\n          withCredentials: source.withCredentials\n        });\n        this._rangeChunkSize = source.rangeChunkSize;\n        this._fullRequestReader = null;\n        this._rangeRequestReaders = [];\n      }\n      _onRangeRequestReaderClosed(reader) {\n        const i = this._rangeRequestReaders.indexOf(reader);\n        if (i >= 0) {\n          this._rangeRequestReaders.splice(i, 1);\n        }\n      }\n      getFullReader() {\n        (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(!this._fullRequestReader, \"PDFNetworkStream.getFullReader can only be called once.\");\n        this._fullRequestReader = new PDFNetworkStreamFullRequestReader(this._manager, this._source);\n        return this._fullRequestReader;\n      }\n      getRangeReader(begin, end) {\n        const reader = new PDFNetworkStreamRangeRequestReader(this._manager, begin, end);\n        reader.onClosed = this._onRangeRequestReaderClosed.bind(this);\n        this._rangeRequestReaders.push(reader);\n        return reader;\n      }\n      cancelAllRequests(reason) {\n        var _this$_fullRequestRea4;\n        (_this$_fullRequestRea4 = this._fullRequestReader) === null || _this$_fullRequestRea4 === void 0 || _this$_fullRequestRea4.cancel(reason);\n        for (const reader of this._rangeRequestReaders.slice(0)) {\n          reader.cancel(reason);\n        }\n      }\n    }\n    class PDFNetworkStreamFullRequestReader {\n      constructor(manager, source) {\n        this._manager = manager;\n        const args = {\n          onHeadersReceived: this._onHeadersReceived.bind(this),\n          onDone: this._onDone.bind(this),\n          onError: this._onError.bind(this),\n          onProgress: this._onProgress.bind(this)\n        };\n        this._url = source.url;\n        this._fullRequestId = manager.requestFull(args);\n        this._headersReceivedCapability = new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.PromiseCapability();\n        this._disableRange = source.disableRange || false;\n        this._contentLength = source.length;\n        this._rangeChunkSize = source.rangeChunkSize;\n        if (!this._rangeChunkSize && !this._disableRange) {\n          this._disableRange = true;\n        }\n        this._isStreamingSupported = false;\n        this._isRangeSupported = false;\n        this._cachedChunks = [];\n        this._requests = [];\n        this._done = false;\n        this._storedError = undefined;\n        this._filename = null;\n        this.onProgress = null;\n      }\n      _onHeadersReceived() {\n        const fullRequestXhrId = this._fullRequestId;\n        const fullRequestXhr = this._manager.getRequestXhr(fullRequestXhrId);\n        const getResponseHeader = name => {\n          return fullRequestXhr.getResponseHeader(name);\n        };\n        const {\n          allowRangeRequests,\n          suggestedLength\n        } = (0, _network_utils_js__WEBPACK_IMPORTED_MODULE_1__.validateRangeRequestCapabilities)({\n          getResponseHeader,\n          isHttp: this._manager.isHttp,\n          rangeChunkSize: this._rangeChunkSize,\n          disableRange: this._disableRange\n        });\n        if (allowRangeRequests) {\n          this._isRangeSupported = true;\n        }\n        this._contentLength = suggestedLength || this._contentLength;\n        this._filename = (0, _network_utils_js__WEBPACK_IMPORTED_MODULE_1__.extractFilenameFromHeader)(getResponseHeader);\n        if (this._isRangeSupported) {\n          this._manager.abortRequest(fullRequestXhrId);\n        }\n        this._headersReceivedCapability.resolve();\n      }\n      _onDone(data) {\n        if (data) {\n          if (this._requests.length > 0) {\n            const requestCapability = this._requests.shift();\n            requestCapability.resolve({\n              value: data.chunk,\n              done: false\n            });\n          } else {\n            this._cachedChunks.push(data.chunk);\n          }\n        }\n        this._done = true;\n        if (this._cachedChunks.length > 0) {\n          return;\n        }\n        for (const requestCapability of this._requests) {\n          requestCapability.resolve({\n            value: undefined,\n            done: true\n          });\n        }\n        this._requests.length = 0;\n      }\n      _onError(status) {\n        this._storedError = (0, _network_utils_js__WEBPACK_IMPORTED_MODULE_1__.createResponseStatusError)(status, this._url);\n        this._headersReceivedCapability.reject(this._storedError);\n        for (const requestCapability of this._requests) {\n          requestCapability.reject(this._storedError);\n        }\n        this._requests.length = 0;\n        this._cachedChunks.length = 0;\n      }\n      _onProgress(evt) {\n        var _this$onProgress3;\n        (_this$onProgress3 = this.onProgress) === null || _this$onProgress3 === void 0 || _this$onProgress3.call(this, {\n          loaded: evt.loaded,\n          total: evt.lengthComputable ? evt.total : this._contentLength\n        });\n      }\n      get filename() {\n        return this._filename;\n      }\n      get isRangeSupported() {\n        return this._isRangeSupported;\n      }\n      get isStreamingSupported() {\n        return this._isStreamingSupported;\n      }\n      get contentLength() {\n        return this._contentLength;\n      }\n      get headersReady() {\n        return this._headersReceivedCapability.promise;\n      }\n      async read() {\n        if (this._storedError) {\n          throw this._storedError;\n        }\n        if (this._cachedChunks.length > 0) {\n          const chunk = this._cachedChunks.shift();\n          return {\n            value: chunk,\n            done: false\n          };\n        }\n        if (this._done) {\n          return {\n            value: undefined,\n            done: true\n          };\n        }\n        const requestCapability = new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.PromiseCapability();\n        this._requests.push(requestCapability);\n        return requestCapability.promise;\n      }\n      cancel(reason) {\n        this._done = true;\n        this._headersReceivedCapability.reject(reason);\n        for (const requestCapability of this._requests) {\n          requestCapability.resolve({\n            value: undefined,\n            done: true\n          });\n        }\n        this._requests.length = 0;\n        if (this._manager.isPendingRequest(this._fullRequestId)) {\n          this._manager.abortRequest(this._fullRequestId);\n        }\n        this._fullRequestReader = null;\n      }\n    }\n    class PDFNetworkStreamRangeRequestReader {\n      constructor(manager, begin, end) {\n        this._manager = manager;\n        const args = {\n          onDone: this._onDone.bind(this),\n          onError: this._onError.bind(this),\n          onProgress: this._onProgress.bind(this)\n        };\n        this._url = manager.url;\n        this._requestId = manager.requestRange(begin, end, args);\n        this._requests = [];\n        this._queuedChunk = null;\n        this._done = false;\n        this._storedError = undefined;\n        this.onProgress = null;\n        this.onClosed = null;\n      }\n      _close() {\n        var _this$onClosed;\n        (_this$onClosed = this.onClosed) === null || _this$onClosed === void 0 || _this$onClosed.call(this, this);\n      }\n      _onDone(data) {\n        const chunk = data.chunk;\n        if (this._requests.length > 0) {\n          const requestCapability = this._requests.shift();\n          requestCapability.resolve({\n            value: chunk,\n            done: false\n          });\n        } else {\n          this._queuedChunk = chunk;\n        }\n        this._done = true;\n        for (const requestCapability of this._requests) {\n          requestCapability.resolve({\n            value: undefined,\n            done: true\n          });\n        }\n        this._requests.length = 0;\n        this._close();\n      }\n      _onError(status) {\n        this._storedError = (0, _network_utils_js__WEBPACK_IMPORTED_MODULE_1__.createResponseStatusError)(status, this._url);\n        for (const requestCapability of this._requests) {\n          requestCapability.reject(this._storedError);\n        }\n        this._requests.length = 0;\n        this._queuedChunk = null;\n      }\n      _onProgress(evt) {\n        if (!this.isStreamingSupported) {\n          var _this$onProgress4;\n          (_this$onProgress4 = this.onProgress) === null || _this$onProgress4 === void 0 || _this$onProgress4.call(this, {\n            loaded: evt.loaded\n          });\n        }\n      }\n      get isStreamingSupported() {\n        return false;\n      }\n      async read() {\n        if (this._storedError) {\n          throw this._storedError;\n        }\n        if (this._queuedChunk !== null) {\n          const chunk = this._queuedChunk;\n          this._queuedChunk = null;\n          return {\n            value: chunk,\n            done: false\n          };\n        }\n        if (this._done) {\n          return {\n            value: undefined,\n            done: true\n          };\n        }\n        const requestCapability = new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.PromiseCapability();\n        this._requests.push(requestCapability);\n        return requestCapability.promise;\n      }\n      cancel(reason) {\n        this._done = true;\n        for (const requestCapability of this._requests) {\n          requestCapability.resolve({\n            value: undefined,\n            done: true\n          });\n        }\n        this._requests.length = 0;\n        if (this._manager.isPendingRequest(this._requestId)) {\n          this._manager.abortRequest(this._requestId);\n        }\n        this._close();\n      }\n    }\n\n    /***/\n  }),\n  /***/253: ( /***/(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {\n    // EXPORTS\n    __webpack_require__.d(__webpack_exports__, {\n      createResponseStatusError: () => ( /* binding */createResponseStatusError),\n      extractFilenameFromHeader: () => ( /* binding */extractFilenameFromHeader),\n      validateRangeRequestCapabilities: () => ( /* binding */validateRangeRequestCapabilities),\n      validateResponseStatus: () => ( /* binding */validateResponseStatus)\n    });\n\n    // EXTERNAL MODULE: ./src/shared/util.js\n    var util = __webpack_require__(266);\n    ; // CONCATENATED MODULE: ./src/display/content_disposition.js\n\n    function getFilenameFromContentDispositionHeader(contentDisposition) {\n      let needsEncodingFixup = true;\n      let tmp = toParamRegExp(\"filename\\\\*\", \"i\").exec(contentDisposition);\n      if (tmp) {\n        tmp = tmp[1];\n        let filename = rfc2616unquote(tmp);\n        filename = unescape(filename);\n        filename = rfc5987decode(filename);\n        filename = rfc2047decode(filename);\n        return fixupEncoding(filename);\n      }\n      tmp = rfc2231getparam(contentDisposition);\n      if (tmp) {\n        const filename = rfc2047decode(tmp);\n        return fixupEncoding(filename);\n      }\n      tmp = toParamRegExp(\"filename\", \"i\").exec(contentDisposition);\n      if (tmp) {\n        tmp = tmp[1];\n        let filename = rfc2616unquote(tmp);\n        filename = rfc2047decode(filename);\n        return fixupEncoding(filename);\n      }\n      function toParamRegExp(attributePattern, flags) {\n        return new RegExp(\"(?:^|;)\\\\s*\" + attributePattern + \"\\\\s*=\\\\s*\" + \"(\" + '[^\";\\\\s][^;\\\\s]*' + \"|\" + '\"(?:[^\"\\\\\\\\]|\\\\\\\\\"?)+\"?' + \")\", flags);\n      }\n      function textdecode(encoding, value) {\n        if (encoding) {\n          if (!/^[\\x00-\\xFF]+$/.test(value)) {\n            return value;\n          }\n          try {\n            const decoder = new TextDecoder(encoding, {\n              fatal: true\n            });\n            const buffer = (0, util.stringToBytes)(value);\n            value = decoder.decode(buffer);\n            needsEncodingFixup = false;\n          } catch {}\n        }\n        return value;\n      }\n      function fixupEncoding(value) {\n        if (needsEncodingFixup && /[\\x80-\\xff]/.test(value)) {\n          value = textdecode(\"utf-8\", value);\n          if (needsEncodingFixup) {\n            value = textdecode(\"iso-8859-1\", value);\n          }\n        }\n        return value;\n      }\n      function rfc2231getparam(contentDispositionStr) {\n        const matches = [];\n        let match;\n        const iter = toParamRegExp(\"filename\\\\*((?!0\\\\d)\\\\d+)(\\\\*?)\", \"ig\");\n        while ((match = iter.exec(contentDispositionStr)) !== null) {\n          let [, n, quot, part] = match;\n          n = parseInt(n, 10);\n          if (n in matches) {\n            if (n === 0) {\n              break;\n            }\n            continue;\n          }\n          matches[n] = [quot, part];\n        }\n        const parts = [];\n        for (let n = 0; n < matches.length; ++n) {\n          if (!(n in matches)) {\n            break;\n          }\n          let [quot, part] = matches[n];\n          part = rfc2616unquote(part);\n          if (quot) {\n            part = unescape(part);\n            if (n === 0) {\n              part = rfc5987decode(part);\n            }\n          }\n          parts.push(part);\n        }\n        return parts.join(\"\");\n      }\n      function rfc2616unquote(value) {\n        if (value.startsWith('\"')) {\n          const parts = value.slice(1).split('\\\\\"');\n          for (let i = 0; i < parts.length; ++i) {\n            const quotindex = parts[i].indexOf('\"');\n            if (quotindex !== -1) {\n              parts[i] = parts[i].slice(0, quotindex);\n              parts.length = i + 1;\n            }\n            parts[i] = parts[i].replaceAll(/\\\\(.)/g, \"$1\");\n          }\n          value = parts.join('\"');\n        }\n        return value;\n      }\n      function rfc5987decode(extvalue) {\n        const encodingend = extvalue.indexOf(\"'\");\n        if (encodingend === -1) {\n          return extvalue;\n        }\n        const encoding = extvalue.slice(0, encodingend);\n        const langvalue = extvalue.slice(encodingend + 1);\n        const value = langvalue.replace(/^[^']*'/, \"\");\n        return textdecode(encoding, value);\n      }\n      function rfc2047decode(value) {\n        if (!value.startsWith(\"=?\") || /[\\x00-\\x19\\x80-\\xff]/.test(value)) {\n          return value;\n        }\n        return value.replaceAll(/=\\?([\\w-]*)\\?([QqBb])\\?((?:[^?]|\\?(?!=))*)\\?=/g, function (matches, charset, encoding, text) {\n          if (encoding === \"q\" || encoding === \"Q\") {\n            text = text.replaceAll(\"_\", \" \");\n            text = text.replaceAll(/=([0-9a-fA-F]{2})/g, function (match, hex) {\n              return String.fromCharCode(parseInt(hex, 16));\n            });\n            return textdecode(charset, text);\n          }\n          try {\n            text = atob(text);\n          } catch {}\n          return textdecode(charset, text);\n        });\n      }\n      return \"\";\n    }\n\n    // EXTERNAL MODULE: ./src/display/display_utils.js\n    var display_utils = __webpack_require__(473);\n    ; // CONCATENATED MODULE: ./src/display/network_utils.js\n\n    function validateRangeRequestCapabilities(_ref63) {\n      let {\n        getResponseHeader,\n        isHttp,\n        rangeChunkSize,\n        disableRange\n      } = _ref63;\n      const returnValues = {\n        allowRangeRequests: false,\n        suggestedLength: undefined\n      };\n      const length = parseInt(getResponseHeader(\"Content-Length\"), 10);\n      if (!Number.isInteger(length)) {\n        return returnValues;\n      }\n      returnValues.suggestedLength = length;\n      if (length <= 2 * rangeChunkSize) {\n        return returnValues;\n      }\n      if (disableRange || !isHttp) {\n        return returnValues;\n      }\n      if (getResponseHeader(\"Accept-Ranges\") !== \"bytes\") {\n        return returnValues;\n      }\n      const contentEncoding = getResponseHeader(\"Content-Encoding\") || \"identity\";\n      if (contentEncoding !== \"identity\") {\n        return returnValues;\n      }\n      returnValues.allowRangeRequests = true;\n      return returnValues;\n    }\n    function extractFilenameFromHeader(getResponseHeader) {\n      const contentDisposition = getResponseHeader(\"Content-Disposition\");\n      if (contentDisposition) {\n        let filename = getFilenameFromContentDispositionHeader(contentDisposition);\n        if (filename.includes(\"%\")) {\n          try {\n            filename = decodeURIComponent(filename);\n          } catch {}\n        }\n        if ((0, display_utils.isPdfFile)(filename)) {\n          return filename;\n        }\n      }\n      return null;\n    }\n    function createResponseStatusError(status, url) {\n      if (status === 404 || status === 0 && url.startsWith(\"file:\")) {\n        return new util.MissingPDFException('Missing PDF \"' + url + '\".');\n      }\n      return new util.UnexpectedResponseException(\"Unexpected server response (\".concat(status, \") while retrieving PDF \\\"\").concat(url, \"\\\".\"), status);\n    }\n    function validateResponseStatus(status) {\n      return status === 200 || status === 206;\n    }\n\n    /***/\n  }),\n  /***/498: ( /***/(__webpack_module__, __webpack_exports__, __webpack_require__) => {\n    __webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => {\n      try {\n        /* harmony export */__webpack_require__.d(__webpack_exports__, {\n          /* harmony export */PDFNodeStream: () => ( /* binding */PDFNodeStream)\n          /* harmony export */\n        });\n        /* harmony import */\n        var _shared_util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(266);\n        /* harmony import */\n        var _network_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(253);\n        ;\n        let fs, http, https, url;\n        if (_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.isNodeJS) {\n          fs = await import( /* webpackIgnore: true */\"fs\");\n          http = await import( /* webpackIgnore: true */\"http\");\n          https = await import( /* webpackIgnore: true */\"https\");\n          url = await import( /* webpackIgnore: true */\"url\");\n        }\n        const fileUriRegex = /^file:\\/\\/\\/[a-zA-Z]:\\//;\n        function parseUrl(sourceUrl) {\n          const parsedUrl = url.parse(sourceUrl);\n          if (parsedUrl.protocol === \"file:\" || parsedUrl.host) {\n            return parsedUrl;\n          }\n          if (/^[a-z]:[/\\\\]/i.test(sourceUrl)) {\n            return url.parse(\"file:///\".concat(sourceUrl));\n          }\n          if (!parsedUrl.host) {\n            parsedUrl.protocol = \"file:\";\n          }\n          return parsedUrl;\n        }\n        class PDFNodeStream {\n          constructor(source) {\n            this.source = source;\n            this.url = parseUrl(source.url);\n            this.isHttp = this.url.protocol === \"http:\" || this.url.protocol === \"https:\";\n            this.isFsUrl = this.url.protocol === \"file:\";\n            this.httpHeaders = this.isHttp && source.httpHeaders || {};\n            this._fullRequestReader = null;\n            this._rangeRequestReaders = [];\n          }\n          get _progressiveDataLength() {\n            var _this$_fullRequestRea5, _this$_fullRequestRea6;\n            return (_this$_fullRequestRea5 = (_this$_fullRequestRea6 = this._fullRequestReader) === null || _this$_fullRequestRea6 === void 0 ? void 0 : _this$_fullRequestRea6._loaded) !== null && _this$_fullRequestRea5 !== void 0 ? _this$_fullRequestRea5 : 0;\n          }\n          getFullReader() {\n            (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(!this._fullRequestReader, \"PDFNodeStream.getFullReader can only be called once.\");\n            this._fullRequestReader = this.isFsUrl ? new PDFNodeStreamFsFullReader(this) : new PDFNodeStreamFullReader(this);\n            return this._fullRequestReader;\n          }\n          getRangeReader(start, end) {\n            if (end <= this._progressiveDataLength) {\n              return null;\n            }\n            const rangeReader = this.isFsUrl ? new PDFNodeStreamFsRangeReader(this, start, end) : new PDFNodeStreamRangeReader(this, start, end);\n            this._rangeRequestReaders.push(rangeReader);\n            return rangeReader;\n          }\n          cancelAllRequests(reason) {\n            var _this$_fullRequestRea7;\n            (_this$_fullRequestRea7 = this._fullRequestReader) === null || _this$_fullRequestRea7 === void 0 || _this$_fullRequestRea7.cancel(reason);\n            for (const reader of this._rangeRequestReaders.slice(0)) {\n              reader.cancel(reason);\n            }\n          }\n        }\n        class BaseFullReader {\n          constructor(stream) {\n            this._url = stream.url;\n            this._done = false;\n            this._storedError = null;\n            this.onProgress = null;\n            const source = stream.source;\n            this._contentLength = source.length;\n            this._loaded = 0;\n            this._filename = null;\n            this._disableRange = source.disableRange || false;\n            this._rangeChunkSize = source.rangeChunkSize;\n            if (!this._rangeChunkSize && !this._disableRange) {\n              this._disableRange = true;\n            }\n            this._isStreamingSupported = !source.disableStream;\n            this._isRangeSupported = !source.disableRange;\n            this._readableStream = null;\n            this._readCapability = new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.PromiseCapability();\n            this._headersCapability = new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.PromiseCapability();\n          }\n          get headersReady() {\n            return this._headersCapability.promise;\n          }\n          get filename() {\n            return this._filename;\n          }\n          get contentLength() {\n            return this._contentLength;\n          }\n          get isRangeSupported() {\n            return this._isRangeSupported;\n          }\n          get isStreamingSupported() {\n            return this._isStreamingSupported;\n          }\n          async read() {\n            var _this$onProgress5;\n            await this._readCapability.promise;\n            if (this._done) {\n              return {\n                value: undefined,\n                done: true\n              };\n            }\n            if (this._storedError) {\n              throw this._storedError;\n            }\n            const chunk = this._readableStream.read();\n            if (chunk === null) {\n              this._readCapability = new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.PromiseCapability();\n              return this.read();\n            }\n            this._loaded += chunk.length;\n            (_this$onProgress5 = this.onProgress) === null || _this$onProgress5 === void 0 || _this$onProgress5.call(this, {\n              loaded: this._loaded,\n              total: this._contentLength\n            });\n            const buffer = new Uint8Array(chunk).buffer;\n            return {\n              value: buffer,\n              done: false\n            };\n          }\n          cancel(reason) {\n            if (!this._readableStream) {\n              this._error(reason);\n              return;\n            }\n            this._readableStream.destroy(reason);\n          }\n          _error(reason) {\n            this._storedError = reason;\n            this._readCapability.resolve();\n          }\n          _setReadableStream(readableStream) {\n            this._readableStream = readableStream;\n            readableStream.on(\"readable\", () => {\n              this._readCapability.resolve();\n            });\n            readableStream.on(\"end\", () => {\n              readableStream.destroy();\n              this._done = true;\n              this._readCapability.resolve();\n            });\n            readableStream.on(\"error\", reason => {\n              this._error(reason);\n            });\n            if (!this._isStreamingSupported && this._isRangeSupported) {\n              this._error(new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AbortException(\"streaming is disabled\"));\n            }\n            if (this._storedError) {\n              this._readableStream.destroy(this._storedError);\n            }\n          }\n        }\n        class BaseRangeReader {\n          constructor(stream) {\n            this._url = stream.url;\n            this._done = false;\n            this._storedError = null;\n            this.onProgress = null;\n            this._loaded = 0;\n            this._readableStream = null;\n            this._readCapability = new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.PromiseCapability();\n            const source = stream.source;\n            this._isStreamingSupported = !source.disableStream;\n          }\n          get isStreamingSupported() {\n            return this._isStreamingSupported;\n          }\n          async read() {\n            var _this$onProgress6;\n            await this._readCapability.promise;\n            if (this._done) {\n              return {\n                value: undefined,\n                done: true\n              };\n            }\n            if (this._storedError) {\n              throw this._storedError;\n            }\n            const chunk = this._readableStream.read();\n            if (chunk === null) {\n              this._readCapability = new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.PromiseCapability();\n              return this.read();\n            }\n            this._loaded += chunk.length;\n            (_this$onProgress6 = this.onProgress) === null || _this$onProgress6 === void 0 || _this$onProgress6.call(this, {\n              loaded: this._loaded\n            });\n            const buffer = new Uint8Array(chunk).buffer;\n            return {\n              value: buffer,\n              done: false\n            };\n          }\n          cancel(reason) {\n            if (!this._readableStream) {\n              this._error(reason);\n              return;\n            }\n            this._readableStream.destroy(reason);\n          }\n          _error(reason) {\n            this._storedError = reason;\n            this._readCapability.resolve();\n          }\n          _setReadableStream(readableStream) {\n            this._readableStream = readableStream;\n            readableStream.on(\"readable\", () => {\n              this._readCapability.resolve();\n            });\n            readableStream.on(\"end\", () => {\n              readableStream.destroy();\n              this._done = true;\n              this._readCapability.resolve();\n            });\n            readableStream.on(\"error\", reason => {\n              this._error(reason);\n            });\n            if (this._storedError) {\n              this._readableStream.destroy(this._storedError);\n            }\n          }\n        }\n        function createRequestOptions(parsedUrl, headers) {\n          return {\n            protocol: parsedUrl.protocol,\n            auth: parsedUrl.auth,\n            host: parsedUrl.hostname,\n            port: parsedUrl.port,\n            path: parsedUrl.path,\n            method: \"GET\",\n            headers\n          };\n        }\n        class PDFNodeStreamFullReader extends BaseFullReader {\n          constructor(stream) {\n            super(stream);\n            const handleResponse = response => {\n              if (response.statusCode === 404) {\n                const error = new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.MissingPDFException(\"Missing PDF \\\"\".concat(this._url, \"\\\".\"));\n                this._storedError = error;\n                this._headersCapability.reject(error);\n                return;\n              }\n              this._headersCapability.resolve();\n              this._setReadableStream(response);\n              const getResponseHeader = name => {\n                return this._readableStream.headers[name.toLowerCase()];\n              };\n              const {\n                allowRangeRequests,\n                suggestedLength\n              } = (0, _network_utils_js__WEBPACK_IMPORTED_MODULE_1__.validateRangeRequestCapabilities)({\n                getResponseHeader,\n                isHttp: stream.isHttp,\n                rangeChunkSize: this._rangeChunkSize,\n                disableRange: this._disableRange\n              });\n              this._isRangeSupported = allowRangeRequests;\n              this._contentLength = suggestedLength || this._contentLength;\n              this._filename = (0, _network_utils_js__WEBPACK_IMPORTED_MODULE_1__.extractFilenameFromHeader)(getResponseHeader);\n            };\n            this._request = null;\n            if (this._url.protocol === \"http:\") {\n              this._request = http.request(createRequestOptions(this._url, stream.httpHeaders), handleResponse);\n            } else {\n              this._request = https.request(createRequestOptions(this._url, stream.httpHeaders), handleResponse);\n            }\n            this._request.on(\"error\", reason => {\n              this._storedError = reason;\n              this._headersCapability.reject(reason);\n            });\n            this._request.end();\n          }\n        }\n        class PDFNodeStreamRangeReader extends BaseRangeReader {\n          constructor(stream, start, end) {\n            super(stream);\n            this._httpHeaders = {};\n            for (const property in stream.httpHeaders) {\n              const value = stream.httpHeaders[property];\n              if (value === undefined) {\n                continue;\n              }\n              this._httpHeaders[property] = value;\n            }\n            this._httpHeaders.Range = \"bytes=\".concat(start, \"-\").concat(end - 1);\n            const handleResponse = response => {\n              if (response.statusCode === 404) {\n                const error = new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.MissingPDFException(\"Missing PDF \\\"\".concat(this._url, \"\\\".\"));\n                this._storedError = error;\n                return;\n              }\n              this._setReadableStream(response);\n            };\n            this._request = null;\n            if (this._url.protocol === \"http:\") {\n              this._request = http.request(createRequestOptions(this._url, this._httpHeaders), handleResponse);\n            } else {\n              this._request = https.request(createRequestOptions(this._url, this._httpHeaders), handleResponse);\n            }\n            this._request.on(\"error\", reason => {\n              this._storedError = reason;\n            });\n            this._request.end();\n          }\n        }\n        class PDFNodeStreamFsFullReader extends BaseFullReader {\n          constructor(stream) {\n            super(stream);\n            let path = decodeURIComponent(this._url.path);\n            if (fileUriRegex.test(this._url.href)) {\n              path = path.replace(/^\\//, \"\");\n            }\n            fs.lstat(path, (error, stat) => {\n              if (error) {\n                if (error.code === \"ENOENT\") {\n                  error = new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.MissingPDFException(\"Missing PDF \\\"\".concat(path, \"\\\".\"));\n                }\n                this._storedError = error;\n                this._headersCapability.reject(error);\n                return;\n              }\n              this._contentLength = stat.size;\n              this._setReadableStream(fs.createReadStream(path));\n              this._headersCapability.resolve();\n            });\n          }\n        }\n        class PDFNodeStreamFsRangeReader extends BaseRangeReader {\n          constructor(stream, start, end) {\n            super(stream);\n            let path = decodeURIComponent(this._url.path);\n            if (fileUriRegex.test(this._url.href)) {\n              path = path.replace(/^\\//, \"\");\n            }\n            this._setReadableStream(fs.createReadStream(path, {\n              start,\n              end: end - 1\n            }));\n          }\n        }\n        __webpack_async_result__();\n      } catch (e) {\n        __webpack_async_result__(e);\n      }\n    }, 1);\n\n    /***/\n  }),\n  /***/738: ( /***/(__webpack_module__, __webpack_exports__, __webpack_require__) => {\n    __webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => {\n      try {\n        /* harmony export */__webpack_require__.d(__webpack_exports__, {\n          /* harmony export */NodeCMapReaderFactory: () => ( /* binding */NodeCMapReaderFactory),\n          /* harmony export */NodeCanvasFactory: () => ( /* binding */NodeCanvasFactory),\n          /* harmony export */NodeFilterFactory: () => ( /* binding */NodeFilterFactory),\n          /* harmony export */NodeStandardFontDataFactory: () => ( /* binding */NodeStandardFontDataFactory)\n          /* harmony export */\n        });\n        /* harmony import */\n        var _base_factory_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(822);\n        /* harmony import */\n        var _shared_util_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(266);\n        ;\n        let fs, canvas, path2d_polyfill;\n        if (_shared_util_js__WEBPACK_IMPORTED_MODULE_1__.isNodeJS) {\n          fs = await import( /* webpackIgnore: true */\"fs\");\n          try {\n            canvas = await import( /* webpackIgnore: true */\"canvas\");\n          } catch {}\n          try {\n            path2d_polyfill = await import( /* webpackIgnore: true */\"path2d-polyfill\");\n          } catch {}\n        }\n        ;\n        const fetchData = function (url) {\n          return new Promise((resolve, reject) => {\n            fs.readFile(url, (error, data) => {\n              if (error || !data) {\n                reject(new Error(error));\n                return;\n              }\n              resolve(new Uint8Array(data));\n            });\n          });\n        };\n        class NodeFilterFactory extends _base_factory_js__WEBPACK_IMPORTED_MODULE_0__.BaseFilterFactory {}\n        class NodeCanvasFactory extends _base_factory_js__WEBPACK_IMPORTED_MODULE_0__.BaseCanvasFactory {\n          _createCanvas(width, height) {\n            return canvas.createCanvas(width, height);\n          }\n        }\n        class NodeCMapReaderFactory extends _base_factory_js__WEBPACK_IMPORTED_MODULE_0__.BaseCMapReaderFactory {\n          _fetchData(url, compressionType) {\n            return fetchData(url).then(data => {\n              return {\n                cMapData: data,\n                compressionType\n              };\n            });\n          }\n        }\n        class NodeStandardFontDataFactory extends _base_factory_js__WEBPACK_IMPORTED_MODULE_0__.BaseStandardFontDataFactory {\n          _fetchData(url) {\n            return fetchData(url);\n          }\n        }\n        __webpack_async_result__();\n      } catch (e) {\n        __webpack_async_result__(e);\n      }\n    }, 1);\n\n    /***/\n  }),\n  /***/890: ( /***/(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {\n    /* harmony export */__webpack_require__.d(__webpack_exports__, {\n      /* harmony export */OptionalContentConfig: () => ( /* binding */OptionalContentConfig)\n      /* harmony export */\n    });\n    /* harmony import */\n    var _shared_util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(266);\n    /* harmony import */\n    var _shared_murmurhash3_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(825);\n    const INTERNAL = Symbol(\"INTERNAL\");\n    var _visible = /*#__PURE__*/new WeakMap();\n    class OptionalContentGroup {\n      constructor(name, intent) {\n        _classPrivateFieldInitSpec(this, _visible, {\n          writable: true,\n          value: true\n        });\n        this.name = name;\n        this.intent = intent;\n      }\n      get visible() {\n        return _classPrivateFieldGet(this, _visible);\n      }\n      _setVisible(internal, visible) {\n        if (internal !== INTERNAL) {\n          (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.unreachable)(\"Internal method `_setVisible` called.\");\n        }\n        _classPrivateFieldSet(this, _visible, visible);\n      }\n    }\n    var _cachedGetHash = /*#__PURE__*/new WeakMap();\n    var _groups = /*#__PURE__*/new WeakMap();\n    var _initialHash = /*#__PURE__*/new WeakMap();\n    var _order = /*#__PURE__*/new WeakMap();\n    var _evaluateVisibilityExpression = /*#__PURE__*/new WeakSet();\n    class OptionalContentConfig {\n      constructor(data) {\n        _classPrivateMethodInitSpec(this, _evaluateVisibilityExpression);\n        _classPrivateFieldInitSpec(this, _cachedGetHash, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _groups, {\n          writable: true,\n          value: new Map()\n        });\n        _classPrivateFieldInitSpec(this, _initialHash, {\n          writable: true,\n          value: null\n        });\n        _classPrivateFieldInitSpec(this, _order, {\n          writable: true,\n          value: null\n        });\n        this.name = null;\n        this.creator = null;\n        if (data === null) {\n          return;\n        }\n        this.name = data.name;\n        this.creator = data.creator;\n        _classPrivateFieldSet(this, _order, data.order);\n        for (const group of data.groups) {\n          _classPrivateFieldGet(this, _groups).set(group.id, new OptionalContentGroup(group.name, group.intent));\n        }\n        if (data.baseState === \"OFF\") {\n          for (const group of _classPrivateFieldGet(this, _groups).values()) {\n            group._setVisible(INTERNAL, false);\n          }\n        }\n        for (const on of data.on) {\n          _classPrivateFieldGet(this, _groups).get(on)._setVisible(INTERNAL, true);\n        }\n        for (const off of data.off) {\n          _classPrivateFieldGet(this, _groups).get(off)._setVisible(INTERNAL, false);\n        }\n        _classPrivateFieldSet(this, _initialHash, this.getHash());\n      }\n      isVisible(group) {\n        if (_classPrivateFieldGet(this, _groups).size === 0) {\n          return true;\n        }\n        if (!group) {\n          (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(\"Optional content group not defined.\");\n          return true;\n        }\n        if (group.type === \"OCG\") {\n          if (!_classPrivateFieldGet(this, _groups).has(group.id)) {\n            (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(\"Optional content group not found: \".concat(group.id));\n            return true;\n          }\n          return _classPrivateFieldGet(this, _groups).get(group.id).visible;\n        } else if (group.type === \"OCMD\") {\n          if (group.expression) {\n            return _classPrivateMethodGet(this, _evaluateVisibilityExpression, _evaluateVisibilityExpression2).call(this, group.expression);\n          }\n          if (!group.policy || group.policy === \"AnyOn\") {\n            for (const id of group.ids) {\n              if (!_classPrivateFieldGet(this, _groups).has(id)) {\n                (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(\"Optional content group not found: \".concat(id));\n                return true;\n              }\n              if (_classPrivateFieldGet(this, _groups).get(id).visible) {\n                return true;\n              }\n            }\n            return false;\n          } else if (group.policy === \"AllOn\") {\n            for (const id of group.ids) {\n              if (!_classPrivateFieldGet(this, _groups).has(id)) {\n                (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(\"Optional content group not found: \".concat(id));\n                return true;\n              }\n              if (!_classPrivateFieldGet(this, _groups).get(id).visible) {\n                return false;\n              }\n            }\n            return true;\n          } else if (group.policy === \"AnyOff\") {\n            for (const id of group.ids) {\n              if (!_classPrivateFieldGet(this, _groups).has(id)) {\n                (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(\"Optional content group not found: \".concat(id));\n                return true;\n              }\n              if (!_classPrivateFieldGet(this, _groups).get(id).visible) {\n                return true;\n              }\n            }\n            return false;\n          } else if (group.policy === \"AllOff\") {\n            for (const id of group.ids) {\n              if (!_classPrivateFieldGet(this, _groups).has(id)) {\n                (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(\"Optional content group not found: \".concat(id));\n                return true;\n              }\n              if (_classPrivateFieldGet(this, _groups).get(id).visible) {\n                return false;\n              }\n            }\n            return true;\n          }\n          (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(\"Unknown optional content policy \".concat(group.policy, \".\"));\n          return true;\n        }\n        (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(\"Unknown group type \".concat(group.type, \".\"));\n        return true;\n      }\n      setVisibility(id) {\n        let visible = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n        if (!_classPrivateFieldGet(this, _groups).has(id)) {\n          (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(\"Optional content group not found: \".concat(id));\n          return;\n        }\n        _classPrivateFieldGet(this, _groups).get(id)._setVisible(INTERNAL, !!visible);\n        _classPrivateFieldSet(this, _cachedGetHash, null);\n      }\n      get hasInitialVisibility() {\n        return _classPrivateFieldGet(this, _initialHash) === null || this.getHash() === _classPrivateFieldGet(this, _initialHash);\n      }\n      getOrder() {\n        if (!_classPrivateFieldGet(this, _groups).size) {\n          return null;\n        }\n        if (_classPrivateFieldGet(this, _order)) {\n          return _classPrivateFieldGet(this, _order).slice();\n        }\n        return [..._classPrivateFieldGet(this, _groups).keys()];\n      }\n      getGroups() {\n        return _classPrivateFieldGet(this, _groups).size > 0 ? (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.objectFromMap)(_classPrivateFieldGet(this, _groups)) : null;\n      }\n      getGroup(id) {\n        return _classPrivateFieldGet(this, _groups).get(id) || null;\n      }\n      getHash() {\n        if (_classPrivateFieldGet(this, _cachedGetHash) !== null) {\n          return _classPrivateFieldGet(this, _cachedGetHash);\n        }\n        const hash = new _shared_murmurhash3_js__WEBPACK_IMPORTED_MODULE_1__.MurmurHash3_64();\n        for (const [id, group] of _classPrivateFieldGet(this, _groups)) {\n          hash.update(\"\".concat(id, \":\").concat(group.visible));\n        }\n        return _classPrivateFieldSet(this, _cachedGetHash, hash.hexdigest());\n      }\n    }\n\n    /***/\n    function _evaluateVisibilityExpression2(array) {\n      const length = array.length;\n      if (length < 2) {\n        return true;\n      }\n      const operator = array[0];\n      for (let i = 1; i < length; i++) {\n        const element = array[i];\n        let state;\n        if (Array.isArray(element)) {\n          state = _classPrivateMethodGet(this, _evaluateVisibilityExpression, _evaluateVisibilityExpression2).call(this, element);\n        } else if (_classPrivateFieldGet(this, _groups).has(element)) {\n          state = _classPrivateFieldGet(this, _groups).get(element).visible;\n        } else {\n          (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(\"Optional content group not found: \".concat(element));\n          return true;\n        }\n        switch (operator) {\n          case \"And\":\n            if (!state) {\n              return false;\n            }\n            break;\n          case \"Or\":\n            if (state) {\n              return true;\n            }\n            break;\n          case \"Not\":\n            return !state;\n          default:\n            return true;\n        }\n      }\n      return operator === \"And\";\n    }\n  }),\n  /***/739: ( /***/(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {\n    /* harmony export */__webpack_require__.d(__webpack_exports__, {\n      /* harmony export */renderTextLayer: () => ( /* binding */renderTextLayer),\n      /* harmony export */updateTextLayer: () => ( /* binding */updateTextLayer)\n      /* harmony export */\n    });\n    /* unused harmony export TextLayerRenderTask */\n    /* harmony import */\n    var _shared_util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(266);\n    /* harmony import */\n    var _display_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(473);\n    const MAX_TEXT_DIVS_TO_RENDER = 100000;\n    const DEFAULT_FONT_SIZE = 30;\n    const DEFAULT_FONT_ASCENT = 0.8;\n    const ascentCache = new Map();\n    function getCtx(size, isOffscreenCanvasSupported) {\n      let ctx;\n      if (isOffscreenCanvasSupported && _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.FeatureTest.isOffscreenCanvasSupported) {\n        ctx = new OffscreenCanvas(size, size).getContext(\"2d\", {\n          alpha: false\n        });\n      } else {\n        const canvas = document.createElement(\"canvas\");\n        canvas.width = canvas.height = size;\n        ctx = canvas.getContext(\"2d\", {\n          alpha: false\n        });\n      }\n      return ctx;\n    }\n    function getAscent(fontFamily, isOffscreenCanvasSupported) {\n      const cachedAscent = ascentCache.get(fontFamily);\n      if (cachedAscent) {\n        return cachedAscent;\n      }\n      const ctx = getCtx(DEFAULT_FONT_SIZE, isOffscreenCanvasSupported);\n      ctx.font = \"\".concat(DEFAULT_FONT_SIZE, \"px \").concat(fontFamily);\n      const metrics = ctx.measureText(\"\");\n      let ascent = metrics.fontBoundingBoxAscent;\n      let descent = Math.abs(metrics.fontBoundingBoxDescent);\n      if (ascent) {\n        const ratio = ascent / (ascent + descent);\n        ascentCache.set(fontFamily, ratio);\n        ctx.canvas.width = ctx.canvas.height = 0;\n        return ratio;\n      }\n      ctx.strokeStyle = \"red\";\n      ctx.clearRect(0, 0, DEFAULT_FONT_SIZE, DEFAULT_FONT_SIZE);\n      ctx.strokeText(\"g\", 0, 0);\n      let pixels = ctx.getImageData(0, 0, DEFAULT_FONT_SIZE, DEFAULT_FONT_SIZE).data;\n      descent = 0;\n      for (let i = pixels.length - 1 - 3; i >= 0; i -= 4) {\n        if (pixels[i] > 0) {\n          descent = Math.ceil(i / 4 / DEFAULT_FONT_SIZE);\n          break;\n        }\n      }\n      ctx.clearRect(0, 0, DEFAULT_FONT_SIZE, DEFAULT_FONT_SIZE);\n      ctx.strokeText(\"A\", 0, DEFAULT_FONT_SIZE);\n      pixels = ctx.getImageData(0, 0, DEFAULT_FONT_SIZE, DEFAULT_FONT_SIZE).data;\n      ascent = 0;\n      for (let i = 0, ii = pixels.length; i < ii; i += 4) {\n        if (pixels[i] > 0) {\n          ascent = DEFAULT_FONT_SIZE - Math.floor(i / 4 / DEFAULT_FONT_SIZE);\n          break;\n        }\n      }\n      ctx.canvas.width = ctx.canvas.height = 0;\n      if (ascent) {\n        const ratio = ascent / (ascent + descent);\n        ascentCache.set(fontFamily, ratio);\n        return ratio;\n      }\n      ascentCache.set(fontFamily, DEFAULT_FONT_ASCENT);\n      return DEFAULT_FONT_ASCENT;\n    }\n    function appendText(task, geom, styles) {\n      const textDiv = document.createElement(\"span\");\n      const textDivProperties = {\n        angle: 0,\n        canvasWidth: 0,\n        hasText: geom.str !== \"\",\n        hasEOL: geom.hasEOL,\n        fontSize: 0\n      };\n      task._textDivs.push(textDiv);\n      const tx = _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.Util.transform(task._transform, geom.transform);\n      let angle = Math.atan2(tx[1], tx[0]);\n      const style = styles[geom.fontName];\n      if (style.vertical) {\n        angle += Math.PI / 2;\n      }\n      const fontFamily = task._fontInspectorEnabled && style.fontSubstitution || style.fontFamily;\n      const fontHeight = Math.hypot(tx[2], tx[3]);\n      const fontAscent = fontHeight * getAscent(fontFamily, task._isOffscreenCanvasSupported);\n      let left, top;\n      if (angle === 0) {\n        left = tx[4];\n        top = tx[5] - fontAscent;\n      } else {\n        left = tx[4] + fontAscent * Math.sin(angle);\n        top = tx[5] - fontAscent * Math.cos(angle);\n      }\n      const scaleFactorStr = \"calc(var(--scale-factor)*\";\n      const divStyle = textDiv.style;\n      if (task._container === task._rootContainer) {\n        divStyle.left = \"\".concat((100 * left / task._pageWidth).toFixed(2), \"%\");\n        divStyle.top = \"\".concat((100 * top / task._pageHeight).toFixed(2), \"%\");\n      } else {\n        divStyle.left = \"\".concat(scaleFactorStr).concat(left.toFixed(2), \"px)\");\n        divStyle.top = \"\".concat(scaleFactorStr).concat(top.toFixed(2), \"px)\");\n      }\n      divStyle.fontSize = \"\".concat(scaleFactorStr).concat(fontHeight.toFixed(2), \"px)\");\n      divStyle.fontFamily = fontFamily;\n      textDivProperties.fontSize = fontHeight;\n      textDiv.setAttribute(\"role\", \"presentation\");\n      textDiv.textContent = geom.str;\n      textDiv.dir = geom.dir;\n      if (task._fontInspectorEnabled) {\n        textDiv.dataset.fontName = style.fontSubstitutionLoadedName || geom.fontName;\n      }\n      if (angle !== 0) {\n        textDivProperties.angle = angle * (180 / Math.PI);\n      }\n      let shouldScaleText = false;\n      if (geom.str.length > 1) {\n        shouldScaleText = true;\n      } else if (geom.str !== \" \" && geom.transform[0] !== geom.transform[3]) {\n        const absScaleX = Math.abs(geom.transform[0]),\n          absScaleY = Math.abs(geom.transform[3]);\n        if (absScaleX !== absScaleY && Math.max(absScaleX, absScaleY) / Math.min(absScaleX, absScaleY) > 1.5) {\n          shouldScaleText = true;\n        }\n      }\n      if (shouldScaleText) {\n        textDivProperties.canvasWidth = style.vertical ? geom.height : geom.width;\n      }\n      task._textDivProperties.set(textDiv, textDivProperties);\n      if (task._isReadableStream) {\n        task._layoutText(textDiv);\n      }\n    }\n    function layout(params) {\n      const {\n        div,\n        scale,\n        properties,\n        ctx,\n        prevFontSize,\n        prevFontFamily\n      } = params;\n      const {\n        style\n      } = div;\n      let transform = \"\";\n      if (properties.canvasWidth !== 0 && properties.hasText) {\n        const {\n          fontFamily\n        } = style;\n        const {\n          canvasWidth,\n          fontSize\n        } = properties;\n        if (prevFontSize !== fontSize || prevFontFamily !== fontFamily) {\n          ctx.font = \"\".concat(fontSize * scale, \"px \").concat(fontFamily);\n          params.prevFontSize = fontSize;\n          params.prevFontFamily = fontFamily;\n        }\n        const {\n          width\n        } = ctx.measureText(div.textContent);\n        if (width > 0) {\n          transform = \"scaleX(\".concat(canvasWidth * scale / width, \")\");\n        }\n      }\n      if (properties.angle !== 0) {\n        transform = \"rotate(\".concat(properties.angle, \"deg) \").concat(transform);\n      }\n      if (transform.length > 0) {\n        style.transform = transform;\n      }\n    }\n    function render(task) {\n      if (task._canceled) {\n        return;\n      }\n      const textDivs = task._textDivs;\n      const capability = task._capability;\n      const textDivsLength = textDivs.length;\n      if (textDivsLength > MAX_TEXT_DIVS_TO_RENDER) {\n        capability.resolve();\n        return;\n      }\n      if (!task._isReadableStream) {\n        for (const textDiv of textDivs) {\n          task._layoutText(textDiv);\n        }\n      }\n      capability.resolve();\n    }\n    class TextLayerRenderTask {\n      constructor(_ref64) {\n        var _globalThis$FontInspe2;\n        let {\n          textContentSource,\n          container,\n          viewport,\n          textDivs,\n          textDivProperties,\n          textContentItemsStr,\n          isOffscreenCanvasSupported\n        } = _ref64;\n        this._textContentSource = textContentSource;\n        this._isReadableStream = textContentSource instanceof ReadableStream;\n        this._container = this._rootContainer = container;\n        this._textDivs = textDivs || [];\n        this._textContentItemsStr = textContentItemsStr || [];\n        this._isOffscreenCanvasSupported = isOffscreenCanvasSupported;\n        this._fontInspectorEnabled = !!((_globalThis$FontInspe2 = globalThis.FontInspector) !== null && _globalThis$FontInspe2 !== void 0 && _globalThis$FontInspe2.enabled);\n        this._reader = null;\n        this._textDivProperties = textDivProperties || new WeakMap();\n        this._canceled = false;\n        this._capability = new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.PromiseCapability();\n        this._layoutTextParams = {\n          prevFontSize: null,\n          prevFontFamily: null,\n          div: null,\n          scale: viewport.scale * (globalThis.devicePixelRatio || 1),\n          properties: null,\n          ctx: getCtx(0, isOffscreenCanvasSupported)\n        };\n        const {\n          pageWidth,\n          pageHeight,\n          pageX,\n          pageY\n        } = viewport.rawDims;\n        this._transform = [1, 0, 0, -1, -pageX, pageY + pageHeight];\n        this._pageWidth = pageWidth;\n        this._pageHeight = pageHeight;\n        (0, _display_utils_js__WEBPACK_IMPORTED_MODULE_1__.setLayerDimensions)(container, viewport);\n        this._capability.promise.finally(() => {\n          this._layoutTextParams = null;\n        }).catch(() => {});\n      }\n      get promise() {\n        return this._capability.promise;\n      }\n      cancel() {\n        this._canceled = true;\n        if (this._reader) {\n          this._reader.cancel(new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AbortException(\"TextLayer task cancelled.\")).catch(() => {});\n          this._reader = null;\n        }\n        this._capability.reject(new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AbortException(\"TextLayer task cancelled.\"));\n      }\n      _processItems(items, styleCache) {\n        for (const item of items) {\n          if (item.str === undefined) {\n            if (item.type === \"beginMarkedContentProps\" || item.type === \"beginMarkedContent\") {\n              const parent = this._container;\n              this._container = document.createElement(\"span\");\n              this._container.classList.add(\"markedContent\");\n              if (item.id !== null) {\n                this._container.setAttribute(\"id\", \"\".concat(item.id));\n              }\n              parent.append(this._container);\n            } else if (item.type === \"endMarkedContent\") {\n              this._container = this._container.parentNode;\n            }\n            continue;\n          }\n          this._textContentItemsStr.push(item.str);\n          appendText(this, item, styleCache);\n        }\n      }\n      _layoutText(textDiv) {\n        const textDivProperties = this._layoutTextParams.properties = this._textDivProperties.get(textDiv);\n        this._layoutTextParams.div = textDiv;\n        layout(this._layoutTextParams);\n        if (textDivProperties.hasText) {\n          this._container.append(textDiv);\n        }\n        if (textDivProperties.hasEOL) {\n          const br = document.createElement(\"br\");\n          br.setAttribute(\"role\", \"presentation\");\n          this._container.append(br);\n        }\n      }\n      _render() {\n        const capability = new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.PromiseCapability();\n        let styleCache = Object.create(null);\n        if (this._isReadableStream) {\n          const pump = () => {\n            this._reader.read().then(_ref65 => {\n              let {\n                value,\n                done\n              } = _ref65;\n              if (done) {\n                capability.resolve();\n                return;\n              }\n              Object.assign(styleCache, value.styles);\n              this._processItems(value.items, styleCache);\n              pump();\n            }, capability.reject);\n          };\n          this._reader = this._textContentSource.getReader();\n          pump();\n        } else if (this._textContentSource) {\n          const {\n            items,\n            styles\n          } = this._textContentSource;\n          this._processItems(items, styles);\n          capability.resolve();\n        } else {\n          throw new Error('No \"textContentSource\" parameter specified.');\n        }\n        capability.promise.then(() => {\n          styleCache = null;\n          render(this);\n        }, this._capability.reject);\n      }\n    }\n    function renderTextLayer(params) {\n      const task = new TextLayerRenderTask(params);\n      task._render();\n      return task;\n    }\n    function updateTextLayer(_ref66) {\n      let {\n        container,\n        viewport,\n        textDivs,\n        textDivProperties,\n        isOffscreenCanvasSupported,\n        mustRotate = true,\n        mustRescale = true\n      } = _ref66;\n      if (mustRotate) {\n        (0, _display_utils_js__WEBPACK_IMPORTED_MODULE_1__.setLayerDimensions)(container, {\n          rotation: viewport.rotation\n        });\n      }\n      if (mustRescale) {\n        const ctx = getCtx(0, isOffscreenCanvasSupported);\n        const scale = viewport.scale * (globalThis.devicePixelRatio || 1);\n        const params = {\n          prevFontSize: null,\n          prevFontFamily: null,\n          div: null,\n          scale,\n          properties: null,\n          ctx\n        };\n        for (const div of textDivs) {\n          params.properties = textDivProperties.get(div);\n          params.div = div;\n          layout(params);\n        }\n      }\n    }\n\n    /***/\n  }),\n  /***/92: ( /***/(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {\n    /* harmony export */__webpack_require__.d(__webpack_exports__, {\n      /* harmony export */PDFDataTransportStream: () => ( /* binding */PDFDataTransportStream)\n      /* harmony export */\n    });\n    /* harmony import */\n    var _shared_util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(266);\n    /* harmony import */\n    var _display_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(473);\n    class PDFDataTransportStream {\n      constructor(_ref67, pdfDataRangeTransport) {\n        let {\n          length,\n          initialData,\n          progressiveDone = false,\n          contentDispositionFilename = null,\n          disableRange = false,\n          disableStream = false\n        } = _ref67;\n        (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(pdfDataRangeTransport, 'PDFDataTransportStream - missing required \"pdfDataRangeTransport\" argument.');\n        this._queuedChunks = [];\n        this._progressiveDone = progressiveDone;\n        this._contentDispositionFilename = contentDispositionFilename;\n        if ((initialData === null || initialData === void 0 ? void 0 : initialData.length) > 0) {\n          const buffer = initialData instanceof Uint8Array && initialData.byteLength === initialData.buffer.byteLength ? initialData.buffer : new Uint8Array(initialData).buffer;\n          this._queuedChunks.push(buffer);\n        }\n        this._pdfDataRangeTransport = pdfDataRangeTransport;\n        this._isStreamingSupported = !disableStream;\n        this._isRangeSupported = !disableRange;\n        this._contentLength = length;\n        this._fullRequestReader = null;\n        this._rangeReaders = [];\n        this._pdfDataRangeTransport.addRangeListener((begin, chunk) => {\n          this._onReceiveData({\n            begin,\n            chunk\n          });\n        });\n        this._pdfDataRangeTransport.addProgressListener((loaded, total) => {\n          this._onProgress({\n            loaded,\n            total\n          });\n        });\n        this._pdfDataRangeTransport.addProgressiveReadListener(chunk => {\n          this._onReceiveData({\n            chunk\n          });\n        });\n        this._pdfDataRangeTransport.addProgressiveDoneListener(() => {\n          this._onProgressiveDone();\n        });\n        this._pdfDataRangeTransport.transportReady();\n      }\n      _onReceiveData(_ref68) {\n        let {\n          begin,\n          chunk\n        } = _ref68;\n        const buffer = chunk instanceof Uint8Array && chunk.byteLength === chunk.buffer.byteLength ? chunk.buffer : new Uint8Array(chunk).buffer;\n        if (begin === undefined) {\n          if (this._fullRequestReader) {\n            this._fullRequestReader._enqueue(buffer);\n          } else {\n            this._queuedChunks.push(buffer);\n          }\n        } else {\n          const found = this._rangeReaders.some(function (rangeReader) {\n            if (rangeReader._begin !== begin) {\n              return false;\n            }\n            rangeReader._enqueue(buffer);\n            return true;\n          });\n          (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(found, \"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.\");\n        }\n      }\n      get _progressiveDataLength() {\n        var _this$_fullRequestRea8, _this$_fullRequestRea9;\n        return (_this$_fullRequestRea8 = (_this$_fullRequestRea9 = this._fullRequestReader) === null || _this$_fullRequestRea9 === void 0 ? void 0 : _this$_fullRequestRea9._loaded) !== null && _this$_fullRequestRea8 !== void 0 ? _this$_fullRequestRea8 : 0;\n      }\n      _onProgress(evt) {\n        if (evt.total === undefined) {\n          var _this$_rangeReaders$, _this$_rangeReaders$$;\n          (_this$_rangeReaders$ = this._rangeReaders[0]) === null || _this$_rangeReaders$ === void 0 || (_this$_rangeReaders$$ = _this$_rangeReaders$.onProgress) === null || _this$_rangeReaders$$ === void 0 || _this$_rangeReaders$$.call(_this$_rangeReaders$, {\n            loaded: evt.loaded\n          });\n        } else {\n          var _this$_fullRequestRea10, _this$_fullRequestRea11;\n          (_this$_fullRequestRea10 = this._fullRequestReader) === null || _this$_fullRequestRea10 === void 0 || (_this$_fullRequestRea11 = _this$_fullRequestRea10.onProgress) === null || _this$_fullRequestRea11 === void 0 || _this$_fullRequestRea11.call(_this$_fullRequestRea10, {\n            loaded: evt.loaded,\n            total: evt.total\n          });\n        }\n      }\n      _onProgressiveDone() {\n        var _this$_fullRequestRea12;\n        (_this$_fullRequestRea12 = this._fullRequestReader) === null || _this$_fullRequestRea12 === void 0 || _this$_fullRequestRea12.progressiveDone();\n        this._progressiveDone = true;\n      }\n      _removeRangeReader(reader) {\n        const i = this._rangeReaders.indexOf(reader);\n        if (i >= 0) {\n          this._rangeReaders.splice(i, 1);\n        }\n      }\n      getFullReader() {\n        (0, _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(!this._fullRequestReader, \"PDFDataTransportStream.getFullReader can only be called once.\");\n        const queuedChunks = this._queuedChunks;\n        this._queuedChunks = null;\n        return new PDFDataTransportStreamReader(this, queuedChunks, this._progressiveDone, this._contentDispositionFilename);\n      }\n      getRangeReader(begin, end) {\n        if (end <= this._progressiveDataLength) {\n          return null;\n        }\n        const reader = new PDFDataTransportStreamRangeReader(this, begin, end);\n        this._pdfDataRangeTransport.requestDataRange(begin, end);\n        this._rangeReaders.push(reader);\n        return reader;\n      }\n      cancelAllRequests(reason) {\n        var _this$_fullRequestRea13;\n        (_this$_fullRequestRea13 = this._fullRequestReader) === null || _this$_fullRequestRea13 === void 0 || _this$_fullRequestRea13.cancel(reason);\n        for (const reader of this._rangeReaders.slice(0)) {\n          reader.cancel(reason);\n        }\n        this._pdfDataRangeTransport.abort();\n      }\n    }\n    class PDFDataTransportStreamReader {\n      constructor(stream, queuedChunks) {\n        let progressiveDone = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n        let contentDispositionFilename = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n        this._stream = stream;\n        this._done = progressiveDone || false;\n        this._filename = (0, _display_utils_js__WEBPACK_IMPORTED_MODULE_1__.isPdfFile)(contentDispositionFilename) ? contentDispositionFilename : null;\n        this._queuedChunks = queuedChunks || [];\n        this._loaded = 0;\n        for (const chunk of this._queuedChunks) {\n          this._loaded += chunk.byteLength;\n        }\n        this._requests = [];\n        this._headersReady = Promise.resolve();\n        stream._fullRequestReader = this;\n        this.onProgress = null;\n      }\n      _enqueue(chunk) {\n        if (this._done) {\n          return;\n        }\n        if (this._requests.length > 0) {\n          const requestCapability = this._requests.shift();\n          requestCapability.resolve({\n            value: chunk,\n            done: false\n          });\n        } else {\n          this._queuedChunks.push(chunk);\n        }\n        this._loaded += chunk.byteLength;\n      }\n      get headersReady() {\n        return this._headersReady;\n      }\n      get filename() {\n        return this._filename;\n      }\n      get isRangeSupported() {\n        return this._stream._isRangeSupported;\n      }\n      get isStreamingSupported() {\n        return this._stream._isStreamingSupported;\n      }\n      get contentLength() {\n        return this._stream._contentLength;\n      }\n      async read() {\n        if (this._queuedChunks.length > 0) {\n          const chunk = this._queuedChunks.shift();\n          return {\n            value: chunk,\n            done: false\n          };\n        }\n        if (this._done) {\n          return {\n            value: undefined,\n            done: true\n          };\n        }\n        const requestCapability = new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.PromiseCapability();\n        this._requests.push(requestCapability);\n        return requestCapability.promise;\n      }\n      cancel(reason) {\n        this._done = true;\n        for (const requestCapability of this._requests) {\n          requestCapability.resolve({\n            value: undefined,\n            done: true\n          });\n        }\n        this._requests.length = 0;\n      }\n      progressiveDone() {\n        if (this._done) {\n          return;\n        }\n        this._done = true;\n      }\n    }\n    class PDFDataTransportStreamRangeReader {\n      constructor(stream, begin, end) {\n        this._stream = stream;\n        this._begin = begin;\n        this._end = end;\n        this._queuedChunk = null;\n        this._requests = [];\n        this._done = false;\n        this.onProgress = null;\n      }\n      _enqueue(chunk) {\n        if (this._done) {\n          return;\n        }\n        if (this._requests.length === 0) {\n          this._queuedChunk = chunk;\n        } else {\n          const requestsCapability = this._requests.shift();\n          requestsCapability.resolve({\n            value: chunk,\n            done: false\n          });\n          for (const requestCapability of this._requests) {\n            requestCapability.resolve({\n              value: undefined,\n              done: true\n            });\n          }\n          this._requests.length = 0;\n        }\n        this._done = true;\n        this._stream._removeRangeReader(this);\n      }\n      get isStreamingSupported() {\n        return false;\n      }\n      async read() {\n        if (this._queuedChunk) {\n          const chunk = this._queuedChunk;\n          this._queuedChunk = null;\n          return {\n            value: chunk,\n            done: false\n          };\n        }\n        if (this._done) {\n          return {\n            value: undefined,\n            done: true\n          };\n        }\n        const requestCapability = new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.PromiseCapability();\n        this._requests.push(requestCapability);\n        return requestCapability.promise;\n      }\n      cancel(reason) {\n        this._done = true;\n        for (const requestCapability of this._requests) {\n          requestCapability.resolve({\n            value: undefined,\n            done: true\n          });\n        }\n        this._requests.length = 0;\n        this._stream._removeRangeReader(this);\n      }\n    }\n\n    /***/\n  }),\n  /***/368: ( /***/(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {\n    /* harmony export */__webpack_require__.d(__webpack_exports__, {\n      /* harmony export */GlobalWorkerOptions: () => ( /* binding */GlobalWorkerOptions)\n      /* harmony export */\n    });\n    const GlobalWorkerOptions = Object.create(null);\n    GlobalWorkerOptions.workerPort = null;\n    GlobalWorkerOptions.workerSrc = \"\";\n\n    /***/\n  }),\n  /***/160: ( /***/(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {\n    /* harmony export */__webpack_require__.d(__webpack_exports__, {\n      /* harmony export */XfaLayer: () => ( /* binding */XfaLayer)\n      /* harmony export */\n    });\n    /* harmony import */\n    var _xfa_text_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(521);\n    class XfaLayer {\n      static setupStorage(html, id, element, storage, intent) {\n        const storedData = storage.getValue(id, {\n          value: null\n        });\n        switch (element.name) {\n          case \"textarea\":\n            if (storedData.value !== null) {\n              html.textContent = storedData.value;\n            }\n            if (intent === \"print\") {\n              break;\n            }\n            html.addEventListener(\"input\", event => {\n              storage.setValue(id, {\n                value: event.target.value\n              });\n            });\n            break;\n          case \"input\":\n            if (element.attributes.type === \"radio\" || element.attributes.type === \"checkbox\") {\n              if (storedData.value === element.attributes.xfaOn) {\n                html.setAttribute(\"checked\", true);\n              } else if (storedData.value === element.attributes.xfaOff) {\n                html.removeAttribute(\"checked\");\n              }\n              if (intent === \"print\") {\n                break;\n              }\n              html.addEventListener(\"change\", event => {\n                storage.setValue(id, {\n                  value: event.target.checked ? event.target.getAttribute(\"xfaOn\") : event.target.getAttribute(\"xfaOff\")\n                });\n              });\n            } else {\n              if (storedData.value !== null) {\n                html.setAttribute(\"value\", storedData.value);\n              }\n              if (intent === \"print\") {\n                break;\n              }\n              html.addEventListener(\"input\", event => {\n                storage.setValue(id, {\n                  value: event.target.value\n                });\n              });\n            }\n            break;\n          case \"select\":\n            if (storedData.value !== null) {\n              html.setAttribute(\"value\", storedData.value);\n              for (const option of element.children) {\n                if (option.attributes.value === storedData.value) {\n                  option.attributes.selected = true;\n                } else if (option.attributes.hasOwnProperty(\"selected\")) {\n                  delete option.attributes.selected;\n                }\n              }\n            }\n            html.addEventListener(\"input\", event => {\n              const options = event.target.options;\n              const value = options.selectedIndex === -1 ? \"\" : options[options.selectedIndex].value;\n              storage.setValue(id, {\n                value\n              });\n            });\n            break;\n        }\n      }\n      static setAttributes(_ref69) {\n        let {\n          html,\n          element,\n          storage = null,\n          intent,\n          linkService\n        } = _ref69;\n        const {\n          attributes\n        } = element;\n        const isHTMLAnchorElement = html instanceof HTMLAnchorElement;\n        if (attributes.type === \"radio\") {\n          attributes.name = \"\".concat(attributes.name, \"-\").concat(intent);\n        }\n        for (const [key, value] of Object.entries(attributes)) {\n          if (value === null || value === undefined) {\n            continue;\n          }\n          switch (key) {\n            case \"class\":\n              if (value.length) {\n                html.setAttribute(key, value.join(\" \"));\n              }\n              break;\n            case \"dataId\":\n              break;\n            case \"id\":\n              html.setAttribute(\"data-element-id\", value);\n              break;\n            case \"style\":\n              Object.assign(html.style, value);\n              break;\n            case \"textContent\":\n              html.textContent = value;\n              break;\n            default:\n              if (!isHTMLAnchorElement || key !== \"href\" && key !== \"newWindow\") {\n                html.setAttribute(key, value);\n              }\n          }\n        }\n        if (isHTMLAnchorElement) {\n          linkService.addLinkAttributes(html, attributes.href, attributes.newWindow);\n        }\n        if (storage && attributes.dataId) {\n          this.setupStorage(html, attributes.dataId, element, storage);\n        }\n      }\n      static render(parameters) {\n        const storage = parameters.annotationStorage;\n        const linkService = parameters.linkService;\n        const root = parameters.xfaHtml;\n        const intent = parameters.intent || \"display\";\n        const rootHtml = document.createElement(root.name);\n        if (root.attributes) {\n          this.setAttributes({\n            html: rootHtml,\n            element: root,\n            intent,\n            linkService\n          });\n        }\n        const isNotForRichText = intent !== \"richText\";\n        const rootDiv = parameters.div;\n        rootDiv.append(rootHtml);\n        if (parameters.viewport) {\n          const transform = \"matrix(\".concat(parameters.viewport.transform.join(\",\"), \")\");\n          rootDiv.style.transform = transform;\n        }\n        if (isNotForRichText) {\n          rootDiv.setAttribute(\"class\", \"xfaLayer xfaFont\");\n        }\n        const textDivs = [];\n        if (root.children.length === 0) {\n          if (root.value) {\n            const node = document.createTextNode(root.value);\n            rootHtml.append(node);\n            if (isNotForRichText && _xfa_text_js__WEBPACK_IMPORTED_MODULE_0__.XfaText.shouldBuildText(root.name)) {\n              textDivs.push(node);\n            }\n          }\n          return {\n            textDivs\n          };\n        }\n        const stack = [[root, -1, rootHtml]];\n        while (stack.length > 0) {\n          var _child$attributes, _child$children;\n          const [parent, i, html] = stack.at(-1);\n          if (i + 1 === parent.children.length) {\n            stack.pop();\n            continue;\n          }\n          const child = parent.children[++stack.at(-1)[1]];\n          if (child === null) {\n            continue;\n          }\n          const {\n            name\n          } = child;\n          if (name === \"#text\") {\n            const node = document.createTextNode(child.value);\n            textDivs.push(node);\n            html.append(node);\n            continue;\n          }\n          const childHtml = child !== null && child !== void 0 && (_child$attributes = child.attributes) !== null && _child$attributes !== void 0 && _child$attributes.xmlns ? document.createElementNS(child.attributes.xmlns, name) : document.createElement(name);\n          html.append(childHtml);\n          if (child.attributes) {\n            this.setAttributes({\n              html: childHtml,\n              element: child,\n              storage,\n              intent,\n              linkService\n            });\n          }\n          if (((_child$children = child.children) === null || _child$children === void 0 ? void 0 : _child$children.length) > 0) {\n            stack.push([child, -1, childHtml]);\n          } else if (child.value) {\n            const node = document.createTextNode(child.value);\n            if (isNotForRichText && _xfa_text_js__WEBPACK_IMPORTED_MODULE_0__.XfaText.shouldBuildText(name)) {\n              textDivs.push(node);\n            }\n            childHtml.append(node);\n          }\n        }\n        for (const el of rootDiv.querySelectorAll(\".xfaNonInteractive input, .xfaNonInteractive textarea\")) {\n          el.setAttribute(\"readOnly\", true);\n        }\n        return {\n          textDivs\n        };\n      }\n      static update(parameters) {\n        const transform = \"matrix(\".concat(parameters.viewport.transform.join(\",\"), \")\");\n        parameters.div.style.transform = transform;\n        parameters.div.hidden = false;\n      }\n    }\n\n    /***/\n  }),\n  /***/521: ( /***/(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {\n    /* harmony export */__webpack_require__.d(__webpack_exports__, {\n      /* harmony export */XfaText: () => ( /* binding */XfaText)\n      /* harmony export */\n    });\n    class XfaText {\n      static textContent(xfa) {\n        const items = [];\n        const output = {\n          items,\n          styles: Object.create(null)\n        };\n        function walk(node) {\n          var _node$attributes;\n          if (!node) {\n            return;\n          }\n          let str = null;\n          const name = node.name;\n          if (name === \"#text\") {\n            str = node.value;\n          } else if (!XfaText.shouldBuildText(name)) {\n            return;\n          } else if (node !== null && node !== void 0 && (_node$attributes = node.attributes) !== null && _node$attributes !== void 0 && _node$attributes.textContent) {\n            str = node.attributes.textContent;\n          } else if (node.value) {\n            str = node.value;\n          }\n          if (str !== null) {\n            items.push({\n              str\n            });\n          }\n          if (!node.children) {\n            return;\n          }\n          for (const child of node.children) {\n            walk(child);\n          }\n        }\n        walk(xfa);\n        return output;\n      }\n      static shouldBuildText(name) {\n        return !(name === \"textarea\" || name === \"input\" || name === \"option\" || name === \"select\");\n      }\n    }\n\n    /***/\n  }),\n  /***/907: ( /***/(__webpack_module__, __webpack_exports__, __webpack_require__) => {\n    __webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => {\n      try {\n        /* harmony export */__webpack_require__.d(__webpack_exports__, {\n          /* harmony export */AbortException: () => ( /* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AbortException),\n          /* harmony export */AnnotationEditorLayer: () => ( /* reexport safe */_display_editor_annotation_editor_layer_js__WEBPACK_IMPORTED_MODULE_4__.AnnotationEditorLayer),\n          /* harmony export */AnnotationEditorParamsType: () => ( /* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorParamsType),\n          /* harmony export */AnnotationEditorType: () => ( /* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorType),\n          /* harmony export */AnnotationEditorUIManager: () => ( /* reexport safe */_display_editor_tools_js__WEBPACK_IMPORTED_MODULE_5__.AnnotationEditorUIManager),\n          /* harmony export */AnnotationLayer: () => ( /* reexport safe */_display_annotation_layer_js__WEBPACK_IMPORTED_MODULE_6__.AnnotationLayer),\n          /* harmony export */AnnotationMode: () => ( /* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationMode),\n          /* harmony export */CMapCompressionType: () => ( /* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.CMapCompressionType),\n          /* harmony export */ColorPicker: () => ( /* reexport safe */_display_editor_color_picker_js__WEBPACK_IMPORTED_MODULE_7__.ColorPicker),\n          /* harmony export */DOMSVGFactory: () => ( /* reexport safe */_display_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.DOMSVGFactory),\n          /* harmony export */DrawLayer: () => ( /* reexport safe */_display_draw_layer_js__WEBPACK_IMPORTED_MODULE_8__.DrawLayer),\n          /* harmony export */FeatureTest: () => ( /* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.FeatureTest),\n          /* harmony export */GlobalWorkerOptions: () => ( /* reexport safe */_display_worker_options_js__WEBPACK_IMPORTED_MODULE_9__.GlobalWorkerOptions),\n          /* harmony export */ImageKind: () => ( /* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.ImageKind),\n          /* harmony export */InvalidPDFException: () => ( /* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.InvalidPDFException),\n          /* harmony export */MissingPDFException: () => ( /* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.MissingPDFException),\n          /* harmony export */OPS: () => ( /* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.OPS),\n          /* harmony export */Outliner: () => ( /* reexport safe */_display_editor_outliner_js__WEBPACK_IMPORTED_MODULE_10__.Outliner),\n          /* harmony export */PDFDataRangeTransport: () => ( /* reexport safe */_display_api_js__WEBPACK_IMPORTED_MODULE_1__.PDFDataRangeTransport),\n          /* harmony export */PDFDateString: () => ( /* reexport safe */_display_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.PDFDateString),\n          /* harmony export */PDFWorker: () => ( /* reexport safe */_display_api_js__WEBPACK_IMPORTED_MODULE_1__.PDFWorker),\n          /* harmony export */PasswordResponses: () => ( /* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.PasswordResponses),\n          /* harmony export */PermissionFlag: () => ( /* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.PermissionFlag),\n          /* harmony export */PixelsPerInch: () => ( /* reexport safe */_display_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.PixelsPerInch),\n          /* harmony export */PromiseCapability: () => ( /* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.PromiseCapability),\n          /* harmony export */RenderingCancelledException: () => ( /* reexport safe */_display_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.RenderingCancelledException),\n          /* harmony export */UnexpectedResponseException: () => ( /* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.UnexpectedResponseException),\n          /* harmony export */Util: () => ( /* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.Util),\n          /* harmony export */VerbosityLevel: () => ( /* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.VerbosityLevel),\n          /* harmony export */XfaLayer: () => ( /* reexport safe */_display_xfa_layer_js__WEBPACK_IMPORTED_MODULE_11__.XfaLayer),\n          /* harmony export */build: () => ( /* reexport safe */_display_api_js__WEBPACK_IMPORTED_MODULE_1__.build),\n          /* harmony export */createValidAbsoluteUrl: () => ( /* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.createValidAbsoluteUrl),\n          /* harmony export */fetchData: () => ( /* reexport safe */_display_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.fetchData),\n          /* harmony export */getDocument: () => ( /* reexport safe */_display_api_js__WEBPACK_IMPORTED_MODULE_1__.getDocument),\n          /* harmony export */getFilenameFromUrl: () => ( /* reexport safe */_display_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.getFilenameFromUrl),\n          /* harmony export */getPdfFilenameFromUrl: () => ( /* reexport safe */_display_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.getPdfFilenameFromUrl),\n          /* harmony export */getXfaPageViewport: () => ( /* reexport safe */_display_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.getXfaPageViewport),\n          /* harmony export */isDataScheme: () => ( /* reexport safe */_display_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.isDataScheme),\n          /* harmony export */isPdfFile: () => ( /* reexport safe */_display_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.isPdfFile),\n          /* harmony export */noContextMenu: () => ( /* reexport safe */_display_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.noContextMenu),\n          /* harmony export */normalizeUnicode: () => ( /* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeUnicode),\n          /* harmony export */renderTextLayer: () => ( /* reexport safe */_display_text_layer_js__WEBPACK_IMPORTED_MODULE_3__.renderTextLayer),\n          /* harmony export */setLayerDimensions: () => ( /* reexport safe */_display_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.setLayerDimensions),\n          /* harmony export */shadow: () => ( /* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow),\n          /* harmony export */updateTextLayer: () => ( /* reexport safe */_display_text_layer_js__WEBPACK_IMPORTED_MODULE_3__.updateTextLayer),\n          /* harmony export */version: () => ( /* reexport safe */_display_api_js__WEBPACK_IMPORTED_MODULE_1__.version)\n          /* harmony export */\n        });\n        /* harmony import */\n        var _shared_util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(266);\n        /* harmony import */\n        var _display_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(406);\n        /* harmony import */\n        var _display_display_utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(473);\n        /* harmony import */\n        var _display_text_layer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(739);\n        /* harmony import */\n        var _display_editor_annotation_editor_layer_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(629);\n        /* harmony import */\n        var _display_editor_tools_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(812);\n        /* harmony import */\n        var _display_annotation_layer_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(640);\n        /* harmony import */\n        var _display_editor_color_picker_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(97);\n        /* harmony import */\n        var _display_draw_layer_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(423);\n        /* harmony import */\n        var _display_worker_options_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(368);\n        /* harmony import */\n        var _display_editor_outliner_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(405);\n        /* harmony import */\n        var _display_xfa_layer_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(160);\n        var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_display_api_js__WEBPACK_IMPORTED_MODULE_1__]);\n        _display_api_js__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n        const pdfjsVersion = '4.0.379';\n        const pdfjsBuild = '9e14d04fd';\n        __webpack_async_result__();\n      } catch (e) {\n        __webpack_async_result__(e);\n      }\n    });\n\n    /***/\n  }),\n  /***/694: ( /***/(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {\n    /* harmony export */__webpack_require__.d(__webpack_exports__, {\n      /* harmony export */MessageHandler: () => ( /* binding */MessageHandler)\n      /* harmony export */\n    });\n    /* harmony import */\n    var _util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(266);\n    const CallbackKind = {\n      UNKNOWN: 0,\n      DATA: 1,\n      ERROR: 2\n    };\n    const StreamKind = {\n      UNKNOWN: 0,\n      CANCEL: 1,\n      CANCEL_COMPLETE: 2,\n      CLOSE: 3,\n      ENQUEUE: 4,\n      ERROR: 5,\n      PULL: 6,\n      PULL_COMPLETE: 7,\n      START_COMPLETE: 8\n    };\n    function wrapReason(reason) {\n      if (!(reason instanceof Error || typeof reason === \"object\" && reason !== null)) {\n        (0, _util_js__WEBPACK_IMPORTED_MODULE_0__.unreachable)('wrapReason: Expected \"reason\" to be a (possibly cloned) Error.');\n      }\n      switch (reason.name) {\n        case \"AbortException\":\n          return new _util_js__WEBPACK_IMPORTED_MODULE_0__.AbortException(reason.message);\n        case \"MissingPDFException\":\n          return new _util_js__WEBPACK_IMPORTED_MODULE_0__.MissingPDFException(reason.message);\n        case \"PasswordException\":\n          return new _util_js__WEBPACK_IMPORTED_MODULE_0__.PasswordException(reason.message, reason.code);\n        case \"UnexpectedResponseException\":\n          return new _util_js__WEBPACK_IMPORTED_MODULE_0__.UnexpectedResponseException(reason.message, reason.status);\n        case \"UnknownErrorException\":\n          return new _util_js__WEBPACK_IMPORTED_MODULE_0__.UnknownErrorException(reason.message, reason.details);\n        default:\n          return new _util_js__WEBPACK_IMPORTED_MODULE_0__.UnknownErrorException(reason.message, reason.toString());\n      }\n    }\n    var _createStreamSink = /*#__PURE__*/new WeakSet();\n    var _processStreamMessage = /*#__PURE__*/new WeakSet();\n    var _deleteStreamController = /*#__PURE__*/new WeakSet();\n    class MessageHandler {\n      constructor(_sourceName, _targetName, _comObj) {\n        _classPrivateMethodInitSpec(this, _deleteStreamController);\n        _classPrivateMethodInitSpec(this, _processStreamMessage);\n        _classPrivateMethodInitSpec(this, _createStreamSink);\n        this.sourceName = _sourceName;\n        this.targetName = _targetName;\n        this.comObj = _comObj;\n        this.callbackId = 1;\n        this.streamId = 1;\n        this.streamSinks = Object.create(null);\n        this.streamControllers = Object.create(null);\n        this.callbackCapabilities = Object.create(null);\n        this.actionHandler = Object.create(null);\n        this._onComObjOnMessage = event => {\n          const data = event.data;\n          if (data.targetName !== this.sourceName) {\n            return;\n          }\n          if (data.stream) {\n            _classPrivateMethodGet(this, _processStreamMessage, _processStreamMessage2).call(this, data);\n            return;\n          }\n          if (data.callback) {\n            const callbackId = data.callbackId;\n            const capability = this.callbackCapabilities[callbackId];\n            if (!capability) {\n              throw new Error(\"Cannot resolve callback \".concat(callbackId));\n            }\n            delete this.callbackCapabilities[callbackId];\n            if (data.callback === CallbackKind.DATA) {\n              capability.resolve(data.data);\n            } else if (data.callback === CallbackKind.ERROR) {\n              capability.reject(wrapReason(data.reason));\n            } else {\n              throw new Error(\"Unexpected callback case\");\n            }\n            return;\n          }\n          const action = this.actionHandler[data.action];\n          if (!action) {\n            throw new Error(\"Unknown action from worker: \".concat(data.action));\n          }\n          if (data.callbackId) {\n            const cbSourceName = this.sourceName;\n            const cbTargetName = data.sourceName;\n            new Promise(function (resolve) {\n              resolve(action(data.data));\n            }).then(function (result) {\n              _comObj.postMessage({\n                sourceName: cbSourceName,\n                targetName: cbTargetName,\n                callback: CallbackKind.DATA,\n                callbackId: data.callbackId,\n                data: result\n              });\n            }, function (reason) {\n              _comObj.postMessage({\n                sourceName: cbSourceName,\n                targetName: cbTargetName,\n                callback: CallbackKind.ERROR,\n                callbackId: data.callbackId,\n                reason: wrapReason(reason)\n              });\n            });\n            return;\n          }\n          if (data.streamId) {\n            _classPrivateMethodGet(this, _createStreamSink, _createStreamSink2).call(this, data);\n            return;\n          }\n          action(data.data);\n        };\n        _comObj.addEventListener(\"message\", this._onComObjOnMessage);\n      }\n      on(actionName, handler) {\n        const ah = this.actionHandler;\n        if (ah[actionName]) {\n          throw new Error(\"There is already an actionName called \\\"\".concat(actionName, \"\\\"\"));\n        }\n        ah[actionName] = handler;\n      }\n      send(actionName, data, transfers) {\n        this.comObj.postMessage({\n          sourceName: this.sourceName,\n          targetName: this.targetName,\n          action: actionName,\n          data\n        }, transfers);\n      }\n      sendWithPromise(actionName, data, transfers) {\n        const callbackId = this.callbackId++;\n        const capability = new _util_js__WEBPACK_IMPORTED_MODULE_0__.PromiseCapability();\n        this.callbackCapabilities[callbackId] = capability;\n        try {\n          this.comObj.postMessage({\n            sourceName: this.sourceName,\n            targetName: this.targetName,\n            action: actionName,\n            callbackId,\n            data\n          }, transfers);\n        } catch (ex) {\n          capability.reject(ex);\n        }\n        return capability.promise;\n      }\n      sendWithStream(actionName, data, queueingStrategy, transfers) {\n        const streamId = this.streamId++,\n          sourceName = this.sourceName,\n          targetName = this.targetName,\n          comObj = this.comObj;\n        return new ReadableStream({\n          start: controller => {\n            const startCapability = new _util_js__WEBPACK_IMPORTED_MODULE_0__.PromiseCapability();\n            this.streamControllers[streamId] = {\n              controller,\n              startCall: startCapability,\n              pullCall: null,\n              cancelCall: null,\n              isClosed: false\n            };\n            comObj.postMessage({\n              sourceName,\n              targetName,\n              action: actionName,\n              streamId,\n              data,\n              desiredSize: controller.desiredSize\n            }, transfers);\n            return startCapability.promise;\n          },\n          pull: controller => {\n            const pullCapability = new _util_js__WEBPACK_IMPORTED_MODULE_0__.PromiseCapability();\n            this.streamControllers[streamId].pullCall = pullCapability;\n            comObj.postMessage({\n              sourceName,\n              targetName,\n              stream: StreamKind.PULL,\n              streamId,\n              desiredSize: controller.desiredSize\n            });\n            return pullCapability.promise;\n          },\n          cancel: reason => {\n            (0, _util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(reason instanceof Error, \"cancel must have a valid reason\");\n            const cancelCapability = new _util_js__WEBPACK_IMPORTED_MODULE_0__.PromiseCapability();\n            this.streamControllers[streamId].cancelCall = cancelCapability;\n            this.streamControllers[streamId].isClosed = true;\n            comObj.postMessage({\n              sourceName,\n              targetName,\n              stream: StreamKind.CANCEL,\n              streamId,\n              reason: wrapReason(reason)\n            });\n            return cancelCapability.promise;\n          }\n        }, queueingStrategy);\n      }\n      destroy() {\n        this.comObj.removeEventListener(\"message\", this._onComObjOnMessage);\n      }\n    }\n\n    /***/\n    function _createStreamSink2(data) {\n      const streamId = data.streamId,\n        sourceName = this.sourceName,\n        targetName = data.sourceName,\n        comObj = this.comObj;\n      const self = this,\n        action = this.actionHandler[data.action];\n      const streamSink = {\n        enqueue(chunk) {\n          let size = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n          let transfers = arguments.length > 2 ? arguments[2] : undefined;\n          if (this.isCancelled) {\n            return;\n          }\n          const lastDesiredSize = this.desiredSize;\n          this.desiredSize -= size;\n          if (lastDesiredSize > 0 && this.desiredSize <= 0) {\n            this.sinkCapability = new _util_js__WEBPACK_IMPORTED_MODULE_0__.PromiseCapability();\n            this.ready = this.sinkCapability.promise;\n          }\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.ENQUEUE,\n            streamId,\n            chunk\n          }, transfers);\n        },\n        close() {\n          if (this.isCancelled) {\n            return;\n          }\n          this.isCancelled = true;\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.CLOSE,\n            streamId\n          });\n          delete self.streamSinks[streamId];\n        },\n        error(reason) {\n          (0, _util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(reason instanceof Error, \"error must have a valid reason\");\n          if (this.isCancelled) {\n            return;\n          }\n          this.isCancelled = true;\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.ERROR,\n            streamId,\n            reason: wrapReason(reason)\n          });\n        },\n        sinkCapability: new _util_js__WEBPACK_IMPORTED_MODULE_0__.PromiseCapability(),\n        onPull: null,\n        onCancel: null,\n        isCancelled: false,\n        desiredSize: data.desiredSize,\n        ready: null\n      };\n      streamSink.sinkCapability.resolve();\n      streamSink.ready = streamSink.sinkCapability.promise;\n      this.streamSinks[streamId] = streamSink;\n      new Promise(function (resolve) {\n        resolve(action(data.data, streamSink));\n      }).then(function () {\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.START_COMPLETE,\n          streamId,\n          success: true\n        });\n      }, function (reason) {\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.START_COMPLETE,\n          streamId,\n          reason: wrapReason(reason)\n        });\n      });\n    }\n    function _processStreamMessage2(data) {\n      const streamId = data.streamId,\n        sourceName = this.sourceName,\n        targetName = data.sourceName,\n        comObj = this.comObj;\n      const streamController = this.streamControllers[streamId],\n        streamSink = this.streamSinks[streamId];\n      switch (data.stream) {\n        case StreamKind.START_COMPLETE:\n          if (data.success) {\n            streamController.startCall.resolve();\n          } else {\n            streamController.startCall.reject(wrapReason(data.reason));\n          }\n          break;\n        case StreamKind.PULL_COMPLETE:\n          if (data.success) {\n            streamController.pullCall.resolve();\n          } else {\n            streamController.pullCall.reject(wrapReason(data.reason));\n          }\n          break;\n        case StreamKind.PULL:\n          if (!streamSink) {\n            comObj.postMessage({\n              sourceName,\n              targetName,\n              stream: StreamKind.PULL_COMPLETE,\n              streamId,\n              success: true\n            });\n            break;\n          }\n          if (streamSink.desiredSize <= 0 && data.desiredSize > 0) {\n            streamSink.sinkCapability.resolve();\n          }\n          streamSink.desiredSize = data.desiredSize;\n          new Promise(function (resolve) {\n            var _streamSink$onPull;\n            resolve((_streamSink$onPull = streamSink.onPull) === null || _streamSink$onPull === void 0 ? void 0 : _streamSink$onPull.call(streamSink));\n          }).then(function () {\n            comObj.postMessage({\n              sourceName,\n              targetName,\n              stream: StreamKind.PULL_COMPLETE,\n              streamId,\n              success: true\n            });\n          }, function (reason) {\n            comObj.postMessage({\n              sourceName,\n              targetName,\n              stream: StreamKind.PULL_COMPLETE,\n              streamId,\n              reason: wrapReason(reason)\n            });\n          });\n          break;\n        case StreamKind.ENQUEUE:\n          (0, _util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(streamController, \"enqueue should have stream controller\");\n          if (streamController.isClosed) {\n            break;\n          }\n          streamController.controller.enqueue(data.chunk);\n          break;\n        case StreamKind.CLOSE:\n          (0, _util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(streamController, \"close should have stream controller\");\n          if (streamController.isClosed) {\n            break;\n          }\n          streamController.isClosed = true;\n          streamController.controller.close();\n          _classPrivateMethodGet(this, _deleteStreamController, _deleteStreamController2).call(this, streamController, streamId);\n          break;\n        case StreamKind.ERROR:\n          (0, _util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(streamController, \"error should have stream controller\");\n          streamController.controller.error(wrapReason(data.reason));\n          _classPrivateMethodGet(this, _deleteStreamController, _deleteStreamController2).call(this, streamController, streamId);\n          break;\n        case StreamKind.CANCEL_COMPLETE:\n          if (data.success) {\n            streamController.cancelCall.resolve();\n          } else {\n            streamController.cancelCall.reject(wrapReason(data.reason));\n          }\n          _classPrivateMethodGet(this, _deleteStreamController, _deleteStreamController2).call(this, streamController, streamId);\n          break;\n        case StreamKind.CANCEL:\n          if (!streamSink) {\n            break;\n          }\n          new Promise(function (resolve) {\n            var _streamSink$onCancel;\n            resolve((_streamSink$onCancel = streamSink.onCancel) === null || _streamSink$onCancel === void 0 ? void 0 : _streamSink$onCancel.call(streamSink, wrapReason(data.reason)));\n          }).then(function () {\n            comObj.postMessage({\n              sourceName,\n              targetName,\n              stream: StreamKind.CANCEL_COMPLETE,\n              streamId,\n              success: true\n            });\n          }, function (reason) {\n            comObj.postMessage({\n              sourceName,\n              targetName,\n              stream: StreamKind.CANCEL_COMPLETE,\n              streamId,\n              reason: wrapReason(reason)\n            });\n          });\n          streamSink.sinkCapability.reject(wrapReason(data.reason));\n          streamSink.isCancelled = true;\n          delete this.streamSinks[streamId];\n          break;\n        default:\n          throw new Error(\"Unexpected stream case\");\n      }\n    }\n    async function _deleteStreamController2(streamController, streamId) {\n      var _streamController$sta, _streamController$pul, _streamController$can;\n      await Promise.allSettled([(_streamController$sta = streamController.startCall) === null || _streamController$sta === void 0 ? void 0 : _streamController$sta.promise, (_streamController$pul = streamController.pullCall) === null || _streamController$pul === void 0 ? void 0 : _streamController$pul.promise, (_streamController$can = streamController.cancelCall) === null || _streamController$can === void 0 ? void 0 : _streamController$can.promise]);\n      delete this.streamControllers[streamId];\n    }\n  }),\n  /***/825: ( /***/(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {\n    /* harmony export */__webpack_require__.d(__webpack_exports__, {\n      /* harmony export */MurmurHash3_64: () => ( /* binding */MurmurHash3_64)\n      /* harmony export */\n    });\n    /* harmony import */\n    var _util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(266);\n    const SEED = 0xc3d2e1f0;\n    const MASK_HIGH = 0xffff0000;\n    const MASK_LOW = 0xffff;\n    class MurmurHash3_64 {\n      constructor(seed) {\n        this.h1 = seed ? seed & 0xffffffff : SEED;\n        this.h2 = seed ? seed & 0xffffffff : SEED;\n      }\n      update(input) {\n        let data, length;\n        if (typeof input === \"string\") {\n          data = new Uint8Array(input.length * 2);\n          length = 0;\n          for (let i = 0, ii = input.length; i < ii; i++) {\n            const code = input.charCodeAt(i);\n            if (code <= 0xff) {\n              data[length++] = code;\n            } else {\n              data[length++] = code >>> 8;\n              data[length++] = code & 0xff;\n            }\n          }\n        } else if ((0, _util_js__WEBPACK_IMPORTED_MODULE_0__.isArrayBuffer)(input)) {\n          data = input.slice();\n          length = data.byteLength;\n        } else {\n          throw new Error(\"Wrong data format in MurmurHash3_64_update. \" + \"Input must be a string or array.\");\n        }\n        const blockCounts = length >> 2;\n        const tailLength = length - blockCounts * 4;\n        const dataUint32 = new Uint32Array(data.buffer, 0, blockCounts);\n        let k1 = 0,\n          k2 = 0;\n        let h1 = this.h1,\n          h2 = this.h2;\n        const C1 = 0xcc9e2d51,\n          C2 = 0x1b873593;\n        const C1_LOW = C1 & MASK_LOW,\n          C2_LOW = C2 & MASK_LOW;\n        for (let i = 0; i < blockCounts; i++) {\n          if (i & 1) {\n            k1 = dataUint32[i];\n            k1 = k1 * C1 & MASK_HIGH | k1 * C1_LOW & MASK_LOW;\n            k1 = k1 << 15 | k1 >>> 17;\n            k1 = k1 * C2 & MASK_HIGH | k1 * C2_LOW & MASK_LOW;\n            h1 ^= k1;\n            h1 = h1 << 13 | h1 >>> 19;\n            h1 = h1 * 5 + 0xe6546b64;\n          } else {\n            k2 = dataUint32[i];\n            k2 = k2 * C1 & MASK_HIGH | k2 * C1_LOW & MASK_LOW;\n            k2 = k2 << 15 | k2 >>> 17;\n            k2 = k2 * C2 & MASK_HIGH | k2 * C2_LOW & MASK_LOW;\n            h2 ^= k2;\n            h2 = h2 << 13 | h2 >>> 19;\n            h2 = h2 * 5 + 0xe6546b64;\n          }\n        }\n        k1 = 0;\n        switch (tailLength) {\n          case 3:\n            k1 ^= data[blockCounts * 4 + 2] << 16;\n          case 2:\n            k1 ^= data[blockCounts * 4 + 1] << 8;\n          case 1:\n            k1 ^= data[blockCounts * 4];\n            k1 = k1 * C1 & MASK_HIGH | k1 * C1_LOW & MASK_LOW;\n            k1 = k1 << 15 | k1 >>> 17;\n            k1 = k1 * C2 & MASK_HIGH | k1 * C2_LOW & MASK_LOW;\n            if (blockCounts & 1) {\n              h1 ^= k1;\n            } else {\n              h2 ^= k1;\n            }\n        }\n        this.h1 = h1;\n        this.h2 = h2;\n      }\n      hexdigest() {\n        let h1 = this.h1,\n          h2 = this.h2;\n        h1 ^= h2 >>> 1;\n        h1 = h1 * 0xed558ccd & MASK_HIGH | h1 * 0x8ccd & MASK_LOW;\n        h2 = h2 * 0xff51afd7 & MASK_HIGH | ((h2 << 16 | h1 >>> 16) * 0xafd7ed55 & MASK_HIGH) >>> 16;\n        h1 ^= h2 >>> 1;\n        h1 = h1 * 0x1a85ec53 & MASK_HIGH | h1 * 0xec53 & MASK_LOW;\n        h2 = h2 * 0xc4ceb9fe & MASK_HIGH | ((h2 << 16 | h1 >>> 16) * 0xb9fe1a85 & MASK_HIGH) >>> 16;\n        h1 ^= h2 >>> 1;\n        return (h1 >>> 0).toString(16).padStart(8, \"0\") + (h2 >>> 0).toString(16).padStart(8, \"0\");\n      }\n    }\n\n    /***/\n  }),\n  /***/266: ( /***/(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {\n    /* harmony export */__webpack_require__.d(__webpack_exports__, {\n      /* harmony export */AbortException: () => ( /* binding */AbortException),\n      /* harmony export */AnnotationBorderStyleType: () => ( /* binding */AnnotationBorderStyleType),\n      /* harmony export */AnnotationEditorParamsType: () => ( /* binding */AnnotationEditorParamsType),\n      /* harmony export */AnnotationEditorPrefix: () => ( /* binding */AnnotationEditorPrefix),\n      /* harmony export */AnnotationEditorType: () => ( /* binding */AnnotationEditorType),\n      /* harmony export */AnnotationMode: () => ( /* binding */AnnotationMode),\n      /* harmony export */AnnotationPrefix: () => ( /* binding */AnnotationPrefix),\n      /* harmony export */AnnotationType: () => ( /* binding */AnnotationType),\n      /* harmony export */BaseException: () => ( /* binding */BaseException),\n      /* harmony export */CMapCompressionType: () => ( /* binding */CMapCompressionType),\n      /* harmony export */FONT_IDENTITY_MATRIX: () => ( /* binding */FONT_IDENTITY_MATRIX),\n      /* harmony export */FeatureTest: () => ( /* binding */FeatureTest),\n      /* harmony export */FormatError: () => ( /* binding */FormatError),\n      /* harmony export */IDENTITY_MATRIX: () => ( /* binding */IDENTITY_MATRIX),\n      /* harmony export */ImageKind: () => ( /* binding */ImageKind),\n      /* harmony export */InvalidPDFException: () => ( /* binding */InvalidPDFException),\n      /* harmony export */LINE_FACTOR: () => ( /* binding */LINE_FACTOR),\n      /* harmony export */MAX_IMAGE_SIZE_TO_CACHE: () => ( /* binding */MAX_IMAGE_SIZE_TO_CACHE),\n      /* harmony export */MissingPDFException: () => ( /* binding */MissingPDFException),\n      /* harmony export */OPS: () => ( /* binding */OPS),\n      /* harmony export */PasswordException: () => ( /* binding */PasswordException),\n      /* harmony export */PasswordResponses: () => ( /* binding */PasswordResponses),\n      /* harmony export */PermissionFlag: () => ( /* binding */PermissionFlag),\n      /* harmony export */PromiseCapability: () => ( /* binding */PromiseCapability),\n      /* harmony export */RenderingIntentFlag: () => ( /* binding */RenderingIntentFlag),\n      /* harmony export */TextRenderingMode: () => ( /* binding */TextRenderingMode),\n      /* harmony export */UnexpectedResponseException: () => ( /* binding */UnexpectedResponseException),\n      /* harmony export */UnknownErrorException: () => ( /* binding */UnknownErrorException),\n      /* harmony export */Util: () => ( /* binding */Util),\n      /* harmony export */VerbosityLevel: () => ( /* binding */VerbosityLevel),\n      /* harmony export */assert: () => ( /* binding */assert),\n      /* harmony export */bytesToString: () => ( /* binding */bytesToString),\n      /* harmony export */createValidAbsoluteUrl: () => ( /* binding */createValidAbsoluteUrl),\n      /* harmony export */getUuid: () => ( /* binding */getUuid),\n      /* harmony export */getVerbosityLevel: () => ( /* binding */getVerbosityLevel),\n      /* harmony export */info: () => ( /* binding */info),\n      /* harmony export */isArrayBuffer: () => ( /* binding */isArrayBuffer),\n      /* harmony export */isNodeJS: () => ( /* binding */isNodeJS),\n      /* harmony export */normalizeUnicode: () => ( /* binding */normalizeUnicode),\n      /* harmony export */objectFromMap: () => ( /* binding */objectFromMap),\n      /* harmony export */setVerbosityLevel: () => ( /* binding */setVerbosityLevel),\n      /* harmony export */shadow: () => ( /* binding */shadow),\n      /* harmony export */string32: () => ( /* binding */string32),\n      /* harmony export */stringToBytes: () => ( /* binding */stringToBytes),\n      /* harmony export */unreachable: () => ( /* binding */unreachable),\n      /* harmony export */warn: () => ( /* binding */warn)\n      /* harmony export */\n    });\n    /* unused harmony exports AnnotationActionEventType, AnnotationFieldFlag, AnnotationFlag, AnnotationReplyType, BASELINE_FACTOR, DocumentActionEventType, getModificationDate, isArrayEqual, LINE_DESCENT_FACTOR, objectSize, PageActionEventType, stringToPDFString, stringToUTF8String, utf8StringToString */\n    const isNodeJS = typeof process === \"object\" && process + \"\" === \"[object process]\" && !process.versions.nw && !(process.versions.electron && process.type && process.type !== \"browser\");\n    const IDENTITY_MATRIX = [1, 0, 0, 1, 0, 0];\n    const FONT_IDENTITY_MATRIX = [0.001, 0, 0, 0.001, 0, 0];\n    const MAX_IMAGE_SIZE_TO_CACHE = 10e6;\n    const LINE_FACTOR = 1.35;\n    const LINE_DESCENT_FACTOR = 0.35;\n    const BASELINE_FACTOR = LINE_DESCENT_FACTOR / LINE_FACTOR;\n    const RenderingIntentFlag = {\n      ANY: 0x01,\n      DISPLAY: 0x02,\n      PRINT: 0x04,\n      SAVE: 0x08,\n      ANNOTATIONS_FORMS: 0x10,\n      ANNOTATIONS_STORAGE: 0x20,\n      ANNOTATIONS_DISABLE: 0x40,\n      OPLIST: 0x100\n    };\n    const AnnotationMode = {\n      DISABLE: 0,\n      ENABLE: 1,\n      ENABLE_FORMS: 2,\n      ENABLE_STORAGE: 3\n    };\n    const AnnotationEditorPrefix = \"pdfjs_internal_editor_\";\n    const AnnotationEditorType = {\n      DISABLE: -1,\n      NONE: 0,\n      FREETEXT: 3,\n      HIGHLIGHT: 9,\n      STAMP: 13,\n      INK: 15\n    };\n    const AnnotationEditorParamsType = {\n      RESIZE: 1,\n      CREATE: 2,\n      FREETEXT_SIZE: 11,\n      FREETEXT_COLOR: 12,\n      FREETEXT_OPACITY: 13,\n      INK_COLOR: 21,\n      INK_THICKNESS: 22,\n      INK_OPACITY: 23,\n      HIGHLIGHT_COLOR: 31,\n      HIGHLIGHT_DEFAULT_COLOR: 32\n    };\n    const PermissionFlag = {\n      PRINT: 0x04,\n      MODIFY_CONTENTS: 0x08,\n      COPY: 0x10,\n      MODIFY_ANNOTATIONS: 0x20,\n      FILL_INTERACTIVE_FORMS: 0x100,\n      COPY_FOR_ACCESSIBILITY: 0x200,\n      ASSEMBLE: 0x400,\n      PRINT_HIGH_QUALITY: 0x800\n    };\n    const TextRenderingMode = {\n      FILL: 0,\n      STROKE: 1,\n      FILL_STROKE: 2,\n      INVISIBLE: 3,\n      FILL_ADD_TO_PATH: 4,\n      STROKE_ADD_TO_PATH: 5,\n      FILL_STROKE_ADD_TO_PATH: 6,\n      ADD_TO_PATH: 7,\n      FILL_STROKE_MASK: 3,\n      ADD_TO_PATH_FLAG: 4\n    };\n    const ImageKind = {\n      GRAYSCALE_1BPP: 1,\n      RGB_24BPP: 2,\n      RGBA_32BPP: 3\n    };\n    const AnnotationType = {\n      TEXT: 1,\n      LINK: 2,\n      FREETEXT: 3,\n      LINE: 4,\n      SQUARE: 5,\n      CIRCLE: 6,\n      POLYGON: 7,\n      POLYLINE: 8,\n      HIGHLIGHT: 9,\n      UNDERLINE: 10,\n      SQUIGGLY: 11,\n      STRIKEOUT: 12,\n      STAMP: 13,\n      CARET: 14,\n      INK: 15,\n      POPUP: 16,\n      FILEATTACHMENT: 17,\n      SOUND: 18,\n      MOVIE: 19,\n      WIDGET: 20,\n      SCREEN: 21,\n      PRINTERMARK: 22,\n      TRAPNET: 23,\n      WATERMARK: 24,\n      THREED: 25,\n      REDACT: 26\n    };\n    const AnnotationReplyType = {\n      GROUP: \"Group\",\n      REPLY: \"R\"\n    };\n    const AnnotationFlag = {\n      INVISIBLE: 0x01,\n      HIDDEN: 0x02,\n      PRINT: 0x04,\n      NOZOOM: 0x08,\n      NOROTATE: 0x10,\n      NOVIEW: 0x20,\n      READONLY: 0x40,\n      LOCKED: 0x80,\n      TOGGLENOVIEW: 0x100,\n      LOCKEDCONTENTS: 0x200\n    };\n    const AnnotationFieldFlag = {\n      READONLY: 0x0000001,\n      REQUIRED: 0x0000002,\n      NOEXPORT: 0x0000004,\n      MULTILINE: 0x0001000,\n      PASSWORD: 0x0002000,\n      NOTOGGLETOOFF: 0x0004000,\n      RADIO: 0x0008000,\n      PUSHBUTTON: 0x0010000,\n      COMBO: 0x0020000,\n      EDIT: 0x0040000,\n      SORT: 0x0080000,\n      FILESELECT: 0x0100000,\n      MULTISELECT: 0x0200000,\n      DONOTSPELLCHECK: 0x0400000,\n      DONOTSCROLL: 0x0800000,\n      COMB: 0x1000000,\n      RICHTEXT: 0x2000000,\n      RADIOSINUNISON: 0x2000000,\n      COMMITONSELCHANGE: 0x4000000\n    };\n    const AnnotationBorderStyleType = {\n      SOLID: 1,\n      DASHED: 2,\n      BEVELED: 3,\n      INSET: 4,\n      UNDERLINE: 5\n    };\n    const AnnotationActionEventType = {\n      E: \"Mouse Enter\",\n      X: \"Mouse Exit\",\n      D: \"Mouse Down\",\n      U: \"Mouse Up\",\n      Fo: \"Focus\",\n      Bl: \"Blur\",\n      PO: \"PageOpen\",\n      PC: \"PageClose\",\n      PV: \"PageVisible\",\n      PI: \"PageInvisible\",\n      K: \"Keystroke\",\n      F: \"Format\",\n      V: \"Validate\",\n      C: \"Calculate\"\n    };\n    const DocumentActionEventType = {\n      WC: \"WillClose\",\n      WS: \"WillSave\",\n      DS: \"DidSave\",\n      WP: \"WillPrint\",\n      DP: \"DidPrint\"\n    };\n    const PageActionEventType = {\n      O: \"PageOpen\",\n      C: \"PageClose\"\n    };\n    const VerbosityLevel = {\n      ERRORS: 0,\n      WARNINGS: 1,\n      INFOS: 5\n    };\n    const CMapCompressionType = {\n      NONE: 0,\n      BINARY: 1\n    };\n    const OPS = {\n      dependency: 1,\n      setLineWidth: 2,\n      setLineCap: 3,\n      setLineJoin: 4,\n      setMiterLimit: 5,\n      setDash: 6,\n      setRenderingIntent: 7,\n      setFlatness: 8,\n      setGState: 9,\n      save: 10,\n      restore: 11,\n      transform: 12,\n      moveTo: 13,\n      lineTo: 14,\n      curveTo: 15,\n      curveTo2: 16,\n      curveTo3: 17,\n      closePath: 18,\n      rectangle: 19,\n      stroke: 20,\n      closeStroke: 21,\n      fill: 22,\n      eoFill: 23,\n      fillStroke: 24,\n      eoFillStroke: 25,\n      closeFillStroke: 26,\n      closeEOFillStroke: 27,\n      endPath: 28,\n      clip: 29,\n      eoClip: 30,\n      beginText: 31,\n      endText: 32,\n      setCharSpacing: 33,\n      setWordSpacing: 34,\n      setHScale: 35,\n      setLeading: 36,\n      setFont: 37,\n      setTextRenderingMode: 38,\n      setTextRise: 39,\n      moveText: 40,\n      setLeadingMoveText: 41,\n      setTextMatrix: 42,\n      nextLine: 43,\n      showText: 44,\n      showSpacedText: 45,\n      nextLineShowText: 46,\n      nextLineSetSpacingShowText: 47,\n      setCharWidth: 48,\n      setCharWidthAndBounds: 49,\n      setStrokeColorSpace: 50,\n      setFillColorSpace: 51,\n      setStrokeColor: 52,\n      setStrokeColorN: 53,\n      setFillColor: 54,\n      setFillColorN: 55,\n      setStrokeGray: 56,\n      setFillGray: 57,\n      setStrokeRGBColor: 58,\n      setFillRGBColor: 59,\n      setStrokeCMYKColor: 60,\n      setFillCMYKColor: 61,\n      shadingFill: 62,\n      beginInlineImage: 63,\n      beginImageData: 64,\n      endInlineImage: 65,\n      paintXObject: 66,\n      markPoint: 67,\n      markPointProps: 68,\n      beginMarkedContent: 69,\n      beginMarkedContentProps: 70,\n      endMarkedContent: 71,\n      beginCompat: 72,\n      endCompat: 73,\n      paintFormXObjectBegin: 74,\n      paintFormXObjectEnd: 75,\n      beginGroup: 76,\n      endGroup: 77,\n      beginAnnotation: 80,\n      endAnnotation: 81,\n      paintImageMaskXObject: 83,\n      paintImageMaskXObjectGroup: 84,\n      paintImageXObject: 85,\n      paintInlineImageXObject: 86,\n      paintInlineImageXObjectGroup: 87,\n      paintImageXObjectRepeat: 88,\n      paintImageMaskXObjectRepeat: 89,\n      paintSolidColorImageMask: 90,\n      constructPath: 91\n    };\n    const PasswordResponses = {\n      NEED_PASSWORD: 1,\n      INCORRECT_PASSWORD: 2\n    };\n    let verbosity = VerbosityLevel.WARNINGS;\n    function setVerbosityLevel(level) {\n      if (Number.isInteger(level)) {\n        verbosity = level;\n      }\n    }\n    function getVerbosityLevel() {\n      return verbosity;\n    }\n    function info(msg) {\n      if (verbosity >= VerbosityLevel.INFOS) {\n        console.log(\"Info: \".concat(msg));\n      }\n    }\n    function warn(msg) {\n      if (verbosity >= VerbosityLevel.WARNINGS) {\n        console.log(\"Warning: \".concat(msg));\n      }\n    }\n    function unreachable(msg) {\n      throw new Error(msg);\n    }\n    function assert(cond, msg) {\n      if (!cond) {\n        unreachable(msg);\n      }\n    }\n    function _isValidProtocol(url) {\n      switch (url === null || url === void 0 ? void 0 : url.protocol) {\n        case \"http:\":\n        case \"https:\":\n        case \"ftp:\":\n        case \"mailto:\":\n        case \"tel:\":\n          return true;\n        default:\n          return false;\n      }\n    }\n    function createValidAbsoluteUrl(url) {\n      let baseUrl = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n      if (!url) {\n        return null;\n      }\n      try {\n        if (options && typeof url === \"string\") {\n          if (options.addDefaultProtocol && url.startsWith(\"www.\")) {\n            const dots = url.match(/\\./g);\n            if ((dots === null || dots === void 0 ? void 0 : dots.length) >= 2) {\n              url = \"http://\".concat(url);\n            }\n          }\n          if (options.tryConvertEncoding) {\n            try {\n              url = stringToUTF8String(url);\n            } catch {}\n          }\n        }\n        const absoluteUrl = baseUrl ? new URL(url, baseUrl) : new URL(url);\n        if (_isValidProtocol(absoluteUrl)) {\n          return absoluteUrl;\n        }\n      } catch {}\n      return null;\n    }\n    function shadow(obj, prop, value) {\n      let nonSerializable = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n      Object.defineProperty(obj, prop, {\n        value,\n        enumerable: !nonSerializable,\n        configurable: true,\n        writable: false\n      });\n      return value;\n    }\n    const BaseException = function BaseExceptionClosure() {\n      function BaseException(message, name) {\n        if (this.constructor === BaseException) {\n          unreachable(\"Cannot initialize BaseException.\");\n        }\n        this.message = message;\n        this.name = name;\n      }\n      BaseException.prototype = new Error();\n      BaseException.constructor = BaseException;\n      return BaseException;\n    }();\n    class PasswordException extends BaseException {\n      constructor(msg, code) {\n        super(msg, \"PasswordException\");\n        this.code = code;\n      }\n    }\n    class UnknownErrorException extends BaseException {\n      constructor(msg, details) {\n        super(msg, \"UnknownErrorException\");\n        this.details = details;\n      }\n    }\n    class InvalidPDFException extends BaseException {\n      constructor(msg) {\n        super(msg, \"InvalidPDFException\");\n      }\n    }\n    class MissingPDFException extends BaseException {\n      constructor(msg) {\n        super(msg, \"MissingPDFException\");\n      }\n    }\n    class UnexpectedResponseException extends BaseException {\n      constructor(msg, status) {\n        super(msg, \"UnexpectedResponseException\");\n        this.status = status;\n      }\n    }\n    class FormatError extends BaseException {\n      constructor(msg) {\n        super(msg, \"FormatError\");\n      }\n    }\n    class AbortException extends BaseException {\n      constructor(msg) {\n        super(msg, \"AbortException\");\n      }\n    }\n    function bytesToString(bytes) {\n      if (typeof bytes !== \"object\" || (bytes === null || bytes === void 0 ? void 0 : bytes.length) === undefined) {\n        unreachable(\"Invalid argument for bytesToString\");\n      }\n      const length = bytes.length;\n      const MAX_ARGUMENT_COUNT = 8192;\n      if (length < MAX_ARGUMENT_COUNT) {\n        return String.fromCharCode.apply(null, bytes);\n      }\n      const strBuf = [];\n      for (let i = 0; i < length; i += MAX_ARGUMENT_COUNT) {\n        const chunkEnd = Math.min(i + MAX_ARGUMENT_COUNT, length);\n        const chunk = bytes.subarray(i, chunkEnd);\n        strBuf.push(String.fromCharCode.apply(null, chunk));\n      }\n      return strBuf.join(\"\");\n    }\n    function stringToBytes(str) {\n      if (typeof str !== \"string\") {\n        unreachable(\"Invalid argument for stringToBytes\");\n      }\n      const length = str.length;\n      const bytes = new Uint8Array(length);\n      for (let i = 0; i < length; ++i) {\n        bytes[i] = str.charCodeAt(i) & 0xff;\n      }\n      return bytes;\n    }\n    function string32(value) {\n      return String.fromCharCode(value >> 24 & 0xff, value >> 16 & 0xff, value >> 8 & 0xff, value & 0xff);\n    }\n    function objectSize(obj) {\n      return Object.keys(obj).length;\n    }\n    function objectFromMap(map) {\n      const obj = Object.create(null);\n      for (const [key, value] of map) {\n        obj[key] = value;\n      }\n      return obj;\n    }\n    function isLittleEndian() {\n      const buffer8 = new Uint8Array(4);\n      buffer8[0] = 1;\n      const view32 = new Uint32Array(buffer8.buffer, 0, 1);\n      return view32[0] === 1;\n    }\n    function isEvalSupported() {\n      try {\n        new Function(\"\");\n        return true;\n      } catch {\n        return false;\n      }\n    }\n    class FeatureTest {\n      static get isLittleEndian() {\n        return shadow(this, \"isLittleEndian\", isLittleEndian());\n      }\n      static get isEvalSupported() {\n        return shadow(this, \"isEvalSupported\", isEvalSupported());\n      }\n      static get isOffscreenCanvasSupported() {\n        return shadow(this, \"isOffscreenCanvasSupported\", typeof OffscreenCanvas !== \"undefined\");\n      }\n      static get platform() {\n        var _navigator2;\n        if (typeof navigator !== \"undefined\" && typeof ((_navigator2 = navigator) === null || _navigator2 === void 0 ? void 0 : _navigator2.platform) === \"string\") {\n          return shadow(this, \"platform\", {\n            isMac: navigator.platform.includes(\"Mac\")\n          });\n        }\n        return shadow(this, \"platform\", {\n          isMac: false\n        });\n      }\n      static get isCSSRoundSupported() {\n        var _globalThis$CSS, _globalThis$CSS$suppo;\n        return shadow(this, \"isCSSRoundSupported\", (_globalThis$CSS = globalThis.CSS) === null || _globalThis$CSS === void 0 || (_globalThis$CSS$suppo = _globalThis$CSS.supports) === null || _globalThis$CSS$suppo === void 0 ? void 0 : _globalThis$CSS$suppo.call(_globalThis$CSS, \"width: round(1.5px, 1px)\"));\n      }\n    }\n    const hexNumbers = [...Array(256).keys()].map(n => n.toString(16).padStart(2, \"0\"));\n    class Util {\n      static makeHexColor(r, g, b) {\n        return \"#\".concat(hexNumbers[r]).concat(hexNumbers[g]).concat(hexNumbers[b]);\n      }\n      static scaleMinMax(transform, minMax) {\n        let temp;\n        if (transform[0]) {\n          if (transform[0] < 0) {\n            temp = minMax[0];\n            minMax[0] = minMax[1];\n            minMax[1] = temp;\n          }\n          minMax[0] *= transform[0];\n          minMax[1] *= transform[0];\n          if (transform[3] < 0) {\n            temp = minMax[2];\n            minMax[2] = minMax[3];\n            minMax[3] = temp;\n          }\n          minMax[2] *= transform[3];\n          minMax[3] *= transform[3];\n        } else {\n          temp = minMax[0];\n          minMax[0] = minMax[2];\n          minMax[2] = temp;\n          temp = minMax[1];\n          minMax[1] = minMax[3];\n          minMax[3] = temp;\n          if (transform[1] < 0) {\n            temp = minMax[2];\n            minMax[2] = minMax[3];\n            minMax[3] = temp;\n          }\n          minMax[2] *= transform[1];\n          minMax[3] *= transform[1];\n          if (transform[2] < 0) {\n            temp = minMax[0];\n            minMax[0] = minMax[1];\n            minMax[1] = temp;\n          }\n          minMax[0] *= transform[2];\n          minMax[1] *= transform[2];\n        }\n        minMax[0] += transform[4];\n        minMax[1] += transform[4];\n        minMax[2] += transform[5];\n        minMax[3] += transform[5];\n      }\n      static transform(m1, m2) {\n        return [m1[0] * m2[0] + m1[2] * m2[1], m1[1] * m2[0] + m1[3] * m2[1], m1[0] * m2[2] + m1[2] * m2[3], m1[1] * m2[2] + m1[3] * m2[3], m1[0] * m2[4] + m1[2] * m2[5] + m1[4], m1[1] * m2[4] + m1[3] * m2[5] + m1[5]];\n      }\n      static applyTransform(p, m) {\n        const xt = p[0] * m[0] + p[1] * m[2] + m[4];\n        const yt = p[0] * m[1] + p[1] * m[3] + m[5];\n        return [xt, yt];\n      }\n      static applyInverseTransform(p, m) {\n        const d = m[0] * m[3] - m[1] * m[2];\n        const xt = (p[0] * m[3] - p[1] * m[2] + m[2] * m[5] - m[4] * m[3]) / d;\n        const yt = (-p[0] * m[1] + p[1] * m[0] + m[4] * m[1] - m[5] * m[0]) / d;\n        return [xt, yt];\n      }\n      static getAxialAlignedBoundingBox(r, m) {\n        const p1 = this.applyTransform(r, m);\n        const p2 = this.applyTransform(r.slice(2, 4), m);\n        const p3 = this.applyTransform([r[0], r[3]], m);\n        const p4 = this.applyTransform([r[2], r[1]], m);\n        return [Math.min(p1[0], p2[0], p3[0], p4[0]), Math.min(p1[1], p2[1], p3[1], p4[1]), Math.max(p1[0], p2[0], p3[0], p4[0]), Math.max(p1[1], p2[1], p3[1], p4[1])];\n      }\n      static inverseTransform(m) {\n        const d = m[0] * m[3] - m[1] * m[2];\n        return [m[3] / d, -m[1] / d, -m[2] / d, m[0] / d, (m[2] * m[5] - m[4] * m[3]) / d, (m[4] * m[1] - m[5] * m[0]) / d];\n      }\n      static singularValueDecompose2dScale(m) {\n        const transpose = [m[0], m[2], m[1], m[3]];\n        const a = m[0] * transpose[0] + m[1] * transpose[2];\n        const b = m[0] * transpose[1] + m[1] * transpose[3];\n        const c = m[2] * transpose[0] + m[3] * transpose[2];\n        const d = m[2] * transpose[1] + m[3] * transpose[3];\n        const first = (a + d) / 2;\n        const second = Math.sqrt((a + d) ** 2 - 4 * (a * d - c * b)) / 2;\n        const sx = first + second || 1;\n        const sy = first - second || 1;\n        return [Math.sqrt(sx), Math.sqrt(sy)];\n      }\n      static normalizeRect(rect) {\n        const r = rect.slice(0);\n        if (rect[0] > rect[2]) {\n          r[0] = rect[2];\n          r[2] = rect[0];\n        }\n        if (rect[1] > rect[3]) {\n          r[1] = rect[3];\n          r[3] = rect[1];\n        }\n        return r;\n      }\n      static intersect(rect1, rect2) {\n        const xLow = Math.max(Math.min(rect1[0], rect1[2]), Math.min(rect2[0], rect2[2]));\n        const xHigh = Math.min(Math.max(rect1[0], rect1[2]), Math.max(rect2[0], rect2[2]));\n        if (xLow > xHigh) {\n          return null;\n        }\n        const yLow = Math.max(Math.min(rect1[1], rect1[3]), Math.min(rect2[1], rect2[3]));\n        const yHigh = Math.min(Math.max(rect1[1], rect1[3]), Math.max(rect2[1], rect2[3]));\n        if (yLow > yHigh) {\n          return null;\n        }\n        return [xLow, yLow, xHigh, yHigh];\n      }\n      static bezierBoundingBox(x0, y0, x1, y1, x2, y2, x3, y3) {\n        const tvalues = [],\n          bounds = [[], []];\n        let a, b, c, t, t1, t2, b2ac, sqrtb2ac;\n        for (let i = 0; i < 2; ++i) {\n          if (i === 0) {\n            b = 6 * x0 - 12 * x1 + 6 * x2;\n            a = -3 * x0 + 9 * x1 - 9 * x2 + 3 * x3;\n            c = 3 * x1 - 3 * x0;\n          } else {\n            b = 6 * y0 - 12 * y1 + 6 * y2;\n            a = -3 * y0 + 9 * y1 - 9 * y2 + 3 * y3;\n            c = 3 * y1 - 3 * y0;\n          }\n          if (Math.abs(a) < 1e-12) {\n            if (Math.abs(b) < 1e-12) {\n              continue;\n            }\n            t = -c / b;\n            if (0 < t && t < 1) {\n              tvalues.push(t);\n            }\n            continue;\n          }\n          b2ac = b * b - 4 * c * a;\n          sqrtb2ac = Math.sqrt(b2ac);\n          if (b2ac < 0) {\n            continue;\n          }\n          t1 = (-b + sqrtb2ac) / (2 * a);\n          if (0 < t1 && t1 < 1) {\n            tvalues.push(t1);\n          }\n          t2 = (-b - sqrtb2ac) / (2 * a);\n          if (0 < t2 && t2 < 1) {\n            tvalues.push(t2);\n          }\n        }\n        let j = tvalues.length,\n          mt;\n        const jlen = j;\n        while (j--) {\n          t = tvalues[j];\n          mt = 1 - t;\n          bounds[0][j] = mt * mt * mt * x0 + 3 * mt * mt * t * x1 + 3 * mt * t * t * x2 + t * t * t * x3;\n          bounds[1][j] = mt * mt * mt * y0 + 3 * mt * mt * t * y1 + 3 * mt * t * t * y2 + t * t * t * y3;\n        }\n        bounds[0][jlen] = x0;\n        bounds[1][jlen] = y0;\n        bounds[0][jlen + 1] = x3;\n        bounds[1][jlen + 1] = y3;\n        bounds[0].length = bounds[1].length = jlen + 2;\n        return [Math.min(...bounds[0]), Math.min(...bounds[1]), Math.max(...bounds[0]), Math.max(...bounds[1])];\n      }\n    }\n    const PDFStringTranslateTable = /* unused pure expression or super */null && [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x2d8, 0x2c7, 0x2c6, 0x2d9, 0x2dd, 0x2db, 0x2da, 0x2dc, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x2022, 0x2020, 0x2021, 0x2026, 0x2014, 0x2013, 0x192, 0x2044, 0x2039, 0x203a, 0x2212, 0x2030, 0x201e, 0x201c, 0x201d, 0x2018, 0x2019, 0x201a, 0x2122, 0xfb01, 0xfb02, 0x141, 0x152, 0x160, 0x178, 0x17d, 0x131, 0x142, 0x153, 0x161, 0x17e, 0, 0x20ac];\n    function stringToPDFString(str) {\n      if (str[0] >= \"\\xEF\") {\n        let encoding;\n        if (str[0] === \"\\xFE\" && str[1] === \"\\xFF\") {\n          encoding = \"utf-16be\";\n          if (str.length % 2 === 1) {\n            str = str.slice(0, -1);\n          }\n        } else if (str[0] === \"\\xFF\" && str[1] === \"\\xFE\") {\n          encoding = \"utf-16le\";\n          if (str.length % 2 === 1) {\n            str = str.slice(0, -1);\n          }\n        } else if (str[0] === \"\\xEF\" && str[1] === \"\\xBB\" && str[2] === \"\\xBF\") {\n          encoding = \"utf-8\";\n        }\n        if (encoding) {\n          try {\n            const decoder = new TextDecoder(encoding, {\n              fatal: true\n            });\n            const buffer = stringToBytes(str);\n            const decoded = decoder.decode(buffer);\n            if (!decoded.includes(\"\\x1b\")) {\n              return decoded;\n            }\n            return decoded.replaceAll(/\\x1b[^\\x1b]*(?:\\x1b|$)/g, \"\");\n          } catch (ex) {\n            warn(\"stringToPDFString: \\\"\".concat(ex, \"\\\".\"));\n          }\n        }\n      }\n      const strBuf = [];\n      for (let i = 0, ii = str.length; i < ii; i++) {\n        const charCode = str.charCodeAt(i);\n        if (charCode === 0x1b) {\n          while (++i < ii && str.charCodeAt(i) !== 0x1b) {}\n          continue;\n        }\n        const code = PDFStringTranslateTable[charCode];\n        strBuf.push(code ? String.fromCharCode(code) : str.charAt(i));\n      }\n      return strBuf.join(\"\");\n    }\n    function stringToUTF8String(str) {\n      return decodeURIComponent(escape(str));\n    }\n    function utf8StringToString(str) {\n      return unescape(encodeURIComponent(str));\n    }\n    function isArrayBuffer(v) {\n      return typeof v === \"object\" && (v === null || v === void 0 ? void 0 : v.byteLength) !== undefined;\n    }\n    function isArrayEqual(arr1, arr2) {\n      if (arr1.length !== arr2.length) {\n        return false;\n      }\n      for (let i = 0, ii = arr1.length; i < ii; i++) {\n        if (arr1[i] !== arr2[i]) {\n          return false;\n        }\n      }\n      return true;\n    }\n    function getModificationDate() {\n      let date = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new Date();\n      const buffer = [date.getUTCFullYear().toString(), (date.getUTCMonth() + 1).toString().padStart(2, \"0\"), date.getUTCDate().toString().padStart(2, \"0\"), date.getUTCHours().toString().padStart(2, \"0\"), date.getUTCMinutes().toString().padStart(2, \"0\"), date.getUTCSeconds().toString().padStart(2, \"0\")];\n      return buffer.join(\"\");\n    }\n    var _settled = /*#__PURE__*/new WeakMap();\n    class PromiseCapability {\n      constructor() {\n        _classPrivateFieldInitSpec(this, _settled, {\n          writable: true,\n          value: false\n        });\n        this.promise = new Promise((resolve, reject) => {\n          this.resolve = data => {\n            _classPrivateFieldSet(this, _settled, true);\n            resolve(data);\n          };\n          this.reject = reason => {\n            _classPrivateFieldSet(this, _settled, true);\n            reject(reason);\n          };\n        });\n      }\n      get settled() {\n        return _classPrivateFieldGet(this, _settled);\n      }\n    }\n    let NormalizeRegex = null;\n    let NormalizationMap = null;\n    function normalizeUnicode(str) {\n      if (!NormalizeRegex) {\n        NormalizeRegex = /([\\u00a0\\u00b5\\u037e\\u0eb3\\u2000-\\u200a\\u202f\\u2126\\ufb00-\\ufb04\\ufb06\\ufb20-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40-\\ufb41\\ufb43-\\ufb44\\ufb46-\\ufba1\\ufba4-\\ufba9\\ufbae-\\ufbb1\\ufbd3-\\ufbdc\\ufbde-\\ufbe7\\ufbea-\\ufbf8\\ufbfc-\\ufbfd\\ufc00-\\ufc5d\\ufc64-\\ufcf1\\ufcf5-\\ufd3d\\ufd88\\ufdf4\\ufdfa-\\ufdfb\\ufe71\\ufe77\\ufe79\\ufe7b\\ufe7d]+)|(\\ufb05+)/gu;\n        NormalizationMap = new Map([[\"ﬅ\", \"ſt\"]]);\n      }\n      return str.replaceAll(NormalizeRegex, (_, p1, p2) => {\n        return p1 ? p1.normalize(\"NFKC\") : NormalizationMap.get(p2);\n      });\n    }\n    function getUuid() {\n      var _crypto, _crypto2;\n      if (typeof crypto !== \"undefined\" && typeof ((_crypto = crypto) === null || _crypto === void 0 ? void 0 : _crypto.randomUUID) === \"function\") {\n        return crypto.randomUUID();\n      }\n      const buf = new Uint8Array(32);\n      if (typeof crypto !== \"undefined\" && typeof ((_crypto2 = crypto) === null || _crypto2 === void 0 ? void 0 : _crypto2.getRandomValues) === \"function\") {\n        crypto.getRandomValues(buf);\n      } else {\n        for (let i = 0; i < 32; i++) {\n          buf[i] = Math.floor(Math.random() * 255);\n        }\n      }\n      return bytesToString(buf);\n    }\n    const AnnotationPrefix = \"pdfjs_internal_id_\";\n\n    /***/\n  })\n\n  /******/\n};\n/************************************************************************/\n/******/ // The module cache\n/******/\nvar __webpack_module_cache__ = {};\n/******/\n/******/ // The require function\n/******/\nfunction __webpack_require__(moduleId) {\n  /******/ // Check if module is in cache\n  /******/var cachedModule = __webpack_module_cache__[moduleId];\n  /******/\n  if (cachedModule !== undefined) {\n    /******/return cachedModule.exports;\n    /******/\n  }\n  /******/ // Create a new module (and put it into the cache)\n  /******/\n  var module = __webpack_module_cache__[moduleId] = {\n    /******/ // no module.id needed\n    /******/ // no module.loaded needed\n    /******/exports: {}\n    /******/\n  };\n  /******/\n  /******/ // Execute the module function\n  /******/\n  __webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n  /******/\n  /******/ // Return the exports of the module\n  /******/\n  return module.exports;\n  /******/\n}\n/******/\n/************************************************************************/\n/******/ /* webpack/runtime/async module */\n/******/\n(() => {\n  /******/var webpackQueues = typeof Symbol === \"function\" ? Symbol(\"webpack queues\") : \"__webpack_queues__\";\n  /******/\n  var webpackExports = typeof Symbol === \"function\" ? Symbol(\"webpack exports\") : \"__webpack_exports__\";\n  /******/\n  var webpackError = typeof Symbol === \"function\" ? Symbol(\"webpack error\") : \"__webpack_error__\";\n  /******/\n  var resolveQueue = queue => {\n    /******/if (queue && queue.d < 1) {\n      /******/queue.d = 1;\n      /******/\n      queue.forEach(fn => fn.r--);\n      /******/\n      queue.forEach(fn => fn.r-- ? fn.r++ : fn());\n      /******/\n    }\n    /******/\n  };\n  /******/\n  var wrapDeps = deps => deps.map(dep => {\n    /******/if (dep !== null && typeof dep === \"object\") {\n      /******/if (dep[webpackQueues]) return dep;\n      /******/\n      if (dep.then) {\n        /******/var queue = [];\n        /******/\n        queue.d = 0;\n        /******/\n        dep.then(r => {\n          /******/obj[webpackExports] = r;\n          /******/\n          resolveQueue(queue);\n          /******/\n        }, e => {\n          /******/obj[webpackError] = e;\n          /******/\n          resolveQueue(queue);\n          /******/\n        });\n        /******/\n        var obj = {};\n        /******/\n        obj[webpackQueues] = fn => fn(queue);\n        /******/\n        return obj;\n        /******/\n      }\n      /******/\n    }\n    /******/\n    var ret = {};\n    /******/\n    ret[webpackQueues] = x => {};\n    /******/\n    ret[webpackExports] = dep;\n    /******/\n    return ret;\n    /******/\n  });\n  /******/\n  __webpack_require__.a = (module, body, hasAwait) => {\n    /******/var queue;\n    /******/\n    hasAwait && ((queue = []).d = -1);\n    /******/\n    var depQueues = new Set();\n    /******/\n    var exports = module.exports;\n    /******/\n    var currentDeps;\n    /******/\n    var outerResolve;\n    /******/\n    var reject;\n    /******/\n    var promise = new Promise((resolve, rej) => {\n      /******/reject = rej;\n      /******/\n      outerResolve = resolve;\n      /******/\n    });\n    /******/\n    promise[webpackExports] = exports;\n    /******/\n    promise[webpackQueues] = fn => (queue && fn(queue), depQueues.forEach(fn), promise[\"catch\"](x => {}));\n    /******/\n    module.exports = promise;\n    /******/\n    body(deps => {\n      /******/currentDeps = wrapDeps(deps);\n      /******/\n      var fn;\n      /******/\n      var getResult = () => currentDeps.map(d => {\n        /******/if (d[webpackError]) throw d[webpackError];\n        /******/\n        return d[webpackExports];\n        /******/\n      });\n      /******/\n      var promise = new Promise(resolve => {\n        /******/fn = () => resolve(getResult);\n        /******/\n        fn.r = 0;\n        /******/\n        var fnQueue = q => q !== queue && !depQueues.has(q) && (depQueues.add(q), q && !q.d && (fn.r++, q.push(fn)));\n        /******/\n        currentDeps.map(dep => dep[webpackQueues](fnQueue));\n        /******/\n      });\n      /******/\n      return fn.r ? promise : getResult();\n      /******/\n    }, err => (err ? reject(promise[webpackError] = err) : outerResolve(exports), resolveQueue(queue)));\n    /******/\n    queue && queue.d < 0 && (queue.d = 0);\n    /******/\n  };\n  /******/\n})();\n/******/\n/******/ /* webpack/runtime/define property getters */\n/******/\n(() => {\n  /******/ // define getter functions for harmony exports\n  /******/__webpack_require__.d = (exports, definition) => {\n    /******/for (var key in definition) {\n      /******/if (__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n        /******/Object.defineProperty(exports, key, {\n          enumerable: true,\n          get: definition[key]\n        });\n        /******/\n      }\n      /******/\n    }\n    /******/\n  };\n  /******/\n})();\n/******/\n/******/ /* webpack/runtime/hasOwnProperty shorthand */\n/******/\n(() => {\n  /******/__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\n  /******/\n})();\n/******/\n/************************************************************************/\n/******/\n/******/ // startup\n/******/ // Load entry module and return exports\n/******/ // This entry module used 'module' so it can't be inlined\n/******/\nvar __webpack_exports__ = __webpack_require__(907);\n/******/\n__webpack_exports__ = globalThis.pdfjsLib = await (globalThis.pdfjsLibPromise = __webpack_exports__);\n/******/\nvar __webpack_exports__AbortException = __webpack_exports__.AbortException;\n/******/\nvar __webpack_exports__AnnotationEditorLayer = __webpack_exports__.AnnotationEditorLayer;\n/******/\nvar __webpack_exports__AnnotationEditorParamsType = __webpack_exports__.AnnotationEditorParamsType;\n/******/\nvar __webpack_exports__AnnotationEditorType = __webpack_exports__.AnnotationEditorType;\n/******/\nvar __webpack_exports__AnnotationEditorUIManager = __webpack_exports__.AnnotationEditorUIManager;\n/******/\nvar __webpack_exports__AnnotationLayer = __webpack_exports__.AnnotationLayer;\n/******/\nvar __webpack_exports__AnnotationMode = __webpack_exports__.AnnotationMode;\n/******/\nvar __webpack_exports__CMapCompressionType = __webpack_exports__.CMapCompressionType;\n/******/\nvar __webpack_exports__ColorPicker = __webpack_exports__.ColorPicker;\n/******/\nvar __webpack_exports__DOMSVGFactory = __webpack_exports__.DOMSVGFactory;\n/******/\nvar __webpack_exports__DrawLayer = __webpack_exports__.DrawLayer;\n/******/\nvar __webpack_exports__FeatureTest = __webpack_exports__.FeatureTest;\n/******/\nvar __webpack_exports__GlobalWorkerOptions = __webpack_exports__.GlobalWorkerOptions;\n/******/\nvar __webpack_exports__ImageKind = __webpack_exports__.ImageKind;\n/******/\nvar __webpack_exports__InvalidPDFException = __webpack_exports__.InvalidPDFException;\n/******/\nvar __webpack_exports__MissingPDFException = __webpack_exports__.MissingPDFException;\n/******/\nvar __webpack_exports__OPS = __webpack_exports__.OPS;\n/******/\nvar __webpack_exports__Outliner = __webpack_exports__.Outliner;\n/******/\nvar __webpack_exports__PDFDataRangeTransport = __webpack_exports__.PDFDataRangeTransport;\n/******/\nvar __webpack_exports__PDFDateString = __webpack_exports__.PDFDateString;\n/******/\nvar __webpack_exports__PDFWorker = __webpack_exports__.PDFWorker;\n/******/\nvar __webpack_exports__PasswordResponses = __webpack_exports__.PasswordResponses;\n/******/\nvar __webpack_exports__PermissionFlag = __webpack_exports__.PermissionFlag;\n/******/\nvar __webpack_exports__PixelsPerInch = __webpack_exports__.PixelsPerInch;\n/******/\nvar __webpack_exports__PromiseCapability = __webpack_exports__.PromiseCapability;\n/******/\nvar __webpack_exports__RenderingCancelledException = __webpack_exports__.RenderingCancelledException;\n/******/\nvar __webpack_exports__UnexpectedResponseException = __webpack_exports__.UnexpectedResponseException;\n/******/\nvar __webpack_exports__Util = __webpack_exports__.Util;\n/******/\nvar __webpack_exports__VerbosityLevel = __webpack_exports__.VerbosityLevel;\n/******/\nvar __webpack_exports__XfaLayer = __webpack_exports__.XfaLayer;\n/******/\nvar __webpack_exports__build = __webpack_exports__.build;\n/******/\nvar __webpack_exports__createValidAbsoluteUrl = __webpack_exports__.createValidAbsoluteUrl;\n/******/\nvar __webpack_exports__fetchData = __webpack_exports__.fetchData;\n/******/\nvar __webpack_exports__getDocument = __webpack_exports__.getDocument;\n/******/\nvar __webpack_exports__getFilenameFromUrl = __webpack_exports__.getFilenameFromUrl;\n/******/\nvar __webpack_exports__getPdfFilenameFromUrl = __webpack_exports__.getPdfFilenameFromUrl;\n/******/\nvar __webpack_exports__getXfaPageViewport = __webpack_exports__.getXfaPageViewport;\n/******/\nvar __webpack_exports__isDataScheme = __webpack_exports__.isDataScheme;\n/******/\nvar __webpack_exports__isPdfFile = __webpack_exports__.isPdfFile;\n/******/\nvar __webpack_exports__noContextMenu = __webpack_exports__.noContextMenu;\n/******/\nvar __webpack_exports__normalizeUnicode = __webpack_exports__.normalizeUnicode;\n/******/\nvar __webpack_exports__renderTextLayer = __webpack_exports__.renderTextLayer;\n/******/\nvar __webpack_exports__setLayerDimensions = __webpack_exports__.setLayerDimensions;\n/******/\nvar __webpack_exports__shadow = __webpack_exports__.shadow;\n/******/\nvar __webpack_exports__updateTextLayer = __webpack_exports__.updateTextLayer;\n/******/\nvar __webpack_exports__version = __webpack_exports__.version;\n/******/\nexport { __webpack_exports__AbortException as AbortException, __webpack_exports__AnnotationEditorLayer as AnnotationEditorLayer, __webpack_exports__AnnotationEditorParamsType as AnnotationEditorParamsType, __webpack_exports__AnnotationEditorType as AnnotationEditorType, __webpack_exports__AnnotationEditorUIManager as AnnotationEditorUIManager, __webpack_exports__AnnotationLayer as AnnotationLayer, __webpack_exports__AnnotationMode as AnnotationMode, __webpack_exports__CMapCompressionType as CMapCompressionType, __webpack_exports__ColorPicker as ColorPicker, __webpack_exports__DOMSVGFactory as DOMSVGFactory, __webpack_exports__DrawLayer as DrawLayer, __webpack_exports__FeatureTest as FeatureTest, __webpack_exports__GlobalWorkerOptions as GlobalWorkerOptions, __webpack_exports__ImageKind as ImageKind, __webpack_exports__InvalidPDFException as InvalidPDFException, __webpack_exports__MissingPDFException as MissingPDFException, __webpack_exports__OPS as OPS, __webpack_exports__Outliner as Outliner, __webpack_exports__PDFDataRangeTransport as PDFDataRangeTransport, __webpack_exports__PDFDateString as PDFDateString, __webpack_exports__PDFWorker as PDFWorker, __webpack_exports__PasswordResponses as PasswordResponses, __webpack_exports__PermissionFlag as PermissionFlag, __webpack_exports__PixelsPerInch as PixelsPerInch, __webpack_exports__PromiseCapability as PromiseCapability, __webpack_exports__RenderingCancelledException as RenderingCancelledException, __webpack_exports__UnexpectedResponseException as UnexpectedResponseException, __webpack_exports__Util as Util, __webpack_exports__VerbosityLevel as VerbosityLevel, __webpack_exports__XfaLayer as XfaLayer, __webpack_exports__build as build, __webpack_exports__createValidAbsoluteUrl as createValidAbsoluteUrl, __webpack_exports__fetchData as fetchData, __webpack_exports__getDocument as getDocument, __webpack_exports__getFilenameFromUrl as getFilenameFromUrl, __webpack_exports__getPdfFilenameFromUrl as getPdfFilenameFromUrl, __webpack_exports__getXfaPageViewport as getXfaPageViewport, __webpack_exports__isDataScheme as isDataScheme, __webpack_exports__isPdfFile as isPdfFile, __webpack_exports__noContextMenu as noContextMenu, __webpack_exports__normalizeUnicode as normalizeUnicode, __webpack_exports__renderTextLayer as renderTextLayer, __webpack_exports__setLayerDimensions as setLayerDimensions, __webpack_exports__shadow as shadow, __webpack_exports__updateTextLayer as updateTextLayer, __webpack_exports__version as version };\n/******/","map":{"version":3,"names":["makeColorComp","n","Math","floor","max","min","toString","padStart","scaleAndClamp","x","ColorConverters","CMYK_G","_ref","c","y","m","k","G_CMYK","_ref2","g","G_RGB","_ref3","G_rgb","_ref4","G_HTML","_ref5","G","concat","RGB_G","_ref6","r","b","RGB_rgb","color","map","RGB_HTML","join","T_HTML","T_rgb","CMYK_RGB","_ref7","CMYK_rgb","_ref8","CMYK_HTML","components","rgb","slice","RGB_CMYK","_ref9","DEFAULT_TAB_INDEX","DEFAULT_FONT_SIZE","GetElementsByNameSet","WeakSet","getRectDims","rect","width","height","AnnotationElementFactory","create","parameters","subtype","data","annotationType","util","AnnotationType","LINK","LinkAnnotationElement","TEXT","TextAnnotationElement","WIDGET","fieldType","TextWidgetAnnotationElement","radioButton","RadioButtonWidgetAnnotationElement","checkBox","CheckboxWidgetAnnotationElement","PushButtonWidgetAnnotationElement","ChoiceWidgetAnnotationElement","SignatureWidgetAnnotationElement","WidgetAnnotationElement","POPUP","PopupAnnotationElement","FREETEXT","FreeTextAnnotationElement","LINE","LineAnnotationElement","SQUARE","SquareAnnotationElement","CIRCLE","CircleAnnotationElement","POLYLINE","PolylineAnnotationElement","CARET","CaretAnnotationElement","INK","InkAnnotationElement","POLYGON","PolygonAnnotationElement","HIGHLIGHT","HighlightAnnotationElement","UNDERLINE","UnderlineAnnotationElement","SQUIGGLY","SquigglyAnnotationElement","STRIKEOUT","StrikeOutAnnotationElement","STAMP","StampAnnotationElement","FILEATTACHMENT","FileAttachmentAnnotationElement","AnnotationElement","_hasBorder","WeakMap","constructor","isRenderable","ignoreBorder","createQuadrilaterals","arguments","length","undefined","_classPrivateFieldInitSpec","writable","value","layer","linkService","downloadManager","imageResourcesPath","renderForms","svgFactory","annotationStorage","enableScripting","hasJSActions","_fieldObjects","fieldObjects","parent","container","_createContainer","_createQuadrilaterals","_hasPopupData","_ref10","titleObj","contentsObj","richText","str","hasPopupData","page","viewport","document","createElement","setAttribute","id","tabIndex","style","zIndex","popupRef","noRotate","classList","add","pageWidth","pageHeight","pageX","pageY","rawDims","rotation","hasOwnCanvas","setRotation","Util","normalizeRect","view","borderStyle","borderWidth","horizontalRadius","horizontalCornerRadius","verticalRadius","verticalCornerRadius","radius","borderRadius","AnnotationBorderStyleType","SOLID","DASHED","BEVELED","warn","INSET","borderBottomStyle","borderColor","_classPrivateFieldSet","makeHexColor","left","top","angle","elementWidth","elementHeight","_commonActions","setColor","jsName","styleName","event","detail","colorType","colorArray","target","setValue","shadow","display","hidden","visibility","noView","noPrint","print","focus","setTimeout","preventScroll","userName","title","readonly","disabled","required","_setRequired","bgColor","fillColor","fgColor","textColor","strokeColor","_dispatchEventFromSandbox","actions","jsEvent","commonActions","name","Object","keys","action","_setDefaultPropertiesFromJS","element","storedData","getRawValue","actionName","entries","eventProxy","quadPoints","rectBlX","rectBlY","rectTrX","rectTrY","trX","trY","blX","blY","svgBuffer","_classPrivateFieldGet","svg","defs","append","clipPath","_svgBuffer","rectWidth","rectHeight","push","backgroundImage","_createPopup","popup","modificationDate","parentRect","elements","div","render","unreachable","_getElementsByName","skipId","fields","fieldObj","exportValues","exportValue","domElement","querySelector","has","getElementsByName","getAttribute","show","_this$popup","maybeShow","hide","_this$popup2","forceHide","getElementsToTriggerPopup","addHighlightArea","triggers","Array","isArray","_isEditable","_editOnDoubleClick","annotationEditorType","mode","editId","addEventListener","_this$linkService$eve","eventBus","dispatch","source","_setInternalLink","_bindAttachment","_bindSetOCGState","options","_classPrivateMethodInitSpec","isTooltipOnly","link","isBound","url","addLinkAttributes","newWindow","_bindNamedAction","attachment","_classPrivateMethodGet","_bindAttachment2","call","attachmentDest","setOCGState","_bindSetOCGState2","dest","_bindLink","Action","_bindJSAction","resetForm","_bindResetFormAction","destination","href","getDestinationHash","onclick","goToDestination","_setInternalLink2","getAnchorUrl","executeNamedAction","Map","get","_this$linkService$eve2","otherClickAction","resetFormFields","refs","resetFormRefs","include","allFields","fieldIds","Set","fieldName","values","field","storage","allIds","type","defaultValue","dispatchEvent","Event","_this$linkService$eve3","ids","_this$downloadManager","openOrDownloadData","content","filename","executeSetOCGState","image","src","toLowerCase","JSON","stringify","alternativeText","showElementAndHideCanvas","_element$previousSibl","previousSibling","nodeName","_getKeyModifier","FeatureTest","platform","isMac","metaKey","ctrlKey","_setEventListener","elementData","baseName","eventName","valueGetter","includes","_this$linkService$eve4","shift","shiftKey","modifier","_this$linkService$eve5","focused","relatedTarget","_setEventListeners","names","getter","_this$data$actions","_this$data$actions2","_this$data$actions3","Blur","Focus","_setBackgroundColor","backgroundColor","_setTextStyle","TEXT_ALIGNMENT","fontColor","defaultAppearanceData","fontSize","computedFontSize","BORDER_SIZE","roundToOneDecimal","round","multiLine","abs","numberOfLines","LINE_FACTOR","lineHeight","textAlignment","textAlign","isRequired","removeAttribute","hasAppearance","fieldValue","setPropertyOnSiblings","base","key","keyInStorage","_this$data$textConten","getValue","textContent","maxLen","charLimit","fieldFormattedValues","formattedValue","comb","replaceAll","userValue","lastCommittedValue","commitKey","_fieldFormattedValues","doNotScroll","overflowY","_fieldFormattedValues2","overflowX","readOnly","maxLength","_this$data$defaultFie","defaultFieldValue","blurListener","scrollLeft","_this$data$actions6","_this$data$actions4","_event$detail$value","activeElement","selRange","setSelectionRange","_this$linkService$eve6","willCommit","selStart","selectionStart","selEnd","selectionEnd","_this$linkService$eve7","_blurListener","_this$data$actions5","_this$linkService$eve8","Keystroke","_this$linkService$eve9","inputType","match","substring","preventDefault","change","fieldWidth","combWidth","letterSpacing","verticalAlign","checked","checkbox","curChecked","buttonValue","radio","pdfButtonValue","linkElement","lastChild","selectElement","addAnEmptyEntry","combo","size","multiSelect","multiple","option","selected","optionElement","displayValue","removeEmptyEntry","noneOptionElement","prepend","remove","removeEventListener","isExport","selectedIndex","prototype","filter","selectedValues","getItems","_removeEmptyEntry","multipleSelection","index","i","findIndex","items","clear","insert","selectChild","children","before","item","indices","editable","_this$linkService$eve10","changeEx","keyDown","PopupElement","open","elementIds","AnnotationPrefix","_boundKeyDown","_boundHide","_boundShow","_boundToggle","_color","_container","_contentsObj","_dateObj","_elements","_parent","_parentRect","_pinned","_popup","_rect","_richText","_titleObj","_wasVisible","_keyDown","_toggle","_show","_hide","_ref11","_keyDown2","bind","_hide2","_show2","_toggle2","display_utils","PDFDateString","toDateObject","trigger","flatMap","e","_element$container","className","baseColor","outlineColor","CSS","supports","BACKGROUND_ENLIGHT","header","dir","date","toLocaleDateString","time","toLocaleTimeString","xfa_layer","XfaLayer","xfaHtml","html","intent","contents","_formatContents","useParentRect","intersect","normalizedRect","HORIZONTAL_SPACE_AFTER_ANNOTATION","parentWidth","popupLeft","popupTop","_ref12","p","lines","split","ii","line","createTextNode","isVisible","altKey","parseInt","textPosition","AnnotationEditorType","lineSpan","_line","lineCoordinates","_square","square","_circle","circle","_polyline","containerClassName","svgElementName","points","coordinate","vertices","polyline","_polylines","inkList","inkLists","_trigger","_download","_this$linkService$eve11","file","getFilenameFromUrl","fillAlpha","test","_download2","evt","_this$downloadManager2","_accessibilityManager","_annotationCanvasMap","_editableAnnotations","_appendElement","_setAnnotationCanvasMap","AnnotationLayer","_ref13","accessibilityManager","annotationCanvasMap","params","annotations","setLayerDimensions","popupToElements","elementParams","DOMSVGFactory","annotation_storage","AnnotationStorage","noHTML","isPopupAnnotation","set","rendered","_appendElement2","_setAnnotationCanvasMap2","update","_ref14","getEditableAnnotations","from","getEditableAnnotation","_classPrivateFieldGet2","contentElement","firstChild","moveElementInDOM","canvas","replaceWith","SerializableEmpty","freeze","hash","transfer","_modified","_storage","_setModified","onSetModified","onResetModified","onAnnotationEditor","assign","delete","resetModified","_editor_editor_js__WEBPACK_IMPORTED_MODULE_1__","AnnotationEditor","obj","modified","entry","val","_setModified2","_type","getAll","_shared_util_js__WEBPACK_IMPORTED_MODULE_0__","objectFromMap","setAll","PrintAnnotationStorage","serializable","_shared_murmurhash3_js__WEBPACK_IMPORTED_MODULE_2__","MurmurHash3_64","context","hasBitmap","serialized","serialize","bitmap","hexdigest","_serializable","clone","structuredClone","DEFAULT_RANGE_CHUNK_SIZE","RENDERING_CANCELLED_TIMEOUT","DELAYED_CLEANUP_TIMEOUT","DefaultCanvasFactory","isNodeJS","display_node_utils__WEBPACK_IMPORTED_MODULE_4__","NodeCanvasFactory","_display_utils_js__WEBPACK_IMPORTED_MODULE_2__","DOMCanvasFactory","DefaultCMapReaderFactory","NodeCMapReaderFactory","DOMCMapReaderFactory","DefaultFilterFactory","NodeFilterFactory","DOMFilterFactory","DefaultStandardFontDataFactory","NodeStandardFontDataFactory","DOMStandardFontDataFactory","getDocument","_src$password","_src$length","URL","isArrayBuffer","Error","range","task","PDFDocumentLoadingTask","docId","getUrlProp","getDataProp","httpHeaders","withCredentials","password","rangeTransport","PDFDataRangeTransport","rangeChunkSize","Number","isInteger","worker","PDFWorker","verbosity","docBaseUrl","isDataScheme","cMapUrl","cMapPacked","CMapReaderFactory","standardFontDataUrl","StandardFontDataFactory","ignoreErrors","stopAtErrors","maxImageSize","isEvalSupported","isOffscreenCanvasSupported","canvasMaxAreaInBytes","disableFontFace","fontExtraProperties","enableXfa","ownerDocument","globalThis","disableRange","disableStream","disableAutoFetch","pdfBug","NaN","useSystemFonts","useWorkerFetch","isValidFetchUrl","baseURI","canvasFactory","filterFactory","styleElement","setVerbosityLevel","transportFactory","cMapReaderFactory","baseUrl","isCompressed","standardFontDataFactory","workerParams","port","_worker_options_js__WEBPACK_IMPORTED_MODULE_6__","GlobalWorkerOptions","workerPort","fromPort","_worker","fetchDocParams","apiVersion","evaluatorOptions","transportParams","promise","then","destroyed","workerIdPromise","_fetchDocument","networkStreamPromise","Promise","resolve","networkStream","_transport_stream_js__WEBPACK_IMPORTED_MODULE_10__","PDFDataTransportStream","initialData","progressiveDone","contentDispositionFilename","createPDFNetworkStream","display_node_stream__WEBPACK_IMPORTED_MODULE_13__","PDFNodeStream","display_fetch_stream__WEBPACK_IMPORTED_MODULE_11__","PDFFetchStream","display_network__WEBPACK_IMPORTED_MODULE_12__","PDFNetworkStream","all","_ref15","workerId","messageHandler","_shared_message_handler_js__WEBPACK_IMPORTED_MODULE_7__","MessageHandler","transport","WorkerTransport","_transport","send","catch","_capability","reject","sendWithPromise","buffer","window","location","Buffer","Uint8Array","byteLength","stringToBytes","isNaN","_PDFDocumentLoadingTa","_PDFDocumentLoadingTa2","PromiseCapability","_classStaticPrivateFieldSpecSet","_docId","_classStaticPrivateFieldSpecGet","onPassword","onProgress","destroy","_this$_worker","_this$_transport","_pendingDestroy","ex","_this$_worker2","_rangeListeners","_progressListeners","_progressiveReadListeners","_progressiveDoneListeners","_readyCapability","addRangeListener","listener","addProgressListener","addProgressiveReadListener","addProgressiveDoneListener","onDataRange","begin","chunk","onDataProgress","loaded","total","onDataProgressiveRead","onDataProgressiveDone","transportReady","requestDataRange","end","abort","PDFDocumentProxy","pdfInfo","_pdfInfo","numPages","fingerprints","isPureXfa","_htmlForXfa","allXfaHtml","getPage","pageNumber","getPageIndex","ref","getDestinations","getDestination","getPageLabels","getPageLayout","getPageMode","getViewerPreferences","getOpenAction","getAttachments","getJSActions","getDocJSActions","getOutline","getOptionalContentConfig","getPermissions","getMetadata","getMarkInfo","getData","saveDocument","getDownloadInfo","downloadInfoCapability","cleanup","keepLoadedFonts","startCleanup","loadingTask","loadingParams","getFieldObjects","getCalculationOrderIds","_delayedCleanupTimeout","_pendingCleanup","_tryCleanup","_abortDelayedCleanup","PDFPageProxy","pageIndex","pageInfo","_pageIndex","_pageInfo","_stats","StatTimer","_pdfBug","commonObjs","objs","PDFObjects","_maybeCleanupAfterRender","_intentStates","rotate","userUnit","getViewport","scale","offsetX","offsetY","dontFlip","PageViewport","viewBox","getAnnotations","intentArgs","getRenderingIntent","renderingIntent","getPageJSActions","getXfa","_this$_transport$_htm","_ref16","_this$_stats","_intentState","canvasContext","annotationMode","AnnotationMode","ENABLE","transform","background","optionalContentConfigPromise","pageColors","printAnnotationStorage","_abortDelayedCleanup2","intentState","cacheKey","streamReaderCancelTimeout","clearTimeout","intentPrint","RenderingIntentFlag","PRINT","displayReadyCapability","_this$_stats2","operatorList","fnArray","argsArray","lastChunk","separateAnnots","_pumpOperatorList","complete","error","_this$_stats3","_this$_stats4","renderTasks","internalRenderTask","_tryCleanup2","capability","_abortOperatorList","reason","timeEnd","InternalRenderTask","callback","useRequestAnimationFrame","renderTask","_ref17","_this$_stats5","transparency","optionalContentConfig","initializeGraphics","operatorListChanged","getOperatorList","opListReadCapability","opListTask","_intentState2","_this$_stats6","streamTextContent","includeMarkedContent","disableNormalization","TEXT_CONTENT_CHUNK_SIZE","sendWithStream","highWaterMark","getTextContent","xfa","_xfa_text_js__WEBPACK_IMPORTED_MODULE_14__","XfaText","readableStream","pump","reader","read","_ref18","done","styles","getReader","getStructTree","_destroy","waitOn","force","completed","cancel","resetStats","success","_startRenderPage","_this$_stats7","_intentState$displayR","_renderPageChunk","operatorListChunk","_ref19","annotationStorageSerializable","streamReader","_ref20","_ref21","RenderingCancelledException","delay","extraDelay","AbortException","message","curCacheKey","curIntentState","stats","delayed","_listeners","_deferred","LoopbackPort","postMessage","terminate","PDFWorkerUtil","isWorkerDisabled","fakeWorkerId","_worker_options_js__W","workerSrc","isSameOrigin","otherUrl","origin","other","createCDNWrapper","wrapper","createObjectURL","Blob","getVerbosityLevel","_port","_webWorker","_messageHandler","_classStaticPrivateFi","_workerPorts","_initializeFromPort","_initialize","on","_mainThreadWorkerMessageHandler","Worker","terminateEarly","onWorkerError","_setupFakeWorker","sendTest","testObj","info","_setupFakeWorkerGlobal","WorkerMessageHandler","workerHandler","setup","_classStaticPrivateFi2","_classStaticPrivateFi3","cachedPort","loader","_get_mainThreadWorkerMessageHandler","_globalThis$pdfjsWork","pdfjsWorker","_methodPromises","_pageCache","_pagePromises","_passwordCapability","_cacheSimpleMethod","factory","fontLoader","_font_loader_js__WEBPACK_IMPORTED_MODULE_3__","FontLoader","_params","destroyCapability","_networkStream","_fullReader","_lastProgress","setupMessageHandler","_annotation_storage_js__WEBPACK_IMPORTED_MODULE_1__","isOpList","DISPLAY","ANY","DISABLE","ANNOTATIONS_DISABLE","ENABLE_FORMS","ANNOTATIONS_FORMS","ENABLE_STORAGE","ANNOTATIONS_STORAGE","OPLIST","_classPrivateFieldGet3","hasOwnProperty","terminated","_this$_networkStream","cancelAllRequests","sink","assert","getFullReader","onPull","_ref22","close","ArrayBuffer","enqueue","onCancel","ready","readyReason","headersCapability","fullReader","headersReady","isStreamingSupported","isRangeSupported","_loadingTask$onProgre","_loadingTask$onProgre2","contentLength","rangeReader","getRangeReader","_ref23","_ref24","_numPages","htmlForXfa","PasswordException","code","InvalidPDFException","MissingPDFException","UnexpectedResponseException","status","UnknownErrorException","details","exception","updatePassword","_loadingTask$onProgre3","_ref25","_globalThis$FontInspe","exportedData","exportedError","inspectFont","FontInspector","enabled","font","fontAdded","FontFaceObject","finally","imageRef","pageProxy","dataLen","_ref26","imageData","_imageData$bitmap","MAX_IMAGE_SIZE_TO_CACHE","_loadingTask$onProgre4","fetch","_this$_fullReader$fil","_this$_fullReader","cachedPromise","num","gen","_cacheSimpleMethod2","results","_optional_content_config_js__WEBPACK_IMPORTED_MODULE_9__","OptionalContentConfig","_this$_fullReader$fil2","_this$_fullReader2","_this$_fullReader$con","_this$_fullReader3","metadata","_metadata_js__WEBPACK_IMPORTED_MODULE_8__","Metadata","cleanupSuccessful","_objs","_ensureObj","_Symbol$iterator","Symbol","iterator","objId","_ensureObj2","settled","_obj$capability$settl","_data$bitmap","_classPrivateFieldGet4","_internalRenderTask","RenderTask","onContinue","form","_ref27","operatorListIdx","running","graphicsReadyCallback","graphicsReady","_useRequestAnimationFrame","cancelled","_cancelBound","_continueBound","_continue","_scheduleNextBound","_scheduleNext","_nextBound","_next","_canvas","_ref28","_globalThis$StepperMa","_this$graphicsReadyCa","_canvasInUse","StepperManager","stepper","init","nextBreakPoint","getNextBreakPoint","gfx","_canvas_js__WEBPACK_IMPORTED_MODULE_5__","CanvasGraphics","beginDrawing","_this$gfx","endDrawing","_this$stepper","updateOperatorList","requestAnimationFrame","executeOperatorList","version","build","BaseFilterFactory","addFilter","maps","addHCMFilter","addHighlightHCMFilter","newFgColor","newBgColor","keepHCM","BaseCanvasFactory","_createCanvas","getContext","reset","canvasAndContext","BaseCMapReaderFactory","_ref29","_ref30","compressionType","CMapCompressionType","BINARY","NONE","_fetchData","BaseStandardFontDataFactory","_ref31","_ref32","BaseSVGFactory","skipDimensions","_createSVG","PathType","FILL","STROKE","SHADING","applyBoundingBox","ctx","bbox","region","Path2D","clip","BaseShadingPattern","getPattern","RadialAxialShadingPattern","IR","_bbox","_colorStops","_p0","_p1","_r0","_r1","matrix","_createGradient","grad","createLinearGradient","createRadialGradient","colorStop","addColorStop","owner","inverse","pathType","pattern","ownerBBox","current","getClippedPathBoundingBox","getCurrentTransform","ceil","tmpCanvas","cachedCanvases","getCanvas","tmpCtx","clearRect","beginPath","translate","baseTransform","fillStyle","fill","createPattern","domMatrix","DOMMatrix","setTransform","drawTriangle","p1","p2","p3","c1","c2","c3","coords","colors","bytes","rowSize","tmp","x1","scaleX","y1","scaleY","x2","y2","x3","y3","c1r","c1g","c1b","c2r","c2g","c2b","c3r","c3g","c3b","minY","maxY","xa","car","cag","cab","xb","cbr","cbg","cbb","x1_","x2_","j","drawFigure","figure","ps","cs","verticesPerRow","rows","cols","q","MeshShadingPattern","_coords","_colors","_figures","_bounds","_background","_createMeshCanvas","combinedScale","EXPECTED_SCALE","MAX_PATTERN_SIZE","boundsWidth","boundsHeight","paddedWidth","paddedHeight","createImageData","putImageData","singularValueDecompose2dScale","matrixScale","temporaryPatternCanvas","DummyShadingPattern","getShadingPattern","PaintType","COLORED","UNCOLORED","TilingPattern","canvasGraphicsFactory","xstep","ystep","paintType","tilingType","createPatternCanvas","x0","y0","curMatrixScale","dimx","getSizeAndScale","dimy","graphics","createCanvasGraphics","groupLevel","setFillAndStrokeStyleToContext","adjustedX0","adjustedY0","adjustedX1","adjustedY1","save","clipBbox","step","realOutputSize","maxSize","bboxWidth","bboxHeight","updateRectMinMax","endPath","strokeStyle","cssColor","FormatError","_defineProperty","convertToRGBA","kind","ImageKind","GRAYSCALE_1BPP","convertBlackAndWhiteToRGBA","RGB_24BPP","convertRGBToRGBA","_ref33","srcPos","nonBlackColor","inverseDecode","black","isLittleEndian","zeroMapping","oneMapping","widthInSource","widthRemainder","srcLength","Uint32Array","destPos","elem","_ref34","len32","src32","s1","s2","s3","jj","grayToRGBA","MIN_FONT_SIZE","MAX_FONT_SIZE","MAX_GROUP_SIZE","EXECUTION_TIME","EXECUTION_STEPS","MAX_SIZE_TO_COMPILE","FULL_CHUNK_HEIGHT","mirrorContextOperations","destCtx","_removeMirroring","__originalSave","__originalRestore","restore","__originalRotate","__originalScale","__originalTranslate","__originalTransform","__originalSetTransform","__originalResetTransform","resetTransform","__originalClip","__originalMoveTo","moveTo","__originalLineTo","lineTo","__originalBezierCurveTo","bezierCurveTo","__originalRect","__originalClosePath","closePath","__originalBeginPath","ctxSave","ctxRestore","ctxTranslate","ctxScale","ctxTransform","a","d","f","ctxSetTransform","ctxResetTransform","ctxRotate","rule","cp1x","cp1y","cp2x","cp2y","CachedCanvases","cache","canvasEntry","drawImageAtIntegerCoords","srcImg","srcX","srcY","srcW","srcH","destX","destY","destW","destH","tx","ty","tlX","rTlX","tlY","rTlY","brX","rWidth","brY","rHeight","sign","drawImage","hypot","compileType3Glyph","imgData","POINT_TO_PROCESS_LIMIT","POINT_TYPES","width1","j0","lineSize","pos","mask","count","sum","steps","Int32Array","path","p0","pp","drawOutline","CanvasExtraState","alphaIsShape","fontSizeScale","textMatrix","IDENTITY_MATRIX","textMatrixScale","fontMatrix","FONT_IDENTITY_MATRIX","leading","lineX","lineY","charSpacing","wordSpacing","textHScale","textRenderingMode","TextRenderingMode","textRise","patternFill","strokeAlpha","lineWidth","activeSMask","transferMaps","startNewPathAndClipBox","clipBox","setCurrentPoint","updatePathMinMax","applyTransform","minX","maxX","p4","updateScalingPathMinMax","minMax","scaleMinMax","updateCurvePathMinMax","box","bezierBoundingBox","getPathBoundingBox","xStrokePad","yStrokePad","updateClipFromPath","isEmptyClip","Infinity","putBinaryImageData","ImageData","partialChunkHeight","fullChunks","totalChunks","chunkImgData","thisChunkHeight","elemsInThisChunk","dest32","dest32DataLength","fullSrcDiff","white","srcDiff","kEnd","kEndUnrolled","srcByte","RGBA_32BPP","subarray","putBinaryImageMask","copyCtxState","sourceCtx","properties","property","setLineDash","getLineDash","lineDashOffset","resetCtxToDefault","fillRule","globalAlpha","lineCap","lineJoin","miterLimit","globalCompositeOperation","composeSMaskBackdrop","r0","g0","b0","alpha","alpha_","composeSMaskAlpha","maskData","layerData","transferMap","composeSMaskLuminosity","genericComposeSMask","maskCtx","layerCtx","backdrop","layerOffsetX","layerOffsetY","maskOffsetX","maskOffsetY","hasBackdrop","composeFn","PIXELS_TO_PROCESS","chunkSize","row","chunkHeight","getImageData","composeSMask","smask","layerBox","layerWidth","layerHeight","getImageSmoothingEnabled","interpolate","fround","actualScale","devicePixelRatio","PixelsPerInch","PDF_TO_CSS_UNITS","LINE_CAP_STYLES","LINE_JOIN_STYLES","NORMAL_CLIP","EO_CLIP","_restoreInitialState","_drawFilter","canvasCtx","_ref35","markedContentStack","stateStack","pendingClip","pendingEOFill","res","xobjs","groupStack","processingType3","baseTransformStack","smaskStack","smaskCounter","tempSMask","suspendedCtx","contentVisible","cachedPatterns","viewportScale","outputScaleX","outputScaleY","_cachedScaleForStroking","_cachedGetSinglePixelWidth","_cachedBitmapsMap","getObject","fallback","startsWith","_ref36","savedFillStyle","fillRect","transparentCanvas","compositeCtx","executionStartIdx","continueCallback","argsArrayLen","chunkOperations","endTime","Date","now","fnId","breakIt","OPS","dependency","apply","depObjId","objsPool","_restoreInitialState2","HTMLCanvasElement","_drawFilter2","_scaleImage","img","inverseTransform","widthScale","heightScale","paintWidth","paintHeight","tmpCanvasId","newWidth","newHeight","_createMaskCanvas","isPatternFill","currentTransform","scaled","maskCanvas","mainKey","cachedImage","maskToCanvas","getAxialAlignedBoundingBox","drawnWidth","drawnHeight","fillCanvas","fillCtx","getCurrentTransformInverse","imageSmoothingEnabled","setLineWidth","setLineCap","setLineJoin","setMiterLimit","limit","setDash","dashArray","dashPhase","setRenderingIntent","setFlatness","flatness","setGState","states","setFont","checkSMaskState","inSMaskMode","beginSMaskMode","endSMaskMode","cacheId","scratchCanvas","compose","dirtyBox","old","pop","constructPath","ops","args","startX","startY","isScalingMatrix","minMaxForBezier","rectangle","xw","yh","curveTo","curveTo2","curveTo3","stroke","consumePath","rescaleAndStroke","closeStroke","needRestore","eoFill","fillStroke","eoFillStroke","closeFillStroke","closeEOFillStroke","eoClip","beginText","endText","paths","pendingTextPaths","addToPath","setCharSpacing","spacing","setWordSpacing","setHScale","setLeading","fontRefName","_fontObj$systemFontIn","fontObj","fontDirection","isType3Font","loadedName","typeface","systemFontInfo","css","fallbackName","bold","italic","browserFontSize","setTextRenderingMode","setTextRise","rise","moveText","setLeadingMoveText","setTextMatrix","nextLine","paintChar","character","patternTransform","fillStrokeMode","FILL_STROKE_MASK","isAddToPathSet","ADD_TO_PATH_FLAG","missingFile","getPathGenerator","FILL_STROKE","fillText","strokeText","isFontSubpixelAAEnabled","showText","glyphs","showType3Text","glyphsLength","vertical","spacingDir","defaultVMetrics","widthAdvanceScale","simpleFillText","getSinglePixelWidth","isInvalidPDFjsFont","chars","glyph","unicode","restoreNeeded","isSpace","fontChar","accent","scaledX","scaledY","vmetric","vx","vy","remeasure","measuredWidth","measureText","characterScaleX","isInFont","scaledAccentX","offset","scaledAccentY","charWidth","isTextInvisible","INVISIBLE","spacingLength","charProcOperatorList","operatorListId","transformed","setCharWidth","xWidth","yWidth","setCharWidthAndBounds","llx","lly","urx","ury","getColorN_Pattern","_getPattern","setStrokeColorN","setFillColorN","setStrokeRGBColor","setFillRGBColor","shadingFill","inv","beginInlineImage","beginImageData","paintFormXObjectBegin","paintFormXObjectEnd","beginGroup","group","currentCtx","isolated","knockout","bounds","canvasBounds","groupCtx","startTransformInverse","endGroup","currentMtx","beginAnnotation","canvasWidth","canvasHeight","annotationCanvas","savedCtx","endAnnotation","paintImageMaskXObject","compiled","paintImageMaskXObjectRepeat","skewX","skewY","positions","trans","paintImageMaskXObjectGroup","images","paintImageXObject","paintInlineImageXObject","paintImageXObjectRepeat","w","h","paintInlineImageXObjectGroup","applyTransferMapsToCanvas","applyTransferMapsToBitmap","imgToPaint","HTMLElement","paintSolidColorImageMask","markPoint","tag","markPointProps","beginMarkedContent","visible","beginMarkedContentProps","isContentVisible","endMarkedContent","beginCompat","endCompat","isEmpty","absDet","normX","normY","getScaleForStroking","getTransform","scaledLineWidth","scaledXLineWidth","scaledYLineWidth","baseArea","saveRestore","dashes","hcmFilterId","foreground","savedFilter","op","SVG_NS","_PixelsPerInch","PDF","_cache","_defs","_docId2","_document","_hcmFilter","_hcmKey","_hcmUrl","_hcmHighlightFilter","_hcmHighlightKey","_hcmHighlightUrl","_id","_cache2","_defs2","_addGrayConversion","_createFilter","_appendFeFunc","_addTransferMapConversion","_getRGB","_base_factory_js__WEBPACK_IMPORTED_MODULE_0__","_get_defs","_get_cache","_this$id","_this$id2","tableR","tableG","tableB","mapR","mapG","mapB","bufferR","bufferG","bufferB","_createFilter2","_addTransferMapConversion2","_classPrivateFieldGet5","fgRGB","_getRGB2","_shared_util_js__WEBPACK_IMPORTED_MODULE_1__","bgRGB","table","_addGrayConversion2","getSteps","start","arr","_classPrivateFieldGet6","fgGray","bgGray","newFgRGB","newBgRGB","fg","bg","newStart","newStep","prev","parentNode","contain","position","createElementNS","body","feColorMatrix","_appendFeFunc2","feComponentTransfer","func","feFunc","rTable","gTable","bTable","getRGB","getComputedStyle","getPropertyValue","fetchData","response","ok","statusText","arrayBuffer","blob","json","text","request","XMLHttpRequest","responseType","onreadystatechange","readyState","DONE","responseText","cMapData","_ref37","centerX","centerY","rotateA","rotateB","rotateC","rotateD","offsetCanvasX","offsetCanvasY","convertToViewportPoint","convertToViewportRectangle","topLeft","bottomRight","convertToPdfPoint","applyInverseTransform","BaseException","msg","trim","isPdfFile","onlyStripPath","lastIndexOf","getPdfFilenameFromUrl","defaultFilename","reURI","reFilename","splitURI","exec","suggestedFilename","decodeURIComponent","started","times","outBuf","longest","padEnd","protocol","noContextMenu","deprecated","console","log","pdfDateStringRegex","input","RegExp","matches","year","month","day","hour","minute","second","universalTimeRelation","offsetHour","offsetMinute","UTC","getXfaPageViewport","xfaPage","_ref38","attributes","colorRGB","getColorValues","span","computedColor","invertSelf","mustFlip","mustRotate","useRound","isCSSRoundSupported","widthStr","heightStr","DrawLayer","_ref39","_parent2","_id2","_mapping","setParent","root","_svgFactory","_display_utils_js__WEBPACK_IMPORTED_MODULE_0__","highlight","_ref40","opacity","_this$id3","_this$id4","outlines","_createSVG2","pathId","_classStaticPrivateMethodGet","_extractPathFromHighlightOutlines","clipPathId","clipPathUse","use","highlightOutline","_ref41","_this$id5","_this$id6","use1","use2","cloneNode","updateBox","_setBox","changeColor","changeOpacity","addClass","removeClass","_ref42","polygons","polygon","prevX","prevY","FreeTextEditor","editor_editor","_keyboardManager","proto","arrowChecker","self","small","tools","AnnotationEditorUIManager","TRANSLATE_SMALL","big","TRANSLATE_BIG","KeyboardManager","commitOrRemove","bubbles","_translateEmpty","checker","_cheatInitialRect","_hasElementChanged","_setContent","_setEditorDimensions","_extractText","_updateColor","_updateFontSize","_boundEditorDivBlur","editorDivBlur","_boundEditorDivFocus","editorDivFocus","_boundEditorDivInput","editorDivInput","_boundEditorDivKeydown","editorDivKeydown","_color2","_content","_editorDivId","_fontSize","_initialData","_defaultColor","_defaultLineColor","_defaultFontSize","initialize","l10n","strings","documentElement","_internalPadding","parseFloat","updateDefaultParams","AnnotationEditorParamsType","FREETEXT_SIZE","FREETEXT_COLOR","updateParams","_updateFontSize2","_updateColor2","defaultPropertiesToUpdate","propertiesToUpdate","_uiManager","translateSelectedEditors","getInitialTranslation","parentScale","rebuild","isAttachedToDOM","enableEditMode","isInEditMode","setEditingState","updateToolbar","overlayDiv","editorDiv","contentEditable","_isDraggable","disableEditMode","isEditing","focusin","_focusEventsAllowed","onceAdded","_this$_initialOptions","_cheatInitialRect2","_initialOptions","isCentered","center","innerText","commit","savedText","newText","_extractText2","trimEnd","setText","_setContent2","_setEditorDimensions2","addCommands","cmd","undo","mustExec","shouldGetKeyboardEvents","enterInEditMode","dblclick","keydown","toggle","disableEditing","enableEditing","baseX","baseY","_l10nPromise","_this$editorDiv","bindEvents","parentHeight","parentDimensions","annotationElementId","pageTranslationToScreen","pageDimensions","pageTranslation","posX","posY","setAt","contentDiv","deserialize","uiManager","annotation_layer","deleted","editor","isForCopying","padding","getRect","_colorManager","convert","structTreeParentId","_structTreeParentId","_hasElementChanged2","setFontsize","savedFontsize","overwriteIfSameType","keepUndo","savedColor","divs","getElementsByTagName","replace","getBoundingClientRect","currentLayer","savedDisplay","parentRotation","fixAndSetPosition","replaceChildren","some","HighlightEditor","_this$_uiManager$high","_serializeOutlines","_serializeBoxes","_addToDrawLayer","_cleanDrawLayer","_updateColor3","_createOutlines","_boxes","_clipPathId","_colorPicker","_focusOutlines","_highlightDiv","_highlightOutlines","_id3","_lastPoint","_opacity","_outlineId","highlightColors","next","_defaultOpacity","boxes","_createOutlines2","_addToDrawLayer2","HIGHLIGHT_DEFAULT_COLOR","toolbarPosition","HIGHLIGHT_COLOR","_updateColor4","addEditToolbar","toolbar","color_picker","ColorPicker","addColorPicker","addUndoableEditor","_cleanDrawLayer2","mustBeSelected","_this$div","contains","select","drawLayer","_rotateBbox","highlightDiv","setDims","pointerover","pointerleave","_this$parent","_this$parent2","unselect","_this$parent3","_serializeBoxes2","_serializeOutlines2","canCreateNewEmptyEditor","outliner","editor_outliner","Outliner","getOutlines","outlinerForOutline","direction","lastPoint","_classPrivateFieldGet19","updateColor","_classPrivateFieldGet20","_classPrivateFieldDestructureSet","_ref46","sx","sy","outline","InkEditor","_fitToContent","_getPadding","_getBbox","_serializePaths","_updateTransform","_setScaleFactor","_setCanvasDims","_createObserver","_endDrawing","_redraw","_generateBezierPoints","_makeBezierCurve","_drawPoints","_stopDrawing","_endPath","_draw","_startDrawing","_setStroke","_getInitialBBox","_updateOpacity","_updateColor5","_updateThickness","_baseHeight","_baseWidth","_boundCanvasPointermove","canvasPointermove","_boundCanvasPointerleave","canvasPointerleave","_boundCanvasPointerup","canvasPointerup","_boundCanvasPointerdown","canvasPointerdown","_canvasContextMenuTimeoutId","_currentPath2D","_disableEditing","_hasSomethingToDraw","_isCanvasInitialized","_observer","_realWidth","_realHeight","_requestFrameCallback","thickness","bezierPath2D","allRawPaths","currentPath","scaleFactor","translationX","translationY","_willKeepAspectRatio","INK_THICKNESS","_defaultThickness","INK_COLOR","INK_OPACITY","_updateThickness2","_updateColor6","_updateOpacity2","_this$opacity","_createCanvas2","_createObserver2","_setCanvasDims2","_fitToContent2","disconnect","removeShouldRescale","addShouldRescale","onScaleChanging","setDimensions","setInForeground","addInkEditorIfNeeded","moveInDOM","button","_startDrawing2","_draw2","_endDrawing2","isResizable","_getInitialBBox2","setAspectRatio","_redraw2","roundedWidth","roundedHeight","_setScaleFactor2","fixDims","bezier","_fromPDFCoordinates","p10","p11","p20","p21","p30","p31","path2D","_buildPath2D","_getBbox2","MIN_SIZE","_serializePaths2","_InkEditor","savedThickness","savedOpacity","_setStroke2","opacityToHex","_this$opacity2","_drawPoints2","lastX","lastY","at","_makeBezierCurve2","_endPath2","_stopDrawing2","_generateBezierPoints2","xy","lastPoints","xMin","xMax","yMin","yMax","bezierPoints","control1","control2","_updateTransform2","addToAnnotationStorage","setInBackground","ResizeObserver","contentRect","observe","_getPadding2","scaleFactorW","scaleFactorH","first","_toPDFCoordinates","s","shiftX","shiftY","p40","p41","firstTime","prevTranslationX","prevTranslationY","unscaledPadding","StampEditor","_createObserver3","_serializeBitmap","_drawBitmap","_scaleBitmap","_setDimensions","_createCanvas3","_getBitmap","_getBitmapDone","_getBitmapFetched","_bitmap","_bitmapId","_bitmapPromise","_bitmapUrl","_bitmapFile","_bitmapFileName","_observer2","_resizeTimeoutId","_isSvg","_hasBeenAddedInUndoStack","bitmapUrl","bitmapFile","supportedTypes","types","supportedTypesStr","isHandlingMimeForPasting","mime","paste","pasteEditor","getAsFile","_classPrivateFieldGet7","_classPrivateFieldGet8","imageManager","deleteId","_getBitmap2","_createCanvas4","getImageForAltText","bitmapId","isSvg","accessibilityData","isValidId","altTextData","_serializeBitmap2","decorative","altText","alt","stamps","area","prevData","_StampEditor","_getBitmapFetched2","fromId","_getBitmapDone2","enableWaiting","getFromId","getFromUrl","getFromFile","accept","files","click","MAX_RATIO","factor","_drawBitmap2","_createObserver4","_eventBus","editorType","addAltTextButton","_setDimensions2","_this$_initialOptions2","TIME_TO_WAIT","_scaleBitmap2","bitmapWidth","bitmapHeight","prevWidth","prevHeight","offscreen","OffscreenCanvas","transferToImageBitmap","hcmFilter","toUrl","getSvgUrl","toDataURL","AnnotationEditorLayer","_ref43","annotationLayer","textLayer","_cleanup","_getCenterPoint","_createAndAddNewEditor","_createNewEditor","_currentEditorType","_get_currentEditorType","_accessibilityManager2","_allowClick","_annotationLayer","_boundPointerup","pointerup","_boundPointerUpAfterSelection","pointerUpAfterSelection","_boundPointerdown","pointerdown","_editorFocusTimeoutId","_boundSelectionStart","_editors","_hadPointerDown","_isCleaningUp","_isDisabling","_textLayer","editorTypes","_editorTypes","_initialized","registerEditorTypes","addLayer","updateMode","getMode","_cleanup2","disableTextSelection","togglePointerEvents","disableClick","enableTextSelection","enableClick","_editorType","isCommitting","_createAndAddNewEditor2","enable","annotationElementIds","editables","isDeletedAnnotationElement","addOrRebuild","disable","hiddenAnnotationIds","_this$getEditableAnno","_classPrivateFieldGet9","setActiveEditor","currentActive","getActive","_classPrivateFieldGet10","_classPrivateFieldGet11","attach","removeDeletedAnnotationElement","detach","_classPrivateFieldGet12","removePointerInTextLayer","addDeletedAnnotationElement","removeEditor","changeParent","_editor$parent","deleteAnnotationElement","addEditor","moveEditorInDOM","_classPrivateFieldGet13","once","needsToBeRebuilt","getNextId","getId","_classPrivateFieldGet14","_getCenterPoint2","_createNewEditor2","_classStaticPrivateFi4","_data$annotationType","addNewEditor","setSelected","toggleSelected","isSelected","_event","_classPrivateFieldGet15","_classPrivateFieldGet16","selection","getSelection","rangeCount","getRangeAt","collapsed","commonAncestorContainer","layerX","layerY","bboxes","getClientRects","rotator","empty","unselectAll","findNewParent","findParent","_classPrivateFieldGet17","_classPrivateFieldGet18","removeLayer","_ref44","getEditors","_ref45","oldRotation","innerWidth","innerHeight","_tools_js__WEBPACK_IMPORTED_MODULE_1__","_hideDropdownFromKeyboard","_colorSelectFromKeyboard","_moveToNext","_moveToPrevious","_moveToBeginning","_moveToEnd","_ref47","_classPrivateFieldGet21","_openDropdown","_keyDown3","_colorSelect","_getDropdownRoot","_boundKeyDown2","_keyDown4","_button","_buttonSwatch","_dropdown","_dropdownWasFromKeyboard","_isMainColorPicker","_uiManager2","renderButton","_openDropdown2","swatch","renderMainDropdown","dropdown","_getDropdownRoot2","_colorSelect2","_event$target$nextSib","_classPrivateFieldGet22","nextSibling","_event$target$previou","_classPrivateFieldGet23","_classPrivateFieldGet24","hideDropdown","_classPrivateFieldGet25","focusVisible","child","_classPrivateFieldGet26","_classPrivateFieldGet27","paramType","role","stopPropagation","AltText","_setState","_altText","_altTextDecorative","_altTextButton","_altTextTooltip","_altTextTooltipTimeout","_altTextWasFromKeyBoard","_editor","l10nPromise","onClick","editAltText","capture","_setState2","finish","_ref48","_classPrivateFieldGet28","_AltText","_classPrivateFieldGet38","tooltip","DELAY_TO_SHOW_TOOLTIP","_classPrivateFieldGet39","EditorToolbar","_divider","_get_divider","_addDeleteButton","_addListenersToElement","_focusOut","_focusIn","_toolbar","_colorPicker2","_editor2","_buttons","editToolbar","_pointerDown","buttons","insetInlineEnd","_addDeleteButton2","_classPrivateFieldGet29","_addListenersToElement2","colorPicker","_classPrivateFieldGet30","_focusIn2","_focusOut2","divider","_resizerKeyboardManager","resize","_resizeWithKeyboard","_stopResizingWithKeyboard","_stopResizing","_setResizerTabIndex","_resizerFocus","_resizerBlur","_resizerKeydown","_setUpDragSession","_selectOnPointerEvent","_resizerPointermove","_addResizeToUndoStack","_resizerPointerdown","_createResizers","_getRotationMatrix","_getBaseTranslation","_translate","_allResizerDivs","_altText2","_keepAspectRatio","_resizersDiv","_savedDimensions","_boundFocusin","_boundFocusout","focusout","_editToolbar","_focusedResizerName","_hasBeenClicked","_isEditing","_isInEditMode","_isResizerEnabledForKeyboard","_moveInDOMTimeout","_zIndex","pageRotation","viewParameters","getPrototypeOf","getHexCode","fakeEditor","FakeEditor","_borderLineWidth","_value","_this$div2","isEnterHandled","_stopResizing2","_this$parent4","closest","isMultipleSelection","screenToPageTranslation","_translate2","translateInPage","scrollIntoView","block","drag","bx","by","_getBaseTranslation2","toFixed","_rotatePoint","realScale","scaledWidth","scaledHeight","widthPercent","endsWith","heightPercent","altTextFinish","_classPrivateFieldGet31","removeEditToolbar","_classPrivateFieldGet32","getClientDimensions","_classPrivateFieldGet33","maxWidth","maxHeight","_setUpDragSession2","_selectOnPointerEvent2","_this$parent5","_setParentAndPosition","getRectInCurrentCoords","_this$div3","_this$div4","_angle","makeResizable","_createResizers2","savedX","savedY","savedWidth","savedHeight","boundResizerKeydown","_resizerKeydown2","boundResizerBlur","_resizerBlur2","_resizerFocus2","firstPosition","nextFirstPosition","_setResizerTabIndex2","stopImmediatePropagation","_resizerPointermove2","movementX","movementY","_this$div5","_classPrivateFieldGet35","_this$div6","_classPrivateFieldGet34","_classPrivateFieldGet36","_this$div7","_this$div8","_classPrivateFieldGet37","aspectRatio","_AnnotationEditor","_ref49","_getRotationMatrix2","classes","_resizerPointerdown2","_classPrivateFieldGet40","boundResizerPointermove","savedDraggable","pointerMoveOptions","passive","savedParentCursor","cursor","savedCursor","pointerUpCallback","_classPrivateFieldGet41","_addResizeToUndoStack2","newX","newY","minWidth","minHeight","rotationMatrix","transf","invRotationMatrix","invTransf","getPoint","getOpposite","isDiagonal","isHorizontal","point","oppositePoint","transfOppositePoint","oppositeX","oppositeY","ratioX","ratioY","deltaX","deltaY","oldDiag","setUpDragSession","pointerMoveCallback","dragSelectedEditors","endDragSession","_event$relatedTarget","ColorManager","innerMargin","isLTR","_breakEdge","_remove","_insert","_binarySearch","_getOutlines","_box","_verticalEdges","_intervals","NUMBER_OF_DIGITS","EPSILON","right","shiftedMinX","shiftedMinY","lastEdge","edge","sort","outlineVerticalEdges","_breakEdge2","_insert2","_remove2","_getOutlines2","edges","allEdges","edge1","edge2","lastPointX","lastPointY","_binarySearch2","array","middle","_ref50","splice","_ref51","y4","_id4","IdManager","_this$id7","_this$id8","AnnotationEditorPrefix","_baseId","_id5","_cache3","_get","ImageManager","getUuid","_isSVGFittingCanvas","Image","decode","lastModified","_get2","refCounter","svgUrl","_ImageManager","rawData","_data","_this$id9","_this$id10","_display_utils_js__WEBPACK_IMPORTED_MODULE_1__","mustRemoveAspectRatioPromise","fileReader","FileReader","imageElement","imagePromise","onload","result","onerror","readAsDataURL","createImageBitmap","_commands","_locked","_maxSize","_position","CommandManager","_ref52","redo","hasSomethingToUndo","hasSomethingToRedo","_serialize","callbacks","allKeys","isMacKey","_serialize2","matchMedia","RGB","every","_colorsMapping","_activeEditor","_allEditors","_allLayers","_altTextManager","_annotationStorage","_commandManager","_currentPageIndex","_deletedAnnotationsElementIds","_draggingEditors","_editorTypes2","_editorsToRescale","_filterFactory","_focusMainContainerTimeoutId","_highlightColors","_idManager","_isEnabled","_isWaiting","_lastActiveElement","_mainHighlightColorPicker","_mode","_selectedEditors","_pageColors","_boundBlur","_boundFocus","_boundCopy","_boundCut","_boundPaste","_boundKeydown","_boundOnEditingAction","_boundOnPageChanging","_boundOnScaleChanging","_boundOnRotationChanging","_previousStates","_translation","_translationTimeoutId","_container2","_viewer","_addFocusManager","_removeFocusManager","_addKeyboardManager","_removeKeyboardManager","_addCopyPasteListeners","_removeCopyPasteListeners","_dispatchUpdateStates","_dispatchUpdateUI","_enableAll","_disableAll","_addEditorToLayer","_isEmpty","_selectEditors","tagName","hasSomethingToControl","textInputChecker","_self","_ref53","el","HTMLInputElement","selectAll","addNewEditorFromKeyboard","_ref54","HTMLButtonElement","viewer","altTextManager","pdfDocument","blur","copy","cut","onEditingAction","onPageChanging","onRotationChanging","hasSelectedEditor","_on","_classPrivateFieldGet42","_removeKeyboardManager2","_removeFocusManager2","_off","pair","setMainHighlightColorPicker","_classPrivateFieldGet43","_ref55","focusMainContainer","disableUserSelect","_ref56","_ref57","pagesRotation","hasSelection","lastEditor","lastActiveElement","addEditListeners","_addKeyboardManager2","_addCopyPasteListeners2","removeEditListeners","_removeCopyPasteListeners2","_classPrivateFieldGet44","editors","clipboardData","setData","parse","newEditors","deserializedEditor","_addEditorToLayer2","_selectEditors2","isEditorHandlingKeyboard","_addFocusManager2","_dispatchUpdateStates2","_isEmpty2","_dispatchUpdateUI2","getLayer","currentPageIndex","isFromKeyboard","_disableAll2","_enableAll2","_classPrivateFieldGet45","CREATE","mustWait","getEditor","_classPrivateFieldGet46","ed","firstSelectedEditor","_classPrivateFieldGet47","noCommit","totalX","totalY","savedPageIndex","newPageIndex","mustBeAddedInUndoStack","move","_this$getActive","isActive","hasChanged","_ref58","createFetchOptions","headers","abortController","method","signal","credentials","redirect","createHeaders","Headers","getArrayBuffer","isHttp","_fullRequestReader","_rangeRequestReaders","_progressiveDataLength","_this$_fullRequestRea","_this$_fullRequestRea2","_loaded","PDFFetchStreamReader","PDFFetchStreamRangeReader","_this$_fullRequestRea3","stream","_stream","_reader","_filename","_withCredentials","_contentLength","_headersCapability","_disableRange","_rangeChunkSize","_abortController","AbortController","_isStreamingSupported","_isRangeSupported","_headers","_network_utils_js__WEBPACK_IMPORTED_MODULE_1__","validateResponseStatus","createResponseStatusError","getResponseHeader","allowRangeRequests","suggestedLength","validateRangeRequestCapabilities","extractFilenameFromHeader","_this$onProgress","_this$_reader","_readCapability","_this$onProgress2","_this$_reader2","_ref59","_systemFonts","nativeFontFaces","loadingRequests","loadTestFontId","addNativeFontFace","nativeFontFace","fonts","removeNativeFontFace","insertRule","styleSheet","sheet","cssRules","loadSystemFont","_ref60","_inspectFont","isFontLoadingAPISupported","fontFace","FontFace","load","baseFontName","attached","createNativeFontFace","family","createFontFaceRule","isSyncFontLoadingSupported","_queueLoadingCallback","_prepareFontLoadEvent","_this$_document","hasFonts","_navigator","supported","navigator","userAgent","completeRequest","otherRequest","_loadTestFont","testFont","atob","int32","charCodeAt","spliceString","chunk1","chunk2","called","isFontReady","COMMENT_OFFSET","CFF_CHECKSUM_OFFSET","XXXX_VALUE","checksum","string32","btoa","fontFamily","translatedData","_ref61","compiledGlyphs","_this$_inspectFont","cssFontInfo","weight","fontWeight","italicAngle","_this$_inspectFont2","bytesToString","mimetype","cmds","jsBuf","Function","_ref62","parsedData","_metadataMap","_data2","getRaw","_classPrivateFieldGet48","OK_RESPONSE","PARTIAL_CONTENT_RESPONSE","xhr","NetworkManager","currXhrId","pendingRequests","requestRange","listeners","prop","requestFull","xhrId","pendingRequest","setRequestHeader","expectedStatus","onError","onStateChange","onprogress","onHeadersReceived","onDone","_pendingRequest$onPro","_pendingRequest$onErr","xhrStatus","ok_response_on_range_request","_pendingRequest$onErr2","rangeHeader","_pendingRequest$onErr3","getRequestXhr","isPendingRequest","abortRequest","_source","_manager","_onRangeRequestReaderClosed","indexOf","PDFNetworkStreamFullRequestReader","PDFNetworkStreamRangeRequestReader","onClosed","_this$_fullRequestRea4","manager","_onHeadersReceived","_onDone","_onError","_onProgress","_url","_fullRequestId","_headersReceivedCapability","_cachedChunks","_requests","_done","_storedError","fullRequestXhrId","fullRequestXhr","requestCapability","_this$onProgress3","lengthComputable","_requestId","_queuedChunk","_close","_this$onClosed","_this$onProgress4","getFilenameFromContentDispositionHeader","contentDisposition","needsEncodingFixup","toParamRegExp","rfc2616unquote","unescape","rfc5987decode","rfc2047decode","fixupEncoding","rfc2231getparam","attributePattern","flags","textdecode","encoding","decoder","TextDecoder","fatal","contentDispositionStr","iter","quot","part","parts","quotindex","extvalue","encodingend","langvalue","charset","hex","String","fromCharCode","_ref63","returnValues","contentEncoding","fs","http","https","fileUriRegex","parseUrl","sourceUrl","parsedUrl","host","isFsUrl","_this$_fullRequestRea5","_this$_fullRequestRea6","PDFNodeStreamFsFullReader","PDFNodeStreamFullReader","PDFNodeStreamFsRangeReader","PDFNodeStreamRangeReader","_this$_fullRequestRea7","BaseFullReader","_readableStream","_this$onProgress5","_error","_setReadableStream","BaseRangeReader","_this$onProgress6","createRequestOptions","auth","hostname","handleResponse","statusCode","_request","_httpHeaders","Range","lstat","stat","createReadStream","path2d_polyfill","readFile","createCanvas","INTERNAL","_visible","OptionalContentGroup","_setVisible","internal","_cachedGetHash","_groups","_initialHash","_order","_evaluateVisibilityExpression","creator","order","groups","baseState","off","getHash","expression","_evaluateVisibilityExpression2","policy","setVisibility","hasInitialVisibility","getOrder","getGroups","getGroup","_shared_murmurhash3_js__WEBPACK_IMPORTED_MODULE_1__","operator","state","MAX_TEXT_DIVS_TO_RENDER","DEFAULT_FONT_ASCENT","ascentCache","getCtx","getAscent","cachedAscent","metrics","ascent","fontBoundingBoxAscent","descent","fontBoundingBoxDescent","ratio","pixels","appendText","geom","textDiv","textDivProperties","hasText","hasEOL","_textDivs","_transform","atan2","fontName","PI","_fontInspectorEnabled","fontSubstitution","fontHeight","fontAscent","_isOffscreenCanvasSupported","sin","cos","scaleFactorStr","divStyle","_rootContainer","_pageWidth","_pageHeight","dataset","fontSubstitutionLoadedName","shouldScaleText","absScaleX","absScaleY","_textDivProperties","_isReadableStream","_layoutText","layout","prevFontSize","prevFontFamily","_canceled","textDivs","textDivsLength","TextLayerRenderTask","_ref64","_globalThis$FontInspe2","textContentSource","textContentItemsStr","_textContentSource","ReadableStream","_textContentItemsStr","_layoutTextParams","_processItems","styleCache","br","_render","_ref65","renderTextLayer","updateTextLayer","_ref66","mustRescale","_ref67","pdfDataRangeTransport","_queuedChunks","_progressiveDone","_contentDispositionFilename","_pdfDataRangeTransport","_rangeReaders","_onReceiveData","_onProgressiveDone","_ref68","_enqueue","found","_begin","_this$_fullRequestRea8","_this$_fullRequestRea9","_this$_rangeReaders$","_this$_rangeReaders$$","_this$_fullRequestRea10","_this$_fullRequestRea11","_this$_fullRequestRea12","_removeRangeReader","queuedChunks","PDFDataTransportStreamReader","PDFDataTransportStreamRangeReader","_this$_fullRequestRea13","_headersReady","_end","requestsCapability","setupStorage","xfaOn","xfaOff","setAttributes","_ref69","isHTMLAnchorElement","HTMLAnchorElement","dataId","rootHtml","isNotForRichText","rootDiv","node","_xfa_text_js__WEBPACK_IMPORTED_MODULE_0__","shouldBuildText","stack","_child$attributes","_child$children","childHtml","xmlns","querySelectorAll","output","walk","_node$attributes","pdfjsVersion","pdfjsBuild","CallbackKind","UNKNOWN","DATA","ERROR","StreamKind","CANCEL","CANCEL_COMPLETE","CLOSE","ENQUEUE","PULL","PULL_COMPLETE","START_COMPLETE","wrapReason","_util_js__WEBPACK_IMPORTED_MODULE_0__","_createStreamSink","_processStreamMessage","_deleteStreamController","sourceName","targetName","comObj","callbackId","streamId","streamSinks","streamControllers","callbackCapabilities","actionHandler","_onComObjOnMessage","_processStreamMessage2","cbSourceName","cbTargetName","_createStreamSink2","handler","ah","transfers","queueingStrategy","controller","startCapability","startCall","pullCall","cancelCall","isClosed","desiredSize","pull","pullCapability","cancelCapability","streamSink","isCancelled","lastDesiredSize","sinkCapability","streamController","_streamSink$onPull","_deleteStreamController2","_streamSink$onCancel","_streamController$sta","_streamController$pul","_streamController$can","allSettled","SEED","MASK_HIGH","MASK_LOW","seed","h1","h2","blockCounts","tailLength","dataUint32","k1","k2","C1","C2","C1_LOW","C2_LOW","process","versions","nw","electron","LINE_DESCENT_FACTOR","BASELINE_FACTOR","SAVE","RESIZE","FREETEXT_OPACITY","PermissionFlag","MODIFY_CONTENTS","COPY","MODIFY_ANNOTATIONS","FILL_INTERACTIVE_FORMS","COPY_FOR_ACCESSIBILITY","ASSEMBLE","PRINT_HIGH_QUALITY","FILL_ADD_TO_PATH","STROKE_ADD_TO_PATH","FILL_STROKE_ADD_TO_PATH","ADD_TO_PATH","SOUND","MOVIE","SCREEN","PRINTERMARK","TRAPNET","WATERMARK","THREED","REDACT","AnnotationReplyType","GROUP","REPLY","AnnotationFlag","HIDDEN","NOZOOM","NOROTATE","NOVIEW","READONLY","LOCKED","TOGGLENOVIEW","LOCKEDCONTENTS","AnnotationFieldFlag","REQUIRED","NOEXPORT","MULTILINE","PASSWORD","NOTOGGLETOOFF","RADIO","PUSHBUTTON","COMBO","EDIT","SORT","FILESELECT","MULTISELECT","DONOTSPELLCHECK","DONOTSCROLL","COMB","RICHTEXT","RADIOSINUNISON","COMMITONSELCHANGE","AnnotationActionEventType","E","X","D","U","Fo","Bl","PO","PC","PV","K","F","V","C","DocumentActionEventType","WC","WS","DS","WP","DP","PageActionEventType","O","VerbosityLevel","ERRORS","WARNINGS","INFOS","showSpacedText","nextLineShowText","nextLineSetSpacingShowText","setStrokeColorSpace","setFillColorSpace","setStrokeColor","setFillColor","setStrokeGray","setFillGray","setStrokeCMYKColor","setFillCMYKColor","endInlineImage","paintXObject","PasswordResponses","NEED_PASSWORD","INCORRECT_PASSWORD","level","cond","_isValidProtocol","createValidAbsoluteUrl","addDefaultProtocol","dots","tryConvertEncoding","stringToUTF8String","absoluteUrl","nonSerializable","defineProperty","enumerable","configurable","BaseExceptionClosure","MAX_ARGUMENT_COUNT","strBuf","chunkEnd","objectSize","buffer8","view32","_navigator2","_globalThis$CSS","_globalThis$CSS$suppo","hexNumbers","temp","m1","m2","xt","yt","transpose","sqrt","rect1","rect2","xLow","xHigh","yLow","yHigh","tvalues","t","t1","t2","b2ac","sqrtb2ac","mt","jlen","PDFStringTranslateTable","stringToPDFString","decoded","charCode","charAt","escape","utf8StringToString","encodeURIComponent","v","isArrayEqual","arr1","arr2","getModificationDate","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","_settled","NormalizeRegex","NormalizationMap","normalizeUnicode","_","normalize","_crypto","_crypto2","crypto","randomUUID","buf","getRandomValues","random","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","webpackQueues","webpackExports","webpackError","resolveQueue","queue","forEach","fn","wrapDeps","deps","dep","ret","hasAwait","depQueues","currentDeps","outerResolve","rej","getResult","fnQueue","err","definition","o","__webpack_exports__"],"sources":["webpack://pdf.js/src/shared/scripting_utils.js","webpack://pdf.js/src/display/annotation_layer.js","webpack://pdf.js/src/display/annotation_storage.js","webpack://pdf.js/src/display/api.js","webpack://pdf.js/src/display/base_factory.js","webpack://pdf.js/src/display/pattern_helper.js","webpack://pdf.js/src/shared/image_utils.js","webpack://pdf.js/src/display/canvas.js","webpack://pdf.js/src/display/display_utils.js","webpack://pdf.js/src/display/draw_layer.js","webpack://pdf.js/src/display/editor/freetext.js","webpack://pdf.js/src/display/editor/highlight.js","webpack://pdf.js/src/display/editor/ink.js","webpack://pdf.js/src/display/editor/stamp.js","webpack://pdf.js/src/display/editor/annotation_editor_layer.js","webpack://pdf.js/src/display/editor/color_picker.js","webpack://pdf.js/src/display/editor/alt_text.js","webpack://pdf.js/src/display/editor/toolbar.js","webpack://pdf.js/src/display/editor/editor.js","webpack://pdf.js/src/display/editor/outliner.js","webpack://pdf.js/src/display/editor/tools.js","webpack://pdf.js/src/display/fetch_stream.js","webpack://pdf.js/src/display/font_loader.js","webpack://pdf.js/src/display/metadata.js","webpack://pdf.js/src/display/network.js","webpack://pdf.js/src/display/content_disposition.js","webpack://pdf.js/src/display/network_utils.js","webpack://pdf.js/src/display/node_stream.js","webpack://pdf.js/src/display/node_utils.js","webpack://pdf.js/src/display/optional_content_config.js","webpack://pdf.js/src/display/text_layer.js","webpack://pdf.js/src/display/transport_stream.js","webpack://pdf.js/src/display/worker_options.js","webpack://pdf.js/src/display/xfa_layer.js","webpack://pdf.js/src/display/xfa_text.js","webpack://pdf.js/src/pdf.js","webpack://pdf.js/src/shared/message_handler.js","webpack://pdf.js/src/shared/murmurhash3.js","webpack://pdf.js/src/shared/util.js","webpack://pdf.js/webpack/bootstrap","webpack://pdf.js/webpack/runtime/async module","webpack://pdf.js/webpack/runtime/define property getters","webpack://pdf.js/webpack/runtime/hasOwnProperty shorthand","webpack://pdf.js/webpack/before-startup","webpack://pdf.js/webpack/startup","webpack://pdf.js/webpack/after-startup"],"sourcesContent":["/* Copyright 2020 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * PLEASE NOTE: This file is currently imported in both the `../display/` and\n *              `../scripting_api/` folders, hence be EXTREMELY careful about\n *              introducing any dependencies here since that can lead to an\n *              unexpected/unnecessary size increase of the *built* files.\n */\n\nfunction makeColorComp(n) {\n  return Math.floor(Math.max(0, Math.min(1, n)) * 255)\n    .toString(16)\n    .padStart(2, \"0\");\n}\n\nfunction scaleAndClamp(x) {\n  return Math.max(0, Math.min(255, 255 * x));\n}\n\n// PDF specifications section 10.3\nclass ColorConverters {\n  static CMYK_G([c, y, m, k]) {\n    return [\"G\", 1 - Math.min(1, 0.3 * c + 0.59 * m + 0.11 * y + k)];\n  }\n\n  static G_CMYK([g]) {\n    return [\"CMYK\", 0, 0, 0, 1 - g];\n  }\n\n  static G_RGB([g]) {\n    return [\"RGB\", g, g, g];\n  }\n\n  static G_rgb([g]) {\n    g = scaleAndClamp(g);\n    return [g, g, g];\n  }\n\n  static G_HTML([g]) {\n    const G = makeColorComp(g);\n    return `#${G}${G}${G}`;\n  }\n\n  static RGB_G([r, g, b]) {\n    return [\"G\", 0.3 * r + 0.59 * g + 0.11 * b];\n  }\n\n  static RGB_rgb(color) {\n    return color.map(scaleAndClamp);\n  }\n\n  static RGB_HTML(color) {\n    return `#${color.map(makeColorComp).join(\"\")}`;\n  }\n\n  static T_HTML() {\n    return \"#00000000\";\n  }\n\n  static T_rgb() {\n    return [null];\n  }\n\n  static CMYK_RGB([c, y, m, k]) {\n    return [\n      \"RGB\",\n      1 - Math.min(1, c + k),\n      1 - Math.min(1, m + k),\n      1 - Math.min(1, y + k),\n    ];\n  }\n\n  static CMYK_rgb([c, y, m, k]) {\n    return [\n      scaleAndClamp(1 - Math.min(1, c + k)),\n      scaleAndClamp(1 - Math.min(1, m + k)),\n      scaleAndClamp(1 - Math.min(1, y + k)),\n    ];\n  }\n\n  static CMYK_HTML(components) {\n    const rgb = this.CMYK_RGB(components).slice(1);\n    return this.RGB_HTML(rgb);\n  }\n\n  static RGB_CMYK([r, g, b]) {\n    const c = 1 - r;\n    const m = 1 - g;\n    const y = 1 - b;\n    const k = Math.min(c, m, y);\n    return [\"CMYK\", c, m, y, k];\n  }\n}\n\nexport { ColorConverters };\n","/* Copyright 2014 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @typedef {import(\"./api\").PDFPageProxy} PDFPageProxy */\n/** @typedef {import(\"./display_utils\").PageViewport} PageViewport */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"../../web/text_accessibility.js\").TextAccessibilityManager} TextAccessibilityManager */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"../../web/interfaces\").IDownloadManager} IDownloadManager */\n/** @typedef {import(\"../../web/interfaces\").IPDFLinkService} IPDFLinkService */\n\nimport {\n  AnnotationBorderStyleType,\n  AnnotationEditorType,\n  AnnotationPrefix,\n  AnnotationType,\n  FeatureTest,\n  LINE_FACTOR,\n  shadow,\n  unreachable,\n  Util,\n  warn,\n} from \"../shared/util.js\";\nimport {\n  DOMSVGFactory,\n  getFilenameFromUrl,\n  PDFDateString,\n  setLayerDimensions,\n} from \"./display_utils.js\";\nimport { AnnotationStorage } from \"./annotation_storage.js\";\nimport { ColorConverters } from \"../shared/scripting_utils.js\";\nimport { XfaLayer } from \"./xfa_layer.js\";\n\nconst DEFAULT_TAB_INDEX = 1000;\nconst DEFAULT_FONT_SIZE = 9;\nconst GetElementsByNameSet = new WeakSet();\n\nfunction getRectDims(rect) {\n  return {\n    width: rect[2] - rect[0],\n    height: rect[3] - rect[1],\n  };\n}\n\n/**\n * @typedef {Object} AnnotationElementParameters\n * @property {Object} data\n * @property {HTMLDivElement} layer\n * @property {IPDFLinkService} linkService\n * @property {IDownloadManager} [downloadManager]\n * @property {AnnotationStorage} [annotationStorage]\n * @property {string} [imageResourcesPath] - Path for image resources, mainly\n *   for annotation icons. Include trailing slash.\n * @property {boolean} renderForms\n * @property {Object} svgFactory\n * @property {boolean} [enableScripting]\n * @property {boolean} [hasJSActions]\n * @property {Object} [fieldObjects]\n */\n\nclass AnnotationElementFactory {\n  /**\n   * @param {AnnotationElementParameters} parameters\n   * @returns {AnnotationElement}\n   */\n  static create(parameters) {\n    const subtype = parameters.data.annotationType;\n\n    switch (subtype) {\n      case AnnotationType.LINK:\n        return new LinkAnnotationElement(parameters);\n\n      case AnnotationType.TEXT:\n        return new TextAnnotationElement(parameters);\n\n      case AnnotationType.WIDGET:\n        const fieldType = parameters.data.fieldType;\n\n        switch (fieldType) {\n          case \"Tx\":\n            return new TextWidgetAnnotationElement(parameters);\n          case \"Btn\":\n            if (parameters.data.radioButton) {\n              return new RadioButtonWidgetAnnotationElement(parameters);\n            } else if (parameters.data.checkBox) {\n              return new CheckboxWidgetAnnotationElement(parameters);\n            }\n            return new PushButtonWidgetAnnotationElement(parameters);\n          case \"Ch\":\n            return new ChoiceWidgetAnnotationElement(parameters);\n          case \"Sig\":\n            return new SignatureWidgetAnnotationElement(parameters);\n        }\n        return new WidgetAnnotationElement(parameters);\n\n      case AnnotationType.POPUP:\n        return new PopupAnnotationElement(parameters);\n\n      case AnnotationType.FREETEXT:\n        return new FreeTextAnnotationElement(parameters);\n\n      case AnnotationType.LINE:\n        return new LineAnnotationElement(parameters);\n\n      case AnnotationType.SQUARE:\n        return new SquareAnnotationElement(parameters);\n\n      case AnnotationType.CIRCLE:\n        return new CircleAnnotationElement(parameters);\n\n      case AnnotationType.POLYLINE:\n        return new PolylineAnnotationElement(parameters);\n\n      case AnnotationType.CARET:\n        return new CaretAnnotationElement(parameters);\n\n      case AnnotationType.INK:\n        return new InkAnnotationElement(parameters);\n\n      case AnnotationType.POLYGON:\n        return new PolygonAnnotationElement(parameters);\n\n      case AnnotationType.HIGHLIGHT:\n        return new HighlightAnnotationElement(parameters);\n\n      case AnnotationType.UNDERLINE:\n        return new UnderlineAnnotationElement(parameters);\n\n      case AnnotationType.SQUIGGLY:\n        return new SquigglyAnnotationElement(parameters);\n\n      case AnnotationType.STRIKEOUT:\n        return new StrikeOutAnnotationElement(parameters);\n\n      case AnnotationType.STAMP:\n        return new StampAnnotationElement(parameters);\n\n      case AnnotationType.FILEATTACHMENT:\n        return new FileAttachmentAnnotationElement(parameters);\n\n      default:\n        return new AnnotationElement(parameters);\n    }\n  }\n}\n\nclass AnnotationElement {\n  #hasBorder = false;\n\n  constructor(\n    parameters,\n    {\n      isRenderable = false,\n      ignoreBorder = false,\n      createQuadrilaterals = false,\n    } = {}\n  ) {\n    this.isRenderable = isRenderable;\n    this.data = parameters.data;\n    this.layer = parameters.layer;\n    this.linkService = parameters.linkService;\n    this.downloadManager = parameters.downloadManager;\n    this.imageResourcesPath = parameters.imageResourcesPath;\n    this.renderForms = parameters.renderForms;\n    this.svgFactory = parameters.svgFactory;\n    this.annotationStorage = parameters.annotationStorage;\n    this.enableScripting = parameters.enableScripting;\n    this.hasJSActions = parameters.hasJSActions;\n    this._fieldObjects = parameters.fieldObjects;\n    this.parent = parameters.parent;\n\n    if (isRenderable) {\n      this.container = this._createContainer(ignoreBorder);\n    }\n    if (createQuadrilaterals) {\n      this._createQuadrilaterals();\n    }\n  }\n\n  static _hasPopupData({ titleObj, contentsObj, richText }) {\n    return !!(titleObj?.str || contentsObj?.str || richText?.str);\n  }\n\n  get hasPopupData() {\n    return AnnotationElement._hasPopupData(this.data);\n  }\n\n  /**\n   * Create an empty container for the annotation's HTML element.\n   *\n   * @private\n   * @param {boolean} ignoreBorder\n   * @memberof AnnotationElement\n   * @returns {HTMLElement} A section element.\n   */\n  _createContainer(ignoreBorder) {\n    const {\n      data,\n      parent: { page, viewport },\n    } = this;\n\n    const container = document.createElement(\"section\");\n    container.setAttribute(\"data-annotation-id\", data.id);\n    if (!(this instanceof WidgetAnnotationElement)) {\n      container.tabIndex = DEFAULT_TAB_INDEX;\n    }\n\n    // The accessibility manager will move the annotation in the DOM in\n    // order to match the visual ordering.\n    // But if an annotation is above an other one, then we must draw it\n    // after the other one whatever the order is in the DOM, hence the\n    // use of the z-index.\n    container.style.zIndex = this.parent.zIndex++;\n\n    if (this.data.popupRef) {\n      container.setAttribute(\"aria-haspopup\", \"dialog\");\n    }\n\n    if (data.noRotate) {\n      container.classList.add(\"norotate\");\n    }\n\n    const { pageWidth, pageHeight, pageX, pageY } = viewport.rawDims;\n\n    if (!data.rect || this instanceof PopupAnnotationElement) {\n      const { rotation } = data;\n      if (!data.hasOwnCanvas && rotation !== 0) {\n        this.setRotation(rotation, container);\n      }\n      return container;\n    }\n\n    const { width, height } = getRectDims(data.rect);\n\n    // Do *not* modify `data.rect`, since that will corrupt the annotation\n    // position on subsequent calls to `_createContainer` (see issue 6804).\n    const rect = Util.normalizeRect([\n      data.rect[0],\n      page.view[3] - data.rect[1] + page.view[1],\n      data.rect[2],\n      page.view[3] - data.rect[3] + page.view[1],\n    ]);\n\n    if (!ignoreBorder && data.borderStyle.width > 0) {\n      container.style.borderWidth = `${data.borderStyle.width}px`;\n\n      const horizontalRadius = data.borderStyle.horizontalCornerRadius;\n      const verticalRadius = data.borderStyle.verticalCornerRadius;\n      if (horizontalRadius > 0 || verticalRadius > 0) {\n        const radius = `calc(${horizontalRadius}px * var(--scale-factor)) / calc(${verticalRadius}px * var(--scale-factor))`;\n        container.style.borderRadius = radius;\n      } else if (this instanceof RadioButtonWidgetAnnotationElement) {\n        const radius = `calc(${width}px * var(--scale-factor)) / calc(${height}px * var(--scale-factor))`;\n        container.style.borderRadius = radius;\n      }\n\n      switch (data.borderStyle.style) {\n        case AnnotationBorderStyleType.SOLID:\n          container.style.borderStyle = \"solid\";\n          break;\n\n        case AnnotationBorderStyleType.DASHED:\n          container.style.borderStyle = \"dashed\";\n          break;\n\n        case AnnotationBorderStyleType.BEVELED:\n          warn(\"Unimplemented border style: beveled\");\n          break;\n\n        case AnnotationBorderStyleType.INSET:\n          warn(\"Unimplemented border style: inset\");\n          break;\n\n        case AnnotationBorderStyleType.UNDERLINE:\n          container.style.borderBottomStyle = \"solid\";\n          break;\n\n        default:\n          break;\n      }\n\n      const borderColor = data.borderColor || null;\n      if (borderColor) {\n        this.#hasBorder = true;\n        container.style.borderColor = Util.makeHexColor(\n          borderColor[0] | 0,\n          borderColor[1] | 0,\n          borderColor[2] | 0\n        );\n      } else {\n        // Transparent (invisible) border, so do not draw it at all.\n        container.style.borderWidth = 0;\n      }\n    }\n\n    container.style.left = `${(100 * (rect[0] - pageX)) / pageWidth}%`;\n    container.style.top = `${(100 * (rect[1] - pageY)) / pageHeight}%`;\n\n    const { rotation } = data;\n    if (data.hasOwnCanvas || rotation === 0) {\n      container.style.width = `${(100 * width) / pageWidth}%`;\n      container.style.height = `${(100 * height) / pageHeight}%`;\n    } else {\n      this.setRotation(rotation, container);\n    }\n\n    return container;\n  }\n\n  setRotation(angle, container = this.container) {\n    if (!this.data.rect) {\n      return;\n    }\n    const { pageWidth, pageHeight } = this.parent.viewport.rawDims;\n    const { width, height } = getRectDims(this.data.rect);\n\n    let elementWidth, elementHeight;\n    if (angle % 180 === 0) {\n      elementWidth = (100 * width) / pageWidth;\n      elementHeight = (100 * height) / pageHeight;\n    } else {\n      elementWidth = (100 * height) / pageWidth;\n      elementHeight = (100 * width) / pageHeight;\n    }\n\n    container.style.width = `${elementWidth}%`;\n    container.style.height = `${elementHeight}%`;\n\n    container.setAttribute(\"data-main-rotation\", (360 - angle) % 360);\n  }\n\n  get _commonActions() {\n    const setColor = (jsName, styleName, event) => {\n      const color = event.detail[jsName];\n      const colorType = color[0];\n      const colorArray = color.slice(1);\n      event.target.style[styleName] =\n        ColorConverters[`${colorType}_HTML`](colorArray);\n      this.annotationStorage.setValue(this.data.id, {\n        [styleName]: ColorConverters[`${colorType}_rgb`](colorArray),\n      });\n    };\n\n    return shadow(this, \"_commonActions\", {\n      display: event => {\n        const { display } = event.detail;\n        // See scripting/constants.js for the values of `Display`.\n        // 0 = visible, 1 = hidden, 2 = noPrint and 3 = noView.\n        const hidden = display % 2 === 1;\n        this.container.style.visibility = hidden ? \"hidden\" : \"visible\";\n        this.annotationStorage.setValue(this.data.id, {\n          noView: hidden,\n          noPrint: display === 1 || display === 2,\n        });\n      },\n      print: event => {\n        this.annotationStorage.setValue(this.data.id, {\n          noPrint: !event.detail.print,\n        });\n      },\n      hidden: event => {\n        const { hidden } = event.detail;\n        this.container.style.visibility = hidden ? \"hidden\" : \"visible\";\n        this.annotationStorage.setValue(this.data.id, {\n          noPrint: hidden,\n          noView: hidden,\n        });\n      },\n      focus: event => {\n        setTimeout(() => event.target.focus({ preventScroll: false }), 0);\n      },\n      userName: event => {\n        // tooltip\n        event.target.title = event.detail.userName;\n      },\n      readonly: event => {\n        event.target.disabled = event.detail.readonly;\n      },\n      required: event => {\n        this._setRequired(event.target, event.detail.required);\n      },\n      bgColor: event => {\n        setColor(\"bgColor\", \"backgroundColor\", event);\n      },\n      fillColor: event => {\n        setColor(\"fillColor\", \"backgroundColor\", event);\n      },\n      fgColor: event => {\n        setColor(\"fgColor\", \"color\", event);\n      },\n      textColor: event => {\n        setColor(\"textColor\", \"color\", event);\n      },\n      borderColor: event => {\n        setColor(\"borderColor\", \"borderColor\", event);\n      },\n      strokeColor: event => {\n        setColor(\"strokeColor\", \"borderColor\", event);\n      },\n      rotation: event => {\n        const angle = event.detail.rotation;\n        this.setRotation(angle);\n        this.annotationStorage.setValue(this.data.id, {\n          rotation: angle,\n        });\n      },\n    });\n  }\n\n  _dispatchEventFromSandbox(actions, jsEvent) {\n    const commonActions = this._commonActions;\n    for (const name of Object.keys(jsEvent.detail)) {\n      const action = actions[name] || commonActions[name];\n      action?.(jsEvent);\n    }\n  }\n\n  _setDefaultPropertiesFromJS(element) {\n    if (!this.enableScripting) {\n      return;\n    }\n\n    // Some properties may have been updated thanks to JS.\n    const storedData = this.annotationStorage.getRawValue(this.data.id);\n    if (!storedData) {\n      return;\n    }\n\n    const commonActions = this._commonActions;\n    for (const [actionName, detail] of Object.entries(storedData)) {\n      const action = commonActions[actionName];\n      if (action) {\n        const eventProxy = {\n          detail: {\n            [actionName]: detail,\n          },\n          target: element,\n        };\n        action(eventProxy);\n        // The action has been consumed: no need to keep it.\n        delete storedData[actionName];\n      }\n    }\n  }\n\n  /**\n   * Create quadrilaterals from the annotation's quadpoints.\n   *\n   * @private\n   * @memberof AnnotationElement\n   */\n  _createQuadrilaterals() {\n    if (!this.container) {\n      return;\n    }\n    const { quadPoints } = this.data;\n    if (!quadPoints) {\n      return;\n    }\n\n    const [rectBlX, rectBlY, rectTrX, rectTrY] = this.data.rect;\n\n    if (quadPoints.length === 1) {\n      const [, { x: trX, y: trY }, { x: blX, y: blY }] = quadPoints[0];\n      if (\n        rectTrX === trX &&\n        rectTrY === trY &&\n        rectBlX === blX &&\n        rectBlY === blY\n      ) {\n        // The quadpoints cover the whole annotation rectangle, so no need to\n        // create a quadrilateral.\n        return;\n      }\n    }\n\n    const { style } = this.container;\n    let svgBuffer;\n    if (this.#hasBorder) {\n      const { borderColor, borderWidth } = style;\n      style.borderWidth = 0;\n      svgBuffer = [\n        \"url('data:image/svg+xml;utf8,\",\n        `<svg xmlns=\"http://www.w3.org/2000/svg\"`,\n        ` preserveAspectRatio=\"none\" viewBox=\"0 0 1 1\">`,\n        `<g fill=\"transparent\" stroke=\"${borderColor}\" stroke-width=\"${borderWidth}\">`,\n      ];\n      this.container.classList.add(\"hasBorder\");\n    }\n\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"TESTING\")) {\n      this.container.classList.add(\"hasClipPath\");\n    }\n\n    const width = rectTrX - rectBlX;\n    const height = rectTrY - rectBlY;\n\n    const { svgFactory } = this;\n    const svg = svgFactory.createElement(\"svg\");\n    svg.classList.add(\"quadrilateralsContainer\");\n    svg.setAttribute(\"width\", 0);\n    svg.setAttribute(\"height\", 0);\n    const defs = svgFactory.createElement(\"defs\");\n    svg.append(defs);\n    const clipPath = svgFactory.createElement(\"clipPath\");\n    const id = `clippath_${this.data.id}`;\n    clipPath.setAttribute(\"id\", id);\n    clipPath.setAttribute(\"clipPathUnits\", \"objectBoundingBox\");\n    defs.append(clipPath);\n\n    for (const [, { x: trX, y: trY }, { x: blX, y: blY }] of quadPoints) {\n      const rect = svgFactory.createElement(\"rect\");\n      const x = (blX - rectBlX) / width;\n      const y = (rectTrY - trY) / height;\n      const rectWidth = (trX - blX) / width;\n      const rectHeight = (trY - blY) / height;\n      rect.setAttribute(\"x\", x);\n      rect.setAttribute(\"y\", y);\n      rect.setAttribute(\"width\", rectWidth);\n      rect.setAttribute(\"height\", rectHeight);\n      clipPath.append(rect);\n      svgBuffer?.push(\n        `<rect vector-effect=\"non-scaling-stroke\" x=\"${x}\" y=\"${y}\" width=\"${rectWidth}\" height=\"${rectHeight}\"/>`\n      );\n    }\n\n    if (this.#hasBorder) {\n      svgBuffer.push(`</g></svg>')`);\n      style.backgroundImage = svgBuffer.join(\"\");\n    }\n\n    this.container.append(svg);\n    this.container.style.clipPath = `url(#${id})`;\n  }\n\n  /**\n   * Create a popup for the annotation's HTML element. This is used for\n   * annotations that do not have a Popup entry in the dictionary, but\n   * are of a type that works with popups (such as Highlight annotations).\n   *\n   * @private\n   * @memberof AnnotationElement\n   */\n  _createPopup() {\n    const { container, data } = this;\n    container.setAttribute(\"aria-haspopup\", \"dialog\");\n\n    const popup = new PopupAnnotationElement({\n      data: {\n        color: data.color,\n        titleObj: data.titleObj,\n        modificationDate: data.modificationDate,\n        contentsObj: data.contentsObj,\n        richText: data.richText,\n        parentRect: data.rect,\n        borderStyle: 0,\n        id: `popup_${data.id}`,\n        rotation: data.rotation,\n      },\n      parent: this.parent,\n      elements: [this],\n    });\n    this.parent.div.append(popup.render());\n  }\n\n  /**\n   * Render the annotation's HTML element(s).\n   *\n   * @public\n   * @memberof AnnotationElement\n   */\n  render() {\n    unreachable(\"Abstract method `AnnotationElement.render` called\");\n  }\n\n  /**\n   * @private\n   * @returns {Array}\n   */\n  _getElementsByName(name, skipId = null) {\n    const fields = [];\n\n    if (this._fieldObjects) {\n      const fieldObj = this._fieldObjects[name];\n      if (fieldObj) {\n        for (const { page, id, exportValues } of fieldObj) {\n          if (page === -1) {\n            continue;\n          }\n          if (id === skipId) {\n            continue;\n          }\n          const exportValue =\n            typeof exportValues === \"string\" ? exportValues : null;\n\n          const domElement = document.querySelector(\n            `[data-element-id=\"${id}\"]`\n          );\n          if (domElement && !GetElementsByNameSet.has(domElement)) {\n            warn(`_getElementsByName - element not allowed: ${id}`);\n            continue;\n          }\n          fields.push({ id, exportValue, domElement });\n        }\n      }\n      return fields;\n    }\n    // Fallback to a regular DOM lookup, to ensure that the standalone\n    // viewer components won't break.\n    for (const domElement of document.getElementsByName(name)) {\n      const { exportValue } = domElement;\n      const id = domElement.getAttribute(\"data-element-id\");\n      if (id === skipId) {\n        continue;\n      }\n      if (!GetElementsByNameSet.has(domElement)) {\n        continue;\n      }\n      fields.push({ id, exportValue, domElement });\n    }\n    return fields;\n  }\n\n  show() {\n    if (this.container) {\n      this.container.hidden = false;\n    }\n    this.popup?.maybeShow();\n  }\n\n  hide() {\n    if (this.container) {\n      this.container.hidden = true;\n    }\n    this.popup?.forceHide();\n  }\n\n  /**\n   * Get the HTML element(s) which can trigger a popup when clicked or hovered.\n   *\n   * @public\n   * @memberof AnnotationElement\n   * @returns {Array<HTMLElement>|HTMLElement} An array of elements or an\n   *          element.\n   */\n  getElementsToTriggerPopup() {\n    return this.container;\n  }\n\n  addHighlightArea() {\n    const triggers = this.getElementsToTriggerPopup();\n    if (Array.isArray(triggers)) {\n      for (const element of triggers) {\n        element.classList.add(\"highlightArea\");\n      }\n    } else {\n      triggers.classList.add(\"highlightArea\");\n    }\n  }\n\n  get _isEditable() {\n    return false;\n  }\n\n  _editOnDoubleClick() {\n    if (!this._isEditable) {\n      return;\n    }\n    const {\n      annotationEditorType: mode,\n      data: { id: editId },\n    } = this;\n    this.container.addEventListener(\"dblclick\", () => {\n      this.linkService.eventBus?.dispatch(\"switchannotationeditormode\", {\n        source: this,\n        mode,\n        editId,\n      });\n    });\n  }\n}\n\nclass LinkAnnotationElement extends AnnotationElement {\n  constructor(parameters, options = null) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: !!options?.ignoreBorder,\n      createQuadrilaterals: true,\n    });\n    this.isTooltipOnly = parameters.data.isTooltipOnly;\n  }\n\n  render() {\n    const { data, linkService } = this;\n    const link = document.createElement(\"a\");\n    link.setAttribute(\"data-element-id\", data.id);\n    let isBound = false;\n\n    if (data.url) {\n      linkService.addLinkAttributes(link, data.url, data.newWindow);\n      isBound = true;\n    } else if (data.action) {\n      this._bindNamedAction(link, data.action);\n      isBound = true;\n    } else if (data.attachment) {\n      this.#bindAttachment(link, data.attachment, data.attachmentDest);\n      isBound = true;\n    } else if (data.setOCGState) {\n      this.#bindSetOCGState(link, data.setOCGState);\n      isBound = true;\n    } else if (data.dest) {\n      this._bindLink(link, data.dest);\n      isBound = true;\n    } else {\n      if (\n        data.actions &&\n        (data.actions.Action ||\n          data.actions[\"Mouse Up\"] ||\n          data.actions[\"Mouse Down\"]) &&\n        this.enableScripting &&\n        this.hasJSActions\n      ) {\n        this._bindJSAction(link, data);\n        isBound = true;\n      }\n\n      if (data.resetForm) {\n        this._bindResetFormAction(link, data.resetForm);\n        isBound = true;\n      } else if (this.isTooltipOnly && !isBound) {\n        this._bindLink(link, \"\");\n        isBound = true;\n      }\n    }\n\n    this.container.classList.add(\"linkAnnotation\");\n    if (isBound) {\n      this.container.append(link);\n    }\n\n    return this.container;\n  }\n\n  #setInternalLink() {\n    this.container.setAttribute(\"data-internal-link\", \"\");\n  }\n\n  /**\n   * Bind internal links to the link element.\n   *\n   * @private\n   * @param {Object} link\n   * @param {Object} destination\n   * @memberof LinkAnnotationElement\n   */\n  _bindLink(link, destination) {\n    link.href = this.linkService.getDestinationHash(destination);\n    link.onclick = () => {\n      if (destination) {\n        this.linkService.goToDestination(destination);\n      }\n      return false;\n    };\n    if (destination || destination === /* isTooltipOnly = */ \"\") {\n      this.#setInternalLink();\n    }\n  }\n\n  /**\n   * Bind named actions to the link element.\n   *\n   * @private\n   * @param {Object} link\n   * @param {Object} action\n   * @memberof LinkAnnotationElement\n   */\n  _bindNamedAction(link, action) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    link.onclick = () => {\n      this.linkService.executeNamedAction(action);\n      return false;\n    };\n    this.#setInternalLink();\n  }\n\n  /**\n   * Bind attachments to the link element.\n   * @param {Object} link\n   * @param {Object} attachment\n   * @param {str} [dest]\n   */\n  #bindAttachment(link, attachment, dest = null) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    link.onclick = () => {\n      this.downloadManager?.openOrDownloadData(\n        attachment.content,\n        attachment.filename,\n        dest\n      );\n      return false;\n    };\n    this.#setInternalLink();\n  }\n\n  /**\n   * Bind SetOCGState actions to the link element.\n   * @param {Object} link\n   * @param {Object} action\n   */\n  #bindSetOCGState(link, action) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    link.onclick = () => {\n      this.linkService.executeSetOCGState(action);\n      return false;\n    };\n    this.#setInternalLink();\n  }\n\n  /**\n   * Bind JS actions to the link element.\n   *\n   * @private\n   * @param {Object} link\n   * @param {Object} data\n   * @memberof LinkAnnotationElement\n   */\n  _bindJSAction(link, data) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    const map = new Map([\n      [\"Action\", \"onclick\"],\n      [\"Mouse Up\", \"onmouseup\"],\n      [\"Mouse Down\", \"onmousedown\"],\n    ]);\n    for (const name of Object.keys(data.actions)) {\n      const jsName = map.get(name);\n      if (!jsName) {\n        continue;\n      }\n      link[jsName] = () => {\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: data.id,\n            name,\n          },\n        });\n        return false;\n      };\n    }\n\n    if (!link.onclick) {\n      link.onclick = () => false;\n    }\n    this.#setInternalLink();\n  }\n\n  _bindResetFormAction(link, resetForm) {\n    const otherClickAction = link.onclick;\n    if (!otherClickAction) {\n      link.href = this.linkService.getAnchorUrl(\"\");\n    }\n    this.#setInternalLink();\n\n    if (!this._fieldObjects) {\n      warn(\n        `_bindResetFormAction - \"resetForm\" action not supported, ` +\n          \"ensure that the `fieldObjects` parameter is provided.\"\n      );\n      if (!otherClickAction) {\n        link.onclick = () => false;\n      }\n      return;\n    }\n\n    link.onclick = () => {\n      otherClickAction?.();\n\n      const {\n        fields: resetFormFields,\n        refs: resetFormRefs,\n        include,\n      } = resetForm;\n\n      const allFields = [];\n      if (resetFormFields.length !== 0 || resetFormRefs.length !== 0) {\n        const fieldIds = new Set(resetFormRefs);\n        for (const fieldName of resetFormFields) {\n          const fields = this._fieldObjects[fieldName] || [];\n          for (const { id } of fields) {\n            fieldIds.add(id);\n          }\n        }\n        for (const fields of Object.values(this._fieldObjects)) {\n          for (const field of fields) {\n            if (fieldIds.has(field.id) === include) {\n              allFields.push(field);\n            }\n          }\n        }\n      } else {\n        for (const fields of Object.values(this._fieldObjects)) {\n          allFields.push(...fields);\n        }\n      }\n\n      const storage = this.annotationStorage;\n      const allIds = [];\n      for (const field of allFields) {\n        const { id } = field;\n        allIds.push(id);\n        switch (field.type) {\n          case \"text\": {\n            const value = field.defaultValue || \"\";\n            storage.setValue(id, { value });\n            break;\n          }\n          case \"checkbox\":\n          case \"radiobutton\": {\n            const value = field.defaultValue === field.exportValues;\n            storage.setValue(id, { value });\n            break;\n          }\n          case \"combobox\":\n          case \"listbox\": {\n            const value = field.defaultValue || \"\";\n            storage.setValue(id, { value });\n            break;\n          }\n          default:\n            continue;\n        }\n\n        const domElement = document.querySelector(`[data-element-id=\"${id}\"]`);\n        if (!domElement) {\n          continue;\n        } else if (!GetElementsByNameSet.has(domElement)) {\n          warn(`_bindResetFormAction - element not allowed: ${id}`);\n          continue;\n        }\n        domElement.dispatchEvent(new Event(\"resetform\"));\n      }\n\n      if (this.enableScripting) {\n        // Update the values in the sandbox.\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: \"app\",\n            ids: allIds,\n            name: \"ResetForm\",\n          },\n        });\n      }\n\n      return false;\n    };\n  }\n}\n\nclass TextAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, { isRenderable: true });\n  }\n\n  render() {\n    this.container.classList.add(\"textAnnotation\");\n\n    const image = document.createElement(\"img\");\n    image.src =\n      this.imageResourcesPath +\n      \"annotation-\" +\n      this.data.name.toLowerCase() +\n      \".svg\";\n    image.setAttribute(\"data-l10n-id\", \"pdfjs-text-annotation-type\");\n    image.setAttribute(\n      \"data-l10n-args\",\n      JSON.stringify({ type: this.data.name })\n    );\n\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n\n    this.container.append(image);\n    return this.container;\n  }\n}\n\nclass WidgetAnnotationElement extends AnnotationElement {\n  render() {\n    // Show only the container for unsupported field types.\n    if (this.data.alternativeText) {\n      this.container.title = this.data.alternativeText;\n    }\n\n    return this.container;\n  }\n\n  showElementAndHideCanvas(element) {\n    if (this.data.hasOwnCanvas) {\n      if (element.previousSibling?.nodeName === \"CANVAS\") {\n        element.previousSibling.hidden = true;\n      }\n      element.hidden = false;\n    }\n  }\n\n  _getKeyModifier(event) {\n    return FeatureTest.platform.isMac ? event.metaKey : event.ctrlKey;\n  }\n\n  _setEventListener(element, elementData, baseName, eventName, valueGetter) {\n    if (baseName.includes(\"mouse\")) {\n      // Mouse events\n      element.addEventListener(baseName, event => {\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: this.data.id,\n            name: eventName,\n            value: valueGetter(event),\n            shift: event.shiftKey,\n            modifier: this._getKeyModifier(event),\n          },\n        });\n      });\n    } else {\n      // Non-mouse events\n      element.addEventListener(baseName, event => {\n        if (baseName === \"blur\") {\n          if (!elementData.focused || !event.relatedTarget) {\n            return;\n          }\n          elementData.focused = false;\n        } else if (baseName === \"focus\") {\n          if (elementData.focused) {\n            return;\n          }\n          elementData.focused = true;\n        }\n\n        if (!valueGetter) {\n          return;\n        }\n\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: this.data.id,\n            name: eventName,\n            value: valueGetter(event),\n          },\n        });\n      });\n    }\n  }\n\n  _setEventListeners(element, elementData, names, getter) {\n    for (const [baseName, eventName] of names) {\n      if (eventName === \"Action\" || this.data.actions?.[eventName]) {\n        if (eventName === \"Focus\" || eventName === \"Blur\") {\n          elementData ||= { focused: false };\n        }\n        this._setEventListener(\n          element,\n          elementData,\n          baseName,\n          eventName,\n          getter\n        );\n        if (eventName === \"Focus\" && !this.data.actions?.Blur) {\n          // Ensure that elementData will have the correct value.\n          this._setEventListener(element, elementData, \"blur\", \"Blur\", null);\n        } else if (eventName === \"Blur\" && !this.data.actions?.Focus) {\n          this._setEventListener(element, elementData, \"focus\", \"Focus\", null);\n        }\n      }\n    }\n  }\n\n  _setBackgroundColor(element) {\n    const color = this.data.backgroundColor || null;\n    element.style.backgroundColor =\n      color === null\n        ? \"transparent\"\n        : Util.makeHexColor(color[0], color[1], color[2]);\n  }\n\n  /**\n   * Apply text styles to the text in the element.\n   *\n   * @private\n   * @param {HTMLDivElement} element\n   * @memberof TextWidgetAnnotationElement\n   */\n  _setTextStyle(element) {\n    const TEXT_ALIGNMENT = [\"left\", \"center\", \"right\"];\n    const { fontColor } = this.data.defaultAppearanceData;\n    const fontSize =\n      this.data.defaultAppearanceData.fontSize || DEFAULT_FONT_SIZE;\n\n    const style = element.style;\n\n    // TODO: If the font-size is zero, calculate it based on the height and\n    //       width of the element.\n    // Not setting `style.fontSize` will use the default font-size for now.\n\n    // We don't use the font, as specified in the PDF document, for the <input>\n    // element. Hence using the original `fontSize` could look bad, which is why\n    // it's instead based on the field height.\n    // If the height is \"big\" then it could lead to a too big font size\n    // so in this case use the one we've in the pdf (hence the min).\n    let computedFontSize;\n    const BORDER_SIZE = 2;\n    const roundToOneDecimal = x => Math.round(10 * x) / 10;\n    if (this.data.multiLine) {\n      const height = Math.abs(\n        this.data.rect[3] - this.data.rect[1] - BORDER_SIZE\n      );\n      const numberOfLines = Math.round(height / (LINE_FACTOR * fontSize)) || 1;\n      const lineHeight = height / numberOfLines;\n      computedFontSize = Math.min(\n        fontSize,\n        roundToOneDecimal(lineHeight / LINE_FACTOR)\n      );\n    } else {\n      const height = Math.abs(\n        this.data.rect[3] - this.data.rect[1] - BORDER_SIZE\n      );\n      computedFontSize = Math.min(\n        fontSize,\n        roundToOneDecimal(height / LINE_FACTOR)\n      );\n    }\n    style.fontSize = `calc(${computedFontSize}px * var(--scale-factor))`;\n\n    style.color = Util.makeHexColor(fontColor[0], fontColor[1], fontColor[2]);\n\n    if (this.data.textAlignment !== null) {\n      style.textAlign = TEXT_ALIGNMENT[this.data.textAlignment];\n    }\n  }\n\n  _setRequired(element, isRequired) {\n    if (isRequired) {\n      element.setAttribute(\"required\", true);\n    } else {\n      element.removeAttribute(\"required\");\n    }\n    element.setAttribute(\"aria-required\", isRequired);\n  }\n}\n\nclass TextWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    const isRenderable =\n      parameters.renderForms ||\n      parameters.data.hasOwnCanvas ||\n      (!parameters.data.hasAppearance && !!parameters.data.fieldValue);\n    super(parameters, { isRenderable });\n  }\n\n  setPropertyOnSiblings(base, key, value, keyInStorage) {\n    const storage = this.annotationStorage;\n    for (const element of this._getElementsByName(\n      base.name,\n      /* skipId = */ base.id\n    )) {\n      if (element.domElement) {\n        element.domElement[key] = value;\n      }\n      storage.setValue(element.id, { [keyInStorage]: value });\n    }\n  }\n\n  render() {\n    const storage = this.annotationStorage;\n    const id = this.data.id;\n\n    this.container.classList.add(\"textWidgetAnnotation\");\n\n    let element = null;\n    if (this.renderForms) {\n      // NOTE: We cannot set the values using `element.value` below, since it\n      //       prevents the AnnotationLayer rasterizer in `test/driver.js`\n      //       from parsing the elements correctly for the reference tests.\n      const storedData = storage.getValue(id, {\n        value: this.data.fieldValue,\n      });\n      let textContent = storedData.value || \"\";\n      const maxLen = storage.getValue(id, {\n        charLimit: this.data.maxLen,\n      }).charLimit;\n      if (maxLen && textContent.length > maxLen) {\n        textContent = textContent.slice(0, maxLen);\n      }\n\n      let fieldFormattedValues =\n        storedData.formattedValue || this.data.textContent?.join(\"\\n\") || null;\n      if (fieldFormattedValues && this.data.comb) {\n        fieldFormattedValues = fieldFormattedValues.replaceAll(/\\s+/g, \"\");\n      }\n\n      const elementData = {\n        userValue: textContent,\n        formattedValue: fieldFormattedValues,\n        lastCommittedValue: null,\n        commitKey: 1,\n        focused: false,\n      };\n\n      if (this.data.multiLine) {\n        element = document.createElement(\"textarea\");\n        element.textContent = fieldFormattedValues ?? textContent;\n        if (this.data.doNotScroll) {\n          element.style.overflowY = \"hidden\";\n        }\n      } else {\n        element = document.createElement(\"input\");\n        element.type = \"text\";\n        element.setAttribute(\"value\", fieldFormattedValues ?? textContent);\n        if (this.data.doNotScroll) {\n          element.style.overflowX = \"hidden\";\n        }\n      }\n      if (this.data.hasOwnCanvas) {\n        element.hidden = true;\n      }\n      GetElementsByNameSet.add(element);\n      element.setAttribute(\"data-element-id\", id);\n\n      element.disabled = this.data.readOnly;\n      element.name = this.data.fieldName;\n      element.tabIndex = DEFAULT_TAB_INDEX;\n\n      this._setRequired(element, this.data.required);\n\n      if (maxLen) {\n        element.maxLength = maxLen;\n      }\n\n      element.addEventListener(\"input\", event => {\n        storage.setValue(id, { value: event.target.value });\n        this.setPropertyOnSiblings(\n          element,\n          \"value\",\n          event.target.value,\n          \"value\"\n        );\n        elementData.formattedValue = null;\n      });\n\n      element.addEventListener(\"resetform\", event => {\n        const defaultValue = this.data.defaultFieldValue ?? \"\";\n        element.value = elementData.userValue = defaultValue;\n        elementData.formattedValue = null;\n      });\n\n      let blurListener = event => {\n        const { formattedValue } = elementData;\n        if (formattedValue !== null && formattedValue !== undefined) {\n          event.target.value = formattedValue;\n        }\n        // Reset the cursor position to the start of the field (issue 12359).\n        event.target.scrollLeft = 0;\n      };\n\n      if (this.enableScripting && this.hasJSActions) {\n        element.addEventListener(\"focus\", event => {\n          if (elementData.focused) {\n            return;\n          }\n          const { target } = event;\n          if (elementData.userValue) {\n            target.value = elementData.userValue;\n          }\n          elementData.lastCommittedValue = target.value;\n          elementData.commitKey = 1;\n          if (!this.data.actions?.Focus) {\n            elementData.focused = true;\n          }\n        });\n\n        element.addEventListener(\"updatefromsandbox\", jsEvent => {\n          this.showElementAndHideCanvas(jsEvent.target);\n          const actions = {\n            value(event) {\n              elementData.userValue = event.detail.value ?? \"\";\n              storage.setValue(id, { value: elementData.userValue.toString() });\n              event.target.value = elementData.userValue;\n            },\n            formattedValue(event) {\n              const { formattedValue } = event.detail;\n              elementData.formattedValue = formattedValue;\n              if (\n                formattedValue !== null &&\n                formattedValue !== undefined &&\n                event.target !== document.activeElement\n              ) {\n                // Input hasn't the focus so display formatted string\n                event.target.value = formattedValue;\n              }\n              storage.setValue(id, {\n                formattedValue,\n              });\n            },\n            selRange(event) {\n              event.target.setSelectionRange(...event.detail.selRange);\n            },\n            charLimit: event => {\n              const { charLimit } = event.detail;\n              const { target } = event;\n              if (charLimit === 0) {\n                target.removeAttribute(\"maxLength\");\n                return;\n              }\n\n              target.setAttribute(\"maxLength\", charLimit);\n              let value = elementData.userValue;\n              if (!value || value.length <= charLimit) {\n                return;\n              }\n              value = value.slice(0, charLimit);\n              target.value = elementData.userValue = value;\n              storage.setValue(id, { value });\n\n              this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n                source: this,\n                detail: {\n                  id,\n                  name: \"Keystroke\",\n                  value,\n                  willCommit: true,\n                  commitKey: 1,\n                  selStart: target.selectionStart,\n                  selEnd: target.selectionEnd,\n                },\n              });\n            },\n          };\n          this._dispatchEventFromSandbox(actions, jsEvent);\n        });\n\n        // Even if the field hasn't any actions\n        // leaving it can still trigger some actions with Calculate\n        element.addEventListener(\"keydown\", event => {\n          elementData.commitKey = 1;\n          // If the key is one of Escape, Enter then the data are committed.\n          // If we've a Tab then data will be committed on blur.\n          let commitKey = -1;\n          if (event.key === \"Escape\") {\n            commitKey = 0;\n          } else if (event.key === \"Enter\" && !this.data.multiLine) {\n            // When we've a multiline field, \"Enter\" key is a key as the other\n            // hence we don't commit the data (Acrobat behaves the same way)\n            // (see issue #15627).\n            commitKey = 2;\n          } else if (event.key === \"Tab\") {\n            elementData.commitKey = 3;\n          }\n          if (commitKey === -1) {\n            return;\n          }\n          const { value } = event.target;\n          if (elementData.lastCommittedValue === value) {\n            return;\n          }\n          elementData.lastCommittedValue = value;\n          // Save the entered value\n          elementData.userValue = value;\n          this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n            source: this,\n            detail: {\n              id,\n              name: \"Keystroke\",\n              value,\n              willCommit: true,\n              commitKey,\n              selStart: event.target.selectionStart,\n              selEnd: event.target.selectionEnd,\n            },\n          });\n        });\n        const _blurListener = blurListener;\n        blurListener = null;\n        element.addEventListener(\"blur\", event => {\n          if (!elementData.focused || !event.relatedTarget) {\n            return;\n          }\n          if (!this.data.actions?.Blur) {\n            elementData.focused = false;\n          }\n          const { value } = event.target;\n          elementData.userValue = value;\n          if (elementData.lastCommittedValue !== value) {\n            this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n              source: this,\n              detail: {\n                id,\n                name: \"Keystroke\",\n                value,\n                willCommit: true,\n                commitKey: elementData.commitKey,\n                selStart: event.target.selectionStart,\n                selEnd: event.target.selectionEnd,\n              },\n            });\n          }\n          _blurListener(event);\n        });\n\n        if (this.data.actions?.Keystroke) {\n          element.addEventListener(\"beforeinput\", event => {\n            elementData.lastCommittedValue = null;\n            const { data, target } = event;\n            const { value, selectionStart, selectionEnd } = target;\n\n            let selStart = selectionStart,\n              selEnd = selectionEnd;\n\n            switch (event.inputType) {\n              // https://rawgit.com/w3c/input-events/v1/index.html#interface-InputEvent-Attributes\n              case \"deleteWordBackward\": {\n                const match = value\n                  .substring(0, selectionStart)\n                  .match(/\\w*[^\\w]*$/);\n                if (match) {\n                  selStart -= match[0].length;\n                }\n                break;\n              }\n              case \"deleteWordForward\": {\n                const match = value\n                  .substring(selectionStart)\n                  .match(/^[^\\w]*\\w*/);\n                if (match) {\n                  selEnd += match[0].length;\n                }\n                break;\n              }\n              case \"deleteContentBackward\":\n                if (selectionStart === selectionEnd) {\n                  selStart -= 1;\n                }\n                break;\n              case \"deleteContentForward\":\n                if (selectionStart === selectionEnd) {\n                  selEnd += 1;\n                }\n                break;\n            }\n\n            // We handle the event ourselves.\n            event.preventDefault();\n            this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n              source: this,\n              detail: {\n                id,\n                name: \"Keystroke\",\n                value,\n                change: data || \"\",\n                willCommit: false,\n                selStart,\n                selEnd,\n              },\n            });\n          });\n        }\n\n        this._setEventListeners(\n          element,\n          elementData,\n          [\n            [\"focus\", \"Focus\"],\n            [\"blur\", \"Blur\"],\n            [\"mousedown\", \"Mouse Down\"],\n            [\"mouseenter\", \"Mouse Enter\"],\n            [\"mouseleave\", \"Mouse Exit\"],\n            [\"mouseup\", \"Mouse Up\"],\n          ],\n          event => event.target.value\n        );\n      }\n\n      if (blurListener) {\n        element.addEventListener(\"blur\", blurListener);\n      }\n\n      if (this.data.comb) {\n        const fieldWidth = this.data.rect[2] - this.data.rect[0];\n        const combWidth = fieldWidth / maxLen;\n\n        element.classList.add(\"comb\");\n        element.style.letterSpacing = `calc(${combWidth}px * var(--scale-factor) - 1ch)`;\n      }\n    } else {\n      element = document.createElement(\"div\");\n      element.textContent = this.data.fieldValue;\n      element.style.verticalAlign = \"middle\";\n      element.style.display = \"table-cell\";\n\n      if (this.data.hasOwnCanvas) {\n        element.hidden = true;\n      }\n    }\n\n    this._setTextStyle(element);\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n\n    this.container.append(element);\n    return this.container;\n  }\n}\n\nclass SignatureWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, { isRenderable: !!parameters.data.hasOwnCanvas });\n  }\n}\n\nclass CheckboxWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, { isRenderable: parameters.renderForms });\n  }\n\n  render() {\n    const storage = this.annotationStorage;\n    const data = this.data;\n    const id = data.id;\n    let value = storage.getValue(id, {\n      value: data.exportValue === data.fieldValue,\n    }).value;\n    if (typeof value === \"string\") {\n      // The value has been changed through js and set in annotationStorage.\n      value = value !== \"Off\";\n      storage.setValue(id, { value });\n    }\n\n    this.container.classList.add(\"buttonWidgetAnnotation\", \"checkBox\");\n\n    const element = document.createElement(\"input\");\n    GetElementsByNameSet.add(element);\n    element.setAttribute(\"data-element-id\", id);\n\n    element.disabled = data.readOnly;\n    this._setRequired(element, this.data.required);\n    element.type = \"checkbox\";\n    element.name = data.fieldName;\n    if (value) {\n      element.setAttribute(\"checked\", true);\n    }\n    element.setAttribute(\"exportValue\", data.exportValue);\n    element.tabIndex = DEFAULT_TAB_INDEX;\n\n    element.addEventListener(\"change\", event => {\n      const { name, checked } = event.target;\n      for (const checkbox of this._getElementsByName(name, /* skipId = */ id)) {\n        const curChecked = checked && checkbox.exportValue === data.exportValue;\n        if (checkbox.domElement) {\n          checkbox.domElement.checked = curChecked;\n        }\n        storage.setValue(checkbox.id, { value: curChecked });\n      }\n      storage.setValue(id, { value: checked });\n    });\n\n    element.addEventListener(\"resetform\", event => {\n      const defaultValue = data.defaultFieldValue || \"Off\";\n      event.target.checked = defaultValue === data.exportValue;\n    });\n\n    if (this.enableScripting && this.hasJSActions) {\n      element.addEventListener(\"updatefromsandbox\", jsEvent => {\n        const actions = {\n          value(event) {\n            event.target.checked = event.detail.value !== \"Off\";\n            storage.setValue(id, { value: event.target.checked });\n          },\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n\n      this._setEventListeners(\n        element,\n        null,\n        [\n          [\"change\", \"Validate\"],\n          [\"change\", \"Action\"],\n          [\"focus\", \"Focus\"],\n          [\"blur\", \"Blur\"],\n          [\"mousedown\", \"Mouse Down\"],\n          [\"mouseenter\", \"Mouse Enter\"],\n          [\"mouseleave\", \"Mouse Exit\"],\n          [\"mouseup\", \"Mouse Up\"],\n        ],\n        event => event.target.checked\n      );\n    }\n\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n\n    this.container.append(element);\n    return this.container;\n  }\n}\n\nclass RadioButtonWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, { isRenderable: parameters.renderForms });\n  }\n\n  render() {\n    this.container.classList.add(\"buttonWidgetAnnotation\", \"radioButton\");\n    const storage = this.annotationStorage;\n    const data = this.data;\n    const id = data.id;\n    let value = storage.getValue(id, {\n      value: data.fieldValue === data.buttonValue,\n    }).value;\n    if (typeof value === \"string\") {\n      // The value has been changed through js and set in annotationStorage.\n      value = value !== data.buttonValue;\n      storage.setValue(id, { value });\n    }\n\n    if (value) {\n      // It's possible that multiple radio buttons are checked.\n      // So if this one is checked we just reset the other ones.\n      // (see bug 1864136). Then when the other ones will be rendered they will\n      // unchecked (because of their value in the storage).\n      // Consequently, the first checked radio button will be the only checked\n      // one.\n      for (const radio of this._getElementsByName(\n        data.fieldName,\n        /* skipId = */ id\n      )) {\n        storage.setValue(radio.id, { value: false });\n      }\n    }\n\n    const element = document.createElement(\"input\");\n    GetElementsByNameSet.add(element);\n    element.setAttribute(\"data-element-id\", id);\n\n    element.disabled = data.readOnly;\n    this._setRequired(element, this.data.required);\n    element.type = \"radio\";\n    element.name = data.fieldName;\n    if (value) {\n      element.setAttribute(\"checked\", true);\n    }\n    element.tabIndex = DEFAULT_TAB_INDEX;\n\n    element.addEventListener(\"change\", event => {\n      const { name, checked } = event.target;\n      for (const radio of this._getElementsByName(name, /* skipId = */ id)) {\n        storage.setValue(radio.id, { value: false });\n      }\n      storage.setValue(id, { value: checked });\n    });\n\n    element.addEventListener(\"resetform\", event => {\n      const defaultValue = data.defaultFieldValue;\n      event.target.checked =\n        defaultValue !== null &&\n        defaultValue !== undefined &&\n        defaultValue === data.buttonValue;\n    });\n\n    if (this.enableScripting && this.hasJSActions) {\n      const pdfButtonValue = data.buttonValue;\n      element.addEventListener(\"updatefromsandbox\", jsEvent => {\n        const actions = {\n          value: event => {\n            const checked = pdfButtonValue === event.detail.value;\n            for (const radio of this._getElementsByName(event.target.name)) {\n              const curChecked = checked && radio.id === id;\n              if (radio.domElement) {\n                radio.domElement.checked = curChecked;\n              }\n              storage.setValue(radio.id, { value: curChecked });\n            }\n          },\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n\n      this._setEventListeners(\n        element,\n        null,\n        [\n          [\"change\", \"Validate\"],\n          [\"change\", \"Action\"],\n          [\"focus\", \"Focus\"],\n          [\"blur\", \"Blur\"],\n          [\"mousedown\", \"Mouse Down\"],\n          [\"mouseenter\", \"Mouse Enter\"],\n          [\"mouseleave\", \"Mouse Exit\"],\n          [\"mouseup\", \"Mouse Up\"],\n        ],\n        event => event.target.checked\n      );\n    }\n\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n\n    this.container.append(element);\n    return this.container;\n  }\n}\n\nclass PushButtonWidgetAnnotationElement extends LinkAnnotationElement {\n  constructor(parameters) {\n    super(parameters, { ignoreBorder: parameters.data.hasAppearance });\n  }\n\n  render() {\n    // The rendering and functionality of a push button widget annotation is\n    // equal to that of a link annotation, but may have more functionality, such\n    // as performing actions on form fields (resetting, submitting, et cetera).\n    const container = super.render();\n    container.classList.add(\"buttonWidgetAnnotation\", \"pushButton\");\n\n    if (this.data.alternativeText) {\n      container.title = this.data.alternativeText;\n    }\n\n    const linkElement = container.lastChild;\n    if (this.enableScripting && this.hasJSActions && linkElement) {\n      this._setDefaultPropertiesFromJS(linkElement);\n\n      linkElement.addEventListener(\"updatefromsandbox\", jsEvent => {\n        this._dispatchEventFromSandbox({}, jsEvent);\n      });\n    }\n\n    return container;\n  }\n}\n\nclass ChoiceWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, { isRenderable: parameters.renderForms });\n  }\n\n  render() {\n    this.container.classList.add(\"choiceWidgetAnnotation\");\n    const storage = this.annotationStorage;\n    const id = this.data.id;\n\n    const storedData = storage.getValue(id, {\n      value: this.data.fieldValue,\n    });\n\n    const selectElement = document.createElement(\"select\");\n    GetElementsByNameSet.add(selectElement);\n    selectElement.setAttribute(\"data-element-id\", id);\n\n    selectElement.disabled = this.data.readOnly;\n    this._setRequired(selectElement, this.data.required);\n    selectElement.name = this.data.fieldName;\n    selectElement.tabIndex = DEFAULT_TAB_INDEX;\n\n    let addAnEmptyEntry = this.data.combo && this.data.options.length > 0;\n\n    if (!this.data.combo) {\n      // List boxes have a size and (optionally) multiple selection.\n      selectElement.size = this.data.options.length;\n      if (this.data.multiSelect) {\n        selectElement.multiple = true;\n      }\n    }\n\n    selectElement.addEventListener(\"resetform\", event => {\n      const defaultValue = this.data.defaultFieldValue;\n      for (const option of selectElement.options) {\n        option.selected = option.value === defaultValue;\n      }\n    });\n\n    // Insert the options into the choice field.\n    for (const option of this.data.options) {\n      const optionElement = document.createElement(\"option\");\n      optionElement.textContent = option.displayValue;\n      optionElement.value = option.exportValue;\n      if (storedData.value.includes(option.exportValue)) {\n        optionElement.setAttribute(\"selected\", true);\n        addAnEmptyEntry = false;\n      }\n      selectElement.append(optionElement);\n    }\n\n    let removeEmptyEntry = null;\n    if (addAnEmptyEntry) {\n      const noneOptionElement = document.createElement(\"option\");\n      noneOptionElement.value = \" \";\n      noneOptionElement.setAttribute(\"hidden\", true);\n      noneOptionElement.setAttribute(\"selected\", true);\n      selectElement.prepend(noneOptionElement);\n\n      removeEmptyEntry = () => {\n        noneOptionElement.remove();\n        selectElement.removeEventListener(\"input\", removeEmptyEntry);\n        removeEmptyEntry = null;\n      };\n      selectElement.addEventListener(\"input\", removeEmptyEntry);\n    }\n\n    const getValue = isExport => {\n      const name = isExport ? \"value\" : \"textContent\";\n      const { options, multiple } = selectElement;\n      if (!multiple) {\n        return options.selectedIndex === -1\n          ? null\n          : options[options.selectedIndex][name];\n      }\n      return Array.prototype.filter\n        .call(options, option => option.selected)\n        .map(option => option[name]);\n    };\n\n    let selectedValues = getValue(/* isExport */ false);\n\n    const getItems = event => {\n      const options = event.target.options;\n      return Array.prototype.map.call(options, option => {\n        return { displayValue: option.textContent, exportValue: option.value };\n      });\n    };\n\n    if (this.enableScripting && this.hasJSActions) {\n      selectElement.addEventListener(\"updatefromsandbox\", jsEvent => {\n        const actions = {\n          value(event) {\n            removeEmptyEntry?.();\n            const value = event.detail.value;\n            const values = new Set(Array.isArray(value) ? value : [value]);\n            for (const option of selectElement.options) {\n              option.selected = values.has(option.value);\n            }\n            storage.setValue(id, {\n              value: getValue(/* isExport */ true),\n            });\n            selectedValues = getValue(/* isExport */ false);\n          },\n          multipleSelection(event) {\n            selectElement.multiple = true;\n          },\n          remove(event) {\n            const options = selectElement.options;\n            const index = event.detail.remove;\n            options[index].selected = false;\n            selectElement.remove(index);\n            if (options.length > 0) {\n              const i = Array.prototype.findIndex.call(\n                options,\n                option => option.selected\n              );\n              if (i === -1) {\n                options[0].selected = true;\n              }\n            }\n            storage.setValue(id, {\n              value: getValue(/* isExport */ true),\n              items: getItems(event),\n            });\n            selectedValues = getValue(/* isExport */ false);\n          },\n          clear(event) {\n            while (selectElement.length !== 0) {\n              selectElement.remove(0);\n            }\n            storage.setValue(id, { value: null, items: [] });\n            selectedValues = getValue(/* isExport */ false);\n          },\n          insert(event) {\n            const { index, displayValue, exportValue } = event.detail.insert;\n            const selectChild = selectElement.children[index];\n            const optionElement = document.createElement(\"option\");\n            optionElement.textContent = displayValue;\n            optionElement.value = exportValue;\n\n            if (selectChild) {\n              selectChild.before(optionElement);\n            } else {\n              selectElement.append(optionElement);\n            }\n            storage.setValue(id, {\n              value: getValue(/* isExport */ true),\n              items: getItems(event),\n            });\n            selectedValues = getValue(/* isExport */ false);\n          },\n          items(event) {\n            const { items } = event.detail;\n            while (selectElement.length !== 0) {\n              selectElement.remove(0);\n            }\n            for (const item of items) {\n              const { displayValue, exportValue } = item;\n              const optionElement = document.createElement(\"option\");\n              optionElement.textContent = displayValue;\n              optionElement.value = exportValue;\n              selectElement.append(optionElement);\n            }\n            if (selectElement.options.length > 0) {\n              selectElement.options[0].selected = true;\n            }\n            storage.setValue(id, {\n              value: getValue(/* isExport */ true),\n              items: getItems(event),\n            });\n            selectedValues = getValue(/* isExport */ false);\n          },\n          indices(event) {\n            const indices = new Set(event.detail.indices);\n            for (const option of event.target.options) {\n              option.selected = indices.has(option.index);\n            }\n            storage.setValue(id, {\n              value: getValue(/* isExport */ true),\n            });\n            selectedValues = getValue(/* isExport */ false);\n          },\n          editable(event) {\n            event.target.disabled = !event.detail.editable;\n          },\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n\n      selectElement.addEventListener(\"input\", event => {\n        const exportValue = getValue(/* isExport */ true);\n        storage.setValue(id, { value: exportValue });\n\n        event.preventDefault();\n\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id,\n            name: \"Keystroke\",\n            value: selectedValues,\n            changeEx: exportValue,\n            willCommit: false,\n            commitKey: 1,\n            keyDown: false,\n          },\n        });\n      });\n\n      this._setEventListeners(\n        selectElement,\n        null,\n        [\n          [\"focus\", \"Focus\"],\n          [\"blur\", \"Blur\"],\n          [\"mousedown\", \"Mouse Down\"],\n          [\"mouseenter\", \"Mouse Enter\"],\n          [\"mouseleave\", \"Mouse Exit\"],\n          [\"mouseup\", \"Mouse Up\"],\n          [\"input\", \"Action\"],\n          [\"input\", \"Validate\"],\n        ],\n        event => event.target.value\n      );\n    } else {\n      selectElement.addEventListener(\"input\", function (event) {\n        storage.setValue(id, { value: getValue(/* isExport */ true) });\n      });\n    }\n\n    if (this.data.combo) {\n      this._setTextStyle(selectElement);\n    } else {\n      // Just use the default font size...\n      // it's a bit hard to guess what is a good size.\n    }\n    this._setBackgroundColor(selectElement);\n    this._setDefaultPropertiesFromJS(selectElement);\n\n    this.container.append(selectElement);\n    return this.container;\n  }\n}\n\nclass PopupAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const { data, elements } = parameters;\n    super(parameters, { isRenderable: AnnotationElement._hasPopupData(data) });\n    this.elements = elements;\n  }\n\n  render() {\n    this.container.classList.add(\"popupAnnotation\");\n\n    const popup = new PopupElement({\n      container: this.container,\n      color: this.data.color,\n      titleObj: this.data.titleObj,\n      modificationDate: this.data.modificationDate,\n      contentsObj: this.data.contentsObj,\n      richText: this.data.richText,\n      rect: this.data.rect,\n      parentRect: this.data.parentRect || null,\n      parent: this.parent,\n      elements: this.elements,\n      open: this.data.open,\n    });\n\n    const elementIds = [];\n    for (const element of this.elements) {\n      element.popup = popup;\n      elementIds.push(element.data.id);\n      element.addHighlightArea();\n    }\n\n    this.container.setAttribute(\n      \"aria-controls\",\n      elementIds.map(id => `${AnnotationPrefix}${id}`).join(\",\")\n    );\n\n    return this.container;\n  }\n}\n\nclass PopupElement {\n  #boundKeyDown = this.#keyDown.bind(this);\n\n  #boundHide = this.#hide.bind(this);\n\n  #boundShow = this.#show.bind(this);\n\n  #boundToggle = this.#toggle.bind(this);\n\n  #color = null;\n\n  #container = null;\n\n  #contentsObj = null;\n\n  #dateObj = null;\n\n  #elements = null;\n\n  #parent = null;\n\n  #parentRect = null;\n\n  #pinned = false;\n\n  #popup = null;\n\n  #rect = null;\n\n  #richText = null;\n\n  #titleObj = null;\n\n  #wasVisible = false;\n\n  constructor({\n    container,\n    color,\n    elements,\n    titleObj,\n    modificationDate,\n    contentsObj,\n    richText,\n    parent,\n    rect,\n    parentRect,\n    open,\n  }) {\n    this.#container = container;\n    this.#titleObj = titleObj;\n    this.#contentsObj = contentsObj;\n    this.#richText = richText;\n    this.#parent = parent;\n    this.#color = color;\n    this.#rect = rect;\n    this.#parentRect = parentRect;\n    this.#elements = elements;\n\n    // The modification date is shown in the popup instead of the creation\n    // date if it is available and can be parsed correctly, which is\n    // consistent with other viewers such as Adobe Acrobat.\n    this.#dateObj = PDFDateString.toDateObject(modificationDate);\n\n    this.trigger = elements.flatMap(e => e.getElementsToTriggerPopup());\n    // Attach the event listeners to the trigger element.\n    for (const element of this.trigger) {\n      element.addEventListener(\"click\", this.#boundToggle);\n      element.addEventListener(\"mouseenter\", this.#boundShow);\n      element.addEventListener(\"mouseleave\", this.#boundHide);\n      element.classList.add(\"popupTriggerArea\");\n    }\n\n    // Attach the event listener to toggle the popup with the keyboard.\n    for (const element of elements) {\n      element.container?.addEventListener(\"keydown\", this.#boundKeyDown);\n    }\n\n    this.#container.hidden = true;\n    if (open) {\n      this.#toggle();\n    }\n\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"TESTING\")) {\n      // Since the popup is lazily created, we need to ensure that it'll be\n      // created and displayed during reference tests.\n      this.#parent.popupShow.push(async () => {\n        if (this.#container.hidden) {\n          this.#show();\n        }\n      });\n    }\n  }\n\n  render() {\n    if (this.#popup) {\n      return;\n    }\n\n    const {\n      page: { view },\n      viewport: {\n        rawDims: { pageWidth, pageHeight, pageX, pageY },\n      },\n    } = this.#parent;\n    const popup = (this.#popup = document.createElement(\"div\"));\n    popup.className = \"popup\";\n\n    if (this.#color) {\n      const baseColor = (popup.style.outlineColor = Util.makeHexColor(\n        ...this.#color\n      ));\n      if (\n        (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) ||\n        CSS.supports(\"background-color\", \"color-mix(in srgb, red 30%, white)\")\n      ) {\n        popup.style.backgroundColor = `color-mix(in srgb, ${baseColor} 30%, white)`;\n      } else {\n        // color-mix isn't supported in some browsers hence this version.\n        // See https://developer.mozilla.org/en-US/docs/Web/CSS/color_value/color-mix#browser_compatibility\n        // TODO: Use color-mix when it's supported everywhere.\n        // Enlighten the color.\n        const BACKGROUND_ENLIGHT = 0.7;\n        popup.style.backgroundColor = Util.makeHexColor(\n          ...this.#color.map(c =>\n            Math.floor(BACKGROUND_ENLIGHT * (255 - c) + c)\n          )\n        );\n      }\n    }\n\n    const header = document.createElement(\"span\");\n    header.className = \"header\";\n    const title = document.createElement(\"h1\");\n    header.append(title);\n    ({ dir: title.dir, str: title.textContent } = this.#titleObj);\n    popup.append(header);\n\n    if (this.#dateObj) {\n      const modificationDate = document.createElement(\"span\");\n      modificationDate.classList.add(\"popupDate\");\n      modificationDate.setAttribute(\n        \"data-l10n-id\",\n        \"pdfjs-annotation-date-string\"\n      );\n      modificationDate.setAttribute(\n        \"data-l10n-args\",\n        JSON.stringify({\n          date: this.#dateObj.toLocaleDateString(),\n          time: this.#dateObj.toLocaleTimeString(),\n        })\n      );\n      header.append(modificationDate);\n    }\n\n    const contentsObj = this.#contentsObj;\n    const richText = this.#richText;\n    if (\n      richText?.str &&\n      (!contentsObj?.str || contentsObj.str === richText.str)\n    ) {\n      XfaLayer.render({\n        xfaHtml: richText.html,\n        intent: \"richText\",\n        div: popup,\n      });\n      popup.lastChild.classList.add(\"richText\", \"popupContent\");\n    } else {\n      const contents = this._formatContents(contentsObj);\n      popup.append(contents);\n    }\n\n    let useParentRect = !!this.#parentRect;\n    let rect = useParentRect ? this.#parentRect : this.#rect;\n    for (const element of this.#elements) {\n      if (!rect || Util.intersect(element.data.rect, rect) !== null) {\n        rect = element.data.rect;\n        useParentRect = true;\n        break;\n      }\n    }\n\n    const normalizedRect = Util.normalizeRect([\n      rect[0],\n      view[3] - rect[1] + view[1],\n      rect[2],\n      view[3] - rect[3] + view[1],\n    ]);\n\n    const HORIZONTAL_SPACE_AFTER_ANNOTATION = 5;\n    const parentWidth = useParentRect\n      ? rect[2] - rect[0] + HORIZONTAL_SPACE_AFTER_ANNOTATION\n      : 0;\n    const popupLeft = normalizedRect[0] + parentWidth;\n    const popupTop = normalizedRect[1];\n\n    const { style } = this.#container;\n    style.left = `${(100 * (popupLeft - pageX)) / pageWidth}%`;\n    style.top = `${(100 * (popupTop - pageY)) / pageHeight}%`;\n\n    this.#container.append(popup);\n  }\n\n  /**\n   * Format the contents of the popup by adding newlines where necessary.\n   *\n   * @private\n   * @param {Object<string, string>} contentsObj\n   * @memberof PopupElement\n   * @returns {HTMLParagraphElement}\n   */\n  _formatContents({ str, dir }) {\n    const p = document.createElement(\"p\");\n    p.classList.add(\"popupContent\");\n    p.dir = dir;\n    const lines = str.split(/(?:\\r\\n?|\\n)/);\n    for (let i = 0, ii = lines.length; i < ii; ++i) {\n      const line = lines[i];\n      p.append(document.createTextNode(line));\n      if (i < ii - 1) {\n        p.append(document.createElement(\"br\"));\n      }\n    }\n    return p;\n  }\n\n  #keyDown(event) {\n    if (event.altKey || event.shiftKey || event.ctrlKey || event.metaKey) {\n      return;\n    }\n\n    if (event.key === \"Enter\" || (event.key === \"Escape\" && this.#pinned)) {\n      this.#toggle();\n    }\n  }\n\n  /**\n   * Toggle the visibility of the popup.\n   */\n  #toggle() {\n    this.#pinned = !this.#pinned;\n    if (this.#pinned) {\n      this.#show();\n      this.#container.addEventListener(\"click\", this.#boundToggle);\n      this.#container.addEventListener(\"keydown\", this.#boundKeyDown);\n    } else {\n      this.#hide();\n      this.#container.removeEventListener(\"click\", this.#boundToggle);\n      this.#container.removeEventListener(\"keydown\", this.#boundKeyDown);\n    }\n  }\n\n  /**\n   * Show the popup.\n   */\n  #show() {\n    if (!this.#popup) {\n      this.render();\n    }\n    if (!this.isVisible) {\n      this.#container.hidden = false;\n      this.#container.style.zIndex =\n        parseInt(this.#container.style.zIndex) + 1000;\n    } else if (this.#pinned) {\n      this.#container.classList.add(\"focused\");\n    }\n  }\n\n  /**\n   * Hide the popup.\n   */\n  #hide() {\n    this.#container.classList.remove(\"focused\");\n    if (this.#pinned || !this.isVisible) {\n      return;\n    }\n    this.#container.hidden = true;\n    this.#container.style.zIndex =\n      parseInt(this.#container.style.zIndex) - 1000;\n  }\n\n  forceHide() {\n    this.#wasVisible = this.isVisible;\n    if (!this.#wasVisible) {\n      return;\n    }\n    this.#container.hidden = true;\n  }\n\n  maybeShow() {\n    if (!this.#wasVisible) {\n      return;\n    }\n    this.#wasVisible = false;\n    this.#container.hidden = false;\n  }\n\n  get isVisible() {\n    return this.#container.hidden === false;\n  }\n}\n\nclass FreeTextAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, { isRenderable: true, ignoreBorder: true });\n    this.textContent = parameters.data.textContent;\n    this.textPosition = parameters.data.textPosition;\n    this.annotationEditorType = AnnotationEditorType.FREETEXT;\n  }\n\n  render() {\n    this.container.classList.add(\"freeTextAnnotation\");\n\n    if (this.textContent) {\n      const content = document.createElement(\"div\");\n      content.classList.add(\"annotationTextContent\");\n      content.setAttribute(\"role\", \"comment\");\n      for (const line of this.textContent) {\n        const lineSpan = document.createElement(\"span\");\n        lineSpan.textContent = line;\n        content.append(lineSpan);\n      }\n      this.container.append(content);\n    }\n\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n\n    this._editOnDoubleClick();\n\n    return this.container;\n  }\n\n  get _isEditable() {\n    return this.data.hasOwnCanvas;\n  }\n}\n\nclass LineAnnotationElement extends AnnotationElement {\n  #line = null;\n\n  constructor(parameters) {\n    super(parameters, { isRenderable: true, ignoreBorder: true });\n  }\n\n  render() {\n    this.container.classList.add(\"lineAnnotation\");\n\n    // Create an invisible line with the same starting and ending coordinates\n    // that acts as the trigger for the popup. Only the line itself should\n    // trigger the popup, not the entire container.\n    const data = this.data;\n    const { width, height } = getRectDims(data.rect);\n    const svg = this.svgFactory.create(\n      width,\n      height,\n      /* skipDimensions = */ true\n    );\n\n    // PDF coordinates are calculated from a bottom left origin, so transform\n    // the line coordinates to a top left origin for the SVG element.\n    const line = (this.#line = this.svgFactory.createElement(\"svg:line\"));\n    line.setAttribute(\"x1\", data.rect[2] - data.lineCoordinates[0]);\n    line.setAttribute(\"y1\", data.rect[3] - data.lineCoordinates[1]);\n    line.setAttribute(\"x2\", data.rect[2] - data.lineCoordinates[2]);\n    line.setAttribute(\"y2\", data.rect[3] - data.lineCoordinates[3]);\n    // Ensure that the 'stroke-width' is always non-zero, since otherwise it\n    // won't be possible to open/close the popup (note e.g. issue 11122).\n    line.setAttribute(\"stroke-width\", data.borderStyle.width || 1);\n    line.setAttribute(\"stroke\", \"transparent\");\n    line.setAttribute(\"fill\", \"transparent\");\n\n    svg.append(line);\n    this.container.append(svg);\n\n    // Create the popup ourselves so that we can bind it to the line instead\n    // of to the entire container (which is the default).\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n\n    return this.container;\n  }\n\n  getElementsToTriggerPopup() {\n    return this.#line;\n  }\n\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\n\nclass SquareAnnotationElement extends AnnotationElement {\n  #square = null;\n\n  constructor(parameters) {\n    super(parameters, { isRenderable: true, ignoreBorder: true });\n  }\n\n  render() {\n    this.container.classList.add(\"squareAnnotation\");\n\n    // Create an invisible square with the same rectangle that acts as the\n    // trigger for the popup. Only the square itself should trigger the\n    // popup, not the entire container.\n    const data = this.data;\n    const { width, height } = getRectDims(data.rect);\n    const svg = this.svgFactory.create(\n      width,\n      height,\n      /* skipDimensions = */ true\n    );\n\n    // The browser draws half of the borders inside the square and half of\n    // the borders outside the square by default. This behavior cannot be\n    // changed programmatically, so correct for that here.\n    const borderWidth = data.borderStyle.width;\n    const square = (this.#square = this.svgFactory.createElement(\"svg:rect\"));\n    square.setAttribute(\"x\", borderWidth / 2);\n    square.setAttribute(\"y\", borderWidth / 2);\n    square.setAttribute(\"width\", width - borderWidth);\n    square.setAttribute(\"height\", height - borderWidth);\n    // Ensure that the 'stroke-width' is always non-zero, since otherwise it\n    // won't be possible to open/close the popup (note e.g. issue 11122).\n    square.setAttribute(\"stroke-width\", borderWidth || 1);\n    square.setAttribute(\"stroke\", \"transparent\");\n    square.setAttribute(\"fill\", \"transparent\");\n\n    svg.append(square);\n    this.container.append(svg);\n\n    // Create the popup ourselves so that we can bind it to the square instead\n    // of to the entire container (which is the default).\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n\n    return this.container;\n  }\n\n  getElementsToTriggerPopup() {\n    return this.#square;\n  }\n\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\n\nclass CircleAnnotationElement extends AnnotationElement {\n  #circle = null;\n\n  constructor(parameters) {\n    super(parameters, { isRenderable: true, ignoreBorder: true });\n  }\n\n  render() {\n    this.container.classList.add(\"circleAnnotation\");\n\n    // Create an invisible circle with the same ellipse that acts as the\n    // trigger for the popup. Only the circle itself should trigger the\n    // popup, not the entire container.\n    const data = this.data;\n    const { width, height } = getRectDims(data.rect);\n    const svg = this.svgFactory.create(\n      width,\n      height,\n      /* skipDimensions = */ true\n    );\n\n    // The browser draws half of the borders inside the circle and half of\n    // the borders outside the circle by default. This behavior cannot be\n    // changed programmatically, so correct for that here.\n    const borderWidth = data.borderStyle.width;\n    const circle = (this.#circle =\n      this.svgFactory.createElement(\"svg:ellipse\"));\n    circle.setAttribute(\"cx\", width / 2);\n    circle.setAttribute(\"cy\", height / 2);\n    circle.setAttribute(\"rx\", width / 2 - borderWidth / 2);\n    circle.setAttribute(\"ry\", height / 2 - borderWidth / 2);\n    // Ensure that the 'stroke-width' is always non-zero, since otherwise it\n    // won't be possible to open/close the popup (note e.g. issue 11122).\n    circle.setAttribute(\"stroke-width\", borderWidth || 1);\n    circle.setAttribute(\"stroke\", \"transparent\");\n    circle.setAttribute(\"fill\", \"transparent\");\n\n    svg.append(circle);\n    this.container.append(svg);\n\n    // Create the popup ourselves so that we can bind it to the circle instead\n    // of to the entire container (which is the default).\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n\n    return this.container;\n  }\n\n  getElementsToTriggerPopup() {\n    return this.#circle;\n  }\n\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\n\nclass PolylineAnnotationElement extends AnnotationElement {\n  #polyline = null;\n\n  constructor(parameters) {\n    super(parameters, { isRenderable: true, ignoreBorder: true });\n\n    this.containerClassName = \"polylineAnnotation\";\n    this.svgElementName = \"svg:polyline\";\n  }\n\n  render() {\n    this.container.classList.add(this.containerClassName);\n\n    // Create an invisible polyline with the same points that acts as the\n    // trigger for the popup. Only the polyline itself should trigger the\n    // popup, not the entire container.\n    const data = this.data;\n    const { width, height } = getRectDims(data.rect);\n    const svg = this.svgFactory.create(\n      width,\n      height,\n      /* skipDimensions = */ true\n    );\n\n    // Convert the vertices array to a single points string that the SVG\n    // polyline element expects (\"x1,y1 x2,y2 ...\"). PDF coordinates are\n    // calculated from a bottom left origin, so transform the polyline\n    // coordinates to a top left origin for the SVG element.\n    let points = [];\n    for (const coordinate of data.vertices) {\n      const x = coordinate.x - data.rect[0];\n      const y = data.rect[3] - coordinate.y;\n      points.push(x + \",\" + y);\n    }\n    points = points.join(\" \");\n\n    const polyline = (this.#polyline = this.svgFactory.createElement(\n      this.svgElementName\n    ));\n    polyline.setAttribute(\"points\", points);\n    // Ensure that the 'stroke-width' is always non-zero, since otherwise it\n    // won't be possible to open/close the popup (note e.g. issue 11122).\n    polyline.setAttribute(\"stroke-width\", data.borderStyle.width || 1);\n    polyline.setAttribute(\"stroke\", \"transparent\");\n    polyline.setAttribute(\"fill\", \"transparent\");\n\n    svg.append(polyline);\n    this.container.append(svg);\n\n    // Create the popup ourselves so that we can bind it to the polyline\n    // instead of to the entire container (which is the default).\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n\n    return this.container;\n  }\n\n  getElementsToTriggerPopup() {\n    return this.#polyline;\n  }\n\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\n\nclass PolygonAnnotationElement extends PolylineAnnotationElement {\n  constructor(parameters) {\n    // Polygons are specific forms of polylines, so reuse their logic.\n    super(parameters);\n\n    this.containerClassName = \"polygonAnnotation\";\n    this.svgElementName = \"svg:polygon\";\n  }\n}\n\nclass CaretAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, { isRenderable: true, ignoreBorder: true });\n  }\n\n  render() {\n    this.container.classList.add(\"caretAnnotation\");\n\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n}\n\nclass InkAnnotationElement extends AnnotationElement {\n  #polylines = [];\n\n  constructor(parameters) {\n    super(parameters, { isRenderable: true, ignoreBorder: true });\n\n    this.containerClassName = \"inkAnnotation\";\n\n    // Use the polyline SVG element since it allows us to use coordinates\n    // directly and to draw both straight lines and curves.\n    this.svgElementName = \"svg:polyline\";\n    this.annotationEditorType = AnnotationEditorType.INK;\n  }\n\n  render() {\n    this.container.classList.add(this.containerClassName);\n\n    // Create an invisible polyline with the same points that acts as the\n    // trigger for the popup.\n    const data = this.data;\n    const { width, height } = getRectDims(data.rect);\n    const svg = this.svgFactory.create(\n      width,\n      height,\n      /* skipDimensions = */ true\n    );\n\n    for (const inkList of data.inkLists) {\n      // Convert the ink list to a single points string that the SVG\n      // polyline element expects (\"x1,y1 x2,y2 ...\"). PDF coordinates are\n      // calculated from a bottom left origin, so transform the polyline\n      // coordinates to a top left origin for the SVG element.\n      let points = [];\n      for (const coordinate of inkList) {\n        const x = coordinate.x - data.rect[0];\n        const y = data.rect[3] - coordinate.y;\n        points.push(`${x},${y}`);\n      }\n      points = points.join(\" \");\n\n      const polyline = this.svgFactory.createElement(this.svgElementName);\n      this.#polylines.push(polyline);\n      polyline.setAttribute(\"points\", points);\n      // Ensure that the 'stroke-width' is always non-zero, since otherwise it\n      // won't be possible to open/close the popup (note e.g. issue 11122).\n      polyline.setAttribute(\"stroke-width\", data.borderStyle.width || 1);\n      polyline.setAttribute(\"stroke\", \"transparent\");\n      polyline.setAttribute(\"fill\", \"transparent\");\n\n      // Create the popup ourselves so that we can bind it to the polyline\n      // instead of to the entire container (which is the default).\n      if (!data.popupRef && this.hasPopupData) {\n        this._createPopup();\n      }\n\n      svg.append(polyline);\n    }\n\n    this.container.append(svg);\n    return this.container;\n  }\n\n  getElementsToTriggerPopup() {\n    return this.#polylines;\n  }\n\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\n\nclass HighlightAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true,\n    });\n  }\n\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n\n    this.container.classList.add(\"highlightAnnotation\");\n    return this.container;\n  }\n}\n\nclass UnderlineAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true,\n    });\n  }\n\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n\n    this.container.classList.add(\"underlineAnnotation\");\n    return this.container;\n  }\n}\n\nclass SquigglyAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true,\n    });\n  }\n\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n\n    this.container.classList.add(\"squigglyAnnotation\");\n    return this.container;\n  }\n}\n\nclass StrikeOutAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true,\n    });\n  }\n\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n\n    this.container.classList.add(\"strikeoutAnnotation\");\n    return this.container;\n  }\n}\n\nclass StampAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, { isRenderable: true, ignoreBorder: true });\n  }\n\n  render() {\n    this.container.classList.add(\"stampAnnotation\");\n\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n}\n\nclass FileAttachmentAnnotationElement extends AnnotationElement {\n  #trigger = null;\n\n  constructor(parameters) {\n    super(parameters, { isRenderable: true });\n\n    const { filename, content } = this.data.file;\n    this.filename = getFilenameFromUrl(filename, /* onlyStripPath = */ true);\n    this.content = content;\n\n    this.linkService.eventBus?.dispatch(\"fileattachmentannotation\", {\n      source: this,\n      filename,\n      content,\n    });\n  }\n\n  render() {\n    this.container.classList.add(\"fileAttachmentAnnotation\");\n\n    const { container, data } = this;\n    let trigger;\n    if (data.hasAppearance || data.fillAlpha === 0) {\n      trigger = document.createElement(\"div\");\n    } else {\n      // Unfortunately it seems that it's not clearly specified exactly what\n      // names are actually valid, since Table 184 contains:\n      //   Conforming readers shall provide predefined icon appearances for at\n      //   least the following standard names: GraphPushPin, PaperclipTag.\n      //   Additional names may be supported as well. Default value: PushPin.\n      trigger = document.createElement(\"img\");\n      trigger.src = `${this.imageResourcesPath}annotation-${\n        /paperclip/i.test(data.name) ? \"paperclip\" : \"pushpin\"\n      }.svg`;\n\n      if (data.fillAlpha && data.fillAlpha < 1) {\n        trigger.style = `filter: opacity(${Math.round(\n          data.fillAlpha * 100\n        )}%);`;\n\n        if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"TESTING\")) {\n          this.container.classList.add(\"hasFillAlpha\");\n        }\n      }\n    }\n    trigger.addEventListener(\"dblclick\", this.#download.bind(this));\n    this.#trigger = trigger;\n\n    const { isMac } = FeatureTest.platform;\n    container.addEventListener(\"keydown\", evt => {\n      if (evt.key === \"Enter\" && (isMac ? evt.metaKey : evt.ctrlKey)) {\n        this.#download();\n      }\n    });\n\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    } else {\n      trigger.classList.add(\"popupTriggerArea\");\n    }\n\n    container.append(trigger);\n    return container;\n  }\n\n  getElementsToTriggerPopup() {\n    return this.#trigger;\n  }\n\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n\n  /**\n   * Download the file attachment associated with this annotation.\n   */\n  #download() {\n    this.downloadManager?.openOrDownloadData(this.content, this.filename);\n  }\n}\n\n/**\n * @typedef {Object} AnnotationLayerParameters\n * @property {PageViewport} viewport\n * @property {HTMLDivElement} div\n * @property {Array} annotations\n * @property {PDFPageProxy} page\n * @property {IPDFLinkService} linkService\n * @property {IDownloadManager} downloadManager\n * @property {AnnotationStorage} [annotationStorage]\n * @property {string} [imageResourcesPath] - Path for image resources, mainly\n *   for annotation icons. Include trailing slash.\n * @property {boolean} renderForms\n * @property {boolean} [enableScripting] - Enable embedded script execution.\n * @property {boolean} [hasJSActions] - Some fields have JS actions.\n *   The default value is `false`.\n * @property {Object<string, Array<Object>> | null} [fieldObjects]\n * @property {Map<string, HTMLCanvasElement>} [annotationCanvasMap]\n * @property {TextAccessibilityManager} [accessibilityManager]\n */\n\n/**\n * Manage the layer containing all the annotations.\n */\nclass AnnotationLayer {\n  #accessibilityManager = null;\n\n  #annotationCanvasMap = null;\n\n  #editableAnnotations = new Map();\n\n  constructor({\n    div,\n    accessibilityManager,\n    annotationCanvasMap,\n    page,\n    viewport,\n  }) {\n    this.div = div;\n    this.#accessibilityManager = accessibilityManager;\n    this.#annotationCanvasMap = annotationCanvasMap;\n    this.page = page;\n    this.viewport = viewport;\n    this.zIndex = 0;\n\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"TESTING\")) {\n      // For testing purposes.\n      Object.defineProperty(this, \"showPopups\", {\n        value: async () => {\n          for (const show of this.popupShow) {\n            await show();\n          }\n        },\n      });\n      this.popupShow = [];\n    }\n  }\n\n  #appendElement(element, id) {\n    const contentElement = element.firstChild || element;\n    contentElement.id = `${AnnotationPrefix}${id}`;\n\n    this.div.append(element);\n    this.#accessibilityManager?.moveElementInDOM(\n      this.div,\n      element,\n      contentElement,\n      /* isRemovable = */ false\n    );\n  }\n\n  /**\n   * Render a new annotation layer with all annotation elements.\n   *\n   * @param {AnnotationLayerParameters} params\n   * @memberof AnnotationLayer\n   */\n  async render(params) {\n    const { annotations } = params;\n    const layer = this.div;\n    setLayerDimensions(layer, this.viewport);\n\n    const popupToElements = new Map();\n    const elementParams = {\n      data: null,\n      layer,\n      linkService: params.linkService,\n      downloadManager: params.downloadManager,\n      imageResourcesPath: params.imageResourcesPath || \"\",\n      renderForms: params.renderForms !== false,\n      svgFactory: new DOMSVGFactory(),\n      annotationStorage: params.annotationStorage || new AnnotationStorage(),\n      enableScripting: params.enableScripting === true,\n      hasJSActions: params.hasJSActions,\n      fieldObjects: params.fieldObjects,\n      parent: this,\n      elements: null,\n    };\n\n    for (const data of annotations) {\n      if (data.noHTML) {\n        continue;\n      }\n      const isPopupAnnotation = data.annotationType === AnnotationType.POPUP;\n      if (!isPopupAnnotation) {\n        const { width, height } = getRectDims(data.rect);\n        if (width <= 0 || height <= 0) {\n          continue; // Ignore empty annotations.\n        }\n      } else {\n        const elements = popupToElements.get(data.id);\n        if (!elements) {\n          // Ignore popup annotations without a corresponding annotation.\n          continue;\n        }\n        elementParams.elements = elements;\n      }\n      elementParams.data = data;\n      const element = AnnotationElementFactory.create(elementParams);\n\n      if (!element.isRenderable) {\n        continue;\n      }\n\n      if (!isPopupAnnotation && data.popupRef) {\n        const elements = popupToElements.get(data.popupRef);\n        if (!elements) {\n          popupToElements.set(data.popupRef, [element]);\n        } else {\n          elements.push(element);\n        }\n      }\n\n      if (element.annotationEditorType > 0) {\n        this.#editableAnnotations.set(element.data.id, element);\n      }\n\n      const rendered = element.render();\n      if (data.hidden) {\n        rendered.style.visibility = \"hidden\";\n      }\n      this.#appendElement(rendered, data.id);\n    }\n\n    this.#setAnnotationCanvasMap();\n  }\n\n  /**\n   * Update the annotation elements on existing annotation layer.\n   *\n   * @param {AnnotationLayerParameters} viewport\n   * @memberof AnnotationLayer\n   */\n  update({ viewport }) {\n    const layer = this.div;\n    this.viewport = viewport;\n    setLayerDimensions(layer, { rotation: viewport.rotation });\n\n    this.#setAnnotationCanvasMap();\n    layer.hidden = false;\n  }\n\n  #setAnnotationCanvasMap() {\n    if (!this.#annotationCanvasMap) {\n      return;\n    }\n    const layer = this.div;\n    for (const [id, canvas] of this.#annotationCanvasMap) {\n      const element = layer.querySelector(`[data-annotation-id=\"${id}\"]`);\n      if (!element) {\n        continue;\n      }\n\n      const { firstChild } = element;\n      if (!firstChild) {\n        element.append(canvas);\n      } else if (firstChild.nodeName === \"CANVAS\") {\n        firstChild.replaceWith(canvas);\n      } else {\n        firstChild.before(canvas);\n      }\n    }\n    this.#annotationCanvasMap.clear();\n  }\n\n  getEditableAnnotations() {\n    return Array.from(this.#editableAnnotations.values());\n  }\n\n  getEditableAnnotation(id) {\n    return this.#editableAnnotations.get(id);\n  }\n}\n\nexport {\n  AnnotationLayer,\n  FreeTextAnnotationElement,\n  InkAnnotationElement,\n  StampAnnotationElement,\n};\n","/* Copyright 2020 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { objectFromMap, unreachable } from \"../shared/util.js\";\nimport { AnnotationEditor } from \"./editor/editor.js\";\nimport { MurmurHash3_64 } from \"../shared/murmurhash3.js\";\n\nconst SerializableEmpty = Object.freeze({\n  map: null,\n  hash: \"\",\n  transfer: undefined,\n});\n\n/**\n * Key/value storage for annotation data in forms.\n */\nclass AnnotationStorage {\n  #modified = false;\n\n  #storage = new Map();\n\n  constructor() {\n    // Callbacks to signal when the modification state is set or reset.\n    // This is used by the viewer to only bind on `beforeunload` if forms\n    // are actually edited to prevent doing so unconditionally since that\n    // can have undesirable effects.\n    this.onSetModified = null;\n    this.onResetModified = null;\n    this.onAnnotationEditor = null;\n  }\n\n  /**\n   * Get the value for a given key if it exists, or return the default value.\n   * @param {string} key\n   * @param {Object} defaultValue\n   * @returns {Object}\n   */\n  getValue(key, defaultValue) {\n    const value = this.#storage.get(key);\n    if (value === undefined) {\n      return defaultValue;\n    }\n\n    return Object.assign(defaultValue, value);\n  }\n\n  /**\n   * Get the value for a given key.\n   * @param {string} key\n   * @returns {Object}\n   */\n  getRawValue(key) {\n    return this.#storage.get(key);\n  }\n\n  /**\n   * Remove a value from the storage.\n   * @param {string} key\n   */\n  remove(key) {\n    this.#storage.delete(key);\n\n    if (this.#storage.size === 0) {\n      this.resetModified();\n    }\n\n    if (typeof this.onAnnotationEditor === \"function\") {\n      for (const value of this.#storage.values()) {\n        if (value instanceof AnnotationEditor) {\n          return;\n        }\n      }\n      this.onAnnotationEditor(null);\n    }\n  }\n\n  /**\n   * Set the value for a given key\n   * @param {string} key\n   * @param {Object} value\n   */\n  setValue(key, value) {\n    const obj = this.#storage.get(key);\n    let modified = false;\n    if (obj !== undefined) {\n      for (const [entry, val] of Object.entries(value)) {\n        if (obj[entry] !== val) {\n          modified = true;\n          obj[entry] = val;\n        }\n      }\n    } else {\n      modified = true;\n      this.#storage.set(key, value);\n    }\n    if (modified) {\n      this.#setModified();\n    }\n\n    if (\n      value instanceof AnnotationEditor &&\n      typeof this.onAnnotationEditor === \"function\"\n    ) {\n      this.onAnnotationEditor(value.constructor._type);\n    }\n  }\n\n  /**\n   * Check if the storage contains the given key.\n   * @param {string} key\n   * @returns {boolean}\n   */\n  has(key) {\n    return this.#storage.has(key);\n  }\n\n  /**\n   * @returns {Object | null}\n   */\n  getAll() {\n    return this.#storage.size > 0 ? objectFromMap(this.#storage) : null;\n  }\n\n  /**\n   * @param {Object} obj\n   */\n  setAll(obj) {\n    for (const [key, val] of Object.entries(obj)) {\n      this.setValue(key, val);\n    }\n  }\n\n  get size() {\n    return this.#storage.size;\n  }\n\n  #setModified() {\n    if (!this.#modified) {\n      this.#modified = true;\n      if (typeof this.onSetModified === \"function\") {\n        this.onSetModified();\n      }\n    }\n  }\n\n  resetModified() {\n    if (this.#modified) {\n      this.#modified = false;\n      if (typeof this.onResetModified === \"function\") {\n        this.onResetModified();\n      }\n    }\n  }\n\n  /**\n   * @returns {PrintAnnotationStorage}\n   */\n  get print() {\n    return new PrintAnnotationStorage(this);\n  }\n\n  /**\n   * PLEASE NOTE: Only intended for usage within the API itself.\n   * @ignore\n   */\n  get serializable() {\n    if (this.#storage.size === 0) {\n      return SerializableEmpty;\n    }\n    const map = new Map(),\n      hash = new MurmurHash3_64(),\n      transfer = [];\n    const context = Object.create(null);\n    let hasBitmap = false;\n\n    for (const [key, val] of this.#storage) {\n      const serialized =\n        val instanceof AnnotationEditor\n          ? val.serialize(/* isForCopying = */ false, context)\n          : val;\n      if (serialized) {\n        map.set(key, serialized);\n\n        hash.update(`${key}:${JSON.stringify(serialized)}`);\n        hasBitmap ||= !!serialized.bitmap;\n      }\n    }\n\n    if (hasBitmap) {\n      // We must transfer the bitmap data separately, since it can be changed\n      // during serialization with SVG images.\n      for (const value of map.values()) {\n        if (value.bitmap) {\n          transfer.push(value.bitmap);\n        }\n      }\n    }\n\n    return map.size > 0\n      ? { map, hash: hash.hexdigest(), transfer }\n      : SerializableEmpty;\n  }\n}\n\n/**\n * A special `AnnotationStorage` for use during printing, where the serializable\n * data is *frozen* upon initialization, to prevent scripting from modifying its\n * contents. (Necessary since printing is triggered synchronously in browsers.)\n */\nclass PrintAnnotationStorage extends AnnotationStorage {\n  #serializable;\n\n  constructor(parent) {\n    super();\n    const { map, hash, transfer } = parent.serializable;\n    // Create a *copy* of the data, since Objects are passed by reference in JS.\n    const clone = structuredClone(map, transfer ? { transfer } : null);\n\n    this.#serializable = { map: clone, hash, transfer };\n  }\n\n  /**\n   * @returns {PrintAnnotationStorage}\n   */\n  // eslint-disable-next-line getter-return\n  get print() {\n    unreachable(\"Should not call PrintAnnotationStorage.print\");\n  }\n\n  /**\n   * PLEASE NOTE: Only intended for usage within the API itself.\n   * @ignore\n   */\n  get serializable() {\n    return this.#serializable;\n  }\n}\n\nexport { AnnotationStorage, PrintAnnotationStorage, SerializableEmpty };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @module pdfjsLib\n */\n\nimport {\n  AbortException,\n  AnnotationMode,\n  assert,\n  getVerbosityLevel,\n  info,\n  InvalidPDFException,\n  isArrayBuffer,\n  isNodeJS,\n  MAX_IMAGE_SIZE_TO_CACHE,\n  MissingPDFException,\n  PasswordException,\n  PromiseCapability,\n  RenderingIntentFlag,\n  setVerbosityLevel,\n  shadow,\n  stringToBytes,\n  UnexpectedResponseException,\n  UnknownErrorException,\n  unreachable,\n  warn,\n} from \"../shared/util.js\";\nimport {\n  AnnotationStorage,\n  PrintAnnotationStorage,\n  SerializableEmpty,\n} from \"./annotation_storage.js\";\nimport {\n  DOMCanvasFactory,\n  DOMCMapReaderFactory,\n  DOMFilterFactory,\n  DOMStandardFontDataFactory,\n  isDataScheme,\n  isValidFetchUrl,\n  PageViewport,\n  RenderingCancelledException,\n  StatTimer,\n} from \"./display_utils.js\";\nimport { FontFaceObject, FontLoader } from \"./font_loader.js\";\nimport {\n  NodeCanvasFactory,\n  NodeCMapReaderFactory,\n  NodeFilterFactory,\n  NodeStandardFontDataFactory,\n} from \"display-node_utils\";\nimport { CanvasGraphics } from \"./canvas.js\";\nimport { GlobalWorkerOptions } from \"./worker_options.js\";\nimport { MessageHandler } from \"../shared/message_handler.js\";\nimport { Metadata } from \"./metadata.js\";\nimport { OptionalContentConfig } from \"./optional_content_config.js\";\nimport { PDFDataTransportStream } from \"./transport_stream.js\";\nimport { PDFFetchStream } from \"display-fetch_stream\";\nimport { PDFNetworkStream } from \"display-network\";\nimport { PDFNodeStream } from \"display-node_stream\";\nimport { XfaText } from \"./xfa_text.js\";\n\nconst DEFAULT_RANGE_CHUNK_SIZE = 65536; // 2^16 = 65536\nconst RENDERING_CANCELLED_TIMEOUT = 100; // ms\nconst DELAYED_CLEANUP_TIMEOUT = 5000; // ms\n\nconst DefaultCanvasFactory =\n  typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"GENERIC\") && isNodeJS\n    ? NodeCanvasFactory\n    : DOMCanvasFactory;\nconst DefaultCMapReaderFactory =\n  typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"GENERIC\") && isNodeJS\n    ? NodeCMapReaderFactory\n    : DOMCMapReaderFactory;\nconst DefaultFilterFactory =\n  typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"GENERIC\") && isNodeJS\n    ? NodeFilterFactory\n    : DOMFilterFactory;\nconst DefaultStandardFontDataFactory =\n  typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"GENERIC\") && isNodeJS\n    ? NodeStandardFontDataFactory\n    : DOMStandardFontDataFactory;\n\n/**\n * @typedef { Int8Array | Uint8Array | Uint8ClampedArray |\n *            Int16Array | Uint16Array |\n *            Int32Array | Uint32Array | Float32Array |\n *            Float64Array\n * } TypedArray\n */\n\n/**\n * @typedef { TypedArray | ArrayBuffer | Array<number> | string } BinaryData\n */\n\n/**\n * @typedef {Object} RefProxy\n * @property {number} num\n * @property {number} gen\n */\n\n/**\n * Document initialization / loading parameters object.\n *\n * @typedef {Object} DocumentInitParameters\n * @property {string | URL} [url] - The URL of the PDF.\n * @property {BinaryData} [data] - Binary PDF data.\n *   Use TypedArrays (Uint8Array) to improve the memory usage. If PDF data is\n *   BASE64-encoded, use `atob()` to convert it to a binary string first.\n *\n *   NOTE: If TypedArrays are used they will generally be transferred to the\n *   worker-thread. This will help reduce main-thread memory usage, however\n *   it will take ownership of the TypedArrays.\n * @property {Object} [httpHeaders] - Basic authentication headers.\n * @property {boolean} [withCredentials] - Indicates whether or not\n *   cross-site Access-Control requests should be made using credentials such\n *   as cookies or authorization headers. The default is `false`.\n * @property {string} [password] - For decrypting password-protected PDFs.\n * @property {number} [length] - The PDF file length. It's used for progress\n *   reports and range requests operations.\n * @property {PDFDataRangeTransport} [range] - Allows for using a custom range\n *   transport implementation.\n * @property {number} [rangeChunkSize] - Specify maximum number of bytes fetched\n *   per range request. The default value is {@link DEFAULT_RANGE_CHUNK_SIZE}.\n * @property {PDFWorker} [worker] - The worker that will be used for loading and\n *   parsing the PDF data.\n * @property {number} [verbosity] - Controls the logging level; the constants\n *   from {@link VerbosityLevel} should be used.\n * @property {string} [docBaseUrl] - The base URL of the document, used when\n *   attempting to recover valid absolute URLs for annotations, and outline\n *   items, that (incorrectly) only specify relative URLs.\n * @property {string} [cMapUrl] - The URL where the predefined Adobe CMaps are\n *   located. Include the trailing slash.\n * @property {boolean} [cMapPacked] - Specifies if the Adobe CMaps are binary\n *   packed or not. The default value is `true`.\n * @property {Object} [CMapReaderFactory] - The factory that will be used when\n *   reading built-in CMap files. Providing a custom factory is useful for\n *   environments without Fetch API or `XMLHttpRequest` support, such as\n *   Node.js. The default value is {DOMCMapReaderFactory}.\n * @property {boolean} [useSystemFonts] - When `true`, fonts that aren't\n *   embedded in the PDF document will fallback to a system font.\n *   The default value is `true` in web environments and `false` in Node.js;\n *   unless `disableFontFace === true` in which case this defaults to `false`\n *   regardless of the environment (to prevent completely broken fonts).\n * @property {string} [standardFontDataUrl] - The URL where the standard font\n *   files are located. Include the trailing slash.\n * @property {Object} [StandardFontDataFactory] - The factory that will be used\n *   when reading the standard font files. Providing a custom factory is useful\n *   for environments without Fetch API or `XMLHttpRequest` support, such as\n *   Node.js. The default value is {DOMStandardFontDataFactory}.\n * @property {boolean} [useWorkerFetch] - Enable using the Fetch API in the\n *   worker-thread when reading CMap and standard font files. When `true`,\n *   the `CMapReaderFactory` and `StandardFontDataFactory` options are ignored.\n *   The default value is `true` in web environments and `false` in Node.js.\n * @property {boolean} [stopAtErrors] - Reject certain promises, e.g.\n *   `getOperatorList`, `getTextContent`, and `RenderTask`, when the associated\n *   PDF data cannot be successfully parsed, instead of attempting to recover\n *   whatever possible of the data. The default value is `false`.\n * @property {number} [maxImageSize] - The maximum allowed image size in total\n *   pixels, i.e. width * height. Images above this value will not be rendered.\n *   Use -1 for no limit, which is also the default value.\n * @property {boolean} [isEvalSupported] - Determines if we can evaluate strings\n *   as JavaScript. Primarily used to improve performance of font rendering, and\n *   when parsing PDF functions. The default value is `true`.\n * @property {boolean} [isOffscreenCanvasSupported] - Determines if we can use\n *   `OffscreenCanvas` in the worker. Primarily used to improve performance of\n *   image conversion/rendering.\n *   The default value is `true` in web environments and `false` in Node.js.\n * @property {number} [canvasMaxAreaInBytes] - The integer value is used to\n *   know when an image must be resized (uses `OffscreenCanvas` in the worker).\n *   If it's -1 then a possibly slow algorithm is used to guess the max value.\n * @property {boolean} [disableFontFace] - By default fonts are converted to\n *   OpenType fonts and loaded via the Font Loading API or `@font-face` rules.\n *   If disabled, fonts will be rendered using a built-in font renderer that\n *   constructs the glyphs with primitive path commands.\n *   The default value is `false` in web environments and `true` in Node.js.\n * @property {boolean} [fontExtraProperties] - Include additional properties,\n *   which are unused during rendering of PDF documents, when exporting the\n *   parsed font data from the worker-thread. This may be useful for debugging\n *   purposes (and backwards compatibility), but note that it will lead to\n *   increased memory usage. The default value is `false`.\n * @property {boolean} [enableXfa] - Render Xfa forms if any.\n *   The default value is `false`.\n * @property {HTMLDocument} [ownerDocument] - Specify an explicit document\n *   context to create elements with and to load resources, such as fonts,\n *   into. Defaults to the current document.\n * @property {boolean} [disableRange] - Disable range request loading of PDF\n *   files. When enabled, and if the server supports partial content requests,\n *   then the PDF will be fetched in chunks. The default value is `false`.\n * @property {boolean} [disableStream] - Disable streaming of PDF file data.\n *   By default PDF.js attempts to load PDF files in chunks. The default value\n *   is `false`.\n * @property {boolean} [disableAutoFetch] - Disable pre-fetching of PDF file\n *   data. When range requests are enabled PDF.js will automatically keep\n *   fetching more data even if it isn't needed to display the current page.\n *   The default value is `false`.\n *\n *   NOTE: It is also necessary to disable streaming, see above, in order for\n *   disabling of pre-fetching to work correctly.\n * @property {boolean} [pdfBug] - Enables special hooks for debugging PDF.js\n *   (see `web/debugger.js`). The default value is `false`.\n * @property {Object} [canvasFactory] - The factory instance that will be used\n *   when creating canvases. The default value is {new DOMCanvasFactory()}.\n * @property {Object} [filterFactory] - A factory instance that will be used\n *   to create SVG filters when rendering some images on the main canvas.\n */\n\n/**\n * This is the main entry point for loading a PDF and interacting with it.\n *\n * NOTE: If a URL is used to fetch the PDF data a standard Fetch API call (or\n * XHR as fallback) is used, which means it must follow same origin rules,\n * e.g. no cross-domain requests without CORS.\n *\n * @param {string | URL | TypedArray | ArrayBuffer | DocumentInitParameters}\n *   src - Can be a URL where a PDF file is located, a typed array (Uint8Array)\n *         already populated with data, or a parameter object.\n * @returns {PDFDocumentLoadingTask}\n */\nfunction getDocument(src) {\n  if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"GENERIC\")) {\n    if (typeof src === \"string\" || src instanceof URL) {\n      src = { url: src };\n    } else if (isArrayBuffer(src)) {\n      src = { data: src };\n    }\n  }\n  if (typeof src !== \"object\") {\n    throw new Error(\"Invalid parameter in getDocument, need parameter object.\");\n  }\n  if (!src.url && !src.data && !src.range) {\n    throw new Error(\n      \"Invalid parameter object: need either .data, .range or .url\"\n    );\n  }\n  const task = new PDFDocumentLoadingTask();\n  const { docId } = task;\n\n  const url = src.url ? getUrlProp(src.url) : null;\n  const data = src.data ? getDataProp(src.data) : null;\n  const httpHeaders = src.httpHeaders || null;\n  const withCredentials = src.withCredentials === true;\n  const password = src.password ?? null;\n  const rangeTransport =\n    src.range instanceof PDFDataRangeTransport ? src.range : null;\n  const rangeChunkSize =\n    Number.isInteger(src.rangeChunkSize) && src.rangeChunkSize > 0\n      ? src.rangeChunkSize\n      : DEFAULT_RANGE_CHUNK_SIZE;\n  let worker = src.worker instanceof PDFWorker ? src.worker : null;\n  const verbosity = src.verbosity;\n  // Ignore \"data:\"-URLs, since they can't be used to recover valid absolute\n  // URLs anyway. We want to avoid sending them to the worker-thread, since\n  // they contain the *entire* PDF document and can thus be arbitrarily long.\n  const docBaseUrl =\n    typeof src.docBaseUrl === \"string\" && !isDataScheme(src.docBaseUrl)\n      ? src.docBaseUrl\n      : null;\n  const cMapUrl = typeof src.cMapUrl === \"string\" ? src.cMapUrl : null;\n  const cMapPacked = src.cMapPacked !== false;\n  const CMapReaderFactory = src.CMapReaderFactory || DefaultCMapReaderFactory;\n  const standardFontDataUrl =\n    typeof src.standardFontDataUrl === \"string\"\n      ? src.standardFontDataUrl\n      : null;\n  const StandardFontDataFactory =\n    src.StandardFontDataFactory || DefaultStandardFontDataFactory;\n  const ignoreErrors = src.stopAtErrors !== true;\n  const maxImageSize =\n    Number.isInteger(src.maxImageSize) && src.maxImageSize > -1\n      ? src.maxImageSize\n      : -1;\n  const isEvalSupported = src.isEvalSupported !== false;\n  const isOffscreenCanvasSupported =\n    typeof src.isOffscreenCanvasSupported === \"boolean\"\n      ? src.isOffscreenCanvasSupported\n      : !isNodeJS;\n  const canvasMaxAreaInBytes = Number.isInteger(src.canvasMaxAreaInBytes)\n    ? src.canvasMaxAreaInBytes\n    : -1;\n  const disableFontFace =\n    typeof src.disableFontFace === \"boolean\" ? src.disableFontFace : isNodeJS;\n  const fontExtraProperties = src.fontExtraProperties === true;\n  const enableXfa = src.enableXfa === true;\n  const ownerDocument = src.ownerDocument || globalThis.document;\n  const disableRange = src.disableRange === true;\n  const disableStream = src.disableStream === true;\n  const disableAutoFetch = src.disableAutoFetch === true;\n  const pdfBug = src.pdfBug === true;\n\n  // Parameters whose default values depend on other parameters.\n  const length = rangeTransport ? rangeTransport.length : src.length ?? NaN;\n  const useSystemFonts =\n    typeof src.useSystemFonts === \"boolean\"\n      ? src.useSystemFonts\n      : !isNodeJS && !disableFontFace;\n  const useWorkerFetch =\n    typeof src.useWorkerFetch === \"boolean\"\n      ? src.useWorkerFetch\n      : (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) ||\n        (CMapReaderFactory === DOMCMapReaderFactory &&\n          StandardFontDataFactory === DOMStandardFontDataFactory &&\n          cMapUrl &&\n          standardFontDataUrl &&\n          isValidFetchUrl(cMapUrl, document.baseURI) &&\n          isValidFetchUrl(standardFontDataUrl, document.baseURI));\n  const canvasFactory =\n    src.canvasFactory || new DefaultCanvasFactory({ ownerDocument });\n  const filterFactory =\n    src.filterFactory || new DefaultFilterFactory({ docId, ownerDocument });\n\n  // Parameters only intended for development/testing purposes.\n  const styleElement =\n    typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")\n      ? src.styleElement\n      : null;\n\n  // Set the main-thread verbosity level.\n  setVerbosityLevel(verbosity);\n\n  // Ensure that the various factories can be initialized, when necessary,\n  // since the user may provide *custom* ones.\n  const transportFactory = {\n    canvasFactory,\n    filterFactory,\n  };\n  if (!useWorkerFetch) {\n    transportFactory.cMapReaderFactory = new CMapReaderFactory({\n      baseUrl: cMapUrl,\n      isCompressed: cMapPacked,\n    });\n    transportFactory.standardFontDataFactory = new StandardFontDataFactory({\n      baseUrl: standardFontDataUrl,\n    });\n  }\n\n  if (!worker) {\n    const workerParams = {\n      verbosity,\n      port: GlobalWorkerOptions.workerPort,\n    };\n    // Worker was not provided -- creating and owning our own. If message port\n    // is specified in global worker options, using it.\n    worker = workerParams.port\n      ? PDFWorker.fromPort(workerParams)\n      : new PDFWorker(workerParams);\n    task._worker = worker;\n  }\n\n  const fetchDocParams = {\n    docId,\n    apiVersion:\n      typeof PDFJSDev !== \"undefined\" && !PDFJSDev.test(\"TESTING\")\n        ? PDFJSDev.eval(\"BUNDLE_VERSION\")\n        : null,\n    data,\n    password,\n    disableAutoFetch,\n    rangeChunkSize,\n    length,\n    docBaseUrl,\n    enableXfa,\n    evaluatorOptions: {\n      maxImageSize,\n      disableFontFace,\n      ignoreErrors,\n      isEvalSupported,\n      isOffscreenCanvasSupported,\n      canvasMaxAreaInBytes,\n      fontExtraProperties,\n      useSystemFonts,\n      cMapUrl: useWorkerFetch ? cMapUrl : null,\n      standardFontDataUrl: useWorkerFetch ? standardFontDataUrl : null,\n    },\n  };\n  const transportParams = {\n    ignoreErrors,\n    isEvalSupported,\n    disableFontFace,\n    fontExtraProperties,\n    enableXfa,\n    ownerDocument,\n    disableAutoFetch,\n    pdfBug,\n    styleElement,\n  };\n\n  worker.promise\n    .then(function () {\n      if (task.destroyed) {\n        throw new Error(\"Loading aborted\");\n      }\n\n      const workerIdPromise = _fetchDocument(worker, fetchDocParams);\n      const networkStreamPromise = new Promise(function (resolve) {\n        let networkStream;\n        if (rangeTransport) {\n          networkStream = new PDFDataTransportStream(\n            {\n              length,\n              initialData: rangeTransport.initialData,\n              progressiveDone: rangeTransport.progressiveDone,\n              contentDispositionFilename:\n                rangeTransport.contentDispositionFilename,\n              disableRange,\n              disableStream,\n            },\n            rangeTransport\n          );\n        } else if (!data) {\n          if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n            throw new Error(\"Not implemented: createPDFNetworkStream\");\n          }\n          const createPDFNetworkStream = params => {\n            if (\n              typeof PDFJSDev !== \"undefined\" &&\n              PDFJSDev.test(\"GENERIC\") &&\n              isNodeJS\n            ) {\n              return new PDFNodeStream(params);\n            }\n            return isValidFetchUrl(params.url)\n              ? new PDFFetchStream(params)\n              : new PDFNetworkStream(params);\n          };\n\n          networkStream = createPDFNetworkStream({\n            url,\n            length,\n            httpHeaders,\n            withCredentials,\n            rangeChunkSize,\n            disableRange,\n            disableStream,\n          });\n        }\n        resolve(networkStream);\n      });\n\n      return Promise.all([workerIdPromise, networkStreamPromise]).then(\n        function ([workerId, networkStream]) {\n          if (task.destroyed) {\n            throw new Error(\"Loading aborted\");\n          }\n\n          const messageHandler = new MessageHandler(\n            docId,\n            workerId,\n            worker.port\n          );\n          const transport = new WorkerTransport(\n            messageHandler,\n            task,\n            networkStream,\n            transportParams,\n            transportFactory\n          );\n          task._transport = transport;\n          messageHandler.send(\"Ready\", null);\n        }\n      );\n    })\n    .catch(task._capability.reject);\n\n  return task;\n}\n\n/**\n * Starts fetching of specified PDF document/data.\n *\n * @param {PDFWorker} worker\n * @param {Object} source\n * @returns {Promise<string>} A promise that is resolved when the worker ID of\n *   the `MessageHandler` is known.\n * @private\n */\nasync function _fetchDocument(worker, source) {\n  if (worker.destroyed) {\n    throw new Error(\"Worker was destroyed\");\n  }\n  const workerId = await worker.messageHandler.sendWithPromise(\n    \"GetDocRequest\",\n    source,\n    source.data ? [source.data.buffer] : null\n  );\n\n  if (worker.destroyed) {\n    throw new Error(\"Worker was destroyed\");\n  }\n  return workerId;\n}\n\nfunction getUrlProp(val) {\n  if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n    return null; // The 'url' is unused with `PDFDataRangeTransport`.\n  }\n  if (val instanceof URL) {\n    return val.href;\n  }\n  try {\n    // The full path is required in the 'url' field.\n    return new URL(val, window.location).href;\n  } catch {\n    if (\n      typeof PDFJSDev !== \"undefined\" &&\n      PDFJSDev.test(\"GENERIC\") &&\n      isNodeJS &&\n      typeof val === \"string\"\n    ) {\n      return val; // Use the url as-is in Node.js environments.\n    }\n  }\n  throw new Error(\n    \"Invalid PDF url data: \" +\n      \"either string or URL-object is expected in the url property.\"\n  );\n}\n\nfunction getDataProp(val) {\n  // Converting string or array-like data to Uint8Array.\n  if (\n    typeof PDFJSDev !== \"undefined\" &&\n    PDFJSDev.test(\"GENERIC\") &&\n    isNodeJS &&\n    typeof Buffer !== \"undefined\" && // eslint-disable-line no-undef\n    val instanceof Buffer // eslint-disable-line no-undef\n  ) {\n    throw new Error(\n      \"Please provide binary data as `Uint8Array`, rather than `Buffer`.\"\n    );\n  }\n  if (val instanceof Uint8Array && val.byteLength === val.buffer.byteLength) {\n    // Use the data as-is when it's already a Uint8Array that completely\n    // \"utilizes\" its underlying ArrayBuffer, to prevent any possible\n    // issues when transferring it to the worker-thread.\n    return val;\n  }\n  if (typeof val === \"string\") {\n    return stringToBytes(val);\n  }\n  if ((typeof val === \"object\" && !isNaN(val?.length)) || isArrayBuffer(val)) {\n    return new Uint8Array(val);\n  }\n  throw new Error(\n    \"Invalid PDF binary data: either TypedArray, \" +\n      \"string, or array-like object is expected in the data property.\"\n  );\n}\n\n/**\n * @typedef {Object} OnProgressParameters\n * @property {number} loaded - Currently loaded number of bytes.\n * @property {number} total - Total number of bytes in the PDF file.\n */\n\n/**\n * The loading task controls the operations required to load a PDF document\n * (such as network requests) and provides a way to listen for completion,\n * after which individual pages can be rendered.\n */\nclass PDFDocumentLoadingTask {\n  static #docId = 0;\n\n  constructor() {\n    this._capability = new PromiseCapability();\n    this._transport = null;\n    this._worker = null;\n\n    /**\n     * Unique identifier for the document loading task.\n     * @type {string}\n     */\n    this.docId = `d${PDFDocumentLoadingTask.#docId++}`;\n\n    /**\n     * Whether the loading task is destroyed or not.\n     * @type {boolean}\n     */\n    this.destroyed = false;\n\n    /**\n     * Callback to request a password if a wrong or no password was provided.\n     * The callback receives two parameters: a function that should be called\n     * with the new password, and a reason (see {@link PasswordResponses}).\n     * @type {function}\n     */\n    this.onPassword = null;\n\n    /**\n     * Callback to be able to monitor the loading progress of the PDF file\n     * (necessary to implement e.g. a loading bar).\n     * The callback receives an {@link OnProgressParameters} argument.\n     * @type {function}\n     */\n    this.onProgress = null;\n  }\n\n  /**\n   * Promise for document loading task completion.\n   * @type {Promise<PDFDocumentProxy>}\n   */\n  get promise() {\n    return this._capability.promise;\n  }\n\n  /**\n   * Abort all network requests and destroy the worker.\n   * @returns {Promise<void>} A promise that is resolved when destruction is\n   *   completed.\n   */\n  async destroy() {\n    this.destroyed = true;\n    try {\n      if (this._worker?.port) {\n        this._worker._pendingDestroy = true;\n      }\n      await this._transport?.destroy();\n    } catch (ex) {\n      if (this._worker?.port) {\n        delete this._worker._pendingDestroy;\n      }\n      throw ex;\n    }\n\n    this._transport = null;\n    if (this._worker) {\n      this._worker.destroy();\n      this._worker = null;\n    }\n  }\n}\n\n/**\n * Abstract class to support range requests file loading.\n *\n * NOTE: The TypedArrays passed to the constructor and relevant methods below\n * will generally be transferred to the worker-thread. This will help reduce\n * main-thread memory usage, however it will take ownership of the TypedArrays.\n */\nclass PDFDataRangeTransport {\n  /**\n   * @param {number} length\n   * @param {Uint8Array|null} initialData\n   * @param {boolean} [progressiveDone]\n   * @param {string} [contentDispositionFilename]\n   */\n  constructor(\n    length,\n    initialData,\n    progressiveDone = false,\n    contentDispositionFilename = null\n  ) {\n    this.length = length;\n    this.initialData = initialData;\n    this.progressiveDone = progressiveDone;\n    this.contentDispositionFilename = contentDispositionFilename;\n\n    this._rangeListeners = [];\n    this._progressListeners = [];\n    this._progressiveReadListeners = [];\n    this._progressiveDoneListeners = [];\n    this._readyCapability = new PromiseCapability();\n  }\n\n  /**\n   * @param {function} listener\n   */\n  addRangeListener(listener) {\n    this._rangeListeners.push(listener);\n  }\n\n  /**\n   * @param {function} listener\n   */\n  addProgressListener(listener) {\n    this._progressListeners.push(listener);\n  }\n\n  /**\n   * @param {function} listener\n   */\n  addProgressiveReadListener(listener) {\n    this._progressiveReadListeners.push(listener);\n  }\n\n  /**\n   * @param {function} listener\n   */\n  addProgressiveDoneListener(listener) {\n    this._progressiveDoneListeners.push(listener);\n  }\n\n  /**\n   * @param {number} begin\n   * @param {Uint8Array|null} chunk\n   */\n  onDataRange(begin, chunk) {\n    for (const listener of this._rangeListeners) {\n      listener(begin, chunk);\n    }\n  }\n\n  /**\n   * @param {number} loaded\n   * @param {number|undefined} total\n   */\n  onDataProgress(loaded, total) {\n    this._readyCapability.promise.then(() => {\n      for (const listener of this._progressListeners) {\n        listener(loaded, total);\n      }\n    });\n  }\n\n  /**\n   * @param {Uint8Array|null} chunk\n   */\n  onDataProgressiveRead(chunk) {\n    this._readyCapability.promise.then(() => {\n      for (const listener of this._progressiveReadListeners) {\n        listener(chunk);\n      }\n    });\n  }\n\n  onDataProgressiveDone() {\n    this._readyCapability.promise.then(() => {\n      for (const listener of this._progressiveDoneListeners) {\n        listener();\n      }\n    });\n  }\n\n  transportReady() {\n    this._readyCapability.resolve();\n  }\n\n  /**\n   * @param {number} begin\n   * @param {number} end\n   */\n  requestDataRange(begin, end) {\n    unreachable(\"Abstract method PDFDataRangeTransport.requestDataRange\");\n  }\n\n  abort() {}\n}\n\n/**\n * Proxy to a `PDFDocument` in the worker thread.\n */\nclass PDFDocumentProxy {\n  constructor(pdfInfo, transport) {\n    this._pdfInfo = pdfInfo;\n    this._transport = transport;\n\n    if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n      // For testing purposes.\n      Object.defineProperty(this, \"getXFADatasets\", {\n        value: () => {\n          return this._transport.getXFADatasets();\n        },\n      });\n      Object.defineProperty(this, \"getXRefPrevValue\", {\n        value: () => {\n          return this._transport.getXRefPrevValue();\n        },\n      });\n      Object.defineProperty(this, \"getAnnotArray\", {\n        value: pageIndex => {\n          return this._transport.getAnnotArray(pageIndex);\n        },\n      });\n    }\n  }\n\n  /**\n   * @type {AnnotationStorage} Storage for annotation data in forms.\n   */\n  get annotationStorage() {\n    return this._transport.annotationStorage;\n  }\n\n  /**\n   * @type {Object} The filter factory instance.\n   */\n  get filterFactory() {\n    return this._transport.filterFactory;\n  }\n\n  /**\n   * @type {number} Total number of pages in the PDF file.\n   */\n  get numPages() {\n    return this._pdfInfo.numPages;\n  }\n\n  /**\n   * @type {Array<string, string|null>} A (not guaranteed to be) unique ID to\n   *   identify the PDF document.\n   *   NOTE: The first element will always be defined for all PDF documents,\n   *   whereas the second element is only defined for *modified* PDF documents.\n   */\n  get fingerprints() {\n    return this._pdfInfo.fingerprints;\n  }\n\n  /**\n   * @type {boolean} True if only XFA form.\n   */\n  get isPureXfa() {\n    return shadow(this, \"isPureXfa\", !!this._transport._htmlForXfa);\n  }\n\n  /**\n   * NOTE: This is (mostly) intended to support printing of XFA forms.\n   *\n   * @type {Object | null} An object representing a HTML tree structure\n   *   to render the XFA, or `null` when no XFA form exists.\n   */\n  get allXfaHtml() {\n    return this._transport._htmlForXfa;\n  }\n\n  /**\n   * @param {number} pageNumber - The page number to get. The first page is 1.\n   * @returns {Promise<PDFPageProxy>} A promise that is resolved with\n   *   a {@link PDFPageProxy} object.\n   */\n  getPage(pageNumber) {\n    return this._transport.getPage(pageNumber);\n  }\n\n  /**\n   * @param {RefProxy} ref - The page reference.\n   * @returns {Promise<number>} A promise that is resolved with the page index,\n   *   starting from zero, that is associated with the reference.\n   */\n  getPageIndex(ref) {\n    return this._transport.getPageIndex(ref);\n  }\n\n  /**\n   * @returns {Promise<Object<string, Array<any>>>} A promise that is resolved\n   *   with a mapping from named destinations to references.\n   *\n   * This can be slow for large documents. Use `getDestination` instead.\n   */\n  getDestinations() {\n    return this._transport.getDestinations();\n  }\n\n  /**\n   * @param {string} id - The named destination to get.\n   * @returns {Promise<Array<any> | null>} A promise that is resolved with all\n   *   information of the given named destination, or `null` when the named\n   *   destination is not present in the PDF file.\n   */\n  getDestination(id) {\n    return this._transport.getDestination(id);\n  }\n\n  /**\n   * @returns {Promise<Array<string> | null>} A promise that is resolved with\n   *   an {Array} containing the page labels that correspond to the page\n   *   indexes, or `null` when no page labels are present in the PDF file.\n   */\n  getPageLabels() {\n    return this._transport.getPageLabels();\n  }\n\n  /**\n   * @returns {Promise<string>} A promise that is resolved with a {string}\n   *   containing the page layout name.\n   */\n  getPageLayout() {\n    return this._transport.getPageLayout();\n  }\n\n  /**\n   * @returns {Promise<string>} A promise that is resolved with a {string}\n   *   containing the page mode name.\n   */\n  getPageMode() {\n    return this._transport.getPageMode();\n  }\n\n  /**\n   * @returns {Promise<Object | null>} A promise that is resolved with an\n   *   {Object} containing the viewer preferences, or `null` when no viewer\n   *   preferences are present in the PDF file.\n   */\n  getViewerPreferences() {\n    return this._transport.getViewerPreferences();\n  }\n\n  /**\n   * @returns {Promise<any | null>} A promise that is resolved with an {Array}\n   *   containing the destination, or `null` when no open action is present\n   *   in the PDF.\n   */\n  getOpenAction() {\n    return this._transport.getOpenAction();\n  }\n\n  /**\n   * @returns {Promise<any>} A promise that is resolved with a lookup table\n   *   for mapping named attachments to their content.\n   */\n  getAttachments() {\n    return this._transport.getAttachments();\n  }\n\n  /**\n   * @returns {Promise<Object | null>} A promise that is resolved with\n   *   an {Object} with the JavaScript actions:\n   *     - from the name tree.\n   *     - from A or AA entries in the catalog dictionary.\n   *   , or `null` if no JavaScript exists.\n   */\n  getJSActions() {\n    return this._transport.getDocJSActions();\n  }\n\n  /**\n   * @typedef {Object} OutlineNode\n   * @property {string} title\n   * @property {boolean} bold\n   * @property {boolean} italic\n   * @property {Uint8ClampedArray} color - The color in RGB format to use for\n   *   display purposes.\n   * @property {string | Array<any> | null} dest\n   * @property {string | null} url\n   * @property {string | undefined} unsafeUrl\n   * @property {boolean | undefined} newWindow\n   * @property {number | undefined} count\n   * @property {Array<OutlineNode>} items\n   */\n\n  /**\n   * @returns {Promise<Array<OutlineNode>>} A promise that is resolved with an\n   *   {Array} that is a tree outline (if it has one) of the PDF file.\n   */\n  getOutline() {\n    return this._transport.getOutline();\n  }\n\n  /**\n   * @returns {Promise<OptionalContentConfig>} A promise that is resolved with\n   *   an {@link OptionalContentConfig} that contains all the optional content\n   *   groups (assuming that the document has any).\n   */\n  getOptionalContentConfig() {\n    return this._transport.getOptionalContentConfig();\n  }\n\n  /**\n   * @returns {Promise<Array<number> | null>} A promise that is resolved with\n   *   an {Array} that contains the permission flags for the PDF document, or\n   *   `null` when no permissions are present in the PDF file.\n   */\n  getPermissions() {\n    return this._transport.getPermissions();\n  }\n\n  /**\n   * @returns {Promise<{ info: Object, metadata: Metadata }>} A promise that is\n   *   resolved with an {Object} that has `info` and `metadata` properties.\n   *   `info` is an {Object} filled with anything available in the information\n   *   dictionary and similarly `metadata` is a {Metadata} object with\n   *   information from the metadata section of the PDF.\n   */\n  getMetadata() {\n    return this._transport.getMetadata();\n  }\n\n  /**\n   * @typedef {Object} MarkInfo\n   * Properties correspond to Table 321 of the PDF 32000-1:2008 spec.\n   * @property {boolean} Marked\n   * @property {boolean} UserProperties\n   * @property {boolean} Suspects\n   */\n\n  /**\n   * @returns {Promise<MarkInfo | null>} A promise that is resolved with\n   *   a {MarkInfo} object that contains the MarkInfo flags for the PDF\n   *   document, or `null` when no MarkInfo values are present in the PDF file.\n   */\n  getMarkInfo() {\n    return this._transport.getMarkInfo();\n  }\n\n  /**\n   * @returns {Promise<Uint8Array>} A promise that is resolved with a\n   *   {Uint8Array} containing the raw data of the PDF document.\n   */\n  getData() {\n    return this._transport.getData();\n  }\n\n  /**\n   * @returns {Promise<Uint8Array>} A promise that is resolved with a\n   *   {Uint8Array} containing the full data of the saved document.\n   */\n  saveDocument() {\n    return this._transport.saveDocument();\n  }\n\n  /**\n   * @returns {Promise<{ length: number }>} A promise that is resolved when the\n   *   document's data is loaded. It is resolved with an {Object} that contains\n   *   the `length` property that indicates size of the PDF data in bytes.\n   */\n  getDownloadInfo() {\n    return this._transport.downloadInfoCapability.promise;\n  }\n\n  /**\n   * Cleans up resources allocated by the document on both the main and worker\n   * threads.\n   *\n   * NOTE: Do not, under any circumstances, call this method when rendering is\n   * currently ongoing since that may lead to rendering errors.\n   *\n   * @param {boolean} [keepLoadedFonts] - Let fonts remain attached to the DOM.\n   *   NOTE: This will increase persistent memory usage, hence don't use this\n   *   option unless absolutely necessary. The default value is `false`.\n   * @returns {Promise} A promise that is resolved when clean-up has finished.\n   */\n  cleanup(keepLoadedFonts = false) {\n    return this._transport.startCleanup(keepLoadedFonts || this.isPureXfa);\n  }\n\n  /**\n   * Destroys the current document instance and terminates the worker.\n   */\n  destroy() {\n    return this.loadingTask.destroy();\n  }\n\n  /**\n   * @type {DocumentInitParameters} A subset of the current\n   *   {DocumentInitParameters}, which are needed in the viewer.\n   */\n  get loadingParams() {\n    return this._transport.loadingParams;\n  }\n\n  /**\n   * @type {PDFDocumentLoadingTask} The loadingTask for the current document.\n   */\n  get loadingTask() {\n    return this._transport.loadingTask;\n  }\n\n  /**\n   * @returns {Promise<Object<string, Array<Object>> | null>} A promise that is\n   *   resolved with an {Object} containing /AcroForm field data for the JS\n   *   sandbox, or `null` when no field data is present in the PDF file.\n   */\n  getFieldObjects() {\n    return this._transport.getFieldObjects();\n  }\n\n  /**\n   * @returns {Promise<boolean>} A promise that is resolved with `true`\n   *   if some /AcroForm fields have JavaScript actions.\n   */\n  hasJSActions() {\n    return this._transport.hasJSActions();\n  }\n\n  /**\n   * @returns {Promise<Array<string> | null>} A promise that is resolved with an\n   *   {Array<string>} containing IDs of annotations that have a calculation\n   *   action, or `null` when no such annotations are present in the PDF file.\n   */\n  getCalculationOrderIds() {\n    return this._transport.getCalculationOrderIds();\n  }\n}\n\n/**\n * Page getViewport parameters.\n *\n * @typedef {Object} GetViewportParameters\n * @property {number} scale - The desired scale of the viewport.\n * @property {number} [rotation] - The desired rotation, in degrees, of\n *   the viewport. If omitted it defaults to the page rotation.\n * @property {number} [offsetX] - The horizontal, i.e. x-axis, offset.\n *   The default value is `0`.\n * @property {number} [offsetY] - The vertical, i.e. y-axis, offset.\n *   The default value is `0`.\n * @property {boolean} [dontFlip] - If true, the y-axis will not be\n *   flipped. The default value is `false`.\n */\n\n/**\n * Page getTextContent parameters.\n *\n * @typedef {Object} getTextContentParameters\n * @property {boolean} [includeMarkedContent] - When true include marked\n *   content items in the items array of TextContent. The default is `false`.\n * @property {boolean} [disableNormalization] - When true the text is *not*\n *   normalized in the worker-thread. The default is `false`.\n */\n\n/**\n * Page text content.\n *\n * @typedef {Object} TextContent\n * @property {Array<TextItem | TextMarkedContent>} items - Array of\n *   {@link TextItem} and {@link TextMarkedContent} objects. TextMarkedContent\n *   items are included when includeMarkedContent is true.\n * @property {Object<string, TextStyle>} styles - {@link TextStyle} objects,\n *   indexed by font name.\n */\n\n/**\n * Page text content part.\n *\n * @typedef {Object} TextItem\n * @property {string} str - Text content.\n * @property {string} dir - Text direction: 'ttb', 'ltr' or 'rtl'.\n * @property {Array<any>} transform - Transformation matrix.\n * @property {number} width - Width in device space.\n * @property {number} height - Height in device space.\n * @property {string} fontName - Font name used by PDF.js for converted font.\n * @property {boolean} hasEOL - Indicating if the text content is followed by a\n *   line-break.\n */\n\n/**\n * Page text marked content part.\n *\n * @typedef {Object} TextMarkedContent\n * @property {string} type - Either 'beginMarkedContent',\n *   'beginMarkedContentProps', or 'endMarkedContent'.\n * @property {string} id - The marked content identifier. Only used for type\n *   'beginMarkedContentProps'.\n */\n\n/**\n * Text style.\n *\n * @typedef {Object} TextStyle\n * @property {number} ascent - Font ascent.\n * @property {number} descent - Font descent.\n * @property {boolean} vertical - Whether or not the text is in vertical mode.\n * @property {string} fontFamily - The possible font family.\n */\n\n/**\n * Page annotation parameters.\n *\n * @typedef {Object} GetAnnotationsParameters\n * @property {string} [intent] - Determines the annotations that are fetched,\n *   can be 'display' (viewable annotations), 'print' (printable annotations),\n *   or 'any' (all annotations). The default value is 'display'.\n */\n\n/**\n * Page render parameters.\n *\n * @typedef {Object} RenderParameters\n * @property {CanvasRenderingContext2D} canvasContext - A 2D context of a DOM\n *   Canvas object.\n * @property {PageViewport} viewport - Rendering viewport obtained by calling\n *   the `PDFPageProxy.getViewport` method.\n * @property {string} [intent] - Rendering intent, can be 'display', 'print',\n *   or 'any'. The default value is 'display'.\n * @property {number} [annotationMode] Controls which annotations are rendered\n *   onto the canvas, for annotations with appearance-data; the values from\n *   {@link AnnotationMode} should be used. The following values are supported:\n *    - `AnnotationMode.DISABLE`, which disables all annotations.\n *    - `AnnotationMode.ENABLE`, which includes all possible annotations (thus\n *      it also depends on the `intent`-option, see above).\n *    - `AnnotationMode.ENABLE_FORMS`, which excludes annotations that contain\n *      interactive form elements (those will be rendered in the display layer).\n *    - `AnnotationMode.ENABLE_STORAGE`, which includes all possible annotations\n *      (as above) but where interactive form elements are updated with data\n *      from the {@link AnnotationStorage}-instance; useful e.g. for printing.\n *   The default value is `AnnotationMode.ENABLE`.\n * @property {Array<any>} [transform] - Additional transform, applied just\n *   before viewport transform.\n * @property {CanvasGradient | CanvasPattern | string} [background] - Background\n *   to use for the canvas.\n *   Any valid `canvas.fillStyle` can be used: a `DOMString` parsed as CSS\n *   <color> value, a `CanvasGradient` object (a linear or radial gradient) or\n *   a `CanvasPattern` object (a repetitive image). The default value is\n *   'rgb(255,255,255)'.\n *\n *   NOTE: This option may be partially, or completely, ignored when the\n *   `pageColors`-option is used.\n * @property {Object} [pageColors] - Overwrites background and foreground colors\n *   with user defined ones in order to improve readability in high contrast\n *   mode.\n * @property {Promise<OptionalContentConfig>} [optionalContentConfigPromise] -\n *   A promise that should resolve with an {@link OptionalContentConfig}\n *   created from `PDFDocumentProxy.getOptionalContentConfig`. If `null`,\n *   the configuration will be fetched automatically with the default visibility\n *   states set.\n * @property {Map<string, HTMLCanvasElement>} [annotationCanvasMap] - Map some\n *   annotation ids with canvases used to render them.\n * @property {PrintAnnotationStorage} [printAnnotationStorage]\n */\n\n/**\n * Page getOperatorList parameters.\n *\n * @typedef {Object} GetOperatorListParameters\n * @property {string} [intent] - Rendering intent, can be 'display', 'print',\n *   or 'any'. The default value is 'display'.\n * @property {number} [annotationMode] Controls which annotations are included\n *   in the operatorList, for annotations with appearance-data; the values from\n *   {@link AnnotationMode} should be used. The following values are supported:\n *    - `AnnotationMode.DISABLE`, which disables all annotations.\n *    - `AnnotationMode.ENABLE`, which includes all possible annotations (thus\n *      it also depends on the `intent`-option, see above).\n *    - `AnnotationMode.ENABLE_FORMS`, which excludes annotations that contain\n *      interactive form elements (those will be rendered in the display layer).\n *    - `AnnotationMode.ENABLE_STORAGE`, which includes all possible annotations\n *      (as above) but where interactive form elements are updated with data\n *      from the {@link AnnotationStorage}-instance; useful e.g. for printing.\n *   The default value is `AnnotationMode.ENABLE`.\n * @property {PrintAnnotationStorage} [printAnnotationStorage]\n */\n\n/**\n * Structure tree node. The root node will have a role \"Root\".\n *\n * @typedef {Object} StructTreeNode\n * @property {Array<StructTreeNode | StructTreeContent>} children - Array of\n *   {@link StructTreeNode} and {@link StructTreeContent} objects.\n * @property {string} role - element's role, already mapped if a role map exists\n * in the PDF.\n */\n\n/**\n * Structure tree content.\n *\n * @typedef {Object} StructTreeContent\n * @property {string} type - either \"content\" for page and stream structure\n *   elements or \"object\" for object references.\n * @property {string} id - unique id that will map to the text layer.\n */\n\n/**\n * PDF page operator list.\n *\n * @typedef {Object} PDFOperatorList\n * @property {Array<number>} fnArray - Array containing the operator functions.\n * @property {Array<any>} argsArray - Array containing the arguments of the\n *   functions.\n */\n\n/**\n * Proxy to a `PDFPage` in the worker thread.\n */\nclass PDFPageProxy {\n  #delayedCleanupTimeout = null;\n\n  #pendingCleanup = false;\n\n  constructor(pageIndex, pageInfo, transport, pdfBug = false) {\n    this._pageIndex = pageIndex;\n    this._pageInfo = pageInfo;\n    this._transport = transport;\n    this._stats = pdfBug ? new StatTimer() : null;\n    this._pdfBug = pdfBug;\n    /** @type {PDFObjects} */\n    this.commonObjs = transport.commonObjs;\n    this.objs = new PDFObjects();\n\n    this._maybeCleanupAfterRender = false;\n    this._intentStates = new Map();\n    this.destroyed = false;\n  }\n\n  /**\n   * @type {number} Page number of the page. First page is 1.\n   */\n  get pageNumber() {\n    return this._pageIndex + 1;\n  }\n\n  /**\n   * @type {number} The number of degrees the page is rotated clockwise.\n   */\n  get rotate() {\n    return this._pageInfo.rotate;\n  }\n\n  /**\n   * @type {RefProxy | null} The reference that points to this page.\n   */\n  get ref() {\n    return this._pageInfo.ref;\n  }\n\n  /**\n   * @type {number} The default size of units in 1/72nds of an inch.\n   */\n  get userUnit() {\n    return this._pageInfo.userUnit;\n  }\n\n  /**\n   * @type {Array<number>} An array of the visible portion of the PDF page in\n   *   user space units [x1, y1, x2, y2].\n   */\n  get view() {\n    return this._pageInfo.view;\n  }\n\n  /**\n   * @param {GetViewportParameters} params - Viewport parameters.\n   * @returns {PageViewport} Contains 'width' and 'height' properties\n   *   along with transforms required for rendering.\n   */\n  getViewport({\n    scale,\n    rotation = this.rotate,\n    offsetX = 0,\n    offsetY = 0,\n    dontFlip = false,\n  } = {}) {\n    return new PageViewport({\n      viewBox: this.view,\n      scale,\n      rotation,\n      offsetX,\n      offsetY,\n      dontFlip,\n    });\n  }\n\n  /**\n   * @param {GetAnnotationsParameters} params - Annotation parameters.\n   * @returns {Promise<Array<any>>} A promise that is resolved with an\n   *   {Array} of the annotation objects.\n   */\n  getAnnotations({ intent = \"display\" } = {}) {\n    const intentArgs = this._transport.getRenderingIntent(intent);\n\n    return this._transport.getAnnotations(\n      this._pageIndex,\n      intentArgs.renderingIntent\n    );\n  }\n\n  /**\n   * @returns {Promise<Object>} A promise that is resolved with an\n   *   {Object} with JS actions.\n   */\n  getJSActions() {\n    return this._transport.getPageJSActions(this._pageIndex);\n  }\n\n  /**\n   * @type {Object} The filter factory instance.\n   */\n  get filterFactory() {\n    return this._transport.filterFactory;\n  }\n\n  /**\n   * @type {boolean} True if only XFA form.\n   */\n  get isPureXfa() {\n    return shadow(this, \"isPureXfa\", !!this._transport._htmlForXfa);\n  }\n\n  /**\n   * @returns {Promise<Object | null>} A promise that is resolved with\n   *   an {Object} with a fake DOM object (a tree structure where elements\n   *   are {Object} with a name, attributes (class, style, ...), value and\n   *   children, very similar to a HTML DOM tree), or `null` if no XFA exists.\n   */\n  async getXfa() {\n    return this._transport._htmlForXfa?.children[this._pageIndex] || null;\n  }\n\n  /**\n   * Begins the process of rendering a page to the desired context.\n   *\n   * @param {RenderParameters} params - Page render parameters.\n   * @returns {RenderTask} An object that contains a promise that is\n   *   resolved when the page finishes rendering.\n   */\n  render({\n    canvasContext,\n    viewport,\n    intent = \"display\",\n    annotationMode = AnnotationMode.ENABLE,\n    transform = null,\n    background = null,\n    optionalContentConfigPromise = null,\n    annotationCanvasMap = null,\n    pageColors = null,\n    printAnnotationStorage = null,\n  }) {\n    this._stats?.time(\"Overall\");\n\n    const intentArgs = this._transport.getRenderingIntent(\n      intent,\n      annotationMode,\n      printAnnotationStorage\n    );\n    // If there was a pending destroy, cancel it so no cleanup happens during\n    // this call to render...\n    this.#pendingCleanup = false;\n    // ... and ensure that a delayed cleanup is always aborted.\n    this.#abortDelayedCleanup();\n\n    if (!optionalContentConfigPromise) {\n      optionalContentConfigPromise = this._transport.getOptionalContentConfig();\n    }\n\n    let intentState = this._intentStates.get(intentArgs.cacheKey);\n    if (!intentState) {\n      intentState = Object.create(null);\n      this._intentStates.set(intentArgs.cacheKey, intentState);\n    }\n\n    // Ensure that a pending `streamReader` cancel timeout is always aborted.\n    if (intentState.streamReaderCancelTimeout) {\n      clearTimeout(intentState.streamReaderCancelTimeout);\n      intentState.streamReaderCancelTimeout = null;\n    }\n\n    const intentPrint = !!(\n      intentArgs.renderingIntent & RenderingIntentFlag.PRINT\n    );\n\n    // If there's no displayReadyCapability yet, then the operatorList\n    // was never requested before. Make the request and create the promise.\n    if (!intentState.displayReadyCapability) {\n      intentState.displayReadyCapability = new PromiseCapability();\n      intentState.operatorList = {\n        fnArray: [],\n        argsArray: [],\n        lastChunk: false,\n        separateAnnots: null,\n      };\n\n      this._stats?.time(\"Page Request\");\n      this._pumpOperatorList(intentArgs);\n    }\n\n    const complete = error => {\n      intentState.renderTasks.delete(internalRenderTask);\n\n      // Attempt to reduce memory usage during *printing*, by always running\n      // cleanup immediately once rendering has finished.\n      if (this._maybeCleanupAfterRender || intentPrint) {\n        this.#pendingCleanup = true;\n      }\n      this.#tryCleanup(/* delayed = */ !intentPrint);\n\n      if (error) {\n        internalRenderTask.capability.reject(error);\n\n        this._abortOperatorList({\n          intentState,\n          reason: error instanceof Error ? error : new Error(error),\n        });\n      } else {\n        internalRenderTask.capability.resolve();\n      }\n\n      this._stats?.timeEnd(\"Rendering\");\n      this._stats?.timeEnd(\"Overall\");\n    };\n\n    const internalRenderTask = new InternalRenderTask({\n      callback: complete,\n      // Only include the required properties, and *not* the entire object.\n      params: {\n        canvasContext,\n        viewport,\n        transform,\n        background,\n      },\n      objs: this.objs,\n      commonObjs: this.commonObjs,\n      annotationCanvasMap,\n      operatorList: intentState.operatorList,\n      pageIndex: this._pageIndex,\n      canvasFactory: this._transport.canvasFactory,\n      filterFactory: this._transport.filterFactory,\n      useRequestAnimationFrame: !intentPrint,\n      pdfBug: this._pdfBug,\n      pageColors,\n    });\n\n    (intentState.renderTasks ||= new Set()).add(internalRenderTask);\n    const renderTask = internalRenderTask.task;\n\n    Promise.all([\n      intentState.displayReadyCapability.promise,\n      optionalContentConfigPromise,\n    ])\n      .then(([transparency, optionalContentConfig]) => {\n        if (this.destroyed) {\n          complete();\n          return;\n        }\n        this._stats?.time(\"Rendering\");\n\n        internalRenderTask.initializeGraphics({\n          transparency,\n          optionalContentConfig,\n        });\n        internalRenderTask.operatorListChanged();\n      })\n      .catch(complete);\n\n    return renderTask;\n  }\n\n  /**\n   * @param {GetOperatorListParameters} params - Page getOperatorList\n   *   parameters.\n   * @returns {Promise<PDFOperatorList>} A promise resolved with an\n   *   {@link PDFOperatorList} object that represents the page's operator list.\n   */\n  getOperatorList({\n    intent = \"display\",\n    annotationMode = AnnotationMode.ENABLE,\n    printAnnotationStorage = null,\n  } = {}) {\n    if (typeof PDFJSDev !== \"undefined\" && !PDFJSDev.test(\"GENERIC\")) {\n      throw new Error(\"Not implemented: getOperatorList\");\n    }\n    function operatorListChanged() {\n      if (intentState.operatorList.lastChunk) {\n        intentState.opListReadCapability.resolve(intentState.operatorList);\n\n        intentState.renderTasks.delete(opListTask);\n      }\n    }\n\n    const intentArgs = this._transport.getRenderingIntent(\n      intent,\n      annotationMode,\n      printAnnotationStorage,\n      /* isOpList = */ true\n    );\n    let intentState = this._intentStates.get(intentArgs.cacheKey);\n    if (!intentState) {\n      intentState = Object.create(null);\n      this._intentStates.set(intentArgs.cacheKey, intentState);\n    }\n    let opListTask;\n\n    if (!intentState.opListReadCapability) {\n      opListTask = Object.create(null);\n      opListTask.operatorListChanged = operatorListChanged;\n      intentState.opListReadCapability = new PromiseCapability();\n      (intentState.renderTasks ||= new Set()).add(opListTask);\n      intentState.operatorList = {\n        fnArray: [],\n        argsArray: [],\n        lastChunk: false,\n        separateAnnots: null,\n      };\n\n      this._stats?.time(\"Page Request\");\n      this._pumpOperatorList(intentArgs);\n    }\n    return intentState.opListReadCapability.promise;\n  }\n\n  /**\n   * NOTE: All occurrences of whitespace will be replaced by\n   * standard spaces (0x20).\n   *\n   * @param {getTextContentParameters} params - getTextContent parameters.\n   * @returns {ReadableStream} Stream for reading text content chunks.\n   */\n  streamTextContent({\n    includeMarkedContent = false,\n    disableNormalization = false,\n  } = {}) {\n    const TEXT_CONTENT_CHUNK_SIZE = 100;\n\n    return this._transport.messageHandler.sendWithStream(\n      \"GetTextContent\",\n      {\n        pageIndex: this._pageIndex,\n        includeMarkedContent: includeMarkedContent === true,\n        disableNormalization: disableNormalization === true,\n      },\n      {\n        highWaterMark: TEXT_CONTENT_CHUNK_SIZE,\n        size(textContent) {\n          return textContent.items.length;\n        },\n      }\n    );\n  }\n\n  /**\n   * NOTE: All occurrences of whitespace will be replaced by\n   * standard spaces (0x20).\n   *\n   * @param {getTextContentParameters} params - getTextContent parameters.\n   * @returns {Promise<TextContent>} A promise that is resolved with a\n   *   {@link TextContent} object that represents the page's text content.\n   */\n  getTextContent(params = {}) {\n    if (this._transport._htmlForXfa) {\n      // TODO: We need to revisit this once the XFA foreground patch lands and\n      // only do this for non-foreground XFA.\n      return this.getXfa().then(xfa => {\n        return XfaText.textContent(xfa);\n      });\n    }\n    const readableStream = this.streamTextContent(params);\n\n    return new Promise(function (resolve, reject) {\n      function pump() {\n        reader.read().then(function ({ value, done }) {\n          if (done) {\n            resolve(textContent);\n            return;\n          }\n          Object.assign(textContent.styles, value.styles);\n          textContent.items.push(...value.items);\n          pump();\n        }, reject);\n      }\n\n      const reader = readableStream.getReader();\n      const textContent = {\n        items: [],\n        styles: Object.create(null),\n      };\n      pump();\n    });\n  }\n\n  /**\n   * @returns {Promise<StructTreeNode>} A promise that is resolved with a\n   *   {@link StructTreeNode} object that represents the page's structure tree,\n   *   or `null` when no structure tree is present for the current page.\n   */\n  getStructTree() {\n    return this._transport.getStructTree(this._pageIndex);\n  }\n\n  /**\n   * Destroys the page object.\n   * @private\n   */\n  _destroy() {\n    this.destroyed = true;\n\n    const waitOn = [];\n    for (const intentState of this._intentStates.values()) {\n      this._abortOperatorList({\n        intentState,\n        reason: new Error(\"Page was destroyed.\"),\n        force: true,\n      });\n\n      if (intentState.opListReadCapability) {\n        // Avoid errors below, since the renderTasks are just stubs.\n        continue;\n      }\n      for (const internalRenderTask of intentState.renderTasks) {\n        waitOn.push(internalRenderTask.completed);\n        internalRenderTask.cancel();\n      }\n    }\n    this.objs.clear();\n    this.#pendingCleanup = false;\n    this.#abortDelayedCleanup();\n\n    return Promise.all(waitOn);\n  }\n\n  /**\n   * Cleans up resources allocated by the page.\n   *\n   * @param {boolean} [resetStats] - Reset page stats, if enabled.\n   *   The default value is `false`.\n   * @returns {boolean} Indicates if clean-up was successfully run.\n   */\n  cleanup(resetStats = false) {\n    this.#pendingCleanup = true;\n    const success = this.#tryCleanup(/* delayed = */ false);\n\n    if (resetStats && success) {\n      this._stats &&= new StatTimer();\n    }\n    return success;\n  }\n\n  /**\n   * Attempts to clean up if rendering is in a state where that's possible.\n   * @param {boolean} [delayed] - Delay the cleanup, to e.g. improve zooming\n   *   performance in documents with large images.\n   *   The default value is `false`.\n   * @returns {boolean} Indicates if clean-up was successfully run.\n   */\n  #tryCleanup(delayed = false) {\n    this.#abortDelayedCleanup();\n\n    if (!this.#pendingCleanup || this.destroyed) {\n      return false;\n    }\n    if (delayed) {\n      this.#delayedCleanupTimeout = setTimeout(() => {\n        this.#delayedCleanupTimeout = null;\n        this.#tryCleanup(/* delayed = */ false);\n      }, DELAYED_CLEANUP_TIMEOUT);\n\n      return false;\n    }\n    for (const { renderTasks, operatorList } of this._intentStates.values()) {\n      if (renderTasks.size > 0 || !operatorList.lastChunk) {\n        return false;\n      }\n    }\n    this._intentStates.clear();\n    this.objs.clear();\n    this.#pendingCleanup = false;\n    return true;\n  }\n\n  #abortDelayedCleanup() {\n    if (this.#delayedCleanupTimeout) {\n      clearTimeout(this.#delayedCleanupTimeout);\n      this.#delayedCleanupTimeout = null;\n    }\n  }\n\n  /**\n   * @private\n   */\n  _startRenderPage(transparency, cacheKey) {\n    const intentState = this._intentStates.get(cacheKey);\n    if (!intentState) {\n      return; // Rendering was cancelled.\n    }\n    this._stats?.timeEnd(\"Page Request\");\n\n    // TODO Refactor RenderPageRequest to separate rendering\n    // and operator list logic\n    intentState.displayReadyCapability?.resolve(transparency);\n  }\n\n  /**\n   * @private\n   */\n  _renderPageChunk(operatorListChunk, intentState) {\n    // Add the new chunk to the current operator list.\n    for (let i = 0, ii = operatorListChunk.length; i < ii; i++) {\n      intentState.operatorList.fnArray.push(operatorListChunk.fnArray[i]);\n      intentState.operatorList.argsArray.push(operatorListChunk.argsArray[i]);\n    }\n    intentState.operatorList.lastChunk = operatorListChunk.lastChunk;\n    intentState.operatorList.separateAnnots = operatorListChunk.separateAnnots;\n\n    // Notify all the rendering tasks there are more operators to be consumed.\n    for (const internalRenderTask of intentState.renderTasks) {\n      internalRenderTask.operatorListChanged();\n    }\n\n    if (operatorListChunk.lastChunk) {\n      this.#tryCleanup(/* delayed = */ true);\n    }\n  }\n\n  /**\n   * @private\n   */\n  _pumpOperatorList({\n    renderingIntent,\n    cacheKey,\n    annotationStorageSerializable,\n  }) {\n    if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n      assert(\n        Number.isInteger(renderingIntent) && renderingIntent > 0,\n        '_pumpOperatorList: Expected valid \"renderingIntent\" argument.'\n      );\n    }\n    const { map, transfer } = annotationStorageSerializable;\n\n    const readableStream = this._transport.messageHandler.sendWithStream(\n      \"GetOperatorList\",\n      {\n        pageIndex: this._pageIndex,\n        intent: renderingIntent,\n        cacheKey,\n        annotationStorage: map,\n      },\n      transfer\n    );\n    const reader = readableStream.getReader();\n\n    const intentState = this._intentStates.get(cacheKey);\n    intentState.streamReader = reader;\n\n    const pump = () => {\n      reader.read().then(\n        ({ value, done }) => {\n          if (done) {\n            intentState.streamReader = null;\n            return;\n          }\n          if (this._transport.destroyed) {\n            return; // Ignore any pending requests if the worker was terminated.\n          }\n          this._renderPageChunk(value, intentState);\n          pump();\n        },\n        reason => {\n          intentState.streamReader = null;\n\n          if (this._transport.destroyed) {\n            return; // Ignore any pending requests if the worker was terminated.\n          }\n          if (intentState.operatorList) {\n            // Mark operator list as complete.\n            intentState.operatorList.lastChunk = true;\n\n            for (const internalRenderTask of intentState.renderTasks) {\n              internalRenderTask.operatorListChanged();\n            }\n            this.#tryCleanup(/* delayed = */ true);\n          }\n\n          if (intentState.displayReadyCapability) {\n            intentState.displayReadyCapability.reject(reason);\n          } else if (intentState.opListReadCapability) {\n            intentState.opListReadCapability.reject(reason);\n          } else {\n            throw reason;\n          }\n        }\n      );\n    };\n    pump();\n  }\n\n  /**\n   * @private\n   */\n  _abortOperatorList({ intentState, reason, force = false }) {\n    if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n      assert(\n        reason instanceof Error,\n        '_abortOperatorList: Expected valid \"reason\" argument.'\n      );\n    }\n\n    if (!intentState.streamReader) {\n      return;\n    }\n    // Ensure that a pending `streamReader` cancel timeout is always aborted.\n    if (intentState.streamReaderCancelTimeout) {\n      clearTimeout(intentState.streamReaderCancelTimeout);\n      intentState.streamReaderCancelTimeout = null;\n    }\n\n    if (!force) {\n      // Ensure that an Error occurring in *only* one `InternalRenderTask`, e.g.\n      // multiple render() calls on the same canvas, won't break all rendering.\n      if (intentState.renderTasks.size > 0) {\n        return;\n      }\n      // Don't immediately abort parsing on the worker-thread when rendering is\n      // cancelled, since that will unnecessarily delay re-rendering when (for\n      // partially parsed pages) e.g. zooming/rotation occurs in the viewer.\n      if (reason instanceof RenderingCancelledException) {\n        let delay = RENDERING_CANCELLED_TIMEOUT;\n        if (reason.extraDelay > 0 && reason.extraDelay < /* ms = */ 1000) {\n          // Above, we prevent the total delay from becoming arbitrarily large.\n          delay += reason.extraDelay;\n        }\n\n        intentState.streamReaderCancelTimeout = setTimeout(() => {\n          intentState.streamReaderCancelTimeout = null;\n          this._abortOperatorList({ intentState, reason, force: true });\n        }, delay);\n        return;\n      }\n    }\n    intentState.streamReader\n      .cancel(new AbortException(reason.message))\n      .catch(() => {\n        // Avoid \"Uncaught promise\" messages in the console.\n      });\n    intentState.streamReader = null;\n\n    if (this._transport.destroyed) {\n      return; // Ignore any pending requests if the worker was terminated.\n    }\n    // Remove the current `intentState`, since a cancelled `getOperatorList`\n    // call on the worker-thread cannot be re-started...\n    for (const [curCacheKey, curIntentState] of this._intentStates) {\n      if (curIntentState === intentState) {\n        this._intentStates.delete(curCacheKey);\n        break;\n      }\n    }\n    // ... and force clean-up to ensure that any old state is always removed.\n    this.cleanup();\n  }\n\n  /**\n   * @type {StatTimer | null} Returns page stats, if enabled; returns `null`\n   *   otherwise.\n   */\n  get stats() {\n    return this._stats;\n  }\n}\n\nclass LoopbackPort {\n  #listeners = new Set();\n\n  #deferred = Promise.resolve();\n\n  postMessage(obj, transfer) {\n    const event = {\n      data: structuredClone(obj, transfer ? { transfer } : null),\n    };\n\n    this.#deferred.then(() => {\n      for (const listener of this.#listeners) {\n        listener.call(this, event);\n      }\n    });\n  }\n\n  addEventListener(name, listener) {\n    this.#listeners.add(listener);\n  }\n\n  removeEventListener(name, listener) {\n    this.#listeners.delete(listener);\n  }\n\n  terminate() {\n    this.#listeners.clear();\n  }\n}\n\n/**\n * @typedef {Object} PDFWorkerParameters\n * @property {string} [name] - The name of the worker.\n * @property {Worker} [port] - The `workerPort` object.\n * @property {number} [verbosity] - Controls the logging level;\n *   the constants from {@link VerbosityLevel} should be used.\n */\n\nconst PDFWorkerUtil = {\n  isWorkerDisabled: false,\n  fakeWorkerId: 0,\n};\nif (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"GENERIC\")) {\n  if (isNodeJS) {\n    // Workers aren't supported in Node.js, force-disabling them there.\n    PDFWorkerUtil.isWorkerDisabled = true;\n\n    GlobalWorkerOptions.workerSrc ||= PDFJSDev.test(\"LIB\")\n      ? \"../pdf.worker.js\"\n      : \"./pdf.worker.mjs\";\n  }\n\n  // Check if URLs have the same origin. For non-HTTP based URLs, returns false.\n  PDFWorkerUtil.isSameOrigin = function (baseUrl, otherUrl) {\n    let base;\n    try {\n      base = new URL(baseUrl);\n      if (!base.origin || base.origin === \"null\") {\n        return false; // non-HTTP url\n      }\n    } catch {\n      return false;\n    }\n\n    const other = new URL(otherUrl, base);\n    return base.origin === other.origin;\n  };\n\n  PDFWorkerUtil.createCDNWrapper = function (url) {\n    // We will rely on blob URL's property to specify origin.\n    // We want this function to fail in case if createObjectURL or Blob do not\n    // exist or fail for some reason -- our Worker creation will fail anyway.\n    const wrapper = `await import(\"${url}\");`;\n    return URL.createObjectURL(\n      new Blob([wrapper], { type: \"text/javascript\" })\n    );\n  };\n}\n\n/**\n * PDF.js web worker abstraction that controls the instantiation of PDF\n * documents. Message handlers are used to pass information from the main\n * thread to the worker thread and vice versa. If the creation of a web\n * worker is not possible, a \"fake\" worker will be used instead.\n *\n * @param {PDFWorkerParameters} params - The worker initialization parameters.\n */\nclass PDFWorker {\n  static #workerPorts;\n\n  constructor({\n    name = null,\n    port = null,\n    verbosity = getVerbosityLevel(),\n  } = {}) {\n    this.name = name;\n    this.destroyed = false;\n    this.verbosity = verbosity;\n\n    this._readyCapability = new PromiseCapability();\n    this._port = null;\n    this._webWorker = null;\n    this._messageHandler = null;\n\n    if (\n      (typeof PDFJSDev === \"undefined\" || !PDFJSDev.test(\"MOZCENTRAL\")) &&\n      port\n    ) {\n      if (PDFWorker.#workerPorts?.has(port)) {\n        throw new Error(\"Cannot use more than one PDFWorker per port.\");\n      }\n      (PDFWorker.#workerPorts ||= new WeakMap()).set(port, this);\n      this._initializeFromPort(port);\n      return;\n    }\n    this._initialize();\n  }\n\n  /**\n   * Promise for worker initialization completion.\n   * @type {Promise<void>}\n   */\n  get promise() {\n    return this._readyCapability.promise;\n  }\n\n  /**\n   * The current `workerPort`, when it exists.\n   * @type {Worker}\n   */\n  get port() {\n    return this._port;\n  }\n\n  /**\n   * The current MessageHandler-instance.\n   * @type {MessageHandler}\n   */\n  get messageHandler() {\n    return this._messageHandler;\n  }\n\n  _initializeFromPort(port) {\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n      throw new Error(\"Not implemented: _initializeFromPort\");\n    }\n    this._port = port;\n    this._messageHandler = new MessageHandler(\"main\", \"worker\", port);\n    this._messageHandler.on(\"ready\", function () {\n      // Ignoring \"ready\" event -- MessageHandler should already be initialized\n      // and ready to accept messages.\n    });\n    this._readyCapability.resolve();\n    // Send global setting, e.g. verbosity level.\n    this._messageHandler.send(\"configure\", {\n      verbosity: this.verbosity,\n    });\n  }\n\n  _initialize() {\n    // If worker support isn't disabled explicit and the browser has worker\n    // support, create a new web worker and test if it/the browser fulfills\n    // all requirements to run parts of pdf.js in a web worker.\n    // Right now, the requirement is, that an Uint8Array is still an\n    // Uint8Array as it arrives on the worker. (Chrome added this with v.15.)\n    if (\n      !PDFWorkerUtil.isWorkerDisabled &&\n      !PDFWorker.#mainThreadWorkerMessageHandler\n    ) {\n      let { workerSrc } = PDFWorker;\n\n      try {\n        // Wraps workerSrc path into blob URL, if the former does not belong\n        // to the same origin.\n        if (\n          typeof PDFJSDev !== \"undefined\" &&\n          PDFJSDev.test(\"GENERIC\") &&\n          !PDFWorkerUtil.isSameOrigin(window.location.href, workerSrc)\n        ) {\n          workerSrc = PDFWorkerUtil.createCDNWrapper(\n            new URL(workerSrc, window.location).href\n          );\n        }\n\n        const worker = new Worker(workerSrc, { type: \"module\" });\n        const messageHandler = new MessageHandler(\"main\", \"worker\", worker);\n        const terminateEarly = () => {\n          worker.removeEventListener(\"error\", onWorkerError);\n          messageHandler.destroy();\n          worker.terminate();\n          if (this.destroyed) {\n            this._readyCapability.reject(new Error(\"Worker was destroyed\"));\n          } else {\n            // Fall back to fake worker if the termination is caused by an\n            // error (e.g. NetworkError / SecurityError).\n            this._setupFakeWorker();\n          }\n        };\n\n        const onWorkerError = () => {\n          if (!this._webWorker) {\n            // Worker failed to initialize due to an error. Clean up and fall\n            // back to the fake worker.\n            terminateEarly();\n          }\n        };\n        worker.addEventListener(\"error\", onWorkerError);\n\n        messageHandler.on(\"test\", data => {\n          worker.removeEventListener(\"error\", onWorkerError);\n          if (this.destroyed) {\n            terminateEarly();\n            return; // worker was destroyed\n          }\n          if (data) {\n            this._messageHandler = messageHandler;\n            this._port = worker;\n            this._webWorker = worker;\n\n            this._readyCapability.resolve();\n            // Send global setting, e.g. verbosity level.\n            messageHandler.send(\"configure\", {\n              verbosity: this.verbosity,\n            });\n          } else {\n            this._setupFakeWorker();\n            messageHandler.destroy();\n            worker.terminate();\n          }\n        });\n\n        messageHandler.on(\"ready\", data => {\n          worker.removeEventListener(\"error\", onWorkerError);\n          if (this.destroyed) {\n            terminateEarly();\n            return; // worker was destroyed\n          }\n          try {\n            sendTest();\n          } catch {\n            // We need fallback to a faked worker.\n            this._setupFakeWorker();\n          }\n        });\n\n        const sendTest = () => {\n          const testObj = new Uint8Array();\n          // Ensure that we can use `postMessage` transfers.\n          messageHandler.send(\"test\", testObj, [testObj.buffer]);\n        };\n\n        // It might take time for the worker to initialize. We will try to send\n        // the \"test\" message immediately, and once the \"ready\" message arrives.\n        // The worker shall process only the first received \"test\" message.\n        sendTest();\n        return;\n      } catch {\n        info(\"The worker has been disabled.\");\n      }\n    }\n    // Either workers are disabled, not supported or have thrown an exception.\n    // Thus, we fallback to a faked worker.\n    this._setupFakeWorker();\n  }\n\n  _setupFakeWorker() {\n    if (!PDFWorkerUtil.isWorkerDisabled) {\n      warn(\"Setting up fake worker.\");\n      PDFWorkerUtil.isWorkerDisabled = true;\n    }\n\n    PDFWorker._setupFakeWorkerGlobal\n      .then(WorkerMessageHandler => {\n        if (this.destroyed) {\n          this._readyCapability.reject(new Error(\"Worker was destroyed\"));\n          return;\n        }\n        const port = new LoopbackPort();\n        this._port = port;\n\n        // All fake workers use the same port, making id unique.\n        const id = `fake${PDFWorkerUtil.fakeWorkerId++}`;\n\n        // If the main thread is our worker, setup the handling for the\n        // messages -- the main thread sends to it self.\n        const workerHandler = new MessageHandler(id + \"_worker\", id, port);\n        WorkerMessageHandler.setup(workerHandler, port);\n\n        const messageHandler = new MessageHandler(id, id + \"_worker\", port);\n        this._messageHandler = messageHandler;\n        this._readyCapability.resolve();\n        // Send global setting, e.g. verbosity level.\n        messageHandler.send(\"configure\", {\n          verbosity: this.verbosity,\n        });\n      })\n      .catch(reason => {\n        this._readyCapability.reject(\n          new Error(`Setting up fake worker failed: \"${reason.message}\".`)\n        );\n      });\n  }\n\n  /**\n   * Destroys the worker instance.\n   */\n  destroy() {\n    this.destroyed = true;\n    if (this._webWorker) {\n      // We need to terminate only web worker created resource.\n      this._webWorker.terminate();\n      this._webWorker = null;\n    }\n    PDFWorker.#workerPorts?.delete(this._port);\n    this._port = null;\n    if (this._messageHandler) {\n      this._messageHandler.destroy();\n      this._messageHandler = null;\n    }\n  }\n\n  /**\n   * @param {PDFWorkerParameters} params - The worker initialization parameters.\n   */\n  static fromPort(params) {\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n      throw new Error(\"Not implemented: fromPort\");\n    }\n    if (!params?.port) {\n      throw new Error(\"PDFWorker.fromPort - invalid method signature.\");\n    }\n    const cachedPort = this.#workerPorts?.get(params.port);\n    if (cachedPort) {\n      if (cachedPort._pendingDestroy) {\n        throw new Error(\n          \"PDFWorker.fromPort - the worker is being destroyed.\\n\" +\n            \"Please remember to await `PDFDocumentLoadingTask.destroy()`-calls.\"\n        );\n      }\n      return cachedPort;\n    }\n    return new PDFWorker(params);\n  }\n\n  /**\n   * The current `workerSrc`, when it exists.\n   * @type {string}\n   */\n  static get workerSrc() {\n    if (GlobalWorkerOptions.workerSrc) {\n      return GlobalWorkerOptions.workerSrc;\n    }\n    throw new Error('No \"GlobalWorkerOptions.workerSrc\" specified.');\n  }\n\n  static get #mainThreadWorkerMessageHandler() {\n    try {\n      return globalThis.pdfjsWorker?.WorkerMessageHandler || null;\n    } catch {\n      return null;\n    }\n  }\n\n  // Loads worker code into the main-thread.\n  static get _setupFakeWorkerGlobal() {\n    const loader = async () => {\n      if (this.#mainThreadWorkerMessageHandler) {\n        // The worker was already loaded using e.g. a `<script>` tag.\n        return this.#mainThreadWorkerMessageHandler;\n      }\n      const worker =\n        typeof PDFJSDev === \"undefined\"\n          ? await import(\"pdfjs/pdf.worker.js\")\n          : await import(/* webpackIgnore: true */ this.workerSrc);\n      return worker.WorkerMessageHandler;\n    };\n\n    return shadow(this, \"_setupFakeWorkerGlobal\", loader());\n  }\n}\n\n/**\n * For internal use only.\n * @ignore\n */\nclass WorkerTransport {\n  #methodPromises = new Map();\n\n  #pageCache = new Map();\n\n  #pagePromises = new Map();\n\n  #passwordCapability = null;\n\n  constructor(messageHandler, loadingTask, networkStream, params, factory) {\n    this.messageHandler = messageHandler;\n    this.loadingTask = loadingTask;\n    this.commonObjs = new PDFObjects();\n    this.fontLoader = new FontLoader({\n      ownerDocument: params.ownerDocument,\n      styleElement: params.styleElement,\n    });\n    this._params = params;\n\n    this.canvasFactory = factory.canvasFactory;\n    this.filterFactory = factory.filterFactory;\n    this.cMapReaderFactory = factory.cMapReaderFactory;\n    this.standardFontDataFactory = factory.standardFontDataFactory;\n\n    this.destroyed = false;\n    this.destroyCapability = null;\n\n    this._networkStream = networkStream;\n    this._fullReader = null;\n    this._lastProgress = null;\n    this.downloadInfoCapability = new PromiseCapability();\n\n    this.setupMessageHandler();\n\n    if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n      // For testing purposes.\n      Object.defineProperty(this, \"getXFADatasets\", {\n        value: () => {\n          return this.messageHandler.sendWithPromise(\"GetXFADatasets\", null);\n        },\n      });\n      Object.defineProperty(this, \"getXRefPrevValue\", {\n        value: () => {\n          return this.messageHandler.sendWithPromise(\"GetXRefPrevValue\", null);\n        },\n      });\n      Object.defineProperty(this, \"getAnnotArray\", {\n        value: pageIndex => {\n          return this.messageHandler.sendWithPromise(\"GetAnnotArray\", {\n            pageIndex,\n          });\n        },\n      });\n    }\n  }\n\n  #cacheSimpleMethod(name, data = null) {\n    const cachedPromise = this.#methodPromises.get(name);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler.sendWithPromise(name, data);\n\n    this.#methodPromises.set(name, promise);\n    return promise;\n  }\n\n  get annotationStorage() {\n    return shadow(this, \"annotationStorage\", new AnnotationStorage());\n  }\n\n  getRenderingIntent(\n    intent,\n    annotationMode = AnnotationMode.ENABLE,\n    printAnnotationStorage = null,\n    isOpList = false\n  ) {\n    let renderingIntent = RenderingIntentFlag.DISPLAY; // Default value.\n    let annotationStorageSerializable = SerializableEmpty;\n\n    switch (intent) {\n      case \"any\":\n        renderingIntent = RenderingIntentFlag.ANY;\n        break;\n      case \"display\":\n        break;\n      case \"print\":\n        renderingIntent = RenderingIntentFlag.PRINT;\n        break;\n      default:\n        warn(`getRenderingIntent - invalid intent: ${intent}`);\n    }\n\n    switch (annotationMode) {\n      case AnnotationMode.DISABLE:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_DISABLE;\n        break;\n      case AnnotationMode.ENABLE:\n        break;\n      case AnnotationMode.ENABLE_FORMS:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_FORMS;\n        break;\n      case AnnotationMode.ENABLE_STORAGE:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_STORAGE;\n\n        const annotationStorage =\n          renderingIntent & RenderingIntentFlag.PRINT &&\n          printAnnotationStorage instanceof PrintAnnotationStorage\n            ? printAnnotationStorage\n            : this.annotationStorage;\n\n        annotationStorageSerializable = annotationStorage.serializable;\n        break;\n      default:\n        warn(`getRenderingIntent - invalid annotationMode: ${annotationMode}`);\n    }\n\n    if (isOpList) {\n      renderingIntent += RenderingIntentFlag.OPLIST;\n    }\n\n    return {\n      renderingIntent,\n      cacheKey: `${renderingIntent}_${annotationStorageSerializable.hash}`,\n      annotationStorageSerializable,\n    };\n  }\n\n  destroy() {\n    if (this.destroyCapability) {\n      return this.destroyCapability.promise;\n    }\n\n    this.destroyed = true;\n    this.destroyCapability = new PromiseCapability();\n\n    this.#passwordCapability?.reject(\n      new Error(\"Worker was destroyed during onPassword callback\")\n    );\n\n    const waitOn = [];\n    // We need to wait for all renderings to be completed, e.g.\n    // timeout/rAF can take a long time.\n    for (const page of this.#pageCache.values()) {\n      waitOn.push(page._destroy());\n    }\n    this.#pageCache.clear();\n    this.#pagePromises.clear();\n    // Allow `AnnotationStorage`-related clean-up when destroying the document.\n    if (this.hasOwnProperty(\"annotationStorage\")) {\n      this.annotationStorage.resetModified();\n    }\n    // We also need to wait for the worker to finish its long running tasks.\n    const terminated = this.messageHandler.sendWithPromise(\"Terminate\", null);\n    waitOn.push(terminated);\n\n    Promise.all(waitOn).then(() => {\n      this.commonObjs.clear();\n      this.fontLoader.clear();\n      this.#methodPromises.clear();\n      this.filterFactory.destroy();\n\n      this._networkStream?.cancelAllRequests(\n        new AbortException(\"Worker was terminated.\")\n      );\n\n      if (this.messageHandler) {\n        this.messageHandler.destroy();\n        this.messageHandler = null;\n      }\n      this.destroyCapability.resolve();\n    }, this.destroyCapability.reject);\n    return this.destroyCapability.promise;\n  }\n\n  setupMessageHandler() {\n    const { messageHandler, loadingTask } = this;\n\n    messageHandler.on(\"GetReader\", (data, sink) => {\n      assert(\n        this._networkStream,\n        \"GetReader - no `IPDFStream` instance available.\"\n      );\n      this._fullReader = this._networkStream.getFullReader();\n      this._fullReader.onProgress = evt => {\n        this._lastProgress = {\n          loaded: evt.loaded,\n          total: evt.total,\n        };\n      };\n      sink.onPull = () => {\n        this._fullReader\n          .read()\n          .then(function ({ value, done }) {\n            if (done) {\n              sink.close();\n              return;\n            }\n            assert(\n              value instanceof ArrayBuffer,\n              \"GetReader - expected an ArrayBuffer.\"\n            );\n            // Enqueue data chunk into sink, and transfer it\n            // to other side as `Transferable` object.\n            sink.enqueue(new Uint8Array(value), 1, [value]);\n          })\n          .catch(reason => {\n            sink.error(reason);\n          });\n      };\n\n      sink.onCancel = reason => {\n        this._fullReader.cancel(reason);\n\n        sink.ready.catch(readyReason => {\n          if (this.destroyed) {\n            return; // Ignore any pending requests if the worker was terminated.\n          }\n          throw readyReason;\n        });\n      };\n    });\n\n    messageHandler.on(\"ReaderHeadersReady\", data => {\n      const headersCapability = new PromiseCapability();\n      const fullReader = this._fullReader;\n      fullReader.headersReady.then(() => {\n        // If stream or range are disabled, it's our only way to report\n        // loading progress.\n        if (!fullReader.isStreamingSupported || !fullReader.isRangeSupported) {\n          if (this._lastProgress) {\n            loadingTask.onProgress?.(this._lastProgress);\n          }\n          fullReader.onProgress = evt => {\n            loadingTask.onProgress?.({\n              loaded: evt.loaded,\n              total: evt.total,\n            });\n          };\n        }\n\n        headersCapability.resolve({\n          isStreamingSupported: fullReader.isStreamingSupported,\n          isRangeSupported: fullReader.isRangeSupported,\n          contentLength: fullReader.contentLength,\n        });\n      }, headersCapability.reject);\n\n      return headersCapability.promise;\n    });\n\n    messageHandler.on(\"GetRangeReader\", (data, sink) => {\n      assert(\n        this._networkStream,\n        \"GetRangeReader - no `IPDFStream` instance available.\"\n      );\n      const rangeReader = this._networkStream.getRangeReader(\n        data.begin,\n        data.end\n      );\n\n      // When streaming is enabled, it's possible that the data requested here\n      // has already been fetched via the `_fullRequestReader` implementation.\n      // However, given that the PDF data is loaded asynchronously on the\n      // main-thread and then sent via `postMessage` to the worker-thread,\n      // it may not have been available during parsing (hence the attempt to\n      // use range requests here).\n      //\n      // To avoid wasting time and resources here, we'll thus *not* dispatch\n      // range requests if the data was already loaded but has not been sent to\n      // the worker-thread yet (which will happen via the `_fullRequestReader`).\n      if (!rangeReader) {\n        sink.close();\n        return;\n      }\n\n      sink.onPull = () => {\n        rangeReader\n          .read()\n          .then(function ({ value, done }) {\n            if (done) {\n              sink.close();\n              return;\n            }\n            assert(\n              value instanceof ArrayBuffer,\n              \"GetRangeReader - expected an ArrayBuffer.\"\n            );\n            sink.enqueue(new Uint8Array(value), 1, [value]);\n          })\n          .catch(reason => {\n            sink.error(reason);\n          });\n      };\n\n      sink.onCancel = reason => {\n        rangeReader.cancel(reason);\n\n        sink.ready.catch(readyReason => {\n          if (this.destroyed) {\n            return; // Ignore any pending requests if the worker was terminated.\n          }\n          throw readyReason;\n        });\n      };\n    });\n\n    messageHandler.on(\"GetDoc\", ({ pdfInfo }) => {\n      this._numPages = pdfInfo.numPages;\n      this._htmlForXfa = pdfInfo.htmlForXfa;\n      delete pdfInfo.htmlForXfa;\n      loadingTask._capability.resolve(new PDFDocumentProxy(pdfInfo, this));\n    });\n\n    messageHandler.on(\"DocException\", function (ex) {\n      let reason;\n      switch (ex.name) {\n        case \"PasswordException\":\n          reason = new PasswordException(ex.message, ex.code);\n          break;\n        case \"InvalidPDFException\":\n          reason = new InvalidPDFException(ex.message);\n          break;\n        case \"MissingPDFException\":\n          reason = new MissingPDFException(ex.message);\n          break;\n        case \"UnexpectedResponseException\":\n          reason = new UnexpectedResponseException(ex.message, ex.status);\n          break;\n        case \"UnknownErrorException\":\n          reason = new UnknownErrorException(ex.message, ex.details);\n          break;\n        default:\n          unreachable(\"DocException - expected a valid Error.\");\n      }\n      loadingTask._capability.reject(reason);\n    });\n\n    messageHandler.on(\"PasswordRequest\", exception => {\n      this.#passwordCapability = new PromiseCapability();\n\n      if (loadingTask.onPassword) {\n        const updatePassword = password => {\n          if (password instanceof Error) {\n            this.#passwordCapability.reject(password);\n          } else {\n            this.#passwordCapability.resolve({ password });\n          }\n        };\n        try {\n          loadingTask.onPassword(updatePassword, exception.code);\n        } catch (ex) {\n          this.#passwordCapability.reject(ex);\n        }\n      } else {\n        this.#passwordCapability.reject(\n          new PasswordException(exception.message, exception.code)\n        );\n      }\n      return this.#passwordCapability.promise;\n    });\n\n    messageHandler.on(\"DataLoaded\", data => {\n      // For consistency: Ensure that progress is always reported when the\n      // entire PDF file has been loaded, regardless of how it was fetched.\n      loadingTask.onProgress?.({\n        loaded: data.length,\n        total: data.length,\n      });\n\n      this.downloadInfoCapability.resolve(data);\n    });\n\n    messageHandler.on(\"StartRenderPage\", data => {\n      if (this.destroyed) {\n        return; // Ignore any pending requests if the worker was terminated.\n      }\n\n      const page = this.#pageCache.get(data.pageIndex);\n      page._startRenderPage(data.transparency, data.cacheKey);\n    });\n\n    messageHandler.on(\"commonobj\", ([id, type, exportedData]) => {\n      if (this.destroyed) {\n        return null; // Ignore any pending requests if the worker was terminated.\n      }\n\n      if (this.commonObjs.has(id)) {\n        return null;\n      }\n\n      switch (type) {\n        case \"Font\":\n          const params = this._params;\n\n          if (\"error\" in exportedData) {\n            const exportedError = exportedData.error;\n            warn(`Error during font loading: ${exportedError}`);\n            this.commonObjs.resolve(id, exportedError);\n            break;\n          }\n\n          const inspectFont =\n            params.pdfBug && globalThis.FontInspector?.enabled\n              ? (font, url) => globalThis.FontInspector.fontAdded(font, url)\n              : null;\n          const font = new FontFaceObject(exportedData, {\n            isEvalSupported: params.isEvalSupported,\n            disableFontFace: params.disableFontFace,\n            ignoreErrors: params.ignoreErrors,\n            inspectFont,\n          });\n\n          this.fontLoader\n            .bind(font)\n            .catch(reason => {\n              return messageHandler.sendWithPromise(\"FontFallback\", { id });\n            })\n            .finally(() => {\n              if (!params.fontExtraProperties && font.data) {\n                // Immediately release the `font.data` property once the font\n                // has been attached to the DOM, since it's no longer needed,\n                // rather than waiting for a `PDFDocumentProxy.cleanup` call.\n                // Since `font.data` could be very large, e.g. in some cases\n                // multiple megabytes, this will help reduce memory usage.\n                font.data = null;\n              }\n              this.commonObjs.resolve(id, font);\n            });\n          break;\n        case \"CopyLocalImage\":\n          const { imageRef } = exportedData;\n          assert(imageRef, \"The imageRef must be defined.\");\n\n          for (const pageProxy of this.#pageCache.values()) {\n            for (const [, data] of pageProxy.objs) {\n              if (data.ref !== imageRef) {\n                continue;\n              }\n              if (!data.dataLen) {\n                return null;\n              }\n              this.commonObjs.resolve(id, structuredClone(data));\n              return data.dataLen;\n            }\n          }\n          break;\n        case \"FontPath\":\n        case \"Image\":\n        case \"Pattern\":\n          this.commonObjs.resolve(id, exportedData);\n          break;\n        default:\n          throw new Error(`Got unknown common object type ${type}`);\n      }\n\n      return null;\n    });\n\n    messageHandler.on(\"obj\", ([id, pageIndex, type, imageData]) => {\n      if (this.destroyed) {\n        // Ignore any pending requests if the worker was terminated.\n        return;\n      }\n\n      const pageProxy = this.#pageCache.get(pageIndex);\n      if (pageProxy.objs.has(id)) {\n        return;\n      }\n      // Don't store data *after* cleanup has successfully run, see bug 1854145.\n      if (pageProxy._intentStates.size === 0) {\n        imageData?.bitmap?.close(); // Release any `ImageBitmap` data.\n        return;\n      }\n\n      switch (type) {\n        case \"Image\":\n          pageProxy.objs.resolve(id, imageData);\n\n          // Heuristic that will allow us not to store large data.\n          if (imageData?.dataLen > MAX_IMAGE_SIZE_TO_CACHE) {\n            pageProxy._maybeCleanupAfterRender = true;\n          }\n          break;\n        case \"Pattern\":\n          pageProxy.objs.resolve(id, imageData);\n          break;\n        default:\n          throw new Error(`Got unknown object type ${type}`);\n      }\n    });\n\n    messageHandler.on(\"DocProgress\", data => {\n      if (this.destroyed) {\n        return; // Ignore any pending requests if the worker was terminated.\n      }\n      loadingTask.onProgress?.({\n        loaded: data.loaded,\n        total: data.total,\n      });\n    });\n\n    messageHandler.on(\"FetchBuiltInCMap\", data => {\n      if (this.destroyed) {\n        return Promise.reject(new Error(\"Worker was destroyed.\"));\n      }\n      if (!this.cMapReaderFactory) {\n        return Promise.reject(\n          new Error(\n            \"CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.\"\n          )\n        );\n      }\n      return this.cMapReaderFactory.fetch(data);\n    });\n\n    messageHandler.on(\"FetchStandardFontData\", data => {\n      if (this.destroyed) {\n        return Promise.reject(new Error(\"Worker was destroyed.\"));\n      }\n      if (!this.standardFontDataFactory) {\n        return Promise.reject(\n          new Error(\n            \"StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.\"\n          )\n        );\n      }\n      return this.standardFontDataFactory.fetch(data);\n    });\n  }\n\n  getData() {\n    return this.messageHandler.sendWithPromise(\"GetData\", null);\n  }\n\n  saveDocument() {\n    if (this.annotationStorage.size <= 0) {\n      warn(\n        \"saveDocument called while `annotationStorage` is empty, \" +\n          \"please use the getData-method instead.\"\n      );\n    }\n    const { map, transfer } = this.annotationStorage.serializable;\n\n    return this.messageHandler\n      .sendWithPromise(\n        \"SaveDocument\",\n        {\n          isPureXfa: !!this._htmlForXfa,\n          numPages: this._numPages,\n          annotationStorage: map,\n          filename: this._fullReader?.filename ?? null,\n        },\n        transfer\n      )\n      .finally(() => {\n        this.annotationStorage.resetModified();\n      });\n  }\n\n  getPage(pageNumber) {\n    if (\n      !Number.isInteger(pageNumber) ||\n      pageNumber <= 0 ||\n      pageNumber > this._numPages\n    ) {\n      return Promise.reject(new Error(\"Invalid page request.\"));\n    }\n\n    const pageIndex = pageNumber - 1,\n      cachedPromise = this.#pagePromises.get(pageIndex);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler\n      .sendWithPromise(\"GetPage\", {\n        pageIndex,\n      })\n      .then(pageInfo => {\n        if (this.destroyed) {\n          throw new Error(\"Transport destroyed\");\n        }\n        const page = new PDFPageProxy(\n          pageIndex,\n          pageInfo,\n          this,\n          this._params.pdfBug\n        );\n        this.#pageCache.set(pageIndex, page);\n        return page;\n      });\n    this.#pagePromises.set(pageIndex, promise);\n    return promise;\n  }\n\n  getPageIndex(ref) {\n    if (\n      typeof ref !== \"object\" ||\n      ref === null ||\n      !Number.isInteger(ref.num) ||\n      ref.num < 0 ||\n      !Number.isInteger(ref.gen) ||\n      ref.gen < 0\n    ) {\n      return Promise.reject(new Error(\"Invalid pageIndex request.\"));\n    }\n    return this.messageHandler.sendWithPromise(\"GetPageIndex\", {\n      num: ref.num,\n      gen: ref.gen,\n    });\n  }\n\n  getAnnotations(pageIndex, intent) {\n    return this.messageHandler.sendWithPromise(\"GetAnnotations\", {\n      pageIndex,\n      intent,\n    });\n  }\n\n  getFieldObjects() {\n    return this.#cacheSimpleMethod(\"GetFieldObjects\");\n  }\n\n  hasJSActions() {\n    return this.#cacheSimpleMethod(\"HasJSActions\");\n  }\n\n  getCalculationOrderIds() {\n    return this.messageHandler.sendWithPromise(\"GetCalculationOrderIds\", null);\n  }\n\n  getDestinations() {\n    return this.messageHandler.sendWithPromise(\"GetDestinations\", null);\n  }\n\n  getDestination(id) {\n    if (typeof id !== \"string\") {\n      return Promise.reject(new Error(\"Invalid destination request.\"));\n    }\n    return this.messageHandler.sendWithPromise(\"GetDestination\", {\n      id,\n    });\n  }\n\n  getPageLabels() {\n    return this.messageHandler.sendWithPromise(\"GetPageLabels\", null);\n  }\n\n  getPageLayout() {\n    return this.messageHandler.sendWithPromise(\"GetPageLayout\", null);\n  }\n\n  getPageMode() {\n    return this.messageHandler.sendWithPromise(\"GetPageMode\", null);\n  }\n\n  getViewerPreferences() {\n    return this.messageHandler.sendWithPromise(\"GetViewerPreferences\", null);\n  }\n\n  getOpenAction() {\n    return this.messageHandler.sendWithPromise(\"GetOpenAction\", null);\n  }\n\n  getAttachments() {\n    return this.messageHandler.sendWithPromise(\"GetAttachments\", null);\n  }\n\n  getDocJSActions() {\n    return this.#cacheSimpleMethod(\"GetDocJSActions\");\n  }\n\n  getPageJSActions(pageIndex) {\n    return this.messageHandler.sendWithPromise(\"GetPageJSActions\", {\n      pageIndex,\n    });\n  }\n\n  getStructTree(pageIndex) {\n    return this.messageHandler.sendWithPromise(\"GetStructTree\", {\n      pageIndex,\n    });\n  }\n\n  getOutline() {\n    return this.messageHandler.sendWithPromise(\"GetOutline\", null);\n  }\n\n  getOptionalContentConfig() {\n    return this.messageHandler\n      .sendWithPromise(\"GetOptionalContentConfig\", null)\n      .then(results => {\n        return new OptionalContentConfig(results);\n      });\n  }\n\n  getPermissions() {\n    return this.messageHandler.sendWithPromise(\"GetPermissions\", null);\n  }\n\n  getMetadata() {\n    const name = \"GetMetadata\",\n      cachedPromise = this.#methodPromises.get(name);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler\n      .sendWithPromise(name, null)\n      .then(results => {\n        return {\n          info: results[0],\n          metadata: results[1] ? new Metadata(results[1]) : null,\n          contentDispositionFilename: this._fullReader?.filename ?? null,\n          contentLength: this._fullReader?.contentLength ?? null,\n        };\n      });\n    this.#methodPromises.set(name, promise);\n    return promise;\n  }\n\n  getMarkInfo() {\n    return this.messageHandler.sendWithPromise(\"GetMarkInfo\", null);\n  }\n\n  async startCleanup(keepLoadedFonts = false) {\n    if (this.destroyed) {\n      return; // No need to manually clean-up when destruction has started.\n    }\n    await this.messageHandler.sendWithPromise(\"Cleanup\", null);\n\n    for (const page of this.#pageCache.values()) {\n      const cleanupSuccessful = page.cleanup();\n\n      if (!cleanupSuccessful) {\n        throw new Error(\n          `startCleanup: Page ${page.pageNumber} is currently rendering.`\n        );\n      }\n    }\n    this.commonObjs.clear();\n    if (!keepLoadedFonts) {\n      this.fontLoader.clear();\n    }\n    this.#methodPromises.clear();\n    this.filterFactory.destroy(/* keepHCM = */ true);\n  }\n\n  get loadingParams() {\n    const { disableAutoFetch, enableXfa } = this._params;\n    return shadow(this, \"loadingParams\", {\n      disableAutoFetch,\n      enableXfa,\n    });\n  }\n}\n\n/**\n * A PDF document and page is built of many objects. E.g. there are objects for\n * fonts, images, rendering code, etc. These objects may get processed inside of\n * a worker. This class implements some basic methods to manage these objects.\n */\nclass PDFObjects {\n  #objs = Object.create(null);\n\n  /**\n   * Ensures there is an object defined for `objId`.\n   *\n   * @param {string} objId\n   * @returns {Object}\n   */\n  #ensureObj(objId) {\n    return (this.#objs[objId] ||= {\n      capability: new PromiseCapability(),\n      data: null,\n    });\n  }\n\n  /**\n   * If called *without* callback, this returns the data of `objId` but the\n   * object needs to be resolved. If it isn't, this method throws.\n   *\n   * If called *with* a callback, the callback is called with the data of the\n   * object once the object is resolved. That means, if you call this method\n   * and the object is already resolved, the callback gets called right away.\n   *\n   * @param {string} objId\n   * @param {function} [callback]\n   * @returns {any}\n   */\n  get(objId, callback = null) {\n    // If there is a callback, then the get can be async and the object is\n    // not required to be resolved right now.\n    if (callback) {\n      const obj = this.#ensureObj(objId);\n      obj.capability.promise.then(() => callback(obj.data));\n      return null;\n    }\n    // If there isn't a callback, the user expects to get the resolved data\n    // directly.\n    const obj = this.#objs[objId];\n    // If there isn't an object yet or the object isn't resolved, then the\n    // data isn't ready yet!\n    if (!obj?.capability.settled) {\n      throw new Error(`Requesting object that isn't resolved yet ${objId}.`);\n    }\n    return obj.data;\n  }\n\n  /**\n   * @param {string} objId\n   * @returns {boolean}\n   */\n  has(objId) {\n    const obj = this.#objs[objId];\n    return obj?.capability.settled ?? false;\n  }\n\n  /**\n   * Resolves the object `objId` with optional `data`.\n   *\n   * @param {string} objId\n   * @param {any} [data]\n   */\n  resolve(objId, data = null) {\n    const obj = this.#ensureObj(objId);\n    obj.data = data;\n    obj.capability.resolve();\n  }\n\n  clear() {\n    for (const objId in this.#objs) {\n      const { data } = this.#objs[objId];\n      data?.bitmap?.close(); // Release any `ImageBitmap` data.\n    }\n    this.#objs = Object.create(null);\n  }\n\n  *[Symbol.iterator]() {\n    for (const objId in this.#objs) {\n      const { capability, data } = this.#objs[objId];\n\n      if (!capability.settled) {\n        continue;\n      }\n      yield [objId, data];\n    }\n  }\n}\n\n/**\n * Allows controlling of the rendering tasks.\n */\nclass RenderTask {\n  #internalRenderTask = null;\n\n  constructor(internalRenderTask) {\n    this.#internalRenderTask = internalRenderTask;\n\n    /**\n     * Callback for incremental rendering -- a function that will be called\n     * each time the rendering is paused.  To continue rendering call the\n     * function that is the first argument to the callback.\n     * @type {function}\n     */\n    this.onContinue = null;\n\n    if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n      // For testing purposes.\n      Object.defineProperty(this, \"getOperatorList\", {\n        value: () => {\n          return this.#internalRenderTask.operatorList;\n        },\n      });\n    }\n  }\n\n  /**\n   * Promise for rendering task completion.\n   * @type {Promise<void>}\n   */\n  get promise() {\n    return this.#internalRenderTask.capability.promise;\n  }\n\n  /**\n   * Cancels the rendering task. If the task is currently rendering it will\n   * not be cancelled until graphics pauses with a timeout. The promise that\n   * this object extends will be rejected when cancelled.\n   *\n   * @param {number} [extraDelay]\n   */\n  cancel(extraDelay = 0) {\n    this.#internalRenderTask.cancel(/* error = */ null, extraDelay);\n  }\n\n  /**\n   * Whether form fields are rendered separately from the main operatorList.\n   * @type {boolean}\n   */\n  get separateAnnots() {\n    const { separateAnnots } = this.#internalRenderTask.operatorList;\n    if (!separateAnnots) {\n      return false;\n    }\n    const { annotationCanvasMap } = this.#internalRenderTask;\n    return (\n      separateAnnots.form ||\n      (separateAnnots.canvas && annotationCanvasMap?.size > 0)\n    );\n  }\n}\n\n/**\n * For internal use only.\n * @ignore\n */\nclass InternalRenderTask {\n  static #canvasInUse = new WeakSet();\n\n  constructor({\n    callback,\n    params,\n    objs,\n    commonObjs,\n    annotationCanvasMap,\n    operatorList,\n    pageIndex,\n    canvasFactory,\n    filterFactory,\n    useRequestAnimationFrame = false,\n    pdfBug = false,\n    pageColors = null,\n  }) {\n    this.callback = callback;\n    this.params = params;\n    this.objs = objs;\n    this.commonObjs = commonObjs;\n    this.annotationCanvasMap = annotationCanvasMap;\n    this.operatorListIdx = null;\n    this.operatorList = operatorList;\n    this._pageIndex = pageIndex;\n    this.canvasFactory = canvasFactory;\n    this.filterFactory = filterFactory;\n    this._pdfBug = pdfBug;\n    this.pageColors = pageColors;\n\n    this.running = false;\n    this.graphicsReadyCallback = null;\n    this.graphicsReady = false;\n    this._useRequestAnimationFrame =\n      useRequestAnimationFrame === true && typeof window !== \"undefined\";\n    this.cancelled = false;\n    this.capability = new PromiseCapability();\n    this.task = new RenderTask(this);\n    // caching this-bound methods\n    this._cancelBound = this.cancel.bind(this);\n    this._continueBound = this._continue.bind(this);\n    this._scheduleNextBound = this._scheduleNext.bind(this);\n    this._nextBound = this._next.bind(this);\n    this._canvas = params.canvasContext.canvas;\n  }\n\n  get completed() {\n    return this.capability.promise.catch(function () {\n      // Ignoring errors, since we only want to know when rendering is\n      // no longer pending.\n    });\n  }\n\n  initializeGraphics({ transparency = false, optionalContentConfig }) {\n    if (this.cancelled) {\n      return;\n    }\n    if (this._canvas) {\n      if (InternalRenderTask.#canvasInUse.has(this._canvas)) {\n        throw new Error(\n          \"Cannot use the same canvas during multiple render() operations. \" +\n            \"Use different canvas or ensure previous operations were \" +\n            \"cancelled or completed.\"\n        );\n      }\n      InternalRenderTask.#canvasInUse.add(this._canvas);\n    }\n\n    if (this._pdfBug && globalThis.StepperManager?.enabled) {\n      this.stepper = globalThis.StepperManager.create(this._pageIndex);\n      this.stepper.init(this.operatorList);\n      this.stepper.nextBreakPoint = this.stepper.getNextBreakPoint();\n    }\n    const { canvasContext, viewport, transform, background } = this.params;\n\n    this.gfx = new CanvasGraphics(\n      canvasContext,\n      this.commonObjs,\n      this.objs,\n      this.canvasFactory,\n      this.filterFactory,\n      { optionalContentConfig },\n      this.annotationCanvasMap,\n      this.pageColors\n    );\n    this.gfx.beginDrawing({\n      transform,\n      viewport,\n      transparency,\n      background,\n    });\n    this.operatorListIdx = 0;\n    this.graphicsReady = true;\n    this.graphicsReadyCallback?.();\n  }\n\n  cancel(error = null, extraDelay = 0) {\n    this.running = false;\n    this.cancelled = true;\n    this.gfx?.endDrawing();\n    InternalRenderTask.#canvasInUse.delete(this._canvas);\n\n    this.callback(\n      error ||\n        new RenderingCancelledException(\n          `Rendering cancelled, page ${this._pageIndex + 1}`,\n          extraDelay\n        )\n    );\n  }\n\n  operatorListChanged() {\n    if (!this.graphicsReady) {\n      this.graphicsReadyCallback ||= this._continueBound;\n      return;\n    }\n    this.stepper?.updateOperatorList(this.operatorList);\n\n    if (this.running) {\n      return;\n    }\n    this._continue();\n  }\n\n  _continue() {\n    this.running = true;\n    if (this.cancelled) {\n      return;\n    }\n    if (this.task.onContinue) {\n      this.task.onContinue(this._scheduleNextBound);\n    } else {\n      this._scheduleNext();\n    }\n  }\n\n  _scheduleNext() {\n    if (this._useRequestAnimationFrame) {\n      window.requestAnimationFrame(() => {\n        this._nextBound().catch(this._cancelBound);\n      });\n    } else {\n      Promise.resolve().then(this._nextBound).catch(this._cancelBound);\n    }\n  }\n\n  async _next() {\n    if (this.cancelled) {\n      return;\n    }\n    this.operatorListIdx = this.gfx.executeOperatorList(\n      this.operatorList,\n      this.operatorListIdx,\n      this._continueBound,\n      this.stepper\n    );\n    if (this.operatorListIdx === this.operatorList.argsArray.length) {\n      this.running = false;\n      if (this.operatorList.lastChunk) {\n        this.gfx.endDrawing();\n        InternalRenderTask.#canvasInUse.delete(this._canvas);\n\n        this.callback();\n      }\n    }\n  }\n}\n\n/** @type {string} */\nconst version =\n  typeof PDFJSDev !== \"undefined\" ? PDFJSDev.eval(\"BUNDLE_VERSION\") : null;\n/** @type {string} */\nconst build =\n  typeof PDFJSDev !== \"undefined\" ? PDFJSDev.eval(\"BUNDLE_BUILD\") : null;\n\nexport {\n  build,\n  DefaultCanvasFactory,\n  DefaultCMapReaderFactory,\n  DefaultFilterFactory,\n  DefaultStandardFontDataFactory,\n  getDocument,\n  LoopbackPort,\n  PDFDataRangeTransport,\n  PDFDocumentLoadingTask,\n  PDFDocumentProxy,\n  PDFPageProxy,\n  PDFWorker,\n  PDFWorkerUtil,\n  RenderTask,\n  version,\n};\n","/* Copyright 2015 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CMapCompressionType, unreachable } from \"../shared/util.js\";\n\nclass BaseFilterFactory {\n  constructor() {\n    if (this.constructor === BaseFilterFactory) {\n      unreachable(\"Cannot initialize BaseFilterFactory.\");\n    }\n  }\n\n  addFilter(maps) {\n    return \"none\";\n  }\n\n  addHCMFilter(fgColor, bgColor) {\n    return \"none\";\n  }\n\n  addHighlightHCMFilter(fgColor, bgColor, newFgColor, newBgColor) {\n    return \"none\";\n  }\n\n  destroy(keepHCM = false) {}\n}\n\nclass BaseCanvasFactory {\n  constructor() {\n    if (this.constructor === BaseCanvasFactory) {\n      unreachable(\"Cannot initialize BaseCanvasFactory.\");\n    }\n  }\n\n  create(width, height) {\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid canvas size\");\n    }\n    const canvas = this._createCanvas(width, height);\n    return {\n      canvas,\n      context: canvas.getContext(\"2d\"),\n    };\n  }\n\n  reset(canvasAndContext, width, height) {\n    if (!canvasAndContext.canvas) {\n      throw new Error(\"Canvas is not specified\");\n    }\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid canvas size\");\n    }\n    canvasAndContext.canvas.width = width;\n    canvasAndContext.canvas.height = height;\n  }\n\n  destroy(canvasAndContext) {\n    if (!canvasAndContext.canvas) {\n      throw new Error(\"Canvas is not specified\");\n    }\n    // Zeroing the width and height cause Firefox to release graphics\n    // resources immediately, which can greatly reduce memory consumption.\n    canvasAndContext.canvas.width = 0;\n    canvasAndContext.canvas.height = 0;\n    canvasAndContext.canvas = null;\n    canvasAndContext.context = null;\n  }\n\n  /**\n   * @ignore\n   */\n  _createCanvas(width, height) {\n    unreachable(\"Abstract method `_createCanvas` called.\");\n  }\n}\n\nclass BaseCMapReaderFactory {\n  constructor({ baseUrl = null, isCompressed = true }) {\n    if (this.constructor === BaseCMapReaderFactory) {\n      unreachable(\"Cannot initialize BaseCMapReaderFactory.\");\n    }\n    this.baseUrl = baseUrl;\n    this.isCompressed = isCompressed;\n  }\n\n  async fetch({ name }) {\n    if (!this.baseUrl) {\n      throw new Error(\n        'The CMap \"baseUrl\" parameter must be specified, ensure that ' +\n          'the \"cMapUrl\" and \"cMapPacked\" API parameters are provided.'\n      );\n    }\n    if (!name) {\n      throw new Error(\"CMap name must be specified.\");\n    }\n    const url = this.baseUrl + name + (this.isCompressed ? \".bcmap\" : \"\");\n    const compressionType = this.isCompressed\n      ? CMapCompressionType.BINARY\n      : CMapCompressionType.NONE;\n\n    return this._fetchData(url, compressionType).catch(reason => {\n      throw new Error(\n        `Unable to load ${this.isCompressed ? \"binary \" : \"\"}CMap at: ${url}`\n      );\n    });\n  }\n\n  /**\n   * @ignore\n   */\n  _fetchData(url, compressionType) {\n    unreachable(\"Abstract method `_fetchData` called.\");\n  }\n}\n\nclass BaseStandardFontDataFactory {\n  constructor({ baseUrl = null }) {\n    if (this.constructor === BaseStandardFontDataFactory) {\n      unreachable(\"Cannot initialize BaseStandardFontDataFactory.\");\n    }\n    this.baseUrl = baseUrl;\n  }\n\n  async fetch({ filename }) {\n    if (!this.baseUrl) {\n      throw new Error(\n        'The standard font \"baseUrl\" parameter must be specified, ensure that ' +\n          'the \"standardFontDataUrl\" API parameter is provided.'\n      );\n    }\n    if (!filename) {\n      throw new Error(\"Font filename must be specified.\");\n    }\n    const url = `${this.baseUrl}${filename}`;\n\n    return this._fetchData(url).catch(reason => {\n      throw new Error(`Unable to load font data at: ${url}`);\n    });\n  }\n\n  /**\n   * @ignore\n   */\n  _fetchData(url) {\n    unreachable(\"Abstract method `_fetchData` called.\");\n  }\n}\n\nclass BaseSVGFactory {\n  constructor() {\n    if (this.constructor === BaseSVGFactory) {\n      unreachable(\"Cannot initialize BaseSVGFactory.\");\n    }\n  }\n\n  create(width, height, skipDimensions = false) {\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid SVG dimensions\");\n    }\n    const svg = this._createSVG(\"svg:svg\");\n    svg.setAttribute(\"version\", \"1.1\");\n\n    if (!skipDimensions) {\n      svg.setAttribute(\"width\", `${width}px`);\n      svg.setAttribute(\"height\", `${height}px`);\n    }\n\n    svg.setAttribute(\"preserveAspectRatio\", \"none\");\n    svg.setAttribute(\"viewBox\", `0 0 ${width} ${height}`);\n\n    return svg;\n  }\n\n  createElement(type) {\n    if (typeof type !== \"string\") {\n      throw new Error(\"Invalid SVG element type\");\n    }\n    return this._createSVG(type);\n  }\n\n  /**\n   * @ignore\n   */\n  _createSVG(type) {\n    unreachable(\"Abstract method `_createSVG` called.\");\n  }\n}\n\nexport {\n  BaseCanvasFactory,\n  BaseCMapReaderFactory,\n  BaseFilterFactory,\n  BaseStandardFontDataFactory,\n  BaseSVGFactory,\n};\n","/* Copyright 2014 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FormatError, info, unreachable, Util } from \"../shared/util.js\";\nimport { getCurrentTransform } from \"./display_utils.js\";\n\nconst PathType = {\n  FILL: \"Fill\",\n  STROKE: \"Stroke\",\n  SHADING: \"Shading\",\n};\n\nfunction applyBoundingBox(ctx, bbox) {\n  if (!bbox) {\n    return;\n  }\n  const width = bbox[2] - bbox[0];\n  const height = bbox[3] - bbox[1];\n  const region = new Path2D();\n  region.rect(bbox[0], bbox[1], width, height);\n  ctx.clip(region);\n}\n\nclass BaseShadingPattern {\n  constructor() {\n    if (this.constructor === BaseShadingPattern) {\n      unreachable(\"Cannot initialize BaseShadingPattern.\");\n    }\n  }\n\n  getPattern() {\n    unreachable(\"Abstract method `getPattern` called.\");\n  }\n}\n\nclass RadialAxialShadingPattern extends BaseShadingPattern {\n  constructor(IR) {\n    super();\n    this._type = IR[1];\n    this._bbox = IR[2];\n    this._colorStops = IR[3];\n    this._p0 = IR[4];\n    this._p1 = IR[5];\n    this._r0 = IR[6];\n    this._r1 = IR[7];\n    this.matrix = null;\n  }\n\n  _createGradient(ctx) {\n    let grad;\n    if (this._type === \"axial\") {\n      grad = ctx.createLinearGradient(\n        this._p0[0],\n        this._p0[1],\n        this._p1[0],\n        this._p1[1]\n      );\n    } else if (this._type === \"radial\") {\n      grad = ctx.createRadialGradient(\n        this._p0[0],\n        this._p0[1],\n        this._r0,\n        this._p1[0],\n        this._p1[1],\n        this._r1\n      );\n    }\n\n    for (const colorStop of this._colorStops) {\n      grad.addColorStop(colorStop[0], colorStop[1]);\n    }\n    return grad;\n  }\n\n  getPattern(ctx, owner, inverse, pathType) {\n    let pattern;\n    if (pathType === PathType.STROKE || pathType === PathType.FILL) {\n      const ownerBBox = owner.current.getClippedPathBoundingBox(\n        pathType,\n        getCurrentTransform(ctx)\n      ) || [0, 0, 0, 0];\n      // Create a canvas that is only as big as the current path. This doesn't\n      // allow us to cache the pattern, but it generally creates much smaller\n      // canvases and saves memory use. See bug 1722807 for an example.\n      const width = Math.ceil(ownerBBox[2] - ownerBBox[0]) || 1;\n      const height = Math.ceil(ownerBBox[3] - ownerBBox[1]) || 1;\n\n      const tmpCanvas = owner.cachedCanvases.getCanvas(\n        \"pattern\",\n        width,\n        height,\n        true\n      );\n\n      const tmpCtx = tmpCanvas.context;\n      tmpCtx.clearRect(0, 0, tmpCtx.canvas.width, tmpCtx.canvas.height);\n      tmpCtx.beginPath();\n      tmpCtx.rect(0, 0, tmpCtx.canvas.width, tmpCtx.canvas.height);\n      // Non shading fill patterns are positioned relative to the base transform\n      // (usually the page's initial transform), but we may have created a\n      // smaller canvas based on the path, so we must account for the shift.\n      tmpCtx.translate(-ownerBBox[0], -ownerBBox[1]);\n      inverse = Util.transform(inverse, [\n        1,\n        0,\n        0,\n        1,\n        ownerBBox[0],\n        ownerBBox[1],\n      ]);\n\n      tmpCtx.transform(...owner.baseTransform);\n      if (this.matrix) {\n        tmpCtx.transform(...this.matrix);\n      }\n      applyBoundingBox(tmpCtx, this._bbox);\n\n      tmpCtx.fillStyle = this._createGradient(tmpCtx);\n      tmpCtx.fill();\n\n      pattern = ctx.createPattern(tmpCanvas.canvas, \"no-repeat\");\n      const domMatrix = new DOMMatrix(inverse);\n      pattern.setTransform(domMatrix);\n    } else {\n      // Shading fills are applied relative to the current matrix which is also\n      // how canvas gradients work, so there's no need to do anything special\n      // here.\n      applyBoundingBox(ctx, this._bbox);\n      pattern = this._createGradient(ctx);\n    }\n    return pattern;\n  }\n}\n\nfunction drawTriangle(data, context, p1, p2, p3, c1, c2, c3) {\n  // Very basic Gouraud-shaded triangle rasterization algorithm.\n  const coords = context.coords,\n    colors = context.colors;\n  const bytes = data.data,\n    rowSize = data.width * 4;\n  let tmp;\n  if (coords[p1 + 1] > coords[p2 + 1]) {\n    tmp = p1;\n    p1 = p2;\n    p2 = tmp;\n    tmp = c1;\n    c1 = c2;\n    c2 = tmp;\n  }\n  if (coords[p2 + 1] > coords[p3 + 1]) {\n    tmp = p2;\n    p2 = p3;\n    p3 = tmp;\n    tmp = c2;\n    c2 = c3;\n    c3 = tmp;\n  }\n  if (coords[p1 + 1] > coords[p2 + 1]) {\n    tmp = p1;\n    p1 = p2;\n    p2 = tmp;\n    tmp = c1;\n    c1 = c2;\n    c2 = tmp;\n  }\n  const x1 = (coords[p1] + context.offsetX) * context.scaleX;\n  const y1 = (coords[p1 + 1] + context.offsetY) * context.scaleY;\n  const x2 = (coords[p2] + context.offsetX) * context.scaleX;\n  const y2 = (coords[p2 + 1] + context.offsetY) * context.scaleY;\n  const x3 = (coords[p3] + context.offsetX) * context.scaleX;\n  const y3 = (coords[p3 + 1] + context.offsetY) * context.scaleY;\n  if (y1 >= y3) {\n    return;\n  }\n  const c1r = colors[c1],\n    c1g = colors[c1 + 1],\n    c1b = colors[c1 + 2];\n  const c2r = colors[c2],\n    c2g = colors[c2 + 1],\n    c2b = colors[c2 + 2];\n  const c3r = colors[c3],\n    c3g = colors[c3 + 1],\n    c3b = colors[c3 + 2];\n\n  const minY = Math.round(y1),\n    maxY = Math.round(y3);\n  let xa, car, cag, cab;\n  let xb, cbr, cbg, cbb;\n  for (let y = minY; y <= maxY; y++) {\n    if (y < y2) {\n      const k = y < y1 ? 0 : (y1 - y) / (y1 - y2);\n      xa = x1 - (x1 - x2) * k;\n      car = c1r - (c1r - c2r) * k;\n      cag = c1g - (c1g - c2g) * k;\n      cab = c1b - (c1b - c2b) * k;\n    } else {\n      let k;\n      if (y > y3) {\n        k = 1;\n      } else if (y2 === y3) {\n        k = 0;\n      } else {\n        k = (y2 - y) / (y2 - y3);\n      }\n      xa = x2 - (x2 - x3) * k;\n      car = c2r - (c2r - c3r) * k;\n      cag = c2g - (c2g - c3g) * k;\n      cab = c2b - (c2b - c3b) * k;\n    }\n\n    let k;\n    if (y < y1) {\n      k = 0;\n    } else if (y > y3) {\n      k = 1;\n    } else {\n      k = (y1 - y) / (y1 - y3);\n    }\n    xb = x1 - (x1 - x3) * k;\n    cbr = c1r - (c1r - c3r) * k;\n    cbg = c1g - (c1g - c3g) * k;\n    cbb = c1b - (c1b - c3b) * k;\n    const x1_ = Math.round(Math.min(xa, xb));\n    const x2_ = Math.round(Math.max(xa, xb));\n    let j = rowSize * y + x1_ * 4;\n    for (let x = x1_; x <= x2_; x++) {\n      k = (xa - x) / (xa - xb);\n      if (k < 0) {\n        k = 0;\n      } else if (k > 1) {\n        k = 1;\n      }\n      bytes[j++] = (car - (car - cbr) * k) | 0;\n      bytes[j++] = (cag - (cag - cbg) * k) | 0;\n      bytes[j++] = (cab - (cab - cbb) * k) | 0;\n      bytes[j++] = 255;\n    }\n  }\n}\n\nfunction drawFigure(data, figure, context) {\n  const ps = figure.coords;\n  const cs = figure.colors;\n  let i, ii;\n  switch (figure.type) {\n    case \"lattice\":\n      const verticesPerRow = figure.verticesPerRow;\n      const rows = Math.floor(ps.length / verticesPerRow) - 1;\n      const cols = verticesPerRow - 1;\n      for (i = 0; i < rows; i++) {\n        let q = i * verticesPerRow;\n        for (let j = 0; j < cols; j++, q++) {\n          drawTriangle(\n            data,\n            context,\n            ps[q],\n            ps[q + 1],\n            ps[q + verticesPerRow],\n            cs[q],\n            cs[q + 1],\n            cs[q + verticesPerRow]\n          );\n          drawTriangle(\n            data,\n            context,\n            ps[q + verticesPerRow + 1],\n            ps[q + 1],\n            ps[q + verticesPerRow],\n            cs[q + verticesPerRow + 1],\n            cs[q + 1],\n            cs[q + verticesPerRow]\n          );\n        }\n      }\n      break;\n    case \"triangles\":\n      for (i = 0, ii = ps.length; i < ii; i += 3) {\n        drawTriangle(\n          data,\n          context,\n          ps[i],\n          ps[i + 1],\n          ps[i + 2],\n          cs[i],\n          cs[i + 1],\n          cs[i + 2]\n        );\n      }\n      break;\n    default:\n      throw new Error(\"illegal figure\");\n  }\n}\n\nclass MeshShadingPattern extends BaseShadingPattern {\n  constructor(IR) {\n    super();\n    this._coords = IR[2];\n    this._colors = IR[3];\n    this._figures = IR[4];\n    this._bounds = IR[5];\n    this._bbox = IR[7];\n    this._background = IR[8];\n    this.matrix = null;\n  }\n\n  _createMeshCanvas(combinedScale, backgroundColor, cachedCanvases) {\n    // we will increase scale on some weird factor to let antialiasing take\n    // care of \"rough\" edges\n    const EXPECTED_SCALE = 1.1;\n    // MAX_PATTERN_SIZE is used to avoid OOM situation.\n    const MAX_PATTERN_SIZE = 3000; // 10in @ 300dpi shall be enough\n    // We need to keep transparent border around our pattern for fill():\n    // createPattern with 'no-repeat' will bleed edges across entire area.\n    const BORDER_SIZE = 2;\n\n    const offsetX = Math.floor(this._bounds[0]);\n    const offsetY = Math.floor(this._bounds[1]);\n    const boundsWidth = Math.ceil(this._bounds[2]) - offsetX;\n    const boundsHeight = Math.ceil(this._bounds[3]) - offsetY;\n\n    const width = Math.min(\n      Math.ceil(Math.abs(boundsWidth * combinedScale[0] * EXPECTED_SCALE)),\n      MAX_PATTERN_SIZE\n    );\n    const height = Math.min(\n      Math.ceil(Math.abs(boundsHeight * combinedScale[1] * EXPECTED_SCALE)),\n      MAX_PATTERN_SIZE\n    );\n    const scaleX = boundsWidth / width;\n    const scaleY = boundsHeight / height;\n\n    const context = {\n      coords: this._coords,\n      colors: this._colors,\n      offsetX: -offsetX,\n      offsetY: -offsetY,\n      scaleX: 1 / scaleX,\n      scaleY: 1 / scaleY,\n    };\n\n    const paddedWidth = width + BORDER_SIZE * 2;\n    const paddedHeight = height + BORDER_SIZE * 2;\n\n    const tmpCanvas = cachedCanvases.getCanvas(\n      \"mesh\",\n      paddedWidth,\n      paddedHeight,\n      false\n    );\n    const tmpCtx = tmpCanvas.context;\n\n    const data = tmpCtx.createImageData(width, height);\n    if (backgroundColor) {\n      const bytes = data.data;\n      for (let i = 0, ii = bytes.length; i < ii; i += 4) {\n        bytes[i] = backgroundColor[0];\n        bytes[i + 1] = backgroundColor[1];\n        bytes[i + 2] = backgroundColor[2];\n        bytes[i + 3] = 255;\n      }\n    }\n    for (const figure of this._figures) {\n      drawFigure(data, figure, context);\n    }\n    tmpCtx.putImageData(data, BORDER_SIZE, BORDER_SIZE);\n    const canvas = tmpCanvas.canvas;\n\n    return {\n      canvas,\n      offsetX: offsetX - BORDER_SIZE * scaleX,\n      offsetY: offsetY - BORDER_SIZE * scaleY,\n      scaleX,\n      scaleY,\n    };\n  }\n\n  getPattern(ctx, owner, inverse, pathType) {\n    applyBoundingBox(ctx, this._bbox);\n    let scale;\n    if (pathType === PathType.SHADING) {\n      scale = Util.singularValueDecompose2dScale(getCurrentTransform(ctx));\n    } else {\n      // Obtain scale from matrix and current transformation matrix.\n      scale = Util.singularValueDecompose2dScale(owner.baseTransform);\n      if (this.matrix) {\n        const matrixScale = Util.singularValueDecompose2dScale(this.matrix);\n        scale = [scale[0] * matrixScale[0], scale[1] * matrixScale[1]];\n      }\n    }\n\n    // Rasterizing on the main thread since sending/queue large canvases\n    // might cause OOM.\n    const temporaryPatternCanvas = this._createMeshCanvas(\n      scale,\n      pathType === PathType.SHADING ? null : this._background,\n      owner.cachedCanvases\n    );\n\n    if (pathType !== PathType.SHADING) {\n      ctx.setTransform(...owner.baseTransform);\n      if (this.matrix) {\n        ctx.transform(...this.matrix);\n      }\n    }\n\n    ctx.translate(\n      temporaryPatternCanvas.offsetX,\n      temporaryPatternCanvas.offsetY\n    );\n    ctx.scale(temporaryPatternCanvas.scaleX, temporaryPatternCanvas.scaleY);\n\n    return ctx.createPattern(temporaryPatternCanvas.canvas, \"no-repeat\");\n  }\n}\n\nclass DummyShadingPattern extends BaseShadingPattern {\n  getPattern() {\n    return \"hotpink\";\n  }\n}\n\nfunction getShadingPattern(IR) {\n  switch (IR[0]) {\n    case \"RadialAxial\":\n      return new RadialAxialShadingPattern(IR);\n    case \"Mesh\":\n      return new MeshShadingPattern(IR);\n    case \"Dummy\":\n      return new DummyShadingPattern();\n  }\n  throw new Error(`Unknown IR type: ${IR[0]}`);\n}\n\nconst PaintType = {\n  COLORED: 1,\n  UNCOLORED: 2,\n};\n\nclass TilingPattern {\n  // 10in @ 300dpi shall be enough.\n  static MAX_PATTERN_SIZE = 3000;\n\n  constructor(IR, color, ctx, canvasGraphicsFactory, baseTransform) {\n    this.operatorList = IR[2];\n    this.matrix = IR[3] || [1, 0, 0, 1, 0, 0];\n    this.bbox = IR[4];\n    this.xstep = IR[5];\n    this.ystep = IR[6];\n    this.paintType = IR[7];\n    this.tilingType = IR[8];\n    this.color = color;\n    this.ctx = ctx;\n    this.canvasGraphicsFactory = canvasGraphicsFactory;\n    this.baseTransform = baseTransform;\n  }\n\n  createPatternCanvas(owner) {\n    const operatorList = this.operatorList;\n    const bbox = this.bbox;\n    const xstep = this.xstep;\n    const ystep = this.ystep;\n    const paintType = this.paintType;\n    const tilingType = this.tilingType;\n    const color = this.color;\n    const canvasGraphicsFactory = this.canvasGraphicsFactory;\n\n    info(\"TilingType: \" + tilingType);\n\n    // A tiling pattern as defined by PDF spec 8.7.2 is a cell whose size is\n    // described by bbox, and may repeat regularly by shifting the cell by\n    // xstep and ystep.\n    // Because the HTML5 canvas API does not support pattern repetition with\n    // gaps in between, we use the xstep/ystep instead of the bbox's size.\n    //\n    // This has the following consequences (similarly for ystep):\n    //\n    // - If xstep is the same as bbox, then there is no observable difference.\n    //\n    // - If xstep is larger than bbox, then the pattern canvas is partially\n    //   empty: the area bounded by bbox is painted, the outside area is void.\n    //\n    // - If xstep is smaller than bbox, then the pixels between xstep and the\n    //   bbox boundary will be missing. This is INCORRECT behavior.\n    //   \"Figures on adjacent tiles should not overlap\" (PDF spec 8.7.3.1),\n    //   but overlapping cells without common pixels are still valid.\n    //   TODO: Fix the implementation, to allow this scenario to be painted\n    //   correctly.\n\n    const x0 = bbox[0],\n      y0 = bbox[1],\n      x1 = bbox[2],\n      y1 = bbox[3];\n\n    // Obtain scale from matrix and current transformation matrix.\n    const matrixScale = Util.singularValueDecompose2dScale(this.matrix);\n    const curMatrixScale = Util.singularValueDecompose2dScale(\n      this.baseTransform\n    );\n    const combinedScale = [\n      matrixScale[0] * curMatrixScale[0],\n      matrixScale[1] * curMatrixScale[1],\n    ];\n\n    // Use width and height values that are as close as possible to the end\n    // result when the pattern is used. Too low value makes the pattern look\n    // blurry. Too large value makes it look too crispy.\n    const dimx = this.getSizeAndScale(\n      xstep,\n      this.ctx.canvas.width,\n      combinedScale[0]\n    );\n    const dimy = this.getSizeAndScale(\n      ystep,\n      this.ctx.canvas.height,\n      combinedScale[1]\n    );\n\n    const tmpCanvas = owner.cachedCanvases.getCanvas(\n      \"pattern\",\n      dimx.size,\n      dimy.size,\n      true\n    );\n    const tmpCtx = tmpCanvas.context;\n    const graphics = canvasGraphicsFactory.createCanvasGraphics(tmpCtx);\n    graphics.groupLevel = owner.groupLevel;\n\n    this.setFillAndStrokeStyleToContext(graphics, paintType, color);\n\n    let adjustedX0 = x0;\n    let adjustedY0 = y0;\n    let adjustedX1 = x1;\n    let adjustedY1 = y1;\n    // Some bounding boxes have negative x0/y0 coordinates which will cause the\n    // some of the drawing to be off of the canvas. To avoid this shift the\n    // bounding box over.\n    if (x0 < 0) {\n      adjustedX0 = 0;\n      adjustedX1 += Math.abs(x0);\n    }\n    if (y0 < 0) {\n      adjustedY0 = 0;\n      adjustedY1 += Math.abs(y0);\n    }\n    tmpCtx.translate(-(dimx.scale * adjustedX0), -(dimy.scale * adjustedY0));\n    graphics.transform(dimx.scale, 0, 0, dimy.scale, 0, 0);\n\n    // To match CanvasGraphics beginDrawing we must save the context here or\n    // else we end up with unbalanced save/restores.\n    tmpCtx.save();\n\n    this.clipBbox(graphics, adjustedX0, adjustedY0, adjustedX1, adjustedY1);\n\n    graphics.baseTransform = getCurrentTransform(graphics.ctx);\n\n    graphics.executeOperatorList(operatorList);\n\n    graphics.endDrawing();\n\n    return {\n      canvas: tmpCanvas.canvas,\n      scaleX: dimx.scale,\n      scaleY: dimy.scale,\n      offsetX: adjustedX0,\n      offsetY: adjustedY0,\n    };\n  }\n\n  getSizeAndScale(step, realOutputSize, scale) {\n    // xstep / ystep may be negative -- normalize.\n    step = Math.abs(step);\n    // MAX_PATTERN_SIZE is used to avoid OOM situation.\n    // Use the destination canvas's size if it is bigger than the hard-coded\n    // limit of MAX_PATTERN_SIZE to avoid clipping patterns that cover the\n    // whole canvas.\n    const maxSize = Math.max(TilingPattern.MAX_PATTERN_SIZE, realOutputSize);\n    let size = Math.ceil(step * scale);\n    if (size >= maxSize) {\n      size = maxSize;\n    } else {\n      scale = size / step;\n    }\n    return { scale, size };\n  }\n\n  clipBbox(graphics, x0, y0, x1, y1) {\n    const bboxWidth = x1 - x0;\n    const bboxHeight = y1 - y0;\n    graphics.ctx.rect(x0, y0, bboxWidth, bboxHeight);\n    graphics.current.updateRectMinMax(getCurrentTransform(graphics.ctx), [\n      x0,\n      y0,\n      x1,\n      y1,\n    ]);\n    graphics.clip();\n    graphics.endPath();\n  }\n\n  setFillAndStrokeStyleToContext(graphics, paintType, color) {\n    const context = graphics.ctx,\n      current = graphics.current;\n    switch (paintType) {\n      case PaintType.COLORED:\n        const ctx = this.ctx;\n        context.fillStyle = ctx.fillStyle;\n        context.strokeStyle = ctx.strokeStyle;\n        current.fillColor = ctx.fillStyle;\n        current.strokeColor = ctx.strokeStyle;\n        break;\n      case PaintType.UNCOLORED:\n        const cssColor = Util.makeHexColor(color[0], color[1], color[2]);\n        context.fillStyle = cssColor;\n        context.strokeStyle = cssColor;\n        // Set color needed by image masks (fixes issues 3226 and 8741).\n        current.fillColor = cssColor;\n        current.strokeColor = cssColor;\n        break;\n      default:\n        throw new FormatError(`Unsupported paint type: ${paintType}`);\n    }\n  }\n\n  getPattern(ctx, owner, inverse, pathType) {\n    // PDF spec 8.7.2 NOTE 1: pattern's matrix is relative to initial matrix.\n    let matrix = inverse;\n    if (pathType !== PathType.SHADING) {\n      matrix = Util.transform(matrix, owner.baseTransform);\n      if (this.matrix) {\n        matrix = Util.transform(matrix, this.matrix);\n      }\n    }\n\n    const temporaryPatternCanvas = this.createPatternCanvas(owner);\n\n    let domMatrix = new DOMMatrix(matrix);\n    // Rescale and so that the ctx.createPattern call generates a pattern with\n    // the desired size.\n    domMatrix = domMatrix.translate(\n      temporaryPatternCanvas.offsetX,\n      temporaryPatternCanvas.offsetY\n    );\n    domMatrix = domMatrix.scale(\n      1 / temporaryPatternCanvas.scaleX,\n      1 / temporaryPatternCanvas.scaleY\n    );\n\n    const pattern = ctx.createPattern(temporaryPatternCanvas.canvas, \"repeat\");\n    pattern.setTransform(domMatrix);\n\n    return pattern;\n  }\n}\n\nexport { getShadingPattern, PathType, TilingPattern };\n","/* Copyright 2022 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FeatureTest, ImageKind } from \"./util.js\";\n\nfunction convertToRGBA(params) {\n  switch (params.kind) {\n    case ImageKind.GRAYSCALE_1BPP:\n      return convertBlackAndWhiteToRGBA(params);\n    case ImageKind.RGB_24BPP:\n      return convertRGBToRGBA(params);\n  }\n\n  return null;\n}\n\nfunction convertBlackAndWhiteToRGBA({\n  src,\n  srcPos = 0,\n  dest,\n  width,\n  height,\n  nonBlackColor = 0xffffffff,\n  inverseDecode = false,\n}) {\n  const black = FeatureTest.isLittleEndian ? 0xff000000 : 0x000000ff;\n  const [zeroMapping, oneMapping] = inverseDecode\n    ? [nonBlackColor, black]\n    : [black, nonBlackColor];\n  const widthInSource = width >> 3;\n  const widthRemainder = width & 7;\n  const srcLength = src.length;\n  dest = new Uint32Array(dest.buffer);\n  let destPos = 0;\n\n  for (let i = 0; i < height; i++) {\n    for (const max = srcPos + widthInSource; srcPos < max; srcPos++) {\n      const elem = srcPos < srcLength ? src[srcPos] : 255;\n      dest[destPos++] = elem & 0b10000000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1000000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b100000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b10000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b100 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b10 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1 ? oneMapping : zeroMapping;\n    }\n    if (widthRemainder === 0) {\n      continue;\n    }\n    const elem = srcPos < srcLength ? src[srcPos++] : 255;\n    for (let j = 0; j < widthRemainder; j++) {\n      dest[destPos++] = elem & (1 << (7 - j)) ? oneMapping : zeroMapping;\n    }\n  }\n  return { srcPos, destPos };\n}\n\nfunction convertRGBToRGBA({\n  src,\n  srcPos = 0,\n  dest,\n  destPos = 0,\n  width,\n  height,\n}) {\n  let i = 0;\n  const len32 = src.length >> 2;\n  const src32 = new Uint32Array(src.buffer, srcPos, len32);\n\n  if (FeatureTest.isLittleEndian) {\n    // It's a way faster to do the shuffle manually instead of working\n    // component by component with some Uint8 arrays.\n    for (; i < len32 - 2; i += 3, destPos += 4) {\n      const s1 = src32[i]; // R2B1G1R1\n      const s2 = src32[i + 1]; // G3R3B2G2\n      const s3 = src32[i + 2]; // B4G4R4B3\n\n      dest[destPos] = s1 | 0xff000000;\n      dest[destPos + 1] = (s1 >>> 24) | (s2 << 8) | 0xff000000;\n      dest[destPos + 2] = (s2 >>> 16) | (s3 << 16) | 0xff000000;\n      dest[destPos + 3] = (s3 >>> 8) | 0xff000000;\n    }\n\n    for (let j = i * 4, jj = src.length; j < jj; j += 3) {\n      dest[destPos++] =\n        src[j] | (src[j + 1] << 8) | (src[j + 2] << 16) | 0xff000000;\n    }\n  } else {\n    for (; i < len32 - 2; i += 3, destPos += 4) {\n      const s1 = src32[i]; // R1G1B1R2\n      const s2 = src32[i + 1]; // G2B2R3G3\n      const s3 = src32[i + 2]; // B3R4G4B4\n\n      dest[destPos] = s1 | 0xff;\n      dest[destPos + 1] = (s1 << 24) | (s2 >>> 8) | 0xff;\n      dest[destPos + 2] = (s2 << 16) | (s3 >>> 16) | 0xff;\n      dest[destPos + 3] = (s3 << 8) | 0xff;\n    }\n\n    for (let j = i * 4, jj = src.length; j < jj; j += 3) {\n      dest[destPos++] =\n        (src[j] << 24) | (src[j + 1] << 16) | (src[j + 2] << 8) | 0xff;\n    }\n  }\n\n  return { srcPos, destPos };\n}\n\nfunction grayToRGBA(src, dest) {\n  if (FeatureTest.isLittleEndian) {\n    for (let i = 0, ii = src.length; i < ii; i++) {\n      dest[i] = (src[i] * 0x10101) | 0xff000000;\n    }\n  } else {\n    for (let i = 0, ii = src.length; i < ii; i++) {\n      dest[i] = (src[i] * 0x1010100) | 0x000000ff;\n    }\n  }\n}\n\nexport { convertBlackAndWhiteToRGBA, convertToRGBA, grayToRGBA };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  FeatureTest,\n  FONT_IDENTITY_MATRIX,\n  IDENTITY_MATRIX,\n  ImageKind,\n  info,\n  isNodeJS,\n  OPS,\n  shadow,\n  TextRenderingMode,\n  unreachable,\n  Util,\n  warn,\n} from \"../shared/util.js\";\nimport {\n  getCurrentTransform,\n  getCurrentTransformInverse,\n  PixelsPerInch,\n} from \"./display_utils.js\";\nimport {\n  getShadingPattern,\n  PathType,\n  TilingPattern,\n} from \"./pattern_helper.js\";\nimport { convertBlackAndWhiteToRGBA } from \"../shared/image_utils.js\";\n\n// <canvas> contexts store most of the state we need natively.\n// However, PDF needs a bit more state, which we store here.\n// Minimal font size that would be used during canvas fillText operations.\nconst MIN_FONT_SIZE = 16;\n// Maximum font size that would be used during canvas fillText operations.\nconst MAX_FONT_SIZE = 100;\nconst MAX_GROUP_SIZE = 4096;\n\n// Defines the time the `executeOperatorList`-method is going to be executing\n// before it stops and schedules a continue of execution.\nconst EXECUTION_TIME = 15; // ms\n// Defines the number of steps before checking the execution time.\nconst EXECUTION_STEPS = 10;\n\n// To disable Type3 compilation, set the value to `-1`.\nconst MAX_SIZE_TO_COMPILE = 1000;\n\nconst FULL_CHUNK_HEIGHT = 16;\n\n/**\n * Overrides certain methods on a 2d ctx so that when they are called they\n * will also call the same method on the destCtx. The methods that are\n * overridden are all the transformation state modifiers, path creation, and\n * save/restore. We only forward these specific methods because they are the\n * only state modifiers that we cannot copy over when we switch contexts.\n *\n * To remove mirroring call `ctx._removeMirroring()`.\n *\n * @param {Object} ctx - The 2d canvas context that will duplicate its calls on\n *   the destCtx.\n * @param {Object} destCtx - The 2d canvas context that will receive the\n *   forwarded calls.\n */\nfunction mirrorContextOperations(ctx, destCtx) {\n  if (ctx._removeMirroring) {\n    throw new Error(\"Context is already forwarding operations.\");\n  }\n  ctx.__originalSave = ctx.save;\n  ctx.__originalRestore = ctx.restore;\n  ctx.__originalRotate = ctx.rotate;\n  ctx.__originalScale = ctx.scale;\n  ctx.__originalTranslate = ctx.translate;\n  ctx.__originalTransform = ctx.transform;\n  ctx.__originalSetTransform = ctx.setTransform;\n  ctx.__originalResetTransform = ctx.resetTransform;\n  ctx.__originalClip = ctx.clip;\n  ctx.__originalMoveTo = ctx.moveTo;\n  ctx.__originalLineTo = ctx.lineTo;\n  ctx.__originalBezierCurveTo = ctx.bezierCurveTo;\n  ctx.__originalRect = ctx.rect;\n  ctx.__originalClosePath = ctx.closePath;\n  ctx.__originalBeginPath = ctx.beginPath;\n\n  ctx._removeMirroring = () => {\n    ctx.save = ctx.__originalSave;\n    ctx.restore = ctx.__originalRestore;\n    ctx.rotate = ctx.__originalRotate;\n    ctx.scale = ctx.__originalScale;\n    ctx.translate = ctx.__originalTranslate;\n    ctx.transform = ctx.__originalTransform;\n    ctx.setTransform = ctx.__originalSetTransform;\n    ctx.resetTransform = ctx.__originalResetTransform;\n\n    ctx.clip = ctx.__originalClip;\n    ctx.moveTo = ctx.__originalMoveTo;\n    ctx.lineTo = ctx.__originalLineTo;\n    ctx.bezierCurveTo = ctx.__originalBezierCurveTo;\n    ctx.rect = ctx.__originalRect;\n    ctx.closePath = ctx.__originalClosePath;\n    ctx.beginPath = ctx.__originalBeginPath;\n    delete ctx._removeMirroring;\n  };\n\n  ctx.save = function ctxSave() {\n    destCtx.save();\n    this.__originalSave();\n  };\n\n  ctx.restore = function ctxRestore() {\n    destCtx.restore();\n    this.__originalRestore();\n  };\n\n  ctx.translate = function ctxTranslate(x, y) {\n    destCtx.translate(x, y);\n    this.__originalTranslate(x, y);\n  };\n\n  ctx.scale = function ctxScale(x, y) {\n    destCtx.scale(x, y);\n    this.__originalScale(x, y);\n  };\n\n  ctx.transform = function ctxTransform(a, b, c, d, e, f) {\n    destCtx.transform(a, b, c, d, e, f);\n    this.__originalTransform(a, b, c, d, e, f);\n  };\n\n  ctx.setTransform = function ctxSetTransform(a, b, c, d, e, f) {\n    destCtx.setTransform(a, b, c, d, e, f);\n    this.__originalSetTransform(a, b, c, d, e, f);\n  };\n\n  ctx.resetTransform = function ctxResetTransform() {\n    destCtx.resetTransform();\n    this.__originalResetTransform();\n  };\n\n  ctx.rotate = function ctxRotate(angle) {\n    destCtx.rotate(angle);\n    this.__originalRotate(angle);\n  };\n\n  ctx.clip = function ctxRotate(rule) {\n    destCtx.clip(rule);\n    this.__originalClip(rule);\n  };\n\n  ctx.moveTo = function (x, y) {\n    destCtx.moveTo(x, y);\n    this.__originalMoveTo(x, y);\n  };\n\n  ctx.lineTo = function (x, y) {\n    destCtx.lineTo(x, y);\n    this.__originalLineTo(x, y);\n  };\n\n  ctx.bezierCurveTo = function (cp1x, cp1y, cp2x, cp2y, x, y) {\n    destCtx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\n    this.__originalBezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\n  };\n\n  ctx.rect = function (x, y, width, height) {\n    destCtx.rect(x, y, width, height);\n    this.__originalRect(x, y, width, height);\n  };\n\n  ctx.closePath = function () {\n    destCtx.closePath();\n    this.__originalClosePath();\n  };\n\n  ctx.beginPath = function () {\n    destCtx.beginPath();\n    this.__originalBeginPath();\n  };\n}\n\nclass CachedCanvases {\n  constructor(canvasFactory) {\n    this.canvasFactory = canvasFactory;\n    this.cache = Object.create(null);\n  }\n\n  getCanvas(id, width, height) {\n    let canvasEntry;\n    if (this.cache[id] !== undefined) {\n      canvasEntry = this.cache[id];\n      this.canvasFactory.reset(canvasEntry, width, height);\n    } else {\n      canvasEntry = this.canvasFactory.create(width, height);\n      this.cache[id] = canvasEntry;\n    }\n    return canvasEntry;\n  }\n\n  delete(id) {\n    delete this.cache[id];\n  }\n\n  clear() {\n    for (const id in this.cache) {\n      const canvasEntry = this.cache[id];\n      this.canvasFactory.destroy(canvasEntry);\n      delete this.cache[id];\n    }\n  }\n}\n\nfunction drawImageAtIntegerCoords(\n  ctx,\n  srcImg,\n  srcX,\n  srcY,\n  srcW,\n  srcH,\n  destX,\n  destY,\n  destW,\n  destH\n) {\n  const [a, b, c, d, tx, ty] = getCurrentTransform(ctx);\n  if (b === 0 && c === 0) {\n    // top-left corner is at (X, Y) and\n    // bottom-right one is at (X + width, Y + height).\n\n    // If leftX is 4.321 then it's rounded to 4.\n    // If width is 10.432 then it's rounded to 11 because\n    // rightX = leftX + width = 14.753 which is rounded to 15\n    // so after rounding the total width is 11 (15 - 4).\n    // It's why we can't just floor/ceil uniformly, it just depends\n    // on the values we've.\n\n    const tlX = destX * a + tx;\n    const rTlX = Math.round(tlX);\n    const tlY = destY * d + ty;\n    const rTlY = Math.round(tlY);\n    const brX = (destX + destW) * a + tx;\n\n    // Some pdf contains images with 1x1 images so in case of 0-width after\n    // scaling we must fallback on 1 to be sure there is something.\n    const rWidth = Math.abs(Math.round(brX) - rTlX) || 1;\n    const brY = (destY + destH) * d + ty;\n    const rHeight = Math.abs(Math.round(brY) - rTlY) || 1;\n\n    // We must apply a transformation in order to apply it on the image itself.\n    // For example if a == 1 && d == -1, it means that the image itself is\n    // mirrored w.r.t. the x-axis.\n    ctx.setTransform(Math.sign(a), 0, 0, Math.sign(d), rTlX, rTlY);\n    ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, 0, 0, rWidth, rHeight);\n    ctx.setTransform(a, b, c, d, tx, ty);\n\n    return [rWidth, rHeight];\n  }\n\n  if (a === 0 && d === 0) {\n    // This path is taken in issue9462.pdf (page 3).\n    const tlX = destY * c + tx;\n    const rTlX = Math.round(tlX);\n    const tlY = destX * b + ty;\n    const rTlY = Math.round(tlY);\n    const brX = (destY + destH) * c + tx;\n    const rWidth = Math.abs(Math.round(brX) - rTlX) || 1;\n    const brY = (destX + destW) * b + ty;\n    const rHeight = Math.abs(Math.round(brY) - rTlY) || 1;\n\n    ctx.setTransform(0, Math.sign(b), Math.sign(c), 0, rTlX, rTlY);\n    ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, 0, 0, rHeight, rWidth);\n    ctx.setTransform(a, b, c, d, tx, ty);\n\n    return [rHeight, rWidth];\n  }\n\n  // Not a scale matrix so let the render handle the case without rounding.\n  ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, destX, destY, destW, destH);\n\n  const scaleX = Math.hypot(a, b);\n  const scaleY = Math.hypot(c, d);\n  return [scaleX * destW, scaleY * destH];\n}\n\nfunction compileType3Glyph(imgData) {\n  const { width, height } = imgData;\n  if (width > MAX_SIZE_TO_COMPILE || height > MAX_SIZE_TO_COMPILE) {\n    return null;\n  }\n\n  const POINT_TO_PROCESS_LIMIT = 1000;\n  const POINT_TYPES = new Uint8Array([\n    0, 2, 4, 0, 1, 0, 5, 4, 8, 10, 0, 8, 0, 2, 1, 0,\n  ]);\n\n  const width1 = width + 1;\n  let points = new Uint8Array(width1 * (height + 1));\n  let i, j, j0;\n\n  // decodes bit-packed mask data\n  const lineSize = (width + 7) & ~7;\n  let data = new Uint8Array(lineSize * height),\n    pos = 0;\n  for (const elem of imgData.data) {\n    let mask = 128;\n    while (mask > 0) {\n      data[pos++] = elem & mask ? 0 : 255;\n      mask >>= 1;\n    }\n  }\n\n  // finding interesting points: every point is located between mask pixels,\n  // so there will be points of the (width + 1)x(height + 1) grid. Every point\n  // will have flags assigned based on neighboring mask pixels:\n  //   4 | 8\n  //   --P--\n  //   2 | 1\n  // We are interested only in points with the flags:\n  //   - outside corners: 1, 2, 4, 8;\n  //   - inside corners: 7, 11, 13, 14;\n  //   - and, intersections: 5, 10.\n  let count = 0;\n  pos = 0;\n  if (data[pos] !== 0) {\n    points[0] = 1;\n    ++count;\n  }\n  for (j = 1; j < width; j++) {\n    if (data[pos] !== data[pos + 1]) {\n      points[j] = data[pos] ? 2 : 1;\n      ++count;\n    }\n    pos++;\n  }\n  if (data[pos] !== 0) {\n    points[j] = 2;\n    ++count;\n  }\n  for (i = 1; i < height; i++) {\n    pos = i * lineSize;\n    j0 = i * width1;\n    if (data[pos - lineSize] !== data[pos]) {\n      points[j0] = data[pos] ? 1 : 8;\n      ++count;\n    }\n    // 'sum' is the position of the current pixel configuration in the 'TYPES'\n    // array (in order 8-1-2-4, so we can use '>>2' to shift the column).\n    let sum = (data[pos] ? 4 : 0) + (data[pos - lineSize] ? 8 : 0);\n    for (j = 1; j < width; j++) {\n      sum =\n        (sum >> 2) +\n        (data[pos + 1] ? 4 : 0) +\n        (data[pos - lineSize + 1] ? 8 : 0);\n      if (POINT_TYPES[sum]) {\n        points[j0 + j] = POINT_TYPES[sum];\n        ++count;\n      }\n      pos++;\n    }\n    if (data[pos - lineSize] !== data[pos]) {\n      points[j0 + j] = data[pos] ? 2 : 4;\n      ++count;\n    }\n\n    if (count > POINT_TO_PROCESS_LIMIT) {\n      return null;\n    }\n  }\n\n  pos = lineSize * (height - 1);\n  j0 = i * width1;\n  if (data[pos] !== 0) {\n    points[j0] = 8;\n    ++count;\n  }\n  for (j = 1; j < width; j++) {\n    if (data[pos] !== data[pos + 1]) {\n      points[j0 + j] = data[pos] ? 4 : 8;\n      ++count;\n    }\n    pos++;\n  }\n  if (data[pos] !== 0) {\n    points[j0 + j] = 4;\n    ++count;\n  }\n  if (count > POINT_TO_PROCESS_LIMIT) {\n    return null;\n  }\n\n  // building outlines\n  const steps = new Int32Array([0, width1, -1, 0, -width1, 0, 0, 0, 1]);\n  const path = new Path2D();\n\n  for (i = 0; count && i <= height; i++) {\n    let p = i * width1;\n    const end = p + width;\n    while (p < end && !points[p]) {\n      p++;\n    }\n    if (p === end) {\n      continue;\n    }\n    path.moveTo(p % width1, i);\n\n    const p0 = p;\n    let type = points[p];\n    do {\n      const step = steps[type];\n      do {\n        p += step;\n      } while (!points[p]);\n\n      const pp = points[p];\n      if (pp !== 5 && pp !== 10) {\n        // set new direction\n        type = pp;\n        // delete mark\n        points[p] = 0;\n      } else {\n        // type is 5 or 10, ie, a crossing\n        // set new direction\n        type = pp & ((0x33 * type) >> 4);\n        // set new type for \"future hit\"\n        points[p] &= (type >> 2) | (type << 2);\n      }\n      path.lineTo(p % width1, (p / width1) | 0);\n\n      if (!points[p]) {\n        --count;\n      }\n    } while (p0 !== p);\n    --i;\n  }\n\n  // Immediately release the, potentially large, `Uint8Array`s after parsing.\n  data = null;\n  points = null;\n\n  const drawOutline = function (c) {\n    c.save();\n    // the path shall be painted in [0..1]x[0..1] space\n    c.scale(1 / width, -1 / height);\n    c.translate(0, -height);\n    c.fill(path);\n    c.beginPath();\n    c.restore();\n  };\n\n  return drawOutline;\n}\n\nclass CanvasExtraState {\n  constructor(width, height) {\n    // Are soft masks and alpha values shapes or opacities?\n    this.alphaIsShape = false;\n    this.fontSize = 0;\n    this.fontSizeScale = 1;\n    this.textMatrix = IDENTITY_MATRIX;\n    this.textMatrixScale = 1;\n    this.fontMatrix = FONT_IDENTITY_MATRIX;\n    this.leading = 0;\n    // Current point (in user coordinates)\n    this.x = 0;\n    this.y = 0;\n    // Start of text line (in text coordinates)\n    this.lineX = 0;\n    this.lineY = 0;\n    // Character and word spacing\n    this.charSpacing = 0;\n    this.wordSpacing = 0;\n    this.textHScale = 1;\n    this.textRenderingMode = TextRenderingMode.FILL;\n    this.textRise = 0;\n    // Default fore and background colors\n    this.fillColor = \"#000000\";\n    this.strokeColor = \"#000000\";\n    this.patternFill = false;\n    // Note: fill alpha applies to all non-stroking operations\n    this.fillAlpha = 1;\n    this.strokeAlpha = 1;\n    this.lineWidth = 1;\n    this.activeSMask = null;\n    this.transferMaps = \"none\";\n\n    this.startNewPathAndClipBox([0, 0, width, height]);\n  }\n\n  clone() {\n    const clone = Object.create(this);\n    clone.clipBox = this.clipBox.slice();\n    return clone;\n  }\n\n  setCurrentPoint(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n\n  updatePathMinMax(transform, x, y) {\n    [x, y] = Util.applyTransform([x, y], transform);\n    this.minX = Math.min(this.minX, x);\n    this.minY = Math.min(this.minY, y);\n    this.maxX = Math.max(this.maxX, x);\n    this.maxY = Math.max(this.maxY, y);\n  }\n\n  updateRectMinMax(transform, rect) {\n    const p1 = Util.applyTransform(rect, transform);\n    const p2 = Util.applyTransform(rect.slice(2), transform);\n    const p3 = Util.applyTransform([rect[0], rect[3]], transform);\n    const p4 = Util.applyTransform([rect[2], rect[1]], transform);\n\n    this.minX = Math.min(this.minX, p1[0], p2[0], p3[0], p4[0]);\n    this.minY = Math.min(this.minY, p1[1], p2[1], p3[1], p4[1]);\n    this.maxX = Math.max(this.maxX, p1[0], p2[0], p3[0], p4[0]);\n    this.maxY = Math.max(this.maxY, p1[1], p2[1], p3[1], p4[1]);\n  }\n\n  updateScalingPathMinMax(transform, minMax) {\n    Util.scaleMinMax(transform, minMax);\n    this.minX = Math.min(this.minX, minMax[0]);\n    this.maxX = Math.max(this.maxX, minMax[1]);\n    this.minY = Math.min(this.minY, minMax[2]);\n    this.maxY = Math.max(this.maxY, minMax[3]);\n  }\n\n  updateCurvePathMinMax(transform, x0, y0, x1, y1, x2, y2, x3, y3, minMax) {\n    const box = Util.bezierBoundingBox(x0, y0, x1, y1, x2, y2, x3, y3);\n    if (minMax) {\n      minMax[0] = Math.min(minMax[0], box[0], box[2]);\n      minMax[1] = Math.max(minMax[1], box[0], box[2]);\n      minMax[2] = Math.min(minMax[2], box[1], box[3]);\n      minMax[3] = Math.max(minMax[3], box[1], box[3]);\n      return;\n    }\n    this.updateRectMinMax(transform, box);\n  }\n\n  getPathBoundingBox(pathType = PathType.FILL, transform = null) {\n    const box = [this.minX, this.minY, this.maxX, this.maxY];\n    if (pathType === PathType.STROKE) {\n      if (!transform) {\n        unreachable(\"Stroke bounding box must include transform.\");\n      }\n      // Stroked paths can be outside of the path bounding box by 1/2 the line\n      // width.\n      const scale = Util.singularValueDecompose2dScale(transform);\n      const xStrokePad = (scale[0] * this.lineWidth) / 2;\n      const yStrokePad = (scale[1] * this.lineWidth) / 2;\n      box[0] -= xStrokePad;\n      box[1] -= yStrokePad;\n      box[2] += xStrokePad;\n      box[3] += yStrokePad;\n    }\n    return box;\n  }\n\n  updateClipFromPath() {\n    const intersect = Util.intersect(this.clipBox, this.getPathBoundingBox());\n    this.startNewPathAndClipBox(intersect || [0, 0, 0, 0]);\n  }\n\n  isEmptyClip() {\n    return this.minX === Infinity;\n  }\n\n  startNewPathAndClipBox(box) {\n    this.clipBox = box;\n    this.minX = Infinity;\n    this.minY = Infinity;\n    this.maxX = 0;\n    this.maxY = 0;\n  }\n\n  getClippedPathBoundingBox(pathType = PathType.FILL, transform = null) {\n    return Util.intersect(\n      this.clipBox,\n      this.getPathBoundingBox(pathType, transform)\n    );\n  }\n}\n\nfunction putBinaryImageData(ctx, imgData) {\n  if (typeof ImageData !== \"undefined\" && imgData instanceof ImageData) {\n    ctx.putImageData(imgData, 0, 0);\n    return;\n  }\n\n  // Put the image data to the canvas in chunks, rather than putting the\n  // whole image at once.  This saves JS memory, because the ImageData object\n  // is smaller. It also possibly saves C++ memory within the implementation\n  // of putImageData(). (E.g. in Firefox we make two short-lived copies of\n  // the data passed to putImageData()). |n| shouldn't be too small, however,\n  // because too many putImageData() calls will slow things down.\n  //\n  // Note: as written, if the last chunk is partial, the putImageData() call\n  // will (conceptually) put pixels past the bounds of the canvas.  But\n  // that's ok; any such pixels are ignored.\n\n  const height = imgData.height,\n    width = imgData.width;\n  const partialChunkHeight = height % FULL_CHUNK_HEIGHT;\n  const fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;\n  const totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;\n\n  const chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);\n  let srcPos = 0,\n    destPos;\n  const src = imgData.data;\n  const dest = chunkImgData.data;\n  let i, j, thisChunkHeight, elemsInThisChunk;\n\n  // There are multiple forms in which the pixel data can be passed, and\n  // imgData.kind tells us which one this is.\n  if (imgData.kind === ImageKind.GRAYSCALE_1BPP) {\n    // Grayscale, 1 bit per pixel (i.e. black-and-white).\n    const srcLength = src.byteLength;\n    const dest32 = new Uint32Array(dest.buffer, 0, dest.byteLength >> 2);\n    const dest32DataLength = dest32.length;\n    const fullSrcDiff = (width + 7) >> 3;\n    const white = 0xffffffff;\n    const black = FeatureTest.isLittleEndian ? 0xff000000 : 0x000000ff;\n\n    for (i = 0; i < totalChunks; i++) {\n      thisChunkHeight = i < fullChunks ? FULL_CHUNK_HEIGHT : partialChunkHeight;\n      destPos = 0;\n      for (j = 0; j < thisChunkHeight; j++) {\n        const srcDiff = srcLength - srcPos;\n        let k = 0;\n        const kEnd = srcDiff > fullSrcDiff ? width : srcDiff * 8 - 7;\n        const kEndUnrolled = kEnd & ~7;\n        let mask = 0;\n        let srcByte = 0;\n        for (; k < kEndUnrolled; k += 8) {\n          srcByte = src[srcPos++];\n          dest32[destPos++] = srcByte & 128 ? white : black;\n          dest32[destPos++] = srcByte & 64 ? white : black;\n          dest32[destPos++] = srcByte & 32 ? white : black;\n          dest32[destPos++] = srcByte & 16 ? white : black;\n          dest32[destPos++] = srcByte & 8 ? white : black;\n          dest32[destPos++] = srcByte & 4 ? white : black;\n          dest32[destPos++] = srcByte & 2 ? white : black;\n          dest32[destPos++] = srcByte & 1 ? white : black;\n        }\n        for (; k < kEnd; k++) {\n          if (mask === 0) {\n            srcByte = src[srcPos++];\n            mask = 128;\n          }\n\n          dest32[destPos++] = srcByte & mask ? white : black;\n          mask >>= 1;\n        }\n      }\n      // We ran out of input. Make all remaining pixels transparent.\n      while (destPos < dest32DataLength) {\n        dest32[destPos++] = 0;\n      }\n\n      ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n    }\n  } else if (imgData.kind === ImageKind.RGBA_32BPP) {\n    // RGBA, 32-bits per pixel.\n    j = 0;\n    elemsInThisChunk = width * FULL_CHUNK_HEIGHT * 4;\n    for (i = 0; i < fullChunks; i++) {\n      dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));\n      srcPos += elemsInThisChunk;\n\n      ctx.putImageData(chunkImgData, 0, j);\n      j += FULL_CHUNK_HEIGHT;\n    }\n    if (i < totalChunks) {\n      elemsInThisChunk = width * partialChunkHeight * 4;\n      dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));\n\n      ctx.putImageData(chunkImgData, 0, j);\n    }\n  } else if (imgData.kind === ImageKind.RGB_24BPP) {\n    // RGB, 24-bits per pixel.\n    thisChunkHeight = FULL_CHUNK_HEIGHT;\n    elemsInThisChunk = width * thisChunkHeight;\n    for (i = 0; i < totalChunks; i++) {\n      if (i >= fullChunks) {\n        thisChunkHeight = partialChunkHeight;\n        elemsInThisChunk = width * thisChunkHeight;\n      }\n\n      destPos = 0;\n      for (j = elemsInThisChunk; j--; ) {\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = 255;\n      }\n\n      ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n    }\n  } else {\n    throw new Error(`bad image kind: ${imgData.kind}`);\n  }\n}\n\nfunction putBinaryImageMask(ctx, imgData) {\n  if (imgData.bitmap) {\n    // The bitmap has been created in the worker.\n    ctx.drawImage(imgData.bitmap, 0, 0);\n    return;\n  }\n\n  // Slow path: OffscreenCanvas isn't available in the worker.\n  const height = imgData.height,\n    width = imgData.width;\n  const partialChunkHeight = height % FULL_CHUNK_HEIGHT;\n  const fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;\n  const totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;\n\n  const chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);\n  let srcPos = 0;\n  const src = imgData.data;\n  const dest = chunkImgData.data;\n\n  for (let i = 0; i < totalChunks; i++) {\n    const thisChunkHeight =\n      i < fullChunks ? FULL_CHUNK_HEIGHT : partialChunkHeight;\n\n    // Expand the mask so it can be used by the canvas.  Any required\n    // inversion has already been handled.\n\n    ({ srcPos } = convertBlackAndWhiteToRGBA({\n      src,\n      srcPos,\n      dest,\n      width,\n      height: thisChunkHeight,\n      nonBlackColor: 0,\n    }));\n\n    ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n  }\n}\n\nfunction copyCtxState(sourceCtx, destCtx) {\n  const properties = [\n    \"strokeStyle\",\n    \"fillStyle\",\n    \"fillRule\",\n    \"globalAlpha\",\n    \"lineWidth\",\n    \"lineCap\",\n    \"lineJoin\",\n    \"miterLimit\",\n    \"globalCompositeOperation\",\n    \"font\",\n    \"filter\",\n  ];\n  for (const property of properties) {\n    if (sourceCtx[property] !== undefined) {\n      destCtx[property] = sourceCtx[property];\n    }\n  }\n  if (sourceCtx.setLineDash !== undefined) {\n    destCtx.setLineDash(sourceCtx.getLineDash());\n    destCtx.lineDashOffset = sourceCtx.lineDashOffset;\n  }\n}\n\nfunction resetCtxToDefault(ctx) {\n  ctx.strokeStyle = ctx.fillStyle = \"#000000\";\n  ctx.fillRule = \"nonzero\";\n  ctx.globalAlpha = 1;\n  ctx.lineWidth = 1;\n  ctx.lineCap = \"butt\";\n  ctx.lineJoin = \"miter\";\n  ctx.miterLimit = 10;\n  ctx.globalCompositeOperation = \"source-over\";\n  ctx.font = \"10px sans-serif\";\n  if (ctx.setLineDash !== undefined) {\n    ctx.setLineDash([]);\n    ctx.lineDashOffset = 0;\n  }\n  if (\n    (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) ||\n    !isNodeJS\n  ) {\n    const { filter } = ctx;\n    if (filter !== \"none\" && filter !== \"\") {\n      ctx.filter = \"none\";\n    }\n  }\n}\n\nfunction composeSMaskBackdrop(bytes, r0, g0, b0) {\n  const length = bytes.length;\n  for (let i = 3; i < length; i += 4) {\n    const alpha = bytes[i];\n    if (alpha === 0) {\n      bytes[i - 3] = r0;\n      bytes[i - 2] = g0;\n      bytes[i - 1] = b0;\n    } else if (alpha < 255) {\n      const alpha_ = 255 - alpha;\n      bytes[i - 3] = (bytes[i - 3] * alpha + r0 * alpha_) >> 8;\n      bytes[i - 2] = (bytes[i - 2] * alpha + g0 * alpha_) >> 8;\n      bytes[i - 1] = (bytes[i - 1] * alpha + b0 * alpha_) >> 8;\n    }\n  }\n}\n\nfunction composeSMaskAlpha(maskData, layerData, transferMap) {\n  const length = maskData.length;\n  const scale = 1 / 255;\n  for (let i = 3; i < length; i += 4) {\n    const alpha = transferMap ? transferMap[maskData[i]] : maskData[i];\n    layerData[i] = (layerData[i] * alpha * scale) | 0;\n  }\n}\n\nfunction composeSMaskLuminosity(maskData, layerData, transferMap) {\n  const length = maskData.length;\n  for (let i = 3; i < length; i += 4) {\n    const y =\n      maskData[i - 3] * 77 + // * 0.3 / 255 * 0x10000\n      maskData[i - 2] * 152 + // * 0.59 ....\n      maskData[i - 1] * 28; // * 0.11 ....\n    layerData[i] = transferMap\n      ? (layerData[i] * transferMap[y >> 8]) >> 8\n      : (layerData[i] * y) >> 16;\n  }\n}\n\nfunction genericComposeSMask(\n  maskCtx,\n  layerCtx,\n  width,\n  height,\n  subtype,\n  backdrop,\n  transferMap,\n  layerOffsetX,\n  layerOffsetY,\n  maskOffsetX,\n  maskOffsetY\n) {\n  const hasBackdrop = !!backdrop;\n  const r0 = hasBackdrop ? backdrop[0] : 0;\n  const g0 = hasBackdrop ? backdrop[1] : 0;\n  const b0 = hasBackdrop ? backdrop[2] : 0;\n\n  const composeFn =\n    subtype === \"Luminosity\" ? composeSMaskLuminosity : composeSMaskAlpha;\n\n  // processing image in chunks to save memory\n  const PIXELS_TO_PROCESS = 1048576;\n  const chunkSize = Math.min(height, Math.ceil(PIXELS_TO_PROCESS / width));\n  for (let row = 0; row < height; row += chunkSize) {\n    const chunkHeight = Math.min(chunkSize, height - row);\n    const maskData = maskCtx.getImageData(\n      layerOffsetX - maskOffsetX,\n      row + (layerOffsetY - maskOffsetY),\n      width,\n      chunkHeight\n    );\n    const layerData = layerCtx.getImageData(\n      layerOffsetX,\n      row + layerOffsetY,\n      width,\n      chunkHeight\n    );\n\n    if (hasBackdrop) {\n      composeSMaskBackdrop(maskData.data, r0, g0, b0);\n    }\n    composeFn(maskData.data, layerData.data, transferMap);\n\n    layerCtx.putImageData(layerData, layerOffsetX, row + layerOffsetY);\n  }\n}\n\nfunction composeSMask(ctx, smask, layerCtx, layerBox) {\n  const layerOffsetX = layerBox[0];\n  const layerOffsetY = layerBox[1];\n  const layerWidth = layerBox[2] - layerOffsetX;\n  const layerHeight = layerBox[3] - layerOffsetY;\n  if (layerWidth === 0 || layerHeight === 0) {\n    return;\n  }\n  genericComposeSMask(\n    smask.context,\n    layerCtx,\n    layerWidth,\n    layerHeight,\n    smask.subtype,\n    smask.backdrop,\n    smask.transferMap,\n    layerOffsetX,\n    layerOffsetY,\n    smask.offsetX,\n    smask.offsetY\n  );\n  ctx.save();\n  ctx.globalAlpha = 1;\n  ctx.globalCompositeOperation = \"source-over\";\n  ctx.setTransform(1, 0, 0, 1, 0, 0);\n  ctx.drawImage(layerCtx.canvas, 0, 0);\n  ctx.restore();\n}\n\nfunction getImageSmoothingEnabled(transform, interpolate) {\n  const scale = Util.singularValueDecompose2dScale(transform);\n  // Round to a 32bit float so that `<=` check below will pass for numbers that\n  // are very close, but not exactly the same 64bit floats.\n  scale[0] = Math.fround(scale[0]);\n  scale[1] = Math.fround(scale[1]);\n  const actualScale = Math.fround(\n    (globalThis.devicePixelRatio || 1) * PixelsPerInch.PDF_TO_CSS_UNITS\n  );\n  if (interpolate !== undefined) {\n    // If the value is explicitly set use it.\n    return interpolate;\n  } else if (scale[0] <= actualScale || scale[1] <= actualScale) {\n    // Smooth when downscaling.\n    return true;\n  }\n  // Don't smooth when upscaling.\n  return false;\n}\n\nconst LINE_CAP_STYLES = [\"butt\", \"round\", \"square\"];\nconst LINE_JOIN_STYLES = [\"miter\", \"round\", \"bevel\"];\nconst NORMAL_CLIP = {};\nconst EO_CLIP = {};\n\nclass CanvasGraphics {\n  constructor(\n    canvasCtx,\n    commonObjs,\n    objs,\n    canvasFactory,\n    filterFactory,\n    { optionalContentConfig, markedContentStack = null },\n    annotationCanvasMap,\n    pageColors\n  ) {\n    this.ctx = canvasCtx;\n    this.current = new CanvasExtraState(\n      this.ctx.canvas.width,\n      this.ctx.canvas.height\n    );\n    this.stateStack = [];\n    this.pendingClip = null;\n    this.pendingEOFill = false;\n    this.res = null;\n    this.xobjs = null;\n    this.commonObjs = commonObjs;\n    this.objs = objs;\n    this.canvasFactory = canvasFactory;\n    this.filterFactory = filterFactory;\n    this.groupStack = [];\n    this.processingType3 = null;\n    // Patterns are painted relative to the initial page/form transform, see\n    // PDF spec 8.7.2 NOTE 1.\n    this.baseTransform = null;\n    this.baseTransformStack = [];\n    this.groupLevel = 0;\n    this.smaskStack = [];\n    this.smaskCounter = 0;\n    this.tempSMask = null;\n    this.suspendedCtx = null;\n    this.contentVisible = true;\n    this.markedContentStack = markedContentStack || [];\n    this.optionalContentConfig = optionalContentConfig;\n    this.cachedCanvases = new CachedCanvases(this.canvasFactory);\n    this.cachedPatterns = new Map();\n    this.annotationCanvasMap = annotationCanvasMap;\n    this.viewportScale = 1;\n    this.outputScaleX = 1;\n    this.outputScaleY = 1;\n    this.pageColors = pageColors;\n\n    this._cachedScaleForStroking = [-1, 0];\n    this._cachedGetSinglePixelWidth = null;\n    this._cachedBitmapsMap = new Map();\n  }\n\n  getObject(data, fallback = null) {\n    if (typeof data === \"string\") {\n      return data.startsWith(\"g_\")\n        ? this.commonObjs.get(data)\n        : this.objs.get(data);\n    }\n    return fallback;\n  }\n\n  beginDrawing({\n    transform,\n    viewport,\n    transparency = false,\n    background = null,\n  }) {\n    // For pdfs that use blend modes we have to clear the canvas else certain\n    // blend modes can look wrong since we'd be blending with a white\n    // backdrop. The problem with a transparent backdrop though is we then\n    // don't get sub pixel anti aliasing on text, creating temporary\n    // transparent canvas when we have blend modes.\n    const width = this.ctx.canvas.width;\n    const height = this.ctx.canvas.height;\n\n    const savedFillStyle = this.ctx.fillStyle;\n    this.ctx.fillStyle = background || \"#ffffff\";\n    this.ctx.fillRect(0, 0, width, height);\n    this.ctx.fillStyle = savedFillStyle;\n\n    if (transparency) {\n      const transparentCanvas = this.cachedCanvases.getCanvas(\n        \"transparent\",\n        width,\n        height\n      );\n      this.compositeCtx = this.ctx;\n      this.transparentCanvas = transparentCanvas.canvas;\n      this.ctx = transparentCanvas.context;\n      this.ctx.save();\n      // The transform can be applied before rendering, transferring it to\n      // the new canvas.\n      this.ctx.transform(...getCurrentTransform(this.compositeCtx));\n    }\n\n    this.ctx.save();\n    resetCtxToDefault(this.ctx);\n    if (transform) {\n      this.ctx.transform(...transform);\n      this.outputScaleX = transform[0];\n      this.outputScaleY = transform[0];\n    }\n    this.ctx.transform(...viewport.transform);\n    this.viewportScale = viewport.scale;\n\n    this.baseTransform = getCurrentTransform(this.ctx);\n  }\n\n  executeOperatorList(\n    operatorList,\n    executionStartIdx,\n    continueCallback,\n    stepper\n  ) {\n    const argsArray = operatorList.argsArray;\n    const fnArray = operatorList.fnArray;\n    let i = executionStartIdx || 0;\n    const argsArrayLen = argsArray.length;\n\n    // Sometimes the OperatorList to execute is empty.\n    if (argsArrayLen === i) {\n      return i;\n    }\n\n    const chunkOperations =\n      argsArrayLen - i > EXECUTION_STEPS &&\n      typeof continueCallback === \"function\";\n    const endTime = chunkOperations ? Date.now() + EXECUTION_TIME : 0;\n    let steps = 0;\n\n    const commonObjs = this.commonObjs;\n    const objs = this.objs;\n    let fnId;\n\n    while (true) {\n      if (stepper !== undefined && i === stepper.nextBreakPoint) {\n        stepper.breakIt(i, continueCallback);\n        return i;\n      }\n\n      fnId = fnArray[i];\n\n      if (fnId !== OPS.dependency) {\n        // eslint-disable-next-line prefer-spread\n        this[fnId].apply(this, argsArray[i]);\n      } else {\n        for (const depObjId of argsArray[i]) {\n          const objsPool = depObjId.startsWith(\"g_\") ? commonObjs : objs;\n\n          // If the promise isn't resolved yet, add the continueCallback\n          // to the promise and bail out.\n          if (!objsPool.has(depObjId)) {\n            objsPool.get(depObjId, continueCallback);\n            return i;\n          }\n        }\n      }\n\n      i++;\n\n      // If the entire operatorList was executed, stop as were done.\n      if (i === argsArrayLen) {\n        return i;\n      }\n\n      // If the execution took longer then a certain amount of time and\n      // `continueCallback` is specified, interrupt the execution.\n      if (chunkOperations && ++steps > EXECUTION_STEPS) {\n        if (Date.now() > endTime) {\n          continueCallback();\n          return i;\n        }\n        steps = 0;\n      }\n\n      // If the operatorList isn't executed completely yet OR the execution\n      // time was short enough, do another execution round.\n    }\n  }\n\n  #restoreInitialState() {\n    // Finishing all opened operations such as SMask group painting.\n    while (this.stateStack.length || this.inSMaskMode) {\n      this.restore();\n    }\n\n    this.ctx.restore();\n\n    if (this.transparentCanvas) {\n      this.ctx = this.compositeCtx;\n      this.ctx.save();\n      this.ctx.setTransform(1, 0, 0, 1, 0, 0); // Avoid apply transform twice\n      this.ctx.drawImage(this.transparentCanvas, 0, 0);\n      this.ctx.restore();\n      this.transparentCanvas = null;\n    }\n  }\n\n  endDrawing() {\n    this.#restoreInitialState();\n\n    this.cachedCanvases.clear();\n    this.cachedPatterns.clear();\n\n    for (const cache of this._cachedBitmapsMap.values()) {\n      for (const canvas of cache.values()) {\n        if (\n          typeof HTMLCanvasElement !== \"undefined\" &&\n          canvas instanceof HTMLCanvasElement\n        ) {\n          canvas.width = canvas.height = 0;\n        }\n      }\n      cache.clear();\n    }\n    this._cachedBitmapsMap.clear();\n    this.#drawFilter();\n  }\n\n  #drawFilter() {\n    if (this.pageColors) {\n      const hcmFilterId = this.filterFactory.addHCMFilter(\n        this.pageColors.foreground,\n        this.pageColors.background\n      );\n      if (hcmFilterId !== \"none\") {\n        const savedFilter = this.ctx.filter;\n        this.ctx.filter = hcmFilterId;\n        this.ctx.drawImage(this.ctx.canvas, 0, 0);\n        this.ctx.filter = savedFilter;\n      }\n    }\n  }\n\n  _scaleImage(img, inverseTransform) {\n    // Vertical or horizontal scaling shall not be more than 2 to not lose the\n    // pixels during drawImage operation, painting on the temporary canvas(es)\n    // that are twice smaller in size.\n    const width = img.width;\n    const height = img.height;\n    let widthScale = Math.max(\n      Math.hypot(inverseTransform[0], inverseTransform[1]),\n      1\n    );\n    let heightScale = Math.max(\n      Math.hypot(inverseTransform[2], inverseTransform[3]),\n      1\n    );\n\n    let paintWidth = width,\n      paintHeight = height;\n    let tmpCanvasId = \"prescale1\";\n    let tmpCanvas, tmpCtx;\n    while (\n      (widthScale > 2 && paintWidth > 1) ||\n      (heightScale > 2 && paintHeight > 1)\n    ) {\n      let newWidth = paintWidth,\n        newHeight = paintHeight;\n      if (widthScale > 2 && paintWidth > 1) {\n        // See bug 1820511 (Windows specific bug).\n        // TODO: once the above bug is fixed we could revert to:\n        // newWidth = Math.ceil(paintWidth / 2);\n        newWidth =\n          paintWidth >= 16384\n            ? Math.floor(paintWidth / 2) - 1 || 1\n            : Math.ceil(paintWidth / 2);\n        widthScale /= paintWidth / newWidth;\n      }\n      if (heightScale > 2 && paintHeight > 1) {\n        // TODO: see the comment above.\n        newHeight =\n          paintHeight >= 16384\n            ? Math.floor(paintHeight / 2) - 1 || 1\n            : Math.ceil(paintHeight) / 2;\n        heightScale /= paintHeight / newHeight;\n      }\n      tmpCanvas = this.cachedCanvases.getCanvas(\n        tmpCanvasId,\n        newWidth,\n        newHeight\n      );\n      tmpCtx = tmpCanvas.context;\n      tmpCtx.clearRect(0, 0, newWidth, newHeight);\n      tmpCtx.drawImage(\n        img,\n        0,\n        0,\n        paintWidth,\n        paintHeight,\n        0,\n        0,\n        newWidth,\n        newHeight\n      );\n      img = tmpCanvas.canvas;\n      paintWidth = newWidth;\n      paintHeight = newHeight;\n      tmpCanvasId = tmpCanvasId === \"prescale1\" ? \"prescale2\" : \"prescale1\";\n    }\n    return {\n      img,\n      paintWidth,\n      paintHeight,\n    };\n  }\n\n  _createMaskCanvas(img) {\n    const ctx = this.ctx;\n    const { width, height } = img;\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    const currentTransform = getCurrentTransform(ctx);\n\n    let cache, cacheKey, scaled, maskCanvas;\n    if ((img.bitmap || img.data) && img.count > 1) {\n      const mainKey = img.bitmap || img.data.buffer;\n      // We're reusing the same image several times, so we can cache it.\n      // In case we've a pattern fill we just keep the scaled version of\n      // the image.\n      // Only the scaling part matters, the translation part is just used\n      // to compute offsets (but not when filling patterns see #15573).\n      // TODO: handle the case of a pattern fill if it's possible.\n      cacheKey = JSON.stringify(\n        isPatternFill\n          ? currentTransform\n          : [currentTransform.slice(0, 4), fillColor]\n      );\n\n      cache = this._cachedBitmapsMap.get(mainKey);\n      if (!cache) {\n        cache = new Map();\n        this._cachedBitmapsMap.set(mainKey, cache);\n      }\n      const cachedImage = cache.get(cacheKey);\n      if (cachedImage && !isPatternFill) {\n        const offsetX = Math.round(\n          Math.min(currentTransform[0], currentTransform[2]) +\n            currentTransform[4]\n        );\n        const offsetY = Math.round(\n          Math.min(currentTransform[1], currentTransform[3]) +\n            currentTransform[5]\n        );\n        return {\n          canvas: cachedImage,\n          offsetX,\n          offsetY,\n        };\n      }\n      scaled = cachedImage;\n    }\n\n    if (!scaled) {\n      maskCanvas = this.cachedCanvases.getCanvas(\"maskCanvas\", width, height);\n      putBinaryImageMask(maskCanvas.context, img);\n    }\n\n    // Create the mask canvas at the size it will be drawn at and also set\n    // its transform to match the current transform so if there are any\n    // patterns applied they will be applied relative to the correct\n    // transform.\n\n    let maskToCanvas = Util.transform(currentTransform, [\n      1 / width,\n      0,\n      0,\n      -1 / height,\n      0,\n      0,\n    ]);\n    maskToCanvas = Util.transform(maskToCanvas, [1, 0, 0, 1, 0, -height]);\n    const [minX, minY, maxX, maxY] = Util.getAxialAlignedBoundingBox(\n      [0, 0, width, height],\n      maskToCanvas\n    );\n    const drawnWidth = Math.round(maxX - minX) || 1;\n    const drawnHeight = Math.round(maxY - minY) || 1;\n    const fillCanvas = this.cachedCanvases.getCanvas(\n      \"fillCanvas\",\n      drawnWidth,\n      drawnHeight\n    );\n    const fillCtx = fillCanvas.context;\n\n    // The offset will be the top-left cordinate mask.\n    // If objToCanvas is [a,b,c,d,e,f] then:\n    //   - offsetX = min(a, c) + e\n    //   - offsetY = min(b, d) + f\n    const offsetX = minX;\n    const offsetY = minY;\n    fillCtx.translate(-offsetX, -offsetY);\n    fillCtx.transform(...maskToCanvas);\n\n    if (!scaled) {\n      // Pre-scale if needed to improve image smoothing.\n      scaled = this._scaleImage(\n        maskCanvas.canvas,\n        getCurrentTransformInverse(fillCtx)\n      );\n      scaled = scaled.img;\n      if (cache && isPatternFill) {\n        cache.set(cacheKey, scaled);\n      }\n    }\n\n    fillCtx.imageSmoothingEnabled = getImageSmoothingEnabled(\n      getCurrentTransform(fillCtx),\n      img.interpolate\n    );\n\n    drawImageAtIntegerCoords(\n      fillCtx,\n      scaled,\n      0,\n      0,\n      scaled.width,\n      scaled.height,\n      0,\n      0,\n      width,\n      height\n    );\n    fillCtx.globalCompositeOperation = \"source-in\";\n\n    const inverse = Util.transform(getCurrentTransformInverse(fillCtx), [\n      1,\n      0,\n      0,\n      1,\n      -offsetX,\n      -offsetY,\n    ]);\n    fillCtx.fillStyle = isPatternFill\n      ? fillColor.getPattern(ctx, this, inverse, PathType.FILL)\n      : fillColor;\n\n    fillCtx.fillRect(0, 0, width, height);\n\n    if (cache && !isPatternFill) {\n      // The fill canvas is put in the cache associated to the mask image\n      // so we must remove from the cached canvas: it mustn't be used again.\n      this.cachedCanvases.delete(\"fillCanvas\");\n      cache.set(cacheKey, fillCanvas.canvas);\n    }\n\n    // Round the offsets to avoid drawing fractional pixels.\n    return {\n      canvas: fillCanvas.canvas,\n      offsetX: Math.round(offsetX),\n      offsetY: Math.round(offsetY),\n    };\n  }\n\n  // Graphics state\n  setLineWidth(width) {\n    if (width !== this.current.lineWidth) {\n      this._cachedScaleForStroking[0] = -1;\n    }\n    this.current.lineWidth = width;\n    this.ctx.lineWidth = width;\n  }\n\n  setLineCap(style) {\n    this.ctx.lineCap = LINE_CAP_STYLES[style];\n  }\n\n  setLineJoin(style) {\n    this.ctx.lineJoin = LINE_JOIN_STYLES[style];\n  }\n\n  setMiterLimit(limit) {\n    this.ctx.miterLimit = limit;\n  }\n\n  setDash(dashArray, dashPhase) {\n    const ctx = this.ctx;\n    if (ctx.setLineDash !== undefined) {\n      ctx.setLineDash(dashArray);\n      ctx.lineDashOffset = dashPhase;\n    }\n  }\n\n  setRenderingIntent(intent) {\n    // This operation is ignored since we haven't found a use case for it yet.\n  }\n\n  setFlatness(flatness) {\n    // This operation is ignored since we haven't found a use case for it yet.\n  }\n\n  setGState(states) {\n    for (const [key, value] of states) {\n      switch (key) {\n        case \"LW\":\n          this.setLineWidth(value);\n          break;\n        case \"LC\":\n          this.setLineCap(value);\n          break;\n        case \"LJ\":\n          this.setLineJoin(value);\n          break;\n        case \"ML\":\n          this.setMiterLimit(value);\n          break;\n        case \"D\":\n          this.setDash(value[0], value[1]);\n          break;\n        case \"RI\":\n          this.setRenderingIntent(value);\n          break;\n        case \"FL\":\n          this.setFlatness(value);\n          break;\n        case \"Font\":\n          this.setFont(value[0], value[1]);\n          break;\n        case \"CA\":\n          this.current.strokeAlpha = value;\n          break;\n        case \"ca\":\n          this.current.fillAlpha = value;\n          this.ctx.globalAlpha = value;\n          break;\n        case \"BM\":\n          this.ctx.globalCompositeOperation = value;\n          break;\n        case \"SMask\":\n          this.current.activeSMask = value ? this.tempSMask : null;\n          this.tempSMask = null;\n          this.checkSMaskState();\n          break;\n        case \"TR\":\n          this.ctx.filter = this.current.transferMaps =\n            this.filterFactory.addFilter(value);\n          break;\n      }\n    }\n  }\n\n  get inSMaskMode() {\n    return !!this.suspendedCtx;\n  }\n\n  checkSMaskState() {\n    const inSMaskMode = this.inSMaskMode;\n    if (this.current.activeSMask && !inSMaskMode) {\n      this.beginSMaskMode();\n    } else if (!this.current.activeSMask && inSMaskMode) {\n      this.endSMaskMode();\n    }\n    // Else, the state is okay and nothing needs to be done.\n  }\n\n  /**\n   * Soft mask mode takes the current main drawing canvas and replaces it with\n   * a temporary canvas. Any drawing operations that happen on the temporary\n   * canvas need to be composed with the main canvas that was suspended (see\n   * `compose()`). The temporary canvas also duplicates many of its operations\n   * on the suspended canvas to keep them in sync, so that when the soft mask\n   * mode ends any clipping paths or transformations will still be active and in\n   * the right order on the canvas' graphics state stack.\n   */\n  beginSMaskMode() {\n    if (this.inSMaskMode) {\n      throw new Error(\"beginSMaskMode called while already in smask mode\");\n    }\n    const drawnWidth = this.ctx.canvas.width;\n    const drawnHeight = this.ctx.canvas.height;\n    const cacheId = \"smaskGroupAt\" + this.groupLevel;\n    const scratchCanvas = this.cachedCanvases.getCanvas(\n      cacheId,\n      drawnWidth,\n      drawnHeight\n    );\n    this.suspendedCtx = this.ctx;\n    this.ctx = scratchCanvas.context;\n    const ctx = this.ctx;\n    ctx.setTransform(...getCurrentTransform(this.suspendedCtx));\n    copyCtxState(this.suspendedCtx, ctx);\n    mirrorContextOperations(ctx, this.suspendedCtx);\n\n    this.setGState([\n      [\"BM\", \"source-over\"],\n      [\"ca\", 1],\n      [\"CA\", 1],\n    ]);\n  }\n\n  endSMaskMode() {\n    if (!this.inSMaskMode) {\n      throw new Error(\"endSMaskMode called while not in smask mode\");\n    }\n    // The soft mask is done, now restore the suspended canvas as the main\n    // drawing canvas.\n    this.ctx._removeMirroring();\n    copyCtxState(this.ctx, this.suspendedCtx);\n    this.ctx = this.suspendedCtx;\n\n    this.suspendedCtx = null;\n  }\n\n  compose(dirtyBox) {\n    if (!this.current.activeSMask) {\n      return;\n    }\n\n    if (!dirtyBox) {\n      dirtyBox = [0, 0, this.ctx.canvas.width, this.ctx.canvas.height];\n    } else {\n      dirtyBox[0] = Math.floor(dirtyBox[0]);\n      dirtyBox[1] = Math.floor(dirtyBox[1]);\n      dirtyBox[2] = Math.ceil(dirtyBox[2]);\n      dirtyBox[3] = Math.ceil(dirtyBox[3]);\n    }\n    const smask = this.current.activeSMask;\n    const suspendedCtx = this.suspendedCtx;\n\n    composeSMask(suspendedCtx, smask, this.ctx, dirtyBox);\n    // Whatever was drawn has been moved to the suspended canvas, now clear it\n    // out of the current canvas.\n    this.ctx.save();\n    this.ctx.setTransform(1, 0, 0, 1, 0, 0);\n    this.ctx.clearRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\n    this.ctx.restore();\n  }\n\n  save() {\n    if (this.inSMaskMode) {\n      // SMask mode may be turned on/off causing us to lose graphics state.\n      // Copy the temporary canvas state to the main(suspended) canvas to keep\n      // it in sync.\n      copyCtxState(this.ctx, this.suspendedCtx);\n      // Don't bother calling save on the temporary canvas since state is not\n      // saved there.\n      this.suspendedCtx.save();\n    } else {\n      this.ctx.save();\n    }\n    const old = this.current;\n    this.stateStack.push(old);\n    this.current = old.clone();\n  }\n\n  restore() {\n    if (this.stateStack.length === 0 && this.inSMaskMode) {\n      this.endSMaskMode();\n    }\n    if (this.stateStack.length !== 0) {\n      this.current = this.stateStack.pop();\n      if (this.inSMaskMode) {\n        // Graphics state is stored on the main(suspended) canvas. Restore its\n        // state then copy it over to the temporary canvas.\n        this.suspendedCtx.restore();\n        copyCtxState(this.suspendedCtx, this.ctx);\n      } else {\n        this.ctx.restore();\n      }\n      this.checkSMaskState();\n\n      // Ensure that the clipping path is reset (fixes issue6413.pdf).\n      this.pendingClip = null;\n\n      this._cachedScaleForStroking[0] = -1;\n      this._cachedGetSinglePixelWidth = null;\n    }\n  }\n\n  transform(a, b, c, d, e, f) {\n    this.ctx.transform(a, b, c, d, e, f);\n\n    this._cachedScaleForStroking[0] = -1;\n    this._cachedGetSinglePixelWidth = null;\n  }\n\n  // Path\n  constructPath(ops, args, minMax) {\n    const ctx = this.ctx;\n    const current = this.current;\n    let x = current.x,\n      y = current.y;\n    let startX, startY;\n    const currentTransform = getCurrentTransform(ctx);\n\n    // Most of the time the current transform is a scaling matrix\n    // so we don't need to transform points before computing min/max:\n    // we can compute min/max first and then smartly \"apply\" the\n    // transform (see Util.scaleMinMax).\n    // For rectangle, moveTo and lineTo, min/max are computed in the\n    // worker (see evaluator.js).\n    const isScalingMatrix =\n      (currentTransform[0] === 0 && currentTransform[3] === 0) ||\n      (currentTransform[1] === 0 && currentTransform[2] === 0);\n    const minMaxForBezier = isScalingMatrix ? minMax.slice(0) : null;\n\n    for (let i = 0, j = 0, ii = ops.length; i < ii; i++) {\n      switch (ops[i] | 0) {\n        case OPS.rectangle:\n          x = args[j++];\n          y = args[j++];\n          const width = args[j++];\n          const height = args[j++];\n\n          const xw = x + width;\n          const yh = y + height;\n          ctx.moveTo(x, y);\n          if (width === 0 || height === 0) {\n            ctx.lineTo(xw, yh);\n          } else {\n            ctx.lineTo(xw, y);\n            ctx.lineTo(xw, yh);\n            ctx.lineTo(x, yh);\n          }\n          if (!isScalingMatrix) {\n            current.updateRectMinMax(currentTransform, [x, y, xw, yh]);\n          }\n          ctx.closePath();\n          break;\n        case OPS.moveTo:\n          x = args[j++];\n          y = args[j++];\n          ctx.moveTo(x, y);\n          if (!isScalingMatrix) {\n            current.updatePathMinMax(currentTransform, x, y);\n          }\n          break;\n        case OPS.lineTo:\n          x = args[j++];\n          y = args[j++];\n          ctx.lineTo(x, y);\n          if (!isScalingMatrix) {\n            current.updatePathMinMax(currentTransform, x, y);\n          }\n          break;\n        case OPS.curveTo:\n          startX = x;\n          startY = y;\n          x = args[j + 4];\n          y = args[j + 5];\n          ctx.bezierCurveTo(\n            args[j],\n            args[j + 1],\n            args[j + 2],\n            args[j + 3],\n            x,\n            y\n          );\n          current.updateCurvePathMinMax(\n            currentTransform,\n            startX,\n            startY,\n            args[j],\n            args[j + 1],\n            args[j + 2],\n            args[j + 3],\n            x,\n            y,\n            minMaxForBezier\n          );\n          j += 6;\n          break;\n        case OPS.curveTo2:\n          startX = x;\n          startY = y;\n          ctx.bezierCurveTo(\n            x,\n            y,\n            args[j],\n            args[j + 1],\n            args[j + 2],\n            args[j + 3]\n          );\n          current.updateCurvePathMinMax(\n            currentTransform,\n            startX,\n            startY,\n            x,\n            y,\n            args[j],\n            args[j + 1],\n            args[j + 2],\n            args[j + 3],\n            minMaxForBezier\n          );\n          x = args[j + 2];\n          y = args[j + 3];\n          j += 4;\n          break;\n        case OPS.curveTo3:\n          startX = x;\n          startY = y;\n          x = args[j + 2];\n          y = args[j + 3];\n          ctx.bezierCurveTo(args[j], args[j + 1], x, y, x, y);\n          current.updateCurvePathMinMax(\n            currentTransform,\n            startX,\n            startY,\n            args[j],\n            args[j + 1],\n            x,\n            y,\n            x,\n            y,\n            minMaxForBezier\n          );\n          j += 4;\n          break;\n        case OPS.closePath:\n          ctx.closePath();\n          break;\n      }\n    }\n\n    if (isScalingMatrix) {\n      current.updateScalingPathMinMax(currentTransform, minMaxForBezier);\n    }\n\n    current.setCurrentPoint(x, y);\n  }\n\n  closePath() {\n    this.ctx.closePath();\n  }\n\n  stroke(consumePath = true) {\n    const ctx = this.ctx;\n    const strokeColor = this.current.strokeColor;\n    // For stroke we want to temporarily change the global alpha to the\n    // stroking alpha.\n    ctx.globalAlpha = this.current.strokeAlpha;\n    if (this.contentVisible) {\n      if (typeof strokeColor === \"object\" && strokeColor?.getPattern) {\n        ctx.save();\n        ctx.strokeStyle = strokeColor.getPattern(\n          ctx,\n          this,\n          getCurrentTransformInverse(ctx),\n          PathType.STROKE\n        );\n        this.rescaleAndStroke(/* saveRestore */ false);\n        ctx.restore();\n      } else {\n        this.rescaleAndStroke(/* saveRestore */ true);\n      }\n    }\n    if (consumePath) {\n      this.consumePath(this.current.getClippedPathBoundingBox());\n    }\n    // Restore the global alpha to the fill alpha\n    ctx.globalAlpha = this.current.fillAlpha;\n  }\n\n  closeStroke() {\n    this.closePath();\n    this.stroke();\n  }\n\n  fill(consumePath = true) {\n    const ctx = this.ctx;\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    let needRestore = false;\n\n    if (isPatternFill) {\n      ctx.save();\n      ctx.fillStyle = fillColor.getPattern(\n        ctx,\n        this,\n        getCurrentTransformInverse(ctx),\n        PathType.FILL\n      );\n      needRestore = true;\n    }\n\n    const intersect = this.current.getClippedPathBoundingBox();\n    if (this.contentVisible && intersect !== null) {\n      if (this.pendingEOFill) {\n        ctx.fill(\"evenodd\");\n        this.pendingEOFill = false;\n      } else {\n        ctx.fill();\n      }\n    }\n\n    if (needRestore) {\n      ctx.restore();\n    }\n    if (consumePath) {\n      this.consumePath(intersect);\n    }\n  }\n\n  eoFill() {\n    this.pendingEOFill = true;\n    this.fill();\n  }\n\n  fillStroke() {\n    this.fill(false);\n    this.stroke(false);\n\n    this.consumePath();\n  }\n\n  eoFillStroke() {\n    this.pendingEOFill = true;\n    this.fillStroke();\n  }\n\n  closeFillStroke() {\n    this.closePath();\n    this.fillStroke();\n  }\n\n  closeEOFillStroke() {\n    this.pendingEOFill = true;\n    this.closePath();\n    this.fillStroke();\n  }\n\n  endPath() {\n    this.consumePath();\n  }\n\n  // Clipping\n  clip() {\n    this.pendingClip = NORMAL_CLIP;\n  }\n\n  eoClip() {\n    this.pendingClip = EO_CLIP;\n  }\n\n  // Text\n  beginText() {\n    this.current.textMatrix = IDENTITY_MATRIX;\n    this.current.textMatrixScale = 1;\n    this.current.x = this.current.lineX = 0;\n    this.current.y = this.current.lineY = 0;\n  }\n\n  endText() {\n    const paths = this.pendingTextPaths;\n    const ctx = this.ctx;\n    if (paths === undefined) {\n      ctx.beginPath();\n      return;\n    }\n\n    ctx.save();\n    ctx.beginPath();\n    for (const path of paths) {\n      ctx.setTransform(...path.transform);\n      ctx.translate(path.x, path.y);\n      path.addToPath(ctx, path.fontSize);\n    }\n    ctx.restore();\n    ctx.clip();\n    ctx.beginPath();\n    delete this.pendingTextPaths;\n  }\n\n  setCharSpacing(spacing) {\n    this.current.charSpacing = spacing;\n  }\n\n  setWordSpacing(spacing) {\n    this.current.wordSpacing = spacing;\n  }\n\n  setHScale(scale) {\n    this.current.textHScale = scale / 100;\n  }\n\n  setLeading(leading) {\n    this.current.leading = -leading;\n  }\n\n  setFont(fontRefName, size) {\n    const fontObj = this.commonObjs.get(fontRefName);\n    const current = this.current;\n\n    if (!fontObj) {\n      throw new Error(`Can't find font for ${fontRefName}`);\n    }\n    current.fontMatrix = fontObj.fontMatrix || FONT_IDENTITY_MATRIX;\n\n    // A valid matrix needs all main diagonal elements to be non-zero\n    // This also ensures we bypass FF bugzilla bug #719844.\n    if (current.fontMatrix[0] === 0 || current.fontMatrix[3] === 0) {\n      warn(\"Invalid font matrix for font \" + fontRefName);\n    }\n\n    // The spec for Tf (setFont) says that 'size' specifies the font 'scale',\n    // and in some docs this can be negative (inverted x-y axes).\n    if (size < 0) {\n      size = -size;\n      current.fontDirection = -1;\n    } else {\n      current.fontDirection = 1;\n    }\n\n    this.current.font = fontObj;\n    this.current.fontSize = size;\n\n    if (fontObj.isType3Font) {\n      return; // we don't need ctx.font for Type3 fonts\n    }\n\n    const name = fontObj.loadedName || \"sans-serif\";\n    const typeface =\n      fontObj.systemFontInfo?.css || `\"${name}\", ${fontObj.fallbackName}`;\n\n    let bold = \"normal\";\n    if (fontObj.black) {\n      bold = \"900\";\n    } else if (fontObj.bold) {\n      bold = \"bold\";\n    }\n    const italic = fontObj.italic ? \"italic\" : \"normal\";\n\n    // Some font backends cannot handle fonts below certain size.\n    // Keeping the font at minimal size and using the fontSizeScale to change\n    // the current transformation matrix before the fillText/strokeText.\n    // See https://bugzilla.mozilla.org/show_bug.cgi?id=726227\n    let browserFontSize = size;\n    if (size < MIN_FONT_SIZE) {\n      browserFontSize = MIN_FONT_SIZE;\n    } else if (size > MAX_FONT_SIZE) {\n      browserFontSize = MAX_FONT_SIZE;\n    }\n    this.current.fontSizeScale = size / browserFontSize;\n\n    this.ctx.font = `${italic} ${bold} ${browserFontSize}px ${typeface}`;\n  }\n\n  setTextRenderingMode(mode) {\n    this.current.textRenderingMode = mode;\n  }\n\n  setTextRise(rise) {\n    this.current.textRise = rise;\n  }\n\n  moveText(x, y) {\n    this.current.x = this.current.lineX += x;\n    this.current.y = this.current.lineY += y;\n  }\n\n  setLeadingMoveText(x, y) {\n    this.setLeading(-y);\n    this.moveText(x, y);\n  }\n\n  setTextMatrix(a, b, c, d, e, f) {\n    this.current.textMatrix = [a, b, c, d, e, f];\n    this.current.textMatrixScale = Math.hypot(a, b);\n\n    this.current.x = this.current.lineX = 0;\n    this.current.y = this.current.lineY = 0;\n  }\n\n  nextLine() {\n    this.moveText(0, this.current.leading);\n  }\n\n  paintChar(character, x, y, patternTransform) {\n    const ctx = this.ctx;\n    const current = this.current;\n    const font = current.font;\n    const textRenderingMode = current.textRenderingMode;\n    const fontSize = current.fontSize / current.fontSizeScale;\n    const fillStrokeMode =\n      textRenderingMode & TextRenderingMode.FILL_STROKE_MASK;\n    const isAddToPathSet = !!(\n      textRenderingMode & TextRenderingMode.ADD_TO_PATH_FLAG\n    );\n    const patternFill = current.patternFill && !font.missingFile;\n\n    let addToPath;\n    if (font.disableFontFace || isAddToPathSet || patternFill) {\n      addToPath = font.getPathGenerator(this.commonObjs, character);\n    }\n\n    if (font.disableFontFace || patternFill) {\n      ctx.save();\n      ctx.translate(x, y);\n      ctx.beginPath();\n      addToPath(ctx, fontSize);\n      if (patternTransform) {\n        ctx.setTransform(...patternTransform);\n      }\n      if (\n        fillStrokeMode === TextRenderingMode.FILL ||\n        fillStrokeMode === TextRenderingMode.FILL_STROKE\n      ) {\n        ctx.fill();\n      }\n      if (\n        fillStrokeMode === TextRenderingMode.STROKE ||\n        fillStrokeMode === TextRenderingMode.FILL_STROKE\n      ) {\n        ctx.stroke();\n      }\n      ctx.restore();\n    } else {\n      if (\n        fillStrokeMode === TextRenderingMode.FILL ||\n        fillStrokeMode === TextRenderingMode.FILL_STROKE\n      ) {\n        ctx.fillText(character, x, y);\n      }\n      if (\n        fillStrokeMode === TextRenderingMode.STROKE ||\n        fillStrokeMode === TextRenderingMode.FILL_STROKE\n      ) {\n        ctx.strokeText(character, x, y);\n      }\n    }\n\n    if (isAddToPathSet) {\n      const paths = (this.pendingTextPaths ||= []);\n      paths.push({\n        transform: getCurrentTransform(ctx),\n        x,\n        y,\n        fontSize,\n        addToPath,\n      });\n    }\n  }\n\n  get isFontSubpixelAAEnabled() {\n    // Checks if anti-aliasing is enabled when scaled text is painted.\n    // On Windows GDI scaled fonts looks bad.\n    const { context: ctx } = this.cachedCanvases.getCanvas(\n      \"isFontSubpixelAAEnabled\",\n      10,\n      10\n    );\n    ctx.scale(1.5, 1);\n    ctx.fillText(\"I\", 0, 10);\n    const data = ctx.getImageData(0, 0, 10, 10).data;\n    let enabled = false;\n    for (let i = 3; i < data.length; i += 4) {\n      if (data[i] > 0 && data[i] < 255) {\n        enabled = true;\n        break;\n      }\n    }\n    return shadow(this, \"isFontSubpixelAAEnabled\", enabled);\n  }\n\n  showText(glyphs) {\n    const current = this.current;\n    const font = current.font;\n    if (font.isType3Font) {\n      return this.showType3Text(glyphs);\n    }\n\n    const fontSize = current.fontSize;\n    if (fontSize === 0) {\n      return undefined;\n    }\n\n    const ctx = this.ctx;\n    const fontSizeScale = current.fontSizeScale;\n    const charSpacing = current.charSpacing;\n    const wordSpacing = current.wordSpacing;\n    const fontDirection = current.fontDirection;\n    const textHScale = current.textHScale * fontDirection;\n    const glyphsLength = glyphs.length;\n    const vertical = font.vertical;\n    const spacingDir = vertical ? 1 : -1;\n    const defaultVMetrics = font.defaultVMetrics;\n    const widthAdvanceScale = fontSize * current.fontMatrix[0];\n\n    const simpleFillText =\n      current.textRenderingMode === TextRenderingMode.FILL &&\n      !font.disableFontFace &&\n      !current.patternFill;\n\n    ctx.save();\n    ctx.transform(...current.textMatrix);\n    ctx.translate(current.x, current.y + current.textRise);\n\n    if (fontDirection > 0) {\n      ctx.scale(textHScale, -1);\n    } else {\n      ctx.scale(textHScale, 1);\n    }\n\n    let patternTransform;\n    if (current.patternFill) {\n      ctx.save();\n      const pattern = current.fillColor.getPattern(\n        ctx,\n        this,\n        getCurrentTransformInverse(ctx),\n        PathType.FILL\n      );\n      patternTransform = getCurrentTransform(ctx);\n      ctx.restore();\n      ctx.fillStyle = pattern;\n    }\n\n    let lineWidth = current.lineWidth;\n    const scale = current.textMatrixScale;\n    if (scale === 0 || lineWidth === 0) {\n      const fillStrokeMode =\n        current.textRenderingMode & TextRenderingMode.FILL_STROKE_MASK;\n      if (\n        fillStrokeMode === TextRenderingMode.STROKE ||\n        fillStrokeMode === TextRenderingMode.FILL_STROKE\n      ) {\n        lineWidth = this.getSinglePixelWidth();\n      }\n    } else {\n      lineWidth /= scale;\n    }\n\n    if (fontSizeScale !== 1.0) {\n      ctx.scale(fontSizeScale, fontSizeScale);\n      lineWidth /= fontSizeScale;\n    }\n\n    ctx.lineWidth = lineWidth;\n\n    if (font.isInvalidPDFjsFont) {\n      const chars = [];\n      let width = 0;\n      for (const glyph of glyphs) {\n        chars.push(glyph.unicode);\n        width += glyph.width;\n      }\n      ctx.fillText(chars.join(\"\"), 0, 0);\n      current.x += width * widthAdvanceScale * textHScale;\n      ctx.restore();\n      this.compose();\n\n      return undefined;\n    }\n\n    let x = 0,\n      i;\n    for (i = 0; i < glyphsLength; ++i) {\n      const glyph = glyphs[i];\n      if (typeof glyph === \"number\") {\n        x += (spacingDir * glyph * fontSize) / 1000;\n        continue;\n      }\n\n      let restoreNeeded = false;\n      const spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n      const character = glyph.fontChar;\n      const accent = glyph.accent;\n      let scaledX, scaledY;\n      let width = glyph.width;\n      if (vertical) {\n        const vmetric = glyph.vmetric || defaultVMetrics;\n        const vx =\n          -(glyph.vmetric ? vmetric[1] : width * 0.5) * widthAdvanceScale;\n        const vy = vmetric[2] * widthAdvanceScale;\n\n        width = vmetric ? -vmetric[0] : width;\n        scaledX = vx / fontSizeScale;\n        scaledY = (x + vy) / fontSizeScale;\n      } else {\n        scaledX = x / fontSizeScale;\n        scaledY = 0;\n      }\n\n      if (font.remeasure && width > 0) {\n        // Some standard fonts may not have the exact width: rescale per\n        // character if measured width is greater than expected glyph width\n        // and subpixel-aa is enabled, otherwise just center the glyph.\n        const measuredWidth =\n          ((ctx.measureText(character).width * 1000) / fontSize) *\n          fontSizeScale;\n        if (width < measuredWidth && this.isFontSubpixelAAEnabled) {\n          const characterScaleX = width / measuredWidth;\n          restoreNeeded = true;\n          ctx.save();\n          ctx.scale(characterScaleX, 1);\n          scaledX /= characterScaleX;\n        } else if (width !== measuredWidth) {\n          scaledX +=\n            (((width - measuredWidth) / 2000) * fontSize) / fontSizeScale;\n        }\n      }\n\n      // Only attempt to draw the glyph if it is actually in the embedded font\n      // file or if there isn't a font file so the fallback font is shown.\n      if (this.contentVisible && (glyph.isInFont || font.missingFile)) {\n        if (simpleFillText && !accent) {\n          // common case\n          ctx.fillText(character, scaledX, scaledY);\n        } else {\n          this.paintChar(character, scaledX, scaledY, patternTransform);\n          if (accent) {\n            const scaledAccentX =\n              scaledX + (fontSize * accent.offset.x) / fontSizeScale;\n            const scaledAccentY =\n              scaledY - (fontSize * accent.offset.y) / fontSizeScale;\n            this.paintChar(\n              accent.fontChar,\n              scaledAccentX,\n              scaledAccentY,\n              patternTransform\n            );\n          }\n        }\n      }\n\n      const charWidth = vertical\n        ? width * widthAdvanceScale - spacing * fontDirection\n        : width * widthAdvanceScale + spacing * fontDirection;\n      x += charWidth;\n\n      if (restoreNeeded) {\n        ctx.restore();\n      }\n    }\n    if (vertical) {\n      current.y -= x;\n    } else {\n      current.x += x * textHScale;\n    }\n    ctx.restore();\n    this.compose();\n\n    return undefined;\n  }\n\n  showType3Text(glyphs) {\n    // Type3 fonts - each glyph is a \"mini-PDF\"\n    const ctx = this.ctx;\n    const current = this.current;\n    const font = current.font;\n    const fontSize = current.fontSize;\n    const fontDirection = current.fontDirection;\n    const spacingDir = font.vertical ? 1 : -1;\n    const charSpacing = current.charSpacing;\n    const wordSpacing = current.wordSpacing;\n    const textHScale = current.textHScale * fontDirection;\n    const fontMatrix = current.fontMatrix || FONT_IDENTITY_MATRIX;\n    const glyphsLength = glyphs.length;\n    const isTextInvisible =\n      current.textRenderingMode === TextRenderingMode.INVISIBLE;\n    let i, glyph, width, spacingLength;\n\n    if (isTextInvisible || fontSize === 0) {\n      return;\n    }\n    this._cachedScaleForStroking[0] = -1;\n    this._cachedGetSinglePixelWidth = null;\n\n    ctx.save();\n    ctx.transform(...current.textMatrix);\n    ctx.translate(current.x, current.y);\n\n    ctx.scale(textHScale, fontDirection);\n\n    for (i = 0; i < glyphsLength; ++i) {\n      glyph = glyphs[i];\n      if (typeof glyph === \"number\") {\n        spacingLength = (spacingDir * glyph * fontSize) / 1000;\n        this.ctx.translate(spacingLength, 0);\n        current.x += spacingLength * textHScale;\n        continue;\n      }\n\n      const spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n      const operatorList = font.charProcOperatorList[glyph.operatorListId];\n      if (!operatorList) {\n        warn(`Type3 character \"${glyph.operatorListId}\" is not available.`);\n        continue;\n      }\n      if (this.contentVisible) {\n        this.processingType3 = glyph;\n        this.save();\n        ctx.scale(fontSize, fontSize);\n        ctx.transform(...fontMatrix);\n        this.executeOperatorList(operatorList);\n        this.restore();\n      }\n\n      const transformed = Util.applyTransform([glyph.width, 0], fontMatrix);\n      width = transformed[0] * fontSize + spacing;\n\n      ctx.translate(width, 0);\n      current.x += width * textHScale;\n    }\n    ctx.restore();\n    this.processingType3 = null;\n  }\n\n  // Type3 fonts\n  setCharWidth(xWidth, yWidth) {\n    // We can safely ignore this since the width should be the same\n    // as the width in the Widths array.\n  }\n\n  setCharWidthAndBounds(xWidth, yWidth, llx, lly, urx, ury) {\n    this.ctx.rect(llx, lly, urx - llx, ury - lly);\n    this.ctx.clip();\n    this.endPath();\n  }\n\n  // Color\n  getColorN_Pattern(IR) {\n    let pattern;\n    if (IR[0] === \"TilingPattern\") {\n      const color = IR[1];\n      const baseTransform = this.baseTransform || getCurrentTransform(this.ctx);\n      const canvasGraphicsFactory = {\n        createCanvasGraphics: ctx => {\n          return new CanvasGraphics(\n            ctx,\n            this.commonObjs,\n            this.objs,\n            this.canvasFactory,\n            this.filterFactory,\n            {\n              optionalContentConfig: this.optionalContentConfig,\n              markedContentStack: this.markedContentStack,\n            }\n          );\n        },\n      };\n      pattern = new TilingPattern(\n        IR,\n        color,\n        this.ctx,\n        canvasGraphicsFactory,\n        baseTransform\n      );\n    } else {\n      pattern = this._getPattern(IR[1], IR[2]);\n    }\n    return pattern;\n  }\n\n  setStrokeColorN() {\n    this.current.strokeColor = this.getColorN_Pattern(arguments);\n  }\n\n  setFillColorN() {\n    this.current.fillColor = this.getColorN_Pattern(arguments);\n    this.current.patternFill = true;\n  }\n\n  setStrokeRGBColor(r, g, b) {\n    const color = Util.makeHexColor(r, g, b);\n    this.ctx.strokeStyle = color;\n    this.current.strokeColor = color;\n  }\n\n  setFillRGBColor(r, g, b) {\n    const color = Util.makeHexColor(r, g, b);\n    this.ctx.fillStyle = color;\n    this.current.fillColor = color;\n    this.current.patternFill = false;\n  }\n\n  _getPattern(objId, matrix = null) {\n    let pattern;\n    if (this.cachedPatterns.has(objId)) {\n      pattern = this.cachedPatterns.get(objId);\n    } else {\n      pattern = getShadingPattern(this.getObject(objId));\n      this.cachedPatterns.set(objId, pattern);\n    }\n    if (matrix) {\n      pattern.matrix = matrix;\n    }\n    return pattern;\n  }\n\n  shadingFill(objId) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n\n    this.save();\n    const pattern = this._getPattern(objId);\n    ctx.fillStyle = pattern.getPattern(\n      ctx,\n      this,\n      getCurrentTransformInverse(ctx),\n      PathType.SHADING\n    );\n\n    const inv = getCurrentTransformInverse(ctx);\n    if (inv) {\n      const { width, height } = ctx.canvas;\n      const [x0, y0, x1, y1] = Util.getAxialAlignedBoundingBox(\n        [0, 0, width, height],\n        inv\n      );\n\n      this.ctx.fillRect(x0, y0, x1 - x0, y1 - y0);\n    } else {\n      // HACK to draw the gradient onto an infinite rectangle.\n      // PDF gradients are drawn across the entire image while\n      // Canvas only allows gradients to be drawn in a rectangle\n      // The following bug should allow us to remove this.\n      // https://bugzilla.mozilla.org/show_bug.cgi?id=664884\n\n      this.ctx.fillRect(-1e10, -1e10, 2e10, 2e10);\n    }\n\n    this.compose(this.current.getClippedPathBoundingBox());\n    this.restore();\n  }\n\n  // Images\n  beginInlineImage() {\n    unreachable(\"Should not call beginInlineImage\");\n  }\n\n  beginImageData() {\n    unreachable(\"Should not call beginImageData\");\n  }\n\n  paintFormXObjectBegin(matrix, bbox) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.save();\n    this.baseTransformStack.push(this.baseTransform);\n\n    if (Array.isArray(matrix) && matrix.length === 6) {\n      this.transform(...matrix);\n    }\n\n    this.baseTransform = getCurrentTransform(this.ctx);\n\n    if (bbox) {\n      const width = bbox[2] - bbox[0];\n      const height = bbox[3] - bbox[1];\n      this.ctx.rect(bbox[0], bbox[1], width, height);\n      this.current.updateRectMinMax(getCurrentTransform(this.ctx), bbox);\n      this.clip();\n      this.endPath();\n    }\n  }\n\n  paintFormXObjectEnd() {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.restore();\n    this.baseTransform = this.baseTransformStack.pop();\n  }\n\n  beginGroup(group) {\n    if (!this.contentVisible) {\n      return;\n    }\n\n    this.save();\n    // If there's an active soft mask we don't want it enabled for the group, so\n    // clear it out. The mask and suspended canvas will be restored in endGroup.\n    if (this.inSMaskMode) {\n      this.endSMaskMode();\n      this.current.activeSMask = null;\n    }\n\n    const currentCtx = this.ctx;\n    // TODO non-isolated groups - according to Rik at adobe non-isolated\n    // group results aren't usually that different and they even have tools\n    // that ignore this setting. Notes from Rik on implementing:\n    // - When you encounter an transparency group, create a new canvas with\n    // the dimensions of the bbox\n    // - copy the content from the previous canvas to the new canvas\n    // - draw as usual\n    // - remove the backdrop alpha:\n    // alphaNew = 1 - (1 - alpha)/(1 - alphaBackdrop) with 'alpha' the alpha\n    // value of your transparency group and 'alphaBackdrop' the alpha of the\n    // backdrop\n    // - remove background color:\n    // colorNew = color - alphaNew *colorBackdrop /(1 - alphaNew)\n    if (!group.isolated) {\n      info(\"TODO: Support non-isolated groups.\");\n    }\n\n    // TODO knockout - supposedly possible with the clever use of compositing\n    // modes.\n    if (group.knockout) {\n      warn(\"Knockout groups not supported.\");\n    }\n\n    const currentTransform = getCurrentTransform(currentCtx);\n    if (group.matrix) {\n      currentCtx.transform(...group.matrix);\n    }\n    if (!group.bbox) {\n      throw new Error(\"Bounding box is required.\");\n    }\n\n    // Based on the current transform figure out how big the bounding box\n    // will actually be.\n    let bounds = Util.getAxialAlignedBoundingBox(\n      group.bbox,\n      getCurrentTransform(currentCtx)\n    );\n    // Clip the bounding box to the current canvas.\n    const canvasBounds = [\n      0,\n      0,\n      currentCtx.canvas.width,\n      currentCtx.canvas.height,\n    ];\n    bounds = Util.intersect(bounds, canvasBounds) || [0, 0, 0, 0];\n    // Use ceil in case we're between sizes so we don't create canvas that is\n    // too small and make the canvas at least 1x1 pixels.\n    const offsetX = Math.floor(bounds[0]);\n    const offsetY = Math.floor(bounds[1]);\n    let drawnWidth = Math.max(Math.ceil(bounds[2]) - offsetX, 1);\n    let drawnHeight = Math.max(Math.ceil(bounds[3]) - offsetY, 1);\n    let scaleX = 1,\n      scaleY = 1;\n    if (drawnWidth > MAX_GROUP_SIZE) {\n      scaleX = drawnWidth / MAX_GROUP_SIZE;\n      drawnWidth = MAX_GROUP_SIZE;\n    }\n    if (drawnHeight > MAX_GROUP_SIZE) {\n      scaleY = drawnHeight / MAX_GROUP_SIZE;\n      drawnHeight = MAX_GROUP_SIZE;\n    }\n\n    this.current.startNewPathAndClipBox([0, 0, drawnWidth, drawnHeight]);\n\n    let cacheId = \"groupAt\" + this.groupLevel;\n    if (group.smask) {\n      // Using two cache entries is case if masks are used one after another.\n      cacheId += \"_smask_\" + (this.smaskCounter++ % 2);\n    }\n    const scratchCanvas = this.cachedCanvases.getCanvas(\n      cacheId,\n      drawnWidth,\n      drawnHeight\n    );\n    const groupCtx = scratchCanvas.context;\n\n    // Since we created a new canvas that is just the size of the bounding box\n    // we have to translate the group ctx.\n    groupCtx.scale(1 / scaleX, 1 / scaleY);\n    groupCtx.translate(-offsetX, -offsetY);\n    groupCtx.transform(...currentTransform);\n\n    if (group.smask) {\n      // Saving state and cached mask to be used in setGState.\n      this.smaskStack.push({\n        canvas: scratchCanvas.canvas,\n        context: groupCtx,\n        offsetX,\n        offsetY,\n        scaleX,\n        scaleY,\n        subtype: group.smask.subtype,\n        backdrop: group.smask.backdrop,\n        transferMap: group.smask.transferMap || null,\n        startTransformInverse: null, // used during suspend operation\n      });\n    } else {\n      // Setup the current ctx so when the group is popped we draw it at the\n      // right location.\n      currentCtx.setTransform(1, 0, 0, 1, 0, 0);\n      currentCtx.translate(offsetX, offsetY);\n      currentCtx.scale(scaleX, scaleY);\n      currentCtx.save();\n    }\n    // The transparency group inherits all off the current graphics state\n    // except the blend mode, soft mask, and alpha constants.\n    copyCtxState(currentCtx, groupCtx);\n    this.ctx = groupCtx;\n    this.setGState([\n      [\"BM\", \"source-over\"],\n      [\"ca\", 1],\n      [\"CA\", 1],\n    ]);\n    this.groupStack.push(currentCtx);\n    this.groupLevel++;\n  }\n\n  endGroup(group) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.groupLevel--;\n    const groupCtx = this.ctx;\n    const ctx = this.groupStack.pop();\n    this.ctx = ctx;\n    // Turn off image smoothing to avoid sub pixel interpolation which can\n    // look kind of blurry for some pdfs.\n    this.ctx.imageSmoothingEnabled = false;\n\n    if (group.smask) {\n      this.tempSMask = this.smaskStack.pop();\n      this.restore();\n    } else {\n      this.ctx.restore();\n      const currentMtx = getCurrentTransform(this.ctx);\n      this.restore();\n      this.ctx.save();\n      this.ctx.setTransform(...currentMtx);\n      const dirtyBox = Util.getAxialAlignedBoundingBox(\n        [0, 0, groupCtx.canvas.width, groupCtx.canvas.height],\n        currentMtx\n      );\n      this.ctx.drawImage(groupCtx.canvas, 0, 0);\n      this.ctx.restore();\n      this.compose(dirtyBox);\n    }\n  }\n\n  beginAnnotation(id, rect, transform, matrix, hasOwnCanvas) {\n    // The annotations are drawn just after the page content.\n    // The page content drawing can potentially have set a transform,\n    // a clipping path, whatever...\n    // So in order to have something clean, we restore the initial state.\n    this.#restoreInitialState();\n    resetCtxToDefault(this.ctx);\n\n    this.ctx.save();\n    this.save();\n\n    if (this.baseTransform) {\n      this.ctx.setTransform(...this.baseTransform);\n    }\n\n    if (Array.isArray(rect) && rect.length === 4) {\n      const width = rect[2] - rect[0];\n      const height = rect[3] - rect[1];\n\n      if (hasOwnCanvas && this.annotationCanvasMap) {\n        transform = transform.slice();\n        transform[4] -= rect[0];\n        transform[5] -= rect[1];\n\n        rect = rect.slice();\n        rect[0] = rect[1] = 0;\n        rect[2] = width;\n        rect[3] = height;\n\n        const [scaleX, scaleY] = Util.singularValueDecompose2dScale(\n          getCurrentTransform(this.ctx)\n        );\n        const { viewportScale } = this;\n        const canvasWidth = Math.ceil(\n          width * this.outputScaleX * viewportScale\n        );\n        const canvasHeight = Math.ceil(\n          height * this.outputScaleY * viewportScale\n        );\n\n        this.annotationCanvas = this.canvasFactory.create(\n          canvasWidth,\n          canvasHeight\n        );\n        const { canvas, context } = this.annotationCanvas;\n        this.annotationCanvasMap.set(id, canvas);\n        this.annotationCanvas.savedCtx = this.ctx;\n        this.ctx = context;\n        this.ctx.save();\n        this.ctx.setTransform(scaleX, 0, 0, -scaleY, 0, height * scaleY);\n\n        resetCtxToDefault(this.ctx);\n      } else {\n        resetCtxToDefault(this.ctx);\n\n        this.ctx.rect(rect[0], rect[1], width, height);\n        this.ctx.clip();\n        this.endPath();\n      }\n    }\n\n    this.current = new CanvasExtraState(\n      this.ctx.canvas.width,\n      this.ctx.canvas.height\n    );\n\n    this.transform(...transform);\n    this.transform(...matrix);\n  }\n\n  endAnnotation() {\n    if (this.annotationCanvas) {\n      this.ctx.restore();\n      this.#drawFilter();\n\n      this.ctx = this.annotationCanvas.savedCtx;\n      delete this.annotationCanvas.savedCtx;\n      delete this.annotationCanvas;\n    }\n  }\n\n  paintImageMaskXObject(img) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const count = img.count;\n    img = this.getObject(img.data, img);\n    img.count = count;\n\n    const ctx = this.ctx;\n    const glyph = this.processingType3;\n\n    if (glyph) {\n      if (glyph.compiled === undefined) {\n        glyph.compiled = compileType3Glyph(img);\n      }\n\n      if (glyph.compiled) {\n        glyph.compiled(ctx);\n        return;\n      }\n    }\n    const mask = this._createMaskCanvas(img);\n    const maskCanvas = mask.canvas;\n\n    ctx.save();\n    // The mask is drawn with the transform applied. Reset the current\n    // transform to draw to the identity.\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    ctx.drawImage(maskCanvas, mask.offsetX, mask.offsetY);\n    ctx.restore();\n    this.compose();\n  }\n\n  paintImageMaskXObjectRepeat(\n    img,\n    scaleX,\n    skewX = 0,\n    skewY = 0,\n    scaleY,\n    positions\n  ) {\n    if (!this.contentVisible) {\n      return;\n    }\n\n    img = this.getObject(img.data, img);\n\n    const ctx = this.ctx;\n    ctx.save();\n    const currentTransform = getCurrentTransform(ctx);\n    ctx.transform(scaleX, skewX, skewY, scaleY, 0, 0);\n    const mask = this._createMaskCanvas(img);\n\n    ctx.setTransform(\n      1,\n      0,\n      0,\n      1,\n      mask.offsetX - currentTransform[4],\n      mask.offsetY - currentTransform[5]\n    );\n    for (let i = 0, ii = positions.length; i < ii; i += 2) {\n      const trans = Util.transform(currentTransform, [\n        scaleX,\n        skewX,\n        skewY,\n        scaleY,\n        positions[i],\n        positions[i + 1],\n      ]);\n\n      const [x, y] = Util.applyTransform([0, 0], trans);\n      ctx.drawImage(mask.canvas, x, y);\n    }\n    ctx.restore();\n    this.compose();\n  }\n\n  paintImageMaskXObjectGroup(images) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n\n    for (const image of images) {\n      const { data, width, height, transform } = image;\n\n      const maskCanvas = this.cachedCanvases.getCanvas(\n        \"maskCanvas\",\n        width,\n        height\n      );\n      const maskCtx = maskCanvas.context;\n      maskCtx.save();\n\n      const img = this.getObject(data, image);\n      putBinaryImageMask(maskCtx, img);\n\n      maskCtx.globalCompositeOperation = \"source-in\";\n\n      maskCtx.fillStyle = isPatternFill\n        ? fillColor.getPattern(\n            maskCtx,\n            this,\n            getCurrentTransformInverse(ctx),\n            PathType.FILL\n          )\n        : fillColor;\n      maskCtx.fillRect(0, 0, width, height);\n\n      maskCtx.restore();\n\n      ctx.save();\n      ctx.transform(...transform);\n      ctx.scale(1, -1);\n      drawImageAtIntegerCoords(\n        ctx,\n        maskCanvas.canvas,\n        0,\n        0,\n        width,\n        height,\n        0,\n        -1,\n        1,\n        1\n      );\n      ctx.restore();\n    }\n    this.compose();\n  }\n\n  paintImageXObject(objId) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const imgData = this.getObject(objId);\n    if (!imgData) {\n      warn(\"Dependent image isn't ready yet\");\n      return;\n    }\n\n    this.paintInlineImageXObject(imgData);\n  }\n\n  paintImageXObjectRepeat(objId, scaleX, scaleY, positions) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const imgData = this.getObject(objId);\n    if (!imgData) {\n      warn(\"Dependent image isn't ready yet\");\n      return;\n    }\n\n    const width = imgData.width;\n    const height = imgData.height;\n    const map = [];\n    for (let i = 0, ii = positions.length; i < ii; i += 2) {\n      map.push({\n        transform: [scaleX, 0, 0, scaleY, positions[i], positions[i + 1]],\n        x: 0,\n        y: 0,\n        w: width,\n        h: height,\n      });\n    }\n    this.paintInlineImageXObjectGroup(imgData, map);\n  }\n\n  applyTransferMapsToCanvas(ctx) {\n    if (this.current.transferMaps !== \"none\") {\n      ctx.filter = this.current.transferMaps;\n      ctx.drawImage(ctx.canvas, 0, 0);\n      ctx.filter = \"none\";\n    }\n    return ctx.canvas;\n  }\n\n  applyTransferMapsToBitmap(imgData) {\n    if (this.current.transferMaps === \"none\") {\n      return imgData.bitmap;\n    }\n    const { bitmap, width, height } = imgData;\n    const tmpCanvas = this.cachedCanvases.getCanvas(\n      \"inlineImage\",\n      width,\n      height\n    );\n    const tmpCtx = tmpCanvas.context;\n    tmpCtx.filter = this.current.transferMaps;\n    tmpCtx.drawImage(bitmap, 0, 0);\n    tmpCtx.filter = \"none\";\n\n    return tmpCanvas.canvas;\n  }\n\n  paintInlineImageXObject(imgData) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const width = imgData.width;\n    const height = imgData.height;\n    const ctx = this.ctx;\n\n    this.save();\n\n    if (\n      (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) ||\n      !isNodeJS\n    ) {\n      // The filter, if any, will be applied in applyTransferMapsToBitmap.\n      // It must be applied to the image before rescaling else some artifacts\n      // could appear.\n      // The final restore will reset it to its value.\n      const { filter } = ctx;\n      if (filter !== \"none\" && filter !== \"\") {\n        ctx.filter = \"none\";\n      }\n    }\n\n    // scale the image to the unit square\n    ctx.scale(1 / width, -1 / height);\n\n    let imgToPaint;\n    if (imgData.bitmap) {\n      imgToPaint = this.applyTransferMapsToBitmap(imgData);\n    } else if (\n      (typeof HTMLElement === \"function\" && imgData instanceof HTMLElement) ||\n      !imgData.data\n    ) {\n      // typeof check is needed due to node.js support, see issue #8489\n      imgToPaint = imgData;\n    } else {\n      const tmpCanvas = this.cachedCanvases.getCanvas(\n        \"inlineImage\",\n        width,\n        height\n      );\n      const tmpCtx = tmpCanvas.context;\n      putBinaryImageData(tmpCtx, imgData);\n      imgToPaint = this.applyTransferMapsToCanvas(tmpCtx);\n    }\n\n    const scaled = this._scaleImage(\n      imgToPaint,\n      getCurrentTransformInverse(ctx)\n    );\n    ctx.imageSmoothingEnabled = getImageSmoothingEnabled(\n      getCurrentTransform(ctx),\n      imgData.interpolate\n    );\n\n    drawImageAtIntegerCoords(\n      ctx,\n      scaled.img,\n      0,\n      0,\n      scaled.paintWidth,\n      scaled.paintHeight,\n      0,\n      -height,\n      width,\n      height\n    );\n    this.compose();\n    this.restore();\n  }\n\n  paintInlineImageXObjectGroup(imgData, map) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n    let imgToPaint;\n    if (imgData.bitmap) {\n      imgToPaint = imgData.bitmap;\n    } else {\n      const w = imgData.width;\n      const h = imgData.height;\n\n      const tmpCanvas = this.cachedCanvases.getCanvas(\"inlineImage\", w, h);\n      const tmpCtx = tmpCanvas.context;\n      putBinaryImageData(tmpCtx, imgData);\n      imgToPaint = this.applyTransferMapsToCanvas(tmpCtx);\n    }\n\n    for (const entry of map) {\n      ctx.save();\n      ctx.transform(...entry.transform);\n      ctx.scale(1, -1);\n      drawImageAtIntegerCoords(\n        ctx,\n        imgToPaint,\n        entry.x,\n        entry.y,\n        entry.w,\n        entry.h,\n        0,\n        -1,\n        1,\n        1\n      );\n      ctx.restore();\n    }\n    this.compose();\n  }\n\n  paintSolidColorImageMask() {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.ctx.fillRect(0, 0, 1, 1);\n    this.compose();\n  }\n\n  // Marked content\n\n  markPoint(tag) {\n    // TODO Marked content.\n  }\n\n  markPointProps(tag, properties) {\n    // TODO Marked content.\n  }\n\n  beginMarkedContent(tag) {\n    this.markedContentStack.push({\n      visible: true,\n    });\n  }\n\n  beginMarkedContentProps(tag, properties) {\n    if (tag === \"OC\") {\n      this.markedContentStack.push({\n        visible: this.optionalContentConfig.isVisible(properties),\n      });\n    } else {\n      this.markedContentStack.push({\n        visible: true,\n      });\n    }\n    this.contentVisible = this.isContentVisible();\n  }\n\n  endMarkedContent() {\n    this.markedContentStack.pop();\n    this.contentVisible = this.isContentVisible();\n  }\n\n  // Compatibility\n\n  beginCompat() {\n    // TODO ignore undefined operators (should we do that anyway?)\n  }\n\n  endCompat() {\n    // TODO stop ignoring undefined operators\n  }\n\n  // Helper functions\n\n  consumePath(clipBox) {\n    const isEmpty = this.current.isEmptyClip();\n    if (this.pendingClip) {\n      this.current.updateClipFromPath();\n    }\n    if (!this.pendingClip) {\n      this.compose(clipBox);\n    }\n    const ctx = this.ctx;\n    if (this.pendingClip) {\n      if (!isEmpty) {\n        if (this.pendingClip === EO_CLIP) {\n          ctx.clip(\"evenodd\");\n        } else {\n          ctx.clip();\n        }\n      }\n      this.pendingClip = null;\n    }\n    this.current.startNewPathAndClipBox(this.current.clipBox);\n    ctx.beginPath();\n  }\n\n  getSinglePixelWidth() {\n    if (!this._cachedGetSinglePixelWidth) {\n      const m = getCurrentTransform(this.ctx);\n      if (m[1] === 0 && m[2] === 0) {\n        // Fast path\n        this._cachedGetSinglePixelWidth =\n          1 / Math.min(Math.abs(m[0]), Math.abs(m[3]));\n      } else {\n        const absDet = Math.abs(m[0] * m[3] - m[2] * m[1]);\n        const normX = Math.hypot(m[0], m[2]);\n        const normY = Math.hypot(m[1], m[3]);\n        this._cachedGetSinglePixelWidth = Math.max(normX, normY) / absDet;\n      }\n    }\n    return this._cachedGetSinglePixelWidth;\n  }\n\n  getScaleForStroking() {\n    // A pixel has thicknessX = thicknessY = 1;\n    // A transformed pixel is a parallelogram and the thicknesses\n    // corresponds to the heights.\n    // The goal of this function is to rescale before setting the\n    // lineWidth in order to have both thicknesses greater or equal\n    // to 1 after transform.\n    if (this._cachedScaleForStroking[0] === -1) {\n      const { lineWidth } = this.current;\n      const { a, b, c, d } = this.ctx.getTransform();\n      let scaleX, scaleY;\n\n      if (b === 0 && c === 0) {\n        // Fast path\n        const normX = Math.abs(a);\n        const normY = Math.abs(d);\n        if (normX === normY) {\n          if (lineWidth === 0) {\n            scaleX = scaleY = 1 / normX;\n          } else {\n            const scaledLineWidth = normX * lineWidth;\n            scaleX = scaleY = scaledLineWidth < 1 ? 1 / scaledLineWidth : 1;\n          }\n        } else if (lineWidth === 0) {\n          scaleX = 1 / normX;\n          scaleY = 1 / normY;\n        } else {\n          const scaledXLineWidth = normX * lineWidth;\n          const scaledYLineWidth = normY * lineWidth;\n          scaleX = scaledXLineWidth < 1 ? 1 / scaledXLineWidth : 1;\n          scaleY = scaledYLineWidth < 1 ? 1 / scaledYLineWidth : 1;\n        }\n      } else {\n        // A pixel (base (x, y)) is transformed by M into a parallelogram:\n        //  - its area is |det(M)|;\n        //  - heightY (orthogonal to Mx) has a length: |det(M)| / norm(Mx);\n        //  - heightX (orthogonal to My) has a length: |det(M)| / norm(My).\n        // heightX and heightY are the thicknesses of the transformed pixel\n        // and they must be both greater or equal to 1.\n        const absDet = Math.abs(a * d - b * c);\n        const normX = Math.hypot(a, b);\n        const normY = Math.hypot(c, d);\n        if (lineWidth === 0) {\n          scaleX = normY / absDet;\n          scaleY = normX / absDet;\n        } else {\n          const baseArea = lineWidth * absDet;\n          scaleX = normY > baseArea ? normY / baseArea : 1;\n          scaleY = normX > baseArea ? normX / baseArea : 1;\n        }\n      }\n      this._cachedScaleForStroking[0] = scaleX;\n      this._cachedScaleForStroking[1] = scaleY;\n    }\n    return this._cachedScaleForStroking;\n  }\n\n  // Rescale before stroking in order to have a final lineWidth\n  // with both thicknesses greater or equal to 1.\n  rescaleAndStroke(saveRestore) {\n    const { ctx } = this;\n    const { lineWidth } = this.current;\n    const [scaleX, scaleY] = this.getScaleForStroking();\n\n    ctx.lineWidth = lineWidth || 1;\n\n    if (scaleX === 1 && scaleY === 1) {\n      ctx.stroke();\n      return;\n    }\n\n    const dashes = ctx.getLineDash();\n    if (saveRestore) {\n      ctx.save();\n    }\n\n    ctx.scale(scaleX, scaleY);\n\n    // How the dashed line is rendered depends on the current transform...\n    // so we added a rescale to handle too thin lines and consequently\n    // the way the line is dashed will be modified.\n    // If scaleX === scaleY, the dashed lines will be rendered correctly\n    // else we'll have some bugs (but only with too thin lines).\n    // Here we take the max... why not taking the min... or something else.\n    // Anyway, as said it's buggy when scaleX !== scaleY.\n    if (dashes.length > 0) {\n      const scale = Math.max(scaleX, scaleY);\n      ctx.setLineDash(dashes.map(x => x / scale));\n      ctx.lineDashOffset /= scale;\n    }\n\n    ctx.stroke();\n\n    if (saveRestore) {\n      ctx.restore();\n    }\n  }\n\n  isContentVisible() {\n    for (let i = this.markedContentStack.length - 1; i >= 0; i--) {\n      if (!this.markedContentStack[i].visible) {\n        return false;\n      }\n    }\n    return true;\n  }\n}\n\nfor (const op in OPS) {\n  if (CanvasGraphics.prototype[op] !== undefined) {\n    CanvasGraphics.prototype[OPS[op]] = CanvasGraphics.prototype[op];\n  }\n}\n\nexport { CanvasGraphics };\n","/* Copyright 2015 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  BaseCanvasFactory,\n  BaseCMapReaderFactory,\n  BaseFilterFactory,\n  BaseStandardFontDataFactory,\n  BaseSVGFactory,\n} from \"./base_factory.js\";\nimport {\n  BaseException,\n  FeatureTest,\n  shadow,\n  stringToBytes,\n  Util,\n  warn,\n} from \"../shared/util.js\";\n\nconst SVG_NS = \"http://www.w3.org/2000/svg\";\n\nclass PixelsPerInch {\n  static CSS = 96.0;\n\n  static PDF = 72.0;\n\n  static PDF_TO_CSS_UNITS = this.CSS / this.PDF;\n}\n\n/**\n * FilterFactory aims to create some SVG filters we can use when drawing an\n * image (or whatever) on a canvas.\n * Filters aren't applied with ctx.putImageData because it just overwrites the\n * underlying pixels.\n * With these filters, it's possible for example to apply some transfer maps on\n * an image without the need to apply them on the pixel arrays: the renderer\n * does the magic for us.\n */\nclass DOMFilterFactory extends BaseFilterFactory {\n  #_cache;\n\n  #_defs;\n\n  #docId;\n\n  #document;\n\n  #hcmFilter;\n\n  #hcmKey;\n\n  #hcmUrl;\n\n  #hcmHighlightFilter;\n\n  #hcmHighlightKey;\n\n  #hcmHighlightUrl;\n\n  #id = 0;\n\n  constructor({ docId, ownerDocument = globalThis.document } = {}) {\n    super();\n    this.#docId = docId;\n    this.#document = ownerDocument;\n  }\n\n  get #cache() {\n    return (this.#_cache ||= new Map());\n  }\n\n  get #defs() {\n    if (!this.#_defs) {\n      const div = this.#document.createElement(\"div\");\n      const { style } = div;\n      style.visibility = \"hidden\";\n      style.contain = \"strict\";\n      style.width = style.height = 0;\n      style.position = \"absolute\";\n      style.top = style.left = 0;\n      style.zIndex = -1;\n\n      const svg = this.#document.createElementNS(SVG_NS, \"svg\");\n      svg.setAttribute(\"width\", 0);\n      svg.setAttribute(\"height\", 0);\n      this.#_defs = this.#document.createElementNS(SVG_NS, \"defs\");\n      div.append(svg);\n      svg.append(this.#_defs);\n      this.#document.body.append(div);\n    }\n    return this.#_defs;\n  }\n\n  addFilter(maps) {\n    if (!maps) {\n      return \"none\";\n    }\n\n    // When a page is zoomed the page is re-drawn but the maps are likely\n    // the same.\n    let value = this.#cache.get(maps);\n    if (value) {\n      return value;\n    }\n\n    let tableR, tableG, tableB, key;\n    if (maps.length === 1) {\n      const mapR = maps[0];\n      const buffer = new Array(256);\n      for (let i = 0; i < 256; i++) {\n        buffer[i] = mapR[i] / 255;\n      }\n      key = tableR = tableG = tableB = buffer.join(\",\");\n    } else {\n      const [mapR, mapG, mapB] = maps;\n      const bufferR = new Array(256);\n      const bufferG = new Array(256);\n      const bufferB = new Array(256);\n      for (let i = 0; i < 256; i++) {\n        bufferR[i] = mapR[i] / 255;\n        bufferG[i] = mapG[i] / 255;\n        bufferB[i] = mapB[i] / 255;\n      }\n      tableR = bufferR.join(\",\");\n      tableG = bufferG.join(\",\");\n      tableB = bufferB.join(\",\");\n      key = `${tableR}${tableG}${tableB}`;\n    }\n\n    value = this.#cache.get(key);\n    if (value) {\n      this.#cache.set(maps, value);\n      return value;\n    }\n\n    // We create a SVG filter: feComponentTransferElement\n    //  https://www.w3.org/TR/SVG11/filters.html#feComponentTransferElement\n\n    const id = `g_${this.#docId}_transfer_map_${this.#id++}`;\n    const url = `url(#${id})`;\n    this.#cache.set(maps, url);\n    this.#cache.set(key, url);\n\n    const filter = this.#createFilter(id);\n    this.#addTransferMapConversion(tableR, tableG, tableB, filter);\n\n    return url;\n  }\n\n  addHCMFilter(fgColor, bgColor) {\n    const key = `${fgColor}-${bgColor}`;\n    if (this.#hcmKey === key) {\n      return this.#hcmUrl;\n    }\n\n    this.#hcmKey = key;\n    this.#hcmUrl = \"none\";\n    this.#hcmFilter?.remove();\n\n    if (!fgColor || !bgColor) {\n      return this.#hcmUrl;\n    }\n\n    const fgRGB = this.#getRGB(fgColor);\n    fgColor = Util.makeHexColor(...fgRGB);\n    const bgRGB = this.#getRGB(bgColor);\n    bgColor = Util.makeHexColor(...bgRGB);\n    this.#defs.style.color = \"\";\n\n    if (\n      (fgColor === \"#000000\" && bgColor === \"#ffffff\") ||\n      fgColor === bgColor\n    ) {\n      return this.#hcmUrl;\n    }\n\n    // https://developer.mozilla.org/en-US/docs/Web/Accessibility/Understanding_Colors_and_Luminance\n    //\n    // Relative luminance:\n    // https://www.w3.org/TR/WCAG20/#relativeluminancedef\n    //\n    // We compute the rounded luminance of the default background color.\n    // Then for every color in the pdf, if its rounded luminance is the\n    // same as the background one then it's replaced by the new\n    // background color else by the foreground one.\n    const map = new Array(256);\n    for (let i = 0; i <= 255; i++) {\n      const x = i / 255;\n      map[i] = x <= 0.03928 ? x / 12.92 : ((x + 0.055) / 1.055) ** 2.4;\n    }\n    const table = map.join(\",\");\n\n    const id = `g_${this.#docId}_hcm_filter`;\n    const filter = (this.#hcmHighlightFilter = this.#createFilter(id));\n    this.#addTransferMapConversion(table, table, table, filter);\n    this.#addGrayConversion(filter);\n\n    const getSteps = (c, n) => {\n      const start = fgRGB[c] / 255;\n      const end = bgRGB[c] / 255;\n      const arr = new Array(n + 1);\n      for (let i = 0; i <= n; i++) {\n        arr[i] = start + (i / n) * (end - start);\n      }\n      return arr.join(\",\");\n    };\n    this.#addTransferMapConversion(\n      getSteps(0, 5),\n      getSteps(1, 5),\n      getSteps(2, 5),\n      filter\n    );\n\n    this.#hcmUrl = `url(#${id})`;\n    return this.#hcmUrl;\n  }\n\n  addHighlightHCMFilter(fgColor, bgColor, newFgColor, newBgColor) {\n    const key = `${fgColor}-${bgColor}-${newFgColor}-${newBgColor}`;\n    if (this.#hcmHighlightKey === key) {\n      return this.#hcmHighlightUrl;\n    }\n\n    this.#hcmHighlightKey = key;\n    this.#hcmHighlightUrl = \"none\";\n    this.#hcmHighlightFilter?.remove();\n\n    if (!fgColor || !bgColor) {\n      return this.#hcmHighlightUrl;\n    }\n\n    const [fgRGB, bgRGB] = [fgColor, bgColor].map(this.#getRGB.bind(this));\n    let fgGray = Math.round(\n      0.2126 * fgRGB[0] + 0.7152 * fgRGB[1] + 0.0722 * fgRGB[2]\n    );\n    let bgGray = Math.round(\n      0.2126 * bgRGB[0] + 0.7152 * bgRGB[1] + 0.0722 * bgRGB[2]\n    );\n    let [newFgRGB, newBgRGB] = [newFgColor, newBgColor].map(\n      this.#getRGB.bind(this)\n    );\n    if (bgGray < fgGray) {\n      [fgGray, bgGray, newFgRGB, newBgRGB] = [\n        bgGray,\n        fgGray,\n        newBgRGB,\n        newFgRGB,\n      ];\n    }\n    this.#defs.style.color = \"\";\n\n    // Now we can create the filters to highlight some canvas parts.\n    // The colors in the pdf will almost be Canvas and CanvasText, hence we\n    // want to filter them to finally get Highlight and HighlightText.\n    // Since we're in HCM the background color and the foreground color should\n    // be really different when converted to grayscale (if they're not then it\n    // means that we've a poor contrast). Once the canvas colors are converted\n    // to grayscale we can easily map them on their new colors.\n    // The grayscale step is important because if we've something like:\n    //   fgColor = #FF....\n    //   bgColor = #FF....\n    //   then we are enable to map the red component on the new red components\n    //   which can be different.\n\n    const getSteps = (fg, bg, n) => {\n      const arr = new Array(256);\n      const step = (bgGray - fgGray) / n;\n      const newStart = fg / 255;\n      const newStep = (bg - fg) / (255 * n);\n      let prev = 0;\n      for (let i = 0; i <= n; i++) {\n        const k = Math.round(fgGray + i * step);\n        const value = newStart + i * newStep;\n        for (let j = prev; j <= k; j++) {\n          arr[j] = value;\n        }\n        prev = k + 1;\n      }\n      for (let i = prev; i < 256; i++) {\n        arr[i] = arr[prev - 1];\n      }\n      return arr.join(\",\");\n    };\n\n    const id = `g_${this.#docId}_hcm_highlight_filter`;\n    const filter = (this.#hcmHighlightFilter = this.#createFilter(id));\n\n    this.#addGrayConversion(filter);\n    this.#addTransferMapConversion(\n      getSteps(newFgRGB[0], newBgRGB[0], 5),\n      getSteps(newFgRGB[1], newBgRGB[1], 5),\n      getSteps(newFgRGB[2], newBgRGB[2], 5),\n      filter\n    );\n\n    this.#hcmHighlightUrl = `url(#${id})`;\n    return this.#hcmHighlightUrl;\n  }\n\n  destroy(keepHCM = false) {\n    if (keepHCM && (this.#hcmUrl || this.#hcmHighlightUrl)) {\n      return;\n    }\n    if (this.#_defs) {\n      this.#_defs.parentNode.parentNode.remove();\n      this.#_defs = null;\n    }\n    if (this.#_cache) {\n      this.#_cache.clear();\n      this.#_cache = null;\n    }\n    this.#id = 0;\n  }\n\n  #addGrayConversion(filter) {\n    const feColorMatrix = this.#document.createElementNS(\n      SVG_NS,\n      \"feColorMatrix\"\n    );\n    feColorMatrix.setAttribute(\"type\", \"matrix\");\n    feColorMatrix.setAttribute(\n      \"values\",\n      \"0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0\"\n    );\n    filter.append(feColorMatrix);\n  }\n\n  #createFilter(id) {\n    const filter = this.#document.createElementNS(SVG_NS, \"filter\");\n    filter.setAttribute(\"color-interpolation-filters\", \"sRGB\");\n    filter.setAttribute(\"id\", id);\n    this.#defs.append(filter);\n\n    return filter;\n  }\n\n  #appendFeFunc(feComponentTransfer, func, table) {\n    const feFunc = this.#document.createElementNS(SVG_NS, func);\n    feFunc.setAttribute(\"type\", \"discrete\");\n    feFunc.setAttribute(\"tableValues\", table);\n    feComponentTransfer.append(feFunc);\n  }\n\n  #addTransferMapConversion(rTable, gTable, bTable, filter) {\n    const feComponentTransfer = this.#document.createElementNS(\n      SVG_NS,\n      \"feComponentTransfer\"\n    );\n    filter.append(feComponentTransfer);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncR\", rTable);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncG\", gTable);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncB\", bTable);\n  }\n\n  #getRGB(color) {\n    this.#defs.style.color = color;\n    return getRGB(getComputedStyle(this.#defs).getPropertyValue(\"color\"));\n  }\n}\n\nclass DOMCanvasFactory extends BaseCanvasFactory {\n  constructor({ ownerDocument = globalThis.document } = {}) {\n    super();\n    this._document = ownerDocument;\n  }\n\n  /**\n   * @ignore\n   */\n  _createCanvas(width, height) {\n    const canvas = this._document.createElement(\"canvas\");\n    canvas.width = width;\n    canvas.height = height;\n    return canvas;\n  }\n}\n\nasync function fetchData(url, type = \"text\") {\n  if (\n    (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) ||\n    isValidFetchUrl(url, document.baseURI)\n  ) {\n    const response = await fetch(url);\n    if (!response.ok) {\n      throw new Error(response.statusText);\n    }\n    switch (type) {\n      case \"arraybuffer\":\n        return response.arrayBuffer();\n      case \"blob\":\n        return response.blob();\n      case \"json\":\n        return response.json();\n    }\n    return response.text();\n  }\n\n  // The Fetch API is not supported.\n  return new Promise((resolve, reject) => {\n    const request = new XMLHttpRequest();\n    request.open(\"GET\", url, /* async = */ true);\n    request.responseType = type;\n\n    request.onreadystatechange = () => {\n      if (request.readyState !== XMLHttpRequest.DONE) {\n        return;\n      }\n      if (request.status === 200 || request.status === 0) {\n        let data;\n        switch (type) {\n          case \"arraybuffer\":\n          case \"blob\":\n          case \"json\":\n            data = request.response;\n            break;\n          default:\n            data = request.responseText;\n            break;\n        }\n        if (data) {\n          resolve(data);\n          return;\n        }\n      }\n      reject(new Error(request.statusText));\n    };\n\n    request.send(null);\n  });\n}\n\nclass DOMCMapReaderFactory extends BaseCMapReaderFactory {\n  /**\n   * @ignore\n   */\n  _fetchData(url, compressionType) {\n    return fetchData(\n      url,\n      /* type = */ this.isCompressed ? \"arraybuffer\" : \"text\"\n    ).then(data => {\n      return {\n        cMapData:\n          data instanceof ArrayBuffer\n            ? new Uint8Array(data)\n            : stringToBytes(data),\n        compressionType,\n      };\n    });\n  }\n}\n\nclass DOMStandardFontDataFactory extends BaseStandardFontDataFactory {\n  /**\n   * @ignore\n   */\n  _fetchData(url) {\n    return fetchData(url, /* type = */ \"arraybuffer\").then(data => {\n      return new Uint8Array(data);\n    });\n  }\n}\n\nclass DOMSVGFactory extends BaseSVGFactory {\n  /**\n   * @ignore\n   */\n  _createSVG(type) {\n    return document.createElementNS(SVG_NS, type);\n  }\n}\n\n/**\n * @typedef {Object} PageViewportParameters\n * @property {Array<number>} viewBox - The xMin, yMin, xMax and\n *   yMax coordinates.\n * @property {number} scale - The scale of the viewport.\n * @property {number} rotation - The rotation, in degrees, of the viewport.\n * @property {number} [offsetX] - The horizontal, i.e. x-axis, offset. The\n *   default value is `0`.\n * @property {number} [offsetY] - The vertical, i.e. y-axis, offset. The\n *   default value is `0`.\n * @property {boolean} [dontFlip] - If true, the y-axis will not be flipped.\n *   The default value is `false`.\n */\n\n/**\n * @typedef {Object} PageViewportCloneParameters\n * @property {number} [scale] - The scale, overriding the one in the cloned\n *   viewport. The default value is `this.scale`.\n * @property {number} [rotation] - The rotation, in degrees, overriding the one\n *   in the cloned viewport. The default value is `this.rotation`.\n * @property {number} [offsetX] - The horizontal, i.e. x-axis, offset.\n *   The default value is `this.offsetX`.\n * @property {number} [offsetY] - The vertical, i.e. y-axis, offset.\n *   The default value is `this.offsetY`.\n * @property {boolean} [dontFlip] - If true, the x-axis will not be flipped.\n *   The default value is `false`.\n */\n\n/**\n * PDF page viewport created based on scale, rotation and offset.\n */\nclass PageViewport {\n  /**\n   * @param {PageViewportParameters}\n   */\n  constructor({\n    viewBox,\n    scale,\n    rotation,\n    offsetX = 0,\n    offsetY = 0,\n    dontFlip = false,\n  }) {\n    this.viewBox = viewBox;\n    this.scale = scale;\n    this.rotation = rotation;\n    this.offsetX = offsetX;\n    this.offsetY = offsetY;\n\n    // creating transform to convert pdf coordinate system to the normal\n    // canvas like coordinates taking in account scale and rotation\n    const centerX = (viewBox[2] + viewBox[0]) / 2;\n    const centerY = (viewBox[3] + viewBox[1]) / 2;\n    let rotateA, rotateB, rotateC, rotateD;\n    // Normalize the rotation, by clamping it to the [0, 360) range.\n    rotation %= 360;\n    if (rotation < 0) {\n      rotation += 360;\n    }\n    switch (rotation) {\n      case 180:\n        rotateA = -1;\n        rotateB = 0;\n        rotateC = 0;\n        rotateD = 1;\n        break;\n      case 90:\n        rotateA = 0;\n        rotateB = 1;\n        rotateC = 1;\n        rotateD = 0;\n        break;\n      case 270:\n        rotateA = 0;\n        rotateB = -1;\n        rotateC = -1;\n        rotateD = 0;\n        break;\n      case 0:\n        rotateA = 1;\n        rotateB = 0;\n        rotateC = 0;\n        rotateD = -1;\n        break;\n      default:\n        throw new Error(\n          \"PageViewport: Invalid rotation, must be a multiple of 90 degrees.\"\n        );\n    }\n\n    if (dontFlip) {\n      rotateC = -rotateC;\n      rotateD = -rotateD;\n    }\n\n    let offsetCanvasX, offsetCanvasY;\n    let width, height;\n    if (rotateA === 0) {\n      offsetCanvasX = Math.abs(centerY - viewBox[1]) * scale + offsetX;\n      offsetCanvasY = Math.abs(centerX - viewBox[0]) * scale + offsetY;\n      width = (viewBox[3] - viewBox[1]) * scale;\n      height = (viewBox[2] - viewBox[0]) * scale;\n    } else {\n      offsetCanvasX = Math.abs(centerX - viewBox[0]) * scale + offsetX;\n      offsetCanvasY = Math.abs(centerY - viewBox[1]) * scale + offsetY;\n      width = (viewBox[2] - viewBox[0]) * scale;\n      height = (viewBox[3] - viewBox[1]) * scale;\n    }\n    // creating transform for the following operations:\n    // translate(-centerX, -centerY), rotate and flip vertically,\n    // scale, and translate(offsetCanvasX, offsetCanvasY)\n    this.transform = [\n      rotateA * scale,\n      rotateB * scale,\n      rotateC * scale,\n      rotateD * scale,\n      offsetCanvasX - rotateA * scale * centerX - rotateC * scale * centerY,\n      offsetCanvasY - rotateB * scale * centerX - rotateD * scale * centerY,\n    ];\n\n    this.width = width;\n    this.height = height;\n  }\n\n  /**\n   * The original, un-scaled, viewport dimensions.\n   * @type {Object}\n   */\n  get rawDims() {\n    const { viewBox } = this;\n    return shadow(this, \"rawDims\", {\n      pageWidth: viewBox[2] - viewBox[0],\n      pageHeight: viewBox[3] - viewBox[1],\n      pageX: viewBox[0],\n      pageY: viewBox[1],\n    });\n  }\n\n  /**\n   * Clones viewport, with optional additional properties.\n   * @param {PageViewportCloneParameters} [params]\n   * @returns {PageViewport} Cloned viewport.\n   */\n  clone({\n    scale = this.scale,\n    rotation = this.rotation,\n    offsetX = this.offsetX,\n    offsetY = this.offsetY,\n    dontFlip = false,\n  } = {}) {\n    return new PageViewport({\n      viewBox: this.viewBox.slice(),\n      scale,\n      rotation,\n      offsetX,\n      offsetY,\n      dontFlip,\n    });\n  }\n\n  /**\n   * Converts PDF point to the viewport coordinates. For examples, useful for\n   * converting PDF location into canvas pixel coordinates.\n   * @param {number} x - The x-coordinate.\n   * @param {number} y - The y-coordinate.\n   * @returns {Array} Array containing `x`- and `y`-coordinates of the\n   *   point in the viewport coordinate space.\n   * @see {@link convertToPdfPoint}\n   * @see {@link convertToViewportRectangle}\n   */\n  convertToViewportPoint(x, y) {\n    return Util.applyTransform([x, y], this.transform);\n  }\n\n  /**\n   * Converts PDF rectangle to the viewport coordinates.\n   * @param {Array} rect - The xMin, yMin, xMax and yMax coordinates.\n   * @returns {Array} Array containing corresponding coordinates of the\n   *   rectangle in the viewport coordinate space.\n   * @see {@link convertToViewportPoint}\n   */\n  convertToViewportRectangle(rect) {\n    const topLeft = Util.applyTransform([rect[0], rect[1]], this.transform);\n    const bottomRight = Util.applyTransform([rect[2], rect[3]], this.transform);\n    return [topLeft[0], topLeft[1], bottomRight[0], bottomRight[1]];\n  }\n\n  /**\n   * Converts viewport coordinates to the PDF location. For examples, useful\n   * for converting canvas pixel location into PDF one.\n   * @param {number} x - The x-coordinate.\n   * @param {number} y - The y-coordinate.\n   * @returns {Array} Array containing `x`- and `y`-coordinates of the\n   *   point in the PDF coordinate space.\n   * @see {@link convertToViewportPoint}\n   */\n  convertToPdfPoint(x, y) {\n    return Util.applyInverseTransform([x, y], this.transform);\n  }\n}\n\nclass RenderingCancelledException extends BaseException {\n  constructor(msg, extraDelay = 0) {\n    super(msg, \"RenderingCancelledException\");\n    this.extraDelay = extraDelay;\n  }\n}\n\nfunction isDataScheme(url) {\n  const ii = url.length;\n  let i = 0;\n  while (i < ii && url[i].trim() === \"\") {\n    i++;\n  }\n  return url.substring(i, i + 5).toLowerCase() === \"data:\";\n}\n\nfunction isPdfFile(filename) {\n  return typeof filename === \"string\" && /\\.pdf$/i.test(filename);\n}\n\n/**\n * Gets the filename from a given URL.\n * @param {string} url\n * @param {boolean} [onlyStripPath]\n * @returns {string}\n */\nfunction getFilenameFromUrl(url, onlyStripPath = false) {\n  if (!onlyStripPath) {\n    [url] = url.split(/[#?]/, 1);\n  }\n  return url.substring(url.lastIndexOf(\"/\") + 1);\n}\n\n/**\n * Returns the filename or guessed filename from the url (see issue 3455).\n * @param {string} url - The original PDF location.\n * @param {string} defaultFilename - The value returned if the filename is\n *   unknown, or the protocol is unsupported.\n * @returns {string} Guessed PDF filename.\n */\nfunction getPdfFilenameFromUrl(url, defaultFilename = \"document.pdf\") {\n  if (typeof url !== \"string\") {\n    return defaultFilename;\n  }\n  if (isDataScheme(url)) {\n    warn('getPdfFilenameFromUrl: ignore \"data:\"-URL for performance reasons.');\n    return defaultFilename;\n  }\n  const reURI = /^(?:(?:[^:]+:)?\\/\\/[^/]+)?([^?#]*)(\\?[^#]*)?(#.*)?$/;\n  //              SCHEME        HOST        1.PATH  2.QUERY   3.REF\n  // Pattern to get last matching NAME.pdf\n  const reFilename = /[^/?#=]+\\.pdf\\b(?!.*\\.pdf\\b)/i;\n  const splitURI = reURI.exec(url);\n  let suggestedFilename =\n    reFilename.exec(splitURI[1]) ||\n    reFilename.exec(splitURI[2]) ||\n    reFilename.exec(splitURI[3]);\n  if (suggestedFilename) {\n    suggestedFilename = suggestedFilename[0];\n    if (suggestedFilename.includes(\"%\")) {\n      // URL-encoded %2Fpath%2Fto%2Ffile.pdf should be file.pdf\n      try {\n        suggestedFilename = reFilename.exec(\n          decodeURIComponent(suggestedFilename)\n        )[0];\n      } catch {\n        // Possible (extremely rare) errors:\n        // URIError \"Malformed URI\", e.g. for \"%AA.pdf\"\n        // TypeError \"null has no properties\", e.g. for \"%2F.pdf\"\n      }\n    }\n  }\n  return suggestedFilename || defaultFilename;\n}\n\nclass StatTimer {\n  started = Object.create(null);\n\n  times = [];\n\n  time(name) {\n    if (name in this.started) {\n      warn(`Timer is already running for ${name}`);\n    }\n    this.started[name] = Date.now();\n  }\n\n  timeEnd(name) {\n    if (!(name in this.started)) {\n      warn(`Timer has not been started for ${name}`);\n    }\n    this.times.push({\n      name,\n      start: this.started[name],\n      end: Date.now(),\n    });\n    // Remove timer from started so it can be called again.\n    delete this.started[name];\n  }\n\n  toString() {\n    // Find the longest name for padding purposes.\n    const outBuf = [];\n    let longest = 0;\n    for (const { name } of this.times) {\n      longest = Math.max(name.length, longest);\n    }\n    for (const { name, start, end } of this.times) {\n      outBuf.push(`${name.padEnd(longest)} ${end - start}ms\\n`);\n    }\n    return outBuf.join(\"\");\n  }\n}\n\nfunction isValidFetchUrl(url, baseUrl) {\n  if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n    throw new Error(\"Not implemented: isValidFetchUrl\");\n  }\n  try {\n    const { protocol } = baseUrl ? new URL(url, baseUrl) : new URL(url);\n    // The Fetch API only supports the http/https protocols, and not file/ftp.\n    return protocol === \"http:\" || protocol === \"https:\";\n  } catch {\n    return false; // `new URL()` will throw on incorrect data.\n  }\n}\n\n/**\n * Event handler to suppress context menu.\n */\nfunction noContextMenu(e) {\n  e.preventDefault();\n}\n\n// Deprecated API function -- display regardless of the `verbosity` setting.\nfunction deprecated(details) {\n  console.log(\"Deprecated API usage: \" + details);\n}\n\nlet pdfDateStringRegex;\n\nclass PDFDateString {\n  /**\n   * Convert a PDF date string to a JavaScript `Date` object.\n   *\n   * The PDF date string format is described in section 7.9.4 of the official\n   * PDF 32000-1:2008 specification. However, in the PDF 1.7 reference (sixth\n   * edition) Adobe describes the same format including a trailing apostrophe.\n   * This syntax in incorrect, but Adobe Acrobat creates PDF files that contain\n   * them. We ignore all apostrophes as they are not necessary for date parsing.\n   *\n   * Moreover, Adobe Acrobat doesn't handle changing the date to universal time\n   * and doesn't use the user's time zone (effectively ignoring the HH' and mm'\n   * parts of the date string).\n   *\n   * @param {string} input\n   * @returns {Date|null}\n   */\n  static toDateObject(input) {\n    if (!input || typeof input !== \"string\") {\n      return null;\n    }\n\n    // Lazily initialize the regular expression.\n    pdfDateStringRegex ||= new RegExp(\n      \"^D:\" + // Prefix (required)\n        \"(\\\\d{4})\" + // Year (required)\n        \"(\\\\d{2})?\" + // Month (optional)\n        \"(\\\\d{2})?\" + // Day (optional)\n        \"(\\\\d{2})?\" + // Hour (optional)\n        \"(\\\\d{2})?\" + // Minute (optional)\n        \"(\\\\d{2})?\" + // Second (optional)\n        \"([Z|+|-])?\" + // Universal time relation (optional)\n        \"(\\\\d{2})?\" + // Offset hour (optional)\n        \"'?\" + // Splitting apostrophe (optional)\n        \"(\\\\d{2})?\" + // Offset minute (optional)\n        \"'?\" // Trailing apostrophe (optional)\n    );\n\n    // Optional fields that don't satisfy the requirements from the regular\n    // expression (such as incorrect digit counts or numbers that are out of\n    // range) will fall back the defaults from the specification.\n    const matches = pdfDateStringRegex.exec(input);\n    if (!matches) {\n      return null;\n    }\n\n    // JavaScript's `Date` object expects the month to be between 0 and 11\n    // instead of 1 and 12, so we have to correct for that.\n    const year = parseInt(matches[1], 10);\n    let month = parseInt(matches[2], 10);\n    month = month >= 1 && month <= 12 ? month - 1 : 0;\n    let day = parseInt(matches[3], 10);\n    day = day >= 1 && day <= 31 ? day : 1;\n    let hour = parseInt(matches[4], 10);\n    hour = hour >= 0 && hour <= 23 ? hour : 0;\n    let minute = parseInt(matches[5], 10);\n    minute = minute >= 0 && minute <= 59 ? minute : 0;\n    let second = parseInt(matches[6], 10);\n    second = second >= 0 && second <= 59 ? second : 0;\n    const universalTimeRelation = matches[7] || \"Z\";\n    let offsetHour = parseInt(matches[8], 10);\n    offsetHour = offsetHour >= 0 && offsetHour <= 23 ? offsetHour : 0;\n    let offsetMinute = parseInt(matches[9], 10) || 0;\n    offsetMinute = offsetMinute >= 0 && offsetMinute <= 59 ? offsetMinute : 0;\n\n    // Universal time relation 'Z' means that the local time is equal to the\n    // universal time, whereas the relations '+'/'-' indicate that the local\n    // time is later respectively earlier than the universal time. Every date\n    // is normalized to universal time.\n    if (universalTimeRelation === \"-\") {\n      hour += offsetHour;\n      minute += offsetMinute;\n    } else if (universalTimeRelation === \"+\") {\n      hour -= offsetHour;\n      minute -= offsetMinute;\n    }\n\n    return new Date(Date.UTC(year, month, day, hour, minute, second));\n  }\n}\n\n/**\n * NOTE: This is (mostly) intended to support printing of XFA forms.\n */\nfunction getXfaPageViewport(xfaPage, { scale = 1, rotation = 0 }) {\n  const { width, height } = xfaPage.attributes.style;\n  const viewBox = [0, 0, parseInt(width), parseInt(height)];\n\n  return new PageViewport({\n    viewBox,\n    scale,\n    rotation,\n  });\n}\n\nfunction getRGB(color) {\n  if (color.startsWith(\"#\")) {\n    const colorRGB = parseInt(color.slice(1), 16);\n    return [\n      (colorRGB & 0xff0000) >> 16,\n      (colorRGB & 0x00ff00) >> 8,\n      colorRGB & 0x0000ff,\n    ];\n  }\n\n  if (color.startsWith(\"rgb(\")) {\n    // getComputedStyle(...).color returns a `rgb(R, G, B)` color.\n    return color\n      .slice(/* \"rgb(\".length */ 4, -1) // Strip out \"rgb(\" and \")\".\n      .split(\",\")\n      .map(x => parseInt(x));\n  }\n\n  if (color.startsWith(\"rgba(\")) {\n    return color\n      .slice(/* \"rgba(\".length */ 5, -1) // Strip out \"rgba(\" and \")\".\n      .split(\",\")\n      .map(x => parseInt(x))\n      .slice(0, 3);\n  }\n\n  warn(`Not a valid color format: \"${color}\"`);\n  return [0, 0, 0];\n}\n\nfunction getColorValues(colors) {\n  const span = document.createElement(\"span\");\n  span.style.visibility = \"hidden\";\n  document.body.append(span);\n  for (const name of colors.keys()) {\n    span.style.color = name;\n    const computedColor = window.getComputedStyle(span).color;\n    colors.set(name, getRGB(computedColor));\n  }\n  span.remove();\n}\n\nfunction getCurrentTransform(ctx) {\n  const { a, b, c, d, e, f } = ctx.getTransform();\n  return [a, b, c, d, e, f];\n}\n\nfunction getCurrentTransformInverse(ctx) {\n  const { a, b, c, d, e, f } = ctx.getTransform().invertSelf();\n  return [a, b, c, d, e, f];\n}\n\n/**\n * @param {HTMLDivElement} div\n * @param {PageViewport} viewport\n * @param {boolean} mustFlip\n * @param {boolean} mustRotate\n */\nfunction setLayerDimensions(\n  div,\n  viewport,\n  mustFlip = false,\n  mustRotate = true\n) {\n  if (viewport instanceof PageViewport) {\n    const { pageWidth, pageHeight } = viewport.rawDims;\n    const { style } = div;\n    const useRound = FeatureTest.isCSSRoundSupported;\n\n    const w = `var(--scale-factor) * ${pageWidth}px`,\n      h = `var(--scale-factor) * ${pageHeight}px`;\n    const widthStr = useRound ? `round(${w}, 1px)` : `calc(${w})`,\n      heightStr = useRound ? `round(${h}, 1px)` : `calc(${h})`;\n\n    if (!mustFlip || viewport.rotation % 180 === 0) {\n      style.width = widthStr;\n      style.height = heightStr;\n    } else {\n      style.width = heightStr;\n      style.height = widthStr;\n    }\n  }\n\n  if (mustRotate) {\n    div.setAttribute(\"data-main-rotation\", viewport.rotation);\n  }\n}\n\nexport {\n  deprecated,\n  DOMCanvasFactory,\n  DOMCMapReaderFactory,\n  DOMFilterFactory,\n  DOMStandardFontDataFactory,\n  DOMSVGFactory,\n  fetchData,\n  getColorValues,\n  getCurrentTransform,\n  getCurrentTransformInverse,\n  getFilenameFromUrl,\n  getPdfFilenameFromUrl,\n  getRGB,\n  getXfaPageViewport,\n  isDataScheme,\n  isPdfFile,\n  isValidFetchUrl,\n  noContextMenu,\n  PageViewport,\n  PDFDateString,\n  PixelsPerInch,\n  RenderingCancelledException,\n  setLayerDimensions,\n  StatTimer,\n};\n","/* Copyright 2023 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DOMSVGFactory } from \"./display_utils.js\";\nimport { shadow } from \"../shared/util.js\";\n\n/**\n * Manage the SVGs drawn on top of the page canvas.\n * It's important to have them directly on top of the canvas because we want to\n * be able to use mix-blend-mode for some of them.\n */\nclass DrawLayer {\n  #parent = null;\n\n  #id = 0;\n\n  #mapping = new Map();\n\n  constructor({ pageIndex }) {\n    this.pageIndex = pageIndex;\n  }\n\n  setParent(parent) {\n    if (!this.#parent) {\n      this.#parent = parent;\n      return;\n    }\n\n    if (this.#parent !== parent) {\n      if (this.#mapping.size > 0) {\n        for (const root of this.#mapping.values()) {\n          root.remove();\n          parent.append(root);\n        }\n      }\n      this.#parent = parent;\n    }\n  }\n\n  static get _svgFactory() {\n    return shadow(this, \"_svgFactory\", new DOMSVGFactory());\n  }\n\n  static #setBox(element, { x, y, width, height }) {\n    const { style } = element;\n    style.top = `${100 * y}%`;\n    style.left = `${100 * x}%`;\n    style.width = `${100 * width}%`;\n    style.height = `${100 * height}%`;\n  }\n\n  #createSVG(box) {\n    const svg = DrawLayer._svgFactory.create(1, 1, /* skipDimensions = */ true);\n    this.#parent.append(svg);\n    DrawLayer.#setBox(svg, box);\n\n    return svg;\n  }\n\n  highlight({ outlines, box }, color, opacity) {\n    const id = this.#id++;\n    const root = this.#createSVG(box);\n    root.classList.add(\"highlight\");\n    const defs = DrawLayer._svgFactory.createElement(\"defs\");\n    root.append(defs);\n    const path = DrawLayer._svgFactory.createElement(\"path\");\n    defs.append(path);\n    const pathId = `path_p${this.pageIndex}_${id}`;\n    path.setAttribute(\"id\", pathId);\n    path.setAttribute(\n      \"d\",\n      DrawLayer.#extractPathFromHighlightOutlines(outlines)\n    );\n\n    // Create the clipping path for the editor div.\n    const clipPath = DrawLayer._svgFactory.createElement(\"clipPath\");\n    defs.append(clipPath);\n    const clipPathId = `clip_${pathId}`;\n    clipPath.setAttribute(\"id\", clipPathId);\n    clipPath.setAttribute(\"clipPathUnits\", \"objectBoundingBox\");\n    const clipPathUse = DrawLayer._svgFactory.createElement(\"use\");\n    clipPath.append(clipPathUse);\n    clipPathUse.setAttribute(\"href\", `#${pathId}`);\n    clipPathUse.classList.add(\"clip\");\n\n    const use = DrawLayer._svgFactory.createElement(\"use\");\n    root.append(use);\n    root.setAttribute(\"fill\", color);\n    root.setAttribute(\"fill-opacity\", opacity);\n    use.setAttribute(\"href\", `#${pathId}`);\n\n    this.#mapping.set(id, root);\n\n    return { id, clipPathId: `url(#${clipPathId})` };\n  }\n\n  highlightOutline({ outlines, box }) {\n    // We cannot draw the outline directly in the SVG for highlights because\n    // it composes with its parent with mix-blend-mode: multiply.\n    // But the outline has a different mix-blend-mode, so we need to draw it in\n    // its own SVG.\n    const id = this.#id++;\n    const root = this.#createSVG(box);\n    root.classList.add(\"highlightOutline\");\n    const defs = DrawLayer._svgFactory.createElement(\"defs\");\n    root.append(defs);\n    const path = DrawLayer._svgFactory.createElement(\"path\");\n    defs.append(path);\n    const pathId = `path_p${this.pageIndex}_${id}`;\n    path.setAttribute(\"id\", pathId);\n    path.setAttribute(\n      \"d\",\n      DrawLayer.#extractPathFromHighlightOutlines(outlines)\n    );\n    path.setAttribute(\"vector-effect\", \"non-scaling-stroke\");\n\n    const use1 = DrawLayer._svgFactory.createElement(\"use\");\n    root.append(use1);\n    use1.setAttribute(\"href\", `#${pathId}`);\n    const use2 = use1.cloneNode();\n    root.append(use2);\n    use1.classList.add(\"mainOutline\");\n    use2.classList.add(\"secondaryOutline\");\n\n    this.#mapping.set(id, root);\n\n    return id;\n  }\n\n  static #extractPathFromHighlightOutlines(polygons) {\n    const buffer = [];\n    for (const polygon of polygons) {\n      let [prevX, prevY] = polygon;\n      buffer.push(`M${prevX} ${prevY}`);\n      for (let i = 2; i < polygon.length; i += 2) {\n        const x = polygon[i];\n        const y = polygon[i + 1];\n        if (x === prevX) {\n          buffer.push(`V${y}`);\n          prevY = y;\n        } else if (y === prevY) {\n          buffer.push(`H${x}`);\n          prevX = x;\n        }\n      }\n      buffer.push(\"Z\");\n    }\n    return buffer.join(\" \");\n  }\n\n  updateBox(id, box) {\n    DrawLayer.#setBox(this.#mapping.get(id), box);\n  }\n\n  rotate(id, angle) {\n    this.#mapping.get(id).setAttribute(\"data-main-rotation\", angle);\n  }\n\n  changeColor(id, color) {\n    this.#mapping.get(id).setAttribute(\"fill\", color);\n  }\n\n  changeOpacity(id, opacity) {\n    this.#mapping.get(id).setAttribute(\"fill-opacity\", opacity);\n  }\n\n  addClass(id, className) {\n    this.#mapping.get(id).classList.add(className);\n  }\n\n  removeClass(id, className) {\n    this.#mapping.get(id).classList.remove(className);\n  }\n\n  remove(id) {\n    if (this.#parent === null) {\n      return;\n    }\n    this.#mapping.get(id).remove();\n    this.#mapping.delete(id);\n  }\n\n  destroy() {\n    this.#parent = null;\n    for (const root of this.#mapping.values()) {\n      root.remove();\n    }\n    this.#mapping.clear();\n  }\n}\n\nexport { DrawLayer };\n","/* Copyright 2022 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./annotation_editor_layer.js\").AnnotationEditorLayer} AnnotationEditorLayer */\n\nimport {\n  AnnotationEditorParamsType,\n  AnnotationEditorType,\n  assert,\n  LINE_FACTOR,\n  shadow,\n  Util,\n} from \"../../shared/util.js\";\nimport {\n  AnnotationEditorUIManager,\n  bindEvents,\n  KeyboardManager,\n} from \"./tools.js\";\nimport { AnnotationEditor } from \"./editor.js\";\nimport { FreeTextAnnotationElement } from \"../annotation_layer.js\";\n\n/**\n * Basic text editor in order to create a FreeTex annotation.\n */\nclass FreeTextEditor extends AnnotationEditor {\n  #boundEditorDivBlur = this.editorDivBlur.bind(this);\n\n  #boundEditorDivFocus = this.editorDivFocus.bind(this);\n\n  #boundEditorDivInput = this.editorDivInput.bind(this);\n\n  #boundEditorDivKeydown = this.editorDivKeydown.bind(this);\n\n  #color;\n\n  #content = \"\";\n\n  #editorDivId = `${this.id}-editor`;\n\n  #fontSize;\n\n  #initialData = null;\n\n  static _freeTextDefaultContent = \"\";\n\n  static _internalPadding = 0;\n\n  static _defaultColor = null;\n\n  static _defaultFontSize = 10;\n\n  static get _keyboardManager() {\n    const proto = FreeTextEditor.prototype;\n\n    const arrowChecker = self => self.isEmpty();\n\n    const small = AnnotationEditorUIManager.TRANSLATE_SMALL;\n    const big = AnnotationEditorUIManager.TRANSLATE_BIG;\n\n    return shadow(\n      this,\n      \"_keyboardManager\",\n      new KeyboardManager([\n        [\n          // Commit the text in case the user use ctrl+s to save the document.\n          // The event must bubble in order to be caught by the viewer.\n          // See bug 1831574.\n          [\"ctrl+s\", \"mac+meta+s\", \"ctrl+p\", \"mac+meta+p\"],\n          proto.commitOrRemove,\n          { bubbles: true },\n        ],\n        [\n          [\"ctrl+Enter\", \"mac+meta+Enter\", \"Escape\", \"mac+Escape\"],\n          proto.commitOrRemove,\n        ],\n        [\n          [\"ArrowLeft\", \"mac+ArrowLeft\"],\n          proto._translateEmpty,\n          { args: [-small, 0], checker: arrowChecker },\n        ],\n        [\n          [\"ctrl+ArrowLeft\", \"mac+shift+ArrowLeft\"],\n          proto._translateEmpty,\n          { args: [-big, 0], checker: arrowChecker },\n        ],\n        [\n          [\"ArrowRight\", \"mac+ArrowRight\"],\n          proto._translateEmpty,\n          { args: [small, 0], checker: arrowChecker },\n        ],\n        [\n          [\"ctrl+ArrowRight\", \"mac+shift+ArrowRight\"],\n          proto._translateEmpty,\n          { args: [big, 0], checker: arrowChecker },\n        ],\n        [\n          [\"ArrowUp\", \"mac+ArrowUp\"],\n          proto._translateEmpty,\n          { args: [0, -small], checker: arrowChecker },\n        ],\n        [\n          [\"ctrl+ArrowUp\", \"mac+shift+ArrowUp\"],\n          proto._translateEmpty,\n          { args: [0, -big], checker: arrowChecker },\n        ],\n        [\n          [\"ArrowDown\", \"mac+ArrowDown\"],\n          proto._translateEmpty,\n          { args: [0, small], checker: arrowChecker },\n        ],\n        [\n          [\"ctrl+ArrowDown\", \"mac+shift+ArrowDown\"],\n          proto._translateEmpty,\n          { args: [0, big], checker: arrowChecker },\n        ],\n      ])\n    );\n  }\n\n  static _type = \"freetext\";\n\n  static _editorType = AnnotationEditorType.FREETEXT;\n\n  constructor(params) {\n    super({ ...params, name: \"freeTextEditor\" });\n    this.#color =\n      params.color ||\n      FreeTextEditor._defaultColor ||\n      AnnotationEditor._defaultLineColor;\n    this.#fontSize = params.fontSize || FreeTextEditor._defaultFontSize;\n  }\n\n  /** @inheritdoc */\n  static initialize(l10n) {\n    AnnotationEditor.initialize(l10n, {\n      strings: [\"pdfjs-free-text-default-content\"],\n    });\n    const style = getComputedStyle(document.documentElement);\n\n    if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n      const lineHeight = parseFloat(\n        style.getPropertyValue(\"--freetext-line-height\")\n      );\n      assert(\n        lineHeight === LINE_FACTOR,\n        \"Update the CSS variable to agree with the constant.\"\n      );\n    }\n\n    this._internalPadding = parseFloat(\n      style.getPropertyValue(\"--freetext-padding\")\n    );\n  }\n\n  /** @inheritdoc */\n  static updateDefaultParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.FREETEXT_SIZE:\n        FreeTextEditor._defaultFontSize = value;\n        break;\n      case AnnotationEditorParamsType.FREETEXT_COLOR:\n        FreeTextEditor._defaultColor = value;\n        break;\n    }\n  }\n\n  /** @inheritdoc */\n  updateParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.FREETEXT_SIZE:\n        this.#updateFontSize(value);\n        break;\n      case AnnotationEditorParamsType.FREETEXT_COLOR:\n        this.#updateColor(value);\n        break;\n    }\n  }\n\n  /** @inheritdoc */\n  static get defaultPropertiesToUpdate() {\n    return [\n      [\n        AnnotationEditorParamsType.FREETEXT_SIZE,\n        FreeTextEditor._defaultFontSize,\n      ],\n      [\n        AnnotationEditorParamsType.FREETEXT_COLOR,\n        FreeTextEditor._defaultColor || AnnotationEditor._defaultLineColor,\n      ],\n    ];\n  }\n\n  /** @inheritdoc */\n  get propertiesToUpdate() {\n    return [\n      [AnnotationEditorParamsType.FREETEXT_SIZE, this.#fontSize],\n      [AnnotationEditorParamsType.FREETEXT_COLOR, this.#color],\n    ];\n  }\n\n  /**\n   * Update the font size and make this action as undoable.\n   * @param {number} fontSize\n   */\n  #updateFontSize(fontSize) {\n    const setFontsize = size => {\n      this.editorDiv.style.fontSize = `calc(${size}px * var(--scale-factor))`;\n      this.translate(0, -(size - this.#fontSize) * this.parentScale);\n      this.#fontSize = size;\n      this.#setEditorDimensions();\n    };\n    const savedFontsize = this.#fontSize;\n    this.addCommands({\n      cmd: () => {\n        setFontsize(fontSize);\n      },\n      undo: () => {\n        setFontsize(savedFontsize);\n      },\n      mustExec: true,\n      type: AnnotationEditorParamsType.FREETEXT_SIZE,\n      overwriteIfSameType: true,\n      keepUndo: true,\n    });\n  }\n\n  /**\n   * Update the color and make this action undoable.\n   * @param {string} color\n   */\n  #updateColor(color) {\n    const savedColor = this.#color;\n    this.addCommands({\n      cmd: () => {\n        this.#color = this.editorDiv.style.color = color;\n      },\n      undo: () => {\n        this.#color = this.editorDiv.style.color = savedColor;\n      },\n      mustExec: true,\n      type: AnnotationEditorParamsType.FREETEXT_COLOR,\n      overwriteIfSameType: true,\n      keepUndo: true,\n    });\n  }\n\n  /**\n   * Helper to translate the editor with the keyboard when it's empty.\n   * @param {number} x in page units.\n   * @param {number} y in page units.\n   */\n  _translateEmpty(x, y) {\n    this._uiManager.translateSelectedEditors(x, y, /* noCommit = */ true);\n  }\n\n  /** @inheritdoc */\n  getInitialTranslation() {\n    // The start of the base line is where the user clicked.\n    const scale = this.parentScale;\n    return [\n      -FreeTextEditor._internalPadding * scale,\n      -(FreeTextEditor._internalPadding + this.#fontSize) * scale,\n    ];\n  }\n\n  /** @inheritdoc */\n  rebuild() {\n    if (!this.parent) {\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n\n    if (!this.isAttachedToDOM) {\n      // At some point this editor was removed and we're rebuilting it,\n      // hence we must add it to its parent.\n      this.parent.add(this);\n    }\n  }\n\n  /** @inheritdoc */\n  enableEditMode() {\n    if (this.isInEditMode()) {\n      return;\n    }\n\n    this.parent.setEditingState(false);\n    this.parent.updateToolbar(AnnotationEditorType.FREETEXT);\n    super.enableEditMode();\n    this.overlayDiv.classList.remove(\"enabled\");\n    this.editorDiv.contentEditable = true;\n    this._isDraggable = false;\n    this.div.removeAttribute(\"aria-activedescendant\");\n    this.editorDiv.addEventListener(\"keydown\", this.#boundEditorDivKeydown);\n    this.editorDiv.addEventListener(\"focus\", this.#boundEditorDivFocus);\n    this.editorDiv.addEventListener(\"blur\", this.#boundEditorDivBlur);\n    this.editorDiv.addEventListener(\"input\", this.#boundEditorDivInput);\n  }\n\n  /** @inheritdoc */\n  disableEditMode() {\n    if (!this.isInEditMode()) {\n      return;\n    }\n\n    this.parent.setEditingState(true);\n    super.disableEditMode();\n    this.overlayDiv.classList.add(\"enabled\");\n    this.editorDiv.contentEditable = false;\n    this.div.setAttribute(\"aria-activedescendant\", this.#editorDivId);\n    this._isDraggable = true;\n    this.editorDiv.removeEventListener(\"keydown\", this.#boundEditorDivKeydown);\n    this.editorDiv.removeEventListener(\"focus\", this.#boundEditorDivFocus);\n    this.editorDiv.removeEventListener(\"blur\", this.#boundEditorDivBlur);\n    this.editorDiv.removeEventListener(\"input\", this.#boundEditorDivInput);\n\n    // On Chrome, the focus is given to <body> when contentEditable is set to\n    // false, hence we focus the div.\n    this.div.focus({\n      preventScroll: true /* See issue #15744 */,\n    });\n\n    // In case the blur callback hasn't been called.\n    this.isEditing = false;\n    this.parent.div.classList.add(\"freetextEditing\");\n  }\n\n  /** @inheritdoc */\n  focusin(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    super.focusin(event);\n    if (event.target !== this.editorDiv) {\n      this.editorDiv.focus();\n    }\n  }\n\n  /** @inheritdoc */\n  onceAdded() {\n    if (this.width) {\n      this.#cheatInitialRect();\n      // The editor was created in using ctrl+c.\n      return;\n    }\n    this.enableEditMode();\n    this.editorDiv.focus();\n    if (this._initialOptions?.isCentered) {\n      this.center();\n    }\n    this._initialOptions = null;\n  }\n\n  /** @inheritdoc */\n  isEmpty() {\n    return !this.editorDiv || this.editorDiv.innerText.trim() === \"\";\n  }\n\n  /** @inheritdoc */\n  remove() {\n    this.isEditing = false;\n    if (this.parent) {\n      this.parent.setEditingState(true);\n      this.parent.div.classList.add(\"freetextEditing\");\n    }\n    super.remove();\n  }\n\n  /**\n   * Extract the text from this editor.\n   * @returns {string}\n   */\n  #extractText() {\n    const divs = this.editorDiv.getElementsByTagName(\"div\");\n    if (divs.length === 0) {\n      return this.editorDiv.innerText;\n    }\n    const buffer = [];\n    for (const div of divs) {\n      buffer.push(div.innerText.replace(/\\r\\n?|\\n/, \"\"));\n    }\n    return buffer.join(\"\\n\");\n  }\n\n  #setEditorDimensions() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n\n    let rect;\n    if (this.isAttachedToDOM) {\n      rect = this.div.getBoundingClientRect();\n    } else {\n      // This editor isn't on screen but we need to get its dimensions, so\n      // we just insert it in the DOM, get its bounding box and then remove it.\n      const { currentLayer, div } = this;\n      const savedDisplay = div.style.display;\n      div.style.display = \"hidden\";\n      currentLayer.div.append(this.div);\n      rect = div.getBoundingClientRect();\n      div.remove();\n      div.style.display = savedDisplay;\n    }\n\n    // The dimensions are relative to the rotation of the page, hence we need to\n    // take that into account (see issue #16636).\n    if (this.rotation % 180 === this.parentRotation % 180) {\n      this.width = rect.width / parentWidth;\n      this.height = rect.height / parentHeight;\n    } else {\n      this.width = rect.height / parentWidth;\n      this.height = rect.width / parentHeight;\n    }\n    this.fixAndSetPosition();\n  }\n\n  /**\n   * Commit the content we have in this editor.\n   * @returns {undefined}\n   */\n  commit() {\n    if (!this.isInEditMode()) {\n      return;\n    }\n\n    super.commit();\n    this.disableEditMode();\n    const savedText = this.#content;\n    const newText = (this.#content = this.#extractText().trimEnd());\n    if (savedText === newText) {\n      return;\n    }\n\n    const setText = text => {\n      this.#content = text;\n      if (!text) {\n        this.remove();\n        return;\n      }\n      this.#setContent();\n      this._uiManager.rebuild(this);\n      this.#setEditorDimensions();\n    };\n    this.addCommands({\n      cmd: () => {\n        setText(newText);\n      },\n      undo: () => {\n        setText(savedText);\n      },\n      mustExec: false,\n    });\n    this.#setEditorDimensions();\n  }\n\n  /** @inheritdoc */\n  shouldGetKeyboardEvents() {\n    return this.isInEditMode();\n  }\n\n  /** @inheritdoc */\n  enterInEditMode() {\n    this.enableEditMode();\n    this.editorDiv.focus();\n  }\n\n  /**\n   * ondblclick callback.\n   * @param {MouseEvent} event\n   */\n  dblclick(event) {\n    this.enterInEditMode();\n  }\n\n  /**\n   * onkeydown callback.\n   * @param {KeyboardEvent} event\n   */\n  keydown(event) {\n    if (event.target === this.div && event.key === \"Enter\") {\n      this.enterInEditMode();\n      // Avoid to add an unwanted new line.\n      event.preventDefault();\n    }\n  }\n\n  editorDivKeydown(event) {\n    FreeTextEditor._keyboardManager.exec(this, event);\n  }\n\n  editorDivFocus(event) {\n    this.isEditing = true;\n  }\n\n  editorDivBlur(event) {\n    this.isEditing = false;\n  }\n\n  editorDivInput(event) {\n    this.parent.div.classList.toggle(\"freetextEditing\", this.isEmpty());\n  }\n\n  /** @inheritdoc */\n  disableEditing() {\n    this.editorDiv.setAttribute(\"role\", \"comment\");\n    this.editorDiv.removeAttribute(\"aria-multiline\");\n  }\n\n  /** @inheritdoc */\n  enableEditing() {\n    this.editorDiv.setAttribute(\"role\", \"textbox\");\n    this.editorDiv.setAttribute(\"aria-multiline\", true);\n  }\n\n  /** @inheritdoc */\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n\n    let baseX, baseY;\n    if (this.width) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n\n    super.render();\n    this.editorDiv = document.createElement(\"div\");\n    this.editorDiv.className = \"internal\";\n\n    this.editorDiv.setAttribute(\"id\", this.#editorDivId);\n    this.editorDiv.setAttribute(\"data-l10n-id\", \"pdfjs-free-text\");\n    this.enableEditing();\n\n    AnnotationEditor._l10nPromise\n      .get(\"pdfjs-free-text-default-content\")\n      .then(msg => this.editorDiv?.setAttribute(\"default-content\", msg));\n    this.editorDiv.contentEditable = true;\n\n    const { style } = this.editorDiv;\n    style.fontSize = `calc(${this.#fontSize}px * var(--scale-factor))`;\n    style.color = this.#color;\n\n    this.div.append(this.editorDiv);\n\n    this.overlayDiv = document.createElement(\"div\");\n    this.overlayDiv.classList.add(\"overlay\", \"enabled\");\n    this.div.append(this.overlayDiv);\n\n    // TODO: implement paste callback.\n    // The goal is to sanitize and have something suitable for this\n    // editor.\n    bindEvents(this, this.div, [\"dblclick\", \"keydown\"]);\n\n    if (this.width) {\n      // This editor was created in using copy (ctrl+c).\n      const [parentWidth, parentHeight] = this.parentDimensions;\n      if (this.annotationElementId) {\n        // This stuff is hard to test: if something is changed here, please\n        // test with the following PDF file:\n        //  - freetexts.pdf\n        //  - rotated_freetexts.pdf\n        // Only small variations between the original annotation and its editor\n        // are allowed.\n\n        // position is the position of the first glyph in the annotation\n        // and it's relative to its container.\n        const { position } = this.#initialData;\n        let [tx, ty] = this.getInitialTranslation();\n        [tx, ty] = this.pageTranslationToScreen(tx, ty);\n        const [pageWidth, pageHeight] = this.pageDimensions;\n        const [pageX, pageY] = this.pageTranslation;\n        let posX, posY;\n        switch (this.rotation) {\n          case 0:\n            posX = baseX + (position[0] - pageX) / pageWidth;\n            posY = baseY + this.height - (position[1] - pageY) / pageHeight;\n            break;\n          case 90:\n            posX = baseX + (position[0] - pageX) / pageWidth;\n            posY = baseY - (position[1] - pageY) / pageHeight;\n            [tx, ty] = [ty, -tx];\n            break;\n          case 180:\n            posX = baseX - this.width + (position[0] - pageX) / pageWidth;\n            posY = baseY - (position[1] - pageY) / pageHeight;\n            [tx, ty] = [-tx, -ty];\n            break;\n          case 270:\n            posX =\n              baseX +\n              (position[0] - pageX - this.height * pageHeight) / pageWidth;\n            posY =\n              baseY +\n              (position[1] - pageY - this.width * pageWidth) / pageHeight;\n            [tx, ty] = [-ty, tx];\n            break;\n        }\n        this.setAt(posX * parentWidth, posY * parentHeight, tx, ty);\n      } else {\n        this.setAt(\n          baseX * parentWidth,\n          baseY * parentHeight,\n          this.width * parentWidth,\n          this.height * parentHeight\n        );\n      }\n\n      this.#setContent();\n      this._isDraggable = true;\n      this.editorDiv.contentEditable = false;\n    } else {\n      this._isDraggable = false;\n      this.editorDiv.contentEditable = true;\n    }\n\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"TESTING\")) {\n      this.div.setAttribute(\"annotation-id\", this.annotationElementId);\n    }\n\n    return this.div;\n  }\n\n  #setContent() {\n    this.editorDiv.replaceChildren();\n    if (!this.#content) {\n      return;\n    }\n    for (const line of this.#content.split(\"\\n\")) {\n      const div = document.createElement(\"div\");\n      div.append(\n        line ? document.createTextNode(line) : document.createElement(\"br\")\n      );\n      this.editorDiv.append(div);\n    }\n  }\n\n  /** @inheritdoc */\n  get contentDiv() {\n    return this.editorDiv;\n  }\n\n  /** @inheritdoc */\n  static deserialize(data, parent, uiManager) {\n    let initialData = null;\n    if (data instanceof FreeTextAnnotationElement) {\n      const {\n        data: {\n          defaultAppearanceData: { fontSize, fontColor },\n          rect,\n          rotation,\n          id,\n        },\n        textContent,\n        textPosition,\n        parent: {\n          page: { pageNumber },\n        },\n      } = data;\n      // textContent is supposed to be an array of strings containing each line\n      // of text. However, it can be null or empty.\n      if (!textContent || textContent.length === 0) {\n        // Empty annotation.\n        return null;\n      }\n      initialData = data = {\n        annotationType: AnnotationEditorType.FREETEXT,\n        color: Array.from(fontColor),\n        fontSize,\n        value: textContent.join(\"\\n\"),\n        position: textPosition,\n        pageIndex: pageNumber - 1,\n        rect,\n        rotation,\n        id,\n        deleted: false,\n      };\n    }\n    const editor = super.deserialize(data, parent, uiManager);\n\n    editor.#fontSize = data.fontSize;\n    editor.#color = Util.makeHexColor(...data.color);\n    editor.#content = data.value;\n    editor.annotationElementId = data.id || null;\n    editor.#initialData = initialData;\n\n    return editor;\n  }\n\n  /** @inheritdoc */\n  serialize(isForCopying = false) {\n    if (this.isEmpty()) {\n      return null;\n    }\n\n    if (this.deleted) {\n      return {\n        pageIndex: this.pageIndex,\n        id: this.annotationElementId,\n        deleted: true,\n      };\n    }\n\n    const padding = FreeTextEditor._internalPadding * this.parentScale;\n    const rect = this.getRect(padding, padding);\n    const color = AnnotationEditor._colorManager.convert(\n      this.isAttachedToDOM\n        ? getComputedStyle(this.editorDiv).color\n        : this.#color\n    );\n\n    const serialized = {\n      annotationType: AnnotationEditorType.FREETEXT,\n      color,\n      fontSize: this.#fontSize,\n      value: this.#content,\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.rotation,\n      structTreeParentId: this._structTreeParentId,\n    };\n\n    if (isForCopying) {\n      // Don't add the id when copying because the pasted editor mustn't be\n      // linked to an existing annotation.\n      return serialized;\n    }\n\n    if (this.annotationElementId && !this.#hasElementChanged(serialized)) {\n      return null;\n    }\n\n    serialized.id = this.annotationElementId;\n\n    return serialized;\n  }\n\n  #hasElementChanged(serialized) {\n    const { value, fontSize, color, rect, pageIndex } = this.#initialData;\n\n    return (\n      serialized.value !== value ||\n      serialized.fontSize !== fontSize ||\n      serialized.rect.some((x, i) => Math.abs(x - rect[i]) >= 1) ||\n      serialized.color.some((c, i) => c !== color[i]) ||\n      serialized.pageIndex !== pageIndex\n    );\n  }\n\n  #cheatInitialRect(delayed = false) {\n    // The annotation has a rect but the editor has an other one.\n    // When we want to know if the annotation has changed (e.g. has been moved)\n    // we must compare the editor initial rect with the current one.\n    // So this method is a hack to have a way to compare the real rects.\n    if (!this.annotationElementId) {\n      return;\n    }\n\n    this.#setEditorDimensions();\n    if (!delayed && (this.width === 0 || this.height === 0)) {\n      setTimeout(() => this.#cheatInitialRect(/* delayed = */ true), 0);\n      return;\n    }\n\n    const padding = FreeTextEditor._internalPadding * this.parentScale;\n    this.#initialData.rect = this.getRect(padding, padding);\n  }\n}\n\nexport { FreeTextEditor };\n","/* Copyright 2022 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  AnnotationEditorParamsType,\n  AnnotationEditorType,\n  Util,\n} from \"../../shared/util.js\";\nimport { AnnotationEditor } from \"./editor.js\";\nimport { bindEvents } from \"./tools.js\";\nimport { ColorPicker } from \"./color_picker.js\";\nimport { Outliner } from \"./outliner.js\";\n\n/**\n * Basic draw editor in order to generate an Highlight annotation.\n */\nclass HighlightEditor extends AnnotationEditor {\n  #boxes;\n\n  #clipPathId = null;\n\n  #colorPicker = null;\n\n  #focusOutlines = null;\n\n  #highlightDiv = null;\n\n  #highlightOutlines = null;\n\n  #id = null;\n\n  #lastPoint = null;\n\n  #opacity;\n\n  #outlineId = null;\n\n  static _defaultColor = null;\n\n  static _defaultOpacity = 1;\n\n  static _l10nPromise;\n\n  static _type = \"highlight\";\n\n  static _editorType = AnnotationEditorType.HIGHLIGHT;\n\n  constructor(params) {\n    super({ ...params, name: \"highlightEditor\" });\n    HighlightEditor._defaultColor ||=\n      this._uiManager.highlightColors?.values().next().value || \"#fff066\";\n    this.color = params.color || HighlightEditor._defaultColor;\n    this.#opacity = params.opacity || HighlightEditor._defaultOpacity;\n    this.#boxes = params.boxes || null;\n    this._isDraggable = false;\n\n    this.#createOutlines();\n    this.#addToDrawLayer();\n    this.rotate(this.rotation);\n  }\n\n  #createOutlines() {\n    const outliner = new Outliner(this.#boxes, /* borderWidth = */ 0.001);\n    this.#highlightOutlines = outliner.getOutlines();\n    ({\n      x: this.x,\n      y: this.y,\n      width: this.width,\n      height: this.height,\n    } = this.#highlightOutlines.box);\n\n    const outlinerForOutline = new Outliner(\n      this.#boxes,\n      /* borderWidth = */ 0.0025,\n      /* innerMargin = */ 0.001,\n      this._uiManager.direction === \"ltr\"\n    );\n    this.#focusOutlines = outlinerForOutline.getOutlines();\n\n    // The last point is in the pages coordinate system.\n    const { lastPoint } = this.#focusOutlines.box;\n    this.#lastPoint = [\n      (lastPoint[0] - this.x) / this.width,\n      (lastPoint[1] - this.y) / this.height,\n    ];\n  }\n\n  static initialize(l10n) {\n    AnnotationEditor.initialize(l10n);\n  }\n\n  static updateDefaultParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:\n        HighlightEditor._defaultColor = value;\n        break;\n    }\n  }\n\n  /** @inheritdoc */\n  get toolbarPosition() {\n    return this.#lastPoint;\n  }\n\n  /** @inheritdoc */\n  updateParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.HIGHLIGHT_COLOR:\n        this.#updateColor(value);\n        break;\n    }\n  }\n\n  static get defaultPropertiesToUpdate() {\n    return [\n      [\n        AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR,\n        HighlightEditor._defaultColor,\n      ],\n    ];\n  }\n\n  /** @inheritdoc */\n  get propertiesToUpdate() {\n    return [\n      [\n        AnnotationEditorParamsType.HIGHLIGHT_COLOR,\n        this.color || HighlightEditor._defaultColor,\n      ],\n    ];\n  }\n\n  /**\n   * Update the color and make this action undoable.\n   * @param {string} color\n   */\n  #updateColor(color) {\n    const savedColor = this.color;\n    this.addCommands({\n      cmd: () => {\n        this.color = color;\n        this.parent.drawLayer.changeColor(this.#id, color);\n        this.#colorPicker?.updateColor(color);\n      },\n      undo: () => {\n        this.color = savedColor;\n        this.parent.drawLayer.changeColor(this.#id, savedColor);\n        this.#colorPicker?.updateColor(savedColor);\n      },\n      mustExec: true,\n      type: AnnotationEditorParamsType.HIGHLIGHT_COLOR,\n      overwriteIfSameType: true,\n      keepUndo: true,\n    });\n  }\n\n  /** @inheritdoc */\n  async addEditToolbar() {\n    const toolbar = await super.addEditToolbar();\n    if (!toolbar) {\n      return null;\n    }\n    if (this._uiManager.highlightColors) {\n      this.#colorPicker = new ColorPicker({ editor: this });\n      toolbar.addColorPicker(this.#colorPicker);\n    }\n    return toolbar;\n  }\n\n  /** @inheritdoc */\n  disableEditing() {\n    super.disableEditing();\n    this.div.classList.toggle(\"disabled\", true);\n  }\n\n  /** @inheritdoc */\n  enableEditing() {\n    super.enableEditing();\n    this.div.classList.toggle(\"disabled\", false);\n  }\n\n  /** @inheritdoc */\n  fixAndSetPosition() {\n    return super.fixAndSetPosition(0);\n  }\n\n  /** @inheritdoc */\n  getRect(tx, ty) {\n    return super.getRect(tx, ty, 0);\n  }\n\n  /** @inheritdoc */\n  onceAdded() {\n    this.parent.addUndoableEditor(this);\n    this.div.focus();\n  }\n\n  /** @inheritdoc */\n  remove() {\n    super.remove();\n    this.#cleanDrawLayer();\n  }\n\n  /** @inheritdoc */\n  rebuild() {\n    if (!this.parent) {\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n\n    this.#addToDrawLayer();\n\n    if (!this.isAttachedToDOM) {\n      // At some point this editor was removed and we're rebuilting it,\n      // hence we must add it to its parent.\n      this.parent.add(this);\n    }\n  }\n\n  setParent(parent) {\n    let mustBeSelected = false;\n    if (this.parent && !parent) {\n      this.#cleanDrawLayer();\n    } else if (parent) {\n      this.#addToDrawLayer(parent);\n      // If mustBeSelected is true it means that this editor was selected\n      // when its parent has been destroyed, hence we must select it again.\n      mustBeSelected =\n        !this.parent && this.div?.classList.contains(\"selectedEditor\");\n    }\n    super.setParent(parent);\n    if (mustBeSelected) {\n      // We select it after the parent has been set.\n      this.select();\n    }\n  }\n\n  #cleanDrawLayer() {\n    if (this.#id === null || !this.parent) {\n      return;\n    }\n    this.parent.drawLayer.remove(this.#id);\n    this.#id = null;\n    this.parent.drawLayer.remove(this.#outlineId);\n    this.#outlineId = null;\n  }\n\n  #addToDrawLayer(parent = this.parent) {\n    if (this.#id !== null) {\n      return;\n    }\n    ({ id: this.#id, clipPathId: this.#clipPathId } =\n      parent.drawLayer.highlight(\n        this.#highlightOutlines,\n        this.color,\n        this.#opacity\n      ));\n    if (this.#highlightDiv) {\n      this.#highlightDiv.style.clipPath = this.#clipPathId;\n    }\n    this.#outlineId = parent.drawLayer.highlightOutline(this.#focusOutlines);\n  }\n\n  static #rotateBbox({ x, y, width, height }, angle) {\n    switch (angle) {\n      case 90:\n        return {\n          x: 1 - y - height,\n          y: x,\n          width: height,\n          height: width,\n        };\n      case 180:\n        return {\n          x: 1 - x - width,\n          y: 1 - y - height,\n          width,\n          height,\n        };\n      case 270:\n        return {\n          x: y,\n          y: 1 - x - width,\n          width: height,\n          height: width,\n        };\n    }\n    return {\n      x,\n      y,\n      width,\n      height,\n    };\n  }\n\n  /** @inheritdoc */\n  rotate(angle) {\n    const { drawLayer } = this.parent;\n    drawLayer.rotate(this.#id, angle);\n    drawLayer.rotate(this.#outlineId, angle);\n    drawLayer.updateBox(this.#id, HighlightEditor.#rotateBbox(this, angle));\n    drawLayer.updateBox(\n      this.#outlineId,\n      HighlightEditor.#rotateBbox(this.#focusOutlines.box, angle)\n    );\n  }\n\n  /** @inheritdoc */\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n\n    const div = super.render();\n    const highlightDiv = (this.#highlightDiv = document.createElement(\"div\"));\n    div.append(highlightDiv);\n    highlightDiv.className = \"internal\";\n    highlightDiv.style.clipPath = this.#clipPathId;\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(this.width * parentWidth, this.height * parentHeight);\n\n    bindEvents(this, this.#highlightDiv, [\"pointerover\", \"pointerleave\"]);\n    this.enableEditing();\n\n    return div;\n  }\n\n  pointerover() {\n    this.parent.drawLayer.addClass(this.#outlineId, \"hovered\");\n  }\n\n  pointerleave() {\n    this.parent.drawLayer.removeClass(this.#outlineId, \"hovered\");\n  }\n\n  /** @inheritdoc */\n  select() {\n    super.select();\n    this.parent?.drawLayer.removeClass(this.#outlineId, \"hovered\");\n    this.parent?.drawLayer.addClass(this.#outlineId, \"selected\");\n  }\n\n  /** @inheritdoc */\n  unselect() {\n    super.unselect();\n    this.parent?.drawLayer.removeClass(this.#outlineId, \"selected\");\n  }\n\n  #serializeBoxes() {\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const boxes = this.#boxes;\n    const quadPoints = new Array(boxes.length * 8);\n    let i = 0;\n    for (const { x, y, width, height } of boxes) {\n      const sx = x * pageWidth;\n      const sy = (1 - y - height) * pageHeight;\n      // The specifications say that the rectangle should start from the bottom\n      // left corner and go counter-clockwise.\n      // But when opening the file in Adobe Acrobat it appears that this isn't\n      // correct hence the 4th and 6th numbers are just swapped.\n      quadPoints[i] = quadPoints[i + 4] = sx;\n      quadPoints[i + 1] = quadPoints[i + 3] = sy;\n      quadPoints[i + 2] = quadPoints[i + 6] = sx + width * pageWidth;\n      quadPoints[i + 5] = quadPoints[i + 7] = sy + height * pageHeight;\n      i += 8;\n    }\n    return quadPoints;\n  }\n\n  #serializeOutlines() {\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const width = this.width * pageWidth;\n    const height = this.height * pageHeight;\n    const tx = this.x * pageWidth;\n    const ty = (1 - this.y - this.height) * pageHeight;\n    const outlines = [];\n    for (const outline of this.#highlightOutlines.outlines) {\n      const points = new Array(outline.length);\n      for (let i = 0; i < outline.length; i += 2) {\n        points[i] = tx + outline[i] * width;\n        points[i + 1] = ty + (1 - outline[i + 1]) * height;\n      }\n      outlines.push(points);\n    }\n    return outlines;\n  }\n\n  /** @inheritdoc */\n  static deserialize(data, parent, uiManager) {\n    const editor = super.deserialize(data, parent, uiManager);\n\n    const { rect, color, quadPoints } = data;\n    editor.color = Util.makeHexColor(...color);\n    editor.#opacity = data.opacity;\n\n    const [pageWidth, pageHeight] = editor.pageDimensions;\n    editor.width = (rect[2] - rect[0]) / pageWidth;\n    editor.height = (rect[3] - rect[1]) / pageHeight;\n    const boxes = (editor.#boxes = []);\n    for (let i = 0; i < quadPoints.length; i += 8) {\n      boxes.push({\n        x: quadPoints[4] / pageWidth,\n        y: 1 - quadPoints[i + 5] / pageHeight,\n        width: (quadPoints[i + 2] - quadPoints[i]) / pageWidth,\n        height: (quadPoints[i + 5] - quadPoints[i + 1]) / pageHeight,\n      });\n    }\n    editor.#createOutlines();\n\n    return editor;\n  }\n\n  /** @inheritdoc */\n  serialize(isForCopying = false) {\n    // It doesn't make sense to copy/paste a highlight annotation.\n    if (this.isEmpty() || isForCopying) {\n      return null;\n    }\n\n    const rect = this.getRect(0, 0);\n    const color = AnnotationEditor._colorManager.convert(this.color);\n\n    return {\n      annotationType: AnnotationEditorType.HIGHLIGHT,\n      color,\n      opacity: this.#opacity,\n      quadPoints: this.#serializeBoxes(),\n      outlines: this.#serializeOutlines(),\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: 0,\n      structTreeParentId: this._structTreeParentId,\n    };\n  }\n\n  static canCreateNewEmptyEditor() {\n    return false;\n  }\n}\n\nexport { HighlightEditor };\n","/* Copyright 2022 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  AnnotationEditorParamsType,\n  AnnotationEditorType,\n  Util,\n} from \"../../shared/util.js\";\nimport { AnnotationEditor } from \"./editor.js\";\nimport { InkAnnotationElement } from \"../annotation_layer.js\";\nimport { noContextMenu } from \"../display_utils.js\";\nimport { opacityToHex } from \"./tools.js\";\n\n/**\n * Basic draw editor in order to generate an Ink annotation.\n */\nclass InkEditor extends AnnotationEditor {\n  #baseHeight = 0;\n\n  #baseWidth = 0;\n\n  #boundCanvasPointermove = this.canvasPointermove.bind(this);\n\n  #boundCanvasPointerleave = this.canvasPointerleave.bind(this);\n\n  #boundCanvasPointerup = this.canvasPointerup.bind(this);\n\n  #boundCanvasPointerdown = this.canvasPointerdown.bind(this);\n\n  #canvasContextMenuTimeoutId = null;\n\n  #currentPath2D = new Path2D();\n\n  #disableEditing = false;\n\n  #hasSomethingToDraw = false;\n\n  #isCanvasInitialized = false;\n\n  #observer = null;\n\n  #realWidth = 0;\n\n  #realHeight = 0;\n\n  #requestFrameCallback = null;\n\n  static _defaultColor = null;\n\n  static _defaultOpacity = 1;\n\n  static _defaultThickness = 1;\n\n  static _type = \"ink\";\n\n  static _editorType = AnnotationEditorType.INK;\n\n  constructor(params) {\n    super({ ...params, name: \"inkEditor\" });\n    this.color = params.color || null;\n    this.thickness = params.thickness || null;\n    this.opacity = params.opacity || null;\n    this.paths = [];\n    this.bezierPath2D = [];\n    this.allRawPaths = [];\n    this.currentPath = [];\n    this.scaleFactor = 1;\n    this.translationX = this.translationY = 0;\n    this.x = 0;\n    this.y = 0;\n    this._willKeepAspectRatio = true;\n  }\n\n  /** @inheritdoc */\n  static initialize(l10n) {\n    AnnotationEditor.initialize(l10n);\n  }\n\n  /** @inheritdoc */\n  static updateDefaultParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.INK_THICKNESS:\n        InkEditor._defaultThickness = value;\n        break;\n      case AnnotationEditorParamsType.INK_COLOR:\n        InkEditor._defaultColor = value;\n        break;\n      case AnnotationEditorParamsType.INK_OPACITY:\n        InkEditor._defaultOpacity = value / 100;\n        break;\n    }\n  }\n\n  /** @inheritdoc */\n  updateParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.INK_THICKNESS:\n        this.#updateThickness(value);\n        break;\n      case AnnotationEditorParamsType.INK_COLOR:\n        this.#updateColor(value);\n        break;\n      case AnnotationEditorParamsType.INK_OPACITY:\n        this.#updateOpacity(value);\n        break;\n    }\n  }\n\n  /** @inheritdoc */\n  static get defaultPropertiesToUpdate() {\n    return [\n      [AnnotationEditorParamsType.INK_THICKNESS, InkEditor._defaultThickness],\n      [\n        AnnotationEditorParamsType.INK_COLOR,\n        InkEditor._defaultColor || AnnotationEditor._defaultLineColor,\n      ],\n      [\n        AnnotationEditorParamsType.INK_OPACITY,\n        Math.round(InkEditor._defaultOpacity * 100),\n      ],\n    ];\n  }\n\n  /** @inheritdoc */\n  get propertiesToUpdate() {\n    return [\n      [\n        AnnotationEditorParamsType.INK_THICKNESS,\n        this.thickness || InkEditor._defaultThickness,\n      ],\n      [\n        AnnotationEditorParamsType.INK_COLOR,\n        this.color ||\n          InkEditor._defaultColor ||\n          AnnotationEditor._defaultLineColor,\n      ],\n      [\n        AnnotationEditorParamsType.INK_OPACITY,\n        Math.round(100 * (this.opacity ?? InkEditor._defaultOpacity)),\n      ],\n    ];\n  }\n\n  /**\n   * Update the thickness and make this action undoable.\n   * @param {number} thickness\n   */\n  #updateThickness(thickness) {\n    const savedThickness = this.thickness;\n    this.addCommands({\n      cmd: () => {\n        this.thickness = thickness;\n        this.#fitToContent();\n      },\n      undo: () => {\n        this.thickness = savedThickness;\n        this.#fitToContent();\n      },\n      mustExec: true,\n      type: AnnotationEditorParamsType.INK_THICKNESS,\n      overwriteIfSameType: true,\n      keepUndo: true,\n    });\n  }\n\n  /**\n   * Update the color and make this action undoable.\n   * @param {string} color\n   */\n  #updateColor(color) {\n    const savedColor = this.color;\n    this.addCommands({\n      cmd: () => {\n        this.color = color;\n        this.#redraw();\n      },\n      undo: () => {\n        this.color = savedColor;\n        this.#redraw();\n      },\n      mustExec: true,\n      type: AnnotationEditorParamsType.INK_COLOR,\n      overwriteIfSameType: true,\n      keepUndo: true,\n    });\n  }\n\n  /**\n   * Update the opacity and make this action undoable.\n   * @param {number} opacity\n   */\n  #updateOpacity(opacity) {\n    opacity /= 100;\n    const savedOpacity = this.opacity;\n    this.addCommands({\n      cmd: () => {\n        this.opacity = opacity;\n        this.#redraw();\n      },\n      undo: () => {\n        this.opacity = savedOpacity;\n        this.#redraw();\n      },\n      mustExec: true,\n      type: AnnotationEditorParamsType.INK_OPACITY,\n      overwriteIfSameType: true,\n      keepUndo: true,\n    });\n  }\n\n  /** @inheritdoc */\n  rebuild() {\n    if (!this.parent) {\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n\n    if (!this.canvas) {\n      this.#createCanvas();\n      this.#createObserver();\n    }\n\n    if (!this.isAttachedToDOM) {\n      // At some point this editor was removed and we're rebuilding it,\n      // hence we must add it to its parent.\n      this.parent.add(this);\n      this.#setCanvasDims();\n    }\n    this.#fitToContent();\n  }\n\n  /** @inheritdoc */\n  remove() {\n    if (this.canvas === null) {\n      return;\n    }\n\n    if (!this.isEmpty()) {\n      this.commit();\n    }\n\n    // Destroy the canvas.\n    this.canvas.width = this.canvas.height = 0;\n    this.canvas.remove();\n    this.canvas = null;\n\n    if (this.#canvasContextMenuTimeoutId) {\n      clearTimeout(this.#canvasContextMenuTimeoutId);\n      this.#canvasContextMenuTimeoutId = null;\n    }\n\n    this.#observer.disconnect();\n    this.#observer = null;\n\n    super.remove();\n  }\n\n  setParent(parent) {\n    if (!this.parent && parent) {\n      // We've a parent hence the rescale will be handled thanks to the\n      // ResizeObserver.\n      this._uiManager.removeShouldRescale(this);\n    } else if (this.parent && parent === null) {\n      // The editor is removed from the DOM, hence we handle the rescale thanks\n      // to the onScaleChanging callback.\n      // This way, it'll be saved/printed correctly.\n      this._uiManager.addShouldRescale(this);\n    }\n    super.setParent(parent);\n  }\n\n  onScaleChanging() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const width = this.width * parentWidth;\n    const height = this.height * parentHeight;\n    this.setDimensions(width, height);\n  }\n\n  /** @inheritdoc */\n  enableEditMode() {\n    if (this.#disableEditing || this.canvas === null) {\n      return;\n    }\n\n    super.enableEditMode();\n    this._isDraggable = false;\n    this.canvas.addEventListener(\"pointerdown\", this.#boundCanvasPointerdown);\n  }\n\n  /** @inheritdoc */\n  disableEditMode() {\n    if (!this.isInEditMode() || this.canvas === null) {\n      return;\n    }\n\n    super.disableEditMode();\n    this._isDraggable = !this.isEmpty();\n    this.div.classList.remove(\"editing\");\n\n    this.canvas.removeEventListener(\n      \"pointerdown\",\n      this.#boundCanvasPointerdown\n    );\n  }\n\n  /** @inheritdoc */\n  onceAdded() {\n    this._isDraggable = !this.isEmpty();\n  }\n\n  /** @inheritdoc */\n  isEmpty() {\n    return (\n      this.paths.length === 0 ||\n      (this.paths.length === 1 && this.paths[0].length === 0)\n    );\n  }\n\n  #getInitialBBox() {\n    const {\n      parentRotation,\n      parentDimensions: [width, height],\n    } = this;\n    switch (parentRotation) {\n      case 90:\n        return [0, height, height, width];\n      case 180:\n        return [width, height, width, height];\n      case 270:\n        return [width, 0, height, width];\n      default:\n        return [0, 0, width, height];\n    }\n  }\n\n  /**\n   * Set line styles.\n   */\n  #setStroke() {\n    const { ctx, color, opacity, thickness, parentScale, scaleFactor } = this;\n    ctx.lineWidth = (thickness * parentScale) / scaleFactor;\n    ctx.lineCap = \"round\";\n    ctx.lineJoin = \"round\";\n    ctx.miterLimit = 10;\n    ctx.strokeStyle = `${color}${opacityToHex(opacity)}`;\n  }\n\n  /**\n   * Start to draw on the canvas.\n   * @param {number} x\n   * @param {number} y\n   */\n  #startDrawing(x, y) {\n    this.canvas.addEventListener(\"contextmenu\", noContextMenu);\n    this.canvas.addEventListener(\"pointerleave\", this.#boundCanvasPointerleave);\n    this.canvas.addEventListener(\"pointermove\", this.#boundCanvasPointermove);\n    this.canvas.addEventListener(\"pointerup\", this.#boundCanvasPointerup);\n    this.canvas.removeEventListener(\n      \"pointerdown\",\n      this.#boundCanvasPointerdown\n    );\n\n    this.isEditing = true;\n    if (!this.#isCanvasInitialized) {\n      this.#isCanvasInitialized = true;\n      this.#setCanvasDims();\n      this.thickness ||= InkEditor._defaultThickness;\n      this.color ||=\n        InkEditor._defaultColor || AnnotationEditor._defaultLineColor;\n      this.opacity ??= InkEditor._defaultOpacity;\n    }\n    this.currentPath.push([x, y]);\n    this.#hasSomethingToDraw = false;\n    this.#setStroke();\n\n    this.#requestFrameCallback = () => {\n      this.#drawPoints();\n      if (this.#requestFrameCallback) {\n        window.requestAnimationFrame(this.#requestFrameCallback);\n      }\n    };\n    window.requestAnimationFrame(this.#requestFrameCallback);\n  }\n\n  /**\n   * Draw on the canvas.\n   * @param {number} x\n   * @param {number} y\n   */\n  #draw(x, y) {\n    const [lastX, lastY] = this.currentPath.at(-1);\n    if (this.currentPath.length > 1 && x === lastX && y === lastY) {\n      return;\n    }\n    const currentPath = this.currentPath;\n    let path2D = this.#currentPath2D;\n    currentPath.push([x, y]);\n    this.#hasSomethingToDraw = true;\n\n    if (currentPath.length <= 2) {\n      path2D.moveTo(...currentPath[0]);\n      path2D.lineTo(x, y);\n      return;\n    }\n\n    if (currentPath.length === 3) {\n      this.#currentPath2D = path2D = new Path2D();\n      path2D.moveTo(...currentPath[0]);\n    }\n\n    this.#makeBezierCurve(\n      path2D,\n      ...currentPath.at(-3),\n      ...currentPath.at(-2),\n      x,\n      y\n    );\n  }\n\n  #endPath() {\n    if (this.currentPath.length === 0) {\n      return;\n    }\n    const lastPoint = this.currentPath.at(-1);\n    this.#currentPath2D.lineTo(...lastPoint);\n  }\n\n  /**\n   * Stop to draw on the canvas.\n   * @param {number} x\n   * @param {number} y\n   */\n  #stopDrawing(x, y) {\n    this.#requestFrameCallback = null;\n\n    x = Math.min(Math.max(x, 0), this.canvas.width);\n    y = Math.min(Math.max(y, 0), this.canvas.height);\n\n    this.#draw(x, y);\n    this.#endPath();\n\n    // Interpolate the path entered by the user with some\n    // Bezier's curves in order to have a smoother path and\n    // to reduce the data size used to draw it in the PDF.\n    let bezier;\n    if (this.currentPath.length !== 1) {\n      bezier = this.#generateBezierPoints();\n    } else {\n      // We have only one point finally.\n      const xy = [x, y];\n      bezier = [[xy, xy.slice(), xy.slice(), xy]];\n    }\n    const path2D = this.#currentPath2D;\n    const currentPath = this.currentPath;\n    this.currentPath = [];\n    this.#currentPath2D = new Path2D();\n\n    const cmd = () => {\n      this.allRawPaths.push(currentPath);\n      this.paths.push(bezier);\n      this.bezierPath2D.push(path2D);\n      this.rebuild();\n    };\n\n    const undo = () => {\n      this.allRawPaths.pop();\n      this.paths.pop();\n      this.bezierPath2D.pop();\n      if (this.paths.length === 0) {\n        this.remove();\n      } else {\n        if (!this.canvas) {\n          this.#createCanvas();\n          this.#createObserver();\n        }\n        this.#fitToContent();\n      }\n    };\n\n    this.addCommands({ cmd, undo, mustExec: true });\n  }\n\n  #drawPoints() {\n    if (!this.#hasSomethingToDraw) {\n      return;\n    }\n    this.#hasSomethingToDraw = false;\n\n    const thickness = Math.ceil(this.thickness * this.parentScale);\n    const lastPoints = this.currentPath.slice(-3);\n    const x = lastPoints.map(xy => xy[0]);\n    const y = lastPoints.map(xy => xy[1]);\n    const xMin = Math.min(...x) - thickness;\n    const xMax = Math.max(...x) + thickness;\n    const yMin = Math.min(...y) - thickness;\n    const yMax = Math.max(...y) + thickness;\n\n    const { ctx } = this;\n    ctx.save();\n\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n      // In Chrome, the clip() method doesn't work as expected.\n      ctx.clearRect(xMin, yMin, xMax - xMin, yMax - yMin);\n      ctx.beginPath();\n      ctx.rect(xMin, yMin, xMax - xMin, yMax - yMin);\n      ctx.clip();\n    } else {\n      ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    }\n\n    for (const path of this.bezierPath2D) {\n      ctx.stroke(path);\n    }\n    ctx.stroke(this.#currentPath2D);\n\n    ctx.restore();\n  }\n\n  #makeBezierCurve(path2D, x0, y0, x1, y1, x2, y2) {\n    const prevX = (x0 + x1) / 2;\n    const prevY = (y0 + y1) / 2;\n    const x3 = (x1 + x2) / 2;\n    const y3 = (y1 + y2) / 2;\n\n    path2D.bezierCurveTo(\n      prevX + (2 * (x1 - prevX)) / 3,\n      prevY + (2 * (y1 - prevY)) / 3,\n      x3 + (2 * (x1 - x3)) / 3,\n      y3 + (2 * (y1 - y3)) / 3,\n      x3,\n      y3\n    );\n  }\n\n  #generateBezierPoints() {\n    const path = this.currentPath;\n    if (path.length <= 2) {\n      return [[path[0], path[0], path.at(-1), path.at(-1)]];\n    }\n\n    const bezierPoints = [];\n    let i;\n    let [x0, y0] = path[0];\n    for (i = 1; i < path.length - 2; i++) {\n      const [x1, y1] = path[i];\n      const [x2, y2] = path[i + 1];\n      const x3 = (x1 + x2) / 2;\n      const y3 = (y1 + y2) / 2;\n\n      // The quadratic is: [[x0, y0], [x1, y1], [x3, y3]].\n      // Convert the quadratic to a cubic\n      // (see https://fontforge.org/docs/techref/bezier.html#converting-truetype-to-postscript)\n      const control1 = [x0 + (2 * (x1 - x0)) / 3, y0 + (2 * (y1 - y0)) / 3];\n      const control2 = [x3 + (2 * (x1 - x3)) / 3, y3 + (2 * (y1 - y3)) / 3];\n\n      bezierPoints.push([[x0, y0], control1, control2, [x3, y3]]);\n\n      [x0, y0] = [x3, y3];\n    }\n\n    const [x1, y1] = path[i];\n    const [x2, y2] = path[i + 1];\n\n    // The quadratic is: [[x0, y0], [x1, y1], [x2, y2]].\n    const control1 = [x0 + (2 * (x1 - x0)) / 3, y0 + (2 * (y1 - y0)) / 3];\n    const control2 = [x2 + (2 * (x1 - x2)) / 3, y2 + (2 * (y1 - y2)) / 3];\n\n    bezierPoints.push([[x0, y0], control1, control2, [x2, y2]]);\n    return bezierPoints;\n  }\n\n  /**\n   * Redraw all the paths.\n   */\n  #redraw() {\n    if (this.isEmpty()) {\n      this.#updateTransform();\n      return;\n    }\n    this.#setStroke();\n\n    const { canvas, ctx } = this;\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    this.#updateTransform();\n\n    for (const path of this.bezierPath2D) {\n      ctx.stroke(path);\n    }\n  }\n\n  /**\n   * Commit the curves we have in this editor.\n   */\n  commit() {\n    if (this.#disableEditing) {\n      return;\n    }\n\n    super.commit();\n\n    this.isEditing = false;\n    this.disableEditMode();\n\n    // This editor must be on top of the main ink editor.\n    this.setInForeground();\n\n    this.#disableEditing = true;\n    this.div.classList.add(\"disabled\");\n\n    this.#fitToContent(/* firstTime = */ true);\n    this.select();\n\n    this.parent.addInkEditorIfNeeded(/* isCommitting = */ true);\n\n    // When commiting, the position of this editor is changed, hence we must\n    // move it to the right position in the DOM.\n    this.moveInDOM();\n    this.div.focus({\n      preventScroll: true /* See issue #15744 */,\n    });\n  }\n\n  /** @inheritdoc */\n  focusin(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    super.focusin(event);\n    this.enableEditMode();\n  }\n\n  /**\n   * onpointerdown callback for the canvas we're drawing on.\n   * @param {PointerEvent} event\n   */\n  canvasPointerdown(event) {\n    if (event.button !== 0 || !this.isInEditMode() || this.#disableEditing) {\n      return;\n    }\n\n    // We want to draw on top of any other editors.\n    // Since it's the last child, there's no need to give it a higher z-index.\n    this.setInForeground();\n\n    event.preventDefault();\n\n    if (!this.div.contains(document.activeElement)) {\n      this.div.focus({\n        preventScroll: true /* See issue #17327 */,\n      });\n    }\n\n    this.#startDrawing(event.offsetX, event.offsetY);\n  }\n\n  /**\n   * onpointermove callback for the canvas we're drawing on.\n   * @param {PointerEvent} event\n   */\n  canvasPointermove(event) {\n    event.preventDefault();\n    this.#draw(event.offsetX, event.offsetY);\n  }\n\n  /**\n   * onpointerup callback for the canvas we're drawing on.\n   * @param {PointerEvent} event\n   */\n  canvasPointerup(event) {\n    event.preventDefault();\n    this.#endDrawing(event);\n  }\n\n  /**\n   * onpointerleave callback for the canvas we're drawing on.\n   * @param {PointerEvent} event\n   */\n  canvasPointerleave(event) {\n    this.#endDrawing(event);\n  }\n\n  /**\n   * End the drawing.\n   * @param {PointerEvent} event\n   */\n  #endDrawing(event) {\n    this.canvas.removeEventListener(\n      \"pointerleave\",\n      this.#boundCanvasPointerleave\n    );\n    this.canvas.removeEventListener(\n      \"pointermove\",\n      this.#boundCanvasPointermove\n    );\n    this.canvas.removeEventListener(\"pointerup\", this.#boundCanvasPointerup);\n    this.canvas.addEventListener(\"pointerdown\", this.#boundCanvasPointerdown);\n\n    // Slight delay to avoid the context menu to appear (it can happen on a long\n    // tap with a pen).\n    if (this.#canvasContextMenuTimeoutId) {\n      clearTimeout(this.#canvasContextMenuTimeoutId);\n    }\n    this.#canvasContextMenuTimeoutId = setTimeout(() => {\n      this.#canvasContextMenuTimeoutId = null;\n      this.canvas.removeEventListener(\"contextmenu\", noContextMenu);\n    }, 10);\n\n    this.#stopDrawing(event.offsetX, event.offsetY);\n\n    this.addToAnnotationStorage();\n\n    // Since the ink editor covers all of the page and we want to be able\n    // to select another editor, we just put this one in the background.\n    this.setInBackground();\n  }\n\n  /**\n   * Create the canvas element.\n   */\n  #createCanvas() {\n    this.canvas = document.createElement(\"canvas\");\n    this.canvas.width = this.canvas.height = 0;\n    this.canvas.className = \"inkEditorCanvas\";\n    this.canvas.setAttribute(\"data-l10n-id\", \"pdfjs-ink-canvas\");\n\n    this.div.append(this.canvas);\n    this.ctx = this.canvas.getContext(\"2d\");\n  }\n\n  /**\n   * Create the resize observer.\n   */\n  #createObserver() {\n    this.#observer = new ResizeObserver(entries => {\n      const rect = entries[0].contentRect;\n      if (rect.width && rect.height) {\n        this.setDimensions(rect.width, rect.height);\n      }\n    });\n    this.#observer.observe(this.div);\n  }\n\n  /** @inheritdoc */\n  get isResizable() {\n    return !this.isEmpty() && this.#disableEditing;\n  }\n\n  /** @inheritdoc */\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n\n    let baseX, baseY;\n    if (this.width) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n\n    super.render();\n\n    this.div.setAttribute(\"data-l10n-id\", \"pdfjs-ink\");\n\n    const [x, y, w, h] = this.#getInitialBBox();\n    this.setAt(x, y, 0, 0);\n    this.setDims(w, h);\n\n    this.#createCanvas();\n\n    if (this.width) {\n      // This editor was created in using copy (ctrl+c).\n      const [parentWidth, parentHeight] = this.parentDimensions;\n      this.setAspectRatio(this.width * parentWidth, this.height * parentHeight);\n      this.setAt(\n        baseX * parentWidth,\n        baseY * parentHeight,\n        this.width * parentWidth,\n        this.height * parentHeight\n      );\n      this.#isCanvasInitialized = true;\n      this.#setCanvasDims();\n      this.setDims(this.width * parentWidth, this.height * parentHeight);\n      this.#redraw();\n      this.div.classList.add(\"disabled\");\n    } else {\n      this.div.classList.add(\"editing\");\n      this.enableEditMode();\n    }\n\n    this.#createObserver();\n\n    return this.div;\n  }\n\n  #setCanvasDims() {\n    if (!this.#isCanvasInitialized) {\n      return;\n    }\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.canvas.width = Math.ceil(this.width * parentWidth);\n    this.canvas.height = Math.ceil(this.height * parentHeight);\n    this.#updateTransform();\n  }\n\n  /**\n   * When the dimensions of the div change the inner canvas must\n   * renew its dimensions, hence it must redraw its own contents.\n   * @param {number} width - the new width of the div\n   * @param {number} height - the new height of the div\n   * @returns\n   */\n  setDimensions(width, height) {\n    const roundedWidth = Math.round(width);\n    const roundedHeight = Math.round(height);\n    if (\n      this.#realWidth === roundedWidth &&\n      this.#realHeight === roundedHeight\n    ) {\n      return;\n    }\n\n    this.#realWidth = roundedWidth;\n    this.#realHeight = roundedHeight;\n\n    this.canvas.style.visibility = \"hidden\";\n\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.width = width / parentWidth;\n    this.height = height / parentHeight;\n    this.fixAndSetPosition();\n\n    if (this.#disableEditing) {\n      this.#setScaleFactor(width, height);\n    }\n\n    this.#setCanvasDims();\n    this.#redraw();\n\n    this.canvas.style.visibility = \"visible\";\n\n    // For any reason the dimensions couldn't be in percent but in pixels, hence\n    // we must fix them.\n    this.fixDims();\n  }\n\n  #setScaleFactor(width, height) {\n    const padding = this.#getPadding();\n    const scaleFactorW = (width - padding) / this.#baseWidth;\n    const scaleFactorH = (height - padding) / this.#baseHeight;\n    this.scaleFactor = Math.min(scaleFactorW, scaleFactorH);\n  }\n\n  /**\n   * Update the canvas transform.\n   */\n  #updateTransform() {\n    const padding = this.#getPadding() / 2;\n    this.ctx.setTransform(\n      this.scaleFactor,\n      0,\n      0,\n      this.scaleFactor,\n      this.translationX * this.scaleFactor + padding,\n      this.translationY * this.scaleFactor + padding\n    );\n  }\n\n  /**\n   * Convert into a Path2D.\n   * @param {Array<Array<number>>} bezier\n   * @returns {Path2D}\n   */\n  static #buildPath2D(bezier) {\n    const path2D = new Path2D();\n    for (let i = 0, ii = bezier.length; i < ii; i++) {\n      const [first, control1, control2, second] = bezier[i];\n      if (i === 0) {\n        path2D.moveTo(...first);\n      }\n      path2D.bezierCurveTo(\n        control1[0],\n        control1[1],\n        control2[0],\n        control2[1],\n        second[0],\n        second[1]\n      );\n    }\n    return path2D;\n  }\n\n  static #toPDFCoordinates(points, rect, rotation) {\n    const [blX, blY, trX, trY] = rect;\n\n    switch (rotation) {\n      case 0:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          points[i] += blX;\n          points[i + 1] = trY - points[i + 1];\n        }\n        break;\n      case 90:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          const x = points[i];\n          points[i] = points[i + 1] + blX;\n          points[i + 1] = x + blY;\n        }\n        break;\n      case 180:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          points[i] = trX - points[i];\n          points[i + 1] += blY;\n        }\n        break;\n      case 270:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          const x = points[i];\n          points[i] = trX - points[i + 1];\n          points[i + 1] = trY - x;\n        }\n        break;\n      default:\n        throw new Error(\"Invalid rotation\");\n    }\n    return points;\n  }\n\n  static #fromPDFCoordinates(points, rect, rotation) {\n    const [blX, blY, trX, trY] = rect;\n\n    switch (rotation) {\n      case 0:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          points[i] -= blX;\n          points[i + 1] = trY - points[i + 1];\n        }\n        break;\n      case 90:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          const x = points[i];\n          points[i] = points[i + 1] - blY;\n          points[i + 1] = x - blX;\n        }\n        break;\n      case 180:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          points[i] = trX - points[i];\n          points[i + 1] -= blY;\n        }\n        break;\n      case 270:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          const x = points[i];\n          points[i] = trY - points[i + 1];\n          points[i + 1] = trX - x;\n        }\n        break;\n      default:\n        throw new Error(\"Invalid rotation\");\n    }\n    return points;\n  }\n\n  /**\n   * Transform and serialize the paths.\n   * @param {number} s - scale factor\n   * @param {number} tx - abscissa of the translation\n   * @param {number} ty - ordinate of the translation\n   * @param {Array<number>} rect - the bounding box of the annotation\n   */\n  #serializePaths(s, tx, ty, rect) {\n    const paths = [];\n    const padding = this.thickness / 2;\n    const shiftX = s * tx + padding;\n    const shiftY = s * ty + padding;\n    for (const bezier of this.paths) {\n      const buffer = [];\n      const points = [];\n      for (let j = 0, jj = bezier.length; j < jj; j++) {\n        const [first, control1, control2, second] = bezier[j];\n        const p10 = s * first[0] + shiftX;\n        const p11 = s * first[1] + shiftY;\n        const p20 = s * control1[0] + shiftX;\n        const p21 = s * control1[1] + shiftY;\n        const p30 = s * control2[0] + shiftX;\n        const p31 = s * control2[1] + shiftY;\n        const p40 = s * second[0] + shiftX;\n        const p41 = s * second[1] + shiftY;\n\n        if (j === 0) {\n          buffer.push(p10, p11);\n          points.push(p10, p11);\n        }\n        buffer.push(p20, p21, p30, p31, p40, p41);\n        points.push(p20, p21);\n        if (j === jj - 1) {\n          points.push(p40, p41);\n        }\n      }\n      paths.push({\n        bezier: InkEditor.#toPDFCoordinates(buffer, rect, this.rotation),\n        points: InkEditor.#toPDFCoordinates(points, rect, this.rotation),\n      });\n    }\n\n    return paths;\n  }\n\n  /**\n   * Get the bounding box containing all the paths.\n   * @returns {Array<number>}\n   */\n  #getBbox() {\n    let xMin = Infinity;\n    let xMax = -Infinity;\n    let yMin = Infinity;\n    let yMax = -Infinity;\n\n    for (const path of this.paths) {\n      for (const [first, control1, control2, second] of path) {\n        const bbox = Util.bezierBoundingBox(\n          ...first,\n          ...control1,\n          ...control2,\n          ...second\n        );\n        xMin = Math.min(xMin, bbox[0]);\n        yMin = Math.min(yMin, bbox[1]);\n        xMax = Math.max(xMax, bbox[2]);\n        yMax = Math.max(yMax, bbox[3]);\n      }\n    }\n\n    return [xMin, yMin, xMax, yMax];\n  }\n\n  /**\n   * The bounding box is computed with null thickness, so we must take\n   * it into account for the display.\n   * It corresponds to the total padding, hence it should be divided by 2\n   * in order to have left/right paddings.\n   * @returns {number}\n   */\n  #getPadding() {\n    return this.#disableEditing\n      ? Math.ceil(this.thickness * this.parentScale)\n      : 0;\n  }\n\n  /**\n   * Set the div position and dimensions in order to fit to\n   * the bounding box of the contents.\n   * @returns {undefined}\n   */\n  #fitToContent(firstTime = false) {\n    if (this.isEmpty()) {\n      return;\n    }\n\n    if (!this.#disableEditing) {\n      this.#redraw();\n      return;\n    }\n\n    const bbox = this.#getBbox();\n    const padding = this.#getPadding();\n    this.#baseWidth = Math.max(AnnotationEditor.MIN_SIZE, bbox[2] - bbox[0]);\n    this.#baseHeight = Math.max(AnnotationEditor.MIN_SIZE, bbox[3] - bbox[1]);\n\n    const width = Math.ceil(padding + this.#baseWidth * this.scaleFactor);\n    const height = Math.ceil(padding + this.#baseHeight * this.scaleFactor);\n\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.width = width / parentWidth;\n    this.height = height / parentHeight;\n\n    this.setAspectRatio(width, height);\n\n    const prevTranslationX = this.translationX;\n    const prevTranslationY = this.translationY;\n\n    this.translationX = -bbox[0];\n    this.translationY = -bbox[1];\n    this.#setCanvasDims();\n    this.#redraw();\n\n    this.#realWidth = width;\n    this.#realHeight = height;\n\n    this.setDims(width, height);\n    const unscaledPadding = firstTime ? padding / this.scaleFactor / 2 : 0;\n    this.translate(\n      prevTranslationX - this.translationX - unscaledPadding,\n      prevTranslationY - this.translationY - unscaledPadding\n    );\n  }\n\n  /** @inheritdoc */\n  static deserialize(data, parent, uiManager) {\n    if (data instanceof InkAnnotationElement) {\n      return null;\n    }\n    const editor = super.deserialize(data, parent, uiManager);\n\n    editor.thickness = data.thickness;\n    editor.color = Util.makeHexColor(...data.color);\n    editor.opacity = data.opacity;\n\n    const [pageWidth, pageHeight] = editor.pageDimensions;\n    const width = editor.width * pageWidth;\n    const height = editor.height * pageHeight;\n    const scaleFactor = editor.parentScale;\n    const padding = data.thickness / 2;\n\n    editor.#disableEditing = true;\n    editor.#realWidth = Math.round(width);\n    editor.#realHeight = Math.round(height);\n\n    const { paths, rect, rotation } = data;\n\n    for (let { bezier } of paths) {\n      bezier = InkEditor.#fromPDFCoordinates(bezier, rect, rotation);\n      const path = [];\n      editor.paths.push(path);\n      let p0 = scaleFactor * (bezier[0] - padding);\n      let p1 = scaleFactor * (bezier[1] - padding);\n      for (let i = 2, ii = bezier.length; i < ii; i += 6) {\n        const p10 = scaleFactor * (bezier[i] - padding);\n        const p11 = scaleFactor * (bezier[i + 1] - padding);\n        const p20 = scaleFactor * (bezier[i + 2] - padding);\n        const p21 = scaleFactor * (bezier[i + 3] - padding);\n        const p30 = scaleFactor * (bezier[i + 4] - padding);\n        const p31 = scaleFactor * (bezier[i + 5] - padding);\n        path.push([\n          [p0, p1],\n          [p10, p11],\n          [p20, p21],\n          [p30, p31],\n        ]);\n        p0 = p30;\n        p1 = p31;\n      }\n      const path2D = this.#buildPath2D(path);\n      editor.bezierPath2D.push(path2D);\n    }\n\n    const bbox = editor.#getBbox();\n    editor.#baseWidth = Math.max(AnnotationEditor.MIN_SIZE, bbox[2] - bbox[0]);\n    editor.#baseHeight = Math.max(AnnotationEditor.MIN_SIZE, bbox[3] - bbox[1]);\n    editor.#setScaleFactor(width, height);\n\n    return editor;\n  }\n\n  /** @inheritdoc */\n  serialize() {\n    if (this.isEmpty()) {\n      return null;\n    }\n\n    const rect = this.getRect(0, 0);\n    const color = AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);\n\n    return {\n      annotationType: AnnotationEditorType.INK,\n      color,\n      thickness: this.thickness,\n      opacity: this.opacity,\n      paths: this.#serializePaths(\n        this.scaleFactor / this.parentScale,\n        this.translationX,\n        this.translationY,\n        rect\n      ),\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.rotation,\n      structTreeParentId: this._structTreeParentId,\n    };\n  }\n}\n\nexport { InkEditor };\n","/* Copyright 2022 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AnnotationEditorType, shadow } from \"../../shared/util.js\";\nimport { AnnotationEditor } from \"./editor.js\";\nimport { PixelsPerInch } from \"../display_utils.js\";\nimport { StampAnnotationElement } from \"../annotation_layer.js\";\n\n/**\n * Basic text editor in order to create a FreeTex annotation.\n */\nclass StampEditor extends AnnotationEditor {\n  #bitmap = null;\n\n  #bitmapId = null;\n\n  #bitmapPromise = null;\n\n  #bitmapUrl = null;\n\n  #bitmapFile = null;\n\n  #bitmapFileName = \"\";\n\n  #canvas = null;\n\n  #observer = null;\n\n  #resizeTimeoutId = null;\n\n  #isSvg = false;\n\n  #hasBeenAddedInUndoStack = false;\n\n  static _type = \"stamp\";\n\n  static _editorType = AnnotationEditorType.STAMP;\n\n  constructor(params) {\n    super({ ...params, name: \"stampEditor\" });\n    this.#bitmapUrl = params.bitmapUrl;\n    this.#bitmapFile = params.bitmapFile;\n  }\n\n  /** @inheritdoc */\n  static initialize(l10n) {\n    AnnotationEditor.initialize(l10n);\n  }\n\n  static get supportedTypes() {\n    // See https://developer.mozilla.org/en-US/docs/Web/Media/Formats/Image_types\n    // to know which types are supported by the browser.\n    const types = [\n      \"apng\",\n      \"avif\",\n      \"bmp\",\n      \"gif\",\n      \"jpeg\",\n      \"png\",\n      \"svg+xml\",\n      \"webp\",\n      \"x-icon\",\n    ];\n    return shadow(\n      this,\n      \"supportedTypes\",\n      types.map(type => `image/${type}`)\n    );\n  }\n\n  static get supportedTypesStr() {\n    return shadow(this, \"supportedTypesStr\", this.supportedTypes.join(\",\"));\n  }\n\n  /** @inheritdoc */\n  static isHandlingMimeForPasting(mime) {\n    return this.supportedTypes.includes(mime);\n  }\n\n  /** @inheritdoc */\n  static paste(item, parent) {\n    parent.pasteEditor(AnnotationEditorType.STAMP, {\n      bitmapFile: item.getAsFile(),\n    });\n  }\n\n  #getBitmapFetched(data, fromId = false) {\n    if (!data) {\n      this.remove();\n      return;\n    }\n    this.#bitmap = data.bitmap;\n    if (!fromId) {\n      this.#bitmapId = data.id;\n      this.#isSvg = data.isSvg;\n    }\n    if (data.file) {\n      this.#bitmapFileName = data.file.name;\n    }\n    this.#createCanvas();\n  }\n\n  #getBitmapDone() {\n    this.#bitmapPromise = null;\n    this._uiManager.enableWaiting(false);\n    if (this.#canvas) {\n      this.div.focus();\n    }\n  }\n\n  #getBitmap() {\n    if (this.#bitmapId) {\n      this._uiManager.enableWaiting(true);\n      this._uiManager.imageManager\n        .getFromId(this.#bitmapId)\n        .then(data => this.#getBitmapFetched(data, /* fromId = */ true))\n        .finally(() => this.#getBitmapDone());\n      return;\n    }\n\n    if (this.#bitmapUrl) {\n      const url = this.#bitmapUrl;\n      this.#bitmapUrl = null;\n      this._uiManager.enableWaiting(true);\n      this.#bitmapPromise = this._uiManager.imageManager\n        .getFromUrl(url)\n        .then(data => this.#getBitmapFetched(data))\n        .finally(() => this.#getBitmapDone());\n      return;\n    }\n\n    if (this.#bitmapFile) {\n      const file = this.#bitmapFile;\n      this.#bitmapFile = null;\n      this._uiManager.enableWaiting(true);\n      this.#bitmapPromise = this._uiManager.imageManager\n        .getFromFile(file)\n        .then(data => this.#getBitmapFetched(data))\n        .finally(() => this.#getBitmapDone());\n      return;\n    }\n\n    const input = document.createElement(\"input\");\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"TESTING\")) {\n      input.hidden = true;\n      input.id = \"stampEditorFileInput\";\n      document.body.append(input);\n    }\n    input.type = \"file\";\n    input.accept = StampEditor.supportedTypesStr;\n    this.#bitmapPromise = new Promise(resolve => {\n      input.addEventListener(\"change\", async () => {\n        if (!input.files || input.files.length === 0) {\n          this.remove();\n        } else {\n          this._uiManager.enableWaiting(true);\n          const data = await this._uiManager.imageManager.getFromFile(\n            input.files[0]\n          );\n          this.#getBitmapFetched(data);\n        }\n        if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"TESTING\")) {\n          input.remove();\n        }\n        resolve();\n      });\n      input.addEventListener(\"cancel\", () => {\n        this.remove();\n        resolve();\n      });\n    }).finally(() => this.#getBitmapDone());\n    if (typeof PDFJSDev === \"undefined\" || !PDFJSDev.test(\"TESTING\")) {\n      input.click();\n    }\n  }\n\n  /** @inheritdoc */\n  remove() {\n    if (this.#bitmapId) {\n      this.#bitmap = null;\n      this._uiManager.imageManager.deleteId(this.#bitmapId);\n      this.#canvas?.remove();\n      this.#canvas = null;\n      this.#observer?.disconnect();\n      this.#observer = null;\n      if (this.#resizeTimeoutId) {\n        clearTimeout(this.#resizeTimeoutId);\n        this.#resizeTimeoutId = null;\n      }\n    }\n    super.remove();\n  }\n\n  /** @inheritdoc */\n  rebuild() {\n    if (!this.parent) {\n      // It's possible to have to rebuild an editor which is not on a visible\n      // page.\n      if (this.#bitmapId) {\n        this.#getBitmap();\n      }\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n\n    if (this.#bitmapId) {\n      this.#getBitmap();\n    }\n\n    if (!this.isAttachedToDOM) {\n      // At some point this editor was removed and we're rebuilting it,\n      // hence we must add it to its parent.\n      this.parent.add(this);\n    }\n  }\n\n  /** @inheritdoc */\n  onceAdded() {\n    this._isDraggable = true;\n    this.div.focus();\n  }\n\n  /** @inheritdoc */\n  isEmpty() {\n    return !(\n      this.#bitmapPromise ||\n      this.#bitmap ||\n      this.#bitmapUrl ||\n      this.#bitmapFile\n    );\n  }\n\n  /** @inheritdoc */\n  get isResizable() {\n    return true;\n  }\n\n  /** @inheritdoc */\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n\n    let baseX, baseY;\n    if (this.width) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n\n    super.render();\n    this.div.hidden = true;\n\n    if (this.#bitmap) {\n      this.#createCanvas();\n    } else {\n      this.#getBitmap();\n    }\n\n    if (this.width) {\n      // This editor was created in using copy (ctrl+c).\n      const [parentWidth, parentHeight] = this.parentDimensions;\n      this.setAt(\n        baseX * parentWidth,\n        baseY * parentHeight,\n        this.width * parentWidth,\n        this.height * parentHeight\n      );\n    }\n\n    return this.div;\n  }\n\n  #createCanvas() {\n    const { div } = this;\n    let { width, height } = this.#bitmap;\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const MAX_RATIO = 0.75;\n    if (this.width) {\n      width = this.width * pageWidth;\n      height = this.height * pageHeight;\n    } else if (\n      width > MAX_RATIO * pageWidth ||\n      height > MAX_RATIO * pageHeight\n    ) {\n      // If the the image is too big compared to the page dimensions\n      // (more than MAX_RATIO) then we scale it down.\n      const factor = Math.min(\n        (MAX_RATIO * pageWidth) / width,\n        (MAX_RATIO * pageHeight) / height\n      );\n      width *= factor;\n      height *= factor;\n    }\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(\n      (width * parentWidth) / pageWidth,\n      (height * parentHeight) / pageHeight\n    );\n\n    this._uiManager.enableWaiting(false);\n    const canvas = (this.#canvas = document.createElement(\"canvas\"));\n    div.append(canvas);\n    div.hidden = false;\n    this.#drawBitmap(width, height);\n    this.#createObserver();\n    if (!this.#hasBeenAddedInUndoStack) {\n      this.parent.addUndoableEditor(this);\n      this.#hasBeenAddedInUndoStack = true;\n    }\n\n    // There are multiple ways to add an image to the page, so here we just\n    // count the number of times an image is added to the page whatever the way\n    // is.\n    this._uiManager._eventBus.dispatch(\"reporttelemetry\", {\n      source: this,\n      details: {\n        type: \"editing\",\n        subtype: this.editorType,\n        data: {\n          action: \"inserted_image\",\n        },\n      },\n    });\n    this.addAltTextButton();\n    if (this.#bitmapFileName) {\n      canvas.setAttribute(\"aria-label\", this.#bitmapFileName);\n    }\n  }\n\n  /**\n   * When the dimensions of the div change the inner canvas must\n   * renew its dimensions, hence it must redraw its own contents.\n   * @param {number} width - the new width of the div\n   * @param {number} height - the new height of the div\n   * @returns\n   */\n  #setDimensions(width, height) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.width = width / parentWidth;\n    this.height = height / parentHeight;\n    this.setDims(width, height);\n    if (this._initialOptions?.isCentered) {\n      this.center();\n    } else {\n      this.fixAndSetPosition();\n    }\n    this._initialOptions = null;\n    if (this.#resizeTimeoutId !== null) {\n      clearTimeout(this.#resizeTimeoutId);\n    }\n    // When the user is resizing the editor we just use CSS to scale the image\n    // to avoid redrawing it too often.\n    // And once the user stops resizing the editor we redraw the image in\n    // rescaling it correctly (see this.#scaleBitmap).\n    const TIME_TO_WAIT = 200;\n    this.#resizeTimeoutId = setTimeout(() => {\n      this.#resizeTimeoutId = null;\n      this.#drawBitmap(width, height);\n    }, TIME_TO_WAIT);\n  }\n\n  #scaleBitmap(width, height) {\n    const { width: bitmapWidth, height: bitmapHeight } = this.#bitmap;\n\n    let newWidth = bitmapWidth;\n    let newHeight = bitmapHeight;\n    let bitmap = this.#bitmap;\n    while (newWidth > 2 * width || newHeight > 2 * height) {\n      const prevWidth = newWidth;\n      const prevHeight = newHeight;\n\n      if (newWidth > 2 * width) {\n        // See bug 1820511 (Windows specific bug).\n        // TODO: once the above bug is fixed we could revert to:\n        // newWidth = Math.ceil(newWidth / 2);\n        newWidth =\n          newWidth >= 16384\n            ? Math.floor(newWidth / 2) - 1\n            : Math.ceil(newWidth / 2);\n      }\n      if (newHeight > 2 * height) {\n        newHeight =\n          newHeight >= 16384\n            ? Math.floor(newHeight / 2) - 1\n            : Math.ceil(newHeight / 2);\n      }\n\n      const offscreen = new OffscreenCanvas(newWidth, newHeight);\n      const ctx = offscreen.getContext(\"2d\");\n      ctx.drawImage(\n        bitmap,\n        0,\n        0,\n        prevWidth,\n        prevHeight,\n        0,\n        0,\n        newWidth,\n        newHeight\n      );\n      bitmap = offscreen.transferToImageBitmap();\n    }\n\n    return bitmap;\n  }\n\n  #drawBitmap(width, height) {\n    width = Math.ceil(width);\n    height = Math.ceil(height);\n    const canvas = this.#canvas;\n    if (!canvas || (canvas.width === width && canvas.height === height)) {\n      return;\n    }\n    canvas.width = width;\n    canvas.height = height;\n    const bitmap = this.#isSvg\n      ? this.#bitmap\n      : this.#scaleBitmap(width, height);\n    const ctx = canvas.getContext(\"2d\");\n    ctx.filter = this._uiManager.hcmFilter;\n    ctx.drawImage(\n      bitmap,\n      0,\n      0,\n      bitmap.width,\n      bitmap.height,\n      0,\n      0,\n      width,\n      height\n    );\n  }\n\n  /** @inheritdoc */\n  getImageForAltText() {\n    return this.#canvas;\n  }\n\n  #serializeBitmap(toUrl) {\n    if (toUrl) {\n      if (this.#isSvg) {\n        const url = this._uiManager.imageManager.getSvgUrl(this.#bitmapId);\n        if (url) {\n          return url;\n        }\n      }\n      // We convert to a data url because it's sync and the url can live in the\n      // clipboard.\n      const canvas = document.createElement(\"canvas\");\n      ({ width: canvas.width, height: canvas.height } = this.#bitmap);\n      const ctx = canvas.getContext(\"2d\");\n      ctx.drawImage(this.#bitmap, 0, 0);\n\n      return canvas.toDataURL();\n    }\n\n    if (this.#isSvg) {\n      const [pageWidth, pageHeight] = this.pageDimensions;\n      // Multiply by PixelsPerInch.PDF_TO_CSS_UNITS in order to increase the\n      // image resolution when rasterizing it.\n      const width = Math.round(\n        this.width * pageWidth * PixelsPerInch.PDF_TO_CSS_UNITS\n      );\n      const height = Math.round(\n        this.height * pageHeight * PixelsPerInch.PDF_TO_CSS_UNITS\n      );\n      const offscreen = new OffscreenCanvas(width, height);\n      const ctx = offscreen.getContext(\"2d\");\n      ctx.drawImage(\n        this.#bitmap,\n        0,\n        0,\n        this.#bitmap.width,\n        this.#bitmap.height,\n        0,\n        0,\n        width,\n        height\n      );\n      return offscreen.transferToImageBitmap();\n    }\n\n    return structuredClone(this.#bitmap);\n  }\n\n  /**\n   * Create the resize observer.\n   */\n  #createObserver() {\n    this.#observer = new ResizeObserver(entries => {\n      const rect = entries[0].contentRect;\n      if (rect.width && rect.height) {\n        this.#setDimensions(rect.width, rect.height);\n      }\n    });\n    this.#observer.observe(this.div);\n  }\n\n  /** @inheritdoc */\n  static deserialize(data, parent, uiManager) {\n    if (data instanceof StampAnnotationElement) {\n      return null;\n    }\n    const editor = super.deserialize(data, parent, uiManager);\n    const { rect, bitmapUrl, bitmapId, isSvg, accessibilityData } = data;\n    if (bitmapId && uiManager.imageManager.isValidId(bitmapId)) {\n      editor.#bitmapId = bitmapId;\n    } else {\n      editor.#bitmapUrl = bitmapUrl;\n    }\n    editor.#isSvg = isSvg;\n\n    const [parentWidth, parentHeight] = editor.pageDimensions;\n    editor.width = (rect[2] - rect[0]) / parentWidth;\n    editor.height = (rect[3] - rect[1]) / parentHeight;\n\n    if (accessibilityData) {\n      editor.altTextData = accessibilityData;\n    }\n\n    return editor;\n  }\n\n  /** @inheritdoc */\n  serialize(isForCopying = false, context = null) {\n    if (this.isEmpty()) {\n      return null;\n    }\n\n    const serialized = {\n      annotationType: AnnotationEditorType.STAMP,\n      bitmapId: this.#bitmapId,\n      pageIndex: this.pageIndex,\n      rect: this.getRect(0, 0),\n      rotation: this.rotation,\n      isSvg: this.#isSvg,\n      structTreeParentId: this._structTreeParentId,\n    };\n\n    if (isForCopying) {\n      // We don't know what's the final destination (this pdf or another one)\n      // of this annotation and the clipboard doesn't support ImageBitmaps,\n      // hence we serialize the bitmap to a data url.\n      serialized.bitmapUrl = this.#serializeBitmap(/* toUrl = */ true);\n      serialized.accessibilityData = this.altTextData;\n      return serialized;\n    }\n\n    const { decorative, altText } = this.altTextData;\n    if (!decorative && altText) {\n      serialized.accessibilityData = { type: \"Figure\", alt: altText };\n    }\n\n    if (context === null) {\n      return serialized;\n    }\n\n    context.stamps ||= new Map();\n    const area = this.#isSvg\n      ? (serialized.rect[2] - serialized.rect[0]) *\n        (serialized.rect[3] - serialized.rect[1])\n      : null;\n    if (!context.stamps.has(this.#bitmapId)) {\n      // We don't want to have multiple copies of the same bitmap in the\n      // annotationMap, hence we only add the bitmap the first time we meet it.\n      context.stamps.set(this.#bitmapId, { area, serialized });\n      serialized.bitmap = this.#serializeBitmap(/* toUrl = */ false);\n    } else if (this.#isSvg) {\n      // If we have multiple copies of the same svg but with different sizes,\n      // then we want to keep the biggest one.\n      const prevData = context.stamps.get(this.#bitmapId);\n      if (area > prevData.area) {\n        prevData.area = area;\n        prevData.serialized.bitmap.close();\n        prevData.serialized.bitmap = this.#serializeBitmap(/* toUrl = */ false);\n      }\n    }\n    return serialized;\n  }\n}\n\nexport { StampEditor };\n","/* Copyright 2022 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./tools.js\").AnnotationEditorUIManager} AnnotationEditorUIManager */\n/** @typedef {import(\"../display_utils.js\").PageViewport} PageViewport */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"../../../web/text_accessibility.js\").TextAccessibilityManager} TextAccessibilityManager */\n/** @typedef {import(\"../../../web/interfaces\").IL10n} IL10n */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"../annotation_layer.js\").AnnotationLayer} AnnotationLayer */\n/** @typedef {import(\"../draw_layer.js\").DrawLayer} DrawLayer */\n\nimport { AnnotationEditorType, FeatureTest } from \"../../shared/util.js\";\nimport { AnnotationEditor } from \"./editor.js\";\nimport { FreeTextEditor } from \"./freetext.js\";\nimport { HighlightEditor } from \"./highlight.js\";\nimport { InkEditor } from \"./ink.js\";\nimport { setLayerDimensions } from \"../display_utils.js\";\nimport { StampEditor } from \"./stamp.js\";\n\n/**\n * @typedef {Object} AnnotationEditorLayerOptions\n * @property {Object} mode\n * @property {HTMLDivElement} div\n * @property {AnnotationEditorUIManager} uiManager\n * @property {boolean} enabled\n * @property {TextAccessibilityManager} [accessibilityManager]\n * @property {number} pageIndex\n * @property {IL10n} l10n\n * @property {AnnotationLayer} [annotationLayer]\n * @property {HTMLDivElement} [textLayer]\n * @property {DrawLayer} drawLayer\n * @property {PageViewport} viewport\n */\n\n/**\n * @typedef {Object} RenderEditorLayerOptions\n * @property {PageViewport} viewport\n */\n\n/**\n * Manage all the different editors on a page.\n */\nclass AnnotationEditorLayer {\n  #accessibilityManager;\n\n  #allowClick = false;\n\n  #annotationLayer = null;\n\n  #boundPointerup = this.pointerup.bind(this);\n\n  #boundPointerUpAfterSelection = this.pointerUpAfterSelection.bind(this);\n\n  #boundPointerdown = this.pointerdown.bind(this);\n\n  #editorFocusTimeoutId = null;\n\n  #boundSelectionStart = this.selectionStart.bind(this);\n\n  #editors = new Map();\n\n  #hadPointerDown = false;\n\n  #isCleaningUp = false;\n\n  #isDisabling = false;\n\n  #textLayer = null;\n\n  #uiManager;\n\n  static _initialized = false;\n\n  static #editorTypes = new Map(\n    [FreeTextEditor, InkEditor, StampEditor, HighlightEditor].map(type => [\n      type._editorType,\n      type,\n    ])\n  );\n\n  /**\n   * @param {AnnotationEditorLayerOptions} options\n   */\n  constructor({\n    uiManager,\n    pageIndex,\n    div,\n    accessibilityManager,\n    annotationLayer,\n    drawLayer,\n    textLayer,\n    viewport,\n    l10n,\n  }) {\n    const editorTypes = [...AnnotationEditorLayer.#editorTypes.values()];\n    if (!AnnotationEditorLayer._initialized) {\n      AnnotationEditorLayer._initialized = true;\n      for (const editorType of editorTypes) {\n        editorType.initialize(l10n);\n      }\n    }\n    uiManager.registerEditorTypes(editorTypes);\n\n    this.#uiManager = uiManager;\n    this.pageIndex = pageIndex;\n    this.div = div;\n    this.#accessibilityManager = accessibilityManager;\n    this.#annotationLayer = annotationLayer;\n    this.viewport = viewport;\n    this.#textLayer = textLayer;\n    this.drawLayer = drawLayer;\n\n    this.#uiManager.addLayer(this);\n  }\n\n  get isEmpty() {\n    return this.#editors.size === 0;\n  }\n\n  /**\n   * Update the toolbar if it's required to reflect the tool currently used.\n   * @param {number} mode\n   */\n  updateToolbar(mode) {\n    this.#uiManager.updateToolbar(mode);\n  }\n\n  /**\n   * The mode has changed: it must be updated.\n   * @param {number} mode\n   */\n  updateMode(mode = this.#uiManager.getMode()) {\n    this.#cleanup();\n    switch (mode) {\n      case AnnotationEditorType.NONE:\n        this.disableTextSelection();\n        this.togglePointerEvents(false);\n        this.disableClick();\n        break;\n      case AnnotationEditorType.INK:\n        // We always want to have an ink editor ready to draw in.\n        this.addInkEditorIfNeeded(false);\n\n        this.disableTextSelection();\n        this.togglePointerEvents(true);\n        this.disableClick();\n        break;\n      case AnnotationEditorType.HIGHLIGHT:\n        this.enableTextSelection();\n        this.togglePointerEvents(false);\n        this.disableClick();\n        break;\n      default:\n        this.disableTextSelection();\n        this.togglePointerEvents(true);\n        this.enableClick();\n    }\n\n    if (mode !== AnnotationEditorType.NONE) {\n      const { classList } = this.div;\n      for (const editorType of AnnotationEditorLayer.#editorTypes.values()) {\n        classList.toggle(\n          `${editorType._type}Editing`,\n          mode === editorType._editorType\n        );\n      }\n      this.div.hidden = false;\n    }\n  }\n\n  addInkEditorIfNeeded(isCommitting) {\n    if (this.#uiManager.getMode() !== AnnotationEditorType.INK) {\n      // We don't want to add an ink editor if we're not in ink mode!\n      return;\n    }\n\n    if (!isCommitting) {\n      // We're removing an editor but an empty one can already exist so in this\n      // case we don't need to create a new one.\n      for (const editor of this.#editors.values()) {\n        if (editor.isEmpty()) {\n          editor.setInBackground();\n          return;\n        }\n      }\n    }\n\n    const editor = this.#createAndAddNewEditor(\n      { offsetX: 0, offsetY: 0 },\n      /* isCentered = */ false\n    );\n    editor.setInBackground();\n  }\n\n  /**\n   * Set the editing state.\n   * @param {boolean} isEditing\n   */\n  setEditingState(isEditing) {\n    this.#uiManager.setEditingState(isEditing);\n  }\n\n  /**\n   * Add some commands into the CommandManager (undo/redo stuff).\n   * @param {Object} params\n   */\n  addCommands(params) {\n    this.#uiManager.addCommands(params);\n  }\n\n  togglePointerEvents(enabled = false) {\n    this.div.classList.toggle(\"disabled\", !enabled);\n  }\n\n  /**\n   * Enable pointer events on the main div in order to enable\n   * editor creation.\n   */\n  enable() {\n    this.togglePointerEvents(true);\n    const annotationElementIds = new Set();\n    for (const editor of this.#editors.values()) {\n      editor.enableEditing();\n      if (editor.annotationElementId) {\n        annotationElementIds.add(editor.annotationElementId);\n      }\n    }\n\n    if (!this.#annotationLayer) {\n      return;\n    }\n\n    const editables = this.#annotationLayer.getEditableAnnotations();\n    for (const editable of editables) {\n      // The element must be hidden whatever its state is.\n      editable.hide();\n      if (this.#uiManager.isDeletedAnnotationElement(editable.data.id)) {\n        continue;\n      }\n      if (annotationElementIds.has(editable.data.id)) {\n        continue;\n      }\n      const editor = this.deserialize(editable);\n      if (!editor) {\n        continue;\n      }\n      this.addOrRebuild(editor);\n      editor.enableEditing();\n    }\n  }\n\n  /**\n   * Disable editor creation.\n   */\n  disable() {\n    this.#isDisabling = true;\n    this.togglePointerEvents(false);\n    const hiddenAnnotationIds = new Set();\n    for (const editor of this.#editors.values()) {\n      editor.disableEditing();\n      if (!editor.annotationElementId || editor.serialize() !== null) {\n        hiddenAnnotationIds.add(editor.annotationElementId);\n        continue;\n      }\n      this.getEditableAnnotation(editor.annotationElementId)?.show();\n      editor.remove();\n    }\n\n    if (this.#annotationLayer) {\n      // Show the annotations that were hidden in enable().\n      const editables = this.#annotationLayer.getEditableAnnotations();\n      for (const editable of editables) {\n        const { id } = editable.data;\n        if (\n          hiddenAnnotationIds.has(id) ||\n          this.#uiManager.isDeletedAnnotationElement(id)\n        ) {\n          continue;\n        }\n        editable.show();\n      }\n    }\n\n    this.#cleanup();\n    if (this.isEmpty) {\n      this.div.hidden = true;\n    }\n    const { classList } = this.div;\n    for (const editorType of AnnotationEditorLayer.#editorTypes.values()) {\n      classList.remove(`${editorType._type}Editing`);\n    }\n    this.disableTextSelection();\n\n    this.#isDisabling = false;\n  }\n\n  getEditableAnnotation(id) {\n    return this.#annotationLayer?.getEditableAnnotation(id) || null;\n  }\n\n  /**\n   * Set the current editor.\n   * @param {AnnotationEditor} editor\n   */\n  setActiveEditor(editor) {\n    const currentActive = this.#uiManager.getActive();\n    if (currentActive === editor) {\n      return;\n    }\n\n    this.#uiManager.setActiveEditor(editor);\n  }\n\n  enableTextSelection() {\n    if (this.#textLayer?.div) {\n      document.addEventListener(\"selectstart\", this.#boundSelectionStart);\n    }\n  }\n\n  disableTextSelection() {\n    if (this.#textLayer?.div) {\n      document.removeEventListener(\"selectstart\", this.#boundSelectionStart);\n    }\n  }\n\n  enableClick() {\n    this.div.addEventListener(\"pointerdown\", this.#boundPointerdown);\n    this.div.addEventListener(\"pointerup\", this.#boundPointerup);\n  }\n\n  disableClick() {\n    this.div.removeEventListener(\"pointerdown\", this.#boundPointerdown);\n    this.div.removeEventListener(\"pointerup\", this.#boundPointerup);\n  }\n\n  attach(editor) {\n    this.#editors.set(editor.id, editor);\n    const { annotationElementId } = editor;\n    if (\n      annotationElementId &&\n      this.#uiManager.isDeletedAnnotationElement(annotationElementId)\n    ) {\n      this.#uiManager.removeDeletedAnnotationElement(editor);\n    }\n  }\n\n  detach(editor) {\n    this.#editors.delete(editor.id);\n    this.#accessibilityManager?.removePointerInTextLayer(editor.contentDiv);\n\n    if (!this.#isDisabling && editor.annotationElementId) {\n      this.#uiManager.addDeletedAnnotationElement(editor);\n    }\n  }\n\n  /**\n   * Remove an editor.\n   * @param {AnnotationEditor} editor\n   */\n  remove(editor) {\n    // Since we can undo a removal we need to keep the\n    // parent property as it is, so don't null it!\n\n    this.detach(editor);\n    this.#uiManager.removeEditor(editor);\n    editor.div.remove();\n    editor.isAttachedToDOM = false;\n\n    if (!this.#isCleaningUp) {\n      this.addInkEditorIfNeeded(/* isCommitting = */ false);\n    }\n  }\n\n  /**\n   * An editor can have a different parent, for example after having\n   * being dragged and droped from a page to another.\n   * @param {AnnotationEditor} editor\n   */\n  changeParent(editor) {\n    if (editor.parent === this) {\n      return;\n    }\n\n    if (editor.annotationElementId) {\n      this.#uiManager.addDeletedAnnotationElement(editor.annotationElementId);\n      AnnotationEditor.deleteAnnotationElement(editor);\n      editor.annotationElementId = null;\n    }\n\n    this.attach(editor);\n    editor.parent?.detach(editor);\n    editor.setParent(this);\n    if (editor.div && editor.isAttachedToDOM) {\n      editor.div.remove();\n      this.div.append(editor.div);\n    }\n  }\n\n  /**\n   * Add a new editor in the current view.\n   * @param {AnnotationEditor} editor\n   */\n  add(editor) {\n    this.changeParent(editor);\n    this.#uiManager.addEditor(editor);\n    this.attach(editor);\n\n    if (!editor.isAttachedToDOM) {\n      const div = editor.render();\n      this.div.append(div);\n      editor.isAttachedToDOM = true;\n    }\n\n    // The editor will be correctly moved into the DOM (see fixAndSetPosition).\n    editor.fixAndSetPosition();\n    editor.onceAdded();\n    this.#uiManager.addToAnnotationStorage(editor);\n  }\n\n  moveEditorInDOM(editor) {\n    if (!editor.isAttachedToDOM) {\n      return;\n    }\n\n    const { activeElement } = document;\n    if (editor.div.contains(activeElement) && !this.#editorFocusTimeoutId) {\n      // When the div is moved in the DOM the focus can move somewhere else,\n      // so we want to be sure that the focus will stay on the editor but we\n      // don't want to call any focus callbacks, hence we disable them and only\n      // re-enable them when the editor has the focus.\n      editor._focusEventsAllowed = false;\n      this.#editorFocusTimeoutId = setTimeout(() => {\n        this.#editorFocusTimeoutId = null;\n        if (!editor.div.contains(document.activeElement)) {\n          editor.div.addEventListener(\n            \"focusin\",\n            () => {\n              editor._focusEventsAllowed = true;\n            },\n            { once: true }\n          );\n          activeElement.focus();\n        } else {\n          editor._focusEventsAllowed = true;\n        }\n      }, 0);\n    }\n\n    editor._structTreeParentId = this.#accessibilityManager?.moveElementInDOM(\n      this.div,\n      editor.div,\n      editor.contentDiv,\n      /* isRemovable = */ true\n    );\n  }\n\n  /**\n   * Add or rebuild depending if it has been removed or not.\n   * @param {AnnotationEditor} editor\n   */\n  addOrRebuild(editor) {\n    if (editor.needsToBeRebuilt()) {\n      editor.parent ||= this;\n      editor.rebuild();\n    } else {\n      this.add(editor);\n    }\n  }\n\n  /**\n   * Add a new editor and make this addition undoable.\n   * @param {AnnotationEditor} editor\n   */\n  addUndoableEditor(editor) {\n    const cmd = () => editor._uiManager.rebuild(editor);\n    const undo = () => {\n      editor.remove();\n    };\n\n    this.addCommands({ cmd, undo, mustExec: false });\n  }\n\n  /**\n   * Get an id for an editor.\n   * @returns {string}\n   */\n  getNextId() {\n    return this.#uiManager.getId();\n  }\n\n  get #currentEditorType() {\n    return AnnotationEditorLayer.#editorTypes.get(this.#uiManager.getMode());\n  }\n\n  /**\n   * Create a new editor\n   * @param {Object} params\n   * @returns {AnnotationEditor}\n   */\n  #createNewEditor(params) {\n    const editorType = this.#currentEditorType;\n    return editorType ? new editorType.prototype.constructor(params) : null;\n  }\n\n  canCreateNewEmptyEditor() {\n    return this.#currentEditorType?.canCreateNewEmptyEditor();\n  }\n\n  /**\n   * Paste some content into a new editor.\n   * @param {number} mode\n   * @param {Object} params\n   */\n  pasteEditor(mode, params) {\n    this.#uiManager.updateToolbar(mode);\n    this.#uiManager.updateMode(mode);\n\n    const { offsetX, offsetY } = this.#getCenterPoint();\n    const id = this.getNextId();\n    const editor = this.#createNewEditor({\n      parent: this,\n      id,\n      x: offsetX,\n      y: offsetY,\n      uiManager: this.#uiManager,\n      isCentered: true,\n      ...params,\n    });\n    if (editor) {\n      this.add(editor);\n    }\n  }\n\n  /**\n   * Create a new editor\n   * @param {Object} data\n   * @returns {AnnotationEditor | null}\n   */\n  deserialize(data) {\n    return (\n      AnnotationEditorLayer.#editorTypes\n        .get(data.annotationType ?? data.annotationEditorType)\n        ?.deserialize(data, this, this.#uiManager) || null\n    );\n  }\n\n  /**\n   * Create and add a new editor.\n   * @param {PointerEvent} event\n   * @param {boolean} isCentered\n   * @param [Object] data\n   * @returns {AnnotationEditor}\n   */\n  #createAndAddNewEditor(event, isCentered, data = {}) {\n    const id = this.getNextId();\n    const editor = this.#createNewEditor({\n      parent: this,\n      id,\n      x: event.offsetX,\n      y: event.offsetY,\n      uiManager: this.#uiManager,\n      isCentered,\n      ...data,\n    });\n    if (editor) {\n      this.add(editor);\n    }\n\n    return editor;\n  }\n\n  #getCenterPoint() {\n    const { x, y, width, height } = this.div.getBoundingClientRect();\n    const tlX = Math.max(0, x);\n    const tlY = Math.max(0, y);\n    const brX = Math.min(window.innerWidth, x + width);\n    const brY = Math.min(window.innerHeight, y + height);\n    const centerX = (tlX + brX) / 2 - x;\n    const centerY = (tlY + brY) / 2 - y;\n    const [offsetX, offsetY] =\n      this.viewport.rotation % 180 === 0\n        ? [centerX, centerY]\n        : [centerY, centerX];\n\n    return { offsetX, offsetY };\n  }\n\n  /**\n   * Create and add a new editor.\n   */\n  addNewEditor() {\n    this.#createAndAddNewEditor(\n      this.#getCenterPoint(),\n      /* isCentered = */ true\n    );\n  }\n\n  /**\n   * Set the last selected editor.\n   * @param {AnnotationEditor} editor\n   */\n  setSelected(editor) {\n    this.#uiManager.setSelected(editor);\n  }\n\n  /**\n   * Add or remove an editor the current selection.\n   * @param {AnnotationEditor} editor\n   */\n  toggleSelected(editor) {\n    this.#uiManager.toggleSelected(editor);\n  }\n\n  /**\n   * Check if the editor is selected.\n   * @param {AnnotationEditor} editor\n   */\n  isSelected(editor) {\n    return this.#uiManager.isSelected(editor);\n  }\n\n  /**\n   * Unselect an editor.\n   * @param {AnnotationEditor} editor\n   */\n  unselect(editor) {\n    this.#uiManager.unselect(editor);\n  }\n\n  /**\n   * SelectionChange callback.\n   * @param {Event} _event\n   */\n  selectionStart(_event) {\n    this.#textLayer?.div.addEventListener(\n      \"pointerup\",\n      this.#boundPointerUpAfterSelection,\n      { once: true }\n    );\n  }\n\n  /**\n   * Called when the user releases the mouse button after having selected\n   * some text.\n   * @param {PointerEvent} event\n   */\n  pointerUpAfterSelection(event) {\n    const selection = document.getSelection();\n    if (selection.rangeCount === 0) {\n      return;\n    }\n    const range = selection.getRangeAt(0);\n    if (range.collapsed) {\n      return;\n    }\n\n    if (!this.#textLayer?.div.contains(range.commonAncestorContainer)) {\n      return;\n    }\n\n    const {\n      x: layerX,\n      y: layerY,\n      width: parentWidth,\n      height: parentHeight,\n    } = this.#textLayer.div.getBoundingClientRect();\n    const bboxes = range.getClientRects();\n\n    // We must rotate the boxes because we want to have them in the non-rotated\n    // page coordinates.\n    let rotator;\n    switch (this.viewport.rotation) {\n      case 90:\n        rotator = (x, y, w, h) => ({\n          x: (y - layerY) / parentHeight,\n          y: 1 - (x + w - layerX) / parentWidth,\n          width: h / parentHeight,\n          height: w / parentWidth,\n        });\n        break;\n      case 180:\n        rotator = (x, y, w, h) => ({\n          x: 1 - (x + w - layerX) / parentWidth,\n          y: 1 - (y + h - layerY) / parentHeight,\n          width: w / parentWidth,\n          height: h / parentHeight,\n        });\n        break;\n      case 270:\n        rotator = (x, y, w, h) => ({\n          x: 1 - (y + h - layerY) / parentHeight,\n          y: (x - layerX) / parentWidth,\n          width: h / parentHeight,\n          height: w / parentWidth,\n        });\n        break;\n      default:\n        rotator = (x, y, w, h) => ({\n          x: (x - layerX) / parentWidth,\n          y: (y - layerY) / parentHeight,\n          width: w / parentWidth,\n          height: h / parentHeight,\n        });\n        break;\n    }\n\n    const boxes = [];\n    for (const { x, y, width, height } of bboxes) {\n      if (width === 0 || height === 0) {\n        continue;\n      }\n      boxes.push(rotator(x, y, width, height));\n    }\n    if (boxes.length !== 0) {\n      this.#createAndAddNewEditor(event, false, {\n        boxes,\n      });\n    }\n    selection.empty();\n  }\n\n  /**\n   * Pointerup callback.\n   * @param {PointerEvent} event\n   */\n  pointerup(event) {\n    const { isMac } = FeatureTest.platform;\n    if (event.button !== 0 || (event.ctrlKey && isMac)) {\n      // Don't create an editor on right click.\n      return;\n    }\n\n    if (event.target !== this.div) {\n      return;\n    }\n\n    if (!this.#hadPointerDown) {\n      // It can happen when the user starts a drag inside a text editor\n      // and then releases the mouse button outside of it. In such a case\n      // we don't want to create a new editor, hence we check that a pointerdown\n      // occurred on this div previously.\n      return;\n    }\n    this.#hadPointerDown = false;\n\n    if (!this.#allowClick) {\n      this.#allowClick = true;\n      return;\n    }\n\n    if (this.#uiManager.getMode() === AnnotationEditorType.STAMP) {\n      this.#uiManager.unselectAll();\n      return;\n    }\n\n    this.#createAndAddNewEditor(event, /* isCentered = */ false);\n  }\n\n  /**\n   * Pointerdown callback.\n   * @param {PointerEvent} event\n   */\n  pointerdown(event) {\n    if (this.#uiManager.getMode() === AnnotationEditorType.HIGHLIGHT) {\n      this.enableTextSelection();\n    }\n    if (this.#hadPointerDown) {\n      // It's possible to have a second pointerdown event before a pointerup one\n      // when the user puts a finger on a touchscreen and then add a second one\n      // to start a pinch-to-zoom gesture.\n      // That said, in case it's possible to have two pointerdown events with\n      // a mouse, we don't want to create a new editor in such a case either.\n      this.#hadPointerDown = false;\n      return;\n    }\n    const { isMac } = FeatureTest.platform;\n    if (event.button !== 0 || (event.ctrlKey && isMac)) {\n      // Do nothing on right click.\n      return;\n    }\n\n    if (event.target !== this.div) {\n      return;\n    }\n\n    this.#hadPointerDown = true;\n\n    const editor = this.#uiManager.getActive();\n    this.#allowClick = !editor || editor.isEmpty();\n  }\n\n  /**\n   *\n   * @param {AnnotationEditor} editor\n   * @param {number} x\n   * @param {number} y\n   * @returns\n   */\n  findNewParent(editor, x, y) {\n    const layer = this.#uiManager.findParent(x, y);\n    if (layer === null || layer === this) {\n      return false;\n    }\n    layer.changeParent(editor);\n    return true;\n  }\n\n  /**\n   * Destroy the main editor.\n   */\n  destroy() {\n    if (this.#uiManager.getActive()?.parent === this) {\n      // We need to commit the current editor before destroying the layer.\n      this.#uiManager.commitOrRemove();\n      this.#uiManager.setActiveEditor(null);\n    }\n\n    if (this.#editorFocusTimeoutId) {\n      clearTimeout(this.#editorFocusTimeoutId);\n      this.#editorFocusTimeoutId = null;\n    }\n\n    for (const editor of this.#editors.values()) {\n      this.#accessibilityManager?.removePointerInTextLayer(editor.contentDiv);\n      editor.setParent(null);\n      editor.isAttachedToDOM = false;\n      editor.div.remove();\n    }\n    this.div = null;\n    this.#editors.clear();\n    this.#uiManager.removeLayer(this);\n  }\n\n  #cleanup() {\n    // When we're cleaning up, some editors are removed but we don't want\n    // to add a new one which will induce an addition in this.#editors, hence\n    // an infinite loop.\n    this.#isCleaningUp = true;\n    for (const editor of this.#editors.values()) {\n      if (editor.isEmpty()) {\n        editor.remove();\n      }\n    }\n    this.#isCleaningUp = false;\n  }\n\n  /**\n   * Render the main editor.\n   * @param {RenderEditorLayerOptions} parameters\n   */\n  render({ viewport }) {\n    this.viewport = viewport;\n    setLayerDimensions(this.div, viewport);\n    for (const editor of this.#uiManager.getEditors(this.pageIndex)) {\n      this.add(editor);\n    }\n    this.updateMode();\n  }\n\n  /**\n   * Update the main editor.\n   * @param {RenderEditorLayerOptions} parameters\n   */\n  update({ viewport }) {\n    // Editors have their dimensions/positions in percent so to avoid any\n    // issues (see #15582), we must commit the current one before changing\n    // the viewport.\n    this.#uiManager.commitOrRemove();\n\n    const oldRotation = this.viewport.rotation;\n    const rotation = viewport.rotation;\n    this.viewport = viewport;\n    setLayerDimensions(this.div, { rotation });\n    if (oldRotation !== rotation) {\n      for (const editor of this.#editors.values()) {\n        editor.rotate(rotation);\n      }\n    }\n    this.updateMode();\n  }\n\n  /**\n   * Get page dimensions.\n   * @returns {Object} dimensions.\n   */\n  get pageDimensions() {\n    const { pageWidth, pageHeight } = this.viewport.rawDims;\n    return [pageWidth, pageHeight];\n  }\n}\n\nexport { AnnotationEditorLayer };\n","/* Copyright 2023 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AnnotationEditorParamsType, shadow } from \"../../shared/util.js\";\nimport { KeyboardManager } from \"./tools.js\";\nimport { noContextMenu } from \"../display_utils.js\";\n\nclass ColorPicker {\n  #boundKeyDown = this.#keyDown.bind(this);\n\n  #button = null;\n\n  #buttonSwatch = null;\n\n  #defaultColor;\n\n  #dropdown = null;\n\n  #dropdownWasFromKeyboard = false;\n\n  #isMainColorPicker = false;\n\n  #eventBus;\n\n  #uiManager = null;\n\n  static get _keyboardManager() {\n    return shadow(\n      this,\n      \"_keyboardManager\",\n      new KeyboardManager([\n        [\n          [\"Escape\", \"mac+Escape\"],\n          ColorPicker.prototype._hideDropdownFromKeyboard,\n        ],\n        [[\" \", \"mac+ \"], ColorPicker.prototype._colorSelectFromKeyboard],\n        [\n          [\"ArrowDown\", \"ArrowRight\", \"mac+ArrowDown\", \"mac+ArrowRight\"],\n          ColorPicker.prototype._moveToNext,\n        ],\n        [\n          [\"ArrowUp\", \"ArrowLeft\", \"mac+ArrowUp\", \"mac+ArrowLeft\"],\n          ColorPicker.prototype._moveToPrevious,\n        ],\n        [[\"Home\", \"mac+Home\"], ColorPicker.prototype._moveToBeginning],\n        [[\"End\", \"mac+End\"], ColorPicker.prototype._moveToEnd],\n      ])\n    );\n  }\n\n  constructor({ editor = null, uiManager = null }) {\n    this.#isMainColorPicker = !editor;\n    this.#uiManager = editor?._uiManager || uiManager;\n    this.#eventBus = this.#uiManager._eventBus;\n    this.#defaultColor =\n      editor?.color ||\n      this.#uiManager?.highlightColors.values().next().value ||\n      \"#FFFF98\";\n  }\n\n  renderButton() {\n    const button = (this.#button = document.createElement(\"button\"));\n    button.className = \"colorPicker\";\n    button.tabIndex = \"0\";\n    button.setAttribute(\"data-l10n-id\", \"pdfjs-editor-colorpicker-button\");\n    button.setAttribute(\"aria-haspopup\", true);\n    button.addEventListener(\"click\", this.#openDropdown.bind(this));\n    const swatch = (this.#buttonSwatch = document.createElement(\"span\"));\n    swatch.className = \"swatch\";\n    swatch.style.backgroundColor = this.#defaultColor;\n    button.append(swatch);\n    return button;\n  }\n\n  renderMainDropdown() {\n    const dropdown = (this.#dropdown = this.#getDropdownRoot(\n      AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR\n    ));\n    dropdown.setAttribute(\"aria-orientation\", \"horizontal\");\n    dropdown.setAttribute(\"aria-labelledby\", \"highlightColorPickerLabel\");\n\n    return dropdown;\n  }\n\n  #getDropdownRoot(paramType) {\n    const div = document.createElement(\"div\");\n    div.addEventListener(\"contextmenu\", noContextMenu);\n    div.className = \"dropdown\";\n    div.role = \"listbox\";\n    div.setAttribute(\"aria-multiselectable\", false);\n    div.setAttribute(\"aria-orientation\", \"vertical\");\n    div.setAttribute(\"data-l10n-id\", \"pdfjs-editor-colorpicker-dropdown\");\n    for (const [name, color] of this.#uiManager.highlightColors) {\n      const button = document.createElement(\"button\");\n      button.tabIndex = \"0\";\n      button.role = \"option\";\n      button.setAttribute(\"data-color\", color);\n      button.title = name;\n      button.setAttribute(\"data-l10n-id\", `pdfjs-editor-colorpicker-${name}`);\n      const swatch = document.createElement(\"span\");\n      button.append(swatch);\n      swatch.className = \"swatch\";\n      swatch.style.backgroundColor = color;\n      button.setAttribute(\"aria-selected\", color === this.#defaultColor);\n      button.addEventListener(\n        \"click\",\n        this.#colorSelect.bind(this, paramType, color)\n      );\n      div.append(button);\n    }\n\n    div.addEventListener(\"keydown\", this.#boundKeyDown);\n\n    return div;\n  }\n\n  #colorSelect(type, color, event) {\n    event.stopPropagation();\n    this.#eventBus.dispatch(\"switchannotationeditorparams\", {\n      source: this,\n      type,\n      value: color,\n    });\n  }\n\n  _colorSelectFromKeyboard(event) {\n    const color = event.target.getAttribute(\"data-color\");\n    if (!color) {\n      return;\n    }\n    this.#colorSelect(color, event);\n  }\n\n  _moveToNext(event) {\n    if (event.target === this.#button) {\n      this.#dropdown.firstChild?.focus();\n      return;\n    }\n    event.target.nextSibling?.focus();\n  }\n\n  _moveToPrevious(event) {\n    event.target.previousSibling?.focus();\n  }\n\n  _moveToBeginning() {\n    this.#dropdown.firstChild?.focus();\n  }\n\n  _moveToEnd() {\n    this.#dropdown.lastChild?.focus();\n  }\n\n  #keyDown(event) {\n    ColorPicker._keyboardManager.exec(this, event);\n  }\n\n  #openDropdown(event) {\n    if (this.#dropdown && !this.#dropdown.classList.contains(\"hidden\")) {\n      this.hideDropdown();\n      return;\n    }\n    this.#button.addEventListener(\"keydown\", this.#boundKeyDown);\n    this.#dropdownWasFromKeyboard = event.detail === 0;\n    if (this.#dropdown) {\n      this.#dropdown.classList.remove(\"hidden\");\n      return;\n    }\n    const root = (this.#dropdown = this.#getDropdownRoot(\n      AnnotationEditorParamsType.HIGHLIGHT_COLOR\n    ));\n    this.#button.append(root);\n  }\n\n  hideDropdown() {\n    this.#dropdown?.classList.add(\"hidden\");\n  }\n\n  _hideDropdownFromKeyboard() {\n    if (\n      this.#isMainColorPicker ||\n      !this.#dropdown ||\n      this.#dropdown.classList.contains(\"hidden\")\n    ) {\n      return;\n    }\n    this.hideDropdown();\n    this.#button.removeEventListener(\"keydown\", this.#boundKeyDown);\n    this.#button.focus({\n      preventScroll: true,\n      focusVisible: this.#dropdownWasFromKeyboard,\n    });\n  }\n\n  updateColor(color) {\n    if (this.#buttonSwatch) {\n      this.#buttonSwatch.style.backgroundColor = color;\n    }\n    if (!this.#dropdown) {\n      return;\n    }\n\n    const i = this.#uiManager.highlightColors.values();\n    for (const child of this.#dropdown.children) {\n      child.setAttribute(\"aria-selected\", i.next().value === color);\n    }\n  }\n\n  destroy() {\n    this.#button?.remove();\n    this.#button = null;\n    this.#buttonSwatch = null;\n    this.#dropdown?.remove();\n    this.#dropdown = null;\n  }\n}\n\nexport { ColorPicker };\n","/* Copyright 2023 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { noContextMenu } from \"../display_utils.js\";\n\nclass AltText {\n  #altText = \"\";\n\n  #altTextDecorative = false;\n\n  #altTextButton = null;\n\n  #altTextTooltip = null;\n\n  #altTextTooltipTimeout = null;\n\n  #altTextWasFromKeyBoard = false;\n\n  #editor = null;\n\n  static _l10nPromise = null;\n\n  constructor(editor) {\n    this.#editor = editor;\n  }\n\n  static initialize(l10nPromise) {\n    AltText._l10nPromise ||= l10nPromise;\n  }\n\n  async render() {\n    const altText = (this.#altTextButton = document.createElement(\"button\"));\n    altText.className = \"altText\";\n    const msg = await AltText._l10nPromise.get(\n      \"pdfjs-editor-alt-text-button-label\"\n    );\n    altText.textContent = msg;\n    altText.setAttribute(\"aria-label\", msg);\n    altText.tabIndex = \"0\";\n    altText.addEventListener(\"contextmenu\", noContextMenu);\n    altText.addEventListener(\"pointerdown\", event => event.stopPropagation());\n\n    const onClick = event => {\n      event.preventDefault();\n      this.#editor._uiManager.editAltText(this.#editor);\n    };\n    altText.addEventListener(\"click\", onClick, { capture: true });\n    altText.addEventListener(\"keydown\", event => {\n      if (event.target === altText && event.key === \"Enter\") {\n        this.#altTextWasFromKeyBoard = true;\n        onClick(event);\n      }\n    });\n    await this.#setState();\n\n    return altText;\n  }\n\n  finish() {\n    if (!this.#altTextButton) {\n      return;\n    }\n    this.#altTextButton.focus({ focusVisible: this.#altTextWasFromKeyBoard });\n    this.#altTextWasFromKeyBoard = false;\n  }\n\n  get data() {\n    return {\n      altText: this.#altText,\n      decorative: this.#altTextDecorative,\n    };\n  }\n\n  /**\n   * Set the alt text data.\n   */\n  set data({ altText, decorative }) {\n    if (this.#altText === altText && this.#altTextDecorative === decorative) {\n      return;\n    }\n    this.#altText = altText;\n    this.#altTextDecorative = decorative;\n    this.#setState();\n  }\n\n  toggle(enabled = false) {\n    if (!this.#altTextButton) {\n      return;\n    }\n    if (!enabled && this.#altTextTooltipTimeout) {\n      clearTimeout(this.#altTextTooltipTimeout);\n      this.#altTextTooltipTimeout = null;\n    }\n    this.#altTextButton.disabled = !enabled;\n  }\n\n  destroy() {\n    this.#altTextButton?.remove();\n    this.#altTextButton = null;\n    this.#altTextTooltip = null;\n  }\n\n  async #setState() {\n    const button = this.#altTextButton;\n    if (!button) {\n      return;\n    }\n    if (!this.#altText && !this.#altTextDecorative) {\n      button.classList.remove(\"done\");\n      this.#altTextTooltip?.remove();\n      return;\n    }\n    button.classList.add(\"done\");\n\n    AltText._l10nPromise\n      .get(\"pdfjs-editor-alt-text-edit-button-label\")\n      .then(msg => {\n        button.setAttribute(\"aria-label\", msg);\n      });\n    let tooltip = this.#altTextTooltip;\n    if (!tooltip) {\n      this.#altTextTooltip = tooltip = document.createElement(\"span\");\n      tooltip.className = \"tooltip\";\n      tooltip.setAttribute(\"role\", \"tooltip\");\n      const id = (tooltip.id = `alt-text-tooltip-${this.#editor.id}`);\n      button.setAttribute(\"aria-describedby\", id);\n\n      const DELAY_TO_SHOW_TOOLTIP = 100;\n      button.addEventListener(\"mouseenter\", () => {\n        this.#altTextTooltipTimeout = setTimeout(() => {\n          this.#altTextTooltipTimeout = null;\n          this.#altTextTooltip.classList.add(\"show\");\n          this.#editor._uiManager._eventBus.dispatch(\"reporttelemetry\", {\n            source: this,\n            details: {\n              type: \"editing\",\n              subtype: this.#editor.editorType,\n              data: {\n                action: \"alt_text_tooltip\",\n              },\n            },\n          });\n        }, DELAY_TO_SHOW_TOOLTIP);\n      });\n      button.addEventListener(\"mouseleave\", () => {\n        if (this.#altTextTooltipTimeout) {\n          clearTimeout(this.#altTextTooltipTimeout);\n          this.#altTextTooltipTimeout = null;\n        }\n        this.#altTextTooltip?.classList.remove(\"show\");\n      });\n    }\n    tooltip.innerText = this.#altTextDecorative\n      ? await AltText._l10nPromise.get(\n          \"pdfjs-editor-alt-text-decorative-tooltip\"\n        )\n      : this.#altText;\n\n    if (!tooltip.parentNode) {\n      button.append(tooltip);\n    }\n\n    const element = this.#editor.getImageForAltText();\n    element?.setAttribute(\"aria-describedby\", tooltip.id);\n  }\n}\n\nexport { AltText };\n","/* Copyright 2023 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { noContextMenu } from \"../display_utils.js\";\n\nclass EditorToolbar {\n  #toolbar = null;\n\n  #colorPicker = null;\n\n  #editor;\n\n  #buttons = null;\n\n  constructor(editor) {\n    this.#editor = editor;\n  }\n\n  render() {\n    const editToolbar = (this.#toolbar = document.createElement(\"div\"));\n    editToolbar.className = \"editToolbar\";\n    editToolbar.addEventListener(\"contextmenu\", noContextMenu);\n    editToolbar.addEventListener(\"pointerdown\", EditorToolbar.#pointerDown);\n\n    const buttons = (this.#buttons = document.createElement(\"div\"));\n    buttons.className = \"buttons\";\n    editToolbar.append(buttons);\n\n    const position = this.#editor.toolbarPosition;\n    if (position) {\n      const { style } = editToolbar;\n      const x =\n        this.#editor._uiManager.direction === \"ltr\"\n          ? 1 - position[0]\n          : position[0];\n      style.insetInlineEnd = `${100 * x}%`;\n      style.top = `calc(${\n        100 * position[1]\n      }% + var(--editor-toolbar-vert-offset))`;\n    }\n\n    this.#addDeleteButton();\n\n    return editToolbar;\n  }\n\n  static #pointerDown(e) {\n    e.stopPropagation();\n  }\n\n  #focusIn(e) {\n    this.#editor._focusEventsAllowed = false;\n    e.preventDefault();\n    e.stopPropagation();\n  }\n\n  #focusOut(e) {\n    this.#editor._focusEventsAllowed = true;\n    e.preventDefault();\n    e.stopPropagation();\n  }\n\n  #addListenersToElement(element) {\n    // If we're clicking on a button with the keyboard or with\n    // the mouse, we don't want to trigger any focus events on\n    // the editor.\n    element.addEventListener(\"focusin\", this.#focusIn.bind(this), {\n      capture: true,\n    });\n    element.addEventListener(\"focusout\", this.#focusOut.bind(this), {\n      capture: true,\n    });\n    element.addEventListener(\"contextmenu\", noContextMenu);\n  }\n\n  hide() {\n    this.#toolbar.classList.add(\"hidden\");\n    this.#colorPicker?.hideDropdown();\n  }\n\n  show() {\n    this.#toolbar.classList.remove(\"hidden\");\n  }\n\n  #addDeleteButton() {\n    const button = document.createElement(\"button\");\n    button.className = \"delete\";\n    button.tabIndex = 0;\n    button.setAttribute(\n      \"data-l10n-id\",\n      `pdfjs-editor-remove-${this.#editor.editorType}-button`\n    );\n    this.#addListenersToElement(button);\n    button.addEventListener(\"click\", e => {\n      this.#editor._uiManager.delete();\n    });\n    this.#buttons.append(button);\n  }\n\n  get #divider() {\n    const divider = document.createElement(\"div\");\n    divider.className = \"divider\";\n    return divider;\n  }\n\n  addAltTextButton(button) {\n    this.#addListenersToElement(button);\n    this.#buttons.prepend(button, this.#divider);\n  }\n\n  addColorPicker(colorPicker) {\n    this.#colorPicker = colorPicker;\n    const button = colorPicker.renderButton();\n    this.#addListenersToElement(button);\n    this.#buttons.prepend(button, this.#divider);\n  }\n\n  remove() {\n    this.#toolbar.remove();\n    this.#colorPicker?.destroy();\n    this.#colorPicker = null;\n  }\n}\n\nexport { EditorToolbar };\n","/* Copyright 2022 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./annotation_editor_layer.js\").AnnotationEditorLayer} AnnotationEditorLayer */\n\nimport {\n  AnnotationEditorUIManager,\n  bindEvents,\n  ColorManager,\n  KeyboardManager,\n} from \"./tools.js\";\nimport { FeatureTest, shadow, unreachable } from \"../../shared/util.js\";\nimport { AltText } from \"./alt_text.js\";\nimport { EditorToolbar } from \"./toolbar.js\";\nimport { noContextMenu } from \"../display_utils.js\";\n\n/**\n * @typedef {Object} AnnotationEditorParameters\n * @property {AnnotationEditorUIManager} uiManager - the global manager\n * @property {AnnotationEditorLayer} parent - the layer containing this editor\n * @property {string} id - editor id\n * @property {number} x - x-coordinate\n * @property {number} y - y-coordinate\n */\n\n/**\n * Base class for editors.\n */\nclass AnnotationEditor {\n  #allResizerDivs = null;\n\n  #altText = null;\n\n  #keepAspectRatio = false;\n\n  #resizersDiv = null;\n\n  #savedDimensions = null;\n\n  #boundFocusin = this.focusin.bind(this);\n\n  #boundFocusout = this.focusout.bind(this);\n\n  #editToolbar = null;\n\n  #focusedResizerName = \"\";\n\n  #hasBeenClicked = false;\n\n  #isEditing = false;\n\n  #isInEditMode = false;\n\n  #isResizerEnabledForKeyboard = false;\n\n  #moveInDOMTimeout = null;\n\n  _initialOptions = Object.create(null);\n\n  _uiManager = null;\n\n  _focusEventsAllowed = true;\n\n  _l10nPromise = null;\n\n  #isDraggable = false;\n\n  #zIndex = AnnotationEditor._zIndex++;\n\n  static _borderLineWidth = -1;\n\n  static _colorManager = new ColorManager();\n\n  static _zIndex = 1;\n\n  static get _resizerKeyboardManager() {\n    const resize = AnnotationEditor.prototype._resizeWithKeyboard;\n    const small = AnnotationEditorUIManager.TRANSLATE_SMALL;\n    const big = AnnotationEditorUIManager.TRANSLATE_BIG;\n\n    return shadow(\n      this,\n      \"_resizerKeyboardManager\",\n      new KeyboardManager([\n        [[\"ArrowLeft\", \"mac+ArrowLeft\"], resize, { args: [-small, 0] }],\n        [\n          [\"ctrl+ArrowLeft\", \"mac+shift+ArrowLeft\"],\n          resize,\n          { args: [-big, 0] },\n        ],\n        [[\"ArrowRight\", \"mac+ArrowRight\"], resize, { args: [small, 0] }],\n        [\n          [\"ctrl+ArrowRight\", \"mac+shift+ArrowRight\"],\n          resize,\n          { args: [big, 0] },\n        ],\n        [[\"ArrowUp\", \"mac+ArrowUp\"], resize, { args: [0, -small] }],\n        [[\"ctrl+ArrowUp\", \"mac+shift+ArrowUp\"], resize, { args: [0, -big] }],\n        [[\"ArrowDown\", \"mac+ArrowDown\"], resize, { args: [0, small] }],\n        [[\"ctrl+ArrowDown\", \"mac+shift+ArrowDown\"], resize, { args: [0, big] }],\n        [\n          [\"Escape\", \"mac+Escape\"],\n          AnnotationEditor.prototype._stopResizingWithKeyboard,\n        ],\n      ])\n    );\n  }\n\n  /**\n   * @param {AnnotationEditorParameters} parameters\n   */\n  constructor(parameters) {\n    if (this.constructor === AnnotationEditor) {\n      unreachable(\"Cannot initialize AnnotationEditor.\");\n    }\n\n    this.parent = parameters.parent;\n    this.id = parameters.id;\n    this.width = this.height = null;\n    this.pageIndex = parameters.parent.pageIndex;\n    this.name = parameters.name;\n    this.div = null;\n    this._uiManager = parameters.uiManager;\n    this.annotationElementId = null;\n    this._willKeepAspectRatio = false;\n    this._initialOptions.isCentered = parameters.isCentered;\n    this._structTreeParentId = null;\n\n    const {\n      rotation,\n      rawDims: { pageWidth, pageHeight, pageX, pageY },\n    } = this.parent.viewport;\n\n    this.rotation = rotation;\n    this.pageRotation =\n      (360 + rotation - this._uiManager.viewParameters.rotation) % 360;\n    this.pageDimensions = [pageWidth, pageHeight];\n    this.pageTranslation = [pageX, pageY];\n\n    const [width, height] = this.parentDimensions;\n    this.x = parameters.x / width;\n    this.y = parameters.y / height;\n\n    this.isAttachedToDOM = false;\n    this.deleted = false;\n  }\n\n  get editorType() {\n    return Object.getPrototypeOf(this).constructor._type;\n  }\n\n  static get _defaultLineColor() {\n    return shadow(\n      this,\n      \"_defaultLineColor\",\n      this._colorManager.getHexCode(\"CanvasText\")\n    );\n  }\n\n  static deleteAnnotationElement(editor) {\n    const fakeEditor = new FakeEditor({\n      id: editor.parent.getNextId(),\n      parent: editor.parent,\n      uiManager: editor._uiManager,\n    });\n    fakeEditor.annotationElementId = editor.annotationElementId;\n    fakeEditor.deleted = true;\n    fakeEditor._uiManager.addToAnnotationStorage(fakeEditor);\n  }\n\n  /**\n   * Initialize the l10n stuff for this type of editor.\n   * @param {Object} l10n\n   */\n  static initialize(l10n, options = null) {\n    AnnotationEditor._l10nPromise ||= new Map(\n      [\n        \"pdfjs-editor-alt-text-button-label\",\n        \"pdfjs-editor-alt-text-edit-button-label\",\n        \"pdfjs-editor-alt-text-decorative-tooltip\",\n        \"pdfjs-editor-resizer-label-topLeft\",\n        \"pdfjs-editor-resizer-label-topMiddle\",\n        \"pdfjs-editor-resizer-label-topRight\",\n        \"pdfjs-editor-resizer-label-middleRight\",\n        \"pdfjs-editor-resizer-label-bottomRight\",\n        \"pdfjs-editor-resizer-label-bottomMiddle\",\n        \"pdfjs-editor-resizer-label-bottomLeft\",\n        \"pdfjs-editor-resizer-label-middleLeft\",\n      ].map(str => [\n        str,\n        l10n.get(str.replaceAll(/([A-Z])/g, c => `-${c.toLowerCase()}`)),\n      ])\n    );\n    if (options?.strings) {\n      for (const str of options.strings) {\n        AnnotationEditor._l10nPromise.set(str, l10n.get(str));\n      }\n    }\n    if (AnnotationEditor._borderLineWidth !== -1) {\n      return;\n    }\n    const style = getComputedStyle(document.documentElement);\n    AnnotationEditor._borderLineWidth =\n      parseFloat(style.getPropertyValue(\"--outline-width\")) || 0;\n  }\n\n  /**\n   * Update the default parameters for this type of editor.\n   * @param {number} _type\n   * @param {*} _value\n   */\n  static updateDefaultParams(_type, _value) {}\n\n  /**\n   * Get the default properties to set in the UI for this type of editor.\n   * @returns {Array}\n   */\n  static get defaultPropertiesToUpdate() {\n    return [];\n  }\n\n  /**\n   * Check if this kind of editor is able to handle the given mime type for\n   * pasting.\n   * @param {string} mime\n   * @returns {boolean}\n   */\n  static isHandlingMimeForPasting(mime) {\n    return false;\n  }\n\n  /**\n   * Extract the data from the clipboard item and delegate the creation of the\n   * editor to the parent.\n   * @param {DataTransferItem} item\n   * @param {AnnotationEditorLayer} parent\n   */\n  static paste(item, parent) {\n    unreachable(\"Not implemented\");\n  }\n\n  /**\n   * Get the properties to update in the UI for this editor.\n   * @returns {Array}\n   */\n  get propertiesToUpdate() {\n    return [];\n  }\n\n  get _isDraggable() {\n    return this.#isDraggable;\n  }\n\n  set _isDraggable(value) {\n    this.#isDraggable = value;\n    this.div?.classList.toggle(\"draggable\", value);\n  }\n\n  /**\n   * @returns {boolean} true if the editor handles the Enter key itself.\n   */\n  get isEnterHandled() {\n    return true;\n  }\n\n  center() {\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    switch (this.parentRotation) {\n      case 90:\n        this.x -= (this.height * pageHeight) / (pageWidth * 2);\n        this.y += (this.width * pageWidth) / (pageHeight * 2);\n        break;\n      case 180:\n        this.x += this.width / 2;\n        this.y += this.height / 2;\n        break;\n      case 270:\n        this.x += (this.height * pageHeight) / (pageWidth * 2);\n        this.y -= (this.width * pageWidth) / (pageHeight * 2);\n        break;\n      default:\n        this.x -= this.width / 2;\n        this.y -= this.height / 2;\n        break;\n    }\n    this.fixAndSetPosition();\n  }\n\n  /**\n   * Add some commands into the CommandManager (undo/redo stuff).\n   * @param {Object} params\n   */\n  addCommands(params) {\n    this._uiManager.addCommands(params);\n  }\n\n  get currentLayer() {\n    return this._uiManager.currentLayer;\n  }\n\n  /**\n   * This editor will be behind the others.\n   */\n  setInBackground() {\n    this.div.style.zIndex = 0;\n  }\n\n  /**\n   * This editor will be in the foreground.\n   */\n  setInForeground() {\n    this.div.style.zIndex = this.#zIndex;\n  }\n\n  setParent(parent) {\n    if (parent !== null) {\n      this.pageIndex = parent.pageIndex;\n      this.pageDimensions = parent.pageDimensions;\n    } else {\n      // The editor is being removed from the DOM, so we need to stop resizing.\n      this.#stopResizing();\n    }\n    this.parent = parent;\n  }\n\n  /**\n   * onfocus callback.\n   */\n  focusin(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    if (!this.#hasBeenClicked) {\n      this.parent.setSelected(this);\n    } else {\n      this.#hasBeenClicked = false;\n    }\n  }\n\n  /**\n   * onblur callback.\n   * @param {FocusEvent} event\n   */\n  focusout(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n\n    if (!this.isAttachedToDOM) {\n      return;\n    }\n\n    // In case of focusout, the relatedTarget is the element which\n    // is grabbing the focus.\n    // So if the related target is an element under the div for this\n    // editor, then the editor isn't unactive.\n    const target = event.relatedTarget;\n    if (target?.closest(`#${this.id}`)) {\n      return;\n    }\n\n    event.preventDefault();\n\n    if (!this.parent?.isMultipleSelection) {\n      this.commitOrRemove();\n    }\n  }\n\n  commitOrRemove() {\n    if (this.isEmpty()) {\n      this.remove();\n    } else {\n      this.commit();\n    }\n  }\n\n  /**\n   * Commit the data contained in this editor.\n   */\n  commit() {\n    this.addToAnnotationStorage();\n  }\n\n  addToAnnotationStorage() {\n    this._uiManager.addToAnnotationStorage(this);\n  }\n\n  /**\n   * Set the editor position within its parent.\n   * @param {number} x\n   * @param {number} y\n   * @param {number} tx - x-translation in screen coordinates.\n   * @param {number} ty - y-translation in screen coordinates.\n   */\n  setAt(x, y, tx, ty) {\n    const [width, height] = this.parentDimensions;\n    [tx, ty] = this.screenToPageTranslation(tx, ty);\n\n    this.x = (x + tx) / width;\n    this.y = (y + ty) / height;\n\n    this.fixAndSetPosition();\n  }\n\n  #translate([width, height], x, y) {\n    [x, y] = this.screenToPageTranslation(x, y);\n\n    this.x += x / width;\n    this.y += y / height;\n\n    this.fixAndSetPosition();\n  }\n\n  /**\n   * Translate the editor position within its parent.\n   * @param {number} x - x-translation in screen coordinates.\n   * @param {number} y - y-translation in screen coordinates.\n   */\n  translate(x, y) {\n    this.#translate(this.parentDimensions, x, y);\n  }\n\n  /**\n   * Translate the editor position within its page and adjust the scroll\n   * in order to have the editor in the view.\n   * @param {number} x - x-translation in page coordinates.\n   * @param {number} y - y-translation in page coordinates.\n   */\n  translateInPage(x, y) {\n    this.#translate(this.pageDimensions, x, y);\n    this.div.scrollIntoView({ block: \"nearest\" });\n  }\n\n  drag(tx, ty) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.x += tx / parentWidth;\n    this.y += ty / parentHeight;\n    if (this.parent && (this.x < 0 || this.x > 1 || this.y < 0 || this.y > 1)) {\n      // It's possible to not have a parent: for example, when the user is\n      // dragging all the selected editors but this one on a page which has been\n      // destroyed.\n      // It's why we need to check for it. In such a situation, it isn't really\n      // a problem to not find a new parent: it's something which is related to\n      // what the user is seeing, hence it depends on how pages are layed out.\n\n      // The element will be outside of its parent so change the parent.\n      const { x, y } = this.div.getBoundingClientRect();\n      if (this.parent.findNewParent(this, x, y)) {\n        this.x -= Math.floor(this.x);\n        this.y -= Math.floor(this.y);\n      }\n    }\n\n    // The editor can be moved wherever the user wants, so we don't need to fix\n    // the position: it'll be done when the user will release the mouse button.\n\n    let { x, y } = this;\n    const [bx, by] = this.#getBaseTranslation();\n    x += bx;\n    y += by;\n\n    this.div.style.left = `${(100 * x).toFixed(2)}%`;\n    this.div.style.top = `${(100 * y).toFixed(2)}%`;\n    this.div.scrollIntoView({ block: \"nearest\" });\n  }\n\n  #getBaseTranslation() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const { _borderLineWidth } = AnnotationEditor;\n    const x = _borderLineWidth / parentWidth;\n    const y = _borderLineWidth / parentHeight;\n    switch (this.rotation) {\n      case 90:\n        return [-x, y];\n      case 180:\n        return [x, y];\n      case 270:\n        return [x, -y];\n      default:\n        return [-x, -y];\n    }\n  }\n\n  /**\n   * Fix the position of the editor in order to keep it inside its parent page.\n   * @param {number} [rotation] - the rotation of the page.\n   */\n  fixAndSetPosition(rotation = this.rotation) {\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    let { x, y, width, height } = this;\n    width *= pageWidth;\n    height *= pageHeight;\n    x *= pageWidth;\n    y *= pageHeight;\n\n    switch (rotation) {\n      case 0:\n        x = Math.max(0, Math.min(pageWidth - width, x));\n        y = Math.max(0, Math.min(pageHeight - height, y));\n        break;\n      case 90:\n        x = Math.max(0, Math.min(pageWidth - height, x));\n        y = Math.min(pageHeight, Math.max(width, y));\n        break;\n      case 180:\n        x = Math.min(pageWidth, Math.max(width, x));\n        y = Math.min(pageHeight, Math.max(height, y));\n        break;\n      case 270:\n        x = Math.min(pageWidth, Math.max(height, x));\n        y = Math.max(0, Math.min(pageHeight - width, y));\n        break;\n    }\n\n    this.x = x /= pageWidth;\n    this.y = y /= pageHeight;\n\n    const [bx, by] = this.#getBaseTranslation();\n    x += bx;\n    y += by;\n\n    const { style } = this.div;\n    style.left = `${(100 * x).toFixed(2)}%`;\n    style.top = `${(100 * y).toFixed(2)}%`;\n\n    this.moveInDOM();\n  }\n\n  static #rotatePoint(x, y, angle) {\n    switch (angle) {\n      case 90:\n        return [y, -x];\n      case 180:\n        return [-x, -y];\n      case 270:\n        return [-y, x];\n      default:\n        return [x, y];\n    }\n  }\n\n  /**\n   * Convert a screen translation into a page one.\n   * @param {number} x\n   * @param {number} y\n   */\n  screenToPageTranslation(x, y) {\n    return AnnotationEditor.#rotatePoint(x, y, this.parentRotation);\n  }\n\n  /**\n   * Convert a page translation into a screen one.\n   * @param {number} x\n   * @param {number} y\n   */\n  pageTranslationToScreen(x, y) {\n    return AnnotationEditor.#rotatePoint(x, y, 360 - this.parentRotation);\n  }\n\n  #getRotationMatrix(rotation) {\n    switch (rotation) {\n      case 90: {\n        const [pageWidth, pageHeight] = this.pageDimensions;\n        return [0, -pageWidth / pageHeight, pageHeight / pageWidth, 0];\n      }\n      case 180:\n        return [-1, 0, 0, -1];\n      case 270: {\n        const [pageWidth, pageHeight] = this.pageDimensions;\n        return [0, pageWidth / pageHeight, -pageHeight / pageWidth, 0];\n      }\n      default:\n        return [1, 0, 0, 1];\n    }\n  }\n\n  get parentScale() {\n    return this._uiManager.viewParameters.realScale;\n  }\n\n  get parentRotation() {\n    return (this._uiManager.viewParameters.rotation + this.pageRotation) % 360;\n  }\n\n  get parentDimensions() {\n    const {\n      parentScale,\n      pageDimensions: [pageWidth, pageHeight],\n    } = this;\n    const scaledWidth = pageWidth * parentScale;\n    const scaledHeight = pageHeight * parentScale;\n    return FeatureTest.isCSSRoundSupported\n      ? [Math.round(scaledWidth), Math.round(scaledHeight)]\n      : [scaledWidth, scaledHeight];\n  }\n\n  /**\n   * Set the dimensions of this editor.\n   * @param {number} width\n   * @param {number} height\n   */\n  setDims(width, height) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.div.style.width = `${((100 * width) / parentWidth).toFixed(2)}%`;\n    if (!this.#keepAspectRatio) {\n      this.div.style.height = `${((100 * height) / parentHeight).toFixed(2)}%`;\n    }\n  }\n\n  fixDims() {\n    const { style } = this.div;\n    const { height, width } = style;\n    const widthPercent = width.endsWith(\"%\");\n    const heightPercent = !this.#keepAspectRatio && height.endsWith(\"%\");\n    if (widthPercent && heightPercent) {\n      return;\n    }\n\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    if (!widthPercent) {\n      style.width = `${((100 * parseFloat(width)) / parentWidth).toFixed(2)}%`;\n    }\n    if (!this.#keepAspectRatio && !heightPercent) {\n      style.height = `${((100 * parseFloat(height)) / parentHeight).toFixed(\n        2\n      )}%`;\n    }\n  }\n\n  /**\n   * Get the translation used to position this editor when it's created.\n   * @returns {Array<number>}\n   */\n  getInitialTranslation() {\n    return [0, 0];\n  }\n\n  #createResizers() {\n    if (this.#resizersDiv) {\n      return;\n    }\n    this.#resizersDiv = document.createElement(\"div\");\n    this.#resizersDiv.classList.add(\"resizers\");\n    // When the resizers are used with the keyboard, they're focusable, hence\n    // we want to have them in this order (top left, top middle, top right, ...)\n    // in the DOM to have the focus order correct.\n    const classes = this._willKeepAspectRatio\n      ? [\"topLeft\", \"topRight\", \"bottomRight\", \"bottomLeft\"]\n      : [\n          \"topLeft\",\n          \"topMiddle\",\n          \"topRight\",\n          \"middleRight\",\n          \"bottomRight\",\n          \"bottomMiddle\",\n          \"bottomLeft\",\n          \"middleLeft\",\n        ];\n    for (const name of classes) {\n      const div = document.createElement(\"div\");\n      this.#resizersDiv.append(div);\n      div.classList.add(\"resizer\", name);\n      div.setAttribute(\"data-resizer-name\", name);\n      div.addEventListener(\n        \"pointerdown\",\n        this.#resizerPointerdown.bind(this, name)\n      );\n      div.addEventListener(\"contextmenu\", noContextMenu);\n      div.tabIndex = -1;\n    }\n    this.div.prepend(this.#resizersDiv);\n  }\n\n  #resizerPointerdown(name, event) {\n    event.preventDefault();\n    const { isMac } = FeatureTest.platform;\n    if (event.button !== 0 || (event.ctrlKey && isMac)) {\n      return;\n    }\n\n    this.#altText?.toggle(false);\n\n    const boundResizerPointermove = this.#resizerPointermove.bind(this, name);\n    const savedDraggable = this._isDraggable;\n    this._isDraggable = false;\n    const pointerMoveOptions = { passive: true, capture: true };\n    this.parent.togglePointerEvents(false);\n    window.addEventListener(\n      \"pointermove\",\n      boundResizerPointermove,\n      pointerMoveOptions\n    );\n    const savedX = this.x;\n    const savedY = this.y;\n    const savedWidth = this.width;\n    const savedHeight = this.height;\n    const savedParentCursor = this.parent.div.style.cursor;\n    const savedCursor = this.div.style.cursor;\n    this.div.style.cursor = this.parent.div.style.cursor =\n      window.getComputedStyle(event.target).cursor;\n\n    const pointerUpCallback = () => {\n      this.parent.togglePointerEvents(true);\n      this.#altText?.toggle(true);\n      this._isDraggable = savedDraggable;\n      window.removeEventListener(\"pointerup\", pointerUpCallback);\n      window.removeEventListener(\"blur\", pointerUpCallback);\n      window.removeEventListener(\n        \"pointermove\",\n        boundResizerPointermove,\n        pointerMoveOptions\n      );\n      this.parent.div.style.cursor = savedParentCursor;\n      this.div.style.cursor = savedCursor;\n\n      this.#addResizeToUndoStack(savedX, savedY, savedWidth, savedHeight);\n    };\n    window.addEventListener(\"pointerup\", pointerUpCallback);\n    // If the user switches to another window (with alt+tab), then we end the\n    // resize session.\n    window.addEventListener(\"blur\", pointerUpCallback);\n  }\n\n  #addResizeToUndoStack(savedX, savedY, savedWidth, savedHeight) {\n    const newX = this.x;\n    const newY = this.y;\n    const newWidth = this.width;\n    const newHeight = this.height;\n    if (\n      newX === savedX &&\n      newY === savedY &&\n      newWidth === savedWidth &&\n      newHeight === savedHeight\n    ) {\n      return;\n    }\n\n    this.addCommands({\n      cmd: () => {\n        this.width = newWidth;\n        this.height = newHeight;\n        this.x = newX;\n        this.y = newY;\n        const [parentWidth, parentHeight] = this.parentDimensions;\n        this.setDims(parentWidth * newWidth, parentHeight * newHeight);\n        this.fixAndSetPosition();\n      },\n      undo: () => {\n        this.width = savedWidth;\n        this.height = savedHeight;\n        this.x = savedX;\n        this.y = savedY;\n        const [parentWidth, parentHeight] = this.parentDimensions;\n        this.setDims(parentWidth * savedWidth, parentHeight * savedHeight);\n        this.fixAndSetPosition();\n      },\n      mustExec: true,\n    });\n  }\n\n  #resizerPointermove(name, event) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const savedX = this.x;\n    const savedY = this.y;\n    const savedWidth = this.width;\n    const savedHeight = this.height;\n    const minWidth = AnnotationEditor.MIN_SIZE / parentWidth;\n    const minHeight = AnnotationEditor.MIN_SIZE / parentHeight;\n\n    // 10000 because we multiply by 100 and use toFixed(2) in fixAndSetPosition.\n    // Without rounding, the positions of the corners other than the top left\n    // one can be slightly wrong.\n    const round = x => Math.round(x * 10000) / 10000;\n    const rotationMatrix = this.#getRotationMatrix(this.rotation);\n    const transf = (x, y) => [\n      rotationMatrix[0] * x + rotationMatrix[2] * y,\n      rotationMatrix[1] * x + rotationMatrix[3] * y,\n    ];\n    const invRotationMatrix = this.#getRotationMatrix(360 - this.rotation);\n    const invTransf = (x, y) => [\n      invRotationMatrix[0] * x + invRotationMatrix[2] * y,\n      invRotationMatrix[1] * x + invRotationMatrix[3] * y,\n    ];\n    let getPoint;\n    let getOpposite;\n    let isDiagonal = false;\n    let isHorizontal = false;\n\n    switch (name) {\n      case \"topLeft\":\n        isDiagonal = true;\n        getPoint = (w, h) => [0, 0];\n        getOpposite = (w, h) => [w, h];\n        break;\n      case \"topMiddle\":\n        getPoint = (w, h) => [w / 2, 0];\n        getOpposite = (w, h) => [w / 2, h];\n        break;\n      case \"topRight\":\n        isDiagonal = true;\n        getPoint = (w, h) => [w, 0];\n        getOpposite = (w, h) => [0, h];\n        break;\n      case \"middleRight\":\n        isHorizontal = true;\n        getPoint = (w, h) => [w, h / 2];\n        getOpposite = (w, h) => [0, h / 2];\n        break;\n      case \"bottomRight\":\n        isDiagonal = true;\n        getPoint = (w, h) => [w, h];\n        getOpposite = (w, h) => [0, 0];\n        break;\n      case \"bottomMiddle\":\n        getPoint = (w, h) => [w / 2, h];\n        getOpposite = (w, h) => [w / 2, 0];\n        break;\n      case \"bottomLeft\":\n        isDiagonal = true;\n        getPoint = (w, h) => [0, h];\n        getOpposite = (w, h) => [w, 0];\n        break;\n      case \"middleLeft\":\n        isHorizontal = true;\n        getPoint = (w, h) => [0, h / 2];\n        getOpposite = (w, h) => [w, h / 2];\n        break;\n    }\n\n    const point = getPoint(savedWidth, savedHeight);\n    const oppositePoint = getOpposite(savedWidth, savedHeight);\n    let transfOppositePoint = transf(...oppositePoint);\n    const oppositeX = round(savedX + transfOppositePoint[0]);\n    const oppositeY = round(savedY + transfOppositePoint[1]);\n    let ratioX = 1;\n    let ratioY = 1;\n\n    let [deltaX, deltaY] = this.screenToPageTranslation(\n      event.movementX,\n      event.movementY\n    );\n    [deltaX, deltaY] = invTransf(deltaX / parentWidth, deltaY / parentHeight);\n\n    if (isDiagonal) {\n      const oldDiag = Math.hypot(savedWidth, savedHeight);\n      ratioX = ratioY = Math.max(\n        Math.min(\n          Math.hypot(\n            oppositePoint[0] - point[0] - deltaX,\n            oppositePoint[1] - point[1] - deltaY\n          ) / oldDiag,\n          // Avoid the editor to be larger than the page.\n          1 / savedWidth,\n          1 / savedHeight\n        ),\n        // Avoid the editor to be smaller than the minimum size.\n        minWidth / savedWidth,\n        minHeight / savedHeight\n      );\n    } else if (isHorizontal) {\n      ratioX =\n        Math.max(\n          minWidth,\n          Math.min(1, Math.abs(oppositePoint[0] - point[0] - deltaX))\n        ) / savedWidth;\n    } else {\n      ratioY =\n        Math.max(\n          minHeight,\n          Math.min(1, Math.abs(oppositePoint[1] - point[1] - deltaY))\n        ) / savedHeight;\n    }\n\n    const newWidth = round(savedWidth * ratioX);\n    const newHeight = round(savedHeight * ratioY);\n    transfOppositePoint = transf(...getOpposite(newWidth, newHeight));\n    const newX = oppositeX - transfOppositePoint[0];\n    const newY = oppositeY - transfOppositePoint[1];\n\n    this.width = newWidth;\n    this.height = newHeight;\n    this.x = newX;\n    this.y = newY;\n\n    this.setDims(parentWidth * newWidth, parentHeight * newHeight);\n    this.fixAndSetPosition();\n  }\n\n  altTextFinish() {\n    this.#altText?.finish();\n  }\n\n  /**\n   * Add a toolbar for this editor.\n   * @returns {Promise<EditorToolbar|null>}\n   */\n  async addEditToolbar() {\n    if (this.#editToolbar || this.#isInEditMode) {\n      return this.#editToolbar;\n    }\n    this.#editToolbar = new EditorToolbar(this);\n    this.div.append(this.#editToolbar.render());\n    if (this.#altText) {\n      this.#editToolbar.addAltTextButton(await this.#altText.render());\n    }\n\n    return this.#editToolbar;\n  }\n\n  removeEditToolbar() {\n    if (!this.#editToolbar) {\n      return;\n    }\n    this.#editToolbar.remove();\n    this.#editToolbar = null;\n\n    // We destroy the alt text but we don't null it because we want to be able\n    // to restore it in case the user undoes the deletion.\n    this.#altText?.destroy();\n  }\n\n  getClientDimensions() {\n    return this.div.getBoundingClientRect();\n  }\n\n  async addAltTextButton() {\n    if (this.#altText) {\n      return;\n    }\n    AltText.initialize(AnnotationEditor._l10nPromise);\n    this.#altText = new AltText(this);\n    await this.addEditToolbar();\n  }\n\n  get altTextData() {\n    return this.#altText?.data;\n  }\n\n  /**\n   * Set the alt text data.\n   */\n  set altTextData(data) {\n    if (!this.#altText) {\n      return;\n    }\n    this.#altText.data = data;\n  }\n\n  /**\n   * Render this editor in a div.\n   * @returns {HTMLDivElement | null}\n   */\n  render() {\n    this.div = document.createElement(\"div\");\n    this.div.setAttribute(\"data-editor-rotation\", (360 - this.rotation) % 360);\n    this.div.className = this.name;\n    this.div.setAttribute(\"id\", this.id);\n    this.div.setAttribute(\"tabIndex\", 0);\n\n    this.setInForeground();\n\n    this.div.addEventListener(\"focusin\", this.#boundFocusin);\n    this.div.addEventListener(\"focusout\", this.#boundFocusout);\n\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    if (this.parentRotation % 180 !== 0) {\n      this.div.style.maxWidth = `${((100 * parentHeight) / parentWidth).toFixed(\n        2\n      )}%`;\n      this.div.style.maxHeight = `${(\n        (100 * parentWidth) /\n        parentHeight\n      ).toFixed(2)}%`;\n    }\n\n    const [tx, ty] = this.getInitialTranslation();\n    this.translate(tx, ty);\n\n    bindEvents(this, this.div, [\"pointerdown\"]);\n\n    return this.div;\n  }\n\n  /**\n   * Onpointerdown callback.\n   * @param {PointerEvent} event\n   */\n  pointerdown(event) {\n    const { isMac } = FeatureTest.platform;\n    if (event.button !== 0 || (event.ctrlKey && isMac)) {\n      // Avoid to focus this editor because of a non-left click.\n      event.preventDefault();\n      return;\n    }\n\n    this.#hasBeenClicked = true;\n\n    if (this._isDraggable) {\n      this.#setUpDragSession(event);\n      return;\n    }\n\n    this.#selectOnPointerEvent(event);\n  }\n\n  #selectOnPointerEvent(event) {\n    const { isMac } = FeatureTest.platform;\n    if (\n      (event.ctrlKey && !isMac) ||\n      event.shiftKey ||\n      (event.metaKey && isMac)\n    ) {\n      this.parent.toggleSelected(this);\n    } else {\n      this.parent.setSelected(this);\n    }\n  }\n\n  #setUpDragSession(event) {\n    const isSelected = this._uiManager.isSelected(this);\n    this._uiManager.setUpDragSession();\n\n    let pointerMoveOptions, pointerMoveCallback;\n    if (isSelected) {\n      pointerMoveOptions = { passive: true, capture: true };\n      pointerMoveCallback = e => {\n        const [tx, ty] = this.screenToPageTranslation(e.movementX, e.movementY);\n        this._uiManager.dragSelectedEditors(tx, ty);\n      };\n      window.addEventListener(\n        \"pointermove\",\n        pointerMoveCallback,\n        pointerMoveOptions\n      );\n    }\n\n    const pointerUpCallback = () => {\n      window.removeEventListener(\"pointerup\", pointerUpCallback);\n      window.removeEventListener(\"blur\", pointerUpCallback);\n      if (isSelected) {\n        window.removeEventListener(\n          \"pointermove\",\n          pointerMoveCallback,\n          pointerMoveOptions\n        );\n      }\n\n      this.#hasBeenClicked = false;\n      if (!this._uiManager.endDragSession()) {\n        this.#selectOnPointerEvent(event);\n      }\n    };\n    window.addEventListener(\"pointerup\", pointerUpCallback);\n    // If the user is using alt+tab during the dragging session, the pointerup\n    // event could be not fired, but a blur event is fired so we can use it in\n    // order to interrupt the dragging session.\n    window.addEventListener(\"blur\", pointerUpCallback);\n  }\n\n  moveInDOM() {\n    // Moving the editor in the DOM can be expensive, so we wait a bit before.\n    // It's important to not block the UI (for example when changing the font\n    // size in a FreeText).\n    if (this.#moveInDOMTimeout) {\n      clearTimeout(this.#moveInDOMTimeout);\n    }\n    this.#moveInDOMTimeout = setTimeout(() => {\n      this.#moveInDOMTimeout = null;\n      this.parent?.moveEditorInDOM(this);\n    }, 0);\n  }\n\n  _setParentAndPosition(parent, x, y) {\n    parent.changeParent(this);\n    this.x = x;\n    this.y = y;\n    this.fixAndSetPosition();\n  }\n\n  /**\n   * Convert the current rect into a page one.\n   * @param {number} tx - x-translation in screen coordinates.\n   * @param {number} ty - y-translation in screen coordinates.\n   * @param {number} [rotation] - the rotation of the page.\n   */\n  getRect(tx, ty, rotation = this.rotation) {\n    const scale = this.parentScale;\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const [pageX, pageY] = this.pageTranslation;\n    const shiftX = tx / scale;\n    const shiftY = ty / scale;\n    const x = this.x * pageWidth;\n    const y = this.y * pageHeight;\n    const width = this.width * pageWidth;\n    const height = this.height * pageHeight;\n\n    switch (rotation) {\n      case 0:\n        return [\n          x + shiftX + pageX,\n          pageHeight - y - shiftY - height + pageY,\n          x + shiftX + width + pageX,\n          pageHeight - y - shiftY + pageY,\n        ];\n      case 90:\n        return [\n          x + shiftY + pageX,\n          pageHeight - y + shiftX + pageY,\n          x + shiftY + height + pageX,\n          pageHeight - y + shiftX + width + pageY,\n        ];\n      case 180:\n        return [\n          x - shiftX - width + pageX,\n          pageHeight - y + shiftY + pageY,\n          x - shiftX + pageX,\n          pageHeight - y + shiftY + height + pageY,\n        ];\n      case 270:\n        return [\n          x - shiftY - height + pageX,\n          pageHeight - y - shiftX - width + pageY,\n          x - shiftY + pageX,\n          pageHeight - y - shiftX + pageY,\n        ];\n      default:\n        throw new Error(\"Invalid rotation\");\n    }\n  }\n\n  getRectInCurrentCoords(rect, pageHeight) {\n    const [x1, y1, x2, y2] = rect;\n\n    const width = x2 - x1;\n    const height = y2 - y1;\n\n    switch (this.rotation) {\n      case 0:\n        return [x1, pageHeight - y2, width, height];\n      case 90:\n        return [x1, pageHeight - y1, height, width];\n      case 180:\n        return [x2, pageHeight - y1, width, height];\n      case 270:\n        return [x2, pageHeight - y2, height, width];\n      default:\n        throw new Error(\"Invalid rotation\");\n    }\n  }\n\n  /**\n   * Executed once this editor has been rendered.\n   */\n  onceAdded() {}\n\n  /**\n   * Check if the editor contains something.\n   * @returns {boolean}\n   */\n  isEmpty() {\n    return false;\n  }\n\n  /**\n   * Enable edit mode.\n   */\n  enableEditMode() {\n    this.#isInEditMode = true;\n  }\n\n  /**\n   * Disable edit mode.\n   */\n  disableEditMode() {\n    this.#isInEditMode = false;\n  }\n\n  /**\n   * Check if the editor is edited.\n   * @returns {boolean}\n   */\n  isInEditMode() {\n    return this.#isInEditMode;\n  }\n\n  /**\n   * If it returns true, then this editor handles the keyboard\n   * events itself.\n   * @returns {boolean}\n   */\n  shouldGetKeyboardEvents() {\n    return this.#isResizerEnabledForKeyboard;\n  }\n\n  /**\n   * Check if this editor needs to be rebuilt or not.\n   * @returns {boolean}\n   */\n  needsToBeRebuilt() {\n    return this.div && !this.isAttachedToDOM;\n  }\n\n  /**\n   * Rebuild the editor in case it has been removed on undo.\n   *\n   * To implement in subclasses.\n   */\n  rebuild() {\n    this.div?.addEventListener(\"focusin\", this.#boundFocusin);\n    this.div?.addEventListener(\"focusout\", this.#boundFocusout);\n  }\n\n  /**\n   * Rotate the editor.\n   * @param {number} angle\n   */\n  rotate(_angle) {}\n\n  /**\n   * Serialize the editor.\n   * The result of the serialization will be used to construct a\n   * new annotation to add to the pdf document.\n   *\n   * To implement in subclasses.\n   * @param {boolean} [isForCopying]\n   * @param {Object | null} [context]\n   * @returns {Object | null}\n   */\n  serialize(isForCopying = false, context = null) {\n    unreachable(\"An editor must be serializable\");\n  }\n\n  /**\n   * Deserialize the editor.\n   * The result of the deserialization is a new editor.\n   *\n   * @param {Object} data\n   * @param {AnnotationEditorLayer} parent\n   * @param {AnnotationEditorUIManager} uiManager\n   * @returns {AnnotationEditor | null}\n   */\n  static deserialize(data, parent, uiManager) {\n    const editor = new this.prototype.constructor({\n      parent,\n      id: parent.getNextId(),\n      uiManager,\n    });\n    editor.rotation = data.rotation;\n\n    const [pageWidth, pageHeight] = editor.pageDimensions;\n    const [x, y, width, height] = editor.getRectInCurrentCoords(\n      data.rect,\n      pageHeight\n    );\n    editor.x = x / pageWidth;\n    editor.y = y / pageHeight;\n    editor.width = width / pageWidth;\n    editor.height = height / pageHeight;\n\n    return editor;\n  }\n\n  /**\n   * Remove this editor.\n   * It's used on ctrl+backspace action.\n   */\n  remove() {\n    this.div.removeEventListener(\"focusin\", this.#boundFocusin);\n    this.div.removeEventListener(\"focusout\", this.#boundFocusout);\n\n    if (!this.isEmpty()) {\n      // The editor is removed but it can be back at some point thanks to\n      // undo/redo so we must commit it before.\n      this.commit();\n    }\n    if (this.parent) {\n      this.parent.remove(this);\n    } else {\n      this._uiManager.removeEditor(this);\n    }\n\n    if (this.#moveInDOMTimeout) {\n      clearTimeout(this.#moveInDOMTimeout);\n      this.#moveInDOMTimeout = null;\n    }\n    this.#stopResizing();\n    this.removeEditToolbar();\n  }\n\n  /**\n   * @returns {boolean} true if this editor can be resized.\n   */\n  get isResizable() {\n    return false;\n  }\n\n  /**\n   * Add the resizers to this editor.\n   */\n  makeResizable() {\n    if (this.isResizable) {\n      this.#createResizers();\n      this.#resizersDiv.classList.remove(\"hidden\");\n      bindEvents(this, this.div, [\"keydown\"]);\n    }\n  }\n\n  get toolbarPosition() {\n    return null;\n  }\n\n  /**\n   * onkeydown callback.\n   * @param {KeyboardEvent} event\n   */\n  keydown(event) {\n    if (\n      !this.isResizable ||\n      event.target !== this.div ||\n      event.key !== \"Enter\"\n    ) {\n      return;\n    }\n    this._uiManager.setSelected(this);\n    this.#savedDimensions = {\n      savedX: this.x,\n      savedY: this.y,\n      savedWidth: this.width,\n      savedHeight: this.height,\n    };\n    const children = this.#resizersDiv.children;\n    if (!this.#allResizerDivs) {\n      this.#allResizerDivs = Array.from(children);\n      const boundResizerKeydown = this.#resizerKeydown.bind(this);\n      const boundResizerBlur = this.#resizerBlur.bind(this);\n      for (const div of this.#allResizerDivs) {\n        const name = div.getAttribute(\"data-resizer-name\");\n        div.setAttribute(\"role\", \"spinbutton\");\n        div.addEventListener(\"keydown\", boundResizerKeydown);\n        div.addEventListener(\"blur\", boundResizerBlur);\n        div.addEventListener(\"focus\", this.#resizerFocus.bind(this, name));\n        AnnotationEditor._l10nPromise\n          .get(`pdfjs-editor-resizer-label-${name}`)\n          .then(msg => div.setAttribute(\"aria-label\", msg));\n      }\n    }\n\n    // We want to have the resizers in the visual order, so we move the first\n    // (top-left) to the right place.\n    const first = this.#allResizerDivs[0];\n    let firstPosition = 0;\n    for (const div of children) {\n      if (div === first) {\n        break;\n      }\n      firstPosition++;\n    }\n    const nextFirstPosition =\n      (((360 - this.rotation + this.parentRotation) % 360) / 90) *\n      (this.#allResizerDivs.length / 4);\n\n    if (nextFirstPosition !== firstPosition) {\n      // We need to reorder the resizers in the DOM in order to have the focus\n      // on the top-left one.\n      if (nextFirstPosition < firstPosition) {\n        for (let i = 0; i < firstPosition - nextFirstPosition; i++) {\n          this.#resizersDiv.append(this.#resizersDiv.firstChild);\n        }\n      } else if (nextFirstPosition > firstPosition) {\n        for (let i = 0; i < nextFirstPosition - firstPosition; i++) {\n          this.#resizersDiv.firstChild.before(this.#resizersDiv.lastChild);\n        }\n      }\n\n      let i = 0;\n      for (const child of children) {\n        const div = this.#allResizerDivs[i++];\n        const name = div.getAttribute(\"data-resizer-name\");\n        AnnotationEditor._l10nPromise\n          .get(`pdfjs-editor-resizer-label-${name}`)\n          .then(msg => child.setAttribute(\"aria-label\", msg));\n      }\n    }\n\n    this.#setResizerTabIndex(0);\n    this.#isResizerEnabledForKeyboard = true;\n    this.#resizersDiv.firstChild.focus({ focusVisible: true });\n    event.preventDefault();\n    event.stopImmediatePropagation();\n  }\n\n  #resizerKeydown(event) {\n    AnnotationEditor._resizerKeyboardManager.exec(this, event);\n  }\n\n  #resizerBlur(event) {\n    if (\n      this.#isResizerEnabledForKeyboard &&\n      event.relatedTarget?.parentNode !== this.#resizersDiv\n    ) {\n      this.#stopResizing();\n    }\n  }\n\n  #resizerFocus(name) {\n    this.#focusedResizerName = this.#isResizerEnabledForKeyboard ? name : \"\";\n  }\n\n  #setResizerTabIndex(value) {\n    if (!this.#allResizerDivs) {\n      return;\n    }\n    for (const div of this.#allResizerDivs) {\n      div.tabIndex = value;\n    }\n  }\n\n  _resizeWithKeyboard(x, y) {\n    if (!this.#isResizerEnabledForKeyboard) {\n      return;\n    }\n    this.#resizerPointermove(this.#focusedResizerName, {\n      movementX: x,\n      movementY: y,\n    });\n  }\n\n  #stopResizing() {\n    this.#isResizerEnabledForKeyboard = false;\n    this.#setResizerTabIndex(-1);\n    if (this.#savedDimensions) {\n      const { savedX, savedY, savedWidth, savedHeight } = this.#savedDimensions;\n      this.#addResizeToUndoStack(savedX, savedY, savedWidth, savedHeight);\n      this.#savedDimensions = null;\n    }\n  }\n\n  _stopResizingWithKeyboard() {\n    this.#stopResizing();\n    this.div.focus();\n  }\n\n  /**\n   * Select this editor.\n   */\n  select() {\n    this.makeResizable();\n    this.div?.classList.add(\"selectedEditor\");\n    if (!this.#editToolbar) {\n      this.addEditToolbar().then(() => {\n        if (this.div?.classList.contains(\"selectedEditor\")) {\n          // The editor can have been unselected while we were waiting for the\n          // edit toolbar to be created, hence we want to be sure that this\n          // editor is still selected.\n          this.#editToolbar?.show();\n        }\n      });\n      return;\n    }\n    this.#editToolbar?.show();\n  }\n\n  /**\n   * Unselect this editor.\n   */\n  unselect() {\n    this.#resizersDiv?.classList.add(\"hidden\");\n    this.div?.classList.remove(\"selectedEditor\");\n    if (this.div?.contains(document.activeElement)) {\n      // Don't use this.div.blur() because we don't know where the focus will\n      // go.\n      this._uiManager.currentLayer.div.focus();\n    }\n    this.#editToolbar?.hide();\n  }\n\n  /**\n   * Update some parameters which have been changed through the UI.\n   * @param {number} type\n   * @param {*} value\n   */\n  updateParams(type, value) {}\n\n  /**\n   * When the user disables the editing mode some editors can change some of\n   * their properties.\n   */\n  disableEditing() {}\n\n  /**\n   * When the user enables the editing mode some editors can change some of\n   * their properties.\n   */\n  enableEditing() {}\n\n  /**\n   * The editor is about to be edited.\n   */\n  enterInEditMode() {}\n\n  /**\n   * @returns {HTMLElement | null} the element requiring an alt text.\n   */\n  getImageForAltText() {\n    return null;\n  }\n\n  /**\n   * Get the div which really contains the displayed content.\n   * @returns {HTMLDivElement | undefined}\n   */\n  get contentDiv() {\n    return this.div;\n  }\n\n  /**\n   * If true then the editor is currently edited.\n   * @type {boolean}\n   */\n  get isEditing() {\n    return this.#isEditing;\n  }\n\n  /**\n   * When set to true, it means that this editor is currently edited.\n   * @param {boolean} value\n   */\n  set isEditing(value) {\n    this.#isEditing = value;\n    if (!this.parent) {\n      return;\n    }\n    if (value) {\n      this.parent.setSelected(this);\n      this.parent.setActiveEditor(this);\n    } else {\n      this.parent.setActiveEditor(null);\n    }\n  }\n\n  /**\n   * Set the aspect ratio to use when resizing.\n   * @param {number} width\n   * @param {number} height\n   */\n  setAspectRatio(width, height) {\n    this.#keepAspectRatio = true;\n    const aspectRatio = width / height;\n    const { style } = this.div;\n    style.aspectRatio = aspectRatio;\n    style.height = \"auto\";\n  }\n\n  static get MIN_SIZE() {\n    return 16;\n  }\n\n  static canCreateNewEmptyEditor() {\n    return true;\n  }\n}\n\n// This class is used to fake an editor which has been deleted.\nclass FakeEditor extends AnnotationEditor {\n  constructor(params) {\n    super(params);\n    this.annotationElementId = params.annotationElementId;\n    this.deleted = true;\n  }\n\n  serialize() {\n    return {\n      id: this.annotationElementId,\n      deleted: true,\n      pageIndex: this.pageIndex,\n    };\n  }\n}\n\nexport { AnnotationEditor };\n","/* Copyright 2023 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nclass Outliner {\n  #box;\n\n  #verticalEdges = [];\n\n  #intervals = [];\n\n  /**\n   * Construct an outliner.\n   * @param {Array<Object>} boxes - An array of axis-aligned rectangles.\n   * @param {number} borderWidth - The width of the border of the boxes, it\n   *   allows to make the boxes bigger (or smaller).\n   * @param {number} innerMargin - The margin between the boxes and the\n   *   outlines. It's important to not have a null innerMargin when we want to\n   *   draw the outline else the stroked outline could be clipped because of its\n   *   width.\n   * @param {boolean} isLTR - true if we're in LTR mode. It's used to determine\n   *   the last point of the boxes.\n   */\n  constructor(boxes, borderWidth = 0, innerMargin = 0, isLTR = true) {\n    let minX = Infinity;\n    let maxX = -Infinity;\n    let minY = Infinity;\n    let maxY = -Infinity;\n\n    // We round the coordinates to slightly reduce the number of edges in the\n    // final outlines.\n    const NUMBER_OF_DIGITS = 4;\n    const EPSILON = 10 ** -NUMBER_OF_DIGITS;\n\n    // The coordinates of the boxes are in the page coordinate system.\n    for (const { x, y, width, height } of boxes) {\n      const x1 = Math.floor((x - borderWidth) / EPSILON) * EPSILON;\n      const x2 = Math.ceil((x + width + borderWidth) / EPSILON) * EPSILON;\n      const y1 = Math.floor((y - borderWidth) / EPSILON) * EPSILON;\n      const y2 = Math.ceil((y + height + borderWidth) / EPSILON) * EPSILON;\n      const left = [x1, y1, y2, true];\n      const right = [x2, y1, y2, false];\n      this.#verticalEdges.push(left, right);\n\n      minX = Math.min(minX, x1);\n      maxX = Math.max(maxX, x2);\n      minY = Math.min(minY, y1);\n      maxY = Math.max(maxY, y2);\n    }\n\n    const bboxWidth = maxX - minX + 2 * innerMargin;\n    const bboxHeight = maxY - minY + 2 * innerMargin;\n    const shiftedMinX = minX - innerMargin;\n    const shiftedMinY = minY - innerMargin;\n    const lastEdge = this.#verticalEdges.at(isLTR ? -1 : -2);\n    const lastPoint = [lastEdge[0], lastEdge[2]];\n\n    // Convert the coordinates of the edges into box coordinates.\n    for (const edge of this.#verticalEdges) {\n      const [x, y1, y2] = edge;\n      edge[0] = (x - shiftedMinX) / bboxWidth;\n      edge[1] = (y1 - shiftedMinY) / bboxHeight;\n      edge[2] = (y2 - shiftedMinY) / bboxHeight;\n    }\n\n    this.#box = {\n      x: shiftedMinX,\n      y: shiftedMinY,\n      width: bboxWidth,\n      height: bboxHeight,\n      lastPoint,\n    };\n  }\n\n  getOutlines() {\n    // We begin to sort lexicographically the vertical edges by their abscissa,\n    // and then by their ordinate.\n    this.#verticalEdges.sort(\n      (a, b) => a[0] - b[0] || a[1] - b[1] || a[2] - b[2]\n    );\n\n    // We're now using a sweep line algorithm to find the outlines.\n    // We start with the leftmost vertical edge, and we're going to iterate\n    // over all the vertical edges from left to right.\n    // Each time we encounter a left edge, we're going to insert the interval\n    // [y1, y2] in the set of intervals.\n    // This set of intervals is used to break the vertical edges into chunks:\n    // we only take the part of the vertical edge that isn't in the union of\n    // the intervals.\n    const outlineVerticalEdges = [];\n    for (const edge of this.#verticalEdges) {\n      if (edge[3]) {\n        // Left edge.\n        outlineVerticalEdges.push(...this.#breakEdge(edge));\n        this.#insert(edge);\n      } else {\n        // Right edge.\n        this.#remove(edge);\n        outlineVerticalEdges.push(...this.#breakEdge(edge));\n      }\n    }\n    return this.#getOutlines(outlineVerticalEdges);\n  }\n\n  #getOutlines(outlineVerticalEdges) {\n    const edges = [];\n    const allEdges = new Set();\n\n    for (const edge of outlineVerticalEdges) {\n      const [x, y1, y2] = edge;\n      edges.push([x, y1, edge], [x, y2, edge]);\n    }\n\n    // We sort lexicographically the vertices of each edge by their ordinate and\n    // by their abscissa.\n    // Every pair (v_2i, v_{2i + 1}) of vertices defines a horizontal edge.\n    // So for every vertical edge, we're going to add the two vertical edges\n    // which are connected to it through a horizontal edge.\n    edges.sort((a, b) => a[1] - b[1] || a[0] - b[0]);\n    for (let i = 0, ii = edges.length; i < ii; i += 2) {\n      const edge1 = edges[i][2];\n      const edge2 = edges[i + 1][2];\n      edge1.push(edge2);\n      edge2.push(edge1);\n      allEdges.add(edge1);\n      allEdges.add(edge2);\n    }\n    const outlines = [];\n    let outline;\n\n    while (allEdges.size > 0) {\n      const edge = allEdges.values().next().value;\n      let [x, y1, y2, edge1, edge2] = edge;\n      allEdges.delete(edge);\n      let lastPointX = x;\n      let lastPointY = y1;\n\n      outline = [x, y2];\n      outlines.push(outline);\n\n      while (true) {\n        let e;\n        if (allEdges.has(edge1)) {\n          e = edge1;\n        } else if (allEdges.has(edge2)) {\n          e = edge2;\n        } else {\n          break;\n        }\n\n        allEdges.delete(e);\n        [x, y1, y2, edge1, edge2] = e;\n\n        if (lastPointX !== x) {\n          outline.push(lastPointX, lastPointY, x, lastPointY === y1 ? y1 : y2);\n          lastPointX = x;\n        }\n        lastPointY = lastPointY === y1 ? y2 : y1;\n      }\n      outline.push(lastPointX, lastPointY);\n    }\n    return { outlines, box: this.#box };\n  }\n\n  #binarySearch(y) {\n    const array = this.#intervals;\n    let start = 0;\n    let end = array.length - 1;\n\n    while (start <= end) {\n      const middle = (start + end) >> 1;\n      const y1 = array[middle][0];\n      if (y1 === y) {\n        return middle;\n      }\n      if (y1 < y) {\n        start = middle + 1;\n      } else {\n        end = middle - 1;\n      }\n    }\n    return end + 1;\n  }\n\n  #insert([, y1, y2]) {\n    const index = this.#binarySearch(y1);\n    this.#intervals.splice(index, 0, [y1, y2]);\n  }\n\n  #remove([, y1, y2]) {\n    const index = this.#binarySearch(y1);\n    for (let i = index; i < this.#intervals.length; i++) {\n      const [start, end] = this.#intervals[i];\n      if (start !== y1) {\n        break;\n      }\n      if (start === y1 && end === y2) {\n        this.#intervals.splice(i, 1);\n        return;\n      }\n    }\n    for (let i = index - 1; i >= 0; i--) {\n      const [start, end] = this.#intervals[i];\n      if (start !== y1) {\n        break;\n      }\n      if (start === y1 && end === y2) {\n        this.#intervals.splice(i, 1);\n        return;\n      }\n    }\n  }\n\n  #breakEdge(edge) {\n    const [x, y1, y2] = edge;\n    const results = [[x, y1, y2]];\n    const index = this.#binarySearch(y2);\n    for (let i = 0; i < index; i++) {\n      const [start, end] = this.#intervals[i];\n      for (let j = 0, jj = results.length; j < jj; j++) {\n        const [, y3, y4] = results[j];\n        if (end <= y3 || y4 <= start) {\n          // There is no intersection between the interval and the edge, hence\n          // we keep it as is.\n          continue;\n        }\n        if (y3 >= start) {\n          if (y4 > end) {\n            results[j][1] = end;\n          } else {\n            if (jj === 1) {\n              return [];\n            }\n            // The edge is included in the interval, hence we remove it.\n            results.splice(j, 1);\n            j--;\n            jj--;\n          }\n          continue;\n        }\n        results[j][2] = start;\n        if (y4 > end) {\n          results.push([x, end, y4]);\n        }\n      }\n    }\n    return results;\n  }\n}\n\nexport { Outliner };\n","/* Copyright 2022 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @typedef {import(\"./editor.js\").AnnotationEditor} AnnotationEditor */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./annotation_editor_layer.js\").AnnotationEditorLayer} AnnotationEditorLayer */\n\nimport {\n  AnnotationEditorParamsType,\n  AnnotationEditorPrefix,\n  AnnotationEditorType,\n  FeatureTest,\n  getUuid,\n  shadow,\n  Util,\n  warn,\n} from \"../../shared/util.js\";\nimport {\n  fetchData,\n  getColorValues,\n  getRGB,\n  PixelsPerInch,\n} from \"../display_utils.js\";\n\nfunction bindEvents(obj, element, names) {\n  for (const name of names) {\n    element.addEventListener(name, obj[name].bind(obj));\n  }\n}\n\n/**\n * Convert a number between 0 and 100 into an hex number between 0 and 255.\n * @param {number} opacity\n * @return {string}\n */\nfunction opacityToHex(opacity) {\n  return Math.round(Math.min(255, Math.max(1, 255 * opacity)))\n    .toString(16)\n    .padStart(2, \"0\");\n}\n\n/**\n * Class to create some unique ids for the different editors.\n */\nclass IdManager {\n  #id = 0;\n\n  /**\n   * Get a unique id.\n   * @returns {string}\n   */\n  getId() {\n    return `${AnnotationEditorPrefix}${this.#id++}`;\n  }\n}\n\n/**\n * Class to manage the images used by the editors.\n * The main idea is to try to minimize the memory used by the images.\n * The images are cached and reused when possible\n * We use a refCounter to know when an image is not used anymore but we need to\n * be able to restore an image after a remove+undo, so we keep a file reference\n * or an url one.\n */\nclass ImageManager {\n  #baseId = getUuid();\n\n  #id = 0;\n\n  #cache = null;\n\n  static get _isSVGFittingCanvas() {\n    // By default, Firefox doesn't rescale without preserving the aspect ratio\n    // when drawing an SVG image on a canvas, see https://bugzilla.mozilla.org/1547776.\n    // The \"workaround\" is to append \"svgView(preserveAspectRatio(none))\" to the\n    // url, but according to comment #15, it seems that it leads to unexpected\n    // behavior in Safari.\n    const svg = `data:image/svg+xml;charset=UTF-8,<svg viewBox=\"0 0 1 1\" width=\"1\" height=\"1\" xmlns=\"http://www.w3.org/2000/svg\"><rect width=\"1\" height=\"1\" style=\"fill:red;\"/></svg>`;\n    const canvas = new OffscreenCanvas(1, 3);\n    const ctx = canvas.getContext(\"2d\");\n    const image = new Image();\n    image.src = svg;\n    const promise = image.decode().then(() => {\n      ctx.drawImage(image, 0, 0, 1, 1, 0, 0, 1, 3);\n      return new Uint32Array(ctx.getImageData(0, 0, 1, 1).data.buffer)[0] === 0;\n    });\n\n    return shadow(this, \"_isSVGFittingCanvas\", promise);\n  }\n\n  async #get(key, rawData) {\n    this.#cache ||= new Map();\n    let data = this.#cache.get(key);\n    if (data === null) {\n      // We already tried to load the image but it failed.\n      return null;\n    }\n    if (data?.bitmap) {\n      data.refCounter += 1;\n      return data;\n    }\n    try {\n      data ||= {\n        bitmap: null,\n        id: `image_${this.#baseId}_${this.#id++}`,\n        refCounter: 0,\n        isSvg: false,\n      };\n      let image;\n      if (typeof rawData === \"string\") {\n        data.url = rawData;\n        image = await fetchData(rawData, \"blob\");\n      } else {\n        image = data.file = rawData;\n      }\n\n      if (image.type === \"image/svg+xml\") {\n        // Unfortunately, createImageBitmap doesn't work with SVG images.\n        // (see https://bugzilla.mozilla.org/1841972).\n        const mustRemoveAspectRatioPromise = ImageManager._isSVGFittingCanvas;\n        const fileReader = new FileReader();\n        const imageElement = new Image();\n        const imagePromise = new Promise((resolve, reject) => {\n          imageElement.onload = () => {\n            data.bitmap = imageElement;\n            data.isSvg = true;\n            resolve();\n          };\n          fileReader.onload = async () => {\n            const url = (data.svgUrl = fileReader.result);\n            // We need to set the preserveAspectRatio to none in order to let\n            // the image fits the canvas when resizing.\n            imageElement.src = (await mustRemoveAspectRatioPromise)\n              ? `${url}#svgView(preserveAspectRatio(none))`\n              : url;\n          };\n          imageElement.onerror = fileReader.onerror = reject;\n        });\n        fileReader.readAsDataURL(image);\n        await imagePromise;\n      } else {\n        data.bitmap = await createImageBitmap(image);\n      }\n      data.refCounter = 1;\n    } catch (e) {\n      console.error(e);\n      data = null;\n    }\n    this.#cache.set(key, data);\n    if (data) {\n      this.#cache.set(data.id, data);\n    }\n    return data;\n  }\n\n  async getFromFile(file) {\n    const { lastModified, name, size, type } = file;\n    return this.#get(`${lastModified}_${name}_${size}_${type}`, file);\n  }\n\n  async getFromUrl(url) {\n    return this.#get(url, url);\n  }\n\n  async getFromId(id) {\n    this.#cache ||= new Map();\n    const data = this.#cache.get(id);\n    if (!data) {\n      return null;\n    }\n    if (data.bitmap) {\n      data.refCounter += 1;\n      return data;\n    }\n\n    if (data.file) {\n      return this.getFromFile(data.file);\n    }\n    return this.getFromUrl(data.url);\n  }\n\n  getSvgUrl(id) {\n    const data = this.#cache.get(id);\n    if (!data?.isSvg) {\n      return null;\n    }\n    return data.svgUrl;\n  }\n\n  deleteId(id) {\n    this.#cache ||= new Map();\n    const data = this.#cache.get(id);\n    if (!data) {\n      return;\n    }\n    data.refCounter -= 1;\n    if (data.refCounter !== 0) {\n      return;\n    }\n    data.bitmap = null;\n  }\n\n  // We can use the id only if it belongs this manager.\n  // We must take care of having the right manager because we can copy/paste\n  // some images from other documents, hence it'd be a pity to use an id from an\n  // other manager.\n  isValidId(id) {\n    return id.startsWith(`image_${this.#baseId}_`);\n  }\n}\n\n/**\n * Class to handle undo/redo.\n * Commands are just saved in a buffer.\n * If we hit some memory issues we could likely use a circular buffer.\n * It has to be used as a singleton.\n */\nclass CommandManager {\n  #commands = [];\n\n  #locked = false;\n\n  #maxSize;\n\n  #position = -1;\n\n  constructor(maxSize = 128) {\n    this.#maxSize = maxSize;\n  }\n\n  /**\n   * @typedef {Object} addOptions\n   * @property {function} cmd\n   * @property {function} undo\n   * @property {boolean} mustExec\n   * @property {number} type\n   * @property {boolean} overwriteIfSameType\n   * @property {boolean} keepUndo\n   */\n\n  /**\n   * Add a new couple of commands to be used in case of redo/undo.\n   * @param {addOptions} options\n   */\n  add({\n    cmd,\n    undo,\n    mustExec,\n    type = NaN,\n    overwriteIfSameType = false,\n    keepUndo = false,\n  }) {\n    if (mustExec) {\n      cmd();\n    }\n\n    if (this.#locked) {\n      return;\n    }\n\n    const save = { cmd, undo, type };\n    if (this.#position === -1) {\n      if (this.#commands.length > 0) {\n        // All the commands have been undone and then a new one is added\n        // hence we clear the queue.\n        this.#commands.length = 0;\n      }\n      this.#position = 0;\n      this.#commands.push(save);\n      return;\n    }\n\n    if (overwriteIfSameType && this.#commands[this.#position].type === type) {\n      // For example when we change a color we don't want to\n      // be able to undo all the steps, hence we only want to\n      // keep the last undoable action in this sequence of actions.\n      if (keepUndo) {\n        save.undo = this.#commands[this.#position].undo;\n      }\n      this.#commands[this.#position] = save;\n      return;\n    }\n\n    const next = this.#position + 1;\n    if (next === this.#maxSize) {\n      this.#commands.splice(0, 1);\n    } else {\n      this.#position = next;\n      if (next < this.#commands.length) {\n        this.#commands.splice(next);\n      }\n    }\n\n    this.#commands.push(save);\n  }\n\n  /**\n   * Undo the last command.\n   */\n  undo() {\n    if (this.#position === -1) {\n      // Nothing to undo.\n      return;\n    }\n\n    // Avoid to insert something during the undo execution.\n    this.#locked = true;\n    this.#commands[this.#position].undo();\n    this.#locked = false;\n\n    this.#position -= 1;\n  }\n\n  /**\n   * Redo the last command.\n   */\n  redo() {\n    if (this.#position < this.#commands.length - 1) {\n      this.#position += 1;\n\n      // Avoid to insert something during the redo execution.\n      this.#locked = true;\n      this.#commands[this.#position].cmd();\n      this.#locked = false;\n    }\n  }\n\n  /**\n   * Check if there is something to undo.\n   * @returns {boolean}\n   */\n  hasSomethingToUndo() {\n    return this.#position !== -1;\n  }\n\n  /**\n   * Check if there is something to redo.\n   * @returns {boolean}\n   */\n  hasSomethingToRedo() {\n    return this.#position < this.#commands.length - 1;\n  }\n\n  destroy() {\n    this.#commands = null;\n  }\n}\n\n/**\n * Class to handle the different keyboards shortcuts we can have on mac or\n * non-mac OSes.\n */\nclass KeyboardManager {\n  /**\n   * Create a new keyboard manager class.\n   * @param {Array<Array>} callbacks - an array containing an array of shortcuts\n   * and a callback to call.\n   * A shortcut is a string like `ctrl+c` or `mac+ctrl+c` for mac OS.\n   */\n  constructor(callbacks) {\n    this.buffer = [];\n    this.callbacks = new Map();\n    this.allKeys = new Set();\n\n    const { isMac } = FeatureTest.platform;\n    for (const [keys, callback, options = {}] of callbacks) {\n      for (const key of keys) {\n        const isMacKey = key.startsWith(\"mac+\");\n        if (isMac && isMacKey) {\n          this.callbacks.set(key.slice(4), { callback, options });\n          this.allKeys.add(key.split(\"+\").at(-1));\n        } else if (!isMac && !isMacKey) {\n          this.callbacks.set(key, { callback, options });\n          this.allKeys.add(key.split(\"+\").at(-1));\n        }\n      }\n    }\n  }\n\n  /**\n   * Serialize an event into a string in order to match a\n   * potential key for a callback.\n   * @param {KeyboardEvent} event\n   * @returns {string}\n   */\n  #serialize(event) {\n    if (event.altKey) {\n      this.buffer.push(\"alt\");\n    }\n    if (event.ctrlKey) {\n      this.buffer.push(\"ctrl\");\n    }\n    if (event.metaKey) {\n      this.buffer.push(\"meta\");\n    }\n    if (event.shiftKey) {\n      this.buffer.push(\"shift\");\n    }\n    this.buffer.push(event.key);\n    const str = this.buffer.join(\"+\");\n    this.buffer.length = 0;\n\n    return str;\n  }\n\n  /**\n   * Execute a callback, if any, for a given keyboard event.\n   * The self is used as `this` in the callback.\n   * @param {Object} self\n   * @param {KeyboardEvent} event\n   * @returns\n   */\n  exec(self, event) {\n    if (!this.allKeys.has(event.key)) {\n      return;\n    }\n    const info = this.callbacks.get(this.#serialize(event));\n    if (!info) {\n      return;\n    }\n    const {\n      callback,\n      options: { bubbles = false, args = [], checker = null },\n    } = info;\n\n    if (checker && !checker(self, event)) {\n      return;\n    }\n    callback.bind(self, ...args, event)();\n\n    // For example, ctrl+s in a FreeText must be handled by the viewer, hence\n    // the event must bubble.\n    if (!bubbles) {\n      event.stopPropagation();\n      event.preventDefault();\n    }\n  }\n}\n\nclass ColorManager {\n  static _colorsMapping = new Map([\n    [\"CanvasText\", [0, 0, 0]],\n    [\"Canvas\", [255, 255, 255]],\n  ]);\n\n  get _colors() {\n    if (\n      typeof PDFJSDev !== \"undefined\" &&\n      PDFJSDev.test(\"LIB\") &&\n      typeof document === \"undefined\"\n    ) {\n      return shadow(this, \"_colors\", ColorManager._colorsMapping);\n    }\n\n    const colors = new Map([\n      [\"CanvasText\", null],\n      [\"Canvas\", null],\n    ]);\n    getColorValues(colors);\n    return shadow(this, \"_colors\", colors);\n  }\n\n  /**\n   * In High Contrast Mode, the color on the screen is not always the\n   * real color used in the pdf.\n   * For example in some cases white can appear to be black but when saving\n   * we want to have white.\n   * @param {string} color\n   * @returns {Array<number>}\n   */\n  convert(color) {\n    const rgb = getRGB(color);\n    if (!window.matchMedia(\"(forced-colors: active)\").matches) {\n      return rgb;\n    }\n\n    for (const [name, RGB] of this._colors) {\n      if (RGB.every((x, i) => x === rgb[i])) {\n        return ColorManager._colorsMapping.get(name);\n      }\n    }\n    return rgb;\n  }\n\n  /**\n   * An input element must have its color value as a hex string\n   * and not as color name.\n   * So this function converts a name into an hex string.\n   * @param {string} name\n   * @returns {string}\n   */\n  getHexCode(name) {\n    const rgb = this._colors.get(name);\n    if (!rgb) {\n      return name;\n    }\n    return Util.makeHexColor(...rgb);\n  }\n}\n\n/**\n * A pdf has several pages and each of them when it will rendered\n * will have an AnnotationEditorLayer which will contain the some\n * new Annotations associated to an editor in order to modify them.\n *\n * This class is used to manage all the different layers, editors and\n * some action like copy/paste, undo/redo, ...\n */\nclass AnnotationEditorUIManager {\n  #activeEditor = null;\n\n  #allEditors = new Map();\n\n  #allLayers = new Map();\n\n  #altTextManager = null;\n\n  #annotationStorage = null;\n\n  #commandManager = new CommandManager();\n\n  #currentPageIndex = 0;\n\n  #deletedAnnotationsElementIds = new Set();\n\n  #draggingEditors = null;\n\n  #editorTypes = null;\n\n  #editorsToRescale = new Set();\n\n  #filterFactory = null;\n\n  #focusMainContainerTimeoutId = null;\n\n  #highlightColors = null;\n\n  #idManager = new IdManager();\n\n  #isEnabled = false;\n\n  #isWaiting = false;\n\n  #lastActiveElement = null;\n\n  #mainHighlightColorPicker = null;\n\n  #mode = AnnotationEditorType.NONE;\n\n  #selectedEditors = new Set();\n\n  #pageColors = null;\n\n  #boundBlur = this.blur.bind(this);\n\n  #boundFocus = this.focus.bind(this);\n\n  #boundCopy = this.copy.bind(this);\n\n  #boundCut = this.cut.bind(this);\n\n  #boundPaste = this.paste.bind(this);\n\n  #boundKeydown = this.keydown.bind(this);\n\n  #boundOnEditingAction = this.onEditingAction.bind(this);\n\n  #boundOnPageChanging = this.onPageChanging.bind(this);\n\n  #boundOnScaleChanging = this.onScaleChanging.bind(this);\n\n  #boundOnRotationChanging = this.onRotationChanging.bind(this);\n\n  #previousStates = {\n    isEditing: false,\n    isEmpty: true,\n    hasSomethingToUndo: false,\n    hasSomethingToRedo: false,\n    hasSelectedEditor: false,\n  };\n\n  #translation = [0, 0];\n\n  #translationTimeoutId = null;\n\n  #container = null;\n\n  #viewer = null;\n\n  static TRANSLATE_SMALL = 1; // page units.\n\n  static TRANSLATE_BIG = 10; // page units.\n\n  static get _keyboardManager() {\n    const proto = AnnotationEditorUIManager.prototype;\n\n    const arrowChecker = self => {\n      // If the focused element is an input, we don't want to handle the arrow.\n      // For example, sliders can be controlled with the arrow keys.\n      return (\n        self.#container.contains(document.activeElement) &&\n        document.activeElement.tagName !== \"BUTTON\" &&\n        self.hasSomethingToControl()\n      );\n    };\n\n    const textInputChecker = (_self, { target: el }) => {\n      if (el instanceof HTMLInputElement) {\n        const { type } = el;\n        return type !== \"text\" && type !== \"number\";\n      }\n      return true;\n    };\n\n    const small = this.TRANSLATE_SMALL;\n    const big = this.TRANSLATE_BIG;\n\n    return shadow(\n      this,\n      \"_keyboardManager\",\n      new KeyboardManager([\n        [\n          [\"ctrl+a\", \"mac+meta+a\"],\n          proto.selectAll,\n          { checker: textInputChecker },\n        ],\n        [[\"ctrl+z\", \"mac+meta+z\"], proto.undo, { checker: textInputChecker }],\n        [\n          // On mac, depending of the OS version, the event.key is either \"z\" or\n          // \"Z\" when the user presses \"meta+shift+z\".\n          [\n            \"ctrl+y\",\n            \"ctrl+shift+z\",\n            \"mac+meta+shift+z\",\n            \"ctrl+shift+Z\",\n            \"mac+meta+shift+Z\",\n          ],\n          proto.redo,\n          { checker: textInputChecker },\n        ],\n        [\n          [\n            \"Backspace\",\n            \"alt+Backspace\",\n            \"ctrl+Backspace\",\n            \"shift+Backspace\",\n            \"mac+Backspace\",\n            \"mac+alt+Backspace\",\n            \"mac+ctrl+Backspace\",\n            \"Delete\",\n            \"ctrl+Delete\",\n            \"shift+Delete\",\n            \"mac+Delete\",\n          ],\n          proto.delete,\n          { checker: textInputChecker },\n        ],\n        [\n          [\"Enter\", \"mac+Enter\"],\n          proto.addNewEditorFromKeyboard,\n          {\n            // Those shortcuts can be used in the toolbar for some other actions\n            // like zooming, hence we need to check if the container has the\n            // focus.\n            checker: (self, { target: el }) =>\n              !(el instanceof HTMLButtonElement) &&\n              self.#container.contains(el) &&\n              !self.isEnterHandled,\n          },\n        ],\n        [\n          [\" \", \"mac+ \"],\n          proto.addNewEditorFromKeyboard,\n          {\n            // Those shortcuts can be used in the toolbar for some other actions\n            // like zooming, hence we need to check if the container has the\n            // focus.\n            checker: self => self.#container.contains(document.activeElement),\n          },\n        ],\n        [[\"Escape\", \"mac+Escape\"], proto.unselectAll],\n        [\n          [\"ArrowLeft\", \"mac+ArrowLeft\"],\n          proto.translateSelectedEditors,\n          { args: [-small, 0], checker: arrowChecker },\n        ],\n        [\n          [\"ctrl+ArrowLeft\", \"mac+shift+ArrowLeft\"],\n          proto.translateSelectedEditors,\n          { args: [-big, 0], checker: arrowChecker },\n        ],\n        [\n          [\"ArrowRight\", \"mac+ArrowRight\"],\n          proto.translateSelectedEditors,\n          { args: [small, 0], checker: arrowChecker },\n        ],\n        [\n          [\"ctrl+ArrowRight\", \"mac+shift+ArrowRight\"],\n          proto.translateSelectedEditors,\n          { args: [big, 0], checker: arrowChecker },\n        ],\n        [\n          [\"ArrowUp\", \"mac+ArrowUp\"],\n          proto.translateSelectedEditors,\n          { args: [0, -small], checker: arrowChecker },\n        ],\n        [\n          [\"ctrl+ArrowUp\", \"mac+shift+ArrowUp\"],\n          proto.translateSelectedEditors,\n          { args: [0, -big], checker: arrowChecker },\n        ],\n        [\n          [\"ArrowDown\", \"mac+ArrowDown\"],\n          proto.translateSelectedEditors,\n          { args: [0, small], checker: arrowChecker },\n        ],\n        [\n          [\"ctrl+ArrowDown\", \"mac+shift+ArrowDown\"],\n          proto.translateSelectedEditors,\n          { args: [0, big], checker: arrowChecker },\n        ],\n      ])\n    );\n  }\n\n  constructor(\n    container,\n    viewer,\n    altTextManager,\n    eventBus,\n    pdfDocument,\n    pageColors,\n    highlightColors\n  ) {\n    this.#container = container;\n    this.#viewer = viewer;\n    this.#altTextManager = altTextManager;\n    this._eventBus = eventBus;\n    this._eventBus._on(\"editingaction\", this.#boundOnEditingAction);\n    this._eventBus._on(\"pagechanging\", this.#boundOnPageChanging);\n    this._eventBus._on(\"scalechanging\", this.#boundOnScaleChanging);\n    this._eventBus._on(\"rotationchanging\", this.#boundOnRotationChanging);\n    this.#annotationStorage = pdfDocument.annotationStorage;\n    this.#filterFactory = pdfDocument.filterFactory;\n    this.#pageColors = pageColors;\n    this.#highlightColors = highlightColors || null;\n    this.viewParameters = {\n      realScale: PixelsPerInch.PDF_TO_CSS_UNITS,\n      rotation: 0,\n    };\n  }\n\n  destroy() {\n    this.#removeKeyboardManager();\n    this.#removeFocusManager();\n    this._eventBus._off(\"editingaction\", this.#boundOnEditingAction);\n    this._eventBus._off(\"pagechanging\", this.#boundOnPageChanging);\n    this._eventBus._off(\"scalechanging\", this.#boundOnScaleChanging);\n    this._eventBus._off(\"rotationchanging\", this.#boundOnRotationChanging);\n    for (const layer of this.#allLayers.values()) {\n      layer.destroy();\n    }\n    this.#allLayers.clear();\n    this.#allEditors.clear();\n    this.#editorsToRescale.clear();\n    this.#activeEditor = null;\n    this.#selectedEditors.clear();\n    this.#commandManager.destroy();\n    this.#altTextManager?.destroy();\n    if (this.#focusMainContainerTimeoutId) {\n      clearTimeout(this.#focusMainContainerTimeoutId);\n      this.#focusMainContainerTimeoutId = null;\n    }\n    if (this.#translationTimeoutId) {\n      clearTimeout(this.#translationTimeoutId);\n      this.#translationTimeoutId = null;\n    }\n  }\n\n  get hcmFilter() {\n    return shadow(\n      this,\n      \"hcmFilter\",\n      this.#pageColors\n        ? this.#filterFactory.addHCMFilter(\n            this.#pageColors.foreground,\n            this.#pageColors.background\n          )\n        : \"none\"\n    );\n  }\n\n  get direction() {\n    return shadow(\n      this,\n      \"direction\",\n      getComputedStyle(this.#container).direction\n    );\n  }\n\n  get highlightColors() {\n    return shadow(\n      this,\n      \"highlightColors\",\n      this.#highlightColors\n        ? new Map(\n            this.#highlightColors\n              .split(\",\")\n              .map(pair => pair.split(\"=\").map(x => x.trim()))\n          )\n        : null\n    );\n  }\n\n  setMainHighlightColorPicker(colorPicker) {\n    this.#mainHighlightColorPicker = colorPicker;\n  }\n\n  editAltText(editor) {\n    this.#altTextManager?.editAltText(this, editor);\n  }\n\n  onPageChanging({ pageNumber }) {\n    this.#currentPageIndex = pageNumber - 1;\n  }\n\n  focusMainContainer() {\n    this.#container.focus();\n  }\n\n  findParent(x, y) {\n    for (const layer of this.#allLayers.values()) {\n      const {\n        x: layerX,\n        y: layerY,\n        width,\n        height,\n      } = layer.div.getBoundingClientRect();\n      if (\n        x >= layerX &&\n        x <= layerX + width &&\n        y >= layerY &&\n        y <= layerY + height\n      ) {\n        return layer;\n      }\n    }\n    return null;\n  }\n\n  disableUserSelect(value = false) {\n    this.#viewer.classList.toggle(\"noUserSelect\", value);\n  }\n\n  addShouldRescale(editor) {\n    this.#editorsToRescale.add(editor);\n  }\n\n  removeShouldRescale(editor) {\n    this.#editorsToRescale.delete(editor);\n  }\n\n  onScaleChanging({ scale }) {\n    this.commitOrRemove();\n    this.viewParameters.realScale = scale * PixelsPerInch.PDF_TO_CSS_UNITS;\n    for (const editor of this.#editorsToRescale) {\n      editor.onScaleChanging();\n    }\n  }\n\n  onRotationChanging({ pagesRotation }) {\n    this.commitOrRemove();\n    this.viewParameters.rotation = pagesRotation;\n  }\n\n  /**\n   * Add an editor in the annotation storage.\n   * @param {AnnotationEditor} editor\n   */\n  addToAnnotationStorage(editor) {\n    if (\n      !editor.isEmpty() &&\n      this.#annotationStorage &&\n      !this.#annotationStorage.has(editor.id)\n    ) {\n      this.#annotationStorage.setValue(editor.id, editor);\n    }\n  }\n\n  #addFocusManager() {\n    window.addEventListener(\"focus\", this.#boundFocus);\n    window.addEventListener(\"blur\", this.#boundBlur);\n  }\n\n  #removeFocusManager() {\n    window.removeEventListener(\"focus\", this.#boundFocus);\n    window.removeEventListener(\"blur\", this.#boundBlur);\n  }\n\n  blur() {\n    if (!this.hasSelection) {\n      return;\n    }\n    // When several editors are selected and the window loses focus, we want to\n    // keep the last active element in order to be able to focus it again when\n    // the window gets the focus back but we don't want to trigger any focus\n    // callbacks else only one editor will be selected.\n    const { activeElement } = document;\n    for (const editor of this.#selectedEditors) {\n      if (editor.div.contains(activeElement)) {\n        this.#lastActiveElement = [editor, activeElement];\n        editor._focusEventsAllowed = false;\n        break;\n      }\n    }\n  }\n\n  focus() {\n    if (!this.#lastActiveElement) {\n      return;\n    }\n    const [lastEditor, lastActiveElement] = this.#lastActiveElement;\n    this.#lastActiveElement = null;\n    lastActiveElement.addEventListener(\n      \"focusin\",\n      () => {\n        lastEditor._focusEventsAllowed = true;\n      },\n      { once: true }\n    );\n    lastActiveElement.focus();\n  }\n\n  #addKeyboardManager() {\n    // The keyboard events are caught at the container level in order to be able\n    // to execute some callbacks even if the current page doesn't have focus.\n    window.addEventListener(\"keydown\", this.#boundKeydown);\n  }\n\n  #removeKeyboardManager() {\n    window.removeEventListener(\"keydown\", this.#boundKeydown);\n  }\n\n  #addCopyPasteListeners() {\n    document.addEventListener(\"copy\", this.#boundCopy);\n    document.addEventListener(\"cut\", this.#boundCut);\n    document.addEventListener(\"paste\", this.#boundPaste);\n  }\n\n  #removeCopyPasteListeners() {\n    document.removeEventListener(\"copy\", this.#boundCopy);\n    document.removeEventListener(\"cut\", this.#boundCut);\n    document.removeEventListener(\"paste\", this.#boundPaste);\n  }\n\n  addEditListeners() {\n    this.#addKeyboardManager();\n    this.#addCopyPasteListeners();\n  }\n\n  removeEditListeners() {\n    this.#removeKeyboardManager();\n    this.#removeCopyPasteListeners();\n  }\n\n  /**\n   * Copy callback.\n   * @param {ClipboardEvent} event\n   */\n  copy(event) {\n    event.preventDefault();\n\n    // An editor is being edited so just commit it.\n    this.#activeEditor?.commitOrRemove();\n\n    if (!this.hasSelection) {\n      return;\n    }\n\n    const editors = [];\n    for (const editor of this.#selectedEditors) {\n      const serialized = editor.serialize(/* isForCopying = */ true);\n      if (serialized) {\n        editors.push(serialized);\n      }\n    }\n    if (editors.length === 0) {\n      return;\n    }\n\n    event.clipboardData.setData(\"application/pdfjs\", JSON.stringify(editors));\n  }\n\n  /**\n   * Cut callback.\n   * @param {ClipboardEvent} event\n   */\n  cut(event) {\n    this.copy(event);\n    this.delete();\n  }\n\n  /**\n   * Paste callback.\n   * @param {ClipboardEvent} event\n   */\n  paste(event) {\n    event.preventDefault();\n    const { clipboardData } = event;\n    for (const item of clipboardData.items) {\n      for (const editorType of this.#editorTypes) {\n        if (editorType.isHandlingMimeForPasting(item.type)) {\n          editorType.paste(item, this.currentLayer);\n          return;\n        }\n      }\n    }\n\n    let data = clipboardData.getData(\"application/pdfjs\");\n    if (!data) {\n      return;\n    }\n\n    try {\n      data = JSON.parse(data);\n    } catch (ex) {\n      warn(`paste: \"${ex.message}\".`);\n      return;\n    }\n\n    if (!Array.isArray(data)) {\n      return;\n    }\n\n    this.unselectAll();\n    const layer = this.currentLayer;\n\n    try {\n      const newEditors = [];\n      for (const editor of data) {\n        const deserializedEditor = layer.deserialize(editor);\n        if (!deserializedEditor) {\n          return;\n        }\n        newEditors.push(deserializedEditor);\n      }\n\n      const cmd = () => {\n        for (const editor of newEditors) {\n          this.#addEditorToLayer(editor);\n        }\n        this.#selectEditors(newEditors);\n      };\n      const undo = () => {\n        for (const editor of newEditors) {\n          editor.remove();\n        }\n      };\n      this.addCommands({ cmd, undo, mustExec: true });\n    } catch (ex) {\n      warn(`paste: \"${ex.message}\".`);\n    }\n  }\n\n  /**\n   * Keydown callback.\n   * @param {KeyboardEvent} event\n   */\n  keydown(event) {\n    if (!this.isEditorHandlingKeyboard) {\n      AnnotationEditorUIManager._keyboardManager.exec(this, event);\n    }\n  }\n\n  /**\n   * Execute an action for a given name.\n   * For example, the user can click on the \"Undo\" entry in the context menu\n   * and it'll trigger the undo action.\n   * @param {Object} details\n   */\n  onEditingAction(details) {\n    if ([\"undo\", \"redo\", \"delete\", \"selectAll\"].includes(details.name)) {\n      this[details.name]();\n    }\n  }\n\n  /**\n   * Update the different possible states of this manager, e.g. is there\n   * something to undo, redo, ...\n   * @param {Object} details\n   */\n  #dispatchUpdateStates(details) {\n    const hasChanged = Object.entries(details).some(\n      ([key, value]) => this.#previousStates[key] !== value\n    );\n\n    if (hasChanged) {\n      this._eventBus.dispatch(\"annotationeditorstateschanged\", {\n        source: this,\n        details: Object.assign(this.#previousStates, details),\n      });\n    }\n  }\n\n  #dispatchUpdateUI(details) {\n    this._eventBus.dispatch(\"annotationeditorparamschanged\", {\n      source: this,\n      details,\n    });\n  }\n\n  /**\n   * Set the editing state.\n   * It can be useful to temporarily disable it when the user is editing a\n   * FreeText annotation.\n   * @param {boolean} isEditing\n   */\n  setEditingState(isEditing) {\n    if (isEditing) {\n      this.#addFocusManager();\n      this.#addKeyboardManager();\n      this.#addCopyPasteListeners();\n      this.#dispatchUpdateStates({\n        isEditing: this.#mode !== AnnotationEditorType.NONE,\n        isEmpty: this.#isEmpty(),\n        hasSomethingToUndo: this.#commandManager.hasSomethingToUndo(),\n        hasSomethingToRedo: this.#commandManager.hasSomethingToRedo(),\n        hasSelectedEditor: false,\n      });\n    } else {\n      this.#removeFocusManager();\n      this.#removeKeyboardManager();\n      this.#removeCopyPasteListeners();\n      this.#dispatchUpdateStates({\n        isEditing: false,\n      });\n      this.disableUserSelect(false);\n    }\n  }\n\n  registerEditorTypes(types) {\n    if (this.#editorTypes) {\n      return;\n    }\n    this.#editorTypes = types;\n    for (const editorType of this.#editorTypes) {\n      this.#dispatchUpdateUI(editorType.defaultPropertiesToUpdate);\n    }\n  }\n\n  /**\n   * Get an id.\n   * @returns {string}\n   */\n  getId() {\n    return this.#idManager.getId();\n  }\n\n  get currentLayer() {\n    return this.#allLayers.get(this.#currentPageIndex);\n  }\n\n  getLayer(pageIndex) {\n    return this.#allLayers.get(pageIndex);\n  }\n\n  get currentPageIndex() {\n    return this.#currentPageIndex;\n  }\n\n  /**\n   * Add a new layer for a page which will contains the editors.\n   * @param {AnnotationEditorLayer} layer\n   */\n  addLayer(layer) {\n    this.#allLayers.set(layer.pageIndex, layer);\n    if (this.#isEnabled) {\n      layer.enable();\n    } else {\n      layer.disable();\n    }\n  }\n\n  /**\n   * Remove a layer.\n   * @param {AnnotationEditorLayer} layer\n   */\n  removeLayer(layer) {\n    this.#allLayers.delete(layer.pageIndex);\n  }\n\n  /**\n   * Change the editor mode (None, FreeText, Ink, ...)\n   * @param {number} mode\n   * @param {string|null} editId\n   * @param {boolean} [isFromKeyboard] - true if the mode change is due to a\n   *   keyboard action.\n   */\n  updateMode(mode, editId = null, isFromKeyboard = false) {\n    if (this.#mode === mode) {\n      return;\n    }\n    this.#mode = mode;\n    if (mode === AnnotationEditorType.NONE) {\n      this.setEditingState(false);\n      this.#disableAll();\n      return;\n    }\n    this.setEditingState(true);\n    this.#enableAll();\n    this.unselectAll();\n    for (const layer of this.#allLayers.values()) {\n      layer.updateMode(mode);\n    }\n    if (!editId && isFromKeyboard) {\n      this.addNewEditorFromKeyboard();\n      return;\n    }\n\n    if (!editId) {\n      return;\n    }\n    for (const editor of this.#allEditors.values()) {\n      if (editor.annotationElementId === editId) {\n        this.setSelected(editor);\n        editor.enterInEditMode();\n        break;\n      }\n    }\n  }\n\n  addNewEditorFromKeyboard() {\n    if (this.currentLayer.canCreateNewEmptyEditor()) {\n      this.currentLayer.addNewEditor();\n    }\n  }\n\n  /**\n   * Update the toolbar if it's required to reflect the tool currently used.\n   * @param {number} mode\n   * @returns {undefined}\n   */\n  updateToolbar(mode) {\n    if (mode === this.#mode) {\n      return;\n    }\n    this._eventBus.dispatch(\"switchannotationeditormode\", {\n      source: this,\n      mode,\n    });\n  }\n\n  /**\n   * Update a parameter in the current editor or globally.\n   * @param {number} type\n   * @param {*} value\n   */\n  updateParams(type, value) {\n    if (!this.#editorTypes) {\n      return;\n    }\n\n    switch (type) {\n      case AnnotationEditorParamsType.CREATE:\n        this.currentLayer.addNewEditor();\n        return;\n      case AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:\n        this.#mainHighlightColorPicker?.updateColor(value);\n        break;\n    }\n\n    for (const editor of this.#selectedEditors) {\n      editor.updateParams(type, value);\n    }\n\n    for (const editorType of this.#editorTypes) {\n      editorType.updateDefaultParams(type, value);\n    }\n  }\n\n  enableWaiting(mustWait = false) {\n    if (this.#isWaiting === mustWait) {\n      return;\n    }\n    this.#isWaiting = mustWait;\n    for (const layer of this.#allLayers.values()) {\n      if (mustWait) {\n        layer.disableClick();\n      } else {\n        layer.enableClick();\n      }\n      layer.div.classList.toggle(\"waiting\", mustWait);\n    }\n  }\n\n  /**\n   * Enable all the layers.\n   */\n  #enableAll() {\n    if (!this.#isEnabled) {\n      this.#isEnabled = true;\n      for (const layer of this.#allLayers.values()) {\n        layer.enable();\n      }\n    }\n  }\n\n  /**\n   * Disable all the layers.\n   */\n  #disableAll() {\n    this.unselectAll();\n    if (this.#isEnabled) {\n      this.#isEnabled = false;\n      for (const layer of this.#allLayers.values()) {\n        layer.disable();\n      }\n    }\n  }\n\n  /**\n   * Get all the editors belonging to a given page.\n   * @param {number} pageIndex\n   * @returns {Array<AnnotationEditor>}\n   */\n  getEditors(pageIndex) {\n    const editors = [];\n    for (const editor of this.#allEditors.values()) {\n      if (editor.pageIndex === pageIndex) {\n        editors.push(editor);\n      }\n    }\n    return editors;\n  }\n\n  /**\n   * Get an editor with the given id.\n   * @param {string} id\n   * @returns {AnnotationEditor}\n   */\n  getEditor(id) {\n    return this.#allEditors.get(id);\n  }\n\n  /**\n   * Add a new editor.\n   * @param {AnnotationEditor} editor\n   */\n  addEditor(editor) {\n    this.#allEditors.set(editor.id, editor);\n  }\n\n  /**\n   * Remove an editor.\n   * @param {AnnotationEditor} editor\n   */\n  removeEditor(editor) {\n    if (editor.div.contains(document.activeElement)) {\n      if (this.#focusMainContainerTimeoutId) {\n        clearTimeout(this.#focusMainContainerTimeoutId);\n      }\n      this.#focusMainContainerTimeoutId = setTimeout(() => {\n        // When the div is removed from DOM the focus can move on the\n        // document.body, so we need to move it back to the main container.\n        this.focusMainContainer();\n        this.#focusMainContainerTimeoutId = null;\n      }, 0);\n    }\n    this.#allEditors.delete(editor.id);\n    this.unselect(editor);\n    if (\n      !editor.annotationElementId ||\n      !this.#deletedAnnotationsElementIds.has(editor.annotationElementId)\n    ) {\n      this.#annotationStorage?.remove(editor.id);\n    }\n  }\n\n  /**\n   * The annotation element with the given id has been deleted.\n   * @param {AnnotationEditor} editor\n   */\n  addDeletedAnnotationElement(editor) {\n    this.#deletedAnnotationsElementIds.add(editor.annotationElementId);\n    editor.deleted = true;\n  }\n\n  /**\n   * Check if the annotation element with the given id has been deleted.\n   * @param {string} annotationElementId\n   * @returns {boolean}\n   */\n  isDeletedAnnotationElement(annotationElementId) {\n    return this.#deletedAnnotationsElementIds.has(annotationElementId);\n  }\n\n  /**\n   * The annotation element with the given id have been restored.\n   * @param {AnnotationEditor} editor\n   */\n  removeDeletedAnnotationElement(editor) {\n    this.#deletedAnnotationsElementIds.delete(editor.annotationElementId);\n    editor.deleted = false;\n  }\n\n  /**\n   * Add an editor to the layer it belongs to or add it to the global map.\n   * @param {AnnotationEditor} editor\n   */\n  #addEditorToLayer(editor) {\n    const layer = this.#allLayers.get(editor.pageIndex);\n    if (layer) {\n      layer.addOrRebuild(editor);\n    } else {\n      this.addEditor(editor);\n    }\n  }\n\n  /**\n   * Set the given editor as the active one.\n   * @param {AnnotationEditor} editor\n   */\n  setActiveEditor(editor) {\n    if (this.#activeEditor === editor) {\n      return;\n    }\n\n    this.#activeEditor = editor;\n    if (editor) {\n      this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    }\n  }\n\n  /**\n   * Add or remove an editor the current selection.\n   * @param {AnnotationEditor} editor\n   */\n  toggleSelected(editor) {\n    if (this.#selectedEditors.has(editor)) {\n      this.#selectedEditors.delete(editor);\n      editor.unselect();\n      this.#dispatchUpdateStates({\n        hasSelectedEditor: this.hasSelection,\n      });\n      return;\n    }\n    this.#selectedEditors.add(editor);\n    editor.select();\n    this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: true,\n    });\n  }\n\n  /**\n   * Set the last selected editor.\n   * @param {AnnotationEditor} editor\n   */\n  setSelected(editor) {\n    for (const ed of this.#selectedEditors) {\n      if (ed !== editor) {\n        ed.unselect();\n      }\n    }\n    this.#selectedEditors.clear();\n\n    this.#selectedEditors.add(editor);\n    editor.select();\n    this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: true,\n    });\n  }\n\n  /**\n   * Check if the editor is selected.\n   * @param {AnnotationEditor} editor\n   */\n  isSelected(editor) {\n    return this.#selectedEditors.has(editor);\n  }\n\n  get firstSelectedEditor() {\n    return this.#selectedEditors.values().next().value;\n  }\n\n  /**\n   * Unselect an editor.\n   * @param {AnnotationEditor} editor\n   */\n  unselect(editor) {\n    editor.unselect();\n    this.#selectedEditors.delete(editor);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: this.hasSelection,\n    });\n  }\n\n  get hasSelection() {\n    return this.#selectedEditors.size !== 0;\n  }\n\n  get isEnterHandled() {\n    return (\n      this.#selectedEditors.size === 1 &&\n      this.firstSelectedEditor.isEnterHandled\n    );\n  }\n\n  /**\n   * Undo the last command.\n   */\n  undo() {\n    this.#commandManager.undo();\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: this.#commandManager.hasSomethingToUndo(),\n      hasSomethingToRedo: true,\n      isEmpty: this.#isEmpty(),\n    });\n  }\n\n  /**\n   * Redo the last undoed command.\n   */\n  redo() {\n    this.#commandManager.redo();\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: true,\n      hasSomethingToRedo: this.#commandManager.hasSomethingToRedo(),\n      isEmpty: this.#isEmpty(),\n    });\n  }\n\n  /**\n   * Add a command to execute (cmd) and another one to undo it.\n   * @param {Object} params\n   */\n  addCommands(params) {\n    this.#commandManager.add(params);\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: true,\n      hasSomethingToRedo: false,\n      isEmpty: this.#isEmpty(),\n    });\n  }\n\n  #isEmpty() {\n    if (this.#allEditors.size === 0) {\n      return true;\n    }\n\n    if (this.#allEditors.size === 1) {\n      for (const editor of this.#allEditors.values()) {\n        return editor.isEmpty();\n      }\n    }\n\n    return false;\n  }\n\n  /**\n   * Delete the current editor or all.\n   */\n  delete() {\n    this.commitOrRemove();\n    if (!this.hasSelection) {\n      return;\n    }\n\n    const editors = [...this.#selectedEditors];\n    const cmd = () => {\n      for (const editor of editors) {\n        editor.remove();\n      }\n    };\n    const undo = () => {\n      for (const editor of editors) {\n        this.#addEditorToLayer(editor);\n      }\n    };\n\n    this.addCommands({ cmd, undo, mustExec: true });\n  }\n\n  commitOrRemove() {\n    // An editor is being edited so just commit it.\n    this.#activeEditor?.commitOrRemove();\n  }\n\n  hasSomethingToControl() {\n    return this.#activeEditor || this.hasSelection;\n  }\n\n  /**\n   * Select the editors.\n   * @param {Array<AnnotationEditor>} editors\n   */\n  #selectEditors(editors) {\n    this.#selectedEditors.clear();\n    for (const editor of editors) {\n      if (editor.isEmpty()) {\n        continue;\n      }\n      this.#selectedEditors.add(editor);\n      editor.select();\n    }\n    this.#dispatchUpdateStates({ hasSelectedEditor: true });\n  }\n\n  /**\n   * Select all the editors.\n   */\n  selectAll() {\n    for (const editor of this.#selectedEditors) {\n      editor.commit();\n    }\n    this.#selectEditors(this.#allEditors.values());\n  }\n\n  /**\n   * Unselect all the selected editors.\n   */\n  unselectAll() {\n    if (this.#activeEditor) {\n      // An editor is being edited so just commit it.\n      this.#activeEditor.commitOrRemove();\n      if (this.#mode !== AnnotationEditorType.NONE) {\n        // If the mode is NONE, we want to really unselect the editor, hence we\n        // mustn't return here.\n        return;\n      }\n    }\n\n    if (!this.hasSelection) {\n      return;\n    }\n    for (const editor of this.#selectedEditors) {\n      editor.unselect();\n    }\n    this.#selectedEditors.clear();\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: false,\n    });\n  }\n\n  translateSelectedEditors(x, y, noCommit = false) {\n    if (!noCommit) {\n      this.commitOrRemove();\n    }\n    if (!this.hasSelection) {\n      return;\n    }\n\n    this.#translation[0] += x;\n    this.#translation[1] += y;\n    const [totalX, totalY] = this.#translation;\n    const editors = [...this.#selectedEditors];\n\n    // We don't want to have an undo/redo for each translation so we wait a bit\n    // before adding the command to the command manager.\n    const TIME_TO_WAIT = 1000;\n\n    if (this.#translationTimeoutId) {\n      clearTimeout(this.#translationTimeoutId);\n    }\n\n    this.#translationTimeoutId = setTimeout(() => {\n      this.#translationTimeoutId = null;\n      this.#translation[0] = this.#translation[1] = 0;\n\n      this.addCommands({\n        cmd: () => {\n          for (const editor of editors) {\n            if (this.#allEditors.has(editor.id)) {\n              editor.translateInPage(totalX, totalY);\n            }\n          }\n        },\n        undo: () => {\n          for (const editor of editors) {\n            if (this.#allEditors.has(editor.id)) {\n              editor.translateInPage(-totalX, -totalY);\n            }\n          }\n        },\n        mustExec: false,\n      });\n    }, TIME_TO_WAIT);\n\n    for (const editor of editors) {\n      editor.translateInPage(x, y);\n    }\n  }\n\n  /**\n   * Set up the drag session for moving the selected editors.\n   */\n  setUpDragSession() {\n    // Note: don't use any references to the editor's parent which can be null\n    // if the editor belongs to a destroyed page.\n    if (!this.hasSelection) {\n      return;\n    }\n    // Avoid to have spurious text selection in the text layer when dragging.\n    this.disableUserSelect(true);\n    this.#draggingEditors = new Map();\n    for (const editor of this.#selectedEditors) {\n      this.#draggingEditors.set(editor, {\n        savedX: editor.x,\n        savedY: editor.y,\n        savedPageIndex: editor.pageIndex,\n        newX: 0,\n        newY: 0,\n        newPageIndex: -1,\n      });\n    }\n  }\n\n  /**\n   * Ends the drag session.\n   * @returns {boolean} true if at least one editor has been moved.\n   */\n  endDragSession() {\n    if (!this.#draggingEditors) {\n      return false;\n    }\n    this.disableUserSelect(false);\n    const map = this.#draggingEditors;\n    this.#draggingEditors = null;\n    let mustBeAddedInUndoStack = false;\n\n    for (const [{ x, y, pageIndex }, value] of map) {\n      value.newX = x;\n      value.newY = y;\n      value.newPageIndex = pageIndex;\n      mustBeAddedInUndoStack ||=\n        x !== value.savedX ||\n        y !== value.savedY ||\n        pageIndex !== value.savedPageIndex;\n    }\n\n    if (!mustBeAddedInUndoStack) {\n      return false;\n    }\n\n    const move = (editor, x, y, pageIndex) => {\n      if (this.#allEditors.has(editor.id)) {\n        // The editor can be undone/redone on a page which is not visible (and\n        // which potentially has no annotation editor layer), hence we need to\n        // use the pageIndex instead of the parent.\n        const parent = this.#allLayers.get(pageIndex);\n        if (parent) {\n          editor._setParentAndPosition(parent, x, y);\n        } else {\n          editor.pageIndex = pageIndex;\n          editor.x = x;\n          editor.y = y;\n        }\n      }\n    };\n\n    this.addCommands({\n      cmd: () => {\n        for (const [editor, { newX, newY, newPageIndex }] of map) {\n          move(editor, newX, newY, newPageIndex);\n        }\n      },\n      undo: () => {\n        for (const [editor, { savedX, savedY, savedPageIndex }] of map) {\n          move(editor, savedX, savedY, savedPageIndex);\n        }\n      },\n      mustExec: true,\n    });\n\n    return true;\n  }\n\n  /**\n   * Drag the set of selected editors.\n   * @param {number} tx\n   * @param {number} ty\n   */\n  dragSelectedEditors(tx, ty) {\n    if (!this.#draggingEditors) {\n      return;\n    }\n    for (const editor of this.#draggingEditors.keys()) {\n      editor.drag(tx, ty);\n    }\n  }\n\n  /**\n   * Rebuild the editor (usually on undo/redo actions) on a potentially\n   * non-rendered page.\n   * @param {AnnotationEditor} editor\n   */\n  rebuild(editor) {\n    if (editor.parent === null) {\n      const parent = this.getLayer(editor.pageIndex);\n      if (parent) {\n        parent.changeParent(editor);\n        parent.addOrRebuild(editor);\n      } else {\n        this.addEditor(editor);\n        this.addToAnnotationStorage(editor);\n        editor.rebuild();\n      }\n    } else {\n      editor.parent.addOrRebuild(editor);\n    }\n  }\n\n  get isEditorHandlingKeyboard() {\n    return (\n      this.getActive()?.shouldGetKeyboardEvents() ||\n      (this.#selectedEditors.size === 1 &&\n        this.firstSelectedEditor.shouldGetKeyboardEvents())\n    );\n  }\n\n  /**\n   * Is the current editor the one passed as argument?\n   * @param {AnnotationEditor} editor\n   * @returns\n   */\n  isActive(editor) {\n    return this.#activeEditor === editor;\n  }\n\n  /**\n   * Get the current active editor.\n   * @returns {AnnotationEditor|null}\n   */\n  getActive() {\n    return this.#activeEditor;\n  }\n\n  /**\n   * Get the current editor mode.\n   * @returns {number}\n   */\n  getMode() {\n    return this.#mode;\n  }\n\n  get imageManager() {\n    return shadow(this, \"imageManager\", new ImageManager());\n  }\n}\n\nexport {\n  AnnotationEditorUIManager,\n  bindEvents,\n  ColorManager,\n  CommandManager,\n  KeyboardManager,\n  opacityToHex,\n};\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  AbortException,\n  assert,\n  PromiseCapability,\n  warn,\n} from \"../shared/util.js\";\nimport {\n  createResponseStatusError,\n  extractFilenameFromHeader,\n  validateRangeRequestCapabilities,\n  validateResponseStatus,\n} from \"./network_utils.js\";\n\nif (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n  throw new Error(\n    'Module \"./fetch_stream.js\" shall not be used with MOZCENTRAL builds.'\n  );\n}\n\nfunction createFetchOptions(headers, withCredentials, abortController) {\n  return {\n    method: \"GET\",\n    headers,\n    signal: abortController.signal,\n    mode: \"cors\",\n    credentials: withCredentials ? \"include\" : \"same-origin\",\n    redirect: \"follow\",\n  };\n}\n\nfunction createHeaders(httpHeaders) {\n  const headers = new Headers();\n  for (const property in httpHeaders) {\n    const value = httpHeaders[property];\n    if (value === undefined) {\n      continue;\n    }\n    headers.append(property, value);\n  }\n  return headers;\n}\n\nfunction getArrayBuffer(val) {\n  if (val instanceof Uint8Array) {\n    return val.buffer;\n  }\n  if (val instanceof ArrayBuffer) {\n    return val;\n  }\n  warn(`getArrayBuffer - unexpected data format: ${val}`);\n  return new Uint8Array(val).buffer;\n}\n\n/** @implements {IPDFStream} */\nclass PDFFetchStream {\n  constructor(source) {\n    this.source = source;\n    this.isHttp = /^https?:/i.test(source.url);\n    this.httpHeaders = (this.isHttp && source.httpHeaders) || {};\n\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n\n  getFullReader() {\n    assert(\n      !this._fullRequestReader,\n      \"PDFFetchStream.getFullReader can only be called once.\"\n    );\n    this._fullRequestReader = new PDFFetchStreamReader(this);\n    return this._fullRequestReader;\n  }\n\n  getRangeReader(begin, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const reader = new PDFFetchStreamRangeReader(this, begin, end);\n    this._rangeRequestReaders.push(reader);\n    return reader;\n  }\n\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\n\n/** @implements {IPDFStreamReader} */\nclass PDFFetchStreamReader {\n  constructor(stream) {\n    this._stream = stream;\n    this._reader = null;\n    this._loaded = 0;\n    this._filename = null;\n    const source = stream.source;\n    this._withCredentials = source.withCredentials || false;\n    this._contentLength = source.length;\n    this._headersCapability = new PromiseCapability();\n    this._disableRange = source.disableRange || false;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n\n    this._abortController = new AbortController();\n    this._isStreamingSupported = !source.disableStream;\n    this._isRangeSupported = !source.disableRange;\n\n    this._headers = createHeaders(this._stream.httpHeaders);\n\n    const url = source.url;\n    fetch(\n      url,\n      createFetchOptions(\n        this._headers,\n        this._withCredentials,\n        this._abortController\n      )\n    )\n      .then(response => {\n        if (!validateResponseStatus(response.status)) {\n          throw createResponseStatusError(response.status, url);\n        }\n        this._reader = response.body.getReader();\n        this._headersCapability.resolve();\n\n        const getResponseHeader = name => {\n          return response.headers.get(name);\n        };\n        const { allowRangeRequests, suggestedLength } =\n          validateRangeRequestCapabilities({\n            getResponseHeader,\n            isHttp: this._stream.isHttp,\n            rangeChunkSize: this._rangeChunkSize,\n            disableRange: this._disableRange,\n          });\n\n        this._isRangeSupported = allowRangeRequests;\n        // Setting right content length.\n        this._contentLength = suggestedLength || this._contentLength;\n\n        this._filename = extractFilenameFromHeader(getResponseHeader);\n\n        // We need to stop reading when range is supported and streaming is\n        // disabled.\n        if (!this._isStreamingSupported && this._isRangeSupported) {\n          this.cancel(new AbortException(\"Streaming is disabled.\"));\n        }\n      })\n      .catch(this._headersCapability.reject);\n\n    this.onProgress = null;\n  }\n\n  get headersReady() {\n    return this._headersCapability.promise;\n  }\n\n  get filename() {\n    return this._filename;\n  }\n\n  get contentLength() {\n    return this._contentLength;\n  }\n\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n\n  async read() {\n    await this._headersCapability.promise;\n    const { value, done } = await this._reader.read();\n    if (done) {\n      return { value, done };\n    }\n    this._loaded += value.byteLength;\n    this.onProgress?.({\n      loaded: this._loaded,\n      total: this._contentLength,\n    });\n\n    return { value: getArrayBuffer(value), done: false };\n  }\n\n  cancel(reason) {\n    this._reader?.cancel(reason);\n    this._abortController.abort();\n  }\n}\n\n/** @implements {IPDFStreamRangeReader} */\nclass PDFFetchStreamRangeReader {\n  constructor(stream, begin, end) {\n    this._stream = stream;\n    this._reader = null;\n    this._loaded = 0;\n    const source = stream.source;\n    this._withCredentials = source.withCredentials || false;\n    this._readCapability = new PromiseCapability();\n    this._isStreamingSupported = !source.disableStream;\n\n    this._abortController = new AbortController();\n    this._headers = createHeaders(this._stream.httpHeaders);\n    this._headers.append(\"Range\", `bytes=${begin}-${end - 1}`);\n\n    const url = source.url;\n    fetch(\n      url,\n      createFetchOptions(\n        this._headers,\n        this._withCredentials,\n        this._abortController\n      )\n    )\n      .then(response => {\n        if (!validateResponseStatus(response.status)) {\n          throw createResponseStatusError(response.status, url);\n        }\n        this._readCapability.resolve();\n        this._reader = response.body.getReader();\n      })\n      .catch(this._readCapability.reject);\n\n    this.onProgress = null;\n  }\n\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n\n  async read() {\n    await this._readCapability.promise;\n    const { value, done } = await this._reader.read();\n    if (done) {\n      return { value, done };\n    }\n    this._loaded += value.byteLength;\n    this.onProgress?.({ loaded: this._loaded });\n\n    return { value: getArrayBuffer(value), done: false };\n  }\n\n  cancel(reason) {\n    this._reader?.cancel(reason);\n    this._abortController.abort();\n  }\n}\n\nexport { PDFFetchStream };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  assert,\n  bytesToString,\n  FeatureTest,\n  isNodeJS,\n  shadow,\n  string32,\n  unreachable,\n  warn,\n} from \"../shared/util.js\";\n\nclass FontLoader {\n  #systemFonts = new Set();\n\n  constructor({\n    ownerDocument = globalThis.document,\n    styleElement = null, // For testing only.\n  }) {\n    this._document = ownerDocument;\n\n    this.nativeFontFaces = new Set();\n    this.styleElement =\n      typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")\n        ? styleElement\n        : null;\n\n    if (typeof PDFJSDev === \"undefined\" || !PDFJSDev.test(\"MOZCENTRAL\")) {\n      this.loadingRequests = [];\n      this.loadTestFontId = 0;\n    }\n  }\n\n  addNativeFontFace(nativeFontFace) {\n    this.nativeFontFaces.add(nativeFontFace);\n    this._document.fonts.add(nativeFontFace);\n  }\n\n  removeNativeFontFace(nativeFontFace) {\n    this.nativeFontFaces.delete(nativeFontFace);\n    this._document.fonts.delete(nativeFontFace);\n  }\n\n  insertRule(rule) {\n    if (!this.styleElement) {\n      this.styleElement = this._document.createElement(\"style\");\n      this._document.documentElement\n        .getElementsByTagName(\"head\")[0]\n        .append(this.styleElement);\n    }\n    const styleSheet = this.styleElement.sheet;\n    styleSheet.insertRule(rule, styleSheet.cssRules.length);\n  }\n\n  clear() {\n    for (const nativeFontFace of this.nativeFontFaces) {\n      this._document.fonts.delete(nativeFontFace);\n    }\n    this.nativeFontFaces.clear();\n    this.#systemFonts.clear();\n\n    if (this.styleElement) {\n      // Note: ChildNode.remove doesn't throw if the parentNode is undefined.\n      this.styleElement.remove();\n      this.styleElement = null;\n    }\n  }\n\n  async loadSystemFont({ systemFontInfo: info, _inspectFont }) {\n    if (!info || this.#systemFonts.has(info.loadedName)) {\n      return;\n    }\n    assert(\n      !this.disableFontFace,\n      \"loadSystemFont shouldn't be called when `disableFontFace` is set.\"\n    );\n\n    if (this.isFontLoadingAPISupported) {\n      const { loadedName, src, style } = info;\n      const fontFace = new FontFace(loadedName, src, style);\n      this.addNativeFontFace(fontFace);\n      try {\n        await fontFace.load();\n        this.#systemFonts.add(loadedName);\n        _inspectFont?.(info);\n      } catch {\n        warn(\n          `Cannot load system font: ${info.baseFontName}, installing it could help to improve PDF rendering.`\n        );\n\n        this.removeNativeFontFace(fontFace);\n      }\n      return;\n    }\n\n    unreachable(\n      \"Not implemented: loadSystemFont without the Font Loading API.\"\n    );\n  }\n\n  async bind(font) {\n    // Add the font to the DOM only once; skip if the font is already loaded.\n    if (font.attached || (font.missingFile && !font.systemFontInfo)) {\n      return;\n    }\n    font.attached = true;\n\n    if (font.systemFontInfo) {\n      await this.loadSystemFont(font);\n      return;\n    }\n\n    if (this.isFontLoadingAPISupported) {\n      const nativeFontFace = font.createNativeFontFace();\n      if (nativeFontFace) {\n        this.addNativeFontFace(nativeFontFace);\n        try {\n          await nativeFontFace.loaded;\n        } catch (ex) {\n          warn(`Failed to load font '${nativeFontFace.family}': '${ex}'.`);\n\n          // When font loading failed, fall back to the built-in font renderer.\n          font.disableFontFace = true;\n          throw ex;\n        }\n      }\n      return; // The font was, asynchronously, loaded.\n    }\n\n    // !this.isFontLoadingAPISupported\n    const rule = font.createFontFaceRule();\n    if (rule) {\n      this.insertRule(rule);\n\n      if (this.isSyncFontLoadingSupported) {\n        return; // The font was, synchronously, loaded.\n      }\n      if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n        throw new Error(\"Not implemented: async font loading\");\n      }\n      await new Promise(resolve => {\n        const request = this._queueLoadingCallback(resolve);\n        this._prepareFontLoadEvent(font, request);\n      });\n      // The font was, asynchronously, loaded.\n    }\n  }\n\n  get isFontLoadingAPISupported() {\n    const hasFonts = !!this._document?.fonts;\n    if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n      return shadow(\n        this,\n        \"isFontLoadingAPISupported\",\n        hasFonts && !this.styleElement\n      );\n    }\n    return shadow(this, \"isFontLoadingAPISupported\", hasFonts);\n  }\n\n  get isSyncFontLoadingSupported() {\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n      return shadow(this, \"isSyncFontLoadingSupported\", true);\n    }\n\n    let supported = false;\n    if (typeof PDFJSDev === \"undefined\" || !PDFJSDev.test(\"CHROME\")) {\n      if (isNodeJS) {\n        // Node.js - we can pretend that sync font loading is supported.\n        supported = true;\n      } else if (\n        typeof navigator !== \"undefined\" &&\n        typeof navigator?.userAgent === \"string\" &&\n        // User agent string sniffing is bad, but there is no reliable way to\n        // tell if the font is fully loaded and ready to be used with canvas.\n        /Mozilla\\/5.0.*?rv:\\d+.*? Gecko/.test(navigator.userAgent)\n      ) {\n        // Firefox, from version 14, supports synchronous font loading.\n        supported = true;\n      }\n    }\n    return shadow(this, \"isSyncFontLoadingSupported\", supported);\n  }\n\n  _queueLoadingCallback(callback) {\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n      throw new Error(\"Not implemented: _queueLoadingCallback\");\n    }\n\n    function completeRequest() {\n      assert(!request.done, \"completeRequest() cannot be called twice.\");\n      request.done = true;\n\n      // Sending all completed requests in order of how they were queued.\n      while (loadingRequests.length > 0 && loadingRequests[0].done) {\n        const otherRequest = loadingRequests.shift();\n        setTimeout(otherRequest.callback, 0);\n      }\n    }\n\n    const { loadingRequests } = this;\n    const request = {\n      done: false,\n      complete: completeRequest,\n      callback,\n    };\n    loadingRequests.push(request);\n    return request;\n  }\n\n  get _loadTestFont() {\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n      throw new Error(\"Not implemented: _loadTestFont\");\n    }\n\n    // This is a CFF font with 1 glyph for '.' that fills its entire width\n    // and height.\n    const testFont = atob(\n      \"T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQA\" +\n        \"FQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAA\" +\n        \"ALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgA\" +\n        \"AAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1\" +\n        \"AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD\" +\n        \"6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACM\" +\n        \"AooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4D\" +\n        \"IP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAA\" +\n        \"AAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUA\" +\n        \"AQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgAB\" +\n        \"AAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABY\" +\n        \"AAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAA\" +\n        \"AC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" +\n        \"AAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" +\n        \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" +\n        \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" +\n        \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" +\n        \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAA\" +\n        \"AAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQAC\" +\n        \"AQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3\" +\n        \"Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTj\" +\n        \"FQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==\"\n    );\n    return shadow(this, \"_loadTestFont\", testFont);\n  }\n\n  _prepareFontLoadEvent(font, request) {\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n      throw new Error(\"Not implemented: _prepareFontLoadEvent\");\n    }\n\n    /** Hack begin */\n    // There's currently no event when a font has finished downloading so the\n    // following code is a dirty hack to 'guess' when a font is ready.\n    // It's assumed fonts are loaded in order, so add a known test font after\n    // the desired fonts and then test for the loading of that test font.\n\n    function int32(data, offset) {\n      return (\n        (data.charCodeAt(offset) << 24) |\n        (data.charCodeAt(offset + 1) << 16) |\n        (data.charCodeAt(offset + 2) << 8) |\n        (data.charCodeAt(offset + 3) & 0xff)\n      );\n    }\n    function spliceString(s, offset, remove, insert) {\n      const chunk1 = s.substring(0, offset);\n      const chunk2 = s.substring(offset + remove);\n      return chunk1 + insert + chunk2;\n    }\n    let i, ii;\n\n    // The temporary canvas is used to determine if fonts are loaded.\n    const canvas = this._document.createElement(\"canvas\");\n    canvas.width = 1;\n    canvas.height = 1;\n    const ctx = canvas.getContext(\"2d\");\n\n    let called = 0;\n    function isFontReady(name, callback) {\n      // With setTimeout clamping this gives the font ~100ms to load.\n      if (++called > 30) {\n        warn(\"Load test font never loaded.\");\n        callback();\n        return;\n      }\n      ctx.font = \"30px \" + name;\n      ctx.fillText(\".\", 0, 20);\n      const imageData = ctx.getImageData(0, 0, 1, 1);\n      if (imageData.data[3] > 0) {\n        callback();\n        return;\n      }\n      setTimeout(isFontReady.bind(null, name, callback));\n    }\n\n    const loadTestFontId = `lt${Date.now()}${this.loadTestFontId++}`;\n    // Chromium seems to cache fonts based on a hash of the actual font data,\n    // so the font must be modified for each load test else it will appear to\n    // be loaded already.\n    // TODO: This could maybe be made faster by avoiding the btoa of the full\n    // font by splitting it in chunks before hand and padding the font id.\n    let data = this._loadTestFont;\n    const COMMENT_OFFSET = 976; // has to be on 4 byte boundary (for checksum)\n    data = spliceString(\n      data,\n      COMMENT_OFFSET,\n      loadTestFontId.length,\n      loadTestFontId\n    );\n    // CFF checksum is important for IE, adjusting it\n    const CFF_CHECKSUM_OFFSET = 16;\n    const XXXX_VALUE = 0x58585858; // the \"comment\" filled with 'X'\n    let checksum = int32(data, CFF_CHECKSUM_OFFSET);\n    for (i = 0, ii = loadTestFontId.length - 3; i < ii; i += 4) {\n      checksum = (checksum - XXXX_VALUE + int32(loadTestFontId, i)) | 0;\n    }\n    if (i < loadTestFontId.length) {\n      // align to 4 bytes boundary\n      checksum = (checksum - XXXX_VALUE + int32(loadTestFontId + \"XXX\", i)) | 0;\n    }\n    data = spliceString(data, CFF_CHECKSUM_OFFSET, 4, string32(checksum));\n\n    const url = `url(data:font/opentype;base64,${btoa(data)});`;\n    const rule = `@font-face {font-family:\"${loadTestFontId}\";src:${url}}`;\n    this.insertRule(rule);\n\n    const div = this._document.createElement(\"div\");\n    div.style.visibility = \"hidden\";\n    div.style.width = div.style.height = \"10px\";\n    div.style.position = \"absolute\";\n    div.style.top = div.style.left = \"0px\";\n\n    for (const name of [font.loadedName, loadTestFontId]) {\n      const span = this._document.createElement(\"span\");\n      span.textContent = \"Hi\";\n      span.style.fontFamily = name;\n      div.append(span);\n    }\n    this._document.body.append(div);\n\n    isFontReady(loadTestFontId, () => {\n      div.remove();\n      request.complete();\n    });\n    /** Hack end */\n  }\n}\n\nclass FontFaceObject {\n  constructor(\n    translatedData,\n    {\n      isEvalSupported = true,\n      disableFontFace = false,\n      ignoreErrors = false,\n      inspectFont = null,\n    }\n  ) {\n    this.compiledGlyphs = Object.create(null);\n    // importing translated data\n    for (const i in translatedData) {\n      this[i] = translatedData[i];\n    }\n    this.isEvalSupported = isEvalSupported !== false;\n    this.disableFontFace = disableFontFace === true;\n    this.ignoreErrors = ignoreErrors === true;\n    this._inspectFont = inspectFont;\n  }\n\n  createNativeFontFace() {\n    if (!this.data || this.disableFontFace) {\n      return null;\n    }\n    let nativeFontFace;\n    if (!this.cssFontInfo) {\n      nativeFontFace = new FontFace(this.loadedName, this.data, {});\n    } else {\n      const css = {\n        weight: this.cssFontInfo.fontWeight,\n      };\n      if (this.cssFontInfo.italicAngle) {\n        css.style = `oblique ${this.cssFontInfo.italicAngle}deg`;\n      }\n      nativeFontFace = new FontFace(\n        this.cssFontInfo.fontFamily,\n        this.data,\n        css\n      );\n    }\n\n    this._inspectFont?.(this);\n    return nativeFontFace;\n  }\n\n  createFontFaceRule() {\n    if (!this.data || this.disableFontFace) {\n      return null;\n    }\n    const data = bytesToString(this.data);\n    // Add the @font-face rule to the document.\n    const url = `url(data:${this.mimetype};base64,${btoa(data)});`;\n    let rule;\n    if (!this.cssFontInfo) {\n      rule = `@font-face {font-family:\"${this.loadedName}\";src:${url}}`;\n    } else {\n      let css = `font-weight: ${this.cssFontInfo.fontWeight};`;\n      if (this.cssFontInfo.italicAngle) {\n        css += `font-style: oblique ${this.cssFontInfo.italicAngle}deg;`;\n      }\n      rule = `@font-face {font-family:\"${this.cssFontInfo.fontFamily}\";${css}src:${url}}`;\n    }\n\n    this._inspectFont?.(this, url);\n    return rule;\n  }\n\n  getPathGenerator(objs, character) {\n    if (this.compiledGlyphs[character] !== undefined) {\n      return this.compiledGlyphs[character];\n    }\n\n    let cmds;\n    try {\n      cmds = objs.get(this.loadedName + \"_path_\" + character);\n    } catch (ex) {\n      if (!this.ignoreErrors) {\n        throw ex;\n      }\n      warn(`getPathGenerator - ignoring character: \"${ex}\".`);\n\n      return (this.compiledGlyphs[character] = function (c, size) {\n        // No-op function, to allow rendering to continue.\n      });\n    }\n\n    // If we can, compile cmds into JS for MAXIMUM SPEED...\n    if (this.isEvalSupported && FeatureTest.isEvalSupported) {\n      const jsBuf = [];\n      for (const current of cmds) {\n        const args = current.args !== undefined ? current.args.join(\",\") : \"\";\n        jsBuf.push(\"c.\", current.cmd, \"(\", args, \");\\n\");\n      }\n      // eslint-disable-next-line no-new-func\n      return (this.compiledGlyphs[character] = new Function(\n        \"c\",\n        \"size\",\n        jsBuf.join(\"\")\n      ));\n    }\n    // ... but fall back on using Function.prototype.apply() if we're\n    // blocked from using eval() for whatever reason (like CSP policies).\n    return (this.compiledGlyphs[character] = function (c, size) {\n      for (const current of cmds) {\n        if (current.cmd === \"scale\") {\n          current.args = [size, -size];\n        }\n        // eslint-disable-next-line prefer-spread\n        c[current.cmd].apply(c, current.args);\n      }\n    });\n  }\n}\n\nexport { FontFaceObject, FontLoader };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { objectFromMap } from \"../shared/util.js\";\n\nclass Metadata {\n  #metadataMap;\n\n  #data;\n\n  constructor({ parsedData, rawData }) {\n    this.#metadataMap = parsedData;\n    this.#data = rawData;\n  }\n\n  getRaw() {\n    return this.#data;\n  }\n\n  get(name) {\n    return this.#metadataMap.get(name) ?? null;\n  }\n\n  getAll() {\n    return objectFromMap(this.#metadataMap);\n  }\n\n  has(name) {\n    return this.#metadataMap.has(name);\n  }\n}\n\nexport { Metadata };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert, PromiseCapability, stringToBytes } from \"../shared/util.js\";\nimport {\n  createResponseStatusError,\n  extractFilenameFromHeader,\n  validateRangeRequestCapabilities,\n} from \"./network_utils.js\";\n\nif (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n  throw new Error(\n    'Module \"./network.js\" shall not be used with MOZCENTRAL builds.'\n  );\n}\n\nconst OK_RESPONSE = 200;\nconst PARTIAL_CONTENT_RESPONSE = 206;\n\nfunction getArrayBuffer(xhr) {\n  const data = xhr.response;\n  if (typeof data !== \"string\") {\n    return data;\n  }\n  return stringToBytes(data).buffer;\n}\n\nclass NetworkManager {\n  constructor(url, args = {}) {\n    this.url = url;\n    this.isHttp = /^https?:/i.test(url);\n    this.httpHeaders = (this.isHttp && args.httpHeaders) || Object.create(null);\n    this.withCredentials = args.withCredentials || false;\n\n    this.currXhrId = 0;\n    this.pendingRequests = Object.create(null);\n  }\n\n  requestRange(begin, end, listeners) {\n    const args = {\n      begin,\n      end,\n    };\n    for (const prop in listeners) {\n      args[prop] = listeners[prop];\n    }\n    return this.request(args);\n  }\n\n  requestFull(listeners) {\n    return this.request(listeners);\n  }\n\n  request(args) {\n    const xhr = new XMLHttpRequest();\n    const xhrId = this.currXhrId++;\n    const pendingRequest = (this.pendingRequests[xhrId] = { xhr });\n\n    xhr.open(\"GET\", this.url);\n    xhr.withCredentials = this.withCredentials;\n    for (const property in this.httpHeaders) {\n      const value = this.httpHeaders[property];\n      if (value === undefined) {\n        continue;\n      }\n      xhr.setRequestHeader(property, value);\n    }\n    if (this.isHttp && \"begin\" in args && \"end\" in args) {\n      xhr.setRequestHeader(\"Range\", `bytes=${args.begin}-${args.end - 1}`);\n      pendingRequest.expectedStatus = PARTIAL_CONTENT_RESPONSE;\n    } else {\n      pendingRequest.expectedStatus = OK_RESPONSE;\n    }\n    xhr.responseType = \"arraybuffer\";\n\n    if (args.onError) {\n      xhr.onerror = function (evt) {\n        args.onError(xhr.status);\n      };\n    }\n    xhr.onreadystatechange = this.onStateChange.bind(this, xhrId);\n    xhr.onprogress = this.onProgress.bind(this, xhrId);\n\n    pendingRequest.onHeadersReceived = args.onHeadersReceived;\n    pendingRequest.onDone = args.onDone;\n    pendingRequest.onError = args.onError;\n    pendingRequest.onProgress = args.onProgress;\n\n    xhr.send(null);\n\n    return xhrId;\n  }\n\n  onProgress(xhrId, evt) {\n    const pendingRequest = this.pendingRequests[xhrId];\n    if (!pendingRequest) {\n      return; // Maybe abortRequest was called...\n    }\n    pendingRequest.onProgress?.(evt);\n  }\n\n  onStateChange(xhrId, evt) {\n    const pendingRequest = this.pendingRequests[xhrId];\n    if (!pendingRequest) {\n      return; // Maybe abortRequest was called...\n    }\n\n    const xhr = pendingRequest.xhr;\n    if (xhr.readyState >= 2 && pendingRequest.onHeadersReceived) {\n      pendingRequest.onHeadersReceived();\n      delete pendingRequest.onHeadersReceived;\n    }\n\n    if (xhr.readyState !== 4) {\n      return;\n    }\n\n    if (!(xhrId in this.pendingRequests)) {\n      // The XHR request might have been aborted in onHeadersReceived()\n      // callback, in which case we should abort request.\n      return;\n    }\n\n    delete this.pendingRequests[xhrId];\n\n    // Success status == 0 can be on ftp, file and other protocols.\n    if (xhr.status === 0 && this.isHttp) {\n      pendingRequest.onError?.(xhr.status);\n      return;\n    }\n    const xhrStatus = xhr.status || OK_RESPONSE;\n\n    // From http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35.2:\n    // \"A server MAY ignore the Range header\". This means it's possible to\n    // get a 200 rather than a 206 response from a range request.\n    const ok_response_on_range_request =\n      xhrStatus === OK_RESPONSE &&\n      pendingRequest.expectedStatus === PARTIAL_CONTENT_RESPONSE;\n\n    if (\n      !ok_response_on_range_request &&\n      xhrStatus !== pendingRequest.expectedStatus\n    ) {\n      pendingRequest.onError?.(xhr.status);\n      return;\n    }\n\n    const chunk = getArrayBuffer(xhr);\n    if (xhrStatus === PARTIAL_CONTENT_RESPONSE) {\n      const rangeHeader = xhr.getResponseHeader(\"Content-Range\");\n      const matches = /bytes (\\d+)-(\\d+)\\/(\\d+)/.exec(rangeHeader);\n      pendingRequest.onDone({\n        begin: parseInt(matches[1], 10),\n        chunk,\n      });\n    } else if (chunk) {\n      pendingRequest.onDone({\n        begin: 0,\n        chunk,\n      });\n    } else {\n      pendingRequest.onError?.(xhr.status);\n    }\n  }\n\n  getRequestXhr(xhrId) {\n    return this.pendingRequests[xhrId].xhr;\n  }\n\n  isPendingRequest(xhrId) {\n    return xhrId in this.pendingRequests;\n  }\n\n  abortRequest(xhrId) {\n    const xhr = this.pendingRequests[xhrId].xhr;\n    delete this.pendingRequests[xhrId];\n    xhr.abort();\n  }\n}\n\n/** @implements {IPDFStream} */\nclass PDFNetworkStream {\n  constructor(source) {\n    this._source = source;\n    this._manager = new NetworkManager(source.url, {\n      httpHeaders: source.httpHeaders,\n      withCredentials: source.withCredentials,\n    });\n    this._rangeChunkSize = source.rangeChunkSize;\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n\n  _onRangeRequestReaderClosed(reader) {\n    const i = this._rangeRequestReaders.indexOf(reader);\n    if (i >= 0) {\n      this._rangeRequestReaders.splice(i, 1);\n    }\n  }\n\n  getFullReader() {\n    assert(\n      !this._fullRequestReader,\n      \"PDFNetworkStream.getFullReader can only be called once.\"\n    );\n    this._fullRequestReader = new PDFNetworkStreamFullRequestReader(\n      this._manager,\n      this._source\n    );\n    return this._fullRequestReader;\n  }\n\n  getRangeReader(begin, end) {\n    const reader = new PDFNetworkStreamRangeRequestReader(\n      this._manager,\n      begin,\n      end\n    );\n    reader.onClosed = this._onRangeRequestReaderClosed.bind(this);\n    this._rangeRequestReaders.push(reader);\n    return reader;\n  }\n\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\n\n/** @implements {IPDFStreamReader} */\nclass PDFNetworkStreamFullRequestReader {\n  constructor(manager, source) {\n    this._manager = manager;\n\n    const args = {\n      onHeadersReceived: this._onHeadersReceived.bind(this),\n      onDone: this._onDone.bind(this),\n      onError: this._onError.bind(this),\n      onProgress: this._onProgress.bind(this),\n    };\n    this._url = source.url;\n    this._fullRequestId = manager.requestFull(args);\n    this._headersReceivedCapability = new PromiseCapability();\n    this._disableRange = source.disableRange || false;\n    this._contentLength = source.length; // Optional\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n\n    this._isStreamingSupported = false;\n    this._isRangeSupported = false;\n\n    this._cachedChunks = [];\n    this._requests = [];\n    this._done = false;\n    this._storedError = undefined;\n    this._filename = null;\n\n    this.onProgress = null;\n  }\n\n  _onHeadersReceived() {\n    const fullRequestXhrId = this._fullRequestId;\n    const fullRequestXhr = this._manager.getRequestXhr(fullRequestXhrId);\n\n    const getResponseHeader = name => {\n      return fullRequestXhr.getResponseHeader(name);\n    };\n    const { allowRangeRequests, suggestedLength } =\n      validateRangeRequestCapabilities({\n        getResponseHeader,\n        isHttp: this._manager.isHttp,\n        rangeChunkSize: this._rangeChunkSize,\n        disableRange: this._disableRange,\n      });\n\n    if (allowRangeRequests) {\n      this._isRangeSupported = true;\n    }\n    // Setting right content length.\n    this._contentLength = suggestedLength || this._contentLength;\n\n    this._filename = extractFilenameFromHeader(getResponseHeader);\n\n    if (this._isRangeSupported) {\n      // NOTE: by cancelling the full request, and then issuing range\n      // requests, there will be an issue for sites where you can only\n      // request the pdf once. However, if this is the case, then the\n      // server should not be returning that it can support range requests.\n      this._manager.abortRequest(fullRequestXhrId);\n    }\n\n    this._headersReceivedCapability.resolve();\n  }\n\n  _onDone(data) {\n    if (data) {\n      if (this._requests.length > 0) {\n        const requestCapability = this._requests.shift();\n        requestCapability.resolve({ value: data.chunk, done: false });\n      } else {\n        this._cachedChunks.push(data.chunk);\n      }\n    }\n    this._done = true;\n    if (this._cachedChunks.length > 0) {\n      return;\n    }\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({ value: undefined, done: true });\n    }\n    this._requests.length = 0;\n  }\n\n  _onError(status) {\n    this._storedError = createResponseStatusError(status, this._url);\n    this._headersReceivedCapability.reject(this._storedError);\n    for (const requestCapability of this._requests) {\n      requestCapability.reject(this._storedError);\n    }\n    this._requests.length = 0;\n    this._cachedChunks.length = 0;\n  }\n\n  _onProgress(evt) {\n    this.onProgress?.({\n      loaded: evt.loaded,\n      total: evt.lengthComputable ? evt.total : this._contentLength,\n    });\n  }\n\n  get filename() {\n    return this._filename;\n  }\n\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n\n  get contentLength() {\n    return this._contentLength;\n  }\n\n  get headersReady() {\n    return this._headersReceivedCapability.promise;\n  }\n\n  async read() {\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    if (this._cachedChunks.length > 0) {\n      const chunk = this._cachedChunks.shift();\n      return { value: chunk, done: false };\n    }\n    if (this._done) {\n      return { value: undefined, done: true };\n    }\n    const requestCapability = new PromiseCapability();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n\n  cancel(reason) {\n    this._done = true;\n    this._headersReceivedCapability.reject(reason);\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({ value: undefined, done: true });\n    }\n    this._requests.length = 0;\n    if (this._manager.isPendingRequest(this._fullRequestId)) {\n      this._manager.abortRequest(this._fullRequestId);\n    }\n    this._fullRequestReader = null;\n  }\n}\n\n/** @implements {IPDFStreamRangeReader} */\nclass PDFNetworkStreamRangeRequestReader {\n  constructor(manager, begin, end) {\n    this._manager = manager;\n\n    const args = {\n      onDone: this._onDone.bind(this),\n      onError: this._onError.bind(this),\n      onProgress: this._onProgress.bind(this),\n    };\n    this._url = manager.url;\n    this._requestId = manager.requestRange(begin, end, args);\n    this._requests = [];\n    this._queuedChunk = null;\n    this._done = false;\n    this._storedError = undefined;\n\n    this.onProgress = null;\n    this.onClosed = null;\n  }\n\n  _close() {\n    this.onClosed?.(this);\n  }\n\n  _onDone(data) {\n    const chunk = data.chunk;\n    if (this._requests.length > 0) {\n      const requestCapability = this._requests.shift();\n      requestCapability.resolve({ value: chunk, done: false });\n    } else {\n      this._queuedChunk = chunk;\n    }\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({ value: undefined, done: true });\n    }\n    this._requests.length = 0;\n    this._close();\n  }\n\n  _onError(status) {\n    this._storedError = createResponseStatusError(status, this._url);\n    for (const requestCapability of this._requests) {\n      requestCapability.reject(this._storedError);\n    }\n    this._requests.length = 0;\n    this._queuedChunk = null;\n  }\n\n  _onProgress(evt) {\n    if (!this.isStreamingSupported) {\n      this.onProgress?.({ loaded: evt.loaded });\n    }\n  }\n\n  get isStreamingSupported() {\n    return false;\n  }\n\n  async read() {\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    if (this._queuedChunk !== null) {\n      const chunk = this._queuedChunk;\n      this._queuedChunk = null;\n      return { value: chunk, done: false };\n    }\n    if (this._done) {\n      return { value: undefined, done: true };\n    }\n    const requestCapability = new PromiseCapability();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({ value: undefined, done: true });\n    }\n    this._requests.length = 0;\n    if (this._manager.isPendingRequest(this._requestId)) {\n      this._manager.abortRequest(this._requestId);\n    }\n    this._close();\n  }\n}\n\nexport { PDFNetworkStream };\n","/* Copyright 2017 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { stringToBytes } from \"../shared/util.js\";\n\n// This getFilenameFromContentDispositionHeader function is adapted from\n// https://github.com/Rob--W/open-in-browser/blob/7e2e35a38b8b4e981b11da7b2f01df0149049e92/extension/content-disposition.js\n// with the following changes:\n// - Modified to conform to PDF.js's coding style.\n// - Move return to the end of the function to prevent Babel from dropping the\n//   function declarations.\n\n/**\n * Extract file name from the Content-Disposition HTTP response header.\n *\n * @param {string} contentDisposition\n * @returns {string} Filename, if found in the Content-Disposition header.\n */\nfunction getFilenameFromContentDispositionHeader(contentDisposition) {\n  let needsEncodingFixup = true;\n\n  // filename*=ext-value (\"ext-value\" from RFC 5987, referenced by RFC 6266).\n  let tmp = toParamRegExp(\"filename\\\\*\", \"i\").exec(contentDisposition);\n  if (tmp) {\n    tmp = tmp[1];\n    let filename = rfc2616unquote(tmp);\n    filename = unescape(filename);\n    filename = rfc5987decode(filename);\n    filename = rfc2047decode(filename);\n    return fixupEncoding(filename);\n  }\n\n  // Continuations (RFC 2231 section 3, referenced by RFC 5987 section 3.1).\n  // filename*n*=part\n  // filename*n=part\n  tmp = rfc2231getparam(contentDisposition);\n  if (tmp) {\n    // RFC 2047, section\n    const filename = rfc2047decode(tmp);\n    return fixupEncoding(filename);\n  }\n\n  // filename=value (RFC 5987, section 4.1).\n  tmp = toParamRegExp(\"filename\", \"i\").exec(contentDisposition);\n  if (tmp) {\n    tmp = tmp[1];\n    let filename = rfc2616unquote(tmp);\n    filename = rfc2047decode(filename);\n    return fixupEncoding(filename);\n  }\n\n  // After this line there are only function declarations. We cannot put\n  // \"return\" here for readability because babel would then drop the function\n  // declarations...\n  function toParamRegExp(attributePattern, flags) {\n    return new RegExp(\n      \"(?:^|;)\\\\s*\" +\n        attributePattern +\n        \"\\\\s*=\\\\s*\" +\n        // Captures: value = token | quoted-string\n        // (RFC 2616, section 3.6 and referenced by RFC 6266 4.1)\n        \"(\" +\n        '[^\";\\\\s][^;\\\\s]*' +\n        \"|\" +\n        '\"(?:[^\"\\\\\\\\]|\\\\\\\\\"?)+\"?' +\n        \")\",\n      flags\n    );\n  }\n  function textdecode(encoding, value) {\n    if (encoding) {\n      if (!/^[\\x00-\\xFF]+$/.test(value)) {\n        return value;\n      }\n      try {\n        const decoder = new TextDecoder(encoding, { fatal: true });\n        const buffer = stringToBytes(value);\n        value = decoder.decode(buffer);\n        needsEncodingFixup = false;\n      } catch {\n        // TextDecoder constructor threw - unrecognized encoding.\n      }\n    }\n    return value;\n  }\n  function fixupEncoding(value) {\n    if (needsEncodingFixup && /[\\x80-\\xff]/.test(value)) {\n      // Maybe multi-byte UTF-8.\n      value = textdecode(\"utf-8\", value);\n      if (needsEncodingFixup) {\n        // Try iso-8859-1 encoding.\n        value = textdecode(\"iso-8859-1\", value);\n      }\n    }\n    return value;\n  }\n  function rfc2231getparam(contentDispositionStr) {\n    const matches = [];\n    let match;\n    // Iterate over all filename*n= and filename*n*= with n being an integer\n    // of at least zero. Any non-zero number must not start with '0'.\n    const iter = toParamRegExp(\"filename\\\\*((?!0\\\\d)\\\\d+)(\\\\*?)\", \"ig\");\n    while ((match = iter.exec(contentDispositionStr)) !== null) {\n      let [, n, quot, part] = match; // eslint-disable-line prefer-const\n      n = parseInt(n, 10);\n      if (n in matches) {\n        // Ignore anything after the invalid second filename*0.\n        if (n === 0) {\n          break;\n        }\n        continue;\n      }\n      matches[n] = [quot, part];\n    }\n    const parts = [];\n    for (let n = 0; n < matches.length; ++n) {\n      if (!(n in matches)) {\n        // Numbers must be consecutive. Truncate when there is a hole.\n        break;\n      }\n      let [quot, part] = matches[n]; // eslint-disable-line prefer-const\n      part = rfc2616unquote(part);\n      if (quot) {\n        part = unescape(part);\n        if (n === 0) {\n          part = rfc5987decode(part);\n        }\n      }\n      parts.push(part);\n    }\n    return parts.join(\"\");\n  }\n  function rfc2616unquote(value) {\n    if (value.startsWith('\"')) {\n      const parts = value.slice(1).split('\\\\\"');\n      // Find the first unescaped \" and terminate there.\n      for (let i = 0; i < parts.length; ++i) {\n        const quotindex = parts[i].indexOf('\"');\n        if (quotindex !== -1) {\n          parts[i] = parts[i].slice(0, quotindex);\n          parts.length = i + 1; // Truncates and stop the iteration.\n        }\n        parts[i] = parts[i].replaceAll(/\\\\(.)/g, \"$1\");\n      }\n      value = parts.join('\"');\n    }\n    return value;\n  }\n  function rfc5987decode(extvalue) {\n    // Decodes \"ext-value\" from RFC 5987.\n    const encodingend = extvalue.indexOf(\"'\");\n    if (encodingend === -1) {\n      // Some servers send \"filename*=\" without encoding 'language' prefix,\n      // e.g. in https://github.com/Rob--W/open-in-browser/issues/26\n      // Let's accept the value like Firefox (57) (Chrome 62 rejects it).\n      return extvalue;\n    }\n    const encoding = extvalue.slice(0, encodingend);\n    const langvalue = extvalue.slice(encodingend + 1);\n    // Ignore language (RFC 5987 section 3.2.1, and RFC 6266 section 4.1 ).\n    const value = langvalue.replace(/^[^']*'/, \"\");\n    return textdecode(encoding, value);\n  }\n  function rfc2047decode(value) {\n    // RFC 2047-decode the result. Firefox tried to drop support for it, but\n    // backed out because some servers use it - https://bugzil.la/875615\n    // Firefox's condition for decoding is here: https://searchfox.org/mozilla-central/rev/4a590a5a15e35d88a3b23dd6ac3c471cf85b04a8/netwerk/mime/nsMIMEHeaderParamImpl.cpp#742-748\n\n    // We are more strict and only recognize RFC 2047-encoding if the value\n    // starts with \"=?\", since then it is likely that the full value is\n    // RFC 2047-encoded.\n\n    // Firefox also decodes words even where RFC 2047 section 5 states:\n    // \"An 'encoded-word' MUST NOT appear within a 'quoted-string'.\"\n    if (!value.startsWith(\"=?\") || /[\\x00-\\x19\\x80-\\xff]/.test(value)) {\n      return value;\n    }\n    // RFC 2047, section 2.4\n    // encoded-word = \"=?\" charset \"?\" encoding \"?\" encoded-text \"?=\"\n    // charset = token (but let's restrict to characters that denote a\n    //       possibly valid encoding).\n    // encoding = q or b\n    // encoded-text = any printable ASCII character other than ? or space.\n    //        ... but Firefox permits ? and space.\n    return value.replaceAll(\n      /=\\?([\\w-]*)\\?([QqBb])\\?((?:[^?]|\\?(?!=))*)\\?=/g,\n      function (matches, charset, encoding, text) {\n        if (encoding === \"q\" || encoding === \"Q\") {\n          // RFC 2047 section 4.2.\n          text = text.replaceAll(\"_\", \" \");\n          text = text.replaceAll(/=([0-9a-fA-F]{2})/g, function (match, hex) {\n            return String.fromCharCode(parseInt(hex, 16));\n          });\n          return textdecode(charset, text);\n        } // else encoding is b or B - base64 (RFC 2047 section 4.1)\n        try {\n          text = atob(text);\n        } catch {}\n        return textdecode(charset, text);\n      }\n    );\n  }\n\n  return \"\";\n}\n\nexport { getFilenameFromContentDispositionHeader };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  assert,\n  MissingPDFException,\n  UnexpectedResponseException,\n} from \"../shared/util.js\";\nimport { getFilenameFromContentDispositionHeader } from \"./content_disposition.js\";\nimport { isPdfFile } from \"./display_utils.js\";\n\nfunction validateRangeRequestCapabilities({\n  getResponseHeader,\n  isHttp,\n  rangeChunkSize,\n  disableRange,\n}) {\n  if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n    assert(\n      Number.isInteger(rangeChunkSize) && rangeChunkSize > 0,\n      \"rangeChunkSize must be an integer larger than zero.\"\n    );\n  }\n  const returnValues = {\n    allowRangeRequests: false,\n    suggestedLength: undefined,\n  };\n\n  const length = parseInt(getResponseHeader(\"Content-Length\"), 10);\n  if (!Number.isInteger(length)) {\n    return returnValues;\n  }\n\n  returnValues.suggestedLength = length;\n\n  if (length <= 2 * rangeChunkSize) {\n    // The file size is smaller than the size of two chunks, so it does not\n    // make any sense to abort the request and retry with a range request.\n    return returnValues;\n  }\n\n  if (disableRange || !isHttp) {\n    return returnValues;\n  }\n  if (getResponseHeader(\"Accept-Ranges\") !== \"bytes\") {\n    return returnValues;\n  }\n\n  const contentEncoding = getResponseHeader(\"Content-Encoding\") || \"identity\";\n  if (contentEncoding !== \"identity\") {\n    return returnValues;\n  }\n\n  returnValues.allowRangeRequests = true;\n  return returnValues;\n}\n\nfunction extractFilenameFromHeader(getResponseHeader) {\n  const contentDisposition = getResponseHeader(\"Content-Disposition\");\n  if (contentDisposition) {\n    let filename = getFilenameFromContentDispositionHeader(contentDisposition);\n    if (filename.includes(\"%\")) {\n      try {\n        filename = decodeURIComponent(filename);\n      } catch {}\n    }\n    if (isPdfFile(filename)) {\n      return filename;\n    }\n  }\n  return null;\n}\n\nfunction createResponseStatusError(status, url) {\n  if (status === 404 || (status === 0 && url.startsWith(\"file:\"))) {\n    return new MissingPDFException('Missing PDF \"' + url + '\".');\n  }\n  return new UnexpectedResponseException(\n    `Unexpected server response (${status}) while retrieving PDF \"${url}\".`,\n    status\n  );\n}\n\nfunction validateResponseStatus(status) {\n  return status === 200 || status === 206;\n}\n\nexport {\n  createResponseStatusError,\n  extractFilenameFromHeader,\n  validateRangeRequestCapabilities,\n  validateResponseStatus,\n};\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  AbortException,\n  assert,\n  isNodeJS,\n  MissingPDFException,\n  PromiseCapability,\n} from \"../shared/util.js\";\nimport {\n  extractFilenameFromHeader,\n  validateRangeRequestCapabilities,\n} from \"./network_utils.js\";\n\nif (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n  throw new Error(\n    'Module \"./node_stream.js\" shall not be used with MOZCENTRAL builds.'\n  );\n}\n\nlet fs, http, https, url;\nif (isNodeJS) {\n  // Native packages.\n  fs = await import(/* webpackIgnore: true */ \"fs\");\n  http = await import(/* webpackIgnore: true */ \"http\");\n  https = await import(/* webpackIgnore: true */ \"https\");\n  url = await import(/* webpackIgnore: true */ \"url\");\n}\n\nconst fileUriRegex = /^file:\\/\\/\\/[a-zA-Z]:\\//;\n\nfunction parseUrl(sourceUrl) {\n  const parsedUrl = url.parse(sourceUrl);\n  if (parsedUrl.protocol === \"file:\" || parsedUrl.host) {\n    return parsedUrl;\n  }\n  // Prepending 'file:///' to Windows absolute path.\n  if (/^[a-z]:[/\\\\]/i.test(sourceUrl)) {\n    return url.parse(`file:///${sourceUrl}`);\n  }\n  // Changes protocol to 'file:' if url refers to filesystem.\n  if (!parsedUrl.host) {\n    parsedUrl.protocol = \"file:\";\n  }\n  return parsedUrl;\n}\n\nclass PDFNodeStream {\n  constructor(source) {\n    this.source = source;\n    this.url = parseUrl(source.url);\n    this.isHttp =\n      this.url.protocol === \"http:\" || this.url.protocol === \"https:\";\n    // Check if url refers to filesystem.\n    this.isFsUrl = this.url.protocol === \"file:\";\n    this.httpHeaders = (this.isHttp && source.httpHeaders) || {};\n\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n\n  getFullReader() {\n    assert(\n      !this._fullRequestReader,\n      \"PDFNodeStream.getFullReader can only be called once.\"\n    );\n    this._fullRequestReader = this.isFsUrl\n      ? new PDFNodeStreamFsFullReader(this)\n      : new PDFNodeStreamFullReader(this);\n    return this._fullRequestReader;\n  }\n\n  getRangeReader(start, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const rangeReader = this.isFsUrl\n      ? new PDFNodeStreamFsRangeReader(this, start, end)\n      : new PDFNodeStreamRangeReader(this, start, end);\n    this._rangeRequestReaders.push(rangeReader);\n    return rangeReader;\n  }\n\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\n\nclass BaseFullReader {\n  constructor(stream) {\n    this._url = stream.url;\n    this._done = false;\n    this._storedError = null;\n    this.onProgress = null;\n    const source = stream.source;\n    this._contentLength = source.length; // optional\n    this._loaded = 0;\n    this._filename = null;\n\n    this._disableRange = source.disableRange || false;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n\n    this._isStreamingSupported = !source.disableStream;\n    this._isRangeSupported = !source.disableRange;\n\n    this._readableStream = null;\n    this._readCapability = new PromiseCapability();\n    this._headersCapability = new PromiseCapability();\n  }\n\n  get headersReady() {\n    return this._headersCapability.promise;\n  }\n\n  get filename() {\n    return this._filename;\n  }\n\n  get contentLength() {\n    return this._contentLength;\n  }\n\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n\n  async read() {\n    await this._readCapability.promise;\n    if (this._done) {\n      return { value: undefined, done: true };\n    }\n    if (this._storedError) {\n      throw this._storedError;\n    }\n\n    const chunk = this._readableStream.read();\n    if (chunk === null) {\n      this._readCapability = new PromiseCapability();\n      return this.read();\n    }\n    this._loaded += chunk.length;\n    this.onProgress?.({\n      loaded: this._loaded,\n      total: this._contentLength,\n    });\n\n    // Ensure that `read()` method returns ArrayBuffer.\n    const buffer = new Uint8Array(chunk).buffer;\n    return { value: buffer, done: false };\n  }\n\n  cancel(reason) {\n    // Call `this._error()` method when cancel is called\n    // before _readableStream is set.\n    if (!this._readableStream) {\n      this._error(reason);\n      return;\n    }\n    this._readableStream.destroy(reason);\n  }\n\n  _error(reason) {\n    this._storedError = reason;\n    this._readCapability.resolve();\n  }\n\n  _setReadableStream(readableStream) {\n    this._readableStream = readableStream;\n    readableStream.on(\"readable\", () => {\n      this._readCapability.resolve();\n    });\n\n    readableStream.on(\"end\", () => {\n      // Destroy readable to minimize resource usage.\n      readableStream.destroy();\n      this._done = true;\n      this._readCapability.resolve();\n    });\n\n    readableStream.on(\"error\", reason => {\n      this._error(reason);\n    });\n\n    // We need to stop reading when range is supported and streaming is\n    // disabled.\n    if (!this._isStreamingSupported && this._isRangeSupported) {\n      this._error(new AbortException(\"streaming is disabled\"));\n    }\n\n    // Destroy ReadableStream if already in errored state.\n    if (this._storedError) {\n      this._readableStream.destroy(this._storedError);\n    }\n  }\n}\n\nclass BaseRangeReader {\n  constructor(stream) {\n    this._url = stream.url;\n    this._done = false;\n    this._storedError = null;\n    this.onProgress = null;\n    this._loaded = 0;\n    this._readableStream = null;\n    this._readCapability = new PromiseCapability();\n    const source = stream.source;\n    this._isStreamingSupported = !source.disableStream;\n  }\n\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n\n  async read() {\n    await this._readCapability.promise;\n    if (this._done) {\n      return { value: undefined, done: true };\n    }\n    if (this._storedError) {\n      throw this._storedError;\n    }\n\n    const chunk = this._readableStream.read();\n    if (chunk === null) {\n      this._readCapability = new PromiseCapability();\n      return this.read();\n    }\n    this._loaded += chunk.length;\n    this.onProgress?.({ loaded: this._loaded });\n\n    // Ensure that `read()` method returns ArrayBuffer.\n    const buffer = new Uint8Array(chunk).buffer;\n    return { value: buffer, done: false };\n  }\n\n  cancel(reason) {\n    // Call `this._error()` method when cancel is called\n    // before _readableStream is set.\n    if (!this._readableStream) {\n      this._error(reason);\n      return;\n    }\n    this._readableStream.destroy(reason);\n  }\n\n  _error(reason) {\n    this._storedError = reason;\n    this._readCapability.resolve();\n  }\n\n  _setReadableStream(readableStream) {\n    this._readableStream = readableStream;\n    readableStream.on(\"readable\", () => {\n      this._readCapability.resolve();\n    });\n\n    readableStream.on(\"end\", () => {\n      // Destroy readableStream to minimize resource usage.\n      readableStream.destroy();\n      this._done = true;\n      this._readCapability.resolve();\n    });\n\n    readableStream.on(\"error\", reason => {\n      this._error(reason);\n    });\n\n    // Destroy readableStream if already in errored state.\n    if (this._storedError) {\n      this._readableStream.destroy(this._storedError);\n    }\n  }\n}\n\nfunction createRequestOptions(parsedUrl, headers) {\n  return {\n    protocol: parsedUrl.protocol,\n    auth: parsedUrl.auth,\n    host: parsedUrl.hostname,\n    port: parsedUrl.port,\n    path: parsedUrl.path,\n    method: \"GET\",\n    headers,\n  };\n}\n\nclass PDFNodeStreamFullReader extends BaseFullReader {\n  constructor(stream) {\n    super(stream);\n\n    const handleResponse = response => {\n      if (response.statusCode === 404) {\n        const error = new MissingPDFException(`Missing PDF \"${this._url}\".`);\n        this._storedError = error;\n        this._headersCapability.reject(error);\n        return;\n      }\n      this._headersCapability.resolve();\n      this._setReadableStream(response);\n\n      const getResponseHeader = name => {\n        // Make sure that headers name are in lower case, as mentioned\n        // here: https://nodejs.org/api/http.html#http_message_headers.\n        return this._readableStream.headers[name.toLowerCase()];\n      };\n      const { allowRangeRequests, suggestedLength } =\n        validateRangeRequestCapabilities({\n          getResponseHeader,\n          isHttp: stream.isHttp,\n          rangeChunkSize: this._rangeChunkSize,\n          disableRange: this._disableRange,\n        });\n\n      this._isRangeSupported = allowRangeRequests;\n      // Setting right content length.\n      this._contentLength = suggestedLength || this._contentLength;\n\n      this._filename = extractFilenameFromHeader(getResponseHeader);\n    };\n\n    this._request = null;\n    if (this._url.protocol === \"http:\") {\n      this._request = http.request(\n        createRequestOptions(this._url, stream.httpHeaders),\n        handleResponse\n      );\n    } else {\n      this._request = https.request(\n        createRequestOptions(this._url, stream.httpHeaders),\n        handleResponse\n      );\n    }\n\n    this._request.on(\"error\", reason => {\n      this._storedError = reason;\n      this._headersCapability.reject(reason);\n    });\n    // Note: `request.end(data)` is used to write `data` to request body\n    // and notify end of request. But one should always call `request.end()`\n    // even if there is no data to write -- (to notify the end of request).\n    this._request.end();\n  }\n}\n\nclass PDFNodeStreamRangeReader extends BaseRangeReader {\n  constructor(stream, start, end) {\n    super(stream);\n\n    this._httpHeaders = {};\n    for (const property in stream.httpHeaders) {\n      const value = stream.httpHeaders[property];\n      if (value === undefined) {\n        continue;\n      }\n      this._httpHeaders[property] = value;\n    }\n    this._httpHeaders.Range = `bytes=${start}-${end - 1}`;\n\n    const handleResponse = response => {\n      if (response.statusCode === 404) {\n        const error = new MissingPDFException(`Missing PDF \"${this._url}\".`);\n        this._storedError = error;\n        return;\n      }\n      this._setReadableStream(response);\n    };\n\n    this._request = null;\n    if (this._url.protocol === \"http:\") {\n      this._request = http.request(\n        createRequestOptions(this._url, this._httpHeaders),\n        handleResponse\n      );\n    } else {\n      this._request = https.request(\n        createRequestOptions(this._url, this._httpHeaders),\n        handleResponse\n      );\n    }\n\n    this._request.on(\"error\", reason => {\n      this._storedError = reason;\n    });\n    this._request.end();\n  }\n}\n\nclass PDFNodeStreamFsFullReader extends BaseFullReader {\n  constructor(stream) {\n    super(stream);\n\n    let path = decodeURIComponent(this._url.path);\n\n    // Remove the extra slash to get right path from url like `file:///C:/`\n    if (fileUriRegex.test(this._url.href)) {\n      path = path.replace(/^\\//, \"\");\n    }\n\n    fs.lstat(path, (error, stat) => {\n      if (error) {\n        if (error.code === \"ENOENT\") {\n          error = new MissingPDFException(`Missing PDF \"${path}\".`);\n        }\n        this._storedError = error;\n        this._headersCapability.reject(error);\n        return;\n      }\n      // Setting right content length.\n      this._contentLength = stat.size;\n\n      this._setReadableStream(fs.createReadStream(path));\n      this._headersCapability.resolve();\n    });\n  }\n}\n\nclass PDFNodeStreamFsRangeReader extends BaseRangeReader {\n  constructor(stream, start, end) {\n    super(stream);\n\n    let path = decodeURIComponent(this._url.path);\n\n    // Remove the extra slash to get right path from url like `file:///C:/`\n    if (fileUriRegex.test(this._url.href)) {\n      path = path.replace(/^\\//, \"\");\n    }\n\n    this._setReadableStream(fs.createReadStream(path, { start, end: end - 1 }));\n  }\n}\n\nexport { PDFNodeStream };\n","/* Copyright 2020 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  BaseCanvasFactory,\n  BaseCMapReaderFactory,\n  BaseFilterFactory,\n  BaseStandardFontDataFactory,\n} from \"./base_factory.js\";\nimport { isNodeJS, warn } from \"../shared/util.js\";\n\nif (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n  throw new Error(\n    'Module \"./node_utils.js\" shall not be used with MOZCENTRAL builds.'\n  );\n}\n\nlet fs, canvas, path2d_polyfill;\nif (isNodeJS) {\n  // Native packages.\n  fs = await import(/* webpackIgnore: true */ \"fs\");\n  // Optional, third-party, packages.\n  try {\n    canvas = await import(/* webpackIgnore: true */ \"canvas\");\n  } catch {}\n  try {\n    path2d_polyfill = await import(/* webpackIgnore: true */ \"path2d-polyfill\");\n  } catch {}\n}\n\nif (typeof PDFJSDev !== \"undefined\" && !PDFJSDev.test(\"SKIP_BABEL\")) {\n  (function checkDOMMatrix() {\n    if (globalThis.DOMMatrix || !isNodeJS) {\n      return;\n    }\n    const DOMMatrix = canvas?.DOMMatrix;\n\n    if (DOMMatrix) {\n      globalThis.DOMMatrix = DOMMatrix;\n    } else {\n      warn(\"Cannot polyfill `DOMMatrix`, rendering may be broken.\");\n    }\n  })();\n\n  (function checkPath2D() {\n    if (globalThis.Path2D || !isNodeJS) {\n      return;\n    }\n    const CanvasRenderingContext2D = canvas?.CanvasRenderingContext2D;\n    const polyfillPath2D = path2d_polyfill?.polyfillPath2D;\n\n    if (CanvasRenderingContext2D && polyfillPath2D) {\n      globalThis.CanvasRenderingContext2D = CanvasRenderingContext2D;\n      polyfillPath2D(globalThis);\n    } else {\n      warn(\"Cannot polyfill `Path2D`, rendering may be broken.\");\n    }\n  })();\n}\n\nconst fetchData = function (url) {\n  return new Promise((resolve, reject) => {\n    fs.readFile(url, (error, data) => {\n      if (error || !data) {\n        reject(new Error(error));\n        return;\n      }\n      resolve(new Uint8Array(data));\n    });\n  });\n};\n\nclass NodeFilterFactory extends BaseFilterFactory {}\n\nclass NodeCanvasFactory extends BaseCanvasFactory {\n  /**\n   * @ignore\n   */\n  _createCanvas(width, height) {\n    return canvas.createCanvas(width, height);\n  }\n}\n\nclass NodeCMapReaderFactory extends BaseCMapReaderFactory {\n  /**\n   * @ignore\n   */\n  _fetchData(url, compressionType) {\n    return fetchData(url).then(data => {\n      return { cMapData: data, compressionType };\n    });\n  }\n}\n\nclass NodeStandardFontDataFactory extends BaseStandardFontDataFactory {\n  /**\n   * @ignore\n   */\n  _fetchData(url) {\n    return fetchData(url);\n  }\n}\n\nexport {\n  NodeCanvasFactory,\n  NodeCMapReaderFactory,\n  NodeFilterFactory,\n  NodeStandardFontDataFactory,\n};\n","/* Copyright 2020 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { objectFromMap, unreachable, warn } from \"../shared/util.js\";\nimport { MurmurHash3_64 } from \"../shared/murmurhash3.js\";\n\nconst INTERNAL = Symbol(\"INTERNAL\");\n\nclass OptionalContentGroup {\n  #visible = true;\n\n  constructor(name, intent) {\n    this.name = name;\n    this.intent = intent;\n  }\n\n  /**\n   * @type {boolean}\n   */\n  get visible() {\n    return this.#visible;\n  }\n\n  /**\n   * @ignore\n   */\n  _setVisible(internal, visible) {\n    if (internal !== INTERNAL) {\n      unreachable(\"Internal method `_setVisible` called.\");\n    }\n    this.#visible = visible;\n  }\n}\n\nclass OptionalContentConfig {\n  #cachedGetHash = null;\n\n  #groups = new Map();\n\n  #initialHash = null;\n\n  #order = null;\n\n  constructor(data) {\n    this.name = null;\n    this.creator = null;\n\n    if (data === null) {\n      return;\n    }\n    this.name = data.name;\n    this.creator = data.creator;\n    this.#order = data.order;\n    for (const group of data.groups) {\n      this.#groups.set(\n        group.id,\n        new OptionalContentGroup(group.name, group.intent)\n      );\n    }\n\n    if (data.baseState === \"OFF\") {\n      for (const group of this.#groups.values()) {\n        group._setVisible(INTERNAL, false);\n      }\n    }\n\n    for (const on of data.on) {\n      this.#groups.get(on)._setVisible(INTERNAL, true);\n    }\n\n    for (const off of data.off) {\n      this.#groups.get(off)._setVisible(INTERNAL, false);\n    }\n\n    // The following code must always run *last* in the constructor.\n    this.#initialHash = this.getHash();\n  }\n\n  #evaluateVisibilityExpression(array) {\n    const length = array.length;\n    if (length < 2) {\n      return true;\n    }\n    const operator = array[0];\n    for (let i = 1; i < length; i++) {\n      const element = array[i];\n      let state;\n      if (Array.isArray(element)) {\n        state = this.#evaluateVisibilityExpression(element);\n      } else if (this.#groups.has(element)) {\n        state = this.#groups.get(element).visible;\n      } else {\n        warn(`Optional content group not found: ${element}`);\n        return true;\n      }\n      switch (operator) {\n        case \"And\":\n          if (!state) {\n            return false;\n          }\n          break;\n        case \"Or\":\n          if (state) {\n            return true;\n          }\n          break;\n        case \"Not\":\n          return !state;\n        default:\n          return true;\n      }\n    }\n    return operator === \"And\";\n  }\n\n  isVisible(group) {\n    if (this.#groups.size === 0) {\n      return true;\n    }\n    if (!group) {\n      warn(\"Optional content group not defined.\");\n      return true;\n    }\n    if (group.type === \"OCG\") {\n      if (!this.#groups.has(group.id)) {\n        warn(`Optional content group not found: ${group.id}`);\n        return true;\n      }\n      return this.#groups.get(group.id).visible;\n    } else if (group.type === \"OCMD\") {\n      // Per the spec, the expression should be preferred if available.\n      if (group.expression) {\n        return this.#evaluateVisibilityExpression(group.expression);\n      }\n      if (!group.policy || group.policy === \"AnyOn\") {\n        // Default\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (this.#groups.get(id).visible) {\n            return true;\n          }\n        }\n        return false;\n      } else if (group.policy === \"AllOn\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (!this.#groups.get(id).visible) {\n            return false;\n          }\n        }\n        return true;\n      } else if (group.policy === \"AnyOff\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (!this.#groups.get(id).visible) {\n            return true;\n          }\n        }\n        return false;\n      } else if (group.policy === \"AllOff\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (this.#groups.get(id).visible) {\n            return false;\n          }\n        }\n        return true;\n      }\n      warn(`Unknown optional content policy ${group.policy}.`);\n      return true;\n    }\n    warn(`Unknown group type ${group.type}.`);\n    return true;\n  }\n\n  setVisibility(id, visible = true) {\n    if (!this.#groups.has(id)) {\n      warn(`Optional content group not found: ${id}`);\n      return;\n    }\n    this.#groups.get(id)._setVisible(INTERNAL, !!visible);\n\n    this.#cachedGetHash = null;\n  }\n\n  get hasInitialVisibility() {\n    return this.#initialHash === null || this.getHash() === this.#initialHash;\n  }\n\n  getOrder() {\n    if (!this.#groups.size) {\n      return null;\n    }\n    if (this.#order) {\n      return this.#order.slice();\n    }\n    return [...this.#groups.keys()];\n  }\n\n  getGroups() {\n    return this.#groups.size > 0 ? objectFromMap(this.#groups) : null;\n  }\n\n  getGroup(id) {\n    return this.#groups.get(id) || null;\n  }\n\n  getHash() {\n    if (this.#cachedGetHash !== null) {\n      return this.#cachedGetHash;\n    }\n    const hash = new MurmurHash3_64();\n\n    for (const [id, group] of this.#groups) {\n      hash.update(`${id}:${group.visible}`);\n    }\n    return (this.#cachedGetHash = hash.hexdigest());\n  }\n}\n\nexport { OptionalContentConfig };\n","/* Copyright 2015 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @typedef {import(\"./display_utils\").PageViewport} PageViewport */\n/** @typedef {import(\"./api\").TextContent} TextContent */\n\nimport {\n  AbortException,\n  FeatureTest,\n  PromiseCapability,\n  Util,\n} from \"../shared/util.js\";\nimport { setLayerDimensions } from \"./display_utils.js\";\n\n/**\n * Text layer render parameters.\n *\n * @typedef {Object} TextLayerRenderParameters\n * @property {ReadableStream | TextContent} textContentSource - Text content to\n *   render, i.e. the value returned by the page's `streamTextContent` or\n *   `getTextContent` method.\n * @property {HTMLElement} container - The DOM node that will contain the text\n *   runs.\n * @property {PageViewport} viewport - The target viewport to properly layout\n *   the text runs.\n * @property {Array<HTMLElement>} [textDivs] - HTML elements that correspond to\n *   the text items of the textContent input.\n *   This is output and shall initially be set to an empty array.\n * @property {WeakMap<HTMLElement,Object>} [textDivProperties] - Some properties\n *   weakly mapped to the HTML elements used to render the text.\n * @property {Array<string>} [textContentItemsStr] - Strings that correspond to\n *   the `str` property of the text items of the textContent input.\n *   This is output and shall initially be set to an empty array.\n * @property {boolean} [isOffscreenCanvasSupported] true if we can use\n *   OffscreenCanvas to measure string widths.\n */\n\n/**\n * Text layer update parameters.\n *\n * @typedef {Object} TextLayerUpdateParameters\n * @property {HTMLElement} container - The DOM node that will contain the text\n *   runs.\n * @property {PageViewport} viewport - The target viewport to properly layout\n *   the text runs.\n * @property {Array<HTMLElement>} [textDivs] - HTML elements that correspond to\n *   the text items of the textContent input.\n *   This is output and shall initially be set to an empty array.\n * @property {WeakMap<HTMLElement,Object>} [textDivProperties] - Some properties\n *   weakly mapped to the HTML elements used to render the text.\n * @property {boolean} [isOffscreenCanvasSupported] true if we can use\n *   OffscreenCanvas to measure string widths.\n * @property {boolean} [mustRotate] true if the text layer must be rotated.\n * @property {boolean} [mustRescale] true if the text layer contents must be\n *   rescaled.\n */\n\nconst MAX_TEXT_DIVS_TO_RENDER = 100000;\nconst DEFAULT_FONT_SIZE = 30;\nconst DEFAULT_FONT_ASCENT = 0.8;\nconst ascentCache = new Map();\n\nfunction getCtx(size, isOffscreenCanvasSupported) {\n  let ctx;\n  if (isOffscreenCanvasSupported && FeatureTest.isOffscreenCanvasSupported) {\n    ctx = new OffscreenCanvas(size, size).getContext(\"2d\", { alpha: false });\n  } else {\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = canvas.height = size;\n    ctx = canvas.getContext(\"2d\", { alpha: false });\n  }\n\n  return ctx;\n}\n\nfunction getAscent(fontFamily, isOffscreenCanvasSupported) {\n  const cachedAscent = ascentCache.get(fontFamily);\n  if (cachedAscent) {\n    return cachedAscent;\n  }\n\n  const ctx = getCtx(DEFAULT_FONT_SIZE, isOffscreenCanvasSupported);\n\n  ctx.font = `${DEFAULT_FONT_SIZE}px ${fontFamily}`;\n  const metrics = ctx.measureText(\"\");\n\n  // Both properties aren't available by default in Firefox.\n  let ascent = metrics.fontBoundingBoxAscent;\n  let descent = Math.abs(metrics.fontBoundingBoxDescent);\n  if (ascent) {\n    const ratio = ascent / (ascent + descent);\n    ascentCache.set(fontFamily, ratio);\n\n    ctx.canvas.width = ctx.canvas.height = 0;\n    return ratio;\n  }\n\n  // Try basic heuristic to guess ascent/descent.\n  // Draw a g with baseline at 0,0 and then get the line\n  // number where a pixel has non-null red component (starting\n  // from bottom).\n  ctx.strokeStyle = \"red\";\n  ctx.clearRect(0, 0, DEFAULT_FONT_SIZE, DEFAULT_FONT_SIZE);\n  ctx.strokeText(\"g\", 0, 0);\n  let pixels = ctx.getImageData(\n    0,\n    0,\n    DEFAULT_FONT_SIZE,\n    DEFAULT_FONT_SIZE\n  ).data;\n  descent = 0;\n  for (let i = pixels.length - 1 - 3; i >= 0; i -= 4) {\n    if (pixels[i] > 0) {\n      descent = Math.ceil(i / 4 / DEFAULT_FONT_SIZE);\n      break;\n    }\n  }\n\n  // Draw an A with baseline at 0,DEFAULT_FONT_SIZE and then get the line\n  // number where a pixel has non-null red component (starting\n  // from top).\n  ctx.clearRect(0, 0, DEFAULT_FONT_SIZE, DEFAULT_FONT_SIZE);\n  ctx.strokeText(\"A\", 0, DEFAULT_FONT_SIZE);\n  pixels = ctx.getImageData(0, 0, DEFAULT_FONT_SIZE, DEFAULT_FONT_SIZE).data;\n  ascent = 0;\n  for (let i = 0, ii = pixels.length; i < ii; i += 4) {\n    if (pixels[i] > 0) {\n      ascent = DEFAULT_FONT_SIZE - Math.floor(i / 4 / DEFAULT_FONT_SIZE);\n      break;\n    }\n  }\n\n  ctx.canvas.width = ctx.canvas.height = 0;\n\n  if (ascent) {\n    const ratio = ascent / (ascent + descent);\n    ascentCache.set(fontFamily, ratio);\n    return ratio;\n  }\n\n  ascentCache.set(fontFamily, DEFAULT_FONT_ASCENT);\n  return DEFAULT_FONT_ASCENT;\n}\n\nfunction appendText(task, geom, styles) {\n  // Initialize all used properties to keep the caches monomorphic.\n  const textDiv = document.createElement(\"span\");\n  const textDivProperties = {\n    angle: 0,\n    canvasWidth: 0,\n    hasText: geom.str !== \"\",\n    hasEOL: geom.hasEOL,\n    fontSize: 0,\n  };\n  task._textDivs.push(textDiv);\n\n  const tx = Util.transform(task._transform, geom.transform);\n  let angle = Math.atan2(tx[1], tx[0]);\n  const style = styles[geom.fontName];\n  if (style.vertical) {\n    angle += Math.PI / 2;\n  }\n\n  const fontFamily =\n    (task._fontInspectorEnabled && style.fontSubstitution) || style.fontFamily;\n  const fontHeight = Math.hypot(tx[2], tx[3]);\n  const fontAscent =\n    fontHeight * getAscent(fontFamily, task._isOffscreenCanvasSupported);\n\n  let left, top;\n  if (angle === 0) {\n    left = tx[4];\n    top = tx[5] - fontAscent;\n  } else {\n    left = tx[4] + fontAscent * Math.sin(angle);\n    top = tx[5] - fontAscent * Math.cos(angle);\n  }\n\n  const scaleFactorStr = \"calc(var(--scale-factor)*\";\n  const divStyle = textDiv.style;\n  // Setting the style properties individually, rather than all at once,\n  // should be OK since the `textDiv` isn't appended to the document yet.\n  if (task._container === task._rootContainer) {\n    divStyle.left = `${((100 * left) / task._pageWidth).toFixed(2)}%`;\n    divStyle.top = `${((100 * top) / task._pageHeight).toFixed(2)}%`;\n  } else {\n    // We're in a marked content span, hence we can't use percents.\n    divStyle.left = `${scaleFactorStr}${left.toFixed(2)}px)`;\n    divStyle.top = `${scaleFactorStr}${top.toFixed(2)}px)`;\n  }\n  divStyle.fontSize = `${scaleFactorStr}${fontHeight.toFixed(2)}px)`;\n  divStyle.fontFamily = fontFamily;\n\n  textDivProperties.fontSize = fontHeight;\n\n  // Keeps screen readers from pausing on every new text span.\n  textDiv.setAttribute(\"role\", \"presentation\");\n\n  textDiv.textContent = geom.str;\n  // geom.dir may be 'ttb' for vertical texts.\n  textDiv.dir = geom.dir;\n\n  // `fontName` is only used by the FontInspector, and we only use `dataset`\n  // here to make the font name available in the debugger.\n  if (task._fontInspectorEnabled) {\n    textDiv.dataset.fontName =\n      style.fontSubstitutionLoadedName || geom.fontName;\n  }\n  if (angle !== 0) {\n    textDivProperties.angle = angle * (180 / Math.PI);\n  }\n  // We don't bother scaling single-char text divs, because it has very\n  // little effect on text highlighting. This makes scrolling on docs with\n  // lots of such divs a lot faster.\n  let shouldScaleText = false;\n  if (geom.str.length > 1) {\n    shouldScaleText = true;\n  } else if (geom.str !== \" \" && geom.transform[0] !== geom.transform[3]) {\n    const absScaleX = Math.abs(geom.transform[0]),\n      absScaleY = Math.abs(geom.transform[3]);\n    // When the horizontal/vertical scaling differs significantly, also scale\n    // even single-char text to improve highlighting (fixes issue11713.pdf).\n    if (\n      absScaleX !== absScaleY &&\n      Math.max(absScaleX, absScaleY) / Math.min(absScaleX, absScaleY) > 1.5\n    ) {\n      shouldScaleText = true;\n    }\n  }\n  if (shouldScaleText) {\n    textDivProperties.canvasWidth = style.vertical ? geom.height : geom.width;\n  }\n  task._textDivProperties.set(textDiv, textDivProperties);\n  if (task._isReadableStream) {\n    task._layoutText(textDiv);\n  }\n}\n\nfunction layout(params) {\n  const { div, scale, properties, ctx, prevFontSize, prevFontFamily } = params;\n  const { style } = div;\n  let transform = \"\";\n  if (properties.canvasWidth !== 0 && properties.hasText) {\n    const { fontFamily } = style;\n    const { canvasWidth, fontSize } = properties;\n\n    if (prevFontSize !== fontSize || prevFontFamily !== fontFamily) {\n      ctx.font = `${fontSize * scale}px ${fontFamily}`;\n      params.prevFontSize = fontSize;\n      params.prevFontFamily = fontFamily;\n    }\n\n    // Only measure the width for multi-char text divs, see `appendText`.\n    const { width } = ctx.measureText(div.textContent);\n\n    if (width > 0) {\n      transform = `scaleX(${(canvasWidth * scale) / width})`;\n    }\n  }\n  if (properties.angle !== 0) {\n    transform = `rotate(${properties.angle}deg) ${transform}`;\n  }\n  if (transform.length > 0) {\n    style.transform = transform;\n  }\n}\n\nfunction render(task) {\n  if (task._canceled) {\n    return;\n  }\n  const textDivs = task._textDivs;\n  const capability = task._capability;\n  const textDivsLength = textDivs.length;\n\n  // No point in rendering many divs as it would make the browser\n  // unusable even after the divs are rendered.\n  if (textDivsLength > MAX_TEXT_DIVS_TO_RENDER) {\n    capability.resolve();\n    return;\n  }\n\n  if (!task._isReadableStream) {\n    for (const textDiv of textDivs) {\n      task._layoutText(textDiv);\n    }\n  }\n  capability.resolve();\n}\n\nclass TextLayerRenderTask {\n  constructor({\n    textContentSource,\n    container,\n    viewport,\n    textDivs,\n    textDivProperties,\n    textContentItemsStr,\n    isOffscreenCanvasSupported,\n  }) {\n    this._textContentSource = textContentSource;\n    this._isReadableStream = textContentSource instanceof ReadableStream;\n    this._container = this._rootContainer = container;\n    this._textDivs = textDivs || [];\n    this._textContentItemsStr = textContentItemsStr || [];\n    this._isOffscreenCanvasSupported = isOffscreenCanvasSupported;\n    this._fontInspectorEnabled = !!globalThis.FontInspector?.enabled;\n\n    this._reader = null;\n    this._textDivProperties = textDivProperties || new WeakMap();\n    this._canceled = false;\n    this._capability = new PromiseCapability();\n    this._layoutTextParams = {\n      prevFontSize: null,\n      prevFontFamily: null,\n      div: null,\n      scale: viewport.scale * (globalThis.devicePixelRatio || 1),\n      properties: null,\n      ctx: getCtx(0, isOffscreenCanvasSupported),\n    };\n    const { pageWidth, pageHeight, pageX, pageY } = viewport.rawDims;\n    this._transform = [1, 0, 0, -1, -pageX, pageY + pageHeight];\n    this._pageWidth = pageWidth;\n    this._pageHeight = pageHeight;\n\n    setLayerDimensions(container, viewport);\n\n    // Always clean-up the temporary canvas once rendering is no longer pending.\n    this._capability.promise\n      .finally(() => {\n        this._layoutTextParams = null;\n      })\n      .catch(() => {\n        // Avoid \"Uncaught promise\" messages in the console.\n      });\n  }\n\n  /**\n   * Promise for textLayer rendering task completion.\n   * @type {Promise<void>}\n   */\n  get promise() {\n    return this._capability.promise;\n  }\n\n  /**\n   * Cancel rendering of the textLayer.\n   */\n  cancel() {\n    this._canceled = true;\n    if (this._reader) {\n      this._reader\n        .cancel(new AbortException(\"TextLayer task cancelled.\"))\n        .catch(() => {\n          // Avoid \"Uncaught promise\" messages in the console.\n        });\n      this._reader = null;\n    }\n    this._capability.reject(new AbortException(\"TextLayer task cancelled.\"));\n  }\n\n  /**\n   * @private\n   */\n  _processItems(items, styleCache) {\n    for (const item of items) {\n      if (item.str === undefined) {\n        if (\n          item.type === \"beginMarkedContentProps\" ||\n          item.type === \"beginMarkedContent\"\n        ) {\n          const parent = this._container;\n          this._container = document.createElement(\"span\");\n          this._container.classList.add(\"markedContent\");\n          if (item.id !== null) {\n            this._container.setAttribute(\"id\", `${item.id}`);\n          }\n          parent.append(this._container);\n        } else if (item.type === \"endMarkedContent\") {\n          this._container = this._container.parentNode;\n        }\n        continue;\n      }\n      this._textContentItemsStr.push(item.str);\n      appendText(this, item, styleCache);\n    }\n  }\n\n  /**\n   * @private\n   */\n  _layoutText(textDiv) {\n    const textDivProperties = (this._layoutTextParams.properties =\n      this._textDivProperties.get(textDiv));\n    this._layoutTextParams.div = textDiv;\n    layout(this._layoutTextParams);\n\n    if (textDivProperties.hasText) {\n      this._container.append(textDiv);\n    }\n    if (textDivProperties.hasEOL) {\n      const br = document.createElement(\"br\");\n      br.setAttribute(\"role\", \"presentation\");\n      this._container.append(br);\n    }\n  }\n\n  /**\n   * @private\n   */\n  _render() {\n    const capability = new PromiseCapability();\n    let styleCache = Object.create(null);\n\n    if (this._isReadableStream) {\n      const pump = () => {\n        this._reader.read().then(({ value, done }) => {\n          if (done) {\n            capability.resolve();\n            return;\n          }\n\n          Object.assign(styleCache, value.styles);\n          this._processItems(value.items, styleCache);\n          pump();\n        }, capability.reject);\n      };\n\n      this._reader = this._textContentSource.getReader();\n      pump();\n    } else if (this._textContentSource) {\n      const { items, styles } = this._textContentSource;\n      this._processItems(items, styles);\n      capability.resolve();\n    } else {\n      throw new Error('No \"textContentSource\" parameter specified.');\n    }\n\n    capability.promise.then(() => {\n      styleCache = null;\n      render(this);\n    }, this._capability.reject);\n  }\n}\n\n/**\n * @param {TextLayerRenderParameters} params\n * @returns {TextLayerRenderTask}\n */\nfunction renderTextLayer(params) {\n  const task = new TextLayerRenderTask(params);\n  task._render();\n  return task;\n}\n\n/**\n * @param {TextLayerUpdateParameters} params\n * @returns {undefined}\n */\nfunction updateTextLayer({\n  container,\n  viewport,\n  textDivs,\n  textDivProperties,\n  isOffscreenCanvasSupported,\n  mustRotate = true,\n  mustRescale = true,\n}) {\n  if (mustRotate) {\n    setLayerDimensions(container, { rotation: viewport.rotation });\n  }\n\n  if (mustRescale) {\n    const ctx = getCtx(0, isOffscreenCanvasSupported);\n    const scale = viewport.scale * (globalThis.devicePixelRatio || 1);\n    const params = {\n      prevFontSize: null,\n      prevFontFamily: null,\n      div: null,\n      scale,\n      properties: null,\n      ctx,\n    };\n    for (const div of textDivs) {\n      params.properties = textDivProperties.get(div);\n      params.div = div;\n      layout(params);\n    }\n  }\n}\n\nexport { renderTextLayer, TextLayerRenderTask, updateTextLayer };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @typedef {import(\"../interfaces\").IPDFStream} IPDFStream */\n/** @typedef {import(\"../interfaces\").IPDFStreamReader} IPDFStreamReader */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"../interfaces\").IPDFStreamRangeReader} IPDFStreamRangeReader */\n\nimport { assert, PromiseCapability } from \"../shared/util.js\";\nimport { isPdfFile } from \"./display_utils.js\";\n\n/** @implements {IPDFStream} */\nclass PDFDataTransportStream {\n  constructor(\n    {\n      length,\n      initialData,\n      progressiveDone = false,\n      contentDispositionFilename = null,\n      disableRange = false,\n      disableStream = false,\n    },\n    pdfDataRangeTransport\n  ) {\n    assert(\n      pdfDataRangeTransport,\n      'PDFDataTransportStream - missing required \"pdfDataRangeTransport\" argument.'\n    );\n\n    this._queuedChunks = [];\n    this._progressiveDone = progressiveDone;\n    this._contentDispositionFilename = contentDispositionFilename;\n\n    if (initialData?.length > 0) {\n      // Prevent any possible issues by only transferring a Uint8Array that\n      // completely \"utilizes\" its underlying ArrayBuffer.\n      const buffer =\n        initialData instanceof Uint8Array &&\n        initialData.byteLength === initialData.buffer.byteLength\n          ? initialData.buffer\n          : new Uint8Array(initialData).buffer;\n      this._queuedChunks.push(buffer);\n    }\n\n    this._pdfDataRangeTransport = pdfDataRangeTransport;\n    this._isStreamingSupported = !disableStream;\n    this._isRangeSupported = !disableRange;\n    this._contentLength = length;\n\n    this._fullRequestReader = null;\n    this._rangeReaders = [];\n\n    this._pdfDataRangeTransport.addRangeListener((begin, chunk) => {\n      this._onReceiveData({ begin, chunk });\n    });\n\n    this._pdfDataRangeTransport.addProgressListener((loaded, total) => {\n      this._onProgress({ loaded, total });\n    });\n\n    this._pdfDataRangeTransport.addProgressiveReadListener(chunk => {\n      this._onReceiveData({ chunk });\n    });\n\n    this._pdfDataRangeTransport.addProgressiveDoneListener(() => {\n      this._onProgressiveDone();\n    });\n\n    this._pdfDataRangeTransport.transportReady();\n  }\n\n  _onReceiveData({ begin, chunk }) {\n    // Prevent any possible issues by only transferring a Uint8Array that\n    // completely \"utilizes\" its underlying ArrayBuffer.\n    const buffer =\n      chunk instanceof Uint8Array &&\n      chunk.byteLength === chunk.buffer.byteLength\n        ? chunk.buffer\n        : new Uint8Array(chunk).buffer;\n\n    if (begin === undefined) {\n      if (this._fullRequestReader) {\n        this._fullRequestReader._enqueue(buffer);\n      } else {\n        this._queuedChunks.push(buffer);\n      }\n    } else {\n      const found = this._rangeReaders.some(function (rangeReader) {\n        if (rangeReader._begin !== begin) {\n          return false;\n        }\n        rangeReader._enqueue(buffer);\n        return true;\n      });\n      assert(\n        found,\n        \"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.\"\n      );\n    }\n  }\n\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n\n  _onProgress(evt) {\n    if (evt.total === undefined) {\n      // Reporting to first range reader, if it exists.\n      this._rangeReaders[0]?.onProgress?.({ loaded: evt.loaded });\n    } else {\n      this._fullRequestReader?.onProgress?.({\n        loaded: evt.loaded,\n        total: evt.total,\n      });\n    }\n  }\n\n  _onProgressiveDone() {\n    this._fullRequestReader?.progressiveDone();\n    this._progressiveDone = true;\n  }\n\n  _removeRangeReader(reader) {\n    const i = this._rangeReaders.indexOf(reader);\n    if (i >= 0) {\n      this._rangeReaders.splice(i, 1);\n    }\n  }\n\n  getFullReader() {\n    assert(\n      !this._fullRequestReader,\n      \"PDFDataTransportStream.getFullReader can only be called once.\"\n    );\n    const queuedChunks = this._queuedChunks;\n    this._queuedChunks = null;\n    return new PDFDataTransportStreamReader(\n      this,\n      queuedChunks,\n      this._progressiveDone,\n      this._contentDispositionFilename\n    );\n  }\n\n  getRangeReader(begin, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const reader = new PDFDataTransportStreamRangeReader(this, begin, end);\n    this._pdfDataRangeTransport.requestDataRange(begin, end);\n    this._rangeReaders.push(reader);\n    return reader;\n  }\n\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n\n    for (const reader of this._rangeReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n    this._pdfDataRangeTransport.abort();\n  }\n}\n\n/** @implements {IPDFStreamReader} */\nclass PDFDataTransportStreamReader {\n  constructor(\n    stream,\n    queuedChunks,\n    progressiveDone = false,\n    contentDispositionFilename = null\n  ) {\n    this._stream = stream;\n    this._done = progressiveDone || false;\n    this._filename = isPdfFile(contentDispositionFilename)\n      ? contentDispositionFilename\n      : null;\n    this._queuedChunks = queuedChunks || [];\n    this._loaded = 0;\n    for (const chunk of this._queuedChunks) {\n      this._loaded += chunk.byteLength;\n    }\n    this._requests = [];\n    this._headersReady = Promise.resolve();\n    stream._fullRequestReader = this;\n\n    this.onProgress = null;\n  }\n\n  _enqueue(chunk) {\n    if (this._done) {\n      return; // Ignore new data.\n    }\n    if (this._requests.length > 0) {\n      const requestCapability = this._requests.shift();\n      requestCapability.resolve({ value: chunk, done: false });\n    } else {\n      this._queuedChunks.push(chunk);\n    }\n    this._loaded += chunk.byteLength;\n  }\n\n  get headersReady() {\n    return this._headersReady;\n  }\n\n  get filename() {\n    return this._filename;\n  }\n\n  get isRangeSupported() {\n    return this._stream._isRangeSupported;\n  }\n\n  get isStreamingSupported() {\n    return this._stream._isStreamingSupported;\n  }\n\n  get contentLength() {\n    return this._stream._contentLength;\n  }\n\n  async read() {\n    if (this._queuedChunks.length > 0) {\n      const chunk = this._queuedChunks.shift();\n      return { value: chunk, done: false };\n    }\n    if (this._done) {\n      return { value: undefined, done: true };\n    }\n    const requestCapability = new PromiseCapability();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({ value: undefined, done: true });\n    }\n    this._requests.length = 0;\n  }\n\n  progressiveDone() {\n    if (this._done) {\n      return;\n    }\n    this._done = true;\n  }\n}\n\n/** @implements {IPDFStreamRangeReader} */\nclass PDFDataTransportStreamRangeReader {\n  constructor(stream, begin, end) {\n    this._stream = stream;\n    this._begin = begin;\n    this._end = end;\n    this._queuedChunk = null;\n    this._requests = [];\n    this._done = false;\n\n    this.onProgress = null;\n  }\n\n  _enqueue(chunk) {\n    if (this._done) {\n      return; // ignore new data\n    }\n    if (this._requests.length === 0) {\n      this._queuedChunk = chunk;\n    } else {\n      const requestsCapability = this._requests.shift();\n      requestsCapability.resolve({ value: chunk, done: false });\n      for (const requestCapability of this._requests) {\n        requestCapability.resolve({ value: undefined, done: true });\n      }\n      this._requests.length = 0;\n    }\n    this._done = true;\n    this._stream._removeRangeReader(this);\n  }\n\n  get isStreamingSupported() {\n    return false;\n  }\n\n  async read() {\n    if (this._queuedChunk) {\n      const chunk = this._queuedChunk;\n      this._queuedChunk = null;\n      return { value: chunk, done: false };\n    }\n    if (this._done) {\n      return { value: undefined, done: true };\n    }\n    const requestCapability = new PromiseCapability();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({ value: undefined, done: true });\n    }\n    this._requests.length = 0;\n    this._stream._removeRangeReader(this);\n  }\n}\n\nexport { PDFDataTransportStream };\n","/* Copyright 2018 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @typedef {Object} GlobalWorkerOptionsType\n * @property {Worker | null} workerPort - Defines global port for worker\n *   process. Overrides the `workerSrc` option.\n * @property {string} workerSrc - A string containing the path and filename\n *   of the worker file.\n *\n *   NOTE: The `workerSrc` option should always be set, in order to prevent any\n *         issues when using the PDF.js library.\n */\n\n/** @type {GlobalWorkerOptionsType} */\nconst GlobalWorkerOptions = Object.create(null);\n\nGlobalWorkerOptions.workerPort = null;\nGlobalWorkerOptions.workerSrc = \"\";\n\nexport { GlobalWorkerOptions };\n","/* Copyright 2021 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./annotation_storage\").AnnotationStorage} AnnotationStorage */\n/** @typedef {import(\"./display_utils\").PageViewport} PageViewport */\n/** @typedef {import(\"../../web/interfaces\").IPDFLinkService} IPDFLinkService */\n\nimport { XfaText } from \"./xfa_text.js\";\n\n/**\n * @typedef {Object} XfaLayerParameters\n * @property {PageViewport} viewport\n * @property {HTMLDivElement} div\n * @property {Object} xfaHtml\n * @property {AnnotationStorage} [annotationStorage]\n * @property {IPDFLinkService} linkService\n * @property {string} [intent] - (default value is 'display').\n */\n\nclass XfaLayer {\n  static setupStorage(html, id, element, storage, intent) {\n    const storedData = storage.getValue(id, { value: null });\n    switch (element.name) {\n      case \"textarea\":\n        if (storedData.value !== null) {\n          html.textContent = storedData.value;\n        }\n        if (intent === \"print\") {\n          break;\n        }\n        html.addEventListener(\"input\", event => {\n          storage.setValue(id, { value: event.target.value });\n        });\n        break;\n      case \"input\":\n        if (\n          element.attributes.type === \"radio\" ||\n          element.attributes.type === \"checkbox\"\n        ) {\n          if (storedData.value === element.attributes.xfaOn) {\n            html.setAttribute(\"checked\", true);\n          } else if (storedData.value === element.attributes.xfaOff) {\n            // The checked attribute may have been set when opening the file,\n            // unset through the UI and we're here because of printing.\n            html.removeAttribute(\"checked\");\n          }\n          if (intent === \"print\") {\n            break;\n          }\n          html.addEventListener(\"change\", event => {\n            storage.setValue(id, {\n              value: event.target.checked\n                ? event.target.getAttribute(\"xfaOn\")\n                : event.target.getAttribute(\"xfaOff\"),\n            });\n          });\n        } else {\n          if (storedData.value !== null) {\n            html.setAttribute(\"value\", storedData.value);\n          }\n          if (intent === \"print\") {\n            break;\n          }\n          html.addEventListener(\"input\", event => {\n            storage.setValue(id, { value: event.target.value });\n          });\n        }\n        break;\n      case \"select\":\n        if (storedData.value !== null) {\n          html.setAttribute(\"value\", storedData.value);\n          for (const option of element.children) {\n            if (option.attributes.value === storedData.value) {\n              option.attributes.selected = true;\n            } else if (option.attributes.hasOwnProperty(\"selected\")) {\n              delete option.attributes.selected;\n            }\n          }\n        }\n        html.addEventListener(\"input\", event => {\n          const options = event.target.options;\n          const value =\n            options.selectedIndex === -1\n              ? \"\"\n              : options[options.selectedIndex].value;\n          storage.setValue(id, { value });\n        });\n        break;\n    }\n  }\n\n  static setAttributes({ html, element, storage = null, intent, linkService }) {\n    const { attributes } = element;\n    const isHTMLAnchorElement = html instanceof HTMLAnchorElement;\n\n    if (attributes.type === \"radio\") {\n      // Avoid to have a radio group when printing with the same as one\n      // already displayed.\n      attributes.name = `${attributes.name}-${intent}`;\n    }\n    for (const [key, value] of Object.entries(attributes)) {\n      if (value === null || value === undefined) {\n        continue;\n      }\n\n      switch (key) {\n        case \"class\":\n          if (value.length) {\n            html.setAttribute(key, value.join(\" \"));\n          }\n          break;\n        case \"dataId\":\n          // We don't need to add dataId in the html object but it can\n          // be useful to know its value when writing printing tests:\n          // in this case, don't skip dataId to have its value.\n          break;\n        case \"id\":\n          html.setAttribute(\"data-element-id\", value);\n          break;\n        case \"style\":\n          Object.assign(html.style, value);\n          break;\n        case \"textContent\":\n          html.textContent = value;\n          break;\n        default:\n          if (!isHTMLAnchorElement || (key !== \"href\" && key !== \"newWindow\")) {\n            html.setAttribute(key, value);\n          }\n      }\n    }\n\n    if (isHTMLAnchorElement) {\n      linkService.addLinkAttributes(\n        html,\n        attributes.href,\n        attributes.newWindow\n      );\n    }\n\n    // Set the value after the others to be sure to overwrite any other values.\n    if (storage && attributes.dataId) {\n      this.setupStorage(html, attributes.dataId, element, storage);\n    }\n  }\n\n  /**\n   * Render the XFA layer.\n   *\n   * @param {XfaLayerParameters} parameters\n   */\n  static render(parameters) {\n    const storage = parameters.annotationStorage;\n    const linkService = parameters.linkService;\n    const root = parameters.xfaHtml;\n    const intent = parameters.intent || \"display\";\n    const rootHtml = document.createElement(root.name);\n    if (root.attributes) {\n      this.setAttributes({\n        html: rootHtml,\n        element: root,\n        intent,\n        linkService,\n      });\n    }\n\n    const isNotForRichText = intent !== \"richText\";\n    const rootDiv = parameters.div;\n    rootDiv.append(rootHtml);\n\n    if (parameters.viewport) {\n      const transform = `matrix(${parameters.viewport.transform.join(\",\")})`;\n      rootDiv.style.transform = transform;\n    }\n\n    // Set defaults.\n    if (isNotForRichText) {\n      rootDiv.setAttribute(\"class\", \"xfaLayer xfaFont\");\n    }\n\n    // Text nodes used for the text highlighter.\n    const textDivs = [];\n\n    // In the rich text context, it's possible to just have a text node without\n    // a root element, so we handle this case here (see issue 17215).\n    if (root.children.length === 0) {\n      if (root.value) {\n        const node = document.createTextNode(root.value);\n        rootHtml.append(node);\n        if (isNotForRichText && XfaText.shouldBuildText(root.name)) {\n          textDivs.push(node);\n        }\n      }\n      return { textDivs };\n    }\n\n    const stack = [[root, -1, rootHtml]];\n\n    while (stack.length > 0) {\n      const [parent, i, html] = stack.at(-1);\n      if (i + 1 === parent.children.length) {\n        stack.pop();\n        continue;\n      }\n\n      const child = parent.children[++stack.at(-1)[1]];\n      if (child === null) {\n        continue;\n      }\n\n      const { name } = child;\n      if (name === \"#text\") {\n        const node = document.createTextNode(child.value);\n        textDivs.push(node);\n        html.append(node);\n        continue;\n      }\n\n      const childHtml = child?.attributes?.xmlns\n        ? document.createElementNS(child.attributes.xmlns, name)\n        : document.createElement(name);\n\n      html.append(childHtml);\n      if (child.attributes) {\n        this.setAttributes({\n          html: childHtml,\n          element: child,\n          storage,\n          intent,\n          linkService,\n        });\n      }\n\n      if (child.children?.length > 0) {\n        stack.push([child, -1, childHtml]);\n      } else if (child.value) {\n        const node = document.createTextNode(child.value);\n        if (isNotForRichText && XfaText.shouldBuildText(name)) {\n          textDivs.push(node);\n        }\n        childHtml.append(node);\n      }\n    }\n\n    /**\n     * TODO: re-enable that stuff once we've JS implementation.\n     * See https://bugzilla.mozilla.org/show_bug.cgi?id=1719465.\n     *\n     * for (const el of rootDiv.querySelectorAll(\n     * \".xfaDisabled input, .xfaDisabled textarea\"\n     * )) {\n     * el.setAttribute(\"disabled\", true);\n     * }\n     * for (const el of rootDiv.querySelectorAll(\n     * \".xfaReadOnly input, .xfaReadOnly textarea\"\n     * )) {\n     * el.setAttribute(\"readOnly\", true);\n     * }\n     */\n\n    for (const el of rootDiv.querySelectorAll(\n      \".xfaNonInteractive input, .xfaNonInteractive textarea\"\n    )) {\n      el.setAttribute(\"readOnly\", true);\n    }\n\n    return {\n      textDivs,\n    };\n  }\n\n  /**\n   * Update the XFA layer.\n   *\n   * @param {XfaLayerParameters} parameters\n   */\n  static update(parameters) {\n    const transform = `matrix(${parameters.viewport.transform.join(\",\")})`;\n    parameters.div.style.transform = transform;\n    parameters.div.hidden = false;\n  }\n}\n\nexport { XfaLayer };\n","/* Copyright 2021 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @typedef {import(\"./api\").TextContent} TextContent */\n\nclass XfaText {\n  /**\n   * Walk an XFA tree and create an array of text nodes that is compatible\n   * with a regular PDFs TextContent. Currently, only TextItem.str is supported,\n   * all other fields and styles haven't been implemented.\n   *\n   * @param {Object} xfa - An XFA fake DOM object.\n   *\n   * @returns {TextContent}\n   */\n  static textContent(xfa) {\n    const items = [];\n    const output = {\n      items,\n      styles: Object.create(null),\n    };\n    function walk(node) {\n      if (!node) {\n        return;\n      }\n      let str = null;\n      const name = node.name;\n      if (name === \"#text\") {\n        str = node.value;\n      } else if (!XfaText.shouldBuildText(name)) {\n        return;\n      } else if (node?.attributes?.textContent) {\n        str = node.attributes.textContent;\n      } else if (node.value) {\n        str = node.value;\n      }\n      if (str !== null) {\n        items.push({\n          str,\n        });\n      }\n      if (!node.children) {\n        return;\n      }\n      for (const child of node.children) {\n        walk(child);\n      }\n    }\n    walk(xfa);\n    return output;\n  }\n\n  /**\n   * @param {string} name - DOM node name. (lower case)\n   *\n   * @returns {boolean} true if the DOM node should have a corresponding text\n   * node.\n   */\n  static shouldBuildText(name) {\n    return !(\n      name === \"textarea\" ||\n      name === \"input\" ||\n      name === \"option\" ||\n      name === \"select\"\n    );\n  }\n}\n\nexport { XfaText };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./display/api\").OnProgressParameters} OnProgressParameters */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./display/api\").PDFDocumentLoadingTask} PDFDocumentLoadingTask */\n/** @typedef {import(\"./display/api\").PDFDocumentProxy} PDFDocumentProxy */\n/** @typedef {import(\"./display/api\").PDFPageProxy} PDFPageProxy */\n/** @typedef {import(\"./display/api\").RenderTask} RenderTask */\n/** @typedef {import(\"./display/display_utils\").PageViewport} PageViewport */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./display/text_layer\").TextLayerRenderTask} TextLayerRenderTask */\n\nimport {\n  AbortException,\n  AnnotationEditorParamsType,\n  AnnotationEditorType,\n  AnnotationMode,\n  CMapCompressionType,\n  createValidAbsoluteUrl,\n  FeatureTest,\n  ImageKind,\n  InvalidPDFException,\n  MissingPDFException,\n  normalizeUnicode,\n  OPS,\n  PasswordResponses,\n  PermissionFlag,\n  PromiseCapability,\n  shadow,\n  UnexpectedResponseException,\n  Util,\n  VerbosityLevel,\n} from \"./shared/util.js\";\nimport {\n  build,\n  getDocument,\n  PDFDataRangeTransport,\n  PDFWorker,\n  version,\n} from \"./display/api.js\";\nimport {\n  DOMSVGFactory,\n  fetchData,\n  getFilenameFromUrl,\n  getPdfFilenameFromUrl,\n  getXfaPageViewport,\n  isDataScheme,\n  isPdfFile,\n  noContextMenu,\n  PDFDateString,\n  PixelsPerInch,\n  RenderingCancelledException,\n  setLayerDimensions,\n} from \"./display/display_utils.js\";\nimport { renderTextLayer, updateTextLayer } from \"./display/text_layer.js\";\nimport { AnnotationEditorLayer } from \"./display/editor/annotation_editor_layer.js\";\nimport { AnnotationEditorUIManager } from \"./display/editor/tools.js\";\nimport { AnnotationLayer } from \"./display/annotation_layer.js\";\nimport { ColorPicker } from \"./display/editor/color_picker.js\";\nimport { DrawLayer } from \"./display/draw_layer.js\";\nimport { GlobalWorkerOptions } from \"./display/worker_options.js\";\nimport { Outliner } from \"./display/editor/outliner.js\";\nimport { XfaLayer } from \"./display/xfa_layer.js\";\n\n/* eslint-disable-next-line no-unused-vars */\nconst pdfjsVersion =\n  typeof PDFJSDev !== \"undefined\" ? PDFJSDev.eval(\"BUNDLE_VERSION\") : void 0;\n/* eslint-disable-next-line no-unused-vars */\nconst pdfjsBuild =\n  typeof PDFJSDev !== \"undefined\" ? PDFJSDev.eval(\"BUNDLE_BUILD\") : void 0;\n\nexport {\n  AbortException,\n  AnnotationEditorLayer,\n  AnnotationEditorParamsType,\n  AnnotationEditorType,\n  AnnotationEditorUIManager,\n  AnnotationLayer,\n  AnnotationMode,\n  build,\n  CMapCompressionType,\n  ColorPicker,\n  createValidAbsoluteUrl,\n  DOMSVGFactory,\n  DrawLayer,\n  FeatureTest,\n  fetchData,\n  getDocument,\n  getFilenameFromUrl,\n  getPdfFilenameFromUrl,\n  getXfaPageViewport,\n  GlobalWorkerOptions,\n  ImageKind,\n  InvalidPDFException,\n  isDataScheme,\n  isPdfFile,\n  MissingPDFException,\n  noContextMenu,\n  normalizeUnicode,\n  OPS,\n  Outliner,\n  PasswordResponses,\n  PDFDataRangeTransport,\n  PDFDateString,\n  PDFWorker,\n  PermissionFlag,\n  PixelsPerInch,\n  PromiseCapability,\n  RenderingCancelledException,\n  renderTextLayer,\n  setLayerDimensions,\n  shadow,\n  UnexpectedResponseException,\n  updateTextLayer,\n  Util,\n  VerbosityLevel,\n  version,\n  XfaLayer,\n};\n","/* Copyright 2018 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  AbortException,\n  assert,\n  MissingPDFException,\n  PasswordException,\n  PromiseCapability,\n  UnexpectedResponseException,\n  UnknownErrorException,\n  unreachable,\n} from \"./util.js\";\n\nconst CallbackKind = {\n  UNKNOWN: 0,\n  DATA: 1,\n  ERROR: 2,\n};\n\nconst StreamKind = {\n  UNKNOWN: 0,\n  CANCEL: 1,\n  CANCEL_COMPLETE: 2,\n  CLOSE: 3,\n  ENQUEUE: 4,\n  ERROR: 5,\n  PULL: 6,\n  PULL_COMPLETE: 7,\n  START_COMPLETE: 8,\n};\n\nfunction wrapReason(reason) {\n  if (\n    !(\n      reason instanceof Error ||\n      (typeof reason === \"object\" && reason !== null)\n    )\n  ) {\n    unreachable(\n      'wrapReason: Expected \"reason\" to be a (possibly cloned) Error.'\n    );\n  }\n  switch (reason.name) {\n    case \"AbortException\":\n      return new AbortException(reason.message);\n    case \"MissingPDFException\":\n      return new MissingPDFException(reason.message);\n    case \"PasswordException\":\n      return new PasswordException(reason.message, reason.code);\n    case \"UnexpectedResponseException\":\n      return new UnexpectedResponseException(reason.message, reason.status);\n    case \"UnknownErrorException\":\n      return new UnknownErrorException(reason.message, reason.details);\n    default:\n      return new UnknownErrorException(reason.message, reason.toString());\n  }\n}\n\nclass MessageHandler {\n  constructor(sourceName, targetName, comObj) {\n    this.sourceName = sourceName;\n    this.targetName = targetName;\n    this.comObj = comObj;\n    this.callbackId = 1;\n    this.streamId = 1;\n    this.streamSinks = Object.create(null);\n    this.streamControllers = Object.create(null);\n    this.callbackCapabilities = Object.create(null);\n    this.actionHandler = Object.create(null);\n\n    this._onComObjOnMessage = event => {\n      const data = event.data;\n      if (data.targetName !== this.sourceName) {\n        return;\n      }\n      if (data.stream) {\n        this.#processStreamMessage(data);\n        return;\n      }\n      if (data.callback) {\n        const callbackId = data.callbackId;\n        const capability = this.callbackCapabilities[callbackId];\n        if (!capability) {\n          throw new Error(`Cannot resolve callback ${callbackId}`);\n        }\n        delete this.callbackCapabilities[callbackId];\n\n        if (data.callback === CallbackKind.DATA) {\n          capability.resolve(data.data);\n        } else if (data.callback === CallbackKind.ERROR) {\n          capability.reject(wrapReason(data.reason));\n        } else {\n          throw new Error(\"Unexpected callback case\");\n        }\n        return;\n      }\n      const action = this.actionHandler[data.action];\n      if (!action) {\n        throw new Error(`Unknown action from worker: ${data.action}`);\n      }\n      if (data.callbackId) {\n        const cbSourceName = this.sourceName;\n        const cbTargetName = data.sourceName;\n\n        new Promise(function (resolve) {\n          resolve(action(data.data));\n        }).then(\n          function (result) {\n            comObj.postMessage({\n              sourceName: cbSourceName,\n              targetName: cbTargetName,\n              callback: CallbackKind.DATA,\n              callbackId: data.callbackId,\n              data: result,\n            });\n          },\n          function (reason) {\n            comObj.postMessage({\n              sourceName: cbSourceName,\n              targetName: cbTargetName,\n              callback: CallbackKind.ERROR,\n              callbackId: data.callbackId,\n              reason: wrapReason(reason),\n            });\n          }\n        );\n        return;\n      }\n      if (data.streamId) {\n        this.#createStreamSink(data);\n        return;\n      }\n      action(data.data);\n    };\n    comObj.addEventListener(\"message\", this._onComObjOnMessage);\n  }\n\n  on(actionName, handler) {\n    if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n      assert(\n        typeof handler === \"function\",\n        'MessageHandler.on: Expected \"handler\" to be a function.'\n      );\n    }\n    const ah = this.actionHandler;\n    if (ah[actionName]) {\n      throw new Error(`There is already an actionName called \"${actionName}\"`);\n    }\n    ah[actionName] = handler;\n  }\n\n  /**\n   * Sends a message to the comObj to invoke the action with the supplied data.\n   * @param {string} actionName - Action to call.\n   * @param {JSON} data - JSON data to send.\n   * @param {Array} [transfers] - List of transfers/ArrayBuffers.\n   */\n  send(actionName, data, transfers) {\n    this.comObj.postMessage(\n      {\n        sourceName: this.sourceName,\n        targetName: this.targetName,\n        action: actionName,\n        data,\n      },\n      transfers\n    );\n  }\n\n  /**\n   * Sends a message to the comObj to invoke the action with the supplied data.\n   * Expects that the other side will callback with the response.\n   * @param {string} actionName - Action to call.\n   * @param {JSON} data - JSON data to send.\n   * @param {Array} [transfers] - List of transfers/ArrayBuffers.\n   * @returns {Promise} Promise to be resolved with response data.\n   */\n  sendWithPromise(actionName, data, transfers) {\n    const callbackId = this.callbackId++;\n    const capability = new PromiseCapability();\n    this.callbackCapabilities[callbackId] = capability;\n    try {\n      this.comObj.postMessage(\n        {\n          sourceName: this.sourceName,\n          targetName: this.targetName,\n          action: actionName,\n          callbackId,\n          data,\n        },\n        transfers\n      );\n    } catch (ex) {\n      capability.reject(ex);\n    }\n    return capability.promise;\n  }\n\n  /**\n   * Sends a message to the comObj to invoke the action with the supplied data.\n   * Expect that the other side will callback to signal 'start_complete'.\n   * @param {string} actionName - Action to call.\n   * @param {JSON} data - JSON data to send.\n   * @param {Object} queueingStrategy - Strategy to signal backpressure based on\n   *                 internal queue.\n   * @param {Array} [transfers] - List of transfers/ArrayBuffers.\n   * @returns {ReadableStream} ReadableStream to read data in chunks.\n   */\n  sendWithStream(actionName, data, queueingStrategy, transfers) {\n    const streamId = this.streamId++,\n      sourceName = this.sourceName,\n      targetName = this.targetName,\n      comObj = this.comObj;\n\n    return new ReadableStream(\n      {\n        start: controller => {\n          const startCapability = new PromiseCapability();\n          this.streamControllers[streamId] = {\n            controller,\n            startCall: startCapability,\n            pullCall: null,\n            cancelCall: null,\n            isClosed: false,\n          };\n          comObj.postMessage(\n            {\n              sourceName,\n              targetName,\n              action: actionName,\n              streamId,\n              data,\n              desiredSize: controller.desiredSize,\n            },\n            transfers\n          );\n          // Return Promise for Async process, to signal success/failure.\n          return startCapability.promise;\n        },\n\n        pull: controller => {\n          const pullCapability = new PromiseCapability();\n          this.streamControllers[streamId].pullCall = pullCapability;\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.PULL,\n            streamId,\n            desiredSize: controller.desiredSize,\n          });\n          // Returning Promise will not call \"pull\"\n          // again until current pull is resolved.\n          return pullCapability.promise;\n        },\n\n        cancel: reason => {\n          assert(reason instanceof Error, \"cancel must have a valid reason\");\n          const cancelCapability = new PromiseCapability();\n          this.streamControllers[streamId].cancelCall = cancelCapability;\n          this.streamControllers[streamId].isClosed = true;\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.CANCEL,\n            streamId,\n            reason: wrapReason(reason),\n          });\n          // Return Promise to signal success or failure.\n          return cancelCapability.promise;\n        },\n      },\n      queueingStrategy\n    );\n  }\n\n  #createStreamSink(data) {\n    const streamId = data.streamId,\n      sourceName = this.sourceName,\n      targetName = data.sourceName,\n      comObj = this.comObj;\n    const self = this,\n      action = this.actionHandler[data.action];\n\n    const streamSink = {\n      enqueue(chunk, size = 1, transfers) {\n        if (this.isCancelled) {\n          return;\n        }\n        const lastDesiredSize = this.desiredSize;\n        this.desiredSize -= size;\n        // Enqueue decreases the desiredSize property of sink,\n        // so when it changes from positive to negative,\n        // set ready as unresolved promise.\n        if (lastDesiredSize > 0 && this.desiredSize <= 0) {\n          this.sinkCapability = new PromiseCapability();\n          this.ready = this.sinkCapability.promise;\n        }\n        comObj.postMessage(\n          {\n            sourceName,\n            targetName,\n            stream: StreamKind.ENQUEUE,\n            streamId,\n            chunk,\n          },\n          transfers\n        );\n      },\n\n      close() {\n        if (this.isCancelled) {\n          return;\n        }\n        this.isCancelled = true;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.CLOSE,\n          streamId,\n        });\n        delete self.streamSinks[streamId];\n      },\n\n      error(reason) {\n        assert(reason instanceof Error, \"error must have a valid reason\");\n        if (this.isCancelled) {\n          return;\n        }\n        this.isCancelled = true;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.ERROR,\n          streamId,\n          reason: wrapReason(reason),\n        });\n      },\n\n      sinkCapability: new PromiseCapability(),\n      onPull: null,\n      onCancel: null,\n      isCancelled: false,\n      desiredSize: data.desiredSize,\n      ready: null,\n    };\n\n    streamSink.sinkCapability.resolve();\n    streamSink.ready = streamSink.sinkCapability.promise;\n    this.streamSinks[streamId] = streamSink;\n\n    new Promise(function (resolve) {\n      resolve(action(data.data, streamSink));\n    }).then(\n      function () {\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.START_COMPLETE,\n          streamId,\n          success: true,\n        });\n      },\n      function (reason) {\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.START_COMPLETE,\n          streamId,\n          reason: wrapReason(reason),\n        });\n      }\n    );\n  }\n\n  #processStreamMessage(data) {\n    const streamId = data.streamId,\n      sourceName = this.sourceName,\n      targetName = data.sourceName,\n      comObj = this.comObj;\n    const streamController = this.streamControllers[streamId],\n      streamSink = this.streamSinks[streamId];\n\n    switch (data.stream) {\n      case StreamKind.START_COMPLETE:\n        if (data.success) {\n          streamController.startCall.resolve();\n        } else {\n          streamController.startCall.reject(wrapReason(data.reason));\n        }\n        break;\n      case StreamKind.PULL_COMPLETE:\n        if (data.success) {\n          streamController.pullCall.resolve();\n        } else {\n          streamController.pullCall.reject(wrapReason(data.reason));\n        }\n        break;\n      case StreamKind.PULL:\n        // Ignore any pull after close is called.\n        if (!streamSink) {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.PULL_COMPLETE,\n            streamId,\n            success: true,\n          });\n          break;\n        }\n        // Pull increases the desiredSize property of sink, so when it changes\n        // from negative to positive, set ready property as resolved promise.\n        if (streamSink.desiredSize <= 0 && data.desiredSize > 0) {\n          streamSink.sinkCapability.resolve();\n        }\n        // Reset desiredSize property of sink on every pull.\n        streamSink.desiredSize = data.desiredSize;\n\n        new Promise(function (resolve) {\n          resolve(streamSink.onPull?.());\n        }).then(\n          function () {\n            comObj.postMessage({\n              sourceName,\n              targetName,\n              stream: StreamKind.PULL_COMPLETE,\n              streamId,\n              success: true,\n            });\n          },\n          function (reason) {\n            comObj.postMessage({\n              sourceName,\n              targetName,\n              stream: StreamKind.PULL_COMPLETE,\n              streamId,\n              reason: wrapReason(reason),\n            });\n          }\n        );\n        break;\n      case StreamKind.ENQUEUE:\n        assert(streamController, \"enqueue should have stream controller\");\n        if (streamController.isClosed) {\n          break;\n        }\n        streamController.controller.enqueue(data.chunk);\n        break;\n      case StreamKind.CLOSE:\n        assert(streamController, \"close should have stream controller\");\n        if (streamController.isClosed) {\n          break;\n        }\n        streamController.isClosed = true;\n        streamController.controller.close();\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.ERROR:\n        assert(streamController, \"error should have stream controller\");\n        streamController.controller.error(wrapReason(data.reason));\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.CANCEL_COMPLETE:\n        if (data.success) {\n          streamController.cancelCall.resolve();\n        } else {\n          streamController.cancelCall.reject(wrapReason(data.reason));\n        }\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.CANCEL:\n        if (!streamSink) {\n          break;\n        }\n\n        new Promise(function (resolve) {\n          resolve(streamSink.onCancel?.(wrapReason(data.reason)));\n        }).then(\n          function () {\n            comObj.postMessage({\n              sourceName,\n              targetName,\n              stream: StreamKind.CANCEL_COMPLETE,\n              streamId,\n              success: true,\n            });\n          },\n          function (reason) {\n            comObj.postMessage({\n              sourceName,\n              targetName,\n              stream: StreamKind.CANCEL_COMPLETE,\n              streamId,\n              reason: wrapReason(reason),\n            });\n          }\n        );\n        streamSink.sinkCapability.reject(wrapReason(data.reason));\n        streamSink.isCancelled = true;\n        delete this.streamSinks[streamId];\n        break;\n      default:\n        throw new Error(\"Unexpected stream case\");\n    }\n  }\n\n  async #deleteStreamController(streamController, streamId) {\n    // Delete the `streamController` only when the start, pull, and cancel\n    // capabilities have settled, to prevent `TypeError`s.\n    await Promise.allSettled([\n      streamController.startCall?.promise,\n      streamController.pullCall?.promise,\n      streamController.cancelCall?.promise,\n    ]);\n    delete this.streamControllers[streamId];\n  }\n\n  destroy() {\n    this.comObj.removeEventListener(\"message\", this._onComObjOnMessage);\n  }\n}\n\nexport { MessageHandler };\n","/* Copyright 2014 Opera Software ASA\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n *\n * Based on https://code.google.com/p/smhasher/wiki/MurmurHash3.\n * Hashes roughly 100 KB per millisecond on i7 3.4 GHz.\n */\n\nimport { isArrayBuffer } from \"./util.js\";\n\nconst SEED = 0xc3d2e1f0;\n// Workaround for missing math precision in JS.\nconst MASK_HIGH = 0xffff0000;\nconst MASK_LOW = 0xffff;\n\nclass MurmurHash3_64 {\n  constructor(seed) {\n    this.h1 = seed ? seed & 0xffffffff : SEED;\n    this.h2 = seed ? seed & 0xffffffff : SEED;\n  }\n\n  update(input) {\n    let data, length;\n    if (typeof input === \"string\") {\n      data = new Uint8Array(input.length * 2);\n      length = 0;\n      for (let i = 0, ii = input.length; i < ii; i++) {\n        const code = input.charCodeAt(i);\n        if (code <= 0xff) {\n          data[length++] = code;\n        } else {\n          data[length++] = code >>> 8;\n          data[length++] = code & 0xff;\n        }\n      }\n    } else if (isArrayBuffer(input)) {\n      data = input.slice();\n      length = data.byteLength;\n    } else {\n      throw new Error(\n        \"Wrong data format in MurmurHash3_64_update. \" +\n          \"Input must be a string or array.\"\n      );\n    }\n\n    const blockCounts = length >> 2;\n    const tailLength = length - blockCounts * 4;\n    // We don't care about endianness here.\n    const dataUint32 = new Uint32Array(data.buffer, 0, blockCounts);\n    let k1 = 0,\n      k2 = 0;\n    let h1 = this.h1,\n      h2 = this.h2;\n    const C1 = 0xcc9e2d51,\n      C2 = 0x1b873593;\n    const C1_LOW = C1 & MASK_LOW,\n      C2_LOW = C2 & MASK_LOW;\n\n    for (let i = 0; i < blockCounts; i++) {\n      if (i & 1) {\n        k1 = dataUint32[i];\n        k1 = ((k1 * C1) & MASK_HIGH) | ((k1 * C1_LOW) & MASK_LOW);\n        k1 = (k1 << 15) | (k1 >>> 17);\n        k1 = ((k1 * C2) & MASK_HIGH) | ((k1 * C2_LOW) & MASK_LOW);\n        h1 ^= k1;\n        h1 = (h1 << 13) | (h1 >>> 19);\n        h1 = h1 * 5 + 0xe6546b64;\n      } else {\n        k2 = dataUint32[i];\n        k2 = ((k2 * C1) & MASK_HIGH) | ((k2 * C1_LOW) & MASK_LOW);\n        k2 = (k2 << 15) | (k2 >>> 17);\n        k2 = ((k2 * C2) & MASK_HIGH) | ((k2 * C2_LOW) & MASK_LOW);\n        h2 ^= k2;\n        h2 = (h2 << 13) | (h2 >>> 19);\n        h2 = h2 * 5 + 0xe6546b64;\n      }\n    }\n\n    k1 = 0;\n\n    switch (tailLength) {\n      case 3:\n        k1 ^= data[blockCounts * 4 + 2] << 16;\n      /* falls through */\n      case 2:\n        k1 ^= data[blockCounts * 4 + 1] << 8;\n      /* falls through */\n      case 1:\n        k1 ^= data[blockCounts * 4];\n        /* falls through */\n\n        k1 = ((k1 * C1) & MASK_HIGH) | ((k1 * C1_LOW) & MASK_LOW);\n        k1 = (k1 << 15) | (k1 >>> 17);\n        k1 = ((k1 * C2) & MASK_HIGH) | ((k1 * C2_LOW) & MASK_LOW);\n        if (blockCounts & 1) {\n          h1 ^= k1;\n        } else {\n          h2 ^= k1;\n        }\n    }\n\n    this.h1 = h1;\n    this.h2 = h2;\n  }\n\n  hexdigest() {\n    let h1 = this.h1,\n      h2 = this.h2;\n\n    h1 ^= h2 >>> 1;\n    h1 = ((h1 * 0xed558ccd) & MASK_HIGH) | ((h1 * 0x8ccd) & MASK_LOW);\n    h2 =\n      ((h2 * 0xff51afd7) & MASK_HIGH) |\n      (((((h2 << 16) | (h1 >>> 16)) * 0xafd7ed55) & MASK_HIGH) >>> 16);\n    h1 ^= h2 >>> 1;\n    h1 = ((h1 * 0x1a85ec53) & MASK_HIGH) | ((h1 * 0xec53) & MASK_LOW);\n    h2 =\n      ((h2 * 0xc4ceb9fe) & MASK_HIGH) |\n      (((((h2 << 16) | (h1 >>> 16)) * 0xb9fe1a85) & MASK_HIGH) >>> 16);\n    h1 ^= h2 >>> 1;\n\n    return (\n      (h1 >>> 0).toString(16).padStart(8, \"0\") +\n      (h2 >>> 0).toString(16).padStart(8, \"0\")\n    );\n  }\n}\n\nexport { MurmurHash3_64 };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* globals process */\n\n// NW.js / Electron is a browser context, but copies some Node.js objects; see\n// http://docs.nwjs.io/en/latest/For%20Users/Advanced/JavaScript%20Contexts%20in%20NW.js/#access-nodejs-and-nwjs-api-in-browser-context\n// https://www.electronjs.org/docs/api/process#processversionselectron-readonly\n// https://www.electronjs.org/docs/api/process#processtype-readonly\nconst isNodeJS =\n  (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"GENERIC\")) &&\n  typeof process === \"object\" &&\n  process + \"\" === \"[object process]\" &&\n  !process.versions.nw &&\n  !(process.versions.electron && process.type && process.type !== \"browser\");\n\nconst IDENTITY_MATRIX = [1, 0, 0, 1, 0, 0];\nconst FONT_IDENTITY_MATRIX = [0.001, 0, 0, 0.001, 0, 0];\n\nconst MAX_IMAGE_SIZE_TO_CACHE = 10e6; // Ten megabytes.\n\n// Represent the percentage of the height of a single-line field over\n// the font size. Acrobat seems to use this value.\nconst LINE_FACTOR = 1.35;\nconst LINE_DESCENT_FACTOR = 0.35;\nconst BASELINE_FACTOR = LINE_DESCENT_FACTOR / LINE_FACTOR;\n\n/**\n * Refer to the `WorkerTransport.getRenderingIntent`-method in the API, to see\n * how these flags are being used:\n *  - ANY, DISPLAY, and PRINT are the normal rendering intents, note the\n *    `PDFPageProxy.{render, getOperatorList, getAnnotations}`-methods.\n *  - ANNOTATIONS_FORMS, ANNOTATIONS_STORAGE, ANNOTATIONS_DISABLE control which\n *    annotations are rendered onto the canvas (i.e. by being included in the\n *    operatorList), note the `PDFPageProxy.{render, getOperatorList}`-methods\n *    and their `annotationMode`-option.\n *  - OPLIST is used with the `PDFPageProxy.getOperatorList`-method, note the\n *    `OperatorList`-constructor (on the worker-thread).\n */\nconst RenderingIntentFlag = {\n  ANY: 0x01,\n  DISPLAY: 0x02,\n  PRINT: 0x04,\n  SAVE: 0x08,\n  ANNOTATIONS_FORMS: 0x10,\n  ANNOTATIONS_STORAGE: 0x20,\n  ANNOTATIONS_DISABLE: 0x40,\n  OPLIST: 0x100,\n};\n\nconst AnnotationMode = {\n  DISABLE: 0,\n  ENABLE: 1,\n  ENABLE_FORMS: 2,\n  ENABLE_STORAGE: 3,\n};\n\nconst AnnotationEditorPrefix = \"pdfjs_internal_editor_\";\n\nconst AnnotationEditorType = {\n  DISABLE: -1,\n  NONE: 0,\n  FREETEXT: 3,\n  HIGHLIGHT: 9,\n  STAMP: 13,\n  INK: 15,\n};\n\nconst AnnotationEditorParamsType = {\n  RESIZE: 1,\n  CREATE: 2,\n  FREETEXT_SIZE: 11,\n  FREETEXT_COLOR: 12,\n  FREETEXT_OPACITY: 13,\n  INK_COLOR: 21,\n  INK_THICKNESS: 22,\n  INK_OPACITY: 23,\n  HIGHLIGHT_COLOR: 31,\n  HIGHLIGHT_DEFAULT_COLOR: 32,\n};\n\n// Permission flags from Table 22, Section 7.6.3.2 of the PDF specification.\nconst PermissionFlag = {\n  PRINT: 0x04,\n  MODIFY_CONTENTS: 0x08,\n  COPY: 0x10,\n  MODIFY_ANNOTATIONS: 0x20,\n  FILL_INTERACTIVE_FORMS: 0x100,\n  COPY_FOR_ACCESSIBILITY: 0x200,\n  ASSEMBLE: 0x400,\n  PRINT_HIGH_QUALITY: 0x800,\n};\n\nconst TextRenderingMode = {\n  FILL: 0,\n  STROKE: 1,\n  FILL_STROKE: 2,\n  INVISIBLE: 3,\n  FILL_ADD_TO_PATH: 4,\n  STROKE_ADD_TO_PATH: 5,\n  FILL_STROKE_ADD_TO_PATH: 6,\n  ADD_TO_PATH: 7,\n  FILL_STROKE_MASK: 3,\n  ADD_TO_PATH_FLAG: 4,\n};\n\nconst ImageKind = {\n  GRAYSCALE_1BPP: 1,\n  RGB_24BPP: 2,\n  RGBA_32BPP: 3,\n};\n\nconst AnnotationType = {\n  TEXT: 1,\n  LINK: 2,\n  FREETEXT: 3,\n  LINE: 4,\n  SQUARE: 5,\n  CIRCLE: 6,\n  POLYGON: 7,\n  POLYLINE: 8,\n  HIGHLIGHT: 9,\n  UNDERLINE: 10,\n  SQUIGGLY: 11,\n  STRIKEOUT: 12,\n  STAMP: 13,\n  CARET: 14,\n  INK: 15,\n  POPUP: 16,\n  FILEATTACHMENT: 17,\n  SOUND: 18,\n  MOVIE: 19,\n  WIDGET: 20,\n  SCREEN: 21,\n  PRINTERMARK: 22,\n  TRAPNET: 23,\n  WATERMARK: 24,\n  THREED: 25,\n  REDACT: 26,\n};\n\nconst AnnotationReplyType = {\n  GROUP: \"Group\",\n  REPLY: \"R\",\n};\n\nconst AnnotationFlag = {\n  INVISIBLE: 0x01,\n  HIDDEN: 0x02,\n  PRINT: 0x04,\n  NOZOOM: 0x08,\n  NOROTATE: 0x10,\n  NOVIEW: 0x20,\n  READONLY: 0x40,\n  LOCKED: 0x80,\n  TOGGLENOVIEW: 0x100,\n  LOCKEDCONTENTS: 0x200,\n};\n\nconst AnnotationFieldFlag = {\n  READONLY: 0x0000001,\n  REQUIRED: 0x0000002,\n  NOEXPORT: 0x0000004,\n  MULTILINE: 0x0001000,\n  PASSWORD: 0x0002000,\n  NOTOGGLETOOFF: 0x0004000,\n  RADIO: 0x0008000,\n  PUSHBUTTON: 0x0010000,\n  COMBO: 0x0020000,\n  EDIT: 0x0040000,\n  SORT: 0x0080000,\n  FILESELECT: 0x0100000,\n  MULTISELECT: 0x0200000,\n  DONOTSPELLCHECK: 0x0400000,\n  DONOTSCROLL: 0x0800000,\n  COMB: 0x1000000,\n  RICHTEXT: 0x2000000,\n  RADIOSINUNISON: 0x2000000,\n  COMMITONSELCHANGE: 0x4000000,\n};\n\nconst AnnotationBorderStyleType = {\n  SOLID: 1,\n  DASHED: 2,\n  BEVELED: 3,\n  INSET: 4,\n  UNDERLINE: 5,\n};\n\nconst AnnotationActionEventType = {\n  E: \"Mouse Enter\",\n  X: \"Mouse Exit\",\n  D: \"Mouse Down\",\n  U: \"Mouse Up\",\n  Fo: \"Focus\",\n  Bl: \"Blur\",\n  PO: \"PageOpen\",\n  PC: \"PageClose\",\n  PV: \"PageVisible\",\n  PI: \"PageInvisible\",\n  K: \"Keystroke\",\n  F: \"Format\",\n  V: \"Validate\",\n  C: \"Calculate\",\n};\n\nconst DocumentActionEventType = {\n  WC: \"WillClose\",\n  WS: \"WillSave\",\n  DS: \"DidSave\",\n  WP: \"WillPrint\",\n  DP: \"DidPrint\",\n};\n\nconst PageActionEventType = {\n  O: \"PageOpen\",\n  C: \"PageClose\",\n};\n\nconst VerbosityLevel = {\n  ERRORS: 0,\n  WARNINGS: 1,\n  INFOS: 5,\n};\n\nconst CMapCompressionType = {\n  NONE: 0,\n  BINARY: 1,\n};\n\n// All the possible operations for an operator list.\nconst OPS = {\n  // Intentionally start from 1 so it is easy to spot bad operators that will be\n  // 0's.\n  // PLEASE NOTE: We purposely keep any removed operators commented out, since\n  //              re-numbering the list would risk breaking third-party users.\n  dependency: 1,\n  setLineWidth: 2,\n  setLineCap: 3,\n  setLineJoin: 4,\n  setMiterLimit: 5,\n  setDash: 6,\n  setRenderingIntent: 7,\n  setFlatness: 8,\n  setGState: 9,\n  save: 10,\n  restore: 11,\n  transform: 12,\n  moveTo: 13,\n  lineTo: 14,\n  curveTo: 15,\n  curveTo2: 16,\n  curveTo3: 17,\n  closePath: 18,\n  rectangle: 19,\n  stroke: 20,\n  closeStroke: 21,\n  fill: 22,\n  eoFill: 23,\n  fillStroke: 24,\n  eoFillStroke: 25,\n  closeFillStroke: 26,\n  closeEOFillStroke: 27,\n  endPath: 28,\n  clip: 29,\n  eoClip: 30,\n  beginText: 31,\n  endText: 32,\n  setCharSpacing: 33,\n  setWordSpacing: 34,\n  setHScale: 35,\n  setLeading: 36,\n  setFont: 37,\n  setTextRenderingMode: 38,\n  setTextRise: 39,\n  moveText: 40,\n  setLeadingMoveText: 41,\n  setTextMatrix: 42,\n  nextLine: 43,\n  showText: 44,\n  showSpacedText: 45,\n  nextLineShowText: 46,\n  nextLineSetSpacingShowText: 47,\n  setCharWidth: 48,\n  setCharWidthAndBounds: 49,\n  setStrokeColorSpace: 50,\n  setFillColorSpace: 51,\n  setStrokeColor: 52,\n  setStrokeColorN: 53,\n  setFillColor: 54,\n  setFillColorN: 55,\n  setStrokeGray: 56,\n  setFillGray: 57,\n  setStrokeRGBColor: 58,\n  setFillRGBColor: 59,\n  setStrokeCMYKColor: 60,\n  setFillCMYKColor: 61,\n  shadingFill: 62,\n  beginInlineImage: 63,\n  beginImageData: 64,\n  endInlineImage: 65,\n  paintXObject: 66,\n  markPoint: 67,\n  markPointProps: 68,\n  beginMarkedContent: 69,\n  beginMarkedContentProps: 70,\n  endMarkedContent: 71,\n  beginCompat: 72,\n  endCompat: 73,\n  paintFormXObjectBegin: 74,\n  paintFormXObjectEnd: 75,\n  beginGroup: 76,\n  endGroup: 77,\n  // beginAnnotations: 78,\n  // endAnnotations: 79,\n  beginAnnotation: 80,\n  endAnnotation: 81,\n  // paintJpegXObject: 82,\n  paintImageMaskXObject: 83,\n  paintImageMaskXObjectGroup: 84,\n  paintImageXObject: 85,\n  paintInlineImageXObject: 86,\n  paintInlineImageXObjectGroup: 87,\n  paintImageXObjectRepeat: 88,\n  paintImageMaskXObjectRepeat: 89,\n  paintSolidColorImageMask: 90,\n  constructPath: 91,\n};\n\nconst PasswordResponses = {\n  NEED_PASSWORD: 1,\n  INCORRECT_PASSWORD: 2,\n};\n\nlet verbosity = VerbosityLevel.WARNINGS;\n\nfunction setVerbosityLevel(level) {\n  if (Number.isInteger(level)) {\n    verbosity = level;\n  }\n}\n\nfunction getVerbosityLevel() {\n  return verbosity;\n}\n\n// A notice for devs. These are good for things that are helpful to devs, such\n// as warning that Workers were disabled, which is important to devs but not\n// end users.\nfunction info(msg) {\n  if (verbosity >= VerbosityLevel.INFOS) {\n    console.log(`Info: ${msg}`);\n  }\n}\n\n// Non-fatal warnings.\nfunction warn(msg) {\n  if (verbosity >= VerbosityLevel.WARNINGS) {\n    console.log(`Warning: ${msg}`);\n  }\n}\n\nfunction unreachable(msg) {\n  throw new Error(msg);\n}\n\nfunction assert(cond, msg) {\n  if (!cond) {\n    unreachable(msg);\n  }\n}\n\n// Checks if URLs use one of the allowed protocols, e.g. to avoid XSS.\nfunction _isValidProtocol(url) {\n  switch (url?.protocol) {\n    case \"http:\":\n    case \"https:\":\n    case \"ftp:\":\n    case \"mailto:\":\n    case \"tel:\":\n      return true;\n    default:\n      return false;\n  }\n}\n\n/**\n * Attempts to create a valid absolute URL.\n *\n * @param {URL|string} url - An absolute, or relative, URL.\n * @param {URL|string} [baseUrl] - An absolute URL.\n * @param {Object} [options]\n * @returns Either a valid {URL}, or `null` otherwise.\n */\nfunction createValidAbsoluteUrl(url, baseUrl = null, options = null) {\n  if (!url) {\n    return null;\n  }\n  try {\n    if (options && typeof url === \"string\") {\n      // Let URLs beginning with \"www.\" default to using the \"http://\" protocol.\n      if (options.addDefaultProtocol && url.startsWith(\"www.\")) {\n        const dots = url.match(/\\./g);\n        // Avoid accidentally matching a *relative* URL pointing to a file named\n        // e.g. \"www.pdf\" or similar.\n        if (dots?.length >= 2) {\n          url = `http://${url}`;\n        }\n      }\n\n      // According to ISO 32000-1:2008, section 12.6.4.7, URIs should be encoded\n      // in 7-bit ASCII. Some bad PDFs use UTF-8 encoding; see bug 1122280.\n      if (options.tryConvertEncoding) {\n        try {\n          url = stringToUTF8String(url);\n        } catch {}\n      }\n    }\n\n    const absoluteUrl = baseUrl ? new URL(url, baseUrl) : new URL(url);\n    if (_isValidProtocol(absoluteUrl)) {\n      return absoluteUrl;\n    }\n  } catch {\n    /* `new URL()` will throw on incorrect data. */\n  }\n  return null;\n}\n\nfunction shadow(obj, prop, value, nonSerializable = false) {\n  if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n    assert(\n      prop in obj,\n      `shadow: Property \"${prop && prop.toString()}\" not found in object.`\n    );\n  }\n  Object.defineProperty(obj, prop, {\n    value,\n    enumerable: !nonSerializable,\n    configurable: true,\n    writable: false,\n  });\n  return value;\n}\n\n/**\n * @type {any}\n */\nconst BaseException = (function BaseExceptionClosure() {\n  // eslint-disable-next-line no-shadow\n  function BaseException(message, name) {\n    if (this.constructor === BaseException) {\n      unreachable(\"Cannot initialize BaseException.\");\n    }\n    this.message = message;\n    this.name = name;\n  }\n  BaseException.prototype = new Error();\n  BaseException.constructor = BaseException;\n\n  return BaseException;\n})();\n\nclass PasswordException extends BaseException {\n  constructor(msg, code) {\n    super(msg, \"PasswordException\");\n    this.code = code;\n  }\n}\n\nclass UnknownErrorException extends BaseException {\n  constructor(msg, details) {\n    super(msg, \"UnknownErrorException\");\n    this.details = details;\n  }\n}\n\nclass InvalidPDFException extends BaseException {\n  constructor(msg) {\n    super(msg, \"InvalidPDFException\");\n  }\n}\n\nclass MissingPDFException extends BaseException {\n  constructor(msg) {\n    super(msg, \"MissingPDFException\");\n  }\n}\n\nclass UnexpectedResponseException extends BaseException {\n  constructor(msg, status) {\n    super(msg, \"UnexpectedResponseException\");\n    this.status = status;\n  }\n}\n\n/**\n * Error caused during parsing PDF data.\n */\nclass FormatError extends BaseException {\n  constructor(msg) {\n    super(msg, \"FormatError\");\n  }\n}\n\n/**\n * Error used to indicate task cancellation.\n */\nclass AbortException extends BaseException {\n  constructor(msg) {\n    super(msg, \"AbortException\");\n  }\n}\n\nfunction bytesToString(bytes) {\n  if (typeof bytes !== \"object\" || bytes?.length === undefined) {\n    unreachable(\"Invalid argument for bytesToString\");\n  }\n  const length = bytes.length;\n  const MAX_ARGUMENT_COUNT = 8192;\n  if (length < MAX_ARGUMENT_COUNT) {\n    return String.fromCharCode.apply(null, bytes);\n  }\n  const strBuf = [];\n  for (let i = 0; i < length; i += MAX_ARGUMENT_COUNT) {\n    const chunkEnd = Math.min(i + MAX_ARGUMENT_COUNT, length);\n    const chunk = bytes.subarray(i, chunkEnd);\n    strBuf.push(String.fromCharCode.apply(null, chunk));\n  }\n  return strBuf.join(\"\");\n}\n\nfunction stringToBytes(str) {\n  if (typeof str !== \"string\") {\n    unreachable(\"Invalid argument for stringToBytes\");\n  }\n  const length = str.length;\n  const bytes = new Uint8Array(length);\n  for (let i = 0; i < length; ++i) {\n    bytes[i] = str.charCodeAt(i) & 0xff;\n  }\n  return bytes;\n}\n\nfunction string32(value) {\n  if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n    assert(\n      typeof value === \"number\" && Math.abs(value) < 2 ** 32,\n      `string32: Unexpected input \"${value}\".`\n    );\n  }\n  return String.fromCharCode(\n    (value >> 24) & 0xff,\n    (value >> 16) & 0xff,\n    (value >> 8) & 0xff,\n    value & 0xff\n  );\n}\n\nfunction objectSize(obj) {\n  return Object.keys(obj).length;\n}\n\n// Ensure that the returned Object has a `null` prototype; hence why\n// `Object.fromEntries(...)` is not used.\nfunction objectFromMap(map) {\n  const obj = Object.create(null);\n  for (const [key, value] of map) {\n    obj[key] = value;\n  }\n  return obj;\n}\n\n// Checks the endianness of the platform.\nfunction isLittleEndian() {\n  const buffer8 = new Uint8Array(4);\n  buffer8[0] = 1;\n  const view32 = new Uint32Array(buffer8.buffer, 0, 1);\n  return view32[0] === 1;\n}\n\n// Checks if it's possible to eval JS expressions.\nfunction isEvalSupported() {\n  try {\n    new Function(\"\"); // eslint-disable-line no-new, no-new-func\n    return true;\n  } catch {\n    return false;\n  }\n}\n\nclass FeatureTest {\n  static get isLittleEndian() {\n    return shadow(this, \"isLittleEndian\", isLittleEndian());\n  }\n\n  static get isEvalSupported() {\n    return shadow(this, \"isEvalSupported\", isEvalSupported());\n  }\n\n  static get isOffscreenCanvasSupported() {\n    return shadow(\n      this,\n      \"isOffscreenCanvasSupported\",\n      typeof OffscreenCanvas !== \"undefined\"\n    );\n  }\n\n  static get platform() {\n    if (\n      (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) ||\n      (typeof navigator !== \"undefined\" &&\n        typeof navigator?.platform === \"string\")\n    ) {\n      return shadow(this, \"platform\", {\n        isMac: navigator.platform.includes(\"Mac\"),\n      });\n    }\n    return shadow(this, \"platform\", { isMac: false });\n  }\n\n  static get isCSSRoundSupported() {\n    return shadow(\n      this,\n      \"isCSSRoundSupported\",\n      globalThis.CSS?.supports?.(\"width: round(1.5px, 1px)\")\n    );\n  }\n}\n\nconst hexNumbers = [...Array(256).keys()].map(n =>\n  n.toString(16).padStart(2, \"0\")\n);\n\nclass Util {\n  static makeHexColor(r, g, b) {\n    return `#${hexNumbers[r]}${hexNumbers[g]}${hexNumbers[b]}`;\n  }\n\n  // Apply a scaling matrix to some min/max values.\n  // If a scaling factor is negative then min and max must be\n  // swaped.\n  static scaleMinMax(transform, minMax) {\n    let temp;\n    if (transform[0]) {\n      if (transform[0] < 0) {\n        temp = minMax[0];\n        minMax[0] = minMax[1];\n        minMax[1] = temp;\n      }\n      minMax[0] *= transform[0];\n      minMax[1] *= transform[0];\n\n      if (transform[3] < 0) {\n        temp = minMax[2];\n        minMax[2] = minMax[3];\n        minMax[3] = temp;\n      }\n      minMax[2] *= transform[3];\n      minMax[3] *= transform[3];\n    } else {\n      temp = minMax[0];\n      minMax[0] = minMax[2];\n      minMax[2] = temp;\n      temp = minMax[1];\n      minMax[1] = minMax[3];\n      minMax[3] = temp;\n\n      if (transform[1] < 0) {\n        temp = minMax[2];\n        minMax[2] = minMax[3];\n        minMax[3] = temp;\n      }\n      minMax[2] *= transform[1];\n      minMax[3] *= transform[1];\n\n      if (transform[2] < 0) {\n        temp = minMax[0];\n        minMax[0] = minMax[1];\n        minMax[1] = temp;\n      }\n      minMax[0] *= transform[2];\n      minMax[1] *= transform[2];\n    }\n    minMax[0] += transform[4];\n    minMax[1] += transform[4];\n    minMax[2] += transform[5];\n    minMax[3] += transform[5];\n  }\n\n  // Concatenates two transformation matrices together and returns the result.\n  static transform(m1, m2) {\n    return [\n      m1[0] * m2[0] + m1[2] * m2[1],\n      m1[1] * m2[0] + m1[3] * m2[1],\n      m1[0] * m2[2] + m1[2] * m2[3],\n      m1[1] * m2[2] + m1[3] * m2[3],\n      m1[0] * m2[4] + m1[2] * m2[5] + m1[4],\n      m1[1] * m2[4] + m1[3] * m2[5] + m1[5],\n    ];\n  }\n\n  // For 2d affine transforms\n  static applyTransform(p, m) {\n    const xt = p[0] * m[0] + p[1] * m[2] + m[4];\n    const yt = p[0] * m[1] + p[1] * m[3] + m[5];\n    return [xt, yt];\n  }\n\n  static applyInverseTransform(p, m) {\n    const d = m[0] * m[3] - m[1] * m[2];\n    const xt = (p[0] * m[3] - p[1] * m[2] + m[2] * m[5] - m[4] * m[3]) / d;\n    const yt = (-p[0] * m[1] + p[1] * m[0] + m[4] * m[1] - m[5] * m[0]) / d;\n    return [xt, yt];\n  }\n\n  // Applies the transform to the rectangle and finds the minimum axially\n  // aligned bounding box.\n  static getAxialAlignedBoundingBox(r, m) {\n    const p1 = this.applyTransform(r, m);\n    const p2 = this.applyTransform(r.slice(2, 4), m);\n    const p3 = this.applyTransform([r[0], r[3]], m);\n    const p4 = this.applyTransform([r[2], r[1]], m);\n    return [\n      Math.min(p1[0], p2[0], p3[0], p4[0]),\n      Math.min(p1[1], p2[1], p3[1], p4[1]),\n      Math.max(p1[0], p2[0], p3[0], p4[0]),\n      Math.max(p1[1], p2[1], p3[1], p4[1]),\n    ];\n  }\n\n  static inverseTransform(m) {\n    const d = m[0] * m[3] - m[1] * m[2];\n    return [\n      m[3] / d,\n      -m[1] / d,\n      -m[2] / d,\n      m[0] / d,\n      (m[2] * m[5] - m[4] * m[3]) / d,\n      (m[4] * m[1] - m[5] * m[0]) / d,\n    ];\n  }\n\n  // This calculation uses Singular Value Decomposition.\n  // The SVD can be represented with formula A = USV. We are interested in the\n  // matrix S here because it represents the scale values.\n  static singularValueDecompose2dScale(m) {\n    const transpose = [m[0], m[2], m[1], m[3]];\n\n    // Multiply matrix m with its transpose.\n    const a = m[0] * transpose[0] + m[1] * transpose[2];\n    const b = m[0] * transpose[1] + m[1] * transpose[3];\n    const c = m[2] * transpose[0] + m[3] * transpose[2];\n    const d = m[2] * transpose[1] + m[3] * transpose[3];\n\n    // Solve the second degree polynomial to get roots.\n    const first = (a + d) / 2;\n    const second = Math.sqrt((a + d) ** 2 - 4 * (a * d - c * b)) / 2;\n    const sx = first + second || 1;\n    const sy = first - second || 1;\n\n    // Scale values are the square roots of the eigenvalues.\n    return [Math.sqrt(sx), Math.sqrt(sy)];\n  }\n\n  // Normalize rectangle rect=[x1, y1, x2, y2] so that (x1,y1) < (x2,y2)\n  // For coordinate systems whose origin lies in the bottom-left, this\n  // means normalization to (BL,TR) ordering. For systems with origin in the\n  // top-left, this means (TL,BR) ordering.\n  static normalizeRect(rect) {\n    const r = rect.slice(0); // clone rect\n    if (rect[0] > rect[2]) {\n      r[0] = rect[2];\n      r[2] = rect[0];\n    }\n    if (rect[1] > rect[3]) {\n      r[1] = rect[3];\n      r[3] = rect[1];\n    }\n    return r;\n  }\n\n  // Returns a rectangle [x1, y1, x2, y2] corresponding to the\n  // intersection of rect1 and rect2. If no intersection, returns 'null'\n  // The rectangle coordinates of rect1, rect2 should be [x1, y1, x2, y2]\n  static intersect(rect1, rect2) {\n    const xLow = Math.max(\n      Math.min(rect1[0], rect1[2]),\n      Math.min(rect2[0], rect2[2])\n    );\n    const xHigh = Math.min(\n      Math.max(rect1[0], rect1[2]),\n      Math.max(rect2[0], rect2[2])\n    );\n    if (xLow > xHigh) {\n      return null;\n    }\n    const yLow = Math.max(\n      Math.min(rect1[1], rect1[3]),\n      Math.min(rect2[1], rect2[3])\n    );\n    const yHigh = Math.min(\n      Math.max(rect1[1], rect1[3]),\n      Math.max(rect2[1], rect2[3])\n    );\n    if (yLow > yHigh) {\n      return null;\n    }\n\n    return [xLow, yLow, xHigh, yHigh];\n  }\n\n  // From https://github.com/adobe-webplatform/Snap.svg/blob/b365287722a72526000ac4bfcf0ce4cac2faa015/src/path.js#L852\n  static bezierBoundingBox(x0, y0, x1, y1, x2, y2, x3, y3) {\n    const tvalues = [],\n      bounds = [[], []];\n    let a, b, c, t, t1, t2, b2ac, sqrtb2ac;\n    for (let i = 0; i < 2; ++i) {\n      if (i === 0) {\n        b = 6 * x0 - 12 * x1 + 6 * x2;\n        a = -3 * x0 + 9 * x1 - 9 * x2 + 3 * x3;\n        c = 3 * x1 - 3 * x0;\n      } else {\n        b = 6 * y0 - 12 * y1 + 6 * y2;\n        a = -3 * y0 + 9 * y1 - 9 * y2 + 3 * y3;\n        c = 3 * y1 - 3 * y0;\n      }\n      if (Math.abs(a) < 1e-12) {\n        if (Math.abs(b) < 1e-12) {\n          continue;\n        }\n        t = -c / b;\n        if (0 < t && t < 1) {\n          tvalues.push(t);\n        }\n        continue;\n      }\n      b2ac = b * b - 4 * c * a;\n      sqrtb2ac = Math.sqrt(b2ac);\n      if (b2ac < 0) {\n        continue;\n      }\n      t1 = (-b + sqrtb2ac) / (2 * a);\n      if (0 < t1 && t1 < 1) {\n        tvalues.push(t1);\n      }\n      t2 = (-b - sqrtb2ac) / (2 * a);\n      if (0 < t2 && t2 < 1) {\n        tvalues.push(t2);\n      }\n    }\n\n    let j = tvalues.length,\n      mt;\n    const jlen = j;\n    while (j--) {\n      t = tvalues[j];\n      mt = 1 - t;\n      bounds[0][j] =\n        mt * mt * mt * x0 +\n        3 * mt * mt * t * x1 +\n        3 * mt * t * t * x2 +\n        t * t * t * x3;\n      bounds[1][j] =\n        mt * mt * mt * y0 +\n        3 * mt * mt * t * y1 +\n        3 * mt * t * t * y2 +\n        t * t * t * y3;\n    }\n\n    bounds[0][jlen] = x0;\n    bounds[1][jlen] = y0;\n    bounds[0][jlen + 1] = x3;\n    bounds[1][jlen + 1] = y3;\n    bounds[0].length = bounds[1].length = jlen + 2;\n\n    return [\n      Math.min(...bounds[0]),\n      Math.min(...bounds[1]),\n      Math.max(...bounds[0]),\n      Math.max(...bounds[1]),\n    ];\n  }\n}\n\nconst PDFStringTranslateTable = [\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x2d8,\n  0x2c7, 0x2c6, 0x2d9, 0x2dd, 0x2db, 0x2da, 0x2dc, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0x2022, 0x2020, 0x2021, 0x2026, 0x2014, 0x2013, 0x192,\n  0x2044, 0x2039, 0x203a, 0x2212, 0x2030, 0x201e, 0x201c, 0x201d, 0x2018,\n  0x2019, 0x201a, 0x2122, 0xfb01, 0xfb02, 0x141, 0x152, 0x160, 0x178, 0x17d,\n  0x131, 0x142, 0x153, 0x161, 0x17e, 0, 0x20ac,\n];\n\nfunction stringToPDFString(str) {\n  // See section 7.9.2.2 Text String Type.\n  // The string can contain some language codes bracketed with 0x0b,\n  // so we must remove them.\n  if (str[0] >= \"\\xEF\") {\n    let encoding;\n    if (str[0] === \"\\xFE\" && str[1] === \"\\xFF\") {\n      encoding = \"utf-16be\";\n      if (str.length % 2 === 1) {\n        str = str.slice(0, -1);\n      }\n    } else if (str[0] === \"\\xFF\" && str[1] === \"\\xFE\") {\n      encoding = \"utf-16le\";\n      if (str.length % 2 === 1) {\n        str = str.slice(0, -1);\n      }\n    } else if (str[0] === \"\\xEF\" && str[1] === \"\\xBB\" && str[2] === \"\\xBF\") {\n      encoding = \"utf-8\";\n    }\n\n    if (encoding) {\n      try {\n        const decoder = new TextDecoder(encoding, { fatal: true });\n        const buffer = stringToBytes(str);\n        const decoded = decoder.decode(buffer);\n        if (!decoded.includes(\"\\x1b\")) {\n          return decoded;\n        }\n        return decoded.replaceAll(/\\x1b[^\\x1b]*(?:\\x1b|$)/g, \"\");\n      } catch (ex) {\n        warn(`stringToPDFString: \"${ex}\".`);\n      }\n    }\n  }\n  // ISO Latin 1\n  const strBuf = [];\n  for (let i = 0, ii = str.length; i < ii; i++) {\n    const charCode = str.charCodeAt(i);\n    if (charCode === 0x1b) {\n      // eslint-disable-next-line no-empty\n      while (++i < ii && str.charCodeAt(i) !== 0x1b) {}\n      continue;\n    }\n    const code = PDFStringTranslateTable[charCode];\n    strBuf.push(code ? String.fromCharCode(code) : str.charAt(i));\n  }\n  return strBuf.join(\"\");\n}\n\nfunction stringToUTF8String(str) {\n  return decodeURIComponent(escape(str));\n}\n\nfunction utf8StringToString(str) {\n  return unescape(encodeURIComponent(str));\n}\n\nfunction isArrayBuffer(v) {\n  return typeof v === \"object\" && v?.byteLength !== undefined;\n}\n\nfunction isArrayEqual(arr1, arr2) {\n  if (arr1.length !== arr2.length) {\n    return false;\n  }\n  for (let i = 0, ii = arr1.length; i < ii; i++) {\n    if (arr1[i] !== arr2[i]) {\n      return false;\n    }\n  }\n  return true;\n}\n\nfunction getModificationDate(date = new Date()) {\n  const buffer = [\n    date.getUTCFullYear().toString(),\n    (date.getUTCMonth() + 1).toString().padStart(2, \"0\"),\n    date.getUTCDate().toString().padStart(2, \"0\"),\n    date.getUTCHours().toString().padStart(2, \"0\"),\n    date.getUTCMinutes().toString().padStart(2, \"0\"),\n    date.getUTCSeconds().toString().padStart(2, \"0\"),\n  ];\n\n  return buffer.join(\"\");\n}\n\nclass PromiseCapability {\n  #settled = false;\n\n  constructor() {\n    /**\n     * @type {Promise<any>} The Promise object.\n     */\n    this.promise = new Promise((resolve, reject) => {\n      /**\n       * @type {function} Fulfills the Promise.\n       */\n      this.resolve = data => {\n        this.#settled = true;\n        resolve(data);\n      };\n\n      /**\n       * @type {function} Rejects the Promise.\n       */\n      this.reject = reason => {\n        if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n          assert(reason instanceof Error, 'Expected valid \"reason\" argument.');\n        }\n        this.#settled = true;\n        reject(reason);\n      };\n    });\n  }\n\n  /**\n   * @type {boolean} If the Promise has been fulfilled/rejected.\n   */\n  get settled() {\n    return this.#settled;\n  }\n}\n\nlet NormalizeRegex = null;\nlet NormalizationMap = null;\nfunction normalizeUnicode(str) {\n  if (!NormalizeRegex) {\n    // In order to generate the following regex:\n    //  - create a PDF containing all the chars in the range 0000-FFFF with\n    //    a NFKC which is different of the char.\n    //  - copy and paste all those chars and get the ones where NFKC is\n    //    required.\n    // It appears that most the chars here contain some ligatures.\n    NormalizeRegex =\n      /([\\u00a0\\u00b5\\u037e\\u0eb3\\u2000-\\u200a\\u202f\\u2126\\ufb00-\\ufb04\\ufb06\\ufb20-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40-\\ufb41\\ufb43-\\ufb44\\ufb46-\\ufba1\\ufba4-\\ufba9\\ufbae-\\ufbb1\\ufbd3-\\ufbdc\\ufbde-\\ufbe7\\ufbea-\\ufbf8\\ufbfc-\\ufbfd\\ufc00-\\ufc5d\\ufc64-\\ufcf1\\ufcf5-\\ufd3d\\ufd88\\ufdf4\\ufdfa-\\ufdfb\\ufe71\\ufe77\\ufe79\\ufe7b\\ufe7d]+)|(\\ufb05+)/gu;\n    NormalizationMap = new Map([[\"ﬅ\", \"ſt\"]]);\n  }\n  return str.replaceAll(NormalizeRegex, (_, p1, p2) => {\n    return p1 ? p1.normalize(\"NFKC\") : NormalizationMap.get(p2);\n  });\n}\n\nfunction getUuid() {\n  if (\n    (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) ||\n    (typeof crypto !== \"undefined\" && typeof crypto?.randomUUID === \"function\")\n  ) {\n    return crypto.randomUUID();\n  }\n  const buf = new Uint8Array(32);\n  if (\n    typeof crypto !== \"undefined\" &&\n    typeof crypto?.getRandomValues === \"function\"\n  ) {\n    crypto.getRandomValues(buf);\n  } else {\n    for (let i = 0; i < 32; i++) {\n      buf[i] = Math.floor(Math.random() * 255);\n    }\n  }\n  return bytesToString(buf);\n}\n\nconst AnnotationPrefix = \"pdfjs_internal_id_\";\n\nexport {\n  AbortException,\n  AnnotationActionEventType,\n  AnnotationBorderStyleType,\n  AnnotationEditorParamsType,\n  AnnotationEditorPrefix,\n  AnnotationEditorType,\n  AnnotationFieldFlag,\n  AnnotationFlag,\n  AnnotationMode,\n  AnnotationPrefix,\n  AnnotationReplyType,\n  AnnotationType,\n  assert,\n  BaseException,\n  BASELINE_FACTOR,\n  bytesToString,\n  CMapCompressionType,\n  createValidAbsoluteUrl,\n  DocumentActionEventType,\n  FeatureTest,\n  FONT_IDENTITY_MATRIX,\n  FormatError,\n  getModificationDate,\n  getUuid,\n  getVerbosityLevel,\n  IDENTITY_MATRIX,\n  ImageKind,\n  info,\n  InvalidPDFException,\n  isArrayBuffer,\n  isArrayEqual,\n  isNodeJS,\n  LINE_DESCENT_FACTOR,\n  LINE_FACTOR,\n  MAX_IMAGE_SIZE_TO_CACHE,\n  MissingPDFException,\n  normalizeUnicode,\n  objectFromMap,\n  objectSize,\n  OPS,\n  PageActionEventType,\n  PasswordException,\n  PasswordResponses,\n  PermissionFlag,\n  PromiseCapability,\n  RenderingIntentFlag,\n  setVerbosityLevel,\n  shadow,\n  string32,\n  stringToBytes,\n  stringToPDFString,\n  stringToUTF8String,\n  TextRenderingMode,\n  UnexpectedResponseException,\n  UnknownErrorException,\n  unreachable,\n  utf8StringToString,\n  Util,\n  VerbosityLevel,\n  warn,\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","var webpackQueues = typeof Symbol === \"function\" ? Symbol(\"webpack queues\") : \"__webpack_queues__\";\nvar webpackExports = typeof Symbol === \"function\" ? Symbol(\"webpack exports\") : \"__webpack_exports__\";\nvar webpackError = typeof Symbol === \"function\" ? Symbol(\"webpack error\") : \"__webpack_error__\";\nvar resolveQueue = (queue) => {\n\tif(queue && queue.d < 1) {\n\t\tqueue.d = 1;\n\t\tqueue.forEach((fn) => (fn.r--));\n\t\tqueue.forEach((fn) => (fn.r-- ? fn.r++ : fn()));\n\t}\n}\nvar wrapDeps = (deps) => (deps.map((dep) => {\n\tif(dep !== null && typeof dep === \"object\") {\n\t\tif(dep[webpackQueues]) return dep;\n\t\tif(dep.then) {\n\t\t\tvar queue = [];\n\t\t\tqueue.d = 0;\n\t\t\tdep.then((r) => {\n\t\t\t\tobj[webpackExports] = r;\n\t\t\t\tresolveQueue(queue);\n\t\t\t}, (e) => {\n\t\t\t\tobj[webpackError] = e;\n\t\t\t\tresolveQueue(queue);\n\t\t\t});\n\t\t\tvar obj = {};\n\t\t\tobj[webpackQueues] = (fn) => (fn(queue));\n\t\t\treturn obj;\n\t\t}\n\t}\n\tvar ret = {};\n\tret[webpackQueues] = x => {};\n\tret[webpackExports] = dep;\n\treturn ret;\n}));\n__webpack_require__.a = (module, body, hasAwait) => {\n\tvar queue;\n\thasAwait && ((queue = []).d = -1);\n\tvar depQueues = new Set();\n\tvar exports = module.exports;\n\tvar currentDeps;\n\tvar outerResolve;\n\tvar reject;\n\tvar promise = new Promise((resolve, rej) => {\n\t\treject = rej;\n\t\touterResolve = resolve;\n\t});\n\tpromise[webpackExports] = exports;\n\tpromise[webpackQueues] = (fn) => (queue && fn(queue), depQueues.forEach(fn), promise[\"catch\"](x => {}));\n\tmodule.exports = promise;\n\tbody((deps) => {\n\t\tcurrentDeps = wrapDeps(deps);\n\t\tvar fn;\n\t\tvar getResult = () => (currentDeps.map((d) => {\n\t\t\tif(d[webpackError]) throw d[webpackError];\n\t\t\treturn d[webpackExports];\n\t\t}))\n\t\tvar promise = new Promise((resolve) => {\n\t\t\tfn = () => (resolve(getResult));\n\t\t\tfn.r = 0;\n\t\t\tvar fnQueue = (q) => (q !== queue && !depQueues.has(q) && (depQueues.add(q), q && !q.d && (fn.r++, q.push(fn))));\n\t\t\tcurrentDeps.map((dep) => (dep[webpackQueues](fnQueue)));\n\t\t});\n\t\treturn fn.r ? promise : getResult();\n\t}, (err) => ((err ? reject(promise[webpackError] = err) : outerResolve(exports)), resolveQueue(queue)));\n\tqueue && queue.d < 0 && (queue.d = 0);\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","","// startup\n// Load entry module and return exports\n// This entry module used 'module' so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(907);\n",""],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}