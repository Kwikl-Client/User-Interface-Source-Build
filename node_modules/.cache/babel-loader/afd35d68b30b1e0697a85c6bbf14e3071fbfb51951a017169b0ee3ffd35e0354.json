{"ast":null,"code":"import { Browser, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { isGroupAdaptive } from '../base/util';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { GroupModelGenerator } from '../services/group-model-generator';\nimport * as events from '../base/constant';\nimport * as literals from '../base/string-literals';\n/**\n * Content module is used to render grid content\n */\nvar VirtualRowModelGenerator = /** @class */function () {\n  function VirtualRowModelGenerator(parent) {\n    this.cOffsets = {};\n    this.cache = {};\n    this.rowCache = {};\n    this.data = {};\n    this.groups = {};\n    this.currentInfo = {};\n    this.parent = parent;\n    this.model = this.parent.pageSettings;\n    this.rowModelGenerator = this.parent.allowGrouping ? new GroupModelGenerator(this.parent) : new RowModelGenerator(this.parent);\n  }\n  VirtualRowModelGenerator.prototype.generateRows = function (data, e) {\n    var _this = this;\n    var isManualRefresh = false;\n    var info = e.virtualInfo = e.virtualInfo || this.getData();\n    var xAxis = info.sentinelInfo && info.sentinelInfo.axis === 'X';\n    var page = !xAxis && info.loadNext && !info.loadSelf ? info.nextInfo.page : info.page;\n    var result = [];\n    var indexes = this.getBlockIndexes(page);\n    var loadedBlocks = [];\n    if (this.currentInfo.blockIndexes) {\n      indexes = info.blockIndexes = e.virtualInfo.blockIndexes = this.includePrevPage ? this.currentInfo.blockIndexes.slice(1) : this.currentInfo.blockIndexes.slice(0, this.currentInfo.blockIndexes.length - 1);\n      isManualRefresh = true;\n    }\n    this.checkAndResetCache(e.requestType);\n    if (isGroupAdaptive(this.parent) && this.parent.vcRows.length) {\n      var dataRows = this.parent.vcRows.filter(function (row) {\n        return row.isDataRow;\n      });\n      if (this.parent.isManualRefresh && dataRows.length === data['records'].length || !this.parent.isManualRefresh) {\n        return result = this.parent.vcRows;\n      }\n    }\n    if (this.parent.enableColumnVirtualization) {\n      for (var i = 0; i < info.blockIndexes.length; i++) {\n        if (this.isBlockAvailable(info.blockIndexes[parseInt(i.toString(), 10)])) {\n          this.cache[info.blockIndexes[parseInt(i.toString(), 10)]] = this.rowModelGenerator.refreshRows(this.cache[info.blockIndexes[parseInt(i.toString(), 10)]]);\n        }\n      }\n    }\n    var values = info.blockIndexes;\n    var _loop_1 = function (i) {\n      if (!this_1.isBlockAvailable(values[parseInt(i.toString(), 10)])) {\n        var startIdx = !isNullOrUndefined(this_1.startIndex) ? this_1.startIndex : this_1.getStartIndex(values[parseInt(i.toString(), 10)], data);\n        var rows = this_1.rowModelGenerator.generateRows(data, {\n          virtualInfo: info,\n          startIndex: startIdx\n        });\n        if (isGroupAdaptive(this_1.parent) && !this_1.parent.vcRows.length) {\n          this_1.parent.vRows = rows;\n          this_1.parent.vcRows = rows;\n          this_1.parent.notify(events.refreshVirtualMaxPage, {});\n        }\n        var median = void 0;\n        if (isGroupAdaptive(this_1.parent)) {\n          this_1.getGroupVirtualRecordsByIndex(rows);\n        } else {\n          if (isManualRefresh) {\n            this_1.setBlockForManualRefresh(this_1.cache, indexes, rows);\n          } else {\n            median = ~~Math.max(rows.length, this_1.model.pageSize) / 2;\n            if (!this_1.isBlockAvailable(indexes[0])) {\n              this_1.cache[indexes[0]] = rows.slice(0, median);\n            }\n            if (!this_1.isBlockAvailable(indexes[1])) {\n              this_1.cache[indexes[1]] = rows.slice(median);\n            }\n          }\n        }\n      }\n      if (this_1.parent.groupSettings.columns.length && !xAxis && this_1.cache[values[parseInt(i.toString(), 10)]] && !this_1.parent.groupSettings.enableLazyLoading) {\n        this_1.cache[values[parseInt(i.toString(), 10)]] = this_1.updateGroupRow(this_1.cache[values[parseInt(i.toString(), 10)]], values[parseInt(i.toString(), 10)]);\n      }\n      if (!e.renderMovableContent && !e.renderFrozenRightContent && this_1.cache[values[parseInt(i.toString(), 10)]]) {\n        result.push.apply(result, this_1.cache[values[parseInt(i.toString(), 10)]]);\n        var DataRecord_1 = [];\n        if (this_1.parent.enableVirtualization && this_1.parent.groupSettings.columns.length) {\n          result.forEach(function (data) {\n            if (!DataRecord_1.includes(data)) {\n              DataRecord_1.push(data);\n            }\n          });\n        }\n        result = DataRecord_1.length ? DataRecord_1 : result;\n      }\n      if (this_1.isBlockAvailable(values[parseInt(i.toString(), 10)])) {\n        loadedBlocks.push(values[parseInt(i.toString(), 10)]);\n      }\n    };\n    var this_1 = this;\n    for (var i = 0; i < values.length; i++) {\n      _loop_1(i);\n    }\n    info.blockIndexes = loadedBlocks;\n    var grouping = 'records';\n    if (this.parent.allowGrouping && this.parent.groupSettings.columns.length) {\n      this.parent.currentViewData[\"\" + grouping] = result.map(function (m) {\n        return m.data;\n      });\n    } else {\n      this.parent.currentViewData = result.map(function (m) {\n        return m.data;\n      });\n    }\n    if (e.requestType === 'grouping') {\n      this.parent.currentViewData[\"\" + grouping] = this.parent.currentViewData[\"\" + grouping].filter(function (item, index) {\n        return _this.parent.currentViewData[\"\" + grouping].indexOf(item) === index;\n      });\n    }\n    if (isGroupAdaptive(this.parent) && this.parent.vcRows.length) {\n      if (['save', 'delete'].some(function (value) {\n        return e.requestType === value;\n      })) {\n        return result = this.parent.vcRows;\n      }\n    }\n    return result;\n  };\n  VirtualRowModelGenerator.prototype.setBlockForManualRefresh = function (cache, blocks, rows) {\n    var size = this.model.pageSize / 2;\n    if (this.includePrevPage) {\n      cache[blocks[0] - 1] = rows.slice(0, size);\n      cache[blocks[0]] = rows.slice(size, size * 2);\n      cache[blocks[1]] = rows.slice(size * 2, size * 3);\n      cache[blocks[2]] = rows.slice(size * 3, size * 4);\n    } else {\n      cache[blocks[0]] = rows.slice(0, size);\n      cache[blocks[1]] = rows.slice(size, size * 2);\n      cache[blocks[2]] = rows.slice(size * 2, size * 3);\n      cache[blocks[2] + 1] = rows.slice(size * 3, size * 4);\n    }\n  };\n  VirtualRowModelGenerator.prototype.getBlockIndexes = function (page) {\n    return [page + (page - 1), page * 2];\n  };\n  VirtualRowModelGenerator.prototype.getPage = function (block) {\n    return block % 2 === 0 ? block / 2 : (block + 1) / 2;\n  };\n  VirtualRowModelGenerator.prototype.isBlockAvailable = function (value) {\n    return value in this.cache;\n  };\n  VirtualRowModelGenerator.prototype.getData = function () {\n    return {\n      page: this.model.currentPage,\n      blockIndexes: this.getBlockIndexes(this.model.currentPage),\n      direction: 'down',\n      columnIndexes: this.parent.getColumnIndexesInView()\n    };\n  };\n  VirtualRowModelGenerator.prototype.getStartIndex = function (blk, data, full) {\n    if (full === void 0) {\n      full = true;\n    }\n    var page = this.getPage(blk);\n    var even = blk % 2 === 0;\n    var index = (page - 1) * this.model.pageSize;\n    return full || !even ? index : index + ~~(this.model.pageSize / 2);\n  };\n  VirtualRowModelGenerator.prototype.getColumnIndexes = function (content) {\n    var _this = this;\n    if (content === void 0) {\n      content = this.parent.getHeaderContent().querySelector('.' + literals.headerContent);\n    }\n    var indexes = [];\n    var sLeft = content.scrollLeft | 0;\n    var keys = Object.keys(this.cOffsets);\n    var cWidth = content.getBoundingClientRect().width;\n    sLeft = Math.min(this.cOffsets[keys.length - 1] - cWidth, sLeft);\n    var calWidth = Browser.isDevice ? 2 * cWidth : cWidth / 2;\n    var left = sLeft + cWidth + (sLeft === 0 ? calWidth : 0);\n    var frzLeftWidth = 0;\n    if (this.parent.isFrozenGrid()) {\n      frzLeftWidth = this.parent.leftrightColumnWidth('left');\n      if (this.parent.getFrozenMode() === literals.leftRight) {\n        var rightCol = this.parent.getVisibleFrozenRightCount();\n        keys.splice(keys.length - 1 - rightCol, rightCol);\n      }\n    }\n    keys.some(function (offset) {\n      var iOffset = Number(offset);\n      var offsetVal = _this.cOffsets[\"\" + offset];\n      var border = sLeft - calWidth + frzLeftWidth <= offsetVal && left + calWidth >= offsetVal;\n      if (border) {\n        indexes.push(iOffset);\n      }\n      return left + calWidth < offsetVal;\n    });\n    return indexes;\n  };\n  VirtualRowModelGenerator.prototype.checkAndResetCache = function (action) {\n    var actions = ['paging', 'refresh', 'sorting', 'filtering', 'searching', 'grouping', 'ungrouping', 'reorder', 'save', 'delete'];\n    var clear = actions.some(function (value) {\n      return action === value;\n    });\n    if (clear) {\n      this.cache = {};\n      this.data = {};\n      this.groups = {};\n    }\n    return clear;\n  };\n  VirtualRowModelGenerator.prototype.refreshColOffsets = function () {\n    var _this = this;\n    var col = 0;\n    this.cOffsets = {};\n    var gLen = this.parent.groupSettings.columns.length;\n    var cols = this.parent.columns;\n    var cLen = cols.length;\n    var isVisible = function (column) {\n      return column.visible && (!_this.parent.groupSettings.showGroupedColumn ? _this.parent.groupSettings.columns.indexOf(column.field) < 0 : column.visible);\n    };\n    var c = this.parent.groupSettings.columns;\n    for (var i = 0; i < c.length; i++) {\n      this.cOffsets[parseInt(i.toString(), 10)] = (this.cOffsets[i - 1] | 0) + 30;\n    }\n    // eslint-disable-next-line prefer-spread\n    var blocks = Array.apply(null, Array(cLen)).map(function () {\n      return col++;\n    });\n    for (var j = 0; j < blocks.length; j++) {\n      blocks[parseInt(j.toString(), 10)] = blocks[parseInt(j.toString(), 10)] + gLen;\n      this.cOffsets[blocks[parseInt(j.toString(), 10)]] = (this.cOffsets[blocks[parseInt(j.toString(), 10)] - 1] | 0) + (isVisible(cols[parseInt(j.toString(), 10)]) ? parseInt(cols[parseInt(j.toString(), 10)].width, 10) : 0);\n    }\n  };\n  VirtualRowModelGenerator.prototype.updateGroupRow = function (current, block) {\n    var currentFirst = current[0];\n    var rows = [];\n    var keys = Object.keys(this.cache);\n    for (var i = 0; i < keys.length; i++) {\n      if (Number(keys[parseInt(i.toString(), 10)]) < block) {\n        rows = rows.concat(this.cache[keys[parseInt(i.toString(), 10)]]);\n      }\n    }\n    if (currentFirst && currentFirst.isDataRow || block % 2 === 0) {\n      return current;\n    }\n    return this.iterateGroup(current, rows);\n  };\n  VirtualRowModelGenerator.prototype.iterateGroup = function (current, rows) {\n    var currentFirst = current[0];\n    var offset = 0;\n    if (currentFirst && currentFirst.isDataRow) {\n      return current;\n    }\n    var isPresent = current.some(function (row) {\n      return rows.some(function (oRow, index) {\n        var res = oRow && oRow.data.field !== undefined && oRow.data.field === row.data.field && oRow.data.key === row.data.key;\n        if (res) {\n          offset = index;\n        }\n        return res;\n      });\n    });\n    if (isPresent) {\n      current.shift();\n      current = this.iterateGroup(current, rows.slice(offset));\n    }\n    return current;\n  };\n  VirtualRowModelGenerator.prototype.getRows = function () {\n    var rows = [];\n    var keys = Object.keys(this.cache);\n    for (var i = 0; i < keys.length; i++) {\n      rows = rows.concat(this.cache[keys[parseInt(i.toString(), 10)]]);\n    }\n    return rows;\n  };\n  VirtualRowModelGenerator.prototype.generateCells = function (foreignKeyData) {\n    var cells = [];\n    var cols = this.parent.columnModel;\n    for (var i = 0; i < cols.length; i++) {\n      cells.push(this.rowModelGenerator.generateCell(cols[parseInt(i.toString(), 10)], null, null, null, null, foreignKeyData));\n    }\n    return cells;\n  };\n  VirtualRowModelGenerator.prototype.getGroupVirtualRecordsByIndex = function (rows) {\n    var blocks = this.parent.contentModule.getGroupedTotalBlocks();\n    var blockSize = this.parent.contentModule.getBlockSize();\n    for (var i = 1; i <= blocks; i++) {\n      var count = 0;\n      this.cache[parseInt(i.toString(), 10)] = [];\n      for (var j = (i - 1) * blockSize; j < rows.length; j++) {\n        if (count === blockSize) {\n          break;\n        }\n        this.cache[parseInt(i.toString(), 10)].push(rows[parseInt(j.toString(), 10)]);\n        if (rows[parseInt(j.toString(), 10)].isDataRow) {\n          count++;\n        }\n      }\n    }\n  };\n  return VirtualRowModelGenerator;\n}();\nexport { VirtualRowModelGenerator };","map":{"version":3,"names":["Browser","isNullOrUndefined","isGroupAdaptive","RowModelGenerator","GroupModelGenerator","events","literals","VirtualRowModelGenerator","parent","cOffsets","cache","rowCache","data","groups","currentInfo","model","pageSettings","rowModelGenerator","allowGrouping","prototype","generateRows","e","_this","isManualRefresh","info","virtualInfo","getData","xAxis","sentinelInfo","axis","page","loadNext","loadSelf","nextInfo","result","indexes","getBlockIndexes","loadedBlocks","blockIndexes","includePrevPage","slice","length","checkAndResetCache","requestType","vcRows","dataRows","filter","row","isDataRow","enableColumnVirtualization","i","isBlockAvailable","parseInt","toString","refreshRows","values","_loop_1","this_1","startIdx","startIndex","getStartIndex","rows","vRows","notify","refreshVirtualMaxPage","median","getGroupVirtualRecordsByIndex","setBlockForManualRefresh","Math","max","pageSize","groupSettings","columns","enableLazyLoading","updateGroupRow","renderMovableContent","renderFrozenRightContent","push","apply","DataRecord_1","enableVirtualization","forEach","includes","grouping","currentViewData","map","m","item","index","indexOf","some","value","blocks","size","getPage","block","currentPage","direction","columnIndexes","getColumnIndexesInView","blk","full","even","getColumnIndexes","content","getHeaderContent","querySelector","headerContent","sLeft","scrollLeft","keys","Object","cWidth","getBoundingClientRect","width","min","calWidth","isDevice","left","frzLeftWidth","isFrozenGrid","leftrightColumnWidth","getFrozenMode","leftRight","rightCol","getVisibleFrozenRightCount","splice","offset","iOffset","Number","offsetVal","border","action","actions","clear","refreshColOffsets","col","gLen","cols","cLen","isVisible","column","visible","showGroupedColumn","field","c","Array","j","current","currentFirst","concat","iterateGroup","isPresent","oRow","res","undefined","key","shift","getRows","generateCells","foreignKeyData","cells","columnModel","generateCell","contentModule","getGroupedTotalBlocks","blockSize","getBlockSize","count"],"sources":["/Users/saleem/Desktop/KClient/Web App/Ver_3.6/User Interface/website_Source files/node_modules/@syncfusion/ej2-grids/src/grid/services/virtual-row-model-generator.js"],"sourcesContent":["import { Browser, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { isGroupAdaptive } from '../base/util';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { GroupModelGenerator } from '../services/group-model-generator';\nimport * as events from '../base/constant';\nimport * as literals from '../base/string-literals';\n/**\n * Content module is used to render grid content\n */\nvar VirtualRowModelGenerator = /** @class */ (function () {\n    function VirtualRowModelGenerator(parent) {\n        this.cOffsets = {};\n        this.cache = {};\n        this.rowCache = {};\n        this.data = {};\n        this.groups = {};\n        this.currentInfo = {};\n        this.parent = parent;\n        this.model = this.parent.pageSettings;\n        this.rowModelGenerator = this.parent.allowGrouping ? new GroupModelGenerator(this.parent) : new RowModelGenerator(this.parent);\n    }\n    VirtualRowModelGenerator.prototype.generateRows = function (data, e) {\n        var _this = this;\n        var isManualRefresh = false;\n        var info = e.virtualInfo = e.virtualInfo || this.getData();\n        var xAxis = info.sentinelInfo && info.sentinelInfo.axis === 'X';\n        var page = !xAxis && info.loadNext && !info.loadSelf ? info.nextInfo.page : info.page;\n        var result = [];\n        var indexes = this.getBlockIndexes(page);\n        var loadedBlocks = [];\n        if (this.currentInfo.blockIndexes) {\n            indexes = info.blockIndexes = e.virtualInfo.blockIndexes = this.includePrevPage ? this.currentInfo.blockIndexes.slice(1)\n                : this.currentInfo.blockIndexes.slice(0, this.currentInfo.blockIndexes.length - 1);\n            isManualRefresh = true;\n        }\n        this.checkAndResetCache(e.requestType);\n        if (isGroupAdaptive(this.parent) && this.parent.vcRows.length) {\n            var dataRows = this.parent.vcRows.filter(function (row) { return row.isDataRow; });\n            if ((this.parent.isManualRefresh && dataRows.length === data['records'].length) || !this.parent.isManualRefresh) {\n                return result = this.parent.vcRows;\n            }\n        }\n        if (this.parent.enableColumnVirtualization) {\n            for (var i = 0; i < info.blockIndexes.length; i++) {\n                if (this.isBlockAvailable(info.blockIndexes[parseInt(i.toString(), 10)])) {\n                    this.cache[info.blockIndexes[parseInt(i.toString(), 10)]] =\n                        this.rowModelGenerator.refreshRows(this.cache[info.blockIndexes[parseInt(i.toString(), 10)]]);\n                }\n            }\n        }\n        var values = info.blockIndexes;\n        var _loop_1 = function (i) {\n            if (!this_1.isBlockAvailable(values[parseInt(i.toString(), 10)])) {\n                var startIdx = !isNullOrUndefined(this_1.startIndex) ? this_1.startIndex :\n                    this_1.getStartIndex(values[parseInt(i.toString(), 10)], data);\n                var rows = this_1.rowModelGenerator.generateRows(data, {\n                    virtualInfo: info, startIndex: startIdx\n                });\n                if (isGroupAdaptive(this_1.parent) && !this_1.parent.vcRows.length) {\n                    this_1.parent.vRows = rows;\n                    this_1.parent.vcRows = rows;\n                    this_1.parent.notify(events.refreshVirtualMaxPage, {});\n                }\n                var median = void 0;\n                if (isGroupAdaptive(this_1.parent)) {\n                    this_1.getGroupVirtualRecordsByIndex(rows);\n                }\n                else {\n                    if (isManualRefresh) {\n                        this_1.setBlockForManualRefresh(this_1.cache, indexes, rows);\n                    }\n                    else {\n                        median = ~~Math.max(rows.length, this_1.model.pageSize) / 2;\n                        if (!this_1.isBlockAvailable(indexes[0])) {\n                            this_1.cache[indexes[0]] = rows.slice(0, median);\n                        }\n                        if (!this_1.isBlockAvailable(indexes[1])) {\n                            this_1.cache[indexes[1]] = rows.slice(median);\n                        }\n                    }\n                }\n            }\n            if (this_1.parent.groupSettings.columns.length && !xAxis && this_1.cache[values[parseInt(i.toString(), 10)]] &&\n                !this_1.parent.groupSettings.enableLazyLoading) {\n                this_1.cache[values[parseInt(i.toString(), 10)]] =\n                    this_1.updateGroupRow(this_1.cache[values[parseInt(i.toString(), 10)]], values[parseInt(i.toString(), 10)]);\n            }\n            if (!e.renderMovableContent && !e.renderFrozenRightContent && this_1.cache[values[parseInt(i.toString(), 10)]]) {\n                result.push.apply(result, this_1.cache[values[parseInt(i.toString(), 10)]]);\n                var DataRecord_1 = [];\n                if (this_1.parent.enableVirtualization && this_1.parent.groupSettings.columns.length) {\n                    result.forEach(function (data) {\n                        if (!DataRecord_1.includes(data)) {\n                            DataRecord_1.push(data);\n                        }\n                    });\n                }\n                result = DataRecord_1.length ? DataRecord_1 : result;\n            }\n            if (this_1.isBlockAvailable(values[parseInt(i.toString(), 10)])) {\n                loadedBlocks.push(values[parseInt(i.toString(), 10)]);\n            }\n        };\n        var this_1 = this;\n        for (var i = 0; i < values.length; i++) {\n            _loop_1(i);\n        }\n        info.blockIndexes = loadedBlocks;\n        var grouping = 'records';\n        if (this.parent.allowGrouping && this.parent.groupSettings.columns.length) {\n            this.parent.currentViewData[\"\" + grouping] = result.map(function (m) { return m.data; });\n        }\n        else {\n            this.parent.currentViewData = result.map(function (m) { return m.data; });\n        }\n        if (e.requestType === 'grouping') {\n            this.parent.currentViewData[\"\" + grouping] = this.parent.currentViewData[\"\" + grouping].filter(function (item, index) {\n                return _this.parent.currentViewData[\"\" + grouping].indexOf(item) === index;\n            });\n        }\n        if (isGroupAdaptive(this.parent) && this.parent.vcRows.length) {\n            if (['save', 'delete'].some(function (value) { return e.requestType === value; })) {\n                return result = this.parent.vcRows;\n            }\n        }\n        return result;\n    };\n    VirtualRowModelGenerator.prototype.setBlockForManualRefresh = function (cache, blocks, rows) {\n        var size = this.model.pageSize / 2;\n        if (this.includePrevPage) {\n            cache[blocks[0] - 1] = rows.slice(0, size);\n            cache[blocks[0]] = rows.slice(size, size * 2);\n            cache[blocks[1]] = rows.slice(size * 2, size * 3);\n            cache[blocks[2]] = rows.slice(size * 3, size * 4);\n        }\n        else {\n            cache[blocks[0]] = rows.slice(0, size);\n            cache[blocks[1]] = rows.slice(size, size * 2);\n            cache[blocks[2]] = rows.slice(size * 2, size * 3);\n            cache[blocks[2] + 1] = rows.slice(size * 3, size * 4);\n        }\n    };\n    VirtualRowModelGenerator.prototype.getBlockIndexes = function (page) {\n        return [page + (page - 1), page * 2];\n    };\n    VirtualRowModelGenerator.prototype.getPage = function (block) {\n        return block % 2 === 0 ? block / 2 : (block + 1) / 2;\n    };\n    VirtualRowModelGenerator.prototype.isBlockAvailable = function (value) {\n        return value in this.cache;\n    };\n    VirtualRowModelGenerator.prototype.getData = function () {\n        return {\n            page: this.model.currentPage,\n            blockIndexes: this.getBlockIndexes(this.model.currentPage),\n            direction: 'down',\n            columnIndexes: this.parent.getColumnIndexesInView()\n        };\n    };\n    VirtualRowModelGenerator.prototype.getStartIndex = function (blk, data, full) {\n        if (full === void 0) { full = true; }\n        var page = this.getPage(blk);\n        var even = blk % 2 === 0;\n        var index = (page - 1) * this.model.pageSize;\n        return full || !even ? index : index + ~~(this.model.pageSize / 2);\n    };\n    VirtualRowModelGenerator.prototype.getColumnIndexes = function (content) {\n        var _this = this;\n        if (content === void 0) { content = this.parent.getHeaderContent().querySelector('.' + literals.headerContent); }\n        var indexes = [];\n        var sLeft = content.scrollLeft | 0;\n        var keys = Object.keys(this.cOffsets);\n        var cWidth = content.getBoundingClientRect().width;\n        sLeft = Math.min(this.cOffsets[keys.length - 1] - cWidth, sLeft);\n        var calWidth = Browser.isDevice ? 2 * cWidth : cWidth / 2;\n        var left = sLeft + cWidth + (sLeft === 0 ? calWidth : 0);\n        var frzLeftWidth = 0;\n        if (this.parent.isFrozenGrid()) {\n            frzLeftWidth = this.parent.leftrightColumnWidth('left');\n            if (this.parent.getFrozenMode() === literals.leftRight) {\n                var rightCol = this.parent.getVisibleFrozenRightCount();\n                keys.splice((keys.length - 1) - rightCol, rightCol);\n            }\n        }\n        keys.some(function (offset) {\n            var iOffset = Number(offset);\n            var offsetVal = _this.cOffsets[\"\" + offset];\n            var border = ((sLeft - calWidth) + frzLeftWidth) <= offsetVal && (left + calWidth) >= offsetVal;\n            if (border) {\n                indexes.push(iOffset);\n            }\n            return left + calWidth < offsetVal;\n        });\n        return indexes;\n    };\n    VirtualRowModelGenerator.prototype.checkAndResetCache = function (action) {\n        var actions = ['paging', 'refresh', 'sorting', 'filtering', 'searching', 'grouping', 'ungrouping', 'reorder',\n            'save', 'delete'];\n        var clear = actions.some(function (value) { return action === value; });\n        if (clear) {\n            this.cache = {};\n            this.data = {};\n            this.groups = {};\n        }\n        return clear;\n    };\n    VirtualRowModelGenerator.prototype.refreshColOffsets = function () {\n        var _this = this;\n        var col = 0;\n        this.cOffsets = {};\n        var gLen = this.parent.groupSettings.columns.length;\n        var cols = this.parent.columns;\n        var cLen = cols.length;\n        var isVisible = function (column) { return column.visible &&\n            (!_this.parent.groupSettings.showGroupedColumn ? _this.parent.groupSettings.columns.indexOf(column.field) < 0 : column.visible); };\n        var c = this.parent.groupSettings.columns;\n        for (var i = 0; i < c.length; i++) {\n            this.cOffsets[parseInt(i.toString(), 10)] = (this.cOffsets[i - 1] | 0) + 30;\n        }\n        // eslint-disable-next-line prefer-spread\n        var blocks = Array.apply(null, Array(cLen)).map(function () { return col++; });\n        for (var j = 0; j < blocks.length; j++) {\n            blocks[parseInt(j.toString(), 10)] = blocks[parseInt(j.toString(), 10)] + gLen;\n            this.cOffsets[blocks[parseInt(j.toString(), 10)]] =\n                (this.cOffsets[blocks[parseInt(j.toString(), 10)] - 1] | 0) + (isVisible(cols[parseInt(j.toString(), 10)]) ?\n                    parseInt(cols[parseInt(j.toString(), 10)].width, 10) : 0);\n        }\n    };\n    VirtualRowModelGenerator.prototype.updateGroupRow = function (current, block) {\n        var currentFirst = current[0];\n        var rows = [];\n        var keys = Object.keys(this.cache);\n        for (var i = 0; i < keys.length; i++) {\n            if (Number(keys[parseInt(i.toString(), 10)]) < block) {\n                rows = rows.concat(this.cache[keys[parseInt(i.toString(), 10)]]);\n            }\n        }\n        if ((currentFirst && currentFirst.isDataRow) || block % 2 === 0) {\n            return current;\n        }\n        return this.iterateGroup(current, rows);\n    };\n    VirtualRowModelGenerator.prototype.iterateGroup = function (current, rows) {\n        var currentFirst = current[0];\n        var offset = 0;\n        if (currentFirst && currentFirst.isDataRow) {\n            return current;\n        }\n        var isPresent = current.some(function (row) {\n            return rows.some(function (oRow, index) {\n                var res = oRow && oRow.data.field !== undefined\n                    && oRow.data.field === row.data.field &&\n                    oRow.data.key === row.data.key;\n                if (res) {\n                    offset = index;\n                }\n                return res;\n            });\n        });\n        if (isPresent) {\n            current.shift();\n            current = this.iterateGroup(current, rows.slice(offset));\n        }\n        return current;\n    };\n    VirtualRowModelGenerator.prototype.getRows = function () {\n        var rows = [];\n        var keys = Object.keys(this.cache);\n        for (var i = 0; i < keys.length; i++) {\n            rows = rows.concat(this.cache[keys[parseInt(i.toString(), 10)]]);\n        }\n        return rows;\n    };\n    VirtualRowModelGenerator.prototype.generateCells = function (foreignKeyData) {\n        var cells = [];\n        var cols = this.parent.columnModel;\n        for (var i = 0; i < cols.length; i++) {\n            cells.push(this.rowModelGenerator.generateCell(cols[parseInt(i.toString(), 10)], null, null, null, null, foreignKeyData));\n        }\n        return cells;\n    };\n    VirtualRowModelGenerator.prototype.getGroupVirtualRecordsByIndex = function (rows) {\n        var blocks = this.parent.contentModule.getGroupedTotalBlocks();\n        var blockSize = this.parent.contentModule.getBlockSize();\n        for (var i = 1; i <= blocks; i++) {\n            var count = 0;\n            this.cache[parseInt(i.toString(), 10)] = [];\n            for (var j = ((i - 1) * blockSize); j < rows.length; j++) {\n                if (count === blockSize) {\n                    break;\n                }\n                this.cache[parseInt(i.toString(), 10)].push(rows[parseInt(j.toString(), 10)]);\n                if (rows[parseInt(j.toString(), 10)].isDataRow) {\n                    count++;\n                }\n            }\n        }\n    };\n    return VirtualRowModelGenerator;\n}());\nexport { VirtualRowModelGenerator };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}