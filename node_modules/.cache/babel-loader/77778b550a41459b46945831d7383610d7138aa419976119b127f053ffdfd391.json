{"ast":null,"code":"import { debounce, isNullOrUndefined, detach } from '@syncfusion/ej2-base';\nimport { NodeSelection } from './../../selection/selection';\nimport * as EVENTS from './../../common/constant';\nimport { isIDevice, setEditFrameFocus } from '../../common/util';\n/**\n * `Undo` module is used to handle undo actions.\n */\nvar UndoRedoManager = /** @class */function () {\n  function UndoRedoManager(parent, options) {\n    this.undoRedoStack = [];\n    this.parent = parent;\n    this.undoRedoSteps = !isNullOrUndefined(options) ? options.undoRedoSteps : 30;\n    this.undoRedoTimer = !isNullOrUndefined(options) ? options.undoRedoTimer : 300;\n    this.addEventListener();\n  }\n  UndoRedoManager.prototype.addEventListener = function () {\n    var debounceListener = debounce(this.keyUp, this.undoRedoTimer);\n    this.parent.observer.on(EVENTS.KEY_UP_HANDLER, debounceListener, this);\n    this.parent.observer.on(EVENTS.KEY_DOWN_HANDLER, this.keyDown, this);\n    this.parent.observer.on(EVENTS.ACTION, this.onAction, this);\n    this.parent.observer.on(EVENTS.MODEL_CHANGED_PLUGIN, this.onPropertyChanged, this);\n  };\n  UndoRedoManager.prototype.onPropertyChanged = function (props) {\n    for (var _i = 0, _a = Object.keys(props.newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n      switch (prop) {\n        case 'undoRedoSteps':\n          this.undoRedoSteps = props.newProp.undoRedoSteps;\n          break;\n        case 'undoRedoTimer':\n          this.undoRedoTimer = props.newProp.undoRedoTimer;\n          break;\n      }\n    }\n  };\n  UndoRedoManager.prototype.removeEventListener = function () {\n    this.parent.observer.off(EVENTS.KEY_UP_HANDLER, this.keyUp);\n    this.parent.observer.off(EVENTS.KEY_DOWN_HANDLER, this.keyDown);\n    this.parent.observer.off(EVENTS.ACTION, this.onAction);\n  };\n  /**\n   * onAction method\n   *\n   * @param {IHtmlSubCommands} e - specifies the sub command\n   * @returns {void}\n   * @hidden\n    */\n  UndoRedoManager.prototype.onAction = function (e) {\n    if (e.subCommand === 'Undo') {\n      this.undo(e);\n    } else {\n      this.redo(e);\n    }\n  };\n  /**\n   * Destroys the ToolBar.\n   *\n   * @function destroy\n   * @returns {void}\n   * @hidden\n    */\n  UndoRedoManager.prototype.destroy = function () {\n    this.removeEventListener();\n  };\n  UndoRedoManager.prototype.keyDown = function (e) {\n    var event = e.event;\n    // eslint-disable-next-line\n    var proxy = this;\n    switch (event.action) {\n      case 'undo':\n        event.preventDefault();\n        proxy.undo(e);\n        break;\n      case 'redo':\n        event.preventDefault();\n        proxy.redo(e);\n        break;\n    }\n  };\n  UndoRedoManager.prototype.keyUp = function (e) {\n    if (e.event.keyCode !== 17 && !e.event.ctrlKey) {\n      this.saveData(e);\n    }\n  };\n  UndoRedoManager.prototype.getTextContentFromFragment = function (fragment) {\n    var textContent = '';\n    for (var i = 0; i < fragment.childNodes.length; i++) {\n      var childNode = fragment.childNodes[i];\n      if (childNode.nodeType === Node.TEXT_NODE) {\n        textContent += childNode.textContent;\n      } else if (childNode.nodeType === Node.ELEMENT_NODE) {\n        textContent += this.getTextContentFromFragment(childNode);\n      }\n    }\n    return textContent;\n  };\n  UndoRedoManager.prototype.isElementStructureEqual = function (previousFragment, currentFragment) {\n    if (previousFragment.childNodes.length !== currentFragment.childNodes.length) {\n      return false;\n    }\n    for (var i = 0; i < previousFragment.childNodes.length; i++) {\n      var previousFragmentNode = previousFragment.childNodes[i];\n      var currentFragmentNode = currentFragment.childNodes[i];\n      if (!previousFragmentNode || !currentFragmentNode) {\n        return false;\n      }\n      if (previousFragmentNode.nodeType !== currentFragmentNode.nodeType) {\n        return false;\n      }\n      if (previousFragmentNode.outerHTML !== currentFragmentNode.outerHTML) {\n        return false;\n      }\n    }\n    return true;\n  };\n  /**\n   * RTE collection stored html format.\n   *\n   * @function saveData\n   * @param {KeyboardEvent} e - specifies the keyboard event\n   * @returns {void}\n   * @hidden\n    */\n  UndoRedoManager.prototype.saveData = function (e) {\n    var range = new NodeSelection().getRange(this.parent.currentDocument);\n    var currentContainer = this.parent.editableElement === range.startContainer.parentElement ? range.startContainer.parentElement : range.startContainer;\n    for (var i = currentContainer.childNodes.length - 1; i >= 0; i--) {\n      if (!isNullOrUndefined(currentContainer.childNodes[i]) && currentContainer.childNodes[i].nodeName === '#text' && currentContainer.childNodes[i].textContent.length === 0 && currentContainer.childNodes[i].nodeName !== 'IMG' && currentContainer.childNodes[i].nodeName !== 'BR' && currentContainer.childNodes[i].nodeName && 'HR') {\n        detach(currentContainer.childNodes[i]);\n      }\n    }\n    range = new NodeSelection().getRange(this.parent.currentDocument);\n    var save = new NodeSelection().save(range, this.parent.currentDocument);\n    var clonedElement = this.parent.editableElement.cloneNode(true);\n    var fragment = document.createDocumentFragment();\n    while (clonedElement.firstChild) {\n      fragment.appendChild(clonedElement.firstChild);\n    }\n    var changEle = {\n      text: fragment,\n      range: save\n    };\n    if (this.undoRedoStack.length >= this.steps) {\n      this.undoRedoStack = this.undoRedoStack.slice(0, this.steps + 1);\n    }\n    if (this.undoRedoStack.length > 1 && this.undoRedoStack[this.undoRedoStack.length - 1].range.range.collapsed === range.collapsed && this.undoRedoStack[this.undoRedoStack.length - 1].range.startOffset === save.range.startOffset && this.undoRedoStack[this.undoRedoStack.length - 1].range.endOffset === save.range.endOffset && this.undoRedoStack[this.undoRedoStack.length - 1].range.range.startContainer === save.range.startContainer && this.getTextContentFromFragment(this.undoRedoStack[this.undoRedoStack.length - 1].text).trim() === this.getTextContentFromFragment(changEle.text).trim() && this.isElementStructureEqual(this.undoRedoStack[this.undoRedoStack.length - 1].text, changEle.text)) {\n      return;\n    }\n    this.undoRedoStack.push(changEle);\n    this.steps = this.undoRedoStack.length - 1;\n    if (this.steps > this.undoRedoSteps) {\n      this.undoRedoStack.shift();\n      this.steps--;\n    }\n    if (e && e.callBack) {\n      e.callBack();\n    }\n  };\n  /**\n   * Undo the editable text.\n   *\n   * @function undo\n   * @param {IHtmlSubCommands} e - specifies the sub commands\n   * @returns {void}\n   * @hidden\n    */\n  UndoRedoManager.prototype.undo = function (e) {\n    if (this.steps > 0) {\n      var range = this.undoRedoStack[this.steps - 1].range;\n      var removedContent = this.undoRedoStack[this.steps - 1].text;\n      this.parent.editableElement.innerHTML = '';\n      this.parent.editableElement.appendChild(removedContent.cloneNode(true));\n      this.parent.editableElement.focus();\n      if (isIDevice()) {\n        setEditFrameFocus(this.parent.editableElement, e.selector);\n      }\n      range.restore();\n      this.steps--;\n      if (e.callBack) {\n        e.callBack({\n          requestType: 'Undo',\n          editorMode: 'HTML',\n          range: range,\n          elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),\n          event: e.event\n        });\n      }\n    }\n  };\n  /**\n   * Redo the editable text.\n   *\n   * @param {IHtmlSubCommands} e - specifies the sub commands\n   * @function redo\n   * @returns {void}\n   * @hidden\n    */\n  UndoRedoManager.prototype.redo = function (e) {\n    if (this.undoRedoStack[this.steps + 1] != null) {\n      var range = this.undoRedoStack[this.steps + 1].range;\n      var addedContent = this.undoRedoStack[this.steps + 1].text;\n      this.parent.editableElement.innerHTML = '';\n      this.parent.editableElement.appendChild(addedContent.cloneNode(true));\n      this.parent.editableElement.focus();\n      if (isIDevice()) {\n        setEditFrameFocus(this.parent.editableElement, e.selector);\n      }\n      range.restore();\n      this.steps++;\n      if (e.callBack) {\n        e.callBack({\n          requestType: 'Redo',\n          editorMode: 'HTML',\n          range: range,\n          elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),\n          event: e.event\n        });\n      }\n    }\n  };\n  /**\n   * getUndoStatus method\n   *\n   * @returns {boolean} - returns the boolean value\n   * @hidden\n    */\n  UndoRedoManager.prototype.getUndoStatus = function () {\n    var status = {\n      undo: false,\n      redo: false\n    };\n    if (this.steps > 0) {\n      status.undo = true;\n    }\n    if (this.undoRedoStack[this.steps + 1] != null) {\n      status.redo = true;\n    }\n    return status;\n  };\n  return UndoRedoManager;\n}();\nexport { UndoRedoManager };","map":{"version":3,"names":["debounce","isNullOrUndefined","detach","NodeSelection","EVENTS","isIDevice","setEditFrameFocus","UndoRedoManager","parent","options","undoRedoStack","undoRedoSteps","undoRedoTimer","addEventListener","prototype","debounceListener","keyUp","observer","on","KEY_UP_HANDLER","KEY_DOWN_HANDLER","keyDown","ACTION","onAction","MODEL_CHANGED_PLUGIN","onPropertyChanged","props","_i","_a","Object","keys","newProp","length","prop","removeEventListener","off","e","subCommand","undo","redo","destroy","event","proxy","action","preventDefault","keyCode","ctrlKey","saveData","getTextContentFromFragment","fragment","textContent","i","childNodes","childNode","nodeType","Node","TEXT_NODE","ELEMENT_NODE","isElementStructureEqual","previousFragment","currentFragment","previousFragmentNode","currentFragmentNode","outerHTML","range","getRange","currentDocument","currentContainer","editableElement","startContainer","parentElement","nodeName","save","clonedElement","cloneNode","document","createDocumentFragment","firstChild","appendChild","changEle","text","steps","slice","collapsed","startOffset","endOffset","trim","push","shift","callBack","removedContent","innerHTML","focus","selector","restore","requestType","editorMode","elements","nodeSelection","getSelectedNodes","addedContent","getUndoStatus","status"],"sources":["/Users/saleem/Desktop/KClient/Web App/Ver_3.6/User Interface/website_Source files/node_modules/@syncfusion/ej2-richtexteditor/src/editor-manager/plugin/undo.js"],"sourcesContent":["import { debounce, isNullOrUndefined, detach } from '@syncfusion/ej2-base';\nimport { NodeSelection } from './../../selection/selection';\nimport * as EVENTS from './../../common/constant';\nimport { isIDevice, setEditFrameFocus } from '../../common/util';\n/**\n * `Undo` module is used to handle undo actions.\n */\nvar UndoRedoManager = /** @class */ (function () {\n    function UndoRedoManager(parent, options) {\n        this.undoRedoStack = [];\n        this.parent = parent;\n        this.undoRedoSteps = !isNullOrUndefined(options) ? options.undoRedoSteps : 30;\n        this.undoRedoTimer = !isNullOrUndefined(options) ? options.undoRedoTimer : 300;\n        this.addEventListener();\n    }\n    UndoRedoManager.prototype.addEventListener = function () {\n        var debounceListener = debounce(this.keyUp, this.undoRedoTimer);\n        this.parent.observer.on(EVENTS.KEY_UP_HANDLER, debounceListener, this);\n        this.parent.observer.on(EVENTS.KEY_DOWN_HANDLER, this.keyDown, this);\n        this.parent.observer.on(EVENTS.ACTION, this.onAction, this);\n        this.parent.observer.on(EVENTS.MODEL_CHANGED_PLUGIN, this.onPropertyChanged, this);\n    };\n    UndoRedoManager.prototype.onPropertyChanged = function (props) {\n        for (var _i = 0, _a = Object.keys(props.newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'undoRedoSteps':\n                    this.undoRedoSteps = props.newProp.undoRedoSteps;\n                    break;\n                case 'undoRedoTimer':\n                    this.undoRedoTimer = props.newProp.undoRedoTimer;\n                    break;\n            }\n        }\n    };\n    UndoRedoManager.prototype.removeEventListener = function () {\n        this.parent.observer.off(EVENTS.KEY_UP_HANDLER, this.keyUp);\n        this.parent.observer.off(EVENTS.KEY_DOWN_HANDLER, this.keyDown);\n        this.parent.observer.off(EVENTS.ACTION, this.onAction);\n    };\n    /**\n     * onAction method\n     *\n     * @param {IHtmlSubCommands} e - specifies the sub command\n     * @returns {void}\n     * @hidden\n\n     */\n    UndoRedoManager.prototype.onAction = function (e) {\n        if (e.subCommand === 'Undo') {\n            this.undo(e);\n        }\n        else {\n            this.redo(e);\n        }\n    };\n    /**\n     * Destroys the ToolBar.\n     *\n     * @function destroy\n     * @returns {void}\n     * @hidden\n\n     */\n    UndoRedoManager.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    UndoRedoManager.prototype.keyDown = function (e) {\n        var event = e.event;\n        // eslint-disable-next-line\n        var proxy = this;\n        switch (event.action) {\n            case 'undo':\n                event.preventDefault();\n                proxy.undo(e);\n                break;\n            case 'redo':\n                event.preventDefault();\n                proxy.redo(e);\n                break;\n        }\n    };\n    UndoRedoManager.prototype.keyUp = function (e) {\n        if (e.event.keyCode !== 17 && !e.event.ctrlKey) {\n            this.saveData(e);\n        }\n    };\n    UndoRedoManager.prototype.getTextContentFromFragment = function (fragment) {\n        var textContent = '';\n        for (var i = 0; i < fragment.childNodes.length; i++) {\n            var childNode = fragment.childNodes[i];\n            if (childNode.nodeType === Node.TEXT_NODE) {\n                textContent += childNode.textContent;\n            }\n            else if (childNode.nodeType === Node.ELEMENT_NODE) {\n                textContent += this.getTextContentFromFragment(childNode);\n            }\n        }\n        return textContent;\n    };\n    UndoRedoManager.prototype.isElementStructureEqual = function (previousFragment, currentFragment) {\n        if (previousFragment.childNodes.length !== currentFragment.childNodes.length) {\n            return false;\n        }\n        for (var i = 0; i < previousFragment.childNodes.length; i++) {\n            var previousFragmentNode = previousFragment.childNodes[i];\n            var currentFragmentNode = currentFragment.childNodes[i];\n            if (!previousFragmentNode || !currentFragmentNode) {\n                return false;\n            }\n            if (previousFragmentNode.nodeType !== currentFragmentNode.nodeType) {\n                return false;\n            }\n            if (previousFragmentNode.outerHTML !== currentFragmentNode.outerHTML) {\n                return false;\n            }\n        }\n        return true;\n    };\n    /**\n     * RTE collection stored html format.\n     *\n     * @function saveData\n     * @param {KeyboardEvent} e - specifies the keyboard event\n     * @returns {void}\n     * @hidden\n\n     */\n    UndoRedoManager.prototype.saveData = function (e) {\n        var range = new NodeSelection().getRange(this.parent.currentDocument);\n        var currentContainer = this.parent.editableElement === range.startContainer.parentElement ?\n            range.startContainer.parentElement : range.startContainer;\n        for (var i = currentContainer.childNodes.length - 1; i >= 0; i--) {\n            if (!isNullOrUndefined(currentContainer.childNodes[i]) && currentContainer.childNodes[i].nodeName === '#text' &&\n                currentContainer.childNodes[i].textContent.length === 0 && currentContainer.childNodes[i].nodeName !== 'IMG' &&\n                currentContainer.childNodes[i].nodeName !== 'BR' && currentContainer.childNodes[i].nodeName && 'HR') {\n                detach(currentContainer.childNodes[i]);\n            }\n        }\n        range = new NodeSelection().getRange(this.parent.currentDocument);\n        var save = new NodeSelection().save(range, this.parent.currentDocument);\n        var clonedElement = this.parent.editableElement.cloneNode(true);\n        var fragment = document.createDocumentFragment();\n        while (clonedElement.firstChild) {\n            fragment.appendChild(clonedElement.firstChild);\n        }\n        var changEle = { text: fragment, range: save };\n        if (this.undoRedoStack.length >= this.steps) {\n            this.undoRedoStack = this.undoRedoStack.slice(0, this.steps + 1);\n        }\n        if (this.undoRedoStack.length > 1 && (this.undoRedoStack[this.undoRedoStack.length - 1].range.range.collapsed === range.collapsed)\n            && (this.undoRedoStack[this.undoRedoStack.length - 1].range.startOffset === save.range.startOffset) &&\n            (this.undoRedoStack[this.undoRedoStack.length - 1].range.endOffset === save.range.endOffset) &&\n            (this.undoRedoStack[this.undoRedoStack.length - 1].range.range.startContainer === save.range.startContainer) &&\n            (this.getTextContentFromFragment(this.undoRedoStack[this.undoRedoStack.length - 1].text).trim() ===\n                this.getTextContentFromFragment(changEle.text).trim()) &&\n            this.isElementStructureEqual(this.undoRedoStack[this.undoRedoStack.length - 1].text, changEle.text)) {\n            return;\n        }\n        this.undoRedoStack.push(changEle);\n        this.steps = this.undoRedoStack.length - 1;\n        if (this.steps > this.undoRedoSteps) {\n            this.undoRedoStack.shift();\n            this.steps--;\n        }\n        if (e && e.callBack) {\n            e.callBack();\n        }\n    };\n    /**\n     * Undo the editable text.\n     *\n     * @function undo\n     * @param {IHtmlSubCommands} e - specifies the sub commands\n     * @returns {void}\n     * @hidden\n\n     */\n    UndoRedoManager.prototype.undo = function (e) {\n        if (this.steps > 0) {\n            var range = this.undoRedoStack[this.steps - 1].range;\n            var removedContent = this.undoRedoStack[this.steps - 1].text;\n            this.parent.editableElement.innerHTML = '';\n            this.parent.editableElement.appendChild(removedContent.cloneNode(true));\n            this.parent.editableElement.focus();\n            if (isIDevice()) {\n                setEditFrameFocus(this.parent.editableElement, e.selector);\n            }\n            range.restore();\n            this.steps--;\n            if (e.callBack) {\n                e.callBack({\n                    requestType: 'Undo',\n                    editorMode: 'HTML',\n                    range: range,\n                    elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),\n                    event: e.event\n                });\n            }\n        }\n    };\n    /**\n     * Redo the editable text.\n     *\n     * @param {IHtmlSubCommands} e - specifies the sub commands\n     * @function redo\n     * @returns {void}\n     * @hidden\n\n     */\n    UndoRedoManager.prototype.redo = function (e) {\n        if (this.undoRedoStack[this.steps + 1] != null) {\n            var range = this.undoRedoStack[this.steps + 1].range;\n            var addedContent = this.undoRedoStack[this.steps + 1].text;\n            this.parent.editableElement.innerHTML = '';\n            this.parent.editableElement.appendChild(addedContent.cloneNode(true));\n            this.parent.editableElement.focus();\n            if (isIDevice()) {\n                setEditFrameFocus(this.parent.editableElement, e.selector);\n            }\n            range.restore();\n            this.steps++;\n            if (e.callBack) {\n                e.callBack({\n                    requestType: 'Redo',\n                    editorMode: 'HTML',\n                    range: range,\n                    elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),\n                    event: e.event\n                });\n            }\n        }\n    };\n    /**\n     * getUndoStatus method\n     *\n     * @returns {boolean} - returns the boolean value\n     * @hidden\n\n     */\n    UndoRedoManager.prototype.getUndoStatus = function () {\n        var status = { undo: false, redo: false };\n        if (this.steps > 0) {\n            status.undo = true;\n        }\n        if (this.undoRedoStack[this.steps + 1] != null) {\n            status.redo = true;\n        }\n        return status;\n    };\n    return UndoRedoManager;\n}());\nexport { UndoRedoManager };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}